(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function WA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function wB(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function i(){var r=!1;try{r=this instanceof i}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var e4={exports:{}},uC={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a7;function Zj(){if(a7)return uC;a7=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,a){var l=null;if(a!==void 0&&(l=""+a),r.key!==void 0&&(l=""+r.key),"key"in r){a={};for(var o in r)o!=="key"&&(a[o]=r[o])}else a=r;return r=a.ref,{$$typeof:n,type:i,key:l,ref:r!==void 0?r:null,props:a}}return uC.Fragment=e,uC.jsx=t,uC.jsxs=t,uC}var s7;function Xj(){return s7||(s7=1,e4.exports=Zj()),e4.exports}var ce=Xj(),t4={exports:{}},ia={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l7;function Jj(){if(l7)return ia;l7=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),C=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),O=Symbol.iterator;function U(be){return be===null||typeof be!="object"?null:(be=O&&be[O]||be["@@iterator"],typeof be=="function"?be:null)}var K={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,j={};function Q(be,Ne,tt){this.props=be,this.context=Ne,this.refs=j,this.updater=tt||K}Q.prototype.isReactComponent={},Q.prototype.setState=function(be,Ne){if(typeof be!="object"&&typeof be!="function"&&be!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,be,Ne,"setState")},Q.prototype.forceUpdate=function(be){this.updater.enqueueForceUpdate(this,be,"forceUpdate")};function ee(){}ee.prototype=Q.prototype;function V(be,Ne,tt){this.props=be,this.context=Ne,this.refs=j,this.updater=tt||K}var ae=V.prototype=new ee;ae.constructor=V,z(ae,Q.prototype),ae.isPureReactComponent=!0;var ne=Array.isArray,Z={H:null,A:null,T:null,S:null,V:null},oe=Object.prototype.hasOwnProperty;function W(be,Ne,tt,lt,It,pt){return tt=pt.ref,{$$typeof:n,type:be,key:Ne,ref:tt!==void 0?tt:null,props:pt}}function ue(be,Ne){return W(be.type,Ne,void 0,void 0,void 0,be.props)}function ge(be){return typeof be=="object"&&be!==null&&be.$$typeof===n}function ye(be){var Ne={"=":"=0",":":"=2"};return"$"+be.replace(/[=:]/g,function(tt){return Ne[tt]})}var Me=/\/+/g;function Be(be,Ne){return typeof be=="object"&&be!==null&&be.key!=null?ye(""+be.key):Ne.toString(36)}function we(){}function qe(be){switch(be.status){case"fulfilled":return be.value;case"rejected":throw be.reason;default:switch(typeof be.status=="string"?be.then(we,we):(be.status="pending",be.then(function(Ne){be.status==="pending"&&(be.status="fulfilled",be.value=Ne)},function(Ne){be.status==="pending"&&(be.status="rejected",be.reason=Ne)})),be.status){case"fulfilled":return be.value;case"rejected":throw be.reason}}throw be}function xe(be,Ne,tt,lt,It){var pt=typeof be;(pt==="undefined"||pt==="boolean")&&(be=null);var St=!1;if(be===null)St=!0;else switch(pt){case"bigint":case"string":case"number":St=!0;break;case"object":switch(be.$$typeof){case n:case e:St=!0;break;case S:return St=be._init,xe(St(be._payload),Ne,tt,lt,It)}}if(St)return It=It(be),St=lt===""?"."+Be(be,0):lt,ne(It)?(tt="",St!=null&&(tt=St.replace(Me,"$&/")+"/"),xe(It,Ne,tt,"",function(Pe){return Pe})):It!=null&&(ge(It)&&(It=ue(It,tt+(It.key==null||be&&be.key===It.key?"":(""+It.key).replace(Me,"$&/")+"/")+St)),Ne.push(It)),1;St=0;var Rt=lt===""?".":lt+":";if(ne(be))for(var Le=0;Le<be.length;Le++)lt=be[Le],pt=Rt+Be(lt,Le),St+=xe(lt,Ne,tt,pt,It);else if(Le=U(be),typeof Le=="function")for(be=Le.call(be),Le=0;!(lt=be.next()).done;)lt=lt.value,pt=Rt+Be(lt,Le++),St+=xe(lt,Ne,tt,pt,It);else if(pt==="object"){if(typeof be.then=="function")return xe(qe(be),Ne,tt,lt,It);throw Ne=String(be),Error("Objects are not valid as a React child (found: "+(Ne==="[object Object]"?"object with keys {"+Object.keys(be).join(", ")+"}":Ne)+"). If you meant to render a collection of children, use an array instead.")}return St}function ze(be,Ne,tt){if(be==null)return be;var lt=[],It=0;return xe(be,lt,"","",function(pt){return Ne.call(tt,pt,It++)}),lt}function ot(be){if(be._status===-1){var Ne=be._result;Ne=Ne(),Ne.then(function(tt){(be._status===0||be._status===-1)&&(be._status=1,be._result=tt)},function(tt){(be._status===0||be._status===-1)&&(be._status=2,be._result=tt)}),be._status===-1&&(be._status=0,be._result=Ne)}if(be._status===1)return be._result.default;throw be._result}var yt=typeof reportError=="function"?reportError:function(be){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof be=="object"&&be!==null&&typeof be.message=="string"?String(be.message):String(be),error:be});if(!window.dispatchEvent(Ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",be);return}console.error(be)};function nt(){}return ia.Children={map:ze,forEach:function(be,Ne,tt){ze(be,function(){Ne.apply(this,arguments)},tt)},count:function(be){var Ne=0;return ze(be,function(){Ne++}),Ne},toArray:function(be){return ze(be,function(Ne){return Ne})||[]},only:function(be){if(!ge(be))throw Error("React.Children.only expected to receive a single React element child.");return be}},ia.Component=Q,ia.Fragment=t,ia.Profiler=r,ia.PureComponent=V,ia.StrictMode=i,ia.Suspense=m,ia.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Z,ia.__COMPILER_RUNTIME={__proto__:null,c:function(be){return Z.H.useMemoCache(be)}},ia.cache=function(be){return function(){return be.apply(null,arguments)}},ia.cloneElement=function(be,Ne,tt){if(be==null)throw Error("The argument must be a React element, but you passed "+be+".");var lt=z({},be.props),It=be.key,pt=void 0;if(Ne!=null)for(St in Ne.ref!==void 0&&(pt=void 0),Ne.key!==void 0&&(It=""+Ne.key),Ne)!oe.call(Ne,St)||St==="key"||St==="__self"||St==="__source"||St==="ref"&&Ne.ref===void 0||(lt[St]=Ne[St]);var St=arguments.length-2;if(St===1)lt.children=tt;else if(1<St){for(var Rt=Array(St),Le=0;Le<St;Le++)Rt[Le]=arguments[Le+2];lt.children=Rt}return W(be.type,It,void 0,void 0,pt,lt)},ia.createContext=function(be){return be={$$typeof:l,_currentValue:be,_currentValue2:be,_threadCount:0,Provider:null,Consumer:null},be.Provider=be,be.Consumer={$$typeof:a,_context:be},be},ia.createElement=function(be,Ne,tt){var lt,It={},pt=null;if(Ne!=null)for(lt in Ne.key!==void 0&&(pt=""+Ne.key),Ne)oe.call(Ne,lt)&&lt!=="key"&&lt!=="__self"&&lt!=="__source"&&(It[lt]=Ne[lt]);var St=arguments.length-2;if(St===1)It.children=tt;else if(1<St){for(var Rt=Array(St),Le=0;Le<St;Le++)Rt[Le]=arguments[Le+2];It.children=Rt}if(be&&be.defaultProps)for(lt in St=be.defaultProps,St)It[lt]===void 0&&(It[lt]=St[lt]);return W(be,pt,void 0,void 0,null,It)},ia.createRef=function(){return{current:null}},ia.forwardRef=function(be){return{$$typeof:o,render:be}},ia.isValidElement=ge,ia.lazy=function(be){return{$$typeof:S,_payload:{_status:-1,_result:be},_init:ot}},ia.memo=function(be,Ne){return{$$typeof:C,type:be,compare:Ne===void 0?null:Ne}},ia.startTransition=function(be){var Ne=Z.T,tt={};Z.T=tt;try{var lt=be(),It=Z.S;It!==null&&It(tt,lt),typeof lt=="object"&&lt!==null&&typeof lt.then=="function"&&lt.then(nt,yt)}catch(pt){yt(pt)}finally{Z.T=Ne}},ia.unstable_useCacheRefresh=function(){return Z.H.useCacheRefresh()},ia.use=function(be){return Z.H.use(be)},ia.useActionState=function(be,Ne,tt){return Z.H.useActionState(be,Ne,tt)},ia.useCallback=function(be,Ne){return Z.H.useCallback(be,Ne)},ia.useContext=function(be){return Z.H.useContext(be)},ia.useDebugValue=function(){},ia.useDeferredValue=function(be,Ne){return Z.H.useDeferredValue(be,Ne)},ia.useEffect=function(be,Ne,tt){var lt=Z.H;if(typeof tt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return lt.useEffect(be,Ne)},ia.useId=function(){return Z.H.useId()},ia.useImperativeHandle=function(be,Ne,tt){return Z.H.useImperativeHandle(be,Ne,tt)},ia.useInsertionEffect=function(be,Ne){return Z.H.useInsertionEffect(be,Ne)},ia.useLayoutEffect=function(be,Ne){return Z.H.useLayoutEffect(be,Ne)},ia.useMemo=function(be,Ne){return Z.H.useMemo(be,Ne)},ia.useOptimistic=function(be,Ne){return Z.H.useOptimistic(be,Ne)},ia.useReducer=function(be,Ne,tt){return Z.H.useReducer(be,Ne,tt)},ia.useRef=function(be){return Z.H.useRef(be)},ia.useState=function(be){return Z.H.useState(be)},ia.useSyncExternalStore=function(be,Ne,tt){return Z.H.useSyncExternalStore(be,Ne,tt)},ia.useTransition=function(){return Z.H.useTransition()},ia.version="19.1.1",ia}var A7;function pl(){return A7||(A7=1,t4.exports=Jj()),t4.exports}var Gt=pl();const ni=WA(Gt);var DU={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Sv=ni.createContext&&ni.createContext(DU),eW=["attr","size","title"];function tW(n,e){if(n==null)return{};var t=nW(n,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function nW(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function Px(){return Px=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Px.apply(this,arguments)}function u7(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Kx(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?u7(Object(t),!0).forEach(function(i){iW(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):u7(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function iW(n,e,t){return e=rW(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function rW(n){var e=oW(n,"string");return typeof e=="symbol"?e:e+""}function oW(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function RU(n){return n&&n.map((e,t)=>ni.createElement(e.tag,Kx({key:t},e.attr),RU(e.child)))}function nl(n){return e=>ni.createElement(aW,Px({attr:Kx({},n.attr)},e),RU(n.child))}function aW(n){var e=t=>{var{attr:i,size:r,title:a}=n,l=tW(n,eW),o=r||t.size||"1em",m;return t.className&&(m=t.className),n.className&&(m=(m?m+" ":"")+n.className),ni.createElement("svg",Px({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,l,{className:m,style:Kx(Kx({color:n.color||t.color},t.style),n.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),a&&ni.createElement("title",null,a),n.children)};return Sv!==void 0?ni.createElement(Sv.Consumer,null,t=>e(t)):e(DU)}var n4={exports:{}},cC={},i4={exports:{}},r4={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c7;function sW(){return c7||(c7=1,function(n){function e(ze,ot){var yt=ze.length;ze.push(ot);e:for(;0<yt;){var nt=yt-1>>>1,be=ze[nt];if(0<r(be,ot))ze[nt]=ot,ze[yt]=be,yt=nt;else break e}}function t(ze){return ze.length===0?null:ze[0]}function i(ze){if(ze.length===0)return null;var ot=ze[0],yt=ze.pop();if(yt!==ot){ze[0]=yt;e:for(var nt=0,be=ze.length,Ne=be>>>1;nt<Ne;){var tt=2*(nt+1)-1,lt=ze[tt],It=tt+1,pt=ze[It];if(0>r(lt,yt))It<be&&0>r(pt,lt)?(ze[nt]=pt,ze[It]=yt,nt=It):(ze[nt]=lt,ze[tt]=yt,nt=tt);else if(It<be&&0>r(pt,yt))ze[nt]=pt,ze[It]=yt,nt=It;else break e}}return ot}function r(ze,ot){var yt=ze.sortIndex-ot.sortIndex;return yt!==0?yt:ze.id-ot.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,o=l.now();n.unstable_now=function(){return l.now()-o}}var m=[],C=[],S=1,O=null,U=3,K=!1,z=!1,j=!1,Q=!1,ee=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,ae=typeof setImmediate<"u"?setImmediate:null;function ne(ze){for(var ot=t(C);ot!==null;){if(ot.callback===null)i(C);else if(ot.startTime<=ze)i(C),ot.sortIndex=ot.expirationTime,e(m,ot);else break;ot=t(C)}}function Z(ze){if(j=!1,ne(ze),!z)if(t(m)!==null)z=!0,oe||(oe=!0,Be());else{var ot=t(C);ot!==null&&xe(Z,ot.startTime-ze)}}var oe=!1,W=-1,ue=5,ge=-1;function ye(){return Q?!0:!(n.unstable_now()-ge<ue)}function Me(){if(Q=!1,oe){var ze=n.unstable_now();ge=ze;var ot=!0;try{e:{z=!1,j&&(j=!1,V(W),W=-1),K=!0;var yt=U;try{t:{for(ne(ze),O=t(m);O!==null&&!(O.expirationTime>ze&&ye());){var nt=O.callback;if(typeof nt=="function"){O.callback=null,U=O.priorityLevel;var be=nt(O.expirationTime<=ze);if(ze=n.unstable_now(),typeof be=="function"){O.callback=be,ne(ze),ot=!0;break t}O===t(m)&&i(m),ne(ze)}else i(m);O=t(m)}if(O!==null)ot=!0;else{var Ne=t(C);Ne!==null&&xe(Z,Ne.startTime-ze),ot=!1}}break e}finally{O=null,U=yt,K=!1}ot=void 0}}finally{ot?Be():oe=!1}}}var Be;if(typeof ae=="function")Be=function(){ae(Me)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,qe=we.port2;we.port1.onmessage=Me,Be=function(){qe.postMessage(null)}}else Be=function(){ee(Me,0)};function xe(ze,ot){W=ee(function(){ze(n.unstable_now())},ot)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ze){ze.callback=null},n.unstable_forceFrameRate=function(ze){0>ze||125<ze?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ue=0<ze?Math.floor(1e3/ze):5},n.unstable_getCurrentPriorityLevel=function(){return U},n.unstable_next=function(ze){switch(U){case 1:case 2:case 3:var ot=3;break;default:ot=U}var yt=U;U=ot;try{return ze()}finally{U=yt}},n.unstable_requestPaint=function(){Q=!0},n.unstable_runWithPriority=function(ze,ot){switch(ze){case 1:case 2:case 3:case 4:case 5:break;default:ze=3}var yt=U;U=ze;try{return ot()}finally{U=yt}},n.unstable_scheduleCallback=function(ze,ot,yt){var nt=n.unstable_now();switch(typeof yt=="object"&&yt!==null?(yt=yt.delay,yt=typeof yt=="number"&&0<yt?nt+yt:nt):yt=nt,ze){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=yt+be,ze={id:S++,callback:ot,priorityLevel:ze,startTime:yt,expirationTime:be,sortIndex:-1},yt>nt?(ze.sortIndex=yt,e(C,ze),t(m)===null&&ze===t(C)&&(j?(V(W),W=-1):j=!0,xe(Z,yt-nt))):(ze.sortIndex=be,e(m,ze),z||K||(z=!0,oe||(oe=!0,Be()))),ze},n.unstable_shouldYield=ye,n.unstable_wrapCallback=function(ze){var ot=U;return function(){var yt=U;U=ot;try{return ze.apply(this,arguments)}finally{U=yt}}}}(r4)),r4}var h7;function lW(){return h7||(h7=1,i4.exports=sW()),i4.exports}var o4={exports:{}},Rh={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d7;function AW(){if(d7)return Rh;d7=1;var n=pl();function e(m){var C="https://react.dev/errors/"+m;if(1<arguments.length){C+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)C+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+m+"; visit "+C+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(m,C,S){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:O==null?null:""+O,children:m,containerInfo:C,implementation:S}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(m,C){if(m==="font")return"";if(typeof C=="string")return C==="use-credentials"?C:""}return Rh.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Rh.createPortal=function(m,C){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!C||C.nodeType!==1&&C.nodeType!==9&&C.nodeType!==11)throw Error(e(299));return a(m,C,null,S)},Rh.flushSync=function(m){var C=l.T,S=i.p;try{if(l.T=null,i.p=2,m)return m()}finally{l.T=C,i.p=S,i.d.f()}},Rh.preconnect=function(m,C){typeof m=="string"&&(C?(C=C.crossOrigin,C=typeof C=="string"?C==="use-credentials"?C:"":void 0):C=null,i.d.C(m,C))},Rh.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},Rh.preinit=function(m,C){if(typeof m=="string"&&C&&typeof C.as=="string"){var S=C.as,O=o(S,C.crossOrigin),U=typeof C.integrity=="string"?C.integrity:void 0,K=typeof C.fetchPriority=="string"?C.fetchPriority:void 0;S==="style"?i.d.S(m,typeof C.precedence=="string"?C.precedence:void 0,{crossOrigin:O,integrity:U,fetchPriority:K}):S==="script"&&i.d.X(m,{crossOrigin:O,integrity:U,fetchPriority:K,nonce:typeof C.nonce=="string"?C.nonce:void 0})}},Rh.preinitModule=function(m,C){if(typeof m=="string")if(typeof C=="object"&&C!==null){if(C.as==null||C.as==="script"){var S=o(C.as,C.crossOrigin);i.d.M(m,{crossOrigin:S,integrity:typeof C.integrity=="string"?C.integrity:void 0,nonce:typeof C.nonce=="string"?C.nonce:void 0})}}else C==null&&i.d.M(m)},Rh.preload=function(m,C){if(typeof m=="string"&&typeof C=="object"&&C!==null&&typeof C.as=="string"){var S=C.as,O=o(S,C.crossOrigin);i.d.L(m,S,{crossOrigin:O,integrity:typeof C.integrity=="string"?C.integrity:void 0,nonce:typeof C.nonce=="string"?C.nonce:void 0,type:typeof C.type=="string"?C.type:void 0,fetchPriority:typeof C.fetchPriority=="string"?C.fetchPriority:void 0,referrerPolicy:typeof C.referrerPolicy=="string"?C.referrerPolicy:void 0,imageSrcSet:typeof C.imageSrcSet=="string"?C.imageSrcSet:void 0,imageSizes:typeof C.imageSizes=="string"?C.imageSizes:void 0,media:typeof C.media=="string"?C.media:void 0})}},Rh.preloadModule=function(m,C){if(typeof m=="string")if(C){var S=o(C.as,C.crossOrigin);i.d.m(m,{as:typeof C.as=="string"&&C.as!=="script"?C.as:void 0,crossOrigin:S,integrity:typeof C.integrity=="string"?C.integrity:void 0})}else i.d.m(m)},Rh.requestFormReset=function(m){i.d.r(m)},Rh.unstable_batchedUpdates=function(m,C){return m(C)},Rh.useFormState=function(m,C,S){return l.H.useFormState(m,C,S)},Rh.useFormStatus=function(){return l.H.useHostTransitionStatus()},Rh.version="19.1.1",Rh}var f7;function O3(){if(f7)return o4.exports;f7=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),o4.exports=AW(),o4.exports}var m7;function uW(){if(m7)return cC;m7=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=lW(),e=pl(),t=O3();function i(u){var p="https://react.dev/errors/"+u;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+u+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function a(u){var p=u,b=u;if(u.alternate)for(;p.return;)p=p.return;else{u=p;do p=u,(p.flags&4098)!==0&&(b=p.return),u=p.return;while(u)}return p.tag===3?b:null}function l(u){if(u.tag===13){var p=u.memoizedState;if(p===null&&(u=u.alternate,u!==null&&(p=u.memoizedState)),p!==null)return p.dehydrated}return null}function o(u){if(a(u)!==u)throw Error(i(188))}function m(u){var p=u.alternate;if(!p){if(p=a(u),p===null)throw Error(i(188));return p!==u?null:u}for(var b=u,T=p;;){var Y=b.return;if(Y===null)break;var se=Y.alternate;if(se===null){if(T=Y.return,T!==null){b=T;continue}break}if(Y.child===se.child){for(se=Y.child;se;){if(se===b)return o(Y),u;if(se===T)return o(Y),p;se=se.sibling}throw Error(i(188))}if(b.return!==T.return)b=Y,T=se;else{for(var je=!1,at=Y.child;at;){if(at===b){je=!0,b=Y,T=se;break}if(at===T){je=!0,T=Y,b=se;break}at=at.sibling}if(!je){for(at=se.child;at;){if(at===b){je=!0,b=se,T=Y;break}if(at===T){je=!0,T=se,b=Y;break}at=at.sibling}if(!je)throw Error(i(189))}}if(b.alternate!==T)throw Error(i(190))}if(b.tag!==3)throw Error(i(188));return b.stateNode.current===b?u:p}function C(u){var p=u.tag;if(p===5||p===26||p===27||p===6)return u;for(u=u.child;u!==null;){if(p=C(u),p!==null)return p;u=u.sibling}return null}var S=Object.assign,O=Symbol.for("react.element"),U=Symbol.for("react.transitional.element"),K=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),ee=Symbol.for("react.provider"),V=Symbol.for("react.consumer"),ae=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),ue=Symbol.for("react.lazy"),ge=Symbol.for("react.activity"),ye=Symbol.for("react.memo_cache_sentinel"),Me=Symbol.iterator;function Be(u){return u===null||typeof u!="object"?null:(u=Me&&u[Me]||u["@@iterator"],typeof u=="function"?u:null)}var we=Symbol.for("react.client.reference");function qe(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===we?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case z:return"Fragment";case Q:return"Profiler";case j:return"StrictMode";case Z:return"Suspense";case oe:return"SuspenseList";case ge:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case K:return"Portal";case ae:return(u.displayName||"Context")+".Provider";case V:return(u._context.displayName||"Context")+".Consumer";case ne:var p=u.render;return u=u.displayName,u||(u=p.displayName||p.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case W:return p=u.displayName||null,p!==null?p:qe(u.type)||"Memo";case ue:p=u._payload,u=u._init;try{return qe(u(p))}catch{}}return null}var xe=Array.isArray,ze=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,yt={pending:!1,data:null,method:null,action:null},nt=[],be=-1;function Ne(u){return{current:u}}function tt(u){0>be||(u.current=nt[be],nt[be]=null,be--)}function lt(u,p){be++,nt[be]=u.current,u.current=p}var It=Ne(null),pt=Ne(null),St=Ne(null),Rt=Ne(null);function Le(u,p){switch(lt(St,p),lt(pt,u),lt(It,null),p.nodeType){case 9:case 11:u=(u=p.documentElement)&&(u=u.namespaceURI)?sl(u):0;break;default:if(u=p.tagName,p=p.namespaceURI)p=sl(p),u=ll(p,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}tt(It),lt(It,u)}function Pe(){tt(It),tt(pt),tt(St)}function Re(u){u.memoizedState!==null&&lt(Rt,u);var p=It.current,b=ll(p,u.type);p!==b&&(lt(pt,u),lt(It,b))}function He(u){pt.current===u&&(tt(It),tt(pt)),Rt.current===u&&(tt(Rt),Qt._currentValue=yt)}var bt=Object.prototype.hasOwnProperty,vt=n.unstable_scheduleCallback,Ot=n.unstable_cancelCallback,qt=n.unstable_shouldYield,Kt=n.unstable_requestPaint,on=n.unstable_now,Jn=n.unstable_getCurrentPriorityLevel,Wt=n.unstable_ImmediatePriority,$n=n.unstable_UserBlockingPriority,On=n.unstable_NormalPriority,Bn=n.unstable_LowPriority,In=n.unstable_IdlePriority,Bi=n.log,ei=n.unstable_setDisableYieldValue,Kn=null,Ge=null;function de(u){if(typeof Bi=="function"&&ei(u),Ge&&typeof Ge.setStrictMode=="function")try{Ge.setStrictMode(Kn,u)}catch{}}var re=Math.clz32?Math.clz32:Te,le=Math.log,me=Math.LN2;function Te(u){return u>>>=0,u===0?32:31-(le(u)/me|0)|0}var We=256,dt=4194304;function Ye(u){var p=u&42;if(p!==0)return p;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function De(u,p,b){var T=u.pendingLanes;if(T===0)return 0;var Y=0,se=u.suspendedLanes,je=u.pingedLanes;u=u.warmLanes;var at=T&134217727;return at!==0?(T=at&~se,T!==0?Y=Ye(T):(je&=at,je!==0?Y=Ye(je):b||(b=at&~u,b!==0&&(Y=Ye(b))))):(at=T&~se,at!==0?Y=Ye(at):je!==0?Y=Ye(je):b||(b=T&~u,b!==0&&(Y=Ye(b)))),Y===0?0:p!==0&&p!==Y&&(p&se)===0&&(se=Y&-Y,b=p&-p,se>=b||se===32&&(b&4194048)!==0)?p:Y}function Ze(u,p){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&p)===0}function g(u,p){switch(u){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gt(){var u=We;return We<<=1,(We&4194048)===0&&(We=256),u}function ht(){var u=dt;return dt<<=1,(dt&62914560)===0&&(dt=4194304),u}function kt(u){for(var p=[],b=0;31>b;b++)p.push(u);return p}function it(u,p){u.pendingLanes|=p,p!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function en(u,p,b,T,Y,se){var je=u.pendingLanes;u.pendingLanes=b,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=b,u.entangledLanes&=b,u.errorRecoveryDisabledLanes&=b,u.shellSuspendCounter=0;var at=u.entanglements,Ft=u.expirationTimes,hn=u.hiddenUpdates;for(b=je&~b;0<b;){var kn=31-re(b),Gn=1<<kn;at[kn]=0,Ft[kn]=-1;var mn=hn[kn];if(mn!==null)for(hn[kn]=null,kn=0;kn<mn.length;kn++){var fn=mn[kn];fn!==null&&(fn.lane&=-536870913)}b&=~Gn}T!==0&&Dn(u,T,0),se!==0&&Y===0&&u.tag!==0&&(u.suspendedLanes|=se&~(je&~p))}function Dn(u,p,b){u.pendingLanes|=p,u.suspendedLanes&=~p;var T=31-re(p);u.entangledLanes|=p,u.entanglements[T]=u.entanglements[T]|1073741824|b&4194090}function Mn(u,p){var b=u.entangledLanes|=p;for(u=u.entanglements;b;){var T=31-re(b),Y=1<<T;Y&p|u[T]&p&&(u[T]|=p),b&=~Y}}function ii(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function Wn(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function qi(){var u=ot.p;return u!==0?u:(u=window.event,u===void 0?32:sr(u.type))}function er(u,p){var b=ot.p;try{return ot.p=u,p()}finally{ot.p=b}}var wi=Math.random().toString(36).slice(2),hi="__reactFiber$"+wi,ti="__reactProps$"+wi,Wi="__reactContainer$"+wi,Sn="__reactEvents$"+wi,lo="__reactListeners$"+wi,Hi="__reactHandles$"+wi,pa="__reactResources$"+wi,To="__reactMarker$"+wi;function Zn(u){delete u[hi],delete u[ti],delete u[Sn],delete u[lo],delete u[Hi]}function lr(u){var p=u[hi];if(p)return p;for(var b=u.parentNode;b;){if(p=b[Wi]||b[hi]){if(b=p.alternate,p.child!==null||b!==null&&b.child!==null)for(u=Lm(u);u!==null;){if(b=u[hi])return b;u=Lm(u)}return p}u=b,b=u.parentNode}return null}function zi(u){if(u=u[hi]||u[Wi]){var p=u.tag;if(p===5||p===6||p===13||p===26||p===27||p===3)return u}return null}function vr(u){var p=u.tag;if(p===5||p===26||p===27||p===6)return u.stateNode;throw Error(i(33))}function La(u){var p=u[pa];return p||(p=u[pa]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function Ir(u){u[To]=!0}var Ni=new Set,gl={};function Ta(u,p){So(u,p),So(u+"Capture",p)}function So(u,p){for(gl[u]=p,u=0;u<p.length;u++)Ni.add(p[u])}var $a=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ol={},Ao={};function QA(u){return bt.call(Ao,u)?!0:bt.call(Ol,u)?!1:$a.test(u)?Ao[u]=!0:(Ol[u]=!0,!1)}function ka(u,p,b){if(QA(p))if(b===null)u.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":u.removeAttribute(p);return;case"boolean":var T=p.toLowerCase().slice(0,5);if(T!=="data-"&&T!=="aria-"){u.removeAttribute(p);return}}u.setAttribute(p,""+b)}}function Vi(u,p,b){if(b===null)u.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(p);return}u.setAttribute(p,""+b)}}function xi(u,p,b,T){if(T===null)u.removeAttribute(b);else{switch(typeof T){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(b);return}u.setAttributeNS(p,b,""+T)}}var ls,Ma;function Vo(u){if(ls===void 0)try{throw Error()}catch(b){var p=b.stack.trim().match(/\n( *(at )?)/);ls=p&&p[1]||"",Ma=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ls+u+Ma}var $e=!1;function Et(u,p){if(!u||$e)return"";$e=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var T={DetermineComponentFrameRoot:function(){try{if(p){var Gn=function(){throw Error()};if(Object.defineProperty(Gn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Gn,[])}catch(fn){var mn=fn}Reflect.construct(u,[],Gn)}else{try{Gn.call()}catch(fn){mn=fn}u.call(Gn.prototype)}}else{try{throw Error()}catch(fn){mn=fn}(Gn=u())&&typeof Gn.catch=="function"&&Gn.catch(function(){})}}catch(fn){if(fn&&mn&&typeof fn.stack=="string")return[fn.stack,mn.stack]}return[null,null]}};T.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Y=Object.getOwnPropertyDescriptor(T.DetermineComponentFrameRoot,"name");Y&&Y.configurable&&Object.defineProperty(T.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var se=T.DetermineComponentFrameRoot(),je=se[0],at=se[1];if(je&&at){var Ft=je.split(`
`),hn=at.split(`
`);for(Y=T=0;T<Ft.length&&!Ft[T].includes("DetermineComponentFrameRoot");)T++;for(;Y<hn.length&&!hn[Y].includes("DetermineComponentFrameRoot");)Y++;if(T===Ft.length||Y===hn.length)for(T=Ft.length-1,Y=hn.length-1;1<=T&&0<=Y&&Ft[T]!==hn[Y];)Y--;for(;1<=T&&0<=Y;T--,Y--)if(Ft[T]!==hn[Y]){if(T!==1||Y!==1)do if(T--,Y--,0>Y||Ft[T]!==hn[Y]){var kn=`
`+Ft[T].replace(" at new "," at ");return u.displayName&&kn.includes("<anonymous>")&&(kn=kn.replace("<anonymous>",u.displayName)),kn}while(1<=T&&0<=Y);break}}}finally{$e=!1,Error.prepareStackTrace=b}return(b=u?u.displayName||u.name:"")?Vo(b):""}function xn(u){switch(u.tag){case 26:case 27:case 5:return Vo(u.type);case 16:return Vo("Lazy");case 13:return Vo("Suspense");case 19:return Vo("SuspenseList");case 0:case 15:return Et(u.type,!1);case 11:return Et(u.type.render,!1);case 1:return Et(u.type,!0);case 31:return Vo("Activity");default:return""}}function jn(u){try{var p="";do p+=xn(u),u=u.return;while(u);return p}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}function rn(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function si(u){var p=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function Jr(u){var p=si(u)?"checked":"value",b=Object.getOwnPropertyDescriptor(u.constructor.prototype,p),T=""+u[p];if(!u.hasOwnProperty(p)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var Y=b.get,se=b.set;return Object.defineProperty(u,p,{configurable:!0,get:function(){return Y.call(this)},set:function(je){T=""+je,se.call(this,je)}}),Object.defineProperty(u,p,{enumerable:b.enumerable}),{getValue:function(){return T},setValue:function(je){T=""+je},stopTracking:function(){u._valueTracker=null,delete u[p]}}}}function wo(u){u._valueTracker||(u._valueTracker=Jr(u))}function As(u){if(!u)return!1;var p=u._valueTracker;if(!p)return!0;var b=p.getValue(),T="";return u&&(T=si(u)?u.checked?"true":"false":u.value),u=T,u!==b?(p.setValue(u),!0):!1}function Us(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var YA=/[\n"\\]/g;function Qi(u){return u.replace(YA,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function Du(u,p,b,T,Y,se,je,at){u.name="",je!=null&&typeof je!="function"&&typeof je!="symbol"&&typeof je!="boolean"?u.type=je:u.removeAttribute("type"),p!=null?je==="number"?(p===0&&u.value===""||u.value!=p)&&(u.value=""+rn(p)):u.value!==""+rn(p)&&(u.value=""+rn(p)):je!=="submit"&&je!=="reset"||u.removeAttribute("value"),p!=null?yl(u,je,rn(p)):b!=null?yl(u,je,rn(b)):T!=null&&u.removeAttribute("value"),Y==null&&se!=null&&(u.defaultChecked=!!se),Y!=null&&(u.checked=Y&&typeof Y!="function"&&typeof Y!="symbol"),at!=null&&typeof at!="function"&&typeof at!="symbol"&&typeof at!="boolean"?u.name=""+rn(at):u.removeAttribute("name")}function _A(u,p,b,T,Y,se,je,at){if(se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"&&(u.type=se),p!=null||b!=null){if(!(se!=="submit"&&se!=="reset"||p!=null))return;b=b!=null?""+rn(b):"",p=p!=null?""+rn(p):b,at||p===u.value||(u.value=p),u.defaultValue=p}T=T??Y,T=typeof T!="function"&&typeof T!="symbol"&&!!T,u.checked=at?u.checked:!!T,u.defaultChecked=!!T,je!=null&&typeof je!="function"&&typeof je!="symbol"&&typeof je!="boolean"&&(u.name=je)}function yl(u,p,b){p==="number"&&Us(u.ownerDocument)===u||u.defaultValue===""+b||(u.defaultValue=""+b)}function Ss(u,p,b,T){if(u=u.options,p){p={};for(var Y=0;Y<b.length;Y++)p["$"+b[Y]]=!0;for(b=0;b<u.length;b++)Y=p.hasOwnProperty("$"+u[b].value),u[b].selected!==Y&&(u[b].selected=Y),Y&&T&&(u[b].defaultSelected=!0)}else{for(b=""+rn(b),p=null,Y=0;Y<u.length;Y++){if(u[Y].value===b){u[Y].selected=!0,T&&(u[Y].defaultSelected=!0);return}p!==null||u[Y].disabled||(p=u[Y])}p!==null&&(p.selected=!0)}}function bc(u,p,b){if(p!=null&&(p=""+rn(p),p!==u.value&&(u.value=p),b==null)){u.defaultValue!==p&&(u.defaultValue=p);return}u.defaultValue=b!=null?""+rn(b):""}function Qs(u,p,b,T){if(p==null){if(T!=null){if(b!=null)throw Error(i(92));if(xe(T)){if(1<T.length)throw Error(i(93));T=T[0]}b=T}b==null&&(b=""),p=b}b=rn(p),u.defaultValue=b,T=u.textContent,T===b&&T!==""&&T!==null&&(u.value=T)}function $o(u,p){if(p){var b=u.firstChild;if(b&&b===u.lastChild&&b.nodeType===3){b.nodeValue=p;return}}u.textContent=p}var ko=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dr(u,p,b){var T=p.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?T?u.setProperty(p,""):p==="float"?u.cssFloat="":u[p]="":T?u.setProperty(p,b):typeof b!="number"||b===0||ko.has(p)?p==="float"?u.cssFloat=b:u[p]=(""+b).trim():u[p]=b+"px"}function Kl(u,p,b){if(p!=null&&typeof p!="object")throw Error(i(62));if(u=u.style,b!=null){for(var T in b)!b.hasOwnProperty(T)||p!=null&&p.hasOwnProperty(T)||(T.indexOf("--")===0?u.setProperty(T,""):T==="float"?u.cssFloat="":u[T]="");for(var Y in p)T=p[Y],p.hasOwnProperty(Y)&&b[Y]!==T&&dr(u,Y,T)}else for(var se in p)p.hasOwnProperty(se)&&dr(u,se,p[se])}function ga(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ul=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function br(u){return bA.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var iA=null;function cu(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var No=null,Eo=null;function Fa(u){var p=zi(u);if(p&&(u=p.stateNode)){var b=u[ti]||null;e:switch(u=p.stateNode,p.type){case"input":if(Du(u,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),p=b.name,b.type==="radio"&&p!=null){for(b=u;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+Qi(""+p)+'"][type="radio"]'),p=0;p<b.length;p++){var T=b[p];if(T!==u&&T.form===u.form){var Y=T[ti]||null;if(!Y)throw Error(i(90));Du(T,Y.value,Y.defaultValue,Y.defaultValue,Y.checked,Y.defaultChecked,Y.type,Y.name)}}for(p=0;p<b.length;p++)T=b[p],T.form===u.form&&As(T)}break e;case"textarea":bc(u,b.value,b.defaultValue);break e;case"select":p=b.value,p!=null&&Ss(u,!!b.multiple,p,!1)}}}var Sa=!1;function oa(u,p,b){if(Sa)return u(p,b);Sa=!0;try{var T=u(p);return T}finally{if(Sa=!1,(No!==null||Eo!==null)&&(V0(),No&&(p=No,u=Eo,Eo=No=null,Fa(p),u)))for(p=0;p<u.length;p++)Fa(u[p])}}function kr(u,p){var b=u.stateNode;if(b===null)return null;var T=b[ti]||null;if(T===null)return null;b=T[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(T=!T.disabled)||(u=u.type,T=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!T;break e;default:u=!1}if(u)return null;if(b&&typeof b!="function")throw Error(i(231,p,typeof b));return b}var rA=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),za=!1;if(rA)try{var Za={};Object.defineProperty(Za,"passive",{get:function(){za=!0}}),window.addEventListener("test",Za,Za),window.removeEventListener("test",Za,Za)}catch{za=!1}var ya=null,Dr=null,vl=null;function Zi(){if(vl)return vl;var u,p=Dr,b=p.length,T,Y="value"in ya?ya.value:ya.textContent,se=Y.length;for(u=0;u<b&&p[u]===Y[u];u++);var je=b-u;for(T=1;T<=je&&p[b-T]===Y[se-T];T++);return vl=Y.slice(u,1<T?1-T:void 0)}function Mi(u){var p=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&p===13&&(u=13)):u=p,u===10&&(u=13),32<=u||u===13?u:0}function Qr(){return!0}function te(){return!1}function Oe(u){function p(b,T,Y,se,je){this._reactName=b,this._targetInst=Y,this.type=T,this.nativeEvent=se,this.target=je,this.currentTarget=null;for(var at in u)u.hasOwnProperty(at)&&(b=u[at],this[at]=b?b(se):se[at]);return this.isDefaultPrevented=(se.defaultPrevented!=null?se.defaultPrevented:se.returnValue===!1)?Qr:te,this.isPropagationStopped=te,this}return S(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=Qr)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=Qr)},persist:function(){},isPersistent:Qr}),p}var st={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jt=Oe(st),Si=S({},st,{view:0,detail:0}),Xn=Oe(Si),$i,or,Di,Xi=S({},Si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:HA,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Di&&(Di&&u.type==="mousemove"?($i=u.screenX-Di.screenX,or=u.screenY-Di.screenY):or=$i=0,Di=u),$i)},movementY:function(u){return"movementY"in u?u.movementY:or}}),eo=Oe(Xi),uo=S({},Xi,{dataTransfer:0}),ur=Oe(uo),pr=S({},Si,{relatedTarget:0}),co=Oe(pr),Go=S({},st,{animationName:0,elapsedTime:0,pseudoElement:0}),zr=Oe(Go),Ys=S({},st,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),Ll=Oe(Ys),qA=S({},st,{data:0}),fs=Oe(qA),gd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Da={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ru(u){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(u):(u=yd[u])?!!p[u]:!1}function HA(){return Ru}var ph=S({},Si,{key:function(u){if(u.key){var p=gd[u.key]||u.key;if(p!=="Unidentified")return p}return u.type==="keypress"?(u=Mi(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?Da[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:HA,charCode:function(u){return u.type==="keypress"?Mi(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?Mi(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),Nh=Oe(ph),po=S({},Xi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ic=Oe(po),vd=S({},Si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:HA}),dp=Oe(vd),gh=S({},st,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cd=Oe(gh),o0=S({},Xi,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),Tf=Oe(o0),kf=S({},st,{newState:0,oldState:0}),VA=Oe(kf),Xa=[9,13,27,32],_d=rA&&"CompositionEvent"in window,Fl=null;rA&&"documentMode"in document&&(Fl=document.documentMode);var bd=rA&&"TextEvent"in window&&!Fl,Gh=rA&&(!_d||Fl&&8<Fl&&11>=Fl),Yc=" ",jh=!1;function Df(u,p){switch(u){case"keyup":return Xa.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yh(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var vh=!1;function Wh(u,p){switch(u){case"compositionend":return yh(p);case"keypress":return p.which!==32?null:(jh=!0,Yc);case"textInput":return u=p.data,u===Yc&&jh?null:u;default:return null}}function Rf(u,p){if(vh)return u==="compositionend"||!_d&&Df(u,p)?(u=Zi(),vl=Dr=ya=null,vh=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return Gh&&p.locale!=="ko"?null:p.data;default:return null}}var oA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pf(u){var p=u&&u.nodeName&&u.nodeName.toLowerCase();return p==="input"?!!oA[u.type]:p==="textarea"}function rc(u,p,b,T){No?Eo?Eo.push(T):Eo=[T]:No=T,p=p0(p,"onChange"),0<p.length&&(b=new jt("onChange","change",null,b,T),u.push({event:b,listeners:p}))}var aA=null,xc=null;function xd(u){yy(u,0)}function Md(u){var p=vr(u);if(As(p))return u}function Pu(u,p){if(u==="change")return p}var $A=!1;if(rA){var Qh;if(rA){var Mc="oninput"in document;if(!Mc){var Yh=document.createElement("div");Yh.setAttribute("oninput","return;"),Mc=typeof Yh.oninput=="function"}Qh=Mc}else Qh=!1;$A=Qh&&(!document.documentMode||9<document.documentMode)}function fp(){aA&&(aA.detachEvent("onpropertychange",qc),xc=aA=null)}function qc(u){if(u.propertyName==="value"&&Md(xc)){var p=[];rc(p,xc,u,cu(u)),oa(xd,p)}}function Vd(u,p,b){u==="focusin"?(fp(),aA=p,xc=b,aA.attachEvent("onpropertychange",qc)):u==="focusout"&&fp()}function hu(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return Md(xc)}function ZA(u,p){if(u==="click")return Md(p)}function Mm(u,p){if(u==="input"||u==="change")return Md(p)}function Kf(u,p){return u===p&&(u!==0||1/u===1/p)||u!==u&&p!==p}var xA=typeof Object.is=="function"?Object.is:Kf;function oc(u,p){if(xA(u,p))return!0;if(typeof u!="object"||u===null||typeof p!="object"||p===null)return!1;var b=Object.keys(u),T=Object.keys(p);if(b.length!==T.length)return!1;for(T=0;T<b.length;T++){var Y=b[T];if(!bt.call(p,Y)||!xA(u[Y],p[Y]))return!1}return!0}function MA(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function Ku(u,p){var b=MA(u);u=0;for(var T;b;){if(b.nodeType===3){if(T=u+b.textContent.length,u<=p&&T>=p)return{node:b,offset:p-u};u=T}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=MA(b)}}function Bo(u,p){return u&&p?u===p?!0:u&&u.nodeType===3?!1:p&&p.nodeType===3?Bo(u,p.parentNode):"contains"in u?u.contains(p):u.compareDocumentPosition?!!(u.compareDocumentPosition(p)&16):!1:!1}function Ch(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var p=Us(u.document);p instanceof u.HTMLIFrameElement;){try{var b=typeof p.contentWindow.location.href=="string"}catch{b=!1}if(b)u=p.contentWindow;else break;p=Us(u.document)}return p}function Sd(u){var p=u&&u.nodeName&&u.nodeName.toLowerCase();return p&&(p==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||p==="textarea"||u.contentEditable==="true")}var Sm=rA&&"documentMode"in document&&11>=document.documentMode,Sc=null,zl=null,Zt=null,wn=!1;function vn(u,p,b){var T=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;wn||Sc==null||Sc!==Us(T)||(T=Sc,"selectionStart"in T&&Sd(T)?T={start:T.selectionStart,end:T.selectionEnd}:(T=(T.ownerDocument&&T.ownerDocument.defaultView||window).getSelection(),T={anchorNode:T.anchorNode,anchorOffset:T.anchorOffset,focusNode:T.focusNode,focusOffset:T.focusOffset}),Zt&&oc(Zt,T)||(Zt=T,T=p0(zl,"onSelect"),0<T.length&&(p=new jt("onSelect","select",null,p,b),u.push({event:p,listeners:T}),p.target=Sc)))}function Ii(u,p){var b={};return b[u.toLowerCase()]=p.toLowerCase(),b["Webkit"+u]="webkit"+p,b["Moz"+u]="moz"+p,b}var Sr={animationend:Ii("Animation","AnimationEnd"),animationiteration:Ii("Animation","AnimationIteration"),animationstart:Ii("Animation","AnimationStart"),transitionrun:Ii("Transition","TransitionRun"),transitionstart:Ii("Transition","TransitionStart"),transitioncancel:Ii("Transition","TransitionCancel"),transitionend:Ii("Transition","TransitionEnd")},Oo={},qs={};rA&&(qs=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);function Do(u){if(Oo[u])return Oo[u];if(!Sr[u])return u;var p=Sr[u],b;for(b in p)if(p.hasOwnProperty(b)&&b in qs)return Oo[u]=p[b];return u}var Hc=Do("animationend"),$d=Do("animationiteration"),sA=Do("animationstart"),wd=Do("transitionrun"),du=Do("transitionstart"),SA=Do("transitioncancel"),wA=Do("transitionend"),Il=new Map,jo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jo.push("scrollEnd");function fu(u,p){Il.set(u,p),Ta(p,[u])}var qh=new WeakMap;function Na(u,p){if(typeof u=="object"&&u!==null){var b=qh.get(u);return b!==void 0?b:(p={value:u,source:p,stack:jn(p)},qh.set(u,p),p)}return{value:u,source:p,stack:jn(p)}}var Hs=[],ws=0,XA=0;function Nl(){for(var u=ws,p=XA=ws=0;p<u;){var b=Hs[p];Hs[p++]=null;var T=Hs[p];Hs[p++]=null;var Y=Hs[p];Hs[p++]=null;var se=Hs[p];if(Hs[p++]=null,T!==null&&Y!==null){var je=T.pending;je===null?Y.next=Y:(Y.next=je.next,je.next=Y),T.pending=Y}se!==0&&wc(b,Y,se)}}function EA(u,p,b,T){Hs[ws++]=u,Hs[ws++]=p,Hs[ws++]=b,Hs[ws++]=T,XA|=T,u.lanes|=T,u=u.alternate,u!==null&&(u.lanes|=T)}function ac(u,p,b,T){return EA(u,p,b,T),_h(u)}function BA(u,p){return EA(u,null,null,p),_h(u)}function wc(u,p,b){u.lanes|=b;var T=u.alternate;T!==null&&(T.lanes|=b);for(var Y=!1,se=u.return;se!==null;)se.childLanes|=b,T=se.alternate,T!==null&&(T.childLanes|=b),se.tag===22&&(u=se.stateNode,u===null||u._visibility&1||(Y=!0)),u=se,se=se.return;return u.tag===3?(se=u.stateNode,Y&&p!==null&&(Y=31-re(b),u=se.hiddenUpdates,T=u[Y],T===null?u[Y]=[p]:T.push(p),p.lane=b|536870912),se):null}function _h(u){if(50<Jf)throw Jf=0,em=null,Error(i(185));for(var p=u.return;p!==null;)u=p,p=u.return;return u.tag===3?u.stateNode:null}var Tr={};function sc(u,p,b,T){this.tag=u,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function JA(u,p,b,T){return new sc(u,p,b,T)}function Ec(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Es(u,p){var b=u.alternate;return b===null?(b=JA(u.tag,p,u.key,u.mode),b.elementType=u.elementType,b.type=u.type,b.stateNode=u.stateNode,b.alternate=u,u.alternate=b):(b.pendingProps=p,b.type=u.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=u.flags&65011712,b.childLanes=u.childLanes,b.lanes=u.lanes,b.child=u.child,b.memoizedProps=u.memoizedProps,b.memoizedState=u.memoizedState,b.updateQueue=u.updateQueue,p=u.dependencies,b.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},b.sibling=u.sibling,b.index=u.index,b.ref=u.ref,b.refCleanup=u.refCleanup,b}function bh(u,p){u.flags&=65011714;var b=u.alternate;return b===null?(u.childLanes=0,u.lanes=p,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=b.childLanes,u.lanes=b.lanes,u.child=b.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=b.memoizedProps,u.memoizedState=b.memoizedState,u.updateQueue=b.updateQueue,u.type=b.type,p=b.dependencies,u.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),u}function Ed(u,p,b,T,Y,se){var je=0;if(T=u,typeof u=="function")Ec(u)&&(je=1);else if(typeof u=="string")je=H(u,b,It.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case ge:return u=JA(31,b,p,Y),u.elementType=ge,u.lanes=se,u;case z:return mu(b.children,Y,se,p);case j:je=8,Y|=24;break;case Q:return u=JA(12,b,p,Y|2),u.elementType=Q,u.lanes=se,u;case Z:return u=JA(13,b,p,Y),u.elementType=Z,u.lanes=se,u;case oe:return u=JA(19,b,p,Y),u.elementType=oe,u.lanes=se,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case ee:case ae:je=10;break e;case V:je=9;break e;case ne:je=11;break e;case W:je=14;break e;case ue:je=16,T=null;break e}je=29,b=Error(i(130,u===null?"null":typeof u,"")),T=null}return p=JA(je,b,p,Y),p.elementType=u,p.type=T,p.lanes=se,p}function mu(u,p,b,T){return u=JA(7,u,T,p),u.lanes=b,u}function Bd(u,p,b){return u=JA(6,u,null,p),u.lanes=b,u}function Vc(u,p,b){return p=JA(4,u.children!==null?u.children:[],u.key,p),p.lanes=b,p.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},p}var OA=[],Uu=0,xh=null,Hh=0,IA=[],Tl=0,Wo=null,aa=1,Lu="";function Fu(u,p){OA[Uu++]=Hh,OA[Uu++]=xh,xh=u,Hh=p}function Bc(u,p,b){IA[Tl++]=aa,IA[Tl++]=Lu,IA[Tl++]=Wo,Wo=u;var T=aa;u=Lu;var Y=32-re(T)-1;T&=~(1<<Y),b+=1;var se=32-re(p)+Y;if(30<se){var je=Y-Y%5;se=(T&(1<<je)-1).toString(32),T>>=je,Y-=je,aa=1<<32-re(p)+Y|b<<Y|T,Lu=se+u}else aa=1<<se|b<<Y|T,Lu=u}function $c(u){u.return!==null&&(Fu(u,1),Bc(u,1,0))}function Zc(u){for(;u===xh;)xh=OA[--Uu],OA[Uu]=null,Hh=OA[--Uu],OA[Uu]=null;for(;u===Wo;)Wo=IA[--Tl],IA[Tl]=null,Lu=IA[--Tl],IA[Tl]=null,aa=IA[--Tl],IA[Tl]=null}var va=null,_a=null,$r=!1,lA=null,Ls=!1,Xc=Error(i(519));function pu(u){var p=Error(i(418,""));throw zu(Na(p,u)),Xc}function Zd(u){var p=u.stateNode,b=u.type,T=u.memoizedProps;switch(p[hi]=u,p[ti]=T,b){case"dialog":na("cancel",p),na("close",p);break;case"iframe":case"object":case"embed":na("load",p);break;case"video":case"audio":for(b=0;b<f0.length;b++)na(f0[b],p);break;case"source":na("error",p);break;case"img":case"image":case"link":na("error",p),na("load",p);break;case"details":na("toggle",p);break;case"input":na("invalid",p),_A(p,T.value,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name,!0),wo(p);break;case"select":na("invalid",p);break;case"textarea":na("invalid",p),Qs(p,T.value,T.defaultValue,T.children),wo(p)}b=T.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||p.textContent===""+b||T.suppressHydrationWarning===!0||rg(p.textContent,b)?(T.popover!=null&&(na("beforetoggle",p),na("toggle",p)),T.onScroll!=null&&na("scroll",p),T.onScrollEnd!=null&&na("scrollend",p),T.onClick!=null&&(p.onclick=Zu),p=!0):p=!1,p||pu(u)}function ms(u){for(va=u.return;va;)switch(va.tag){case 5:case 13:Ls=!1;return;case 27:case 3:Ls=!0;return;default:va=va.return}}function il(u){if(u!==va)return!1;if(!$r)return ms(u),$r=!0,!1;var p=u.tag,b;if((b=p!==3&&p!==27)&&((b=p===5)&&(b=u.type,b=!(b!=="form"&&b!=="button")||sd(u.type,u.memoizedProps)),b=!b),b&&_a&&pu(u),ms(u),p===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(i(317));e:{for(u=u.nextSibling,p=0;u;){if(u.nodeType===8)if(b=u.data,b==="/$"){if(p===0){_a=ld(u.nextSibling);break e}p--}else b!=="$"&&b!=="$!"&&b!=="$?"||p++;u=u.nextSibling}_a=null}}else p===27?(p=_a,Ah(u.type)?(u=sg,sg=null,_a=u):_a=p):_a=va?ld(u.stateNode.nextSibling):null;return!0}function Fs(){_a=va=null,$r=!1}function Xd(){var u=lA;return u!==null&&(Uc===null?Uc=u:Uc.push.apply(Uc,u),lA=null),u}function zu(u){lA===null?lA=[u]:lA.push(u)}var Mh=Ne(null),eu=null,rt=null;function Vs(u,p,b){lt(Mh,p._currentValue),p._currentValue=b}function Ga(u){u._currentValue=Mh.current,tt(Mh)}function Zo(u,p,b){for(;u!==null;){var T=u.alternate;if((u.childLanes&p)!==p?(u.childLanes|=p,T!==null&&(T.childLanes|=p)):T!==null&&(T.childLanes&p)!==p&&(T.childLanes|=p),u===b)break;u=u.return}}function gr(u,p,b,T){var Y=u.child;for(Y!==null&&(Y.return=u);Y!==null;){var se=Y.dependencies;if(se!==null){var je=Y.child;se=se.firstContext;e:for(;se!==null;){var at=se;se=Y;for(var Ft=0;Ft<p.length;Ft++)if(at.context===p[Ft]){se.lanes|=b,at=se.alternate,at!==null&&(at.lanes|=b),Zo(se.return,b,u),T||(je=null);break e}se=at.next}}else if(Y.tag===18){if(je=Y.return,je===null)throw Error(i(341));je.lanes|=b,se=je.alternate,se!==null&&(se.lanes|=b),Zo(je,b,u),je=null}else je=Y.child;if(je!==null)je.return=Y;else for(je=Y;je!==null;){if(je===u){je=null;break}if(Y=je.sibling,Y!==null){Y.return=je.return,je=Y;break}je=je.return}Y=je}}function ps(u,p,b,T){u=null;for(var Y=p,se=!1;Y!==null;){if(!se){if((Y.flags&524288)!==0)se=!0;else if((Y.flags&262144)!==0)break}if(Y.tag===10){var je=Y.alternate;if(je===null)throw Error(i(387));if(je=je.memoizedProps,je!==null){var at=Y.type;xA(Y.pendingProps.value,je.value)||(u!==null?u.push(at):u=[at])}}else if(Y===Rt.current){if(je=Y.alternate,je===null)throw Error(i(387));je.memoizedState.memoizedState!==Y.memoizedState.memoizedState&&(u!==null?u.push(Qt):u=[Qt])}Y=Y.return}u!==null&&gr(p,u,b,T),p.flags|=262144}function Jc(u){for(u=u.firstContext;u!==null;){if(!xA(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function Sh(u){eu=u,rt=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function Ro(u){return TA(eu,u)}function eh(u,p){return eu===null&&Sh(u),TA(u,p)}function TA(u,p){var b=p._currentValue;if(p={context:p,memoizedValue:b,next:null},rt===null){if(u===null)throw Error(i(308));rt=p,u.dependencies={lanes:0,firstContext:p},u.flags|=524288}else rt=rt.next=p;return b}var Od=typeof AbortController<"u"?AbortController:function(){var u=[],p=this.signal={aborted:!1,addEventListener:function(b,T){u.push(T)}};this.abort=function(){p.aborted=!0,u.forEach(function(b){return b()})}},Jd=n.unstable_scheduleCallback,wm=n.unstable_NormalPriority,ba={$$typeof:ae,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wh(){return{controller:new Od,data:new Map,refCount:0}}function th(u){u.refCount--,u.refCount===0&&Jd(wm,function(){u.controller.abort()})}var Nu=null,ef=0,rl=0,Ja=null;function Vh(u,p){if(Nu===null){var b=Nu=[];ef=0,rl=kp(),Ja={status:"pending",value:void 0,then:function(T){b.push(T)}}}return ef++,p.then(AA,AA),p}function AA(){if(--ef===0&&Nu!==null){Ja!==null&&(Ja.status="fulfilled");var u=Nu;Nu=null,rl=0,Ja=null;for(var p=0;p<u.length;p++)(0,u[p])()}}function Id(u,p){var b=[],T={status:"pending",value:null,reason:null,then:function(Y){b.push(Y)}};return u.then(function(){T.status="fulfilled",T.value=p;for(var Y=0;Y<b.length;Y++)(0,b[Y])(p)},function(Y){for(T.status="rejected",T.reason=Y,Y=0;Y<b.length;Y++)(0,b[Y])(void 0)}),T}var tf=ze.S;ze.S=function(u,p){typeof p=="object"&&p!==null&&typeof p.then=="function"&&Vh(u,p),tf!==null&&tf(u,p)};var Cl=Ne(null);function Oc(){var u=Cl.current;return u!==null?u:Gs.pooledCache}function Uf(u,p){p===null?lt(Cl,Cl.current):lt(Cl,p.pool)}function $h(){var u=Oc();return u===null?null:{parent:ba._currentValue,pool:u}}var Ca=Error(i(460)),Zr=Error(i(474)),ci=Error(i(542)),Gu={then:function(){}};function ju(u){return u=u.status,u==="fulfilled"||u==="rejected"}function Zh(){}function Ic(u,p,b){switch(b=u[b],b===void 0?u.push(p):b!==p&&(p.then(Zh,Zh),p=b),p.status){case"fulfilled":return p.value;case"rejected":throw u=p.reason,to(u),u;default:if(typeof p.status=="string")p.then(Zh,Zh);else{if(u=Gs,u!==null&&100<u.shellSuspendCounter)throw Error(i(482));u=p,u.status="pending",u.then(function(T){if(p.status==="pending"){var Y=p;Y.status="fulfilled",Y.value=T}},function(T){if(p.status==="pending"){var Y=p;Y.status="rejected",Y.reason=T}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw u=p.reason,to(u),u}throw gu=p,Ca}}var gu=null;function nf(){if(gu===null)throw Error(i(459));var u=gu;return gu=null,u}function to(u){if(u===Ca||u===ci)throw Error(i(483))}var Gl=!1;function Eh(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lc(u,p){u=u.updateQueue,p.updateQueue===u&&(p.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function kA(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function Ac(u,p,b){var T=u.updateQueue;if(T===null)return null;if(T=T.shared,(is&2)!==0){var Y=T.pending;return Y===null?p.next=p:(p.next=Y.next,Y.next=p),T.pending=p,p=_h(u),wc(u,null,b),p}return EA(u,T,p,b),_h(u)}function Bh(u,p,b){if(p=p.updateQueue,p!==null&&(p=p.shared,(b&4194048)!==0)){var T=p.lanes;T&=u.pendingLanes,b|=T,p.lanes=b,Mn(u,b)}}function yu(u,p){var b=u.updateQueue,T=u.alternate;if(T!==null&&(T=T.updateQueue,b===T)){var Y=null,se=null;if(b=b.firstBaseUpdate,b!==null){do{var je={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};se===null?Y=se=je:se=se.next=je,b=b.next}while(b!==null);se===null?Y=se=p:se=se.next=p}else Y=se=p;b={baseState:T.baseState,firstBaseUpdate:Y,lastBaseUpdate:se,shared:T.shared,callbacks:T.callbacks},u.updateQueue=b;return}u=b.lastBaseUpdate,u===null?b.firstBaseUpdate=p:u.next=p,b.lastBaseUpdate=p}var nh=!1;function tu(){if(nh){var u=Ja;if(u!==null)throw u}}function _l(u,p,b,T){nh=!1;var Y=u.updateQueue;Gl=!1;var se=Y.firstBaseUpdate,je=Y.lastBaseUpdate,at=Y.shared.pending;if(at!==null){Y.shared.pending=null;var Ft=at,hn=Ft.next;Ft.next=null,je===null?se=hn:je.next=hn,je=Ft;var kn=u.alternate;kn!==null&&(kn=kn.updateQueue,at=kn.lastBaseUpdate,at!==je&&(at===null?kn.firstBaseUpdate=hn:at.next=hn,kn.lastBaseUpdate=Ft))}if(se!==null){var Gn=Y.baseState;je=0,kn=hn=Ft=null,at=se;do{var mn=at.lane&-536870913,fn=mn!==at.lane;if(fn?(Yo&mn)===mn:(T&mn)===mn){mn!==0&&mn===rl&&(nh=!0),kn!==null&&(kn=kn.next={lane:0,tag:at.tag,payload:at.payload,callback:null,next:null});e:{var Pr=u,Kr=at;mn=p;var bs=b;switch(Kr.tag){case 1:if(Pr=Kr.payload,typeof Pr=="function"){Gn=Pr.call(bs,Gn,mn);break e}Gn=Pr;break e;case 3:Pr.flags=Pr.flags&-65537|128;case 0:if(Pr=Kr.payload,mn=typeof Pr=="function"?Pr.call(bs,Gn,mn):Pr,mn==null)break e;Gn=S({},Gn,mn);break e;case 2:Gl=!0}}mn=at.callback,mn!==null&&(u.flags|=64,fn&&(u.flags|=8192),fn=Y.callbacks,fn===null?Y.callbacks=[mn]:fn.push(mn))}else fn={lane:mn,tag:at.tag,payload:at.payload,callback:at.callback,next:null},kn===null?(hn=kn=fn,Ft=Gn):kn=kn.next=fn,je|=mn;if(at=at.next,at===null){if(at=Y.shared.pending,at===null)break;fn=at,at=fn.next,fn.next=null,Y.lastBaseUpdate=fn,Y.shared.pending=null}}while(!0);kn===null&&(Ft=Gn),Y.baseState=Ft,Y.firstBaseUpdate=hn,Y.lastBaseUpdate=kn,se===null&&(Y.shared.lanes=0),Pd|=je,u.lanes=je,u.memoizedState=Gn}}function Em(u,p){if(typeof u!="function")throw Error(i(191,u));u.call(p)}function rf(u,p){var b=u.callbacks;if(b!==null)for(u.callbacks=null,u=0;u<b.length;u++)Em(b[u],p)}var jl=Ne(null),Po=Ne(0);function Wl(u,p){u=cf,lt(Po,u),lt(jl,p),cf=u|p.baseLanes}function Xh(){lt(Po,cf),lt(jl,jl.current)}function Lf(){cf=Po.current,tt(jl),tt(Po)}var vu=0,no=null,Ko=null,Rr=null,Wu=!1,Oi=!1,Ti=!1,Tc=0,DA=0,uA=null,sa=0;function go(){throw Error(i(321))}function Ql(u,p){if(p===null)return!1;for(var b=0;b<p.length&&b<u.length;b++)if(!xA(u[b],p[b]))return!1;return!0}function Ff(u,p,b,T,Y,se){return vu=se,no=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,ze.H=u===null||u.memoizedState===null?qu:xl,Ti=!1,se=b(T,Y),Ti=!1,Oi&&(se=Uo(p,b,T,Y)),Jh(u),se}function Jh(u){ze.H=bl;var p=Ko!==null&&Ko.next!==null;if(vu=0,Rr=Ko=no=null,Wu=!1,DA=0,uA=null,p)throw Error(i(300));u===null||Zs||(u=u.dependencies,u!==null&&Jc(u)&&(Zs=!0))}function Uo(u,p,b,T){no=u;var Y=0;do{if(Oi&&(uA=null),DA=0,Oi=!1,25<=Y)throw Error(i(301));if(Y+=1,Rr=Ko=null,u.updateQueue!=null){var se=u.updateQueue;se.lastEffect=null,se.events=null,se.stores=null,se.memoCache!=null&&(se.memoCache.index=0)}ze.H=Pc,se=p(b,T)}while(Oi);return se}function ja(){var u=ze.H,p=u.useState()[0];return p=typeof p.then=="function"?Dc(p):p,u=u.useState()[0],(Ko!==null?Ko.memoizedState:null)!==u&&(no.flags|=1024),p}function ed(){var u=Tc!==0;return Tc=0,u}function Cu(u,p,b){p.updateQueue=u.updateQueue,p.flags&=-2053,u.lanes&=~b}function kc(u){if(Wu){for(u=u.memoizedState;u!==null;){var p=u.queue;p!==null&&(p.pending=null),u=u.next}Wu=!1}vu=0,Rr=Ko=no=null,Oi=!1,DA=Tc=0,uA=null}function $s(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rr===null?no.memoizedState=Rr=u:Rr=Rr.next=u,Rr}function es(){if(Ko===null){var u=no.alternate;u=u!==null?u.memoizedState:null}else u=Ko.next;var p=Rr===null?no.memoizedState:Rr.next;if(p!==null)Rr=p,Ko=u;else{if(u===null)throw no.alternate===null?Error(i(467)):Error(i(310));Ko=u,u={memoizedState:Ko.memoizedState,baseState:Ko.baseState,baseQueue:Ko.baseQueue,queue:Ko.queue,next:null},Rr===null?no.memoizedState=Rr=u:Rr=Rr.next=u}return Rr}function cA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dc(u){var p=DA;return DA+=1,uA===null&&(uA=[]),u=Ic(uA,u,p),p=no,(Rr===null?p.memoizedState:Rr.next)===null&&(p=p.alternate,ze.H=p===null||p.memoizedState===null?qu:xl),u}function uc(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return Dc(u);if(u.$$typeof===ae)return Ro(u)}throw Error(i(438,String(u)))}function cc(u){var p=null,b=no.updateQueue;if(b!==null&&(p=b.memoCache),p==null){var T=no.alternate;T!==null&&(T=T.updateQueue,T!==null&&(T=T.memoCache,T!=null&&(p={data:T.data.map(function(Y){return Y.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),b===null&&(b=cA(),no.updateQueue=b),b.memoCache=p,b=p.data[p.index],b===void 0)for(b=p.data[p.index]=Array(u),T=0;T<u;T++)b[T]=ye;return p.index++,b}function Yl(u,p){return typeof p=="function"?p(u):p}function td(u){var p=es();return nd(p,Ko,u)}function nd(u,p,b){var T=u.queue;if(T===null)throw Error(i(311));T.lastRenderedReducer=b;var Y=u.baseQueue,se=T.pending;if(se!==null){if(Y!==null){var je=Y.next;Y.next=se.next,se.next=je}p.baseQueue=Y=se,T.pending=null}if(se=u.baseState,Y===null)u.memoizedState=se;else{p=Y.next;var at=je=null,Ft=null,hn=p,kn=!1;do{var Gn=hn.lane&-536870913;if(Gn!==hn.lane?(Yo&Gn)===Gn:(vu&Gn)===Gn){var mn=hn.revertLane;if(mn===0)Ft!==null&&(Ft=Ft.next={lane:0,revertLane:0,action:hn.action,hasEagerState:hn.hasEagerState,eagerState:hn.eagerState,next:null}),Gn===rl&&(kn=!0);else if((vu&mn)===mn){hn=hn.next,mn===rl&&(kn=!0);continue}else Gn={lane:0,revertLane:hn.revertLane,action:hn.action,hasEagerState:hn.hasEagerState,eagerState:hn.eagerState,next:null},Ft===null?(at=Ft=Gn,je=se):Ft=Ft.next=Gn,no.lanes|=mn,Pd|=mn;Gn=hn.action,Ti&&b(se,Gn),se=hn.hasEagerState?hn.eagerState:b(se,Gn)}else mn={lane:Gn,revertLane:hn.revertLane,action:hn.action,hasEagerState:hn.hasEagerState,eagerState:hn.eagerState,next:null},Ft===null?(at=Ft=mn,je=se):Ft=Ft.next=mn,no.lanes|=Gn,Pd|=Gn;hn=hn.next}while(hn!==null&&hn!==p);if(Ft===null?je=se:Ft.next=at,!xA(se,u.memoizedState)&&(Zs=!0,kn&&(b=Ja,b!==null)))throw b;u.memoizedState=se,u.baseState=je,u.baseQueue=Ft,T.lastRenderedState=se}return Y===null&&(T.lanes=0),[u.memoizedState,T.dispatch]}function Td(u){var p=es(),b=p.queue;if(b===null)throw Error(i(311));b.lastRenderedReducer=u;var T=b.dispatch,Y=b.pending,se=p.memoizedState;if(Y!==null){b.pending=null;var je=Y=Y.next;do se=u(se,je.action),je=je.next;while(je!==Y);xA(se,p.memoizedState)||(Zs=!0),p.memoizedState=se,p.baseQueue===null&&(p.baseState=se),b.lastRenderedState=se}return[se,T]}function I(u,p,b){var T=no,Y=es(),se=$r;if(se){if(b===void 0)throw Error(i(407));b=b()}else b=p();var je=!xA((Ko||Y).memoizedState,b);je&&(Y.memoizedState=b,Zs=!0),Y=Y.queue;var at=_.bind(null,T,Y,u);if(Yt(2048,8,at,[u]),Y.getSnapshot!==p||je||Rr!==null&&Rr.memoizedState.tag&1){if(T.flags|=2048,wt(9,Pt(),f.bind(null,T,Y,b,p),null),Gs===null)throw Error(i(349));se||(vu&124)!==0||s(T,p,b)}return b}function s(u,p,b){u.flags|=16384,u={getSnapshot:p,value:b},p=no.updateQueue,p===null?(p=cA(),no.updateQueue=p,p.stores=[u]):(b=p.stores,b===null?p.stores=[u]:b.push(u))}function f(u,p,b,T){p.value=b,p.getSnapshot=T,w(p)&&k(u)}function _(u,p,b){return b(function(){w(p)&&k(u)})}function w(u){var p=u.getSnapshot;u=u.value;try{var b=p();return!xA(u,b)}catch{return!0}}function k(u){var p=BA(u,2);p!==null&&sh(p,u,2)}function N(u){var p=$s();if(typeof u=="function"){var b=u;if(u=b(),Ti){de(!0);try{b()}finally{de(!1)}}}return p.memoizedState=p.baseState=u,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yl,lastRenderedState:u},p}function q(u,p,b,T){return u.baseState=b,nd(u,Ko,typeof T=="function"?T:Yl)}function J(u,p,b,T,Y){if(ih(u))throw Error(i(485));if(u=p.action,u!==null){var se={payload:Y,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(je){se.listeners.push(je)}};ze.T!==null?b(!0):se.isTransition=!1,T(se),b=p.pending,b===null?(se.next=p.pending=se,he(p,se)):(se.next=b.next,p.pending=b.next=se)}}function he(u,p){var b=p.action,T=p.payload,Y=u.state;if(p.isTransition){var se=ze.T,je={};ze.T=je;try{var at=b(Y,T),Ft=ze.S;Ft!==null&&Ft(je,at),pe(u,p,at)}catch(hn){Se(u,p,hn)}finally{ze.T=se}}else try{se=b(Y,T),pe(u,p,se)}catch(hn){Se(u,p,hn)}}function pe(u,p,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(T){Ee(u,p,T)},function(T){return Se(u,p,T)}):Ee(u,p,b)}function Ee(u,p,b){p.status="fulfilled",p.value=b,Ue(p),u.state=b,p=u.pending,p!==null&&(b=p.next,b===p?u.pending=null:(b=b.next,p.next=b,he(u,b)))}function Se(u,p,b){var T=u.pending;if(u.pending=null,T!==null){T=T.next;do p.status="rejected",p.reason=b,Ue(p),p=p.next;while(p!==T)}u.action=null}function Ue(u){u=u.listeners;for(var p=0;p<u.length;p++)(0,u[p])()}function Xe(u,p){return p}function At(u,p){if($r){var b=Gs.formState;if(b!==null){e:{var T=no;if($r){if(_a){t:{for(var Y=_a,se=Ls;Y.nodeType!==8;){if(!se){Y=null;break t}if(Y=ld(Y.nextSibling),Y===null){Y=null;break t}}se=Y.data,Y=se==="F!"||se==="F"?Y:null}if(Y){_a=ld(Y.nextSibling),T=Y.data==="F!";break e}}pu(T)}T=!1}T&&(p=b[0])}}return b=$s(),b.memoizedState=b.baseState=p,T={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xe,lastRenderedState:p},b.queue=T,b=hc.bind(null,no,T),T.dispatch=b,T=N(!1),se=Oh.bind(null,no,!1,T.queue),T=$s(),Y={state:p,dispatch:null,action:u,pending:null},T.queue=Y,b=J.bind(null,no,Y,se,b),Y.dispatch=b,T.memoizedState=u,[p,b,!1]}function ct(u){var p=es();return ft(p,Ko,u)}function ft(u,p,b){if(p=nd(u,p,Xe)[0],u=td(Yl)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var T=Dc(p)}catch(je){throw je===Ca?ci:je}else T=p;p=es();var Y=p.queue,se=Y.dispatch;return b!==p.memoizedState&&(no.flags|=2048,wt(9,Pt(),xt.bind(null,Y,b),null)),[T,se,u]}function xt(u,p){u.action=p}function Ct(u){var p=es(),b=Ko;if(b!==null)return ft(p,b,u);es(),p=p.memoizedState,b=es();var T=b.queue.dispatch;return b.memoizedState=u,[p,T,!1]}function wt(u,p,b,T){return u={tag:u,create:b,deps:T,inst:p,next:null},p=no.updateQueue,p===null&&(p=cA(),no.updateQueue=p),b=p.lastEffect,b===null?p.lastEffect=u.next=u:(T=b.next,b.next=u,u.next=T,p.lastEffect=u),u}function Pt(){return{destroy:void 0,resource:void 0}}function Lt(){return es().memoizedState}function Bt(u,p,b,T){var Y=$s();T=T===void 0?null:T,no.flags|=u,Y.memoizedState=wt(1|p,Pt(),b,T)}function Yt(u,p,b,T){var Y=es();T=T===void 0?null:T;var se=Y.memoizedState.inst;Ko!==null&&T!==null&&Ql(T,Ko.memoizedState.deps)?Y.memoizedState=wt(p,se,b,T):(no.flags|=u,Y.memoizedState=wt(1|p,se,b,T))}function dn(u,p){Bt(8390656,8,u,p)}function Xt(u,p){Yt(2048,8,u,p)}function nn(u,p){return Yt(4,2,u,p)}function An(u,p){return Yt(4,4,u,p)}function qn(u,p){if(typeof p=="function"){u=u();var b=p(u);return function(){typeof b=="function"?b():p(null)}}if(p!=null)return u=u(),p.current=u,function(){p.current=null}}function Qn(u,p,b){b=b!=null?b.concat([u]):null,Yt(4,4,qn.bind(null,p,u),b)}function Tn(){}function bi(u,p){var b=es();p=p===void 0?null:p;var T=b.memoizedState;return p!==null&&Ql(p,T[1])?T[0]:(b.memoizedState=[u,p],u)}function cr(u,p){var b=es();p=p===void 0?null:p;var T=b.memoizedState;if(p!==null&&Ql(p,T[1]))return T[0];if(T=u(),Ti){de(!0);try{u()}finally{de(!1)}}return b.memoizedState=[T,p],T}function _o(u,p,b){return b===void 0||(vu&1073741824)!==0?u.memoizedState=p:(u.memoizedState=b,u=oy(),no.lanes|=u,Pd|=u,b)}function la(u,p,b,T){return xA(b,p)?b:jl.current!==null?(u=_o(u,b,T),xA(u,p)||(Zs=!0),u):(vu&42)===0?(Zs=!0,u.memoizedState=b):(u=oy(),no.lanes|=u,Pd|=u,p)}function Lo(u,p,b,T,Y){var se=ot.p;ot.p=se!==0&&8>se?se:8;var je=ze.T,at={};ze.T=at,Oh(u,!1,p,b);try{var Ft=Y(),hn=ze.S;if(hn!==null&&hn(at,Ft),Ft!==null&&typeof Ft=="object"&&typeof Ft.then=="function"){var kn=Id(Ft,T);ql(u,p,kn,Bu(u))}else ql(u,p,T,Bu(u))}catch(Gn){ql(u,p,{then:function(){},status:"rejected",reason:Gn},Bu())}finally{ot.p=se,ze.T=je}}function Ra(){}function Aa(u,p,b,T){if(u.tag!==5)throw Error(i(476));var Y=Er(u).queue;Lo(u,Y,p,yt,b===null?Ra:function(){return Qo(u),b(T)})}function Er(u){var p=u.memoizedState;if(p!==null)return p;p={memoizedState:yt,baseState:yt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yl,lastRenderedState:yt},next:null};var b={};return p.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yl,lastRenderedState:b},next:null},u.memoizedState=p,u=u.alternate,u!==null&&(u.memoizedState=p),p}function Qo(u){var p=Er(u).next.queue;ql(u,p,{},Bu())}function ts(){return Ro(Qt)}function Wa(){return es().memoizedState}function Bs(){return es().memoizedState}function Os(u){for(var p=u.return;p!==null;){switch(p.tag){case 24:case 3:var b=Bu();u=kA(b);var T=Ac(p,u,b);T!==null&&(sh(T,p,b),Bh(T,p,b)),p={cache:wh()},u.payload=p;return}p=p.return}}function Qu(u,p,b){var T=Bu();b={lane:T,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null},ih(u)?Yu(p,b):(b=ac(u,p,b,T),b!==null&&(sh(b,u,T),Rc(b,p,T)))}function hc(u,p,b){var T=Bu();ql(u,p,b,T)}function ql(u,p,b,T){var Y={lane:T,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null};if(ih(u))Yu(p,Y);else{var se=u.alternate;if(u.lanes===0&&(se===null||se.lanes===0)&&(se=p.lastRenderedReducer,se!==null))try{var je=p.lastRenderedState,at=se(je,b);if(Y.hasEagerState=!0,Y.eagerState=at,xA(at,je))return EA(u,p,Y,0),Gs===null&&Nl(),!1}catch{}finally{}if(b=ac(u,p,Y,T),b!==null)return sh(b,u,T),Rc(b,p,T),!0}return!1}function Oh(u,p,b,T){if(T={lane:2,revertLane:kp(),action:T,hasEagerState:!1,eagerState:null,next:null},ih(u)){if(p)throw Error(i(479))}else p=ac(u,b,T,2),p!==null&&sh(p,u,2)}function ih(u){var p=u.alternate;return u===no||p!==null&&p===no}function Yu(u,p){Oi=Wu=!0;var b=u.pending;b===null?p.next=p:(p.next=b.next,b.next=p),u.pending=p}function Rc(u,p,b){if((b&4194048)!==0){var T=p.lanes;T&=u.pendingLanes,b|=T,p.lanes=b,Mn(u,b)}}var bl={readContext:Ro,use:uc,useCallback:go,useContext:go,useEffect:go,useImperativeHandle:go,useLayoutEffect:go,useInsertionEffect:go,useMemo:go,useReducer:go,useRef:go,useState:go,useDebugValue:go,useDeferredValue:go,useTransition:go,useSyncExternalStore:go,useId:go,useHostTransitionStatus:go,useFormState:go,useActionState:go,useOptimistic:go,useMemoCache:go,useCacheRefresh:go},qu={readContext:Ro,use:uc,useCallback:function(u,p){return $s().memoizedState=[u,p===void 0?null:p],u},useContext:Ro,useEffect:dn,useImperativeHandle:function(u,p,b){b=b!=null?b.concat([u]):null,Bt(4194308,4,qn.bind(null,p,u),b)},useLayoutEffect:function(u,p){return Bt(4194308,4,u,p)},useInsertionEffect:function(u,p){Bt(4,2,u,p)},useMemo:function(u,p){var b=$s();p=p===void 0?null:p;var T=u();if(Ti){de(!0);try{u()}finally{de(!1)}}return b.memoizedState=[T,p],T},useReducer:function(u,p,b){var T=$s();if(b!==void 0){var Y=b(p);if(Ti){de(!0);try{b(p)}finally{de(!1)}}}else Y=p;return T.memoizedState=T.baseState=Y,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:Y},T.queue=u,u=u.dispatch=Qu.bind(null,no,u),[T.memoizedState,u]},useRef:function(u){var p=$s();return u={current:u},p.memoizedState=u},useState:function(u){u=N(u);var p=u.queue,b=hc.bind(null,no,p);return p.dispatch=b,[u.memoizedState,b]},useDebugValue:Tn,useDeferredValue:function(u,p){var b=$s();return _o(b,u,p)},useTransition:function(){var u=N(!1);return u=Lo.bind(null,no,u.queue,!0,!1),$s().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,p,b){var T=no,Y=$s();if($r){if(b===void 0)throw Error(i(407));b=b()}else{if(b=p(),Gs===null)throw Error(i(349));(Yo&124)!==0||s(T,p,b)}Y.memoizedState=b;var se={value:b,getSnapshot:p};return Y.queue=se,dn(_.bind(null,T,se,u),[u]),T.flags|=2048,wt(9,Pt(),f.bind(null,T,se,b,p),null),b},useId:function(){var u=$s(),p=Gs.identifierPrefix;if($r){var b=Lu,T=aa;b=(T&~(1<<32-re(T)-1)).toString(32)+b,p="«"+p+"R"+b,b=Tc++,0<b&&(p+="H"+b.toString(32)),p+="»"}else b=sa++,p="«"+p+"r"+b.toString(32)+"»";return u.memoizedState=p},useHostTransitionStatus:ts,useFormState:At,useActionState:At,useOptimistic:function(u){var p=$s();p.memoizedState=p.baseState=u;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=b,p=Oh.bind(null,no,!0,b),b.dispatch=p,[u,p]},useMemoCache:cc,useCacheRefresh:function(){return $s().memoizedState=Os.bind(null,no)}},xl={readContext:Ro,use:uc,useCallback:bi,useContext:Ro,useEffect:Xt,useImperativeHandle:Qn,useInsertionEffect:nn,useLayoutEffect:An,useMemo:cr,useReducer:td,useRef:Lt,useState:function(){return td(Yl)},useDebugValue:Tn,useDeferredValue:function(u,p){var b=es();return la(b,Ko.memoizedState,u,p)},useTransition:function(){var u=td(Yl)[0],p=es().memoizedState;return[typeof u=="boolean"?u:Dc(u),p]},useSyncExternalStore:I,useId:Wa,useHostTransitionStatus:ts,useFormState:ct,useActionState:ct,useOptimistic:function(u,p){var b=es();return q(b,Ko,u,p)},useMemoCache:cc,useCacheRefresh:Bs},Pc={readContext:Ro,use:uc,useCallback:bi,useContext:Ro,useEffect:Xt,useImperativeHandle:Qn,useInsertionEffect:nn,useLayoutEffect:An,useMemo:cr,useReducer:Td,useRef:Lt,useState:function(){return Td(Yl)},useDebugValue:Tn,useDeferredValue:function(u,p){var b=es();return Ko===null?_o(b,u,p):la(b,Ko.memoizedState,u,p)},useTransition:function(){var u=Td(Yl)[0],p=es().memoizedState;return[typeof u=="boolean"?u:Dc(u),p]},useSyncExternalStore:I,useId:Wa,useHostTransitionStatus:ts,useFormState:Ct,useActionState:Ct,useOptimistic:function(u,p){var b=es();return Ko!==null?q(b,Ko,u,p):(b.baseState=u,[u,b.queue.dispatch])},useMemoCache:cc,useCacheRefresh:Bs},bo=null,Xo=0;function hA(u){var p=Xo;return Xo+=1,bo===null&&(bo=[]),Ic(bo,u,p)}function gs(u,p){p=p.props.ref,u.ref=p!==void 0?p:null}function _u(u,p){throw p.$$typeof===O?Error(i(525)):(u=Object.prototype.toString.call(p),Error(i(31,u==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":u)))}function dA(u){var p=u._init;return p(u._payload)}function RA(u){function p(tn,$t){if(u){var un=tn.deletions;un===null?(tn.deletions=[$t],tn.flags|=16):un.push($t)}}function b(tn,$t){if(!u)return null;for(;$t!==null;)p(tn,$t),$t=$t.sibling;return null}function T(tn){for(var $t=new Map;tn!==null;)tn.key!==null?$t.set(tn.key,tn):$t.set(tn.index,tn),tn=tn.sibling;return $t}function Y(tn,$t){return tn=Es(tn,$t),tn.index=0,tn.sibling=null,tn}function se(tn,$t,un){return tn.index=un,u?(un=tn.alternate,un!==null?(un=un.index,un<$t?(tn.flags|=67108866,$t):un):(tn.flags|=67108866,$t)):(tn.flags|=1048576,$t)}function je(tn){return u&&tn.alternate===null&&(tn.flags|=67108866),tn}function at(tn,$t,un,Ln){return $t===null||$t.tag!==6?($t=Bd(un,tn.mode,Ln),$t.return=tn,$t):($t=Y($t,un),$t.return=tn,$t)}function Ft(tn,$t,un,Ln){var ir=un.type;return ir===z?kn(tn,$t,un.props.children,Ln,un.key):$t!==null&&($t.elementType===ir||typeof ir=="object"&&ir!==null&&ir.$$typeof===ue&&dA(ir)===$t.type)?($t=Y($t,un.props),gs($t,un),$t.return=tn,$t):($t=Ed(un.type,un.key,un.props,null,tn.mode,Ln),gs($t,un),$t.return=tn,$t)}function hn(tn,$t,un,Ln){return $t===null||$t.tag!==4||$t.stateNode.containerInfo!==un.containerInfo||$t.stateNode.implementation!==un.implementation?($t=Vc(un,tn.mode,Ln),$t.return=tn,$t):($t=Y($t,un.children||[]),$t.return=tn,$t)}function kn(tn,$t,un,Ln,ir){return $t===null||$t.tag!==7?($t=mu(un,tn.mode,Ln,ir),$t.return=tn,$t):($t=Y($t,un),$t.return=tn,$t)}function Gn(tn,$t,un){if(typeof $t=="string"&&$t!==""||typeof $t=="number"||typeof $t=="bigint")return $t=Bd(""+$t,tn.mode,un),$t.return=tn,$t;if(typeof $t=="object"&&$t!==null){switch($t.$$typeof){case U:return un=Ed($t.type,$t.key,$t.props,null,tn.mode,un),gs(un,$t),un.return=tn,un;case K:return $t=Vc($t,tn.mode,un),$t.return=tn,$t;case ue:var Ln=$t._init;return $t=Ln($t._payload),Gn(tn,$t,un)}if(xe($t)||Be($t))return $t=mu($t,tn.mode,un,null),$t.return=tn,$t;if(typeof $t.then=="function")return Gn(tn,hA($t),un);if($t.$$typeof===ae)return Gn(tn,eh(tn,$t),un);_u(tn,$t)}return null}function mn(tn,$t,un,Ln){var ir=$t!==null?$t.key:null;if(typeof un=="string"&&un!==""||typeof un=="number"||typeof un=="bigint")return ir!==null?null:at(tn,$t,""+un,Ln);if(typeof un=="object"&&un!==null){switch(un.$$typeof){case U:return un.key===ir?Ft(tn,$t,un,Ln):null;case K:return un.key===ir?hn(tn,$t,un,Ln):null;case ue:return ir=un._init,un=ir(un._payload),mn(tn,$t,un,Ln)}if(xe(un)||Be(un))return ir!==null?null:kn(tn,$t,un,Ln,null);if(typeof un.then=="function")return mn(tn,$t,hA(un),Ln);if(un.$$typeof===ae)return mn(tn,$t,eh(tn,un),Ln);_u(tn,un)}return null}function fn(tn,$t,un,Ln,ir){if(typeof Ln=="string"&&Ln!==""||typeof Ln=="number"||typeof Ln=="bigint")return tn=tn.get(un)||null,at($t,tn,""+Ln,ir);if(typeof Ln=="object"&&Ln!==null){switch(Ln.$$typeof){case U:return tn=tn.get(Ln.key===null?un:Ln.key)||null,Ft($t,tn,Ln,ir);case K:return tn=tn.get(Ln.key===null?un:Ln.key)||null,hn($t,tn,Ln,ir);case ue:var qo=Ln._init;return Ln=qo(Ln._payload),fn(tn,$t,un,Ln,ir)}if(xe(Ln)||Be(Ln))return tn=tn.get(un)||null,kn($t,tn,Ln,ir,null);if(typeof Ln.then=="function")return fn(tn,$t,un,hA(Ln),ir);if(Ln.$$typeof===ae)return fn(tn,$t,un,eh($t,Ln),ir);_u($t,Ln)}return null}function Pr(tn,$t,un,Ln){for(var ir=null,qo=null,nr=$t,Or=$t=0,FA=null;nr!==null&&Or<un.length;Or++){nr.index>Or?(FA=nr,nr=null):FA=nr.sibling;var Oa=mn(tn,nr,un[Or],Ln);if(Oa===null){nr===null&&(nr=FA);break}u&&nr&&Oa.alternate===null&&p(tn,nr),$t=se(Oa,$t,Or),qo===null?ir=Oa:qo.sibling=Oa,qo=Oa,nr=FA}if(Or===un.length)return b(tn,nr),$r&&Fu(tn,Or),ir;if(nr===null){for(;Or<un.length;Or++)nr=Gn(tn,un[Or],Ln),nr!==null&&($t=se(nr,$t,Or),qo===null?ir=nr:qo.sibling=nr,qo=nr);return $r&&Fu(tn,Or),ir}for(nr=T(nr);Or<un.length;Or++)FA=fn(nr,tn,Or,un[Or],Ln),FA!==null&&(u&&FA.alternate!==null&&nr.delete(FA.key===null?Or:FA.key),$t=se(FA,$t,Or),qo===null?ir=FA:qo.sibling=FA,qo=FA);return u&&nr.forEach(function(am){return p(tn,am)}),$r&&Fu(tn,Or),ir}function Kr(tn,$t,un,Ln){if(un==null)throw Error(i(151));for(var ir=null,qo=null,nr=$t,Or=$t=0,FA=null,Oa=un.next();nr!==null&&!Oa.done;Or++,Oa=un.next()){nr.index>Or?(FA=nr,nr=null):FA=nr.sibling;var am=mn(tn,nr,Oa.value,Ln);if(am===null){nr===null&&(nr=FA);break}u&&nr&&am.alternate===null&&p(tn,nr),$t=se(am,$t,Or),qo===null?ir=am:qo.sibling=am,qo=am,nr=FA}if(Oa.done)return b(tn,nr),$r&&Fu(tn,Or),ir;if(nr===null){for(;!Oa.done;Or++,Oa=un.next())Oa=Gn(tn,Oa.value,Ln),Oa!==null&&($t=se(Oa,$t,Or),qo===null?ir=Oa:qo.sibling=Oa,qo=Oa);return $r&&Fu(tn,Or),ir}for(nr=T(nr);!Oa.done;Or++,Oa=un.next())Oa=fn(nr,tn,Or,Oa.value,Ln),Oa!==null&&(u&&Oa.alternate!==null&&nr.delete(Oa.key===null?Or:Oa.key),$t=se(Oa,$t,Or),qo===null?ir=Oa:qo.sibling=Oa,qo=Oa);return u&&nr.forEach(function(AC){return p(tn,AC)}),$r&&Fu(tn,Or),ir}function bs(tn,$t,un,Ln){if(typeof un=="object"&&un!==null&&un.type===z&&un.key===null&&(un=un.props.children),typeof un=="object"&&un!==null){switch(un.$$typeof){case U:e:{for(var ir=un.key;$t!==null;){if($t.key===ir){if(ir=un.type,ir===z){if($t.tag===7){b(tn,$t.sibling),Ln=Y($t,un.props.children),Ln.return=tn,tn=Ln;break e}}else if($t.elementType===ir||typeof ir=="object"&&ir!==null&&ir.$$typeof===ue&&dA(ir)===$t.type){b(tn,$t.sibling),Ln=Y($t,un.props),gs(Ln,un),Ln.return=tn,tn=Ln;break e}b(tn,$t);break}else p(tn,$t);$t=$t.sibling}un.type===z?(Ln=mu(un.props.children,tn.mode,Ln,un.key),Ln.return=tn,tn=Ln):(Ln=Ed(un.type,un.key,un.props,null,tn.mode,Ln),gs(Ln,un),Ln.return=tn,tn=Ln)}return je(tn);case K:e:{for(ir=un.key;$t!==null;){if($t.key===ir)if($t.tag===4&&$t.stateNode.containerInfo===un.containerInfo&&$t.stateNode.implementation===un.implementation){b(tn,$t.sibling),Ln=Y($t,un.children||[]),Ln.return=tn,tn=Ln;break e}else{b(tn,$t);break}else p(tn,$t);$t=$t.sibling}Ln=Vc(un,tn.mode,Ln),Ln.return=tn,tn=Ln}return je(tn);case ue:return ir=un._init,un=ir(un._payload),bs(tn,$t,un,Ln)}if(xe(un))return Pr(tn,$t,un,Ln);if(Be(un)){if(ir=Be(un),typeof ir!="function")throw Error(i(150));return un=ir.call(un),Kr(tn,$t,un,Ln)}if(typeof un.then=="function")return bs(tn,$t,hA(un),Ln);if(un.$$typeof===ae)return bs(tn,$t,eh(tn,un),Ln);_u(tn,un)}return typeof un=="string"&&un!==""||typeof un=="number"||typeof un=="bigint"?(un=""+un,$t!==null&&$t.tag===6?(b(tn,$t.sibling),Ln=Y($t,un),Ln.return=tn,tn=Ln):(b(tn,$t),Ln=Bd(un,tn.mode,Ln),Ln.return=tn,tn=Ln),je(tn)):b(tn,$t)}return function(tn,$t,un,Ln){try{Xo=0;var ir=bs(tn,$t,un,Ln);return bo=null,ir}catch(nr){if(nr===Ca||nr===ci)throw nr;var qo=JA(29,nr,null,tn.mode);return qo.lanes=Ln,qo.return=tn,qo}finally{}}}var Hl=RA(!0),Kc=RA(!1),nu=Ne(null),Qa=null;function bu(u){var p=u.alternate;lt(wa,wa.current&1),lt(nu,u),Qa===null&&(p===null||jl.current!==null||p.memoizedState!==null)&&(Qa=u)}function zf(u){if(u.tag===22){if(lt(wa,wa.current),lt(nu,u),Qa===null){var p=u.alternate;p!==null&&p.memoizedState!==null&&(Qa=u)}}else xu()}function xu(){lt(wa,wa.current),lt(nu,nu.current)}function Mu(u){tt(nu),Qa===u&&(Qa=null),tt(wa)}var wa=Ne(0);function iu(u){for(var p=u;p!==null;){if(p.tag===13){var b=p.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||ou(b)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===u)break;for(;p.sibling===null;){if(p.return===null||p.return===u)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}function id(u,p,b,T){p=u.memoizedState,b=b(T,p),b=b==null?p:S({},p,b),u.memoizedState=b,u.lanes===0&&(u.updateQueue.baseState=b)}var Nf={enqueueSetState:function(u,p,b){u=u._reactInternals;var T=Bu(),Y=kA(T);Y.payload=p,b!=null&&(Y.callback=b),p=Ac(u,Y,T),p!==null&&(sh(p,u,T),Bh(p,u,T))},enqueueReplaceState:function(u,p,b){u=u._reactInternals;var T=Bu(),Y=kA(T);Y.tag=1,Y.payload=p,b!=null&&(Y.callback=b),p=Ac(u,Y,T),p!==null&&(sh(p,u,T),Bh(p,u,T))},enqueueForceUpdate:function(u,p){u=u._reactInternals;var b=Bu(),T=kA(b);T.tag=2,p!=null&&(T.callback=p),p=Ac(u,T,b),p!==null&&(sh(p,u,b),Bh(p,u,b))}};function of(u,p,b,T,Y,se,je){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(T,se,je):p.prototype&&p.prototype.isPureReactComponent?!oc(b,T)||!oc(Y,se):!0}function mp(u,p,b,T){u=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(b,T),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(b,T),p.state!==u&&Nf.enqueueReplaceState(p,p.state,null)}function dc(u,p){var b=p;if("ref"in p){b={};for(var T in p)T!=="ref"&&(b[T]=p[T])}if(u=u.defaultProps){b===p&&(b=S({},b));for(var Y in u)b[Y]===void 0&&(b[Y]=u[Y])}return b}var rd=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)};function Gf(u){rd(u)}function jf(u){console.error(u)}function W0(u){rd(u)}function af(u,p){try{var b=u.onUncaughtError;b(p.value,{componentStack:p.stack})}catch(T){setTimeout(function(){throw T})}}function Jo(u,p,b){try{var T=u.onCaughtError;T(b.value,{componentStack:b.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(Y){setTimeout(function(){throw Y})}}function Bm(u,p,b){return b=kA(b),b.tag=3,b.payload={element:null},b.callback=function(){af(u,p)},b}function Ih(u){return u=kA(u),u.tag=3,u}function Wf(u,p,b,T){var Y=b.type.getDerivedStateFromError;if(typeof Y=="function"){var se=T.value;u.payload=function(){return Y(se)},u.callback=function(){Jo(p,b,T)}}var je=b.stateNode;je!==null&&typeof je.componentDidCatch=="function"&&(u.callback=function(){Jo(p,b,T),typeof Y!="function"&&(hf===null?hf=new Set([this]):hf.add(this));var at=T.stack;this.componentDidCatch(T.value,{componentStack:at!==null?at:""})})}function ru(u,p,b,T,Y){if(b.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){if(p=b.alternate,p!==null&&ps(p,b,Y,!0),b=nu.current,b!==null){switch(b.tag){case 13:return Qa===null?$0():b.alternate===null&&Sl===0&&(Sl=3),b.flags&=-257,b.flags|=65536,b.lanes=Y,T===Gu?b.flags|=16384:(p=b.updateQueue,p===null?b.updateQueue=new Set([T]):p.add(T),Z1(u,T,Y)),!1;case 22:return b.flags|=65536,T===Gu?b.flags|=16384:(p=b.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([T])},b.updateQueue=p):(b=p.retryQueue,b===null?p.retryQueue=new Set([T]):b.add(T)),Z1(u,T,Y)),!1}throw Error(i(435,b.tag))}return Z1(u,T,Y),$0(),!1}if($r)return p=nu.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=Y,T!==Xc&&(u=Error(i(422),{cause:T}),zu(Na(u,b)))):(T!==Xc&&(p=Error(i(423),{cause:T}),zu(Na(p,b))),u=u.current.alternate,u.flags|=65536,Y&=-Y,u.lanes|=Y,T=Na(T,b),Y=Bm(u.stateNode,T,Y),yu(u,Y),Sl!==4&&(Sl=2)),!1;var se=Error(i(520),{cause:T});if(se=Na(se,b),Zf===null?Zf=[se]:Zf.push(se),Sl!==4&&(Sl=2),p===null)return!0;T=Na(T,b),b=p;do{switch(b.tag){case 3:return b.flags|=65536,u=Y&-Y,b.lanes|=u,u=Bm(b.stateNode,T,u),yu(b,u),!1;case 1:if(p=b.type,se=b.stateNode,(b.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||se!==null&&typeof se.componentDidCatch=="function"&&(hf===null||!hf.has(se))))return b.flags|=65536,Y&=-Y,b.lanes|=Y,Y=Ih(Y),Wf(Y,u,b,T),yu(b,Y),!1}b=b.return}while(b!==null);return!1}var kd=Error(i(461)),Zs=!1;function us(u,p,b,T){p.child=u===null?Kc(p,null,b,T):Hl(p,u.child,b,T)}function Qf(u,p,b,T,Y){b=b.render;var se=p.ref;if("ref"in T){var je={};for(var at in T)at!=="ref"&&(je[at]=T[at])}else je=T;return Sh(p),T=Ff(u,p,b,je,se,Y),at=ed(),u!==null&&!Zs?(Cu(u,p,Y),v(u,p,Y)):($r&&at&&$c(p),p.flags|=1,us(u,p,T,Y),p.child)}function Om(u,p,b,T,Y){if(u===null){var se=b.type;return typeof se=="function"&&!Ec(se)&&se.defaultProps===void 0&&b.compare===null?(p.tag=15,p.type=se,Yf(u,p,se,T,Y)):(u=Ed(b.type,null,T,p,p.mode,Y),u.ref=p.ref,u.return=p,p.child=u)}if(se=u.child,!B(u,Y)){var je=se.memoizedProps;if(b=b.compare,b=b!==null?b:oc,b(je,T)&&u.ref===p.ref)return v(u,p,Y)}return p.flags|=1,u=Es(se,T),u.ref=p.ref,u.return=p,p.child=u}function Yf(u,p,b,T,Y){if(u!==null){var se=u.memoizedProps;if(oc(se,T)&&u.ref===p.ref)if(Zs=!1,p.pendingProps=T=se,B(u,Y))(u.flags&131072)!==0&&(Zs=!0);else return p.lanes=u.lanes,v(u,p,Y)}return lf(u,p,b,T,Y)}function sf(u,p,b){var T=p.pendingProps,Y=T.children,se=u!==null?u.memoizedState:null;if(T.mode==="hidden"){if((p.flags&128)!==0){if(T=se!==null?se.baseLanes|b:b,u!==null){for(Y=p.child=u.child,se=0;Y!==null;)se=se|Y.lanes|Y.childLanes,Y=Y.sibling;p.childLanes=se&~T}else p.childLanes=0,p.child=null;return Dd(u,p,T,b)}if((b&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},u!==null&&Uf(p,se!==null?se.cachePool:null),se!==null?Wl(p,se):Xh(),zf(p);else return p.lanes=p.childLanes=536870912,Dd(u,p,se!==null?se.baseLanes|b:b,b)}else se!==null?(Uf(p,se.cachePool),Wl(p,se),xu(),p.memoizedState=null):(u!==null&&Uf(p,null),Xh(),xu());return us(u,p,Y,b),p.child}function Dd(u,p,b,T){var Y=Oc();return Y=Y===null?null:{parent:ba._currentValue,pool:Y},p.memoizedState={baseLanes:b,cachePool:Y},u!==null&&Uf(p,null),Xh(),zf(p),u!==null&&ps(u,p,T,!0),null}function mr(u,p){var b=p.ref;if(b===null)u!==null&&u.ref!==null&&(p.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(i(284));(u===null||u.ref!==b)&&(p.flags|=4194816)}}function lf(u,p,b,T,Y){return Sh(p),b=Ff(u,p,b,T,void 0,Y),T=ed(),u!==null&&!Zs?(Cu(u,p,Y),v(u,p,Y)):($r&&T&&$c(p),p.flags|=1,us(u,p,b,Y),p.child)}function ea(u,p,b,T,Y,se){return Sh(p),p.updateQueue=null,b=Uo(p,T,b,Y),Jh(u),T=ed(),u!==null&&!Zs?(Cu(u,p,se),v(u,p,se)):($r&&T&&$c(p),p.flags|=1,us(u,p,b,se),p.child)}function Th(u,p,b,T,Y){if(Sh(p),p.stateNode===null){var se=Tr,je=b.contextType;typeof je=="object"&&je!==null&&(se=Ro(je)),se=new b(T,se),p.memoizedState=se.state!==null&&se.state!==void 0?se.state:null,se.updater=Nf,p.stateNode=se,se._reactInternals=p,se=p.stateNode,se.props=T,se.state=p.memoizedState,se.refs={},Eh(p),je=b.contextType,se.context=typeof je=="object"&&je!==null?Ro(je):Tr,se.state=p.memoizedState,je=b.getDerivedStateFromProps,typeof je=="function"&&(id(p,b,je,T),se.state=p.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof se.getSnapshotBeforeUpdate=="function"||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(je=se.state,typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount(),je!==se.state&&Nf.enqueueReplaceState(se,se.state,null),_l(p,T,se,Y),tu(),se.state=p.memoizedState),typeof se.componentDidMount=="function"&&(p.flags|=4194308),T=!0}else if(u===null){se=p.stateNode;var at=p.memoizedProps,Ft=dc(b,at);se.props=Ft;var hn=se.context,kn=b.contextType;je=Tr,typeof kn=="object"&&kn!==null&&(je=Ro(kn));var Gn=b.getDerivedStateFromProps;kn=typeof Gn=="function"||typeof se.getSnapshotBeforeUpdate=="function",at=p.pendingProps!==at,kn||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(at||hn!==je)&&mp(p,se,T,je),Gl=!1;var mn=p.memoizedState;se.state=mn,_l(p,T,se,Y),tu(),hn=p.memoizedState,at||mn!==hn||Gl?(typeof Gn=="function"&&(id(p,b,Gn,T),hn=p.memoizedState),(Ft=Gl||of(p,b,Ft,T,mn,hn,je))?(kn||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount()),typeof se.componentDidMount=="function"&&(p.flags|=4194308)):(typeof se.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=T,p.memoizedState=hn),se.props=T,se.state=hn,se.context=je,T=Ft):(typeof se.componentDidMount=="function"&&(p.flags|=4194308),T=!1)}else{se=p.stateNode,lc(u,p),je=p.memoizedProps,kn=dc(b,je),se.props=kn,Gn=p.pendingProps,mn=se.context,hn=b.contextType,Ft=Tr,typeof hn=="object"&&hn!==null&&(Ft=Ro(hn)),at=b.getDerivedStateFromProps,(hn=typeof at=="function"||typeof se.getSnapshotBeforeUpdate=="function")||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(je!==Gn||mn!==Ft)&&mp(p,se,T,Ft),Gl=!1,mn=p.memoizedState,se.state=mn,_l(p,T,se,Y),tu();var fn=p.memoizedState;je!==Gn||mn!==fn||Gl||u!==null&&u.dependencies!==null&&Jc(u.dependencies)?(typeof at=="function"&&(id(p,b,at,T),fn=p.memoizedState),(kn=Gl||of(p,b,kn,T,mn,fn,Ft)||u!==null&&u.dependencies!==null&&Jc(u.dependencies))?(hn||typeof se.UNSAFE_componentWillUpdate!="function"&&typeof se.componentWillUpdate!="function"||(typeof se.componentWillUpdate=="function"&&se.componentWillUpdate(T,fn,Ft),typeof se.UNSAFE_componentWillUpdate=="function"&&se.UNSAFE_componentWillUpdate(T,fn,Ft)),typeof se.componentDidUpdate=="function"&&(p.flags|=4),typeof se.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof se.componentDidUpdate!="function"||je===u.memoizedProps&&mn===u.memoizedState||(p.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||je===u.memoizedProps&&mn===u.memoizedState||(p.flags|=1024),p.memoizedProps=T,p.memoizedState=fn),se.props=T,se.state=fn,se.context=Ft,T=kn):(typeof se.componentDidUpdate!="function"||je===u.memoizedProps&&mn===u.memoizedState||(p.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||je===u.memoizedProps&&mn===u.memoizedState||(p.flags|=1024),T=!1)}return se=T,mr(u,p),T=(p.flags&128)!==0,se||T?(se=p.stateNode,b=T&&typeof b.getDerivedStateFromError!="function"?null:se.render(),p.flags|=1,u!==null&&T?(p.child=Hl(p,u.child,null,Y),p.child=Hl(p,null,b,Y)):us(u,p,b,Y),p.memoizedState=se.state,u=p.child):u=v(u,p,Y),u}function pp(u,p,b,T){return Fs(),p.flags|=256,us(u,p,b,T),p.child}var Hu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fA(u){return{baseLanes:u,cachePool:$h()}}function ol(u,p,b){return u=u!==null?u.childLanes&~b:0,p&&(u|=ah),u}function gp(u,p,b){var T=p.pendingProps,Y=!1,se=(p.flags&128)!==0,je;if((je=se)||(je=u!==null&&u.memoizedState===null?!1:(wa.current&2)!==0),je&&(Y=!0,p.flags&=-129),je=(p.flags&32)!==0,p.flags&=-33,u===null){if($r){if(Y?bu(p):xu(),$r){var at=_a,Ft;if(Ft=at){e:{for(Ft=at,at=Ls;Ft.nodeType!==8;){if(!at){at=null;break e}if(Ft=ld(Ft.nextSibling),Ft===null){at=null;break e}}at=Ft}at!==null?(p.memoizedState={dehydrated:at,treeContext:Wo!==null?{id:aa,overflow:Lu}:null,retryLane:536870912,hydrationErrors:null},Ft=JA(18,null,null,0),Ft.stateNode=at,Ft.return=p,p.child=Ft,va=p,_a=null,Ft=!0):Ft=!1}Ft||pu(p)}if(at=p.memoizedState,at!==null&&(at=at.dehydrated,at!==null))return ou(at)?p.lanes=32:p.lanes=536870912,null;Mu(p)}return at=T.children,T=T.fallback,Y?(xu(),Y=p.mode,at=qf({mode:"hidden",children:at},Y),T=mu(T,Y,b,null),at.return=p,T.return=p,at.sibling=T,p.child=at,Y=p.child,Y.memoizedState=fA(b),Y.childLanes=ol(u,je,b),p.memoizedState=Hu,T):(bu(p),zs(p,at))}if(Ft=u.memoizedState,Ft!==null&&(at=Ft.dehydrated,at!==null)){if(se)p.flags&256?(bu(p),p.flags&=-257,p=a0(u,p,b)):p.memoizedState!==null?(xu(),p.child=u.child,p.flags|=128,p=null):(xu(),Y=T.fallback,at=p.mode,T=qf({mode:"visible",children:T.children},at),Y=mu(Y,at,b,null),Y.flags|=2,T.return=p,Y.return=p,T.sibling=Y,p.child=T,Hl(p,u.child,null,b),T=p.child,T.memoizedState=fA(b),T.childLanes=ol(u,je,b),p.memoizedState=Hu,p=Y);else if(bu(p),ou(at)){if(je=at.nextSibling&&at.nextSibling.dataset,je)var hn=je.dgst;je=hn,T=Error(i(419)),T.stack="",T.digest=je,zu({value:T,source:null,stack:null}),p=a0(u,p,b)}else if(Zs||ps(u,p,b,!1),je=(b&u.childLanes)!==0,Zs||je){if(je=Gs,je!==null&&(T=b&-b,T=(T&42)!==0?1:ii(T),T=(T&(je.suspendedLanes|b))!==0?0:T,T!==0&&T!==Ft.retryLane))throw Ft.retryLane=T,BA(u,T),sh(je,u,T),kd;at.data==="$?"||$0(),p=a0(u,p,b)}else at.data==="$?"?(p.flags|=192,p.child=u.child,p=null):(u=Ft.treeContext,_a=ld(at.nextSibling),va=p,$r=!0,lA=null,Ls=!1,u!==null&&(IA[Tl++]=aa,IA[Tl++]=Lu,IA[Tl++]=Wo,aa=u.id,Lu=u.overflow,Wo=p),p=zs(p,T.children),p.flags|=4096);return p}return Y?(xu(),Y=T.fallback,at=p.mode,Ft=u.child,hn=Ft.sibling,T=Es(Ft,{mode:"hidden",children:T.children}),T.subtreeFlags=Ft.subtreeFlags&65011712,hn!==null?Y=Es(hn,Y):(Y=mu(Y,at,b,null),Y.flags|=2),Y.return=p,T.return=p,T.sibling=Y,p.child=T,T=Y,Y=p.child,at=u.child.memoizedState,at===null?at=fA(b):(Ft=at.cachePool,Ft!==null?(hn=ba._currentValue,Ft=Ft.parent!==hn?{parent:hn,pool:hn}:Ft):Ft=$h(),at={baseLanes:at.baseLanes|b,cachePool:Ft}),Y.memoizedState=at,Y.childLanes=ol(u,je,b),p.memoizedState=Hu,T):(bu(p),b=u.child,u=b.sibling,b=Es(b,{mode:"visible",children:T.children}),b.return=p,b.sibling=null,u!==null&&(je=p.deletions,je===null?(p.deletions=[u],p.flags|=16):je.push(u)),p.child=b,p.memoizedState=null,b)}function zs(u,p){return p=qf({mode:"visible",children:p},u.mode),p.return=u,u.child=p}function qf(u,p){return u=JA(22,u,null,p),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function a0(u,p,b){return Hl(p,u.child,null,b),u=zs(p,p.pendingProps.children),u.flags|=2,p.memoizedState=null,u}function s0(u,p,b){u.lanes|=p;var T=u.alternate;T!==null&&(T.lanes|=p),Zo(u.return,p,b)}function Af(u,p,b,T,Y){var se=u.memoizedState;se===null?u.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:T,tail:b,tailMode:Y}:(se.isBackwards=p,se.rendering=null,se.renderingStartTime=0,se.last=T,se.tail=b,se.tailMode=Y)}function d(u,p,b){var T=p.pendingProps,Y=T.revealOrder,se=T.tail;if(us(u,p,T.children,b),T=wa.current,(T&2)!==0)T=T&1|2,p.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=p.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&s0(u,b,p);else if(u.tag===19)s0(u,b,p);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===p)break e;for(;u.sibling===null;){if(u.return===null||u.return===p)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}T&=1}switch(lt(wa,T),Y){case"forwards":for(b=p.child,Y=null;b!==null;)u=b.alternate,u!==null&&iu(u)===null&&(Y=b),b=b.sibling;b=Y,b===null?(Y=p.child,p.child=null):(Y=b.sibling,b.sibling=null),Af(p,!1,Y,b,se);break;case"backwards":for(b=null,Y=p.child,p.child=null;Y!==null;){if(u=Y.alternate,u!==null&&iu(u)===null){p.child=Y;break}u=Y.sibling,Y.sibling=b,b=Y,Y=u}Af(p,!0,b,null,se);break;case"together":Af(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function v(u,p,b){if(u!==null&&(p.dependencies=u.dependencies),Pd|=p.lanes,(b&p.childLanes)===0)if(u!==null){if(ps(u,p,b,!1),(b&p.childLanes)===0)return null}else return null;if(u!==null&&p.child!==u.child)throw Error(i(153));if(p.child!==null){for(u=p.child,b=Es(u,u.pendingProps),p.child=b,b.return=p;u.sibling!==null;)u=u.sibling,b=b.sibling=Es(u,u.pendingProps),b.return=p;b.sibling=null}return p.child}function B(u,p){return(u.lanes&p)!==0?!0:(u=u.dependencies,!!(u!==null&&Jc(u)))}function E(u,p,b){switch(p.tag){case 3:Le(p,p.stateNode.containerInfo),Vs(p,ba,u.memoizedState.cache),Fs();break;case 27:case 5:Re(p);break;case 4:Le(p,p.stateNode.containerInfo);break;case 10:Vs(p,p.type,p.memoizedProps.value);break;case 13:var T=p.memoizedState;if(T!==null)return T.dehydrated!==null?(bu(p),p.flags|=128,null):(b&p.child.childLanes)!==0?gp(u,p,b):(bu(p),u=v(u,p,b),u!==null?u.sibling:null);bu(p);break;case 19:var Y=(u.flags&128)!==0;if(T=(b&p.childLanes)!==0,T||(ps(u,p,b,!1),T=(b&p.childLanes)!==0),Y){if(T)return d(u,p,b);p.flags|=128}if(Y=p.memoizedState,Y!==null&&(Y.rendering=null,Y.tail=null,Y.lastEffect=null),lt(wa,wa.current),T)break;return null;case 22:case 23:return p.lanes=0,sf(u,p,b);case 24:Vs(p,ba,u.memoizedState.cache)}return v(u,p,b)}function F(u,p,b){if(u!==null)if(u.memoizedProps!==p.pendingProps)Zs=!0;else{if(!B(u,b)&&(p.flags&128)===0)return Zs=!1,E(u,p,b);Zs=(u.flags&131072)!==0}else Zs=!1,$r&&(p.flags&1048576)!==0&&Bc(p,Hh,p.index);switch(p.lanes=0,p.tag){case 16:e:{u=p.pendingProps;var T=p.elementType,Y=T._init;if(T=Y(T._payload),p.type=T,typeof T=="function")Ec(T)?(u=dc(T,u),p.tag=1,p=Th(null,p,T,u,b)):(p.tag=0,p=lf(null,p,T,u,b));else{if(T!=null){if(Y=T.$$typeof,Y===ne){p.tag=11,p=Qf(null,p,T,u,b);break e}else if(Y===W){p.tag=14,p=Om(null,p,T,u,b);break e}}throw p=qe(T)||T,Error(i(306,p,""))}}return p;case 0:return lf(u,p,p.type,p.pendingProps,b);case 1:return T=p.type,Y=dc(T,p.pendingProps),Th(u,p,T,Y,b);case 3:e:{if(Le(p,p.stateNode.containerInfo),u===null)throw Error(i(387));T=p.pendingProps;var se=p.memoizedState;Y=se.element,lc(u,p),_l(p,T,null,b);var je=p.memoizedState;if(T=je.cache,Vs(p,ba,T),T!==se.cache&&gr(p,[ba],b,!0),tu(),T=je.element,se.isDehydrated)if(se={element:T,isDehydrated:!1,cache:je.cache},p.updateQueue.baseState=se,p.memoizedState=se,p.flags&256){p=pp(u,p,T,b);break e}else if(T!==Y){Y=Na(Error(i(424)),p),zu(Y),p=pp(u,p,T,b);break e}else{switch(u=p.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(_a=ld(u.firstChild),va=p,$r=!0,lA=null,Ls=!0,b=Kc(p,null,T,b),p.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling}else{if(Fs(),T===Y){p=v(u,p,b);break e}us(u,p,T,b)}p=p.child}return p;case 26:return mr(u,p),u===null?(b=b0(p.type,null,p.pendingProps,null))?p.memoizedState=b:$r||(b=p.type,u=p.pendingProps,T=om(St.current).createElement(b),T[hi]=p,T[ti]=u,Js(T,b,u),Ir(T),p.stateNode=T):p.memoizedState=b0(p.type,u.memoizedProps,p.pendingProps,u.memoizedState),null;case 27:return Re(p),u===null&&$r&&(T=p.stateNode=PA(p.type,p.pendingProps,St.current),va=p,Ls=!0,Y=_a,Ah(p.type)?(sg=Y,_a=ld(T.firstChild)):_a=Y),us(u,p,p.pendingProps.children,b),mr(u,p),u===null&&(p.flags|=4194304),p.child;case 5:return u===null&&$r&&((Y=T=_a)&&(T=v0(T,p.type,p.pendingProps,Ls),T!==null?(p.stateNode=T,va=p,_a=ld(T.firstChild),Ls=!1,Y=!0):Y=!1),Y||pu(p)),Re(p),Y=p.type,se=p.pendingProps,je=u!==null?u.memoizedProps:null,T=se.children,sd(Y,se)?T=null:je!==null&&sd(Y,je)&&(p.flags|=32),p.memoizedState!==null&&(Y=Ff(u,p,ja,null,null,b),Qt._currentValue=Y),mr(u,p),us(u,p,T,b),p.child;case 6:return u===null&&$r&&((u=b=_a)&&(b=Um(b,p.pendingProps,Ls),b!==null?(p.stateNode=b,va=p,_a=null,u=!0):u=!1),u||pu(p)),null;case 13:return gp(u,p,b);case 4:return Le(p,p.stateNode.containerInfo),T=p.pendingProps,u===null?p.child=Hl(p,null,T,b):us(u,p,T,b),p.child;case 11:return Qf(u,p,p.type,p.pendingProps,b);case 7:return us(u,p,p.pendingProps,b),p.child;case 8:return us(u,p,p.pendingProps.children,b),p.child;case 12:return us(u,p,p.pendingProps.children,b),p.child;case 10:return T=p.pendingProps,Vs(p,p.type,T.value),us(u,p,T.children,b),p.child;case 9:return Y=p.type._context,T=p.pendingProps.children,Sh(p),Y=Ro(Y),T=T(Y),p.flags|=1,us(u,p,T,b),p.child;case 14:return Om(u,p,p.type,p.pendingProps,b);case 15:return Yf(u,p,p.type,p.pendingProps,b);case 19:return d(u,p,b);case 31:return T=p.pendingProps,b=p.mode,T={mode:T.mode,children:T.children},u===null?(b=qf(T,b),b.ref=p.ref,p.child=b,b.return=p,p=b):(b=Es(u.child,T),b.ref=p.ref,p.child=b,b.return=p,p=b),p;case 22:return sf(u,p,b);case 24:return Sh(p),T=Ro(ba),u===null?(Y=Oc(),Y===null&&(Y=Gs,se=wh(),Y.pooledCache=se,se.refCount++,se!==null&&(Y.pooledCacheLanes|=b),Y=se),p.memoizedState={parent:T,cache:Y},Eh(p),Vs(p,ba,Y)):((u.lanes&b)!==0&&(lc(u,p),_l(p,null,null,b),tu()),Y=u.memoizedState,se=p.memoizedState,Y.parent!==T?(Y={parent:T,cache:T},p.memoizedState=Y,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=Y),Vs(p,ba,T)):(T=se.cache,Vs(p,ba,T),T!==Y.cache&&gr(p,[ba],b,!0))),us(u,p,p.pendingProps.children,b),p.child;case 29:throw p.pendingProps}throw Error(i(156,p.tag))}function X(u){u.flags|=4}function fe(u,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!ie(p)){if(p=nu.current,p!==null&&((Yo&4194048)===Yo?Qa!==null:(Yo&62914560)!==Yo&&(Yo&536870912)===0||p!==Qa))throw gu=Gu,Zr;u.flags|=8192}}function _e(u,p){p!==null&&(u.flags|=4),u.flags&16384&&(p=u.tag!==22?ht():536870912,u.lanes|=p,xp|=p)}function ke(u,p){if(!$r)switch(u.tailMode){case"hidden":p=u.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?u.tail=null:b.sibling=null;break;case"collapsed":b=u.tail;for(var T=null;b!==null;)b.alternate!==null&&(T=b),b=b.sibling;T===null?p||u.tail===null?u.tail=null:u.tail.sibling=null:T.sibling=null}}function Fe(u){var p=u.alternate!==null&&u.alternate.child===u.child,b=0,T=0;if(p)for(var Y=u.child;Y!==null;)b|=Y.lanes|Y.childLanes,T|=Y.subtreeFlags&65011712,T|=Y.flags&65011712,Y.return=u,Y=Y.sibling;else for(Y=u.child;Y!==null;)b|=Y.lanes|Y.childLanes,T|=Y.subtreeFlags,T|=Y.flags,Y.return=u,Y=Y.sibling;return u.subtreeFlags|=T,u.childLanes=b,p}function _t(u,p,b){var T=p.pendingProps;switch(Zc(p),p.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(p),null;case 1:return Fe(p),null;case 3:return b=p.stateNode,T=null,u!==null&&(T=u.memoizedState.cache),p.memoizedState.cache!==T&&(p.flags|=2048),Ga(ba),Pe(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(u===null||u.child===null)&&(il(p)?X(p):u===null||u.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,Xd())),Fe(p),null;case 26:return b=p.memoizedState,u===null?(X(p),b!==null?(Fe(p),fe(p,b)):(Fe(p),p.flags&=-16777217)):b?b!==u.memoizedState?(X(p),Fe(p),fe(p,b)):(Fe(p),p.flags&=-16777217):(u.memoizedProps!==T&&X(p),Fe(p),p.flags&=-16777217),null;case 27:He(p),b=St.current;var Y=p.type;if(u!==null&&p.stateNode!=null)u.memoizedProps!==T&&X(p);else{if(!T){if(p.stateNode===null)throw Error(i(166));return Fe(p),null}u=It.current,il(p)?Zd(p):(u=PA(Y,T,b),p.stateNode=u,X(p))}return Fe(p),null;case 5:if(He(p),b=p.type,u!==null&&p.stateNode!=null)u.memoizedProps!==T&&X(p);else{if(!T){if(p.stateNode===null)throw Error(i(166));return Fe(p),null}if(u=It.current,il(p))Zd(p);else{switch(Y=om(St.current),u){case 1:u=Y.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:u=Y.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":u=Y.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":u=Y.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":u=Y.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof T.is=="string"?Y.createElement("select",{is:T.is}):Y.createElement("select"),T.multiple?u.multiple=!0:T.size&&(u.size=T.size);break;default:u=typeof T.is=="string"?Y.createElement(b,{is:T.is}):Y.createElement(b)}}u[hi]=p,u[ti]=T;e:for(Y=p.child;Y!==null;){if(Y.tag===5||Y.tag===6)u.appendChild(Y.stateNode);else if(Y.tag!==4&&Y.tag!==27&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===p)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===p)break e;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}p.stateNode=u;e:switch(Js(u,b,T),b){case"button":case"input":case"select":case"textarea":u=!!T.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&X(p)}}return Fe(p),p.flags&=-16777217,null;case 6:if(u&&p.stateNode!=null)u.memoizedProps!==T&&X(p);else{if(typeof T!="string"&&p.stateNode===null)throw Error(i(166));if(u=St.current,il(p)){if(u=p.stateNode,b=p.memoizedProps,T=null,Y=va,Y!==null)switch(Y.tag){case 27:case 5:T=Y.memoizedProps}u[hi]=p,u=!!(u.nodeValue===b||T!==null&&T.suppressHydrationWarning===!0||rg(u.nodeValue,b)),u||pu(p)}else u=om(u).createTextNode(T),u[hi]=p,p.stateNode=u}return Fe(p),null;case 13:if(T=p.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(Y=il(p),T!==null&&T.dehydrated!==null){if(u===null){if(!Y)throw Error(i(318));if(Y=p.memoizedState,Y=Y!==null?Y.dehydrated:null,!Y)throw Error(i(317));Y[hi]=p}else Fs(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;Fe(p),Y=!1}else Y=Xd(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=Y),Y=!0;if(!Y)return p.flags&256?(Mu(p),p):(Mu(p),null)}if(Mu(p),(p.flags&128)!==0)return p.lanes=b,p;if(b=T!==null,u=u!==null&&u.memoizedState!==null,b){T=p.child,Y=null,T.alternate!==null&&T.alternate.memoizedState!==null&&T.alternate.memoizedState.cachePool!==null&&(Y=T.alternate.memoizedState.cachePool.pool);var se=null;T.memoizedState!==null&&T.memoizedState.cachePool!==null&&(se=T.memoizedState.cachePool.pool),se!==Y&&(T.flags|=2048)}return b!==u&&b&&(p.child.flags|=8192),_e(p,p.updateQueue),Fe(p),null;case 4:return Pe(),u===null&&t1(p.stateNode.containerInfo),Fe(p),null;case 10:return Ga(p.type),Fe(p),null;case 19:if(tt(wa),Y=p.memoizedState,Y===null)return Fe(p),null;if(T=(p.flags&128)!==0,se=Y.rendering,se===null)if(T)ke(Y,!1);else{if(Sl!==0||u!==null&&(u.flags&128)!==0)for(u=p.child;u!==null;){if(se=iu(u),se!==null){for(p.flags|=128,ke(Y,!1),u=se.updateQueue,p.updateQueue=u,_e(p,u),p.subtreeFlags=0,u=b,b=p.child;b!==null;)bh(b,u),b=b.sibling;return lt(wa,wa.current&1|2),p.child}u=u.sibling}Y.tail!==null&&on()>Mp&&(p.flags|=128,T=!0,ke(Y,!1),p.lanes=4194304)}else{if(!T)if(u=iu(se),u!==null){if(p.flags|=128,T=!0,u=u.updateQueue,p.updateQueue=u,_e(p,u),ke(Y,!0),Y.tail===null&&Y.tailMode==="hidden"&&!se.alternate&&!$r)return Fe(p),null}else 2*on()-Y.renderingStartTime>Mp&&b!==536870912&&(p.flags|=128,T=!0,ke(Y,!1),p.lanes=4194304);Y.isBackwards?(se.sibling=p.child,p.child=se):(u=Y.last,u!==null?u.sibling=se:p.child=se,Y.last=se)}return Y.tail!==null?(p=Y.tail,Y.rendering=p,Y.tail=p.sibling,Y.renderingStartTime=on(),p.sibling=null,u=wa.current,lt(wa,T?u&1|2:u&1),p):(Fe(p),null);case 22:case 23:return Mu(p),Lf(),T=p.memoizedState!==null,u!==null?u.memoizedState!==null!==T&&(p.flags|=8192):T&&(p.flags|=8192),T?(b&536870912)!==0&&(p.flags&128)===0&&(Fe(p),p.subtreeFlags&6&&(p.flags|=8192)):Fe(p),b=p.updateQueue,b!==null&&_e(p,b.retryQueue),b=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(b=u.memoizedState.cachePool.pool),T=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(T=p.memoizedState.cachePool.pool),T!==b&&(p.flags|=2048),u!==null&&tt(Cl),null;case 24:return b=null,u!==null&&(b=u.memoizedState.cache),p.memoizedState.cache!==b&&(p.flags|=2048),Ga(ba),Fe(p),null;case 25:return null;case 30:return null}throw Error(i(156,p.tag))}function Tt(u,p){switch(Zc(p),p.tag){case 1:return u=p.flags,u&65536?(p.flags=u&-65537|128,p):null;case 3:return Ga(ba),Pe(),u=p.flags,(u&65536)!==0&&(u&128)===0?(p.flags=u&-65537|128,p):null;case 26:case 27:case 5:return He(p),null;case 13:if(Mu(p),u=p.memoizedState,u!==null&&u.dehydrated!==null){if(p.alternate===null)throw Error(i(340));Fs()}return u=p.flags,u&65536?(p.flags=u&-65537|128,p):null;case 19:return tt(wa),null;case 4:return Pe(),null;case 10:return Ga(p.type),null;case 22:case 23:return Mu(p),Lf(),u!==null&&tt(Cl),u=p.flags,u&65536?(p.flags=u&-65537|128,p):null;case 24:return Ga(ba),null;case 25:return null;default:return null}}function Jt(u,p){switch(Zc(p),p.tag){case 3:Ga(ba),Pe();break;case 26:case 27:case 5:He(p);break;case 4:Pe();break;case 13:Mu(p);break;case 19:tt(wa);break;case 10:Ga(p.type);break;case 22:case 23:Mu(p),Lf(),u!==null&&tt(Cl);break;case 24:Ga(ba)}}function Ht(u,p){try{var b=p.updateQueue,T=b!==null?b.lastEffect:null;if(T!==null){var Y=T.next;b=Y;do{if((b.tag&u)===u){T=void 0;var se=b.create,je=b.inst;T=se(),je.destroy=T}b=b.next}while(b!==Y)}}catch(at){Cs(p,p.return,at)}}function _n(u,p,b){try{var T=p.updateQueue,Y=T!==null?T.lastEffect:null;if(Y!==null){var se=Y.next;T=se;do{if((T.tag&u)===u){var je=T.inst,at=je.destroy;if(at!==void 0){je.destroy=void 0,Y=p;var Ft=b,hn=at;try{hn()}catch(kn){Cs(Y,Ft,kn)}}}T=T.next}while(T!==se)}}catch(kn){Cs(p,p.return,kn)}}function Rn(u){var p=u.updateQueue;if(p!==null){var b=u.stateNode;try{rf(p,b)}catch(T){Cs(u,u.return,T)}}}function oi(u,p,b){b.props=dc(u.type,u.memoizedProps),b.state=u.memoizedState;try{b.componentWillUnmount()}catch(T){Cs(u,p,T)}}function pi(u,p){try{var b=u.ref;if(b!==null){switch(u.tag){case 26:case 27:case 5:var T=u.stateNode;break;case 30:T=u.stateNode;break;default:T=u.stateNode}typeof b=="function"?u.refCleanup=b(T):b.current=T}}catch(Y){Cs(u,p,Y)}}function Ci(u,p){var b=u.ref,T=u.refCleanup;if(b!==null)if(typeof T=="function")try{T()}catch(Y){Cs(u,p,Y)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(Y){Cs(u,p,Y)}else b.current=null}function gi(u){var p=u.type,b=u.memoizedProps,T=u.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":b.autoFocus&&T.focus();break e;case"img":b.src?T.src=b.src:b.srcSet&&(T.srcset=b.srcSet)}}catch(Y){Cs(u,u.return,Y)}}function ki(u,p,b){try{var T=u.stateNode;vy(T,u.type,b,p),T[ti]=p}catch(Y){Cs(u,u.return,Y)}}function ar(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&Ah(u.type)||u.tag===4}function Yi(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||ar(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&Ah(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function Xr(u,p,b){var T=u.tag;if(T===5||T===6)u=u.stateNode,p?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(u,p):(p=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,p.appendChild(u),b=b._reactRootContainer,b!=null||p.onclick!==null||(p.onclick=Zu));else if(T!==4&&(T===27&&Ah(u.type)&&(b=u.stateNode,p=null),u=u.child,u!==null))for(Xr(u,p,b),u=u.sibling;u!==null;)Xr(u,p,b),u=u.sibling}function xr(u,p,b){var T=u.tag;if(T===5||T===6)u=u.stateNode,p?b.insertBefore(u,p):b.appendChild(u);else if(T!==4&&(T===27&&Ah(u.type)&&(b=u.stateNode),u=u.child,u!==null))for(xr(u,p,b),u=u.sibling;u!==null;)xr(u,p,b),u=u.sibling}function ns(u){var p=u.stateNode,b=u.memoizedProps;try{for(var T=u.type,Y=p.attributes;Y.length;)p.removeAttributeNode(Y[0]);Js(p,T,b),p[hi]=u,p[ti]=b}catch(se){Cs(u,u.return,se)}}var ua=!1,Yr=!1,ys=!1,vs=typeof WeakSet=="function"?WeakSet:Set,ca=null;function Vl(u,p){if(u=u.containerInfo,kh=di,u=Ch(u),Sd(u)){if("selectionStart"in u)var b={start:u.selectionStart,end:u.selectionEnd};else e:{b=(b=u.ownerDocument)&&b.defaultView||window;var T=b.getSelection&&b.getSelection();if(T&&T.rangeCount!==0){b=T.anchorNode;var Y=T.anchorOffset,se=T.focusNode;T=T.focusOffset;try{b.nodeType,se.nodeType}catch{b=null;break e}var je=0,at=-1,Ft=-1,hn=0,kn=0,Gn=u,mn=null;t:for(;;){for(var fn;Gn!==b||Y!==0&&Gn.nodeType!==3||(at=je+Y),Gn!==se||T!==0&&Gn.nodeType!==3||(Ft=je+T),Gn.nodeType===3&&(je+=Gn.nodeValue.length),(fn=Gn.firstChild)!==null;)mn=Gn,Gn=fn;for(;;){if(Gn===u)break t;if(mn===b&&++hn===Y&&(at=je),mn===se&&++kn===T&&(Ft=je),(fn=Gn.nextSibling)!==null)break;Gn=mn,mn=Gn.parentNode}Gn=fn}b=at===-1||Ft===-1?null:{start:at,end:Ft}}else b=null}b=b||{start:0,end:0}}else b=null;for(y0={focusedElem:u,selectionRange:b},di=!1,ca=p;ca!==null;)if(p=ca,u=p.child,(p.subtreeFlags&1024)!==0&&u!==null)u.return=p,ca=u;else for(;ca!==null;){switch(p=ca,se=p.alternate,u=p.flags,p.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&se!==null){u=void 0,b=p,Y=se.memoizedProps,se=se.memoizedState,T=b.stateNode;try{var Pr=dc(b.type,Y,b.elementType===b.type);u=T.getSnapshotBeforeUpdate(Pr,se),T.__reactInternalSnapshotBeforeUpdate=u}catch(Kr){Cs(b,b.return,Kr)}}break;case 3:if((u&1024)!==0){if(u=p.stateNode.containerInfo,b=u.nodeType,b===9)r1(u);else if(b===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":r1(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(i(163))}if(u=p.sibling,u!==null){u.return=p.return,ca=u;break}ca=p.return}}function Is(u,p,b){var T=b.flags;switch(b.tag){case 0:case 11:case 15:Vu(u,b),T&4&&Ht(5,b);break;case 1:if(Vu(u,b),T&4)if(u=b.stateNode,p===null)try{u.componentDidMount()}catch(je){Cs(b,b.return,je)}else{var Y=dc(b.type,p.memoizedProps);p=p.memoizedState;try{u.componentDidUpdate(Y,p,u.__reactInternalSnapshotBeforeUpdate)}catch(je){Cs(b,b.return,je)}}T&64&&Rn(b),T&512&&pi(b,b.return);break;case 3:if(Vu(u,b),T&64&&(u=b.updateQueue,u!==null)){if(p=null,b.child!==null)switch(b.child.tag){case 27:case 5:p=b.child.stateNode;break;case 1:p=b.child.stateNode}try{rf(u,p)}catch(je){Cs(b,b.return,je)}}break;case 27:p===null&&T&4&&ns(b);case 26:case 5:Vu(u,b),p===null&&T&4&&gi(b),T&512&&pi(b,b.return);break;case 12:Vu(u,b);break;case 13:Vu(u,b),T&4&&mA(u,b),T&64&&(u=b.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(b=J0.bind(null,b),Dp(u,b))));break;case 22:if(T=b.memoizedState!==null||ua,!T){p=p!==null&&p.memoizedState!==null||Yr,Y=ua;var se=Yr;ua=T,(Yr=p)&&!se?uf(u,b,(b.subtreeFlags&8772)!==0):Vu(u,b),ua=Y,Yr=se}break;case 30:break;default:Vu(u,b)}}function Ns(u){var p=u.alternate;p!==null&&(u.alternate=null,Ns(p)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(p=u.stateNode,p!==null&&Zn(p)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var Br=null,Ea=!1;function $l(u,p,b){for(b=b.child;b!==null;)fc(u,p,b),b=b.sibling}function fc(u,p,b){if(Ge&&typeof Ge.onCommitFiberUnmount=="function")try{Ge.onCommitFiberUnmount(Kn,b)}catch{}switch(b.tag){case 26:Yr||Ci(b,p),$l(u,p,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:Yr||Ci(b,p);var T=Br,Y=Ea;Ah(b.type)&&(Br=b.stateNode,Ea=!1),$l(u,p,b),Fm(b.stateNode),Br=T,Ea=Y;break;case 5:Yr||Ci(b,p);case 6:if(T=Br,Y=Ea,Br=null,$l(u,p,b),Br=T,Ea=Y,Br!==null)if(Ea)try{(Br.nodeType===9?Br.body:Br.nodeName==="HTML"?Br.ownerDocument.body:Br).removeChild(b.stateNode)}catch(se){Cs(b,p,se)}else try{Br.removeChild(b.stateNode)}catch(se){Cs(b,p,se)}break;case 18:Br!==null&&(Ea?(u=Br,Km(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,b.stateNode),cl(u)):Km(Br,b.stateNode));break;case 4:T=Br,Y=Ea,Br=b.stateNode.containerInfo,Ea=!0,$l(u,p,b),Br=T,Ea=Y;break;case 0:case 11:case 14:case 15:Yr||_n(2,b,p),Yr||_n(4,b,p),$l(u,p,b);break;case 1:Yr||(Ci(b,p),T=b.stateNode,typeof T.componentWillUnmount=="function"&&oi(b,p,T)),$l(u,p,b);break;case 21:$l(u,p,b);break;case 22:Yr=(T=Yr)||b.memoizedState!==null,$l(u,p,b),Yr=T;break;default:$l(u,p,b)}}function mA(u,p){if(p.memoizedState===null&&(u=p.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{cl(u)}catch(b){Cs(p,p.return,b)}}function rh(u){switch(u.tag){case 13:case 19:var p=u.stateNode;return p===null&&(p=u.stateNode=new vs),p;case 22:return u=u.stateNode,p=u._retryCache,p===null&&(p=u._retryCache=new vs),p;default:throw Error(i(435,u.tag))}}function cs(u,p){var b=rh(u);p.forEach(function(T){var Y=rC.bind(null,u,T);b.has(T)||(b.add(T),T.then(Y,Y))})}function Su(u,p){var b=p.deletions;if(b!==null)for(var T=0;T<b.length;T++){var Y=b[T],se=u,je=p,at=je;e:for(;at!==null;){switch(at.tag){case 27:if(Ah(at.type)){Br=at.stateNode,Ea=!1;break e}break;case 5:Br=at.stateNode,Ea=!1;break e;case 3:case 4:Br=at.stateNode.containerInfo,Ea=!0;break e}at=at.return}if(Br===null)throw Error(i(160));fc(se,je,Y),Br=null,Ea=!1,se=Y.alternate,se!==null&&(se.return=null),Y.return=null}if(p.subtreeFlags&13878)for(p=p.child;p!==null;)mc(p,u),p=p.sibling}var Ml=null;function mc(u,p){var b=u.alternate,T=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Su(p,u),al(u),T&4&&(_n(3,u,u.return),Ht(3,u),_n(5,u,u.return));break;case 1:Su(p,u),al(u),T&512&&(Yr||b===null||Ci(b,b.return)),T&64&&ua&&(u=u.updateQueue,u!==null&&(T=u.callbacks,T!==null&&(b=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=b===null?T:b.concat(T))));break;case 26:var Y=Ml;if(Su(p,u),al(u),T&512&&(Yr||b===null||Ci(b,b.return)),T&4){var se=b!==null?b.memoizedState:null;if(T=u.memoizedState,b===null)if(T===null)if(u.stateNode===null){e:{T=u.type,b=u.memoizedProps,Y=Y.ownerDocument||Y;t:switch(T){case"title":se=Y.getElementsByTagName("title")[0],(!se||se[To]||se[hi]||se.namespaceURI==="http://www.w3.org/2000/svg"||se.hasAttribute("itemprop"))&&(se=Y.createElement(T),Y.head.insertBefore(se,Y.querySelector("head > title"))),Js(se,T,b),se[hi]=u,Ir(se),T=se;break e;case"link":var je=P("link","href",Y).get(T+(b.href||""));if(je){for(var at=0;at<je.length;at++)if(se=je[at],se.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&se.getAttribute("rel")===(b.rel==null?null:b.rel)&&se.getAttribute("title")===(b.title==null?null:b.title)&&se.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){je.splice(at,1);break t}}se=Y.createElement(T),Js(se,T,b),Y.head.appendChild(se);break;case"meta":if(je=P("meta","content",Y).get(T+(b.content||""))){for(at=0;at<je.length;at++)if(se=je[at],se.getAttribute("content")===(b.content==null?null:""+b.content)&&se.getAttribute("name")===(b.name==null?null:b.name)&&se.getAttribute("property")===(b.property==null?null:b.property)&&se.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&se.getAttribute("charset")===(b.charSet==null?null:b.charSet)){je.splice(at,1);break t}}se=Y.createElement(T),Js(se,T,b),Y.head.appendChild(se);break;default:throw Error(i(468,T))}se[hi]=u,Ir(se),T=se}u.stateNode=T}else G(Y,u.type,u.stateNode);else u.stateNode=A(Y,T,u.memoizedProps);else se!==T?(se===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):se.count--,T===null?G(Y,u.type,u.stateNode):A(Y,T,u.memoizedProps)):T===null&&u.stateNode!==null&&ki(u,u.memoizedProps,b.memoizedProps)}break;case 27:Su(p,u),al(u),T&512&&(Yr||b===null||Ci(b,b.return)),b!==null&&T&4&&ki(u,u.memoizedProps,b.memoizedProps);break;case 5:if(Su(p,u),al(u),T&512&&(Yr||b===null||Ci(b,b.return)),u.flags&32){Y=u.stateNode;try{$o(Y,"")}catch(fn){Cs(u,u.return,fn)}}T&4&&u.stateNode!=null&&(Y=u.memoizedProps,ki(u,Y,b!==null?b.memoizedProps:Y)),T&1024&&(ys=!0);break;case 6:if(Su(p,u),al(u),T&4){if(u.stateNode===null)throw Error(i(162));T=u.memoizedProps,b=u.stateNode;try{b.nodeValue=T}catch(fn){Cs(u,u.return,fn)}}break;case 3:if(R=null,Y=Ml,Ml=io(p.containerInfo),Su(p,u),Ml=Y,al(u),T&4&&b!==null&&b.memoizedState.isDehydrated)try{cl(p.containerInfo)}catch(fn){Cs(u,u.return,fn)}ys&&(ys=!1,pA(u));break;case 4:T=Ml,Ml=io(u.stateNode.containerInfo),Su(p,u),al(u),Ml=T;break;case 12:Su(p,u),al(u);break;case 13:Su(p,u),al(u),u.child.flags&8192&&u.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(Q1=on()),T&4&&(T=u.updateQueue,T!==null&&(u.updateQueue=null,cs(u,T)));break;case 22:Y=u.memoizedState!==null;var Ft=b!==null&&b.memoizedState!==null,hn=ua,kn=Yr;if(ua=hn||Y,Yr=kn||Ft,Su(p,u),Yr=kn,ua=hn,al(u),T&8192)e:for(p=u.stateNode,p._visibility=Y?p._visibility&-2:p._visibility|1,Y&&(b===null||Ft||ua||Yr||od(u)),b=null,p=u;;){if(p.tag===5||p.tag===26){if(b===null){Ft=b=p;try{if(se=Ft.stateNode,Y)je=se.style,typeof je.setProperty=="function"?je.setProperty("display","none","important"):je.display="none";else{at=Ft.stateNode;var Gn=Ft.memoizedProps.style,mn=Gn!=null&&Gn.hasOwnProperty("display")?Gn.display:null;at.style.display=mn==null||typeof mn=="boolean"?"":(""+mn).trim()}}catch(fn){Cs(Ft,Ft.return,fn)}}}else if(p.tag===6){if(b===null){Ft=p;try{Ft.stateNode.nodeValue=Y?"":Ft.memoizedProps}catch(fn){Cs(Ft,Ft.return,fn)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===u)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===u)break e;for(;p.sibling===null;){if(p.return===null||p.return===u)break e;b===p&&(b=null),p=p.return}b===p&&(b=null),p.sibling.return=p.return,p=p.sibling}T&4&&(T=u.updateQueue,T!==null&&(b=T.retryQueue,b!==null&&(T.retryQueue=null,cs(u,b))));break;case 19:Su(p,u),al(u),T&4&&(T=u.updateQueue,T!==null&&(u.updateQueue=null,cs(u,T)));break;case 30:break;case 21:break;default:Su(p,u),al(u)}}function al(u){var p=u.flags;if(p&2){try{for(var b,T=u.return;T!==null;){if(ar(T)){b=T;break}T=T.return}if(b==null)throw Error(i(160));switch(b.tag){case 27:var Y=b.stateNode,se=Yi(u);xr(u,se,Y);break;case 5:var je=b.stateNode;b.flags&32&&($o(je,""),b.flags&=-33);var at=Yi(u);xr(u,at,je);break;case 3:case 4:var Ft=b.stateNode.containerInfo,hn=Yi(u);Xr(u,hn,Ft);break;default:throw Error(i(161))}}catch(kn){Cs(u,u.return,kn)}u.flags&=-3}p&4096&&(u.flags&=-4097)}function pA(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var p=u;pA(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),u=u.sibling}}function Vu(u,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)Is(u,p.alternate,p),p=p.sibling}function od(u){for(u=u.child;u!==null;){var p=u;switch(p.tag){case 0:case 11:case 14:case 15:_n(4,p,p.return),od(p);break;case 1:Ci(p,p.return);var b=p.stateNode;typeof b.componentWillUnmount=="function"&&oi(p,p.return,b),od(p);break;case 27:Fm(p.stateNode);case 26:case 5:Ci(p,p.return),od(p);break;case 22:p.memoizedState===null&&od(p);break;case 30:od(p);break;default:od(p)}u=u.sibling}}function uf(u,p,b){for(b=b&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var T=p.alternate,Y=u,se=p,je=se.flags;switch(se.tag){case 0:case 11:case 15:uf(Y,se,b),Ht(4,se);break;case 1:if(uf(Y,se,b),T=se,Y=T.stateNode,typeof Y.componentDidMount=="function")try{Y.componentDidMount()}catch(hn){Cs(T,T.return,hn)}if(T=se,Y=T.updateQueue,Y!==null){var at=T.stateNode;try{var Ft=Y.shared.hiddenCallbacks;if(Ft!==null)for(Y.shared.hiddenCallbacks=null,Y=0;Y<Ft.length;Y++)Em(Ft[Y],at)}catch(hn){Cs(T,T.return,hn)}}b&&je&64&&Rn(se),pi(se,se.return);break;case 27:ns(se);case 26:case 5:uf(Y,se,b),b&&T===null&&je&4&&gi(se),pi(se,se.return);break;case 12:uf(Y,se,b);break;case 13:uf(Y,se,b),b&&je&4&&mA(Y,se);break;case 22:se.memoizedState===null&&uf(Y,se,b),pi(se,se.return);break;case 30:break;default:uf(Y,se,b)}p=p.sibling}}function N1(u,p){var b=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(b=u.memoizedState.cachePool.pool),u=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(u=p.memoizedState.cachePool.pool),u!==b&&(u!=null&&u.refCount++,b!=null&&th(b))}function G1(u,p){u=null,p.alternate!==null&&(u=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==u&&(p.refCount++,u!=null&&th(u))}function Rd(u,p,b,T){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)Im(u,p,b,T),p=p.sibling}function Im(u,p,b,T){var Y=p.flags;switch(p.tag){case 0:case 11:case 15:Rd(u,p,b,T),Y&2048&&Ht(9,p);break;case 1:Rd(u,p,b,T);break;case 3:Rd(u,p,b,T),Y&2048&&(u=null,p.alternate!==null&&(u=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==u&&(p.refCount++,u!=null&&th(u)));break;case 12:if(Y&2048){Rd(u,p,b,T),u=p.stateNode;try{var se=p.memoizedProps,je=se.id,at=se.onPostCommit;typeof at=="function"&&at(je,p.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(Ft){Cs(p,p.return,Ft)}}else Rd(u,p,b,T);break;case 13:Rd(u,p,b,T);break;case 23:break;case 22:se=p.stateNode,je=p.alternate,p.memoizedState!==null?se._visibility&2?Rd(u,p,b,T):l0(u,p):se._visibility&2?Rd(u,p,b,T):(se._visibility|=2,yp(u,p,b,T,(p.subtreeFlags&10256)!==0)),Y&2048&&N1(je,p);break;case 24:Rd(u,p,b,T),Y&2048&&G1(p.alternate,p);break;default:Rd(u,p,b,T)}}function yp(u,p,b,T,Y){for(Y=Y&&(p.subtreeFlags&10256)!==0,p=p.child;p!==null;){var se=u,je=p,at=b,Ft=T,hn=je.flags;switch(je.tag){case 0:case 11:case 15:yp(se,je,at,Ft,Y),Ht(8,je);break;case 23:break;case 22:var kn=je.stateNode;je.memoizedState!==null?kn._visibility&2?yp(se,je,at,Ft,Y):l0(se,je):(kn._visibility|=2,yp(se,je,at,Ft,Y)),Y&&hn&2048&&N1(je.alternate,je);break;case 24:yp(se,je,at,Ft,Y),Y&&hn&2048&&G1(je.alternate,je);break;default:yp(se,je,at,Ft,Y)}p=p.sibling}}function l0(u,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var b=u,T=p,Y=T.flags;switch(T.tag){case 22:l0(b,T),Y&2048&&N1(T.alternate,T);break;case 24:l0(b,T),Y&2048&&G1(T.alternate,T);break;default:l0(b,T)}p=p.sibling}}var wu=8192;function vp(u){if(u.subtreeFlags&wu)for(u=u.child;u!==null;)j1(u),u=u.sibling}function j1(u){switch(u.tag){case 26:vp(u),u.flags&wu&&u.memoizedState!==null&&Ke(Ml,u.memoizedState,u.memoizedProps);break;case 5:vp(u);break;case 3:case 4:var p=Ml;Ml=io(u.stateNode.containerInfo),vp(u),Ml=p;break;case 22:u.memoizedState===null&&(p=u.alternate,p!==null&&p.memoizedState!==null?(p=wu,wu=16777216,vp(u),wu=p):vp(u));break;default:vp(u)}}function iy(u){var p=u.alternate;if(p!==null&&(u=p.child,u!==null)){p.child=null;do p=u.sibling,u.sibling=null,u=p;while(u!==null)}}function Hf(u){var p=u.deletions;if((u.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var T=p[b];ca=T,ry(T,u)}iy(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Cp(u),u=u.sibling}function Cp(u){switch(u.tag){case 0:case 11:case 15:Hf(u),u.flags&2048&&_n(9,u,u.return);break;case 3:Hf(u);break;case 12:Hf(u);break;case 22:var p=u.stateNode;u.memoizedState!==null&&p._visibility&2&&(u.return===null||u.return.tag!==13)?(p._visibility&=-3,_p(u)):Hf(u);break;default:Hf(u)}}function _p(u){var p=u.deletions;if((u.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var T=p[b];ca=T,ry(T,u)}iy(u)}for(u=u.child;u!==null;){switch(p=u,p.tag){case 0:case 11:case 15:_n(8,p,p.return),_p(p);break;case 22:b=p.stateNode,b._visibility&2&&(b._visibility&=-3,_p(p));break;default:_p(p)}u=u.sibling}}function ry(u,p){for(;ca!==null;){var b=ca;switch(b.tag){case 0:case 11:case 15:_n(8,b,p);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var T=b.memoizedState.cachePool.pool;T!=null&&T.refCount++}break;case 24:th(b.memoizedState.cache)}if(T=b.child,T!==null)T.return=b,ca=T;else e:for(b=u;ca!==null;){T=ca;var Y=T.sibling,se=T.return;if(Ns(T),T===b){ca=null;break e}if(Y!==null){Y.return=se,ca=Y;break e}ca=se}}}var tC={getCacheForType:function(u){var p=Ro(ba),b=p.data.get(u);return b===void 0&&(b=u(),p.data.set(u,b)),b}},Q0=typeof WeakMap=="function"?WeakMap:Map,is=0,Gs=null,ta=null,Yo=0,rs=0,oh=null,Vf=!1,bp=!1,W1=!1,cf=0,Sl=0,Pd=0,$f=0,Y0=0,ah=0,xp=0,Zf=null,Uc=null,q0=!1,Q1=0,Mp=1/0,A0=null,hf=null,Eu=0,Xf=null,Kd=null,Xs=0,u0=0,H0=null,Y1=null,Jf=0,em=null;function Bu(){if((is&2)!==0&&Yo!==0)return Yo&-Yo;if(ze.T!==null){var u=rl;return u!==0?u:kp()}return qi()}function oy(){ah===0&&(ah=(Yo&536870912)===0||$r?gt():536870912);var u=nu.current;return u!==null&&(u.flags|=32),ah}function sh(u,p,b){(u===Gs&&(rs===2||rs===9)||u.cancelPendingCommit!==null)&&(Sp(u,0),tm(u,Yo,ah,!1)),it(u,b),((is&2)===0||u!==Gs)&&(u===Gs&&((is&2)===0&&($f|=b),Sl===4&&tm(u,Yo,ah,!1)),lh(u))}function ay(u,p,b){if((is&6)!==0)throw Error(i(327));var T=!b&&(p&124)===0&&(p&u.expiredLanes)===0||Ze(u,p),Y=T?nm(u,p):c0(u,p,!0),se=T;do{if(Y===0){bp&&!T&&tm(u,p,0,!1);break}else{if(b=u.current.alternate,se&&!nC(b)){Y=c0(u,p,!1),se=!1;continue}if(Y===2){if(se=p,u.errorRecoveryDisabledLanes&se)var je=0;else je=u.pendingLanes&-536870913,je=je!==0?je:je&536870912?536870912:0;if(je!==0){p=je;e:{var at=u;Y=Zf;var Ft=at.current.memoizedState.isDehydrated;if(Ft&&(Sp(at,je).flags|=256),je=c0(at,je,!1),je!==2){if(W1&&!Ft){at.errorRecoveryDisabledLanes|=se,$f|=se,Y=4;break e}se=Uc,Uc=Y,se!==null&&(Uc===null?Uc=se:Uc.push.apply(Uc,se))}Y=je}if(se=!1,Y!==2)continue}}if(Y===1){Sp(u,0),tm(u,p,0,!0);break}e:{switch(T=u,se=Y,se){case 0:case 1:throw Error(i(345));case 4:if((p&4194048)!==p)break;case 6:tm(T,p,ah,!Vf);break e;case 2:Uc=null;break;case 3:case 5:break;default:throw Error(i(329))}if((p&62914560)===p&&(Y=Q1+300-on(),10<Y)){if(tm(T,p,ah,!Vf),De(T,0,!0)!==0)break e;T.timeoutHandle=og(sy.bind(null,T,b,Uc,A0,q0,p,ah,$f,xp,Vf,se,2,-0,0),Y);break e}sy(T,b,Uc,A0,q0,p,ah,$f,xp,Vf,se,0,-0,0)}}break}while(!0);lh(u)}function sy(u,p,b,T,Y,se,je,at,Ft,hn,kn,Gn,mn,fn){if(u.timeoutHandle=-1,Gn=p.subtreeFlags,(Gn&8192||(Gn&16785408)===16785408)&&(Ae={stylesheets:null,count:0,unsuspend:ve},j1(p),Gn=Qe(),Gn!==null)){u.cancelPendingCommit=Gn(Ep.bind(null,u,p,se,b,T,Y,je,at,Ft,kn,1,mn,fn)),tm(u,se,je,!hn);return}Ep(u,p,se,b,T,Y,je,at,Ft)}function nC(u){for(var p=u;;){var b=p.tag;if((b===0||b===11||b===15)&&p.flags&16384&&(b=p.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var T=0;T<b.length;T++){var Y=b[T],se=Y.getSnapshot;Y=Y.value;try{if(!xA(se(),Y))return!1}catch{return!1}}if(b=p.child,p.subtreeFlags&16384&&b!==null)b.return=p,p=b;else{if(p===u)break;for(;p.sibling===null;){if(p.return===null||p.return===u)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function tm(u,p,b,T){p&=~Y0,p&=~$f,u.suspendedLanes|=p,u.pingedLanes&=~p,T&&(u.warmLanes|=p),T=u.expirationTimes;for(var Y=p;0<Y;){var se=31-re(Y),je=1<<se;T[se]=-1,Y&=~je}b!==0&&Dn(u,b,p)}function V0(){return(is&6)===0?(Tm(0),!1):!0}function q1(){if(ta!==null){if(rs===0)var u=ta.return;else u=ta,rt=eu=null,kc(u),bo=null,Xo=0,u=ta;for(;u!==null;)Jt(u.alternate,u),u=u.return;ta=null}}function Sp(u,p){var b=u.timeoutHandle;b!==-1&&(u.timeoutHandle=-1,_y(b)),b=u.cancelPendingCommit,b!==null&&(u.cancelPendingCommit=null,b()),q1(),Gs=u,ta=b=Es(u.current,null),Yo=p,rs=0,oh=null,Vf=!1,bp=Ze(u,p),W1=!1,xp=ah=Y0=$f=Pd=Sl=0,Uc=Zf=null,q0=!1,(p&8)!==0&&(p|=p&32);var T=u.entangledLanes;if(T!==0)for(u=u.entanglements,T&=p;0<T;){var Y=31-re(T),se=1<<Y;p|=u[Y],T&=~se}return cf=p,Nl(),b}function ly(u,p){no=null,ze.H=bl,p===Ca||p===ci?(p=nf(),rs=3):p===Zr?(p=nf(),rs=4):rs=p===kd?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,oh=p,ta===null&&(Sl=1,af(u,Na(p,u.current)))}function Ay(){var u=ze.H;return ze.H=bl,u===null?bl:u}function uy(){var u=ze.A;return ze.A=tC,u}function $0(){Sl=4,Vf||(Yo&4194048)!==Yo&&nu.current!==null||(bp=!0),(Pd&134217727)===0&&($f&134217727)===0||Gs===null||tm(Gs,Yo,ah,!1)}function c0(u,p,b){var T=is;is|=2;var Y=Ay(),se=uy();(Gs!==u||Yo!==p)&&(A0=null,Sp(u,p)),p=!1;var je=Sl;e:do try{if(rs!==0&&ta!==null){var at=ta,Ft=oh;switch(rs){case 8:q1(),je=6;break e;case 3:case 2:case 9:case 6:nu.current===null&&(p=!0);var hn=rs;if(rs=0,oh=null,df(u,at,Ft,hn),b&&bp){je=0;break e}break;default:hn=rs,rs=0,oh=null,df(u,at,Ft,hn)}}cy(),je=Sl;break}catch(kn){ly(u,kn)}while(!0);return p&&u.shellSuspendCounter++,rt=eu=null,is=T,ze.H=Y,ze.A=se,ta===null&&(Gs=null,Yo=0,Nl()),je}function cy(){for(;ta!==null;)im(ta)}function nm(u,p){var b=is;is|=2;var T=Ay(),Y=uy();Gs!==u||Yo!==p?(A0=null,Mp=on()+500,Sp(u,p)):bp=Ze(u,p);e:do try{if(rs!==0&&ta!==null){p=ta;var se=oh;t:switch(rs){case 1:rs=0,oh=null,df(u,p,se,1);break;case 2:case 9:if(ju(se)){rs=0,oh=null,h0(p);break}p=function(){rs!==2&&rs!==9||Gs!==u||(rs=7),lh(u)},se.then(p,p);break e;case 3:rs=7;break e;case 4:rs=5;break e;case 7:ju(se)?(rs=0,oh=null,h0(p)):(rs=0,oh=null,df(u,p,se,7));break;case 5:var je=null;switch(ta.tag){case 26:je=ta.memoizedState;case 5:case 27:var at=ta;if(!je||ie(je)){rs=0,oh=null;var Ft=at.sibling;if(Ft!==null)ta=Ft;else{var hn=at.return;hn!==null?(ta=hn,Z0(hn)):ta=null}break t}}rs=0,oh=null,df(u,p,se,5);break;case 6:rs=0,oh=null,df(u,p,se,6);break;case 8:q1(),Sl=6;break e;default:throw Error(i(462))}}wp();break}catch(kn){ly(u,kn)}while(!0);return rt=eu=null,ze.H=T,ze.A=Y,is=b,ta!==null?0:(Gs=null,Yo=0,Nl(),Sl)}function wp(){for(;ta!==null&&!qt();)im(ta)}function im(u){var p=F(u.alternate,u,cf);u.memoizedProps=u.pendingProps,p===null?Z0(u):ta=p}function h0(u){var p=u,b=p.alternate;switch(p.tag){case 15:case 0:p=ea(b,p,p.pendingProps,p.type,void 0,Yo);break;case 11:p=ea(b,p,p.pendingProps,p.type.render,p.ref,Yo);break;case 5:kc(p);default:Jt(b,p),p=ta=bh(p,cf),p=F(b,p,cf)}u.memoizedProps=u.pendingProps,p===null?Z0(u):ta=p}function df(u,p,b,T){rt=eu=null,kc(p),bo=null,Xo=0;var Y=p.return;try{if(ru(u,Y,p,b,Yo)){Sl=1,af(u,Na(b,u.current)),ta=null;return}}catch(se){if(Y!==null)throw ta=Y,se;Sl=1,af(u,Na(b,u.current)),ta=null;return}p.flags&32768?($r||T===1?u=!0:bp||(Yo&536870912)!==0?u=!1:(Vf=u=!0,(T===2||T===9||T===3||T===6)&&(T=nu.current,T!==null&&T.tag===13&&(T.flags|=16384))),hy(p,u)):Z0(p)}function Z0(u){var p=u;do{if((p.flags&32768)!==0){hy(p,Vf);return}u=p.return;var b=_t(p.alternate,p,cf);if(b!==null){ta=b;return}if(p=p.sibling,p!==null){ta=p;return}ta=p=u}while(p!==null);Sl===0&&(Sl=5)}function hy(u,p){do{var b=Tt(u.alternate,u);if(b!==null){b.flags&=32767,ta=b;return}if(b=u.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!p&&(u=u.sibling,u!==null)){ta=u;return}ta=u=b}while(u!==null);Sl=6,ta=null}function Ep(u,p,b,T,Y,se,je,at,Ft){u.cancelPendingCommit=null;do Bp();while(Eu!==0);if((is&6)!==0)throw Error(i(327));if(p!==null){if(p===u.current)throw Error(i(177));if(se=p.lanes|p.childLanes,se|=XA,en(u,b,se,je,at,Ft),u===Gs&&(ta=Gs=null,Yo=0),Kd=p,Xf=u,Xs=b,u0=se,H0=Y,Y1=T,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,X1(On,function(){return X0(),null})):(u.callbackNode=null,u.callbackPriority=0),T=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||T){T=ze.T,ze.T=null,Y=ot.p,ot.p=2,je=is,is|=4;try{Vl(u,p,b)}finally{is=je,ot.p=Y,ze.T=T}}Eu=1,H1(),dy(),V1()}}function H1(){if(Eu===1){Eu=0;var u=Xf,p=Kd,b=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||b){b=ze.T,ze.T=null;var T=ot.p;ot.p=2;var Y=is;is|=4;try{mc(p,u);var se=y0,je=Ch(u.containerInfo),at=se.focusedElem,Ft=se.selectionRange;if(je!==at&&at&&at.ownerDocument&&Bo(at.ownerDocument.documentElement,at)){if(Ft!==null&&Sd(at)){var hn=Ft.start,kn=Ft.end;if(kn===void 0&&(kn=hn),"selectionStart"in at)at.selectionStart=hn,at.selectionEnd=Math.min(kn,at.value.length);else{var Gn=at.ownerDocument||document,mn=Gn&&Gn.defaultView||window;if(mn.getSelection){var fn=mn.getSelection(),Pr=at.textContent.length,Kr=Math.min(Ft.start,Pr),bs=Ft.end===void 0?Kr:Math.min(Ft.end,Pr);!fn.extend&&Kr>bs&&(je=bs,bs=Kr,Kr=je);var tn=Ku(at,Kr),$t=Ku(at,bs);if(tn&&$t&&(fn.rangeCount!==1||fn.anchorNode!==tn.node||fn.anchorOffset!==tn.offset||fn.focusNode!==$t.node||fn.focusOffset!==$t.offset)){var un=Gn.createRange();un.setStart(tn.node,tn.offset),fn.removeAllRanges(),Kr>bs?(fn.addRange(un),fn.extend($t.node,$t.offset)):(un.setEnd($t.node,$t.offset),fn.addRange(un))}}}}for(Gn=[],fn=at;fn=fn.parentNode;)fn.nodeType===1&&Gn.push({element:fn,left:fn.scrollLeft,top:fn.scrollTop});for(typeof at.focus=="function"&&at.focus(),at=0;at<Gn.length;at++){var Ln=Gn[at];Ln.element.scrollLeft=Ln.left,Ln.element.scrollTop=Ln.top}}di=!!kh,y0=kh=null}finally{is=Y,ot.p=T,ze.T=b}}u.current=p,Eu=2}}function dy(){if(Eu===2){Eu=0;var u=Xf,p=Kd,b=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||b){b=ze.T,ze.T=null;var T=ot.p;ot.p=2;var Y=is;is|=4;try{Is(u,p.alternate,p)}finally{is=Y,ot.p=T,ze.T=b}}Eu=3}}function V1(){if(Eu===4||Eu===3){Eu=0,Kt();var u=Xf,p=Kd,b=Xs,T=Y1;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?Eu=5:(Eu=0,Kd=Xf=null,$1(u,u.pendingLanes));var Y=u.pendingLanes;if(Y===0&&(hf=null),Wn(b),p=p.stateNode,Ge&&typeof Ge.onCommitFiberRoot=="function")try{Ge.onCommitFiberRoot(Kn,p,void 0,(p.current.flags&128)===128)}catch{}if(T!==null){p=ze.T,Y=ot.p,ot.p=2,ze.T=null;try{for(var se=u.onRecoverableError,je=0;je<T.length;je++){var at=T[je];se(at.value,{componentStack:at.stack})}}finally{ze.T=p,ot.p=Y}}(Xs&3)!==0&&Bp(),lh(u),Y=u.pendingLanes,(b&4194090)!==0&&(Y&42)!==0?u===em?Jf++:(Jf=0,em=u):Jf=0,Tm(0)}}function $1(u,p){(u.pooledCacheLanes&=p)===0&&(p=u.pooledCache,p!=null&&(u.pooledCache=null,th(p)))}function Bp(u){return H1(),dy(),V1(),X0()}function X0(){if(Eu!==5)return!1;var u=Xf,p=u0;u0=0;var b=Wn(Xs),T=ze.T,Y=ot.p;try{ot.p=32>b?32:b,ze.T=null,b=H0,H0=null;var se=Xf,je=Xs;if(Eu=0,Kd=Xf=null,Xs=0,(is&6)!==0)throw Error(i(331));var at=is;if(is|=4,Cp(se.current),Im(se,se.current,je,b),is=at,Tm(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot=="function")try{Ge.onPostCommitFiberRoot(Kn,se)}catch{}return!0}finally{ot.p=Y,ze.T=T,$1(u,p)}}function fy(u,p,b){p=Na(b,p),p=Bm(u.stateNode,p,2),u=Ac(u,p,2),u!==null&&(it(u,2),lh(u))}function Cs(u,p,b){if(u.tag===3)fy(u,u,b);else for(;p!==null;){if(p.tag===3){fy(p,u,b);break}else if(p.tag===1){var T=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(hf===null||!hf.has(T))){u=Na(b,u),b=Ih(2),T=Ac(p,b,2),T!==null&&(Wf(b,T,p,u),it(T,2),lh(T));break}}p=p.return}}function Z1(u,p,b){var T=u.pingCache;if(T===null){T=u.pingCache=new Q0;var Y=new Set;T.set(p,Y)}else Y=T.get(p),Y===void 0&&(Y=new Set,T.set(p,Y));Y.has(b)||(W1=!0,Y.add(b),u=iC.bind(null,u,p,b),p.then(u,u))}function iC(u,p,b){var T=u.pingCache;T!==null&&T.delete(p),u.pingedLanes|=u.suspendedLanes&b,u.warmLanes&=~b,Gs===u&&(Yo&b)===b&&(Sl===4||Sl===3&&(Yo&62914560)===Yo&&300>on()-Q1?(is&2)===0&&Sp(u,0):Y0|=b,xp===Yo&&(xp=0)),lh(u)}function my(u,p){p===0&&(p=ht()),u=BA(u,p),u!==null&&(it(u,p),lh(u))}function J0(u){var p=u.memoizedState,b=0;p!==null&&(b=p.retryLane),my(u,b)}function rC(u,p){var b=0;switch(u.tag){case 13:var T=u.stateNode,Y=u.memoizedState;Y!==null&&(b=Y.retryLane);break;case 19:T=u.stateNode;break;case 22:T=u.stateNode._retryCache;break;default:throw Error(i(314))}T!==null&&T.delete(p),my(u,b)}function X1(u,p){return vt(u,p)}var Op=null,$u=null,ad=!1,Ip=!1,Tp=!1,rm=0;function lh(u){u!==$u&&u.next===null&&($u===null?Op=$u=u:$u=$u.next=u),Ip=!0,ad||(ad=!0,e1())}function Tm(u,p){if(!Tp&&Ip){Tp=!0;do for(var b=!1,T=Op;T!==null;){if(u!==0){var Y=T.pendingLanes;if(Y===0)var se=0;else{var je=T.suspendedLanes,at=T.pingedLanes;se=(1<<31-re(42|u)+1)-1,se&=Y&~(je&~at),se=se&201326741?se&201326741|1:se?se|2:0}se!==0&&(b=!0,J1(T,se))}else se=Yo,se=De(T,T===Gs?se:0,T.cancelPendingCommit!==null||T.timeoutHandle!==-1),(se&3)===0||Ze(T,se)||(b=!0,J1(T,se));T=T.next}while(b);Tp=!1}}function oC(){km()}function km(){Ip=ad=!1;var u=0;rm!==0&&(Cy()&&(u=rm),rm=0);for(var p=on(),b=null,T=Op;T!==null;){var Y=T.next,se=Dm(T,p);se===0?(T.next=null,b===null?Op=Y:b.next=Y,Y===null&&($u=b)):(b=T,(u!==0||(se&3)!==0)&&(Ip=!0)),T=Y}Tm(u)}function Dm(u,p){for(var b=u.suspendedLanes,T=u.pingedLanes,Y=u.expirationTimes,se=u.pendingLanes&-62914561;0<se;){var je=31-re(se),at=1<<je,Ft=Y[je];Ft===-1?((at&b)===0||(at&T)!==0)&&(Y[je]=g(at,p)):Ft<=p&&(u.expiredLanes|=at),se&=~at}if(p=Gs,b=Yo,b=De(u,u===p?b:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),T=u.callbackNode,b===0||u===p&&(rs===2||rs===9)||u.cancelPendingCommit!==null)return T!==null&&T!==null&&Ot(T),u.callbackNode=null,u.callbackPriority=0;if((b&3)===0||Ze(u,b)){if(p=b&-b,p===u.callbackPriority)return p;switch(T!==null&&Ot(T),Wn(b)){case 2:case 8:b=$n;break;case 32:b=On;break;case 268435456:b=In;break;default:b=On}return T=Rm.bind(null,u),b=vt(b,T),u.callbackPriority=p,u.callbackNode=b,p}return T!==null&&T!==null&&Ot(T),u.callbackPriority=2,u.callbackNode=null,2}function Rm(u,p){if(Eu!==0&&Eu!==5)return u.callbackNode=null,u.callbackPriority=0,null;var b=u.callbackNode;if(Bp()&&u.callbackNode!==b)return null;var T=Yo;return T=De(u,u===Gs?T:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),T===0?null:(ay(u,T,p),Dm(u,on()),u.callbackNode!=null&&u.callbackNode===b?Rm.bind(null,u):null)}function J1(u,p){if(Bp())return null;ay(u,p,!0)}function e1(){lC(function(){(is&6)!==0?vt(Wt,oC):km()})}function kp(){return rm===0&&(rm=gt()),rm}function eg(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:br(""+u)}function d0(u,p){var b=p.ownerDocument.createElement("input");return b.name=p.name,b.value=p.value,u.id&&b.setAttribute("form",u.id),p.parentNode.insertBefore(b,p),u=new FormData(u),b.parentNode.removeChild(b),u}function py(u,p,b,T,Y){if(p==="submit"&&b&&b.stateNode===Y){var se=eg((Y[ti]||null).action),je=T.submitter;je&&(p=(p=je[ti]||null)?eg(p.formAction):je.getAttribute("formAction"),p!==null&&(se=p,je=null));var at=new jt("action","action",null,T,Y);u.push({event:at,listeners:[{instance:null,listener:function(){if(T.defaultPrevented){if(rm!==0){var Ft=je?d0(Y,je):new FormData(Y);Aa(b,{pending:!0,data:Ft,method:Y.method,action:se},null,Ft)}}else typeof se=="function"&&(at.preventDefault(),Ft=je?d0(Y,je):new FormData(Y),Aa(b,{pending:!0,data:Ft,method:Y.method,action:se},se,Ft))},currentTarget:Y}]})}}for(var tg=0;tg<jo.length;tg++){var ng=jo[tg],gy=ng.toLowerCase(),aC=ng[0].toUpperCase()+ng.slice(1);fu(gy,"on"+aC)}fu(Hc,"onAnimationEnd"),fu($d,"onAnimationIteration"),fu(sA,"onAnimationStart"),fu("dblclick","onDoubleClick"),fu("focusin","onFocus"),fu("focusout","onBlur"),fu(wd,"onTransitionRun"),fu(du,"onTransitionStart"),fu(SA,"onTransitionCancel"),fu(wA,"onTransitionEnd"),So("onMouseEnter",["mouseout","mouseover"]),So("onMouseLeave",["mouseout","mouseover"]),So("onPointerEnter",["pointerout","pointerover"]),So("onPointerLeave",["pointerout","pointerover"]),Ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ta("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var f0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(f0));function yy(u,p){p=(p&4)!==0;for(var b=0;b<u.length;b++){var T=u[b],Y=T.event;T=T.listeners;e:{var se=void 0;if(p)for(var je=T.length-1;0<=je;je--){var at=T[je],Ft=at.instance,hn=at.currentTarget;if(at=at.listener,Ft!==se&&Y.isPropagationStopped())break e;se=at,Y.currentTarget=hn;try{se(Y)}catch(kn){rd(kn)}Y.currentTarget=null,se=Ft}else for(je=0;je<T.length;je++){if(at=T[je],Ft=at.instance,hn=at.currentTarget,at=at.listener,Ft!==se&&Y.isPropagationStopped())break e;se=at,Y.currentTarget=hn;try{se(Y)}catch(kn){rd(kn)}Y.currentTarget=null,se=Ft}}}}function na(u,p){var b=p[Sn];b===void 0&&(b=p[Sn]=new Set);var T=u+"__bubble";b.has(T)||(ig(p,u,2,!1),b.add(T))}function m0(u,p,b){var T=0;p&&(T|=4),ig(b,u,T,p)}var Zl="_reactListening"+Math.random().toString(36).slice(2);function t1(u){if(!u[Zl]){u[Zl]=!0,Ni.forEach(function(b){b!=="selectionchange"&&(sC.has(b)||m0(b,!1,u),m0(b,!0,u))});var p=u.nodeType===9?u:u.ownerDocument;p===null||p[Zl]||(p[Zl]=!0,m0("selectionchange",!1,p))}}function ig(u,p,b,T){switch(sr(p)){case 2:var Y=tr;break;case 8:Y=Ai;break;default:Y=fi}b=Y.bind(null,p,b,u),Y=void 0,!za||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(Y=!0),T?Y!==void 0?u.addEventListener(p,b,{capture:!0,passive:Y}):u.addEventListener(p,b,!0):Y!==void 0?u.addEventListener(p,b,{passive:Y}):u.addEventListener(p,b,!1)}function Ud(u,p,b,T,Y){var se=T;if((p&1)===0&&(p&2)===0&&T!==null)e:for(;;){if(T===null)return;var je=T.tag;if(je===3||je===4){var at=T.stateNode.containerInfo;if(at===Y)break;if(je===4)for(je=T.return;je!==null;){var Ft=je.tag;if((Ft===3||Ft===4)&&je.stateNode.containerInfo===Y)return;je=je.return}for(;at!==null;){if(je=lr(at),je===null)return;if(Ft=je.tag,Ft===5||Ft===6||Ft===26||Ft===27){T=se=je;continue e}at=at.parentNode}}T=T.return}oa(function(){var hn=se,kn=cu(b),Gn=[];e:{var mn=Il.get(u);if(mn!==void 0){var fn=jt,Pr=u;switch(u){case"keypress":if(Mi(b)===0)break e;case"keydown":case"keyup":fn=Nh;break;case"focusin":Pr="focus",fn=co;break;case"focusout":Pr="blur",fn=co;break;case"beforeblur":case"afterblur":fn=co;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fn=eo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fn=ur;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fn=dp;break;case Hc:case $d:case sA:fn=zr;break;case wA:fn=Cd;break;case"scroll":case"scrollend":fn=Xn;break;case"wheel":fn=Tf;break;case"copy":case"cut":case"paste":fn=Ll;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fn=ic;break;case"toggle":case"beforetoggle":fn=VA}var Kr=(p&4)!==0,bs=!Kr&&(u==="scroll"||u==="scrollend"),tn=Kr?mn!==null?mn+"Capture":null:mn;Kr=[];for(var $t=hn,un;$t!==null;){var Ln=$t;if(un=Ln.stateNode,Ln=Ln.tag,Ln!==5&&Ln!==26&&Ln!==27||un===null||tn===null||(Ln=kr($t,tn),Ln!=null&&Kr.push(qr($t,Ln,un))),bs)break;$t=$t.return}0<Kr.length&&(mn=new fn(mn,Pr,null,b,kn),Gn.push({event:mn,listeners:Kr}))}}if((p&7)===0){e:{if(mn=u==="mouseover"||u==="pointerover",fn=u==="mouseout"||u==="pointerout",mn&&b!==iA&&(Pr=b.relatedTarget||b.fromElement)&&(lr(Pr)||Pr[Wi]))break e;if((fn||mn)&&(mn=kn.window===kn?kn:(mn=kn.ownerDocument)?mn.defaultView||mn.parentWindow:window,fn?(Pr=b.relatedTarget||b.toElement,fn=hn,Pr=Pr?lr(Pr):null,Pr!==null&&(bs=a(Pr),Kr=Pr.tag,Pr!==bs||Kr!==5&&Kr!==27&&Kr!==6)&&(Pr=null)):(fn=null,Pr=hn),fn!==Pr)){if(Kr=eo,Ln="onMouseLeave",tn="onMouseEnter",$t="mouse",(u==="pointerout"||u==="pointerover")&&(Kr=ic,Ln="onPointerLeave",tn="onPointerEnter",$t="pointer"),bs=fn==null?mn:vr(fn),un=Pr==null?mn:vr(Pr),mn=new Kr(Ln,$t+"leave",fn,b,kn),mn.target=bs,mn.relatedTarget=un,Ln=null,lr(kn)===hn&&(Kr=new Kr(tn,$t+"enter",Pr,b,kn),Kr.target=un,Kr.relatedTarget=bs,Ln=Kr),bs=Ln,fn&&Pr)t:{for(Kr=fn,tn=Pr,$t=0,un=Kr;un;un=Xl(un))$t++;for(un=0,Ln=tn;Ln;Ln=Xl(Ln))un++;for(;0<$t-un;)Kr=Xl(Kr),$t--;for(;0<un-$t;)tn=Xl(tn),un--;for(;$t--;){if(Kr===tn||tn!==null&&Kr===tn.alternate)break t;Kr=Xl(Kr),tn=Xl(tn)}Kr=null}else Kr=null;fn!==null&&wl(Gn,mn,fn,Kr,!1),Pr!==null&&bs!==null&&wl(Gn,bs,Pr,Kr,!0)}}e:{if(mn=hn?vr(hn):window,fn=mn.nodeName&&mn.nodeName.toLowerCase(),fn==="select"||fn==="input"&&mn.type==="file")var ir=Pu;else if(Pf(mn))if($A)ir=Mm;else{ir=hu;var qo=Vd}else fn=mn.nodeName,!fn||fn.toLowerCase()!=="input"||mn.type!=="checkbox"&&mn.type!=="radio"?hn&&ga(hn.elementType)&&(ir=Pu):ir=ZA;if(ir&&(ir=ir(u,hn))){rc(Gn,ir,b,kn);break e}qo&&qo(u,mn,hn),u==="focusout"&&hn&&mn.type==="number"&&hn.memoizedProps.value!=null&&yl(mn,"number",mn.value)}switch(qo=hn?vr(hn):window,u){case"focusin":(Pf(qo)||qo.contentEditable==="true")&&(Sc=qo,zl=hn,Zt=null);break;case"focusout":Zt=zl=Sc=null;break;case"mousedown":wn=!0;break;case"contextmenu":case"mouseup":case"dragend":wn=!1,vn(Gn,b,kn);break;case"selectionchange":if(Sm)break;case"keydown":case"keyup":vn(Gn,b,kn)}var nr;if(_d)e:{switch(u){case"compositionstart":var Or="onCompositionStart";break e;case"compositionend":Or="onCompositionEnd";break e;case"compositionupdate":Or="onCompositionUpdate";break e}Or=void 0}else vh?Df(u,b)&&(Or="onCompositionEnd"):u==="keydown"&&b.keyCode===229&&(Or="onCompositionStart");Or&&(Gh&&b.locale!=="ko"&&(vh||Or!=="onCompositionStart"?Or==="onCompositionEnd"&&vh&&(nr=Zi()):(ya=kn,Dr="value"in ya?ya.value:ya.textContent,vh=!0)),qo=p0(hn,Or),0<qo.length&&(Or=new fs(Or,u,null,b,kn),Gn.push({event:Or,listeners:qo}),nr?Or.data=nr:(nr=yh(b),nr!==null&&(Or.data=nr)))),(nr=bd?Wh(u,b):Rf(u,b))&&(Or=p0(hn,"onBeforeInput"),0<Or.length&&(qo=new fs("onBeforeInput","beforeinput",null,b,kn),Gn.push({event:qo,listeners:Or}),qo.data=nr)),py(Gn,u,hn,b,kn)}yy(Gn,p)})}function qr(u,p,b){return{instance:u,listener:p,currentTarget:b}}function p0(u,p){for(var b=p+"Capture",T=[];u!==null;){var Y=u,se=Y.stateNode;if(Y=Y.tag,Y!==5&&Y!==26&&Y!==27||se===null||(Y=kr(u,b),Y!=null&&T.unshift(qr(u,Y,se)),Y=kr(u,p),Y!=null&&T.push(qr(u,Y,se))),u.tag===3)return T;u=u.return}return[]}function Xl(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function wl(u,p,b,T,Y){for(var se=p._reactName,je=[];b!==null&&b!==T;){var at=b,Ft=at.alternate,hn=at.stateNode;if(at=at.tag,Ft!==null&&Ft===T)break;at!==5&&at!==26&&at!==27||hn===null||(Ft=hn,Y?(hn=kr(b,se),hn!=null&&je.unshift(qr(b,hn,Ft))):Y||(hn=kr(b,se),hn!=null&&je.push(qr(b,hn,Ft)))),b=b.return}je.length!==0&&u.push({event:p,listeners:je})}var g0=/\r\n?/g,ff=/\u0000|\uFFFD/g;function n1(u){return(typeof u=="string"?u:""+u).replace(g0,`
`).replace(ff,"")}function rg(u,p){return p=n1(p),n1(u)===p}function Zu(){}function Ba(u,p,b,T,Y,se){switch(b){case"children":typeof T=="string"?p==="body"||p==="textarea"&&T===""||$o(u,T):(typeof T=="number"||typeof T=="bigint")&&p!=="body"&&$o(u,""+T);break;case"className":Vi(u,"class",T);break;case"tabIndex":Vi(u,"tabindex",T);break;case"dir":case"role":case"viewBox":case"width":case"height":Vi(u,b,T);break;case"style":Kl(u,T,se);break;case"data":if(p!=="object"){Vi(u,"data",T);break}case"src":case"href":if(T===""&&(p!=="a"||b!=="href")){u.removeAttribute(b);break}if(T==null||typeof T=="function"||typeof T=="symbol"||typeof T=="boolean"){u.removeAttribute(b);break}T=br(""+T),u.setAttribute(b,T);break;case"action":case"formAction":if(typeof T=="function"){u.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof se=="function"&&(b==="formAction"?(p!=="input"&&Ba(u,p,"name",Y.name,Y,null),Ba(u,p,"formEncType",Y.formEncType,Y,null),Ba(u,p,"formMethod",Y.formMethod,Y,null),Ba(u,p,"formTarget",Y.formTarget,Y,null)):(Ba(u,p,"encType",Y.encType,Y,null),Ba(u,p,"method",Y.method,Y,null),Ba(u,p,"target",Y.target,Y,null)));if(T==null||typeof T=="symbol"||typeof T=="boolean"){u.removeAttribute(b);break}T=br(""+T),u.setAttribute(b,T);break;case"onClick":T!=null&&(u.onclick=Zu);break;case"onScroll":T!=null&&na("scroll",u);break;case"onScrollEnd":T!=null&&na("scrollend",u);break;case"dangerouslySetInnerHTML":if(T!=null){if(typeof T!="object"||!("__html"in T))throw Error(i(61));if(b=T.__html,b!=null){if(Y.children!=null)throw Error(i(60));u.innerHTML=b}}break;case"multiple":u.multiple=T&&typeof T!="function"&&typeof T!="symbol";break;case"muted":u.muted=T&&typeof T!="function"&&typeof T!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(T==null||typeof T=="function"||typeof T=="boolean"||typeof T=="symbol"){u.removeAttribute("xlink:href");break}b=br(""+T),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":T!=null&&typeof T!="function"&&typeof T!="symbol"?u.setAttribute(b,""+T):u.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":T&&typeof T!="function"&&typeof T!="symbol"?u.setAttribute(b,""):u.removeAttribute(b);break;case"capture":case"download":T===!0?u.setAttribute(b,""):T!==!1&&T!=null&&typeof T!="function"&&typeof T!="symbol"?u.setAttribute(b,T):u.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":T!=null&&typeof T!="function"&&typeof T!="symbol"&&!isNaN(T)&&1<=T?u.setAttribute(b,T):u.removeAttribute(b);break;case"rowSpan":case"start":T==null||typeof T=="function"||typeof T=="symbol"||isNaN(T)?u.removeAttribute(b):u.setAttribute(b,T);break;case"popover":na("beforetoggle",u),na("toggle",u),ka(u,"popover",T);break;case"xlinkActuate":xi(u,"http://www.w3.org/1999/xlink","xlink:actuate",T);break;case"xlinkArcrole":xi(u,"http://www.w3.org/1999/xlink","xlink:arcrole",T);break;case"xlinkRole":xi(u,"http://www.w3.org/1999/xlink","xlink:role",T);break;case"xlinkShow":xi(u,"http://www.w3.org/1999/xlink","xlink:show",T);break;case"xlinkTitle":xi(u,"http://www.w3.org/1999/xlink","xlink:title",T);break;case"xlinkType":xi(u,"http://www.w3.org/1999/xlink","xlink:type",T);break;case"xmlBase":xi(u,"http://www.w3.org/XML/1998/namespace","xml:base",T);break;case"xmlLang":xi(u,"http://www.w3.org/XML/1998/namespace","xml:lang",T);break;case"xmlSpace":xi(u,"http://www.w3.org/XML/1998/namespace","xml:space",T);break;case"is":ka(u,"is",T);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=Ul.get(b)||b,ka(u,b,T))}}function Pm(u,p,b,T,Y,se){switch(b){case"style":Kl(u,T,se);break;case"dangerouslySetInnerHTML":if(T!=null){if(typeof T!="object"||!("__html"in T))throw Error(i(61));if(b=T.__html,b!=null){if(Y.children!=null)throw Error(i(60));u.innerHTML=b}}break;case"children":typeof T=="string"?$o(u,T):(typeof T=="number"||typeof T=="bigint")&&$o(u,""+T);break;case"onScroll":T!=null&&na("scroll",u);break;case"onScrollEnd":T!=null&&na("scrollend",u);break;case"onClick":T!=null&&(u.onclick=Zu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!gl.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(Y=b.endsWith("Capture"),p=b.slice(2,Y?b.length-7:void 0),se=u[ti]||null,se=se!=null?se[b]:null,typeof se=="function"&&u.removeEventListener(p,se,Y),typeof T=="function")){typeof se!="function"&&se!==null&&(b in u?u[b]=null:u.hasAttribute(b)&&u.removeAttribute(b)),u.addEventListener(p,T,Y);break e}b in u?u[b]=T:T===!0?u.setAttribute(b,""):ka(u,b,T)}}}function Js(u,p,b){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":na("error",u),na("load",u);var T=!1,Y=!1,se;for(se in b)if(b.hasOwnProperty(se)){var je=b[se];if(je!=null)switch(se){case"src":T=!0;break;case"srcSet":Y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,p));default:Ba(u,p,se,je,b,null)}}Y&&Ba(u,p,"srcSet",b.srcSet,b,null),T&&Ba(u,p,"src",b.src,b,null);return;case"input":na("invalid",u);var at=se=je=Y=null,Ft=null,hn=null;for(T in b)if(b.hasOwnProperty(T)){var kn=b[T];if(kn!=null)switch(T){case"name":Y=kn;break;case"type":je=kn;break;case"checked":Ft=kn;break;case"defaultChecked":hn=kn;break;case"value":se=kn;break;case"defaultValue":at=kn;break;case"children":case"dangerouslySetInnerHTML":if(kn!=null)throw Error(i(137,p));break;default:Ba(u,p,T,kn,b,null)}}_A(u,se,at,Ft,hn,je,Y,!1),wo(u);return;case"select":na("invalid",u),T=je=se=null;for(Y in b)if(b.hasOwnProperty(Y)&&(at=b[Y],at!=null))switch(Y){case"value":se=at;break;case"defaultValue":je=at;break;case"multiple":T=at;default:Ba(u,p,Y,at,b,null)}p=se,b=je,u.multiple=!!T,p!=null?Ss(u,!!T,p,!1):b!=null&&Ss(u,!!T,b,!0);return;case"textarea":na("invalid",u),se=Y=T=null;for(je in b)if(b.hasOwnProperty(je)&&(at=b[je],at!=null))switch(je){case"value":T=at;break;case"defaultValue":Y=at;break;case"children":se=at;break;case"dangerouslySetInnerHTML":if(at!=null)throw Error(i(91));break;default:Ba(u,p,je,at,b,null)}Qs(u,T,Y,se),wo(u);return;case"option":for(Ft in b)if(b.hasOwnProperty(Ft)&&(T=b[Ft],T!=null))switch(Ft){case"selected":u.selected=T&&typeof T!="function"&&typeof T!="symbol";break;default:Ba(u,p,Ft,T,b,null)}return;case"dialog":na("beforetoggle",u),na("toggle",u),na("cancel",u),na("close",u);break;case"iframe":case"object":na("load",u);break;case"video":case"audio":for(T=0;T<f0.length;T++)na(f0[T],u);break;case"image":na("error",u),na("load",u);break;case"details":na("toggle",u);break;case"embed":case"source":case"link":na("error",u),na("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(hn in b)if(b.hasOwnProperty(hn)&&(T=b[hn],T!=null))switch(hn){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,p));default:Ba(u,p,hn,T,b,null)}return;default:if(ga(p)){for(kn in b)b.hasOwnProperty(kn)&&(T=b[kn],T!==void 0&&Pm(u,p,kn,T,b,void 0));return}}for(at in b)b.hasOwnProperty(at)&&(T=b[at],T!=null&&Ba(u,p,at,T,b,null))}function vy(u,p,b,T){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var Y=null,se=null,je=null,at=null,Ft=null,hn=null,kn=null;for(fn in b){var Gn=b[fn];if(b.hasOwnProperty(fn)&&Gn!=null)switch(fn){case"checked":break;case"value":break;case"defaultValue":Ft=Gn;default:T.hasOwnProperty(fn)||Ba(u,p,fn,null,T,Gn)}}for(var mn in T){var fn=T[mn];if(Gn=b[mn],T.hasOwnProperty(mn)&&(fn!=null||Gn!=null))switch(mn){case"type":se=fn;break;case"name":Y=fn;break;case"checked":hn=fn;break;case"defaultChecked":kn=fn;break;case"value":je=fn;break;case"defaultValue":at=fn;break;case"children":case"dangerouslySetInnerHTML":if(fn!=null)throw Error(i(137,p));break;default:fn!==Gn&&Ba(u,p,mn,fn,T,Gn)}}Du(u,je,at,Ft,hn,kn,se,Y);return;case"select":fn=je=at=mn=null;for(se in b)if(Ft=b[se],b.hasOwnProperty(se)&&Ft!=null)switch(se){case"value":break;case"multiple":fn=Ft;default:T.hasOwnProperty(se)||Ba(u,p,se,null,T,Ft)}for(Y in T)if(se=T[Y],Ft=b[Y],T.hasOwnProperty(Y)&&(se!=null||Ft!=null))switch(Y){case"value":mn=se;break;case"defaultValue":at=se;break;case"multiple":je=se;default:se!==Ft&&Ba(u,p,Y,se,T,Ft)}p=at,b=je,T=fn,mn!=null?Ss(u,!!b,mn,!1):!!T!=!!b&&(p!=null?Ss(u,!!b,p,!0):Ss(u,!!b,b?[]:"",!1));return;case"textarea":fn=mn=null;for(at in b)if(Y=b[at],b.hasOwnProperty(at)&&Y!=null&&!T.hasOwnProperty(at))switch(at){case"value":break;case"children":break;default:Ba(u,p,at,null,T,Y)}for(je in T)if(Y=T[je],se=b[je],T.hasOwnProperty(je)&&(Y!=null||se!=null))switch(je){case"value":mn=Y;break;case"defaultValue":fn=Y;break;case"children":break;case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(91));break;default:Y!==se&&Ba(u,p,je,Y,T,se)}bc(u,mn,fn);return;case"option":for(var Pr in b)if(mn=b[Pr],b.hasOwnProperty(Pr)&&mn!=null&&!T.hasOwnProperty(Pr))switch(Pr){case"selected":u.selected=!1;break;default:Ba(u,p,Pr,null,T,mn)}for(Ft in T)if(mn=T[Ft],fn=b[Ft],T.hasOwnProperty(Ft)&&mn!==fn&&(mn!=null||fn!=null))switch(Ft){case"selected":u.selected=mn&&typeof mn!="function"&&typeof mn!="symbol";break;default:Ba(u,p,Ft,mn,T,fn)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Kr in b)mn=b[Kr],b.hasOwnProperty(Kr)&&mn!=null&&!T.hasOwnProperty(Kr)&&Ba(u,p,Kr,null,T,mn);for(hn in T)if(mn=T[hn],fn=b[hn],T.hasOwnProperty(hn)&&mn!==fn&&(mn!=null||fn!=null))switch(hn){case"children":case"dangerouslySetInnerHTML":if(mn!=null)throw Error(i(137,p));break;default:Ba(u,p,hn,mn,T,fn)}return;default:if(ga(p)){for(var bs in b)mn=b[bs],b.hasOwnProperty(bs)&&mn!==void 0&&!T.hasOwnProperty(bs)&&Pm(u,p,bs,void 0,T,mn);for(kn in T)mn=T[kn],fn=b[kn],!T.hasOwnProperty(kn)||mn===fn||mn===void 0&&fn===void 0||Pm(u,p,kn,mn,T,fn);return}}for(var tn in b)mn=b[tn],b.hasOwnProperty(tn)&&mn!=null&&!T.hasOwnProperty(tn)&&Ba(u,p,tn,null,T,mn);for(Gn in T)mn=T[Gn],fn=b[Gn],!T.hasOwnProperty(Gn)||mn===fn||mn==null&&fn==null||Ba(u,p,Gn,mn,T,fn)}var kh=null,y0=null;function om(u){return u.nodeType===9?u:u.ownerDocument}function sl(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ll(u,p){if(u===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&p==="foreignObject"?0:u}function sd(u,p){return u==="textarea"||u==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var i1=null;function Cy(){var u=window.event;return u&&u.type==="popstate"?u===i1?!1:(i1=u,!0):(i1=null,!1)}var og=typeof setTimeout=="function"?setTimeout:void 0,_y=typeof clearTimeout=="function"?clearTimeout:void 0,by=typeof Promise=="function"?Promise:void 0,lC=typeof queueMicrotask=="function"?queueMicrotask:typeof by<"u"?function(u){return by.resolve(null).then(u).catch(ag)}:og;function ag(u){setTimeout(function(){throw u})}function Ah(u){return u==="head"}function Km(u,p){var b=p,T=0,Y=0;do{var se=b.nextSibling;if(u.removeChild(b),se&&se.nodeType===8)if(b=se.data,b==="/$"){if(0<T&&8>T){b=T;var je=u.ownerDocument;if(b&1&&Fm(je.documentElement),b&2&&Fm(je.body),b&4)for(b=je.head,Fm(b),je=b.firstChild;je;){var at=je.nextSibling,Ft=je.nodeName;je[To]||Ft==="SCRIPT"||Ft==="STYLE"||Ft==="LINK"&&je.rel.toLowerCase()==="stylesheet"||b.removeChild(je),je=at}}if(Y===0){u.removeChild(se),cl(p);return}Y--}else b==="$"||b==="$?"||b==="$!"?Y++:T=b.charCodeAt(0)-48;else T=0;b=se}while(b);cl(p)}function r1(u){var p=u.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var b=p;switch(p=p.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":r1(b),Zn(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}u.removeChild(b)}}function v0(u,p,b,T){for(;u.nodeType===1;){var Y=b;if(u.nodeName.toLowerCase()!==p.toLowerCase()){if(!T&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(T){if(!u[To])switch(p){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(se=u.getAttribute("rel"),se==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(se!==Y.rel||u.getAttribute("href")!==(Y.href==null||Y.href===""?null:Y.href)||u.getAttribute("crossorigin")!==(Y.crossOrigin==null?null:Y.crossOrigin)||u.getAttribute("title")!==(Y.title==null?null:Y.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(se=u.getAttribute("src"),(se!==(Y.src==null?null:Y.src)||u.getAttribute("type")!==(Y.type==null?null:Y.type)||u.getAttribute("crossorigin")!==(Y.crossOrigin==null?null:Y.crossOrigin))&&se&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(p==="input"&&u.type==="hidden"){var se=Y.name==null?null:""+Y.name;if(Y.type==="hidden"&&u.getAttribute("name")===se)return u}else return u;if(u=ld(u.nextSibling),u===null)break}return null}function Um(u,p,b){if(p==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!b||(u=ld(u.nextSibling),u===null))return null;return u}function ou(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState==="complete"}function Dp(u,p){var b=u.ownerDocument;if(u.data!=="$?"||b.readyState==="complete")p();else{var T=function(){p(),b.removeEventListener("DOMContentLoaded",T)};b.addEventListener("DOMContentLoaded",T),u._reactRetry=T}}function ld(u){for(;u!=null;u=u.nextSibling){var p=u.nodeType;if(p===1||p===3)break;if(p===8){if(p=u.data,p==="$"||p==="$!"||p==="$?"||p==="F!"||p==="F")break;if(p==="/$")return null}}return u}var sg=null;function Lm(u){u=u.previousSibling;for(var p=0;u;){if(u.nodeType===8){var b=u.data;if(b==="$"||b==="$!"||b==="$?"){if(p===0)return u;p--}else b==="/$"&&p++}u=u.previousSibling}return null}function PA(u,p,b){switch(p=om(b),u){case"html":if(u=p.documentElement,!u)throw Error(i(452));return u;case"head":if(u=p.head,!u)throw Error(i(453));return u;case"body":if(u=p.body,!u)throw Error(i(454));return u;default:throw Error(i(451))}}function Fm(u){for(var p=u.attributes;p.length;)u.removeAttributeNode(p[0]);Zn(u)}var Lc=new Map,Ad=new Set;function io(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var Ld=ot.d;ot.d={f:uh,r:lg,D:Ag,C:o1,L:C0,m:_0,X:xy,S:ug,M:cg};function uh(){var u=Ld.f(),p=V0();return u||p}function lg(u){var p=zi(u);p!==null&&p.tag===5&&p.type==="form"?Qo(p):Ld.r(u)}var Rp=typeof document>"u"?null:document;function Pa(u,p,b){var T=Rp;if(T&&typeof p=="string"&&p){var Y=Qi(p);Y='link[rel="'+u+'"][href="'+Y+'"]',typeof b=="string"&&(Y+='[crossorigin="'+b+'"]'),Ad.has(Y)||(Ad.add(Y),u={rel:u,crossOrigin:b,href:p},T.querySelector(Y)===null&&(p=T.createElement("link"),Js(p,"link",u),Ir(p),T.head.appendChild(p)))}}function Ag(u){Ld.D(u),Pa("dns-prefetch",u,null)}function o1(u,p){Ld.C(u,p),Pa("preconnect",u,p)}function C0(u,p,b){Ld.L(u,p,b);var T=Rp;if(T&&u&&p){var Y='link[rel="preload"][as="'+Qi(p)+'"]';p==="image"&&b&&b.imageSrcSet?(Y+='[imagesrcset="'+Qi(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(Y+='[imagesizes="'+Qi(b.imageSizes)+'"]')):Y+='[href="'+Qi(u)+'"]';var se=Y;switch(p){case"style":se=Fd(u);break;case"script":se=Pp(u)}Lc.has(se)||(u=S({rel:"preload",href:p==="image"&&b&&b.imageSrcSet?void 0:u,as:p},b),Lc.set(se,u),T.querySelector(Y)!==null||p==="style"&&T.querySelector(zm(se))||p==="script"&&T.querySelector(h(se))||(p=T.createElement("link"),Js(p,"link",u),Ir(p),T.head.appendChild(p)))}}function _0(u,p){Ld.m(u,p);var b=Rp;if(b&&u){var T=p&&typeof p.as=="string"?p.as:"script",Y='link[rel="modulepreload"][as="'+Qi(T)+'"][href="'+Qi(u)+'"]',se=Y;switch(T){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":se=Pp(u)}if(!Lc.has(se)&&(u=S({rel:"modulepreload",href:u},p),Lc.set(se,u),b.querySelector(Y)===null)){switch(T){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(h(se)))return}T=b.createElement("link"),Js(T,"link",u),Ir(T),b.head.appendChild(T)}}}function ug(u,p,b){Ld.S(u,p,b);var T=Rp;if(T&&u){var Y=La(T).hoistableStyles,se=Fd(u);p=p||"default";var je=Y.get(se);if(!je){var at={loading:0,preload:null};if(je=T.querySelector(zm(se)))at.loading=5;else{u=S({rel:"stylesheet",href:u,"data-precedence":p},b),(b=Lc.get(se))&&y(u,b);var Ft=je=T.createElement("link");Ir(Ft),Js(Ft,"link",u),Ft._p=new Promise(function(hn,kn){Ft.onload=hn,Ft.onerror=kn}),Ft.addEventListener("load",function(){at.loading|=1}),Ft.addEventListener("error",function(){at.loading|=2}),at.loading|=4,c(je,p,T)}je={type:"stylesheet",instance:je,count:1,state:at},Y.set(se,je)}}}function xy(u,p){Ld.X(u,p);var b=Rp;if(b&&u){var T=La(b).hoistableScripts,Y=Pp(u),se=T.get(Y);se||(se=b.querySelector(h(Y)),se||(u=S({src:u,async:!0},p),(p=Lc.get(Y))&&M(u,p),se=b.createElement("script"),Ir(se),Js(se,"link",u),b.head.appendChild(se)),se={type:"script",instance:se,count:1,state:null},T.set(Y,se))}}function cg(u,p){Ld.M(u,p);var b=Rp;if(b&&u){var T=La(b).hoistableScripts,Y=Pp(u),se=T.get(Y);se||(se=b.querySelector(h(Y)),se||(u=S({src:u,async:!0,type:"module"},p),(p=Lc.get(Y))&&M(u,p),se=b.createElement("script"),Ir(se),Js(se,"link",u),b.head.appendChild(se)),se={type:"script",instance:se,count:1,state:null},T.set(Y,se))}}function b0(u,p,b,T){var Y=(Y=St.current)?io(Y):null;if(!Y)throw Error(i(446));switch(u){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(p=Fd(b.href),b=La(Y).hoistableStyles,T=b.get(p),T||(T={type:"style",instance:null,count:0,state:null},b.set(p,T)),T):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){u=Fd(b.href);var se=La(Y).hoistableStyles,je=se.get(u);if(je||(Y=Y.ownerDocument||Y,je={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},se.set(u,je),(se=Y.querySelector(zm(u)))&&!se._p&&(je.instance=se,je.state.loading=5),Lc.has(u)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},Lc.set(u,b),se||hg(Y,u,b,je.state))),p&&T===null)throw Error(i(528,""));return je}if(p&&T!==null)throw Error(i(529,""));return null;case"script":return p=b.async,b=b.src,typeof b=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=Pp(b),b=La(Y).hoistableScripts,T=b.get(p),T||(T={type:"script",instance:null,count:0,state:null},b.set(p,T)),T):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,u))}}function Fd(u){return'href="'+Qi(u)+'"'}function zm(u){return'link[rel="stylesheet"]['+u+"]"}function a1(u){return S({},u,{"data-precedence":u.precedence,precedence:null})}function hg(u,p,b,T){u.querySelector('link[rel="preload"][as="style"]['+p+"]")?T.loading=1:(p=u.createElement("link"),T.preload=p,p.addEventListener("load",function(){return T.loading|=1}),p.addEventListener("error",function(){return T.loading|=2}),Js(p,"link",b),Ir(p),u.head.appendChild(p))}function Pp(u){return'[src="'+Qi(u)+'"]'}function h(u){return"script[async]"+u}function A(u,p,b){if(p.count++,p.instance===null)switch(p.type){case"style":var T=u.querySelector('style[data-href~="'+Qi(b.href)+'"]');if(T)return p.instance=T,Ir(T),T;var Y=S({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return T=(u.ownerDocument||u).createElement("style"),Ir(T),Js(T,"style",Y),c(T,b.precedence,u),p.instance=T;case"stylesheet":Y=Fd(b.href);var se=u.querySelector(zm(Y));if(se)return p.state.loading|=4,p.instance=se,Ir(se),se;T=a1(b),(Y=Lc.get(Y))&&y(T,Y),se=(u.ownerDocument||u).createElement("link"),Ir(se);var je=se;return je._p=new Promise(function(at,Ft){je.onload=at,je.onerror=Ft}),Js(se,"link",T),p.state.loading|=4,c(se,b.precedence,u),p.instance=se;case"script":return se=Pp(b.src),(Y=u.querySelector(h(se)))?(p.instance=Y,Ir(Y),Y):(T=b,(Y=Lc.get(se))&&(T=S({},b),M(T,Y)),u=u.ownerDocument||u,Y=u.createElement("script"),Ir(Y),Js(Y,"link",T),u.head.appendChild(Y),p.instance=Y);case"void":return null;default:throw Error(i(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(T=p.instance,p.state.loading|=4,c(T,b.precedence,u));return p.instance}function c(u,p,b){for(var T=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),Y=T.length?T[T.length-1]:null,se=Y,je=0;je<T.length;je++){var at=T[je];if(at.dataset.precedence===p)se=at;else if(se!==Y)break}se?se.parentNode.insertBefore(u,se.nextSibling):(p=b.nodeType===9?b.head:b,p.insertBefore(u,p.firstChild))}function y(u,p){u.crossOrigin==null&&(u.crossOrigin=p.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=p.referrerPolicy),u.title==null&&(u.title=p.title)}function M(u,p){u.crossOrigin==null&&(u.crossOrigin=p.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=p.referrerPolicy),u.integrity==null&&(u.integrity=p.integrity)}var R=null;function P(u,p,b){if(R===null){var T=new Map,Y=R=new Map;Y.set(b,T)}else Y=R,T=Y.get(b),T||(T=new Map,Y.set(b,T));if(T.has(u))return T;for(T.set(u,null),b=b.getElementsByTagName(u),Y=0;Y<b.length;Y++){var se=b[Y];if(!(se[To]||se[hi]||u==="link"&&se.getAttribute("rel")==="stylesheet")&&se.namespaceURI!=="http://www.w3.org/2000/svg"){var je=se.getAttribute(p)||"";je=u+je;var at=T.get(je);at?at.push(se):T.set(je,[se])}}return T}function G(u,p,b){u=u.ownerDocument||u,u.head.insertBefore(b,p==="title"?u.querySelector("head > title"):null)}function H(u,p,b){if(b===1||p.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return u=p.disabled,typeof p.precedence=="string"&&u==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function ie(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}var Ae=null;function ve(){}function Ke(u,p,b){if(Ae===null)throw Error(i(475));var T=Ae;if(p.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var Y=Fd(b.href),se=u.querySelector(zm(Y));if(se){u=se._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(T.count++,T=Ve.bind(T),u.then(T,T)),p.state.loading|=4,p.instance=se,Ir(se);return}se=u.ownerDocument||u,b=a1(b),(Y=Lc.get(Y))&&y(b,Y),se=se.createElement("link"),Ir(se);var je=se;je._p=new Promise(function(at,Ft){je.onload=at,je.onerror=Ft}),Js(se,"link",b),p.instance=se}T.stylesheets===null&&(T.stylesheets=new Map),T.stylesheets.set(p,u),(u=p.state.preload)&&(p.state.loading&3)===0&&(T.count++,p=Ve.bind(T),u.addEventListener("load",p),u.addEventListener("error",p))}}function Qe(){if(Ae===null)throw Error(i(475));var u=Ae;return u.stylesheets&&u.count===0&&ut(u,u.stylesheets),0<u.count?function(p){var b=setTimeout(function(){if(u.stylesheets&&ut(u,u.stylesheets),u.unsuspend){var T=u.unsuspend;u.unsuspend=null,T()}},6e4);return u.unsuspend=p,function(){u.unsuspend=null,clearTimeout(b)}}:null}function Ve(){if(this.count--,this.count===0){if(this.stylesheets)ut(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var et=null;function ut(u,p){u.stylesheets=null,u.unsuspend!==null&&(u.count++,et=new Map,p.forEach(Mt,u),et=null,Ve.call(u))}function Mt(u,p){if(!(p.state.loading&4)){var b=et.get(u);if(b)var T=b.get(null);else{b=new Map,et.set(u,b);for(var Y=u.querySelectorAll("link[data-precedence],style[data-precedence]"),se=0;se<Y.length;se++){var je=Y[se];(je.nodeName==="LINK"||je.getAttribute("media")!=="not all")&&(b.set(je.dataset.precedence,je),T=je)}T&&b.set(null,T)}Y=p.instance,je=Y.getAttribute("data-precedence"),se=b.get(je)||T,se===T&&b.set(null,Y),b.set(je,Y),this.count++,T=Ve.bind(this),Y.addEventListener("load",T),Y.addEventListener("error",T),se?se.parentNode.insertBefore(Y,se.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(Y,u.firstChild)),p.state.loading|=4}}var Qt={$$typeof:ae,Provider:null,Consumer:null,_currentValue:yt,_currentValue2:yt,_threadCount:0};function Dt(u,p,b,T,Y,se,je,at){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=kt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kt(0),this.hiddenUpdates=kt(null),this.identifierPrefix=T,this.onUncaughtError=Y,this.onCaughtError=se,this.onRecoverableError=je,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=at,this.incompleteTransitions=new Map}function zt(u,p,b,T,Y,se,je,at,Ft,hn,kn,Gn){return u=new Dt(u,p,b,je,at,Ft,hn,Gn),p=1,se===!0&&(p|=24),se=JA(3,null,null,p),u.current=se,se.stateNode=u,p=wh(),p.refCount++,u.pooledCache=p,p.refCount++,se.memoizedState={element:T,isDehydrated:b,cache:p},Eh(se),u}function ln(u){return u?(u=Tr,u):Tr}function Cn(u,p,b,T,Y,se){Y=ln(Y),T.context===null?T.context=Y:T.pendingContext=Y,T=kA(p),T.payload={element:b},se=se===void 0?null:se,se!==null&&(T.callback=se),b=Ac(u,T,p),b!==null&&(sh(b,u,p),Bh(b,u,p))}function Un(u,p){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var b=u.retryLane;u.retryLane=b!==0&&b<p?b:p}}function mi(u,p){Un(u,p),(u=u.alternate)&&Un(u,p)}function ai(u){if(u.tag===13){var p=BA(u,67108864);p!==null&&sh(p,u,67108864),mi(u,67108864)}}var di=!0;function tr(u,p,b,T){var Y=ze.T;ze.T=null;var se=ot.p;try{ot.p=2,fi(u,p,b,T)}finally{ot.p=se,ze.T=Y}}function Ai(u,p,b,T){var Y=ze.T;ze.T=null;var se=ot.p;try{ot.p=8,fi(u,p,b,T)}finally{ot.p=se,ze.T=Y}}function fi(u,p,b,T){if(di){var Y=En(T);if(Y===null)Ud(u,p,T,fr,b),Ts(u,T);else if(UA(Y,u,p,b,T))T.stopPropagation();else if(Ts(u,T),p&4&&-1<KA.indexOf(u)){for(;Y!==null;){var se=zi(Y);if(se!==null)switch(se.tag){case 3:if(se=se.stateNode,se.current.memoizedState.isDehydrated){var je=Ye(se.pendingLanes);if(je!==0){var at=se;for(at.pendingLanes|=2,at.entangledLanes|=2;je;){var Ft=1<<31-re(je);at.entanglements[1]|=Ft,je&=~Ft}lh(se),(is&6)===0&&(Mp=on()+500,Tm(0))}}break;case 13:at=BA(se,2),at!==null&&sh(at,se,2),V0(),mi(se,2)}if(se=En(T),se===null&&Ud(u,p,T,fr,b),se===Y)break;Y=se}Y!==null&&T.stopPropagation()}else Ud(u,p,T,null,b)}}function En(u){return u=cu(u),wr(u)}var fr=null;function wr(u){if(fr=null,u=lr(u),u!==null){var p=a(u);if(p===null)u=null;else{var b=p.tag;if(b===13){if(u=l(p),u!==null)return u;u=null}else if(b===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;u=null}else p!==u&&(u=null)}}return fr=u,null}function sr(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Jn()){case Wt:return 2;case $n:return 8;case On:case Bn:return 32;case In:return 268435456;default:return 32}default:return 32}}var Ui=!1,Gr=null,Ka=null,_s=null,kl=new Map,Ou=new Map,Dl=[],KA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ts(u,p){switch(u){case"focusin":case"focusout":Gr=null;break;case"dragenter":case"dragleave":Ka=null;break;case"mouseover":case"mouseout":_s=null;break;case"pointerover":case"pointerout":kl.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ou.delete(p.pointerId)}}function Al(u,p,b,T,Y,se){return u===null||u.nativeEvent!==se?(u={blockedOn:p,domEventName:b,eventSystemFlags:T,nativeEvent:se,targetContainers:[Y]},p!==null&&(p=zi(p),p!==null&&ai(p)),u):(u.eventSystemFlags|=T,p=u.targetContainers,Y!==null&&p.indexOf(Y)===-1&&p.push(Y),u)}function UA(u,p,b,T,Y){switch(p){case"focusin":return Gr=Al(Gr,u,p,b,T,Y),!0;case"dragenter":return Ka=Al(Ka,u,p,b,T,Y),!0;case"mouseover":return _s=Al(_s,u,p,b,T,Y),!0;case"pointerover":var se=Y.pointerId;return kl.set(se,Al(kl.get(se)||null,u,p,b,T,Y)),!0;case"gotpointercapture":return se=Y.pointerId,Ou.set(se,Al(Ou.get(se)||null,u,p,b,T,Y)),!0}return!1}function gA(u){var p=lr(u.target);if(p!==null){var b=a(p);if(b!==null){if(p=b.tag,p===13){if(p=l(b),p!==null){u.blockedOn=p,er(u.priority,function(){if(b.tag===13){var T=Bu();T=ii(T);var Y=BA(b,T);Y!==null&&sh(Y,b,T),mi(b,T)}});return}}else if(p===3&&b.stateNode.current.memoizedState.isDehydrated){u.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}u.blockedOn=null}function LA(u){if(u.blockedOn!==null)return!1;for(var p=u.targetContainers;0<p.length;){var b=En(u.nativeEvent);if(b===null){b=u.nativeEvent;var T=new b.constructor(b.type,b);iA=T,b.target.dispatchEvent(T),iA=null}else return p=zi(b),p!==null&&ai(p),u.blockedOn=b,!1;p.shift()}return!0}function Fc(u,p,b){LA(u)&&b.delete(p)}function yA(){Ui=!1,Gr!==null&&LA(Gr)&&(Gr=null),Ka!==null&&LA(Ka)&&(Ka=null),_s!==null&&LA(_s)&&(_s=null),kl.forEach(Fc),Ou.forEach(Fc)}function au(u,p){u.blockedOn===p&&(u.blockedOn=null,Ui||(Ui=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,yA)))}var ul=null;function Jl(u){ul!==u&&(ul=u,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ul===u&&(ul=null);for(var p=0;p<u.length;p+=3){var b=u[p],T=u[p+1],Y=u[p+2];if(typeof T!="function"){if(wr(T||b)===null)continue;break}var se=zi(b);se!==null&&(u.splice(p,3),p-=3,Aa(se,{pending:!0,data:Y,method:b.method,action:T},T,Y))}}))}function cl(u){function p(Ft){return au(Ft,u)}Gr!==null&&au(Gr,u),Ka!==null&&au(Ka,u),_s!==null&&au(_s,u),kl.forEach(p),Ou.forEach(p);for(var b=0;b<Dl.length;b++){var T=Dl[b];T.blockedOn===u&&(T.blockedOn=null)}for(;0<Dl.length&&(b=Dl[0],b.blockedOn===null);)gA(b),b.blockedOn===null&&Dl.shift();if(b=(u.ownerDocument||u).$$reactFormReplay,b!=null)for(T=0;T<b.length;T+=3){var Y=b[T],se=b[T+1],je=Y[ti]||null;if(typeof se=="function")je||Jl(b);else if(je){var at=null;if(se&&se.hasAttribute("formAction")){if(Y=se,je=se[ti]||null)at=je.formAction;else if(wr(Y)!==null)continue}else at=je.action;typeof at=="function"?b[T+1]=at:(b.splice(T,3),T-=3),Jl(b)}}}function hl(u){this._internalRoot=u}Ya.prototype.render=hl.prototype.render=function(u){var p=this._internalRoot;if(p===null)throw Error(i(409));var b=p.current,T=Bu();Cn(b,T,u,p,null,null)},Ya.prototype.unmount=hl.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var p=u.containerInfo;Cn(u.current,2,null,u,null,null),V0(),p[Wi]=null}};function Ya(u){this._internalRoot=u}Ya.prototype.unstable_scheduleHydration=function(u){if(u){var p=qi();u={blockedOn:null,target:u,priority:p};for(var b=0;b<Dl.length&&p!==0&&p<Dl[b].priority;b++);Dl.splice(b,0,u),b===0&&gA(u)}};var Dh=e.version;if(Dh!=="19.1.1")throw Error(i(527,Dh,"19.1.1"));ot.findDOMNode=function(u){var p=u._reactInternals;if(p===void 0)throw typeof u.render=="function"?Error(i(188)):(u=Object.keys(u).join(","),Error(i(268,u)));return u=m(p),u=u!==null?C(u):null,u=u===null?null:u.stateNode,u};var Kp={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:ze,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zc.isDisabled&&zc.supportsFiber)try{Kn=zc.inject(Kp),Ge=zc}catch{}}return cC.createRoot=function(u,p){if(!r(u))throw Error(i(299));var b=!1,T="",Y=Gf,se=jf,je=W0,at=null;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(T=p.identifierPrefix),p.onUncaughtError!==void 0&&(Y=p.onUncaughtError),p.onCaughtError!==void 0&&(se=p.onCaughtError),p.onRecoverableError!==void 0&&(je=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(at=p.unstable_transitionCallbacks)),p=zt(u,1,!1,null,null,b,T,Y,se,je,at,null),u[Wi]=p.current,t1(u),new hl(p)},cC.hydrateRoot=function(u,p,b){if(!r(u))throw Error(i(299));var T=!1,Y="",se=Gf,je=jf,at=W0,Ft=null,hn=null;return b!=null&&(b.unstable_strictMode===!0&&(T=!0),b.identifierPrefix!==void 0&&(Y=b.identifierPrefix),b.onUncaughtError!==void 0&&(se=b.onUncaughtError),b.onCaughtError!==void 0&&(je=b.onCaughtError),b.onRecoverableError!==void 0&&(at=b.onRecoverableError),b.unstable_transitionCallbacks!==void 0&&(Ft=b.unstable_transitionCallbacks),b.formState!==void 0&&(hn=b.formState)),p=zt(u,1,!0,p,b??null,T,Y,se,je,at,Ft,hn),p.context=ln(null),b=p.current,T=Bu(),T=ii(T),Y=kA(T),Y.callback=null,Ac(b,Y,T),b=T,p.current.lanes=b,it(p,b),lh(p),u[Wi]=p.current,t1(u),new Ya(p)},cC.version="19.1.1",cC}var p7;function cW(){if(p7)return n4.exports;p7=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),n4.exports=uW(),n4.exports}var PU=cW();const hW="modulepreload",dW=function(n){return"/maputnik/"+n},g7={},My=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){let C=function(S){return Promise.all(S.map(O=>Promise.resolve(O).then(U=>({status:"fulfilled",value:U}),U=>({status:"rejected",reason:U}))))};var l=C;document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),m=o?.nonce||o?.getAttribute("nonce");r=C(t.map(S=>{if(S=dW(S),S in g7)return;g7[S]=!0;const O=S.endsWith(".css"),U=O?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${S}"]${U}`))return;const K=document.createElement("link");if(K.rel=O?"stylesheet":hW,O||(K.as="script"),K.crossOrigin="",K.href=S,m&&K.setAttribute("nonce",m),document.head.appendChild(K),O)return new Promise((z,j)=>{K.addEventListener("load",z),K.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${S}`)))})}))}function a(o){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=o,window.dispatchEvent(m),!m.defaultPrevented)throw o}return r.then(o=>{for(const m of o||[])m.status==="rejected"&&a(m.reason);return e().catch(a)})},fW=(n,e,t)=>{const i=n[e];return i?typeof i=="function"?i():Promise.resolve(i):new Promise((r,a)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},Mo=n=>typeof n=="string",hC=()=>{let n,e;const t=new Promise((i,r)=>{n=i,e=r});return t.resolve=n,t.reject=e,t},y7=n=>n==null?"":""+n,mW=(n,e,t)=>{n.forEach(i=>{e[i]&&(t[i]=e[i])})},pW=/###/g,v7=n=>n&&n.indexOf("###")>-1?n.replace(pW,"."):n,C7=n=>!n||Mo(n),QC=(n,e,t)=>{const i=Mo(e)?e.split("."):e;let r=0;for(;r<i.length-1;){if(C7(n))return{};const a=v7(i[r]);!n[a]&&t&&(n[a]=new t),Object.prototype.hasOwnProperty.call(n,a)?n=n[a]:n={},++r}return C7(n)?{}:{obj:n,k:v7(i[r])}},_7=(n,e,t)=>{const{obj:i,k:r}=QC(n,e,Object);if(i!==void 0||e.length===1){i[r]=t;return}let a=e[e.length-1],l=e.slice(0,e.length-1),o=QC(n,l,Object);for(;o.obj===void 0&&l.length;)a=`${l[l.length-1]}.${a}`,l=l.slice(0,l.length-1),o=QC(n,l,Object),o?.obj&&typeof o.obj[`${o.k}.${a}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${a}`]=t},gW=(n,e,t,i)=>{const{obj:r,k:a}=QC(n,e,Object);r[a]=r[a]||[],r[a].push(t)},Ux=(n,e)=>{const{obj:t,k:i}=QC(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,i))return t[i]},yW=(n,e,t)=>{const i=Ux(n,t);return i!==void 0?i:Ux(e,t)},KU=(n,e,t)=>{for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in n?Mo(n[i])||n[i]instanceof String||Mo(e[i])||e[i]instanceof String?t&&(n[i]=e[i]):KU(n[i],e[i],t):n[i]=e[i]);return n},Sy=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var vW={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const CW=n=>Mo(n)?n.replace(/[&<>"'\/]/g,e=>vW[e]):n;class _W{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}const bW=[" ",",","?","!",";"],xW=new _W(20),MW=(n,e,t)=>{e=e||"",t=t||"";const i=bW.filter(l=>e.indexOf(l)<0&&t.indexOf(l)<0);if(i.length===0)return!0;const r=xW.getRegExp(`(${i.map(l=>l==="?"?"\\?":l).join("|")})`);let a=!r.test(n);if(!a){const l=n.indexOf(t);l>0&&!r.test(n.substring(0,l))&&(a=!0)}return a},o6=(n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const i=e.split(t);let r=n;for(let a=0;a<i.length;){if(!r||typeof r!="object")return;let l,o="";for(let m=a;m<i.length;++m)if(m!==a&&(o+=t),o+=i[m],l=r[o],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&m<i.length-1)continue;a+=m-a+1;break}r=l}return r},A_=n=>n?.replace("_","-"),SW={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console?.[n]?.apply?.(console,e)}};class Lx{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||SW,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,i,r){return r&&!this.debug?null:(Mo(e[0])&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Lx(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Lx(this.logger,e)}}var Gp=new Lx;class I3{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const r=this.observers[i].get(t)||0;this.observers[i].set(t,r+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([r,a])=>{for(let l=0;l<a;l++)r(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([r,a])=>{for(let l=0;l<a;l++)r.apply(r,[e,...t])})}}class b7 extends I3{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,i,r={}){const a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,l=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],i&&(Array.isArray(i)?o.push(...i):Mo(i)&&a?o.push(...i.split(a)):o.push(i)));const m=Ux(this.data,o);return!m&&!t&&!i&&e.indexOf(".")>-1&&(e=o[0],t=o[1],i=o.slice(2).join(".")),m||!l||!Mo(i)?m:o6(this.data?.[e]?.[t],i,a)}addResource(e,t,i,r,a={silent:!1}){const l=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let o=[e,t];i&&(o=o.concat(l?i.split(l):i)),e.indexOf(".")>-1&&(o=e.split("."),r=t,t=o[1]),this.addNamespaces(t),_7(this.data,o,r),a.silent||this.emit("added",e,t,i,r)}addResources(e,t,i,r={silent:!1}){for(const a in i)(Mo(i[a])||Array.isArray(i[a]))&&this.addResource(e,t,a,i[a],{silent:!0});r.silent||this.emit("added",e,t,i)}addResourceBundle(e,t,i,r,a,l={silent:!1,skipCopy:!1}){let o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),r=i,i=t,t=o[1]),this.addNamespaces(t);let m=Ux(this.data,o)||{};l.skipCopy||(i=JSON.parse(JSON.stringify(i))),r?KU(m,i,a):m={...m,...i},_7(this.data,o,m),l.silent||this.emit("added",e,t,i)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(r=>t[r]&&Object.keys(t[r]).length>0)}toJSON(){return this.data}}var UU={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,i,r){return n.forEach(a=>{e=this.processors[a]?.process(e,t,i,r)??e}),e}};const LU=Symbol("i18next/PATH_KEY");function wW(){const n=[],e=Object.create(null);let t;return e.get=(i,r)=>(t?.revoke?.(),r===LU?n:(n.push(r),t=Proxy.revocable(i,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function a6(n,e){const{[LU]:t}=n(wW());return t.join(e?.keySeparator??".")}const x7={},M7=n=>!Mo(n)&&typeof n!="boolean"&&typeof n!="number";class Fx extends I3{constructor(e,t={}){super(),mW(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Gp.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const i={...t};return e==null?!1:this.resolve(e,i)?.res!==void 0}extractFromKey(e,t){let i=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const r=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let a=t.ns||this.options.defaultNS||[];const l=i&&e.indexOf(i)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!MW(e,i,r);if(l&&!o){const m=e.match(this.interpolator.nestingRegexp);if(m&&m.length>0)return{key:e,namespaces:Mo(a)?[a]:a};const C=e.split(i);(i!==r||i===r&&this.options.ns.indexOf(C[0])>-1)&&(a=C.shift()),e=C.join(r)}return{key:e,namespaces:Mo(a)?[a]:a}}translate(e,t,i){let r=typeof t=="object"?{...t}:t;if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),e==null)return"";typeof e=="function"&&(e=a6(e,{...this.options,...r})),Array.isArray(e)||(e=[String(e)]);const a=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,l=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:o,namespaces:m}=this.extractFromKey(e[e.length-1],r),C=m[m.length-1];let S=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;S===void 0&&(S=":");const O=r.lng||this.language,U=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(O?.toLowerCase()==="cimode")return U?a?{res:`${C}${S}${o}`,usedKey:o,exactUsedKey:o,usedLng:O,usedNS:C,usedParams:this.getUsedParamsDetails(r)}:`${C}${S}${o}`:a?{res:o,usedKey:o,exactUsedKey:o,usedLng:O,usedNS:C,usedParams:this.getUsedParamsDetails(r)}:o;const K=this.resolve(e,r);let z=K?.res;const j=K?.usedKey||o,Q=K?.exactUsedKey||o,ee=["[object Number]","[object Function]","[object RegExp]"],V=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,ae=!this.i18nFormat||this.i18nFormat.handleAsObject,ne=r.count!==void 0&&!Mo(r.count),Z=Fx.hasDefaultValue(r),oe=ne?this.pluralResolver.getSuffix(O,r.count,r):"",W=r.ordinal&&ne?this.pluralResolver.getSuffix(O,r.count,{ordinal:!1}):"",ue=ne&&!r.ordinal&&r.count===0,ge=ue&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${oe}`]||r[`defaultValue${W}`]||r.defaultValue;let ye=z;ae&&!z&&Z&&(ye=ge);const Me=M7(ye),Be=Object.prototype.toString.apply(ye);if(ae&&ye&&Me&&ee.indexOf(Be)<0&&!(Mo(V)&&Array.isArray(ye))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const we=this.options.returnedObjectHandler?this.options.returnedObjectHandler(j,ye,{...r,ns:m}):`key '${o} (${this.language})' returned an object instead of string.`;return a?(K.res=we,K.usedParams=this.getUsedParamsDetails(r),K):we}if(l){const we=Array.isArray(ye),qe=we?[]:{},xe=we?Q:j;for(const ze in ye)if(Object.prototype.hasOwnProperty.call(ye,ze)){const ot=`${xe}${l}${ze}`;Z&&!z?qe[ze]=this.translate(ot,{...r,defaultValue:M7(ge)?ge[ze]:void 0,joinArrays:!1,ns:m}):qe[ze]=this.translate(ot,{...r,joinArrays:!1,ns:m}),qe[ze]===ot&&(qe[ze]=ye[ze])}z=qe}}else if(ae&&Mo(V)&&Array.isArray(z))z=z.join(V),z&&(z=this.extendTranslation(z,e,r,i));else{let we=!1,qe=!1;!this.isValidLookup(z)&&Z&&(we=!0,z=ge),this.isValidLookup(z)||(qe=!0,z=o);const ze=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&qe?void 0:z,ot=Z&&ge!==z&&this.options.updateMissing;if(qe||we||ot){if(this.logger.log(ot?"updateKey":"missingKey",O,C,o,ot?ge:z),l){const Ne=this.resolve(o,{...r,keySeparator:!1});Ne&&Ne.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let yt=[];const nt=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&nt&&nt[0])for(let Ne=0;Ne<nt.length;Ne++)yt.push(nt[Ne]);else this.options.saveMissingTo==="all"?yt=this.languageUtils.toResolveHierarchy(r.lng||this.language):yt.push(r.lng||this.language);const be=(Ne,tt,lt)=>{const It=Z&&lt!==z?lt:ze;this.options.missingKeyHandler?this.options.missingKeyHandler(Ne,C,tt,It,ot,r):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(Ne,C,tt,It,ot,r),this.emit("missingKey",Ne,C,tt,z)};this.options.saveMissing&&(this.options.saveMissingPlurals&&ne?yt.forEach(Ne=>{const tt=this.pluralResolver.getSuffixes(Ne,r);ue&&r[`defaultValue${this.options.pluralSeparator}zero`]&&tt.indexOf(`${this.options.pluralSeparator}zero`)<0&&tt.push(`${this.options.pluralSeparator}zero`),tt.forEach(lt=>{be([Ne],o+lt,r[`defaultValue${lt}`]||ge)})}):be(yt,o,ge))}z=this.extendTranslation(z,e,r,K,i),qe&&z===o&&this.options.appendNamespaceToMissingKey&&(z=`${C}${S}${o}`),(qe||we)&&this.options.parseMissingKeyHandler&&(z=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${C}${S}${o}`:o,we?z:void 0,r))}return a?(K.res=z,K.usedParams=this.getUsedParamsDetails(r),K):z}extendTranslation(e,t,i,r,a){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const m=Mo(e)&&(i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let C;if(m){const O=e.match(this.interpolator.nestingRegexp);C=O&&O.length}let S=i.replace&&!Mo(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(S={...this.options.interpolation.defaultVariables,...S}),e=this.interpolator.interpolate(e,S,i.lng||this.language||r.usedLng,i),m){const O=e.match(this.interpolator.nestingRegexp),U=O&&O.length;C<U&&(i.nest=!1)}!i.lng&&r&&r.res&&(i.lng=this.language||r.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,(...O)=>a?.[0]===O[0]&&!i.context?(this.logger.warn(`It seems you are nesting recursively key: ${O[0]} in key: ${t[0]}`),null):this.translate(...O,t),i)),i.interpolation&&this.interpolator.reset()}const l=i.postProcess||this.options.postProcess,o=Mo(l)?[l]:l;return e!=null&&o?.length&&i.applyPostProcessor!==!1&&(e=UU.handle(o,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e,t={}){let i,r,a,l,o;return Mo(e)&&(e=[e]),e.forEach(m=>{if(this.isValidLookup(i))return;const C=this.extractFromKey(m,t),S=C.key;r=S;let O=C.namespaces;this.options.fallbackNS&&(O=O.concat(this.options.fallbackNS));const U=t.count!==void 0&&!Mo(t.count),K=U&&!t.ordinal&&t.count===0,z=t.context!==void 0&&(Mo(t.context)||typeof t.context=="number")&&t.context!=="",j=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);O.forEach(Q=>{this.isValidLookup(i)||(o=Q,!x7[`${j[0]}-${Q}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(o)&&(x7[`${j[0]}-${Q}`]=!0,this.logger.warn(`key "${r}" for languages "${j.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),j.forEach(ee=>{if(this.isValidLookup(i))return;l=ee;const V=[S];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(V,S,ee,Q,t);else{let ne;U&&(ne=this.pluralResolver.getSuffix(ee,t.count,t));const Z=`${this.options.pluralSeparator}zero`,oe=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(U&&(t.ordinal&&ne.indexOf(oe)===0&&V.push(S+ne.replace(oe,this.options.pluralSeparator)),V.push(S+ne),K&&V.push(S+Z)),z){const W=`${S}${this.options.contextSeparator||"_"}${t.context}`;V.push(W),U&&(t.ordinal&&ne.indexOf(oe)===0&&V.push(W+ne.replace(oe,this.options.pluralSeparator)),V.push(W+ne),K&&V.push(W+Z))}}let ae;for(;ae=V.pop();)this.isValidLookup(i)||(a=ae,i=this.getResource(ee,Q,ae,t))}))})}),{res:i,usedKey:r,exactUsedKey:a,usedLng:l,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,i,r={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,i,r):this.resourceStore.getResource(e,t,i,r)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&!Mo(e.replace);let r=i?e.replace:e;if(i&&typeof e.count<"u"&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!i){r={...r};for(const a of t)delete r[a]}return r}static hasDefaultValue(e){const t="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t===i.substring(0,t.length)&&e[i]!==void 0)return!0;return!1}}class S7{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Gp.create("languageUtils")}getScriptPartFromCode(e){if(e=A_(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=A_(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Mo(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(i=>{if(t)return;const r=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(r))&&(t=r)}),!t&&this.options.supportedLngs&&e.forEach(i=>{if(t)return;const r=this.getScriptPartFromCode(i);if(this.isSupportedCode(r))return t=r;const a=this.getLanguagePartFromCode(i);if(this.isSupportedCode(a))return t=a;t=this.options.supportedLngs.find(l=>{if(l===a)return l;if(!(l.indexOf("-")<0&&a.indexOf("-")<0)&&(l.indexOf("-")>0&&a.indexOf("-")<0&&l.substring(0,l.indexOf("-"))===a||l.indexOf(a)===0&&a.length>1))return l})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Mo(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let i=e[t];return i||(i=e[this.getScriptPartFromCode(t)]),i||(i=e[this.formatLanguageCode(t)]),i||(i=e[this.getLanguagePartFromCode(t)]),i||(i=e.default),i||[]}toResolveHierarchy(e,t){const i=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),r=[],a=l=>{l&&(this.isSupportedCode(l)?r.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return Mo(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(e))):Mo(e)&&a(this.formatLanguageCode(e)),i.forEach(l=>{r.indexOf(l)<0&&a(this.formatLanguageCode(l))}),r}}const w7={zero:0,one:1,two:2,few:3,many:4,other:5},E7={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class EW{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Gp.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const i=A_(e==="dev"?"en":e),r=t.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:i,type:r});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let l;try{l=new Intl.PluralRules(i,{type:r})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),E7;if(!e.match(/-|_/))return E7;const m=this.languageUtils.getLanguagePartFromCode(e);l=this.getRule(m,t)}return this.pluralRulesCache[a]=l,l}needsPlural(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,i={}){return this.getSuffixes(e,i).map(r=>`${t}${r}`)}getSuffixes(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?i.resolvedOptions().pluralCategories.sort((r,a)=>w7[r]-w7[a]).map(r=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${r}`):[]}getSuffix(e,t,i={}){const r=this.getRule(e,i);return r?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,i))}}const B7=(n,e,t,i=".",r=!0)=>{let a=yW(n,e,t);return!a&&r&&Mo(t)&&(a=o6(n,t,i),a===void 0&&(a=o6(e,t,i))),a},a4=n=>n.replace(/\$/g,"$$$$");class BW{constructor(e={}){this.logger=Gp.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:i,useRawValueToEscape:r,prefix:a,prefixEscaped:l,suffix:o,suffixEscaped:m,formatSeparator:C,unescapeSuffix:S,unescapePrefix:O,nestingPrefix:U,nestingPrefixEscaped:K,nestingSuffix:z,nestingSuffixEscaped:j,nestingOptionsSeparator:Q,maxReplaces:ee,alwaysFormat:V}=e.interpolation;this.escape=t!==void 0?t:CW,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=a?Sy(a):l||"{{",this.suffix=o?Sy(o):m||"}}",this.formatSeparator=C||",",this.unescapePrefix=S?"":O||"-",this.unescapeSuffix=this.unescapePrefix?"":S||"",this.nestingPrefix=U?Sy(U):K||Sy("$t("),this.nestingSuffix=z?Sy(z):j||Sy(")"),this.nestingOptionsSeparator=Q||",",this.maxReplaces=ee||1e3,this.alwaysFormat=V!==void 0?V:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,i)=>t?.source===i?(t.lastIndex=0,t):new RegExp(i,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,i,r){let a,l,o;const m=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},C=K=>{if(K.indexOf(this.formatSeparator)<0){const ee=B7(t,m,K,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(ee,void 0,i,{...r,...t,interpolationkey:K}):ee}const z=K.split(this.formatSeparator),j=z.shift().trim(),Q=z.join(this.formatSeparator).trim();return this.format(B7(t,m,j,this.options.keySeparator,this.options.ignoreJSONStructure),Q,i,{...r,...t,interpolationkey:j})};this.resetRegExp();const S=r?.missingInterpolationHandler||this.options.missingInterpolationHandler,O=r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:K=>a4(K)},{regex:this.regexp,safeValue:K=>this.escapeValue?a4(this.escape(K)):a4(K)}].forEach(K=>{for(o=0;a=K.regex.exec(e);){const z=a[1].trim();if(l=C(z),l===void 0)if(typeof S=="function"){const Q=S(e,a,r);l=Mo(Q)?Q:""}else if(r&&Object.prototype.hasOwnProperty.call(r,z))l="";else if(O){l=a[0];continue}else this.logger.warn(`missed to pass in variable ${z} for interpolating ${e}`),l="";else!Mo(l)&&!this.useRawValueToEscape&&(l=y7(l));const j=K.safeValue(l);if(e=e.replace(a[0],j),O?(K.regex.lastIndex+=l.length,K.regex.lastIndex-=a[0].length):K.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t,i={}){let r,a,l;const o=(m,C)=>{const S=this.nestingOptionsSeparator;if(m.indexOf(S)<0)return m;const O=m.split(new RegExp(`${S}[ ]*{`));let U=`{${O[1]}`;m=O[0],U=this.interpolate(U,l);const K=U.match(/'/g),z=U.match(/"/g);((K?.length??0)%2===0&&!z||z.length%2!==0)&&(U=U.replace(/'/g,'"'));try{l=JSON.parse(U),C&&(l={...C,...l})}catch(j){return this.logger.warn(`failed parsing options string in nesting for key ${m}`,j),`${m}${S}${U}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,m};for(;r=this.nestingRegexp.exec(e);){let m=[];l={...i},l=l.replace&&!Mo(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;const C=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(C!==-1&&(m=r[1].slice(C).split(this.formatSeparator).map(S=>S.trim()).filter(Boolean),r[1]=r[1].slice(0,C)),a=t(o.call(this,r[1].trim(),l),l),a&&r[0]===e&&!Mo(a))return a;Mo(a)||(a=y7(a)),a||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),a=""),m.length&&(a=m.reduce((S,O)=>this.format(S,O,i.lng,{...i,interpolationkey:r[1].trim()}),a.trim())),e=e.replace(r[0],a),this.regexp.lastIndex=0}return e}}const OW=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const i=n.split("(");e=i[0].toLowerCase().trim();const r=i[1].substring(0,i[1].length-1);e==="currency"&&r.indexOf(":")<0?t.currency||(t.currency=r.trim()):e==="relativetime"&&r.indexOf(":")<0?t.range||(t.range=r.trim()):r.split(";").forEach(l=>{if(l){const[o,...m]=l.split(":"),C=m.join(":").trim().replace(/^'+|'+$/g,""),S=o.trim();t[S]||(t[S]=C),C==="false"&&(t[S]=!1),C==="true"&&(t[S]=!0),isNaN(C)||(t[S]=parseInt(C,10))}})}return{formatName:e,formatOptions:t}},O7=n=>{const e={};return(t,i,r)=>{let a=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(a={...a,[r.interpolationkey]:void 0});const l=i+JSON.stringify(a);let o=e[l];return o||(o=n(A_(i),r),e[l]=o),o(t)}},IW=n=>(e,t,i)=>n(A_(t),i)(e);class TW{constructor(e={}){this.logger=Gp.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const i=t.cacheInBuiltFormats?O7:IW;this.formats={number:i((r,a)=>{const l=new Intl.NumberFormat(r,{...a});return o=>l.format(o)}),currency:i((r,a)=>{const l=new Intl.NumberFormat(r,{...a,style:"currency"});return o=>l.format(o)}),datetime:i((r,a)=>{const l=new Intl.DateTimeFormat(r,{...a});return o=>l.format(o)}),relativetime:i((r,a)=>{const l=new Intl.RelativeTimeFormat(r,{...a});return o=>l.format(o,a.range||"day")}),list:i((r,a)=>{const l=new Intl.ListFormat(r,{...a});return o=>l.format(o)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=O7(t)}format(e,t,i,r={}){const a=t.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(o=>o.indexOf(")")>-1)){const o=a.findIndex(m=>m.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,o)].join(this.formatSeparator)}return a.reduce((o,m)=>{const{formatName:C,formatOptions:S}=OW(m);if(this.formats[C]){let O=o;try{const U=r?.formatParams?.[r.interpolationkey]||{},K=U.locale||U.lng||r.locale||r.lng||i;O=this.formats[C](o,K,{...S,...r,...U})}catch(U){this.logger.warn(U)}return O}else this.logger.warn(`there was no format function for ${C}`);return o},e)}}const kW=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class DW extends I3{constructor(e,t,i,r={}){super(),this.backend=e,this.store=t,this.services=i,this.languageUtils=i.languageUtils,this.options=r,this.logger=Gp.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(i,r.backend,r)}queueLoad(e,t,i,r){const a={},l={},o={},m={};return e.forEach(C=>{let S=!0;t.forEach(O=>{const U=`${C}|${O}`;!i.reload&&this.store.hasResourceBundle(C,O)?this.state[U]=2:this.state[U]<0||(this.state[U]===1?l[U]===void 0&&(l[U]=!0):(this.state[U]=1,S=!1,l[U]===void 0&&(l[U]=!0),a[U]===void 0&&(a[U]=!0),m[O]===void 0&&(m[O]=!0)))}),S||(o[C]=!0)}),(Object.keys(a).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(a),pending:Object.keys(l),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(m)}}loaded(e,t,i){const r=e.split("|"),a=r[0],l=r[1];t&&this.emit("failedLoading",a,l,t),!t&&i&&this.store.addResourceBundle(a,l,i,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&i&&(this.state[e]=0);const o={};this.queue.forEach(m=>{gW(m.loaded,[a],l),kW(m,e),t&&m.errors.push(t),m.pendingCount===0&&!m.done&&(Object.keys(m.loaded).forEach(C=>{o[C]||(o[C]={});const S=m.loaded[C];S.length&&S.forEach(O=>{o[C][O]===void 0&&(o[C][O]=!0)})}),m.done=!0,m.errors.length?m.callback(m.errors):m.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(m=>!m.done)}read(e,t,i,r=0,a=this.retryTimeout,l){if(!e.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:i,tried:r,wait:a,callback:l});return}this.readingCalls++;const o=(C,S)=>{if(this.readingCalls--,this.waitingReads.length>0){const O=this.waitingReads.shift();this.read(O.lng,O.ns,O.fcName,O.tried,O.wait,O.callback)}if(C&&S&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,i,r+1,a*2,l)},a);return}l(C,S)},m=this.backend[i].bind(this.backend);if(m.length===2){try{const C=m(e,t);C&&typeof C.then=="function"?C.then(S=>o(null,S)).catch(o):o(null,C)}catch(C){o(C)}return}return m(e,t,o)}prepareLoading(e,t,i={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();Mo(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Mo(t)&&(t=[t]);const a=this.queueLoad(e,t,i,r);if(!a.toLoad.length)return a.pending.length||r(),null;a.toLoad.forEach(l=>{this.loadOne(l)})}load(e,t,i){this.prepareLoading(e,t,{},i)}reload(e,t,i){this.prepareLoading(e,t,{reload:!0},i)}loadOne(e,t=""){const i=e.split("|"),r=i[0],a=i[1];this.read(r,a,"read",void 0,void 0,(l,o)=>{l&&this.logger.warn(`${t}loading namespace ${a} for language ${r} failed`,l),!l&&o&&this.logger.log(`${t}loaded namespace ${a} for language ${r}`,o),this.loaded(e,l,o)})}saveMissing(e,t,i,r,a,l={},o=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${i}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend?.create){const m={...l,isUpdate:a},C=this.backend.create.bind(this.backend);if(C.length<6)try{let S;C.length===5?S=C(e,t,i,r,m):S=C(e,t,i,r),S&&typeof S.then=="function"?S.then(O=>o(null,O)).catch(o):o(null,S)}catch(S){o(S)}else C(e,t,i,r,o,m)}!e||!e[0]||this.store.addResource(e[0],t,i,r)}}}const I7=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),Mo(n[1])&&(e.defaultValue=n[1]),Mo(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(i=>{e[i]=t[i]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),T7=n=>(Mo(n.ns)&&(n.ns=[n.ns]),Mo(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),Mo(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),Ib=()=>{},RW=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class u_ extends I3{constructor(e={},t){if(super(),this.options=T7(e),this.services={},this.logger=Gp,this.modules={external:[]},RW(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(Mo(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const i=I7();this.options={...i,...this.options,...T7(e)},this.options.interpolation={...i.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const r=C=>C?typeof C=="function"?new C:C:null;if(!this.options.isClone){this.modules.logger?Gp.init(r(this.modules.logger),this.options):Gp.init(null,this.options);let C;this.modules.formatter?C=this.modules.formatter:C=TW;const S=new S7(this.options);this.store=new b7(this.options.resources,this.options);const O=this.services;O.logger=Gp,O.resourceStore=this.store,O.languageUtils=S,O.pluralResolver=new EW(S,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),C&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(O.formatter=r(C),O.formatter.init&&O.formatter.init(O,this.options),this.options.interpolation.format=O.formatter.format.bind(O.formatter)),O.interpolator=new BW(this.options),O.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},O.backendConnector=new DW(r(this.modules.backend),O.resourceStore,O,this.options),O.backendConnector.on("*",(K,...z)=>{this.emit(K,...z)}),this.modules.languageDetector&&(O.languageDetector=r(this.modules.languageDetector),O.languageDetector.init&&O.languageDetector.init(O,this.options.detection,this.options)),this.modules.i18nFormat&&(O.i18nFormat=r(this.modules.i18nFormat),O.i18nFormat.init&&O.i18nFormat.init(this)),this.translator=new Fx(this.services,this.options),this.translator.on("*",(K,...z)=>{this.emit(K,...z)}),this.modules.external.forEach(K=>{K.init&&K.init(this)})}if(this.format=this.options.interpolation.format,t||(t=Ib),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const C=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);C.length>0&&C[0]!=="dev"&&(this.options.lng=C[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(C=>{this[C]=(...S)=>this.store[C](...S)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(C=>{this[C]=(...S)=>(this.store[C](...S),this)});const o=hC(),m=()=>{const C=(S,O)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(O),t(S,O)};if(this.languages&&!this.isInitialized)return C(null,this.t.bind(this));this.changeLanguage(this.options.lng,C)};return this.options.resources||!this.options.initAsync?m():setTimeout(m,0),o}loadResources(e,t=Ib){let i=t;const r=Mo(e)?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(r?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const a=[],l=o=>{if(!o||o==="cimode")return;this.services.languageUtils.toResolveHierarchy(o).forEach(C=>{C!=="cimode"&&a.indexOf(C)<0&&a.push(C)})};r?l(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(m=>l(m)),this.options.preload?.forEach?.(o=>l(o)),this.services.backendConnector.load(a,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(o)})}else i(null)}reloadResources(e,t,i){const r=hC();return typeof e=="function"&&(i=e,e=void 0),typeof t=="function"&&(i=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),i||(i=Ib),this.services.backendConnector.reload(e,t,a=>{r.resolve(),i(a)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&UU.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const i=this.languages[t];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const i=hC();this.emit("languageChanging",e);const r=o=>{this.language=o,this.languages=this.services.languageUtils.toResolveHierarchy(o),this.resolvedLanguage=void 0,this.setResolvedLanguage(o)},a=(o,m)=>{m?this.isLanguageChangingTo===e&&(r(m),this.translator.changeLanguage(m),this.isLanguageChangingTo=void 0,this.emit("languageChanged",m),this.logger.log("languageChanged",m)):this.isLanguageChangingTo=void 0,i.resolve((...C)=>this.t(...C)),t&&t(o,(...C)=>this.t(...C))},l=o=>{!e&&!o&&this.services.languageDetector&&(o=[]);const m=Mo(o)?o:o&&o[0],C=this.store.hasLanguageSomeTranslations(m)?m:this.services.languageUtils.getBestMatchFromCodes(Mo(o)?[o]:o);C&&(this.language||r(C),this.translator.language||this.translator.changeLanguage(C),this.services.languageDetector?.cacheUserLanguage?.(C)),this.loadResources(C,S=>{a(S,C)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),i}getFixedT(e,t,i){const r=(a,l,...o)=>{let m;typeof l!="object"?m=this.options.overloadTranslationOptionHandler([a,l].concat(o)):m={...l},m.lng=m.lng||r.lng,m.lngs=m.lngs||r.lngs,m.ns=m.ns||r.ns,m.keyPrefix!==""&&(m.keyPrefix=m.keyPrefix||i||r.keyPrefix);const C=this.options.keySeparator||".";let S;return m.keyPrefix&&Array.isArray(a)?S=a.map(O=>(typeof O=="function"&&(O=a6(O,{...this.options,...l})),`${m.keyPrefix}${C}${O}`)):(typeof a=="function"&&(a=a6(a,{...this.options,...l})),S=m.keyPrefix?`${m.keyPrefix}${C}${a}`:a),this.t(S,m)};return Mo(e)?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=i,r}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=t.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const l=(o,m)=>{const C=this.services.backendConnector.state[`${o}|${m}`];return C===-1||C===0||C===2};if(t.precheck){const o=t.precheck(this,l);if(o!==void 0)return o}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(i,e)&&(!r||l(a,e)))}loadNamespaces(e,t){const i=hC();return this.options.ns?(Mo(e)&&(e=[e]),e.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{i.resolve(),t&&t(r)}),i):(t&&t(),Promise.resolve())}loadLanguages(e,t){const i=hC();Mo(e)&&(e=[e]);const r=this.options.preload||[],a=e.filter(l=>r.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return a.length?(this.options.preload=r.concat(a),this.loadResources(l=>{i.resolve(),t&&t(l)}),i):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const r=new Intl.Locale(e);if(r&&r.getTextInfo){const a=r.getTextInfo();if(a&&a.direction)return a.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services?.languageUtils||new S7(I7());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new u_(e,t)}cloneInstance(e={},t=Ib){const i=e.forkResourceStore;i&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},a=new u_(r);if((e.debug!==void 0||e.prefix!==void 0)&&(a.logger=a.logger.clone(e)),["store","services","language"].forEach(o=>{a[o]=this[o]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},i){const o=Object.keys(this.store.data).reduce((m,C)=>(m[C]={...this.store.data[C]},m[C]=Object.keys(m[C]).reduce((S,O)=>(S[O]={...m[C][O]},S),m[C]),m),{});a.store=new b7(o,r),a.services.resourceStore=a.store}return a.translator=new Fx(a.services,r),a.translator.on("*",(o,...m)=>{a.emit(o,...m)}),a.init(r,t),a.translator.options=r,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const mh=u_.createInstance();mh.createInstance=u_.createInstance;mh.createInstance;mh.dir;mh.init;mh.loadResources;mh.reloadResources;mh.use;mh.changeLanguage;mh.getFixedT;mh.t;mh.exists;mh.setDefaultNamespace;mh.hasLoadedNamespace;mh.loadNamespaces;mh.loadLanguages;const{slice:PW,forEach:KW}=[];function UW(n){return KW.call(PW.call(arguments,1),e=>{if(e)for(const t in e)n[t]===void 0&&(n[t]=e[t])}),n}function LW(n){return typeof n!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(n))}const k7=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,FW=function(n,e){const i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},r=encodeURIComponent(e);let a=`${n}=${r}`;if(i.maxAge>0){const l=i.maxAge-0;if(Number.isNaN(l))throw new Error("maxAge should be a Number");a+=`; Max-Age=${Math.floor(l)}`}if(i.domain){if(!k7.test(i.domain))throw new TypeError("option domain is invalid");a+=`; Domain=${i.domain}`}if(i.path){if(!k7.test(i.path))throw new TypeError("option path is invalid");a+=`; Path=${i.path}`}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");a+=`; Expires=${i.expires.toUTCString()}`}if(i.httpOnly&&(a+="; HttpOnly"),i.secure&&(a+="; Secure"),i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return i.partitioned&&(a+="; Partitioned"),a},D7={create(n,e,t,i){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+t*60*1e3)),i&&(r.domain=i),document.cookie=FW(n,e,r)},read(n){const e=`${n}=`,t=document.cookie.split(";");for(let i=0;i<t.length;i++){let r=t[i];for(;r.charAt(0)===" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return r.substring(e.length,r.length)}return null},remove(n,e){this.create(n,"",-1,e)}};var zW={name:"cookie",lookup(n){let{lookupCookie:e}=n;if(e&&typeof document<"u")return D7.read(e)||void 0},cacheUserLanguage(n,e){let{lookupCookie:t,cookieMinutes:i,cookieDomain:r,cookieOptions:a}=e;t&&typeof document<"u"&&D7.create(t,n,i,r,a)}},NW={name:"querystring",lookup(n){let{lookupQuerystring:e}=n,t;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const a=i.substring(1).split("&");for(let l=0;l<a.length;l++){const o=a[l].indexOf("=");o>0&&a[l].substring(0,o)===e&&(t=a[l].substring(o+1))}}return t}},GW={name:"hash",lookup(n){let{lookupHash:e,lookupFromHashIndex:t}=n,i;if(typeof window<"u"){const{hash:r}=window.location;if(r&&r.length>2){const a=r.substring(1);if(e){const l=a.split("&");for(let o=0;o<l.length;o++){const m=l[o].indexOf("=");m>0&&l[o].substring(0,m)===e&&(i=l[o].substring(m+1))}}if(i)return i;if(!i&&t>-1){const l=r.match(/\/([a-zA-Z-]*)/g);return Array.isArray(l)?l[typeof t=="number"?t:0]?.replace("/",""):void 0}}}return i}};let wy=null;const R7=()=>{if(wy!==null)return wy;try{if(wy=typeof window<"u"&&window.localStorage!==null,!wy)return!1;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{wy=!1}return wy};var jW={name:"localStorage",lookup(n){let{lookupLocalStorage:e}=n;if(e&&R7())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupLocalStorage:t}=e;t&&R7()&&window.localStorage.setItem(t,n)}};let Ey=null;const P7=()=>{if(Ey!==null)return Ey;try{if(Ey=typeof window<"u"&&window.sessionStorage!==null,!Ey)return!1;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{Ey=!1}return Ey};var WW={name:"sessionStorage",lookup(n){let{lookupSessionStorage:e}=n;if(e&&P7())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupSessionStorage:t}=e;t&&P7()&&window.sessionStorage.setItem(t,n)}},QW={name:"navigator",lookup(n){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:i,language:r}=navigator;if(t)for(let a=0;a<t.length;a++)e.push(t[a]);i&&e.push(i),r&&e.push(r)}return e.length>0?e:void 0}},YW={name:"htmlTag",lookup(n){let{htmlTag:e}=n,t;const i=e||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(t=i.getAttribute("lang")),t}},qW={name:"path",lookup(n){let{lookupFromPathIndex:e}=n;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?t[typeof e=="number"?e:0]?.replace("/",""):void 0}},HW={name:"subdomain",lookup(n){let{lookupFromSubdomainIndex:e}=n;const t=typeof e=="number"?e+1:1,i=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(i)return i[t]}};let FU=!1;try{document.cookie,FU=!0}catch{}const zU=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];FU||zU.splice(1,1);const VW=()=>({order:zU,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class NU{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=UW(t,this.options||{},VW()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=r=>r.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(zW),this.addDetector(NW),this.addDetector(jW),this.addDetector(WW),this.addDetector(QW),this.addDetector(YW),this.addDetector(qW),this.addDetector(HW),this.addDetector(GW)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(i=>{if(this.detectors[i]){let r=this.detectors[i].lookup(this.options);r&&typeof r=="string"&&(r=[r]),r&&(t=t.concat(r))}}),t=t.filter(i=>i!=null&&!LW(i)).map(i=>this.options.convertDetectedLanguage(i)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(i=>{this.detectors[i]&&this.detectors[i].cacheUserLanguage(e,this.options)}))}}NU.type="languageDetector";var $W=function(e){return{type:"backend",init:function(i,r,a){},read:function(i,r,a){if(typeof e=="function"){if(e.length<3){try{var l=e(i,r);l&&typeof l.then=="function"?l.then(function(o){return a(null,o&&o.default||o)}).catch(a):a(null,l)}catch(o){a(o)}return}e(i,r,a);return}a(null,e&&e[i]&&e[i][r])}}},s4,K7;function ZW(){return K7||(K7=1,s4={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),s4}var XW=ZW();const JW=WA(XW);var eQ=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function U7(n){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=n.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(e.name=t[1],(JW[t[1]]||n.charAt(n.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var i=n.indexOf("-->");return{type:"comment",comment:i!==-1?n.slice(4,i):""}}for(var r=new RegExp(eQ),a=null;(a=r.exec(n))!==null;)if(a[0].trim())if(a[1]){var l=a[1].trim(),o=[l,""];l.indexOf("=")>-1&&(o=l.split("=")),e.attrs[o[0]]=o[1],r.lastIndex--}else a[2]&&(e.attrs[a[2]]=a[3].trim().substring(1,a[3].length-1));return e}var tQ=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,nQ=/^\s*$/,iQ=Object.create(null);function GU(n,e){switch(e.type){case"text":return n+e.content;case"tag":return n+="<"+e.name+(e.attrs?function(t){var i=[];for(var r in t)i.push(r+'="'+t[r]+'"');return i.length?" "+i.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?n:n+e.children.reduce(GU,"")+"</"+e.name+">";case"comment":return n+"<!--"+e.comment+"-->"}}var rQ={parse:function(n,e){e||(e={}),e.components||(e.components=iQ);var t,i=[],r=[],a=-1,l=!1;if(n.indexOf("<")!==0){var o=n.indexOf("<");i.push({type:"text",content:o===-1?n:n.substring(0,o)})}return n.replace(tQ,function(m,C){if(l){if(m!=="</"+t.name+">")return;l=!1}var S,O=m.charAt(1)!=="/",U=m.startsWith("<!--"),K=C+m.length,z=n.charAt(K);if(U){var j=U7(m);return a<0?(i.push(j),i):((S=r[a]).children.push(j),i)}if(O&&(a++,(t=U7(m)).type==="tag"&&e.components[t.name]&&(t.type="component",l=!0),t.voidElement||l||!z||z==="<"||t.children.push({type:"text",content:n.slice(K,n.indexOf("<",K))}),a===0&&i.push(t),(S=r[a-1])&&S.children.push(t),r[a]=t),(!O||t.voidElement)&&(a>-1&&(t.voidElement||t.name===m.slice(2,-1))&&(a--,t=a===-1?i:r[a]),!l&&z!=="<"&&z)){S=a===-1?i:r[a].children;var Q=n.indexOf("<",K),ee=n.slice(K,Q===-1?void 0:Q);nQ.test(ee)&&(ee=" "),(Q>-1&&a+S.length>=0||ee!==" ")&&S.push({type:"text",content:ee})}}),i},stringify:function(n){return n.reduce(function(e,t){return e+GU("",t)},"")}};const _x=(n,e,t,i)=>{const r=[t,{code:e,...i||{}}];if(n?.services?.logger?.forward)return n.services.logger.forward(r,"warn","react-i18next::",!0);wf(r[0])&&(r[0]=`react-i18next:: ${r[0]}`),n?.services?.logger?.warn?n.services.logger.warn(...r):console?.warn&&console.warn(...r)},L7={},c_=(n,e,t,i)=>{wf(t)&&L7[t]||(wf(t)&&(L7[t]=new Date),_x(n,e,t,i))},jU=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},s6=(n,e,t)=>{n.loadNamespaces(e,jU(n,t))},F7=(n,e,t,i)=>{if(wf(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return s6(n,t,i);t.forEach(r=>{n.options.ns.indexOf(r)<0&&n.options.ns.push(r)}),n.loadLanguages(e,jU(n,i))},oQ=(n,e,t={})=>!e.languages||!e.languages.length?(c_(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(i,r)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!r(i.isLanguageChangingTo,n))return!1}}),aQ=n=>n.displayName||n.name||(wf(n)&&n.length>0?n:"Unknown"),wf=n=>typeof n=="string",_1=n=>typeof n=="object"&&n!==null,sQ=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,lQ={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},AQ=n=>lQ[n],uQ=n=>n.replace(sQ,AQ);let l6={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:uQ};const cQ=(n={})=>{l6={...l6,...n}},WU=()=>l6;let QU;const hQ=n=>{QU=n},EB=()=>QU,l4=(n,e)=>{if(!n)return!1;const t=n.props?.children??n.children;return e?t.length>0:!!t},A4=n=>{if(!n)return[];const e=n.props?.children??n.children;return n.props?.i18nIsDynamicList?lv(e):e},dQ=n=>Array.isArray(n)&&n.every(Gt.isValidElement),lv=n=>Array.isArray(n)?n:[n],fQ=(n,e)=>{const t={...e};return t.props=Object.assign(n.props,e.props),t},YU=(n,e,t,i)=>{if(!n)return"";let r="";const a=lv(n),l=e?.transSupportBasicHtmlNodes?e.transKeepBasicHtmlNodesFor??[]:[];return a.forEach((o,m)=>{if(wf(o)){r+=`${o}`;return}if(Gt.isValidElement(o)){const{props:C,type:S}=o,O=Object.keys(C).length,U=l.indexOf(S)>-1,K=C.children;if(!K&&U&&!O){r+=`<${S}/>`;return}if(!K&&(!U||O)||C.i18nIsDynamicList){r+=`<${m}></${m}>`;return}if(U&&O===1&&wf(K)){r+=`<${S}>${K}</${S}>`;return}const z=YU(K,e,t,i);r+=`<${m}>${z}</${m}>`;return}if(o===null){_x(t,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:i});return}if(_1(o)){const{format:C,...S}=o,O=Object.keys(S);if(O.length===1){const U=C?`${O[0]}, ${C}`:O[0];r+=`{{${U}}}`;return}_x(t,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:i,child:o});return}_x(t,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:i,child:o})}),r},mQ=(n,e,t,i,r,a,l)=>{if(t==="")return[];const o=r.transKeepBasicHtmlNodesFor||[],m=t&&new RegExp(o.map(ee=>`<${ee}`).join("|")).test(t);if(!n&&!e&&!m&&!l)return[t];const C=e??{},S=ee=>{lv(ee).forEach(ae=>{wf(ae)||(l4(ae)?S(A4(ae)):_1(ae)&&!Gt.isValidElement(ae)&&Object.assign(C,ae))})};S(n);const O=rQ.parse(`<0>${t}</0>`),U={...C,...a},K=(ee,V,ae)=>{const ne=A4(ee),Z=j(ne,V.children,ae);return dQ(ne)&&Z.length===0||ee.props?.i18nIsDynamicList?ne:Z},z=(ee,V,ae,ne,Z)=>{ee.dummy?(ee.children=V,ae.push(Gt.cloneElement(ee,{key:ne},Z?void 0:V))):ae.push(...Gt.Children.map([ee],oe=>{const W={...oe.props};return delete W.i18nIsDynamicList,Gt.createElement(oe.type,{...W,key:ne,ref:oe.props.ref??oe.ref},Z?null:V)}))},j=(ee,V,ae)=>{const ne=lv(ee);return lv(V).reduce((oe,W,ue)=>{const ge=W.children?.[0]?.content&&i.services.interpolator.interpolate(W.children[0].content,U,i.language);if(W.type==="tag"){let ye=ne[parseInt(W.name,10)];!ye&&e&&(ye=e[W.name]),ae.length===1&&!ye&&(ye=ae[0][W.name]),ye||(ye={});const Me=Object.keys(W.attrs).length!==0?fQ({props:W.attrs},ye):ye,Be=Gt.isValidElement(Me),we=Be&&l4(W,!0)&&!W.voidElement,qe=m&&_1(Me)&&Me.dummy&&!Be,xe=_1(e)&&Object.hasOwnProperty.call(e,W.name);if(wf(Me)){const ze=i.services.interpolator.interpolate(Me,U,i.language);oe.push(ze)}else if(l4(Me)||we){const ze=K(Me,W,ae);z(Me,ze,oe,ue)}else if(qe){const ze=j(ne,W.children,ae);z(Me,ze,oe,ue)}else if(Number.isNaN(parseFloat(W.name)))if(xe){const ze=K(Me,W,ae);z(Me,ze,oe,ue,W.voidElement)}else if(r.transSupportBasicHtmlNodes&&o.indexOf(W.name)>-1)if(W.voidElement)oe.push(Gt.createElement(W.name,{key:`${W.name}-${ue}`}));else{const ze=j(ne,W.children,ae);oe.push(Gt.createElement(W.name,{key:`${W.name}-${ue}`},ze))}else if(W.voidElement)oe.push(`<${W.name} />`);else{const ze=j(ne,W.children,ae);oe.push(`<${W.name}>${ze}</${W.name}>`)}else if(_1(Me)&&!Be){const ze=W.children[0]?ge:null;ze&&oe.push(ze)}else z(Me,ge,oe,ue,W.children.length!==1||!ge)}else if(W.type==="text"){const ye=r.transWrapTextNodes,Me=l?r.unescape(i.services.interpolator.interpolate(W.content,U,i.language)):i.services.interpolator.interpolate(W.content,U,i.language);ye?oe.push(Gt.createElement(ye,{key:`${W.name}-${ue}`},Me)):oe.push(Me)}return oe},[])},Q=j([{dummy:!0,children:n||[]}],O,lv(n||[]));return A4(Q[0])},qU=(n,e,t)=>{const i=n.key||e,r=Gt.cloneElement(n,{key:i});if(!r.props||!r.props.children||t.indexOf(`${e}/>`)<0&&t.indexOf(`${e} />`)<0)return r;function a(){return Gt.createElement(Gt.Fragment,null,r)}return Gt.createElement(a,{key:i})},pQ=(n,e)=>n.map((t,i)=>qU(t,i,e)),gQ=(n,e)=>{const t={};return Object.keys(n).forEach(i=>{Object.assign(t,{[i]:qU(n[i],i,e)})}),t},yQ=(n,e,t,i)=>n?Array.isArray(n)?pQ(n,e):_1(n)?gQ(n,e):(c_(t,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:i}),null):null,vQ=n=>!_1(n)||Array.isArray(n)?!1:Object.keys(n).reduce((e,t)=>e&&Number.isNaN(Number.parseFloat(t)),!0);function CQ({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:a={},values:l,defaults:o,components:m,ns:C,i18n:S,t:O,shouldUnescape:U,...K}){const z=S||EB();if(!z)return c_(z,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:i}),n;const j=O||z.t.bind(z)||(qe=>qe),Q={...WU(),...z.options?.react};let ee=C||j.ns||z.options?.defaultNS;ee=wf(ee)?[ee]:ee||["translation"];const V=YU(n,Q,z,i),ae=o||V||Q.transEmptyNodeValue||i,{hashTransKey:ne}=Q,Z=i||(ne?ne(V||ae):V||ae);z.options?.interpolation?.defaultVariables&&(l=l&&Object.keys(l).length>0?{...l,...z.options.interpolation.defaultVariables}:{...z.options.interpolation.defaultVariables});const oe=l||e!==void 0&&!z.options?.interpolation?.alwaysFormat||!n?a.interpolation:{interpolation:{...a.interpolation,prefix:"#$?",suffix:"?$#"}},W={...a,context:r||a.context,count:e,...l,...oe,defaultValue:ae,ns:ee},ue=Z?j(Z,W):ae,ge=yQ(m,ue,z,i);let ye=ge||n,Me=null;vQ(ge)&&(Me=ge,ye=n);const Be=mQ(ye,Me,ue,z,Q,W,U),we=t??Q.defaultTransParent;return we?Gt.createElement(we,K,Be):Be}const _Q={type:"3rdParty",init(n){cQ(n.options.react),hQ(n)}},HU=Gt.createContext();class bQ{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function O1({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:a={},values:l,defaults:o,components:m,ns:C,i18n:S,t:O,shouldUnescape:U,...K}){const{i18n:z,defaultNS:j}=Gt.useContext(HU)||{},Q=S||z||EB(),ee=O||Q?.t.bind(Q);return CQ({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:a,values:l,defaults:o,components:m,ns:C||ee?.ns||j||Q?.options?.defaultNS,i18n:Q,t:O,shouldUnescape:U,...K})}const xQ=(n,e)=>{const t=Gt.useRef();return Gt.useEffect(()=>{t.current=n},[n,e]),t.current},VU=(n,e,t,i)=>n.getFixedT(e,t,i),MQ=(n,e,t,i)=>Gt.useCallback(VU(n,e,t,i),[n,e,t,i]),SQ=(n,e={})=>{const{i18n:t}=e,{i18n:i,defaultNS:r}=Gt.useContext(HU)||{},a=t||i||EB();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new bQ),!a){c_(a,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const ne=(oe,W)=>wf(W)?W:_1(W)&&wf(W.defaultValue)?W.defaultValue:Array.isArray(oe)?oe[oe.length-1]:oe,Z=[ne,{},!1];return Z.t=ne,Z.i18n={},Z.ready=!1,Z}a.options.react?.wait&&c_(a,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const l={...WU(),...a.options.react,...e},{useSuspense:o,keyPrefix:m}=l;let C=r||a.options?.defaultNS;C=wf(C)?[C]:C||["translation"],a.reportNamespaces.addUsedNamespaces?.(C);const S=(a.isInitialized||a.initializedStoreOnce)&&C.every(ne=>oQ(ne,a,l)),O=MQ(a,e.lng||null,l.nsMode==="fallback"?C:C[0],m),U=()=>O,K=()=>VU(a,e.lng||null,l.nsMode==="fallback"?C:C[0],m),[z,j]=Gt.useState(U);let Q=C.join();e.lng&&(Q=`${e.lng}${Q}`);const ee=xQ(Q),V=Gt.useRef(!0);Gt.useEffect(()=>{const{bindI18n:ne,bindI18nStore:Z}=l;V.current=!0,!S&&!o&&(e.lng?F7(a,e.lng,C,()=>{V.current&&j(K)}):s6(a,C,()=>{V.current&&j(K)})),S&&ee&&ee!==Q&&V.current&&j(K);const oe=()=>{V.current&&j(K)};return ne&&a?.on(ne,oe),Z&&a?.store.on(Z,oe),()=>{V.current=!1,a&&ne&&ne?.split(" ").forEach(W=>a.off(W,oe)),Z&&a&&Z.split(" ").forEach(W=>a.store.off(W,oe))}},[a,Q]),Gt.useEffect(()=>{V.current&&S&&j(U)},[a,m,S]);const ae=[z,a,S];if(ae.t=z,ae.i18n=a,ae.ready=S,S||!S&&!o)return ae;throw new Promise(ne=>{e.lng?F7(a,e.lng,C,()=>ne()):s6(a,C,()=>ne())})},ss=(n,e={})=>function(i){function r({forwardedRef:l,...o}){const[m,C,S]=SQ(n,{...o,keyPrefix:e.keyPrefix}),O={...o,t:m,i18n:C,tReady:S};return e.withRef&&l?O.ref=l:!e.withRef&&l&&(O.forwardedRef=l),Gt.createElement(i,O)}r.displayName=`withI18nextTranslation(${aQ(i)})`,r.WrappedComponent=i;const a=(l,o)=>Gt.createElement(r,Object.assign({},l,{forwardedRef:o}));return e.withRef?Gt.forwardRef(a):r};function dl(){var n="/home/runner/work/maputnik/maputnik/src/i18n.ts",e="529ee327821ff95d86675c5d3e41229f0d9cb0df",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/i18n.ts",statementMap:{0:{start:{line:5,column:34},end:{line:13,column:1}},1:{start:{line:14,column:0},end:{line:40,column:3}},2:{start:{line:16,column:4},end:{line:18,column:5}},3:{start:{line:17,column:6},end:{line:17,column:16}},4:{start:{line:19,column:4},end:{line:19,column:593}},5:{start:{line:19,column:119},end:{line:19,column:158}},6:{start:{line:19,column:198},end:{line:19,column:237}},7:{start:{line:19,column:277},end:{line:19,column:316}},8:{start:{line:19,column:356},end:{line:19,column:395}},9:{start:{line:19,column:435},end:{line:19,column:474}},10:{start:{line:19,column:514},end:{line:19,column:553}},11:{start:{line:35,column:4},end:{line:37,column:5}},12:{start:{line:36,column:6},end:{line:36,column:13}},13:{start:{line:38,column:4},end:{line:38,column:77}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:21},end:{line:15,column:22}},loc:{start:{line:15,column:35},end:{line:20,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:19,column:113},end:{line:19,column:114}},loc:{start:{line:19,column:119},end:{line:19,column:158}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:19,column:192},end:{line:19,column:193}},loc:{start:{line:19,column:198},end:{line:19,column:237}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:271},end:{line:19,column:272}},loc:{start:{line:19,column:277},end:{line:19,column:316}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:19,column:350},end:{line:19,column:351}},loc:{start:{line:19,column:356},end:{line:19,column:395}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:19,column:429},end:{line:19,column:430}},loc:{start:{line:19,column:435},end:{line:19,column:474}},line:19},6:{name:"(anonymous_6)",decl:{start:{line:19,column:508},end:{line:19,column:509}},loc:{start:{line:19,column:514},end:{line:19,column:553}},line:19},7:{name:"(anonymous_7)",decl:{start:{line:34,column:21},end:{line:34,column:22}},loc:{start:{line:34,column:41},end:{line:39,column:3}},line:34}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:35,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:37,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/i18n.ts"],names:[],mappings:"AAAA,MAAA,CAAA,oCAAA,CAAA,IAAA,CAAA,CAAA,CAAA,IAAA,CAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,CAAA,CAAA,MAAA,CAAO,IAAA,CAAA,IAAA,CAAU,CAAA,OAAA,CAAA;AACjB,MAAA,CAAO,QAAA,CAAA,IAAA,CAAc,CAAA,OAAA,CAAA,OAAA,CAAA,gBAAA,CAAA;AACrB,MAAA,CAAO,kBAAA,CAAA,IAAA,CAAwB,CAAA,OAAA,CAAA,SAAA,CAAA,EAAA,CAAA,OAAA,CAAA;AAC/B,MAAA,CAAA,CAAA,CAAS,gBAAA,CAAA,CAAA,CAAA,IAAA,CAAwB,CAAA,KAAA,CAAA,OAAA,CAAA;AAE1B,MAAA,CAAA,KAAA,CAAM,kBAAA,CAAA,CAAA,CAAqB;AAAA,CAAA,CAChC,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,IAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,QAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA;AACR,CAAA;AAEA,IAAA,CACG,GAAA,CAAI,QAAQ,CAAA,CACZ,GAAA;AAAA,CAAA,CACC,kBAAA,CAAmB,CAAC,IAAA,CAAA,CAAc,EAAA,CAAA,CAAA,CAAA,CAAA,CAAe;AAC/C,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,SAAS,CAAA,EAAA,CAAA,CAAA,CAAM;AAEjB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,CAAC,CAAA;AAAA,CAAA,CAAA,CAAA,CACV;AACA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,oCAAA,CAAA,CAAA,0fAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,CAA8B;AAAA,CAAA,CACvC,CAAC;AACH,CAAA,CACC,GAAA,CAAI,gBAAgB,CAAA,CACpB,IAAA,CAAK;AAAA,CAAA,CACJ,aAAA,CAAA,CAAe,MAAA,CAAO,IAAA,CAAK,kBAAkB,CAAA;AAAA,CAAA,CAC7C,YAAA,CAAA,CAAc,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,EAAA,CAAA,IAAA,CAAA,QAAA,CAAA;AAAA,CAAA,CACd,WAAA,CAAA,CAAa,KAAA;AAAA,CAAA,CACb,aAAA,CAAA,CAAe;AAAA,CAAA,CAAA,CAAA,CACb,WAAA,CAAA,CAAa;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACf,CAAA;AAAA,CAAA,CACA,WAAA,CAAA,CAAa,IAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,iBAAA,CAAA,EAAA,CAAA;AAAA,CAAA,CACb,WAAA,CAAA,CAAa,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,QAAA,CAAA,EAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,GAAA,CAAA,OAAA,CAAA,QAAA,CAAA,EAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACb,iBAAA,CAAA,CAAmB,CAAC,IAAA,CAAA,CAAM,GAAA,CAAA,CAAK,GAAA,CAAA,CAAA,CAAA,CAAA,CAAQ;AACrC,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,IAAA,CAAK,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAA,EAAA,CAAA,CAAA,CAAM;AAAE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA;AAAA,CAAA,CAAA,CAAA,CAAQ;AAChC,CAAA,CAAA,CAAA,CAAA,OAAA,CAAQ,IAAA,CAAK,4BAA4B,GAAG,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,CAAA,CAAS,KAAK,IAAA,CAAK,CAAA,CAAA,CAAA,CAAI,CAAC,CAAA,CAAA,CAAG,CAAA;AAAA,CAAA,CACzE;AACF,CAAC,CAAA;AAEH,MAAA,CAAA,OAAA,CAAe,IAAA;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"529ee327821ff95d86675c5d3e41229f0d9cb0df"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return dl=function(){return l},l}dl();const $U=(dl().s[0]++,{de:"Deutsch",en:"English",fr:"Français",he:"עברית",it:"Italiano",ja:"日本語",zh:"简体中文"});dl().s[1]++;mh.use(NU).use($W((n,e)=>(dl().f[0]++,dl().s[2]++,n==="en"?(dl().b[0][0]++,dl().s[3]++,{}):(dl().b[0][1]++,dl().s[4]++,fW(Object.assign({"./locales/de/translation.json":()=>(dl().f[1]++,dl().s[5]++,My(()=>import("./translation-BpImGeKa.js"),[])),"./locales/fr/translation.json":()=>(dl().f[2]++,dl().s[6]++,My(()=>import("./translation-BeK-Jb4t.js"),[])),"./locales/he/translation.json":()=>(dl().f[3]++,dl().s[7]++,My(()=>import("./translation-DiMOqjvu.js"),[])),"./locales/it/translation.json":()=>(dl().f[4]++,dl().s[8]++,My(()=>import("./translation-D28I5-O8.js"),[])),"./locales/ja/translation.json":()=>(dl().f[5]++,dl().s[9]++,My(()=>import("./translation-lWWY9AxD.js"),[])),"./locales/zh/translation.json":()=>(dl().f[6]++,dl().s[10]++,My(()=>import("./translation-C5L25zYj.js"),[]))}),`./locales/${n}/${e}.json`,4))))).use(_Q).init({supportedLngs:Object.keys($U),keySeparator:!1,nsSeparator:!1,interpolation:{escapeValue:!1},saveMissing:!0,fallbackLng:!1,missingKeyHandler:(n,e,t)=>{if(dl().f[7]++,dl().s[11]++,n[0]==="en"){dl().b[1][0]++,dl().s[12]++;return}else dl().b[1][1]++;dl().s[13]++,console.warn(`Missing translation for "${t}" in "${n.join(", ")}"`)}});var wC={exports:{}};wC.exports;var z7;function wQ(){return z7||(z7=1,function(n,e){var t=200,i="__lodash_hash_undefined__",r=9007199254740991,a="[object Arguments]",l="[object Array]",o="[object Boolean]",m="[object Date]",C="[object Error]",S="[object Function]",O="[object GeneratorFunction]",U="[object Map]",K="[object Number]",z="[object Object]",j="[object Promise]",Q="[object RegExp]",ee="[object Set]",V="[object String]",ae="[object Symbol]",ne="[object WeakMap]",Z="[object ArrayBuffer]",oe="[object DataView]",W="[object Float32Array]",ue="[object Float64Array]",ge="[object Int8Array]",ye="[object Int16Array]",Me="[object Int32Array]",Be="[object Uint8Array]",we="[object Uint8ClampedArray]",qe="[object Uint16Array]",xe="[object Uint32Array]",ze=/[\\^$.*+?()[\]{}|]/g,ot=/\w*$/,yt=/^\[object .+?Constructor\]$/,nt=/^(?:0|[1-9]\d*)$/,be={};be[a]=be[l]=be[Z]=be[oe]=be[o]=be[m]=be[W]=be[ue]=be[ge]=be[ye]=be[Me]=be[U]=be[K]=be[z]=be[Q]=be[ee]=be[V]=be[ae]=be[Be]=be[we]=be[qe]=be[xe]=!0,be[C]=be[S]=be[ne]=!1;var Ne=typeof window=="object"&&window&&window.Object===Object&&window,tt=typeof self=="object"&&self&&self.Object===Object&&self,lt=Ne||tt||Function("return this")(),It=e&&!e.nodeType&&e,pt=It&&!0&&n&&!n.nodeType&&n,St=pt&&pt.exports===It;function Rt(te,Oe){return te.set(Oe[0],Oe[1]),te}function Le(te,Oe){return te.add(Oe),te}function Pe(te,Oe){for(var st=-1,jt=te?te.length:0;++st<jt&&Oe(te[st],st,te)!==!1;);return te}function Re(te,Oe){for(var st=-1,jt=Oe.length,Si=te.length;++st<jt;)te[Si+st]=Oe[st];return te}function He(te,Oe,st,jt){for(var Si=-1,Xn=te?te.length:0;++Si<Xn;)st=Oe(st,te[Si],Si,te);return st}function bt(te,Oe){for(var st=-1,jt=Array(te);++st<te;)jt[st]=Oe(st);return jt}function vt(te,Oe){return te?.[Oe]}function Ot(te){var Oe=!1;if(te!=null&&typeof te.toString!="function")try{Oe=!!(te+"")}catch{}return Oe}function qt(te){var Oe=-1,st=Array(te.size);return te.forEach(function(jt,Si){st[++Oe]=[Si,jt]}),st}function Kt(te,Oe){return function(st){return te(Oe(st))}}function on(te){var Oe=-1,st=Array(te.size);return te.forEach(function(jt){st[++Oe]=jt}),st}var Jn=Array.prototype,Wt=Function.prototype,$n=Object.prototype,On=lt["__core-js_shared__"],Bn=function(){var te=/[^.]+$/.exec(On&&On.keys&&On.keys.IE_PROTO||"");return te?"Symbol(src)_1."+te:""}(),In=Wt.toString,Bi=$n.hasOwnProperty,ei=$n.toString,Kn=RegExp("^"+In.call(Bi).replace(ze,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ge=St?lt.Buffer:void 0,de=lt.Symbol,re=lt.Uint8Array,le=Kt(Object.getPrototypeOf,Object),me=Object.create,Te=$n.propertyIsEnumerable,We=Jn.splice,dt=Object.getOwnPropertySymbols,Ye=Ge?Ge.isBuffer:void 0,De=Kt(Object.keys,Object),Ze=$o(lt,"DataView"),g=$o(lt,"Map"),gt=$o(lt,"Promise"),ht=$o(lt,"Set"),kt=$o(lt,"WeakMap"),it=$o(Object,"create"),en=No(Ze),Dn=No(g),Mn=No(gt),ii=No(ht),Wn=No(kt),qi=de?de.prototype:void 0,er=qi?qi.valueOf:void 0;function wi(te){var Oe=-1,st=te?te.length:0;for(this.clear();++Oe<st;){var jt=te[Oe];this.set(jt[0],jt[1])}}function hi(){this.__data__=it?it(null):{}}function ti(te){return this.has(te)&&delete this.__data__[te]}function Wi(te){var Oe=this.__data__;if(it){var st=Oe[te];return st===i?void 0:st}return Bi.call(Oe,te)?Oe[te]:void 0}function Sn(te){var Oe=this.__data__;return it?Oe[te]!==void 0:Bi.call(Oe,te)}function lo(te,Oe){var st=this.__data__;return st[te]=it&&Oe===void 0?i:Oe,this}wi.prototype.clear=hi,wi.prototype.delete=ti,wi.prototype.get=Wi,wi.prototype.has=Sn,wi.prototype.set=lo;function Hi(te){var Oe=-1,st=te?te.length:0;for(this.clear();++Oe<st;){var jt=te[Oe];this.set(jt[0],jt[1])}}function pa(){this.__data__=[]}function To(te){var Oe=this.__data__,st=ls(Oe,te);if(st<0)return!1;var jt=Oe.length-1;return st==jt?Oe.pop():We.call(Oe,st,1),!0}function Zn(te){var Oe=this.__data__,st=ls(Oe,te);return st<0?void 0:Oe[st][1]}function lr(te){return ls(this.__data__,te)>-1}function zi(te,Oe){var st=this.__data__,jt=ls(st,te);return jt<0?st.push([te,Oe]):st[jt][1]=Oe,this}Hi.prototype.clear=pa,Hi.prototype.delete=To,Hi.prototype.get=Zn,Hi.prototype.has=lr,Hi.prototype.set=zi;function vr(te){var Oe=-1,st=te?te.length:0;for(this.clear();++Oe<st;){var jt=te[Oe];this.set(jt[0],jt[1])}}function La(){this.__data__={hash:new wi,map:new(g||Hi),string:new wi}}function Ir(te){return Qs(this,te).delete(te)}function Ni(te){return Qs(this,te).get(te)}function gl(te){return Qs(this,te).has(te)}function Ta(te,Oe){return Qs(this,te).set(te,Oe),this}vr.prototype.clear=La,vr.prototype.delete=Ir,vr.prototype.get=Ni,vr.prototype.has=gl,vr.prototype.set=Ta;function So(te){this.__data__=new Hi(te)}function $a(){this.__data__=new Hi}function Ol(te){return this.__data__.delete(te)}function Ao(te){return this.__data__.get(te)}function QA(te){return this.__data__.has(te)}function ka(te,Oe){var st=this.__data__;if(st instanceof Hi){var jt=st.__data__;if(!g||jt.length<t-1)return jt.push([te,Oe]),this;st=this.__data__=new vr(jt)}return st.set(te,Oe),this}So.prototype.clear=$a,So.prototype.delete=Ol,So.prototype.get=Ao,So.prototype.has=QA,So.prototype.set=ka;function Vi(te,Oe){var st=oa(te)||Sa(te)?bt(te.length,String):[],jt=st.length,Si=!!jt;for(var Xn in te)Bi.call(te,Xn)&&!(Si&&(Xn=="length"||bA(Xn,jt)))&&st.push(Xn);return st}function xi(te,Oe,st){var jt=te[Oe];(!(Bi.call(te,Oe)&&Fa(jt,st))||st===void 0&&!(Oe in te))&&(te[Oe]=st)}function ls(te,Oe){for(var st=te.length;st--;)if(Fa(te[st][0],Oe))return st;return-1}function Ma(te,Oe){return te&&yl(Oe,Zi(Oe),te)}function Vo(te,Oe,st,jt,Si,Xn,$i){var or;if(jt&&(or=Xn?jt(te,Si,Xn,$i):jt(te)),or!==void 0)return or;if(!Dr(te))return te;var Di=oa(te);if(Di){if(or=Kl(te),!Oe)return _A(te,or)}else{var Xi=dr(te),eo=Xi==S||Xi==O;if(za(te))return si(te,Oe);if(Xi==z||Xi==a||eo&&!Xn){if(Ot(te))return Xn?te:{};if(or=ga(eo?{}:te),!Oe)return Ss(te,Ma(or,te))}else{if(!be[Xi])return Xn?te:{};or=Ul(te,Xi,Vo,Oe)}}$i||($i=new So);var uo=$i.get(te);if(uo)return uo;if($i.set(te,or),!Di)var ur=st?bc(te):Zi(te);return Pe(ur||te,function(pr,co){ur&&(co=pr,pr=te[co]),xi(or,co,Vo(pr,Oe,st,jt,co,te,$i))}),or}function $e(te){return Dr(te)?me(te):{}}function Et(te,Oe,st){var jt=Oe(te);return oa(te)?jt:Re(jt,st(te))}function xn(te){return ei.call(te)}function jn(te){if(!Dr(te)||iA(te))return!1;var Oe=Za(te)||Ot(te)?Kn:yt;return Oe.test(No(te))}function rn(te){if(!cu(te))return De(te);var Oe=[];for(var st in Object(te))Bi.call(te,st)&&st!="constructor"&&Oe.push(st);return Oe}function si(te,Oe){if(Oe)return te.slice();var st=new te.constructor(te.length);return te.copy(st),st}function Jr(te){var Oe=new te.constructor(te.byteLength);return new re(Oe).set(new re(te)),Oe}function wo(te,Oe){var st=Oe?Jr(te.buffer):te.buffer;return new te.constructor(st,te.byteOffset,te.byteLength)}function As(te,Oe,st){var jt=Oe?st(qt(te),!0):qt(te);return He(jt,Rt,new te.constructor)}function Us(te){var Oe=new te.constructor(te.source,ot.exec(te));return Oe.lastIndex=te.lastIndex,Oe}function YA(te,Oe,st){var jt=Oe?st(on(te),!0):on(te);return He(jt,Le,new te.constructor)}function Qi(te){return er?Object(er.call(te)):{}}function Du(te,Oe){var st=Oe?Jr(te.buffer):te.buffer;return new te.constructor(st,te.byteOffset,te.length)}function _A(te,Oe){var st=-1,jt=te.length;for(Oe||(Oe=Array(jt));++st<jt;)Oe[st]=te[st];return Oe}function yl(te,Oe,st,jt){st||(st={});for(var Si=-1,Xn=Oe.length;++Si<Xn;){var $i=Oe[Si],or=void 0;xi(st,$i,or===void 0?te[$i]:or)}return st}function Ss(te,Oe){return yl(te,ko(te),Oe)}function bc(te){return Et(te,Zi,ko)}function Qs(te,Oe){var st=te.__data__;return br(Oe)?st[typeof Oe=="string"?"string":"hash"]:st.map}function $o(te,Oe){var st=vt(te,Oe);return jn(st)?st:void 0}var ko=dt?Kt(dt,Object):Mi,dr=xn;(Ze&&dr(new Ze(new ArrayBuffer(1)))!=oe||g&&dr(new g)!=U||gt&&dr(gt.resolve())!=j||ht&&dr(new ht)!=ee||kt&&dr(new kt)!=ne)&&(dr=function(te){var Oe=ei.call(te),st=Oe==z?te.constructor:void 0,jt=st?No(st):void 0;if(jt)switch(jt){case en:return oe;case Dn:return U;case Mn:return j;case ii:return ee;case Wn:return ne}return Oe});function Kl(te){var Oe=te.length,st=te.constructor(Oe);return Oe&&typeof te[0]=="string"&&Bi.call(te,"index")&&(st.index=te.index,st.input=te.input),st}function ga(te){return typeof te.constructor=="function"&&!cu(te)?$e(le(te)):{}}function Ul(te,Oe,st,jt){var Si=te.constructor;switch(Oe){case Z:return Jr(te);case o:case m:return new Si(+te);case oe:return wo(te,jt);case W:case ue:case ge:case ye:case Me:case Be:case we:case qe:case xe:return Du(te,jt);case U:return As(te,jt,st);case K:case V:return new Si(te);case Q:return Us(te);case ee:return YA(te,jt,st);case ae:return Qi(te)}}function bA(te,Oe){return Oe=Oe??r,!!Oe&&(typeof te=="number"||nt.test(te))&&te>-1&&te%1==0&&te<Oe}function br(te){var Oe=typeof te;return Oe=="string"||Oe=="number"||Oe=="symbol"||Oe=="boolean"?te!=="__proto__":te===null}function iA(te){return!!Bn&&Bn in te}function cu(te){var Oe=te&&te.constructor,st=typeof Oe=="function"&&Oe.prototype||$n;return te===st}function No(te){if(te!=null){try{return In.call(te)}catch{}try{return te+""}catch{}}return""}function Eo(te){return Vo(te,!0,!0)}function Fa(te,Oe){return te===Oe||te!==te&&Oe!==Oe}function Sa(te){return rA(te)&&Bi.call(te,"callee")&&(!Te.call(te,"callee")||ei.call(te)==a)}var oa=Array.isArray;function kr(te){return te!=null&&ya(te.length)&&!Za(te)}function rA(te){return vl(te)&&kr(te)}var za=Ye||Qr;function Za(te){var Oe=Dr(te)?ei.call(te):"";return Oe==S||Oe==O}function ya(te){return typeof te=="number"&&te>-1&&te%1==0&&te<=r}function Dr(te){var Oe=typeof te;return!!te&&(Oe=="object"||Oe=="function")}function vl(te){return!!te&&typeof te=="object"}function Zi(te){return kr(te)?Vi(te):rn(te)}function Mi(){return[]}function Qr(){return!1}n.exports=Eo}(wC,wC.exports)),wC.exports}var EQ=wQ();const N7=WA(EQ);var u4,G7;function BQ(){if(G7)return u4;G7=1;var n=NaN,e="[object Symbol]",t=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,a=/^0o[0-7]+$/i,l=parseInt,o=Object.prototype,m=o.toString;function C(j,Q,ee){return j===j&&(ee!==void 0&&(j=j<=ee?j:ee),Q!==void 0&&(j=j>=Q?j:Q)),j}function S(j){var Q=typeof j;return!!j&&(Q=="object"||Q=="function")}function O(j){return!!j&&typeof j=="object"}function U(j){return typeof j=="symbol"||O(j)&&m.call(j)==e}function K(j){if(typeof j=="number")return j;if(U(j))return n;if(S(j)){var Q=typeof j.valueOf=="function"?j.valueOf():j;j=S(Q)?Q+"":Q}if(typeof j!="string")return j===0?j:+j;j=j.replace(t,"");var ee=r.test(j);return ee||a.test(j)?l(j.slice(2),ee?2:8):i.test(j)?n:+j}function z(j,Q,ee){return ee===void 0&&(ee=Q,Q=void 0),ee!==void 0&&(ee=K(ee),ee=ee===ee?ee:0),Q!==void 0&&(Q=K(Q),Q=Q===Q?Q:0),C(K(j),Q,ee)}return u4=z,u4}var OQ=BQ();const j7=WA(OQ);var c4={},dC={},W7;function IQ(){if(W7)return dC;W7=1,dC.byteLength=o,dC.toByteArray=C,dC.fromByteArray=U;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,a=i.length;r<a;++r)n[r]=i[r],e[i.charCodeAt(r)]=r;e[45]=62,e[95]=63;function l(K){var z=K.length;if(z%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var j=K.indexOf("=");j===-1&&(j=z);var Q=j===z?0:4-j%4;return[j,Q]}function o(K){var z=l(K),j=z[0],Q=z[1];return(j+Q)*3/4-Q}function m(K,z,j){return(z+j)*3/4-j}function C(K){var z,j=l(K),Q=j[0],ee=j[1],V=new t(m(K,Q,ee)),ae=0,ne=ee>0?Q-4:Q,Z;for(Z=0;Z<ne;Z+=4)z=e[K.charCodeAt(Z)]<<18|e[K.charCodeAt(Z+1)]<<12|e[K.charCodeAt(Z+2)]<<6|e[K.charCodeAt(Z+3)],V[ae++]=z>>16&255,V[ae++]=z>>8&255,V[ae++]=z&255;return ee===2&&(z=e[K.charCodeAt(Z)]<<2|e[K.charCodeAt(Z+1)]>>4,V[ae++]=z&255),ee===1&&(z=e[K.charCodeAt(Z)]<<10|e[K.charCodeAt(Z+1)]<<4|e[K.charCodeAt(Z+2)]>>2,V[ae++]=z>>8&255,V[ae++]=z&255),V}function S(K){return n[K>>18&63]+n[K>>12&63]+n[K>>6&63]+n[K&63]}function O(K,z,j){for(var Q,ee=[],V=z;V<j;V+=3)Q=(K[V]<<16&16711680)+(K[V+1]<<8&65280)+(K[V+2]&255),ee.push(S(Q));return ee.join("")}function U(K){for(var z,j=K.length,Q=j%3,ee=[],V=16383,ae=0,ne=j-Q;ae<ne;ae+=V)ee.push(O(K,ae,ae+V>ne?ne:ae+V));return Q===1?(z=K[j-1],ee.push(n[z>>2]+n[z<<4&63]+"==")):Q===2&&(z=(K[j-2]<<8)+K[j-1],ee.push(n[z>>10]+n[z>>4&63]+n[z<<2&63]+"=")),ee.join("")}return dC}var Tb={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Q7;function TQ(){return Q7||(Q7=1,Tb.read=function(n,e,t,i,r){var a,l,o=r*8-i-1,m=(1<<o)-1,C=m>>1,S=-7,O=t?r-1:0,U=t?-1:1,K=n[e+O];for(O+=U,a=K&(1<<-S)-1,K>>=-S,S+=o;S>0;a=a*256+n[e+O],O+=U,S-=8);for(l=a&(1<<-S)-1,a>>=-S,S+=i;S>0;l=l*256+n[e+O],O+=U,S-=8);if(a===0)a=1-C;else{if(a===m)return l?NaN:(K?-1:1)*(1/0);l=l+Math.pow(2,i),a=a-C}return(K?-1:1)*l*Math.pow(2,a-i)},Tb.write=function(n,e,t,i,r,a){var l,o,m,C=a*8-r-1,S=(1<<C)-1,O=S>>1,U=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,K=i?0:a-1,z=i?1:-1,j=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,l=S):(l=Math.floor(Math.log(e)/Math.LN2),e*(m=Math.pow(2,-l))<1&&(l--,m*=2),l+O>=1?e+=U/m:e+=U*Math.pow(2,1-O),e*m>=2&&(l++,m/=2),l+O>=S?(o=0,l=S):l+O>=1?(o=(e*m-1)*Math.pow(2,r),l=l+O):(o=e*Math.pow(2,O-1)*Math.pow(2,r),l=0));r>=8;n[t+K]=o&255,K+=z,o/=256,r-=8);for(l=l<<r|o,C+=r;C>0;n[t+K]=l&255,K+=z,l/=256,C-=8);n[t+K-z]|=j*128}),Tb}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Y7;function kQ(){return Y7||(Y7=1,function(n){const e=IQ(),t=TQ(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=o,n.SlowBuffer=V,n.INSPECT_MAX_BYTES=50;const r=2147483647;n.kMaxLength=r,o.TYPED_ARRAY_SUPPORT=a(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const Ge=new Uint8Array(1),de={foo:function(){return 42}};return Object.setPrototypeOf(de,Uint8Array.prototype),Object.setPrototypeOf(Ge,de),Ge.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function l(Ge){if(Ge>r)throw new RangeError('The value "'+Ge+'" is invalid for option "size"');const de=new Uint8Array(Ge);return Object.setPrototypeOf(de,o.prototype),de}function o(Ge,de,re){if(typeof Ge=="number"){if(typeof de=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return O(Ge)}return m(Ge,de,re)}o.poolSize=8192;function m(Ge,de,re){if(typeof Ge=="string")return U(Ge,de);if(ArrayBuffer.isView(Ge))return z(Ge);if(Ge==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ge);if(Bn(Ge,ArrayBuffer)||Ge&&Bn(Ge.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Bn(Ge,SharedArrayBuffer)||Ge&&Bn(Ge.buffer,SharedArrayBuffer)))return j(Ge,de,re);if(typeof Ge=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const le=Ge.valueOf&&Ge.valueOf();if(le!=null&&le!==Ge)return o.from(le,de,re);const me=Q(Ge);if(me)return me;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Ge[Symbol.toPrimitive]=="function")return o.from(Ge[Symbol.toPrimitive]("string"),de,re);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ge)}o.from=function(Ge,de,re){return m(Ge,de,re)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function C(Ge){if(typeof Ge!="number")throw new TypeError('"size" argument must be of type number');if(Ge<0)throw new RangeError('The value "'+Ge+'" is invalid for option "size"')}function S(Ge,de,re){return C(Ge),Ge<=0?l(Ge):de!==void 0?typeof re=="string"?l(Ge).fill(de,re):l(Ge).fill(de):l(Ge)}o.alloc=function(Ge,de,re){return S(Ge,de,re)};function O(Ge){return C(Ge),l(Ge<0?0:ee(Ge)|0)}o.allocUnsafe=function(Ge){return O(Ge)},o.allocUnsafeSlow=function(Ge){return O(Ge)};function U(Ge,de){if((typeof de!="string"||de==="")&&(de="utf8"),!o.isEncoding(de))throw new TypeError("Unknown encoding: "+de);const re=ae(Ge,de)|0;let le=l(re);const me=le.write(Ge,de);return me!==re&&(le=le.slice(0,me)),le}function K(Ge){const de=Ge.length<0?0:ee(Ge.length)|0,re=l(de);for(let le=0;le<de;le+=1)re[le]=Ge[le]&255;return re}function z(Ge){if(Bn(Ge,Uint8Array)){const de=new Uint8Array(Ge);return j(de.buffer,de.byteOffset,de.byteLength)}return K(Ge)}function j(Ge,de,re){if(de<0||Ge.byteLength<de)throw new RangeError('"offset" is outside of buffer bounds');if(Ge.byteLength<de+(re||0))throw new RangeError('"length" is outside of buffer bounds');let le;return de===void 0&&re===void 0?le=new Uint8Array(Ge):re===void 0?le=new Uint8Array(Ge,de):le=new Uint8Array(Ge,de,re),Object.setPrototypeOf(le,o.prototype),le}function Q(Ge){if(o.isBuffer(Ge)){const de=ee(Ge.length)|0,re=l(de);return re.length===0||Ge.copy(re,0,0,de),re}if(Ge.length!==void 0)return typeof Ge.length!="number"||In(Ge.length)?l(0):K(Ge);if(Ge.type==="Buffer"&&Array.isArray(Ge.data))return K(Ge.data)}function ee(Ge){if(Ge>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return Ge|0}function V(Ge){return+Ge!=Ge&&(Ge=0),o.alloc(+Ge)}o.isBuffer=function(de){return de!=null&&de._isBuffer===!0&&de!==o.prototype},o.compare=function(de,re){if(Bn(de,Uint8Array)&&(de=o.from(de,de.offset,de.byteLength)),Bn(re,Uint8Array)&&(re=o.from(re,re.offset,re.byteLength)),!o.isBuffer(de)||!o.isBuffer(re))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(de===re)return 0;let le=de.length,me=re.length;for(let Te=0,We=Math.min(le,me);Te<We;++Te)if(de[Te]!==re[Te]){le=de[Te],me=re[Te];break}return le<me?-1:me<le?1:0},o.isEncoding=function(de){switch(String(de).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(de,re){if(!Array.isArray(de))throw new TypeError('"list" argument must be an Array of Buffers');if(de.length===0)return o.alloc(0);let le;if(re===void 0)for(re=0,le=0;le<de.length;++le)re+=de[le].length;const me=o.allocUnsafe(re);let Te=0;for(le=0;le<de.length;++le){let We=de[le];if(Bn(We,Uint8Array))Te+We.length>me.length?(o.isBuffer(We)||(We=o.from(We)),We.copy(me,Te)):Uint8Array.prototype.set.call(me,We,Te);else if(o.isBuffer(We))We.copy(me,Te);else throw new TypeError('"list" argument must be an Array of Buffers');Te+=We.length}return me};function ae(Ge,de){if(o.isBuffer(Ge))return Ge.length;if(ArrayBuffer.isView(Ge)||Bn(Ge,ArrayBuffer))return Ge.byteLength;if(typeof Ge!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Ge);const re=Ge.length,le=arguments.length>2&&arguments[2]===!0;if(!le&&re===0)return 0;let me=!1;for(;;)switch(de){case"ascii":case"latin1":case"binary":return re;case"utf8":case"utf-8":return on(Ge).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re*2;case"hex":return re>>>1;case"base64":return $n(Ge).length;default:if(me)return le?-1:on(Ge).length;de=(""+de).toLowerCase(),me=!0}}o.byteLength=ae;function ne(Ge,de,re){let le=!1;if((de===void 0||de<0)&&(de=0),de>this.length||((re===void 0||re>this.length)&&(re=this.length),re<=0)||(re>>>=0,de>>>=0,re<=de))return"";for(Ge||(Ge="utf8");;)switch(Ge){case"hex":return nt(this,de,re);case"utf8":case"utf-8":return qe(this,de,re);case"ascii":return ot(this,de,re);case"latin1":case"binary":return yt(this,de,re);case"base64":return we(this,de,re);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,de,re);default:if(le)throw new TypeError("Unknown encoding: "+Ge);Ge=(Ge+"").toLowerCase(),le=!0}}o.prototype._isBuffer=!0;function Z(Ge,de,re){const le=Ge[de];Ge[de]=Ge[re],Ge[re]=le}o.prototype.swap16=function(){const de=this.length;if(de%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let re=0;re<de;re+=2)Z(this,re,re+1);return this},o.prototype.swap32=function(){const de=this.length;if(de%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let re=0;re<de;re+=4)Z(this,re,re+3),Z(this,re+1,re+2);return this},o.prototype.swap64=function(){const de=this.length;if(de%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let re=0;re<de;re+=8)Z(this,re,re+7),Z(this,re+1,re+6),Z(this,re+2,re+5),Z(this,re+3,re+4);return this},o.prototype.toString=function(){const de=this.length;return de===0?"":arguments.length===0?qe(this,0,de):ne.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(de){if(!o.isBuffer(de))throw new TypeError("Argument must be a Buffer");return this===de?!0:o.compare(this,de)===0},o.prototype.inspect=function(){let de="";const re=n.INSPECT_MAX_BYTES;return de=this.toString("hex",0,re).replace(/(.{2})/g,"$1 ").trim(),this.length>re&&(de+=" ... "),"<Buffer "+de+">"},i&&(o.prototype[i]=o.prototype.inspect),o.prototype.compare=function(de,re,le,me,Te){if(Bn(de,Uint8Array)&&(de=o.from(de,de.offset,de.byteLength)),!o.isBuffer(de))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof de);if(re===void 0&&(re=0),le===void 0&&(le=de?de.length:0),me===void 0&&(me=0),Te===void 0&&(Te=this.length),re<0||le>de.length||me<0||Te>this.length)throw new RangeError("out of range index");if(me>=Te&&re>=le)return 0;if(me>=Te)return-1;if(re>=le)return 1;if(re>>>=0,le>>>=0,me>>>=0,Te>>>=0,this===de)return 0;let We=Te-me,dt=le-re;const Ye=Math.min(We,dt),De=this.slice(me,Te),Ze=de.slice(re,le);for(let g=0;g<Ye;++g)if(De[g]!==Ze[g]){We=De[g],dt=Ze[g];break}return We<dt?-1:dt<We?1:0};function oe(Ge,de,re,le,me){if(Ge.length===0)return-1;if(typeof re=="string"?(le=re,re=0):re>2147483647?re=2147483647:re<-2147483648&&(re=-2147483648),re=+re,In(re)&&(re=me?0:Ge.length-1),re<0&&(re=Ge.length+re),re>=Ge.length){if(me)return-1;re=Ge.length-1}else if(re<0)if(me)re=0;else return-1;if(typeof de=="string"&&(de=o.from(de,le)),o.isBuffer(de))return de.length===0?-1:W(Ge,de,re,le,me);if(typeof de=="number")return de=de&255,typeof Uint8Array.prototype.indexOf=="function"?me?Uint8Array.prototype.indexOf.call(Ge,de,re):Uint8Array.prototype.lastIndexOf.call(Ge,de,re):W(Ge,[de],re,le,me);throw new TypeError("val must be string, number or Buffer")}function W(Ge,de,re,le,me){let Te=1,We=Ge.length,dt=de.length;if(le!==void 0&&(le=String(le).toLowerCase(),le==="ucs2"||le==="ucs-2"||le==="utf16le"||le==="utf-16le")){if(Ge.length<2||de.length<2)return-1;Te=2,We/=2,dt/=2,re/=2}function Ye(Ze,g){return Te===1?Ze[g]:Ze.readUInt16BE(g*Te)}let De;if(me){let Ze=-1;for(De=re;De<We;De++)if(Ye(Ge,De)===Ye(de,Ze===-1?0:De-Ze)){if(Ze===-1&&(Ze=De),De-Ze+1===dt)return Ze*Te}else Ze!==-1&&(De-=De-Ze),Ze=-1}else for(re+dt>We&&(re=We-dt),De=re;De>=0;De--){let Ze=!0;for(let g=0;g<dt;g++)if(Ye(Ge,De+g)!==Ye(de,g)){Ze=!1;break}if(Ze)return De}return-1}o.prototype.includes=function(de,re,le){return this.indexOf(de,re,le)!==-1},o.prototype.indexOf=function(de,re,le){return oe(this,de,re,le,!0)},o.prototype.lastIndexOf=function(de,re,le){return oe(this,de,re,le,!1)};function ue(Ge,de,re,le){re=Number(re)||0;const me=Ge.length-re;le?(le=Number(le),le>me&&(le=me)):le=me;const Te=de.length;le>Te/2&&(le=Te/2);let We;for(We=0;We<le;++We){const dt=parseInt(de.substr(We*2,2),16);if(In(dt))return We;Ge[re+We]=dt}return We}function ge(Ge,de,re,le){return On(on(de,Ge.length-re),Ge,re,le)}function ye(Ge,de,re,le){return On(Jn(de),Ge,re,le)}function Me(Ge,de,re,le){return On($n(de),Ge,re,le)}function Be(Ge,de,re,le){return On(Wt(de,Ge.length-re),Ge,re,le)}o.prototype.write=function(de,re,le,me){if(re===void 0)me="utf8",le=this.length,re=0;else if(le===void 0&&typeof re=="string")me=re,le=this.length,re=0;else if(isFinite(re))re=re>>>0,isFinite(le)?(le=le>>>0,me===void 0&&(me="utf8")):(me=le,le=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Te=this.length-re;if((le===void 0||le>Te)&&(le=Te),de.length>0&&(le<0||re<0)||re>this.length)throw new RangeError("Attempt to write outside buffer bounds");me||(me="utf8");let We=!1;for(;;)switch(me){case"hex":return ue(this,de,re,le);case"utf8":case"utf-8":return ge(this,de,re,le);case"ascii":case"latin1":case"binary":return ye(this,de,re,le);case"base64":return Me(this,de,re,le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Be(this,de,re,le);default:if(We)throw new TypeError("Unknown encoding: "+me);me=(""+me).toLowerCase(),We=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function we(Ge,de,re){return de===0&&re===Ge.length?e.fromByteArray(Ge):e.fromByteArray(Ge.slice(de,re))}function qe(Ge,de,re){re=Math.min(Ge.length,re);const le=[];let me=de;for(;me<re;){const Te=Ge[me];let We=null,dt=Te>239?4:Te>223?3:Te>191?2:1;if(me+dt<=re){let Ye,De,Ze,g;switch(dt){case 1:Te<128&&(We=Te);break;case 2:Ye=Ge[me+1],(Ye&192)===128&&(g=(Te&31)<<6|Ye&63,g>127&&(We=g));break;case 3:Ye=Ge[me+1],De=Ge[me+2],(Ye&192)===128&&(De&192)===128&&(g=(Te&15)<<12|(Ye&63)<<6|De&63,g>2047&&(g<55296||g>57343)&&(We=g));break;case 4:Ye=Ge[me+1],De=Ge[me+2],Ze=Ge[me+3],(Ye&192)===128&&(De&192)===128&&(Ze&192)===128&&(g=(Te&15)<<18|(Ye&63)<<12|(De&63)<<6|Ze&63,g>65535&&g<1114112&&(We=g))}}We===null?(We=65533,dt=1):We>65535&&(We-=65536,le.push(We>>>10&1023|55296),We=56320|We&1023),le.push(We),me+=dt}return ze(le)}const xe=4096;function ze(Ge){const de=Ge.length;if(de<=xe)return String.fromCharCode.apply(String,Ge);let re="",le=0;for(;le<de;)re+=String.fromCharCode.apply(String,Ge.slice(le,le+=xe));return re}function ot(Ge,de,re){let le="";re=Math.min(Ge.length,re);for(let me=de;me<re;++me)le+=String.fromCharCode(Ge[me]&127);return le}function yt(Ge,de,re){let le="";re=Math.min(Ge.length,re);for(let me=de;me<re;++me)le+=String.fromCharCode(Ge[me]);return le}function nt(Ge,de,re){const le=Ge.length;(!de||de<0)&&(de=0),(!re||re<0||re>le)&&(re=le);let me="";for(let Te=de;Te<re;++Te)me+=Bi[Ge[Te]];return me}function be(Ge,de,re){const le=Ge.slice(de,re);let me="";for(let Te=0;Te<le.length-1;Te+=2)me+=String.fromCharCode(le[Te]+le[Te+1]*256);return me}o.prototype.slice=function(de,re){const le=this.length;de=~~de,re=re===void 0?le:~~re,de<0?(de+=le,de<0&&(de=0)):de>le&&(de=le),re<0?(re+=le,re<0&&(re=0)):re>le&&(re=le),re<de&&(re=de);const me=this.subarray(de,re);return Object.setPrototypeOf(me,o.prototype),me};function Ne(Ge,de,re){if(Ge%1!==0||Ge<0)throw new RangeError("offset is not uint");if(Ge+de>re)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(de,re,le){de=de>>>0,re=re>>>0,le||Ne(de,re,this.length);let me=this[de],Te=1,We=0;for(;++We<re&&(Te*=256);)me+=this[de+We]*Te;return me},o.prototype.readUintBE=o.prototype.readUIntBE=function(de,re,le){de=de>>>0,re=re>>>0,le||Ne(de,re,this.length);let me=this[de+--re],Te=1;for(;re>0&&(Te*=256);)me+=this[de+--re]*Te;return me},o.prototype.readUint8=o.prototype.readUInt8=function(de,re){return de=de>>>0,re||Ne(de,1,this.length),this[de]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(de,re){return de=de>>>0,re||Ne(de,2,this.length),this[de]|this[de+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(de,re){return de=de>>>0,re||Ne(de,2,this.length),this[de]<<8|this[de+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(de,re){return de=de>>>0,re||Ne(de,4,this.length),(this[de]|this[de+1]<<8|this[de+2]<<16)+this[de+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(de,re){return de=de>>>0,re||Ne(de,4,this.length),this[de]*16777216+(this[de+1]<<16|this[de+2]<<8|this[de+3])},o.prototype.readBigUInt64LE=ei(function(de){de=de>>>0,vt(de,"offset");const re=this[de],le=this[de+7];(re===void 0||le===void 0)&&Ot(de,this.length-8);const me=re+this[++de]*2**8+this[++de]*2**16+this[++de]*2**24,Te=this[++de]+this[++de]*2**8+this[++de]*2**16+le*2**24;return BigInt(me)+(BigInt(Te)<<BigInt(32))}),o.prototype.readBigUInt64BE=ei(function(de){de=de>>>0,vt(de,"offset");const re=this[de],le=this[de+7];(re===void 0||le===void 0)&&Ot(de,this.length-8);const me=re*2**24+this[++de]*2**16+this[++de]*2**8+this[++de],Te=this[++de]*2**24+this[++de]*2**16+this[++de]*2**8+le;return(BigInt(me)<<BigInt(32))+BigInt(Te)}),o.prototype.readIntLE=function(de,re,le){de=de>>>0,re=re>>>0,le||Ne(de,re,this.length);let me=this[de],Te=1,We=0;for(;++We<re&&(Te*=256);)me+=this[de+We]*Te;return Te*=128,me>=Te&&(me-=Math.pow(2,8*re)),me},o.prototype.readIntBE=function(de,re,le){de=de>>>0,re=re>>>0,le||Ne(de,re,this.length);let me=re,Te=1,We=this[de+--me];for(;me>0&&(Te*=256);)We+=this[de+--me]*Te;return Te*=128,We>=Te&&(We-=Math.pow(2,8*re)),We},o.prototype.readInt8=function(de,re){return de=de>>>0,re||Ne(de,1,this.length),this[de]&128?(255-this[de]+1)*-1:this[de]},o.prototype.readInt16LE=function(de,re){de=de>>>0,re||Ne(de,2,this.length);const le=this[de]|this[de+1]<<8;return le&32768?le|4294901760:le},o.prototype.readInt16BE=function(de,re){de=de>>>0,re||Ne(de,2,this.length);const le=this[de+1]|this[de]<<8;return le&32768?le|4294901760:le},o.prototype.readInt32LE=function(de,re){return de=de>>>0,re||Ne(de,4,this.length),this[de]|this[de+1]<<8|this[de+2]<<16|this[de+3]<<24},o.prototype.readInt32BE=function(de,re){return de=de>>>0,re||Ne(de,4,this.length),this[de]<<24|this[de+1]<<16|this[de+2]<<8|this[de+3]},o.prototype.readBigInt64LE=ei(function(de){de=de>>>0,vt(de,"offset");const re=this[de],le=this[de+7];(re===void 0||le===void 0)&&Ot(de,this.length-8);const me=this[de+4]+this[de+5]*2**8+this[de+6]*2**16+(le<<24);return(BigInt(me)<<BigInt(32))+BigInt(re+this[++de]*2**8+this[++de]*2**16+this[++de]*2**24)}),o.prototype.readBigInt64BE=ei(function(de){de=de>>>0,vt(de,"offset");const re=this[de],le=this[de+7];(re===void 0||le===void 0)&&Ot(de,this.length-8);const me=(re<<24)+this[++de]*2**16+this[++de]*2**8+this[++de];return(BigInt(me)<<BigInt(32))+BigInt(this[++de]*2**24+this[++de]*2**16+this[++de]*2**8+le)}),o.prototype.readFloatLE=function(de,re){return de=de>>>0,re||Ne(de,4,this.length),t.read(this,de,!0,23,4)},o.prototype.readFloatBE=function(de,re){return de=de>>>0,re||Ne(de,4,this.length),t.read(this,de,!1,23,4)},o.prototype.readDoubleLE=function(de,re){return de=de>>>0,re||Ne(de,8,this.length),t.read(this,de,!0,52,8)},o.prototype.readDoubleBE=function(de,re){return de=de>>>0,re||Ne(de,8,this.length),t.read(this,de,!1,52,8)};function tt(Ge,de,re,le,me,Te){if(!o.isBuffer(Ge))throw new TypeError('"buffer" argument must be a Buffer instance');if(de>me||de<Te)throw new RangeError('"value" argument is out of bounds');if(re+le>Ge.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(de,re,le,me){if(de=+de,re=re>>>0,le=le>>>0,!me){const dt=Math.pow(2,8*le)-1;tt(this,de,re,le,dt,0)}let Te=1,We=0;for(this[re]=de&255;++We<le&&(Te*=256);)this[re+We]=de/Te&255;return re+le},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(de,re,le,me){if(de=+de,re=re>>>0,le=le>>>0,!me){const dt=Math.pow(2,8*le)-1;tt(this,de,re,le,dt,0)}let Te=le-1,We=1;for(this[re+Te]=de&255;--Te>=0&&(We*=256);)this[re+Te]=de/We&255;return re+le},o.prototype.writeUint8=o.prototype.writeUInt8=function(de,re,le){return de=+de,re=re>>>0,le||tt(this,de,re,1,255,0),this[re]=de&255,re+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(de,re,le){return de=+de,re=re>>>0,le||tt(this,de,re,2,65535,0),this[re]=de&255,this[re+1]=de>>>8,re+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(de,re,le){return de=+de,re=re>>>0,le||tt(this,de,re,2,65535,0),this[re]=de>>>8,this[re+1]=de&255,re+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(de,re,le){return de=+de,re=re>>>0,le||tt(this,de,re,4,4294967295,0),this[re+3]=de>>>24,this[re+2]=de>>>16,this[re+1]=de>>>8,this[re]=de&255,re+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(de,re,le){return de=+de,re=re>>>0,le||tt(this,de,re,4,4294967295,0),this[re]=de>>>24,this[re+1]=de>>>16,this[re+2]=de>>>8,this[re+3]=de&255,re+4};function lt(Ge,de,re,le,me){bt(de,le,me,Ge,re,7);let Te=Number(de&BigInt(4294967295));Ge[re++]=Te,Te=Te>>8,Ge[re++]=Te,Te=Te>>8,Ge[re++]=Te,Te=Te>>8,Ge[re++]=Te;let We=Number(de>>BigInt(32)&BigInt(4294967295));return Ge[re++]=We,We=We>>8,Ge[re++]=We,We=We>>8,Ge[re++]=We,We=We>>8,Ge[re++]=We,re}function It(Ge,de,re,le,me){bt(de,le,me,Ge,re,7);let Te=Number(de&BigInt(4294967295));Ge[re+7]=Te,Te=Te>>8,Ge[re+6]=Te,Te=Te>>8,Ge[re+5]=Te,Te=Te>>8,Ge[re+4]=Te;let We=Number(de>>BigInt(32)&BigInt(4294967295));return Ge[re+3]=We,We=We>>8,Ge[re+2]=We,We=We>>8,Ge[re+1]=We,We=We>>8,Ge[re]=We,re+8}o.prototype.writeBigUInt64LE=ei(function(de,re=0){return lt(this,de,re,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=ei(function(de,re=0){return It(this,de,re,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(de,re,le,me){if(de=+de,re=re>>>0,!me){const Ye=Math.pow(2,8*le-1);tt(this,de,re,le,Ye-1,-Ye)}let Te=0,We=1,dt=0;for(this[re]=de&255;++Te<le&&(We*=256);)de<0&&dt===0&&this[re+Te-1]!==0&&(dt=1),this[re+Te]=(de/We>>0)-dt&255;return re+le},o.prototype.writeIntBE=function(de,re,le,me){if(de=+de,re=re>>>0,!me){const Ye=Math.pow(2,8*le-1);tt(this,de,re,le,Ye-1,-Ye)}let Te=le-1,We=1,dt=0;for(this[re+Te]=de&255;--Te>=0&&(We*=256);)de<0&&dt===0&&this[re+Te+1]!==0&&(dt=1),this[re+Te]=(de/We>>0)-dt&255;return re+le},o.prototype.writeInt8=function(de,re,le){return de=+de,re=re>>>0,le||tt(this,de,re,1,127,-128),de<0&&(de=255+de+1),this[re]=de&255,re+1},o.prototype.writeInt16LE=function(de,re,le){return de=+de,re=re>>>0,le||tt(this,de,re,2,32767,-32768),this[re]=de&255,this[re+1]=de>>>8,re+2},o.prototype.writeInt16BE=function(de,re,le){return de=+de,re=re>>>0,le||tt(this,de,re,2,32767,-32768),this[re]=de>>>8,this[re+1]=de&255,re+2},o.prototype.writeInt32LE=function(de,re,le){return de=+de,re=re>>>0,le||tt(this,de,re,4,2147483647,-2147483648),this[re]=de&255,this[re+1]=de>>>8,this[re+2]=de>>>16,this[re+3]=de>>>24,re+4},o.prototype.writeInt32BE=function(de,re,le){return de=+de,re=re>>>0,le||tt(this,de,re,4,2147483647,-2147483648),de<0&&(de=4294967295+de+1),this[re]=de>>>24,this[re+1]=de>>>16,this[re+2]=de>>>8,this[re+3]=de&255,re+4},o.prototype.writeBigInt64LE=ei(function(de,re=0){return lt(this,de,re,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=ei(function(de,re=0){return It(this,de,re,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function pt(Ge,de,re,le,me,Te){if(re+le>Ge.length)throw new RangeError("Index out of range");if(re<0)throw new RangeError("Index out of range")}function St(Ge,de,re,le,me){return de=+de,re=re>>>0,me||pt(Ge,de,re,4),t.write(Ge,de,re,le,23,4),re+4}o.prototype.writeFloatLE=function(de,re,le){return St(this,de,re,!0,le)},o.prototype.writeFloatBE=function(de,re,le){return St(this,de,re,!1,le)};function Rt(Ge,de,re,le,me){return de=+de,re=re>>>0,me||pt(Ge,de,re,8),t.write(Ge,de,re,le,52,8),re+8}o.prototype.writeDoubleLE=function(de,re,le){return Rt(this,de,re,!0,le)},o.prototype.writeDoubleBE=function(de,re,le){return Rt(this,de,re,!1,le)},o.prototype.copy=function(de,re,le,me){if(!o.isBuffer(de))throw new TypeError("argument should be a Buffer");if(le||(le=0),!me&&me!==0&&(me=this.length),re>=de.length&&(re=de.length),re||(re=0),me>0&&me<le&&(me=le),me===le||de.length===0||this.length===0)return 0;if(re<0)throw new RangeError("targetStart out of bounds");if(le<0||le>=this.length)throw new RangeError("Index out of range");if(me<0)throw new RangeError("sourceEnd out of bounds");me>this.length&&(me=this.length),de.length-re<me-le&&(me=de.length-re+le);const Te=me-le;return this===de&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(re,le,me):Uint8Array.prototype.set.call(de,this.subarray(le,me),re),Te},o.prototype.fill=function(de,re,le,me){if(typeof de=="string"){if(typeof re=="string"?(me=re,re=0,le=this.length):typeof le=="string"&&(me=le,le=this.length),me!==void 0&&typeof me!="string")throw new TypeError("encoding must be a string");if(typeof me=="string"&&!o.isEncoding(me))throw new TypeError("Unknown encoding: "+me);if(de.length===1){const We=de.charCodeAt(0);(me==="utf8"&&We<128||me==="latin1")&&(de=We)}}else typeof de=="number"?de=de&255:typeof de=="boolean"&&(de=Number(de));if(re<0||this.length<re||this.length<le)throw new RangeError("Out of range index");if(le<=re)return this;re=re>>>0,le=le===void 0?this.length:le>>>0,de||(de=0);let Te;if(typeof de=="number")for(Te=re;Te<le;++Te)this[Te]=de;else{const We=o.isBuffer(de)?de:o.from(de,me),dt=We.length;if(dt===0)throw new TypeError('The value "'+de+'" is invalid for argument "value"');for(Te=0;Te<le-re;++Te)this[Te+re]=We[Te%dt]}return this};const Le={};function Pe(Ge,de,re){Le[Ge]=class extends re{constructor(){super(),Object.defineProperty(this,"message",{value:de.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Ge}]`,this.stack,delete this.name}get code(){return Ge}set code(me){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:me,writable:!0})}toString(){return`${this.name} [${Ge}]: ${this.message}`}}}Pe("ERR_BUFFER_OUT_OF_BOUNDS",function(Ge){return Ge?`${Ge} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Pe("ERR_INVALID_ARG_TYPE",function(Ge,de){return`The "${Ge}" argument must be of type number. Received type ${typeof de}`},TypeError),Pe("ERR_OUT_OF_RANGE",function(Ge,de,re){let le=`The value of "${Ge}" is out of range.`,me=re;return Number.isInteger(re)&&Math.abs(re)>2**32?me=Re(String(re)):typeof re=="bigint"&&(me=String(re),(re>BigInt(2)**BigInt(32)||re<-(BigInt(2)**BigInt(32)))&&(me=Re(me)),me+="n"),le+=` It must be ${de}. Received ${me}`,le},RangeError);function Re(Ge){let de="",re=Ge.length;const le=Ge[0]==="-"?1:0;for(;re>=le+4;re-=3)de=`_${Ge.slice(re-3,re)}${de}`;return`${Ge.slice(0,re)}${de}`}function He(Ge,de,re){vt(de,"offset"),(Ge[de]===void 0||Ge[de+re]===void 0)&&Ot(de,Ge.length-(re+1))}function bt(Ge,de,re,le,me,Te){if(Ge>re||Ge<de){const We=typeof de=="bigint"?"n":"";let dt;throw de===0||de===BigInt(0)?dt=`>= 0${We} and < 2${We} ** ${(Te+1)*8}${We}`:dt=`>= -(2${We} ** ${(Te+1)*8-1}${We}) and < 2 ** ${(Te+1)*8-1}${We}`,new Le.ERR_OUT_OF_RANGE("value",dt,Ge)}He(le,me,Te)}function vt(Ge,de){if(typeof Ge!="number")throw new Le.ERR_INVALID_ARG_TYPE(de,"number",Ge)}function Ot(Ge,de,re){throw Math.floor(Ge)!==Ge?(vt(Ge,re),new Le.ERR_OUT_OF_RANGE("offset","an integer",Ge)):de<0?new Le.ERR_BUFFER_OUT_OF_BOUNDS:new Le.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${de}`,Ge)}const qt=/[^+/0-9A-Za-z-_]/g;function Kt(Ge){if(Ge=Ge.split("=")[0],Ge=Ge.trim().replace(qt,""),Ge.length<2)return"";for(;Ge.length%4!==0;)Ge=Ge+"=";return Ge}function on(Ge,de){de=de||1/0;let re;const le=Ge.length;let me=null;const Te=[];for(let We=0;We<le;++We){if(re=Ge.charCodeAt(We),re>55295&&re<57344){if(!me){if(re>56319){(de-=3)>-1&&Te.push(239,191,189);continue}else if(We+1===le){(de-=3)>-1&&Te.push(239,191,189);continue}me=re;continue}if(re<56320){(de-=3)>-1&&Te.push(239,191,189),me=re;continue}re=(me-55296<<10|re-56320)+65536}else me&&(de-=3)>-1&&Te.push(239,191,189);if(me=null,re<128){if((de-=1)<0)break;Te.push(re)}else if(re<2048){if((de-=2)<0)break;Te.push(re>>6|192,re&63|128)}else if(re<65536){if((de-=3)<0)break;Te.push(re>>12|224,re>>6&63|128,re&63|128)}else if(re<1114112){if((de-=4)<0)break;Te.push(re>>18|240,re>>12&63|128,re>>6&63|128,re&63|128)}else throw new Error("Invalid code point")}return Te}function Jn(Ge){const de=[];for(let re=0;re<Ge.length;++re)de.push(Ge.charCodeAt(re)&255);return de}function Wt(Ge,de){let re,le,me;const Te=[];for(let We=0;We<Ge.length&&!((de-=2)<0);++We)re=Ge.charCodeAt(We),le=re>>8,me=re%256,Te.push(me),Te.push(le);return Te}function $n(Ge){return e.toByteArray(Kt(Ge))}function On(Ge,de,re,le){let me;for(me=0;me<le&&!(me+re>=de.length||me>=Ge.length);++me)de[me+re]=Ge[me];return me}function Bn(Ge,de){return Ge instanceof de||Ge!=null&&Ge.constructor!=null&&Ge.constructor.name!=null&&Ge.constructor.name===de.name}function In(Ge){return Ge!==Ge}const Bi=function(){const Ge="0123456789abcdef",de=new Array(256);for(let re=0;re<16;++re){const le=re*16;for(let me=0;me<16;++me)de[le+me]=Ge[re]+Ge[me]}return de}();function ei(Ge){return typeof BigInt>"u"?Kn:Ge}function Kn(){throw new Error("BigInt not supported")}}(c4)),c4}var DQ=kQ();const RQ=WA(DQ);var h4,q7;function PQ(){if(q7)return h4;q7=1;var n="Expected a function",e="__lodash_hash_undefined__",t="[object Function]",i="[object GeneratorFunction]",r="[object Symbol]",a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/,o=/^\./,m=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,C=/[\\^$.*+?()[\]{}|]/g,S=/\\(\\)?/g,O=/^\[object .+?Constructor\]$/,U=typeof window=="object"&&window&&window.Object===Object&&window,K=typeof self=="object"&&self&&self.Object===Object&&self,z=U||K||Function("return this")();function j(De,Ze){return De?.[Ze]}function Q(De){var Ze=!1;if(De!=null&&typeof De.toString!="function")try{Ze=!!(De+"")}catch{}return Ze}var ee=Array.prototype,V=Function.prototype,ae=Object.prototype,ne=z["__core-js_shared__"],Z=function(){var De=/[^.]+$/.exec(ne&&ne.keys&&ne.keys.IE_PROTO||"");return De?"Symbol(src)_1."+De:""}(),oe=V.toString,W=ae.hasOwnProperty,ue=ae.toString,ge=RegExp("^"+oe.call(W).replace(C,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ye=z.Symbol,Me=ee.splice,Be=$n(z,"Map"),we=$n(Object,"create"),qe=ye?ye.prototype:void 0,xe=qe?qe.toString:void 0;function ze(De){var Ze=-1,g=De?De.length:0;for(this.clear();++Ze<g;){var gt=De[Ze];this.set(gt[0],gt[1])}}function ot(){this.__data__=we?we(null):{}}function yt(De){return this.has(De)&&delete this.__data__[De]}function nt(De){var Ze=this.__data__;if(we){var g=Ze[De];return g===e?void 0:g}return W.call(Ze,De)?Ze[De]:void 0}function be(De){var Ze=this.__data__;return we?Ze[De]!==void 0:W.call(Ze,De)}function Ne(De,Ze){var g=this.__data__;return g[De]=we&&Ze===void 0?e:Ze,this}ze.prototype.clear=ot,ze.prototype.delete=yt,ze.prototype.get=nt,ze.prototype.has=be,ze.prototype.set=Ne;function tt(De){var Ze=-1,g=De?De.length:0;for(this.clear();++Ze<g;){var gt=De[Ze];this.set(gt[0],gt[1])}}function lt(){this.__data__=[]}function It(De){var Ze=this.__data__,g=Ot(Ze,De);if(g<0)return!1;var gt=Ze.length-1;return g==gt?Ze.pop():Me.call(Ze,g,1),!0}function pt(De){var Ze=this.__data__,g=Ot(Ze,De);return g<0?void 0:Ze[g][1]}function St(De){return Ot(this.__data__,De)>-1}function Rt(De,Ze){var g=this.__data__,gt=Ot(g,De);return gt<0?g.push([De,Ze]):g[gt][1]=Ze,this}tt.prototype.clear=lt,tt.prototype.delete=It,tt.prototype.get=pt,tt.prototype.has=St,tt.prototype.set=Rt;function Le(De){var Ze=-1,g=De?De.length:0;for(this.clear();++Ze<g;){var gt=De[Ze];this.set(gt[0],gt[1])}}function Pe(){this.__data__={hash:new ze,map:new(Be||tt),string:new ze}}function Re(De){return Wt(this,De).delete(De)}function He(De){return Wt(this,De).get(De)}function bt(De){return Wt(this,De).has(De)}function vt(De,Ze){return Wt(this,De).set(De,Ze),this}Le.prototype.clear=Pe,Le.prototype.delete=Re,Le.prototype.get=He,Le.prototype.has=bt,Le.prototype.set=vt;function Ot(De,Ze){for(var g=De.length;g--;)if(de(De[g][0],Ze))return g;return-1}function qt(De,Ze){Ze=On(Ze,De)?[Ze]:Jn(Ze);for(var g=0,gt=Ze.length;De!=null&&g<gt;)De=De[ei(Ze[g++])];return g&&g==gt?De:void 0}function Kt(De){if(!me(De)||In(De))return!1;var Ze=le(De)||Q(De)?ge:O;return Ze.test(Kn(De))}function on(De){if(typeof De=="string")return De;if(We(De))return xe?xe.call(De):"";var Ze=De+"";return Ze=="0"&&1/De==-1/0?"-0":Ze}function Jn(De){return re(De)?De:Bi(De)}function Wt(De,Ze){var g=De.__data__;return Bn(Ze)?g[typeof Ze=="string"?"string":"hash"]:g.map}function $n(De,Ze){var g=j(De,Ze);return Kt(g)?g:void 0}function On(De,Ze){if(re(De))return!1;var g=typeof De;return g=="number"||g=="symbol"||g=="boolean"||De==null||We(De)?!0:l.test(De)||!a.test(De)||Ze!=null&&De in Object(Ze)}function Bn(De){var Ze=typeof De;return Ze=="string"||Ze=="number"||Ze=="symbol"||Ze=="boolean"?De!=="__proto__":De===null}function In(De){return!!Z&&Z in De}var Bi=Ge(function(De){De=dt(De);var Ze=[];return o.test(De)&&Ze.push(""),De.replace(m,function(g,gt,ht,kt){Ze.push(ht?kt.replace(S,"$1"):gt||g)}),Ze});function ei(De){if(typeof De=="string"||We(De))return De;var Ze=De+"";return Ze=="0"&&1/De==-1/0?"-0":Ze}function Kn(De){if(De!=null){try{return oe.call(De)}catch{}try{return De+""}catch{}}return""}function Ge(De,Ze){if(typeof De!="function"||Ze&&typeof Ze!="function")throw new TypeError(n);var g=function(){var gt=arguments,ht=Ze?Ze.apply(this,gt):gt[0],kt=g.cache;if(kt.has(ht))return kt.get(ht);var it=De.apply(this,gt);return g.cache=kt.set(ht,it),it};return g.cache=new(Ge.Cache||Le),g}Ge.Cache=Le;function de(De,Ze){return De===Ze||De!==De&&Ze!==Ze}var re=Array.isArray;function le(De){var Ze=me(De)?ue.call(De):"";return Ze==t||Ze==i}function me(De){var Ze=typeof De;return!!De&&(Ze=="object"||Ze=="function")}function Te(De){return!!De&&typeof De=="object"}function We(De){return typeof De=="symbol"||Te(De)&&ue.call(De)==r}function dt(De){return De==null?"":on(De)}function Ye(De,Ze,g){var gt=De==null?void 0:qt(De,Ze);return gt===void 0?g:gt}return h4=Ye,h4}var KQ=PQ();const UQ=WA(KQ);var EC={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var LQ=EC.exports,H7;function FQ(){return H7||(H7=1,function(n,e){(function(){var t,i="4.17.21",r=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",o="Invalid `variable` option passed into `_.template`",m="__lodash_hash_undefined__",C=500,S="__lodash_placeholder__",O=1,U=2,K=4,z=1,j=2,Q=1,ee=2,V=4,ae=8,ne=16,Z=32,oe=64,W=128,ue=256,ge=512,ye=30,Me="...",Be=800,we=16,qe=1,xe=2,ze=3,ot=1/0,yt=9007199254740991,nt=17976931348623157e292,be=NaN,Ne=4294967295,tt=Ne-1,lt=Ne>>>1,It=[["ary",W],["bind",Q],["bindKey",ee],["curry",ae],["curryRight",ne],["flip",ge],["partial",Z],["partialRight",oe],["rearg",ue]],pt="[object Arguments]",St="[object Array]",Rt="[object AsyncFunction]",Le="[object Boolean]",Pe="[object Date]",Re="[object DOMException]",He="[object Error]",bt="[object Function]",vt="[object GeneratorFunction]",Ot="[object Map]",qt="[object Number]",Kt="[object Null]",on="[object Object]",Jn="[object Promise]",Wt="[object Proxy]",$n="[object RegExp]",On="[object Set]",Bn="[object String]",In="[object Symbol]",Bi="[object Undefined]",ei="[object WeakMap]",Kn="[object WeakSet]",Ge="[object ArrayBuffer]",de="[object DataView]",re="[object Float32Array]",le="[object Float64Array]",me="[object Int8Array]",Te="[object Int16Array]",We="[object Int32Array]",dt="[object Uint8Array]",Ye="[object Uint8ClampedArray]",De="[object Uint16Array]",Ze="[object Uint32Array]",g=/\b__p \+= '';/g,gt=/\b(__p \+=) '' \+/g,ht=/(__e\(.*?\)|\b__t\)) \+\n'';/g,kt=/&(?:amp|lt|gt|quot|#39);/g,it=/[&<>"']/g,en=RegExp(kt.source),Dn=RegExp(it.source),Mn=/<%-([\s\S]+?)%>/g,ii=/<%([\s\S]+?)%>/g,Wn=/<%=([\s\S]+?)%>/g,qi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,er=/^\w*$/,wi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hi=/[\\^$.*+?()[\]{}|]/g,ti=RegExp(hi.source),Wi=/^\s+/,Sn=/\s/,lo=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Hi=/\{\n\/\* \[wrapped with (.+)\] \*/,pa=/,? & /,To=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Zn=/[()=,{}\[\]\/\s]/,lr=/\\(\\)?/g,zi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,vr=/\w*$/,La=/^[-+]0x[0-9a-f]+$/i,Ir=/^0b[01]+$/i,Ni=/^\[object .+?Constructor\]$/,gl=/^0o[0-7]+$/i,Ta=/^(?:0|[1-9]\d*)$/,So=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$a=/($^)/,Ol=/['\n\r\u2028\u2029\\]/g,Ao="\\ud800-\\udfff",QA="\\u0300-\\u036f",ka="\\ufe20-\\ufe2f",Vi="\\u20d0-\\u20ff",xi=QA+ka+Vi,ls="\\u2700-\\u27bf",Ma="a-z\\xdf-\\xf6\\xf8-\\xff",Vo="\\xac\\xb1\\xd7\\xf7",$e="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Et="\\u2000-\\u206f",xn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",jn="A-Z\\xc0-\\xd6\\xd8-\\xde",rn="\\ufe0e\\ufe0f",si=Vo+$e+Et+xn,Jr="['’]",wo="["+Ao+"]",As="["+si+"]",Us="["+xi+"]",YA="\\d+",Qi="["+ls+"]",Du="["+Ma+"]",_A="[^"+Ao+si+YA+ls+Ma+jn+"]",yl="\\ud83c[\\udffb-\\udfff]",Ss="(?:"+Us+"|"+yl+")",bc="[^"+Ao+"]",Qs="(?:\\ud83c[\\udde6-\\uddff]){2}",$o="[\\ud800-\\udbff][\\udc00-\\udfff]",ko="["+jn+"]",dr="\\u200d",Kl="(?:"+Du+"|"+_A+")",ga="(?:"+ko+"|"+_A+")",Ul="(?:"+Jr+"(?:d|ll|m|re|s|t|ve))?",bA="(?:"+Jr+"(?:D|LL|M|RE|S|T|VE))?",br=Ss+"?",iA="["+rn+"]?",cu="(?:"+dr+"(?:"+[bc,Qs,$o].join("|")+")"+iA+br+")*",No="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Eo="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Fa=iA+br+cu,Sa="(?:"+[Qi,Qs,$o].join("|")+")"+Fa,oa="(?:"+[bc+Us+"?",Us,Qs,$o,wo].join("|")+")",kr=RegExp(Jr,"g"),rA=RegExp(Us,"g"),za=RegExp(yl+"(?="+yl+")|"+oa+Fa,"g"),Za=RegExp([ko+"?"+Du+"+"+Ul+"(?="+[As,ko,"$"].join("|")+")",ga+"+"+bA+"(?="+[As,ko+Kl,"$"].join("|")+")",ko+"?"+Kl+"+"+Ul,ko+"+"+bA,Eo,No,YA,Sa].join("|"),"g"),ya=RegExp("["+dr+Ao+xi+rn+"]"),Dr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,vl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Zi=-1,Mi={};Mi[re]=Mi[le]=Mi[me]=Mi[Te]=Mi[We]=Mi[dt]=Mi[Ye]=Mi[De]=Mi[Ze]=!0,Mi[pt]=Mi[St]=Mi[Ge]=Mi[Le]=Mi[de]=Mi[Pe]=Mi[He]=Mi[bt]=Mi[Ot]=Mi[qt]=Mi[on]=Mi[$n]=Mi[On]=Mi[Bn]=Mi[ei]=!1;var Qr={};Qr[pt]=Qr[St]=Qr[Ge]=Qr[de]=Qr[Le]=Qr[Pe]=Qr[re]=Qr[le]=Qr[me]=Qr[Te]=Qr[We]=Qr[Ot]=Qr[qt]=Qr[on]=Qr[$n]=Qr[On]=Qr[Bn]=Qr[In]=Qr[dt]=Qr[Ye]=Qr[De]=Qr[Ze]=!0,Qr[He]=Qr[bt]=Qr[ei]=!1;var te={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Oe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},st={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},jt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Si=parseFloat,Xn=parseInt,$i=typeof window=="object"&&window&&window.Object===Object&&window,or=typeof self=="object"&&self&&self.Object===Object&&self,Di=$i||or||Function("return this")(),Xi=e&&!e.nodeType&&e,eo=Xi&&!0&&n&&!n.nodeType&&n,uo=eo&&eo.exports===Xi,ur=uo&&$i.process,pr=function(){try{var Zt=eo&&eo.require&&eo.require("util").types;return Zt||ur&&ur.binding&&ur.binding("util")}catch{}}(),co=pr&&pr.isArrayBuffer,Go=pr&&pr.isDate,zr=pr&&pr.isMap,Ys=pr&&pr.isRegExp,Ll=pr&&pr.isSet,qA=pr&&pr.isTypedArray;function fs(Zt,wn,vn){switch(vn.length){case 0:return Zt.call(wn);case 1:return Zt.call(wn,vn[0]);case 2:return Zt.call(wn,vn[0],vn[1]);case 3:return Zt.call(wn,vn[0],vn[1],vn[2])}return Zt.apply(wn,vn)}function gd(Zt,wn,vn,Ii){for(var Sr=-1,Oo=Zt==null?0:Zt.length;++Sr<Oo;){var qs=Zt[Sr];wn(Ii,qs,vn(qs),Zt)}return Ii}function Da(Zt,wn){for(var vn=-1,Ii=Zt==null?0:Zt.length;++vn<Ii&&wn(Zt[vn],vn,Zt)!==!1;);return Zt}function yd(Zt,wn){for(var vn=Zt==null?0:Zt.length;vn--&&wn(Zt[vn],vn,Zt)!==!1;);return Zt}function Ru(Zt,wn){for(var vn=-1,Ii=Zt==null?0:Zt.length;++vn<Ii;)if(!wn(Zt[vn],vn,Zt))return!1;return!0}function HA(Zt,wn){for(var vn=-1,Ii=Zt==null?0:Zt.length,Sr=0,Oo=[];++vn<Ii;){var qs=Zt[vn];wn(qs,vn,Zt)&&(Oo[Sr++]=qs)}return Oo}function ph(Zt,wn){var vn=Zt==null?0:Zt.length;return!!vn&&Xa(Zt,wn,0)>-1}function Nh(Zt,wn,vn){for(var Ii=-1,Sr=Zt==null?0:Zt.length;++Ii<Sr;)if(vn(wn,Zt[Ii]))return!0;return!1}function po(Zt,wn){for(var vn=-1,Ii=Zt==null?0:Zt.length,Sr=Array(Ii);++vn<Ii;)Sr[vn]=wn(Zt[vn],vn,Zt);return Sr}function ic(Zt,wn){for(var vn=-1,Ii=wn.length,Sr=Zt.length;++vn<Ii;)Zt[Sr+vn]=wn[vn];return Zt}function vd(Zt,wn,vn,Ii){var Sr=-1,Oo=Zt==null?0:Zt.length;for(Ii&&Oo&&(vn=Zt[++Sr]);++Sr<Oo;)vn=wn(vn,Zt[Sr],Sr,Zt);return vn}function dp(Zt,wn,vn,Ii){var Sr=Zt==null?0:Zt.length;for(Ii&&Sr&&(vn=Zt[--Sr]);Sr--;)vn=wn(vn,Zt[Sr],Sr,Zt);return vn}function gh(Zt,wn){for(var vn=-1,Ii=Zt==null?0:Zt.length;++vn<Ii;)if(wn(Zt[vn],vn,Zt))return!0;return!1}var Cd=Gh("length");function o0(Zt){return Zt.split("")}function Tf(Zt){return Zt.match(To)||[]}function kf(Zt,wn,vn){var Ii;return vn(Zt,function(Sr,Oo,qs){if(wn(Sr,Oo,qs))return Ii=Oo,!1}),Ii}function VA(Zt,wn,vn,Ii){for(var Sr=Zt.length,Oo=vn+(Ii?1:-1);Ii?Oo--:++Oo<Sr;)if(wn(Zt[Oo],Oo,Zt))return Oo;return-1}function Xa(Zt,wn,vn){return wn===wn?Kf(Zt,wn,vn):VA(Zt,Fl,vn)}function _d(Zt,wn,vn,Ii){for(var Sr=vn-1,Oo=Zt.length;++Sr<Oo;)if(Ii(Zt[Sr],wn))return Sr;return-1}function Fl(Zt){return Zt!==Zt}function bd(Zt,wn){var vn=Zt==null?0:Zt.length;return vn?yh(Zt,wn)/vn:be}function Gh(Zt){return function(wn){return wn==null?t:wn[Zt]}}function Yc(Zt){return function(wn){return Zt==null?t:Zt[wn]}}function jh(Zt,wn,vn,Ii,Sr){return Sr(Zt,function(Oo,qs,Do){vn=Ii?(Ii=!1,Oo):wn(vn,Oo,qs,Do)}),vn}function Df(Zt,wn){var vn=Zt.length;for(Zt.sort(wn);vn--;)Zt[vn]=Zt[vn].value;return Zt}function yh(Zt,wn){for(var vn,Ii=-1,Sr=Zt.length;++Ii<Sr;){var Oo=wn(Zt[Ii]);Oo!==t&&(vn=vn===t?Oo:vn+Oo)}return vn}function vh(Zt,wn){for(var vn=-1,Ii=Array(Zt);++vn<Zt;)Ii[vn]=wn(vn);return Ii}function Wh(Zt,wn){return po(wn,function(vn){return[vn,Zt[vn]]})}function Rf(Zt){return Zt&&Zt.slice(0,Ku(Zt)+1).replace(Wi,"")}function oA(Zt){return function(wn){return Zt(wn)}}function Pf(Zt,wn){return po(wn,function(vn){return Zt[vn]})}function rc(Zt,wn){return Zt.has(wn)}function aA(Zt,wn){for(var vn=-1,Ii=Zt.length;++vn<Ii&&Xa(wn,Zt[vn],0)>-1;);return vn}function xc(Zt,wn){for(var vn=Zt.length;vn--&&Xa(wn,Zt[vn],0)>-1;);return vn}function xd(Zt,wn){for(var vn=Zt.length,Ii=0;vn--;)Zt[vn]===wn&&++Ii;return Ii}var Md=Yc(te),Pu=Yc(Oe);function $A(Zt){return"\\"+jt[Zt]}function Qh(Zt,wn){return Zt==null?t:Zt[wn]}function Mc(Zt){return ya.test(Zt)}function Yh(Zt){return Dr.test(Zt)}function fp(Zt){for(var wn,vn=[];!(wn=Zt.next()).done;)vn.push(wn.value);return vn}function qc(Zt){var wn=-1,vn=Array(Zt.size);return Zt.forEach(function(Ii,Sr){vn[++wn]=[Sr,Ii]}),vn}function Vd(Zt,wn){return function(vn){return Zt(wn(vn))}}function hu(Zt,wn){for(var vn=-1,Ii=Zt.length,Sr=0,Oo=[];++vn<Ii;){var qs=Zt[vn];(qs===wn||qs===S)&&(Zt[vn]=S,Oo[Sr++]=vn)}return Oo}function ZA(Zt){var wn=-1,vn=Array(Zt.size);return Zt.forEach(function(Ii){vn[++wn]=Ii}),vn}function Mm(Zt){var wn=-1,vn=Array(Zt.size);return Zt.forEach(function(Ii){vn[++wn]=[Ii,Ii]}),vn}function Kf(Zt,wn,vn){for(var Ii=vn-1,Sr=Zt.length;++Ii<Sr;)if(Zt[Ii]===wn)return Ii;return-1}function xA(Zt,wn,vn){for(var Ii=vn+1;Ii--;)if(Zt[Ii]===wn)return Ii;return Ii}function oc(Zt){return Mc(Zt)?Ch(Zt):Cd(Zt)}function MA(Zt){return Mc(Zt)?Sd(Zt):o0(Zt)}function Ku(Zt){for(var wn=Zt.length;wn--&&Sn.test(Zt.charAt(wn)););return wn}var Bo=Yc(st);function Ch(Zt){for(var wn=za.lastIndex=0;za.test(Zt);)++wn;return wn}function Sd(Zt){return Zt.match(za)||[]}function Sm(Zt){return Zt.match(Za)||[]}var Sc=function Zt(wn){wn=wn==null?Di:zl.defaults(Di.Object(),wn,zl.pick(Di,vl));var vn=wn.Array,Ii=wn.Date,Sr=wn.Error,Oo=wn.Function,qs=wn.Math,Do=wn.Object,Hc=wn.RegExp,$d=wn.String,sA=wn.TypeError,wd=vn.prototype,du=Oo.prototype,SA=Do.prototype,wA=wn["__core-js_shared__"],Il=du.toString,jo=SA.hasOwnProperty,fu=0,qh=function(){var x=/[^.]+$/.exec(wA&&wA.keys&&wA.keys.IE_PROTO||"");return x?"Symbol(src)_1."+x:""}(),Na=SA.toString,Hs=Il.call(Do),ws=Di._,XA=Hc("^"+Il.call(jo).replace(hi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Nl=uo?wn.Buffer:t,EA=wn.Symbol,ac=wn.Uint8Array,BA=Nl?Nl.allocUnsafe:t,wc=Vd(Do.getPrototypeOf,Do),_h=Do.create,Tr=SA.propertyIsEnumerable,sc=wd.splice,JA=EA?EA.isConcatSpreadable:t,Ec=EA?EA.iterator:t,Es=EA?EA.toStringTag:t,bh=function(){try{var x=Th(Do,"defineProperty");return x({},"",{}),x}catch{}}(),Ed=wn.clearTimeout!==Di.clearTimeout&&wn.clearTimeout,mu=Ii&&Ii.now!==Di.Date.now&&Ii.now,Bd=wn.setTimeout!==Di.setTimeout&&wn.setTimeout,Vc=qs.ceil,OA=qs.floor,Uu=Do.getOwnPropertySymbols,xh=Nl?Nl.isBuffer:t,Hh=wn.isFinite,IA=wd.join,Tl=Vd(Do.keys,Do),Wo=qs.max,aa=qs.min,Lu=Ii.now,Fu=wn.parseInt,Bc=qs.random,$c=wd.reverse,Zc=Th(wn,"DataView"),va=Th(wn,"Map"),_a=Th(wn,"Promise"),$r=Th(wn,"Set"),lA=Th(wn,"WeakMap"),Ls=Th(Do,"create"),Xc=lA&&new lA,pu={},Zd=ys(Zc),ms=ys(va),il=ys(_a),Fs=ys($r),Xd=ys(lA),zu=EA?EA.prototype:t,Mh=zu?zu.valueOf:t,eu=zu?zu.toString:t;function rt(x){if(ll(x)&&!qr(x)&&!(x instanceof gr)){if(x instanceof Zo)return x;if(jo.call(x,"__wrapped__"))return ca(x)}return new Zo(x)}var Vs=function(){function x(){}return function(D){if(!sl(D))return{};if(_h)return _h(D);x.prototype=D;var $=new x;return x.prototype=t,$}}();function Ga(){}function Zo(x,D){this.__wrapped__=x,this.__actions__=[],this.__chain__=!!D,this.__index__=0,this.__values__=t}rt.templateSettings={escape:Mn,evaluate:ii,interpolate:Wn,variable:"",imports:{_:rt}},rt.prototype=Ga.prototype,rt.prototype.constructor=rt,Zo.prototype=Vs(Ga.prototype),Zo.prototype.constructor=Zo;function gr(x){this.__wrapped__=x,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ne,this.__views__=[]}function ps(){var x=new gr(this.__wrapped__);return x.__actions__=bo(this.__actions__),x.__dir__=this.__dir__,x.__filtered__=this.__filtered__,x.__iteratees__=bo(this.__iteratees__),x.__takeCount__=this.__takeCount__,x.__views__=bo(this.__views__),x}function Jc(){if(this.__filtered__){var x=new gr(this);x.__dir__=-1,x.__filtered__=!0}else x=this.clone(),x.__dir__*=-1;return x}function Sh(){var x=this.__wrapped__.value(),D=this.__dir__,$=qr(x),Ce=D<0,Je=$?x.length:0,mt=gp(0,Je,this.__views__),Ut=mt.start,Vt=mt.end,sn=Vt-Ut,Yn=Ce?Vt:Ut-1,Hn=this.__iteratees__,ui=Hn.length,Gi=0,Mr=aa(sn,this.__takeCount__);if(!$||!Ce&&Je==sn&&Mr==sn)return Ra(x,this.__actions__);var ro=[];e:for(;sn--&&Gi<Mr;){Yn+=D;for(var ha=-1,oo=x[Yn];++ha<ui;){var Ia=Hn[ha],qa=Ia.iteratee,pf=Ia.type,ud=qa(oo);if(pf==xe)oo=ud;else if(!ud){if(pf==qe)continue e;break e}}ro[Gi++]=oo}return ro}gr.prototype=Vs(Ga.prototype),gr.prototype.constructor=gr;function Ro(x){var D=-1,$=x==null?0:x.length;for(this.clear();++D<$;){var Ce=x[D];this.set(Ce[0],Ce[1])}}function eh(){this.__data__=Ls?Ls(null):{},this.size=0}function TA(x){var D=this.has(x)&&delete this.__data__[x];return this.size-=D?1:0,D}function Od(x){var D=this.__data__;if(Ls){var $=D[x];return $===m?t:$}return jo.call(D,x)?D[x]:t}function Jd(x){var D=this.__data__;return Ls?D[x]!==t:jo.call(D,x)}function wm(x,D){var $=this.__data__;return this.size+=this.has(x)?0:1,$[x]=Ls&&D===t?m:D,this}Ro.prototype.clear=eh,Ro.prototype.delete=TA,Ro.prototype.get=Od,Ro.prototype.has=Jd,Ro.prototype.set=wm;function ba(x){var D=-1,$=x==null?0:x.length;for(this.clear();++D<$;){var Ce=x[D];this.set(Ce[0],Ce[1])}}function wh(){this.__data__=[],this.size=0}function th(x){var D=this.__data__,$=lc(D,x);if($<0)return!1;var Ce=D.length-1;return $==Ce?D.pop():sc.call(D,$,1),--this.size,!0}function Nu(x){var D=this.__data__,$=lc(D,x);return $<0?t:D[$][1]}function ef(x){return lc(this.__data__,x)>-1}function rl(x,D){var $=this.__data__,Ce=lc($,x);return Ce<0?(++this.size,$.push([x,D])):$[Ce][1]=D,this}ba.prototype.clear=wh,ba.prototype.delete=th,ba.prototype.get=Nu,ba.prototype.has=ef,ba.prototype.set=rl;function Ja(x){var D=-1,$=x==null?0:x.length;for(this.clear();++D<$;){var Ce=x[D];this.set(Ce[0],Ce[1])}}function Vh(){this.size=0,this.__data__={hash:new Ro,map:new(va||ba),string:new Ro}}function AA(x){var D=lf(this,x).delete(x);return this.size-=D?1:0,D}function Id(x){return lf(this,x).get(x)}function tf(x){return lf(this,x).has(x)}function Cl(x,D){var $=lf(this,x),Ce=$.size;return $.set(x,D),this.size+=$.size==Ce?0:1,this}Ja.prototype.clear=Vh,Ja.prototype.delete=AA,Ja.prototype.get=Id,Ja.prototype.has=tf,Ja.prototype.set=Cl;function Oc(x){var D=-1,$=x==null?0:x.length;for(this.__data__=new Ja;++D<$;)this.add(x[D])}function Uf(x){return this.__data__.set(x,m),this}function $h(x){return this.__data__.has(x)}Oc.prototype.add=Oc.prototype.push=Uf,Oc.prototype.has=$h;function Ca(x){var D=this.__data__=new ba(x);this.size=D.size}function Zr(){this.__data__=new ba,this.size=0}function ci(x){var D=this.__data__,$=D.delete(x);return this.size=D.size,$}function Gu(x){return this.__data__.get(x)}function ju(x){return this.__data__.has(x)}function Zh(x,D){var $=this.__data__;if($ instanceof ba){var Ce=$.__data__;if(!va||Ce.length<r-1)return Ce.push([x,D]),this.size=++$.size,this;$=this.__data__=new Ja(Ce)}return $.set(x,D),this.size=$.size,this}Ca.prototype.clear=Zr,Ca.prototype.delete=ci,Ca.prototype.get=Gu,Ca.prototype.has=ju,Ca.prototype.set=Zh;function Ic(x,D){var $=qr(x),Ce=!$&&Ud(x),Je=!$&&!Ce&&ff(x),mt=!$&&!Ce&&!Je&&Dp(x),Ut=$||Ce||Je||mt,Vt=Ut?vh(x.length,$d):[],sn=Vt.length;for(var Yn in x)(D||jo.call(x,Yn))&&!(Ut&&(Yn=="length"||Je&&(Yn=="offset"||Yn=="parent")||mt&&(Yn=="buffer"||Yn=="byteLength"||Yn=="byteOffset")||B(Yn,sn)))&&Vt.push(Yn);return Vt}function gu(x){var D=x.length;return D?x[ct(0,D-1)]:t}function nf(x,D){return ns(bo(x),tu(D,0,x.length))}function to(x){return ns(bo(x))}function Gl(x,D,$){($!==t&&!Zl(x[D],$)||$===t&&!(D in x))&&yu(x,D,$)}function Eh(x,D,$){var Ce=x[D];(!(jo.call(x,D)&&Zl(Ce,$))||$===t&&!(D in x))&&yu(x,D,$)}function lc(x,D){for(var $=x.length;$--;)if(Zl(x[$][0],D))return $;return-1}function kA(x,D,$,Ce){return Wl(x,function(Je,mt,Ut){D(Ce,Je,$(Je),Ut)}),Ce}function Ac(x,D){return x&&Xo(D,ie(D),x)}function Bh(x,D){return x&&Xo(D,Ae(D),x)}function yu(x,D,$){D=="__proto__"&&bh?bh(x,D,{configurable:!0,enumerable:!0,value:$,writable:!0}):x[D]=$}function nh(x,D){for(var $=-1,Ce=D.length,Je=vn(Ce),mt=x==null;++$<Ce;)Je[$]=mt?t:y(x,D[$]);return Je}function tu(x,D,$){return x===x&&($!==t&&(x=x<=$?x:$),D!==t&&(x=x>=D?x:D)),x}function _l(x,D,$,Ce,Je,mt){var Ut,Vt=D&O,sn=D&U,Yn=D&K;if($&&(Ut=Je?$(x,Ce,Je,mt):$(x)),Ut!==t)return Ut;if(!sl(x))return x;var Hn=qr(x);if(Hn){if(Ut=a0(x),!Vt)return bo(x,Ut)}else{var ui=ol(x),Gi=ui==bt||ui==vt;if(ff(x))return hc(x,Vt);if(ui==on||ui==pt||Gi&&!Je){if(Ut=sn||Gi?{}:s0(x),!Vt)return sn?gs(x,Bh(Ut,x)):hA(x,Ac(Ut,x))}else{if(!Qr[ui])return Je?x:{};Ut=Af(x,ui,Vt)}}mt||(mt=new Ca);var Mr=mt.get(x);if(Mr)return Mr;mt.set(x,Ut),v0(x)?x.forEach(function(oo){Ut.add(_l(oo,D,$,oo,x,mt))}):sd(x)&&x.forEach(function(oo,Ia){Ut.set(Ia,_l(oo,D,$,Ia,x,mt))});var ro=Yn?sn?Om:Qf:sn?Ae:ie,ha=Hn?t:ro(x);return Da(ha||x,function(oo,Ia){ha&&(Ia=oo,oo=x[Ia]),Eh(Ut,Ia,_l(oo,D,$,Ia,x,mt))}),Ut}function Em(x){var D=ie(x);return function($){return rf($,x,D)}}function rf(x,D,$){var Ce=$.length;if(x==null)return!Ce;for(x=Do(x);Ce--;){var Je=$[Ce],mt=D[Je],Ut=x[Je];if(Ut===t&&!(Je in x)||!mt(Ut))return!1}return!0}function jl(x,D,$){if(typeof x!="function")throw new sA(l);return ar(function(){x.apply(t,$)},D)}function Po(x,D,$,Ce){var Je=-1,mt=ph,Ut=!0,Vt=x.length,sn=[],Yn=D.length;if(!Vt)return sn;$&&(D=po(D,oA($))),Ce?(mt=Nh,Ut=!1):D.length>=r&&(mt=rc,Ut=!1,D=new Oc(D));e:for(;++Je<Vt;){var Hn=x[Je],ui=$==null?Hn:$(Hn);if(Hn=Ce||Hn!==0?Hn:0,Ut&&ui===ui){for(var Gi=Yn;Gi--;)if(D[Gi]===ui)continue e;sn.push(Hn)}else mt(D,ui,Ce)||sn.push(Hn)}return sn}var Wl=RA(Ti),Xh=RA(Tc,!0);function Lf(x,D){var $=!0;return Wl(x,function(Ce,Je,mt){return $=!!D(Ce,Je,mt),$}),$}function vu(x,D,$){for(var Ce=-1,Je=x.length;++Ce<Je;){var mt=x[Ce],Ut=D(mt);if(Ut!=null&&(Vt===t?Ut===Ut&&!ou(Ut):$(Ut,Vt)))var Vt=Ut,sn=mt}return sn}function no(x,D,$,Ce){var Je=x.length;for($=io($),$<0&&($=-$>Je?0:Je+$),Ce=Ce===t||Ce>Je?Je:io(Ce),Ce<0&&(Ce+=Je),Ce=$>Ce?0:Ld(Ce);$<Ce;)x[$++]=D;return x}function Ko(x,D){var $=[];return Wl(x,function(Ce,Je,mt){D(Ce,Je,mt)&&$.push(Ce)}),$}function Rr(x,D,$,Ce,Je){var mt=-1,Ut=x.length;for($||($=v),Je||(Je=[]);++mt<Ut;){var Vt=x[mt];D>0&&$(Vt)?D>1?Rr(Vt,D-1,$,Ce,Je):ic(Je,Vt):Ce||(Je[Je.length]=Vt)}return Je}var Wu=Hl(),Oi=Hl(!0);function Ti(x,D){return x&&Wu(x,D,ie)}function Tc(x,D){return x&&Oi(x,D,ie)}function DA(x,D){return HA(D,function($){return kh(x[$])})}function uA(x,D){D=Wa(D,x);for(var $=0,Ce=D.length;x!=null&&$<Ce;)x=x[Yr(D[$++])];return $&&$==Ce?x:t}function sa(x,D,$){var Ce=D(x);return qr(x)?Ce:ic(Ce,$(x))}function go(x){return x==null?x===t?Bi:Kt:Es&&Es in Do(x)?pp(x):Rn(x)}function Ql(x,D){return x>D}function Ff(x,D){return x!=null&&jo.call(x,D)}function Jh(x,D){return x!=null&&D in Do(x)}function Uo(x,D,$){return x>=aa(D,$)&&x<Wo(D,$)}function ja(x,D,$){for(var Ce=$?Nh:ph,Je=x[0].length,mt=x.length,Ut=mt,Vt=vn(mt),sn=1/0,Yn=[];Ut--;){var Hn=x[Ut];Ut&&D&&(Hn=po(Hn,oA(D))),sn=aa(Hn.length,sn),Vt[Ut]=!$&&(D||Je>=120&&Hn.length>=120)?new Oc(Ut&&Hn):t}Hn=x[0];var ui=-1,Gi=Vt[0];e:for(;++ui<Je&&Yn.length<sn;){var Mr=Hn[ui],ro=D?D(Mr):Mr;if(Mr=$||Mr!==0?Mr:0,!(Gi?rc(Gi,ro):Ce(Yn,ro,$))){for(Ut=mt;--Ut;){var ha=Vt[Ut];if(!(ha?rc(ha,ro):Ce(x[Ut],ro,$)))continue e}Gi&&Gi.push(ro),Yn.push(Mr)}}return Yn}function ed(x,D,$,Ce){return Ti(x,function(Je,mt,Ut){D(Ce,$(Je),mt,Ut)}),Ce}function Cu(x,D,$){D=Wa(D,x),x=pi(x,D);var Ce=x==null?x:x[Yr(wu(D))];return Ce==null?t:fs(Ce,x,$)}function kc(x){return ll(x)&&go(x)==pt}function $s(x){return ll(x)&&go(x)==Ge}function es(x){return ll(x)&&go(x)==Pe}function cA(x,D,$,Ce,Je){return x===D?!0:x==null||D==null||!ll(x)&&!ll(D)?x!==x&&D!==D:Dc(x,D,$,Ce,cA,Je)}function Dc(x,D,$,Ce,Je,mt){var Ut=qr(x),Vt=qr(D),sn=Ut?St:ol(x),Yn=Vt?St:ol(D);sn=sn==pt?on:sn,Yn=Yn==pt?on:Yn;var Hn=sn==on,ui=Yn==on,Gi=sn==Yn;if(Gi&&ff(x)){if(!ff(D))return!1;Ut=!0,Hn=!1}if(Gi&&!Hn)return mt||(mt=new Ca),Ut||Dp(x)?ru(x,D,$,Ce,Je,mt):kd(x,D,sn,$,Ce,Je,mt);if(!($&z)){var Mr=Hn&&jo.call(x,"__wrapped__"),ro=ui&&jo.call(D,"__wrapped__");if(Mr||ro){var ha=Mr?x.value():x,oo=ro?D.value():D;return mt||(mt=new Ca),Je(ha,oo,$,Ce,mt)}}return Gi?(mt||(mt=new Ca),Zs(x,D,$,Ce,Je,mt)):!1}function uc(x){return ll(x)&&ol(x)==Ot}function cc(x,D,$,Ce){var Je=$.length,mt=Je,Ut=!Ce;if(x==null)return!mt;for(x=Do(x);Je--;){var Vt=$[Je];if(Ut&&Vt[2]?Vt[1]!==x[Vt[0]]:!(Vt[0]in x))return!1}for(;++Je<mt;){Vt=$[Je];var sn=Vt[0],Yn=x[sn],Hn=Vt[1];if(Ut&&Vt[2]){if(Yn===t&&!(sn in x))return!1}else{var ui=new Ca;if(Ce)var Gi=Ce(Yn,Hn,sn,x,D,ui);if(!(Gi===t?cA(Hn,Yn,z|j,Ce,ui):Gi))return!1}}return!0}function Yl(x){if(!sl(x)||_e(x))return!1;var D=kh(x)?XA:Ni;return D.test(ys(x))}function td(x){return ll(x)&&go(x)==$n}function nd(x){return ll(x)&&ol(x)==On}function Td(x){return ll(x)&&om(x.length)&&!!Mi[go(x)]}function I(x){return typeof x=="function"?x:x==null?fn:typeof x=="object"?qr(x)?N(x[0],x[1]):k(x):Oa(x)}function s(x){if(!Fe(x))return Tl(x);var D=[];for(var $ in Do(x))jo.call(x,$)&&$!="constructor"&&D.push($);return D}function f(x){if(!sl(x))return _n(x);var D=Fe(x),$=[];for(var Ce in x)Ce=="constructor"&&(D||!jo.call(x,Ce))||$.push(Ce);return $}function _(x,D){return x<D}function w(x,D){var $=-1,Ce=Xl(x)?vn(x.length):[];return Wl(x,function(Je,mt,Ut){Ce[++$]=D(Je,mt,Ut)}),Ce}function k(x){var D=ea(x);return D.length==1&&D[0][2]?Tt(D[0][0],D[0][1]):function($){return $===x||cc($,x,D)}}function N(x,D){return F(x)&&_t(D)?Tt(Yr(x),D):function($){var Ce=y($,x);return Ce===t&&Ce===D?R($,x):cA(D,Ce,z|j)}}function q(x,D,$,Ce,Je){x!==D&&Wu(D,function(mt,Ut){if(Je||(Je=new Ca),sl(mt))J(x,D,Ut,$,q,Ce,Je);else{var Vt=Ce?Ce(gi(x,Ut),mt,Ut+"",x,D,Je):t;Vt===t&&(Vt=mt),Gl(x,Ut,Vt)}},Ae)}function J(x,D,$,Ce,Je,mt,Ut){var Vt=gi(x,$),sn=gi(D,$),Yn=Ut.get(sn);if(Yn){Gl(x,$,Yn);return}var Hn=mt?mt(Vt,sn,$+"",x,D,Ut):t,ui=Hn===t;if(ui){var Gi=qr(sn),Mr=!Gi&&ff(sn),ro=!Gi&&!Mr&&Dp(sn);Hn=sn,Gi||Mr||ro?qr(Vt)?Hn=Vt:wl(Vt)?Hn=bo(Vt):Mr?(ui=!1,Hn=hc(sn,!0)):ro?(ui=!1,Hn=Rc(sn,!0)):Hn=[]:Ah(sn)||Ud(sn)?(Hn=Vt,Ud(Vt)?Hn=lg(Vt):(!sl(Vt)||kh(Vt))&&(Hn=s0(sn))):ui=!1}ui&&(Ut.set(sn,Hn),Je(Hn,sn,Ce,mt,Ut),Ut.delete(sn)),Gl(x,$,Hn)}function he(x,D){var $=x.length;if($)return D+=D<0?$:0,B(D,$)?x[D]:t}function pe(x,D,$){D.length?D=po(D,function(mt){return qr(mt)?function(Ut){return uA(Ut,mt.length===1?mt[0]:mt)}:mt}):D=[fn];var Ce=-1;D=po(D,oA(mr()));var Je=w(x,function(mt,Ut,Vt){var sn=po(D,function(Yn){return Yn(mt)});return{criteria:sn,index:++Ce,value:mt}});return Df(Je,function(mt,Ut){return qu(mt,Ut,$)})}function Ee(x,D){return Se(x,D,function($,Ce){return R(x,Ce)})}function Se(x,D,$){for(var Ce=-1,Je=D.length,mt={};++Ce<Je;){var Ut=D[Ce],Vt=uA(x,Ut);$(Vt,Ut)&&Lt(mt,Wa(Ut,x),Vt)}return mt}function Ue(x){return function(D){return uA(D,x)}}function Xe(x,D,$,Ce){var Je=Ce?_d:Xa,mt=-1,Ut=D.length,Vt=x;for(x===D&&(D=bo(D)),$&&(Vt=po(x,oA($)));++mt<Ut;)for(var sn=0,Yn=D[mt],Hn=$?$(Yn):Yn;(sn=Je(Vt,Hn,sn,Ce))>-1;)Vt!==x&&sc.call(Vt,sn,1),sc.call(x,sn,1);return x}function At(x,D){for(var $=x?D.length:0,Ce=$-1;$--;){var Je=D[$];if($==Ce||Je!==mt){var mt=Je;B(Je)?sc.call(x,Je,1):_o(x,Je)}}return x}function ct(x,D){return x+OA(Bc()*(D-x+1))}function ft(x,D,$,Ce){for(var Je=-1,mt=Wo(Vc((D-x)/($||1)),0),Ut=vn(mt);mt--;)Ut[Ce?mt:++Je]=x,x+=$;return Ut}function xt(x,D){var $="";if(!x||D<1||D>yt)return $;do D%2&&($+=x),D=OA(D/2),D&&(x+=x);while(D);return $}function Ct(x,D){return Yi(oi(x,D,fn),x+"")}function wt(x){return gu(Ai(x))}function Pt(x,D){var $=Ai(x);return ns($,tu(D,0,$.length))}function Lt(x,D,$,Ce){if(!sl(x))return x;D=Wa(D,x);for(var Je=-1,mt=D.length,Ut=mt-1,Vt=x;Vt!=null&&++Je<mt;){var sn=Yr(D[Je]),Yn=$;if(sn==="__proto__"||sn==="constructor"||sn==="prototype")return x;if(Je!=Ut){var Hn=Vt[sn];Yn=Ce?Ce(Hn,sn,Vt):t,Yn===t&&(Yn=sl(Hn)?Hn:B(D[Je+1])?[]:{})}Eh(Vt,sn,Yn),Vt=Vt[sn]}return x}var Bt=Xc?function(x,D){return Xc.set(x,D),x}:fn,Yt=bh?function(x,D){return bh(x,"toString",{configurable:!0,enumerable:!1,value:hn(D),writable:!0})}:fn;function dn(x){return ns(Ai(x))}function Xt(x,D,$){var Ce=-1,Je=x.length;D<0&&(D=-D>Je?0:Je+D),$=$>Je?Je:$,$<0&&($+=Je),Je=D>$?0:$-D>>>0,D>>>=0;for(var mt=vn(Je);++Ce<Je;)mt[Ce]=x[Ce+D];return mt}function nn(x,D){var $;return Wl(x,function(Ce,Je,mt){return $=D(Ce,Je,mt),!$}),!!$}function An(x,D,$){var Ce=0,Je=x==null?Ce:x.length;if(typeof D=="number"&&D===D&&Je<=lt){for(;Ce<Je;){var mt=Ce+Je>>>1,Ut=x[mt];Ut!==null&&!ou(Ut)&&($?Ut<=D:Ut<D)?Ce=mt+1:Je=mt}return Je}return qn(x,D,fn,$)}function qn(x,D,$,Ce){var Je=0,mt=x==null?0:x.length;if(mt===0)return 0;D=$(D);for(var Ut=D!==D,Vt=D===null,sn=ou(D),Yn=D===t;Je<mt;){var Hn=OA((Je+mt)/2),ui=$(x[Hn]),Gi=ui!==t,Mr=ui===null,ro=ui===ui,ha=ou(ui);if(Ut)var oo=Ce||ro;else Yn?oo=ro&&(Ce||Gi):Vt?oo=ro&&Gi&&(Ce||!Mr):sn?oo=ro&&Gi&&!Mr&&(Ce||!ha):Mr||ha?oo=!1:oo=Ce?ui<=D:ui<D;oo?Je=Hn+1:mt=Hn}return aa(mt,tt)}function Qn(x,D){for(var $=-1,Ce=x.length,Je=0,mt=[];++$<Ce;){var Ut=x[$],Vt=D?D(Ut):Ut;if(!$||!Zl(Vt,sn)){var sn=Vt;mt[Je++]=Ut===0?0:Ut}}return mt}function Tn(x){return typeof x=="number"?x:ou(x)?be:+x}function bi(x){if(typeof x=="string")return x;if(qr(x))return po(x,bi)+"";if(ou(x))return eu?eu.call(x):"";var D=x+"";return D=="0"&&1/x==-ot?"-0":D}function cr(x,D,$){var Ce=-1,Je=ph,mt=x.length,Ut=!0,Vt=[],sn=Vt;if($)Ut=!1,Je=Nh;else if(mt>=r){var Yn=D?null:W0(x);if(Yn)return ZA(Yn);Ut=!1,Je=rc,sn=new Oc}else sn=D?[]:Vt;e:for(;++Ce<mt;){var Hn=x[Ce],ui=D?D(Hn):Hn;if(Hn=$||Hn!==0?Hn:0,Ut&&ui===ui){for(var Gi=sn.length;Gi--;)if(sn[Gi]===ui)continue e;D&&sn.push(ui),Vt.push(Hn)}else Je(sn,ui,$)||(sn!==Vt&&sn.push(ui),Vt.push(Hn))}return Vt}function _o(x,D){return D=Wa(D,x),x=pi(x,D),x==null||delete x[Yr(wu(D))]}function la(x,D,$,Ce){return Lt(x,D,$(uA(x,D)),Ce)}function Lo(x,D,$,Ce){for(var Je=x.length,mt=Ce?Je:-1;(Ce?mt--:++mt<Je)&&D(x[mt],mt,x););return $?Xt(x,Ce?0:mt,Ce?mt+1:Je):Xt(x,Ce?mt+1:0,Ce?Je:mt)}function Ra(x,D){var $=x;return $ instanceof gr&&($=$.value()),vd(D,function(Ce,Je){return Je.func.apply(Je.thisArg,ic([Ce],Je.args))},$)}function Aa(x,D,$){var Ce=x.length;if(Ce<2)return Ce?cr(x[0]):[];for(var Je=-1,mt=vn(Ce);++Je<Ce;)for(var Ut=x[Je],Vt=-1;++Vt<Ce;)Vt!=Je&&(mt[Je]=Po(mt[Je]||Ut,x[Vt],D,$));return cr(Rr(mt,1),D,$)}function Er(x,D,$){for(var Ce=-1,Je=x.length,mt=D.length,Ut={};++Ce<Je;){var Vt=Ce<mt?D[Ce]:t;$(Ut,x[Ce],Vt)}return Ut}function Qo(x){return wl(x)?x:[]}function ts(x){return typeof x=="function"?x:fn}function Wa(x,D){return qr(x)?x:F(x,D)?[x]:ua(Pa(x))}var Bs=Ct;function Os(x,D,$){var Ce=x.length;return $=$===t?Ce:$,!D&&$>=Ce?x:Xt(x,D,$)}var Qu=Ed||function(x){return Di.clearTimeout(x)};function hc(x,D){if(D)return x.slice();var $=x.length,Ce=BA?BA($):new x.constructor($);return x.copy(Ce),Ce}function ql(x){var D=new x.constructor(x.byteLength);return new ac(D).set(new ac(x)),D}function Oh(x,D){var $=D?ql(x.buffer):x.buffer;return new x.constructor($,x.byteOffset,x.byteLength)}function ih(x){var D=new x.constructor(x.source,vr.exec(x));return D.lastIndex=x.lastIndex,D}function Yu(x){return Mh?Do(Mh.call(x)):{}}function Rc(x,D){var $=D?ql(x.buffer):x.buffer;return new x.constructor($,x.byteOffset,x.length)}function bl(x,D){if(x!==D){var $=x!==t,Ce=x===null,Je=x===x,mt=ou(x),Ut=D!==t,Vt=D===null,sn=D===D,Yn=ou(D);if(!Vt&&!Yn&&!mt&&x>D||mt&&Ut&&sn&&!Vt&&!Yn||Ce&&Ut&&sn||!$&&sn||!Je)return 1;if(!Ce&&!mt&&!Yn&&x<D||Yn&&$&&Je&&!Ce&&!mt||Vt&&$&&Je||!Ut&&Je||!sn)return-1}return 0}function qu(x,D,$){for(var Ce=-1,Je=x.criteria,mt=D.criteria,Ut=Je.length,Vt=$.length;++Ce<Ut;){var sn=bl(Je[Ce],mt[Ce]);if(sn){if(Ce>=Vt)return sn;var Yn=$[Ce];return sn*(Yn=="desc"?-1:1)}}return x.index-D.index}function xl(x,D,$,Ce){for(var Je=-1,mt=x.length,Ut=$.length,Vt=-1,sn=D.length,Yn=Wo(mt-Ut,0),Hn=vn(sn+Yn),ui=!Ce;++Vt<sn;)Hn[Vt]=D[Vt];for(;++Je<Ut;)(ui||Je<mt)&&(Hn[$[Je]]=x[Je]);for(;Yn--;)Hn[Vt++]=x[Je++];return Hn}function Pc(x,D,$,Ce){for(var Je=-1,mt=x.length,Ut=-1,Vt=$.length,sn=-1,Yn=D.length,Hn=Wo(mt-Vt,0),ui=vn(Hn+Yn),Gi=!Ce;++Je<Hn;)ui[Je]=x[Je];for(var Mr=Je;++sn<Yn;)ui[Mr+sn]=D[sn];for(;++Ut<Vt;)(Gi||Je<mt)&&(ui[Mr+$[Ut]]=x[Je++]);return ui}function bo(x,D){var $=-1,Ce=x.length;for(D||(D=vn(Ce));++$<Ce;)D[$]=x[$];return D}function Xo(x,D,$,Ce){var Je=!$;$||($={});for(var mt=-1,Ut=D.length;++mt<Ut;){var Vt=D[mt],sn=Ce?Ce($[Vt],x[Vt],Vt,$,x):t;sn===t&&(sn=x[Vt]),Je?yu($,Vt,sn):Eh($,Vt,sn)}return $}function hA(x,D){return Xo(x,Hu(x),D)}function gs(x,D){return Xo(x,fA(x),D)}function _u(x,D){return function($,Ce){var Je=qr($)?gd:kA,mt=D?D():{};return Je($,x,mr(Ce,2),mt)}}function dA(x){return Ct(function(D,$){var Ce=-1,Je=$.length,mt=Je>1?$[Je-1]:t,Ut=Je>2?$[2]:t;for(mt=x.length>3&&typeof mt=="function"?(Je--,mt):t,Ut&&E($[0],$[1],Ut)&&(mt=Je<3?t:mt,Je=1),D=Do(D);++Ce<Je;){var Vt=$[Ce];Vt&&x(D,Vt,Ce,mt)}return D})}function RA(x,D){return function($,Ce){if($==null)return $;if(!Xl($))return x($,Ce);for(var Je=$.length,mt=D?Je:-1,Ut=Do($);(D?mt--:++mt<Je)&&Ce(Ut[mt],mt,Ut)!==!1;);return $}}function Hl(x){return function(D,$,Ce){for(var Je=-1,mt=Do(D),Ut=Ce(D),Vt=Ut.length;Vt--;){var sn=Ut[x?Vt:++Je];if($(mt[sn],sn,mt)===!1)break}return D}}function Kc(x,D,$){var Ce=D&Q,Je=bu(x);function mt(){var Ut=this&&this!==Di&&this instanceof mt?Je:x;return Ut.apply(Ce?$:this,arguments)}return mt}function nu(x){return function(D){D=Pa(D);var $=Mc(D)?MA(D):t,Ce=$?$[0]:D.charAt(0),Je=$?Os($,1).join(""):D.slice(1);return Ce[x]()+Je}}function Qa(x){return function(D){return vd(Y(Gr(D).replace(kr,"")),x,"")}}function bu(x){return function(){var D=arguments;switch(D.length){case 0:return new x;case 1:return new x(D[0]);case 2:return new x(D[0],D[1]);case 3:return new x(D[0],D[1],D[2]);case 4:return new x(D[0],D[1],D[2],D[3]);case 5:return new x(D[0],D[1],D[2],D[3],D[4]);case 6:return new x(D[0],D[1],D[2],D[3],D[4],D[5]);case 7:return new x(D[0],D[1],D[2],D[3],D[4],D[5],D[6])}var $=Vs(x.prototype),Ce=x.apply($,D);return sl(Ce)?Ce:$}}function zf(x,D,$){var Ce=bu(x);function Je(){for(var mt=arguments.length,Ut=vn(mt),Vt=mt,sn=Dd(Je);Vt--;)Ut[Vt]=arguments[Vt];var Yn=mt<3&&Ut[0]!==sn&&Ut[mt-1]!==sn?[]:hu(Ut,sn);if(mt-=Yn.length,mt<$)return Gf(x,D,wa,Je.placeholder,t,Ut,Yn,t,t,$-mt);var Hn=this&&this!==Di&&this instanceof Je?Ce:x;return fs(Hn,this,Ut)}return Je}function xu(x){return function(D,$,Ce){var Je=Do(D);if(!Xl(D)){var mt=mr($,3);D=ie(D),$=function(Vt){return mt(Je[Vt],Vt,Je)}}var Ut=x(D,$,Ce);return Ut>-1?Je[mt?D[Ut]:Ut]:t}}function Mu(x){return us(function(D){var $=D.length,Ce=$,Je=Zo.prototype.thru;for(x&&D.reverse();Ce--;){var mt=D[Ce];if(typeof mt!="function")throw new sA(l);if(Je&&!Ut&&sf(mt)=="wrapper")var Ut=new Zo([],!0)}for(Ce=Ut?Ce:$;++Ce<$;){mt=D[Ce];var Vt=sf(mt),sn=Vt=="wrapper"?Yf(mt):t;sn&&fe(sn[0])&&sn[1]==(W|ae|Z|ue)&&!sn[4].length&&sn[9]==1?Ut=Ut[sf(sn[0])].apply(Ut,sn[3]):Ut=mt.length==1&&fe(mt)?Ut[Vt]():Ut.thru(mt)}return function(){var Yn=arguments,Hn=Yn[0];if(Ut&&Yn.length==1&&qr(Hn))return Ut.plant(Hn).value();for(var ui=0,Gi=$?D[ui].apply(this,Yn):Hn;++ui<$;)Gi=D[ui].call(this,Gi);return Gi}})}function wa(x,D,$,Ce,Je,mt,Ut,Vt,sn,Yn){var Hn=D&W,ui=D&Q,Gi=D&ee,Mr=D&(ae|ne),ro=D&ge,ha=Gi?t:bu(x);function oo(){for(var Ia=arguments.length,qa=vn(Ia),pf=Ia;pf--;)qa[pf]=arguments[pf];if(Mr)var ud=Dd(oo),gf=xd(qa,ud);if(Ce&&(qa=xl(qa,Ce,Je,Mr)),mt&&(qa=Pc(qa,mt,Ut,Mr)),Ia-=gf,Mr&&Ia<Yn){var Iu=hu(qa,ud);return Gf(x,D,wa,oo.placeholder,$,qa,Iu,Vt,sn,Yn-Ia)}var Gm=ui?$:this,M0=Gi?Gm[x]:x;return Ia=qa.length,Vt?qa=Ci(qa,Vt):ro&&Ia>1&&qa.reverse(),Hn&&sn<Ia&&(qa.length=sn),this&&this!==Di&&this instanceof oo&&(M0=ha||bu(M0)),M0.apply(Gm,qa)}return oo}function iu(x,D){return function($,Ce){return ed($,x,D(Ce),{})}}function id(x,D){return function($,Ce){var Je;if($===t&&Ce===t)return D;if($!==t&&(Je=$),Ce!==t){if(Je===t)return Ce;typeof $=="string"||typeof Ce=="string"?($=bi($),Ce=bi(Ce)):($=Tn($),Ce=Tn(Ce)),Je=x($,Ce)}return Je}}function Nf(x){return us(function(D){return D=po(D,oA(mr())),Ct(function($){var Ce=this;return x(D,function(Je){return fs(Je,Ce,$)})})})}function of(x,D){D=D===t?" ":bi(D);var $=D.length;if($<2)return $?xt(D,x):D;var Ce=xt(D,Vc(x/oc(D)));return Mc(D)?Os(MA(Ce),0,x).join(""):Ce.slice(0,x)}function mp(x,D,$,Ce){var Je=D&Q,mt=bu(x);function Ut(){for(var Vt=-1,sn=arguments.length,Yn=-1,Hn=Ce.length,ui=vn(Hn+sn),Gi=this&&this!==Di&&this instanceof Ut?mt:x;++Yn<Hn;)ui[Yn]=Ce[Yn];for(;sn--;)ui[Yn++]=arguments[++Vt];return fs(Gi,Je?$:this,ui)}return Ut}function dc(x){return function(D,$,Ce){return Ce&&typeof Ce!="number"&&E(D,$,Ce)&&($=Ce=t),D=Ad(D),$===t?($=D,D=0):$=Ad($),Ce=Ce===t?D<$?1:-1:Ad(Ce),ft(D,$,Ce,x)}}function rd(x){return function(D,$){return typeof D=="string"&&typeof $=="string"||(D=uh(D),$=uh($)),x(D,$)}}function Gf(x,D,$,Ce,Je,mt,Ut,Vt,sn,Yn){var Hn=D&ae,ui=Hn?Ut:t,Gi=Hn?t:Ut,Mr=Hn?mt:t,ro=Hn?t:mt;D|=Hn?Z:oe,D&=~(Hn?oe:Z),D&V||(D&=-4);var ha=[x,D,Je,Mr,ui,ro,Gi,Vt,sn,Yn],oo=$.apply(t,ha);return fe(x)&&ki(oo,ha),oo.placeholder=Ce,Xr(oo,x,D)}function jf(x){var D=qs[x];return function($,Ce){if($=uh($),Ce=Ce==null?0:aa(io(Ce),292),Ce&&Hh($)){var Je=(Pa($)+"e").split("e"),mt=D(Je[0]+"e"+(+Je[1]+Ce));return Je=(Pa(mt)+"e").split("e"),+(Je[0]+"e"+(+Je[1]-Ce))}return D($)}}var W0=$r&&1/ZA(new $r([,-0]))[1]==ot?function(x){return new $r(x)}:ir;function af(x){return function(D){var $=ol(D);return $==Ot?qc(D):$==On?Mm(D):Wh(D,x(D))}}function Jo(x,D,$,Ce,Je,mt,Ut,Vt){var sn=D&ee;if(!sn&&typeof x!="function")throw new sA(l);var Yn=Ce?Ce.length:0;if(Yn||(D&=-97,Ce=Je=t),Ut=Ut===t?Ut:Wo(io(Ut),0),Vt=Vt===t?Vt:io(Vt),Yn-=Je?Je.length:0,D&oe){var Hn=Ce,ui=Je;Ce=Je=t}var Gi=sn?t:Yf(x),Mr=[x,D,$,Ce,Je,Hn,ui,mt,Ut,Vt];if(Gi&&Ht(Mr,Gi),x=Mr[0],D=Mr[1],$=Mr[2],Ce=Mr[3],Je=Mr[4],Vt=Mr[9]=Mr[9]===t?sn?0:x.length:Wo(Mr[9]-Yn,0),!Vt&&D&(ae|ne)&&(D&=-25),!D||D==Q)var ro=Kc(x,D,$);else D==ae||D==ne?ro=zf(x,D,Vt):(D==Z||D==(Q|Z))&&!Je.length?ro=mp(x,D,$,Ce):ro=wa.apply(t,Mr);var ha=Gi?Bt:ki;return Xr(ha(ro,Mr),x,D)}function Bm(x,D,$,Ce){return x===t||Zl(x,SA[$])&&!jo.call(Ce,$)?D:x}function Ih(x,D,$,Ce,Je,mt){return sl(x)&&sl(D)&&(mt.set(D,x),q(x,D,t,Ih,mt),mt.delete(D)),x}function Wf(x){return Ah(x)?t:x}function ru(x,D,$,Ce,Je,mt){var Ut=$&z,Vt=x.length,sn=D.length;if(Vt!=sn&&!(Ut&&sn>Vt))return!1;var Yn=mt.get(x),Hn=mt.get(D);if(Yn&&Hn)return Yn==D&&Hn==x;var ui=-1,Gi=!0,Mr=$&j?new Oc:t;for(mt.set(x,D),mt.set(D,x);++ui<Vt;){var ro=x[ui],ha=D[ui];if(Ce)var oo=Ut?Ce(ha,ro,ui,D,x,mt):Ce(ro,ha,ui,x,D,mt);if(oo!==t){if(oo)continue;Gi=!1;break}if(Mr){if(!gh(D,function(Ia,qa){if(!rc(Mr,qa)&&(ro===Ia||Je(ro,Ia,$,Ce,mt)))return Mr.push(qa)})){Gi=!1;break}}else if(!(ro===ha||Je(ro,ha,$,Ce,mt))){Gi=!1;break}}return mt.delete(x),mt.delete(D),Gi}function kd(x,D,$,Ce,Je,mt,Ut){switch($){case de:if(x.byteLength!=D.byteLength||x.byteOffset!=D.byteOffset)return!1;x=x.buffer,D=D.buffer;case Ge:return!(x.byteLength!=D.byteLength||!mt(new ac(x),new ac(D)));case Le:case Pe:case qt:return Zl(+x,+D);case He:return x.name==D.name&&x.message==D.message;case $n:case Bn:return x==D+"";case Ot:var Vt=qc;case On:var sn=Ce&z;if(Vt||(Vt=ZA),x.size!=D.size&&!sn)return!1;var Yn=Ut.get(x);if(Yn)return Yn==D;Ce|=j,Ut.set(x,D);var Hn=ru(Vt(x),Vt(D),Ce,Je,mt,Ut);return Ut.delete(x),Hn;case In:if(Mh)return Mh.call(x)==Mh.call(D)}return!1}function Zs(x,D,$,Ce,Je,mt){var Ut=$&z,Vt=Qf(x),sn=Vt.length,Yn=Qf(D),Hn=Yn.length;if(sn!=Hn&&!Ut)return!1;for(var ui=sn;ui--;){var Gi=Vt[ui];if(!(Ut?Gi in D:jo.call(D,Gi)))return!1}var Mr=mt.get(x),ro=mt.get(D);if(Mr&&ro)return Mr==D&&ro==x;var ha=!0;mt.set(x,D),mt.set(D,x);for(var oo=Ut;++ui<sn;){Gi=Vt[ui];var Ia=x[Gi],qa=D[Gi];if(Ce)var pf=Ut?Ce(qa,Ia,Gi,D,x,mt):Ce(Ia,qa,Gi,x,D,mt);if(!(pf===t?Ia===qa||Je(Ia,qa,$,Ce,mt):pf)){ha=!1;break}oo||(oo=Gi=="constructor")}if(ha&&!oo){var ud=x.constructor,gf=D.constructor;ud!=gf&&"constructor"in x&&"constructor"in D&&!(typeof ud=="function"&&ud instanceof ud&&typeof gf=="function"&&gf instanceof gf)&&(ha=!1)}return mt.delete(x),mt.delete(D),ha}function us(x){return Yi(oi(x,t,al),x+"")}function Qf(x){return sa(x,ie,Hu)}function Om(x){return sa(x,Ae,fA)}var Yf=Xc?function(x){return Xc.get(x)}:ir;function sf(x){for(var D=x.name+"",$=pu[D],Ce=jo.call(pu,D)?$.length:0;Ce--;){var Je=$[Ce],mt=Je.func;if(mt==null||mt==x)return Je.name}return D}function Dd(x){var D=jo.call(rt,"placeholder")?rt:x;return D.placeholder}function mr(){var x=rt.iteratee||Pr;return x=x===Pr?I:x,arguments.length?x(arguments[0],arguments[1]):x}function lf(x,D){var $=x.__data__;return X(D)?$[typeof D=="string"?"string":"hash"]:$.map}function ea(x){for(var D=ie(x),$=D.length;$--;){var Ce=D[$],Je=x[Ce];D[$]=[Ce,Je,_t(Je)]}return D}function Th(x,D){var $=Qh(x,D);return Yl($)?$:t}function pp(x){var D=jo.call(x,Es),$=x[Es];try{x[Es]=t;var Ce=!0}catch{}var Je=Na.call(x);return Ce&&(D?x[Es]=$:delete x[Es]),Je}var Hu=Uu?function(x){return x==null?[]:(x=Do(x),HA(Uu(x),function(D){return Tr.call(x,D)}))}:ch,fA=Uu?function(x){for(var D=[];x;)ic(D,Hu(x)),x=wc(x);return D}:ch,ol=go;(Zc&&ol(new Zc(new ArrayBuffer(1)))!=de||va&&ol(new va)!=Ot||_a&&ol(_a.resolve())!=Jn||$r&&ol(new $r)!=On||lA&&ol(new lA)!=ei)&&(ol=function(x){var D=go(x),$=D==on?x.constructor:t,Ce=$?ys($):"";if(Ce)switch(Ce){case Zd:return de;case ms:return Ot;case il:return Jn;case Fs:return On;case Xd:return ei}return D});function gp(x,D,$){for(var Ce=-1,Je=$.length;++Ce<Je;){var mt=$[Ce],Ut=mt.size;switch(mt.type){case"drop":x+=Ut;break;case"dropRight":D-=Ut;break;case"take":D=aa(D,x+Ut);break;case"takeRight":x=Wo(x,D-Ut);break}}return{start:x,end:D}}function zs(x){var D=x.match(Hi);return D?D[1].split(pa):[]}function qf(x,D,$){D=Wa(D,x);for(var Ce=-1,Je=D.length,mt=!1;++Ce<Je;){var Ut=Yr(D[Ce]);if(!(mt=x!=null&&$(x,Ut)))break;x=x[Ut]}return mt||++Ce!=Je?mt:(Je=x==null?0:x.length,!!Je&&om(Je)&&B(Ut,Je)&&(qr(x)||Ud(x)))}function a0(x){var D=x.length,$=new x.constructor(D);return D&&typeof x[0]=="string"&&jo.call(x,"index")&&($.index=x.index,$.input=x.input),$}function s0(x){return typeof x.constructor=="function"&&!Fe(x)?Vs(wc(x)):{}}function Af(x,D,$){var Ce=x.constructor;switch(D){case Ge:return ql(x);case Le:case Pe:return new Ce(+x);case de:return Oh(x,$);case re:case le:case me:case Te:case We:case dt:case Ye:case De:case Ze:return Rc(x,$);case Ot:return new Ce;case qt:case Bn:return new Ce(x);case $n:return ih(x);case On:return new Ce;case In:return Yu(x)}}function d(x,D){var $=D.length;if(!$)return x;var Ce=$-1;return D[Ce]=($>1?"& ":"")+D[Ce],D=D.join($>2?", ":" "),x.replace(lo,`{
/* [wrapped with `+D+`] */
`)}function v(x){return qr(x)||Ud(x)||!!(JA&&x&&x[JA])}function B(x,D){var $=typeof x;return D=D??yt,!!D&&($=="number"||$!="symbol"&&Ta.test(x))&&x>-1&&x%1==0&&x<D}function E(x,D,$){if(!sl($))return!1;var Ce=typeof D;return(Ce=="number"?Xl($)&&B(D,$.length):Ce=="string"&&D in $)?Zl($[D],x):!1}function F(x,D){if(qr(x))return!1;var $=typeof x;return $=="number"||$=="symbol"||$=="boolean"||x==null||ou(x)?!0:er.test(x)||!qi.test(x)||D!=null&&x in Do(D)}function X(x){var D=typeof x;return D=="string"||D=="number"||D=="symbol"||D=="boolean"?x!=="__proto__":x===null}function fe(x){var D=sf(x),$=rt[D];if(typeof $!="function"||!(D in gr.prototype))return!1;if(x===$)return!0;var Ce=Yf($);return!!Ce&&x===Ce[0]}function _e(x){return!!qh&&qh in x}var ke=wA?kh:Nm;function Fe(x){var D=x&&x.constructor,$=typeof D=="function"&&D.prototype||SA;return x===$}function _t(x){return x===x&&!sl(x)}function Tt(x,D){return function($){return $==null?!1:$[x]===D&&(D!==t||x in Do($))}}function Jt(x){var D=km(x,function(Ce){return $.size===C&&$.clear(),Ce}),$=D.cache;return D}function Ht(x,D){var $=x[1],Ce=D[1],Je=$|Ce,mt=Je<(Q|ee|W),Ut=Ce==W&&$==ae||Ce==W&&$==ue&&x[7].length<=D[8]||Ce==(W|ue)&&D[7].length<=D[8]&&$==ae;if(!(mt||Ut))return x;Ce&Q&&(x[2]=D[2],Je|=$&Q?0:V);var Vt=D[3];if(Vt){var sn=x[3];x[3]=sn?xl(sn,Vt,D[4]):Vt,x[4]=sn?hu(x[3],S):D[4]}return Vt=D[5],Vt&&(sn=x[5],x[5]=sn?Pc(sn,Vt,D[6]):Vt,x[6]=sn?hu(x[5],S):D[6]),Vt=D[7],Vt&&(x[7]=Vt),Ce&W&&(x[8]=x[8]==null?D[8]:aa(x[8],D[8])),x[9]==null&&(x[9]=D[9]),x[0]=D[0],x[1]=Je,x}function _n(x){var D=[];if(x!=null)for(var $ in Do(x))D.push($);return D}function Rn(x){return Na.call(x)}function oi(x,D,$){return D=Wo(D===t?x.length-1:D,0),function(){for(var Ce=arguments,Je=-1,mt=Wo(Ce.length-D,0),Ut=vn(mt);++Je<mt;)Ut[Je]=Ce[D+Je];Je=-1;for(var Vt=vn(D+1);++Je<D;)Vt[Je]=Ce[Je];return Vt[D]=$(Ut),fs(x,this,Vt)}}function pi(x,D){return D.length<2?x:uA(x,Xt(D,0,-1))}function Ci(x,D){for(var $=x.length,Ce=aa(D.length,$),Je=bo(x);Ce--;){var mt=D[Ce];x[Ce]=B(mt,$)?Je[mt]:t}return x}function gi(x,D){if(!(D==="constructor"&&typeof x[D]=="function")&&D!="__proto__")return x[D]}var ki=xr(Bt),ar=Bd||function(x,D){return Di.setTimeout(x,D)},Yi=xr(Yt);function Xr(x,D,$){var Ce=D+"";return Yi(x,d(Ce,vs(zs(Ce),$)))}function xr(x){var D=0,$=0;return function(){var Ce=Lu(),Je=we-(Ce-$);if($=Ce,Je>0){if(++D>=Be)return arguments[0]}else D=0;return x.apply(t,arguments)}}function ns(x,D){var $=-1,Ce=x.length,Je=Ce-1;for(D=D===t?Ce:D;++$<D;){var mt=ct($,Je),Ut=x[mt];x[mt]=x[$],x[$]=Ut}return x.length=D,x}var ua=Jt(function(x){var D=[];return x.charCodeAt(0)===46&&D.push(""),x.replace(wi,function($,Ce,Je,mt){D.push(Je?mt.replace(lr,"$1"):Ce||$)}),D});function Yr(x){if(typeof x=="string"||ou(x))return x;var D=x+"";return D=="0"&&1/x==-ot?"-0":D}function ys(x){if(x!=null){try{return Il.call(x)}catch{}try{return x+""}catch{}}return""}function vs(x,D){return Da(It,function($){var Ce="_."+$[0];D&$[1]&&!ph(x,Ce)&&x.push(Ce)}),x.sort()}function ca(x){if(x instanceof gr)return x.clone();var D=new Zo(x.__wrapped__,x.__chain__);return D.__actions__=bo(x.__actions__),D.__index__=x.__index__,D.__values__=x.__values__,D}function Vl(x,D,$){($?E(x,D,$):D===t)?D=1:D=Wo(io(D),0);var Ce=x==null?0:x.length;if(!Ce||D<1)return[];for(var Je=0,mt=0,Ut=vn(Vc(Ce/D));Je<Ce;)Ut[mt++]=Xt(x,Je,Je+=D);return Ut}function Is(x){for(var D=-1,$=x==null?0:x.length,Ce=0,Je=[];++D<$;){var mt=x[D];mt&&(Je[Ce++]=mt)}return Je}function Ns(){var x=arguments.length;if(!x)return[];for(var D=vn(x-1),$=arguments[0],Ce=x;Ce--;)D[Ce-1]=arguments[Ce];return ic(qr($)?bo($):[$],Rr(D,1))}var Br=Ct(function(x,D){return wl(x)?Po(x,Rr(D,1,wl,!0)):[]}),Ea=Ct(function(x,D){var $=wu(D);return wl($)&&($=t),wl(x)?Po(x,Rr(D,1,wl,!0),mr($,2)):[]}),$l=Ct(function(x,D){var $=wu(D);return wl($)&&($=t),wl(x)?Po(x,Rr(D,1,wl,!0),t,$):[]});function fc(x,D,$){var Ce=x==null?0:x.length;return Ce?(D=$||D===t?1:io(D),Xt(x,D<0?0:D,Ce)):[]}function mA(x,D,$){var Ce=x==null?0:x.length;return Ce?(D=$||D===t?1:io(D),D=Ce-D,Xt(x,0,D<0?0:D)):[]}function rh(x,D){return x&&x.length?Lo(x,mr(D,3),!0,!0):[]}function cs(x,D){return x&&x.length?Lo(x,mr(D,3),!0):[]}function Su(x,D,$,Ce){var Je=x==null?0:x.length;return Je?($&&typeof $!="number"&&E(x,D,$)&&($=0,Ce=Je),no(x,D,$,Ce)):[]}function Ml(x,D,$){var Ce=x==null?0:x.length;if(!Ce)return-1;var Je=$==null?0:io($);return Je<0&&(Je=Wo(Ce+Je,0)),VA(x,mr(D,3),Je)}function mc(x,D,$){var Ce=x==null?0:x.length;if(!Ce)return-1;var Je=Ce-1;return $!==t&&(Je=io($),Je=$<0?Wo(Ce+Je,0):aa(Je,Ce-1)),VA(x,mr(D,3),Je,!0)}function al(x){var D=x==null?0:x.length;return D?Rr(x,1):[]}function pA(x){var D=x==null?0:x.length;return D?Rr(x,ot):[]}function Vu(x,D){var $=x==null?0:x.length;return $?(D=D===t?1:io(D),Rr(x,D)):[]}function od(x){for(var D=-1,$=x==null?0:x.length,Ce={};++D<$;){var Je=x[D];Ce[Je[0]]=Je[1]}return Ce}function uf(x){return x&&x.length?x[0]:t}function N1(x,D,$){var Ce=x==null?0:x.length;if(!Ce)return-1;var Je=$==null?0:io($);return Je<0&&(Je=Wo(Ce+Je,0)),Xa(x,D,Je)}function G1(x){var D=x==null?0:x.length;return D?Xt(x,0,-1):[]}var Rd=Ct(function(x){var D=po(x,Qo);return D.length&&D[0]===x[0]?ja(D):[]}),Im=Ct(function(x){var D=wu(x),$=po(x,Qo);return D===wu($)?D=t:$.pop(),$.length&&$[0]===x[0]?ja($,mr(D,2)):[]}),yp=Ct(function(x){var D=wu(x),$=po(x,Qo);return D=typeof D=="function"?D:t,D&&$.pop(),$.length&&$[0]===x[0]?ja($,t,D):[]});function l0(x,D){return x==null?"":IA.call(x,D)}function wu(x){var D=x==null?0:x.length;return D?x[D-1]:t}function vp(x,D,$){var Ce=x==null?0:x.length;if(!Ce)return-1;var Je=Ce;return $!==t&&(Je=io($),Je=Je<0?Wo(Ce+Je,0):aa(Je,Ce-1)),D===D?xA(x,D,Je):VA(x,Fl,Je,!0)}function j1(x,D){return x&&x.length?he(x,io(D)):t}var iy=Ct(Hf);function Hf(x,D){return x&&x.length&&D&&D.length?Xe(x,D):x}function Cp(x,D,$){return x&&x.length&&D&&D.length?Xe(x,D,mr($,2)):x}function _p(x,D,$){return x&&x.length&&D&&D.length?Xe(x,D,t,$):x}var ry=us(function(x,D){var $=x==null?0:x.length,Ce=nh(x,D);return At(x,po(D,function(Je){return B(Je,$)?+Je:Je}).sort(bl)),Ce});function tC(x,D){var $=[];if(!(x&&x.length))return $;var Ce=-1,Je=[],mt=x.length;for(D=mr(D,3);++Ce<mt;){var Ut=x[Ce];D(Ut,Ce,x)&&($.push(Ut),Je.push(Ce))}return At(x,Je),$}function Q0(x){return x==null?x:$c.call(x)}function is(x,D,$){var Ce=x==null?0:x.length;return Ce?($&&typeof $!="number"&&E(x,D,$)?(D=0,$=Ce):(D=D==null?0:io(D),$=$===t?Ce:io($)),Xt(x,D,$)):[]}function Gs(x,D){return An(x,D)}function ta(x,D,$){return qn(x,D,mr($,2))}function Yo(x,D){var $=x==null?0:x.length;if($){var Ce=An(x,D);if(Ce<$&&Zl(x[Ce],D))return Ce}return-1}function rs(x,D){return An(x,D,!0)}function oh(x,D,$){return qn(x,D,mr($,2),!0)}function Vf(x,D){var $=x==null?0:x.length;if($){var Ce=An(x,D,!0)-1;if(Zl(x[Ce],D))return Ce}return-1}function bp(x){return x&&x.length?Qn(x):[]}function W1(x,D){return x&&x.length?Qn(x,mr(D,2)):[]}function cf(x){var D=x==null?0:x.length;return D?Xt(x,1,D):[]}function Sl(x,D,$){return x&&x.length?(D=$||D===t?1:io(D),Xt(x,0,D<0?0:D)):[]}function Pd(x,D,$){var Ce=x==null?0:x.length;return Ce?(D=$||D===t?1:io(D),D=Ce-D,Xt(x,D<0?0:D,Ce)):[]}function $f(x,D){return x&&x.length?Lo(x,mr(D,3),!1,!0):[]}function Y0(x,D){return x&&x.length?Lo(x,mr(D,3)):[]}var ah=Ct(function(x){return cr(Rr(x,1,wl,!0))}),xp=Ct(function(x){var D=wu(x);return wl(D)&&(D=t),cr(Rr(x,1,wl,!0),mr(D,2))}),Zf=Ct(function(x){var D=wu(x);return D=typeof D=="function"?D:t,cr(Rr(x,1,wl,!0),t,D)});function Uc(x){return x&&x.length?cr(x):[]}function q0(x,D){return x&&x.length?cr(x,mr(D,2)):[]}function Q1(x,D){return D=typeof D=="function"?D:t,x&&x.length?cr(x,t,D):[]}function Mp(x){if(!(x&&x.length))return[];var D=0;return x=HA(x,function($){if(wl($))return D=Wo($.length,D),!0}),vh(D,function($){return po(x,Gh($))})}function A0(x,D){if(!(x&&x.length))return[];var $=Mp(x);return D==null?$:po($,function(Ce){return fs(D,t,Ce)})}var hf=Ct(function(x,D){return wl(x)?Po(x,D):[]}),Eu=Ct(function(x){return Aa(HA(x,wl))}),Xf=Ct(function(x){var D=wu(x);return wl(D)&&(D=t),Aa(HA(x,wl),mr(D,2))}),Kd=Ct(function(x){var D=wu(x);return D=typeof D=="function"?D:t,Aa(HA(x,wl),t,D)}),Xs=Ct(Mp);function u0(x,D){return Er(x||[],D||[],Eh)}function H0(x,D){return Er(x||[],D||[],Lt)}var Y1=Ct(function(x){var D=x.length,$=D>1?x[D-1]:t;return $=typeof $=="function"?(x.pop(),$):t,A0(x,$)});function Jf(x){var D=rt(x);return D.__chain__=!0,D}function em(x,D){return D(x),x}function Bu(x,D){return D(x)}var oy=us(function(x){var D=x.length,$=D?x[0]:0,Ce=this.__wrapped__,Je=function(mt){return nh(mt,x)};return D>1||this.__actions__.length||!(Ce instanceof gr)||!B($)?this.thru(Je):(Ce=Ce.slice($,+$+(D?1:0)),Ce.__actions__.push({func:Bu,args:[Je],thisArg:t}),new Zo(Ce,this.__chain__).thru(function(mt){return D&&!mt.length&&mt.push(t),mt}))});function sh(){return Jf(this)}function ay(){return new Zo(this.value(),this.__chain__)}function sy(){this.__values__===t&&(this.__values__=Lc(this.value()));var x=this.__index__>=this.__values__.length,D=x?t:this.__values__[this.__index__++];return{done:x,value:D}}function nC(){return this}function tm(x){for(var D,$=this;$ instanceof Ga;){var Ce=ca($);Ce.__index__=0,Ce.__values__=t,D?Je.__wrapped__=Ce:D=Ce;var Je=Ce;$=$.__wrapped__}return Je.__wrapped__=x,D}function V0(){var x=this.__wrapped__;if(x instanceof gr){var D=x;return this.__actions__.length&&(D=new gr(this)),D=D.reverse(),D.__actions__.push({func:Bu,args:[Q0],thisArg:t}),new Zo(D,this.__chain__)}return this.thru(Q0)}function q1(){return Ra(this.__wrapped__,this.__actions__)}var Sp=_u(function(x,D,$){jo.call(x,$)?++x[$]:yu(x,$,1)});function ly(x,D,$){var Ce=qr(x)?Ru:Lf;return $&&E(x,D,$)&&(D=t),Ce(x,mr(D,3))}function Ay(x,D){var $=qr(x)?HA:Ko;return $(x,mr(D,3))}var uy=xu(Ml),$0=xu(mc);function c0(x,D){return Rr(Ep(x,D),1)}function cy(x,D){return Rr(Ep(x,D),ot)}function nm(x,D,$){return $=$===t?1:io($),Rr(Ep(x,D),$)}function wp(x,D){var $=qr(x)?Da:Wl;return $(x,mr(D,3))}function im(x,D){var $=qr(x)?yd:Xh;return $(x,mr(D,3))}var h0=_u(function(x,D,$){jo.call(x,$)?x[$].push(D):yu(x,$,[D])});function df(x,D,$,Ce){x=Xl(x)?x:Ai(x),$=$&&!Ce?io($):0;var Je=x.length;return $<0&&($=Wo(Je+$,0)),Um(x)?$<=Je&&x.indexOf(D,$)>-1:!!Je&&Xa(x,D,$)>-1}var Z0=Ct(function(x,D,$){var Ce=-1,Je=typeof D=="function",mt=Xl(x)?vn(x.length):[];return Wl(x,function(Ut){mt[++Ce]=Je?fs(D,Ut,$):Cu(Ut,D,$)}),mt}),hy=_u(function(x,D,$){yu(x,$,D)});function Ep(x,D){var $=qr(x)?po:w;return $(x,mr(D,3))}function H1(x,D,$,Ce){return x==null?[]:(qr(D)||(D=D==null?[]:[D]),$=Ce?t:$,qr($)||($=$==null?[]:[$]),pe(x,D,$))}var dy=_u(function(x,D,$){x[$?0:1].push(D)},function(){return[[],[]]});function V1(x,D,$){var Ce=qr(x)?vd:jh,Je=arguments.length<3;return Ce(x,mr(D,4),$,Je,Wl)}function $1(x,D,$){var Ce=qr(x)?dp:jh,Je=arguments.length<3;return Ce(x,mr(D,4),$,Je,Xh)}function Bp(x,D){var $=qr(x)?HA:Ko;return $(x,Dm(mr(D,3)))}function X0(x){var D=qr(x)?gu:wt;return D(x)}function fy(x,D,$){($?E(x,D,$):D===t)?D=1:D=io(D);var Ce=qr(x)?nf:Pt;return Ce(x,D)}function Cs(x){var D=qr(x)?to:dn;return D(x)}function Z1(x){if(x==null)return 0;if(Xl(x))return Um(x)?oc(x):x.length;var D=ol(x);return D==Ot||D==On?x.size:s(x).length}function iC(x,D,$){var Ce=qr(x)?gh:nn;return $&&E(x,D,$)&&(D=t),Ce(x,mr(D,3))}var my=Ct(function(x,D){if(x==null)return[];var $=D.length;return $>1&&E(x,D[0],D[1])?D=[]:$>2&&E(D[0],D[1],D[2])&&(D=[D[0]]),pe(x,Rr(D,1),[])}),J0=mu||function(){return Di.Date.now()};function rC(x,D){if(typeof D!="function")throw new sA(l);return x=io(x),function(){if(--x<1)return D.apply(this,arguments)}}function X1(x,D,$){return D=$?t:D,D=x&&D==null?x.length:D,Jo(x,W,t,t,t,t,D)}function Op(x,D){var $;if(typeof D!="function")throw new sA(l);return x=io(x),function(){return--x>0&&($=D.apply(this,arguments)),x<=1&&(D=t),$}}var $u=Ct(function(x,D,$){var Ce=Q;if($.length){var Je=hu($,Dd($u));Ce|=Z}return Jo(x,Ce,D,$,Je)}),ad=Ct(function(x,D,$){var Ce=Q|ee;if($.length){var Je=hu($,Dd(ad));Ce|=Z}return Jo(D,Ce,x,$,Je)});function Ip(x,D,$){D=$?t:D;var Ce=Jo(x,ae,t,t,t,t,t,D);return Ce.placeholder=Ip.placeholder,Ce}function Tp(x,D,$){D=$?t:D;var Ce=Jo(x,ne,t,t,t,t,t,D);return Ce.placeholder=Tp.placeholder,Ce}function rm(x,D,$){var Ce,Je,mt,Ut,Vt,sn,Yn=0,Hn=!1,ui=!1,Gi=!0;if(typeof x!="function")throw new sA(l);D=uh(D)||0,sl($)&&(Hn=!!$.leading,ui="maxWait"in $,mt=ui?Wo(uh($.maxWait)||0,D):mt,Gi="trailing"in $?!!$.trailing:Gi);function Mr(Iu){var Gm=Ce,M0=Je;return Ce=Je=t,Yn=Iu,Ut=x.apply(M0,Gm),Ut}function ro(Iu){return Yn=Iu,Vt=ar(Ia,D),Hn?Mr(Iu):Ut}function ha(Iu){var Gm=Iu-sn,M0=Iu-Yn,o7=D-Gm;return ui?aa(o7,mt-M0):o7}function oo(Iu){var Gm=Iu-sn,M0=Iu-Yn;return sn===t||Gm>=D||Gm<0||ui&&M0>=mt}function Ia(){var Iu=J0();if(oo(Iu))return qa(Iu);Vt=ar(Ia,ha(Iu))}function qa(Iu){return Vt=t,Gi&&Ce?Mr(Iu):(Ce=Je=t,Ut)}function pf(){Vt!==t&&Qu(Vt),Yn=0,Ce=sn=Je=Vt=t}function ud(){return Vt===t?Ut:qa(J0())}function gf(){var Iu=J0(),Gm=oo(Iu);if(Ce=arguments,Je=this,sn=Iu,Gm){if(Vt===t)return ro(sn);if(ui)return Qu(Vt),Vt=ar(Ia,D),Mr(sn)}return Vt===t&&(Vt=ar(Ia,D)),Ut}return gf.cancel=pf,gf.flush=ud,gf}var lh=Ct(function(x,D){return jl(x,1,D)}),Tm=Ct(function(x,D,$){return jl(x,uh(D)||0,$)});function oC(x){return Jo(x,ge)}function km(x,D){if(typeof x!="function"||D!=null&&typeof D!="function")throw new sA(l);var $=function(){var Ce=arguments,Je=D?D.apply(this,Ce):Ce[0],mt=$.cache;if(mt.has(Je))return mt.get(Je);var Ut=x.apply(this,Ce);return $.cache=mt.set(Je,Ut)||mt,Ut};return $.cache=new(km.Cache||Ja),$}km.Cache=Ja;function Dm(x){if(typeof x!="function")throw new sA(l);return function(){var D=arguments;switch(D.length){case 0:return!x.call(this);case 1:return!x.call(this,D[0]);case 2:return!x.call(this,D[0],D[1]);case 3:return!x.call(this,D[0],D[1],D[2])}return!x.apply(this,D)}}function Rm(x){return Op(2,x)}var J1=Bs(function(x,D){D=D.length==1&&qr(D[0])?po(D[0],oA(mr())):po(Rr(D,1),oA(mr()));var $=D.length;return Ct(function(Ce){for(var Je=-1,mt=aa(Ce.length,$);++Je<mt;)Ce[Je]=D[Je].call(this,Ce[Je]);return fs(x,this,Ce)})}),e1=Ct(function(x,D){var $=hu(D,Dd(e1));return Jo(x,Z,t,D,$)}),kp=Ct(function(x,D){var $=hu(D,Dd(kp));return Jo(x,oe,t,D,$)}),eg=us(function(x,D){return Jo(x,ue,t,t,t,D)});function d0(x,D){if(typeof x!="function")throw new sA(l);return D=D===t?D:io(D),Ct(x,D)}function py(x,D){if(typeof x!="function")throw new sA(l);return D=D==null?0:Wo(io(D),0),Ct(function($){var Ce=$[D],Je=Os($,0,D);return Ce&&ic(Je,Ce),fs(x,this,Je)})}function tg(x,D,$){var Ce=!0,Je=!0;if(typeof x!="function")throw new sA(l);return sl($)&&(Ce="leading"in $?!!$.leading:Ce,Je="trailing"in $?!!$.trailing:Je),rm(x,D,{leading:Ce,maxWait:D,trailing:Je})}function ng(x){return X1(x,1)}function gy(x,D){return e1(ts(D),x)}function aC(){if(!arguments.length)return[];var x=arguments[0];return qr(x)?x:[x]}function f0(x){return _l(x,K)}function sC(x,D){return D=typeof D=="function"?D:t,_l(x,K,D)}function yy(x){return _l(x,O|K)}function na(x,D){return D=typeof D=="function"?D:t,_l(x,O|K,D)}function m0(x,D){return D==null||rf(x,D,ie(D))}function Zl(x,D){return x===D||x!==x&&D!==D}var t1=rd(Ql),ig=rd(function(x,D){return x>=D}),Ud=kc(function(){return arguments}())?kc:function(x){return ll(x)&&jo.call(x,"callee")&&!Tr.call(x,"callee")},qr=vn.isArray,p0=co?oA(co):$s;function Xl(x){return x!=null&&om(x.length)&&!kh(x)}function wl(x){return ll(x)&&Xl(x)}function g0(x){return x===!0||x===!1||ll(x)&&go(x)==Le}var ff=xh||Nm,n1=Go?oA(Go):es;function rg(x){return ll(x)&&x.nodeType===1&&!Ah(x)}function Zu(x){if(x==null)return!0;if(Xl(x)&&(qr(x)||typeof x=="string"||typeof x.splice=="function"||ff(x)||Dp(x)||Ud(x)))return!x.length;var D=ol(x);if(D==Ot||D==On)return!x.size;if(Fe(x))return!s(x).length;for(var $ in x)if(jo.call(x,$))return!1;return!0}function Ba(x,D){return cA(x,D)}function Pm(x,D,$){$=typeof $=="function"?$:t;var Ce=$?$(x,D):t;return Ce===t?cA(x,D,t,$):!!Ce}function Js(x){if(!ll(x))return!1;var D=go(x);return D==He||D==Re||typeof x.message=="string"&&typeof x.name=="string"&&!Ah(x)}function vy(x){return typeof x=="number"&&Hh(x)}function kh(x){if(!sl(x))return!1;var D=go(x);return D==bt||D==vt||D==Rt||D==Wt}function y0(x){return typeof x=="number"&&x==io(x)}function om(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=yt}function sl(x){var D=typeof x;return x!=null&&(D=="object"||D=="function")}function ll(x){return x!=null&&typeof x=="object"}var sd=zr?oA(zr):uc;function i1(x,D){return x===D||cc(x,D,ea(D))}function Cy(x,D,$){return $=typeof $=="function"?$:t,cc(x,D,ea(D),$)}function og(x){return ag(x)&&x!=+x}function _y(x){if(ke(x))throw new Sr(a);return Yl(x)}function by(x){return x===null}function lC(x){return x==null}function ag(x){return typeof x=="number"||ll(x)&&go(x)==qt}function Ah(x){if(!ll(x)||go(x)!=on)return!1;var D=wc(x);if(D===null)return!0;var $=jo.call(D,"constructor")&&D.constructor;return typeof $=="function"&&$ instanceof $&&Il.call($)==Hs}var Km=Ys?oA(Ys):td;function r1(x){return y0(x)&&x>=-yt&&x<=yt}var v0=Ll?oA(Ll):nd;function Um(x){return typeof x=="string"||!qr(x)&&ll(x)&&go(x)==Bn}function ou(x){return typeof x=="symbol"||ll(x)&&go(x)==In}var Dp=qA?oA(qA):Td;function ld(x){return x===t}function sg(x){return ll(x)&&ol(x)==ei}function Lm(x){return ll(x)&&go(x)==Kn}var PA=rd(_),Fm=rd(function(x,D){return x<=D});function Lc(x){if(!x)return[];if(Xl(x))return Um(x)?MA(x):bo(x);if(Ec&&x[Ec])return fp(x[Ec]());var D=ol(x),$=D==Ot?qc:D==On?ZA:Ai;return $(x)}function Ad(x){if(!x)return x===0?x:0;if(x=uh(x),x===ot||x===-ot){var D=x<0?-1:1;return D*nt}return x===x?x:0}function io(x){var D=Ad(x),$=D%1;return D===D?$?D-$:D:0}function Ld(x){return x?tu(io(x),0,Ne):0}function uh(x){if(typeof x=="number")return x;if(ou(x))return be;if(sl(x)){var D=typeof x.valueOf=="function"?x.valueOf():x;x=sl(D)?D+"":D}if(typeof x!="string")return x===0?x:+x;x=Rf(x);var $=Ir.test(x);return $||gl.test(x)?Xn(x.slice(2),$?2:8):La.test(x)?be:+x}function lg(x){return Xo(x,Ae(x))}function Rp(x){return x?tu(io(x),-yt,yt):x===0?x:0}function Pa(x){return x==null?"":bi(x)}var Ag=dA(function(x,D){if(Fe(D)||Xl(D)){Xo(D,ie(D),x);return}for(var $ in D)jo.call(D,$)&&Eh(x,$,D[$])}),o1=dA(function(x,D){Xo(D,Ae(D),x)}),C0=dA(function(x,D,$,Ce){Xo(D,Ae(D),x,Ce)}),_0=dA(function(x,D,$,Ce){Xo(D,ie(D),x,Ce)}),ug=us(nh);function xy(x,D){var $=Vs(x);return D==null?$:Ac($,D)}var cg=Ct(function(x,D){x=Do(x);var $=-1,Ce=D.length,Je=Ce>2?D[2]:t;for(Je&&E(D[0],D[1],Je)&&(Ce=1);++$<Ce;)for(var mt=D[$],Ut=Ae(mt),Vt=-1,sn=Ut.length;++Vt<sn;){var Yn=Ut[Vt],Hn=x[Yn];(Hn===t||Zl(Hn,SA[Yn])&&!jo.call(x,Yn))&&(x[Yn]=mt[Yn])}return x}),b0=Ct(function(x){return x.push(t,Ih),fs(Ve,t,x)});function Fd(x,D){return kf(x,mr(D,3),Ti)}function zm(x,D){return kf(x,mr(D,3),Tc)}function a1(x,D){return x==null?x:Wu(x,mr(D,3),Ae)}function hg(x,D){return x==null?x:Oi(x,mr(D,3),Ae)}function Pp(x,D){return x&&Ti(x,mr(D,3))}function h(x,D){return x&&Tc(x,mr(D,3))}function A(x){return x==null?[]:DA(x,ie(x))}function c(x){return x==null?[]:DA(x,Ae(x))}function y(x,D,$){var Ce=x==null?t:uA(x,D);return Ce===t?$:Ce}function M(x,D){return x!=null&&qf(x,D,Ff)}function R(x,D){return x!=null&&qf(x,D,Jh)}var P=iu(function(x,D,$){D!=null&&typeof D.toString!="function"&&(D=Na.call(D)),x[D]=$},hn(fn)),G=iu(function(x,D,$){D!=null&&typeof D.toString!="function"&&(D=Na.call(D)),jo.call(x,D)?x[D].push($):x[D]=[$]},mr),H=Ct(Cu);function ie(x){return Xl(x)?Ic(x):s(x)}function Ae(x){return Xl(x)?Ic(x,!0):f(x)}function ve(x,D){var $={};return D=mr(D,3),Ti(x,function(Ce,Je,mt){yu($,D(Ce,Je,mt),Ce)}),$}function Ke(x,D){var $={};return D=mr(D,3),Ti(x,function(Ce,Je,mt){yu($,Je,D(Ce,Je,mt))}),$}var Qe=dA(function(x,D,$){q(x,D,$)}),Ve=dA(function(x,D,$,Ce){q(x,D,$,Ce)}),et=us(function(x,D){var $={};if(x==null)return $;var Ce=!1;D=po(D,function(mt){return mt=Wa(mt,x),Ce||(Ce=mt.length>1),mt}),Xo(x,Om(x),$),Ce&&($=_l($,O|U|K,Wf));for(var Je=D.length;Je--;)_o($,D[Je]);return $});function ut(x,D){return Qt(x,Dm(mr(D)))}var Mt=us(function(x,D){return x==null?{}:Ee(x,D)});function Qt(x,D){if(x==null)return{};var $=po(Om(x),function(Ce){return[Ce]});return D=mr(D),Se(x,$,function(Ce,Je){return D(Ce,Je[0])})}function Dt(x,D,$){D=Wa(D,x);var Ce=-1,Je=D.length;for(Je||(Je=1,x=t);++Ce<Je;){var mt=x==null?t:x[Yr(D[Ce])];mt===t&&(Ce=Je,mt=$),x=kh(mt)?mt.call(x):mt}return x}function zt(x,D,$){return x==null?x:Lt(x,D,$)}function ln(x,D,$,Ce){return Ce=typeof Ce=="function"?Ce:t,x==null?x:Lt(x,D,$,Ce)}var Cn=af(ie),Un=af(Ae);function mi(x,D,$){var Ce=qr(x),Je=Ce||ff(x)||Dp(x);if(D=mr(D,4),$==null){var mt=x&&x.constructor;Je?$=Ce?new mt:[]:sl(x)?$=kh(mt)?Vs(wc(x)):{}:$={}}return(Je?Da:Ti)(x,function(Ut,Vt,sn){return D($,Ut,Vt,sn)}),$}function ai(x,D){return x==null?!0:_o(x,D)}function di(x,D,$){return x==null?x:la(x,D,ts($))}function tr(x,D,$,Ce){return Ce=typeof Ce=="function"?Ce:t,x==null?x:la(x,D,ts($),Ce)}function Ai(x){return x==null?[]:Pf(x,ie(x))}function fi(x){return x==null?[]:Pf(x,Ae(x))}function En(x,D,$){return $===t&&($=D,D=t),$!==t&&($=uh($),$=$===$?$:0),D!==t&&(D=uh(D),D=D===D?D:0),tu(uh(x),D,$)}function fr(x,D,$){return D=Ad(D),$===t?($=D,D=0):$=Ad($),x=uh(x),Uo(x,D,$)}function wr(x,D,$){if($&&typeof $!="boolean"&&E(x,D,$)&&(D=$=t),$===t&&(typeof D=="boolean"?($=D,D=t):typeof x=="boolean"&&($=x,x=t)),x===t&&D===t?(x=0,D=1):(x=Ad(x),D===t?(D=x,x=0):D=Ad(D)),x>D){var Ce=x;x=D,D=Ce}if($||x%1||D%1){var Je=Bc();return aa(x+Je*(D-x+Si("1e-"+((Je+"").length-1))),D)}return ct(x,D)}var sr=Qa(function(x,D,$){return D=D.toLowerCase(),x+($?Ui(D):D)});function Ui(x){return T(Pa(x).toLowerCase())}function Gr(x){return x=Pa(x),x&&x.replace(So,Md).replace(rA,"")}function Ka(x,D,$){x=Pa(x),D=bi(D);var Ce=x.length;$=$===t?Ce:tu(io($),0,Ce);var Je=$;return $-=D.length,$>=0&&x.slice($,Je)==D}function _s(x){return x=Pa(x),x&&Dn.test(x)?x.replace(it,Pu):x}function kl(x){return x=Pa(x),x&&ti.test(x)?x.replace(hi,"\\$&"):x}var Ou=Qa(function(x,D,$){return x+($?"-":"")+D.toLowerCase()}),Dl=Qa(function(x,D,$){return x+($?" ":"")+D.toLowerCase()}),KA=nu("toLowerCase");function Ts(x,D,$){x=Pa(x),D=io(D);var Ce=D?oc(x):0;if(!D||Ce>=D)return x;var Je=(D-Ce)/2;return of(OA(Je),$)+x+of(Vc(Je),$)}function Al(x,D,$){x=Pa(x),D=io(D);var Ce=D?oc(x):0;return D&&Ce<D?x+of(D-Ce,$):x}function UA(x,D,$){x=Pa(x),D=io(D);var Ce=D?oc(x):0;return D&&Ce<D?of(D-Ce,$)+x:x}function gA(x,D,$){return $||D==null?D=0:D&&(D=+D),Fu(Pa(x).replace(Wi,""),D||0)}function LA(x,D,$){return($?E(x,D,$):D===t)?D=1:D=io(D),xt(Pa(x),D)}function Fc(){var x=arguments,D=Pa(x[0]);return x.length<3?D:D.replace(x[1],x[2])}var yA=Qa(function(x,D,$){return x+($?"_":"")+D.toLowerCase()});function au(x,D,$){return $&&typeof $!="number"&&E(x,D,$)&&(D=$=t),$=$===t?Ne:$>>>0,$?(x=Pa(x),x&&(typeof D=="string"||D!=null&&!Km(D))&&(D=bi(D),!D&&Mc(x))?Os(MA(x),0,$):x.split(D,$)):[]}var ul=Qa(function(x,D,$){return x+($?" ":"")+T(D)});function Jl(x,D,$){return x=Pa(x),$=$==null?0:tu(io($),0,x.length),D=bi(D),x.slice($,$+D.length)==D}function cl(x,D,$){var Ce=rt.templateSettings;$&&E(x,D,$)&&(D=t),x=Pa(x),D=C0({},D,Ce,Bm);var Je=C0({},D.imports,Ce.imports,Bm),mt=ie(Je),Ut=Pf(Je,mt),Vt,sn,Yn=0,Hn=D.interpolate||$a,ui="__p += '",Gi=Hc((D.escape||$a).source+"|"+Hn.source+"|"+(Hn===Wn?zi:$a).source+"|"+(D.evaluate||$a).source+"|$","g"),Mr="//# sourceURL="+(jo.call(D,"sourceURL")?(D.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Zi+"]")+`
`;x.replace(Gi,function(oo,Ia,qa,pf,ud,gf){return qa||(qa=pf),ui+=x.slice(Yn,gf).replace(Ol,$A),Ia&&(Vt=!0,ui+=`' +
__e(`+Ia+`) +
'`),ud&&(sn=!0,ui+=`';
`+ud+`;
__p += '`),qa&&(ui+=`' +
((__t = (`+qa+`)) == null ? '' : __t) +
'`),Yn=gf+oo.length,oo}),ui+=`';
`;var ro=jo.call(D,"variable")&&D.variable;if(!ro)ui=`with (obj) {
`+ui+`
}
`;else if(Zn.test(ro))throw new Sr(o);ui=(sn?ui.replace(g,""):ui).replace(gt,"$1").replace(ht,"$1;"),ui="function("+(ro||"obj")+`) {
`+(ro?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Vt?", __e = _.escape":"")+(sn?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ui+`return __p
}`;var ha=se(function(){return Oo(mt,Mr+"return "+ui).apply(t,Ut)});if(ha.source=ui,Js(ha))throw ha;return ha}function hl(x){return Pa(x).toLowerCase()}function Ya(x){return Pa(x).toUpperCase()}function Dh(x,D,$){if(x=Pa(x),x&&($||D===t))return Rf(x);if(!x||!(D=bi(D)))return x;var Ce=MA(x),Je=MA(D),mt=aA(Ce,Je),Ut=xc(Ce,Je)+1;return Os(Ce,mt,Ut).join("")}function Kp(x,D,$){if(x=Pa(x),x&&($||D===t))return x.slice(0,Ku(x)+1);if(!x||!(D=bi(D)))return x;var Ce=MA(x),Je=xc(Ce,MA(D))+1;return Os(Ce,0,Je).join("")}function zc(x,D,$){if(x=Pa(x),x&&($||D===t))return x.replace(Wi,"");if(!x||!(D=bi(D)))return x;var Ce=MA(x),Je=aA(Ce,MA(D));return Os(Ce,Je).join("")}function u(x,D){var $=ye,Ce=Me;if(sl(D)){var Je="separator"in D?D.separator:Je;$="length"in D?io(D.length):$,Ce="omission"in D?bi(D.omission):Ce}x=Pa(x);var mt=x.length;if(Mc(x)){var Ut=MA(x);mt=Ut.length}if($>=mt)return x;var Vt=$-oc(Ce);if(Vt<1)return Ce;var sn=Ut?Os(Ut,0,Vt).join(""):x.slice(0,Vt);if(Je===t)return sn+Ce;if(Ut&&(Vt+=sn.length-Vt),Km(Je)){if(x.slice(Vt).search(Je)){var Yn,Hn=sn;for(Je.global||(Je=Hc(Je.source,Pa(vr.exec(Je))+"g")),Je.lastIndex=0;Yn=Je.exec(Hn);)var ui=Yn.index;sn=sn.slice(0,ui===t?Vt:ui)}}else if(x.indexOf(bi(Je),Vt)!=Vt){var Gi=sn.lastIndexOf(Je);Gi>-1&&(sn=sn.slice(0,Gi))}return sn+Ce}function p(x){return x=Pa(x),x&&en.test(x)?x.replace(kt,Bo):x}var b=Qa(function(x,D,$){return x+($?" ":"")+D.toUpperCase()}),T=nu("toUpperCase");function Y(x,D,$){return x=Pa(x),D=$?t:D,D===t?Yh(x)?Sm(x):Tf(x):x.match(D)||[]}var se=Ct(function(x,D){try{return fs(x,t,D)}catch($){return Js($)?$:new Sr($)}}),je=us(function(x,D){return Da(D,function($){$=Yr($),yu(x,$,$u(x[$],x))}),x});function at(x){var D=x==null?0:x.length,$=mr();return x=D?po(x,function(Ce){if(typeof Ce[1]!="function")throw new sA(l);return[$(Ce[0]),Ce[1]]}):[],Ct(function(Ce){for(var Je=-1;++Je<D;){var mt=x[Je];if(fs(mt[0],this,Ce))return fs(mt[1],this,Ce)}})}function Ft(x){return Em(_l(x,O))}function hn(x){return function(){return x}}function kn(x,D){return x==null||x!==x?D:x}var Gn=Mu(),mn=Mu(!0);function fn(x){return x}function Pr(x){return I(typeof x=="function"?x:_l(x,O))}function Kr(x){return k(_l(x,O))}function bs(x,D){return N(x,_l(D,O))}var tn=Ct(function(x,D){return function($){return Cu($,x,D)}}),$t=Ct(function(x,D){return function($){return Cu(x,$,D)}});function un(x,D,$){var Ce=ie(D),Je=DA(D,Ce);$==null&&!(sl(D)&&(Je.length||!Ce.length))&&($=D,D=x,x=this,Je=DA(D,ie(D)));var mt=!(sl($)&&"chain"in $)||!!$.chain,Ut=kh(x);return Da(Je,function(Vt){var sn=D[Vt];x[Vt]=sn,Ut&&(x.prototype[Vt]=function(){var Yn=this.__chain__;if(mt||Yn){var Hn=x(this.__wrapped__),ui=Hn.__actions__=bo(this.__actions__);return ui.push({func:sn,args:arguments,thisArg:x}),Hn.__chain__=Yn,Hn}return sn.apply(x,ic([this.value()],arguments))})}),x}function Ln(){return Di._===this&&(Di._=ws),this}function ir(){}function qo(x){return x=io(x),Ct(function(D){return he(D,x)})}var nr=Nf(po),Or=Nf(Ru),FA=Nf(gh);function Oa(x){return F(x)?Gh(Yr(x)):Ue(x)}function am(x){return function(D){return x==null?t:uA(x,D)}}var AC=dc(),pc=dc(!0);function ch(){return[]}function Nm(){return!1}function mf(){return{}}function x0(){return""}function sm(){return!0}function Dj(x,D){if(x=io(x),x<1||x>yt)return[];var $=Ne,Ce=aa(x,Ne);D=mr(D),x-=Ne;for(var Je=vh(Ce,D);++$<x;)D($);return Je}function Rj(x){return qr(x)?po(x,Yr):ou(x)?[x]:bo(ua(Pa(x)))}function Pj(x){var D=++fu;return Pa(x)+D}var Kj=id(function(x,D){return x+D},0),Uj=jf("ceil"),Lj=id(function(x,D){return x/D},1),Fj=jf("floor");function zj(x){return x&&x.length?vu(x,fn,Ql):t}function Nj(x,D){return x&&x.length?vu(x,mr(D,2),Ql):t}function Gj(x){return bd(x,fn)}function jj(x,D){return bd(x,mr(D,2))}function Wj(x){return x&&x.length?vu(x,fn,_):t}function Qj(x,D){return x&&x.length?vu(x,mr(D,2),_):t}var Yj=id(function(x,D){return x*D},1),qj=jf("round"),Hj=id(function(x,D){return x-D},0);function Vj(x){return x&&x.length?yh(x,fn):0}function $j(x,D){return x&&x.length?yh(x,mr(D,2)):0}return rt.after=rC,rt.ary=X1,rt.assign=Ag,rt.assignIn=o1,rt.assignInWith=C0,rt.assignWith=_0,rt.at=ug,rt.before=Op,rt.bind=$u,rt.bindAll=je,rt.bindKey=ad,rt.castArray=aC,rt.chain=Jf,rt.chunk=Vl,rt.compact=Is,rt.concat=Ns,rt.cond=at,rt.conforms=Ft,rt.constant=hn,rt.countBy=Sp,rt.create=xy,rt.curry=Ip,rt.curryRight=Tp,rt.debounce=rm,rt.defaults=cg,rt.defaultsDeep=b0,rt.defer=lh,rt.delay=Tm,rt.difference=Br,rt.differenceBy=Ea,rt.differenceWith=$l,rt.drop=fc,rt.dropRight=mA,rt.dropRightWhile=rh,rt.dropWhile=cs,rt.fill=Su,rt.filter=Ay,rt.flatMap=c0,rt.flatMapDeep=cy,rt.flatMapDepth=nm,rt.flatten=al,rt.flattenDeep=pA,rt.flattenDepth=Vu,rt.flip=oC,rt.flow=Gn,rt.flowRight=mn,rt.fromPairs=od,rt.functions=A,rt.functionsIn=c,rt.groupBy=h0,rt.initial=G1,rt.intersection=Rd,rt.intersectionBy=Im,rt.intersectionWith=yp,rt.invert=P,rt.invertBy=G,rt.invokeMap=Z0,rt.iteratee=Pr,rt.keyBy=hy,rt.keys=ie,rt.keysIn=Ae,rt.map=Ep,rt.mapKeys=ve,rt.mapValues=Ke,rt.matches=Kr,rt.matchesProperty=bs,rt.memoize=km,rt.merge=Qe,rt.mergeWith=Ve,rt.method=tn,rt.methodOf=$t,rt.mixin=un,rt.negate=Dm,rt.nthArg=qo,rt.omit=et,rt.omitBy=ut,rt.once=Rm,rt.orderBy=H1,rt.over=nr,rt.overArgs=J1,rt.overEvery=Or,rt.overSome=FA,rt.partial=e1,rt.partialRight=kp,rt.partition=dy,rt.pick=Mt,rt.pickBy=Qt,rt.property=Oa,rt.propertyOf=am,rt.pull=iy,rt.pullAll=Hf,rt.pullAllBy=Cp,rt.pullAllWith=_p,rt.pullAt=ry,rt.range=AC,rt.rangeRight=pc,rt.rearg=eg,rt.reject=Bp,rt.remove=tC,rt.rest=d0,rt.reverse=Q0,rt.sampleSize=fy,rt.set=zt,rt.setWith=ln,rt.shuffle=Cs,rt.slice=is,rt.sortBy=my,rt.sortedUniq=bp,rt.sortedUniqBy=W1,rt.split=au,rt.spread=py,rt.tail=cf,rt.take=Sl,rt.takeRight=Pd,rt.takeRightWhile=$f,rt.takeWhile=Y0,rt.tap=em,rt.throttle=tg,rt.thru=Bu,rt.toArray=Lc,rt.toPairs=Cn,rt.toPairsIn=Un,rt.toPath=Rj,rt.toPlainObject=lg,rt.transform=mi,rt.unary=ng,rt.union=ah,rt.unionBy=xp,rt.unionWith=Zf,rt.uniq=Uc,rt.uniqBy=q0,rt.uniqWith=Q1,rt.unset=ai,rt.unzip=Mp,rt.unzipWith=A0,rt.update=di,rt.updateWith=tr,rt.values=Ai,rt.valuesIn=fi,rt.without=hf,rt.words=Y,rt.wrap=gy,rt.xor=Eu,rt.xorBy=Xf,rt.xorWith=Kd,rt.zip=Xs,rt.zipObject=u0,rt.zipObjectDeep=H0,rt.zipWith=Y1,rt.entries=Cn,rt.entriesIn=Un,rt.extend=o1,rt.extendWith=C0,un(rt,rt),rt.add=Kj,rt.attempt=se,rt.camelCase=sr,rt.capitalize=Ui,rt.ceil=Uj,rt.clamp=En,rt.clone=f0,rt.cloneDeep=yy,rt.cloneDeepWith=na,rt.cloneWith=sC,rt.conformsTo=m0,rt.deburr=Gr,rt.defaultTo=kn,rt.divide=Lj,rt.endsWith=Ka,rt.eq=Zl,rt.escape=_s,rt.escapeRegExp=kl,rt.every=ly,rt.find=uy,rt.findIndex=Ml,rt.findKey=Fd,rt.findLast=$0,rt.findLastIndex=mc,rt.findLastKey=zm,rt.floor=Fj,rt.forEach=wp,rt.forEachRight=im,rt.forIn=a1,rt.forInRight=hg,rt.forOwn=Pp,rt.forOwnRight=h,rt.get=y,rt.gt=t1,rt.gte=ig,rt.has=M,rt.hasIn=R,rt.head=uf,rt.identity=fn,rt.includes=df,rt.indexOf=N1,rt.inRange=fr,rt.invoke=H,rt.isArguments=Ud,rt.isArray=qr,rt.isArrayBuffer=p0,rt.isArrayLike=Xl,rt.isArrayLikeObject=wl,rt.isBoolean=g0,rt.isBuffer=ff,rt.isDate=n1,rt.isElement=rg,rt.isEmpty=Zu,rt.isEqual=Ba,rt.isEqualWith=Pm,rt.isError=Js,rt.isFinite=vy,rt.isFunction=kh,rt.isInteger=y0,rt.isLength=om,rt.isMap=sd,rt.isMatch=i1,rt.isMatchWith=Cy,rt.isNaN=og,rt.isNative=_y,rt.isNil=lC,rt.isNull=by,rt.isNumber=ag,rt.isObject=sl,rt.isObjectLike=ll,rt.isPlainObject=Ah,rt.isRegExp=Km,rt.isSafeInteger=r1,rt.isSet=v0,rt.isString=Um,rt.isSymbol=ou,rt.isTypedArray=Dp,rt.isUndefined=ld,rt.isWeakMap=sg,rt.isWeakSet=Lm,rt.join=l0,rt.kebabCase=Ou,rt.last=wu,rt.lastIndexOf=vp,rt.lowerCase=Dl,rt.lowerFirst=KA,rt.lt=PA,rt.lte=Fm,rt.max=zj,rt.maxBy=Nj,rt.mean=Gj,rt.meanBy=jj,rt.min=Wj,rt.minBy=Qj,rt.stubArray=ch,rt.stubFalse=Nm,rt.stubObject=mf,rt.stubString=x0,rt.stubTrue=sm,rt.multiply=Yj,rt.nth=j1,rt.noConflict=Ln,rt.noop=ir,rt.now=J0,rt.pad=Ts,rt.padEnd=Al,rt.padStart=UA,rt.parseInt=gA,rt.random=wr,rt.reduce=V1,rt.reduceRight=$1,rt.repeat=LA,rt.replace=Fc,rt.result=Dt,rt.round=qj,rt.runInContext=Zt,rt.sample=X0,rt.size=Z1,rt.snakeCase=yA,rt.some=iC,rt.sortedIndex=Gs,rt.sortedIndexBy=ta,rt.sortedIndexOf=Yo,rt.sortedLastIndex=rs,rt.sortedLastIndexBy=oh,rt.sortedLastIndexOf=Vf,rt.startCase=ul,rt.startsWith=Jl,rt.subtract=Hj,rt.sum=Vj,rt.sumBy=$j,rt.template=cl,rt.times=Dj,rt.toFinite=Ad,rt.toInteger=io,rt.toLength=Ld,rt.toLower=hl,rt.toNumber=uh,rt.toSafeInteger=Rp,rt.toString=Pa,rt.toUpper=Ya,rt.trim=Dh,rt.trimEnd=Kp,rt.trimStart=zc,rt.truncate=u,rt.unescape=p,rt.uniqueId=Pj,rt.upperCase=b,rt.upperFirst=T,rt.each=wp,rt.eachRight=im,rt.first=uf,un(rt,function(){var x={};return Ti(rt,function(D,$){jo.call(rt.prototype,$)||(x[$]=D)}),x}(),{chain:!1}),rt.VERSION=i,Da(["bind","bindKey","curry","curryRight","partial","partialRight"],function(x){rt[x].placeholder=rt}),Da(["drop","take"],function(x,D){gr.prototype[x]=function($){$=$===t?1:Wo(io($),0);var Ce=this.__filtered__&&!D?new gr(this):this.clone();return Ce.__filtered__?Ce.__takeCount__=aa($,Ce.__takeCount__):Ce.__views__.push({size:aa($,Ne),type:x+(Ce.__dir__<0?"Right":"")}),Ce},gr.prototype[x+"Right"]=function($){return this.reverse()[x]($).reverse()}}),Da(["filter","map","takeWhile"],function(x,D){var $=D+1,Ce=$==qe||$==ze;gr.prototype[x]=function(Je){var mt=this.clone();return mt.__iteratees__.push({iteratee:mr(Je,3),type:$}),mt.__filtered__=mt.__filtered__||Ce,mt}}),Da(["head","last"],function(x,D){var $="take"+(D?"Right":"");gr.prototype[x]=function(){return this[$](1).value()[0]}}),Da(["initial","tail"],function(x,D){var $="drop"+(D?"":"Right");gr.prototype[x]=function(){return this.__filtered__?new gr(this):this[$](1)}}),gr.prototype.compact=function(){return this.filter(fn)},gr.prototype.find=function(x){return this.filter(x).head()},gr.prototype.findLast=function(x){return this.reverse().find(x)},gr.prototype.invokeMap=Ct(function(x,D){return typeof x=="function"?new gr(this):this.map(function($){return Cu($,x,D)})}),gr.prototype.reject=function(x){return this.filter(Dm(mr(x)))},gr.prototype.slice=function(x,D){x=io(x);var $=this;return $.__filtered__&&(x>0||D<0)?new gr($):(x<0?$=$.takeRight(-x):x&&($=$.drop(x)),D!==t&&(D=io(D),$=D<0?$.dropRight(-D):$.take(D-x)),$)},gr.prototype.takeRightWhile=function(x){return this.reverse().takeWhile(x).reverse()},gr.prototype.toArray=function(){return this.take(Ne)},Ti(gr.prototype,function(x,D){var $=/^(?:filter|find|map|reject)|While$/.test(D),Ce=/^(?:head|last)$/.test(D),Je=rt[Ce?"take"+(D=="last"?"Right":""):D],mt=Ce||/^find/.test(D);Je&&(rt.prototype[D]=function(){var Ut=this.__wrapped__,Vt=Ce?[1]:arguments,sn=Ut instanceof gr,Yn=Vt[0],Hn=sn||qr(Ut),ui=function(Ia){var qa=Je.apply(rt,ic([Ia],Vt));return Ce&&Gi?qa[0]:qa};Hn&&$&&typeof Yn=="function"&&Yn.length!=1&&(sn=Hn=!1);var Gi=this.__chain__,Mr=!!this.__actions__.length,ro=mt&&!Gi,ha=sn&&!Mr;if(!mt&&Hn){Ut=ha?Ut:new gr(this);var oo=x.apply(Ut,Vt);return oo.__actions__.push({func:Bu,args:[ui],thisArg:t}),new Zo(oo,Gi)}return ro&&ha?x.apply(this,Vt):(oo=this.thru(ui),ro?Ce?oo.value()[0]:oo.value():oo)})}),Da(["pop","push","shift","sort","splice","unshift"],function(x){var D=wd[x],$=/^(?:push|sort|unshift)$/.test(x)?"tap":"thru",Ce=/^(?:pop|shift)$/.test(x);rt.prototype[x]=function(){var Je=arguments;if(Ce&&!this.__chain__){var mt=this.value();return D.apply(qr(mt)?mt:[],Je)}return this[$](function(Ut){return D.apply(qr(Ut)?Ut:[],Je)})}}),Ti(gr.prototype,function(x,D){var $=rt[D];if($){var Ce=$.name+"";jo.call(pu,Ce)||(pu[Ce]=[]),pu[Ce].push({name:D,func:$})}}),pu[wa(t,ee).name]=[{name:"wrapper",func:t}],gr.prototype.clone=ps,gr.prototype.reverse=Jc,gr.prototype.value=Sh,rt.prototype.at=oy,rt.prototype.chain=sh,rt.prototype.commit=ay,rt.prototype.next=sy,rt.prototype.plant=tm,rt.prototype.reverse=V0,rt.prototype.toJSON=rt.prototype.valueOf=rt.prototype.value=q1,rt.prototype.first=rt.prototype.head,Ec&&(rt.prototype[Ec]=nC),rt},zl=Sc();eo?((eo.exports=zl)._=zl,Xi._=zl):Di._=zl}).call(LQ)}(EC,EC.exports)),EC.exports}var J_=FQ();const A6=WA(J_);function zQ(n,e,t){const i=e<0?n.length+e:e;if(i>=0&&i<n.length){const r=t<0?n.length+t:t,[a]=n.splice(e,1);n.splice(r,0,a)}}var d4,V7;function NQ(){if(V7)return d4;V7=1;function n(e){for(var t=5381,i=e.length;i;)t=t*33^e.charCodeAt(--i);return t>>>0}return d4=n,d4}var GQ=NQ();const $7=WA(GQ);var _f=Uint8Array,Av=Uint16Array,jQ=Int32Array,ZU=new _f([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),XU=new _f([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),WQ=new _f([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),JU=function(n,e){for(var t=new Av(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new jQ(t[30]),i=1;i<30;++i)for(var a=t[i];a<t[i+1];++a)r[a]=a-t[i]<<5|i;return{b:t,r}},eL=JU(ZU,2),tL=eL.b,QQ=eL.r;tL[28]=258,QQ[258]=28;var YQ=JU(XU,0),qQ=YQ.b,u6=new Av(32768);for(var nA=0;nA<32768;++nA){var s1=(nA&43690)>>1|(nA&21845)<<1;s1=(s1&52428)>>2|(s1&13107)<<2,s1=(s1&61680)>>4|(s1&3855)<<4,u6[nA]=((s1&65280)>>8|(s1&255)<<8)>>1}var YC=function(n,e,t){for(var i=n.length,r=0,a=new Av(e);r<i;++r)n[r]&&++a[n[r]-1];var l=new Av(e);for(r=1;r<e;++r)l[r]=l[r-1]+a[r-1]<<1;var o;if(t){o=new Av(1<<e);var m=15-e;for(r=0;r<i;++r)if(n[r])for(var C=r<<4|n[r],S=e-n[r],O=l[n[r]-1]++<<S,U=O|(1<<S)-1;O<=U;++O)o[u6[O]>>m]=C}else for(o=new Av(i),r=0;r<i;++r)n[r]&&(o[r]=u6[l[n[r]-1]++]>>15-n[r]);return o},eb=new _f(288);for(var nA=0;nA<144;++nA)eb[nA]=8;for(var nA=144;nA<256;++nA)eb[nA]=9;for(var nA=256;nA<280;++nA)eb[nA]=7;for(var nA=280;nA<288;++nA)eb[nA]=8;var nL=new _f(32);for(var nA=0;nA<32;++nA)nL[nA]=5;var HQ=YC(eb,9,1),VQ=YC(nL,5,1),f4=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},jm=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},m4=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},$Q=function(n){return(n+7)/8|0},ZQ=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new _f(n.subarray(e,t))},XQ=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],yf=function(n,e,t){var i=new Error(e||XQ[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,yf),!t)throw i;return i},BB=function(n,e,t,i){var r=n.length,a=0;if(!r||e.f&&!e.l)return t||new _f(0);var l=!t,o=l||e.i!=2,m=e.i;l&&(t=new _f(r*3));var C=function(He){var bt=t.length;if(He>bt){var vt=new _f(Math.max(bt*2,He));vt.set(t),t=vt}},S=e.f||0,O=e.p||0,U=e.b||0,K=e.l,z=e.d,j=e.m,Q=e.n,ee=r*8;do{if(!K){S=jm(n,O,1);var V=jm(n,O+1,3);if(O+=3,V)if(V==1)K=HQ,z=VQ,j=9,Q=5;else if(V==2){var oe=jm(n,O,31)+257,W=jm(n,O+10,15)+4,ue=oe+jm(n,O+5,31)+1;O+=14;for(var ge=new _f(ue),ye=new _f(19),Me=0;Me<W;++Me)ye[WQ[Me]]=jm(n,O+Me*3,7);O+=W*3;for(var Be=f4(ye),we=(1<<Be)-1,qe=YC(ye,Be,1),Me=0;Me<ue;){var xe=qe[jm(n,O,we)];O+=xe&15;var ae=xe>>4;if(ae<16)ge[Me++]=ae;else{var ze=0,ot=0;for(ae==16?(ot=3+jm(n,O,3),O+=2,ze=ge[Me-1]):ae==17?(ot=3+jm(n,O,7),O+=3):ae==18&&(ot=11+jm(n,O,127),O+=7);ot--;)ge[Me++]=ze}}var yt=ge.subarray(0,oe),nt=ge.subarray(oe);j=f4(yt),Q=f4(nt),K=YC(yt,j,1),z=YC(nt,Q,1)}else yf(1);else{var ae=$Q(O)+4,ne=n[ae-4]|n[ae-3]<<8,Z=ae+ne;if(Z>r){m&&yf(0);break}o&&C(U+ne),t.set(n.subarray(ae,Z),U),e.b=U+=ne,e.p=O=Z*8,e.f=S;continue}if(O>ee){m&&yf(0);break}}o&&C(U+131072);for(var be=(1<<j)-1,Ne=(1<<Q)-1,tt=O;;tt=O){var ze=K[m4(n,O)&be],lt=ze>>4;if(O+=ze&15,O>ee){m&&yf(0);break}if(ze||yf(2),lt<256)t[U++]=lt;else if(lt==256){tt=O,K=null;break}else{var It=lt-254;if(lt>264){var Me=lt-257,pt=ZU[Me];It=jm(n,O,(1<<pt)-1)+tL[Me],O+=pt}var St=z[m4(n,O)&Ne],Rt=St>>4;St||yf(3),O+=St&15;var nt=qQ[Rt];if(Rt>3){var pt=XU[Rt];nt+=m4(n,O)&(1<<pt)-1,O+=pt}if(O>ee){m&&yf(0);break}o&&C(U+131072);var Le=U+It;if(U<nt){var Pe=a-nt,Re=Math.min(nt,Le);for(Pe+U<0&&yf(3);U<Re;++U)t[U]=i[Pe+U]}for(;U<Le;++U)t[U]=t[U-nt]}}e.l=K,e.p=tt,e.b=U,e.f=S,K&&(S=1,e.m=j,e.d=z,e.n=Q)}while(!S);return U!=t.length&&l?ZQ(t,0,U):t.subarray(0,U)},JQ=new _f(0),eY=function(n){(n[0]!=31||n[1]!=139||n[2]!=8)&&yf(6,"invalid gzip data");var e=n[3],t=10;e&4&&(t+=(n[10]|n[11]<<8)+2);for(var i=(e>>3&1)+(e>>4&1);i>0;i-=!n[t++]);return t+(e&2)},tY=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},nY=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&yf(6,"invalid zlib data"),(n[1]>>5&1)==1&&yf(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function iY(n,e){return BB(n,{i:2},e,e)}function rY(n,e){var t=eY(n);return t+8>n.length&&yf(6,"invalid gzip data"),BB(n.subarray(t,-8),{i:2},new _f(tY(n)),e)}function oY(n,e){return BB(n.subarray(nY(n),-4),{i:2},e,e)}function aY(n,e){return n[0]==31&&n[1]==139&&n[2]==8?rY(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?iY(n,e):oY(n,e)}var sY=typeof TextDecoder<"u"&&new TextDecoder,lY=0;try{sY.decode(JQ,{stream:!0}),lY=1}catch{}var AY=Object.defineProperty,qC=Math.pow,fl=(n,e)=>AY(n,"name",{value:e,configurable:!0}),Wc=(n,e,t)=>new Promise((i,r)=>{var a=m=>{try{o(t.next(m))}catch(C){r(C)}},l=m=>{try{o(t.throw(m))}catch(C){r(C)}},o=m=>m.done?i(m.value):Promise.resolve(m.value).then(a,l);o((t=t.apply(n,e)).next())});fl((n,e)=>{let t=!1,i="",r=L.GridLayer.extend({createTile:fl((a,l)=>{let o=document.createElement("img"),m=new AbortController,C=m.signal;return o.cancel=()=>{m.abort()},t||(n.getHeader().then(S=>{S.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):S.tileType===2?i="image/png":S.tileType===3?i="image/jpeg":S.tileType===4?i="image/webp":S.tileType===5&&(i="image/avif")}),t=!0),n.getZxy(a.z,a.x,a.y,C).then(S=>{if(S){let O=new Blob([S.data],{type:i}),U=window.URL.createObjectURL(O);o.src=U,o.cancel=void 0,l(void 0,o)}}).catch(S=>{if(S.name!=="AbortError")throw S}),o},"createTile"),_removeTile:fl(function(a){let l=this._tiles[a];l&&(l.el.cancel&&l.el.cancel(),l.el.width=0,l.el.height=0,l.el.deleted=!0,L.DomUtil.remove(l.el),delete this._tiles[a],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(a)}))},"_removeTile")});return new r(e)},"leafletRasterLayer");var uY=fl(n=>(e,t)=>{if(t instanceof AbortController)return n(e,t);let i=new AbortController;return n(e,i).then(r=>t(void 0,r.data,r.cacheControl||"",r.expires||""),r=>t(r)).catch(r=>t(r)),{cancel:fl(()=>i.abort(),"cancel")}},"v3compat"),iL=class{constructor(e){this.tilev4=fl((t,i)=>Wc(this,null,function*(){if(t.type==="json"){let K=t.url.substr(10),z=this.tiles.get(K);if(z||(z=new h6(K),this.tiles.set(K,z)),this.metadata)return{data:yield z.getTileJson(t.url)};let j=yield z.getHeader();return(j.minLon>=j.maxLon||j.minLat>=j.maxLat)&&console.error(`Bounds of PMTiles archive ${j.minLon},${j.minLat},${j.maxLon},${j.maxLat} are not valid.`),{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:j.minZoom,maxzoom:j.maxZoom,bounds:[j.minLon,j.minLat,j.maxLon,j.maxLat]}}}let r=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),a=t.url.match(r);if(!a)throw new Error("Invalid PMTiles protocol URL");let l=a[1],o=this.tiles.get(l);o||(o=new h6(l),this.tiles.set(l,o));let m=a[2],C=a[3],S=a[4],O=yield o.getHeader(),U=yield o?.getZxy(+m,+C,+S,i.signal);if(U)return{data:new Uint8Array(U.data),cacheControl:U.cacheControl,expires:U.expires};if(O.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=uY(this.tilev4),this.tiles=new Map,this.metadata=e?.metadata||!1,this.errorOnMissingTile=e?.errorOnMissingTile||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};fl(iL,"Protocol");var cY=iL;function rL(n,e){return(e>>>0)*4294967296+(n>>>0)}fl(rL,"toNum");function oL(n,e){let t=e.buf,i=t[e.pos++],r=(i&112)>>4;if(i<128||(i=t[e.pos++],r|=(i&127)<<3,i<128)||(i=t[e.pos++],r|=(i&127)<<10,i<128)||(i=t[e.pos++],r|=(i&127)<<17,i<128)||(i=t[e.pos++],r|=(i&127)<<24,i<128)||(i=t[e.pos++],r|=(i&1)<<31,i<128))return rL(n,r);throw new Error("Expected varint not more than 10 bytes")}fl(oL,"readVarintRemainder");function ev(n){let e=n.buf,t=e[n.pos++],i=t&127;return t<128||(t=e[n.pos++],i|=(t&127)<<7,t<128)||(t=e[n.pos++],i|=(t&127)<<14,t<128)||(t=e[n.pos++],i|=(t&127)<<21,t<128)?i:(t=e[n.pos],i|=(t&15)<<28,oL(i,n))}fl(ev,"readVarint");function OB(n,e,t,i){if(i===0){t===1&&(e[0]=n-1-e[0],e[1]=n-1-e[1]);let r=e[0];e[0]=e[1],e[1]=r}}fl(OB,"rotate");function aL(n,e){let t=qC(2,n),i=e,r=e,a=e,l=[0,0],o=1;for(;o<t;)i=1&a/2,r=1&(a^i),OB(o,l,i,r),l[0]+=o*i,l[1]+=o*r,a=a/4,o*=2;return[n,l[0],l[1]]}fl(aL,"idOnLevel");var hY=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function sL(n,e,t){if(n>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(e>qC(2,n)-1||t>qC(2,n)-1)throw new Error("tile x/y outside zoom level bounds");let i=hY[n],r=qC(2,n),a=0,l=0,o=0,m=[e,t],C=r/2;for(;C>0;)a=(m[0]&C)>0?1:0,l=(m[1]&C)>0?1:0,o+=C*C*(3*a^l),OB(C,m,a,l),C=C/2;return i+o}fl(sL,"zxyToTileId");function dY(n){let e=0;for(let t=0;t<27;t++){let i=(1<<t)*(1<<t);if(e+i>n)return aL(t,n-e);e+=i}throw new Error("Tile zoom level exceeds max safe number limit (26)")}fl(dY,"tileIdToZxy");var fY=(n=>(n[n.Unknown=0]="Unknown",n[n.None=1]="None",n[n.Gzip=2]="Gzip",n[n.Brotli=3]="Brotli",n[n.Zstd=4]="Zstd",n))(fY||{});function T3(n,e){return Wc(this,null,function*(){if(e===1||e===0)return n;if(e===2){if(typeof globalThis.DecompressionStream>"u")return aY(new Uint8Array(n));let t=new Response(n).body;if(!t)throw new Error("Failed to read response stream");let i=t.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(i).arrayBuffer()}throw new Error("Compression method not supported")})}fl(T3,"defaultDecompress");var mY=(n=>(n[n.Unknown=0]="Unknown",n[n.Mvt=1]="Mvt",n[n.Png=2]="Png",n[n.Jpeg=3]="Jpeg",n[n.Webp=4]="Webp",n[n.Avif=5]="Avif",n))(mY||{});function lL(n){return n===1?".mvt":n===2?".png":n===3?".jpg":n===4?".webp":n===5?".avif":""}fl(lL,"tileTypeExt");var pY=127;function AL(n,e){let t=0,i=n.length-1;for(;t<=i;){let r=i+t>>1,a=e-n[r].tileId;if(a>0)t=r+1;else if(a<0)i=r-1;else return n[r]}return i>=0&&(n[i].runLength===0||e-n[i].tileId<n[i].runLength)?n[i]:null}fl(AL,"findTile");var gY=class{constructor(e){this.file=e}getKey(){return this.file.name}getBytes(e,t){return Wc(this,null,function*(){return{data:yield this.file.slice(e,e+t).arrayBuffer()}})}};fl(gY,"FileSource");var uL=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1;let i="";"navigator"in globalThis&&(i=globalThis.navigator.userAgent||"");let r=i.indexOf("Windows")>-1,a=/Chrome|Chromium|Edg|OPR|Brave/.test(i);this.chromeWindowsNoCache=!1,r&&a&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,i,r){return Wc(this,null,function*(){let a,l;i?l=i:(a=new AbortController,l=a.signal);let o=new Headers(this.customHeaders);o.set("range",`bytes=${e}-${e+t-1}`);let m;this.mustReload?m="reload":this.chromeWindowsNoCache&&(m="no-store");let C=yield fetch(this.url,{signal:l,cache:m,headers:o});if(e===0&&C.status===416){let U=C.headers.get("Content-Range");if(!U||!U.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let K=+U.substr(8);C=yield fetch(this.url,{signal:l,cache:"reload",headers:{range:`bytes=0-${K-1}`}})}let S=C.headers.get("Etag");if(S!=null&&S.startsWith("W/")&&(S=null),C.status===416||r&&S&&S!==r)throw this.mustReload=!0,new c6(`Server returned non-matching ETag ${r} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(C.status>=300)throw new Error(`Bad response code: ${C.status}`);let O=C.headers.get("Content-Length");if(C.status===200&&(!O||+O>t))throw a&&a.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield C.arrayBuffer(),etag:S||void 0,cacheControl:C.headers.get("Cache-Control")||void 0,expires:C.headers.get("Expires")||void 0}})}};fl(uL,"FetchSource");var yY=uL;function Am(n,e){let t=n.getUint32(e+4,!0),i=n.getUint32(e+0,!0);return t*qC(2,32)+i}fl(Am,"getUint64");function cL(n,e){let t=new DataView(n),i=t.getUint8(7);if(i>3)throw new Error(`Archive is spec version ${i} but this library supports up to spec version 3`);return{specVersion:i,rootDirectoryOffset:Am(t,8),rootDirectoryLength:Am(t,16),jsonMetadataOffset:Am(t,24),jsonMetadataLength:Am(t,32),leafDirectoryOffset:Am(t,40),leafDirectoryLength:Am(t,48),tileDataOffset:Am(t,56),tileDataLength:Am(t,64),numAddressedTiles:Am(t,72),numTileEntries:Am(t,80),numTileContents:Am(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}fl(cL,"bytesToHeader");function IB(n){let e={buf:new Uint8Array(n),pos:0},t=ev(e),i=[],r=0;for(let a=0;a<t;a++){let l=ev(e);i.push({tileId:r+l,offset:0,length:0,runLength:1}),r+=l}for(let a=0;a<t;a++)i[a].runLength=ev(e);for(let a=0;a<t;a++)i[a].length=ev(e);for(let a=0;a<t;a++){let l=ev(e);l===0&&a>0?i[a].offset=i[a-1].offset+i[a-1].length:i[a].offset=l-1}return i}fl(IB,"deserializeIndex");var hL=class extends Error{};fl(hL,"EtagMismatch");var c6=hL;function TB(n,e){return Wc(this,null,function*(){let t=yield n.getBytes(0,16384);if(new DataView(t.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let i=t.data.slice(0,pY),r=cL(i,t.etag),a=t.data.slice(r.rootDirectoryOffset,r.rootDirectoryOffset+r.rootDirectoryLength),l=`${n.getKey()}|${r.etag||""}|${r.rootDirectoryOffset}|${r.rootDirectoryLength}`,o=IB(yield e(a,r.internalCompression));return[r,[l,o.length,o]]})}fl(TB,"getHeaderAndRoot");function kB(n,e,t,i,r){return Wc(this,null,function*(){let a=yield n.getBytes(t,i,void 0,r.etag),l=yield e(a.data,r.internalCompression),o=IB(l);if(o.length===0)throw new Error("Empty directory is invalid");return o})}fl(kB,"getDirectory");var vY=class{constructor(e=100,t=!0,i=T3){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=i}getHeader(e){return Wc(this,null,function*(){let t=e.getKey(),i=this.cache.get(t);if(i)return i.lastUsed=this.counter++,i.data;let r=yield TB(e,this.decompress);return r[1]&&this.cache.set(r[1][0],{lastUsed:this.counter++,data:r[1][2]}),this.cache.set(t,{lastUsed:this.counter++,data:r[0]}),this.prune(),r[0]})}getDirectory(e,t,i,r){return Wc(this,null,function*(){let a=`${e.getKey()}|${r.etag||""}|${t}|${i}`,l=this.cache.get(a);if(l)return l.lastUsed=this.counter++,l.data;let o=yield kB(e,this.decompress,t,i,r);return this.cache.set(a,{lastUsed:this.counter++,data:o}),this.prune(),o})}prune(){if(this.cache.size>this.maxCacheEntries){let e=1/0,t;this.cache.forEach((i,r)=>{i.lastUsed<e&&(e=i.lastUsed,t=r)}),t&&this.cache.delete(t)}}invalidate(e){return Wc(this,null,function*(){this.cache.delete(e.getKey())})}};fl(vY,"ResolvedValueCache");var dL=class{constructor(e=100,t=!0,i=T3){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=i}getHeader(e){return Wc(this,null,function*(){let t=e.getKey(),i=this.cache.get(t);if(i)return i.lastUsed=this.counter++,yield i.data;let r=new Promise((a,l)=>{TB(e,this.decompress).then(o=>{o[1]&&this.cache.set(o[1][0],{lastUsed:this.counter++,data:Promise.resolve(o[1][2])}),a(o[0]),this.prune()}).catch(o=>{l(o)})});return this.cache.set(t,{lastUsed:this.counter++,data:r}),r})}getDirectory(e,t,i,r){return Wc(this,null,function*(){let a=`${e.getKey()}|${r.etag||""}|${t}|${i}`,l=this.cache.get(a);if(l)return l.lastUsed=this.counter++,yield l.data;let o=new Promise((m,C)=>{kB(e,this.decompress,t,i,r).then(S=>{m(S),this.prune()}).catch(S=>{C(S)})});return this.cache.set(a,{lastUsed:this.counter++,data:o}),o})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((i,r)=>{i.lastUsed<e&&(e=i.lastUsed,t=r)}),t&&this.cache.delete(t)}}invalidate(e){return Wc(this,null,function*(){let t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());let i=new Promise((r,a)=>{this.getHeader(e).then(l=>{r(),this.invalidations.delete(t)}).catch(l=>{a(l)})});this.invalidations.set(t,i)})}};fl(dL,"SharedPromiseCache");var CY=dL,fL=class{constructor(e,t,i){typeof e=="string"?this.source=new yY(e):this.source=e,i?this.decompress=i:this.decompress=T3,t?this.cache=t:this.cache=new CY}getHeader(){return Wc(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,i,r){return Wc(this,null,function*(){let a=sL(e,t,i),l=yield this.cache.getHeader(this.source);if(e<l.minZoom||e>l.maxZoom)return;let o=l.rootDirectoryOffset,m=l.rootDirectoryLength;for(let C=0;C<=3;C++){let S=yield this.cache.getDirectory(this.source,o,m,l),O=AL(S,a);if(O){if(O.runLength>0){let U=yield this.source.getBytes(l.tileDataOffset+O.offset,O.length,r,l.etag);return{data:yield this.decompress(U.data,l.tileCompression),cacheControl:U.cacheControl,expires:U.expires}}o=l.leafDirectoryOffset+O.offset,m=O.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(e,t,i,r){return Wc(this,null,function*(){try{return yield this.getZxyAttempt(e,t,i,r)}catch(a){if(a instanceof c6)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,i,r);throw a}})}getMetadataAttempt(){return Wc(this,null,function*(){let e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),i=yield this.decompress(t.data,e.internalCompression),r=new TextDecoder("utf-8");return JSON.parse(r.decode(i))})}getMetadata(){return Wc(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof c6)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return Wc(this,null,function*(){let t=yield this.getHeader(),i=yield this.getMetadata(),r=lL(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${r}`],vector_layers:i.vector_layers,attribution:i.attribution,description:i.description,name:i.name,version:i.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};fl(fL,"PMTiles");var h6=fL,_Y=8,bY={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},xY={"*":{type:"source"}},MY=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],SY={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},wY={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},EY={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},BY={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},OY={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},IY={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},TY={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},kY=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],DY={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},RY={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},PY={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},KY={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},UY={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},LY={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},FY={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},zY={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},NY={type:"array",value:"*"},GY={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},jY={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},WY={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},QY={type:"array",value:"*",minimum:1},YY={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},qY={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},HY={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},VY={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},$Y=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],ZY={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},XY={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},JY={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},eq={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},tq={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},nq={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},iq={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},rq={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},oq={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},aq={"*":{type:"string"}},Ua={$version:_Y,$root:bY,sources:xY,source:MY,source_vector:SY,source_raster:wY,source_raster_dem:EY,source_geojson:BY,source_video:OY,source_image:IY,layer:TY,layout:kY,layout_background:DY,layout_fill:RY,layout_circle:PY,layout_heatmap:KY,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:UY,layout_symbol:LY,layout_raster:FY,layout_hillshade:zY,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:NY,filter_operator:GY,geometry_type:jY,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:WY,expression:QY,light:YY,sky:qY,terrain:HY,projection:VY,paint:$Y,paint_fill:ZY,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:XY,paint_circle:JY,paint_heatmap:eq,paint_symbol:tq,paint_raster:nq,paint_hillshade:iq,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:rq,transition:oq,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:aq};const sq=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function lq(n,e){const t={};for(const i in n)i!=="ref"&&(t[i]=n[i]);return sq.forEach(i=>{i in e&&(t[i]=e[i])}),t}function DB(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=lq(n[t],e[n[t].ref]));return n}function Rs(n,e){if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!Rs(n[t],e[t]))return!1;return!0}if(typeof n=="object"&&n!==null&&e!==null){if(typeof e!="object"||Object.keys(n).length!==Object.keys(e).length)return!1;for(const i in n)if(!Rs(n[i],e[i]))return!1;return!0}return n===e}function cm(n,e){n.push(e)}function mL(n,e,t){cm(t,{command:"addSource",args:[n,e[n]]})}function pL(n,e,t){cm(e,{command:"removeSource",args:[n]}),t[n]=!0}function Aq(n,e,t,i){pL(n,t,i),mL(n,e,t)}function uq(n,e,t){let i;for(i in n[t])if(Object.prototype.hasOwnProperty.call(n[t],i)&&i!=="data"&&!Rs(n[t][i],e[t][i]))return!1;for(i in e[t])if(Object.prototype.hasOwnProperty.call(e[t],i)&&i!=="data"&&!Rs(n[t][i],e[t][i]))return!1;return!0}function cq(n,e,t,i){n=n||{},e=e||{};let r;for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(Object.prototype.hasOwnProperty.call(e,r)||pL(r,t,i));for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(Object.prototype.hasOwnProperty.call(n,r)?Rs(n[r],e[r])||(n[r].type==="geojson"&&e[r].type==="geojson"&&uq(n,e,r)?cm(t,{command:"setGeoJSONSourceData",args:[r,e[r].data]}):Aq(r,e,t,i)):mL(r,e,t))}function kb(n,e,t,i,r,a){n=n||{},e=e||{};for(const l in n)Object.prototype.hasOwnProperty.call(n,l)&&(Rs(n[l],e[l])||t.push({command:a,args:[i,l,e[l],r]}));for(const l in e)!Object.prototype.hasOwnProperty.call(e,l)||Object.prototype.hasOwnProperty.call(n,l)||Rs(n[l],e[l])||t.push({command:a,args:[i,l,e[l],r]})}function Z7(n){return n.id}function X7(n,e){return n[e.id]=e,n}function hq(n,e,t){n=n||[],e=e||[];const i=n.map(Z7),r=e.map(Z7),a=n.reduce(X7,{}),l=e.reduce(X7,{}),o=i.slice(),m=Object.create(null);let C,S,O,U,K;for(let z=0,j=0;z<i.length;z++)C=i[z],Object.prototype.hasOwnProperty.call(l,C)?j++:(cm(t,{command:"removeLayer",args:[C]}),o.splice(o.indexOf(C,j),1));for(let z=0,j=0;z<r.length;z++)C=r[r.length-1-z],o[o.length-1-z]!==C&&(Object.prototype.hasOwnProperty.call(a,C)?(cm(t,{command:"removeLayer",args:[C]}),o.splice(o.lastIndexOf(C,o.length-j),1)):j++,U=o[o.length-z],cm(t,{command:"addLayer",args:[l[C],U]}),o.splice(o.length-z,0,C),m[C]=!0);for(let z=0;z<r.length;z++)if(C=r[z],S=a[C],O=l[C],!(m[C]||Rs(S,O))){if(!Rs(S.source,O.source)||!Rs(S["source-layer"],O["source-layer"])||!Rs(S.type,O.type)){cm(t,{command:"removeLayer",args:[C]}),U=o[o.lastIndexOf(C)+1],cm(t,{command:"addLayer",args:[O,U]});continue}kb(S.layout,O.layout,t,C,null,"setLayoutProperty"),kb(S.paint,O.paint,t,C,null,"setPaintProperty"),Rs(S.filter,O.filter)||cm(t,{command:"setFilter",args:[C,O.filter]}),(!Rs(S.minzoom,O.minzoom)||!Rs(S.maxzoom,O.maxzoom))&&cm(t,{command:"setLayerZoomRange",args:[C,O.minzoom,O.maxzoom]});for(K in S)Object.prototype.hasOwnProperty.call(S,K)&&(K==="layout"||K==="paint"||K==="filter"||K==="metadata"||K==="minzoom"||K==="maxzoom"||(K.indexOf("paint.")===0?kb(S[K],O[K],t,C,K.slice(6),"setPaintProperty"):Rs(S[K],O[K])||cm(t,{command:"setLayerProperty",args:[C,K,O[K]]})));for(K in O)!Object.prototype.hasOwnProperty.call(O,K)||Object.prototype.hasOwnProperty.call(S,K)||K==="layout"||K==="paint"||K==="filter"||K==="metadata"||K==="minzoom"||K==="maxzoom"||(K.indexOf("paint.")===0?kb(S[K],O[K],t,C,K.slice(6),"setPaintProperty"):Rs(S[K],O[K])||cm(t,{command:"setLayerProperty",args:[C,K,O[K]]}))}}function dq(n,e){if(!n)return[{command:"setStyle",args:[e]}];let t=[];try{if(!Rs(n.version,e.version))return[{command:"setStyle",args:[e]}];Rs(n.center,e.center)||t.push({command:"setCenter",args:[e.center]}),Rs(n.state,e.state)||t.push({command:"setGlobalState",args:[e.state]}),Rs(n.centerAltitude,e.centerAltitude)||t.push({command:"setCenterAltitude",args:[e.centerAltitude]}),Rs(n.zoom,e.zoom)||t.push({command:"setZoom",args:[e.zoom]}),Rs(n.bearing,e.bearing)||t.push({command:"setBearing",args:[e.bearing]}),Rs(n.pitch,e.pitch)||t.push({command:"setPitch",args:[e.pitch]}),Rs(n.roll,e.roll)||t.push({command:"setRoll",args:[e.roll]}),Rs(n.sprite,e.sprite)||t.push({command:"setSprite",args:[e.sprite]}),Rs(n.glyphs,e.glyphs)||t.push({command:"setGlyphs",args:[e.glyphs]}),Rs(n.transition,e.transition)||t.push({command:"setTransition",args:[e.transition]}),Rs(n.light,e.light)||t.push({command:"setLight",args:[e.light]}),Rs(n.terrain,e.terrain)||t.push({command:"setTerrain",args:[e.terrain]}),Rs(n.sky,e.sky)||t.push({command:"setSky",args:[e.sky]}),Rs(n.projection,e.projection)||t.push({command:"setProjection",args:[e.projection]});const i={},r=[];cq(n.sources,e.sources,r,i);const a=[];n.layers&&n.layers.forEach(l=>{"source"in l&&i[l.source]?t.push({command:"removeLayer",args:[l.id]}):a.push(l)}),t=t.concat(r),hq(a,e.layers,t)}catch(i){console.warn("Unable to compute style diff:",i),t=[{command:"setStyle",args:[e]}]}return t}class _i{constructor(e,t,i,r){this.message=(e?`${e}: `:"")+i,r&&(this.identifier=r),t!=null&&t.__line__&&(this.line=t.__line__)}}function wv(n,...e){for(const t of e)for(const i in t)n[i]=t[i];return n}class Np extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class RB{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[i,r]of t)this.bindings[i]=r}concat(e){return new RB(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}const k3={kind:"null"},Ei={kind:"number"},fa={kind:"string"},Ho={kind:"boolean"},qp={kind:"color"},D3={kind:"projectionDefinition"},kg={kind:"object"},zo={kind:"value"},fq={kind:"error"},R3={kind:"collator"},P3={kind:"formatted"},K3={kind:"padding"},h_={kind:"colorArray"},U3={kind:"numberArray"},tb={kind:"resolvedImage"},L3={kind:"variableAnchorOffsetCollection"};function bf(n,e){return{kind:"array",itemType:n,N:e}}function CA(n){if(n.kind==="array"){const e=CA(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const mq=[k3,Ei,fa,Ho,qp,D3,P3,kg,bf(zo),K3,U3,h_,tb,L3];function d_(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!d_(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of mq)if(!d_(t,e))return null}}return`Expected ${CA(n)} but found ${CA(e)} instead.`}function PB(n,e){return e.some(t=>t.kind===n.kind)}function Dg(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function l1(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const gL=.96422,yL=1,vL=.82521,CL=4/29,mv=6/29,_L=3*mv*mv,pq=mv*mv*mv,gq=Math.PI/180,yq=180/Math.PI;function bL(n){return n=n%360,n<0&&(n+=360),n}function xL([n,e,t,i]){n=p4(n),e=p4(e),t=p4(t);let r,a;const l=g4((.2225045*n+.7168786*e+.0606169*t)/yL);n===e&&e===t?r=a=l:(r=g4((.4360747*n+.3850649*e+.1430804*t)/gL),a=g4((.0139322*n+.0971045*e+.7141733*t)/vL));const o=116*l-16;return[o<0?0:o,500*(r-l),200*(l-a),i]}function p4(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function g4(n){return n>pq?Math.pow(n,1/3):n/_L+CL}function ML([n,e,t,i]){let r=(n+16)/116,a=isNaN(e)?r:r+e/500,l=isNaN(t)?r:r-t/200;return r=yL*v4(r),a=gL*v4(a),l=vL*v4(l),[y4(3.1338561*a-1.6168667*r-.4906146*l),y4(-.9787684*a+1.9161415*r+.033454*l),y4(.0719453*a-.2289914*r+1.4052427*l),i]}function y4(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function v4(n){return n>mv?n*n*n:_L*(n-CL)}function vq(n){const[e,t,i,r]=xL(n),a=Math.sqrt(t*t+i*i);return[Math.round(a*1e4)?bL(Math.atan2(i,t)*yq):NaN,a,e,r]}function Cq([n,e,t,i]){return n=isNaN(n)?0:n*gq,ML([t,Math.cos(n)*e,Math.sin(n)*e,i])}function _q([n,e,t,i]){n=bL(n),e/=100,t/=100;function r(a){const l=(a+n/30)%12,o=e*Math.min(t,1-t);return t-o*Math.max(-1,Math.min(l-3,9-l,1))}return[r(0),r(8),r(4),i]}const bq=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function HC(n,e){return bq(n,e)?n[e]:void 0}function xq(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=HC(Mq,n);if(e){const[r,a,l]=e;return[r/255,a/255,l/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const a=n.length<6?1:2;let l=1;return[Db(n.slice(l,l+=a)),Db(n.slice(l,l+=a)),Db(n.slice(l,l+=a)),Db(n.slice(l,l+a)||"ff")]}if(n.startsWith("rgb")){const r=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,a=n.match(r);if(a){const[l,o,m,C,S,O,U,K,z,j,Q,ee]=a,V=[C||" ",U||" ",j].join("");if(V==="  "||V==="  /"||V===",,"||V===",,,"){const ae=[m,O,z].join(""),ne=ae==="%%%"?100:ae===""?255:0;if(ne){const Z=[tv(+o/ne,0,1),tv(+S/ne,0,1),tv(+K/ne,0,1),Q?J7(+Q,ee):1];if(eI(Z))return Z}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,i=n.match(t);if(i){const[r,a,l,o,m,C,S,O,U]=i,K=[l||" ",m||" ",S].join("");if(K==="  "||K==="  /"||K===",,"||K===",,,"){const z=[+a,tv(+o,0,100),tv(+C,0,100),O?J7(+O,U):1];if(eI(z))return _q(z)}}}function Db(n){return parseInt(n.padEnd(2,n),16)/255}function J7(n,e){return tv(e?n/100:n,0,1)}function tv(n,e,t){return Math.min(Math.max(e,n),t)}function eI(n){return!n.some(Number.isNaN)}const Mq={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function I1(n,e,t){return n+t*(e-n)}function Ev(n,e,t){return n.map((i,r)=>I1(i,e[r],t))}function Sq(n){return n==="rgb"||n==="hcl"||n==="lab"}let tl=class nv{constructor(e,t,i,r=1,a=!0){this.r=e,this.g=t,this.b=i,this.a=r,a||(this.r*=r,this.g*=r,this.b*=r,r||this.overwriteGetter("rgb",[e,t,i,r]))}static parse(e){if(e instanceof nv)return e;if(typeof e!="string")return;const t=xq(e);if(t)return new nv(...t,!1)}get rgb(){const{r:e,g:t,b:i,a:r}=this,a=r||1/0;return this.overwriteGetter("rgb",[e/a,t/a,i/a,r])}get hcl(){return this.overwriteGetter("hcl",vq(this.rgb))}get lab(){return this.overwriteGetter("lab",xL(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,i,r]=this.rgb;return`rgba(${[e,t,i].map(a=>Math.round(a*255)).join(",")},${r})`}static interpolate(e,t,i,r="rgb"){switch(r){case"rgb":{const[a,l,o,m]=Ev(e.rgb,t.rgb,i);return new nv(a,l,o,m,!1)}case"hcl":{const[a,l,o,m]=e.hcl,[C,S,O,U]=t.hcl;let K,z;if(!isNaN(a)&&!isNaN(C)){let ae=C-a;C>a&&ae>180?ae-=360:C<a&&a-C>180&&(ae+=360),K=a+i*ae}else isNaN(a)?isNaN(C)?K=NaN:(K=C,(o===1||o===0)&&(z=S)):(K=a,(O===1||O===0)&&(z=l));const[j,Q,ee,V]=Cq([K,z??I1(l,S,i),I1(o,O,i),I1(m,U,i)]);return new nv(j,Q,ee,V,!1)}case"lab":{const[a,l,o,m]=ML(Ev(e.lab,t.lab,i));return new nv(a,l,o,m,!1)}}}};tl.black=new tl(0,0,0,1);tl.white=new tl(1,1,1,1);tl.transparent=new tl(0,0,0,0);tl.red=new tl(1,0,0,1);class KB{constructor(e,t,i){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const wq=["bottom","center","top"];class d6{constructor(e,t,i,r,a,l){this.text=e,this.image=t,this.scale=i,this.fontStack=r,this.textColor=a,this.verticalAlign=l}}class Hp{constructor(e){this.sections=e}static fromString(e){return new Hp([new d6(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Hp?e:Hp.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class md{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof md)return e;if(typeof e=="number")return new md([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new md(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new md(Ev(e.values,t.values,i))}}class pd{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof pd)return e;if(typeof e=="number")return new pd([e]);if(Array.isArray(e)){for(const t of e)if(typeof t!="number")return;return new pd(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new pd(Ev(e.values,t.values,i))}}class dh{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof dh)return e;if(typeof e=="string"){const i=tl.parse(e);return i?new dh([i]):void 0}if(!Array.isArray(e))return;const t=[];for(const i of e){if(typeof i!="string")return;const r=tl.parse(i);if(!r)return;t.push(r)}return new dh(t)}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i,r="rgb"){const a=[];if(e.values.length!=t.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${t.values.length}), cannot interpolate.`);for(let l=0;l<e.values.length;l++)a.push(tl.interpolate(e.values[l],t.values[l],i,r));return new dh(a)}}class NA extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const Eq=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class vm{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof vm)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const i=e[t],r=e[t+1];if(typeof i!="string"||!Eq.has(i)||!Array.isArray(r)||r.length!==2||typeof r[0]!="number"||typeof r[1]!="number")return}return new vm(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){const r=e.values,a=t.values;if(r.length!==a.length)throw new NA(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const l=[];for(let o=0;o<r.length;o+=2){if(r[o]!==a[o])throw new NA(`Cannot interpolate values containing mismatched anchors. from[${o}]: ${r[o]}, to[${o}]: ${a[o]}`);l.push(r[o]);const[m,C]=r[o+1],[S,O]=a[o+1];l.push([I1(m,S,i),I1(C,O,i)])}return new vm(l)}}class N0{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new N0({name:e,available:!1}):null}}class mm{constructor(e,t,i){this.from=e,this.to=t,this.transition=i}static interpolate(e,t,i){return new mm(e,t,i)}static parse(e){if(e instanceof mm)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new mm(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new mm(e.from,e.to,e.transition);if(typeof e=="string")return new mm(e,e,1)}}function SL(n,e,t,i){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof i>"u"||typeof i=="number"&&i>=0&&i<=1?null:`Invalid rgba value [${[n,e,t,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof i=="number"?[n,e,t,i]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function f_(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof mm||n instanceof tl||n instanceof KB||n instanceof Hp||n instanceof md||n instanceof pd||n instanceof dh||n instanceof vm||n instanceof N0)return!0;if(Array.isArray(n)){for(const e of n)if(!f_(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!f_(n[e]))return!1;return!0}else return!1}function tc(n){if(n===null)return k3;if(typeof n=="string")return fa;if(typeof n=="boolean")return Ho;if(typeof n=="number")return Ei;if(n instanceof tl)return qp;if(n instanceof mm)return D3;if(n instanceof KB)return R3;if(n instanceof Hp)return P3;if(n instanceof md)return K3;if(n instanceof pd)return U3;if(n instanceof dh)return h_;if(n instanceof vm)return L3;if(n instanceof N0)return tb;if(Array.isArray(n)){const e=n.length;let t;for(const i of n){const r=tc(i);if(!t)t=r;else{if(t===r)continue;t=zo;break}}return bf(t||zo,e)}else return kg}function VC(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof tl||n instanceof mm||n instanceof Hp||n instanceof md||n instanceof pd||n instanceof dh||n instanceof vm||n instanceof N0?n.toString():JSON.stringify(n)}class Bv{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!f_(e[1]))return t.error("invalid value");const i=e[1];let r=tc(i);const a=t.expectedType;return r.kind==="array"&&r.N===0&&a&&a.kind==="array"&&(typeof a.N!="number"||a.N===0)&&(r=a),new Bv(r,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Rb={string:fa,number:Ei,boolean:Ho,object:kg};class Zm{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=1,r;const a=e[0];if(a==="array"){let o;if(e.length>2){const C=e[1];if(typeof C!="string"||!(C in Rb)||C==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);o=Rb[C],i++}else o=zo;let m;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);m=e[2],i++}r=bf(o,m)}else{if(!Rb[a])throw new Error(`Types doesn't contain name = ${a}`);r=Rb[a]}const l=[];for(;i<e.length;i++){const o=t.parse(e[i],i,zo);if(!o)return null;l.push(o)}return new Zm(r,l)}evaluate(e){for(let t=0;t<this.args.length;t++){const i=this.args[t].evaluate(e);if(d_(this.type,tc(i))){if(t===this.args.length-1)throw new NA(`Expected value to be of type ${CA(this.type)}, but found ${CA(tc(i))} instead.`)}else return i}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const tI={"to-boolean":Ho,"to-color":qp,"to-number":Ei,"to-string":fa};class b1{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[0];if(!tI[i])throw new Error(`Can't parse ${i} as it is not part of the known types`);if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");const r=tI[i],a=[];for(let l=1;l<e.length;l++){const o=t.parse(e[l],l,zo);if(!o)return null;a.push(o)}return new b1(r,a)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,i;for(const r of this.args){if(t=r.evaluate(e),i=null,t instanceof tl)return t;if(typeof t=="string"){const a=e.parseColor(t);if(a)return a}else if(Array.isArray(t)&&(t.length<3||t.length>4?i=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:i=SL(t[0],t[1],t[2],t[3]),!i))return new tl(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new NA(i||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const i of this.args){t=i.evaluate(e);const r=md.parse(t);if(r)return r}throw new NA(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"numberArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=pd.parse(t);if(r)return r}throw new NA(`Could not parse numberArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"colorArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=dh.parse(t);if(r)return r}throw new NA(`Could not parse colorArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const i of this.args){t=i.evaluate(e);const r=vm.parse(t);if(r)return r}throw new NA(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const i of this.args){if(t=i.evaluate(e),t===null)return 0;const r=Number(t);if(!isNaN(r))return r}throw new NA(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return Hp.fromString(VC(this.args[0].evaluate(e)));case"resolvedImage":return N0.fromString(VC(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return VC(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const Bq=["Unknown","Point","LineString","Polygon"];class wL{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Bq[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache.get(e);return t||(t=tl.parse(e),this._parseColorCache.set(e,t)),t}}class F3{constructor(e,t,i=[],r,a=new RB,l=[]){this.registry=e,this.path=i,this.key=i.map(o=>`[${o}]`).join(""),this.scope=a,this.errors=l,this.expectedType=r,this._isConstant=t}parse(e,t,i,r,a={}){return t?this.concat(t,i,r)._parse(e,a):this._parse(e,a)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function i(r,a,l){return l==="assert"?new Zm(a,[r]):l==="coerce"?new b1(a,[r]):r}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if(typeof r!="string")return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const a=this.registry[r];if(a){let l=a.parse(e,this);if(!l)return null;if(this.expectedType){const o=this.expectedType,m=l.type;if((o.kind==="string"||o.kind==="number"||o.kind==="boolean"||o.kind==="object"||o.kind==="array")&&m.kind==="value")l=i(l,o,t.typeAnnotation||"assert");else if(o.kind==="projectionDefinition"&&["string","array"].includes(m.kind)||["color","formatted","resolvedImage"].includes(o.kind)&&["value","string"].includes(m.kind)||["padding","numberArray"].includes(o.kind)&&["value","number","array"].includes(m.kind)||o.kind==="colorArray"&&["value","string","array"].includes(m.kind)||o.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(m.kind))l=i(l,o,t.typeAnnotation||"coerce");else if(this.checkSubtype(o,m))return null}if(!(l instanceof Bv)&&l.type.kind!=="resolvedImage"&&this._isConstant(l)){const o=new wL;try{l=new Bv(l.type,l.evaluate(o))}catch(m){return this.error(m.message),null}}return l}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,i){const r=typeof e=="number"?this.path.concat(e):this.path,a=i?this.scope.concat(i):this.scope;return new F3(this.registry,this._isConstant,r,t||null,a,this.errors)}error(e,...t){const i=`${this.key}${t.map(r=>`[${r}]`).join("")}`;this.errors.push(new Np(i,e))}checkSubtype(e,t){const i=d_(e,t);return i&&this.error(i),i}}class z3{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const i=[];for(let a=1;a<e.length-1;a+=2){const l=e[a];if(typeof l!="string")return t.error(`Expected string, but found ${typeof l} instead.`,a);if(/[^a-zA-Z0-9_]/.test(l))return t.error("Variable names must contain only alphanumeric characters or '_'.",a);const o=t.parse(e[a+1],a+1);if(!o)return null;i.push([l,o])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return r?new z3(i,r):null}outputDefined(){return this.result.outputDefined()}}class N3{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const i=e[1];return t.scope.has(i)?new N3(i,t.scope.get(i)):t.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class UB{constructor(e,t,i){this.type=e,this.index=t,this.input=i}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Ei),r=t.parse(e[2],2,bf(t.expectedType||zo));if(!i||!r)return null;const a=r.type;return new UB(a.itemType,i,r)}evaluate(e){const t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new NA(`Array index out of bounds: ${t} < 0.`);if(t>=i.length)throw new NA(`Array index out of bounds: ${t} > ${i.length-1}.`);if(t!==Math.floor(t))throw new NA(`Array index must be an integer, but found ${t} instead.`);return i[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class LB{constructor(e,t){this.type=Ho,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,zo),r=t.parse(e[2],2,zo);return!i||!r?null:PB(i.type,[Ho,fa,Ei,k3,zo])?new LB(i,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${CA(i.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!Dg(t,["boolean","string","number","null"]))throw new NA(`Expected first argument to be of type boolean, string, number or null, but found ${CA(tc(t))} instead.`);if(!Dg(i,["string","array"]))throw new NA(`Expected second argument to be of type array or string, but found ${CA(tc(i))} instead.`);return i.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class zx{constructor(e,t,i){this.type=Ei,this.needle=e,this.haystack=t,this.fromIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,zo),r=t.parse(e[2],2,zo);if(!i||!r)return null;if(!PB(i.type,[Ho,fa,Ei,k3,zo]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${CA(i.type)} instead`);if(e.length===4){const a=t.parse(e[3],3,Ei);return a?new zx(i,r,a):null}else return new zx(i,r)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!Dg(t,["boolean","string","number","null"]))throw new NA(`Expected first argument to be of type boolean, string, number or null, but found ${CA(tc(t))} instead.`);let r;if(this.fromIndex&&(r=this.fromIndex.evaluate(e)),Dg(i,["string"])){const a=i.indexOf(t,r);return a===-1?-1:[...i.slice(0,a)].length}else{if(Dg(i,["array"]))return i.indexOf(t,r);throw new NA(`Expected second argument to be of type array or string, but found ${CA(tc(i))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class FB{constructor(e,t,i,r,a,l){this.inputType=e,this.type=t,this.input=i,this.cases=r,this.outputs=a,this.otherwise=l}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let i,r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const a={},l=[];for(let C=2;C<e.length-1;C+=2){let S=e[C];const O=e[C+1];Array.isArray(S)||(S=[S]);const U=t.concat(C);if(S.length===0)return U.error("Expected at least one branch label.");for(const z of S){if(typeof z!="number"&&typeof z!="string")return U.error("Branch labels must be numbers or strings.");if(typeof z=="number"&&Math.abs(z)>Number.MAX_SAFE_INTEGER)return U.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof z=="number"&&Math.floor(z)!==z)return U.error("Numeric branch labels must be integer values.");if(!i)i=tc(z);else if(U.checkSubtype(i,tc(z)))return null;if(typeof a[String(z)]<"u")return U.error("Branch labels must be unique.");a[String(z)]=l.length}const K=t.parse(O,C,r);if(!K)return null;r=r||K.type,l.push(K)}const o=t.parse(e[1],1,zo);if(!o)return null;const m=t.parse(e[e.length-1],e.length-1,r);return!m||o.type.kind!=="value"&&t.concat(1).checkSubtype(i,o.type)?null:new FB(i,r,o,a,l,m)}evaluate(e){const t=this.input.evaluate(e);return(tc(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class zB{constructor(e,t,i){this.type=e,this.branches=t,this.otherwise=i}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const r=[];for(let l=1;l<e.length-1;l+=2){const o=t.parse(e[l],l,Ho);if(!o)return null;const m=t.parse(e[l+1],l+1,i);if(!m)return null;r.push([o,m]),i=i||m.type}const a=t.parse(e[e.length-1],e.length-1,i);if(!a)return null;if(!i)throw new Error("Can't infer output type");return new zB(i,r,a)}evaluate(e){for(const[t,i]of this.branches)if(t.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,i]of this.branches)e(t),e(i);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}}class Nx{constructor(e,t,i,r){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,zo),r=t.parse(e[2],2,Ei);if(!i||!r)return null;if(!PB(i.type,[bf(zo),fa,zo]))return t.error(`Expected first argument to be of type array or string, but found ${CA(i.type)} instead`);if(e.length===4){const a=t.parse(e[3],3,Ei);return a?new Nx(i.type,i,r,a):null}else return new Nx(i.type,i,r)}evaluate(e){const t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);let r;if(this.endIndex&&(r=this.endIndex.evaluate(e)),Dg(t,["string"]))return[...t].slice(i,r).join("");if(Dg(t,["array"]))return t.slice(i,r);throw new NA(`Expected first argument to be of type array or string, but found ${CA(tc(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function G3(n,e){const t=n.length-1;let i=0,r=t,a=0,l,o;for(;i<=r;)if(a=Math.floor((i+r)/2),l=n[a],o=n[a+1],l<=e){if(a===t||e<o)return a;i=a+1}else if(l>e)r=a-1;else throw new NA("Input is not a number.");return 0}class j3{constructor(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,a]of i)this.labels.push(r),this.outputs.push(a)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const i=t.parse(e[1],1,Ei);if(!i)return null;const r=[];let a=null;t.expectedType&&t.expectedType.kind!=="value"&&(a=t.expectedType);for(let l=1;l<e.length;l+=2){const o=l===1?-1/0:e[l],m=e[l+1],C=l,S=l+1;if(typeof o!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',C);if(r.length&&r[r.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',C);const O=t.parse(m,S,a);if(!O)return null;a=a||O.type,r.push([o,O])}return new j3(a,i,r)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const a=t.length;if(r>=t[a-1])return i[a-1].evaluate(e);const l=G3(t,r);return i[l].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function Oq(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var C4,nI;function Iq(){if(nI)return C4;nI=1,C4=n;function n(e,t,i,r){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=i,this.p2y=r}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var i=e,r=0;r<8;r++){var a=this.sampleCurveX(i)-e;if(Math.abs(a)<t)return i;var l=this.sampleCurveDerivativeX(i);if(Math.abs(l)<1e-6)break;i=i-a/l}var o=0,m=1;for(i=e,r=0;r<20&&(a=this.sampleCurveX(i),!(Math.abs(a-e)<t));r++)e>a?o=i:m=i,i=(m-o)*.5+o;return i},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},C4}var Tq=Iq(),kq=Oq(Tq);class Cm{constructor(e,t,i,r,a){this.type=e,this.operator=t,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(const[l,o]of a)this.labels.push(l),this.outputs.push(o)}static interpolationFactor(e,t,i,r){let a=0;if(e.name==="exponential")a=_4(t,e.base,i,r);else if(e.name==="linear")a=_4(t,1,i,r);else if(e.name==="cubic-bezier"){const l=e.controlPoints;a=new kq(l[0],l[1],l[2],l[3]).solve(_4(t,1,i,r))}return a}static parse(e,t){let[i,r,a,...l]=e;if(!Array.isArray(r)||r.length===0)return t.error("Expected an interpolation type expression.",1);if(r[0]==="linear")r={name:"linear"};else if(r[0]==="exponential"){const C=r[1];if(typeof C!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:C}}else if(r[0]==="cubic-bezier"){const C=r.slice(1);if(C.length!==4||C.some(S=>typeof S!="number"||S<0||S>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:C}}else return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(a=t.parse(a,2,Ei),!a)return null;const o=[];let m=null;(i==="interpolate-hcl"||i==="interpolate-lab")&&t.expectedType!=h_?m=qp:t.expectedType&&t.expectedType.kind!=="value"&&(m=t.expectedType);for(let C=0;C<l.length;C+=2){const S=l[C],O=l[C+1],U=C+3,K=C+4;if(typeof S!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',U);if(o.length&&o[o.length-1][0]>=S)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',U);const z=t.parse(O,K,m);if(!z)return null;m=m||z.type,o.push([S,z])}return!l1(m,Ei)&&!l1(m,D3)&&!l1(m,qp)&&!l1(m,K3)&&!l1(m,U3)&&!l1(m,h_)&&!l1(m,L3)&&!l1(m,bf(Ei))?t.error(`Type ${CA(m)} is not interpolatable.`):new Cm(m,i,r,a,o)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const a=t.length;if(r>=t[a-1])return i[a-1].evaluate(e);const l=G3(t,r),o=t[l],m=t[l+1],C=Cm.interpolationFactor(this.interpolation,r,o,m),S=i[l].evaluate(e),O=i[l+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return I1(S,O,C);case"color":return tl.interpolate(S,O,C);case"padding":return md.interpolate(S,O,C);case"colorArray":return dh.interpolate(S,O,C);case"numberArray":return pd.interpolate(S,O,C);case"variableAnchorOffsetCollection":return vm.interpolate(S,O,C);case"array":return Ev(S,O,C);case"projectionDefinition":return mm.interpolate(S,O,C)}case"interpolate-hcl":switch(this.type.kind){case"color":return tl.interpolate(S,O,C,"hcl");case"colorArray":return dh.interpolate(S,O,C,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return tl.interpolate(S,O,C,"lab");case"colorArray":return dh.interpolate(S,O,C,"lab")}}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function _4(n,e,t,i){const r=i-t,a=n-t;return r===0?0:e===1?a/r:(Math.pow(e,a)-1)/(Math.pow(e,r)-1)}const Dq={color:tl.interpolate,number:I1,padding:md.interpolate,numberArray:pd.interpolate,colorArray:dh.interpolate,variableAnchorOffsetCollection:vm.interpolate,array:Ev};class m_{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=null;const r=t.expectedType;r&&r.kind!=="value"&&(i=r);const a=[];for(const o of e.slice(1)){const m=t.parse(o,1+a.length,i,void 0,{typeAnnotation:"omit"});if(!m)return null;i=i||m.type,a.push(m)}if(!i)throw new Error("No output type");return r&&a.some(o=>d_(r,o.type))?new m_(zo,a):new m_(i,a)}evaluate(e){let t=null,i=0,r;for(const a of this.args)if(i++,t=a.evaluate(e),t&&t instanceof N0&&!t.available&&(r||(r=t.name),t=null,i===this.args.length&&(t=r)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function iI(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function Rq(n,e,t){return e===t}function Pq(n,e,t){return e!==t}function Kq(n,e,t){return e<t}function Uq(n,e,t){return e>t}function Lq(n,e,t){return e<=t}function Fq(n,e,t){return e>=t}function EL(n,e,t,i){return i.compare(e,t)===0}function zq(n,e,t,i){return!EL(n,e,t,i)}function Nq(n,e,t,i){return i.compare(e,t)<0}function Gq(n,e,t,i){return i.compare(e,t)>0}function jq(n,e,t,i){return i.compare(e,t)<=0}function Wq(n,e,t,i){return i.compare(e,t)>=0}function zv(n,e,t){const i=n!=="=="&&n!=="!=";return class BL{constructor(a,l,o){this.type=Ho,this.lhs=a,this.rhs=l,this.collator=o,this.hasUntypedArgument=a.type.kind==="value"||l.type.kind==="value"}static parse(a,l){if(a.length!==3&&a.length!==4)return l.error("Expected two or three arguments.");const o=a[0];let m=l.parse(a[1],1,zo);if(!m)return null;if(!iI(o,m.type))return l.concat(1).error(`"${o}" comparisons are not supported for type '${CA(m.type)}'.`);let C=l.parse(a[2],2,zo);if(!C)return null;if(!iI(o,C.type))return l.concat(2).error(`"${o}" comparisons are not supported for type '${CA(C.type)}'.`);if(m.type.kind!==C.type.kind&&m.type.kind!=="value"&&C.type.kind!=="value")return l.error(`Cannot compare types '${CA(m.type)}' and '${CA(C.type)}'.`);i&&(m.type.kind==="value"&&C.type.kind!=="value"?m=new Zm(C.type,[m]):m.type.kind!=="value"&&C.type.kind==="value"&&(C=new Zm(m.type,[C])));let S=null;if(a.length===4){if(m.type.kind!=="string"&&C.type.kind!=="string"&&m.type.kind!=="value"&&C.type.kind!=="value")return l.error("Cannot use collator to compare non-string types.");if(S=l.parse(a[3],3,R3),!S)return null}return new BL(m,C,S)}evaluate(a){const l=this.lhs.evaluate(a),o=this.rhs.evaluate(a);if(i&&this.hasUntypedArgument){const m=tc(l),C=tc(o);if(m.kind!==C.kind||!(m.kind==="string"||m.kind==="number"))throw new NA(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${m.kind}, ${C.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const m=tc(l),C=tc(o);if(m.kind!=="string"||C.kind!=="string")return e(a,l,o)}return this.collator?t(a,l,o,this.collator.evaluate(a)):e(a,l,o)}eachChild(a){a(this.lhs),a(this.rhs),this.collator&&a(this.collator)}outputDefined(){return!0}}}const Qq=zv("==",Rq,EL),Yq=zv("!=",Pq,zq),qq=zv("<",Kq,Nq),Hq=zv(">",Uq,Gq),Vq=zv("<=",Lq,jq),$q=zv(">=",Fq,Wq);class W3{constructor(e,t,i){this.type=R3,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");const r=t.parse(i["case-sensitive"]===void 0?!1:i["case-sensitive"],1,Ho);if(!r)return null;const a=t.parse(i["diacritic-sensitive"]===void 0?!1:i["diacritic-sensitive"],1,Ho);if(!a)return null;let l=null;return i.locale&&(l=t.parse(i.locale,1,fa),!l)?null:new W3(r,a,l)}evaluate(e){return new KB(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class NB{constructor(e,t,i,r,a){this.type=fa,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=a}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const i=t.parse(e[1],1,Ei);if(!i)return null;const r=e[2];if(typeof r!="object"||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let a=null;if(r.locale&&(a=t.parse(r.locale,1,fa),!a))return null;let l=null;if(r.currency&&(l=t.parse(r.currency,1,fa),!l))return null;let o=null;if(r["min-fraction-digits"]&&(o=t.parse(r["min-fraction-digits"],1,Ei),!o))return null;let m=null;return r["max-fraction-digits"]&&(m=t.parse(r["max-fraction-digits"],1,Ei),!m)?null:new NB(i,a,l,o,m)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class GB{constructor(e){this.type=P3,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");const r=[];let a=!1;for(let l=1;l<=e.length-1;++l){const o=e[l];if(a&&typeof o=="object"&&!Array.isArray(o)){a=!1;let m=null;if(o["font-scale"]&&(m=t.parse(o["font-scale"],1,Ei),!m))return null;let C=null;if(o["text-font"]&&(C=t.parse(o["text-font"],1,bf(fa)),!C))return null;let S=null;if(o["text-color"]&&(S=t.parse(o["text-color"],1,qp),!S))return null;let O=null;if(o["vertical-align"]){if(typeof o["vertical-align"]=="string"&&!wq.includes(o["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${o["vertical-align"]}' instead.`);if(O=t.parse(o["vertical-align"],1,fa),!O)return null}const U=r[r.length-1];U.scale=m,U.font=C,U.textColor=S,U.verticalAlign=O}else{const m=t.parse(e[l],1,zo);if(!m)return null;const C=m.type.kind;if(C!=="string"&&C!=="value"&&C!=="null"&&C!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");a=!0,r.push({content:m,scale:null,font:null,textColor:null,verticalAlign:null})}}return new GB(r)}evaluate(e){const t=i=>{const r=i.content.evaluate(e);return tc(r)===tb?new d6("",r,null,null,null,i.verticalAlign?i.verticalAlign.evaluate(e):null):new d6(VC(r),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null,i.verticalAlign?i.verticalAlign.evaluate(e):null)};return new Hp(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}}class jB{constructor(e){this.type=tb,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const i=t.parse(e[1],1,fa);return i?new jB(i):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),i=N0.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i}eachChild(e){e(this.input)}outputDefined(){return!1}}class WB{constructor(e){this.type=Ei,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${CA(i.type)} instead.`):new WB(i):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new NA(`Expected value to be of type string or array, but found ${CA(tc(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const Vp=8192;function Zq(n,e){const t=Xq(n[0]),i=eH(n[1]),r=Math.pow(2,e.z);return[Math.round(t*r*Vp),Math.round(i*r*Vp)]}function QB(n,e){const t=Math.pow(2,e.z),i=(n[0]/Vp+e.x)/t,r=(n[1]/Vp+e.y)/t;return[Jq(i),tH(r)]}function Xq(n){return(180+n)/360}function Jq(n){return n*360-180}function eH(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function tH(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function nb(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function p_(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function nH(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function iH(n,e,t){const i=n[0]-e[0],r=n[1]-e[1],a=n[0]-t[0],l=n[1]-t[1];return i*l-a*r===0&&i*a<=0&&r*l<=0}function Q3(n,e,t,i){const r=[e[0]-n[0],e[1]-n[1]],a=[i[0]-t[0],i[1]-t[1]];return sH(a,r)===0?!1:!!(rI(n,e,t,i)&&rI(t,i,n,e))}function rH(n,e,t){for(const i of t)for(let r=0;r<i.length-1;++r)if(Q3(n,e,i[r],i[r+1]))return!0;return!1}function Nv(n,e,t=!1){let i=!1;for(const r of e)for(let a=0;a<r.length-1;a++){if(iH(n,r[a],r[a+1]))return t;nH(n,r[a],r[a+1])&&(i=!i)}return i}function oH(n,e){for(const t of e)if(Nv(n,t))return!0;return!1}function OL(n,e){for(const t of n)if(!Nv(t,e))return!1;for(let t=0;t<n.length-1;++t)if(rH(n[t],n[t+1],e))return!1;return!0}function aH(n,e){for(const t of e)if(OL(n,t))return!0;return!1}function sH(n,e){return n[0]*e[1]-n[1]*e[0]}function rI(n,e,t,i){const r=n[0]-t[0],a=n[1]-t[1],l=e[0]-t[0],o=e[1]-t[1],m=i[0]-t[0],C=i[1]-t[1],S=r*C-m*a,O=l*C-m*o;return S>0&&O<0||S<0&&O>0}function YB(n,e,t){const i=[];for(let r=0;r<n.length;r++){const a=[];for(let l=0;l<n[r].length;l++){const o=Zq(n[r][l],t);nb(e,o),a.push(o)}i.push(a)}return i}function IL(n,e,t){const i=[];for(let r=0;r<n.length;r++){const a=YB(n[r],e,t);i.push(a)}return i}function TL(n,e,t,i){if(n[0]<t[0]||n[0]>t[2]){const r=i*.5;let a=n[0]-t[0]>r?-i:t[0]-n[0]>r?i:0;a===0&&(a=n[0]-t[2]>r?-i:t[2]-n[0]>r?i:0),n[0]+=a}nb(e,n)}function lH(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function oI(n,e,t,i){const r=Math.pow(2,i.z)*Vp,a=[i.x*Vp,i.y*Vp],l=[];for(const o of n)for(const m of o){const C=[m.x+a[0],m.y+a[1]];TL(C,e,t,r),l.push(C)}return l}function aI(n,e,t,i){const r=Math.pow(2,i.z)*Vp,a=[i.x*Vp,i.y*Vp],l=[];for(const o of n){const m=[];for(const C of o){const S=[C.x+a[0],C.y+a[1]];nb(e,S),m.push(S)}l.push(m)}if(e[2]-e[0]<=r/2){lH(e);for(const o of l)for(const m of o)TL(m,e,t,r)}return l}function AH(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const a=YB(e.coordinates,i,r),l=oI(n.geometry(),t,i,r);if(!p_(t,i))return!1;for(const o of l)if(!Nv(o,a))return!1}if(e.type==="MultiPolygon"){const a=IL(e.coordinates,i,r),l=oI(n.geometry(),t,i,r);if(!p_(t,i))return!1;for(const o of l)if(!oH(o,a))return!1}return!0}function uH(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const a=YB(e.coordinates,i,r),l=aI(n.geometry(),t,i,r);if(!p_(t,i))return!1;for(const o of l)if(!OL(o,a))return!1}if(e.type==="MultiPolygon"){const a=IL(e.coordinates,i,r),l=aI(n.geometry(),t,i,r);if(!p_(t,i))return!1;for(const o of l)if(!aH(o,a))return!1}return!0}class Rg{constructor(e,t){this.type=Ho,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(f_(e[1])){const i=e[1];if(i.type==="FeatureCollection"){const r=[];for(const a of i.features){const{type:l,coordinates:o}=a.geometry;l==="Polygon"&&r.push(o),l==="MultiPolygon"&&r.push(...o)}if(r.length){const a={type:"MultiPolygon",coordinates:r};return new Rg(i,a)}}else if(i.type==="Feature"){const r=i.geometry.type;if(r==="Polygon"||r==="MultiPolygon")return new Rg(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new Rg(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return AH(e,this.geometries);if(e.geometryType()==="LineString")return uH(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class kL{constructor(e=[],t=(i,r)=>i<r?-1:i>r?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:i}=this,r=t[e];for(;e>0;){const a=e-1>>1,l=t[a];if(i(r,l)>=0)break;t[e]=l,e=a}t[e]=r}_down(e){const{data:t,compare:i}=this,r=this.length>>1,a=t[e];for(;e<r;){let l=(e<<1)+1;const o=l+1;if(o<this.length&&i(t[o],t[l])<0&&(l=o),i(t[l],a)>=0)break;t[e]=t[l],e=l}t[e]=a}}function cH(n,e){if(n.length<=1)return[n];const i=[];let r,a;for(const l of n){const o=hH(l);o!==0&&(l.area=Math.abs(o),a===void 0&&(a=o<0),a===o<0?(r&&i.push(r),r=[l]):r.push(l))}return r&&i.push(r),i}function hH(n){let e=0;for(let t=0,i=n.length,r=i-1,a,l;t<i;r=t++)a=n[t],l=n[r],e+=(l.x-a.x)*(a.y+l.y);return e}const dH=6378.137,sI=1/298.257223563,lI=sI*(2-sI),AI=Math.PI/180;class qB{constructor(e){const t=AI*dH*1e3,i=Math.cos(e*AI),r=1/(1-lI*(1-i*i)),a=Math.sqrt(r);this.kx=t*a*i,this.ky=t*a*r*(1-lI)}distance(e,t){const i=this.wrap(e[0]-t[0])*this.kx,r=(e[1]-t[1])*this.ky;return Math.sqrt(i*i+r*r)}pointOnLine(e,t){let i=1/0,r,a,l,o;for(let m=0;m<e.length-1;m++){let C=e[m][0],S=e[m][1],O=this.wrap(e[m+1][0]-C)*this.kx,U=(e[m+1][1]-S)*this.ky,K=0;(O!==0||U!==0)&&(K=(this.wrap(t[0]-C)*this.kx*O+(t[1]-S)*this.ky*U)/(O*O+U*U),K>1?(C=e[m+1][0],S=e[m+1][1]):K>0&&(C+=O/this.kx*K,S+=U/this.ky*K)),O=this.wrap(t[0]-C)*this.kx,U=(t[1]-S)*this.ky;const z=O*O+U*U;z<i&&(i=z,r=C,a=S,l=m,o=K)}return{point:[r,a],index:l,t:Math.max(0,Math.min(1,o))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const f6=100,m6=50;function DL(n,e){return e[0]-n[0]}function Gx(n){return n[1]-n[0]+1}function K0(n,e){return n[1]>=n[0]&&n[1]<e}function p6(n,e){if(n[0]>n[1])return[null,null];const t=Gx(n);if(e){if(t===2)return[n,null];const r=Math.floor(t/2);return[[n[0],n[0]+r],[n[0]+r,n[1]]]}if(t===1)return[n,null];const i=Math.floor(t/2)-1;return[[n[0],n[0]+i],[n[0]+i+1,n[1]]]}function g6(n,e){if(!K0(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let i=e[0];i<=e[1];++i)nb(t,n[i]);return t}function y6(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const i of t)nb(e,i);return e}function uI(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function HB(n,e,t){if(!uI(n)||!uI(e))return NaN;let i=0,r=0;return n[2]<e[0]&&(i=e[0]-n[2]),n[0]>e[2]&&(i=n[0]-e[2]),n[1]>e[3]&&(r=n[1]-e[3]),n[3]<e[1]&&(r=e[1]-n[3]),t.distance([0,0],[i,r])}function wg(n,e,t){const i=t.pointOnLine(e,n);return t.distance(n,i.point)}function VB(n,e,t,i,r){const a=Math.min(wg(n,[t,i],r),wg(e,[t,i],r)),l=Math.min(wg(t,[n,e],r),wg(i,[n,e],r));return Math.min(a,l)}function fH(n,e,t,i,r){if(!(K0(e,n.length)&&K0(i,t.length)))return 1/0;let l=1/0;for(let o=e[0];o<e[1];++o){const m=n[o],C=n[o+1];for(let S=i[0];S<i[1];++S){const O=t[S],U=t[S+1];if(Q3(m,C,O,U))return 0;l=Math.min(l,VB(m,C,O,U,r))}}return l}function mH(n,e,t,i,r){if(!(K0(e,n.length)&&K0(i,t.length)))return NaN;let l=1/0;for(let o=e[0];o<=e[1];++o)for(let m=i[0];m<=i[1];++m)if(l=Math.min(l,r.distance(n[o],t[m])),l===0)return l;return l}function pH(n,e,t){if(Nv(n,e,!0))return 0;let i=1/0;for(const r of e){const a=r[0],l=r[r.length-1];if(a!==l&&(i=Math.min(i,wg(n,[l,a],t)),i===0))return i;const o=t.pointOnLine(r,n);if(i=Math.min(i,t.distance(n,o.point)),i===0)return i}return i}function gH(n,e,t,i){if(!K0(e,n.length))return NaN;for(let a=e[0];a<=e[1];++a)if(Nv(n[a],t,!0))return 0;let r=1/0;for(let a=e[0];a<e[1];++a){const l=n[a],o=n[a+1];for(const m of t)for(let C=0,S=m.length,O=S-1;C<S;O=C++){const U=m[O],K=m[C];if(Q3(l,o,U,K))return 0;r=Math.min(r,VB(l,o,U,K,i))}}return r}function cI(n,e){for(const t of n)for(const i of t)if(Nv(i,e,!0))return!0;return!1}function yH(n,e,t,i=1/0){const r=y6(n),a=y6(e);if(i!==1/0&&HB(r,a,t)>=i)return i;if(p_(r,a)){if(cI(n,e))return 0}else if(cI(e,n))return 0;let l=1/0;for(const o of n)for(let m=0,C=o.length,S=C-1;m<C;S=m++){const O=o[S],U=o[m];for(const K of e)for(let z=0,j=K.length,Q=j-1;z<j;Q=z++){const ee=K[Q],V=K[z];if(Q3(O,U,ee,V))return 0;l=Math.min(l,VB(O,U,ee,V,t))}}return l}function hI(n,e,t,i,r,a){if(!a)return;const l=HB(g6(i,a),r,t);l<e&&n.push([l,a,[0,0]])}function Pb(n,e,t,i,r,a,l){if(!a||!l)return;const o=HB(g6(i,a),g6(r,l),t);o<e&&n.push([o,a,l])}function jx(n,e,t,i,r=1/0){let a=Math.min(i.distance(n[0],t[0][0]),r);if(a===0)return a;const l=new kL([[0,[0,n.length-1],[0,0]]],DL),o=y6(t);for(;l.length>0;){const m=l.pop();if(m[0]>=a)continue;const C=m[1],S=e?m6:f6;if(Gx(C)<=S){if(!K0(C,n.length))return NaN;if(e){const O=gH(n,C,t,i);if(isNaN(O)||O===0)return O;a=Math.min(a,O)}else for(let O=C[0];O<=C[1];++O){const U=pH(n[O],t,i);if(a=Math.min(a,U),a===0)return 0}}else{const O=p6(C,e);hI(l,a,i,n,o,O[0]),hI(l,a,i,n,o,O[1])}}return a}function Wx(n,e,t,i,r,a=1/0){let l=Math.min(a,r.distance(n[0],t[0]));if(l===0)return l;const o=new kL([[0,[0,n.length-1],[0,t.length-1]]],DL);for(;o.length>0;){const m=o.pop();if(m[0]>=l)continue;const C=m[1],S=m[2],O=e?m6:f6,U=i?m6:f6;if(Gx(C)<=O&&Gx(S)<=U){if(!K0(C,n.length)&&K0(S,t.length))return NaN;let K;if(e&&i)K=fH(n,C,t,S,r),l=Math.min(l,K);else if(e&&!i){const z=n.slice(C[0],C[1]+1);for(let j=S[0];j<=S[1];++j)if(K=wg(t[j],z,r),l=Math.min(l,K),l===0)return l}else if(!e&&i){const z=t.slice(S[0],S[1]+1);for(let j=C[0];j<=C[1];++j)if(K=wg(n[j],z,r),l=Math.min(l,K),l===0)return l}else K=mH(n,C,t,S,r),l=Math.min(l,K)}else{const K=p6(C,e),z=p6(S,i);Pb(o,l,r,n,t,K[0],z[0]),Pb(o,l,r,n,t,K[0],z[1]),Pb(o,l,r,n,t,K[1],z[0]),Pb(o,l,r,n,t,K[1],z[1])}}return l}function vH(n,e){const t=n.geometry(),i=t.flat().map(l=>QB([l.x,l.y],n.canonical));if(t.length===0)return NaN;const r=new qB(i[0][1]);let a=1/0;for(const l of e){switch(l.type){case"Point":a=Math.min(a,Wx(i,!1,[l.coordinates],!1,r,a));break;case"LineString":a=Math.min(a,Wx(i,!1,l.coordinates,!0,r,a));break;case"Polygon":a=Math.min(a,jx(i,!1,l.coordinates,r,a));break}if(a===0)return a}return a}function CH(n,e){const t=n.geometry(),i=t.flat().map(l=>QB([l.x,l.y],n.canonical));if(t.length===0)return NaN;const r=new qB(i[0][1]);let a=1/0;for(const l of e){switch(l.type){case"Point":a=Math.min(a,Wx(i,!0,[l.coordinates],!1,r,a));break;case"LineString":a=Math.min(a,Wx(i,!0,l.coordinates,!0,r,a));break;case"Polygon":a=Math.min(a,jx(i,!0,l.coordinates,r,a));break}if(a===0)return a}return a}function _H(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const i=cH(t).map(l=>l.map(o=>o.map(m=>QB([m.x,m.y],n.canonical)))),r=new qB(i[0][0][0][1]);let a=1/0;for(const l of e)for(const o of i){switch(l.type){case"Point":a=Math.min(a,jx([l.coordinates],!1,o,r,a));break;case"LineString":a=Math.min(a,jx(l.coordinates,!0,o,r,a));break;case"Polygon":a=Math.min(a,yH(o,l.coordinates,r,a));break}if(a===0)return a}return a}function b4(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}class Pg{constructor(e,t){this.type=Ei,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(f_(e[1])){const i=e[1];if(i.type==="FeatureCollection")return new Pg(i,i.features.map(r=>b4(r.geometry)).flat());if(i.type==="Feature")return new Pg(i,b4(i.geometry));if("type"in i&&"coordinates"in i)return new Pg(i,b4(i))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return vH(e,this.geometries);if(e.geometryType()==="LineString")return CH(e,this.geometries);if(e.geometryType()==="Polygon")return _H(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class ib{constructor(e){this.type=zo,this.key=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=e[1];return i==null?t.error("Global state property must be defined."):typeof i!="string"?t.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new ib(i)}evaluate(e){var t;const i=(t=e.globals)===null||t===void 0?void 0:t.globalState;return!i||Object.keys(i).length===0?null:HC(i,this.key)}eachChild(){}outputDefined(){return!1}}const Y3={"==":Qq,"!=":Yq,">":Hq,"<":qq,">=":$q,"<=":Vq,array:Zm,at:UB,boolean:Zm,case:zB,coalesce:m_,collator:W3,format:GB,image:jB,in:LB,"index-of":zx,interpolate:Cm,"interpolate-hcl":Cm,"interpolate-lab":Cm,length:WB,let:z3,literal:Bv,match:FB,number:Zm,"number-format":NB,object:Zm,slice:Nx,step:j3,string:Zm,"to-boolean":b1,"to-color":b1,"to-number":b1,"to-string":b1,var:N3,within:Rg,distance:Pg,"global-state":ib};class Sf{constructor(e,t,i,r){this.name=e,this.type=t,this._evaluate=i,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const i=e[0],r=Sf.definitions[i];if(!r)return t.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const a=Array.isArray(r)?r[0]:r.type,l=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,o=l.filter(([C])=>!Array.isArray(C)||C.length===e.length-1);let m=null;for(const[C,S]of o){m=new F3(t.registry,Qx,t.path,null,t.scope);const O=[];let U=!1;for(let K=1;K<e.length;K++){const z=e[K],j=Array.isArray(C)?C[K-1]:C.type,Q=m.parse(z,1+O.length,j);if(!Q){U=!0;break}O.push(Q)}if(!U){if(Array.isArray(C)&&C.length!==O.length){m.error(`Expected ${C.length} arguments, but found ${O.length} instead.`);continue}for(let K=0;K<O.length;K++){const z=Array.isArray(C)?C[K]:C.type,j=O[K];m.concat(K+1).checkSubtype(z,j.type)}if(m.errors.length===0)return new Sf(i,a,S,O)}}if(o.length===1)t.errors.push(...m.errors);else{const S=(o.length?o:l).map(([U])=>xH(U)).join(" | "),O=[];for(let U=1;U<e.length;U++){const K=t.parse(e[U],1+O.length);if(!K)return null;O.push(CA(K.type))}t.error(`Expected arguments of type ${S}, but found (${O.join(", ")}) instead.`)}return null}static register(e,t){Sf.definitions=t;for(const i in t)e[i]=Sf}}function dI(n,[e,t,i,r]){e=e.evaluate(n),t=t.evaluate(n),i=i.evaluate(n);const a=r?r.evaluate(n):1,l=SL(e,t,i,a);if(l)throw new NA(l);return new tl(e/255,t/255,i/255,a,!1)}function fI(n,e){return n in e}function x4(n,e){const t=e[n];return typeof t>"u"?null:t}function bH(n,e,t,i){for(;t<=i;){const r=t+i>>1;if(e[r]===n)return!0;e[r]>n?i=r-1:t=r+1}return!1}function dg(n){return{type:n}}Sf.register(Y3,{error:[fq,[fa],(n,[e])=>{throw new NA(e.evaluate(n))}],typeof:[fa,[zo],(n,[e])=>CA(tc(e.evaluate(n)))],"to-rgba":[bf(Ei,4),[qp],(n,[e])=>{const[t,i,r,a]=e.evaluate(n).rgb;return[t*255,i*255,r*255,a]}],rgb:[qp,[Ei,Ei,Ei],dI],rgba:[qp,[Ei,Ei,Ei,Ei],dI],has:{type:Ho,overloads:[[[fa],(n,[e])=>fI(e.evaluate(n),n.properties())],[[fa,kg],(n,[e,t])=>fI(e.evaluate(n),t.evaluate(n))]]},get:{type:zo,overloads:[[[fa],(n,[e])=>x4(e.evaluate(n),n.properties())],[[fa,kg],(n,[e,t])=>x4(e.evaluate(n),t.evaluate(n))]]},"feature-state":[zo,[fa],(n,[e])=>x4(e.evaluate(n),n.featureState||{})],properties:[kg,[],n=>n.properties()],"geometry-type":[fa,[],n=>n.geometryType()],id:[zo,[],n=>n.id()],zoom:[Ei,[],n=>n.globals.zoom],"heatmap-density":[Ei,[],n=>n.globals.heatmapDensity||0],elevation:[Ei,[],n=>n.globals.elevation||0],"line-progress":[Ei,[],n=>n.globals.lineProgress||0],accumulated:[zo,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[Ei,dg(Ei),(n,e)=>{let t=0;for(const i of e)t+=i.evaluate(n);return t}],"*":[Ei,dg(Ei),(n,e)=>{let t=1;for(const i of e)t*=i.evaluate(n);return t}],"-":{type:Ei,overloads:[[[Ei,Ei],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[Ei],(n,[e])=>-e.evaluate(n)]]},"/":[Ei,[Ei,Ei],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[Ei,[Ei,Ei],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[Ei,[],()=>Math.LN2],pi:[Ei,[],()=>Math.PI],e:[Ei,[],()=>Math.E],"^":[Ei,[Ei,Ei],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[Ei,[Ei],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[Ei,[Ei],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[Ei,[Ei],(n,[e])=>Math.log(e.evaluate(n))],log2:[Ei,[Ei],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[Ei,[Ei],(n,[e])=>Math.sin(e.evaluate(n))],cos:[Ei,[Ei],(n,[e])=>Math.cos(e.evaluate(n))],tan:[Ei,[Ei],(n,[e])=>Math.tan(e.evaluate(n))],asin:[Ei,[Ei],(n,[e])=>Math.asin(e.evaluate(n))],acos:[Ei,[Ei],(n,[e])=>Math.acos(e.evaluate(n))],atan:[Ei,[Ei],(n,[e])=>Math.atan(e.evaluate(n))],min:[Ei,dg(Ei),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[Ei,dg(Ei),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[Ei,[Ei],(n,[e])=>Math.abs(e.evaluate(n))],round:[Ei,[Ei],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[Ei,[Ei],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[Ei,[Ei],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[Ho,[fa,zo],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[Ho,[zo],(n,[e])=>n.id()===e.value],"filter-type-==":[Ho,[fa],(n,[e])=>n.geometryType()===e.value],"filter-<":[Ho,[fa,zo],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<r}],"filter-id-<":[Ho,[zo],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<i}],"filter->":[Ho,[fa,zo],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>r}],"filter-id->":[Ho,[zo],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>i}],"filter-<=":[Ho,[fa,zo],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<=r}],"filter-id-<=":[Ho,[zo],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<=i}],"filter->=":[Ho,[fa,zo],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>=r}],"filter-id->=":[Ho,[zo],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>=i}],"filter-has":[Ho,[zo],(n,[e])=>e.value in n.properties()],"filter-has-id":[Ho,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[Ho,[bf(fa)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[Ho,[bf(zo)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[Ho,[fa,bf(zo)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[Ho,[fa,bf(zo)],(n,[e,t])=>bH(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:Ho,overloads:[[[Ho,Ho],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[dg(Ho),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:Ho,overloads:[[[Ho,Ho],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[dg(Ho),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[Ho,[Ho],(n,[e])=>!e.evaluate(n)],"is-supported-script":[Ho,[fa],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[fa,[fa],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[fa,[fa],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[fa,dg(zo),(n,e)=>e.map(t=>VC(t.evaluate(n))).join("")],"resolved-locale":[fa,[R3],(n,[e])=>e.evaluate(n).resolvedLocale()]});function xH(n){return Array.isArray(n)?`(${n.map(CA).join(", ")})`:`(${CA(n.type)}...)`}function Qx(n){if(n instanceof N3)return Qx(n.boundExpression);if(n instanceof Sf&&n.name==="error")return!1;if(n instanceof W3)return!1;if(n instanceof Rg)return!1;if(n instanceof Pg)return!1;if(n instanceof ib)return!1;const e=n instanceof b1||n instanceof Zm;let t=!0;return n.eachChild(i=>{e?t=t&&Qx(i):t=t&&i instanceof Bv}),t?q3(n)&&H3(n,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function q3(n){if(n instanceof Sf){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof Rg||n instanceof Pg)return!1;let e=!0;return n.eachChild(t=>{e&&!q3(t)&&(e=!1)}),e}function g_(n){if(n instanceof Sf&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!g_(t)&&(e=!1)}),e}function H3(n,e){if(n instanceof Sf&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(i=>{t&&!H3(i,e)&&(t=!1)}),t}function v6(n){return{result:"success",value:n}}function iv(n){return{result:"error",value:n}}function Yx(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function RL(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function $B(n){return!!n.expression&&n.expression.interpolated}function ma(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function Gv(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&tc(n)===kg}function MH(n){return n}function SH(n){switch(n.type){case"color":return tl.parse;case"padding":return md.parse;case"numberArray":return pd.parse;case"colorArray":return dh.parse;default:return null}}function wH(n){switch(n){case"exponential":return PL;case"interval":return BH;case"categorical":return EH;case"identity":return OH;default:throw new Error(`Unknown function type "${n}"`)}}function ZB(n,e){const t=n.stops&&typeof n.stops[0][0]=="object",i=t||n.property!==void 0,r=t||!i,a=n.type||($B(e)?"exponential":"interval"),l=SH(e);if(l&&(n=wv({},n),n.stops&&(n.stops=n.stops.map(S=>[S[0],l(S[1])])),n.default?n.default=l(n.default):n.default=l(e.default)),n.colorSpace&&!Sq(n.colorSpace))throw new Error(`Unknown color space: "${n.colorSpace}"`);const o=wH(a);let m,C;if(a==="categorical"){m=Object.create(null);for(const S of n.stops)m[S[0]]=S[1];C=typeof n.stops[0][0]}if(t){const S={},O=[];for(let z=0;z<n.stops.length;z++){const j=n.stops[z],Q=j[0].zoom;S[Q]===void 0&&(S[Q]={zoom:Q,type:n.type,property:n.property,default:n.default,stops:[]},O.push(Q)),S[Q].stops.push([j[0].value,j[1]])}const U=[];for(const z of O)U.push([S[z].zoom,ZB(S[z],e)]);const K={name:"linear"};return{kind:"composite",interpolationType:K,interpolationFactor:Cm.interpolationFactor.bind(void 0,K),zoomStops:U.map(z=>z[0]),evaluate({zoom:z},j){return PL({stops:U,base:n.base},e,z).evaluate(z,j)}}}else if(r){const S=a==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:S,interpolationFactor:Cm.interpolationFactor.bind(void 0,S),zoomStops:n.stops.map(O=>O[0]),evaluate:({zoom:O})=>o(n,e,O,m,C)}}else return{kind:"source",evaluate(S,O){const U=O&&O.properties?O.properties[n.property]:void 0;return U===void 0?rb(n.default,e.default):o(n,e,U,m,C)}}}function rb(n,e,t){if(n!==void 0)return n;if(e!==void 0)return e;if(t!==void 0)return t}function EH(n,e,t,i,r){const a=typeof t===r?i[t]:void 0;return rb(a,n.default,e.default)}function BH(n,e,t){if(ma(t)!=="number")return rb(n.default,e.default);const i=n.stops.length;if(i===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[i-1][0])return n.stops[i-1][1];const r=G3(n.stops.map(a=>a[0]),t);return n.stops[r][1]}function PL(n,e,t){const i=n.base!==void 0?n.base:1;if(ma(t)!=="number")return rb(n.default,e.default);const r=n.stops.length;if(r===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[r-1][0])return n.stops[r-1][1];const a=G3(n.stops.map(S=>S[0]),t),l=IH(t,i,n.stops[a][0],n.stops[a+1][0]),o=n.stops[a][1],m=n.stops[a+1][1],C=Dq[e.type]||MH;return typeof o.evaluate=="function"?{evaluate(...S){const O=o.evaluate.apply(void 0,S),U=m.evaluate.apply(void 0,S);if(!(O===void 0||U===void 0))return C(O,U,l,n.colorSpace)}}:C(o,m,l,n.colorSpace)}function OH(n,e,t){switch(e.type){case"color":t=tl.parse(t);break;case"formatted":t=Hp.fromString(t.toString());break;case"resolvedImage":t=N0.fromString(t.toString());break;case"padding":t=md.parse(t);break;case"colorArray":t=dh.parse(t);break;case"numberArray":t=pd.parse(t);break;default:ma(t)!==e.type&&(e.type!=="enum"||!e.values[t])&&(t=void 0)}return rb(t,n.default,e.default)}function IH(n,e,t,i){const r=i-t,a=n-t;return r===0?0:e===1?a/r:(Math.pow(e,a)-1)/(Math.pow(e,r)-1)}class KL{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new wL,this._defaultValue=t?RH(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,i,r,a,l){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=l,this.expression.evaluate(this._evaluator)}evaluate(e,t,i,r,a,l){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=l||null;try{const o=this.expression.evaluate(this._evaluator);if(o==null||typeof o=="number"&&o!==o)return this._defaultValue;if(this._enumValues&&!(o in this._enumValues))throw new NA(`Expected value to be one of ${Object.keys(this._enumValues).map(m=>JSON.stringify(m)).join(", ")}, but found ${JSON.stringify(o)} instead.`);return o}catch(o){return this._warningHistory[o.message]||(this._warningHistory[o.message]=!0,typeof console<"u"&&console.warn(o.message)),this._defaultValue}}}function jv(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in Y3}function V3(n,e){const t=new F3(Y3,Qx,[],e?DH(e):void 0),i=t.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return i?v6(new KL(i,e)):iv(t.errors)}class C6{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!g_(t.expression),this.globalStateRefs=X3(t.expression)}evaluateWithoutErrorHandling(e,t,i,r,a,l){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,a,l)}evaluate(e,t,i,r,a,l){return this._styleExpression.evaluate(e,t,i,r,a,l)}}class _6{constructor(e,t,i,r){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!g_(t.expression),this.globalStateRefs=X3(t.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,t,i,r,a,l){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,a,l)}evaluate(e,t,i,r,a,l){return this._styleExpression.evaluate(e,t,i,r,a,l)}interpolationFactor(e,t,i){return this.interpolationType?Cm.interpolationFactor(this.interpolationType,e,t,i):0}}function TH(n){return n._styleExpression!==void 0}function $3(n,e){const t=V3(n,e);if(t.result==="error")return t;const i=t.value.expression,r=q3(i);if(!r&&!Yx(e))return iv([new Np("","data expressions not supported")]);const a=H3(i,["zoom"]);if(!a&&!RL(e))return iv([new Np("","zoom expressions not supported")]);const l=bx(i);if(!l&&!a)return iv([new Np("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(l instanceof Np)return iv([l]);if(l instanceof Cm&&!$B(e))return iv([new Np("",'"interpolate" expressions cannot be used with this property')]);if(!l)return v6(r?new C6("constant",t.value):new C6("source",t.value));const o=l instanceof Cm?l.interpolation:void 0;return v6(r?new _6("camera",t.value,l.labels,o):new _6("composite",t.value,l.labels,o))}class Z3{constructor(e,t){this._parameters=e,this._specification=t,wv(this,ZB(this._parameters,this._specification))}static deserialize(e){return new Z3(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function kH(n,e){if(Gv(n))return new Z3(n,e);if(jv(n)){const t=$3(n,e);if(t.result==="error")throw new Error(t.value.map(i=>`${i.key}: ${i.message}`).join(", "));return t.value}else{let t=n;return e.type==="color"&&typeof n=="string"?t=tl.parse(n):e.type==="padding"&&(typeof n=="number"||Array.isArray(n))?t=md.parse(n):e.type==="numberArray"&&(typeof n=="number"||Array.isArray(n))?t=pd.parse(n):e.type==="colorArray"&&(typeof n=="string"||Array.isArray(n))?t=dh.parse(n):e.type==="variableAnchorOffsetCollection"&&Array.isArray(n)?t=vm.parse(n):e.type==="projectionDefinition"&&typeof n=="string"&&(t=mm.parse(n)),{globalStateRefs:new Set,kind:"constant",evaluate:()=>t}}}function bx(n){let e=null;if(n instanceof z3)e=bx(n.result);else if(n instanceof m_){for(const t of n.args)if(e=bx(t),e)break}else(n instanceof j3||n instanceof Cm)&&n.input instanceof Sf&&n.input.name==="zoom"&&(e=n);return e instanceof Np||n.eachChild(t=>{const i=bx(t);i instanceof Np?e=i:!e&&i?e=new Np("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new Np("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function X3(n,e=new Set){return n instanceof ib&&e.add(n.key),n.eachChild(t=>{X3(t,e)}),e}function DH(n){const e={color:qp,string:fa,number:Ei,enum:fa,boolean:Ho,formatted:P3,padding:K3,numberArray:U3,colorArray:h_,projectionDefinition:D3,resolvedImage:tb,variableAnchorOffsetCollection:L3};return n.type==="array"?bf(e[n.value]||zo,n.length):e[n.type]}function RH(n){if(n.type==="color"&&Gv(n.default))return new tl(0,0,0,0);switch(n.type){case"color":return tl.parse(n.default)||null;case"padding":return md.parse(n.default)||null;case"numberArray":return pd.parse(n.default)||null;case"colorArray":return dh.parse(n.default)||null;case"variableAnchorOffsetCollection":return vm.parse(n.default)||null;case"projectionDefinition":return mm.parse(n.default)||null;default:return n.default===void 0?null:n.default}}function ob(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!ob(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const PH={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function KH(n){if(n==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};ob(n)||(n=qx(n));const e=V3(n,PH);if(e.result==="error")throw new Error(e.value.map(t=>`${t.key}: ${t.message}`).join(", "));{const t=UL(n);return{filter:(i,r,a)=>e.value.evaluate(i,r,{},a),needGeometry:t,getGlobalStateRefs:()=>X3(e.value.expression)}}}function UH(n,e){return n<e?-1:n>e?1:0}function UL(n){if(!Array.isArray(n))return!1;if(n[0]==="within"||n[0]==="distance")return!0;for(let e=1;e<n.length;e++)if(UL(n[e]))return!0;return!1}function qx(n){if(!n)return!0;const e=n[0];return n.length<=1?e!=="any":e==="=="?M4(n[1],n[2],"=="):e==="!="?Kb(M4(n[1],n[2],"==")):e==="<"||e===">"||e==="<="||e===">="?M4(n[1],n[2],e):e==="any"?LH(n.slice(1)):e==="all"?["all"].concat(n.slice(1).map(qx)):e==="none"?["all"].concat(n.slice(1).map(qx).map(Kb)):e==="in"?mI(n[1],n.slice(2)):e==="!in"?Kb(mI(n[1],n.slice(2))):e==="has"?pI(n[1]):e==="!has"?Kb(pI(n[1])):!0}function M4(n,e,t){switch(n){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,n,e]}}function LH(n){return["any"].concat(n.map(qx))}function mI(n,e){if(e.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",n,["literal",e.sort(UH)]]:["filter-in-small",n,["literal",e]]}}function pI(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function Kb(n){return["!",n]}function $C(n,e={}){if(ob(n))return n;if(!n)return!0;const t=n,i=t[0];if(n.length<=1)return i!=="any";switch(i){case"==":case"!=":case"<":case">":case"<=":case">=":{const[,r,a]=n;return zH(r,a,i,e)}case"any":{const[,...r]=t;return["any",...r.map(l=>{const o={},m=$C(l,o),C=FH(o);return C===!0?m:["case",C,m,!1]})]}case"all":{const[,...r]=t,a=r.map(l=>$C(l,e));return a.length>1?["all",...a]:a[0]}case"none":{const[,...r]=t;return["!",$C(["any",...r],{})]}case"in":{const[,r,...a]=t;return gI(r,a)}case"!in":{const[,r,...a]=t;return gI(r,a,!0)}case"has":return yI(t[1]);case"!has":return["!",yI(t[1])];default:return!0}}function FH(n){const e=[];for(const t in n){const i=t==="$id"?["id"]:["get",t];e.push(["==",["typeof",i],n[t]])}return e.length===0?!0:e.length===1?e[0]:["all",...e]}function zH(n,e,t,i){let r;if(n==="$type")return[t,["geometry-type"],e];if(n==="$id"?r=["id"]:r=["get",n],i&&e!==null){const a=typeof e;i[n]=a}return t==="=="&&n!=="$id"&&e===null?["all",["has",n],["==",r,null]]:t==="!="&&n!=="$id"&&e===null?["any",["!",["has",n]],["!=",r,null]]:[t,r,e]}function gI(n,e,t=!1){if(e.length===0)return t;let i;n==="$type"?i=["geometry-type"]:n==="$id"?i=["id"]:i=["get",n];let r=!0;const a=typeof e[0];for(const l of e)if(typeof l!==a){r=!1;break}if(r&&(a==="string"||a==="number")){const l=e.sort().filter((o,m)=>m===0||e[m-1]!==o);return["match",i,l,!t,t]}return t?["all",...e.map(l=>["!=",i,l])]:["any",...e.map(l=>["==",i,l])]}function yI(n){return n==="$type"?!0:n==="$id"?["!=",["id"],null]:["has",n]}function y_(n){return typeof n=="object"?["literal",n]:n}function XB(n,e){let t=n.stops;if(!t)return NH(n,e);const i=t&&typeof t[0][0]=="object",r=i||n.property!==void 0,a=i||!r;return t=t.map(l=>!r&&e.tokens&&typeof l[1]=="string"?[l[0],LL(l[1])]:[l[0],y_(l[1])]),i?GH(n,e,t):a?WH(n,e,t):b6(n,e,t)}function NH(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const i=[e.type==="color"?"to-color":e.type,t,y_(n.default)];return e.type==="array"&&i.splice(1,0,e.value,e.length||null),i}}function JB(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function GH(n,e,t){const i={},r={},a=[];for(let o=0;o<t.length;o++){const m=t[o],C=m[0].zoom;i[C]===void 0&&(i[C]={zoom:C,type:n.type,property:n.property,default:n.default},r[C]=[],a.push(C)),r[C].push([m[0].value,m[1]])}if(tO({},e)==="exponential"){const o=[JB(n),["linear"],["zoom"]];for(const m of a){const C=b6(i[m],e,r[m]);pv(o,m,C,!1)}return o}else{const o=["step",["zoom"]];for(const m of a){const C=b6(i[m],e,r[m]);pv(o,m,C,!0)}return eO(o),o}}function jH(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function vI(n,e){const t=y_(jH(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function b6(n,e,t){const i=tO(n,e),r=["get",n.property];if(i==="categorical"&&typeof t[0][0]=="boolean"){const a=["case"];for(const l of t)a.push(["==",r,l[0]],l[1]);return a.push(vI(n,e)),a}else if(i==="categorical"){const a=["match",r];for(const l of t)pv(a,l[0],l[1],!1);return a.push(vI(n,e)),a}else if(i==="interval"){const a=["step",["number",r]];for(const l of t)pv(a,l[0],l[1],!0);return eO(a),n.default===void 0?a:["case",["==",["typeof",r],"number"],a,y_(n.default)]}else if(i==="exponential"){const a=n.base!==void 0?n.base:1,l=[JB(n),a===1?["linear"]:["exponential",a],["number",r]];for(const o of t)pv(l,o[0],o[1],!1);return n.default===void 0?l:["case",["==",["typeof",r],"number"],l,y_(n.default)]}else throw new Error(`Unknown property function type ${i}`)}function WH(n,e,t,i=["zoom"]){const r=tO(n,e);let a,l=!1;if(r==="interval")a=["step",i],l=!0;else if(r==="exponential"){const o=n.base!==void 0?n.base:1;a=[JB(n),o===1?["linear"]:["exponential",o],i]}else throw new Error(`Unknown zoom function type "${r}"`);for(const o of t)pv(a,o[0],o[1],l);return eO(a),a}function eO(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function pv(n,e,t,i){n.length>3&&e===n[n.length-2]||(i&&n.length===2||n.push(e),n.push(t))}function tO(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function LL(n){const e=["concat"],t=/{([^{}]+)}/g;let i=0;for(let r=t.exec(n);r!==null;r=t.exec(n)){const a=n.slice(i,t.lastIndex-r[0].length);i=t.lastIndex,a.length>0&&e.push(a),e.push(["get",r[1]])}if(e.length===1)return n;if(i<n.length)e.push(n.slice(i));else if(e.length===2)return["to-string",e[1]];return e}function QH(n){for(let e=0;e<Ua.layout.length;e++)for(const t in Ua[Ua.layout[e]])if(t===n)return Ua[Ua.layout[e]][t];for(let e=0;e<Ua.paint.length;e++)for(const t in Ua[Ua.paint[e]])if(t===n)return Ua[Ua.paint[e]][t];return null}function YH(n,e){for(const t in n.sources)e(n.sources[t])}function ZC(n,e){for(const t of n.layers)e(t)}function nO(n,e,t){function i(r,a){const l=r[a];l&&Object.keys(l).forEach(o=>{t({path:[r.id,a,o],key:o,value:l[o],reference:QH(o),set(m){l[o]=m}})})}ZC(n,r=>{e.paint&&i(r,"paint"),e.layout&&i(r,"layout")})}function FL(n){const e=n.key,t=n.value;return t?[new _i(e,t,"constants have been deprecated as of v8")]:[]}function Au(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function Ng(n){if(Array.isArray(n))return n.map(Ng);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const t in n)e[t]=Ng(n[t]);return e}return Au(n)}function pm(n){const e=n.key,t=n.value,i=n.valueSpec||{},r=n.objectElementValidators||{},a=n.style,l=n.styleSpec,o=n.validateSpec;let m=[];const C=ma(t);if(C!=="object")return[new _i(e,t,`object expected, ${C} found`)];for(const S in t){const O=S.split(".")[0],U=HC(i,O)||i["*"];let K;if(HC(r,O))K=r[O];else if(HC(i,O))K=o;else if(r["*"])K=r["*"];else if(i["*"])K=o;else{m.push(new _i(e,t[S],`unknown property "${S}"`));continue}m=m.concat(K({key:(e&&`${e}.`)+S,value:t[S],valueSpec:U,style:a,styleSpec:l,object:t,objectKey:S,validateSpec:o},t))}for(const S in i)r[S]||i[S].required&&i[S].default===void 0&&t[S]===void 0&&m.push(new _i(e,t,`missing required property "${S}"`));return m}function iO(n){const e=n.value,t=n.valueSpec,i=n.validateSpec,r=n.style,a=n.styleSpec,l=n.key,o=n.arrayElementValidator||i;if(ma(e)!=="array")return[new _i(l,e,`array expected, ${ma(e)} found`)];if(t.length&&e.length!==t.length)return[new _i(l,e,`array length ${t.length} expected, length ${e.length} found`)];if(t["min-length"]&&e.length<t["min-length"])return[new _i(l,e,`array length at least ${t["min-length"]} expected, length ${e.length} found`)];let m={type:t.value,values:t.values};a.$version<7&&(m.function=t.function),ma(t.value)==="object"&&(m=t.value);let C=[];for(let S=0;S<e.length;S++)C=C.concat(o({array:e,arrayIndex:S,value:e[S],valueSpec:m,validateSpec:n.validateSpec,style:r,styleSpec:a,key:`${l}[${S}]`}));return C}function J3(n){const e=n.key,t=n.value,i=n.valueSpec;let r=ma(t);return r==="number"&&t!==t&&(r="NaN"),r!=="number"?[new _i(e,t,`number expected, ${r} found`)]:"minimum"in i&&t<i.minimum?[new _i(e,t,`${t} is less than the minimum value ${i.minimum}`)]:"maximum"in i&&t>i.maximum?[new _i(e,t,`${t} is greater than the maximum value ${i.maximum}`)]:[]}function zL(n){const e=n.valueSpec,t=Au(n.value.type);let i,r={},a,l;const o=t!=="categorical"&&n.value.property===void 0,m=!o,C=ma(n.value.stops)==="array"&&ma(n.value.stops[0])==="array"&&ma(n.value.stops[0][0])==="object",S=pm({key:n.key,value:n.value,valueSpec:n.styleSpec.function,validateSpec:n.validateSpec,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:O,default:z}});return t==="identity"&&o&&S.push(new _i(n.key,n.value,'missing required property "property"')),t!=="identity"&&!n.value.stops&&S.push(new _i(n.key,n.value,'missing required property "stops"')),t==="exponential"&&n.valueSpec.expression&&!$B(n.valueSpec)&&S.push(new _i(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(m&&!Yx(n.valueSpec)?S.push(new _i(n.key,n.value,"property functions not supported")):o&&!RL(n.valueSpec)&&S.push(new _i(n.key,n.value,"zoom functions not supported"))),(t==="categorical"||C)&&n.value.property===void 0&&S.push(new _i(n.key,n.value,'"property" property is required')),S;function O(j){if(t==="identity")return[new _i(j.key,j.value,'identity function may not have a "stops" property')];let Q=[];const ee=j.value;return Q=Q.concat(iO({key:j.key,value:ee,valueSpec:j.valueSpec,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec,arrayElementValidator:U})),ma(ee)==="array"&&ee.length===0&&Q.push(new _i(j.key,ee,"array must have at least one stop")),Q}function U(j){let Q=[];const ee=j.value,V=j.key;if(ma(ee)!=="array")return[new _i(V,ee,`array expected, ${ma(ee)} found`)];if(ee.length!==2)return[new _i(V,ee,`array length 2 expected, length ${ee.length} found`)];if(C){if(ma(ee[0])!=="object")return[new _i(V,ee,`object expected, ${ma(ee[0])} found`)];if(ee[0].zoom===void 0)return[new _i(V,ee,"object stop key must have zoom")];if(ee[0].value===void 0)return[new _i(V,ee,"object stop key must have value")];if(l&&l>Au(ee[0].zoom))return[new _i(V,ee[0].zoom,"stop zoom values must appear in ascending order")];Au(ee[0].zoom)!==l&&(l=Au(ee[0].zoom),a=void 0,r={}),Q=Q.concat(pm({key:`${V}[0]`,value:ee[0],valueSpec:{zoom:{}},validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec,objectElementValidators:{zoom:J3,value:K}}))}else Q=Q.concat(K({key:`${V}[0]`,value:ee[0],validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec},ee));return jv(Ng(ee[1]))?Q.concat([new _i(`${V}[1]`,ee[1],"expressions are not allowed in function stops.")]):Q.concat(j.validateSpec({key:`${V}[1]`,value:ee[1],valueSpec:e,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec}))}function K(j,Q){const ee=ma(j.value),V=Au(j.value),ae=j.value!==null?j.value:Q;if(!i)i=ee;else if(ee!==i)return[new _i(j.key,ae,`${ee} stop domain type must match previous stop domain type ${i}`)];if(ee!=="number"&&ee!=="string"&&ee!=="boolean")return[new _i(j.key,ae,"stop domain value must be a number, string, or boolean")];if(ee!=="number"&&t!=="categorical"){let ne=`number expected, ${ee} found`;return Yx(e)&&t===void 0&&(ne+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new _i(j.key,ae,ne)]}return t==="categorical"&&ee==="number"&&(!isFinite(V)||Math.floor(V)!==V)?[new _i(j.key,ae,`integer expected, found ${V}`)]:t!=="categorical"&&ee==="number"&&a!==void 0&&V<a?[new _i(j.key,ae,"stop domain values must appear in ascending order")]:(a=V,t==="categorical"&&V in r?[new _i(j.key,ae,"stop domain values must be unique")]:(r[V]=!0,[]))}function z(j){return j.validateSpec({key:j.key,value:j.value,valueSpec:e,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec})}}function Ov(n){const e=(n.expressionContext==="property"?$3:V3)(Ng(n.value),n.valueSpec);if(e.result==="error")return e.value.map(i=>new _i(`${n.key}${i.key}`,n.value,i.message));const t=e.value.expression||e.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!t.outputDefined())return[new _i(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!g_(t))return[new _i(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!g_(t))return[new _i(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!H3(t,["zoom","feature-state"]))return[new _i(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!q3(t))return[new _i(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function qH(n){const e=n.value,t=n.key,i=ma(e);return i!=="boolean"?[new _i(t,e,`boolean expected, ${i} found`)]:[]}function x6(n){const e=n.key,t=n.value,i=ma(t);return i!=="string"?[new _i(e,t,`color expected, ${i} found`)]:tl.parse(String(t))?[]:[new _i(e,t,`color expected, "${t}" found`)]}function v_(n){const e=n.key,t=n.value,i=n.valueSpec,r=[];return Array.isArray(i.values)?i.values.indexOf(Au(t))===-1&&r.push(new _i(e,t,`expected one of [${i.values.join(", ")}], ${JSON.stringify(t)} found`)):Object.keys(i.values).indexOf(Au(t))===-1&&r.push(new _i(e,t,`expected one of [${Object.keys(i.values).join(", ")}], ${JSON.stringify(t)} found`)),r}function rO(n){return ob(Ng(n.value))?Ov(wv({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):NL(n)}function NL(n){const e=n.value,t=n.key;if(ma(e)!=="array")return[new _i(t,e,`array expected, ${ma(e)} found`)];const i=n.styleSpec;let r,a=[];if(e.length<1)return[new _i(t,e,"filter array must have at least 1 element")];switch(a=a.concat(v_({key:`${t}[0]`,value:e[0],valueSpec:i.filter_operator,style:n.style,styleSpec:n.styleSpec})),Au(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&Au(e[1])==="$type"&&a.push(new _i(t,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&a.push(new _i(t,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(r=ma(e[1]),r!=="string"&&a.push(new _i(`${t}[1]`,e[1],`string expected, ${r} found`)));for(let l=2;l<e.length;l++)r=ma(e[l]),Au(e[1])==="$type"?a=a.concat(v_({key:`${t}[${l}]`,value:e[l],valueSpec:i.geometry_type,style:n.style,styleSpec:n.styleSpec})):r!=="string"&&r!=="number"&&r!=="boolean"&&a.push(new _i(`${t}[${l}]`,e[l],`string, number, or boolean expected, ${r} found`));break;case"any":case"all":case"none":for(let l=1;l<e.length;l++)a=a.concat(NL({key:`${t}[${l}]`,value:e[l],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":r=ma(e[1]),e.length!==2?a.push(new _i(t,e,`filter array for "${e[0]}" operator must have 2 elements`)):r!=="string"&&a.push(new _i(`${t}[1]`,e[1],`string expected, ${r} found`));break}return a}function GL(n,e){const t=n.key,i=n.validateSpec,r=n.style,a=n.styleSpec,l=n.value,o=n.objectKey,m=a[`${e}_${n.layerType}`];if(!m)return[];const C=o.match(/^(.*)-transition$/);if(e==="paint"&&C&&m[C[1]]&&m[C[1]].transition)return i({key:t,value:l,valueSpec:a.transition,style:r,styleSpec:a});const S=n.valueSpec||m[o];if(!S)return[new _i(t,l,`unknown property "${o}"`)];let O;if(ma(l)==="string"&&Yx(S)&&!S.tokens&&(O=/^{([^}]+)}$/.exec(l)))return[new _i(t,l,`"${o}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(O[1])} }\`.`)];const U=[];return n.layerType==="symbol"&&(o==="text-field"&&r&&!r.glyphs&&U.push(new _i(t,l,'use of "text-field" requires a style "glyphs" property')),o==="text-font"&&Gv(Ng(l))&&Au(l.type)==="identity"&&U.push(new _i(t,l,'"text-font" does not support identity functions'))),U.concat(i({key:n.key,value:l,valueSpec:S,style:r,styleSpec:a,expressionContext:"property",propertyType:e,propertyKey:o}))}function jL(n){return GL(n,"paint")}function WL(n){return GL(n,"layout")}function QL(n){let e=[];const t=n.value,i=n.key,r=n.style,a=n.styleSpec;if(ma(t)!=="object")return[new _i(i,t,`object expected, ${ma(t)} found`)];!t.type&&!t.ref&&e.push(new _i(i,t,'either "type" or "ref" is required'));let l=Au(t.type);const o=Au(t.ref);if(t.id){const m=Au(t.id);for(let C=0;C<n.arrayIndex;C++){const S=r.layers[C];Au(S.id)===m&&e.push(new _i(i,t.id,`duplicate layer id "${t.id}", previously used at line ${S.id.__line__}`))}}if("ref"in t){["type","source","source-layer","filter","layout"].forEach(C=>{C in t&&e.push(new _i(i,t[C],`"${C}" is prohibited for ref layers`))});let m;r.layers.forEach(C=>{Au(C.id)===o&&(m=C)}),m?m.ref?e.push(new _i(i,t.ref,"ref cannot reference another ref layer")):l=Au(m.type):e.push(new _i(i,t.ref,`ref layer "${o}" not found`))}else if(l!=="background")if(!t.source)e.push(new _i(i,t,'missing required property "source"'));else{const m=r.sources&&r.sources[t.source],C=m&&Au(m.type);m?C==="vector"&&l==="raster"?e.push(new _i(i,t.source,`layer "${t.id}" requires a raster source`)):C!=="raster-dem"&&l==="hillshade"?e.push(new _i(i,t.source,`layer "${t.id}" requires a raster-dem source`)):C!=="raster-dem"&&l==="color-relief"?e.push(new _i(i,t.source,`layer "${t.id}" requires a raster-dem source`)):C==="raster"&&l!=="raster"?e.push(new _i(i,t.source,`layer "${t.id}" requires a vector source`)):C==="vector"&&!t["source-layer"]?e.push(new _i(i,t,`layer "${t.id}" must specify a "source-layer"`)):C==="raster-dem"&&l!=="hillshade"&&l!=="color-relief"?e.push(new _i(i,t.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):l==="line"&&t.paint&&t.paint["line-gradient"]&&(C!=="geojson"||!m.lineMetrics)&&e.push(new _i(i,t,`layer "${t.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new _i(i,t.source,`source "${t.source}" not found`))}return e=e.concat(pm({key:i,value:t,valueSpec:a.layer,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,objectElementValidators:{"*"(){return[]},type(){return n.validateSpec({key:`${i}.type`,value:t.type,valueSpec:a.layer.type,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,object:t,objectKey:"type"})},filter:rO,layout(m){return pm({layer:t,key:m.key,value:m.value,style:m.style,styleSpec:m.styleSpec,validateSpec:m.validateSpec,objectElementValidators:{"*"(C){return WL(wv({layerType:l},C))}}})},paint(m){return pm({layer:t,key:m.key,value:m.value,style:m.style,styleSpec:m.styleSpec,validateSpec:m.validateSpec,objectElementValidators:{"*"(C){return jL(wv({layerType:l},C))}}})}}})),e}function Gg(n){const e=n.value,t=n.key,i=ma(e);return i!=="string"?[new _i(t,e,`string expected, ${i} found`)]:[]}function HH(n){var e;const t=(e=n.sourceName)!==null&&e!==void 0?e:"",i=n.value,r=n.styleSpec,a=r.source_raster_dem,l=n.style;let o=[];const m=ma(i);if(i===void 0)return o;if(m!=="object")return o.push(new _i("source_raster_dem",i,`object expected, ${m} found`)),o;const S=Au(i.encoding)==="custom",O=["redFactor","greenFactor","blueFactor","baseShift"],U=n.value.encoding?`"${n.value.encoding}"`:"Default";for(const K in i)!S&&O.includes(K)?o.push(new _i(K,i[K],`In "${t}": "${K}" is only valid when "encoding" is set to "custom". ${U} encoding found`)):a[K]?o=o.concat(n.validateSpec({key:K,value:i[K],valueSpec:a[K],validateSpec:n.validateSpec,style:l,styleSpec:r})):o.push(new _i(K,i[K],`unknown property "${K}"`));return o}const CI={promoteId:VH};function YL(n){const e=n.value,t=n.key,i=n.styleSpec,r=n.style,a=n.validateSpec;if(!e.type)return[new _i(t,e,'"type" is required')];const l=Au(e.type);let o;switch(l){case"vector":case"raster":return o=pm({key:t,value:e,valueSpec:i[`source_${l.replace("-","_")}`],style:n.style,styleSpec:i,objectElementValidators:CI,validateSpec:a}),o;case"raster-dem":return o=HH({sourceName:t,value:e,style:n.style,styleSpec:i,validateSpec:a}),o;case"geojson":if(o=pm({key:t,value:e,valueSpec:i.source_geojson,style:r,styleSpec:i,validateSpec:a,objectElementValidators:CI}),e.cluster)for(const m in e.clusterProperties){const[C,S]=e.clusterProperties[m],O=typeof C=="string"?[C,["accumulated"],["get",m]]:C;o.push(...Ov({key:`${t}.${m}.map`,value:S,expressionContext:"cluster-map"})),o.push(...Ov({key:`${t}.${m}.reduce`,value:O,expressionContext:"cluster-reduce"}))}return o;case"video":return pm({key:t,value:e,valueSpec:i.source_video,style:r,validateSpec:a,styleSpec:i});case"image":return pm({key:t,value:e,valueSpec:i.source_image,style:r,validateSpec:a,styleSpec:i});case"canvas":return[new _i(t,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return v_({key:`${t}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function VH({key:n,value:e}){if(ma(e)==="string")return Gg({key:n,value:e});{const t=[];for(const i in e)t.push(...Gg({key:`${n}.${i}`,value:e[i]}));return t}}function qL(n){const e=n.value,t=n.styleSpec,i=t.light,r=n.style;let a=[];const l=ma(e);if(e===void 0)return a;if(l!=="object")return a=a.concat([new _i("light",e,`object expected, ${l} found`)]),a;for(const o in e){const m=o.match(/^(.*)-transition$/);m&&i[m[1]]&&i[m[1]].transition?a=a.concat(n.validateSpec({key:o,value:e[o],valueSpec:t.transition,validateSpec:n.validateSpec,style:r,styleSpec:t})):i[o]?a=a.concat(n.validateSpec({key:o,value:e[o],valueSpec:i[o],validateSpec:n.validateSpec,style:r,styleSpec:t})):a=a.concat([new _i(o,e[o],`unknown property "${o}"`)])}return a}function HL(n){const e=n.value,t=n.styleSpec,i=t.sky,r=n.style,a=ma(e);if(e===void 0)return[];if(a!=="object")return[new _i("sky",e,`object expected, ${a} found`)];let l=[];for(const o in e)i[o]?l=l.concat(n.validateSpec({key:o,value:e[o],valueSpec:i[o],style:r,styleSpec:t})):l=l.concat([new _i(o,e[o],`unknown property "${o}"`)]);return l}function VL(n){const e=n.value,t=n.styleSpec,i=t.terrain,r=n.style;let a=[];const l=ma(e);if(e===void 0)return a;if(l!=="object")return a=a.concat([new _i("terrain",e,`object expected, ${l} found`)]),a;for(const o in e)i[o]?a=a.concat(n.validateSpec({key:o,value:e[o],valueSpec:i[o],validateSpec:n.validateSpec,style:r,styleSpec:t})):a=a.concat([new _i(o,e[o],`unknown property "${o}"`)]);return a}function $H(n){return Gg(n).length===0?[]:Ov(n)}function ZH(n){return Gg(n).length===0?[]:Ov(n)}function XH(n){const e=n.key,t=n.value;if(ma(t)==="array"){if(t.length<1||t.length>4)return[new _i(e,t,`padding requires 1 to 4 values; ${t.length} values found`)];const r={type:"number"};let a=[];for(let l=0;l<t.length;l++)a=a.concat(n.validateSpec({key:`${e}[${l}]`,value:t[l],validateSpec:n.validateSpec,valueSpec:r}));return a}else return J3({key:e,value:t,valueSpec:{}})}function JH(n){const e=n.key,t=n.value;if(ma(t)==="array"){const r={type:"number"};if(t.length<1)return[new _i(e,t,"array length at least 1 expected, length 0 found")];let a=[];for(let l=0;l<t.length;l++)a=a.concat(n.validateSpec({key:`${e}[${l}]`,value:t[l],validateSpec:n.validateSpec,valueSpec:r}));return a}else return J3({key:e,value:t,valueSpec:{}})}function eV(n){const e=n.key,t=n.value;if(ma(t)==="array"){if(t.length<1)return[new _i(e,t,"array length at least 1 expected, length 0 found")];let r=[];for(let a=0;a<t.length;a++)r=r.concat(x6({key:`${e}[${a}]`,value:t[a]}));return r}else return x6({key:e,value:t})}function tV(n){const e=n.key,t=n.value,i=ma(t),r=n.styleSpec;if(i!=="array"||t.length<1||t.length%2!==0)return[new _i(e,t,"variableAnchorOffsetCollection requires a non-empty array of even length")];let a=[];for(let l=0;l<t.length;l+=2)a=a.concat(v_({key:`${e}[${l}]`,value:t[l],valueSpec:r.layout_symbol["text-anchor"]})),a=a.concat(iO({key:`${e}[${l+1}]`,value:t[l+1],valueSpec:{length:2,value:"number"},validateSpec:n.validateSpec,style:n.style,styleSpec:r}));return a}function $L(n){let e=[];const t=n.value,i=n.key;if(Array.isArray(t)){const r=[],a=[];for(const l in t){t[l].id&&r.includes(t[l].id)&&e.push(new _i(i,t,`all the sprites' ids must be unique, but ${t[l].id} is duplicated`)),r.push(t[l].id),t[l].url&&a.includes(t[l].url)&&e.push(new _i(i,t,`all the sprites' URLs must be unique, but ${t[l].url} is duplicated`)),a.push(t[l].url);const o={id:{type:"string",required:!0},url:{type:"string",required:!0}};e=e.concat(pm({key:`${i}[${l}]`,value:t[l],valueSpec:o,validateSpec:n.validateSpec}))}return e}else return Gg({key:i,value:t})}function nV(n){const e=n.value,t=n.styleSpec,i=t.projection,r=n.style,a=ma(e);if(e===void 0)return[];if(a!=="object")return[new _i("projection",e,`object expected, ${a} found`)];let l=[];for(const o in e)i[o]?l=l.concat(n.validateSpec({key:o,value:e[o],valueSpec:i[o],style:r,styleSpec:t})):l=l.concat([new _i(o,e[o],`unknown property "${o}"`)]);return l}function iV(n){const e=n.key;let t=n.value;t=t instanceof String?t.valueOf():t;const i=ma(t);return i==="array"&&!oV(t)&&!rV(t)?[new _i(e,t,`projection expected, invalid array ${JSON.stringify(t)} found`)]:["array","string"].includes(i)?[]:[new _i(e,t,`projection expected, invalid type "${i}" found`)]}function rV(n){return!!["interpolate","step","literal"].includes(n[0])}function oV(n){return Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"}function aV(n){return!!n&&n.constructor===Object}function ZL(n){return aV(n.value)?[]:[new _i(n.key,n.value,`object expected, ${ma(n.value)} found`)]}const _I={"*"(){return[]},array:iO,boolean:qH,number:J3,color:x6,constants:FL,enum:v_,filter:rO,function:zL,layer:QL,object:pm,source:YL,light:qL,sky:HL,terrain:VL,projection:nV,projectionDefinition:iV,string:Gg,formatted:$H,resolvedImage:ZH,padding:XH,numberArray:JH,colorArray:eV,variableAnchorOffsetCollection:tV,sprite:$L,state:ZL};function Hx(n){const e=n.value,t=n.valueSpec,i=n.styleSpec;return n.validateSpec=Hx,t.expression&&Gv(Au(e))?zL(n):t.expression&&jv(Ng(e))?Ov(n):t.type&&_I[t.type]?_I[t.type](n):pm(wv({},n,{valueSpec:t.type?i[t.type]:t}))}function XL(n){const e=n.value,t=n.key,i=Gg(n);return i.length||(e.indexOf("{fontstack}")===-1&&i.push(new _i(t,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&i.push(new _i(t,e,'"glyphs" url must include a "{range}" token'))),i}function Of(n,e=Ua){let t=[];return t=t.concat(Hx({key:"",value:n,valueSpec:e.$root,styleSpec:e,style:n,validateSpec:Hx,objectElementValidators:{glyphs:XL,"*"(){return[]}}})),n.constants&&(t=t.concat(FL({key:"constants",value:n.constants}))),JL(t)}Of.source=lp(sp(YL));Of.sprite=lp(sp($L));Of.glyphs=lp(sp(XL));Of.light=lp(sp(qL));Of.sky=lp(sp(HL));Of.terrain=lp(sp(VL));Of.state=lp(sp(ZL));Of.layer=lp(sp(QL));Of.filter=lp(sp(rO));Of.paintProperty=lp(sp(jL));Of.layoutProperty=lp(sp(WL));function sp(n){return function(e){return n({...e,validateSpec:Hx})}}function JL(n){return[].concat(n).sort((e,t)=>e.line-t.line)}function lp(n){return function(...e){return JL(n.apply(this,e))}}const sV=/("(?:[^\\"]|\\.)*")|[:,]/g;function lV(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),i=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:r}=e;return function a(l,o,m){l&&typeof l.toJSON=="function"&&(l=l.toJSON());const C=JSON.stringify(l,r);if(C===void 0)return C;const S=i-o.length-m;if(C.length<=S){const O=C.replace(sV,(U,K)=>K||`${U} `);if(O.length<=S)return O}if(r!=null&&(l=JSON.parse(C),r=void 0),typeof l=="object"&&l!==null){const O=o+t,U=[];let K=0,z,j;if(Array.isArray(l)){z="[",j="]";const{length:Q}=l;for(;K<Q;K++)U.push(a(l[K],O,K===Q-1?0:1)||"null")}else{z="{",j="}";const Q=Object.keys(l),{length:ee}=Q;for(;K<ee;K++){const V=Q[K],ae=`${JSON.stringify(V)}: `,ne=a(l[V],O,ae.length+(K===ee-1?0:1));ne!==void 0&&U.push(ae+ne)}}if(U.length>0)return[z,t+U.join(`,
${O}`),j].join(`
${o}`)}return C}(n,"",0)}function bI(n,e){const t={};for(const i in e)n[i]!==void 0&&(t[i]=n[i]);for(const i in n)t[i]===void 0&&(t[i]=n[i]);return t}function AV(n,e=2){return n=bI(n,Ua.$root),n.layers&&(n.layers=n.layers.map(t=>bI(t,Ua.layer))),lV(n,{indent:e})}function S4(n,e){for(const t in n)t.indexOf("layout")===0&&e(n[t],t)}function xI(n,e){for(const t in n)t.indexOf("paint")===0&&e(n[t],t)}function M6(n,e){return typeof e=="string"&&e[0]==="@"?M6(n,n.constants[e]):e}function uV(n){return Array.isArray(n.stops)}function fC(n,e,t){n[t]=n[e],delete n[e]}function cV(n){n.version=8,YH(n,r=>{r.type==="video"&&r.url!==void 0&&fC(r,"url","urls"),r.type==="video"&&r.coordinates.forEach(a=>a.reverse())}),ZC(n,r=>{S4(r,a=>{a["symbol-min-distance"]!==void 0&&fC(a,"symbol-min-distance","symbol-spacing")}),xI(r,a=>{a["background-image"]!==void 0&&fC(a,"background-image","background-pattern"),a["line-image"]!==void 0&&fC(a,"line-image","line-pattern"),a["fill-image"]!==void 0&&fC(a,"fill-image","fill-pattern")})}),nO(n,{paint:!0,layout:!0},r=>{const a=M6(n,r.value);uV(a)&&a.stops.forEach(l=>{l[1]=M6(n,l[1])}),r.set(a)}),delete n.constants,ZC(n,r=>{S4(r,a=>{delete a["text-max-size"],delete a["icon-max-size"]}),xI(r,a=>{a["text-size"]&&(r.layout||(r.layout={}),r.layout["text-size"]=a["text-size"],delete a["text-size"]),a["icon-size"]&&(r.layout||(r.layout={}),r.layout["icon-size"]=a["icon-size"],delete a["icon-size"])})});function e(r){function a(l){return l.split(",").map(o=>o.trim())}if(Array.isArray(r))return r;if(typeof r=="string")return a(r);if(typeof r=="object")return r.stops.forEach(l=>{l[1]=a(l[1])}),r;throw new Error("unexpected font value")}ZC(n,r=>{S4(r,a=>{a["text-font"]&&(a["text-font"]=e(a["text-font"]))})});let t=0;for(let r=n.layers.length-1;r>=0;r--)if(n.layers[r].type!=="symbol"){t=r+1;break}const i=n.layers.splice(t);return i.reverse(),n.layers=n.layers.concat(i),n}function hV(n){const e=[];return ZC(n,t=>{t.filter&&(t.filter=$C(t.filter))}),nO(n,{paint:!0,layout:!0},({path:t,value:i,reference:r,set:a})=>{jv(i)||(typeof i=="object"&&!Array.isArray(i)?(a(XB(i,r)),e.push(t.join("."))):r.tokens&&typeof i=="string"&&a(LL(i)))}),n}function dV(n){return JSON.parse(fV(JSON.stringify(n)))}function fV(n){return n.replace(/"hsla?\((.+?)\)"/gi,(e,t)=>{const i=t.match(/^(.+?)\s*,\s*(.+?)\s*,\s*(.+?)(?:\s*,\s*(.+))?$/i);if(i){let[r,a,l,o]=i.slice(1);return[a,l]=[a,l].map(m=>m.endsWith("%")?m:`${parseFloat(m)*100}%`),`"hsl${typeof o=="string"?"a":""}(${[r,a,l,o].filter(Boolean).join(",")})"`}return e})}function mV(n){let e=!1;if(n.version===7&&(n=cV(n),e=!0),n.version===8&&(e=!!hV(n),e=!0),nO(n,{paint:!0,layout:!0},({value:t,reference:i,set:r})=>{i.type==="color"&&r(dV(t))}),!e)throw new Error(`Cannot migrate from ${n.version}`);return n}const xf=Ua,pV={StyleExpression:KL,StylePropertyFunction:Z3,ZoomConstantExpression:C6,ZoomDependentExpression:_6,createExpression:V3,createPropertyExpression:$3,isExpression:jv,isExpressionFilter:ob,isZoomExpression:TH,normalizePropertyExpression:kH},gV={convertFunction:XB,createFunction:ZB,isFunction:Gv};var xx={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.7.1/LICENSE.txt
 */var yV=xx.exports,MI;function vV(){return MI||(MI=1,function(n,e){(function(t,i){n.exports=i()})(yV,function(){var t={},i={};function r(l,o,m){if(i[l]=m,l==="index"){var C="var sharedModule = {}; ("+i.shared+")(sharedModule); ("+i.worker+")(sharedModule);",S={};return i.shared(S),i.index(t,S),typeof window<"u"&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([C],{type:"text/javascript"}))),t}}r("shared",["exports"],function(l){function o(h,A,c,y){return new(c||(c=Promise))(function(M,R){function P(ie){try{H(y.next(ie))}catch(Ae){R(Ae)}}function G(ie){try{H(y.throw(ie))}catch(Ae){R(Ae)}}function H(ie){var Ae;ie.done?M(ie.value):(Ae=ie.value,Ae instanceof c?Ae:new c(function(ve){ve(Ae)})).then(P,G)}H((y=y.apply(h,A||[])).next())})}function m(h,A){this.x=h,this.y=A}function C(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var S,O;typeof SuppressedError=="function"&&SuppressedError,m.prototype={clone(){return new m(this.x,this.y)},add(h){return this.clone()._add(h)},sub(h){return this.clone()._sub(h)},multByPoint(h){return this.clone()._multByPoint(h)},divByPoint(h){return this.clone()._divByPoint(h)},mult(h){return this.clone()._mult(h)},div(h){return this.clone()._div(h)},rotate(h){return this.clone()._rotate(h)},rotateAround(h,A){return this.clone()._rotateAround(h,A)},matMult(h){return this.clone()._matMult(h)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(h){return this.x===h.x&&this.y===h.y},dist(h){return Math.sqrt(this.distSqr(h))},distSqr(h){const A=h.x-this.x,c=h.y-this.y;return A*A+c*c},angle(){return Math.atan2(this.y,this.x)},angleTo(h){return Math.atan2(this.y-h.y,this.x-h.x)},angleWith(h){return this.angleWithSep(h.x,h.y)},angleWithSep(h,A){return Math.atan2(this.x*A-this.y*h,this.x*h+this.y*A)},_matMult(h){const A=h[2]*this.x+h[3]*this.y;return this.x=h[0]*this.x+h[1]*this.y,this.y=A,this},_add(h){return this.x+=h.x,this.y+=h.y,this},_sub(h){return this.x-=h.x,this.y-=h.y,this},_mult(h){return this.x*=h,this.y*=h,this},_div(h){return this.x/=h,this.y/=h,this},_multByPoint(h){return this.x*=h.x,this.y*=h.y,this},_divByPoint(h){return this.x/=h.x,this.y/=h.y,this},_unit(){return this._div(this.mag()),this},_perp(){const h=this.y;return this.y=this.x,this.x=-h,this},_rotate(h){const A=Math.cos(h),c=Math.sin(h),y=c*this.x+A*this.y;return this.x=A*this.x-c*this.y,this.y=y,this},_rotateAround(h,A){const c=Math.cos(h),y=Math.sin(h),M=A.y+y*(this.x-A.x)+c*(this.y-A.y);return this.x=A.x+c*(this.x-A.x)-y*(this.y-A.y),this.y=M,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:m},m.convert=function(h){if(h instanceof m)return h;if(Array.isArray(h))return new m(+h[0],+h[1]);if(h.x!==void 0&&h.y!==void 0)return new m(+h.x,+h.y);throw new Error("Expected [x, y] or {x, y} point format")};var U=function(){if(O)return S;function h(A,c,y,M){this.cx=3*A,this.bx=3*(y-A)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(M-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=A,this.p1y=c,this.p2x=y,this.p2y=M}return O=1,S=h,h.prototype={sampleCurveX:function(A){return((this.ax*A+this.bx)*A+this.cx)*A},sampleCurveY:function(A){return((this.ay*A+this.by)*A+this.cy)*A},sampleCurveDerivativeX:function(A){return(3*this.ax*A+2*this.bx)*A+this.cx},solveCurveX:function(A,c){if(c===void 0&&(c=1e-6),A<0)return 0;if(A>1)return 1;for(var y=A,M=0;M<8;M++){var R=this.sampleCurveX(y)-A;if(Math.abs(R)<c)return y;var P=this.sampleCurveDerivativeX(y);if(Math.abs(P)<1e-6)break;y-=R/P}var G=0,H=1;for(y=A,M=0;M<20&&(R=this.sampleCurveX(y),!(Math.abs(R-A)<c));M++)A>R?G=y:H=y,y=.5*(H-G)+G;return y},solve:function(A,c){return this.sampleCurveY(this.solveCurveX(A,c))}},S}(),K=C(U);let z,j;function Q(){return z==null&&(z=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),z}function ee(){if(j==null&&(j=!1,Q())){const A=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(A){for(let y=0;y<5*5;y++){const M=4*y;A.fillStyle=`rgb(${M},${M+1},${M+2})`,A.fillRect(y%5,Math.floor(y/5),1,1)}const c=A.getImageData(0,0,5,5).data;for(let y=0;y<5*5*4;y++)if(y%4!=3&&c[y]!==y){j=!0;break}}}return j||!1}var V=1e-6,ae=typeof Float32Array<"u"?Float32Array:Array;function ne(){var h=new ae(9);return ae!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[5]=0,h[6]=0,h[7]=0),h[0]=1,h[4]=1,h[8]=1,h}function Z(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function oe(){var h=new ae(3);return ae!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h}function W(h){var A=h[0],c=h[1],y=h[2];return Math.sqrt(A*A+c*c+y*y)}function ue(h,A,c){var y=new ae(3);return y[0]=h,y[1]=A,y[2]=c,y}function ge(h,A,c){return h[0]=A[0]+c[0],h[1]=A[1]+c[1],h[2]=A[2]+c[2],h}function ye(h,A,c){return h[0]=A[0]*c,h[1]=A[1]*c,h[2]=A[2]*c,h}function Me(h,A,c){var y=A[0],M=A[1],R=A[2],P=c[0],G=c[1],H=c[2];return h[0]=M*H-R*G,h[1]=R*P-y*H,h[2]=y*G-M*P,h}var Be,we=W;function qe(h,A,c){var y=A[0],M=A[1],R=A[2],P=A[3];return h[0]=c[0]*y+c[4]*M+c[8]*R+c[12]*P,h[1]=c[1]*y+c[5]*M+c[9]*R+c[13]*P,h[2]=c[2]*y+c[6]*M+c[10]*R+c[14]*P,h[3]=c[3]*y+c[7]*M+c[11]*R+c[15]*P,h}function xe(){var h=new ae(4);return ae!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h[3]=1,h}function ze(h,A,c,y){var M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",R=Math.PI/360;A*=R,y*=R,c*=R;var P=Math.sin(A),G=Math.cos(A),H=Math.sin(c),ie=Math.cos(c),Ae=Math.sin(y),ve=Math.cos(y);switch(M){case"xyz":h[0]=P*ie*ve+G*H*Ae,h[1]=G*H*ve-P*ie*Ae,h[2]=G*ie*Ae+P*H*ve,h[3]=G*ie*ve-P*H*Ae;break;case"xzy":h[0]=P*ie*ve-G*H*Ae,h[1]=G*H*ve-P*ie*Ae,h[2]=G*ie*Ae+P*H*ve,h[3]=G*ie*ve+P*H*Ae;break;case"yxz":h[0]=P*ie*ve+G*H*Ae,h[1]=G*H*ve-P*ie*Ae,h[2]=G*ie*Ae-P*H*ve,h[3]=G*ie*ve+P*H*Ae;break;case"yzx":h[0]=P*ie*ve+G*H*Ae,h[1]=G*H*ve+P*ie*Ae,h[2]=G*ie*Ae-P*H*ve,h[3]=G*ie*ve-P*H*Ae;break;case"zxy":h[0]=P*ie*ve-G*H*Ae,h[1]=G*H*ve+P*ie*Ae,h[2]=G*ie*Ae+P*H*ve,h[3]=G*ie*ve-P*H*Ae;break;case"zyx":h[0]=P*ie*ve-G*H*Ae,h[1]=G*H*ve+P*ie*Ae,h[2]=G*ie*Ae-P*H*ve,h[3]=G*ie*ve+P*H*Ae;break;default:throw new Error("Unknown angle order "+M)}return h}function ot(){var h=new ae(2);return ae!=Float32Array&&(h[0]=0,h[1]=0),h}function yt(h,A){var c=new ae(2);return c[0]=h,c[1]=A,c}oe(),Be=new ae(4),ae!=Float32Array&&(Be[0]=0,Be[1]=0,Be[2]=0,Be[3]=0),oe(),ue(1,0,0),ue(0,1,0),xe(),xe(),ne(),ot();const nt=8192;function be(h,A,c){return A*(nt/(h.tileSize*Math.pow(2,c-h.tileID.overscaledZ)))}function Ne(h,A){return(h%A+A)%A}function tt(h,A,c){return h*(1-c)+A*c}function lt(h){if(h<=0)return 0;if(h>=1)return 1;const A=h*h,c=A*h;return 4*(h<.5?c:3*(h-A)+c-.75)}function It(h,A,c,y){const M=new K(h,A,c,y);return R=>M.solve(R)}const pt=It(.25,.1,.25,1);function St(h,A,c){return Math.min(c,Math.max(A,h))}function Rt(h,A,c){const y=c-A,M=((h-A)%y+y)%y+A;return M===A?c:M}function Le(h,...A){for(const c of A)for(const y in c)h[y]=c[y];return h}let Pe=1;function Re(h,A,c){const y={};for(const M in h)y[M]=A.call(this,h[M],M,h);return y}function He(h,A,c){const y={};for(const M in h)A.call(this,h[M],M,h)&&(y[M]=h[M]);return y}function bt(h){return Array.isArray(h)?h.map(bt):typeof h=="object"&&h?Re(h,bt):h}const vt={};function Ot(h){vt[h]||(typeof console<"u"&&console.warn(h),vt[h]=!0)}function qt(h,A,c){return(c.y-h.y)*(A.x-h.x)>(A.y-h.y)*(c.x-h.x)}function Kt(h){return typeof WorkerGlobalScope<"u"&&h!==void 0&&h instanceof WorkerGlobalScope}let on=null;function Jn(h){return typeof ImageBitmap<"u"&&h instanceof ImageBitmap}const Wt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function $n(h,A,c,y,M){return o(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const R=new VideoFrame(h,{timestamp:0});try{const P=R?.format;if(!P||!P.startsWith("BGR")&&!P.startsWith("RGB"))throw new Error(`Unrecognized format ${P}`);const G=P.startsWith("BGR"),H=new Uint8ClampedArray(y*M*4);if(yield R.copyTo(H,function(ie,Ae,ve,Ke,Qe){const Ve=4*Math.max(-Ae,0),et=(Math.max(0,ve)-ve)*Ke*4+Ve,ut=4*Ke,Mt=Math.max(0,Ae),Qt=Math.max(0,ve);return{rect:{x:Mt,y:Qt,width:Math.min(ie.width,Ae+Ke)-Mt,height:Math.min(ie.height,ve+Qe)-Qt},layout:[{offset:et,stride:ut}]}}(h,A,c,y,M)),G)for(let ie=0;ie<H.length;ie+=4){const Ae=H[ie];H[ie]=H[ie+2],H[ie+2]=Ae}return H}finally{R.close()}})}let On,Bn;function In(h,A,c,y){return h.addEventListener(A,c,y),{unsubscribe:()=>{h.removeEventListener(A,c,y)}}}function Bi(h){return h*Math.PI/180}function ei(h){return h/Math.PI*180}const Kn={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Ge={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},de="AbortError";function re(){return new Error(de)}const le={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function me(h){return le.REGISTERED_PROTOCOLS[h.substring(0,h.indexOf("://"))]}const Te="global-dispatcher";class We extends Error{constructor(A,c,y,M){super(`AJAXError: ${c} (${A}): ${y}`),this.status=A,this.statusText=c,this.url=y,this.body=M}}const dt=()=>Kt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Ye=function(h,A){if(/:\/\//.test(h.url)&&!/^https?:|^file:/.test(h.url)){const y=me(h.url);if(y)return y(h,A);if(Kt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,targetMapId:Te},A)}if(!(/^file:/.test(c=h.url)||/^file:/.test(dt())&&!/^\w+:/.test(c))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(y,M){return o(this,void 0,void 0,function*(){const R=new Request(y.url,{method:y.method||"GET",body:y.body,credentials:y.credentials,headers:y.headers,cache:y.cache,referrer:dt(),signal:M.signal});let P,G;y.type!=="json"||R.headers.has("Accept")||R.headers.set("Accept","application/json");try{P=yield fetch(R)}catch(ie){throw new We(0,ie.message,y.url,new Blob)}if(!P.ok){const ie=yield P.blob();throw new We(P.status,P.statusText,y.url,ie)}G=y.type==="arrayBuffer"||y.type==="image"?P.arrayBuffer():y.type==="json"?P.json():P.text();const H=yield G;if(M.signal.aborted)throw re();return{data:H,cacheControl:P.headers.get("Cache-Control"),expires:P.headers.get("Expires")}})}(h,A);if(Kt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,mustQueue:!0,targetMapId:Te},A)}var c;return function(y,M){return new Promise((R,P)=>{var G;const H=new XMLHttpRequest;H.open(y.method||"GET",y.url,!0),y.type!=="arrayBuffer"&&y.type!=="image"||(H.responseType="arraybuffer");for(const ie in y.headers)H.setRequestHeader(ie,y.headers[ie]);y.type==="json"&&(H.responseType="text",!((G=y.headers)===null||G===void 0)&&G.Accept||H.setRequestHeader("Accept","application/json")),H.withCredentials=y.credentials==="include",H.onerror=()=>{P(new Error(H.statusText))},H.onload=()=>{if(!M.signal.aborted)if((H.status>=200&&H.status<300||H.status===0)&&H.response!==null){let ie=H.response;if(y.type==="json")try{ie=JSON.parse(H.response)}catch(Ae){return void P(Ae)}R({data:ie,cacheControl:H.getResponseHeader("Cache-Control"),expires:H.getResponseHeader("Expires")})}else{const ie=new Blob([H.response],{type:H.getResponseHeader("Content-Type")});P(new We(H.status,H.statusText,y.url,ie))}},M.signal.addEventListener("abort",()=>{H.abort(),P(re())}),H.send(y.body)})}(h,A)};function De(h){if(!h||h.indexOf("://")<=0||h.indexOf("data:image/")===0||h.indexOf("blob:")===0)return!0;const A=new URL(h),c=window.location;return A.protocol===c.protocol&&A.host===c.host}function Ze(h,A,c){c[h]&&c[h].indexOf(A)!==-1||(c[h]=c[h]||[],c[h].push(A))}function g(h,A,c){if(c&&c[h]){const y=c[h].indexOf(A);y!==-1&&c[h].splice(y,1)}}class gt{constructor(A,c={}){Le(this,c),this.type=A}}class ht extends gt{constructor(A,c={}){super("error",Le({error:A},c))}}class kt{on(A,c){return this._listeners=this._listeners||{},Ze(A,c,this._listeners),{unsubscribe:()=>{this.off(A,c)}}}off(A,c){return g(A,c,this._listeners),g(A,c,this._oneTimeListeners),this}once(A,c){return c?(this._oneTimeListeners=this._oneTimeListeners||{},Ze(A,c,this._oneTimeListeners),this):new Promise(y=>this.once(A,y))}fire(A,c){typeof A=="string"&&(A=new gt(A,c||{}));const y=A.type;if(this.listens(y)){A.target=this;const M=this._listeners&&this._listeners[y]?this._listeners[y].slice():[];for(const G of M)G.call(this,A);const R=this._oneTimeListeners&&this._oneTimeListeners[y]?this._oneTimeListeners[y].slice():[];for(const G of R)g(y,G,this._oneTimeListeners),G.call(this,A);const P=this._eventedParent;P&&(Le(A,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),P.fire(A))}else A instanceof ht&&console.error(A.error);return this}listens(A){return this._listeners&&this._listeners[A]&&this._listeners[A].length>0||this._oneTimeListeners&&this._oneTimeListeners[A]&&this._oneTimeListeners[A].length>0||this._eventedParent&&this._eventedParent.listens(A)}setEventedParent(A,c){return this._eventedParent=A,this._eventedParentData=c,this}}var it={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const en=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Dn(h,A){const c={};for(const y in h)y!=="ref"&&(c[y]=h[y]);return en.forEach(y=>{y in A&&(c[y]=A[y])}),c}function Mn(h,A){if(Array.isArray(h)){if(!Array.isArray(A)||h.length!==A.length)return!1;for(let c=0;c<h.length;c++)if(!Mn(h[c],A[c]))return!1;return!0}if(typeof h=="object"&&h!==null&&A!==null){if(typeof A!="object"||Object.keys(h).length!==Object.keys(A).length)return!1;for(const c in h)if(!Mn(h[c],A[c]))return!1;return!0}return h===A}function ii(h,A){h.push(A)}function Wn(h,A,c){ii(c,{command:"addSource",args:[h,A[h]]})}function qi(h,A,c){ii(A,{command:"removeSource",args:[h]}),c[h]=!0}function er(h,A,c,y){qi(h,c,y),Wn(h,A,c)}function wi(h,A,c){let y;for(y in h[c])if(Object.prototype.hasOwnProperty.call(h[c],y)&&y!=="data"&&!Mn(h[c][y],A[c][y]))return!1;for(y in A[c])if(Object.prototype.hasOwnProperty.call(A[c],y)&&y!=="data"&&!Mn(h[c][y],A[c][y]))return!1;return!0}function hi(h,A,c,y,M,R){h=h||{},A=A||{};for(const P in h)Object.prototype.hasOwnProperty.call(h,P)&&(Mn(h[P],A[P])||c.push({command:R,args:[y,P,A[P],M]}));for(const P in A)Object.prototype.hasOwnProperty.call(A,P)&&!Object.prototype.hasOwnProperty.call(h,P)&&(Mn(h[P],A[P])||c.push({command:R,args:[y,P,A[P],M]}))}function ti(h){return h.id}function Wi(h,A){return h[A.id]=A,h}class Sn{constructor(A,c,y,M){this.message=(A?`${A}: `:"")+y,M&&(this.identifier=M),c!=null&&c.__line__&&(this.line=c.__line__)}}function lo(h,...A){for(const c of A)for(const y in c)h[y]=c[y];return h}class Hi extends Error{constructor(A,c){super(c),this.message=c,this.key=A}}class pa{constructor(A,c=[]){this.parent=A,this.bindings={};for(const[y,M]of c)this.bindings[y]=M}concat(A){return new pa(this,A)}get(A){if(this.bindings[A])return this.bindings[A];if(this.parent)return this.parent.get(A);throw new Error(`${A} not found in scope.`)}has(A){return!!this.bindings[A]||!!this.parent&&this.parent.has(A)}}const To={kind:"null"},Zn={kind:"number"},lr={kind:"string"},zi={kind:"boolean"},vr={kind:"color"},La={kind:"projectionDefinition"},Ir={kind:"object"},Ni={kind:"value"},gl={kind:"collator"},Ta={kind:"formatted"},So={kind:"padding"},$a={kind:"colorArray"},Ol={kind:"numberArray"},Ao={kind:"resolvedImage"},QA={kind:"variableAnchorOffsetCollection"};function ka(h,A){return{kind:"array",itemType:h,N:A}}function Vi(h){if(h.kind==="array"){const A=Vi(h.itemType);return typeof h.N=="number"?`array<${A}, ${h.N}>`:h.itemType.kind==="value"?"array":`array<${A}>`}return h.kind}const xi=[To,Zn,lr,zi,vr,La,Ta,Ir,ka(Ni),So,Ol,$a,Ao,QA];function ls(h,A){if(A.kind==="error")return null;if(h.kind==="array"){if(A.kind==="array"&&(A.N===0&&A.itemType.kind==="value"||!ls(h.itemType,A.itemType))&&(typeof h.N!="number"||h.N===A.N))return null}else{if(h.kind===A.kind)return null;if(h.kind==="value"){for(const c of xi)if(!ls(c,A))return null}}return`Expected ${Vi(h)} but found ${Vi(A)} instead.`}function Ma(h,A){return A.some(c=>c.kind===h.kind)}function Vo(h,A){return A.some(c=>c==="null"?h===null:c==="array"?Array.isArray(h):c==="object"?h&&!Array.isArray(h)&&typeof h=="object":c===typeof h)}function $e(h,A){return h.kind==="array"&&A.kind==="array"?h.itemType.kind===A.itemType.kind&&typeof h.N=="number":h.kind===A.kind}const Et=.96422,xn=.82521,jn=4/29,rn=6/29,si=3*rn*rn,Jr=rn*rn*rn,wo=Math.PI/180,As=180/Math.PI;function Us(h){return(h%=360)<0&&(h+=360),h}function YA([h,A,c,y]){let M,R;const P=Du((.2225045*(h=Qi(h))+.7168786*(A=Qi(A))+.0606169*(c=Qi(c)))/1);h===A&&A===c?M=R=P:(M=Du((.4360747*h+.3850649*A+.1430804*c)/Et),R=Du((.0139322*h+.0971045*A+.7141733*c)/xn));const G=116*P-16;return[G<0?0:G,500*(M-P),200*(P-R),y]}function Qi(h){return h<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function Du(h){return h>Jr?Math.pow(h,1/3):h/si+jn}function _A([h,A,c,y]){let M=(h+16)/116,R=isNaN(A)?M:M+A/500,P=isNaN(c)?M:M-c/200;return M=1*Ss(M),R=Et*Ss(R),P=xn*Ss(P),[yl(3.1338561*R-1.6168667*M-.4906146*P),yl(-.9787684*R+1.9161415*M+.033454*P),yl(.0719453*R-.2289914*M+1.4052427*P),y]}function yl(h){return(h=h<=.00304?12.92*h:1.055*Math.pow(h,1/2.4)-.055)<0?0:h>1?1:h}function Ss(h){return h>rn?h*h*h:si*(h-jn)}const bc=Object.hasOwn||function(h,A){return Object.prototype.hasOwnProperty.call(h,A)};function Qs(h,A){return bc(h,A)?h[A]:void 0}function $o(h){return parseInt(h.padEnd(2,h),16)/255}function ko(h,A){return dr(A?h/100:h,0,1)}function dr(h,A,c){return Math.min(Math.max(A,h),c)}function Kl(h){return!h.some(Number.isNaN)}const ga={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Ul(h,A,c){return h+c*(A-h)}function bA(h,A,c){return h.map((y,M)=>Ul(y,A[M],c))}class br{constructor(A,c,y,M=1,R=!0){this.r=A,this.g=c,this.b=y,this.a=M,R||(this.r*=M,this.g*=M,this.b*=M,M||this.overwriteGetter("rgb",[A,c,y,M]))}static parse(A){if(A instanceof br)return A;if(typeof A!="string")return;const c=function(y){if((y=y.toLowerCase().trim())==="transparent")return[0,0,0,0];const M=Qs(ga,y);if(M){const[P,G,H]=M;return[P/255,G/255,H/255,1]}if(y.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(y)){const P=y.length<6?1:2;let G=1;return[$o(y.slice(G,G+=P)),$o(y.slice(G,G+=P)),$o(y.slice(G,G+=P)),$o(y.slice(G,G+P)||"ff")]}if(y.startsWith("rgb")){const P=y.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(P){const[G,H,ie,Ae,ve,Ke,Qe,Ve,et,ut,Mt,Qt]=P,Dt=[Ae||" ",Qe||" ",ut].join("");if(Dt==="  "||Dt==="  /"||Dt===",,"||Dt===",,,"){const zt=[ie,Ke,et].join(""),ln=zt==="%%%"?100:zt===""?255:0;if(ln){const Cn=[dr(+H/ln,0,1),dr(+ve/ln,0,1),dr(+Ve/ln,0,1),Mt?ko(+Mt,Qt):1];if(Kl(Cn))return Cn}}return}}const R=y.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(R){const[P,G,H,ie,Ae,ve,Ke,Qe,Ve]=R,et=[H||" ",Ae||" ",Ke].join("");if(et==="  "||et==="  /"||et===",,"||et===",,,"){const ut=[+G,dr(+ie,0,100),dr(+ve,0,100),Qe?ko(+Qe,Ve):1];if(Kl(ut))return function([Mt,Qt,Dt,zt]){function ln(Cn){const Un=(Cn+Mt/30)%12,mi=Qt*Math.min(Dt,1-Dt);return Dt-mi*Math.max(-1,Math.min(Un-3,9-Un,1))}return Mt=Us(Mt),Qt/=100,Dt/=100,[ln(0),ln(8),ln(4),zt]}(ut)}}}(A);return c?new br(...c,!1):void 0}get rgb(){const{r:A,g:c,b:y,a:M}=this,R=M||1/0;return this.overwriteGetter("rgb",[A/R,c/R,y/R,M])}get hcl(){return this.overwriteGetter("hcl",function(A){const[c,y,M,R]=YA(A),P=Math.sqrt(y*y+M*M);return[Math.round(1e4*P)?Us(Math.atan2(M,y)*As):NaN,P,c,R]}(this.rgb))}get lab(){return this.overwriteGetter("lab",YA(this.rgb))}overwriteGetter(A,c){return Object.defineProperty(this,A,{value:c}),c}toString(){const[A,c,y,M]=this.rgb;return`rgba(${[A,c,y].map(R=>Math.round(255*R)).join(",")},${M})`}static interpolate(A,c,y,M="rgb"){switch(M){case"rgb":{const[R,P,G,H]=bA(A.rgb,c.rgb,y);return new br(R,P,G,H,!1)}case"hcl":{const[R,P,G,H]=A.hcl,[ie,Ae,ve,Ke]=c.hcl;let Qe,Ve;if(isNaN(R)||isNaN(ie))isNaN(R)?isNaN(ie)?Qe=NaN:(Qe=ie,G!==1&&G!==0||(Ve=Ae)):(Qe=R,ve!==1&&ve!==0||(Ve=P));else{let Dt=ie-R;ie>R&&Dt>180?Dt-=360:ie<R&&R-ie>180&&(Dt+=360),Qe=R+y*Dt}const[et,ut,Mt,Qt]=function([Dt,zt,ln,Cn]){return Dt=isNaN(Dt)?0:Dt*wo,_A([ln,Math.cos(Dt)*zt,Math.sin(Dt)*zt,Cn])}([Qe,Ve??Ul(P,Ae,y),Ul(G,ve,y),Ul(H,Ke,y)]);return new br(et,ut,Mt,Qt,!1)}case"lab":{const[R,P,G,H]=_A(bA(A.lab,c.lab,y));return new br(R,P,G,H,!1)}}}}br.black=new br(0,0,0,1),br.white=new br(1,1,1,1),br.transparent=new br(0,0,0,0),br.red=new br(1,0,0,1);class iA{constructor(A,c,y){this.sensitivity=A?c?"variant":"case":c?"accent":"base",this.locale=y,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(A,c){return this.collator.compare(A,c)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const cu=["bottom","center","top"];class No{constructor(A,c,y,M,R,P){this.text=A,this.image=c,this.scale=y,this.fontStack=M,this.textColor=R,this.verticalAlign=P}}class Eo{constructor(A){this.sections=A}static fromString(A){return new Eo([new No(A,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(A=>A.text.length!==0||A.image&&A.image.name.length!==0)}static factory(A){return A instanceof Eo?A:Eo.fromString(A)}toString(){return this.sections.length===0?"":this.sections.map(A=>A.text).join("")}}class Fa{constructor(A){this.values=A.slice()}static parse(A){if(A instanceof Fa)return A;if(typeof A=="number")return new Fa([A,A,A,A]);if(Array.isArray(A)&&!(A.length<1||A.length>4)){for(const c of A)if(typeof c!="number")return;switch(A.length){case 1:A=[A[0],A[0],A[0],A[0]];break;case 2:A=[A[0],A[1],A[0],A[1]];break;case 3:A=[A[0],A[1],A[2],A[1]]}return new Fa(A)}}toString(){return JSON.stringify(this.values)}static interpolate(A,c,y){return new Fa(bA(A.values,c.values,y))}}class Sa{constructor(A){this.values=A.slice()}static parse(A){if(A instanceof Sa)return A;if(typeof A=="number")return new Sa([A]);if(Array.isArray(A)){for(const c of A)if(typeof c!="number")return;return new Sa(A)}}toString(){return JSON.stringify(this.values)}static interpolate(A,c,y){return new Sa(bA(A.values,c.values,y))}}class oa{constructor(A){this.values=A.slice()}static parse(A){if(A instanceof oa)return A;if(typeof A=="string"){const y=br.parse(A);return y?new oa([y]):void 0}if(!Array.isArray(A))return;const c=[];for(const y of A){if(typeof y!="string")return;const M=br.parse(y);if(!M)return;c.push(M)}return new oa(c)}toString(){return JSON.stringify(this.values)}static interpolate(A,c,y,M="rgb"){const R=[];if(A.values.length!=c.values.length)throw new Error(`colorArray: Arrays have mismatched length (${A.values.length} vs. ${c.values.length}), cannot interpolate.`);for(let P=0;P<A.values.length;P++)R.push(br.interpolate(A.values[P],c.values[P],y,M));return new oa(R)}}class kr extends Error{constructor(A){super(A),this.name="RuntimeError"}toJSON(){return this.message}}const rA=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class za{constructor(A){this.values=A.slice()}static parse(A){if(A instanceof za)return A;if(Array.isArray(A)&&!(A.length<1)&&A.length%2==0){for(let c=0;c<A.length;c+=2){const y=A[c],M=A[c+1];if(typeof y!="string"||!rA.has(y)||!Array.isArray(M)||M.length!==2||typeof M[0]!="number"||typeof M[1]!="number")return}return new za(A)}}toString(){return JSON.stringify(this.values)}static interpolate(A,c,y){const M=A.values,R=c.values;if(M.length!==R.length)throw new kr(`Cannot interpolate values of different length. from: ${A.toString()}, to: ${c.toString()}`);const P=[];for(let G=0;G<M.length;G+=2){if(M[G]!==R[G])throw new kr(`Cannot interpolate values containing mismatched anchors. from[${G}]: ${M[G]}, to[${G}]: ${R[G]}`);P.push(M[G]);const[H,ie]=M[G+1],[Ae,ve]=R[G+1];P.push([Ul(H,Ae,y),Ul(ie,ve,y)])}return new za(P)}}class Za{constructor(A){this.name=A.name,this.available=A.available}toString(){return this.name}static fromString(A){return A?new Za({name:A,available:!1}):null}}class ya{constructor(A,c,y){this.from=A,this.to=c,this.transition=y}static interpolate(A,c,y){return new ya(A,c,y)}static parse(A){return A instanceof ya?A:Array.isArray(A)&&A.length===3&&typeof A[0]=="string"&&typeof A[1]=="string"&&typeof A[2]=="number"?new ya(A[0],A[1],A[2]):typeof A=="object"&&typeof A.from=="string"&&typeof A.to=="string"&&typeof A.transition=="number"?new ya(A.from,A.to,A.transition):typeof A=="string"?new ya(A,A,1):void 0}}function Dr(h,A,c,y){return typeof h=="number"&&h>=0&&h<=255&&typeof A=="number"&&A>=0&&A<=255&&typeof c=="number"&&c>=0&&c<=255?y===void 0||typeof y=="number"&&y>=0&&y<=1?null:`Invalid rgba value [${[h,A,c,y].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof y=="number"?[h,A,c,y]:[h,A,c]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function vl(h){if(h===null||typeof h=="string"||typeof h=="boolean"||typeof h=="number"||h instanceof ya||h instanceof br||h instanceof iA||h instanceof Eo||h instanceof Fa||h instanceof Sa||h instanceof oa||h instanceof za||h instanceof Za)return!0;if(Array.isArray(h)){for(const A of h)if(!vl(A))return!1;return!0}if(typeof h=="object"){for(const A in h)if(!vl(h[A]))return!1;return!0}return!1}function Zi(h){if(h===null)return To;if(typeof h=="string")return lr;if(typeof h=="boolean")return zi;if(typeof h=="number")return Zn;if(h instanceof br)return vr;if(h instanceof ya)return La;if(h instanceof iA)return gl;if(h instanceof Eo)return Ta;if(h instanceof Fa)return So;if(h instanceof Sa)return Ol;if(h instanceof oa)return $a;if(h instanceof za)return QA;if(h instanceof Za)return Ao;if(Array.isArray(h)){const A=h.length;let c;for(const y of h){const M=Zi(y);if(c){if(c===M)continue;c=Ni;break}c=M}return ka(c||Ni,A)}return Ir}function Mi(h){const A=typeof h;return h===null?"":A==="string"||A==="number"||A==="boolean"?String(h):h instanceof br||h instanceof ya||h instanceof Eo||h instanceof Fa||h instanceof Sa||h instanceof oa||h instanceof za||h instanceof Za?h.toString():JSON.stringify(h)}class Qr{constructor(A,c){this.type=A,this.value=c}static parse(A,c){if(A.length!==2)return c.error(`'literal' expression requires exactly one argument, but found ${A.length-1} instead.`);if(!vl(A[1]))return c.error("invalid value");const y=A[1];let M=Zi(y);const R=c.expectedType;return M.kind!=="array"||M.N!==0||!R||R.kind!=="array"||typeof R.N=="number"&&R.N!==0||(M=R),new Qr(M,y)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const te={string:lr,number:Zn,boolean:zi,object:Ir};class Oe{constructor(A,c){this.type=A,this.args=c}static parse(A,c){if(A.length<2)return c.error("Expected at least one argument.");let y,M=1;const R=A[0];if(R==="array"){let G,H;if(A.length>2){const ie=A[1];if(typeof ie!="string"||!(ie in te)||ie==="object")return c.error('The item type argument of "array" must be one of string, number, boolean',1);G=te[ie],M++}else G=Ni;if(A.length>3){if(A[2]!==null&&(typeof A[2]!="number"||A[2]<0||A[2]!==Math.floor(A[2])))return c.error('The length argument to "array" must be a positive integer literal',2);H=A[2],M++}y=ka(G,H)}else{if(!te[R])throw new Error(`Types doesn't contain name = ${R}`);y=te[R]}const P=[];for(;M<A.length;M++){const G=c.parse(A[M],M,Ni);if(!G)return null;P.push(G)}return new Oe(y,P)}evaluate(A){for(let c=0;c<this.args.length;c++){const y=this.args[c].evaluate(A);if(!ls(this.type,Zi(y)))return y;if(c===this.args.length-1)throw new kr(`Expected value to be of type ${Vi(this.type)}, but found ${Vi(Zi(y))} instead.`)}throw new Error}eachChild(A){this.args.forEach(A)}outputDefined(){return this.args.every(A=>A.outputDefined())}}const st={"to-boolean":zi,"to-color":vr,"to-number":Zn,"to-string":lr};class jt{constructor(A,c){this.type=A,this.args=c}static parse(A,c){if(A.length<2)return c.error("Expected at least one argument.");const y=A[0];if(!st[y])throw new Error(`Can't parse ${y} as it is not part of the known types`);if((y==="to-boolean"||y==="to-string")&&A.length!==2)return c.error("Expected one argument.");const M=st[y],R=[];for(let P=1;P<A.length;P++){const G=c.parse(A[P],P,Ni);if(!G)return null;R.push(G)}return new jt(M,R)}evaluate(A){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(A);case"color":{let c,y;for(const M of this.args){if(c=M.evaluate(A),y=null,c instanceof br)return c;if(typeof c=="string"){const R=A.parseColor(c);if(R)return R}else if(Array.isArray(c)&&(y=c.length<3||c.length>4?`Invalid rgba value ${JSON.stringify(c)}: expected an array containing either three or four numeric values.`:Dr(c[0],c[1],c[2],c[3]),!y))return new br(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new kr(y||`Could not parse color from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"padding":{let c;for(const y of this.args){c=y.evaluate(A);const M=Fa.parse(c);if(M)return M}throw new kr(`Could not parse padding from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"numberArray":{let c;for(const y of this.args){c=y.evaluate(A);const M=Sa.parse(c);if(M)return M}throw new kr(`Could not parse numberArray from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"colorArray":{let c;for(const y of this.args){c=y.evaluate(A);const M=oa.parse(c);if(M)return M}throw new kr(`Could not parse colorArray from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"variableAnchorOffsetCollection":{let c;for(const y of this.args){c=y.evaluate(A);const M=za.parse(c);if(M)return M}throw new kr(`Could not parse variableAnchorOffsetCollection from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"number":{let c=null;for(const y of this.args){if(c=y.evaluate(A),c===null)return 0;const M=Number(c);if(!isNaN(M))return M}throw new kr(`Could not convert ${JSON.stringify(c)} to number.`)}case"formatted":return Eo.fromString(Mi(this.args[0].evaluate(A)));case"resolvedImage":return Za.fromString(Mi(this.args[0].evaluate(A)));case"projectionDefinition":return this.args[0].evaluate(A);default:return Mi(this.args[0].evaluate(A))}}eachChild(A){this.args.forEach(A)}outputDefined(){return this.args.every(A=>A.outputDefined())}}const Si=["Unknown","Point","LineString","Polygon"];class Xn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Si[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(A){let c=this._parseColorCache.get(A);return c||(c=br.parse(A),this._parseColorCache.set(A,c)),c}}class $i{constructor(A,c,y=[],M,R=new pa,P=[]){this.registry=A,this.path=y,this.key=y.map(G=>`[${G}]`).join(""),this.scope=R,this.errors=P,this.expectedType=M,this._isConstant=c}parse(A,c,y,M,R={}){return c?this.concat(c,y,M)._parse(A,R):this._parse(A,R)}_parse(A,c){function y(M,R,P){return P==="assert"?new Oe(R,[M]):P==="coerce"?new jt(R,[M]):M}if(A!==null&&typeof A!="string"&&typeof A!="boolean"&&typeof A!="number"||(A=["literal",A]),Array.isArray(A)){if(A.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const M=A[0];if(typeof M!="string")return this.error(`Expression name must be a string, but found ${typeof M} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const R=this.registry[M];if(R){let P=R.parse(A,this);if(!P)return null;if(this.expectedType){const G=this.expectedType,H=P.type;if(G.kind!=="string"&&G.kind!=="number"&&G.kind!=="boolean"&&G.kind!=="object"&&G.kind!=="array"||H.kind!=="value"){if(G.kind==="projectionDefinition"&&["string","array"].includes(H.kind)||["color","formatted","resolvedImage"].includes(G.kind)&&["value","string"].includes(H.kind)||["padding","numberArray"].includes(G.kind)&&["value","number","array"].includes(H.kind)||G.kind==="colorArray"&&["value","string","array"].includes(H.kind)||G.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(H.kind))P=y(P,G,c.typeAnnotation||"coerce");else if(this.checkSubtype(G,H))return null}else P=y(P,G,c.typeAnnotation||"assert")}if(!(P instanceof Qr)&&P.type.kind!=="resolvedImage"&&this._isConstant(P)){const G=new Xn;try{P=new Qr(P.type,P.evaluate(G))}catch(H){return this.error(H.message),null}}return P}return this.error(`Unknown expression "${M}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(A===void 0?"'undefined' value invalid. Use null instead.":typeof A=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof A} instead.`)}concat(A,c,y){const M=typeof A=="number"?this.path.concat(A):this.path,R=y?this.scope.concat(y):this.scope;return new $i(this.registry,this._isConstant,M,c||null,R,this.errors)}error(A,...c){const y=`${this.key}${c.map(M=>`[${M}]`).join("")}`;this.errors.push(new Hi(y,A))}checkSubtype(A,c){const y=ls(A,c);return y&&this.error(y),y}}class or{constructor(A,c){this.type=c.type,this.bindings=[].concat(A),this.result=c}evaluate(A){return this.result.evaluate(A)}eachChild(A){for(const c of this.bindings)A(c[1]);A(this.result)}static parse(A,c){if(A.length<4)return c.error(`Expected at least 3 arguments, but found ${A.length-1} instead.`);const y=[];for(let R=1;R<A.length-1;R+=2){const P=A[R];if(typeof P!="string")return c.error(`Expected string, but found ${typeof P} instead.`,R);if(/[^a-zA-Z0-9_]/.test(P))return c.error("Variable names must contain only alphanumeric characters or '_'.",R);const G=c.parse(A[R+1],R+1);if(!G)return null;y.push([P,G])}const M=c.parse(A[A.length-1],A.length-1,c.expectedType,y);return M?new or(y,M):null}outputDefined(){return this.result.outputDefined()}}class Di{constructor(A,c){this.type=c.type,this.name=A,this.boundExpression=c}static parse(A,c){if(A.length!==2||typeof A[1]!="string")return c.error("'var' expression requires exactly one string literal argument.");const y=A[1];return c.scope.has(y)?new Di(y,c.scope.get(y)):c.error(`Unknown variable "${y}". Make sure "${y}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(A){return this.boundExpression.evaluate(A)}eachChild(){}outputDefined(){return!1}}class Xi{constructor(A,c,y){this.type=A,this.index=c,this.input=y}static parse(A,c){if(A.length!==3)return c.error(`Expected 2 arguments, but found ${A.length-1} instead.`);const y=c.parse(A[1],1,Zn),M=c.parse(A[2],2,ka(c.expectedType||Ni));return y&&M?new Xi(M.type.itemType,y,M):null}evaluate(A){const c=this.index.evaluate(A),y=this.input.evaluate(A);if(c<0)throw new kr(`Array index out of bounds: ${c} < 0.`);if(c>=y.length)throw new kr(`Array index out of bounds: ${c} > ${y.length-1}.`);if(c!==Math.floor(c))throw new kr(`Array index must be an integer, but found ${c} instead.`);return y[c]}eachChild(A){A(this.index),A(this.input)}outputDefined(){return!1}}class eo{constructor(A,c){this.type=zi,this.needle=A,this.haystack=c}static parse(A,c){if(A.length!==3)return c.error(`Expected 2 arguments, but found ${A.length-1} instead.`);const y=c.parse(A[1],1,Ni),M=c.parse(A[2],2,Ni);return y&&M?Ma(y.type,[zi,lr,Zn,To,Ni])?new eo(y,M):c.error(`Expected first argument to be of type boolean, string, number or null, but found ${Vi(y.type)} instead`):null}evaluate(A){const c=this.needle.evaluate(A),y=this.haystack.evaluate(A);if(!y)return!1;if(!Vo(c,["boolean","string","number","null"]))throw new kr(`Expected first argument to be of type boolean, string, number or null, but found ${Vi(Zi(c))} instead.`);if(!Vo(y,["string","array"]))throw new kr(`Expected second argument to be of type array or string, but found ${Vi(Zi(y))} instead.`);return y.indexOf(c)>=0}eachChild(A){A(this.needle),A(this.haystack)}outputDefined(){return!0}}class uo{constructor(A,c,y){this.type=Zn,this.needle=A,this.haystack=c,this.fromIndex=y}static parse(A,c){if(A.length<=2||A.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${A.length-1} instead.`);const y=c.parse(A[1],1,Ni),M=c.parse(A[2],2,Ni);if(!y||!M)return null;if(!Ma(y.type,[zi,lr,Zn,To,Ni]))return c.error(`Expected first argument to be of type boolean, string, number or null, but found ${Vi(y.type)} instead`);if(A.length===4){const R=c.parse(A[3],3,Zn);return R?new uo(y,M,R):null}return new uo(y,M)}evaluate(A){const c=this.needle.evaluate(A),y=this.haystack.evaluate(A);if(!Vo(c,["boolean","string","number","null"]))throw new kr(`Expected first argument to be of type boolean, string, number or null, but found ${Vi(Zi(c))} instead.`);let M;if(this.fromIndex&&(M=this.fromIndex.evaluate(A)),Vo(y,["string"])){const R=y.indexOf(c,M);return R===-1?-1:[...y.slice(0,R)].length}if(Vo(y,["array"]))return y.indexOf(c,M);throw new kr(`Expected second argument to be of type array or string, but found ${Vi(Zi(y))} instead.`)}eachChild(A){A(this.needle),A(this.haystack),this.fromIndex&&A(this.fromIndex)}outputDefined(){return!1}}class ur{constructor(A,c,y,M,R,P){this.inputType=A,this.type=c,this.input=y,this.cases=M,this.outputs=R,this.otherwise=P}static parse(A,c){if(A.length<5)return c.error(`Expected at least 4 arguments, but found only ${A.length-1}.`);if(A.length%2!=1)return c.error("Expected an even number of arguments.");let y,M;c.expectedType&&c.expectedType.kind!=="value"&&(M=c.expectedType);const R={},P=[];for(let ie=2;ie<A.length-1;ie+=2){let Ae=A[ie];const ve=A[ie+1];Array.isArray(Ae)||(Ae=[Ae]);const Ke=c.concat(ie);if(Ae.length===0)return Ke.error("Expected at least one branch label.");for(const Ve of Ae){if(typeof Ve!="number"&&typeof Ve!="string")return Ke.error("Branch labels must be numbers or strings.");if(typeof Ve=="number"&&Math.abs(Ve)>Number.MAX_SAFE_INTEGER)return Ke.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ve=="number"&&Math.floor(Ve)!==Ve)return Ke.error("Numeric branch labels must be integer values.");if(y){if(Ke.checkSubtype(y,Zi(Ve)))return null}else y=Zi(Ve);if(R[String(Ve)]!==void 0)return Ke.error("Branch labels must be unique.");R[String(Ve)]=P.length}const Qe=c.parse(ve,ie,M);if(!Qe)return null;M=M||Qe.type,P.push(Qe)}const G=c.parse(A[1],1,Ni);if(!G)return null;const H=c.parse(A[A.length-1],A.length-1,M);return H?G.type.kind!=="value"&&c.concat(1).checkSubtype(y,G.type)?null:new ur(y,M,G,R,P,H):null}evaluate(A){const c=this.input.evaluate(A);return(Zi(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(A)}eachChild(A){A(this.input),this.outputs.forEach(A),A(this.otherwise)}outputDefined(){return this.outputs.every(A=>A.outputDefined())&&this.otherwise.outputDefined()}}class pr{constructor(A,c,y){this.type=A,this.branches=c,this.otherwise=y}static parse(A,c){if(A.length<4)return c.error(`Expected at least 3 arguments, but found only ${A.length-1}.`);if(A.length%2!=0)return c.error("Expected an odd number of arguments.");let y;c.expectedType&&c.expectedType.kind!=="value"&&(y=c.expectedType);const M=[];for(let P=1;P<A.length-1;P+=2){const G=c.parse(A[P],P,zi);if(!G)return null;const H=c.parse(A[P+1],P+1,y);if(!H)return null;M.push([G,H]),y=y||H.type}const R=c.parse(A[A.length-1],A.length-1,y);if(!R)return null;if(!y)throw new Error("Can't infer output type");return new pr(y,M,R)}evaluate(A){for(const[c,y]of this.branches)if(c.evaluate(A))return y.evaluate(A);return this.otherwise.evaluate(A)}eachChild(A){for(const[c,y]of this.branches)A(c),A(y);A(this.otherwise)}outputDefined(){return this.branches.every(([A,c])=>c.outputDefined())&&this.otherwise.outputDefined()}}class co{constructor(A,c,y,M){this.type=A,this.input=c,this.beginIndex=y,this.endIndex=M}static parse(A,c){if(A.length<=2||A.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${A.length-1} instead.`);const y=c.parse(A[1],1,Ni),M=c.parse(A[2],2,Zn);if(!y||!M)return null;if(!Ma(y.type,[ka(Ni),lr,Ni]))return c.error(`Expected first argument to be of type array or string, but found ${Vi(y.type)} instead`);if(A.length===4){const R=c.parse(A[3],3,Zn);return R?new co(y.type,y,M,R):null}return new co(y.type,y,M)}evaluate(A){const c=this.input.evaluate(A),y=this.beginIndex.evaluate(A);let M;if(this.endIndex&&(M=this.endIndex.evaluate(A)),Vo(c,["string"]))return[...c].slice(y,M).join("");if(Vo(c,["array"]))return c.slice(y,M);throw new kr(`Expected first argument to be of type array or string, but found ${Vi(Zi(c))} instead.`)}eachChild(A){A(this.input),A(this.beginIndex),this.endIndex&&A(this.endIndex)}outputDefined(){return!1}}function Go(h,A){const c=h.length-1;let y,M,R=0,P=c,G=0;for(;R<=P;)if(G=Math.floor((R+P)/2),y=h[G],M=h[G+1],y<=A){if(G===c||A<M)return G;R=G+1}else{if(!(y>A))throw new kr("Input is not a number.");P=G-1}return 0}class zr{constructor(A,c,y){this.type=A,this.input=c,this.labels=[],this.outputs=[];for(const[M,R]of y)this.labels.push(M),this.outputs.push(R)}static parse(A,c){if(A.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${A.length-1}.`);if((A.length-1)%2!=0)return c.error("Expected an even number of arguments.");const y=c.parse(A[1],1,Zn);if(!y)return null;const M=[];let R=null;c.expectedType&&c.expectedType.kind!=="value"&&(R=c.expectedType);for(let P=1;P<A.length;P+=2){const G=P===1?-1/0:A[P],H=A[P+1],ie=P,Ae=P+1;if(typeof G!="number")return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ie);if(M.length&&M[M.length-1][0]>=G)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ie);const ve=c.parse(H,Ae,R);if(!ve)return null;R=R||ve.type,M.push([G,ve])}return new zr(R,y,M)}evaluate(A){const c=this.labels,y=this.outputs;if(c.length===1)return y[0].evaluate(A);const M=this.input.evaluate(A);if(M<=c[0])return y[0].evaluate(A);const R=c.length;return M>=c[R-1]?y[R-1].evaluate(A):y[Go(c,M)].evaluate(A)}eachChild(A){A(this.input);for(const c of this.outputs)A(c)}outputDefined(){return this.outputs.every(A=>A.outputDefined())}}function Ys(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var Ll,qA,fs=function(){if(qA)return Ll;function h(A,c,y,M){this.cx=3*A,this.bx=3*(y-A)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(M-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=A,this.p1y=c,this.p2x=y,this.p2y=M}return qA=1,Ll=h,h.prototype={sampleCurveX:function(A){return((this.ax*A+this.bx)*A+this.cx)*A},sampleCurveY:function(A){return((this.ay*A+this.by)*A+this.cy)*A},sampleCurveDerivativeX:function(A){return(3*this.ax*A+2*this.bx)*A+this.cx},solveCurveX:function(A,c){if(c===void 0&&(c=1e-6),A<0)return 0;if(A>1)return 1;for(var y=A,M=0;M<8;M++){var R=this.sampleCurveX(y)-A;if(Math.abs(R)<c)return y;var P=this.sampleCurveDerivativeX(y);if(Math.abs(P)<1e-6)break;y-=R/P}var G=0,H=1;for(y=A,M=0;M<20&&(R=this.sampleCurveX(y),!(Math.abs(R-A)<c));M++)A>R?G=y:H=y,y=.5*(H-G)+G;return y},solve:function(A,c){return this.sampleCurveY(this.solveCurveX(A,c))}},Ll}(),gd=Ys(fs);class Da{constructor(A,c,y,M,R){this.type=A,this.operator=c,this.interpolation=y,this.input=M,this.labels=[],this.outputs=[];for(const[P,G]of R)this.labels.push(P),this.outputs.push(G)}static interpolationFactor(A,c,y,M){let R=0;if(A.name==="exponential")R=yd(c,A.base,y,M);else if(A.name==="linear")R=yd(c,1,y,M);else if(A.name==="cubic-bezier"){const P=A.controlPoints;R=new gd(P[0],P[1],P[2],P[3]).solve(yd(c,1,y,M))}return R}static parse(A,c){let[y,M,R,...P]=A;if(!Array.isArray(M)||M.length===0)return c.error("Expected an interpolation type expression.",1);if(M[0]==="linear")M={name:"linear"};else if(M[0]==="exponential"){const ie=M[1];if(typeof ie!="number")return c.error("Exponential interpolation requires a numeric base.",1,1);M={name:"exponential",base:ie}}else{if(M[0]!=="cubic-bezier")return c.error(`Unknown interpolation type ${String(M[0])}`,1,0);{const ie=M.slice(1);if(ie.length!==4||ie.some(Ae=>typeof Ae!="number"||Ae<0||Ae>1))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);M={name:"cubic-bezier",controlPoints:ie}}}if(A.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${A.length-1}.`);if((A.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(R=c.parse(R,2,Zn),!R)return null;const G=[];let H=null;y!=="interpolate-hcl"&&y!=="interpolate-lab"||c.expectedType==$a?c.expectedType&&c.expectedType.kind!=="value"&&(H=c.expectedType):H=vr;for(let ie=0;ie<P.length;ie+=2){const Ae=P[ie],ve=P[ie+1],Ke=ie+3,Qe=ie+4;if(typeof Ae!="number")return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ke);if(G.length&&G[G.length-1][0]>=Ae)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ke);const Ve=c.parse(ve,Qe,H);if(!Ve)return null;H=H||Ve.type,G.push([Ae,Ve])}return $e(H,Zn)||$e(H,La)||$e(H,vr)||$e(H,So)||$e(H,Ol)||$e(H,$a)||$e(H,QA)||$e(H,ka(Zn))?new Da(H,y,M,R,G):c.error(`Type ${Vi(H)} is not interpolatable.`)}evaluate(A){const c=this.labels,y=this.outputs;if(c.length===1)return y[0].evaluate(A);const M=this.input.evaluate(A);if(M<=c[0])return y[0].evaluate(A);const R=c.length;if(M>=c[R-1])return y[R-1].evaluate(A);const P=Go(c,M),G=Da.interpolationFactor(this.interpolation,M,c[P],c[P+1]),H=y[P].evaluate(A),ie=y[P+1].evaluate(A);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Ul(H,ie,G);case"color":return br.interpolate(H,ie,G);case"padding":return Fa.interpolate(H,ie,G);case"colorArray":return oa.interpolate(H,ie,G);case"numberArray":return Sa.interpolate(H,ie,G);case"variableAnchorOffsetCollection":return za.interpolate(H,ie,G);case"array":return bA(H,ie,G);case"projectionDefinition":return ya.interpolate(H,ie,G)}case"interpolate-hcl":switch(this.type.kind){case"color":return br.interpolate(H,ie,G,"hcl");case"colorArray":return oa.interpolate(H,ie,G,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return br.interpolate(H,ie,G,"lab");case"colorArray":return oa.interpolate(H,ie,G,"lab")}}}eachChild(A){A(this.input);for(const c of this.outputs)A(c)}outputDefined(){return this.outputs.every(A=>A.outputDefined())}}function yd(h,A,c,y){const M=y-c,R=h-c;return M===0?0:A===1?R/M:(Math.pow(A,R)-1)/(Math.pow(A,M)-1)}const Ru={color:br.interpolate,number:Ul,padding:Fa.interpolate,numberArray:Sa.interpolate,colorArray:oa.interpolate,variableAnchorOffsetCollection:za.interpolate,array:bA};class HA{constructor(A,c){this.type=A,this.args=c}static parse(A,c){if(A.length<2)return c.error("Expected at least one argument.");let y=null;const M=c.expectedType;M&&M.kind!=="value"&&(y=M);const R=[];for(const G of A.slice(1)){const H=c.parse(G,1+R.length,y,void 0,{typeAnnotation:"omit"});if(!H)return null;y=y||H.type,R.push(H)}if(!y)throw new Error("No output type");const P=M&&R.some(G=>ls(M,G.type));return new HA(P?Ni:y,R)}evaluate(A){let c,y=null,M=0;for(const R of this.args)if(M++,y=R.evaluate(A),y&&y instanceof Za&&!y.available&&(c||(c=y.name),y=null,M===this.args.length&&(y=c)),y!==null)break;return y}eachChild(A){this.args.forEach(A)}outputDefined(){return this.args.every(A=>A.outputDefined())}}function ph(h,A){return h==="=="||h==="!="?A.kind==="boolean"||A.kind==="string"||A.kind==="number"||A.kind==="null"||A.kind==="value":A.kind==="string"||A.kind==="number"||A.kind==="value"}function Nh(h,A,c,y){return y.compare(A,c)===0}function po(h,A,c){const y=h!=="=="&&h!=="!=";return class eF{constructor(R,P,G){this.type=zi,this.lhs=R,this.rhs=P,this.collator=G,this.hasUntypedArgument=R.type.kind==="value"||P.type.kind==="value"}static parse(R,P){if(R.length!==3&&R.length!==4)return P.error("Expected two or three arguments.");const G=R[0];let H=P.parse(R[1],1,Ni);if(!H)return null;if(!ph(G,H.type))return P.concat(1).error(`"${G}" comparisons are not supported for type '${Vi(H.type)}'.`);let ie=P.parse(R[2],2,Ni);if(!ie)return null;if(!ph(G,ie.type))return P.concat(2).error(`"${G}" comparisons are not supported for type '${Vi(ie.type)}'.`);if(H.type.kind!==ie.type.kind&&H.type.kind!=="value"&&ie.type.kind!=="value")return P.error(`Cannot compare types '${Vi(H.type)}' and '${Vi(ie.type)}'.`);y&&(H.type.kind==="value"&&ie.type.kind!=="value"?H=new Oe(ie.type,[H]):H.type.kind!=="value"&&ie.type.kind==="value"&&(ie=new Oe(H.type,[ie])));let Ae=null;if(R.length===4){if(H.type.kind!=="string"&&ie.type.kind!=="string"&&H.type.kind!=="value"&&ie.type.kind!=="value")return P.error("Cannot use collator to compare non-string types.");if(Ae=P.parse(R[3],3,gl),!Ae)return null}return new eF(H,ie,Ae)}evaluate(R){const P=this.lhs.evaluate(R),G=this.rhs.evaluate(R);if(y&&this.hasUntypedArgument){const H=Zi(P),ie=Zi(G);if(H.kind!==ie.kind||H.kind!=="string"&&H.kind!=="number")throw new kr(`Expected arguments for "${h}" to be (string, string) or (number, number), but found (${H.kind}, ${ie.kind}) instead.`)}if(this.collator&&!y&&this.hasUntypedArgument){const H=Zi(P),ie=Zi(G);if(H.kind!=="string"||ie.kind!=="string")return A(R,P,G)}return this.collator?c(R,P,G,this.collator.evaluate(R)):A(R,P,G)}eachChild(R){R(this.lhs),R(this.rhs),this.collator&&R(this.collator)}outputDefined(){return!0}}}const ic=po("==",function(h,A,c){return A===c},Nh),vd=po("!=",function(h,A,c){return A!==c},function(h,A,c,y){return!Nh(0,A,c,y)}),dp=po("<",function(h,A,c){return A<c},function(h,A,c,y){return y.compare(A,c)<0}),gh=po(">",function(h,A,c){return A>c},function(h,A,c,y){return y.compare(A,c)>0}),Cd=po("<=",function(h,A,c){return A<=c},function(h,A,c,y){return y.compare(A,c)<=0}),o0=po(">=",function(h,A,c){return A>=c},function(h,A,c,y){return y.compare(A,c)>=0});class Tf{constructor(A,c,y){this.type=gl,this.locale=y,this.caseSensitive=A,this.diacriticSensitive=c}static parse(A,c){if(A.length!==2)return c.error("Expected one argument.");const y=A[1];if(typeof y!="object"||Array.isArray(y))return c.error("Collator options argument must be an object.");const M=c.parse(y["case-sensitive"]!==void 0&&y["case-sensitive"],1,zi);if(!M)return null;const R=c.parse(y["diacritic-sensitive"]!==void 0&&y["diacritic-sensitive"],1,zi);if(!R)return null;let P=null;return y.locale&&(P=c.parse(y.locale,1,lr),!P)?null:new Tf(M,R,P)}evaluate(A){return new iA(this.caseSensitive.evaluate(A),this.diacriticSensitive.evaluate(A),this.locale?this.locale.evaluate(A):null)}eachChild(A){A(this.caseSensitive),A(this.diacriticSensitive),this.locale&&A(this.locale)}outputDefined(){return!1}}class kf{constructor(A,c,y,M,R){this.type=lr,this.number=A,this.locale=c,this.currency=y,this.minFractionDigits=M,this.maxFractionDigits=R}static parse(A,c){if(A.length!==3)return c.error("Expected two arguments.");const y=c.parse(A[1],1,Zn);if(!y)return null;const M=A[2];if(typeof M!="object"||Array.isArray(M))return c.error("NumberFormat options argument must be an object.");let R=null;if(M.locale&&(R=c.parse(M.locale,1,lr),!R))return null;let P=null;if(M.currency&&(P=c.parse(M.currency,1,lr),!P))return null;let G=null;if(M["min-fraction-digits"]&&(G=c.parse(M["min-fraction-digits"],1,Zn),!G))return null;let H=null;return M["max-fraction-digits"]&&(H=c.parse(M["max-fraction-digits"],1,Zn),!H)?null:new kf(y,R,P,G,H)}evaluate(A){return new Intl.NumberFormat(this.locale?this.locale.evaluate(A):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(A):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(A):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(A):void 0}).format(this.number.evaluate(A))}eachChild(A){A(this.number),this.locale&&A(this.locale),this.currency&&A(this.currency),this.minFractionDigits&&A(this.minFractionDigits),this.maxFractionDigits&&A(this.maxFractionDigits)}outputDefined(){return!1}}class VA{constructor(A){this.type=Ta,this.sections=A}static parse(A,c){if(A.length<2)return c.error("Expected at least one argument.");const y=A[1];if(!Array.isArray(y)&&typeof y=="object")return c.error("First argument must be an image or text section.");const M=[];let R=!1;for(let P=1;P<=A.length-1;++P){const G=A[P];if(R&&typeof G=="object"&&!Array.isArray(G)){R=!1;let H=null;if(G["font-scale"]&&(H=c.parse(G["font-scale"],1,Zn),!H))return null;let ie=null;if(G["text-font"]&&(ie=c.parse(G["text-font"],1,ka(lr)),!ie))return null;let Ae=null;if(G["text-color"]&&(Ae=c.parse(G["text-color"],1,vr),!Ae))return null;let ve=null;if(G["vertical-align"]){if(typeof G["vertical-align"]=="string"&&!cu.includes(G["vertical-align"]))return c.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${G["vertical-align"]}' instead.`);if(ve=c.parse(G["vertical-align"],1,lr),!ve)return null}const Ke=M[M.length-1];Ke.scale=H,Ke.font=ie,Ke.textColor=Ae,Ke.verticalAlign=ve}else{const H=c.parse(A[P],1,Ni);if(!H)return null;const ie=H.type.kind;if(ie!=="string"&&ie!=="value"&&ie!=="null"&&ie!=="resolvedImage")return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");R=!0,M.push({content:H,scale:null,font:null,textColor:null,verticalAlign:null})}}return new VA(M)}evaluate(A){return new Eo(this.sections.map(c=>{const y=c.content.evaluate(A);return Zi(y)===Ao?new No("",y,null,null,null,c.verticalAlign?c.verticalAlign.evaluate(A):null):new No(Mi(y),null,c.scale?c.scale.evaluate(A):null,c.font?c.font.evaluate(A).join(","):null,c.textColor?c.textColor.evaluate(A):null,c.verticalAlign?c.verticalAlign.evaluate(A):null)}))}eachChild(A){for(const c of this.sections)A(c.content),c.scale&&A(c.scale),c.font&&A(c.font),c.textColor&&A(c.textColor),c.verticalAlign&&A(c.verticalAlign)}outputDefined(){return!1}}class Xa{constructor(A){this.type=Ao,this.input=A}static parse(A,c){if(A.length!==2)return c.error("Expected two arguments.");const y=c.parse(A[1],1,lr);return y?new Xa(y):c.error("No image name provided.")}evaluate(A){const c=this.input.evaluate(A),y=Za.fromString(c);return y&&A.availableImages&&(y.available=A.availableImages.indexOf(c)>-1),y}eachChild(A){A(this.input)}outputDefined(){return!1}}class _d{constructor(A){this.type=Zn,this.input=A}static parse(A,c){if(A.length!==2)return c.error(`Expected 1 argument, but found ${A.length-1} instead.`);const y=c.parse(A[1],1);return y?y.type.kind!=="array"&&y.type.kind!=="string"&&y.type.kind!=="value"?c.error(`Expected argument of type string or array, but found ${Vi(y.type)} instead.`):new _d(y):null}evaluate(A){const c=this.input.evaluate(A);if(typeof c=="string")return[...c].length;if(Array.isArray(c))return c.length;throw new kr(`Expected value to be of type string or array, but found ${Vi(Zi(c))} instead.`)}eachChild(A){A(this.input)}outputDefined(){return!1}}const Fl=8192;function bd(h,A){const c=(180+h[0])/360,y=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h[1]*Math.PI/360)))/360,M=Math.pow(2,A.z);return[Math.round(c*M*Fl),Math.round(y*M*Fl)]}function Gh(h,A){const c=Math.pow(2,A.z);return[(M=(h[0]/Fl+A.x)/c,360*M-180),(y=(h[1]/Fl+A.y)/c,360/Math.PI*Math.atan(Math.exp((180-360*y)*Math.PI/180))-90)];var y,M}function Yc(h,A){h[0]=Math.min(h[0],A[0]),h[1]=Math.min(h[1],A[1]),h[2]=Math.max(h[2],A[0]),h[3]=Math.max(h[3],A[1])}function jh(h,A){return!(h[0]<=A[0]||h[2]>=A[2]||h[1]<=A[1]||h[3]>=A[3])}function Df(h,A,c){const y=h[0]-A[0],M=h[1]-A[1],R=h[0]-c[0],P=h[1]-c[1];return y*P-R*M==0&&y*R<=0&&M*P<=0}function yh(h,A,c,y){return(M=[y[0]-c[0],y[1]-c[1]])[0]*(R=[A[0]-h[0],A[1]-h[1]])[1]-M[1]*R[0]!=0&&!(!rc(h,A,c,y)||!rc(c,y,h,A));var M,R}function vh(h,A,c){for(const y of c)for(let M=0;M<y.length-1;++M)if(yh(h,A,y[M],y[M+1]))return!0;return!1}function Wh(h,A,c=!1){let y=!1;for(const G of A)for(let H=0;H<G.length-1;H++){if(Df(h,G[H],G[H+1]))return c;(R=G[H])[1]>(M=h)[1]!=(P=G[H+1])[1]>M[1]&&M[0]<(P[0]-R[0])*(M[1]-R[1])/(P[1]-R[1])+R[0]&&(y=!y)}var M,R,P;return y}function Rf(h,A){for(const c of A)if(Wh(h,c))return!0;return!1}function oA(h,A){for(const c of h)if(!Wh(c,A))return!1;for(let c=0;c<h.length-1;++c)if(vh(h[c],h[c+1],A))return!1;return!0}function Pf(h,A){for(const c of A)if(oA(h,c))return!0;return!1}function rc(h,A,c,y){const M=y[0]-c[0],R=y[1]-c[1],P=(h[0]-c[0])*R-M*(h[1]-c[1]),G=(A[0]-c[0])*R-M*(A[1]-c[1]);return P>0&&G<0||P<0&&G>0}function aA(h,A,c){const y=[];for(let M=0;M<h.length;M++){const R=[];for(let P=0;P<h[M].length;P++){const G=bd(h[M][P],c);Yc(A,G),R.push(G)}y.push(R)}return y}function xc(h,A,c){const y=[];for(let M=0;M<h.length;M++){const R=aA(h[M],A,c);y.push(R)}return y}function xd(h,A,c,y){if(h[0]<c[0]||h[0]>c[2]){const M=.5*y;let R=h[0]-c[0]>M?-y:c[0]-h[0]>M?y:0;R===0&&(R=h[0]-c[2]>M?-y:c[2]-h[0]>M?y:0),h[0]+=R}Yc(A,h)}function Md(h,A,c,y){const M=Math.pow(2,y.z)*Fl,R=[y.x*Fl,y.y*Fl],P=[];for(const G of h)for(const H of G){const ie=[H.x+R[0],H.y+R[1]];xd(ie,A,c,M),P.push(ie)}return P}function Pu(h,A,c,y){const M=Math.pow(2,y.z)*Fl,R=[y.x*Fl,y.y*Fl],P=[];for(const H of h){const ie=[];for(const Ae of H){const ve=[Ae.x+R[0],Ae.y+R[1]];Yc(A,ve),ie.push(ve)}P.push(ie)}if(A[2]-A[0]<=M/2){(G=A)[0]=G[1]=1/0,G[2]=G[3]=-1/0;for(const H of P)for(const ie of H)xd(ie,A,c,M)}var G;return P}class $A{constructor(A,c){this.type=zi,this.geojson=A,this.geometries=c}static parse(A,c){if(A.length!==2)return c.error(`'within' expression requires exactly one argument, but found ${A.length-1} instead.`);if(vl(A[1])){const y=A[1];if(y.type==="FeatureCollection"){const M=[];for(const R of y.features){const{type:P,coordinates:G}=R.geometry;P==="Polygon"&&M.push(G),P==="MultiPolygon"&&M.push(...G)}if(M.length)return new $A(y,{type:"MultiPolygon",coordinates:M})}else if(y.type==="Feature"){const M=y.geometry.type;if(M==="Polygon"||M==="MultiPolygon")return new $A(y,y.geometry)}else if(y.type==="Polygon"||y.type==="MultiPolygon")return new $A(y,y)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(A){if(A.geometry()!=null&&A.canonicalID()!=null){if(A.geometryType()==="Point")return function(c,y){const M=[1/0,1/0,-1/0,-1/0],R=[1/0,1/0,-1/0,-1/0],P=c.canonicalID();if(y.type==="Polygon"){const G=aA(y.coordinates,R,P),H=Md(c.geometry(),M,R,P);if(!jh(M,R))return!1;for(const ie of H)if(!Wh(ie,G))return!1}if(y.type==="MultiPolygon"){const G=xc(y.coordinates,R,P),H=Md(c.geometry(),M,R,P);if(!jh(M,R))return!1;for(const ie of H)if(!Rf(ie,G))return!1}return!0}(A,this.geometries);if(A.geometryType()==="LineString")return function(c,y){const M=[1/0,1/0,-1/0,-1/0],R=[1/0,1/0,-1/0,-1/0],P=c.canonicalID();if(y.type==="Polygon"){const G=aA(y.coordinates,R,P),H=Pu(c.geometry(),M,R,P);if(!jh(M,R))return!1;for(const ie of H)if(!oA(ie,G))return!1}if(y.type==="MultiPolygon"){const G=xc(y.coordinates,R,P),H=Pu(c.geometry(),M,R,P);if(!jh(M,R))return!1;for(const ie of H)if(!Pf(ie,G))return!1}return!0}(A,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Qh=class{constructor(h=[],A=(c,y)=>c<y?-1:c>y?1:0){if(this.data=h,this.length=this.data.length,this.compare=A,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(h){this.data.push(h),this._up(this.length++)}pop(){if(this.length===0)return;const h=this.data[0],A=this.data.pop();return--this.length>0&&(this.data[0]=A,this._down(0)),h}peek(){return this.data[0]}_up(h){const{data:A,compare:c}=this,y=A[h];for(;h>0;){const M=h-1>>1,R=A[M];if(c(y,R)>=0)break;A[h]=R,h=M}A[h]=y}_down(h){const{data:A,compare:c}=this,y=this.length>>1,M=A[h];for(;h<y;){let R=1+(h<<1);const P=R+1;if(P<this.length&&c(A[P],A[R])<0&&(R=P),c(A[R],M)>=0)break;A[h]=A[R],h=R}A[h]=M}};function Mc(h,A,c=0,y=h.length-1,M=fp){for(;y>c;){if(y-c>600){const H=y-c+1,ie=A-c+1,Ae=Math.log(H),ve=.5*Math.exp(2*Ae/3),Ke=.5*Math.sqrt(Ae*ve*(H-ve)/H)*(ie-H/2<0?-1:1);Mc(h,A,Math.max(c,Math.floor(A-ie*ve/H+Ke)),Math.min(y,Math.floor(A+(H-ie)*ve/H+Ke)),M)}const R=h[A];let P=c,G=y;for(Yh(h,c,A),M(h[y],R)>0&&Yh(h,c,y);P<G;){for(Yh(h,P,G),P++,G--;M(h[P],R)<0;)P++;for(;M(h[G],R)>0;)G--}M(h[c],R)===0?Yh(h,c,G):(G++,Yh(h,G,y)),G<=A&&(c=G+1),A<=G&&(y=G-1)}}function Yh(h,A,c){const y=h[A];h[A]=h[c],h[c]=y}function fp(h,A){return h<A?-1:h>A?1:0}function qc(h,A){if(h.length<=1)return[h];const c=[];let y,M;for(const R of h){const P=hu(R);P!==0&&(R.area=Math.abs(P),M===void 0&&(M=P<0),M===P<0?(y&&c.push(y),y=[R]):y.push(R))}if(y&&c.push(y),A>1)for(let R=0;R<c.length;R++)c[R].length<=A||(Mc(c[R],A,1,c[R].length-1,Vd),c[R]=c[R].slice(0,A));return c}function Vd(h,A){return A.area-h.area}function hu(h){let A=0;for(let c,y,M=0,R=h.length,P=R-1;M<R;P=M++)c=h[M],y=h[P],A+=(y.x-c.x)*(c.y+y.y);return A}const ZA=1/298.257223563,Mm=ZA*(2-ZA),Kf=Math.PI/180;class xA{constructor(A){const c=6378.137*Kf*1e3,y=Math.cos(A*Kf),M=1/(1-Mm*(1-y*y)),R=Math.sqrt(M);this.kx=c*R*y,this.ky=c*R*M*(1-Mm)}distance(A,c){const y=this.wrap(A[0]-c[0])*this.kx,M=(A[1]-c[1])*this.ky;return Math.sqrt(y*y+M*M)}pointOnLine(A,c){let y,M,R,P,G=1/0;for(let H=0;H<A.length-1;H++){let ie=A[H][0],Ae=A[H][1],ve=this.wrap(A[H+1][0]-ie)*this.kx,Ke=(A[H+1][1]-Ae)*this.ky,Qe=0;ve===0&&Ke===0||(Qe=(this.wrap(c[0]-ie)*this.kx*ve+(c[1]-Ae)*this.ky*Ke)/(ve*ve+Ke*Ke),Qe>1?(ie=A[H+1][0],Ae=A[H+1][1]):Qe>0&&(ie+=ve/this.kx*Qe,Ae+=Ke/this.ky*Qe)),ve=this.wrap(c[0]-ie)*this.kx,Ke=(c[1]-Ae)*this.ky;const Ve=ve*ve+Ke*Ke;Ve<G&&(G=Ve,y=ie,M=Ae,R=H,P=Qe)}return{point:[y,M],index:R,t:Math.max(0,Math.min(1,P))}}wrap(A){for(;A<-180;)A+=360;for(;A>180;)A-=360;return A}}function oc(h,A){return A[0]-h[0]}function MA(h){return h[1]-h[0]+1}function Ku(h,A){return h[1]>=h[0]&&h[1]<A}function Bo(h,A){if(h[0]>h[1])return[null,null];const c=MA(h);if(A){if(c===2)return[h,null];const M=Math.floor(c/2);return[[h[0],h[0]+M],[h[0]+M,h[1]]]}if(c===1)return[h,null];const y=Math.floor(c/2)-1;return[[h[0],h[0]+y],[h[0]+y+1,h[1]]]}function Ch(h,A){if(!Ku(A,h.length))return[1/0,1/0,-1/0,-1/0];const c=[1/0,1/0,-1/0,-1/0];for(let y=A[0];y<=A[1];++y)Yc(c,h[y]);return c}function Sd(h){const A=[1/0,1/0,-1/0,-1/0];for(const c of h)for(const y of c)Yc(A,y);return A}function Sm(h){return h[0]!==-1/0&&h[1]!==-1/0&&h[2]!==1/0&&h[3]!==1/0}function Sc(h,A,c){if(!Sm(h)||!Sm(A))return NaN;let y=0,M=0;return h[2]<A[0]&&(y=A[0]-h[2]),h[0]>A[2]&&(y=h[0]-A[2]),h[1]>A[3]&&(M=h[1]-A[3]),h[3]<A[1]&&(M=A[1]-h[3]),c.distance([0,0],[y,M])}function zl(h,A,c){const y=c.pointOnLine(A,h);return c.distance(h,y.point)}function Zt(h,A,c,y,M){const R=Math.min(zl(h,[c,y],M),zl(A,[c,y],M)),P=Math.min(zl(c,[h,A],M),zl(y,[h,A],M));return Math.min(R,P)}function wn(h,A,c,y,M){if(!Ku(A,h.length)||!Ku(y,c.length))return 1/0;let R=1/0;for(let P=A[0];P<A[1];++P){const G=h[P],H=h[P+1];for(let ie=y[0];ie<y[1];++ie){const Ae=c[ie],ve=c[ie+1];if(yh(G,H,Ae,ve))return 0;R=Math.min(R,Zt(G,H,Ae,ve,M))}}return R}function vn(h,A,c,y,M){if(!Ku(A,h.length)||!Ku(y,c.length))return NaN;let R=1/0;for(let P=A[0];P<=A[1];++P)for(let G=y[0];G<=y[1];++G)if(R=Math.min(R,M.distance(h[P],c[G])),R===0)return R;return R}function Ii(h,A,c){if(Wh(h,A,!0))return 0;let y=1/0;for(const M of A){const R=M[0],P=M[M.length-1];if(R!==P&&(y=Math.min(y,zl(h,[P,R],c)),y===0))return y;const G=c.pointOnLine(M,h);if(y=Math.min(y,c.distance(h,G.point)),y===0)return y}return y}function Sr(h,A,c,y){if(!Ku(A,h.length))return NaN;for(let R=A[0];R<=A[1];++R)if(Wh(h[R],c,!0))return 0;let M=1/0;for(let R=A[0];R<A[1];++R){const P=h[R],G=h[R+1];for(const H of c)for(let ie=0,Ae=H.length,ve=Ae-1;ie<Ae;ve=ie++){const Ke=H[ve],Qe=H[ie];if(yh(P,G,Ke,Qe))return 0;M=Math.min(M,Zt(P,G,Ke,Qe,y))}}return M}function Oo(h,A){for(const c of h)for(const y of c)if(Wh(y,A,!0))return!0;return!1}function qs(h,A,c,y=1/0){const M=Sd(h),R=Sd(A);if(y!==1/0&&Sc(M,R,c)>=y)return y;if(jh(M,R)){if(Oo(h,A))return 0}else if(Oo(A,h))return 0;let P=1/0;for(const G of h)for(let H=0,ie=G.length,Ae=ie-1;H<ie;Ae=H++){const ve=G[Ae],Ke=G[H];for(const Qe of A)for(let Ve=0,et=Qe.length,ut=et-1;Ve<et;ut=Ve++){const Mt=Qe[ut],Qt=Qe[Ve];if(yh(ve,Ke,Mt,Qt))return 0;P=Math.min(P,Zt(ve,Ke,Mt,Qt,c))}}return P}function Do(h,A,c,y,M,R){if(!R)return;const P=Sc(Ch(y,R),M,c);P<A&&h.push([P,R,[0,0]])}function Hc(h,A,c,y,M,R,P){if(!R||!P)return;const G=Sc(Ch(y,R),Ch(M,P),c);G<A&&h.push([G,R,P])}function $d(h,A,c,y,M=1/0){let R=Math.min(y.distance(h[0],c[0][0]),M);if(R===0)return R;const P=new Qh([[0,[0,h.length-1],[0,0]]],oc),G=Sd(c);for(;P.length>0;){const H=P.pop();if(H[0]>=R)continue;const ie=H[1],Ae=A?50:100;if(MA(ie)<=Ae){if(!Ku(ie,h.length))return NaN;if(A){const ve=Sr(h,ie,c,y);if(isNaN(ve)||ve===0)return ve;R=Math.min(R,ve)}else for(let ve=ie[0];ve<=ie[1];++ve){const Ke=Ii(h[ve],c,y);if(R=Math.min(R,Ke),R===0)return 0}}else{const ve=Bo(ie,A);Do(P,R,y,h,G,ve[0]),Do(P,R,y,h,G,ve[1])}}return R}function sA(h,A,c,y,M,R=1/0){let P=Math.min(R,M.distance(h[0],c[0]));if(P===0)return P;const G=new Qh([[0,[0,h.length-1],[0,c.length-1]]],oc);for(;G.length>0;){const H=G.pop();if(H[0]>=P)continue;const ie=H[1],Ae=H[2],ve=A?50:100,Ke=y?50:100;if(MA(ie)<=ve&&MA(Ae)<=Ke){if(!Ku(ie,h.length)&&Ku(Ae,c.length))return NaN;let Qe;if(A&&y)Qe=wn(h,ie,c,Ae,M),P=Math.min(P,Qe);else if(A&&!y){const Ve=h.slice(ie[0],ie[1]+1);for(let et=Ae[0];et<=Ae[1];++et)if(Qe=zl(c[et],Ve,M),P=Math.min(P,Qe),P===0)return P}else if(!A&&y){const Ve=c.slice(Ae[0],Ae[1]+1);for(let et=ie[0];et<=ie[1];++et)if(Qe=zl(h[et],Ve,M),P=Math.min(P,Qe),P===0)return P}else Qe=vn(h,ie,c,Ae,M),P=Math.min(P,Qe)}else{const Qe=Bo(ie,A),Ve=Bo(Ae,y);Hc(G,P,M,h,c,Qe[0],Ve[0]),Hc(G,P,M,h,c,Qe[0],Ve[1]),Hc(G,P,M,h,c,Qe[1],Ve[0]),Hc(G,P,M,h,c,Qe[1],Ve[1])}}return P}function wd(h){return h.type==="MultiPolygon"?h.coordinates.map(A=>({type:"Polygon",coordinates:A})):h.type==="MultiLineString"?h.coordinates.map(A=>({type:"LineString",coordinates:A})):h.type==="MultiPoint"?h.coordinates.map(A=>({type:"Point",coordinates:A})):[h]}class du{constructor(A,c){this.type=Zn,this.geojson=A,this.geometries=c}static parse(A,c){if(A.length!==2)return c.error(`'distance' expression requires exactly one argument, but found ${A.length-1} instead.`);if(vl(A[1])){const y=A[1];if(y.type==="FeatureCollection")return new du(y,y.features.map(M=>wd(M.geometry)).flat());if(y.type==="Feature")return new du(y,wd(y.geometry));if("type"in y&&"coordinates"in y)return new du(y,wd(y))}return c.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(A){if(A.geometry()!=null&&A.canonicalID()!=null){if(A.geometryType()==="Point")return function(c,y){const M=c.geometry(),R=M.flat().map(H=>Gh([H.x,H.y],c.canonical));if(M.length===0)return NaN;const P=new xA(R[0][1]);let G=1/0;for(const H of y){switch(H.type){case"Point":G=Math.min(G,sA(R,!1,[H.coordinates],!1,P,G));break;case"LineString":G=Math.min(G,sA(R,!1,H.coordinates,!0,P,G));break;case"Polygon":G=Math.min(G,$d(R,!1,H.coordinates,P,G))}if(G===0)return G}return G}(A,this.geometries);if(A.geometryType()==="LineString")return function(c,y){const M=c.geometry(),R=M.flat().map(H=>Gh([H.x,H.y],c.canonical));if(M.length===0)return NaN;const P=new xA(R[0][1]);let G=1/0;for(const H of y){switch(H.type){case"Point":G=Math.min(G,sA(R,!0,[H.coordinates],!1,P,G));break;case"LineString":G=Math.min(G,sA(R,!0,H.coordinates,!0,P,G));break;case"Polygon":G=Math.min(G,$d(R,!0,H.coordinates,P,G))}if(G===0)return G}return G}(A,this.geometries);if(A.geometryType()==="Polygon")return function(c,y){const M=c.geometry();if(M.length===0||M[0].length===0)return NaN;const R=qc(M,0).map(H=>H.map(ie=>ie.map(Ae=>Gh([Ae.x,Ae.y],c.canonical)))),P=new xA(R[0][0][0][1]);let G=1/0;for(const H of y)for(const ie of R){switch(H.type){case"Point":G=Math.min(G,$d([H.coordinates],!1,ie,P,G));break;case"LineString":G=Math.min(G,$d(H.coordinates,!0,ie,P,G));break;case"Polygon":G=Math.min(G,qs(ie,H.coordinates,P,G))}if(G===0)return G}return G}(A,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class SA{constructor(A){this.type=Ni,this.key=A}static parse(A,c){if(A.length!==2)return c.error(`Expected 1 argument, but found ${A.length-1} instead.`);const y=A[1];return y==null?c.error("Global state property must be defined."):typeof y!="string"?c.error(`Global state property must be string, but found ${typeof A[1]} instead.`):new SA(y)}evaluate(A){var c;const y=(c=A.globals)===null||c===void 0?void 0:c.globalState;return y&&Object.keys(y).length!==0?Qs(y,this.key):null}eachChild(){}outputDefined(){return!1}}const wA={"==":ic,"!=":vd,">":gh,"<":dp,">=":o0,"<=":Cd,array:Oe,at:Xi,boolean:Oe,case:pr,coalesce:HA,collator:Tf,format:VA,image:Xa,in:eo,"index-of":uo,interpolate:Da,"interpolate-hcl":Da,"interpolate-lab":Da,length:_d,let:or,literal:Qr,match:ur,number:Oe,"number-format":kf,object:Oe,slice:co,step:zr,string:Oe,"to-boolean":jt,"to-color":jt,"to-number":jt,"to-string":jt,var:Di,within:$A,distance:du,"global-state":SA};class Il{constructor(A,c,y,M){this.name=A,this.type=c,this._evaluate=y,this.args=M}evaluate(A){return this._evaluate(A,this.args)}eachChild(A){this.args.forEach(A)}outputDefined(){return!1}static parse(A,c){const y=A[0],M=Il.definitions[y];if(!M)return c.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0);const R=Array.isArray(M)?M[0]:M.type,P=Array.isArray(M)?[[M[1],M[2]]]:M.overloads,G=P.filter(([ie])=>!Array.isArray(ie)||ie.length===A.length-1);let H=null;for(const[ie,Ae]of G){H=new $i(c.registry,Hs,c.path,null,c.scope);const ve=[];let Ke=!1;for(let Qe=1;Qe<A.length;Qe++){const Ve=A[Qe],et=Array.isArray(ie)?ie[Qe-1]:ie.type,ut=H.parse(Ve,1+ve.length,et);if(!ut){Ke=!0;break}ve.push(ut)}if(!Ke)if(Array.isArray(ie)&&ie.length!==ve.length)H.error(`Expected ${ie.length} arguments, but found ${ve.length} instead.`);else{for(let Qe=0;Qe<ve.length;Qe++){const Ve=Array.isArray(ie)?ie[Qe]:ie.type,et=ve[Qe];H.concat(Qe+1).checkSubtype(Ve,et.type)}if(H.errors.length===0)return new Il(y,R,Ae,ve)}}if(G.length===1)c.errors.push(...H.errors);else{const ie=(G.length?G:P).map(([ve])=>{return Ke=ve,Array.isArray(Ke)?`(${Ke.map(Vi).join(", ")})`:`(${Vi(Ke.type)}...)`;var Ke}).join(" | "),Ae=[];for(let ve=1;ve<A.length;ve++){const Ke=c.parse(A[ve],1+Ae.length);if(!Ke)return null;Ae.push(Vi(Ke.type))}c.error(`Expected arguments of type ${ie}, but found (${Ae.join(", ")}) instead.`)}return null}static register(A,c){Il.definitions=c;for(const y in c)A[y]=Il}}function jo(h,[A,c,y,M]){A=A.evaluate(h),c=c.evaluate(h),y=y.evaluate(h);const R=M?M.evaluate(h):1,P=Dr(A,c,y,R);if(P)throw new kr(P);return new br(A/255,c/255,y/255,R,!1)}function fu(h,A){return h in A}function qh(h,A){const c=A[h];return c===void 0?null:c}function Na(h){return{type:h}}function Hs(h){if(h instanceof Di)return Hs(h.boundExpression);if(h instanceof Il&&h.name==="error"||h instanceof Tf||h instanceof $A||h instanceof du||h instanceof SA)return!1;const A=h instanceof jt||h instanceof Oe;let c=!0;return h.eachChild(y=>{c=A?c&&Hs(y):c&&y instanceof Qr}),!!c&&ws(h)&&Nl(h,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function ws(h){if(h instanceof Il&&(h.name==="get"&&h.args.length===1||h.name==="feature-state"||h.name==="has"&&h.args.length===1||h.name==="properties"||h.name==="geometry-type"||h.name==="id"||/^filter-/.test(h.name))||h instanceof $A||h instanceof du)return!1;let A=!0;return h.eachChild(c=>{A&&!ws(c)&&(A=!1)}),A}function XA(h){if(h instanceof Il&&h.name==="feature-state")return!1;let A=!0;return h.eachChild(c=>{A&&!XA(c)&&(A=!1)}),A}function Nl(h,A){if(h instanceof Il&&A.indexOf(h.name)>=0)return!1;let c=!0;return h.eachChild(y=>{c&&!Nl(y,A)&&(c=!1)}),c}function EA(h){return{result:"success",value:h}}function ac(h){return{result:"error",value:h}}function BA(h){return h["property-type"]==="data-driven"||h["property-type"]==="cross-faded-data-driven"}function wc(h){return!!h.expression&&h.expression.parameters.indexOf("zoom")>-1}function _h(h){return!!h.expression&&h.expression.interpolated}function Tr(h){return h instanceof Number?"number":h instanceof String?"string":h instanceof Boolean?"boolean":Array.isArray(h)?"array":h===null?"null":typeof h}function sc(h){return typeof h=="object"&&h!==null&&!Array.isArray(h)&&Zi(h)===Ir}function JA(h){return h}function Ec(h,A){const c=h.stops&&typeof h.stops[0][0]=="object",y=c||!(c||h.property!==void 0),M=h.type||(_h(A)?"exponential":"interval"),R=function(Ae){switch(Ae.type){case"color":return br.parse;case"padding":return Fa.parse;case"numberArray":return Sa.parse;case"colorArray":return oa.parse;default:return null}}(A);if(R&&((h=lo({},h)).stops&&(h.stops=h.stops.map(Ae=>[Ae[0],R(Ae[1])])),h.default=R(h.default?h.default:A.default)),h.colorSpace&&(P=h.colorSpace)!=="rgb"&&P!=="hcl"&&P!=="lab")throw new Error(`Unknown color space: "${h.colorSpace}"`);var P;const G=function(Ae){switch(Ae){case"exponential":return mu;case"interval":return Ed;case"categorical":return bh;case"identity":return Bd;default:throw new Error(`Unknown function type "${Ae}"`)}}(M);let H,ie;if(M==="categorical"){H=Object.create(null);for(const Ae of h.stops)H[Ae[0]]=Ae[1];ie=typeof h.stops[0][0]}if(c){const Ae={},ve=[];for(let Ve=0;Ve<h.stops.length;Ve++){const et=h.stops[Ve],ut=et[0].zoom;Ae[ut]===void 0&&(Ae[ut]={zoom:ut,type:h.type,property:h.property,default:h.default,stops:[]},ve.push(ut)),Ae[ut].stops.push([et[0].value,et[1]])}const Ke=[];for(const Ve of ve)Ke.push([Ae[Ve].zoom,Ec(Ae[Ve],A)]);const Qe={name:"linear"};return{kind:"composite",interpolationType:Qe,interpolationFactor:Da.interpolationFactor.bind(void 0,Qe),zoomStops:Ke.map(Ve=>Ve[0]),evaluate:({zoom:Ve},et)=>mu({stops:Ke,base:h.base},A,Ve).evaluate(Ve,et)}}if(y){const Ae=M==="exponential"?{name:"exponential",base:h.base!==void 0?h.base:1}:null;return{kind:"camera",interpolationType:Ae,interpolationFactor:Da.interpolationFactor.bind(void 0,Ae),zoomStops:h.stops.map(ve=>ve[0]),evaluate:({zoom:ve})=>G(h,A,ve,H,ie)}}return{kind:"source",evaluate(Ae,ve){const Ke=ve&&ve.properties?ve.properties[h.property]:void 0;return Ke===void 0?Es(h.default,A.default):G(h,A,Ke,H,ie)}}}function Es(h,A,c){return h!==void 0?h:A!==void 0?A:c!==void 0?c:void 0}function bh(h,A,c,y,M){return Es(typeof c===M?y[c]:void 0,h.default,A.default)}function Ed(h,A,c){if(Tr(c)!=="number")return Es(h.default,A.default);const y=h.stops.length;if(y===1||c<=h.stops[0][0])return h.stops[0][1];if(c>=h.stops[y-1][0])return h.stops[y-1][1];const M=Go(h.stops.map(R=>R[0]),c);return h.stops[M][1]}function mu(h,A,c){const y=h.base!==void 0?h.base:1;if(Tr(c)!=="number")return Es(h.default,A.default);const M=h.stops.length;if(M===1||c<=h.stops[0][0])return h.stops[0][1];if(c>=h.stops[M-1][0])return h.stops[M-1][1];const R=Go(h.stops.map(Ae=>Ae[0]),c),P=function(Ae,ve,Ke,Qe){const Ve=Qe-Ke,et=Ae-Ke;return Ve===0?0:ve===1?et/Ve:(Math.pow(ve,et)-1)/(Math.pow(ve,Ve)-1)}(c,y,h.stops[R][0],h.stops[R+1][0]),G=h.stops[R][1],H=h.stops[R+1][1],ie=Ru[A.type]||JA;return typeof G.evaluate=="function"?{evaluate(...Ae){const ve=G.evaluate.apply(void 0,Ae),Ke=H.evaluate.apply(void 0,Ae);if(ve!==void 0&&Ke!==void 0)return ie(ve,Ke,P,h.colorSpace)}}:ie(G,H,P,h.colorSpace)}function Bd(h,A,c){switch(A.type){case"color":c=br.parse(c);break;case"formatted":c=Eo.fromString(c.toString());break;case"resolvedImage":c=Za.fromString(c.toString());break;case"padding":c=Fa.parse(c);break;case"colorArray":c=oa.parse(c);break;case"numberArray":c=Sa.parse(c);break;default:Tr(c)===A.type||A.type==="enum"&&A.values[c]||(c=void 0)}return Es(c,h.default,A.default)}Il.register(wA,{error:[{kind:"error"},[lr],(h,[A])=>{throw new kr(A.evaluate(h))}],typeof:[lr,[Ni],(h,[A])=>Vi(Zi(A.evaluate(h)))],"to-rgba":[ka(Zn,4),[vr],(h,[A])=>{const[c,y,M,R]=A.evaluate(h).rgb;return[255*c,255*y,255*M,R]}],rgb:[vr,[Zn,Zn,Zn],jo],rgba:[vr,[Zn,Zn,Zn,Zn],jo],has:{type:zi,overloads:[[[lr],(h,[A])=>fu(A.evaluate(h),h.properties())],[[lr,Ir],(h,[A,c])=>fu(A.evaluate(h),c.evaluate(h))]]},get:{type:Ni,overloads:[[[lr],(h,[A])=>qh(A.evaluate(h),h.properties())],[[lr,Ir],(h,[A,c])=>qh(A.evaluate(h),c.evaluate(h))]]},"feature-state":[Ni,[lr],(h,[A])=>qh(A.evaluate(h),h.featureState||{})],properties:[Ir,[],h=>h.properties()],"geometry-type":[lr,[],h=>h.geometryType()],id:[Ni,[],h=>h.id()],zoom:[Zn,[],h=>h.globals.zoom],"heatmap-density":[Zn,[],h=>h.globals.heatmapDensity||0],elevation:[Zn,[],h=>h.globals.elevation||0],"line-progress":[Zn,[],h=>h.globals.lineProgress||0],accumulated:[Ni,[],h=>h.globals.accumulated===void 0?null:h.globals.accumulated],"+":[Zn,Na(Zn),(h,A)=>{let c=0;for(const y of A)c+=y.evaluate(h);return c}],"*":[Zn,Na(Zn),(h,A)=>{let c=1;for(const y of A)c*=y.evaluate(h);return c}],"-":{type:Zn,overloads:[[[Zn,Zn],(h,[A,c])=>A.evaluate(h)-c.evaluate(h)],[[Zn],(h,[A])=>-A.evaluate(h)]]},"/":[Zn,[Zn,Zn],(h,[A,c])=>A.evaluate(h)/c.evaluate(h)],"%":[Zn,[Zn,Zn],(h,[A,c])=>A.evaluate(h)%c.evaluate(h)],ln2:[Zn,[],()=>Math.LN2],pi:[Zn,[],()=>Math.PI],e:[Zn,[],()=>Math.E],"^":[Zn,[Zn,Zn],(h,[A,c])=>Math.pow(A.evaluate(h),c.evaluate(h))],sqrt:[Zn,[Zn],(h,[A])=>Math.sqrt(A.evaluate(h))],log10:[Zn,[Zn],(h,[A])=>Math.log(A.evaluate(h))/Math.LN10],ln:[Zn,[Zn],(h,[A])=>Math.log(A.evaluate(h))],log2:[Zn,[Zn],(h,[A])=>Math.log(A.evaluate(h))/Math.LN2],sin:[Zn,[Zn],(h,[A])=>Math.sin(A.evaluate(h))],cos:[Zn,[Zn],(h,[A])=>Math.cos(A.evaluate(h))],tan:[Zn,[Zn],(h,[A])=>Math.tan(A.evaluate(h))],asin:[Zn,[Zn],(h,[A])=>Math.asin(A.evaluate(h))],acos:[Zn,[Zn],(h,[A])=>Math.acos(A.evaluate(h))],atan:[Zn,[Zn],(h,[A])=>Math.atan(A.evaluate(h))],min:[Zn,Na(Zn),(h,A)=>Math.min(...A.map(c=>c.evaluate(h)))],max:[Zn,Na(Zn),(h,A)=>Math.max(...A.map(c=>c.evaluate(h)))],abs:[Zn,[Zn],(h,[A])=>Math.abs(A.evaluate(h))],round:[Zn,[Zn],(h,[A])=>{const c=A.evaluate(h);return c<0?-Math.round(-c):Math.round(c)}],floor:[Zn,[Zn],(h,[A])=>Math.floor(A.evaluate(h))],ceil:[Zn,[Zn],(h,[A])=>Math.ceil(A.evaluate(h))],"filter-==":[zi,[lr,Ni],(h,[A,c])=>h.properties()[A.value]===c.value],"filter-id-==":[zi,[Ni],(h,[A])=>h.id()===A.value],"filter-type-==":[zi,[lr],(h,[A])=>h.geometryType()===A.value],"filter-<":[zi,[lr,Ni],(h,[A,c])=>{const y=h.properties()[A.value],M=c.value;return typeof y==typeof M&&y<M}],"filter-id-<":[zi,[Ni],(h,[A])=>{const c=h.id(),y=A.value;return typeof c==typeof y&&c<y}],"filter->":[zi,[lr,Ni],(h,[A,c])=>{const y=h.properties()[A.value],M=c.value;return typeof y==typeof M&&y>M}],"filter-id->":[zi,[Ni],(h,[A])=>{const c=h.id(),y=A.value;return typeof c==typeof y&&c>y}],"filter-<=":[zi,[lr,Ni],(h,[A,c])=>{const y=h.properties()[A.value],M=c.value;return typeof y==typeof M&&y<=M}],"filter-id-<=":[zi,[Ni],(h,[A])=>{const c=h.id(),y=A.value;return typeof c==typeof y&&c<=y}],"filter->=":[zi,[lr,Ni],(h,[A,c])=>{const y=h.properties()[A.value],M=c.value;return typeof y==typeof M&&y>=M}],"filter-id->=":[zi,[Ni],(h,[A])=>{const c=h.id(),y=A.value;return typeof c==typeof y&&c>=y}],"filter-has":[zi,[Ni],(h,[A])=>A.value in h.properties()],"filter-has-id":[zi,[],h=>h.id()!==null&&h.id()!==void 0],"filter-type-in":[zi,[ka(lr)],(h,[A])=>A.value.indexOf(h.geometryType())>=0],"filter-id-in":[zi,[ka(Ni)],(h,[A])=>A.value.indexOf(h.id())>=0],"filter-in-small":[zi,[lr,ka(Ni)],(h,[A,c])=>c.value.indexOf(h.properties()[A.value])>=0],"filter-in-large":[zi,[lr,ka(Ni)],(h,[A,c])=>function(y,M,R,P){for(;R<=P;){const G=R+P>>1;if(M[G]===y)return!0;M[G]>y?P=G-1:R=G+1}return!1}(h.properties()[A.value],c.value,0,c.value.length-1)],all:{type:zi,overloads:[[[zi,zi],(h,[A,c])=>A.evaluate(h)&&c.evaluate(h)],[Na(zi),(h,A)=>{for(const c of A)if(!c.evaluate(h))return!1;return!0}]]},any:{type:zi,overloads:[[[zi,zi],(h,[A,c])=>A.evaluate(h)||c.evaluate(h)],[Na(zi),(h,A)=>{for(const c of A)if(c.evaluate(h))return!0;return!1}]]},"!":[zi,[zi],(h,[A])=>!A.evaluate(h)],"is-supported-script":[zi,[lr],(h,[A])=>{const c=h.globals&&h.globals.isSupportedScript;return!c||c(A.evaluate(h))}],upcase:[lr,[lr],(h,[A])=>A.evaluate(h).toUpperCase()],downcase:[lr,[lr],(h,[A])=>A.evaluate(h).toLowerCase()],concat:[lr,Na(Ni),(h,A)=>A.map(c=>Mi(c.evaluate(h))).join("")],"resolved-locale":[lr,[gl],(h,[A])=>A.evaluate(h).resolvedLocale()]});class Vc{constructor(A,c){this.expression=A,this._warningHistory={},this._evaluator=new Xn,this._defaultValue=c?function(y){if(y.type==="color"&&sc(y.default))return new br(0,0,0,0);switch(y.type){case"color":return br.parse(y.default)||null;case"padding":return Fa.parse(y.default)||null;case"numberArray":return Sa.parse(y.default)||null;case"colorArray":return oa.parse(y.default)||null;case"variableAnchorOffsetCollection":return za.parse(y.default)||null;case"projectionDefinition":return ya.parse(y.default)||null;default:return y.default===void 0?null:y.default}}(c):null,this._enumValues=c&&c.type==="enum"?c.values:null}evaluateWithoutErrorHandling(A,c,y,M,R,P){return this._evaluator.globals=A,this._evaluator.feature=c,this._evaluator.featureState=y,this._evaluator.canonical=M,this._evaluator.availableImages=R||null,this._evaluator.formattedSection=P,this.expression.evaluate(this._evaluator)}evaluate(A,c,y,M,R,P){this._evaluator.globals=A,this._evaluator.feature=c||null,this._evaluator.featureState=y||null,this._evaluator.canonical=M,this._evaluator.availableImages=R||null,this._evaluator.formattedSection=P||null;try{const G=this.expression.evaluate(this._evaluator);if(G==null||typeof G=="number"&&G!=G)return this._defaultValue;if(this._enumValues&&!(G in this._enumValues))throw new kr(`Expected value to be one of ${Object.keys(this._enumValues).map(H=>JSON.stringify(H)).join(", ")}, but found ${JSON.stringify(G)} instead.`);return G}catch(G){return this._warningHistory[G.message]||(this._warningHistory[G.message]=!0,typeof console<"u"&&console.warn(G.message)),this._defaultValue}}}function OA(h){return Array.isArray(h)&&h.length>0&&typeof h[0]=="string"&&h[0]in wA}function Uu(h,A){const c=new $i(wA,Hs,[],A?function(M){const R={color:vr,string:lr,number:Zn,enum:lr,boolean:zi,formatted:Ta,padding:So,numberArray:Ol,colorArray:$a,projectionDefinition:La,resolvedImage:Ao,variableAnchorOffsetCollection:QA};return M.type==="array"?ka(R[M.value]||Ni,M.length):R[M.type]}(A):void 0),y=c.parse(h,void 0,void 0,void 0,A&&A.type==="string"?{typeAnnotation:"coerce"}:void 0);return y?EA(new Vc(y,A)):ac(c.errors)}class xh{constructor(A,c){this.kind=A,this._styleExpression=c,this.isStateDependent=A!=="constant"&&!XA(c.expression),this.globalStateRefs=aa(c.expression)}evaluateWithoutErrorHandling(A,c,y,M,R,P){return this._styleExpression.evaluateWithoutErrorHandling(A,c,y,M,R,P)}evaluate(A,c,y,M,R,P){return this._styleExpression.evaluate(A,c,y,M,R,P)}}class Hh{constructor(A,c,y,M){this.kind=A,this.zoomStops=y,this._styleExpression=c,this.isStateDependent=A!=="camera"&&!XA(c.expression),this.globalStateRefs=aa(c.expression),this.interpolationType=M}evaluateWithoutErrorHandling(A,c,y,M,R,P){return this._styleExpression.evaluateWithoutErrorHandling(A,c,y,M,R,P)}evaluate(A,c,y,M,R,P){return this._styleExpression.evaluate(A,c,y,M,R,P)}interpolationFactor(A,c,y){return this.interpolationType?Da.interpolationFactor(this.interpolationType,A,c,y):0}}function IA(h,A){const c=Uu(h,A);if(c.result==="error")return c;const y=c.value.expression,M=ws(y);if(!M&&!BA(A))return ac([new Hi("","data expressions not supported")]);const R=Nl(y,["zoom"]);if(!R&&!wc(A))return ac([new Hi("","zoom expressions not supported")]);const P=Wo(y);return P||R?P instanceof Hi?ac([P]):P instanceof Da&&!_h(A)?ac([new Hi("",'"interpolate" expressions cannot be used with this property')]):EA(P?new Hh(M?"camera":"composite",c.value,P.labels,P instanceof Da?P.interpolation:void 0):new xh(M?"constant":"source",c.value)):ac([new Hi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Tl{constructor(A,c){this._parameters=A,this._specification=c,lo(this,Ec(this._parameters,this._specification))}static deserialize(A){return new Tl(A._parameters,A._specification)}static serialize(A){return{_parameters:A._parameters,_specification:A._specification}}}function Wo(h){let A=null;if(h instanceof or)A=Wo(h.result);else if(h instanceof HA){for(const c of h.args)if(A=Wo(c),A)break}else(h instanceof zr||h instanceof Da)&&h.input instanceof Il&&h.input.name==="zoom"&&(A=h);return A instanceof Hi||h.eachChild(c=>{const y=Wo(c);y instanceof Hi?A=y:!A&&y?A=new Hi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):A&&y&&A!==y&&(A=new Hi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),A}function aa(h,A=new Set){return h instanceof SA&&A.add(h.key),h.eachChild(c=>{aa(c,A)}),A}function Lu(h){if(h===!0||h===!1)return!0;if(!Array.isArray(h)||h.length===0)return!1;switch(h[0]){case"has":return h.length>=2&&h[1]!=="$id"&&h[1]!=="$type";case"in":return h.length>=3&&(typeof h[1]!="string"||Array.isArray(h[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return h.length!==3||Array.isArray(h[1])||Array.isArray(h[2]);case"any":case"all":for(const A of h.slice(1))if(!Lu(A)&&typeof A!="boolean")return!1;return!0;default:return!0}}const Fu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Bc(h){if(h==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Lu(h)||(h=va(h));const A=Uu(h,Fu);if(A.result==="error")throw new Error(A.value.map(c=>`${c.key}: ${c.message}`).join(", "));return{filter:(c,y,M)=>A.value.evaluate(c,y,{},M),needGeometry:Zc(h),getGlobalStateRefs:()=>aa(A.value.expression)}}function $c(h,A){return h<A?-1:h>A?1:0}function Zc(h){if(!Array.isArray(h))return!1;if(h[0]==="within"||h[0]==="distance")return!0;for(let A=1;A<h.length;A++)if(Zc(h[A]))return!0;return!1}function va(h){if(!h)return!0;const A=h[0];return h.length<=1?A!=="any":A==="=="?_a(h[1],h[2],"=="):A==="!="?Ls(_a(h[1],h[2],"==")):A==="<"||A===">"||A==="<="||A===">="?_a(h[1],h[2],A):A==="any"?(c=h.slice(1),["any"].concat(c.map(va))):A==="all"?["all"].concat(h.slice(1).map(va)):A==="none"?["all"].concat(h.slice(1).map(va).map(Ls)):A==="in"?$r(h[1],h.slice(2)):A==="!in"?Ls($r(h[1],h.slice(2))):A==="has"?lA(h[1]):A!=="!has"||Ls(lA(h[1]));var c}function _a(h,A,c){switch(h){case"$type":return[`filter-type-${c}`,A];case"$id":return[`filter-id-${c}`,A];default:return[`filter-${c}`,h,A]}}function $r(h,A){if(A.length===0)return!1;switch(h){case"$type":return["filter-type-in",["literal",A]];case"$id":return["filter-id-in",["literal",A]];default:return A.length>200&&!A.some(c=>typeof c!=typeof A[0])?["filter-in-large",h,["literal",A.sort($c)]]:["filter-in-small",h,["literal",A]]}}function lA(h){switch(h){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",h]}}function Ls(h){return["!",h]}function Xc(h){const A=typeof h;if(A==="number"||A==="boolean"||A==="string"||h==null)return JSON.stringify(h);if(Array.isArray(h)){let M="[";for(const R of h)M+=`${Xc(R)},`;return`${M}]`}const c=Object.keys(h).sort();let y="{";for(let M=0;M<c.length;M++)y+=`${JSON.stringify(c[M])}:${Xc(h[c[M]])},`;return`${y}}`}function pu(h){let A="";for(const c of en)A+=`/${Xc(h[c])}`;return A}function Zd(h){const A=h.value;return A?[new Sn(h.key,A,"constants have been deprecated as of v8")]:[]}function ms(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}function il(h){if(Array.isArray(h))return h.map(il);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){const A={};for(const c in h)A[c]=il(h[c]);return A}return ms(h)}function Fs(h){const A=h.key,c=h.value,y=h.valueSpec||{},M=h.objectElementValidators||{},R=h.style,P=h.styleSpec,G=h.validateSpec;let H=[];const ie=Tr(c);if(ie!=="object")return[new Sn(A,c,`object expected, ${ie} found`)];for(const Ae in c){const ve=Ae.split(".")[0],Ke=Qs(y,ve)||y["*"];let Qe;if(Qs(M,ve))Qe=M[ve];else if(Qs(y,ve))Qe=G;else if(M["*"])Qe=M["*"];else{if(!y["*"]){H.push(new Sn(A,c[Ae],`unknown property "${Ae}"`));continue}Qe=G}H=H.concat(Qe({key:(A&&`${A}.`)+Ae,value:c[Ae],valueSpec:Ke,style:R,styleSpec:P,object:c,objectKey:Ae,validateSpec:G},c))}for(const Ae in y)M[Ae]||y[Ae].required&&y[Ae].default===void 0&&c[Ae]===void 0&&H.push(new Sn(A,c,`missing required property "${Ae}"`));return H}function Xd(h){const A=h.value,c=h.valueSpec,y=h.style,M=h.styleSpec,R=h.key,P=h.arrayElementValidator||h.validateSpec;if(Tr(A)!=="array")return[new Sn(R,A,`array expected, ${Tr(A)} found`)];if(c.length&&A.length!==c.length)return[new Sn(R,A,`array length ${c.length} expected, length ${A.length} found`)];if(c["min-length"]&&A.length<c["min-length"])return[new Sn(R,A,`array length at least ${c["min-length"]} expected, length ${A.length} found`)];let G={type:c.value,values:c.values};M.$version<7&&(G.function=c.function),Tr(c.value)==="object"&&(G=c.value);let H=[];for(let ie=0;ie<A.length;ie++)H=H.concat(P({array:A,arrayIndex:ie,value:A[ie],valueSpec:G,validateSpec:h.validateSpec,style:y,styleSpec:M,key:`${R}[${ie}]`}));return H}function zu(h){const A=h.key,c=h.value,y=h.valueSpec;let M=Tr(c);return M==="number"&&c!=c&&(M="NaN"),M!=="number"?[new Sn(A,c,`number expected, ${M} found`)]:"minimum"in y&&c<y.minimum?[new Sn(A,c,`${c} is less than the minimum value ${y.minimum}`)]:"maximum"in y&&c>y.maximum?[new Sn(A,c,`${c} is greater than the maximum value ${y.maximum}`)]:[]}function Mh(h){const A=h.valueSpec,c=ms(h.value.type);let y,M,R,P={};const G=c!=="categorical"&&h.value.property===void 0,H=!G,ie=Tr(h.value.stops)==="array"&&Tr(h.value.stops[0])==="array"&&Tr(h.value.stops[0][0])==="object",Ae=Fs({key:h.key,value:h.value,valueSpec:h.styleSpec.function,validateSpec:h.validateSpec,style:h.style,styleSpec:h.styleSpec,objectElementValidators:{stops:function(Qe){if(c==="identity")return[new Sn(Qe.key,Qe.value,'identity function may not have a "stops" property')];let Ve=[];const et=Qe.value;return Ve=Ve.concat(Xd({key:Qe.key,value:et,valueSpec:Qe.valueSpec,validateSpec:Qe.validateSpec,style:Qe.style,styleSpec:Qe.styleSpec,arrayElementValidator:ve})),Tr(et)==="array"&&et.length===0&&Ve.push(new Sn(Qe.key,et,"array must have at least one stop")),Ve},default:function(Qe){return Qe.validateSpec({key:Qe.key,value:Qe.value,valueSpec:A,validateSpec:Qe.validateSpec,style:Qe.style,styleSpec:Qe.styleSpec})}}});return c==="identity"&&G&&Ae.push(new Sn(h.key,h.value,'missing required property "property"')),c==="identity"||h.value.stops||Ae.push(new Sn(h.key,h.value,'missing required property "stops"')),c==="exponential"&&h.valueSpec.expression&&!_h(h.valueSpec)&&Ae.push(new Sn(h.key,h.value,"exponential functions not supported")),h.styleSpec.$version>=8&&(H&&!BA(h.valueSpec)?Ae.push(new Sn(h.key,h.value,"property functions not supported")):G&&!wc(h.valueSpec)&&Ae.push(new Sn(h.key,h.value,"zoom functions not supported"))),c!=="categorical"&&!ie||h.value.property!==void 0||Ae.push(new Sn(h.key,h.value,'"property" property is required')),Ae;function ve(Qe){let Ve=[];const et=Qe.value,ut=Qe.key;if(Tr(et)!=="array")return[new Sn(ut,et,`array expected, ${Tr(et)} found`)];if(et.length!==2)return[new Sn(ut,et,`array length 2 expected, length ${et.length} found`)];if(ie){if(Tr(et[0])!=="object")return[new Sn(ut,et,`object expected, ${Tr(et[0])} found`)];if(et[0].zoom===void 0)return[new Sn(ut,et,"object stop key must have zoom")];if(et[0].value===void 0)return[new Sn(ut,et,"object stop key must have value")];if(R&&R>ms(et[0].zoom))return[new Sn(ut,et[0].zoom,"stop zoom values must appear in ascending order")];ms(et[0].zoom)!==R&&(R=ms(et[0].zoom),M=void 0,P={}),Ve=Ve.concat(Fs({key:`${ut}[0]`,value:et[0],valueSpec:{zoom:{}},validateSpec:Qe.validateSpec,style:Qe.style,styleSpec:Qe.styleSpec,objectElementValidators:{zoom:zu,value:Ke}}))}else Ve=Ve.concat(Ke({key:`${ut}[0]`,value:et[0],validateSpec:Qe.validateSpec,style:Qe.style,styleSpec:Qe.styleSpec},et));return OA(il(et[1]))?Ve.concat([new Sn(`${ut}[1]`,et[1],"expressions are not allowed in function stops.")]):Ve.concat(Qe.validateSpec({key:`${ut}[1]`,value:et[1],valueSpec:A,validateSpec:Qe.validateSpec,style:Qe.style,styleSpec:Qe.styleSpec}))}function Ke(Qe,Ve){const et=Tr(Qe.value),ut=ms(Qe.value),Mt=Qe.value!==null?Qe.value:Ve;if(y){if(et!==y)return[new Sn(Qe.key,Mt,`${et} stop domain type must match previous stop domain type ${y}`)]}else y=et;if(et!=="number"&&et!=="string"&&et!=="boolean")return[new Sn(Qe.key,Mt,"stop domain value must be a number, string, or boolean")];if(et!=="number"&&c!=="categorical"){let Qt=`number expected, ${et} found`;return BA(A)&&c===void 0&&(Qt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Sn(Qe.key,Mt,Qt)]}return c!=="categorical"||et!=="number"||isFinite(ut)&&Math.floor(ut)===ut?c!=="categorical"&&et==="number"&&M!==void 0&&ut<M?[new Sn(Qe.key,Mt,"stop domain values must appear in ascending order")]:(M=ut,c==="categorical"&&ut in P?[new Sn(Qe.key,Mt,"stop domain values must be unique")]:(P[ut]=!0,[])):[new Sn(Qe.key,Mt,`integer expected, found ${ut}`)]}}function eu(h){const A=(h.expressionContext==="property"?IA:Uu)(il(h.value),h.valueSpec);if(A.result==="error")return A.value.map(y=>new Sn(`${h.key}${y.key}`,h.value,y.message));const c=A.value.expression||A.value._styleExpression.expression;if(h.expressionContext==="property"&&h.propertyKey==="text-font"&&!c.outputDefined())return[new Sn(h.key,h.value,`Invalid data expression for "${h.propertyKey}". Output values must be contained as literals within the expression.`)];if(h.expressionContext==="property"&&h.propertyType==="layout"&&!XA(c))return[new Sn(h.key,h.value,'"feature-state" data expressions are not supported with layout properties.')];if(h.expressionContext==="filter"&&!XA(c))return[new Sn(h.key,h.value,'"feature-state" data expressions are not supported with filters.')];if(h.expressionContext&&h.expressionContext.indexOf("cluster")===0){if(!Nl(c,["zoom","feature-state"]))return[new Sn(h.key,h.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(h.expressionContext==="cluster-initial"&&!ws(c))return[new Sn(h.key,h.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function rt(h){const A=h.key,c=h.value,y=Tr(c);return y!=="string"?[new Sn(A,c,`color expected, ${y} found`)]:br.parse(String(c))?[]:[new Sn(A,c,`color expected, "${c}" found`)]}function Vs(h){const A=h.key,c=h.value,y=h.valueSpec,M=[];return Array.isArray(y.values)?y.values.indexOf(ms(c))===-1&&M.push(new Sn(A,c,`expected one of [${y.values.join(", ")}], ${JSON.stringify(c)} found`)):Object.keys(y.values).indexOf(ms(c))===-1&&M.push(new Sn(A,c,`expected one of [${Object.keys(y.values).join(", ")}], ${JSON.stringify(c)} found`)),M}function Ga(h){return Lu(il(h.value))?eu(lo({},h,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Zo(h)}function Zo(h){const A=h.value,c=h.key;if(Tr(A)!=="array")return[new Sn(c,A,`array expected, ${Tr(A)} found`)];const y=h.styleSpec;let M,R=[];if(A.length<1)return[new Sn(c,A,"filter array must have at least 1 element")];switch(R=R.concat(Vs({key:`${c}[0]`,value:A[0],valueSpec:y.filter_operator,style:h.style,styleSpec:h.styleSpec})),ms(A[0])){case"<":case"<=":case">":case">=":A.length>=2&&ms(A[1])==="$type"&&R.push(new Sn(c,A,`"$type" cannot be use with operator "${A[0]}"`));case"==":case"!=":A.length!==3&&R.push(new Sn(c,A,`filter array for operator "${A[0]}" must have 3 elements`));case"in":case"!in":A.length>=2&&(M=Tr(A[1]),M!=="string"&&R.push(new Sn(`${c}[1]`,A[1],`string expected, ${M} found`)));for(let P=2;P<A.length;P++)M=Tr(A[P]),ms(A[1])==="$type"?R=R.concat(Vs({key:`${c}[${P}]`,value:A[P],valueSpec:y.geometry_type,style:h.style,styleSpec:h.styleSpec})):M!=="string"&&M!=="number"&&M!=="boolean"&&R.push(new Sn(`${c}[${P}]`,A[P],`string, number, or boolean expected, ${M} found`));break;case"any":case"all":case"none":for(let P=1;P<A.length;P++)R=R.concat(Zo({key:`${c}[${P}]`,value:A[P],style:h.style,styleSpec:h.styleSpec}));break;case"has":case"!has":M=Tr(A[1]),A.length!==2?R.push(new Sn(c,A,`filter array for "${A[0]}" operator must have 2 elements`)):M!=="string"&&R.push(new Sn(`${c}[1]`,A[1],`string expected, ${M} found`))}return R}function gr(h,A){const c=h.key,y=h.validateSpec,M=h.style,R=h.styleSpec,P=h.value,G=h.objectKey,H=R[`${A}_${h.layerType}`];if(!H)return[];const ie=G.match(/^(.*)-transition$/);if(A==="paint"&&ie&&H[ie[1]]&&H[ie[1]].transition)return y({key:c,value:P,valueSpec:R.transition,style:M,styleSpec:R});const Ae=h.valueSpec||H[G];if(!Ae)return[new Sn(c,P,`unknown property "${G}"`)];let ve;if(Tr(P)==="string"&&BA(Ae)&&!Ae.tokens&&(ve=/^{([^}]+)}$/.exec(P)))return[new Sn(c,P,`"${G}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ve[1])} }\`.`)];const Ke=[];return h.layerType==="symbol"&&(G==="text-field"&&M&&!M.glyphs&&Ke.push(new Sn(c,P,'use of "text-field" requires a style "glyphs" property')),G==="text-font"&&sc(il(P))&&ms(P.type)==="identity"&&Ke.push(new Sn(c,P,'"text-font" does not support identity functions'))),Ke.concat(y({key:h.key,value:P,valueSpec:Ae,style:M,styleSpec:R,expressionContext:"property",propertyType:A,propertyKey:G}))}function ps(h){return gr(h,"paint")}function Jc(h){return gr(h,"layout")}function Sh(h){let A=[];const c=h.value,y=h.key,M=h.style,R=h.styleSpec;if(Tr(c)!=="object")return[new Sn(y,c,`object expected, ${Tr(c)} found`)];c.type||c.ref||A.push(new Sn(y,c,'either "type" or "ref" is required'));let P=ms(c.type);const G=ms(c.ref);if(c.id){const H=ms(c.id);for(let ie=0;ie<h.arrayIndex;ie++){const Ae=M.layers[ie];ms(Ae.id)===H&&A.push(new Sn(y,c.id,`duplicate layer id "${c.id}", previously used at line ${Ae.id.__line__}`))}}if("ref"in c){let H;["type","source","source-layer","filter","layout"].forEach(ie=>{ie in c&&A.push(new Sn(y,c[ie],`"${ie}" is prohibited for ref layers`))}),M.layers.forEach(ie=>{ms(ie.id)===G&&(H=ie)}),H?H.ref?A.push(new Sn(y,c.ref,"ref cannot reference another ref layer")):P=ms(H.type):A.push(new Sn(y,c.ref,`ref layer "${G}" not found`))}else if(P!=="background")if(c.source){const H=M.sources&&M.sources[c.source],ie=H&&ms(H.type);H?ie==="vector"&&P==="raster"?A.push(new Sn(y,c.source,`layer "${c.id}" requires a raster source`)):ie!=="raster-dem"&&P==="hillshade"||ie!=="raster-dem"&&P==="color-relief"?A.push(new Sn(y,c.source,`layer "${c.id}" requires a raster-dem source`)):ie==="raster"&&P!=="raster"?A.push(new Sn(y,c.source,`layer "${c.id}" requires a vector source`)):ie!=="vector"||c["source-layer"]?ie==="raster-dem"&&P!=="hillshade"&&P!=="color-relief"?A.push(new Sn(y,c.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):P!=="line"||!c.paint||!c.paint["line-gradient"]||ie==="geojson"&&H.lineMetrics||A.push(new Sn(y,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):A.push(new Sn(y,c,`layer "${c.id}" must specify a "source-layer"`)):A.push(new Sn(y,c.source,`source "${c.source}" not found`))}else A.push(new Sn(y,c,'missing required property "source"'));return A=A.concat(Fs({key:y,value:c,valueSpec:R.layer,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,objectElementValidators:{"*":()=>[],type:()=>h.validateSpec({key:`${y}.type`,value:c.type,valueSpec:R.layer.type,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,object:c,objectKey:"type"}),filter:Ga,layout:H=>Fs({layer:c,key:H.key,value:H.value,style:H.style,styleSpec:H.styleSpec,validateSpec:H.validateSpec,objectElementValidators:{"*":ie=>Jc(lo({layerType:P},ie))}}),paint:H=>Fs({layer:c,key:H.key,value:H.value,style:H.style,styleSpec:H.styleSpec,validateSpec:H.validateSpec,objectElementValidators:{"*":ie=>ps(lo({layerType:P},ie))}})}})),A}function Ro(h){const A=h.value,c=h.key,y=Tr(A);return y!=="string"?[new Sn(c,A,`string expected, ${y} found`)]:[]}const eh={promoteId:function({key:h,value:A}){if(Tr(A)==="string")return Ro({key:h,value:A});{const c=[];for(const y in A)c.push(...Ro({key:`${h}.${y}`,value:A[y]}));return c}}};function TA(h){const A=h.value,c=h.key,y=h.styleSpec,M=h.style,R=h.validateSpec;if(!A.type)return[new Sn(c,A,'"type" is required')];const P=ms(A.type);let G;switch(P){case"vector":case"raster":return G=Fs({key:c,value:A,valueSpec:y[`source_${P.replace("-","_")}`],style:h.style,styleSpec:y,objectElementValidators:eh,validateSpec:R}),G;case"raster-dem":return G=function(H){var ie;const Ae=(ie=H.sourceName)!==null&&ie!==void 0?ie:"",ve=H.value,Ke=H.styleSpec,Qe=Ke.source_raster_dem,Ve=H.style;let et=[];const ut=Tr(ve);if(ve===void 0)return et;if(ut!=="object")return et.push(new Sn("source_raster_dem",ve,`object expected, ${ut} found`)),et;const Mt=ms(ve.encoding)==="custom",Qt=["redFactor","greenFactor","blueFactor","baseShift"],Dt=H.value.encoding?`"${H.value.encoding}"`:"Default";for(const zt in ve)!Mt&&Qt.includes(zt)?et.push(new Sn(zt,ve[zt],`In "${Ae}": "${zt}" is only valid when "encoding" is set to "custom". ${Dt} encoding found`)):Qe[zt]?et=et.concat(H.validateSpec({key:zt,value:ve[zt],valueSpec:Qe[zt],validateSpec:H.validateSpec,style:Ve,styleSpec:Ke})):et.push(new Sn(zt,ve[zt],`unknown property "${zt}"`));return et}({sourceName:c,value:A,style:h.style,styleSpec:y,validateSpec:R}),G;case"geojson":if(G=Fs({key:c,value:A,valueSpec:y.source_geojson,style:M,styleSpec:y,validateSpec:R,objectElementValidators:eh}),A.cluster)for(const H in A.clusterProperties){const[ie,Ae]=A.clusterProperties[H],ve=typeof ie=="string"?[ie,["accumulated"],["get",H]]:ie;G.push(...eu({key:`${c}.${H}.map`,value:Ae,expressionContext:"cluster-map"})),G.push(...eu({key:`${c}.${H}.reduce`,value:ve,expressionContext:"cluster-reduce"}))}return G;case"video":return Fs({key:c,value:A,valueSpec:y.source_video,style:M,validateSpec:R,styleSpec:y});case"image":return Fs({key:c,value:A,valueSpec:y.source_image,style:M,validateSpec:R,styleSpec:y});case"canvas":return[new Sn(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Vs({key:`${c}.type`,value:A.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Od(h){const A=h.value,c=h.styleSpec,y=c.light,M=h.style;let R=[];const P=Tr(A);if(A===void 0)return R;if(P!=="object")return R=R.concat([new Sn("light",A,`object expected, ${P} found`)]),R;for(const G in A){const H=G.match(/^(.*)-transition$/);R=R.concat(H&&y[H[1]]&&y[H[1]].transition?h.validateSpec({key:G,value:A[G],valueSpec:c.transition,validateSpec:h.validateSpec,style:M,styleSpec:c}):y[G]?h.validateSpec({key:G,value:A[G],valueSpec:y[G],validateSpec:h.validateSpec,style:M,styleSpec:c}):[new Sn(G,A[G],`unknown property "${G}"`)])}return R}function Jd(h){const A=h.value,c=h.styleSpec,y=c.sky,M=h.style,R=Tr(A);if(A===void 0)return[];if(R!=="object")return[new Sn("sky",A,`object expected, ${R} found`)];let P=[];for(const G in A)P=P.concat(y[G]?h.validateSpec({key:G,value:A[G],valueSpec:y[G],style:M,styleSpec:c}):[new Sn(G,A[G],`unknown property "${G}"`)]);return P}function wm(h){const A=h.value,c=h.styleSpec,y=c.terrain,M=h.style;let R=[];const P=Tr(A);if(A===void 0)return R;if(P!=="object")return R=R.concat([new Sn("terrain",A,`object expected, ${P} found`)]),R;for(const G in A)R=R.concat(y[G]?h.validateSpec({key:G,value:A[G],valueSpec:y[G],validateSpec:h.validateSpec,style:M,styleSpec:c}):[new Sn(G,A[G],`unknown property "${G}"`)]);return R}function ba(h){let A=[];const c=h.value,y=h.key;if(Array.isArray(c)){const M=[],R=[];for(const P in c)c[P].id&&M.includes(c[P].id)&&A.push(new Sn(y,c,`all the sprites' ids must be unique, but ${c[P].id} is duplicated`)),M.push(c[P].id),c[P].url&&R.includes(c[P].url)&&A.push(new Sn(y,c,`all the sprites' URLs must be unique, but ${c[P].url} is duplicated`)),R.push(c[P].url),A=A.concat(Fs({key:`${y}[${P}]`,value:c[P],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:h.validateSpec}));return A}return Ro({key:y,value:c})}function wh(h){return A=h.value,A&&A.constructor===Object?[]:[new Sn(h.key,h.value,`object expected, ${Tr(h.value)} found`)];var A}const th={"*":()=>[],array:Xd,boolean:function(h){const A=h.value,c=h.key,y=Tr(A);return y!=="boolean"?[new Sn(c,A,`boolean expected, ${y} found`)]:[]},number:zu,color:rt,constants:Zd,enum:Vs,filter:Ga,function:Mh,layer:Sh,object:Fs,source:TA,light:Od,sky:Jd,terrain:wm,projection:function(h){const A=h.value,c=h.styleSpec,y=c.projection,M=h.style,R=Tr(A);if(A===void 0)return[];if(R!=="object")return[new Sn("projection",A,`object expected, ${R} found`)];let P=[];for(const G in A)P=P.concat(y[G]?h.validateSpec({key:G,value:A[G],valueSpec:y[G],style:M,styleSpec:c}):[new Sn(G,A[G],`unknown property "${G}"`)]);return P},projectionDefinition:function(h){const A=h.key;let c=h.value;c=c instanceof String?c.valueOf():c;const y=Tr(c);return y!=="array"||function(M){return Array.isArray(M)&&M.length===3&&typeof M[0]=="string"&&typeof M[1]=="string"&&typeof M[2]=="number"}(c)||function(M){return!!["interpolate","step","literal"].includes(M[0])}(c)?["array","string"].includes(y)?[]:[new Sn(A,c,`projection expected, invalid type "${y}" found`)]:[new Sn(A,c,`projection expected, invalid array ${JSON.stringify(c)} found`)]},string:Ro,formatted:function(h){return Ro(h).length===0?[]:eu(h)},resolvedImage:function(h){return Ro(h).length===0?[]:eu(h)},padding:function(h){const A=h.key,c=h.value;if(Tr(c)==="array"){if(c.length<1||c.length>4)return[new Sn(A,c,`padding requires 1 to 4 values; ${c.length} values found`)];const y={type:"number"};let M=[];for(let R=0;R<c.length;R++)M=M.concat(h.validateSpec({key:`${A}[${R}]`,value:c[R],validateSpec:h.validateSpec,valueSpec:y}));return M}return zu({key:A,value:c,valueSpec:{}})},numberArray:function(h){const A=h.key,c=h.value;if(Tr(c)==="array"){const y={type:"number"};if(c.length<1)return[new Sn(A,c,"array length at least 1 expected, length 0 found")];let M=[];for(let R=0;R<c.length;R++)M=M.concat(h.validateSpec({key:`${A}[${R}]`,value:c[R],validateSpec:h.validateSpec,valueSpec:y}));return M}return zu({key:A,value:c,valueSpec:{}})},colorArray:function(h){const A=h.key,c=h.value;if(Tr(c)==="array"){if(c.length<1)return[new Sn(A,c,"array length at least 1 expected, length 0 found")];let y=[];for(let M=0;M<c.length;M++)y=y.concat(rt({key:`${A}[${M}]`,value:c[M]}));return y}return rt({key:A,value:c})},variableAnchorOffsetCollection:function(h){const A=h.key,c=h.value,y=Tr(c),M=h.styleSpec;if(y!=="array"||c.length<1||c.length%2!=0)return[new Sn(A,c,"variableAnchorOffsetCollection requires a non-empty array of even length")];let R=[];for(let P=0;P<c.length;P+=2)R=R.concat(Vs({key:`${A}[${P}]`,value:c[P],valueSpec:M.layout_symbol["text-anchor"]})),R=R.concat(Xd({key:`${A}[${P+1}]`,value:c[P+1],valueSpec:{length:2,value:"number"},validateSpec:h.validateSpec,style:h.style,styleSpec:M}));return R},sprite:ba,state:wh};function Nu(h){const A=h.value,c=h.valueSpec,y=h.styleSpec;return h.validateSpec=Nu,c.expression&&sc(ms(A))?Mh(h):c.expression&&OA(il(A))?eu(h):c.type&&th[c.type]?th[c.type](h):Fs(lo({},h,{valueSpec:c.type?y[c.type]:c}))}function ef(h){const A=h.value,c=h.key,y=Ro(h);return y.length||(A.indexOf("{fontstack}")===-1&&y.push(new Sn(c,A,'"glyphs" url must include a "{fontstack}" token')),A.indexOf("{range}")===-1&&y.push(new Sn(c,A,'"glyphs" url must include a "{range}" token'))),y}function rl(h,A=it){let c=[];return c=c.concat(Nu({key:"",value:h,valueSpec:A.$root,styleSpec:A,style:h,validateSpec:Nu,objectElementValidators:{glyphs:ef,"*":()=>[]}})),h.constants&&(c=c.concat(Zd({key:"constants",value:h.constants}))),Vh(c)}function Ja(h){return function(A){return h({...A,validateSpec:Nu})}}function Vh(h){return[].concat(h).sort((A,c)=>A.line-c.line)}function AA(h){return function(...A){return Vh(h.apply(this,A))}}rl.source=AA(Ja(TA)),rl.sprite=AA(Ja(ba)),rl.glyphs=AA(Ja(ef)),rl.light=AA(Ja(Od)),rl.sky=AA(Ja(Jd)),rl.terrain=AA(Ja(wm)),rl.state=AA(Ja(wh)),rl.layer=AA(Ja(Sh)),rl.filter=AA(Ja(Ga)),rl.paintProperty=AA(Ja(ps)),rl.layoutProperty=AA(Ja(Jc));const Id=rl,tf=Id.light,Cl=Id.sky,Oc=Id.paintProperty,Uf=Id.layoutProperty;function $h(h,A){let c=!1;if(A&&A.length)for(const y of A)h.fire(new ht(new Error(y.message))),c=!0;return c}class Ca{constructor(A,c,y){const M=this.cells=[];if(A instanceof ArrayBuffer){this.arrayBuffer=A;const P=new Int32Array(this.arrayBuffer);A=P[0],this.d=(c=P[1])+2*(y=P[2]);for(let H=0;H<this.d*this.d;H++){const ie=P[3+H],Ae=P[3+H+1];M.push(ie===Ae?null:P.subarray(ie,Ae))}const G=P[3+M.length+1];this.keys=P.subarray(P[3+M.length],G),this.bboxes=P.subarray(G),this.insert=this._insertReadonly}else{this.d=c+2*y;for(let P=0;P<this.d*this.d;P++)M.push([]);this.keys=[],this.bboxes=[]}this.n=c,this.extent=A,this.padding=y,this.scale=c/A,this.uid=0;const R=y/c*A;this.min=-R,this.max=A+R}insert(A,c,y,M,R){this._forEachCell(c,y,M,R,this._insertCell,this.uid++,void 0,void 0),this.keys.push(A),this.bboxes.push(c),this.bboxes.push(y),this.bboxes.push(M),this.bboxes.push(R)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(A,c,y,M,R,P){this.cells[R].push(P)}query(A,c,y,M,R){const P=this.min,G=this.max;if(A<=P&&c<=P&&G<=y&&G<=M&&!R)return Array.prototype.slice.call(this.keys);{const H=[];return this._forEachCell(A,c,y,M,this._queryCell,H,{},R),H}}_queryCell(A,c,y,M,R,P,G,H){const ie=this.cells[R];if(ie!==null){const Ae=this.keys,ve=this.bboxes;for(let Ke=0;Ke<ie.length;Ke++){const Qe=ie[Ke];if(G[Qe]===void 0){const Ve=4*Qe;(H?H(ve[Ve+0],ve[Ve+1],ve[Ve+2],ve[Ve+3]):A<=ve[Ve+2]&&c<=ve[Ve+3]&&y>=ve[Ve+0]&&M>=ve[Ve+1])?(G[Qe]=!0,P.push(Ae[Qe])):G[Qe]=!1}}}}_forEachCell(A,c,y,M,R,P,G,H){const ie=this._convertToCellCoord(A),Ae=this._convertToCellCoord(c),ve=this._convertToCellCoord(y),Ke=this._convertToCellCoord(M);for(let Qe=ie;Qe<=ve;Qe++)for(let Ve=Ae;Ve<=Ke;Ve++){const et=this.d*Ve+Qe;if((!H||H(this._convertFromCellCoord(Qe),this._convertFromCellCoord(Ve),this._convertFromCellCoord(Qe+1),this._convertFromCellCoord(Ve+1)))&&R.call(this,A,c,y,M,et,P,G,H))return}}_convertFromCellCoord(A){return(A-this.padding)/this.scale}_convertToCellCoord(A){return Math.max(0,Math.min(this.d-1,Math.floor(A*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const A=this.cells,c=3+this.cells.length+1+1;let y=0;for(let P=0;P<this.cells.length;P++)y+=this.cells[P].length;const M=new Int32Array(c+y+this.keys.length+this.bboxes.length);M[0]=this.extent,M[1]=this.n,M[2]=this.padding;let R=c;for(let P=0;P<A.length;P++){const G=A[P];M[3+P]=R,M.set(G,R),R+=G.length}return M[3+A.length]=R,M.set(this.keys,R),R+=this.keys.length,M[3+A.length+1]=R,M.set(this.bboxes,R),R+=this.bboxes.length,M.buffer}static serialize(A,c){const y=A.toArrayBuffer();return c&&c.push(y),{buffer:y}}static deserialize(A){return new Ca(A.buffer)}}const Zr={};function ci(h,A,c={}){if(Zr[h])throw new Error(`${h} is already registered.`);Object.defineProperty(A,"_classRegistryKey",{value:h,writeable:!1}),Zr[h]={klass:A,omit:c.omit||[],shallow:c.shallow||[]}}ci("Object",Object),ci("Set",Set),ci("TransferableGridIndex",Ca),ci("Color",br),ci("Error",Error),ci("AJAXError",We),ci("ResolvedImage",Za),ci("StylePropertyFunction",Tl),ci("StyleExpression",Vc,{omit:["_evaluator"]}),ci("ZoomDependentExpression",Hh),ci("ZoomConstantExpression",xh),ci("CompoundExpression",Il,{omit:["_evaluate"]});for(const h in wA)wA[h]._classRegistryKey||ci(`Expression_${h}`,wA[h]);function Gu(h){return h&&typeof ArrayBuffer<"u"&&(h instanceof ArrayBuffer||h.constructor&&h.constructor.name==="ArrayBuffer")}function ju(h){return h.$name||h.constructor._classRegistryKey}function Zh(h){return!function(A){if(A===null||typeof A!="object")return!1;const c=ju(A);return!(!c||c==="Object")}(h)&&(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||h instanceof Blob||h instanceof Error||Gu(h)||Jn(h)||ArrayBuffer.isView(h)||h instanceof ImageData)}function Ic(h,A){if(Zh(h))return(Gu(h)||Jn(h))&&A&&A.push(h),ArrayBuffer.isView(h)&&A&&A.push(h.buffer),h instanceof ImageData&&A&&A.push(h.data.buffer),h;if(Array.isArray(h)){const R=[];for(const P of h)R.push(Ic(P,A));return R}if(typeof h!="object")throw new Error("can't serialize object of type "+typeof h);const c=ju(h);if(!c)throw new Error(`can't serialize object of unregistered class ${h.constructor.name}`);if(!Zr[c])throw new Error(`${c} is not registered.`);const{klass:y}=Zr[c],M=y.serialize?y.serialize(h,A):{};if(y.serialize){if(A&&M===A[A.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const R in h){if(!h.hasOwnProperty(R)||Zr[c].omit.indexOf(R)>=0)continue;const P=h[R];M[R]=Zr[c].shallow.indexOf(R)>=0?P:Ic(P,A)}h instanceof Error&&(M.message=h.message)}if(M.$name)throw new Error("$name property is reserved for worker serialization logic.");return c!=="Object"&&(M.$name=c),M}function gu(h){if(Zh(h))return h;if(Array.isArray(h))return h.map(gu);if(typeof h!="object")throw new Error("can't deserialize object of type "+typeof h);const A=ju(h)||"Object";if(!Zr[A])throw new Error(`can't deserialize unregistered class ${A}`);const{klass:c}=Zr[A];if(!c)throw new Error(`can't deserialize unregistered class ${A}`);if(c.deserialize)return c.deserialize(h);const y=Object.create(c.prototype);for(const M of Object.keys(h)){if(M==="$name")continue;const R=h[M];y[M]=Zr[A].shallow.indexOf(M)>=0?R:gu(R)}return y}class nf{constructor(){this.first=!0}update(A,c){const y=Math.floor(A);return this.first?(this.first=!1,this.lastIntegerZoom=y,this.lastIntegerZoomTime=0,this.lastZoom=A,this.lastFloorZoom=y,!0):(this.lastFloorZoom>y?(this.lastIntegerZoom=y+1,this.lastIntegerZoomTime=c):this.lastFloorZoom<y&&(this.lastIntegerZoom=y,this.lastIntegerZoomTime=c),A!==this.lastZoom&&(this.lastZoom=A,this.lastFloorZoom=y,!0))}}const to={"Latin-1 Supplement":h=>h>=128&&h<=255,"Hangul Jamo":h=>h>=4352&&h<=4607,Khmer:h=>h>=6016&&h<=6143,"General Punctuation":h=>h>=8192&&h<=8303,"Letterlike Symbols":h=>h>=8448&&h<=8527,"Number Forms":h=>h>=8528&&h<=8591,"Miscellaneous Technical":h=>h>=8960&&h<=9215,"Control Pictures":h=>h>=9216&&h<=9279,"Optical Character Recognition":h=>h>=9280&&h<=9311,"Enclosed Alphanumerics":h=>h>=9312&&h<=9471,"Geometric Shapes":h=>h>=9632&&h<=9727,"Miscellaneous Symbols":h=>h>=9728&&h<=9983,"Miscellaneous Symbols and Arrows":h=>h>=11008&&h<=11263,"Ideographic Description Characters":h=>h>=12272&&h<=12287,"CJK Symbols and Punctuation":h=>h>=12288&&h<=12351,Hiragana:h=>h>=12352&&h<=12447,Katakana:h=>h>=12448&&h<=12543,Kanbun:h=>h>=12688&&h<=12703,"CJK Strokes":h=>h>=12736&&h<=12783,"Enclosed CJK Letters and Months":h=>h>=12800&&h<=13055,"CJK Compatibility":h=>h>=13056&&h<=13311,"Yijing Hexagram Symbols":h=>h>=19904&&h<=19967,"CJK Unified Ideographs":h=>h>=19968&&h<=40959,"Hangul Syllables":h=>h>=44032&&h<=55215,"Private Use Area":h=>h>=57344&&h<=63743,"Vertical Forms":h=>h>=65040&&h<=65055,"CJK Compatibility Forms":h=>h>=65072&&h<=65103,"Small Form Variants":h=>h>=65104&&h<=65135,"Halfwidth and Fullwidth Forms":h=>h>=65280&&h<=65519};function Gl(h){for(const A of h)if(yu(A.charCodeAt(0)))return!0;return!1}function Eh(h){for(const A of h)if(!Ac(A.charCodeAt(0)))return!1;return!0}function lc(h){const A=h.map(c=>{try{return new RegExp(`\\p{sc=${c}}`,"u").source}catch{return null}}).filter(c=>c);return new RegExp(A.join("|"),"u")}const kA=lc(["Arab","Dupl","Mong","Ougr","Syrc"]);function Ac(h){return!kA.test(String.fromCodePoint(h))}const Bh=lc(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function yu(h){return!(h!==746&&h!==747&&(h<4352||!(to["CJK Compatibility Forms"](h)&&!(h>=65097&&h<=65103)||to["CJK Compatibility"](h)||to["CJK Strokes"](h)||!(!to["CJK Symbols and Punctuation"](h)||h>=12296&&h<=12305||h>=12308&&h<=12319||h===12336)||to["Enclosed CJK Letters and Months"](h)||to["Ideographic Description Characters"](h)||to.Kanbun(h)||to.Katakana(h)&&h!==12540||!(!to["Halfwidth and Fullwidth Forms"](h)||h===65288||h===65289||h===65293||h>=65306&&h<=65310||h===65339||h===65341||h===65343||h>=65371&&h<=65503||h===65507||h>=65512&&h<=65519)||!(!to["Small Form Variants"](h)||h>=65112&&h<=65118||h>=65123&&h<=65126)||to["Vertical Forms"](h)||to["Yijing Hexagram Symbols"](h)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(h))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(h))||Bh.test(String.fromCodePoint(h)))))}function nh(h){return!(yu(h)||function(A){return!!(to["Latin-1 Supplement"](A)&&(A===167||A===169||A===174||A===177||A===188||A===189||A===190||A===215||A===247)||to["General Punctuation"](A)&&(A===8214||A===8224||A===8225||A===8240||A===8241||A===8251||A===8252||A===8258||A===8263||A===8264||A===8265||A===8273)||to["Letterlike Symbols"](A)||to["Number Forms"](A)||to["Miscellaneous Technical"](A)&&(A>=8960&&A<=8967||A>=8972&&A<=8991||A>=8996&&A<=9e3||A===9003||A>=9085&&A<=9114||A>=9150&&A<=9165||A===9167||A>=9169&&A<=9179||A>=9186&&A<=9215)||to["Control Pictures"](A)&&A!==9251||to["Optical Character Recognition"](A)||to["Enclosed Alphanumerics"](A)||to["Geometric Shapes"](A)||to["Miscellaneous Symbols"](A)&&!(A>=9754&&A<=9759)||to["Miscellaneous Symbols and Arrows"](A)&&(A>=11026&&A<=11055||A>=11088&&A<=11097||A>=11192&&A<=11243)||to["CJK Symbols and Punctuation"](A)||to.Katakana(A)||to["Private Use Area"](A)||to["CJK Compatibility Forms"](A)||to["Small Form Variants"](A)||to["Halfwidth and Fullwidth Forms"](A)||A===8734||A===8756||A===8757||A>=9984&&A<=10087||A>=10102&&A<=10131||A===65532||A===65533)}(h))}const tu=lc(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function _l(h){return tu.test(String.fromCodePoint(h))}function Em(h,A){return!(!A&&_l(h)||h>=2304&&h<=3583||h>=3840&&h<=4255||to.Khmer(h))}function rf(h){for(const A of h)if(_l(A.charCodeAt(0)))return!0;return!1}const jl=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(h){this.pluginStatus=h.pluginStatus,this.pluginURL=h.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(h){if(jl.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=h.applyArabicShaping,this.processBidirectionalText=h.processBidirectionalText,this.processStyledBidirectionalText=h.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(h,A){return o(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(h.pluginStatus!=="loading")return this.setState(h),h;const c=h.pluginURL,y=new Promise(R=>{this.loadScriptResolve=R});A(c);const M=new Promise(R=>setTimeout(()=>R(),this.TIMEOUT));if(yield Promise.race([y,M]),this.isParsed()){const R={pluginStatus:"loaded",pluginURL:c};return this.setState(R),R}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${c}`)})}};class Po{constructor(A,c){this.zoom=A,c?(this.now=c.now||0,this.fadeDuration=c.fadeDuration||0,this.zoomHistory=c.zoomHistory||new nf,this.transition=c.transition||{},this.globalState=c.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new nf,this.transition={},this.globalState={})}isSupportedScript(A){return function(c,y){for(const M of c)if(!Em(M.charCodeAt(0),y))return!1;return!0}(A,jl.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const A=this.zoom,c=A-Math.floor(A),y=this.crossFadingFactor();return A>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:c+(1-c)*y}:{fromScale:.5,toScale:1,t:1-(1-y)*c}}}class Wl{constructor(A,c){this.property=A,this.value=c,this.expression=function(y,M){if(sc(y))return new Tl(y,M);if(OA(y)){const R=IA(y,M);if(R.result==="error")throw new Error(R.value.map(P=>`${P.key}: ${P.message}`).join(", "));return R.value}{let R=y;return M.type==="color"&&typeof y=="string"?R=br.parse(y):M.type!=="padding"||typeof y!="number"&&!Array.isArray(y)?M.type!=="numberArray"||typeof y!="number"&&!Array.isArray(y)?M.type!=="colorArray"||typeof y!="string"&&!Array.isArray(y)?M.type==="variableAnchorOffsetCollection"&&Array.isArray(y)?R=za.parse(y):M.type==="projectionDefinition"&&typeof y=="string"&&(R=ya.parse(y)):R=oa.parse(y):R=Sa.parse(y):R=Fa.parse(y),{globalStateRefs:new Set,kind:"constant",evaluate:()=>R}}}(c===void 0?A.specification.default:c,A.specification),this._evaluate=this.expression.evaluate}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(A,c,y){return this.property.possiblyEvaluate(this,A,c,y)}setGlobalState(A){this.expression.evaluate=(c,y,M,R,P,G)=>(c.globalState=A,this._evaluate.call(this.expression,c,y,M,R,P,G))}}class Xh{constructor(A){this.property=A,this.value=new Wl(A,void 0)}transitioned(A,c){return new vu(this.property,this.value,c,Le({},A.transition,this.transition),A.now)}untransitioned(){return new vu(this.property,this.value,null,{},0)}}class Lf{constructor(A){this._properties=A,this._values=Object.create(A.defaultTransitionablePropertyValues)}getValue(A){return bt(this._values[A].value.value)}setValue(A,c){Object.prototype.hasOwnProperty.call(this._values,A)||(this._values[A]=new Xh(this._values[A].property)),this._values[A].value=new Wl(this._values[A].property,c===null?void 0:bt(c))}getTransition(A){return bt(this._values[A].transition)}setTransition(A,c){Object.prototype.hasOwnProperty.call(this._values,A)||(this._values[A]=new Xh(this._values[A].property)),this._values[A].transition=bt(c)||void 0}serialize(){const A={};for(const c of Object.keys(this._values)){const y=this.getValue(c);y!==void 0&&(A[c]=y);const M=this.getTransition(c);M!==void 0&&(A[`${c}-transition`]=M)}return A}transitioned(A,c){const y=new no(this._properties);for(const M of Object.keys(this._values))y._values[M]=this._values[M].transitioned(A,c._values[M]);return y}untransitioned(){const A=new no(this._properties);for(const c of Object.keys(this._values))A._values[c]=this._values[c].untransitioned();return A}}class vu{constructor(A,c,y,M,R){this.property=A,this.value=c,this.begin=R+M.delay||0,this.end=this.begin+M.duration||0,A.specification.transition&&(M.delay||M.duration)&&(this.prior=y)}possiblyEvaluate(A,c,y){const M=A.now||0,R=this.value.possiblyEvaluate(A,c,y),P=this.prior;if(P){if(M>this.end)return this.prior=null,R;if(this.value.isDataDriven())return this.prior=null,R;if(M<this.begin)return P.possiblyEvaluate(A,c,y);{const G=(M-this.begin)/(this.end-this.begin);return this.property.interpolate(P.possiblyEvaluate(A,c,y),R,lt(G))}}return R}}class no{constructor(A){this._properties=A,this._values=Object.create(A.defaultTransitioningPropertyValues)}possiblyEvaluate(A,c,y){const M=new Wu(this._properties);for(const R of Object.keys(this._values))M._values[R]=this._values[R].possiblyEvaluate(A,c,y);return M}hasTransition(){for(const A of Object.keys(this._values))if(this._values[A].prior)return!0;return!1}}class Ko{constructor(A){this._properties=A,this._values=Object.create(A.defaultPropertyValues),this._globalState={}}hasValue(A){return this._values[A].value!==void 0}getValue(A){return bt(this._values[A].value)}setValue(A,c){this._values[A]=new Wl(this._values[A].property,c===null?void 0:bt(c)),this._values[A].setGlobalState(this._globalState)}serialize(){const A={};for(const c of Object.keys(this._values)){const y=this.getValue(c);y!==void 0&&(A[c]=y)}return A}possiblyEvaluate(A,c,y){const M=new Wu(this._properties);for(const R of Object.keys(this._values))M._values[R]=this._values[R].possiblyEvaluate(A,c,y);return M}setGlobalState(A){this._globalState=A;for(const c of Object.values(this._values))c.setGlobalState(A)}}class Rr{constructor(A,c,y){this.property=A,this.value=c,this.parameters=y}isConstant(){return this.value.kind==="constant"}constantOr(A){return this.value.kind==="constant"?this.value.value:A}evaluate(A,c,y,M){return this.property.evaluate(this.value,this.parameters,A,c,y,M)}}class Wu{constructor(A){this._properties=A,this._values=Object.create(A.defaultPossiblyEvaluatedValues)}get(A){return this._values[A]}}class Oi{constructor(A){this.specification=A}possiblyEvaluate(A,c){if(A.isDataDriven())throw new Error("Value should not be data driven");return A.expression.evaluate(c)}interpolate(A,c,y){const M=Ru[this.specification.type];return M?M(A,c,y):A}}class Ti{constructor(A,c){this.specification=A,this.overrides=c}possiblyEvaluate(A,c,y,M){return new Rr(this,A.expression.kind==="constant"||A.expression.kind==="camera"?{kind:"constant",value:A.expression.evaluate(c,null,{},y,M)}:A.expression,c)}interpolate(A,c,y){if(A.value.kind!=="constant"||c.value.kind!=="constant")return A;if(A.value.value===void 0||c.value.value===void 0)return new Rr(this,{kind:"constant",value:void 0},A.parameters);const M=Ru[this.specification.type];if(M){const R=M(A.value.value,c.value.value,y);return new Rr(this,{kind:"constant",value:R},A.parameters)}return A}evaluate(A,c,y,M,R,P){return A.kind==="constant"?A.value:A.evaluate(c,y,M,R,P)}}class Tc extends Ti{possiblyEvaluate(A,c,y,M){if(A.value===void 0)return new Rr(this,{kind:"constant",value:void 0},c);if(A.expression.kind==="constant"){const R=A.expression.evaluate(c,null,{},y,M),P=A.property.specification.type==="resolvedImage"&&typeof R!="string"?R.name:R,G=this._calculate(P,P,P,c);return new Rr(this,{kind:"constant",value:G},c)}if(A.expression.kind==="camera"){const R=this._calculate(A.expression.evaluate({zoom:c.zoom-1}),A.expression.evaluate({zoom:c.zoom}),A.expression.evaluate({zoom:c.zoom+1}),c);return new Rr(this,{kind:"constant",value:R},c)}return new Rr(this,A.expression,c)}evaluate(A,c,y,M,R,P){if(A.kind==="source"){const G=A.evaluate(c,y,M,R,P);return this._calculate(G,G,G,c)}return A.kind==="composite"?this._calculate(A.evaluate({zoom:Math.floor(c.zoom)-1},y,M),A.evaluate({zoom:Math.floor(c.zoom)},y,M),A.evaluate({zoom:Math.floor(c.zoom)+1},y,M),c):A.value}_calculate(A,c,y,M){return M.zoom>M.zoomHistory.lastIntegerZoom?{from:A,to:c}:{from:y,to:c}}interpolate(A){return A}}class DA{constructor(A){this.specification=A}possiblyEvaluate(A,c,y,M){if(A.value!==void 0){if(A.expression.kind==="constant"){const R=A.expression.evaluate(c,null,{},y,M);return this._calculate(R,R,R,c)}return this._calculate(A.expression.evaluate(new Po(Math.floor(c.zoom-1),c)),A.expression.evaluate(new Po(Math.floor(c.zoom),c)),A.expression.evaluate(new Po(Math.floor(c.zoom+1),c)),c)}}_calculate(A,c,y,M){return M.zoom>M.zoomHistory.lastIntegerZoom?{from:A,to:c}:{from:y,to:c}}interpolate(A){return A}}class uA{constructor(A){this.specification=A}possiblyEvaluate(A,c,y,M){return!!A.expression.evaluate(c,null,{},y,M)}interpolate(){return!1}}class sa{constructor(A){this.properties=A,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const c in A){const y=A[c];y.specification.overridable&&this.overridableProperties.push(c);const M=this.defaultPropertyValues[c]=new Wl(y,void 0),R=this.defaultTransitionablePropertyValues[c]=new Xh(y);this.defaultTransitioningPropertyValues[c]=R.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=M.possiblyEvaluate({})}}}ci("DataDrivenProperty",Ti),ci("DataConstantProperty",Oi),ci("CrossFadedDataDrivenProperty",Tc),ci("CrossFadedProperty",DA),ci("ColorRampProperty",uA);const go="-transition";class Ql extends kt{constructor(A,c){if(super(),this.id=A.id,this.type=A.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},A.type!=="custom"&&(this.metadata=A.metadata,this.minzoom=A.minzoom,this.maxzoom=A.maxzoom,this._globalState={},A.type!=="background"&&(this.source=A.source,this.sourceLayer=A["source-layer"],this.filter=A.filter,this._featureFilter=Bc(A.filter)),c.layout&&(this._unevaluatedLayout=new Ko(c.layout)),c.paint)){this._transitionablePaint=new Lf(c.paint);for(const y in A.paint)this.setPaintProperty(y,A.paint[y],{validate:!1});for(const y in A.layout)this.setLayoutProperty(y,A.layout[y],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Wu(c.paint)}}setFilter(A){this.filter=A,this._featureFilter=Bc(A)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(A){return A==="visibility"?this.visibility:this._unevaluatedLayout.getValue(A)}getLayoutAffectingGlobalStateRefs(){const A=new Set;if(this._unevaluatedLayout)for(const c in this._unevaluatedLayout._values){const y=this._unevaluatedLayout._values[c];for(const M of y.getGlobalStateRefs())A.add(M)}for(const c of this._featureFilter.getGlobalStateRefs())A.add(c);return A}getPaintAffectingGlobalStateRefs(){var A;const c=new globalThis.Map;if(this._transitionablePaint)for(const y in this._transitionablePaint._values){const M=this._transitionablePaint._values[y].value;for(const R of M.getGlobalStateRefs()){const P=(A=c.get(R))!==null&&A!==void 0?A:[];P.push({name:y,value:M.value}),c.set(R,P)}}return c}setLayoutProperty(A,c,y={}){c!=null&&this._validate(Uf,`layers.${this.id}.layout.${A}`,A,c,y)||(A!=="visibility"?this._unevaluatedLayout.setValue(A,c):this.visibility=c)}getPaintProperty(A){return A.endsWith(go)?this._transitionablePaint.getTransition(A.slice(0,-11)):this._transitionablePaint.getValue(A)}setPaintProperty(A,c,y={}){if(c!=null&&this._validate(Oc,`layers.${this.id}.paint.${A}`,A,c,y))return!1;if(A.endsWith(go))return this._transitionablePaint.setTransition(A.slice(0,-11),c||void 0),!1;{const M=this._transitionablePaint._values[A],R=M.property.specification["property-type"]==="cross-faded-data-driven",P=M.value.isDataDriven(),G=M.value;this._transitionablePaint.setValue(A,c),this._handleSpecialPaintPropertyUpdate(A);const H=this._transitionablePaint._values[A].value;return H.isDataDriven()||P||R||this._handleOverridablePaintPropertyUpdate(A,G,H)}}_handleSpecialPaintPropertyUpdate(A){}_handleOverridablePaintPropertyUpdate(A,c,y){return!1}isHidden(A){return!!(this.minzoom&&A<this.minzoom)||!!(this.maxzoom&&A>=this.maxzoom)||this.visibility==="none"}updateTransitions(A){this._transitioningPaint=this._transitionablePaint.transitioned(A,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(A,c){A.globalState=this._globalState,A.getCrossfadeParameters&&(this._crossfadeParameters=A.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(A,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(A,void 0,c)}setGlobalState(A){this._globalState=A,this._unevaluatedLayout&&this._unevaluatedLayout.setGlobalState(A)}serialize(){const A={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(A.layout=A.layout||{},A.layout.visibility=this.visibility),He(A,(c,y)=>!(c===void 0||y==="layout"&&!Object.keys(c).length||y==="paint"&&!Object.keys(c).length))}_validate(A,c,y,M,R={}){return(!R||R.validate!==!1)&&$h(this,A.call(Id,{key:c,layerType:this.type,objectKey:y,value:M,styleSpec:it,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const A in this.paint._values){const c=this.paint.get(A);if(c instanceof Rr&&BA(c.property.specification)&&(c.value.kind==="source"||c.value.kind==="composite")&&c.value.isStateDependent)return!0}return!1}}const Ff={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Jh{constructor(A,c){this._structArray=A,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Uo{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(A,c){return A._trim(),c&&(A.isTransferred=!0,c.push(A.arrayBuffer)),{length:A.length,arrayBuffer:A.arrayBuffer}}static deserialize(A){const c=Object.create(this.prototype);return c.arrayBuffer=A.arrayBuffer,c.length=A.length,c.capacity=A.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(A){this.reserve(A),this.length=A}reserve(A){if(A>this.capacity){this.capacity=Math.max(A,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ja(h,A=1){let c=0,y=0;return{members:h.map(M=>{const R=Ff[M.type].BYTES_PER_ELEMENT,P=c=ed(c,Math.max(A,R)),G=M.components||1;return y=Math.max(y,R),c+=R*G,{name:M.name,type:M.type,components:G,offset:P}}),size:ed(c,Math.max(y,A)),alignment:A}}function ed(h,A){return Math.ceil(h/A)*A}class Cu extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,c){const y=this.length;return this.resize(y+1),this.emplace(y,A,c)}emplace(A,c,y){const M=2*A;return this.int16[M+0]=c,this.int16[M+1]=y,A}}Cu.prototype.bytesPerElement=4,ci("StructArrayLayout2i4",Cu);class kc extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,c,y){const M=this.length;return this.resize(M+1),this.emplace(M,A,c,y)}emplace(A,c,y,M){const R=3*A;return this.int16[R+0]=c,this.int16[R+1]=y,this.int16[R+2]=M,A}}kc.prototype.bytesPerElement=6,ci("StructArrayLayout3i6",kc);class $s extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,c,y,M){const R=this.length;return this.resize(R+1),this.emplace(R,A,c,y,M)}emplace(A,c,y,M,R){const P=4*A;return this.int16[P+0]=c,this.int16[P+1]=y,this.int16[P+2]=M,this.int16[P+3]=R,A}}$s.prototype.bytesPerElement=8,ci("StructArrayLayout4i8",$s);class es extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,c,y,M,R,P){const G=this.length;return this.resize(G+1),this.emplace(G,A,c,y,M,R,P)}emplace(A,c,y,M,R,P,G){const H=6*A;return this.int16[H+0]=c,this.int16[H+1]=y,this.int16[H+2]=M,this.int16[H+3]=R,this.int16[H+4]=P,this.int16[H+5]=G,A}}es.prototype.bytesPerElement=12,ci("StructArrayLayout2i4i12",es);class cA extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,c,y,M,R,P){const G=this.length;return this.resize(G+1),this.emplace(G,A,c,y,M,R,P)}emplace(A,c,y,M,R,P,G){const H=4*A,ie=8*A;return this.int16[H+0]=c,this.int16[H+1]=y,this.uint8[ie+4]=M,this.uint8[ie+5]=R,this.uint8[ie+6]=P,this.uint8[ie+7]=G,A}}cA.prototype.bytesPerElement=8,ci("StructArrayLayout2i4ub8",cA);class Dc extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(A,c){const y=this.length;return this.resize(y+1),this.emplace(y,A,c)}emplace(A,c,y){const M=2*A;return this.float32[M+0]=c,this.float32[M+1]=y,A}}Dc.prototype.bytesPerElement=8,ci("StructArrayLayout2f8",Dc);class uc extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(A,c,y,M,R,P,G,H,ie,Ae){const ve=this.length;return this.resize(ve+1),this.emplace(ve,A,c,y,M,R,P,G,H,ie,Ae)}emplace(A,c,y,M,R,P,G,H,ie,Ae,ve){const Ke=10*A;return this.uint16[Ke+0]=c,this.uint16[Ke+1]=y,this.uint16[Ke+2]=M,this.uint16[Ke+3]=R,this.uint16[Ke+4]=P,this.uint16[Ke+5]=G,this.uint16[Ke+6]=H,this.uint16[Ke+7]=ie,this.uint16[Ke+8]=Ae,this.uint16[Ke+9]=ve,A}}uc.prototype.bytesPerElement=20,ci("StructArrayLayout10ui20",uc);class cc extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(A,c,y,M,R,P,G,H,ie,Ae,ve,Ke){const Qe=this.length;return this.resize(Qe+1),this.emplace(Qe,A,c,y,M,R,P,G,H,ie,Ae,ve,Ke)}emplace(A,c,y,M,R,P,G,H,ie,Ae,ve,Ke,Qe){const Ve=12*A;return this.int16[Ve+0]=c,this.int16[Ve+1]=y,this.int16[Ve+2]=M,this.int16[Ve+3]=R,this.uint16[Ve+4]=P,this.uint16[Ve+5]=G,this.uint16[Ve+6]=H,this.uint16[Ve+7]=ie,this.int16[Ve+8]=Ae,this.int16[Ve+9]=ve,this.int16[Ve+10]=Ke,this.int16[Ve+11]=Qe,A}}cc.prototype.bytesPerElement=24,ci("StructArrayLayout4i4ui4i24",cc);class Yl extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(A,c,y){const M=this.length;return this.resize(M+1),this.emplace(M,A,c,y)}emplace(A,c,y,M){const R=3*A;return this.float32[R+0]=c,this.float32[R+1]=y,this.float32[R+2]=M,A}}Yl.prototype.bytesPerElement=12,ci("StructArrayLayout3f12",Yl);class td extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(A){const c=this.length;return this.resize(c+1),this.emplace(c,A)}emplace(A,c){return this.uint32[1*A+0]=c,A}}td.prototype.bytesPerElement=4,ci("StructArrayLayout1ul4",td);class nd extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(A,c,y,M,R,P,G,H,ie){const Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,A,c,y,M,R,P,G,H,ie)}emplace(A,c,y,M,R,P,G,H,ie,Ae){const ve=10*A,Ke=5*A;return this.int16[ve+0]=c,this.int16[ve+1]=y,this.int16[ve+2]=M,this.int16[ve+3]=R,this.int16[ve+4]=P,this.int16[ve+5]=G,this.uint32[Ke+3]=H,this.uint16[ve+8]=ie,this.uint16[ve+9]=Ae,A}}nd.prototype.bytesPerElement=20,ci("StructArrayLayout6i1ul2ui20",nd);class Td extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,c,y,M,R,P){const G=this.length;return this.resize(G+1),this.emplace(G,A,c,y,M,R,P)}emplace(A,c,y,M,R,P,G){const H=6*A;return this.int16[H+0]=c,this.int16[H+1]=y,this.int16[H+2]=M,this.int16[H+3]=R,this.int16[H+4]=P,this.int16[H+5]=G,A}}Td.prototype.bytesPerElement=12,ci("StructArrayLayout2i2i2i12",Td);class I extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,c,y,M,R){const P=this.length;return this.resize(P+1),this.emplace(P,A,c,y,M,R)}emplace(A,c,y,M,R,P){const G=4*A,H=8*A;return this.float32[G+0]=c,this.float32[G+1]=y,this.float32[G+2]=M,this.int16[H+6]=R,this.int16[H+7]=P,A}}I.prototype.bytesPerElement=16,ci("StructArrayLayout2f1f2i16",I);class s extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,c,y,M,R,P){const G=this.length;return this.resize(G+1),this.emplace(G,A,c,y,M,R,P)}emplace(A,c,y,M,R,P,G){const H=16*A,ie=4*A,Ae=8*A;return this.uint8[H+0]=c,this.uint8[H+1]=y,this.float32[ie+1]=M,this.float32[ie+2]=R,this.int16[Ae+6]=P,this.int16[Ae+7]=G,A}}s.prototype.bytesPerElement=16,ci("StructArrayLayout2ub2f2i16",s);class f extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(A,c,y){const M=this.length;return this.resize(M+1),this.emplace(M,A,c,y)}emplace(A,c,y,M){const R=3*A;return this.uint16[R+0]=c,this.uint16[R+1]=y,this.uint16[R+2]=M,A}}f.prototype.bytesPerElement=6,ci("StructArrayLayout3ui6",f);class _ extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(A,c,y,M,R,P,G,H,ie,Ae,ve,Ke,Qe,Ve,et,ut,Mt){const Qt=this.length;return this.resize(Qt+1),this.emplace(Qt,A,c,y,M,R,P,G,H,ie,Ae,ve,Ke,Qe,Ve,et,ut,Mt)}emplace(A,c,y,M,R,P,G,H,ie,Ae,ve,Ke,Qe,Ve,et,ut,Mt,Qt){const Dt=24*A,zt=12*A,ln=48*A;return this.int16[Dt+0]=c,this.int16[Dt+1]=y,this.uint16[Dt+2]=M,this.uint16[Dt+3]=R,this.uint32[zt+2]=P,this.uint32[zt+3]=G,this.uint32[zt+4]=H,this.uint16[Dt+10]=ie,this.uint16[Dt+11]=Ae,this.uint16[Dt+12]=ve,this.float32[zt+7]=Ke,this.float32[zt+8]=Qe,this.uint8[ln+36]=Ve,this.uint8[ln+37]=et,this.uint8[ln+38]=ut,this.uint32[zt+10]=Mt,this.int16[Dt+22]=Qt,A}}_.prototype.bytesPerElement=48,ci("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",_);class w extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(A,c,y,M,R,P,G,H,ie,Ae,ve,Ke,Qe,Ve,et,ut,Mt,Qt,Dt,zt,ln,Cn,Un,mi,ai,di,tr,Ai){const fi=this.length;return this.resize(fi+1),this.emplace(fi,A,c,y,M,R,P,G,H,ie,Ae,ve,Ke,Qe,Ve,et,ut,Mt,Qt,Dt,zt,ln,Cn,Un,mi,ai,di,tr,Ai)}emplace(A,c,y,M,R,P,G,H,ie,Ae,ve,Ke,Qe,Ve,et,ut,Mt,Qt,Dt,zt,ln,Cn,Un,mi,ai,di,tr,Ai,fi){const En=32*A,fr=16*A;return this.int16[En+0]=c,this.int16[En+1]=y,this.int16[En+2]=M,this.int16[En+3]=R,this.int16[En+4]=P,this.int16[En+5]=G,this.int16[En+6]=H,this.int16[En+7]=ie,this.uint16[En+8]=Ae,this.uint16[En+9]=ve,this.uint16[En+10]=Ke,this.uint16[En+11]=Qe,this.uint16[En+12]=Ve,this.uint16[En+13]=et,this.uint16[En+14]=ut,this.uint16[En+15]=Mt,this.uint16[En+16]=Qt,this.uint16[En+17]=Dt,this.uint16[En+18]=zt,this.uint16[En+19]=ln,this.uint16[En+20]=Cn,this.uint16[En+21]=Un,this.uint16[En+22]=mi,this.uint32[fr+12]=ai,this.float32[fr+13]=di,this.float32[fr+14]=tr,this.uint16[En+30]=Ai,this.uint16[En+31]=fi,A}}w.prototype.bytesPerElement=64,ci("StructArrayLayout8i15ui1ul2f2ui64",w);class k extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(A){const c=this.length;return this.resize(c+1),this.emplace(c,A)}emplace(A,c){return this.float32[1*A+0]=c,A}}k.prototype.bytesPerElement=4,ci("StructArrayLayout1f4",k);class N extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(A,c,y){const M=this.length;return this.resize(M+1),this.emplace(M,A,c,y)}emplace(A,c,y,M){const R=3*A;return this.uint16[6*A+0]=c,this.float32[R+1]=y,this.float32[R+2]=M,A}}N.prototype.bytesPerElement=12,ci("StructArrayLayout1ui2f12",N);class q extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(A,c,y){const M=this.length;return this.resize(M+1),this.emplace(M,A,c,y)}emplace(A,c,y,M){const R=4*A;return this.uint32[2*A+0]=c,this.uint16[R+2]=y,this.uint16[R+3]=M,A}}q.prototype.bytesPerElement=8,ci("StructArrayLayout1ul2ui8",q);class J extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(A,c){const y=this.length;return this.resize(y+1),this.emplace(y,A,c)}emplace(A,c,y){const M=2*A;return this.uint16[M+0]=c,this.uint16[M+1]=y,A}}J.prototype.bytesPerElement=4,ci("StructArrayLayout2ui4",J);class he extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(A){const c=this.length;return this.resize(c+1),this.emplace(c,A)}emplace(A,c){return this.uint16[1*A+0]=c,A}}he.prototype.bytesPerElement=2,ci("StructArrayLayout1ui2",he);class pe extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(A,c,y,M){const R=this.length;return this.resize(R+1),this.emplace(R,A,c,y,M)}emplace(A,c,y,M,R){const P=4*A;return this.float32[P+0]=c,this.float32[P+1]=y,this.float32[P+2]=M,this.float32[P+3]=R,A}}pe.prototype.bytesPerElement=16,ci("StructArrayLayout4f16",pe);class Ee extends Jh{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new m(this.anchorPointX,this.anchorPointY)}}Ee.prototype.size=20;class Se extends nd{get(A){return new Ee(this,A)}}ci("CollisionBoxArray",Se);class Ue extends Jh{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(A){this._structArray.uint8[this._pos1+37]=A}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(A){this._structArray.uint8[this._pos1+38]=A}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(A){this._structArray.uint32[this._pos4+10]=A}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ue.prototype.size=48;class Xe extends _{get(A){return new Ue(this,A)}}ci("PlacedSymbolArray",Xe);class At extends Jh{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(A){this._structArray.uint32[this._pos4+12]=A}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}At.prototype.size=64;class ct extends w{get(A){return new At(this,A)}}ci("SymbolInstanceArray",ct);class ft extends k{getoffsetX(A){return this.float32[1*A+0]}}ci("GlyphOffsetArray",ft);class xt extends kc{getx(A){return this.int16[3*A+0]}gety(A){return this.int16[3*A+1]}gettileUnitDistanceFromAnchor(A){return this.int16[3*A+2]}}ci("SymbolLineVertexArray",xt);class Ct extends Jh{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ct.prototype.size=12;class wt extends N{get(A){return new Ct(this,A)}}ci("TextAnchorOffsetArray",wt);class Pt extends Jh{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Pt.prototype.size=8;class Lt extends q{get(A){return new Pt(this,A)}}ci("FeatureIndexArray",Lt);class Bt extends Cu{}class Yt extends Cu{}class dn extends Cu{}class Xt extends es{}class nn extends cA{}class An extends Dc{}class qn extends uc{}class Qn extends cc{}class Tn extends Yl{}class bi extends td{}class cr extends Td{}class _o extends s{}class la extends f{}class Lo extends J{}const Ra=ja([{name:"a_pos",components:2,type:"Int16"}],4),{members:Aa}=Ra;class Er{constructor(A=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=A}prepareSegment(A,c,y,M){const R=this.segments[this.segments.length-1];return A>Er.MAX_VERTEX_ARRAY_LENGTH&&Ot(`Max vertices per segment is ${Er.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${A}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Er.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!R||R.vertexLength+A>Er.MAX_VERTEX_ARRAY_LENGTH||R.sortKey!==M?this.createNewSegment(c,y,M):R}createNewSegment(A,c,y){const M={vertexOffset:A.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0,vaos:{}};return y!==void 0&&(M.sortKey=y),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(M),M}getOrCreateLatestSegment(A,c,y){return this.prepareSegment(0,A,c,y)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const A of this.segments)for(const c in A.vaos)A.vaos[c].destroy()}static simpleSegment(A,c,y,M){return new Er([{vertexOffset:A,primitiveOffset:c,vertexLength:y,primitiveLength:M,vaos:{},sortKey:0}])}}function Qo(h,A){return 256*(h=St(Math.floor(h),0,255))+St(Math.floor(A),0,255)}Er.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ci("SegmentVector",Er);const ts=ja([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Wa,Bs,Os,Qu={exports:{}},hc={exports:{}},ql={exports:{}},Oh=function(){if(Os)return Qu.exports;Os=1;var h=(Wa||(Wa=1,hc.exports=function(c,y){var M,R,P,G,H,ie,Ae,ve;for(R=c.length-(M=3&c.length),P=y,H=3432918353,ie=461845907,ve=0;ve<R;)Ae=255&c.charCodeAt(ve)|(255&c.charCodeAt(++ve))<<8|(255&c.charCodeAt(++ve))<<16|(255&c.charCodeAt(++ve))<<24,++ve,P=27492+(65535&(G=5*(65535&(P=(P^=Ae=(65535&(Ae=(Ae=(65535&Ae)*H+(((Ae>>>16)*H&65535)<<16)&4294967295)<<15|Ae>>>17))*ie+(((Ae>>>16)*ie&65535)<<16)&4294967295)<<13|P>>>19))+((5*(P>>>16)&65535)<<16)&4294967295))+((58964+(G>>>16)&65535)<<16);switch(Ae=0,M){case 3:Ae^=(255&c.charCodeAt(ve+2))<<16;case 2:Ae^=(255&c.charCodeAt(ve+1))<<8;case 1:P^=Ae=(65535&(Ae=(Ae=(65535&(Ae^=255&c.charCodeAt(ve)))*H+(((Ae>>>16)*H&65535)<<16)&4294967295)<<15|Ae>>>17))*ie+(((Ae>>>16)*ie&65535)<<16)&4294967295}return P^=c.length,P=2246822507*(65535&(P^=P>>>16))+((2246822507*(P>>>16)&65535)<<16)&4294967295,P=3266489909*(65535&(P^=P>>>13))+((3266489909*(P>>>16)&65535)<<16)&4294967295,(P^=P>>>16)>>>0}),hc.exports),A=(Bs||(Bs=1,ql.exports=function(c,y){for(var M,R=c.length,P=y^R,G=0;R>=4;)M=1540483477*(65535&(M=255&c.charCodeAt(G)|(255&c.charCodeAt(++G))<<8|(255&c.charCodeAt(++G))<<16|(255&c.charCodeAt(++G))<<24))+((1540483477*(M>>>16)&65535)<<16),P=1540483477*(65535&P)+((1540483477*(P>>>16)&65535)<<16)^(M=1540483477*(65535&(M^=M>>>24))+((1540483477*(M>>>16)&65535)<<16)),R-=4,++G;switch(R){case 3:P^=(255&c.charCodeAt(G+2))<<16;case 2:P^=(255&c.charCodeAt(G+1))<<8;case 1:P=1540483477*(65535&(P^=255&c.charCodeAt(G)))+((1540483477*(P>>>16)&65535)<<16)}return P=1540483477*(65535&(P^=P>>>13))+((1540483477*(P>>>16)&65535)<<16),(P^=P>>>15)>>>0}),ql.exports);return Qu.exports=h,Qu.exports.murmur3=h,Qu.exports.murmur2=A,Qu.exports}(),ih=C(Oh);class Yu{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(A,c,y,M){this.ids.push(Rc(A)),this.positions.push(c,y,M)}getPositions(A){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const c=Rc(A);let y=0,M=this.ids.length-1;for(;y<M;){const P=y+M>>1;this.ids[P]>=c?M=P:y=P+1}const R=[];for(;this.ids[y]===c;)R.push({index:this.positions[3*y],start:this.positions[3*y+1],end:this.positions[3*y+2]}),y++;return R}static serialize(A,c){const y=new Float64Array(A.ids),M=new Uint32Array(A.positions);return bl(y,M,0,y.length-1),c&&c.push(y.buffer,M.buffer),{ids:y,positions:M}}static deserialize(A){const c=new Yu;return c.ids=A.ids,c.positions=A.positions,c.indexed=!0,c}}function Rc(h){const A=+h;return!isNaN(A)&&A<=Number.MAX_SAFE_INTEGER?A:ih(String(h))}function bl(h,A,c,y){for(;c<y;){const M=h[c+y>>1];let R=c-1,P=y+1;for(;;){do R++;while(h[R]<M);do P--;while(h[P]>M);if(R>=P)break;qu(h,R,P),qu(A,3*R,3*P),qu(A,3*R+1,3*P+1),qu(A,3*R+2,3*P+2)}P-c<y-P?(bl(h,A,c,P),c=P+1):(bl(h,A,P+1,y),y=P)}}function qu(h,A,c){const y=h[A];h[A]=h[c],h[c]=y}ci("FeaturePositionMap",Yu);class xl{constructor(A,c){this.gl=A.gl,this.location=c}}class Pc extends xl{constructor(A,c){super(A,c),this.current=0}set(A){this.current!==A&&(this.current=A,this.gl.uniform1f(this.location,A))}}class bo extends xl{constructor(A,c){super(A,c),this.current=[0,0,0,0]}set(A){A[0]===this.current[0]&&A[1]===this.current[1]&&A[2]===this.current[2]&&A[3]===this.current[3]||(this.current=A,this.gl.uniform4f(this.location,A[0],A[1],A[2],A[3]))}}class Xo extends xl{constructor(A,c){super(A,c),this.current=br.transparent}set(A){A.r===this.current.r&&A.g===this.current.g&&A.b===this.current.b&&A.a===this.current.a||(this.current=A,this.gl.uniform4f(this.location,A.r,A.g,A.b,A.a))}}const hA=new Float32Array(16);function gs(h){return[Qo(255*h.r,255*h.g),Qo(255*h.b,255*h.a)]}class _u{constructor(A,c,y){this.value=A,this.uniformNames=c.map(M=>`u_${M}`),this.type=y}setUniform(A,c,y){A.set(y.constantOr(this.value))}getBinding(A,c,y){return this.type==="color"?new Xo(A,c):new Pc(A,c)}}class dA{constructor(A,c){this.uniformNames=c.map(y=>`u_${y}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(A,c){this.pixelRatioFrom=c.pixelRatio,this.pixelRatioTo=A.pixelRatio,this.patternFrom=c.tlbr,this.patternTo=A.tlbr}setUniform(A,c,y,M){const R=M==="u_pattern_to"?this.patternTo:M==="u_pattern_from"?this.patternFrom:M==="u_pixel_ratio_to"?this.pixelRatioTo:M==="u_pixel_ratio_from"?this.pixelRatioFrom:null;R&&A.set(R)}getBinding(A,c,y){return y.substr(0,9)==="u_pattern"?new bo(A,c):new Pc(A,c)}}class RA{constructor(A,c,y,M){this.expression=A,this.type=y,this.maxValue=0,this.paintVertexAttributes=c.map(R=>({name:`a_${R}`,type:"Float32",components:y==="color"?2:1,offset:0})),this.paintVertexArray=new M}populatePaintArray(A,c,y){const M=this.paintVertexArray.length,R=this.expression.evaluate(new Po(0,y),c,{},y.canonical,[],y.formattedSection);this.paintVertexArray.resize(A),this._setPaintValue(M,A,R)}updatePaintArray(A,c,y,M,R){const P=this.expression.evaluate(new Po(0,R),y,M);this._setPaintValue(A,c,P)}_setPaintValue(A,c,y){if(this.type==="color"){const M=gs(y);for(let R=A;R<c;R++)this.paintVertexArray.emplace(R,M[0],M[1])}else{for(let M=A;M<c;M++)this.paintVertexArray.emplace(M,y);this.maxValue=Math.max(this.maxValue,Math.abs(y))}}upload(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Hl{constructor(A,c,y,M,R,P){this.expression=A,this.uniformNames=c.map(G=>`u_${G}_t`),this.type=y,this.useIntegerZoom=M,this.zoom=R,this.maxValue=0,this.paintVertexAttributes=c.map(G=>({name:`a_${G}`,type:"Float32",components:y==="color"?4:2,offset:0})),this.paintVertexArray=new P}populatePaintArray(A,c,y){const M=this.expression.evaluate(new Po(this.zoom,y),c,{},y.canonical,[],y.formattedSection),R=this.expression.evaluate(new Po(this.zoom+1,y),c,{},y.canonical,[],y.formattedSection),P=this.paintVertexArray.length;this.paintVertexArray.resize(A),this._setPaintValue(P,A,M,R)}updatePaintArray(A,c,y,M,R){const P=this.expression.evaluate(new Po(this.zoom,R),y,M),G=this.expression.evaluate(new Po(this.zoom+1,R),y,M);this._setPaintValue(A,c,P,G)}_setPaintValue(A,c,y,M){if(this.type==="color"){const R=gs(y),P=gs(M);for(let G=A;G<c;G++)this.paintVertexArray.emplace(G,R[0],R[1],P[0],P[1])}else{for(let R=A;R<c;R++)this.paintVertexArray.emplace(R,y,M);this.maxValue=Math.max(this.maxValue,Math.abs(y),Math.abs(M))}}upload(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(A,c){const y=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,M=St(this.expression.interpolationFactor(y,this.zoom,this.zoom+1),0,1);A.set(M)}getBinding(A,c,y){return new Pc(A,c)}}class Kc{constructor(A,c,y,M,R,P){this.expression=A,this.type=c,this.useIntegerZoom=y,this.zoom=M,this.layerId=P,this.zoomInPaintVertexArray=new R,this.zoomOutPaintVertexArray=new R}populatePaintArray(A,c,y){const M=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(A),this.zoomOutPaintVertexArray.resize(A),this._setPaintValues(M,A,c.patterns&&c.patterns[this.layerId],y.imagePositions)}updatePaintArray(A,c,y,M,R){this._setPaintValues(A,c,y.patterns&&y.patterns[this.layerId],R.imagePositions)}_setPaintValues(A,c,y,M){if(!M||!y)return;const{min:R,mid:P,max:G}=y,H=M[R],ie=M[P],Ae=M[G];if(H&&ie&&Ae)for(let ve=A;ve<c;ve++)this.zoomInPaintVertexArray.emplace(ve,ie.tl[0],ie.tl[1],ie.br[0],ie.br[1],H.tl[0],H.tl[1],H.br[0],H.br[1],ie.pixelRatio,H.pixelRatio),this.zoomOutPaintVertexArray.emplace(ve,ie.tl[0],ie.tl[1],ie.br[0],ie.br[1],Ae.tl[0],Ae.tl[1],Ae.br[0],Ae.br[1],ie.pixelRatio,Ae.pixelRatio)}upload(A){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=A.createVertexBuffer(this.zoomInPaintVertexArray,ts.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=A.createVertexBuffer(this.zoomOutPaintVertexArray,ts.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class nu{constructor(A,c,y){this.binders={},this._buffers=[];const M=[];for(const R in A.paint._values){if(!y(R))continue;const P=A.paint.get(R);if(!(P instanceof Rr&&BA(P.property.specification)))continue;const G=bu(R,A.type),H=P.value,ie=P.property.specification.type,Ae=P.property.useIntegerZoom,ve=P.property.specification["property-type"],Ke=ve==="cross-faded"||ve==="cross-faded-data-driven";if(H.kind==="constant")this.binders[R]=Ke?new dA(H.value,G):new _u(H.value,G,ie),M.push(`/u_${R}`);else if(H.kind==="source"||Ke){const Qe=zf(R,ie,"source");this.binders[R]=Ke?new Kc(H,ie,Ae,c,Qe,A.id):new RA(H,G,ie,Qe),M.push(`/a_${R}`)}else{const Qe=zf(R,ie,"composite");this.binders[R]=new Hl(H,G,ie,Ae,c,Qe),M.push(`/z_${R}`)}}this.cacheKey=M.sort().join("")}getMaxValue(A){const c=this.binders[A];return c instanceof RA||c instanceof Hl?c.maxValue:0}populatePaintArrays(A,c,y){for(const M in this.binders){const R=this.binders[M];(R instanceof RA||R instanceof Hl||R instanceof Kc)&&R.populatePaintArray(A,c,y)}}setConstantPatternPositions(A,c){for(const y in this.binders){const M=this.binders[y];M instanceof dA&&M.setConstantPatternPositions(A,c)}}updatePaintArrays(A,c,y,M,R){let P=!1;for(const G in A){const H=c.getPositions(G);for(const ie of H){const Ae=y.feature(ie.index);for(const ve in this.binders){const Ke=this.binders[ve];if((Ke instanceof RA||Ke instanceof Hl||Ke instanceof Kc)&&Ke.expression.isStateDependent===!0){const Qe=M.paint.get(ve);Ke.expression=Qe.value,Ke.updatePaintArray(ie.start,ie.end,Ae,A[G],R),P=!0}}}}return P}defines(){const A=[];for(const c in this.binders){const y=this.binders[c];(y instanceof _u||y instanceof dA)&&A.push(...y.uniformNames.map(M=>`#define HAS_UNIFORM_${M}`))}return A}getBinderAttributes(){const A=[];for(const c in this.binders){const y=this.binders[c];if(y instanceof RA||y instanceof Hl)for(let M=0;M<y.paintVertexAttributes.length;M++)A.push(y.paintVertexAttributes[M].name);else if(y instanceof Kc)for(let M=0;M<ts.members.length;M++)A.push(ts.members[M].name)}return A}getBinderUniforms(){const A=[];for(const c in this.binders){const y=this.binders[c];if(y instanceof _u||y instanceof dA||y instanceof Hl)for(const M of y.uniformNames)A.push(M)}return A}getPaintVertexBuffers(){return this._buffers}getUniforms(A,c){const y=[];for(const M in this.binders){const R=this.binders[M];if(R instanceof _u||R instanceof dA||R instanceof Hl){for(const P of R.uniformNames)if(c[P]){const G=R.getBinding(A,c[P],P);y.push({name:P,property:M,binding:G})}}}return y}setUniforms(A,c,y,M){for(const{name:R,property:P,binding:G}of c)this.binders[P].setUniform(G,M,y.get(P),R)}updatePaintBuffers(A){this._buffers=[];for(const c in this.binders){const y=this.binders[c];if(A&&y instanceof Kc){const M=A.fromScale===2?y.zoomInPaintVertexBuffer:y.zoomOutPaintVertexBuffer;M&&this._buffers.push(M)}else(y instanceof RA||y instanceof Hl)&&y.paintVertexBuffer&&this._buffers.push(y.paintVertexBuffer)}}upload(A){for(const c in this.binders){const y=this.binders[c];(y instanceof RA||y instanceof Hl||y instanceof Kc)&&y.upload(A)}this.updatePaintBuffers()}destroy(){for(const A in this.binders){const c=this.binders[A];(c instanceof RA||c instanceof Hl||c instanceof Kc)&&c.destroy()}}}class Qa{constructor(A,c,y=()=>!0){this.programConfigurations={};for(const M of A)this.programConfigurations[M.id]=new nu(M,c,y);this.needsUpload=!1,this._featureMap=new Yu,this._bufferOffset=0}populatePaintArrays(A,c,y,M){for(const R in this.programConfigurations)this.programConfigurations[R].populatePaintArrays(A,c,M);c.id!==void 0&&this._featureMap.add(c.id,y,this._bufferOffset,A),this._bufferOffset=A,this.needsUpload=!0}updatePaintArrays(A,c,y,M){for(const R of y)this.needsUpload=this.programConfigurations[R.id].updatePaintArrays(A,this._featureMap,c,R,M)||this.needsUpload}get(A){return this.programConfigurations[A]}upload(A){if(this.needsUpload){for(const c in this.programConfigurations)this.programConfigurations[c].upload(A);this.needsUpload=!1}}destroy(){for(const A in this.programConfigurations)this.programConfigurations[A].destroy()}}function bu(h,A){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[h]||[h.replace(`${A}-`,"").replace(/-/g,"_")]}function zf(h,A,c){const y={color:{source:Dc,composite:pe},number:{source:k,composite:Dc}},M=function(R){return{"line-pattern":{source:qn,composite:qn},"fill-pattern":{source:qn,composite:qn},"fill-extrusion-pattern":{source:qn,composite:qn}}[R]}(h);return M&&M[c]||y[A][c]}ci("ConstantBinder",_u),ci("CrossFadedConstantBinder",dA),ci("SourceExpressionBinder",RA),ci("CrossFadedCompositeBinder",Kc),ci("CompositeExpressionBinder",Hl),ci("ProgramConfiguration",nu,{omit:["_buffers"]}),ci("ProgramConfigurationSet",Qa);const xu=Math.pow(2,14)-1,Mu=-xu-1;function wa(h){const A=nt/h.extent,c=h.loadGeometry();for(let y=0;y<c.length;y++){const M=c[y];for(let R=0;R<M.length;R++){const P=M[R],G=Math.round(P.x*A),H=Math.round(P.y*A);P.x=St(G,Mu,xu),P.y=St(H,Mu,xu),(G<P.x||G>P.x+1||H<P.y||H>P.y+1)&&Ot("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return c}function iu(h,A){return{type:h.type,id:h.id,properties:h.properties,geometry:A?wa(h):[]}}const id=-32768;function Nf(h,A,c,y,M){h.emplaceBack(id+8*A+y,id+8*c+M)}class of{constructor(A){this.zoom=A.zoom,this.globalState=A.globalState,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(c=>c.id),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new Yt,this.indexArray=new la,this.segments=new Er,this.programConfigurations=new Qa(A.layers,A.zoom),this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(A,c,y){const M=this.layers[0],R=[];let P=null,G=!1,H=M.type==="heatmap";if(M.type==="circle"){const Ae=M;P=Ae.layout.get("circle-sort-key"),G=!P.isConstant(),H=H||Ae.paint.get("circle-pitch-alignment")==="map"}const ie=H?c.subdivisionGranularity.circle:1;for(const{feature:Ae,id:ve,index:Ke,sourceLayerIndex:Qe}of A){const Ve=this.layers[0]._featureFilter.needGeometry,et=iu(Ae,Ve);if(!this.layers[0]._featureFilter.filter(new Po(this.zoom,{globalState:this.globalState}),et,y))continue;const ut=G?P.evaluate(et,{},y):void 0,Mt={id:ve,properties:Ae.properties,type:Ae.type,sourceLayerIndex:Qe,index:Ke,geometry:Ve?et.geometry:wa(Ae),patterns:{},sortKey:ut};R.push(Mt)}G&&R.sort((Ae,ve)=>Ae.sortKey-ve.sortKey);for(const Ae of R){const{geometry:ve,index:Ke,sourceLayerIndex:Qe}=Ae,Ve=A[Ke].feature;this.addFeature(Ae,ve,Ke,y,ie),c.featureIndex.insert(Ve,ve,Ke,Qe,this.index)}}update(A,c,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,c,this.stateDependentLayers,{imagePositions:y,globalState:this.globalState})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Aa),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(A,c,y,M,R=1){let P;switch(R){case 1:P=[0,7];break;case 3:P=[0,2,5,7];break;case 5:P=[0,1,3,4,6,7];break;case 7:P=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${R}; valid values are 1, 3, 5, 7.`)}const G=P.length;for(const H of c)for(const ie of H){const Ae=ie.x,ve=ie.y;if(Ae<0||Ae>=nt||ve<0||ve>=nt)continue;const Ke=this.segments.prepareSegment(G*G,this.layoutVertexArray,this.indexArray,A.sortKey),Qe=Ke.vertexLength;for(let Ve=0;Ve<G;Ve++)for(let et=0;et<G;et++)Nf(this.layoutVertexArray,Ae,ve,P[et],P[Ve]);for(let Ve=0;Ve<G-1;Ve++)for(let et=0;et<G-1;et++){const ut=Qe+Ve*G+et,Mt=Qe+(Ve+1)*G+et;this.indexArray.emplaceBack(ut,Mt+1,ut+1),this.indexArray.emplaceBack(ut,Mt,Mt+1)}Ke.vertexLength+=G*G,Ke.primitiveLength+=(G-1)*(G-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,y,{imagePositions:{},canonical:M,globalState:this.globalState})}}function mp(h,A){for(let c=0;c<h.length;c++)if(Ih(A,h[c]))return!0;for(let c=0;c<A.length;c++)if(Ih(h,A[c]))return!0;return!!jf(h,A)}function dc(h,A,c){return!!Ih(h,A)||!!af(A,h,c)}function rd(h,A){if(h.length===1)return Bm(A,h[0]);for(let c=0;c<A.length;c++){const y=A[c];for(let M=0;M<y.length;M++)if(Ih(h,y[M]))return!0}for(let c=0;c<h.length;c++)if(Bm(A,h[c]))return!0;for(let c=0;c<A.length;c++)if(jf(h,A[c]))return!0;return!1}function Gf(h,A,c){if(h.length>1){if(jf(h,A))return!0;for(let y=0;y<A.length;y++)if(af(A[y],h,c))return!0}for(let y=0;y<h.length;y++)if(af(h[y],A,c))return!0;return!1}function jf(h,A){if(h.length===0||A.length===0)return!1;for(let c=0;c<h.length-1;c++){const y=h[c],M=h[c+1];for(let R=0;R<A.length-1;R++)if(W0(y,M,A[R],A[R+1]))return!0}return!1}function W0(h,A,c,y){return qt(h,c,y)!==qt(A,c,y)&&qt(h,A,c)!==qt(h,A,y)}function af(h,A,c){const y=c*c;if(A.length===1)return h.distSqr(A[0])<y;for(let M=1;M<A.length;M++)if(Jo(h,A[M-1],A[M])<y)return!0;return!1}function Jo(h,A,c){const y=A.distSqr(c);if(y===0)return h.distSqr(A);const M=((h.x-A.x)*(c.x-A.x)+(h.y-A.y)*(c.y-A.y))/y;return h.distSqr(M<0?A:M>1?c:c.sub(A)._mult(M)._add(A))}function Bm(h,A){let c,y,M,R=!1;for(let P=0;P<h.length;P++){c=h[P];for(let G=0,H=c.length-1;G<c.length;H=G++)y=c[G],M=c[H],y.y>A.y!=M.y>A.y&&A.x<(M.x-y.x)*(A.y-y.y)/(M.y-y.y)+y.x&&(R=!R)}return R}function Ih(h,A){let c=!1;for(let y=0,M=h.length-1;y<h.length;M=y++){const R=h[y],P=h[M];R.y>A.y!=P.y>A.y&&A.x<(P.x-R.x)*(A.y-R.y)/(P.y-R.y)+R.x&&(c=!c)}return c}function Wf(h,A,c){const y=c[0],M=c[2];if(h.x<y.x&&A.x<y.x||h.x>M.x&&A.x>M.x||h.y<y.y&&A.y<y.y||h.y>M.y&&A.y>M.y)return!1;const R=qt(h,A,c[0]);return R!==qt(h,A,c[1])||R!==qt(h,A,c[2])||R!==qt(h,A,c[3])}function ru(h,A,c){const y=A.paint.get(h).value;return y.kind==="constant"?y.value:c.programConfigurations.get(A.id).getMaxValue(h)}function kd(h){return Math.sqrt(h[0]*h[0]+h[1]*h[1])}function Zs(h,A,c,y,M){if(!A[0]&&!A[1])return h;const R=m.convert(A)._mult(M);c==="viewport"&&R._rotate(-y);const P=[];for(let G=0;G<h.length;G++)P.push(h[G].sub(R));return P}let us,Qf;ci("CircleBucket",of,{omit:["layers"]});var Om={get paint(){return Qf=Qf||new sa({"circle-radius":new Ti(it.paint_circle["circle-radius"]),"circle-color":new Ti(it.paint_circle["circle-color"]),"circle-blur":new Ti(it.paint_circle["circle-blur"]),"circle-opacity":new Ti(it.paint_circle["circle-opacity"]),"circle-translate":new Oi(it.paint_circle["circle-translate"]),"circle-translate-anchor":new Oi(it.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Oi(it.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Oi(it.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ti(it.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ti(it.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ti(it.paint_circle["circle-stroke-opacity"])})},get layout(){return us=us||new sa({"circle-sort-key":new Ti(it.layout_circle["circle-sort-key"])})}};class Yf extends Ql{constructor(A){super(A,Om)}createBucket(A){return new of(A)}queryRadius(A){const c=A;return ru("circle-radius",this,c)+ru("circle-stroke-width",this,c)+kd(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:A,feature:c,featureState:y,geometry:M,transform:R,pixelsToTileUnits:P,unwrappedTileID:G,getElevation:H}){const ie=Zs(A,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-R.bearingInRadians,P),Ae=this.paint.get("circle-radius").evaluate(c,y)+this.paint.get("circle-stroke-width").evaluate(c,y),ve=this.paint.get("circle-pitch-alignment")==="map",Ke=ve?ie:function(Ve,et,ut,Mt){return Ve.map(Qt=>sf(Qt,et,ut,Mt))}(ie,R,G,H),Qe=ve?Ae*P:Ae;for(const Ve of M)for(const et of Ve){const ut=ve?et:sf(et,R,G,H);let Mt=Qe;const Qt=R.projectTileCoordinates(et.x,et.y,G,H).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Mt*=Qt/R.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Mt*=R.cameraToCenterDistance/Qt),dc(Ke,ut,Mt))return!0}return!1}}function sf(h,A,c,y){const M=A.projectTileCoordinates(h.x,h.y,c,y).point;return new m((.5*M.x+.5)*A.width,(.5*-M.y+.5)*A.height)}class Dd extends of{}let mr;ci("HeatmapBucket",Dd,{omit:["layers"]});var lf={get paint(){return mr=mr||new sa({"heatmap-radius":new Ti(it.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ti(it.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Oi(it.paint_heatmap["heatmap-intensity"]),"heatmap-color":new uA(it.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Oi(it.paint_heatmap["heatmap-opacity"])})}};function ea(h,{width:A,height:c},y,M){if(M){if(M instanceof Uint8ClampedArray)M=new Uint8Array(M.buffer);else if(M.length!==A*c*y)throw new RangeError(`mismatched image size. expected: ${M.length} but got: ${A*c*y}`)}else M=new Uint8Array(A*c*y);return h.width=A,h.height=c,h.data=M,h}function Th(h,{width:A,height:c},y){if(A===h.width&&c===h.height)return;const M=ea({},{width:A,height:c},y);pp(h,M,{x:0,y:0},{x:0,y:0},{width:Math.min(h.width,A),height:Math.min(h.height,c)},y),h.width=A,h.height=c,h.data=M.data}function pp(h,A,c,y,M,R){if(M.width===0||M.height===0)return A;if(M.width>h.width||M.height>h.height||c.x>h.width-M.width||c.y>h.height-M.height)throw new RangeError("out of range source coordinates for image copy");if(M.width>A.width||M.height>A.height||y.x>A.width-M.width||y.y>A.height-M.height)throw new RangeError("out of range destination coordinates for image copy");const P=h.data,G=A.data;if(P===G)throw new Error("srcData equals dstData, so image is already copied");for(let H=0;H<M.height;H++){const ie=((c.y+H)*h.width+c.x)*R,Ae=((y.y+H)*A.width+y.x)*R;for(let ve=0;ve<M.width*R;ve++)G[Ae+ve]=P[ie+ve]}return A}class Hu{constructor(A,c){ea(this,A,1,c)}resize(A){Th(this,A,1)}clone(){return new Hu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(A,c,y,M,R){pp(A,c,y,M,R,1)}}class fA{constructor(A,c){ea(this,A,4,c)}resize(A){Th(this,A,4)}replace(A,c){c?this.data.set(A):this.data=A instanceof Uint8ClampedArray?new Uint8Array(A.buffer):A}clone(){return new fA({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(A,c,y,M,R){pp(A,c,y,M,R,4)}setPixel(A,c,y){const M=4*(A*this.width+c);this.data[M+0]=Math.round(255*y.r/y.a),this.data[M+1]=Math.round(255*y.g/y.a),this.data[M+2]=Math.round(255*y.b/y.a),this.data[M+3]=Math.round(255*y.a)}}function ol(h){const A={},c=h.resolution||256,y=h.clips?h.clips.length:1,M=h.image||new fA({width:c,height:y});if(Math.log(c)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${c}`);const R=(P,G,H)=>{A[h.evaluationKey]=H;const ie=h.expression.evaluate(A);M.setPixel(P/4/c,G/4,ie)};if(h.clips)for(let P=0,G=0;P<y;++P,G+=4*c)for(let H=0,ie=0;H<c;H++,ie+=4){const Ae=H/(c-1),{start:ve,end:Ke}=h.clips[P];R(G,ie,ve*(1-Ae)+Ke*Ae)}else for(let P=0,G=0;P<c;P++,G+=4)R(0,G,P/(c-1));return M}ci("AlphaImage",Hu),ci("RGBAImage",fA);const gp="big-fb";class zs extends Ql{createBucket(A){return new Dd(A)}constructor(A){super(A,lf),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(A){A==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=ol({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(gp)&&this.heatmapFbos.delete(gp)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let qf;var a0={get paint(){return qf=qf||new sa({"hillshade-illumination-direction":new Oi(it.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Oi(it.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Oi(it.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Oi(it.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Oi(it.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Oi(it.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Oi(it.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Oi(it.paint_hillshade["hillshade-method"])})}};class s0 extends Ql{constructor(A){super(A,a0),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let A=this.paint.get("hillshade-illumination-direction").values,c=this.paint.get("hillshade-illumination-altitude").values,y=this.paint.get("hillshade-highlight-color").values,M=this.paint.get("hillshade-shadow-color").values;const R=Math.max(A.length,c.length,y.length,M.length);A=A.concat(Array(R-A.length).fill(A.at(-1))),c=c.concat(Array(R-c.length).fill(c.at(-1))),y=y.concat(Array(R-y.length).fill(y.at(-1))),M=M.concat(Array(R-M.length).fill(M.at(-1)));const P=c.map(Bi);return{directionRadians:A.map(Bi),altitudeRadians:P,shadowColor:M,highlightColor:y}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let Af;var d={get paint(){return Af=Af||new sa({"color-relief-opacity":new Oi(it["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new uA(it["paint_color-relief"]["color-relief-color"])})}};class v{constructor(A,c,y,M){this.context=A,this.format=y,this.texture=A.gl.createTexture(),this.update(c,M)}update(A,c,y){const{width:M,height:R}=A,P=!(this.size&&this.size[0]===M&&this.size[1]===R||y),{context:G}=this,{gl:H}=G;if(this.useMipmap=!!(c&&c.useMipmap),H.bindTexture(H.TEXTURE_2D,this.texture),G.pixelStoreUnpackFlipY.set(!1),G.pixelStoreUnpack.set(1),G.pixelStoreUnpackPremultiplyAlpha.set(this.format===H.RGBA&&(!c||c.premultiply!==!1)),P)this.size=[M,R],A instanceof HTMLImageElement||A instanceof HTMLCanvasElement||A instanceof HTMLVideoElement||A instanceof ImageData||Jn(A)?H.texImage2D(H.TEXTURE_2D,0,this.format,this.format,H.UNSIGNED_BYTE,A):H.texImage2D(H.TEXTURE_2D,0,this.format,M,R,0,this.format,H.UNSIGNED_BYTE,A.data);else{const{x:ie,y:Ae}=y||{x:0,y:0};A instanceof HTMLImageElement||A instanceof HTMLCanvasElement||A instanceof HTMLVideoElement||A instanceof ImageData||Jn(A)?H.texSubImage2D(H.TEXTURE_2D,0,ie,Ae,H.RGBA,H.UNSIGNED_BYTE,A):H.texSubImage2D(H.TEXTURE_2D,0,ie,Ae,M,R,H.RGBA,H.UNSIGNED_BYTE,A.data)}this.useMipmap&&this.isSizePowerOfTwo()&&H.generateMipmap(H.TEXTURE_2D),G.pixelStoreUnpackFlipY.setDefault(),G.pixelStoreUnpack.setDefault(),G.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(A,c,y){const{context:M}=this,{gl:R}=M;R.bindTexture(R.TEXTURE_2D,this.texture),y!==R.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(y=R.LINEAR),A!==this.filter&&(R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,A),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,y||A),this.filter=A),c!==this.wrap&&(R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_S,c),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:A}=this.context;A.deleteTexture(this.texture),this.texture=null}}class B{constructor(A,c,y,M=1,R=1,P=1,G=0){if(this.uid=A,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(y&&!["mapbox","terrarium","custom"].includes(y))return void Ot(`"${y}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=c.height;const H=this.dim=c.height-2;switch(this.data=new Uint32Array(c.data.buffer),y){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=M,this.greenFactor=R,this.blueFactor=P,this.baseShift=G;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let ie=0;ie<H;ie++)this.data[this._idx(-1,ie)]=this.data[this._idx(0,ie)],this.data[this._idx(H,ie)]=this.data[this._idx(H-1,ie)],this.data[this._idx(ie,-1)]=this.data[this._idx(ie,0)],this.data[this._idx(ie,H)]=this.data[this._idx(ie,H-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(H,-1)]=this.data[this._idx(H-1,0)],this.data[this._idx(-1,H)]=this.data[this._idx(0,H-1)],this.data[this._idx(H,H)]=this.data[this._idx(H-1,H-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let ie=0;ie<H;ie++)for(let Ae=0;Ae<H;Ae++){const ve=this.get(ie,Ae);ve>this.max&&(this.max=ve),ve<this.min&&(this.min=ve)}}get(A,c){const y=new Uint8Array(this.data.buffer),M=4*this._idx(A,c);return this.unpack(y[M],y[M+1],y[M+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(A,c){if(A<-1||A>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(c+1)*this.stride+(A+1)}unpack(A,c,y){return A*this.redFactor+c*this.greenFactor+y*this.blueFactor-this.baseShift}pack(A){return E(A,this.getUnpackVector())}getPixels(){return new fA({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(A,c,y){if(this.dim!==A.dim)throw new Error("dem dimension mismatch");let M=c*this.dim,R=c*this.dim+this.dim,P=y*this.dim,G=y*this.dim+this.dim;switch(c){case-1:M=R-1;break;case 1:R=M+1}switch(y){case-1:P=G-1;break;case 1:G=P+1}const H=-c*this.dim,ie=-y*this.dim;for(let Ae=P;Ae<G;Ae++)for(let ve=M;ve<R;ve++)this.data[this._idx(ve,Ae)]=A.data[this._idx(ve+H,Ae+ie)]}}function E(h,A){const c=A[0],y=A[1],M=A[2],R=A[3],P=Math.min(c,y,M),G=Math.round((h+R)/P);return{r:Math.floor(G*P/c)%256,g:Math.floor(G*P/y)%256,b:Math.floor(G*P/M)%256}}ci("DEMData",B);class F extends Ql{constructor(A){super(A,d)}_createColorRamp(A){const c={elevationStops:[],colorStops:[]},y=this._transitionablePaint._values["color-relief-color"].value.expression;if(y instanceof xh&&y._styleExpression.expression instanceof Da){this.colorRampExpression=y;const P=y._styleExpression.expression;c.elevationStops=P.labels,c.colorStops=[];for(const G of c.elevationStops)c.colorStops.push(P.evaluate({globals:{elevation:G}}))}if(c.elevationStops.length<1&&(c.elevationStops=[0],c.colorStops=[br.transparent]),c.elevationStops.length<2&&(c.elevationStops.push(c.elevationStops[0]+1),c.colorStops.push(c.colorStops[0])),c.elevationStops.length<=A)return c;const M={elevationStops:[],colorStops:[]},R=(c.elevationStops.length-1)/(A-1);for(let P=0;P<c.elevationStops.length-.5;P+=R)M.elevationStops.push(c.elevationStops[Math.round(P)]),M.colorStops.push(c.colorStops[Math.round(P)]);return Ot(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),M}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(A,c,y){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const M=this._createColorRamp(c),R=new fA({width:M.colorStops.length,height:1}),P=new fA({width:M.colorStops.length,height:1});for(let G=0;G<M.elevationStops.length;G++){const H=E(M.elevationStops[G],y);P.setPixel(0,G,new br(H.r/255,H.g/255,H.b/255,1)),R.setPixel(0,G,M.colorStops[G])}return this.colorRampTextures={elevationTexture:new v(A,P,A.gl.RGBA),colorTexture:new v(A,R,A.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const X=ja([{name:"a_pos",components:2,type:"Int16"}],4),{members:fe}=X;function _e(h,A,c){const y=c.patternDependencies;let M=!1;for(const R of A){const P=R.paint.get(`${h}-pattern`);P.isConstant()||(M=!0);const G=P.constantOr(null);G&&(M=!0,y[G.to]=!0,y[G.from]=!0)}return M}function ke(h,A,c,y,M){const{zoom:R,globalState:P}=y,G=M.patternDependencies;for(const H of A){const ie=H.paint.get(`${h}-pattern`).value;if(ie.kind!=="constant"){let Ae=ie.evaluate({zoom:R-1,globalState:P},c,{},M.availableImages),ve=ie.evaluate({zoom:R,globalState:P},c,{},M.availableImages),Ke=ie.evaluate({zoom:R+1,globalState:P},c,{},M.availableImages);Ae=Ae&&Ae.name?Ae.name:Ae,ve=ve&&ve.name?ve.name:ve,Ke=Ke&&Ke.name?Ke.name:Ke,G[Ae]=!0,G[ve]=!0,G[Ke]=!0,c.patterns[H.id]={min:Ae,mid:ve,max:Ke}}}return c}function Fe(h,A,c,y,M){let R;if(M===function(P,G,H,ie){let Ae=0;for(let ve=G,Ke=H-ie;ve<H;ve+=ie)Ae+=(P[Ke]-P[ve])*(P[ve+1]+P[Ke+1]),Ke=ve;return Ae}(h,A,c,y)>0)for(let P=A;P<c;P+=y)R=Vl(P/y|0,h[P],h[P+1],R);else for(let P=c-y;P>=A;P-=y)R=Vl(P/y|0,h[P],h[P+1],R);return R&&ns(R,R.next)&&(Is(R),R=R.next),R}function _t(h,A){if(!h)return h;A||(A=h);let c,y=h;do if(c=!1,y.steiner||!ns(y,y.next)&&xr(y.prev,y,y.next)!==0)y=y.next;else{if(Is(y),y=A=y.prev,y===y.next)break;c=!0}while(c||y!==A);return A}function Tt(h,A,c,y,M,R,P){if(!h)return;!P&&R&&function(H,ie,Ae,ve){let Ke=H;do Ke.z===0&&(Ke.z=gi(Ke.x,Ke.y,ie,Ae,ve)),Ke.prevZ=Ke.prev,Ke.nextZ=Ke.next,Ke=Ke.next;while(Ke!==H);Ke.prevZ.nextZ=null,Ke.prevZ=null,function(Qe){let Ve,et=1;do{let ut,Mt=Qe;Qe=null;let Qt=null;for(Ve=0;Mt;){Ve++;let Dt=Mt,zt=0;for(let Cn=0;Cn<et&&(zt++,Dt=Dt.nextZ,Dt);Cn++);let ln=et;for(;zt>0||ln>0&&Dt;)zt!==0&&(ln===0||!Dt||Mt.z<=Dt.z)?(ut=Mt,Mt=Mt.nextZ,zt--):(ut=Dt,Dt=Dt.nextZ,ln--),Qt?Qt.nextZ=ut:Qe=ut,ut.prevZ=Qt,Qt=ut;Mt=Dt}Qt.nextZ=null,et*=2}while(Ve>1)}(Ke)}(h,y,M,R);let G=h;for(;h.prev!==h.next;){const H=h.prev,ie=h.next;if(R?Ht(h,y,M,R):Jt(h))A.push(H.i,h.i,ie.i),Is(h),h=ie.next,G=ie.next;else if((h=ie)===G){P?P===1?Tt(h=_n(_t(h),A),A,c,y,M,R,2):P===2&&Rn(h,A,c,y,M,R):Tt(_t(h),A,c,y,M,R,1);break}}}function Jt(h){const A=h.prev,c=h,y=h.next;if(xr(A,c,y)>=0)return!1;const M=A.x,R=c.x,P=y.x,G=A.y,H=c.y,ie=y.y,Ae=Math.min(M,R,P),ve=Math.min(G,H,ie),Ke=Math.max(M,R,P),Qe=Math.max(G,H,ie);let Ve=y.next;for(;Ve!==A;){if(Ve.x>=Ae&&Ve.x<=Ke&&Ve.y>=ve&&Ve.y<=Qe&&Yi(M,G,R,H,P,ie,Ve.x,Ve.y)&&xr(Ve.prev,Ve,Ve.next)>=0)return!1;Ve=Ve.next}return!0}function Ht(h,A,c,y){const M=h.prev,R=h,P=h.next;if(xr(M,R,P)>=0)return!1;const G=M.x,H=R.x,ie=P.x,Ae=M.y,ve=R.y,Ke=P.y,Qe=Math.min(G,H,ie),Ve=Math.min(Ae,ve,Ke),et=Math.max(G,H,ie),ut=Math.max(Ae,ve,Ke),Mt=gi(Qe,Ve,A,c,y),Qt=gi(et,ut,A,c,y);let Dt=h.prevZ,zt=h.nextZ;for(;Dt&&Dt.z>=Mt&&zt&&zt.z<=Qt;){if(Dt.x>=Qe&&Dt.x<=et&&Dt.y>=Ve&&Dt.y<=ut&&Dt!==M&&Dt!==P&&Yi(G,Ae,H,ve,ie,Ke,Dt.x,Dt.y)&&xr(Dt.prev,Dt,Dt.next)>=0||(Dt=Dt.prevZ,zt.x>=Qe&&zt.x<=et&&zt.y>=Ve&&zt.y<=ut&&zt!==M&&zt!==P&&Yi(G,Ae,H,ve,ie,Ke,zt.x,zt.y)&&xr(zt.prev,zt,zt.next)>=0))return!1;zt=zt.nextZ}for(;Dt&&Dt.z>=Mt;){if(Dt.x>=Qe&&Dt.x<=et&&Dt.y>=Ve&&Dt.y<=ut&&Dt!==M&&Dt!==P&&Yi(G,Ae,H,ve,ie,Ke,Dt.x,Dt.y)&&xr(Dt.prev,Dt,Dt.next)>=0)return!1;Dt=Dt.prevZ}for(;zt&&zt.z<=Qt;){if(zt.x>=Qe&&zt.x<=et&&zt.y>=Ve&&zt.y<=ut&&zt!==M&&zt!==P&&Yi(G,Ae,H,ve,ie,Ke,zt.x,zt.y)&&xr(zt.prev,zt,zt.next)>=0)return!1;zt=zt.nextZ}return!0}function _n(h,A){let c=h;do{const y=c.prev,M=c.next.next;!ns(y,M)&&ua(y,c,c.next,M)&&vs(y,M)&&vs(M,y)&&(A.push(y.i,c.i,M.i),Is(c),Is(c.next),c=h=M),c=c.next}while(c!==h);return _t(c)}function Rn(h,A,c,y,M,R){let P=h;do{let G=P.next.next;for(;G!==P.prev;){if(P.i!==G.i&&Xr(P,G)){let H=ca(P,G);return P=_t(P,P.next),H=_t(H,H.next),Tt(P,A,c,y,M,R,0),void Tt(H,A,c,y,M,R,0)}G=G.next}P=P.next}while(P!==h)}function oi(h,A){let c=h.x-A.x;return c===0&&(c=h.y-A.y,c===0)&&(c=(h.next.y-h.y)/(h.next.x-h.x)-(A.next.y-A.y)/(A.next.x-A.x)),c}function pi(h,A){const c=function(M,R){let P=R;const G=M.x,H=M.y;let ie,Ae=-1/0;if(ns(M,P))return P;do{if(ns(M,P.next))return P.next;if(H<=P.y&&H>=P.next.y&&P.next.y!==P.y){const et=P.x+(H-P.y)*(P.next.x-P.x)/(P.next.y-P.y);if(et<=G&&et>Ae&&(Ae=et,ie=P.x<P.next.x?P:P.next,et===G))return ie}P=P.next}while(P!==R);if(!ie)return null;const ve=ie,Ke=ie.x,Qe=ie.y;let Ve=1/0;P=ie;do{if(G>=P.x&&P.x>=Ke&&G!==P.x&&ar(H<Qe?G:Ae,H,Ke,Qe,H<Qe?Ae:G,H,P.x,P.y)){const et=Math.abs(H-P.y)/(G-P.x);vs(P,M)&&(et<Ve||et===Ve&&(P.x>ie.x||P.x===ie.x&&Ci(ie,P)))&&(ie=P,Ve=et)}P=P.next}while(P!==ve);return ie}(h,A);if(!c)return A;const y=ca(c,h);return _t(y,y.next),_t(c,c.next)}function Ci(h,A){return xr(h.prev,h,A.prev)<0&&xr(A.next,h,h.next)<0}function gi(h,A,c,y,M){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=(h-c)*M|0)|h<<8))|h<<4))|h<<2))|h<<1))|(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=(A-y)*M|0)|A<<8))|A<<4))|A<<2))|A<<1))<<1}function ki(h){let A=h,c=h;do(A.x<c.x||A.x===c.x&&A.y<c.y)&&(c=A),A=A.next;while(A!==h);return c}function ar(h,A,c,y,M,R,P,G){return(M-P)*(A-G)>=(h-P)*(R-G)&&(h-P)*(y-G)>=(c-P)*(A-G)&&(c-P)*(R-G)>=(M-P)*(y-G)}function Yi(h,A,c,y,M,R,P,G){return!(h===P&&A===G)&&ar(h,A,c,y,M,R,P,G)}function Xr(h,A){return h.next.i!==A.i&&h.prev.i!==A.i&&!function(c,y){let M=c;do{if(M.i!==c.i&&M.next.i!==c.i&&M.i!==y.i&&M.next.i!==y.i&&ua(M,M.next,c,y))return!0;M=M.next}while(M!==c);return!1}(h,A)&&(vs(h,A)&&vs(A,h)&&function(c,y){let M=c,R=!1;const P=(c.x+y.x)/2,G=(c.y+y.y)/2;do M.y>G!=M.next.y>G&&M.next.y!==M.y&&P<(M.next.x-M.x)*(G-M.y)/(M.next.y-M.y)+M.x&&(R=!R),M=M.next;while(M!==c);return R}(h,A)&&(xr(h.prev,h,A.prev)||xr(h,A.prev,A))||ns(h,A)&&xr(h.prev,h,h.next)>0&&xr(A.prev,A,A.next)>0)}function xr(h,A,c){return(A.y-h.y)*(c.x-A.x)-(A.x-h.x)*(c.y-A.y)}function ns(h,A){return h.x===A.x&&h.y===A.y}function ua(h,A,c,y){const M=ys(xr(h,A,c)),R=ys(xr(h,A,y)),P=ys(xr(c,y,h)),G=ys(xr(c,y,A));return M!==R&&P!==G||!(M!==0||!Yr(h,c,A))||!(R!==0||!Yr(h,y,A))||!(P!==0||!Yr(c,h,y))||!(G!==0||!Yr(c,A,y))}function Yr(h,A,c){return A.x<=Math.max(h.x,c.x)&&A.x>=Math.min(h.x,c.x)&&A.y<=Math.max(h.y,c.y)&&A.y>=Math.min(h.y,c.y)}function ys(h){return h>0?1:h<0?-1:0}function vs(h,A){return xr(h.prev,h,h.next)<0?xr(h,A,h.next)>=0&&xr(h,h.prev,A)>=0:xr(h,A,h.prev)<0||xr(h,h.next,A)<0}function ca(h,A){const c=Ns(h.i,h.x,h.y),y=Ns(A.i,A.x,A.y),M=h.next,R=A.prev;return h.next=A,A.prev=h,c.next=M,M.prev=c,y.next=c,c.prev=y,R.next=y,y.prev=R,y}function Vl(h,A,c,y){const M=Ns(h,A,c);return y?(M.next=y.next,M.prev=y,y.next.prev=M,y.next=M):(M.prev=M,M.next=M),M}function Is(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function Ns(h,A,c){return{i:h,x:A,y:c,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Br{constructor(A,c){if(c>A)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=A,this._minGranularity=c}getGranularityForZoomLevel(A){return Math.max(Math.floor(this._baseZoomGranularity/(1<<A)),this._minGranularity,1)}}class Ea{constructor(A){this.fill=A.fill,this.line=A.line,this.tile=A.tile,this.stencil=A.stencil,this.circle=A.circle}}Ea.noSubdivision=new Ea({fill:new Br(0,0),line:new Br(0,0),tile:new Br(0,0),stencil:new Br(0,0),circle:1}),ci("SubdivisionGranularityExpression",Br),ci("SubdivisionGranularitySetting",Ea);const $l=-32768,fc=32767;class mA{constructor(A,c){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=A,this._granularityCellSize=nt/A,this._canonical=c}_getKey(A,c){return(A+=32768)<<16|c+32768}_vertexToIndex(A,c){if(A<-32768||c<-32768||A>32767||c>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const y=0|Math.round(A),M=0|Math.round(c),R=this._getKey(y,M);if(this._vertexDictionary.has(R))return this._vertexDictionary.get(R);const P=this._vertexBuffer.length/2;return this._vertexDictionary.set(R,P),this._vertexBuffer.push(y,M),P}_subdivideTrianglesScanline(A){if(this._granularity<2)return function(M,R){const P=[];for(let G=0;G<R.length;G+=3){const H=R[G],ie=R[G+1],Ae=R[G+2],ve=M[2*H],Ke=M[2*H+1];(M[2*ie]-ve)*(M[2*Ae+1]-Ke)-(M[2*ie+1]-Ke)*(M[2*Ae]-ve)>0?(P.push(H),P.push(Ae),P.push(ie)):(P.push(H),P.push(ie),P.push(Ae))}return P}(this._vertexBuffer,A);const c=[],y=A.length;for(let M=0;M<y;M+=3){const R=[A[M+0],A[M+1],A[M+2]],P=[this._vertexBuffer[2*A[M+0]+0],this._vertexBuffer[2*A[M+0]+1],this._vertexBuffer[2*A[M+1]+0],this._vertexBuffer[2*A[M+1]+1],this._vertexBuffer[2*A[M+2]+0],this._vertexBuffer[2*A[M+2]+1]];let G=1/0,H=1/0,ie=-1/0,Ae=-1/0;for(let et=0;et<3;et++){const ut=P[2*et],Mt=P[2*et+1];G=Math.min(G,ut),ie=Math.max(ie,ut),H=Math.min(H,Mt),Ae=Math.max(Ae,Mt)}if(G===ie||H===Ae)continue;const ve=Math.floor(G/this._granularityCellSize),Ke=Math.ceil(ie/this._granularityCellSize),Qe=Math.floor(H/this._granularityCellSize),Ve=Math.ceil(Ae/this._granularityCellSize);if(ve!==Ke||Qe!==Ve)for(let et=Qe;et<Ve;et++){const ut=this._scanlineGenerateVertexRingForCellRow(et,P,R);Su(this._vertexBuffer,ut,c)}else c.push(...R)}return c}_scanlineGenerateVertexRingForCellRow(A,c,y){const M=A*this._granularityCellSize,R=M+this._granularityCellSize,P=[];for(let G=0;G<3;G++){const H=c[2*G],ie=c[2*G+1],Ae=c[2*(G+1)%6],ve=c[(2*(G+1)+1)%6],Ke=c[2*(G+2)%6],Qe=c[(2*(G+2)+1)%6],Ve=Ae-H,et=ve-ie,ut=Ve===0,Mt=et===0,Qt=(M-ie)/et,Dt=(R-ie)/et,zt=Math.min(Qt,Dt),ln=Math.max(Qt,Dt);if(!Mt&&(zt>=1||ln<=0)||Mt&&(ie<M||ie>R)){ve>=M&&ve<=R&&P.push(y[(G+1)%3]);continue}!Mt&&zt>0&&P.push(this._vertexToIndex(H+Ve*zt,ie+et*zt));const Cn=H+Ve*Math.max(zt,0),Un=H+Ve*Math.min(ln,1);ut||this._generateIntraEdgeVertices(P,H,ie,Ae,ve,Cn,Un),!Mt&&ln<1&&P.push(this._vertexToIndex(H+Ve*ln,ie+et*ln)),(Mt||ve>=M&&ve<=R)&&P.push(y[(G+1)%3]),!Mt&&(ve<=M||ve>=R)&&this._generateInterEdgeVertices(P,H,ie,Ae,ve,Ke,Qe,Un,M,R)}return P}_generateIntraEdgeVertices(A,c,y,M,R,P,G){const H=M-c,ie=R-y,Ae=ie===0,ve=Ae?Math.min(c,M):Math.min(P,G),Ke=Ae?Math.max(c,M):Math.max(P,G),Qe=Math.floor(ve/this._granularityCellSize)+1,Ve=Math.ceil(Ke/this._granularityCellSize)-1;if(Ae?c<M:P<G)for(let et=Qe;et<=Ve;et++){const ut=et*this._granularityCellSize;A.push(this._vertexToIndex(ut,y+ie*(ut-c)/H))}else for(let et=Ve;et>=Qe;et--){const ut=et*this._granularityCellSize;A.push(this._vertexToIndex(ut,y+ie*(ut-c)/H))}}_generateInterEdgeVertices(A,c,y,M,R,P,G,H,ie,Ae){const ve=R-y,Ke=P-M,Qe=G-R,Ve=(ie-R)/Qe,et=(Ae-R)/Qe,ut=Math.min(Ve,et),Mt=Math.max(Ve,et),Qt=M+Ke*ut;let Dt=Math.floor(Math.min(Qt,H)/this._granularityCellSize)+1,zt=Math.ceil(Math.max(Qt,H)/this._granularityCellSize)-1,ln=H<Qt;const Cn=Qe===0;if(Cn&&(G===ie||G===Ae))return;if(Cn||ut>=1||Mt<=0){const mi=y-G,ai=P+(c-P)*Math.min((ie-G)/mi,(Ae-G)/mi);Dt=Math.floor(Math.min(ai,H)/this._granularityCellSize)+1,zt=Math.ceil(Math.max(ai,H)/this._granularityCellSize)-1,ln=H<ai}const Un=ve>0?Ae:ie;if(ln)for(let mi=Dt;mi<=zt;mi++)A.push(this._vertexToIndex(mi*this._granularityCellSize,Un));else for(let mi=zt;mi>=Dt;mi--)A.push(this._vertexToIndex(mi*this._granularityCellSize,Un))}_generateOutline(A){const c=[];for(const y of A){const M=cs(y,this._granularity,!0),R=this._pointArrayToIndices(M),P=[];for(let G=1;G<R.length;G++)P.push(R[G-1]),P.push(R[G]);c.push(P)}return c}_handlePoles(A){let c=!1,y=!1;this._canonical&&(this._canonical.y===0&&(c=!0),this._canonical.y===(1<<this._canonical.z)-1&&(y=!0)),(c||y)&&this._fillPoles(A,c,y)}_ensureNoPoleVertices(){const A=this._vertexBuffer;for(let c=0;c<A.length;c+=2){const y=A[c+1];y===$l&&(A[c+1]=-32767),y===fc&&(A[c+1]=32766)}}_generatePoleQuad(A,c,y,M,R,P){M>R!=(P===$l)?(A.push(c),A.push(y),A.push(this._vertexToIndex(M,P)),A.push(y),A.push(this._vertexToIndex(R,P)),A.push(this._vertexToIndex(M,P))):(A.push(y),A.push(c),A.push(this._vertexToIndex(M,P)),A.push(this._vertexToIndex(R,P)),A.push(y),A.push(this._vertexToIndex(M,P)))}_fillPoles(A,c,y){const M=this._vertexBuffer,R=nt,P=A.length;for(let G=2;G<P;G+=3){const H=A[G-2],ie=A[G-1],Ae=A[G],ve=M[2*H],Ke=M[2*H+1],Qe=M[2*ie],Ve=M[2*ie+1],et=M[2*Ae],ut=M[2*Ae+1];c&&(Ke===0&&Ve===0&&this._generatePoleQuad(A,H,ie,ve,Qe,$l),Ve===0&&ut===0&&this._generatePoleQuad(A,ie,Ae,Qe,et,$l),ut===0&&Ke===0&&this._generatePoleQuad(A,Ae,H,et,ve,$l)),y&&(Ke===R&&Ve===R&&this._generatePoleQuad(A,H,ie,ve,Qe,fc),Ve===R&&ut===R&&this._generatePoleQuad(A,ie,Ae,Qe,et,fc),ut===R&&Ke===R&&this._generatePoleQuad(A,Ae,H,et,ve,fc))}}_initializeVertices(A){for(let c=0;c<A.length;c+=2)this._vertexToIndex(A[c],A[c+1])}subdividePolygonInternal(A,c){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:y,holeIndices:M}=function(G){const H=[],ie=[];for(const Ae of G)if(Ae.length!==0){Ae!==G[0]&&H.push(ie.length/2);for(let ve=0;ve<Ae.length;ve++)ie.push(Ae[ve].x),ie.push(Ae[ve].y)}return{flattened:ie,holeIndices:H}}(A);let R;this._initializeVertices(y);try{const G=function(ie,Ae,ve=2){const Ke=Ae&&Ae.length,Qe=Ke?Ae[0]*ve:ie.length;let Ve=Fe(ie,0,Qe,ve,!0);const et=[];if(!Ve||Ve.next===Ve.prev)return et;let ut,Mt,Qt;if(Ke&&(Ve=function(Dt,zt,ln,Cn){const Un=[];for(let mi=0,ai=zt.length;mi<ai;mi++){const di=Fe(Dt,zt[mi]*Cn,mi<ai-1?zt[mi+1]*Cn:Dt.length,Cn,!1);di===di.next&&(di.steiner=!0),Un.push(ki(di))}Un.sort(oi);for(let mi=0;mi<Un.length;mi++)ln=pi(Un[mi],ln);return ln}(ie,Ae,Ve,ve)),ie.length>80*ve){ut=ie[0],Mt=ie[1];let Dt=ut,zt=Mt;for(let ln=ve;ln<Qe;ln+=ve){const Cn=ie[ln],Un=ie[ln+1];Cn<ut&&(ut=Cn),Un<Mt&&(Mt=Un),Cn>Dt&&(Dt=Cn),Un>zt&&(zt=Un)}Qt=Math.max(Dt-ut,zt-Mt),Qt=Qt!==0?32767/Qt:0}return Tt(Ve,et,ve,ut,Mt,Qt,0),et}(y,M),H=this._convertIndices(y,G);R=this._subdivideTrianglesScanline(H)}catch(G){console.error(G)}let P=[];return c&&(P=this._generateOutline(A)),this._ensureNoPoleVertices(),this._handlePoles(R),{verticesFlattened:this._vertexBuffer,indicesTriangles:R,indicesLineList:P}}_convertIndices(A,c){const y=[];for(let M=0;M<c.length;M++)y.push(this._vertexToIndex(A[2*c[M]],A[2*c[M]+1]));return y}_pointArrayToIndices(A){const c=[];for(let y=0;y<A.length;y++){const M=A[y];c.push(this._vertexToIndex(M.x,M.y))}return c}}function rh(h,A,c,y=!0){return new mA(c,A).subdividePolygonInternal(h,y)}function cs(h,A,c=!1){if(!h||h.length<1)return[];if(h.length<2)return[];const y=h[0],M=h[h.length-1],R=c&&(y.x!==M.x||y.y!==M.y);if(A<2)return R?[...h,h[0]]:[...h];const P=Math.floor(nt/A),G=[];G.push(new m(h[0].x,h[0].y));const H=h.length,ie=R?H:H-1;for(let Ae=0;Ae<ie;Ae++){const ve=h[Ae],Ke=Ae<H-1?h[Ae+1]:h[0],Qe=ve.x,Ve=ve.y,et=Ke.x,ut=Ke.y,Mt=Qe!==et,Qt=Ve!==ut;if(!Mt&&!Qt)continue;const Dt=et-Qe,zt=ut-Ve,ln=Math.abs(Dt),Cn=Math.abs(zt);let Un=Qe,mi=Ve;for(;;){const di=Dt>0?(Math.floor(Un/P)+1)*P:(Math.ceil(Un/P)-1)*P,tr=zt>0?(Math.floor(mi/P)+1)*P:(Math.ceil(mi/P)-1)*P,Ai=Math.abs(Un-di),fi=Math.abs(mi-tr),En=Math.abs(Un-et),fr=Math.abs(mi-ut),wr=Mt?Ai/ln:Number.POSITIVE_INFINITY,sr=Qt?fi/Cn:Number.POSITIVE_INFINITY;if((En<=Ai||!Mt)&&(fr<=fi||!Qt))break;if(wr<sr&&Mt||!Qt){Un=di,mi+=zt*wr;const Ui=new m(Un,Math.round(mi));G[G.length-1].x===Ui.x&&G[G.length-1].y===Ui.y||G.push(Ui)}else{Un+=Dt*sr,mi=tr;const Ui=new m(Math.round(Un),mi);G[G.length-1].x===Ui.x&&G[G.length-1].y===Ui.y||G.push(Ui)}}const ai=new m(et,ut);G[G.length-1].x===ai.x&&G[G.length-1].y===ai.y||G.push(ai)}return G}function Su(h,A,c){if(A.length===0)throw new Error("Subdivision vertex ring is empty.");let y=0,M=h[2*A[0]];for(let H=1;H<A.length;H++){const ie=h[2*A[H]];ie<M&&(M=ie,y=H)}const R=A.length;let P=y,G=(P+1)%R;for(;;){const H=P-1>=0?P-1:R-1,ie=(G+1)%R,Ae=h[2*A[H]],ve=h[2*A[ie]],Ke=h[2*A[P]],Qe=h[2*A[P]+1],Ve=h[2*A[G]+1];let et=!1;if(Ae<ve)et=!0;else if(Ae>ve)et=!1;else{const ut=Ve-Qe,Mt=-(h[2*A[G]]-Ke),Qt=Qe<Ve?1:-1;((Ae-Ke)*ut+(h[2*A[H]+1]-Qe)*Mt)*Qt>((ve-Ke)*ut+(h[2*A[ie]+1]-Qe)*Mt)*Qt&&(et=!0)}if(et){const ut=A[H],Mt=A[P],Qt=A[G];ut!==Mt&&ut!==Qt&&Mt!==Qt&&c.push(Qt,Mt,ut),P--,P<0&&(P=R-1)}else{const ut=A[ie],Mt=A[P],Qt=A[G];ut!==Mt&&ut!==Qt&&Mt!==Qt&&c.push(Qt,Mt,ut),G++,G>=R&&(G=0)}if(H===ie)break}}function Ml(h,A,c,y,M,R,P,G,H){const ie=M.length/2,Ae=P&&G&&H;if(ie<Er.MAX_VERTEX_ARRAY_LENGTH){const ve=A.prepareSegment(ie,c,y),Ke=ve.vertexLength;for(let et=0;et<R.length;et+=3)y.emplaceBack(Ke+R[et],Ke+R[et+1],Ke+R[et+2]);let Qe,Ve;ve.vertexLength+=ie,ve.primitiveLength+=R.length/3,Ae&&(Ve=P.prepareSegment(ie,c,G),Qe=Ve.vertexLength,Ve.vertexLength+=ie);for(let et=0;et<M.length;et+=2)h(M[et],M[et+1]);if(Ae)for(let et=0;et<H.length;et++){const ut=H[et];for(let Mt=1;Mt<ut.length;Mt+=2)G.emplaceBack(Qe+ut[Mt-1],Qe+ut[Mt]);Ve.primitiveLength+=ut.length/2}}else(function(ve,Ke,Qe,Ve,et,ut){const Mt=[];for(let Cn=0;Cn<Ve.length/2;Cn++)Mt.push(-1);const Qt={count:0};let Dt=0,zt=ve.getOrCreateLatestSegment(Ke,Qe),ln=zt.vertexLength;for(let Cn=2;Cn<et.length;Cn+=3){const Un=et[Cn-2],mi=et[Cn-1],ai=et[Cn];let di=Mt[Un]<Dt,tr=Mt[mi]<Dt,Ai=Mt[ai]<Dt;zt.vertexLength+((di?1:0)+(tr?1:0)+(Ai?1:0))>Er.MAX_VERTEX_ARRAY_LENGTH&&(zt=ve.createNewSegment(Ke,Qe),Dt=Qt.count,di=!0,tr=!0,Ai=!0,ln=0);const fi=mc(Mt,Ve,ut,Qt,Un,di,zt),En=mc(Mt,Ve,ut,Qt,mi,tr,zt),fr=mc(Mt,Ve,ut,Qt,ai,Ai,zt);Qe.emplaceBack(ln+fi-Dt,ln+En-Dt,ln+fr-Dt),zt.primitiveLength++}})(A,c,y,M,R,h),Ae&&function(ve,Ke,Qe,Ve,et,ut){const Mt=[];for(let Cn=0;Cn<Ve.length/2;Cn++)Mt.push(-1);const Qt={count:0};let Dt=0,zt=ve.getOrCreateLatestSegment(Ke,Qe),ln=zt.vertexLength;for(let Cn=0;Cn<et.length;Cn++){const Un=et[Cn];for(let mi=1;mi<et[Cn].length;mi+=2){const ai=Un[mi-1],di=Un[mi];let tr=Mt[ai]<Dt,Ai=Mt[di]<Dt;zt.vertexLength+((tr?1:0)+(Ai?1:0))>Er.MAX_VERTEX_ARRAY_LENGTH&&(zt=ve.createNewSegment(Ke,Qe),Dt=Qt.count,tr=!0,Ai=!0,ln=0);const fi=mc(Mt,Ve,ut,Qt,ai,tr,zt),En=mc(Mt,Ve,ut,Qt,di,Ai,zt);Qe.emplaceBack(ln+fi-Dt,ln+En-Dt),zt.primitiveLength++}}}(P,c,G,M,H,h),A.forceNewSegmentOnNextPrepare(),P?.forceNewSegmentOnNextPrepare()}function mc(h,A,c,y,M,R,P){if(R){const G=y.count;return c(A[2*M],A[2*M+1]),h[M]=y.count,y.count++,P.vertexLength++,G}return h[M]}class al{constructor(A){this.zoom=A.zoom,this.globalState=A.globalState,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(c=>c.id),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new dn,this.indexArray=new la,this.indexArray2=new Lo,this.programConfigurations=new Qa(A.layers,A.zoom),this.segments=new Er,this.segments2=new Er,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(A,c,y){this.hasPattern=_e("fill",this.layers,c);const M=this.layers[0].layout.get("fill-sort-key"),R=!M.isConstant(),P=[];for(const{feature:G,id:H,index:ie,sourceLayerIndex:Ae}of A){const ve=this.layers[0]._featureFilter.needGeometry,Ke=iu(G,ve);if(!this.layers[0]._featureFilter.filter(new Po(this.zoom,{globalState:this.globalState}),Ke,y))continue;const Qe=R?M.evaluate(Ke,{},y,c.availableImages):void 0,Ve={id:H,properties:G.properties,type:G.type,sourceLayerIndex:Ae,index:ie,geometry:ve?Ke.geometry:wa(G),patterns:{},sortKey:Qe};P.push(Ve)}R&&P.sort((G,H)=>G.sortKey-H.sortKey);for(const G of P){const{geometry:H,index:ie,sourceLayerIndex:Ae}=G;if(this.hasPattern){const ve=ke("fill",this.layers,G,{zoom:this.zoom,globalState:this.globalState},c);this.patternFeatures.push(ve)}else this.addFeature(G,H,ie,y,{},c.subdivisionGranularity);c.featureIndex.insert(A[ie].feature,H,ie,Ae,this.index)}}update(A,c,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,c,this.stateDependentLayers,{imagePositions:y,globalState:this.globalState})}addFeatures(A,c,y){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,c,y,A.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,fe),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.indexBuffer2=A.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(A),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(A,c,y,M,R,P){for(const G of qc(c,500)){const H=rh(G,M,P.fill.getGranularityForZoomLevel(M.z)),ie=this.layoutVertexArray;Ml((Ae,ve)=>{ie.emplaceBack(Ae,ve)},this.segments,this.layoutVertexArray,this.indexArray,H.verticesFlattened,H.indicesTriangles,this.segments2,this.indexArray2,H.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,y,{imagePositions:R,canonical:M,globalState:this.globalState})}}let pA,Vu;ci("FillBucket",al,{omit:["layers","patternFeatures"]});var od={get paint(){return Vu=Vu||new sa({"fill-antialias":new Oi(it.paint_fill["fill-antialias"]),"fill-opacity":new Ti(it.paint_fill["fill-opacity"]),"fill-color":new Ti(it.paint_fill["fill-color"]),"fill-outline-color":new Ti(it.paint_fill["fill-outline-color"]),"fill-translate":new Oi(it.paint_fill["fill-translate"]),"fill-translate-anchor":new Oi(it.paint_fill["fill-translate-anchor"]),"fill-pattern":new Tc(it.paint_fill["fill-pattern"])})},get layout(){return pA=pA||new sa({"fill-sort-key":new Ti(it.layout_fill["fill-sort-key"])})}};class uf extends Ql{constructor(A){super(A,od)}recalculate(A,c){super.recalculate(A,c);const y=this.paint._values["fill-outline-color"];y.value.kind==="constant"&&y.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(A){return new al(A)}queryRadius(){return kd(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:A,geometry:c,transform:y,pixelsToTileUnits:M}){return rd(Zs(A,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-y.bearingInRadians,M),c)}isTileClipped(){return!0}}const N1=ja([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),G1=ja([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Rd}=N1;class Im{constructor(A,c,y,M,R){this.properties={},this.extent=y,this.type=0,this.id=void 0,this._pbf=A,this._geometry=-1,this._keys=M,this._values=R,A.readFields(yp,this,c)}loadGeometry(){const A=this._pbf;A.pos=this._geometry;const c=A.readVarint()+A.pos,y=[];let M,R=1,P=0,G=0,H=0;for(;A.pos<c;){if(P<=0){const ie=A.readVarint();R=7&ie,P=ie>>3}if(P--,R===1||R===2)G+=A.readSVarint(),H+=A.readSVarint(),R===1&&(M&&y.push(M),M=[]),M&&M.push(new m(G,H));else{if(R!==7)throw new Error(`unknown command ${R}`);M&&M.push(M[0].clone())}}return M&&y.push(M),y}bbox(){const A=this._pbf;A.pos=this._geometry;const c=A.readVarint()+A.pos;let y=1,M=0,R=0,P=0,G=1/0,H=-1/0,ie=1/0,Ae=-1/0;for(;A.pos<c;){if(M<=0){const ve=A.readVarint();y=7&ve,M=ve>>3}if(M--,y===1||y===2)R+=A.readSVarint(),P+=A.readSVarint(),R<G&&(G=R),R>H&&(H=R),P<ie&&(ie=P),P>Ae&&(Ae=P);else if(y!==7)throw new Error(`unknown command ${y}`)}return[G,ie,H,Ae]}toGeoJSON(A,c,y){const M=this.extent*Math.pow(2,y),R=this.extent*A,P=this.extent*c,G=this.loadGeometry();function H(Ke){return[360*(Ke.x+R)/M-180,360/Math.PI*Math.atan(Math.exp((1-2*(Ke.y+P)/M)*Math.PI))-90]}function ie(Ke){return Ke.map(H)}let Ae;if(this.type===1){const Ke=[];for(const Ve of G)Ke.push(Ve[0]);const Qe=ie(Ke);Ae=Ke.length===1?{type:"Point",coordinates:Qe[0]}:{type:"MultiPoint",coordinates:Qe}}else if(this.type===2){const Ke=G.map(ie);Ae=Ke.length===1?{type:"LineString",coordinates:Ke[0]}:{type:"MultiLineString",coordinates:Ke}}else{if(this.type!==3)throw new Error("unknown feature type");{const Ke=function(Ve){const et=Ve.length;if(et<=1)return[Ve];const ut=[];let Mt,Qt;for(let Dt=0;Dt<et;Dt++){const zt=l0(Ve[Dt]);zt!==0&&(Qt===void 0&&(Qt=zt<0),Qt===zt<0?(Mt&&ut.push(Mt),Mt=[Ve[Dt]]):Mt&&Mt.push(Ve[Dt]))}return Mt&&ut.push(Mt),ut}(G),Qe=[];for(const Ve of Ke)Qe.push(Ve.map(ie));Ae=Qe.length===1?{type:"Polygon",coordinates:Qe[0]}:{type:"MultiPolygon",coordinates:Qe}}}const ve={type:"Feature",geometry:Ae,properties:this.properties};return this.id!=null&&(ve.id=this.id),ve}}function yp(h,A,c){h===1?A.id=c.readVarint():h===2?function(y,M){const R=y.readVarint()+y.pos;for(;y.pos<R;){const P=M._keys[y.readVarint()],G=M._values[y.readVarint()];M.properties[P]=G}}(c,A):h===3?A.type=c.readVarint():h===4&&(A._geometry=c.pos)}function l0(h){let A=0;for(let c,y,M=0,R=h.length,P=R-1;M<R;P=M++)c=h[M],y=h[P],A+=(y.x-c.x)*(c.y+y.y);return A}Im.types=["Unknown","Point","LineString","Polygon"];class wu{constructor(A,c){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=A,this._keys=[],this._values=[],this._features=[],A.readFields(vp,this,c),this.length=this._features.length}feature(A){if(A<0||A>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[A];const c=this._pbf.readVarint()+this._pbf.pos;return new Im(this._pbf,c,this.extent,this._keys,this._values)}}function vp(h,A,c){h===15?A.version=c.readVarint():h===1?A.name=c.readString():h===5?A.extent=c.readVarint():h===2?A._features.push(c.pos):h===3?A._keys.push(c.readString()):h===4&&A._values.push(function(y){let M=null;const R=y.readVarint()+y.pos;for(;y.pos<R;){const P=y.readVarint()>>3;M=P===1?y.readString():P===2?y.readFloat():P===3?y.readDouble():P===4?y.readVarint64():P===5?y.readVarint():P===6?y.readSVarint():P===7?y.readBoolean():null}if(M==null)throw new Error("unknown feature value");return M}(c))}class j1{constructor(A,c){this.layers=A.readFields(iy,{},c)}}function iy(h,A,c){if(h===3){const y=new wu(c,c.readVarint()+c.pos);y.length&&(A[y.name]=y)}}const Hf=Math.pow(2,13);function Cp(h,A,c,y,M,R,P,G){h.emplaceBack(A,c,2*Math.floor(y*Hf)+P,M*Hf*2,R*Hf*2,Math.round(G))}class _p{constructor(A){this.zoom=A.zoom,this.globalState=A.globalState,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(c=>c.id),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new Xt,this.centroidVertexArray=new Bt,this.indexArray=new la,this.programConfigurations=new Qa(A.layers,A.zoom),this.segments=new Er,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(A,c,y){this.features=[],this.hasPattern=_e("fill-extrusion",this.layers,c);for(const{feature:M,id:R,index:P,sourceLayerIndex:G}of A){const H=this.layers[0]._featureFilter.needGeometry,ie=iu(M,H);if(!this.layers[0]._featureFilter.filter(new Po(this.zoom,{globalState:this.globalState}),ie,y))continue;const Ae={id:R,sourceLayerIndex:G,index:P,geometry:H?ie.geometry:wa(M),properties:M.properties,type:M.type,patterns:{}};this.hasPattern?this.features.push(ke("fill-extrusion",this.layers,Ae,{zoom:this.zoom,globalState:this.globalState},c)):this.addFeature(Ae,Ae.geometry,P,y,{},c.subdivisionGranularity),c.featureIndex.insert(M,Ae.geometry,P,G,this.index,!0)}}addFeatures(A,c,y){for(const M of this.features){const{geometry:R}=M;this.addFeature(M,R,M.index,c,y,A.subdivisionGranularity)}}update(A,c,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,c,this.stateDependentLayers,{imagePositions:y,globalState:this.globalState})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Rd),this.centroidVertexBuffer=A.createVertexBuffer(this.centroidVertexArray,G1.members,!0),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(A,c,y,M,R,P){for(const G of qc(c,500)){const H={x:0,y:0,sampleCount:0},ie=this.layoutVertexArray.length;this.processPolygon(H,M,A,G,P);const Ae=this.layoutVertexArray.length-ie,ve=Math.floor(H.x/H.sampleCount),Ke=Math.floor(H.y/H.sampleCount);for(let Qe=0;Qe<Ae;Qe++)this.centroidVertexArray.emplaceBack(ve,Ke)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,y,{imagePositions:R,canonical:M,globalState:this.globalState})}processPolygon(A,c,y,M,R){if(M.length<1||Q0(M[0]))return;for(const ve of M)ve.length!==0&&ry(A,ve);const P={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},G=R.fill.getGranularityForZoomLevel(c.z),H=Im.types[y.type]==="Polygon";for(const ve of M){if(ve.length===0||Q0(ve))continue;const Ke=cs(ve,G,H);this._generateSideFaces(Ke,P)}if(!H)return;const ie=rh(M,c,G,!1),Ae=this.layoutVertexArray;Ml((ve,Ke)=>{Cp(Ae,ve,Ke,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,ie.verticesFlattened,ie.indicesTriangles)}_generateSideFaces(A,c){let y=0;for(let M=1;M<A.length;M++){const R=A[M],P=A[M-1];if(tC(R,P))continue;c.segment.vertexLength+4>Er.MAX_VERTEX_ARRAY_LENGTH&&(c.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const G=R.sub(P)._perp()._unit(),H=P.dist(R);y+H>32768&&(y=0),Cp(this.layoutVertexArray,R.x,R.y,G.x,G.y,0,0,y),Cp(this.layoutVertexArray,R.x,R.y,G.x,G.y,0,1,y),y+=H,Cp(this.layoutVertexArray,P.x,P.y,G.x,G.y,0,0,y),Cp(this.layoutVertexArray,P.x,P.y,G.x,G.y,0,1,y);const ie=c.segment.vertexLength;this.indexArray.emplaceBack(ie,ie+2,ie+1),this.indexArray.emplaceBack(ie+1,ie+2,ie+3),c.segment.vertexLength+=4,c.segment.primitiveLength+=2}}}function ry(h,A){for(let c=0;c<A.length;c++){const y=A[c];c===A.length-1&&A[0].x===y.x&&A[0].y===y.y||(h.x+=y.x,h.y+=y.y,h.sampleCount++)}}function tC(h,A){return h.x===A.x&&(h.x<0||h.x>nt)||h.y===A.y&&(h.y<0||h.y>nt)}function Q0(h){return h.every(A=>A.x<0)||h.every(A=>A.x>nt)||h.every(A=>A.y<0)||h.every(A=>A.y>nt)}let is;ci("FillExtrusionBucket",_p,{omit:["layers","features"]});var Gs={get paint(){return is=is||new sa({"fill-extrusion-opacity":new Oi(it["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ti(it["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Oi(it["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Oi(it["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Tc(it["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ti(it["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ti(it["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Oi(it["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class ta extends Ql{constructor(A){super(A,Gs)}createBucket(A){return new _p(A)}queryRadius(){return kd(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:A,feature:c,featureState:y,geometry:M,transform:R,pixelsToTileUnits:P,pixelPosMatrix:G}){const H=Zs(A,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-R.bearingInRadians,P),ie=this.paint.get("fill-extrusion-height").evaluate(c,y),Ae=this.paint.get("fill-extrusion-base").evaluate(c,y),ve=function(Qe,Ve){const et=[];for(const ut of Qe){const Mt=[ut.x,ut.y,0,1];qe(Mt,Mt,Ve),et.push(new m(Mt[0]/Mt[3],Mt[1]/Mt[3]))}return et}(H,G),Ke=function(Qe,Ve,et,ut){const Mt=[],Qt=[],Dt=ut[8]*Ve,zt=ut[9]*Ve,ln=ut[10]*Ve,Cn=ut[11]*Ve,Un=ut[8]*et,mi=ut[9]*et,ai=ut[10]*et,di=ut[11]*et;for(const tr of Qe){const Ai=[],fi=[];for(const En of tr){const fr=En.x,wr=En.y,sr=ut[0]*fr+ut[4]*wr+ut[12],Ui=ut[1]*fr+ut[5]*wr+ut[13],Gr=ut[2]*fr+ut[6]*wr+ut[14],Ka=ut[3]*fr+ut[7]*wr+ut[15],_s=Gr+ln,kl=Ka+Cn,Ou=sr+Un,Dl=Ui+mi,KA=Gr+ai,Ts=Ka+di,Al=new m((sr+Dt)/kl,(Ui+zt)/kl);Al.z=_s/kl,Ai.push(Al);const UA=new m(Ou/Ts,Dl/Ts);UA.z=KA/Ts,fi.push(UA)}Mt.push(Ai),Qt.push(fi)}return[Mt,Qt]}(M,Ae,ie,G);return function(Qe,Ve,et){let ut=1/0;rd(et,Ve)&&(ut=rs(et,Ve[0]));for(let Mt=0;Mt<Ve.length;Mt++){const Qt=Ve[Mt],Dt=Qe[Mt];for(let zt=0;zt<Qt.length-1;zt++){const ln=Qt[zt],Cn=[ln,Qt[zt+1],Dt[zt+1],Dt[zt],ln];mp(et,Cn)&&(ut=Math.min(ut,rs(et,Cn)))}}return ut!==1/0&&ut}(Ke[0],Ke[1],ve)}}function Yo(h,A){return h.x*A.x+h.y*A.y}function rs(h,A){if(h.length===1){let c=0;const y=A[c++];let M;for(;!M||y.equals(M);)if(M=A[c++],!M)return 1/0;for(;c<A.length;c++){const R=A[c],P=h[0],G=M.sub(y),H=R.sub(y),ie=P.sub(y),Ae=Yo(G,G),ve=Yo(G,H),Ke=Yo(H,H),Qe=Yo(ie,G),Ve=Yo(ie,H),et=Ae*Ke-ve*ve,ut=(Ke*Qe-ve*Ve)/et,Mt=(Ae*Ve-ve*Qe)/et,Qt=y.z*(1-ut-Mt)+M.z*ut+R.z*Mt;if(isFinite(Qt))return Qt}return 1/0}{let c=1/0;for(const y of A)c=Math.min(c,y.z);return c}}const oh=ja([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Vf}=oh,bp=ja([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:W1}=bp,cf=Math.cos(Math.PI/180*37.5),Sl=Math.pow(2,14)/.5;class Pd{constructor(A){this.zoom=A.zoom,this.globalState=A.globalState,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(c=>c.id),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(c=>{this.gradients[c.id]={}}),this.layoutVertexArray=new nn,this.layoutVertexArray2=new An,this.indexArray=new la,this.programConfigurations=new Qa(A.layers,A.zoom),this.segments=new Er,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(A,c,y){this.hasPattern=_e("line",this.layers,c);const M=this.layers[0].layout.get("line-sort-key"),R=!M.isConstant(),P=[];for(const{feature:G,id:H,index:ie,sourceLayerIndex:Ae}of A){const ve=this.layers[0]._featureFilter.needGeometry,Ke=iu(G,ve);if(!this.layers[0]._featureFilter.filter(new Po(this.zoom,{globalState:this.globalState}),Ke,y))continue;const Qe=R?M.evaluate(Ke,{},y):void 0,Ve={id:H,properties:G.properties,type:G.type,sourceLayerIndex:Ae,index:ie,geometry:ve?Ke.geometry:wa(G),patterns:{},sortKey:Qe};P.push(Ve)}R&&P.sort((G,H)=>G.sortKey-H.sortKey);for(const G of P){const{geometry:H,index:ie,sourceLayerIndex:Ae}=G;if(this.hasPattern){const ve=ke("line",this.layers,G,{zoom:this.zoom,globalState:this.globalState},c);this.patternFeatures.push(ve)}else this.addFeature(G,H,ie,y,{},c.subdivisionGranularity);c.featureIndex.insert(A[ie].feature,H,ie,Ae,this.index)}}update(A,c,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,c,this.stateDependentLayers,{imagePositions:y,globalState:this.globalState})}addFeatures(A,c,y){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,c,y,A.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(A){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=A.createVertexBuffer(this.layoutVertexArray2,W1)),this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Vf),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(A){if(A.properties&&Object.prototype.hasOwnProperty.call(A.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(A.properties,"mapbox_clip_end"))return{start:+A.properties.mapbox_clip_start,end:+A.properties.mapbox_clip_end}}addFeature(A,c,y,M,R,P){const G=this.layers[0].layout,H=G.get("line-join").evaluate(A,{}),ie=G.get("line-cap"),Ae=G.get("line-miter-limit"),ve=G.get("line-round-limit");this.lineClips=this.lineFeatureClips(A);for(const Ke of c)this.addLine(Ke,A,H,ie,Ae,ve,M,P);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,y,{imagePositions:R,canonical:M,globalState:this.globalState})}addLine(A,c,y,M,R,P,G,H){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,A=cs(A,G?H.line.getGranularityForZoomLevel(G.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Dt=0;Dt<A.length-1;Dt++)this.totalDistance+=A[Dt].dist(A[Dt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const ie=Im.types[c.type]==="Polygon";let Ae=A.length;for(;Ae>=2&&A[Ae-1].equals(A[Ae-2]);)Ae--;let ve=0;for(;ve<Ae-1&&A[ve].equals(A[ve+1]);)ve++;if(Ae<(ie?3:2))return;y==="bevel"&&(R=1.05);const Ke=this.overscaling<=16?122880/(512*this.overscaling):0,Qe=this.segments.prepareSegment(10*Ae,this.layoutVertexArray,this.indexArray);let Ve,et,ut,Mt,Qt;this.e1=this.e2=-1,ie&&(Ve=A[Ae-2],Qt=A[ve].sub(Ve)._unit()._perp());for(let Dt=ve;Dt<Ae;Dt++){if(ut=Dt===Ae-1?ie?A[ve+1]:void 0:A[Dt+1],ut&&A[Dt].equals(ut))continue;Qt&&(Mt=Qt),Ve&&(et=Ve),Ve=A[Dt],Qt=ut?ut.sub(Ve)._unit()._perp():Mt,Mt=Mt||Qt;let zt=Mt.add(Qt);zt.x===0&&zt.y===0||zt._unit();const ln=Mt.x*Qt.x+Mt.y*Qt.y,Cn=zt.x*Qt.x+zt.y*Qt.y,Un=Cn!==0?1/Cn:1/0,mi=2*Math.sqrt(2-2*Cn),ai=Cn<cf&&et&&ut,di=Mt.x*Qt.y-Mt.y*Qt.x>0;if(ai&&Dt>ve){const fi=Ve.dist(et);if(fi>2*Ke){const En=Ve.sub(Ve.sub(et)._mult(Ke/fi)._round());this.updateDistance(et,En),this.addCurrentVertex(En,Mt,0,0,Qe),et=En}}const tr=et&&ut;let Ai=tr?y:ie?"butt":M;if(tr&&Ai==="round"&&(Un<P?Ai="miter":Un<=2&&(Ai="fakeround")),Ai==="miter"&&Un>R&&(Ai="bevel"),Ai==="bevel"&&(Un>2&&(Ai="flipbevel"),Un<R&&(Ai="miter")),et&&this.updateDistance(et,Ve),Ai==="miter")zt._mult(Un),this.addCurrentVertex(Ve,zt,0,0,Qe);else if(Ai==="flipbevel"){if(Un>100)zt=Qt.mult(-1);else{const fi=Un*Mt.add(Qt).mag()/Mt.sub(Qt).mag();zt._perp()._mult(fi*(di?-1:1))}this.addCurrentVertex(Ve,zt,0,0,Qe),this.addCurrentVertex(Ve,zt.mult(-1),0,0,Qe)}else if(Ai==="bevel"||Ai==="fakeround"){const fi=-Math.sqrt(Un*Un-1),En=di?fi:0,fr=di?0:fi;if(et&&this.addCurrentVertex(Ve,Mt,En,fr,Qe),Ai==="fakeround"){const wr=Math.round(180*mi/Math.PI/20);for(let sr=1;sr<wr;sr++){let Ui=sr/wr;if(Ui!==.5){const Ka=Ui-.5;Ui+=Ui*Ka*(Ui-1)*((1.0904+ln*(ln*(3.55645-1.43519*ln)-3.2452))*Ka*Ka+(.848013+ln*(.215638*ln-1.06021)))}const Gr=Qt.sub(Mt)._mult(Ui)._add(Mt)._unit()._mult(di?-1:1);this.addHalfVertex(Ve,Gr.x,Gr.y,!1,di,0,Qe)}}ut&&this.addCurrentVertex(Ve,Qt,-En,-fr,Qe)}else if(Ai==="butt")this.addCurrentVertex(Ve,zt,0,0,Qe);else if(Ai==="square"){const fi=et?1:-1;this.addCurrentVertex(Ve,zt,fi,fi,Qe)}else Ai==="round"&&(et&&(this.addCurrentVertex(Ve,Mt,0,0,Qe),this.addCurrentVertex(Ve,Mt,1,1,Qe,!0)),ut&&(this.addCurrentVertex(Ve,Qt,-1,-1,Qe,!0),this.addCurrentVertex(Ve,Qt,0,0,Qe)));if(ai&&Dt<Ae-1){const fi=Ve.dist(ut);if(fi>2*Ke){const En=Ve.add(ut.sub(Ve)._mult(Ke/fi)._round());this.updateDistance(Ve,En),this.addCurrentVertex(En,Qt,0,0,Qe),Ve=En}}}}addCurrentVertex(A,c,y,M,R,P=!1){const G=c.y*M-c.x,H=-c.y-c.x*M;this.addHalfVertex(A,c.x+c.y*y,c.y-c.x*y,P,!1,y,R),this.addHalfVertex(A,G,H,P,!0,-M,R),this.distance>Sl/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(A,c,y,M,R,P))}addHalfVertex({x:A,y:c},y,M,R,P,G,H){const ie=.5*(this.lineClips?this.scaledDistance*(Sl-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((A<<1)+(R?1:0),(c<<1)+(P?1:0),Math.round(63*y)+128,Math.round(63*M)+128,1+(G===0?0:G<0?-1:1)|(63&ie)<<2,ie>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Ae=H.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,Ae,this.e2),H.primitiveLength++),P?this.e2=Ae:this.e1=Ae}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(A,c){this.distance+=A.dist(c),this.updateScaledDistance()}}let $f,Y0;ci("LineBucket",Pd,{omit:["layers","patternFeatures"]});var ah={get paint(){return Y0=Y0||new sa({"line-opacity":new Ti(it.paint_line["line-opacity"]),"line-color":new Ti(it.paint_line["line-color"]),"line-translate":new Oi(it.paint_line["line-translate"]),"line-translate-anchor":new Oi(it.paint_line["line-translate-anchor"]),"line-width":new Ti(it.paint_line["line-width"]),"line-gap-width":new Ti(it.paint_line["line-gap-width"]),"line-offset":new Ti(it.paint_line["line-offset"]),"line-blur":new Ti(it.paint_line["line-blur"]),"line-dasharray":new DA(it.paint_line["line-dasharray"]),"line-pattern":new Tc(it.paint_line["line-pattern"]),"line-gradient":new uA(it.paint_line["line-gradient"])})},get layout(){return $f=$f||new sa({"line-cap":new Oi(it.layout_line["line-cap"]),"line-join":new Ti(it.layout_line["line-join"]),"line-miter-limit":new Oi(it.layout_line["line-miter-limit"]),"line-round-limit":new Oi(it.layout_line["line-round-limit"]),"line-sort-key":new Ti(it.layout_line["line-sort-key"])})}};class xp extends Ti{possiblyEvaluate(A,c){return c=new Po(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),super.possiblyEvaluate(A,c)}evaluate(A,c,y,M){return c=Le({},c,{zoom:Math.floor(c.zoom)}),super.evaluate(A,c,y,M)}}let Zf;class Uc extends Ql{constructor(A){super(A,ah),this.gradientVersion=0,Zf||(Zf=new xp(ah.paint.properties["line-width"].specification),Zf.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(A){if(A==="line-gradient"){const c=this.gradientExpression();this.stepInterpolant=!!function(y){return y._styleExpression!==void 0}(c)&&c._styleExpression.expression instanceof zr,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(A,c){super.recalculate(A,c),this.paint._values["line-floorwidth"]=Zf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,A)}createBucket(A){return new Pd(A)}queryRadius(A){const c=A,y=q0(ru("line-width",this,c),ru("line-gap-width",this,c)),M=ru("line-offset",this,c);return y/2+Math.abs(M)+kd(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:A,feature:c,featureState:y,geometry:M,transform:R,pixelsToTileUnits:P}){const G=Zs(A,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-R.bearingInRadians,P),H=P/2*q0(this.paint.get("line-width").evaluate(c,y),this.paint.get("line-gap-width").evaluate(c,y)),ie=this.paint.get("line-offset").evaluate(c,y);return ie&&(M=function(Ae,ve){const Ke=[];for(let Qe=0;Qe<Ae.length;Qe++){const Ve=Ae[Qe],et=[];for(let ut=0;ut<Ve.length;ut++){const Mt=Ve[ut-1],Qt=Ve[ut],Dt=Ve[ut+1],zt=ut===0?new m(0,0):Qt.sub(Mt)._unit()._perp(),ln=ut===Ve.length-1?new m(0,0):Dt.sub(Qt)._unit()._perp(),Cn=zt._add(ln)._unit(),Un=Cn.x*ln.x+Cn.y*ln.y;Un!==0&&Cn._mult(1/Un),et.push(Cn._mult(ve)._add(Qt))}Ke.push(et)}return Ke}(M,ie*P)),function(Ae,ve,Ke){for(let Qe=0;Qe<ve.length;Qe++){const Ve=ve[Qe];if(Ae.length>=3){for(let et=0;et<Ve.length;et++)if(Ih(Ae,Ve[et]))return!0}if(Gf(Ae,Ve,Ke))return!0}return!1}(G,M,H)}isTileClipped(){return!0}}function q0(h,A){return A>0?A+2*h:h}const Q1=ja([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Mp=ja([{name:"a_projected_pos",components:3,type:"Float32"}],4);ja([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const A0=ja([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);ja([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const hf=ja([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Eu=ja([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Xf(h,A,c){return h.sections.forEach(y=>{y.text=function(M,R,P){const G=R.layout.get("text-transform").evaluate(P,{});return G==="uppercase"?M=M.toLocaleUpperCase():G==="lowercase"&&(M=M.toLocaleLowerCase()),jl.applyArabicShaping&&(M=jl.applyArabicShaping(M)),M}(y.text,A,c)}),h}ja([{name:"triangle",components:3,type:"Uint16"}]),ja([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ja([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),ja([{type:"Float32",name:"offsetX"}]),ja([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),ja([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Kd={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Xs=24;const u0=4294967296,H0=1/u0,Y1=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Jf{constructor(A=new Uint8Array(16)){this.buf=ArrayBuffer.isView(A)?A:new Uint8Array(A),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(A,c,y=this.length){for(;this.pos<y;){const M=this.readVarint(),R=M>>3,P=this.pos;this.type=7&M,A(R,c,this),this.pos===P&&this.skip(M)}return c}readMessage(A,c){return this.readFields(A,c,this.readVarint()+this.pos)}readFixed32(){const A=this.dataView.getUint32(this.pos,!0);return this.pos+=4,A}readSFixed32(){const A=this.dataView.getInt32(this.pos,!0);return this.pos+=4,A}readFixed64(){const A=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*u0;return this.pos+=8,A}readSFixed64(){const A=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*u0;return this.pos+=8,A}readFloat(){const A=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,A}readDouble(){const A=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,A}readVarint(A){const c=this.buf;let y,M;return M=c[this.pos++],y=127&M,M<128?y:(M=c[this.pos++],y|=(127&M)<<7,M<128?y:(M=c[this.pos++],y|=(127&M)<<14,M<128?y:(M=c[this.pos++],y|=(127&M)<<21,M<128?y:(M=c[this.pos],y|=(15&M)<<28,function(R,P,G){const H=G.buf;let ie,Ae;if(Ae=H[G.pos++],ie=(112&Ae)>>4,Ae<128||(Ae=H[G.pos++],ie|=(127&Ae)<<3,Ae<128)||(Ae=H[G.pos++],ie|=(127&Ae)<<10,Ae<128)||(Ae=H[G.pos++],ie|=(127&Ae)<<17,Ae<128)||(Ae=H[G.pos++],ie|=(127&Ae)<<24,Ae<128)||(Ae=H[G.pos++],ie|=(1&Ae)<<31,Ae<128))return em(R,ie,P);throw new Error("Expected varint not more than 10 bytes")}(y,A,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const A=this.readVarint();return A%2==1?(A+1)/-2:A/2}readBoolean(){return!!this.readVarint()}readString(){const A=this.readVarint()+this.pos,c=this.pos;return this.pos=A,A-c>=12&&Y1?Y1.decode(this.buf.subarray(c,A)):function(y,M,R){let P="",G=M;for(;G<R;){const H=y[G];let ie,Ae,ve,Ke=null,Qe=H>239?4:H>223?3:H>191?2:1;if(G+Qe>R)break;Qe===1?H<128&&(Ke=H):Qe===2?(ie=y[G+1],(192&ie)==128&&(Ke=(31&H)<<6|63&ie,Ke<=127&&(Ke=null))):Qe===3?(ie=y[G+1],Ae=y[G+2],(192&ie)==128&&(192&Ae)==128&&(Ke=(15&H)<<12|(63&ie)<<6|63&Ae,(Ke<=2047||Ke>=55296&&Ke<=57343)&&(Ke=null))):Qe===4&&(ie=y[G+1],Ae=y[G+2],ve=y[G+3],(192&ie)==128&&(192&Ae)==128&&(192&ve)==128&&(Ke=(15&H)<<18|(63&ie)<<12|(63&Ae)<<6|63&ve,(Ke<=65535||Ke>=1114112)&&(Ke=null))),Ke===null?(Ke=65533,Qe=1):Ke>65535&&(Ke-=65536,P+=String.fromCharCode(Ke>>>10&1023|55296),Ke=56320|1023&Ke),P+=String.fromCharCode(Ke),G+=Qe}return P}(this.buf,c,A)}readBytes(){const A=this.readVarint()+this.pos,c=this.buf.subarray(this.pos,A);return this.pos=A,c}readPackedVarint(A=[],c){const y=this.readPackedEnd();for(;this.pos<y;)A.push(this.readVarint(c));return A}readPackedSVarint(A=[]){const c=this.readPackedEnd();for(;this.pos<c;)A.push(this.readSVarint());return A}readPackedBoolean(A=[]){const c=this.readPackedEnd();for(;this.pos<c;)A.push(this.readBoolean());return A}readPackedFloat(A=[]){const c=this.readPackedEnd();for(;this.pos<c;)A.push(this.readFloat());return A}readPackedDouble(A=[]){const c=this.readPackedEnd();for(;this.pos<c;)A.push(this.readDouble());return A}readPackedFixed32(A=[]){const c=this.readPackedEnd();for(;this.pos<c;)A.push(this.readFixed32());return A}readPackedSFixed32(A=[]){const c=this.readPackedEnd();for(;this.pos<c;)A.push(this.readSFixed32());return A}readPackedFixed64(A=[]){const c=this.readPackedEnd();for(;this.pos<c;)A.push(this.readFixed64());return A}readPackedSFixed64(A=[]){const c=this.readPackedEnd();for(;this.pos<c;)A.push(this.readSFixed64());return A}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(A){const c=7&A;if(c===0)for(;this.buf[this.pos++]>127;);else if(c===2)this.pos=this.readVarint()+this.pos;else if(c===5)this.pos+=4;else{if(c!==1)throw new Error(`Unimplemented type: ${c}`);this.pos+=8}}writeTag(A,c){this.writeVarint(A<<3|c)}realloc(A){let c=this.length||16;for(;c<this.pos+A;)c*=2;if(c!==this.length){const y=new Uint8Array(c);y.set(this.buf),this.buf=y,this.dataView=new DataView(y.buffer),this.length=c}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(A){this.realloc(4),this.dataView.setInt32(this.pos,A,!0),this.pos+=4}writeSFixed32(A){this.realloc(4),this.dataView.setInt32(this.pos,A,!0),this.pos+=4}writeFixed64(A){this.realloc(8),this.dataView.setInt32(this.pos,-1&A,!0),this.dataView.setInt32(this.pos+4,Math.floor(A*H0),!0),this.pos+=8}writeSFixed64(A){this.realloc(8),this.dataView.setInt32(this.pos,-1&A,!0),this.dataView.setInt32(this.pos+4,Math.floor(A*H0),!0),this.pos+=8}writeVarint(A){(A=+A||0)>268435455||A<0?function(c,y){let M,R;if(c>=0?(M=c%4294967296|0,R=c/4294967296|0):(M=~(-c%4294967296),R=~(-c/4294967296),4294967295^M?M=M+1|0:(M=0,R=R+1|0)),c>=18446744073709552e3||c<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");y.realloc(10),function(P,G,H){H.buf[H.pos++]=127&P|128,P>>>=7,H.buf[H.pos++]=127&P|128,P>>>=7,H.buf[H.pos++]=127&P|128,P>>>=7,H.buf[H.pos++]=127&P|128,H.buf[H.pos]=127&(P>>>=7)}(M,0,y),function(P,G){const H=(7&P)<<4;G.buf[G.pos++]|=H|((P>>>=3)?128:0),P&&(G.buf[G.pos++]=127&P|((P>>>=7)?128:0),P&&(G.buf[G.pos++]=127&P|((P>>>=7)?128:0),P&&(G.buf[G.pos++]=127&P|((P>>>=7)?128:0),P&&(G.buf[G.pos++]=127&P|((P>>>=7)?128:0),P&&(G.buf[G.pos++]=127&P)))))}(R,y)}(A,this):(this.realloc(4),this.buf[this.pos++]=127&A|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=A>>>7&127))))}writeSVarint(A){this.writeVarint(A<0?2*-A-1:2*A)}writeBoolean(A){this.writeVarint(+A)}writeString(A){A=String(A),this.realloc(4*A.length),this.pos++;const c=this.pos;this.pos=function(M,R,P){for(let G,H,ie=0;ie<R.length;ie++){if(G=R.charCodeAt(ie),G>55295&&G<57344){if(!H){G>56319||ie+1===R.length?(M[P++]=239,M[P++]=191,M[P++]=189):H=G;continue}if(G<56320){M[P++]=239,M[P++]=191,M[P++]=189,H=G;continue}G=H-55296<<10|G-56320|65536,H=null}else H&&(M[P++]=239,M[P++]=191,M[P++]=189,H=null);G<128?M[P++]=G:(G<2048?M[P++]=G>>6|192:(G<65536?M[P++]=G>>12|224:(M[P++]=G>>18|240,M[P++]=G>>12&63|128),M[P++]=G>>6&63|128),M[P++]=63&G|128)}return P}(this.buf,A,this.pos);const y=this.pos-c;y>=128&&Bu(c,y,this),this.pos=c-1,this.writeVarint(y),this.pos+=y}writeFloat(A){this.realloc(4),this.dataView.setFloat32(this.pos,A,!0),this.pos+=4}writeDouble(A){this.realloc(8),this.dataView.setFloat64(this.pos,A,!0),this.pos+=8}writeBytes(A){const c=A.length;this.writeVarint(c),this.realloc(c);for(let y=0;y<c;y++)this.buf[this.pos++]=A[y]}writeRawMessage(A,c){this.pos++;const y=this.pos;A(c,this);const M=this.pos-y;M>=128&&Bu(y,M,this),this.pos=y-1,this.writeVarint(M),this.pos+=M}writeMessage(A,c,y){this.writeTag(A,2),this.writeRawMessage(c,y)}writePackedVarint(A,c){c.length&&this.writeMessage(A,oy,c)}writePackedSVarint(A,c){c.length&&this.writeMessage(A,sh,c)}writePackedBoolean(A,c){c.length&&this.writeMessage(A,nC,c)}writePackedFloat(A,c){c.length&&this.writeMessage(A,ay,c)}writePackedDouble(A,c){c.length&&this.writeMessage(A,sy,c)}writePackedFixed32(A,c){c.length&&this.writeMessage(A,tm,c)}writePackedSFixed32(A,c){c.length&&this.writeMessage(A,V0,c)}writePackedFixed64(A,c){c.length&&this.writeMessage(A,q1,c)}writePackedSFixed64(A,c){c.length&&this.writeMessage(A,Sp,c)}writeBytesField(A,c){this.writeTag(A,2),this.writeBytes(c)}writeFixed32Field(A,c){this.writeTag(A,5),this.writeFixed32(c)}writeSFixed32Field(A,c){this.writeTag(A,5),this.writeSFixed32(c)}writeFixed64Field(A,c){this.writeTag(A,1),this.writeFixed64(c)}writeSFixed64Field(A,c){this.writeTag(A,1),this.writeSFixed64(c)}writeVarintField(A,c){this.writeTag(A,0),this.writeVarint(c)}writeSVarintField(A,c){this.writeTag(A,0),this.writeSVarint(c)}writeStringField(A,c){this.writeTag(A,2),this.writeString(c)}writeFloatField(A,c){this.writeTag(A,5),this.writeFloat(c)}writeDoubleField(A,c){this.writeTag(A,1),this.writeDouble(c)}writeBooleanField(A,c){this.writeVarintField(A,+c)}}function em(h,A,c){return c?4294967296*A+(h>>>0):4294967296*(A>>>0)+(h>>>0)}function Bu(h,A,c){const y=A<=16383?1:A<=2097151?2:A<=268435455?3:Math.floor(Math.log(A)/(7*Math.LN2));c.realloc(y);for(let M=c.pos-1;M>=h;M--)c.buf[M+y]=c.buf[M]}function oy(h,A){for(let c=0;c<h.length;c++)A.writeVarint(h[c])}function sh(h,A){for(let c=0;c<h.length;c++)A.writeSVarint(h[c])}function ay(h,A){for(let c=0;c<h.length;c++)A.writeFloat(h[c])}function sy(h,A){for(let c=0;c<h.length;c++)A.writeDouble(h[c])}function nC(h,A){for(let c=0;c<h.length;c++)A.writeBoolean(h[c])}function tm(h,A){for(let c=0;c<h.length;c++)A.writeFixed32(h[c])}function V0(h,A){for(let c=0;c<h.length;c++)A.writeSFixed32(h[c])}function q1(h,A){for(let c=0;c<h.length;c++)A.writeFixed64(h[c])}function Sp(h,A){for(let c=0;c<h.length;c++)A.writeSFixed64(h[c])}function ly(h,A,c){h===1&&c.readMessage(Ay,A)}function Ay(h,A,c){if(h===3){const{id:y,bitmap:M,width:R,height:P,left:G,top:H,advance:ie}=c.readMessage(uy,{});A.push({id:y,bitmap:new Hu({width:R+6,height:P+6},M),metrics:{width:R,height:P,left:G,top:H,advance:ie}})}}function uy(h,A,c){h===1?A.id=c.readVarint():h===2?A.bitmap=c.readBytes():h===3?A.width=c.readVarint():h===4?A.height=c.readVarint():h===5?A.left=c.readSVarint():h===6?A.top=c.readSVarint():h===7&&(A.advance=c.readVarint())}function $0(h){let A=0,c=0;for(const P of h)A+=P.w*P.h,c=Math.max(c,P.w);h.sort((P,G)=>G.h-P.h);const y=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(A/.95)),c),h:1/0}];let M=0,R=0;for(const P of h)for(let G=y.length-1;G>=0;G--){const H=y[G];if(!(P.w>H.w||P.h>H.h)){if(P.x=H.x,P.y=H.y,R=Math.max(R,P.y+P.h),M=Math.max(M,P.x+P.w),P.w===H.w&&P.h===H.h){const ie=y.pop();ie&&G<y.length&&(y[G]=ie)}else P.h===H.h?(H.x+=P.w,H.w-=P.w):P.w===H.w?(H.y+=P.h,H.h-=P.h):(y.push({x:H.x+P.w,y:H.y,w:H.w-P.w,h:P.h}),H.y+=P.h,H.h-=P.h);break}}return{w:M,h:R,fill:A/(M*R)||0}}class c0{constructor(A,{pixelRatio:c,version:y,stretchX:M,stretchY:R,content:P,textFitWidth:G,textFitHeight:H}){this.paddedRect=A,this.pixelRatio=c,this.stretchX=M,this.stretchY=R,this.content=P,this.version=y,this.textFitWidth=G,this.textFitHeight=H}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class cy{constructor(A,c){const y={},M={};this.haveRenderCallbacks=[];const R=[];this.addImages(A,y,R),this.addImages(c,M,R);const{w:P,h:G}=$0(R),H=new fA({width:P||1,height:G||1});for(const ie in A){const Ae=A[ie],ve=y[ie].paddedRect;fA.copy(Ae.data,H,{x:0,y:0},{x:ve.x+1,y:ve.y+1},Ae.data)}for(const ie in c){const Ae=c[ie],ve=M[ie].paddedRect,Ke=ve.x+1,Qe=ve.y+1,Ve=Ae.data.width,et=Ae.data.height;fA.copy(Ae.data,H,{x:0,y:0},{x:Ke,y:Qe},Ae.data),fA.copy(Ae.data,H,{x:0,y:et-1},{x:Ke,y:Qe-1},{width:Ve,height:1}),fA.copy(Ae.data,H,{x:0,y:0},{x:Ke,y:Qe+et},{width:Ve,height:1}),fA.copy(Ae.data,H,{x:Ve-1,y:0},{x:Ke-1,y:Qe},{width:1,height:et}),fA.copy(Ae.data,H,{x:0,y:0},{x:Ke+Ve,y:Qe},{width:1,height:et})}this.image=H,this.iconPositions=y,this.patternPositions=M}addImages(A,c,y){for(const M in A){const R=A[M],P={x:0,y:0,w:R.data.width+2,h:R.data.height+2};y.push(P),c[M]=new c0(P,R),R.hasRenderCallback&&this.haveRenderCallbacks.push(M)}}patchUpdatedImages(A,c){A.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const y in A.updatedImages)this.patchUpdatedImage(this.iconPositions[y],A.getImage(y),c),this.patchUpdatedImage(this.patternPositions[y],A.getImage(y),c)}patchUpdatedImage(A,c,y){if(!A||!c||A.version===c.version)return;A.version=c.version;const[M,R]=A.tl;y.update(c.data,void 0,{x:M,y:R})}}var nm;ci("ImagePosition",c0),ci("ImageAtlas",cy),l.ao=void 0,(nm=l.ao||(l.ao={}))[nm.none=0]="none",nm[nm.horizontal=1]="horizontal",nm[nm.vertical=2]="vertical",nm[nm.horizontalOnly=3]="horizontalOnly";class wp{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(A,c,y){const M=new wp;return M.scale=A||1,M.fontStack=c,M.verticalAlign=y||"bottom",M}static forImage(A,c){const y=new wp;return y.imageName=A,y.verticalAlign=c||"bottom",y}}class im{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(A,c){const y=new im;for(let M=0;M<A.sections.length;M++){const R=A.sections[M];R.image?y.addImageSection(R):y.addTextSection(R,c)}return y}length(){return this.text.length}getSection(A){return this.sections[this.sectionIndex[A]]}getSectionIndex(A){return this.sectionIndex[A]}getCharCode(A){return this.text.charCodeAt(A)}verticalizePunctuation(){this.text=function(A){let c="";for(let y=0;y<A.length;y++){const M=A.charCodeAt(y+1)||null,R=A.charCodeAt(y-1)||null;c+=M&&nh(M)&&!Kd[A[y+1]]||R&&nh(R)&&!Kd[A[y-1]]||!Kd[A[y]]?A[y]:Kd[A[y]]}return c}(this.text)}trim(){let A=0;for(let y=0;y<this.text.length&&df[this.text.charCodeAt(y)];y++)A++;let c=this.text.length;for(let y=this.text.length-1;y>=0&&y>=A&&df[this.text.charCodeAt(y)];y--)c--;this.text=this.text.substring(A,c),this.sectionIndex=this.sectionIndex.slice(A,c)}substring(A,c){const y=new im;return y.text=this.text.substring(A,c),y.sectionIndex=this.sectionIndex.slice(A,c),y.sections=this.sections,y}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((A,c)=>Math.max(A,this.sections[c].scale),0)}getMaxImageSize(A){let c=0,y=0;for(let M=0;M<this.length();M++){const R=this.getSection(M);if(R.imageName){const P=A[R.imageName];if(!P)continue;const G=P.displaySize;c=Math.max(c,G[0]),y=Math.max(y,G[1])}}return{maxImageWidth:c,maxImageHeight:y}}addTextSection(A,c){this.text+=A.text,this.sections.push(wp.forText(A.scale,A.fontStack||c,A.verticalAlign));const y=this.sections.length-1;for(let M=0;M<A.text.length;++M)this.sectionIndex.push(y)}addImageSection(A){const c=A.image?A.image.name:"";if(c.length===0)return void Ot("Can't add FormattedSection with an empty image.");const y=this.getNextImageSectionCharCode();y?(this.text+=String.fromCharCode(y),this.sections.push(wp.forImage(c,A.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Ot("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function h0(h,A,c,y,M,R,P,G,H,ie,Ae,ve,Ke,Qe,Ve){const et=im.fromFeature(h,M);let ut;ve===l.ao.vertical&&et.verticalizePunctuation();const{processBidirectionalText:Mt,processStyledBidirectionalText:Qt}=jl;if(Mt&&et.sections.length===1){ut=[];const ln=Mt(et.toString(),Bp(et,ie,R,A,y,Qe));for(const Cn of ln){const Un=new im;Un.text=Cn,Un.sections=et.sections;for(let mi=0;mi<Cn.length;mi++)Un.sectionIndex.push(0);ut.push(Un)}}else if(Qt){ut=[];const ln=Qt(et.text,et.sectionIndex,Bp(et,ie,R,A,y,Qe));for(const Cn of ln){const Un=new im;Un.text=Cn[0],Un.sectionIndex=Cn[1],Un.sections=et.sections,ut.push(Un)}}else ut=function(ln,Cn){const Un=[],mi=ln.text;let ai=0;for(const di of Cn)Un.push(ln.substring(ai,di)),ai=di;return ai<mi.length&&Un.push(ln.substring(ai,mi.length)),Un}(et,Bp(et,ie,R,A,y,Qe));const Dt=[],zt={positionedLines:Dt,text:et.toString(),top:Ae[1],bottom:Ae[1],left:Ae[0],right:Ae[0],writingMode:ve,iconsInText:!1,verticalizable:!1};return function(ln,Cn,Un,mi,ai,di,tr,Ai,fi,En,fr,wr){let sr=0,Ui=0,Gr=0,Ka=0;const _s=Ai==="right"?1:Ai==="left"?0:.5,kl=Xs/wr;let Ou=0;for(const Ts of ai){Ts.trim();const Al=Ts.getMaxScale(),UA={positionedGlyphs:[],lineOffset:0};ln.positionedLines[Ou]=UA;const gA=UA.positionedGlyphs;let LA=0;if(!Ts.length()){Ui+=di,++Ou;continue}const Fc=fy(mi,Ts,kl);for(let au=0;au<Ts.length();au++){const ul=Ts.getSection(au),Jl=Ts.getSectionIndex(au),cl=Ts.getCharCode(au),hl=Z1(fi,fr,cl);let Ya;if(ul.imageName){if(ln.iconsInText=!0,ul.scale=ul.scale*kl,Ya=my(ul,hl,Al,Fc,mi),!Ya)continue;LA=Math.max(LA,Ya.imageOffset)}else if(Ya=iC(ul,cl,hl,Fc,Cn,Un),!Ya)continue;const{rect:Dh,metrics:Kp,baselineOffset:zc}=Ya;gA.push({glyph:cl,imageName:ul.imageName,x:sr,y:Ui+zc+-17,vertical:hl,scale:ul.scale,fontStack:ul.fontStack,sectionIndex:Jl,metrics:Kp,rect:Dh}),hl?(ln.verticalizable=!0,sr+=(ul.imageName?Kp.advance:Xs)*ul.scale+En):sr+=Kp.advance*ul.scale+En}gA.length!==0&&(Gr=Math.max(sr-En,Gr),J0(gA,0,gA.length-1,_s)),sr=0,UA.lineOffset=Math.max(LA,(Al-1)*Xs);const yA=di*Al+LA;Ui+=yA,Ka=Math.max(yA,Ka),++Ou}const{horizontalAlign:Dl,verticalAlign:KA}=X0(tr);(function(Ts,Al,UA,gA,LA,Fc,yA,au,ul){const Jl=(Al-UA)*LA;let cl=0;cl=Fc!==yA?-au*gA- -17:-gA*ul*yA+.5*yA;for(const hl of Ts)for(const Ya of hl.positionedGlyphs)Ya.x+=Jl,Ya.y+=cl})(ln.positionedLines,_s,Dl,KA,Gr,Ka,di,Ui,ai.length),ln.top+=-KA*Ui,ln.bottom=ln.top+Ui,ln.left+=-Dl*Gr,ln.right=ln.left+Gr}(zt,A,c,y,ut,P,G,H,ve,ie,Ke,Ve),!function(ln){for(const Cn of ln)if(Cn.positionedGlyphs.length!==0)return!1;return!0}(Dt)&&zt}const df={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Z0={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},hy={40:!0};function Ep(h,A,c,y,M,R){if(A.imageName){const P=y[A.imageName];return P?P.displaySize[0]*A.scale*Xs/R+M:0}{const P=c[A.fontStack],G=P&&P[h];return G?G.metrics.advance*A.scale+M:0}}function H1(h,A,c,y){const M=Math.pow(h-A,2);return y?h<A?M/2:2*M:M+Math.abs(c)*c}function dy(h,A,c){let y=0;return h===10&&(y-=1e4),c&&(y+=150),h!==40&&h!==65288||(y+=50),A!==41&&A!==65289||(y+=50),y}function V1(h,A,c,y,M,R){let P=null,G=H1(A,c,M,R);for(const H of y){const ie=H1(A-H.x,c,M,R)+H.badness;ie<=G&&(P=H,G=ie)}return{index:h,x:A,priorBreak:P,badness:G}}function $1(h){return h?$1(h.priorBreak).concat(h.index):[]}function Bp(h,A,c,y,M,R){if(!h)return[];const P=[],G=function(ve,Ke,Qe,Ve,et,ut){let Mt=0;for(let Qt=0;Qt<ve.length();Qt++){const Dt=ve.getSection(Qt);Mt+=Ep(ve.getCharCode(Qt),Dt,Ve,et,Ke,ut)}return Mt/Math.max(1,Math.ceil(Mt/Qe))}(h,A,c,y,M,R),H=h.text.indexOf("​")>=0;let ie=0;for(let ve=0;ve<h.length();ve++){const Ke=h.getSection(ve),Qe=h.getCharCode(ve);if(df[Qe]||(ie+=Ep(Qe,Ke,y,M,A,R)),ve<h.length()-1){const Ve=!((Ae=Qe)<11904)&&(!!to["CJK Compatibility Forms"](Ae)||!!to["CJK Compatibility"](Ae)||!!to["CJK Strokes"](Ae)||!!to["CJK Symbols and Punctuation"](Ae)||!!to["Enclosed CJK Letters and Months"](Ae)||!!to["Halfwidth and Fullwidth Forms"](Ae)||!!to["Ideographic Description Characters"](Ae)||!!to["Vertical Forms"](Ae)||Bh.test(String.fromCodePoint(Ae)));(Z0[Qe]||Ve||Ke.imageName||ve!==h.length()-2&&hy[h.getCharCode(ve+1)])&&P.push(V1(ve+1,ie,G,P,dy(Qe,h.getCharCode(ve+1),Ve&&H),!1))}}var Ae;return $1(V1(h.length(),ie,G,P,0,!0))}function X0(h){let A=.5,c=.5;switch(h){case"right":case"top-right":case"bottom-right":A=1;break;case"left":case"top-left":case"bottom-left":A=0}switch(h){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:A,verticalAlign:c}}function fy(h,A,c){const y=A.getMaxScale()*Xs,{maxImageWidth:M,maxImageHeight:R}=A.getMaxImageSize(h),P=Math.max(y,R*c);return{verticalLineContentWidth:Math.max(y,M*c),horizontalLineContentHeight:P}}function Cs(h){switch(h){case"top":return 0;case"center":return .5;default:return 1}}function Z1(h,A,c){return!(h===l.ao.horizontal||!A&&!yu(c)||A&&(df[c]||(y=c,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(y)))));var y}function iC(h,A,c,y,M,R){const P=R[h.fontStack],G=function(ie,Ae,ve,Ke){if(ie&&ie.rect)return ie;const Qe=Ae[ve.fontStack],Ve=Qe&&Qe[Ke];return Ve?{rect:null,metrics:Ve.metrics}:null}(P&&P[A],M,h,A);if(G===null)return null;let H;if(c)H=y.verticalLineContentWidth-h.scale*Xs;else{const ie=Cs(h.verticalAlign);H=(y.horizontalLineContentHeight-h.scale*Xs)*ie}return{rect:G.rect,metrics:G.metrics,baselineOffset:H}}function my(h,A,c,y,M){const R=M[h.imageName];if(!R)return null;const P=R.paddedRect,G=R.displaySize,H={width:G[0],height:G[1],left:1,top:-3,advance:A?G[1]:G[0]};let ie;if(A)ie=y.verticalLineContentWidth-G[1]*h.scale;else{const Ae=Cs(h.verticalAlign);ie=(y.horizontalLineContentHeight-G[1]*h.scale)*Ae}return{rect:P,metrics:H,baselineOffset:ie,imageOffset:(A?G[0]:G[1])*h.scale-Xs*c}}function J0(h,A,c,y){if(y===0)return;const M=h[c],R=(h[c].x+M.metrics.advance*M.scale)*y;for(let P=A;P<=c;P++)h[P].x-=R}function rC(h,A,c){const{horizontalAlign:y,verticalAlign:M}=X0(c),R=A[0]-h.displaySize[0]*y,P=A[1]-h.displaySize[1]*M;return{image:h,top:P,bottom:P+h.displaySize[1],left:R,right:R+h.displaySize[0]}}function X1(h){var A,c;let y=h.left,M=h.top,R=h.right-y,P=h.bottom-M;const G=(A=h.image.textFitWidth)!==null&&A!==void 0?A:"stretchOrShrink",H=(c=h.image.textFitHeight)!==null&&c!==void 0?c:"stretchOrShrink",ie=(h.image.content[2]-h.image.content[0])/(h.image.content[3]-h.image.content[1]);if(H==="proportional"){if(G==="stretchOnly"&&R/P<ie||G==="proportional"){const Ae=Math.ceil(P*ie);y*=Ae/R,R=Ae}}else if(G==="proportional"&&H==="stretchOnly"&&ie!==0&&R/P>ie){const Ae=Math.ceil(R/ie);M*=Ae/P,P=Ae}return{x1:y,y1:M,x2:y+R,y2:M+P}}function Op(h,A,c,y,M,R){const P=h.image;let G;if(P.content){const ut=P.content,Mt=P.pixelRatio||1;G=[ut[0]/Mt,ut[1]/Mt,P.displaySize[0]-ut[2]/Mt,P.displaySize[1]-ut[3]/Mt]}const H=A.left*R,ie=A.right*R;let Ae,ve,Ke,Qe;c==="width"||c==="both"?(Qe=M[0]+H-y[3],ve=M[0]+ie+y[1]):(Qe=M[0]+(H+ie-P.displaySize[0])/2,ve=Qe+P.displaySize[0]);const Ve=A.top*R,et=A.bottom*R;return c==="height"||c==="both"?(Ae=M[1]+Ve-y[0],Ke=M[1]+et+y[2]):(Ae=M[1]+(Ve+et-P.displaySize[1])/2,Ke=Ae+P.displaySize[1]),{image:P,top:Ae,right:ve,bottom:Ke,left:Qe,collisionPadding:G}}const $u=128,ad=32640;function Ip(h,A){const{expression:c}=A;if(c.kind==="constant")return{kind:"constant",layoutSize:c.evaluate(new Po(h+1))};if(c.kind==="source")return{kind:"source"};{const{zoomStops:y,interpolationType:M}=c;let R=0;for(;R<y.length&&y[R]<=h;)R++;R=Math.max(0,R-1);let P=R;for(;P<y.length&&y[P]<h+1;)P++;P=Math.min(y.length-1,P);const G=y[R],H=y[P];return c.kind==="composite"?{kind:"composite",minZoom:G,maxZoom:H,interpolationType:M}:{kind:"camera",minZoom:G,maxZoom:H,minSize:c.evaluate(new Po(G)),maxSize:c.evaluate(new Po(H)),interpolationType:M}}}function Tp(h,A,c){let y="never";const M=h.get(A);return M?y=M:h.get(c)&&(y="always"),y}const rm=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function lh(h,A,c,y,M,R,P,G,H,ie,Ae,ve,Ke){const Qe=G?Math.min(ad,Math.round(G[0])):0,Ve=G?Math.min(ad,Math.round(G[1])):0;h.emplaceBack(A,c,Math.round(32*y),Math.round(32*M),R,P,(Qe<<1)+(H?1:0),Ve,16*ie,16*Ae,256*ve,256*Ke)}function Tm(h,A,c){h.emplaceBack(A.x,A.y,c),h.emplaceBack(A.x,A.y,c),h.emplaceBack(A.x,A.y,c),h.emplaceBack(A.x,A.y,c)}function oC(h){for(const A of h.sections)if(rf(A.text))return!0;return!1}class km{constructor(A){this.layoutVertexArray=new Qn,this.indexArray=new la,this.programConfigurations=A,this.segments=new Er,this.dynamicLayoutVertexArray=new Tn,this.opacityVertexArray=new bi,this.hasVisibleVertices=!1,this.placedSymbolArray=new Xe}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(A,c,y,M){this.isEmpty()||(y&&(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Q1.members),this.indexBuffer=A.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=A.createVertexBuffer(this.dynamicLayoutVertexArray,Mp.members,!0),this.opacityVertexBuffer=A.createVertexBuffer(this.opacityVertexArray,rm,!0),this.opacityVertexBuffer.itemSize=1),(y||M)&&this.programConfigurations.upload(A))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ci("SymbolBuffers",km);class Dm{constructor(A,c,y){this.layoutVertexArray=new A,this.layoutAttributes=c,this.indexArray=new y,this.segments=new Er,this.collisionVertexArray=new _o}upload(A){this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=A.createVertexBuffer(this.collisionVertexArray,A0.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}ci("CollisionBuffers",Dm);class Rm{constructor(A){this.collisionBoxArray=A.collisionBoxArray,this.zoom=A.zoom,this.globalState=A.globalState,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(P=>P.id),this.index=A.index,this.pixelRatio=A.pixelRatio,this.sourceLayerIndex=A.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ip(this.zoom,c["text-size"]),this.iconSizeData=Ip(this.zoom,c["icon-size"]);const y=this.layers[0].layout,M=y.get("symbol-sort-key"),R=y.get("symbol-z-order");this.canOverlap=Tp(y,"text-overlap","text-allow-overlap")!=="never"||Tp(y,"icon-overlap","icon-allow-overlap")!=="never"||y.get("text-ignore-placement")||y.get("icon-ignore-placement"),this.sortFeaturesByKey=R!=="viewport-y"&&!M.isConstant(),this.sortFeaturesByY=(R==="viewport-y"||R==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,y.get("symbol-placement")==="point"&&(this.writingModes=y.get("text-writing-mode").map(P=>l.ao[P])),this.stateDependentLayerIds=this.layers.filter(P=>P.isStateDependent()).map(P=>P.id),this.sourceID=A.sourceID}createArrays(){this.text=new km(new Qa(this.layers,this.zoom,A=>/^text/.test(A))),this.icon=new km(new Qa(this.layers,this.zoom,A=>/^icon/.test(A))),this.glyphOffsetArray=new ft,this.lineVertexArray=new xt,this.symbolInstances=new ct,this.textAnchorOffsets=new wt}calculateGlyphDependencies(A,c,y,M,R){for(let P=0;P<A.length;P++)if(c[A.charCodeAt(P)]=!0,(y||M)&&R){const G=Kd[A.charAt(P)];G&&(c[G.charCodeAt(0)]=!0)}}populate(A,c,y){const M=this.layers[0],R=M.layout,P=R.get("text-font"),G=R.get("text-field"),H=R.get("icon-image"),ie=(G.value.kind!=="constant"||G.value.value instanceof Eo&&!G.value.value.isEmpty()||G.value.value.toString().length>0)&&(P.value.kind!=="constant"||P.value.value.length>0),Ae=H.value.kind!=="constant"||!!H.value.value||Object.keys(H.parameters).length>0,ve=R.get("symbol-sort-key");if(this.features=[],!ie&&!Ae)return;const Ke=c.iconDependencies,Qe=c.glyphDependencies,Ve=c.availableImages,et=new Po(this.zoom,{globalState:this.globalState});for(const{feature:ut,id:Mt,index:Qt,sourceLayerIndex:Dt}of A){const zt=M._featureFilter.needGeometry,ln=iu(ut,zt);if(!M._featureFilter.filter(et,ln,y))continue;let Cn,Un;if(zt||(ln.geometry=wa(ut)),ie){const ai=M.getValueAndResolveTokens("text-field",ln,y,Ve),di=Eo.factory(ai),tr=this.hasRTLText=this.hasRTLText||oC(di);(!tr||jl.getRTLTextPluginStatus()==="unavailable"||tr&&jl.isParsed())&&(Cn=Xf(di,M,ln))}if(Ae){const ai=M.getValueAndResolveTokens("icon-image",ln,y,Ve);Un=ai instanceof Za?ai:Za.fromString(ai)}if(!Cn&&!Un)continue;const mi=this.sortFeaturesByKey?ve.evaluate(ln,{},y):void 0;if(this.features.push({id:Mt,text:Cn,icon:Un,index:Qt,sourceLayerIndex:Dt,geometry:ln.geometry,properties:ut.properties,type:Im.types[ut.type],sortKey:mi}),Un&&(Ke[Un.name]=!0),Cn){const ai=P.evaluate(ln,{},y).join(","),di=R.get("text-rotation-alignment")!=="viewport"&&R.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.ao.vertical)>=0;for(const tr of Cn.sections)if(tr.image)Ke[tr.image.name]=!0;else{const Ai=Gl(Cn.toString()),fi=tr.fontStack||ai,En=Qe[fi]=Qe[fi]||{};this.calculateGlyphDependencies(tr.text,En,di,this.allowVerticalPlacement,Ai)}}}R.get("symbol-placement")==="line"&&(this.features=function(ut){const Mt={},Qt={},Dt=[];let zt=0;function ln(ai){Dt.push(ut[ai]),zt++}function Cn(ai,di,tr){const Ai=Qt[ai];return delete Qt[ai],Qt[di]=Ai,Dt[Ai].geometry[0].pop(),Dt[Ai].geometry[0]=Dt[Ai].geometry[0].concat(tr[0]),Ai}function Un(ai,di,tr){const Ai=Mt[di];return delete Mt[di],Mt[ai]=Ai,Dt[Ai].geometry[0].shift(),Dt[Ai].geometry[0]=tr[0].concat(Dt[Ai].geometry[0]),Ai}function mi(ai,di,tr){const Ai=tr?di[0][di[0].length-1]:di[0][0];return`${ai}:${Ai.x}:${Ai.y}`}for(let ai=0;ai<ut.length;ai++){const di=ut[ai],tr=di.geometry,Ai=di.text?di.text.toString():null;if(!Ai){ln(ai);continue}const fi=mi(Ai,tr),En=mi(Ai,tr,!0);if(fi in Qt&&En in Mt&&Qt[fi]!==Mt[En]){const fr=Un(fi,En,tr),wr=Cn(fi,En,Dt[fr].geometry);delete Mt[fi],delete Qt[En],Qt[mi(Ai,Dt[wr].geometry,!0)]=wr,Dt[fr].geometry=null}else fi in Qt?Cn(fi,En,tr):En in Mt?Un(fi,En,tr):(ln(ai),Mt[fi]=zt-1,Qt[En]=zt-1)}return Dt.filter(ai=>ai.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ut,Mt)=>ut.sortKey-Mt.sortKey)}update(A,c,y){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(A,c,this.layers,{imagePositions:y,globalState:this.globalState}),this.icon.programConfigurations.updatePaintArrays(A,c,this.layers,{imagePositions:y,globalState:this.globalState}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(A){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(A),this.iconCollisionBox.upload(A)),this.text.upload(A,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(A,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(A,c){const y=this.lineVertexArray.length;if(A.segment!==void 0){let M=A.dist(c[A.segment+1]),R=A.dist(c[A.segment]);const P={};for(let G=A.segment+1;G<c.length;G++)P[G]={x:c[G].x,y:c[G].y,tileUnitDistanceFromAnchor:M},G<c.length-1&&(M+=c[G+1].dist(c[G]));for(let G=A.segment||0;G>=0;G--)P[G]={x:c[G].x,y:c[G].y,tileUnitDistanceFromAnchor:R},G>0&&(R+=c[G-1].dist(c[G]));for(let G=0;G<c.length;G++){const H=P[G];this.lineVertexArray.emplaceBack(H.x,H.y,H.tileUnitDistanceFromAnchor)}}return{lineStartIndex:y,lineLength:this.lineVertexArray.length-y}}addSymbols(A,c,y,M,R,P,G,H,ie,Ae,ve,Ke){const Qe=A.indexArray,Ve=A.layoutVertexArray,et=A.segments.prepareSegment(4*c.length,Ve,Qe,this.canOverlap?P.sortKey:void 0),ut=this.glyphOffsetArray.length,Mt=et.vertexLength,Qt=this.allowVerticalPlacement&&G===l.ao.vertical?Math.PI/2:0,Dt=P.text&&P.text.sections;for(let zt=0;zt<c.length;zt++){const{tl:ln,tr:Cn,bl:Un,br:mi,tex:ai,pixelOffsetTL:di,pixelOffsetBR:tr,minFontScaleX:Ai,minFontScaleY:fi,glyphOffset:En,isSDF:fr,sectionIndex:wr}=c[zt],sr=et.vertexLength,Ui=En[1];lh(Ve,H.x,H.y,ln.x,Ui+ln.y,ai.x,ai.y,y,fr,di.x,di.y,Ai,fi),lh(Ve,H.x,H.y,Cn.x,Ui+Cn.y,ai.x+ai.w,ai.y,y,fr,tr.x,di.y,Ai,fi),lh(Ve,H.x,H.y,Un.x,Ui+Un.y,ai.x,ai.y+ai.h,y,fr,di.x,tr.y,Ai,fi),lh(Ve,H.x,H.y,mi.x,Ui+mi.y,ai.x+ai.w,ai.y+ai.h,y,fr,tr.x,tr.y,Ai,fi),Tm(A.dynamicLayoutVertexArray,H,Qt),Qe.emplaceBack(sr,sr+2,sr+1),Qe.emplaceBack(sr+1,sr+2,sr+3),et.vertexLength+=4,et.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(En[0]),zt!==c.length-1&&wr===c[zt+1].sectionIndex||A.programConfigurations.populatePaintArrays(Ve.length,P,P.index,{imagePositions:{},canonical:Ke,formattedSection:Dt&&Dt[wr],globalState:this.globalState})}A.placedSymbolArray.emplaceBack(H.x,H.y,ut,this.glyphOffsetArray.length-ut,Mt,ie,Ae,H.segment,y?y[0]:0,y?y[1]:0,M[0],M[1],G,0,!1,0,ve)}_addCollisionDebugVertex(A,c,y,M,R,P){return c.emplaceBack(0,0),A.emplaceBack(y.x,y.y,M,R,Math.round(P.x),Math.round(P.y))}addCollisionDebugVertices(A,c,y,M,R,P,G){const H=R.segments.prepareSegment(4,R.layoutVertexArray,R.indexArray),ie=H.vertexLength,Ae=R.layoutVertexArray,ve=R.collisionVertexArray,Ke=G.anchorX,Qe=G.anchorY;this._addCollisionDebugVertex(Ae,ve,P,Ke,Qe,new m(A,c)),this._addCollisionDebugVertex(Ae,ve,P,Ke,Qe,new m(y,c)),this._addCollisionDebugVertex(Ae,ve,P,Ke,Qe,new m(y,M)),this._addCollisionDebugVertex(Ae,ve,P,Ke,Qe,new m(A,M)),H.vertexLength+=4;const Ve=R.indexArray;Ve.emplaceBack(ie,ie+1),Ve.emplaceBack(ie+1,ie+2),Ve.emplaceBack(ie+2,ie+3),Ve.emplaceBack(ie+3,ie),H.primitiveLength+=4}addDebugCollisionBoxes(A,c,y,M){for(let R=A;R<c;R++){const P=this.collisionBoxArray.get(R);this.addCollisionDebugVertices(P.x1,P.y1,P.x2,P.y2,M?this.textCollisionBox:this.iconCollisionBox,P.anchorPoint,y)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Dm(cr,hf.members,Lo),this.iconCollisionBox=new Dm(cr,hf.members,Lo);for(let A=0;A<this.symbolInstances.length;A++){const c=this.symbolInstances.get(A);this.addDebugCollisionBoxes(c.textBoxStartIndex,c.textBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.iconBoxStartIndex,c.iconBoxEndIndex,c,!1),this.addDebugCollisionBoxes(c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex,c,!1)}}_deserializeCollisionBoxesForSymbol(A,c,y,M,R,P,G,H,ie){const Ae={};for(let ve=c;ve<y;ve++){const Ke=A.get(ve);Ae.textBox={x1:Ke.x1,y1:Ke.y1,x2:Ke.x2,y2:Ke.y2,anchorPointX:Ke.anchorPointX,anchorPointY:Ke.anchorPointY},Ae.textFeatureIndex=Ke.featureIndex;break}for(let ve=M;ve<R;ve++){const Ke=A.get(ve);Ae.verticalTextBox={x1:Ke.x1,y1:Ke.y1,x2:Ke.x2,y2:Ke.y2,anchorPointX:Ke.anchorPointX,anchorPointY:Ke.anchorPointY},Ae.verticalTextFeatureIndex=Ke.featureIndex;break}for(let ve=P;ve<G;ve++){const Ke=A.get(ve);Ae.iconBox={x1:Ke.x1,y1:Ke.y1,x2:Ke.x2,y2:Ke.y2,anchorPointX:Ke.anchorPointX,anchorPointY:Ke.anchorPointY},Ae.iconFeatureIndex=Ke.featureIndex;break}for(let ve=H;ve<ie;ve++){const Ke=A.get(ve);Ae.verticalIconBox={x1:Ke.x1,y1:Ke.y1,x2:Ke.x2,y2:Ke.y2,anchorPointX:Ke.anchorPointX,anchorPointY:Ke.anchorPointY},Ae.verticalIconFeatureIndex=Ke.featureIndex;break}return Ae}deserializeCollisionBoxes(A){this.collisionArrays=[];for(let c=0;c<this.symbolInstances.length;c++){const y=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(A,y.textBoxStartIndex,y.textBoxEndIndex,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y.iconBoxStartIndex,y.iconBoxEndIndex,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(A,c){const y=A.placedSymbolArray.get(c),M=y.vertexStartIndex+4*y.numGlyphs;for(let R=y.vertexStartIndex;R<M;R+=4)A.indexArray.emplaceBack(R,R+2,R+1),A.indexArray.emplaceBack(R+1,R+2,R+3)}getSortedSymbolIndexes(A){if(this.sortedAngle===A&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const c=Math.sin(A),y=Math.cos(A),M=[],R=[],P=[];for(let G=0;G<this.symbolInstances.length;++G){P.push(G);const H=this.symbolInstances.get(G);M.push(0|Math.round(c*H.anchorX+y*H.anchorY)),R.push(H.featureIndex)}return P.sort((G,H)=>M[G]-M[H]||R[H]-R[G]),P}addToSortKeyRanges(A,c){const y=this.sortKeyRanges[this.sortKeyRanges.length-1];y&&y.sortKey===c?y.symbolInstanceEnd=A+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:A,symbolInstanceEnd:A+1})}sortFeatures(A){if(this.sortFeaturesByY&&this.sortedAngle!==A&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(A),this.sortedAngle=A,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const c of this.symbolInstanceIndexes){const y=this.symbolInstances.get(c);this.featureSortOrder.push(y.featureIndex),[y.rightJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.leftJustifiedTextSymbolIndex].forEach((M,R,P)=>{M>=0&&P.indexOf(M)===R&&this.addIndicesForPlacedSymbol(this.text,M)}),y.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,y.verticalPlacedTextSymbolIndex),y.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.placedIconSymbolIndex),y.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let J1,e1;ci("SymbolBucket",Rm,{omit:["layers","collisionBoxArray","features","compareText"]}),Rm.MAX_GLYPHS=65535,Rm.addDynamicAttributes=Tm;var kp={get paint(){return e1=e1||new sa({"icon-opacity":new Ti(it.paint_symbol["icon-opacity"]),"icon-color":new Ti(it.paint_symbol["icon-color"]),"icon-halo-color":new Ti(it.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ti(it.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ti(it.paint_symbol["icon-halo-blur"]),"icon-translate":new Oi(it.paint_symbol["icon-translate"]),"icon-translate-anchor":new Oi(it.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ti(it.paint_symbol["text-opacity"]),"text-color":new Ti(it.paint_symbol["text-color"],{runtimeType:vr,getOverride:h=>h.textColor,hasOverride:h=>!!h.textColor}),"text-halo-color":new Ti(it.paint_symbol["text-halo-color"]),"text-halo-width":new Ti(it.paint_symbol["text-halo-width"]),"text-halo-blur":new Ti(it.paint_symbol["text-halo-blur"]),"text-translate":new Oi(it.paint_symbol["text-translate"]),"text-translate-anchor":new Oi(it.paint_symbol["text-translate-anchor"])})},get layout(){return J1=J1||new sa({"symbol-placement":new Oi(it.layout_symbol["symbol-placement"]),"symbol-spacing":new Oi(it.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Oi(it.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ti(it.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Oi(it.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Oi(it.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Oi(it.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Oi(it.layout_symbol["icon-ignore-placement"]),"icon-optional":new Oi(it.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Oi(it.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ti(it.layout_symbol["icon-size"]),"icon-text-fit":new Oi(it.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Oi(it.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ti(it.layout_symbol["icon-image"]),"icon-rotate":new Ti(it.layout_symbol["icon-rotate"]),"icon-padding":new Ti(it.layout_symbol["icon-padding"]),"icon-keep-upright":new Oi(it.layout_symbol["icon-keep-upright"]),"icon-offset":new Ti(it.layout_symbol["icon-offset"]),"icon-anchor":new Ti(it.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Oi(it.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Oi(it.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Oi(it.layout_symbol["text-rotation-alignment"]),"text-field":new Ti(it.layout_symbol["text-field"]),"text-font":new Ti(it.layout_symbol["text-font"]),"text-size":new Ti(it.layout_symbol["text-size"]),"text-max-width":new Ti(it.layout_symbol["text-max-width"]),"text-line-height":new Oi(it.layout_symbol["text-line-height"]),"text-letter-spacing":new Ti(it.layout_symbol["text-letter-spacing"]),"text-justify":new Ti(it.layout_symbol["text-justify"]),"text-radial-offset":new Ti(it.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Oi(it.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ti(it.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ti(it.layout_symbol["text-anchor"]),"text-max-angle":new Oi(it.layout_symbol["text-max-angle"]),"text-writing-mode":new Oi(it.layout_symbol["text-writing-mode"]),"text-rotate":new Ti(it.layout_symbol["text-rotate"]),"text-padding":new Oi(it.layout_symbol["text-padding"]),"text-keep-upright":new Oi(it.layout_symbol["text-keep-upright"]),"text-transform":new Ti(it.layout_symbol["text-transform"]),"text-offset":new Ti(it.layout_symbol["text-offset"]),"text-allow-overlap":new Oi(it.layout_symbol["text-allow-overlap"]),"text-overlap":new Oi(it.layout_symbol["text-overlap"]),"text-ignore-placement":new Oi(it.layout_symbol["text-ignore-placement"]),"text-optional":new Oi(it.layout_symbol["text-optional"])})}};class eg{constructor(A){if(A.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=A.property.overrides?A.property.overrides.runtimeType:To,this.defaultValue=A}evaluate(A){if(A.formattedSection){const c=this.defaultValue.property.overrides;if(c&&c.hasOverride(A.formattedSection))return c.getOverride(A.formattedSection)}return A.feature&&A.featureState?this.defaultValue.evaluate(A.feature,A.featureState):this.defaultValue.property.specification.default}eachChild(A){this.defaultValue.isConstant()||A(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ci("FormatSectionOverride",eg,{omit:["defaultValue"]});class d0 extends Ql{constructor(A){super(A,kp)}recalculate(A,c){if(super.recalculate(A,c),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const y=this.layout.get("text-writing-mode");if(y){const M=[];for(const R of y)M.indexOf(R)<0&&M.push(R);this.layout._values["text-writing-mode"]=M}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(A,c,y,M){const R=this.layout.get(A).evaluate(c,{},y,M),P=this._unevaluatedLayout._values[A];return P.isDataDriven()||OA(P.value)||!R?R:function(G,H){return H.replace(/{([^{}]+)}/g,(ie,Ae)=>G&&Ae in G?String(G[Ae]):"")}(c.properties,R)}createBucket(A){return new Rm(A)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const A of kp.paint.overridableProperties){if(!d0.hasPaintOverride(this.layout,A))continue;const c=this.paint.get(A),y=new eg(c),M=new Vc(y,c.property.specification);let R=null;R=c.value.kind==="constant"||c.value.kind==="source"?new xh("source",M):new Hh("composite",M,c.value.zoomStops),this.paint._values[A]=new Rr(c.property,R,c.parameters)}}_handleOverridablePaintPropertyUpdate(A,c,y){return!(!this.layout||c.isDataDriven()||y.isDataDriven())&&d0.hasPaintOverride(this.layout,A)}static hasPaintOverride(A,c){const y=A.get("text-field"),M=kp.paint.properties[c];let R=!1;const P=G=>{for(const H of G)if(M.overrides&&M.overrides.hasOverride(H))return void(R=!0)};if(y.value.kind==="constant"&&y.value.value instanceof Eo)P(y.value.value.sections);else if(y.value.kind==="source"||y.value.kind==="composite"){const G=ie=>{R||(ie instanceof Qr&&Zi(ie.value)===Ta?P(ie.value.sections):ie instanceof VA?P(ie.sections):ie.eachChild(G))},H=y.value;H._styleExpression&&G(H._styleExpression.expression)}return R}}let py;var tg={get paint(){return py=py||new sa({"background-color":new Oi(it.paint_background["background-color"]),"background-pattern":new DA(it.paint_background["background-pattern"]),"background-opacity":new Oi(it.paint_background["background-opacity"])})}};class ng extends Ql{constructor(A){super(A,tg)}}let gy;var aC={get paint(){return gy=gy||new sa({"raster-opacity":new Oi(it.paint_raster["raster-opacity"]),"raster-hue-rotate":new Oi(it.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Oi(it.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Oi(it.paint_raster["raster-brightness-max"]),"raster-saturation":new Oi(it.paint_raster["raster-saturation"]),"raster-contrast":new Oi(it.paint_raster["raster-contrast"]),"raster-resampling":new Oi(it.paint_raster["raster-resampling"]),"raster-fade-duration":new Oi(it.paint_raster["raster-fade-duration"])})}};class f0 extends Ql{constructor(A){super(A,aC)}}class sC extends Ql{constructor(A){super(A,{}),this.onAdd=c=>{this.implementation.onAdd&&this.implementation.onAdd(c,c.painter.context.gl)},this.onRemove=c=>{this.implementation.onRemove&&this.implementation.onRemove(c,c.painter.context.gl)},this.implementation=A}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class yy{constructor(A){this._methodToThrottle=A,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const na={once:!0},m0=63710088e-1;class Zl{constructor(A,c){if(isNaN(A)||isNaN(c))throw new Error(`Invalid LngLat object: (${A}, ${c})`);if(this.lng=+A,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Zl(Rt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(A){const c=Math.PI/180,y=this.lat*c,M=A.lat*c,R=Math.sin(y)*Math.sin(M)+Math.cos(y)*Math.cos(M)*Math.cos((A.lng-this.lng)*c);return m0*Math.acos(Math.min(R,1))}static convert(A){if(A instanceof Zl)return A;if(Array.isArray(A)&&(A.length===2||A.length===3))return new Zl(Number(A[0]),Number(A[1]));if(!Array.isArray(A)&&typeof A=="object"&&A!==null)return new Zl(Number("lng"in A?A.lng:A.lon),Number(A.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const t1=2*Math.PI*m0;function ig(h){return t1*Math.cos(h*Math.PI/180)}function Ud(h){return(180+h)/360}function qr(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}function p0(h,A){return h/ig(A)}function Xl(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}function wl(h,A){return h*ig(Xl(A))}class g0{constructor(A,c,y=0){this.x=+A,this.y=+c,this.z=+y}static fromLngLat(A,c=0){const y=Zl.convert(A);return new g0(Ud(y.lng),qr(y.lat),p0(c,y.lat))}toLngLat(){return new Zl(360*this.x-180,Xl(this.y))}toAltitude(){return wl(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/t1*(A=Xl(this.y),1/Math.cos(A*Math.PI/180));var A}}function ff(h,A,c){var y=2*Math.PI*6378137/256/Math.pow(2,c);return[h*y-2*Math.PI*6378137/2,A*y-2*Math.PI*6378137/2]}class n1{constructor(A,c,y){if(!function(M,R,P){return!(M<0||M>25||P<0||P>=Math.pow(2,M)||R<0||R>=Math.pow(2,M))}(A,c,y))throw new Error(`x=${c}, y=${y}, z=${A} outside of bounds. 0<=x<${Math.pow(2,A)}, 0<=y<${Math.pow(2,A)} 0<=z<=25 `);this.z=A,this.x=c,this.y=y,this.key=Ba(0,A,A,c,y)}equals(A){return this.z===A.z&&this.x===A.x&&this.y===A.y}url(A,c,y){const M=(P=this.y,G=this.z,H=ff(256*(R=this.x),256*(P=Math.pow(2,G)-P-1),G),ie=ff(256*(R+1),256*(P+1),G),H[0]+","+H[1]+","+ie[0]+","+ie[1]);var R,P,G,H,ie;const Ae=function(ve,Ke,Qe){let Ve,et="";for(let ut=ve;ut>0;ut--)Ve=1<<ut-1,et+=(Ke&Ve?1:0)+(Qe&Ve?2:0);return et}(this.z,this.x,this.y);return A[(this.x+this.y)%A.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(y==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,c>1?"@2x":"").replace(/{quadkey}/g,Ae).replace(/{bbox-epsg-3857}/g,M)}isChildOf(A){const c=this.z-A.z;return c>0&&A.x===this.x>>c&&A.y===this.y>>c}getTilePoint(A){const c=Math.pow(2,this.z);return new m((A.x*c-this.x)*nt,(A.y*c-this.y)*nt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class rg{constructor(A,c){this.wrap=A,this.canonical=c,this.key=Ba(A,c.z,c.z,c.x,c.y)}}class Zu{constructor(A,c,y,M,R){if(this.terrainRttPosMatrix32f=null,A<y)throw new Error(`overscaledZ should be >= z; overscaledZ = ${A}; z = ${y}`);this.overscaledZ=A,this.wrap=c,this.canonical=new n1(y,+M,+R),this.key=Ba(c,A,y,M,R)}clone(){return new Zu(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(A){return this.overscaledZ===A.overscaledZ&&this.wrap===A.wrap&&this.canonical.equals(A.canonical)}scaledTo(A){if(A>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${A}; overscaledZ = ${this.overscaledZ}`);const c=this.canonical.z-A;return A>this.canonical.z?new Zu(A,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Zu(A,this.wrap,A,this.canonical.x>>c,this.canonical.y>>c)}calculateScaledKey(A,c){if(A>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${A}; overscaledZ = ${this.overscaledZ}`);const y=this.canonical.z-A;return A>this.canonical.z?Ba(this.wrap*+c,A,this.canonical.z,this.canonical.x,this.canonical.y):Ba(this.wrap*+c,A,A,this.canonical.x>>y,this.canonical.y>>y)}isChildOf(A){if(A.wrap!==this.wrap)return!1;const c=this.canonical.z-A.canonical.z;return A.overscaledZ===0||A.overscaledZ<this.overscaledZ&&A.canonical.x===this.canonical.x>>c&&A.canonical.y===this.canonical.y>>c}children(A){if(this.overscaledZ>=A)return[new Zu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const c=this.canonical.z+1,y=2*this.canonical.x,M=2*this.canonical.y;return[new Zu(c,this.wrap,c,y,M),new Zu(c,this.wrap,c,y+1,M),new Zu(c,this.wrap,c,y,M+1),new Zu(c,this.wrap,c,y+1,M+1)]}isLessThan(A){return this.wrap<A.wrap||!(this.wrap>A.wrap)&&(this.overscaledZ<A.overscaledZ||!(this.overscaledZ>A.overscaledZ)&&(this.canonical.x<A.canonical.x||!(this.canonical.x>A.canonical.x)&&this.canonical.y<A.canonical.y))}wrapped(){return new Zu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(A){return new Zu(this.overscaledZ,A,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new rg(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(A){return this.canonical.getTilePoint(new g0(A.x-this.wrap,A.y))}}function Ba(h,A,c,y,M){(h*=2)<0&&(h=-1*h-1);const R=1<<c;return(R*R*h+R*M+y).toString(36)+c.toString(36)+A.toString(36)}function Pm(h,A){return A?h.properties[A]:h.id}ci("CanonicalTileID",n1),ci("OverscaledTileID",Zu,{omit:["terrainRttPosMatrix32f"]});class Js{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(A){return this.minX=Math.min(this.minX,A.x),this.minY=Math.min(this.minY,A.y),this.maxX=Math.max(this.maxX,A.x),this.maxY=Math.max(this.maxY,A.y),this}expandBy(A){return this.minX-=A,this.minY-=A,this.maxX+=A,this.maxY+=A,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(A){return this.expandBy(-A)}map(A){const c=new Js;return c.extend(A(new m(this.minX,this.minY))),c.extend(A(new m(this.maxX,this.minY))),c.extend(A(new m(this.minX,this.maxY))),c.extend(A(new m(this.maxX,this.maxY))),c}static fromPoints(A){const c=new Js;for(const y of A)c.extend(y);return c}contains(A){return A.x>=this.minX&&A.x<=this.maxX&&A.y>=this.minY&&A.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(A){return!this.empty()&&!A.empty()&&A.minX>=this.minX&&A.maxX<=this.maxX&&A.minY>=this.minY&&A.maxY<=this.maxY}intersects(A){return!this.empty()&&!A.empty()&&A.minX<=this.maxX&&A.maxX>=this.minX&&A.minY<=this.maxY&&A.maxY>=this.minY}}class vy{constructor(A){this._stringToNumber={},this._numberToString=[];for(let c=0;c<A.length;c++){const y=A[c];this._stringToNumber[y]=c,this._numberToString[c]=y}}encode(A){return this._stringToNumber[A]}decode(A){if(A>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${A} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[A]}}class kh{constructor(A,c,y,M,R){this.type="Feature",this._vectorTileFeature=A,A._z=c,A._x=y,A._y=M,this.properties=A.properties,this.id=R}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(A){this._geometry=A}toJSON(){const A={geometry:this.geometry};for(const c in this)c!=="_geometry"&&c!=="_vectorTileFeature"&&(A[c]=this[c]);return A}}class y0{constructor(A,c){this.tileID=A,this.x=A.canonical.x,this.y=A.canonical.y,this.z=A.canonical.z,this.grid=new Ca(nt,16,0),this.grid3D=new Ca(nt,16,0),this.featureIndexArray=new Lt,this.promoteId=c}insert(A,c,y,M,R,P){const G=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(y,M,R);const H=P?this.grid3D:this.grid;for(let ie=0;ie<c.length;ie++){const Ae=c[ie],ve=[1/0,1/0,-1/0,-1/0];for(let Ke=0;Ke<Ae.length;Ke++){const Qe=Ae[Ke];ve[0]=Math.min(ve[0],Qe.x),ve[1]=Math.min(ve[1],Qe.y),ve[2]=Math.max(ve[2],Qe.x),ve[3]=Math.max(ve[3],Qe.y)}ve[0]<nt&&ve[1]<nt&&ve[2]>=0&&ve[3]>=0&&H.insert(G,ve[0],ve[1],ve[2],ve[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new j1(new Jf(this.rawTileData)).layers,this.sourceLayerCoder=new vy(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(A,c,y,M){this.loadVTLayers();const R=A.params,P=nt/A.tileSize/A.scale,G=Bc(R.filter),H=A.queryGeometry,ie=A.queryPadding*P,Ae=Js.fromPoints(H),ve=this.grid.query(Ae.minX-ie,Ae.minY-ie,Ae.maxX+ie,Ae.maxY+ie),Ke=Js.fromPoints(A.cameraQueryGeometry).expandBy(ie),Qe=this.grid3D.query(Ke.minX,Ke.minY,Ke.maxX,Ke.maxY,(ut,Mt,Qt,Dt)=>function(zt,ln,Cn,Un,mi){for(const di of zt)if(ln<=di.x&&Cn<=di.y&&Un>=di.x&&mi>=di.y)return!0;const ai=[new m(ln,Cn),new m(ln,mi),new m(Un,mi),new m(Un,Cn)];if(zt.length>2){for(const di of ai)if(Ih(zt,di))return!0}for(let di=0;di<zt.length-1;di++)if(Wf(zt[di],zt[di+1],ai))return!0;return!1}(A.cameraQueryGeometry,ut-ie,Mt-ie,Qt+ie,Dt+ie));for(const ut of Qe)ve.push(ut);ve.sort(sl);const Ve={};let et;for(let ut=0;ut<ve.length;ut++){const Mt=ve[ut];if(Mt===et)continue;et=Mt;const Qt=this.featureIndexArray.get(Mt);let Dt=null;this.loadMatchingFeature(Ve,Qt.bucketIndex,Qt.sourceLayerIndex,Qt.featureIndex,G,R.layers,R.availableImages,c,y,M,(zt,ln,Cn)=>(Dt||(Dt=wa(zt)),ln.queryIntersectsFeature({queryGeometry:H,feature:zt,featureState:Cn,geometry:Dt,zoom:this.z,transform:A.transform,pixelsToTileUnits:P,pixelPosMatrix:A.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:A.getElevation})))}return Ve}loadMatchingFeature(A,c,y,M,R,P,G,H,ie,Ae,ve){const Ke=this.bucketLayerIDs[c];if(P&&!Ke.some(ut=>P.has(ut)))return;const Qe=this.sourceLayerCoder.decode(y),Ve=this.vtLayers[Qe].feature(M);if(R.needGeometry){const ut=iu(Ve,!0);if(!R.filter(new Po(this.tileID.overscaledZ),ut,this.tileID.canonical))return}else if(!R.filter(new Po(this.tileID.overscaledZ),Ve))return;const et=this.getId(Ve,Qe);for(let ut=0;ut<Ke.length;ut++){const Mt=Ke[ut];if(P&&!P.has(Mt))continue;const Qt=H[Mt];if(!Qt)continue;let Dt={};et&&Ae&&(Dt=Ae.getState(Qt.sourceLayer||"_geojsonTileLayer",et));const zt=Le({},ie[Mt]);zt.paint=om(zt.paint,Qt.paint,Ve,Dt,G),zt.layout=om(zt.layout,Qt.layout,Ve,Dt,G);const ln=!ve||ve(Ve,Qt,Dt);if(!ln)continue;const Cn=new kh(Ve,this.z,this.x,this.y,et);Cn.layer=zt;let Un=A[Mt];Un===void 0&&(Un=A[Mt]=[]),Un.push({featureIndex:M,feature:Cn,intersectionZ:ln})}}lookupSymbolFeatures(A,c,y,M,R,P,G,H){const ie={};this.loadVTLayers();const Ae=Bc(R);for(const ve of A)this.loadMatchingFeature(ie,y,M,ve,Ae,P,G,H,c);return ie}hasLayer(A){for(const c of this.bucketLayerIDs)for(const y of c)if(A===y)return!0;return!1}getId(A,c){var y;let M=A.id;return this.promoteId&&(M=A.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[c]],typeof M=="boolean"&&(M=Number(M)),M===void 0&&(!((y=A.properties)===null||y===void 0)&&y.cluster)&&this.promoteId&&(M=Number(A.properties.cluster_id))),M}}function om(h,A,c,y,M){return Re(h,(R,P)=>{const G=A instanceof Wu?A.get(P):null;return G&&G.evaluate?G.evaluate(c,y,M):G})}function sl(h,A){return A-h}function ll(h,A,c,y,M){const R=[];for(let P=0;P<h.length;P++){const G=h[P];let H;for(let ie=0;ie<G.length-1;ie++){let Ae=G[ie],ve=G[ie+1];Ae.x<A&&ve.x<A||(Ae.x<A?Ae=new m(A,Ae.y+(A-Ae.x)/(ve.x-Ae.x)*(ve.y-Ae.y))._round():ve.x<A&&(ve=new m(A,Ae.y+(A-Ae.x)/(ve.x-Ae.x)*(ve.y-Ae.y))._round()),Ae.y<c&&ve.y<c||(Ae.y<c?Ae=new m(Ae.x+(c-Ae.y)/(ve.y-Ae.y)*(ve.x-Ae.x),c)._round():ve.y<c&&(ve=new m(Ae.x+(c-Ae.y)/(ve.y-Ae.y)*(ve.x-Ae.x),c)._round()),Ae.x>=y&&ve.x>=y||(Ae.x>=y?Ae=new m(y,Ae.y+(y-Ae.x)/(ve.x-Ae.x)*(ve.y-Ae.y))._round():ve.x>=y&&(ve=new m(y,Ae.y+(y-Ae.x)/(ve.x-Ae.x)*(ve.y-Ae.y))._round()),Ae.y>=M&&ve.y>=M||(Ae.y>=M?Ae=new m(Ae.x+(M-Ae.y)/(ve.y-Ae.y)*(ve.x-Ae.x),M)._round():ve.y>=M&&(ve=new m(Ae.x+(M-Ae.y)/(ve.y-Ae.y)*(ve.x-Ae.x),M)._round()),H&&Ae.equals(H[H.length-1])||(H=[Ae],R.push(H)),H.push(ve)))))}}return R}ci("FeatureIndex",y0,{omit:["rawTileData","sourceLayerCoder"]});class sd extends m{constructor(A,c,y,M){super(A,c),this.angle=y,M!==void 0&&(this.segment=M)}clone(){return new sd(this.x,this.y,this.angle,this.segment)}}function i1(h,A,c,y,M){if(A.segment===void 0||c===0)return!0;let R=A,P=A.segment+1,G=0;for(;G>-c/2;){if(P--,P<0)return!1;G-=h[P].dist(R),R=h[P]}G+=h[P].dist(h[P+1]),P++;const H=[];let ie=0;for(;G<c/2;){const Ae=h[P],ve=h[P+1];if(!ve)return!1;let Ke=h[P-1].angleTo(Ae)-Ae.angleTo(ve);for(Ke=Math.abs((Ke+3*Math.PI)%(2*Math.PI)-Math.PI),H.push({distance:G,angleDelta:Ke}),ie+=Ke;G-H[0].distance>y;)ie-=H.shift().angleDelta;if(ie>M)return!1;P++,G+=Ae.dist(ve)}return!0}function Cy(h){let A=0;for(let c=0;c<h.length-1;c++)A+=h[c].dist(h[c+1]);return A}function og(h,A,c){return h?.6*A*c:0}function _y(h,A){return Math.max(h?h.right-h.left:0,A?A.right-A.left:0)}function by(h,A,c,y,M,R){const P=og(c,M,R),G=_y(c,y)*R;let H=0;const ie=Cy(h)/2;for(let Ae=0;Ae<h.length-1;Ae++){const ve=h[Ae],Ke=h[Ae+1],Qe=ve.dist(Ke);if(H+Qe>ie){const Ve=(ie-H)/Qe,et=Ru.number(ve.x,Ke.x,Ve),ut=Ru.number(ve.y,Ke.y,Ve),Mt=new sd(et,ut,Ke.angleTo(ve),Ae);return Mt._round(),!P||i1(h,Mt,G,P,A)?Mt:void 0}H+=Qe}}function lC(h,A,c,y,M,R,P,G,H){const ie=og(y,R,P),Ae=_y(y,M),ve=Ae*P,Ke=h[0].x===0||h[0].x===H||h[0].y===0||h[0].y===H;return A-ve<A/4&&(A=ve+A/4),ag(h,Ke?A/2*G%A:(Ae/2+2*R)*P*G%A,A,ie,c,ve,Ke,!1,H)}function ag(h,A,c,y,M,R,P,G,H){const ie=R/2,Ae=Cy(h);let ve=0,Ke=A-c,Qe=[];for(let Ve=0;Ve<h.length-1;Ve++){const et=h[Ve],ut=h[Ve+1],Mt=et.dist(ut),Qt=ut.angleTo(et);for(;Ke+c<ve+Mt;){Ke+=c;const Dt=(Ke-ve)/Mt,zt=Ru.number(et.x,ut.x,Dt),ln=Ru.number(et.y,ut.y,Dt);if(zt>=0&&zt<H&&ln>=0&&ln<H&&Ke-ie>=0&&Ke+ie<=Ae){const Cn=new sd(zt,ln,Qt,Ve);Cn._round(),y&&!i1(h,Cn,R,y,M)||Qe.push(Cn)}}ve+=Mt}return G||Qe.length||P||(Qe=ag(h,ve/2,c,y,M,R,P,!0,H)),Qe}function Ah(h,A,c,y){const M=[],R=h.image,P=R.pixelRatio,G=R.paddedRect.w-2,H=R.paddedRect.h-2;let ie={x1:h.left,y1:h.top,x2:h.right,y2:h.bottom};const Ae=R.stretchX||[[0,G]],ve=R.stretchY||[[0,H]],Ke=(En,fr)=>En+fr[1]-fr[0],Qe=Ae.reduce(Ke,0),Ve=ve.reduce(Ke,0),et=G-Qe,ut=H-Ve;let Mt=0,Qt=Qe,Dt=0,zt=Ve,ln=0,Cn=et,Un=0,mi=ut;if(R.content&&y){const En=R.content,fr=En[2]-En[0],wr=En[3]-En[1];(R.textFitWidth||R.textFitHeight)&&(ie=X1(h)),Mt=Km(Ae,0,En[0]),Dt=Km(ve,0,En[1]),Qt=Km(Ae,En[0],En[2]),zt=Km(ve,En[1],En[3]),ln=En[0]-Mt,Un=En[1]-Dt,Cn=fr-Qt,mi=wr-zt}const ai=ie.x1,di=ie.y1,tr=ie.x2-ai,Ai=ie.y2-di,fi=(En,fr,wr,sr)=>{const Ui=v0(En.stretch-Mt,Qt,tr,ai),Gr=Um(En.fixed-ln,Cn,En.stretch,Qe),Ka=v0(fr.stretch-Dt,zt,Ai,di),_s=Um(fr.fixed-Un,mi,fr.stretch,Ve),kl=v0(wr.stretch-Mt,Qt,tr,ai),Ou=Um(wr.fixed-ln,Cn,wr.stretch,Qe),Dl=v0(sr.stretch-Dt,zt,Ai,di),KA=Um(sr.fixed-Un,mi,sr.stretch,Ve),Ts=new m(Ui,Ka),Al=new m(kl,Ka),UA=new m(kl,Dl),gA=new m(Ui,Dl),LA=new m(Gr/P,_s/P),Fc=new m(Ou/P,KA/P),yA=A*Math.PI/180;if(yA){const Jl=Math.sin(yA),cl=Math.cos(yA),hl=[cl,-Jl,Jl,cl];Ts._matMult(hl),Al._matMult(hl),gA._matMult(hl),UA._matMult(hl)}const au=En.stretch+En.fixed,ul=fr.stretch+fr.fixed;return{tl:Ts,tr:Al,bl:gA,br:UA,tex:{x:R.paddedRect.x+1+au,y:R.paddedRect.y+1+ul,w:wr.stretch+wr.fixed-au,h:sr.stretch+sr.fixed-ul},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:LA,pixelOffsetBR:Fc,minFontScaleX:Cn/P/tr,minFontScaleY:mi/P/Ai,isSDF:c}};if(y&&(R.stretchX||R.stretchY)){const En=r1(Ae,et,Qe),fr=r1(ve,ut,Ve);for(let wr=0;wr<En.length-1;wr++){const sr=En[wr],Ui=En[wr+1];for(let Gr=0;Gr<fr.length-1;Gr++)M.push(fi(sr,fr[Gr],Ui,fr[Gr+1]))}}else M.push(fi({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:G+1},{fixed:0,stretch:H+1}));return M}function Km(h,A,c){let y=0;for(const M of h)y+=Math.max(A,Math.min(c,M[1]))-Math.max(A,Math.min(c,M[0]));return y}function r1(h,A,c){const y=[{fixed:-1,stretch:0}];for(const[M,R]of h){const P=y[y.length-1];y.push({fixed:M-P.stretch,stretch:P.stretch}),y.push({fixed:M-P.stretch,stretch:P.stretch+(R-M)})}return y.push({fixed:A+1,stretch:c}),y}function v0(h,A,c,y){return h/A*c+y}function Um(h,A,c,y){return h-A*c/y}ci("Anchor",sd);class ou{constructor(A,c,y,M,R,P,G,H,ie,Ae){var ve;if(this.boxStartIndex=A.length,ie){let Ke=P.top,Qe=P.bottom;const Ve=P.collisionPadding;Ve&&(Ke-=Ve[1],Qe+=Ve[3]);let et=Qe-Ke;et>0&&(et=Math.max(10,et),this.circleDiameter=et)}else{const Ke=!((ve=P.image)===null||ve===void 0)&&ve.content&&(P.image.textFitWidth||P.image.textFitHeight)?X1(P):{x1:P.left,y1:P.top,x2:P.right,y2:P.bottom};Ke.y1=Ke.y1*G-H[0],Ke.y2=Ke.y2*G+H[2],Ke.x1=Ke.x1*G-H[3],Ke.x2=Ke.x2*G+H[1];const Qe=P.collisionPadding;if(Qe&&(Ke.x1-=Qe[0]*G,Ke.y1-=Qe[1]*G,Ke.x2+=Qe[2]*G,Ke.y2+=Qe[3]*G),Ae){const Ve=new m(Ke.x1,Ke.y1),et=new m(Ke.x2,Ke.y1),ut=new m(Ke.x1,Ke.y2),Mt=new m(Ke.x2,Ke.y2),Qt=Ae*Math.PI/180;Ve._rotate(Qt),et._rotate(Qt),ut._rotate(Qt),Mt._rotate(Qt),Ke.x1=Math.min(Ve.x,et.x,ut.x,Mt.x),Ke.x2=Math.max(Ve.x,et.x,ut.x,Mt.x),Ke.y1=Math.min(Ve.y,et.y,ut.y,Mt.y),Ke.y2=Math.max(Ve.y,et.y,ut.y,Mt.y)}A.emplaceBack(c.x,c.y,Ke.x1,Ke.y1,Ke.x2,Ke.y2,y,M,R)}this.boxEndIndex=A.length}}class Dp{constructor(A=[],c=(y,M)=>y<M?-1:y>M?1:0){if(this.data=A,this.length=this.data.length,this.compare=c,this.length>0)for(let y=(this.length>>1)-1;y>=0;y--)this._down(y)}push(A){this.data.push(A),this._up(this.length++)}pop(){if(this.length===0)return;const A=this.data[0],c=this.data.pop();return--this.length>0&&(this.data[0]=c,this._down(0)),A}peek(){return this.data[0]}_up(A){const{data:c,compare:y}=this,M=c[A];for(;A>0;){const R=A-1>>1,P=c[R];if(y(M,P)>=0)break;c[A]=P,A=R}c[A]=M}_down(A){const{data:c,compare:y}=this,M=this.length>>1,R=c[A];for(;A<M;){let P=1+(A<<1);const G=P+1;if(G<this.length&&y(c[G],c[P])<0&&(P=G),y(c[P],R)>=0)break;c[A]=c[P],A=P}c[A]=R}}function ld(h,A=1,c=!1){const y=Js.fromPoints(h[0]),M=Math.min(y.width(),y.height());let R=M/2;const P=new Dp([],sg),{minX:G,minY:H,maxX:ie,maxY:Ae}=y;if(M===0)return new m(G,H);for(let Qe=G;Qe<ie;Qe+=M)for(let Ve=H;Ve<Ae;Ve+=M)P.push(new Lm(Qe+R,Ve+R,R,h));let ve=function(Qe){let Ve=0,et=0,ut=0;const Mt=Qe[0];for(let Qt=0,Dt=Mt.length,zt=Dt-1;Qt<Dt;zt=Qt++){const ln=Mt[Qt],Cn=Mt[zt],Un=ln.x*Cn.y-Cn.x*ln.y;et+=(ln.x+Cn.x)*Un,ut+=(ln.y+Cn.y)*Un,Ve+=3*Un}return new Lm(et/Ve,ut/Ve,0,Qe)}(h),Ke=P.length;for(;P.length;){const Qe=P.pop();(Qe.d>ve.d||!ve.d)&&(ve=Qe,c&&console.log("found best %d after %d probes",Math.round(1e4*Qe.d)/1e4,Ke)),Qe.max-ve.d<=A||(R=Qe.h/2,P.push(new Lm(Qe.p.x-R,Qe.p.y-R,R,h)),P.push(new Lm(Qe.p.x+R,Qe.p.y-R,R,h)),P.push(new Lm(Qe.p.x-R,Qe.p.y+R,R,h)),P.push(new Lm(Qe.p.x+R,Qe.p.y+R,R,h)),Ke+=4)}return c&&(console.log(`num probes: ${Ke}`),console.log(`best distance: ${ve.d}`)),ve.p}function sg(h,A){return A.max-h.max}function Lm(h,A,c,y){this.p=new m(h,A),this.h=c,this.d=function(M,R){let P=!1,G=1/0;for(let H=0;H<R.length;H++){const ie=R[H];for(let Ae=0,ve=ie.length,Ke=ve-1;Ae<ve;Ke=Ae++){const Qe=ie[Ae],Ve=ie[Ke];Qe.y>M.y!=Ve.y>M.y&&M.x<(Ve.x-Qe.x)*(M.y-Qe.y)/(Ve.y-Qe.y)+Qe.x&&(P=!P),G=Math.min(G,Jo(M,Qe,Ve))}}return(P?1:-1)*Math.sqrt(G)}(this.p,y),this.max=this.d+this.h*Math.SQRT2}var PA;l.aE=void 0,(PA=l.aE||(l.aE={}))[PA.center=1]="center",PA[PA.left=2]="left",PA[PA.right=3]="right",PA[PA.top=4]="top",PA[PA.bottom=5]="bottom",PA[PA["top-left"]=6]="top-left",PA[PA["top-right"]=7]="top-right",PA[PA["bottom-left"]=8]="bottom-left",PA[PA["bottom-right"]=9]="bottom-right";const Fm=Number.POSITIVE_INFINITY;function Lc(h,A){return A[1]!==Fm?function(c,y,M){let R=0,P=0;switch(y=Math.abs(y),M=Math.abs(M),c){case"top-right":case"top-left":case"top":P=M-7;break;case"bottom-right":case"bottom-left":case"bottom":P=7-M}switch(c){case"top-right":case"bottom-right":case"right":R=-y;break;case"top-left":case"bottom-left":case"left":R=y}return[R,P]}(h,A[0],A[1]):function(c,y){let M=0,R=0;y<0&&(y=0);const P=y/Math.SQRT2;switch(c){case"top-right":case"top-left":R=P-7;break;case"bottom-right":case"bottom-left":R=7-P;break;case"bottom":R=7-y;break;case"top":R=y-7}switch(c){case"top-right":case"bottom-right":M=-P;break;case"top-left":case"bottom-left":M=P;break;case"left":M=y;break;case"right":M=-y}return[M,R]}(h,A[0])}function Ad(h,A,c){var y;const M=h.layout,R=(y=M.get("text-variable-anchor-offset"))===null||y===void 0?void 0:y.evaluate(A,{},c);if(R){const G=R.values,H=[];for(let ie=0;ie<G.length;ie+=2){const Ae=H[ie]=G[ie],ve=G[ie+1].map(Ke=>Ke*Xs);Ae.startsWith("top")?ve[1]-=7:Ae.startsWith("bottom")&&(ve[1]+=7),H[ie+1]=ve}return new za(H)}const P=M.get("text-variable-anchor");if(P){let G;G=h._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[M.get("text-radial-offset").evaluate(A,{},c)*Xs,Fm]:M.get("text-offset").evaluate(A,{},c).map(ie=>ie*Xs);const H=[];for(const ie of P)H.push(ie,Lc(ie,G));return new za(H)}return null}function io(h){switch(h){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Ld(h,A,c,y,M,R,P,G,H,ie,Ae,ve){let Ke=R.textMaxSize.evaluate(A,{});Ke===void 0&&(Ke=P);const Qe=h.layers[0].layout,Ve=Qe.get("icon-offset").evaluate(A,{},Ae),et=lg(c.horizontal),ut=P/24,Mt=h.tilePixelRatio*ut,Qt=h.tilePixelRatio*Ke/24,Dt=h.tilePixelRatio*G,zt=h.tilePixelRatio*Qe.get("symbol-spacing"),ln=Qe.get("text-padding")*h.tilePixelRatio,Cn=function(wr,sr,Ui,Gr=1){const Ka=wr.get("icon-padding").evaluate(sr,{},Ui),_s=Ka&&Ka.values;return[_s[0]*Gr,_s[1]*Gr,_s[2]*Gr,_s[3]*Gr]}(Qe,A,Ae,h.tilePixelRatio),Un=Qe.get("text-max-angle")/180*Math.PI,mi=Qe.get("text-rotation-alignment")!=="viewport"&&Qe.get("symbol-placement")!=="point",ai=Qe.get("icon-rotation-alignment")==="map"&&Qe.get("symbol-placement")!=="point",di=Qe.get("symbol-placement"),tr=zt/2,Ai=Qe.get("icon-text-fit");let fi;y&&Ai!=="none"&&(h.allowVerticalPlacement&&c.vertical&&(fi=Op(y,c.vertical,Ai,Qe.get("icon-text-fit-padding"),Ve,ut)),et&&(y=Op(y,et,Ai,Qe.get("icon-text-fit-padding"),Ve,ut)));const En=Ae?ve.line.getGranularityForZoomLevel(Ae.z):1,fr=(wr,sr)=>{sr.x<0||sr.x>=nt||sr.y<0||sr.y>=nt||function(Ui,Gr,Ka,_s,kl,Ou,Dl,KA,Ts,Al,UA,gA,LA,Fc,yA,au,ul,Jl,cl,hl,Ya,Dh,Kp,zc,u){const p=Ui.addToLineVertexArray(Gr,Ka);let b,T,Y,se,je=0,at=0,Ft=0,hn=0,kn=-1,Gn=-1;const mn={};let fn=ih("");if(Ui.allowVerticalPlacement&&_s.vertical){const pc=KA.layout.get("text-rotate").evaluate(Ya,{},zc)+90;Y=new ou(Ts,Gr,Al,UA,gA,_s.vertical,LA,Fc,yA,pc),Dl&&(se=new ou(Ts,Gr,Al,UA,gA,Dl,ul,Jl,yA,pc))}if(kl){const pc=KA.layout.get("icon-rotate").evaluate(Ya,{}),ch=KA.layout.get("icon-text-fit")!=="none",Nm=Ah(kl,pc,Kp,ch),mf=Dl?Ah(Dl,pc,Kp,ch):void 0;T=new ou(Ts,Gr,Al,UA,gA,kl,ul,Jl,!1,pc),je=4*Nm.length;const x0=Ui.iconSizeData;let sm=null;x0.kind==="source"?(sm=[$u*KA.layout.get("icon-size").evaluate(Ya,{})],sm[0]>ad&&Ot(`${Ui.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):x0.kind==="composite"&&(sm=[$u*Dh.compositeIconSizes[0].evaluate(Ya,{},zc),$u*Dh.compositeIconSizes[1].evaluate(Ya,{},zc)],(sm[0]>ad||sm[1]>ad)&&Ot(`${Ui.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Ui.addSymbols(Ui.icon,Nm,sm,hl,cl,Ya,l.ao.none,Gr,p.lineStartIndex,p.lineLength,-1,zc),kn=Ui.icon.placedSymbolArray.length-1,mf&&(at=4*mf.length,Ui.addSymbols(Ui.icon,mf,sm,hl,cl,Ya,l.ao.vertical,Gr,p.lineStartIndex,p.lineLength,-1,zc),Gn=Ui.icon.placedSymbolArray.length-1)}const Pr=Object.keys(_s.horizontal);for(const pc of Pr){const ch=_s.horizontal[pc];if(!b){fn=ih(ch.text);const mf=KA.layout.get("text-rotate").evaluate(Ya,{},zc);b=new ou(Ts,Gr,Al,UA,gA,ch,LA,Fc,yA,mf)}const Nm=ch.positionedLines.length===1;if(Ft+=uh(Ui,Gr,ch,Ou,KA,yA,Ya,au,p,_s.vertical?l.ao.horizontal:l.ao.horizontalOnly,Nm?Pr:[pc],mn,kn,Dh,zc),Nm)break}_s.vertical&&(hn+=uh(Ui,Gr,_s.vertical,Ou,KA,yA,Ya,au,p,l.ao.vertical,["vertical"],mn,Gn,Dh,zc));const Kr=b?b.boxStartIndex:Ui.collisionBoxArray.length,bs=b?b.boxEndIndex:Ui.collisionBoxArray.length,tn=Y?Y.boxStartIndex:Ui.collisionBoxArray.length,$t=Y?Y.boxEndIndex:Ui.collisionBoxArray.length,un=T?T.boxStartIndex:Ui.collisionBoxArray.length,Ln=T?T.boxEndIndex:Ui.collisionBoxArray.length,ir=se?se.boxStartIndex:Ui.collisionBoxArray.length,qo=se?se.boxEndIndex:Ui.collisionBoxArray.length;let nr=-1;const Or=(pc,ch)=>pc&&pc.circleDiameter?Math.max(pc.circleDiameter,ch):ch;nr=Or(b,nr),nr=Or(Y,nr),nr=Or(T,nr),nr=Or(se,nr);const FA=nr>-1?1:0;FA&&(nr*=u/Xs),Ui.glyphOffsetArray.length>=Rm.MAX_GLYPHS&&Ot("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ya.sortKey!==void 0&&Ui.addToSortKeyRanges(Ui.symbolInstances.length,Ya.sortKey);const Oa=Ad(KA,Ya,zc),[am,AC]=function(pc,ch){const Nm=pc.length,mf=ch?.values;if(mf?.length>0)for(let x0=0;x0<mf.length;x0+=2){const sm=mf[x0+1];pc.emplaceBack(l.aE[mf[x0]],sm[0],sm[1])}return[Nm,pc.length]}(Ui.textAnchorOffsets,Oa);Ui.symbolInstances.emplaceBack(Gr.x,Gr.y,mn.right>=0?mn.right:-1,mn.center>=0?mn.center:-1,mn.left>=0?mn.left:-1,mn.vertical||-1,kn,Gn,fn,Kr,bs,tn,$t,un,Ln,ir,qo,Al,Ft,hn,je,at,FA,0,LA,nr,am,AC)}(h,sr,wr,c,y,M,fi,h.layers[0],h.collisionBoxArray,A.index,A.sourceLayerIndex,h.index,Mt,[ln,ln,ln,ln],mi,H,Dt,Cn,ai,Ve,A,R,ie,Ae,P)};if(di==="line")for(const wr of ll(A.geometry,0,0,nt,nt)){const sr=cs(wr,En),Ui=lC(sr,zt,Un,c.vertical||et,y,24,Qt,h.overscaling,nt);for(const Gr of Ui)et&&Rp(h,et.text,tr,Gr)||fr(sr,Gr)}else if(di==="line-center"){for(const wr of A.geometry)if(wr.length>1){const sr=cs(wr,En),Ui=by(sr,Un,c.vertical||et,y,24,Qt);Ui&&fr(sr,Ui)}}else if(A.type==="Polygon")for(const wr of qc(A.geometry,0)){const sr=ld(wr,16);fr(cs(wr[0],En,!0),new sd(sr.x,sr.y,0))}else if(A.type==="LineString")for(const wr of A.geometry){const sr=cs(wr,En);fr(sr,new sd(sr[0].x,sr[0].y,0))}else if(A.type==="Point")for(const wr of A.geometry)for(const sr of wr)fr([sr],new sd(sr.x,sr.y,0))}function uh(h,A,c,y,M,R,P,G,H,ie,Ae,ve,Ke,Qe,Ve){const et=function(Qt,Dt,zt,ln,Cn,Un,mi,ai){const di=ln.layout.get("text-rotate").evaluate(Un,{})*Math.PI/180,tr=[];for(const Ai of Dt.positionedLines)for(const fi of Ai.positionedGlyphs){if(!fi.rect)continue;const En=fi.rect||{};let fr=4,wr=!0,sr=1,Ui=0;const Gr=(Cn||ai)&&fi.vertical,Ka=fi.metrics.advance*fi.scale/2;if(ai&&Dt.verticalizable&&(Ui=Ai.lineOffset/2-(fi.imageName?-(Xs-fi.metrics.width*fi.scale)/2:(fi.scale-1)*Xs)),fi.imageName){const Jl=mi[fi.imageName];wr=Jl.sdf,sr=Jl.pixelRatio,fr=1/sr}const _s=Cn?[fi.x+Ka,fi.y]:[0,0];let kl=Cn?[0,0]:[fi.x+Ka+zt[0],fi.y+zt[1]-Ui],Ou=[0,0];Gr&&(Ou=kl,kl=[0,0]);const Dl=fi.metrics.isDoubleResolution?2:1,KA=(fi.metrics.left-fr)*fi.scale-Ka+kl[0],Ts=(-fi.metrics.top-fr)*fi.scale+kl[1],Al=KA+En.w/Dl*fi.scale/sr,UA=Ts+En.h/Dl*fi.scale/sr,gA=new m(KA,Ts),LA=new m(Al,Ts),Fc=new m(KA,UA),yA=new m(Al,UA);if(Gr){const Jl=new m(-Ka,Ka- -17),cl=-Math.PI/2,hl=12-Ka,Ya=new m(22-hl,-(fi.imageName?hl:0)),Dh=new m(...Ou);gA._rotateAround(cl,Jl)._add(Ya)._add(Dh),LA._rotateAround(cl,Jl)._add(Ya)._add(Dh),Fc._rotateAround(cl,Jl)._add(Ya)._add(Dh),yA._rotateAround(cl,Jl)._add(Ya)._add(Dh)}if(di){const Jl=Math.sin(di),cl=Math.cos(di),hl=[cl,-Jl,Jl,cl];gA._matMult(hl),LA._matMult(hl),Fc._matMult(hl),yA._matMult(hl)}const au=new m(0,0),ul=new m(0,0);tr.push({tl:gA,tr:LA,bl:Fc,br:yA,tex:En,writingMode:Dt.writingMode,glyphOffset:_s,sectionIndex:fi.sectionIndex,isSDF:wr,pixelOffsetTL:au,pixelOffsetBR:ul,minFontScaleX:0,minFontScaleY:0})}return tr}(0,c,G,M,R,P,y,h.allowVerticalPlacement),ut=h.textSizeData;let Mt=null;ut.kind==="source"?(Mt=[$u*M.layout.get("text-size").evaluate(P,{})],Mt[0]>ad&&Ot(`${h.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ut.kind==="composite"&&(Mt=[$u*Qe.compositeTextSizes[0].evaluate(P,{},Ve),$u*Qe.compositeTextSizes[1].evaluate(P,{},Ve)],(Mt[0]>ad||Mt[1]>ad)&&Ot(`${h.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),h.addSymbols(h.text,et,Mt,G,R,P,ie,A,H.lineStartIndex,H.lineLength,Ke,Ve);for(const Qt of Ae)ve[Qt]=h.text.placedSymbolArray.length-1;return 4*et.length}function lg(h){for(const A in h)return h[A];return null}function Rp(h,A,c,y){const M=h.compareText;if(A in M){const R=M[A];for(let P=R.length-1;P>=0;P--)if(y.dist(R[P])<c)return!0}else M[A]=[];return M[A].push(y),!1}const Pa=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Ag{static from(A){if(!(A instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[c,y]=new Uint8Array(A,0,2);if(c!==219)throw new Error("Data does not appear to be in a KDBush format.");const M=y>>4;if(M!==1)throw new Error(`Got v${M} data when expected v1.`);const R=Pa[15&y];if(!R)throw new Error("Unrecognized array type.");const[P]=new Uint16Array(A,2,1),[G]=new Uint32Array(A,4,1);return new Ag(G,P,R,A)}constructor(A,c=64,y=Float64Array,M){if(isNaN(A)||A<0)throw new Error(`Unpexpected numItems value: ${A}.`);this.numItems=+A,this.nodeSize=Math.min(Math.max(+c,2),65535),this.ArrayType=y,this.IndexArrayType=A<65536?Uint16Array:Uint32Array;const R=Pa.indexOf(this.ArrayType),P=2*A*this.ArrayType.BYTES_PER_ELEMENT,G=A*this.IndexArrayType.BYTES_PER_ELEMENT,H=(8-G%8)%8;if(R<0)throw new Error(`Unexpected typed array class: ${y}.`);M&&M instanceof ArrayBuffer?(this.data=M,this.ids=new this.IndexArrayType(this.data,8,A),this.coords=new this.ArrayType(this.data,8+G+H,2*A),this._pos=2*A,this._finished=!0):(this.data=new ArrayBuffer(8+P+G+H),this.ids=new this.IndexArrayType(this.data,8,A),this.coords=new this.ArrayType(this.data,8+G+H,2*A),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+R]),new Uint16Array(this.data,2,1)[0]=c,new Uint32Array(this.data,4,1)[0]=A)}add(A,c){const y=this._pos>>1;return this.ids[y]=y,this.coords[this._pos++]=A,this.coords[this._pos++]=c,y}finish(){const A=this._pos>>1;if(A!==this.numItems)throw new Error(`Added ${A} items when expected ${this.numItems}.`);return o1(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(A,c,y,M){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:R,coords:P,nodeSize:G}=this,H=[0,R.length-1,0],ie=[];for(;H.length;){const Ae=H.pop()||0,ve=H.pop()||0,Ke=H.pop()||0;if(ve-Ke<=G){for(let ut=Ke;ut<=ve;ut++){const Mt=P[2*ut],Qt=P[2*ut+1];Mt>=A&&Mt<=y&&Qt>=c&&Qt<=M&&ie.push(R[ut])}continue}const Qe=Ke+ve>>1,Ve=P[2*Qe],et=P[2*Qe+1];Ve>=A&&Ve<=y&&et>=c&&et<=M&&ie.push(R[Qe]),(Ae===0?A<=Ve:c<=et)&&(H.push(Ke),H.push(Qe-1),H.push(1-Ae)),(Ae===0?y>=Ve:M>=et)&&(H.push(Qe+1),H.push(ve),H.push(1-Ae))}return ie}within(A,c,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:M,coords:R,nodeSize:P}=this,G=[0,M.length-1,0],H=[],ie=y*y;for(;G.length;){const Ae=G.pop()||0,ve=G.pop()||0,Ke=G.pop()||0;if(ve-Ke<=P){for(let ut=Ke;ut<=ve;ut++)xy(R[2*ut],R[2*ut+1],A,c)<=ie&&H.push(M[ut]);continue}const Qe=Ke+ve>>1,Ve=R[2*Qe],et=R[2*Qe+1];xy(Ve,et,A,c)<=ie&&H.push(M[Qe]),(Ae===0?A-y<=Ve:c-y<=et)&&(G.push(Ke),G.push(Qe-1),G.push(1-Ae)),(Ae===0?A+y>=Ve:c+y>=et)&&(G.push(Qe+1),G.push(ve),G.push(1-Ae))}return H}}function o1(h,A,c,y,M,R){if(M-y<=c)return;const P=y+M>>1;C0(h,A,P,y,M,R),o1(h,A,c,y,P-1,1-R),o1(h,A,c,P+1,M,1-R)}function C0(h,A,c,y,M,R){for(;M>y;){if(M-y>600){const ie=M-y+1,Ae=c-y+1,ve=Math.log(ie),Ke=.5*Math.exp(2*ve/3),Qe=.5*Math.sqrt(ve*Ke*(ie-Ke)/ie)*(Ae-ie/2<0?-1:1);C0(h,A,c,Math.max(y,Math.floor(c-Ae*Ke/ie+Qe)),Math.min(M,Math.floor(c+(ie-Ae)*Ke/ie+Qe)),R)}const P=A[2*c+R];let G=y,H=M;for(_0(h,A,y,c),A[2*M+R]>P&&_0(h,A,y,M);G<H;){for(_0(h,A,G,H),G++,H--;A[2*G+R]<P;)G++;for(;A[2*H+R]>P;)H--}A[2*y+R]===P?_0(h,A,y,H):(H++,_0(h,A,H,M)),H<=c&&(y=H+1),c<=H&&(M=H-1)}}function _0(h,A,c,y){ug(h,c,y),ug(A,2*c,2*y),ug(A,2*c+1,2*y+1)}function ug(h,A,c){const y=h[A];h[A]=h[c],h[c]=y}function xy(h,A,c,y){const M=h-c,R=A-y;return M*M+R*R}var cg;l.cx=void 0,(cg=l.cx||(l.cx={})).create="create",cg.load="load",cg.fullLoad="fullLoad";let b0=null,Fd=[];const zm=1e3/60,a1="loadTime",hg="fullLoadTime",Pp={mark(h){performance.mark(h)},frame(h){const A=h;b0!=null&&Fd.push(A-b0),b0=A},clearMetrics(){b0=null,Fd=[],performance.clearMeasures(a1),performance.clearMeasures(hg);for(const h in l.cx)performance.clearMarks(l.cx[h])},getPerformanceMetrics(){performance.measure(a1,l.cx.create,l.cx.load),performance.measure(hg,l.cx.create,l.cx.fullLoad);const h=performance.getEntriesByName(a1)[0].duration,A=performance.getEntriesByName(hg)[0].duration,c=Fd.length,y=1/(Fd.reduce((R,P)=>R+P,0)/c/1e3),M=Fd.filter(R=>R>zm).reduce((R,P)=>R+(P-zm)/zm,0);return{loadTime:h,fullLoadTime:A,fps:y,percentDroppedFrames:M/(c+M)*100,totalFrames:c}}};l.$=nt,l.A=ae,l.B=function([h,A,c]){return A+=90,A*=Math.PI/180,c*=Math.PI/180,{x:h*Math.cos(A)*Math.sin(c),y:h*Math.sin(A)*Math.sin(c),z:h*Math.cos(c)}},l.C=Ru,l.D=Oi,l.E=kt,l.F=Po,l.G=Cl,l.H=function(h){if(on==null){const A=h.navigator?h.navigator.userAgent:null;on=!!h.safari||!(!A||!(/\b(iPad|iPhone|iPod)\b/.test(A)||A.match("Safari")&&!A.match("Chrome")))}return on},l.I=c0,l.J=class{constructor(h,A){this.target=h,this.mapId=A,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new yy(()=>this.process()),this.subscription=In(this.target,"message",c=>this.receive(c),!1),this.globalScope=Kt(self)?h:window}registerMessageHandler(h,A){this.messageHandlers[h]=A}sendAsync(h,A){return new Promise((c,y)=>{const M=Math.round(1e18*Math.random()).toString(36).substring(0,10),R=A?In(A.signal,"abort",()=>{R?.unsubscribe(),delete this.resolveRejects[M];const H={id:M,type:"<cancel>",origin:location.origin,targetMapId:h.targetMapId,sourceMapId:this.mapId};this.target.postMessage(H)},na):null;this.resolveRejects[M]={resolve:H=>{R?.unsubscribe(),c(H)},reject:H=>{R?.unsubscribe(),y(H)}};const P=[],G=Object.assign(Object.assign({},h),{id:M,sourceMapId:this.mapId,origin:location.origin,data:Ic(h.data,P)});this.target.postMessage(G,{transfer:P})})}receive(h){const A=h.data,c=A.id;if(!(A.origin!=="file://"&&location.origin!=="file://"&&A.origin!=="resource://android"&&location.origin!=="resource://android"&&A.origin!==location.origin||A.targetMapId&&this.mapId!==A.targetMapId)){if(A.type==="<cancel>"){delete this.tasks[c];const y=this.abortControllers[c];return delete this.abortControllers[c],void(y&&y.abort())}if(Kt(self)||A.mustQueue)return this.tasks[c]=A,this.taskQueue.push(c),void this.invoker.trigger();this.processTask(c,A)}}process(){if(this.taskQueue.length===0)return;const h=this.taskQueue.shift(),A=this.tasks[h];delete this.tasks[h],this.taskQueue.length>0&&this.invoker.trigger(),A&&this.processTask(h,A)}processTask(h,A){return o(this,void 0,void 0,function*(){if(A.type==="<response>"){const M=this.resolveRejects[h];return delete this.resolveRejects[h],M?void(A.error?M.reject(gu(A.error)):M.resolve(gu(A.data))):void 0}if(!this.messageHandlers[A.type])return void this.completeTask(h,new Error(`Could not find a registered handler for ${A.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const c=gu(A.data),y=new AbortController;this.abortControllers[h]=y;try{const M=yield this.messageHandlers[A.type](A.sourceMapId,c,y);this.completeTask(h,null,M)}catch(M){this.completeTask(h,M)}})}completeTask(h,A,c){const y=[];delete this.abortControllers[h];const M={id:h,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:A?Ic(A):null,data:Ic(c,y)};this.target.postMessage(M,{transfer:y})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},l.K=Te,l.L=function(){var h=new ae(16);return ae!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h},l.M=function(h,A,c){var y,M,R,P,G,H,ie,Ae,ve,Ke,Qe,Ve,et=c[0],ut=c[1],Mt=c[2];return A===h?(h[12]=A[0]*et+A[4]*ut+A[8]*Mt+A[12],h[13]=A[1]*et+A[5]*ut+A[9]*Mt+A[13],h[14]=A[2]*et+A[6]*ut+A[10]*Mt+A[14],h[15]=A[3]*et+A[7]*ut+A[11]*Mt+A[15]):(M=A[1],R=A[2],P=A[3],G=A[4],H=A[5],ie=A[6],Ae=A[7],ve=A[8],Ke=A[9],Qe=A[10],Ve=A[11],h[0]=y=A[0],h[1]=M,h[2]=R,h[3]=P,h[4]=G,h[5]=H,h[6]=ie,h[7]=Ae,h[8]=ve,h[9]=Ke,h[10]=Qe,h[11]=Ve,h[12]=y*et+G*ut+ve*Mt+A[12],h[13]=M*et+H*ut+Ke*Mt+A[13],h[14]=R*et+ie*ut+Qe*Mt+A[14],h[15]=P*et+Ae*ut+Ve*Mt+A[15]),h},l.N=function(h,A,c){var y=c[0],M=c[1],R=c[2];return h[0]=A[0]*y,h[1]=A[1]*y,h[2]=A[2]*y,h[3]=A[3]*y,h[4]=A[4]*M,h[5]=A[5]*M,h[6]=A[6]*M,h[7]=A[7]*M,h[8]=A[8]*R,h[9]=A[9]*R,h[10]=A[10]*R,h[11]=A[11]*R,h[12]=A[12],h[13]=A[13],h[14]=A[14],h[15]=A[15],h},l.O=function(h,A,c){var y=A[0],M=A[1],R=A[2],P=A[3],G=A[4],H=A[5],ie=A[6],Ae=A[7],ve=A[8],Ke=A[9],Qe=A[10],Ve=A[11],et=A[12],ut=A[13],Mt=A[14],Qt=A[15],Dt=c[0],zt=c[1],ln=c[2],Cn=c[3];return h[0]=Dt*y+zt*G+ln*ve+Cn*et,h[1]=Dt*M+zt*H+ln*Ke+Cn*ut,h[2]=Dt*R+zt*ie+ln*Qe+Cn*Mt,h[3]=Dt*P+zt*Ae+ln*Ve+Cn*Qt,h[4]=(Dt=c[4])*y+(zt=c[5])*G+(ln=c[6])*ve+(Cn=c[7])*et,h[5]=Dt*M+zt*H+ln*Ke+Cn*ut,h[6]=Dt*R+zt*ie+ln*Qe+Cn*Mt,h[7]=Dt*P+zt*Ae+ln*Ve+Cn*Qt,h[8]=(Dt=c[8])*y+(zt=c[9])*G+(ln=c[10])*ve+(Cn=c[11])*et,h[9]=Dt*M+zt*H+ln*Ke+Cn*ut,h[10]=Dt*R+zt*ie+ln*Qe+Cn*Mt,h[11]=Dt*P+zt*Ae+ln*Ve+Cn*Qt,h[12]=(Dt=c[12])*y+(zt=c[13])*G+(ln=c[14])*ve+(Cn=c[15])*et,h[13]=Dt*M+zt*H+ln*Ke+Cn*ut,h[14]=Dt*R+zt*ie+ln*Qe+Cn*Mt,h[15]=Dt*P+zt*Ae+ln*Ve+Cn*Qt,h},l.P=m,l.Q=function(h,A){const c={};for(let y=0;y<A.length;y++){const M=A[y];M in h&&(c[M]=h[M])}return c},l.R=fA,l.S=Zl,l.T=v,l.U=qr,l.V=Ud,l.W=Q,l.X=ee,l.Y=$n,l.Z=Zu,l._=o,l.a=le,l.a$=we,l.a0=function(h,A){var c,y,M,R,P;if(!h)return A??{};if(!A)return h;let G=Object.assign({},h);if(A.removeAll&&(G={removeAll:!0}),A.remove){const H=new Set(A.remove);G.add&&(G.add=G.add.filter(Ae=>!H.has(Ae.id))),G.update&&(G.update=G.update.filter(Ae=>!H.has(Ae.id)));const ie=new Set(((c=h.add)!==null&&c!==void 0?c:[]).map(Ae=>Ae.id));A.remove=A.remove.filter(Ae=>!ie.has(Ae))}if(A.remove){const H=new Set(G.remove?G.remove.concat(A.remove):A.remove);G.remove=Array.from(H.values())}if(A.add){const H=G.add?G.add.concat(A.add):A.add,ie=new Map(H.map(Ae=>[Ae.id,Ae]));G.add=Array.from(ie.values())}if(A.update){const H=new Map((y=G.update)===null||y===void 0?void 0:y.map(ie=>[ie.id,ie]));for(const ie of A.update){const Ae=(M=H.get(ie.id))!==null&&M!==void 0?M:{id:ie.id};ie.newGeometry&&(Ae.newGeometry=ie.newGeometry),ie.addOrUpdateProperties&&(Ae.addOrUpdateProperties=((R=Ae.addOrUpdateProperties)!==null&&R!==void 0?R:[]).concat(ie.addOrUpdateProperties)),ie.removeProperties&&(Ae.removeProperties=((P=Ae.removeProperties)!==null&&P!==void 0?P:[]).concat(ie.removeProperties)),ie.removeAllProperties&&(Ae.removeAllProperties=!0),H.set(ie.id,Ae)}G.update=Array.from(H.values())}return G.remove&&G.add&&(G.remove=G.remove.filter(H=>G.add.findIndex(ie=>ie.id===H)===-1)),G},l.a1=g0,l.a2=Js,l.a3=25,l.a4=n1,l.a5=h=>{const A=window.document.createElement("video");return A.muted=!0,new Promise(c=>{A.onloadstart=()=>{c(A)};for(const y of h){const M=window.document.createElement("source");De(y)||(A.crossOrigin="Anonymous"),M.src=y,A.appendChild(M)}})},l.a6=Sn,l.a7=function(){return Pe++},l.a8=Se,l.a9=Rm,l.aA=function(h){let A=1/0,c=1/0,y=-1/0,M=-1/0;for(const R of h)A=Math.min(A,R.x),c=Math.min(c,R.y),y=Math.max(y,R.x),M=Math.max(M,R.y);return[A,c,y,M]},l.aB=Xs,l.aC=be,l.aD=function(h,A,c,y,M=!1){if(!c[0]&&!c[1])return[0,0];const R=M?y==="map"?-h.bearingInRadians:0:y==="viewport"?h.bearingInRadians:0;if(R){const P=Math.sin(R),G=Math.cos(R);c=[c[0]*G-c[1]*P,c[0]*P+c[1]*G]}return[M?c[0]:be(A,c[0],h.zoom),M?c[1]:be(A,c[1],h.zoom)]},l.aF=Tp,l.aG=io,l.aH=X0,l.aI=Ag,l.aJ=ja,l.aK=Ea,l.aL=Bt,l.aM=Er,l.aN=la,l.aO=Rt,l.aP=ei,l.aQ=wl,l.aR=ye,l.aS=ge,l.aT=function(h){var A=new ae(3);return A[0]=h[0],A[1]=h[1],A[2]=h[2],A},l.aU=function(h,A,c){return h[0]=A[0]-c[0],h[1]=A[1]-c[1],h[2]=A[2]-c[2],h},l.aV=function(h,A){var c=A[0],y=A[1],M=A[2],R=c*c+y*y+M*M;return R>0&&(R=1/Math.sqrt(R)),h[0]=A[0]*R,h[1]=A[1]*R,h[2]=A[2]*R,h},l.aW=Me,l.aX=function(h,A){return h[0]*A[0]+h[1]*A[1]+h[2]*A[2]},l.aY=function(h,A,c){return h[0]=A[0]*c[0],h[1]=A[1]*c[1],h[2]=A[2]*c[2],h[3]=A[3]*c[3],h},l.aZ=W,l.a_=function(h,A,c){const y=A[0]*c[0]+A[1]*c[1]+A[2]*c[2];return y===0?null:(-(h[0]*c[0]+h[1]*c[1]+h[2]*c[2])-c[3])/y},l.aa=Bc,l.ab=iu,l.ac=kh,l.ad=function(h){const A={};if(h.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(c,y,M,R)=>{const P=M||R;return A[y]=!P||P.toLowerCase(),""}),A["max-age"]){const c=parseInt(A["max-age"],10);isNaN(c)?delete A["max-age"]:A["max-age"]=c}return A},l.ae=Bi,l.af=function(h){return Math.pow(2,h)},l.ag=Z,l.ah=St,l.ai=85.051129,l.aj=p0,l.ak=function(h){return Math.log(h)/Math.LN2},l.al=function(h){var A=h[0],c=h[1];return A*A+c*c},l.am=function(h,A){const c=[];for(const y in h)y in A||c.push(y);return c},l.an=function(h,A){let c=0,y=0;if(h.kind==="constant")y=h.layoutSize;else if(h.kind!=="source"){const{interpolationType:M,minZoom:R,maxZoom:P}=h,G=M?St(Da.interpolationFactor(M,A,R,P),0,1):0;h.kind==="camera"?y=Ru.number(h.minSize,h.maxSize,G):c=G}return{uSizeT:c,uSize:y}},l.ap=function(h,{uSize:A,uSizeT:c},{lowerSize:y,upperSize:M}){return h.kind==="source"?y/$u:h.kind==="composite"?Ru.number(y/$u,M/$u,c):A},l.aq=function(h,A){var c=A[0],y=A[1],M=A[2],R=A[3],P=A[4],G=A[5],H=A[6],ie=A[7],Ae=A[8],ve=A[9],Ke=A[10],Qe=A[11],Ve=A[12],et=A[13],ut=A[14],Mt=A[15],Qt=c*G-y*P,Dt=c*H-M*P,zt=c*ie-R*P,ln=y*H-M*G,Cn=y*ie-R*G,Un=M*ie-R*H,mi=Ae*et-ve*Ve,ai=Ae*ut-Ke*Ve,di=Ae*Mt-Qe*Ve,tr=ve*ut-Ke*et,Ai=ve*Mt-Qe*et,fi=Ke*Mt-Qe*ut,En=Qt*fi-Dt*Ai+zt*tr+ln*di-Cn*ai+Un*mi;return En?(h[0]=(G*fi-H*Ai+ie*tr)*(En=1/En),h[1]=(M*Ai-y*fi-R*tr)*En,h[2]=(et*Un-ut*Cn+Mt*ln)*En,h[3]=(Ke*Cn-ve*Un-Qe*ln)*En,h[4]=(H*di-P*fi-ie*ai)*En,h[5]=(c*fi-M*di+R*ai)*En,h[6]=(ut*zt-Ve*Un-Mt*Dt)*En,h[7]=(Ae*Un-Ke*zt+Qe*Dt)*En,h[8]=(P*Ai-G*di+ie*mi)*En,h[9]=(y*di-c*Ai-R*mi)*En,h[10]=(Ve*Cn-et*zt+Mt*Qt)*En,h[11]=(ve*zt-Ae*Cn-Qe*Qt)*En,h[12]=(G*ai-P*tr-H*mi)*En,h[13]=(c*tr-y*ai+M*mi)*En,h[14]=(et*Dt-Ve*ln-ut*Qt)*En,h[15]=(Ae*ln-ve*Dt+Ke*Qt)*En,h):null},l.ar=ot,l.as=function(h){var A=h[0],c=h[1];return Math.sqrt(A*A+c*c)},l.at=function(h){return h[0]=0,h[1]=0,h},l.au=function(h,A,c){return h[0]=A[0]*c,h[1]=A[1]*c,h},l.av=Tm,l.aw=qe,l.ax=function(h,A,c,y){const M=A.y-h.y,R=A.x-h.x,P=y.y-c.y,G=y.x-c.x,H=P*R-G*M;if(H===0)return null;const ie=(G*(h.y-c.y)-P*(h.x-c.x))/H;return new m(h.x+ie*R,h.y+ie*M)},l.ay=ll,l.az=mp,l.b=Jn,l.b$=class extends I{},l.b0=function(h,A,c){return h[0]=A[0]*c,h[1]=A[1]*c,h[2]=A[2]*c,h[3]=A[3]*c,h},l.b1=function(h,A){return h[0]*A[0]+h[1]*A[1]+h[2]*A[2]+h[3]},l.b2=rg,l.b3=Ba,l.b4=function(h,A,c,y,M){var R=1/Math.tan(A/2);if(h[0]=R/c,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=R,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,M!=null&&M!==1/0){var P=1/(y-M);h[10]=(M+y)*P,h[14]=2*M*y*P}else h[10]=-1,h[14]=-2*y;return h},l.b5=function(h){var A=new ae(16);return A[0]=h[0],A[1]=h[1],A[2]=h[2],A[3]=h[3],A[4]=h[4],A[5]=h[5],A[6]=h[6],A[7]=h[7],A[8]=h[8],A[9]=h[9],A[10]=h[10],A[11]=h[11],A[12]=h[12],A[13]=h[13],A[14]=h[14],A[15]=h[15],A},l.b6=function(h,A,c){var y=Math.sin(c),M=Math.cos(c),R=A[0],P=A[1],G=A[2],H=A[3],ie=A[4],Ae=A[5],ve=A[6],Ke=A[7];return A!==h&&(h[8]=A[8],h[9]=A[9],h[10]=A[10],h[11]=A[11],h[12]=A[12],h[13]=A[13],h[14]=A[14],h[15]=A[15]),h[0]=R*M+ie*y,h[1]=P*M+Ae*y,h[2]=G*M+ve*y,h[3]=H*M+Ke*y,h[4]=ie*M-R*y,h[5]=Ae*M-P*y,h[6]=ve*M-G*y,h[7]=Ke*M-H*y,h},l.b7=function(h,A,c){var y=Math.sin(c),M=Math.cos(c),R=A[4],P=A[5],G=A[6],H=A[7],ie=A[8],Ae=A[9],ve=A[10],Ke=A[11];return A!==h&&(h[0]=A[0],h[1]=A[1],h[2]=A[2],h[3]=A[3],h[12]=A[12],h[13]=A[13],h[14]=A[14],h[15]=A[15]),h[4]=R*M+ie*y,h[5]=P*M+Ae*y,h[6]=G*M+ve*y,h[7]=H*M+Ke*y,h[8]=ie*M-R*y,h[9]=Ae*M-P*y,h[10]=ve*M-G*y,h[11]=Ke*M-H*y,h},l.b8=function(){const h=new Float32Array(16);return Z(h),h},l.b9=function(){const h=new Float64Array(16);return Z(h),h},l.bA=function(h,A){const c=Ne(h,360),y=Ne(A,360),M=y-c,R=y>c?M-360:M+360;return Math.abs(M)<Math.abs(R)?M:R},l.bB=function(h){return h[0]=0,h[1]=0,h[2]=0,h},l.bC=function(h,A,c,y){const M=Math.sqrt(h*h+A*A),R=Math.sqrt(c*c+y*y);h/=M,A/=M,c/=R,y/=R;const P=Math.acos(h*c+A*y);return-A*c+h*y>0?P:-P},l.bD=function(h,A){const c=Ne(h,2*Math.PI),y=Ne(A,2*Math.PI);return Math.min(Math.abs(c-y),Math.abs(c-y+2*Math.PI),Math.abs(c-y-2*Math.PI))},l.bE=function(){const h={},A=it.$version;for(const c in it.$root){const y=it.$root[c];if(y.required){let M=null;M=c==="version"?A:y.type==="array"?[]:{},M!=null&&(h[c]=M)}}return h},l.bF=nf,l.bG=dt,l.bH=function h(A,c){if(Array.isArray(A)){if(!Array.isArray(c)||A.length!==c.length)return!1;for(let y=0;y<A.length;y++)if(!h(A[y],c[y]))return!1;return!0}if(typeof A=="object"&&A!==null&&c!==null){if(typeof c!="object"||Object.keys(A).length!==Object.keys(c).length)return!1;for(const y in A)if(!h(A[y],c[y]))return!1;return!0}return A===c},l.bI=function(h){h=h.slice();const A=Object.create(null);for(let c=0;c<h.length;c++)A[h[c].id]=h[c];for(let c=0;c<h.length;c++)"ref"in h[c]&&(h[c]=Dn(h[c],A[h[c].ref]));return h},l.bJ=function(h){if(h.type==="custom")return new sC(h);switch(h.type){case"background":return new ng(h);case"circle":return new Yf(h);case"color-relief":return new F(h);case"fill":return new uf(h);case"fill-extrusion":return new ta(h);case"heatmap":return new zs(h);case"hillshade":return new s0(h);case"line":return new Uc(h);case"raster":return new f0(h);case"symbol":return new d0(h)}},l.bK=bt,l.bL=function(h,A){if(!h)return[{command:"setStyle",args:[A]}];let c=[];try{if(!Mn(h.version,A.version))return[{command:"setStyle",args:[A]}];Mn(h.center,A.center)||c.push({command:"setCenter",args:[A.center]}),Mn(h.state,A.state)||c.push({command:"setGlobalState",args:[A.state]}),Mn(h.centerAltitude,A.centerAltitude)||c.push({command:"setCenterAltitude",args:[A.centerAltitude]}),Mn(h.zoom,A.zoom)||c.push({command:"setZoom",args:[A.zoom]}),Mn(h.bearing,A.bearing)||c.push({command:"setBearing",args:[A.bearing]}),Mn(h.pitch,A.pitch)||c.push({command:"setPitch",args:[A.pitch]}),Mn(h.roll,A.roll)||c.push({command:"setRoll",args:[A.roll]}),Mn(h.sprite,A.sprite)||c.push({command:"setSprite",args:[A.sprite]}),Mn(h.glyphs,A.glyphs)||c.push({command:"setGlyphs",args:[A.glyphs]}),Mn(h.transition,A.transition)||c.push({command:"setTransition",args:[A.transition]}),Mn(h.light,A.light)||c.push({command:"setLight",args:[A.light]}),Mn(h.terrain,A.terrain)||c.push({command:"setTerrain",args:[A.terrain]}),Mn(h.sky,A.sky)||c.push({command:"setSky",args:[A.sky]}),Mn(h.projection,A.projection)||c.push({command:"setProjection",args:[A.projection]});const y={},M=[];(function(P,G,H,ie){let Ae;for(Ae in G=G||{},P=P||{})Object.prototype.hasOwnProperty.call(P,Ae)&&(Object.prototype.hasOwnProperty.call(G,Ae)||qi(Ae,H,ie));for(Ae in G)Object.prototype.hasOwnProperty.call(G,Ae)&&(Object.prototype.hasOwnProperty.call(P,Ae)?Mn(P[Ae],G[Ae])||(P[Ae].type==="geojson"&&G[Ae].type==="geojson"&&wi(P,G,Ae)?ii(H,{command:"setGeoJSONSourceData",args:[Ae,G[Ae].data]}):er(Ae,G,H,ie)):Wn(Ae,G,H))})(h.sources,A.sources,M,y);const R=[];h.layers&&h.layers.forEach(P=>{"source"in P&&y[P.source]?c.push({command:"removeLayer",args:[P.id]}):R.push(P)}),c=c.concat(M),function(P,G,H){G=G||[];const ie=(P=P||[]).map(ti),Ae=G.map(ti),ve=P.reduce(Wi,{}),Ke=G.reduce(Wi,{}),Qe=ie.slice(),Ve=Object.create(null);let et,ut,Mt,Qt,Dt;for(let zt=0,ln=0;zt<ie.length;zt++)et=ie[zt],Object.prototype.hasOwnProperty.call(Ke,et)?ln++:(ii(H,{command:"removeLayer",args:[et]}),Qe.splice(Qe.indexOf(et,ln),1));for(let zt=0,ln=0;zt<Ae.length;zt++)et=Ae[Ae.length-1-zt],Qe[Qe.length-1-zt]!==et&&(Object.prototype.hasOwnProperty.call(ve,et)?(ii(H,{command:"removeLayer",args:[et]}),Qe.splice(Qe.lastIndexOf(et,Qe.length-ln),1)):ln++,Qt=Qe[Qe.length-zt],ii(H,{command:"addLayer",args:[Ke[et],Qt]}),Qe.splice(Qe.length-zt,0,et),Ve[et]=!0);for(let zt=0;zt<Ae.length;zt++)if(et=Ae[zt],ut=ve[et],Mt=Ke[et],!Ve[et]&&!Mn(ut,Mt))if(Mn(ut.source,Mt.source)&&Mn(ut["source-layer"],Mt["source-layer"])&&Mn(ut.type,Mt.type)){for(Dt in hi(ut.layout,Mt.layout,H,et,null,"setLayoutProperty"),hi(ut.paint,Mt.paint,H,et,null,"setPaintProperty"),Mn(ut.filter,Mt.filter)||ii(H,{command:"setFilter",args:[et,Mt.filter]}),Mn(ut.minzoom,Mt.minzoom)&&Mn(ut.maxzoom,Mt.maxzoom)||ii(H,{command:"setLayerZoomRange",args:[et,Mt.minzoom,Mt.maxzoom]}),ut)Object.prototype.hasOwnProperty.call(ut,Dt)&&Dt!=="layout"&&Dt!=="paint"&&Dt!=="filter"&&Dt!=="metadata"&&Dt!=="minzoom"&&Dt!=="maxzoom"&&(Dt.indexOf("paint.")===0?hi(ut[Dt],Mt[Dt],H,et,Dt.slice(6),"setPaintProperty"):Mn(ut[Dt],Mt[Dt])||ii(H,{command:"setLayerProperty",args:[et,Dt,Mt[Dt]]}));for(Dt in Mt)Object.prototype.hasOwnProperty.call(Mt,Dt)&&!Object.prototype.hasOwnProperty.call(ut,Dt)&&Dt!=="layout"&&Dt!=="paint"&&Dt!=="filter"&&Dt!=="metadata"&&Dt!=="minzoom"&&Dt!=="maxzoom"&&(Dt.indexOf("paint.")===0?hi(ut[Dt],Mt[Dt],H,et,Dt.slice(6),"setPaintProperty"):Mn(ut[Dt],Mt[Dt])||ii(H,{command:"setLayerProperty",args:[et,Dt,Mt[Dt]]}))}else ii(H,{command:"removeLayer",args:[et]}),Qt=Qe[Qe.lastIndexOf(et)+1],ii(H,{command:"addLayer",args:[Mt,Qt]})}(R,A.layers,c)}catch(y){console.warn("Unable to compute style diff:",y),c=[{command:"setStyle",args:[A]}]}return c},l.bM=function(h){const A=[],c=h.id;return c===void 0&&A.push({message:`layers.${c}: missing required property "id"`}),h.render===void 0&&A.push({message:`layers.${c}: missing required method "render"`}),h.renderingMode&&h.renderingMode!=="2d"&&h.renderingMode!=="3d"&&A.push({message:`layers.${c}: property "renderingMode" must be either "2d" or "3d"`}),A},l.bN=Re,l.bO=He,l.bP=class extends xl{constructor(h,A){super(h,A),this.current=0}set(h){this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))}},l.bQ=Xo,l.bR=class extends xl{constructor(h,A){super(h,A),this.current=hA}set(h){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(let A=1;A<16;A++)if(h[A]!==this.current[A]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}}},l.bS=bo,l.bT=class extends xl{constructor(h,A){super(h,A),this.current=[0,0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2]))}},l.bU=class extends xl{constructor(h,A){super(h,A),this.current=[0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1]))}},l.bV=ne,l.bW=function(h,A){var c=Math.sin(A),y=Math.cos(A);return h[0]=y,h[1]=c,h[2]=0,h[3]=-c,h[4]=y,h[5]=0,h[6]=0,h[7]=0,h[8]=1,h},l.bX=function(h,A,c){var y=A[0],M=A[1],R=A[2];return h[0]=y*c[0]+M*c[3]+R*c[6],h[1]=y*c[1]+M*c[4]+R*c[7],h[2]=y*c[2]+M*c[5]+R*c[8],h},l.bY=function(h,A,c,y,M,R,P){var G=1/(A-c),H=1/(y-M),ie=1/(R-P);return h[0]=-2*G,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*H,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*ie,h[11]=0,h[12]=(A+c)*G,h[13]=(M+y)*H,h[14]=(P+R)*ie,h[15]=1,h},l.bZ=class extends xl{constructor(h,A){super(h,A),this.current=new Array}set(h){if(h!=this.current){this.current=h;const A=new Float32Array(4*h.length);for(let c=0;c<h.length;c++)A[4*c]=h[c].r,A[4*c+1]=h[c].g,A[4*c+2]=h[c].b,A[4*c+3]=h[c].a;this.gl.uniform4fv(this.location,A)}}},l.b_=class extends xl{constructor(h,A){super(h,A),this.current=new Array}set(h){if(h!=this.current){this.current=h;const A=new Float32Array(h);this.gl.uniform1fv(this.location,A)}}},l.ba=function(){return new Float64Array(16)},l.bb=function(h,A,c){const y=new Float64Array(4);return ze(y,h,A-90,c),y},l.bc=function(h,A,c,y){var M,R,P,G,H,ie=A[0],Ae=A[1],ve=A[2],Ke=A[3],Qe=c[0],Ve=c[1],et=c[2],ut=c[3];return(R=ie*Qe+Ae*Ve+ve*et+Ke*ut)<0&&(R=-R,Qe=-Qe,Ve=-Ve,et=-et,ut=-ut),1-R>V?(M=Math.acos(R),P=Math.sin(M),G=Math.sin((1-y)*M)/P,H=Math.sin(y*M)/P):(G=1-y,H=y),h[0]=G*ie+H*Qe,h[1]=G*Ae+H*Ve,h[2]=G*ve+H*et,h[3]=G*Ke+H*ut,h},l.bd=function(h){const A=new Float64Array(9);var c,y,M,R,P,G,H,ie,Ae,ve,Ke,Qe,Ve,et,ut,Mt,Qt,Dt;ve=(M=(y=h)[0])*(H=M+M),Ke=(R=y[1])*H,Ve=(P=y[2])*H,et=P*(ie=R+R),Mt=(G=y[3])*H,Qt=G*ie,Dt=G*(Ae=P+P),(c=A)[0]=1-(Qe=R*ie)-(ut=P*Ae),c[3]=Ke-Dt,c[6]=Ve+Qt,c[1]=Ke+Dt,c[4]=1-ve-ut,c[7]=et-Mt,c[2]=Ve-Qt,c[5]=et+Mt,c[8]=1-ve-Qe;const zt=ei(-Math.asin(St(A[2],-1,1)));let ln,Cn;return Math.hypot(A[5],A[8])<.001?(ln=0,Cn=-ei(Math.atan2(A[3],A[4]))):(ln=ei(A[5]===0&&A[8]===0?0:Math.atan2(A[5],A[8])),Cn=ei(A[1]===0&&A[0]===0?0:Math.atan2(A[1],A[0]))),{roll:ln,pitch:zt+90,bearing:Cn}},l.be=function(h,A){return h.roll==A.roll&&h.pitch==A.pitch&&h.bearing==A.bearing},l.bf=br,l.bg=Pc,l.bh=$l,l.bi=fc,l.bj=Br,l.bk=tt,l.bl=lt,l.bm=ya,l.bn=function(h,A,c,y,M){return tt(y,M,St((h-A)/(c-A),0,1))},l.bo=Ne,l.bp=function(){return new Float64Array(3)},l.bq=function(h,A,c,y){return h[0]=A[0]+c[0]*y,h[1]=A[1]+c[1]*y,h[2]=A[2]+c[2]*y,h},l.br=ze,l.bs=function(h,A,c){var y=c[0],M=c[1],R=c[2],P=c[3],G=A[0],H=A[1],ie=A[2],Ae=M*ie-R*H,ve=R*G-y*ie,Ke=y*H-M*G;return h[0]=G+P*(Ae+=Ae)+M*(Ke+=Ke)-R*(ve+=ve),h[1]=H+P*ve+R*Ae-y*Ke,h[2]=ie+P*Ke+y*ve-M*Ae,h},l.bt=function(h,A,c){const y=(M=[h[0],h[1],h[2],A[0],A[1],A[2],c[0],c[1],c[2]])[0]*((Ae=M[8])*(P=M[4])-(G=M[5])*(ie=M[7]))+M[1]*(-Ae*(R=M[3])+G*(H=M[6]))+M[2]*(ie*R-P*H);var M,R,P,G,H,ie,Ae;if(y===0)return null;const ve=Me([],[A[0],A[1],A[2]],[c[0],c[1],c[2]]),Ke=Me([],[c[0],c[1],c[2]],[h[0],h[1],h[2]]),Qe=Me([],[h[0],h[1],h[2]],[A[0],A[1],A[2]]),Ve=ye([],ve,-h[3]);return ge(Ve,Ve,ye([],Ke,-A[3])),ge(Ve,Ve,ye([],Qe,-c[3])),ye(Ve,Ve,1/y),Ve},l.bu=m0,l.bv=function(){return new Float64Array(4)},l.bw=function(h,A,c,y){var M=[],R=[];return M[0]=A[0]-c[0],M[1]=A[1]-c[1],M[2]=A[2]-c[2],R[0]=M[0]*Math.cos(y)-M[1]*Math.sin(y),R[1]=M[0]*Math.sin(y)+M[1]*Math.cos(y),R[2]=M[2],h[0]=R[0]+c[0],h[1]=R[1]+c[1],h[2]=R[2]+c[2],h},l.bx=function(h,A,c,y){var M=[],R=[];return M[0]=A[0]-c[0],M[1]=A[1]-c[1],M[2]=A[2]-c[2],R[0]=M[0],R[1]=M[1]*Math.cos(y)-M[2]*Math.sin(y),R[2]=M[1]*Math.sin(y)+M[2]*Math.cos(y),h[0]=R[0]+c[0],h[1]=R[1]+c[1],h[2]=R[2]+c[2],h},l.by=function(h,A,c,y){var M=[],R=[];return M[0]=A[0]-c[0],M[1]=A[1]-c[1],M[2]=A[2]-c[2],R[0]=M[2]*Math.sin(y)+M[0]*Math.cos(y),R[1]=M[1],R[2]=M[2]*Math.cos(y)-M[0]*Math.sin(y),h[0]=R[0]+c[0],h[1]=R[1]+c[1],h[2]=R[2]+c[2],h},l.bz=function(h,A,c){var y=Math.sin(c),M=Math.cos(c),R=A[0],P=A[1],G=A[2],H=A[3],ie=A[8],Ae=A[9],ve=A[10],Ke=A[11];return A!==h&&(h[4]=A[4],h[5]=A[5],h[6]=A[6],h[7]=A[7],h[12]=A[12],h[13]=A[13],h[14]=A[14],h[15]=A[15]),h[0]=R*M-ie*y,h[1]=P*M-Ae*y,h[2]=G*M-ve*y,h[3]=H*M-Ke*y,h[8]=R*y+ie*M,h[9]=P*y+Ae*M,h[10]=G*y+ve*M,h[11]=H*y+Ke*M,h},l.c=re,l.c0=Eu,l.c1=class extends f{},l.c2=gp,l.c3=function(h){return h<=1?1:Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))},l.c4=ol,l.c5=function(h,A,c){var y=A[0],M=A[1],R=A[2],P=c[3]*y+c[7]*M+c[11]*R+c[15];return h[0]=(c[0]*y+c[4]*M+c[8]*R+c[12])/(P=P||1),h[1]=(c[1]*y+c[5]*M+c[9]*R+c[13])/P,h[2]=(c[2]*y+c[6]*M+c[10]*R+c[14])/P,h},l.c6=class extends $s{},l.c7=class extends he{},l.c8=function(h,A){return h[0]===A[0]&&h[1]===A[1]&&h[2]===A[2]&&h[3]===A[3]&&h[4]===A[4]&&h[5]===A[5]&&h[6]===A[6]&&h[7]===A[7]&&h[8]===A[8]&&h[9]===A[9]&&h[10]===A[10]&&h[11]===A[11]&&h[12]===A[12]&&h[13]===A[13]&&h[14]===A[14]&&h[15]===A[15]},l.c9=function(h,A){var c=h[0],y=h[1],M=h[2],R=h[3],P=h[4],G=h[5],H=h[6],ie=h[7],Ae=h[8],ve=h[9],Ke=h[10],Qe=h[11],Ve=h[12],et=h[13],ut=h[14],Mt=h[15],Qt=A[0],Dt=A[1],zt=A[2],ln=A[3],Cn=A[4],Un=A[5],mi=A[6],ai=A[7],di=A[8],tr=A[9],Ai=A[10],fi=A[11],En=A[12],fr=A[13],wr=A[14],sr=A[15];return Math.abs(c-Qt)<=V*Math.max(1,Math.abs(c),Math.abs(Qt))&&Math.abs(y-Dt)<=V*Math.max(1,Math.abs(y),Math.abs(Dt))&&Math.abs(M-zt)<=V*Math.max(1,Math.abs(M),Math.abs(zt))&&Math.abs(R-ln)<=V*Math.max(1,Math.abs(R),Math.abs(ln))&&Math.abs(P-Cn)<=V*Math.max(1,Math.abs(P),Math.abs(Cn))&&Math.abs(G-Un)<=V*Math.max(1,Math.abs(G),Math.abs(Un))&&Math.abs(H-mi)<=V*Math.max(1,Math.abs(H),Math.abs(mi))&&Math.abs(ie-ai)<=V*Math.max(1,Math.abs(ie),Math.abs(ai))&&Math.abs(Ae-di)<=V*Math.max(1,Math.abs(Ae),Math.abs(di))&&Math.abs(ve-tr)<=V*Math.max(1,Math.abs(ve),Math.abs(tr))&&Math.abs(Ke-Ai)<=V*Math.max(1,Math.abs(Ke),Math.abs(Ai))&&Math.abs(Qe-fi)<=V*Math.max(1,Math.abs(Qe),Math.abs(fi))&&Math.abs(Ve-En)<=V*Math.max(1,Math.abs(Ve),Math.abs(En))&&Math.abs(et-fr)<=V*Math.max(1,Math.abs(et),Math.abs(fr))&&Math.abs(ut-wr)<=V*Math.max(1,Math.abs(ut),Math.abs(wr))&&Math.abs(Mt-sr)<=V*Math.max(1,Math.abs(Mt),Math.abs(sr))},l.cA=function(h,A){le.REGISTERED_PROTOCOLS[h]=A},l.cB=function(h){delete le.REGISTERED_PROTOCOLS[h]},l.cC=function(h,A){const c={};for(let M=0;M<h.length;M++){const R=A&&A[h[M].id]||pu(h[M]);A&&(A[h[M].id]=R);let P=c[R];P||(P=c[R]=[]),P.push(h[M])}const y=[];for(const M in c)y.push(c[M]);return y},l.cD=ci,l.cE=vy,l.cF=y0,l.cG=cy,l.cH=function(h){h.bucket.createArrays(),h.bucket.tilePixelRatio=nt/(512*h.bucket.overscaling),h.bucket.compareText={},h.bucket.iconsNeedLinear=!1;const A=h.bucket.layers[0],c=A.layout,y=A._unevaluatedLayout._values,M={layoutIconSize:y["icon-size"].possiblyEvaluate(new Po(h.bucket.zoom+1),h.canonical),layoutTextSize:y["text-size"].possiblyEvaluate(new Po(h.bucket.zoom+1),h.canonical),textMaxSize:y["text-size"].possiblyEvaluate(new Po(18))};if(h.bucket.textSizeData.kind==="composite"){const{minZoom:ie,maxZoom:Ae}=h.bucket.textSizeData;M.compositeTextSizes=[y["text-size"].possiblyEvaluate(new Po(ie),h.canonical),y["text-size"].possiblyEvaluate(new Po(Ae),h.canonical)]}if(h.bucket.iconSizeData.kind==="composite"){const{minZoom:ie,maxZoom:Ae}=h.bucket.iconSizeData;M.compositeIconSizes=[y["icon-size"].possiblyEvaluate(new Po(ie),h.canonical),y["icon-size"].possiblyEvaluate(new Po(Ae),h.canonical)]}const R=c.get("text-line-height")*Xs,P=c.get("text-rotation-alignment")!=="viewport"&&c.get("symbol-placement")!=="point",G=c.get("text-keep-upright"),H=c.get("text-size");for(const ie of h.bucket.features){const Ae=c.get("text-font").evaluate(ie,{},h.canonical).join(","),ve=H.evaluate(ie,{},h.canonical),Ke=M.layoutTextSize.evaluate(ie,{},h.canonical),Qe=M.layoutIconSize.evaluate(ie,{},h.canonical),Ve={horizontal:{},vertical:void 0},et=ie.text;let ut,Mt=[0,0];if(et){const zt=et.toString(),ln=c.get("text-letter-spacing").evaluate(ie,{},h.canonical)*Xs,Cn=Eh(zt)?ln:0,Un=c.get("text-anchor").evaluate(ie,{},h.canonical),mi=Ad(A,ie,h.canonical);if(!mi){const Ai=c.get("text-radial-offset").evaluate(ie,{},h.canonical);Mt=Ai?Lc(Un,[Ai*Xs,Fm]):c.get("text-offset").evaluate(ie,{},h.canonical).map(fi=>fi*Xs)}let ai=P?"center":c.get("text-justify").evaluate(ie,{},h.canonical);const di=c.get("symbol-placement")==="point"?c.get("text-max-width").evaluate(ie,{},h.canonical)*Xs:1/0,tr=()=>{h.bucket.allowVerticalPlacement&&Gl(zt)&&(Ve.vertical=h0(et,h.glyphMap,h.glyphPositions,h.imagePositions,Ae,di,R,Un,"left",Cn,Mt,l.ao.vertical,!0,Ke,ve))};if(!P&&mi){const Ai=new Set;if(ai==="auto")for(let En=0;En<mi.values.length;En+=2)Ai.add(io(mi.values[En]));else Ai.add(ai);let fi=!1;for(const En of Ai)if(!Ve.horizontal[En])if(fi)Ve.horizontal[En]=Ve.horizontal[0];else{const fr=h0(et,h.glyphMap,h.glyphPositions,h.imagePositions,Ae,di,R,"center",En,Cn,Mt,l.ao.horizontal,!1,Ke,ve);fr&&(Ve.horizontal[En]=fr,fi=fr.positionedLines.length===1)}tr()}else{ai==="auto"&&(ai=io(Un));const Ai=h0(et,h.glyphMap,h.glyphPositions,h.imagePositions,Ae,di,R,Un,ai,Cn,Mt,l.ao.horizontal,!1,Ke,ve);Ai&&(Ve.horizontal[ai]=Ai),tr(),Gl(zt)&&P&&G&&(Ve.vertical=h0(et,h.glyphMap,h.glyphPositions,h.imagePositions,Ae,di,R,Un,ai,Cn,Mt,l.ao.vertical,!1,Ke,ve))}}let Qt=!1;if(ie.icon&&ie.icon.name){const zt=h.imageMap[ie.icon.name];zt&&(ut=rC(h.imagePositions[ie.icon.name],c.get("icon-offset").evaluate(ie,{},h.canonical),c.get("icon-anchor").evaluate(ie,{},h.canonical)),Qt=!!zt.sdf,h.bucket.sdfIcons===void 0?h.bucket.sdfIcons=Qt:h.bucket.sdfIcons!==Qt&&Ot("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(zt.pixelRatio!==h.bucket.pixelRatio||c.get("icon-rotate").constantOr(1)!==0)&&(h.bucket.iconsNeedLinear=!0))}const Dt=lg(Ve.horizontal)||Ve.vertical;h.bucket.iconsInText=!!Dt&&Dt.iconsInText,(Dt||ut)&&Ld(h.bucket,ie,Ve,ut,h.imageMap,M,Ke,Qe,Mt,Qt,h.canonical,h.subdivisionGranularity)}h.showCollisionBoxes&&h.bucket.generateCollisionDebugBuffers()},l.cI=Pd,l.cJ=al,l.cK=_p,l.cL=j1,l.cM=Jf,l.cN=class{constructor(h){this._marks={start:[h.url,"start"].join("#"),end:[h.url,"end"].join("#"),measure:h.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let h=performance.getEntriesByName(this._marks.measure);return h.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),h=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),h}},l.cO=function(h,A,c,y,M){return o(this,void 0,void 0,function*(){if(ee())try{return yield $n(h,A,c,y,M)}catch{}return function(R,P,G,H,ie){const Ae=R.width,ve=R.height;On&&Bn||(On=new OffscreenCanvas(Ae,ve),Bn=On.getContext("2d",{willReadFrequently:!0})),On.width=Ae,On.height=ve,Bn.drawImage(R,0,0,Ae,ve);const Ke=Bn.getImageData(P,G,H,ie);return Bn.clearRect(0,0,Ae,ve),Ke.data}(h,A,c,y,M)})},l.cP=B,l.cQ=C,l.cR=wu,l.cS=Im,l.cT=Uu,l.cU=function(h,A){const c=new Map;if(h!=null)if(h.type==="Feature")c.set(Pm(h,A),h);else for(const y of h.features)c.set(Pm(y,A),y);return c},l.cV=function(h,A){if(h==null)return!0;if(h.type==="Feature")return Pm(h,A)!=null;if(h.type==="FeatureCollection"){const c=new Set;for(const y of h.features){const M=Pm(y,A);if(M==null||c.has(M))return!1;c.add(M)}return!0}return!1},l.cW=function(h,A,c){var y,M,R,P;if(A.removeAll&&h.clear(),A.remove)for(const G of A.remove)h.delete(G);if(A.add)for(const G of A.add){const H=Pm(G,c);H!=null&&h.set(H,G)}if(A.update)for(const G of A.update){let H=h.get(G.id);if(H==null)continue;const ie=!G.removeAllProperties&&(((y=G.removeProperties)===null||y===void 0?void 0:y.length)>0||((M=G.addOrUpdateProperties)===null||M===void 0?void 0:M.length)>0);if((G.newGeometry||G.removeAllProperties||ie)&&(H=Object.assign({},H),h.set(G.id,H),ie&&(H.properties=Object.assign({},H.properties))),G.newGeometry&&(H.geometry=G.newGeometry),G.removeAllProperties)H.properties={};else if(((R=G.removeProperties)===null||R===void 0?void 0:R.length)>0)for(const Ae of G.removeProperties)Object.prototype.hasOwnProperty.call(H.properties,Ae)&&delete H.properties[Ae];if(((P=G.addOrUpdateProperties)===null||P===void 0?void 0:P.length)>0)for(const{key:Ae,value:ve}of G.addOrUpdateProperties)H.properties[Ae]=ve}},l.cX=jl,l.ca=function(h,A){return h[0]=A[0],h[1]=A[1],h[2]=A[2],h[3]=A[3],h[4]=A[4],h[5]=A[5],h[6]=A[6],h[7]=A[7],h[8]=A[8],h[9]=A[9],h[10]=A[10],h[11]=A[11],h[12]=A[12],h[13]=A[13],h[14]=A[14],h[15]=A[15],h},l.cb=h=>h.type==="symbol",l.cc=h=>h.type==="circle",l.cd=h=>h.type==="heatmap",l.ce=h=>h.type==="line",l.cf=h=>h.type==="fill",l.cg=h=>h.type==="fill-extrusion",l.ch=h=>h.type==="hillshade",l.ci=h=>h.type==="color-relief",l.cj=h=>h.type==="raster",l.ck=h=>h.type==="background",l.cl=h=>h.type==="custom",l.cm=It,l.cn=function(h,A,c){const y=yt(A.x-c.x,A.y-c.y),M=yt(h.x-c.x,h.y-c.y);var R,P;return ei(Math.atan2(y[0]*M[1]-y[1]*M[0],(R=y)[0]*(P=M)[0]+R[1]*P[1]))},l.co=pt,l.cp=function(h,A){return Ge[A]&&(h instanceof MouseEvent||h instanceof WheelEvent)},l.cq=function(h,A){return Kn[A]&&"touches"in h},l.cr=function(h){return Kn[h]||Ge[h]},l.cs=function(h,A,c){var y=A[0],M=A[1];return h[0]=c[0]*y+c[4]*M+c[12],h[1]=c[1]*y+c[5]*M+c[13],h},l.ct=function(h,A){const{x:c,y}=g0.fromLngLat(A);return!(h<0||h>25||y<0||y>=1||c<0||c>=1)},l.cu=function(h,A){return h[0]=A[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=A[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=A[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h},l.cv=class extends kc{},l.cw=Pp,l.cy=function(h){return h.message===de},l.cz=We,l.d=De,l.e=Le,l.f=h=>o(void 0,void 0,void 0,function*(){if(h.byteLength===0)return createImageBitmap(new ImageData(1,1));const A=new Blob([new Uint8Array(h)],{type:"image/png"});try{return createImageBitmap(A)}catch(c){throw new Error(`Could not load image because of ${c.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),l.g=me,l.h=h=>new Promise((A,c)=>{const y=new Image;y.onload=()=>{A(y),URL.revokeObjectURL(y.src),y.onload=null,window.requestAnimationFrame(()=>{y.src=Wt})},y.onerror=()=>c(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const M=new Blob([new Uint8Array(h)],{type:"image/png"});y.src=h.byteLength?URL.createObjectURL(M):Wt}),l.i=Kt,l.j=(h,A)=>Ye(Le(h,{type:"json"}),A),l.k=ht,l.l=gt,l.m=Ye,l.n=(h,A)=>Ye(Le(h,{type:"arrayBuffer"}),A),l.o=function(h){return new Jf(h).readFields(ly,[])},l.p=$0,l.q=Hu,l.r=sa,l.s=In,l.t=Lf,l.u=to,l.v=it,l.w=Ot,l.x=tf,l.y=$h,l.z=Id}),r("worker",["./shared"],function(l){class o{constructor(le){this.keyCache={},le&&this.replace(le)}replace(le){this._layerConfigs={},this._layers={},this.update(le,[])}update(le,me){for(const We of le){this._layerConfigs[We.id]=We;const dt=this._layers[We.id]=l.bJ(We);dt._featureFilter=l.aa(dt.filter),this.keyCache[We.id]&&delete this.keyCache[We.id]}for(const We of me)delete this.keyCache[We],delete this._layerConfigs[We],delete this._layers[We];this.familiesBySource={};const Te=l.cC(Object.values(this._layerConfigs),this.keyCache);for(const We of Te){const dt=We.map(ht=>this._layers[ht.id]),Ye=dt[0];if(Ye.visibility==="none")continue;const De=Ye.source||"";let Ze=this.familiesBySource[De];Ze||(Ze=this.familiesBySource[De]={});const g=Ye.sourceLayer||"_geojsonTileLayer";let gt=Ze[g];gt||(gt=Ze[g]=[]),gt.push(dt)}}}class m{constructor(le){const me={},Te=[];for(const De in le){const Ze=le[De],g=me[De]={};for(const gt in Ze){const ht=Ze[+gt];if(!ht||ht.bitmap.width===0||ht.bitmap.height===0)continue;const kt={x:0,y:0,w:ht.bitmap.width+2,h:ht.bitmap.height+2};Te.push(kt),g[gt]={rect:kt,metrics:ht.metrics}}}const{w:We,h:dt}=l.p(Te),Ye=new l.q({width:We||1,height:dt||1});for(const De in le){const Ze=le[De];for(const g in Ze){const gt=Ze[+g];if(!gt||gt.bitmap.width===0||gt.bitmap.height===0)continue;const ht=me[De][g].rect;l.q.copy(gt.bitmap,Ye,{x:0,y:0},{x:ht.x+1,y:ht.y+1},gt.bitmap)}}this.image=Ye,this.positions=me}}l.cD("GlyphAtlas",m);class C{constructor(le){this.tileID=new l.Z(le.tileID.overscaledZ,le.tileID.wrap,le.tileID.canonical.z,le.tileID.canonical.x,le.tileID.canonical.y),this.uid=le.uid,this.zoom=le.zoom,this.pixelRatio=le.pixelRatio,this.tileSize=le.tileSize,this.source=le.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=le.showCollisionBoxes,this.collectResourceTiming=!!le.collectResourceTiming,this.returnDependencies=!!le.returnDependencies,this.promoteId=le.promoteId,this.inFlightDependencies=[],this.globalState=le.globalState}parse(le,me,Te,We,dt){return l._(this,void 0,void 0,function*(){this.status="parsing",this.data=le,this.collisionBoxArray=new l.a8;const Ye=new l.cE(Object.keys(le.layers).sort()),De=new l.cF(this.tileID,this.promoteId);De.bucketLayerIDs=[];const Ze={},g={featureIndex:De,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Te,subdivisionGranularity:dt},gt=me.familiesBySource[this.source];for(const hi in gt){const ti=le.layers[hi];if(!ti)continue;ti.version===1&&l.w(`Vector tile source "${this.source}" layer "${hi}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Wi=Ye.encode(hi),Sn=[];for(let lo=0;lo<ti.length;lo++){const Hi=ti.feature(lo),pa=De.getId(Hi,hi);Sn.push({feature:Hi,id:pa,index:lo,sourceLayerIndex:Wi})}for(const lo of gt[hi]){const Hi=lo[0];Hi.source!==this.source&&l.w(`layer.source = ${Hi.source} does not equal this.source = ${this.source}`),Hi.minzoom&&this.zoom<Math.floor(Hi.minzoom)||Hi.maxzoom&&this.zoom>=Hi.maxzoom||Hi.visibility!=="none"&&(S(lo,this.zoom,Te,this.globalState),(Ze[Hi.id]=Hi.createBucket({index:De.bucketLayerIDs.length,layers:lo,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Wi,sourceID:this.source,globalState:this.globalState})).populate(Sn,g,this.tileID.canonical),De.bucketLayerIDs.push(lo.map(pa=>pa.id)))}}const ht=l.bN(g.glyphDependencies,hi=>Object.keys(hi).map(Number));this.inFlightDependencies.forEach(hi=>hi?.abort()),this.inFlightDependencies=[];let kt=Promise.resolve({});if(Object.keys(ht).length){const hi=new AbortController;this.inFlightDependencies.push(hi),kt=We.sendAsync({type:"GG",data:{stacks:ht,source:this.source,tileID:this.tileID,type:"glyphs"}},hi)}const it=Object.keys(g.iconDependencies);let en=Promise.resolve({});if(it.length){const hi=new AbortController;this.inFlightDependencies.push(hi),en=We.sendAsync({type:"GI",data:{icons:it,source:this.source,tileID:this.tileID,type:"icons"}},hi)}const Dn=Object.keys(g.patternDependencies);let Mn=Promise.resolve({});if(Dn.length){const hi=new AbortController;this.inFlightDependencies.push(hi),Mn=We.sendAsync({type:"GI",data:{icons:Dn,source:this.source,tileID:this.tileID,type:"patterns"}},hi)}const[ii,Wn,qi]=yield Promise.all([kt,en,Mn]),er=new m(ii),wi=new l.cG(Wn,qi);for(const hi in Ze){const ti=Ze[hi];ti instanceof l.a9?(S(ti.layers,this.zoom,Te,this.globalState),l.cH({bucket:ti,glyphMap:ii,glyphPositions:er.positions,imageMap:Wn,imagePositions:wi.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:g.subdivisionGranularity})):ti.hasPattern&&(ti instanceof l.cI||ti instanceof l.cJ||ti instanceof l.cK)&&(S(ti.layers,this.zoom,Te,this.globalState),ti.addFeatures(g,this.tileID.canonical,wi.patternPositions))}return this.status="done",{buckets:Object.values(Ze).filter(hi=>!hi.isEmpty()),featureIndex:De,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:er.image,imageAtlas:wi,glyphMap:this.returnDependencies?ii:null,iconMap:this.returnDependencies?Wn:null,glyphPositions:this.returnDependencies?er.positions:null}})}}function S(re,le,me,Te){const We=new l.F(le);for(const dt of re)dt.setGlobalState(Te),dt.recalculate(We,me)}class O{constructor(le,me,Te){this.actor=le,this.layerIndex=me,this.availableImages=Te,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(le,me){return l._(this,void 0,void 0,function*(){const Te=yield l.n(le.request,me);try{return{vectorTile:new l.cL(new l.cM(Te.data)),rawData:Te.data,cacheControl:Te.cacheControl,expires:Te.expires}}catch(We){const dt=new Uint8Array(Te.data);let Ye=`Unable to parse the tile at ${le.request.url}, `;throw Ye+=dt[0]===31&&dt[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${We.message}`,new Error(Ye)}})}loadTile(le){return l._(this,void 0,void 0,function*(){const me=le.uid,Te=!!(le&&le.request&&le.request.collectResourceTiming)&&new l.cN(le.request),We=new C(le);this.loading[me]=We;const dt=new AbortController;We.abort=dt;try{const Ye=yield this.loadVectorTile(le,dt);if(delete this.loading[me],!Ye)return null;const De=Ye.rawData,Ze={};Ye.expires&&(Ze.expires=Ye.expires),Ye.cacheControl&&(Ze.cacheControl=Ye.cacheControl);const g={};if(Te){const ht=Te.finish();ht&&(g.resourceTiming=JSON.parse(JSON.stringify(ht)))}We.vectorTile=Ye.vectorTile;const gt=We.parse(Ye.vectorTile,this.layerIndex,this.availableImages,this.actor,le.subdivisionGranularity);this.loaded[me]=We,this.fetching[me]={rawTileData:De,cacheControl:Ze,resourceTiming:g};try{const ht=yield gt;return l.e({rawTileData:De.slice(0)},ht,Ze,g)}finally{delete this.fetching[me]}}catch(Ye){throw delete this.loading[me],We.status="done",this.loaded[me]=We,Ye}})}reloadTile(le){return l._(this,void 0,void 0,function*(){const me=le.uid;if(!this.loaded||!this.loaded[me])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Te=this.loaded[me];if(Te.showCollisionBoxes=le.showCollisionBoxes,Te.globalState=le.globalState,Te.status==="parsing"){const We=yield Te.parse(Te.vectorTile,this.layerIndex,this.availableImages,this.actor,le.subdivisionGranularity);let dt;if(this.fetching[me]){const{rawTileData:Ye,cacheControl:De,resourceTiming:Ze}=this.fetching[me];delete this.fetching[me],dt=l.e({rawTileData:Ye.slice(0)},We,De,Ze)}else dt=We;return dt}if(Te.status==="done"&&Te.vectorTile)return Te.parse(Te.vectorTile,this.layerIndex,this.availableImages,this.actor,le.subdivisionGranularity)})}abortTile(le){return l._(this,void 0,void 0,function*(){const me=this.loading,Te=le.uid;me&&me[Te]&&me[Te].abort&&(me[Te].abort.abort(),delete me[Te])})}removeTile(le){return l._(this,void 0,void 0,function*(){this.loaded&&this.loaded[le.uid]&&delete this.loaded[le.uid]})}}class U{constructor(){this.loaded={}}loadTile(le){return l._(this,void 0,void 0,function*(){const{uid:me,encoding:Te,rawImageData:We,redFactor:dt,greenFactor:Ye,blueFactor:De,baseShift:Ze}=le,g=We.width+2,gt=We.height+2,ht=l.b(We)?new l.R({width:g,height:gt},yield l.cO(We,-1,-1,g,gt)):We,kt=new l.cP(me,ht,Te,dt,Ye,De,Ze);return this.loaded=this.loaded||{},this.loaded[me]=kt,kt})}removeTile(le){const me=this.loaded,Te=le.uid;me&&me[Te]&&delete me[Te]}}var K,z,j=function(){if(z)return K;function re(me,Te){if(me.length!==0){le(me[0],Te);for(var We=1;We<me.length;We++)le(me[We],!Te)}}function le(me,Te){for(var We=0,dt=0,Ye=0,De=me.length,Ze=De-1;Ye<De;Ze=Ye++){var g=(me[Ye][0]-me[Ze][0])*(me[Ze][1]+me[Ye][1]),gt=We+g;dt+=Math.abs(We)>=Math.abs(g)?We-gt+g:g-gt+We,We=gt}We+dt>=0!=!!Te&&me.reverse()}return z=1,K=function me(Te,We){var dt,Ye=Te&&Te.type;if(Ye==="FeatureCollection")for(dt=0;dt<Te.features.length;dt++)me(Te.features[dt],We);else if(Ye==="GeometryCollection")for(dt=0;dt<Te.geometries.length;dt++)me(Te.geometries[dt],We);else if(Ye==="Feature")me(Te.geometry,We);else if(Ye==="Polygon")re(Te.coordinates,We);else if(Ye==="MultiPolygon")for(dt=0;dt<Te.coordinates.length;dt++)re(Te.coordinates[dt],We);return Te}}(),Q=l.cQ(j);class ee extends l.cS{constructor(le,me){super(new l.cM,0,me,[],[]),this.feature=le,this.type=le.type,this.properties=le.tags?le.tags:{},"id"in le&&(typeof le.id=="string"?this.id=parseInt(le.id,10):typeof le.id!="number"||isNaN(le.id)||(this.id=le.id))}loadGeometry(){const le=[],me=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const Te of me){const We=[];for(const dt of Te)We.push(new l.P(dt[0],dt[1]));le.push(We)}return le}}class V extends l.cR{constructor(le,me){super(new l.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=me?me.version:1,this.extent=me?me.extent:4096,this.length=le.length,this.features=le}feature(le){return new ee(this.features[le],this.extent)}}function ae(re,le){le.writeVarintField(15,re.version||1),le.writeStringField(1,re.name||""),le.writeVarintField(5,re.extent||4096);const me={keys:[],values:[],keycache:{},valuecache:{}};for(let dt=0;dt<re.length;dt++)me.feature=re.feature(dt),le.writeMessage(2,ne,me);const Te=me.keys;for(const dt of Te)le.writeStringField(3,dt);const We=me.values;for(const dt of We)le.writeMessage(4,ge,dt)}function ne(re,le){if(!re.feature)return;const me=re.feature;me.id!==void 0&&le.writeVarintField(1,me.id),le.writeMessage(2,Z,re),le.writeVarintField(3,me.type),le.writeMessage(4,ue,me)}function Z(re,le){for(const me in re.feature?.properties){let Te=re.feature.properties[me],We=re.keycache[me];if(Te===null)continue;We===void 0&&(re.keys.push(me),We=re.keys.length-1,re.keycache[me]=We),le.writeVarint(We),typeof Te!="string"&&typeof Te!="boolean"&&typeof Te!="number"&&(Te=JSON.stringify(Te));const dt=typeof Te+":"+Te;let Ye=re.valuecache[dt];Ye===void 0&&(re.values.push(Te),Ye=re.values.length-1,re.valuecache[dt]=Ye),le.writeVarint(Ye)}}function oe(re,le){return(le<<3)+(7&re)}function W(re){return re<<1^re>>31}function ue(re,le){const me=re.loadGeometry(),Te=re.type;let We=0,dt=0;for(const Ye of me){let De=1;Te===1&&(De=Ye.length),le.writeVarint(oe(1,De));const Ze=Te===3?Ye.length-1:Ye.length;for(let g=0;g<Ze;g++){g===1&&Te!==1&&le.writeVarint(oe(2,Ze-1));const gt=Ye[g].x-We,ht=Ye[g].y-dt;le.writeVarint(W(gt)),le.writeVarint(W(ht)),We+=gt,dt+=ht}re.type===3&&le.writeVarint(oe(7,1))}}function ge(re,le){const me=typeof re;me==="string"?le.writeStringField(1,re):me==="boolean"?le.writeBooleanField(7,re):me==="number"&&(re%1!=0?le.writeDoubleField(3,re):re<0?le.writeSVarintField(6,re):le.writeVarintField(5,re))}const ye={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:re=>re},Me=Math.fround||(Be=new Float32Array(1),re=>(Be[0]=+re,Be[0]));var Be;class we{constructor(le){this.options=Object.assign(Object.create(ye),le),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(le){const{log:me,minZoom:Te,maxZoom:We}=this.options;me&&console.time("total time");const dt=`prepare ${le.length} points`;me&&console.time(dt),this.points=le;const Ye=[];for(let Ze=0;Ze<le.length;Ze++){const g=le[Ze];if(!g.geometry)continue;const[gt,ht]=g.geometry.coordinates,kt=Me(ze(gt)),it=Me(ot(ht));Ye.push(kt,it,1/0,Ze,-1,1),this.options.reduce&&Ye.push(0)}let De=this.trees[We+1]=this._createTree(Ye);me&&console.timeEnd(dt);for(let Ze=We;Ze>=Te;Ze--){const g=+Date.now();De=this.trees[Ze]=this._createTree(this._cluster(De,Ze)),me&&console.log("z%d: %d clusters in %dms",Ze,De.numItems,+Date.now()-g)}return me&&console.timeEnd("total time"),this}getClusters(le,me){let Te=((le[0]+180)%360+360)%360-180;const We=Math.max(-90,Math.min(90,le[1]));let dt=le[2]===180?180:((le[2]+180)%360+360)%360-180;const Ye=Math.max(-90,Math.min(90,le[3]));if(le[2]-le[0]>=360)Te=-180,dt=180;else if(Te>dt){const ht=this.getClusters([Te,We,180,Ye],me),kt=this.getClusters([-180,We,dt,Ye],me);return ht.concat(kt)}const De=this.trees[this._limitZoom(me)],Ze=De.range(ze(Te),ot(Ye),ze(dt),ot(We)),g=De.data,gt=[];for(const ht of Ze){const kt=this.stride*ht;gt.push(g[kt+5]>1?qe(g,kt,this.clusterProps):this.points[g[kt+3]])}return gt}getChildren(le){const me=this._getOriginId(le),Te=this._getOriginZoom(le),We="No cluster with the specified id.",dt=this.trees[Te];if(!dt)throw new Error(We);const Ye=dt.data;if(me*this.stride>=Ye.length)throw new Error(We);const De=this.options.radius/(this.options.extent*Math.pow(2,Te-1)),Ze=dt.within(Ye[me*this.stride],Ye[me*this.stride+1],De),g=[];for(const gt of Ze){const ht=gt*this.stride;Ye[ht+4]===le&&g.push(Ye[ht+5]>1?qe(Ye,ht,this.clusterProps):this.points[Ye[ht+3]])}if(g.length===0)throw new Error(We);return g}getLeaves(le,me,Te){const We=[];return this._appendLeaves(We,le,me=me||10,Te=Te||0,0),We}getTile(le,me,Te){const We=this.trees[this._limitZoom(le)],dt=Math.pow(2,le),{extent:Ye,radius:De}=this.options,Ze=De/Ye,g=(Te-Ze)/dt,gt=(Te+1+Ze)/dt,ht={features:[]};return this._addTileFeatures(We.range((me-Ze)/dt,g,(me+1+Ze)/dt,gt),We.data,me,Te,dt,ht),me===0&&this._addTileFeatures(We.range(1-Ze/dt,g,1,gt),We.data,dt,Te,dt,ht),me===dt-1&&this._addTileFeatures(We.range(0,g,Ze/dt,gt),We.data,-1,Te,dt,ht),ht.features.length?ht:null}getClusterExpansionZoom(le){let me=this._getOriginZoom(le)-1;for(;me<=this.options.maxZoom;){const Te=this.getChildren(le);if(me++,Te.length!==1)break;le=Te[0].properties.cluster_id}return me}_appendLeaves(le,me,Te,We,dt){const Ye=this.getChildren(me);for(const De of Ye){const Ze=De.properties;if(Ze&&Ze.cluster?dt+Ze.point_count<=We?dt+=Ze.point_count:dt=this._appendLeaves(le,Ze.cluster_id,Te,We,dt):dt<We?dt++:le.push(De),le.length===Te)break}return dt}_createTree(le){const me=new l.aI(le.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Te=0;Te<le.length;Te+=this.stride)me.add(le[Te],le[Te+1]);return me.finish(),me.data=le,me}_addTileFeatures(le,me,Te,We,dt,Ye){for(const De of le){const Ze=De*this.stride,g=me[Ze+5]>1;let gt,ht,kt;if(g)gt=xe(me,Ze,this.clusterProps),ht=me[Ze],kt=me[Ze+1];else{const Dn=this.points[me[Ze+3]];gt=Dn.properties;const[Mn,ii]=Dn.geometry.coordinates;ht=ze(Mn),kt=ot(ii)}const it={type:1,geometry:[[Math.round(this.options.extent*(ht*dt-Te)),Math.round(this.options.extent*(kt*dt-We))]],tags:gt};let en;en=g||this.options.generateId?me[Ze+3]:this.points[me[Ze+3]].id,en!==void 0&&(it.id=en),Ye.features.push(it)}}_limitZoom(le){return Math.max(this.options.minZoom,Math.min(Math.floor(+le),this.options.maxZoom+1))}_cluster(le,me){const{radius:Te,extent:We,reduce:dt,minPoints:Ye}=this.options,De=Te/(We*Math.pow(2,me)),Ze=le.data,g=[],gt=this.stride;for(let ht=0;ht<Ze.length;ht+=gt){if(Ze[ht+2]<=me)continue;Ze[ht+2]=me;const kt=Ze[ht],it=Ze[ht+1],en=le.within(Ze[ht],Ze[ht+1],De),Dn=Ze[ht+5];let Mn=Dn;for(const ii of en){const Wn=ii*gt;Ze[Wn+2]>me&&(Mn+=Ze[Wn+5])}if(Mn>Dn&&Mn>=Ye){let ii,Wn=kt*Dn,qi=it*Dn,er=-1;const wi=(ht/gt<<5)+(me+1)+this.points.length;for(const hi of en){const ti=hi*gt;if(Ze[ti+2]<=me)continue;Ze[ti+2]=me;const Wi=Ze[ti+5];Wn+=Ze[ti]*Wi,qi+=Ze[ti+1]*Wi,Ze[ti+4]=wi,dt&&(ii||(ii=this._map(Ze,ht,!0),er=this.clusterProps.length,this.clusterProps.push(ii)),dt(ii,this._map(Ze,ti)))}Ze[ht+4]=wi,g.push(Wn/Mn,qi/Mn,1/0,wi,-1,Mn),dt&&g.push(er)}else{for(let ii=0;ii<gt;ii++)g.push(Ze[ht+ii]);if(Mn>1)for(const ii of en){const Wn=ii*gt;if(!(Ze[Wn+2]<=me)){Ze[Wn+2]=me;for(let qi=0;qi<gt;qi++)g.push(Ze[Wn+qi])}}}}return g}_getOriginId(le){return le-this.points.length>>5}_getOriginZoom(le){return(le-this.points.length)%32}_map(le,me,Te){if(le[me+5]>1){const Ye=this.clusterProps[le[me+6]];return Te?Object.assign({},Ye):Ye}const We=this.points[le[me+3]].properties,dt=this.options.map(We);return Te&&dt===We?Object.assign({},dt):dt}}function qe(re,le,me){return{type:"Feature",id:re[le+3],properties:xe(re,le,me),geometry:{type:"Point",coordinates:[(Te=re[le],360*(Te-.5)),yt(re[le+1])]}};var Te}function xe(re,le,me){const Te=re[le+5],We=Te>=1e4?`${Math.round(Te/1e3)}k`:Te>=1e3?Math.round(Te/100)/10+"k":Te,dt=re[le+6],Ye=dt===-1?{}:Object.assign({},me[dt]);return Object.assign(Ye,{cluster:!0,cluster_id:re[le+3],point_count:Te,point_count_abbreviated:We})}function ze(re){return re/360+.5}function ot(re){const le=Math.sin(re*Math.PI/180),me=.5-.25*Math.log((1+le)/(1-le))/Math.PI;return me<0?0:me>1?1:me}function yt(re){const le=(180-360*re)*Math.PI/180;return 360*Math.atan(Math.exp(le))/Math.PI-90}function nt(re,le,me,Te){let We=Te;const dt=le+(me-le>>1);let Ye,De=me-le;const Ze=re[le],g=re[le+1],gt=re[me],ht=re[me+1];for(let kt=le+3;kt<me;kt+=3){const it=be(re[kt],re[kt+1],Ze,g,gt,ht);if(it>We)Ye=kt,We=it;else if(it===We){const en=Math.abs(kt-dt);en<De&&(Ye=kt,De=en)}}We>Te&&(Ye-le>3&&nt(re,le,Ye,Te),re[Ye+2]=We,me-Ye>3&&nt(re,Ye,me,Te))}function be(re,le,me,Te,We,dt){let Ye=We-me,De=dt-Te;if(Ye!==0||De!==0){const Ze=((re-me)*Ye+(le-Te)*De)/(Ye*Ye+De*De);Ze>1?(me=We,Te=dt):Ze>0&&(me+=Ye*Ze,Te+=De*Ze)}return Ye=re-me,De=le-Te,Ye*Ye+De*De}function Ne(re,le,me,Te){const We={id:re??null,type:le,geometry:me,tags:Te,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(le==="Point"||le==="MultiPoint"||le==="LineString")tt(We,me);else if(le==="Polygon")tt(We,me[0]);else if(le==="MultiLineString")for(const dt of me)tt(We,dt);else if(le==="MultiPolygon")for(const dt of me)tt(We,dt[0]);return We}function tt(re,le){for(let me=0;me<le.length;me+=3)re.minX=Math.min(re.minX,le[me]),re.minY=Math.min(re.minY,le[me+1]),re.maxX=Math.max(re.maxX,le[me]),re.maxY=Math.max(re.maxY,le[me+1])}function lt(re,le,me,Te){if(!le.geometry)return;const We=le.geometry.coordinates;if(We&&We.length===0)return;const dt=le.geometry.type,Ye=Math.pow(me.tolerance/((1<<me.maxZoom)*me.extent),2);let De=[],Ze=le.id;if(me.promoteId?Ze=le.properties[me.promoteId]:me.generateId&&(Ze=Te||0),dt==="Point")It(We,De);else if(dt==="MultiPoint")for(const g of We)It(g,De);else if(dt==="LineString")pt(We,De,Ye,!1);else if(dt==="MultiLineString"){if(me.lineMetrics){for(const g of We)De=[],pt(g,De,Ye,!1),re.push(Ne(Ze,"LineString",De,le.properties));return}St(We,De,Ye,!1)}else if(dt==="Polygon")St(We,De,Ye,!0);else{if(dt!=="MultiPolygon"){if(dt==="GeometryCollection"){for(const g of le.geometry.geometries)lt(re,{id:Ze,geometry:g,properties:le.properties},me,Te);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const g of We){const gt=[];St(g,gt,Ye,!0),De.push(gt)}}re.push(Ne(Ze,dt,De,le.properties))}function It(re,le){le.push(Rt(re[0]),Le(re[1]),0)}function pt(re,le,me,Te){let We,dt,Ye=0;for(let Ze=0;Ze<re.length;Ze++){const g=Rt(re[Ze][0]),gt=Le(re[Ze][1]);le.push(g,gt,0),Ze>0&&(Ye+=Te?(We*gt-g*dt)/2:Math.sqrt(Math.pow(g-We,2)+Math.pow(gt-dt,2))),We=g,dt=gt}const De=le.length-3;le[2]=1,nt(le,0,De,me),le[De+2]=1,le.size=Math.abs(Ye),le.start=0,le.end=le.size}function St(re,le,me,Te){for(let We=0;We<re.length;We++){const dt=[];pt(re[We],dt,me,Te),le.push(dt)}}function Rt(re){return re/360+.5}function Le(re){const le=Math.sin(re*Math.PI/180),me=.5-.25*Math.log((1+le)/(1-le))/Math.PI;return me<0?0:me>1?1:me}function Pe(re,le,me,Te,We,dt,Ye,De){if(Te/=le,dt>=(me/=le)&&Ye<Te)return re;if(Ye<me||dt>=Te)return null;const Ze=[];for(const g of re){const gt=g.geometry;let ht=g.type;const kt=We===0?g.minX:g.minY,it=We===0?g.maxX:g.maxY;if(kt>=me&&it<Te){Ze.push(g);continue}if(it<me||kt>=Te)continue;let en=[];if(ht==="Point"||ht==="MultiPoint")Re(gt,en,me,Te,We);else if(ht==="LineString")He(gt,en,me,Te,We,!1,De.lineMetrics);else if(ht==="MultiLineString")vt(gt,en,me,Te,We,!1);else if(ht==="Polygon")vt(gt,en,me,Te,We,!0);else if(ht==="MultiPolygon")for(const Dn of gt){const Mn=[];vt(Dn,Mn,me,Te,We,!0),Mn.length&&en.push(Mn)}if(en.length){if(De.lineMetrics&&ht==="LineString"){for(const Dn of en)Ze.push(Ne(g.id,ht,Dn,g.tags));continue}ht!=="LineString"&&ht!=="MultiLineString"||(en.length===1?(ht="LineString",en=en[0]):ht="MultiLineString"),ht!=="Point"&&ht!=="MultiPoint"||(ht=en.length===3?"Point":"MultiPoint"),Ze.push(Ne(g.id,ht,en,g.tags))}}return Ze.length?Ze:null}function Re(re,le,me,Te,We){for(let dt=0;dt<re.length;dt+=3){const Ye=re[dt+We];Ye>=me&&Ye<=Te&&Ot(le,re[dt],re[dt+1],re[dt+2])}}function He(re,le,me,Te,We,dt,Ye){let De=bt(re);const Ze=We===0?qt:Kt;let g,gt,ht=re.start;for(let Mn=0;Mn<re.length-3;Mn+=3){const ii=re[Mn],Wn=re[Mn+1],qi=re[Mn+2],er=re[Mn+3],wi=re[Mn+4],hi=We===0?ii:Wn,ti=We===0?er:wi;let Wi=!1;Ye&&(g=Math.sqrt(Math.pow(ii-er,2)+Math.pow(Wn-wi,2))),hi<me?ti>me&&(gt=Ze(De,ii,Wn,er,wi,me),Ye&&(De.start=ht+g*gt)):hi>Te?ti<Te&&(gt=Ze(De,ii,Wn,er,wi,Te),Ye&&(De.start=ht+g*gt)):Ot(De,ii,Wn,qi),ti<me&&hi>=me&&(gt=Ze(De,ii,Wn,er,wi,me),Wi=!0),ti>Te&&hi<=Te&&(gt=Ze(De,ii,Wn,er,wi,Te),Wi=!0),!dt&&Wi&&(Ye&&(De.end=ht+g*gt),le.push(De),De=bt(re)),Ye&&(ht+=g)}let kt=re.length-3;const it=re[kt],en=re[kt+1],Dn=We===0?it:en;Dn>=me&&Dn<=Te&&Ot(De,it,en,re[kt+2]),kt=De.length-3,dt&&kt>=3&&(De[kt]!==De[0]||De[kt+1]!==De[1])&&Ot(De,De[0],De[1],De[2]),De.length&&le.push(De)}function bt(re){const le=[];return le.size=re.size,le.start=re.start,le.end=re.end,le}function vt(re,le,me,Te,We,dt){for(const Ye of re)He(Ye,le,me,Te,We,dt,!1)}function Ot(re,le,me,Te){re.push(le,me,Te)}function qt(re,le,me,Te,We,dt){const Ye=(dt-le)/(Te-le);return Ot(re,dt,me+(We-me)*Ye,1),Ye}function Kt(re,le,me,Te,We,dt){const Ye=(dt-me)/(We-me);return Ot(re,le+(Te-le)*Ye,dt,1),Ye}function on(re,le){const me=[];for(let Te=0;Te<re.length;Te++){const We=re[Te],dt=We.type;let Ye;if(dt==="Point"||dt==="MultiPoint"||dt==="LineString")Ye=Jn(We.geometry,le);else if(dt==="MultiLineString"||dt==="Polygon"){Ye=[];for(const De of We.geometry)Ye.push(Jn(De,le))}else if(dt==="MultiPolygon"){Ye=[];for(const De of We.geometry){const Ze=[];for(const g of De)Ze.push(Jn(g,le));Ye.push(Ze)}}me.push(Ne(We.id,dt,Ye,We.tags))}return me}function Jn(re,le){const me=[];me.size=re.size,re.start!==void 0&&(me.start=re.start,me.end=re.end);for(let Te=0;Te<re.length;Te+=3)me.push(re[Te]+le,re[Te+1],re[Te+2]);return me}function Wt(re,le){if(re.transformed)return re;const me=1<<re.z,Te=re.x,We=re.y;for(const dt of re.features){const Ye=dt.geometry,De=dt.type;if(dt.geometry=[],De===1)for(let Ze=0;Ze<Ye.length;Ze+=2)dt.geometry.push($n(Ye[Ze],Ye[Ze+1],le,me,Te,We));else for(let Ze=0;Ze<Ye.length;Ze++){const g=[];for(let gt=0;gt<Ye[Ze].length;gt+=2)g.push($n(Ye[Ze][gt],Ye[Ze][gt+1],le,me,Te,We));dt.geometry.push(g)}}return re.transformed=!0,re}function $n(re,le,me,Te,We,dt){return[Math.round(me*(re*Te-We)),Math.round(me*(le*Te-dt))]}function On(re,le,me,Te,We){const dt=le===We.maxZoom?0:We.tolerance/((1<<le)*We.extent),Ye={features:[],numPoints:0,numSimplified:0,numFeatures:re.length,source:null,x:me,y:Te,z:le,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const De of re)Bn(Ye,De,dt,We);return Ye}function Bn(re,le,me,Te){const We=le.geometry,dt=le.type,Ye=[];if(re.minX=Math.min(re.minX,le.minX),re.minY=Math.min(re.minY,le.minY),re.maxX=Math.max(re.maxX,le.maxX),re.maxY=Math.max(re.maxY,le.maxY),dt==="Point"||dt==="MultiPoint")for(let De=0;De<We.length;De+=3)Ye.push(We[De],We[De+1]),re.numPoints++,re.numSimplified++;else if(dt==="LineString")In(Ye,We,re,me,!1,!1);else if(dt==="MultiLineString"||dt==="Polygon")for(let De=0;De<We.length;De++)In(Ye,We[De],re,me,dt==="Polygon",De===0);else if(dt==="MultiPolygon")for(let De=0;De<We.length;De++){const Ze=We[De];for(let g=0;g<Ze.length;g++)In(Ye,Ze[g],re,me,!0,g===0)}if(Ye.length){let De=le.tags||null;if(dt==="LineString"&&Te.lineMetrics){De={};for(const g in le.tags)De[g]=le.tags[g];De.mapbox_clip_start=We.start/We.size,De.mapbox_clip_end=We.end/We.size}const Ze={geometry:Ye,type:dt==="Polygon"||dt==="MultiPolygon"?3:dt==="LineString"||dt==="MultiLineString"?2:1,tags:De};le.id!==null&&(Ze.id=le.id),re.features.push(Ze)}}function In(re,le,me,Te,We,dt){const Ye=Te*Te;if(Te>0&&le.size<(We?Ye:Te))return void(me.numPoints+=le.length/3);const De=[];for(let Ze=0;Ze<le.length;Ze+=3)(Te===0||le[Ze+2]>Ye)&&(me.numSimplified++,De.push(le[Ze],le[Ze+1])),me.numPoints++;We&&function(Ze,g){let gt=0;for(let ht=0,kt=Ze.length,it=kt-2;ht<kt;it=ht,ht+=2)gt+=(Ze[ht]-Ze[it])*(Ze[ht+1]+Ze[it+1]);if(gt>0===g)for(let ht=0,kt=Ze.length;ht<kt/2;ht+=2){const it=Ze[ht],en=Ze[ht+1];Ze[ht]=Ze[kt-2-ht],Ze[ht+1]=Ze[kt-1-ht],Ze[kt-2-ht]=it,Ze[kt-1-ht]=en}}(De,dt),re.push(De)}const Bi={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class ei{constructor(le,me){const Te=(me=this.options=function(dt,Ye){for(const De in Ye)dt[De]=Ye[De];return dt}(Object.create(Bi),me)).debug;if(Te&&console.time("preprocess data"),me.maxZoom<0||me.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(me.promoteId&&me.generateId)throw new Error("promoteId and generateId cannot be used together.");let We=function(dt,Ye){const De=[];if(dt.type==="FeatureCollection")for(let Ze=0;Ze<dt.features.length;Ze++)lt(De,dt.features[Ze],Ye,Ze);else lt(De,dt.type==="Feature"?dt:{geometry:dt},Ye);return De}(le,me);this.tiles={},this.tileCoords=[],Te&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",me.indexMaxZoom,me.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),We=function(dt,Ye){const De=Ye.buffer/Ye.extent;let Ze=dt;const g=Pe(dt,1,-1-De,De,0,-1,2,Ye),gt=Pe(dt,1,1-De,2+De,0,-1,2,Ye);return(g||gt)&&(Ze=Pe(dt,1,-De,1+De,0,-1,2,Ye)||[],g&&(Ze=on(g,1).concat(Ze)),gt&&(Ze=Ze.concat(on(gt,-1)))),Ze}(We,me),We.length&&this.splitTile(We,0,0,0),Te&&(We.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(le,me,Te,We,dt,Ye,De){const Ze=[le,me,Te,We],g=this.options,gt=g.debug;for(;Ze.length;){We=Ze.pop(),Te=Ze.pop(),me=Ze.pop(),le=Ze.pop();const ht=1<<me,kt=Kn(me,Te,We);let it=this.tiles[kt];if(!it&&(gt>1&&console.time("creation"),it=this.tiles[kt]=On(le,me,Te,We,g),this.tileCoords.push({z:me,x:Te,y:We}),gt)){gt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",me,Te,We,it.numFeatures,it.numPoints,it.numSimplified),console.timeEnd("creation"));const Wi=`z${me}`;this.stats[Wi]=(this.stats[Wi]||0)+1,this.total++}if(it.source=le,dt==null){if(me===g.indexMaxZoom||it.numPoints<=g.indexMaxPoints)continue}else{if(me===g.maxZoom||me===dt)continue;if(dt!=null){const Wi=dt-me;if(Te!==Ye>>Wi||We!==De>>Wi)continue}}if(it.source=null,le.length===0)continue;gt>1&&console.time("clipping");const en=.5*g.buffer/g.extent,Dn=.5-en,Mn=.5+en,ii=1+en;let Wn=null,qi=null,er=null,wi=null,hi=Pe(le,ht,Te-en,Te+Mn,0,it.minX,it.maxX,g),ti=Pe(le,ht,Te+Dn,Te+ii,0,it.minX,it.maxX,g);le=null,hi&&(Wn=Pe(hi,ht,We-en,We+Mn,1,it.minY,it.maxY,g),qi=Pe(hi,ht,We+Dn,We+ii,1,it.minY,it.maxY,g),hi=null),ti&&(er=Pe(ti,ht,We-en,We+Mn,1,it.minY,it.maxY,g),wi=Pe(ti,ht,We+Dn,We+ii,1,it.minY,it.maxY,g),ti=null),gt>1&&console.timeEnd("clipping"),Ze.push(Wn||[],me+1,2*Te,2*We),Ze.push(qi||[],me+1,2*Te,2*We+1),Ze.push(er||[],me+1,2*Te+1,2*We),Ze.push(wi||[],me+1,2*Te+1,2*We+1)}}getTile(le,me,Te){le=+le,me=+me,Te=+Te;const We=this.options,{extent:dt,debug:Ye}=We;if(le<0||le>24)return null;const De=1<<le,Ze=Kn(le,me=me+De&De-1,Te);if(this.tiles[Ze])return Wt(this.tiles[Ze],dt);Ye>1&&console.log("drilling down to z%d-%d-%d",le,me,Te);let g,gt=le,ht=me,kt=Te;for(;!g&&gt>0;)gt--,ht>>=1,kt>>=1,g=this.tiles[Kn(gt,ht,kt)];return g&&g.source?(Ye>1&&(console.log("found parent tile z%d-%d-%d",gt,ht,kt),console.time("drilling down")),this.splitTile(g.source,gt,ht,kt,le,me,Te),Ye>1&&console.timeEnd("drilling down"),this.tiles[Ze]?Wt(this.tiles[Ze],dt):null):null}}function Kn(re,le,me){return 32*((1<<re)*me+le)+re}class Ge extends O{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(le,me){return l._(this,void 0,void 0,function*(){const Te=le.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const We=this._geoJSONIndex.getTile(Te.z,Te.x,Te.y);if(!We)return null;const dt=new V(We.features,{version:2,extent:l.$});let Ye=function(De){const Ze=new l.cM;return function(g,gt){for(const ht in g.layers)gt.writeMessage(3,ae,g.layers[ht])}(De,Ze),Ze.finish()}(dt);return Ye.byteOffset===0&&Ye.byteLength===Ye.buffer.byteLength||(Ye=new Uint8Array(Ye)),{vectorTile:dt,rawData:Ye.buffer}})}loadData(le){return l._(this,void 0,void 0,function*(){var me;(me=this._pendingRequest)===null||me===void 0||me.abort();const Te=!!(le&&le.request&&le.request.collectResourceTiming)&&new l.cN(le.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(le,this._pendingRequest);const We=yield this._pendingData;this._geoJSONIndex=le.cluster?new we(function({superclusterOptions:Ye,clusterProperties:De}){if(!De||!Ye)return Ye;const Ze={},g={},gt={accumulated:null,zoom:0},ht={properties:null},kt=Object.keys(De);for(const it of kt){const[en,Dn]=De[it],Mn=l.cT(Dn),ii=l.cT(typeof en=="string"?[en,["accumulated"],["get",it]]:en);Ze[it]=Mn.value,g[it]=ii.value}return Ye.map=it=>{ht.properties=it;const en={};for(const Dn of kt)en[Dn]=Ze[Dn].evaluate(gt,ht);return en},Ye.reduce=(it,en)=>{ht.properties=en;for(const Dn of kt)gt.accumulated=it[Dn],it[Dn]=g[Dn].evaluate(gt,ht)},Ye}(le)).load(We.features):function(Ye,De){return new ei(Ye,De)}(We,le.geojsonVtOptions),this.loaded={};const dt={data:We};if(Te){const Ye=Te.finish();Ye&&(dt.resourceTiming={},dt.resourceTiming[le.source]=JSON.parse(JSON.stringify(Ye)))}return dt}catch(We){if(delete this._pendingRequest,l.cy(We))return{abandoned:!0};throw We}})}getData(){return l._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(le){const me=this.loaded;return me&&me[le.uid]?super.reloadTile(le):this.loadTile(le)}loadAndProcessGeoJSON(le,me){return l._(this,void 0,void 0,function*(){let Te=yield this.loadGeoJSON(le,me);if(delete this._pendingRequest,typeof Te!="object")throw new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`);if(Q(Te,!0),le.filter){const We=l.cT(le.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(We.result==="error")throw new Error(We.value.map(Ye=>`${Ye.key}: ${Ye.message}`).join(", "));Te={type:"FeatureCollection",features:Te.features.filter(Ye=>We.value.evaluate({zoom:0},Ye))}}return Te})}loadGeoJSON(le,me){return l._(this,void 0,void 0,function*(){const{promoteId:Te}=le;if(le.request){const We=yield l.j(le.request,me);return this._dataUpdateable=l.cV(We.data,Te)?l.cU(We.data,Te):void 0,We.data}if(typeof le.data=="string")try{const We=JSON.parse(le.data);return this._dataUpdateable=l.cV(We,Te)?l.cU(We,Te):void 0,We}catch{throw new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`)}if(!le.dataDiff)throw new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${le.source}`);return l.cW(this._dataUpdateable,le.dataDiff,Te),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(le){return l._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(le){return this._geoJSONIndex.getClusterExpansionZoom(le.clusterId)}getClusterChildren(le){return this._geoJSONIndex.getChildren(le.clusterId)}getClusterLeaves(le){return this._geoJSONIndex.getLeaves(le.clusterId,le.limit,le.offset)}}class de{constructor(le){this.self=le,this.actor=new l.J(le),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(me,Te)=>{if(this.externalWorkerSourceTypes[me])throw new Error(`Worker source with name "${me}" already registered.`);this.externalWorkerSourceTypes[me]=Te},this.self.addProtocol=l.cA,this.self.removeProtocol=l.cB,this.self.registerRTLTextPlugin=me=>{l.cX.setMethods(me)},this.actor.registerMessageHandler("LDT",(me,Te)=>this._getDEMWorkerSource(me,Te.source).loadTile(Te)),this.actor.registerMessageHandler("RDT",(me,Te)=>l._(this,void 0,void 0,function*(){this._getDEMWorkerSource(me,Te.source).removeTile(Te)})),this.actor.registerMessageHandler("GCEZ",(me,Te)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(me,Te.type,Te.source).getClusterExpansionZoom(Te)})),this.actor.registerMessageHandler("GCC",(me,Te)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(me,Te.type,Te.source).getClusterChildren(Te)})),this.actor.registerMessageHandler("GCL",(me,Te)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(me,Te.type,Te.source).getClusterLeaves(Te)})),this.actor.registerMessageHandler("LD",(me,Te)=>this._getWorkerSource(me,Te.type,Te.source).loadData(Te)),this.actor.registerMessageHandler("GD",(me,Te)=>this._getWorkerSource(me,Te.type,Te.source).getData()),this.actor.registerMessageHandler("LT",(me,Te)=>this._getWorkerSource(me,Te.type,Te.source).loadTile(Te)),this.actor.registerMessageHandler("RT",(me,Te)=>this._getWorkerSource(me,Te.type,Te.source).reloadTile(Te)),this.actor.registerMessageHandler("AT",(me,Te)=>this._getWorkerSource(me,Te.type,Te.source).abortTile(Te)),this.actor.registerMessageHandler("RMT",(me,Te)=>this._getWorkerSource(me,Te.type,Te.source).removeTile(Te)),this.actor.registerMessageHandler("RS",(me,Te)=>l._(this,void 0,void 0,function*(){if(!this.workerSources[me]||!this.workerSources[me][Te.type]||!this.workerSources[me][Te.type][Te.source])return;const We=this.workerSources[me][Te.type][Te.source];delete this.workerSources[me][Te.type][Te.source],We.removeSource!==void 0&&We.removeSource(Te)})),this.actor.registerMessageHandler("RM",me=>l._(this,void 0,void 0,function*(){delete this.layerIndexes[me],delete this.availableImages[me],delete this.workerSources[me],delete this.demWorkerSources[me]})),this.actor.registerMessageHandler("SR",(me,Te)=>l._(this,void 0,void 0,function*(){this.referrer=Te})),this.actor.registerMessageHandler("SRPS",(me,Te)=>this._syncRTLPluginState(me,Te)),this.actor.registerMessageHandler("IS",(me,Te)=>l._(this,void 0,void 0,function*(){this.self.importScripts(Te)})),this.actor.registerMessageHandler("SI",(me,Te)=>this._setImages(me,Te)),this.actor.registerMessageHandler("UL",(me,Te)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(me).update(Te.layers,Te.removedIds)})),this.actor.registerMessageHandler("SL",(me,Te)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(me).replace(Te)}))}_setImages(le,me){return l._(this,void 0,void 0,function*(){this.availableImages[le]=me;for(const Te in this.workerSources[le]){const We=this.workerSources[le][Te];for(const dt in We)We[dt].availableImages=me}})}_syncRTLPluginState(le,me){return l._(this,void 0,void 0,function*(){return yield l.cX.syncState(me,this.self.importScripts)})}_getAvailableImages(le){let me=this.availableImages[le];return me||(me=[]),me}_getLayerIndex(le){let me=this.layerIndexes[le];return me||(me=this.layerIndexes[le]=new o),me}_getWorkerSource(le,me,Te){if(this.workerSources[le]||(this.workerSources[le]={}),this.workerSources[le][me]||(this.workerSources[le][me]={}),!this.workerSources[le][me][Te]){const We={sendAsync:(dt,Ye)=>(dt.targetMapId=le,this.actor.sendAsync(dt,Ye))};switch(me){case"vector":this.workerSources[le][me][Te]=new O(We,this._getLayerIndex(le),this._getAvailableImages(le));break;case"geojson":this.workerSources[le][me][Te]=new Ge(We,this._getLayerIndex(le),this._getAvailableImages(le));break;default:this.workerSources[le][me][Te]=new this.externalWorkerSourceTypes[me](We,this._getLayerIndex(le),this._getAvailableImages(le))}}return this.workerSources[le][me][Te]}_getDEMWorkerSource(le,me){return this.demWorkerSources[le]||(this.demWorkerSources[le]={}),this.demWorkerSources[le][me]||(this.demWorkerSources[le][me]=new U),this.demWorkerSources[le][me]}}return l.i(self)&&(self.worker=new de(self)),de}),r("index",["exports","./shared"],function(l,o){var m="5.7.1";function C(){var I=new o.A(4);return o.A!=Float32Array&&(I[1]=0,I[2]=0),I[0]=1,I[3]=1,I}let S,O;const U={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(I,s,f){const _=requestAnimationFrame(k=>{w(),s(k)}),{unsubscribe:w}=o.s(I.signal,"abort",()=>{w(),cancelAnimationFrame(_),f(o.c())},!1)},frameAsync(I){return new Promise((s,f)=>{this.frame(I,s,f)})},getImageData(I,s=0){return this.getImageCanvasContext(I).getImageData(-s,-s,I.width+2*s,I.height+2*s)},getImageCanvasContext(I){const s=window.document.createElement("canvas"),f=s.getContext("2d",{willReadFrequently:!0});if(!f)throw new Error("failed to create canvas 2d context");return s.width=I.width,s.height=I.height,f.drawImage(I,0,0,I.width,I.height),f},resolveURL:I=>(S||(S=document.createElement("a")),S.href=I,S.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(O==null&&(O=matchMedia("(prefers-reduced-motion: reduce)")),O.matches)}};class K{static testProp(s){if(!K.docStyle)return s[0];for(let f=0;f<s.length;f++)if(s[f]in K.docStyle)return s[f];return s[0]}static create(s,f,_){const w=window.document.createElement(s);return f!==void 0&&(w.className=f),_&&_.appendChild(w),w}static createNS(s,f){return window.document.createElementNS(s,f)}static disableDrag(){K.docStyle&&K.selectProp&&(K.userSelect=K.docStyle[K.selectProp],K.docStyle[K.selectProp]="none")}static enableDrag(){K.docStyle&&K.selectProp&&(K.docStyle[K.selectProp]=K.userSelect)}static setTransform(s,f){s.style[K.transformProp]=f}static addEventListener(s,f,_,w={}){s.addEventListener(f,_,"passive"in w?w:w.capture)}static removeEventListener(s,f,_,w={}){s.removeEventListener(f,_,"passive"in w?w:w.capture)}static suppressClickInternal(s){s.preventDefault(),s.stopPropagation(),window.removeEventListener("click",K.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",K.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",K.suppressClickInternal,!0)},0)}static getScale(s){const f=s.getBoundingClientRect();return{x:f.width/s.offsetWidth||1,y:f.height/s.offsetHeight||1,boundingClientRect:f}}static getPoint(s,f,_){const w=f.boundingClientRect;return new o.P((_.clientX-w.left)/f.x-s.clientLeft,(_.clientY-w.top)/f.y-s.clientTop)}static mousePos(s,f){const _=K.getScale(s);return K.getPoint(s,_,f)}static touchPos(s,f){const _=[],w=K.getScale(s);for(let k=0;k<f.length;k++)_.push(K.getPoint(s,w,f[k]));return _}static mouseButton(s){return s.button}static remove(s){s.parentNode&&s.parentNode.removeChild(s)}static sanitize(s){const f=new DOMParser().parseFromString(s,"text/html").body||document.createElement("body"),_=f.querySelectorAll("script");for(const w of _)w.remove();return K.clean(f),f.innerHTML}static isPossiblyDangerous(s,f){const _=f.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(s)||!_.includes("javascript:")&&!_.includes("data:"))||!!s.startsWith("on")||void 0}static clean(s){const f=s.children;for(const _ of f)K.removeAttributes(_),K.clean(_)}static removeAttributes(s){for(const{name:f,value:_}of s.attributes)K.isPossiblyDangerous(f,_)&&s.removeAttribute(f)}}K.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,K.selectProp=K.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),K.transformProp=K.testProp(["transform","WebkitTransform"]);const z={supported:!1,testSupport:function(I){!ee&&Q&&(V?ae(I):j=I)}};let j,Q,ee=!1,V=!1;function ae(I){const s=I.createTexture();I.bindTexture(I.TEXTURE_2D,s);try{if(I.texImage2D(I.TEXTURE_2D,0,I.RGBA,I.RGBA,I.UNSIGNED_BYTE,Q),I.isContextLost())return;z.supported=!0}catch{}I.deleteTexture(s),ee=!0}var ne;typeof document<"u"&&(Q=document.createElement("img"),Q.onload=()=>{j&&ae(j),j=null,V=!0},Q.onerror=()=>{ee=!0,j=null},Q.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(I){let s,f,_,w;I.resetRequestQueue=()=>{s=[],f=0,_=0,w={}},I.addThrottleControl=J=>{const he=_++;return w[he]=J,he},I.removeThrottleControl=J=>{delete w[J],N()},I.getImage=(J,he,pe=!0)=>new Promise((Ee,Se)=>{z.supported&&(J.headers||(J.headers={}),J.headers.accept="image/webp,*/*"),o.e(J,{type:"image"}),s.push({abortController:he,requestParameters:J,supportImageRefresh:pe,state:"queued",onError:Ue=>{Se(Ue)},onSuccess:Ue=>{Ee(Ue)}}),N()});const k=J=>o._(this,void 0,void 0,function*(){J.state="running";const{requestParameters:he,supportImageRefresh:pe,onError:Ee,onSuccess:Se,abortController:Ue}=J,Xe=pe===!1&&!o.i(self)&&!o.g(he.url)&&(!he.headers||Object.keys(he.headers).reduce((ft,xt)=>ft&&xt==="accept",!0));f++;const At=Xe?q(he,Ue):o.m(he,Ue);try{const ft=yield At;delete J.abortController,J.state="completed",ft.data instanceof HTMLImageElement||o.b(ft.data)?Se(ft):ft.data&&Se({data:yield(ct=ft.data,typeof createImageBitmap=="function"?o.f(ct):o.h(ct)),cacheControl:ft.cacheControl,expires:ft.expires})}catch(ft){delete J.abortController,Ee(ft)}finally{f--,N()}var ct}),N=()=>{const J=(()=>{for(const he of Object.keys(w))if(w[he]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let he=f;he<J&&s.length>0;he++){const pe=s.shift();pe.abortController.signal.aborted?he--:k(pe)}},q=(J,he)=>new Promise((pe,Ee)=>{const Se=new Image,Ue=J.url,Xe=J.credentials;Xe&&Xe==="include"?Se.crossOrigin="use-credentials":(Xe&&Xe==="same-origin"||!o.d(Ue))&&(Se.crossOrigin="anonymous"),he.signal.addEventListener("abort",()=>{Se.src="",Ee(o.c())}),Se.fetchPriority="high",Se.onload=()=>{Se.onerror=Se.onload=null,pe({data:Se})},Se.onerror=()=>{Se.onerror=Se.onload=null,he.signal.aborted||Ee(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Se.src=Ue})}(ne||(ne={})),ne.resetRequestQueue();class Z{constructor(s){this._transformRequestFn=s??null}transformRequest(s,f){return this._transformRequestFn&&this._transformRequestFn(s,f)||{url:s}}setTransformRequest(s){this._transformRequestFn=s}}function oe(I){const s=[];if(typeof I=="string")s.push({id:"default",url:I});else if(I&&I.length>0){const f=[];for(const{id:_,url:w}of I){const k=`${_}${w}`;f.indexOf(k)===-1&&(f.push(k),s.push({id:_,url:w}))}}return s}function W(I,s,f){try{const _=new URL(I);return _.pathname+=`${s}${f}`,_.toString()}catch{throw new Error(`Invalid sprite URL "${I}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function ue(I){const{userImage:s}=I;return!!(s&&s.render&&s.render())&&(I.data.replace(new Uint8Array(s.data.buffer)),!0)}class ge extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(const{ids:f,promiseResolve:_}of this.requestors)_(this._getImagesForIds(f));this.requestors=[]}}getImage(s){const f=this.images[s];if(f&&!f.data&&f.spriteData){const _=f.spriteData;f.data=new o.R({width:_.width,height:_.height},_.context.getImageData(_.x,_.y,_.width,_.height).data),f.spriteData=null}return f}addImage(s,f){if(this.images[s])throw new Error(`Image id ${s} already exist, use updateImage instead`);this._validate(s,f)&&(this.images[s]=f)}_validate(s,f){let _=!0;const w=f.data||f.spriteData;return this._validateStretch(f.stretchX,w&&w.width)||(this.fire(new o.k(new Error(`Image "${s}" has invalid "stretchX" value`))),_=!1),this._validateStretch(f.stretchY,w&&w.height)||(this.fire(new o.k(new Error(`Image "${s}" has invalid "stretchY" value`))),_=!1),this._validateContent(f.content,f)||(this.fire(new o.k(new Error(`Image "${s}" has invalid "content" value`))),_=!1),_}_validateStretch(s,f){if(!s)return!0;let _=0;for(const w of s){if(w[0]<_||w[1]<w[0]||f<w[1])return!1;_=w[1]}return!0}_validateContent(s,f){if(!s)return!0;if(s.length!==4)return!1;const _=f.spriteData,w=_&&_.width||f.data.width,k=_&&_.height||f.data.height;return!(s[0]<0||w<s[0]||s[1]<0||k<s[1]||s[2]<0||w<s[2]||s[3]<0||k<s[3]||s[2]<s[0]||s[3]<s[1])}updateImage(s,f,_=!0){const w=this.getImage(s);if(_&&(w.data.width!==f.data.width||w.data.height!==f.data.height))throw new Error(`size mismatch between old image (${w.data.width}x${w.data.height}) and new image (${f.data.width}x${f.data.height}).`);f.version=w.version+1,this.images[s]=f,this.updatedImages[s]=!0}removeImage(s){const f=this.images[s];delete this.images[s],delete this.patterns[s],f.userImage&&f.userImage.onRemove&&f.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s){return new Promise((f,_)=>{let w=!0;if(!this.isLoaded())for(const k of s)this.images[k]||(w=!1);this.isLoaded()||w?f(this._getImagesForIds(s)):this.requestors.push({ids:s,promiseResolve:f})})}_getImagesForIds(s){const f={};for(const _ of s){let w=this.getImage(_);w||(this.fire(new o.l("styleimagemissing",{id:_})),w=this.getImage(_)),w?f[_]={data:w.data.clone(),pixelRatio:w.pixelRatio,sdf:w.sdf,version:w.version,stretchX:w.stretchX,stretchY:w.stretchY,content:w.content,textFitWidth:w.textFitWidth,textFitHeight:w.textFitHeight,hasRenderCallback:!!(w.userImage&&w.userImage.render)}:o.w(`Image "${_}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return f}getPixelSize(){const{width:s,height:f}=this.atlasImage;return{width:s,height:f}}getPattern(s){const f=this.patterns[s],_=this.getImage(s);if(!_)return null;if(f&&f.position.version===_.version)return f.position;if(f)f.position.version=_.version;else{const w={w:_.data.width+2,h:_.data.height+2,x:0,y:0},k=new o.I(w,_);this.patterns[s]={bin:w,position:k}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){const f=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.T(s,this.atlasImage,f.RGBA),this.atlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE)}_updatePatternAtlas(){const s=[];for(const k in this.patterns)s.push(this.patterns[k].bin);const{w:f,h:_}=o.p(s),w=this.atlasImage;w.resize({width:f||1,height:_||1});for(const k in this.patterns){const{bin:N}=this.patterns[k],q=N.x+1,J=N.y+1,he=this.getImage(k).data,pe=he.width,Ee=he.height;o.R.copy(he,w,{x:0,y:0},{x:q,y:J},{width:pe,height:Ee}),o.R.copy(he,w,{x:0,y:Ee-1},{x:q,y:J-1},{width:pe,height:1}),o.R.copy(he,w,{x:0,y:0},{x:q,y:J+Ee},{width:pe,height:1}),o.R.copy(he,w,{x:pe-1,y:0},{x:q-1,y:J},{width:1,height:Ee}),o.R.copy(he,w,{x:0,y:0},{x:q+pe,y:J},{width:1,height:Ee})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(const f of s){if(this.callbackDispatchedThisFrame[f])continue;this.callbackDispatchedThisFrame[f]=!0;const _=this.getImage(f);_||o.w(`Image with ID: "${f}" was not found`),ue(_)&&this.updateImage(f,_)}}}const ye=1e20;function Me(I,s,f,_,w,k,N,q,J){for(let he=s;he<s+_;he++)Be(I,f*k+he,k,w,N,q,J);for(let he=f;he<f+w;he++)Be(I,he*k+s,1,_,N,q,J)}function Be(I,s,f,_,w,k,N){k[0]=0,N[0]=-ye,N[1]=ye,w[0]=I[s];for(let q=1,J=0,he=0;q<_;q++){w[q]=I[s+q*f];const pe=q*q;do{const Ee=k[J];he=(w[q]-w[Ee]+pe-Ee*Ee)/(q-Ee)/2}while(he<=N[J]&&--J>-1);J++,k[J]=q,N[J]=he,N[J+1]=ye}for(let q=0,J=0;q<_;q++){for(;N[J+1]<q;)J++;const he=k[J],pe=q-he;I[s+q*f]=w[he]+pe*pe}}class we{constructor(s,f,_){this.requestManager=s,this.localIdeographFontFamily=f,this.entries={},this.lang=_}setURL(s){this.url=s}getGlyphs(s){return o._(this,void 0,void 0,function*(){const f=[];for(const k in s)for(const N of s[k])f.push(this._getAndCacheGlyphsPromise(k,N));const _=yield Promise.all(f),w={};for(const{stack:k,id:N,glyph:q}of _)w[k]||(w[k]={}),w[k][N]=q&&{id:q.id,bitmap:q.bitmap.clone(),metrics:q.metrics};return w})}_getAndCacheGlyphsPromise(s,f){return o._(this,void 0,void 0,function*(){let _=this.entries[s];_||(_=this.entries[s]={glyphs:{},requests:{},ranges:{}});let w=_.glyphs[f];if(w!==void 0)return{stack:s,id:f,glyph:w};if(w=this._tinySDF(_,s,f),w)return _.glyphs[f]=w,{stack:s,id:f,glyph:w};const k=Math.floor(f/256);if(256*k>65535)throw new Error("glyphs > 65535 not supported");if(_.ranges[k])return{stack:s,id:f,glyph:w};if(!this.url)throw new Error("glyphsUrl is not set");if(!_.requests[k]){const q=we.loadGlyphRange(s,k,this.url,this.requestManager);_.requests[k]=q}const N=yield _.requests[k];for(const q in N)this._doesCharSupportLocalGlyph(+q)||(_.glyphs[+q]=N[+q]);return _.ranges[k]=!0,{stack:s,id:f,glyph:N[f]||null}})}_doesCharSupportLocalGlyph(s){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(s))||o.u["CJK Unified Ideographs"](s)||o.u["Hangul Syllables"](s)||o.u.Hiragana(s)||o.u.Katakana(s)||o.u["CJK Symbols and Punctuation"](s)||o.u["Halfwidth and Fullwidth Forms"](s))}_tinySDF(s,f,_){const w=this.localIdeographFontFamily;if(!w||!this._doesCharSupportLocalGlyph(_))return;let k=s.tinySDF;if(!k){let q="400";/bold/i.test(f)?q="900":/medium/i.test(f)?q="500":/light/i.test(f)&&(q="200"),k=s.tinySDF=new we.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:w,fontWeight:q})}const N=k.draw(String.fromCharCode(_));return{id:_,bitmap:new o.q({width:N.width||60,height:N.height||60},N.data),metrics:{width:N.glyphWidth/2||24,height:N.glyphHeight/2||24,left:N.glyphLeft/2+.5||0,top:N.glyphTop/2-27.5||-8,advance:N.glyphAdvance/2||24,isDoubleResolution:!0}}}}we.loadGlyphRange=function(I,s,f,_){return o._(this,void 0,void 0,function*(){const w=256*s,k=w+255,N=_.transformRequest(f.replace("{fontstack}",I).replace("{range}",`${w}-${k}`),"Glyphs"),q=yield o.n(N,new AbortController);if(!q||!q.data)throw new Error(`Could not load glyph range. range: ${s}, ${w}-${k}`);const J={};for(const he of o.o(q.data))J[he.id]=he;return J})},we.TinySDF=class{constructor({fontSize:I=24,buffer:s=3,radius:f=8,cutoff:_=.25,fontFamily:w="sans-serif",fontWeight:k="normal",fontStyle:N="normal",lang:q=null}={}){this.buffer=s,this.cutoff=_,this.radius=f,this.lang=q;const J=this.size=I+4*s,he=this._createCanvas(J),pe=this.ctx=he.getContext("2d",{willReadFrequently:!0});pe.font=`${N} ${k} ${I}px ${w}`,pe.textBaseline="alphabetic",pe.textAlign="left",pe.fillStyle="black",this.gridOuter=new Float64Array(J*J),this.gridInner=new Float64Array(J*J),this.f=new Float64Array(J),this.z=new Float64Array(J+1),this.v=new Uint16Array(J)}_createCanvas(I){const s=document.createElement("canvas");return s.width=s.height=I,s}draw(I){const{width:s,actualBoundingBoxAscent:f,actualBoundingBoxDescent:_,actualBoundingBoxLeft:w,actualBoundingBoxRight:k}=this.ctx.measureText(I),N=Math.ceil(f),q=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(k-w))),J=Math.min(this.size-this.buffer,N+Math.ceil(_)),he=q+2*this.buffer,pe=J+2*this.buffer,Ee=Math.max(he*pe,0),Se=new Uint8ClampedArray(Ee),Ue={data:Se,width:he,height:pe,glyphWidth:q,glyphHeight:J,glyphTop:N,glyphLeft:0,glyphAdvance:s};if(q===0||J===0)return Ue;const{ctx:Xe,buffer:At,gridInner:ct,gridOuter:ft}=this;this.lang&&(Xe.lang=this.lang),Xe.clearRect(At,At,q,J),Xe.fillText(I,At,At+N);const xt=Xe.getImageData(At,At,q,J);ft.fill(ye,0,Ee),ct.fill(0,0,Ee);for(let Ct=0;Ct<J;Ct++)for(let wt=0;wt<q;wt++){const Pt=xt.data[4*(Ct*q+wt)+3]/255;if(Pt===0)continue;const Lt=(Ct+At)*he+wt+At;if(Pt===1)ft[Lt]=0,ct[Lt]=ye;else{const Bt=.5-Pt;ft[Lt]=Bt>0?Bt*Bt:0,ct[Lt]=Bt<0?Bt*Bt:0}}Me(ft,0,0,he,pe,he,this.f,this.v,this.z),Me(ct,At,At,q,J,he,this.f,this.v,this.z);for(let Ct=0;Ct<Ee;Ct++){const wt=Math.sqrt(ft[Ct])-Math.sqrt(ct[Ct]);Se[Ct]=Math.round(255-255*(wt/this.radius+this.cutoff))}return Ue}};class qe{constructor(){this.specification=o.v.light.position}possiblyEvaluate(s,f){return o.B(s.expression.evaluate(f))}interpolate(s,f,_){return{x:o.C.number(s.x,f.x,_),y:o.C.number(s.y,f.y,_),z:o.C.number(s.z,f.z,_)}}}let xe;class ze extends o.E{constructor(s){super(),xe=xe||new o.r({anchor:new o.D(o.v.light.anchor),position:new qe,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.t(xe),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,f={}){if(!this._validate(o.x,s,f))for(const _ in s){const w=s[_];_.endsWith("-transition")?this._transitionable.setTransition(_.slice(0,-11),w):this._transitionable.setValue(_,w)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,f,_){return(!_||_.validate!==!1)&&o.y(this,s.call(o.z,{value:f,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}const ot=new o.r({"sky-color":new o.D(o.v.sky["sky-color"]),"horizon-color":new o.D(o.v.sky["horizon-color"]),"fog-color":new o.D(o.v.sky["fog-color"]),"fog-ground-blend":new o.D(o.v.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.v.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.v.sky["atmosphere-blend"])});class yt extends o.E{constructor(s){super(),this._transitionable=new o.t(ot),this.setSky(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.F(0))}setSky(s,f={}){if(!this._validate(o.G,s,f)){s||(s={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const _ in s){const w=s[_];_.endsWith("-transition")?this._transitionable.setTransition(_.slice(0,-11),w):this._transitionable.setValue(_,w)}}}getSky(){return this._transitionable.serialize()}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,f,_={}){return _?.validate!==!1&&o.y(this,s.call(o.z,o.e({value:f,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}calculateFogBlendOpacity(s){return s<60?0:s<70?(s-60)/10:1}}class nt{constructor(s,f){this.width=s,this.height=f,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(s,f){const _=s.join(",")+String(f);return this.dashEntry[_]||(this.dashEntry[_]=this.addDash(s,f)),this.dashEntry[_]}getDashRanges(s,f,_){const w=[];let k=s.length%2==1?-s[s.length-1]*_:0,N=s[0]*_,q=!0;w.push({left:k,right:N,isDash:q,zeroLength:s[0]===0});let J=s[0];for(let he=1;he<s.length;he++){q=!q;const pe=s[he];k=J*_,J+=pe,N=J*_,w.push({left:k,right:N,isDash:q,zeroLength:pe===0})}return w}addRoundDash(s,f,_){const w=f/2;for(let k=-_;k<=_;k++){const N=this.width*(this.nextRow+_+k);let q=0,J=s[q];for(let he=0;he<this.width;he++){he/J.right>1&&(J=s[++q]);const pe=Math.abs(he-J.left),Ee=Math.abs(he-J.right),Se=Math.min(pe,Ee);let Ue;const Xe=k/_*(w+1);if(J.isDash){const At=w-Math.abs(Xe);Ue=Math.sqrt(Se*Se+At*At)}else Ue=w-Math.sqrt(Se*Se+Xe*Xe);this.data[N+he]=Math.max(0,Math.min(255,Ue+128))}}}addRegularDash(s){for(let q=s.length-1;q>=0;--q){const J=s[q],he=s[q+1];J.zeroLength?s.splice(q,1):he&&he.isDash===J.isDash&&(he.left=J.left,s.splice(q,1))}const f=s[0],_=s[s.length-1];f.isDash===_.isDash&&(f.left=_.left-this.width,_.right=f.right+this.width);const w=this.width*this.nextRow;let k=0,N=s[k];for(let q=0;q<this.width;q++){q/N.right>1&&(N=s[++k]);const J=Math.abs(q-N.left),he=Math.abs(q-N.right),pe=Math.min(J,he);this.data[w+q]=Math.max(0,Math.min(255,(N.isDash?pe:-pe)+128))}}addDash(s,f){const _=f?7:0,w=2*_+1;if(this.nextRow+w>this.height)return o.w("LineAtlas out of space"),null;let k=0;for(let q=0;q<s.length;q++)k+=s[q];if(k!==0){const q=this.width/k,J=this.getDashRanges(s,this.width,q);f?this.addRoundDash(J,q,_):this.addRegularDash(J)}const N={y:(this.nextRow+_+.5)/this.height,height:2*_/this.height,width:k};return this.nextRow+=w,this.dirty=!0,N}bind(s){const f=s.gl;this.texture?(f.bindTexture(f.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,f.texSubImage2D(f.TEXTURE_2D,0,0,0,this.width,this.height,f.ALPHA,f.UNSIGNED_BYTE,this.data))):(this.texture=f.createTexture(),f.bindTexture(f.TEXTURE_2D,this.texture),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texImage2D(f.TEXTURE_2D,0,f.ALPHA,this.width,this.height,0,f.ALPHA,f.UNSIGNED_BYTE,this.data))}}const be="maplibre_preloaded_worker_pool";class Ne{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<Ne.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach(f=>{f.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[be]}numActive(){return Object.keys(this.active).length}}const tt=Math.floor(U.hardwareConcurrency/2);let lt,It;function pt(){return lt||(lt=new Ne),lt}Ne.workerCount=o.H(globalThis)?Math.max(Math.min(tt,3),1):1;class St{constructor(s,f){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=f;const _=this.workerPool.acquire(f);for(let w=0;w<_.length;w++){const k=new o.J(_[w],f);k.name=`Worker ${w}`,this.actors.push(k)}if(!this.actors.length)throw new Error("No actors found")}broadcast(s,f){const _=[];for(const w of this.actors)_.push(w.sendAsync({type:s,data:f}));return Promise.all(_)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(s=!0){this.actors.forEach(f=>{f.remove()}),this.actors=[],s&&this.workerPool.release(this.id)}registerMessageHandler(s,f){for(const _ of this.actors)_.registerMessageHandler(s,f)}}function Rt(){return It||(It=new St(pt(),o.K),It.registerMessageHandler("GR",(I,s,f)=>o.m(s,f))),It}function Le(I,s){const f=o.L();return o.M(f,f,[1,1,0]),o.N(f,f,[.5*I.width,.5*I.height,1]),I.calculatePosMatrix?o.O(f,f,I.calculatePosMatrix(s.toUnwrapped())):f}function Pe(I,s,f,_,w,k,N){var q;const J=function(Se,Ue,Xe){if(Se)for(const At of Se){const ct=Ue[At];if(ct&&ct.source===Xe&&ct.type==="fill-extrusion")return!0}else for(const At in Ue){const ct=Ue[At];if(ct.source===Xe&&ct.type==="fill-extrusion")return!0}return!1}((q=w?.layers)!==null&&q!==void 0?q:null,s,I.id),he=k.maxPitchScaleFactor(),pe=I.tilesIn(_,he,J);pe.sort(Re);const Ee=[];for(const Se of pe)Ee.push({wrappedTileID:Se.tileID.wrapped().key,queryResults:Se.tile.queryRenderedFeatures(s,f,I._state,Se.queryGeometry,Se.cameraQueryGeometry,Se.scale,w,k,he,Le(I.transform,Se.tileID),N?(Ue,Xe)=>N(Se.tileID,Ue,Xe):void 0)});return function(Se,Ue){for(const Xe in Se)for(const At of Se[Xe])He(At,Ue);return Se}(function(Se){const Ue={},Xe={};for(const At of Se){const ct=At.queryResults,ft=At.wrappedTileID,xt=Xe[ft]=Xe[ft]||{};for(const Ct in ct){const wt=ct[Ct],Pt=xt[Ct]=xt[Ct]||{},Lt=Ue[Ct]=Ue[Ct]||[];for(const Bt of wt)Pt[Bt.featureIndex]||(Pt[Bt.featureIndex]=!0,Lt.push(Bt))}}return Ue}(Ee),I)}function Re(I,s){const f=I.tileID,_=s.tileID;return f.overscaledZ-_.overscaledZ||f.canonical.y-_.canonical.y||f.wrap-_.wrap||f.canonical.x-_.canonical.x}function He(I,s){const f=I.feature,_=s.getFeatureState(f.layer["source-layer"],f.id);f.source=f.layer.source,f.layer["source-layer"]&&(f.sourceLayer=f.layer["source-layer"]),f.state=_}function bt(I,s,f){return o._(this,void 0,void 0,function*(){let _=I;if(I.url?_=(yield o.j(s.transformRequest(I.url,"Source"),f)).data:yield U.frameAsync(f),!_)return null;const w=o.Q(o.e(_,I),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in _&&_.vector_layers&&(w.vectorLayerIds=_.vector_layers.map(k=>k.id)),w})}class vt{constructor(s,f){s&&(f?this.setSouthWest(s).setNorthEast(f):Array.isArray(s)&&(s.length===4?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1])))}setNorthEast(s){return this._ne=s instanceof o.S?new o.S(s.lng,s.lat):o.S.convert(s),this}setSouthWest(s){return this._sw=s instanceof o.S?new o.S(s.lng,s.lat):o.S.convert(s),this}extend(s){const f=this._sw,_=this._ne;let w,k;if(s instanceof o.S)w=s,k=s;else{if(!(s instanceof vt))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(vt.convert(s)):this.extend(o.S.convert(s)):s&&("lng"in s||"lon"in s)&&"lat"in s?this.extend(o.S.convert(s)):this;if(w=s._sw,k=s._ne,!w||!k)return this}return f||_?(f.lng=Math.min(w.lng,f.lng),f.lat=Math.min(w.lat,f.lat),_.lng=Math.max(k.lng,_.lng),_.lat=Math.max(k.lat,_.lat)):(this._sw=new o.S(w.lng,w.lat),this._ne=new o.S(k.lng,k.lat)),this}getCenter(){return new o.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.S(this.getWest(),this.getNorth())}getSouthEast(){return new o.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:f,lat:_}=o.S.convert(s);let w=this._sw.lng<=f&&f<=this._ne.lng;return this._sw.lng>this._ne.lng&&(w=this._sw.lng>=f&&f>=this._ne.lng),this._sw.lat<=_&&_<=this._ne.lat&&w}static convert(s){return s instanceof vt?s:s&&new vt(s)}static fromLngLat(s,f=0){const _=360*f/40075017,w=_/Math.cos(Math.PI/180*s.lat);return new vt(new o.S(s.lng-w,s.lat-_),new o.S(s.lng+w,s.lat+_))}adjustAntiMeridian(){const s=new o.S(this._sw.lng,this._sw.lat),f=new o.S(this._ne.lng,this._ne.lat);return new vt(s,s.lng>f.lng?new o.S(f.lng+360,f.lat):f)}}class Ot{constructor(s,f,_){this.bounds=vt.convert(this.validateBounds(s)),this.minzoom=f||0,this.maxzoom=_||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){const f=Math.pow(2,s.z),_=Math.floor(o.V(this.bounds.getWest())*f),w=Math.floor(o.U(this.bounds.getNorth())*f),k=Math.ceil(o.V(this.bounds.getEast())*f),N=Math.ceil(o.U(this.bounds.getSouth())*f);return s.x>=_&&s.x<k&&s.y>=w&&s.y<N}}class qt extends o.E{constructor(s,f,_,w){if(super(),this.id=s,this.dispatcher=_,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.Q(f,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},f),this._collectResourceTiming=f.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(w)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const s=yield bt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),s&&(o.e(this,s),s.bounds&&(this.tileBounds=new Ot(s.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})))}catch(s){this._tileJSONRequest=null,this.fire(new o.k(s))}})}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.abort(),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(s){return o._(this,void 0,void 0,function*(){const f=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),_={request:this.map._requestManager.transformRequest(f,"Tile"),uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};_.request.collectResourceTiming=this._collectResourceTiming;let w="RT";if(s.actor&&s.state!=="expired"){if(s.state==="loading")return new Promise((k,N)=>{s.reloadPromise={resolve:k,reject:N}})}else s.actor=this.dispatcher.getActor(),w="LT";s.abortController=new AbortController;try{const k=yield s.actor.sendAsync({type:w,data:_},s.abortController);if(delete s.abortController,s.aborted)return;this._afterTileLoadWorkerResponse(s,k)}catch(k){if(delete s.abortController,s.aborted)return;if(k&&k.status!==404)throw k;this._afterTileLoadWorkerResponse(s,null)}})}_afterTileLoadWorkerResponse(s,f){if(f&&f.resourceTiming&&(s.resourceTiming=f.resourceTiming),f&&this.map._refreshExpiredTiles&&s.setExpiryData(f),s.loadVectorData(f,this.map.painter),s.reloadPromise){const _=s.reloadPromise;s.reloadPromise=null,this.loadTile(s).then(_.resolve).catch(_.reject)}}abortTile(s){return o._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.actor&&(yield s.actor.sendAsync({type:"AT",data:{uid:s.uid,type:this.type,source:this.id}}))})}unloadTile(s){return o._(this,void 0,void 0,function*(){s.unloadVectorData(),s.actor&&(yield s.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Kt extends o.E{constructor(s,f,_,w){super(),this.id=s,this.dispatcher=_,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},f),o.e(this,o.Q(f,["url","scheme","tileSize"]))}load(){return o._(this,arguments,void 0,function*(s=!1){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const f=yield bt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,f&&(o.e(this,f),f.bounds&&(this.tileBounds=new Ot(f.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:s})))}catch(f){this._tileJSONRequest=null,this.fire(new o.k(f))}})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(s){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),s(),this.load(!0)}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}serialize(){return o.e({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s){return o._(this,void 0,void 0,function*(){const f=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);s.abortController=new AbortController;try{const _=yield ne.getImage(this.map._requestManager.transformRequest(f,"Tile"),s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(_&&_.data){this.map._refreshExpiredTiles&&(_.cacheControl||_.expires)&&s.setExpiryData({cacheControl:_.cacheControl,expires:_.expires});const w=this.map.painter.context,k=w.gl,N=_.data;s.texture=this.map.painter.getTileTexture(N.width),s.texture?s.texture.update(N,{useMipmap:!0}):(s.texture=new o.T(w,N,k.RGBA,{useMipmap:!0}),s.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST)),s.state="loaded"}}catch(_){if(delete s.abortController,s.aborted)s.state="unloaded";else if(_)throw s.state="errored",_}})}abortTile(s){return o._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController)})}unloadTile(s){return o._(this,void 0,void 0,function*(){s.texture&&this.map.painter.saveTileTexture(s.texture)})}hasTransition(){return!1}}class on extends Kt{constructor(s,f,_,w){super(s,f,_,w),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},f),this.encoding=f.encoding||"mapbox",this.redFactor=f.redFactor,this.greenFactor=f.greenFactor,this.blueFactor=f.blueFactor,this.baseShift=f.baseShift}loadTile(s){return o._(this,void 0,void 0,function*(){const f=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),_=this.map._requestManager.transformRequest(f,"Tile");s.neighboringTiles=this._getNeighboringTiles(s.tileID),s.abortController=new AbortController;try{const w=yield ne.getImage(_,s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(w&&w.data){const k=w.data;this.map._refreshExpiredTiles&&(w.cacheControl||w.expires)&&s.setExpiryData({cacheControl:w.cacheControl,expires:w.expires});const N=o.b(k)&&o.W()?k:yield this.readImageNow(k),q={type:this.type,uid:s.uid,source:this.id,rawImageData:N,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!s.actor||s.state==="expired"){s.actor=this.dispatcher.getActor();const J=yield s.actor.sendAsync({type:"LDT",data:q});s.dem=J,s.needsHillshadePrepare=!0,s.needsTerrainPrepare=!0,s.state="loaded"}}}catch(w){if(delete s.abortController,s.aborted)s.state="unloaded";else if(w)throw s.state="errored",w}})}readImageNow(s){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.X()){const f=s.width+2,_=s.height+2;try{return new o.R({width:f,height:_},yield o.Y(s,-1,-1,f,_))}catch{}}return U.getImageData(s,1)})}_getNeighboringTiles(s){const f=s.canonical,_=Math.pow(2,f.z),w=(f.x-1+_)%_,k=f.x===0?s.wrap-1:s.wrap,N=(f.x+1+_)%_,q=f.x+1===_?s.wrap+1:s.wrap,J={};return J[new o.Z(s.overscaledZ,k,f.z,w,f.y).key]={backfilled:!1},J[new o.Z(s.overscaledZ,q,f.z,N,f.y).key]={backfilled:!1},f.y>0&&(J[new o.Z(s.overscaledZ,k,f.z,w,f.y-1).key]={backfilled:!1},J[new o.Z(s.overscaledZ,s.wrap,f.z,f.x,f.y-1).key]={backfilled:!1},J[new o.Z(s.overscaledZ,q,f.z,N,f.y-1).key]={backfilled:!1}),f.y+1<_&&(J[new o.Z(s.overscaledZ,k,f.z,w,f.y+1).key]={backfilled:!1},J[new o.Z(s.overscaledZ,s.wrap,f.z,f.x,f.y+1).key]={backfilled:!1},J[new o.Z(s.overscaledZ,q,f.z,N,f.y+1).key]={backfilled:!1}),J}unloadTile(s){return o._(this,void 0,void 0,function*(){s.demTexture&&this.map.painter.saveTileTexture(s.demTexture),s.fbo&&(s.fbo.destroy(),delete s.fbo),s.dem&&delete s.dem,delete s.neighboringTiles,s.state="unloaded",s.actor&&(yield s.actor.sendAsync({type:"RDT",data:{type:this.type,uid:s.uid,source:this.id}}))})}}class Jn extends o.E{constructor(s,f,_,w){super(),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:f.data},this.actor=_.getActor(),this.setEventedParent(w),this._data=f.data,this._options=o.e({},f),this._collectResourceTiming=f.collectResourceTiming,f.maxzoom!==void 0&&(this.maxzoom=f.maxzoom),f.type&&(this.type=f.type),f.attribution&&(this.attribution=f.attribution),this.promoteId=f.promoteId,f.clusterMaxZoom!==void 0&&this.maxzoom<=f.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${f.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:f.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(f.buffer!==void 0?f.buffer:128),tolerance:this._pixelsToTileUnits(f.tolerance!==void 0?f.tolerance:.375),extent:o.$,maxZoom:this.maxzoom,lineMetrics:f.lineMetrics||!1,generateId:f.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(f.clusterMaxZoom),minPoints:Math.max(2,f.clusterMinPoints||2),extent:o.$,radius:this._pixelsToTileUnits(f.clusterRadius||50),log:!1,generateId:f.generateId||!1},clusterProperties:f.clusterProperties,filter:f.filter},f.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(s){return s*(o.$/this.tileSize)}_getClusterMaxZoom(s){const f=s?Math.round(s):this.maxzoom-1;return Number.isInteger(s)||s===void 0||o.w(`Integer expected for option 'clusterMaxZoom': provided value "${s}" rounded to "${f}"`),f}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(s){this.map=s,this.load()}setData(s){return this._data=s,this._pendingWorkerUpdate={data:s},this._updateWorkerData(),this}updateData(s){return this._pendingWorkerUpdate.diff=o.a0(this._pendingWorkerUpdate.diff,s),this._updateWorkerData(),this}getData(){return o._(this,void 0,void 0,function*(){const s=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:s})})}getCoordinatesFromGeometry(s){return s.type==="GeometryCollection"?s.geometries.map(f=>f.coordinates).flat(1/0):s.coordinates.flat(1/0)}getBounds(){return o._(this,void 0,void 0,function*(){const s=new vt,f=yield this.getData();let _;switch(f.type){case"FeatureCollection":_=f.features.map(w=>this.getCoordinatesFromGeometry(w.geometry)).flat(1/0);break;case"Feature":_=this.getCoordinatesFromGeometry(f.geometry);break;default:_=this.getCoordinatesFromGeometry(f)}if(_.length==0)return s;for(let w=0;w<_.length-1;w+=2)s.extend([_[w],_[w+1]]);return s})}setClusterOptions(s){return this.workerOptions.cluster=s.cluster,s&&(s.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(s.clusterRadius)),s.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(s.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(s){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:s,source:this.id}})}getClusterChildren(s){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:s,source:this.id}})}getClusterLeaves(s,f,_){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:s,limit:f,offset:_}})}_updateWorkerData(){return o._(this,void 0,void 0,function*(){if(this._isUpdatingWorker)return;const{data:s,diff:f}=this._pendingWorkerUpdate;if(!s&&!f)return void o.w(`No data or diff provided to GeoJSONSource ${this.id}.`);const _=o.e({type:this.type},this.workerOptions);s?(typeof s=="string"?(_.request=this.map._requestManager.transformRequest(U.resolveURL(s),"Source"),_.request.collectResourceTiming=this._collectResourceTiming):_.data=JSON.stringify(s),this._pendingWorkerUpdate.data=void 0):f&&(_.dataDiff=f,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new o.l("dataloading",{dataType:"source"}));try{const w=yield this.actor.sendAsync({type:"LD",data:_});if(this._isUpdatingWorker=!1,this._removed||w.abandoned)return void this.fire(new o.l("dataabort",{dataType:"source"}));this._data=w.data;let k=null;w.resourceTiming&&w.resourceTiming[this.id]&&(k=w.resourceTiming[this.id].slice(0));const N={dataType:"source"};this._collectResourceTiming&&k&&k.length>0&&o.e(N,{resourceTiming:k}),this.fire(new o.l("data",Object.assign(Object.assign({},N),{sourceDataType:"metadata"}))),this.fire(new o.l("data",Object.assign(Object.assign({},N),{sourceDataType:"content"})))}catch(w){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new o.l("dataabort",{dataType:"source"}));this.fire(new o.k(w))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}})}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(s){return o._(this,void 0,void 0,function*(){const f=s.actor?"RT":"LT";s.actor=this.actor;const _={type:this.type,uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};s.abortController=new AbortController;const w=yield this.actor.sendAsync({type:f,data:_},s.abortController);delete s.abortController,s.unloadVectorData(),s.aborted||s.loadVectorData(w,this.map.painter,f==="RT")})}abortTile(s){return o._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.aborted=!0})}unloadTile(s){return o._(this,void 0,void 0,function*(){s.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Wt extends o.E{constructor(s,f,_,w){super(),this.flippedWindingOrder=!1,this.id=s,this.dispatcher=_,this.coordinates=f.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=f}load(s){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const f=yield ne.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,f&&f.data&&(this.image=f.data,s&&(this.coordinates=s),this._finishLoading())}catch(f){this._request=null,this._loaded=!0,this.fire(new o.k(f))}})}loaded(){return this._loaded}updateImage(s){return s.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=s.url,this.load(s.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(s){this.coordinates=s;const f=s.map(o.a1.fromLngLat);var _;return this.tileID=function(w){const k=o.a2.fromPoints(w),N=k.width(),q=k.height(),J=Math.max(N,q),he=Math.max(0,Math.floor(-Math.log(J)/Math.LN2)),pe=Math.pow(2,he);return new o.a4(he,Math.floor((k.minX+k.maxX)/2*pe),Math.floor((k.minY+k.maxY)/2*pe))}(f),this.terrainTileRanges=this._getOverlappingTileRanges(f),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=f.map(w=>this.tileID.getTilePoint(w)._round()),this.flippedWindingOrder=((_=this.tileCoords)[1].x-_[0].x)*(_[2].y-_[0].y)-(_[1].y-_[0].y)*(_[2].x-_[0].x)<0,this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const s=this.map.painter.context,f=s.gl;this.texture||(this.texture=new o.T(s,this.image,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));let _=!1;for(const w in this.tiles){const k=this.tiles[w];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture,_=!0)}_&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(s){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={}):s.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(s){const{minX:f,minY:_,maxX:w,maxY:k}=o.a2.fromPoints(s),N={};for(let q=0;q<=o.a3;q++){const J=Math.pow(2,q),he=Math.floor(f*J),pe=Math.floor(_*J),Ee=Math.floor(w*J),Se=Math.floor(k*J);N[q]={minTileX:he,minTileY:pe,maxTileX:Ee,maxTileY:Se}}return N}}class $n extends Wt{constructor(s,f,_,w){super(s,f,_,w),this.roundZoom=!0,this.type="video",this.options=f}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;const s=this.options;this.urls=[];for(const f of s.urls)this.urls.push(this.map._requestManager.transformRequest(f,"Source").url);try{const f=yield o.a5(this.urls);if(this._loaded=!0,!f)return;this.video=f,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(f){this.fire(new o.k(f))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(s){if(this.video){const f=this.video.seekable;s<f.start(0)||s>f.end(0)?this.fire(new o.k(new o.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${f.start(0)} and ${f.end(0)}-second mark.`))):this.video.currentTime=s}}getVideo(){return this.video}onAdd(s){this.map||(this.map=s,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const s=this.map.painter.context,f=s.gl;this.texture?this.video.paused||(this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE),f.texSubImage2D(f.TEXTURE_2D,0,0,0,f.RGBA,f.UNSIGNED_BYTE,this.video)):(this.texture=new o.T(s,this.video,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));let _=!1;for(const w in this.tiles){const k=this.tiles[w];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture,_=!0)}_&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class On extends Wt{constructor(s,f,_,w){super(s,f,_,w),f.coordinates?Array.isArray(f.coordinates)&&f.coordinates.length===4&&!f.coordinates.some(k=>!Array.isArray(k)||k.length!==2||k.some(N=>typeof N!="number"))||this.fire(new o.k(new o.a6(`sources.${s}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.k(new o.a6(`sources.${s}`,null,'missing required property "coordinates"'))),f.animate&&typeof f.animate!="boolean"&&this.fire(new o.k(new o.a6(`sources.${s}`,null,'optional "animate" property must be a boolean value'))),f.canvas?typeof f.canvas=="string"||f.canvas instanceof HTMLCanvasElement||this.fire(new o.k(new o.a6(`sources.${s}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.k(new o.a6(`sources.${s}`,null,'missing required property "canvas"'))),this.options=f,this.animate=f.animate===void 0||f.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(s){this.map=s,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let s=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,s=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,s=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const f=this.map.painter.context,_=f.gl;this.texture?(s||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.T(f,this.canvas,_.RGBA,{premultiply:!0});let w=!1;for(const k in this.tiles){const N=this.tiles[k];N.state!=="loaded"&&(N.state="loaded",N.texture=this.texture,w=!0)}w&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const s of[this.canvas.width,this.canvas.height])if(isNaN(s)||s<=0)return!0;return!1}}const Bn={},In=I=>{switch(I){case"geojson":return Jn;case"image":return Wt;case"raster":return Kt;case"raster-dem":return on;case"vector":return qt;case"video":return $n;case"canvas":return On}return Bn[I]},Bi="RTLPluginLoaded";class ei extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Rt()}_syncState(s){return this.status=s,this.dispatcher.broadcast("SRPS",{pluginStatus:s,pluginURL:this.url}).catch(f=>{throw this.status="error",f})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(s){return o._(this,arguments,void 0,function*(f,_=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=U.resolveURL(f),!this.url)throw new Error(`requested url ${f} is invalid`);if(this.status==="unavailable"){if(!_)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.l(Bi))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Kn=null;function Ge(){return Kn||(Kn=new ei),Kn}class de{constructor(s,f){this.timeAdded=0,this.fadeEndTime=0,this.tileID=s,this.uid=o.a7(),this.uses=0,this.tileSize=f,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(s){const f=s+this.timeAdded;f<this.fadeEndTime||(this.fadeEndTime=f)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(s){this.demTexture&&s.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(s,f,_){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=function(w,k){const N={};if(!k)return N;for(const q of w){const J=q.layerIds.map(he=>k.getLayer(he)).filter(Boolean);if(J.length!==0){q.layers=J,q.stateDependentLayerIds&&(q.stateDependentLayers=q.stateDependentLayerIds.map(he=>J.filter(pe=>pe.id===he)[0]));for(const he of J)N[he.id]=q}}return N}(s.buckets,f?.style),this.hasSymbolBuckets=!1;for(const w in this.buckets){const k=this.buckets[w];if(k instanceof o.a9){if(this.hasSymbolBuckets=!0,!_)break;k.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const w in this.buckets){const k=this.buckets[w];if(k instanceof o.a9&&k.hasRTLText){this.hasRTLText=!0,Ge().lazyLoad();break}}this.queryPadding=0;for(const w in this.buckets){const k=this.buckets[w];this.queryPadding=Math.max(this.queryPadding,f.style.getLayer(w).queryRadius(k))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage)}else this.collisionBoxArray=new o.a8}unloadVectorData(){for(const s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(s){return this.buckets[s.id]}upload(s){for(const _ in this.buckets){const w=this.buckets[_];w.uploadPending()&&w.upload(s)}const f=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new o.T(s,this.imageAtlas.image,f.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new o.T(s,this.glyphAtlasImage,f.ALPHA),this.glyphAtlasImage=null)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,f,_,w,k,N,q,J,he,pe,Ee){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:w,cameraQueryGeometry:k,scale:N,tileSize:this.tileSize,pixelPosMatrix:pe,transform:J,params:q,queryPadding:this.queryPadding*he,getElevation:Ee},s,f,_):{}}querySourceFeatures(s,f){const _=this.latestFeatureIndex;if(!_||!_.rawTileData)return;const w=_.loadVTLayers(),k=f&&f.sourceLayer?f.sourceLayer:"",N=w._geojsonTileLayer||w[k];if(!N)return;const q=o.aa(f&&f.filter),{z:J,x:he,y:pe}=this.tileID.canonical,Ee={z:J,x:he,y:pe};for(let Se=0;Se<N.length;Se++){const Ue=N.feature(Se);if(q.needGeometry){const ct=o.ab(Ue,!0);if(!q.filter(new o.F(this.tileID.overscaledZ),ct,this.tileID.canonical))continue}else if(!q.filter(new o.F(this.tileID.overscaledZ),Ue))continue;const Xe=_.getId(Ue,k),At=new o.ac(Ue,J,he,pe,Xe);At.tile=Ee,s.push(At)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){const f=this.expirationTime;if(s.cacheControl){const _=o.ad(s.cacheControl);_["max-age"]&&(this.expirationTime=Date.now()+1e3*_["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){const _=Date.now();let w=!1;if(this.expirationTime>_)w=!1;else if(f)if(this.expirationTime<f)w=!0;else{const k=this.expirationTime-f;k?this.expirationTime=_+Math.max(k,3e4):w=!0}else w=!0;w?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(s,f){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(s).length===0)return;const _=this.latestFeatureIndex.loadVTLayers();for(const w in this.buckets){if(!f.style.hasLayer(w))continue;const k=this.buckets[w],N=k.layers[0].sourceLayer||"_geojsonTileLayer",q=_[N],J=s[N];if(!q||!J||Object.keys(J).length===0)continue;k.update(J,q,this.imageAtlas&&this.imageAtlas.patternPositions||{});const he=f&&f.style&&f.style.getLayer(w);he&&(this.queryPadding=Math.max(this.queryPadding,he.queryRadius(k)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<U.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(s){this.symbolFadeHoldUntil=U.now()+s}setDependencies(s,f){const _={};for(const w of f)_[w]=!0;this.dependencies[s]=_}hasDependency(s,f){for(const _ of s){const w=this.dependencies[_];if(w){for(const k of f)if(w[k])return!0}}return!1}}class re{constructor(s,f){this.max=s,this.onRemove=f,this.reset()}reset(){for(const s in this.data)for(const f of this.data[s])f.timeout&&clearTimeout(f.timeout),this.onRemove(f.value);return this.data={},this.order=[],this}add(s,f,_){const w=s.wrapped().key;this.data[w]===void 0&&(this.data[w]=[]);const k={value:f,timeout:void 0};if(_!==void 0&&(k.timeout=setTimeout(()=>{this.remove(s,k)},_)),this.data[w].push(k),this.order.push(w),this.order.length>this.max){const N=this._getAndRemoveByKey(this.order[0]);N&&this.onRemove(N)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){const f=this.data[s].shift();return f.timeout&&clearTimeout(f.timeout),this.data[s].length===0&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),f.value}getByKey(s){const f=this.data[s];return f?f[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,f){if(!this.has(s))return this;const _=s.wrapped().key,w=f===void 0?0:this.data[_].indexOf(f),k=this.data[_][w];return this.data[_].splice(w,1),k.timeout&&clearTimeout(k.timeout),this.data[_].length===0&&delete this.data[_],this.onRemove(k.value),this.order.splice(this.order.indexOf(_),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){const f=this._getAndRemoveByKey(this.order[0]);f&&this.onRemove(f)}return this}filter(s){const f=[];for(const _ in this.data)for(const w of this.data[_])s(w.value)||f.push(w);for(const _ of f)this.remove(_.value.tileID,_)}}class le{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,f,_){const w=String(f);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][w]=this.stateChanges[s][w]||{},o.e(this.stateChanges[s][w],_),this.deletedStates[s]===null){this.deletedStates[s]={};for(const k in this.state[s])k!==w&&(this.deletedStates[s][k]=null)}else if(this.deletedStates[s]&&this.deletedStates[s][w]===null){this.deletedStates[s][w]={};for(const k in this.state[s][w])_[k]||(this.deletedStates[s][w][k]=null)}else for(const k in _)this.deletedStates[s]&&this.deletedStates[s][w]&&this.deletedStates[s][w][k]===null&&delete this.deletedStates[s][w][k]}removeFeatureState(s,f,_){if(this.deletedStates[s]===null)return;const w=String(f);if(this.deletedStates[s]=this.deletedStates[s]||{},_&&f!==void 0)this.deletedStates[s][w]!==null&&(this.deletedStates[s][w]=this.deletedStates[s][w]||{},this.deletedStates[s][w][_]=null);else if(f!==void 0)if(this.stateChanges[s]&&this.stateChanges[s][w])for(_ in this.deletedStates[s][w]={},this.stateChanges[s][w])this.deletedStates[s][w][_]=null;else this.deletedStates[s][w]=null;else this.deletedStates[s]=null}getState(s,f){const _=String(f),w=o.e({},(this.state[s]||{})[_],(this.stateChanges[s]||{})[_]);if(this.deletedStates[s]===null)return{};if(this.deletedStates[s]){const k=this.deletedStates[s][f];if(k===null)return{};for(const N in k)delete w[N]}return w}initializeTileState(s,f){s.setFeatureState(this.state,f)}coalesceChanges(s,f){const _={};for(const w in this.stateChanges){this.state[w]=this.state[w]||{};const k={};for(const N in this.stateChanges[w])this.state[w][N]||(this.state[w][N]={}),o.e(this.state[w][N],this.stateChanges[w][N]),k[N]=this.state[w][N];_[w]=k}for(const w in this.deletedStates){this.state[w]=this.state[w]||{};const k={};if(this.deletedStates[w]===null)for(const N in this.state[w])k[N]={},this.state[w][N]={};else for(const N in this.deletedStates[w]){if(this.deletedStates[w][N]===null)this.state[w][N]={};else for(const q of Object.keys(this.deletedStates[w][N]))delete this.state[w][N][q];k[N]=this.state[w][N]}_[w]=_[w]||{},o.e(_[w],k)}if(this.stateChanges={},this.deletedStates={},Object.keys(_).length!==0)for(const w in s)s[w].setFeatureState(_,f)}}const me=89.25;function Te(I,s){const f=o.ah(s.lat,-o.ai,o.ai);return new o.P(o.V(s.lng)*I,o.U(f)*I)}function We(I,s){return new o.a1(s.x/I,s.y/I).toLngLat()}function dt(I){return I.cameraToCenterDistance*Math.min(.85*Math.tan(o.ae(90-I.pitch)),Math.tan(o.ae(me-I.pitch)))}function Ye(I,s){const f=I.canonical,_=s/o.af(f.z),w=f.x+Math.pow(2,f.z)*I.wrap,k=o.ag(new Float64Array(16));return o.M(k,k,[w*_,f.y*_,0]),o.N(k,k,[_/o.$,_/o.$,1]),k}function De(I,s,f,_,w){const k=o.a1.fromLngLat(I,s),N=w*o.aj(1,I.lat),q=N*Math.cos(o.ae(f)),J=Math.sqrt(N*N-q*q),he=J*Math.sin(o.ae(-_)),pe=J*Math.cos(o.ae(-_));return new o.a1(k.x+he,k.y+pe,k.z+q)}function Ze(I,s,f){const _=s.intersectsFrustum(I);if(!f||_===0)return _;const w=s.intersectsPlane(f);return w===0?0:_===2&&w===2?2:1}function g(I,s,f){let _=0;const w=(f-s)/10;for(let k=0;k<10;k++)_+=w*Math.pow(Math.cos(s+(k+.5)/10*(f-s)),I);return _}function gt(I,s){return function(f,_,w,k,N){const q=2*((I-1)/o.ak(Math.cos(o.ae(me-N))/Math.cos(o.ae(me)))-1),J=Math.acos(w/k),he=2*g(q-1,0,o.ae(N/2)),pe=Math.min(o.ae(me),J+o.ae(N/2)),Ee=g(q-1,Math.min(pe,J-o.ae(N/2)),pe),Se=Math.atan(_/w),Ue=Math.hypot(_,w);let Xe=f;return Xe+=o.ak(k/Ue/Math.max(.5,Math.cos(o.ae(N/2)))),Xe+=q*o.ak(Math.cos(Se))/2,Xe-=o.ak(Math.max(1,Ee/he/s))/2,Xe}}const ht=gt(9.314,3);function kt(I,s){const f=(s.roundZoom?Math.round:Math.floor)(I.zoom+o.ak(I.tileSize/s.tileSize));return Math.max(0,f)}function it(I,s){const f=I.getCameraFrustum(),_=I.getClippingPlane(),w=I.screenPointToMercatorCoordinate(I.getCameraPoint()),k=o.a1.fromLngLat(I.center,I.elevation);w.z=k.z+Math.cos(I.pitchInRadians)*I.cameraToCenterDistance/I.worldSize;const N=I.getCoveringTilesDetailsProvider(),q=N.allowVariableZoom(I,s),J=kt(I,s),he=s.minzoom||0,pe=s.maxzoom!==void 0?s.maxzoom:I.maxZoom,Ee=Math.min(Math.max(0,J),pe),Se=Math.pow(2,Ee),Ue=[Se*w.x,Se*w.y,0],Xe=[Se*k.x,Se*k.y,0],At=Math.hypot(k.x-w.x,k.y-w.y),ct=Math.abs(k.z-w.z),ft=Math.hypot(At,ct),xt=Pt=>({zoom:0,x:0,y:0,wrap:Pt,fullyVisible:!1}),Ct=[],wt=[];if(I.renderWorldCopies&&N.allowWorldCopies())for(let Pt=1;Pt<=3;Pt++)Ct.push(xt(-Pt)),Ct.push(xt(Pt));for(Ct.push(xt(0));Ct.length>0;){const Pt=Ct.pop(),Lt=Pt.x,Bt=Pt.y;let Yt=Pt.fullyVisible;const dn={x:Lt,y:Bt,z:Pt.zoom},Xt=N.getTileBoundingVolume(dn,Pt.wrap,I.elevation,s);if(!Yt){const Qn=Ze(f,Xt,_);if(Qn===0)continue;Yt=Qn===2}const nn=N.distanceToTile2d(w.x,w.y,dn,Xt);let An=J;q&&(An=(s.calculateTileZoom||ht)(I.zoom+o.ak(I.tileSize/s.tileSize),nn,ct,ft,I.fov)),An=(s.roundZoom?Math.round:Math.floor)(An),An=Math.max(0,An);const qn=Math.min(An,pe);if(Pt.wrap=N.getWrap(k,dn,Pt.wrap),Pt.zoom>=qn){if(Pt.zoom<he)continue;const Qn=Ee-Pt.zoom,Tn=Ue[0]-.5-(Lt<<Qn),bi=Ue[1]-.5-(Bt<<Qn),cr=s.reparseOverscaled?Math.max(Pt.zoom,An):Pt.zoom;wt.push({tileID:new o.Z(Pt.zoom===pe?cr:Pt.zoom,Pt.wrap,Pt.zoom,Lt,Bt),distanceSq:o.al([Xe[0]-.5-Lt,Xe[1]-.5-Bt]),tileDistanceToCamera:Math.sqrt(Tn*Tn+bi*bi)})}else for(let Qn=0;Qn<4;Qn++)Ct.push({zoom:Pt.zoom+1,x:(Lt<<1)+Qn%2,y:(Bt<<1)+(Qn>>1),wrap:Pt.wrap,fullyVisible:Yt})}return wt.sort((Pt,Lt)=>Pt.distanceSq-Lt.distanceSq).map(Pt=>Pt.tileID)}const en=o.a2.fromPoints([new o.P(0,0),new o.P(o.$,o.$)]);class Dn extends o.E{constructor(s,f,_){super(),this.id=s,this.dispatcher=_,this.on("data",w=>this._dataHandler(w)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((w,k,N,q)=>{const J=new(In(k.type))(w,k,N,q);if(J.id!==w)throw new Error(`Expected Source id to be ${w} instead of ${J.id}`);return J})(s,f,_,this),this._tiles={},this._cache=new re(0,w=>this._unloadTile(w)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new le,this._didEmitContent=!1,this._updated=!1}onAdd(s){this.map=s,this._maxTileCacheSize=s?s._maxTileCacheSize:null,this._maxTileCacheZoomLevels=s?s._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(s)}onRemove(s){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(s)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const s in this._tiles){const f=this._tiles[s];if(f.state!=="loaded"&&f.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(s,f,_){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(s),this._tileLoaded(s,f,_)}catch(w){s.state="errored",w.status!==404?this._source.fire(new o.k(w,{tile:s})):this.update(this.transform,this.terrain)}})}_unloadTile(s){this._source.unloadTile&&this._source.unloadTile(s)}_abortTile(s){this._source.abortTile&&this._source.abortTile(s),this._source.fire(new o.l("dataabort",{tile:s,coord:s.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const f in this._tiles){const _=this._tiles[f];_.upload(s),_.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(s=>s.tileID).sort(Mn).map(s=>s.key)}getRenderableIds(s){const f=[];for(const _ in this._tiles)this._isIdRenderable(_,s)&&f.push(this._tiles[_]);return s?f.sort((_,w)=>{const k=_.tileID,N=w.tileID,q=new o.P(k.canonical.x,k.canonical.y)._rotate(-this.transform.bearingInRadians),J=new o.P(N.canonical.x,N.canonical.y)._rotate(-this.transform.bearingInRadians);return k.overscaledZ-N.overscaledZ||J.y-q.y||J.x-q.x}).map(_=>_.tileID.key):f.map(_=>_.tileID).sort(Mn).map(_=>_.key)}hasRenderableParent(s){const f=this.findLoadedParent(s,0);return!!f&&this._isIdRenderable(f.tileID.key)}_isIdRenderable(s,f){return this._tiles[s]&&this._tiles[s].hasData()&&!this._coveredTiles[s]&&(f||!this._tiles[s].holdingForFade())}reload(s){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const f in this._tiles)s?this._reloadTile(f,"expired"):this._tiles[f].state!=="errored"&&this._reloadTile(f,"reloading")}}_reloadTile(s,f){return o._(this,void 0,void 0,function*(){const _=this._tiles[s];_&&(_.state!=="loading"&&(_.state=f),yield this._loadTile(_,s,f))})}_tileLoaded(s,f,_){s.timeAdded=U.now(),_==="expired"&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(f,s),this.getSource().type==="raster-dem"&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),s.aborted||this._source.fire(new o.l("data",{dataType:"source",tile:s,coord:s.tileID}))}_backfillDEM(s){const f=this.getRenderableIds();for(let w=0;w<f.length;w++){const k=f[w];if(s.neighboringTiles&&s.neighboringTiles[k]){const N=this.getTileByID(k);_(s,N),_(N,s)}}function _(w,k){w.needsHillshadePrepare=!0,w.needsTerrainPrepare=!0;let N=k.tileID.canonical.x-w.tileID.canonical.x;const q=k.tileID.canonical.y-w.tileID.canonical.y,J=Math.pow(2,w.tileID.canonical.z),he=k.tileID.key;N===0&&q===0||Math.abs(q)>1||(Math.abs(N)>1&&(Math.abs(N+J)===1?N+=J:Math.abs(N-J)===1&&(N-=J)),k.dem&&w.dem&&(w.dem.backfillBorder(k.dem,N,q),w.neighboringTiles&&w.neighboringTiles[he]&&(w.neighboringTiles[he].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,f,_,w){for(const k in this._tiles){let N=this._tiles[k];if(w[k]||!N.hasData()||N.tileID.overscaledZ<=f||N.tileID.overscaledZ>_)continue;let q=N.tileID;for(;N&&N.tileID.overscaledZ>f+1;){const he=N.tileID.scaledTo(N.tileID.overscaledZ-1);N=this._tiles[he.key],N&&N.hasData()&&(q=he)}let J=q;for(;J.overscaledZ>f;)if(J=J.scaledTo(J.overscaledZ-1),s[J.key]||s[J.canonical.key]){w[q.key]=q;break}}}findLoadedParent(s,f){if(s.key in this._loadedParentTiles){const _=this._loadedParentTiles[s.key];return _&&_.tileID.overscaledZ>=f?_:null}for(let _=s.overscaledZ-1;_>=f;_--){const w=s.scaledTo(_),k=this._getLoadedTile(w);if(k)return k}}findLoadedSibling(s){return this._getLoadedTile(s)}_getLoadedTile(s){const f=this._tiles[s.key];return f&&f.hasData()?f:this._cache.getByKey(s.wrapped().key)}updateCacheSize(s){const f=Math.ceil(s.width/this._source.tileSize)+1,_=Math.ceil(s.height/this._source.tileSize)+1,w=Math.floor(f*_*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),k=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(k)}handleWrapJump(s){const f=Math.round((s-(this._prevLng===void 0?s:this._prevLng))/360);if(this._prevLng=s,f){const _={};for(const w in this._tiles){const k=this._tiles[w];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+f),_[k.tileID.key]=k}this._tiles=_;for(const w in this._timers)clearTimeout(this._timers[w]),delete this._timers[w];for(const w in this._tiles)this._setTileReloadTimer(w,this._tiles[w])}}_updateCoveredAndRetainedTiles(s,f,_,w,k,N){const q={},J={},he=Object.keys(s),pe=U.now();for(const Ee of he){const Se=s[Ee],Ue=this._tiles[Ee];if(!Ue||Ue.fadeEndTime!==0&&Ue.fadeEndTime<=pe)continue;const Xe=this.findLoadedParent(Se,f),At=this.findLoadedSibling(Se),ct=Xe||At||null;ct&&(this._addTile(ct.tileID),q[ct.tileID.key]=ct.tileID),J[Ee]=Se}this._retainLoadedChildren(J,w,_,s);for(const Ee in q)s[Ee]||(this._coveredTiles[Ee]=!0,s[Ee]=q[Ee]);if(N){const Ee={},Se={};for(const Ue of k)this._tiles[Ue.key].hasData()?Ee[Ue.key]=Ue:Se[Ue.key]=Ue;for(const Ue in Se){const Xe=Se[Ue].children(this._source.maxzoom);this._tiles[Xe[0].key]&&this._tiles[Xe[1].key]&&this._tiles[Xe[2].key]&&this._tiles[Xe[3].key]&&(Ee[Xe[0].key]=s[Xe[0].key]=Xe[0],Ee[Xe[1].key]=s[Xe[1].key]=Xe[1],Ee[Xe[2].key]=s[Xe[2].key]=Xe[2],Ee[Xe[3].key]=s[Xe[3].key]=Xe[3],delete Se[Ue])}for(const Ue in Se){const Xe=Se[Ue],At=this.findLoadedParent(Xe,this._source.minzoom),ct=this.findLoadedSibling(Xe),ft=At||ct||null;if(ft){Ee[ft.tileID.key]=s[ft.tileID.key]=ft.tileID;for(const xt in Ee)Ee[xt].isChildOf(ft.tileID)&&delete Ee[xt]}}for(const Ue in this._tiles)Ee[Ue]||(this._coveredTiles[Ue]=!0)}}update(s,f){if(!this._sourceLoaded||this._paused)return;let _;this.transform=s,this.terrain=f,this.updateCacheSize(s),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?_=s.getVisibleUnwrappedCoordinates(this._source.tileID).map(pe=>new o.Z(pe.canonical.z,pe.wrap,pe.canonical.z,pe.canonical.x,pe.canonical.y)):(_=it(s,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:f,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(_=_.filter(pe=>this._source.hasTile(pe)))):_=[];const w=kt(s,this._source),k=Math.max(w-Dn.maxOverzooming,this._source.minzoom),N=Math.max(w+Dn.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const pe={};for(const Ee of _)if(Ee.canonical.z>this._source.minzoom){const Se=Ee.scaledTo(Ee.canonical.z-1);pe[Se.key]=Se;const Ue=Ee.scaledTo(Math.max(this._source.minzoom,Math.min(Ee.canonical.z,5)));pe[Ue.key]=Ue}_=_.concat(Object.values(pe))}const q=_.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,q&&this.fire(new o.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const J=this._updateRetainedTiles(_,w);ii(this._source.type)&&this._updateCoveredAndRetainedTiles(J,k,N,w,_,f);for(const pe in J)this._tiles[pe].clearFadeHold();const he=o.am(this._tiles,J);for(const pe of he){const Ee=this._tiles[pe];Ee.hasSymbolBuckets&&!Ee.holdingForFade()?Ee.setHoldDuration(this.map._fadeDuration):Ee.hasSymbolBuckets&&!Ee.symbolFadeFinished()||this._removeTile(pe)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const s in this._tiles)this._tiles[s].holdingForFade()&&this._removeTile(s)}_updateRetainedTiles(s,f){var _;const w={},k={},N=Math.max(f-Dn.maxOverzooming,this._source.minzoom),q=Math.max(f+Dn.maxUnderzooming,this._source.minzoom),J={};for(const he of s){const pe=this._addTile(he);w[he.key]=he,pe.hasData()||f<this._source.maxzoom&&(J[he.key]=he)}this._retainLoadedChildren(J,f,q,w);for(const he of s){let pe=this._tiles[he.key];if(pe.hasData())continue;if(f+1>this._source.maxzoom){const Se=he.children(this._source.maxzoom)[0],Ue=this.getTile(Se);if(Ue&&Ue.hasData()){w[Se.key]=Se;continue}}else{const Se=he.children(this._source.maxzoom);if(w[Se[0].key]&&w[Se[1].key]&&w[Se[2].key]&&w[Se[3].key])continue}let Ee=pe.wasRequested();for(let Se=he.overscaledZ-1;Se>=N;--Se){const Ue=he.scaledTo(Se);if(k[Ue.key])break;if(k[Ue.key]=!0,pe=this.getTile(Ue),!pe&&Ee&&(pe=this._addTile(Ue)),pe){const Xe=pe.hasData();if((Xe||!(!((_=this.map)===null||_===void 0)&&_.cancelPendingTileRequestsWhileZooming)||Ee)&&(w[Ue.key]=Ue),Ee=pe.wasRequested(),Xe)break}}}return w}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const s in this._tiles){const f=[];let _,w=this._tiles[s].tileID;for(;w.overscaledZ>0;){if(w.key in this._loadedParentTiles){_=this._loadedParentTiles[w.key];break}f.push(w.key);const k=w.scaledTo(w.overscaledZ-1);if(_=this._getLoadedTile(k),_)break;w=k}for(const k of f)this._loadedParentTiles[k]=_}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const s in this._tiles){const f=this._tiles[s].tileID,_=this._getLoadedTile(f);this._loadedSiblingTiles[f.key]=_}}_addTile(s){let f=this._tiles[s.key];if(f)return f;f=this._cache.getAndRemove(s),f&&(this._setTileReloadTimer(s.key,f),f.tileID=s,this._state.initializeTileState(f,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,f)));const _=f;return f||(f=new de(s,this._source.tileSize*s.overscaleFactor()),this._loadTile(f,s.key,f.state)),f.uses++,this._tiles[s.key]=f,_||this._source.fire(new o.l("dataloading",{tile:f,coord:f.tileID,dataType:"source"})),f}_setTileReloadTimer(s,f){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);const _=f.getExpiryTimeout();_&&(this._timers[s]=setTimeout(()=>{this._reloadTile(s,"expired"),delete this._timers[s]},_))}refreshTiles(s){for(const f in this._tiles)(this._isIdRenderable(f)||this._tiles[f].state=="errored")&&s.some(_=>_.equals(this._tiles[f].tileID.canonical))&&this._reloadTile(f,"expired")}_removeTile(s){const f=this._tiles[s];f&&(f.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),f.uses>0||(f.hasData()&&f.state!=="reloading"?this._cache.add(f.tileID,f,f.getExpiryTimeout()):(f.aborted=!0,this._abortTile(f),this._unloadTile(f))))}_dataHandler(s){const f=s.sourceDataType;s.dataType==="source"&&f==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&s.dataType==="source"&&f==="content"&&(this.reload(s.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const s in this._tiles)this._removeTile(s);this._cache.reset()}tilesIn(s,f,_){const w=[],k=this.transform;if(!k)return w;const N=k.getCoveringTilesDetailsProvider().allowWorldCopies(),q=_?k.getCameraQueryGeometry(s):s,J=Ue=>k.screenPointToMercatorCoordinate(Ue,this.terrain),he=this.transformBbox(s,J,!N),pe=this.transformBbox(q,J,!N),Ee=this.getIds(),Se=o.a2.fromPoints(pe);for(let Ue=0;Ue<Ee.length;Ue++){const Xe=this._tiles[Ee[Ue]];if(Xe.holdingForFade())continue;const At=N?[Xe.tileID]:[Xe.tileID.unwrapTo(-1),Xe.tileID.unwrapTo(0)],ct=Math.pow(2,k.zoom-Xe.tileID.overscaledZ),ft=f*Xe.queryPadding*o.$/Xe.tileSize/ct;for(const xt of At){const Ct=Se.map(wt=>xt.getTilePoint(new o.a1(wt.x,wt.y)));if(Ct.expandBy(ft),Ct.intersects(en)){const wt=he.map(Lt=>xt.getTilePoint(Lt)),Pt=pe.map(Lt=>xt.getTilePoint(Lt));w.push({tile:Xe,tileID:N?xt:xt.unwrapTo(0),queryGeometry:wt,cameraQueryGeometry:Pt,scale:ct})}}}return w}transformBbox(s,f,_){let w=s.map(f);if(_){const k=o.a2.fromPoints(s);k.shrinkBy(.001*Math.min(k.width(),k.height()));const N=k.map(f);o.a2.fromPoints(w).covers(N)||(w=w.map(q=>q.x>.5?new o.a1(q.x-1,q.y,q.z):q))}return w}getVisibleCoordinates(s){const f=this.getRenderableIds(s).map(_=>this._tiles[_].tileID);return this.transform&&this.transform.populateCache(f),f}hasTransition(){if(this._source.hasTransition())return!0;if(ii(this._source.type)){const s=U.now();for(const f in this._tiles)if(this._tiles[f].fadeEndTime>=s)return!0}return!1}setFeatureState(s,f,_){this._state.updateState(s=s||"_geojsonTileLayer",f,_)}removeFeatureState(s,f,_){this._state.removeFeatureState(s=s||"_geojsonTileLayer",f,_)}getFeatureState(s,f){return this._state.getState(s=s||"_geojsonTileLayer",f)}setDependencies(s,f,_){const w=this._tiles[s];w&&w.setDependencies(f,_)}reloadTilesForDependencies(s,f){for(const _ in this._tiles)this._tiles[_].hasDependency(s,f)&&this._reloadTile(_,"reloading");this._cache.filter(_=>!_.hasDependency(s,f))}}function Mn(I,s){const f=Math.abs(2*I.wrap)-+(I.wrap<0),_=Math.abs(2*s.wrap)-+(s.wrap<0);return I.overscaledZ-s.overscaledZ||_-f||s.canonical.y-I.canonical.y||s.canonical.x-I.canonical.x}function ii(I){return I==="raster"||I==="image"||I==="video"}Dn.maxOverzooming=10,Dn.maxUnderzooming=3;class Wn{constructor(s,f){this.reset(s,f)}reset(s,f){this.points=s||[],this._distances=[0];for(let _=1;_<this.points.length;_++)this._distances[_]=this._distances[_-1]+this.points[_].dist(this.points[_-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(f||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=o.ah(s,0,1);let f=1,_=this._distances[f];const w=s*this.paddedLength+this.padding;for(;_<w&&f<this._distances.length;)_=this._distances[++f];const k=f-1,N=this._distances[k],q=_-N,J=q>0?(w-N)/q:0;return this.points[k].mult(1-J).add(this.points[f].mult(J))}}function qi(I,s){let f=!0;return I==="always"||I!=="never"&&s!=="never"||(f=!1),f}class er{constructor(s,f,_){const w=this.boxCells=[],k=this.circleCells=[];this.xCellCount=Math.ceil(s/_),this.yCellCount=Math.ceil(f/_);for(let N=0;N<this.xCellCount*this.yCellCount;N++)w.push([]),k.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=f,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,f,_,w,k){this._forEachCell(f,_,w,k,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(f),this.bboxes.push(_),this.bboxes.push(w),this.bboxes.push(k)}insertCircle(s,f,_,w){this._forEachCell(f-w,_-w,f+w,_+w,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(f),this.circles.push(_),this.circles.push(w)}_insertBoxCell(s,f,_,w,k,N){this.boxCells[k].push(N)}_insertCircleCell(s,f,_,w,k,N){this.circleCells[k].push(N)}_query(s,f,_,w,k,N,q){if(_<0||s>this.width||w<0||f>this.height)return[];const J=[];if(s<=0&&f<=0&&this.width<=_&&this.height<=w){if(k)return[{key:null,x1:s,y1:f,x2:_,y2:w}];for(let he=0;he<this.boxKeys.length;he++)J.push({key:this.boxKeys[he],x1:this.bboxes[4*he],y1:this.bboxes[4*he+1],x2:this.bboxes[4*he+2],y2:this.bboxes[4*he+3]});for(let he=0;he<this.circleKeys.length;he++){const pe=this.circles[3*he],Ee=this.circles[3*he+1],Se=this.circles[3*he+2];J.push({key:this.circleKeys[he],x1:pe-Se,y1:Ee-Se,x2:pe+Se,y2:Ee+Se})}}else this._forEachCell(s,f,_,w,this._queryCell,J,{hitTest:k,overlapMode:N,seenUids:{box:{},circle:{}}},q);return J}query(s,f,_,w){return this._query(s,f,_,w,!1,null)}hitTest(s,f,_,w,k,N){return this._query(s,f,_,w,!0,k,N).length>0}hitTestCircle(s,f,_,w,k){const N=s-_,q=s+_,J=f-_,he=f+_;if(q<0||N>this.width||he<0||J>this.height)return!1;const pe=[];return this._forEachCell(N,J,q,he,this._queryCellCircle,pe,{hitTest:!0,overlapMode:w,circle:{x:s,y:f,radius:_},seenUids:{box:{},circle:{}}},k),pe.length>0}_queryCell(s,f,_,w,k,N,q,J){const{seenUids:he,hitTest:pe,overlapMode:Ee}=q,Se=this.boxCells[k];if(Se!==null){const Xe=this.bboxes;for(const At of Se)if(!he.box[At]){he.box[At]=!0;const ct=4*At,ft=this.boxKeys[At];if(s<=Xe[ct+2]&&f<=Xe[ct+3]&&_>=Xe[ct+0]&&w>=Xe[ct+1]&&(!J||J(ft))&&(!pe||!qi(Ee,ft.overlapMode))&&(N.push({key:ft,x1:Xe[ct],y1:Xe[ct+1],x2:Xe[ct+2],y2:Xe[ct+3]}),pe))return!0}}const Ue=this.circleCells[k];if(Ue!==null){const Xe=this.circles;for(const At of Ue)if(!he.circle[At]){he.circle[At]=!0;const ct=3*At,ft=this.circleKeys[At];if(this._circleAndRectCollide(Xe[ct],Xe[ct+1],Xe[ct+2],s,f,_,w)&&(!J||J(ft))&&(!pe||!qi(Ee,ft.overlapMode))){const xt=Xe[ct],Ct=Xe[ct+1],wt=Xe[ct+2];if(N.push({key:ft,x1:xt-wt,y1:Ct-wt,x2:xt+wt,y2:Ct+wt}),pe)return!0}}}return!1}_queryCellCircle(s,f,_,w,k,N,q,J){const{circle:he,seenUids:pe,overlapMode:Ee}=q,Se=this.boxCells[k];if(Se!==null){const Xe=this.bboxes;for(const At of Se)if(!pe.box[At]){pe.box[At]=!0;const ct=4*At,ft=this.boxKeys[At];if(this._circleAndRectCollide(he.x,he.y,he.radius,Xe[ct+0],Xe[ct+1],Xe[ct+2],Xe[ct+3])&&(!J||J(ft))&&!qi(Ee,ft.overlapMode))return N.push(!0),!0}}const Ue=this.circleCells[k];if(Ue!==null){const Xe=this.circles;for(const At of Ue)if(!pe.circle[At]){pe.circle[At]=!0;const ct=3*At,ft=this.circleKeys[At];if(this._circlesCollide(Xe[ct],Xe[ct+1],Xe[ct+2],he.x,he.y,he.radius)&&(!J||J(ft))&&!qi(Ee,ft.overlapMode))return N.push(!0),!0}}}_forEachCell(s,f,_,w,k,N,q,J){const he=this._convertToXCellCoord(s),pe=this._convertToYCellCoord(f),Ee=this._convertToXCellCoord(_),Se=this._convertToYCellCoord(w);for(let Ue=he;Ue<=Ee;Ue++)for(let Xe=pe;Xe<=Se;Xe++)if(k.call(this,s,f,_,w,this.xCellCount*Xe+Ue,N,q,J))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,f,_,w,k,N){const q=w-s,J=k-f,he=_+N;return he*he>q*q+J*J}_circleAndRectCollide(s,f,_,w,k,N,q){const J=(N-w)/2,he=Math.abs(s-(w+J));if(he>J+_)return!1;const pe=(q-k)/2,Ee=Math.abs(f-(k+pe));if(Ee>pe+_)return!1;if(he<=J||Ee<=pe)return!0;const Se=he-J,Ue=Ee-pe;return Se*Se+Ue*Ue<=_*_}}function wi(I,s,f){const _=o.L();if(!I){const{vecSouth:Ee,vecEast:Se}=ti(s),Ue=C();Ue[0]=Se[0],Ue[1]=Se[1],Ue[2]=Ee[0],Ue[3]=Ee[1],w=Ue,(pe=(N=(k=Ue)[0])*(he=k[3])-(J=k[2])*(q=k[1]))&&(w[0]=he*(pe=1/pe),w[1]=-q*pe,w[2]=-J*pe,w[3]=N*pe),_[0]=Ue[0],_[1]=Ue[1],_[4]=Ue[2],_[5]=Ue[3]}var w,k,N,q,J,he,pe;return o.N(_,_,[1/f,1/f,1]),_}function hi(I,s,f,_){if(I){const w=o.L();if(!s){const{vecSouth:k,vecEast:N}=ti(f);w[0]=N[0],w[1]=N[1],w[4]=k[0],w[5]=k[1]}return o.N(w,w,[_,_,1]),w}return f.pixelsToClipSpaceMatrix}function ti(I){const s=Math.cos(I.rollInRadians),f=Math.sin(I.rollInRadians),_=Math.cos(I.pitchInRadians),w=Math.cos(I.bearingInRadians),k=Math.sin(I.bearingInRadians),N=o.ar();N[0]=-w*_*f-k*s,N[1]=-k*_*f+w*s;const q=o.as(N);q<1e-9?o.at(N):o.au(N,N,1/q);const J=o.ar();J[0]=w*_*s-k*f,J[1]=k*_*s+w*f;const he=o.as(J);return he<1e-9?o.at(J):o.au(J,J,1/he),{vecEast:J,vecSouth:N}}function Wi(I,s,f,_){let w;_?(w=[I,s,_(I,s),1],o.aw(w,w,f)):(w=[I,s,0,1],Ol(w,w,f));const k=w[3];return{point:new o.P(w[0]/k,w[1]/k),signedDistanceFromCamera:k,isOccluded:!1}}function Sn(I,s){return .5+I/s*.5}function lo(I,s){return I.x>=-s[0]&&I.x<=s[0]&&I.y>=-s[1]&&I.y<=s[1]}function Hi(I,s,f,_,w,k,N,q,J,he,pe,Ee,Se){const Ue=f?I.textSizeData:I.iconSizeData,Xe=o.an(Ue,s.transform.zoom),At=[256/s.width*2+1,256/s.height*2+1],ct=f?I.text.dynamicLayoutVertexArray:I.icon.dynamicLayoutVertexArray;ct.clear();const ft=I.lineVertexArray,xt=f?I.text.placedSymbolArray:I.icon.placedSymbolArray,Ct=s.transform.width/s.transform.height;let wt=!1;for(let Pt=0;Pt<xt.length;Pt++){const Lt=xt.get(Pt);if(Lt.hidden||Lt.writingMode===o.ao.vertical&&!wt){$a(Lt.numGlyphs,ct);continue}wt=!1;const Bt=new o.P(Lt.anchorX,Lt.anchorY),Yt={getElevation:Se,pitchedLabelPlaneMatrix:_,lineVertexArray:ft,pitchWithMap:k,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:s.transform,tileAnchorPoint:Bt,unwrappedTileID:J,width:he,height:pe,translation:Ee},dn=Ir(Lt.anchorX,Lt.anchorY,Yt);if(!lo(dn.point,At)){$a(Lt.numGlyphs,ct);continue}const Xt=Sn(s.transform.cameraToCenterDistance,dn.signedDistanceFromCamera),nn=o.ap(Ue,Xe,Lt),An=k?nn*s.transform.getPitchedTextCorrection(Lt.anchorX,Lt.anchorY,J)/Xt:nn*Xt,qn=Zn({projectionContext:Yt,pitchedLabelPlaneMatrixInverse:w,symbol:Lt,fontSize:An,flip:!1,keepUpright:N,glyphOffsetArray:I.glyphOffsetArray,dynamicLayoutVertexArray:ct,aspectRatio:Ct,rotateToLine:q});wt=qn.useVertical,(qn.notEnoughRoom||wt||qn.needsFlipping&&Zn({projectionContext:Yt,pitchedLabelPlaneMatrixInverse:w,symbol:Lt,fontSize:An,flip:!0,keepUpright:N,glyphOffsetArray:I.glyphOffsetArray,dynamicLayoutVertexArray:ct,aspectRatio:Ct,rotateToLine:q}).notEnoughRoom)&&$a(Lt.numGlyphs,ct)}f?I.text.dynamicLayoutVertexBuffer.updateData(ct):I.icon.dynamicLayoutVertexBuffer.updateData(ct)}function pa(I,s,f,_,w,k,N,q){const J=k.glyphStartIndex+k.numGlyphs,he=k.lineStartIndex,pe=k.lineStartIndex+k.lineLength,Ee=s.getoffsetX(k.glyphStartIndex),Se=s.getoffsetX(J-1),Ue=Ta(I*Ee,f,_,w,k.segment,he,pe,q,N);if(!Ue)return null;const Xe=Ta(I*Se,f,_,w,k.segment,he,pe,q,N);return Xe?q.projectionCache.anyProjectionOccluded?null:{first:Ue,last:Xe}:null}function To(I,s,f,_){return I===o.ao.horizontal&&Math.abs(f.y-s.y)>Math.abs(f.x-s.x)*_?{useVertical:!0}:(I===o.ao.vertical?s.y<f.y:s.x>f.x)?{needsFlipping:!0}:null}function Zn(I){const{projectionContext:s,pitchedLabelPlaneMatrixInverse:f,symbol:_,fontSize:w,flip:k,keepUpright:N,glyphOffsetArray:q,dynamicLayoutVertexArray:J,aspectRatio:he,rotateToLine:pe}=I,Ee=w/24,Se=_.lineOffsetX*Ee,Ue=_.lineOffsetY*Ee;let Xe;if(_.numGlyphs>1){const At=_.glyphStartIndex+_.numGlyphs,ct=_.lineStartIndex,ft=_.lineStartIndex+_.lineLength,xt=pa(Ee,q,Se,Ue,k,_,pe,s);if(!xt)return{notEnoughRoom:!0};const Ct=La(xt.first.point.x,xt.first.point.y,s,f),wt=La(xt.last.point.x,xt.last.point.y,s,f);if(N&&!k){const Pt=To(_.writingMode,Ct,wt,he);if(Pt)return Pt}Xe=[xt.first];for(let Pt=_.glyphStartIndex+1;Pt<At-1;Pt++){const Lt=Ta(Ee*q.getoffsetX(Pt),Se,Ue,k,_.segment,ct,ft,s,pe);if(!Lt)return{notEnoughRoom:!0};Xe.push(Lt)}Xe.push(xt.last)}else{if(N&&!k){const ct=vr(s.tileAnchorPoint.x,s.tileAnchorPoint.y,s).point,ft=_.lineStartIndex+_.segment+1,xt=new o.P(s.lineVertexArray.getx(ft),s.lineVertexArray.gety(ft)),Ct=vr(xt.x,xt.y,s),wt=Ct.signedDistanceFromCamera>0?Ct.point:lr(s.tileAnchorPoint,xt,ct,1,s),Pt=La(ct.x,ct.y,s,f),Lt=La(wt.x,wt.y,s,f),Bt=To(_.writingMode,Pt,Lt,he);if(Bt)return Bt}const At=Ta(Ee*q.getoffsetX(_.glyphStartIndex),Se,Ue,k,_.segment,_.lineStartIndex,_.lineStartIndex+_.lineLength,s,pe);if(!At||s.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Xe=[At]}for(const At of Xe)o.av(J,At.point,At.angle);return{}}function lr(I,s,f,_,w){const k=I.add(I.sub(s)._unit()),N=vr(k.x,k.y,w).point,q=f.sub(N);return f.add(q._mult(_/q.mag()))}function zi(I,s,f){const _=s.projectionCache;if(_.projections[I])return _.projections[I];const w=new o.P(s.lineVertexArray.getx(I),s.lineVertexArray.gety(I)),k=vr(w.x,w.y,s);if(k.signedDistanceFromCamera>0)return _.projections[I]=k.point,_.anyProjectionOccluded=_.anyProjectionOccluded||k.isOccluded,k.point;const N=I-f.direction;return lr(f.distanceFromAnchor===0?s.tileAnchorPoint:new o.P(s.lineVertexArray.getx(N),s.lineVertexArray.gety(N)),w,f.previousVertex,f.absOffsetX-f.distanceFromAnchor+1,s)}function vr(I,s,f){const _=I+f.translation[0],w=s+f.translation[1];let k;return f.pitchWithMap?(k=Wi(_,w,f.pitchedLabelPlaneMatrix,f.getElevation),k.isOccluded=!1):(k=f.transform.projectTileCoordinates(_,w,f.unwrappedTileID,f.getElevation),k.point.x=(.5*k.point.x+.5)*f.width,k.point.y=(.5*-k.point.y+.5)*f.height),k}function La(I,s,f,_){if(f.pitchWithMap){const w=[I,s,0,1];return o.aw(w,w,_),f.transform.projectTileCoordinates(w[0]/w[3],w[1]/w[3],f.unwrappedTileID,f.getElevation).point}return{x:I/f.width*2-1,y:1-s/f.height*2}}function Ir(I,s,f){return f.transform.projectTileCoordinates(I,s,f.unwrappedTileID,f.getElevation)}function Ni(I,s,f){return I._unit()._perp()._mult(s*f)}function gl(I,s,f,_,w,k,N,q,J){if(q.projectionCache.offsets[I])return q.projectionCache.offsets[I];const he=f.add(s);if(I+J.direction<_||I+J.direction>=w)return q.projectionCache.offsets[I]=he,he;const pe=zi(I+J.direction,q,J),Ee=Ni(pe.sub(f),N,J.direction),Se=f.add(Ee),Ue=pe.add(Ee);return q.projectionCache.offsets[I]=o.ax(k,he,Se,Ue)||he,q.projectionCache.offsets[I]}function Ta(I,s,f,_,w,k,N,q,J){const he=_?I-s:I+s;let pe=he>0?1:-1,Ee=0;_&&(pe*=-1,Ee=Math.PI),pe<0&&(Ee+=Math.PI);let Se,Ue=pe>0?k+w:k+w+1;q.projectionCache.cachedAnchorPoint?Se=q.projectionCache.cachedAnchorPoint:(Se=vr(q.tileAnchorPoint.x,q.tileAnchorPoint.y,q).point,q.projectionCache.cachedAnchorPoint=Se);let Xe,At,ct=Se,ft=Se,xt=0,Ct=0;const wt=Math.abs(he),Pt=[];let Lt;for(;xt+Ct<=wt;){if(Ue+=pe,Ue<k||Ue>=N)return null;xt+=Ct,ft=ct,At=Xe;const dn={absOffsetX:wt,direction:pe,distanceFromAnchor:xt,previousVertex:ft};if(ct=zi(Ue,q,dn),f===0)Pt.push(ft),Lt=ct.sub(ft);else{let Xt;const nn=ct.sub(ft);Xt=nn.mag()===0?Ni(zi(Ue+pe,q,dn).sub(ct),f,pe):Ni(nn,f,pe),At||(At=ft.add(Xt)),Xe=gl(Ue,Xt,ct,k,N,At,f,q,dn),Pt.push(At),Lt=Xe.sub(At)}Ct=Lt.mag()}const Bt=Lt._mult((wt-xt)/Ct)._add(At||ft),Yt=Ee+Math.atan2(ct.y-ft.y,ct.x-ft.x);return Pt.push(Bt),{point:Bt,angle:J?Yt:0,path:Pt}}const So=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function $a(I,s){for(let f=0;f<I;f++){const _=s.length;s.resize(_+4),s.float32.set(So,3*_)}}function Ol(I,s,f){const _=s[0],w=s[1];return I[0]=f[0]*_+f[4]*w+f[12],I[1]=f[1]*_+f[5]*w+f[13],I[3]=f[3]*_+f[7]*w+f[15],I}const Ao=100;class QA{constructor(s,f=new er(s.width+200,s.height+200,25),_=new er(s.width+200,s.height+200,25)){this.transform=s,this.grid=f,this.ignoredGrid=_,this.pitchFactor=Math.cos(s.pitch*Math.PI/180)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+Ao,this.screenBottomBoundary=s.height+Ao,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(s,f,_,w,k,N,q,J,he,pe,Ee,Se){const Ue=this.projectAndGetPerspectiveRatio(s.anchorPointX+J[0],s.anchorPointY+J[1],k,pe,Se),Xe=_*Ue.perspectiveRatio;let At;if(N||q)At=this._projectCollisionBox(s,Xe,w,k,N,q,J,Ue,pe,Ee,Se);else{const Lt=Ue.x+(Ee?Ee.x*Xe:0),Bt=Ue.y+(Ee?Ee.y*Xe:0);At={allPointsOccluded:!1,box:[Lt+s.x1*Xe,Bt+s.y1*Xe,Lt+s.x2*Xe,Bt+s.y2*Xe]}}const[ct,ft,xt,Ct]=At.box,wt=N?At.allPointsOccluded:Ue.isOccluded;let Pt=wt;return Pt||(Pt=Ue.perspectiveRatio<this.perspectiveRatioCutoff),Pt||(Pt=!this.isInsideGrid(ct,ft,xt,Ct)),Pt||f!=="always"&&this.grid.hitTest(ct,ft,xt,Ct,f,he)?{box:[ct,ft,xt,Ct],placeable:!1,offscreen:!1,occluded:wt}:{box:[ct,ft,xt,Ct],placeable:!0,offscreen:this.isOffscreen(ct,ft,xt,Ct),occluded:wt}}placeCollisionCircles(s,f,_,w,k,N,q,J,he,pe,Ee,Se,Ue,Xe){const At=[],ct=new o.P(f.anchorX,f.anchorY),ft=this.getPerspectiveRatio(ct.x,ct.y,N,Xe),xt=(he?k*this.transform.getPitchedTextCorrection(f.anchorX,f.anchorY,N)/ft:k*ft)/o.aB,Ct={getElevation:Xe,pitchedLabelPlaneMatrix:q,lineVertexArray:_,pitchWithMap:he,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ct,unwrappedTileID:N,width:this.transform.width,height:this.transform.height,translation:Ue},wt=pa(xt,w,f.lineOffsetX*xt,f.lineOffsetY*xt,!1,f,!1,Ct);let Pt=!1,Lt=!1,Bt=!0;if(wt){const Yt=.5*Ee*ft+Se,dn=new o.P(-100,-100),Xt=new o.P(this.screenRightBoundary,this.screenBottomBoundary),nn=new Wn,An=wt.first,qn=wt.last;let Qn=[];for(let cr=An.path.length-1;cr>=1;cr--)Qn.push(An.path[cr]);for(let cr=1;cr<qn.path.length;cr++)Qn.push(qn.path[cr]);const Tn=2.5*Yt;if(he){const cr=this.projectPathToScreenSpace(Qn,Ct);Qn=cr.some(_o=>_o.signedDistanceFromCamera<=0)?[]:cr.map(_o=>_o.point)}let bi=[];if(Qn.length>0){const cr=Qn[0].clone(),_o=Qn[0].clone();for(let la=1;la<Qn.length;la++)cr.x=Math.min(cr.x,Qn[la].x),cr.y=Math.min(cr.y,Qn[la].y),_o.x=Math.max(_o.x,Qn[la].x),_o.y=Math.max(_o.y,Qn[la].y);bi=cr.x>=dn.x&&_o.x<=Xt.x&&cr.y>=dn.y&&_o.y<=Xt.y?[Qn]:_o.x<dn.x||cr.x>Xt.x||_o.y<dn.y||cr.y>Xt.y?[]:o.ay([Qn],dn.x,dn.y,Xt.x,Xt.y)}for(const cr of bi){nn.reset(cr,.25*Yt);let _o=0;_o=nn.length<=.5*Yt?1:Math.ceil(nn.paddedLength/Tn)+1;for(let la=0;la<_o;la++){const Lo=la/Math.max(_o-1,1),Ra=nn.lerp(Lo),Aa=Ra.x+Ao,Er=Ra.y+Ao;At.push(Aa,Er,Yt,0);const Qo=Aa-Yt,ts=Er-Yt,Wa=Aa+Yt,Bs=Er+Yt;if(Bt=Bt&&this.isOffscreen(Qo,ts,Wa,Bs),Lt=Lt||this.isInsideGrid(Qo,ts,Wa,Bs),s!=="always"&&this.grid.hitTestCircle(Aa,Er,Yt,s,pe)&&(Pt=!0,!J))return{circles:[],offscreen:!1,collisionDetected:Pt}}}}return{circles:!J&&Pt||!Lt||ft<this.perspectiveRatioCutoff?[]:At,offscreen:Bt,collisionDetected:Pt}}projectPathToScreenSpace(s,f){const _=function(w,k){const N=o.L();return o.aq(N,k.pitchedLabelPlaneMatrix),w.map(q=>{const J=Wi(q.x,q.y,N,k.getElevation),he=k.transform.projectTileCoordinates(J.point.x,J.point.y,k.unwrappedTileID,k.getElevation);return he.point.x=(.5*he.point.x+.5)*k.width,he.point.y=(.5*-he.point.y+.5)*k.height,he})}(s,f);return function(w){let k=0,N=0,q=0,J=0;for(let he=0;he<w.length;he++)w[he].isOccluded?(q=he+1,J=0):(J++,J>N&&(N=J,k=q));return w.slice(k,k+N)}(_)}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const f=[],_=new o.a2;for(const Ee of s){const Se=new o.P(Ee.x+Ao,Ee.y+Ao);_.extend(Se),f.push(Se)}const{minX:w,minY:k,maxX:N,maxY:q}=_,J=this.grid.query(w,k,N,q).concat(this.ignoredGrid.query(w,k,N,q)),he={},pe={};for(const Ee of J){const Se=Ee.key;if(he[Se.bucketInstanceId]===void 0&&(he[Se.bucketInstanceId]={}),he[Se.bucketInstanceId][Se.featureIndex])continue;const Ue=[new o.P(Ee.x1,Ee.y1),new o.P(Ee.x2,Ee.y1),new o.P(Ee.x2,Ee.y2),new o.P(Ee.x1,Ee.y2)];o.az(f,Ue)&&(he[Se.bucketInstanceId][Se.featureIndex]=!0,pe[Se.bucketInstanceId]===void 0&&(pe[Se.bucketInstanceId]=[]),pe[Se.bucketInstanceId].push(Se.featureIndex))}return pe}insertCollisionBox(s,f,_,w,k,N){(_?this.ignoredGrid:this.grid).insert({bucketInstanceId:w,featureIndex:k,collisionGroupID:N,overlapMode:f},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,f,_,w,k,N){const q=_?this.ignoredGrid:this.grid,J={bucketInstanceId:w,featureIndex:k,collisionGroupID:N,overlapMode:f};for(let he=0;he<s.length;he+=4)q.insertCircle(J,s[he],s[he+1],s[he+2])}projectAndGetPerspectiveRatio(s,f,_,w,k){if(k){let N;w?(N=[s,f,w(s,f),1],o.aw(N,N,k)):(N=[s,f,0,1],Ol(N,N,k));const q=N[3];return{x:(N[0]/q+1)/2*this.transform.width+Ao,y:(-N[1]/q+1)/2*this.transform.height+Ao,perspectiveRatio:.5+this.transform.cameraToCenterDistance/q*.5,isOccluded:!1,signedDistanceFromCamera:q}}{const N=this.transform.projectTileCoordinates(s,f,_,w);return{x:(N.point.x+1)/2*this.transform.width+Ao,y:(1-N.point.y)/2*this.transform.height+Ao,perspectiveRatio:.5+this.transform.cameraToCenterDistance/N.signedDistanceFromCamera*.5,isOccluded:N.isOccluded,signedDistanceFromCamera:N.signedDistanceFromCamera}}}getPerspectiveRatio(s,f,_,w){const k=this.transform.projectTileCoordinates(s,f,_,w);return .5+this.transform.cameraToCenterDistance/k.signedDistanceFromCamera*.5}isOffscreen(s,f,_,w){return _<Ao||s>=this.screenRightBoundary||w<Ao||f>this.screenBottomBoundary}isInsideGrid(s,f,_,w){return _>=0&&s<this.gridRightBoundary&&w>=0&&f<this.gridBottomBoundary}getViewportMatrix(){const s=o.ag([]);return o.M(s,s,[-100,-100,0]),s}_projectCollisionBox(s,f,_,w,k,N,q,J,he,pe,Ee){let Se=1,Ue=0,Xe=0,At=1;const ct=s.anchorPointX+q[0],ft=s.anchorPointY+q[1];if(N&&!k){const Qn=this.projectAndGetPerspectiveRatio(ct+1,ft,w,he,Ee),Tn=Qn.x-J.x,bi=Math.atan((Qn.y-J.y)/Tn)+(Tn<0?Math.PI:0),cr=Math.sin(bi),_o=Math.cos(bi);Se=_o,Ue=cr,Xe=-cr,At=_o}else if(!N&&k){const Qn=ti(this.transform);Se=Qn.vecEast[0],Ue=Qn.vecEast[1],Xe=Qn.vecSouth[0],At=Qn.vecSouth[1]}let xt=J.x,Ct=J.y,wt=f;k&&(xt=ct,Ct=ft,wt=Math.pow(2,-(this.transform.zoom-_.overscaledZ)),wt*=this.transform.getPitchedTextCorrection(ct,ft,w),pe||(wt*=o.ah(.5+J.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),pe&&(xt+=Se*pe.x*wt+Xe*pe.y*wt,Ct+=Ue*pe.x*wt+At*pe.y*wt);const Pt=s.x1*wt,Lt=s.x2*wt,Bt=(Pt+Lt)/2,Yt=s.y1*wt,dn=s.y2*wt,Xt=(Yt+dn)/2,nn=[{offsetX:Pt,offsetY:Yt},{offsetX:Bt,offsetY:Yt},{offsetX:Lt,offsetY:Yt},{offsetX:Lt,offsetY:Xt},{offsetX:Lt,offsetY:dn},{offsetX:Bt,offsetY:dn},{offsetX:Pt,offsetY:dn},{offsetX:Pt,offsetY:Xt}];let An=[];for(const{offsetX:Qn,offsetY:Tn}of nn)An.push(new o.P(xt+Se*Qn+Xe*Tn,Ct+Ue*Qn+At*Tn));let qn=!1;if(k){const Qn=An.map(Tn=>this.projectAndGetPerspectiveRatio(Tn.x,Tn.y,w,he,Ee));qn=Qn.some(Tn=>!Tn.isOccluded),An=Qn.map(Tn=>new o.P(Tn.x,Tn.y))}else qn=!0;return{box:o.aA(An),allPointsOccluded:!qn}}}class ka{constructor(s,f,_,w){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?f:-f))):w&&_?1:0,this.placed=_}isHidden(){return this.opacity===0&&!this.placed}}class Vi{constructor(s,f,_,w,k){this.text=new ka(s?s.text:null,f,_,k),this.icon=new ka(s?s.icon:null,f,w,k)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class xi{constructor(s,f,_){this.text=s,this.icon=f,this.skipFade=_}}class ls{constructor(s,f,_,w,k){this.bucketInstanceId=s,this.featureIndex=f,this.sourceLayerIndex=_,this.bucketIndex=w,this.tileID=k}}class Ma{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){const f=++this.maxGroupID;this.collisionGroups[s]={ID:f,predicate:_=>_.collisionGroupID===f}}return this.collisionGroups[s]}}function Vo(I,s,f,_,w){const{horizontalAlign:k,verticalAlign:N}=o.aH(I);return new o.P(-(k-.5)*s+_[0]*w,-(N-.5)*f+_[1]*w)}class $e{constructor(s,f,_,w,k){this.transform=s.clone(),this.terrain=f,this.collisionIndex=new QA(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=_,this.retainedQueryData={},this.collisionGroups=new Ma(w),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=k,k&&(k.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(s){const f=this.terrain;return f?(_,w)=>f.getElevation(s,_,w):null}getBucketParts(s,f,_,w){const k=_.getBucket(f),N=_.latestFeatureIndex;if(!k||!N||f.id!==k.layerIds[0])return;const q=_.collisionBoxArray,J=k.layers[0].layout,he=k.layers[0].paint,pe=Math.pow(2,this.transform.zoom-_.tileID.overscaledZ),Ee=_.tileSize/o.$,Se=_.tileID.toUnwrapped(),Ue=J.get("text-rotation-alignment")==="map",Xe=o.aC(_,1,this.transform.zoom),At=o.aD(this.collisionIndex.transform,_,he.get("text-translate"),he.get("text-translate-anchor")),ct=o.aD(this.collisionIndex.transform,_,he.get("icon-translate"),he.get("icon-translate-anchor")),ft=wi(Ue,this.transform,Xe);this.retainedQueryData[k.bucketInstanceId]=new ls(k.bucketInstanceId,N,k.sourceLayerIndex,k.index,_.tileID);const xt={bucket:k,layout:J,translationText:At,translationIcon:ct,unwrappedTileID:Se,pitchedLabelPlaneMatrix:ft,scale:pe,textPixelRatio:Ee,holdingForFade:_.holdingForFade(),collisionBoxArray:q,partiallyEvaluatedTextSize:o.an(k.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(k.sourceID)};if(w)for(const Ct of k.sortKeyRanges){const{sortKey:wt,symbolInstanceStart:Pt,symbolInstanceEnd:Lt}=Ct;s.push({sortKey:wt,symbolInstanceStart:Pt,symbolInstanceEnd:Lt,parameters:xt})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:k.symbolInstances.length,parameters:xt})}attemptAnchorPlacement(s,f,_,w,k,N,q,J,he,pe,Ee,Se,Ue,Xe,At,ct,ft,xt,Ct,wt){const Pt=o.aE[s.textAnchor],Lt=[s.textOffset0,s.textOffset1],Bt=Vo(Pt,_,w,Lt,k),Yt=this.collisionIndex.placeCollisionBox(f,Se,J,he,pe,q,N,ct,Ee.predicate,Ct,Bt,wt);if((!xt||this.collisionIndex.placeCollisionBox(xt,Se,J,he,pe,q,N,ft,Ee.predicate,Ct,Bt,wt).placeable)&&Yt.placeable){let dn;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ue.crossTileID]&&this.prevPlacement.placements[Ue.crossTileID]&&this.prevPlacement.placements[Ue.crossTileID].text&&(dn=this.prevPlacement.variableOffsets[Ue.crossTileID].anchor),Ue.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Ue.crossTileID]={textOffset:Lt,width:_,height:w,anchor:Pt,textBoxScale:k,prevAnchor:dn},this.markUsedJustification(Xe,Pt,Ue,At),Xe.allowVerticalPlacement&&(this.markUsedOrientation(Xe,At,Ue),this.placedOrientations[Ue.crossTileID]=At),{shift:Bt,placedGlyphBoxes:Yt}}}placeLayerBucketPart(s,f,_){const{bucket:w,layout:k,translationText:N,translationIcon:q,unwrappedTileID:J,pitchedLabelPlaneMatrix:he,textPixelRatio:pe,holdingForFade:Ee,collisionBoxArray:Se,partiallyEvaluatedTextSize:Ue,collisionGroup:Xe}=s.parameters,At=k.get("text-optional"),ct=k.get("icon-optional"),ft=o.aF(k,"text-overlap","text-allow-overlap"),xt=ft==="always",Ct=o.aF(k,"icon-overlap","icon-allow-overlap"),wt=Ct==="always",Pt=k.get("text-rotation-alignment")==="map",Lt=k.get("text-pitch-alignment")==="map",Bt=k.get("icon-text-fit")!=="none",Yt=k.get("symbol-z-order")==="viewport-y",dn=xt&&(wt||!w.hasIconData()||ct),Xt=wt&&(xt||!w.hasTextData()||At);!w.collisionArrays&&Se&&w.deserializeCollisionBoxes(Se);const nn=this.retainedQueryData[w.bucketInstanceId].tileID,An=this._getTerrainElevationFunc(nn),qn=this.transform.getFastPathSimpleProjectionMatrix(nn),Qn=(Tn,bi,cr)=>{var _o,la;if(f[Tn.crossTileID])return;if(Ee)return void(this.placements[Tn.crossTileID]=new xi(!1,!1,!1));let Lo=!1,Ra=!1,Aa=!0,Er=null,Qo={box:null,placeable:!1,offscreen:null,occluded:!1},ts={placeable:!1},Wa=null,Bs=null,Os=null,Qu=0,hc=0,ql=0;bi.textFeatureIndex?Qu=bi.textFeatureIndex:Tn.useRuntimeCollisionCircles&&(Qu=Tn.featureIndex),bi.verticalTextFeatureIndex&&(hc=bi.verticalTextFeatureIndex);const Oh=bi.textBox;if(Oh){const bl=bo=>{let Xo=o.ao.horizontal;if(w.allowVerticalPlacement&&!bo&&this.prevPlacement){const hA=this.prevPlacement.placedOrientations[Tn.crossTileID];hA&&(this.placedOrientations[Tn.crossTileID]=hA,Xo=hA,this.markUsedOrientation(w,Xo,Tn))}return Xo},qu=(bo,Xo)=>{if(w.allowVerticalPlacement&&Tn.numVerticalGlyphVertices>0&&bi.verticalTextBox){for(const hA of w.writingModes)if(hA===o.ao.vertical?(Qo=Xo(),ts=Qo):Qo=bo(),Qo&&Qo.placeable)break}else Qo=bo()},xl=Tn.textAnchorOffsetStartIndex,Pc=Tn.textAnchorOffsetEndIndex;if(Pc===xl){const bo=(Xo,hA)=>{const gs=this.collisionIndex.placeCollisionBox(Xo,ft,pe,nn,J,Lt,Pt,N,Xe.predicate,An,void 0,qn);return gs&&gs.placeable&&(this.markUsedOrientation(w,hA,Tn),this.placedOrientations[Tn.crossTileID]=hA),gs};qu(()=>bo(Oh,o.ao.horizontal),()=>{const Xo=bi.verticalTextBox;return w.allowVerticalPlacement&&Tn.numVerticalGlyphVertices>0&&Xo?bo(Xo,o.ao.vertical):{box:null,offscreen:null}}),bl(Qo&&Qo.placeable)}else{let bo=o.aE[(la=(_o=this.prevPlacement)===null||_o===void 0?void 0:_o.variableOffsets[Tn.crossTileID])===null||la===void 0?void 0:la.anchor];const Xo=(gs,_u,dA)=>{const RA=gs.x2-gs.x1,Hl=gs.y2-gs.y1,Kc=Tn.textBoxScale,nu=Bt&&Ct==="never"?_u:null;let Qa=null,bu=ft==="never"?1:2,zf="never";bo&&bu++;for(let xu=0;xu<bu;xu++){for(let Mu=xl;Mu<Pc;Mu++){const wa=w.textAnchorOffsets.get(Mu);if(bo&&wa.textAnchor!==bo)continue;const iu=this.attemptAnchorPlacement(wa,gs,RA,Hl,Kc,Pt,Lt,pe,nn,J,Xe,zf,Tn,w,dA,N,q,nu,An);if(iu&&(Qa=iu.placedGlyphBoxes,Qa&&Qa.placeable))return Lo=!0,Er=iu.shift,Qa}bo?bo=null:zf=ft}return _&&!Qa&&(Qa={box:this.collisionIndex.placeCollisionBox(Oh,"always",pe,nn,J,Lt,Pt,N,Xe.predicate,An,void 0,qn).box,offscreen:!1,placeable:!1,occluded:!1}),Qa};qu(()=>Xo(Oh,bi.iconBox,o.ao.horizontal),()=>{const gs=bi.verticalTextBox;return w.allowVerticalPlacement&&(!Qo||!Qo.placeable)&&Tn.numVerticalGlyphVertices>0&&gs?Xo(gs,bi.verticalIconBox,o.ao.vertical):{box:null,occluded:!0,offscreen:null}}),Qo&&(Lo=Qo.placeable,Aa=Qo.offscreen);const hA=bl(Qo&&Qo.placeable);if(!Lo&&this.prevPlacement){const gs=this.prevPlacement.variableOffsets[Tn.crossTileID];gs&&(this.variableOffsets[Tn.crossTileID]=gs,this.markUsedJustification(w,gs.anchor,Tn,hA))}}}if(Wa=Qo,Lo=Wa&&Wa.placeable,Aa=Wa&&Wa.offscreen,Tn.useRuntimeCollisionCircles){const bl=w.text.placedSymbolArray.get(Tn.centerJustifiedTextSymbolIndex),qu=o.ap(w.textSizeData,Ue,bl),xl=k.get("text-padding");Bs=this.collisionIndex.placeCollisionCircles(ft,bl,w.lineVertexArray,w.glyphOffsetArray,qu,J,he,_,Lt,Xe.predicate,Tn.collisionCircleDiameter,xl,N,An),Bs.circles.length&&Bs.collisionDetected&&!_&&o.w("Collisions detected, but collision boxes are not shown"),Lo=xt||Bs.circles.length>0&&!Bs.collisionDetected,Aa=Aa&&Bs.offscreen}if(bi.iconFeatureIndex&&(ql=bi.iconFeatureIndex),bi.iconBox){const bl=qu=>this.collisionIndex.placeCollisionBox(qu,Ct,pe,nn,J,Lt,Pt,q,Xe.predicate,An,Bt&&Er?Er:void 0,qn);ts&&ts.placeable&&bi.verticalIconBox?(Os=bl(bi.verticalIconBox),Ra=Os.placeable):(Os=bl(bi.iconBox),Ra=Os.placeable),Aa=Aa&&Os.offscreen}const ih=At||Tn.numHorizontalGlyphVertices===0&&Tn.numVerticalGlyphVertices===0,Yu=ct||Tn.numIconVertices===0;ih||Yu?Yu?ih||(Ra=Ra&&Lo):Lo=Ra&&Lo:Ra=Lo=Ra&&Lo;const Rc=Ra&&Os.placeable;if(Lo&&Wa.placeable&&this.collisionIndex.insertCollisionBox(Wa.box,ft,k.get("text-ignore-placement"),w.bucketInstanceId,ts&&ts.placeable&&hc?hc:Qu,Xe.ID),Rc&&this.collisionIndex.insertCollisionBox(Os.box,Ct,k.get("icon-ignore-placement"),w.bucketInstanceId,ql,Xe.ID),Bs&&Lo&&this.collisionIndex.insertCollisionCircles(Bs.circles,ft,k.get("text-ignore-placement"),w.bucketInstanceId,Qu,Xe.ID),_&&this.storeCollisionData(w.bucketInstanceId,cr,bi,Wa,Os,Bs),Tn.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(w.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Tn.crossTileID]=new xi((Lo||dn)&&!Wa?.occluded,(Ra||Xt)&&!Os?.occluded,Aa||w.justReloaded),f[Tn.crossTileID]=!0};if(Yt){if(s.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Tn=w.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let bi=Tn.length-1;bi>=0;--bi){const cr=Tn[bi];Qn(w.symbolInstances.get(cr),w.collisionArrays[cr],cr)}}else for(let Tn=s.symbolInstanceStart;Tn<s.symbolInstanceEnd;Tn++)Qn(w.symbolInstances.get(Tn),w.collisionArrays[Tn],Tn);w.justReloaded=!1}storeCollisionData(s,f,_,w,k,N){if(_.textBox||_.iconBox){let q,J;this.collisionBoxArrays.has(s)?q=this.collisionBoxArrays.get(s):(q=new Map,this.collisionBoxArrays.set(s,q)),q.has(f)?J=q.get(f):(J={text:null,icon:null},q.set(f,J)),_.textBox&&(J.text=w.box),_.iconBox&&(J.icon=k.box)}if(N){let q=this.collisionCircleArrays[s];q===void 0&&(q=this.collisionCircleArrays[s]=[]);for(let J=0;J<N.circles.length;J+=4)q.push(N.circles[J+0]-Ao),q.push(N.circles[J+1]-Ao),q.push(N.circles[J+2]),q.push(N.collisionDetected?1:0)}}markUsedJustification(s,f,_,w){let k;k=w===o.ao.vertical?_.verticalPlacedTextSymbolIndex:{left:_.leftJustifiedTextSymbolIndex,center:_.centerJustifiedTextSymbolIndex,right:_.rightJustifiedTextSymbolIndex}[o.aG(f)];const N=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex,_.verticalPlacedTextSymbolIndex];for(const q of N)q>=0&&(s.text.placedSymbolArray.get(q).crossTileID=k>=0&&q!==k?0:_.crossTileID)}markUsedOrientation(s,f,_){const w=f===o.ao.horizontal||f===o.ao.horizontalOnly?f:0,k=f===o.ao.vertical?f:0,N=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex];for(const q of N)s.text.placedSymbolArray.get(q).placedOrientation=w;_.verticalPlacedTextSymbolIndex&&(s.text.placedSymbolArray.get(_.verticalPlacedTextSymbolIndex).placedOrientation=k)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;const f=this.prevPlacement;let _=!1;this.prevZoomAdjustment=f?f.zoomAdjustment(this.transform.zoom):0;const w=f?f.symbolFadeChange(s):1,k=f?f.opacities:{},N=f?f.variableOffsets:{},q=f?f.placedOrientations:{};for(const J in this.placements){const he=this.placements[J],pe=k[J];pe?(this.opacities[J]=new Vi(pe,w,he.text,he.icon),_=_||he.text!==pe.text.placed||he.icon!==pe.icon.placed):(this.opacities[J]=new Vi(null,w,he.text,he.icon,he.skipFade),_=_||he.text||he.icon)}for(const J in k){const he=k[J];if(!this.opacities[J]){const pe=new Vi(he,w,!1,!1);pe.isHidden()||(this.opacities[J]=pe,_=_||he.text.placed||he.icon.placed)}}for(const J in N)this.variableOffsets[J]||!this.opacities[J]||this.opacities[J].isHidden()||(this.variableOffsets[J]=N[J]);for(const J in q)this.placedOrientations[J]||!this.opacities[J]||this.opacities[J].isHidden()||(this.placedOrientations[J]=q[J]);if(f&&f.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");_?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=f?f.lastPlacementChangeTime:s)}updateLayerOpacities(s,f){const _={};for(const w of f){const k=w.getBucket(s);k&&w.latestFeatureIndex&&s.id===k.layerIds[0]&&this.updateBucketOpacities(k,w.tileID,_,w.collisionBoxArray)}}updateBucketOpacities(s,f,_,w){s.hasTextData()&&(s.text.opacityVertexArray.clear(),s.text.hasVisibleVertices=!1),s.hasIconData()&&(s.icon.opacityVertexArray.clear(),s.icon.hasVisibleVertices=!1),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();const k=s.layers[0],N=k.layout,q=new Vi(null,0,!1,!1,!0),J=N.get("text-allow-overlap"),he=N.get("icon-allow-overlap"),pe=k._unevaluatedLayout.hasValue("text-variable-anchor")||k._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ee=N.get("text-rotation-alignment")==="map",Se=N.get("text-pitch-alignment")==="map",Ue=N.get("icon-text-fit")!=="none",Xe=new Vi(null,0,J&&(he||!s.hasIconData()||N.get("icon-optional")),he&&(J||!s.hasTextData()||N.get("text-optional")),!0);!s.collisionArrays&&w&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(w);const At=(ft,xt,Ct)=>{for(let wt=0;wt<xt/4;wt++)ft.opacityVertexArray.emplaceBack(Ct);ft.hasVisibleVertices=ft.hasVisibleVertices||Ct!==YA},ct=this.collisionBoxArrays.get(s.bucketInstanceId);for(let ft=0;ft<s.symbolInstances.length;ft++){const xt=s.symbolInstances.get(ft),{numHorizontalGlyphVertices:Ct,numVerticalGlyphVertices:wt,crossTileID:Pt}=xt;let Lt=this.opacities[Pt];_[Pt]?Lt=q:Lt||(Lt=Xe,this.opacities[Pt]=Lt),_[Pt]=!0;const Bt=xt.numIconVertices>0,Yt=this.placedOrientations[xt.crossTileID],dn=Yt===o.ao.vertical,Xt=Yt===o.ao.horizontal||Yt===o.ao.horizontalOnly;if(Ct>0||wt>0){const An=Us(Lt.text);At(s.text,Ct,dn?YA:An),At(s.text,wt,Xt?YA:An);const qn=Lt.text.isHidden();[xt.rightJustifiedTextSymbolIndex,xt.centerJustifiedTextSymbolIndex,xt.leftJustifiedTextSymbolIndex].forEach(bi=>{bi>=0&&(s.text.placedSymbolArray.get(bi).hidden=qn||dn?1:0)}),xt.verticalPlacedTextSymbolIndex>=0&&(s.text.placedSymbolArray.get(xt.verticalPlacedTextSymbolIndex).hidden=qn||Xt?1:0);const Qn=this.variableOffsets[xt.crossTileID];Qn&&this.markUsedJustification(s,Qn.anchor,xt,Yt);const Tn=this.placedOrientations[xt.crossTileID];Tn&&(this.markUsedJustification(s,"left",xt,Tn),this.markUsedOrientation(s,Tn,xt))}if(Bt){const An=Us(Lt.icon),qn=!(Ue&&xt.verticalPlacedIconSymbolIndex&&dn);xt.placedIconSymbolIndex>=0&&(At(s.icon,xt.numIconVertices,qn?An:YA),s.icon.placedSymbolArray.get(xt.placedIconSymbolIndex).hidden=Lt.icon.isHidden()),xt.verticalPlacedIconSymbolIndex>=0&&(At(s.icon,xt.numVerticalIconVertices,qn?YA:An),s.icon.placedSymbolArray.get(xt.verticalPlacedIconSymbolIndex).hidden=Lt.icon.isHidden())}const nn=ct&&ct.has(ft)?ct.get(ft):{text:null,icon:null};if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){const An=s.collisionArrays[ft];if(An){let qn=new o.P(0,0);if(An.textBox||An.verticalTextBox){let Qn=!0;if(pe){const Tn=this.variableOffsets[Pt];Tn?(qn=Vo(Tn.anchor,Tn.width,Tn.height,Tn.textOffset,Tn.textBoxScale),Ee&&qn._rotate(Se?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Qn=!1}if(An.textBox||An.verticalTextBox){let Tn;An.textBox&&(Tn=dn),An.verticalTextBox&&(Tn=Xt),Et(s.textCollisionBox.collisionVertexArray,Lt.text.placed,!Qn||Tn,nn.text,qn.x,qn.y)}}if(An.iconBox||An.verticalIconBox){const Qn=!!(!Xt&&An.verticalIconBox);let Tn;An.iconBox&&(Tn=Qn),An.verticalIconBox&&(Tn=!Qn),Et(s.iconCollisionBox.collisionVertexArray,Lt.icon.placed,Tn,nn.icon,Ue?qn.x:0,Ue?qn.y:0)}}}}if(s.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.text.opacityVertexArray.length!==s.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${s.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${s.text.layoutVertexArray.length}) / 4`);if(s.icon.opacityVertexArray.length!==s.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${s.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${s.icon.layoutVertexArray.length}) / 4`);s.bucketInstanceId in this.collisionCircleArrays&&(s.collisionCircleArray=this.collisionCircleArrays[s.bucketInstanceId],delete this.collisionCircleArrays[s.bucketInstanceId])}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,f){const _=this.zoomAtLastRecencyCheck===f?1-this.zoomAdjustment(f):1;return this.zoomAtLastRecencyCheck=f,this.commitTime+this.fadeDuration*_>s}setStale(){this.stale=!0}}function Et(I,s,f,_,w,k){_&&_.length!==0||(_=[0,0,0,0]);const N=_[0]-Ao,q=_[1]-Ao,J=_[2]-Ao,he=_[3]-Ao;I.emplaceBack(s?1:0,f?1:0,w||0,k||0,N,q),I.emplaceBack(s?1:0,f?1:0,w||0,k||0,J,q),I.emplaceBack(s?1:0,f?1:0,w||0,k||0,J,he),I.emplaceBack(s?1:0,f?1:0,w||0,k||0,N,he)}const xn=Math.pow(2,25),jn=Math.pow(2,24),rn=Math.pow(2,17),si=Math.pow(2,16),Jr=Math.pow(2,9),wo=Math.pow(2,8),As=Math.pow(2,1);function Us(I){if(I.opacity===0&&!I.placed)return 0;if(I.opacity===1&&I.placed)return 4294967295;const s=I.placed?1:0,f=Math.floor(127*I.opacity);return f*xn+s*jn+f*rn+s*si+f*Jr+s*wo+f*As+s}const YA=0;class Qi{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&!s.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(s,f,_,w,k){const N=this._bucketParts;for(;this._currentTileIndex<s.length;)if(f.getBucketParts(N,w,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,k())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,N.sort((q,J)=>q.sortKey-J.sortKey));this._currentPartIndex<N.length;)if(f.placeLayerBucketPart(N[this._currentPartIndex],this._seenCrossTileIDs,_),this._currentPartIndex++,k())return!0;return!1}}class Du{constructor(s,f,_,w,k,N,q,J){this.placement=new $e(s,f,N,q,J),this._currentPlacementIndex=_.length-1,this._forceFullPlacement=w,this._showCollisionBoxes=k,this._done=!1}isDone(){return this._done}continuePlacement(s,f,_){const w=U.now(),k=()=>!this._forceFullPlacement&&U.now()-w>2;for(;this._currentPlacementIndex>=0;){const N=f[s[this._currentPlacementIndex]],q=this.placement.collisionIndex.transform.zoom;if(N.type==="symbol"&&(!N.minzoom||N.minzoom<=q)&&(!N.maxzoom||N.maxzoom>q)){if(this._inProgressLayer||(this._inProgressLayer=new Qi(N)),this._inProgressLayer.continuePlacement(_[N.source],this.placement,this._showCollisionBoxes,N,k))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}const _A=512/o.$/2;class yl{constructor(s,f,_){this.tileID=s,this.bucketInstanceId=_,this._symbolsByKey={};const w=new Map;for(let k=0;k<f.length;k++){const N=f.get(k),q=N.key,J=w.get(q);J?J.push(N):w.set(q,[N])}for(const[k,N]of w){const q={positions:N.map(J=>({x:Math.floor(J.anchorX*_A),y:Math.floor(J.anchorY*_A)})),crossTileIDs:N.map(J=>J.crossTileID)};if(q.positions.length>128){const J=new o.aI(q.positions.length,16,Uint16Array);for(const{x:he,y:pe}of q.positions)J.add(he,pe);J.finish(),delete q.positions,q.index=J}this._symbolsByKey[k]=q}}getScaledCoordinates(s,f){const{x:_,y:w,z:k}=this.tileID.canonical,{x:N,y:q,z:J}=f.canonical,he=_A/Math.pow(2,J-k),pe=(q*o.$+s.anchorY)*he,Ee=w*o.$*_A;return{x:Math.floor((N*o.$+s.anchorX)*he-_*o.$*_A),y:Math.floor(pe-Ee)}}findMatches(s,f,_){const w=this.tileID.canonical.z<f.canonical.z?1:Math.pow(2,this.tileID.canonical.z-f.canonical.z);for(let k=0;k<s.length;k++){const N=s.get(k);if(N.crossTileID)continue;const q=this._symbolsByKey[N.key];if(!q)continue;const J=this.getScaledCoordinates(N,f);if(q.index){const he=q.index.range(J.x-w,J.y-w,J.x+w,J.y+w).sort();for(const pe of he){const Ee=q.crossTileIDs[pe];if(!_[Ee]){_[Ee]=!0,N.crossTileID=Ee;break}}}else if(q.positions)for(let he=0;he<q.positions.length;he++){const pe=q.positions[he],Ee=q.crossTileIDs[he];if(Math.abs(pe.x-J.x)<=w&&Math.abs(pe.y-J.y)<=w&&!_[Ee]){_[Ee]=!0,N.crossTileID=Ee;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:s})=>s)}}class Ss{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class bc{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){const f=Math.round((s-this.lng)/360);if(f!==0)for(const _ in this.indexes){const w=this.indexes[_],k={};for(const N in w){const q=w[N];q.tileID=q.tileID.unwrapTo(q.tileID.wrap+f),k[q.tileID.key]=q}this.indexes[_]=k}this.lng=s}addBucket(s,f,_){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===f.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let k=0;k<f.symbolInstances.length;k++)f.symbolInstances.get(k).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]={});const w=this.usedCrossTileIDs[s.overscaledZ];for(const k in this.indexes){const N=this.indexes[k];if(Number(k)>s.overscaledZ)for(const q in N){const J=N[q];J.tileID.isChildOf(s)&&J.findMatches(f.symbolInstances,s,w)}else{const q=N[s.scaledTo(Number(k)).key];q&&q.findMatches(f.symbolInstances,s,w)}}for(let k=0;k<f.symbolInstances.length;k++){const N=f.symbolInstances.get(k);N.crossTileID||(N.crossTileID=_.generate(),w[N.crossTileID]=!0)}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new yl(s,f.symbolInstances,f.bucketInstanceId),!0}removeBucketCrossTileIDs(s,f){for(const _ of f.getCrossTileIDsLists())for(const w of _)delete this.usedCrossTileIDs[s][w]}removeStaleBuckets(s){let f=!1;for(const _ in this.indexes){const w=this.indexes[_];for(const k in w)s[w[k].bucketInstanceId]||(this.removeBucketCrossTileIDs(_,w[k]),delete w[k],f=!0)}return f}}class Qs{constructor(){this.layerIndexes={},this.crossTileIDs=new Ss,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,f,_){let w=this.layerIndexes[s.id];w===void 0&&(w=this.layerIndexes[s.id]=new bc);let k=!1;const N={};w.handleWrapJump(_);for(const q of f){const J=q.getBucket(s);J&&s.id===J.layerIds[0]&&(J.bucketInstanceId||(J.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(q.tileID,J,this.crossTileIDs)&&(k=!0),N[J.bucketInstanceId]=!0)}return w.removeStaleBuckets(N)&&(k=!0),k}pruneUnusedLayers(s){const f={};s.forEach(_=>{f[_]=!0});for(const _ in this.layerIndexes)f[_]||delete this.layerIndexes[_]}}var $o="void main() {fragColor=vec4(1.0);}";const ko={prelude:dr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:dr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:dr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:dr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:dr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:dr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:dr($o,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:dr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:dr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:dr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:dr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:dr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:dr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:dr($o,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:dr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:dr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:dr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:dr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:dr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:dr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:dr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:dr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:dr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:dr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:dr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:dr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:dr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:dr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:dr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:dr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:dr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:dr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:dr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:dr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:dr(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:dr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function dr(I,s){const f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,_=s.match(/in ([\w]+) ([\w]+)/g),w=I.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),k=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),N=k?k.concat(w):w,q={};return{fragmentSource:I=I.replace(f,(J,he,pe,Ee,Se)=>(q[Se]=!0,he==="define"?`
#ifndef HAS_UNIFORM_u_${Se}
in ${pe} ${Ee} ${Se};
#else
uniform ${pe} ${Ee} u_${Se};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Se}
    ${pe} ${Ee} ${Se} = u_${Se};
#endif
`)),vertexSource:s=s.replace(f,(J,he,pe,Ee,Se)=>{const Ue=Ee==="float"?"vec2":"vec4",Xe=Se.match(/color/)?"color":Ue;return q[Se]?he==="define"?`
#ifndef HAS_UNIFORM_u_${Se}
uniform lowp float u_${Se}_t;
in ${pe} ${Ue} a_${Se};
out ${pe} ${Ee} ${Se};
#else
uniform ${pe} ${Ee} u_${Se};
#endif
`:Xe==="vec4"?`
#ifndef HAS_UNIFORM_u_${Se}
    ${Se} = a_${Se};
#else
    ${pe} ${Ee} ${Se} = u_${Se};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Se}
    ${Se} = unpack_mix_${Xe}(a_${Se}, u_${Se}_t);
#else
    ${pe} ${Ee} ${Se} = u_${Se};
#endif
`:he==="define"?`
#ifndef HAS_UNIFORM_u_${Se}
uniform lowp float u_${Se}_t;
in ${pe} ${Ue} a_${Se};
#else
uniform ${pe} ${Ee} u_${Se};
#endif
`:Xe==="vec4"?`
#ifndef HAS_UNIFORM_u_${Se}
    ${pe} ${Ee} ${Se} = a_${Se};
#else
    ${pe} ${Ee} ${Se} = u_${Se};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Se}
    ${pe} ${Ee} ${Se} = unpack_mix_${Xe}(a_${Se}, u_${Se}_t);
#else
    ${pe} ${Ee} ${Se} = u_${Se};
#endif
`}),staticAttributes:_,staticUniforms:N}}class Kl{constructor(s,f,_){this.vertexBuffer=s,this.indexBuffer=f,this.segments=_}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var ga=o.aJ([{name:"a_pos",type:"Int16",components:2}]);const Ul="#define PROJECTION_MERCATOR",bA="mercator";class br{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return bA}get shaderDefine(){return Ul}get shaderPreludeCode(){return ko.projectionMercator}get vertexShaderPreludeCode(){return ko.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(s){}getMeshFromTileID(s,f,_,w,k){if(this._cachedMesh)return this._cachedMesh;const N=new o.aL;N.emplaceBack(0,0),N.emplaceBack(o.$,0),N.emplaceBack(0,o.$),N.emplaceBack(o.$,o.$);const q=s.createVertexBuffer(N,ga.members),J=o.aM.simpleSegment(0,0,4,2),he=new o.aN;he.emplaceBack(1,0,2),he.emplaceBack(1,2,3);const pe=s.createIndexBuffer(he);return this._cachedMesh=new Kl(q,pe,J),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(s){}}class iA{constructor(s=0,f=0,_=0,w=0){if(isNaN(s)||s<0||isNaN(f)||f<0||isNaN(_)||_<0||isNaN(w)||w<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=f,this.left=_,this.right=w}interpolate(s,f,_){return f.top!=null&&s.top!=null&&(this.top=o.C.number(s.top,f.top,_)),f.bottom!=null&&s.bottom!=null&&(this.bottom=o.C.number(s.bottom,f.bottom,_)),f.left!=null&&s.left!=null&&(this.left=o.C.number(s.left,f.left,_)),f.right!=null&&s.right!=null&&(this.right=o.C.number(s.right,f.right,_)),this}getCenter(s,f){const _=o.ah((this.left+s-this.right)/2,0,s),w=o.ah((this.top+f-this.bottom)/2,0,f);return new o.P(_,w)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new iA(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function cu(I,s){if(!I.renderWorldCopies||I.lngRange)return;const f=s.lng-I.center.lng;s.lng+=f>180?-360:f<-180?360:0}function No(I){return Math.max(0,Math.floor(I))}class Eo{constructor(s,f,_,w,k,N){this._callbacks=s,this._tileSize=512,this._renderWorldCopies=N===void 0||!!N,this._minZoom=f||0,this._maxZoom=_||22,this._minPitch=w??0,this._maxPitch=k??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=No(this._zoom),this._scale=o.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new iA,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(s,f,_){this._latRange=s.latRange,this._lngRange=s.lngRange,this._width=s.width,this._height=s.height,this._center=s.center,this._elevation=s.elevation,this._minElevationForCurrentTile=s.minElevationForCurrentTile,this._zoom=s.zoom,this._tileZoom=No(this._zoom),this._scale=o.af(this._zoom),this._bearingInRadians=s.bearingInRadians,this._fovInRadians=s.fovInRadians,this._pitchInRadians=s.pitchInRadians,this._rollInRadians=s.rollInRadians,this._unmodified=s.unmodified,this._edgeInsets=new iA(s.padding.top,s.padding.bottom,s.padding.left,s.padding.right),this._minZoom=s.minZoom,this._maxZoom=s.maxZoom,this._minPitch=s.minPitch,this._maxPitch=s.maxPitch,this._renderWorldCopies=s.renderWorldCopies,this._cameraToCenterDistance=s.cameraToCenterDistance,this._nearZ=s.nearZ,this._farZ=s.farZ,this._autoCalculateNearFarZ=!_&&s.autoCalculateNearFarZ,f&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(s){this._minElevationForCurrentTile=s}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(s){this._minZoom!==s&&(this._minZoom=s,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(s){this._minPitch!==s&&(this._minPitch=s,this.setPitch(Math.max(this.pitch,s)))}get maxPitch(){return this._maxPitch}setMaxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.setPitch(Math.min(this.pitch,s)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(s){const f=o.aO(s,-180,180)*Math.PI/180;var _,w,k,N,q,J,he,pe,Ee;this._bearingInRadians!==f&&(this._unmodified=!1,this._bearingInRadians=f,this._calcMatrices(),this._rotationMatrix=C(),_=this._rotationMatrix,k=-this._bearingInRadians,N=(w=this._rotationMatrix)[0],q=w[1],J=w[2],he=w[3],pe=Math.sin(k),Ee=Math.cos(k),_[0]=N*Ee+J*pe,_[1]=q*Ee+he*pe,_[2]=N*-pe+J*Ee,_[3]=q*-pe+he*Ee)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(s){const f=o.ah(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==f&&(this._unmodified=!1,this._pitchInRadians=f,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(s){const f=s/180*Math.PI;this._rollInRadians!==f&&(this._unmodified=!1,this._rollInRadians=f,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.aP(this._fovInRadians)}setFov(s){s=o.ah(s,.1,150),this.fov!==s&&(this._unmodified=!1,this._fovInRadians=o.ae(s),this._calcMatrices())}get zoom(){return this._zoom}setZoom(s){const f=this.getConstrained(this._center,s).zoom;this._zoom!==f&&(this._unmodified=!1,this._zoom=f,this._tileZoom=Math.max(0,Math.floor(f)),this._scale=o.af(f),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(s){s!==this._elevation&&(this._elevation=s,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(s,f){this._autoCalculateNearFarZ=!1,this._nearZ=s,this._farZ=f,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,f,_){this._unmodified=!1,this._edgeInsets.interpolate(s,f,_),this._constrain(),this._calcMatrices()}resize(s,f,_=!0){this._width=s,this._height=f,_&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new vt([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(s){s?(this._lngRange=[s.getWest(),s.getEast()],this._latRange=[s.getSouth(),s.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-o.ai,o.ai])}getConstrained(s,f){return this._callbacks.getConstrained(s,f)}getCameraQueryGeometry(s,f){if(f.length===1)return[f[0],s];{const{minX:_,minY:w,maxX:k,maxY:N}=o.a2.fromPoints(f).extend(s);return[new o.P(_,w),new o.P(k,w),new o.P(k,N),new o.P(_,N),new o.P(_,w)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const s=this._unmodified,{center:f,zoom:_}=this.getConstrained(this.center,this.zoom);this.setCenter(f),this.setZoom(_),this._unmodified=s,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let s=o.ag(new Float64Array(16));o.N(s,s,[this._width/2,-this._height/2,1]),o.M(s,s,[1,-1,0]),this._clipSpaceToPixelsMatrix=s,s=o.ag(new Float64Array(16)),o.N(s,s,[1,-1,1]),o.M(s,s,[-1,-1,0]),o.N(s,s,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=s,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(s,f,_,w){const k=_!==void 0?_:this.bearing,N=w=w!==void 0?w:this.pitch,q=o.a1.fromLngLat(s,f),J=-Math.cos(o.ae(N)),he=Math.sin(o.ae(N)),pe=he*Math.sin(o.ae(k)),Ee=-he*Math.cos(o.ae(k));let Se=this.elevation;const Ue=f-Se;let Xe;J*Ue>=0||Math.abs(J)<.1?(Xe=1e4,Se=f+Xe*J):Xe=-Ue/J;let At,ct,ft=o.aQ(1,q.y),xt=0;do{if(xt+=1,xt>10)break;ct=Xe/ft,At=new o.a1(q.x+pe*ct,q.y+Ee*ct),ft=1/At.meterInMercatorCoordinateUnits()}while(Math.abs(Xe-ct*ft)>1e-12);return{center:At.toLngLat(),elevation:Se,zoom:o.ak(this.height/2/Math.tan(this.fovInRadians/2)/ct/this.tileSize)}}recalculateZoomAndCenter(s){if(this.elevation-s==0)return;const f=o.aj(1,this.center.lat)*this.worldSize,_=this.cameraToCenterDistance/f,w=o.a1.fromLngLat(this.center,this.elevation),k=De(this.center,this.elevation,this.pitch,this.bearing,_);this._elevation=s;const N=this.calculateCenterFromCameraLngLatAlt(k.toLngLat(),o.aQ(k.z,w.y),this.bearing,this.pitch);this._elevation=N.elevation,this._center=N.center,this.setZoom(N.zoom)}getCameraPoint(){const s=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(s*Math.sin(this.rollInRadians),s*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const s=o.aj(1,this.center.lat)*this.worldSize;return De(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/s).toLngLat()}getMercatorTileCoordinates(s){if(!s)return[0,0,1,1];const f=s.canonical.z>=0?1<<s.canonical.z:Math.pow(2,s.canonical.z);return[s.canonical.x/f,s.canonical.y/f,1/f/o.$,1/f/o.$]}}class Fa{constructor(s,f){this.min=s,this.max=f,this.center=o.aR([],o.aS([],this.min,this.max),.5)}quadrant(s){const f=[s%2==0,s<2],_=o.aT(this.min),w=o.aT(this.max);for(let k=0;k<f.length;k++)_[k]=f[k]?this.min[k]:this.center[k],w[k]=f[k]?this.center[k]:this.max[k];return w[2]=this.max[2],new Fa(_,w)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}intersectsFrustum(s){let f=!0;for(let _=0;_<s.planes.length;_++){const w=this.intersectsPlane(s.planes[_]);if(w===0)return 0;w===1&&(f=!1)}return f?2:s.aabb.min[0]>this.max[0]||s.aabb.min[1]>this.max[1]||s.aabb.min[2]>this.max[2]||s.aabb.max[0]<this.min[0]||s.aabb.max[1]<this.min[1]||s.aabb.max[2]<this.min[2]?0:1}intersectsPlane(s){let f=s[3],_=s[3];for(let w=0;w<3;w++)s[w]>0?(f+=s[w]*this.min[w],_+=s[w]*this.max[w]):(_+=s[w]*this.min[w],f+=s[w]*this.max[w]);return f>=0?2:_<0?0:1}}class Sa{distanceToTile2d(s,f,_,w){const k=w.distanceX([s,f]),N=w.distanceY([s,f]);return Math.hypot(k,N)}getWrap(s,f,_){return _}getTileBoundingVolume(s,f,_,w){var k,N;let q=0,J=0;if(w?.terrain){const pe=new o.Z(s.z,f,s.z,s.x,s.y),Ee=w.terrain.getMinMaxElevation(pe);q=(k=Ee.minElevation)!==null&&k!==void 0?k:Math.min(0,_),J=(N=Ee.maxElevation)!==null&&N!==void 0?N:Math.max(0,_)}const he=1<<s.z;return new Fa([f+s.x/he,s.y/he,q],[f+(s.x+1)/he,(s.y+1)/he,J])}allowVariableZoom(s,f){const _=s.fov*(Math.abs(Math.cos(s.rollInRadians))*s.height+Math.abs(Math.sin(s.rollInRadians))*s.width)/s.height,w=o.ah(78.5-_/2,0,60);return!!f.terrain||s.pitch>w}allowWorldCopies(){return!0}prepareNextFrame(){}}class oa{constructor(s,f,_){this.points=s,this.planes=f,this.aabb=_}static fromInvProjectionMatrix(s,f=1,_=0,w,k){const N=k?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],q=Math.pow(2,_),J=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(Se=>function(Ue,Xe,At,ct){const ft=o.aw([],Ue,Xe),xt=1/ft[3]/At*ct;return o.aY(ft,ft,[xt,xt,1/ft[3],xt])}(Se,s,f,q));w&&function(Se,Ue,Xe,At){const ct=At?4:0,ft=At?0:4;let xt=0;const Ct=[],wt=[];for(let Bt=0;Bt<4;Bt++){const Yt=o.aU([],Se[Bt+ft],Se[Bt+ct]),dn=o.aZ(Yt);o.aR(Yt,Yt,1/dn),Ct.push(dn),wt.push(Yt)}for(let Bt=0;Bt<4;Bt++){const Yt=o.a_(Se[Bt+ct],wt[Bt],Xe);xt=Yt!==null&&Yt>=0?Math.max(xt,Yt):Math.max(xt,Ct[Bt])}const Pt=function(Bt,Yt){const dn=o.aU([],Bt[Yt[0]],Bt[Yt[1]]),Xt=o.aU([],Bt[Yt[2]],Bt[Yt[1]]),nn=[0,0,0,0];return o.aV(nn,o.aW([],dn,Xt)),nn[3]=-o.aX(nn,Bt[Yt[0]]),nn}(Se,Ue),Lt=function(Bt,Yt){const dn=o.a$(Bt),Xt=o.b0([],Bt,1/dn),nn=o.aU([],Yt,o.aR([],Xt,o.aX(Yt,Xt))),An=o.a$(nn);if(An>0){const qn=Math.sqrt(1-Xt[3]*Xt[3]),Qn=o.aR([],Xt,-Xt[3]),Tn=o.aS([],Qn,o.aR([],nn,qn/An));return o.b1(Yt,Tn)}return null}(Xe,Pt);if(Lt!==null){const Bt=Lt/o.aX(wt[0],Pt);xt=Math.min(xt,Bt)}for(let Bt=0;Bt<4;Bt++){const Yt=Math.min(xt,Ct[Bt]);Se[Bt+ft]=[Se[Bt+ct][0]+wt[Bt][0]*Yt,Se[Bt+ct][1]+wt[Bt][1]*Yt,Se[Bt+ct][2]+wt[Bt][2]*Yt,1]}}(J,N[0],w,k);const he=N.map(Se=>{const Ue=o.aU([],J[Se[0]],J[Se[1]]),Xe=o.aU([],J[Se[2]],J[Se[1]]),At=o.aV([],o.aW([],Ue,Xe)),ct=-o.aX(At,J[Se[1]]);return At.concat(ct)}),pe=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],Ee=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const Se of J)for(let Ue=0;Ue<3;Ue++)pe[Ue]=Math.min(pe[Ue],Se[Ue]),Ee[Ue]=Math.max(Ee[Ue],Se[Ue]);return new oa(J,he,new Fa(pe,Ee))}}class kr{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,f,_){return this._helper.interpolatePadding(s,f,_)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,f,_=!0){this._helper.resize(s,f,_)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,f){this._helper.overrideNearFarZ(s,f)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(s,f){}constructor(s,f,_,w,k){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Eo({calcMatrices:()=>{this._calcMatrices()},getConstrained:(N,q)=>this.getConstrained(N,q)},s,f,_,w,k),this._coveringTilesDetailsProvider=new Sa}clone(){const s=new kr;return s.apply(this),s}apply(s,f,_){this._helper.apply(s,f,_)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(s){const f=[new o.b2(0,s)];if(this._helper._renderWorldCopies){const _=this.screenPointToMercatorCoordinate(new o.P(0,0)),w=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),k=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),N=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),q=Math.floor(Math.min(_.x,w.x,k.x,N.x)),J=Math.floor(Math.max(_.x,w.x,k.x,N.x)),he=1;for(let pe=q-he;pe<=J+he;pe++)pe!==0&&f.push(new o.b2(pe,s))}return f}getCameraFrustum(){return oa.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(s){const f=this.screenPointToLocation(this.centerPoint,s),_=s?s.getElevationForLngLatZoom(f,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(_)}setLocationAtPoint(s,f){const _=o.aj(this.elevation,this.center.lat),w=this.screenPointToMercatorCoordinateAtZ(f,_),k=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,_),N=o.a1.fromLngLat(s),q=new o.a1(N.x-(w.x-k.x),N.y-(w.y-k.y));this.setCenter(q?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(s,f){return f?this.coordinatePoint(o.a1.fromLngLat(s),f.getElevationForLngLatZoom(s,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(o.a1.fromLngLat(s))}screenPointToLocation(s,f){var _;return(_=this.screenPointToMercatorCoordinate(s,f))===null||_===void 0?void 0:_.toLngLat()}screenPointToMercatorCoordinate(s,f){if(f){const _=f.pointCoordinate(s);if(_!=null)return _}return this.screenPointToMercatorCoordinateAtZ(s)}screenPointToMercatorCoordinateAtZ(s,f){const _=f||0,w=[s.x,s.y,0,1],k=[s.x,s.y,1,1];o.aw(w,w,this._pixelMatrixInverse),o.aw(k,k,this._pixelMatrixInverse);const N=w[3],q=k[3],J=w[1]/N,he=k[1]/q,pe=w[2]/N,Ee=k[2]/q,Se=pe===Ee?0:(_-pe)/(Ee-pe);return new o.a1(o.C.number(w[0]/N,k[0]/q,Se)/this.worldSize,o.C.number(J,he,Se)/this.worldSize,_)}coordinatePoint(s,f=0,_=this._pixelMatrix){const w=[s.x*this.worldSize,s.y*this.worldSize,f,1];return o.aw(w,w,_),new o.P(w[0]/w[3],w[1]/w[3])}getBounds(){const s=Math.max(0,this._helper._height/2-dt(this));return new vt().extend(this.screenPointToLocation(new o.P(0,s))).extend(this.screenPointToLocation(new o.P(this._helper._width,s))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(s,f){return f?f.pointCoordinate(s)!=null:s.y>this.height/2-dt(this)}calculatePosMatrix(s,f=!1,_){var w;const k=(w=s.key)!==null&&w!==void 0?w:o.b3(s.wrap,s.canonical.z,s.canonical.z,s.canonical.x,s.canonical.y),N=f?this._alignedPosMatrixCache:this._posMatrixCache;if(N.has(k)){const he=N.get(k);return _?he.f32:he.f64}const q=Ye(s,this.worldSize);o.O(q,f?this._alignedProjMatrix:this._viewProjMatrix,q);const J={f64:q,f32:new Float32Array(q)};return N.set(k,J),_?J.f32:J.f64}calculateFogMatrix(s){const f=s.key,_=this._fogMatrixCacheF32;if(_.has(f))return _.get(f);const w=Ye(s,this.worldSize);return o.O(w,this._fogMatrix,w),_.set(f,new Float32Array(w)),_.get(f)}getConstrained(s,f){f=o.ah(+f,this.minZoom,this.maxZoom);const _={center:new o.S(s.lng,s.lat),zoom:f};let w=this._helper._lngRange;if(!this._helper._renderWorldCopies&&w===null){const Ct=179.9999999999;w=[-Ct,Ct]}const k=this.tileSize*o.af(_.zoom);let N=0,q=k,J=0,he=k,pe=0,Ee=0;const{x:Se,y:Ue}=this.size;if(this._helper._latRange){const Ct=this._helper._latRange;N=o.U(Ct[1])*k,q=o.U(Ct[0])*k,q-N<Ue&&(pe=Ue/(q-N))}w&&(J=o.aO(o.V(w[0])*k,0,k),he=o.aO(o.V(w[1])*k,0,k),he<J&&(he+=k),he-J<Se&&(Ee=Se/(he-J)));const{x:Xe,y:At}=Te(k,s);let ct,ft;const xt=Math.max(Ee||0,pe||0);if(xt){const Ct=new o.P(Ee?(he+J)/2:Xe,pe?(q+N)/2:At);return _.center=We(k,Ct).wrap(),_.zoom+=o.ak(xt),_}if(this._helper._latRange){const Ct=Ue/2;At-Ct<N&&(ft=N+Ct),At+Ct>q&&(ft=q-Ct)}if(w){const Ct=(J+he)/2;let wt=Xe;this._helper._renderWorldCopies&&(wt=o.aO(Xe,Ct-k/2,Ct+k/2));const Pt=Se/2;wt-Pt<J&&(ct=J+Pt),wt+Pt>he&&(ct=he-Pt)}if(ct!==void 0||ft!==void 0){const Ct=new o.P(ct??Xe,ft??At);_.center=We(k,Ct).wrap()}return _}calculateCenterFromCameraLngLatAlt(s,f,_,w){return this._helper.calculateCenterFromCameraLngLatAlt(s,f,_,w)}_calculateNearFarZIfNeeded(s,f,_){if(!this._helper.autoCalculateNearFarZ)return;const w=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),k=s-w*this._helper._pixelPerMeter/Math.cos(f),N=w<0?k:s,q=Math.PI/2+this.pitchInRadians,J=o.ae(this.fov)*(Math.abs(Math.cos(o.ae(this.roll)))*this.height+Math.abs(Math.sin(o.ae(this.roll)))*this.width)/this.height*(.5+_.y/this.height),he=Math.sin(J)*N/Math.sin(o.ah(Math.PI-q-J,.01,Math.PI-.01)),pe=dt(this),Ee=Math.atan(pe/this._helper.cameraToCenterDistance),Se=o.ae(.75),Ue=Ee>Se?2*Ee*(.5+_.y/(2*pe)):Se,Xe=Math.sin(Ue)*N/Math.sin(o.ah(Math.PI-q-Ue,.01,Math.PI-.01)),At=Math.min(he,Xe);this._helper._farZ=1.01*(Math.cos(Math.PI/2-f)*At+N),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const s=this.centerOffset,f=Te(this.worldSize,this.center),_=f.x,w=f.y;this._helper._pixelPerMeter=o.aj(1,this.center.lat)*this.worldSize;const k=o.ae(Math.min(this.pitch,me)),N=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(k));let q;this._calculateNearFarZIfNeeded(N,k,s),q=new Float64Array(16),o.b4(q,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.aq(this._invProjMatrix,q),q[8]=2*-s.x/this._helper._width,q[9]=2*s.y/this._helper._height,this._projectionMatrix=o.b5(q),o.N(q,q,[1,-1,1]),o.M(q,q,[0,0,-this._helper.cameraToCenterDistance]),o.b6(q,q,-this.rollInRadians),o.b7(q,q,this.pitchInRadians),o.b6(q,q,-this.bearingInRadians),o.M(q,q,[-_,-w,0]),this._mercatorMatrix=o.N([],q,[this.worldSize,this.worldSize,this.worldSize]),o.N(q,q,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,q),o.M(q,q,[0,0,-this.elevation]),this._viewProjMatrix=q,this._invViewProjMatrix=o.aq([],q);const J=[0,0,-1,1];o.aw(J,J,this._invViewProjMatrix),this._cameraPosition=[J[0]/J[3],J[1]/J[3],J[2]/J[3]],this._fogMatrix=new Float64Array(16),o.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,N,this._helper._farZ),this._fogMatrix[8]=2*-s.x/this.width,this._fogMatrix[9]=2*s.y/this.height,o.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.M(this._fogMatrix,this._fogMatrix,[-_,-w,0]),o.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,q);const he=this._helper._width%2/2,pe=this._helper._height%2/2,Ee=Math.cos(this.bearingInRadians),Se=Math.sin(-this.bearingInRadians),Ue=_-Math.round(_)+Ee*he+Se*pe,Xe=w-Math.round(w)+Ee*pe+Se*he,At=new Float64Array(q);if(o.M(At,At,[Ue>.5?Ue-1:Ue,Xe>.5?Xe-1:Xe,0]),this._alignedProjMatrix=At,q=o.aq(new Float64Array(16),this._pixelMatrix),!q)throw new Error("failed to invert matrix");this._pixelMatrixInverse=q,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const s=this.screenPointToMercatorCoordinate(new o.P(0,0)),f=[s.x*this.worldSize,s.y*this.worldSize,0,1];return o.aw(f,f,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const s=o.aj(1,this.center.lat)*this.worldSize;return De(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/s).toLngLat()}lngLatToCameraDepth(s,f){const _=o.a1.fromLngLat(s),w=[_.x*this.worldSize,_.y*this.worldSize,f,1];return o.aw(w,w,this._viewProjMatrix),w[2]/w[3]}getProjectionData(s){const{overscaledTileID:f,aligned:_,applyTerrainMatrix:w}=s,k=this._helper.getMercatorTileCoordinates(f),N=f?this.calculatePosMatrix(f,_,!0):null;let q;return q=f&&f.terrainRttPosMatrix32f&&w?f.terrainRttPosMatrix32f:N||o.b8(),{mainMatrix:q,tileMercatorCoords:k,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:q}}isLocationOccluded(s){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(s,f,_){return 1}transformLightDirection(s){return o.aT(s)}getRayDirectionFromPixel(s){throw new Error("Not implemented.")}projectTileCoordinates(s,f,_,w){const k=this.calculatePosMatrix(_);let N;w?(N=[s,f,w(s,f),1],o.aw(N,N,k)):(N=[s,f,0,1],Ol(N,N,k));const q=N[3];return{point:new o.P(N[0]/q,N[1]/q),signedDistanceFromCamera:q,isOccluded:!1}}populateCache(s){for(const f of s)this.calculatePosMatrix(f)}getMatrixForModel(s,f){const _=o.a1.fromLngLat(s,f),w=_.meterInMercatorCoordinateUnits(),k=o.b9();return o.M(k,k,[_.x,_.y,_.z]),o.b6(k,k,Math.PI),o.b7(k,k,Math.PI/2),o.N(k,k,[-w,w,w]),k}getProjectionDataForCustomLayer(s=!0){const f=new o.Z(0,0,0,0,0),_=this.getProjectionData({overscaledTileID:f,applyGlobeMatrix:s}),w=Ye(f,this.worldSize);o.O(w,this._viewProjMatrix,w),_.tileMercatorCoords=[0,0,1,1];const k=[o.$,o.$,this.worldSize/this._helper.pixelsPerMeter],N=o.ba();return o.N(N,w,k),_.fallbackMatrix=N,_.mainMatrix=N,_}getFastPathSimpleProjectionMatrix(s){return this.calculatePosMatrix(s)}}function rA(){o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function za(I){if(I.useSlerp)if(I.k<1){const s=o.bb(I.startEulerAngles.roll,I.startEulerAngles.pitch,I.startEulerAngles.bearing),f=o.bb(I.endEulerAngles.roll,I.endEulerAngles.pitch,I.endEulerAngles.bearing),_=new Float64Array(4);o.bc(_,s,f,I.k);const w=o.bd(_);I.tr.setRoll(w.roll),I.tr.setPitch(w.pitch),I.tr.setBearing(w.bearing)}else I.tr.setRoll(I.endEulerAngles.roll),I.tr.setPitch(I.endEulerAngles.pitch),I.tr.setBearing(I.endEulerAngles.bearing);else I.tr.setRoll(o.C.number(I.startEulerAngles.roll,I.endEulerAngles.roll,I.k)),I.tr.setPitch(o.C.number(I.startEulerAngles.pitch,I.endEulerAngles.pitch,I.k)),I.tr.setBearing(o.C.number(I.startEulerAngles.bearing,I.endEulerAngles.bearing,I.k))}function Za(I,s,f,_,w){const k=w.padding,N=Te(w.worldSize,f.getNorthWest()),q=Te(w.worldSize,f.getNorthEast()),J=Te(w.worldSize,f.getSouthEast()),he=Te(w.worldSize,f.getSouthWest()),pe=o.ae(-_),Ee=N.rotate(pe),Se=q.rotate(pe),Ue=J.rotate(pe),Xe=he.rotate(pe),At=new o.P(Math.max(Ee.x,Se.x,Xe.x,Ue.x),Math.max(Ee.y,Se.y,Xe.y,Ue.y)),ct=new o.P(Math.min(Ee.x,Se.x,Xe.x,Ue.x),Math.min(Ee.y,Se.y,Xe.y,Ue.y)),ft=At.sub(ct),xt=(w.width-(k.left+k.right+s.left+s.right))/ft.x,Ct=(w.height-(k.top+k.bottom+s.top+s.bottom))/ft.y;if(Ct<0||xt<0)return void rA();const wt=Math.min(o.ak(w.scale*Math.min(xt,Ct)),I.maxZoom),Pt=o.P.convert(I.offset),Lt=new o.P((s.left-s.right)/2,(s.top-s.bottom)/2).rotate(o.ae(_)),Bt=Pt.add(Lt).mult(w.scale/o.af(wt));return{center:We(w.worldSize,N.add(J).div(2).sub(Bt)),zoom:wt,bearing:_}}class ya{get useGlobeControls(){return!1}handlePanInertia(s,f){const _=s.mag(),w=Math.abs(dt(f));return{easingOffset:s.mult(Math.min(.75*w/_,1)),easingCenter:f.center}}handleMapControlsRollPitchBearingZoom(s,f){s.bearingDelta&&f.setBearing(f.bearing+s.bearingDelta),s.pitchDelta&&f.setPitch(f.pitch+s.pitchDelta),s.rollDelta&&f.setRoll(f.roll+s.rollDelta),s.zoomDelta&&f.setZoom(f.zoom+s.zoomDelta)}handleMapControlsPan(s,f,_){s.around.distSqr(f.centerPoint)<.01||f.setLocationAtPoint(_,s.around)}cameraForBoxAndBearing(s,f,_,w,k){return Za(s,f,_,w,k)}handleJumpToCenterZoom(s,f){s.zoom!==(f.zoom!==void 0?+f.zoom:s.zoom)&&s.setZoom(+f.zoom),f.center!==void 0&&s.setCenter(o.S.convert(f.center))}handleEaseTo(s,f){const _=s.zoom,w=s.padding,k={roll:s.roll,pitch:s.pitch,bearing:s.bearing},N={roll:f.roll===void 0?s.roll:f.roll,pitch:f.pitch===void 0?s.pitch:f.pitch,bearing:f.bearing===void 0?s.bearing:f.bearing},q=f.zoom!==void 0,J=!s.isPaddingEqual(f.padding);let he=!1;const pe=q?+f.zoom:s.zoom;let Ee=s.centerPoint.add(f.offsetAsPoint);const Se=s.screenPointToLocation(Ee),{center:Ue,zoom:Xe}=s.getConstrained(o.S.convert(f.center||Se),pe??_);cu(s,Ue);const At=Te(s.worldSize,Se),ct=Te(s.worldSize,Ue).sub(At),ft=o.af(Xe-_);return he=Xe!==_,{easeFunc:xt=>{if(he&&s.setZoom(o.C.number(_,Xe,xt)),o.be(k,N)||za({startEulerAngles:k,endEulerAngles:N,tr:s,k:xt,useSlerp:k.roll!=N.roll}),J&&(s.interpolatePadding(w,f.padding,xt),Ee=s.centerPoint.add(f.offsetAsPoint)),f.around)s.setLocationAtPoint(f.around,f.aroundPoint);else{const Ct=o.af(s.zoom-_),wt=Xe>_?Math.min(2,ft):Math.max(.5,ft),Pt=Math.pow(wt,1-xt),Lt=We(s.worldSize,At.add(ct.mult(xt*Pt)).mult(Ct));s.setLocationAtPoint(s.renderWorldCopies?Lt.wrap():Lt,Ee)}},isZooming:he,elevationCenter:Ue}}handleFlyTo(s,f){const _=f.zoom!==void 0,w=s.zoom,k=s.getConstrained(o.S.convert(f.center||f.locationAtOffset),_?+f.zoom:w),N=k.center,q=k.zoom;cu(s,N);const J=Te(s.worldSize,f.locationAtOffset),he=Te(s.worldSize,N).sub(J),pe=he.mag(),Ee=o.af(q-w);let Se;if(f.minZoom!==void 0){const Ue=Math.min(+f.minZoom,w,q),Xe=s.getConstrained(N,Ue).zoom;Se=o.af(Xe-w)}return{easeFunc:(Ue,Xe,At,ct)=>{s.setZoom(Ue===1?q:w+o.ak(Xe));const ft=Ue===1?N:We(s.worldSize,J.add(he.mult(At)).mult(Xe));s.setLocationAtPoint(s.renderWorldCopies?ft.wrap():ft,ct)},scaleOfZoom:Ee,targetCenter:N,scaleOfMinZoom:Se,pixelPathLength:pe}}}class Dr{constructor(s,f,_){this.blendFunction=s,this.blendColor=f,this.mask=_}}Dr.Replace=[1,0],Dr.disabled=new Dr(Dr.Replace,o.bf.transparent,[!1,!1,!1,!1]),Dr.unblended=new Dr(Dr.Replace,o.bf.transparent,[!0,!0,!0,!0]),Dr.alphaBlended=new Dr([1,771],o.bf.transparent,[!0,!0,!0,!0]);const vl=2305;class Zi{constructor(s,f,_){this.enable=s,this.mode=f,this.frontFace=_}}Zi.disabled=new Zi(!1,1029,vl),Zi.backCCW=new Zi(!0,1029,vl),Zi.frontCCW=new Zi(!0,1028,vl);class Mi{constructor(s,f,_){this.func=s,this.mask=f,this.range=_}}Mi.ReadOnly=!1,Mi.ReadWrite=!0,Mi.disabled=new Mi(519,Mi.ReadOnly,[0,1]);const Qr=7680;class te{constructor(s,f,_,w,k,N){this.test=s,this.ref=f,this.mask=_,this.fail=w,this.depthFail=k,this.pass=N}}te.disabled=new te({func:519,mask:0},0,0,Qr,Qr,Qr);const Oe=new WeakMap;function st(I){var s;if(Oe.has(I))return Oe.get(I);{const f=(s=I.getParameter(I.VERSION))===null||s===void 0?void 0:s.startsWith("WebGL 2.0");return Oe.set(I,f),f}}class jt{get awaitingQuery(){return!!this._readbackQueue}constructor(s){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=s;const f=s.context,_=f.gl;this._texFormat=_.RGBA,this._texType=_.UNSIGNED_BYTE;const w=new o.aL;w.emplaceBack(-1,-1),w.emplaceBack(2,-1),w.emplaceBack(-1,2);const k=new o.aN;k.emplaceBack(0,1,2),this._fullscreenTriangle=new Kl(f.createVertexBuffer(w,ga.members),f.createIndexBuffer(k),o.aM.simpleSegment(0,0,w.length,k.length)),this._resultBuffer=new Uint8Array(4),f.activeTexture.set(_.TEXTURE1);const N=_.createTexture();_.bindTexture(_.TEXTURE_2D,N),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texImage2D(_.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=f.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(N),st(_)&&(this._pbo=_.createBuffer(),_.bindBuffer(_.PIXEL_PACK_BUFFER,this._pbo),_.bufferData(_.PIXEL_PACK_BUFFER,4,_.STREAM_READ),_.bindBuffer(_.PIXEL_PACK_BUFFER,null))}destroy(){const s=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),s.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(s,f){const _=this._updateCount;return this._readbackQueue?_>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():_>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(s,f),this._updateCount++,this._measuredError}_bindFramebuffer(){const s=this._cachedRenderContext.context,f=s.gl;s.activeTexture.set(f.TEXTURE1),f.bindTexture(f.TEXTURE_2D,this._fbo.colorAttachment.get()),s.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(s,f){const _=this._cachedRenderContext.context,w=_.gl;if(this._bindFramebuffer(),_.viewport.set([0,0,this._texWidth,this._texHeight]),_.clear({color:o.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(_,w.TRIANGLES,Mi.disabled,te.disabled,Dr.unblended,Zi.disabled,((k,N)=>({u_input:k,u_output_expected:N}))(s,f),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&st(w)){w.bindBuffer(w.PIXEL_PACK_BUFFER,this._pbo),w.readBuffer(w.COLOR_ATTACHMENT0),w.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),w.bindBuffer(w.PIXEL_PACK_BUFFER,null);const k=w.fenceSync(w.SYNC_GPU_COMMANDS_COMPLETE,0);w.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:k}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const s=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&st(s)){const f=s.clientWaitSync(this._readbackQueue.sync,0,0);if(f===s.WAIT_FAILED)return o.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(f===s.TIMEOUT_EXPIRED)return;s.bindBuffer(s.PIXEL_PACK_BUFFER,this._pbo),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),s.bindBuffer(s.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),s.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=jt._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(s){let f=0;return f+=s[0]/256,f+=s[1]/65536,f+=s[2]/16777216,s[3]<127&&(f=-f),f/128}}const Si=o.$/128;function Xn(I,s){const f=I.granularity!==void 0?Math.max(I.granularity,1):1,_=f+(I.generateBorders?2:0),w=f+(I.extendToNorthPole||I.generateBorders?1:0)+(I.extendToSouthPole||I.generateBorders?1:0),k=_+1,N=w+1,q=I.generateBorders?-1:0,J=I.generateBorders||I.extendToNorthPole?-1:0,he=f+(I.generateBorders?1:0),pe=f+(I.generateBorders||I.extendToSouthPole?1:0),Ee=k*N,Se=_*w*6,Ue=k*N>65536;if(Ue&&s==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const Xe=Ue||s==="32bit",At=new Int16Array(2*Ee);let ct=0;for(let Ct=J;Ct<=pe;Ct++)for(let wt=q;wt<=he;wt++){let Pt=wt/f*o.$;wt===-1&&(Pt=-Si),wt===f+1&&(Pt=o.$+Si);let Lt=Ct/f*o.$;Ct===-1&&(Lt=I.extendToNorthPole?o.bh:-Si),Ct===f+1&&(Lt=I.extendToSouthPole?o.bi:o.$+Si),At[ct++]=Pt,At[ct++]=Lt}const ft=Xe?new Uint32Array(Se):new Uint16Array(Se);let xt=0;for(let Ct=0;Ct<w;Ct++)for(let wt=0;wt<_;wt++){const Pt=wt+1+Ct*k,Lt=wt+(Ct+1)*k,Bt=wt+1+(Ct+1)*k;ft[xt++]=wt+Ct*k,ft[xt++]=Lt,ft[xt++]=Pt,ft[xt++]=Pt,ft[xt++]=Lt,ft[xt++]=Bt}return{vertices:At.buffer.slice(0),indices:ft.buffer.slice(0),uses32bitIndices:Xe}}const $i=new o.aK({fill:new o.bj(128,2),line:new o.bj(512,0),tile:new o.bj(128,32),stencil:new o.bj(128,1),circle:3});class or{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return ko.projectionGlobe}get vertexShaderPreludeCode(){return ko.projectionMercator.vertexSource}get subdivisionGranularity(){return $i}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(s){this._errorMeasurement||(this._errorMeasurement=new jt(s));const f=o.U(this._errorQueryLatitudeDegrees),_=2*Math.atan(Math.exp(Math.PI-f*Math.PI*2))-.5*Math.PI,w=this._errorMeasurement.updateErrorLoop(f,_),k=U.now();w!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=w,this._errorMeasurementLastChangeTime=k);const N=Math.min(Math.max((k-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.bl(N))}_getMeshKey(s){return`${s.granularity.toString(36)}_${s.generateBorders?"b":""}${s.extendToNorthPole?"n":""}${s.extendToSouthPole?"s":""}`}getMeshFromTileID(s,f,_,w,k){const N=(k==="stencil"?$i.stencil:$i.tile).getGranularityForZoomLevel(f.z);return this._getMesh(s,{granularity:N,generateBorders:_,extendToNorthPole:f.y===0&&w,extendToSouthPole:f.y===(1<<f.z)-1&&w})}_getMesh(s,f){const _=this._getMeshKey(f);if(_ in this._tileMeshCache)return this._tileMeshCache[_];const w=function(k,N){const q=Xn(N,"16bit"),J=o.aL.deserialize({arrayBuffer:q.vertices,length:q.vertices.byteLength/2/2}),he=o.aN.deserialize({arrayBuffer:q.indices,length:q.indices.byteLength/2/3});return new Kl(k.createVertexBuffer(J,ga.members),k.createIndexBuffer(he),o.aM.simpleSegment(0,0,J.length,he.length))}(s,f);return this._tileMeshCache[_]=w,w}recalculate(s){}hasTransition(){const s=U.now();let f=!1;return f=f||(s-this._errorMeasurementLastChangeTime)/1e3<.7,f=f||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,f}setErrorQueryLatitudeDegrees(s){this._errorQueryLatitudeDegrees=s}}const Di=new o.r({type:new o.D(o.v.projection.type)});class Xi extends o.E{constructor(s){super(),this._transitionable=new o.t(Di),this.setProjection(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.F(0)),this._mercatorProjection=new br,this._verticalPerspectiveProjection=new or}get transitionState(){const s=this.properties.get("type");if(typeof s=="string"&&s==="mercator")return 0;if(typeof s=="string"&&s==="vertical-perspective")return 1;if(s instanceof o.bm){if(s.from==="vertical-perspective"&&s.to==="mercator")return 1-s.transition;if(s.from==="mercator"&&s.to==="vertical-perspective")return s.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(s){this._mercatorProjection.updateGPUdependent(s),this._verticalPerspectiveProjection.updateGPUdependent(s)}getMeshFromTileID(s,f,_,w,k){return this.currentProjection.getMeshFromTileID(s,f,_,w,k)}setProjection(s){this._transitionable.setValue("type",s?.type||"mercator")}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}setErrorQueryLatitudeDegrees(s){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(s),this._mercatorProjection.setErrorQueryLatitudeDegrees(s)}}function eo(I){const s=pr(I.worldSize,I.center.lat);return 2*Math.PI*s}function uo(I,s,f,_,w){const k=1/(1<<w),N=s/o.$*k+_*k,q=o.bo((I/o.$*k+f*k)*Math.PI*2+Math.PI,2*Math.PI),J=2*Math.atan(Math.exp(Math.PI-N*Math.PI*2))-.5*Math.PI,he=Math.cos(J),pe=new Float64Array(3);return pe[0]=Math.sin(q)*he,pe[1]=Math.sin(J),pe[2]=Math.cos(q)*he,pe}function ur(I){return function(s,f){const _=Math.cos(f),w=new Float64Array(3);return w[0]=Math.sin(s)*_,w[1]=Math.sin(f),w[2]=Math.cos(s)*_,w}(I.lng*Math.PI/180,I.lat*Math.PI/180)}function pr(I,s){return I/(2*Math.PI)/Math.cos(s*Math.PI/180)}function co(I){const s=Math.asin(I[1])/Math.PI*180,f=Math.sqrt(I[0]*I[0]+I[2]*I[2]);if(f>1e-6){const _=I[0]/f,w=Math.acos(I[2]/f),k=(_>0?w:-w)/Math.PI*180;return new o.S(o.aO(k,-180,180),s)}return new o.S(0,s)}function Go(I){return Math.cos(I*Math.PI/180)}function zr(I,s){const f=Go(I),_=Go(s);return o.ak(_/f)}function Ys(I,s){const f=I.rotate(s.bearingInRadians),_=s.zoom+zr(s.center.lat,0),w=o.bk(1/Go(s.center.lat),1/Go(Math.min(Math.abs(s.center.lat),60)),o.bn(_,7,3,0,1)),k=360/eo({worldSize:s.worldSize,center:{lat:s.center.lat}});return new o.S(s.center.lng-f.x*k*w,o.ah(s.center.lat+f.y*k,-o.ai,o.ai))}function Ll(I){const s=.5*I,f=Math.sin(s),_=Math.cos(s);return Math.log(f+_)-Math.log(_-f)}function qA(I,s,f,_){const w=I.lat+f*_;if(Math.abs(f)>1){const k=(Math.sign(I.lat+f)!==Math.sign(I.lat)?-Math.abs(I.lat):Math.abs(I.lat))*Math.PI/180,N=Math.abs(I.lat+f)*Math.PI/180,q=Ll(k+_*(N-k)),J=Ll(k),he=Ll(N);return new o.S(I.lng+s*((q-J)/(he-J)),w)}return new o.S(I.lng+s*_,w)}class fs{constructor(s){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=s}swapBuffers(){if(!this._hadAnyChanges)return;const s=this._cachePrevious;this._cachePrevious=this._cache,this._cache=s,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(s,f,_,w){const k=`${s.z}_${s.x}_${s.y}_${w?.terrain?"t":""}`,N=this._cache.get(k);if(N)return N;const q=this._cachePrevious.get(k);if(q)return this._cache.set(k,q),q;const J=this._boundingVolumeFactory(s,f,_,w);return this._cache.set(k,J),this._hadAnyChanges=!0,J}}class gd{constructor(s,f,_,w){this.min=_,this.max=w,this.points=s,this.planes=f}static fromAabb(s,f){const _=[];for(let w=0;w<8;w++)_.push([1&~w?s[0]:f[0],(w>>1&1)==1?f[1]:s[1],(w>>2&1)==1?f[2]:s[2]]);return new gd(_,[[-1,0,0,f[0]],[1,0,0,-s[0]],[0,-1,0,f[1]],[0,1,0,-s[1]],[0,0,-1,f[2]],[0,0,1,-s[2]]],s,f)}static fromCenterSizeAngles(s,f,_){const w=o.br([],_[0],_[1],_[2]),k=o.bs([],[f[0],0,0],w),N=o.bs([],[0,f[1],0],w),q=o.bs([],[0,0,f[2]],w),J=[...s],he=[...s];for(let Ee=0;Ee<8;Ee++)for(let Se=0;Se<3;Se++){const Ue=s[Se]+k[Se]*(1&~Ee?-1:1)+N[Se]*((Ee>>1&1)==1?1:-1)+q[Se]*((Ee>>2&1)==1?1:-1);J[Se]=Math.min(J[Se],Ue),he[Se]=Math.max(he[Se],Ue)}const pe=[];for(let Ee=0;Ee<8;Ee++){const Se=[...s];o.aS(Se,Se,o.aR([],k,1&~Ee?-1:1)),o.aS(Se,Se,o.aR([],N,(Ee>>1&1)==1?1:-1)),o.aS(Se,Se,o.aR([],q,(Ee>>2&1)==1?1:-1)),pe.push(Se)}return new gd(pe,[[...k,-o.aX(k,pe[0])],[...N,-o.aX(N,pe[0])],[...q,-o.aX(q,pe[0])],[-k[0],-k[1],-k[2],-o.aX(k,pe[7])],[-N[0],-N[1],-N[2],-o.aX(N,pe[7])],[-q[0],-q[1],-q[2],-o.aX(q,pe[7])]],J,he)}intersectsFrustum(s){let f=!0;const _=this.points.length,w=this.planes.length,k=s.planes.length,N=s.points.length;for(let q=0;q<k;q++){const J=s.planes[q];let he=0;for(let pe=0;pe<_;pe++){const Ee=this.points[pe];J[0]*Ee[0]+J[1]*Ee[1]+J[2]*Ee[2]+J[3]>=0&&he++}if(he===0)return 0;he<_&&(f=!1)}if(f)return 2;for(let q=0;q<w;q++){const J=this.planes[q];let he=0;for(let pe=0;pe<N;pe++){const Ee=s.points[pe];J[0]*Ee[0]+J[1]*Ee[1]+J[2]*Ee[2]+J[3]>=0&&he++}if(he===0)return 0}return 1}intersectsPlane(s){const f=this.points.length;let _=0;for(let w=0;w<f;w++){const k=this.points[w];s[0]*k[0]+s[1]*k[1]+s[2]*k[2]+s[3]>=0&&_++}return _===f?2:_===0?0:1}}function Da(I,s,f){const _=I-s;return _<0?-_:Math.max(0,_-f)}function yd(I,s,f,_,w){const k=I-f;let N;return N=k<0?Math.min(-k,1+k-w):k>1?Math.min(Math.max(k-w,0),1-k):0,Math.max(N,Da(s,_,w))}class Ru{constructor(){this._boundingVolumeCache=new fs(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(s,f,_,w){const k=1<<_.z,N=1/k,q=_.x/k,J=_.y/k;let he=2;return he=Math.min(he,yd(s,f,q,J,N)),he=Math.min(he,yd(s,f,q+.5,-J-N,N)),he=Math.min(he,yd(s,f,q+.5,2-J-N,N)),he}getWrap(s,f,_){const w=1<<f.z,k=1/w,N=f.x/w,q=Da(s.x,N,k),J=Da(s.x,N-1,k),he=Da(s.x,N+1,k),pe=Math.min(q,J,he);return pe===he?1:pe===J?-1:0}allowVariableZoom(s,f){return kt(s,f)>4}allowWorldCopies(){return!1}getTileBoundingVolume(s,f,_,w){return this._boundingVolumeCache.getTileBoundingVolume(s,f,_,w)}_computeTileBoundingVolume(s,f,_,w){var k,N;let q=0,J=0;if(w?.terrain){const he=new o.Z(s.z,f,s.z,s.x,s.y),pe=w.terrain.getMinMaxElevation(he);q=(k=pe.minElevation)!==null&&k!==void 0?k:Math.min(0,_),J=(N=pe.maxElevation)!==null&&N!==void 0?N:Math.max(0,_)}if(q/=o.bu,J/=o.bu,q+=1,J+=1,s.z<=0)return gd.fromAabb([-J,-J,-J],[J,J,J]);if(s.z===1)return gd.fromAabb([s.x===0?-J:0,s.y===0?0:-J,-J],[s.x===0?0:J,s.y===0?J:0,J]);{const he=[uo(0,0,s.x,s.y,s.z),uo(o.$,0,s.x,s.y,s.z),uo(o.$,o.$,s.x,s.y,s.z),uo(0,o.$,s.x,s.y,s.z)],pe=[];for(const nn of he)pe.push(o.aR([],nn,J));if(J!==q)for(const nn of he)pe.push(o.aR([],nn,q));s.y===0&&pe.push([0,1,0]),s.y===(1<<s.z)-1&&pe.push([0,-1,0]);const Ee=[1,1,1],Se=[-1,-1,-1];for(const nn of pe)for(let An=0;An<3;An++)Ee[An]=Math.min(Ee[An],nn[An]),Se[An]=Math.max(Se[An],nn[An]);const Ue=uo(o.$/2,o.$/2,s.x,s.y,s.z),Xe=o.aW([],[0,1,0],Ue);o.aV(Xe,Xe);const At=o.aW([],Ue,Xe);o.aV(At,At);const ct=o.aW([],he[2],he[1]);o.aV(ct,ct);const ft=o.aW([],he[0],he[3]);o.aV(ft,ft),pe.push(o.aR([],Ue,J)),s.y>=(1<<s.z)/2&&pe.push(o.aR([],uo(o.$/2,0,s.x,s.y,s.z),J)),s.y<(1<<s.z)/2&&pe.push(o.aR([],uo(o.$/2,o.$,s.x,s.y,s.z),J));const xt=HA(Ue,pe),Ct=HA(At,pe),wt=[-Ue[0],-Ue[1],-Ue[2],xt.max],Pt=[Ue[0],Ue[1],Ue[2],-xt.min],Lt=[-At[0],-At[1],-At[2],Ct.max],Bt=[At[0],At[1],At[2],-Ct.min],Yt=[...ct,0],dn=[...ft,0],Xt=[];return s.y===0?Xt.push(o.bt(dn,Yt,wt),o.bt(dn,Yt,Pt)):Xt.push(o.bt(Lt,Yt,wt),o.bt(Lt,Yt,Pt),o.bt(Lt,dn,wt),o.bt(Lt,dn,Pt)),s.y===(1<<s.z)-1?Xt.push(o.bt(dn,Yt,wt),o.bt(dn,Yt,Pt)):Xt.push(o.bt(Bt,Yt,wt),o.bt(Bt,Yt,Pt),o.bt(Bt,dn,wt),o.bt(Bt,dn,Pt)),new gd(Xt,[wt,Pt,Lt,Bt,Yt,dn],Ee,Se)}}}function HA(I,s){let f=1/0,_=-1/0;for(const w of s){const k=o.aX(I,w);f=Math.min(f,k),_=Math.max(_,k)}return{min:f,max:_}}class ph{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,f,_){return this._helper.interpolatePadding(s,f,_)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,f){this._helper.resize(s,f)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,f){this._helper.overrideNearFarZ(s,f)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(s){}constructor(){this._cachedClippingPlane=o.bv(),this._projectionMatrix=o.b9(),this._globeViewProjMatrix32f=o.b8(),this._globeViewProjMatrixNoCorrection=o.b9(),this._globeViewProjMatrixNoCorrectionInverted=o.b9(),this._globeProjMatrixInverted=o.b9(),this._cameraPosition=o.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Eo({calcMatrices:()=>{this._calcMatrices()},getConstrained:(s,f)=>this.getConstrained(s,f)}),this._coveringTilesDetailsProvider=new Ru}clone(){const s=new ph;return s.apply(this),s}apply(s,f){this._globeLatitudeErrorCorrectionRadians=f||0,this._helper.apply(s)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const s=o.bp();return s[0]=this._cameraPosition[0],s[1]=this._cameraPosition[1],s[2]=this._cameraPosition[2],s}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(s){const{overscaledTileID:f,applyGlobeMatrix:_}=s,w=this._helper.getMercatorTileCoordinates(f);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:w,clippingPlane:this._cachedClippingPlane,projectionTransition:_?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(s){const f=this.pitchInRadians,_=this.cameraToCenterDistance/s,w=Math.sin(f)*_,k=Math.cos(f)*_+1,N=1/Math.sqrt(w*w+k*k)*1;let q=-w,J=k;const he=Math.sqrt(q*q+J*J);q/=he,J/=he;const pe=[0,q,J];o.bw(pe,pe,[0,0,0],-this.bearingInRadians),o.bx(pe,pe,[0,0,0],-1*this.center.lat*Math.PI/180),o.by(pe,pe,[0,0,0],this.center.lng*Math.PI/180);const Ee=1/o.aZ(pe);return o.aR(pe,pe,Ee),[...pe,-N*Ee]}isLocationOccluded(s){return!this.isSurfacePointVisible(ur(s))}transformLightDirection(s){const f=this._helper._center.lng*Math.PI/180,_=this._helper._center.lat*Math.PI/180,w=Math.cos(_),k=[Math.sin(f)*w,Math.sin(_),Math.cos(f)*w],N=[k[2],0,-k[0]],q=[0,0,0];o.aW(q,N,k),o.aV(N,N),o.aV(q,q);const J=[0,0,0];return o.aV(J,[N[0]*s[0]+q[0]*s[1]+k[0]*s[2],N[1]*s[0]+q[1]*s[1]+k[1]*s[2],N[2]*s[0]+q[2]*s[1]+k[2]*s[2]]),J}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(s,f,_){const w=function(q,J,he){const pe=1/(1<<he.z);return new o.a1(q/o.$*pe+he.x*pe,J/o.$*pe+he.y*pe)}(s,f,_.canonical),k=(N=w.y,[o.bo(w.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-N*Math.PI*2))-.5*Math.PI]);var N;return this.getCircleRadiusCorrection()/Math.cos(k[1])}projectTileCoordinates(s,f,_,w){const k=_.canonical,N=uo(s,f,k.x,k.y,k.z),q=1+(w?w(s,f):0)/o.bu,J=[N[0]*q,N[1]*q,N[2]*q,1];o.aw(J,J,this._globeViewProjMatrixNoCorrection);const he=this._cachedClippingPlane,pe=he[0]*N[0]+he[1]*N[1]+he[2]*N[2]+he[3]<0;return{point:new o.P(J[0]/J[3],J[1]/J[3]),signedDistanceFromCamera:J[3],isOccluded:pe}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const s=pr(this.worldSize,this.center.lat),f=o.ba(),_=o.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*s),o.b4(f,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const w=this.centerOffset;f[8]=2*-w.x/this._helper._width,f[9]=2*w.y/this._helper._height,this._projectionMatrix=o.b5(f),this._globeProjMatrixInverted=o.ba(),o.aq(this._globeProjMatrixInverted,f),o.M(f,f,[0,0,-this.cameraToCenterDistance]),o.b6(f,f,this.rollInRadians),o.b7(f,f,-this.pitchInRadians),o.b6(f,f,this.bearingInRadians),o.M(f,f,[0,0,-s]);const k=o.bp();k[0]=s,k[1]=s,k[2]=s,o.b7(_,f,this.center.lat*Math.PI/180),o.bz(_,_,-this.center.lng*Math.PI/180),o.N(_,_,k),this._globeViewProjMatrixNoCorrection=_,o.b7(f,f,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.bz(f,f,-this.center.lng*Math.PI/180),o.N(f,f,k),this._globeViewProjMatrix32f=new Float32Array(f),this._globeViewProjMatrixNoCorrectionInverted=o.ba(),o.aq(this._globeViewProjMatrixNoCorrectionInverted,_);const N=o.bp();this._cameraPosition=o.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/s,o.bw(this._cameraPosition,this._cameraPosition,N,-this.rollInRadians),o.bx(this._cameraPosition,this._cameraPosition,N,this.pitchInRadians),o.bw(this._cameraPosition,this._cameraPosition,N,-this.bearingInRadians),o.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bx(this._cameraPosition,this._cameraPosition,N,-this.center.lat*Math.PI/180),o.by(this._cameraPosition,this._cameraPosition,N,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(s);const q=o.b5(this._globeViewProjMatrixNoCorrectionInverted);o.N(q,q,[1,1,-1]),this._cachedFrustum=oa.fromInvProjectionMatrix(q,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(s){o.w("calculateFogMatrix is not supported on globe projection.");const f=o.ba();return o.ag(f),f}getVisibleUnwrappedCoordinates(s){return[new o.b2(0,s)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(s){s&&o.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(s,f){if(!this._globeViewProjMatrixNoCorrection)return 1;const _=ur(s);o.aR(_,_,1+f/o.bu);const w=o.bv();return o.aw(w,[_[0],_[1],_[2],1],this._globeViewProjMatrixNoCorrection),w[2]/w[3]}populateCache(s){}getBounds(){const s=.5*this.width,f=.5*this.height,_=[new o.P(0,0),new o.P(s,0),new o.P(this.width,0),new o.P(this.width,f),new o.P(this.width,this.height),new o.P(s,this.height),new o.P(0,this.height),new o.P(0,f)],w=[];for(const Ee of _)w.push(this.unprojectScreenPoint(Ee));let k=0,N=0,q=0,J=0;const he=this.center;for(const Ee of w){const Se=o.bA(he.lng,Ee.lng),Ue=o.bA(he.lat,Ee.lat);Se<N&&(N=Se),Se>k&&(k=Se),Ue<J&&(J=Ue),Ue>q&&(q=Ue)}const pe=[he.lng+N,he.lat+J,he.lng+k,he.lat+q];return this.isSurfacePointOnScreen([0,1,0])&&(pe[3]=90,pe[0]=-180,pe[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(pe[1]=-90,pe[0]=-180,pe[2]=180),new vt(pe)}getConstrained(s,f){const _=o.ah(s.lat,-o.ai,o.ai),w=o.ah(+f,this.minZoom+zr(0,_),this.maxZoom);return{center:new o.S(s.lng,_),zoom:w}}calculateCenterFromCameraLngLatAlt(s,f,_,w){return this._helper.calculateCenterFromCameraLngLatAlt(s,f,_,w)}setLocationAtPoint(s,f){const _=ur(this.unprojectScreenPoint(f)),w=ur(s),k=o.bp();o.bB(k);const N=o.bp();o.by(N,_,k,-this.center.lng*Math.PI/180),o.bx(N,N,k,this.center.lat*Math.PI/180);const q=w[0]*w[0]+w[2]*w[2],J=N[0]*N[0];if(q<J)return;const he=Math.sqrt(q-J),pe=-he,Ee=o.bC(w[0],w[2],N[0],he),Se=o.bC(w[0],w[2],N[0],pe),Ue=o.bp();o.by(Ue,w,k,-Ee);const Xe=o.bC(Ue[1],Ue[2],N[1],N[2]),At=o.bp();o.by(At,w,k,-Se);const ct=o.bC(At[1],At[2],N[1],N[2]),ft=.5*Math.PI,xt=Xe>=-ft&&Xe<=ft,Ct=ct>=-ft&&ct<=ft;let wt,Pt;if(xt&&Ct){const dn=this.center.lng*Math.PI/180,Xt=this.center.lat*Math.PI/180;o.bD(Ee,dn)+o.bD(Xe,Xt)<o.bD(Se,dn)+o.bD(ct,Xt)?(wt=Ee,Pt=Xe):(wt=Se,Pt=ct)}else if(xt)wt=Ee,Pt=Xe;else{if(!Ct)return;wt=Se,Pt=ct}const Lt=wt/Math.PI*180,Bt=Pt/Math.PI*180,Yt=this.center.lat;this.setCenter(new o.S(Lt,o.ah(Bt,-90,90))),this.setZoom(this.zoom+zr(Yt,this.center.lat))}locationToScreenPoint(s,f){const _=ur(s);if(f){const w=f.getElevationForLngLatZoom(s,this._helper._tileZoom);o.aR(_,_,1+w/o.bu)}return this._projectSurfacePointToScreen(_)}_projectSurfacePointToScreen(s){const f=o.bv();return o.aw(f,[...s,1],this._globeViewProjMatrixNoCorrection),f[0]/=f[3],f[1]/=f[3],new o.P((.5*f[0]+.5)*this.width,(.5*-f[1]+.5)*this.height)}screenPointToMercatorCoordinate(s,f){if(f){const _=f.pointCoordinate(s);if(_)return _}return o.a1.fromLngLat(this.unprojectScreenPoint(s))}screenPointToLocation(s,f){var _;return(_=this.screenPointToMercatorCoordinate(s,f))===null||_===void 0?void 0:_.toLngLat()}isPointOnMapSurface(s,f){const _=this._cameraPosition,w=this.getRayDirectionFromPixel(s);return!!this.rayPlanetIntersection(_,w)}getRayDirectionFromPixel(s){const f=o.bv();f[0]=s.x/this.width*2-1,f[1]=-1*(s.y/this.height*2-1),f[2]=1,f[3]=1,o.aw(f,f,this._globeViewProjMatrixNoCorrectionInverted),f[0]/=f[3],f[1]/=f[3],f[2]/=f[3];const _=o.bp();_[0]=f[0]-this._cameraPosition[0],_[1]=f[1]-this._cameraPosition[1],_[2]=f[2]-this._cameraPosition[2];const w=o.bp();return o.aV(w,_),w}isSurfacePointVisible(s){const f=this._cachedClippingPlane;return f[0]*s[0]+f[1]*s[1]+f[2]*s[2]+f[3]>=0}isSurfacePointOnScreen(s){if(!this.isSurfacePointVisible(s))return!1;const f=o.bv();return o.aw(f,[...s,1],this._globeViewProjMatrixNoCorrection),f[0]/=f[3],f[1]/=f[3],f[2]/=f[3],f[0]>-1&&f[0]<1&&f[1]>-1&&f[1]<1&&f[2]>-1&&f[2]<1}rayPlanetIntersection(s,f){const _=o.aX(s,f),w=o.bp(),k=o.bp();o.aR(k,f,_),o.aU(w,s,k);const N=1-o.aX(w,w);if(N<0)return null;const q=o.aX(s,s)-1,J=-_+(_<0?1:-1)*Math.sqrt(N),he=q/J,pe=J;return{tMin:Math.min(he,pe),tMax:Math.max(he,pe)}}unprojectScreenPoint(s){const f=this._cameraPosition,_=this.getRayDirectionFromPixel(s),w=this.rayPlanetIntersection(f,_);if(w){const pe=o.bp();o.aS(pe,f,[_[0]*w.tMin,_[1]*w.tMin,_[2]*w.tMin]);const Ee=o.bp();return o.aV(Ee,pe),co(Ee)}const k=this._cachedClippingPlane,N=k[0]*_[0]+k[1]*_[1]+k[2]*_[2],q=-o.b1(k,f)/N,J=o.bp();if(q>0)o.aS(J,f,[_[0]*q,_[1]*q,_[2]*q]);else{const pe=o.bp();o.aS(pe,f,[2*_[0],2*_[1],2*_[2]]);const Ee=o.b1(this._cachedClippingPlane,pe);o.aU(J,pe,[this._cachedClippingPlane[0]*Ee,this._cachedClippingPlane[1]*Ee,this._cachedClippingPlane[2]*Ee])}const he=function(pe){const Ee=o.bp();return Ee[0]=pe[0]*-pe[3],Ee[1]=pe[1]*-pe[3],Ee[2]=pe[2]*-pe[3],{center:Ee,radius:Math.sqrt(1-pe[3]*pe[3])}}(k);return co(function(pe,Ee,Se){const Ue=o.bp();o.aU(Ue,Se,pe);const Xe=o.bp();return o.bq(Xe,pe,Ue,Ee/o.a$(Ue)),Xe}(he.center,he.radius,J))}getMatrixForModel(s,f){const _=o.S.convert(s),w=1/o.bu,k=o.b9();return o.bz(k,k,_.lng/180*Math.PI),o.b7(k,k,-_.lat/180*Math.PI),o.M(k,k,[0,0,1+f/o.bu]),o.b7(k,k,.5*Math.PI),o.N(k,k,[w,w,w]),k}getProjectionDataForCustomLayer(s=!0){const f=this.getProjectionData({overscaledTileID:new o.Z(0,0,0,0,0),applyGlobeMatrix:s});return f.tileMercatorCoords=[0,0,1,1],f}getFastPathSimpleProjectionMatrix(s){}}class Nh{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,f,_){return this._helper.interpolatePadding(s,f,_)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,f,_=!0){this._helper.resize(s,f,_)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,f){this._helper.overrideNearFarZ(s,f)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(s,f){this._globeness=s,this._globeLatitudeErrorCorrectionRadians=f,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Eo({calcMatrices:()=>{this._calcMatrices()},getConstrained:(s,f)=>this.getConstrained(s,f)}),this._globeness=1,this._mercatorTransform=new kr,this._verticalPerspectiveTransform=new ph}clone(){const s=new Nh;return s._globeness=this._globeness,s._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,s.apply(this),s}apply(s){this._helper.apply(s),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(s){const f=this._mercatorTransform.getProjectionData(s),_=this._verticalPerspectiveTransform.getProjectionData(s);return{mainMatrix:this.isGlobeRendering?_.mainMatrix:f.mainMatrix,clippingPlane:_.clippingPlane,tileMercatorCoords:_.tileMercatorCoords,projectionTransition:s.applyGlobeMatrix?this._globeness:0,fallbackMatrix:f.fallbackMatrix}}isLocationOccluded(s){return this.currentTransform.isLocationOccluded(s)}transformLightDirection(s){return this.currentTransform.transformLightDirection(s)}getPixelScale(){return o.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(s,f,_){const w=this._mercatorTransform.getPitchedTextCorrection(s,f,_),k=this._verticalPerspectiveTransform.getPitchedTextCorrection(s,f,_);return o.bk(w,k,this._globeness)}projectTileCoordinates(s,f,_,w){return this.currentTransform.projectTileCoordinates(s,f,_,w)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(s){return this.currentTransform.calculateFogMatrix(s)}getVisibleUnwrappedCoordinates(s){return this.currentTransform.getVisibleUnwrappedCoordinates(s)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(s){this._mercatorTransform.recalculateZoomAndCenter(s),this._verticalPerspectiveTransform.recalculateZoomAndCenter(s)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(s,f){return this.currentTransform.lngLatToCameraDepth(s,f)}populateCache(s){this._mercatorTransform.populateCache(s),this._verticalPerspectiveTransform.populateCache(s)}getBounds(){return this.currentTransform.getBounds()}getConstrained(s,f){return this.currentTransform.getConstrained(s,f)}calculateCenterFromCameraLngLatAlt(s,f,_,w){return this._helper.calculateCenterFromCameraLngLatAlt(s,f,_,w)}setLocationAtPoint(s,f){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(s,f),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(s,f),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(s,f){return this.currentTransform.locationToScreenPoint(s,f)}screenPointToMercatorCoordinate(s,f){return this.currentTransform.screenPointToMercatorCoordinate(s,f)}screenPointToLocation(s,f){return this.currentTransform.screenPointToLocation(s,f)}isPointOnMapSurface(s,f){return this.currentTransform.isPointOnMapSurface(s,f)}getRayDirectionFromPixel(s){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(s)}getMatrixForModel(s,f){return this.currentTransform.getMatrixForModel(s,f)}getProjectionDataForCustomLayer(s=!0){const f=this._mercatorTransform.getProjectionDataForCustomLayer(s);if(!this.isGlobeRendering)return f;const _=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(s);return _.fallbackMatrix=f.mainMatrix,_}getFastPathSimpleProjectionMatrix(s){return this.currentTransform.getFastPathSimpleProjectionMatrix(s)}}class po{get useGlobeControls(){return!0}handlePanInertia(s,f){const _=Ys(s,f);return Math.abs(_.lng-f.center.lng)>180&&(_.lng=f.center.lng+179.5*Math.sign(_.lng-f.center.lng)),{easingCenter:_,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(s,f){const _=s.around,w=f.screenPointToLocation(_);s.bearingDelta&&f.setBearing(f.bearing+s.bearingDelta),s.pitchDelta&&f.setPitch(f.pitch+s.pitchDelta),s.rollDelta&&f.setRoll(f.roll+s.rollDelta);const k=f.zoom;s.zoomDelta&&f.setZoom(f.zoom+s.zoomDelta);const N=f.zoom-k;if(N===0)return;const q=o.bA(f.center.lng,w.lng),J=q/(Math.abs(q/180)+1),he=o.bA(f.center.lat,w.lat),pe=f.getRayDirectionFromPixel(_),Ee=f.cameraPosition,Se=-1*o.aX(Ee,pe),Ue=o.bp();o.aS(Ue,Ee,[pe[0]*Se,pe[1]*Se,pe[2]*Se]);const Xe=o.aZ(Ue)-1,At=Math.exp(.5*-Math.max(Xe-.3,0)),ct=pr(f.worldSize,f.center.lat)/Math.min(f.width,f.height),ft=o.bn(ct,.9,.5,1,.25),xt=(1-o.af(-N))*Math.min(At,ft),Ct=f.center.lat,wt=f.zoom,Pt=new o.S(f.center.lng+J*xt,o.ah(f.center.lat+he*xt,-o.ai,o.ai));f.setLocationAtPoint(w,_);const Lt=f.center,Bt=o.bn(Math.abs(q),45,85,0,1),Yt=o.bn(ct,.75,.35,0,1),dn=Math.pow(Math.max(Bt,Yt),.25),Xt=o.bA(Lt.lng,Pt.lng),nn=o.bA(Lt.lat,Pt.lat);f.setCenter(new o.S(Lt.lng+Xt*dn,Lt.lat+nn*dn).wrap()),f.setZoom(wt+zr(Ct,f.center.lat))}handleMapControlsPan(s,f,_){if(!s.panDelta)return;const w=f.center.lat,k=f.zoom;f.setCenter(Ys(s.panDelta,f).wrap()),f.setZoom(k+zr(w,f.center.lat))}cameraForBoxAndBearing(s,f,_,w,k){const N=Za(s,f,_,w,k),q=f.left/k.width*2-1,J=(k.width-f.right)/k.width*2-1,he=f.top/k.height*-2+1,pe=(k.height-f.bottom)/k.height*-2+1,Ee=o.bA(_.getWest(),_.getEast())<0,Se=Ee?_.getEast():_.getWest(),Ue=Ee?_.getWest():_.getEast(),Xe=Math.max(_.getNorth(),_.getSouth()),At=Math.min(_.getNorth(),_.getSouth()),ct=Se+.5*o.bA(Se,Ue),ft=Xe+.5*o.bA(Xe,At),xt=k.clone();xt.setCenter(N.center),xt.setBearing(N.bearing),xt.setPitch(0),xt.setRoll(0),xt.setZoom(N.zoom);const Ct=xt.modelViewProjectionMatrix,wt=[ur(_.getNorthWest()),ur(_.getNorthEast()),ur(_.getSouthWest()),ur(_.getSouthEast()),ur(new o.S(Ue,ft)),ur(new o.S(Se,ft)),ur(new o.S(ct,Xe)),ur(new o.S(ct,At))],Pt=ur(N.center);let Lt=Number.POSITIVE_INFINITY;for(const Bt of wt)q<0&&(Lt=po.getLesserNonNegativeNonNull(Lt,po.solveVectorScale(Bt,Pt,Ct,"x",q))),J>0&&(Lt=po.getLesserNonNegativeNonNull(Lt,po.solveVectorScale(Bt,Pt,Ct,"x",J))),he>0&&(Lt=po.getLesserNonNegativeNonNull(Lt,po.solveVectorScale(Bt,Pt,Ct,"y",he))),pe<0&&(Lt=po.getLesserNonNegativeNonNull(Lt,po.solveVectorScale(Bt,Pt,Ct,"y",pe)));if(Number.isFinite(Lt)&&Lt!==0)return N.zoom=xt.zoom+o.ak(Lt),N;rA()}handleJumpToCenterZoom(s,f){const _=s.center.lat,w=s.getConstrained(f.center?o.S.convert(f.center):s.center,s.zoom).center;s.setCenter(w.wrap());const k=f.zoom!==void 0?+f.zoom:s.zoom+zr(_,w.lat);s.zoom!==k&&s.setZoom(k)}handleEaseTo(s,f){const _=s.zoom,w=s.center,k=s.padding,N={roll:s.roll,pitch:s.pitch,bearing:s.bearing},q={roll:f.roll===void 0?s.roll:f.roll,pitch:f.pitch===void 0?s.pitch:f.pitch,bearing:f.bearing===void 0?s.bearing:f.bearing},J=f.zoom!==void 0,he=!s.isPaddingEqual(f.padding);let pe=!1;const Ee=f.center?o.S.convert(f.center):w,Se=s.getConstrained(Ee,_).center;cu(s,Se);const Ue=s.clone();Ue.setCenter(Se),Ue.setZoom(J?+f.zoom:_+zr(w.lat,Ee.lat)),Ue.setBearing(f.bearing);const Xe=new o.P(o.ah(s.centerPoint.x+f.offsetAsPoint.x,0,s.width),o.ah(s.centerPoint.y+f.offsetAsPoint.y,0,s.height));Ue.setLocationAtPoint(Se,Xe);const At=(f.offset&&f.offsetAsPoint.mag())>0?Ue.center:Se,ct=J?+f.zoom:_+zr(w.lat,At.lat),ft=_+zr(w.lat,0),xt=ct+zr(At.lat,0),Ct=o.bA(w.lng,At.lng),wt=o.bA(w.lat,At.lat),Pt=o.af(xt-ft);return pe=ct!==_,{easeFunc:Lt=>{if(o.be(N,q)||za({startEulerAngles:N,endEulerAngles:q,tr:s,k:Lt,useSlerp:N.roll!=q.roll}),he&&s.interpolatePadding(k,f.padding,Lt),f.around)o.w("Easing around a point is not supported under globe projection."),s.setLocationAtPoint(f.around,f.aroundPoint);else{const Bt=xt>ft?Math.min(2,Pt):Math.max(.5,Pt),Yt=Math.pow(Bt,1-Lt),dn=qA(w,Ct,wt,Lt*Yt);s.setCenter(dn.wrap())}if(pe){const Bt=o.C.number(ft,xt,Lt)+zr(0,s.center.lat);s.setZoom(Bt)}},isZooming:pe,elevationCenter:At}}handleFlyTo(s,f){const _=f.zoom!==void 0,w=s.center,k=s.zoom,N=s.padding,q=!s.isPaddingEqual(f.padding),J=s.getConstrained(o.S.convert(f.center||f.locationAtOffset),k).center,he=_?+f.zoom:s.zoom+zr(s.center.lat,J.lat),pe=s.clone();pe.setCenter(J),pe.setZoom(he),pe.setBearing(f.bearing);const Ee=new o.P(o.ah(s.centerPoint.x+f.offsetAsPoint.x,0,s.width),o.ah(s.centerPoint.y+f.offsetAsPoint.y,0,s.height));pe.setLocationAtPoint(J,Ee);const Se=pe.center;cu(s,Se);const Ue=function(wt,Pt,Lt){const Bt=ur(Pt),Yt=ur(Lt),dn=o.aX(Bt,Yt),Xt=Math.acos(dn),nn=eo(wt);return Xt/(2*Math.PI)*nn}(s,w,Se),Xe=k+zr(w.lat,0),At=he+zr(Se.lat,0),ct=o.af(At-Xe);let ft;if(typeof f.minZoom=="number"){const wt=+f.minZoom+zr(Se.lat,0),Pt=Math.min(wt,Xe,At)+zr(0,Se.lat),Lt=s.getConstrained(Se,Pt).zoom+zr(Se.lat,0);ft=o.af(Lt-Xe)}const xt=o.bA(w.lng,Se.lng),Ct=o.bA(w.lat,Se.lat);return{easeFunc:(wt,Pt,Lt,Bt)=>{const Yt=qA(w,xt,Ct,Lt);q&&s.interpolatePadding(N,f.padding,wt);const dn=wt===1?Se:Yt;s.setCenter(dn.wrap());const Xt=Xe+o.ak(Pt);s.setZoom(wt===1?he:Xt+zr(0,dn.lat))},scaleOfZoom:ct,targetCenter:Se,scaleOfMinZoom:ft,pixelPathLength:Ue}}static solveVectorScale(s,f,_,w,k){const N=w==="x"?[_[0],_[4],_[8],_[12]]:[_[1],_[5],_[9],_[13]],q=[_[3],_[7],_[11],_[15]],J=s[0]*N[0]+s[1]*N[1]+s[2]*N[2],he=s[0]*q[0]+s[1]*q[1]+s[2]*q[2],pe=f[0]*N[0]+f[1]*N[1]+f[2]*N[2],Ee=f[0]*q[0]+f[1]*q[1]+f[2]*q[2];return pe+k*he===J+k*Ee||q[3]*(J-pe)+N[3]*(Ee-he)+J*Ee==pe*he?null:(pe+N[3]-k*Ee-k*q[3])/(pe-J-k*Ee+k*he)}static getLesserNonNegativeNonNull(s,f){return f!==null&&f>=0&&f<s?f:s}}class ic{constructor(s){this._globe=s,this._mercatorCameraHelper=new ya,this._verticalPerspectiveCameraHelper=new po}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(s,f){return this.currentHelper.handlePanInertia(s,f)}handleMapControlsRollPitchBearingZoom(s,f){return this.currentHelper.handleMapControlsRollPitchBearingZoom(s,f)}handleMapControlsPan(s,f,_){this.currentHelper.handleMapControlsPan(s,f,_)}cameraForBoxAndBearing(s,f,_,w,k){return this.currentHelper.cameraForBoxAndBearing(s,f,_,w,k)}handleJumpToCenterZoom(s,f){this.currentHelper.handleJumpToCenterZoom(s,f)}handleEaseTo(s,f){return this.currentHelper.handleEaseTo(s,f)}handleFlyTo(s,f){return this.currentHelper.handleFlyTo(s,f)}}const vd=(I,s)=>o.y(I,s&&s.filter(f=>f.identifier!=="source.canvas")),dp=o.bE();class gh extends o.E{constructor(s,f={}){var _,w;super(),this._rtlPluginLoaded=()=>{for(const N in this.sourceCaches){const q=this.sourceCaches[N].getSource().type;q!=="vector"&&q!=="geojson"||this.sourceCaches[N].reload()}},this.map=s,this.dispatcher=new St(pt(),s._getMapId()),this.dispatcher.registerMessageHandler("GG",(N,q)=>this.getGlyphs(N,q)),this.dispatcher.registerMessageHandler("GI",(N,q)=>this.getImages(N,q)),this.imageManager=new ge,this.imageManager.setEventedParent(this);const k=((_=s._container)===null||_===void 0?void 0:_.lang)||typeof document<"u"&&((w=document.documentElement)===null||w===void 0?void 0:w.lang)||void 0;this.glyphManager=new we(s._requestManager,f.localIdeographFontFamily,k),this.lineAtlas=new nt(256,512),this.crossTileSymbolIndex=new Qs,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",o.bG()),Ge().on(Bi,this._rtlPluginLoaded),this.on("data",N=>{if(N.dataType!=="source"||N.sourceDataType!=="metadata")return;const q=this.sourceCaches[N.sourceId];if(!q)return;const J=q.getSource();if(J&&J.vectorLayerIds)for(const he in this._layers){const pe=this._layers[he];pe.source===J.id&&this._validateLayer(pe)}})}setGlobalStateProperty(s,f){var _,w,k;this._checkLoaded();const N=f===null?(k=(w=(_=this.stylesheet.state)===null||_===void 0?void 0:_[s])===null||w===void 0?void 0:w.default)!==null&&k!==void 0?k:null:f;if(o.bH(N,this._globalState[s]))return this;this._globalState[s]=N,this._applyGlobalStateChanges([s])}getGlobalState(){return this._globalState}setGlobalState(s){this._checkLoaded();const f=[];for(const _ in s)!o.bH(this._globalState[_],s[_].default)&&(f.push(_),this._globalState[_]=s[_].default);this._applyGlobalStateChanges(f)}_applyGlobalStateChanges(s){if(s.length===0)return;const f=new Set;for(const _ in this._layers){const w=this._layers[_],k=w.getLayoutAffectingGlobalStateRefs(),N=w.getPaintAffectingGlobalStateRefs();for(const q of s)if(k.has(q)&&f.add(w.source),N.has(q))for(const{name:J,value:he}of N.get(q))this._updatePaintProperty(w,J,he)}for(const _ in this.sourceCaches)f.has(_)&&(this._reloadSource(_),this._changed=!0)}loadURL(s,f={},_){this.fire(new o.l("dataloading",{dataType:"style"})),f.validate=typeof f.validate!="boolean"||f.validate;const w=this.map._requestManager.transformRequest(s,"Style");this._loadStyleRequest=new AbortController;const k=this._loadStyleRequest;o.j(w,this._loadStyleRequest).then(N=>{this._loadStyleRequest=null,this._load(N.data,f,_)}).catch(N=>{this._loadStyleRequest=null,N&&!k.signal.aborted&&this.fire(new o.k(N))})}loadJSON(s,f={},_){this.fire(new o.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,U.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,f.validate=f.validate!==!1,this._load(s,f,_)}).catch(()=>{})}loadEmpty(){this.fire(new o.l("dataloading",{dataType:"style"})),this._load(dp,{validate:!1})}_load(s,f,_){var w,k;let N=f.transformStyle?f.transformStyle(_,s):s;if(!f.validate||!vd(this,o.z(N))){N=Object.assign({},N),this._loaded=!0,this.stylesheet=N;for(const q in N.sources)this.addSource(q,N.sources[q],{validate:!1});N.sprite?this._loadSprite(N.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(N.glyphs),this._createLayers(),this.light=new ze(this.stylesheet.light),this._setProjectionInternal(((w=this.stylesheet.projection)===null||w===void 0?void 0:w.type)||"mercator"),this.sky=new yt(this.stylesheet.sky),this.map.setTerrain((k=this.stylesheet.terrain)!==null&&k!==void 0?k:null),this.fire(new o.l("data",{dataType:"style"})),this.fire(new o.l("style.load"))}}_createLayers(){var s;const f=o.bI(this.stylesheet.layers);this.dispatcher.broadcast("SL",f),this._order=f.map(_=>_.id),this._layers={},this.setGlobalState((s=this.stylesheet.state)!==null&&s!==void 0?s:null),this._serializedLayers=null;for(const _ of f){const w=o.bJ(_);w.setEventedParent(this,{layer:{id:_.id}}),w.setGlobalState(this._globalState),this._layers[_.id]=w}}_loadSprite(s,f=!1,_=void 0){let w;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(k,N,q,J){return o._(this,void 0,void 0,function*(){const he=oe(k),pe=q>1?"@2x":"",Ee={},Se={};for(const{id:Ue,url:Xe}of he){const At=N.transformRequest(W(Xe,pe,".json"),"SpriteJSON");Ee[Ue]=o.j(At,J);const ct=N.transformRequest(W(Xe,pe,".png"),"SpriteImage");Se[Ue]=ne.getImage(ct,J)}return yield Promise.all([...Object.values(Ee),...Object.values(Se)]),function(Ue,Xe){return o._(this,void 0,void 0,function*(){const At={};for(const ct in Ue){At[ct]={};const ft=U.getImageCanvasContext((yield Xe[ct]).data),xt=(yield Ue[ct]).data;for(const Ct in xt){const{width:wt,height:Pt,x:Lt,y:Bt,sdf:Yt,pixelRatio:dn,stretchX:Xt,stretchY:nn,content:An,textFitWidth:qn,textFitHeight:Qn}=xt[Ct];At[ct][Ct]={data:null,pixelRatio:dn,sdf:Yt,stretchX:Xt,stretchY:nn,content:An,textFitWidth:qn,textFitHeight:Qn,spriteData:{width:wt,height:Pt,x:Lt,y:Bt,context:ft}}}}return At})}(Ee,Se)})}(s,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(k=>{if(this._spriteRequest=null,k)for(const N in k){this._spritesImagesIds[N]=[];const q=this._spritesImagesIds[N]?this._spritesImagesIds[N].filter(J=>!(J in k)):[];for(const J of q)this.imageManager.removeImage(J),this._changedImages[J]=!0;for(const J in k[N]){const he=N==="default"?J:`${N}:${J}`;this._spritesImagesIds[N].push(he),he in this.imageManager.images?this.imageManager.updateImage(he,k[N][J],!1):this.imageManager.addImage(he,k[N][J]),f&&(this._changedImages[he]=!0)}}}).catch(k=>{this._spriteRequest=null,w=k,this.fire(new o.k(w))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),f&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"})),_&&_(w)})}_unloadSprite(){for(const s of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(s),this._changedImages[s]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}_validateLayer(s){const f=this.sourceCaches[s.source];if(!f)return;const _=s.sourceLayer;if(!_)return;const w=f.getSource();(w.type==="geojson"||w.vectorLayerIds&&w.vectorLayerIds.indexOf(_)===-1)&&this.fire(new o.k(new Error(`Source layer "${_}" does not exist on source "${w.id}" as specified by style layer "${s.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const s in this.sourceCaches)if(!this.sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(s,f=!1){const _=this._serializedAllLayers();if(!s||s.length===0)return Object.values(f?o.bK(_):_);const w=[];for(const k of s)if(_[k]){const N=f?o.bK(_[k]):_[k];w.push(N)}return w}_serializedAllLayers(){let s=this._serializedLayers;if(s)return s;s=this._serializedLayers={};const f=Object.keys(this._layers);for(const _ of f){const w=this._layers[_];w.type!=="custom"&&(s[_]=w.serialize())}return s}hasTransitions(){var s,f,_;if(!((s=this.light)===null||s===void 0)&&s.hasTransition()||!((f=this.sky)===null||f===void 0)&&f.hasTransition()||!((_=this.projection)===null||_===void 0)&&_.hasTransition())return!0;for(const w in this.sourceCaches)if(this.sourceCaches[w].hasTransition())return!0;for(const w in this._layers)if(this._layers[w].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(s){if(!this._loaded)return;const f=this._changed;if(f){const w=Object.keys(this._updatedLayers),k=Object.keys(this._removedLayers);(w.length||k.length)&&this._updateWorkerLayers(w,k);for(const N in this._updatedSources){const q=this._updatedSources[N];if(q==="reload")this._reloadSource(N);else{if(q!=="clear")throw new Error(`Invalid action ${q}`);this._clearSource(N)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const N in this._updatedPaintProps)this._layers[N].updateTransitions(s);this.light.updateTransitions(s),this.sky.updateTransitions(s),this._resetUpdates()}const _={};for(const w in this.sourceCaches){const k=this.sourceCaches[w];_[w]=k.used,k.used=!1}for(const w of this._order){const k=this._layers[w];k.recalculate(s,this._availableImages),!k.isHidden(s.zoom)&&k.source&&(this.sourceCaches[k.source].used=!0)}for(const w in _){const k=this.sourceCaches[w];!!_[w]!=!!k.used&&k.fire(new o.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:w}))}this.light.recalculate(s),this.sky.recalculate(s),this.projection.recalculate(s),this.z=s.zoom,f&&this.fire(new o.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const s=Object.keys(this._changedImages);if(s.length){for(const f in this.sourceCaches)this.sourceCaches[f].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(s,f){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(s,!1),removedIds:f})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(s,f={}){var _;this._checkLoaded();const w=this.serialize();if(s=f.transformStyle?f.transformStyle(w,s):s,((_=f.validate)===null||_===void 0||_)&&vd(this,o.z(s)))return!1;(s=o.bK(s)).layers=o.bI(s.layers);const k=o.bL(w,s),N=this._getOperationsToPerform(k);if(N.unimplemented.length>0)throw new Error(`Unimplemented: ${N.unimplemented.join(", ")}.`);if(N.operations.length===0)return!1;for(const q of N.operations)q();return this.stylesheet=s,this._serializedLayers=null,!0}_getOperationsToPerform(s){const f=[],_=[];for(const w of s)switch(w.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":f.push(()=>this.addLayer.apply(this,w.args));break;case"removeLayer":f.push(()=>this.removeLayer.apply(this,w.args));break;case"setPaintProperty":f.push(()=>this.setPaintProperty.apply(this,w.args));break;case"setLayoutProperty":f.push(()=>this.setLayoutProperty.apply(this,w.args));break;case"setFilter":f.push(()=>this.setFilter.apply(this,w.args));break;case"addSource":f.push(()=>this.addSource.apply(this,w.args));break;case"removeSource":f.push(()=>this.removeSource.apply(this,w.args));break;case"setLayerZoomRange":f.push(()=>this.setLayerZoomRange.apply(this,w.args));break;case"setLight":f.push(()=>this.setLight.apply(this,w.args));break;case"setGeoJSONSourceData":f.push(()=>this.setGeoJSONSourceData.apply(this,w.args));break;case"setGlyphs":f.push(()=>this.setGlyphs.apply(this,w.args));break;case"setSprite":f.push(()=>this.setSprite.apply(this,w.args));break;case"setTerrain":f.push(()=>this.map.setTerrain.apply(this,w.args));break;case"setSky":f.push(()=>this.setSky.apply(this,w.args));break;case"setProjection":this.setProjection.apply(this,w.args);break;case"setGlobalState":f.push(()=>this.setGlobalState.apply(this,w.args));break;case"setTransition":f.push(()=>{});break;default:_.push(w.command)}return{operations:f,unimplemented:_}}addImage(s,f){if(this.getImage(s))return this.fire(new o.k(new Error(`An image named "${s}" already exists.`)));this.imageManager.addImage(s,f),this._afterImageUpdated(s)}updateImage(s,f){this.imageManager.updateImage(s,f)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){if(!this.getImage(s))return this.fire(new o.k(new Error(`An image named "${s}" does not exist.`)));this.imageManager.removeImage(s),this._afterImageUpdated(s)}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(s,f,_={}){if(this._checkLoaded(),this.sourceCaches[s]!==void 0)throw new Error(`Source "${s}" already exists.`);if(!f.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(f).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(f.type)>=0&&this._validate(o.z.source,`sources.${s}`,f,null,_))return;this.map&&this.map._collectResourceTiming&&(f.collectResourceTiming=!0);const w=this.sourceCaches[s]=new Dn(s,f,this.dispatcher);w.style=this,w.setEventedParent(this,()=>({isSourceLoaded:w.loaded(),source:w.serialize(),sourceId:s})),w.onAdd(this.map),this._changed=!0}removeSource(s){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error("There is no source with this ID");for(const _ in this._layers)if(this._layers[_].source===s)return this.fire(new o.k(new Error(`Source "${s}" cannot be removed while layer "${_}" is using it.`)));const f=this.sourceCaches[s];delete this.sourceCaches[s],delete this._updatedSources[s],f.fire(new o.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:s})),f.setEventedParent(null),f.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(s,f){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error(`There is no source with this ID=${s}`);const _=this.sourceCaches[s].getSource();if(_.type!=="geojson")throw new Error(`geojsonSource.type is ${_.type}, which is !== 'geojson`);_.setData(f),this._changed=!0}getSource(s){return this.sourceCaches[s]&&this.sourceCaches[s].getSource()}addLayer(s,f,_={}){this._checkLoaded();const w=s.id;if(this.getLayer(w))return void this.fire(new o.k(new Error(`Layer "${w}" already exists on this map.`)));let k;if(s.type==="custom"){if(vd(this,o.bM(s)))return;k=o.bJ(s)}else{if("source"in s&&typeof s.source=="object"&&(this.addSource(w,s.source),s=o.bK(s),s=o.e(s,{source:w})),this._validate(o.z.layer,`layers.${w}`,s,{arrayIndex:-1},_))return;k=o.bJ(s),this._validateLayer(k),k.setEventedParent(this,{layer:{id:w}})}const N=f?this._order.indexOf(f):this._order.length;if(f&&N===-1)this.fire(new o.k(new Error(`Cannot add layer "${w}" before non-existing layer "${f}".`)));else{if(this._order.splice(N,0,w),this._layerOrderChanged=!0,this._layers[w]=k,this._removedLayers[w]&&k.source&&k.type!=="custom"){const q=this._removedLayers[w];delete this._removedLayers[w],q.type!==k.type?this._updatedSources[k.source]="clear":(this._updatedSources[k.source]="reload",this.sourceCaches[k.source].pause())}this._updateLayer(k),k.onAdd&&k.onAdd(this.map)}}moveLayer(s,f){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new o.k(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===f)return;const _=this._order.indexOf(s);this._order.splice(_,1);const w=f?this._order.indexOf(f):this._order.length;f&&w===-1?this.fire(new o.k(new Error(`Cannot move layer "${s}" before non-existing layer "${f}".`))):(this._order.splice(w,0,s),this._layerOrderChanged=!0)}removeLayer(s){this._checkLoaded();const f=this._layers[s];if(!f)return void this.fire(new o.k(new Error(`Cannot remove non-existing layer "${s}".`)));f.setEventedParent(null);const _=this._order.indexOf(s);this._order.splice(_,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=f,delete this._layers[s],this._serializedLayers&&delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],f.onRemove&&f.onRemove(this.map)}getLayer(s){return this._layers[s]}getLayersOrder(){return[...this._order]}hasLayer(s){return s in this._layers}setLayerZoomRange(s,f,_){this._checkLoaded();const w=this.getLayer(s);w?w.minzoom===f&&w.maxzoom===_||(f!=null&&(w.minzoom=f),_!=null&&(w.maxzoom=_),this._updateLayer(w)):this.fire(new o.k(new Error(`Cannot set the zoom range of non-existing layer "${s}".`)))}setFilter(s,f,_={}){this._checkLoaded();const w=this.getLayer(s);if(w){if(!o.bH(w.filter,f))return f==null?(w.setFilter(void 0),void this._updateLayer(w)):void(this._validate(o.z.filter,`layers.${w.id}.filter`,f,null,_)||(w.setFilter(o.bK(f)),this._updateLayer(w)))}else this.fire(new o.k(new Error(`Cannot filter non-existing layer "${s}".`)))}getFilter(s){return o.bK(this.getLayer(s).filter)}setLayoutProperty(s,f,_,w={}){this._checkLoaded();const k=this.getLayer(s);k?o.bH(k.getLayoutProperty(f),_)||(k.setLayoutProperty(f,_,w),this._updateLayer(k)):this.fire(new o.k(new Error(`Cannot style non-existing layer "${s}".`)))}getLayoutProperty(s,f){const _=this.getLayer(s);if(_)return _.getLayoutProperty(f);this.fire(new o.k(new Error(`Cannot get style of non-existing layer "${s}".`)))}setPaintProperty(s,f,_,w={}){this._checkLoaded();const k=this.getLayer(s);k?o.bH(k.getPaintProperty(f),_)||this._updatePaintProperty(k,f,_,w):this.fire(new o.k(new Error(`Cannot style non-existing layer "${s}".`)))}_updatePaintProperty(s,f,_,w={}){s.setPaintProperty(f,_,w)&&this._updateLayer(s),this._changed=!0,this._updatedPaintProps[s.id]=!0,this._serializedLayers=null}getPaintProperty(s,f){return this.getLayer(s).getPaintProperty(f)}setFeatureState(s,f){this._checkLoaded();const _=s.source,w=s.sourceLayer,k=this.sourceCaches[_];if(k===void 0)return void this.fire(new o.k(new Error(`The source '${_}' does not exist in the map's style.`)));const N=k.getSource().type;N==="geojson"&&w?this.fire(new o.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):N!=="vector"||w?(s.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),k.setFeatureState(w,s.id,f)):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(s,f){this._checkLoaded();const _=s.source,w=this.sourceCaches[_];if(w===void 0)return void this.fire(new o.k(new Error(`The source '${_}' does not exist in the map's style.`)));const k=w.getSource().type,N=k==="vector"?s.sourceLayer:void 0;k!=="vector"||N?f&&typeof s.id!="string"&&typeof s.id!="number"?this.fire(new o.k(new Error("A feature id is required to remove its specific state property."))):w.removeFeatureState(N,s.id,f):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(s){this._checkLoaded();const f=s.source,_=s.sourceLayer,w=this.sourceCaches[f];if(w!==void 0)return w.getSource().type!=="vector"||_?(s.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),w.getFeatureState(_,s.id)):void this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.k(new Error(`The source '${f}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const s=o.bN(this.sourceCaches,k=>k.serialize()),f=this._serializeByIds(this._order,!0),_=this.map.getTerrain()||void 0,w=this.stylesheet;return o.bO({version:w.version,name:w.name,metadata:w.metadata,light:w.light,sky:w.sky,center:w.center,zoom:w.zoom,bearing:w.bearing,pitch:w.pitch,sprite:w.sprite,glyphs:w.glyphs,transition:w.transition,projection:w.projection,sources:s,layers:f,terrain:_},k=>k!==void 0)}_updateLayer(s){this._updatedLayers[s.id]=!0,s.source&&!this._updatedSources[s.source]&&this.sourceCaches[s.source].getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(s){const f=N=>this._layers[N].type==="fill-extrusion",_={},w=[];for(let N=this._order.length-1;N>=0;N--){const q=this._order[N];if(f(q)){_[q]=N;for(const J of s){const he=J[q];if(he)for(const pe of he)w.push(pe)}}}w.sort((N,q)=>q.intersectionZ-N.intersectionZ);const k=[];for(let N=this._order.length-1;N>=0;N--){const q=this._order[N];if(f(q))for(let J=w.length-1;J>=0;J--){const he=w[J].feature;if(_[he.layer.id]<N)break;k.push(he),w.pop()}else for(const J of s){const he=J[q];if(he)for(const pe of he)k.push(pe.feature)}}return k}queryRenderedFeatures(s,f,_){f&&f.filter&&this._validate(o.z.filter,"queryRenderedFeatures.filter",f.filter,null,f);const w={};if(f&&f.layers){if(!(Array.isArray(f.layers)||f.layers instanceof Set))return this.fire(new o.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const he of f.layers){const pe=this._layers[he];if(!pe)return this.fire(new o.k(new Error(`The layer '${he}' does not exist in the map's style and cannot be queried for features.`))),[];w[pe.source]=!0}}const k=[];f.availableImages=this._availableImages;const N=this._serializedAllLayers(),q=f.layers instanceof Set?f.layers:Array.isArray(f.layers)?new Set(f.layers):null,J=Object.assign(Object.assign({},f),{layers:q});for(const he in this.sourceCaches)f.layers&&!w[he]||k.push(Pe(this.sourceCaches[he],this._layers,N,s,J,_,this.map.terrain?(pe,Ee,Se)=>this.map.terrain.getElevation(pe,Ee,Se):void 0));return this.placement&&k.push(function(he,pe,Ee,Se,Ue,Xe,At){const ct={},ft=Xe.queryRenderedSymbols(Se),xt=[];for(const Ct of Object.keys(ft).map(Number))xt.push(At[Ct]);xt.sort(Re);for(const Ct of xt){const wt=Ct.featureIndex.lookupSymbolFeatures(ft[Ct.bucketInstanceId],pe,Ct.bucketIndex,Ct.sourceLayerIndex,Ue.filter,Ue.layers,Ue.availableImages,he);for(const Pt in wt){const Lt=ct[Pt]=ct[Pt]||[],Bt=wt[Pt];Bt.sort((Yt,dn)=>{const Xt=Ct.featureSortOrder;if(Xt){const nn=Xt.indexOf(Yt.featureIndex);return Xt.indexOf(dn.featureIndex)-nn}return dn.featureIndex-Yt.featureIndex});for(const Yt of Bt)Lt.push(Yt)}}return function(Ct,wt,Pt){for(const Lt in Ct)for(const Bt of Ct[Lt])He(Bt,Pt[wt[Lt].source]);return Ct}(ct,he,Ee)}(this._layers,N,this.sourceCaches,s,J,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(k)}querySourceFeatures(s,f){f&&f.filter&&this._validate(o.z.filter,"querySourceFeatures.filter",f.filter,null,f);const _=this.sourceCaches[s];return _?function(w,k){const N=w.getRenderableIds().map(he=>w.getTileByID(he)),q=[],J={};for(let he=0;he<N.length;he++){const pe=N[he],Ee=pe.tileID.canonical.key;J[Ee]||(J[Ee]=!0,pe.querySourceFeatures(q,k))}return q}(_,f):[]}getLight(){return this.light.getLight()}setLight(s,f={}){this._checkLoaded();const _=this.light.getLight();let w=!1;for(const N in s)if(!o.bH(s[N],_[N])){w=!0;break}if(!w)return;const k={now:U.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(s,f),this.light.updateTransitions(k)}getProjection(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.projection}setProjection(s){if(this._checkLoaded(),this.projection){if(this.projection.name===s.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=s,this._setProjectionInternal(s.type)}getSky(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.sky}setSky(s,f={}){this._checkLoaded();const _=this.getSky();let w=!1;if(!s&&!_)return;if(s&&!_)w=!0;else if(!s&&_)w=!0;else for(const N in s)if(!o.bH(s[N],_[N])){w=!0;break}if(!w)return;const k={now:U.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=s,this.sky.setSky(s,f),this.sky.updateTransitions(k)}_setProjectionInternal(s){const f=function(_){if(Array.isArray(_)){const w=new Xi({type:_});return{projection:w,transform:new Nh,cameraHelper:new ic(w)}}switch(_){case"mercator":return{projection:new br,transform:new kr,cameraHelper:new ya};case"globe":{const w=new Xi({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:w,transform:new Nh,cameraHelper:new ic(w)}}case"vertical-perspective":return{projection:new or,transform:new ph,cameraHelper:new po};default:return o.w(`Unknown projection name: ${_}. Falling back to mercator projection.`),{projection:new br,transform:new kr,cameraHelper:new ya}}}(s);this.projection=f.projection,this.map.migrateProjection(f.transform,f.cameraHelper);for(const _ in this.sourceCaches)this.sourceCaches[_].reload()}_validate(s,f,_,w,k={}){return(!k||k.validate!==!1)&&vd(this,s.call(o.z,o.e({key:f,style:this.serialize(),value:_,styleSpec:o.v},w)))}_remove(s=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ge().off(Bi,this._rtlPluginLoaded);for(const f in this._layers)this._layers[f].setEventedParent(null);for(const f in this.sourceCaches){const _=this.sourceCaches[f];_.setEventedParent(null),_.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),s&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(s)}_clearSource(s){this.sourceCaches[s].clearTiles()}_reloadSource(s){this.sourceCaches[s].resume(),this.sourceCaches[s].reload()}_updateSources(s){for(const f in this.sourceCaches)this.sourceCaches[f].update(s,this.map.terrain)}_generateCollisionBoxes(){for(const s in this.sourceCaches)this._reloadSource(s)}_updatePlacement(s,f,_,w,k=!1){let N=!1,q=!1;const J={};for(const he of this._order){const pe=this._layers[he];if(pe.type!=="symbol")continue;if(!J[pe.source]){const Se=this.sourceCaches[pe.source];J[pe.source]=Se.getRenderableIds(!0).map(Ue=>Se.getTileByID(Ue)).sort((Ue,Xe)=>Xe.tileID.overscaledZ-Ue.tileID.overscaledZ||(Ue.tileID.isLessThan(Xe.tileID)?-1:1))}const Ee=this.crossTileSymbolIndex.addLayer(pe,J[pe.source],s.center.lng);N=N||Ee}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((k=k||this._layerOrderChanged||_===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(U.now(),s.zoom))&&(this.pauseablePlacement=new Du(s,this.map.terrain,this._order,k,f,_,w,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,J),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(U.now()),q=!0),N&&this.pauseablePlacement.placement.setStale()),q||N)for(const he of this._order){const pe=this._layers[he];pe.type==="symbol"&&this.placement.updateLayerOpacities(pe,J[pe.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(U.now())}_releaseSymbolFadeTiles(){for(const s in this.sourceCaches)this.sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,f){return o._(this,void 0,void 0,function*(){const _=yield this.imageManager.getImages(f.icons);this._updateTilesForChangedImages();const w=this.sourceCaches[f.source];return w&&w.setDependencies(f.tileID.key,f.type,f.icons),_})}getGlyphs(s,f){return o._(this,void 0,void 0,function*(){const _=yield this.glyphManager.getGlyphs(f.stacks),w=this.sourceCaches[f.source];return w&&w.setDependencies(f.tileID.key,f.type,[""]),_})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(s,f={}){this._checkLoaded(),s&&this._validate(o.z.glyphs,"glyphs",s,null,f)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=s,this.glyphManager.entries={},this.glyphManager.setURL(s))}addSprite(s,f,_={},w){this._checkLoaded();const k=[{id:s,url:f}],N=[...oe(this.stylesheet.sprite),...k];this._validate(o.z.sprite,"sprite",N,null,_)||(this.stylesheet.sprite=N,this._loadSprite(k,!0,w))}removeSprite(s){this._checkLoaded();const f=oe(this.stylesheet.sprite);if(f.find(_=>_.id===s)){if(this._spritesImagesIds[s])for(const _ of this._spritesImagesIds[s])this.imageManager.removeImage(_),this._changedImages[_]=!0;f.splice(f.findIndex(_=>_.id===s),1),this.stylesheet.sprite=f.length>0?f:void 0,delete this._spritesImagesIds[s],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}else this.fire(new o.k(new Error(`Sprite "${s}" doesn't exists on this map.`)))}getSprite(){return oe(this.stylesheet.sprite)}setSprite(s,f={},_){this._checkLoaded(),s&&this._validate(o.z.sprite,"sprite",s,null,f)||(this.stylesheet.sprite=s,s?this._loadSprite(s,!0,_):(this._unloadSprite(),_&&_(null)))}}var Cd=o.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class o0{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(s,f,_,w,k,N,q,J,he){this.context=s;let pe=this.boundPaintVertexBuffers.length!==w.length;for(let Ee=0;!pe&&Ee<w.length;Ee++)this.boundPaintVertexBuffers[Ee]!==w[Ee]&&(pe=!0);!this.vao||this.boundProgram!==f||this.boundLayoutVertexBuffer!==_||pe||this.boundIndexBuffer!==k||this.boundVertexOffset!==N||this.boundDynamicVertexBuffer!==q||this.boundDynamicVertexBuffer2!==J||this.boundDynamicVertexBuffer3!==he?this.freshBind(f,_,w,k,N,q,J,he):(s.bindVertexArray.set(this.vao),q&&q.bind(),k&&k.dynamicDraw&&k.bind(),J&&J.bind(),he&&he.bind())}freshBind(s,f,_,w,k,N,q,J){const he=s.numAttributes,pe=this.context,Ee=pe.gl;this.vao&&this.destroy(),this.vao=pe.createVertexArray(),pe.bindVertexArray.set(this.vao),this.boundProgram=s,this.boundLayoutVertexBuffer=f,this.boundPaintVertexBuffers=_,this.boundIndexBuffer=w,this.boundVertexOffset=k,this.boundDynamicVertexBuffer=N,this.boundDynamicVertexBuffer2=q,this.boundDynamicVertexBuffer3=J,f.enableAttributes(Ee,s);for(const Se of _)Se.enableAttributes(Ee,s);N&&N.enableAttributes(Ee,s),q&&q.enableAttributes(Ee,s),J&&J.enableAttributes(Ee,s),f.bind(),f.setVertexAttribPointers(Ee,s,k);for(const Se of _)Se.bind(),Se.setVertexAttribPointers(Ee,s,k);N&&(N.bind(),N.setVertexAttribPointers(Ee,s,k)),w&&w.bind(),q&&(q.bind(),q.setVertexAttribPointers(Ee,s,k)),J&&(J.bind(),J.setVertexAttribPointers(Ee,s,k)),pe.currentNumAttributes=he}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Tf=(I,s,f,_,w)=>({u_texture:0,u_ele_delta:I,u_fog_matrix:s,u_fog_color:f?f.properties.get("fog-color"):o.bf.white,u_fog_ground_blend:f?f.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:w?0:f?f.calculateFogBlendOpacity(_):0,u_horizon_color:f?f.properties.get("horizon-color"):o.bf.white,u_horizon_fog_blend:f?f.properties.get("horizon-fog-blend"):1,u_is_globe_mode:w?1:0}),kf={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function VA(I){const s=[];for(let f=0;f<I.length;f++){if(I[f]===null)continue;const _=I[f].split(" ");s.push(_.pop())}return s}class Xa{constructor(s,f,_,w,k,N,q,J,he=[]){const pe=s.gl;this.program=pe.createProgram();const Ee=VA(f.staticAttributes),Se=_?_.getBinderAttributes():[],Ue=Ee.concat(Se),Xe=ko.prelude.staticUniforms?VA(ko.prelude.staticUniforms):[],At=q.staticUniforms?VA(q.staticUniforms):[],ct=f.staticUniforms?VA(f.staticUniforms):[],ft=_?_.getBinderUniforms():[],xt=Xe.concat(At).concat(ct).concat(ft),Ct=[];for(const Xt of xt)Ct.indexOf(Xt)<0&&Ct.push(Xt);const wt=_?_.defines():[];st(pe)&&wt.unshift("#version 300 es"),k&&wt.push("#define OVERDRAW_INSPECTOR;"),N&&wt.push("#define TERRAIN3D;"),J&&wt.push(J),he&&wt.push(...he);let Pt=wt.concat(ko.prelude.fragmentSource,q.fragmentSource,f.fragmentSource).join(`
`),Lt=wt.concat(ko.prelude.vertexSource,q.vertexSource,f.vertexSource).join(`
`);st(pe)||(Pt=function(Xt){return Xt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(Pt),Lt=function(Xt){return Xt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Lt));const Bt=pe.createShader(pe.FRAGMENT_SHADER);if(pe.isContextLost())return void(this.failedToCreate=!0);if(pe.shaderSource(Bt,Pt),pe.compileShader(Bt),!pe.getShaderParameter(Bt,pe.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${pe.getShaderInfoLog(Bt)}`);pe.attachShader(this.program,Bt);const Yt=pe.createShader(pe.VERTEX_SHADER);if(pe.isContextLost())return void(this.failedToCreate=!0);if(pe.shaderSource(Yt,Lt),pe.compileShader(Yt),!pe.getShaderParameter(Yt,pe.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${pe.getShaderInfoLog(Yt)}`);pe.attachShader(this.program,Yt),this.attributes={};const dn={};this.numAttributes=Ue.length;for(let Xt=0;Xt<this.numAttributes;Xt++)Ue[Xt]&&(pe.bindAttribLocation(this.program,Xt,Ue[Xt]),this.attributes[Ue[Xt]]=Xt);if(pe.linkProgram(this.program),!pe.getProgramParameter(this.program,pe.LINK_STATUS))throw new Error(`Program failed to link: ${pe.getProgramInfoLog(this.program)}`);pe.deleteShader(Yt),pe.deleteShader(Bt);for(let Xt=0;Xt<Ct.length;Xt++){const nn=Ct[Xt];if(nn&&!dn[nn]){const An=pe.getUniformLocation(this.program,nn);An&&(dn[nn]=An)}}this.fixedUniforms=w(s,dn),this.terrainUniforms=((Xt,nn)=>({u_depth:new o.bP(Xt,nn.u_depth),u_terrain:new o.bP(Xt,nn.u_terrain),u_terrain_dim:new o.bg(Xt,nn.u_terrain_dim),u_terrain_matrix:new o.bR(Xt,nn.u_terrain_matrix),u_terrain_unpack:new o.bS(Xt,nn.u_terrain_unpack),u_terrain_exaggeration:new o.bg(Xt,nn.u_terrain_exaggeration)}))(s,dn),this.projectionUniforms=((Xt,nn)=>({u_projection_matrix:new o.bR(Xt,nn.u_projection_matrix),u_projection_tile_mercator_coords:new o.bS(Xt,nn.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.bS(Xt,nn.u_projection_clipping_plane),u_projection_transition:new o.bg(Xt,nn.u_projection_transition),u_projection_fallback_matrix:new o.bR(Xt,nn.u_projection_fallback_matrix)}))(s,dn),this.binderUniforms=_?_.getUniforms(s,dn):[]}draw(s,f,_,w,k,N,q,J,he,pe,Ee,Se,Ue,Xe,At,ct,ft,xt,Ct){const wt=s.gl;if(this.failedToCreate)return;if(s.program.set(this.program),s.setDepthMode(_),s.setStencilMode(w),s.setColorMode(k),s.setCullFace(N),J){s.activeTexture.set(wt.TEXTURE2),wt.bindTexture(wt.TEXTURE_2D,J.depthTexture),s.activeTexture.set(wt.TEXTURE3),wt.bindTexture(wt.TEXTURE_2D,J.texture);for(const Lt in this.terrainUniforms)this.terrainUniforms[Lt].set(J[Lt])}if(he)for(const Lt in he)this.projectionUniforms[kf[Lt]].set(he[Lt]);if(q)for(const Lt in this.fixedUniforms)this.fixedUniforms[Lt].set(q[Lt]);ct&&ct.setUniforms(s,this.binderUniforms,Xe,{zoom:At});let Pt=0;switch(f){case wt.LINES:Pt=2;break;case wt.TRIANGLES:Pt=3;break;case wt.LINE_STRIP:Pt=1}for(const Lt of Ue.get()){const Bt=Lt.vaos||(Lt.vaos={});(Bt[pe]||(Bt[pe]=new o0)).bind(s,this,Ee,ct?ct.getPaintVertexBuffers():[],Se,Lt.vertexOffset,ft,xt,Ct),wt.drawElements(f,Lt.primitiveLength*Pt,wt.UNSIGNED_SHORT,Lt.primitiveOffset*Pt*2)}}}function _d(I,s,f){const _=1/o.aC(f,1,s.transform.tileZoom),w=Math.pow(2,f.tileID.overscaledZ),k=f.tileSize*Math.pow(2,s.transform.tileZoom)/w,N=k*(f.tileID.canonical.x+f.tileID.wrap*w),q=k*f.tileID.canonical.y;return{u_image:0,u_texsize:f.imageAtlasTexture.size,u_scale:[_,I.fromScale,I.toScale],u_fade:I.t,u_pixel_coord_upper:[N>>16,q>>16],u_pixel_coord_lower:[65535&N,65535&q]}}const Fl=(I,s,f,_)=>{const w=I.style.light,k=w.properties.get("position"),N=[k.x,k.y,k.z],q=o.bV();w.properties.get("anchor")==="viewport"&&o.bW(q,I.transform.bearingInRadians),o.bX(N,N,q);const J=I.transform.transformLightDirection(N),he=w.properties.get("color");return{u_lightpos:N,u_lightpos_globe:J,u_lightintensity:w.properties.get("intensity"),u_lightcolor:[he.r,he.g,he.b],u_vertical_gradient:+s,u_opacity:f,u_fill_translate:_}},bd=(I,s,f,_,w,k,N)=>o.e(Fl(I,s,f,_),_d(k,I,N),{u_height_factor:-Math.pow(2,w.overscaledZ)/N.tileSize/8}),Gh=(I,s,f,_)=>o.e(_d(s,I,f),{u_fill_translate:_}),Yc=(I,s)=>({u_world:I,u_fill_translate:s}),jh=(I,s,f,_,w)=>o.e(Gh(I,s,f,w),{u_world:_}),Df=(I,s,f,_,w)=>{const k=I.transform;let N,q,J=0;if(f.paint.get("circle-pitch-alignment")==="map"){const he=o.aC(s,1,k.zoom);N=!0,q=[he,he],J=he/(o.$*Math.pow(2,s.tileID.overscaledZ))*2*Math.PI*w}else N=!1,q=k.pixelsToGLUnits;return{u_camera_to_center_distance:k.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+N,u_device_pixel_ratio:I.pixelRatio,u_extrude_scale:q,u_globe_extrude_scale:J,u_translate:_}},yh=I=>({u_pixel_extrude_scale:[1/I.width,1/I.height]}),vh=I=>({u_viewport_size:[I.width,I.height]}),Wh=(I,s=1)=>({u_color:I,u_overlay:0,u_overlay_scale:s}),Rf=(I,s,f,_)=>{const w=o.aC(I,1,s)/(o.$*Math.pow(2,I.tileID.overscaledZ))*2*Math.PI*_;return{u_extrude_scale:o.aC(I,1,s),u_intensity:f,u_globe_extrude_scale:w}},oA=(I,s,f,_)=>{const w=o.L();o.bY(w,0,I.width,I.height,0,0,1);const k=I.context.gl;return{u_matrix:w,u_world:[k.drawingBufferWidth,k.drawingBufferHeight],u_image:f,u_color_ramp:_,u_opacity:s.paint.get("heatmap-opacity")}},Pf=(I,s,f)=>{const _=f.paint.get("hillshade-accent-color");let w;switch(f.paint.get("hillshade-method")){case"basic":w=4;break;case"combined":w=1;break;case"igor":w=2;break;case"multidirectional":w=3;break;default:w=0}const k=f.getIlluminationProperties();for(let N=0;N<k.directionRadians.length;N++)f.paint.get("hillshade-illumination-anchor")==="viewport"&&(k.directionRadians[N]+=I.transform.bearingInRadians);return{u_image:0,u_latrange:aA(0,s.tileID),u_exaggeration:f.paint.get("hillshade-exaggeration"),u_altitudes:k.altitudeRadians,u_azimuths:k.directionRadians,u_accent:_,u_method:w,u_highlights:k.highlightColor,u_shadows:k.shadowColor}},rc=(I,s)=>{const f=s.stride,_=o.L();return o.bY(_,0,o.$,-o.$,0,0,1),o.M(_,_,[0,-o.$,0]),{u_matrix:_,u_image:1,u_dimension:[f,f],u_zoom:I.overscaledZ,u_unpack:s.getUnpackVector()}};function aA(I,s){const f=Math.pow(2,s.canonical.z),_=s.canonical.y;return[new o.a1(0,_/f).toLngLat().lat,new o.a1(0,(_+1)/f).toLngLat().lat]}const xc=(I,s,f=0)=>({u_image:0,u_unpack:s.getUnpackVector(),u_dimension:[s.stride,s.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:f,u_opacity:I.paint.get("color-relief-opacity")}),xd=(I,s,f,_)=>{const w=I.transform;return{u_translation:Mc(I,s,f),u_ratio:_/o.aC(s,1,w.zoom),u_device_pixel_ratio:I.pixelRatio,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},Md=(I,s,f,_,w)=>o.e(xd(I,s,f,_),{u_image:0,u_image_height:w}),Pu=(I,s,f,_,w)=>{const k=I.transform,N=Qh(s,k);return{u_translation:Mc(I,s,f),u_texsize:s.imageAtlasTexture.size,u_ratio:_/o.aC(s,1,k.zoom),u_device_pixel_ratio:I.pixelRatio,u_image:0,u_scale:[N,w.fromScale,w.toScale],u_fade:w.t,u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]]}},$A=(I,s,f,_,w,k)=>{const N=I.lineAtlas,q=Qh(s,I.transform),J=f.layout.get("line-cap")==="round",he=N.getDash(w.from,J),pe=N.getDash(w.to,J),Ee=he.width*k.fromScale,Se=pe.width*k.toScale;return o.e(xd(I,s,f,_),{u_patternscale_a:[q/Ee,-he.height/2],u_patternscale_b:[q/Se,-pe.height/2],u_sdfgamma:N.width/(256*Math.min(Ee,Se)*I.pixelRatio)/2,u_image:0,u_tex_y_a:he.y,u_tex_y_b:pe.y,u_mix:k.t})};function Qh(I,s){return 1/o.aC(I,1,s.tileZoom)}function Mc(I,s,f){return o.aD(I.transform,s,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}const Yh=(I,s,f,_,w)=>{return{u_tl_parent:I,u_scale_parent:s,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*_.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:_.paint.get("raster-brightness-min"),u_brightness_high:_.paint.get("raster-brightness-max"),u_saturation_factor:(N=_.paint.get("raster-saturation"),N>0?1-1/(1.001-N):-N),u_contrast_factor:(k=_.paint.get("raster-contrast"),k>0?1/(1-k):1+k),u_spin_weights:fp(_.paint.get("raster-hue-rotate")),u_coords_top:[w[0].x,w[0].y,w[1].x,w[1].y],u_coords_bottom:[w[3].x,w[3].y,w[2].x,w[2].y]};var k,N};function fp(I){I*=Math.PI/180;const s=Math.sin(I),f=Math.cos(I);return[(2*f+1)/3,(-Math.sqrt(3)*s-f+1)/3,(Math.sqrt(3)*s-f+1)/3]}const qc=(I,s,f,_,w,k,N,q,J,he,pe,Ee,Se)=>{const Ue=N.transform;return{u_is_size_zoom_constant:+(I==="constant"||I==="source"),u_is_size_feature_constant:+(I==="constant"||I==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:Ue.cameraToCenterDistance,u_pitch:Ue.pitch/360*2*Math.PI,u_rotate_symbol:+f,u_aspect_ratio:Ue.width/Ue.height,u_fade_change:N.options.fadeDuration?N.symbolFadeChange:1,u_label_plane_matrix:q,u_coord_matrix:J,u_is_text:+pe,u_pitch_with_map:+_,u_is_along_line:w,u_is_variable_anchor:k,u_texsize:Ee,u_texture:0,u_translation:he,u_pitched_scale:Se}},Vd=(I,s,f,_,w,k,N,q,J,he,pe,Ee,Se,Ue)=>{const Xe=N.transform;return o.e(qc(I,s,f,_,w,k,N,q,J,he,pe,Ee,Ue),{u_gamma_scale:_?Math.cos(Xe.pitch*Math.PI/180)*Xe.cameraToCenterDistance:1,u_device_pixel_ratio:N.pixelRatio,u_is_halo:1})},hu=(I,s,f,_,w,k,N,q,J,he,pe,Ee,Se)=>o.e(Vd(I,s,f,_,w,k,N,q,J,he,!0,pe,0,Se),{u_texsize_icon:Ee,u_texture_icon:1}),ZA=(I,s)=>({u_opacity:I,u_color:s}),Mm=(I,s,f,_,w)=>o.e(function(k,N,q,J){const he=q.imageManager.getPattern(k.from.toString()),pe=q.imageManager.getPattern(k.to.toString()),{width:Ee,height:Se}=q.imageManager.getPixelSize(),Ue=Math.pow(2,J.tileID.overscaledZ),Xe=J.tileSize*Math.pow(2,q.transform.tileZoom)/Ue,At=Xe*(J.tileID.canonical.x+J.tileID.wrap*Ue),ct=Xe*J.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:he.tl,u_pattern_br_a:he.br,u_pattern_tl_b:pe.tl,u_pattern_br_b:pe.br,u_texsize:[Ee,Se],u_mix:N.t,u_pattern_size_a:he.displaySize,u_pattern_size_b:pe.displaySize,u_scale_a:N.fromScale,u_scale_b:N.toScale,u_tile_units_to_pixels:1/o.aC(J,1,q.transform.tileZoom),u_pixel_coord_upper:[At>>16,ct>>16],u_pixel_coord_lower:[65535&At,65535&ct]}}(f,w,s,_),{u_opacity:I}),Kf=(I,s)=>{},xA={fillExtrusion:(I,s)=>({u_lightpos:new o.bT(I,s.u_lightpos),u_lightpos_globe:new o.bT(I,s.u_lightpos_globe),u_lightintensity:new o.bg(I,s.u_lightintensity),u_lightcolor:new o.bT(I,s.u_lightcolor),u_vertical_gradient:new o.bg(I,s.u_vertical_gradient),u_opacity:new o.bg(I,s.u_opacity),u_fill_translate:new o.bU(I,s.u_fill_translate)}),fillExtrusionPattern:(I,s)=>({u_lightpos:new o.bT(I,s.u_lightpos),u_lightpos_globe:new o.bT(I,s.u_lightpos_globe),u_lightintensity:new o.bg(I,s.u_lightintensity),u_lightcolor:new o.bT(I,s.u_lightcolor),u_vertical_gradient:new o.bg(I,s.u_vertical_gradient),u_height_factor:new o.bg(I,s.u_height_factor),u_opacity:new o.bg(I,s.u_opacity),u_fill_translate:new o.bU(I,s.u_fill_translate),u_image:new o.bP(I,s.u_image),u_texsize:new o.bU(I,s.u_texsize),u_pixel_coord_upper:new o.bU(I,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.bU(I,s.u_pixel_coord_lower),u_scale:new o.bT(I,s.u_scale),u_fade:new o.bg(I,s.u_fade)}),fill:(I,s)=>({u_fill_translate:new o.bU(I,s.u_fill_translate)}),fillPattern:(I,s)=>({u_image:new o.bP(I,s.u_image),u_texsize:new o.bU(I,s.u_texsize),u_pixel_coord_upper:new o.bU(I,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.bU(I,s.u_pixel_coord_lower),u_scale:new o.bT(I,s.u_scale),u_fade:new o.bg(I,s.u_fade),u_fill_translate:new o.bU(I,s.u_fill_translate)}),fillOutline:(I,s)=>({u_world:new o.bU(I,s.u_world),u_fill_translate:new o.bU(I,s.u_fill_translate)}),fillOutlinePattern:(I,s)=>({u_world:new o.bU(I,s.u_world),u_image:new o.bP(I,s.u_image),u_texsize:new o.bU(I,s.u_texsize),u_pixel_coord_upper:new o.bU(I,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.bU(I,s.u_pixel_coord_lower),u_scale:new o.bT(I,s.u_scale),u_fade:new o.bg(I,s.u_fade),u_fill_translate:new o.bU(I,s.u_fill_translate)}),circle:(I,s)=>({u_camera_to_center_distance:new o.bg(I,s.u_camera_to_center_distance),u_scale_with_map:new o.bP(I,s.u_scale_with_map),u_pitch_with_map:new o.bP(I,s.u_pitch_with_map),u_extrude_scale:new o.bU(I,s.u_extrude_scale),u_device_pixel_ratio:new o.bg(I,s.u_device_pixel_ratio),u_globe_extrude_scale:new o.bg(I,s.u_globe_extrude_scale),u_translate:new o.bU(I,s.u_translate)}),collisionBox:(I,s)=>({u_pixel_extrude_scale:new o.bU(I,s.u_pixel_extrude_scale)}),collisionCircle:(I,s)=>({u_viewport_size:new o.bU(I,s.u_viewport_size)}),debug:(I,s)=>({u_color:new o.bQ(I,s.u_color),u_overlay:new o.bP(I,s.u_overlay),u_overlay_scale:new o.bg(I,s.u_overlay_scale)}),depth:Kf,clippingMask:Kf,heatmap:(I,s)=>({u_extrude_scale:new o.bg(I,s.u_extrude_scale),u_intensity:new o.bg(I,s.u_intensity),u_globe_extrude_scale:new o.bg(I,s.u_globe_extrude_scale)}),heatmapTexture:(I,s)=>({u_matrix:new o.bR(I,s.u_matrix),u_world:new o.bU(I,s.u_world),u_image:new o.bP(I,s.u_image),u_color_ramp:new o.bP(I,s.u_color_ramp),u_opacity:new o.bg(I,s.u_opacity)}),hillshade:(I,s)=>({u_image:new o.bP(I,s.u_image),u_latrange:new o.bU(I,s.u_latrange),u_exaggeration:new o.bg(I,s.u_exaggeration),u_altitudes:new o.b_(I,s.u_altitudes),u_azimuths:new o.b_(I,s.u_azimuths),u_accent:new o.bQ(I,s.u_accent),u_method:new o.bP(I,s.u_method),u_shadows:new o.bZ(I,s.u_shadows),u_highlights:new o.bZ(I,s.u_highlights)}),hillshadePrepare:(I,s)=>({u_matrix:new o.bR(I,s.u_matrix),u_image:new o.bP(I,s.u_image),u_dimension:new o.bU(I,s.u_dimension),u_zoom:new o.bg(I,s.u_zoom),u_unpack:new o.bS(I,s.u_unpack)}),colorRelief:(I,s)=>({u_image:new o.bP(I,s.u_image),u_unpack:new o.bS(I,s.u_unpack),u_dimension:new o.bU(I,s.u_dimension),u_elevation_stops:new o.bP(I,s.u_elevation_stops),u_color_stops:new o.bP(I,s.u_color_stops),u_color_ramp_size:new o.bP(I,s.u_color_ramp_size),u_opacity:new o.bg(I,s.u_opacity)}),line:(I,s)=>({u_translation:new o.bU(I,s.u_translation),u_ratio:new o.bg(I,s.u_ratio),u_device_pixel_ratio:new o.bg(I,s.u_device_pixel_ratio),u_units_to_pixels:new o.bU(I,s.u_units_to_pixels)}),lineGradient:(I,s)=>({u_translation:new o.bU(I,s.u_translation),u_ratio:new o.bg(I,s.u_ratio),u_device_pixel_ratio:new o.bg(I,s.u_device_pixel_ratio),u_units_to_pixels:new o.bU(I,s.u_units_to_pixels),u_image:new o.bP(I,s.u_image),u_image_height:new o.bg(I,s.u_image_height)}),linePattern:(I,s)=>({u_translation:new o.bU(I,s.u_translation),u_texsize:new o.bU(I,s.u_texsize),u_ratio:new o.bg(I,s.u_ratio),u_device_pixel_ratio:new o.bg(I,s.u_device_pixel_ratio),u_image:new o.bP(I,s.u_image),u_units_to_pixels:new o.bU(I,s.u_units_to_pixels),u_scale:new o.bT(I,s.u_scale),u_fade:new o.bg(I,s.u_fade)}),lineSDF:(I,s)=>({u_translation:new o.bU(I,s.u_translation),u_ratio:new o.bg(I,s.u_ratio),u_device_pixel_ratio:new o.bg(I,s.u_device_pixel_ratio),u_units_to_pixels:new o.bU(I,s.u_units_to_pixels),u_patternscale_a:new o.bU(I,s.u_patternscale_a),u_patternscale_b:new o.bU(I,s.u_patternscale_b),u_sdfgamma:new o.bg(I,s.u_sdfgamma),u_image:new o.bP(I,s.u_image),u_tex_y_a:new o.bg(I,s.u_tex_y_a),u_tex_y_b:new o.bg(I,s.u_tex_y_b),u_mix:new o.bg(I,s.u_mix)}),raster:(I,s)=>({u_tl_parent:new o.bU(I,s.u_tl_parent),u_scale_parent:new o.bg(I,s.u_scale_parent),u_buffer_scale:new o.bg(I,s.u_buffer_scale),u_fade_t:new o.bg(I,s.u_fade_t),u_opacity:new o.bg(I,s.u_opacity),u_image0:new o.bP(I,s.u_image0),u_image1:new o.bP(I,s.u_image1),u_brightness_low:new o.bg(I,s.u_brightness_low),u_brightness_high:new o.bg(I,s.u_brightness_high),u_saturation_factor:new o.bg(I,s.u_saturation_factor),u_contrast_factor:new o.bg(I,s.u_contrast_factor),u_spin_weights:new o.bT(I,s.u_spin_weights),u_coords_top:new o.bS(I,s.u_coords_top),u_coords_bottom:new o.bS(I,s.u_coords_bottom)}),symbolIcon:(I,s)=>({u_is_size_zoom_constant:new o.bP(I,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bP(I,s.u_is_size_feature_constant),u_size_t:new o.bg(I,s.u_size_t),u_size:new o.bg(I,s.u_size),u_camera_to_center_distance:new o.bg(I,s.u_camera_to_center_distance),u_pitch:new o.bg(I,s.u_pitch),u_rotate_symbol:new o.bP(I,s.u_rotate_symbol),u_aspect_ratio:new o.bg(I,s.u_aspect_ratio),u_fade_change:new o.bg(I,s.u_fade_change),u_label_plane_matrix:new o.bR(I,s.u_label_plane_matrix),u_coord_matrix:new o.bR(I,s.u_coord_matrix),u_is_text:new o.bP(I,s.u_is_text),u_pitch_with_map:new o.bP(I,s.u_pitch_with_map),u_is_along_line:new o.bP(I,s.u_is_along_line),u_is_variable_anchor:new o.bP(I,s.u_is_variable_anchor),u_texsize:new o.bU(I,s.u_texsize),u_texture:new o.bP(I,s.u_texture),u_translation:new o.bU(I,s.u_translation),u_pitched_scale:new o.bg(I,s.u_pitched_scale)}),symbolSDF:(I,s)=>({u_is_size_zoom_constant:new o.bP(I,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bP(I,s.u_is_size_feature_constant),u_size_t:new o.bg(I,s.u_size_t),u_size:new o.bg(I,s.u_size),u_camera_to_center_distance:new o.bg(I,s.u_camera_to_center_distance),u_pitch:new o.bg(I,s.u_pitch),u_rotate_symbol:new o.bP(I,s.u_rotate_symbol),u_aspect_ratio:new o.bg(I,s.u_aspect_ratio),u_fade_change:new o.bg(I,s.u_fade_change),u_label_plane_matrix:new o.bR(I,s.u_label_plane_matrix),u_coord_matrix:new o.bR(I,s.u_coord_matrix),u_is_text:new o.bP(I,s.u_is_text),u_pitch_with_map:new o.bP(I,s.u_pitch_with_map),u_is_along_line:new o.bP(I,s.u_is_along_line),u_is_variable_anchor:new o.bP(I,s.u_is_variable_anchor),u_texsize:new o.bU(I,s.u_texsize),u_texture:new o.bP(I,s.u_texture),u_gamma_scale:new o.bg(I,s.u_gamma_scale),u_device_pixel_ratio:new o.bg(I,s.u_device_pixel_ratio),u_is_halo:new o.bP(I,s.u_is_halo),u_translation:new o.bU(I,s.u_translation),u_pitched_scale:new o.bg(I,s.u_pitched_scale)}),symbolTextAndIcon:(I,s)=>({u_is_size_zoom_constant:new o.bP(I,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bP(I,s.u_is_size_feature_constant),u_size_t:new o.bg(I,s.u_size_t),u_size:new o.bg(I,s.u_size),u_camera_to_center_distance:new o.bg(I,s.u_camera_to_center_distance),u_pitch:new o.bg(I,s.u_pitch),u_rotate_symbol:new o.bP(I,s.u_rotate_symbol),u_aspect_ratio:new o.bg(I,s.u_aspect_ratio),u_fade_change:new o.bg(I,s.u_fade_change),u_label_plane_matrix:new o.bR(I,s.u_label_plane_matrix),u_coord_matrix:new o.bR(I,s.u_coord_matrix),u_is_text:new o.bP(I,s.u_is_text),u_pitch_with_map:new o.bP(I,s.u_pitch_with_map),u_is_along_line:new o.bP(I,s.u_is_along_line),u_is_variable_anchor:new o.bP(I,s.u_is_variable_anchor),u_texsize:new o.bU(I,s.u_texsize),u_texsize_icon:new o.bU(I,s.u_texsize_icon),u_texture:new o.bP(I,s.u_texture),u_texture_icon:new o.bP(I,s.u_texture_icon),u_gamma_scale:new o.bg(I,s.u_gamma_scale),u_device_pixel_ratio:new o.bg(I,s.u_device_pixel_ratio),u_is_halo:new o.bP(I,s.u_is_halo),u_translation:new o.bU(I,s.u_translation),u_pitched_scale:new o.bg(I,s.u_pitched_scale)}),background:(I,s)=>({u_opacity:new o.bg(I,s.u_opacity),u_color:new o.bQ(I,s.u_color)}),backgroundPattern:(I,s)=>({u_opacity:new o.bg(I,s.u_opacity),u_image:new o.bP(I,s.u_image),u_pattern_tl_a:new o.bU(I,s.u_pattern_tl_a),u_pattern_br_a:new o.bU(I,s.u_pattern_br_a),u_pattern_tl_b:new o.bU(I,s.u_pattern_tl_b),u_pattern_br_b:new o.bU(I,s.u_pattern_br_b),u_texsize:new o.bU(I,s.u_texsize),u_mix:new o.bg(I,s.u_mix),u_pattern_size_a:new o.bU(I,s.u_pattern_size_a),u_pattern_size_b:new o.bU(I,s.u_pattern_size_b),u_scale_a:new o.bg(I,s.u_scale_a),u_scale_b:new o.bg(I,s.u_scale_b),u_pixel_coord_upper:new o.bU(I,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.bU(I,s.u_pixel_coord_lower),u_tile_units_to_pixels:new o.bg(I,s.u_tile_units_to_pixels)}),terrain:(I,s)=>({u_texture:new o.bP(I,s.u_texture),u_ele_delta:new o.bg(I,s.u_ele_delta),u_fog_matrix:new o.bR(I,s.u_fog_matrix),u_fog_color:new o.bQ(I,s.u_fog_color),u_fog_ground_blend:new o.bg(I,s.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.bg(I,s.u_fog_ground_blend_opacity),u_horizon_color:new o.bQ(I,s.u_horizon_color),u_horizon_fog_blend:new o.bg(I,s.u_horizon_fog_blend),u_is_globe_mode:new o.bg(I,s.u_is_globe_mode)}),terrainDepth:(I,s)=>({u_ele_delta:new o.bg(I,s.u_ele_delta)}),terrainCoords:(I,s)=>({u_texture:new o.bP(I,s.u_texture),u_terrain_coords_id:new o.bg(I,s.u_terrain_coords_id),u_ele_delta:new o.bg(I,s.u_ele_delta)}),projectionErrorMeasurement:(I,s)=>({u_input:new o.bg(I,s.u_input),u_output_expected:new o.bg(I,s.u_output_expected)}),atmosphere:(I,s)=>({u_sun_pos:new o.bT(I,s.u_sun_pos),u_atmosphere_blend:new o.bg(I,s.u_atmosphere_blend),u_globe_position:new o.bT(I,s.u_globe_position),u_globe_radius:new o.bg(I,s.u_globe_radius),u_inv_proj_matrix:new o.bR(I,s.u_inv_proj_matrix)}),sky:(I,s)=>({u_sky_color:new o.bQ(I,s.u_sky_color),u_horizon_color:new o.bQ(I,s.u_horizon_color),u_horizon:new o.bU(I,s.u_horizon),u_horizon_normal:new o.bU(I,s.u_horizon_normal),u_sky_horizon_blend:new o.bg(I,s.u_sky_horizon_blend),u_sky_blend:new o.bg(I,s.u_sky_blend)})};class oc{constructor(s,f,_){this.context=s;const w=s.gl;this.buffer=w.createBuffer(),this.dynamicDraw=!!_,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){const f=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),f.bufferSubData(f.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const MA={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ku{constructor(s,f,_,w){this.length=f.length,this.attributes=_,this.itemSize=f.bytesPerElement,this.dynamicDraw=w,this.context=s;const k=s.gl;this.buffer=k.createBuffer(),s.bindVertexBuffer.set(this.buffer),k.bufferData(k.ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){if(s.length!==this.length)throw new Error(`Length of new data is ${s.length}, which doesn't match current length of ${this.length}`);const f=this.context.gl;this.bind(),f.bufferSubData(f.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,f){for(let _=0;_<this.attributes.length;_++){const w=f.attributes[this.attributes[_].name];w!==void 0&&s.enableVertexAttribArray(w)}}setVertexAttribPointers(s,f,_){for(let w=0;w<this.attributes.length;w++){const k=this.attributes[w],N=f.attributes[k.name];N!==void 0&&s.vertexAttribPointer(N,k.components,s[MA[k.type]],!1,this.itemSize,k.offset+this.itemSize*(_||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Bo{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ch extends Bo{getDefault(){return o.bf.transparent}set(s){const f=this.current;(s.r!==f.r||s.g!==f.g||s.b!==f.b||s.a!==f.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class Sd extends Bo{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class Sm extends Bo{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class Sc extends Bo{getDefault(){return[!0,!0,!0,!0]}set(s){const f=this.current;(s[0]!==f[0]||s[1]!==f[1]||s[2]!==f[2]||s[3]!==f[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class zl extends Bo{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class Zt extends Bo{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class wn extends Bo{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){const f=this.current;(s.func!==f.func||s.ref!==f.ref||s.mask!==f.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class vn extends Bo{getDefault(){const s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){const f=this.current;(s[0]!==f[0]||s[1]!==f[1]||s[2]!==f[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class Ii extends Bo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;s?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST),this.current=s,this.dirty=!1}}class Sr extends Bo{getDefault(){return[0,1]}set(s){const f=this.current;(s[0]!==f[0]||s[1]!==f[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class Oo extends Bo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;s?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),this.current=s,this.dirty=!1}}class qs extends Bo{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class Do extends Bo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;s?f.enable(f.BLEND):f.disable(f.BLEND),this.current=s,this.dirty=!1}}class Hc extends Bo{getDefault(){const s=this.gl;return[s.ONE,s.ZERO]}set(s){const f=this.current;(s[0]!==f[0]||s[1]!==f[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class $d extends Bo{getDefault(){return o.bf.transparent}set(s){const f=this.current;(s.r!==f.r||s.g!==f.g||s.b!==f.b||s.a!==f.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class sA extends Bo{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class wd extends Bo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;s?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE),this.current=s,this.dirty=!1}}class du extends Bo{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class SA extends Bo{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}class wA extends Bo{getDefault(){return null}set(s){(s!==this.current||this.dirty)&&(this.gl.useProgram(s),this.current=s,this.dirty=!1)}}class Il extends Bo{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class jo extends Bo{getDefault(){const s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){const f=this.current;(s[0]!==f[0]||s[1]!==f[1]||s[2]!==f[2]||s[3]!==f[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class fu extends Bo{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class qh extends Bo{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;f.bindRenderbuffer(f.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Na extends Bo{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;f.bindTexture(f.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class Hs extends Bo{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;f.bindBuffer(f.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class ws extends Bo{getDefault(){return null}set(s){const f=this.gl;f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class XA extends Bo{getDefault(){return null}set(s){var f;if(s===this.current&&!this.dirty)return;const _=this.gl;st(_)?_.bindVertexArray(s):(f=_.getExtension("OES_vertex_array_object"))===null||f===void 0||f.bindVertexArrayOES(s),this.current=s,this.dirty=!1}}class Nl extends Bo{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class EA extends Bo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class ac extends Bo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class BA extends Bo{constructor(s,f){super(s),this.context=s,this.parent=f}getDefault(){return null}}class wc extends BA{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class _h extends BA{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Tr extends BA{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,f.RENDERBUFFER,s),this.current=s,this.dirty=!1}}const sc="Framebuffer is not complete";class JA{constructor(s,f,_,w,k){this.context=s,this.width=f,this.height=_;const N=s.gl,q=this.framebuffer=N.createFramebuffer();if(this.colorAttachment=new wc(s,q),w)this.depthAttachment=k?new Tr(s,q):new _h(s,q);else if(k)throw new Error("Stencil cannot be set without depth");if(N.checkFramebufferStatus(N.FRAMEBUFFER)!==N.FRAMEBUFFER_COMPLETE)throw new Error(sc)}destroy(){const s=this.context.gl,f=this.colorAttachment.get();if(f&&s.deleteTexture(f),this.depthAttachment){const _=this.depthAttachment.get();_&&s.deleteRenderbuffer(_)}s.deleteFramebuffer(this.framebuffer)}}class Ec{constructor(s){var f,_;if(this.gl=s,this.clearColor=new Ch(this),this.clearDepth=new Sd(this),this.clearStencil=new Sm(this),this.colorMask=new Sc(this),this.depthMask=new zl(this),this.stencilMask=new Zt(this),this.stencilFunc=new wn(this),this.stencilOp=new vn(this),this.stencilTest=new Ii(this),this.depthRange=new Sr(this),this.depthTest=new Oo(this),this.depthFunc=new qs(this),this.blend=new Do(this),this.blendFunc=new Hc(this),this.blendColor=new $d(this),this.blendEquation=new sA(this),this.cullFace=new wd(this),this.cullFaceSide=new du(this),this.frontFace=new SA(this),this.program=new wA(this),this.activeTexture=new Il(this),this.viewport=new jo(this),this.bindFramebuffer=new fu(this),this.bindRenderbuffer=new qh(this),this.bindTexture=new Na(this),this.bindVertexBuffer=new Hs(this),this.bindElementBuffer=new ws(this),this.bindVertexArray=new XA(this),this.pixelStoreUnpack=new Nl(this),this.pixelStoreUnpackPremultiplyAlpha=new EA(this),this.pixelStoreUnpackFlipY=new ac(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),st(s)){this.HALF_FLOAT=s.HALF_FLOAT;const w=s.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(f=s.RGBA16F)!==null&&f!==void 0?f:w?.RGBA16F_EXT,this.RGB16F=(_=s.RGB16F)!==null&&_!==void 0?_:w?.RGB16F_EXT,s.getExtension("EXT_color_buffer_float")}else{s.getExtension("EXT_color_buffer_half_float"),s.getExtension("OES_texture_half_float_linear");const w=s.getExtension("OES_texture_half_float");this.HALF_FLOAT=w?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,f){return new oc(this,s,f)}createVertexBuffer(s,f,_){return new Ku(this,s,f,_)}createRenderbuffer(s,f,_){const w=this.gl,k=w.createRenderbuffer();return this.bindRenderbuffer.set(k),w.renderbufferStorage(w.RENDERBUFFER,s,f,_),this.bindRenderbuffer.set(null),k}createFramebuffer(s,f,_,w){return new JA(this,s,f,_,w)}clear({color:s,depth:f,stencil:_}){const w=this.gl;let k=0;s&&(k|=w.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),f!==void 0&&(k|=w.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),_!==void 0&&(k|=w.STENCIL_BUFFER_BIT,this.clearStencil.set(_),this.stencilMask.set(255)),w.clear(k)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){o.bH(s.blendFunction,Dr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}createVertexArray(){var s;return st(this.gl)?this.gl.createVertexArray():(s=this.gl.getExtension("OES_vertex_array_object"))===null||s===void 0?void 0:s.createVertexArrayOES()}deleteVertexArray(s){var f;return st(this.gl)?this.gl.deleteVertexArray(s):(f=this.gl.getExtension("OES_vertex_array_object"))===null||f===void 0?void 0:f.deleteVertexArrayOES(s)}unbindVAO(){this.bindVertexArray.set(null)}}let Es;function bh(I,s,f,_,w){const k=I.context,N=I.transform,q=k.gl,J=I.useProgram("collisionBox"),he=[];let pe=0,Ee=0;for(let ft=0;ft<_.length;ft++){const xt=_[ft],Ct=s.getTile(xt).getBucket(f);if(!Ct)continue;const wt=w?Ct.textCollisionBox:Ct.iconCollisionBox,Pt=Ct.collisionCircleArray;Pt.length>0&&(he.push({circleArray:Pt,circleOffset:Ee,coord:xt}),pe+=Pt.length/4,Ee=pe),wt&&J.draw(k,q.LINES,Mi.disabled,te.disabled,I.colorModeForRenderPass(),Zi.disabled,yh(I.transform),I.style.map.terrain&&I.style.map.terrain.getTerrainData(xt),N.getProjectionData({overscaledTileID:xt,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),f.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,null,I.transform.zoom,null,null,wt.collisionVertexBuffer)}if(!w||!he.length)return;const Se=I.useProgram("collisionCircle"),Ue=new o.b$;Ue.resize(4*pe),Ue._trim();let Xe=0;for(const ft of he)for(let xt=0;xt<ft.circleArray.length/4;xt++){const Ct=4*xt,wt=ft.circleArray[Ct+0],Pt=ft.circleArray[Ct+1],Lt=ft.circleArray[Ct+2],Bt=ft.circleArray[Ct+3];Ue.emplace(Xe++,wt,Pt,Lt,Bt,0),Ue.emplace(Xe++,wt,Pt,Lt,Bt,1),Ue.emplace(Xe++,wt,Pt,Lt,Bt,2),Ue.emplace(Xe++,wt,Pt,Lt,Bt,3)}(!Es||Es.length<2*pe)&&(Es=function(ft){const xt=2*ft,Ct=new o.c1;Ct.resize(xt),Ct._trim();for(let wt=0;wt<xt;wt++){const Pt=6*wt;Ct.uint16[Pt+0]=4*wt+0,Ct.uint16[Pt+1]=4*wt+1,Ct.uint16[Pt+2]=4*wt+2,Ct.uint16[Pt+3]=4*wt+2,Ct.uint16[Pt+4]=4*wt+3,Ct.uint16[Pt+5]=4*wt+0}return Ct}(pe));const At=k.createIndexBuffer(Es,!0),ct=k.createVertexBuffer(Ue,o.c0.members,!0);for(const ft of he){const xt=vh(I.transform);Se.draw(k,q.TRIANGLES,Mi.disabled,te.disabled,I.colorModeForRenderPass(),Zi.disabled,xt,I.style.map.terrain&&I.style.map.terrain.getTerrainData(ft.coord),null,f.id,ct,At,o.aM.simpleSegment(0,2*ft.circleOffset,ft.circleArray.length,ft.circleArray.length/2),null,I.transform.zoom,null,null,null)}ct.destroy(),At.destroy()}const Ed=o.ag(new Float32Array(16));function mu(I,s,f,_,w,k){const{horizontalAlign:N,verticalAlign:q}=o.aH(I);return new o.P((-(N-.5)*s/w+_[0])*k,(-(q-.5)*f/w+_[1])*k)}function Bd(I,s,f,_,w,k){const N=s.tileAnchorPoint.add(new o.P(s.translation[0],s.translation[1]));if(s.pitchWithMap){let q=_.mult(k);f||(q=q.rotate(-w));const J=N.add(q);return Wi(J.x,J.y,s.pitchedLabelPlaneMatrix,s.getElevation).point}if(f){const q=vr(s.tileAnchorPoint.x+1,s.tileAnchorPoint.y,s).point.sub(I),J=Math.atan(q.y/q.x)+(q.x<0?Math.PI:0);return I.add(_.rotate(J))}return I.add(_)}function Vc(I,s,f,_,w,k,N,q,J,he,pe,Ee){const Se=I.text.placedSymbolArray,Ue=I.text.dynamicLayoutVertexArray,Xe=I.icon.dynamicLayoutVertexArray,At={};Ue.clear();for(let ct=0;ct<Se.length;ct++){const ft=Se.get(ct),xt=ft.hidden||!ft.crossTileID||I.allowVerticalPlacement&&!ft.placedOrientation?null:_[ft.crossTileID];if(xt){const Ct=new o.P(ft.anchorX,ft.anchorY),wt={getElevation:Ee,width:w.width,height:w.height,pitchedLabelPlaneMatrix:k,pitchWithMap:f,transform:w,tileAnchorPoint:Ct,translation:he,unwrappedTileID:pe},Pt=f?Ir(Ct.x,Ct.y,wt):vr(Ct.x,Ct.y,wt),Lt=Sn(w.cameraToCenterDistance,Pt.signedDistanceFromCamera);let Bt=o.ap(I.textSizeData,q,ft)*Lt/o.aB;f&&(Bt*=I.tilePixelRatio/N);const{width:Yt,height:dn,anchor:Xt,textOffset:nn,textBoxScale:An}=xt,qn=mu(Xt,Yt,dn,nn,An,Bt),Qn=w.getPitchedTextCorrection(Ct.x+he[0],Ct.y+he[1],pe),Tn=Bd(Pt.point,wt,s,qn,-w.bearingInRadians,Qn),bi=I.allowVerticalPlacement&&ft.placedOrientation===o.ao.vertical?Math.PI/2:0;for(let cr=0;cr<ft.numGlyphs;cr++)o.av(Ue,Tn,bi);J&&ft.associatedIconIndex>=0&&(At[ft.associatedIconIndex]={shiftedAnchor:Tn,angle:bi})}else $a(ft.numGlyphs,Ue)}if(J){Xe.clear();const ct=I.icon.placedSymbolArray;for(let ft=0;ft<ct.length;ft++){const xt=ct.get(ft);if(xt.hidden)$a(xt.numGlyphs,Xe);else{const Ct=At[ft];if(Ct)for(let wt=0;wt<xt.numGlyphs;wt++)o.av(Xe,Ct.shiftedAnchor,Ct.angle);else $a(xt.numGlyphs,Xe)}}I.icon.dynamicLayoutVertexBuffer.updateData(Xe)}I.text.dynamicLayoutVertexBuffer.updateData(Ue)}function OA(I,s,f){return f.iconsInText&&s?"symbolTextAndIcon":I?"symbolSDF":"symbolIcon"}function Uu(I,s,f,_,w,k,N,q,J,he,pe,Ee,Se){const Ue=I.context,Xe=Ue.gl,At=I.transform,ct=q==="map",ft=J==="map",xt=q!=="viewport"&&f.layout.get("symbol-placement")!=="point",Ct=ct&&!ft&&!xt,wt=!f.layout.get("symbol-sort-key").isConstant();let Pt=!1;const Lt=I.getDepthModeForSublayer(0,Mi.ReadOnly),Bt=f._unevaluatedLayout.hasValue("text-variable-anchor")||f._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Yt=[],dn=At.getCircleRadiusCorrection();for(const Xt of _){const nn=s.getTile(Xt),An=nn.getBucket(f);if(!An)continue;const qn=w?An.text:An.icon;if(!qn||!qn.segments.get().length||!qn.hasVisibleVertices)continue;const Qn=qn.programConfigurations.get(f.id),Tn=w||An.sdfIcons,bi=w?An.textSizeData:An.iconSizeData,cr=ft||At.pitch!==0,_o=I.useProgram(OA(Tn,w,An),Qn),la=o.an(bi,At.zoom),Lo=I.style.map.terrain&&I.style.map.terrain.getTerrainData(Xt);let Ra,Aa,Er,Qo,ts=[0,0],Wa=null;if(w)Aa=nn.glyphAtlasTexture,Er=Xe.LINEAR,Ra=nn.glyphAtlasTexture.size,An.iconsInText&&(ts=nn.imageAtlasTexture.size,Wa=nn.imageAtlasTexture,Qo=cr||I.options.rotating||I.options.zooming||bi.kind==="composite"||bi.kind==="camera"?Xe.LINEAR:Xe.NEAREST);else{const bo=f.layout.get("icon-size").constantOr(0)!==1||An.iconsNeedLinear;Aa=nn.imageAtlasTexture,Er=Tn||I.options.rotating||I.options.zooming||bo||cr?Xe.LINEAR:Xe.NEAREST,Ra=nn.imageAtlasTexture.size}const Bs=o.aC(nn,1,I.transform.zoom),Os=wi(ct,I.transform,Bs),Qu=o.L();o.aq(Qu,Os);const hc=hi(ft,ct,I.transform,Bs),ql=o.aD(At,nn,k,N),Oh=At.getProjectionData({overscaledTileID:Xt,applyGlobeMatrix:!Se,applyTerrainMatrix:!0}),ih=Bt&&An.hasTextData(),Yu=f.layout.get("icon-text-fit")!=="none"&&ih&&An.hasIconData();if(xt){const bo=I.style.map.terrain?(hA,gs)=>I.style.map.terrain.getElevation(Xt,hA,gs):null,Xo=f.layout.get("text-rotation-alignment")==="map";Hi(An,I,w,Os,Qu,ft,he,Xo,Xt.toUnwrapped(),At.width,At.height,ql,bo)}const Rc=w&&Bt||Yu,bl=xt||Rc?Ed:ft?Os:I.transform.clipSpaceToPixelsMatrix,qu=Tn&&f.paint.get(w?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let xl;xl=Tn?An.iconsInText?hu(bi.kind,la,Ct,ft,xt,Rc,I,bl,hc,ql,Ra,ts,dn):Vd(bi.kind,la,Ct,ft,xt,Rc,I,bl,hc,ql,w,Ra,0,dn):qc(bi.kind,la,Ct,ft,xt,Rc,I,bl,hc,ql,w,Ra,dn);const Pc={program:_o,buffers:qn,uniformValues:xl,projectionData:Oh,atlasTexture:Aa,atlasTextureIcon:Wa,atlasInterpolation:Er,atlasInterpolationIcon:Qo,isSDF:Tn,hasHalo:qu};if(wt&&An.canOverlap){Pt=!0;const bo=qn.segments.get();for(const Xo of bo)Yt.push({segments:new o.aM([Xo]),sortKey:Xo.sortKey,state:Pc,terrainData:Lo})}else Yt.push({segments:qn.segments,sortKey:0,state:Pc,terrainData:Lo})}Pt&&Yt.sort((Xt,nn)=>Xt.sortKey-nn.sortKey);for(const Xt of Yt){const nn=Xt.state;if(Ue.activeTexture.set(Xe.TEXTURE0),nn.atlasTexture.bind(nn.atlasInterpolation,Xe.CLAMP_TO_EDGE),nn.atlasTextureIcon&&(Ue.activeTexture.set(Xe.TEXTURE1),nn.atlasTextureIcon&&nn.atlasTextureIcon.bind(nn.atlasInterpolationIcon,Xe.CLAMP_TO_EDGE)),nn.isSDF){const An=nn.uniformValues;nn.hasHalo&&(An.u_is_halo=1,xh(nn.buffers,Xt.segments,f,I,nn.program,Lt,pe,Ee,An,nn.projectionData,Xt.terrainData)),An.u_is_halo=0}xh(nn.buffers,Xt.segments,f,I,nn.program,Lt,pe,Ee,nn.uniformValues,nn.projectionData,Xt.terrainData)}}function xh(I,s,f,_,w,k,N,q,J,he,pe){const Ee=_.context;w.draw(Ee,Ee.gl.TRIANGLES,k,N,q,Zi.backCCW,J,pe,he,f.id,I.layoutVertexBuffer,I.indexBuffer,s,f.paint,_.transform.zoom,I.programConfigurations.get(f.id),I.dynamicLayoutVertexBuffer,I.opacityVertexBuffer)}function Hh(I,s,f,_,w){const k=I.context,N=k.gl,q=te.disabled,J=new Dr([N.ONE,N.ONE],o.bf.transparent,[!0,!0,!0,!0]),he=s.getBucket(f);if(!he)return;const pe=_.key;let Ee=f.heatmapFbos.get(pe);Ee||(Ee=Tl(k,s.tileSize,s.tileSize),f.heatmapFbos.set(pe,Ee)),k.bindFramebuffer.set(Ee.framebuffer),k.viewport.set([0,0,s.tileSize,s.tileSize]),k.clear({color:o.bf.transparent});const Se=he.programConfigurations.get(f.id),Ue=I.useProgram("heatmap",Se,!w),Xe=I.transform.getProjectionData({overscaledTileID:s.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),At=I.style.map.terrain.getTerrainData(_);Ue.draw(k,N.TRIANGLES,Mi.disabled,q,J,Zi.disabled,Rf(s,I.transform.zoom,f.paint.get("heatmap-intensity"),1),At,Xe,f.id,he.layoutVertexBuffer,he.indexBuffer,he.segments,f.paint,I.transform.zoom,Se)}function IA(I,s,f,_,w){const k=I.context,N=k.gl,q=I.transform;k.setColorMode(I.colorModeForRenderPass());const J=Wo(k,s),he=f.key,pe=s.heatmapFbos.get(he);if(!pe)return;k.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,pe.colorAttachment.get()),k.activeTexture.set(N.TEXTURE1),J.bind(N.LINEAR,N.CLAMP_TO_EDGE);const Ee=q.getProjectionData({overscaledTileID:f,applyTerrainMatrix:w,applyGlobeMatrix:!_});I.useProgram("heatmapTexture").draw(k,N.TRIANGLES,Mi.disabled,te.disabled,I.colorModeForRenderPass(),Zi.disabled,oA(I,s,0,1),null,Ee,s.id,I.rasterBoundsBuffer,I.quadTriangleIndexBuffer,I.rasterBoundsSegments,s.paint,q.zoom),pe.destroy(),s.heatmapFbos.delete(he)}function Tl(I,s,f){var _,w;const k=I.gl,N=k.createTexture();k.bindTexture(k.TEXTURE_2D,N),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.LINEAR),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.LINEAR);const q=(_=I.HALF_FLOAT)!==null&&_!==void 0?_:k.UNSIGNED_BYTE,J=(w=I.RGBA16F)!==null&&w!==void 0?w:k.RGBA;k.texImage2D(k.TEXTURE_2D,0,J,s,f,0,k.RGBA,q,null);const he=I.createFramebuffer(s,f,!1,!1);return he.colorAttachment.set(N),he}function Wo(I,s){return s.colorRampTexture||(s.colorRampTexture=new o.T(I,s.colorRamp,I.gl.RGBA)),s.colorRampTexture}function aa(I,s,f,_,w){if(!f||!_||!_.imageAtlas)return;const k=_.imageAtlas.patternPositions;let N=k[f.to.toString()],q=k[f.from.toString()];if(!N&&q&&(N=q),!q&&N&&(q=N),!N||!q){const J=w.getPaintProperty(s);N=k[J],q=k[J]}N&&q&&I.setConstantPatternPositions(N,q)}function Lu(I,s,f,_,w,k,N,q){const J=I.context.gl,he="fill-pattern",pe=f.paint.get(he),Ee=pe&&pe.constantOr(1),Se=f.getCrossfadeParameters();let Ue,Xe,At,ct,ft;const xt=I.transform,Ct=f.paint.get("fill-translate"),wt=f.paint.get("fill-translate-anchor");N?(Xe=Ee&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ue=J.LINES):(Xe=Ee?"fillPattern":"fill",Ue=J.TRIANGLES);const Pt=pe.constantOr(null);for(const Lt of _){const Bt=s.getTile(Lt);if(Ee&&!Bt.patternsLoaded())continue;const Yt=Bt.getBucket(f);if(!Yt)continue;const dn=Yt.programConfigurations.get(f.id),Xt=I.useProgram(Xe,dn),nn=I.style.map.terrain&&I.style.map.terrain.getTerrainData(Lt);Ee&&(I.context.activeTexture.set(J.TEXTURE0),Bt.imageAtlasTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE),dn.updatePaintBuffers(Se)),aa(dn,he,Pt,Bt,f);const An=xt.getProjectionData({overscaledTileID:Lt,applyGlobeMatrix:!q,applyTerrainMatrix:!0}),qn=o.aD(xt,Bt,Ct,wt);if(N){ct=Yt.indexBuffer2,ft=Yt.segments2;const Tn=[J.drawingBufferWidth,J.drawingBufferHeight];At=Xe==="fillOutlinePattern"&&Ee?jh(I,Se,Bt,Tn,qn):Yc(Tn,qn)}else ct=Yt.indexBuffer,ft=Yt.segments,At=Ee?Gh(I,Se,Bt,qn):{u_fill_translate:qn};const Qn=I.stencilModeForClipping(Lt);Xt.draw(I.context,Ue,w,Qn,k,Zi.backCCW,At,nn,An,f.id,Yt.layoutVertexBuffer,ct,ft,f.paint,I.transform.zoom,dn)}}function Fu(I,s,f,_,w,k,N,q){const J=I.context,he=J.gl,pe="fill-extrusion-pattern",Ee=f.paint.get(pe),Se=Ee.constantOr(1),Ue=f.getCrossfadeParameters(),Xe=f.paint.get("fill-extrusion-opacity"),At=Ee.constantOr(null),ct=I.transform;for(const ft of _){const xt=s.getTile(ft),Ct=xt.getBucket(f);if(!Ct)continue;const wt=I.style.map.terrain&&I.style.map.terrain.getTerrainData(ft),Pt=Ct.programConfigurations.get(f.id),Lt=I.useProgram(Se?"fillExtrusionPattern":"fillExtrusion",Pt);Se&&(I.context.activeTexture.set(he.TEXTURE0),xt.imageAtlasTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE),Pt.updatePaintBuffers(Ue));const Bt=ct.getProjectionData({overscaledTileID:ft,applyGlobeMatrix:!q,applyTerrainMatrix:!0});aa(Pt,pe,At,xt,f);const Yt=o.aD(ct,xt,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),dn=f.paint.get("fill-extrusion-vertical-gradient"),Xt=Se?bd(I,dn,Xe,Yt,ft,Ue,xt):Fl(I,dn,Xe,Yt);Lt.draw(J,J.gl.TRIANGLES,w,k,N,Zi.backCCW,Xt,wt,Bt,f.id,Ct.layoutVertexBuffer,Ct.indexBuffer,Ct.segments,f.paint,I.transform.zoom,Pt,I.style.map.terrain&&Ct.centroidVertexBuffer)}}function Bc(I,s,f,_,w,k,N,q,J){var he;const pe=I.style.projection,Ee=I.context,Se=I.transform,Ue=Ee.gl,Xe=[`#define NUM_ILLUMINATION_SOURCES ${f.paint.get("hillshade-highlight-color").values.length}`],At=I.useProgram("hillshade",null,!1,Xe),ct=!I.options.moving;for(const ft of _){const xt=s.getTile(ft),Ct=xt.fbo;if(!Ct)continue;const wt=pe.getMeshFromTileID(Ee,ft.canonical,q,!0,"raster"),Pt=(he=I.style.map.terrain)===null||he===void 0?void 0:he.getTerrainData(ft);Ee.activeTexture.set(Ue.TEXTURE0),Ue.bindTexture(Ue.TEXTURE_2D,Ct.colorAttachment.get());const Lt=Se.getProjectionData({overscaledTileID:ft,aligned:ct,applyGlobeMatrix:!J,applyTerrainMatrix:!0});At.draw(Ee,Ue.TRIANGLES,k,w[ft.overscaledZ],N,Zi.backCCW,Pf(I,xt,f),Pt,Lt,f.id,wt.vertexBuffer,wt.indexBuffer,wt.segments)}}function $c(I,s,f,_,w,k,N,q,J){var he;const pe=I.style.projection,Ee=I.context,Se=I.transform,Ue=Ee.gl,Xe=I.useProgram("colorRelief"),At=!I.options.moving;let ct=!0,ft=0;for(const xt of _){const Ct=s.getTile(xt),wt=Ct.dem;if(ct){const Xt=Ue.getParameter(Ue.MAX_TEXTURE_SIZE),{elevationTexture:nn,colorTexture:An}=f.getColorRampTextures(Ee,Xt,wt.getUnpackVector());Ee.activeTexture.set(Ue.TEXTURE1),nn.bind(Ue.NEAREST,Ue.CLAMP_TO_EDGE),Ee.activeTexture.set(Ue.TEXTURE4),An.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE),ct=!1,ft=nn.size[0]}if(!wt||!wt.data)continue;const Pt=wt.stride,Lt=wt.getPixels();if(Ee.activeTexture.set(Ue.TEXTURE0),Ee.pixelStoreUnpackPremultiplyAlpha.set(!1),Ct.demTexture=Ct.demTexture||I.getTileTexture(Pt),Ct.demTexture){const Xt=Ct.demTexture;Xt.update(Lt,{premultiply:!1}),Xt.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE)}else Ct.demTexture=new o.T(Ee,Lt,Ue.RGBA,{premultiply:!1}),Ct.demTexture.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE);const Bt=pe.getMeshFromTileID(Ee,xt.canonical,q,!0,"raster"),Yt=(he=I.style.map.terrain)===null||he===void 0?void 0:he.getTerrainData(xt),dn=Se.getProjectionData({overscaledTileID:xt,aligned:At,applyGlobeMatrix:!J,applyTerrainMatrix:!0});Xe.draw(Ee,Ue.TRIANGLES,k,w[xt.overscaledZ],N,Zi.backCCW,xc(f,Ct.dem,ft),Yt,dn,f.id,Bt.vertexBuffer,Bt.indexBuffer,Bt.segments)}}const Zc=[new o.P(0,0),new o.P(o.$,0),new o.P(o.$,o.$),new o.P(0,o.$)];function va(I,s,f,_,w,k,N,q,J=!1,he=!1){const pe=_[_.length-1].overscaledZ,Ee=I.context,Se=Ee.gl,Ue=I.useProgram("raster"),Xe=I.transform,At=I.style.projection,ct=I.colorModeForRenderPass(),ft=!I.options.moving;for(const xt of _){const Ct=I.getDepthModeForSublayer(xt.overscaledZ-pe,f.paint.get("raster-opacity")===1?Mi.ReadWrite:Mi.ReadOnly,Se.LESS),wt=s.getTile(xt);wt.registerFadeDuration(f.paint.get("raster-fade-duration"));const Pt=s.findLoadedParent(xt,0),Lt=s.findLoadedSibling(xt),Bt=_a(wt,Pt||Lt||null,s,f,I.transform,I.style.map.terrain);let Yt,dn;const Xt=f.paint.get("raster-resampling")==="nearest"?Se.NEAREST:Se.LINEAR;Ee.activeTexture.set(Se.TEXTURE0),wt.texture.bind(Xt,Se.CLAMP_TO_EDGE,Se.LINEAR_MIPMAP_NEAREST),Ee.activeTexture.set(Se.TEXTURE1),Pt?(Pt.texture.bind(Xt,Se.CLAMP_TO_EDGE,Se.LINEAR_MIPMAP_NEAREST),Yt=Math.pow(2,Pt.tileID.overscaledZ-wt.tileID.overscaledZ),dn=[wt.tileID.canonical.x*Yt%1,wt.tileID.canonical.y*Yt%1]):wt.texture.bind(Xt,Se.CLAMP_TO_EDGE,Se.LINEAR_MIPMAP_NEAREST),wt.texture.useMipmap&&Ee.extTextureFilterAnisotropic&&I.transform.pitch>20&&Se.texParameterf(Se.TEXTURE_2D,Ee.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ee.extTextureFilterAnisotropicMax);const nn=I.style.map.terrain&&I.style.map.terrain.getTerrainData(xt),An=Xe.getProjectionData({overscaledTileID:xt,aligned:ft,applyGlobeMatrix:!he,applyTerrainMatrix:!0}),qn=Yh(dn||[0,0],Yt||1,Bt,f,q),Qn=At.getMeshFromTileID(Ee,xt.canonical,k,N,"raster");Ue.draw(Ee,Se.TRIANGLES,Ct,w?w[xt.overscaledZ]:te.disabled,ct,J?Zi.frontCCW:Zi.backCCW,qn,nn,An,f.id,Qn.vertexBuffer,Qn.indexBuffer,Qn.segments)}}function _a(I,s,f,_,w,k){const N=_.paint.get("raster-fade-duration");if(!k&&N>0){const q=U.now(),J=(q-I.timeAdded)/N,he=s?(q-s.timeAdded)/N:-1,pe=f.getSource(),Ee=kt(w,{tileSize:pe.tileSize,roundZoom:pe.roundZoom}),Se=!s||Math.abs(s.tileID.overscaledZ-Ee)>Math.abs(I.tileID.overscaledZ-Ee),Ue=Se&&I.refreshedUponExpiration?1:o.ah(Se?J:1-he,0,1);return I.refreshedUponExpiration&&J>=1&&(I.refreshedUponExpiration=!1),s?{opacity:1,mix:1-Ue}:{opacity:Ue,mix:0}}return{opacity:1,mix:0}}const $r=new o.bf(1,0,0,1),lA=new o.bf(0,1,0,1),Ls=new o.bf(0,0,1,1),Xc=new o.bf(1,0,1,1),pu=new o.bf(0,1,1,1);function Zd(I,s,f,_){il(I,0,s+f/2,I.transform.width,f,_)}function ms(I,s,f,_){il(I,s-f/2,0,f,I.transform.height,_)}function il(I,s,f,_,w,k){const N=I.context,q=N.gl;q.enable(q.SCISSOR_TEST),q.scissor(s*I.pixelRatio,f*I.pixelRatio,_*I.pixelRatio,w*I.pixelRatio),N.clear({color:k}),q.disable(q.SCISSOR_TEST)}function Fs(I,s,f){const _=I.context,w=_.gl,k=I.useProgram("debug"),N=Mi.disabled,q=te.disabled,J=I.colorModeForRenderPass(),he="$debug",pe=I.style.map.terrain&&I.style.map.terrain.getTerrainData(f);_.activeTexture.set(w.TEXTURE0);const Ee=s.getTileByID(f.key).latestRawTileData,Se=Math.floor((Ee&&Ee.byteLength||0)/1024),Ue=s.getTile(f).tileSize,Xe=512/Math.min(Ue,512)*(f.overscaledZ/I.transform.zoom)*.5;let At=f.canonical.toString();f.overscaledZ!==f.canonical.z&&(At+=` => ${f.overscaledZ}`),function(ft,xt){ft.initDebugOverlayCanvas();const Ct=ft.debugOverlayCanvas,wt=ft.context.gl,Pt=ft.debugOverlayCanvas.getContext("2d");Pt.clearRect(0,0,Ct.width,Ct.height),Pt.shadowColor="white",Pt.shadowBlur=2,Pt.lineWidth=1.5,Pt.strokeStyle="white",Pt.textBaseline="top",Pt.font="bold 36px Open Sans, sans-serif",Pt.fillText(xt,5,5),Pt.strokeText(xt,5,5),ft.debugOverlayTexture.update(Ct),ft.debugOverlayTexture.bind(wt.LINEAR,wt.CLAMP_TO_EDGE)}(I,`${At} ${Se}kB`);const ct=I.transform.getProjectionData({overscaledTileID:f,applyGlobeMatrix:!0,applyTerrainMatrix:!0});k.draw(_,w.TRIANGLES,N,q,Dr.alphaBlended,Zi.disabled,Wh(o.bf.transparent,Xe),null,ct,he,I.debugBuffer,I.quadTriangleIndexBuffer,I.debugSegments),k.draw(_,w.LINE_STRIP,N,q,J,Zi.disabled,Wh(o.bf.red),pe,ct,he,I.debugBuffer,I.tileBorderIndexBuffer,I.debugSegments)}function Xd(I,s,f,_){const{isRenderingGlobe:w}=_,k=I.context,N=k.gl,q=I.transform,J=I.colorModeForRenderPass(),he=I.getDepthModeFor3D(),pe=I.useProgram("terrain");k.bindFramebuffer.set(null),k.viewport.set([0,0,I.width,I.height]);for(const Ee of f){const Se=s.getTerrainMesh(Ee.tileID),Ue=I.renderToTexture.getTexture(Ee),Xe=s.getTerrainData(Ee.tileID);k.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,Ue.texture);const At=s.getMeshFrameDelta(q.zoom),ct=q.calculateFogMatrix(Ee.tileID.toUnwrapped()),ft=Tf(At,ct,I.style.sky,q.pitch,w),xt=q.getProjectionData({overscaledTileID:Ee.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});pe.draw(k,N.TRIANGLES,he,te.disabled,J,Zi.backCCW,ft,Xe,xt,"terrain",Se.vertexBuffer,Se.indexBuffer,Se.segments)}}function zu(I,s){if(!s.mesh){const f=new o.aL;f.emplaceBack(-1,-1),f.emplaceBack(1,-1),f.emplaceBack(1,1),f.emplaceBack(-1,1);const _=new o.aN;_.emplaceBack(0,1,2),_.emplaceBack(0,2,3),s.mesh=new Kl(I.createVertexBuffer(f,ga.members),I.createIndexBuffer(_),o.aM.simpleSegment(0,0,f.length,_.length))}return s.mesh}class Mh{constructor(s,f){this.context=new Ec(s),this.transform=f,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Dn.maxUnderzooming+Dn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Qs}resize(s,f,_){if(this.width=Math.floor(s*_),this.height=Math.floor(f*_),this.pixelRatio=_,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const w of this.style._order)this.style._layers[w].resize()}setup(){const s=this.context,f=new o.aL;f.emplaceBack(0,0),f.emplaceBack(o.$,0),f.emplaceBack(0,o.$),f.emplaceBack(o.$,o.$),this.tileExtentBuffer=s.createVertexBuffer(f,ga.members),this.tileExtentSegments=o.aM.simpleSegment(0,0,4,2);const _=new o.aL;_.emplaceBack(0,0),_.emplaceBack(o.$,0),_.emplaceBack(0,o.$),_.emplaceBack(o.$,o.$),this.debugBuffer=s.createVertexBuffer(_,ga.members),this.debugSegments=o.aM.simpleSegment(0,0,4,5);const w=new o.c6;w.emplaceBack(0,0,0,0),w.emplaceBack(o.$,0,o.$,0),w.emplaceBack(0,o.$,0,o.$),w.emplaceBack(o.$,o.$,o.$,o.$),this.rasterBoundsBuffer=s.createVertexBuffer(w,Cd.members),this.rasterBoundsSegments=o.aM.simpleSegment(0,0,4,2);const k=new o.aL;k.emplaceBack(0,0),k.emplaceBack(o.$,0),k.emplaceBack(0,o.$),k.emplaceBack(o.$,o.$),this.rasterBoundsBufferPosOnly=s.createVertexBuffer(k,ga.members),this.rasterBoundsSegmentsPosOnly=o.aM.simpleSegment(0,0,4,5);const N=new o.aL;N.emplaceBack(0,0),N.emplaceBack(1,0),N.emplaceBack(0,1),N.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(N,ga.members),this.viewportSegments=o.aM.simpleSegment(0,0,4,2);const q=new o.c7;q.emplaceBack(0),q.emplaceBack(1),q.emplaceBack(3),q.emplaceBack(2),q.emplaceBack(0),this.tileBorderIndexBuffer=s.createIndexBuffer(q);const J=new o.aN;J.emplaceBack(1,0,2),J.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(J);const he=this.context.gl;this.stencilClearMode=new te({func:he.ALWAYS,mask:0},0,255,he.ZERO,he.ZERO,he.ZERO),this.tileExtentMesh=new Kl(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const s=this.context,f=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const _=o.L();o.bY(_,0,this.width,this.height,0,0,1),o.N(_,_,[f.drawingBufferWidth,f.drawingBufferHeight,0]);const w={mainMatrix:_,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:_};this.useProgram("clippingMask",null,!0).draw(s,f.TRIANGLES,Mi.disabled,this.stencilClearMode,Dr.disabled,Zi.disabled,null,null,w,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(s,f,_){if(this.currentStencilSource===s.source||!s.isTileClipped()||!f||!f.length)return;this.currentStencilSource=s.source,this.nextStencilID+f.length>256&&this.clearStencil();const w=this.context;w.setColorMode(Dr.disabled),w.setDepthMode(Mi.disabled);const k={};for(const N of f)k[N.key]=this.nextStencilID++;this._renderTileMasks(k,f,_,!0),this._renderTileMasks(k,f,_,!1),this._tileClippingMaskIDs=k}_renderTileMasks(s,f,_,w){const k=this.context,N=k.gl,q=this.style.projection,J=this.transform,he=this.useProgram("clippingMask");for(const pe of f){const Ee=s[pe.key],Se=this.style.map.terrain&&this.style.map.terrain.getTerrainData(pe),Ue=q.getMeshFromTileID(this.context,pe.canonical,w,!0,"stencil"),Xe=J.getProjectionData({overscaledTileID:pe,applyGlobeMatrix:!_,applyTerrainMatrix:!0});he.draw(k,N.TRIANGLES,Mi.disabled,new te({func:N.ALWAYS,mask:0},Ee,255,N.KEEP,N.KEEP,N.REPLACE),Dr.disabled,_?Zi.disabled:Zi.backCCW,null,Se,Xe,"$clipping",Ue.vertexBuffer,Ue.indexBuffer,Ue.segments)}}_renderTilesDepthBuffer(){const s=this.context,f=s.gl,_=this.style.projection,w=this.transform,k=this.useProgram("depth"),N=this.getDepthModeFor3D(),q=it(w,{tileSize:w.tileSize});for(const J of q){const he=this.style.map.terrain&&this.style.map.terrain.getTerrainData(J),pe=_.getMeshFromTileID(this.context,J.canonical,!0,!0,"raster"),Ee=w.getProjectionData({overscaledTileID:J,applyGlobeMatrix:!0,applyTerrainMatrix:!0});k.draw(s,f.TRIANGLES,N,te.disabled,Dr.disabled,Zi.backCCW,null,he,Ee,"$clipping",pe.vertexBuffer,pe.indexBuffer,pe.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const s=this.nextStencilID++,f=this.context.gl;return new te({func:f.NOTEQUAL,mask:255},s,255,f.KEEP,f.KEEP,f.REPLACE)}stencilModeForClipping(s){const f=this.context.gl;return new te({func:f.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,f.KEEP,f.KEEP,f.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(s){const f=this.context.gl,_=s.sort((N,q)=>q.overscaledZ-N.overscaledZ),w=_[_.length-1].overscaledZ,k=_[0].overscaledZ-w+1;if(k>1){this.currentStencilSource=void 0,this.nextStencilID+k>256&&this.clearStencil();const N={};for(let q=0;q<k;q++)N[q+w]=new te({func:f.GEQUAL,mask:255},q+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=k,[N,_]}return[{[w]:te.disabled},_]}stencilConfigForOverlapTwoPass(s){const f=this.context.gl,_=s.sort((N,q)=>q.overscaledZ-N.overscaledZ),w=_[_.length-1].overscaledZ,k=_[0].overscaledZ-w+1;if(this.clearStencil(),k>1){const N={},q={};for(let J=0;J<k;J++)N[J+w]=new te({func:f.GREATER,mask:255},k+1+J,255,f.KEEP,f.KEEP,f.REPLACE),q[J+w]=new te({func:f.GREATER,mask:255},1+J,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID=2*k+1,[N,q,_]}return this.nextStencilID=3,[{[w]:new te({func:f.GREATER,mask:255},2,255,f.KEEP,f.KEEP,f.REPLACE)},{[w]:new te({func:f.GREATER,mask:255},1,255,f.KEEP,f.KEEP,f.REPLACE)},_]}colorModeForRenderPass(){const s=this.context.gl;return this._showOverdrawInspector?new Dr([s.CONSTANT_COLOR,s.ONE],new o.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Dr.unblended:Dr.alphaBlended}getDepthModeForSublayer(s,f,_){if(!this.opaquePassEnabledForLayer())return Mi.disabled;const w=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new Mi(_||this.context.gl.LEQUAL,f,[w,w])}getDepthModeFor3D(){return new Mi(this.context.gl.LEQUAL,Mi.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,f){var _,w;this.style=s,this.options=f,this.lineAtlas=s.lineAtlas,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(U.now()),this.imageManager.beginFrame();const k=this.style._order,N=this.style.sourceCaches,q={},J={},he={},pe={isRenderingToTexture:!1,isRenderingGlobe:((_=s.projection)===null||_===void 0?void 0:_.transitionState)>0};for(const Se in N){const Ue=N[Se];Ue.used&&Ue.prepare(this.context),q[Se]=Ue.getVisibleCoordinates(!1),J[Se]=q[Se].slice().reverse(),he[Se]=Ue.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Se=0;Se<k.length;Se++)if(this.style._layers[k[Se]].is3D()){this.opaquePassCutoff=Se;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Se of k){const Ue=this.style._layers[Se];if(!Ue.hasOffscreenPass()||Ue.isHidden(this.transform.zoom))continue;const Xe=J[Ue.source];(Ue.type==="custom"||Xe.length)&&this.renderLayer(this,N[Ue.source],Ue,Xe,pe)}if((w=this.style.projection)===null||w===void 0||w.updateGPUdependent({context:this.context,useProgram:Se=>this.useProgram(Se)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:f.showOverdrawInspector?o.bf.black:o.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(Se,Ue){const Xe=Se.context,At=Xe.gl,ct=((Lt,Bt,Yt)=>{const dn=Math.cos(Bt.rollInRadians),Xt=Math.sin(Bt.rollInRadians),nn=dt(Bt),An=Bt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Lt.properties.get("sky-color"),u_horizon_color:Lt.properties.get("horizon-color"),u_horizon:[(Bt.width/2-nn*Xt)*Yt,(Bt.height/2+nn*dn)*Yt],u_horizon_normal:[-Xt,dn],u_sky_horizon_blend:Lt.properties.get("sky-horizon-blend")*Bt.height/2*Yt,u_sky_blend:An}})(Ue,Se.style.map.transform,Se.pixelRatio),ft=new Mi(At.LEQUAL,Mi.ReadWrite,[0,1]),xt=te.disabled,Ct=Se.colorModeForRenderPass(),wt=Se.useProgram("sky"),Pt=zu(Xe,Ue);wt.draw(Xe,At.TRIANGLES,ft,xt,Ct,Zi.disabled,ct,null,void 0,"sky",Pt.vertexBuffer,Pt.indexBuffer,Pt.segments)}(this,this.style.sky),this._showOverdrawInspector=f.showOverdrawInspector,this.depthRangeFor3D=[0,1-(s._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=k.length-1;this.currentLayer>=0;this.currentLayer--){const Se=this.style._layers[k[this.currentLayer]],Ue=N[Se.source],Xe=q[Se.source];this._renderTileClippingMasks(Se,Xe,!1),this.renderLayer(this,Ue,Se,Xe,pe)}this.renderPass="translucent";let Ee=!1;for(this.currentLayer=0;this.currentLayer<k.length;this.currentLayer++){const Se=this.style._layers[k[this.currentLayer]],Ue=N[Se.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Se,pe))continue;this.opaquePassEnabledForLayer()||Ee||(Ee=!0,pe.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const Xe=(Se.type==="symbol"?he:J)[Se.source];this._renderTileClippingMasks(Se,q[Se.source],!!this.renderToTexture),this.renderLayer(this,Ue,Se,Xe,pe)}if(pe.isRenderingGlobe&&function(Se,Ue,Xe){const At=Se.context,ct=At.gl,ft=Se.useProgram("atmosphere"),xt=new Mi(ct.LEQUAL,Mi.ReadOnly,[0,1]),Ct=Se.transform,wt=function(An,qn){const Qn=An.properties.get("position"),Tn=[-Qn.x,-Qn.y,-Qn.z],bi=o.ag(new Float64Array(16));return An.properties.get("anchor")==="map"&&(o.b6(bi,bi,qn.rollInRadians),o.b7(bi,bi,-qn.pitchInRadians),o.b6(bi,bi,qn.bearingInRadians),o.b7(bi,bi,qn.center.lat*Math.PI/180),o.bz(bi,bi,-qn.center.lng*Math.PI/180)),o.c5(Tn,Tn,bi),Tn}(Xe,Se.transform),Pt=Ct.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Lt=Ue.properties.get("atmosphere-blend")*Pt.projectionTransition;if(Lt===0)return;const Bt=pr(Ct.worldSize,Ct.center.lat),Yt=Ct.inverseProjectionMatrix,dn=new Float64Array(4);dn[3]=1,o.aw(dn,dn,Ct.modelViewProjectionMatrix),dn[0]/=dn[3],dn[1]/=dn[3],dn[2]/=dn[3],dn[3]=1,o.aw(dn,dn,Yt),dn[0]/=dn[3],dn[1]/=dn[3],dn[2]/=dn[3],dn[3]=1;const Xt=((An,qn,Qn,Tn,bi)=>({u_sun_pos:An,u_atmosphere_blend:qn,u_globe_position:Qn,u_globe_radius:Tn,u_inv_proj_matrix:bi}))(wt,Lt,[dn[0],dn[1],dn[2]],Bt,Yt),nn=zu(At,Ue);ft.draw(At,ct.TRIANGLES,xt,te.disabled,Dr.alphaBlended,Zi.disabled,Xt,null,null,"atmosphere",nn.vertexBuffer,nn.indexBuffer,nn.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const Se=function(Ue,Xe){let At=null;const ct=Object.values(Ue._layers).flatMap(wt=>wt.source&&!wt.isHidden(Xe)?[Ue.sourceCaches[wt.source]]:[]),ft=ct.filter(wt=>wt.getSource().type==="vector"),xt=ct.filter(wt=>wt.getSource().type!=="vector"),Ct=wt=>{(!At||At.getSource().maxzoom<wt.getSource().maxzoom)&&(At=wt)};return ft.forEach(wt=>Ct(wt)),At||xt.forEach(wt=>Ct(wt)),At}(this.style,this.transform.zoom);Se&&function(Ue,Xe,At){for(let ct=0;ct<At.length;ct++)Fs(Ue,Xe,At[ct])}(this,Se,Se.getVisibleCoordinates())}this.options.showPadding&&function(Se){const Ue=Se.transform.padding;Zd(Se,Se.transform.height-(Ue.top||0),3,$r),Zd(Se,Ue.bottom||0,3,lA),ms(Se,Ue.left||0,3,Ls),ms(Se,Se.transform.width-(Ue.right||0),3,Xc);const Xe=Se.transform.centerPoint;(function(At,ct,ft,xt){il(At,ct-1,ft-10,2,20,xt),il(At,ct-10,ft-1,20,2,xt)})(Se,Xe.x,Se.transform.height-Xe.y,pu)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(s){if(!this.style||!this.style.map||!this.style.map.terrain)return;const f=this.terrainFacilitator.matrix,_=this.transform.modelViewProjectionMatrix;let w=this.terrainFacilitator.dirty;w||(w=s?!o.c8(f,_):!o.c9(f,_)),w||(w=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),w&&(o.ca(f,_),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(k,N){const q=k.context,J=q.gl,he=k.transform,pe=Dr.unblended,Ee=new Mi(J.LEQUAL,Mi.ReadWrite,[0,1]),Se=N.sourceCache.getRenderableTiles(),Ue=k.useProgram("terrainDepth");q.bindFramebuffer.set(N.getFramebuffer("depth").framebuffer),q.viewport.set([0,0,k.width/devicePixelRatio,k.height/devicePixelRatio]),q.clear({color:o.bf.transparent,depth:1});for(const Xe of Se){const At=N.getTerrainMesh(Xe.tileID),ct=N.getTerrainData(Xe.tileID),ft=he.getProjectionData({overscaledTileID:Xe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),xt={u_ele_delta:N.getMeshFrameDelta(he.zoom)};Ue.draw(q,J.TRIANGLES,Ee,te.disabled,pe,Zi.backCCW,xt,ct,ft,"terrain",At.vertexBuffer,At.indexBuffer,At.segments)}q.bindFramebuffer.set(null),q.viewport.set([0,0,k.width,k.height])}(this,this.style.map.terrain),function(k,N){const q=k.context,J=q.gl,he=k.transform,pe=Dr.unblended,Ee=new Mi(J.LEQUAL,Mi.ReadWrite,[0,1]),Se=N.getCoordsTexture(),Ue=N.sourceCache.getRenderableTiles(),Xe=k.useProgram("terrainCoords");q.bindFramebuffer.set(N.getFramebuffer("coords").framebuffer),q.viewport.set([0,0,k.width/devicePixelRatio,k.height/devicePixelRatio]),q.clear({color:o.bf.transparent,depth:1}),N.coordsIndex=[];for(const At of Ue){const ct=N.getTerrainMesh(At.tileID),ft=N.getTerrainData(At.tileID);q.activeTexture.set(J.TEXTURE0),J.bindTexture(J.TEXTURE_2D,Se.texture);const xt={u_terrain_coords_id:(255-N.coordsIndex.length)/255,u_texture:0,u_ele_delta:N.getMeshFrameDelta(he.zoom)},Ct=he.getProjectionData({overscaledTileID:At.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Xe.draw(q,J.TRIANGLES,Ee,te.disabled,pe,Zi.backCCW,xt,ft,Ct,"terrain",ct.vertexBuffer,ct.indexBuffer,ct.segments),N.coordsIndex.push(At.tileID.key)}q.bindFramebuffer.set(null),q.viewport.set([0,0,k.width,k.height])}(this,this.style.map.terrain))}renderLayer(s,f,_,w,k){_.isHidden(this.transform.zoom)||(_.type==="background"||_.type==="custom"||(w||[]).length)&&(this.id=_.id,o.cb(_)?function(N,q,J,he,pe,Ee){if(N.renderPass!=="translucent")return;const{isRenderingToTexture:Se}=Ee,Ue=te.disabled,Xe=N.colorModeForRenderPass();(J._unevaluatedLayout.hasValue("text-variable-anchor")||J._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(At,ct,ft,xt,Ct,wt,Pt,Lt,Bt){const Yt=ct.transform,dn=ct.style.map.terrain,Xt=Ct==="map",nn=wt==="map";for(const An of At){const qn=xt.getTile(An),Qn=qn.getBucket(ft);if(!Qn||!Qn.text||!Qn.text.segments.get().length)continue;const Tn=o.an(Qn.textSizeData,Yt.zoom),bi=o.aC(qn,1,ct.transform.zoom),cr=wi(Xt,ct.transform,bi),_o=ft.layout.get("icon-text-fit")!=="none"&&Qn.hasIconData();if(Tn){const la=Math.pow(2,Yt.zoom-qn.tileID.overscaledZ),Lo=dn?(Ra,Aa)=>dn.getElevation(An,Ra,Aa):null;Vc(Qn,Xt,nn,Bt,Yt,cr,la,Tn,_o,o.aD(Yt,qn,Pt,Lt),An.toUnwrapped(),Lo)}}}(he,N,J,q,J.layout.get("text-rotation-alignment"),J.layout.get("text-pitch-alignment"),J.paint.get("text-translate"),J.paint.get("text-translate-anchor"),pe),J.paint.get("icon-opacity").constantOr(1)!==0&&Uu(N,q,J,he,!1,J.paint.get("icon-translate"),J.paint.get("icon-translate-anchor"),J.layout.get("icon-rotation-alignment"),J.layout.get("icon-pitch-alignment"),J.layout.get("icon-keep-upright"),Ue,Xe,Se),J.paint.get("text-opacity").constantOr(1)!==0&&Uu(N,q,J,he,!0,J.paint.get("text-translate"),J.paint.get("text-translate-anchor"),J.layout.get("text-rotation-alignment"),J.layout.get("text-pitch-alignment"),J.layout.get("text-keep-upright"),Ue,Xe,Se),q.map.showCollisionBoxes&&(bh(N,q,J,he,!0),bh(N,q,J,he,!1))}(s,f,_,w,this.style.placement.variableOffsets,k):o.cc(_)?function(N,q,J,he,pe){if(N.renderPass!=="translucent")return;const{isRenderingToTexture:Ee}=pe,Se=J.paint.get("circle-opacity"),Ue=J.paint.get("circle-stroke-width"),Xe=J.paint.get("circle-stroke-opacity"),At=!J.layout.get("circle-sort-key").isConstant();if(Se.constantOr(1)===0&&(Ue.constantOr(1)===0||Xe.constantOr(1)===0))return;const ct=N.context,ft=ct.gl,xt=N.transform,Ct=N.getDepthModeForSublayer(0,Mi.ReadOnly),wt=te.disabled,Pt=N.colorModeForRenderPass(),Lt=[],Bt=xt.getCircleRadiusCorrection();for(let Yt=0;Yt<he.length;Yt++){const dn=he[Yt],Xt=q.getTile(dn),nn=Xt.getBucket(J);if(!nn)continue;const An=J.paint.get("circle-translate"),qn=J.paint.get("circle-translate-anchor"),Qn=o.aD(xt,Xt,An,qn),Tn=nn.programConfigurations.get(J.id),bi=N.useProgram("circle",Tn),cr=nn.layoutVertexBuffer,_o=nn.indexBuffer,la=N.style.map.terrain&&N.style.map.terrain.getTerrainData(dn),Lo={programConfiguration:Tn,program:bi,layoutVertexBuffer:cr,indexBuffer:_o,uniformValues:Df(N,Xt,J,Qn,Bt),terrainData:la,projectionData:xt.getProjectionData({overscaledTileID:dn,applyGlobeMatrix:!Ee,applyTerrainMatrix:!0})};if(At){const Ra=nn.segments.get();for(const Aa of Ra)Lt.push({segments:new o.aM([Aa]),sortKey:Aa.sortKey,state:Lo})}else Lt.push({segments:nn.segments,sortKey:0,state:Lo})}At&&Lt.sort((Yt,dn)=>Yt.sortKey-dn.sortKey);for(const Yt of Lt){const{programConfiguration:dn,program:Xt,layoutVertexBuffer:nn,indexBuffer:An,uniformValues:qn,terrainData:Qn,projectionData:Tn}=Yt.state;Xt.draw(ct,ft.TRIANGLES,Ct,wt,Pt,Zi.backCCW,qn,Qn,Tn,J.id,nn,An,Yt.segments,J.paint,N.transform.zoom,dn)}}(s,f,_,w,k):o.cd(_)?function(N,q,J,he,pe){if(J.paint.get("heatmap-opacity")===0)return;const Ee=N.context,{isRenderingToTexture:Se,isRenderingGlobe:Ue}=pe;if(N.style.map.terrain){for(const Xe of he){const At=q.getTile(Xe);q.hasRenderableParent(Xe)||(N.renderPass==="offscreen"?Hh(N,At,J,Xe,Ue):N.renderPass==="translucent"&&IA(N,J,Xe,Se,Ue))}Ee.viewport.set([0,0,N.width,N.height])}else N.renderPass==="offscreen"?function(Xe,At,ct,ft){const xt=Xe.context,Ct=xt.gl,wt=Xe.transform,Pt=te.disabled,Lt=new Dr([Ct.ONE,Ct.ONE],o.bf.transparent,[!0,!0,!0,!0]);(function(Bt,Yt,dn){const Xt=Bt.gl;Bt.activeTexture.set(Xt.TEXTURE1),Bt.viewport.set([0,0,Yt.width/4,Yt.height/4]);let nn=dn.heatmapFbos.get(o.c2);nn?(Xt.bindTexture(Xt.TEXTURE_2D,nn.colorAttachment.get()),Bt.bindFramebuffer.set(nn.framebuffer)):(nn=Tl(Bt,Yt.width/4,Yt.height/4),dn.heatmapFbos.set(o.c2,nn))})(xt,Xe,ct),xt.clear({color:o.bf.transparent});for(let Bt=0;Bt<ft.length;Bt++){const Yt=ft[Bt];if(At.hasRenderableParent(Yt))continue;const dn=At.getTile(Yt),Xt=dn.getBucket(ct);if(!Xt)continue;const nn=Xt.programConfigurations.get(ct.id),An=Xe.useProgram("heatmap",nn),qn=wt.getProjectionData({overscaledTileID:Yt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Qn=wt.getCircleRadiusCorrection();An.draw(xt,Ct.TRIANGLES,Mi.disabled,Pt,Lt,Zi.backCCW,Rf(dn,wt.zoom,ct.paint.get("heatmap-intensity"),Qn),null,qn,ct.id,Xt.layoutVertexBuffer,Xt.indexBuffer,Xt.segments,ct.paint,wt.zoom,nn)}xt.viewport.set([0,0,Xe.width,Xe.height])}(N,q,J,he):N.renderPass==="translucent"&&function(Xe,At){const ct=Xe.context,ft=ct.gl;ct.setColorMode(Xe.colorModeForRenderPass());const xt=At.heatmapFbos.get(o.c2);xt&&(ct.activeTexture.set(ft.TEXTURE0),ft.bindTexture(ft.TEXTURE_2D,xt.colorAttachment.get()),ct.activeTexture.set(ft.TEXTURE1),Wo(ct,At).bind(ft.LINEAR,ft.CLAMP_TO_EDGE),Xe.useProgram("heatmapTexture").draw(ct,ft.TRIANGLES,Mi.disabled,te.disabled,Xe.colorModeForRenderPass(),Zi.disabled,oA(Xe,At,0,1),null,null,At.id,Xe.viewportBuffer,Xe.quadTriangleIndexBuffer,Xe.viewportSegments,At.paint,Xe.transform.zoom))}(N,J)}(s,f,_,w,k):o.ce(_)?function(N,q,J,he,pe){if(N.renderPass!=="translucent")return;const{isRenderingToTexture:Ee}=pe,Se=J.paint.get("line-opacity"),Ue=J.paint.get("line-width");if(Se.constantOr(1)===0||Ue.constantOr(1)===0)return;const Xe=N.getDepthModeForSublayer(0,Mi.ReadOnly),At=N.colorModeForRenderPass(),ct=J.paint.get("line-dasharray"),ft=J.paint.get("line-pattern"),xt=ft.constantOr(1),Ct=J.paint.get("line-gradient"),wt=J.getCrossfadeParameters(),Pt=xt?"linePattern":ct?"lineSDF":Ct?"lineGradient":"line",Lt=N.context,Bt=Lt.gl,Yt=N.transform;let dn=!0;for(const Xt of he){const nn=q.getTile(Xt);if(xt&&!nn.patternsLoaded())continue;const An=nn.getBucket(J);if(!An)continue;const qn=An.programConfigurations.get(J.id),Qn=N.context.program.get(),Tn=N.useProgram(Pt,qn),bi=dn||Tn.program!==Qn,cr=N.style.map.terrain&&N.style.map.terrain.getTerrainData(Xt),_o=ft.constantOr(null);if(_o&&nn.imageAtlas){const Er=nn.imageAtlas,Qo=Er.patternPositions[_o.to.toString()],ts=Er.patternPositions[_o.from.toString()];Qo&&ts&&qn.setConstantPatternPositions(Qo,ts)}const la=Yt.getProjectionData({overscaledTileID:Xt,applyGlobeMatrix:!Ee,applyTerrainMatrix:!0}),Lo=Yt.getPixelScale(),Ra=xt?Pu(N,nn,J,Lo,wt):ct?$A(N,nn,J,Lo,ct,wt):Ct?Md(N,nn,J,Lo,An.lineClipsArray.length):xd(N,nn,J,Lo);if(xt)Lt.activeTexture.set(Bt.TEXTURE0),nn.imageAtlasTexture.bind(Bt.LINEAR,Bt.CLAMP_TO_EDGE),qn.updatePaintBuffers(wt);else if(ct&&(bi||N.lineAtlas.dirty))Lt.activeTexture.set(Bt.TEXTURE0),N.lineAtlas.bind(Lt);else if(Ct){const Er=An.gradients[J.id];let Qo=Er.texture;if(J.gradientVersion!==Er.version){let ts=256;if(J.stepInterpolant){const Wa=q.getSource().maxzoom,Bs=Xt.canonical.z===Wa?Math.ceil(1<<N.transform.maxZoom-Xt.canonical.z):1;ts=o.ah(o.c3(An.maxLineLength/o.$*1024*Bs),256,Lt.maxTextureSize)}Er.gradient=o.c4({expression:J.gradientExpression(),evaluationKey:"lineProgress",resolution:ts,image:Er.gradient||void 0,clips:An.lineClipsArray}),Er.texture?Er.texture.update(Er.gradient):Er.texture=new o.T(Lt,Er.gradient,Bt.RGBA),Er.version=J.gradientVersion,Qo=Er.texture}Lt.activeTexture.set(Bt.TEXTURE0),Qo.bind(J.stepInterpolant?Bt.NEAREST:Bt.LINEAR,Bt.CLAMP_TO_EDGE)}const Aa=N.stencilModeForClipping(Xt);Tn.draw(Lt,Bt.TRIANGLES,Xe,Aa,At,Zi.disabled,Ra,cr,la,J.id,An.layoutVertexBuffer,An.indexBuffer,An.segments,J.paint,N.transform.zoom,qn,An.layoutVertexBuffer2),dn=!1}}(s,f,_,w,k):o.cf(_)?function(N,q,J,he,pe){const Ee=J.paint.get("fill-color"),Se=J.paint.get("fill-opacity");if(Se.constantOr(1)===0)return;const{isRenderingToTexture:Ue}=pe,Xe=N.colorModeForRenderPass(),At=J.paint.get("fill-pattern"),ct=N.opaquePassEnabledForLayer()&&!At.constantOr(1)&&Ee.constantOr(o.bf.transparent).a===1&&Se.constantOr(0)===1?"opaque":"translucent";if(N.renderPass===ct){const ft=N.getDepthModeForSublayer(1,N.renderPass==="opaque"?Mi.ReadWrite:Mi.ReadOnly);Lu(N,q,J,he,ft,Xe,!1,Ue)}if(N.renderPass==="translucent"&&J.paint.get("fill-antialias")){const ft=N.getDepthModeForSublayer(J.getPaintProperty("fill-outline-color")?2:0,Mi.ReadOnly);Lu(N,q,J,he,ft,Xe,!0,Ue)}}(s,f,_,w,k):o.cg(_)?function(N,q,J,he,pe){const Ee=J.paint.get("fill-extrusion-opacity");if(Ee===0)return;const{isRenderingToTexture:Se}=pe;if(N.renderPass==="translucent"){const Ue=new Mi(N.context.gl.LEQUAL,Mi.ReadWrite,N.depthRangeFor3D);if(Ee!==1||J.paint.get("fill-extrusion-pattern").constantOr(1))Fu(N,q,J,he,Ue,te.disabled,Dr.disabled,Se),Fu(N,q,J,he,Ue,N.stencilModeFor3D(),N.colorModeForRenderPass(),Se);else{const Xe=N.colorModeForRenderPass();Fu(N,q,J,he,Ue,te.disabled,Xe,Se)}}}(s,f,_,w,k):o.ch(_)?function(N,q,J,he,pe){if(N.renderPass!=="offscreen"&&N.renderPass!=="translucent")return;const{isRenderingToTexture:Ee}=pe,Se=N.context,Ue=N.style.projection.useSubdivision,Xe=N.getDepthModeForSublayer(0,Mi.ReadOnly),At=N.colorModeForRenderPass();if(N.renderPass==="offscreen")(function(ct,ft,xt,Ct,wt,Pt,Lt){const Bt=ct.context,Yt=Bt.gl;for(const dn of xt){const Xt=ft.getTile(dn),nn=Xt.dem;if(!nn||!nn.data||!Xt.needsHillshadePrepare)continue;const An=nn.dim,qn=nn.stride,Qn=nn.getPixels();if(Bt.activeTexture.set(Yt.TEXTURE1),Bt.pixelStoreUnpackPremultiplyAlpha.set(!1),Xt.demTexture=Xt.demTexture||ct.getTileTexture(qn),Xt.demTexture){const bi=Xt.demTexture;bi.update(Qn,{premultiply:!1}),bi.bind(Yt.NEAREST,Yt.CLAMP_TO_EDGE)}else Xt.demTexture=new o.T(Bt,Qn,Yt.RGBA,{premultiply:!1}),Xt.demTexture.bind(Yt.NEAREST,Yt.CLAMP_TO_EDGE);Bt.activeTexture.set(Yt.TEXTURE0);let Tn=Xt.fbo;if(!Tn){const bi=new o.T(Bt,{width:An,height:An,data:null},Yt.RGBA);bi.bind(Yt.LINEAR,Yt.CLAMP_TO_EDGE),Tn=Xt.fbo=Bt.createFramebuffer(An,An,!0,!1),Tn.colorAttachment.set(bi.texture)}Bt.bindFramebuffer.set(Tn.framebuffer),Bt.viewport.set([0,0,An,An]),ct.useProgram("hillshadePrepare").draw(Bt,Yt.TRIANGLES,wt,Pt,Lt,Zi.disabled,rc(Xt.tileID,nn),null,null,Ct.id,ct.rasterBoundsBuffer,ct.quadTriangleIndexBuffer,ct.rasterBoundsSegments),Xt.needsHillshadePrepare=!1}})(N,q,he,J,Xe,te.disabled,At),Se.viewport.set([0,0,N.width,N.height]);else if(N.renderPass==="translucent")if(Ue){const[ct,ft,xt]=N.stencilConfigForOverlapTwoPass(he);Bc(N,q,J,xt,ct,Xe,At,!1,Ee),Bc(N,q,J,xt,ft,Xe,At,!0,Ee)}else{const[ct,ft]=N.getStencilConfigForOverlapAndUpdateStencilID(he);Bc(N,q,J,ft,ct,Xe,At,!1,Ee)}}(s,f,_,w,k):o.ci(_)?function(N,q,J,he,pe){if(N.renderPass!=="translucent"||!he.length)return;const{isRenderingToTexture:Ee}=pe,Se=N.style.projection.useSubdivision,Ue=N.getDepthModeForSublayer(0,Mi.ReadOnly),Xe=N.colorModeForRenderPass();if(Se){const[At,ct,ft]=N.stencilConfigForOverlapTwoPass(he);$c(N,q,J,ft,At,Ue,Xe,!1,Ee),$c(N,q,J,ft,ct,Ue,Xe,!0,Ee)}else{const[At,ct]=N.getStencilConfigForOverlapAndUpdateStencilID(he);$c(N,q,J,ct,At,Ue,Xe,!1,Ee)}}(s,f,_,w,k):o.cj(_)?function(N,q,J,he,pe){if(N.renderPass!=="translucent"||J.paint.get("raster-opacity")===0||!he.length)return;const{isRenderingToTexture:Ee}=pe,Se=q.getSource(),Ue=N.style.projection.useSubdivision;if(Se instanceof Wt)va(N,q,J,he,null,!1,!1,Se.tileCoords,Se.flippedWindingOrder,Ee);else if(Ue){const[Xe,At,ct]=N.stencilConfigForOverlapTwoPass(he);va(N,q,J,ct,Xe,!1,!0,Zc,!1,Ee),va(N,q,J,ct,At,!0,!0,Zc,!1,Ee)}else{const[Xe,At]=N.getStencilConfigForOverlapAndUpdateStencilID(he);va(N,q,J,At,Xe,!1,!0,Zc,!1,Ee)}}(s,f,_,w,k):o.ck(_)?function(N,q,J,he,pe){const Ee=J.paint.get("background-color"),Se=J.paint.get("background-opacity");if(Se===0)return;const{isRenderingToTexture:Ue}=pe,Xe=N.context,At=Xe.gl,ct=N.style.projection,ft=N.transform,xt=ft.tileSize,Ct=J.paint.get("background-pattern");if(N.isPatternMissing(Ct))return;const wt=!Ct&&Ee.a===1&&Se===1&&N.opaquePassEnabledForLayer()?"opaque":"translucent";if(N.renderPass!==wt)return;const Pt=te.disabled,Lt=N.getDepthModeForSublayer(0,wt==="opaque"?Mi.ReadWrite:Mi.ReadOnly),Bt=N.colorModeForRenderPass(),Yt=N.useProgram(Ct?"backgroundPattern":"background"),dn=he||it(ft,{tileSize:xt,terrain:N.style.map.terrain});Ct&&(Xe.activeTexture.set(At.TEXTURE0),N.imageManager.bind(N.context));const Xt=J.getCrossfadeParameters();for(const nn of dn){const An=ft.getProjectionData({overscaledTileID:nn,applyGlobeMatrix:!Ue,applyTerrainMatrix:!0}),qn=Ct?Mm(Se,N,Ct,{tileID:nn,tileSize:xt},Xt):ZA(Se,Ee),Qn=N.style.map.terrain&&N.style.map.terrain.getTerrainData(nn),Tn=ct.getMeshFromTileID(Xe,nn.canonical,!1,!0,"raster");Yt.draw(Xe,At.TRIANGLES,Lt,Pt,Bt,Zi.backCCW,qn,Qn,An,J.id,Tn.vertexBuffer,Tn.indexBuffer,Tn.segments)}}(s,0,_,w,k):o.cl(_)&&function(N,q,J,he){const{isRenderingGlobe:pe}=he,Ee=N.context,Se=J.implementation,Ue=N.style.projection,Xe=N.transform,At=Xe.getProjectionDataForCustomLayer(pe),ct={farZ:Xe.farZ,nearZ:Xe.nearZ,fov:Xe.fov*Math.PI/180,modelViewProjectionMatrix:Xe.modelViewProjectionMatrix,projectionMatrix:Xe.projectionMatrix,shaderData:{variantName:Ue.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Ue.shaderPreludeCode.vertexSource}`,define:Ue.shaderDefine},defaultProjectionData:At},ft=Se.renderingMode?Se.renderingMode:"2d";if(N.renderPass==="offscreen"){const xt=Se.prerender;xt&&(N.setCustomLayerDefaults(),Ee.setColorMode(N.colorModeForRenderPass()),xt.call(Se,Ee.gl,ct),Ee.setDirty(),N.setBaseState())}else if(N.renderPass==="translucent"){N.setCustomLayerDefaults(),Ee.setColorMode(N.colorModeForRenderPass()),Ee.setStencilMode(te.disabled);const xt=ft==="3d"?N.getDepthModeFor3D():N.getDepthModeForSublayer(0,Mi.ReadOnly);Ee.setDepthMode(xt),Se.render(Ee.gl,ct),Ee.setDirty(),N.setBaseState(),Ee.bindFramebuffer.set(null)}}(s,0,_,k))}saveTileTexture(s){const f=this._tileTextures[s.size[0]];f?f.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){const f=this._tileTextures[s];return f&&f.length>0?f.pop():null}isPatternMissing(s){if(!s)return!1;if(!s.from||!s.to)return!0;const f=this.imageManager.getPattern(s.from.toString()),_=this.imageManager.getPattern(s.to.toString());return!f||!_}useProgram(s,f,_=!1,w=[]){this.cache=this.cache||{};const k=!!this.style.map.terrain,N=this.style.projection,q=_?ko.projectionMercator:N.shaderPreludeCode,J=_?Ul:N.shaderDefine,he=s+(f?f.cacheKey:"")+`/${_?bA:N.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(k?"/terrain":"")+(w?`/${w.join("/")}`:"");return this.cache[he]||(this.cache[he]=new Xa(this.context,ko[s],f,xA[s],this._showOverdrawInspector,k,q,J,w)),this.cache[he]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:s,drawingBufferHeight:f}=this.context.gl;return this.width!==s||this.height!==f}}function eu(I,s){let f,_=!1,w=null,k=null;const N=()=>{w=null,_&&(I.apply(k,f),w=setTimeout(N,s),_=!1)};return(...q)=>(_=!0,k=this,f=q,w||N(),w)}class rt{constructor(s){this._getCurrentHash=()=>{const f=window.location.hash.replace("#","");if(this._hashName){let _;return f.split("&").map(w=>w.split("=")).forEach(w=>{w[0]===this._hashName&&(_=w)}),(_&&_[1]||"").split("/")}return f.split("/")},this._onHashChange=()=>{const f=this._getCurrentHash();if(!this._isValidHash(f))return!1;const _=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(f[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:_,pitch:+(f[4]||0)}),!0},this._updateHashUnthrottled=()=>{const f=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,f)},this._removeHash=()=>{const f=this._getCurrentHash();if(f.length===0)return;const _=f.join("/");let w=_;w.split("&").length>0&&(w=w.split("&")[0]),this._hashName&&(w=`${this._hashName}=${_}`);let k=window.location.hash.replace(w,"");k.startsWith("#&")?k=k.slice(0,1)+k.slice(2):k==="#"&&(k="");let N=window.location.href.replace(/(#.+)?$/,k);N=N.replace("&&","&"),window.history.replaceState(window.history.state,null,N)},this._updateHash=eu(this._updateHashUnthrottled,300),this._hashName=s&&encodeURIComponent(s)}addTo(s){return this._map=s,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(s){const f=this._map.getCenter(),_=Math.round(100*this._map.getZoom())/100,w=Math.ceil((_*Math.LN2+Math.log(512/360/.5))/Math.LN10),k=Math.pow(10,w),N=Math.round(f.lng*k)/k,q=Math.round(f.lat*k)/k,J=this._map.getBearing(),he=this._map.getPitch();let pe="";if(pe+=s?`/${N}/${q}/${_}`:`${_}/${q}/${N}`,(J||he)&&(pe+="/"+Math.round(10*J)/10),he&&(pe+=`/${Math.round(he)}`),this._hashName){const Ee=this._hashName;let Se=!1;const Ue=window.location.hash.slice(1).split("&").map(Xe=>{const At=Xe.split("=")[0];return At===Ee?(Se=!0,`${At}=${pe}`):Xe}).filter(Xe=>Xe);return Se||Ue.push(`${Ee}=${pe}`),`#${Ue.join("&")}`}return`#${pe}`}_isValidHash(s){if(s.length<3||s.some(isNaN))return!1;try{new o.S(+s[2],+s[1])}catch{return!1}const f=+s[0],_=+(s[3]||0),w=+(s[4]||0);return f>=this._map.getMinZoom()&&f<=this._map.getMaxZoom()&&_>=-180&&_<=180&&w>=this._map.getMinPitch()&&w<=this._map.getMaxPitch()}}const Vs={linearity:.3,easing:o.cm(0,0,.3,1)},Ga=o.e({deceleration:2500,maxSpeed:1400},Vs),Zo=o.e({deceleration:20,maxSpeed:1400},Vs),gr=o.e({deceleration:1e3,maxSpeed:360},Vs),ps=o.e({deceleration:1e3,maxSpeed:90},Vs),Jc=o.e({deceleration:1e3,maxSpeed:360},Vs);class Sh{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:U.now(),settings:s})}_drainInertiaBuffer(){const s=this._inertiaBuffer,f=U.now();for(;s.length>0&&f-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const f={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:k}of this._inertiaBuffer)f.zoom+=k.zoomDelta||0,f.bearing+=k.bearingDelta||0,f.pitch+=k.pitchDelta||0,f.roll+=k.rollDelta||0,k.panDelta&&f.pan._add(k.panDelta),k.around&&(f.around=k.around),k.pinchAround&&(f.pinchAround=k.pinchAround);const _=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,w={};if(f.pan.mag()){const k=eh(f.pan.mag(),_,o.e({},Ga,s||{})),N=f.pan.mult(k.amount/f.pan.mag()),q=this._map.cameraHelper.handlePanInertia(N,this._map.transform);w.center=q.easingCenter,w.offset=q.easingOffset,Ro(w,k)}if(f.zoom){const k=eh(f.zoom,_,Zo);w.zoom=this._map.transform.zoom+k.amount,Ro(w,k)}if(f.bearing){const k=eh(f.bearing,_,gr);w.bearing=this._map.transform.bearing+o.ah(k.amount,-179,179),Ro(w,k)}if(f.pitch){const k=eh(f.pitch,_,ps);w.pitch=this._map.transform.pitch+k.amount,Ro(w,k)}if(f.roll){const k=eh(f.roll,_,Jc);w.roll=this._map.transform.roll+o.ah(k.amount,-179,179),Ro(w,k)}if(w.zoom||w.bearing){const k=f.pinchAround===void 0?f.around:f.pinchAround;w.around=k?this._map.unproject(k):this._map.getCenter()}return this.clear(),o.e(w,{noMoveStart:!0})}}function Ro(I,s){(!I.duration||I.duration<s.duration)&&(I.duration=s.duration,I.easing=s.easing)}function eh(I,s,f){const{maxSpeed:_,linearity:w,deceleration:k}=f,N=o.ah(I*w/(s/1e3),-_,_),q=Math.abs(N)/(k*w);return{easing:f.easing,duration:1e3*q,amount:N*(q/2)}}class TA extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,f,_,w={}){_=_ instanceof MouseEvent?_:new MouseEvent(s,_);const k=K.mousePos(f.getCanvas(),_),N=f.unproject(k);super(s,o.e({point:k,lngLat:N,originalEvent:_},w)),this._defaultPrevented=!1,this.target=f}}class Od extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,f,_){const w=s==="touchend"?_.changedTouches:_.touches,k=K.touchPos(f.getCanvasContainer(),w),N=k.map(J=>f.unproject(J)),q=k.reduce((J,he,pe,Ee)=>J.add(he.div(Ee.length)),new o.P(0,0));super(s,{points:k,point:q,lngLats:N,lngLat:f.unproject(q),originalEvent:_}),this._defaultPrevented=!1}}class Jd extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,f,_){super(s,{originalEvent:_}),this._defaultPrevented=!1}}class wm{constructor(s,f){this._map=s,this._clickTolerance=f.clickTolerance}reset(){delete this._mousedownPos}wheel(s){return this._firePreventable(new Jd(s.type,this._map,s))}mousedown(s,f){return this._mousedownPos=f,this._firePreventable(new TA(s.type,this._map,s))}mouseup(s){this._map.fire(new TA(s.type,this._map,s))}click(s,f){this._mousedownPos&&this._mousedownPos.dist(f)>=this._clickTolerance||this._map.fire(new TA(s.type,this._map,s))}dblclick(s){return this._firePreventable(new TA(s.type,this._map,s))}mouseover(s){this._map.fire(new TA(s.type,this._map,s))}mouseout(s){this._map.fire(new TA(s.type,this._map,s))}touchstart(s){return this._firePreventable(new Od(s.type,this._map,s))}touchmove(s){this._map.fire(new Od(s.type,this._map,s))}touchend(s){this._map.fire(new Od(s.type,this._map,s))}touchcancel(s){this._map.fire(new Od(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ba{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(s){this._map.fire(new TA(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new TA("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._ignoreContextMenu||this._map.fire(new TA(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class wh{constructor(s){this._map=s}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(s){return this.transform.screenPointToLocation(o.P.convert(s),this._map.terrain)}}class th{constructor(s,f){this._map=s,this._tr=new wh(s),this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=f.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,f){this.isEnabled()&&s.shiftKey&&s.button===0&&(K.disableDrag(),this._startPos=this._lastPos=f,this._active=!0)}mousemoveWindow(s,f){if(!this._active)return;const _=f;if(this._lastPos.equals(_)||!this._box&&_.dist(this._startPos)<this._clickTolerance)return;const w=this._startPos;this._lastPos=_,this._box||(this._box=K.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",s));const k=Math.min(w.x,_.x),N=Math.max(w.x,_.x),q=Math.min(w.y,_.y),J=Math.max(w.y,_.y);K.setTransform(this._box,`translate(${k}px,${q}px)`),this._box.style.width=N-k+"px",this._box.style.height=J-q+"px"}mouseupWindow(s,f){if(!this._active||s.button!==0)return;const _=this._startPos,w=f;if(this.reset(),K.suppressClick(),_.x!==w.x||_.y!==w.y)return this._map.fire(new o.l("boxzoomend",{originalEvent:s})),{cameraAnimation:k=>k.fitScreenCoordinates(_,w,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",s)}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(K.remove(this._box),this._box=null),K.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(s,f){return this._map.fire(new o.l(s,{originalEvent:f}))}}function Nu(I,s){if(I.length!==s.length)throw new Error(`The number of touches and points are not equal - touches ${I.length}, points ${s.length}`);const f={};for(let _=0;_<I.length;_++)f[I[_].identifier]=s[_];return f}class ef{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(s,f,_){(this.centroid||_.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=s.timeStamp),_.length===this.numTouches&&(this.centroid=function(w){const k=new o.P(0,0);for(const N of w)k._add(N);return k.div(w.length)}(f),this.touches=Nu(_,f)))}touchmove(s,f,_){if(this.aborted||!this.centroid)return;const w=Nu(_,f);for(const k in this.touches){const N=w[k];(!N||N.dist(this.touches[k])>30)&&(this.aborted=!0)}}touchend(s,f,_){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),_.length===0){const w=!this.aborted&&this.centroid;if(this.reset(),w)return w}}}class rl{constructor(s){this.singleTap=new ef(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(s,f,_){this.singleTap.touchstart(s,f,_)}touchmove(s,f,_){this.singleTap.touchmove(s,f,_)}touchend(s,f,_){const w=this.singleTap.touchend(s,f,_);if(w){const k=s.timeStamp-this.lastTime<500,N=!this.lastTap||this.lastTap.dist(w)<30;if(k&&N||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=w,this.count===this.numTaps)return this.reset(),w}}}class Ja{constructor(s){this._tr=new wh(s),this._zoomIn=new rl({numTouches:1,numTaps:2}),this._zoomOut=new rl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,f,_){this._zoomIn.touchstart(s,f,_),this._zoomOut.touchstart(s,f,_)}touchmove(s,f,_){this._zoomIn.touchmove(s,f,_),this._zoomOut.touchmove(s,f,_)}touchend(s,f,_){const w=this._zoomIn.touchend(s,f,_),k=this._zoomOut.touchend(s,f,_),N=this._tr;return w?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:q=>q.easeTo({duration:300,zoom:N.zoom+1,around:N.unproject(w)},{originalEvent:s})}):k?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:q=>q.easeTo({duration:300,zoom:N.zoom-1,around:N.unproject(k)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vh{constructor(s){this._enabled=!!s.enable,this._moveStateManager=s.moveStateManager,this._clickTolerance=s.clickTolerance||1,this._moveFunction=s.move,this._activateOnStart=!!s.activateOnStart,s.assignEvents(this),this.reset()}reset(s){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(s)}_move(...s){const f=this._moveFunction(...s);if(f.bearingDelta||f.pitchDelta||f.rollDelta||f.around||f.panDelta)return this._active=!0,f}dragStart(s,f){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(s)&&(this._moveStateManager.startMove(s),this._lastPoint=Array.isArray(f)?f[0]:f,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(s,f){if(!this.isEnabled())return;const _=this._lastPoint;if(!_)return;if(s.preventDefault(),!this._moveStateManager.isValidMoveEvent(s))return void this.reset(s);const w=Array.isArray(f)?f[0]:f;return!this._moved&&w.dist(_)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=w,this._move(_,w))}dragEnd(s){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(s)&&(this._moved&&K.suppressClick(),this.reset(s))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const AA=0,Id=2,tf={[AA]:1,[Id]:2};class Cl{constructor(s){this._correctEvent=s.checkCorrectEvent}startMove(s){const f=K.mouseButton(s);this._eventButton=f}endMove(s){delete this._eventButton}isValidStartEvent(s){return this._correctEvent(s)}isValidMoveEvent(s){return!function(f,_){const w=tf[_];return f.buttons===void 0||(f.buttons&w)!==w}(s,this._eventButton)}isValidEndEvent(s){return K.mouseButton(s)===this._eventButton}}class Oc{constructor(){this._firstTouch=void 0}_isOneFingerTouch(s){return s.targetTouches.length===1}_isSameTouchEvent(s){return s.targetTouches[0].identifier===this._firstTouch}startMove(s){this._firstTouch=s.targetTouches[0].identifier}endMove(s){delete this._firstTouch}isValidStartEvent(s){return this._isOneFingerTouch(s)}isValidMoveEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}isValidEndEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}}class Uf{constructor(s=new Cl({checkCorrectEvent:()=>!0}),f=new Oc){this.mouseMoveStateManager=s,this.oneFingerTouchMoveStateManager=f}_executeRelevantHandler(s,f,_){return s instanceof MouseEvent?f(s):typeof TouchEvent<"u"&&s instanceof TouchEvent?_(s):void 0}startMove(s){this._executeRelevantHandler(s,f=>this.mouseMoveStateManager.startMove(f),f=>this.oneFingerTouchMoveStateManager.startMove(f))}endMove(s){this._executeRelevantHandler(s,f=>this.mouseMoveStateManager.endMove(f),f=>this.oneFingerTouchMoveStateManager.endMove(f))}isValidStartEvent(s){return this._executeRelevantHandler(s,f=>this.mouseMoveStateManager.isValidStartEvent(f),f=>this.oneFingerTouchMoveStateManager.isValidStartEvent(f))}isValidMoveEvent(s){return this._executeRelevantHandler(s,f=>this.mouseMoveStateManager.isValidMoveEvent(f),f=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(f))}isValidEndEvent(s){return this._executeRelevantHandler(s,f=>this.mouseMoveStateManager.isValidEndEvent(f),f=>this.oneFingerTouchMoveStateManager.isValidEndEvent(f))}}const $h=I=>{I.mousedown=I.dragStart,I.mousemoveWindow=I.dragMove,I.mouseup=I.dragEnd,I.contextmenu=s=>{s.preventDefault()}};class Ca{constructor(s,f){this._clickTolerance=s.clickTolerance||1,this._map=f,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(s){return s<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(s,f,_){return this._calculateTransform(s,f,_)}touchmove(s,f,_){if(this._active){if(!this._shouldBePrevented(_.length))return s.preventDefault(),this._calculateTransform(s,f,_);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",s)}}touchend(s,f,_){this._calculateTransform(s,f,_),this._active&&this._shouldBePrevented(_.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,f,_){_.length>0&&(this._active=!0);const w=Nu(_,f),k=new o.P(0,0),N=new o.P(0,0);let q=0;for(const he in w){const pe=w[he],Ee=this._touches[he];Ee&&(k._add(pe),N._add(pe.sub(Ee)),q++,w[he]=pe)}if(this._touches=w,this._shouldBePrevented(q)||!N.mag())return;const J=N.div(q);return this._sum._add(J),this._sum.mag()<this._clickTolerance?void 0:{around:k.div(q),panDelta:J}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Zr{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(s,f,_){this._firstTwoTouches||_.length<2||(this._firstTwoTouches=[_[0].identifier,_[1].identifier],this._start([f[0],f[1]]))}touchmove(s,f,_){if(!this._firstTwoTouches)return;s.preventDefault();const[w,k]=this._firstTwoTouches,N=ci(_,f,w),q=ci(_,f,k);if(!N||!q)return;const J=this._aroundCenter?null:N.add(q).div(2);return this._move([N,q],J,s)}touchend(s,f,_){if(!this._firstTwoTouches)return;const[w,k]=this._firstTwoTouches,N=ci(_,f,w),q=ci(_,f,k);N&&q||(this._active&&K.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function ci(I,s,f){for(let _=0;_<I.length;_++)if(I[_].identifier===f)return s[_]}function Gu(I,s){return Math.log(I/s)/Math.LN2}class ju extends Zr{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,f){const _=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(Gu(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Gu(this._distance,_),pinchAround:f}}}function Zh(I,s){return 180*I.angleWith(s)/Math.PI}class Ic extends Zr{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,f,_){const w=this._vector;if(this._vector=s[0].sub(s[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Zh(this._vector,w),pinchAround:f}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());const f=25/(Math.PI*this._minDiameter)*360,_=Zh(s,this._startVector);return Math.abs(_)<f}}function gu(I){return Math.abs(I.y)>Math.abs(I.x)}class nf extends Zr{constructor(s){super(),this._currentTouchCount=0,this._map=s}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(s,f,_){super.touchstart(s,f,_),this._currentTouchCount=_.length}_start(s){this._lastPoints=s,gu(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,f,_){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const w=s[0].sub(this._lastPoints[0]),k=s[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(w,k,_.timeStamp),this._valid?(this._lastPoints=s,this._active=!0,{pitchDelta:(w.y+k.y)/2*-.5}):void 0}gestureBeginsVertically(s,f,_){if(this._valid!==void 0)return this._valid;const w=s.mag()>=2,k=f.mag()>=2;if(!w&&!k)return;if(!w||!k)return this._firstMove===void 0&&(this._firstMove=_),_-this._firstMove<100&&void 0;const N=s.y>0==f.y>0;return gu(s)&&gu(f)&&N}}const to={panStep:100,bearingStep:15,pitchStep:10};class Gl{constructor(s){this._tr=new wh(s);const f=to;this._panStep=f.panStep,this._bearingStep=f.bearingStep,this._pitchStep=f.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let f=0,_=0,w=0,k=0,N=0;switch(s.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:s.shiftKey?_=-1:(s.preventDefault(),k=-1);break;case 39:s.shiftKey?_=1:(s.preventDefault(),k=1);break;case 38:s.shiftKey?w=1:(s.preventDefault(),N=-1);break;case 40:s.shiftKey?w=-1:(s.preventDefault(),N=1);break;default:return}return this._rotationDisabled&&(_=0,w=0),{cameraAnimation:q=>{const J=this._tr;q.easeTo({duration:300,easeId:"keyboardHandler",easing:Eh,zoom:f?Math.round(J.zoom)+f*(s.shiftKey?2:1):J.zoom,bearing:J.bearing+_*this._bearingStep,pitch:J.pitch+w*this._pitchStep,offset:[-k*this._panStep,-N*this._panStep],center:J.center},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Eh(I){return I*(2-I)}const lc=4.000244140625,kA=1/450;class Ac{constructor(s,f){this._onTimeout=_=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(_)},this._map=s,this._tr=new wh(s),this._triggerRenderFrame=f,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=kA}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&s.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(s){return!!this._map.cooperativeGestures.isEnabled()&&!(s.ctrlKey||this._map.cooperativeGestures.isBypassed(s))}wheel(s){if(!this.isEnabled())return;if(this._shouldBePrevented(s))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",s);let f=s.deltaMode===WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY;const _=U.now(),w=_-(this._lastWheelEventTime||0);this._lastWheelEventTime=_,f!==0&&f%lc==0?this._type="wheel":f!==0&&Math.abs(f)<4?this._type="trackpad":w>400?(this._type=null,this._lastValue=f,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(w*f)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,f+=this._lastValue)),s.shiftKey&&f&&(f/=4),this._type&&(this._lastWheelEvent=s,this._delta-=f,this._active||this._start(s)),s.preventDefault()}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const f=K.mousePos(this._map.getCanvas(),s),_=this._tr;this._aroundPoint=this._aroundCenter?_.transform.locationToScreenPoint(o.S.convert(_.center)):f,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const s=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const q=s.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=q),typeof this._targetZoom=="number"&&(this._targetZoom+=q)}if(this._delta!==0){const q=this._type==="wheel"&&Math.abs(this._delta)>lc?this._wheelZoomRate:this._defaultZoomRate;let J=2/(1+Math.exp(-Math.abs(this._delta*q)));this._delta<0&&J!==0&&(J=1/J);const he=typeof this._targetZoom!="number"?s.scale:o.af(this._targetZoom);this._targetZoom=s.getConstrained(s.getCameraLngLat(),o.ak(he*J)).zoom,this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const f=typeof this._targetZoom!="number"?s.zoom:this._targetZoom,_=this._startZoom,w=this._easing;let k,N=!1;if(this._type==="wheel"&&_&&w){const q=U.now()-this._lastWheelEventTime,J=Math.min((q+5)/200,1),he=w(J);k=o.C.number(_,f,he),J<1?this._frameId||(this._frameId=!0):N=!0}else k=f,N=!0;return this._active=!0,N&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=k,{noInertia:!0,needsRenderFrame:!N,zoomDelta:k-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let f=o.co;if(this._prevEase){const _=this._prevEase,w=(U.now()-_.start)/_.duration,k=_.easing(w+.01)-_.easing(w),N=.27/Math.sqrt(k*k+1e-4)*.01,q=Math.sqrt(.0729-N*N);f=o.cm(N,q,.25,1)}return this._prevEase={start:U.now(),duration:s,easing:f},f}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Bh{constructor(s,f){this._clickZoom=s,this._tapZoom=f}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class yu{constructor(s){this._tr=new wh(s),this.reset()}reset(){this._active=!1}dblclick(s,f){return s.preventDefault(),{cameraAnimation:_=>{_.easeTo({duration:300,zoom:this._tr.zoom+(s.shiftKey?-1:1),around:this._tr.unproject(f)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class nh{constructor(){this._tap=new rl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(s,f,_){if(!this._swipePoint)if(this._tapTime){const w=f[0],k=s.timeStamp-this._tapTime<500,N=this._tapPoint.dist(w)<30;k&&N?_.length>0&&(this._swipePoint=w,this._swipeTouch=_[0].identifier):this.reset()}else this._tap.touchstart(s,f,_)}touchmove(s,f,_){if(this._tapTime){if(this._swipePoint){if(_[0].identifier!==this._swipeTouch)return;const w=f[0],k=w.y-this._swipePoint.y;return this._swipePoint=w,s.preventDefault(),this._active=!0,{zoomDelta:k/128}}}else this._tap.touchmove(s,f,_)}touchend(s,f,_){if(this._tapTime)this._swipePoint&&_.length===0&&this.reset();else{const w=this._tap.touchend(s,f,_);w&&(this._tapTime=s.timeStamp,this._tapPoint=w)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class tu{constructor(s,f,_){this._el=s,this._mousePan=f,this._touchPan=_}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class _l{constructor(s,f,_,w){this._pitchWithRotate=s.pitchWithRotate,this._rollEnabled=s.rollEnabled,this._mouseRotate=f,this._mousePitch=_,this._mouseRoll=w}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Em{constructor(s,f,_,w){this._el=s,this._touchZoom=f,this._touchRotate=_,this._tapDragZoom=w,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class rf{constructor(s,f){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=s,this._options=f,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const s=this._map.getCanvasContainer();s.classList.add("maplibregl-cooperative-gestures"),this._container=K.create("div","maplibregl-cooperative-gesture-screen",s);let f=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(f=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const _=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),w=document.createElement("div");w.className="maplibregl-desktop-message",w.textContent=f,this._container.appendChild(w);const k=document.createElement("div");k.className="maplibregl-mobile-message",k.textContent=_,this._container.appendChild(k),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(K.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(s){return s[this._bypassKey]}notifyGestureBlocked(s,f){this._enabled&&(this._map.fire(new o.l("cooperativegestureprevented",{gestureType:s,originalEvent:f})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const jl=I=>I.zoom||I.drag||I.roll||I.pitch||I.rotate;class Po extends o.l{}function Wl(I){return I.panDelta&&I.panDelta.mag()||I.zoomDelta||I.bearingDelta||I.pitchDelta||I.rollDelta}class Xh{constructor(s,f){this.handleWindowEvent=w=>{this.handleEvent(w,`${w.type}Window`)},this.handleEvent=(w,k)=>{if(w.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const N=w.type==="renderFrame"?void 0:w,q={needsRenderFrame:!1},J={},he={};for(const{handlerName:Se,handler:Ue,allowed:Xe}of this._handlers){if(!Ue.isEnabled())continue;let At;if(this._blockedByActive(he,Xe,Se))Ue.reset();else if(Ue[k||w.type]){if(o.cp(w,k||w.type)){const ct=K.mousePos(this._map.getCanvas(),w);At=Ue[k||w.type](w,ct)}else if(o.cq(w,k||w.type)){const ct=this._getMapTouches(w.touches),ft=K.touchPos(this._map.getCanvas(),ct);At=Ue[k||w.type](w,ft,ct)}else o.cr(k||w.type)||(At=Ue[k||w.type](w));this.mergeHandlerResult(q,J,At,Se,N),At&&At.needsRenderFrame&&this._triggerRenderFrame()}(At||Ue.isActive())&&(he[Se]=Ue)}const pe={};for(const Se in this._previousActiveHandlers)he[Se]||(pe[Se]=N);this._previousActiveHandlers=he,(Object.keys(pe).length||Wl(q))&&(this._changes.push([q,J,pe]),this._triggerRenderFrame()),(Object.keys(he).length||Wl(q))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ee}=q;Ee&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ee(this._map))},this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Sh(s),this._bearingSnap=f.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(f);const _=this._el;this._listeners=[[_,"touchstart",{passive:!0}],[_,"touchmove",{passive:!1}],[_,"touchend",void 0],[_,"touchcancel",void 0],[_,"mousedown",void 0],[_,"mousemove",void 0],[_,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[_,"mouseover",void 0],[_,"mouseout",void 0],[_,"dblclick",void 0],[_,"click",void 0],[_,"keydown",{capture:!1}],[_,"keyup",void 0],[_,"wheel",{passive:!1}],[_,"contextmenu",void 0],[window,"blur",void 0]];for(const[w,k,N]of this._listeners)K.addEventListener(w,k,w===document?this.handleWindowEvent:this.handleEvent,N)}destroy(){for(const[s,f,_]of this._listeners)K.removeEventListener(s,f,s===document?this.handleWindowEvent:this.handleEvent,_)}_addDefaultHandlers(s){const f=this._map,_=f.getCanvasContainer();this._add("mapEvent",new wm(f,s));const w=f.boxZoom=new th(f,s);this._add("boxZoom",w),s.interactive&&s.boxZoom&&w.enable();const k=f.cooperativeGestures=new rf(f,s.cooperativeGestures);this._add("cooperativeGestures",k),s.cooperativeGestures&&k.enable();const N=new Ja(f),q=new yu(f);f.doubleClickZoom=new Bh(q,N),this._add("tapZoom",N),this._add("clickZoom",q),s.interactive&&s.doubleClickZoom&&f.doubleClickZoom.enable();const J=new nh;this._add("tapDragZoom",J);const he=f.touchPitch=new nf(f);this._add("touchPitch",he),s.interactive&&s.touchPitch&&f.touchPitch.enable(s.touchPitch);const pe=()=>f.project(f.getCenter()),Ee=function({enable:wt,clickTolerance:Pt,aroundCenter:Lt=!0,minPixelCenterThreshold:Bt=100,rotateDegreesPerPixelMoved:Yt=.8},dn){const Xt=new Cl({checkCorrectEvent:nn=>K.mouseButton(nn)===0&&nn.ctrlKey||K.mouseButton(nn)===2&&!nn.ctrlKey});return new Vh({clickTolerance:Pt,move:(nn,An)=>{const qn=dn();if(Lt&&Math.abs(qn.y-nn.y)>Bt)return{bearingDelta:o.cn(new o.P(nn.x,An.y),An,qn)};let Qn=(An.x-nn.x)*Yt;return Lt&&An.y<qn.y&&(Qn=-Qn),{bearingDelta:Qn}},moveStateManager:Xt,enable:wt,assignEvents:$h})}(s,pe),Se=function({enable:wt,clickTolerance:Pt,pitchDegreesPerPixelMoved:Lt=-.5}){const Bt=new Cl({checkCorrectEvent:Yt=>K.mouseButton(Yt)===0&&Yt.ctrlKey||K.mouseButton(Yt)===2});return new Vh({clickTolerance:Pt,move:(Yt,dn)=>({pitchDelta:(dn.y-Yt.y)*Lt}),moveStateManager:Bt,enable:wt,assignEvents:$h})}(s),Ue=function({enable:wt,clickTolerance:Pt,rollDegreesPerPixelMoved:Lt=.3},Bt){const Yt=new Cl({checkCorrectEvent:dn=>K.mouseButton(dn)===2&&dn.ctrlKey});return new Vh({clickTolerance:Pt,move:(dn,Xt)=>{const nn=Bt();let An=(Xt.x-dn.x)*Lt;return Xt.y<nn.y&&(An=-An),{rollDelta:An}},moveStateManager:Yt,enable:wt,assignEvents:$h})}(s,pe);f.dragRotate=new _l(s,Ee,Se,Ue),this._add("mouseRotate",Ee,["mousePitch"]),this._add("mousePitch",Se,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Ue,["mousePitch"]),s.interactive&&s.dragRotate&&f.dragRotate.enable();const Xe=function({enable:wt,clickTolerance:Pt}){const Lt=new Cl({checkCorrectEvent:Bt=>K.mouseButton(Bt)===0&&!Bt.ctrlKey});return new Vh({clickTolerance:Pt,move:(Bt,Yt)=>({around:Yt,panDelta:Yt.sub(Bt)}),activateOnStart:!0,moveStateManager:Lt,enable:wt,assignEvents:$h})}(s),At=new Ca(s,f);f.dragPan=new tu(_,Xe,At),this._add("mousePan",Xe),this._add("touchPan",At,["touchZoom","touchRotate"]),s.interactive&&s.dragPan&&f.dragPan.enable(s.dragPan);const ct=new Ic,ft=new ju;f.touchZoomRotate=new Em(_,ft,ct,J),this._add("touchRotate",ct,["touchPan","touchZoom"]),this._add("touchZoom",ft,["touchPan","touchRotate"]),s.interactive&&s.touchZoomRotate&&f.touchZoomRotate.enable(s.touchZoomRotate);const xt=f.scrollZoom=new Ac(f,()=>this._triggerRenderFrame());this._add("scrollZoom",xt,["mousePan"]),s.interactive&&s.scrollZoom&&f.scrollZoom.enable(s.scrollZoom);const Ct=f.keyboard=new Gl(f);this._add("keyboard",Ct),s.interactive&&s.keyboard&&f.keyboard.enable(),this._add("blockableMapEvent",new ba(f))}_add(s,f,_){this._handlers.push({handlerName:s,handler:f,allowed:_}),this._handlersById[s]=f}stop(s){if(!this._updatingCamera){for(const{handler:f}of this._handlers)f.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(const{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!jl(this._eventsInProgress)||this.isZooming()}_blockedByActive(s,f,_){for(const w in s)if(w!==_&&(!f||f.indexOf(w)<0))return!0;return!1}_getMapTouches(s){const f=[];for(const _ of s)this._el.contains(_.target)&&f.push(_);return f}mergeHandlerResult(s,f,_,w,k){if(!_)return;o.e(s,_);const N={handlerName:w,originalEvent:_.originalEvent||k};_.zoomDelta!==void 0&&(f.zoom=N),_.panDelta!==void 0&&(f.drag=N),_.rollDelta!==void 0&&(f.roll=N),_.pitchDelta!==void 0&&(f.pitch=N),_.bearingDelta!==void 0&&(f.rotate=N)}_applyChanges(){const s={},f={},_={};for(const[w,k,N]of this._changes)w.panDelta&&(s.panDelta=(s.panDelta||new o.P(0,0))._add(w.panDelta)),w.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+w.zoomDelta),w.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+w.bearingDelta),w.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+w.pitchDelta),w.rollDelta&&(s.rollDelta=(s.rollDelta||0)+w.rollDelta),w.around!==void 0&&(s.around=w.around),w.pinchAround!==void 0&&(s.pinchAround=w.pinchAround),w.noInertia&&(s.noInertia=w.noInertia),o.e(f,k),o.e(_,N);this._updateMapTransform(s,f,_),this._changes=[]}_updateMapTransform(s,f,_){const w=this._map,k=w._getTransformForUpdate(),N=w.terrain;if(!(Wl(s)||N&&this._terrainMovement))return this._fireEvents(f,_,!0);w._stop(!0);let{panDelta:q,zoomDelta:J,bearingDelta:he,pitchDelta:pe,rollDelta:Ee,around:Se,pinchAround:Ue}=s;Ue!==void 0&&(Se=Ue),Se=Se||w.transform.centerPoint,N&&!k.isPointOnMapSurface(Se)&&(Se=k.centerPoint);const Xe={panDelta:q,zoomDelta:J,rollDelta:Ee,pitchDelta:pe,bearingDelta:he,around:Se};this._map.cameraHelper.useGlobeControls&&!k.isPointOnMapSurface(Se)&&(Se=k.centerPoint);const At=Se.distSqr(k.centerPoint)<.01?k.center:k.screenPointToLocation(q?Se.sub(q):Se);N?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(Xe,k),this._terrainMovement||!f.drag&&!f.zoom?f.drag&&this._terrainMovement?k.setCenter(k.screenPointToLocation(k.centerPoint.sub(q))):this._map.cameraHelper.handleMapControlsPan(Xe,k,At):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(Xe,k,At))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(Xe,k),this._map.cameraHelper.handleMapControlsPan(Xe,k,At)),w._applyUpdatedTransform(k),this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(f,_,!0)}_fireEvents(s,f,_){const w=jl(this._eventsInProgress),k=jl(s),N={};for(const Ee in s){const{originalEvent:Se}=s[Ee];this._eventsInProgress[Ee]||(N[`${Ee}start`]=Se),this._eventsInProgress[Ee]=s[Ee]}!w&&k&&this._fireEvent("movestart",k.originalEvent);for(const Ee in N)this._fireEvent(Ee,N[Ee]);k&&this._fireEvent("move",k.originalEvent);for(const Ee in s){const{originalEvent:Se}=s[Ee];this._fireEvent(Ee,Se)}const q={};let J;for(const Ee in this._eventsInProgress){const{handlerName:Se,originalEvent:Ue}=this._eventsInProgress[Ee];this._handlersById[Se].isActive()||(delete this._eventsInProgress[Ee],J=f[Se]||Ue,q[`${Ee}end`]=J)}for(const Ee in q)this._fireEvent(Ee,q[Ee]);const he=jl(this._eventsInProgress),pe=(w||k)&&!he;if(pe&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const Ee=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&Ee.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(Ee)}if(_&&pe){this._updatingCamera=!0;const Ee=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Se=Ue=>Ue!==0&&-this._bearingSnap<Ue&&Ue<this._bearingSnap;!Ee||!Ee.essential&&U.prefersReducedMotion?(this._map.fire(new o.l("moveend",{originalEvent:J})),Se(this._map.getBearing())&&this._map.resetNorth()):(Se(Ee.bearing||this._map.getBearing())&&(Ee.bearing=0),Ee.freezeElevation=!0,this._map.easeTo(Ee,{originalEvent:J})),this._updatingCamera=!1}}_fireEvent(s,f){this._map.fire(new o.l(s,f?{originalEvent:f}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{delete this._frameId,this.handleEvent(new Po("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Lf extends o.E{constructor(s,f,_){super(),this._renderFrameCallback=()=>{const w=Math.min((U.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(w)),w<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=_.bearingSnap,this.cameraHelper=f,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(s,f){s.apply(this.transform),this.transform=s,this.cameraHelper=f}getCenter(){return new o.S(this.transform.center.lng,this.transform.center.lat)}setCenter(s,f){return this.jumpTo({center:s},f)}getCenterElevation(){return this.transform.elevation}setCenterElevation(s,f){return this.jumpTo({elevation:s},f),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(s){this._centerClampedToGround=s}panBy(s,f,_){return s=o.P.convert(s).mult(-1),this.panTo(this.transform.center,o.e({offset:s},f),_)}panTo(s,f,_){return this.easeTo(o.e({center:s},f),_)}getZoom(){return this.transform.zoom}setZoom(s,f){return this.jumpTo({zoom:s},f),this}zoomTo(s,f,_){return this.easeTo(o.e({zoom:s},f),_)}zoomIn(s,f){return this.zoomTo(this.getZoom()+1,s,f),this}zoomOut(s,f){return this.zoomTo(this.getZoom()-1,s,f),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(s,f){return s!=this.transform.fov&&(this.transform.setFov(s),this.fire(new o.l("movestart",f)).fire(new o.l("move",f)).fire(new o.l("moveend",f))),this}getBearing(){return this.transform.bearing}setBearing(s,f){return this.jumpTo({bearing:s},f),this}getPadding(){return this.transform.padding}setPadding(s,f){return this.jumpTo({padding:s},f),this}rotateTo(s,f,_){return this.easeTo(o.e({bearing:s},f),_)}resetNorth(s,f){return this.rotateTo(0,o.e({duration:1e3},s),f),this}resetNorthPitch(s,f){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},s),f),this}snapToNorth(s,f){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,f):this}getPitch(){return this.transform.pitch}setPitch(s,f){return this.jumpTo({pitch:s},f),this}getRoll(){return this.transform.roll}setRoll(s,f){return this.jumpTo({roll:s},f),this}cameraForBounds(s,f){s=vt.convert(s).adjustAntiMeridian();const _=f&&f.bearing||0;return this._cameraForBoxAndBearing(s.getNorthWest(),s.getSouthEast(),_,f)}_cameraForBoxAndBearing(s,f,_,w){const k={top:0,bottom:0,right:0,left:0};if(typeof(w=o.e({padding:k,offset:[0,0],maxZoom:this.transform.maxZoom},w)).padding=="number"){const he=w.padding;w.padding={top:he,bottom:he,right:he,left:he}}const N=o.e(k,w.padding);w.padding=N;const q=this.transform,J=new vt(s,f);return this.cameraHelper.cameraForBoxAndBearing(w,N,J,_,q)}fitBounds(s,f,_){return this._fitInternal(this.cameraForBounds(s,f),f,_)}fitScreenCoordinates(s,f,_,w,k){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(s)),this.transform.screenPointToLocation(o.P.convert(f)),_,w),w,k)}_fitInternal(s,f,_){return s?(delete(f=o.e(s,f)).padding,f.linear?this.easeTo(f,_):this.flyTo(f,_)):this}jumpTo(s,f){this.stop();const _=this._getTransformForUpdate();let w=!1,k=!1,N=!1;const q=_.zoom;this.cameraHelper.handleJumpToCenterZoom(_,s);const J=_.zoom!==q;return"elevation"in s&&_.elevation!==+s.elevation&&_.setElevation(+s.elevation),"bearing"in s&&_.bearing!==+s.bearing&&(w=!0,_.setBearing(+s.bearing)),"pitch"in s&&_.pitch!==+s.pitch&&(k=!0,_.setPitch(+s.pitch)),"roll"in s&&_.roll!==+s.roll&&(N=!0,_.setRoll(+s.roll)),s.padding==null||_.isPaddingEqual(s.padding)||_.setPadding(s.padding),this._applyUpdatedTransform(_),this.fire(new o.l("movestart",f)).fire(new o.l("move",f)),J&&this.fire(new o.l("zoomstart",f)).fire(new o.l("zoom",f)).fire(new o.l("zoomend",f)),w&&this.fire(new o.l("rotatestart",f)).fire(new o.l("rotate",f)).fire(new o.l("rotateend",f)),k&&this.fire(new o.l("pitchstart",f)).fire(new o.l("pitch",f)).fire(new o.l("pitchend",f)),N&&this.fire(new o.l("rollstart",f)).fire(new o.l("roll",f)).fire(new o.l("rollend",f)),this.fire(new o.l("moveend",f))}calculateCameraOptionsFromTo(s,f,_,w=0){const k=o.a1.fromLngLat(s,f),N=o.a1.fromLngLat(_,w),q=N.x-k.x,J=N.y-k.y,he=N.z-k.z,pe=Math.hypot(q,J,he);if(pe===0)throw new Error("Can't calculate camera options with same From and To");const Ee=Math.hypot(q,J),Se=o.ak(this.transform.cameraToCenterDistance/pe/this.transform.tileSize),Ue=180*Math.atan2(q,-J)/Math.PI;let Xe=180*Math.acos(Ee/pe)/Math.PI;return Xe=he<0?90-Xe:90+Xe,{center:N.toLngLat(),elevation:w,zoom:Se,pitch:Xe,bearing:Ue}}calculateCameraOptionsFromCameraLngLatAltRotation(s,f,_,w,k){const N=this.transform.calculateCenterFromCameraLngLatAlt(s,f,_,w);return{center:N.center,elevation:N.elevation,zoom:N.zoom,bearing:_,pitch:w,roll:k}}easeTo(s,f){this._stop(!1,s.easeId),((s=o.e({offset:[0,0],duration:500,easing:o.co},s)).animate===!1||!s.essential&&U.prefersReducedMotion)&&(s.duration=0);const _=this._getTransformForUpdate(),w=this.getBearing(),k=_.pitch,N=_.roll,q="bearing"in s?this._normalizeBearing(s.bearing,w):w,J="pitch"in s?+s.pitch:k,he="roll"in s?this._normalizeBearing(s.roll,N):N,pe="padding"in s?s.padding:_.padding,Ee=o.P.convert(s.offset);let Se,Ue;s.around&&(Se=o.S.convert(s.around),Ue=_.locationToScreenPoint(Se));const Xe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},At=this.cameraHelper.handleEaseTo(_,{bearing:q,pitch:J,roll:he,padding:pe,around:Se,aroundPoint:Ue,offsetAsPoint:Ee,offset:s.offset,zoom:s.zoom,center:s.center});return this._rotating=this._rotating||w!==q,this._pitching=this._pitching||J!==k,this._rolling=this._rolling||he!==N,this._padding=!_.isPaddingEqual(pe),this._zooming=this._zooming||At.isZooming,this._easeId=s.easeId,this._prepareEase(f,s.noMoveStart,Xe),this.terrain&&this._prepareElevation(At.elevationCenter),this._ease(ct=>{At.easeFunc(ct),this.terrain&&!s.freezeElevation&&this._updateElevation(ct),this._applyUpdatedTransform(_),this._fireMoveEvents(f)},ct=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(f,ct)},s),this}_prepareEase(s,f,_={}){this._moving=!0,f||_.moving||this.fire(new o.l("movestart",s)),this._zooming&&!_.zooming&&this.fire(new o.l("zoomstart",s)),this._rotating&&!_.rotating&&this.fire(new o.l("rotatestart",s)),this._pitching&&!_.pitching&&this.fire(new o.l("pitchstart",s)),this._rolling&&!_.rolling&&this.fire(new o.l("rollstart",s))}_prepareElevation(s){this._elevationCenter=s,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(s){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const f=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(s<1&&f!==this._elevationTarget){const _=this._elevationTarget-this._elevationStart;this._elevationStart+=s*(_-(f-(_*s+this._elevationStart))/(1-s)),this._elevationTarget=f}this.transform.setElevation(o.C.number(this._elevationStart,this._elevationTarget,s))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(s){if(!this.terrain&&s.elevation>=0&&s.pitch<=90)return{};const f=s.getCameraLngLat(),_=s.getCameraAltitude(),w=this.terrain?this.terrain.getElevationForLngLatZoom(f,s.zoom):0;if(_<w){const k=this.calculateCameraOptionsFromTo(f,w,s.center,s.elevation);return{pitch:k.pitch,zoom:k.zoom}}return{}}_applyUpdatedTransform(s){const f=[];if(f.push(w=>this._elevateCameraIfInsideTerrain(w)),this.transformCameraUpdate&&f.push(w=>this.transformCameraUpdate(w)),!f.length)return;const _=s.clone();for(const w of f){const k=_.clone(),{center:N,zoom:q,roll:J,pitch:he,bearing:pe,elevation:Ee}=w(k);N&&k.setCenter(N),Ee!==void 0&&k.setElevation(Ee),q!==void 0&&k.setZoom(q),J!==void 0&&k.setRoll(J),he!==void 0&&k.setPitch(he),pe!==void 0&&k.setBearing(pe),_.apply(k)}this.transform.apply(_)}_fireMoveEvents(s){this.fire(new o.l("move",s)),this._zooming&&this.fire(new o.l("zoom",s)),this._rotating&&this.fire(new o.l("rotate",s)),this._pitching&&this.fire(new o.l("pitch",s)),this._rolling&&this.fire(new o.l("roll",s))}_afterEase(s,f){if(this._easeId&&f&&this._easeId===f)return;delete this._easeId;const _=this._zooming,w=this._rotating,k=this._pitching,N=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,_&&this.fire(new o.l("zoomend",s)),w&&this.fire(new o.l("rotateend",s)),k&&this.fire(new o.l("pitchend",s)),N&&this.fire(new o.l("rollend",s)),this.fire(new o.l("moveend",s))}flyTo(s,f){if(!s.essential&&U.prefersReducedMotion){const An=o.Q(s,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(An,f)}this.stop(),s=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.co},s);const _=this._getTransformForUpdate(),w=_.bearing,k=_.pitch,N=_.roll,q=_.padding,J="bearing"in s?this._normalizeBearing(s.bearing,w):w,he="pitch"in s?+s.pitch:k,pe="roll"in s?this._normalizeBearing(s.roll,N):N,Ee="padding"in s?s.padding:_.padding,Se=o.P.convert(s.offset);let Ue=_.centerPoint.add(Se);const Xe=_.screenPointToLocation(Ue),At=this.cameraHelper.handleFlyTo(_,{bearing:J,pitch:he,roll:pe,padding:Ee,locationAtOffset:Xe,offsetAsPoint:Se,center:s.center,minZoom:s.minZoom,zoom:s.zoom});let ct=s.curve;const ft=Math.max(_.width,_.height),xt=ft/At.scaleOfZoom,Ct=At.pixelPathLength;typeof At.scaleOfMinZoom=="number"&&(ct=Math.sqrt(ft/At.scaleOfMinZoom/Ct*2));const wt=ct*ct;function Pt(An){const qn=(xt*xt-ft*ft+(An?-1:1)*wt*wt*Ct*Ct)/(2*(An?xt:ft)*wt*Ct);return Math.log(Math.sqrt(qn*qn+1)-qn)}function Lt(An){return(Math.exp(An)-Math.exp(-An))/2}function Bt(An){return(Math.exp(An)+Math.exp(-An))/2}const Yt=Pt(!1);let dn=function(An){return Bt(Yt)/Bt(Yt+ct*An)},Xt=function(An){return ft*((Bt(Yt)*(Lt(qn=Yt+ct*An)/Bt(qn))-Lt(Yt))/wt)/Ct;var qn},nn=(Pt(!0)-Yt)/ct;if(Math.abs(Ct)<2e-6||!isFinite(nn)){if(Math.abs(ft-xt)<1e-6)return this.easeTo(s,f);const An=xt<ft?-1:1;nn=Math.abs(Math.log(xt/ft))/ct,Xt=()=>0,dn=qn=>Math.exp(An*ct*qn)}return s.duration="duration"in s?+s.duration:1e3*nn/("screenSpeed"in s?+s.screenSpeed/ct:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0),this._zooming=!0,this._rotating=w!==J,this._pitching=he!==k,this._rolling=pe!==N,this._padding=!_.isPaddingEqual(Ee),this._prepareEase(f,!1),this.terrain&&this._prepareElevation(At.targetCenter),this._ease(An=>{const qn=An*nn,Qn=1/dn(qn),Tn=Xt(qn);this._rotating&&_.setBearing(o.C.number(w,J,An)),this._pitching&&_.setPitch(o.C.number(k,he,An)),this._rolling&&_.setRoll(o.C.number(N,pe,An)),this._padding&&(_.interpolatePadding(q,Ee,An),Ue=_.centerPoint.add(Se)),At.easeFunc(An,Qn,Tn,Ue),this.terrain&&!s.freezeElevation&&this._updateElevation(An),this._applyUpdatedTransform(_),this._fireMoveEvents(f)},()=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(f)},s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,f){var _;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const w=this._onEaseEnd;delete this._onEaseEnd,w.call(this,f)}return s||(_=this.handlers)===null||_===void 0||_.stop(!1),this}_ease(s,f,_){_.animate===!1||_.duration===0?(s(1),f()):(this._easeStart=U.now(),this._easeOptions=_,this._onEaseFrame=s,this._onEaseEnd=f,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(s,f){s=o.aO(s,-180,180);const _=Math.abs(s-f);return Math.abs(s-360-f)<_&&(s-=360),Math.abs(s+360-f)<_&&(s+=360),s}queryTerrainElevation(s){return this.terrain?this.terrain.getElevationForLngLatZoom(o.S.convert(s),this.transform.tileZoom):null}}const vu={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class no{constructor(s=vu){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=f=>{!f||f.sourceDataType!=="metadata"&&f.sourceDataType!=="visibility"&&f.dataType!=="style"&&f.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=s}getDefaultPosition(){return"bottom-right"}onAdd(s){return this._map=s,this._compact=this.options.compact,this._container=K.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=K.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=K.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){K.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(s,f){const _=this._map._getUIString(`AttributionControl.${f}`);s.title=_,s.setAttribute("aria-label",_)}_updateAttributions(){if(!this._map.style)return;let s=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=s.concat(this.options.customAttribution.map(w=>typeof w!="string"?"":w)):typeof this.options.customAttribution=="string"&&s.push(this.options.customAttribution)),this._map.style.stylesheet){const w=this._map.style.stylesheet;this.styleOwner=w.owner,this.styleId=w.id}const f=this._map.style.sourceCaches;for(const w in f){const k=f[w];if(k.used||k.usedForTerrain){const N=k.getSource();N.attribution&&s.indexOf(N.attribution)<0&&s.push(N.attribution)}}s=s.filter(w=>String(w).trim()),s.sort((w,k)=>w.length-k.length),s=s.filter((w,k)=>{for(let N=k+1;N<s.length;N++)if(s[N].indexOf(w)>=0)return!1;return!0});const _=s.join(" | ");_!==this._attribHTML&&(this._attribHTML=_,s.length?(this._innerContainer.innerHTML=K.sanitize(_),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Ko{constructor(s={}){this._updateCompact=()=>{const f=this._container.children;if(f.length){const _=f[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&_.classList.add("maplibregl-compact"):_.classList.remove("maplibregl-compact")}},this.options=s}getDefaultPosition(){return"bottom-left"}onAdd(s){this._map=s,this._compact=this.options&&this.options.compact,this._container=K.create("div","maplibregl-ctrl");const f=K.create("a","maplibregl-ctrl-logo");return f.target="_blank",f.rel="noopener nofollow",f.href="https://maplibre.org/",f.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),f.setAttribute("rel","noopener nofollow"),this._container.appendChild(f),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){K.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Rr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){const f=++this._id;return this._queue.push({callback:s,id:f,cancelled:!1}),f}remove(s){const f=this._currentlyRunning,_=f?this._queue.concat(f):this._queue;for(const w of _)if(w.id===s)return void(w.cancelled=!0)}run(s=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const f=this._currentlyRunning=this._queue;this._queue=[];for(const _ of f)if(!_.cancelled&&(_.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Wu=o.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class Oi extends o.E{constructor(s){super(),this._lastTilesetChange=U.now(),this.sourceCache=s,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=s._source.tileSize*2**this.deltaZoom,s.usedForTerrain=!0,s.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(s,f){this.sourceCache.update(s,f),this._renderableTilesKeys=[];const _={};for(const w of it(s,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:f,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))_[w.key]=!0,this._renderableTilesKeys.push(w.key),this._tiles[w.key]||(w.terrainRttPosMatrix32f=new Float64Array(16),o.bY(w.terrainRttPosMatrix32f,0,o.$,o.$,0,0,1),this._tiles[w.key]=new de(w,this.tileSize),this._lastTilesetChange=U.now());for(const w in this._tiles)_[w]||delete this._tiles[w]}freeRtt(s){for(const f in this._tiles){const _=this._tiles[f];(!s||_.tileID.equals(s)||_.tileID.isChildOf(s)||s.isChildOf(_.tileID))&&(_.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(s=>this.getTileByID(s))}getTileByID(s){return this._tiles[s]}getTerrainCoords(s,f){return f?this._getTerrainCoordsForTileRanges(s,f):this._getTerrainCoordsForRegularTile(s)}_getTerrainCoordsForRegularTile(s){const f={};for(const _ of this._renderableTilesKeys){const w=this._tiles[_].tileID,k=s.clone(),N=o.ba();if(w.canonical.equals(s.canonical))o.bY(N,0,o.$,o.$,0,0,1);else if(w.canonical.isChildOf(s.canonical)){const q=w.canonical.z-s.canonical.z,J=w.canonical.x-(w.canonical.x>>q<<q),he=w.canonical.y-(w.canonical.y>>q<<q),pe=o.$>>q;o.bY(N,0,pe,pe,0,0,1),o.M(N,N,[-J*pe,-he*pe,0])}else{if(!s.canonical.isChildOf(w.canonical))continue;{const q=s.canonical.z-w.canonical.z,J=s.canonical.x-(s.canonical.x>>q<<q),he=s.canonical.y-(s.canonical.y>>q<<q),pe=o.$>>q;o.bY(N,0,o.$,o.$,0,0,1),o.M(N,N,[J*pe,he*pe,0]),o.N(N,N,[1/2**q,1/2**q,0])}}k.terrainRttPosMatrix32f=new Float32Array(N),f[_]=k}return f}_getTerrainCoordsForTileRanges(s,f){const _={};for(const w of this._renderableTilesKeys){const k=this._tiles[w].tileID;if(!this._isWithinTileRanges(k,f))continue;const N=s.clone(),q=o.ba();if(k.canonical.z===s.canonical.z){const J=s.canonical.x-k.canonical.x,he=s.canonical.y-k.canonical.y;o.bY(q,0,o.$,o.$,0,0,1),o.M(q,q,[J*o.$,he*o.$,0])}else if(k.canonical.z>s.canonical.z){const J=k.canonical.z-s.canonical.z,he=k.canonical.x-(k.canonical.x>>J<<J),pe=k.canonical.y-(k.canonical.y>>J<<J),Ee=s.canonical.x-(k.canonical.x>>J),Se=s.canonical.y-(k.canonical.y>>J),Ue=o.$>>J;o.bY(q,0,Ue,Ue,0,0,1),o.M(q,q,[-he*Ue+Ee*o.$,-pe*Ue+Se*o.$,0])}else{const J=s.canonical.z-k.canonical.z,he=s.canonical.x-(s.canonical.x>>J<<J),pe=s.canonical.y-(s.canonical.y>>J<<J),Ee=(s.canonical.x>>J)-k.canonical.x,Se=(s.canonical.y>>J)-k.canonical.y,Ue=o.$<<J;o.bY(q,0,Ue,Ue,0,0,1),o.M(q,q,[he*o.$+Ee*Ue,pe*o.$+Se*Ue,0])}N.terrainRttPosMatrix32f=new Float32Array(q),_[w]=N}return _}getSourceTile(s,f){const _=this.sourceCache._source;let w=s.overscaledZ-this.deltaZoom;if(w>_.maxzoom&&(w=_.maxzoom),w<_.minzoom)return null;this._sourceTileCache[s.key]||(this._sourceTileCache[s.key]=s.scaledTo(w).key);let k=this.sourceCache.getTileByID(this._sourceTileCache[s.key]);if((!k||!k.dem)&&f)for(;w>=_.minzoom&&(!k||!k.dem);)k=this.sourceCache.getTileByID(s.scaledTo(w--).key);return k}anyTilesAfterTime(s=Date.now()){return this._lastTilesetChange>=s}_isWithinTileRanges(s,f){return f[s.canonical.z]&&s.canonical.x>=f[s.canonical.z].minTileX&&s.canonical.x<=f[s.canonical.z].maxTileX&&s.canonical.y>=f[s.canonical.z].minTileY&&s.canonical.y<=f[s.canonical.z].maxTileY}}class Ti{constructor(s,f,_){this._meshCache={},this.painter=s,this.sourceCache=new Oi(f),this.options=_,this.exaggeration=typeof _.exaggeration=="number"?_.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(s,f,_,w=o.$){var k;if(!(f>=0&&f<w&&_>=0&&_<w))return 0;const N=this.getTerrainData(s),q=(k=N.tile)===null||k===void 0?void 0:k.dem;if(!q)return 0;const J=o.cs([],[f/w*o.$,_/w*o.$],N.u_terrain_matrix),he=[J[0]*q.dim,J[1]*q.dim],pe=Math.floor(he[0]),Ee=Math.floor(he[1]),Se=he[0]-pe,Ue=he[1]-Ee;return q.get(pe,Ee)*(1-Se)*(1-Ue)+q.get(pe+1,Ee)*Se*(1-Ue)+q.get(pe,Ee+1)*(1-Se)*Ue+q.get(pe+1,Ee+1)*Se*Ue}getElevationForLngLatZoom(s,f){if(!o.ct(f,s.wrap()))return 0;const{tileID:_,mercatorX:w,mercatorY:k}=this._getOverscaledTileIDFromLngLatZoom(s,f);return this.getElevation(_,w%o.$,k%o.$,o.$)}getElevation(s,f,_,w=o.$){return this.getDEMElevation(s,f,_,w)*this.exaggeration}getTerrainData(s){if(!this._emptyDemTexture){const w=this.painter.context,k=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new o.T(w,k,w.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new o.T(w,new o.R({width:1,height:1}),w.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.ag([])}const f=this.sourceCache.getSourceTile(s,!0);if(f&&f.dem&&(!f.demTexture||f.needsTerrainPrepare)){const w=this.painter.context;f.demTexture=this.painter.getTileTexture(f.dem.stride),f.demTexture?f.demTexture.update(f.dem.getPixels(),{premultiply:!1}):f.demTexture=new o.T(w,f.dem.getPixels(),w.gl.RGBA,{premultiply:!1}),f.demTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),f.needsTerrainPrepare=!1}const _=f&&f+f.tileID.key+s.key;if(_&&!this._demMatrixCache[_]){const w=this.sourceCache.sourceCache._source.maxzoom;let k=s.canonical.z-f.tileID.canonical.z;s.overscaledZ>s.canonical.z&&(s.canonical.z>=w?k=s.canonical.z-w:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const N=s.canonical.x-(s.canonical.x>>k<<k),q=s.canonical.y-(s.canonical.y>>k<<k),J=o.cu(new Float64Array(16),[1/(o.$<<k),1/(o.$<<k),0]);o.M(J,J,[N*o.$,q*o.$,0]),this._demMatrixCache[s.key]={matrix:J,coord:s}}return{u_depth:2,u_terrain:3,u_terrain_dim:f&&f.dem&&f.dem.dim||1,u_terrain_matrix:_?this._demMatrixCache[s.key].matrix:this._emptyDemMatrix,u_terrain_unpack:f&&f.dem&&f.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(f&&f.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:f}}getFramebuffer(s){const f=this.painter,_=f.width/devicePixelRatio,w=f.height/devicePixelRatio;return!this._fbo||this._fbo.width===_&&this._fbo.height===w||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new o.T(f.context,{width:_,height:w,data:null},f.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(f.context.gl.NEAREST,f.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new o.T(f.context,{width:_,height:w,data:null},f.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(f.context.gl.NEAREST,f.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=f.context.createFramebuffer(_,w,!0,!1),this._fbo.depthAttachment.set(f.context.createRenderbuffer(f.context.gl.DEPTH_COMPONENT16,_,w))),this._fbo.colorAttachment.set(s==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const s=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const f=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let k=0,N=0;k<this._coordsTextureSize;k++)for(let q=0;q<this._coordsTextureSize;q++,N+=4)f[N+0]=255&q,f[N+1]=255&k,f[N+2]=q>>8<<4|k>>8,f[N+3]=0;const _=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(f.buffer)),w=new o.T(s,_,s.gl.RGBA,{premultiply:!1});return w.bind(s.gl.NEAREST,s.gl.CLAMP_TO_EDGE),this._coordsTexture=w,w}pointCoordinate(s){this.painter.maybeDrawDepthAndCoords(!0);const f=new Uint8Array(4),_=this.painter.context,w=_.gl,k=Math.round(s.x*this.painter.pixelRatio/devicePixelRatio),N=Math.round(s.y*this.painter.pixelRatio/devicePixelRatio),q=Math.round(this.painter.height/devicePixelRatio);_.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),w.readPixels(k,q-N-1,1,1,w.RGBA,w.UNSIGNED_BYTE,f),_.bindFramebuffer.set(null);const J=f[0]+(f[2]>>4<<8),he=f[1]+((15&f[2])<<8),pe=this.coordsIndex[255-f[3]],Ee=pe&&this.sourceCache.getTileByID(pe);if(!Ee)return null;const Se=this._coordsTextureSize,Ue=(1<<Ee.tileID.canonical.z)*Se;return new o.a1((Ee.tileID.canonical.x*Se+J)/Ue+Ee.tileID.wrap,(Ee.tileID.canonical.y*Se+he)/Ue,this.getElevation(Ee.tileID,J,he,Se))}depthAtPoint(s){const f=new Uint8Array(4),_=this.painter.context,w=_.gl;return _.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),w.readPixels(s.x,this.painter.height/devicePixelRatio-s.y-1,1,1,w.RGBA,w.UNSIGNED_BYTE,f),_.bindFramebuffer.set(null),(f[0]/16777216+f[1]/65536+f[2]/256+f[3])/256}getTerrainMesh(s){var f;const _=((f=this.painter.style.projection)===null||f===void 0?void 0:f.transitionState)>0,w=_&&s.canonical.y===0,k=_&&s.canonical.y===(1<<s.canonical.z)-1,N=`m_${w?"n":""}_${k?"s":""}`;if(this._meshCache[N])return this._meshCache[N];const q=this.painter.context,J=new o.cv,he=new o.aN,pe=this.meshSize,Ee=o.$/pe,Se=pe*pe;for(let Bt=0;Bt<=pe;Bt++)for(let Yt=0;Yt<=pe;Yt++)J.emplaceBack(Yt*Ee,Bt*Ee,0);for(let Bt=0;Bt<Se;Bt+=pe+1)for(let Yt=0;Yt<pe;Yt++)he.emplaceBack(Yt+Bt,pe+Yt+Bt+1,pe+Yt+Bt+2),he.emplaceBack(Yt+Bt,pe+Yt+Bt+2,Yt+Bt+1);const Ue=J.length,Xe=Ue+(pe+1),At=(pe+1)*pe,ct=w?o.bh:0,ft=w?0:1,xt=k?o.bi:o.$,Ct=k?0:1;for(let Bt=0;Bt<=pe;Bt++)J.emplaceBack(Bt*Ee,ct,ft);for(let Bt=0;Bt<=pe;Bt++)J.emplaceBack(Bt*Ee,xt,Ct);for(let Bt=0;Bt<pe;Bt++)he.emplaceBack(At+Bt,Xe+Bt,Xe+Bt+1),he.emplaceBack(At+Bt,Xe+Bt+1,At+Bt+1),he.emplaceBack(0+Bt,Ue+Bt+1,Ue+Bt),he.emplaceBack(0+Bt,0+Bt+1,Ue+Bt+1);const wt=J.length,Pt=wt+2*(pe+1);for(const Bt of[0,1])for(let Yt=0;Yt<=pe;Yt++)for(const dn of[0,1])J.emplaceBack(Bt*o.$,Yt*Ee,dn);for(let Bt=0;Bt<2*pe;Bt+=2)he.emplaceBack(wt+Bt,wt+Bt+1,wt+Bt+3),he.emplaceBack(wt+Bt,wt+Bt+3,wt+Bt+2),he.emplaceBack(Pt+Bt,Pt+Bt+3,Pt+Bt+1),he.emplaceBack(Pt+Bt,Pt+Bt+2,Pt+Bt+3);const Lt=new Kl(q.createVertexBuffer(J,Wu.members),q.createIndexBuffer(he),o.aM.simpleSegment(0,0,J.length,he.length));return this._meshCache[N]=Lt,Lt}getMeshFrameDelta(s){return 2*Math.PI*o.bu/Math.pow(2,Math.max(s,0))/5}getMinTileElevationForLngLatZoom(s,f){var _;const{tileID:w}=this._getOverscaledTileIDFromLngLatZoom(s,f);return(_=this.getMinMaxElevation(w).minElevation)!==null&&_!==void 0?_:0}getMinMaxElevation(s){const f=this.getTerrainData(s).tile,_={minElevation:null,maxElevation:null};return f&&f.dem&&(_.minElevation=f.dem.min*this.exaggeration,_.maxElevation=f.dem.max*this.exaggeration),_}_getOverscaledTileIDFromLngLatZoom(s,f){const _=o.a1.fromLngLat(s.wrap()),w=(1<<f)*o.$,k=_.x*w,N=_.y*w,q=Math.floor(k/o.$),J=Math.floor(N/o.$);return{tileID:new o.Z(f,0,f,q,J),mercatorX:k,mercatorY:N}}}class Tc{constructor(s,f,_){this._context=s,this._size=f,this._tileSize=_,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const s of this._objects)s.texture.destroy(),s.fbo.destroy()}_createObject(s){const f=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),_=new o.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return _.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),f.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),f.colorAttachment.set(_.texture),{id:s,fbo:f,texture:_,stamp:-1,inUse:!1}}getObjectForId(s){return this._objects[s]}useObject(s){s.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(f=>s.id!==f),this._recentlyUsed.push(s.id)}stampObject(s){s.stamp=++this._stamp}getOrCreateFreeObject(){for(const f of this._recentlyUsed)if(!this._objects[f].inUse)return this._objects[f];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const s=this._createObject(this._objects.length);return this._objects.push(s),s}freeObject(s){s.inUse=!1}freeAllObjects(){for(const s of this._objects)this.freeObject(s)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(s=>!s.inUse)===!1}}const DA={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class uA{constructor(s,f){this.painter=s,this.terrain=f,this.pool=new Tc(s.context,30,f.sourceCache.tileSize*f.qualityFactor)}destruct(){this.pool.destruct()}getTexture(s){return this.pool.getObjectForId(s.rtt[this._stacks.length-1].id).texture}prepareForRender(s,f){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=s._order.filter(_=>!s._layers[_].isHidden(f)),this._coordsAscending={};for(const _ in s.sourceCaches){this._coordsAscending[_]={};const w=s.sourceCaches[_].getVisibleCoordinates(),k=s.sourceCaches[_].getSource(),N=k instanceof Wt?k.terrainTileRanges:null;for(const q of w){const J=this.terrain.sourceCache.getTerrainCoords(q,N);for(const he in J)this._coordsAscending[_][he]||(this._coordsAscending[_][he]=[]),this._coordsAscending[_][he].push(J[he])}}this._coordsAscendingStr={};for(const _ of s._order){const w=s._layers[_],k=w.source;if(DA[w.type]&&!this._coordsAscendingStr[k]){this._coordsAscendingStr[k]={};for(const N in this._coordsAscending[k])this._coordsAscendingStr[k][N]=this._coordsAscending[k][N].map(q=>q.key).sort().join()}}for(const _ of this._renderableTiles)for(const w in this._coordsAscendingStr){const k=this._coordsAscendingStr[w][_.tileID.key];k&&k!==_.rttCoords[w]&&(_.rtt=[])}}renderLayer(s,f){if(s.isHidden(this.painter.transform.zoom))return!1;const _=Object.assign(Object.assign({},f),{isRenderingToTexture:!0}),w=s.type,k=this.painter,N=this._renderableLayerIds[this._renderableLayerIds.length-1]===s.id;if(DA[w]&&(this._prevType&&DA[this._prevType]||this._stacks.push([]),this._prevType=w,this._stacks[this._stacks.length-1].push(s.id),!N))return!0;if(DA[this._prevType]||DA[w]&&N){this._prevType=w;const q=this._stacks.length-1,J=this._stacks[q]||[];for(const he of this._renderableTiles){if(this.pool.isFull()&&(Xd(this.painter,this.terrain,this._rttTiles,_),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(he),he.rtt[q]){const Ee=this.pool.getObjectForId(he.rtt[q].id);if(Ee.stamp===he.rtt[q].stamp){this.pool.useObject(Ee);continue}}const pe=this.pool.getOrCreateFreeObject();this.pool.useObject(pe),this.pool.stampObject(pe),he.rtt[q]={id:pe.id,stamp:pe.stamp},k.context.bindFramebuffer.set(pe.fbo.framebuffer),k.context.clear({color:o.bf.transparent,stencil:0}),k.currentStencilSource=void 0;for(let Ee=0;Ee<J.length;Ee++){const Se=k.style._layers[J[Ee]],Ue=Se.source?this._coordsAscending[Se.source][he.tileID.key]:[he.tileID];k.context.viewport.set([0,0,pe.fbo.width,pe.fbo.height]),k._renderTileClippingMasks(Se,Ue,!0),k.renderLayer(k,k.style.sourceCaches[Se.source],Se,Ue,_),Se.source&&(he.rttCoords[Se.source]=this._coordsAscendingStr[Se.source][he.tileID.key])}}return Xd(this.painter,this.terrain,this._rttTiles,_),this._rttTiles=[],this.pool.freeAllObjects(),DA[w]}return!1}}const sa={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},go=m,Ql={hash:!1,interactive:!0,bearingSnap:7,attributionControl:vu,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Ff={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Jh{constructor(s,f,_=!1){this.mousedown=k=>{this.startMove(k,K.mousePos(this.element,k)),K.addEventListener(window,"mousemove",this.mousemove),K.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=k=>{this.move(k,K.mousePos(this.element,k))},this.mouseup=k=>{this._rotatePitchHandler.dragEnd(k),this.offTemp()},this.touchstart=k=>{k.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=K.touchPos(this.element,k.targetTouches)[0],this.startMove(k,this._startPos),K.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),K.addEventListener(window,"touchend",this.touchend))},this.touchmove=k=>{k.targetTouches.length!==1?this.reset():(this._lastPos=K.touchPos(this.element,k.targetTouches)[0],this.move(k,this._lastPos))},this.touchend=k=>{k.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=f;const w=new Uf;this._rotatePitchHandler=new Vh({clickTolerance:3,move:(k,N)=>{const q=f.getBoundingClientRect(),J=new o.P((q.bottom-q.top)/2,(q.right-q.left)/2);return{bearingDelta:o.cn(new o.P(k.x,N.y),N,J),pitchDelta:_?-.5*(N.y-k.y):void 0}},moveStateManager:w,enable:!0,assignEvents:()=>{}}),this.map=s,K.addEventListener(f,"mousedown",this.mousedown),K.addEventListener(f,"touchstart",this.touchstart,{passive:!1}),K.addEventListener(f,"touchcancel",this.reset)}startMove(s,f){this._rotatePitchHandler.dragStart(s,f),K.disableDrag()}move(s,f){const _=this.map,{bearingDelta:w,pitchDelta:k}=this._rotatePitchHandler.dragMove(s,f)||{};w&&_.setBearing(_.getBearing()+w),k&&_.setPitch(_.getPitch()+k)}off(){const s=this.element;K.removeEventListener(s,"mousedown",this.mousedown),K.removeEventListener(s,"touchstart",this.touchstart,{passive:!1}),K.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),K.removeEventListener(window,"touchend",this.touchend),K.removeEventListener(s,"touchcancel",this.reset),this.offTemp()}offTemp(){K.enableDrag(),K.removeEventListener(window,"mousemove",this.mousemove),K.removeEventListener(window,"mouseup",this.mouseup),K.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),K.removeEventListener(window,"touchend",this.touchend)}}let Uo;function ja(I,s,f,_=!1){if(_||!f.getCoveringTilesDetailsProvider().allowWorldCopies())return I?.wrap();const w=new o.S(I.lng,I.lat);if(I=new o.S(I.lng,I.lat),s){const k=new o.S(I.lng-360,I.lat),N=new o.S(I.lng+360,I.lat),q=f.locationToScreenPoint(I).distSqr(s);f.locationToScreenPoint(k).distSqr(s)<q?I=k:f.locationToScreenPoint(N).distSqr(s)<q&&(I=N)}for(;Math.abs(I.lng-f.center.lng)>180;){const k=f.locationToScreenPoint(I);if(k.x>=0&&k.y>=0&&k.x<=f.width&&k.y<=f.height)break;I.lng>f.center.lng?I.lng-=360:I.lng+=360}return I.lng!==w.lng&&f.isPointOnMapSurface(f.locationToScreenPoint(I))?I:w}const ed={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Cu(I,s,f){const _=I.classList;for(const w in ed)_.remove(`maplibregl-${f}-anchor-${w}`);_.add(`maplibregl-${f}-anchor-${s}`)}class kc extends o.E{constructor(s){if(super(),this._onKeyPress=f=>{const _=f.code,w=f.charCode||f.keyCode;_!=="Space"&&_!=="Enter"&&w!==32&&w!==13||this.togglePopup()},this._onMapClick=f=>{const _=f.originalEvent.target,w=this._element;this._popup&&(_===w||w.contains(_))&&this.togglePopup()},this._update=f=>{if(!this._map)return;const _=this._map.loaded()&&!this._map.isMoving();(f?.type==="terrain"||f?.type==="render"&&!_)&&this._map.once("render",this._update),this._lngLat=ja(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let w="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?w=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(w=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let k="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?k="rotateX(0deg)":this._pitchAlignment==="map"&&(k=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||f&&f.type!=="moveend"||(this._pos=this._pos.round()),K.setTransform(this._element,`${ed[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${k} ${w}`),U.frameAsync(new AbortController).then(()=>{this._updateOpacity(f&&f.type==="moveend")}).catch(()=>{})},this._onMove=f=>{if(!this._isDragging){const _=this._clickTolerance||this._map._clickTolerance;this._isDragging=f.point.dist(this._pointerdownPos)>=_}this._isDragging&&(this._pos=f.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.l("dragstart"))),this.fire(new o.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.l("dragend")),this._state="inactive"},this._addDragHandler=f=>{this._element.contains(f.originalEvent.target)&&(f.preventDefault(),this._positionDelta=f.point.sub(this._pos).add(this._offset),this._pointerdownPos=f.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._subpixelPositioning=s&&s.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment!=="auto"?s.pitchAlignment:this._rotationAlignment,this.setOpacity(s?.opacity,s?.opacityWhenCovered),s&&s.element)this._element=s.element,this._offset=o.P.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=K.create("div");const f=K.createNS("http://www.w3.org/2000/svg","svg"),_=41,w=27;f.setAttributeNS(null,"display","block"),f.setAttributeNS(null,"height",`${_}px`),f.setAttributeNS(null,"width",`${w}px`),f.setAttributeNS(null,"viewBox",`0 0 ${w} ${_}`);const k=K.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"stroke","none"),k.setAttributeNS(null,"stroke-width","1"),k.setAttributeNS(null,"fill","none"),k.setAttributeNS(null,"fill-rule","evenodd");const N=K.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"fill-rule","nonzero");const q=K.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"transform","translate(3.0, 29.0)"),q.setAttributeNS(null,"fill","#000000");const J=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ft of J){const xt=K.createNS("http://www.w3.org/2000/svg","ellipse");xt.setAttributeNS(null,"opacity","0.04"),xt.setAttributeNS(null,"cx","10.5"),xt.setAttributeNS(null,"cy","5.80029008"),xt.setAttributeNS(null,"rx",ft.rx),xt.setAttributeNS(null,"ry",ft.ry),q.appendChild(xt)}const he=K.createNS("http://www.w3.org/2000/svg","g");he.setAttributeNS(null,"fill",this._color);const pe=K.createNS("http://www.w3.org/2000/svg","path");pe.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),he.appendChild(pe);const Ee=K.createNS("http://www.w3.org/2000/svg","g");Ee.setAttributeNS(null,"opacity","0.25"),Ee.setAttributeNS(null,"fill","#000000");const Se=K.createNS("http://www.w3.org/2000/svg","path");Se.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ee.appendChild(Se);const Ue=K.createNS("http://www.w3.org/2000/svg","g");Ue.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ue.setAttributeNS(null,"fill","#FFFFFF");const Xe=K.createNS("http://www.w3.org/2000/svg","g");Xe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const At=K.createNS("http://www.w3.org/2000/svg","circle");At.setAttributeNS(null,"fill","#000000"),At.setAttributeNS(null,"opacity","0.25"),At.setAttributeNS(null,"cx","5.5"),At.setAttributeNS(null,"cy","5.5"),At.setAttributeNS(null,"r","5.4999962");const ct=K.createNS("http://www.w3.org/2000/svg","circle");ct.setAttributeNS(null,"fill","#FFFFFF"),ct.setAttributeNS(null,"cx","5.5"),ct.setAttributeNS(null,"cy","5.5"),ct.setAttributeNS(null,"r","5.4999962"),Xe.appendChild(At),Xe.appendChild(ct),N.appendChild(q),N.appendChild(he),N.appendChild(Ee),N.appendChild(Ue),N.appendChild(Xe),f.appendChild(N),f.setAttributeNS(null,"height",_*this._scale+"px"),f.setAttributeNS(null,"width",w*this._scale+"px"),this._element.appendChild(f),this._offset=o.P.convert(s&&s.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",f=>{f.preventDefault()}),this._element.addEventListener("mousedown",f=>{f.preventDefault()}),Cu(this._element,this._anchor,"marker"),s&&s.className)for(const f of s.className.split(" "))this._element.classList.add(f);this._popup=null}addTo(s){return this.remove(),this._map=s,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",s._getUIString("Marker.Title")),s.getCanvasContainer().appendChild(this._element),s.on("move",this._update),s.on("moveend",this._update),s.on("terrain",this._update),s.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),K.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=o.S.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){const w=Math.abs(13.5)/Math.SQRT2;s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[w,-1*(38.1-13.5+w)],"bottom-right":[-w,-1*(38.1-13.5+w)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(s){return this._subpixelPositioning=s,this}getPopup(){return this._popup}togglePopup(){const s=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:s?(s.isOpen()?s.remove():(s.setLngLat(this._lngLat),s.addTo(this._map)),this):this}_updateOpacity(s=!1){var f,_;const w=(f=this._map)===null||f===void 0?void 0:f.terrain,k=this._map.transform.isLocationOccluded(this._lngLat);if(!w||k){const Ue=k?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Ue&&(this._element.style.opacity=Ue))}if(s)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const N=this._map,q=N.terrain.depthAtPoint(this._pos),J=N.terrain.getElevationForLngLatZoom(this._lngLat,N.transform.tileZoom);if(N.transform.lngLatToCameraDepth(this._lngLat,J)-q<.006)return void(this._element.style.opacity=this._opacity);const he=-this._offset.y/N.transform.pixelsPerMeter,pe=Math.sin(N.getPitch()*Math.PI/180)*he,Ee=N.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),Se=N.transform.lngLatToCameraDepth(this._lngLat,J+pe)-Ee>.006;!((_=this._popup)===null||_===void 0)&&_.isOpen()&&Se&&this._popup.remove(),this._element.style.opacity=Se?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(s){return this._offset=o.P.convert(s),this._update(),this}addClassName(s){this._element.classList.add(s)}removeClassName(s){this._element.classList.remove(s)}toggleClassName(s){return this._element.classList.toggle(s)}setDraggable(s){return this._draggable=!!s,this._map&&(s?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s&&s!=="auto"?s:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(s,f){return(this._opacity===void 0||s===void 0&&f===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),s!==void 0&&(this._opacity=s),f!==void 0&&(this._opacityWhenCovered=f),this._map&&this._updateOpacity(!0),this}}const $s={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let es=0,cA=!1;const Dc={maxWidth:100,unit:"metric"};function uc(I,s,f){const _=f&&f.maxWidth||100,w=I._container.clientHeight/2,k=I._container.clientWidth/2,N=I.unproject([k-_/2,w]),q=I.unproject([k+_/2,w]),J=Math.round(I.project(q).x-I.project(N).x),he=Math.min(_,J,I._container.clientWidth),pe=N.distanceTo(q);if(f&&f.unit==="imperial"){const Ee=3.2808*pe;Ee>5280?cc(s,he,Ee/5280,I._getUIString("ScaleControl.Miles")):cc(s,he,Ee,I._getUIString("ScaleControl.Feet"))}else f&&f.unit==="nautical"?cc(s,he,pe/1852,I._getUIString("ScaleControl.NauticalMiles")):pe>=1e3?cc(s,he,pe/1e3,I._getUIString("ScaleControl.Kilometers")):cc(s,he,pe,I._getUIString("ScaleControl.Meters"))}function cc(I,s,f,_){const w=function(k){const N=Math.pow(10,`${Math.floor(k)}`.length-1);let q=k/N;return q=q>=10?10:q>=5?5:q>=3?3:q>=2?2:q>=1?1:function(J){const he=Math.pow(10,Math.ceil(-Math.log(J)/Math.LN10));return Math.round(J*he)/he}(q),N*q}(f);I.style.width=s*(w/f)+"px",I.innerHTML=`${w}&nbsp;${_}`}const Yl={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},td=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function nd(I){if(I){if(typeof I=="number"){const s=Math.round(Math.abs(I)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,I),"top-left":new o.P(s,s),"top-right":new o.P(-s,s),bottom:new o.P(0,-I),"bottom-left":new o.P(s,-s),"bottom-right":new o.P(-s,-s),left:new o.P(I,0),right:new o.P(-I,0)}}if(I instanceof o.P||Array.isArray(I)){const s=o.P.convert(I);return{center:s,top:s,"top-left":s,"top-right":s,bottom:s,"bottom-left":s,"bottom-right":s,left:s,right:s}}return{center:o.P.convert(I.center||[0,0]),top:o.P.convert(I.top||[0,0]),"top-left":o.P.convert(I["top-left"]||[0,0]),"top-right":o.P.convert(I["top-right"]||[0,0]),bottom:o.P.convert(I.bottom||[0,0]),"bottom-left":o.P.convert(I["bottom-left"]||[0,0]),"bottom-right":o.P.convert(I["bottom-right"]||[0,0]),left:o.P.convert(I.left||[0,0]),right:o.P.convert(I.right||[0,0])}}return nd(new o.P(0,0))}const Td=m;l.AJAXError=o.cz,l.Event=o.l,l.Evented=o.E,l.LngLat=o.S,l.MercatorCoordinate=o.a1,l.Point=o.P,l.addProtocol=o.cA,l.config=o.a,l.removeProtocol=o.cB,l.AttributionControl=no,l.BoxZoomHandler=th,l.CanvasSource=On,l.CooperativeGesturesHandler=rf,l.DoubleClickZoomHandler=Bh,l.DragPanHandler=tu,l.DragRotateHandler=_l,l.EdgeInsets=iA,l.FullscreenControl=class extends o.E{constructor(I={}){super(),this._onFullscreenChange=()=>{var s;let f=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((s=f?.shadowRoot)===null||s===void 0)&&s.fullscreenElement;)f=f.shadowRoot.fullscreenElement;f===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,I&&I.container&&(I.container instanceof HTMLElement?this._container=I.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(I){return this._map=I,this._container||(this._container=this._map.getContainer()),this._controlContainer=K.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){K.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const I=this._fullscreenButton=K.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);K.create("span","maplibregl-ctrl-icon",I).setAttribute("aria-hidden","true"),I.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const I=this._getTitle();this._fullscreenButton.setAttribute("aria-label",I),this._fullscreenButton.title=I}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},l.GeoJSONSource=Jn,l.GeolocateControl=class extends o.E{constructor(I){super(),this._onSuccess=s=>{if(this._map){if(this._isOutOfMapMaxBounds(s))return this._setErrorState(),this.fire(new o.l("outofmaxbounds",s)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=s,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(s),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(s),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.l("geolocate",s)),this._finish()}},this._updateCamera=s=>{const f=new o.S(s.coords.longitude,s.coords.latitude),_=s.coords.accuracy,w=this._map.getBearing(),k=o.e({bearing:w},this.options.fitBoundsOptions),N=vt.fromLngLat(f,_);this._map.fitBounds(N,k,{geolocateSource:!0})},this._updateMarker=s=>{if(s){const f=new o.S(s.coords.longitude,s.coords.latitude);this._accuracyCircleMarker.setLngLat(f).addTo(this._map),this._userLocationDotMarker.setLngLat(f).addTo(this._map),this._accuracy=s.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=s=>{if(this._map){if(s.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(s.code===3&&cA)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.l("error",s)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",s=>s.preventDefault()),this._geolocateButton=K.create("button","maplibregl-ctrl-geolocate",this._container),K.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=s=>{if(this._map){if(s===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}else{const f=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=K.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new kc({element:this._dotElement}),this._circleElement=K.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new kc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",f=>{const _=f?.[0]instanceof ResizeObserverEntry;f.geolocateSource||this._watchState!=="ACTIVE_LOCK"||_||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.l("trackuserlocationend")),this.fire(new o.l("userlocationlostfocus")))})}},this.options=o.e({},$s,I)}onAdd(I){return this._map=I,this._container=K.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return o._(this,arguments,void 0,function*(s=!1){if(Uo!==void 0&&!s)return Uo;if(window.navigator.permissions===void 0)return Uo=!!window.navigator.geolocation,Uo;try{Uo=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Uo=!!window.navigator.geolocation}return Uo})}().then(s=>this._finishSetupUI(s)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),K.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,es=0,cA=!1}_isOutOfMapMaxBounds(I){const s=this._map.getMaxBounds(),f=I.coords;return s&&(f.longitude<s.getWest()||f.longitude>s.getEast()||f.latitude<s.getSouth()||f.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const I=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&I))return;const s=this._map.project(I),f=this._map.unproject([s.x+100,s.y]),_=I.distanceTo(f)/100,w=2*this._accuracy/_;this._circleElement.style.width=`${w.toFixed(2)}px`,this._circleElement.style.height=`${w.toFixed(2)}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":es--,cA=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.l("trackuserlocationstart")),this.fire(new o.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let I;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),es++,es>1?(I={maximumAge:6e5,timeout:0},cA=!0):(I=this.options.positionOptions,cA=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,I)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},l.GlobeControl=class{constructor(){this._toggleProjection=()=>{var I;const s=(I=this._map.getProjection())===null||I===void 0?void 0:I.type;this._map.setProjection(s!=="mercator"&&s?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var I;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((I=this._map.getProjection())===null||I===void 0?void 0:I.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(I){return this._map=I,this._container=K.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=K.create("button","maplibregl-ctrl-globe",this._container),K.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){K.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},l.Hash=rt,l.ImageSource=Wt,l.KeyboardHandler=Gl,l.LngLatBounds=vt,l.LogoControl=Ko,l.Map=class extends Lf{constructor(I){var s,f;o.cw.mark(o.cx.create);const _=Object.assign(Object.assign(Object.assign({},Ql),I),{canvasContextAttributes:Object.assign(Object.assign({},Ql.canvasContextAttributes),I.canvasContextAttributes)});if(_.minZoom!=null&&_.maxZoom!=null&&_.minZoom>_.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(_.minPitch!=null&&_.maxPitch!=null&&_.minPitch>_.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(_.minPitch!=null&&_.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(_.maxPitch!=null&&_.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const w=new kr,k=new ya;if(_.minZoom!==void 0&&w.setMinZoom(_.minZoom),_.maxZoom!==void 0&&w.setMaxZoom(_.maxZoom),_.minPitch!==void 0&&w.setMinPitch(_.minPitch),_.maxPitch!==void 0&&w.setMaxPitch(_.maxPitch),_.renderWorldCopies!==void 0&&w.setRenderWorldCopies(_.renderWorldCopies),super(w,k,{bearingSnap:_.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Rr,this._controls=[],this._mapId=o.a7(),this._contextLost=q=>{q.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.l("webglcontextlost",{originalEvent:q}))},this._contextRestored=q=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.l("webglcontextrestored",{originalEvent:q}))},this._onMapScroll=q=>{if(q.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=_.interactive,this._maxTileCacheSize=_.maxTileCacheSize,this._maxTileCacheZoomLevels=_.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},_.canvasContextAttributes),this._trackResize=_.trackResize===!0,this._bearingSnap=_.bearingSnap,this._centerClampedToGround=_.centerClampedToGround,this._refreshExpiredTiles=_.refreshExpiredTiles===!0,this._fadeDuration=_.fadeDuration,this._crossSourceCollisions=_.crossSourceCollisions===!0,this._collectResourceTiming=_.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},sa),_.locale),this._clickTolerance=_.clickTolerance,this._overridePixelRatio=_.pixelRatio,this._maxCanvasSize=_.maxCanvasSize,this.transformCameraUpdate=_.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=_.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ne.addThrottleControl(()=>this.isMoving()),this._requestManager=new Z(_.transformRequest),typeof _.container=="string"){if(this._container=document.getElementById(_.container),!this._container)throw new Error(`Container '${_.container}' not found.`)}else{if(!(_.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=_.container}if(_.maxBounds&&this.setMaxBounds(_.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let q=!1;const J=eu(he=>{this._trackResize&&!this._removed&&(this.resize(he),this.redraw())},50);this._resizeObserver=new ResizeObserver(he=>{q?J(he):q=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Xh(this,_),this._hash=_.hash&&new rt(typeof _.hash=="string"&&_.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:_.center,elevation:_.elevation,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch,roll:_.roll}),_.bounds&&(this.resize(),this.fitBounds(_.bounds,o.e({},_.fitBoundsOptions,{duration:0}))));const N=typeof _.style=="string"||((f=(s=_.style)===null||s===void 0?void 0:s.projection)===null||f===void 0?void 0:f.type)!=="globe";this.resize(null,N),this._localIdeographFontFamily=_.localIdeographFontFamily,this._validateStyle=_.validateStyle,_.style&&this.setStyle(_.style,{localIdeographFontFamily:_.localIdeographFontFamily}),_.attributionControl&&this.addControl(new no(typeof _.attributionControl=="boolean"?void 0:_.attributionControl)),_.maplibreLogo&&this.addControl(new Ko,_.logoPosition),this.on("style.load",()=>{if(N||this._resizeTransform(),this.transform.unmodified){const q=o.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(q)}}),this.on("data",q=>{this._update(q.dataType==="style"),this.fire(new o.l(`${q.dataType}data`,q))}),this.on("dataloading",q=>{this.fire(new o.l(`${q.dataType}dataloading`,q))}),this.on("dataabort",q=>{this.fire(new o.l("sourcedataabort",q))})}_getMapId(){return this._mapId}setGlobalStateProperty(I,s){return this.style.setGlobalStateProperty(I,s),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(I,s){if(s===void 0&&(s=I.getDefaultPosition?I.getDefaultPosition():"top-right"),!I||!I.onAdd)return this.fire(new o.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const f=I.onAdd(this);this._controls.push(I);const _=this._controlPositions[s];return s.indexOf("bottom")!==-1?_.insertBefore(f,_.firstChild):_.appendChild(f),this}removeControl(I){if(!I||!I.onRemove)return this.fire(new o.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const s=this._controls.indexOf(I);return s>-1&&this._controls.splice(s,1),I.onRemove(this),this}hasControl(I){return this._controls.indexOf(I)>-1}coveringTiles(I){return it(this.transform,I)}calculateCameraOptionsFromTo(I,s,f,_){return _==null&&this.terrain&&(_=this.terrain.getElevationForLngLatZoom(f,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(I,s,f,_)}resize(I,s=!0){const[f,_]=this._containerDimensions(),w=this._getClampedPixelRatio(f,_);if(this._resizeCanvas(f,_,w),this.painter.resize(f,_,w),this.painter.overLimit()){const N=this.painter.context.gl;this._maxCanvasSize=[N.drawingBufferWidth,N.drawingBufferHeight];const q=this._getClampedPixelRatio(f,_);this._resizeCanvas(f,_,q),this.painter.resize(f,_,q)}this._resizeTransform(s);const k=!this._moving;return k&&(this.stop(),this.fire(new o.l("movestart",I)).fire(new o.l("move",I))),this.fire(new o.l("resize",I)),k&&this.fire(new o.l("moveend",I)),this}_resizeTransform(I=!0){var s;const[f,_]=this._containerDimensions();this.transform.resize(f,_,I),(s=this._requestedCameraState)===null||s===void 0||s.resize(f,_,I)}_getClampedPixelRatio(I,s){const{0:f,1:_}=this._maxCanvasSize,w=this.getPixelRatio(),k=I*w,N=s*w;return Math.min(k>f?f/k:1,N>_?_/N:1)*w}getPixelRatio(){var I;return(I=this._overridePixelRatio)!==null&&I!==void 0?I:devicePixelRatio}setPixelRatio(I){this._overridePixelRatio=I,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(I){return this.transform.setMaxBounds(vt.convert(I)),this._update()}setMinZoom(I){if((I=I??-2)>=-2&&I<=this.transform.maxZoom)return this.transform.setMinZoom(I),this._update(),this.getZoom()<I&&this.setZoom(I),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(I){if((I=I??22)>=this.transform.minZoom)return this.transform.setMaxZoom(I),this._update(),this.getZoom()>I&&this.setZoom(I),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(I){if((I=I??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(I>=0&&I<=this.transform.maxPitch)return this.transform.setMinPitch(I),this._update(),this.getPitch()<I&&this.setPitch(I),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(I){if((I=I??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(I>=this.transform.minPitch)return this.transform.setMaxPitch(I),this._update(),this.getPitch()>I&&this.setPitch(I),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(I){return this.transform.setRenderWorldCopies(I),this._update()}project(I){return this.transform.locationToScreenPoint(o.S.convert(I),this.style&&this.terrain)}unproject(I){return this.transform.screenPointToLocation(o.P.convert(I),this.terrain)}isMoving(){var I;return this._moving||((I=this.handlers)===null||I===void 0?void 0:I.isMoving())}isZooming(){var I;return this._zooming||((I=this.handlers)===null||I===void 0?void 0:I.isZooming())}isRotating(){var I;return this._rotating||((I=this.handlers)===null||I===void 0?void 0:I.isRotating())}_createDelegatedListener(I,s,f){if(I==="mouseenter"||I==="mouseover"){let _=!1;return{layers:s,listener:f,delegates:{mousemove:k=>{const N=s.filter(J=>this.getLayer(J)),q=N.length!==0?this.queryRenderedFeatures(k.point,{layers:N}):[];q.length?_||(_=!0,f.call(this,new TA(I,this,k.originalEvent,{features:q}))):_=!1},mouseout:()=>{_=!1}}}}if(I==="mouseleave"||I==="mouseout"){let _=!1;return{layers:s,listener:f,delegates:{mousemove:N=>{const q=s.filter(J=>this.getLayer(J));(q.length!==0?this.queryRenderedFeatures(N.point,{layers:q}):[]).length?_=!0:_&&(_=!1,f.call(this,new TA(I,this,N.originalEvent)))},mouseout:N=>{_&&(_=!1,f.call(this,new TA(I,this,N.originalEvent)))}}}}{const _=w=>{const k=s.filter(q=>this.getLayer(q)),N=k.length!==0?this.queryRenderedFeatures(w.point,{layers:k}):[];N.length&&(w.features=N,f.call(this,w),delete w.features)};return{layers:s,listener:f,delegates:{[I]:_}}}}_saveDelegatedListener(I,s){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[I]=this._delegatedListeners[I]||[],this._delegatedListeners[I].push(s)}_removeDelegatedListener(I,s,f){if(!this._delegatedListeners||!this._delegatedListeners[I])return;const _=this._delegatedListeners[I];for(let w=0;w<_.length;w++){const k=_[w];if(k.listener===f&&k.layers.length===s.length&&k.layers.every(N=>s.includes(N))){for(const N in k.delegates)this.off(N,k.delegates[N]);return void _.splice(w,1)}}}on(I,s,f){if(f===void 0)return super.on(I,s);const _=typeof s=="string"?[s]:s,w=this._createDelegatedListener(I,_,f);this._saveDelegatedListener(I,w);for(const k in w.delegates)this.on(k,w.delegates[k]);return{unsubscribe:()=>{this._removeDelegatedListener(I,_,f)}}}once(I,s,f){if(f===void 0)return super.once(I,s);const _=typeof s=="string"?[s]:s,w=this._createDelegatedListener(I,_,f);for(const k in w.delegates){const N=w.delegates[k];w.delegates[k]=(...q)=>{this._removeDelegatedListener(I,_,f),N(...q)}}this._saveDelegatedListener(I,w);for(const k in w.delegates)this.once(k,w.delegates[k]);return this}off(I,s,f){return f===void 0?super.off(I,s):(this._removeDelegatedListener(I,typeof s=="string"?[s]:s,f),this)}queryRenderedFeatures(I,s){if(!this.style)return[];let f;const _=I instanceof o.P||Array.isArray(I),w=_?I:[[0,0],[this.transform.width,this.transform.height]];if(s=s||(_?{}:I)||{},w instanceof o.P||typeof w[0]=="number")f=[o.P.convert(w)];else{const k=o.P.convert(w[0]),N=o.P.convert(w[1]);f=[k,new o.P(N.x,k.y),N,new o.P(k.x,N.y),k]}return this.style.queryRenderedFeatures(f,s,this.transform)}querySourceFeatures(I,s){return this.style.querySourceFeatures(I,s)}setStyle(I,s){return(s=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&I?(this._diffStyle(I,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._updateStyle(I,s))}setTransformRequest(I){return this._requestManager.setTransformRequest(I),this}_getUIString(I){const s=this._locale[I];if(s==null)throw new Error(`Missing UI string '${I}'`);return s}_updateStyle(I,s){var f,_;if(s.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(I,s));const w=this.style&&s.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!I)),I?(this.style=new gh(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof I=="string"?this.style.loadURL(I,s,w):this.style.loadJSON(I,s,w),this):((_=(f=this.style)===null||f===void 0?void 0:f.projection)===null||_===void 0||_.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new gh(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(I,s){if(typeof I=="string"){const f=this._requestManager.transformRequest(I,"Style");o.j(f,new AbortController).then(_=>{this._updateDiff(_.data,s)}).catch(_=>{_&&this.fire(new o.k(_))})}else typeof I=="object"&&this._updateDiff(I,s)}_updateDiff(I,s){try{this.style.setState(I,s)&&this._update(!0)}catch(f){o.w(`Unable to perform style diff: ${f.message||f.error||f}.  Rebuilding the style from scratch.`),this._updateStyle(I,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(I,s){return this._lazyInitEmptyStyle(),this.style.addSource(I,s),this._update(!0)}isSourceLoaded(I){const s=this.style&&this.style.sourceCaches[I];if(s!==void 0)return s.loaded();this.fire(new o.k(new Error(`There is no source with ID '${I}'`)))}setTerrain(I){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),I){const s=this.style.sourceCaches[I.source];if(!s)throw new Error(`cannot load terrain, because there exists no source with ID: ${I.source}`);this.terrain===null&&s.reload();for(const f in this.style._layers){const _=this.style._layers[f];_.type==="hillshade"&&_.source===I.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),_.type==="color-relief"&&_.source===I.source&&o.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Ti(this.painter,s,I),this.painter.renderToTexture=new uA(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=f=>{var _;f.dataType==="style"?this.terrain.sourceCache.freeRtt():f.dataType==="source"&&f.tile&&(f.sourceId!==I.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((_=f.source)===null||_===void 0?void 0:_.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(f.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.l("terrain",{terrain:I})),this}getTerrain(){var I,s;return(s=(I=this.terrain)===null||I===void 0?void 0:I.options)!==null&&s!==void 0?s:null}areTilesLoaded(){const I=this.style&&this.style.sourceCaches;for(const s in I){const f=I[s]._tiles;for(const _ in f){const w=f[_];if(w.state!=="loaded"&&w.state!=="errored")return!1}}return!0}removeSource(I){return this.style.removeSource(I),this._update(!0)}getSource(I){return this.style.getSource(I)}setSourceTileLodParams(I,s,f){if(f){const _=this.getSource(f);if(!_)throw new Error(`There is no source with ID "${f}", cannot set LOD parameters`);_.calculateTileZoom=gt(Math.max(1,I),Math.max(1,s))}else for(const _ in this.style.sourceCaches)this.style.sourceCaches[_].getSource().calculateTileZoom=gt(Math.max(1,I),Math.max(1,s));return this._update(!0),this}refreshTiles(I,s){const f=this.style.sourceCaches[I];if(!f)throw new Error(`There is no source cache with ID "${I}", cannot refresh tile`);s===void 0?f.reload(!0):f.refreshTiles(s.map(_=>new o.a4(_.z,_.x,_.y)))}addImage(I,s,f={}){const{pixelRatio:_=1,sdf:w=!1,stretchX:k,stretchY:N,content:q,textFitWidth:J,textFitHeight:he}=f;if(this._lazyInitEmptyStyle(),!(s instanceof HTMLImageElement||o.b(s))){if(s.width===void 0||s.height===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:pe,height:Ee,data:Se}=s,Ue=s;return this.style.addImage(I,{data:new o.R({width:pe,height:Ee},new Uint8Array(Se)),pixelRatio:_,stretchX:k,stretchY:N,content:q,textFitWidth:J,textFitHeight:he,sdf:w,version:0,userImage:Ue}),Ue.onAdd&&Ue.onAdd(this,I),this}}{const{width:pe,height:Ee,data:Se}=U.getImageData(s);this.style.addImage(I,{data:new o.R({width:pe,height:Ee},Se),pixelRatio:_,stretchX:k,stretchY:N,content:q,textFitWidth:J,textFitHeight:he,sdf:w,version:0})}}updateImage(I,s){const f=this.style.getImage(I);if(!f)return this.fire(new o.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const _=s instanceof HTMLImageElement||o.b(s)?U.getImageData(s):s,{width:w,height:k,data:N}=_;if(w===void 0||k===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(w!==f.data.width||k!==f.data.height)return this.fire(new o.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const q=!(s instanceof HTMLImageElement||o.b(s));return f.data.replace(N,q),this.style.updateImage(I,f),this}getImage(I){return this.style.getImage(I)}hasImage(I){return I?!!this.style.getImage(I):(this.fire(new o.k(new Error("Missing required image id"))),!1)}removeImage(I){this.style.removeImage(I)}loadImage(I){return ne.getImage(this._requestManager.transformRequest(I,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(I,s){return this._lazyInitEmptyStyle(),this.style.addLayer(I,s),this._update(!0)}moveLayer(I,s){return this.style.moveLayer(I,s),this._update(!0)}removeLayer(I){return this.style.removeLayer(I),this._update(!0)}getLayer(I){return this.style.getLayer(I)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(I,s,f){return this.style.setLayerZoomRange(I,s,f),this._update(!0)}setFilter(I,s,f={}){return this.style.setFilter(I,s,f),this._update(!0)}getFilter(I){return this.style.getFilter(I)}setPaintProperty(I,s,f,_={}){return this.style.setPaintProperty(I,s,f,_),this._update(!0)}getPaintProperty(I,s){return this.style.getPaintProperty(I,s)}setLayoutProperty(I,s,f,_={}){return this.style.setLayoutProperty(I,s,f,_),this._update(!0)}getLayoutProperty(I,s){return this.style.getLayoutProperty(I,s)}setGlyphs(I,s={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(I,s),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(I,s,f={}){return this._lazyInitEmptyStyle(),this.style.addSprite(I,s,f,_=>{_||this._update(!0)}),this}removeSprite(I){return this._lazyInitEmptyStyle(),this.style.removeSprite(I),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(I,s={}){return this._lazyInitEmptyStyle(),this.style.setSprite(I,s,f=>{f||this._update(!0)}),this}setLight(I,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(I,s),this._update(!0)}getLight(){return this.style.getLight()}setSky(I,s={}){return this._lazyInitEmptyStyle(),this.style.setSky(I,s),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(I,s){return this.style.setFeatureState(I,s),this._update()}removeFeatureState(I,s){return this.style.removeFeatureState(I,s),this._update()}getFeatureState(I){return this.style.getFeatureState(I)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let I=0,s=0;return this._container&&(I=this._container.clientWidth||400,s=this._container.clientHeight||300),[I,s]}_setupContainer(){const I=this._container;I.classList.add("maplibregl-map");const s=this._canvasContainer=K.create("div","maplibregl-canvas-container",I);this._interactive&&s.classList.add("maplibregl-interactive"),this._canvas=K.create("canvas","maplibregl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const f=this._containerDimensions(),_=this._getClampedPixelRatio(f[0],f[1]);this._resizeCanvas(f[0],f[1],_);const w=this._controlContainer=K.create("div","maplibregl-control-container",I),k=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(N=>{k[N]=K.create("div",`maplibregl-ctrl-${N} `,w)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(I,s,f){this._canvas.width=Math.floor(f*I),this._canvas.height=Math.floor(f*s),this._canvas.style.width=`${I}px`,this._canvas.style.height=`${s}px`}_setupPainter(){const I=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let s=null;this._canvas.addEventListener("webglcontextcreationerror",_=>{s={requestedAttributes:I},_&&(s.statusMessage=_.statusMessage,s.type=_.type)},{once:!0});let f=null;if(f=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,I):this._canvas.getContext("webgl2",I)||this._canvas.getContext("webgl",I),!f){const _="Failed to initialize WebGL";throw s?(s.message=_,new Error(JSON.stringify(s))):new Error(_)}this.painter=new Mh(f,this.transform),z.testSupport(f)}migrateProjection(I,s){super.migrateProjection(I,s),this.painter.transform=I,this.fire(new o.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(I){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||I,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(I){return this._update(),this._renderTaskQueue.add(I)}_cancelRenderFrame(I){this._renderTaskQueue.remove(I)}_render(I){var s,f,_,w,k;const N=this._idleTriggered?this._fadeDuration:0,q=((s=this.style.projection)===null||s===void 0?void 0:s.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(I),this._removed)return;let J=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const Ee=this.transform.zoom,Se=U.now();this.style.zoomHistory.update(Ee,Se);const Ue=new o.F(Ee,{now:Se,fadeDuration:N,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),Xe=Ue.crossFadingFactor();Xe===1&&Xe===this._crossFadingFactor||(J=!0,this._crossFadingFactor=Xe),this.style.update(Ue)}const he=((f=this.style.projection)===null||f===void 0?void 0:f.transitionState)>0!==q;(_=this.style.projection)===null||_===void 0||_.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((w=this.style.projection)===null||w===void 0?void 0:w.transitionState,(k=this.style.projection)===null||k===void 0?void 0:k.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||he)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,N,this._crossSourceCollisions,he),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:N,showPadding:this.showPadding}),this.fire(new o.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cw.mark(o.cx.load),this.fire(new o.l("load"))),this.style&&(this.style.hasTransitions()||J)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const pe=this._sourcesDirty||this._styleDirty||this._placementDirty;return pe||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.l("idle")),!this._loaded||this._fullyLoaded||pe||(this._fullyLoaded=!0,o.cw.mark(o.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var I;this._hash&&this._hash.remove();for(const f of this._controls)f.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ne.removeThrottleControl(this._imageQueueHandle),(I=this._resizeObserver)===null||I===void 0||I.disconnect();const s=this.painter.context.gl.getExtension("WEBGL_lose_context");s?.loseContext&&s.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),K.remove(this._canvasContainer),K.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),o.cw.clearMetrics(),this._removed=!0,this.fire(new o.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,U.frame(this._frameRequest,I=>{o.cw.frame(I),this._frameRequest=null;try{this._render(I)}catch(s){if(!o.cy(s)&&!function(f){return f.message===sc}(s))throw s}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(I){this._showTileBoundaries!==I&&(this._showTileBoundaries=I,this._update())}get showPadding(){return!!this._showPadding}set showPadding(I){this._showPadding!==I&&(this._showPadding=I,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(I){this._showCollisionBoxes!==I&&(this._showCollisionBoxes=I,I?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(I){this._showOverdrawInspector!==I&&(this._showOverdrawInspector=I,this._update())}get repaint(){return!!this._repaint}set repaint(I){this._repaint!==I&&(this._repaint=I,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(I){this._vertices=I,this._update()}get version(){return go}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(I){return this._lazyInitEmptyStyle(),this.style.setProjection(I),this._update(!0)}},l.MapMouseEvent=TA,l.MapTouchEvent=Od,l.MapWheelEvent=Jd,l.Marker=kc,l.NavigationControl=class{constructor(I){this._updateZoomButtons=()=>{const s=this._map.getZoom(),f=s===this._map.getMaxZoom(),_=s===this._map.getMinZoom();this._zoomInButton.disabled=f,this._zoomOutButton.disabled=_,this._zoomInButton.setAttribute("aria-disabled",f.toString()),this._zoomOutButton.setAttribute("aria-disabled",_.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(s,f)=>{const _=this._map._getUIString(`NavigationControl.${f}`);s.title=_,s.setAttribute("aria-label",_)},this.options=o.e({},Ff,I),this._container=K.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",s=>this._map.zoomIn({},{originalEvent:s})),K.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",s=>this._map.zoomOut({},{originalEvent:s})),K.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",s=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:s}):this._map.resetNorth({},{originalEvent:s})}),this._compassIcon=K.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(I){return this._map=I,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Jh(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){K.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(I,s){const f=K.create("button",I,this._container);return f.type="button",f.addEventListener("click",s),f}},l.Popup=class extends o.E{constructor(I){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&K.remove(this._content),this._container&&(K.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.l("close"))),this),this._onMouseUp=s=>{this._update(s.point)},this._onMouseMove=s=>{this._update(s.point)},this._onDrag=s=>{this._update(s.point)},this._update=s=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=K.create("div","maplibregl-popup",this._map.getContainer()),this._tip=K.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const N of this.options.className.split(" "))this._container.classList.add(N);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=ja(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!s)return;const f=this._flatPos=this._pos=this._trackPointer&&s?s:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&s?s:this._map.transform.locationToScreenPoint(this._lngLat));let _=this.options.anchor;const w=nd(this.options.offset);if(!_){const N=this._container.offsetWidth,q=this._container.offsetHeight;let J;J=f.y+w.bottom.y<q?["top"]:f.y>this._map.transform.height-q?["bottom"]:[],f.x<N/2?J.push("left"):f.x>this._map.transform.width-N/2&&J.push("right"),_=J.length===0?"bottom":J.join("-")}let k=f.add(w[_]);this.options.subpixelPositioning||(k=k.round()),K.setTransform(this._container,`${ed[_]} translate(${k.x}px,${k.y}px)`),Cu(this._container,_,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(Yl),I)}addTo(I){return this._map&&this.remove(),this._map=I,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(I){return this._lngLat=o.S.convert(I),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(I){return this.setDOMContent(document.createTextNode(I))}setHTML(I){const s=document.createDocumentFragment(),f=document.createElement("body");let _;for(f.innerHTML=I;_=f.firstChild,_;)s.appendChild(_);return this.setDOMContent(s)}getMaxWidth(){var I;return(I=this._container)===null||I===void 0?void 0:I.style.maxWidth}setMaxWidth(I){return this.options.maxWidth=I,this._update(),this}setDOMContent(I){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=K.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(I),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(I){return this._container&&this._container.classList.add(I),this}removeClassName(I){return this._container&&this._container.classList.remove(I),this}setOffset(I){return this.options.offset=I,this._update(),this}toggleClassName(I){if(this._container)return this._container.classList.toggle(I)}setSubpixelPositioning(I){this.options.subpixelPositioning=I}_createCloseButton(){this.options.closeButton&&(this._closeButton=K.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const I=this._container.querySelector(td);I&&I.focus()}},l.RasterDEMTileSource=on,l.RasterTileSource=Kt,l.ScaleControl=class{constructor(I){this._onMove=()=>{uc(this._map,this._container,this.options)},this.setUnit=s=>{this.options.unit=s,uc(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Dc),I)}getDefaultPosition(){return"bottom-left"}onAdd(I){return this._map=I,this._container=K.create("div","maplibregl-ctrl maplibregl-ctrl-scale",I.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){K.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},l.ScrollZoomHandler=Ac,l.Style=gh,l.TerrainControl=class{constructor(I){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=I}onAdd(I){return this._map=I,this._container=K.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=K.create("button","maplibregl-ctrl-terrain",this._container),K.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){K.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},l.TwoFingersTouchPitchHandler=nf,l.TwoFingersTouchRotateHandler=Ic,l.TwoFingersTouchZoomHandler=ju,l.TwoFingersTouchZoomRotateHandler=Em,l.VectorTileSource=qt,l.VideoSource=$n,l.addSourceType=(I,s)=>o._(void 0,void 0,void 0,function*(){if(In(I))throw new Error(`A source type called "${I}" already exists.`);((f,_)=>{Bn[f]=_})(I,s)}),l.clearPrewarmedResources=function(){const I=lt;I&&(I.isPreloaded()&&I.numActive()===1?(I.release(be),lt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},l.createTileMesh=Xn,l.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},l.getRTLTextPluginStatus=function(){return Ge().getRTLTextPluginStatus()},l.getVersion=function(){return Td},l.getWorkerCount=function(){return Ne.workerCount},l.getWorkerUrl=function(){return o.a.WORKER_URL},l.importScriptInWorkers=function(I){return Rt().broadcast("IS",I)},l.prewarm=function(){pt().acquire(be)},l.setMaxParallelImageRequests=function(I){o.a.MAX_PARALLEL_IMAGE_REQUESTS=I},l.setRTLTextPlugin=function(I,s){return Ge().setRTLTextPlugin(I,s)},l.setWorkerCount=function(I){Ne.workerCount=I},l.setWorkerUrl=function(I){o.a.WORKER_URL=I}});var a=t;return a})}(xx)),xx.exports}var CV=vV();const rv=WA(CV);var Ub=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function tF(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var BC={exports:{}};BC.exports;var SI;function _V(){return SI||(SI=1,function(n,e){var t=200,i="__lodash_hash_undefined__",r=1,a=2,l=9007199254740991,o="[object Arguments]",m="[object Array]",C="[object AsyncFunction]",S="[object Boolean]",O="[object Date]",U="[object Error]",K="[object Function]",z="[object GeneratorFunction]",j="[object Map]",Q="[object Number]",ee="[object Null]",V="[object Object]",ae="[object Promise]",ne="[object Proxy]",Z="[object RegExp]",oe="[object Set]",W="[object String]",ue="[object Symbol]",ge="[object Undefined]",ye="[object WeakMap]",Me="[object ArrayBuffer]",Be="[object DataView]",we="[object Float32Array]",qe="[object Float64Array]",xe="[object Int8Array]",ze="[object Int16Array]",ot="[object Int32Array]",yt="[object Uint8Array]",nt="[object Uint8ClampedArray]",be="[object Uint16Array]",Ne="[object Uint32Array]",tt=/[\\^$.*+?()[\]{}|]/g,lt=/^\[object .+?Constructor\]$/,It=/^(?:0|[1-9]\d*)$/,pt={};pt[we]=pt[qe]=pt[xe]=pt[ze]=pt[ot]=pt[yt]=pt[nt]=pt[be]=pt[Ne]=!0,pt[o]=pt[m]=pt[Me]=pt[S]=pt[Be]=pt[O]=pt[U]=pt[K]=pt[j]=pt[Q]=pt[V]=pt[Z]=pt[oe]=pt[W]=pt[ye]=!1;var St=typeof Ub=="object"&&Ub&&Ub.Object===Object&&Ub,Rt=typeof self=="object"&&self&&self.Object===Object&&self,Le=St||Rt||Function("return this")(),Pe=e&&!e.nodeType&&e,Re=Pe&&!0&&n&&!n.nodeType&&n,He=Re&&Re.exports===Pe,bt=He&&St.process,vt=function(){try{return bt&&bt.binding&&bt.binding("util")}catch{}}(),Ot=vt&&vt.isTypedArray;function qt(te,Oe){for(var st=-1,jt=te==null?0:te.length,Si=0,Xn=[];++st<jt;){var $i=te[st];Oe($i,st,te)&&(Xn[Si++]=$i)}return Xn}function Kt(te,Oe){for(var st=-1,jt=Oe.length,Si=te.length;++st<jt;)te[Si+st]=Oe[st];return te}function on(te,Oe){for(var st=-1,jt=te==null?0:te.length;++st<jt;)if(Oe(te[st],st,te))return!0;return!1}function Jn(te,Oe){for(var st=-1,jt=Array(te);++st<te;)jt[st]=Oe(st);return jt}function Wt(te){return function(Oe){return te(Oe)}}function $n(te,Oe){return te.has(Oe)}function On(te,Oe){return te?.[Oe]}function Bn(te){var Oe=-1,st=Array(te.size);return te.forEach(function(jt,Si){st[++Oe]=[Si,jt]}),st}function In(te,Oe){return function(st){return te(Oe(st))}}function Bi(te){var Oe=-1,st=Array(te.size);return te.forEach(function(jt){st[++Oe]=jt}),st}var ei=Array.prototype,Kn=Function.prototype,Ge=Object.prototype,de=Le["__core-js_shared__"],re=Kn.toString,le=Ge.hasOwnProperty,me=function(){var te=/[^.]+$/.exec(de&&de.keys&&de.keys.IE_PROTO||"");return te?"Symbol(src)_1."+te:""}(),Te=Ge.toString,We=RegExp("^"+re.call(le).replace(tt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),dt=He?Le.Buffer:void 0,Ye=Le.Symbol,De=Le.Uint8Array,Ze=Ge.propertyIsEnumerable,g=ei.splice,gt=Ye?Ye.toStringTag:void 0,ht=Object.getOwnPropertySymbols,kt=dt?dt.isBuffer:void 0,it=In(Object.keys,Object),en=ko(Le,"DataView"),Dn=ko(Le,"Map"),Mn=ko(Le,"Promise"),ii=ko(Le,"Set"),Wn=ko(Le,"WeakMap"),qi=ko(Object,"create"),er=No(en),wi=No(Dn),hi=No(Mn),ti=No(ii),Wi=No(Wn),Sn=Ye?Ye.prototype:void 0,lo=Sn?Sn.valueOf:void 0;function Hi(te){var Oe=-1,st=te==null?0:te.length;for(this.clear();++Oe<st;){var jt=te[Oe];this.set(jt[0],jt[1])}}function pa(){this.__data__=qi?qi(null):{},this.size=0}function To(te){var Oe=this.has(te)&&delete this.__data__[te];return this.size-=Oe?1:0,Oe}function Zn(te){var Oe=this.__data__;if(qi){var st=Oe[te];return st===i?void 0:st}return le.call(Oe,te)?Oe[te]:void 0}function lr(te){var Oe=this.__data__;return qi?Oe[te]!==void 0:le.call(Oe,te)}function zi(te,Oe){var st=this.__data__;return this.size+=this.has(te)?0:1,st[te]=qi&&Oe===void 0?i:Oe,this}Hi.prototype.clear=pa,Hi.prototype.delete=To,Hi.prototype.get=Zn,Hi.prototype.has=lr,Hi.prototype.set=zi;function vr(te){var Oe=-1,st=te==null?0:te.length;for(this.clear();++Oe<st;){var jt=te[Oe];this.set(jt[0],jt[1])}}function La(){this.__data__=[],this.size=0}function Ir(te){var Oe=this.__data__,st=si(Oe,te);if(st<0)return!1;var jt=Oe.length-1;return st==jt?Oe.pop():g.call(Oe,st,1),--this.size,!0}function Ni(te){var Oe=this.__data__,st=si(Oe,te);return st<0?void 0:Oe[st][1]}function gl(te){return si(this.__data__,te)>-1}function Ta(te,Oe){var st=this.__data__,jt=si(st,te);return jt<0?(++this.size,st.push([te,Oe])):st[jt][1]=Oe,this}vr.prototype.clear=La,vr.prototype.delete=Ir,vr.prototype.get=Ni,vr.prototype.has=gl,vr.prototype.set=Ta;function So(te){var Oe=-1,st=te==null?0:te.length;for(this.clear();++Oe<st;){var jt=te[Oe];this.set(jt[0],jt[1])}}function $a(){this.size=0,this.__data__={hash:new Hi,map:new(Dn||vr),string:new Hi}}function Ol(te){var Oe=$o(this,te).delete(te);return this.size-=Oe?1:0,Oe}function Ao(te){return $o(this,te).get(te)}function QA(te){return $o(this,te).has(te)}function ka(te,Oe){var st=$o(this,te),jt=st.size;return st.set(te,Oe),this.size+=st.size==jt?0:1,this}So.prototype.clear=$a,So.prototype.delete=Ol,So.prototype.get=Ao,So.prototype.has=QA,So.prototype.set=ka;function Vi(te){var Oe=-1,st=te==null?0:te.length;for(this.__data__=new So;++Oe<st;)this.add(te[Oe])}function xi(te){return this.__data__.set(te,i),this}function ls(te){return this.__data__.has(te)}Vi.prototype.add=Vi.prototype.push=xi,Vi.prototype.has=ls;function Ma(te){var Oe=this.__data__=new vr(te);this.size=Oe.size}function Vo(){this.__data__=new vr,this.size=0}function $e(te){var Oe=this.__data__,st=Oe.delete(te);return this.size=Oe.size,st}function Et(te){return this.__data__.get(te)}function xn(te){return this.__data__.has(te)}function jn(te,Oe){var st=this.__data__;if(st instanceof vr){var jt=st.__data__;if(!Dn||jt.length<t-1)return jt.push([te,Oe]),this.size=++st.size,this;st=this.__data__=new So(jt)}return st.set(te,Oe),this.size=st.size,this}Ma.prototype.clear=Vo,Ma.prototype.delete=$e,Ma.prototype.get=Et,Ma.prototype.has=xn,Ma.prototype.set=jn;function rn(te,Oe){var st=Sa(te),jt=!st&&Fa(te),Si=!st&&!jt&&kr(te),Xn=!st&&!jt&&!Si&&vl(te),$i=st||jt||Si||Xn,or=$i?Jn(te.length,String):[],Di=or.length;for(var Xi in te)le.call(te,Xi)&&!($i&&(Xi=="length"||Si&&(Xi=="offset"||Xi=="parent")||Xn&&(Xi=="buffer"||Xi=="byteLength"||Xi=="byteOffset")||Ul(Xi,Di)))&&or.push(Xi);return or}function si(te,Oe){for(var st=te.length;st--;)if(Eo(te[st][0],Oe))return st;return-1}function Jr(te,Oe,st){var jt=Oe(te);return Sa(te)?jt:Kt(jt,st(te))}function wo(te){return te==null?te===void 0?ge:ee:gt&&gt in Object(te)?dr(te):cu(te)}function As(te){return Dr(te)&&wo(te)==o}function Us(te,Oe,st,jt,Si){return te===Oe?!0:te==null||Oe==null||!Dr(te)&&!Dr(Oe)?te!==te&&Oe!==Oe:YA(te,Oe,st,jt,Us,Si)}function YA(te,Oe,st,jt,Si,Xn){var $i=Sa(te),or=Sa(Oe),Di=$i?m:ga(te),Xi=or?m:ga(Oe);Di=Di==o?V:Di,Xi=Xi==o?V:Xi;var eo=Di==V,uo=Xi==V,ur=Di==Xi;if(ur&&kr(te)){if(!kr(Oe))return!1;$i=!0,eo=!1}if(ur&&!eo)return Xn||(Xn=new Ma),$i||vl(te)?yl(te,Oe,st,jt,Si,Xn):Ss(te,Oe,Di,st,jt,Si,Xn);if(!(st&r)){var pr=eo&&le.call(te,"__wrapped__"),co=uo&&le.call(Oe,"__wrapped__");if(pr||co){var Go=pr?te.value():te,zr=co?Oe.value():Oe;return Xn||(Xn=new Ma),Si(Go,zr,st,jt,Xn)}}return ur?(Xn||(Xn=new Ma),bc(te,Oe,st,jt,Si,Xn)):!1}function Qi(te){if(!ya(te)||br(te))return!1;var Oe=za(te)?We:lt;return Oe.test(No(te))}function Du(te){return Dr(te)&&Za(te.length)&&!!pt[wo(te)]}function _A(te){if(!iA(te))return it(te);var Oe=[];for(var st in Object(te))le.call(te,st)&&st!="constructor"&&Oe.push(st);return Oe}function yl(te,Oe,st,jt,Si,Xn){var $i=st&r,or=te.length,Di=Oe.length;if(or!=Di&&!($i&&Di>or))return!1;var Xi=Xn.get(te);if(Xi&&Xn.get(Oe))return Xi==Oe;var eo=-1,uo=!0,ur=st&a?new Vi:void 0;for(Xn.set(te,Oe),Xn.set(Oe,te);++eo<or;){var pr=te[eo],co=Oe[eo];if(jt)var Go=$i?jt(co,pr,eo,Oe,te,Xn):jt(pr,co,eo,te,Oe,Xn);if(Go!==void 0){if(Go)continue;uo=!1;break}if(ur){if(!on(Oe,function(zr,Ys){if(!$n(ur,Ys)&&(pr===zr||Si(pr,zr,st,jt,Xn)))return ur.push(Ys)})){uo=!1;break}}else if(!(pr===co||Si(pr,co,st,jt,Xn))){uo=!1;break}}return Xn.delete(te),Xn.delete(Oe),uo}function Ss(te,Oe,st,jt,Si,Xn,$i){switch(st){case Be:if(te.byteLength!=Oe.byteLength||te.byteOffset!=Oe.byteOffset)return!1;te=te.buffer,Oe=Oe.buffer;case Me:return!(te.byteLength!=Oe.byteLength||!Xn(new De(te),new De(Oe)));case S:case O:case Q:return Eo(+te,+Oe);case U:return te.name==Oe.name&&te.message==Oe.message;case Z:case W:return te==Oe+"";case j:var or=Bn;case oe:var Di=jt&r;if(or||(or=Bi),te.size!=Oe.size&&!Di)return!1;var Xi=$i.get(te);if(Xi)return Xi==Oe;jt|=a,$i.set(te,Oe);var eo=yl(or(te),or(Oe),jt,Si,Xn,$i);return $i.delete(te),eo;case ue:if(lo)return lo.call(te)==lo.call(Oe)}return!1}function bc(te,Oe,st,jt,Si,Xn){var $i=st&r,or=Qs(te),Di=or.length,Xi=Qs(Oe),eo=Xi.length;if(Di!=eo&&!$i)return!1;for(var uo=Di;uo--;){var ur=or[uo];if(!($i?ur in Oe:le.call(Oe,ur)))return!1}var pr=Xn.get(te);if(pr&&Xn.get(Oe))return pr==Oe;var co=!0;Xn.set(te,Oe),Xn.set(Oe,te);for(var Go=$i;++uo<Di;){ur=or[uo];var zr=te[ur],Ys=Oe[ur];if(jt)var Ll=$i?jt(Ys,zr,ur,Oe,te,Xn):jt(zr,Ys,ur,te,Oe,Xn);if(!(Ll===void 0?zr===Ys||Si(zr,Ys,st,jt,Xn):Ll)){co=!1;break}Go||(Go=ur=="constructor")}if(co&&!Go){var qA=te.constructor,fs=Oe.constructor;qA!=fs&&"constructor"in te&&"constructor"in Oe&&!(typeof qA=="function"&&qA instanceof qA&&typeof fs=="function"&&fs instanceof fs)&&(co=!1)}return Xn.delete(te),Xn.delete(Oe),co}function Qs(te){return Jr(te,Zi,Kl)}function $o(te,Oe){var st=te.__data__;return bA(Oe)?st[typeof Oe=="string"?"string":"hash"]:st.map}function ko(te,Oe){var st=On(te,Oe);return Qi(st)?st:void 0}function dr(te){var Oe=le.call(te,gt),st=te[gt];try{te[gt]=void 0;var jt=!0}catch{}var Si=Te.call(te);return jt&&(Oe?te[gt]=st:delete te[gt]),Si}var Kl=ht?function(te){return te==null?[]:(te=Object(te),qt(ht(te),function(Oe){return Ze.call(te,Oe)}))}:Mi,ga=wo;(en&&ga(new en(new ArrayBuffer(1)))!=Be||Dn&&ga(new Dn)!=j||Mn&&ga(Mn.resolve())!=ae||ii&&ga(new ii)!=oe||Wn&&ga(new Wn)!=ye)&&(ga=function(te){var Oe=wo(te),st=Oe==V?te.constructor:void 0,jt=st?No(st):"";if(jt)switch(jt){case er:return Be;case wi:return j;case hi:return ae;case ti:return oe;case Wi:return ye}return Oe});function Ul(te,Oe){return Oe=Oe??l,!!Oe&&(typeof te=="number"||It.test(te))&&te>-1&&te%1==0&&te<Oe}function bA(te){var Oe=typeof te;return Oe=="string"||Oe=="number"||Oe=="symbol"||Oe=="boolean"?te!=="__proto__":te===null}function br(te){return!!me&&me in te}function iA(te){var Oe=te&&te.constructor,st=typeof Oe=="function"&&Oe.prototype||Ge;return te===st}function cu(te){return Te.call(te)}function No(te){if(te!=null){try{return re.call(te)}catch{}try{return te+""}catch{}}return""}function Eo(te,Oe){return te===Oe||te!==te&&Oe!==Oe}var Fa=As(function(){return arguments}())?As:function(te){return Dr(te)&&le.call(te,"callee")&&!Ze.call(te,"callee")},Sa=Array.isArray;function oa(te){return te!=null&&Za(te.length)&&!za(te)}var kr=kt||Qr;function rA(te,Oe){return Us(te,Oe)}function za(te){if(!ya(te))return!1;var Oe=wo(te);return Oe==K||Oe==z||Oe==C||Oe==ne}function Za(te){return typeof te=="number"&&te>-1&&te%1==0&&te<=l}function ya(te){var Oe=typeof te;return te!=null&&(Oe=="object"||Oe=="function")}function Dr(te){return te!=null&&typeof te=="object"}var vl=Ot?Wt(Ot):Du;function Zi(te){return oa(te)?rn(te):_A(te)}function Mi(){return[]}function Qr(){return!1}n.exports=rA}(BC,BC.exports)),BC.exports}var bV=_V(),xV=tF(bV);function S6(n,e,t){const i={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(i["source-layer"]=t),i}function w6(n,e,t,i){const r={id:[t,i,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return i&&(r["source-layer"]=i),r}function E6(n,e,t){const i={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(i["source-layer"]=t),i}function MV(n,e){const t=[],i=[],r=[];function a(l){return{circle:e(l,.8),line:e(l,.6),polygon:e(l,.3),polygonOutline:e(l,.6),default:e(l,1)}}return Object.keys(n).forEach(l=>{const o=n[l];if(!o||o.length===0){const m=a(l);i.push(S6(m.circle,l)),r.push(E6(m.line,l)),t.push(w6(m.polygon,m.polygonOutline,l))}else o.forEach(m=>{const C=a(m);i.push(S6(C.circle,l,m)),r.push(E6(C.line,l,m)),t.push(w6(C.polygon,C.polygonOutline,l,m))})}),t.concat(r).concat(i)}function SV(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const i={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},r={};return Object.keys(n.sources).forEach(a=>{const l=n.sources[a];(l.type==="vector"||l.type==="geojson")&&(r[a]=l)}),Object.assign(n,{layers:[i].concat(e),sources:r})}var wI={polygonLayer:w6,lineLayer:E6,circleLayer:S6,generateInspectStyle:SV,generateColoredLayers:MV};class wV{constructor(e){e=Object.assign({show:!0,onToggle(){}},e),this._btn=this.createButton(),this._btn.onclick=e.onToggle,this.elem=this.createContainer(this._btn,e.show)}createButton(){const e=document.createElement("button");return e.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect",e.type="button",e.title="Toggle Inspect",e.setAttribute("aria-label","Toggle Inspect"),e}createContainer(e,t){const i=document.createElement("div");return i.className="maplibregl-ctrl maplibregl-ctrl-group",i.appendChild(e),t||(i.style.display="none"),i}setInspectIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect"}setMapIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-map"}}function EV(n){return typeof n>"u"||n===null?n:n instanceof Date?n.toLocaleString():typeof n=="object"||typeof n=="number"||typeof n=="string"?n.toString():n}function w4(n,e){return`<div class="maplibregl-inspect_property"><div class="maplibregl-inspect_property-name">${n}</div><div class="maplibregl-inspect_property-value">${EV(e)}</div></div>`}function BV(n){return`<div class="maplibregl-inspect_layer">${n}</div>`}function OV(n){const e=BV(n.layer["source-layer"]||n.layer.source),t=w4("$id",n.id),i=w4("$type",n.geometry.type),r=Object.keys(n.properties).map(a=>w4(a,n.properties[a]));return[e,t,i].concat(r).join("")}function IV(n){return n.map(e=>`<div class="maplibregl-inspect_feature">${OV(e)}</div>`).join("")}function TV(n){return`<div class="maplibregl-inspect_popup">${IV(n)}</div>`}var OC={exports:{}},kV=OC.exports,EI;function DV(){return EI||(EI=1,function(n,e){(function(t,i){{var r=i();n.exports&&(e=n.exports=r),e.randomColor=r}})(kV,function(){var t=null,i={};ee();var r=[],a=function(W){if(W=W||{},W.seed!==void 0&&W.seed!==null&&W.seed===parseInt(W.seed,10))t=W.seed;else if(typeof W.seed=="string")t=Z(W.seed);else{if(W.seed!==void 0&&W.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var ue,ge,ye;if(W.count!==null&&W.count!==void 0){for(var Me=W.count,Be=[],we=0;we<W.count;we++)r.push(!1);for(W.count=null;Me>Be.length;){var qe=a(W);t!==null&&(W.seed=t),Be.push(qe)}return W.count=Me,Be}return ue=l(W),ge=o(ue,W),ye=m(ue,ge,W),C([ue,ge,ye],W)};function l(W){if(r.length>0){var ue=oe(W.hue),ge=z(ue),ye=(ue[1]-ue[0])/r.length,Me=parseInt((ge-ue[0])/ye);r[Me]===!0?Me=(Me+2)%r.length:r[Me]=!0;var Be=(ue[0]+Me*ye)%359,we=(ue[0]+(Me+1)*ye)%359;return ue=[Be,we],ge=z(ue),ge<0&&(ge=360+ge),ge}else{var ue=O(W.hue);return ge=z(ue),ge<0&&(ge=360+ge),ge}}function o(W,ue){if(ue.hue==="monochrome")return 0;if(ue.luminosity==="random")return z([0,100]);var ge=U(W),ye=ge[0],Me=ge[1];switch(ue.luminosity){case"bright":ye=55;break;case"dark":ye=Me-10;break;case"light":Me=55;break}return z([ye,Me])}function m(W,ue,ge){var ye=S(W,ue),Me=100;switch(ge.luminosity){case"dark":Me=ye+20;break;case"light":ye=(Me+ye)/2;break;case"random":ye=0,Me=100;break}return z([ye,Me])}function C(W,ue){switch(ue.format){case"hsvArray":return W;case"hslArray":return ne(W);case"hsl":var ge=ne(W);return"hsl("+ge[0]+", "+ge[1]+"%, "+ge[2]+"%)";case"hsla":var ye=ne(W),we=ue.alpha||Math.random();return"hsla("+ye[0]+", "+ye[1]+"%, "+ye[2]+"%, "+we+")";case"rgbArray":return V(W);case"rgb":var Me=V(W);return"rgb("+Me.join(", ")+")";case"rgba":var Be=V(W),we=ue.alpha||Math.random();return"rgba("+Be.join(", ")+", "+we+")";default:return j(W)}}function S(W,ue){for(var ge=K(W).lowerBounds,ye=0;ye<ge.length-1;ye++){var Me=ge[ye][0],Be=ge[ye][1],we=ge[ye+1][0],qe=ge[ye+1][1];if(ue>=Me&&ue<=we){var xe=(qe-Be)/(we-Me),ze=Be-xe*Me;return xe*ue+ze}}return 0}function O(W){if(typeof parseInt(W)=="number"){var ue=parseInt(W);if(ue<360&&ue>0)return[ue,ue]}if(typeof W=="string"){if(i[W]){var ge=i[W];if(ge.hueRange)return ge.hueRange}else if(W.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ye=ae(W)[0];return[ye,ye]}}return[0,360]}function U(W){return K(W).saturationRange}function K(W){W>=334&&W<=360&&(W-=360);for(var ue in i){var ge=i[ue];if(ge.hueRange&&W>=ge.hueRange[0]&&W<=ge.hueRange[1])return i[ue]}return"Color not found"}function z(W){if(t===null){var ue=.618033988749895,ge=Math.random();return ge+=ue,ge%=1,Math.floor(W[0]+ge*(W[1]+1-W[0]))}else{var ye=W[1]||1,Me=W[0]||0;t=(t*9301+49297)%233280;var Be=t/233280;return Math.floor(Me+Be*(ye-Me))}}function j(W){var ue=V(W);function ge(Me){var Be=Me.toString(16);return Be.length==1?"0"+Be:Be}var ye="#"+ge(ue[0])+ge(ue[1])+ge(ue[2]);return ye}function Q(W,ue,ge){var ye=ge[0][0],Me=ge[ge.length-1][0],Be=ge[ge.length-1][1],we=ge[0][1];i[W]={hueRange:ue,lowerBounds:ge,saturationRange:[ye,Me],brightnessRange:[Be,we]}}function ee(){Q("monochrome",null,[[0,0],[100,0]]),Q("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),Q("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),Q("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),Q("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),Q("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),Q("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),Q("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function V(W){var ue=W[0];ue===0&&(ue=1),ue===360&&(ue=359),ue=ue/360;var ge=W[1]/100,ye=W[2]/100,Me=Math.floor(ue*6),Be=ue*6-Me,we=ye*(1-ge),qe=ye*(1-Be*ge),xe=ye*(1-(1-Be)*ge),ze=256,ot=256,yt=256;switch(Me){case 0:ze=ye,ot=xe,yt=we;break;case 1:ze=qe,ot=ye,yt=we;break;case 2:ze=we,ot=ye,yt=xe;break;case 3:ze=we,ot=qe,yt=ye;break;case 4:ze=xe,ot=we,yt=ye;break;case 5:ze=ye,ot=we,yt=qe;break}var nt=[Math.floor(ze*255),Math.floor(ot*255),Math.floor(yt*255)];return nt}function ae(W){W=W.replace(/^#/,""),W=W.length===3?W.replace(/(.)/g,"$1$1"):W;var ue=parseInt(W.substr(0,2),16)/255,ge=parseInt(W.substr(2,2),16)/255,ye=parseInt(W.substr(4,2),16)/255,Me=Math.max(ue,ge,ye),Be=Me-Math.min(ue,ge,ye),we=Me?Be/Me:0;switch(Me){case ue:return[60*((ge-ye)/Be%6)||0,we,Me];case ge:return[60*((ye-ue)/Be+2)||0,we,Me];case ye:return[60*((ue-ge)/Be+4)||0,we,Me]}}function ne(W){var ue=W[0],ge=W[1]/100,ye=W[2]/100,Me=(2-ge)*ye;return[ue,Math.round(ge*ye/(Me<1?Me:2-Me)*1e4)/100,Me/2*100]}function Z(W){for(var ue=0,ge=0;ge!==W.length&&!(ue>=Number.MAX_SAFE_INTEGER);ge++)ue+=W.charCodeAt(ge);return ue}function oe(W){if(isNaN(W)){if(typeof W=="string"){if(i[W]){var ge=i[W];if(ge.hueRange)return ge.hueRange}else if(W.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ye=ae(W)[0];return K(ye).hueRange}}}else{var ue=parseInt(W);if(ue<360&&ue>0)return K(W).hueRange}return[0,360]}return a})}(OC,OC.exports)),OC.exports}var RV=DV(),PV=tF(RV);function KV(n,e){let t="bright",i;return/water|ocean|lake|sea|river/.test(n)&&(i="blue"),/state|country|place/.test(n)&&(i="pink"),/road|highway|transport|streets/.test(n)&&(i="orange"),/contour|building|earth/.test(n)&&(i="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(i="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(i="green"),`rgba(${PV({luminosity:t,hue:i,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}var UV={brightColor:KV};function LV(n){return n.metadata&&n.metadata["maplibregl-inspect:inspect"]}function FV(n){return Object.assign(n,{metadata:Object.assign({},n.metadata,{"maplibregl-inspect:inspect":!0})})}class oO{constructor(e){if(this._onSourceChange=i=>{if(i.sourceDataType==="visibility"||!i.isSourceLoaded)return;const r=Object.assign({},this.sources);this._setSourcesFromMap(),!xV(r,this.sources)&&Object.keys(this.sources).length>0&&setTimeout(()=>this.render(),1e3)},this._onStyleChange=()=>{const i=this._map.getStyle();LV(i)||(this._originalStyle=i)},this._onRightClick=()=>{!this.options.showMapPopupOnHover&&!this.options.showInspectMapPopupOnHover&&!this.options.blockHoverPopupOnClick&&this._popup&&this._popup.remove()},this._onMousemove=i=>{if(this._showInspectMap){if(!this.options.showInspectMapPopup||i.type==="mousemove"&&!this.options.showInspectMapPopupOnHover)return;i.type==="click"&&this.options.showInspectMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}else{if(!this.options.showMapPopup||i.type==="mousemove"&&!this.options.showMapPopupOnHover)return;i.type==="click"&&this.options.showMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}if(!this._popupBlocked&&this._popup){let r;this.options.selectThreshold===0?r=i.point:r=[[i.point.x-this.options.selectThreshold,i.point.y+this.options.selectThreshold],[i.point.x+this.options.selectThreshold,i.point.y-this.options.selectThreshold]];const a=this._map.queryRenderedFeatures(r,this.options.queryParameters)||[];if(this._map.getCanvas().style.cursor=a.length?"pointer":"",!a.length)this._popup.remove();else{this._popup.setLngLat(i.lngLat);const l=this.options.renderPopup(a);typeof l=="string"?this._popup.setHTML(l):this._popup.setDOMContent(l),this._popup.addTo(this._map)}}},!(this instanceof oO))throw new Error("MaplibreInspect needs to be called with the new keyword");let t=null;window.maplibregl?t=new window.maplibregl.Popup({closeButton:!1,closeOnClick:!1}):e.popup||console.error("Maplibre GL JS can not be found. Make sure to include it or pass an initialized MaplibreGL Popup to MaplibreInspect if you are using moduleis."),this.options=Object.assign({showInspectMap:!1,showInspectButton:!0,showInspectMapPopup:!0,showMapPopup:!1,showMapPopupOnHover:!0,showInspectMapPopupOnHover:!0,blockHoverPopupOnClick:!1,backgroundColor:"#fff",assignLayerColor:UV.brightColor,buildInspectStyle:wI.generateInspectStyle,renderPopup:TV,popup:t,selectThreshold:5,useInspectStyle:!0,queryParameters:{},sources:{},toggleCallback(){},manageStyleOutside:!1},e),this.sources=this.options.sources,this.assignLayerColor=this.options.assignLayerColor,this._popup=this.options.popup,this._popupBlocked=!1,this._showInspectMap=this.options.showInspectMap,this._toggle=new wV({show:this.options.showInspectButton,onToggle:()=>this.toggleInspector()})}toggleInspector(){this._showInspectMap=!this._showInspectMap,this._popupBlocked=!1,this.options.toggleCallback(this._showInspectMap),this.render()}_inspectStyle(){const e=wI.generateColoredLayers(this.sources,this.assignLayerColor);return this.options.buildInspectStyle(this._map.getStyle(),e,{backgroundColor:this.options.backgroundColor})}render(){this._showInspectMap?(this.options.useInspectStyle&&this._map.setStyle(FV(this._inspectStyle())),this._toggle.setMapIcon()):this._originalStyle&&(this._popup&&this._popup.remove(),this.options.useInspectStyle&&this._map.setStyle(this._originalStyle),this._toggle.setInspectIcon())}_setSourcesFromMap(){const e=Object.keys(this._map.getStyle().sources);Object.keys(this._map.style.sourceCaches).forEach(t=>{const i=this._map.style.sourceCaches[t]||{_source:{}},r=i._source.vectorLayerIds;r?this.sources[t]=r:i._source.type==="geojson"&&(this.sources[t]=[])}),Object.keys(this.sources).forEach(t=>{e.indexOf(t)===-1&&delete this.sources[t]})}setOriginalStyle(e){this._originalStyle=e,this._setSourcesFromMap()}onAdd(e){return this._map=e,Object.keys(this.sources).length===0&&(e.on("tiledata",this._onSourceChange),e.on("sourcedata",this._onSourceChange)),e.on("styledata",this._onStyleChange),e.on("load",this._onStyleChange),e.on("mousemove",this._onMousemove),e.on("click",this._onMousemove),e.on("contextmenu",this._onRightClick),this._toggle.elem}onRemove(){this._map.off("styledata",this._onStyleChange),this._map.off("load",this._onStyleChange),this._map.off("tiledata",this._onSourceChange),this._map.off("sourcedata",this._onSourceChange),this._map.off("mousemove",this._onMousemove),this._map.off("click",this._onMousemove),this._map.off("contextmenu",this._onRightClick);const e=this._toggle.elem;e.parentNode.removeChild(e),this._map=void 0}}var IC={exports:{}},zV=IC.exports,BI;function NV(){return BI||(BI=1,function(n,e){(function(t,i){{var r=i();n&&n.exports&&(e=n.exports=r),e.randomColor=r}})(zV,function(){var t=null,i={};ee();var r=[],a=function(W){if(W=W||{},W.seed!==void 0&&W.seed!==null&&W.seed===parseInt(W.seed,10))t=W.seed;else if(typeof W.seed=="string")t=Z(W.seed);else{if(W.seed!==void 0&&W.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var ue,ge,ye;if(W.count!==null&&W.count!==void 0){for(var Me=W.count,Be=[],we=0;we<W.count;we++)r.push(!1);for(W.count=null;Me>Be.length;){var qe=a(W);t!==null&&(W.seed=t),Be.push(qe)}return W.count=Me,Be}return ue=l(W),ge=o(ue,W),ye=m(ue,ge,W),C([ue,ge,ye],W)};function l(W){if(r.length>0){var ue=oe(W.hue),ge=z(ue),ye=(ue[1]-ue[0])/r.length,Me=parseInt((ge-ue[0])/ye);r[Me]===!0?Me=(Me+2)%r.length:r[Me]=!0;var Be=(ue[0]+Me*ye)%359,we=(ue[0]+(Me+1)*ye)%359;return ue=[Be,we],ge=z(ue),ge<0&&(ge=360+ge),ge}else{var ue=O(W.hue);return ge=z(ue),ge<0&&(ge=360+ge),ge}}function o(W,ue){if(ue.hue==="monochrome")return 0;if(ue.luminosity==="random")return z([0,100]);var ge=U(W),ye=ge[0],Me=ge[1];switch(ue.luminosity){case"bright":ye=55;break;case"dark":ye=Me-10;break;case"light":Me=55;break}return z([ye,Me])}function m(W,ue,ge){var ye=S(W,ue),Me=100;switch(ge.luminosity){case"dark":Me=ye+20;break;case"light":ye=(Me+ye)/2;break;case"random":ye=0,Me=100;break}return z([ye,Me])}function C(W,ue){switch(ue.format){case"hsvArray":return W;case"hslArray":return ne(W);case"hsl":var ge=ne(W);return"hsl("+ge[0]+", "+ge[1]+"%, "+ge[2]+"%)";case"hsla":var ye=ne(W),we=ue.alpha||Math.random();return"hsla("+ye[0]+", "+ye[1]+"%, "+ye[2]+"%, "+we+")";case"rgbArray":return V(W);case"rgb":var Me=V(W);return"rgb("+Me.join(", ")+")";case"rgba":var Be=V(W),we=ue.alpha||Math.random();return"rgba("+Be.join(", ")+", "+we+")";default:return j(W)}}function S(W,ue){for(var ge=K(W).lowerBounds,ye=0;ye<ge.length-1;ye++){var Me=ge[ye][0],Be=ge[ye][1],we=ge[ye+1][0],qe=ge[ye+1][1];if(ue>=Me&&ue<=we){var xe=(qe-Be)/(we-Me),ze=Be-xe*Me;return xe*ue+ze}}return 0}function O(W){if(typeof parseInt(W)=="number"){var ue=parseInt(W);if(ue<360&&ue>0)return[ue,ue]}if(typeof W=="string"){if(i[W]){var ge=i[W];if(ge.hueRange)return ge.hueRange}else if(W.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ye=ae(W)[0];return[ye,ye]}}return[0,360]}function U(W){return K(W).saturationRange}function K(W){W>=334&&W<=360&&(W-=360);for(var ue in i){var ge=i[ue];if(ge.hueRange&&W>=ge.hueRange[0]&&W<=ge.hueRange[1])return i[ue]}return"Color not found"}function z(W){if(t===null){var ue=.618033988749895,ge=Math.random();return ge+=ue,ge%=1,Math.floor(W[0]+ge*(W[1]+1-W[0]))}else{var ye=W[1]||1,Me=W[0]||0;t=(t*9301+49297)%233280;var Be=t/233280;return Math.floor(Me+Be*(ye-Me))}}function j(W){var ue=V(W);function ge(Me){var Be=Me.toString(16);return Be.length==1?"0"+Be:Be}var ye="#"+ge(ue[0])+ge(ue[1])+ge(ue[2]);return ye}function Q(W,ue,ge){var ye=ge[0][0],Me=ge[ge.length-1][0],Be=ge[ge.length-1][1],we=ge[0][1];i[W]={hueRange:ue,lowerBounds:ge,saturationRange:[ye,Me],brightnessRange:[Be,we]}}function ee(){Q("monochrome",null,[[0,0],[100,0]]),Q("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),Q("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),Q("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),Q("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),Q("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),Q("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),Q("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function V(W){var ue=W[0];ue===0&&(ue=1),ue===360&&(ue=359),ue=ue/360;var ge=W[1]/100,ye=W[2]/100,Me=Math.floor(ue*6),Be=ue*6-Me,we=ye*(1-ge),qe=ye*(1-Be*ge),xe=ye*(1-(1-Be)*ge),ze=256,ot=256,yt=256;switch(Me){case 0:ze=ye,ot=xe,yt=we;break;case 1:ze=qe,ot=ye,yt=we;break;case 2:ze=we,ot=ye,yt=xe;break;case 3:ze=we,ot=qe,yt=ye;break;case 4:ze=xe,ot=we,yt=ye;break;case 5:ze=ye,ot=we,yt=qe;break}var nt=[Math.floor(ze*255),Math.floor(ot*255),Math.floor(yt*255)];return nt}function ae(W){W=W.replace(/^#/,""),W=W.length===3?W.replace(/(.)/g,"$1$1"):W;var ue=parseInt(W.substr(0,2),16)/255,ge=parseInt(W.substr(2,2),16)/255,ye=parseInt(W.substr(4,2),16)/255,Me=Math.max(ue,ge,ye),Be=Me-Math.min(ue,ge,ye),we=Me?Be/Me:0;switch(Me){case ue:return[60*((ge-ye)/Be%6)||0,we,Me];case ge:return[60*((ye-ue)/Be+2)||0,we,Me];case ye:return[60*((ue-ge)/Be+4)||0,we,Me]}}function ne(W){var ue=W[0],ge=W[1]/100,ye=W[2]/100,Me=(2-ge)*ye;return[ue,Math.round(ge*ye/(Me<1?Me:2-Me)*1e4)/100,Me/2*100]}function Z(W){for(var ue=0,ge=0;ge!==W.length&&!(ue>=Number.MAX_SAFE_INTEGER);ge++)ue+=W.charCodeAt(ge);return ue}function oe(W){if(isNaN(W)){if(typeof W=="string"){if(i[W]){var ge=i[W];if(ge.hueRange)return ge.hueRange}else if(W.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ye=ae(W)[0];return K(ye).hueRange}}}else{var ue=parseInt(W);if(ue<360&&ue>0)return K(W).hueRange}return[0,360]}return a})}(IC,IC.exports)),IC.exports}var GV=NV();const jV=WA(GV);function WV(n,e){let t="bright",i;return/water|ocean|lake|sea|river/.test(n)&&(i="blue"),/state|country|place/.test(n)&&(i="pink"),/road|highway|transport|streets/.test(n)&&(i="orange"),/contour|building|earth/.test(n)&&(i="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(i="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(i="green"),`rgba(${jV({luminosity:t,hue:i,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}const nF={brightColor:WV};function OI(n){return nl({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6.95.435c.58-.58 1.52-.58 2.1 0l6.515 6.516c.58.58.58 1.519 0 2.098L9.05 15.565c-.58.58-1.519.58-2.098 0L.435 9.05a1.48 1.48 0 0 1 0-2.098z"},child:[]}]})(n)}function Lb(n){return nl({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M6.95.435c.58-.58 1.52-.58 2.1 0l6.515 6.516c.58.58.58 1.519 0 2.098L9.05 15.565c-.58.58-1.519.58-2.098 0L.435 9.05a1.48 1.48 0 0 1 0-2.098zm1.4.7a.495.495 0 0 0-.7 0L1.134 7.65a.495.495 0 0 0 0 .7l6.516 6.516a.495.495 0 0 0 .7 0l6.516-6.516a.495.495 0 0 0 0-.7L8.35 1.134z"},child:[]}]})(n)}function QV(n){return nl({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12.258 3h-8.51l-.083 2.46h.479c.26-1.544.758-1.783 2.693-1.845l.424-.013v7.827c0 .663-.144.82-1.3.923v.52h4.082v-.52c-1.162-.103-1.306-.26-1.306-.923V3.602l.431.013c1.934.062 2.434.301 2.693 1.846h.479z"},child:[]}]})(n)}function Wv(n){return nl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(n)}function YV(n){return nl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"},child:[]}]})(n)}function qV(n){return nl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"},child:[]}]})(n)}function HV(n){return nl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function VV(n){return nl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 7h2v2h-2V7zm0 4h2v6h-2v-6zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function $V(n){return nl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(n)}function ZV(n){return nl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 4H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6a2 2 0 0 0-2-2zm-7 6-4 4h3v6h2v-6h3l-4-4z"},child:[]}]})(n)}function XV(n){return nl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(n)}function JV(n){return nl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 0 0 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"},child:[]}]})(n)}function e$(n){return nl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"},child:[]}]})(n)}function iF(n){return nl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function t$(n){return nl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(n)}function B6(n){return nl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"},child:[]}]})(n)}function n$(n){return nl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(n)}function i$(n){return nl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7z"},child:[]}]})(n)}function r$(n){return nl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"},child:[]}]})(n)}function II(n){return nl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"},child:[]}]})(n)}function o$(n){return nl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z"},child:[]}]})(n)}function a$(n){return nl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"},child:[]}]})(n)}function s$(n){return nl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(n)}function l$(n){return nl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 14 5-5 5 5z"},child:[]}]})(n)}function A$(n){return nl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(n)}function u$(n){return nl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(n)}function c$(n){return nl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"2"},child:[]},{tag:"path",attr:{d:"M10 3h4v12h-4z"},child:[]}]})(n)}function h$(n){return nl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},child:[]}]})(n)}function d$(n){return nl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m344 280 88-88m-200 24 64 64M80 320l104-104"},child:[]},{tag:"circle",attr:{cx:"456",cy:"168",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"320",cy:"304",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"208",cy:"192",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"56",cy:"344",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]}]})(n)}function Pl(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",e="04b378f052c8d0b697556f3a6c6d711f4d8f8652",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:29,column:1}},1:{start:{line:6,column:20},end:{line:6,column:42}},2:{start:{line:7,column:2},end:{line:28,column:3}},3:{start:{line:9,column:6},end:{line:9,column:66}},4:{start:{line:11,column:6},end:{line:11,column:62}},5:{start:{line:13,column:6},end:{line:13,column:62}},6:{start:{line:15,column:6},end:{line:15,column:62}},7:{start:{line:17,column:6},end:{line:17,column:62}},8:{start:{line:19,column:6},end:{line:19,column:66}},9:{start:{line:21,column:6},end:{line:21,column:71}},10:{start:{line:23,column:6},end:{line:23,column:60}},11:{start:{line:25,column:6},end:{line:25,column:68}},12:{start:{line:27,column:6},end:{line:27,column:67}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:18},end:{line:5,column:19}},loc:{start:{line:5,column:29},end:{line:29,column:1}},line:5}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:28,column:3}},type:"switch",locations:[{start:{line:8,column:4},end:{line:9,column:66}},{start:{line:10,column:4},end:{line:11,column:62}},{start:{line:12,column:4},end:{line:13,column:62}},{start:{line:14,column:4},end:{line:15,column:62}},{start:{line:16,column:4},end:{line:17,column:62}},{start:{line:18,column:4},end:{line:19,column:66}},{start:{line:20,column:4},end:{line:21,column:71}},{start:{line:22,column:4},end:{line:23,column:60}},{start:{line:24,column:4},end:{line:25,column:68}},{start:{line:26,column:4},end:{line:27,column:67}}],line:7}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0},b:{0:[0,0,0,0,0,0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx"],names:[],mappings:"AAgBgC;AAbhC,SAAS,WAAW,eAAe,eAAe;AAClD,SAAS,iBAAiB,sBAAsB;AAChD,SAAS,0BAA0B;AAQnC,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,YAAY,EAAE,OAAO,MAAM,MAAM;AACvC,UAAO,MAAM,MAAM;AAAA,IACnB,KAAK;AAAkB,aAAO,oBAAC,iBAAe,GAAG,WAAW;AAAA,IAC5D,KAAK;AAAU,aAAO,oBAAC,aAAW,GAAG,WAAW;AAAA,IAChD,KAAK;AAAa,aAAO,oBAAC,aAAW,GAAG,WAAW;AAAA,IACnD,KAAK;AAAW,aAAO,oBAAC,aAAW,GAAG,WAAW;AAAA,IACjD,KAAK;AAAQ,aAAO,oBAAC,aAAW,GAAG,WAAW;AAAA,IAC9C,KAAK;AAAc,aAAO,oBAAC,iBAAe,GAAG,WAAW;AAAA,IACxD,KAAK;AAAQ,aAAO,oBAAC,sBAAoB,GAAG,WAAW;AAAA,IACvD,KAAK;AAAU,aAAO,oBAAC,WAAS,GAAG,WAAW;AAAA,IAC9C,KAAK;AAAU,aAAO,oBAAC,mBAAiB,GAAG,WAAW;AAAA,IACtD;AAAS,aAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,EAC/C;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"04b378f052c8d0b697556f3a6c6d711f4d8f8652"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Pl=function(){return l},l}Pl();Pl().s[0]++;const rF=n=>{Pl().f[0]++;const e=(Pl().s[1]++,{style:n.style});switch(Pl().s[2]++,n.type){case"fill-extrusion":return Pl().b[0][0]++,Pl().s[3]++,ce.jsx(OI,{...e});case"raster":return Pl().b[0][1]++,Pl().s[4]++,ce.jsx(Lb,{...e});case"hillshade":return Pl().b[0][2]++,Pl().s[5]++,ce.jsx(Lb,{...e});case"heatmap":return Pl().b[0][3]++,Pl().s[6]++,ce.jsx(Lb,{...e});case"fill":return Pl().b[0][4]++,Pl().s[7]++,ce.jsx(Lb,{...e});case"background":return Pl().b[0][5]++,Pl().s[8]++,ce.jsx(OI,{...e});case"line":return Pl().b[0][6]++,Pl().s[9]++,ce.jsx(d$,{...e});case"symbol":return Pl().b[0][7]++,Pl().s[10]++,ce.jsx(QV,{...e});case"circle":return Pl().b[0][8]++,Pl().s[11]++,ce.jsx(h$,{...e});default:return Pl().b[0][9]++,Pl().s[12]++,ce.jsx(c$,{...e})}};function Ji(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",e="ea1e9940e142b9a2a1c672f6983f6f5748c841e6",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:20}},1:{start:{line:6,column:27},end:{line:6,column:29}},2:{start:{line:7,column:2},end:{line:18,column:5}},3:{start:{line:8,column:22},end:{line:8,column:51}},4:{start:{line:9,column:4},end:{line:17,column:5}},5:{start:{line:10,column:6},end:{line:10,column:43}},6:{start:{line:11,column:28},end:{line:11,column:91}},7:{start:{line:11,column:59},end:{line:11,column:90}},8:{start:{line:12,column:6},end:{line:12,column:65}},9:{start:{line:14,column:6},end:{line:14,column:52}},10:{start:{line:15,column:6},end:{line:15,column:39}},11:{start:{line:16,column:6},end:{line:16,column:45}},12:{start:{line:19,column:2},end:{line:19,column:17}},13:{start:{line:23,column:4},end:{line:25,column:5}},14:{start:{line:24,column:6},end:{line:24,column:13}},15:{start:{line:26,column:4},end:{line:44,column:5}},16:{start:{line:27,column:25},end:{line:27,column:44}},17:{start:{line:28,column:6},end:{line:30,column:7}},18:{start:{line:29,column:8},end:{line:29,column:48}},19:{start:{line:31,column:6},end:{line:33,column:7}},20:{start:{line:32,column:8},end:{line:32,column:48}},21:{start:{line:34,column:6},end:{line:36,column:7}},22:{start:{line:35,column:8},end:{line:35,column:48}},23:{start:{line:37,column:6},end:{line:39,column:7}},24:{start:{line:38,column:8},end:{line:38,column:58}},25:{start:{line:40,column:6},end:{line:40,column:21}},26:{start:{line:42,column:6},end:{line:42,column:63}},27:{start:{line:43,column:6},end:{line:43,column:21}},28:{start:{line:47,column:20},end:{line:47,column:67}},29:{start:{line:48,column:18},end:{line:93,column:6}},30:{start:{line:49,column:21},end:{line:88,column:8}},31:{start:{line:50,column:29},end:{line:50,column:76}},32:{start:{line:51,column:8},end:{line:87,column:10}},33:{start:{line:68,column:20},end:{line:68,column:63}},34:{start:{line:89,column:6},end:{line:92,column:26}},35:{start:{line:94,column:4},end:{line:94,column:102}}},fnMap:{0:{name:"groupFeaturesBySourceLayer",decl:{start:{line:4,column:9},end:{line:4,column:35}},loc:{start:{line:4,column:46},end:{line:20,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:32},end:{line:18,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:11,column:52},end:{line:11,column:53}},loc:{start:{line:11,column:59},end:{line:11,column:90}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:35},end:{line:45,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:11},end:{line:95,column:3}},line:46},5:{name:"(anonymous_5)",decl:{start:{line:48,column:43},end:{line:48,column:44}},loc:{start:{line:48,column:62},end:{line:93,column:5}},line:48},6:{name:"(anonymous_6)",decl:{start:{line:49,column:48},end:{line:49,column:49}},loc:{start:{line:49,column:66},end:{line:88,column:7}},line:49},7:{name:"(anonymous_7)",decl:{start:{line:67,column:27},end:{line:67,column:28}},loc:{start:{line:67,column:33},end:{line:69,column:19}},line:67}},branchMap:{0:{loc:{start:{line:9,column:4},end:{line:17,column:5}},type:"if",locations:[{start:{line:9,column:4},end:{line:17,column:5}},{start:{line:13,column:11},end:{line:17,column:5}}],line:9},1:{loc:{start:{line:14,column:27},end:{line:14,column:51}},type:"binary-expr",locations:[{start:{line:14,column:27},end:{line:14,column:45}},{start:{line:14,column:49},end:{line:14,column:51}}],line:14},2:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:28,column:6},end:{line:30,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:30,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:28},4:{loc:{start:{line:28,column:10},end:{line:28,column:64}},type:"binary-expr",locations:[{start:{line:28,column:10},end:{line:28,column:36}},{start:{line:28,column:40},end:{line:28,column:64}}],line:28},5:{loc:{start:{line:31,column:6},end:{line:33,column:7}},type:"if",locations:[{start:{line:31,column:6},end:{line:33,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},6:{loc:{start:{line:31,column:10},end:{line:31,column:64}},type:"binary-expr",locations:[{start:{line:31,column:10},end:{line:31,column:36}},{start:{line:31,column:40},end:{line:31,column:64}}],line:31},7:{loc:{start:{line:34,column:6},end:{line:36,column:7}},type:"if",locations:[{start:{line:34,column:6},end:{line:36,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},8:{loc:{start:{line:34,column:10},end:{line:34,column:64}},type:"binary-expr",locations:[{start:{line:34,column:10},end:{line:34,column:36}},{start:{line:34,column:40},end:{line:34,column:64}}],line:34},9:{loc:{start:{line:37,column:6},end:{line:39,column:7}},type:"if",locations:[{start:{line:37,column:6},end:{line:39,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},10:{loc:{start:{line:37,column:10},end:{line:37,column:84}},type:"binary-expr",locations:[{start:{line:37,column:10},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:84}}],line:37},11:{loc:{start:{line:71,column:20},end:{line:75,column:24}},type:"binary-expr",locations:[{start:{line:71,column:20},end:{line:71,column:38}},{start:{line:71,column:58},end:{line:75,column:24}}],line:71},12:{loc:{start:{line:77,column:20},end:{line:80,column:24}},type:"binary-expr",locations:[{start:{line:77,column:20},end:{line:77,column:35}},{start:{line:77,column:55},end:{line:80,column:24}}],line:77}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx"],names:[],mappings:"AA8EU,cAkBsB,YAlBtB;AA9EV,OAAO,WAAW;AAClB,OAAO,eAAe;AAGtB,SAAS,2BAA2B,UAA4B;AAC9D,QAAM,UAA6C,CAAC;AAEpD,QAAM,mBAA4C,CAAC;AAEnD,WAAS,QAAQ,aAAW;AAC1B,UAAM,YAAY,QAAQ,MAAM,cAAc;AAC9C,QAAG,OAAO,UAAU,eAAe,KAAK,kBAAkB,QAAQ,MAAM,EAAE,GAAG;AAC3E,uBAAiB,QAAQ,MAAM,EAAE;AAEjC,YAAM,gBAAgB,QAAQ,SAAS,EAAE,KAAK,CAAC,MAAsB,EAAE,MAAM,OAAO,QAAQ,MAAM,EAAE;AAEpG,oBAAe,UAAU,iBAAiB,QAAQ,MAAM,EAAE;AAAA,IAC5D,OAAO;AACL,cAAQ,SAAS,IAAI,QAAQ,SAAS,KAAK,CAAC;AAC5C,cAAQ,SAAS,EAAE,KAAK,OAAO;AAE/B,uBAAiB,QAAQ,MAAM,EAAE,IAAI;AAAA,IACvC;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAQA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,iBAAiB,SAAyB,OAAgB;AAExD,QAAI,CAAC,QAAQ,MAAM,OAAO;AACxB;AAAA,IACF;AAEA,QAAI;AACF,YAAM,aAAa,QAAQ,MAAM;AAEjC,UAAG,gBAAgB,cAAc,WAAW,YAAY,GAAG;AACzD,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,0BAA0B,cAAc,WAAW,sBAAsB,GAAG;AAC9E,eAAO,OAAO,WAAW,sBAAsB,CAAC;AAAA,MAClD;AAEA,aAAO;AAAA,IACT,SAGO,KAAK;AACV,cAAQ,KAAK,uCAAuC,GAAG;AACvD,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,UAAU,2BAA2B,KAAK,MAAM,QAAQ;AAE9D,UAAM,QAAQ,OAAO,KAAK,OAAO,EAAE,IAAI,mBAAiB;AACtD,YAAM,SAAS,QAAQ,aAAa,EAAE,IAAI,CAAC,SAAyB,QAAgB;AAClF,cAAM,eAAe,KAAK,iBAAiB,SAAS,KAAK,MAAM,IAAI;AAEnE,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,WAAU;AAAA,YAEV;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,OAAO,EAAC,YAAY,aAAY;AAAA;AAAA,cACjC;AAAA,cACD;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,MAAM;AACb,yBAAK,MAAM,cAAc,QAAQ,MAAM,EAAE;AAAA,kBAC3C;AAAA,kBAEC;AAAA,4BAAQ,MAAM,QACb,oBAAC,aAAU,MAAM,QAAQ,MAAM,MAAM,OAAO;AAAA,sBAC1C,OAAO;AAAA,sBACP,QAAQ;AAAA,sBACR,cAAc;AAAA,oBAChB,GAAE;AAAA,oBAEH,QAAQ,MAAM;AAAA,oBACd,QAAQ,WAAW,qBAAC,UAAK;AAAA;AAAA,sBAAI,QAAQ;AAAA,uBAAQ;AAAA;AAAA;AAAA,cAChD;AAAA;AAAA;AAAA,UAtBK;AAAA,QAuBP;AAAA,MACF,CAAC;AACD,aAAO,qBAAC,SACN;AAAA,4BAAC,SAAI,WAAU,2BAA2B,yBAAc;AAAA,QACvD;AAAA,WAFc,aAGjB;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,gCACnB,iBACH;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ea1e9940e142b9a2a1c672f6983f6f5748c841e6"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Ji=function(){return l},l}Ji();function f$(n){Ji().f[0]++;const e=(Ji().s[0]++,{}),t=(Ji().s[1]++,{});return Ji().s[2]++,n.forEach(i=>{Ji().f[1]++;const r=(Ji().s[3]++,i.layer["source-layer"]);if(Ji().s[4]++,Object.prototype.hasOwnProperty.call(t,i.layer.id)){Ji().b[0][0]++,Ji().s[5]++,t[i.layer.id]++;const a=(Ji().s[6]++,e[r].find(l=>(Ji().f[2]++,Ji().s[7]++,l.layer.id===i.layer.id)));Ji().s[8]++,a.counter=t[i.layer.id]}else Ji().b[0][1]++,Ji().s[9]++,e[r]=(Ji().b[1][0]++,e[r]||(Ji().b[1][1]++,[])),Ji().s[10]++,e[r].push(i),Ji().s[11]++,t[i.layer.id]=1}),Ji().s[12]++,e}class oF extends ni.Component{_getFeatureColor(e,t){if(Ji().f[3]++,Ji().s[13]++,e.layer.paint)Ji().b[2][1]++;else{Ji().b[2][0]++,Ji().s[14]++;return}Ji().s[15]++;try{const i=(Ji().s[16]++,e.layer.paint);return Ji().s[17]++,Ji().b[4][0]++,"text-color"in i&&(Ji().b[4][1]++,i["text-color"])?(Ji().b[3][0]++,Ji().s[18]++,String(i["text-color"])):(Ji().b[3][1]++,Ji().s[19]++,Ji().b[6][0]++,"fill-color"in i&&(Ji().b[6][1]++,i["fill-color"])?(Ji().b[5][0]++,Ji().s[20]++,String(i["fill-color"])):(Ji().b[5][1]++,Ji().s[21]++,Ji().b[8][0]++,"line-color"in i&&(Ji().b[8][1]++,i["line-color"])?(Ji().b[7][0]++,Ji().s[22]++,String(i["line-color"])):(Ji().b[7][1]++,Ji().s[23]++,Ji().b[10][0]++,"fill-extrusion-color"in i&&(Ji().b[10][1]++,i["fill-extrusion-color"])?(Ji().b[9][0]++,Ji().s[24]++,String(i["fill-extrusion-color"])):(Ji().b[9][1]++,Ji().s[25]++,"black"))))}catch(i){return Ji().s[26]++,console.warn("Unable to get feature color, error:",i),Ji().s[27]++,"black"}}render(){Ji().f[4]++;const e=(Ji().s[28]++,f$(this.props.features)),t=(Ji().s[29]++,Object.keys(e).map(i=>{Ji().f[5]++;const r=(Ji().s[30]++,e[i].map((a,l)=>{Ji().f[6]++;const o=(Ji().s[31]++,this._getFeatureColor(a,this.props.zoom));return Ji().s[32]++,ce.jsxs("div",{className:"maputnik-popup-layer",children:[ce.jsx("div",{className:"maputnik-popup-layer__swatch",style:{background:o}}),ce.jsxs("label",{className:"maputnik-popup-layer__label",onClick:()=>{Ji().f[7]++,Ji().s[33]++,this.props.onLayerSelect(a.layer.id)},children:[(Ji().b[11][0]++,a.layer.type&&(Ji().b[11][1]++,ce.jsx(rF,{type:a.layer.type,style:{width:14,height:14,paddingRight:3}}))),a.layer.id,(Ji().b[12][0]++,a.counter&&(Ji().b[12][1]++,ce.jsxs("span",{children:[" × ",a.counter]})))]})]},l)}));return Ji().s[34]++,ce.jsxs("div",{children:[ce.jsx("div",{className:"maputnik-popup-layer-id",children:i}),r]},i)}));return Ji().s[35]++,ce.jsx("div",{className:"maputnik-feature-layer-popup",children:t})}}function Vr(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",e="72aafaa905031d9408c36c83b71947160ac6dbad",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",statementMap:{0:{start:{line:4,column:2},end:{line:4,column:67}},1:{start:{line:4,column:54},end:{line:4,column:67}},2:{start:{line:5,column:2},end:{line:5,column:59}},3:{start:{line:5,column:29},end:{line:5,column:59}},4:{start:{line:6,column:2},end:{line:6,column:115}},5:{start:{line:6,column:91},end:{line:6,column:115}},6:{start:{line:7,column:2},end:{line:7,column:15}},7:{start:{line:10,column:2},end:{line:13,column:12}},8:{start:{line:16,column:2},end:{line:32,column:12}},9:{start:{line:29,column:23},end:{line:29,column:55}},10:{start:{line:30,column:6},end:{line:30,column:74}},11:{start:{line:35,column:25},end:{line:35,column:27}},12:{start:{line:36,column:2},end:{line:49,column:5}},13:{start:{line:37,column:25},end:{line:39,column:6}},14:{start:{line:38,column:6},end:{line:38,column:156}},15:{start:{line:40,column:4},end:{line:48,column:5}},16:{start:{line:41,column:6},end:{line:41,column:35}},17:{start:{line:43,column:6},end:{line:47,column:7}},18:{start:{line:44,column:8},end:{line:44,column:58}},19:{start:{line:46,column:8},end:{line:46,column:60}},20:{start:{line:50,column:2},end:{line:50,column:24}},21:{start:{line:54,column:21},end:{line:54,column:66}},22:{start:{line:55,column:4},end:{line:55,column:250}}},fnMap:{0:{name:"displayValue",decl:{start:{line:3,column:9},end:{line:3,column:21}},loc:{start:{line:3,column:29},end:{line:8,column:1}},line:3},1:{name:"renderKeyValueTableRow",decl:{start:{line:9,column:9},end:{line:9,column:31}},loc:{start:{line:9,column:44},end:{line:14,column:1}},line:9},2:{name:"renderFeature",decl:{start:{line:15,column:9},end:{line:15,column:22}},loc:{start:{line:15,column:37},end:{line:33,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:28,column:40},end:{line:28,column:41}},loc:{start:{line:28,column:58},end:{line:31,column:5}},line:28},4:{name:"removeDuplicatedFeatures",decl:{start:{line:34,column:9},end:{line:34,column:33}},loc:{start:{line:34,column:44},end:{line:51,column:1}},line:34},5:{name:"(anonymous_5)",decl:{start:{line:36,column:19},end:{line:36,column:20}},loc:{start:{line:36,column:32},end:{line:49,column:3}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:50},end:{line:37,column:51}},loc:{start:{line:37,column:64},end:{line:39,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:56,column:3}},line:53}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:4,column:67}},type:"if",locations:[{start:{line:4,column:2},end:{line:4,column:67}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:4},1:{loc:{start:{line:4,column:6},end:{line:4,column:52}},type:"binary-expr",locations:[{start:{line:4,column:6},end:{line:4,column:34}},{start:{line:4,column:38},end:{line:4,column:52}}],line:4},2:{loc:{start:{line:5,column:2},end:{line:5,column:59}},type:"if",locations:[{start:{line:5,column:2},end:{line:5,column:59}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},3:{loc:{start:{line:6,column:2},end:{line:6,column:115}},type:"if",locations:[{start:{line:6,column:2},end:{line:6,column:115}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},4:{loc:{start:{line:6,column:6},end:{line:6,column:89}},type:"binary-expr",locations:[{start:{line:6,column:6},end:{line:6,column:31}},{start:{line:6,column:35},end:{line:6,column:60}},{start:{line:6,column:64},end:{line:6,column:89}}],line:6},5:{loc:{start:{line:21,column:6},end:{line:24,column:10}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:32}},{start:{line:21,column:52},end:{line:24,column:10}}],line:21},6:{loc:{start:{line:38,column:13},end:{line:38,column:155}},type:"binary-expr",locations:[{start:{line:38,column:13},end:{line:38,column:77}},{start:{line:38,column:81},end:{line:38,column:155}}],line:38},7:{loc:{start:{line:40,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:48,column:5}},{start:{line:42,column:11},end:{line:48,column:5}}],line:40},8:{loc:{start:{line:43,column:6},end:{line:47,column:7}},type:"if",locations:[{start:{line:43,column:6},end:{line:47,column:7}},{start:{line:45,column:13},end:{line:47,column:7}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx"],names:[],mappings:"AAkBS,SACL,KADK;AAlBT,OAAO,WAAW;AAQlB,SAAS,aAAa,OAAoD;AACxE,MAAI,OAAO,UAAU,eAAe,UAAU,KAAM,QAAO;AAC3D,MAAI,iBAAiB,KAAM,QAAO,MAAM,eAAe;AACvD,MAAI,OAAO,UAAU,YACb,OAAO,UAAU,YACjB,OAAO,UAAU,SAAU,QAAO,MAAM,SAAS;AACzD,SAAO;AACT;AAEA,SAAS,uBAAuB,KAAa,OAA2B;AACtE,SAAO,qBAAC,QACN;AAAA,wBAAC,QAAG,WAAU,6BAA6B,eAAI;AAAA,IAC/C,oBAAC,QAAG,WAAU,6BAA6B,iBAAM;AAAA,OAFnC,GAGhB;AACF;AAEA,SAAS,cAAc,SAAyB,KAAa;AAC3D,SAAO,qBAAC,MAAM,UAAN,EACN;AAAA,wBAAC,QACC,+BAAC,QAAG,SAAS,GAAG,WAAU,2BAA2B;AAAA,cAAQ,MAAM,QAAQ;AAAA,MAAE;AAAA,MAAG,QAAQ,MAAM,cAAc;AAAA,MAAG,QAAQ,sBAAsB,qBAAC,UAAK;AAAA;AAAA,QAAI,QAAQ;AAAA,SAAmB;AAAA,OAAQ,GAC5L;AAAA,IACC,uBAAuB,SAAS,QAAQ,SAAS,IAAI;AAAA,IACrD,uBAAuB,OAAO,aAAa,QAAQ,EAAE,CAAC;AAAA,IACtD,OAAO,KAAK,QAAQ,UAAU,EAAE,IAAI,kBAAgB;AACnD,YAAM,WAAW,QAAQ,WAAW,YAAY;AAChD,aAAO,uBAAuB,cAAc,aAAa,QAAQ,CAAC;AAAA,IACpE,CAAC;AAAA,OATyB,GAU5B;AACF;AAEA,SAAS,yBAAyB,UAA4B;AAC5D,QAAM,iBAAmC,CAAC;AAE1C,WAAS,QAAQ,aAAW;AAC1B,UAAM,eAAe,eAAe,UAAU,cAAY;AACxD,aAAO,QAAQ,MAAM,cAAc,MAAM,SAAS,MAAM,cAAc,KACjE,KAAK,UAAU,QAAQ,UAAU,MAAM,KAAK,UAAU,SAAS,UAAU;AAAA,IAChF,CAAC;AAED,QAAG,iBAAiB,IAAI;AACtB,qBAAe,KAAK,OAAO;AAAA,IAC7B,OAAO;AACL,UAAG,wBAAwB,eAAe,YAAY,GAAG;AACvD,uBAAe,YAAY,EAAE;AAAA,MAC/B,OAAO;AACL,uBAAe,YAAY,EAAE,qBAAqB;AAAA,MACpD;AAAA,IACF;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAMA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,WAAW,yBAAyB,KAAK,MAAM,QAAQ;AAC7D,WAAO,oBAAC,SAAI,WAAU,mCACpB,8BAAC,WAAM,WAAU,wBACf,8BAAC,WACE,mBAAS,IAAI,aAAa,GAC7B,GACF,GACF;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"72aafaa905031d9408c36c83b71947160ac6dbad"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Vr=function(){return l},l}Vr();function TI(n){return Vr().f[0]++,Vr().s[0]++,Vr().b[1][0]++,typeof n>"u"||(Vr().b[1][1]++,n===null)?(Vr().b[0][0]++,Vr().s[1]++,n):(Vr().b[0][1]++,Vr().s[2]++,n instanceof Date?(Vr().b[2][0]++,Vr().s[3]++,n.toLocaleString()):(Vr().b[2][1]++,Vr().s[4]++,Vr().b[4][0]++,typeof n=="object"||(Vr().b[4][1]++,typeof n=="number")||(Vr().b[4][2]++,typeof n=="string")?(Vr().b[3][0]++,Vr().s[5]++,n.toString()):(Vr().b[3][1]++,Vr().s[6]++,n)))}function E4(n,e){return Vr().f[1]++,Vr().s[7]++,ce.jsxs("tr",{children:[ce.jsx("td",{className:"maputnik-popup-table-cell",children:n}),ce.jsx("td",{className:"maputnik-popup-table-cell",children:e})]},n)}function m$(n,e){return Vr().f[2]++,Vr().s[8]++,ce.jsxs(ni.Fragment,{children:[ce.jsx("tr",{children:ce.jsxs("td",{colSpan:2,className:"maputnik-popup-layer-id",children:[n.layer.source,": ",n.layer["source-layer"],(Vr().b[5][0]++,n.inspectModeCounter&&(Vr().b[5][1]++,ce.jsxs("span",{children:[" × ",n.inspectModeCounter]})))]})}),E4("$type",n.geometry.type),E4("$id",TI(n.id)),Object.keys(n.properties).map(t=>{Vr().f[3]++;const i=(Vr().s[9]++,n.properties[t]);return Vr().s[10]++,E4(t,TI(i))})]},e)}function p$(n){Vr().f[4]++;const e=(Vr().s[11]++,[]);return Vr().s[12]++,n.forEach(t=>{Vr().f[5]++;const i=(Vr().s[13]++,e.findIndex(r=>(Vr().f[6]++,Vr().s[14]++,Vr().b[6][0]++,t.layer["source-layer"]===r.layer["source-layer"]&&(Vr().b[6][1]++,JSON.stringify(t.properties)===JSON.stringify(r.properties)))));Vr().s[15]++,i===-1?(Vr().b[7][0]++,Vr().s[16]++,e.push(t)):(Vr().b[7][1]++,Vr().s[17]++,"inspectModeCounter"in e[i]?(Vr().b[8][0]++,Vr().s[18]++,e[i].inspectModeCounter++):(Vr().b[8][1]++,Vr().s[19]++,e[i].inspectModeCounter=2))}),Vr().s[20]++,e}class g$ extends ni.Component{render(){Vr().f[7]++;const e=(Vr().s[21]++,p$(this.props.features));return Vr().s[22]++,ce.jsx("div",{className:"maputnik-feature-property-popup",children:ce.jsx("table",{className:"maputnik-popup-table",children:ce.jsx("tbody",{children:e.map(m$)})})})}}const XC={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},aF=Object.create(null);for(const n in XC)Object.hasOwn(XC,n)&&(aF[XC[n]]=n);const _c={to:{},get:{}};_c.get=function(n){const e=n.slice(0,3).toLowerCase();let t,i;switch(e){case"hsl":{t=_c.get.hsl(n),i="hsl";break}case"hwb":{t=_c.get.hwb(n),i="hwb";break}default:{t=_c.get.rgb(n),i="rgb";break}}return t?{model:i,value:t}:null};_c.get.rgb=function(n){if(!n)return null;const e=/^#([a-f\d]{3,4})$/i,t=/^#([a-f\d]{6})([a-f\d]{2})?$/i,i=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,r=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,a=/^(\w+)$/;let l=[0,0,0,1],o,m,C;if(o=n.match(t)){for(C=o[2],o=o[1],m=0;m<3;m++){const S=m*2;l[m]=Number.parseInt(o.slice(S,S+2),16)}C&&(l[3]=Number.parseInt(C,16)/255)}else if(o=n.match(e)){for(o=o[1],C=o[3],m=0;m<3;m++)l[m]=Number.parseInt(o[m]+o[m],16);C&&(l[3]=Number.parseInt(C+C,16)/255)}else if(o=n.match(i)){for(m=0;m<3;m++)l[m]=Number.parseInt(o[m+1],10);o[4]&&(l[3]=o[5]?Number.parseFloat(o[4])*.01:Number.parseFloat(o[4]))}else if(o=n.match(r)){for(m=0;m<3;m++)l[m]=Math.round(Number.parseFloat(o[m+1])*2.55);o[4]&&(l[3]=o[5]?Number.parseFloat(o[4])*.01:Number.parseFloat(o[4]))}else return(o=n.match(a))?o[1]==="transparent"?[0,0,0,0]:Object.hasOwn(XC,o[1])?(l=XC[o[1]],l[3]=1,l):null:null;for(m=0;m<3;m++)l[m]=T1(l[m],0,255);return l[3]=T1(l[3],0,1),l};_c.get.hsl=function(n){if(!n)return null;const e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=n.match(e);if(t){const i=Number.parseFloat(t[4]),r=(Number.parseFloat(t[1])%360+360)%360,a=T1(Number.parseFloat(t[2]),0,100),l=T1(Number.parseFloat(t[3]),0,100),o=T1(Number.isNaN(i)?1:i,0,1);return[r,a,l,o]}return null};_c.get.hwb=function(n){if(!n)return null;const e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=n.match(e);if(t){const i=Number.parseFloat(t[4]),r=(Number.parseFloat(t[1])%360+360)%360,a=T1(Number.parseFloat(t[2]),0,100),l=T1(Number.parseFloat(t[3]),0,100),o=T1(Number.isNaN(i)?1:i,0,1);return[r,a,l,o]}return null};_c.to.hex=function(...n){return"#"+Fb(n[0])+Fb(n[1])+Fb(n[2])+(n[3]<1?Fb(Math.round(n[3]*255)):"")};_c.to.rgb=function(...n){return n.length<4||n[3]===1?"rgb("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+")":"rgba("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+", "+n[3]+")"};_c.to.rgb.percent=function(...n){const e=Math.round(n[0]/255*100),t=Math.round(n[1]/255*100),i=Math.round(n[2]/255*100);return n.length<4||n[3]===1?"rgb("+e+"%, "+t+"%, "+i+"%)":"rgba("+e+"%, "+t+"%, "+i+"%, "+n[3]+")"};_c.to.hsl=function(...n){return n.length<4||n[3]===1?"hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)":"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+n[3]+")"};_c.to.hwb=function(...n){let e="";return n.length>=4&&n[3]!==1&&(e=", "+n[3]),"hwb("+n[0]+", "+n[1]+"%, "+n[2]+"%"+e+")"};_c.to.keyword=function(...n){return aF[n.slice(0,3)]};function T1(n,e,t){return Math.min(Math.max(e,n),t)}function Fb(n){const e=Math.round(n).toString(16).toUpperCase();return e.length<2?"0"+e:e}const C_={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},sF={};for(const n of Object.keys(C_))sF[C_[n]]=n;const Ar={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},D0=(6/29)**3;for(const n of Object.keys(Ar)){if(!("channels"in Ar[n]))throw new Error("missing channels property: "+n);if(!("labels"in Ar[n]))throw new Error("missing channel labels property: "+n);if(Ar[n].labels.length!==Ar[n].channels)throw new Error("channel and label counts mismatch: "+n);const{channels:e,labels:t}=Ar[n];delete Ar[n].channels,delete Ar[n].labels,Object.defineProperty(Ar[n],"channels",{value:e}),Object.defineProperty(Ar[n],"labels",{value:t})}Ar.rgb.hsl=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.min(e,t,i),a=Math.max(e,t,i),l=a-r;let o,m;switch(a){case r:{o=0;break}case e:{o=(t-i)/l;break}case t:{o=2+(i-e)/l;break}case i:{o=4+(e-t)/l;break}}o=Math.min(o*60,360),o<0&&(o+=360);const C=(r+a)/2;return a===r?m=0:C<=.5?m=l/(a+r):m=l/(2-a-r),[o,m*100,C*100]};Ar.rgb.hsv=function(n){let e,t,i,r,a;const l=n[0]/255,o=n[1]/255,m=n[2]/255,C=Math.max(l,o,m),S=C-Math.min(l,o,m),O=function(U){return(C-U)/6/S+1/2};if(S===0)r=0,a=0;else{switch(a=S/C,e=O(l),t=O(o),i=O(m),C){case l:{r=i-t;break}case o:{r=1/3+e-i;break}case m:{r=2/3+t-e;break}}r<0?r+=1:r>1&&(r-=1)}return[r*360,a*100,C*100]};Ar.rgb.hwb=function(n){const e=n[0],t=n[1];let i=n[2];const r=Ar.rgb.hsl(n)[0],a=1/255*Math.min(e,Math.min(t,i));return i=1-1/255*Math.max(e,Math.max(t,i)),[r,a*100,i*100]};Ar.rgb.cmyk=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.min(1-e,1-t,1-i),a=(1-e-r)/(1-r)||0,l=(1-t-r)/(1-r)||0,o=(1-i-r)/(1-r)||0;return[a*100,l*100,o*100,r*100]};function y$(n,e){return(n[0]-e[0])**2+(n[1]-e[1])**2+(n[2]-e[2])**2}Ar.rgb.keyword=function(n){const e=sF[n];if(e)return e;let t=Number.POSITIVE_INFINITY,i;for(const r of Object.keys(C_)){const a=C_[r],l=y$(n,a);l<t&&(t=l,i=r)}return i};Ar.keyword.rgb=function(n){return C_[n]};Ar.rgb.xyz=function(n){let e=n[0]/255,t=n[1]/255,i=n[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,i=i>.04045?((i+.055)/1.055)**2.4:i/12.92;const r=e*.4124564+t*.3575761+i*.1804375,a=e*.2126729+t*.7151522+i*.072175,l=e*.0193339+t*.119192+i*.9503041;return[r*100,a*100,l*100]};Ar.rgb.lab=function(n){const e=Ar.rgb.xyz(n);let t=e[0],i=e[1],r=e[2];t/=95.047,i/=100,r/=108.883,t=t>D0?t**(1/3):7.787*t+16/116,i=i>D0?i**(1/3):7.787*i+16/116,r=r>D0?r**(1/3):7.787*r+16/116;const a=116*i-16,l=500*(t-i),o=200*(i-r);return[a,l,o]};Ar.hsl.rgb=function(n){const e=n[0]/360,t=n[1]/100,i=n[2]/100;let r,a;if(t===0)return a=i*255,[a,a,a];const l=i<.5?i*(1+t):i+t-i*t,o=2*i-l,m=[0,0,0];for(let C=0;C<3;C++)r=e+1/3*-(C-1),r<0&&r++,r>1&&r--,6*r<1?a=o+(l-o)*6*r:2*r<1?a=l:3*r<2?a=o+(l-o)*(2/3-r)*6:a=o,m[C]=a*255;return m};Ar.hsl.hsv=function(n){const e=n[0];let t=n[1]/100,i=n[2]/100,r=t;const a=Math.max(i,.01);i*=2,t*=i<=1?i:2-i,r*=a<=1?a:2-a;const l=(i+t)/2,o=i===0?2*r/(a+r):2*t/(i+t);return[e,o*100,l*100]};Ar.hsv.rgb=function(n){const e=n[0]/60,t=n[1]/100;let i=n[2]/100;const r=Math.floor(e)%6,a=e-Math.floor(e),l=255*i*(1-t),o=255*i*(1-t*a),m=255*i*(1-t*(1-a));switch(i*=255,r){case 0:return[i,m,l];case 1:return[o,i,l];case 2:return[l,i,m];case 3:return[l,o,i];case 4:return[m,l,i];case 5:return[i,l,o]}};Ar.hsv.hsl=function(n){const e=n[0],t=n[1]/100,i=n[2]/100,r=Math.max(i,.01);let a,l;l=(2-t)*i;const o=(2-t)*r;return a=t*r,a/=o<=1?o:2-o,a=a||0,l/=2,[e,a*100,l*100]};Ar.hwb.rgb=function(n){const e=n[0]/360;let t=n[1]/100,i=n[2]/100;const r=t+i;let a;r>1&&(t/=r,i/=r);const l=Math.floor(6*e),o=1-i;a=6*e-l,(l&1)!==0&&(a=1-a);const m=t+a*(o-t);let C,S,O;switch(l){default:case 6:case 0:{C=o,S=m,O=t;break}case 1:{C=m,S=o,O=t;break}case 2:{C=t,S=o,O=m;break}case 3:{C=t,S=m,O=o;break}case 4:{C=m,S=t,O=o;break}case 5:{C=o,S=t,O=m;break}}return[C*255,S*255,O*255]};Ar.cmyk.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=n[3]/100,a=1-Math.min(1,e*(1-r)+r),l=1-Math.min(1,t*(1-r)+r),o=1-Math.min(1,i*(1-r)+r);return[a*255,l*255,o*255]};Ar.xyz.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100;let r,a,l;return r=e*3.2404542+t*-1.5371385+i*-.4985314,a=e*-.969266+t*1.8760108+i*.041556,l=e*.0556434+t*-.2040259+i*1.0572252,r=r>.0031308?1.055*r**(1/2.4)-.055:r*12.92,a=a>.0031308?1.055*a**(1/2.4)-.055:a*12.92,l=l>.0031308?1.055*l**(1/2.4)-.055:l*12.92,r=Math.min(Math.max(0,r),1),a=Math.min(Math.max(0,a),1),l=Math.min(Math.max(0,l),1),[r*255,a*255,l*255]};Ar.xyz.lab=function(n){let e=n[0],t=n[1],i=n[2];e/=95.047,t/=100,i/=108.883,e=e>D0?e**(1/3):7.787*e+16/116,t=t>D0?t**(1/3):7.787*t+16/116,i=i>D0?i**(1/3):7.787*i+16/116;const r=116*t-16,a=500*(e-t),l=200*(t-i);return[r,a,l]};Ar.lab.xyz=function(n){const e=n[0],t=n[1],i=n[2];let r,a,l;a=(e+16)/116,r=t/500+a,l=a-i/200;const o=a**3,m=r**3,C=l**3;return a=o>D0?o:(a-16/116)/7.787,r=m>D0?m:(r-16/116)/7.787,l=C>D0?C:(l-16/116)/7.787,r*=95.047,a*=100,l*=108.883,[r,a,l]};Ar.lab.lch=function(n){const e=n[0],t=n[1],i=n[2];let r;r=Math.atan2(i,t)*360/2/Math.PI,r<0&&(r+=360);const l=Math.sqrt(t*t+i*i);return[e,l,r]};Ar.lch.lab=function(n){const e=n[0],t=n[1],r=n[2]/360*2*Math.PI,a=t*Math.cos(r),l=t*Math.sin(r);return[e,a,l]};Ar.rgb.ansi16=function(n,e=null){const[t,i,r]=n;let a=e===null?Ar.rgb.hsv(n)[2]:e;if(a=Math.round(a/50),a===0)return 30;let l=30+(Math.round(r/255)<<2|Math.round(i/255)<<1|Math.round(t/255));return a===2&&(l+=60),l};Ar.hsv.ansi16=function(n){return Ar.rgb.ansi16(Ar.hsv.rgb(n),n[2])};Ar.rgb.ansi256=function(n){const e=n[0],t=n[1],i=n[2];return e>>4===t>>4&&t>>4===i>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(i/255*5)};Ar.ansi16.rgb=function(n){n=n[0];let e=n%10;if(e===0||e===7)return n>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const t=(Math.trunc(n>50)+1)*.5,i=(e&1)*t*255,r=(e>>1&1)*t*255,a=(e>>2&1)*t*255;return[i,r,a]};Ar.ansi256.rgb=function(n){if(n=n[0],n>=232){const a=(n-232)*10+8;return[a,a,a]}n-=16;let e;const t=Math.floor(n/36)/5*255,i=Math.floor((e=n%36)/6)/5*255,r=e%6/5*255;return[t,i,r]};Ar.rgb.hex=function(n){const t=(((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255)).toString(16).toUpperCase();return"000000".slice(t.length)+t};Ar.hex.rgb=function(n){const e=n.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=[...t].map(o=>o+o).join(""));const i=Number.parseInt(t,16),r=i>>16&255,a=i>>8&255,l=i&255;return[r,a,l]};Ar.rgb.hcg=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.max(Math.max(e,t),i),a=Math.min(Math.min(e,t),i),l=r-a;let o;const m=l<1?a/(1-l):0;return l<=0?o=0:r===e?o=(t-i)/l%6:r===t?o=2+(i-e)/l:o=4+(e-t)/l,o/=6,o%=1,[o*360,l*100,m*100]};Ar.hsl.hcg=function(n){const e=n[1]/100,t=n[2]/100,i=t<.5?2*e*t:2*e*(1-t);let r=0;return i<1&&(r=(t-.5*i)/(1-i)),[n[0],i*100,r*100]};Ar.hsv.hcg=function(n){const e=n[1]/100,t=n[2]/100,i=e*t;let r=0;return i<1&&(r=(t-i)/(1-i)),[n[0],i*100,r*100]};Ar.hcg.rgb=function(n){const e=n[0]/360,t=n[1]/100,i=n[2]/100;if(t===0)return[i*255,i*255,i*255];const r=[0,0,0],a=e%1*6,l=a%1,o=1-l;let m=0;switch(Math.floor(a)){case 0:{r[0]=1,r[1]=l,r[2]=0;break}case 1:{r[0]=o,r[1]=1,r[2]=0;break}case 2:{r[0]=0,r[1]=1,r[2]=l;break}case 3:{r[0]=0,r[1]=o,r[2]=1;break}case 4:{r[0]=l,r[1]=0,r[2]=1;break}default:r[0]=1,r[1]=0,r[2]=o}return m=(1-t)*i,[(t*r[0]+m)*255,(t*r[1]+m)*255,(t*r[2]+m)*255]};Ar.hcg.hsv=function(n){const e=n[1]/100,t=n[2]/100,i=e+t*(1-e);let r=0;return i>0&&(r=e/i),[n[0],r*100,i*100]};Ar.hcg.hsl=function(n){const e=n[1]/100,i=n[2]/100*(1-e)+.5*e;let r=0;return i>0&&i<.5?r=e/(2*i):i>=.5&&i<1&&(r=e/(2*(1-i))),[n[0],r*100,i*100]};Ar.hcg.hwb=function(n){const e=n[1]/100,t=n[2]/100,i=e+t*(1-e);return[n[0],(i-e)*100,(1-i)*100]};Ar.hwb.hcg=function(n){const e=n[1]/100,i=1-n[2]/100,r=i-e;let a=0;return r<1&&(a=(i-r)/(1-r)),[n[0],r*100,a*100]};Ar.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]};Ar.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]};Ar.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]};Ar.gray.hsl=function(n){return[0,0,n[0]]};Ar.gray.hsv=Ar.gray.hsl;Ar.gray.hwb=function(n){return[0,100,n[0]]};Ar.gray.cmyk=function(n){return[0,0,0,n[0]]};Ar.gray.lab=function(n){return[n[0],0,0]};Ar.gray.hex=function(n){const e=Math.round(n[0]/100*255)&255,i=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(i.length)+i};Ar.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]};function v$(){const n={},e=Object.keys(Ar);for(let{length:t}=e,i=0;i<t;i++)n[e[i]]={distance:-1,parent:null};return n}function C$(n){const e=v$(),t=[n];for(e[n].distance=0;t.length>0;){const i=t.pop(),r=Object.keys(Ar[i]);for(let{length:a}=r,l=0;l<a;l++){const o=r[l],m=e[o];m.distance===-1&&(m.distance=e[i].distance+1,m.parent=i,t.unshift(o))}}return e}function _$(n,e){return function(t){return e(n(t))}}function b$(n,e){const t=[e[n].parent,n];let i=Ar[e[n].parent][n],r=e[n].parent;for(;e[r].parent;)t.unshift(e[r].parent),i=_$(Ar[e[r].parent][r],i),r=e[r].parent;return i.conversion=t,i}function x$(n){const e=C$(n),t={},i=Object.keys(e);for(let{length:r}=i,a=0;a<r;a++){const l=i[a];e[l].parent!==null&&(t[l]=b$(l,e))}return t}const Qc={},M$=Object.keys(Ar);function S$(n){const e=function(...t){const i=t[0];return i==null?i:(i.length>1&&(t=i),n(t))};return"conversion"in n&&(e.conversion=n.conversion),e}function w$(n){const e=function(...t){const i=t[0];if(i==null)return i;i.length>1&&(t=i);const r=n(t);if(typeof r=="object")for(let{length:a}=r,l=0;l<a;l++)r[l]=Math.round(r[l]);return r};return"conversion"in n&&(e.conversion=n.conversion),e}for(const n of M$){Qc[n]={},Object.defineProperty(Qc[n],"channels",{value:Ar[n].channels}),Object.defineProperty(Qc[n],"labels",{value:Ar[n].labels});const e=x$(n),t=Object.keys(e);for(const i of t){const r=e[i];Qc[n][i]=w$(r),Qc[n][i].raw=S$(r)}}const lF=["keyword","gray","hex"],O6={};for(const n of Object.keys(Qc))O6[[...Qc[n].labels].sort().join("")]=n;const I6={};function Ju(n,e){if(!(this instanceof Ju))return new Ju(n,e);if(e&&e in lF&&(e=null),e&&!(e in Qc))throw new Error("Unknown model: "+e);let t,i;if(n==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(n instanceof Ju)this.model=n.model,this.color=[...n.color],this.valpha=n.valpha;else if(typeof n=="string"){const r=_c.get(n);if(r===null)throw new Error("Unable to parse color from string: "+n);this.model=r.model,i=Qc[this.model].channels,this.color=r.value.slice(0,i),this.valpha=typeof r.value[i]=="number"?r.value[i]:1}else if(n.length>0){this.model=e||"rgb",i=Qc[this.model].channels;const r=Array.prototype.slice.call(n,0,i);this.color=T6(r,i),this.valpha=typeof n[i]=="number"?n[i]:1}else if(typeof n=="number")this.model="rgb",this.color=[n>>16&255,n>>8&255,n&255],this.valpha=1;else{this.valpha=1;const r=Object.keys(n);"alpha"in n&&(r.splice(r.indexOf("alpha"),1),this.valpha=typeof n.alpha=="number"?n.alpha:0);const a=r.sort().join("");if(!(a in O6))throw new Error("Unable to parse color from object: "+JSON.stringify(n));this.model=O6[a];const{labels:l}=Qc[this.model],o=[];for(t=0;t<l.length;t++)o.push(n[l[t]]);this.color=T6(o)}if(I6[this.model])for(i=Qc[this.model].channels,t=0;t<i;t++){const r=I6[this.model][t];r&&(this.color[t]=r(this.color[t]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Ju.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(n){let e=this.model in _c.to?this:this.rgb();e=e.round(typeof n=="number"?n:1);const t=e.valpha===1?e.color:[...e.color,this.valpha];return _c.to[e.model](...t)},percentString(n){const e=this.rgb().round(typeof n=="number"?n:1),t=e.valpha===1?e.color:[...e.color,this.valpha];return _c.to.rgb.percent(...t)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const n={},{channels:e}=Qc[this.model],{labels:t}=Qc[this.model];for(let i=0;i<e;i++)n[t[i]]=this.color[i];return this.valpha!==1&&(n.alpha=this.valpha),n},unitArray(){const n=this.rgb().color;return n[0]/=255,n[1]/=255,n[2]/=255,this.valpha!==1&&n.push(this.valpha),n},unitObject(){const n=this.rgb().object();return n.r/=255,n.g/=255,n.b/=255,this.valpha!==1&&(n.alpha=this.valpha),n},round(n){return n=Math.max(n||0,0),new Ju([...this.color.map(B$(n)),this.valpha],this.model)},alpha(n){return n!==void 0?new Ju([...this.color,Math.max(0,Math.min(1,n))],this.model):this.valpha},red:su("rgb",0,gc(255)),green:su("rgb",1,gc(255)),blue:su("rgb",2,gc(255)),hue:su(["hsl","hsv","hsl","hwb","hcg"],0,n=>(n%360+360)%360),saturationl:su("hsl",1,gc(100)),lightness:su("hsl",2,gc(100)),saturationv:su("hsv",1,gc(100)),value:su("hsv",2,gc(100)),chroma:su("hcg",1,gc(100)),gray:su("hcg",2,gc(100)),white:su("hwb",1,gc(100)),wblack:su("hwb",2,gc(100)),cyan:su("cmyk",0,gc(100)),magenta:su("cmyk",1,gc(100)),yellow:su("cmyk",2,gc(100)),black:su("cmyk",3,gc(100)),x:su("xyz",0,gc(95.047)),y:su("xyz",1,gc(100)),z:su("xyz",2,gc(108.833)),l:su("lab",0,gc(100)),a:su("lab",1),b:su("lab",2),keyword(n){return n!==void 0?new Ju(n):Qc[this.model].keyword(this.color)},hex(n){return n!==void 0?new Ju(n):_c.to.hex(...this.rgb().round().color)},hexa(n){if(n!==void 0)return new Ju(n);const e=this.rgb().round().color;let t=Math.round(this.valpha*255).toString(16).toUpperCase();return t.length===1&&(t="0"+t),_c.to.hex(...e)+t},rgbNumber(){const n=this.rgb().color;return(n[0]&255)<<16|(n[1]&255)<<8|n[2]&255},luminosity(){const n=this.rgb().color,e=[];for(const[t,i]of n.entries()){const r=i/255;e[t]=r<=.04045?r/12.92:((r+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(n){const e=this.luminosity(),t=n.luminosity();return e>t?(e+.05)/(t+.05):(t+.05)/(e+.05)},level(n){const e=this.contrast(n);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const n=this.rgb().color;return(n[0]*2126+n[1]*7152+n[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const n=this.rgb();for(let e=0;e<3;e++)n.color[e]=255-n.color[e];return n},lighten(n){const e=this.hsl();return e.color[2]+=e.color[2]*n,e},darken(n){const e=this.hsl();return e.color[2]-=e.color[2]*n,e},saturate(n){const e=this.hsl();return e.color[1]+=e.color[1]*n,e},desaturate(n){const e=this.hsl();return e.color[1]-=e.color[1]*n,e},whiten(n){const e=this.hwb();return e.color[1]+=e.color[1]*n,e},blacken(n){const e=this.hwb();return e.color[2]+=e.color[2]*n,e},grayscale(){const n=this.rgb().color,e=n[0]*.3+n[1]*.59+n[2]*.11;return Ju.rgb(e,e,e)},fade(n){return this.alpha(this.valpha-this.valpha*n)},opaquer(n){return this.alpha(this.valpha+this.valpha*n)},rotate(n){const e=this.hsl();let t=e.color[0];return t=(t+n)%360,t=t<0?360+t:t,e.color[0]=t,e},mix(n,e){if(!n||!n.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof n);const t=n.rgb(),i=this.rgb(),r=e===void 0?.5:e,a=2*r-1,l=t.alpha()-i.alpha(),o=((a*l===-1?a:(a+l)/(1+a*l))+1)/2,m=1-o;return Ju.rgb(o*t.red()+m*i.red(),o*t.green()+m*i.green(),o*t.blue()+m*i.blue(),t.alpha()*r+i.alpha()*(1-r))}};for(const n of Object.keys(Qc)){if(lF.includes(n))continue;const{channels:e}=Qc[n];Ju.prototype[n]=function(...t){return this.model===n?new Ju(this):t.length>0?new Ju(t,n):new Ju([...O$(Qc[this.model][n].raw(this.color)),this.valpha],n)},Ju[n]=function(...t){let i=t[0];return typeof i=="number"&&(i=T6(t,e)),new Ju(i,n)}}function E$(n,e){return Number(n.toFixed(e))}function B$(n){return function(e){return E$(e,n)}}function su(n,e,t){n=Array.isArray(n)?n:[n];for(const i of n)(I6[i]||=[])[e]=t;return n=n[0],function(i){let r;return i!==void 0?(t&&(i=t(i)),r=this[n](),r.color[e]=i,r):(r=this[n]().color[e],t&&(r=t(r)),r)}}function gc(n){return function(e){return Math.max(0,Math.min(n,e))}}function O$(n){return Array.isArray(n)?n:[n]}function T6(n,e){for(let t=0;t<e;t++)typeof n[t]!="number"&&(n[t]=0);return n}function hs(){var n="/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",e="9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",statementMap:{0:{start:{line:2,column:9},end:{line:2,column:15}},1:{start:{line:3,column:15},end:{line:3,column:21}},2:{start:{line:4,column:12},end:{line:4,column:16}},3:{start:{line:8,column:4},end:{line:8,column:20}},4:{start:{line:9,column:4},end:{line:9,column:52}},5:{start:{line:10,column:4},end:{line:10,column:93}},6:{start:{line:11,column:4},end:{line:11,column:70}},7:{start:{line:12,column:4},end:{line:12,column:27}},8:{start:{line:13,column:4},end:{line:13,column:29}},9:{start:{line:14,column:4},end:{line:14,column:27}},10:{start:{line:17,column:4},end:{line:17,column:60}},11:{start:{line:20,column:4},end:{line:22,column:6}},12:{start:{line:23,column:4},end:{line:23,column:57}},13:{start:{line:24,column:4},end:{line:24,column:27}},14:{start:{line:27,column:4},end:{line:27,column:57}},15:{start:{line:27,column:33},end:{line:27,column:55}},16:{start:{line:28,column:4},end:{line:28,column:57}},17:{start:{line:28,column:33},end:{line:28,column:55}},18:{start:{line:29,column:4},end:{line:29,column:58}},19:{start:{line:29,column:34},end:{line:29,column:56}},20:{start:{line:32,column:4},end:{line:32,column:60}},21:{start:{line:33,column:4},end:{line:33,column:23}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:16},end:{line:6,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:13},end:{line:15,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:20},end:{line:18,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:18},end:{line:25,column:3}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:22},end:{line:30,column:3}},line:26},5:{name:"(anonymous_5)",decl:{start:{line:27,column:27},end:{line:27,column:28}},loc:{start:{line:27,column:33},end:{line:27,column:55}},line:27},6:{name:"(anonymous_6)",decl:{start:{line:28,column:27},end:{line:28,column:28}},loc:{start:{line:28,column:33},end:{line:28,column:55}},line:28},7:{name:"(anonymous_7)",decl:{start:{line:29,column:28},end:{line:29,column:29}},loc:{start:{line:29,column:34},end:{line:29,column:56}},line:29},8:{name:"(anonymous_8)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:13},end:{line:34,column:3}},line:31}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts"],names:[],mappings:"AAEA,qBAAqB,YAAY;AAAA,EAC/B,OAAuB;AAAA,EACvB,aAAyC;AAAA,EACzC,UAAkC;AAAA,EAElC,cAAc;AAAA,EAAC;AAAA,EAEf,MAAM,KAAU;AACd,SAAK,OAAO;AACZ,SAAK,aAAa,SAAS,cAAc,KAAK;AAC9C,SAAK,WAAW,YAAY;AAC5B,SAAK,WAAW,aAAa,eAAe,oBAAoB;AAChE,SAAK,SAAS,OAAO;AACrB,SAAK,kBAAkB;AAEvB,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,kBAAkB;AAChB,SAAK,QAAS,YAAY,KAAK,KAAM,QAAQ,EAAE,QAAQ,CAAC;AAAA,EAC1D;AAAA,EAEA,SAAS,OAAe;AACtB,SAAK,WAAY,YAAY;AAAA,QACzB,KAAK;AAAA;AAET,SAAK,UAAU,KAAK,WAAY,cAAc,MAAM;AACpD,SAAK,gBAAgB;AAAA,EACvB;AAAA,EAEA,oBAAoB;AAClB,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,WAAW,MAAM,KAAK,gBAAgB,CAAC;AAAA,EACvD;AAAA,EAEA,WAAW;AACT,SAAK,WAAY,WAAY,YAAY,KAAK,UAAW;AACzD,SAAK,OAAO;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return hs=function(){return l},l}hs();class I${_map=(hs().s[0]++,void 0);_container=(hs().s[1]++,void 0);_textEl=(hs().s[2]++,null);constructor(){hs().f[0]++}onAdd(e){return hs().f[1]++,hs().s[3]++,this._map=e,hs().s[4]++,this._container=document.createElement("div"),hs().s[5]++,this._container.className="maplibregl-ctrl maplibregl-ctrl-group maplibregl-ctrl-zoom",hs().s[6]++,this._container.setAttribute("data-wd-key","maplibre:ctrl-zoom"),hs().s[7]++,this.setLabel("Zoom:"),hs().s[8]++,this.addEventListeners(),hs().s[9]++,this._container}updateZoomLevel(){hs().f[2]++,hs().s[10]++,this._textEl.innerHTML=this._map.getZoom().toFixed(2)}setLabel(e){hs().f[3]++,hs().s[11]++,this._container.innerHTML=`
      ${e} <span></span>
    `,hs().s[12]++,this._textEl=this._container.querySelector("span"),hs().s[13]++,this.updateZoomLevel()}addEventListeners(){hs().f[4]++,hs().s[14]++,this._map.on("render",()=>(hs().f[5]++,hs().s[15]++,this.updateZoomLevel())),hs().s[16]++,this._map.on("zoomIn",()=>(hs().f[6]++,hs().s[17]++,this.updateZoomLevel())),hs().s[18]++,this._map.on("zoomOut",()=>(hs().f[7]++,hs().s[19]++,this.updateZoomLevel()))}onRemove(){hs().f[8]++,hs().s[20]++,this._container.parentNode.removeChild(this._container),hs().s[21]++,this._map=void 0}}function k6(n,e,t){const i={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(i["source-layer"]=t),i}function D6(n,e,t,i){const r={id:[t,i,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return i&&(r["source-layer"]=i),r}function R6(n,e,t){const i={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(i["source-layer"]=t),i}function T$(n,e){const t=[],i=[],r=[];function a(l){return{circle:e(l,.8),line:e(l,.6),polygon:e(l,.3),polygonOutline:e(l,.6),default:e(l,1)}}return Object.keys(n).forEach(l=>{const o=n[l];if(!o||o.length===0){const m=a(l);i.push(k6(m.circle,l)),r.push(R6(m.line,l)),t.push(D6(m.polygon,m.polygonOutline,l))}else o.forEach(m=>{const C=a(m);i.push(k6(C.circle,l,m)),r.push(R6(C.line,l,m)),t.push(D6(C.polygon,C.polygonOutline,l,m))})}),t.concat(r).concat(i)}function k$(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const i={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},r={};return Object.keys(n.sources).forEach(a=>{const l=n.sources[a];(l.type==="vector"||l.type==="geojson")&&(r[a]=l)}),Object.assign(n,{layers:[i].concat(e),sources:r})}const B4={polygonLayer:D6,lineLayer:R6,circleLayer:k6,generateInspectStyle:k$,generateColoredLayers:T$};function vo(){var n="/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",e="aec0f701e803624fae461cc89b5fc887ff556587",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",statementMap:{0:{start:{line:4,column:2},end:{line:8,column:3}},1:{start:{line:5,column:4},end:{line:5,column:33}},2:{start:{line:6,column:9},end:{line:8,column:3}},3:{start:{line:7,column:4},end:{line:7,column:30}},4:{start:{line:9,column:2},end:{line:13,column:3}},5:{start:{line:10,column:4},end:{line:10,column:28}},6:{start:{line:12,column:4},end:{line:12,column:23}},7:{start:{line:14,column:2},end:{line:14,column:29}},8:{start:{line:15,column:2},end:{line:15,column:11}},9:{start:{line:18,column:2},end:{line:18,column:84}},10:{start:{line:18,column:72},end:{line:18,column:84}},11:{start:{line:19,column:24},end:{line:19,column:51}},12:{start:{line:20,column:16},end:{line:20,column:52}},13:{start:{line:21,column:2},end:{line:23,column:3}},14:{start:{line:22,column:4},end:{line:22,column:104}},15:{start:{line:24,column:2},end:{line:26,column:3}},16:{start:{line:25,column:4},end:{line:25,column:96}},17:{start:{line:27,column:2},end:{line:29,column:3}},18:{start:{line:28,column:4},end:{line:28,column:94}},19:{start:{line:30,column:2},end:{line:30,column:14}}},fnMap:{0:{name:"changeLayer",decl:{start:{line:3,column:9},end:{line:3,column:20}},loc:{start:{line:3,column:31},end:{line:16,column:1}},line:3},1:{name:"colorHighlightedLayer",decl:{start:{line:17,column:16},end:{line:17,column:37}},loc:{start:{line:17,column:45},end:{line:31,column:1}},line:17}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:8,column:3}},{start:{line:6,column:9},end:{line:8,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:8,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},2:{loc:{start:{line:9,column:2},end:{line:13,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:13,column:3}},{start:{line:11,column:9},end:{line:13,column:3}}],line:9},3:{loc:{start:{line:18,column:2},end:{line:18,column:84}},type:"if",locations:[{start:{line:18,column:2},end:{line:18,column:84}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},4:{loc:{start:{line:18,column:6},end:{line:18,column:70}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:12}},{start:{line:18,column:16},end:{line:18,column:43}},{start:{line:18,column:47},end:{line:18,column:70}}],line:18},5:{loc:{start:{line:19,column:24},end:{line:19,column:51}},type:"binary-expr",locations:[{start:{line:19,column:24},end:{line:19,column:45}},{start:{line:19,column:49},end:{line:19,column:51}}],line:19},6:{loc:{start:{line:21,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:23,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},7:{loc:{start:{line:21,column:6},end:{line:21,column:62}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:27}},{start:{line:21,column:31},end:{line:21,column:62}}],line:21},8:{loc:{start:{line:24,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},9:{loc:{start:{line:24,column:6},end:{line:24,column:56}},type:"binary-expr",locations:[{start:{line:24,column:6},end:{line:24,column:29}},{start:{line:24,column:33},end:{line:24,column:56}}],line:24},10:{loc:{start:{line:27,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:27,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:27}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/highlight.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,YAAY;AAKnB,SAAS,YAAY,GAAqB,OAA2B;AACnE,MAAG,EAAE,SAAS,UAAU;AACtB,MAAE,MAAO,eAAe,IAAI;AAAA,EAC9B,WAAU,EAAE,SAAS,QAAQ;AAC3B,MAAE,MAAO,YAAY,IAAI;AAAA,EAC3B;AAEA,MAAG,YAAY,OAAO;AACpB,MAAE,SAAS,MAAM;AAAA,EACnB,OAAO;AACL,WAAO,EAAE,QAAQ;AAAA,EACnB;AACA,IAAE,KAAK,EAAE,KAAK;AACd,SAAO;AACT;AAEO,gBAAS,sBAAsB,OAAqD;AACzF,MAAG,CAAC,SAAS,MAAM,SAAS,gBAAgB,MAAM,SAAS,SAAU,QAAO;AAE5E,QAAM,gBAAgB,MAAM,cAAc,KAAK;AAC/C,QAAM,QAAQ,OAAO,YAAY,eAAe,CAAC;AAEjD,MAAG,MAAM,SAAS,UAAU,MAAM,SAAS,kBAAkB;AAC3D,WAAO,YAAY,SAAS,aAAa,OAAO,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EACpG;AAEA,MAAG,MAAM,SAAS,YAAY,MAAM,SAAS,UAAU;AACrD,WAAO,YAAY,SAAS,YAAY,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC5F;AAEA,MAAG,MAAM,SAAS,QAAQ;AACxB,WAAO,YAAY,SAAS,UAAU,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC1F;AAEA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"aec0f701e803624fae461cc89b5fc887ff556587"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return vo=function(){return l},l}vo();function O4(n,e){return vo().f[0]++,vo().s[0]++,n.type==="circle"?(vo().b[0][0]++,vo().s[1]++,n.paint["circle-radius"]=3):(vo().b[0][1]++,vo().s[2]++,n.type==="line"?(vo().b[1][0]++,vo().s[3]++,n.paint["line-width"]=2):vo().b[1][1]++),vo().s[4]++,"filter"in e?(vo().b[2][0]++,vo().s[5]++,n.filter=e.filter):(vo().b[2][1]++,vo().s[6]++,delete n.filter),vo().s[7]++,n.id=n.id+"_highlight",vo().s[8]++,n}function D$(n){if(vo().f[1]++,vo().s[9]++,vo().b[4][0]++,!n||(vo().b[4][1]++,n.type==="background")||(vo().b[4][2]++,n.type==="raster"))return vo().b[3][0]++,vo().s[10]++,null;vo().b[3][1]++;const e=(vo().s[11]++,vo().b[5][0]++,n["source-layer"]||(vo().b[5][1]++,"")),t=(vo().s[12]++,nF.brightColor(e,1));return vo().s[13]++,vo().b[7][0]++,n.type==="fill"||(vo().b[7][1]++,n.type==="fill-extrusion")?(vo().b[6][0]++,vo().s[14]++,O4(B4.polygonLayer(t,t,n.source,n["source-layer"]),n)):(vo().b[6][1]++,vo().s[15]++,vo().b[9][0]++,n.type==="symbol"||(vo().b[9][1]++,n.type==="circle")?(vo().b[8][0]++,vo().s[16]++,O4(B4.circleLayer(t,n.source,n["source-layer"]),n)):(vo().b[8][1]++,vo().s[17]++,n.type==="line"?(vo().b[10][0]++,vo().s[18]++,O4(B4.lineLayer(t,n.source,n["source-layer"]),n)):(vo().b[10][1]++,vo().s[19]++,null)))}function aO(){var n="/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",e="a9dc98f82c73787713de0672aff7a601bfeb069d",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:115}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,WAAW,iBAAiB,gFAAgF,KAAK;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a9dc98f82c73787713de0672aff7a601bfeb069d"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return aO=function(){return l},l}aO();aO().s[0]++;rv.setRTLTextPlugin("https://unpkg.com/@mapbox/mapbox-gl-rtl-text@0.2.3/mapbox-gl-rtl-text.min.js",!1);function I4(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function o(S){try{C(i.next(S))}catch(O){l(O)}}function m(S){try{C(i.throw(S))}catch(O){l(O)}}function C(S){S.done?a(S.value):r(S.value).then(o,m)}C((i=i.apply(n,e||[])).next())})}var zb=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function e2(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var T4,kI;function AF(){if(kI)return T4;kI=1,T4=e;var n=Object.prototype.hasOwnProperty;function e(){for(var t={},i=0;i<arguments.length;i++){var r=arguments[i];for(var a in r)n.call(r,a)&&(t[a]=r[a])}return t}return T4}var k4={exports:{}},DI;function R$(){return DI||(DI=1,function(n,e){(function(){var t={};n.exports=t,t.simpleFilter=function(i,r){return r.filter(function(a){return t.test(i,a)})},t.test=function(i,r){return t.match(i,r)!==null},t.match=function(i,r,a){a=a||{};var l=0,o=[],m=r.length,C=0,S=0,O=a.pre||"",U=a.post||"",K=a.caseSensitive&&r||r.toLowerCase(),z;i=a.caseSensitive&&i||i.toLowerCase();for(var j=0;j<m;j++)z=r[j],K[j]===i[l]?(z=O+z+U,l+=1,S+=1+S):S=0,C+=S,o[o.length]=z;return l===i.length?(C=K===i?1/0:C,{rendered:o.join(""),score:C}):null},t.filter=function(i,r,a){return!r||r.length===0?[]:typeof i!="string"?r:(a=a||{},r.reduce(function(l,o,m,C){var S=o;a.extract&&(S=a.extract(o));var O=t.match(i,S,a);return O!=null&&(l[l.length]={string:O.rendered,score:O.score,index:m,original:o}),l},[]).sort(function(l,o){var m=o.score-l.score;return m||l.index-o.index}))}})()}(k4)),k4.exports}var D4,RI;function P$(){if(RI)return D4;RI=1;var n=function(e){return this.component=e,this.items=[],this.active=e.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};return n.prototype.show=function(){this.element.style.display="block"},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.add=function(e){this.items.push(e)},n.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0},n.prototype.isEmpty=function(){return!this.items.length},n.prototype.isVisible=function(){return this.element.style.display==="block"},n.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()},n.prototype.drawItem=function(e,t){var i=document.createElement("li"),r=document.createElement("a");t&&(i.className+=" active"),r.innerHTML=e.string,i.appendChild(r),this.element.appendChild(i),i.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),i.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,e)}).bind(this))},n.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()},n.prototype.move=function(e){this.active=e,this.draw()},n.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)},n.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)},n.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()},D4=n,D4}var R4,PI;function K$(){if(PI)return R4;PI=1;var n=AF(),e=R$(),t=P$(),i=function(r,a,l){return l=l||{},this.options=n({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},l),this.el=r,this.data=a||[],this.list=new t(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(o){this.handleKeyUp(o.keyCode,o)}).bind(this),!1),this.el.addEventListener("keydown",(function(o){this.handleKeyDown(o)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(o){this.handlePaste(o)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};return i.prototype.handleKeyUp=function(r,a){if(!(r===40||r===38||r===27||r===9)){if(r===13){this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),a.stopPropagation());return}this.handleInputChange(this.el.value)}},i.prototype.handleKeyDown=function(r){switch(r.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&r.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}},i.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},i.prototype.handlePaste=function(r){if(r.clipboardData)this.handleInputChange(r.clipboardData.getData("Text"));else{var a=this;setTimeout(function(){a.handleInputChange(r.target.value)},100)}},i.prototype.handleInputChange=function(r){if(this.query=this.normalize(r),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(a){for(var l=0;l<a.length&&(this.list.add(a[l]),l!==this.options.limit-1);l++);this.list.draw()}).bind(this))},i.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},i.prototype.update=function(r){this.data=r,this.handleKeyUp()},i.prototype.clear=function(){this.data=[],this.list.clear()},i.prototype.normalize=function(r){return r=r.toLowerCase(),r},i.prototype.match=function(r,a){return r.indexOf(a)>-1},i.prototype.value=function(r){if(this.selected=r,this.el.value=this.getItemValue(r||{place_name:this.query}),document.createEvent){var a=document.createEvent("HTMLEvents");a.initEvent("change",!0,!1),this.el.dispatchEvent(a)}else this.el.fireEvent("onchange")},i.prototype.getCandidates=function(r){var a={pre:"<strong>",post:"</strong>",extract:(function(o){return this.getItemValue(o)}).bind(this)},l;this.options.filter?(l=e.filter(this.query,this.data,a),l=l.map((function(o){return{original:o.original,string:this.render(o.original,o.string)}}).bind(this))):l=this.data.map((function(o){var m=this.render(o);return{original:o,string:m}}).bind(this)),r(l)},i.prototype.getItemValue=function(r){return r},i.prototype.render=function(r,a){if(a)return a;for(var l=r.original?this.getItemValue(r.original):this.getItemValue(r),o=this.normalize(l),m=o.lastIndexOf(this.query);m>-1;){var C=m+this.query.length;l=l.slice(0,m)+"<strong>"+l.slice(m,C)+"</strong>"+l.slice(C),m=o.slice(0,m).lastIndexOf(this.query)}return l},i.prototype.renderError=function(r){this.list.drawError(r)},R4=i,R4}var P4,KI;function U$(){if(KI)return P4;KI=1;var n=K$();return P4=n,typeof window<"u"&&(window.Suggestions=n),P4}var L$=U$(),F$=e2(L$),Mx={exports:{}},z$=Mx.exports,UI;function N$(){return UI||(UI=1,function(n){(function(e,t,i){n.exports?n.exports=i():e[t]=i()})(z$,"subtag",function(){var e="",t=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function i(m){return m.match(t)||[]}function r(m){return i(m).filter(function(C,S){return C&&S})}function a(m){return m=i(m),{language:m[1]||e,extlang:m[2]||e,script:m[3]||e,region:m[4]||e}}function l(m,C,S){Object.defineProperty(m,C,{value:S,enumerable:!0})}function o(m,C,S){function O(U){return i(U)[m]||e}l(O,"pattern",C),l(a,S,O)}return o(1,/^[a-zA-Z]{2,3}$/,"language"),o(2,/^[a-zA-Z]{3}$/,"extlang"),o(3,/^[a-zA-Z]{4}$/,"script"),o(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),l(a,"split",r),a})}(Mx)),Mx.exports}var G$=N$(),j$=e2(G$),K4,LI;function W$(){if(LI)return K4;LI=1;var n="Expected a function",e=NaN,t="[object Symbol]",i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt,m=typeof zb=="object"&&zb&&zb.Object===Object&&zb,C=typeof self=="object"&&self&&self.Object===Object&&self,S=m||C||Function("return this")(),O=Object.prototype,U=O.toString,K=Math.max,z=Math.min,j=function(){return S.Date.now()};function Q(Z,oe,W){var ue,ge,ye,Me,Be,we,qe=0,xe=!1,ze=!1,ot=!0;if(typeof Z!="function")throw new TypeError(n);oe=ne(oe)||0,ee(W)&&(xe=!!W.leading,ze="maxWait"in W,ye=ze?K(ne(W.maxWait)||0,oe):ye,ot="trailing"in W?!!W.trailing:ot);function yt(Rt){var Le=ue,Pe=ge;return ue=ge=void 0,qe=Rt,Me=Z.apply(Pe,Le),Me}function nt(Rt){return qe=Rt,Be=setTimeout(tt,oe),xe?yt(Rt):Me}function be(Rt){var Le=Rt-we,Pe=Rt-qe,Re=oe-Le;return ze?z(Re,ye-Pe):Re}function Ne(Rt){var Le=Rt-we,Pe=Rt-qe;return we===void 0||Le>=oe||Le<0||ze&&Pe>=ye}function tt(){var Rt=j();if(Ne(Rt))return lt(Rt);Be=setTimeout(tt,be(Rt))}function lt(Rt){return Be=void 0,ot&&ue?yt(Rt):(ue=ge=void 0,Me)}function It(){Be!==void 0&&clearTimeout(Be),qe=0,ue=we=ge=Be=void 0}function pt(){return Be===void 0?Me:lt(j())}function St(){var Rt=j(),Le=Ne(Rt);if(ue=arguments,ge=this,we=Rt,Le){if(Be===void 0)return nt(we);if(ze)return Be=setTimeout(tt,oe),yt(we)}return Be===void 0&&(Be=setTimeout(tt,oe)),Me}return St.cancel=It,St.flush=pt,St}function ee(Z){var oe=typeof Z;return!!Z&&(oe=="object"||oe=="function")}function V(Z){return!!Z&&typeof Z=="object"}function ae(Z){return typeof Z=="symbol"||V(Z)&&U.call(Z)==t}function ne(Z){if(typeof Z=="number")return Z;if(ae(Z))return e;if(ee(Z)){var oe=typeof Z.valueOf=="function"?Z.valueOf():Z;Z=ee(oe)?oe+"":oe}if(typeof Z!="string")return Z===0?Z:+Z;Z=Z.replace(i,"");var W=a.test(Z);return W||l.test(Z)?o(Z.slice(2),W?2:8):r.test(Z)?e:+Z}return K4=Q,K4}var Q$=W$(),Y$=e2(Q$),q$=AF(),Wm=e2(q$),Nb={exports:{}},FI;function H$(){if(FI)return Nb.exports;FI=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(Z,oe,W){return Function.prototype.apply.call(Z,oe,W)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(Z){return Object.getOwnPropertyNames(Z).concat(Object.getOwnPropertySymbols(Z))}:t=function(Z){return Object.getOwnPropertyNames(Z)};function i(ne){console&&console.warn&&console.warn(ne)}var r=Number.isNaN||function(Z){return Z!==Z};function a(){a.init.call(this)}Nb.exports=a,Nb.exports.once=ee,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var l=10;function o(ne){if(typeof ne!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ne)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(ne){if(typeof ne!="number"||ne<0||r(ne))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ne+".");l=ne}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(Z){if(typeof Z!="number"||Z<0||r(Z))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Z+".");return this._maxListeners=Z,this};function m(ne){return ne._maxListeners===void 0?a.defaultMaxListeners:ne._maxListeners}a.prototype.getMaxListeners=function(){return m(this)},a.prototype.emit=function(Z){for(var oe=[],W=1;W<arguments.length;W++)oe.push(arguments[W]);var ue=Z==="error",ge=this._events;if(ge!==void 0)ue=ue&&ge.error===void 0;else if(!ue)return!1;if(ue){var ye;if(oe.length>0&&(ye=oe[0]),ye instanceof Error)throw ye;var Me=new Error("Unhandled error."+(ye?" ("+ye.message+")":""));throw Me.context=ye,Me}var Be=ge[Z];if(Be===void 0)return!1;if(typeof Be=="function")e(Be,this,oe);else for(var we=Be.length,qe=z(Be,we),W=0;W<we;++W)e(qe[W],this,oe);return!0};function C(ne,Z,oe,W){var ue,ge,ye;if(o(oe),ge=ne._events,ge===void 0?(ge=ne._events=Object.create(null),ne._eventsCount=0):(ge.newListener!==void 0&&(ne.emit("newListener",Z,oe.listener?oe.listener:oe),ge=ne._events),ye=ge[Z]),ye===void 0)ye=ge[Z]=oe,++ne._eventsCount;else if(typeof ye=="function"?ye=ge[Z]=W?[oe,ye]:[ye,oe]:W?ye.unshift(oe):ye.push(oe),ue=m(ne),ue>0&&ye.length>ue&&!ye.warned){ye.warned=!0;var Me=new Error("Possible EventEmitter memory leak detected. "+ye.length+" "+String(Z)+" listeners added. Use emitter.setMaxListeners() to increase limit");Me.name="MaxListenersExceededWarning",Me.emitter=ne,Me.type=Z,Me.count=ye.length,i(Me)}return ne}a.prototype.addListener=function(Z,oe){return C(this,Z,oe,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(Z,oe){return C(this,Z,oe,!0)};function S(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function O(ne,Z,oe){var W={fired:!1,wrapFn:void 0,target:ne,type:Z,listener:oe},ue=S.bind(W);return ue.listener=oe,W.wrapFn=ue,ue}a.prototype.once=function(Z,oe){return o(oe),this.on(Z,O(this,Z,oe)),this},a.prototype.prependOnceListener=function(Z,oe){return o(oe),this.prependListener(Z,O(this,Z,oe)),this},a.prototype.removeListener=function(Z,oe){var W,ue,ge,ye,Me;if(o(oe),ue=this._events,ue===void 0)return this;if(W=ue[Z],W===void 0)return this;if(W===oe||W.listener===oe)--this._eventsCount===0?this._events=Object.create(null):(delete ue[Z],ue.removeListener&&this.emit("removeListener",Z,W.listener||oe));else if(typeof W!="function"){for(ge=-1,ye=W.length-1;ye>=0;ye--)if(W[ye]===oe||W[ye].listener===oe){Me=W[ye].listener,ge=ye;break}if(ge<0)return this;ge===0?W.shift():j(W,ge),W.length===1&&(ue[Z]=W[0]),ue.removeListener!==void 0&&this.emit("removeListener",Z,Me||oe)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(Z){var oe,W,ue;if(W=this._events,W===void 0)return this;if(W.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):W[Z]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete W[Z]),this;if(arguments.length===0){var ge=Object.keys(W),ye;for(ue=0;ue<ge.length;++ue)ye=ge[ue],ye!=="removeListener"&&this.removeAllListeners(ye);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(oe=W[Z],typeof oe=="function")this.removeListener(Z,oe);else if(oe!==void 0)for(ue=oe.length-1;ue>=0;ue--)this.removeListener(Z,oe[ue]);return this};function U(ne,Z,oe){var W=ne._events;if(W===void 0)return[];var ue=W[Z];return ue===void 0?[]:typeof ue=="function"?oe?[ue.listener||ue]:[ue]:oe?Q(ue):z(ue,ue.length)}a.prototype.listeners=function(Z){return U(this,Z,!0)},a.prototype.rawListeners=function(Z){return U(this,Z,!1)},a.listenerCount=function(ne,Z){return typeof ne.listenerCount=="function"?ne.listenerCount(Z):K.call(ne,Z)},a.prototype.listenerCount=K;function K(ne){var Z=this._events;if(Z!==void 0){var oe=Z[ne];if(typeof oe=="function")return 1;if(oe!==void 0)return oe.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function z(ne,Z){for(var oe=new Array(Z),W=0;W<Z;++W)oe[W]=ne[W];return oe}function j(ne,Z){for(;Z+1<ne.length;Z++)ne[Z]=ne[Z+1];ne.pop()}function Q(ne){for(var Z=new Array(ne.length),oe=0;oe<Z.length;++oe)Z[oe]=ne[oe].listener||ne[oe];return Z}function ee(ne,Z){return new Promise(function(oe,W){function ue(ye){ne.removeListener(Z,ge),W(ye)}function ge(){typeof ne.removeListener=="function"&&ne.removeListener("error",ue),oe([].slice.call(arguments))}ae(ne,Z,ge,{once:!0}),Z!=="error"&&V(ne,ue,{once:!0})})}function V(ne,Z,oe){typeof ne.on=="function"&&ae(ne,"error",Z,oe)}function ae(ne,Z,oe,W){if(typeof ne.on=="function")W.once?ne.once(Z,oe):ne.on(Z,oe);else if(typeof ne.addEventListener=="function")ne.addEventListener(Z,function ue(ge){W.once&&ne.removeEventListener(Z,ue),oe(ge)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ne)}return Nb.exports}var V$=H$();const zI={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}},$$={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"לחפש",ja:"サーチ",lv:"Meklēt",pt:"Procurar",sr:"Претрага",zh:"搜索",cs:"Vyhledávání",hu:"Keresés",ka:"ძიება",nb:"Søke",sk:"Vyhľadávanie",th:"ค้นหา",fi:"Hae",is:"Leita",ko:"수색",pl:"Szukaj",sl:"Iskanje",fa:"جستجو",ru:"Поиск",es:"Buscar"},Z$={en:"No results found",de:"Keine Ergebnisse gefunden",es:"No hay resultados"},X$={en:"There was an error reaching the server",de:"Verbindung fehlgeschlagen",es:"Error al conectarse al servidor"};var mC={placeholder:$$,errorNoResults:Z$,errorConnectionFailed:X$};const J$=/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/;class eZ{constructor(e,t){this.options={zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:void 0,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,proximityMinZoom:9,getItemValue:i=>i.text!==void 0?i.text:i.place_name,render:function(i){if(!i.geometry){const a=i.text,l=a.toLowerCase().indexOf(this.query.toLowerCase()),o=this.query.length,m=a.substring(0,l),C=a.substring(l,l+o),S=a.substring(l+o);return'<div class="maplibregl-ctrl-geocoder--suggestion"><svg class="maplibregl-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="maplibregl-ctrl-geocoder--suggestion-info"><div class="maplibregl-ctrl-geocoder--suggestion-title">'+m+'<span class="maplibregl-ctrl-geocoder--suggestion-match">'+C+"</span>"+S+"</div></div></div>"}const r=i.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--result"><svg class="maplibregl-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="maplibregl-ctrl-geocoder--result-title">'+r[0]+'</div><div class="maplibregl-ctrl-geocoder--result-address">'+r.splice(1,r.length).join(",")+"</div></div></div>"},popupRender:i=>{const r=i.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--suggestion popup-suggestion"><div class="maplibregl-ctrl-geocoder--suggestion-title popup-suggestion-title">'+r[0]+'</div><div class="maplibregl-ctrl-geocoder--suggestion-address popup-suggestion-address">'+r.splice(1,r.length).join(",")+"</div></div>"},showResultMarkers:!0,debounceSearch:200},this._eventEmitter=new V$.EventEmitter,this.options=Wm({},this.options,t),this.fresh=!0,this.lastSelected=null,this.geocoderApi=e}addTo(e){function t(i,r){if(!document.body.contains(r))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const a=i.onAdd();r.appendChild(a)}if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const i=document.querySelectorAll(e);if(i.length===0)throw new Error("Element "+e+"not found.");if(i.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,i[0])}else if("addControl"in e)e.addControl(this);else throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element")}onAdd(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);const t=this.container=document.createElement("div");t.className="maplibregl-ctrl-geocoder maplibregl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";const i=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",Y$(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);const r=document.createElement("div");r.classList.add("maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("type","button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="maplibregl-ctrl-geocoder--button";const a=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(a),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),r.appendChild(this._clearEl),r.appendChild(this._loadingEl),t.appendChild(i),t.appendChild(this._inputEl),t.appendChild(r),this._typeahead=new F$(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.container.addEventListener("click",()=>{this._typeahead.update(this._typeahead.data)}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),t}createIcon(e,t){const i=document.createElementNS("http://www.w3.org/2000/svg","svg");if(i.setAttribute("class","maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+e),i.setAttribute("viewBox","0 0 18 18"),i.setAttribute("xml:space","preserve"),i.setAttribute("width","18"),i.setAttribute("height","18"),"innerHTML"in i)i.innerHTML=t;else{const r=document.createElement("div");r.innerHTML="<svg>"+t.valueOf().toString()+"</svg>";const a=r.firstChild,l=a.firstChild;i.appendChild(l)}return i}onRemove(){return this.container.remove(),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this}_onPaste(e){const t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(t)}_onKeyDown(e){if(e.keyCode===27&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();const a=this._inputEl.value;if(!a)return this.fresh=!0,e.keyCode!==9&&this.clear(e),this._clearEl.style.display="none";if(!(e.metaKey||[9,27,37,39,38,40].indexOf(e.keyCode)!==-1)){if(e.keyCode===13)if(!this.options.showResultsWhileTyping)this._typeahead.selected||this._geocode(a);else{this._typeahead.selected==null&&this.geocoderApi.getSuggestions?this._geocode(a,!0):this._typeahead.selected==null&&this.options.showResultMarkers&&this._fitBoundsForMarkers();return}a.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(a)}}_showButton(){this._inputEl.value.length>0&&(this._clearEl.style.display="block")}_hideButton(){this._typeahead.selected&&(this._clearEl.style.display="none")}_onBlur(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()}_onChange(){const e=this._typeahead.selected;if(e&&!e.geometry)e.placeId?this._geocode(e.placeId,!0,!0):this._geocode(e.text,!0);else if(e&&JSON.stringify(e)!==this.lastSelected){if(this._clearEl.style.display="none",this.options.flyTo){let t;if(this._removeResultMarkers(),e.properties&&zI[e.properties.short_code])t=Wm({},this.options.flyTo),this._map&&this._map.fitBounds(zI[e.properties.short_code].bbox,t);else if(e.bbox){const i=e.bbox;t=Wm({},this.options.flyTo),this._map&&this._map.fitBounds([[i[0],i[1]],[i[2],i[3]]],t)}else{const i={zoom:this.options.zoom};t=Wm({},i,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}}this.options.marker&&this._maplibregl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._typeahead.selected=null,this._eventEmitter.emit("result",{result:e})}}_getConfigForRequest(){return["bbox","limit","proximity","countries","types","language","reverseMode"].reduce((i,r)=>(this.options[r]&&(["countries","types","language"].indexOf(r)>-1?i[r]=this.options[r].split(/[\s,]+/):i[r]=this.options[r],r==="proximity"&&this.options[r]&&typeof this.options[r].longitude=="number"&&typeof this.options[r].latitude=="number"&&(i[r]=[this.options[r].longitude,this.options[r].latitude])),i),{})}_geocode(e){return I4(this,arguments,void 0,function*(t,i=!1,r=!1){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t});const a=this._getConfigForRequest(),l=this._createGeocodeRequest(a,t,i,r),o=this.options.localGeocoder?this.options.localGeocoder(t)||[]:[];try{const m=yield l;yield this._handleGeocodeResponse(m,a,t,i,o)}catch(m){this._handleGeocodeErrorResponse(m,o)}return l})}_createGeocodeRequest(e,t,i,r){return this.options.localGeocoderOnly?Promise.resolve({}):this.options.reverseGeocode&&J$.test(t)?this._createReverseGeocodeRequest(t,e):(e.query=t,this.geocoderApi.getSuggestions?i?this.geocoderApi.searchByPlaceId&&r?this.geocoderApi.searchByPlaceId(e):this.geocoderApi.forwardGeocode(e):this.geocoderApi.getSuggestions(e):this.geocoderApi.forwardGeocode(e))}_createReverseGeocodeRequest(e,t){const i=e.split(/[\s(,)?]+/).map(r=>parseFloat(r)).reverse();return t.query=i,t.limit=1,"proximity"in t&&delete t.proximity,this.geocoderApi.reverseGeocode(t)}_handleGeocodeResponse(e,t,i,r,a){return I4(this,void 0,void 0,function*(){this._loadingEl.style.display="none";let l={};e?l=e:l={type:"FeatureCollection",features:[]},l.config=t,this.fresh&&(this.fresh=!1),l.features=l.features?a.concat(l.features):a;const o=this.options.externalGeocoder?this.options.externalGeocoder(i,l.features,t)||Promise.resolve([]):Promise.resolve([]);try{const C=yield o;l.features=l.features?C.concat(l.features):C}catch{}this.options.filter&&l.features.length&&(l.features=l.features.filter(this.options.filter));let m=[];"suggestions"in l?m=l.suggestions:"place"in l?m=[l.place]:m=l.features,m.length?(this._clearEl.style.display="block",this._typeahead.update(m),(!this.options.showResultsWhileTyping||r)&&this.options.showResultMarkers&&(l.features.length>0||"place"in l)&&this._fitBoundsForMarkers(),this._eventEmitter.emit("results",l)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",l))})}_handleGeocodeErrorResponse(e,t){this._loadingEl.style.display="none",t.length&&this.options.localGeocoder?(this._clearEl.style.display="block",this._typeahead.update(t)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:t}),this._eventEmitter.emit("error",{error:e})}_clear(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0}clear(e){this._clear(e),this._inputEl.focus()}_clearOnBlur(e){e.relatedTarget&&this._clear(e)}_onQueryResult(e){if(!("features"in e)||!e.features.length)return;const t=e.features[0];this._typeahead.selected=t,this._inputEl.value=t.place_name,this._onChange()}_updateProximity(){if(this._map)if(this._map.getZoom()>this.options.proximityMinZoom){const e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat})}else this.setProximity(null)}_collapse(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("maplibregl-ctrl-geocoder--collapsed")}_unCollapse(){this.container.classList.remove("maplibregl-ctrl-geocoder--collapsed")}query(e){return I4(this,void 0,void 0,function*(){const t=yield this._geocode(e);this._onQueryResult(t)})}_renderError(){const e=`<div class='maplibre-gl-geocoder--error'>${this._localize("errorConnectionFailed")}</div>`;this._renderMessage(e)}_renderNoResults(){const e=`<div class='maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>
        ${this._localize("errorNoResults")}</div>`;this._renderMessage(e)}_renderMessage(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)}_localize(e){const t=j$.language(this.options.language.split(",")[0]);return this.options.language&&mC?.[e][t]?mC[e][t]:mC[e].en}_fitBoundsForMarkers(){if(this._typeahead.data.length<1)return;const e=this._typeahead.data.filter(t=>typeof t!="string").slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){const i=Wm({},{padding:100},this.options.flyTo),r=new this._maplibregl.LngLatBounds;for(const a of e)r.extend(a.geometry.coordinates);this._map.fitBounds(r,i)}return e.length>0&&this._maplibregl&&this._handleResultMarkers(e),this}setInput(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(e),this}setProximity(e){return this.options.proximity=e,this}getProximity(){return this.options.proximity}setRenderFunction(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this}getRenderFunction(){return this._typeahead.render}setLanguage(e){return this.options.language=e||this.options.language||navigator.language,this}getLanguage(){return this.options.language}getZoom(){return this.options.zoom}setZoom(e){return this.options.zoom=e,this}getFlyTo(){return this.options.flyTo}setFlyTo(e){return this.options.flyTo=e,this}getPlaceholder(){return this.options.placeholder}setPlaceholder(e){return this.placeholder=e||this.options.placeholder||this._localize("placeholder"),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this}getBbox(){return this.options.bbox}setBbox(e){return this.options.bbox=e,this}getCountries(){return this.options.countries}setCountries(e){return this.options.countries=e,this}getTypes(){return this.options.types}setTypes(e){return this.options.types=e,this}getMinLength(){return this.options.minLength}setMinLength(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this}getLimit(){return this.options.limit}setLimit(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this}getFilter(){return this.options.filter}setFilter(e){return this.options.filter=e,this}setGeocoderApi(e){return this.geocoderApi=e,this}getGeocoderApi(){return this.geocoderApi}_handleMarker(e){if(!this._map)return;this._removeMarker();const i=Wm({},{color:"#4668F2"},this.options.marker);this.mapMarker=new this._maplibregl.Marker(i);let r;if(this.options.popup){const l=Wm({},{},this.options.popup);r=new this._maplibregl.Popup(l).setHTML(this.options.popupRender(e))}return e.center?(this.mapMarker.setLngLat(e.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(r)):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(r)),this}_removeMarker(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)}_handleResultMarkers(e){if(!this._map)return;this._removeResultMarkers();let i=Wm({},{color:"#4668F2"},this.options.showResultMarkers);for(const r of e){let a;if(this.options.showResultMarkers){this.options.showResultMarkers&&this.options.showResultMarkers.element&&(a=this.options.showResultMarkers.element.cloneNode(!0),i=Wm(i,{element:a}));const l=new this._maplibregl.Marker(Wm({},i,{element:a}));let o;if(this.options.popup){const C=Wm({},{},this.options.popup);o=new this._maplibregl.Popup(C).setHTML(this.options.popupRender(r))}r.center?(l.setLngLat(r.center).addTo(this._map),this.options.popup&&l.setPopup(o)):r.geometry&&r.geometry.type&&r.geometry.type==="Point"&&r.geometry.coordinates&&(l.setLngLat(r.geometry.coordinates).addTo(this._map),this.options.popup&&l.setPopup(o)),this.resultMarkers.push(l)}}return this}_removeResultMarkers(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach(function(e){e.remove()}),this.resultMarkers=[])}on(e,t){return this._eventEmitter.on(e,t),this}once(e){return new Promise(t=>{this._eventEmitter.once(e,t)})}off(e,t){return this._eventEmitter.removeListener(e,t),this}}function bn(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",e="b7252e96c40c42724dcbe987ba80059cbc742d67",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",statementMap:{0:{start:{line:21,column:15},end:{line:21,column:36}},1:{start:{line:22,column:2},end:{line:22,column:44}},2:{start:{line:22,column:28},end:{line:22,column:42}},3:{start:{line:23,column:2},end:{line:23,column:28}},4:{start:{line:24,column:2},end:{line:24,column:19}},5:{start:{line:27,column:26},end:{line:33,column:3}},6:{start:{line:34,column:16},end:{line:34,column:55}},7:{start:{line:35,column:2},end:{line:37,column:3}},8:{start:{line:36,column:4},end:{line:36,column:30}},9:{start:{line:38,column:18},end:{line:38,column:20}},10:{start:{line:39,column:2},end:{line:44,column:5}},11:{start:{line:40,column:19},end:{line:40,column:53}},12:{start:{line:41,column:4},end:{line:43,column:5}},13:{start:{line:42,column:6},end:{line:42,column:33}},14:{start:{line:45,column:23},end:{line:49,column:3}},15:{start:{line:50,column:2},end:{line:50,column:22}},16:{start:{line:53,column:24},end:{line:63,column:3}},17:{start:{line:64,column:14},end:{line:64,column:18}},18:{start:{line:66,column:4},end:{line:66,column:17}},19:{start:{line:67,column:4},end:{line:72,column:6}},20:{start:{line:73,column:4},end:{line:75,column:7}},21:{start:{line:74,column:6},end:{line:74,column:25}},22:{start:{line:78,column:17},end:{line:78,column:22}},23:{start:{line:79,column:4},end:{line:82,column:5}},24:{start:{line:80,column:6},end:{line:80,column:132}},25:{start:{line:83,column:4},end:{line:83,column:18}},26:{start:{line:86,column:16},end:{line:86,column:30}},27:{start:{line:87,column:28},end:{line:87,column:79}},28:{start:{line:88,column:4},end:{line:93,column:5}},29:{start:{line:89,column:6},end:{line:89,column:52}},30:{start:{line:90,column:6},end:{line:90,column:70}},31:{start:{line:91,column:6},end:{line:91,column:70}},32:{start:{line:92,column:6},end:{line:92,column:76}},33:{start:{line:94,column:4},end:{line:96,column:5}},34:{start:{line:95,column:6},end:{line:95,column:43}},35:{start:{line:97,column:4},end:{line:102,column:5}},36:{start:{line:98,column:6},end:{line:98,column:59}},37:{start:{line:99,column:6},end:{line:101,column:14}},38:{start:{line:100,column:8},end:{line:100,column:36}},39:{start:{line:105,column:20},end:{line:114,column:5}},40:{start:{line:115,column:21},end:{line:115,column:53}},41:{start:{line:116,column:4},end:{line:116,column:53}},42:{start:{line:117,column:16},end:{line:117,column:43}},43:{start:{line:118,column:26},end:{line:122,column:5}},44:{start:{line:119,column:21},end:{line:119,column:36}},45:{start:{line:120,column:19},end:{line:120,column:32}},46:{start:{line:121,column:6},end:{line:121,column:44}},47:{start:{line:123,column:4},end:{line:123,column:20}},48:{start:{line:124,column:4},end:{line:124,column:56}},49:{start:{line:125,column:4},end:{line:125,column:56}},50:{start:{line:126,column:4},end:{line:126,column:62}},51:{start:{line:127,column:21},end:{line:127,column:43}},52:{start:{line:128,column:24},end:{line:128,column:41}},53:{start:{line:129,column:4},end:{line:129,column:45}},54:{start:{line:130,column:16},end:{line:130,column:74}},55:{start:{line:131,column:4},end:{line:131,column:37}},56:{start:{line:132,column:20},end:{line:132,column:49}},57:{start:{line:133,column:25},end:{line:135,column:6}},58:{start:{line:136,column:20},end:{line:169,column:6}},59:{start:{line:144,column:8},end:{line:144,column:82}},60:{start:{line:146,column:62},end:{line:146,column:141}},61:{start:{line:148,column:8},end:{line:167,column:9}},62:{start:{line:149,column:10},end:{line:153,column:12}},63:{start:{line:155,column:10},end:{line:166,column:12}},64:{start:{line:170,column:4},end:{line:170,column:28}},65:{start:{line:171,column:4},end:{line:179,column:7}},66:{start:{line:172,column:6},end:{line:178,column:9}},67:{start:{line:180,column:4},end:{line:185,column:7}},68:{start:{line:181,column:6},end:{line:181,column:40}},69:{start:{line:181,column:33},end:{line:181,column:40}},70:{start:{line:182,column:6},end:{line:184,column:9}},71:{start:{line:186,column:4},end:{line:188,column:7}},72:{start:{line:187,column:6},end:{line:187,column:30}},73:{start:{line:189,column:4},end:{line:193,column:7}},74:{start:{line:190,column:6},end:{line:192,column:9}},75:{start:{line:194,column:4},end:{line:194,column:37}},76:{start:{line:195,column:4},end:{line:195,column:37}},77:{start:{line:197,column:22},end:{line:200,column:3}},78:{start:{line:198,column:18},end:{line:198,column:82}},79:{start:{line:198,column:66},end:{line:198,column:81}},80:{start:{line:199,column:4},end:{line:199,column:36}},81:{start:{line:202,column:27},end:{line:235,column:5}},82:{start:{line:204,column:25},end:{line:204,column:27}},83:{start:{line:205,column:8},end:{line:230,column:9}},84:{start:{line:206,column:26},end:{line:206,column:138}},85:{start:{line:207,column:27},end:{line:207,column:47}},86:{start:{line:208,column:26},end:{line:208,column:47}},87:{start:{line:209,column:10},end:{line:227,column:11}},88:{start:{line:210,column:27},end:{line:213,column:13}},89:{start:{line:214,column:26},end:{line:225,column:13}},90:{start:{line:226,column:12},end:{line:226,column:33}},91:{start:{line:229,column:10},end:{line:229,column:69}},92:{start:{line:231,column:8},end:{line:233,column:10}},93:{start:{line:236,column:21},end:{line:239,column:6}},94:{start:{line:240,column:4},end:{line:240,column:41}},95:{start:{line:241,column:4},end:{line:241,column:20}},96:{start:{line:244,column:14},end:{line:244,column:26}},97:{start:{line:245,column:4},end:{line:245,column:53}},98:{start:{line:246,column:4},end:{line:246,column:49}},99:{start:{line:247,column:4},end:{line:258,column:6}},100:{start:{line:254,column:10},end:{line:254,column:29}},101:{start:{line:261,column:22},end:{line:261,column:62}}},fnMap:{0:{name:"renderPopup",decl:{start:{line:20,column:9},end:{line:20,column:20}},loc:{start:{line:20,column:53},end:{line:25,column:1}},line:20},1:{name:"(anonymous_1)",decl:{start:{line:22,column:22},end:{line:22,column:23}},loc:{start:{line:22,column:28},end:{line:22,column:42}},line:22},2:{name:"buildInspectStyle",decl:{start:{line:26,column:9},end:{line:26,column:26}},loc:{start:{line:26,column:78},end:{line:51,column:1}},line:26},3:{name:"(anonymous_3)",decl:{start:{line:39,column:48},end:{line:39,column:49}},loc:{start:{line:39,column:62},end:{line:44,column:3}},line:39},4:{name:"(anonymous_4)",decl:{start:{line:54,column:17},end:{line:54,column:18}},loc:{start:{line:54,column:23},end:{line:55,column:5}},line:54},5:{name:"(anonymous_5)",decl:{start:{line:56,column:18},end:{line:56,column:19}},loc:{start:{line:56,column:24},end:{line:57,column:5}},line:56},6:{name:"(anonymous_6)",decl:{start:{line:58,column:19},end:{line:58,column:20}},loc:{start:{line:58,column:25},end:{line:59,column:5}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:60,column:14},end:{line:60,column:15}},loc:{start:{line:60,column:20},end:{line:61,column:5}},line:60},8:{name:"(anonymous_8)",decl:{start:{line:65,column:2},end:{line:65,column:3}},loc:{start:{line:65,column:21},end:{line:76,column:3}},line:65},9:{name:"(anonymous_9)",decl:{start:{line:73,column:34},end:{line:73,column:35}},loc:{start:{line:73,column:40},end:{line:75,column:5}},line:73},10:{name:"(anonymous_10)",decl:{start:{line:77,column:2},end:{line:77,column:3}},loc:{start:{line:77,column:46},end:{line:84,column:3}},line:77},11:{name:"(anonymous_11)",decl:{start:{line:85,column:2},end:{line:85,column:3}},loc:{start:{line:85,column:23},end:{line:103,column:3}},line:85},12:{name:"(anonymous_12)",decl:{start:{line:99,column:17},end:{line:99,column:18}},loc:{start:{line:99,column:23},end:{line:101,column:7}},line:99},13:{name:"(anonymous_13)",decl:{start:{line:104,column:2},end:{line:104,column:3}},loc:{start:{line:104,column:22},end:{line:196,column:3}},line:104},14:{name:"(anonymous_14)",decl:{start:{line:118,column:26},end:{line:118,column:27}},loc:{start:{line:118,column:32},end:{line:122,column:5}},line:118},15:{name:"(anonymous_15)",decl:{start:{line:143,column:24},end:{line:143,column:25}},loc:{start:{line:143,column:44},end:{line:145,column:7}},line:143},16:{name:"(anonymous_16)",decl:{start:{line:146,column:25},end:{line:146,column:26}},loc:{start:{line:146,column:62},end:{line:146,column:141}},line:146},17:{name:"(anonymous_17)",decl:{start:{line:147,column:19},end:{line:147,column:20}},loc:{start:{line:147,column:33},end:{line:168,column:7}},line:147},18:{name:"(anonymous_18)",decl:{start:{line:171,column:25},end:{line:171,column:26}},loc:{start:{line:171,column:31},end:{line:179,column:5}},line:171},19:{name:"(anonymous_19)",decl:{start:{line:180,column:19},end:{line:180,column:20}},loc:{start:{line:180,column:26},end:{line:185,column:5}},line:180},20:{name:"(anonymous_20)",decl:{start:{line:186,column:20},end:{line:186,column:21}},loc:{start:{line:186,column:27},end:{line:188,column:5}},line:186},21:{name:"(anonymous_21)",decl:{start:{line:189,column:19},end:{line:189,column:20}},loc:{start:{line:189,column:27},end:{line:193,column:5}},line:189},22:{name:"(anonymous_22)",decl:{start:{line:197,column:22},end:{line:197,column:23}},loc:{start:{line:197,column:30},end:{line:200,column:3}},line:197},23:{name:"(anonymous_23)",decl:{start:{line:198,column:55},end:{line:198,column:56}},loc:{start:{line:198,column:66},end:{line:198,column:81}},line:198},24:{name:"(anonymous_24)",decl:{start:{line:201,column:2},end:{line:201,column:3}},loc:{start:{line:201,column:20},end:{line:242,column:3}},line:201},25:{name:"(anonymous_25)",decl:{start:{line:203,column:22},end:{line:203,column:23}},loc:{start:{line:203,column:40},end:{line:234,column:7}},line:203},26:{name:"(anonymous_26)",decl:{start:{line:243,column:2},end:{line:243,column:3}},loc:{start:{line:243,column:11},end:{line:259,column:3}},line:243},27:{name:"(anonymous_27)",decl:{start:{line:253,column:13},end:{line:253,column:14}},loc:{start:{line:253,column:20},end:{line:255,column:9}},line:253}},branchMap:{0:{loc:{start:{line:35,column:2},end:{line:37,column:3}},type:"if",locations:[{start:{line:35,column:2},end:{line:37,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},1:{loc:{start:{line:41,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:43,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},2:{loc:{start:{line:41,column:8},end:{line:41,column:64}},type:"binary-expr",locations:[{start:{line:41,column:8},end:{line:41,column:32}},{start:{line:41,column:36},end:{line:41,column:64}}],line:41},3:{loc:{start:{line:80,column:15},end:{line:80,column:131}},type:"binary-expr",locations:[{start:{line:80,column:15},end:{line:80,column:71}},{start:{line:80,column:75},end:{line:80,column:131}}],line:80},4:{loc:{start:{line:88,column:4},end:{line:93,column:5}},type:"if",locations:[{start:{line:88,column:4},end:{line:93,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:88},5:{loc:{start:{line:94,column:4},end:{line:96,column:5}},type:"if",locations:[{start:{line:94,column:4},end:{line:96,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:94},6:{loc:{start:{line:94,column:8},end:{line:94,column:98}},type:"binary-expr",locations:[{start:{line:94,column:8},end:{line:94,column:26}},{start:{line:94,column:30},end:{line:94,column:98}}],line:94},7:{loc:{start:{line:97,column:4},end:{line:102,column:5}},type:"if",locations:[{start:{line:97,column:4},end:{line:102,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:97},8:{loc:{start:{line:97,column:8},end:{line:97,column:59}},type:"binary-expr",locations:[{start:{line:97,column:8},end:{line:97,column:26}},{start:{line:97,column:30},end:{line:97,column:59}}],line:97},9:{loc:{start:{line:148,column:8},end:{line:167,column:9}},type:"if",locations:[{start:{line:148,column:8},end:{line:167,column:9}},{start:{line:154,column:15},end:{line:167,column:9}}],line:148},10:{loc:{start:{line:181,column:6},end:{line:181,column:40}},type:"if",locations:[{start:{line:181,column:6},end:{line:181,column:40}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:181}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx"],names:[],mappings:"AAwMY;AAxMZ,OAAO,WAAuB;AAC9B,SAAQ,kBAAiB;AACzB,OAAO,gBAAwG;AAC/G,OAAO,qBAAqB;AAC5B,OAAO,YAAY;AACnB,OAAO,6BAA6B;AACpC,OAAO,uCAA2D;AAClE,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA2B,6BAA6B;AACxD,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,sBAA0E;AACjF,OAAO;AACP,SAAS,uBAAwC;AACjD,OAAO,aAAa;AACpB,SAAS,gBAAgB;AAEzB,SAAS,YACP,cACA,WACA,OACa;AACb,QAAM,OAAO,WAAW,SAAS;AACjC,QAAM,KAAK,SAAS,MAAM,KAAK,QAAQ,CAAC;AACxC,OAAK,OAAO,YAAY;AACxB,SAAO;AACT;AAEA,SAAS,kBAAkB,kBAAsC,eAAmC,kBAAqC;AACvI,QAAM,kBAAkB;AAAA,IACtB,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,SAAS;AAAA,MACP,oBAAoB;AAAA,IACtB;AAAA,EACF;AAEA,QAAM,QAAQ,sBAAsB,gBAAgB;AACpD,MAAG,OAAO;AACR,kBAAc,KAAK,KAAK;AAAA,EAC1B;AAEA,QAAM,UAA+C,CAAC;AAEtD,SAAO,KAAK,iBAAiB,OAAO,EAAE,QAAQ,cAAY;AACxD,UAAM,SAAS,iBAAiB,QAAQ,QAAQ;AAChD,QAAG,OAAO,SAAS,YAAY,OAAO,SAAS,cAAc;AAC3D,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAAA,EACF,CAAC;AAED,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH;AAAA,IACA,QAAQ,CAAC,eAAe,EAAE,OAAO,aAAqC;AAAA,EACxE;AACA,SAAO;AACT;AAyBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,SAAS,CAAC;AAAA,EACZ;AAAA,EACA,YAAmC;AAAA,EAEnC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,MACV,aAAa;AAAA,IACf;AACA,YAAQ,GAAG,mBAAmB,MAAM;AAClC,WAAK,YAAY;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAGA,sBAAsB,WAAuC,WAA+B;AAC1F,QAAI,SAAS;AACb,QAAI;AACF,eAAS,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS;AAAA,IAC9H,SAAQ,IAAI;AAAA,IAEZ;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB;AACnB,UAAM,MAAM,KAAK,MAAM;AAEvB,UAAM,kBAAkB,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAC1E,QAAI,KAAK;AAIP,UAAI,SAAS,iBAAiB,EAAC,MAAM,KAAI,CAAC;AAC1C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,wBAAwB,KAAK,MAAM,SAAS;AAAA,IAClD;AAEA,QAAG,KAAK,MAAM,WAAW,KAAK,MAAM,uBAAuB,KAAK,MAAM,QAAQ,iBAAiB;AAC7F,WAAK,MAAM,QAAQ,gBAAgB;AAAA,IACrC;AACA,QAAI,KAAK,MAAM,WAAW,KAAK,MAAM,oBAAoB;AACvD,WAAK,MAAM,QAAQ,iBAAiB,eAAe;AAEnD,iBAAW,MAAM;AACf,aAAK,MAAM,QAAS,OAAO;AAAA,MAC7B,GAAG,GAAG;AAAA,IACR;AAAA,EAEF;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM;AAAA,MACd,WAAW,KAAK;AAAA,MAChB,OAAO,KAAK,MAAM;AAAA,MAClB,MAAM;AAAA,MACN,SAAS;AAAA;AAAA;AAAA,MAGT,0BAA0B;AAAA,IAC5B;AAEA,UAAM,WAAW,IAAI,SAAS,EAAC,UAAU,KAAI,CAAC;AAC9C,eAAW,YAAY,WAAU,SAAS,IAAI;AAC9C,UAAM,MAAM,IAAI,WAAW,IAAI,OAAO;AAEtC,UAAM,gBAAgB,MAAM;AAC1B,YAAM,SAAS,IAAI,UAAU;AAC7B,YAAM,OAAO,IAAI,QAAQ;AACzB,WAAK,MAAM,SAAS,EAAC,QAAQ,KAAI,CAAC;AAAA,IACpC;AACA,kBAAc;AAEd,QAAI,qBAAqB,QAAQ;AACjC,QAAI,qBAAqB,QAAQ;AACjC,QAAI,wBAAwB,QAAQ;AAEpC,UAAM,WAAW,KAAK,aAAa,GAAG;AAEtC,UAAM,cAAc,IAAI,YAAY;AACpC,QAAI,WAAW,aAAa,WAAW;AAEvC,UAAM,MAAM,IAAI,WAAW,kBAAkB,EAAC,gBAAe,KAAI,CAAC;AAClE,QAAI,WAAW,KAAK,WAAW;AAE/B,UAAM,UAAU,SAAS,cAAc,KAAK;AAE5C,UAAM,eAAe,IAAI,WAAW,MAAM;AAAA,MACxC,cAAc;AAAA,IAChB,CAAC;AAED,UAAM,UAAU,IAAI,gBAAgB;AAAA,MAClC,OAAO;AAAA,MACP,cAAc;AAAA,MACd,qBAAqB;AAAA,MACrB,4BAA4B;AAAA,MAC5B,mBAAmB;AAAA,MACnB,wBAAwB;AAAA,MACxB,kBAAkB,CAAC,SAAiB,UAAkB;AACpD,eAAO,MAAM,OAAO,YAAY,SAAS,KAAK,CAAC,EAAE,WAAW,GAAG,EAAE,OAAO;AAAA,MAC1E;AAAA,MACA,mBAAmB,CAAC,kBAAsC,kBAAsC,kBAAkB,kBAAkB,eAAe,KAAK,MAAM,gBAAgB;AAAA,MAC9K,aAAa,CAAC,aAA+B;AAC3C,YAAG,KAAK,MAAM,oBAAoB;AAChC,iBAAO;AAAA,YACL,oBAAC,qCAAkC,UAAoB;AAAA,YACvD;AAAA,YACA;AAAA,UACF;AAAA,QACF,OAAO;AACL,iBAAO;AAAA,YACL;AAAA,cAAC;AAAA;AAAA,gBACC;AAAA,gBACA,eAAe,KAAK;AAAA,gBACpB,MAAM,KAAK,MAAM;AAAA;AAAA,YACnB;AAAA,YACA;AAAA,YACA;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAA,IACF,CAAC;AACD,QAAI,WAAW,OAAO;AAEtB,QAAI,GAAG,cAAc,MAAM;AACzB,WAAK,SAAS;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,QAAQ,OAAK;AAClB,UAAG,EAAE,aAAa,OAAQ;AAC1B,WAAK,MAAM,aAAc;AAAA,QACvB,KAAK,KAAK,MAAM;AAAA,MAClB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,SAAS,OAAK;AACnB,cAAQ,IAAI,SAAS,CAAC;AAAA,IACxB,CAAC;AAED,QAAI,GAAG,QAAQ,QAAM;AACnB,WAAK,SAAS;AAAA,QACZ,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,WAAW,aAAa;AAC/B,QAAI,GAAG,WAAW,aAAa;AAAA,EACjC;AAAA,EAEA,oBAAoB,CAAC,OAAe;AAClC,UAAM,QAAQ,KAAK,MAAM,SAAS,OAAO,UAAU,WAAS,MAAM,OAAO,EAAE;AAC3E,SAAK,MAAM,cAAc,KAAK;AAAA,EAChC;AAAA,EAEA,aAAa,KAAU;AACrB,UAAM,iBAAiB;AAAA,MACrB,gBAAgB,OAAO,WAAsC;AAC3D,cAAM,WAAW,CAAC;AAClB,YAAI;AACF,gBAAM,UAAU,gDAAgD,OAAO,KAAK;AAC5E,gBAAM,WAAW,MAAM,MAAM,OAAO;AACpC,gBAAM,UAAU,MAAM,SAAS,KAAK;AACpC,qBAAW,WAAW,QAAQ,UAAU;AACtC,kBAAM,SAAS;AAAA,cACb,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,cAC1C,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,YAC5C;AACA,kBAAM,QAAQ;AAAA,cACZ,MAAM;AAAA,cACN,UAAU;AAAA,gBACR,MAAM;AAAA,gBACN,aAAa;AAAA,cACf;AAAA,cACA,YAAY,QAAQ,WAAW;AAAA,cAC/B,YAAY,QAAQ;AAAA,cACpB,MAAM,QAAQ,WAAW;AAAA,cACzB,YAAY,CAAC,OAAO;AAAA,cACpB;AAAA,YACF;AACA,qBAAS,KAAK,KAAK;AAAA,UACrB;AAAA,QACF,SAAS,GAAG;AACV,kBAAQ,MAAM,wCAAwC,CAAC,EAAE;AAAA,QAC3D;AACA,eAAO;AAAA,UACL;AAAA,QACF;AAAA,MACF;AAAA,IACF;AACA,UAAM,WAAW,IAAI,iBAAiB,gBAAgB;AAAA,MACpD,aAAa,KAAK,MAAM,EAAE,QAAQ;AAAA,MAClC,YAAY;AAAA,IACd,CAAC;AACD,QAAI,WAAW,UAAU,UAAU;AACnC,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,SAAK,MAAM,UAAU,eAAe,EAAE,QAAQ,CAAC;AAC/C,SAAK,MAAM,aAAa,SAAS,EAAE,OAAO,CAAC;AAC3C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,UAAU;AAAA,QACxB,KAAK,OAAK;AAAC,eAAK,YAAY;AAAA,QAAC;AAAA,QAC7B,eAAY;AAAA;AAAA,IACb;AAAA,EACH;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b7252e96c40c42724dcbe987ba80059cbc742d67"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return bn=function(){return l},l}bn();function NI(n,e,t){bn().f[0]++;const i=(bn().s[0]++,PU.createRoot(e));return bn().s[1]++,t.once("close",()=>(bn().f[1]++,bn().s[2]++,i.unmount())),bn().s[3]++,i.render(n),bn().s[4]++,e}function tZ(n,e,t){bn().f[2]++;const i=(bn().s[5]++,{id:"background",type:"background",paint:{"background-color":"#1c1f24"}}),r=(bn().s[6]++,D$(t));bn().s[7]++,r?(bn().b[0][0]++,bn().s[8]++,e.push(r)):bn().b[0][1]++;const a=(bn().s[9]++,{});bn().s[10]++,Object.keys(n.sources).forEach(o=>{bn().f[3]++;const m=(bn().s[11]++,n.sources[o]);bn().s[12]++,bn().b[2][0]++,m.type!=="raster"&&(bn().b[2][1]++,m.type!=="raster-dem")?(bn().b[1][0]++,bn().s[13]++,a[o]=m):bn().b[1][1]++});const l=(bn().s[14]++,{...n,sources:a,layers:[i].concat(e)});return bn().s[15]++,l}class nZ extends ni.Component{static defaultProps=(bn().s[16]++,{onMapLoaded:()=>{bn().f[4]++},onDataChange:()=>{bn().f[5]++},onLayerSelect:()=>{bn().f[6]++},onChange:()=>{bn().f[7]++},options:{}});container=(bn().s[17]++,null);constructor(e){bn().f[8]++,bn().s[18]++,super(e),bn().s[19]++,this.state={map:null,inspect:null,geocoder:null,zoomControl:null},bn().s[20]++,mh.on("languageChanged",()=>{bn().f[9]++,bn().s[21]++,this.forceUpdate()})}shouldComponentUpdate(e,t){bn().f[10]++;let i=(bn().s[22]++,!1);bn().s[23]++;try{bn().s[24]++,i=(bn().b[3][0]++,JSON.stringify(this.props)!==JSON.stringify(e)||(bn().b[3][1]++,JSON.stringify(this.state)!==JSON.stringify(t)))}catch{}return bn().s[25]++,i}componentDidUpdate(){bn().f[11]++;const e=(bn().s[26]++,this.state.map),t=(bn().s[27]++,this.props.replaceAccessTokens(this.props.mapStyle));bn().s[28]++,e?(bn().b[4][0]++,bn().s[29]++,e.setStyle(t,{diff:!0}),bn().s[30]++,e.showTileBoundaries=this.props.options?.showTileBoundaries,bn().s[31]++,e.showCollisionBoxes=this.props.options?.showCollisionBoxes,bn().s[32]++,e.showOverdrawInspector=this.props.options?.showOverdrawInspector):bn().b[4][1]++,bn().s[33]++,bn().b[6][0]++,this.state.inspect&&(bn().b[6][1]++,this.props.inspectModeEnabled!==this.state.inspect._showInspectMap)?(bn().b[5][0]++,bn().s[34]++,this.state.inspect.toggleInspector()):bn().b[5][1]++,bn().s[35]++,bn().b[8][0]++,this.state.inspect&&(bn().b[8][1]++,this.props.inspectModeEnabled)?(bn().b[7][0]++,bn().s[36]++,this.state.inspect.setOriginalStyle(t),bn().s[37]++,setTimeout(()=>{bn().f[12]++,bn().s[38]++,this.state.inspect.render()},500)):bn().b[7][1]++}componentDidMount(){bn().f[13]++;const e=(bn().s[39]++,{...this.props.options,container:this.container,style:this.props.mapStyle,hash:!0,maxZoom:24,localIdeographFontFamily:!1}),t=(bn().s[40]++,new cY({metadata:!0}));bn().s[41]++,rv.addProtocol("pmtiles",t.tile);const i=(bn().s[42]++,new rv.Map(e));bn().s[43]++;const r=()=>{bn().f[14]++;const O=(bn().s[44]++,i.getCenter()),U=(bn().s[45]++,i.getZoom());bn().s[46]++,this.props.onChange({center:O,zoom:U})};bn().s[47]++,r(),bn().s[48]++,i.showTileBoundaries=e.showTileBoundaries,bn().s[49]++,i.showCollisionBoxes=e.showCollisionBoxes,bn().s[50]++,i.showOverdrawInspector=e.showOverdrawInspector;const a=(bn().s[51]++,this.initGeocoder(i)),l=(bn().s[52]++,new I$);bn().s[53]++,i.addControl(l,"top-right");const o=(bn().s[54]++,new rv.NavigationControl({visualizePitch:!0}));bn().s[55]++,i.addControl(o,"top-right");const m=(bn().s[56]++,document.createElement("div")),C=(bn().s[57]++,new rv.Popup({closeOnClick:!1})),S=(bn().s[58]++,new oO({popup:C,showMapPopup:!0,showMapPopupOnHover:!1,showInspectMapPopupOnHover:!0,showInspectButton:!1,blockHoverPopupOnClick:!0,assignLayerColor:(O,U)=>(bn().f[15]++,bn().s[59]++,Ju(nF.brightColor(O,U)).desaturate(.5).string()),buildInspectStyle:(O,U)=>(bn().f[16]++,bn().s[60]++,tZ(O,U,this.props.highlightedLayer)),renderPopup:O=>(bn().f[17]++,bn().s[61]++,this.props.inspectModeEnabled?(bn().b[9][0]++,bn().s[62]++,NI(ce.jsx(g$,{features:O}),m,C)):(bn().b[9][1]++,bn().s[63]++,NI(ce.jsx(oF,{features:O,onLayerSelect:this.onLayerSelectById,zoom:this.state.zoom}),m,C)))}));bn().s[64]++,i.addControl(S),bn().s[65]++,i.on("style.load",()=>{bn().f[18]++,bn().s[66]++,this.setState({map:i,inspect:S,geocoder:a,zoomControl:l,zoom:i.getZoom()})}),bn().s[67]++,i.on("data",O=>{if(bn().f[19]++,bn().s[68]++,O.dataType!=="tile"){bn().b[10][0]++,bn().s[69]++;return}else bn().b[10][1]++;bn().s[70]++,this.props.onDataChange({map:this.state.map})}),bn().s[71]++,i.on("error",O=>{bn().f[20]++,bn().s[72]++,console.log("ERROR",O)}),bn().s[73]++,i.on("zoom",O=>{bn().f[21]++,bn().s[74]++,this.setState({zoom:i.getZoom()})}),bn().s[75]++,i.on("dragend",r),bn().s[76]++,i.on("zoomend",r)}onLayerSelectById=(bn().s[77]++,e=>{bn().f[22]++;const t=(bn().s[78]++,this.props.mapStyle.layers.findIndex(i=>(bn().f[23]++,bn().s[79]++,i.id===e)));bn().s[80]++,this.props.onLayerSelect(t)});initGeocoder(e){bn().f[24]++;const t=(bn().s[81]++,{forwardGeocode:async r=>{bn().f[25]++;const a=(bn().s[82]++,[]);bn().s[83]++;try{const l=(bn().s[84]++,`https://nominatim.openstreetmap.org/search?q=${r.query}&format=geojson&polygon_geojson=1&addressdetails=1`),o=(bn().s[85]++,await fetch(l)),m=(bn().s[86]++,await o.json());bn().s[87]++;for(const C of m.features){const S=(bn().s[88]++,[C.bbox[0]+(C.bbox[2]-C.bbox[0])/2,C.bbox[1]+(C.bbox[3]-C.bbox[1])/2]),O=(bn().s[89]++,{type:"Feature",geometry:{type:"Point",coordinates:S},place_name:C.properties.display_name,properties:C.properties,text:C.properties.display_name,place_type:["place"],center:S});bn().s[90]++,a.push(O)}}catch(l){bn().s[91]++,console.error(`Failed to forwardGeocode with error: ${l}`)}return bn().s[92]++,{features:a}}}),i=(bn().s[93]++,new eZ(t,{placeholder:this.props.t("Search"),maplibregl:rv}));return bn().s[94]++,e.addControl(i,"top-left"),bn().s[95]++,i}render(){bn().f[26]++;const e=(bn().s[96]++,this.props.t);return bn().s[97]++,this.state.geocoder?.setPlaceholder(e("Search")),bn().s[98]++,this.state.zoomControl?.setLabel(e("Zoom:")),bn().s[99]++,ce.jsx("div",{className:"maputnik-map__map",role:"region","aria-label":e("Map view"),ref:t=>{bn().f[27]++,bn().s[100]++,this.container=t},"data-wd-key":"maplibre:map"})}}const iZ=(bn().s[101]++,ss()(nZ));var GI={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},pC=" ",jI=/(italic|oblique)$/i,WI={};function P6(n,e,t){var i=WI[n];if(!i){Array.isArray(n)||(n=[n]);for(var r=400,a="normal",l=[],o,m,C=0,S=n.length;C<S;++C){var O=n[C],U=O.split(" "),K=U[U.length-1].toLowerCase();K=="normal"||K=="italic"||K=="oblique"?(a=m?a:K,m=!0,U.pop(),K=U[U.length-1].toLowerCase()):jI.test(K)&&(K=K.replace(jI,""),a=m?a:U[U.length-1].replace(K,""),m=!0);for(var z in GI){var j=U.length>1?U[U.length-2].toLowerCase():"";if(K==z||K==z.replace("-","")||j+"-"+K==z){r=o?r:GI[z],U.pop(),j&&z.startsWith(j)&&U.pop();break}}!o&&typeof K=="number"&&(r=K,o=!0);var Q=U.join(pC).replace("Klokantech Noto Sans","Noto Sans").replace("DIN Pro","Barlow").replace("Arial Unicode MS","Arial");Q.indexOf(pC)!==-1&&(Q='"'+Q+'"'),l.push(Q)}i=WI[n]=[a,r,l]}return i[0]+pC+i[1]+pC+e+"px"+(t?"/"+t:"")+pC+i[2]}const Gd={ADD:"add",REMOVE:"remove"},Iv={PROPERTYCHANGE:"propertychange"},mo={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class ab{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function rZ(n,e,t){let i,r;t=t||$p;let a=0,l=n.length,o=!1;for(;a<l;)i=a+(l-a>>1),r=+t(n[i],e),r<0?a=i+1:(l=i,o=!r);return o?a:~a}function $p(n,e){return n>e?1:n<e?-1:0}function oZ(n,e){return n<e?1:n>e?-1:0}function t2(n,e,t){if(n[0]<=e)return 0;const i=n.length;if(e<=n[i-1])return i-1;if(typeof t=="function"){for(let r=1;r<i;++r){const a=n[r];if(a===e)return r;if(a<e)return t(e,n[r-1],a)>0?r-1:r}return i-1}if(t>0){for(let r=1;r<i;++r)if(n[r]<e)return r-1;return i-1}if(t<0){for(let r=1;r<i;++r)if(n[r]<=e)return r;return i-1}for(let r=1;r<i;++r){if(n[r]==e)return r;if(n[r]<e)return n[r-1]-e<e-n[r]?r-1:r}return i-1}function aZ(n,e,t){for(;e<t;){const i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function Zp(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let r=0;r<i;r++)n[n.length]=t[r]}function F1(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function sZ(n,e,t){const i=e||$p;return n.every(function(r,a){if(a===0)return!0;const l=i(n[a-1],r);return!(l>0||l===0)})}function __(){return!0}function n2(){return!1}function b_(){}function uF(n){let e,t,i;return function(){const r=Array.prototype.slice.call(arguments);return(!t||this!==i||!F1(r,t))&&(i=this,t=r,e=n.apply(this,arguments)),e}}function Tv(n){function e(){let t;try{t=n()}catch(i){return Promise.reject(i)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function sb(n){for(const e in n)delete n[e]}function U1(n){let e;for(e in n)return!1;return!e}class Ap{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class lb extends ab{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t=typeof e=="string",i=t?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const a=t?new Ap(e):e;a.target||(a.target=this.eventTarget_||this);const l=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});i in l||(l[i]=0,o[i]=0),++l[i];let m;for(let C=0,S=r.length;C<S;++C)if("handleEvent"in r[C]?m=r[C].handleEvent(a):m=r[C].call(this,a),m===!1||a.propagationStopped){m=!1;break}if(--l[i]===0){let C=o[i];for(delete o[i];C--;)this.removeEventListener(i,b_);delete l[i]}return m}disposeInternal(){this.listeners_&&sb(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const r=i.indexOf(t);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=b_,++this.pendingRemovals_[e]):(i.splice(r,1),i.length===0&&delete this.listeners_[e]))}}function Va(n,e,t,i,r){if(r){const l=t;t=function(o){return n.removeEventListener(e,t),l.call(i??this,o)}}else i&&i!==n&&(t=t.bind(i));const a={target:n,type:e,listener:t};return n.addEventListener(e,t),a}function Vx(n,e,t,i){return Va(n,e,t,i,!0)}function Bl(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),sb(n))}class Ab extends lb{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(mo.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let a=0;a<i;++a)r[a]=Va(this,e[a],t);return r}return Va(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let a=0;a<r;++a)i[a]=Vx(this,e[a],t)}else i=Vx(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)lZ(i);else if(Array.isArray(e))for(let r=0,a=e.length;r<a;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}}Ab.prototype.on;Ab.prototype.once;Ab.prototype.un;function lZ(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)Bl(n[e]);else Bl(n)}function Co(){throw new Error("Unimplemented abstract method.")}let AZ=0;function Io(n){return n.ol_uid||(n.ol_uid=String(++AZ))}class QI extends Ap{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class up extends Ab{constructor(e){super(),this.on,this.once,this.un,Io(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new QI(i,e,t)),i=Iv.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new QI(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const r=this.values_||(this.values_={});if(i)r[e]=t;else{const a=r[e];r[e]=t,a!==t&&this.notify(e,a)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],U1(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}const YI={LENGTH:"length"};class Gb extends Ap{constructor(e,t,i){super(e),this.element=t,this.index=i}}class jp extends up{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(YI.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new Gb(Gd.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Gb(Gd.REMOVE,t,e)),t}setAt(e,t){const i=this.getLength();if(e>=i){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new Gb(Gd.REMOVE,r,e)),this.dispatchEvent(new Gb(Gd.ADD,t,e))}updateLength_(){this.set(YI.LENGTH,this.array_.length)}assertUnique_(e,t){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===e&&i!==t)throw new Error("Duplicate item added to a unique collection")}}class ov extends Ap{constructor(e,t,i){super(e),this.map=t,this.frameState=i!==void 0?i:null}}class m1 extends ov{constructor(e,t,i,r,a,l){super(e,t,a),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=l}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const lu={SINGLECLICK:"singleclick",CLICK:mo.CLICK,DBLCLICK:mo.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},jg=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",uZ=jg.includes("safari")&&!jg.includes("chrom");uZ&&(jg.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(jg));const cZ=jg.includes("webkit")&&!jg.includes("edge"),cF=jg.includes("macintosh"),hZ=typeof devicePixelRatio<"u"?devicePixelRatio:1,sO=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,hF=typeof Image<"u"&&Image.prototype.decode,dZ=typeof createImageBitmap=="function",dF=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}(),K6={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class fZ extends lb{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=Va(i,K6.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Va(i,K6.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(mo.TOUCHMOVE,this.boundHandleTouchMove_,dF?{passive:!1}:!1)}emulateClick_(e){let t=new m1(lu.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new m1(lu.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new m1(lu.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==lu.POINTERUP||t.type==lu.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==lu.POINTERDOWN||t.type==lu.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new m1(lu.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Bl),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new m1(lu.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Va(i,lu.POINTERMOVE,this.handlePointerMove_,this),Va(i,lu.POINTERUP,this.handlePointerUp_,this),Va(this.element_,lu.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(Va(this.element_.getRootNode(),lu.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new m1(lu.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new m1(lu.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Bl(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(mo.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Bl(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Bl),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const I0={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Kh={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Pi={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Ms(n,e){if(!n)throw new Error(e)}const $x=1/0;class mZ{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,sb(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){Ms(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=$x?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,r=t.length,a=t[e],l=i[e],o=e;for(;e<r>>1;){const m=this.getLeftChildIndex_(e),C=this.getRightChildIndex_(e),S=C<r&&i[C]<i[m]?C:m;t[e]=t[S],i[e]=i[S],e=S}t[e]=a,i[e]=l,this.siftDown_(o,e)}siftDown_(e,t){const i=this.elements_,r=this.priorities_,a=i[t],l=r[t];for(;t>e;){const o=this.getParentIndex_(t);if(r[o]>l)i[t]=i[o],r[t]=r[o],t=o;else break}i[t]=a,r[t]=l}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let r=0;const a=t.length;let l,o,m;for(o=0;o<a;++o)l=t[o],m=e(l),m==$x?delete this.queuedElements_[this.keyFunction_(l)]:(i[r]=m,t[r++]=l);t.length=r,i.length=r,this.heapify_()}}class fF extends mZ{constructor(e,t){super(i=>e.apply(null,i),i=>i[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(mo.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(i===Pi.LOADED||i===Pi.ERROR||i===Pi.EMPTY){i!==Pi.ERROR&&t.removeEventListener(mo.CHANGE,this.boundHandleTileChange_);const r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;){const r=this.dequeue()[0],a=r.getKey();r.getState()===Pi.IDLE&&!(a in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[a]=!0,++this.tilesLoading_,++i,r.load())}}}function pZ(n,e,t,i,r){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return $x;const a=n.viewState.center,l=i[0]-a[0],o=i[1]-a[1];return 65536*Math.log(r)+Math.sqrt(l*l+o*o)/r}const vA={ANIMATING:0,INTERACTING:1},Qm={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function GA(n,e,t){return Math.min(Math.max(n,e),t)}function gZ(n,e,t,i,r,a){const l=r-t,o=a-i;if(l!==0||o!==0){const m=((n-t)*l+(e-i)*o)/(l*l+o*o);m>1?(t=r,i=a):m>0&&(t+=l*m,i+=o*m)}return Kg(n,e,t,i)}function Kg(n,e,t,i){const r=t-n,a=i-e;return r*r+a*a}function yZ(n){const e=n.length;for(let i=0;i<e;i++){let r=i,a=Math.abs(n[i][i]);for(let o=i+1;o<e;o++){const m=Math.abs(n[o][i]);m>a&&(a=m,r=o)}if(a===0)return null;const l=n[r];n[r]=n[i],n[i]=l;for(let o=i+1;o<e;o++){const m=-n[o][i]/n[i][i];for(let C=i;C<e+1;C++)i==C?n[o][C]=0:n[o][C]+=m*n[i][C]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let r=i-1;r>=0;r--)n[r][e]-=n[r][i]*t[i]}return t}function qI(n){return n*180/Math.PI}function k1(n){return n*Math.PI/180}function Ug(n,e){const t=n%e;return t*e<0?t+e:t}function vf(n,e,t){return n+t*(e-n)}function i2(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function jb(n,e){return Math.floor(i2(n,e))}function x1(n,e){return Math.ceil(i2(n,e))}function U6(n,e,t){if(n>=e&&n<t)return n;const i=t-e;return((n-e)%i+i)%i+e}function HI(n,e,t){return function(i,r,a,l,o){if(!i)return;if(!r&&!e)return i;const m=e?0:a[0]*r,C=e?0:a[1]*r,S=o?o[0]:0,O=o?o[1]:0;let U=n[0]+m/2+S,K=n[2]-m/2+S,z=n[1]+C/2+O,j=n[3]-C/2+O;U>K&&(U=(K+U)/2,K=U),z>j&&(z=(j+z)/2,j=z);let Q=GA(i[0],U,K),ee=GA(i[1],z,j);if(l&&t&&r){const V=30*r;Q+=-V*Math.log(1+Math.max(0,U-i[0])/V)+V*Math.log(1+Math.max(0,i[0]-K)/V),ee+=-V*Math.log(1+Math.max(0,z-i[1])/V)+V*Math.log(1+Math.max(0,i[1]-j)/V)}return[Q,ee]}}function vZ(n){return n}const Gc={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function L6(n){const e=bm();for(let t=0,i=n.length;t<i;++t)JC(e,n[t]);return e}function CZ(n,e,t){const i=Math.min.apply(null,n),r=Math.min.apply(null,e),a=Math.max.apply(null,n),l=Math.max.apply(null,e);return U0(i,r,a,l,t)}function D1(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function mF(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function Vg(n,e,t){let i,r;return e<n[0]?i=n[0]-e:n[2]<e?i=e-n[2]:i=0,t<n[1]?r=n[1]-t:n[3]<t?r=t-n[3]:r=0,i*i+r*r}function Wg(n,e){return lO(n,e[0],e[1])}function Wp(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function lO(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function F6(n,e){const t=n[0],i=n[1],r=n[2],a=n[3],l=e[0],o=e[1];let m=Gc.UNKNOWN;return l<t?m=m|Gc.LEFT:l>r&&(m=m|Gc.RIGHT),o<i?m=m|Gc.BELOW:o>a&&(m=m|Gc.ABOVE),m===Gc.UNKNOWN&&(m=Gc.INTERSECTING),m}function bm(){return[1/0,1/0,-1/0,-1/0]}function U0(n,e,t,i,r){return r?(r[0]=n,r[1]=e,r[2]=t,r[3]=i,r):[n,e,t,i]}function Qv(n){return U0(1/0,1/0,-1/0,-1/0,n)}function pF(n,e){const t=n[0],i=n[1];return U0(t,i,t,i,e)}function AO(n,e,t,i,r){const a=Qv(r);return yF(a,n,e,t,i)}function L0(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function gF(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function JC(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function yF(n,e,t,i,r){for(;t<i;t+=r)_Z(n,e[t],e[t+1]);return n}function _Z(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function vF(n,e){let t;return t=e(r2(n)),t||(t=e(o2(n)),t)||(t=e(a2(n)),t)||(t=e(G0(n)),t)?t:!1}function z6(n){let e=0;return $g(n)||(e=as(n)*nc(n)),e}function r2(n){return[n[0],n[1]]}function o2(n){return[n[2],n[1]]}function Bf(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function bZ(n,e){let t;if(e==="bottom-left")t=r2(n);else if(e==="bottom-right")t=o2(n);else if(e==="top-left")t=G0(n);else if(e==="top-right")t=a2(n);else throw new Error("Invalid corner");return t}function Zx(n,e,t,i,r){const[a,l,o,m,C,S,O,U]=CF(n,e,t,i);return U0(Math.min(a,o,C,O),Math.min(l,m,S,U),Math.max(a,o,C,O),Math.max(l,m,S,U),r)}function CF(n,e,t,i){const r=e*i[0]/2,a=e*i[1]/2,l=Math.cos(t),o=Math.sin(t),m=r*l,C=r*o,S=a*l,O=a*o,U=n[0],K=n[1];return[U-m+O,K-C-S,U-m-O,K-C+S,U+m-O,K+C+S,U+m+O,K+C-S,U-m+O,K-C-S]}function nc(n){return n[3]-n[1]}function ip(n,e,t){const i=t||bm();return uu(n,e)?(n[0]>e[0]?i[0]=n[0]:i[0]=e[0],n[1]>e[1]?i[1]=n[1]:i[1]=e[1],n[2]<e[2]?i[2]=n[2]:i[2]=e[2],n[3]<e[3]?i[3]=n[3]:i[3]=e[3]):Qv(i),i}function G0(n){return[n[0],n[3]]}function a2(n){return[n[2],n[3]]}function as(n){return n[2]-n[0]}function uu(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function $g(n){return n[2]<n[0]||n[3]<n[1]}function xZ(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function MZ(n,e,t){let i=!1;const r=F6(n,e),a=F6(n,t);if(r===Gc.INTERSECTING||a===Gc.INTERSECTING)i=!0;else{const l=n[0],o=n[1],m=n[2],C=n[3],S=e[0],O=e[1],U=t[0],K=t[1],z=(K-O)/(U-S);let j,Q;a&Gc.ABOVE&&!(r&Gc.ABOVE)&&(j=U-(K-C)/z,i=j>=l&&j<=m),!i&&a&Gc.RIGHT&&!(r&Gc.RIGHT)&&(Q=K-(U-m)*z,i=Q>=o&&Q<=C),!i&&a&Gc.BELOW&&!(r&Gc.BELOW)&&(j=U-(K-o)/z,i=j>=l&&j<=m),!i&&a&Gc.LEFT&&!(r&Gc.LEFT)&&(Q=K-(U-l)*z,i=Q>=o&&Q<=C)}return i}function SZ(n,e,t,i){if($g(n))return Qv(t);let r=[];r=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]],e(r,r,2);const a=[],l=[];for(let o=0,m=r.length;o<m;o+=2)a.push(r[o]),l.push(r[o+1]);return CZ(a,l,t)}function _F(n,e){const t=e.getExtent(),i=Bf(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const r=as(t),l=Math.floor((i[0]-t[0])/r)*r;n[0]-=l,n[2]-=l}return n}function bF(n,e,t){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[i[0],n[1],i[2],n[3]]];_F(n,e);const r=as(i);if(as(n)>r&&!t)return[[i[0],n[1],i[2],n[3]]];if(n[0]<i[0])return[[n[0]+r,n[1],i[2],n[3]],[i[0],n[1],n[2],n[3]]];if(n[2]>i[2])return[[n[0],n[1],i[2],n[3]],[i[0],n[1],n[2]-r,n[3]]]}return[n]}function wZ(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function Xx(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function uO(n,e){const t=Math.cos(e),i=Math.sin(e),r=n[0]*t-n[1]*i,a=n[1]*t+n[0]*i;return n[0]=r,n[1]=a,n}function EZ(n,e){return n[0]*=e,n[1]*=e,n}function BZ(n,e){const t=n[0]-e[0],i=n[1]-e[1];return t*t+i*i}function OZ(n,e){return Math.sqrt(BZ(n,e))}function cO(n,e){if(e.canWrapX()){const t=as(e.getExtent()),i=IZ(n,e,t);i&&(n[0]-=i*t)}return n}function IZ(n,e,t){const i=e.getExtent();let r=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||as(i),r=Math.floor((n[0]-i[0])/t)),r}function xF(n){return Math.pow(n,3)}function Yv(n){return 1-xF(1-n)}function TZ(n){return 3*n*n-2*n*n*n}function kZ(n){return n}const DZ=63710088e-1;function VI(n,e,t){t=t||DZ;const i=k1(n[1]),r=k1(e[1]),a=(r-i)/2,l=k1(e[0]-n[0])/2,o=Math.sin(a)*Math.sin(a)+Math.sin(l)*Math.sin(l)*Math.cos(i)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}function MF(...n){console.warn(...n)}const L1={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class s2{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||L1[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const ub=6378137,uv=Math.PI*ub,RZ=[-uv,-uv,uv,uv],PZ=[-180,-85,180,85],Wb=ub*Math.log(Math.tan(Math.PI/2));class By extends s2{constructor(e){super({code:e,units:"m",extent:RZ,global:!0,worldExtent:PZ,getPointResolution:function(t,i){return t/Math.cosh(i[1]/ub)}})}}const $I=[new By("EPSG:3857"),new By("EPSG:102100"),new By("EPSG:102113"),new By("EPSG:900913"),new By("http://www.opengis.net/def/crs/EPSG/0/3857"),new By("http://www.opengis.net/gml/srs/epsg.xml#3857")];function KZ(n,e,t,i){const r=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let a=0;a<r;a+=i){e[a]=uv*n[a]/180;let l=ub*Math.log(Math.tan(Math.PI*(+n[a+1]+90)/360));l>Wb?l=Wb:l<-Wb&&(l=-Wb),e[a+1]=l}return e}function UZ(n,e,t,i){const r=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let a=0;a<r;a+=i)e[a]=180*n[a]/uv,e[a+1]=360*Math.atan(Math.exp(n[a+1]/ub))/Math.PI-90;return e}const LZ=6378137,ZI=[-180,-90,180,90],FZ=Math.PI*LZ/180;class fg extends s2{constructor(e,t){super({code:e,units:"degrees",extent:ZI,axisOrientation:t,global:!0,metersPerUnit:FZ,worldExtent:ZI})}}const XI=[new fg("CRS:84"),new fg("EPSG:4326","neu"),new fg("urn:ogc:def:crs:OGC:1.3:CRS84"),new fg("urn:ogc:def:crs:OGC:2:84"),new fg("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new fg("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new fg("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let N6={};function zZ(n){return N6[n]||N6[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function NZ(n,e){N6[n]=e}let gv={};function x_(n,e,t){const i=n.getCode(),r=e.getCode();i in gv||(gv[i]={}),gv[i][r]=t}function U4(n,e){return n in gv&&e in gv[n]?gv[n][e]:null}const Jx=.9996,_m=.00669438,l2=_m*_m,A2=l2*_m,Eg=_m/(1-_m),JI=Math.sqrt(1-_m),kv=(1-JI)/(1+JI),SF=kv*kv,hO=SF*kv,dO=hO*kv,wF=dO*kv,EF=1-_m/4-3*l2/64-5*A2/256,GZ=3*_m/8+3*l2/32+45*A2/1024,jZ=15*l2/256+45*A2/1024,WZ=35*A2/3072,QZ=3/2*kv-27/32*hO+269/512*wF,YZ=21/16*SF-55/32*dO,qZ=151/96*hO-417/128*wF,HZ=1097/512*dO,e3=6378137;function VZ(n,e,t){const i=n-5e5,l=(t.north?e:e-1e7)/Jx/(e3*EF),o=l+QZ*Math.sin(2*l)+YZ*Math.sin(4*l)+qZ*Math.sin(6*l)+HZ*Math.sin(8*l),m=Math.sin(o),C=m*m,S=Math.cos(o),O=m/S,U=O*O,K=U*U,z=1-_m*C,j=Math.sqrt(1-_m*C),Q=e3/j,ee=(1-_m)/z,V=Eg*S**2,ae=V*V,ne=i/(Q*Jx),Z=ne*ne,oe=Z*ne,W=oe*ne,ue=W*ne,ge=ue*ne,ye=o-O/ee*(Z/2-W/24*(5+3*U+10*V-4*ae-9*Eg))+ge/720*(61+90*U+298*V+45*K-252*Eg-3*ae);let Me=(ne-oe/6*(1+2*U+V)+ue/120*(5-2*V+28*U-3*ae+8*Eg+24*K))/S;return Me=U6(Me+k1(BF(t.number)),-Math.PI,Math.PI),[qI(Me),qI(ye)]}const e9=-80,t9=84,$Z=-180,ZZ=180;function XZ(n,e,t){n=U6(n,$Z,ZZ),e<e9?e=e9:e>t9&&(e=t9);const i=k1(e),r=Math.sin(i),a=Math.cos(i),l=r/a,o=l*l,m=o*o,C=k1(n),S=BF(t.number),O=k1(S),U=e3/Math.sqrt(1-_m*r**2),K=Eg*a**2,z=a*U6(C-O,-Math.PI,Math.PI),j=z*z,Q=j*z,ee=Q*z,V=ee*z,ae=V*z,ne=e3*(EF*i-GZ*Math.sin(2*i)+jZ*Math.sin(4*i)-WZ*Math.sin(6*i)),Z=Jx*U*(z+Q/6*(1-o+K)+V/120*(5-18*o+m+72*K-58*Eg))+5e5;let oe=Jx*(ne+U*l*(j/2+ee/24*(5-o+9*K+4*K**2)+ae/720*(61-58*o+m+600*K-330*Eg)));return t.north||(oe+=1e7),[Z,oe]}function BF(n){return(n-1)*6-180+3}const JZ=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function OF(n){let e=0;for(const r of JZ){const a=n.match(r);if(a){e=parseInt(a[1]);break}}if(!e)return null;let t=0,i=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(i=!0,t=e-32600),t?{number:t,north:i}:null}function n9(n,e){return function(t,i,r,a){const l=t.length;r=r>1?r:2,a=a??r,i||(r>2?i=t.slice():i=new Array(l));for(let o=0;o<l;o+=a){const m=t[o],C=t[o+1],S=n(m,C,e);i[o]=S[0],i[o+1]=S[1]}return i}}function eX(n){return OF(n)?new s2({code:n,units:"m"}):null}function tX(n){const e=OF(n.getCode());return e?{forward:n9(XZ,e),inverse:n9(VZ,e)}:null}const nX=[tX],iX=[eX];let G6=!0;function IF(n){G6=!1}function fO(n,e){if(e!==void 0){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];e=e}else e=n.slice();return e}function j6(n){NZ(n.getCode(),n),x_(n,n,fO)}function rX(n){n.forEach(j6)}function Ws(n){if(typeof n!="string")return n;const e=zZ(n);if(e)return e;for(const t of iX){const i=t(n);if(i)return i}return null}function W6(n,e,t,i){n=Ws(n);let r;const a=n.getPointResolutionFunc();if(a){if(r=a(e,t),i&&i!==n.getUnits()){const l=n.getMetersPerUnit();l&&(r=r*l/L1[i])}}else{const l=n.getUnits();if(l=="degrees"&&!i||i=="degrees")r=e;else{const o=cb(n,Ws("EPSG:4326"));if(!o&&l!=="degrees")r=e*n.getMetersPerUnit();else{let C=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];C=o(C,C,2);const S=VI(C.slice(0,2),C.slice(2,4)),O=VI(C.slice(4,6),C.slice(6,8));r=(S+O)/2}const m=i?L1[i]:n.getMetersPerUnit();m!==void 0&&(r/=m)}}return r}function i9(n){rX(n),n.forEach(function(e){n.forEach(function(t){e!==t&&x_(e,t,fO)})})}function oX(n,e,t,i){n.forEach(function(r){e.forEach(function(a){x_(r,a,t),x_(a,r,i)})})}function mO(n,e){return n?typeof n=="string"?Ws(n):n:Ws(e)}function aX(n){return function(e,t,i,r){const a=e.length;i=i!==void 0?i:2,r=r??i,t=t!==void 0?t:new Array(a);for(let l=0;l<a;l+=r){const o=n(e.slice(l,l+i)),m=o.length;for(let C=0,S=r;C<S;++C)t[l+C]=C>=m?e[l+C]:o[C]}return t}}function Q6(n,e){return IF(),u2(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function L4(n,e){const t=u2(n,"EPSG:3857","EPSG:4326"),i=t[0];return(i<-180||i>180)&&(t[0]=Ug(i+180,360)-180),t}function R1(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||cb(n,e)===fO)&&t}function cb(n,e){const t=n.getCode(),i=e.getCode();let r=U4(t,i);if(r)return r;let a=null,l=null;for(const m of nX)a||(a=m(n)),l||(l=m(e));if(!a&&!l)return null;const o="EPSG:4326";if(l)if(a)r=F4(a.inverse,l.forward);else{const m=U4(t,o);m&&(r=F4(m,l.forward))}else{const m=U4(o,i);m&&(r=F4(a.inverse,m))}return r&&(j6(n),j6(e),x_(n,e,r)),r}function F4(n,e){return function(t,i,r,a){return i=n(t,i,r,a),e(i,i,r,a)}}function M_(n,e){const t=Ws(n),i=Ws(e);return cb(t,i)}function u2(n,e,t){const i=M_(e,t);if(!i){const r=Ws(e).getCode(),a=Ws(t).getCode();throw new Error(`No transform available between ${r} and ${a}`)}return i(n,void 0,n.length)}let sX=null;function lX(){return sX}function Y6(n,e){return n}function O0(n,e){return G6&&!Xx(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(G6=!1,MF("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function pO(n,e){return n}function Qp(n,e){return n}function AX(){i9($I),i9(XI),oX(XI,$I,KZ,UZ)}AX();const TF=new Array(6);function Yd(){return[1,0,0,1,0,0]}function r9(n){return yO(n,1,0,0,1,0,0)}function gO(n,e){const t=n[0],i=n[1],r=n[2],a=n[3],l=n[4],o=n[5],m=e[0],C=e[1],S=e[2],O=e[3],U=e[4],K=e[5];return n[0]=t*m+r*C,n[1]=i*m+a*C,n[2]=t*S+r*O,n[3]=i*S+a*O,n[4]=t*U+r*K+l,n[5]=i*U+a*K+o,n}function yO(n,e,t,i,r,a,l){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n[4]=a,n[5]=l,n}function uX(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function ec(n,e){const t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function z4(n,e,t){return gO(n,yO(TF,e,0,0,t,0,0))}function cX(n,e,t){return gO(n,yO(TF,1,0,0,1,e,t))}function Jp(n,e,t,i,r,a,l,o){const m=Math.sin(a),C=Math.cos(a);return n[0]=i*C,n[1]=r*m,n[2]=-i*m,n[3]=r*C,n[4]=l*i*C-o*i*m+e,n[5]=l*r*m+o*r*C+t,n}function kF(n,e){const t=hX(e);Ms(t!==0,"Transformation matrix cannot be inverted");const i=e[0],r=e[1],a=e[2],l=e[3],o=e[4],m=e[5];return n[0]=l/t,n[1]=-r/t,n[2]=-a/t,n[3]=i/t,n[4]=(a*m-l*o)/t,n[5]=-(i*m-r*o)/t,n}function hX(n){return n[0]*n[3]-n[1]*n[2]}const dX=[1e5,1e5,1e5,1e5,2,2];function fX(n){return"matrix("+n.join(", ")+")"}function o9(n){return n.substring(7,n.length-1).split(",").map(parseFloat)}function mX(n,e){const t=o9(n),i=o9(e);for(let r=0;r<6;++r)if(Math.round((t[r]-i[r])*dX[r])!==0)return!1;return!0}function P1(n,e,t,i,r,a,l){a=a||[],l=l||2;let o=0;for(let m=e;m<t;m+=i){const C=n[m],S=n[m+1];a[o++]=r[0]*C+r[2]*S+r[4],a[o++]=r[1]*C+r[3]*S+r[5];for(let O=2;O<l;O++)a[o++]=n[m+O]}return a&&a.length!=o&&(a.length=o),a}function DF(n,e,t,i,r,a,l){l=l||[];const o=Math.cos(r),m=Math.sin(r),C=a[0],S=a[1];let O=0;for(let U=e;U<t;U+=i){const K=n[U]-C,z=n[U+1]-S;l[O++]=C+K*o-z*m,l[O++]=S+K*m+z*o;for(let j=U+2;j<U+i;++j)l[O++]=n[j]}return l&&l.length!=O&&(l.length=O),l}function pX(n,e,t,i,r,a,l,o){o=o||[];const m=l[0],C=l[1];let S=0;for(let O=e;O<t;O+=i){const U=n[O]-m,K=n[O+1]-C;o[S++]=m+r*U,o[S++]=C+a*K;for(let z=O+2;z<O+i;++z)o[S++]=n[z]}return o&&o.length!=S&&(o.length=S),o}function gX(n,e,t,i,r,a,l){l=l||[];let o=0;for(let m=e;m<t;m+=i){l[o++]=n[m]+r,l[o++]=n[m+1]+a;for(let C=m+2;C<m+i;++C)l[o++]=n[C]}return l&&l.length!=o&&(l.length=o),l}const a9=Yd(),yX=[NaN,NaN];class RF extends up{constructor(){super(),this.extent_=bm(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=uF((e,t,i)=>{if(!i)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Co()}closestPointXY(e,t,i,r){return Co()}containsXY(e,t){return this.closestPointXY(e,t,yX,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Co()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Qv(t),this.extentRevision_=this.getRevision()}return xZ(this.extent_,e)}rotate(e,t){Co()}scale(e,t,i){Co()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Co()}getType(){return Co()}applyTransform(e){Co()}intersectsExtent(e){return Co()}translate(e,t){Co()}transform(e,t){const i=Ws(e),r=i.getUnits()=="tile-pixels"?function(a,l,o){const m=i.getExtent(),C=i.getWorldExtent(),S=nc(C)/nc(m);Jp(a9,C[0],C[3],S,-S,0,0,0);const O=P1(a,0,a.length,o,a9,l),U=M_(i,t);return U?U(O,O,o):O}:M_(i,t);return this.applyTransform(r),this}}class Zg extends RF{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return AO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Co()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=s9(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Co()}setLayout(e,t,i){let r;if(e)r=s9(e);else{for(let a=0;a<i;++a){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}r=t.length,e=Xg(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();DF(i,0,i.length,r,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=Bf(this.getExtent()));const r=this.getFlatCoordinates();if(r){const a=this.getStride();pX(r,0,r.length,a,e,t,i,r),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();gX(i,0,i.length,r,e,t,i),this.changed()}}}function Xg(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function s9(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function vX(n,e,t){const i=n.getFlatCoordinates();if(!i)return null;const r=n.getStride();return P1(i,0,i.length,r,e,t)}function PF(n,e,t,i){let r=0;const a=n[t-i],l=n[t-i+1];let o=0,m=0;for(;e<t;e+=i){const C=n[e]-a,S=n[e+1]-l;r+=m*C-o*S,o=C,m=S}return r/2}function KF(n,e,t,i){let r=0;for(let a=0,l=t.length;a<l;++a){const o=t[a];r+=PF(n,e,o,i),e=o}return r}function CX(n,e,t,i){let r=0;for(let a=0,l=t.length;a<l;++a){const o=t[a];r+=KF(n,e,o,i),e=o[o.length-1]}return r}function l9(n,e,t,i,r,a,l){const o=n[e],m=n[e+1],C=n[t]-o,S=n[t+1]-m;let O;if(C===0&&S===0)O=e;else{const U=((r-o)*C+(a-m)*S)/(C*C+S*S);if(U>1)O=t;else if(U>0){for(let K=0;K<i;++K)l[K]=vf(n[e+K],n[t+K],U);l.length=i;return}else O=e}for(let U=0;U<i;++U)l[U]=n[O+U];l.length=i}function vO(n,e,t,i,r){let a=n[e],l=n[e+1];for(e+=i;e<t;e+=i){const o=n[e],m=n[e+1],C=Kg(a,l,o,m);C>r&&(r=C),a=o,l=m}return r}function CO(n,e,t,i,r){for(let a=0,l=t.length;a<l;++a){const o=t[a];r=vO(n,e,o,i,r),e=o}return r}function _X(n,e,t,i,r){for(let a=0,l=t.length;a<l;++a){const o=t[a];r=CO(n,e,o,i,r),e=o[o.length-1]}return r}function _O(n,e,t,i,r,a,l,o,m,C,S){if(e==t)return C;let O,U;if(r===0){if(U=Kg(l,o,n[e],n[e+1]),U<C){for(O=0;O<i;++O)m[O]=n[e+O];return m.length=i,U}return C}S=S||[NaN,NaN];let K=e+i;for(;K<t;)if(l9(n,K-i,K,i,l,o,S),U=Kg(l,o,S[0],S[1]),U<C){for(C=U,O=0;O<i;++O)m[O]=S[O];m.length=i,K+=i}else K+=i*Math.max((Math.sqrt(U)-Math.sqrt(C))/r|0,1);if(a&&(l9(n,t-i,e,i,l,o,S),U=Kg(l,o,S[0],S[1]),U<C)){for(C=U,O=0;O<i;++O)m[O]=S[O];m.length=i}return C}function bO(n,e,t,i,r,a,l,o,m,C,S){S=S||[NaN,NaN];for(let O=0,U=t.length;O<U;++O){const K=t[O];C=_O(n,e,K,i,r,a,l,o,m,C,S),e=K}return C}function bX(n,e,t,i,r,a,l,o,m,C,S){S=S||[NaN,NaN];for(let O=0,U=t.length;O<U;++O){const K=t[O];C=bO(n,e,K,i,r,a,l,o,m,C,S),e=K[K.length-1]}return C}function xX(n,e,t,i){for(let r=0,a=t.length;r<a;++r)n[e++]=t[r];return e}function c2(n,e,t,i){for(let r=0,a=t.length;r<a;++r){const l=t[r];for(let o=0;o<i;++o)n[e++]=l[o]}return e}function hb(n,e,t,i,r){r=r||[];let a=0;for(let l=0,o=t.length;l<o;++l){const m=c2(n,e,t[l],i);r[a++]=m,e=m}return r.length=a,r}function UF(n,e,t,i,r){r=r||[];let a=0;for(let l=0,o=t.length;l<o;++l){const m=hb(n,e,t[l],i,r[a]);m.length===0&&(m[0]=e),r[a++]=m,e=m[m.length-1]}return r.length=a,r}function M1(n,e,t,i,r){r=r!==void 0?r:[];let a=0;for(let l=e;l<t;l+=i)r[a++]=n.slice(l,l+i);return r.length=a,r}function S_(n,e,t,i,r){r=r!==void 0?r:[];let a=0;for(let l=0,o=t.length;l<o;++l){const m=t[l];r[a++]=M1(n,e,m,i,r[a]),e=m}return r.length=a,r}function q6(n,e,t,i,r){r=r!==void 0?r:[];let a=0;for(let l=0,o=t.length;l<o;++l){const m=t[l];r[a++]=m.length===1&&m[0]===e?[]:S_(n,e,m,i,r[a]),e=m[m.length-1]}return r.length=a,r}function h2(n,e,t,i,r,a,l){const o=(t-e)/i;if(o<3){for(;e<t;e+=i)a[l++]=n[e],a[l++]=n[e+1];return l}const m=new Array(o);m[0]=1,m[o-1]=1;const C=[e,t-i];let S=0;for(;C.length>0;){const O=C.pop(),U=C.pop();let K=0;const z=n[U],j=n[U+1],Q=n[O],ee=n[O+1];for(let V=U+i;V<O;V+=i){const ae=n[V],ne=n[V+1],Z=gZ(ae,ne,z,j,Q,ee);Z>K&&(S=V,K=Z)}K>r&&(m[(S-e)/i]=1,U+i<S&&C.push(U,S),S+i<O&&C.push(S,O))}for(let O=0;O<o;++O)m[O]&&(a[l++]=n[e+O*i],a[l++]=n[e+O*i+1]);return l}function LF(n,e,t,i,r,a,l,o){for(let m=0,C=t.length;m<C;++m){const S=t[m];l=h2(n,e,S,i,r,a,l),o.push(l),e=S}return l}function _g(n,e){return e*Math.round(n/e)}function MX(n,e,t,i,r,a,l){if(e==t)return l;let o=_g(n[e],r),m=_g(n[e+1],r);e+=i,a[l++]=o,a[l++]=m;let C,S;do if(C=_g(n[e],r),S=_g(n[e+1],r),e+=i,e==t)return a[l++]=C,a[l++]=S,l;while(C==o&&S==m);for(;e<t;){const O=_g(n[e],r),U=_g(n[e+1],r);if(e+=i,O==C&&U==S)continue;const K=C-o,z=S-m,j=O-o,Q=U-m;if(K*Q==z*j&&(K<0&&j<K||K==j||K>0&&j>K)&&(z<0&&Q<z||z==Q||z>0&&Q>z)){C=O,S=U;continue}a[l++]=C,a[l++]=S,o=C,m=S,C=O,S=U}return a[l++]=C,a[l++]=S,l}function xO(n,e,t,i,r,a,l,o){for(let m=0,C=t.length;m<C;++m){const S=t[m];l=MX(n,e,S,i,r,a,l),o.push(l),e=S}return l}function SX(n,e,t,i,r,a,l,o){for(let m=0,C=t.length;m<C;++m){const S=t[m],O=[];l=xO(n,e,S,i,r,a,l,O),o.push(O),e=S[S.length-1]}return l}class w_ extends Zg{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new w_(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,r){return r<Vg(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(vO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_O(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,r))}getArea(){return PF(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return M1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=h2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new w_(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=c2(this.flatCoordinates,0,e,this.stride),this.changed()}}class Qg extends Zg{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Qg(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const a=this.flatCoordinates,l=Kg(e,t,a[0],a[1]);if(l<r){const o=this.stride;for(let m=0;m<o;++m)i[m]=a[m];return i.length=o,l}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return pF(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return lO(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=xX(this.flatCoordinates,0,e,this.stride),this.changed()}}function wX(n,e,t,i,r){return!vF(r,function(l){return!Bg(n,e,t,i,l[0],l[1])})}function Bg(n,e,t,i,r,a){let l=0,o=n[t-i],m=n[t-i+1];for(;e<t;e+=i){const C=n[e],S=n[e+1];m<=a?S>a&&(C-o)*(a-m)-(r-o)*(S-m)>0&&l++:S<=a&&(C-o)*(a-m)-(r-o)*(S-m)<0&&l--,o=C,m=S}return l!==0}function MO(n,e,t,i,r,a){if(t.length===0||!Bg(n,e,t[0],i,r,a))return!1;for(let l=1,o=t.length;l<o;++l)if(Bg(n,t[l-1],t[l],i,r,a))return!1;return!0}function EX(n,e,t,i,r,a){if(t.length===0)return!1;for(let l=0,o=t.length;l<o;++l){const m=t[l];if(MO(n,e,m,i,r,a))return!0;e=m[m.length-1]}return!1}function SO(n,e,t,i,r,a,l){let o,m,C,S,O,U,K;const z=r[a+1],j=[];for(let V=0,ae=t.length;V<ae;++V){const ne=t[V];for(S=n[ne-i],U=n[ne-i+1],o=e;o<ne;o+=i)O=n[o],K=n[o+1],(z<=U&&K<=z||U<=z&&z<=K)&&(C=(z-U)/(K-U)*(O-S)+S,j.push(C)),S=O,U=K}let Q=NaN,ee=-1/0;for(j.sort($p),S=j[0],o=1,m=j.length;o<m;++o){O=j[o];const V=Math.abs(O-S);V>ee&&(C=(S+O)/2,MO(n,e,t,i,C,z)&&(Q=C,ee=V)),S=O}return isNaN(Q)&&(Q=r[a]),l?(l.push(Q,z,ee),l):[Q,z,ee]}function FF(n,e,t,i,r){let a=[];for(let l=0,o=t.length;l<o;++l){const m=t[l];a=SO(n,e,m,i,r,2*l,a),e=m[m.length-1]}return a}function zF(n,e,t,i,r){let a;for(e+=i;e<t;e+=i)if(a=r(n.slice(e-i,e),n.slice(e,e+i)),a)return a;return!1}function d2(n,e,t,i,r,a){return a=a??yF(bm(),n,e,t,i),uu(r,a)?a[0]>=r[0]&&a[2]<=r[2]||a[1]>=r[1]&&a[3]<=r[3]?!0:zF(n,e,t,i,function(l,o){return MZ(r,l,o)}):!1}function BX(n,e,t,i,r){for(let a=0,l=t.length;a<l;++a){if(d2(n,e,t[a],i,r))return!0;e=t[a]}return!1}function NF(n,e,t,i,r){return!!(d2(n,e,t,i,r)||Bg(n,e,t,i,r[0],r[1])||Bg(n,e,t,i,r[0],r[3])||Bg(n,e,t,i,r[2],r[1])||Bg(n,e,t,i,r[2],r[3]))}function GF(n,e,t,i,r){if(!NF(n,e,t[0],i,r))return!1;if(t.length===1)return!0;for(let a=1,l=t.length;a<l;++a)if(wX(n,t[a-1],t[a],i,r)&&!d2(n,t[a-1],t[a],i,r))return!1;return!0}function OX(n,e,t,i,r){for(let a=0,l=t.length;a<l;++a){const o=t[a];if(GF(n,e,o,i,r))return!0;e=o[o.length-1]}return!1}function IX(n,e,t,i){for(;e<t-i;){for(let r=0;r<i;++r){const a=n[e+r];n[e+r]=n[t-i+r],n[t-i+r]=a}e+=i,t-=i}}function wO(n,e,t,i){let r=0,a=n[t-i],l=n[t-i+1];for(;e<t;e+=i){const o=n[e],m=n[e+1];r+=(o-a)*(m+l),a=o,l=m}return r===0?void 0:r>0}function EO(n,e,t,i,r){r=r!==void 0?r:!1;for(let a=0,l=t.length;a<l;++a){const o=t[a],m=wO(n,e,o,i);if(a===0){if(r&&m||!r&&!m)return!1}else if(r&&!m||!r&&m)return!1;e=o}return!0}function jF(n,e,t,i,r){for(let a=0,l=t.length;a<l;++a){const o=t[a];if(!EO(n,e,o,i,r))return!1;o.length&&(e=o[o.length-1])}return!0}function t3(n,e,t,i,r){r=r!==void 0?r:!1;for(let a=0,l=t.length;a<l;++a){const o=t[a],m=wO(n,e,o,i);(a===0?r&&m||!r&&!m:r&&!m||!r&&m)&&IX(n,e,o,i),e=o}return e}function H6(n,e,t,i,r){for(let a=0,l=t.length;a<l;++a)e=t3(n,e,t[a],i,r);return e}function WF(n,e){const t=[];let i=0,r=0,a;for(let l=0,o=e.length;l<o;++l){const m=e[l],C=wO(n,i,m,2);if(a===void 0&&(a=C),C===a)t.push(e.slice(r,l+1));else{if(t.length===0)continue;t[t.length-1].push(e[r])}r=l+1,i=m}return t}class F0 extends Zg{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Zp(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new F0(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<Vg(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(CO(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),bO(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return MO(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return KF(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),t3(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,S_(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Bf(this.getExtent());this.flatInteriorPoint_=SO(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Qg(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new w_(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,r=[];let a=0;for(let l=0,o=i.length;l<o;++l){const m=i[l],C=new w_(t.slice(a,m),e);r.push(C),a=m}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;EO(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=t3(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=xO(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new F0(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return GF(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=hb(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function A9(n){if($g(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],i=n[2],r=n[3],a=[e,t,e,r,i,r,i,t,e,t];return new F0(a,"XY",[a.length])}function BO(n,e,t,i){const r=as(e)/t[0],a=nc(e)/t[1];return i?Math.min(n,Math.max(r,a)):Math.min(n,Math.min(r,a))}function OO(n,e,t){let i=Math.min(n,e);const r=50;return i*=Math.log(1+r*Math.max(0,n/e-1))/r+1,t&&(i=Math.max(i,t),i/=Math.log(1+r*Math.max(0,t/n-1))/r+1),GA(i,t/2,e*2)}function TX(n,e,t,i){return e=e!==void 0?e:!0,function(r,a,l,o){if(r!==void 0){const m=n[0],C=n[n.length-1],S=t?BO(m,t,l,i):m;if(o)return e?OO(r,S,C):GA(r,C,S);const O=Math.min(S,r),U=Math.floor(t2(n,O,a));return n[U]>S&&U<n.length-1?n[U+1]:n[U]}}}function kX(n,e,t,i,r,a){return i=i!==void 0?i:!0,t=t!==void 0?t:0,function(l,o,m,C){if(l!==void 0){const S=r?BO(e,r,m,a):e;if(C)return i?OO(l,S,t):GA(l,t,S);const O=1e-9,U=Math.ceil(Math.log(e/S)/Math.log(n)-O),K=-o*(.5-O)+.5,z=Math.min(S,l),j=Math.floor(Math.log(e/z)/Math.log(n)+K),Q=Math.max(U,j),ee=e/Math.pow(n,Q);return GA(ee,t,S)}}}function u9(n,e,t,i,r){return t=t!==void 0?t:!0,function(a,l,o,m){if(a!==void 0){const C=i?BO(n,i,o,r):n;return!t||!m?GA(a,e,C):OO(a,C,e)}}}function IO(n){if(n!==void 0)return 0}function c9(n){if(n!==void 0)return n}function DX(n){const e=2*Math.PI/n;return function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function RX(n){const e=k1(5);return function(t,i){return i||t===void 0?t:Math.abs(t)<=e?0:t}}const QF=42,TO=256,N4=0;class Xm extends up{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=mO(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&IF(),e.center&&(e.center=O0(e.center,this.projection_)),e.extent&&(e.extent=Qp(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const o in Qm)delete t[o];this.setProperties(t,!0);const i=KX(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const r=PX(e),a=i.constraint,l=UX(e);this.constraints_={center:r,resolution:a,rotation:l},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const r=e||[0,0,0,0];t=t||[0,0,0,0];const a=this.getResolution(),l=a/2*(r[3]-t[3]+t[1]-r[1]),o=a/2*(r[0]-t[0]+t[2]-r[2]);this.setCenterInternal([i[0]+l,i[1]-o])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=O0(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=O0(r.anchor,this.getProjection())),t[i]=r}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,i;t>1&&typeof arguments[t-1]=="function"&&(i=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const S=arguments[r];S.center&&this.setCenterInternal(S.center),S.zoom!==void 0?this.setZoom(S.zoom):S.resolution&&this.setResolution(S.resolution),S.rotation!==void 0&&this.setRotation(S.rotation)}if(r===t){i&&Qb(i,!0);return}let a=Date.now(),l=this.targetCenter_.slice(),o=this.targetResolution_,m=this.targetRotation_;const C=[];for(;r<t;++r){const S=arguments[r],O={start:a,complete:!1,anchor:S.anchor,duration:S.duration!==void 0?S.duration:1e3,easing:S.easing||TZ,callback:i};if(S.center&&(O.sourceCenter=l,O.targetCenter=S.center.slice(),l=O.targetCenter),S.zoom!==void 0?(O.sourceResolution=o,O.targetResolution=this.getResolutionForZoom(S.zoom),o=O.targetResolution):S.resolution&&(O.sourceResolution=o,O.targetResolution=S.resolution,o=O.targetResolution),S.rotation!==void 0){O.sourceRotation=m;const U=Ug(S.rotation-m+Math.PI,2*Math.PI)-Math.PI;O.targetRotation=m+U,m=O.targetRotation}LX(O)?O.complete=!0:a+=O.duration,C.push(O)}this.animations_.push(C),this.setHint(vA.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[vA.ANIMATING]>0}getInteracting(){return this.hints_[vA.INTERACTING]>0}cancelAnimations(){this.setHint(vA.ANIMATING,-this.hints_[vA.ANIMATING]);let e;for(let t=0,i=this.animations_.length;t<i;++t){const r=this.animations_[t];if(r[0].callback&&Qb(r[0].callback,!1),!e)for(let a=0,l=r.length;a<l;++a){const o=r[a];if(!o.complete){e=o.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let a=!0;for(let l=0,o=r.length;l<o;++l){const m=r[l];if(m.complete)continue;const C=e-m.start;let S=m.duration>0?C/m.duration:1;S>=1?(m.complete=!0,S=1):a=!1;const O=m.easing(S);if(m.sourceCenter){const U=m.sourceCenter[0],K=m.sourceCenter[1],z=m.targetCenter[0],j=m.targetCenter[1];this.nextCenter_=m.targetCenter;const Q=U+O*(z-U),ee=K+O*(j-K);this.targetCenter_=[Q,ee]}if(m.sourceResolution&&m.targetResolution){const U=O===1?m.targetResolution:m.sourceResolution+O*(m.targetResolution-m.sourceResolution);if(m.anchor){const K=this.getViewportSize_(this.getRotation()),z=this.constraints_.resolution(U,0,K,!0);this.targetCenter_=this.calculateCenterZoom(z,m.anchor)}this.nextResolution_=m.targetResolution,this.targetResolution_=U,this.applyTargetState_(!0)}if(m.sourceRotation!==void 0&&m.targetRotation!==void 0){const U=O===1?Ug(m.targetRotation+Math.PI,2*Math.PI)-Math.PI:m.sourceRotation+O*(m.targetRotation-m.sourceRotation);if(m.anchor){const K=this.constraints_.rotation(U,!0);this.targetCenter_=this.calculateCenterRotate(K,m.anchor)}this.nextRotation_=m.targetRotation,this.targetRotation_=U}if(this.applyTargetState_(!0),t=!0,!m.complete)break}if(a){this.animations_[i]=null,this.setHint(vA.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const l=r[0].callback;l&&Qb(l,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-t[0],r[1]-t[1]],uO(i,e-this.getRotation()),wZ(i,t)),i}calculateCenterZoom(e,t){let i;const r=this.getCenterInternal(),a=this.getResolution();if(r!==void 0&&a!==void 0){const l=t[0]-e*(t[0]-r[0])/a,o=t[1]-e*(t[1]-r[1])/a;i=[l,o]}return i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],r=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&Y6(e,this.getProjection())}getCenterInternal(){return this.get(Qm.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return pO(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Ms(t,"The view center is not defined");const i=this.getResolution();Ms(i!==void 0,"The view resolution is not defined");const r=this.getRotation();return Ms(r!==void 0,"The view rotation is not defined"),Zx(t,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Qm.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Qp(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=as(e)/t[0],r=nc(e)/t[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(t/i)/Math.log(e);return function(a){return t/Math.pow(e,a*r)}}getRotation(){return this.get(Qm.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,a=Math.log(i/r)/t;return function(l){return Math.log(i/l)/t/a}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const a=this.padding_;if(a){const l=this.getViewportSizeMinusPadding_();r=G4(r,this.getViewportSize_(),[l[0]/2+a[3],l[1]/2+a[0]],t,i)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,i,r;if(this.resolutions_){const a=t2(this.resolutions_,e,1);t=a,i=this.resolutions_[a],a==this.resolutions_.length-1?r=2:r=i/this.resolutions_[a+1]}else i=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const t=GA(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(i,GA(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(Ms(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){Ms(!$g(e),"Cannot fit empty extent provided as `geometry`");const r=Qp(e,this.getProjection());i=A9(r)}else if(e.getType()==="Circle"){const r=Qp(e.getExtent(),this.getProjection());i=A9(r),i.rotate(this.getRotation(),Bf(r))}else i=e;this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),r=Math.sin(-t),a=e.getFlatCoordinates(),l=e.getStride();let o=1/0,m=1/0,C=-1/0,S=-1/0;for(let O=0,U=a.length;O<U;O+=l){const K=a[O]*i-a[O+1]*r,z=a[O]*r+a[O+1]*i;o=Math.min(o,K),m=Math.min(m,z),C=Math.max(C,K),S=Math.max(S,z)}return[o,m,C,S]}fitInternal(e,t){t=t||{};let i=t.size;i||(i=this.getViewportSizeMinusPadding_());const r=t.padding!==void 0?t.padding:[0,0,0,0],a=t.nearest!==void 0?t.nearest:!1;let l;t.minResolution!==void 0?l=t.minResolution:t.maxZoom!==void 0?l=this.getResolutionForZoom(t.maxZoom):l=0;const o=this.rotatedExtentForGeometry(e);let m=this.getResolutionForExtentInternal(o,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);m=isNaN(m)?l:Math.max(m,l),m=this.getConstrainedResolution(m,a?0:1);const C=this.getRotation(),S=Math.sin(C),O=Math.cos(C),U=Bf(o);U[0]+=(r[1]-r[3])/2*m,U[1]+=(r[0]-r[2])/2*m;const K=U[0]*O-U[1]*S,z=U[1]*O+U[0]*S,j=this.getConstrainedCenter([K,z],m),Q=t.callback?t.callback:b_;t.duration!==void 0?this.animateInternal({resolution:m,center:j,duration:t.duration,easing:t.easing},Q):(this.targetResolution_=m,this.targetCenter_=j,this.applyTargetState_(!1,!0),Qb(Q,!0))}centerOn(e,t,i){this.centerOnInternal(O0(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(G4(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,r){let a;const l=this.padding_;if(l&&e){const o=this.getViewportSizeMinusPadding_(-i),m=G4(e,r,[o[0]/2+l[3],o[1]/2+l[0]],t,i);a=[e[0]-m[0],e[1]-m[1]]}return a}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=Y6(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&O0(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),a=this.constraints_.resolution(this.targetResolution_*e,0,r,i);t&&(this.targetCenter_=this.calculateCenterZoom(a,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=O0(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&O0(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,i),a=this.getViewportSize_(r),l=this.constraints_.resolution(this.targetResolution_,0,a,i),o=this.constraints_.center(this.targetCenter_,l,a,i,this.calculateCenterShift(this.targetCenter_,l,r,a));this.get(Qm.ROTATION)!==r&&this.set(Qm.ROTATION,r),this.get(Qm.RESOLUTION)!==l&&(this.set(Qm.RESOLUTION,l),this.set("zoom",this.getZoom(),!0)),(!o||!this.get(Qm.CENTER)||!Xx(this.get(Qm.CENTER),o))&&this.set(Qm.CENTER,o),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=e!==void 0?e:200;const r=t||0,a=this.constraints_.rotation(this.targetRotation_),l=this.getViewportSize_(a),o=this.constraints_.resolution(this.targetResolution_,r,l),m=this.constraints_.center(this.targetCenter_,o,l,!1,this.calculateCenterShift(this.targetCenter_,o,a,l));if(e===0&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=a,this.targetCenter_=m,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==a||!this.getCenterInternal()||!Xx(this.getCenterInternal(),m))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:a,center:m,resolution:o,duration:e,easing:Yv,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(vA.INTERACTING,1)}endInteraction(e,t,i){i=i&&O0(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.getInteracting()&&(this.setHint(vA.INTERACTING,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}}function Qb(n,e){setTimeout(function(){n(e)},0)}function PX(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return HI(n.extent,n.constrainOnlyCenter,t)}const e=mO(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,HI(t,!1,!1)}return vZ}function KX(n){let e,t,i,l=n.minZoom!==void 0?n.minZoom:N4,o=n.maxZoom!==void 0?n.maxZoom:28;const m=n.zoomFactor!==void 0?n.zoomFactor:2,C=n.multiWorld!==void 0?n.multiWorld:!1,S=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,O=n.showFullExtent!==void 0?n.showFullExtent:!1,U=mO(n.projection,"EPSG:3857"),K=U.getExtent();let z=n.constrainOnlyCenter,j=n.extent;if(!C&&!j&&U.isGlobal()&&(z=!1,j=K),n.resolutions!==void 0){const Q=n.resolutions;t=Q[l],i=Q[o]!==void 0?Q[o]:Q[Q.length-1],n.constrainResolution?e=TX(Q,S,!z&&j,O):e=u9(t,i,S,!z&&j,O)}else{const ee=(K?Math.max(as(K),nc(K)):360*L1.degrees/U.getMetersPerUnit())/TO/Math.pow(2,N4),V=ee/Math.pow(2,28-N4);t=n.maxResolution,t!==void 0?l=0:t=ee/Math.pow(m,l),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=t/Math.pow(m,o):i=ee/Math.pow(m,o):i=V),o=l+Math.floor(Math.log(t/i)/Math.log(m)),i=t/Math.pow(m,o-l),n.constrainResolution?e=kX(m,t,i,S,!z&&j,O):e=u9(t,i,S,!z&&j,O)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:l,zoomFactor:m}}function UX(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?RX():t===!1?c9:typeof t=="number"?DX(t):c9}return IO}function LX(n){return!(n.sourceCenter&&n.targetCenter&&!Xx(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function G4(n,e,t,i,r){const a=Math.cos(-r);let l=Math.sin(-r),o=n[0]*a-n[1]*l,m=n[1]*a+n[0]*l;o+=(e[0]/2-t[0])*i,m+=(t[1]-e[1]/2)*i,l=-l;const C=o*a-m*l,S=m*a+o*l;return[C,S]}const Yb="ol-hidden",FX="ol-selectable",f2="ol-unselectable",kO="ol-control",h9="ol-collapsed",zX=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),d9=["style","variant","weight","size","lineHeight","family"],V6={normal:400,bold:700},$6=function(n){const e=n.match(zX);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let i=0,r=d9.length;i<r;++i){const a=e[i+1];a!==void 0&&(t[d9[i]]=typeof a=="string"?a.trim():a)}return isNaN(Number(t.weight))&&t.weight in V6&&(t.weight=V6[t.weight]),t.families=t.family.split(/,\s?/).map(i=>i.trim().replace(/^['"]|['"]$/g,"")),t};function jA(n,e,t,i){let r;return t&&t.length?r=t.shift():sO?r=new OffscreenCanvas(n||300,e||300):r=document.createElement("canvas"),n&&(r.width=n),e&&(r.height=e),r.getContext("2d",i)}let j4;function n3(){return j4||(j4=jA(1,1)),j4}function db(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function NX(n){let e=n.offsetWidth;const t=getComputedStyle(n);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function GX(n){let e=n.offsetHeight;const t=getComputedStyle(n);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function f9(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function YF(n){for(;n.lastChild;)n.lastChild.remove()}function jX(n,e){const t=n.childNodes;for(let i=0;;++i){const r=t[i],a=e[i];if(!r&&!a)break;if(r!==a){if(!r){n.appendChild(a);continue}if(!a){n.removeChild(r),--i;continue}n.insertBefore(a,r)}}}class DO extends up{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,i=this.listenerKeys.length;t<i;++t)Bl(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){const t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==b_&&this.listenerKeys.push(Va(e,I0.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class WX extends DO{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:t+"-expand",a=e.collapseLabel!==void 0?e.collapseLabel:"›",l=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof a=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=a,this.collapseLabel_.className=l):this.collapseLabel_=a;const o=e.label!==void 0?e.label:"i";typeof o=="string"?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=r):this.label_=o;const m=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(m),this.toggleButton_.addEventListener(mo.CLICK,this.handleClick_.bind(this),!1);const C=t+" "+f2+" "+kO+(this.collapsed_&&this.collapsible_?" "+h9:"")+(this.collapsible_?"":" ol-uncollapsible"),S=this.element;S.className=C,S.appendChild(this.toggleButton_),S.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),i=new Set(t.flatMap(r=>r.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(r=>i.add(r)):i.add(this.attributions_)),!this.overrideCollapsible_){const r=!t.some(a=>a.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(r)}return Array.from(i)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(r=>Tv(()=>r))),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!F1(t,this.renderedAttributions_)){YF(this.ulElement_);for(let r=0,a=t.length;r<a;++r){const l=document.createElement("li");l.innerHTML=t[r],this.ulElement_.appendChild(l)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(h9),this.collapsed_?f9(this.collapseLabel_,this.label_):f9(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class QX extends DO{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"⇧",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const a=e.tipLabel?e.tipLabel:"Reset rotation",l=document.createElement("button");l.className=t+"-reset",l.setAttribute("type","button"),l.title=a,l.appendChild(this.label_),l.addEventListener(mo.CLICK,this.handleClick_.bind(this),!1);const o=t+" "+f2+" "+kO,m=this.element;m.className=o,m.appendChild(l),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Yb)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Yv}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const a=this.element.classList.contains(Yb);!a&&i===0?this.element.classList.add(Yb):a&&i!==0&&this.element.classList.remove(Yb)}this.label_.style.transform=r}this.rotation_=i}}class YX extends DO{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",a=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",l=e.zoomInLabel!==void 0?e.zoomInLabel:"+",o=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",m=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",C=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",S=document.createElement("button");S.className=r,S.setAttribute("type","button"),S.title=m,S.appendChild(typeof l=="string"?document.createTextNode(l):l),S.addEventListener(mo.CLICK,this.handleClick_.bind(this,i),!1);const O=document.createElement("button");O.className=a,O.setAttribute("type","button"),O.title=C,O.appendChild(typeof o=="string"?document.createTextNode(o):o),O.addEventListener(mo.CLICK,this.handleClick_.bind(this,-i),!1);const U=t+" "+f2+" "+kO,K=this.element;K.className=U,K.appendChild(S),K.appendChild(O),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const a=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:a,duration:this.duration_,easing:Yv})):i.setZoom(a)}}}function qX(n){n=n||{};const e=new jp;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new YX(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new QX(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new WX(n.attributionOptions)),e}class HX{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const r=this.points_[t+2]-this.points_[i+2];if(r<1e3/60)return!1;const a=this.points_[t]-this.points_[i],l=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(l,a),this.initialVelocity_=Math.sqrt(a*a+l*l)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const m9={ACTIVE:"active"};class fb extends up{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(m9.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(m9.ACTIVE,e)}setMap(e){this.map_=e}}function VX(n,e,t){const i=n.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:kZ,center:n.getConstrainedCenter(r)})}}function RO(n,e,t,i){const r=n.getZoom();if(r===void 0)return;const a=n.getConstrainedZoom(r+e),l=n.getResolutionForZoom(a);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:l,anchor:t,duration:i!==void 0?i:250,easing:Yv})}class $X extends fb{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==lu.DBLCLICK){const i=e.originalEvent,r=e.map,a=e.coordinate,l=i.shiftKey?-this.delta_:this.delta_,o=r.getView();RO(o,l,a,this.duration_),i.preventDefault(),t=!0}return!t}}function Z6(n){const e=arguments;return function(t){let i=!0;for(let r=0,a=e.length;r<a&&(i=i&&e[r](t),!!i);++r);return i}}const ZX=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},XX=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),i=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(i):e.contains(i)},qF=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?XX(n):!0},JX=__,HF=function(n){const e=n.originalEvent;return"pointerId"in e&&e.button==0&&!(cZ&&cF&&e.ctrlKey)},VF=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},eJ=function(n){const e=n.originalEvent;return cF?e.metaKey:e.ctrlKey},tJ=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},$F=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},W4=function(n){const e=n.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},nJ=function(n){const e=n.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class mb extends fb{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==lu.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==lu.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==lu.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==lu.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function PO(n){const e=n.length;let t=0,i=0;for(let r=0;r<e;r++)t+=n[r].clientX,i+=n[r].clientY;return{clientX:t/e,clientY:i/e}}class iJ extends mb{constructor(e){super({stopDown:n2}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:Z6(VF,nJ);this.condition_=e.onFocusOnly?Z6(qF,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,r=t.getEventPixel(PO(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const a=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],o=e.map.getView();EZ(a,o.getResolution()),uO(a,o.getRotation()),o.adjustCenterInternal(a)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),a=this.kinetic_.getAngle(),l=i.getCenterInternal(),o=t.getPixelFromCoordinateInternal(l),m=t.getCoordinateFromPixelInternal([o[0]-r*Math.cos(a),o[1]-r*Math.sin(a)]);i.animateInternal({center:i.getConstrainedCenter(m),duration:500,easing:Yv})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class rJ extends mb{constructor(e){e=e||{},super({stopDown:n2}),this.condition_=e.condition?e.condition:ZX,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!W4(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===IO)return;const r=t.getSize(),a=e.pixel,l=Math.atan2(r[1]/2-a[1],a[0]-r[0]/2);if(this.lastAngle_!==void 0){const o=l-this.lastAngle_;i.adjustRotationInternal(-o)}this.lastAngle_=l}handleUpEvent(e){return W4(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return W4(e)&&HF(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class oJ extends ab{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+i,r.top=Math.min(e[1],t[1])+i,r.width=Math.abs(t[0]-e[0])+i,r.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new F0([r])}getGeometry(){return this.geometry_}}const Oy={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class gC extends Ap{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}class aJ extends mb{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new oJ(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??HF,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const r=i[0]-t[0],a=i[1]-t[1];return r*r+a*a>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new gC(Oy.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new gC(t?Oy.BOXEND:Oy.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new gC(Oy.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new gC(Oy.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new gC(Oy.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class sJ extends aJ{constructor(e){e=e||{};const t=e.condition?e.condition:tJ;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const a=i.rotatedExtentForGeometry(r),l=i.getResolutionForExtentInternal(a),o=i.getResolution()/l;r=r.clone(),r.scale(o*o)}i.fitInternal(r,{duration:this.duration_,easing:Yv})}}const mg={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class lJ extends fb{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return VF(t)&&$F(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==mo.KEYDOWN){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==mg.DOWN||r==mg.LEFT||r==mg.RIGHT||r==mg.UP)){const l=e.map.getView(),o=l.getResolution()*this.pixelDelta_;let m=0,C=0;r==mg.DOWN?C=-o:r==mg.LEFT?m=-o:r==mg.RIGHT?m=o:C=o;const S=[m,C];uO(S,l.getRotation()),VX(l,S,this.duration_),i.preventDefault(),t=!0}}return!t}}class AJ extends fb{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!eJ(t)&&$F(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==mo.KEYDOWN||e.type==mo.KEYPRESS){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==="+"||r==="-")){const a=e.map,l=r==="+"?this.delta_:-this.delta_,o=a.getView();RO(o,l,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}const uJ=40,cJ=300;class hJ extends fb{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:JX;this.condition_=e.onFocusOnly?Z6(qF,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==mo.WHEEL)return!0;const i=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let a=r.deltaY;switch(r.deltaMode){case WheelEvent.DOM_DELTA_LINE:a*=uJ;break;case WheelEvent.DOM_DELTA_PAGE:a*=cJ;break}if(a===0)return!1;this.lastDelta_=a;const l=Date.now();this.startTime_===void 0&&(this.startTime_=l),(!this.mode_||l-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(a)<4?"trackpad":"wheel");const o=i.getView();if(this.mode_==="trackpad"&&!(o.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-a/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=l,!1;this.totalDelta_+=a;const m=Math.max(this.timeout_-(l-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),m),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-GA(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),RO(t,i,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class dJ extends mb{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=n2),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],r=this.targetPointers[1],a=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const m=a-this.lastAngle_;this.rotationDelta_+=m,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=m}this.lastAngle_=a;const l=e.map,o=l.getView();o.getConstraints().rotation!==IO&&(this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(PO(this.targetPointers))),this.rotating_&&(l.render(),o.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class fJ extends mb{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=n2),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],r=this.targetPointers[1],a=i.clientX-r.clientX,l=i.clientY-r.clientY,o=Math.sqrt(a*a+l*l);this.lastDistance_!==void 0&&(t=this.lastDistance_/o),this.lastDistance_=o;const m=e.map,C=m.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=m.getCoordinateFromPixelInternal(m.getEventPixel(PO(this.targetPointers))),m.render(),C.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function mJ(n){n=n||{};const e=new jp,t=new HX(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new rJ),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new $X({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new iJ({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new dJ),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new fJ({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new lJ),e.push(new AJ({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new hJ({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new sJ({duration:n.zoomDuration})),e}const el={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class ZF extends up{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[el.OPACITY]=e.opacity!==void 0?e.opacity:1,Ms(typeof t[el.OPACITY]=="number","Layer opacity must be a number"),t[el.VISIBLE]=e.visible!==void 0?e.visible:!0,t[el.Z_INDEX]=e.zIndex,t[el.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[el.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[el.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[el.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return t.opacity=GA(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=i===void 0&&!t.managed?1/0:i,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Co()}getLayerStatesArray(e){return Co()}getExtent(){return this.get(el.EXTENT)}getMaxResolution(){return this.get(el.MAX_RESOLUTION)}getMinResolution(){return this.get(el.MIN_RESOLUTION)}getMinZoom(){return this.get(el.MIN_ZOOM)}getMaxZoom(){return this.get(el.MAX_ZOOM)}getOpacity(){return this.get(el.OPACITY)}getSourceState(){return Co()}getVisible(){return this.get(el.VISIBLE)}getZIndex(){return this.get(el.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(el.EXTENT,e)}setMaxResolution(e){this.set(el.MAX_RESOLUTION,e)}setMinResolution(e){this.set(el.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(el.MAX_ZOOM,e)}setMinZoom(e){this.set(el.MIN_ZOOM,e)}setOpacity(e){Ms(typeof e=="number","Layer opacity must be a number"),this.set(el.OPACITY,e)}setVisible(e){this.set(el.VISIBLE,e)}setZIndex(e){this.set(el.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class g1 extends Ap{constructor(e,t){super(e),this.layer=t}}const Q4={LAYERS:"layers"};class qv extends ZF{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Q4.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new jp(i.slice(),{unique:!0}):Ms(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new jp(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Bl),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Va(e,Gd.ADD,this.handleLayersAdd_,this),Va(e,Gd.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Bl);sb(this.listenerKeys_);const t=e.getArray();for(let i=0,r=t.length;i<r;i++){const a=t[i];this.registerLayerListeners_(a),this.dispatchEvent(new g1("addlayer",a))}this.changed()}registerLayerListeners_(e){const t=[Va(e,Iv.PROPERTYCHANGE,this.handleLayerChange_,this),Va(e,mo.CHANGE,this.handleLayerChange_,this)];e instanceof qv&&t.push(Va(e,"addlayer",this.handleLayerGroupAdd_,this),Va(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Io(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new g1("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new g1("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new g1("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=Io(t);this.listenerKeys_[i].forEach(Bl),delete this.listenerKeys_[i],this.dispatchEvent(new g1("removelayer",t)),this.changed()}getLayers(){return this.get(Q4.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let r=0,a=i.length;r<a;++r)this.dispatchEvent(new g1("removelayer",i[r]))}this.set(Q4.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],i=t.length;this.getLayers().forEach(function(l){l.getLayerStatesArray(t)});const r=this.getLayerState();let a=r.zIndex;!e&&r.zIndex===void 0&&(a=0);for(let l=i,o=t.length;l<o;l++){const m=t[l];m.opacity*=r.opacity,m.visible=m.visible&&r.visible,m.maxResolution=Math.min(m.maxResolution,r.maxResolution),m.minResolution=Math.max(m.minResolution,r.minResolution),m.minZoom=Math.max(m.minZoom,r.minZoom),m.maxZoom=Math.min(m.maxZoom,r.maxZoom),r.extent!==void 0&&(m.extent!==void 0?m.extent=ip(m.extent,r.extent):m.extent=r.extent),m.zIndex===void 0&&(m.zIndex=a)}return t}getSourceState(){return"ready"}}const gm={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class Hv extends ZF{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(el.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(el.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Bl(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Va(e,mo.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof Xm?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let r;if(t.layerStatesArray){if(r=t.layerStatesArray.find(l=>l.layer===this),!r)return!1}else r=this.getLayerState();const a=this.getExtent();return KO(r,t.viewState)&&(!a||uu(a,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];const t=this.getSource()?.getAttributions();if(!t)return[];const i=e instanceof Xm?e.getViewStateAndExtent():e;let r=t(i);return Array.isArray(r)||(r=[r]),r}render(e,t){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(el.MAP,e)}getMapInternal(){return this.get(el.MAP)}setMap(e){this.mapPrecomposeKey_&&(Bl(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Bl(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Va(e,gm.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Va(this,mo.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,i=this.getLayerState(!1);Ms(!t.some(r=>r.layer===i.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(i)}setSource(e){this.set(el.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function KO(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}function XF(n,e,t=0,i=n.length-1,r=pJ){for(;i>t;){if(i-t>600){const m=i-t+1,C=e-t+1,S=Math.log(m),O=.5*Math.exp(2*S/3),U=.5*Math.sqrt(S*O*(m-O)/m)*(C-m/2<0?-1:1),K=Math.max(t,Math.floor(e-C*O/m+U)),z=Math.min(i,Math.floor(e+(m-C)*O/m+U));XF(n,e,K,z,r)}const a=n[e];let l=t,o=i;for(yC(n,t,e),r(n[i],a)>0&&yC(n,t,i);l<o;){for(yC(n,l,o),l++,o--;r(n[l],a)<0;)l++;for(;r(n[o],a)>0;)o--}r(n[t],a)===0?yC(n,t,o):(o++,yC(n,o,i)),o<=e&&(t=o+1),e<=o&&(i=o-1)}}function yC(n,e,t){const i=n[e];n[e]=n[t],n[t]=i}function pJ(n,e){return n<e?-1:n>e?1:0}let JF=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!Hb(e,t))return i;const r=this.toBBox,a=[];for(;t;){for(let l=0;l<t.children.length;l++){const o=t.children[l],m=t.leaf?r(o):o;Hb(e,m)&&(t.leaf?i.push(o):q4(e,m)?this._all(o,i):a.push(o))}t=a.pop()}return i}collides(e){let t=this.data;if(!Hb(e,t))return!1;const i=[];for(;t;){for(let r=0;r<t.children.length;r++){const a=t.children[r],l=t.leaf?this.toBBox(a):a;if(Hb(e,l)){if(t.leaf||q4(e,l))return!0;i.push(a)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=av([]),this}remove(e,t){if(!e)return this;let i=this.data;const r=this.toBBox(e),a=[],l=[];let o,m,C;for(;i||a.length;){if(i||(i=a.pop(),m=a[a.length-1],o=l.pop(),C=!0),i.leaf){const S=gJ(e,i.children,t);if(S!==-1)return i.children.splice(S,1),a.push(i),this._condense(a),this}!C&&!i.leaf&&q4(i,r)?(a.push(i),l.push(o),o=0,m=i,i=i.children[0]):m?(o++,i=m.children[o],C=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,r){const a=i-t+1;let l=this._maxEntries,o;if(a<=l)return o=av(e.slice(t,i+1)),Iy(o,this.toBBox),o;r||(r=Math.ceil(Math.log(a)/Math.log(l)),l=Math.ceil(a/Math.pow(l,r-1))),o=av([]),o.leaf=!1,o.height=r;const m=Math.ceil(a/l),C=m*Math.ceil(Math.sqrt(l));p9(e,t,i,C,this.compareMinX);for(let S=t;S<=i;S+=C){const O=Math.min(S+C-1,i);p9(e,S,O,m,this.compareMinY);for(let U=S;U<=O;U+=m){const K=Math.min(U+m-1,O);o.children.push(this._build(e,U,K,r-1))}}return Iy(o,this.toBBox),o}_chooseSubtree(e,t,i,r){for(;r.push(t),!(t.leaf||r.length-1===i);){let a=1/0,l=1/0,o;for(let m=0;m<t.children.length;m++){const C=t.children[m],S=Y4(C),O=CJ(e,C)-S;O<l?(l=O,a=S<a?S:a,o=C):O===l&&S<a&&(a=S,o=C)}t=o||t.children[0]}return t}_insert(e,t,i){const r=i?e:this.toBBox(e),a=[],l=this._chooseSubtree(r,this.data,t,a);for(l.children.push(e),kC(l,r);t>=0&&a[t].children.length>this._maxEntries;)this._split(a,t),t--;this._adjustParentBBoxes(r,a,t)}_split(e,t){const i=e[t],r=i.children.length,a=this._minEntries;this._chooseSplitAxis(i,a,r);const l=this._chooseSplitIndex(i,a,r),o=av(i.children.splice(l,i.children.length-l));o.height=i.height,o.leaf=i.leaf,Iy(i,this.toBBox),Iy(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(i,o)}_splitRoot(e,t){this.data=av([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Iy(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let r,a=1/0,l=1/0;for(let o=t;o<=i-t;o++){const m=TC(e,0,o,this.toBBox),C=TC(e,o,i,this.toBBox),S=_J(m,C),O=Y4(m)+Y4(C);S<a?(a=S,r=o,l=O<l?O:l):S===a&&O<l&&(l=O,r=o)}return r||i-t}_chooseSplitAxis(e,t,i){const r=e.leaf?this.compareMinX:yJ,a=e.leaf?this.compareMinY:vJ,l=this._allDistMargin(e,t,i,r),o=this._allDistMargin(e,t,i,a);l<o&&e.children.sort(r)}_allDistMargin(e,t,i,r){e.children.sort(r);const a=this.toBBox,l=TC(e,0,t,a),o=TC(e,i-t,i,a);let m=qb(l)+qb(o);for(let C=t;C<i-t;C++){const S=e.children[C];kC(l,e.leaf?a(S):S),m+=qb(l)}for(let C=i-t-1;C>=t;C--){const S=e.children[C];kC(o,e.leaf?a(S):S),m+=qb(o)}return m}_adjustParentBBoxes(e,t,i){for(let r=i;r>=0;r--)kC(t[r],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():Iy(e[t],this.toBBox)}};function gJ(n,e,t){if(!t)return e.indexOf(n);for(let i=0;i<e.length;i++)if(t(n,e[i]))return i;return-1}function Iy(n,e){TC(n,0,n.children.length,e,n)}function TC(n,e,t,i,r){r||(r=av(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let a=e;a<t;a++){const l=n.children[a];kC(r,n.leaf?i(l):l)}return r}function kC(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function yJ(n,e){return n.minX-e.minX}function vJ(n,e){return n.minY-e.minY}function Y4(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function qb(n){return n.maxX-n.minX+(n.maxY-n.minY)}function CJ(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function _J(n,e){const t=Math.max(n.minX,e.minX),i=Math.max(n.minY,e.minY),r=Math.min(n.maxX,e.maxX),a=Math.min(n.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,a-i)}function q4(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function Hb(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function av(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function p9(n,e,t,i,r){const a=[e,t];for(;a.length;){if(t=a.pop(),e=a.pop(),t-e<=i)continue;const l=e+Math.ceil((t-e)/i/2)*i;XF(n,l,e,t,r),a.push(e,l,l,t)}}const UO=[NaN,NaN,NaN,0];let H4;function bJ(){return H4||(H4=jA(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),H4}const xJ=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,MJ=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,SJ=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,wJ=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function Vb(n,e){return n.endsWith("%")?Number(n.substring(0,n.length-1))/e:Number(n)}function e_(n){throw new Error('failed to parse "'+n+'" as color')}function ez(n){if(n.toLowerCase().startsWith("rgb")){const a=n.match(MJ)||n.match(xJ)||n.match(SJ);if(a){const l=a[4],o=100/255;return[GA(Vb(a[1],o)+.5|0,0,255),GA(Vb(a[2],o)+.5|0,0,255),GA(Vb(a[3],o)+.5|0,0,255),l!==void 0?GA(Vb(l,100),0,1):1]}e_(n)}if(n.startsWith("#")){if(wJ.test(n)){const a=n.substring(1),l=a.length<=4?1:2,o=[0,0,0,255];for(let m=0,C=a.length;m<C;m+=l){let S=parseInt(a.substring(m,m+l),16);l===1&&(S+=S<<4),o[m/l]=S}return o[3]=o[3]/255,o}e_(n)}const e=bJ();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=n,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=n,e.fillStyle===t&&e_(n));const i=e.fillStyle;if(i.startsWith("#")||i.startsWith("rgba"))return ez(i);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const r=Array.from(e.getImageData(0,0,1,1).data);return r[3]=i2(r[3]/255,3),r}function EJ(n){return typeof n=="string"?n:FO(n)}const BJ=1024,vC={};let V4=0;function OJ(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function $4(n){return n>.0031308?Math.pow(n,1/2.4)*269.025-14.025:n*3294.6}function Z4(n){return n>.2068965?Math.pow(n,3):(n-4/29)*(108/841)}function X4(n){return n>10.314724?Math.pow((n+14.025)/269.025,2.4):n/3294.6}function J4(n){return n>.0088564?Math.pow(n,1/3):n/(108/841)+4/29}function g9(n){const e=X4(n[0]),t=X4(n[1]),i=X4(n[2]),r=J4(e*.222488403+t*.716873169+i*.06060791),a=500*(J4(e*.452247074+t*.399439023+i*.148375274)-r),l=200*(r-J4(e*.016863605+t*.117638439+i*.865350722)),o=Math.atan2(l,a)*(180/Math.PI);return[116*r-16,Math.sqrt(a*a+l*l),o<0?o+360:o,n[3]]}function IJ(n){const e=(n[0]+16)/116,t=n[1],i=n[2]*Math.PI/180,r=Z4(e),a=Z4(e+t/500*Math.cos(i)),l=Z4(e-t/200*Math.sin(i)),o=$4(a*3.021973625-r*1.617392459-l*.404875592),m=$4(a*-.943766287+r*1.916279586+l*.027607165),C=$4(a*.069407491-r*.22898585+l*1.159737864);return[GA(o+.5|0,0,255),GA(m+.5|0,0,255),GA(C+.5|0,0,255),n[3]]}function LO(n){if(n==="none")return UO;if(vC.hasOwnProperty(n))return vC[n];if(V4>=BJ){let t=0;for(const i in vC)(t++&3)===0&&(delete vC[i],--V4)}const e=ez(n);e.length!==4&&e_(n);for(const t of e)isNaN(t)&&e_(n);return vC[n]=e,++V4,e}function Dv(n){return Array.isArray(n)?n:LO(n)}function FO(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);const r=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+i+","+r+")"}function y9(n){return n[0]>0&&n[1]>0}function TJ(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function zh(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}let Jg=0;const dd=1<<Jg++,Ha=1<<Jg++,jd=1<<Jg++,Jm=1<<Jg++,Yg=1<<Jg++,DC=1<<Jg++,$b=Math.pow(2,Jg)-1,zO={[dd]:"boolean",[Ha]:"number",[jd]:"string",[Jm]:"color",[Yg]:"number[]",[DC]:"size"},kJ=Object.keys(zO).map(Number).sort($p);function DJ(n){return n in zO}function RC(n){const e=[];for(const t of kJ)PC(n,t)&&e.push(zO[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function PC(n,e){return(n&e)===e}function A1(n,e){return n===e}class yc{constructor(e,t){if(!DJ(e))throw new Error(`literal expressions must have a specific type, got ${RC(e)}`);this.type=e,this.value=t}}class RJ{constructor(e,t,...i){this.type=e,this.operator=t,this.args=i}}function tz(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function fh(n,e,t){switch(typeof n){case"boolean":{if(A1(e,jd))return new yc(jd,n?"true":"false");if(!PC(e,dd))throw new Error(`got a boolean, but expected ${RC(e)}`);return new yc(dd,n)}case"number":{if(A1(e,DC))return new yc(DC,zh(n));if(A1(e,dd))return new yc(dd,!!n);if(A1(e,jd))return new yc(jd,n.toString());if(!PC(e,Ha))throw new Error(`got a number, but expected ${RC(e)}`);return new yc(Ha,n)}case"string":{if(A1(e,Jm))return new yc(Jm,LO(n));if(A1(e,dd))return new yc(dd,!!n);if(!PC(e,jd))throw new Error(`got a string, but expected ${RC(e)}`);return new yc(jd,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return QJ(n,e,t);for(const i of n)if(typeof i!="number")throw new Error("expected an array of numbers");if(A1(e,DC)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new yc(DC,n)}if(A1(e,Jm)){if(n.length===3)return new yc(Jm,[...n,1]);if(n.length===4)return new yc(Jm,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!PC(e,Yg))throw new Error(`got an array of numbers, but expected ${RC(e)}`);return new yc(Yg,n)}const Fn={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},PJ={[Fn.Get]:yo(ra(1,1/0),v9),[Fn.Var]:yo(ra(1,1),KJ),[Fn.Has]:yo(ra(1,1/0),v9),[Fn.Id]:yo(UJ,Ty),[Fn.Concat]:yo(ra(2,1/0),ks(jd)),[Fn.GeometryType]:yo(LJ,Ty),[Fn.LineMetric]:yo(Ty),[Fn.Resolution]:yo(eM,Ty),[Fn.Zoom]:yo(eM,Ty),[Fn.Time]:yo(eM,Ty),[Fn.Any]:yo(ra(2,1/0),ks(dd)),[Fn.All]:yo(ra(2,1/0),ks(dd)),[Fn.Not]:yo(ra(1,1),ks(dd)),[Fn.Equal]:yo(ra(2,2),ks($b)),[Fn.NotEqual]:yo(ra(2,2),ks($b)),[Fn.GreaterThan]:yo(ra(2,2),ks(Ha)),[Fn.GreaterThanOrEqualTo]:yo(ra(2,2),ks(Ha)),[Fn.LessThan]:yo(ra(2,2),ks(Ha)),[Fn.LessThanOrEqualTo]:yo(ra(2,2),ks(Ha)),[Fn.Multiply]:yo(ra(2,1/0),C9),[Fn.Coalesce]:yo(ra(2,1/0),C9),[Fn.Divide]:yo(ra(2,2),ks(Ha)),[Fn.Add]:yo(ra(2,1/0),ks(Ha)),[Fn.Subtract]:yo(ra(2,2),ks(Ha)),[Fn.Clamp]:yo(ra(3,3),ks(Ha)),[Fn.Mod]:yo(ra(2,2),ks(Ha)),[Fn.Pow]:yo(ra(2,2),ks(Ha)),[Fn.Abs]:yo(ra(1,1),ks(Ha)),[Fn.Floor]:yo(ra(1,1),ks(Ha)),[Fn.Ceil]:yo(ra(1,1),ks(Ha)),[Fn.Round]:yo(ra(1,1),ks(Ha)),[Fn.Sin]:yo(ra(1,1),ks(Ha)),[Fn.Cos]:yo(ra(1,1),ks(Ha)),[Fn.Atan]:yo(ra(1,2),ks(Ha)),[Fn.Sqrt]:yo(ra(1,1),ks(Ha)),[Fn.Match]:yo(ra(4,1/0),_9,zJ),[Fn.Between]:yo(ra(3,3),ks(Ha)),[Fn.Interpolate]:yo(ra(6,1/0),_9,NJ),[Fn.Case]:yo(ra(3,1/0),FJ,GJ),[Fn.In]:yo(ra(2,2),jJ),[Fn.Number]:yo(ra(1,1/0),ks($b)),[Fn.String]:yo(ra(1,1/0),ks($b)),[Fn.Array]:yo(ra(1,1/0),ks(Ha)),[Fn.Color]:yo(ra(1,4),ks(Ha)),[Fn.Band]:yo(ra(1,3),ks(Ha)),[Fn.Palette]:yo(ra(2,2),WJ),[Fn.ToString]:yo(ra(1,1),ks(dd|Ha|jd|Jm))};function v9(n,e,t){const i=n.length-1,r=new Array(i);for(let a=0;a<i;++a){const l=n[a+1];switch(typeof l){case"number":{r[a]=new yc(Ha,l);break}case"string":{r[a]=new yc(jd,l);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${l}`)}a===0&&t.properties.add(String(l))}return r}function KJ(n,e,t){const i=n[1];if(typeof i!="string")throw new Error("expected a string argument for var operation");return t.variables.add(i),[new yc(jd,i)]}function UJ(n,e,t){t.featureId=!0}function LJ(n,e,t){t.geometryType=!0}function eM(n,e,t){t.mapState=!0}function Ty(n,e,t){const i=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${i} operation`);return[]}function ra(n,e){return function(t,i,r){const a=t[0],l=t.length-1;if(n===e){if(l!==n){const o=n===1?"":"s";throw new Error(`expected ${n} argument${o} for ${a}, got ${l}`)}}else if(l<n||l>e){const o=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${o} arguments for ${a}, got ${l}`)}}}function C9(n,e,t){const i=n.length-1,r=new Array(i);for(let a=0;a<i;++a){const l=fh(n[a+1],e,t);r[a]=l}return r}function ks(n){return function(e,t,i){const r=e.length-1,a=new Array(r);for(let l=0;l<r;++l){const o=fh(e[l+1],n,i);a[l]=o}return a}}function FJ(n,e,t){const i=n[0],r=n.length-1;if(r%2===0)throw new Error(`expected an odd number of arguments for ${i}, got ${r} instead`)}function _9(n,e,t){const i=n[0],r=n.length-1;if(r%2===1)throw new Error(`expected an even number of arguments for operation ${i}, got ${r} instead`)}function zJ(n,e,t){const i=n.length-1,r=jd|Ha|dd,a=fh(n[1],r,t),l=fh(n[n.length-1],e,t),o=new Array(i-2);for(let m=0;m<i-2;m+=2){try{const C=fh(n[m+2],a.type,t);o[m]=C}catch(C){throw new Error(`failed to parse argument ${m+1} of match expression: ${C.message}`)}try{const C=fh(n[m+3],l.type,t);o[m+1]=C}catch(C){throw new Error(`failed to parse argument ${m+2} of match expression: ${C.message}`)}}return[a,...o,l]}function NJ(n,e,t){const i=n[1];let r;switch(i[0]){case"linear":r=1;break;case"exponential":const m=i[1];if(typeof m!="number"||m<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(m)} instead`);r=m;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}const a=new yc(Ha,r);let l;try{l=fh(n[2],Ha,t)}catch(m){throw new Error(`failed to parse argument 1 in interpolate expression: ${m.message}`)}const o=new Array(n.length-3);for(let m=0;m<o.length;m+=2){try{const C=fh(n[m+3],Ha,t);o[m]=C}catch(C){throw new Error(`failed to parse argument ${m+2} for interpolate expression: ${C.message}`)}try{const C=fh(n[m+4],e,t);o[m+1]=C}catch(C){throw new Error(`failed to parse argument ${m+3} for interpolate expression: ${C.message}`)}}return[a,l,...o]}function GJ(n,e,t){const i=fh(n[n.length-1],e,t),r=new Array(n.length-1);for(let a=0;a<r.length-1;a+=2){try{const l=fh(n[a+1],dd,t);r[a]=l}catch(l){throw new Error(`failed to parse argument ${a} of case expression: ${l.message}`)}try{const l=fh(n[a+2],i.type,t);r[a+1]=l}catch(l){throw new Error(`failed to parse argument ${a+1} of case expression: ${l.message}`)}}return r[r.length-1]=i,r}function jJ(n,e,t){let i=n[2];if(!Array.isArray(i))throw new Error('the second argument for the "in" operator must be an array');let r;if(typeof i[0]=="string"){if(i[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(i[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');i=i[1],r=jd}else r=Ha;const a=new Array(i.length);for(let o=0;o<a.length;o++)try{const m=fh(i[o],r,t);a[o]=m}catch(m){throw new Error(`failed to parse haystack item ${o} for "in" expression: ${m.message}`)}return[fh(n[1],r,t),...a]}function WJ(n,e,t){let i;try{i=fh(n[1],Ha,t)}catch(l){throw new Error(`failed to parse first argument in palette expression: ${l.message}`)}const r=n[2];if(!Array.isArray(r))throw new Error("the second argument of palette must be an array");const a=new Array(r.length);for(let l=0;l<a.length;l++){let o;try{o=fh(r[l],Jm,t)}catch(m){throw new Error(`failed to parse color at index ${l} in palette expression: ${m.message}`)}if(!(o instanceof yc))throw new Error(`the palette color at index ${l} must be a literal value`);a[l]=o}return[i,...a]}function yo(...n){return function(e,t,i){const r=e[0];let a;for(let l=0;l<n.length;l++){const o=n[l](e,t,i);if(l==n.length-1){if(!o)throw new Error("expected last argument validator to return the parsed args");a=o}}return new RJ(t,r,...a)}}function QJ(n,e,t){const i=n[0],r=PJ[i];if(!r)throw new Error(`unknown operator: ${i}`);return r(n,e,t)}function nz(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return nz(n.getGeometries()[0]);default:return""}}function iz(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function j0(n,e,t){const i=fh(n,e,t);return rp(i)}function rp(n,e){if(n instanceof yc){if(n.type===Jm&&typeof n.value=="string"){const i=LO(n.value);return function(){return i}}return function(){return n.value}}const t=n.operator;switch(t){case Fn.Number:case Fn.String:case Fn.Coalesce:return YJ(n);case Fn.Get:case Fn.Var:case Fn.Has:return qJ(n);case Fn.Id:return i=>i.featureId;case Fn.GeometryType:return i=>i.geometryType;case Fn.Concat:{const i=n.args.map(r=>rp(r));return r=>"".concat(...i.map(a=>a(r).toString()))}case Fn.Resolution:return i=>i.resolution;case Fn.Any:case Fn.All:case Fn.Between:case Fn.In:case Fn.Not:return VJ(n);case Fn.Equal:case Fn.NotEqual:case Fn.LessThan:case Fn.LessThanOrEqualTo:case Fn.GreaterThan:case Fn.GreaterThanOrEqualTo:return HJ(n);case Fn.Multiply:case Fn.Divide:case Fn.Add:case Fn.Subtract:case Fn.Clamp:case Fn.Mod:case Fn.Pow:case Fn.Abs:case Fn.Floor:case Fn.Ceil:case Fn.Round:case Fn.Sin:case Fn.Cos:case Fn.Atan:case Fn.Sqrt:return $J(n);case Fn.Case:return ZJ(n);case Fn.Match:return XJ(n);case Fn.Interpolate:return JJ(n);case Fn.ToString:return eee(n);default:throw new Error(`Unsupported operator ${t}`)}}function YJ(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let a=0;a<i;++a)r[a]=rp(n.args[a]);switch(t){case Fn.Coalesce:return a=>{for(let l=0;l<i;++l){const o=r[l](a);if(typeof o<"u"&&o!==null)return o}throw new Error("Expected one of the values to be non-null")};case Fn.Number:case Fn.String:return a=>{for(let l=0;l<i;++l){const o=r[l](a);if(typeof o===t)return o}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function qJ(n,e){const i=n.args[0].value;switch(n.operator){case Fn.Get:return r=>{const a=n.args;let l=r.properties[i];for(let o=1,m=a.length;o<m;++o){const S=a[o].value;l=l[S]}return l};case Fn.Var:return r=>r.variables[i];case Fn.Has:return r=>{const a=n.args;if(!(i in r.properties))return!1;let l=r.properties[i];for(let o=1,m=a.length;o<m;++o){const S=a[o].value;if(!l||!Object.hasOwn(l,S))return!1;l=l[S]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function HJ(n,e){const t=n.operator,i=rp(n.args[0]),r=rp(n.args[1]);switch(t){case Fn.Equal:return a=>i(a)===r(a);case Fn.NotEqual:return a=>i(a)!==r(a);case Fn.LessThan:return a=>i(a)<r(a);case Fn.LessThanOrEqualTo:return a=>i(a)<=r(a);case Fn.GreaterThan:return a=>i(a)>r(a);case Fn.GreaterThanOrEqualTo:return a=>i(a)>=r(a);default:throw new Error(`Unsupported comparison operator ${t}`)}}function VJ(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let a=0;a<i;++a)r[a]=rp(n.args[a]);switch(t){case Fn.Any:return a=>{for(let l=0;l<i;++l)if(r[l](a))return!0;return!1};case Fn.All:return a=>{for(let l=0;l<i;++l)if(!r[l](a))return!1;return!0};case Fn.Between:return a=>{const l=r[0](a),o=r[1](a),m=r[2](a);return l>=o&&l<=m};case Fn.In:return a=>{const l=r[0](a);for(let o=1;o<i;++o)if(l===r[o](a))return!0;return!1};case Fn.Not:return a=>!r[0](a);default:throw new Error(`Unsupported logical operator ${t}`)}}function $J(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let a=0;a<i;++a)r[a]=rp(n.args[a]);switch(t){case Fn.Multiply:return a=>{let l=1;for(let o=0;o<i;++o)l*=r[o](a);return l};case Fn.Divide:return a=>r[0](a)/r[1](a);case Fn.Add:return a=>{let l=0;for(let o=0;o<i;++o)l+=r[o](a);return l};case Fn.Subtract:return a=>r[0](a)-r[1](a);case Fn.Clamp:return a=>{const l=r[0](a),o=r[1](a);if(l<o)return o;const m=r[2](a);return l>m?m:l};case Fn.Mod:return a=>r[0](a)%r[1](a);case Fn.Pow:return a=>Math.pow(r[0](a),r[1](a));case Fn.Abs:return a=>Math.abs(r[0](a));case Fn.Floor:return a=>Math.floor(r[0](a));case Fn.Ceil:return a=>Math.ceil(r[0](a));case Fn.Round:return a=>Math.round(r[0](a));case Fn.Sin:return a=>Math.sin(r[0](a));case Fn.Cos:return a=>Math.cos(r[0](a));case Fn.Atan:return i===2?a=>Math.atan2(r[0](a),r[1](a)):a=>Math.atan(r[0](a));case Fn.Sqrt:return a=>Math.sqrt(r[0](a));default:throw new Error(`Unsupported numeric operator ${t}`)}}function ZJ(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=rp(n.args[r]);return r=>{for(let a=0;a<t-1;a+=2)if(i[a](r))return i[a+1](r);return i[t-1](r)}}function XJ(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=rp(n.args[r]);return r=>{const a=i[0](r);for(let l=1;l<t-1;l+=2)if(a===i[l](r))return i[l+1](r);return i[t-1](r)}}function JJ(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=rp(n.args[r]);return r=>{const a=i[0](r),l=i[1](r);let o,m;for(let C=2;C<t;C+=2){const S=i[C](r);let O=i[C+1](r);const U=Array.isArray(O);if(U&&(O=OJ(O)),S>=l)return C===2?O:U?tee(a,l,o,m,S,O):KC(a,l,o,m,S,O);o=S,m=O}return m}}function eee(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let a=0;a<i;++a)r[a]=rp(n.args[a]);switch(t){case Fn.ToString:return a=>{const l=r[0](a);return n.args[0].type===Jm?FO(l):l.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function KC(n,e,t,i,r,a){const l=r-t;if(l===0)return i;const o=e-t,m=n===1?o/l:(Math.pow(n,o)-1)/(Math.pow(n,l)-1);return i+m*(a-i)}function tee(n,e,t,i,r,a){if(r-t===0)return i;const o=g9(i),m=g9(a);let C=m[2]-o[2];C>180?C-=360:C<-180&&(C+=360);const S=[KC(n,e,t,o[0],r,m[0]),KC(n,e,t,o[1],r,m[1]),o[2]+KC(n,e,t,0,r,C),KC(n,e,t,i[3],r,a[3])];return IJ(S)}const hr={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class NO extends lb{constructor(e,t,i,r){super(),this.extent=e,this.pixelRatio_=i,this.resolution=t,this.state=typeof r=="function"?hr.IDLE:r,this.image_=null,this.loader=typeof r=="function"?r:null}changed(){this.dispatchEvent(mo.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==hr.IDLE&&this.loader){this.state=hr.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;Tv(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(i=>{"image"in i&&(this.image_=i.image),"extent"in i&&(this.extent=i.extent),"resolution"in i&&(this.resolution=i.resolution),"pixelRatio"in i&&(this.pixelRatio_=i.pixelRatio),(i instanceof HTMLImageElement||dZ&&i instanceof ImageBitmap||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement)&&(this.image_=i),this.state=hr.LOADED}).catch(i=>{this.state=hr.ERROR,console.error(i)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function nee(n,e,t){const i=n;let r=!0,a=!1,l=!1;const o=[Vx(i,mo.LOAD,function(){l=!0,a||e()})];return i.src&&hF?(a=!0,i.decode().then(function(){r&&e()}).catch(function(m){r&&(l?e():t())})):o.push(Vx(i,mo.ERROR,t)),function(){r=!1,o.forEach(Bl)}}function iee(n,e){return new Promise((t,i)=>{function r(){l(),t(n)}function a(){l(),i(new Error("Image load error"))}function l(){n.removeEventListener("load",r),n.removeEventListener("error",a)}n.addEventListener("load",r),n.addEventListener("error",a)})}function ree(n,e){return e&&(n.src=e),n.src&&hF?new Promise((t,i)=>n.decode().then(()=>t(n)).catch(r=>n.complete&&n.width?t(n):i(r))):iee(n)}class oee{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];(e++&3)===0&&!i.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,i){const r=tM(e,t,i);return r in this.cache_?this.cache_[r]:null}getPattern(e,t,i){const r=tM(e,t,i);return r in this.patternCache_?this.patternCache_[r]:null}set(e,t,i,r,a){const l=tM(e,t,i),o=l in this.cache_;this.cache_[l]=r,a&&(r.getImageState()===hr.IDLE&&r.load(),r.getImageState()===hr.LOADING?r.ready().then(()=>{this.patternCache_[l]=n3().createPattern(r.getImage(1),"repeat")}):this.patternCache_[l]=n3().createPattern(r.getImage(1),"repeat")),o||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function tM(n,e,t){const i=t?Dv(t):"null";return e+":"+n+":"+i}const ym=new oee;let CC=null;class rz extends lb{constructor(e,t,i,r,a){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=a,this.imageState_=r===void 0?hr.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===hr.LOADED){CC||(CC=jA(1,1,void 0,{willReadFrequently:!0})),CC.drawImage(this.image_,0,0);try{CC.getImageData(0,0,1,1),this.tainted_=!1}catch{CC=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(mo.CHANGE)}handleImageError_(){this.imageState_=hr.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=hr.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=jA(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===hr.IDLE){this.image_||this.initializeImage_(),this.imageState_=hr.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&ree(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==hr.LOADED)return;const t=this.image_,i=jA(Math.ceil(t.width*e),Math.ceil(t.height*e)),r=i.canvas;i.scale(e,e),i.drawImage(t,0,0),i.globalCompositeOperation="multiply",i.fillStyle=EJ(this.color_),i.fillRect(0,0,r.width/e,r.height/e),i.globalCompositeOperation="destination-in",i.drawImage(t,0,0),this.canvas_[e]=r}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===hr.LOADED||this.imageState_===hr.ERROR)e();else{const t=()=>{(this.imageState_===hr.LOADED||this.imageState_===hr.ERROR)&&(this.removeEventListener(mo.CHANGE,t),e())};this.addEventListener(mo.CHANGE,t)}})),this.ready_}}function GO(n,e,t,i,r,a){let l=e===void 0?void 0:ym.get(e,t,r);return l||(l=new rz(n,n&&"src"in n?n.src||void 0:e,t,i,r),ym.set(e,t,r,l,a)),a&&l&&!ym.getPattern(e,t,r)&&ym.set(e,t,r,l,a),l}function Yp(n){return n?Array.isArray(n)?FO(n):typeof n=="object"&&"src"in n?aee(n):n:null}function aee(n){if(!n.offset||!n.size)return ym.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=ym.getPattern(e,void 0,n.color);if(t)return t;const i=ym.get(n.src,"anonymous",null);if(i.getImageState()!==hr.LOADED)return null;const r=jA(n.size[0],n.size[1]);return r.drawImage(i.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),GO(r.canvas,e,void 0,hr.LOADED,n.color,!0),ym.getPattern(e,void 0,n.color)}const oz="10px sans-serif",Wd="#000",Rv="round",R0=[],P0=0,Pv="round",E_=10,B_="#000",O_="center",i3="middle",Og=[0,0,0,0],I_=1,xg=new up;let _C=null,b9;const X6={},see=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function lee(n,e,t){return`${n} ${e} 16px "${t}"`}const Aee=function(){let e,t;async function i(a){await t.ready;const l=await t.load(a);if(l.length===0)return!1;const o=$6(a),m=o.families[0].toLowerCase(),C=o.weight;return l.some(S=>{const O=S.family.replace(/^['"]|['"]$/g,"").toLowerCase(),U=V6[S.weight]||S.weight;return O===m&&S.style===o.style&&U==C})}async function r(){await t.ready;let a=!0;const l=xg.getProperties(),o=Object.keys(l).filter(m=>l[m]<100);for(let m=o.length-1;m>=0;--m){const C=o[m];let S=l[C];S<100&&(await i(C)?(sb(X6),xg.set(C,100)):(S+=10,xg.set(C,S,!0),S<100&&(a=!1)))}e=void 0,a||(e=setTimeout(r,100))}return async function(a){t||(t=sO?self.fonts:document.fonts);const l=$6(a);if(!l)return;const o=l.families;let m=!1;for(const C of o){if(see.has(C))continue;const S=lee(l.style,l.weight,C);xg.get(S)===void 0&&(xg.set(S,0,!0),m=!0)}m&&(clearTimeout(e),e=setTimeout(r,100))}}(),uee=function(){let n;return function(e){let t=X6[e];if(t==null){if(sO){const i=$6(e),r=az(e,"Žg");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);X6[e]=t}return t}}();function az(n,e){return _C||(_C=jA(1,1)),n!=b9&&(_C.font=n,b9=_C.font),_C.measureText(e)}function sz(n,e){return az(n,e).width}function x9(n,e,t){if(e in t)return t[e];const i=e.split(`
`).reduce((r,a)=>Math.max(r,sz(n,a)),0);return t[e]=i,i}function cee(n,e){const t=[],i=[],r=[];let a=0,l=0,o=0,m=0;for(let C=0,S=e.length;C<=S;C+=2){const O=e[C];if(O===`
`||C===S){a=Math.max(a,l),r.push(l),l=0,o+=m,m=0;continue}const U=e[C+1]||n.font,K=sz(U,O);t.push(K),l+=K;const z=uee(U);i.push(z),m=Math.max(m,z)}return{width:a,height:o,widths:t,heights:i,lineWidths:r}}function hee(n,e,t,i,r,a,l,o,m,C,S){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=O=>O.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),i.contextInstructions?(n.translate(m,C),n.scale(S[0],S[1]),dee(i,n)):S[0]<0||S[1]<0?(n.translate(m,C),n.scale(S[0],S[1]),n.drawImage(i,r,a,l,o,0,0,l,o)):n.drawImage(i,r,a,l,o,m,C,l*S[0],o*S[1]),n.restore()}function dee(n,e){const t=n.contextInstructions;for(let i=0,r=t.length;i<r;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}class m2{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=zh(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new m2({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Co()}getImage(e){return Co()}getHitDetectionImage(){return Co()}getPixelRatio(e){return 1}getImageState(){return Co()}getImageSize(){return Co()}getOrigin(){return Co()}getSize(){return Co()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=zh(e)}listenImageChange(e){Co()}load(){Co()}unlistenImageChange(e){Co()}ready(){return Promise.resolve()}}class p2 extends m2{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?hr.LOADING:hr.LOADED,this.imageState_===hr.LOADING&&this.ready().then(()=>this.imageState_=hr.LOADED),this.render()}clone(){const e=this.getScale(),t=new p2({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const t=this.fill_?.getKey(),i=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let r=ym.get(i,null,null)?.getImage(1);if(!r){const a=this.renderOptions_,l=Math.ceil(a.size*e),o=jA(l,l);this.draw_(a,o,e),r=o.canvas,ym.set(i,null,null,new rz(r,void 0,null,hr.LOADED,null))}return r}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let r=this.radius,a=this.radius2_===void 0?r:this.radius2_;if(r<a){const oe=r;r=a,a=oe}const l=this.radius2_===void 0?this.points_:this.points_*2,o=2*Math.PI/l,m=a*Math.sin(o),C=Math.sqrt(a*a-m*m),S=r-C,O=Math.sqrt(m*m+S*S),U=O/m;if(e==="miter"&&U<=i)return U*t;const K=t/2/U,z=t/2*(S/O),Q=Math.sqrt((r+K)*(r+K)+z*z)-r;if(this.radius2_===void 0||e==="bevel")return Q*2;const ee=r*Math.sin(o),V=Math.sqrt(r*r-ee*ee),ae=a-V,Z=Math.sqrt(ee*ee+ae*ae)/ee;if(Z<=i){const oe=Z*t/2-a-r;return 2*Math.max(Q,oe)}return Q*2}createRenderOptions(){let e=Rv,t=Pv,i=0,r=null,a=0,l,o=0;this.stroke_&&(l=Yp(this.stroke_.getColor()??B_),o=this.stroke_.getWidth()??I_,r=this.stroke_.getLineDash(),a=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Pv,e=this.stroke_.getLineCap()??Rv,i=this.stroke_.getMiterLimit()??E_);const m=this.calculateLineJoinSize_(t,o,i),C=Math.max(this.radius,this.radius2_||0),S=Math.ceil(2*C+m);return{strokeStyle:l,strokeWidth:o,size:S,lineCap:e,lineDash:r,lineDashOffset:a,lineJoin:t,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();r===null&&(r=Wd),t.fillStyle=Yp(r),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let i=this.fill_.getColor(),r=0;typeof i=="string"&&(i=Dv(i)),i===null?r=1:Array.isArray(i)&&(r=i.length===4?i[3]:1),r===0&&(t=jA(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const i=this.radius;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(t*=2);const a=this.angle_-Math.PI/2,l=2*Math.PI/t;for(let o=0;o<t;o++){const m=a+o*l,C=o%2===0?i:r;e.lineTo(C*Math.cos(m),C*Math.sin(m))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Wd,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class pb extends p2{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new pb({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class k0{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new k0({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=GO(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===hr.IDLE&&t.load(),t.getImageState()===hr.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Io(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Dv(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function M9(n,e,t,i){return t!==void 0&&i!==void 0?[t/n,i/e]:t!==void 0?t/n:i!==void 0?i/e:1}let r3=class lz extends m2{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,a=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:i,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:a,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const l=e.img!==void 0?e.img:null;let o=e.src;Ms(!(o!==void 0&&l),"`image` and `src` cannot be provided at the same time"),(o===void 0||o.length===0)&&l&&(o=l.src||Io(l)),Ms(o!==void 0&&o.length>0,"A defined and non-empty `src` or `image` must be provided"),Ms(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let m;if(e.src!==void 0?m=hr.IDLE:l!==void 0&&("complete"in l?l.complete?m=l.src?hr.LOADED:hr.IDLE:m=hr.LOADING:m=hr.LOADED),this.color_=e.color!==void 0?Dv(e.color):null,this.iconImage_=GO(l,o,this.crossOrigin_,m,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let C,S;if(e.size)[C,S]=e.size;else{const O=this.getImage(1);if(O.width&&O.height)C=O.width,S=O.height;else if(O instanceof HTMLImageElement){this.initialOptions_=e;const U=()=>{if(this.unlistenImageChange(U),!this.initialOptions_)return;const K=this.iconImage_.getSize();this.setScale(M9(K[0],K[1],e.width,e.height))};this.listenImageChange(U);return}}C!==void 0&&this.setScale(M9(C,S,e.width,e.height))}}clone(){let e,t,i;return this.initialOptions_?(t=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new lz({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==hr.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==hr.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(mo.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(mo.CHANGE,e)}ready(){return this.iconImage_.ready()}};class S1{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new S1({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class Cf{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=S9,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Cf({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=S9,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function fee(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(Ms(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let nM=null;function Az(n,e){if(!nM){const t=new k0({color:"rgba(255,255,255,0.4)"}),i=new S1({color:"#3399CC",width:1.25});nM=[new Cf({image:new pb({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return nM}function S9(n){return n.getGeometry()}const mee="#333";class g2{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=zh(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new k0({color:mee}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new g2({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=zh(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}function pee(n){return!0}function gee(n){const e=tz(),t=yee(n,e),i=iz();return function(r,a){if(i.properties=r.getPropertiesInternal(),i.resolution=a,e.featureId){const l=r.getId();l!==void 0?i.featureId=l:i.featureId=null}return e.geometryType&&(i.geometryType=nz(r.getGeometry())),t(i)}}function w9(n){const e=tz(),t=n.length,i=new Array(t);for(let l=0;l<t;++l)i[l]=J6(n[l],e);const r=iz(),a=new Array(t);return function(l,o){if(r.properties=l.getPropertiesInternal(),r.resolution=o,e.featureId){const C=l.getId();C!==void 0?r.featureId=C:r.featureId=null}let m=0;for(let C=0;C<t;++C){const S=i[C](r);S&&(a[m]=S,m+=1)}return a.length=m,a}}function yee(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r){const a=n[r],l="filter"in a?j0(a.filter,dd,e):pee;let o;if(Array.isArray(a.style)){const m=a.style.length;o=new Array(m);for(let C=0;C<m;++C)o[C]=J6(a.style[C],e)}else o=[J6(a.style,e)];i[r]={filter:l,styles:o}}return function(r){const a=[];let l=!1;for(let o=0;o<t;++o){const m=i[o].filter;if(m(r)&&!(n[o].else&&l)){l=!0;for(const C of i[o].styles){const S=C(r);S&&a.push(S)}}}return a}}function J6(n,e){const t=T_(n,"",e),i=k_(n,"",e),r=vee(n,e),a=Cee(n,e),l=Qd(n,"z-index",e);if(!t&&!i&&!r&&!a&&!U1(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const o=new Cf;return function(m){let C=!0;if(t){const S=t(m);S&&(C=!1),o.setFill(S)}if(i){const S=i(m);S&&(C=!1),o.setStroke(S)}if(r){const S=r(m);S&&(C=!1),o.setText(S)}if(a){const S=a(m);S&&(C=!1),o.setImage(S)}return l&&o.setZIndex(l(m)),C?null:o}}function T_(n,e,t){let i;if(e+"fill-pattern-src"in n)i=Mee(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return a=>null;i=jO(n,e+"fill-color",t)}if(!i)return null;const r=new k0;return function(a){const l=i(a);return l===UO?null:(r.setColor(l),r)}}function k_(n,e,t){const i=Qd(n,e+"stroke-width",t),r=jO(n,e+"stroke-color",t);if(!i&&!r)return null;const a=T0(n,e+"stroke-line-cap",t),l=T0(n,e+"stroke-line-join",t),o=uz(n,e+"stroke-line-dash",t),m=Qd(n,e+"stroke-line-dash-offset",t),C=Qd(n,e+"stroke-miter-limit",t),S=new S1;return function(O){if(r){const U=r(O);if(U===UO)return null;S.setColor(U)}if(i&&S.setWidth(i(O)),a){const U=a(O);if(U!=="butt"&&U!=="round"&&U!=="square")throw new Error("Expected butt, round, or square line cap");S.setLineCap(U)}if(l){const U=l(O);if(U!=="bevel"&&U!=="round"&&U!=="miter")throw new Error("Expected bevel, round, or miter line join");S.setLineJoin(U)}return o&&S.setLineDash(o(O)),m&&S.setLineDashOffset(m(O)),C&&S.setMiterLimit(C(O)),S}}function vee(n,e){const t="text-",i=T0(n,t+"value",e);if(!i)return null;const r=T_(n,t,e),a=T_(n,t+"background-",e),l=k_(n,t,e),o=k_(n,t+"background-",e),m=T0(n,t+"font",e),C=Qd(n,t+"max-angle",e),S=Qd(n,t+"offset-x",e),O=Qd(n,t+"offset-y",e),U=yv(n,t+"overflow",e),K=T0(n,t+"placement",e),z=Qd(n,t+"repeat",e),j=y2(n,t+"scale",e),Q=yv(n,t+"rotate-with-view",e),ee=Qd(n,t+"rotation",e),V=T0(n,t+"align",e),ae=T0(n,t+"justify",e),ne=T0(n,t+"baseline",e),Z=yv(n,t+"keep-upright",e),oe=uz(n,t+"padding",e),W=v2(n,t+"declutter-mode"),ue=new g2({declutterMode:W});return function(ge){if(ue.setText(i(ge)),r&&ue.setFill(r(ge)),a&&ue.setBackgroundFill(a(ge)),l&&ue.setStroke(l(ge)),o&&ue.setBackgroundStroke(o(ge)),m&&ue.setFont(m(ge)),C&&ue.setMaxAngle(C(ge)),S&&ue.setOffsetX(S(ge)),O&&ue.setOffsetY(O(ge)),U&&ue.setOverflow(U(ge)),K){const ye=K(ge);if(ye!=="point"&&ye!=="line")throw new Error("Expected point or line for text-placement");ue.setPlacement(ye)}if(z&&ue.setRepeat(z(ge)),j&&ue.setScale(j(ge)),Q&&ue.setRotateWithView(Q(ge)),ee&&ue.setRotation(ee(ge)),V){const ye=V(ge);if(ye!=="left"&&ye!=="center"&&ye!=="right"&&ye!=="end"&&ye!=="start")throw new Error("Expected left, right, center, start, or end for text-align");ue.setTextAlign(ye)}if(ae){const ye=ae(ge);if(ye!=="left"&&ye!=="right"&&ye!=="center")throw new Error("Expected left, right, or center for text-justify");ue.setJustify(ye)}if(ne){const ye=ne(ge);if(ye!=="bottom"&&ye!=="top"&&ye!=="middle"&&ye!=="alphabetic"&&ye!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");ue.setTextBaseline(ye)}return oe&&ue.setPadding(oe(ge)),Z&&ue.setKeepUpright(Z(ge)),ue}}function Cee(n,e){return"icon-src"in n?_ee(n,e):"shape-points"in n?bee(n,e):"circle-radius"in n?xee(n,e):null}function _ee(n,e){const t="icon-",i=t+"src",r=cz(n[i],i),a=o3(n,t+"anchor",e),l=y2(n,t+"scale",e),o=Qd(n,t+"opacity",e),m=o3(n,t+"displacement",e),C=Qd(n,t+"rotation",e),S=yv(n,t+"rotate-with-view",e),O=B9(n,t+"anchor-origin"),U=O9(n,t+"anchor-x-units"),K=O9(n,t+"anchor-y-units"),z=Bee(n,t+"color"),j=wee(n,t+"cross-origin"),Q=Eee(n,t+"offset"),ee=B9(n,t+"offset-origin"),V=a3(n,t+"width"),ae=a3(n,t+"height"),ne=See(n,t+"size"),Z=v2(n,t+"declutter-mode"),oe=new r3({src:r,anchorOrigin:O,anchorXUnits:U,anchorYUnits:K,color:z,crossOrigin:j,offset:Q,offsetOrigin:ee,height:ae,width:V,size:ne,declutterMode:Z});return function(W){return o&&oe.setOpacity(o(W)),m&&oe.setDisplacement(m(W)),C&&oe.setRotation(C(W)),S&&oe.setRotateWithView(S(W)),l&&oe.setScale(l(W)),a&&oe.setAnchor(a(W)),oe}}function bee(n,e){const t="shape-",i=t+"points",r=t+"radius",a=eB(n[i],i),l=eB(n[r],r),o=T_(n,t,e),m=k_(n,t,e),C=y2(n,t+"scale",e),S=o3(n,t+"displacement",e),O=Qd(n,t+"rotation",e),U=yv(n,t+"rotate-with-view",e),K=a3(n,t+"radius2"),z=a3(n,t+"angle"),j=v2(n,t+"declutter-mode"),Q=new p2({points:a,radius:l,radius2:K,angle:z,declutterMode:j});return function(ee){return o&&Q.setFill(o(ee)),m&&Q.setStroke(m(ee)),S&&Q.setDisplacement(S(ee)),O&&Q.setRotation(O(ee)),U&&Q.setRotateWithView(U(ee)),C&&Q.setScale(C(ee)),Q}}function xee(n,e){const t="circle-",i=T_(n,t,e),r=k_(n,t,e),a=Qd(n,t+"radius",e),l=y2(n,t+"scale",e),o=o3(n,t+"displacement",e),m=Qd(n,t+"rotation",e),C=yv(n,t+"rotate-with-view",e),S=v2(n,t+"declutter-mode"),O=new pb({radius:5,declutterMode:S});return function(U){return a&&O.setRadius(a(U)),i&&O.setFill(i(U)),r&&O.setStroke(r(U)),o&&O.setDisplacement(o(U)),m&&O.setRotation(m(U)),C&&O.setRotateWithView(C(U)),l&&O.setScale(l(U)),O}}function Qd(n,e,t){if(!(e in n))return;const i=j0(n[e],Ha,t);return function(r){return eB(i(r),e)}}function T0(n,e,t){if(!(e in n))return null;const i=j0(n[e],jd,t);return function(r){return cz(i(r),e)}}function Mee(n,e,t){const i=T0(n,e+"pattern-src",t),r=E9(n,e+"pattern-offset",t),a=E9(n,e+"pattern-size",t),l=jO(n,e+"color",t);return function(o){return{src:i(o),offset:r&&r(o),size:a&&a(o),color:l&&l(o)}}}function yv(n,e,t){if(!(e in n))return null;const i=j0(n[e],dd,t);return function(r){const a=i(r);if(typeof a!="boolean")throw new Error(`Expected a boolean for ${e}`);return a}}function jO(n,e,t){if(!(e in n))return null;const i=j0(n[e],Jm,t);return function(r){return hz(i(r),e)}}function uz(n,e,t){if(!(e in n))return null;const i=j0(n[e],Yg,t);return function(r){return gb(i(r),e)}}function o3(n,e,t){if(!(e in n))return null;const i=j0(n[e],Yg,t);return function(r){const a=gb(i(r),e);if(a.length!==2)throw new Error(`Expected two numbers for ${e}`);return a}}function E9(n,e,t){if(!(e in n))return null;const i=j0(n[e],Yg,t);return function(r){return dz(i(r),e)}}function y2(n,e,t){if(!(e in n))return null;const i=j0(n[e],Yg|Ha,t);return function(r){return Oee(i(r),e)}}function a3(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function See(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return zh(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function wee(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function B9(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function O9(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function Eee(n,e){const t=n[e];if(t!==void 0)return gb(t,e)}function v2(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function Bee(n,e){const t=n[e];if(t!==void 0)return hz(t,e)}function gb(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let i=0;i<t;++i)if(typeof n[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function cz(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function eB(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function hz(n,e){if(typeof n=="string")return n;const t=gb(n,e),i=t.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function dz(n,e){const t=gb(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function Oee(n,e){return typeof n=="number"?n:dz(n,e)}const I9={RENDER_ORDER:"renderOrder"};class WO extends Hv{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(I9.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const i=this.getDeclutter();i in e.declutter||(e.declutter[i]=new JF(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(I9.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?Az:e;const t=Iee(e);this.styleFunction_=e===null?void 0:fee(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function Iee(n){if(n===void 0)return Az;if(!n)return null;if(typeof n=="function"||n instanceof Cf)return n;if(!Array.isArray(n))return w9([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof Cf){const r=new Array(e);for(let a=0;a<e;++a){const l=n[a];if(!(l instanceof Cf))throw new Error("Expected a list of style instances");r[a]=l}return r}if("style"in t){const r=new Array(e);for(let a=0;a<e;++a){const l=n[a];if(!("style"in l))throw new Error("Expected a list of rules with a style property");r[a]=l}return gee(r)}return w9(n)}class fz extends Ap{constructor(e,t,i,r){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=r}}class Tee extends ab{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Co()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;Jp(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),kF(r,i)}forEachFeatureAtCoordinate(e,t,i,r,a,l,o,m){let C;const S=t.viewState;function O(ne,Z,oe,W){return a.call(l,Z,ne?oe:null,W)}const U=S.projection,K=cO(e.slice(),U),z=[[0,0]];if(U.canWrapX()&&r){const ne=U.getExtent(),Z=as(ne);z.push([-Z,0],[Z,0])}const j=t.layerStatesArray,Q=j.length,ee=[],V=[];for(let ne=0;ne<z.length;ne++)for(let Z=Q-1;Z>=0;--Z){const oe=j[Z],W=oe.layer;if(W.hasRenderer()&&KO(oe,S)&&o.call(m,W)){const ue=W.getRenderer(),ge=W.getSource();if(ue&&ge){const ye=ge.getWrapX()?K:e,Me=O.bind(null,oe.managed);V[0]=ye[0]+z[ne][0],V[1]=ye[1]+z[ne][1],C=ue.forEachFeatureAtCoordinate(V,t,i,Me,ee)}if(C)return C}}if(ee.length===0)return;const ae=1/ee.length;return ee.forEach((ne,Z)=>ne.distanceSq+=Z*ae),ee.sort((ne,Z)=>ne.distanceSq-Z.distanceSq),ee.some(ne=>C=ne.callback(ne.feature,ne.layer,ne.geometry)),C}hasFeatureAtCoordinate(e,t,i,r,a,l){return this.forEachFeatureAtCoordinate(e,t,i,r,__,this,a,l)!==void 0}getMap(){return this.map_}renderFrame(e){Co()}scheduleExpireIconCache(e){ym.canExpireCache()&&e.postRenderFunctions.push(kee)}}function kee(n,e){ym.expire()}class Dee extends Tee{constructor(e){super(e),this.fontChangeListenerKey_=Va(xg,Iv.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=f2+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const r=new fz(e,void 0,t);i.dispatchEvent(r)}}disposeInternal(){Bl(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(gm.PRECOMPOSE,e);const t=e.layerStatesArray.sort((o,m)=>o.zIndex-m.zIndex);t.some(o=>o.layer instanceof WO&&o.layer.getDeclutter())&&(e.declutter={});const r=e.viewState;this.children_.length=0;const a=[];let l=null;for(let o=0,m=t.length;o<m;++o){const C=t[o];e.layerIndex=o;const S=C.layer,O=S.getSourceState();if(!KO(C,r)||O!="ready"&&O!="undefined"){S.unrender();continue}const U=S.render(e,l);U&&(U!==l&&(this.children_.push(U),l=U),a.push(C))}this.declutter(e,a),jX(this.element_,this.children_),this.dispatchRenderEvent(gm.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let i=t.length-1;i>=0;--i){const r=t[i],a=r.layer;a.getDeclutter()&&a.renderDeclutter(e,r)}t.forEach(i=>i.layer.renderDeferred(e))}}}function mz(n){if(n instanceof Hv){n.setMapInternal(null);return}n instanceof qv&&n.getLayers().forEach(mz)}function pz(n,e){if(n instanceof Hv){n.setMapInternal(e);return}if(n instanceof qv){const t=n.getLayers().getArray();for(let i=0,r=t.length;i<r;++i)pz(t[i],e)}}let C2=class extends up{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=Ree(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:hZ,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Yd(),this.pixelToCoordinateTransform_=Yd(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||qX(),this.interactions=t.interactions||mJ({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new fF(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Kh.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Kh.VIEW,this.handleViewChanged_),this.addChangeListener(Kh.SIZE,this.handleSizeChanged_),this.addChangeListener(Kh.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof Xm)&&e.view.then(function(r){i.setView(new Xm(r))}),this.controls.addEventListener(Gd.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(Gd.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(Gd.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(Gd.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(Gd.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(Gd.REMOVE,r=>{const a=r.element.getId();a!==void 0&&delete this.overlayIdIndex_[a.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){pz(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const a=i.hitTolerance!==void 0?i.hitTolerance:0,l=i.layerFilter!==void 0?i.layerFilter:__,o=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,a,o,t,null,l,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},t),i}getAllLayers(){const e=[];function t(i){i.forEach(function(r){r instanceof qv?t(r.getLayers()):e.push(r)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const r=t.layerFilter!==void 0?t.layerFilter:__,a=t.hitTolerance!==void 0?t.hitTolerance:0,l=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,a,l,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),a=i.width/r[0],l=i.height/r[1],o="changedTouches"in e?e.changedTouches[0]:e;return[(o.clientX-i.left)/a,(o.clientY-i.top)/l]}getTarget(){return this.get(Kh.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return Y6(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?ec(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Kh.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof jp){t.setLayers(e);return}const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t];if(!r.visible)continue;const a=r.layer.getRenderer();if(a&&!a.ready)return!0;const l=r.layer.getSource();if(l&&l.loading)return!0}return!1}getPixelFromCoordinate(e){const t=O0(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?ec(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Kh.SIZE)}getView(){return this.get(Kh.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,r){return pZ(this.frameState_,e,t,i,r)}handleBrowserEvent(e,t){t=t||e.type;const i=new m1(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===K6.POINTERDOWN||i===mo.WHEEL||i===mo.KEYDOWN){const r=this.getOwnerDocument(),a=this.viewport_.getRootNode?this.viewport_.getRootNode():r,l=t.target,o=a instanceof ShadowRoot?a.host===l?a.host.ownerDocument:a:a===r?r.documentElement:a;if(this.overlayContainerStopEvent_.contains(l)||!o.contains(l))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const r=this.getInteractions().getArray().slice();for(let a=r.length-1;a>=0;a--){const l=r[a];if(l.getMap()!==this||!l.getActive()||!this.getTargetElement())continue;if(!l.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,a=r;if(e){const l=e.viewHints;if(l[vA.ANIMATING]||l[vA.INTERACTING]){const o=Date.now()-e.time>8;r=o?0:8,a=o?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,a))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(gm.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(gm.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new ov(I0.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new ov(I0.LOADSTART,this,e))));const i=this.postRenderFunctions_;if(e)for(let r=0,a=i.length;r<a;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)Bl(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(mo.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(mo.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Dee(this)),this.mapBrowserEventHandler_=new fZ(this,this.moveTolerance_);for(const a in lu)this.mapBrowserEventHandler_.addEventListener(lu[a],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(mo.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(mo.WHEEL,this.boundHandleBrowserEvent_,dF?{passive:!1}:!1);let i;if(this.keyboardEventTarget_)i=this.keyboardEventTarget_;else{const a=t.getRootNode();i=a instanceof ShadowRoot?a.host:t}this.targetChangeHandlerKeys_=[Va(i,mo.KEYDOWN,this.handleBrowserEvent,this),Va(i,mo.KEYPRESS,this.handleBrowserEvent,this)];const r=t.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Bl(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Bl(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Va(e,Iv.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Va(e,mo.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Bl),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new g1("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Va(e,Iv.PROPERTYCHANGE,this.render,this),Va(e,mo.CHANGE,this.render,this),Va(e,"addlayer",this.handleLayerAdd_,this),Va(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,i=e.length;t<i;++t){const r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){mz(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),r=this.frameState_;let a=null;if(t!==void 0&&y9(t)&&i&&i.isDef()){const l=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=i.getState();if(a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Zx(o.center,o.resolution,o.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:o,viewHints:l,wantedTiles:{},mapId:Io(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const m=isNaN(o.nextRotation)?o.rotation:o.nextRotation;a.nextExtent=Zx(o.nextCenter,o.nextResolution,m,t)}}this.frameState_=a,this.renderer_.renderFrame(a),a&&(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),r&&(!this.previousExtent_||!$g(this.previousExtent_)&&!L0(a.extent,this.previousExtent_))&&(this.dispatchEvent(new ov(I0.MOVESTART,this,r)),this.previousExtent_=Qv(this.previousExtent_)),this.previousExtent_&&!a.viewHints[vA.ANIMATING]&&!a.viewHints[vA.INTERACTING]&&!L0(a.extent,this.previousExtent_)&&(this.dispatchEvent(new ov(I0.MOVEEND,this,a)),mF(a.extent,this.previousExtent_))),this.dispatchEvent(new ov(I0.POSTRENDER,this,a)),this.renderComplete_=(this.hasListener(I0.LOADSTART)||this.hasListener(I0.LOADEND)||this.hasListener(gm.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new g1("removelayer",t)),this.set(Kh.LAYERGROUP,e)}setSize(e){this.set(Kh.SIZE,e)}setTarget(e){this.set(Kh.TARGET,e)}setView(e){if(!e||e instanceof Xm){this.set(Kh.VIEW,e);return}this.set(Kh.VIEW,new Xm);const t=this;e.then(function(i){t.setView(new Xm(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){const r=getComputedStyle(e),a=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),l=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(a)&&!isNaN(l)&&(t=[Math.max(0,a),Math.max(0,l)],!y9(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&MF("No map visible because the map container's width or height are 0."))}const i=this.getSize();t&&(!i||!F1(t,i))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function Ree(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new qv({layers:n.layers});t[Kh.LAYERGROUP]=i,t[Kh.TARGET]=n.target,t[Kh.VIEW]=n.view instanceof Xm?n.view:new Xm;let r;n.controls!==void 0&&(Array.isArray(n.controls)?r=new jp(n.controls.slice()):(Ms(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=n.controls));let a;n.interactions!==void 0&&(Array.isArray(n.interactions)?a=new jp(n.interactions.slice()):(Ms(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),a=n.interactions));let l;return n.overlays!==void 0?Array.isArray(n.overlays)?l=new jp(n.overlays.slice()):(Ms(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),l=n.overlays):l=new jp,{controls:r,interactions:a,keyboardEventTarget:e,overlays:l,values:t}}class _2 extends up{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new _2(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Bl(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Va(e,mo.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?Pee(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function Pee(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(Ms(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}function gz(n,e,t,i){const r=[];let a=bm();for(let l=0,o=t.length;l<o;++l){const m=t[l];a=AO(n,e,m[0],i),r.push((a[0]+a[2])/2,(a[1]+a[3])/2),e=m[m.length-1]}return r}function s3(n,e,t,i,r,a,l){let o,m;const C=(t-e)/i;if(C===1)o=e;else if(C===2)o=e,m=r;else if(C!==0){let S=n[e],O=n[e+1],U=0;const K=[0];for(let Q=e+i;Q<t;Q+=i){const ee=n[Q],V=n[Q+1];U+=Math.sqrt((ee-S)*(ee-S)+(V-O)*(V-O)),K.push(U),S=ee,O=V}const z=r*U,j=rZ(K,z);j<0?(m=(z-K[-j-2])/(K[-j-1]-K[-j-2]),o=e+(-j-2)*i):o=e+j*i}l=l>1?l:2,a=a||new Array(l);for(let S=0;S<l;++S)a[S]=o===void 0?NaN:m===void 0?n[o+S]:vf(n[o+S],n[o+i+S],m);return a}function tB(n,e,t,i,r,a){if(t==e)return null;let l;if(r<n[e+i-1])return a?(l=n.slice(e,e+i),l[i-1]=r,l):null;if(n[t-1]<r)return a?(l=n.slice(t-i,t),l[i-1]=r,l):null;if(r==n[e+i-1])return n.slice(e,e+i);let o=e/i,m=t/i;for(;o<m;){const U=o+m>>1;r<n[(U+1)*i-1]?m=U:o=U+1}const C=n[o*i-1];if(r==C)return n.slice((o-1)*i,(o-1)*i+i);const S=n[(o+1)*i-1],O=(r-C)/(S-C);l=[];for(let U=0;U<i-1;++U)l.push(vf(n[(o-1)*i+U],n[o*i+U],O));return l.push(r),l}function Kee(n,e,t,i,r,a,l){if(l)return tB(n,e,t[t.length-1],i,r,a);let o;if(r<n[i-1])return a?(o=n.slice(0,i),o[i-1]=r,o):null;if(n[n.length-1]<r)return a?(o=n.slice(n.length-i),o[i-1]=r,o):null;for(let m=0,C=t.length;m<C;++m){const S=t[m];if(e!=S){if(r<n[e+i-1])return null;if(r<=n[S-1])return tB(n,e,S,i,r,!1);e=S}}return null}class l3 extends RF{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Bl),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,i=e.length;t<i;++t)this.changeEventsKeys_.push(Va(e[t],mo.CHANGE,this.changed,this))}clone(){const e=new l3(iM(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<Vg(this.getExtent(),e,t))return r;const a=this.geometries_;for(let l=0,o=a.length;l<o;++l)r=a[l].closestPointXY(e,t,i,r);return r}containsXY(e,t){const i=this.geometries_;for(let r=0,a=i.length;r<a;++r)if(i[r].containsXY(e,t))return!0;return!1}computeExtent(e){Qv(e);const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)gF(e,t[i].getExtent());return e}getGeometries(){return iM(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].getType()===this.getType()?e=e.concat(t[i].getGeometriesArrayRecursive()):e.push(t[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],i=this.geometries_;let r=!1;for(let a=0,l=i.length;a<l;++a){const o=i[a],m=o.getSimplifiedGeometry(e);t.push(m),m!==o&&(r=!0)}return r?new l3(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)if(t[i].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const i=this.geometries_;for(let r=0,a=i.length;r<a;++r)i[r].rotate(e,t);this.changed()}scale(e,t,i){i||(i=Bf(this.getExtent()));const r=this.geometries_;for(let a=0,l=r.length;a<l;++a)r[a].scale(e,t,i);this.changed()}setGeometries(e){this.setGeometriesArray(iM(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].applyTransform(e);this.changed()}translate(e,t){const i=this.geometries_;for(let r=0,a=i.length;r<a;++r)i[r].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function iM(n){return n.map(e=>e.clone())}function QO(n,e,t,i){let r=n[e],a=n[e+1],l=0;for(let o=e+i;o<t;o+=i){const m=n[o],C=n[o+1];l+=Math.sqrt((m-r)*(m-r)+(C-a)*(C-a)),r=m,a=C}return l}class qg extends Zg{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){Zp(this.flatCoordinates,e),this.changed()}clone(){const e=new qg(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<Vg(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(vO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_O(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,r))}forEachSegment(e){return zF(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,tB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return M1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return s3(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return QO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=h2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new qg(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return d2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=c2(this.flatCoordinates,0,e,this.stride),this.changed()}}class D_ extends Zg{constructor(e,t,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&i)this.setFlatCoordinates(t,e),this.ends_=i;else{const r=e,a=[],l=[];for(let m=0,C=r.length;m<C;++m){const S=r[m];Zp(a,S.getFlatCoordinates()),l.push(a.length)}const o=r.length===0?this.getLayout():r[0].getLayout();this.setFlatCoordinates(o,a),this.ends_=l}}appendLineString(e){Zp(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new D_(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<Vg(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(CO(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),bO(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,r))}getCoordinateAtM(e,t,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,i=i!==void 0?i:!1,Kee(this.flatCoordinates,0,this.ends_,this.stride,e,t,i))}getCoordinates(){return S_(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new qg(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,i=this.layout,r=[];let a=0;for(let l=0,o=t.length;l<o;++l){const m=t[l],C=new qg(e.slice(a,m),i);r.push(C),a=m}return r}getLength(){const e=this.ends_;let t=0,i=0;for(let r=0,a=e.length;r<a;++r)i+=QO(this.flatCoordinates,t,e[r],this.stride),t=e[r];return i}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let i=0;const r=this.ends_,a=this.stride;for(let l=0,o=r.length;l<o;++l){const m=r[l],C=s3(t,i,m,a,.5);Zp(e,C),i=m}return e}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=LF(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i),new D_(t,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return BX(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=hb(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}class yb extends Zg{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){Zp(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new yb(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<Vg(this.getExtent(),e,t))return r;const a=this.flatCoordinates,l=this.stride;for(let o=0,m=a.length;o<m;o+=l){const C=Kg(e,t,a[o],a[o+1]);if(C<r){r=C;for(let S=0;S<l;++S)i[S]=a[o+S];i.length=l}}return r}getCoordinates(){return M1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Qg(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,i=this.stride,r=[];for(let a=0,l=e.length;a<l;a+=i){const o=new Qg(e.slice(a,a+i),t);r.push(o)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,i=this.stride;for(let r=0,a=t.length;r<a;r+=i){const l=t[r],o=t[r+1];if(lO(e,l,o))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=c2(this.flatCoordinates,0,e,this.stride),this.changed()}}class R_ extends Zg{constructor(e,t,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){const r=e,a=[],l=[];for(let o=0,m=r.length;o<m;++o){const C=r[o],S=a.length,O=C.getEnds();for(let U=0,K=O.length;U<K;++U)O[U]+=S;Zp(a,C.getFlatCoordinates()),l.push(O)}t=r.length===0?this.getLayout():r[0].getLayout(),e=a,i=l}t!==void 0&&i?(this.setFlatCoordinates(t,e),this.endss_=i):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;Zp(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let r=0,a=t.length;r<a;++r)t[r]+=i}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=this.endss_[r].slice();const i=new R_(this.flatCoordinates.slice(),this.layout,t);return i.applyProperties(this),i}closestPointXY(e,t,i,r){return r<Vg(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(_X(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),bX(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return EX(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return CX(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),H6(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,q6(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=gz(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=FF(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new yb(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;jF(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=H6(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=SX(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i),new R_(t,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const a=this.endss_[e-1];t=a[a.length-1]}const i=this.endss_[e].slice(),r=i[i.length-1];if(t!==0)for(let a=0,l=i.length;a<l;++a)i[a]-=t;return new F0(this.flatCoordinates.slice(t,r),this.layout,i)}getPolygons(){const e=this.layout,t=this.flatCoordinates,i=this.endss_,r=[];let a=0;for(let l=0,o=i.length;l<o;++l){const m=i[l].slice(),C=m[m.length-1];if(a!==0)for(let O=0,U=m.length;O<U;++O)m[O]-=a;const S=new F0(t.slice(a,C),e,m);r.push(S),a=C}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return OX(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=UF(this.flatCoordinates,0,e,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const T9=Yd();class Fh{constructor(e,t,i,r,a,l){this.styleFunction,this.extent_,this.id_=l,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=a,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?pF(this.flatCoordinates_):AO(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Bf(this.getExtent());this.flatInteriorPoints_=SO(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=WF(this.flatCoordinates_,this.ends_),t=gz(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=FF(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=s3(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const i=this.ends_;for(let r=0,a=i.length;r<a;++r){const l=i[r],o=s3(e,t,l,2,.5);Zp(this.flatMidpoints_,o),t=l}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Ws(e);const t=e.getExtent(),i=e.getWorldExtent();if(t&&i){const r=nc(i)/nc(t);Jp(T9,i[0],i[3],r,-r,0,0,0),P1(this.flatCoordinates_,0,this.flatCoordinates_.length,2,T9,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new Fh(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=uF((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const i=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":i.length=h2(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),r=[i.length];break;case"MultiLineString":r=[],i.length=LF(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,r);break;case"Polygon":r=[],i.length=xO(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,r);break}return r&&(this.simplifiedGeometry_=new Fh(this.type_,i,r,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}Fh.prototype.getFlatCoordinates=Fh.prototype.getOrientedFlatCoordinates;class yz{drawCustom(e,t,i,r,a){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,i){}drawFeature(e,t,i){}drawGeometryCollection(e,t,i){}drawLineString(e,t,i){}drawMultiLineString(e,t,i){}drawMultiPoint(e,t,i){}drawMultiPolygon(e,t,i){}drawPoint(e,t,i){}drawPolygon(e,t,i){}drawText(e,t,i){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class Uee extends yz{constructor(e,t,i,r,a,l,o){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=r,this.transformRotation_=r?i2(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=a,this.squaredTolerance_=l,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Yd()}drawImages_(e,t,i,r){if(!this.image_)return;const a=P1(e,t,i,r,this.transform_,this.pixelCoordinates_),l=this.context_,o=this.tmpLocalTransform_,m=l.globalAlpha;this.imageOpacity_!=1&&(l.globalAlpha=m*this.imageOpacity_);let C=this.imageRotation_;this.transformRotation_===0&&(C-=this.viewRotation_),this.imageRotateWithView_&&(C+=this.viewRotation_);for(let S=0,O=a.length;S<O;S+=2){const U=a[S]-this.imageAnchorX_,K=a[S+1]-this.imageAnchorY_;if(C!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const z=U+this.imageAnchorX_,j=K+this.imageAnchorY_;Jp(o,z,j,1,1,C,-z,-j),l.save(),l.transform.apply(l,o),l.translate(z,j),l.scale(this.imageScale_[0],this.imageScale_[1]),l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),l.restore()}else l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,U,K,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(l.globalAlpha=m)}drawText_(e,t,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const a=P1(e,t,i,r,this.transform_,this.pixelCoordinates_),l=this.context_;let o=this.textRotation_;for(this.transformRotation_===0&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);t<i;t+=r){const m=a[t]+this.textOffsetX_,C=a[t+1]+this.textOffsetY_;o!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(l.save(),l.translate(m-this.textOffsetX_,C-this.textOffsetY_),l.rotate(o),l.translate(this.textOffsetX_,this.textOffsetY_),l.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&l.strokeText(this.text_,0,0),this.textFillState_&&l.fillText(this.text_,0,0),l.restore()):(this.textStrokeState_&&l.strokeText(this.text_,m,C),this.textFillState_&&l.fillText(this.text_,m,C))}}moveToLineTo_(e,t,i,r,a){const l=this.context_,o=P1(e,t,i,r,this.transform_,this.pixelCoordinates_);l.moveTo(o[0],o[1]);let m=o.length;a&&(m-=2);for(let C=2;C<m;C+=2)l.lineTo(o[C],o[C+1]);return a&&l.closePath(),i}drawRings_(e,t,i,r){for(let a=0,l=i.length;a<l;++a)t=this.moveToLineTo_(e,t,i[a],r,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!uu(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=vX(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],r=t[3]-t[1],a=Math.sqrt(i*i+r*r),l=this.context_;l.beginPath(),l.arc(t[0],t[1],a,0,2*Math.PI),this.fillState_&&l.fill(),this.strokeState_&&l.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const i=t.getGeometryFunction()(e);i&&(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,r=t.length;i<r;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!uu(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(uu(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getFlatCoordinates();let a=0;const l=e.getEnds(),o=e.getStride();i.beginPath();for(let m=0,C=l.length;m<C;++m)a=this.moveToLineTo_(r,a,l[m],o,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!uu(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!uu(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let r=0;const a=e.getEndss(),l=e.getStride();t.beginPath();for(let o=0,m=a.length;o<m;++o){const C=a[o];r=this.drawRings_(i,r,C,l)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),F1(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,r=e.textAlign?e.textAlign:O_;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=r&&(i.textAlign=r,t.textAlign=r),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:Yp(i||Wd)}}if(!t)this.strokeState_=null;else{const i=t.getColor(),r=t.getLineCap(),a=t.getLineDash(),l=t.getLineDashOffset(),o=t.getLineJoin(),m=t.getWidth(),C=t.getMiterLimit(),S=a||R0;this.strokeState_={lineCap:r!==void 0?r:Rv,lineDash:this.pixelRatio_===1?S:S.map(O=>O*this.pixelRatio_),lineDashOffset:(l||P0)*this.pixelRatio_,lineJoin:o!==void 0?o:Pv,lineWidth:(m!==void 0?m:I_)*this.pixelRatio_,miterLimit:C!==void 0?C:E_,strokeStyle:Yp(i||B_)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),a=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=a[0],this.imageOriginY_=a[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const l=e.getScaleArray();this.imageScale_=[l[0]*this.pixelRatio_/i,l[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const K=t.getColor();this.textFillState_={fillStyle:Yp(K||Wd)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const K=i.getColor(),z=i.getLineCap(),j=i.getLineDash(),Q=i.getLineDashOffset(),ee=i.getLineJoin(),V=i.getWidth(),ae=i.getMiterLimit();this.textStrokeState_={lineCap:z!==void 0?z:Rv,lineDash:j||R0,lineDashOffset:Q||P0,lineJoin:ee!==void 0?ee:Pv,lineWidth:V!==void 0?V:I_,miterLimit:ae!==void 0?ae:E_,strokeStyle:Yp(K||B_)}}const r=e.getFont(),a=e.getOffsetX(),l=e.getOffsetY(),o=e.getRotateWithView(),m=e.getRotation(),C=e.getScaleArray(),S=e.getText(),O=e.getTextAlign(),U=e.getTextBaseline();this.textState_={font:r!==void 0?r:oz,textAlign:O!==void 0?O:O_,textBaseline:U!==void 0?U:i3},this.text_=S!==void 0?Array.isArray(S)?S.reduce((K,z,j)=>K+=j%2?" ":z,""):S:"",this.textOffsetX_=a!==void 0?this.pixelRatio_*a:0,this.textOffsetY_=l!==void 0?this.pixelRatio_*l:0,this.textRotateWithView_=o!==void 0?o:!1,this.textRotation_=m!==void 0?m:0,this.textScale_=[this.pixelRatio_*C[0],this.pixelRatio_*C[1]]}}}const Lee=.5,vz={Point:Yee,LineString:jee,Polygon:Hee,MultiPoint:qee,MultiLineString:Wee,MultiPolygon:Qee,GeometryCollection:Gee,Circle:zee};function Fee(n,e){return parseInt(Io(n),10)-parseInt(Io(e),10)}function nB(n,e){const t=Cz(n,e);return t*t}function Cz(n,e){return Lee*n/e}function zee(n,e,t,i,r){const a=t.getFill(),l=t.getStroke();if(a||l){const m=n.getBuilder(t.getZIndex(),"Circle");m.setFillStrokeStyle(a,l),m.drawCircle(e,i,r)}const o=t.getText();if(o&&o.getText()){const m=n.getBuilder(t.getZIndex(),"Text");m.setTextStyle(o),m.drawText(e,i)}}function A3(n,e,t,i,r,a,l,o){const m=[],C=t.getImage();if(C){let U=!0;const K=C.getImageState();K==hr.LOADED||K==hr.ERROR?U=!1:K==hr.IDLE&&C.load(),U&&m.push(C.ready())}const S=t.getFill();S&&S.loading()&&m.push(S.ready());const O=m.length>0;return O&&Promise.all(m).then(()=>r(null)),Nee(n,e,t,i,a,l,o),O}function Nee(n,e,t,i,r,a,l){const o=t.getGeometryFunction()(e);if(!o)return;const m=o.simplifyTransformed(i,r);if(t.getRenderer())_z(n,m,t,e,l);else{const S=vz[m.getType()];S(n,m,t,e,l,a)}}function _z(n,e,t,i,r){if(e.getType()=="GeometryCollection"){const l=e.getGeometries();for(let o=0,m=l.length;o<m;++o)_z(n,l[o],t,i,r);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer(),r)}function Gee(n,e,t,i,r,a){const l=e.getGeometriesArray();let o,m;for(o=0,m=l.length;o<m;++o){const C=vz[l[o].getType()];C(n,l[o],t,i,r,a)}}function jee(n,e,t,i,r){const a=t.getStroke();if(a){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,a),o.drawLineString(e,i,r)}const l=t.getText();if(l&&l.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(l),o.drawText(e,i,r)}}function Wee(n,e,t,i,r){const a=t.getStroke();if(a){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,a),o.drawMultiLineString(e,i,r)}const l=t.getText();if(l&&l.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(l),o.drawText(e,i,r)}}function Qee(n,e,t,i,r){const a=t.getFill(),l=t.getStroke();if(l||a){const m=n.getBuilder(t.getZIndex(),"Polygon");m.setFillStrokeStyle(a,l),m.drawMultiPolygon(e,i,r)}const o=t.getText();if(o&&o.getText()){const m=n.getBuilder(t.getZIndex(),"Text");m.setTextStyle(o),m.drawText(e,i,r)}}function Yee(n,e,t,i,r,a){const l=t.getImage(),o=t.getText(),m=o&&o.getText(),C=a&&l&&m?{}:void 0;if(l){if(l.getImageState()!=hr.LOADED)return;const S=n.getBuilder(t.getZIndex(),"Image");S.setImageStyle(l,C),S.drawPoint(e,i,r)}if(m){const S=n.getBuilder(t.getZIndex(),"Text");S.setTextStyle(o,C),S.drawText(e,i,r)}}function qee(n,e,t,i,r,a){const l=t.getImage(),o=l&&l.getOpacity()!==0,m=t.getText(),C=m&&m.getText(),S=a&&o&&C?{}:void 0;if(o){if(l.getImageState()!=hr.LOADED)return;const O=n.getBuilder(t.getZIndex(),"Image");O.setImageStyle(l,S),O.drawMultiPoint(e,i,r)}if(C){const O=n.getBuilder(t.getZIndex(),"Text");O.setTextStyle(m,S),O.drawText(e,i,r)}}function Hee(n,e,t,i,r){const a=t.getFill(),l=t.getStroke();if(a||l){const m=n.getBuilder(t.getZIndex(),"Polygon");m.setFillStrokeStyle(a,l),m.drawPolygon(e,i,r)}const o=t.getText();if(o&&o.getText()){const m=n.getBuilder(t.getZIndex(),"Text");m.setTextStyle(o),m.drawText(e,i,r)}}let Vee=!1;function bz(n,e,t,i,r,a,l){const o=new XMLHttpRequest;o.open("GET",typeof n=="function"?n(t,i,r):n,!0),e.getType()=="arraybuffer"&&(o.responseType="arraybuffer"),o.withCredentials=Vee,o.onload=function(m){if(!o.status||o.status>=200&&o.status<300){const C=e.getType();try{let S;C=="text"||C=="json"?S=o.responseText:C=="xml"?S=o.responseXML||o.responseText:C=="arraybuffer"&&(S=o.response),S?a(e.readFeatures(S,{extent:t,featureProjection:r}),e.readProjection(S)):l()}catch{l()}}else l()},o.onerror=l,o.send()}function k9(n,e){return function(t,i,r,a,l){bz(n,e,t,i,r,(o,m)=>{this.addFeatures(o),a!==void 0&&a(o)},()=>{this.changed(),l!==void 0&&l()})}}function $ee(n,e){return[[-1/0,-1/0,1/0,1/0]]}function Zee(n,e){return[n]}class D9{constructor(e){this.rbush_=new JF(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[Io(t)]=i}load(e,t){const i=new Array(t.length);for(let r=0,a=t.length;r<a;r++){const l=e[r],o=t[r],m={minX:l[0],minY:l[1],maxX:l[2],maxY:l[3],value:o};i[r]=m,this.items_[Io(o)]=m}this.rbush_.load(i)}remove(e){const t=Io(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null}update(e,t){const i=this.items_[Io(t)],r=[i.minX,i.minY,i.maxX,i.maxY];L0(r,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let r=0,a=e.length;r<a;r++)if(i=t(e[r]),i)return i;return i}isEmpty(){return U1(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return U0(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class Vv extends up{constructor(e){super(),this.projection=Ws(e.projection),this.attributions_=R9(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,r){t.viewResolver=i,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=R9(e),this.changed()}setState(e){this.state_=e,this.changed()}}function R9(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const lm={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class u1 extends Ap{constructor(e,t,i){super(e),this.feature=t,this.features=i}}class Sx extends Vv{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=b_,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(Ms(this.format_,"`format` must be set when `url` is set"),this.loader_=k9(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:$ee;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new D9:null,this.loadedExtentsRtree_=new D9,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(e.features)?r=e.features:e.features&&(i=e.features,r=i.getArray()),!t&&i===void 0&&(i=new jp(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Io(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new u1(lm.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof Fh||(this.featureChangeKeys_[e]=[Va(t,mo.CHANGE,this.handleFeatureChange_,this),Va(t,Iv.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let i=!0;if(t.getId()!==void 0){const r=String(t.getId());if(!(r in this.idIndex_))this.idIndex_[r]=t;else if(t instanceof Fh){const a=this.idIndex_[r];a instanceof Fh?Array.isArray(a)?a.push(t):this.idIndex_[r]=[a,t]:i=!1}else i=!1}return i&&(Ms(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],r=[];for(let a=0,l=e.length;a<l;a++){const o=e[a],m=Io(o);this.addToIndex_(m,o)&&i.push(o)}for(let a=0,l=i.length;a<l;a++){const o=i[a],m=Io(o);this.setupChangeEvents_(m,o);const C=o.getGeometry();if(C){const S=C.getExtent();t.push(S),r.push(o)}else this.nullGeometryFeatures_[m]=o}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener(lm.ADDFEATURE))for(let a=0,l=i.length;a<l;a++)this.dispatchEvent(new u1(lm.ADDFEATURE,i[a]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(lm.ADDFEATURE,function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener(lm.REMOVEFEATURE,function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener(Gd.ADD,i=>{t||(t=!0,this.addFeature(i.element),t=!1)}),e.addEventListener(Gd.REMOVE,i=>{t||(t=!0,this.removeFeature(i.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(Bl);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(i=>{this.removeFeatureInternal(i)});for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new u1(lm.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(r){const a=r.getGeometry();if(a instanceof Fh||a.intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){const r=i.getGeometry();if(r instanceof Fh||r.intersectsExtent(e)){const a=t(i);if(a)return a}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),U1(this.nullGeometryFeatures_)||Zp(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=bF(e,t);return[].concat(...r.map(a=>this.featuresRtree_.getInExtent(a)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],r=e[1];let a=null;const l=[NaN,NaN];let o=1/0;const m=[-1/0,-1/0,1/0,1/0];return t=t||__,this.featuresRtree_.forEachInExtent(m,function(C){if(t(C)){const S=C.getGeometry(),O=o;if(o=S instanceof Fh?0:S.closestPointXY(i,r,l,o),o<O){a=C;const U=Math.sqrt(o);m[0]=i-U,m[1]=r-U,m[2]=i+U,m[3]=r+U}}}),a}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=Io(t),r=t.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);else{const l=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(l,t)):this.featuresRtree_&&this.featuresRtree_.update(l,t)}const a=t.getId();if(a!==void 0){const l=a.toString();this.idIndex_[l]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[l]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new u1(lm.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Io(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&U1(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,i){const r=this.loadedExtentsRtree_,a=this.strategy_(e,t,i);for(let l=0,o=a.length;l<o;++l){const m=a[l];r.forEachInExtent(m,function(S){return Wp(S.extent,m)})||(++this.loadingExtentsCount_,this.dispatchEvent(new u1(lm.FEATURESLOADSTART)),this.loader_.call(this,m,t,i,S=>{--this.loadingExtentsCount_,this.dispatchEvent(new u1(lm.FEATURESLOADEND,void 0,S))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new u1(lm.FEATURESLOADERROR))}),r.insert(m,{extent:m.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,i=t.forEachInExtent(e,function(r){if(L0(r.extent,e))return r});i&&t.remove(i)}removeFeatures(e){let t=!1;for(let i=0,r=e.length;i<r;++i)t=this.removeFeatureInternal(e[i])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Io(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(Bl),delete this.featureChangeKeys_[t];const r=e.getId();if(r!==void 0){const a=r.toString(),l=this.idIndex_[a];l===e?delete this.idIndex_[a]:Array.isArray(l)&&(l.splice(l.indexOf(e),1),l.length===1&&(this.idIndex_[a]=l[0]))}return delete this.uidIndex_[t],this.hasListener(lm.REMOVEFEATURE)&&this.dispatchEvent(new u1(lm.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){Ms(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(k9(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const Wr={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Zb=[Wr.FILL],w1=[Wr.STROKE],Ig=[Wr.BEGIN_PATH],P9=[Wr.CLOSE_PATH];class vb extends yz{constructor(e,t,i,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,a=this.coordinates;let l=a.length;for(let o=0,m=e.length;o<m;o+=t)r[0]=e[o],r[1]=e[o+1],Wg(i,r)&&(a[l++]=r[0],a[l++]=r[1]);return l}appendFlatLineCoordinates(e,t,i,r,a,l){const o=this.coordinates;let m=o.length;const C=this.getBufferedMaxExtent();l&&(t+=r);let S=e[t],O=e[t+1];const U=this.tmpCoordinate_;let K=!0,z,j,Q;for(z=t+r;z<i;z+=r)U[0]=e[z],U[1]=e[z+1],Q=F6(C,U),Q!==j?(K&&(o[m++]=S,o[m++]=O,K=!1),o[m++]=U[0],o[m++]=U[1]):Q===Gc.INTERSECTING?(o[m++]=U[0],o[m++]=U[1],K=!1):K=!0,S=U[0],O=U[1],j=Q;return(a&&K||z===t+r)&&(o[m++]=S,o[m++]=O),m}drawCustomCoordinates_(e,t,i,r,a){for(let l=0,o=i.length;l<o;++l){const m=i[l],C=this.appendFlatLineCoordinates(e,t,m,r,!1,!1);a.push(C),t=m}return t}drawCustom(e,t,i,r,a){this.beginGeometry(e,t,a);const l=e.getType(),o=e.getStride(),m=this.coordinates.length;let C,S,O,U,K;switch(l){case"MultiPolygon":C=e.getOrientedFlatCoordinates(),U=[];const z=e.getEndss();K=0;for(let j=0,Q=z.length;j<Q;++j){const ee=[];K=this.drawCustomCoordinates_(C,K,z[j],o,ee),U.push(ee)}this.instructions.push([Wr.CUSTOM,m,U,e,i,q6,a]),this.hitDetectionInstructions.push([Wr.CUSTOM,m,U,e,r||i,q6,a]);break;case"Polygon":case"MultiLineString":O=[],C=l=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),K=this.drawCustomCoordinates_(C,0,e.getEnds(),o,O),this.instructions.push([Wr.CUSTOM,m,O,e,i,S_,a]),this.hitDetectionInstructions.push([Wr.CUSTOM,m,O,e,r||i,S_,a]);break;case"LineString":case"Circle":C=e.getFlatCoordinates(),S=this.appendFlatLineCoordinates(C,0,C.length,o,!1,!1),this.instructions.push([Wr.CUSTOM,m,S,e,i,M1,a]),this.hitDetectionInstructions.push([Wr.CUSTOM,m,S,e,r||i,M1,a]);break;case"MultiPoint":C=e.getFlatCoordinates(),S=this.appendFlatPointCoordinates(C,o),S>m&&(this.instructions.push([Wr.CUSTOM,m,S,e,i,M1,a]),this.hitDetectionInstructions.push([Wr.CUSTOM,m,S,e,r||i,M1,a]));break;case"Point":C=e.getFlatCoordinates(),this.coordinates.push(C[0],C[1]),S=this.coordinates.length,this.instructions.push([Wr.CUSTOM,m,S,e,i,void 0,a]),this.hitDetectionInstructions.push([Wr.CUSTOM,m,S,e,r||i,void 0,a]);break}this.endGeometry(t)}beginGeometry(e,t,i){this.beginGeometryInstruction1_=[Wr.BEGIN_GEOMETRY,t,0,e,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Wr.BEGIN_GEOMETRY,t,0,e,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const i=e.length;let r,a,l=-1;for(t=0;t<i;++t)r=e[t],a=r[0],a==Wr.END_GEOMETRY?l=t:a==Wr.BEGIN_GEOMETRY&&(r[2]=t,aZ(this.hitDetectionInstructions,l,t),l=-1)}fillStyleToState(e,t={}){if(e){const i=e.getColor();t.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,t.fillStyle=Yp(i||Wd)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const i=e.getColor();t.strokeStyle=Yp(i||B_);const r=e.getLineCap();t.lineCap=r!==void 0?r:Rv;const a=e.getLineDash();t.lineDash=a?a.slice():R0;const l=e.getLineDashOffset();t.lineDashOffset=l||P0;const o=e.getLineJoin();t.lineJoin=o!==void 0?o:Pv;const m=e.getWidth();t.lineWidth=m!==void 0?m:I_;const C=e.getMiterLimit();t.miterLimit=C!==void 0?C:E_,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const i=this.state;this.fillStyleToState(e,i),this.strokeStyleToState(t,i)}createFill(e){const t=e.fillStyle,i=[Wr.SET_FILL_STYLE,t];return typeof t!="string"&&i.push(e.fillPatternScale),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Wr.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,r=e.lineCap,a=e.lineDash,l=e.lineDashOffset,o=e.lineJoin,m=e.lineWidth,C=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=r||a!=e.currentLineDash&&!F1(e.currentLineDash,a)||e.currentLineDashOffset!=l||e.currentLineJoin!=o||e.currentLineWidth!=m||e.currentMiterLimit!=C)&&(t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=r,e.currentLineDash=a,e.currentLineDashOffset=l,e.currentLineJoin=o,e.currentLineWidth=m,e.currentMiterLimit=C)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Wr.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=mF(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;D1(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class Xee extends vb{constructor(e,t,i,r){super(e,t,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,i){if(!this.image_||this.maxExtent&&!Wg(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,i);const r=e.getFlatCoordinates(),a=e.getStride(),l=this.coordinates.length,o=this.appendFlatPointCoordinates(r,a);this.instructions.push([Wr.DRAW_IMAGE,l,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Wr.DRAW_IMAGE,l,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,i){if(!this.image_)return;this.beginGeometry(e,t,i);const r=e.getFlatCoordinates(),a=[];for(let m=0,C=r.length;m<C;m+=e.getStride())(!this.maxExtent||Wg(this.maxExtent,r.slice(m,m+2)))&&a.push(r[m],r[m+1]);const l=this.coordinates.length,o=this.appendFlatPointCoordinates(a,2);this.instructions.push([Wr.DRAW_IMAGE,l,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Wr.DRAW_IMAGE,l,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),r=e.getSize(),a=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class Jee extends vb{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinates_(e,t,i,r){const a=this.coordinates.length,l=this.appendFlatLineCoordinates(e,t,i,r,!1,!1),o=[Wr.MOVE_TO_LINE_TO,a,l];return this.instructions.push(o),this.hitDetectionInstructions.push(o),i}drawLineString(e,t,i){const r=this.state,a=r.strokeStyle,l=r.lineWidth;if(a===void 0||l===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([Wr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,R0,P0],Ig);const o=e.getFlatCoordinates(),m=e.getStride();this.drawFlatCoordinates_(o,0,o.length,m),this.hitDetectionInstructions.push(w1),this.endGeometry(t)}drawMultiLineString(e,t,i){const r=this.state,a=r.strokeStyle,l=r.lineWidth;if(a===void 0||l===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([Wr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,R0,P0],Ig);const o=e.getEnds(),m=e.getFlatCoordinates(),C=e.getStride();let S=0;for(let O=0,U=o.length;O<U;++O)S=this.drawFlatCoordinates_(m,S,o[O],C);this.hitDetectionInstructions.push(w1),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(w1),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(w1),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Ig)}}class K9 extends vb{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinatess_(e,t,i,r){const a=this.state,l=a.fillStyle!==void 0,o=a.strokeStyle!==void 0,m=i.length;this.instructions.push(Ig),this.hitDetectionInstructions.push(Ig);for(let C=0;C<m;++C){const S=i[C],O=this.coordinates.length,U=this.appendFlatLineCoordinates(e,t,S,r,!0,!o),K=[Wr.MOVE_TO_LINE_TO,O,U];this.instructions.push(K),this.hitDetectionInstructions.push(K),o&&(this.instructions.push(P9),this.hitDetectionInstructions.push(P9)),t=S}return l&&(this.instructions.push(Zb),this.hitDetectionInstructions.push(Zb)),o&&(this.instructions.push(w1),this.hitDetectionInstructions.push(w1)),t}drawCircle(e,t,i){const r=this.state,a=r.fillStyle,l=r.strokeStyle;if(a===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Wr.SET_FILL_STYLE,Wd]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Wr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,R0,P0]);const o=e.getFlatCoordinates(),m=e.getStride(),C=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,m,!1,!1);const S=[Wr.CIRCLE,C];this.instructions.push(Ig,S),this.hitDetectionInstructions.push(Ig,S),r.fillStyle!==void 0&&(this.instructions.push(Zb),this.hitDetectionInstructions.push(Zb)),r.strokeStyle!==void 0&&(this.instructions.push(w1),this.hitDetectionInstructions.push(w1)),this.endGeometry(t)}drawPolygon(e,t,i){const r=this.state,a=r.fillStyle,l=r.strokeStyle;if(a===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Wr.SET_FILL_STYLE,Wd]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Wr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,R0,P0]);const o=e.getEnds(),m=e.getOrientedFlatCoordinates(),C=e.getStride();this.drawFlatCoordinatess_(m,0,o,C),this.endGeometry(t)}drawMultiPolygon(e,t,i){const r=this.state,a=r.fillStyle,l=r.strokeStyle;if(a===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Wr.SET_FILL_STYLE,Wd]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Wr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,R0,P0]);const o=e.getEndss(),m=e.getOrientedFlatCoordinates(),C=e.getStride();let S=0;for(let O=0,U=o.length;O<U;++O)S=this.drawFlatCoordinatess_(m,S,o[O],C);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let i=0,r=t.length;i<r;++i)t[i]=_g(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function ete(n,e,t,i,r){const a=[];let l=t,o=0,m=e.slice(t,2);for(;o<n&&l+r<i;){const[C,S]=m.slice(-2),O=e[l+r],U=e[l+r+1],K=Math.sqrt((O-C)*(O-C)+(U-S)*(U-S));if(o+=K,o>=n){const z=(n-o+K)/K,j=vf(C,O,z),Q=vf(S,U,z);m.push(j,Q),a.push(m),m=[j,Q],o==n&&(l+=r),o=0}else if(o<n)m.push(e[l+r],e[l+r+1]),l+=r;else{const z=K-o,j=vf(C,O,z/K),Q=vf(S,U,z/K);m.push(j,Q),a.push(m),m=[j,Q],o=0,l+=r}}return o>0&&a.push(m),a}function tte(n,e,t,i,r){let a=t,l=t,o=0,m=0,C=t,S,O,U,K,z,j,Q,ee,V,ae;for(O=t;O<i;O+=r){const ne=e[O],Z=e[O+1];z!==void 0&&(V=ne-z,ae=Z-j,K=Math.sqrt(V*V+ae*ae),Q!==void 0&&(m+=U,S=Math.acos((Q*V+ee*ae)/(U*K)),S>n&&(m>o&&(o=m,a=C,l=O),m=0,C=O-r)),U=K,Q=V,ee=ae),z=ne,j=Z}return m+=K,m>o?[C,O]:[a,l]}const u3={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class nte extends vb{constructor(e,t,i,r){super(e,t,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Wd]={fillStyle:Wd},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,i){const r=this.textFillState_,a=this.textStrokeState_,l=this.textState_;if(this.text_===""||!l||!r&&!a)return;const o=this.coordinates;let m=o.length;const C=e.getType();let S=null,O=e.getStride();if(l.placement==="line"&&(C=="LineString"||C=="MultiLineString"||C=="Polygon"||C=="MultiPolygon")){if(!uu(this.maxExtent,e.getExtent()))return;let U;if(S=e.getFlatCoordinates(),C=="LineString")U=[S.length];else if(C=="MultiLineString")U=e.getEnds();else if(C=="Polygon")U=e.getEnds().slice(0,1);else if(C=="MultiPolygon"){const Q=e.getEndss();U=[];for(let ee=0,V=Q.length;ee<V;++ee)U.push(Q[ee][0])}this.beginGeometry(e,t,i);const K=l.repeat,z=K?void 0:l.textAlign;let j=0;for(let Q=0,ee=U.length;Q<ee;++Q){let V;K?V=ete(K*this.resolution,S,j,U[Q],O):V=[S.slice(j,U[Q])];for(let ae=0,ne=V.length;ae<ne;++ae){const Z=V[ae];let oe=0,W=Z.length;if(z==null){const ge=tte(l.maxAngle,Z,0,Z.length,2);oe=ge[0],W=ge[1]}for(let ge=oe;ge<W;ge+=O)o.push(Z[ge],Z[ge+1]);const ue=o.length;j=U[Q],this.drawChars_(m,ue),m=ue}}this.endGeometry(t)}else{let U=l.overflow?null:[];switch(C){case"Point":case"MultiPoint":S=e.getFlatCoordinates();break;case"LineString":S=e.getFlatMidpoint();break;case"Circle":S=e.getCenter();break;case"MultiLineString":S=e.getFlatMidpoints(),O=2;break;case"Polygon":S=e.getFlatInteriorPoint(),l.overflow||U.push(S[2]/this.resolution),O=3;break;case"MultiPolygon":const ne=e.getFlatInteriorPoints();S=[];for(let Z=0,oe=ne.length;Z<oe;Z+=3)l.overflow||U.push(ne[Z+2]/this.resolution),S.push(ne[Z],ne[Z+1]);if(S.length===0)return;O=2;break}const K=this.appendFlatPointCoordinates(S,O);if(K===m)return;if(U&&(K-m)/2!==S.length/O){let ne=m/2;U=U.filter((Z,oe)=>{const W=o[(ne+oe)*2]===S[oe*O]&&o[(ne+oe)*2+1]===S[oe*O+1];return W||--ne,W})}this.saveTextStates_();const z=l.backgroundFill?this.createFill(this.fillStyleToState(l.backgroundFill)):null,j=l.backgroundStroke?this.createStroke(this.strokeStyleToState(l.backgroundStroke)):null;this.beginGeometry(e,t,i);let Q=l.padding;if(Q!=Og&&(l.scale[0]<0||l.scale[1]<0)){let ne=l.padding[0],Z=l.padding[1],oe=l.padding[2],W=l.padding[3];l.scale[0]<0&&(Z=-Z,W=-W),l.scale[1]<0&&(ne=-ne,oe=-oe),Q=[ne,Z,oe,W]}const ee=this.pixelRatio;this.instructions.push([Wr.DRAW_IMAGE,m,K,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,Q==Og?Og:Q.map(function(ne){return ne*ee}),z,j,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,U]);const V=1/ee,ae=z?z.slice(0):null;ae&&(ae[1]=Wd),this.hitDetectionInstructions.push([Wr.DRAW_IMAGE,m,K,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[V,V],NaN,this.declutterMode_,this.declutterImageWithText_,Q,ae,j,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Wd:this.fillKey_,this.textOffsetX_,this.textOffsetY_,U]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const a=this.textKey_;a in this.textStates||(this.textStates[a]={font:t.font,textAlign:t.textAlign||O_,justify:t.justify,textBaseline:t.textBaseline||i3,scale:t.scale});const l=this.fillKey_;i&&(l in this.fillStates||(this.fillStates[l]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,r=this.textState_,a=this.strokeKey_,l=this.textKey_,o=this.fillKey_;this.saveTextStates_();const m=this.pixelRatio,C=u3[r.textBaseline],S=this.textOffsetY_*m,O=this.text_,U=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([Wr.DRAW_CHARS,e,t,C,r.overflow,o,r.maxAngle,m,S,a,U*m,O,l,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([Wr.DRAW_CHARS,e,t,C,r.overflow,o&&Wd,r.maxAngle,m,S,a,U*m,O,l,1/m,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let i,r,a;if(!e)this.text_="";else{const l=e.getFill();l?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=Yp(l.getColor()||Wd)):(r=null,this.textFillState_=r);const o=e.getStroke();if(!o)a=null,this.textStrokeState_=a;else{a=this.textStrokeState_,a||(a={},this.textStrokeState_=a);const j=o.getLineDash(),Q=o.getLineDashOffset(),ee=o.getWidth(),V=o.getMiterLimit();a.lineCap=o.getLineCap()||Rv,a.lineDash=j?j.slice():R0,a.lineDashOffset=Q===void 0?P0:Q,a.lineJoin=o.getLineJoin()||Pv,a.lineWidth=ee===void 0?I_:ee,a.miterLimit=V===void 0?E_:V,a.strokeStyle=Yp(o.getColor()||B_)}i=this.textState_;const m=e.getFont()||oz;Aee(m);const C=e.getScaleArray();i.overflow=e.getOverflow(),i.font=m,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||i3,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||Og,i.scale=C===void 0?[1,1]:C;const S=e.getOffsetX(),O=e.getOffsetY(),U=e.getRotateWithView(),K=e.getKeepUpright(),z=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=S===void 0?0:S,this.textOffsetY_=O===void 0?0:O,this.textRotateWithView_=U===void 0?!1:U,this.textKeepUpright_=K===void 0?!0:K,this.textRotation_=z===void 0?0:z,this.strokeKey_=a?(typeof a.strokeStyle=="string"?a.strokeStyle:Io(a.strokeStyle))+a.lineCap+a.lineDashOffset+"|"+a.lineWidth+a.lineJoin+a.miterLimit+"["+a.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r&&r.fillStyle?typeof r.fillStyle=="string"?r.fillStyle:"|"+Io(r.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const ite={Circle:K9,Default:vb,Image:Xee,LineString:Jee,Polygon:K9,Text:nte};class xz{constructor(e,t,i,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const r in i){const a=i[r].finish();e[t][r]=a}}return e}getBuilder(e,t){const i=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let a=r[t];if(a===void 0){const l=ite[t];a=new l(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=a}return a}}function rte(n,e,t,i,r,a,l,o,m,C,S,O,U=!0){let K=n[e],z=n[e+1],j=0,Q=0,ee=0,V=0;function ae(){j=K,Q=z,e+=i,K=n[e],z=n[e+1],V+=ee,ee=Math.sqrt((K-j)*(K-j)+(z-Q)*(z-Q))}do ae();while(e<t-i&&V+ee<a);let ne=ee===0?0:(a-V)/ee;const Z=vf(j,K,ne),oe=vf(Q,z,ne),W=e-i,ue=V,ge=a+o*m(C,r,S);for(;e<t-i&&V+ee<ge;)ae();ne=ee===0?0:(ge-V)/ee;const ye=vf(j,K,ne),Me=vf(Q,z,ne);let Be=!1;if(U)if(O){const ot=[Z,oe,ye,Me];DF(ot,0,4,2,O,ot,ot),Be=ot[0]>ot[2]}else Be=Z>ye;const we=Math.PI,qe=[],xe=W+i===e;e=W,ee=0,V=ue,K=n[e],z=n[e+1];let ze;if(xe){ae(),ze=Math.atan2(z-Q,K-j),Be&&(ze+=ze>0?-we:we);const ot=(ye+Z)/2,yt=(Me+oe)/2;return qe[0]=[ot,yt,(ge-a)/2,ze,r],qe}r=r.replace(/\n/g," ");for(let ot=0,yt=r.length;ot<yt;){ae();let nt=Math.atan2(z-Q,K-j);if(Be&&(nt+=nt>0?-we:we),ze!==void 0){let pt=nt-ze;if(pt+=pt>we?-2*we:pt<-we?2*we:0,Math.abs(pt)>l)return null}ze=nt;const be=ot;let Ne=0;for(;ot<yt;++ot){const pt=Be?yt-ot-1:ot,St=o*m(C,r[pt],S);if(e+i<t&&V+ee<a+Ne+St/2)break;Ne+=St}if(ot===be)continue;const tt=Be?r.substring(yt-be,yt-ot):r.substring(be,ot);ne=ee===0?0:(a+Ne/2-V)/ee;const lt=vf(j,K,ne),It=vf(Q,z,ne);qe.push([lt,It,Ne/2,nt,tt]),a+=Ne}return qe}class YO{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(n3(),{get:(e,t)=>{if(typeof n3()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,i)=>(this.push_(t,i),!0)})}push_(...e){const t=this.instructions_,i=this.zIndex+this.offset_;t[i]||(t[i]=[]),t[i].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let i=0,r=t.length;i<r;++i){const a=t[i];if(typeof a=="function"){a(e);continue}const l=t[++i];if(typeof e[a]=="function")e[a](...l);else{if(typeof l=="function"){e[a]=l(e);continue}e[a]=l}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const ky=bm(),c1=[],S0=[],w0=[],h1=[];function U9(n){return n[3].declutterBox}const L9=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function rM(n,e){return e==="start"?e=L9.test(n)?"right":"left":e==="end"&&(e=L9.test(n)?"left":"right"),u3[e]}function ote(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}function ate(n,e,t){return t%2===0&&(n+=e),n}class ste{constructor(e,t,i,r,a){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Yd(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=a?new YO:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,i,r){const a=e+t+i+r;if(this.labels_[a])return this.labels_[a];const l=r?this.strokeStates[r]:null,o=i?this.fillStates[i]:null,m=this.textStates[t],C=this.pixelRatio,S=[m.scale[0]*C,m.scale[1]*C],O=m.justify?u3[m.justify]:rM(Array.isArray(e)?e[0]:e,m.textAlign||O_),U=r&&l.lineWidth?l.lineWidth:0,K=Array.isArray(e)?e:String(e).split(`
`).reduce(ote,[]),{width:z,height:j,widths:Q,heights:ee,lineWidths:V}=cee(m,K),ae=z+U,ne=[],Z=(ae+2)*S[0],oe=(j+U)*S[1],W={width:Z<0?Math.floor(Z):Math.ceil(Z),height:oe<0?Math.floor(oe):Math.ceil(oe),contextInstructions:ne};(S[0]!=1||S[1]!=1)&&ne.push("scale",S),r&&(ne.push("strokeStyle",l.strokeStyle),ne.push("lineWidth",U),ne.push("lineCap",l.lineCap),ne.push("lineJoin",l.lineJoin),ne.push("miterLimit",l.miterLimit),ne.push("setLineDash",[l.lineDash]),ne.push("lineDashOffset",l.lineDashOffset)),i&&ne.push("fillStyle",o.fillStyle),ne.push("textBaseline","middle"),ne.push("textAlign","center");const ue=.5-O;let ge=O*ae+ue*U;const ye=[],Me=[];let Be=0,we=0,qe=0,xe=0,ze;for(let ot=0,yt=K.length;ot<yt;ot+=2){const nt=K[ot];if(nt===`
`){we+=Be,Be=0,ge=O*ae+ue*U,++xe;continue}const be=K[ot+1]||m.font;be!==ze&&(r&&ye.push("font",be),i&&Me.push("font",be),ze=be),Be=Math.max(Be,ee[qe]);const Ne=[nt,ge+ue*Q[qe]+O*(Q[qe]-V[xe]),.5*(U+Be)+we];ge+=Q[qe],r&&ye.push("strokeText",Ne),i&&Me.push("fillText",Ne),++qe}return Array.prototype.push.apply(ne,ye),Array.prototype.push.apply(ne,Me),this.labels_[a]=W,W}replayTextBackground_(e,t,i,r,a,l,o){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,a),e.lineTo.apply(e,t),l&&(this.alignAndScaleFill_=l[2],e.fillStyle=l[1],this.fill_(e)),o&&(this.setStrokeStyle_(e,o),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,r,a,l,o,m,C,S,O,U,K,z,j,Q){o*=U[0],m*=U[1];let ee=i-o,V=r-m;const ae=a+C>e?e-C:a,ne=l+S>t?t-S:l,Z=z[3]+ae*U[0]+z[1],oe=z[0]+ne*U[1]+z[2],W=ee-z[3],ue=V-z[0];(j||O!==0)&&(c1[0]=W,h1[0]=W,c1[1]=ue,S0[1]=ue,S0[0]=W+Z,w0[0]=S0[0],w0[1]=ue+oe,h1[1]=w0[1]);let ge;return O!==0?(ge=Jp(Yd(),i,r,1,1,O,-i,-r),ec(ge,c1),ec(ge,S0),ec(ge,w0),ec(ge,h1),U0(Math.min(c1[0],S0[0],w0[0],h1[0]),Math.min(c1[1],S0[1],w0[1],h1[1]),Math.max(c1[0],S0[0],w0[0],h1[0]),Math.max(c1[1],S0[1],w0[1],h1[1]),ky)):U0(Math.min(W,W+Z),Math.min(ue,ue+oe),Math.max(W,W+Z),Math.max(ue,ue+oe),ky),K&&(ee=Math.round(ee),V=Math.round(V)),{drawImageX:ee,drawImageY:V,drawImageW:ae,drawImageH:ne,originX:C,originY:S,declutterBox:{minX:ky[0],minY:ky[1],maxX:ky[2],maxY:ky[3],value:Q},canvasTransform:ge,scale:U}}replayImageOrLabel_(e,t,i,r,a,l,o){const m=!!(l||o),C=r.declutterBox,S=o?o[2]*r.scale[0]/2:0;return C.minX-S<=t[0]&&C.maxX+S>=0&&C.minY-S<=t[1]&&C.maxY+S>=0&&(m&&this.replayTextBackground_(e,c1,S0,w0,h1,l,o),hee(e,r.canvasTransform,a,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const i=ec(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;e.save(),e.translate(i[0]%r,i[1]%r),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,i,r){const a=this.textStates[t],l=this.createLabel(e,t,r,i),o=this.strokeStates[i],m=this.pixelRatio,C=rM(Array.isArray(e)?e[0]:e,a.textAlign||O_),S=u3[a.textBaseline||i3],O=o&&o.lineWidth?o.lineWidth:0,U=l.width/m-2*a.scale[0],K=C*U+2*(.5-C)*O,z=S*l.height/m+2*(.5-S)*O;return{label:l,anchorX:K,anchorY:z}}execute_(e,t,i,r,a,l,o,m){const C=this.zIndexContext_;let S;this.pixelCoordinates_&&F1(i,this.renderedTransform_)?S=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),S=P1(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),uX(this.renderedTransform_,i));let O=0;const U=r.length;let K=0,z,j,Q,ee,V,ae,ne,Z,oe,W,ue,ge,ye,Me=0,Be=0;const we=this.coordinateCache_,qe=this.viewRotation_,xe=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,ze={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:qe},ot=this.instructions!=r||this.overlaps?0:200;let yt,nt,be,Ne;for(;O<U;){const tt=r[O];switch(tt[0]){case Wr.BEGIN_GEOMETRY:yt=tt[1],Ne=tt[3],yt.getGeometry()?o!==void 0&&!uu(o,Ne.getExtent())?O=tt[2]+1:++O:O=tt[2],C&&(C.zIndex=tt[4]);break;case Wr.BEGIN_PATH:Me>ot&&(this.fill_(e),Me=0),Be>ot&&(e.stroke(),Be=0),!Me&&!Be&&(e.beginPath(),V=NaN,ae=NaN),++O;break;case Wr.CIRCLE:K=tt[1];const It=S[K],pt=S[K+1],St=S[K+2],Rt=S[K+3],Le=St-It,Pe=Rt-pt,Re=Math.sqrt(Le*Le+Pe*Pe);e.moveTo(It+Re,pt),e.arc(It,pt,Re,0,2*Math.PI,!0),++O;break;case Wr.CLOSE_PATH:e.closePath(),++O;break;case Wr.CUSTOM:K=tt[1],z=tt[2];const He=tt[3],bt=tt[4],vt=tt[5];ze.geometry=He,ze.feature=yt,O in we||(we[O]=[]);const Ot=we[O];vt?vt(S,K,z,2,Ot):(Ot[0]=S[K],Ot[1]=S[K+1],Ot.length=2),C&&(C.zIndex=tt[6]),bt(Ot,ze),++O;break;case Wr.DRAW_IMAGE:K=tt[1],z=tt[2],oe=tt[3],j=tt[4],Q=tt[5];let qt=tt[6];const Kt=tt[7],on=tt[8],Jn=tt[9],Wt=tt[10];let $n=tt[11];const On=tt[12];let Bn=tt[13];ee=tt[14]||"declutter";const In=tt[15];if(!oe&&tt.length>=20){W=tt[19],ue=tt[20],ge=tt[21],ye=tt[22];const Mn=this.drawLabelWithPointPlacement_(W,ue,ge,ye);oe=Mn.label,tt[3]=oe;const ii=tt[23];j=(Mn.anchorX-ii)*this.pixelRatio,tt[4]=j;const Wn=tt[24];Q=(Mn.anchorY-Wn)*this.pixelRatio,tt[5]=Q,qt=oe.height,tt[6]=qt,Bn=oe.width,tt[13]=Bn}let Bi;tt.length>25&&(Bi=tt[25]);let ei,Kn,Ge;tt.length>17?(ei=tt[16],Kn=tt[17],Ge=tt[18]):(ei=Og,Kn=null,Ge=null),Wt&&xe?$n+=qe:!Wt&&!xe&&($n-=qe);let de=0;for(;K<z;K+=2){if(Bi&&Bi[de++]<Bn/this.pixelRatio)continue;const Mn=this.calculateImageOrLabelDimensions_(oe.width,oe.height,S[K],S[K+1],Bn,qt,j,Q,on,Jn,$n,On,a,ei,!!Kn||!!Ge,yt),ii=[e,t,oe,Mn,Kt,Kn,Ge];if(m){let Wn,qi,er;if(In){const ti=z-K;if(!In[ti]){In[ti]={args:ii,declutterMode:ee};continue}const Wi=In[ti];Wn=Wi.args,qi=Wi.declutterMode,delete In[ti],er=U9(Wn)}let wi,hi;if(Wn&&(qi!=="declutter"||!m.collides(er))&&(wi=!0),(ee!=="declutter"||!m.collides(Mn.declutterBox))&&(hi=!0),qi==="declutter"&&ee==="declutter"){const ti=wi&&hi;wi=ti,hi=ti}wi&&(qi!=="none"&&m.insert(er),this.replayImageOrLabel_.apply(this,Wn)),hi&&(ee!=="none"&&m.insert(Mn.declutterBox),this.replayImageOrLabel_.apply(this,ii))}else this.replayImageOrLabel_.apply(this,ii)}++O;break;case Wr.DRAW_CHARS:const re=tt[1],le=tt[2],me=tt[3],Te=tt[4];ye=tt[5];const We=tt[6],dt=tt[7],Ye=tt[8];ge=tt[9];const De=tt[10];W=tt[11],Array.isArray(W)&&(W=W.reduce(ate,"")),ue=tt[12];const Ze=[tt[13],tt[13]];ee=tt[14]||"declutter";const g=tt[15],gt=this.textStates[ue],ht=gt.font,kt=[gt.scale[0]*dt,gt.scale[1]*dt];let it;ht in this.widths_?it=this.widths_[ht]:(it={},this.widths_[ht]=it);const en=QO(S,re,le,2),Dn=Math.abs(kt[0])*x9(ht,W,it);if(Te||Dn<=en){const Mn=this.textStates[ue].textAlign,ii=(en-Dn)*rM(W,Mn),Wn=rte(S,re,le,2,W,ii,We,Math.abs(kt[0]),x9,ht,it,xe?0:this.viewRotation_,g);e:if(Wn){const qi=[];let er,wi,hi,ti,Wi;if(ge)for(er=0,wi=Wn.length;er<wi;++er){Wi=Wn[er],hi=Wi[4],ti=this.createLabel(hi,ue,"",ge),j=Wi[2]+(kt[0]<0?-De:De),Q=me*ti.height+(.5-me)*2*De*kt[1]/kt[0]-Ye;const Sn=this.calculateImageOrLabelDimensions_(ti.width,ti.height,Wi[0],Wi[1],ti.width,ti.height,j,Q,0,0,Wi[3],Ze,!1,Og,!1,yt);if(m&&ee==="declutter"&&m.collides(Sn.declutterBox))break e;qi.push([e,t,ti,Sn,1,null,null])}if(ye)for(er=0,wi=Wn.length;er<wi;++er){Wi=Wn[er],hi=Wi[4],ti=this.createLabel(hi,ue,ye,""),j=Wi[2],Q=me*ti.height-Ye;const Sn=this.calculateImageOrLabelDimensions_(ti.width,ti.height,Wi[0],Wi[1],ti.width,ti.height,j,Q,0,0,Wi[3],Ze,!1,Og,!1,yt);if(m&&ee==="declutter"&&m.collides(Sn.declutterBox))break e;qi.push([e,t,ti,Sn,1,null,null])}m&&ee!=="none"&&m.load(qi.map(U9));for(let Sn=0,lo=qi.length;Sn<lo;++Sn)this.replayImageOrLabel_.apply(this,qi[Sn])}}++O;break;case Wr.END_GEOMETRY:if(l!==void 0){yt=tt[1];const Mn=l(yt,Ne,ee);if(Mn)return Mn}++O;break;case Wr.FILL:ot?Me++:this.fill_(e),++O;break;case Wr.MOVE_TO_LINE_TO:for(K=tt[1],z=tt[2],nt=S[K],be=S[K+1],e.moveTo(nt,be),V=nt+.5|0,ae=be+.5|0,K+=2;K<z;K+=2)nt=S[K],be=S[K+1],ne=nt+.5|0,Z=be+.5|0,(K==z-2||ne!==V||Z!==ae)&&(e.lineTo(nt,be),V=ne,ae=Z);++O;break;case Wr.SET_FILL_STYLE:this.alignAndScaleFill_=tt[2],Me&&(this.fill_(e),Me=0,Be&&(e.stroke(),Be=0)),e.fillStyle=tt[1],++O;break;case Wr.SET_STROKE_STYLE:Be&&(e.stroke(),Be=0),this.setStrokeStyle_(e,tt),++O;break;case Wr.STROKE:ot?Be++:e.stroke(),++O;break;default:++O;break}}Me&&this.fill_(e),Be&&e.stroke()}execute(e,t,i,r,a,l){this.viewRotation_=r,this.execute_(e,t,i,this.instructions,a,void 0,void 0,l)}executeHitDetection(e,t,i,r,a){return this.viewRotation_=i,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,r,a)}}const Mg=["Polygon","Circle","LineString","Image","Text","Default"],c3=["Image","Text"],lte=Mg.filter(n=>!c3.includes(n));class Mz{constructor(e,t,i,r,a,l,o){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=l,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Yd(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(a,o)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e,t){for(const i in e){let r=this.executorsByZIndex_[i];r===void 0&&(r={},this.executorsByZIndex_[i]=r);const a=e[i];for(const l in a){const o=a[l];r[l]=new ste(this.resolution_,this.pixelRatio_,this.overlaps_,o,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let r=0,a=e.length;r<a;++r)if(e[r]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,r,a,l){r=Math.round(r);const o=r*2+1,m=Jp(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-i,-e[0],-e[1]),C=!this.hitDetectionContext_;C&&(this.hitDetectionContext_=jA(o,o));const S=this.hitDetectionContext_;S.canvas.width!==o||S.canvas.height!==o?(S.canvas.width=o,S.canvas.height=o):C||S.clearRect(0,0,o,o);let O;this.renderBuffer_!==void 0&&(O=bm(),JC(O,e),D1(O,t*(this.renderBuffer_+r),O));const U=Ate(r);let K;function z(Z,oe,W){const ue=S.getImageData(0,0,o,o).data;for(let ge=0,ye=U.length;ge<ye;ge++)if(ue[U[ge]]>0){if(!l||W==="none"||K!=="Image"&&K!=="Text"||l.includes(Z)){const Me=(U[ge]-3)/4,Be=r-Me%o,we=r-(Me/o|0),qe=a(Z,oe,Be*Be+we*we);if(qe)return qe}S.clearRect(0,0,o,o);break}}const j=Object.keys(this.executorsByZIndex_).map(Number);j.sort($p);let Q,ee,V,ae,ne;for(Q=j.length-1;Q>=0;--Q){const Z=j[Q].toString();for(V=this.executorsByZIndex_[Z],ee=Mg.length-1;ee>=0;--ee)if(K=Mg[ee],ae=V[K],ae!==void 0&&(ne=ae.executeHitDetection(S,m,i,z,O),ne))return ne}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],r=t[1],a=t[2],l=t[3],o=[i,r,i,l,a,l,a,r];return P1(o,0,8,2,e,o),o}isEmpty(){return U1(this.executorsByZIndex_)}execute(e,t,i,r,a,l,o){const m=Object.keys(this.executorsByZIndex_).map(Number);m.sort(o?oZ:$p),l=l||Mg;const C=Mg.length;for(let S=0,O=m.length;S<O;++S){const U=m[S].toString(),K=this.executorsByZIndex_[U];for(let z=0,j=l.length;z<j;++z){const Q=l[z],ee=K[Q];if(ee!==void 0){const V=o===null?void 0:ee.getZIndexContext(),ae=V?V.getContext():e,ne=this.maxExtent_&&Q!=="Image"&&Q!=="Text";if(ne&&(ae.save(),this.clip(ae,i)),!V||Q==="Text"||Q==="Image"?ee.execute(ae,t,i,r,a,o):V.pushFunction(Z=>ee.execute(Z,t,i,r,a,o)),ne&&ae.restore(),V){V.offset();const Z=m[S]*C+Mg.indexOf(Q);this.deferredZIndexContexts_[Z]||(this.deferredZIndexContexts_[Z]=[]),this.deferredZIndexContexts_[Z].push(V)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort($p);for(let i=0,r=t.length;i<r;++i)e[t[i]].forEach(a=>{a.draw(this.renderedContext_),a.clear()}),e[t[i]].length=0}}const oM={};function Ate(n){if(oM[n]!==void 0)return oM[n];const e=n*2+1,t=n*n,i=new Array(t+1);for(let a=0;a<=n;++a)for(let l=0;l<=n;++l){const o=a*a+l*l;if(o>t)break;let m=i[o];m||(m=[],i[o]=m),m.push(((n+a)*e+(n+l))*4+3),a>0&&m.push(((n-a)*e+(n+l))*4+3),l>0&&(m.push(((n+a)*e+(n-l))*4+3),a>0&&m.push(((n-a)*e+(n-l))*4+3))}const r=[];for(let a=0,l=i.length;a<l;++a)i[a]&&r.push(...i[a]);return oM[n]=r,r}const Mf=.5;function Sz(n,e,t,i,r,a,l,o,m){const C=m?pO(r):r,S=n[0]*Mf,O=n[1]*Mf,U=jA(S,O);U.imageSmoothingEnabled=!1;const K=U.canvas,z=new Uee(U,Mf,r,null,l,o,m?cb(lX(),m):null),j=t.length,Q=Math.floor((256*256*256-1)/j),ee={};for(let ae=1;ae<=j;++ae){const ne=t[ae-1],Z=ne.getStyleFunction()||i;if(!Z)continue;let oe=Z(ne,a);if(!oe)continue;Array.isArray(oe)||(oe=[oe]);const ue=(ae*Q).toString(16).padStart(7,"#00000");for(let ge=0,ye=oe.length;ge<ye;++ge){const Me=oe[ge],Be=Me.getGeometryFunction()(ne);if(!Be||!uu(C,Be.getExtent()))continue;const we=Me.clone(),qe=we.getFill();qe&&qe.setColor(ue);const xe=we.getStroke();xe&&(xe.setColor(ue),xe.setLineDash(null)),we.setText(void 0);const ze=Me.getImage();if(ze){const be=ze.getImageSize();if(!be)continue;const Ne=jA(be[0],be[1],void 0,{alpha:!1}),tt=Ne.canvas;Ne.fillStyle=ue,Ne.fillRect(0,0,tt.width,tt.height),we.setImage(new r3({img:tt,anchor:ze.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ze.getOrigin(),opacity:1,size:ze.getSize(),scale:ze.getScale(),rotation:ze.getRotation(),rotateWithView:ze.getRotateWithView()}))}const ot=we.getZIndex()||0;let yt=ee[ot];yt||(yt={},ee[ot]=yt,yt.Polygon=[],yt.Circle=[],yt.LineString=[],yt.Point=[]);const nt=Be.getType();if(nt==="GeometryCollection"){const be=Be.getGeometriesArrayRecursive();for(let Ne=0,tt=be.length;Ne<tt;++Ne){const lt=be[Ne];yt[lt.getType().replace("Multi","")].push(lt,we)}}else yt[nt.replace("Multi","")].push(Be,we)}}const V=Object.keys(ee).map(Number).sort($p);for(let ae=0,ne=V.length;ae<ne;++ae){const Z=ee[V[ae]];for(const oe in Z){const W=Z[oe];for(let ue=0,ge=W.length;ue<ge;ue+=2){z.setStyle(W[ue+1]);for(let ye=0,Me=e.length;ye<Me;++ye)z.setTransform(e[ye]),z.drawGeometry(W[ue])}}}return U.getImageData(0,0,K.width,K.height)}function wz(n,e,t){const i=[];if(t){const r=Math.floor(Math.round(n[0])*Mf),a=Math.floor(Math.round(n[1])*Mf),l=(GA(r,0,t.width-1)+GA(a,0,t.height-1)*t.width)*4,o=t.data[l],m=t.data[l+1],S=t.data[l+2]+256*(m+256*o),O=Math.floor((256*256*256-1)/e.length);S&&S%O===0&&i.push(e[S/O-1])}return i}const ute=5;class cte extends Ab{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=ute}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Co()}getData(e){return null}prepareFrame(e){return Co()}renderFrame(e,t){return Co()}forEachFeatureAtCoordinate(e,t,i,r,a){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===hr.LOADED||t.getState()===hr.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=hr.LOADED&&t!=hr.ERROR&&e.addEventListener(mo.CHANGE,this.boundHandleImageChange_),t==hr.IDLE&&(e.load(),t=e.getState()),t==hr.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const F9=[];let sv=null;function hte(){sv=jA(1,1,void 0,{willReadFrequently:!0})}class qO extends cte{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Yd(),this.pixelTransform=Yd(),this.inversePixelTransform=Yd(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,i){sv||hte(),sv.clearRect(0,0,1,1);let r;try{sv.drawImage(e,t,i,1,1,0,0,1,1),r=sv.getImageData(0,0,1,1).data}catch{return sv=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const r=this.getLayer().getClassName();let a,l;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&F1(Dv(e.style.backgroundColor),Dv(i)))){const o=e.firstElementChild;o instanceof HTMLCanvasElement&&(l=o.getContext("2d"))}if(l&&mX(l.canvas.style.transform,t)?(this.container=e,this.context=l,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){a=document.createElement("div"),a.className=r;let o=a.style;o.position="absolute",o.width="100%",o.height="100%",l=jA();const m=l.canvas;a.appendChild(m),o=m.style,o.position="absolute",o.left="0",o.transformOrigin="top left",this.container=a,this.context=l}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const r=G0(i),a=a2(i),l=o2(i),o=r2(i);ec(t.coordinateToPixelTransform,r),ec(t.coordinateToPixelTransform,a),ec(t.coordinateToPixelTransform,l),ec(t.coordinateToPixelTransform,o);const m=this.inversePixelTransform;ec(m,r),ec(m,a),ec(m,l),ec(m,o),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.clip()}prepareContainer(e,t){const i=e.extent,r=e.viewState.resolution,a=e.viewState.rotation,l=e.pixelRatio,o=Math.round(as(i)/r*l),m=Math.round(nc(i)/r*l);Jp(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/l,1/l,a,-o/2,-m/2),kF(this.inversePixelTransform,this.pixelTransform);const C=fX(this.pixelTransform);if(this.useContainer(t,C,this.getBackground(e)),!this.containerReused){const S=this.context.canvas;S.width!=o||S.height!=m?(S.width=o,S.height=m):this.context.clearRect(0,0,o,m),C!==S.style.transform&&(S.style.transform=C)}}dispatchRenderEvent_(e,t,i){const r=this.getLayer();if(r.hasListener(e)){const a=new fz(e,this.inversePixelTransform,i,t);r.dispatchEvent(a)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(gm.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(gm.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new YO),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(gm.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(gm.POSTRENDER,this.context,e))}getRenderTransform(e,t,i,r,a,l,o){const m=a/2,C=l/2,S=r/t,O=-S,U=-e[0]+o,K=-e[1];return Jp(this.tempTransform,m,C,S,O,-i,U,K)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class dte extends qO{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=bm(),this.wrappedRenderedExtent_=bm(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,i){const r=t.extent,a=t.viewState,l=a.center,o=a.resolution,m=a.projection,C=a.rotation,S=m.getExtent(),O=this.getLayer().getSource(),U=this.getLayer().getDeclutter(),K=t.pixelRatio,z=t.viewHints,j=!(z[vA.ANIMATING]||z[vA.INTERACTING]),Q=this.context,ee=Math.round(as(r)/o*K),V=Math.round(nc(r)/o*K),ae=O.getWrapX()&&m.canWrapX(),ne=ae?as(S):null,Z=ae?Math.ceil((r[2]-S[2])/ne)+1:1;let oe=ae?Math.floor((r[0]-S[0])/ne):0;do{let W=this.getRenderTransform(l,o,0,K,ee,V,oe*ne);t.declutter&&(W=W.slice(0)),e.execute(Q,[Q.canvas.width,Q.canvas.height],W,C,j,i===void 0?Mg:i?c3:lte,i?U&&t.declutter[U]:void 0)}while(++oe<Z)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=jA(this.context.canvas.width,this.context.canvas.height,F9))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,db(this.context),F9.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex];this.opacity_=i.opacity;const r=e.viewState;this.prepareContainer(e,t);const a=this.context,l=this.replayGroup_;let o=l&&!l.isEmpty();if(!o&&!(this.getLayer().hasListener(gm.PRERENDER)||this.getLayer().hasListener(gm.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(a,e),r.projection,this.clipped_=!1,o&&i.extent&&this.clipping){const m=Qp(i.extent);o=uu(m,e.extent),this.clipped_=o&&!Wp(m,e.extent),this.clipped_&&this.clipUnrotated(a,e,m)}return o&&this.renderWorlds(l,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&a.restore(),this.postRender(a,e),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=this.frameState.size.slice(),r=this.renderedCenter_,a=this.renderedResolution_,l=this.renderedRotation_,o=this.renderedProjection_,m=this.wrappedRenderedExtent_,C=this.getLayer(),S=[],O=i[0]*Mf,U=i[1]*Mf;S.push(this.getRenderTransform(r,a,l,Mf,O,U,0).slice());const K=C.getSource(),z=o.getExtent();if(K.getWrapX()&&o.canWrapX()&&!Wp(z,m)){let j=m[0];const Q=as(z);let ee=0,V;for(;j<z[0];)--ee,V=Q*ee,S.push(this.getRenderTransform(r,a,l,Mf,O,U,V).slice()),j+=Q;for(ee=0,j=m[2];j>z[2];)++ee,V=Q*ee,S.push(this.getRenderTransform(r,a,l,Mf,O,U,V).slice()),j-=Q}this.hitDetectionImageData_=Sz(i,S,this.renderedFeatures_,C.getStyleFunction(),m,a,l,nB(a,this.renderedPixelRatio_),null)}t(wz(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,i,r,a){if(!this.replayGroup_)return;const l=t.viewState.resolution,o=t.viewState.rotation,m=this.getLayer(),C={},S=function(U,K,z){const j=Io(U),Q=C[j];if(Q){if(Q!==!0&&z<Q.distanceSq){if(z===0)return C[j]=!0,a.splice(a.lastIndexOf(Q),1),r(U,m,K);Q.geometry=K,Q.distanceSq=z}}else{if(z===0)return C[j]=!0,r(U,m,K);a.push(C[j]={feature:U,layer:m,geometry:K,distanceSq:z,callback:r})}},O=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,l,o,i,S,O?t.declutter?.[O]?.all().map(U=>U.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const r=e.viewHints[vA.ANIMATING],a=e.viewHints[vA.INTERACTING],l=t.getUpdateWhileAnimating(),o=t.getUpdateWhileInteracting();if(this.ready&&!l&&r||!o&&a)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const m=e.extent,C=e.viewState,S=C.projection,O=C.resolution,U=e.pixelRatio,K=t.getRevision(),z=t.getRenderBuffer();let j=t.getRenderOrder();j===void 0&&(j=Fee);const Q=C.center.slice(),ee=D1(m,z*O),V=ee.slice(),ae=[ee.slice()],ne=S.getExtent();if(i.getWrapX()&&S.canWrapX()&&!Wp(ne,e.extent)){const qe=as(ne),xe=Math.max(as(ee)/2,qe);ee[0]=ne[0]-xe,ee[2]=ne[2]+xe,cO(Q,S);const ze=_F(ae[0],S);ze[0]<ne[0]&&ze[2]<ne[2]?ae.push([ze[0]+qe,ze[1],ze[2]+qe,ze[3]]):ze[0]>ne[0]&&ze[2]>ne[2]&&ae.push([ze[0]-qe,ze[1],ze[2]-qe,ze[3]])}if(this.ready&&this.renderedResolution_==O&&this.renderedRevision_==K&&this.renderedRenderOrder_==j&&this.renderedFrameDeclutter_===!!e.declutter&&Wp(this.wrappedRenderedExtent_,ee))return F1(this.renderedExtent_,V)||(this.hitDetectionImageData_=null,this.renderedExtent_=V),this.renderedCenter_=Q,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const Z=new xz(Cz(O,U),ee,O,U);let oe;for(let qe=0,xe=ae.length;qe<xe;++qe)i.loadFeatures(ae[qe],O,S);const W=nB(O,U);let ue=!0;const ge=(qe,xe)=>{let ze;const ot=qe.getStyleFunction()||t.getStyleFunction();if(ot&&(ze=ot(qe,O)),ze){const yt=this.renderFeature(qe,W,ze,Z,oe,this.getLayer().getDeclutter(),xe);ue=ue&&!yt}},ye=pO(ee),Me=i.getFeaturesInExtent(ye);j&&Me.sort(j);for(let qe=0,xe=Me.length;qe<xe;++qe)ge(Me[qe],qe);this.renderedFeatures_=Me,this.ready=ue;const Be=Z.finish(),we=new Mz(ee,O,U,i.getOverlaps(),Be,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=O,this.renderedRevision_=K,this.renderedRenderOrder_=j,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=V,this.wrappedRenderedExtent_=ee,this.renderedCenter_=Q,this.renderedProjection_=S,this.renderedPixelRatio_=U,this.replayGroup_=we,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,r,a,l,o){if(!i)return!1;let m=!1;if(Array.isArray(i))for(let C=0,S=i.length;C<S;++C)m=A3(r,e,i[C],t,this.boundHandleStyleImageChange_,a,l,o)||m;else m=A3(r,e,i,t,this.boundHandleStyleImageChange_,a,l,o);return m}}class HO extends WO{constructor(e){super(e)}createRenderer(){return new dte(this)}}class fte extends NO{constructor(e,t,i,r,a){const l=a!==void 0?hr.IDLE:hr.LOADED;super(e,t,i,l),this.loader_=a!==void 0?a:null,this.canvas_=r,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=hr.ERROR):this.state=hr.LOADED,this.changed()}load(){this.state==hr.IDLE&&(this.state=hr.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}class Cb extends lb{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(mo.CHANGE)}release(){this.setState(Pi.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==Pi.EMPTY){if(this.state!==Pi.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){Co()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const r=t-i+1e3/60;return r>=this.transition_?1:xF(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class Ez extends Cb{constructor(e,t,i,r,a,l){super(e,t,l),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=a}getImage(){return this.image_}setImage(e){this.image_=e,this.state=Pi.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Pi.ERROR,this.unlistenImage_(),this.image_=mte(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=Pi.LOADED:this.state=Pi.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==Pi.ERROR&&(this.state=Pi.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Pi.IDLE&&(this.state=Pi.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=nee(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function mte(){const n=jA(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}const Ph={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class pte extends up{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+FX,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Ph.ELEMENT,this.handleElementChanged),this.addChangeListener(Ph.MAP,this.handleMapChanged),this.addChangeListener(Ph.OFFSET,this.handleOffsetChanged),this.addChangeListener(Ph.POSITION,this.handlePositionChanged),this.addChangeListener(Ph.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(Ph.ELEMENT)}getId(){return this.id}getMap(){return this.get(Ph.MAP)||null}getOffset(){return this.get(Ph.OFFSET)}getPosition(){return this.get(Ph.POSITION)}getPositioning(){return this.get(Ph.POSITIONING)}handleElementChanged(){YF(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),Bl(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=Va(e,I0.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(Ph.ELEMENT,e)}setMap(e){this.set(Ph.MAP,e)}setOffset(e){this.set(Ph.OFFSET,e)}setPosition(e){this.set(Ph.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(Ph.POSITION))return;const i=this.getRect(t.getTargetElement(),t.getSize()),r=this.getElement(),a=this.getRect(r,[NX(r),GX(r)]);e=e||{};const l=e.margin===void 0?20:e.margin;if(!Wp(i,a)){const o=a[0]-i[0],m=i[2]-a[2],C=a[1]-i[1],S=i[3]-a[3],O=[0,0];if(o<0?O[0]=o-l:m<0&&(O[0]=Math.abs(m)+l),C<0?O[1]=C-l:S<0&&(O[1]=Math.abs(S)+l),O[0]!==0||O[1]!==0){const U=t.getView().getCenterInternal(),K=t.getPixelFromCoordinateInternal(U);if(!K)return;const z=[K[0]+O[0],K[1]+O[1]],j=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(z),duration:j.duration,easing:j.easing})}}}getRect(e,t){const i=e.getBoundingClientRect(),r=i.left+window.pageXOffset,a=i.top+window.pageYOffset;return[r,a,r+t[0],a+t[1]]}setPositioning(e){this.set(Ph.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const i=e.getPixelFromCoordinate(t),r=e.getSize();this.updateRenderedPosition(i,r)}updateRenderedPosition(e,t){const i=this.element.style,r=this.getOffset(),a=this.getPositioning();this.setVisible(!0);const l=`${e[0]+r[0]}px`,o=`${e[1]+r[1]}px`;let m="0%",C="0%";a=="bottom-right"||a=="center-right"||a=="top-right"?m="-100%":(a=="bottom-center"||a=="center-center"||a=="top-center")&&(m="-50%"),a=="bottom-left"||a=="bottom-center"||a=="bottom-right"?C="-100%":(a=="center-left"||a=="center-center"||a=="center-right")&&(C="-50%");const S=`translate(${m}, ${C}) translate(${l}, ${o})`;this.rendered.transform_!=S&&(this.rendered.transform_=S,i.transform=S)}getOptions(){return this.options}}class VO{constructor(e,t,i,r){this.minX=e,this.maxX=t,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Dy(n,e,t,i,r){return r!==void 0?(r.minX=n,r.maxX=e,r.minY=t,r.maxY=i,r):new VO(n,e,t,i)}const z9=[];class gte extends Cb{constructor(e,t,i,r,a){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=r.bind(void 0,this),this.removeSourceTiles_=a,this.wrappedTileCoord=i}getContext(){return this.context_||(this.context_=jA(1,1,z9)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=Io(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(db(this.context_),z9.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let Bz=class extends Cb{constructor(e,t,i,r,a,l){super(e,t,l),this.extent=null,this.format_=r,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=a,this.url_=i,this.key=i}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==Pi.IDLE&&(this.setState(Pi.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(Pi.ERROR)}setFeatures(e){this.features_=e,this.setState(Pi.LOADED)}setLoader(e){this.loader_=e}};const Oz="https://api.mapbox.com";function $O(n){const e="mapbox://";return n.indexOf(e)!==0?"":n.slice(e.length)}function yte(n,e,t){if(typeof n=="string")return[{id:"default",url:N9(n,e,t)}];for(const i of n)i.url=N9(i.url,e,t);return n}function N9(n,e,t){const i=$O(n);if(!i)return decodeURI(new URL(n,t).href);const r="sprites/";if(i.indexOf(r)!==0)throw new Error(`unexpected sprites url: ${n}`);const a=i.slice(r.length);return`${Oz}/styles/v1/${a}/sprite?access_token=${e}`}function h3(n,e){const t=$O(n);if(!t)return decodeURI(new URL(n,location.href).href);const i="styles/";if(t.indexOf(i)!==0)throw new Error(`unexpected style url: ${n}`);const r=t.slice(i.length);return`${Oz}/styles/v1/${r}?&access_token=${e}`}const vte=["a","b","c","d"];function wx(n,e,t,i){const r=new URL(n,i||location.href),a=$O(n);if(!a)return e?(r.searchParams.has(t)||r.searchParams.set(t,e),[decodeURI(r.href)]):[decodeURI(r.href)];if(a==="mapbox.satellite"){const l=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${a}/{z}/{x}/{y}${l}.webp?access_token=${e}`]}return vte.map(l=>`https://${l}.tiles.mapbox.com/v4/${a}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const ep=Object.freeze({}),G9={},j9={};let Cte=0;function ZO(n){return n.id||(n.id=Cte++),n.id}function _te(n,e){return ZO(n)+"."+Io(e)}function Iz(n){let e=G9[n.id];return e||(e={},G9[ZO(n)]=e),e}function bte(n){let e=j9[n.id];return e||(e={},j9[ZO(n)]=e),e}function aM(n){return n*Math.PI/180}const Xp=function(){const n=[];for(let e=78271.51696402048;n.length<=24;e/=2)n.push(e);return n}();function b2(n,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(n,e);const t=document.createElement("canvas");return t.width=n,t.height=e,t}function XO(n,e){let t=0;const i=e.length;for(;t<i;++t)if(e[t]<n&&t+1<i){const a=e[t]/e[t+1];return t+Math.log(e[t]/n)/Math.log(a)}return i-1}function UC(n,e){const t=Math.floor(n),i=Math.pow(2,n-t);return e[t]/i}const Ry={};function Kv(n,e,t={},i){if(e in Ry)return i&&(i.url=Ry[e][0].url),Ry[e][1];const r=t.transformRequest&&t.transformRequest(e,n)||e,a=function(m){return delete Ry[e],Promise.reject(new Error("Error fetching source "+e))},l=function(m){return delete Ry[e],m.ok?m.json():Promise.reject(new Error("Error fetching source "+e))},o=Tv(()=>r).then(m=>m instanceof Response?(i&&(i.url=m.url),l(m)):(m instanceof Request||(m=new Request(m)),m.headers.get("Accept")||m.headers.set("Accept","application/json"),i&&(i.url=m.url),fetch(m).then(l).catch(a))).catch(a);return Ry[e]=[r,o],o}function Tz(n,e){if(typeof n=="string")if(n.trim().startsWith("{"))try{const t=JSON.parse(n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return n=h3(n,e.accessToken),Kv("Style",n,e);else return Promise.resolve(n)}const W9={};function kz(n,e,t={}){const i=[e,JSON.stringify(n)].toString();let r=W9[i];if(!r||t.transformRequest){let a;t.transformRequest&&(a=(o,m)=>{const C=t.transformRequest&&t.transformRequest(m,"Tiles")||m;if(o instanceof Bz)o.setLoader((S,O,U)=>{const K=function(z){z.arrayBuffer().then(j=>{const ee=o.getFormat().readFeatures(j,{extent:S,featureProjection:U});o.setFeatures(ee)})};Tv(()=>C).then(z=>{if(z instanceof Response)return K(z);fetch(z).then(K).catch(j=>o.setState(Pi.ERROR))}).catch(z=>o.setState(Pi.ERROR))});else{const S=o.getImage();Tv(()=>C).then(O=>{if(typeof O=="string"){S.src=O;return}const U=K=>K.blob().then(z=>{const j=URL.createObjectURL(z);S.addEventListener("load",()=>URL.revokeObjectURL(j)),S.addEventListener("error",()=>URL.revokeObjectURL(j)),S.src=j});if(O instanceof Response)return U(O);fetch(O).then(U).catch(K=>o.setState(Pi.ERROR))}).catch(O=>o.setState(Pi.ERROR))}});const l=n.url;if(l&&!n.tiles){const o=wx(l,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(l.startsWith("mapbox://"))r=Promise.resolve({tileJson:Object.assign({},n,{url:void 0,tiles:o}),tileLoadFunction:a});else{const m={};r=Kv("Source",o[0],t,m).then(function(C){return C.tiles=C.tiles.map(function(S){return C.scheme==="tms"&&(S=S.replace("{y}","{-y}")),wx(S,t.accessToken,t.accessTokenParam||"access_token",m.url)[0]}),Promise.resolve({tileJson:C,tileLoadFunction:a})})}}else n.tiles?(n=Object.assign({},n,{tiles:n.tiles.map(function(o){return n.scheme==="tms"&&(o=o.replace("{y}","{-y}")),wx(o,t.accessToken,t.accessTokenParam||"access_token",e||location.href)[0]})}),r=Promise.resolve({tileJson:Object.assign({},n),tileLoadFunction:a})):r=Promise.reject(new Error("source has no `tiles` nor `url`"));W9[i]=r}return r}function Q9(n,e,t,i){const r=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],a=b2(r[0],r[1]),l=a.getContext("2d");l.drawImage(n,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const o=l.getImageData(0,0,r[0],r[1]);l.globalCompositeOperation="destination-over",l.fillStyle=`rgba(${i.r*255},${i.g*255},${i.b*255},${i.a})`;const m=o.data;for(let C=0,S=o.width;C<S;++C)for(let O=0,U=o.height;O<U;++O){const K=(O*S+C)*4;m[K+3]>0&&l.arc(C,O,t*e.pixelRatio,0,2*Math.PI)}return l.fill(),a}function xte(n,e,t){const i=Math.max(0,Math.min(1,(t-n)/(e-n)));return i*i*(3-2*i)}function Y9(n,e,t){const i=b2(e.width,e.height),r=i.getContext("2d");r.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const a=r.getImageData(0,0,e.width,e.height),l=a.data;for(let o=0,m=a.width;o<m;++o)for(let C=0,S=a.height;C<S;++C){const O=(C*m+o)*4,U=l[O+3]/255,K=.75,z=.1,j=xte(K-z,K+z,U);j>0?(l[O+0]=Math.round(255*t.r*j),l[O+1]=Math.round(255*t.g*j),l[O+2]=Math.round(255*t.b*j),l[O+3]=Math.round(255*j)):l[O+3]=0}return r.putImageData(a,0,0),i}const Mte=Array(256).join(" ");function iB(n,e){if(e>=.05){let t="";const i=n.split(`
`),r=Mte.slice(0,Math.round(e/.1));for(let a=0,l=i.length;a<l;++a)a>0&&(t+=`
`),t+=i[a].split("").join(r);return t}return n}let sM;function Dz(){return sM||(sM=b2(1,1).getContext("2d")),sM}function pg(n,e){return Dz().measureText(n).width+(n.length-1)*e}const d3={};xg.on("propertychange",()=>{for(const n in d3)delete d3[n]});function rB(n,e,t,i){if(n.indexOf(`
`)!==-1){const l=n.split(`
`),o=[];for(let m=0,C=l.length;m<C;++m)o.push(rB(l[m],e,t,i));return o.join(`
`)}const r=t+","+e+","+n+","+i;let a=d3[r];if(!a){const l=n.split(" ");if(l.length>1){const o=Dz();o.font=e;const C=o.measureText("M").width*t;let S="";const O=[];for(let U=0,K=l.length;U<K;++U){const z=l[U],j=S+(S?" ":"")+z;pg(j,i)<=C?S=j:(S&&O.push(S),S=z)}S&&O.push(S);for(let U=0,K=O.length;U<K&&K>1;++U){const z=O[U];if(pg(z,i)<C*.35){const j=U>0?pg(O[U-1],i):1/0,Q=U<K-1?pg(O[U+1],i):1/0;O.splice(U,1),K-=1,j<Q?(O[U-1]+=" "+z,U-=1):O[U]=z+" "+O[U]}}for(let U=0,K=O.length-1;U<K;++U){const z=O[U],j=O[U+1];if(pg(z,i)>C*.7&&pg(j,i)<C*.6){const Q=z.split(" "),ee=Q.pop();pg(ee,i)<C*.2&&(O[U]=Q.join(" "),O[U+1]=ee+" "+j),K-=1}}a=O.join(`
`)}else a=n;a=iB(a,i),d3[r]=a}return a}const Ste=["Arial","Courier New","Times New Roman","Verdana","sans-serif","serif","monospace","cursive","fantasy"],q9={};function wte(n,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){let t;for(let i=0,r=n.length;i<r;++i){const a=n[i];if(a in q9)continue;q9[a]=!0;const o=P6(a,16).split(" ");t||(t=[]),t.push([o.slice(3).join(" ").replace(/"/g,""),o[1],o[0]])}return t&&(async()=>{await document.fonts.ready;for(let i=0,r=t.length;i<r;++i){const a=t[i],l=a[0];if(Ste.includes(l))continue;const o=a[1],m=a[2];if(!(await document.fonts.load(`${m} ${o} 16px "${l}"`)).some(S=>S.family.replace(/^['"]|['"]$/g,"").toLowerCase()===l.toLowerCase()&&S.weight==o&&S.style===m)){const S=e.replace("{font-family}",l.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",l.replace(/ /g,"+")).replace("{fontweight}",o).replace("{-fontstyle}",m.replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",m);if(!document.querySelector('link[href="'+S+'"]')){const O=document.createElement("link");O.href=S,O.rel="stylesheet",document.head.appendChild(O)}}}})(),n}const Ete={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},Bte={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},Ote=function(n,e){const t=$3(n,e);if(t.result==="error")throw new Error(t.value.map(i=>`${i.key}: ${i.message}`).join(", "));return t.value},Ef={zoom:0,distanceFromCenter:0};Sf.register(Y3,{...Sf.definitions,pitch:[{kind:"number"},[],n=>Ef.pitch||90],"distance-from-center":[{kind:"number"},[],n=>Ef.distanceFromCenter||0]});let Xb,lM;function Cr(n,e,t,i,r,a){const l=n.id;r||(r={},console.warn("No functionCache provided to getValue()")),r[l]||(r[l]={});const o=r[l];if(!o[t]){let m=(n[e]||ep)[t];const C=xf[`${e}_${n.type}`][t];m===void 0&&(m=C.default);let S=jv(m);if(!S&&Gv(m)&&(m=XB(m,C),S=!0),S){const O=Ote(m,C);o[t]=O.evaluate.bind(O)}else C.type=="color"&&(m=tl.parse(m)),o[t]=function(){return m}}return o[t](Ef,i,a)}function H9(n,e,t,i){return Cr(n,"layout",`${t}-allow-overlap`,e,i)?Cr(n,"layout",`${t}-ignore-placement`,e,i)?"none":"obstacle":"declutter"}function Ite(n,e,t,i){if(i||console.warn("No filterCache provided to evaluateFilter()"),!(n in i))try{i[n]=KH(e).filter}catch(r){console.warn("Filter will evaluate to false: "+r.message),i[n]=function(){return!1}}return i[n](Ef,t)}function p1(n,e){if(n){if(n.a===0||e===0)return;const t=n.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(n.r*255/t)+","+Math.round(n.g*255/t)+","+Math.round(n.b*255/t)+","+t*e+")"}return n}const Tte=/\{[^{}}]*\}/g;function AM(n,e){return n.replace(Tte,function(t){return e[t.slice(1,-1)]||""})}function V9(n,e){let t=n.split(":")[0];return t===n&&(t="default"),e[t]}const kte={};function Dte(n,e,t,i=Xp,r=void 0,a=void 0,l=void 0,o=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");kte[_te(e,n)]=Array.from(arguments);const m={};(typeof a=="string"||a instanceof Request||a instanceof Response||a instanceof Promise)&&(a={default:a});for(const Z in a){const oe=a[Z];Tv(()=>oe).then(async W=>{let ue;if(typeof Image<"u"){const ge=new Image;if(typeof W=="string")ge.crossOrigin="anonymous",ge.src=W;else{let ye;W instanceof Request?ye=await fetch(W):W instanceof Response&&(ye=W);const Me=await ye.blob();ue=URL.createObjectURL(Me),ge.src=ue}ge.addEventListener("load",function ye(){ge.removeEventListener("load",ye),m[Z]={image:ge,size:[ge.width,ge.height]},n.changed(),ue&&URL.revokeObjectURL(ue)}),ge.addEventListener("error",function ye(){URL.revokeObjectURL(ue),ge.removeEventListener("error",ye)})}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const ge=self;ge.postMessage({action:"loadImage",src:W}),ge.addEventListener("message",function(Me){Me.data.action==="imageLoaded"&&Me.data.src===W&&(m[Z]={image:Me.data.image,size:[Me.data.image.width,Me.data.image.height]})})}})}const C=DB(e.layers),S={},O=[],U={},K={},z=Iz(e),j=bte(e);let Q;for(let Z=0,oe=C.length;Z<oe;++Z){const W=C[Z],ue=W.id;if(typeof t=="string"&&W.source==t||Array.isArray(t)&&t.indexOf(ue)!==-1){const ge=W["source-layer"];if(Q){if(W.source!==Q)throw new Error(`Layer "${ue}" does not use source "${Q}`)}else{Q=W.source;const Me=e.sources[Q];if(!Me)throw new Error(`Source "${Q}" is not defined`);const Be=Me.type;if(Be!=="vector"&&Be!=="geojson")throw new Error(`Source "${Q}" is not of type "vector" or "geojson", but "${Be}"`)}let ye=S[ge];ye||(ye=[],S[ge]=ye),ye.push({layer:W,index:Z}),O.push(ue)}}const ee=new S1,V=new k0,ae=[],ne=function(Z,oe,W){const ue=n.getSource?.()?.format_?.layerName_??"mvt:layer",ge=Z.getProperties(),ye=S[ge[ue]];if(!ye)return;let Me=i.indexOf(oe);Me==-1&&(Me=XO(oe,i)),Ef.zoom=Me,Ef.distanceFromCenter=0;const Be=Z.getGeometry(),we=Ete[Be.getType()],qe=n.get("map");if(qe&&qe instanceof C2&&we===1){const yt=qe.getSize();if(yt){const nt=qe.getView().getCenter(),be=Bf(Be.getExtent());Ef.distanceFromCenter=OZ(nt,be)/oe/yt[1]}}const xe={id:Z.getId(),properties:ge,type:we},ze=n.get("mapbox-featurestate")[Z.getId()];let ot=-1;for(let yt=0,nt=ye.length;yt<nt;++yt){const be=ye[yt],Ne=be.layer,tt=Ne.id;if(W!==void 0&&W!==tt)continue;const lt=Ne.layout||ep,It=Ne.paint||ep;if(lt.visibility==="none"||"minzoom"in Ne&&Me<Ne.minzoom||"maxzoom"in Ne&&Me>=Ne.maxzoom)continue;const pt=Ne.filter;if(!pt||Ite(tt,pt,xe,j)){let St,Rt,Le,Pe,Re,He;const bt=be.index;if(we==3&&(Ne.type=="fill"||Ne.type=="fill-extrusion"))if(Rt=Cr(Ne,"paint",Ne.type+"-opacity",xe,z,ze),Ne.type+"-pattern"in It){const ei=Cr(Ne,"paint",Ne.type+"-pattern",xe,z,ze);if(ei){const Kn=typeof ei=="string"?AM(ei,ge):ei.toString(),Ge=V9(Kn,m);if(r&&r[Kn]&&Ge){++ot,He=ae[ot],(!He||!He.getFill()||He.getStroke()||He.getText())&&(He=new Cf({fill:new k0}),ae[ot]=He),Le=He.getFill(),He.setZIndex(bt);const de=Kn+"."+Rt;let re=K[de];if(!re){const le=r[Kn],me=b2(le.width,le.height),Te=me.getContext("2d");Te.globalAlpha=Rt,Te.drawImage(Ge.image,le.x,le.y,le.width,le.height,0,0,le.width,le.height),re=Te.createPattern(me,"repeat"),K[de]=re}Le.setColor(re)}}}else St=p1(Cr(Ne,"paint",Ne.type+"-color",xe,z,ze),Rt),Ne.type+"-outline-color"in It&&(Re=p1(Cr(Ne,"paint",Ne.type+"-outline-color",xe,z,ze),Rt)),Re||(Re=St),(St||Re)&&(++ot,He=ae[ot],(!He||St&&!He.getFill()||!St&&He.getFill()||Re&&!He.getStroke()||!Re&&He.getStroke()||He.getText())&&(He=new Cf({fill:St?new k0:void 0,stroke:Re?new S1:void 0}),ae[ot]=He),St&&(Le=He.getFill(),Le.setColor(St)),Re&&(Pe=He.getStroke(),Pe.setColor(Re),Pe.setWidth(.5)),He.setZIndex(bt));if(we!=1&&Ne.type=="line"){"line-pattern"in It?St=void 0:St=p1(Cr(Ne,"paint","line-color",xe,z,ze),Cr(Ne,"paint","line-opacity",xe,z,ze));const ei=Cr(Ne,"paint","line-width",xe,z,ze);St&&ei>0&&(++ot,He=ae[ot],(!He||!He.getStroke()||He.getFill()||He.getText())&&(He=new Cf({stroke:new S1}),ae[ot]=He),Pe=He.getStroke(),Pe.setLineCap(Cr(Ne,"layout","line-cap",xe,z,ze)),Pe.setLineJoin(Cr(Ne,"layout","line-join",xe,z,ze)),Pe.setMiterLimit(Cr(Ne,"layout","line-miter-limit",xe,z,ze)),Pe.setColor(St),Pe.setWidth(ei),Pe.setLineDash(It["line-dasharray"]?Cr(Ne,"paint","line-dasharray",xe,z,ze).map(function(Kn){return Kn*ei}):null),He.setZIndex(bt))}let vt=!1,Ot=null,qt=0,Kt,on,Jn;if((we==1||we==2)&&"icon-image"in lt){const ei=Cr(Ne,"layout","icon-image",xe,z,ze);if(ei){Kt=typeof ei=="string"?AM(ei,ge):ei.toString();let Kn;const Ge=o?o(n,Kt):void 0,de=V9(Kt,m);if(r&&r[Kt]&&de||Ge){const re=Cr(Ne,"layout","icon-rotation-alignment",xe,z,ze);if(we==2){const le=Z.getGeometry();if(le.getFlatMidpoint||le.getFlatMidpoints){const me=le.getExtent();if(Math.sqrt(Math.max(Math.pow((me[2]-me[0])/oe,2),Math.pow((me[3]-me[1])/oe,2)))>150){const We=le.getType()==="MultiLineString"?le.getFlatMidpoints():le.getFlatMidpoint();if(lM||(Xb=[NaN,NaN],lM=new Fh("Point",Xb,[],2,{},void 0)),Kn=lM,Xb[0]=We[0],Xb[1]=We[1],Cr(Ne,"layout","symbol-placement",xe,z,ze)==="line"&&re==="map"){const Ye=le.getStride(),De=le.getFlatCoordinates();for(let Ze=0,g=De.length-Ye;Ze<g;Ze+=Ye){const gt=De[Ze],ht=De[Ze+1],kt=De[Ze+Ye],it=De[Ze+Ye+1],en=Math.min(gt,kt),Dn=Math.max(gt,kt),Mn=We[0],ii=We[1],Wn=(it-ht)*(Mn-gt)-(kt-gt)*(ii-ht);if(Math.abs(Wn)<.001&&Mn<=Dn&&Mn>=en){qt=Math.atan2(ht-it,kt-gt);break}}}}}}if(we!==2||Kn){const le=Cr(Ne,"layout","icon-size",xe,z,ze),me=It["icon-color"]!==void 0?Cr(Ne,"paint","icon-color",xe,z,ze):null;if(!me||me.a!==0){const Te=Cr(Ne,"paint","icon-halo-color",xe,z,ze),We=Cr(Ne,"paint","icon-halo-width",xe,z,ze);let dt=`${Kt}.${le}.${We}.${Te}`;if(me!==null&&(dt+=`.${me}`),on=U[dt],!on){const Ye=H9(Ne,xe,"icon",z);let De;"icon-offset"in lt&&(De=Cr(Ne,"layout","icon-offset",xe,z,ze).slice(0),De[0]*=le,De[1]*=-le);let Ze=me?[me.r*255,me.g*255,me.b*255,me.a]:void 0;if(Ge){const g={color:Ze,rotateWithView:re==="map",displacement:De,declutterMode:Ye,scale:le};typeof Ge=="string"?g.src=Ge:(g.img=Ge,g.imgSize=[Ge.width,Ge.height]),on=new r3(g)}else{const g=r[Kt];let gt,ht,kt;if(We)g.sdf?(gt=Q9(Y9(de.image,g,me||[0,0,0,1]),{x:0,y:0,width:g.width,height:g.height,pixelRatio:g.pixelRatio},We,Te),Ze=void 0):gt=Q9(de.image,g,We,Te);else{if(g.sdf&&!de.unSDFed){const it=Y9(de.image,{x:0,y:0,width:de.size[0],height:de.size[1]},{r:1,g:1,b:1});de.image=it,de.unSDFed=!0}gt=de.image,ht=[g.width,g.height],kt=[g.x,g.y]}on=new r3({color:Ze,img:gt,imgSize:de.size,size:ht,offset:kt,rotateWithView:re==="map",scale:le/g.pixelRatio,displacement:De,declutterMode:Ye})}U[dt]=on}}on&&(++ot,He=ae[ot],(!He||!He.getImage()||He.getFill()||He.getStroke())&&(He=new Cf,ae[ot]=He),He.setGeometry(Kn),on.setRotation(qt+aM(Cr(Ne,"layout","icon-rotate",xe,z,ze))),on.setOpacity(Cr(Ne,"paint","icon-opacity",xe,z,ze)),on.setAnchor(Bte[Cr(Ne,"layout","icon-anchor",xe,z,ze)]),He.setImage(on),Ot=He.getText(),He.setText(void 0),He.setZIndex(bt),vt=!0,Jn=!1)}else Jn=!0}}}if(we==1&&Ne.type==="circle"){++ot,He=ae[ot],(!He||!He.getImage()||He.getFill()||He.getStroke())&&(He=new Cf,ae[ot]=He);const ei="circle-radius"in It?Cr(Ne,"paint","circle-radius",xe,z,ze):5,Kn=p1(Cr(Ne,"paint","circle-stroke-color",xe,z,ze),Cr(Ne,"paint","circle-stroke-opacity",xe,z,ze)),Ge=Cr(Ne,"paint","circle-translate",xe,z,ze),de=p1(Cr(Ne,"paint","circle-color",xe,z,ze),Cr(Ne,"paint","circle-opacity",xe,z,ze)),re=Cr(Ne,"paint","circle-stroke-width",xe,z,ze),le=ei+"."+Kn+"."+de+"."+re+"."+Ge[0]+"."+Ge[1];on=U[le],on||(on=new pb({radius:ei,displacement:[Ge[0],-Ge[1]],stroke:Kn&&re>0?new S1({width:re,color:Kn}):void 0,fill:de?new k0({color:de}):void 0,declutterMode:"none"}),U[le]=on),He.setImage(on),Ot=He.getText(),He.setText(void 0),He.setGeometry(void 0),He.setZIndex(bt),vt=!0}let Wt,$n,On,Bn,In,Bi;if("text-field"in lt){Bn=Math.round(Cr(Ne,"layout","text-size",xe,z,ze));const ei=Cr(Ne,"layout","text-font",xe,z,ze);On=Cr(Ne,"layout","text-line-height",xe,z,ze),$n=P6(l?l(ei,e.metadata?e.metadata["ol:webfonts"]:void 0):ei,Bn,On),$n.includes("sans-serif")||($n+=",sans-serif"),In=Cr(Ne,"layout","text-letter-spacing",xe,z,ze),Bi=Cr(Ne,"layout","text-max-width",xe,z,ze);const Kn=Cr(Ne,"layout","text-field",xe,z,ze);typeof Kn=="object"&&Kn.sections?Kn.sections.length===1?Wt=Kn.toString():Wt=Kn.sections.reduce((Ge,de,re)=>{const le=de.fontStack?de.fontStack.split(","):ei,me=P6(l?l(le):le,Bn*(de.scale||1),On);let Te=de.text;if(Te===`
`)return Ge.push(`
`,""),Ge;if(we==2)return Ge.push(iB(Te,In),me),Ge;Te=rB(Te,me,Bi,In).split(`
`);for(let We=0,dt=Te.length;We<dt;++We)We>0&&Ge.push(`
`,""),Ge.push(Te[We],me);return Ge},[]):Wt=AM(Kn,ge).trim(),Rt=Cr(Ne,"paint","text-opacity",xe,z,ze)}if(Wt&&Rt&&!Jn){vt||(++ot,He=ae[ot],(!He||!He.getText()||He.getFill()||He.getStroke())&&(He=new Cf,ae[ot]=He),He.setImage(void 0),He.setGeometry(void 0));const ei=H9(Ne,xe,"text",z);He.getText()||He.setText(Ot),Ot=He.getText(),(!Ot||"getDeclutterMode"in Ot&&Ot.getDeclutterMode()!==ei)&&(Ot=new g2({padding:[2,2,2,2],declutterMode:ei}),He.setText(Ot));const Kn=Cr(Ne,"layout","text-transform",xe,z,ze);Kn=="uppercase"?Wt=Array.isArray(Wt)?Wt.map((kt,it)=>it%2?kt:kt.toUpperCase()):Wt.toUpperCase():Kn=="lowercase"&&(Wt=Array.isArray(Wt)?Wt.map((kt,it)=>it%2?kt:kt.toLowerCase()):Wt.toLowerCase());const Ge=Array.isArray(Wt)?Wt:we==2?iB(Wt,In):rB(Wt,$n,Bi,In);if(Ot.setText(Ge),Ot.setFont($n),Ot.setRotation(aM(Cr(Ne,"layout","text-rotate",xe,z,ze))),typeof Ot.setKeepUpright=="function"){const kt=Cr(Ne,"layout","text-keep-upright",xe,z,ze);Ot.setKeepUpright(kt)}const de=Cr(Ne,"layout","text-anchor",xe,z,ze),re=vt||we==1?"point":Cr(Ne,"layout","symbol-placement",xe,z,ze);let le;if(re==="line-center"?(Ot.setPlacement("line"),le="center"):Ot.setPlacement(re),re==="line"&&typeof Ot.setRepeat=="function"){const kt=Cr(Ne,"layout","symbol-spacing",xe,z,ze);Ot.setRepeat(kt*2)}Ot.setOverflow(re==="point");let me=Cr(Ne,"paint","text-halo-width",xe,z,ze);const Te=Cr(Ne,"layout","text-offset",xe,z,ze),We=Cr(Ne,"paint","text-translate",xe,z,ze);let dt=0,Ye=0;if(re=="point"){le="center",de.indexOf("left")!==-1?(le="left",Ye=me):de.indexOf("right")!==-1&&(le="right",Ye=-me);const kt=Cr(Ne,"layout","text-rotation-alignment",xe,z,ze);Ot.setRotateWithView(kt=="map")}else Ot.setMaxAngle(aM(Cr(Ne,"layout","text-max-angle",xe,z,ze))*Wt.length/Ge.length),Ot.setRotateWithView(!1);Ot.setTextAlign(le);let De="middle";de.indexOf("bottom")==0?(De="bottom",dt=-me-.5*(On-1)*Bn):de.indexOf("top")==0&&(De="top",dt=me+.5*(On-1)*Bn),Ot.setTextBaseline(De);const Ze=Cr(Ne,"layout","text-justify",xe,z,ze);Ot.setJustify(Ze==="auto"?void 0:Ze),Ot.setOffsetX(Te[0]*Bn+Ye+We[0]),Ot.setOffsetY(Te[1]*Bn+dt+We[1]),V.setColor(p1(Cr(Ne,"paint","text-color",xe,z,ze),Rt)),Ot.setFill(V);const g=p1(Cr(Ne,"paint","text-halo-color",xe,z,ze),Rt);if(g&&me>0){ee.setColor(g),me*=2;const kt=.5*Bn;ee.setWidth(me<=kt?me:kt),Ot.setStroke(ee)}else Ot.setStroke(void 0);const gt=Cr(Ne,"layout","text-padding",xe,z,ze),ht=Ot.getPadding();gt!==ht[0]&&(ht[0]=gt,ht[1]=gt,ht[2]=gt,ht[3]=gt),He.setZIndex(bt)}}}if(ot>-1)return ae.length=ot+1,ae};return n.setStyle(ne),n.set("mapbox-layers",O),n.set("mapbox-source",Q),n.set("mapbox-featurestate",n.get("mapbox-featurestate")||{}),ne}class Rz{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=_2,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let i=t.dataProjection?Ws(t.dataProjection):this.readProjection(e);t.extent&&i&&i.getUnits()==="tile-pixels"&&(i=Ws(i),i.setWorldExtent(t.extent)),t={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return Co()}readFeature(e,t){return Co()}readFeatures(e,t){return Co()}readGeometry(e,t){return Co()}readProjection(e){return Co()}writeFeature(e,t){return Co()}writeFeatures(e,t){return Co()}writeGeometry(e,t){return Co()}}function x2(n,e,t){const i=t?Ws(t.featureProjection):null,r=t?Ws(t.dataProjection):null;let a=n;if(i&&r&&!R1(i,r)){e&&(a=n.clone());const l=e?i:r,o=e?r:i;l.getUnits()==="tile-pixels"?a.transform(l,o):a.applyTransform(M_(l,o))}if(e&&t&&t.decimals!==void 0){const l=Math.pow(10,t.decimals),o=function(m){for(let C=0,S=m.length;C<S;++C)m[C]=Math.round(m[C]*l)/l;return m};a===n&&(a=n.clone()),a.applyTransform(o)}return a}const Rte={Point:Qg,LineString:qg,Polygon:F0,MultiPoint:yb,MultiLineString:D_,MultiPolygon:R_};function Pte(n,e,t){return Array.isArray(e[0])?(jF(n,0,e,t)||(n=n.slice(),H6(n,0,e,t)),n):(EO(n,0,e,t)||(n=n.slice(),t3(n,0,e,t)),n)}function Pz(n,e){const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(a=>Pz({...n,geometry:a})).flat();const i=t.type==="MultiPolygon"?"Polygon":t.type;if(i==="GeometryCollection"||i==="Circle")throw new Error("Unsupported geometry type: "+i);const r=t.layout.length;return x2(new Fh(i,i==="Polygon"?Pte(t.flatCoordinates,t.ends,r):t.flatCoordinates,t.ends?.flat(),r,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function JO(n,e){if(!n)return null;if(Array.isArray(n)){const i=n.map(r=>JO(r,e));return new l3(i)}const t=Rte[n.type];return x2(new t(n.flatCoordinates,n.layout||"XY",n.ends),!1,e)}class Kte extends Rz{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(Jb(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(Jb(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return Co()}readFeaturesFromObject(e,t){return Co()}readGeometry(e,t){return this.readGeometryFromObject(Jb(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return Co()}readProjection(e){return this.readProjectionFromObject(Jb(e))}readProjectionFromObject(e){return Co()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return Co()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return Co()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return Co()}}function Jb(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class $9 extends Kte{constructor(e){e=e||{},super(),this.dataProjection=Ws(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Ws(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let i=null;e.type==="Feature"?i=e:i={type:"Feature",geometry:e,properties:null};const r=e8(i.geometry);if(this.featureClass===Fh)return Pz({geometry:r,id:i.id,properties:i.properties},t);const a=new _2;return this.geometryName_?a.setGeometryName(this.geometryName_):this.extractGeometryName_&&i.geometry_name&&a.setGeometryName(i.geometry_name),a.setGeometry(JO(r,t)),"id"in i&&a.setId(i.id),i.properties&&a.setProperties(i.properties,!0),a}readFeaturesFromObject(e,t){const i=e;let r=null;if(i.type==="FeatureCollection"){const a=e;r=[];const l=a.features;for(let o=0,m=l.length;o<m;++o){const C=this.readFeatureFromObject(l[o],t);C&&r.push(C)}}else r=[this.readFeatureFromObject(e,t)];return r.flat()}readGeometryFromObject(e,t){return Ute(e,t)}readProjectionFromObject(e){const t=e.crs;let i;if(t)if(t.type=="name")i=Ws(t.properties.name);else if(t.type==="EPSG")i=Ws("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(e,t){t=this.adaptOptions(t);const i={type:"Feature",geometry:null,properties:null},r=e.getId();if(r!==void 0&&(i.id=r),!e.hasProperties())return i;const a=e.getProperties(),l=e.getGeometry();return l&&(i.geometry=oB(l,t),delete a[e.getGeometryName()]),U1(a)||(i.properties=a),i}writeFeaturesObject(e,t){t=this.adaptOptions(t);const i=[];for(let r=0,a=e.length;r<a;++r)i.push(this.writeFeatureObject(e[r],t));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,t){return oB(e,this.adaptOptions(t))}}function e8(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=Fte(n);break}case"LineString":{t=zte(n);break}case"Polygon":{t=Wte(n);break}case"MultiPoint":{t=Gte(n);break}case"MultiLineString":{t=Nte(n);break}case"MultiPolygon":{t=jte(n);break}case"GeometryCollection":{t=Lte(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function Ute(n,e){const t=e8(n);return JO(t,e)}function Lte(n,e){return n.geometries.map(function(i){return e8(i)})}function Fte(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:Xg(e.length)}}function zte(n){const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:Xg(e[0]?.length||2)}}function Nte(n){const e=n.coordinates,t=e[0]?.[0]?.length||2,i=[],r=hb(i,0,e,t);return{type:"MultiLineString",flatCoordinates:i,ends:r,layout:Xg(t)}}function Gte(n){const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:Xg(e[0]?.length||2)}}function jte(n){const e=n.coordinates,t=[],i=e[0]?.[0]?.[0].length||2,r=UF(t,0,e,i);return{type:"MultiPolygon",flatCoordinates:t,ends:r,layout:Xg(i)}}function Wte(n){const e=n.coordinates,t=[],i=e[0]?.[0]?.length,r=hb(t,0,e,i);return{type:"Polygon",flatCoordinates:t,ends:r,layout:Xg(i)}}function oB(n,e){n=x2(n,!0,e);const t=n.getType();let i;switch(t){case"Point":{i=$te(n);break}case"LineString":{i=Yte(n);break}case"Polygon":{i=Zte(n,e);break}case"MultiPoint":{i=Hte(n);break}case"MultiLineString":{i=qte(n);break}case"MultiPolygon":{i=Vte(n,e);break}case"GeometryCollection":{i=Qte(n,e);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return i}function Qte(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(i){return oB(i,e)})}}function Yte(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function qte(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function Hte(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function Vte(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function $te(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function Zte(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}const aB=65536*65536,Z9=1/aB,Xte=12,X9=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),uM=0,ex=1,bC=2,tx=5;class Jte{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,i=this.length){for(;this.pos<i;){const r=this.readVarint(),a=r>>3,l=this.pos;this.type=r&7,e(a,t,this),this.pos===l&&this.skip(r)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*aB;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*aB;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let i,r;return r=t[this.pos++],i=r&127,r<128||(r=t[this.pos++],i|=(r&127)<<7,r<128)||(r=t[this.pos++],i|=(r&127)<<14,r<128)||(r=t[this.pos++],i|=(r&127)<<21,r<128)?i:(r=t[this.pos],i|=(r&15)<<28,ene(i,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=Xte&&X9?X9.decode(this.buf.subarray(t,e)):dne(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===bC?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===uM)for(;this.buf[this.pos++]>127;);else if(t===bC)this.pos=this.readVarint()+this.pos;else if(t===tx)this.pos+=4;else if(t===ex)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.dataView=new DataView(i.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*Z9),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*Z9),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){tne(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=fne(this.buf,e,this.pos);const i=this.pos-t;i>=128&&J9(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let i=0;i<t;i++)this.buf[this.pos++]=e[i]}writeRawMessage(e,t){this.pos++;const i=this.pos;e(t,this);const r=this.pos-i;r>=128&&J9(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r}writeMessage(e,t,i){this.writeTag(e,bC),this.writeRawMessage(t,i)}writePackedVarint(e,t){t.length&&this.writeMessage(e,rne,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,one,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,lne,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,ane,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,sne,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,Ane,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,une,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,cne,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,hne,t)}writeBytesField(e,t){this.writeTag(e,bC),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,tx),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,tx),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,ex),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,ex),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,uM),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,uM),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,bC),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,tx),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,ex),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function ene(n,e,t){const i=t.buf;let r,a;if(a=i[t.pos++],r=(a&112)>>4,a<128||(a=i[t.pos++],r|=(a&127)<<3,a<128)||(a=i[t.pos++],r|=(a&127)<<10,a<128)||(a=i[t.pos++],r|=(a&127)<<17,a<128)||(a=i[t.pos++],r|=(a&127)<<24,a<128)||(a=i[t.pos++],r|=(a&1)<<31,a<128))return Py(n,r,e);throw new Error("Expected varint not more than 10 bytes")}function Py(n,e,t){return t?e*4294967296+(n>>>0):(e>>>0)*4294967296+(n>>>0)}function tne(n,e){let t,i;if(n>=0?(t=n%4294967296|0,i=n/4294967296|0):(t=~(-n%4294967296),i=~(-n/4294967296),t^4294967295?t=t+1|0:(t=0,i=i+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),nne(t,i,e),ine(i,e)}function nne(n,e,t){t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos]=n&127}function ine(n,e){const t=(n&7)<<4;e.buf[e.pos++]|=t|((n>>>=3)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127)))))}function J9(n,e,t){const i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(i);for(let r=t.pos-1;r>=n;r--)t.buf[r+i]=t.buf[r]}function rne(n,e){for(let t=0;t<n.length;t++)e.writeVarint(n[t])}function one(n,e){for(let t=0;t<n.length;t++)e.writeSVarint(n[t])}function ane(n,e){for(let t=0;t<n.length;t++)e.writeFloat(n[t])}function sne(n,e){for(let t=0;t<n.length;t++)e.writeDouble(n[t])}function lne(n,e){for(let t=0;t<n.length;t++)e.writeBoolean(n[t])}function Ane(n,e){for(let t=0;t<n.length;t++)e.writeFixed32(n[t])}function une(n,e){for(let t=0;t<n.length;t++)e.writeSFixed32(n[t])}function cne(n,e){for(let t=0;t<n.length;t++)e.writeFixed64(n[t])}function hne(n,e){for(let t=0;t<n.length;t++)e.writeSFixed64(n[t])}function dne(n,e,t){let i="",r=e;for(;r<t;){const a=n[r];let l=null,o=a>239?4:a>223?3:a>191?2:1;if(r+o>t)break;let m,C,S;o===1?a<128&&(l=a):o===2?(m=n[r+1],(m&192)===128&&(l=(a&31)<<6|m&63,l<=127&&(l=null))):o===3?(m=n[r+1],C=n[r+2],(m&192)===128&&(C&192)===128&&(l=(a&15)<<12|(m&63)<<6|C&63,(l<=2047||l>=55296&&l<=57343)&&(l=null))):o===4&&(m=n[r+1],C=n[r+2],S=n[r+3],(m&192)===128&&(C&192)===128&&(S&192)===128&&(l=(a&15)<<18|(m&63)<<12|(C&63)<<6|S&63,(l<=65535||l>=1114112)&&(l=null))),l===null?(l=65533,o=1):l>65535&&(l-=65536,i+=String.fromCharCode(l>>>10&1023|55296),l=56320|l&1023),i+=String.fromCharCode(l),r+=o}return i}function fne(n,e,t){for(let i=0,r,a;i<e.length;i++){if(r=e.charCodeAt(i),r>55295&&r<57344)if(a)if(r<56320){n[t++]=239,n[t++]=191,n[t++]=189,a=r;continue}else r=a-55296<<10|r-56320|65536,a=null;else{r>56319||i+1===e.length?(n[t++]=239,n[t++]=191,n[t++]=189):a=r;continue}else a&&(n[t++]=239,n[t++]=191,n[t++]=189,a=null);r<128?n[t++]=r:(r<2048?n[t++]=r>>6|192:(r<65536?n[t++]=r>>12|224:(n[t++]=r>>18|240,n[t++]=r>>12&63|128),n[t++]=r>>6&63|128),n[t++]=r&63|128)}return t}class Kz extends Rz{constructor(e){super(),e=e||{},this.dataProjection=new s2({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:Fh,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,i,r){e.pos=t.geometry;const a=e.readVarint()+e.pos;let l=1,o=0,m=0,C=0,S=0,O=0;for(;e.pos<a;){if(!o){const U=e.readVarint();l=U&7,o=U>>3}if(o--,l===1||l===2)m+=e.readSVarint(),C+=e.readSVarint(),l===1&&S>O&&(r.push(S),O=S),i.push(m,C),S+=2;else if(l===7)S>O&&(i.push(i[O],i[O+1]),S+=2);else throw new Error("Invalid command found in the PBF")}S>O&&(r.push(S),O=S)}createFeature_(e,t,i){const r=t.type;if(r===0)return null;let a;const l=t.properties;let o;this.idProperty_?(o=l[this.idProperty_],delete l[this.idProperty_]):o=t.id,l[this.layerName_]=t.layer.name;const m=[],C=[];this.readRawGeometry_(e,t,m,C);const S=vne(r,C.length);if(this.featureClass===Fh)a=new this.featureClass(S,m,C,2,l,o),a.transform(i.dataProjection);else{let O;if(S=="Polygon"){const z=WF(m,C);O=z.length>1?new R_(m,"XY",z):new F0(m,"XY",C)}else O=S==="Point"?new Qg(m,"XY"):S==="LineString"?new qg(m,"XY"):S==="MultiPoint"?new yb(m,"XY"):S==="MultiLineString"?new D_(m,"XY",C):null;const U=this.featureClass;a=new U,this.geometryName_&&a.setGeometryName(this.geometryName_);const K=x2(O,!1,i);a.setGeometry(K),o!==void 0&&a.setId(o),a.setProperties(l,!0)}return a}getType(){return"arraybuffer"}readFeatures(e,t){const i=this.layers_;t=this.adaptOptions(t);const r=Ws(t.dataProjection);r.setWorldExtent(t.extent),t.dataProjection=r;const a=new Jte(e),l=a.readFields(mne,{}),o=[];for(const m in l){if(i&&!i.includes(m))continue;const C=l[m],S=C?[0,0,C.extent,C.extent]:null;r.setExtent(S);for(let O=0,U=C.length;O<U;++O){const K=yne(a,C,O),z=this.createFeature_(a,K,t);z!==null&&o.push(z)}}return o}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function mne(n,e,t){if(n===3){const i={keys:[],values:[],features:[]},r=t.readVarint()+t.pos;t.readFields(pne,i,r),i.length=i.features.length,i.length&&(e[i.name]=i)}}function pne(n,e,t){if(n===15)e.version=t.readVarint();else if(n===1)e.name=t.readString();else if(n===5)e.extent=t.readVarint();else if(n===2)e.features.push(t.pos);else if(n===3)e.keys.push(t.readString());else if(n===4){let i=null;const r=t.readVarint()+t.pos;for(;t.pos<r;)n=t.readVarint()>>3,i=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null;e.values.push(i)}}function gne(n,e,t){if(n==1)e.id=t.readVarint();else if(n==2){const i=t.readVarint()+t.pos;for(;t.pos<i;){const r=e.layer.keys[t.readVarint()],a=e.layer.values[t.readVarint()];e.properties[r]=a}}else n==3?e.type=t.readVarint():n==4&&(e.geometry=t.pos)}function yne(n,e,t){n.pos=e.features[t];const i=n.readVarint()+n.pos,r={layer:e,type:0,properties:{}};return n.readFields(gne,r,i),r}function vne(n,e){let t;return n===1?t=e===1?"Point":"MultiPoint":n===2?t=e===1?"LineString":"MultiLineString":n===3&&(t="Polygon"),t}class Cne extends qO{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],i=e.pixelRatio,r=e.viewState,a=r.resolution,l=this.getLayer().getSource(),o=e.viewHints;let m=e.extent;if(t.extent!==void 0&&(m=ip(m,Qp(t.extent,r.projection))),!o[vA.ANIMATING]&&!o[vA.INTERACTING]&&!$g(m))if(l){const C=r.projection,S=l.getImage(m,a,i,C);S&&(this.loadImage(S)?this.image=S:S.getState()===hr.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=ec(t.pixelToCoordinateTransform,e.slice()),a=i.getExtent();if(a&&!Wg(a,r))return null;const l=this.image.getExtent(),o=this.image.getImage(),m=as(l),C=Math.floor(o.width*((r[0]-l[0])/m));if(C<0||C>=o.width)return null;const S=nc(l),O=Math.floor(o.height*((l[3]-r[1])/S));return O<0||O>=o.height?null:this.getImageData(o,C,O)}renderFrame(e,t){const i=this.image,r=i.getExtent(),a=i.getResolution(),[l,o]=Array.isArray(a)?a:[a,a],m=i.getPixelRatio(),C=e.layerStatesArray[e.layerIndex],S=e.pixelRatio,O=e.viewState,U=O.center,K=O.resolution,z=S*l/(K*m),j=S*o/(K*m);this.prepareContainer(e,t);const Q=this.context.canvas.width,ee=this.context.canvas.height,V=this.getRenderContext(e);let ae=!1,ne=!0;if(C.extent){const ge=Qp(C.extent,O.projection);ne=uu(ge,e.extent),ae=ne&&!Wp(ge,e.extent),ae&&this.clipUnrotated(V,e,ge)}const Z=i.getImage(),oe=Jp(this.tempTransform,Q/2,ee/2,z,j,0,m*(r[0]-U[0])/l,m*(U[1]-r[3])/o);this.renderedResolution=o*S/m;const W=Z.width*oe[0],ue=Z.height*oe[3];if(this.getLayer().getSource().getInterpolate()||(V.imageSmoothingEnabled=!1),this.preRender(V,e),ne&&W>=.5&&ue>=.5){const ge=oe[4],ye=oe[5],Me=C.opacity;Me!==1&&(V.save(),V.globalAlpha=Me),V.drawImage(Z,0,0,+Z.width,+Z.height,ge,ye,W,ue),Me!==1&&V.restore()}return this.postRender(this.context,e),ae&&V.restore(),V.imageSmoothingEnabled=!0,this.container}}class _ne extends Hv{constructor(e){e=e||{},super(e)}}class Uz extends _ne{constructor(e){super(e)}createRenderer(){return new Cne(this)}getData(e){return super.getData(e)}}function sB(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}const bne=new Error("disposed"),xne=[256,256];class eT extends Cb{constructor(e){const t=Pi.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=sB(this.data_);return e?[e.width,e.height]:xne}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==Pi.IDLE&&this.state!==Pi.ERROR)return;this.state=Pi.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=Pi.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=Pi.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(bne),this.controller_=null),super.disposeInternal()}}let cM;const vv=[];function tT(n,e,t,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,r)),n.restore()}function hM(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function Mne(){if(cM===void 0){const n=jA(6,6,vv);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",tT(n,4,5,4,0),tT(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;cM=hM(e,0)||hM(e,4)||hM(e,8),db(n),vv.push(n.canvas)}return cM}function lB(n,e,t,i){const r=u2(t,e,n);let a=W6(e,i,t);const l=e.getMetersPerUnit();l!==void 0&&(a*=l);const o=n.getMetersPerUnit();o!==void 0&&(a/=o);const m=n.getExtent();if(!m||Wg(m,r)){const C=W6(n,a,r)/a;isFinite(C)&&C>0&&(a/=C)}return a}function Sne(n,e,t,i){const r=Bf(t);let a=lB(n,e,r,i);return(!isFinite(a)||a<=0)&&vF(t,function(l){return a=lB(n,e,l,i),isFinite(a)&&a>0}),a}function Lz(n,e,t,i,r,a,l,o,m,C,S,O,U,K){const z=jA(Math.round(t*n),Math.round(t*e),vv);if(O||(z.imageSmoothingEnabled=!1),m.length===0)return z.canvas;z.scale(t,t);function j(Z){return Math.round(Z*t)/t}z.globalCompositeOperation="lighter";const Q=bm();m.forEach(function(Z,oe,W){gF(Q,Z.extent)});let ee;const V=t/i,ae=(O?1:1+Math.pow(2,-24))/V;(!U||m.length!==1||C!==0)&&(ee=jA(Math.round(as(Q)*V),Math.round(nc(Q)*V),vv),O||(ee.imageSmoothingEnabled=!1),m.forEach(function(Z,oe,W){if(Z.image.width>0&&Z.image.height>0){if(Z.clipExtent){ee.save();const Be=(Z.clipExtent[0]-Q[0])*V,we=-(Z.clipExtent[3]-Q[3])*V,qe=as(Z.clipExtent)*V,xe=nc(Z.clipExtent)*V;ee.rect(O?Be:Math.round(Be),O?we:Math.round(we),O?qe:Math.round(Be+qe)-Math.round(Be),O?xe:Math.round(we+xe)-Math.round(we)),ee.clip()}const ue=(Z.extent[0]-Q[0])*V,ge=-(Z.extent[3]-Q[3])*V,ye=as(Z.extent)*V,Me=nc(Z.extent)*V;ee.drawImage(Z.image,C,C,Z.image.width-2*C,Z.image.height-2*C,O?ue:Math.round(ue),O?ge:Math.round(ge),O?ye:Math.round(ue+ye)-Math.round(ue),O?Me:Math.round(ge+Me)-Math.round(ge)),Z.clipExtent&&ee.restore()}}));const ne=G0(l);return o.getTriangles().forEach(function(Z,oe,W){const ue=Z.source,ge=Z.target;let ye=ue[0][0],Me=ue[0][1],Be=ue[1][0],we=ue[1][1],qe=ue[2][0],xe=ue[2][1];const ze=j((ge[0][0]-ne[0])/a),ot=j(-(ge[0][1]-ne[1])/a),yt=j((ge[1][0]-ne[0])/a),nt=j(-(ge[1][1]-ne[1])/a),be=j((ge[2][0]-ne[0])/a),Ne=j(-(ge[2][1]-ne[1])/a),tt=ye,lt=Me;ye=0,Me=0,Be-=tt,we-=lt,qe-=tt,xe-=lt;const It=[[Be,we,0,0,yt-ze],[qe,xe,0,0,be-ze],[0,0,Be,we,nt-ot],[0,0,qe,xe,Ne-ot]],pt=yZ(It);if(!pt)return;if(z.save(),z.beginPath(),Mne()||!O){z.moveTo(yt,nt);const Rt=4,Le=ze-yt,Pe=ot-nt;for(let Re=0;Re<Rt;Re++)z.lineTo(yt+j((Re+1)*Le/Rt),nt+j(Re*Pe/(Rt-1))),Re!=Rt-1&&z.lineTo(yt+j((Re+1)*Le/Rt),nt+j((Re+1)*Pe/(Rt-1)));z.lineTo(be,Ne)}else z.moveTo(yt,nt),z.lineTo(ze,ot),z.lineTo(be,Ne);z.clip(),z.transform(pt[0],pt[2],pt[1],pt[3],ze,ot),z.translate(Q[0]-tt,Q[3]-lt);let St;if(ee)St=ee.canvas,z.scale(ae,-ae);else{const Rt=m[0],Le=Rt.extent;St=Rt.image,z.scale(as(Le)/St.width,-nc(Le)/St.height)}z.drawImage(St,0,0),z.restore()}),ee&&(db(ee),vv.push(ee.canvas)),S&&(z.save(),z.globalCompositeOperation="source-over",z.strokeStyle="black",z.lineWidth=1,o.getTriangles().forEach(function(Z,oe,W){const ue=Z.target,ge=(ue[0][0]-ne[0])/a,ye=-(ue[0][1]-ne[1])/a,Me=(ue[1][0]-ne[0])/a,Be=-(ue[1][1]-ne[1])/a,we=(ue[2][0]-ne[0])/a,qe=-(ue[2][1]-ne[1])/a;z.beginPath(),z.moveTo(Me,Be),z.lineTo(ge,ye),z.lineTo(we,qe),z.closePath(),z.stroke()}),z.restore()),z.canvas}const wne=10,nT=.25;class Fz{constructor(e,t,i,r,a,l,o){this.sourceProj_=e,this.targetProj_=t;let m={};const C=o?aX(ae=>ec(o,u2(ae,this.targetProj_,this.sourceProj_))):M_(this.targetProj_,this.sourceProj_);this.transformInv_=function(ae){const ne=ae[0]+"/"+ae[1];return m[ne]||(m[ne]=C(ae)),m[ne]},this.maxSourceExtent_=r,this.errorThresholdSquared_=a*a,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&as(r)>=as(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?as(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?as(this.targetProj_.getExtent()):null;const S=G0(i),O=a2(i),U=o2(i),K=r2(i),z=this.transformInv_(S),j=this.transformInv_(O),Q=this.transformInv_(U),ee=this.transformInv_(K),V=wne+(l?Math.max(0,Math.ceil(Math.log2(z6(i)/(l*l*256*256)))):0);if(this.addQuad_(S,O,U,K,z,j,Q,ee,V),this.wrapsXInSource_){let ae=1/0;this.triangles_.forEach(function(ne,Z,oe){ae=Math.min(ae,ne.source[0][0],ne.source[1][0],ne.source[2][0])}),this.triangles_.forEach(ne=>{if(Math.max(ne.source[0][0],ne.source[1][0],ne.source[2][0])-ae>this.sourceWorldWidth_/2){const Z=[[ne.source[0][0],ne.source[0][1]],[ne.source[1][0],ne.source[1][1]],[ne.source[2][0],ne.source[2][1]]];Z[0][0]-ae>this.sourceWorldWidth_/2&&(Z[0][0]-=this.sourceWorldWidth_),Z[1][0]-ae>this.sourceWorldWidth_/2&&(Z[1][0]-=this.sourceWorldWidth_),Z[2][0]-ae>this.sourceWorldWidth_/2&&(Z[2][0]-=this.sourceWorldWidth_);const oe=Math.min(Z[0][0],Z[1][0],Z[2][0]);Math.max(Z[0][0],Z[1][0],Z[2][0])-oe<this.sourceWorldWidth_/2&&(ne.source=Z)}})}m={}}addTriangle_(e,t,i,r,a,l){this.triangles_.push({source:[r,a,l],target:[e,t,i]})}addQuad_(e,t,i,r,a,l,o,m,C){const S=L6([a,l,o,m]),O=this.sourceWorldWidth_?as(S)/this.sourceWorldWidth_:null,U=this.sourceWorldWidth_,K=this.sourceProj_.canWrapX()&&O>.5&&O<1;let z=!1;if(C>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const Q=L6([e,t,i,r]);z=as(Q)/this.targetWorldWidth_>nT||z}!K&&this.sourceProj_.isGlobal()&&O&&(z=O>nT||z)}if(!z&&this.maxSourceExtent_&&isFinite(S[0])&&isFinite(S[1])&&isFinite(S[2])&&isFinite(S[3])&&!uu(S,this.maxSourceExtent_))return;let j=0;if(!z&&(!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(m[0])||!isFinite(m[1]))){if(C>0)z=!0;else if(j=(!isFinite(a[0])||!isFinite(a[1])?8:0)+(!isFinite(l[0])||!isFinite(l[1])?4:0)+(!isFinite(o[0])||!isFinite(o[1])?2:0)+(!isFinite(m[0])||!isFinite(m[1])?1:0),j!=1&&j!=2&&j!=4&&j!=8)return}if(C>0){if(!z){const Q=[(e[0]+i[0])/2,(e[1]+i[1])/2],ee=this.transformInv_(Q);let V;K?V=(Ug(a[0],U)+Ug(o[0],U))/2-Ug(ee[0],U):V=(a[0]+o[0])/2-ee[0];const ae=(a[1]+o[1])/2-ee[1];z=V*V+ae*ae>this.errorThresholdSquared_}if(z){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const Q=[(t[0]+i[0])/2,(t[1]+i[1])/2],ee=this.transformInv_(Q),V=[(r[0]+e[0])/2,(r[1]+e[1])/2],ae=this.transformInv_(V);this.addQuad_(e,t,Q,V,a,l,ee,ae,C-1),this.addQuad_(V,Q,i,r,ae,ee,o,m,C-1)}else{const Q=[(e[0]+t[0])/2,(e[1]+t[1])/2],ee=this.transformInv_(Q),V=[(i[0]+r[0])/2,(i[1]+r[1])/2],ae=this.transformInv_(V);this.addQuad_(e,Q,V,r,a,ee,ae,m,C-1),this.addQuad_(Q,t,i,V,ee,l,o,ae,C-1)}return}}if(K){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(j&11)==0&&this.addTriangle_(e,i,r,a,o,m),(j&14)==0&&this.addTriangle_(e,i,t,a,o,l),j&&((j&13)==0&&this.addTriangle_(t,r,e,l,m,a),(j&7)==0&&this.addTriangle_(t,r,i,l,m,o))}calculateSourceExtent(){const e=bm();return this.triangles_.forEach(function(t,i,r){const a=t.source;JC(e,a[0]),JC(e,a[1]),JC(e,a[2])}),e}getTriangles(){return this.triangles_}}const zz=.5;class Nz extends Cb{constructor(e,t,i,r,a,l,o,m,C,S,O,U){super(a,Pi.IDLE,U),this.renderEdges_=O!==void 0?O:!1,this.pixelRatio_=o,this.gutter_=m,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=l||a,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const K=r.getTileCoordExtent(this.wrappedTileCoord_),z=this.targetTileGrid_.getExtent();let j=this.sourceTileGrid_.getExtent();const Q=z?ip(K,z):K;if(z6(Q)===0){this.state=Pi.EMPTY;return}const ee=e.getExtent();ee&&(j?j=ip(j,ee):j=ee);const V=r.getResolution(this.wrappedTileCoord_[0]),ae=Sne(e,i,Q,V);if(!isFinite(ae)||ae<=0){this.state=Pi.EMPTY;return}const ne=S!==void 0?S:zz;if(this.triangulation_=new Fz(e,i,Q,j,ae*ne,V),this.triangulation_.getTriangles().length===0){this.state=Pi.EMPTY;return}this.sourceZ_=t.getZForResolution(ae);let Z=this.triangulation_.calculateSourceExtent();if(j&&(e.canWrapX()?(Z[1]=GA(Z[1],j[1],j[3]),Z[3]=GA(Z[3],j[1],j[3])):Z=ip(Z,j)),!z6(Z))this.state=Pi.EMPTY;else{let oe=0,W=0;e.canWrapX()&&(oe=as(ee),W=Math.floor((Z[0]-ee[0])/oe)),bF(Z.slice(),e,!0).forEach(ge=>{const ye=t.getTileRangeForExtentAndZ(ge,this.sourceZ_);for(let Me=ye.minX;Me<=ye.maxX;Me++)for(let Be=ye.minY;Be<=ye.maxY;Be++){const we=C(this.sourceZ_,Me,Be,o);if(we){const qe=W*oe;this.sourceTiles_.push({tile:we,offset:qe})}}++W}),this.sourceTiles_.length===0&&(this.state=Pi.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{const i=t.tile;if(i&&i.getState()==Pi.LOADED){const r=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);r[0]+=t.offset,r[2]+=t.offset;const a=this.clipExtent_?.slice();a&&(a[0]+=t.offset,a[2]+=t.offset),e.push({extent:r,clipExtent:a,image:i.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=Pi.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),r=typeof i=="number"?i:i[0],a=typeof i=="number"?i:i[1],l=this.targetTileGrid_.getResolution(t),o=this.sourceTileGrid_.getResolution(this.sourceZ_),m=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Lz(r,a,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),l,m,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Pi.LOADED}this.changed()}load(){if(this.state==Pi.IDLE){this.state=Pi.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const i=t.getState();if(i==Pi.IDLE||i==Pi.LOADING){e++;const r=Va(t,mo.CHANGE,a=>{const l=t.getState();(l==Pi.LOADED||l==Pi.ERROR||l==Pi.EMPTY)&&(Bl(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},i,r){t.getState()==Pi.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Bl),this.sourcesListenerKeys_=null}release(){this.canvas_&&(db(this.canvas_.getContext("2d")),vv.push(this.canvas_),this.canvas_=null),super.release()}}class Ene{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof ab&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return Ms(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return Ms(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){Ms(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}function f3(n,e,t,i){return i!==void 0?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function Bne(n,e,t){return n+"/"+e+"/"+t}function One(n){return Ine(n[0],n[1],n[2])}function Ine(n,e,t){return(e<<n)+t}function Tne(n,e){const t=n[0],i=n[1],r=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const a=e.getFullTileRange(t);return a?a.containsXY(i,r):!0}function dM(n,e,t,i,r){return`${Io(n)},${e},${Bne(t,i,r)}`}function fM(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const i=n[t],r=i.has(e);return r||i.add(e),!r}function kne(n,e,t){const i=n[t];return i?i.delete(e):!1}function iT(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=ip(e,Qp(t.extent,n.viewState.projection)));const i=t.layer.getRenderSource();if(!i.getWrapX()){const r=i.getTileGridForProjection(n.viewState.projection).getExtent();r&&(e=ip(e,r))}return e}class Gz extends qO{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=bm(),this.tempTileRange_=new VO(0,0,0,0),this.tempTileCoord_=f3(0,0,0);const i=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new Ene(i),this.maxStaleKeys=i*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,i,r){const a=this.tileCache_,o=this.getLayer().getSource(),m=dM(o,o.getKey(),e,t,i);let C;if(a.containsKey(m))C=a.get(m);else{if(C=o.getTile(e,t,i,r.pixelRatio,r.viewState.projection),!C)return null;a.set(m,C)}return C}getTile(e,t,i,r){const a=this.getOrCreateTile(e,t,i,r);return a||null}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=ec(t.pixelToCoordinateTransform,e.slice()),a=i.getExtent();if(a&&!Wg(a,r))return null;const l=t.viewState,o=i.getRenderSource(),m=o.getTileGridForProjection(l.projection),C=o.getTilePixelRatio(t.pixelRatio);for(let S=m.getZForResolution(l.resolution);S>=m.getMinZoom();--S){const O=m.getTileCoordForCoordAndZ(r,S),U=this.getTile(S,O[1],O[2],t);if(!U||U.getState()!==Pi.LOADED)continue;const K=m.getOrigin(S),z=zh(m.getTileSize(S)),j=m.getResolution(S);let Q;if(U instanceof Ez||U instanceof Nz)Q=U.getImage();else if(U instanceof eT){if(Q=sB(U.getData()),!Q)continue}else continue;const ee=Math.floor(C*((r[0]-K[0])/j-O[1]*z[0])),V=Math.floor(C*((K[1]-r[1])/j-O[2]*z[1])),ae=Math.round(C*o.getGutterForProjection(l.projection));return this.getImageData(Q,ee+ae,V+ae)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const i=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==i&&(this.renderedSourceRevision_=i,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedSourceRevision_=i,!0}enqueueTiles(e,t,i,r,a){const l=e.viewState,o=this.getLayer(),m=o.getRenderSource(),C=m.getTileGridForProjection(l.projection),S=Io(m);S in e.wantedTiles||(e.wantedTiles[S]={});const O=e.wantedTiles[S],U=o.getMapInternal(),K=Math.max(i-a,C.getMinZoom(),C.getZForResolution(Math.min(o.getMaxResolution(),U?U.getView().getResolutionForZoom(Math.max(o.getMinZoom(),0)):C.getResolution(0)),m.zDirection)),z=l.rotation,j=z?CF(l.center,l.resolution,z,e.size):void 0;for(let Q=i;Q>=K;--Q){const ee=C.getTileRangeForExtentAndZ(t,Q,this.tempTileRange_),V=C.getResolution(Q);for(let ae=ee.minX;ae<=ee.maxX;++ae)for(let ne=ee.minY;ne<=ee.maxY;++ne){if(z&&!C.tileCoordIntersectsViewport([Q,ae,ne],j))continue;const Z=this.getTile(Q,ae,ne,e);if(!Z||!fM(r,Z,Q))continue;const W=Z.getKey();if(O[W]=!0,Z.getState()===Pi.IDLE&&!e.tileQueue.isKeyQueued(W)){const ue=f3(Q,ae,ne,this.tempTileCoord_);e.tileQueue.enqueue([Z,S,C.getTileCoordCenter(ue),V])}}}}findStaleTile_(e,t){const i=this.tileCache_,r=e[0],a=e[1],l=e[2],o=this.getStaleKeys();for(let m=0;m<o.length;++m){const C=dM(this.getLayer().getSource(),o[m],r,a,l);if(i.containsKey(C)){const S=i.peek(C);if(S.getState()===Pi.LOADED)return S.endTransition(Io(this)),fM(t,S,r),!0}}return!1}findAltTiles_(e,t,i,r){const a=e.getTileRangeForTileCoordAndZ(t,i,this.tempTileRange_);if(!a)return!1;let l=!0;const o=this.tileCache_,m=this.getLayer().getRenderSource(),C=m.getKey();for(let S=a.minX;S<=a.maxX;++S)for(let O=a.minY;O<=a.maxY;++O){const U=dM(m,C,i,S,O);let K=!1;if(o.containsKey(U)){const z=o.peek(U);z.getState()===Pi.LOADED&&(fM(r,z,i),K=!0)}K||(l=!1)}return l}renderFrame(e,t){this.renderComplete=!0;const i=e.layerStatesArray[e.layerIndex],r=e.viewState,a=r.projection,l=r.resolution,o=r.center,m=e.pixelRatio,C=this.getLayer(),S=C.getSource(),O=S.getTileGridForProjection(a),U=O.getZForResolution(l,S.zDirection),K=O.getResolution(U),z=S.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==z&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=z):this.renderedSourceKey_=z;let j=e.extent;const Q=S.getTilePixelRatio(m);this.prepareContainer(e,t);const ee=this.context.canvas.width,V=this.context.canvas.height,ae=i.extent&&Qp(i.extent);ae&&(j=ip(j,Qp(i.extent)));const ne=K*ee/2/Q,Z=K*V/2/Q,oe=[o[0]-ne,o[1]-Z,o[0]+ne,o[1]+Z],W={};this.renderedTiles.length=0;const ue=C.getPreload();if(e.nextExtent){const yt=O.getZForResolution(r.nextResolution,S.zDirection),nt=iT(e,e.nextExtent);this.enqueueTiles(e,nt,yt,W,ue)}const ge=iT(e,j);if(this.enqueueTiles(e,ge,U,W,0),ue>0&&setTimeout(()=>{this.enqueueTiles(e,ge,U-1,W,ue-1)},0),!(U in W))return this.container;const ye=Io(this),Me=e.time;for(const yt of W[U]){const nt=yt.getState();if(nt===Pi.EMPTY)continue;const be=yt.tileCoord;if(nt===Pi.LOADED&&yt.getAlpha(ye,Me)===1){yt.endTransition(ye);continue}if(nt!==Pi.ERROR&&(this.renderComplete=!1),this.findStaleTile_(be,W)){kne(W,yt,U),e.animate=!0;continue}if(this.findAltTiles_(O,be,U+1,W))continue;const lt=O.getMinZoom();for(let It=U-1;It>=lt&&!this.findAltTiles_(O,be,It,W);--It);}const Be=K/l*m/Q,we=this.getRenderContext(e);Jp(this.tempTransform,ee/2,V/2,Be,Be,0,-ee/2,-V/2),i.extent&&this.clipUnrotated(we,e,ae),S.getInterpolate()||(we.imageSmoothingEnabled=!1),this.preRender(we,e);const qe=Object.keys(W).map(Number);qe.sort($p);let xe;const ze=[],ot=[];for(let yt=qe.length-1;yt>=0;--yt){const nt=qe[yt],be=S.getTilePixelSize(nt,m,a),tt=O.getResolution(nt)/K,lt=be[0]*tt*Be,It=be[1]*tt*Be,pt=O.getTileCoordForCoordAndZ(G0(oe),nt),St=O.getTileCoordExtent(pt),Rt=ec(this.tempTransform,[Q*(St[0]-oe[0])/K,Q*(oe[3]-St[3])/K]),Le=Q*S.getGutterForProjection(a);for(const Pe of W[nt]){if(Pe.getState()!==Pi.LOADED)continue;const Re=Pe.tileCoord,He=pt[1]-Re[1],bt=Math.round(Rt[0]-(He-1)*lt),vt=pt[2]-Re[2],Ot=Math.round(Rt[1]-(vt-1)*It),qt=Math.round(Rt[0]-He*lt),Kt=Math.round(Rt[1]-vt*It),on=bt-qt,Jn=Ot-Kt,Wt=qe.length===1;let $n=!1;xe=[qt,Kt,qt+on,Kt,qt+on,Kt+Jn,qt,Kt+Jn];for(let On=0,Bn=ze.length;On<Bn;++On)if(!Wt&&nt<ot[On]){const In=ze[On];uu([qt,Kt,qt+on,Kt+Jn],[In[0],In[3],In[4],In[7]])&&($n||(we.save(),$n=!0),we.beginPath(),we.moveTo(xe[0],xe[1]),we.lineTo(xe[2],xe[3]),we.lineTo(xe[4],xe[5]),we.lineTo(xe[6],xe[7]),we.moveTo(In[6],In[7]),we.lineTo(In[4],In[5]),we.lineTo(In[2],In[3]),we.lineTo(In[0],In[1]),we.clip())}ze.push(xe),ot.push(nt),this.drawTile(Pe,e,qt,Kt,on,Jn,Le,Wt),$n&&we.restore(),this.renderedTiles.unshift(Pe),this.updateUsedTiles(e.usedTiles,S,Pe)}}if(this.renderedResolution=K,this.extentChanged=!this.renderedExtent_||!L0(this.renderedExtent_,oe),this.renderedExtent_=oe,this.renderedPixelRatio=m,this.postRender(this.context,e),i.extent&&we.restore(),we.imageSmoothingEnabled=!0,this.renderComplete){const yt=(nt,be)=>{const Ne=Io(S),tt=be.wantedTiles[Ne],lt=tt?Object.keys(tt).length:0;this.updateCacheSize(lt),this.tileCache_.expireCache()};e.postRenderFunctions.push(yt)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,i,r,a,l,o,m){let C;if(e instanceof eT){if(C=sB(e.getData()),!C)throw new Error("Rendering array data is not yet supported")}else C=this.getTileImage(e);if(!C)return;const S=this.getRenderContext(t),O=Io(this),U=t.layerStatesArray[t.layerIndex],K=U.opacity*(m?e.getAlpha(O,t.time):1),z=K!==S.globalAlpha;z&&(S.save(),S.globalAlpha=K),S.drawImage(C,o,o,C.width-2*o,C.height-2*o,i,r,a,l),z&&S.restore(),K!==U.opacity?t.animate=!0:m&&e.endTransition(O)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,i){const r=Io(t);r in e||(e[r]={}),e[r][i.getKey()]=!0}}const E1={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class Dne extends Hv{constructor(e){e=e||{};const t=Object.assign({},e),i=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(E1.PRELOAD)}setPreload(e){this.set(E1.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(E1.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(E1.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class jz extends Dne{constructor(e){super(e)}createRenderer(){return new Gz(this,{cacheSize:this.getCacheSize()})}}const Rne={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},rT={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class Pne extends Gz{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=Yd(),this.tileClipContexts_=null}drawTile(e,t,i,r,a,l,o,m){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,i,r,a,l,o,m)}getTile(e,t,i,r){const a=this.getOrCreateTile(e,t,i,r);if(!a)return null;const o=r.viewState.resolution,m=r.viewHints;return(!(m[vA.ANIMATING]||m[vA.INTERACTING])||!a.wantedResolution)&&(a.wantedResolution=o),a}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,i){const r=this.getLayer(),a=r.getRevision(),l=r.getRenderOrder()||null,o=e.wantedResolution,m=e.getReplayState(r);if(!m.dirty&&m.renderedResolution===o&&m.renderedRevision==a&&m.renderedRenderOrder==l)return;const C=r.getSource(),S=!!r.getDeclutter(),O=C.getTileGrid(),K=C.getTileGridForProjection(i).getTileCoordExtent(e.wrappedTileCoord),z=C.getSourceTiles(t,i,e),j=Io(r);delete e.hitDetectionImageData[j],e.executorGroups[j]=[],m.dirty=!1;for(let Q=0,ee=z.length;Q<ee;++Q){const V=z[Q];if(V.getState()!=Pi.LOADED)continue;const ae=V.tileCoord,ne=O.getTileCoordExtent(ae),Z=ip(K,ne),oe=D1(Z,r.getRenderBuffer()*o,this.tempExtent),W=L0(ne,Z)?null:oe,ue=new xz(0,Z,o,t),ge=nB(o,t),ye=function(xe,ze){let ot;const yt=xe.getStyleFunction()||r.getStyleFunction();if(yt&&(ot=yt(xe,o)),ot){const nt=this.renderFeature(xe,ge,ot,ue,S,ze);m.dirty=m.dirty||nt}},Me=V.getFeatures();l&&l!==m.renderedRenderOrder&&Me.sort(l);for(let xe=0,ze=Me.length;xe<ze;++xe){const ot=Me[xe];(!W||uu(W,ot.getGeometry().getExtent()))&&ye.call(this,ot,xe)}const Be=ue.finish(),we=r.getRenderMode()!=="vector"&&S&&z.length===1?null:Z,qe=new Mz(we,o,t,C.getOverlaps(),Be,r.getRenderBuffer(),!0);e.executorGroups[j].push(qe)}m.renderedRevision=a,m.renderedRenderOrder=l,m.renderedResolution=o}forEachFeatureAtCoordinate(e,t,i,r,a){const l=t.viewState.resolution,o=t.viewState.rotation;i=i??0;const m=this.getLayer(),S=m.getSource().getTileGridForProjection(t.viewState.projection),O=L6([e]);D1(O,l*i,O);const U={},K=function(ae,ne,Z){let oe=ae.getId();oe===void 0&&(oe=Io(ae));const W=U[oe];if(W){if(W!==!0&&Z<W.distanceSq){if(Z===0)return U[oe]=!0,a.splice(a.lastIndexOf(W),1),r(ae,m,ne);W.geometry=ne,W.distanceSq=Z}}else{if(Z===0)return U[oe]=!0,r(ae,m,ne);a.push(U[oe]={feature:ae,layer:m,geometry:ne,distanceSq:Z,callback:r})}},z=this.renderedTiles,j=Io(m),Q=m.getDeclutter(),ee=Q?t.declutter?.[Q]?.all().map(ae=>ae.value):null;let V;e:for(let ae=0,ne=z.length;ae<ne;++ae){const Z=z[ae],oe=S.getTileCoordExtent(Z.wrappedTileCoord);if(!uu(oe,O))continue;const W=Z.executorGroups[j];for(let ue=0,ge=W.length;ue<ge;++ue)if(V=W[ue].forEachFeatureAtCoordinate(e,l,o,i,K,ee),V)break e}return V}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,i)=>{const r=this.getLayer(),a=r.getSource(),l=this.renderedProjection,o=l.getExtent(),m=this.renderedResolution,C=a.getTileGridForProjection(l),S=ec(this.renderedPixelToCoordinateTransform_,e.slice()),O=C.getTileCoordForCoordAndResolution(S,m).toString(),U=this.renderedTiles.find(ae=>ae.tileCoord.toString()===O&&ae.getState()===Pi.LOADED);if(!U||U.loadingSourceTiles>0){t([]);return}a.getWrapX()&&l.canWrapX()&&!Wp(o,C.getTileCoordExtent(U.tileCoord))&&cO(S,l);const K=Io(r),z=C.getTileCoordExtent(U.wrappedTileCoord),j=G0(z),Q=[(S[0]-j[0])/m,(j[1]-S[1])/m],ee=U.getSourceTiles().reduce((ae,ne)=>ae.concat(ne.getFeatures()),[]);let V=U.hitDetectionImageData[K];if(!V){const ae=zh(C.getTileSize(C.getZForResolution(m,a.zDirection))),ne=this.renderedRotation_,Z=[this.getRenderTransform(C.getTileCoordCenter(U.wrappedTileCoord),m,0,Mf,ae[0]*Mf,ae[1]*Mf,0)];V=Sz(ae,Z,ee,r.getStyleFunction(),C.getTileCoordExtent(U.wrappedTileCoord),U.getReplayState(r).renderedResolution,ne),U.hitDetectionImageData[K]=V}t(wz(Q,ee,V))})}getFeaturesInExtent(e){const t=[],i=this.getTileCache();if(i.getCount()===0)return t;const a=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),l=a.getZForResolution(this.renderedResolution),o={};return i.forEach(m=>{if(m.tileCoord[0]!==l||m.getState()!==Pi.LOADED)return;const C=m.getSourceTiles();for(let S=0,O=C.length;S<O;++S){const U=C[S],K=U.getKey();if(K in o)continue;o[K]=!0;const z=U.tileCoord;if(uu(e,a.getTileCoordExtent(z))){const j=U.getFeatures();if(j)for(let Q=0,ee=j.length;Q<ee;++Q){const V=j[Q],ae=V.getGeometry();uu(e,ae.getExtent())&&t.push(V)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){const i=this.context,r=i.globalAlpha;i.globalAlpha=t.opacity;const a=e.viewHints,l=!(a[vA.ANIMATING]||a[vA.INTERACTING]),o=[this.context.canvas.width,this.context.canvas.height],m=this.getLayer().getDeclutter(),C=m?e.declutter?.[m]:void 0,S=Io(this.getLayer()),O=this.renderedTiles;for(let U=0,K=O.length;U<K;++U){const z=O[U],j=z.executorGroups[S];if(j)for(let Q=j.length-1;Q>=0;--Q)j[Q].execute(this.context,o,this.getTileRenderTransform(z,e),e.viewState.rotation,l,c3,C)}i.globalAlpha=r}renderDeferredInternal(e){const t=this.renderedTiles,i=Io(this.getLayer()),r=t.reduce((m,C,S)=>(C.executorGroups[i].forEach(O=>m.push({executorGroup:O,index:S})),m),[]),a=r.map(({executorGroup:m})=>m.getDeferredZIndexContexts()),l={};for(let m=0,C=r.length;m<C;++m){const S=r[m].executorGroup.getDeferredZIndexContexts();for(const O in S)l[O]=!0}Object.keys(l).map(Number).sort($p).forEach(m=>{a.forEach((C,S)=>{C[m]&&(C[m].forEach(O=>{const{executorGroup:U,index:K}=r[S],z=U.getRenderedContext(),j=z.globalAlpha;z.globalAlpha=this.renderedOpacity_;const Q=this.tileClipContexts_[K];Q&&Q.draw(z),O.draw(z),Q&&z.restore(),z.globalAlpha=j,O.clear()}),C[m].length=0)})})}getTileRenderTransform(e,t){const i=t.pixelRatio,r=t.viewState,a=r.center,l=r.resolution,o=r.rotation,m=t.size,C=Math.round(m[0]*i),S=Math.round(m[1]*i),U=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),K=e.tileCoord,z=U.getTileCoordExtent(e.wrappedTileCoord),j=U.getTileCoordExtent(K,this.tempExtent)[0]-z[0];return gO(z4(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(a,l,o,i,C,S,j))}postRender(e,t){const i=t.viewHints,r=!(i[vA.ANIMATING]||i[vA.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const a=this.getLayer(),l=a.getRenderMode(),o=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const m=a.getDeclutter(),C=m?rT[l].filter(Z=>!c3.includes(Z)):rT[l],S=t.viewState,O=S.rotation,U=a.getSource(),z=U.getTileGridForProjection(S.projection).getZForResolution(S.resolution,U.zDirection),j=this.renderedTiles,Q=[],ee=[],V=[],ae=Io(a);let ne=!0;for(let Z=j.length-1;Z>=0;--Z){const oe=j[Z];ne=ne&&!oe.getReplayState(a).dirty;const W=oe.executorGroups[ae].filter(qe=>qe.hasExecutors(C));if(W.length===0)continue;const ue=this.getTileRenderTransform(oe,t),ge=oe.tileCoord[0];let ye=!1;const Me=W[0].getClipCoords(ue);let Be=e,we;if(Me){we=new YO,Be=we.getContext();for(let qe=0,xe=Q.length;qe<xe;++qe)if(z!==ge&&ge<ee[qe]){const ze=Q[qe];uu([Me[0],Me[3],Me[4],Me[7]],[ze[0],ze[3],ze[4],ze[7]])&&(ye||(Be.save(),ye=!0),Be.beginPath(),Be.moveTo(Me[0],Me[1]),Be.lineTo(Me[2],Me[3]),Be.lineTo(Me[4],Me[5]),Be.lineTo(Me[6],Me[7]),Be.moveTo(ze[6],ze[7]),Be.lineTo(ze[4],ze[5]),Be.lineTo(ze[2],ze[3]),Be.lineTo(ze[0],ze[1]),Be.clip())}Q.push(Me),ee.push(ge)}for(let qe=0,xe=W.length;qe<xe;++qe)W[qe].execute(e,[e.canvas.width,e.canvas.height],ue,O,r,C,t.declutter?.[m]);ye&&(Be===e?Be.restore():V[Z]=we)}e.globalAlpha=o,this.ready=ne,this.tileClipContexts_=V,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,i,r,a,l){if(!i)return!1;let o=!1;if(Array.isArray(i))for(let m=0,C=i.length;m<C;++m)o=A3(r,e,i[m],t,this.boundHandleStyleImageChange_,void 0,a,l)||o;else o=A3(r,e,i,t,this.boundHandleStyleImageChange_,void 0,a,l);return o}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const i=e.getReplayState(t),r=t.getRevision(),a=e.wantedResolution;return i.renderedTileResolution!==a||i.renderedTileRevision!==r}renderTileImage_(e,t){const i=this.getLayer(),r=e.getReplayState(i),a=i.getRevision(),l=e.executorGroups[Io(i)];r.renderedTileRevision=a;const o=e.wrappedTileCoord,m=o[0],C=i.getSource();let S=t.pixelRatio;const U=t.viewState.projection,K=C.getTileGridForProjection(U),z=K.getResolution(e.tileCoord[0]),j=t.pixelRatio/e.wantedResolution*z,Q=K.getResolution(m),ee=e.getContext();S=Math.round(Math.max(S,j/S));const V=C.getTilePixelSize(m,S,U);ee.canvas.width=V[0],ee.canvas.height=V[1];const ae=S/j;if(ae!==1){const W=r9(this.tmpTransform_);z4(W,ae,ae),ee.setTransform.apply(ee,W)}const ne=K.getTileCoordExtent(o,this.tempExtent),Z=j/Q,oe=r9(this.tmpTransform_);z4(oe,Z,-Z),cX(oe,-ne[0],-ne[3]);for(let W=0,ue=l.length;W<ue;++W)l[W].execute(ee,[ee.canvas.width*ae,ee.canvas.height*ae],oe,0,!0,Rne[i.getRenderMode()],null);r.renderedTileResolution=e.wantedResolution}}class t_ extends WO{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const i=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i;const r=e.renderMode||"hybrid";Ms(r=="hybrid"||r=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=r,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new Pne(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(E1.PRELOAD)}getUseInterimTilesOnError(){return this.get(E1.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(E1.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(E1.USE_INTERIM_TILES_ON_ERROR,e)}}function AB(n){return Array.isArray(n)?Math.min(...n):n}class Kne extends NO{constructor(e,t,i,r,a,l,o){let m=e.getExtent();m&&e.canWrapX()&&(m=m.slice(),m[0]=-1/0,m[2]=1/0);let C=t.getExtent();C&&t.canWrapX()&&(C=C.slice(),C[0]=-1/0,C[2]=1/0);const S=C?ip(i,C):i,O=Bf(S),U=lB(e,t,O,r),K=zz,z=new Fz(e,t,S,m,U*K,r),j=z.calculateSourceExtent(),Q=$g(j)?null:l(j,U,a),ee=Q?hr.IDLE:hr.EMPTY,V=Q?Q.getPixelRatio():1;super(i,r,V,ee),this.targetProj_=t,this.maxSourceExtent_=m,this.triangulation_=z,this.targetResolution_=r,this.targetExtent_=i,this.sourceImage_=Q,this.sourcePixelRatio_=V,this.interpolate_=o,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==hr.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==hr.LOADED){const t=as(this.targetExtent_)/this.targetResolution_,i=nc(this.targetExtent_)/this.targetResolution_;this.canvas_=Lz(t,i,this.sourcePixelRatio_,AB(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==hr.IDLE){this.state=hr.LOADING,this.changed();const e=this.sourceImage_.getState();e==hr.LOADED||e==hr.ERROR?this.reproject_():(this.sourceListenerKey_=Va(this.sourceImage_,mo.CHANGE,t=>{const i=this.sourceImage_.getState();(i==hr.LOADED||i==hr.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){Bl(this.sourceListenerKey_),this.sourceListenerKey_=null}}const nx=4,mM={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class Une extends Ap{constructor(e,t){super(e),this.image=t}}class Wz extends Vv{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const i=t2(t,e,0);e=t[i]}return e}getImage(e,t,i,r){const a=this.getProjection();if(!a||!r||R1(a,r))return a&&(r=a),this.getImageInternal(e,t,i,r);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&R1(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==t&&L0(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Kne(a,r,e,t,i,(l,o,m)=>this.getImageInternal(l,o,m,a),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,i,r){if(this.loader){const a=Lne(e,t,i,1),l=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===r&&(this.wantedExtent_&&Wp(this.wantedExtent_,a)||Wp(this.image.getExtent(),a))&&(this.wantedResolution_&&AB(this.wantedResolution_)===l||AB(this.image.getResolution())===l)))return this.image;this.wantedProjection_=r,this.wantedExtent_=a,this.wantedResolution_=l,this.image=new NO(a,l,i,this.loader),this.image.addEventListener(mo.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let i;switch(t.getState()){case hr.LOADING:this.loading=!0,i=mM.IMAGELOADSTART;break;case hr.LOADED:this.loading=!1,i=mM.IMAGELOADEND;break;case hr.ERROR:this.loading=!1,i=mM.IMAGELOADERROR;break;default:return}this.hasListener(i)&&this.dispatchEvent(new Une(i,t))}}function Lne(n,e,t,i){const r=e/t,a=Bf(n),l=x1(as(n)/r,nx),o=x1(nc(n)/r,nx),m=x1((i-1)*l/2,nx),C=l+2*m,S=x1((i-1)*o/2,nx),O=o+2*S;return Zx(a,r,0,[C,O])}const Ky=[0,0,0],d1=5;class M2{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Ms(sZ(this.resolutions_,(r,a)=>a-r),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let r=0,a=this.resolutions_.length-1;r<a;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Ms(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=G0(i)),Ms(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Ms(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:TO,Ms(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,a)=>{const l=new VO(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const o=this.getTileRangeForExtentAndZ(i,a);l.minX=Math.max(o.minX,l.minX),l.maxX=Math.min(o.maxX,l.maxX),l.minY=Math.max(o.minY,l.minY),l.maxY=Math.min(o.maxY,l.maxY)}return l}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const r=this.getTileRangeForExtentAndZ(e,t);for(let a=r.minX,l=r.maxX;a<=l;++a)for(let o=r.minY,m=r.maxY;o<=m;++o)i([t,a,o])}forEachTileCoordParentTileRange(e,t,i,r){let a,l,o,m=null,C=e[0]-1;for(this.zoomFactor_===2?(l=e[1],o=e[2]):m=this.getTileCoordExtent(e,r);C>=this.minZoom;){if(l!==void 0&&o!==void 0?(l=Math.floor(l/2),o=Math.floor(o/2),a=Dy(l,l,o,o,i)):a=this.getTileRangeForExtentAndZ(m,C,i),t(C,a))return!0;--C}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const a=e[1]*2,l=e[2]*2;return Dy(a,a+1,l,l+1,t)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],a=e[1],l=e[2];if(t===r)return Dy(a,l,a,l,i);if(this.zoomFactor_){const m=Math.pow(this.zoomFactor_,t-r),C=Math.floor(a*m),S=Math.floor(l*m);if(t<r)return Dy(C,C,S,S,i);const O=Math.floor(m*(a+1))-1,U=Math.floor(m*(l+1))-1;return Dy(C,O,S,U,i)}const o=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,Ky);const r=Ky[1],a=Ky[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,Ky);const l=Ky[1],o=Ky[2];return Dy(r,l,a,o,i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=zh(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),a=zh(this.getTileSize(e[0]),this.tmpSize_),l=i[0]+e[1]*a[0]*r,o=i[1]-(e[2]+1)*a[1]*r,m=l+a[0]*r,C=o+a[1]*r;return U0(l,o,m,C,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,r,a){const l=this.getZForResolution(i),o=i/this.getResolution(l),m=this.getOrigin(l),C=zh(this.getTileSize(l),this.tmpSize_);let S=o*(e-m[0])/i/C[0],O=o*(m[1]-t)/i/C[1];return r?(S=x1(S,d1)-1,O=x1(O,d1)-1):(S=jb(S,d1),O=jb(O,d1)),f3(l,S,O,a)}getTileCoordForXYAndZ_(e,t,i,r,a){const l=this.getOrigin(i),o=this.getResolution(i),m=zh(this.getTileSize(i),this.tmpSize_);let C=(e-l[0])/o/m[0],S=(l[1]-t)/o/m[1];return r?(C=x1(C,d1)-1,S=x1(S,d1)-1):(C=jb(C,d1),S=jb(S,d1)),f3(i,C,S,a)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=t2(this.resolutions_,e,t||0);return GA(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return NF(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}}function Qz(n){let e=n.getDefaultTileGrid();return e||(e=Nne(n),n.setDefaultTileGrid(e)),e}function Fne(n,e,t){const i=e[0],r=n.getTileCoordCenter(e),a=S2(t);if(!Wg(a,r)){const l=as(a),o=Math.ceil((a[0]-r[0])/l);return r[0]+=l*o,n.getTileCoordForCoordAndZ(r,i)}return e}function zne(n,e,t,i){i=i!==void 0?i:"top-left";const r=Yz(n,e,t);return new M2({extent:n,origin:bZ(n,i),resolutions:r,tileSize:t})}function t8(n){const e=n||{},t=e.extent||Ws("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Yz(t,e.maxZoom,e.tileSize,e.maxResolution)};return new M2(i)}function Yz(n,e,t,i){e=e!==void 0?e:QF,t=zh(t!==void 0?t:TO);const r=nc(n),a=as(n);i=i>0?i:Math.max(a/t[0],r/t[1]);const l=e+1,o=new Array(l);for(let m=0;m<l;++m)o[m]=i/Math.pow(2,m);return o}function Nne(n,e,t,i){const r=S2(n);return zne(r,e,t,i)}function S2(n){n=Ws(n);let e=n.getExtent();if(!e){const t=180*L1.degrees/n.getMetersPerUnit();e=U0(-t,-t,t,t)}return e}class qz extends Vv{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&zh(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Io(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,r,a){return Co()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:Qz(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),a=this.getTilePixelRatio(t),l=zh(r.getTileSize(e),this.tmpSize);return a==1?l:TJ(l,a,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const i=t!==void 0?t:this.getProjection(),r=t!==void 0?this.getTileGridForProjection(i):this.tileGrid||this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(e=Fne(r,e,i)),Tne(e,r)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class Gne extends Ap{constructor(e,t){super(e),this.tile=t}}function Hz(n){return function(e){const t=e.buffers,i=e.meta,r=e.imageOps,a=e.width,l=e.height,o=t.length,m=t[0].byteLength;if(r){const U=new Array(o);for(let z=0;z<o;++z)U[z]=new ImageData(new Uint8ClampedArray(t[z]),a,l);return n(U,i).data.buffer}const C=new Uint8ClampedArray(m),S=new Array(o),O=new Array(o);for(let U=0;U<o;++U)S[U]=new Uint8ClampedArray(t[U]),O[U]=[0,0,0,0];for(let U=0;U<m;U+=4){for(let z=0;z<o;++z){const j=S[z];O[z][0]=j[U],O[z][1]=j[U+1],O[z][2]=j[U+2],O[z][3]=j[U+3]}const K=n(O,i);C[U]=K[0],C[U+1]=K[1],C[U+2]=K[2],C[U+3]=K[3]}return C.buffer}}function jne(n,e){const i=Object.keys(n.lib||{}).map(function(a){return"const "+a+" = "+n.lib[a].toString()+";"}).concat(["const __minion__ = ("+Hz.toString()+")(",n.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(i.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(i,{type:"text/javascript"})));return r.addEventListener("message",e),r}function Wne(n,e){const t=Hz(n.operation);let i=!1;return{postMessage:function(r){setTimeout(function(){i||e({data:{buffer:t(r),meta:r.meta}})},0)},terminate:function(){i=!0}}}class Qne extends ab{constructor(e){super(),this.imageOps_=!!e.imageOps;let t;e.threads===0?t=0:this.imageOps_?t=1:t=e.threads||1;const i=new Array(t);if(t)for(let r=0;r<t;++r)i[r]=jne(e,this.onWorkerMessage_.bind(this,r));else i[0]=Wne(e,this.onWorkerMessage_.bind(this,0));this.workers_=i,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,t,i){this.enqueue_({inputs:e,meta:t,callback:i}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const e=this.queue_.shift();this.job_=e;const t=e.inputs[0].width,i=e.inputs[0].height,r=e.inputs.map(function(m){return m.data.buffer}),a=this.workers_.length;if(this.running_=a,a===1){this.workers_[0].postMessage({buffers:r,meta:e.meta,imageOps:this.imageOps_,width:t,height:i},r);return}const l=e.inputs[0].data.length,o=4*Math.ceil(l/4/a);for(let m=0;m<a;++m){const C=m*o,S=[];for(let O=0,U=r.length;O<U;++O)S.push(r[O].slice(C,C+o));this.workers_[m].postMessage({buffers:S,meta:e.meta,imageOps:this.imageOps_,width:t,height:i},S)}}onWorkerMessage_(e,t){this.disposed||(this.dataLookup_[e]=t.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const e=this.job_,t=this.workers_.length;let i,r;if(t===1)i=new Uint8ClampedArray(this.dataLookup_[0].buffer),r=this.dataLookup_[0].meta;else{const a=e.inputs[0].data.length;i=new Uint8ClampedArray(a),r=new Array(t);const l=4*Math.ceil(a/4/t);for(let o=0;o<t;++o){const m=this.dataLookup_[o].buffer,C=o*l;i.set(new Uint8ClampedArray(m),C),r[o]=this.dataLookup_[o].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(i,e.inputs[0].width,e.inputs[0].height),r),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}}const oT={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class aT extends Ap{constructor(e,t,i){super(e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=i}}class Vz extends Wz{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=Hne(e.sources);const t=this.changed.bind(this);for(let i=0,r=this.layers_.length;i<r;++i)this.layers_[i].addEventListener(mo.CHANGE,t);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new fF(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:Yd(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:qne(this.layers_),pixelRatio:1,pixelToCoordinateTransform:Yd(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Io(this),renderTargets:{}},this.setAttributions(function(i){const r=[];for(let a=0,l=e.sources.length;a<l;++a){const o=e.sources[a],m=o instanceof Vv?o:o.getSource();if(!m)continue;const C=m.getAttributions()?.(i);typeof C=="string"?r.push(C):C!==void 0&&r.push(...C)}return r}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new Qne({operation:e,imageOps:this.operationType_==="image",queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,i){const r=Object.assign({},this.frameState_);r.viewState=Object.assign({},r.viewState);const a=Bf(e);r.size[0]=Math.ceil(as(e)/t),r.size[1]=Math.ceil(nc(e)/t),r.extent=[a[0]-r.size[0]*t/2,a[1]-r.size[1]*t/2,a[0]+r.size[0]*t/2,a[1]+r.size[1]*t/2],r.time=Date.now();const l=r.viewState;return l.center=a,l.projection=i,l.resolution=t,r}allSourcesReady_(){let e=!0,t;for(let i=0,r=this.layers_.length;i<r;++i)if(t=this.layers_[i].getSource(),!t||t.getState()!=="ready"){e=!1;break}return e}getImage(e,t,i,r){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);const a=this.updateFrameState_(e,t,r);if(this.requestedFrameState_=a,this.renderedImageCanvas_){const l=this.renderedImageCanvas_.getResolution(),o=this.renderedImageCanvas_.getExtent();(t!==l||!L0(a.extent,o))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),a.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,i=new Array(t);for(let a=0;a<t;++a){e.layerIndex=a,e.renderTargets={};const l=Yne(this.layers_[a],e);if(l)i[a]=l;else return}const r={};this.dispatchEvent(new aT(oT.BEFOREOPERATIONS,e,r)),this.processor_.process(i,r,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,i,r){if(t||!i)return;const a=e.extent,l=e.viewState.resolution;if(l!==this.requestedFrameState_.viewState.resolution||!L0(a,this.requestedFrameState_.extent))return;let o;if(this.renderedImageCanvas_)o=this.renderedImageCanvas_.getImage().getContext("2d");else{const m=Math.round(as(a)/l),C=Math.round(nc(a)/l);o=jA(m,C),this.renderedImageCanvas_=new fte(a,l,1,o.canvas)}o.putImageData(i,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new aT(oT.AFTEROPERATIONS,e,r))}getResolutions(e){if(!this.useResolutions_)return null;let t=super.getResolutions();if(!t)for(let i=0,r=this.layers_.length;i<r&&(t=this.layers_[i].getSource().getResolutions(e),!t);++i);return t}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}Vz.prototype.dispose;let gg=null;function Yne(n,e){const t=n.getRenderer();if(!t)throw new Error("Unsupported layer type: "+n);if(!t.prepareFrame(e))return null;const i=e.size[0],r=e.size[1];if(i===0||r===0)return null;const a=t.renderFrame(e,null);let l;if(a instanceof HTMLCanvasElement)l=a;else{if(a&&(l=a.firstElementChild),!(l instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+l);if(l.width===i&&l.height===r)return l.getContext("2d").getImageData(0,0,i,r)}if(!gg)gg=jA(i,r,void 0,{willReadFrequently:!0});else{const o=gg.canvas;o.width!==i||o.height!==r?gg=jA(i,r,void 0,{willReadFrequently:!0}):gg.clearRect(0,0,i,r)}return gg.drawImage(l,0,0,i,r),gg.getImageData(0,0,i,r)}function qne(n){return n.map(function(e){return e.getLayerState()})}function Hne(n){const e=n.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=Vne(n[i]);return t}function Vne(n){let e;return n instanceof Vv?n instanceof qz?e=new jz({source:n}):n instanceof Wz&&(e=new Uz({source:n})):e=n,e}function $ne(n,e,t,i){const r=document.createElement("script"),a="olc_"+Io(e);function l(){delete window[a],r.parentNode.removeChild(r)}r.async=!0,r.src=n+(n.includes("?")?"&":"?")+"callback="+a;const o=setTimeout(function(){l(),t&&t()},1e4);window[a]=function(m){clearTimeout(o),l(),e(m)},document.head.appendChild(r)}const Zne=/\{z\}/g,Xne=/\{x\}/g,Jne=/\{y\}/g,eie=/\{-y\}/g;function tie(n,e,t,i,r){return n.replace(Zne,e.toString()).replace(Xne,t.toString()).replace(Jne,i.toString()).replace(eie,function(){if(r===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(r-i).toString()})}function nie(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let a;for(a=i;a<=r;++a)e.push(n.replace(t[0],String.fromCharCode(a)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=i;r++)e.push(n.replace(t[0],r.toString()));return e}return e.push(n),e}function iie(n,e){return function(t,i,r){if(!t)return;let a;const l=t[0];if(e){const o=e.getFullTileRange(l);o&&(a=o.getHeight()-1)}return tie(n,l,t[1],t[2],a)}}function $z(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=iie(n[r],e);return rie(i)}function rie(n){return n.length===1?n[0]:function(e,t,i){if(!e)return;const r=One(e),a=Ug(r,n.length);return n[a](e,t,i)}}const pM={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class w2 extends qz{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===w2.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=Io(t),r=t.getState();let a;r==Pi.LOADING?(this.tileLoadingKeys_[i]=!0,a=pM.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],a=r==Pi.ERROR?pM.TILELOADERROR:r==Pi.LOADED?pM.TILELOADEND:void 0),a!=null&&this.dispatchEvent(new Gne(a,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=nie(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction($z(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}}class oie extends w2{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:aie,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Ez,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!R1(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||R1(t,e)))return this.tileGrid;const i=Io(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Qz(e)),this.tileGridForProjection[i]}createTile_(e,t,i,r,a,l){const o=[e,t,i],m=this.getTileCoordForTileUrlFunction(o,a),C=m?this.tileUrlFunction(m,r,a):void 0,S=new this.tileClass(o,C!==void 0?Pi.IDLE:Pi.EMPTY,C!==void 0?C:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return S.key=l,S.addEventListener(mo.CHANGE,this.handleTileChange.bind(this)),S}getTile(e,t,i,r,a){const l=this.getProjection();if(!l||!a||R1(l,a))return this.getTileInternal(e,t,i,r,l||a);const o=[e,t,i],m=this.getKey(),C=this.getTileGridForProjection(l),S=this.getTileGridForProjection(a),O=this.getTileCoordForTileUrlFunction(o,a),U=new Nz(l,C,a,S,o,O,this.getTilePixelRatio(r),this.getGutter(),(K,z,j,Q)=>this.getTileInternal(K,z,j,Q,l),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return U.key=m,U}getTileInternal(e,t,i,r,a){const l=this.getKey();return this.createTile_(e,t,i,r,a,l)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const i=Ws(e);if(i){const r=Io(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}}function aie(n,e){n.getImage().src=e}class Zz extends oie{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:Ws("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)$ne(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let i;try{i=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(i)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=Ws("EPSG:4326"),i=this.getProjection();let r;if(e.bounds!==void 0){const C=cb(t,i);r=SZ(e.bounds,C)}const a=S2(i),l=e.minzoom||0,o=e.maxzoom||22,m=t8({extent:a,maxZoom:o,minZoom:l,tileSize:this.tileSize_});if(this.tileGrid=m,this.tileUrlFunction=$z(e.tiles,m),e.attribution&&!this.getAttributions()){const C=r!==void 0?r:a;this.setAttributions(function(S){return uu(C,S.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class n8 extends w2{constructor(e){const t=e.projection||"EPSG:3857",i=e.extent||S2(t),r=e.tileGrid||t8({extent:i,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:r,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Xz,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:Bz,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,i){if(i.getState()===Pi.IDLE){i.setState(Pi.LOADING);const r=i.wrappedTileCoord,a=this.getTileGridForProjection(t),l=a.getTileCoordExtent(r),o=r[0],m=a.getResolution(o);D1(l,-m,l);const C=this.tileGrid,S=C.getExtent();S&&ip(l,S,l);const O=C.getZForResolution(m,this.zDirection);C.forEachTileCoord(l,O,U=>{const K=this.tileUrlFunction(U,e,t);this.sourceTiles_[K]||(this.sourceTiles_[K]=new this.tileClass(U,K?Pi.IDLE:Pi.EMPTY,K,this.format_,this.tileLoadFunction));const z=this.sourceTiles_[K];i.sourceTiles.push(z),this.tileKeysBySourceTileUrl_[K]||(this.tileKeysBySourceTileUrl_[K]=[]),this.tileKeysBySourceTileUrl_[K].push(i.getKey());const j=z.getState();if(j<Pi.LOADED){const Q=ee=>{this.handleTileChange(ee);const V=z.getState();if(V===Pi.LOADED||V===Pi.ERROR){const ae=z.getKey();ae in i.errorTileKeys?z.getState()===Pi.LOADED&&delete i.errorTileKeys[ae]:i.loadingSourceTiles--,V===Pi.ERROR?i.errorTileKeys[ae]=!0:z.removeEventListener(mo.CHANGE,Q),i.loadingSourceTiles===0&&i.setState(U1(i.errorTileKeys)?Pi.LOADED:Pi.ERROR)}};z.addEventListener(mo.CHANGE,Q),i.loadingSourceTiles++}j===Pi.IDLE&&(z.extent=C.getTileCoordExtent(U),z.projection=t,z.resolution=C.getResolution(U[0]),z.load())}),i.loadingSourceTiles||i.setState(i.sourceTiles.some(U=>U.getState()===Pi.ERROR)?Pi.ERROR:Pi.LOADED)}return i.sourceTiles}removeSourceTiles(e){const t=e.getKey(),i=e.sourceTiles;for(let r=0,a=i.length;r<a;++r){const l=i[r].getTileUrl();if(!this.tileKeysBySourceTileUrl_[l])return;const o=this.tileKeysBySourceTileUrl_[l].indexOf(t);o!==-1&&(this.tileKeysBySourceTileUrl_[l].splice(o,1),this.tileKeysBySourceTileUrl_[l].length===0&&(delete this.tileKeysBySourceTileUrl_[l],delete this.sourceTiles_[l]))}}getTile(e,t,i,r,a){const l=[e,t,i];let o=this.getTileCoordForTileUrlFunction(l,a);const m=this.getTileGrid().getExtent(),C=this.getTileGridForProjection(a);if(o&&m){const U=C.getTileCoordExtent(o);D1(U,-C.getResolution(e),U),uu(m,U)||(o=null)}let S=!0;if(o!==null){const U=this.tileGrid,K=C.getResolution(e),z=U.getZForResolution(K,1),j=C.getTileCoordExtent(o);D1(j,-K,j),U.forEachTileCoord(j,z,Q=>{S=S&&!this.tileUrlFunction(Q,r,a)})}const O=new gte(l,S?Pi.EMPTY:Pi.IDLE,o,this.getSourceTiles.bind(this,r,a),this.removeSourceTiles.bind(this));return O.key=this.getKey(),O}getTileGridForProjection(e){const t=e.getCode();let i=this.tileGrids_[t];if(!i){const r=this.getProjection();Ms(r===null||R1(r,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection.");const a=this.tileGrid,l=a.getResolutions().slice(),o=l.map(function(S,O){return a.getOrigin(O)}),m=l.map(function(S,O){return a.getTileSize(O)}),C=QF+1;for(let S=l.length;S<C;++S)l.push(l[S-1]/2),o.push(o[S-1]),m.push(m[S-1]);i=new M2({extent:a.getExtent(),origins:o,resolutions:l,tileSizes:m}),this.tileGrids_[t]=i}return i}getTilePixelRatio(e){return e}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),a=zh(r.getTileSize(e),this.tmpSize);return[Math.round(a[0]*t),Math.round(a[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function Xz(n,e){n.setLoader(function(t,i,r){bz(e,n.getFormat(),t,i,r,n.onLoad.bind(n),n.onError.bind(n))})}function sie(n,e){const t=n[0],i=t.width,r=t.height,a=t.data,l=new Uint8ClampedArray(a.length),o=e.resolution*2,m=i-1,C=r-1,S=[0,0,0,0],O=2*Math.PI,U=Math.PI/2,K=Math.PI*e.sunEl/180,z=Math.PI*e.sunAz/180,j=Math.cos(K),Q=Math.sin(K),ee=e.highlightColor,V=e.shadowColor,ae=e.accentColor,ne=e.encoding;let Z,oe,W,ue,ge,ye,Me,Be,we,qe,xe,ze,ot,yt,nt,be,Ne,tt,lt,It,pt,St;function Rt(Le,Pe="mapbox"){if(Pe==="mapbox")return(Le[0]*256*256+Le[1]*256+Le[2])*.1-1e4;if(Pe==="terrarium")return Le[0]*256+Le[1]+Le[2]/256-32768}for(oe=0;oe<=C;++oe)for(ge=oe===0?0:oe-1,ye=oe===C?C:oe+1,Z=0;Z<=m;++Z)W=Z===0?0:Z-1,ue=Z===m?m:Z+1,Me=(oe*i+W)*4,S[0]=a[Me],S[1]=a[Me+1],S[2]=a[Me+2],S[3]=a[Me+3],Be=e.vert*Rt(S,ne),Me=(oe*i+ue)*4,S[0]=a[Me],S[1]=a[Me+1],S[2]=a[Me+2],S[3]=a[Me+3],we=e.vert*Rt(S,ne),qe=(we-Be)/o,Me=(ge*i+Z)*4,S[0]=a[Me],S[1]=a[Me+1],S[2]=a[Me+2],S[3]=a[Me+3],Be=e.vert*Rt(S,ne),Me=(ye*i+Z)*4,S[0]=a[Me],S[1]=a[Me+1],S[2]=a[Me+2],S[3]=a[Me+3],we=e.vert*Rt(S,ne),xe=(we-Be)/o,ot=Math.atan2(xe,-qe),ot<0?ot=U-ot:ot>U?ot=O-ot+U:ot=U-ot,ze=Math.atan(Math.sqrt(qe*qe+xe*xe)),St=Q*Math.cos(ze)+j*Math.sin(ze)*Math.cos(z-ot),yt=Math.cos(ze),nt=255*St,lt=Math.min(Math.max(2*e.sunEl,0),1),It=1.875-e.opacity*1.75,pt=e.opacity!==.5?U*((Math.pow(It,ze)-1)/(Math.pow(It,U)-1)):ze,Ne={r:(1-yt)*ae.r*lt*255,g:(1-yt)*ae.g*lt*255,b:(1-yt)*ae.b*lt*255,a:(1-yt)*ae.a*lt*255},be=Math.abs(((ot+z)/Math.PI+.5)%2-1),tt={r:(ee.r*(1-be)+V.r*be)*nt,g:(ee.g*(1-be)+V.g*be)*nt,b:(ee.b*(1-be)+V.b*be)*nt,a:(ee.a*(1-be)+V.a*be)*nt},Me=(oe*i+Z)*4,l[Me]=Ne.r*(1-be)+tt.r,l[Me+1]=Ne.g*(1-be)+tt.g,l[Me+2]=Ne.b*(1-be)+tt.b,l[Me+3]=a[Me+3]*e.opacity*lt*Math.sin(pt);return new ImageData(l,i,r)}function lie(n,e=512){return n.getExtent()?t8({extent:n.getExtent(),tileSize:e,maxZoom:22}).getResolutions():Xp}function Jz(n,e){return e.accessToken||(e=Object.assign({},e),new URL(n).searchParams.forEach((i,r)=>{e.accessToken=i,e.accessTokenParam=r})),e}function Aie(n,e,t="",i={},r=void 0){let a,l,o,m,C=!0;return typeof t!="string"&&!Array.isArray(t)?(o=t,m=o.source||o.layers,i=o):m=t,typeof i=="string"?(a=i,o={}):(a=i.styleUrl,o=i),o.updateSource===!1&&(C=!1),r||(r=o.resolutions),!a&&typeof e=="string"&&!e.trim().startsWith("{")&&(a=e),a&&(a=a.startsWith("data:")?location.href:h3(a,o.accessToken),o=Jz(a,o)),new Promise(function(S,O){Tz(e,o).then(function(U){if(U.version!=8)return O(new Error("glStyle version 8 required."));if(!(n instanceof HO||n instanceof t_))return O(new Error("Can only apply to VectorLayer or VectorTileLayer"));const K=n instanceof t_?"vector":"geojson";if(m?Array.isArray(m)?l=U.layers.find(function(ne){return ne.id===m[0]}).source:l=m:(l=U.layers.find(function(ne){return ne.source&&U.sources[ne.source].type===K}).source,m=l),!l)return O(new Error(`No ${K} source found in the glStyle.`));function z(){if(!C)return Promise.resolve();if(n instanceof t_)return nN(U.sources[l],a,o).then(function(W){const ue=n.getSource();ue?W!==ue&&(ue.setTileUrlFunction(W.getTileUrlFunction()),typeof ue.setUrls=="function"&&typeof W.getUrls=="function"&&ue.setUrls(W.getUrls()),ue.format_||(ue.format_=W.format_),ue.getAttributions()||ue.setAttributions(W.getAttributions()),ue.getTileLoadFunction()===Xz&&ue.setTileLoadFunction(W.getTileLoadFunction()),R1(ue.getProjection(),W.getProjection())&&(ue.tileGrid=W.getTileGrid())):n.setSource(W);const ge=n.getSource().getTileGrid();!isFinite(n.getMaxResolution())&&!isFinite(n.getMinZoom())&&ge.getMinZoom()>0&&n.setMaxResolution(UC(Math.max(0,ge.getMinZoom()-1e-12),ge.getResolutions()))});const ne=U.sources[l];let Z=n.getSource();(!Z||Z.get("mapbox-source")!==ne)&&(Z=oN(ne,a,o));const oe=n.getSource();return oe?Z!==oe&&(oe.getAttributions()||oe.setAttributions(Z.getAttributions()),oe.format_||(oe.format_=Z.getFormat()),oe.url_=Z.getUrl()):n.setSource(Z),Promise.resolve()}let j,Q;const ee={},V={};function ae(){if(!Q&&(!U.sprite||ee)){if(o.projection&&!r){const W=Ws(o.projection).getUnits();W!=="m"&&(r=Xp.map(ue=>ue/L1[W]))}let ne;const Z=n.getSource();Z instanceof n8&&Z.format_ instanceof Kz&&(ne=Z.format_.layerName_),Q=Dte(n,U,m,r,ee,V,(oe,W=o.webfonts)=>wte(oe,W),o.getImage,ne),n.getStyle()?z().then(S).catch(O):O(new Error(`Nothing to show for source [${l}]`))}else Q?(n.setStyle(Q),z().then(S).catch(O)):O(new Error("Something went wrong trying to apply style."))}if(U.sprite){const ne=yte(U.sprite,o.accessToken,a||location.href);j=window.devicePixelRatio>=1.5?.5:1;const Z=j==.5?"@2x":"";Promise.all(ne.map(function(oe){const W=new URL(oe.url);let ue=W.origin+W.pathname+Z+".json"+W.search;return new Promise(function(ge,ye){Kv("Sprite",ue,o).then(ge).catch(function(Me){ue=W.origin+W.pathname+".json"+W.search,Kv("Sprite",ue,o).then(ge).catch(ye)})}).then(function(ge){ge===void 0&&O(new Error("No sprites found."));let ye;if(ye=W.origin+W.pathname+Z+".png"+W.search,o.transformRequest){const Me=o.transformRequest(ye,"SpriteImage")||ye;(Me instanceof Request||Me instanceof Promise)&&(ye=Me)}V[oe.id]=ye;for(const Me in ge){const Be=oe.id=="default"?Me:`${oe.id}:${Me}`;ee[Be]=ge[Me]}}).catch(function(ge){O(new Error(`Sprites cannot be loaded: ${ue}: ${ge.message}`))})})).then(ae).catch(O)}else ae()}).catch(O)})}function eN(n,e){let t;return n.some(function(i){if(i.id==e)return t=i.source,!0}),t}function uie(n,e){const t=n.bounds;if(t){const i=Q6([t[0],t[1]],e),r=Q6([t[2],t[3]],e);return[i[0],i[1],r[0],r[1]]}return Ws(e).getExtent()}function tN(n,e,t){const i=new Zz({tileJSON:e,tileSize:n.tileSize||e.tileSize||512}),r=i.getTileJSON(),a=i.getTileGrid(),l=Ws(t.projection||"EPSG:3857"),o=uie(r,l),m=l.getExtent(),C=r.minzoom||0,S=r.maxzoom||22,O={attributions:i.getAttributions(),projection:l,tileGrid:new M2({origin:m?G0(m):a.getOrigin(0),extent:o||a.getExtent(),minZoom:C,resolutions:lie(l,e.tileSize).slice(0,S+1),tileSize:a.getTileSize(0)})};return Array.isArray(r.tiles)?O.urls=r.tiles:O.url=r.tiles,O}function cie(n,e,t,i){const r={id:n.id,type:n.type},a=n.layout||{},l=n.paint||{};r.paint=l,Ef.zoom=XO(e,t.resolutions||Xp),Ef.distanceFromCenter=0;let o;const m=Cr(r,"paint","background-color",ep,i);return l["background-opacity"]!==void 0&&(o=Cr(r,"paint","background-opacity",ep,i)),a.visibility=="none"?void 0:p1(m,o)}function hie(n,e,t){const i=document.createElement("div");return i.className="ol-mapbox-style-background",i.style.position="absolute",i.style.width="100%",i.style.height="100%",new Hv({source:new Vv({}),render(r){const a=cie(n,r.viewState.resolution,e,t);return i.style.backgroundColor=a,i}})}function nN(n,e,t){return new Promise(function(i,r){kz(n,e,t).then(function({tileJson:a,tileLoadFunction:l}){const o=tN(n,a,t);o.tileLoadFunction=l,o.format=new Kz({layerName:"mvt:layer"});const m=new n8(o);m.set("mapbox-source",n),i(m)}).catch(r)})}function die(n,e,t){const i=new t_({declutter:!0,visible:!1});return nN(n,e,t).then(function(r){i.setSource(r)}).catch(function(r){i.setSource(void 0)}),i}function iN(n){return`{bbox-${(n?n.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function fie(n,e,t){return new Promise(function(i,r){kz(n,e,t).then(function({tileJson:a,tileLoadFunction:l}){const o=new Zz({interpolate:t.interpolate===void 0?!0:t.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:a});o.tileGrid=tN(n,a,t).tileGrid,t.projection&&(o.projection=Ws(t.projection));const m=o.getTileUrlFunction();l&&o.setTileLoadFunction(l),o.setTileUrlFunction(function(C,S,O){const U=iN(O);let K=m(C,S,O);if(K.indexOf(U)!=-1){const z=o.getTileGrid().getTileCoordExtent(C);K=K.replace(U,z.toString())}return K}),o.set("mapbox-source",n),i(o)}).catch(function(a){r(a)})})}function rN(n,e,t){const i=new jz;return fie(n,e,t).then(function(r){i.setSource(r)}).catch(function(){i.setSource(void 0)}),i}function mie(n,e,t){const i=rN(n,e,t);return new Uz({source:new Vz({operationType:"image",operation:sie,sources:[i]})})}function oN(n,e,t){const i=t.projection?new $9({dataProjection:t.projection}):new $9,r=n.data,a={};if(typeof r=="string"){const[o]=wx(r,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(o)){const C=(O,U,K)=>{const z=iN(K);return o.replace(z,`${O.join(",")}`)},S=new Sx({attributions:n.attribution,format:i,loader:(O,U,K,z,j)=>{const Q=typeof C=="function"?C(O,U,K):C;Kv("GeoJSON",Q,t).then(ee=>{const V=S.getFormat().readFeatures(ee,{featureProjection:K});S.addFeatures(V),z(V)}).catch(ee=>{S.removeLoadedExtent(O),j()})},strategy:Zee});return S.set("mapbox-source",n),S}const m=new Sx({attributions:n.attribution,format:i,url:o,loader:(C,S,O,U,K)=>{Kv("GeoJSON",o,t).then(z=>{const j=m.getFormat().readFeatures(z,{featureProjection:O});m.addFeatures(j),U(j)}).catch(z=>{m.removeLoadedExtent(C),K()})}});return m}a.features=i.readFeatures(r,{featureProjection:"EPSG:3857"});const l=new Sx(Object.assign({attributions:n.attribution,format:i},a));return l.set("mapbox-source",n),l}function pie(n,e,t){return new HO({declutter:!0,source:oN(n,e,t),visible:!1})}function gie(n,e,t){let i=null;return function(r){n.paint&&"raster-opacity"in n.paint&&r.frameState.viewState.zoom!==i&&(i=r.frameState.viewState.zoom,delete t[n.id],yie(n,e,i,t))}}function yie(n,e,t,i){Ef.zoom=t,Ef.distanceFromCenter=0;const r=Cr(n,"paint","raster-opacity",ep,i);e.setOpacity(r)}function vie(n,e){function t(){const i=e.get("mapbox-style");if(!i)return;const r=DB(i.layers),a=n.get("mapbox-layers"),l=r.filter(function(o){return a.includes(o.id)}).some(function(o){return!o.layout||!o.layout.visibility||o.layout.visibility==="visible"});n.get("visible")!==l&&n.setVisible(l)}n.on("change",t),t()}function Cie(n,e,t,i){const r=Iz(n),a=n.layers,l=t.type,o=t.source||eN(a,t.ref),m=n.sources[o];let C;if(l=="background")C=hie(t,i,r);else if(m.type=="vector")C=die(m,e,i);else if(m.type=="raster")C=rN(m,e,i),C.setVisible(t.layout?t.layout.visibility!=="none":!0),C.on("prerender",gie(t,C,r));else if(m.type=="geojson")C=pie(m,e,i);else if(m.type=="raster-dem"&&t.type=="hillshade"){const O=mie(m,e,i);C=O,O.getSource().on("beforeoperations",function(U){const K=U.data;K.resolution=W6(i.projection||"EPSG:3857",U.resolution,Bf(U.extent),"m"),Ef.zoom=XO(U.resolution,i.resolutions||Xp),Ef.distanceFromCenter=0,K.encoding=m.encoding,K.vert=5*Cr(t,"paint","hillshade-exaggeration",ep,r),K.sunAz=Cr(t,"paint","hillshade-illumination-direction",ep,r),K.sunEl=35,K.opacity=.3,K.highlightColor=Cr(t,"paint","hillshade-highlight-color",ep,r),K.shadowColor=Cr(t,"paint","hillshade-shadow-color",ep,r),K.accentColor=Cr(t,"paint","hillshade-accent-color",ep,r)}),C.setVisible(t.layout?t.layout.visibility!=="none":!0)}const S=o;return C&&C.set("mapbox-source",S),C}function sT(n,e,t,i){const r=[];let a=null;if(e instanceof C2){if(a=e.getView(),!a.isDef()&&!a.getRotation()&&!a.getResolutions()){const O=i.projection?Ws(i.projection):a.getProjection();a=new Xm(Object.assign(a.getProperties(),{maxResolution:Xp[0]/L1[O.getUnits()],projection:i.projection||a.getProjection()})),e.setView(a)}"center"in n&&!a.getCenter()&&a.setCenter(Q6(n.center,a.getProjection())),"zoom"in n&&a.getZoom()===void 0&&a.setResolution(Xp[0]/L1[a.getProjection().getUnits()]/Math.pow(2,n.zoom)),(!a.getCenter()||a.getZoom()===void 0)&&a.fit(a.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}e.set("mapbox-style",n),e.set("mapbox-metadata",{styleUrl:t,options:i});const l=n.layers;let o=[],m,C,S;for(let O=0,U=l.length;O<U;++O){const K=l[O],z=K.type;if(z=="heatmap"){console.debug(`layers[${O}].type "${z}" not supported`);continue}else S=K.source||eN(l,K.ref),(!S||S!=C)&&(o.length&&(r.push(lT(m,o,n,t,e,i)),o=[]),m=Cie(n,t,K,i),m instanceof HO||m instanceof t_||(o=[]),C=m.get("mapbox-source")),o.push(K.id)}return r.push(lT(m,o,n,t,e,i)),Promise.all(r)}function _ie(n,e,t={}){let i,r;if(typeof n=="string"||n instanceof HTMLElement?r=new C2({target:n}):r=n,typeof e=="string"){const a=e.startsWith("data:")?location.href:h3(e,t.accessToken);t=Jz(a,t),i=new Promise(function(l,o){Tz(e,t).then(function(m){sT(m,r,a,t).then(function(){l(r)}).catch(o)}).catch(function(m){o(new Error(`Could not load ${e}: ${m.message}`))})})}else i=new Promise(function(a,l){sT(e,r,!t.styleUrl||t.styleUrl.startsWith("data:")?location.href:h3(t.styleUrl,t.accessToken),t).then(function(){a(r)}).catch(l)});return i}function lT(n,e,t,i,r,a={}){let l=24,o=0;const m=t.layers;for(let C=0,S=m.length;C<S;++C){const O=m[C];e.indexOf(O.id)!==-1&&(l=Math.min("minzoom"in O?O.minzoom:0,l),o=Math.max("maxzoom"in O?O.maxzoom:24,o))}return new Promise(function(C,S){const O=function(){const K=n.getSource();if(!K||K.getState()==="error"){S(new Error("Error accessing data for source "+n.get("mapbox-source")));return}if("getTileGrid"in K){const z=K.getTileGrid();if(z){const j=z.getMinZoom();(l>0||j>0)&&n.setMaxResolution(Math.min(UC(Math.max(0,l-1e-12),Xp),UC(Math.max(0,j-1e-12),z.getResolutions()))),o<24&&n.setMinResolution(UC(o,Xp))}}else l>0&&n.setMaxResolution(UC(Math.max(0,l-1e-12),Xp));K instanceof Sx||K instanceof n8?Aie(n,t,e,Object.assign({styleUrl:i},a)).then(function(){vie(n,r),C()}).catch(S):C()};n.set("mapbox-layers",e);const U=r.getLayers();U.getArray().indexOf(n)===-1&&U.push(n),n.getSource()?O():n.once("change:source",O)})}function rr(){var n="/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",e="dc2d0d9fb603a0ec1169756b2d912bbbda7b931a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",statementMap:{0:{start:{line:11,column:2},end:{line:15,column:3}},1:{start:{line:12,column:4},end:{line:12,column:16}},2:{start:{line:14,column:4},end:{line:14,column:149}},3:{start:{line:14,column:103},end:{line:14,column:133}},4:{start:{line:18,column:24},end:{line:25,column:3}},5:{start:{line:28,column:14},end:{line:28,column:18}},6:{start:{line:30,column:19},end:{line:30,column:23}},7:{start:{line:32,column:4},end:{line:32,column:17}},8:{start:{line:33,column:4},end:{line:38,column:6}},9:{start:{line:39,column:4},end:{line:39,column:67}},10:{start:{line:42,column:4},end:{line:42,column:26}},11:{start:{line:42,column:19},end:{line:42,column:26}},12:{start:{line:43,column:4},end:{line:43,column:33}},13:{start:{line:44,column:4},end:{line:44,column:33}},14:{start:{line:47,column:4},end:{line:51,column:5}},15:{start:{line:48,column:6},end:{line:50,column:8}},16:{start:{line:54,column:4},end:{line:61,column:7}},17:{start:{line:62,column:16},end:{line:69,column:6}},18:{start:{line:70,column:4},end:{line:78,column:7}},19:{start:{line:71,column:21},end:{line:71,column:45}},20:{start:{line:72,column:6},end:{line:77,column:9}},21:{start:{line:79,column:22},end:{line:89,column:5}},22:{start:{line:80,column:19},end:{line:80,column:42}},23:{start:{line:81,column:21},end:{line:81,column:56}},24:{start:{line:82,column:6},end:{line:88,column:9}},25:{start:{line:90,column:4},end:{line:90,column:16}},26:{start:{line:91,column:4},end:{line:91,column:33}},27:{start:{line:92,column:4},end:{line:102,column:7}},28:{start:{line:93,column:21},end:{line:93,column:56}},29:{start:{line:94,column:6},end:{line:101,column:9}},30:{start:{line:103,column:4},end:{line:103,column:19}},31:{start:{line:104,column:4},end:{line:106,column:6}},32:{start:{line:108,column:17},end:{line:111,column:3}},33:{start:{line:109,column:4},end:{line:109,column:20}},34:{start:{line:110,column:4},end:{line:110,column:37}},35:{start:{line:113,column:14},end:{line:113,column:26}},36:{start:{line:114,column:4},end:{line:185,column:9}},37:{start:{line:119,column:12},end:{line:119,column:36}},38:{start:{line:176,column:12},end:{line:176,column:31}},39:{start:{line:188,column:22},end:{line:188,column:62}}},fnMap:{0:{name:"renderCoords",decl:{start:{line:10,column:9},end:{line:10,column:21}},loc:{start:{line:10,column:30},end:{line:16,column:1}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:14,column:92},end:{line:14,column:93}},loc:{start:{line:14,column:103},end:{line:14,column:133}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:19,column:17},end:{line:19,column:18}},loc:{start:{line:19,column:23},end:{line:20,column:5}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:21,column:18},end:{line:21,column:19}},loc:{start:{line:21,column:24},end:{line:22,column:5}},line:21},4:{name:"(anonymous_4)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:24,column:5}},line:23},5:{name:"(anonymous_5)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:21},end:{line:40,column:3}},line:31},6:{name:"(anonymous_6)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:28},end:{line:45,column:3}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:32},end:{line:52,column:3}},line:46},8:{name:"(anonymous_8)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:22},end:{line:107,column:3}},line:53},9:{name:"(anonymous_9)",decl:{start:{line:70,column:26},end:{line:70,column:27}},loc:{start:{line:70,column:35},end:{line:78,column:5}},line:70},10:{name:"(anonymous_10)",decl:{start:{line:79,column:22},end:{line:79,column:23}},loc:{start:{line:79,column:28},end:{line:89,column:5}},line:79},11:{name:"(anonymous_11)",decl:{start:{line:92,column:25},end:{line:92,column:26}},loc:{start:{line:92,column:33},end:{line:102,column:5}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:108,column:17},end:{line:108,column:18}},loc:{start:{line:108,column:24},end:{line:111,column:3}},line:108},13:{name:"(anonymous_13)",decl:{start:{line:112,column:2},end:{line:112,column:3}},loc:{start:{line:112,column:11},end:{line:186,column:3}},line:112},14:{name:"(anonymous_14)",decl:{start:{line:118,column:15},end:{line:118,column:16}},loc:{start:{line:118,column:22},end:{line:120,column:11}},line:118},15:{name:"(anonymous_15)",decl:{start:{line:175,column:15},end:{line:175,column:16}},loc:{start:{line:175,column:22},end:{line:177,column:11}},line:175}},branchMap:{0:{loc:{start:{line:11,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:11,column:2},end:{line:15,column:3}},{start:{line:13,column:9},end:{line:15,column:3}}],line:11},1:{loc:{start:{line:11,column:6},end:{line:11,column:34}},type:"binary-expr",locations:[{start:{line:11,column:6},end:{line:11,column:13}},{start:{line:11,column:17},end:{line:11,column:34}}],line:11},2:{loc:{start:{line:42,column:4},end:{line:42,column:26}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},3:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},4:{loc:{start:{line:136,column:26},end:{line:136,column:59}},type:"binary-expr",locations:[{start:{line:136,column:26},end:{line:136,column:53}},{start:{line:136,column:57},end:{line:136,column:59}}],line:136},5:{loc:{start:{line:148,column:6},end:{line:170,column:10}},type:"binary-expr",locations:[{start:{line:148,column:6},end:{line:148,column:29}},{start:{line:148,column:49},end:{line:170,column:10}}],line:148}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx"],names:[],mappings:"AAoBW,cAyIL,YAzIK;AApBX,OAAO,WAAW;AAClB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAEjD,OAAO,6BAA6B;AAEpC,OAAO;AAEP,SAAQ,aAAY;AACpB,SAAQ,KAAK,MAAM,eAAc;AAEjC,SAAQ,gBAAe;AAIvB,SAAS,aAAc,QAAkB;AACvC,MAAI,CAAC,UAAU,OAAO,SAAS,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO,oBAAC,UAAK,WAAU,mBACpB,iBAAO,IAAI,CAAC,UAAU,OAAO,KAAK,EAAE,SAAS,GAAG,GAAQ,CAAC,EAAE,KAAK,IAAI,GACvE;AAAA,EACF;AACF;AAqBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAmC;AAAA,EACnC;AAAA,EACA,iBAAqC;AAAA,EAErC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU;AAAA,MACV,QAAQ,CAAC;AAAA,MACT,QAAQ,CAAC;AAAA,IACX;AACA,SAAK,cAAc,SAAS,KAAK,aAAa,KAAK,IAAI,GAAG,GAAG;AAAA,EAC/D;AAAA,EAEA,aAAa,aAAiC;AAC5C,QAAG,CAAC,KAAK,IAAK;AAGd,SAAK,IAAI,UAAU,EAAE,MAAM;AAC3B,UAAM,KAAK,KAAK,WAAW;AAAA,EAC7B;AAAA,EAEA,mBAAmB,WAAuC;AACxD,QAAI,KAAK,MAAM,aAAa,UAAU,UAAU;AAC9C,WAAK;AAAA,QACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MACpD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,SAAK,UAAU,IAAI,QAAQ;AAAA,MACzB,SAAS,KAAK;AAAA,MACd,SAAS;AAAA,QACP,WAAW;AAAA,UACT,UAAU;AAAA,QACZ;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,MAAM,IAAI,IAAI;AAAA,MAClB,QAAQ,KAAK;AAAA,MACb,UAAU,CAAC,KAAK,OAAO;AAAA,MACvB,MAAM,IAAI,KAAK;AAAA,QACb,MAAM;AAAA,QACN,QAAQ,CAAC,KAAK,GAAG;AAAA,MACnB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,eAAe,CAAC,QAAQ;AAC7B,YAAM,SAAS,SAAS,IAAI,UAAU;AACtC,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAED,UAAM,YAAY,MAAM;AACtB,YAAM,OAAO,IAAI,QAAQ,EAAE,QAAQ;AACnC,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAElD,WAAK,MAAM,SAAS;AAAA,QAClB;AAAA,QACA,QAAQ;AAAA,UACN,KAAK,OAAO,CAAC;AAAA,UACb,KAAK,OAAO,CAAC;AAAA,QACf;AAAA,MACF,CAAC;AAAA,IACH;AAEA,cAAU;AACV,QAAI,GAAG,WAAW,SAAS;AAE3B,QAAI,GAAG,cAAc,CAAC,OAAO;AAC3B,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAClD,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,QACA,UAAU,IAAI,QAAQ,EAAE,YAAY,EAAE,QAAQ,CAAC;AAAA,QAC/C,MAAM,IAAI,QAAQ,EAAE,QAAQ,EAAG,QAAQ,CAAC;AAAA,MAC1C,CAAC;AAAA,IACH,CAAC;AAID,SAAK,MAAM;AACX,SAAK;AAAA,MACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,IACpD;AAAA,EACF;AAAA,EAEA,eAAe,CAAC,MAAW;AACzB,MAAE,OAAO,KAAK;AACd,SAAK,QAAS,YAAY,MAAS;AAAA,EACrC;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,yBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,KAAK,OAAK;AAAC,iBAAK,iBAAiB;AAAA,UAAC;AAAA,UAClC,OAAO,EAAC,YAAY,QAAO;AAAA,UAC3B,WAAU;AAAA,UAEV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,cAAY,EAAE,aAAa;AAAA,gBAC5B;AAAA;AAAA,YAED;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,UAAU,KAAK,MAAM,oBAAoB,CAAC;AAAA,gBAC1C,eAAe,KAAK,MAAM;AAAA;AAAA,YAC5B;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,oBACZ;AAAA,UAAE,OAAO;AAAA,QAAE;AAAA,QAAE,KAAK,MAAM;AAAA,SAC3B;AAAA,MACC,KAAK,MAAM,gBACV,qBAAC,SAAI,WAAU,qBACb;AAAA,6BAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,WAAW;AAAA,YAAE;AAAA,aAAC;AAAA,UACxB,oBAAC,UAAM,eAAK,MAAM,UAAS;AAAA,WAC7B;AAAA,SACF;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,KAAK,OAAK;AAAC,iBAAK,YAAY;AAAA,UAAC;AAAA,UAC7B,MAAK;AAAA,UACL,cAAY,EAAE,UAAU;AAAA,UACxB,OAAO;AAAA,YACL,GAAG,KAAK,MAAM;AAAA,UAChB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"dc2d0d9fb603a0ec1169756b2d912bbbda7b931a"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return rr=function(){return l},l}rr();function AT(n){return rr().f[0]++,rr().s[0]++,rr().b[1][0]++,!n||(rr().b[1][1]++,n.length<2)?(rr().b[0][0]++,rr().s[1]++,null):(rr().b[0][1]++,rr().s[2]++,ce.jsx("span",{className:"maputnik-coords",children:n.map(e=>(rr().f[1]++,rr().s[3]++,String(e).padStart(7," "))).join(", ")}))}class bie extends ni.Component{static defaultProps=(rr().s[4]++,{onMapLoaded:()=>{rr().f[2]++},onDataChange:()=>{rr().f[3]++},onLayerSelect:()=>{rr().f[4]++}});updateStyle;map;container=(rr().s[5]++,null);overlay;popupContainer=(rr().s[6]++,null);constructor(e){rr().f[5]++,rr().s[7]++,super(e),rr().s[8]++,this.state={zoom:"0",rotation:"0",cursor:[],center:[]},rr().s[9]++,this.updateStyle=J_.throttle(this._updateStyle.bind(this),200)}_updateStyle(e){if(rr().f[6]++,rr().s[10]++,this.map)rr().b[2][1]++;else{rr().b[2][0]++,rr().s[11]++;return}rr().s[12]++,this.map.getLayers().clear(),rr().s[13]++,_ie(this.map,e)}componentDidUpdate(e){rr().f[7]++,rr().s[14]++,this.props.mapStyle!==e.mapStyle?(rr().b[3][0]++,rr().s[15]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))):rr().b[3][1]++}componentDidMount(){rr().f[8]++,rr().s[16]++,this.overlay=new pte({element:this.popupContainer,autoPan:{animation:{duration:250}}});const e=(rr().s[17]++,new C2({target:this.container,overlays:[this.overlay],view:new Xm({zoom:1,center:[180,-90]})}));rr().s[18]++,e.on("pointermove",i=>{rr().f[9]++;const r=(rr().s[19]++,L4(i.coordinate));rr().s[20]++,this.setState({cursor:[r[0].toFixed(2),r[1].toFixed(2)]})}),rr().s[21]++;const t=()=>{rr().f[10]++;const i=(rr().s[22]++,e.getView().getZoom()),r=(rr().s[23]++,L4(e.getView().getCenter()));rr().s[24]++,this.props.onChange({zoom:i,center:{lng:r[0],lat:r[1]}})};rr().s[25]++,t(),rr().s[26]++,e.on("moveend",t),rr().s[27]++,e.on("postrender",i=>{rr().f[11]++;const r=(rr().s[28]++,L4(e.getView().getCenter()));rr().s[29]++,this.setState({center:[r[0].toFixed(2),r[1].toFixed(2)],rotation:e.getView().getRotation().toFixed(2),zoom:e.getView().getZoom().toFixed(2)})}),rr().s[30]++,this.map=e,rr().s[31]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))}closeOverlay=(rr().s[32]++,e=>{rr().f[12]++,rr().s[33]++,e.target.blur(),rr().s[34]++,this.overlay.setPosition(void 0)});render(){rr().f[13]++;const e=(rr().s[35]++,this.props.t);return rr().s[36]++,ce.jsxs("div",{className:"maputnik-ol-container",children:[ce.jsxs("div",{ref:t=>{rr().f[14]++,rr().s[37]++,this.popupContainer=t},style:{background:"black"},className:"maputnik-popup",children:[ce.jsx("button",{className:"maplibregl-popup-close-button",onClick:this.closeOverlay,"aria-label":e("Close popup"),children:"×"}),ce.jsx(oF,{features:(rr().b[4][0]++,this.state.selectedFeatures||(rr().b[4][1]++,[])),onLayerSelect:this.props.onLayerSelect})]}),ce.jsxs("div",{className:"maputnik-ol-zoom",children:[e("Zoom:")," ",this.state.zoom]}),(rr().b[5][0]++,this.props.debugToolbox&&(rr().b[5][1]++,ce.jsxs("div",{className:"maputnik-ol-debug",children:[ce.jsxs("div",{children:[ce.jsxs("label",{children:[e("cursor:")," "]}),ce.jsx("span",{children:AT(this.state.cursor)})]}),ce.jsxs("div",{children:[ce.jsxs("label",{children:[e("center:")," "]}),ce.jsx("span",{children:AT(this.state.center)})]}),ce.jsxs("div",{children:[ce.jsxs("label",{children:[e("rotation:")," "]}),ce.jsx("span",{children:this.state.rotation})]})]}))),ce.jsx("div",{className:"maputnik-ol",ref:t=>{rr().f[15]++,rr().s[38]++,this.container=t},role:"region","aria-label":e("Map view"),style:{...this.props.style}})]})}}const xie=(rr().s[39]++,ss()(bie));var gM={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var uT;function Mie(){return uT||(uT=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var a="",l=0;l<arguments.length;l++){var o=arguments[l];o&&(a=r(a,i(o)))}return a}function i(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return t.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var l="";for(var o in a)e.call(a,o)&&a[o]&&(l=r(l,o));return l}function r(a,l){return l?a?a+" "+l:a+l:a}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(gM)),gM.exports}var Sie=Mie();const e0=WA(Sie);var LC=O3();function wie(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return Gt.useMemo(()=>i=>{e.forEach(r=>r(i))},e)}const E2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function $v(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function i8(n){return"nodeType"in n}function Hd(n){var e,t;return n?$v(n)?n:i8(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function r8(n){const{Document:e}=Hd(n);return n instanceof e}function _b(n){return $v(n)?!1:n instanceof Hd(n).HTMLElement}function aN(n){return n instanceof Hd(n).SVGElement}function Zv(n){return n?$v(n)?n.document:i8(n)?r8(n)?n:_b(n)||aN(n)?n.ownerDocument:document:document:document}const t0=E2?Gt.useLayoutEffect:Gt.useEffect;function o8(n){const e=Gt.useRef(n);return t0(()=>{e.current=n}),Gt.useCallback(function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.current==null?void 0:e.current(...i)},[])}function Eie(){const n=Gt.useRef(null),e=Gt.useCallback((i,r)=>{n.current=setInterval(i,r)},[]),t=Gt.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,t]}function P_(n,e){e===void 0&&(e=[n]);const t=Gt.useRef(n);return t0(()=>{t.current!==n&&(t.current=n)},e),t}function bb(n,e){const t=Gt.useRef();return Gt.useMemo(()=>{const i=n(t.current);return t.current=i,i},[...e])}function m3(n){const e=o8(n),t=Gt.useRef(null),i=Gt.useCallback(r=>{r!==t.current&&e?.(r,t.current),t.current=r},[]);return[t,i]}function uB(n){const e=Gt.useRef();return Gt.useEffect(()=>{e.current=n},[n]),e.current}let yM={};function xb(n,e){return Gt.useMemo(()=>{if(e)return e;const t=yM[n]==null?0:yM[n]+1;return yM[n]=t,n+"-"+t},[n,e])}function sN(n){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return i.reduce((a,l)=>{const o=Object.entries(l);for(const[m,C]of o){const S=a[m];S!=null&&(a[m]=S+n*C)}return a},{...e})}}const Cv=sN(1),p3=sN(-1);function Bie(n){return"clientX"in n&&"clientY"in n}function a8(n){if(!n)return!1;const{KeyboardEvent:e}=Hd(n.target);return e&&n instanceof e}function Oie(n){if(!n)return!1;const{TouchEvent:e}=Hd(n.target);return e&&n instanceof e}function cB(n){if(Oie(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return Bie(n)?{x:n.clientX,y:n.clientY}:null}const K_=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[K_.Translate.toString(n),K_.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:i}=n;return e+" "+t+"ms "+i}}}),cT="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Iie(n){return n.matches(cT)?n:n.querySelector(cT)}const Tie={display:"none"};function kie(n){let{id:e,value:t}=n;return ni.createElement("div",{id:e,style:Tie},t)}function Die(n){let{id:e,announcement:t,ariaLiveType:i="assertive"}=n;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ni.createElement("div",{id:e,style:r,role:"status","aria-live":i,"aria-atomic":!0},t)}function Rie(){const[n,e]=Gt.useState("");return{announce:Gt.useCallback(i=>{i!=null&&e(i)},[]),announcement:n}}const lN=Gt.createContext(null);function Pie(n){const e=Gt.useContext(lN);Gt.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function Kie(){const[n]=Gt.useState(()=>new Set),e=Gt.useCallback(i=>(n.add(i),()=>n.delete(i)),[n]);return[Gt.useCallback(i=>{let{type:r,event:a}=i;n.forEach(l=>{var o;return(o=l[r])==null?void 0:o.call(l,a)})},[n]),e]}const Uie={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Lie={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Fie(n){let{announcements:e=Lie,container:t,hiddenTextDescribedById:i,screenReaderInstructions:r=Uie}=n;const{announce:a,announcement:l}=Rie(),o=xb("DndLiveRegion"),[m,C]=Gt.useState(!1);if(Gt.useEffect(()=>{C(!0)},[]),Pie(Gt.useMemo(()=>({onDragStart(O){let{active:U}=O;a(e.onDragStart({active:U}))},onDragMove(O){let{active:U,over:K}=O;e.onDragMove&&a(e.onDragMove({active:U,over:K}))},onDragOver(O){let{active:U,over:K}=O;a(e.onDragOver({active:U,over:K}))},onDragEnd(O){let{active:U,over:K}=O;a(e.onDragEnd({active:U,over:K}))},onDragCancel(O){let{active:U,over:K}=O;a(e.onDragCancel({active:U,over:K}))}}),[a,e])),!m)return null;const S=ni.createElement(ni.Fragment,null,ni.createElement(kie,{id:i,value:r.draggable}),ni.createElement(Die,{id:o,announcement:l}));return t?LC.createPortal(S,t):S}var Cc;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(Cc||(Cc={}));function g3(){}function zie(n,e){return Gt.useMemo(()=>({sensor:n,options:e??{}}),[n,e])}function Nie(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return Gt.useMemo(()=>[...e].filter(i=>i!=null),[...e])}const op=Object.freeze({x:0,y:0});function Gie(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function jie(n,e){let{data:{value:t}}=n,{data:{value:i}}=e;return t-i}function Wie(n,e){let{data:{value:t}}=n,{data:{value:i}}=e;return i-t}function Qie(n,e){if(!n||n.length===0)return null;const[t]=n;return t[e]}function hT(n,e,t){return e===void 0&&(e=n.left),t===void 0&&(t=n.top),{x:e+n.width*.5,y:t+n.height*.5}}const Yie=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=n;const r=hT(e,e.left,e.top),a=[];for(const l of i){const{id:o}=l,m=t.get(o);if(m){const C=Gie(hT(m),r);a.push({id:o,data:{droppableContainer:l,value:C}})}}return a.sort(jie)};function qie(n,e){const t=Math.max(e.top,n.top),i=Math.max(e.left,n.left),r=Math.min(e.left+e.width,n.left+n.width),a=Math.min(e.top+e.height,n.top+n.height),l=r-i,o=a-t;if(i<r&&t<a){const m=e.width*e.height,C=n.width*n.height,S=l*o,O=S/(m+C-S);return Number(O.toFixed(4))}return 0}const Hie=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=n;const r=[];for(const a of i){const{id:l}=a,o=t.get(l);if(o){const m=qie(o,e);m>0&&r.push({id:l,data:{droppableContainer:a,value:m}})}}return r.sort(Wie)};function Vie(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function AN(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:op}function $ie(n){return function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];return r.reduce((l,o)=>({...l,top:l.top+n*o.y,bottom:l.bottom+n*o.y,left:l.left+n*o.x,right:l.right+n*o.x}),{...t})}}const Zie=$ie(1);function Xie(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Jie(n,e,t){const i=Xie(e);if(!i)return n;const{scaleX:r,scaleY:a,x:l,y:o}=i,m=n.left-l-(1-r)*parseFloat(t),C=n.top-o-(1-a)*parseFloat(t.slice(t.indexOf(" ")+1)),S=r?n.width/r:n.width,O=a?n.height/a:n.height;return{width:S,height:O,top:C,right:m+S,bottom:C+O,left:m}}const ere={ignoreTransform:!1};function Xv(n,e){e===void 0&&(e=ere);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:C,transformOrigin:S}=Hd(n).getComputedStyle(n);C&&(t=Jie(t,C,S))}const{top:i,left:r,width:a,height:l,bottom:o,right:m}=t;return{top:i,left:r,width:a,height:l,bottom:o,right:m}}function dT(n){return Xv(n,{ignoreTransform:!0})}function tre(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function nre(n,e){return e===void 0&&(e=Hd(n).getComputedStyle(n)),e.position==="fixed"}function ire(n,e){e===void 0&&(e=Hd(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const a=e[r];return typeof a=="string"?t.test(a):!1})}function s8(n,e){const t=[];function i(r){if(e!=null&&t.length>=e||!r)return t;if(r8(r)&&r.scrollingElement!=null&&!t.includes(r.scrollingElement))return t.push(r.scrollingElement),t;if(!_b(r)||aN(r)||t.includes(r))return t;const a=Hd(n).getComputedStyle(r);return r!==n&&ire(r,a)&&t.push(r),nre(r,a)?t:i(r.parentNode)}return n?i(n):t}function uN(n){const[e]=s8(n,1);return e??null}function vM(n){return!E2||!n?null:$v(n)?n:i8(n)?r8(n)||n===Zv(n).scrollingElement?window:_b(n)?n:null:null}function cN(n){return $v(n)?n.scrollX:n.scrollLeft}function hN(n){return $v(n)?n.scrollY:n.scrollTop}function hB(n){return{x:cN(n),y:hN(n)}}var jc;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(jc||(jc={}));function dN(n){return!E2||!n?!1:n===document.scrollingElement}function fN(n){const e={x:0,y:0},t=dN(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},i={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height},r=n.scrollTop<=e.y,a=n.scrollLeft<=e.x,l=n.scrollTop>=i.y,o=n.scrollLeft>=i.x;return{isTop:r,isLeft:a,isBottom:l,isRight:o,maxScroll:i,minScroll:e}}const rre={x:.2,y:.2};function ore(n,e,t,i,r){let{top:a,left:l,right:o,bottom:m}=t;i===void 0&&(i=10),r===void 0&&(r=rre);const{isTop:C,isBottom:S,isLeft:O,isRight:U}=fN(n),K={x:0,y:0},z={x:0,y:0},j={height:e.height*r.y,width:e.width*r.x};return!C&&a<=e.top+j.height?(K.y=jc.Backward,z.y=i*Math.abs((e.top+j.height-a)/j.height)):!S&&m>=e.bottom-j.height&&(K.y=jc.Forward,z.y=i*Math.abs((e.bottom-j.height-m)/j.height)),!U&&o>=e.right-j.width?(K.x=jc.Forward,z.x=i*Math.abs((e.right-j.width-o)/j.width)):!O&&l<=e.left+j.width&&(K.x=jc.Backward,z.x=i*Math.abs((e.left+j.width-l)/j.width)),{direction:K,speed:z}}function are(n){if(n===document.scrollingElement){const{innerWidth:a,innerHeight:l}=window;return{top:0,left:0,right:a,bottom:l,width:a,height:l}}const{top:e,left:t,right:i,bottom:r}=n.getBoundingClientRect();return{top:e,left:t,right:i,bottom:r,width:n.clientWidth,height:n.clientHeight}}function mN(n){return n.reduce((e,t)=>Cv(e,hB(t)),op)}function sre(n){return n.reduce((e,t)=>e+cN(t),0)}function lre(n){return n.reduce((e,t)=>e+hN(t),0)}function Are(n,e){if(e===void 0&&(e=Xv),!n)return;const{top:t,left:i,bottom:r,right:a}=e(n);uN(n)&&(r<=0||a<=0||t>=window.innerHeight||i>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const ure=[["x",["left","right"],sre],["y",["top","bottom"],lre]];class l8{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=s8(t),r=mN(i);this.rect={...e},this.width=e.width,this.height=e.height;for(const[a,l,o]of ure)for(const m of l)Object.defineProperty(this,m,{get:()=>{const C=o(i),S=r[a]-C;return this.rect[m]+S},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class n_{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...t)})},this.target=e}add(e,t,i){var r;(r=this.target)==null||r.addEventListener(e,t,i),this.listeners.push([e,t,i])}}function cre(n){const{EventTarget:e}=Hd(n);return n instanceof e?n:Zv(n)}function CM(n,e){const t=Math.abs(n.x),i=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+i**2)>e:"x"in e&&"y"in e?t>e.x&&i>e.y:"x"in e?t>e.x:"y"in e?i>e.y:!1}var dm;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(dm||(dm={}));function fT(n){n.preventDefault()}function hre(n){n.stopPropagation()}var Ps;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(Ps||(Ps={}));const pN={start:[Ps.Space,Ps.Enter],cancel:[Ps.Esc],end:[Ps.Space,Ps.Enter,Ps.Tab]},dre=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case Ps.Right:return{...t,x:t.x+25};case Ps.Left:return{...t,x:t.x-25};case Ps.Down:return{...t,y:t.y+25};case Ps.Up:return{...t,y:t.y-25}}};class gN{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new n_(Zv(t)),this.windowListeners=new n_(Hd(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(dm.Resize,this.handleCancel),this.windowListeners.add(dm.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(dm.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,i=e.node.current;i&&Are(i),t(op)}handleKeyDown(e){if(a8(e)){const{active:t,context:i,options:r}=this.props,{keyboardCodes:a=pN,coordinateGetter:l=dre,scrollBehavior:o="smooth"}=r,{code:m}=e;if(a.end.includes(m)){this.handleEnd(e);return}if(a.cancel.includes(m)){this.handleCancel(e);return}const{collisionRect:C}=i.current,S=C?{x:C.left,y:C.top}:op;this.referenceCoordinates||(this.referenceCoordinates=S);const O=l(e,{active:t,context:i.current,currentCoordinates:S});if(O){const U=p3(O,S),K={x:0,y:0},{scrollableAncestors:z}=i.current;for(const j of z){const Q=e.code,{isTop:ee,isRight:V,isLeft:ae,isBottom:ne,maxScroll:Z,minScroll:oe}=fN(j),W=are(j),ue={x:Math.min(Q===Ps.Right?W.right-W.width/2:W.right,Math.max(Q===Ps.Right?W.left:W.left+W.width/2,O.x)),y:Math.min(Q===Ps.Down?W.bottom-W.height/2:W.bottom,Math.max(Q===Ps.Down?W.top:W.top+W.height/2,O.y))},ge=Q===Ps.Right&&!V||Q===Ps.Left&&!ae,ye=Q===Ps.Down&&!ne||Q===Ps.Up&&!ee;if(ge&&ue.x!==O.x){const Me=j.scrollLeft+U.x,Be=Q===Ps.Right&&Me<=Z.x||Q===Ps.Left&&Me>=oe.x;if(Be&&!U.y){j.scrollTo({left:Me,behavior:o});return}Be?K.x=j.scrollLeft-Me:K.x=Q===Ps.Right?j.scrollLeft-Z.x:j.scrollLeft-oe.x,K.x&&j.scrollBy({left:-K.x,behavior:o});break}else if(ye&&ue.y!==O.y){const Me=j.scrollTop+U.y,Be=Q===Ps.Down&&Me<=Z.y||Q===Ps.Up&&Me>=oe.y;if(Be&&!U.x){j.scrollTo({top:Me,behavior:o});return}Be?K.y=j.scrollTop-Me:K.y=Q===Ps.Down?j.scrollTop-Z.y:j.scrollTop-oe.y,K.y&&j.scrollBy({top:-K.y,behavior:o});break}}this.handleMove(e,Cv(p3(O,this.referenceCoordinates),K))}}}handleMove(e,t){const{onMove:i}=this.props;e.preventDefault(),i(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}gN.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:i=pN,onActivation:r}=e,{active:a}=t;const{code:l}=n.nativeEvent;if(i.start.includes(l)){const o=a.activatorNode.current;return o&&n.target!==o?!1:(n.preventDefault(),r?.({event:n.nativeEvent}),!0)}return!1}}];function mT(n){return!!(n&&"distance"in n)}function pT(n){return!!(n&&"delay"in n)}class A8{constructor(e,t,i){var r;i===void 0&&(i=cre(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:a}=e,{target:l}=a;this.props=e,this.events=t,this.document=Zv(l),this.documentListeners=new n_(this.document),this.listeners=new n_(i),this.windowListeners=new n_(Hd(l)),this.initialCoordinates=(r=cB(a))!=null?r:op,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:i}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(dm.Resize,this.handleCancel),this.windowListeners.add(dm.DragStart,fT),this.windowListeners.add(dm.VisibilityChange,this.handleCancel),this.windowListeners.add(dm.ContextMenu,fT),this.documentListeners.add(dm.Keydown,this.handleKeydown),t){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(pT(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(mT(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:i,onPending:r}=this.props;r(i,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(dm.Click,hre,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(dm.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:i,initialCoordinates:r,props:a}=this,{onMove:l,options:{activationConstraint:o}}=a;if(!r)return;const m=(t=cB(e))!=null?t:op,C=p3(r,m);if(!i&&o){if(mT(o)){if(o.tolerance!=null&&CM(C,o.tolerance))return this.handleCancel();if(CM(C,o.distance))return this.handleStart()}if(pT(o)&&CM(C,o.tolerance))return this.handleCancel();this.handlePending(o,C);return}e.cancelable&&e.preventDefault(),l(m)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Ps.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const fre={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class u8 extends A8{constructor(e){const{event:t}=e,i=Zv(t.target);super(e,fre,i)}}u8.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;return!t.isPrimary||t.button!==0?!1:(i?.({event:t}),!0)}}];const mre={move:{name:"mousemove"},end:{name:"mouseup"}};var dB;(function(n){n[n.RightClick=2]="RightClick"})(dB||(dB={}));class pre extends A8{constructor(e){super(e,mre,Zv(e.event.target))}}pre.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;return t.button===dB.RightClick?!1:(i?.({event:t}),!0)}}];const _M={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class gre extends A8{constructor(e){super(e,_M)}static setup(){return window.addEventListener(_M.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(_M.move.name,e)};function e(){}}}gre.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;const{touches:r}=t;return r.length>1?!1:(i?.({event:t}),!0)}}];var i_;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(i_||(i_={}));var y3;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(y3||(y3={}));function yre(n){let{acceleration:e,activator:t=i_.Pointer,canScroll:i,draggingRect:r,enabled:a,interval:l=5,order:o=y3.TreeOrder,pointerCoordinates:m,scrollableAncestors:C,scrollableAncestorRects:S,delta:O,threshold:U}=n;const K=Cre({delta:O,disabled:!a}),[z,j]=Eie(),Q=Gt.useRef({x:0,y:0}),ee=Gt.useRef({x:0,y:0}),V=Gt.useMemo(()=>{switch(t){case i_.Pointer:return m?{top:m.y,bottom:m.y,left:m.x,right:m.x}:null;case i_.DraggableRect:return r}},[t,r,m]),ae=Gt.useRef(null),ne=Gt.useCallback(()=>{const oe=ae.current;if(!oe)return;const W=Q.current.x*ee.current.x,ue=Q.current.y*ee.current.y;oe.scrollBy(W,ue)},[]),Z=Gt.useMemo(()=>o===y3.TreeOrder?[...C].reverse():C,[o,C]);Gt.useEffect(()=>{if(!a||!C.length||!V){j();return}for(const oe of Z){if(i?.(oe)===!1)continue;const W=C.indexOf(oe),ue=S[W];if(!ue)continue;const{direction:ge,speed:ye}=ore(oe,ue,V,e,U);for(const Me of["x","y"])K[Me][ge[Me]]||(ye[Me]=0,ge[Me]=0);if(ye.x>0||ye.y>0){j(),ae.current=oe,z(ne,l),Q.current=ye,ee.current=ge;return}}Q.current={x:0,y:0},ee.current={x:0,y:0},j()},[e,ne,i,j,a,l,JSON.stringify(V),JSON.stringify(K),z,C,Z,S,JSON.stringify(U)])}const vre={x:{[jc.Backward]:!1,[jc.Forward]:!1},y:{[jc.Backward]:!1,[jc.Forward]:!1}};function Cre(n){let{delta:e,disabled:t}=n;const i=uB(e);return bb(r=>{if(t||!i||!r)return vre;const a={x:Math.sign(e.x-i.x),y:Math.sign(e.y-i.y)};return{x:{[jc.Backward]:r.x[jc.Backward]||a.x===-1,[jc.Forward]:r.x[jc.Forward]||a.x===1},y:{[jc.Backward]:r.y[jc.Backward]||a.y===-1,[jc.Forward]:r.y[jc.Forward]||a.y===1}}},[t,e,i])}function _re(n,e){const t=e!=null?n.get(e):void 0,i=t?t.node.current:null;return bb(r=>{var a;return e==null?null:(a=i??r)!=null?a:null},[i,e])}function bre(n,e){return Gt.useMemo(()=>n.reduce((t,i)=>{const{sensor:r}=i,a=r.activators.map(l=>({eventName:l.eventName,handler:e(l.handler,i)}));return[...t,...a]},[]),[n,e])}var U_;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(U_||(U_={}));var fB;(function(n){n.Optimized="optimized"})(fB||(fB={}));const gT=new Map;function xre(n,e){let{dragging:t,dependencies:i,config:r}=e;const[a,l]=Gt.useState(null),{frequency:o,measure:m,strategy:C}=r,S=Gt.useRef(n),O=Q(),U=P_(O),K=Gt.useCallback(function(ee){ee===void 0&&(ee=[]),!U.current&&l(V=>V===null?ee:V.concat(ee.filter(ae=>!V.includes(ae))))},[U]),z=Gt.useRef(null),j=bb(ee=>{if(O&&!t)return gT;if(!ee||ee===gT||S.current!==n||a!=null){const V=new Map;for(let ae of n){if(!ae)continue;if(a&&a.length>0&&!a.includes(ae.id)&&ae.rect.current){V.set(ae.id,ae.rect.current);continue}const ne=ae.node.current,Z=ne?new l8(m(ne),ne):null;ae.rect.current=Z,Z&&V.set(ae.id,Z)}return V}return ee},[n,a,t,O,m]);return Gt.useEffect(()=>{S.current=n},[n]),Gt.useEffect(()=>{O||K()},[t,O]),Gt.useEffect(()=>{a&&a.length>0&&l(null)},[JSON.stringify(a)]),Gt.useEffect(()=>{O||typeof o!="number"||z.current!==null||(z.current=setTimeout(()=>{K(),z.current=null},o))},[o,O,K,...i]),{droppableRects:j,measureDroppableContainers:K,measuringScheduled:a!=null};function Q(){switch(C){case U_.Always:return!1;case U_.BeforeDragging:return t;default:return!t}}}function yN(n,e){return bb(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function Mre(n,e){return yN(n,e)}function Sre(n){let{callback:e,disabled:t}=n;const i=o8(e),r=Gt.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(i)},[i,t]);return Gt.useEffect(()=>()=>r?.disconnect(),[r]),r}function B2(n){let{callback:e,disabled:t}=n;const i=o8(e),r=Gt.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(i)},[t]);return Gt.useEffect(()=>()=>r?.disconnect(),[r]),r}function wre(n){return new l8(Xv(n),n)}function yT(n,e,t){e===void 0&&(e=wre);const[i,r]=Gt.useState(null);function a(){r(m=>{if(!n)return null;if(n.isConnected===!1){var C;return(C=m??t)!=null?C:null}const S=e(n);return JSON.stringify(m)===JSON.stringify(S)?m:S})}const l=Sre({callback(m){if(n)for(const C of m){const{type:S,target:O}=C;if(S==="childList"&&O instanceof HTMLElement&&O.contains(n)){a();break}}}}),o=B2({callback:a});return t0(()=>{a(),n?(o?.observe(n),l?.observe(document.body,{childList:!0,subtree:!0})):(o?.disconnect(),l?.disconnect())},[n]),i}function Ere(n){const e=yN(n);return AN(n,e)}const vT=[];function Bre(n){const e=Gt.useRef(n),t=bb(i=>n?i&&i!==vT&&n&&e.current&&n.parentNode===e.current.parentNode?i:s8(n):vT,[n]);return Gt.useEffect(()=>{e.current=n},[n]),t}function Ore(n){const[e,t]=Gt.useState(null),i=Gt.useRef(n),r=Gt.useCallback(a=>{const l=vM(a.target);l&&t(o=>o?(o.set(l,hB(l)),new Map(o)):null)},[]);return Gt.useEffect(()=>{const a=i.current;if(n!==a){l(a);const o=n.map(m=>{const C=vM(m);return C?(C.addEventListener("scroll",r,{passive:!0}),[C,hB(C)]):null}).filter(m=>m!=null);t(o.length?new Map(o):null),i.current=n}return()=>{l(n),l(a)};function l(o){o.forEach(m=>{const C=vM(m);C?.removeEventListener("scroll",r)})}},[r,n]),Gt.useMemo(()=>n.length?e?Array.from(e.values()).reduce((a,l)=>Cv(a,l),op):mN(n):op,[n,e])}function CT(n,e){e===void 0&&(e=[]);const t=Gt.useRef(null);return Gt.useEffect(()=>{t.current=null},e),Gt.useEffect(()=>{const i=n!==op;i&&!t.current&&(t.current=n),!i&&t.current&&(t.current=null)},[n]),t.current?p3(n,t.current):op}function Ire(n){Gt.useEffect(()=>{if(!E2)return;const e=n.map(t=>{let{sensor:i}=t;return i.setup==null?void 0:i.setup()});return()=>{for(const t of e)t?.()}},n.map(e=>{let{sensor:t}=e;return t}))}function Tre(n,e){return Gt.useMemo(()=>n.reduce((t,i)=>{let{eventName:r,handler:a}=i;return t[r]=l=>{a(l,e)},t},{}),[n,e])}function vN(n){return Gt.useMemo(()=>n?tre(n):null,[n])}const _T=[];function kre(n,e){e===void 0&&(e=Xv);const[t]=n,i=vN(t?Hd(t):null),[r,a]=Gt.useState(_T);function l(){a(()=>n.length?n.map(m=>dN(m)?i:new l8(e(m),m)):_T)}const o=B2({callback:l});return t0(()=>{o?.disconnect(),l(),n.forEach(m=>o?.observe(m))},[n]),r}function Dre(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return _b(e)?e:n}function Rre(n){let{measure:e}=n;const[t,i]=Gt.useState(null),r=Gt.useCallback(C=>{for(const{target:S}of C)if(_b(S)){i(O=>{const U=e(S);return O?{...O,width:U.width,height:U.height}:U});break}},[e]),a=B2({callback:r}),l=Gt.useCallback(C=>{const S=Dre(C);a?.disconnect(),S&&a?.observe(S),i(S?e(S):null)},[e,a]),[o,m]=m3(l);return Gt.useMemo(()=>({nodeRef:o,rect:t,setRef:m}),[t,o,m])}const Pre=[{sensor:u8,options:{}},{sensor:gN,options:{}}],Kre={current:{}},Ex={draggable:{measure:dT},droppable:{measure:dT,strategy:U_.WhileDragging,frequency:fB.Optimized},dragOverlay:{measure:Xv}};class r_ extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,i;return(t=(i=this.get(e))==null?void 0:i.node.current)!=null?t:void 0}}const Ure={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new r_,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:g3},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ex,measureDroppableContainers:g3,windowRect:null,measuringScheduled:!1},Lre={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:g3,draggableNodes:new Map,over:null,measureDroppableContainers:g3},O2=Gt.createContext(Lre),CN=Gt.createContext(Ure);function Fre(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new r_}}}function zre(n,e){switch(e.type){case Cc.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Cc.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case Cc.DragEnd:case Cc.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Cc.RegisterDroppable:{const{element:t}=e,{id:i}=t,r=new r_(n.droppable.containers);return r.set(i,t),{...n,droppable:{...n.droppable,containers:r}}}case Cc.SetDroppableDisabled:{const{id:t,key:i,disabled:r}=e,a=n.droppable.containers.get(t);if(!a||i!==a.key)return n;const l=new r_(n.droppable.containers);return l.set(t,{...a,disabled:r}),{...n,droppable:{...n.droppable,containers:l}}}case Cc.UnregisterDroppable:{const{id:t,key:i}=e,r=n.droppable.containers.get(t);if(!r||i!==r.key)return n;const a=new r_(n.droppable.containers);return a.delete(t),{...n,droppable:{...n.droppable,containers:a}}}default:return n}}function Nre(n){let{disabled:e}=n;const{active:t,activatorEvent:i,draggableNodes:r}=Gt.useContext(O2),a=uB(i),l=uB(t?.id);return Gt.useEffect(()=>{if(!e&&!i&&a&&l!=null){if(!a8(a)||document.activeElement===a.target)return;const o=r.get(l);if(!o)return;const{activatorNode:m,node:C}=o;if(!m.current&&!C.current)return;requestAnimationFrame(()=>{for(const S of[m.current,C.current]){if(!S)continue;const O=Iie(S);if(O){O.focus();break}}})}},[i,e,r,l,a]),null}function Gre(n,e){let{transform:t,...i}=e;return n!=null&&n.length?n.reduce((r,a)=>a({transform:r,...i}),t):t}function jre(n){return Gt.useMemo(()=>({draggable:{...Ex.draggable,...n?.draggable},droppable:{...Ex.droppable,...n?.droppable},dragOverlay:{...Ex.dragOverlay,...n?.dragOverlay}}),[n?.draggable,n?.droppable,n?.dragOverlay])}function Wre(n){let{activeNode:e,measure:t,initialRect:i,config:r=!0}=n;const a=Gt.useRef(!1),{x:l,y:o}=typeof r=="boolean"?{x:r,y:r}:r;t0(()=>{if(!l&&!o||!e){a.current=!1;return}if(a.current||!i)return;const C=e?.node.current;if(!C||C.isConnected===!1)return;const S=t(C),O=AN(S,i);if(l||(O.x=0),o||(O.y=0),a.current=!0,Math.abs(O.x)>0||Math.abs(O.y)>0){const U=uN(C);U&&U.scrollBy({top:O.y,left:O.x})}},[e,l,o,i,t])}const _N=Gt.createContext({...op,scaleX:1,scaleY:1});var y1;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(y1||(y1={}));const Qre=Gt.memo(function(e){var t,i,r,a;let{id:l,accessibility:o,autoScroll:m=!0,children:C,sensors:S=Pre,collisionDetection:O=Hie,measuring:U,modifiers:K,...z}=e;const j=Gt.useReducer(zre,void 0,Fre),[Q,ee]=j,[V,ae]=Kie(),[ne,Z]=Gt.useState(y1.Uninitialized),oe=ne===y1.Initialized,{draggable:{active:W,nodes:ue,translate:ge},droppable:{containers:ye}}=Q,Me=W!=null?ue.get(W):null,Be=Gt.useRef({initial:null,translated:null}),we=Gt.useMemo(()=>{var it;return W!=null?{id:W,data:(it=Me?.data)!=null?it:Kre,rect:Be}:null},[W,Me]),qe=Gt.useRef(null),[xe,ze]=Gt.useState(null),[ot,yt]=Gt.useState(null),nt=P_(z,Object.values(z)),be=xb("DndDescribedBy",l),Ne=Gt.useMemo(()=>ye.getEnabled(),[ye]),tt=jre(U),{droppableRects:lt,measureDroppableContainers:It,measuringScheduled:pt}=xre(Ne,{dragging:oe,dependencies:[ge.x,ge.y],config:tt.droppable}),St=_re(ue,W),Rt=Gt.useMemo(()=>ot?cB(ot):null,[ot]),Le=kt(),Pe=Mre(St,tt.draggable.measure);Wre({activeNode:W!=null?ue.get(W):null,config:Le.layoutShiftCompensation,initialRect:Pe,measure:tt.draggable.measure});const Re=yT(St,tt.draggable.measure,Pe),He=yT(St?St.parentElement:null),bt=Gt.useRef({activatorEvent:null,active:null,activeNode:St,collisionRect:null,collisions:null,droppableRects:lt,draggableNodes:ue,draggingNode:null,draggingNodeRect:null,droppableContainers:ye,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),vt=ye.getNodeFor((t=bt.current.over)==null?void 0:t.id),Ot=Rre({measure:tt.dragOverlay.measure}),qt=(i=Ot.nodeRef.current)!=null?i:St,Kt=oe?(r=Ot.rect)!=null?r:Re:null,on=!!(Ot.nodeRef.current&&Ot.rect),Jn=Ere(on?null:Re),Wt=vN(qt?Hd(qt):null),$n=Bre(oe?vt??St:null),On=kre($n),Bn=Gre(K,{transform:{x:ge.x-Jn.x,y:ge.y-Jn.y,scaleX:1,scaleY:1},activatorEvent:ot,active:we,activeNodeRect:Re,containerNodeRect:He,draggingNodeRect:Kt,over:bt.current.over,overlayNodeRect:Ot.rect,scrollableAncestors:$n,scrollableAncestorRects:On,windowRect:Wt}),In=Rt?Cv(Rt,ge):null,Bi=Ore($n),ei=CT(Bi),Kn=CT(Bi,[Re]),Ge=Cv(Bn,ei),de=Kt?Zie(Kt,Bn):null,re=we&&de?O({active:we,collisionRect:de,droppableRects:lt,droppableContainers:Ne,pointerCoordinates:In}):null,le=Qie(re,"id"),[me,Te]=Gt.useState(null),We=on?Bn:Cv(Bn,Kn),dt=Vie(We,(a=me?.rect)!=null?a:null,Re),Ye=Gt.useRef(null),De=Gt.useCallback((it,en)=>{let{sensor:Dn,options:Mn}=en;if(qe.current==null)return;const ii=ue.get(qe.current);if(!ii)return;const Wn=it.nativeEvent,qi=new Dn({active:qe.current,activeNode:ii,event:Wn,options:Mn,context:bt,onAbort(wi){if(!ue.get(wi))return;const{onDragAbort:ti}=nt.current,Wi={id:wi};ti?.(Wi),V({type:"onDragAbort",event:Wi})},onPending(wi,hi,ti,Wi){if(!ue.get(wi))return;const{onDragPending:lo}=nt.current,Hi={id:wi,constraint:hi,initialCoordinates:ti,offset:Wi};lo?.(Hi),V({type:"onDragPending",event:Hi})},onStart(wi){const hi=qe.current;if(hi==null)return;const ti=ue.get(hi);if(!ti)return;const{onDragStart:Wi}=nt.current,Sn={activatorEvent:Wn,active:{id:hi,data:ti.data,rect:Be}};LC.unstable_batchedUpdates(()=>{Wi?.(Sn),Z(y1.Initializing),ee({type:Cc.DragStart,initialCoordinates:wi,active:hi}),V({type:"onDragStart",event:Sn}),ze(Ye.current),yt(Wn)})},onMove(wi){ee({type:Cc.DragMove,coordinates:wi})},onEnd:er(Cc.DragEnd),onCancel:er(Cc.DragCancel)});Ye.current=qi;function er(wi){return async function(){const{active:ti,collisions:Wi,over:Sn,scrollAdjustedTranslate:lo}=bt.current;let Hi=null;if(ti&&lo){const{cancelDrop:pa}=nt.current;Hi={activatorEvent:Wn,active:ti,collisions:Wi,delta:lo,over:Sn},wi===Cc.DragEnd&&typeof pa=="function"&&await Promise.resolve(pa(Hi))&&(wi=Cc.DragCancel)}qe.current=null,LC.unstable_batchedUpdates(()=>{ee({type:wi}),Z(y1.Uninitialized),Te(null),ze(null),yt(null),Ye.current=null;const pa=wi===Cc.DragEnd?"onDragEnd":"onDragCancel";if(Hi){const To=nt.current[pa];To?.(Hi),V({type:pa,event:Hi})}})}}},[ue]),Ze=Gt.useCallback((it,en)=>(Dn,Mn)=>{const ii=Dn.nativeEvent,Wn=ue.get(Mn);if(qe.current!==null||!Wn||ii.dndKit||ii.defaultPrevented)return;const qi={active:Wn};it(Dn,en.options,qi)===!0&&(ii.dndKit={capturedBy:en.sensor},qe.current=Mn,De(Dn,en))},[ue,De]),g=bre(S,Ze);Ire(S),t0(()=>{Re&&ne===y1.Initializing&&Z(y1.Initialized)},[Re,ne]),Gt.useEffect(()=>{const{onDragMove:it}=nt.current,{active:en,activatorEvent:Dn,collisions:Mn,over:ii}=bt.current;if(!en||!Dn)return;const Wn={active:en,activatorEvent:Dn,collisions:Mn,delta:{x:Ge.x,y:Ge.y},over:ii};LC.unstable_batchedUpdates(()=>{it?.(Wn),V({type:"onDragMove",event:Wn})})},[Ge.x,Ge.y]),Gt.useEffect(()=>{const{active:it,activatorEvent:en,collisions:Dn,droppableContainers:Mn,scrollAdjustedTranslate:ii}=bt.current;if(!it||qe.current==null||!en||!ii)return;const{onDragOver:Wn}=nt.current,qi=Mn.get(le),er=qi&&qi.rect.current?{id:qi.id,rect:qi.rect.current,data:qi.data,disabled:qi.disabled}:null,wi={active:it,activatorEvent:en,collisions:Dn,delta:{x:ii.x,y:ii.y},over:er};LC.unstable_batchedUpdates(()=>{Te(er),Wn?.(wi),V({type:"onDragOver",event:wi})})},[le]),t0(()=>{bt.current={activatorEvent:ot,active:we,activeNode:St,collisionRect:de,collisions:re,droppableRects:lt,draggableNodes:ue,draggingNode:qt,draggingNodeRect:Kt,droppableContainers:ye,over:me,scrollableAncestors:$n,scrollAdjustedTranslate:Ge},Be.current={initial:Kt,translated:de}},[we,St,re,de,ue,qt,Kt,lt,ye,me,$n,Ge]),yre({...Le,delta:ge,draggingRect:de,pointerCoordinates:In,scrollableAncestors:$n,scrollableAncestorRects:On});const gt=Gt.useMemo(()=>({active:we,activeNode:St,activeNodeRect:Re,activatorEvent:ot,collisions:re,containerNodeRect:He,dragOverlay:Ot,draggableNodes:ue,droppableContainers:ye,droppableRects:lt,over:me,measureDroppableContainers:It,scrollableAncestors:$n,scrollableAncestorRects:On,measuringConfiguration:tt,measuringScheduled:pt,windowRect:Wt}),[we,St,Re,ot,re,He,Ot,ue,ye,lt,me,It,$n,On,tt,pt,Wt]),ht=Gt.useMemo(()=>({activatorEvent:ot,activators:g,active:we,activeNodeRect:Re,ariaDescribedById:{draggable:be},dispatch:ee,draggableNodes:ue,over:me,measureDroppableContainers:It}),[ot,g,we,Re,ee,be,ue,me,It]);return ni.createElement(lN.Provider,{value:ae},ni.createElement(O2.Provider,{value:ht},ni.createElement(CN.Provider,{value:gt},ni.createElement(_N.Provider,{value:dt},C)),ni.createElement(Nre,{disabled:o?.restoreFocus===!1})),ni.createElement(Fie,{...o,hiddenTextDescribedById:be}));function kt(){const it=xe?.autoScrollEnabled===!1,en=typeof m=="object"?m.enabled===!1:m===!1,Dn=oe&&!it&&!en;return typeof m=="object"?{...m,enabled:Dn}:{enabled:Dn}}}),Yre=Gt.createContext(null),bT="button",qre="Draggable";function Hre(n){let{id:e,data:t,disabled:i=!1,attributes:r}=n;const a=xb(qre),{activators:l,activatorEvent:o,active:m,activeNodeRect:C,ariaDescribedById:S,draggableNodes:O,over:U}=Gt.useContext(O2),{role:K=bT,roleDescription:z="draggable",tabIndex:j=0}=r??{},Q=m?.id===e,ee=Gt.useContext(Q?_N:Yre),[V,ae]=m3(),[ne,Z]=m3(),oe=Tre(l,e),W=P_(t);t0(()=>(O.set(e,{id:e,key:a,node:V,activatorNode:ne,data:W}),()=>{const ge=O.get(e);ge&&ge.key===a&&O.delete(e)}),[O,e]);const ue=Gt.useMemo(()=>({role:K,tabIndex:j,"aria-disabled":i,"aria-pressed":Q&&K===bT?!0:void 0,"aria-roledescription":z,"aria-describedby":S.draggable}),[i,K,j,Q,z,S.draggable]);return{active:m,activatorEvent:o,activeNodeRect:C,attributes:ue,isDragging:Q,listeners:i?void 0:oe,node:V,over:U,setNodeRef:ae,setActivatorNodeRef:Z,transform:ee}}function Vre(){return Gt.useContext(CN)}const $re="Droppable",Zre={timeout:25};function Xre(n){let{data:e,disabled:t=!1,id:i,resizeObserverConfig:r}=n;const a=xb($re),{active:l,dispatch:o,over:m,measureDroppableContainers:C}=Gt.useContext(O2),S=Gt.useRef({disabled:t}),O=Gt.useRef(!1),U=Gt.useRef(null),K=Gt.useRef(null),{disabled:z,updateMeasurementsFor:j,timeout:Q}={...Zre,...r},ee=P_(j??i),V=Gt.useCallback(()=>{if(!O.current){O.current=!0;return}K.current!=null&&clearTimeout(K.current),K.current=setTimeout(()=>{C(Array.isArray(ee.current)?ee.current:[ee.current]),K.current=null},Q)},[Q]),ae=B2({callback:V,disabled:z||!l}),ne=Gt.useCallback((ue,ge)=>{ae&&(ge&&(ae.unobserve(ge),O.current=!1),ue&&ae.observe(ue))},[ae]),[Z,oe]=m3(ne),W=P_(e);return Gt.useEffect(()=>{!ae||!Z.current||(ae.disconnect(),O.current=!1,ae.observe(Z.current))},[Z,ae]),Gt.useEffect(()=>(o({type:Cc.RegisterDroppable,element:{id:i,key:a,disabled:t,node:Z,rect:U,data:W}}),()=>o({type:Cc.UnregisterDroppable,key:a,id:i})),[i]),Gt.useEffect(()=>{t!==S.current.disabled&&(o({type:Cc.SetDroppableDisabled,id:i,key:a,disabled:t}),S.current.disabled=t)},[i,a,t,o]),{active:l,rect:U,isOver:m?.id===i,node:Z,over:m,setNodeRef:oe}}function bN(n,e,t){const i=n.slice();return i.splice(t<0?i.length+t:t,0,i.splice(e,1)[0]),i}function Jre(n,e){return n.reduce((t,i,r)=>{const a=e.get(i);return a&&(t[r]=a),t},Array(n.length))}function ix(n){return n!==null&&n>=0}function eoe(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function toe(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const xN=n=>{let{rects:e,activeIndex:t,overIndex:i,index:r}=n;const a=bN(e,i,t),l=e[r],o=a[r];return!o||!l?null:{x:o.left-l.left,y:o.top-l.top,scaleX:o.width/l.width,scaleY:o.height/l.height}},rx={scaleX:1,scaleY:1},noe=n=>{var e;let{activeIndex:t,activeNodeRect:i,index:r,rects:a,overIndex:l}=n;const o=(e=a[t])!=null?e:i;if(!o)return null;if(r===t){const C=a[l];return C?{x:0,y:t<l?C.top+C.height-(o.top+o.height):C.top-o.top,...rx}:null}const m=ioe(a,r,t);return r>t&&r<=l?{x:0,y:-o.height-m,...rx}:r<t&&r>=l?{x:0,y:o.height+m,...rx}:{x:0,y:0,...rx}};function ioe(n,e,t){const i=n[e],r=n[e-1],a=n[e+1];return i?t<e?r?i.top-(r.top+r.height):a?a.top-(i.top+i.height):0:a?a.top-(i.top+i.height):r?i.top-(r.top+r.height):0:0}const MN="Sortable",SN=ni.createContext({activeIndex:-1,containerId:MN,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:xN,disabled:{draggable:!1,droppable:!1}});function roe(n){let{children:e,id:t,items:i,strategy:r=xN,disabled:a=!1}=n;const{active:l,dragOverlay:o,droppableRects:m,over:C,measureDroppableContainers:S}=Vre(),O=xb(MN,t),U=o.rect!==null,K=Gt.useMemo(()=>i.map(oe=>typeof oe=="object"&&"id"in oe?oe.id:oe),[i]),z=l!=null,j=l?K.indexOf(l.id):-1,Q=C?K.indexOf(C.id):-1,ee=Gt.useRef(K),V=!eoe(K,ee.current),ae=Q!==-1&&j===-1||V,ne=toe(a);t0(()=>{V&&z&&S(K)},[V,K,z,S]),Gt.useEffect(()=>{ee.current=K},[K]);const Z=Gt.useMemo(()=>({activeIndex:j,containerId:O,disabled:ne,disableTransforms:ae,items:K,overIndex:Q,useDragOverlay:U,sortedRects:Jre(K,m),strategy:r}),[j,O,ne.draggable,ne.droppable,ae,K,Q,m,U,r]);return ni.createElement(SN.Provider,{value:Z},e)}const ooe=n=>{let{id:e,items:t,activeIndex:i,overIndex:r}=n;return bN(t,i,r).indexOf(e)},aoe=n=>{let{containerId:e,isSorting:t,wasDragging:i,index:r,items:a,newIndex:l,previousItems:o,previousContainerId:m,transition:C}=n;return!C||!i||o!==a&&r===l?!1:t?!0:l!==r&&e===m},soe={duration:200,easing:"ease"},wN="transform",loe=K_.Transition.toString({property:wN,duration:0,easing:"linear"}),Aoe={roleDescription:"sortable"};function uoe(n){let{disabled:e,index:t,node:i,rect:r}=n;const[a,l]=Gt.useState(null),o=Gt.useRef(t);return t0(()=>{if(!e&&t!==o.current&&i.current){const m=r.current;if(m){const C=Xv(i.current,{ignoreTransform:!0}),S={x:m.left-C.left,y:m.top-C.top,scaleX:m.width/C.width,scaleY:m.height/C.height};(S.x||S.y)&&l(S)}}t!==o.current&&(o.current=t)},[e,t,i,r]),Gt.useEffect(()=>{a&&l(null)},[a]),a}function coe(n){let{animateLayoutChanges:e=aoe,attributes:t,disabled:i,data:r,getNewIndex:a=ooe,id:l,strategy:o,resizeObserverConfig:m,transition:C=soe}=n;const{items:S,containerId:O,activeIndex:U,disabled:K,disableTransforms:z,sortedRects:j,overIndex:Q,useDragOverlay:ee,strategy:V}=Gt.useContext(SN),ae=hoe(i,K),ne=S.indexOf(l),Z=Gt.useMemo(()=>({sortable:{containerId:O,index:ne,items:S},...r}),[O,r,ne,S]),oe=Gt.useMemo(()=>S.slice(S.indexOf(l)),[S,l]),{rect:W,node:ue,isOver:ge,setNodeRef:ye}=Xre({id:l,data:Z,disabled:ae.droppable,resizeObserverConfig:{updateMeasurementsFor:oe,...m}}),{active:Me,activatorEvent:Be,activeNodeRect:we,attributes:qe,setNodeRef:xe,listeners:ze,isDragging:ot,over:yt,setActivatorNodeRef:nt,transform:be}=Hre({id:l,data:Z,attributes:{...Aoe,...t},disabled:ae.draggable}),Ne=wie(ye,xe),tt=!!Me,lt=tt&&!z&&ix(U)&&ix(Q),It=!ee&&ot,pt=It&&lt?be:null,Rt=lt?pt??(o??V)({rects:j,activeNodeRect:we,activeIndex:U,overIndex:Q,index:ne}):null,Le=ix(U)&&ix(Q)?a({id:l,items:S,activeIndex:U,overIndex:Q}):ne,Pe=Me?.id,Re=Gt.useRef({activeId:Pe,items:S,newIndex:Le,containerId:O}),He=S!==Re.current.items,bt=e({active:Me,containerId:O,isDragging:ot,isSorting:tt,id:l,index:ne,items:S,newIndex:Re.current.newIndex,previousItems:Re.current.items,previousContainerId:Re.current.containerId,transition:C,wasDragging:Re.current.activeId!=null}),vt=uoe({disabled:!bt,index:ne,node:ue,rect:W});return Gt.useEffect(()=>{tt&&Re.current.newIndex!==Le&&(Re.current.newIndex=Le),O!==Re.current.containerId&&(Re.current.containerId=O),S!==Re.current.items&&(Re.current.items=S)},[tt,Le,O,S]),Gt.useEffect(()=>{if(Pe===Re.current.activeId)return;if(Pe!=null&&Re.current.activeId==null){Re.current.activeId=Pe;return}const qt=setTimeout(()=>{Re.current.activeId=Pe},50);return()=>clearTimeout(qt)},[Pe]),{active:Me,activeIndex:U,attributes:qe,data:Z,rect:W,index:ne,newIndex:Le,items:S,isOver:ge,isSorting:tt,isDragging:ot,listeners:ze,node:ue,overIndex:Q,over:yt,setNodeRef:Ne,setActivatorNodeRef:nt,setDroppableNodeRef:ye,setDraggableNodeRef:xe,transform:vt??Rt,transition:Ot()};function Ot(){if(vt||He&&Re.current.newIndex===ne)return loe;if(!(It&&!a8(Be)||!C)&&(tt||bt))return K_.Transition.toString({...C,property:wN})}}function hoe(n,e){var t,i;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(t=n?.draggable)!=null?t:e.draggable,droppable:(i=n?.droppable)!=null?i:e.droppable}}Ps.Down,Ps.Right,Ps.Up,Ps.Left;function Sg(){var n="/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",e="e73e8fb606fcd7318a8222b2e50c576ed3ad8702",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",statementMap:{0:{start:{line:6,column:22},end:{line:10,column:5}},1:{start:{line:11,column:4},end:{line:11,column:154}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:12,column:3}},line:5}},branchMap:{0:{loc:{start:{line:11,column:11},end:{line:11,column:153}},type:"cond-expr",locations:[{start:{line:11,column:52},end:{line:11,column:92}},{start:{line:11,column:111},end:{line:11,column:153}}],line:11}},s:{0:0,1:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx"],names:[],mappings:"AAeoC;AAfpC,OAAO,WAAW;AAClB,SAAQ,iBAAiB,qBAAoB;AAO7C,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY;AAAA,MAChB,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,GAAG,KAAK,MAAM;AAAA,IAChB;AACA,WAAO,KAAK,MAAM,cAAc,oBAAC,iBAAc,OAAO,WAAU,IAAK,oBAAC,mBAAgB,OAAO,WAAW;AAAA,EAC1G;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e73e8fb606fcd7318a8222b2e50c576ed3ad8702"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Sg=function(){return l},l}Sg();class doe extends ni.Component{render(){Sg().f[0]++;const e=(Sg().s[0]++,{width:20,height:20,...this.props.style});return Sg().s[1]++,this.props.isCollapsed?(Sg().b[0][0]++,ce.jsx(l$,{style:e})):(Sg().b[0][1]++,ce.jsx(s$,{style:e}))}}function cv(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",e="b04bfec534013c327fd210571832bbd2813a944a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:32,column:9}},1:{start:{line:11,column:25},end:{line:11,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:33,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:25},end:{line:11,column:72}},line:11}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx"],names:[],mappings:"AAcM,SAIE,KAJF;AAdN,OAAO,WAAW;AAClB,OAAO,eAAe;AAUtB,qBAAqB,uBAAuB,MAAM,UAA+B;AAAA,EAC/E,SAAS;AACP,WAAO,oBAAC,QAAG,WAAU,6BACnB;AAAA,MAAC;AAAA;AAAA,QAAI,WAAU;AAAA,QACb,eAAa,sBAAoB,KAAK,MAAM,aAAa;AAAA,QACzD,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,QAE7D;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,iBAAe,KAAK,MAAM,eAAe;AAAA,cACzC,iBAAe,KAAK,MAAM;AAAA,cAEzB,eAAK,MAAM;AAAA;AAAA,UACd;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ,IAAI,OAAO,GAAG;AAAA,cAC/B,aAAa,KAAK,MAAM;AAAA;AAAA,UAC1B;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b04bfec534013c327fd210571832bbd2813a944a"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return cv=function(){return l},l}cv();class foe extends ni.Component{render(){return cv().f[0]++,cv().s[0]++,ce.jsx("li",{className:"maputnik-layer-list-group",children:ce.jsxs("div",{className:"maputnik-layer-list-group-header","data-wd-key":"layer-list-group:"+this.props["data-wd-key"],onClick:e=>(cv().f[1]++,cv().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:[ce.jsx("button",{className:"maputnik-layer-list-group-title","aria-controls":this.props["aria-controls"],"aria-expanded":this.props.isActive,children:this.props.title}),ce.jsx("span",{className:"maputnik-space"}),ce.jsx(doe,{style:{height:14,width:14},isCollapsed:this.props.isActive})]})})}}function yr(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",e="6ba8012871129767c13ba5086416825e29445068",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",statementMap:{0:{start:{line:9,column:23},end:{line:22,column:1}},1:{start:{line:10,column:44},end:{line:10,column:49}},2:{start:{line:11,column:2},end:{line:21,column:7}},3:{start:{line:25,column:4},end:{line:34,column:5}},4:{start:{line:27,column:8},end:{line:27,column:54}},5:{start:{line:29,column:8},end:{line:29,column:53}},6:{start:{line:31,column:8},end:{line:31,column:56}},7:{start:{line:33,column:8},end:{line:33,column:49}},8:{start:{line:37,column:51},end:{line:37,column:61}},9:{start:{line:38,column:25},end:{line:38,column:27}},10:{start:{line:39,column:4},end:{line:44,column:5}},11:{start:{line:40,column:6},end:{line:40,column:76}},12:{start:{line:41,column:6},end:{line:43,column:7}},13:{start:{line:42,column:8},end:{line:42,column:103}},14:{start:{line:45,column:4},end:{line:56,column:6}},15:{start:{line:59,column:22},end:{line:145,column:2}},16:{start:{line:69,column:6},end:{line:69,column:11}},17:{start:{line:77,column:6},end:{line:77,column:40}},18:{start:{line:78,column:16},end:{line:82,column:3}},19:{start:{line:83,column:27},end:{line:83,column:69}},20:{start:{line:84,column:20},end:{line:84,column:23}},21:{start:{line:85,column:2},end:{line:144,column:7}},22:{start:{line:89,column:8},end:{line:89,column:25}},23:{start:{line:90,column:8},end:{line:92,column:9}},24:{start:{line:91,column:10},end:{line:91,column:35}},25:{start:{line:96,column:23},end:{line:96,column:60}},26:{start:{line:120,column:29},end:{line:120,column:61}},27:{start:{line:129,column:29},end:{line:129,column:58}},28:{start:{line:139,column:29},end:{line:139,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:23},end:{line:9,column:24}},loc:{start:{line:9,column:34},end:{line:22,column:1}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:35,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:11},end:{line:57,column:3}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:59,column:39},end:{line:59,column:40}},loc:{start:{line:59,column:55},end:{line:145,column:1}},line:59},4:{name:"(anonymous_4)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:24},end:{line:64,column:5}},line:63},5:{name:"(anonymous_5)",decl:{start:{line:65,column:21},end:{line:65,column:22}},loc:{start:{line:65,column:27},end:{line:66,column:5}},line:65},6:{name:"(anonymous_6)",decl:{start:{line:67,column:30},end:{line:67,column:31}},loc:{start:{line:67,column:36},end:{line:68,column:5}},line:67},7:{name:"(anonymous_7)",decl:{start:{line:88,column:11},end:{line:88,column:12}},loc:{start:{line:88,column:21},end:{line:93,column:7}},line:88},8:{name:"(anonymous_8)",decl:{start:{line:96,column:15},end:{line:96,column:16}},loc:{start:{line:96,column:23},end:{line:96,column:60}},line:96},9:{name:"(anonymous_9)",decl:{start:{line:120,column:21},end:{line:120,column:22}},loc:{start:{line:120,column:29},end:{line:120,column:61}},line:120},10:{name:"(anonymous_10)",decl:{start:{line:129,column:21},end:{line:129,column:22}},loc:{start:{line:129,column:29},end:{line:129,column:58}},line:129},11:{name:"(anonymous_11)",decl:{start:{line:139,column:21},end:{line:139,column:22}},loc:{start:{line:139,column:29},end:{line:139,column:70}},line:139}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:34,column:5}},type:"switch",locations:[{start:{line:26,column:6},end:{line:27,column:54}},{start:{line:28,column:6},end:{line:29,column:53}},{start:{line:30,column:6},end:{line:31,column:56}},{start:{line:32,column:6},end:{line:33,column:49}}],line:25},1:{loc:{start:{line:39,column:4},end:{line:44,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:44,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:41,column:6},end:{line:43,column:7}},type:"if",locations:[{start:{line:41,column:6},end:{line:43,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:61,column:4},end:{line:61,column:22}},type:"default-arg",locations:[{start:{line:61,column:17},end:{line:61,column:22}}],line:61},4:{loc:{start:{line:62,column:4},end:{line:62,column:26}},type:"default-arg",locations:[{start:{line:62,column:17},end:{line:62,column:26}}],line:62},5:{loc:{start:{line:63,column:4},end:{line:64,column:5}},type:"default-arg",locations:[{start:{line:63,column:18},end:{line:64,column:5}}],line:63},6:{loc:{start:{line:65,column:4},end:{line:66,column:5}},type:"default-arg",locations:[{start:{line:65,column:21},end:{line:66,column:5}}],line:65},7:{loc:{start:{line:67,column:4},end:{line:68,column:5}},type:"default-arg",locations:[{start:{line:67,column:30},end:{line:68,column:5}}],line:67},8:{loc:{start:{line:81,column:13},end:{line:81,column:33}},type:"cond-expr",locations:[{start:{line:81,column:26},end:{line:81,column:29}},{start:{line:81,column:32},end:{line:81,column:33}}],line:81},9:{loc:{start:{line:83,column:27},end:{line:83,column:69}},type:"cond-expr",locations:[{start:{line:83,column:54},end:{line:83,column:60}},{start:{line:83,column:63},end:{line:83,column:69}}],line:83},10:{loc:{start:{line:90,column:8},end:{line:92,column:9}},type:"if",locations:[{start:{line:90,column:8},end:{line:92,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0,0,0],1:[0,0],2:[0,0],3:[0],4:[0],5:[0],6:[0],7:[0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx"],names:[],mappings:"AAmBS,SACL,KADK;AAnBT,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,eAAe,cAAc,iBAAiB,gBAAe;AACrE,SAAS,mBAAmB;AAC5B,SAAQ,mBAAkB;AAC1B,SAAQ,WAAU;AAElB,OAAO,eAAe;AAUtB,MAAM,iBAAgD,CAAC,UAAU;AAC/D,QAAM,EAAC,gBAAgB,cAAa,IAAI;AACxC,SAAO,qBAAC,SAAI,WAAU,mCAAmC,GAAG,gBAAiB,GAAG,eAC9E;AAAA;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,MAAM,MAAM;AAAA,QACZ,OAAO,EAAE,OAAO,OAAO,QAAQ,OAAO,eAAe,SAAS;AAAA;AAAA,IAChE;AAAA,IACA,oBAAC,YAAO,WAAU,+BACf,gBAAM,SACT;AAAA,KACF;AACF;AAUA,MAAM,mBAAmB,MAAM,UAA2B;AAAA,EACxD,aAAa;AACX,YAAO,KAAK,MAAM,QAAQ;AAAA,MAC1B,KAAK;AAAa,eAAO,oBAAC,iBAAc;AAAA,MACxC,KAAK;AAAQ,eAAO,oBAAC,gBAAa;AAAA,MAClC,KAAK;AAAQ,eAAO,oBAAC,mBAAgB;AAAA,MACrC,KAAK;AAAU,eAAO,oBAAC,YAAS;AAAA,IAChC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,gBAAgB,mBAAkB,IAAI,KAAK;AAElD,QAAI,iBAAiB;AACrB,QAAI,gBAAgB;AAClB,uBAAiB,oCAAoC,cAAc;AAEnE,UAAI,oBAAoB;AACtB,0BAAkB,qCAAqC,cAAc,KAAK,kBAAkB;AAAA,MAC9F;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,UAAU;AAAA,QACV,OAAO,KAAK,MAAM;AAAA,QAClB,WAAW,mCAAmC,cAAc;AAAA,QAC5D,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QACpB,eAAY;AAAA,QAEX,eAAK,WAAW;AAAA;AAAA,IACnB;AAAA,EACF;AACF;AAgBA,MAAM,gBAAgB,MAAM,WAA8C,CAAC,OAAO,QAAQ;AACxF,QAAM;AAAA,IACJ,aAAa;AAAA,IACb,aAAa;AAAA,IACb,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,0BAA0B,MAAM;AAAA,IAAC;AAAA,EACnC,IAAI;AAEJ,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI,YAAY,EAAC,IAAI,MAAM,QAAO,CAAC;AAEnC,QAAM,QAAQ;AAAA,IACZ,WAAW,IAAI,UAAU,SAAS,SAAS;AAAA,IAC3C;AAAA,IACA,SAAS,aAAa,MAAM;AAAA,EAC9B;AAEA,QAAM,mBAAmB,eAAe,YAAY,SAAS;AAG7D,QAAM,YAAY;AAElB,SAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,OAAM,GAC/C;AAAA,IAAC;AAAA;AAAA,MACC,KAAK,CAAC,SAAS;AACb,mBAAW,IAAI;AACf,YAAI,WAAW;AACb,oBAAU,UAAU;AAAA,QACtB;AAAA,MACF;AAAA,MACA;AAAA,MACA,IAAI,MAAM;AAAA,MACV,SAAS,QAAM,MAAM,cAAc,MAAM,UAAU;AAAA,MACnD,eAAa,qBAAqB,MAAM;AAAA,MACxC,WAAW,WAAW;AAAA,QACpB,4BAA4B;AAAA,QAC5B,qCAAqC;AAAA,QACrC,CAAC,MAAM,SAAU,GAAG;AAAA,MACtB,CAAC;AAAA,MACD;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,MAAM;AAAA,YACf,WAAW,MAAM;AAAA,YACjB,gBAAgB;AAAA,YAChB,eAAe;AAAA;AAAA,QACjB;AAAA,QACA,oBAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAG;AAAA,QAC5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAqB,MAAM,UAAQ;AAAA,YAC1C,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,SAAS,QAAM,eAAgB,MAAM,UAAU;AAAA;AAAA,QACjD;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAqB,MAAM,UAAQ;AAAA,YAC1C,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,SAAS,QAAM,YAAa,MAAM,UAAU;AAAA;AAAA,QAC9C;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAmB,MAAM,UAAQ;AAAA,YACxC,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,oBAAoB;AAAA,YACpB,SAAS,QAAM,wBAAyB,MAAM,UAAU;AAAA;AAAA,QAC1D;AAAA;AAAA;AAAA,EACF,GACF;AACF,CAAC;AAED,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6ba8012871129767c13ba5086416825e29445068"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return yr=function(){return l},l}yr();yr().s[0]++;const moe=n=>{yr().f[0]++;const{dragAttributes:e,dragListeners:t}=(yr().s[1]++,n);return yr().s[2]++,ce.jsxs("div",{className:"maputnik-layer-list-item-handle",...e,...t,children:[ce.jsx(rF,{className:"layer-handle__icon",type:n.layerType,style:{width:"1em",height:"1em",verticalAlign:"middle"}}),ce.jsx("button",{className:"maputnik-layer-list-item-id",children:n.layerId})]})};class bM extends ni.Component{renderIcon(){switch(yr().f[1]++,yr().s[3]++,this.props.action){case"duplicate":return yr().b[0][0]++,yr().s[4]++,ce.jsx(t$,{});case"show":return yr().b[0][1]++,yr().s[5]++,ce.jsx(e$,{});case"hide":return yr().b[0][2]++,yr().s[6]++,ce.jsx(JV,{});case"delete":return yr().b[0][3]++,yr().s[7]++,ce.jsx(Wv,{})}}render(){yr().f[2]++;const{classBlockName:e,classBlockModifier:t}=(yr().s[8]++,this.props);let i=(yr().s[9]++,"");return yr().s[10]++,e?(yr().b[1][0]++,yr().s[11]++,i=`maputnik-layer-list-icon-action__${e}`,yr().s[12]++,t?(yr().b[2][0]++,yr().s[13]++,i+=` maputnik-layer-list-icon-action__${e}--${t}`):yr().b[2][1]++):yr().b[1][1]++,yr().s[14]++,ce.jsx("button",{tabIndex:-1,title:this.props.action,className:`maputnik-layer-list-icon-action ${i}`,"data-wd-key":this.props.wdKey,onClick:this.props.onClick,"aria-hidden":"true",children:this.renderIcon()})}}const poe=(yr().s[15]++,ni.forwardRef((n,e)=>{yr().f[3]++;const{isSelected:t=(yr().b[3][0]++,!1),visibility:i=(yr().b[4][0]++,"visible"),onLayerCopy:r=(yr().b[5][0]++,()=>{yr().f[4]++}),onLayerDestroy:a=(yr().b[6][0]++,()=>{yr().f[5]++}),onLayerVisibilityToggle:l=(yr().b[7][0]++,()=>{yr().f[6]++})}=(yr().s[16]++,n),{attributes:o,listeners:m,setNodeRef:C,transform:S,transition:O,isDragging:U}=(yr().s[17]++,coe({id:n.layerId})),K=(yr().s[18]++,{transform:K_.Transform.toString(S),transition:O,opacity:U?(yr().b[8][0]++,.5):(yr().b[8][1]++,1)}),z=(yr().s[19]++,i==="visible"?(yr().b[9][0]++,"show"):(yr().b[9][1]++,"hide")),j=(yr().s[20]++,e);return yr().s[21]++,ce.jsx(Sv.Provider,{value:{size:"14px"},children:ce.jsxs("li",{ref:Q=>{yr().f[7]++,yr().s[22]++,C(Q),yr().s[23]++,j?(yr().b[10][0]++,yr().s[24]++,j.current=Q):yr().b[10][1]++},style:K,id:n.id,onClick:Q=>(yr().f[8]++,yr().s[25]++,n.onLayerSelect(n.layerIndex)),"data-wd-key":"layer-list-item:"+n.layerId,className:e0({"maputnik-layer-list-item":!0,"maputnik-layer-list-item-selected":t,[n.className]:!0}),children:[ce.jsx(moe,{layerId:n.layerId,layerType:n.layerType,dragAttributes:o,dragListeners:m}),ce.jsx("span",{style:{flexGrow:1}}),ce.jsx(bM,{wdKey:"layer-list-item:"+n.layerId+":delete",action:"delete",classBlockName:"delete",onClick:Q=>(yr().f[9]++,yr().s[26]++,a(n.layerIndex))}),ce.jsx(bM,{wdKey:"layer-list-item:"+n.layerId+":copy",action:"duplicate",classBlockName:"duplicate",onClick:Q=>(yr().f[10]++,yr().s[27]++,r(n.layerIndex))}),ce.jsx(bM,{wdKey:"layer-list-item:"+n.layerId+":toggle-visibility",action:z,classBlockName:"visibility",classBlockModifier:z,onClick:Q=>(yr().f[11]++,yr().s[28]++,l(n.layerIndex))})]})})}));function v3(){var n="/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",e="522bfc6b8aacbfd03b55d947af2897dc69beb570",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:20,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:21,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx"],names:[],mappings:"AAkBW;AAlBX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAevB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,IAAI,KAAK,MAAM;AAAA,QACf,OAAO,KAAK,MAAM;AAAA,QAClB,MAAM,KAAK,MAAM;AAAA,QACjB,SAAS,KAAK,MAAM;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,cAAY,KAAK,MAAM,YAAY;AAAA,QACnC,WAAW,WAAW,mBAAmB,KAAK,MAAM,SAAS;AAAA,QAC7D,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAEjB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"522bfc6b8aacbfd03b55d947af2897dc69beb570"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return v3=function(){return l},l}v3();class ml extends ni.Component{render(){return v3().f[0]++,v3().s[0]++,ce.jsx("button",{id:this.props.id,title:this.props.title,type:this.props.type,onClick:this.props.onClick,disabled:this.props.disabled,"aria-label":this.props["aria-label"],className:e0("maputnik-button",this.props.className),"data-wd-key":this.props["data-wd-key"],style:this.props.style,children:this.props.children})}}var xM={exports:{}},MM,xT;function goe(){if(xT)return MM;xT=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return MM=n,MM}var SM,MT;function yoe(){if(MT)return SM;MT=1;var n=goe();function e(){}function t(){}return t.resetWarningCache=e,SM=function(){function i(l,o,m,C,S,O){if(O!==n){var U=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw U.name="Invariant Violation",U}}i.isRequired=i;function r(){return i}var a={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},SM}var ST;function i0(){return ST||(ST=1,xM.exports=yoe()()),xM.exports}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var EN=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],C3=EN.join(","),BN=typeof Element>"u",Hg=BN?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,_3=!BN&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n?.ownerDocument},b3=function n(e,t){var i;t===void 0&&(t=!0);var r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"inert"),a=r===""||r==="true",l=a||t&&e&&n(e.parentNode);return l},voe=function(e){var t,i=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return i===""||i==="true"},ON=function(e,t,i){if(b3(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(C3));return t&&Hg.call(e,C3)&&r.unshift(e),r=r.filter(i),r},IN=function n(e,t,i){for(var r=[],a=Array.from(e);a.length;){var l=a.shift();if(!b3(l,!1))if(l.tagName==="SLOT"){var o=l.assignedElements(),m=o.length?o:l.children,C=n(m,!0,i);i.flatten?r.push.apply(r,C):r.push({scopeParent:l,candidates:C})}else{var S=Hg.call(l,C3);S&&i.filter(l)&&(t||!e.includes(l))&&r.push(l);var O=l.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(l),U=!b3(O,!1)&&(!i.shadowRootFilter||i.shadowRootFilter(l));if(O&&U){var K=n(O===!0?l.children:O.children,!0,i);i.flatten?r.push.apply(r,K):r.push({scopeParent:l,candidates:K})}else a.unshift.apply(a,l.children)}}return r},TN=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},v1=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||voe(e))&&!TN(e)?0:e.tabIndex},Coe=function(e,t){var i=v1(e);return i<0&&t&&!TN(e)?0:i},_oe=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},kN=function(e){return e.tagName==="INPUT"},boe=function(e){return kN(e)&&e.type==="hidden"},xoe=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(i){return i.tagName==="SUMMARY"});return t},Moe=function(e,t){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===t)return e[i]},Soe=function(e){if(!e.name)return!0;var t=e.form||_3(e),i=function(o){return t.querySelectorAll('input[type="radio"][name="'+o+'"]')},r;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")r=i(window.CSS.escape(e.name));else try{r=i(e.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var a=Moe(r,e.form);return!a||a===e},woe=function(e){return kN(e)&&e.type==="radio"},Eoe=function(e){return woe(e)&&!Soe(e)},Boe=function(e){var t,i=e&&_3(e),r=(t=i)===null||t===void 0?void 0:t.host,a=!1;if(i&&i!==e){var l,o,m;for(a=!!((l=r)!==null&&l!==void 0&&(o=l.ownerDocument)!==null&&o!==void 0&&o.contains(r)||e!=null&&(m=e.ownerDocument)!==null&&m!==void 0&&m.contains(e));!a&&r;){var C,S,O;i=_3(r),r=(C=i)===null||C===void 0?void 0:C.host,a=!!((S=r)!==null&&S!==void 0&&(O=S.ownerDocument)!==null&&O!==void 0&&O.contains(r))}}return a},wT=function(e){var t=e.getBoundingClientRect(),i=t.width,r=t.height;return i===0&&r===0},Ooe=function(e,t){var i=t.displayCheck,r=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var a=Hg.call(e,"details>summary:first-of-type"),l=a?e.parentElement:e;if(Hg.call(l,"details:not([open]) *"))return!0;if(!i||i==="full"||i==="legacy-full"){if(typeof r=="function"){for(var o=e;e;){var m=e.parentElement,C=_3(e);if(m&&!m.shadowRoot&&r(m)===!0)return wT(e);e.assignedSlot?e=e.assignedSlot:!m&&C!==e.ownerDocument?e=C.host:e=m}e=o}if(Boe(e))return!e.getClientRects().length;if(i!=="legacy-full")return!0}else if(i==="non-zero-area")return wT(e);return!1},Ioe=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var i=0;i<t.children.length;i++){var r=t.children.item(i);if(r.tagName==="LEGEND")return Hg.call(t,"fieldset[disabled] *")?!0:!r.contains(e)}return!0}t=t.parentElement}return!1},x3=function(e,t){return!(t.disabled||b3(t)||boe(t)||Ooe(t,e)||xoe(t)||Ioe(t))},mB=function(e,t){return!(Eoe(t)||v1(t)<0||!x3(e,t))},Toe=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},koe=function n(e){var t=[],i=[];return e.forEach(function(r,a){var l=!!r.scopeParent,o=l?r.scopeParent:r,m=Coe(o,l),C=l?n(r.candidates):o;m===0?l?t.push.apply(t,C):t.push(o):i.push({documentOrder:a,tabIndex:m,item:r,isScope:l,content:C})}),i.sort(_oe).reduce(function(r,a){return a.isScope?r.push.apply(r,a.content):r.push(a.content),r},[]).concat(t)},DN=function(e,t){t=t||{};var i;return t.getShadowRoot?i=IN([e],t.includeContainer,{filter:mB.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:Toe}):i=ON(e,t.includeContainer,mB.bind(null,t)),koe(i)},RN=function(e,t){t=t||{};var i;return t.getShadowRoot?i=IN([e],t.includeContainer,{filter:x3.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):i=ON(e,t.includeContainer,x3.bind(null,t)),i},bg=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Hg.call(e,C3)===!1?!1:mB(t,e)},Doe=EN.concat("iframe").join(","),Bx=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Hg.call(e,Doe)===!1?!1:x3(t,e)};const Roe=Object.freeze(Object.defineProperty({__proto__:null,focusable:RN,getTabIndex:v1,isFocusable:Bx,isTabbable:bg,tabbable:DN},Symbol.toStringTag,{value:"Module"}));/*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function ET(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function BT(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ET(Object(t),!0).forEach(function(i){Poe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ET(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Poe(n,e,t){return e=Uoe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Koe(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Uoe(n){var e=Koe(n,"string");return typeof e=="symbol"?e:String(e)}var OT={activateTrap:function(e,t){if(e.length>0){var i=e[e.length-1];i!==t&&i.pause()}var r=e.indexOf(t);r===-1||e.splice(r,1),e.push(t)},deactivateTrap:function(e,t){var i=e.indexOf(t);i!==-1&&e.splice(i,1),e.length>0&&e[e.length-1].unpause()}},Loe=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Foe=function(e){return e?.key==="Escape"||e?.key==="Esc"||e?.keyCode===27},o_=function(e){return e?.key==="Tab"||e?.keyCode===9},zoe=function(e){return o_(e)&&!e.shiftKey},Noe=function(e){return o_(e)&&e.shiftKey},IT=function(e){return setTimeout(e,0)},TT=function(e,t){var i=-1;return e.every(function(r,a){return t(r)?(i=a,!1):!0}),i},xC=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return typeof e=="function"?e.apply(void 0,i):e},ox=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Goe=[],joe=function(e,t){var i=t?.document||document,r=t?.trapStack||Goe,a=BT({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:zoe,isKeyBackward:Noe},t),l={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},o,m=function(Be,we,qe){return Be&&Be[we]!==void 0?Be[we]:a[qe||we]},C=function(Be,we){var qe=typeof we?.composedPath=="function"?we.composedPath():void 0;return l.containerGroups.findIndex(function(xe){var ze=xe.container,ot=xe.tabbableNodes;return ze.contains(Be)||qe?.includes(ze)||ot.find(function(yt){return yt===Be})})},S=function(Be){var we=a[Be];if(typeof we=="function"){for(var qe=arguments.length,xe=new Array(qe>1?qe-1:0),ze=1;ze<qe;ze++)xe[ze-1]=arguments[ze];we=we.apply(void 0,xe)}if(we===!0&&(we=void 0),!we){if(we===void 0||we===!1)return we;throw new Error("`".concat(Be,"` was specified but was not a node, or did not return a node"))}var ot=we;if(typeof we=="string"&&(ot=i.querySelector(we),!ot))throw new Error("`".concat(Be,"` as selector refers to no known node"));return ot},O=function(){var Be=S("initialFocus");if(Be===!1)return!1;if(Be===void 0||!Bx(Be,a.tabbableOptions))if(C(i.activeElement)>=0)Be=i.activeElement;else{var we=l.tabbableGroups[0],qe=we&&we.firstTabbableNode;Be=qe||S("fallbackFocus")}if(!Be)throw new Error("Your focus-trap needs to have at least one focusable element");return Be},U=function(){if(l.containerGroups=l.containers.map(function(Be){var we=DN(Be,a.tabbableOptions),qe=RN(Be,a.tabbableOptions),xe=we.length>0?we[0]:void 0,ze=we.length>0?we[we.length-1]:void 0,ot=qe.find(function(be){return bg(be)}),yt=qe.slice().reverse().find(function(be){return bg(be)}),nt=!!we.find(function(be){return v1(be)>0});return{container:Be,tabbableNodes:we,focusableNodes:qe,posTabIndexesFound:nt,firstTabbableNode:xe,lastTabbableNode:ze,firstDomTabbableNode:ot,lastDomTabbableNode:yt,nextTabbableNode:function(Ne){var tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,lt=we.indexOf(Ne);return lt<0?tt?qe.slice(qe.indexOf(Ne)+1).find(function(It){return bg(It)}):qe.slice(0,qe.indexOf(Ne)).reverse().find(function(It){return bg(It)}):we[lt+(tt?1:-1)]}}}),l.tabbableGroups=l.containerGroups.filter(function(Be){return Be.tabbableNodes.length>0}),l.tabbableGroups.length<=0&&!S("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(l.containerGroups.find(function(Be){return Be.posTabIndexesFound})&&l.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},K=function Me(Be){var we=Be.activeElement;if(we)return we.shadowRoot&&we.shadowRoot.activeElement!==null?Me(we.shadowRoot):we},z=function Me(Be){if(Be!==!1&&Be!==K(document)){if(!Be||!Be.focus){Me(O());return}Be.focus({preventScroll:!!a.preventScroll}),l.mostRecentlyFocusedNode=Be,Loe(Be)&&Be.select()}},j=function(Be){var we=S("setReturnFocus",Be);return we||(we===!1?!1:Be)},Q=function(Be){var we=Be.target,qe=Be.event,xe=Be.isBackward,ze=xe===void 0?!1:xe;we=we||ox(qe),U();var ot=null;if(l.tabbableGroups.length>0){var yt=C(we,qe),nt=yt>=0?l.containerGroups[yt]:void 0;if(yt<0)ze?ot=l.tabbableGroups[l.tabbableGroups.length-1].lastTabbableNode:ot=l.tabbableGroups[0].firstTabbableNode;else if(ze){var be=TT(l.tabbableGroups,function(St){var Rt=St.firstTabbableNode;return we===Rt});if(be<0&&(nt.container===we||Bx(we,a.tabbableOptions)&&!bg(we,a.tabbableOptions)&&!nt.nextTabbableNode(we,!1))&&(be=yt),be>=0){var Ne=be===0?l.tabbableGroups.length-1:be-1,tt=l.tabbableGroups[Ne];ot=v1(we)>=0?tt.lastTabbableNode:tt.lastDomTabbableNode}else o_(qe)||(ot=nt.nextTabbableNode(we,!1))}else{var lt=TT(l.tabbableGroups,function(St){var Rt=St.lastTabbableNode;return we===Rt});if(lt<0&&(nt.container===we||Bx(we,a.tabbableOptions)&&!bg(we,a.tabbableOptions)&&!nt.nextTabbableNode(we))&&(lt=yt),lt>=0){var It=lt===l.tabbableGroups.length-1?0:lt+1,pt=l.tabbableGroups[It];ot=v1(we)>=0?pt.firstTabbableNode:pt.firstDomTabbableNode}else o_(qe)||(ot=nt.nextTabbableNode(we))}}else ot=S("fallbackFocus");return ot},ee=function(Be){var we=ox(Be);if(!(C(we,Be)>=0)){if(xC(a.clickOutsideDeactivates,Be)){o.deactivate({returnFocus:a.returnFocusOnDeactivate});return}xC(a.allowOutsideClick,Be)||Be.preventDefault()}},V=function(Be){var we=ox(Be),qe=C(we,Be)>=0;if(qe||we instanceof Document)qe&&(l.mostRecentlyFocusedNode=we);else{Be.stopImmediatePropagation();var xe,ze=!0;if(l.mostRecentlyFocusedNode)if(v1(l.mostRecentlyFocusedNode)>0){var ot=C(l.mostRecentlyFocusedNode),yt=l.containerGroups[ot].tabbableNodes;if(yt.length>0){var nt=yt.findIndex(function(be){return be===l.mostRecentlyFocusedNode});nt>=0&&(a.isKeyForward(l.recentNavEvent)?nt+1<yt.length&&(xe=yt[nt+1],ze=!1):nt-1>=0&&(xe=yt[nt-1],ze=!1))}}else l.containerGroups.some(function(be){return be.tabbableNodes.some(function(Ne){return v1(Ne)>0})})||(ze=!1);else ze=!1;ze&&(xe=Q({target:l.mostRecentlyFocusedNode,isBackward:a.isKeyBackward(l.recentNavEvent)})),z(xe||l.mostRecentlyFocusedNode||O())}l.recentNavEvent=void 0},ae=function(Be){var we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;l.recentNavEvent=Be;var qe=Q({event:Be,isBackward:we});qe&&(o_(Be)&&Be.preventDefault(),z(qe))},ne=function(Be){if(Foe(Be)&&xC(a.escapeDeactivates,Be)!==!1){Be.preventDefault(),o.deactivate();return}(a.isKeyForward(Be)||a.isKeyBackward(Be))&&ae(Be,a.isKeyBackward(Be))},Z=function(Be){var we=ox(Be);C(we,Be)>=0||xC(a.clickOutsideDeactivates,Be)||xC(a.allowOutsideClick,Be)||(Be.preventDefault(),Be.stopImmediatePropagation())},oe=function(){if(l.active)return OT.activateTrap(r,o),l.delayInitialFocusTimer=a.delayInitialFocus?IT(function(){z(O())}):z(O()),i.addEventListener("focusin",V,!0),i.addEventListener("mousedown",ee,{capture:!0,passive:!1}),i.addEventListener("touchstart",ee,{capture:!0,passive:!1}),i.addEventListener("click",Z,{capture:!0,passive:!1}),i.addEventListener("keydown",ne,{capture:!0,passive:!1}),o},W=function(){if(l.active)return i.removeEventListener("focusin",V,!0),i.removeEventListener("mousedown",ee,!0),i.removeEventListener("touchstart",ee,!0),i.removeEventListener("click",Z,!0),i.removeEventListener("keydown",ne,!0),o},ue=function(Be){var we=Be.some(function(qe){var xe=Array.from(qe.removedNodes);return xe.some(function(ze){return ze===l.mostRecentlyFocusedNode})});we&&z(O())},ge=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(ue):void 0,ye=function(){ge&&(ge.disconnect(),l.active&&!l.paused&&l.containers.map(function(Be){ge.observe(Be,{subtree:!0,childList:!0})}))};return o={get active(){return l.active},get paused(){return l.paused},activate:function(Be){if(l.active)return this;var we=m(Be,"onActivate"),qe=m(Be,"onPostActivate"),xe=m(Be,"checkCanFocusTrap");xe||U(),l.active=!0,l.paused=!1,l.nodeFocusedBeforeActivation=i.activeElement,we?.();var ze=function(){xe&&U(),oe(),ye(),qe?.()};return xe?(xe(l.containers.concat()).then(ze,ze),this):(ze(),this)},deactivate:function(Be){if(!l.active)return this;var we=BT({onDeactivate:a.onDeactivate,onPostDeactivate:a.onPostDeactivate,checkCanReturnFocus:a.checkCanReturnFocus},Be);clearTimeout(l.delayInitialFocusTimer),l.delayInitialFocusTimer=void 0,W(),l.active=!1,l.paused=!1,ye(),OT.deactivateTrap(r,o);var qe=m(we,"onDeactivate"),xe=m(we,"onPostDeactivate"),ze=m(we,"checkCanReturnFocus"),ot=m(we,"returnFocus","returnFocusOnDeactivate");qe?.();var yt=function(){IT(function(){ot&&z(j(l.nodeFocusedBeforeActivation)),xe?.()})};return ot&&ze?(ze(j(l.nodeFocusedBeforeActivation)).then(yt,yt),this):(yt(),this)},pause:function(Be){if(l.paused||!l.active)return this;var we=m(Be,"onPause"),qe=m(Be,"onPostPause");return l.paused=!0,we?.(),W(),ye(),qe?.(),this},unpause:function(Be){if(!l.paused||!l.active)return this;var we=m(Be,"onUnpause"),qe=m(Be,"onPostUnpause");return l.paused=!1,we?.(),U(),oe(),ye(),qe?.(),this},updateContainerElements:function(Be){var we=[].concat(Be).filter(Boolean);return l.containers=we.map(function(qe){return typeof qe=="string"?i.querySelector(qe):qe}),l.active&&U(),ye(),this}},o.updateContainerElements(e),o};const Woe=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:joe},Symbol.toStringTag,{value:"Module"})),Qoe=wB(Woe),Yoe=wB(Roe);var wM,kT;function qoe(){if(kT)return wM;kT=1;function n(oe){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},n(oe)}function e(oe,W){if(!(oe instanceof W))throw new TypeError("Cannot call a class as a function")}function t(oe,W){for(var ue=0;ue<W.length;ue++){var ge=W[ue];ge.enumerable=ge.enumerable||!1,ge.configurable=!0,"value"in ge&&(ge.writable=!0),Object.defineProperty(oe,U(ge.key),ge)}}function i(oe,W,ue){return W&&t(oe.prototype,W),Object.defineProperty(oe,"prototype",{writable:!1}),oe}function r(oe,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function");oe.prototype=Object.create(W&&W.prototype,{constructor:{value:oe,writable:!0,configurable:!0}}),Object.defineProperty(oe,"prototype",{writable:!1}),W&&a(oe,W)}function a(oe,W){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ge,ye){return ge.__proto__=ye,ge},a(oe,W)}function l(oe){var W=C();return function(){var ge=S(oe),ye;if(W){var Me=S(this).constructor;ye=Reflect.construct(ge,arguments,Me)}else ye=ge.apply(this,arguments);return o(this,ye)}}function o(oe,W){if(W&&(n(W)==="object"||typeof W=="function"))return W;if(W!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m(oe)}function m(oe){if(oe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe}function C(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function S(oe){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ue){return ue.__proto__||Object.getPrototypeOf(ue)},S(oe)}function O(oe,W,ue){return W=U(W),W in oe?Object.defineProperty(oe,W,{value:ue,enumerable:!0,configurable:!0,writable:!0}):oe[W]=ue,oe}function U(oe){var W=K(oe,"string");return n(W)==="symbol"?W:String(W)}function K(oe,W){if(n(oe)!=="object"||oe===null)return oe;var ue=oe[Symbol.toPrimitive];if(ue!==void 0){var ge=ue.call(oe,W);if(n(ge)!=="object")return ge;throw new TypeError("@@toPrimitive must return a primitive value.")}return(W==="string"?String:Number)(oe)}var z=pl(),j=i0(),Q=Qoe,ee=Q.createFocusTrap,V=Yoe,ae=V.isFocusable,ne=function(oe){r(ue,oe);var W=l(ue);function ue(ge){var ye;e(this,ue),ye=W.call(this,ge),O(m(ye),"getNodeForOption",function(we){var qe,xe=(qe=this.internalOptions[we])!==null&&qe!==void 0?qe:this.originalOptions[we];if(typeof xe=="function"){for(var ze=arguments.length,ot=new Array(ze>1?ze-1:0),yt=1;yt<ze;yt++)ot[yt-1]=arguments[yt];xe=xe.apply(void 0,ot)}if(xe===!0&&(xe=void 0),!xe){if(xe===void 0||xe===!1)return xe;throw new Error("`".concat(we,"` was specified but was not a node, or did not return a node"))}var nt=xe;if(typeof xe=="string"){var be;if(nt=(be=this.getDocument())===null||be===void 0?void 0:be.querySelector(xe),!nt)throw new Error("`".concat(we,"` as selector refers to no known node"))}return nt}),ye.handleDeactivate=ye.handleDeactivate.bind(m(ye)),ye.handlePostDeactivate=ye.handlePostDeactivate.bind(m(ye)),ye.handleClickOutsideDeactivates=ye.handleClickOutsideDeactivates.bind(m(ye)),ye.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:ye.handleDeactivate,onPostDeactivate:ye.handlePostDeactivate,clickOutsideDeactivates:ye.handleClickOutsideDeactivates},ye.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var Me=ge.focusTrapOptions;for(var Be in Me)if(Object.prototype.hasOwnProperty.call(Me,Be)){if(Be==="returnFocusOnDeactivate"||Be==="onDeactivate"||Be==="onPostDeactivate"||Be==="checkCanReturnFocus"||Be==="clickOutsideDeactivates"){ye.originalOptions[Be]=Me[Be];continue}ye.internalOptions[Be]=Me[Be]}return ye.outsideClick=null,ye.focusTrapElements=ge.containerElements||[],ye.updatePreviousElement(),ye}return i(ue,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var ye=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return ye||(ye===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var ye=this.getDocument();ye&&(this.previouslyFocusedElement=ye.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(ye){var Me=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,ye):this.originalOptions.clickOutsideDeactivates;return Me&&(this.outsideClick={target:ye.target,allowDeactivation:Me}),Me}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var ye=this,Me=function(){var we=ye.getReturnFocusNode(),qe=!!(ye.originalOptions.returnFocusOnDeactivate&&we!==null&&we!==void 0&&we.focus&&(!ye.outsideClick||ye.outsideClick.allowDeactivation&&!ae(ye.outsideClick.target,ye.internalOptions.tabbableOptions))),xe=ye.internalOptions.preventScroll,ze=xe===void 0?!1:xe;qe&&we.focus({preventScroll:ze}),ye.originalOptions.onPostDeactivate&&ye.originalOptions.onPostDeactivate.call(null),ye.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(Me,Me):Me()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var ye=this.focusTrapElements.some(Boolean);ye&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(ye){if(this.focusTrap){ye.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var Me=!ye.active&&this.props.active,Be=ye.active&&!this.props.active,we=!ye.paused&&this.props.paused,qe=ye.paused&&!this.props.paused;if(Me&&(this.updatePreviousElement(),this.focusTrap.activate()),Be){this.deactivateTrap();return}we&&this.focusTrap.pause(),qe&&this.focusTrap.unpause()}else ye.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var ye=this,Me=this.props.children?z.Children.only(this.props.children):void 0;if(Me){if(Me.type&&Me.type===z.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var Be=function(xe){var ze=ye.props.containerElements;Me&&(typeof Me.ref=="function"?Me.ref(xe):Me.ref&&(Me.ref.current=xe)),ye.focusTrapElements=ze||[xe]},we=z.cloneElement(Me,{ref:Be});return we}return null}}]),ue}(z.Component),Z=typeof Element>"u"?Function:Element;return ne.propTypes={active:j.bool,paused:j.bool,focusTrapOptions:j.shape({document:j.object,onActivate:j.func,onPostActivate:j.func,checkCanFocusTrap:j.func,onPause:j.func,onPostPause:j.func,onUnpause:j.func,onPostUnpause:j.func,onDeactivate:j.func,onPostDeactivate:j.func,checkCanReturnFocus:j.func,initialFocus:j.oneOfType([j.instanceOf(Z),j.string,j.bool,j.func]),fallbackFocus:j.oneOfType([j.instanceOf(Z),j.string,j.func]),escapeDeactivates:j.oneOfType([j.bool,j.func]),clickOutsideDeactivates:j.oneOfType([j.bool,j.func]),returnFocusOnDeactivate:j.bool,setReturnFocus:j.oneOfType([j.instanceOf(Z),j.string,j.bool,j.func]),allowOutsideClick:j.oneOfType([j.bool,j.func]),preventScroll:j.bool,tabbableOptions:j.shape({displayCheck:j.oneOf(["full","legacy-full","non-zero-area","none"]),getShadowRoot:j.oneOfType([j.bool,j.func])}),trapStack:j.array,isKeyForward:j.func,isKeyBackward:j.func}),containerElements:j.arrayOf(j.instanceOf(Z)),children:j.oneOfType([j.element,j.instanceOf(Z)])},ne.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:ee},wM=ne,wM}var EM={exports:{}},DT;function Hoe(){return DT||(DT=1,function(n){(function(e){var t=!1,i,r;function a(){if(typeof i<"u")return i;var O=document.documentElement,U=document.createElement("div");return U.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),O.appendChild(U),i=U.offsetWidth-U.clientWidth,O.removeChild(U),i}function l(){return document.documentElement.scrollHeight>window.innerHeight}function o(O){if(!(typeof document>"u"||t)){var U=document.documentElement;r=window.pageYOffset,l()?U.style.width="calc(100% - "+a()+"px)":U.style.width="100%",U.style.position="fixed",U.style.top=-r+"px",U.style.overflow="hidden",t=!0}}function m(){if(!(typeof document>"u"||!t)){var O=document.documentElement;O.style.width="",O.style.position="",O.style.top="",O.style.overflow="",window.scroll(0,r),t=!1}}function C(){if(t){m();return}o()}var S={on:o,off:m,toggle:C};n.exports=S})()}(EM)),EM.exports}var BM,RT;function Voe(){if(RT)return BM;RT=1;function n(ae){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ne){return typeof ne}:function(ne){return ne&&typeof Symbol=="function"&&ne.constructor===Symbol&&ne!==Symbol.prototype?"symbol":typeof ne},n(ae)}function e(ae,ne){if(!(ae instanceof ne))throw new TypeError("Cannot call a class as a function")}function t(ae,ne){for(var Z=0;Z<ne.length;Z++){var oe=ne[Z];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(ae,oe.key,oe)}}function i(ae,ne,Z){return ne&&t(ae.prototype,ne),Object.defineProperty(ae,"prototype",{writable:!1}),ae}function r(ae,ne){if(typeof ne!="function"&&ne!==null)throw new TypeError("Super expression must either be null or a function");ae.prototype=Object.create(ne&&ne.prototype,{constructor:{value:ae,writable:!0,configurable:!0}}),Object.defineProperty(ae,"prototype",{writable:!1}),ne&&a(ae,ne)}function a(ae,ne){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(oe,W){return oe.__proto__=W,oe},a(ae,ne)}function l(ae){var ne=C();return function(){var oe=S(ae),W;if(ne){var ue=S(this).constructor;W=Reflect.construct(oe,arguments,ue)}else W=oe.apply(this,arguments);return o(this,W)}}function o(ae,ne){if(ne&&(n(ne)==="object"||typeof ne=="function"))return ne;if(ne!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m(ae)}function m(ae){if(ae===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ae}function C(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function S(ae){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Z){return Z.__proto__||Object.getPrototypeOf(Z)},S(ae)}function O(ae,ne,Z){return ne in ae?Object.defineProperty(ae,ne,{value:Z,enumerable:!0,configurable:!0,writable:!0}):ae[ne]=Z,ae}var U=pl(),K=O3(),z=qoe(),j=Hoe(),Q=function(ae){r(Z,ae);var ne=l(Z);function Z(oe){var W;if(e(this,Z),W=ne.call(this,oe),O(m(W),"getApplicationNode",function(){return W.props.getApplicationNode?W.props.getApplicationNode():W.props.applicationNode}),O(m(W),"checkUnderlayClick",function(ue){W.dialogNode&&W.dialogNode.contains(ue.target)||ue.pageX>ue.target.ownerDocument.documentElement.offsetWidth||ue.pageY>ue.target.ownerDocument.documentElement.offsetHeight||W.exit(ue)}),O(m(W),"checkDocumentKeyDown",function(ue){W.props.escapeExits&&(ue.key==="Escape"||ue.key==="Esc"||ue.keyCode===27)&&W.exit(ue)}),O(m(W),"exit",function(ue){W.props.onExit&&W.props.onExit(ue)}),!oe.titleText&&!oe.titleId)throw new Error("react-aria-modal instances should have a `titleText` or `titleId`");return W}return i(Z,[{key:"componentDidMount",value:function(){this.props.onEnter&&this.props.onEnter();var W=this.getApplicationNode();setTimeout(function(){W&&W.setAttribute("aria-hidden","true")},0),this.props.escapeExits&&this.addKeyDownListener(),this.props.scrollDisabled&&j.on()}},{key:"componentDidUpdate",value:function(W){W.scrollDisabled&&!this.props.scrollDisabled?j.off():!W.scrollDisabled&&this.props.scrollDisabled&&j.on(),this.props.escapeExits&&!W.escapeExits?this.addKeyDownListener():!this.props.escapeExits&&W.escapeExits&&this.removeKeyDownListener()}},{key:"componentWillUnmount",value:function(){this.props.scrollDisabled&&j.off();var W=this.getApplicationNode();W&&W.setAttribute("aria-hidden","false"),this.removeKeyDownListener()}},{key:"addKeyDownListener",value:function(){var W=this;setTimeout(function(){document.addEventListener("keydown",W.checkDocumentKeyDown)})}},{key:"removeKeyDownListener",value:function(){var W=this;setTimeout(function(){document.removeEventListener("keydown",W.checkDocumentKeyDown)})}},{key:"render",value:function(){var W=this.props,ue={};if(W.includeDefaultStyles&&(ue={position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1050,overflowX:"hidden",overflowY:"auto",WebkitOverflowScrolling:"touch",textAlign:"center"},W.underlayColor&&(ue.background=W.underlayColor),W.underlayClickExits&&(ue.cursor="pointer")),W.underlayStyle)for(var ge in W.underlayStyle)W.underlayStyle.hasOwnProperty(ge)&&(ue[ge]=W.underlayStyle[ge]);var ye={className:W.underlayClass,style:ue};W.underlayClickExits&&(ye.onMouseDown=this.checkUnderlayClick);for(var Me in this.props.underlayProps)ye[Me]=this.props.underlayProps[Me];var Be={};W.includeDefaultStyles&&(Be={display:"inline-block",height:"100%",verticalAlign:"middle"});var we={key:"a",style:Be},qe={};if(W.includeDefaultStyles&&(qe={display:"inline-block",textAlign:"left",top:0,maxWidth:"100%",cursor:"auto",outline:W.focusDialog?0:null},W.verticallyCenter&&(qe.verticalAlign="middle",qe.top=0)),W.dialogStyle)for(var xe in W.dialogStyle)W.dialogStyle.hasOwnProperty(xe)&&(qe[xe]=W.dialogStyle[xe]);var ze={key:"b",ref:(function(be){this.dialogNode=be}).bind(this),role:W.alert?"alertdialog":"dialog",id:W.dialogId,className:W.dialogClass,style:qe};W.titleId?ze["aria-labelledby"]=W.titleId:W.titleText&&(ze["aria-label"]=W.titleText),W.focusDialog&&(ze.tabIndex="-1");for(var ot in W)/^(data-|aria-)/.test(ot)&&(ze[ot]=W[ot]);var yt=[U.createElement("div",ze,W.children)];W.verticallyCenter&&yt.unshift(U.createElement("div",we));var nt=W.focusTrapOptions||{};return(W.focusDialog||W.initialFocus)&&(nt.initialFocus=W.focusDialog?"#".concat(this.props.dialogId):W.initialFocus),nt.escapeDeactivates=W.escapeExits,U.createElement(z,{focusTrapOptions:nt,paused:W.focusTrapPaused},U.createElement("div",ye,yt))}}]),Z}(U.Component);O(Q,"defaultProps",{underlayProps:{},dialogId:"react-aria-modal-dialog",underlayClickExits:!0,escapeExits:!0,underlayColor:"rgba(0,0,0,0.5)",includeDefaultStyles:!0,focusTrapPaused:!1,scrollDisabled:!0});function ee(ae,ne){if(!window.document)return function(){return null};ne=ne||{};var Z=function(oe){r(ue,oe);var W=l(ue);function ue(){var ge;e(this,ue);for(var ye=arguments.length,Me=new Array(ye),Be=0;Be<ye;Be++)Me[Be]=arguments[Be];return ge=W.call.apply(W,[this].concat(Me)),O(m(ge),"container",null),ge}return i(ue,[{key:"componentDidMount",value:function(){ne.renderTo?this.container=typeof ne.renderTo=="string"?document.querySelector(ne.renderTo):ne.renderTo:(this.container=document.createElement("div"),document.body.appendChild(this.container)),this.forceUpdate()}},{key:"componentWillUnmount",value:function(){ne.renderTo||this.container.parentNode.removeChild(this.container)}},{key:"render",value:function(){return this.container===null||!this.props.mounted?null:K.createPortal(U.createElement(ae,this.props,this.props.children),this.container)}}]),ue}(U.Component);return O(Z,"defaultProps",{mounted:!0}),Z}var V=ee(Q);return V.renderTo=function(ae){return ee(Q,{renderTo:ae})},BM=V,BM}var $oe=Voe();const Zoe=WA($oe);function Xu(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx",e="9fae4604e2bf6b41282a05f3078ddc2669d7e49f",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:10,column:3}},1:{start:{line:12,column:12},end:{line:19,column:3}},2:{start:{line:13,column:4},end:{line:15,column:5}},3:{start:{line:14,column:6},end:{line:14,column:36}},4:{start:{line:16,column:4},end:{line:18,column:10}},5:{start:{line:17,column:6},end:{line:17,column:37}},6:{start:{line:21,column:14},end:{line:21,column:26}},7:{start:{line:22,column:4},end:{line:60,column:5}},8:{start:{line:23,column:6},end:{line:57,column:8}},9:{start:{line:59,column:6},end:{line:59,column:19}},10:{start:{line:63,column:14},end:{line:63,column:46}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:12},end:{line:12,column:13}},loc:{start:{line:12,column:18},end:{line:19,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:16,column:15},end:{line:16,column:16}},loc:{start:{line:16,column:21},end:{line:18,column:5}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:61,column:3}},line:20}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:15,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:15,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:60,column:5}},{start:{line:58,column:11},end:{line:60,column:5}}],line:22}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx"],names:[],mappings:"AA8CU,SACE,KADF;AA9CV,OAAO,WAAkC;AACzC,SAAQ,eAAc;AACtB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,SAA0B,uBAAuB;AAYjD,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,OAAO,eAAe;AAAA,IACpB,oBAAoB;AAAA,EACtB;AAAA;AAAA,EAGA,UAAU,MAAM;AACd,QAAI,SAAS,eAAe;AAC1B,MAAC,SAAS,cAA8B,KAAK;AAAA,IAC/C;AAEA,eAAW,MAAM;AACf,WAAK,MAAM,aAAa,KAAK;AAAA,IAC/B,GAAG,CAAC;AAAA,EACN;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAG,KAAK,MAAM,QAAQ;AACpB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,WAAW,KAAK,MAAM;AAAA,UACtB,oBAAoB,KAAK,MAAM;AAAA,UAC/B,eAAa,KAAK,MAAM,aAAa;AAAA,UACrC,kBAAkB;AAAA,UAClB,QAAQ,KAAK;AAAA,UACb,aAAY;AAAA,UAEZ;AAAA,YAAC;AAAA;AAAA,cAAI,WAAW,WAAW,kBAAkB,KAAK,MAAM,SAAS;AAAA,cAC/D,eAAa,KAAK,MAAM,aAAa;AAAA,cAErC;AAAA,qCAAC,YAAO,WAAU,yBAChB;AAAA,sCAAC,QAAG,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,kBAC9D,oBAAC,UAAK,WAAU,kBAAiB;AAAA,kBACjC;AAAA,oBAAC;AAAA;AAAA,sBAAO,WAAU;AAAA,sBAChB,OAAO,EAAE,aAAa;AAAA,sBACtB,SAAS,KAAK;AAAA,sBACd,eAAa,KAAK,MAAM,aAAa,IAAE;AAAA,sBAEvC,8BAAC,WAAQ;AAAA;AAAA,kBACX;AAAA,mBACF;AAAA,gBACA,oBAAC,SAAI,WAAU,2BACb,8BAAC,SAAI,WAAU,0BAA0B,eAAK,MAAM,UAAS,GAC/D;AAAA;AAAA;AAAA,UACF;AAAA;AAAA,MACF;AAAA,IACF,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACF;AAEA,MAAM,QAAQ,gBAAgB,EAAE,aAAa;AAC7C,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9fae4604e2bf6b41282a05f3078ddc2669d7e49f"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Xu=function(){return l},l}Xu();class Xoe extends ni.Component{static defaultProps=(Xu().s[0]++,{underlayClickExits:!0});onClose=(Xu().s[1]++,()=>{Xu().f[0]++,Xu().s[2]++,document.activeElement?(Xu().b[0][0]++,Xu().s[3]++,document.activeElement.blur()):Xu().b[0][1]++,Xu().s[4]++,setTimeout(()=>{Xu().f[1]++,Xu().s[5]++,this.props.onOpenToggle(!1)},0)});render(){Xu().f[2]++;const e=(Xu().s[6]++,this.props.t);return Xu().s[7]++,this.props.isOpen?(Xu().b[1][0]++,Xu().s[8]++,ce.jsx(Zoe,{titleText:this.props.title,underlayClickExits:this.props.underlayClickExits,"data-wd-key":this.props["data-wd-key"],verticallyCenter:!0,onExit:this.onClose,dialogClass:"maputnik-modal-container",children:ce.jsxs("div",{className:e0("maputnik-modal",this.props.className),"data-wd-key":this.props["data-wd-key"],children:[ce.jsxs("header",{className:"maputnik-modal-header",children:[ce.jsx("h1",{className:"maputnik-modal-header-title",children:this.props.title}),ce.jsx("span",{className:"maputnik-space"}),ce.jsx("button",{className:"maputnik-modal-header-toggle",title:e("Close modal"),onClick:this.onClose,"data-wd-key":this.props["data-wd-key"]+".close-modal",children:ce.jsx(A$,{})})]}),ce.jsx("div",{className:"maputnik-modal-scroller",children:ce.jsx("div",{className:"maputnik-modal-content",children:this.props.children})})]})})):(Xu().b[1][1]++,Xu().s[9]++,!1)}}const z1=(Xu().s[10]++,ss()(Xoe));function ds(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",e="1e9d54950349a7eeb6477c034456895161f0f1e8",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",statementMap:{0:{start:{line:4,column:22},end:{line:33,column:1}},1:{start:{line:5,column:26},end:{line:5,column:47}},2:{start:{line:6,column:22},end:{line:11,column:3}},3:{start:{line:7,column:4},end:{line:7,column:19}},4:{start:{line:8,column:4},end:{line:10,column:5}},5:{start:{line:9,column:6},end:{line:9,column:31}},6:{start:{line:12,column:31},end:{line:12,column:36}},7:{start:{line:13,column:18},end:{line:13,column:33}},8:{start:{line:14,column:2},end:{line:31,column:3}},9:{start:{line:15,column:4},end:{line:28,column:12}},10:{start:{line:23,column:25},end:{line:23,column:43}},11:{start:{line:29,column:9},end:{line:31,column:3}},12:{start:{line:30,column:4},end:{line:30,column:172}},13:{start:{line:32,column:2},end:{line:32,column:40}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:22},end:{line:4,column:23}},loc:{start:{line:4,column:33},end:{line:33,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:6,column:22},end:{line:6,column:23}},loc:{start:{line:6,column:33},end:{line:11,column:3}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:23,column:43}},line:23}},branchMap:{0:{loc:{start:{line:8,column:4},end:{line:10,column:5}},type:"if",locations:[{start:{line:8,column:4},end:{line:10,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:13,column:18},end:{line:13,column:33}},type:"binary-expr",locations:[{start:{line:13,column:18},end:{line:13,column:27}},{start:{line:13,column:31},end:{line:13,column:33}}],line:13},2:{loc:{start:{line:14,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:31,column:3}},{start:{line:29,column:9},end:{line:31,column:3}}],line:14},3:{loc:{start:{line:21,column:24},end:{line:21,column:93}},type:"cond-expr",locations:[{start:{line:21,column:31},end:{line:21,column:61}},{start:{line:21,column:64},end:{line:21,column:93}}],line:21},4:{loc:{start:{line:22,column:65},end:{line:22,column:89}},type:"cond-expr",locations:[{start:{line:22,column:72},end:{line:22,column:78}},{start:{line:22,column:81},end:{line:22,column:89}}],line:22},5:{loc:{start:{line:25,column:20},end:{line:25,column:107}},type:"cond-expr",locations:[{start:{line:25,column:43},end:{line:25,column:66}},{start:{line:25,column:85},end:{line:25,column:107}}],line:25},6:{loc:{start:{line:29,column:9},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:9},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx"],names:[],mappings:"AA4BQ,SASY,KATZ;AA5BR,OAAO,WAAoB;AAC3B,SAAQ,eAAe,sBAAqB;AAW5C,MAAM,gBAA8C,CAAC,UAAU;AAC7D,QAAM,CAAC,MAAM,OAAO,IAAI,MAAM,SAAS,KAAK;AAE5C,QAAM,cAAc,CAAC,UAAmB;AACtC,YAAQ,KAAK;AACb,QAAI,MAAM,aAAa;AACrB,YAAM,YAAY,KAAK;AAAA,IACzB;AAAA,EACF;AAEA,QAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,QAAM,EAAE,IAAI,IAAI,aAAa,CAAC;AAE9B,MAAI,KAAK;AACP,WACE,oBAAC,WAAM,WAAU,wBACf,+BAAC,SAAI,WAAU,uBACZ;AAAA;AAAA,MACA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,OAAO,iCAAiC;AAAA,UACpD,WAAW,4CAA4C,OAAO,SAAS,QAAQ;AAAA,UAC/E,SAAS,MAAM,YAAY,CAAC,IAAI;AAAA,UAChC,eAAa,sBAAsB;AAAA,UAElC,iBAAO,oBAAC,kBAAe,IAAK,oBAAC,iBAAc;AAAA;AAAA,MAC9C;AAAA,OACF,GACF;AAAA,EAEJ,WAAW,OAAO;AAChB,WACE,oBAAC,WAAM,WAAU,wBACf,8BAAC,SAAI,WAAU,uBAAuB,iBAAM,GAC9C;AAAA,EAEJ;AACA,SAAO,oBAAC,SAAI;AACd;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1e9d54950349a7eeb6477c034456895161f0f1e8"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return ds=function(){return l},l}ds();ds().s[0]++;const c8=n=>{ds().f[0]++;const[e,t]=(ds().s[1]++,ni.useState(!1));ds().s[2]++;const i=o=>{ds().f[1]++,ds().s[3]++,t(o),ds().s[4]++,n.onToggleDoc?(ds().b[0][0]++,ds().s[5]++,n.onToggleDoc(o)):ds().b[0][1]++},{label:r,fieldSpec:a}=(ds().s[6]++,n),{doc:l}=(ds().s[7]++,ds().b[1][0]++,a||(ds().b[1][1]++,{}));return ds().s[8]++,l?(ds().b[2][0]++,ds().s[9]++,ce.jsx("label",{className:"maputnik-doc-wrapper",children:ce.jsxs("div",{className:"maputnik-doc-target",children:[r," ",ce.jsx("button",{"aria-label":e?(ds().b[3][0]++,"close property documentation"):(ds().b[3][1]++,"open property documentation"),className:`maputnik-doc-button maputnik-doc-button--${e?(ds().b[4][0]++,"open"):(ds().b[4][1]++,"closed")}`,onClick:()=>(ds().f[2]++,ds().s[10]++,i(!e)),"data-wd-key":"field-doc-button-"+r,children:e?(ds().b[5][0]++,ce.jsx(HV,{})):(ds().b[5][1]++,ce.jsx(VV,{}))})]})})):(ds().b[2][1]++,ds().s[11]++,r?(ds().b[6][0]++,ds().s[12]++,ce.jsx("label",{className:"maputnik-doc-wrapper",children:ce.jsx("div",{className:"maputnik-doc-target",children:r})})):(ds().b[6][1]++,ds().s[13]++,ce.jsx("div",{})))};function xs(){var n="/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",e="52a1547e724051448ae0a009c4c7c40d9bb9067f",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",statementMap:{0:{start:{line:3,column:16},end:{line:8,column:1}},1:{start:{line:11,column:26},end:{line:11,column:36}},2:{start:{line:12,column:52},end:{line:12,column:61}},3:{start:{line:13,column:23},end:{line:13,column:47}},4:{start:{line:14,column:25},end:{line:16,column:26}},5:{start:{line:17,column:4},end:{line:48,column:9}},6:{start:{line:21,column:10},end:{line:24,column:20}},7:{start:{line:31,column:12},end:{line:31,column:75}},8:{start:{line:35,column:10},end:{line:44,column:20}},9:{start:{line:38,column:14},end:{line:42,column:15}},10:{start:{line:39,column:16},end:{line:39,column:81}},11:{start:{line:41,column:16},end:{line:41,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:49,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:20,column:119},end:{line:20,column:120}},loc:{start:{line:20,column:137},end:{line:25,column:9}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:30,column:37},end:{line:30,column:38}},loc:{start:{line:30,column:49},end:{line:32,column:11}},line:30},3:{name:"(anonymous_3)",decl:{start:{line:34,column:80},end:{line:34,column:81}},loc:{start:{line:34,column:103},end:{line:45,column:9}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:37,column:37},end:{line:37,column:38}},loc:{start:{line:37,column:44},end:{line:43,column:13}},line:37}},branchMap:{0:{loc:{start:{line:14,column:25},end:{line:16,column:26}},type:"binary-expr",locations:[{start:{line:14,column:25},end:{line:14,column:33}},{start:{line:16,column:4},end:{line:16,column:26}}],line:14},1:{loc:{start:{line:18,column:6},end:{line:26,column:10}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:9}},{start:{line:18,column:29},end:{line:26,column:10}}],line:18},2:{loc:{start:{line:20,column:8},end:{line:25,column:13}},type:"binary-expr",locations:[{start:{line:20,column:8},end:{line:20,column:20}},{start:{line:20,column:40},end:{line:25,column:13}}],line:20},3:{loc:{start:{line:27,column:6},end:{line:46,column:13}},type:"binary-expr",locations:[{start:{line:27,column:6},end:{line:27,column:16}},{start:{line:27,column:36},end:{line:46,column:13}}],line:27},4:{loc:{start:{line:38,column:14},end:{line:42,column:15}},type:"if",locations:[{start:{line:38,column:14},end:{line:42,column:15}},{start:{line:40,column:21},end:{line:42,column:15}}],line:38},5:{loc:{start:{line:47,column:6},end:{line:47,column:215}},type:"binary-expr",locations:[{start:{line:47,column:6},end:{line:47,column:12}},{start:{line:47,column:16},end:{line:47,column:30}},{start:{line:47,column:50},end:{line:47,column:215}}],line:47}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Doc.tsx"],names:[],mappings:"AAwCM,mBAGM,KAKQ,YARd;AAxCN,OAAO,WAAW;AAElB,MAAM,UAAU;AAAA,EACd,IAAI;AAAA,EACJ,SAAS;AAAA,EACT,KAAK;AAAA,EACL,OAAO;AACT;AAkBA,qBAAqB,YAAY,MAAM,UAAoB;AAAA,EACzD,SAAU;AACR,UAAM,EAAC,UAAS,IAAI,KAAK;AAEzB,UAAM,EAAC,KAAK,QAAQ,QAAQ,eAAc,IAAI;AAC9C,UAAM,aAAa,UAAU,aAAa;AAE1C,UAAM,eACJ,CAAC,CAAC;AAAA;AAAA,IAGF,CAAC,MAAM,QAAQ,MAAM;AAGvB,WACE,iCACG;AAAA,aACC,qBAAC,SAAI,WAAU,WACb;AAAA,4BAAC,SAAI,WAAU,gBAAe,eAAY,kBAAkB,eAAI;AAAA,QAC/D,gBACC,oBAAC,QAAG,WAAU,mBACX,iBAAO,QAAQ,MAAM,EAAE,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM;AAC5C,iBACE,qBAAC,QACC;AAAA,gCAAC,UAAM,eAAK,UAAU,GAAG,GAAE;AAAA,YAC3B,oBAAC,SAAK,gBAAM,KAAI;AAAA,eAFT,GAGT;AAAA,QAEJ,CAAC,GACH;AAAA,SAEJ;AAAA,MAED,cACC,oBAAC,SAAI,WAAU,wBACb,+BAAC,WAAM,WAAU,+BACf;AAAA,4BAAC,WACC,+BAAC,QACC;AAAA,8BAAC,QAAG;AAAA,UACH,OAAO,OAAO,OAAO,EAAE,IAAI,YAAU;AACpC,mBAAO,oBAAC,QAAiB,oBAAT,MAAgB;AAAA,UAClC,CAAC;AAAA,WACH,GACF;AAAA,QACA,oBAAC,WACE,iBAAO,QAAQ,UAAU,EAAE,IAAI,CAAC,CAAC,KAAK,UAAU,MAAM;AACrD,iBACE,qBAAC,QACC;AAAA,gCAAC,QAAI,eAAI;AAAA,YACR,OAAO,KAAK,OAAO,EAAE,IAAI,CAAC,MAAM;AAC/B,kBAAI,OAAO,UAAU,eAAe,KAAK,YAAY,CAAC,GAAG;AACvD,uBAAO,oBAAC,QAAY,qBAAW,CAAyB,KAAxC,CAA0C;AAAA,cAC5D,OACK;AACH,uBAAO,oBAAC,QAAW,kBAAH,CAAK;AAAA,cACvB;AAAA,YACF,CAAC;AAAA,eATM,GAUT;AAAA,QAEJ,CAAC,GACH;AAAA,SACF,GACF;AAAA,MAED,UAAU,kBACT,oBAAC,SAAI,WAAU,uBACb,8BAAC,OAAE,MAAM,QAAS,QAAO,UAAS,KAAI,cAAc,0BAAe,GACrE;AAAA,OAEJ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"52a1547e724051448ae0a009c4c7c40d9bb9067f"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return xs=function(){return l},l}xs();const PT=(xs().s[0]++,{js:"JS",android:"Android",ios:"iOS",macos:"macOS"});class h8 extends ni.Component{render(){xs().f[0]++;const{fieldSpec:e}=(xs().s[1]++,this.props),{doc:t,values:i,docUrl:r,docUrlLinkText:a}=(xs().s[2]++,e),l=(xs().s[3]++,e["sdk-support"]),o=(xs().s[4]++,xs().b[0][0]++,!!i&&(xs().b[0][1]++,!Array.isArray(i)));return xs().s[5]++,ce.jsxs(ce.Fragment,{children:[(xs().b[1][0]++,t&&(xs().b[1][1]++,ce.jsxs("div",{className:"SpecDoc",children:[ce.jsx("div",{className:"SpecDoc__doc","data-wd-key":"spec-field-doc",children:t}),(xs().b[2][0]++,o&&(xs().b[2][1]++,ce.jsx("ul",{className:"SpecDoc__values",children:Object.entries(i).map(([m,C])=>(xs().f[1]++,xs().s[6]++,ce.jsxs("li",{children:[ce.jsx("code",{children:JSON.stringify(m)}),ce.jsx("div",{children:C.doc})]},m)))})))]}))),(xs().b[3][0]++,l&&(xs().b[3][1]++,ce.jsx("div",{className:"SpecDoc__sdk-support",children:ce.jsxs("table",{className:"SpecDoc__sdk-support__table",children:[ce.jsx("thead",{children:ce.jsxs("tr",{children:[ce.jsx("th",{}),Object.values(PT).map(m=>(xs().f[2]++,xs().s[7]++,ce.jsx("th",{children:m},m)))]})}),ce.jsx("tbody",{children:Object.entries(l).map(([m,C])=>(xs().f[3]++,xs().s[8]++,ce.jsxs("tr",{children:[ce.jsx("td",{children:m}),Object.keys(PT).map(S=>(xs().f[4]++,xs().s[9]++,Object.prototype.hasOwnProperty.call(C,S)?(xs().b[4][0]++,xs().s[10]++,ce.jsx("td",{children:C[S]},S)):(xs().b[4][1]++,xs().s[11]++,ce.jsx("td",{children:"no"},S))))]},m)))})]})}))),(xs().b[5][0]++,r&&(xs().b[5][1]++,a)&&(xs().b[5][2]++,ce.jsx("div",{className:"SpecDoc__learn-more",children:ce.jsx("a",{href:r,target:"_blank",rel:"noreferrer",children:a})})))]})}}function Fo(){var n="/home/runner/work/maputnik/maputnik/src/components/Block.tsx",e="bfc97d8e583c296276ca646347d899bc2e4e504c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Block.tsx",statementMap:{0:{start:{line:7,column:13},end:{line:7,column:17}},1:{start:{line:9,column:4},end:{line:9,column:17}},2:{start:{line:10,column:4},end:{line:12,column:6}},3:{start:{line:15,column:18},end:{line:15,column:32}},4:{start:{line:16,column:4},end:{line:18,column:5}},5:{start:{line:17,column:6},end:{line:17,column:64}},6:{start:{line:20,column:16},end:{line:24,column:3}},7:{start:{line:21,column:4},end:{line:23,column:7}},8:{start:{line:31,column:17},end:{line:40,column:3}},9:{start:{line:32,column:15},end:{line:32,column:39}},10:{start:{line:33,column:21},end:{line:33,column:48}},11:{start:{line:34,column:4},end:{line:36,column:5}},12:{start:{line:35,column:6},end:{line:35,column:30}},13:{start:{line:37,column:4},end:{line:39,column:5}},14:{start:{line:38,column:6},end:{line:38,column:29}},15:{start:{line:42,column:4},end:{line:77,column:6}},16:{start:{line:65,column:12},end:{line:65,column:31}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:21},end:{line:13,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:14},end:{line:19,column:3}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:20,column:16},end:{line:20,column:17}},loc:{start:{line:20,column:25},end:{line:24,column:3}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:31,column:17},end:{line:31,column:18}},loc:{start:{line:31,column:28},end:{line:40,column:3}},line:31},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:78,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:64,column:87},end:{line:64,column:88}},loc:{start:{line:64,column:95},end:{line:66,column:11}},line:64}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:17,column:33},end:{line:17,column:62}},type:"cond-expr",locations:[{start:{line:17,column:48},end:{line:17,column:54}},{start:{line:17,column:57},end:{line:17,column:62}}],line:17},2:{loc:{start:{line:34,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:34,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},3:{loc:{start:{line:34,column:8},end:{line:34,column:66}},type:"binary-expr",locations:[{start:{line:34,column:8},end:{line:34,column:53}},{start:{line:34,column:57},end:{line:34,column:66}}],line:34},4:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:54,column:10},end:{line:61,column:14}},type:"binary-expr",locations:[{start:{line:54,column:10},end:{line:54,column:30}},{start:{line:54,column:50},end:{line:61,column:14}}],line:54},6:{loc:{start:{line:62,column:10},end:{line:62,column:134}},type:"binary-expr",locations:[{start:{line:62,column:10},end:{line:62,column:31}},{start:{line:62,column:51},end:{line:62,column:134}}],line:62},7:{loc:{start:{line:67,column:10},end:{line:74,column:11}},type:"binary-expr",locations:[{start:{line:67,column:10},end:{line:67,column:30}},{start:{line:67,column:50},end:{line:74,column:11}}],line:67},8:{loc:{start:{line:71,column:32},end:{line:71,column:64}},type:"cond-expr",locations:[{start:{line:71,column:53},end:{line:71,column:55}},{start:{line:71,column:58},end:{line:71,column:64}}],line:71}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Block.tsx"],names:[],mappings:"AAgEW,SAWD,KAXC;AAhEX,OAAO,WAAgD;AACvD,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAmBhB,qBAAqB,cAAc,MAAM,UAAkC;AAAA,EACzE,WAAkC;AAAA,EAElC,YAAa,OAAmB;AAC9B,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS,GAAwE;AAC/E,UAAM,QAAQ,EAAE,OAAO;AACvB,QAAI,KAAK,MAAM,UAAU;AACvB,aAAO,KAAK,MAAM,SAAS,UAAU,KAAK,SAAY,KAAK;AAAA,IAC7D;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,eAAe,CAAC,UAAoC;AAClD,UAAM,KAAK,MAAM,YAAY;AAC7B,UAAM,WAAW,KAAK,UAAU,SAAS,EAAE;AAE3C,QAAI,MAAM,YAAY,OAAO,aAAa,WAAW,CAAC,UAAU;AAC9D,YAAM,gBAAgB;AAAA,IACxB;AACA,QAAI,MAAM,YAAY,OAAO,aAAa,KAAK;AAC7C,YAAM,eAAe;AAAA,IACvB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,KAAK,MAAM;AAAA,QAC9B,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,WAAW,WAAW;AAAA,UACpB,wBAAwB;AAAA,UACxB,8BAA8B,KAAK,MAAM;AAAA,UACzC,yBAAyB,KAAK,MAAM;AAAA,QACtC,CAAC;AAAA,QACD,SAAS,KAAK;AAAA,QAEb;AAAA,eAAK,MAAM,aACV,oBAAC,SAAI,WAAU,8BACb;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,aAAa,KAAK;AAAA,cAClB,WAAW,KAAK,MAAM;AAAA;AAAA,UACxB,GACF;AAAA,UAED,CAAC,KAAK,MAAM,aACX,oBAAC,SAAI,WAAU,8BACZ,eAAK,MAAM,OACd;AAAA,UAEF,oBAAC,SAAI,WAAU,+BACZ,eAAK,MAAM,QACd;AAAA,UACA,oBAAC,SAAI,WAAU,gCAA+B,KAAK,QAAM;AAAC,iBAAK,WAAW;AAAA,UAAE,GACzE,eAAK,MAAM,UACd;AAAA,UACC,KAAK,MAAM,aACV;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,cAEjD,8BAAC,OAAI,WAAW,KAAK,MAAM,WAAW;AAAA;AAAA,UACxC;AAAA;AAAA;AAAA,IAEJ;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bfc97d8e583c296276ca646347d899bc2e4e504c"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Fo=function(){return l},l}Fo();class Ks extends ni.Component{_blockEl=(Fo().s[0]++,null);constructor(e){Fo().f[0]++,Fo().s[1]++,super(e),Fo().s[2]++,this.state={showDoc:!1}}onChange(e){Fo().f[1]++;const t=(Fo().s[3]++,e.target.value);if(Fo().s[4]++,this.props.onChange)return Fo().b[0][0]++,Fo().s[5]++,this.props.onChange(t===""?(Fo().b[1][0]++,void 0):(Fo().b[1][1]++,t));Fo().b[0][1]++}onToggleDoc=(Fo().s[6]++,e=>{Fo().f[2]++,Fo().s[7]++,this.setState({showDoc:e})});onLabelClick=(Fo().s[8]++,e=>{Fo().f[3]++;const t=(Fo().s[9]++,e.nativeEvent.target),i=(Fo().s[10]++,this._blockEl?.contains(t));Fo().s[11]++,Fo().b[3][0]++,e.nativeEvent.target.nodeName!=="INPUT"&&(Fo().b[3][1]++,!i)?(Fo().b[2][0]++,Fo().s[12]++,e.stopPropagation()):Fo().b[2][1]++,Fo().s[13]++,e.nativeEvent.target.nodeName!=="A"?(Fo().b[4][0]++,Fo().s[14]++,e.preventDefault()):Fo().b[4][1]++});render(){return Fo().f[4]++,Fo().s[15]++,ce.jsxs("label",{style:this.props.style,"data-wd-key":this.props["data-wd-key"],className:e0({"maputnik-input-block":!0,"maputnik-input-block--wide":this.props.wideMode,"maputnik-action-block":this.props.action}),onClick:this.onLabelClick,children:[(Fo().b[5][0]++,this.props.fieldSpec&&(Fo().b[5][1]++,ce.jsx("div",{className:"maputnik-input-block-label",children:ce.jsx(c8,{label:this.props.label,onToggleDoc:this.onToggleDoc,fieldSpec:this.props.fieldSpec})}))),(Fo().b[6][0]++,!this.props.fieldSpec&&(Fo().b[6][1]++,ce.jsx("div",{className:"maputnik-input-block-label",children:this.props.label}))),ce.jsx("div",{className:"maputnik-input-block-action",children:this.props.action}),ce.jsx("div",{className:"maputnik-input-block-content",ref:e=>{Fo().f[5]++,Fo().s[16]++,this._blockEl=e},children:this.props.children}),(Fo().b[7][0]++,this.props.fieldSpec&&(Fo().b[7][1]++,ce.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(Fo().b[8][0]++,""):(Fo().b[8][1]++,"none")},children:ce.jsx(h8,{fieldSpec:this.props.fieldSpec})})))]})}}function hh(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",e="1b99a181d4a9dd7b629113889cbb71c3a4bb4d42",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:36}},1:{start:{line:6,column:4},end:{line:8,column:5}},2:{start:{line:7,column:6},end:{line:7,column:43}},3:{start:{line:7,column:35},end:{line:7,column:41}},4:{start:{line:9,column:4},end:{line:21,column:6}},5:{start:{line:17,column:25},end:{line:17,column:60}},6:{start:{line:19,column:64},end:{line:19,column:115}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:22,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:28},end:{line:7,column:29}},loc:{start:{line:7,column:35},end:{line:7,column:41}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:17,column:18},end:{line:17,column:19}},loc:{start:{line:17,column:25},end:{line:17,column:60}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:64},end:{line:19,column:115}},line:19}},branchMap:{0:{loc:{start:{line:6,column:4},end:{line:8,column:5}},type:"if",locations:[{start:{line:6,column:4},end:{line:8,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},1:{loc:{start:{line:6,column:8},end:{line:6,column:56}},type:"binary-expr",locations:[{start:{line:6,column:8},end:{line:6,column:26}},{start:{line:6,column:30},end:{line:6,column:56}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx"],names:[],mappings:"AA4BsC;AA5BtC,OAAO,WAAW;AAYlB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA,IACrC;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,UAAU,OAAK,KAAK,MAAM,SAAS,EAAE,OAAO,KAAK;AAAA,QACjD,cAAY,KAAK,MAAM,YAAY;AAAA,QAEjC,kBAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM,oBAAC,YAAiB,OAAO,KAAM,mBAAlB,GAAwB,CAAS;AAAA;AAAA,IAChF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1b99a181d4a9dd7b629113889cbb71c3a4bb4d42"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return hh=function(){return l},l}hh();class ey extends ni.Component{render(){hh().f[0]++;let e=(hh().s[0]++,this.props.options);return hh().s[1]++,hh().b[1][0]++,e.length>0&&(hh().b[1][1]++,!Array.isArray(e[0]))?(hh().b[0][0]++,hh().s[2]++,e=e.map(t=>(hh().f[1]++,hh().s[3]++,[t,t]))):hh().b[0][1]++,hh().s[4]++,ce.jsx("select",{className:"maputnik-select","data-wd-key":this.props["data-wd-key"],style:this.props.style,title:this.props.title,value:this.props.value,onChange:t=>(hh().f[2]++,hh().s[5]++,this.props.onChange(t.target.value)),"aria-label":this.props["aria-label"],children:e.map(([t,i])=>(hh().f[3]++,hh().s[6]++,ce.jsx("option",{value:t,children:i},t)))})}}function Ur(){var n="/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",e="ffe977722e3215b5f6718c464b93680839810a41",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",statementMap:{0:{start:{line:3,column:24},end:{line:6,column:3}},1:{start:{line:8,column:4},end:{line:8,column:17}},2:{start:{line:9,column:4},end:{line:12,column:6}},3:{start:{line:15,column:4},end:{line:19,column:5}},4:{start:{line:16,column:6},end:{line:18,column:8}},5:{start:{line:20,column:4},end:{line:20,column:14}},6:{start:{line:25,column:4},end:{line:36,column:5}},7:{start:{line:26,column:6},end:{line:26,column:23}},8:{start:{line:27,column:6},end:{line:30,column:8}},9:{start:{line:32,column:6},end:{line:32,column:20}},10:{start:{line:33,column:6},end:{line:35,column:8}},11:{start:{line:37,column:4},end:{line:39,column:5}},12:{start:{line:38,column:6},end:{line:38,column:48}},13:{start:{line:40,column:4},end:{line:70,column:7}},14:{start:{line:51,column:8},end:{line:56,column:11}},15:{start:{line:55,column:10},end:{line:55,column:71}},16:{start:{line:55,column:34},end:{line:55,column:71}},17:{start:{line:59,column:8},end:{line:62,column:9}},18:{start:{line:60,column:10},end:{line:60,column:44}},19:{start:{line:61,column:10},end:{line:61,column:73}},20:{start:{line:61,column:35},end:{line:61,column:73}},21:{start:{line:65,column:8},end:{line:67,column:9}},22:{start:{line:66,column:10},end:{line:66,column:48}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:13},end:{line:4,column:14}},loc:{start:{line:4,column:19},end:{line:5,column:5}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:13,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:48},end:{line:21,column:3}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:71,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:50,column:16},end:{line:50,column:17}},loc:{start:{line:50,column:23},end:{line:57,column:7}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:54,column:11},end:{line:54,column:12}},loc:{start:{line:54,column:17},end:{line:56,column:9}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:58,column:14},end:{line:58,column:15}},loc:{start:{line:58,column:20},end:{line:63,column:7}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:64,column:17},end:{line:64,column:18}},loc:{start:{line:64,column:24},end:{line:68,column:7}},line:64}},branchMap:{0:{loc:{start:{line:11,column:13},end:{line:11,column:30}},type:"binary-expr",locations:[{start:{line:11,column:13},end:{line:11,column:24}},{start:{line:11,column:28},end:{line:11,column:30}}],line:11},1:{loc:{start:{line:15,column:4},end:{line:19,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:19,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:25,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:36,column:5}},{start:{line:31,column:11},end:{line:36,column:5}}],line:25},3:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},4:{loc:{start:{line:43,column:18},end:{line:43,column:125}},type:"cond-expr",locations:[{start:{line:43,column:83},end:{line:43,column:104}},{start:{line:43,column:107},end:{line:43,column:125}}],line:43},5:{loc:{start:{line:47,column:13},end:{line:47,column:64}},type:"cond-expr",locations:[{start:{line:47,column:43},end:{line:47,column:45}},{start:{line:47,column:48},end:{line:47,column:64}}],line:47},6:{loc:{start:{line:55,column:10},end:{line:55,column:71}},type:"if",locations:[{start:{line:55,column:10},end:{line:55,column:71}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},7:{loc:{start:{line:59,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:59,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59},8:{loc:{start:{line:61,column:10},end:{line:61,column:73}},type:"if",locations:[{start:{line:61,column:10},end:{line:61,column:73}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},9:{loc:{start:{line:65,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:65,column:8},end:{line:67,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},10:{loc:{start:{line:65,column:12},end:{line:65,column:51}},type:"binary-expr",locations:[{start:{line:65,column:12},end:{line:65,column:28}},{start:{line:65,column:32},end:{line:65,column:51}}],line:65}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputString.tsx"],names:[],mappings:"AAAA,OAAO,WAAW;AAsBlB,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,OAAO,MAAM,SAAS;AAAA,IACxB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,SAAS;AAClB,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,MACf;AAAA,IACF;AACA,WAAO,CAAC;AAAA,EACV;AAAA,EAEA,SAAS;AACP,QAAI;AACJ,QAAI;AAEJ,QAAG,KAAK,MAAM,OAAO;AACnB,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,QACA;AAAA,MACF;AAAA,IACF,OACK;AACH,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAEA,QAAG,KAAK,MAAM,UAAU;AACtB,cAAQ,KAAK,2BAA2B;AAAA,IAC1C;AAEA,WAAO,MAAM,cAAc,KAAK;AAAA,MAC9B,cAAc,KAAK,MAAM,YAAY;AAAA,MACrC,eAAe,KAAK,MAAM,aAAa;AAAA,MACvC,YAAY,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,YAAY,IAAI,KAAK,MAAM,aAAa,EAAE,QAAQ;AAAA,MAC/G,UAAU,KAAK,MAAM;AAAA,MACrB,WAAW,QAAQ,KAAK,GAAG;AAAA,MAC3B,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM,UAAU,SAAY,KAAK,KAAK,MAAM;AAAA,MACxD,aAAa,KAAK,MAAM;AAAA,MACxB,OAAO,KAAK,MAAM;AAAA,MAClB,UAAU,CAAC,MAA2E;AACpF,aAAK,SAAS;AAAA,UACZ,SAAS;AAAA,UACT,OAAO,EAAE,OAAO;AAAA,QAClB,GAAG,MAAM;AACP,cAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,KAAK,MAAM,KAAK;AAAA,QAC7D,CAAC;AAAA,MACH;AAAA,MACA,QAAQ,MAAM;AACZ,YAAG,KAAK,MAAM,UAAQ,KAAK,MAAM,OAAO;AACtC,eAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,cAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QAC/D;AAAA,MACF;AAAA,MACA,WAAW,CAAC,MAAM;AAChB,YAAI,EAAE,YAAY,MAAM,KAAK,MAAM,UAAU;AAC3C,eAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QACtC;AAAA,MACF;AAAA,MACA,UAAU,KAAK,MAAM;AAAA,IACvB,CAAC;AAAA,EACH;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ffe977722e3215b5f6718c464b93680839810a41"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Ur=function(){return l},l}Ur();class ap extends ni.Component{static defaultProps=(Ur().s[0]++,{onInput:()=>{Ur().f[0]++}});constructor(e){Ur().f[1]++,Ur().s[1]++,super(e),Ur().s[2]++,this.state={editing:!1,value:(Ur().b[0][0]++,e.value||(Ur().b[0][1]++,""))}}static getDerivedStateFromProps(e,t){if(Ur().f[2]++,Ur().s[3]++,t.editing)Ur().b[1][1]++;else return Ur().b[1][0]++,Ur().s[4]++,{value:e.value};return Ur().s[5]++,{}}render(){Ur().f[3]++;let e,t;return Ur().s[6]++,this.props.multi?(Ur().b[2][0]++,Ur().s[7]++,e="textarea",Ur().s[8]++,t=["maputnik-string","maputnik-string--multi"]):(Ur().b[2][1]++,Ur().s[9]++,e="input",Ur().s[10]++,t=["maputnik-string"]),Ur().s[11]++,this.props.disabled?(Ur().b[3][0]++,Ur().s[12]++,t.push("maputnik-string--disabled")):Ur().b[3][1]++,Ur().s[13]++,ni.createElement(e,{"aria-label":this.props["aria-label"],"data-wd-key":this.props["data-wd-key"],spellCheck:Object.prototype.hasOwnProperty.call(this.props,"spellCheck")?(Ur().b[4][0]++,this.props.spellCheck):(Ur().b[4][1]++,e!=="input"),disabled:this.props.disabled,className:t.join(" "),style:this.props.style,value:this.state.value===void 0?(Ur().b[5][0]++,""):(Ur().b[5][1]++,this.state.value),placeholder:this.props.default,title:this.props.title,onChange:i=>{Ur().f[4]++,Ur().s[14]++,this.setState({editing:!0,value:i.target.value},()=>{Ur().f[5]++,Ur().s[15]++,this.props.onInput?(Ur().b[6][0]++,Ur().s[16]++,this.props.onInput(this.state.value)):Ur().b[6][1]++})},onBlur:()=>{Ur().f[6]++,Ur().s[17]++,this.state.value!==this.props.value?(Ur().b[7][0]++,Ur().s[18]++,this.setState({editing:!1}),Ur().s[19]++,this.props.onChange?(Ur().b[8][0]++,Ur().s[20]++,this.props.onChange(this.state.value)):Ur().b[8][1]++):Ur().b[7][1]++},onKeyDown:i=>{Ur().f[7]++,Ur().s[21]++,Ur().b[10][0]++,i.keyCode===13&&(Ur().b[10][1]++,this.props.onChange)?(Ur().b[9][0]++,Ur().s[22]++,this.props.onChange(this.state.value)):Ur().b[9][1]++},required:this.props.required})}}function Lh(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",e="219843c61e18178f85fa2a15ff8a5d376d473684",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",statementMap:{0:{start:{line:8,column:26},end:{line:38,column:1}},1:{start:{line:16,column:22},end:{line:16,column:110}},2:{start:{line:16,column:73},end:{line:16,column:109}},3:{start:{line:17,column:2},end:{line:37,column:4}},4:{start:{line:39,column:18},end:{line:39,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:26},end:{line:8,column:27}},loc:{start:{line:15,column:6},end:{line:38,column:1}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:16,column:66},end:{line:16,column:67}},loc:{start:{line:16,column:73},end:{line:16,column:109}},line:16}},branchMap:{0:{loc:{start:{line:14,column:2},end:{line:14,column:18}},type:"default-arg",locations:[{start:{line:14,column:13},end:{line:14,column:18}}],line:14},1:{loc:{start:{line:16,column:34},end:{line:16,column:60}},type:"binary-expr",locations:[{start:{line:16,column:34},end:{line:16,column:54}},{start:{line:16,column:58},end:{line:16,column:60}}],line:16},2:{loc:{start:{line:25,column:8},end:{line:25,column:79}},type:"binary-expr",locations:[{start:{line:25,column:8},end:{line:25,column:16}},{start:{line:25,column:36},end:{line:25,column:79}}],line:25},3:{loc:{start:{line:26,column:8},end:{line:34,column:9}},type:"binary-expr",locations:[{start:{line:26,column:8},end:{line:26,column:17}},{start:{line:26,column:37},end:{line:34,column:9}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx"],names:[],mappings:"AA0BI,SAKI,KALJ;AAzBJ,SAAQ,UAAS;AACjB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AACjD,SAAS,iBAAiB;AAU1B,MAAM,oBAAsD,CAAC;AAAA,EAC3D;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,WAAW;AACb,MAAM;AACJ,QAAM,cAAkC,OAAO,KAAK,GAAG,MAAM,KAAK,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,UAAU,EAAE,QAAQ,MAAM,GAAG,CAAC,CAAC,CAAC;AAC7H,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,MAAM;AAAA,MAAG,WAAW,GAAG,MAAM;AAAA,MAC3C,eAAa;AAAA,MACb;AAAA,MAEC;AAAA,oBACC,oBAAC,eAAY,OAAc,UAAU,MAAM;AAAA,QAE5C,CAAC,YACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS;AAAA,YACT;AAAA,YACA;AAAA,YACA,eAAa,QAAQ;AAAA;AAAA,QACvB;AAAA;AAAA;AAAA,EAEJ;AAEJ;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"219843c61e18178f85fa2a15ff8a5d376d473684"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Lh=function(){return l},l}Lh();Lh().s[0]++;const Joe=({t:n,value:e,wdKey:t,onChange:i,error:r,disabled:a=(Lh().b[0][0]++,!1)})=>{Lh().f[0]++;const l=(Lh().s[1]++,Object.keys((Lh().b[1][0]++,xf.layer.type.values||(Lh().b[1][1]++,{}))).map(o=>(Lh().f[1]++,Lh().s[2]++,[o,J_.startCase(o.replace(/-/g," "))])));return Lh().s[3]++,ce.jsxs(Ks,{label:n("Type"),fieldSpec:xf.layer.type,"data-wd-key":t,error:r,children:[(Lh().b[2][0]++,a&&(Lh().b[2][1]++,ce.jsx(ap,{value:e,disabled:!0}))),(Lh().b[3][0]++,!a&&(Lh().b[3][1]++,ce.jsx(ey,{options:l,onChange:i,value:e,"data-wd-key":t+".select"})))]})},PN=(Lh().s[4]++,ss()(Joe)),eae={name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90° orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50,"sdk-support":{"0-60 degrees":{js:"0.8.0",android:"1.0.0",ios:"1.0.0"},"0-85 degrees":{js:"2.0.0",android:"https://github.com/maplibre/maplibre-native/issues/1909",ios:"https://github.com/maplibre/maplibre-native/issues/1909"},"0-180 degrees":{js:"5.0.0",android:"https://github.com/maplibre/maplibre-native/issues/1909",ios:"https://github.com/maplibre/maplibre-native/issues/1909"}}},sprite:{type:"sprite",doc:"An array of `{id: 'my-sprite', url: 'https://example.com/sprite'}` objects. Each object should represent a unique URL to load a sprite from and and a unique ID to use as a prefix when referencing images from that sprite (i.e. 'my-sprite:image'). All the URLs are internally extended to load both .json and .png files. If the `id` field is equal to 'default', the prefix is omitted (just 'image' instead of 'default:image'). All the IDs and URLs must be unique. For backwards compatibility, instead of an array, one can also provide a single string that represent a URL to load the sprite from. The images in this case won't be prefixed.",example:"https://demotiles.maplibre.org/styles/osm-bright-gl-style/sprite"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format.\n\nIf this property is set, any text in the `text-field` layout property is displayed in the font stack named by the `text-font` layout property based on glyphs located at the URL specified by this property. Otherwise, font faces will be determined by the `text-font` property based on the local environment.\n\nThe URL must include:\n\n - `{fontstack}` - When requesting glyphs, this token is replaced with a comma separated list of fonts from a font stack specified in the `text-font` property of a symbol layer. \n\n - `{range}` - When requesting glyphs, this token is replaced with a range of 256 Unicode code points. For example, to load glyphs for the Unicode Basic Latin and Basic Latin-1 Supplement blocks, the range would be 0-255. The actual ranges that are loaded are determined at runtime based on what text needs to be displayed.\n\nThe URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf","sdk-support":{"basic functionality":{js:"0.0.16",android:"0.1.1",ios:"0.1.0"},"omit to use local fonts":{js:"https://github.com/maplibre/maplibre-gl-js/issues/3302",android:"https://github.com/maplibre/maplibre-native/issues/165",ios:"https://github.com/maplibre/maplibre-native/issues/165"}}}},tae={type:{doc:"The type of the source."}},nae={id:{type:"string",doc:"Unique layer name.",required:!0},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."}},iae={values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key] ≠ value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key] ≥ value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key] ≤ value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key] ∈ {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key] ∉ {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0 ∧ ... ∧ fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0 ∨ ... ∨ fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `¬f0 ∧ ... ∧ ¬fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'}}},rae={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0° (0° when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0° when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0°, directly above, to 180°, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}}},oae={source:{type:"string",doc:"The source for the terrain data.",required:!0,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}},exaggeration:{type:"number",minimum:0,doc:"The exaggeration of the terrain - how high it will look.",default:1,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}}},aae={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},da={$root:eae,source_vector:tae,layer:nae,filter_operator:iae,function:{base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."}},light:rae,terrain:oae,transition:aae};function L_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",e="faa51332e301a2db02ecf3d9679788ae744c6d26",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",statementMap:{0:{start:{line:5,column:16},end:{line:23,column:1}},1:{start:{line:6,column:2},end:{line:22,column:4}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:16},end:{line:5,column:17}},loc:{start:{line:5,column:27},end:{line:23,column:1}},line:5}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx"],names:[],mappings:"AAkBM;AAjBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AASxB,MAAM,UAAkC,CAAC,UAAU;AACjD,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAM;AAAA,MAAK,WAAW,OAAO,MAAM;AAAA,MACxC,eAAa,MAAM;AAAA,MACnB,OAAO,MAAM;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,MAAM;AAAA,UACb,SAAS,MAAM;AAAA,UACf,eAAa,MAAM,QAAQ;AAAA;AAAA,MAC7B;AAAA;AAAA,EACF;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"faa51332e301a2db02ecf3d9679788ae744c6d26"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return L_=function(){return l},l}L_();L_().s[0]++;const KN=n=>(L_().f[0]++,L_().s[1]++,ce.jsx(Ks,{label:"ID",fieldSpec:da.layer.id,"data-wd-key":n.wdKey,error:n.error,children:ce.jsx(ap,{value:n.value,onInput:n.onChange,"data-wd-key":n.wdKey+".input"})}));function ax(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function zA(){return zA=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},zA.apply(null,arguments)}var sae=i0();const Hr=WA(sae);var OM={exports:{}},js={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KT;function lae(){if(KT)return js;KT=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),o=Symbol.for("react.server_context"),m=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),z;z=Symbol.for("react.module.reference");function j(Q){if(typeof Q=="object"&&Q!==null){var ee=Q.$$typeof;switch(ee){case n:switch(Q=Q.type,Q){case t:case r:case i:case C:case S:return Q;default:switch(Q=Q&&Q.$$typeof,Q){case o:case l:case m:case U:case O:case a:return Q;default:return ee}}case e:return ee}}}return js.ContextConsumer=l,js.ContextProvider=a,js.Element=n,js.ForwardRef=m,js.Fragment=t,js.Lazy=U,js.Memo=O,js.Portal=e,js.Profiler=r,js.StrictMode=i,js.Suspense=C,js.SuspenseList=S,js.isAsyncMode=function(){return!1},js.isConcurrentMode=function(){return!1},js.isContextConsumer=function(Q){return j(Q)===l},js.isContextProvider=function(Q){return j(Q)===a},js.isElement=function(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===n},js.isForwardRef=function(Q){return j(Q)===m},js.isFragment=function(Q){return j(Q)===t},js.isLazy=function(Q){return j(Q)===U},js.isMemo=function(Q){return j(Q)===O},js.isPortal=function(Q){return j(Q)===e},js.isProfiler=function(Q){return j(Q)===r},js.isStrictMode=function(Q){return j(Q)===i},js.isSuspense=function(Q){return j(Q)===C},js.isSuspenseList=function(Q){return j(Q)===S},js.isValidElementType=function(Q){return typeof Q=="string"||typeof Q=="function"||Q===t||Q===r||Q===i||Q===C||Q===S||Q===K||typeof Q=="object"&&Q!==null&&(Q.$$typeof===U||Q.$$typeof===O||Q.$$typeof===a||Q.$$typeof===l||Q.$$typeof===m||Q.$$typeof===z||Q.getModuleId!==void 0)},js.typeOf=j,js}var UT;function Aae(){return UT||(UT=1,OM.exports=lae()),OM.exports}Aae();const LT=n=>typeof n=="object"&&n!=null&&n.nodeType===1,FT=(n,e)=>(!e||n!=="hidden")&&n!=="visible"&&n!=="clip",sx=(n,e)=>{if(n.clientHeight<n.scrollHeight||n.clientWidth<n.scrollWidth){const t=getComputedStyle(n,null);return FT(t.overflowY,e)||FT(t.overflowX,e)||(i=>{const r=(a=>{if(!a.ownerDocument||!a.ownerDocument.defaultView)return null;try{return a.ownerDocument.defaultView.frameElement}catch{return null}})(i);return!!r&&(r.clientHeight<i.scrollHeight||r.clientWidth<i.scrollWidth)})(n)}return!1},lx=(n,e,t,i,r,a,l,o)=>a<n&&l>e||a>n&&l<e?0:a<=n&&o<=t||l>=e&&o>=t?a-n-i:l>e&&o<t||a<n&&o>t?l-e+r:0,uae=n=>{const e=n.parentElement;return e??(n.getRootNode().host||null)},cae=(n,e)=>{var t,i,r,a;if(typeof document>"u")return[];const{inline:l,boundary:o,skipOverflowHiddenElements:m}=e,C=typeof o=="function"?o:we=>we!==o;if(!LT(n))throw new TypeError("Invalid target");const S=document.scrollingElement||document.documentElement,O=[];let U=n;for(;LT(U)&&C(U);){if(U=uae(U),U===S){O.push(U);break}U!=null&&U===document.body&&sx(U)&&!sx(document.documentElement)||U!=null&&sx(U,m)&&O.push(U)}const K=(i=(t=window.visualViewport)==null?void 0:t.width)!=null?i:innerWidth,z=(a=(r=window.visualViewport)==null?void 0:r.height)!=null?a:innerHeight,{scrollX:j,scrollY:Q}=window,{height:ee,width:V,top:ae,right:ne,bottom:Z,left:oe}=n.getBoundingClientRect(),{top:W,right:ue,left:ge}=(we=>{const qe=window.getComputedStyle(we);return{top:parseFloat(qe.scrollMarginTop)||0,right:parseFloat(qe.scrollMarginRight)||0,bottom:parseFloat(qe.scrollMarginBottom)||0,left:parseFloat(qe.scrollMarginLeft)||0}})(n);let ye=ae-W,Me=l==="center"?oe+V/2-ge+ue:l==="end"?ne+ue:oe-ge;const Be=[];for(let we=0;we<O.length;we++){const qe=O[we],{height:xe,width:ze,top:ot,right:yt,bottom:nt,left:be}=qe.getBoundingClientRect();if(ae>=0&&oe>=0&&Z<=z&&ne<=K&&(qe===S&&!sx(qe)||ae>=ot&&Z<=nt&&oe>=be&&ne<=yt))return Be;const Ne=getComputedStyle(qe),tt=parseInt(Ne.borderLeftWidth,10),lt=parseInt(Ne.borderTopWidth,10),It=parseInt(Ne.borderRightWidth,10),pt=parseInt(Ne.borderBottomWidth,10);let St=0,Rt=0;const Le="offsetWidth"in qe?qe.offsetWidth-qe.clientWidth-tt-It:0,Pe="offsetHeight"in qe?qe.offsetHeight-qe.clientHeight-lt-pt:0,Re="offsetWidth"in qe?qe.offsetWidth===0?0:ze/qe.offsetWidth:0,He="offsetHeight"in qe?qe.offsetHeight===0?0:xe/qe.offsetHeight:0;if(S===qe)St=lx(Q,Q+z,z,lt,pt,Q+ye,Q+ye+ee,ee),Rt=l==="start"?Me:l==="center"?Me-K/2:l==="end"?Me-K:lx(j,j+K,K,tt,It,j+Me,j+Me+V,V),St=Math.max(0,St+Q),Rt=Math.max(0,Rt+j);else{St=lx(ot,nt,xe,lt,pt+Pe,ye,ye+ee,ee),Rt=l==="start"?Me-be-tt:l==="center"?Me-(be+ze/2)+Le/2:l==="end"?Me-yt+It+Le:lx(be,yt,ze,tt,It+Le,Me,Me+V,V);const{scrollLeft:bt,scrollTop:vt}=qe;St=He===0?0:Math.max(0,Math.min(vt+St/He,qe.scrollHeight-xe/He+Pe)),Rt=Re===0?0:Math.max(0,Math.min(bt+Rt/Re,qe.scrollWidth-ze/Re+Le)),ye+=vt-St,Me+=bt-Rt}Be.push({el:qe,top:St,left:Rt})}return Be};var Uv=function(){return Uv=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Uv.apply(this,arguments)};var hae=0;function UN(){}function dae(n,e){if(n){var t=cae(n,{boundary:e});t.forEach(function(i){var r=i.el,a=i.top,l=i.left;r.scrollTop=a,r.scrollLeft=l})}}function zT(n,e,t){var i=n===e||e instanceof t.Node&&n.contains&&n.contains(e);return i}function LN(n,e){var t;function i(){t&&clearTimeout(t)}function r(){for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];i(),t=setTimeout(function(){t=null,n.apply(void 0,l)},e)}return r.cancel=i,r}function E0(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){for(var r=arguments.length,a=new Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];return e.some(function(o){return o&&o.apply(void 0,[i].concat(a)),i.preventDownshiftDefault||i.hasOwnProperty("nativeEvent")&&i.nativeEvent.preventDownshiftDefault})}}function Ax(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){e.forEach(function(r){typeof r=="function"?r(i):r&&(r.current=i)})}}function fae(){return String(hae++)}function pB(n,e){return!n||!e?n:Object.keys(n).reduce(function(t,i){return t[i]=FN(e,i)?e[i]:n[i],t},{})}function FN(n,e){return n[e]!==void 0}function mae(n){var e=n.key,t=n.keyCode;return t>=37&&t<=40&&e.indexOf("Arrow")!==0?"Arrow"+e:e}function ux(n,e,t,i,r){var a=t.length;if(a===0)return-1;var l=a-1;(typeof n!="number"||n<0||n>l)&&(n=e>0?-1:l+1);var o=n+e;o<0?o=l:o>l&&(o=0);var m=M3(o,e<0,t,i,r);return m===-1?n>=a?-1:n:m}function M3(n,e,t,i,r){r===void 0&&(r=!1);var a=t.length;if(e){for(var l=n;l>=0;l--)if(!i(t[l],l))return l}else for(var o=n;o<a;o++)if(!i(t[o],o))return o;return r?M3(e?a-1:0,e,t,i):-1}function NT(n,e,t,i){return i===void 0&&(i=!0),t&&e.some(function(r){return r&&(zT(r,n,t)||i&&zT(r,t.document.activeElement,t))})}var pae=LN(function(n){zN(n).textContent=""},500);function zN(n){var e=n.getElementById("a11y-status-message");return e||(e=n.createElement("div"),e.setAttribute("id","a11y-status-message"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-relevant","additions text"),Object.assign(e.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),n.body.appendChild(e),e)}function gae(n,e){if(!(!n||!e)){var t=zN(e);t.textContent=n,pae(e)}}function yae(n){var e=n?.getElementById("a11y-status-message");e&&e.remove()}var NN={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function vae(n,e,t){var i=n.props,r=n.type,a={};Object.keys(e).forEach(function(l){Cae(l,n,e,t),t[l]!==e[l]&&(a[l]=t[l])}),i.onStateChange&&Object.keys(a).length&&i.onStateChange(zA({type:r},a))}function Cae(n,e,t,i){var r=e.props,a=e.type,l="on"+d8(n)+"Change";r[l]&&i[n]!==void 0&&i[n]!==t[n]&&r[l](zA({type:a},i))}function _ae(n,e){return e.changes}var GT=LN(function(n,e){gae(n,e)},200),bae=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Gt.useLayoutEffect:Gt.useEffect,xae="useId"in ni?function(e){var t=e.id,i=e.labelId,r=e.menuId,a=e.getItemId,l=e.toggleButtonId,o=e.inputId,m="downshift-"+ni.useId();t||(t=m);var C=Gt.useRef({labelId:i||t+"-label",menuId:r||t+"-menu",getItemId:a||function(S){return t+"-item-"+S},toggleButtonId:l||t+"-toggle-button",inputId:o||t+"-input"});return C.current}:function(e){var t=e.id,i=t===void 0?"downshift-"+fae():t,r=e.labelId,a=e.menuId,l=e.getItemId,o=e.toggleButtonId,m=e.inputId,C=Gt.useRef({labelId:r||i+"-label",menuId:a||i+"-menu",getItemId:l||function(S){return i+"-item-"+S},toggleButtonId:o||i+"-toggle-button",inputId:m||i+"-input"});return C.current};function Mae(n,e,t,i){var r,a;if(n===void 0){if(e===void 0)throw new Error(i);r=t[e],a=e}else a=e===void 0?t.indexOf(n):e,r=n;return[r,a]}function d8(n){return""+n.slice(0,1).toUpperCase()+n.slice(1)}function GN(n){var e=Gt.useRef(n);return e.current=n,e}function Sae(n,e,t,i){var r=Gt.useRef(),a=Gt.useRef(),l=Gt.useCallback(function(K,z){a.current=z,K=pB(K,z.props);var j=n(K,z),Q=z.props.stateReducer(K,zA({},z,{changes:j}));return Q},[n]),o=Gt.useReducer(l,e,t),m=o[0],C=o[1],S=GN(e),O=Gt.useCallback(function(K){return C(zA({props:S.current},K))},[S]),U=a.current;return Gt.useEffect(function(){var K=pB(r.current,U?.props),z=U&&r.current&&!i(K,m);z&&vae(U,K,m),r.current=m},[m,U,i]),[m,O]}var a_={itemToString:function(e){return e?String(e):""},itemToKey:function(e){return e},stateReducer:_ae,scrollIntoView:dae,environment:typeof window>"u"?void 0:window};function K1(n,e,t){t===void 0&&(t=NN);var i=n["default"+d8(e)];return i!==void 0?i:t[e]}function s_(n,e,t){t===void 0&&(t=NN);var i=n[e];if(i!==void 0)return i;var r=n["initial"+d8(e)];return r!==void 0?r:K1(n,e,t)}function wae(n){var e=s_(n,"selectedItem"),t=s_(n,"isOpen"),i=kae(n),r=s_(n,"inputValue");return{highlightedIndex:i<0&&e&&t?n.items.findIndex(function(a){return n.itemToKey(a)===n.itemToKey(e)}):i,isOpen:t,selectedItem:e,inputValue:r}}function l_(n,e,t){var i=n.items,r=n.initialHighlightedIndex,a=n.defaultHighlightedIndex,l=n.isItemDisabled,o=n.itemToKey,m=e.selectedItem,C=e.highlightedIndex;return i.length===0?-1:r!==void 0&&C===r&&!l(i[r],r)?r:a!==void 0&&!l(i[a],a)?a:m?i.findIndex(function(S){return o(m)===o(S)}):t<0&&!l(i[i.length-1],i.length-1)?i.length-1:t>0&&!l(i[0],0)?0:-1}function Eae(n,e,t){var i=Gt.useRef({isMouseDown:!1,isTouchMove:!1,isTouchEnd:!1});return Gt.useEffect(function(){if(!n)return UN;var r=t.map(function(S){return S.current});function a(){i.current.isTouchEnd=!1,i.current.isMouseDown=!0}function l(S){i.current.isMouseDown=!1,NT(S.target,r,n)||e()}function o(){i.current.isTouchEnd=!1,i.current.isTouchMove=!1}function m(){i.current.isTouchMove=!0}function C(S){i.current.isTouchEnd=!0,!i.current.isTouchMove&&!NT(S.target,r,n,!1)&&e()}return n.addEventListener("mousedown",a),n.addEventListener("mouseup",l),n.addEventListener("touchstart",o),n.addEventListener("touchmove",m),n.addEventListener("touchend",C),function(){n.removeEventListener("mousedown",a),n.removeEventListener("mouseup",l),n.removeEventListener("touchstart",o),n.removeEventListener("touchmove",m),n.removeEventListener("touchend",C)}},[t,n,e]),i.current}var Bae=function(){return UN};function Oae(n,e,t,i){i===void 0&&(i={});var r=i.document,a=f8();Gt.useEffect(function(){if(!(!n||a||!r)){var l=n(e);GT(l,r)}},t),Gt.useEffect(function(){return function(){GT.cancel(),yae(r)}},[r])}function Iae(n){var e=n.highlightedIndex,t=n.isOpen,i=n.itemRefs,r=n.getItemNodeFromIndex,a=n.menuElement,l=n.scrollIntoView,o=Gt.useRef(!0);return bae(function(){e<0||!t||!Object.keys(i.current).length||(o.current===!1?o.current=!0:l(r(e),a))},[e]),o}function jT(n,e,t){var i;t===void 0&&(t=!0);var r=((i=n.items)==null?void 0:i.length)&&e>=0;return zA({isOpen:!1,highlightedIndex:-1},r&&zA({selectedItem:n.items[e],isOpen:K1(n,"isOpen"),highlightedIndex:K1(n,"highlightedIndex")},t&&{inputValue:n.itemToString(n.items[e])}))}function Tae(n,e){return n.isOpen===e.isOpen&&n.inputValue===e.inputValue&&n.highlightedIndex===e.highlightedIndex&&n.selectedItem===e.selectedItem}function f8(){var n=ni.useRef(!0);return ni.useEffect(function(){return n.current=!1,function(){n.current=!0}},[]),n.current}function gB(n){var e=K1(n,"highlightedIndex");return e>-1&&n.isItemDisabled(n.items[e],e)?-1:e}function kae(n){var e=s_(n,"highlightedIndex");return e>-1&&n.isItemDisabled(n.items[e],e)?-1:e}var Ox={environment:Hr.shape({addEventListener:Hr.func.isRequired,removeEventListener:Hr.func.isRequired,document:Hr.shape({createElement:Hr.func.isRequired,getElementById:Hr.func.isRequired,activeElement:Hr.any.isRequired,body:Hr.any.isRequired}).isRequired,Node:Hr.func.isRequired}),itemToString:Hr.func,itemToKey:Hr.func,stateReducer:Hr.func},jN=zA({},Ox,{getA11yStatusMessage:Hr.func,highlightedIndex:Hr.number,defaultHighlightedIndex:Hr.number,initialHighlightedIndex:Hr.number,isOpen:Hr.bool,defaultIsOpen:Hr.bool,initialIsOpen:Hr.bool,selectedItem:Hr.any,initialSelectedItem:Hr.any,defaultSelectedItem:Hr.any,id:Hr.string,labelId:Hr.string,menuId:Hr.string,getItemId:Hr.func,toggleButtonId:Hr.string,onSelectedItemChange:Hr.func,onHighlightedIndexChange:Hr.func,onStateChange:Hr.func,onIsOpenChange:Hr.func,scrollIntoView:Hr.func});function Dae(n,e,t){var i=e.type,r=e.props,a;switch(i){case t.ItemMouseMove:a={highlightedIndex:e.disabled?-1:e.index};break;case t.MenuMouseLeave:a={highlightedIndex:-1};break;case t.ToggleButtonClick:case t.FunctionToggleMenu:a={isOpen:!n.isOpen,highlightedIndex:n.isOpen?-1:l_(r,n,0)};break;case t.FunctionOpenMenu:a={isOpen:!0,highlightedIndex:l_(r,n,0)};break;case t.FunctionCloseMenu:a={isOpen:!1};break;case t.FunctionSetHighlightedIndex:a={highlightedIndex:r.isItemDisabled(r.items[e.highlightedIndex],e.highlightedIndex)?-1:e.highlightedIndex};break;case t.FunctionSetInputValue:a={inputValue:e.inputValue};break;case t.FunctionReset:a={highlightedIndex:gB(r),isOpen:K1(r,"isOpen"),selectedItem:K1(r,"selectedItem"),inputValue:K1(r,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return zA({},n,a)}Uv(Uv({},jN),{items:Hr.array.isRequired,isItemDisabled:Hr.func});Uv(Uv({},a_),{isItemDisabled:function(){return!1}});var m8=0,p8=1,g8=2,y8=3,v8=4,C8=5,_8=6,b8=7,x8=8,S3=9,M8=10,WN=11,QN=12,S8=13,YN=14,qN=15,HN=16,VN=17,$N=18,w8=19,ZN=20,XN=21,E8=22,JN=Object.freeze({__proto__:null,ControlledPropUpdatedSelectedItem:E8,FunctionCloseMenu:VN,FunctionOpenMenu:HN,FunctionReset:XN,FunctionSelectItem:w8,FunctionSetHighlightedIndex:$N,FunctionSetInputValue:ZN,FunctionToggleMenu:qN,InputBlur:S3,InputChange:x8,InputClick:M8,InputKeyDownArrowDown:m8,InputKeyDownArrowUp:p8,InputKeyDownEnd:v8,InputKeyDownEnter:b8,InputKeyDownEscape:g8,InputKeyDownHome:y8,InputKeyDownPageDown:_8,InputKeyDownPageUp:C8,ItemClick:S8,ItemMouseMove:QN,MenuMouseLeave:WN,ToggleButtonClick:YN});function Rae(n){var e=wae(n),t=e.selectedItem,i=e.inputValue;return i===""&&t&&n.defaultInputValue===void 0&&n.initialInputValue===void 0&&n.inputValue===void 0&&(i=n.itemToString(t)),zA({},e,{inputValue:i})}zA({},jN,{items:Hr.array.isRequired,isItemDisabled:Hr.func,inputValue:Hr.string,defaultInputValue:Hr.string,initialInputValue:Hr.string,inputId:Hr.string,onInputValueChange:Hr.func});function Pae(n,e,t,i){var r=Gt.useRef(),a=Sae(n,e,t,i),l=a[0],o=a[1],m=f8();return Gt.useEffect(function(){if(FN(e,"selectedItem")){if(!m){var C=e.itemToKey(e.selectedItem)!==e.itemToKey(r.current);C&&o({type:E8,inputValue:e.itemToString(e.selectedItem)})}r.current=l.selectedItem===r.current?e.selectedItem:l.selectedItem}},[l.selectedItem,e.selectedItem]),[pB(l,e),o]}var Kae=zA({},a_,{isItemDisabled:function(){return!1}});function Uae(n,e){var t,i=e.type,r=e.props,a=e.altKey,l;switch(i){case S8:l={isOpen:K1(r,"isOpen"),highlightedIndex:gB(r),selectedItem:r.items[e.index],inputValue:r.itemToString(r.items[e.index])};break;case m8:n.isOpen?l={highlightedIndex:ux(n.highlightedIndex,1,r.items,r.isItemDisabled,!0)}:l={highlightedIndex:a&&n.selectedItem==null?-1:l_(r,n,1),isOpen:r.items.length>=0};break;case p8:n.isOpen?a?l=jT(r,n.highlightedIndex):l={highlightedIndex:ux(n.highlightedIndex,-1,r.items,r.isItemDisabled,!0)}:l={highlightedIndex:l_(r,n,-1),isOpen:r.items.length>=0};break;case b8:l=jT(r,n.highlightedIndex);break;case g8:l=zA({isOpen:!1,highlightedIndex:-1},!n.isOpen&&{selectedItem:null,inputValue:""});break;case C8:l={highlightedIndex:ux(n.highlightedIndex,-10,r.items,r.isItemDisabled,!0)};break;case _8:l={highlightedIndex:ux(n.highlightedIndex,10,r.items,r.isItemDisabled,!0)};break;case y8:l={highlightedIndex:M3(0,!1,r.items,r.isItemDisabled)};break;case v8:l={highlightedIndex:M3(r.items.length-1,!0,r.items,r.isItemDisabled)};break;case S3:l=zA({isOpen:!1,highlightedIndex:-1},n.highlightedIndex>=0&&((t=r.items)==null?void 0:t.length)&&e.selectItem&&{selectedItem:r.items[n.highlightedIndex],inputValue:r.itemToString(r.items[n.highlightedIndex])});break;case x8:l={isOpen:!0,highlightedIndex:gB(r),inputValue:e.inputValue};break;case M8:l={isOpen:!n.isOpen,highlightedIndex:n.isOpen?-1:l_(r,n,0)};break;case w8:l={selectedItem:e.selectedItem,inputValue:r.itemToString(e.selectedItem)};break;case E8:l={inputValue:e.inputValue};break;default:return Dae(n,e,JN)}return zA({},n,l)}var Lae=["onMouseLeave","refKey","ref"],Fae=["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"],zae=["onClick","onPress","refKey","ref"],Nae=["onKeyDown","onChange","onInput","onBlur","onChangeText","onClick","refKey","ref"];yB.stateChangeTypes=JN;function yB(n){n===void 0&&(n={});var e=zA({},Kae,n),t=e.items,i=e.scrollIntoView,r=e.environment,a=e.getA11yStatusMessage,l=Pae(Uae,e,Rae,Tae),o=l[0],m=l[1],C=o.isOpen,S=o.highlightedIndex,O=o.selectedItem,U=o.inputValue,K=Gt.useRef(null),z=Gt.useRef({}),j=Gt.useRef(null),Q=Gt.useRef(null),ee=f8(),V=xae(e),ae=Gt.useRef(),ne=GN({state:o,props:e}),Z=Gt.useCallback(function(tt){return z.current[V.getItemId(tt)]},[V]);Oae(a,o,[C,S,O,U],r);var oe=Iae({menuElement:K.current,highlightedIndex:S,isOpen:C,itemRefs:z,scrollIntoView:i,getItemNodeFromIndex:Z});Gt.useEffect(function(){var tt=s_(e,"isOpen");tt&&j.current&&j.current.focus()},[]),Gt.useEffect(function(){ee||(ae.current=t.length)});var W=Eae(r,Gt.useCallback(function(){ne.current.state.isOpen&&m({type:S3,selectItem:!1})},[m,ne]),Gt.useMemo(function(){return[K,Q,j]},[K.current,Q.current,j.current])),ue=Bae();Gt.useEffect(function(){C||(z.current={})},[C]),Gt.useEffect(function(){var tt;!C||!(r!=null&&r.document)||!(j!=null&&(tt=j.current)!=null&&tt.focus)||r.document.activeElement!==j.current&&j.current.focus()},[C,r]);var ge=Gt.useMemo(function(){return{ArrowDown:function(lt){lt.preventDefault(),m({type:m8,altKey:lt.altKey})},ArrowUp:function(lt){lt.preventDefault(),m({type:p8,altKey:lt.altKey})},Home:function(lt){ne.current.state.isOpen&&(lt.preventDefault(),m({type:y8}))},End:function(lt){ne.current.state.isOpen&&(lt.preventDefault(),m({type:v8}))},Escape:function(lt){var It=ne.current.state;(It.isOpen||It.inputValue||It.selectedItem||It.highlightedIndex>-1)&&(lt.preventDefault(),m({type:g8}))},Enter:function(lt){var It=ne.current.state;!It.isOpen||lt.which===229||(lt.preventDefault(),m({type:b8}))},PageUp:function(lt){ne.current.state.isOpen&&(lt.preventDefault(),m({type:C8}))},PageDown:function(lt){ne.current.state.isOpen&&(lt.preventDefault(),m({type:_8}))}}},[m,ne]),ye=Gt.useCallback(function(tt){return zA({id:V.labelId,htmlFor:V.inputId},tt)},[V]),Me=Gt.useCallback(function(tt,lt){var It,pt=tt===void 0?{}:tt,St=pt.onMouseLeave,Rt=pt.refKey,Le=Rt===void 0?"ref":Rt,Pe=pt.ref,Re=ax(pt,Lae),He=lt===void 0?{}:lt;return He.suppressRefError,zA((It={},It[Le]=Ax(Pe,function(bt){K.current=bt}),It.id=V.menuId,It.role="listbox",It["aria-labelledby"]=Re&&Re["aria-label"]?void 0:""+V.labelId,It.onMouseLeave=E0(St,function(){m({type:WN})}),It),Re)},[m,ue,V]),Be=Gt.useCallback(function(tt){var lt,It,pt=tt===void 0?{}:tt,St=pt.item,Rt=pt.index,Le=pt.refKey,Pe=Le===void 0?"ref":Le,Re=pt.ref,He=pt.onMouseMove,bt=pt.onMouseDown,vt=pt.onClick;pt.onPress;var Ot=pt.disabled,qt=ax(pt,Fae);Ot!==void 0&&console.warn('Passing "disabled" as an argument to getItemProps is not supported anymore. Please use the isItemDisabled prop from useCombobox.');var Kt=ne.current,on=Kt.props,Jn=Kt.state,Wt=Mae(St,Rt,on.items,"Pass either item or index to getItemProps!"),$n=Wt[0],On=Wt[1],Bn=on.isItemDisabled($n,On),In="onClick",Bi=vt,ei=function(){W.isTouchEnd||On===Jn.highlightedIndex||(oe.current=!1,m({type:QN,index:On,disabled:Bn}))},Kn=function(){m({type:S8,index:On})},Ge=function(re){return re.preventDefault()};return zA((lt={},lt[Pe]=Ax(Re,function(de){de&&(z.current[V.getItemId(On)]=de)}),lt["aria-disabled"]=Bn,lt["aria-selected"]=On===Jn.highlightedIndex,lt.id=V.getItemId(On),lt.role="option",lt),!Bn&&(It={},It[In]=E0(Bi,Kn),It),{onMouseMove:E0(He,ei),onMouseDown:E0(bt,Ge)},qt)},[m,V,ne,W,oe]),we=Gt.useCallback(function(tt){var lt,It=tt===void 0?{}:tt,pt=It.onClick;It.onPress;var St=It.refKey,Rt=St===void 0?"ref":St,Le=It.ref,Pe=ax(It,zae),Re=ne.current.state,He=function(){m({type:YN})};return zA((lt={},lt[Rt]=Ax(Le,function(bt){Q.current=bt}),lt["aria-controls"]=V.menuId,lt["aria-expanded"]=Re.isOpen,lt.id=V.toggleButtonId,lt.tabIndex=-1,lt),!Pe.disabled&&zA({},{onClick:E0(pt,He)}),Pe)},[m,ne,V]),qe=Gt.useCallback(function(tt,lt){var It,pt=tt===void 0?{}:tt,St=pt.onKeyDown,Rt=pt.onChange,Le=pt.onInput,Pe=pt.onBlur;pt.onChangeText;var Re=pt.onClick,He=pt.refKey,bt=He===void 0?"ref":He,vt=pt.ref,Ot=ax(pt,Nae),qt=lt===void 0?{}:lt;qt.suppressRefError;var Kt=ne.current.state,on=function(ei){var Kn=mae(ei);Kn&&ge[Kn]&&ge[Kn](ei)},Jn=function(ei){m({type:x8,inputValue:ei.target.value})},Wt=function(ei){if(r!=null&&r.document&&Kt.isOpen&&!W.isMouseDown){var Kn=ei.relatedTarget===null&&r.document.activeElement!==r.document.body;m({type:S3,selectItem:!Kn})}},$n=function(){m({type:M8})},On="onChange",Bn={};if(!Ot.disabled){var In;Bn=(In={},In[On]=E0(Rt,Le,Jn),In.onKeyDown=E0(St,on),In.onBlur=E0(Pe,Wt),In.onClick=E0(Re,$n),In)}return zA((It={},It[bt]=Ax(vt,function(Bi){j.current=Bi}),It["aria-activedescendant"]=Kt.isOpen&&Kt.highlightedIndex>-1?V.getItemId(Kt.highlightedIndex):"",It["aria-autocomplete"]="list",It["aria-controls"]=V.menuId,It["aria-expanded"]=Kt.isOpen,It["aria-labelledby"]=Ot&&Ot["aria-label"]?void 0:V.labelId,It.autoComplete="off",It.id=V.inputId,It.role="combobox",It.value=Kt.inputValue,It),Bn,Ot)},[m,V,r,ge,ne,W,ue]),xe=Gt.useCallback(function(){m({type:qN})},[m]),ze=Gt.useCallback(function(){m({type:VN})},[m]),ot=Gt.useCallback(function(){m({type:HN})},[m]),yt=Gt.useCallback(function(tt){m({type:$N,highlightedIndex:tt})},[m]),nt=Gt.useCallback(function(tt){m({type:w8,selectedItem:tt})},[m]),be=Gt.useCallback(function(tt){m({type:ZN,inputValue:tt})},[m]),Ne=Gt.useCallback(function(){m({type:XN})},[m]);return{getItemProps:Be,getLabelProps:ye,getMenuProps:Me,getInputProps:qe,getToggleButtonProps:we,toggleMenu:xe,openMenu:ot,closeMenu:ze,setHighlightedIndex:yt,setInputValue:be,selectItem:nt,reset:Ne,highlightedIndex:S,isOpen:C,selectedItem:O,inputValue:U}}Ox.stateReducer,Ox.itemToKey,Ox.environment,Hr.array,Hr.array,Hr.array,Hr.func,Hr.number,Hr.number,Hr.number,Hr.func,Hr.func,Hr.string,Hr.string;a_.itemToKey,a_.stateReducer,a_.environment;function Li(){var n="/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",e="73020a5a2032027cc342d42db613082f6da43a81",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:22}},1:{start:{line:13,column:28},end:{line:13,column:55}},2:{start:{line:14,column:18},end:{line:14,column:36}},3:{start:{line:15,column:36},end:{line:15,column:62}},4:{start:{line:16,column:24},end:{line:19,column:22}},5:{start:{line:17,column:15},end:{line:17,column:34}},6:{start:{line:18,column:4},end:{line:18,column:72}},7:{start:{line:18,column:36},end:{line:18,column:70}},8:{start:{line:20,column:24},end:{line:25,column:8}},9:{start:{line:21,column:4},end:{line:24,column:5}},10:{start:{line:22,column:20},end:{line:22,column:84}},11:{start:{line:23,column:6},end:{line:23,column:48}},12:{start:{line:33,column:6},end:{line:55,column:4}},13:{start:{line:36,column:28},end:{line:36,column:47}},14:{start:{line:38,column:6},end:{line:40,column:7}},15:{start:{line:39,column:8},end:{line:39,column:51}},16:{start:{line:41,column:6},end:{line:41,column:28}},17:{start:{line:44,column:16},end:{line:44,column:51}},18:{start:{line:45,column:6},end:{line:45,column:18}},19:{start:{line:46,column:6},end:{line:46,column:56}},20:{start:{line:49,column:6},end:{line:53,column:7}},21:{start:{line:50,column:8},end:{line:50,column:20}},22:{start:{line:51,column:8},end:{line:51,column:40}},23:{start:{line:52,column:8},end:{line:52,column:19}},24:{start:{line:56,column:2},end:{line:60,column:30}},25:{start:{line:57,column:4},end:{line:59,column:5}},26:{start:{line:58,column:6},end:{line:58,column:22}},27:{start:{line:61,column:2},end:{line:64,column:22}},28:{start:{line:62,column:4},end:{line:62,column:53}},29:{start:{line:63,column:4},end:{line:63,column:69}},30:{start:{line:63,column:17},end:{line:63,column:68}},31:{start:{line:65,column:2},end:{line:67,column:14}},32:{start:{line:66,column:4},end:{line:66,column:26}},33:{start:{line:68,column:2},end:{line:103,column:7}},34:{start:{line:76,column:25},end:{line:76,column:35}},35:{start:{line:87,column:79},end:{line:100,column:9}}},fnMap:{0:{name:"InputAutocomplete",decl:{start:{line:6,column:24},end:{line:6,column:41}},loc:{start:{line:12,column:3},end:{line:104,column:1}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:9,column:13},end:{line:9,column:14}},loc:{start:{line:9,column:19},end:{line:10,column:3}},line:9},2:{name:"(anonymous_2)",decl:{start:{line:16,column:38},end:{line:16,column:39}},loc:{start:{line:16,column:44},end:{line:19,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:18,column:26},end:{line:18,column:27}},loc:{start:{line:18,column:36},end:{line:18,column:70}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:20,column:42},end:{line:20,column:43}},loc:{start:{line:20,column:48},end:{line:25,column:3}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:36,column:18},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:36,column:47}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:18},end:{line:37,column:19}},loc:{start:{line:37,column:38},end:{line:42,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:43,column:26},end:{line:43,column:27}},loc:{start:{line:43,column:48},end:{line:47,column:5}},line:43},8:{name:"(anonymous_8)",decl:{start:{line:48,column:24},end:{line:48,column:25}},loc:{start:{line:48,column:47},end:{line:54,column:5}},line:48},9:{name:"(anonymous_9)",decl:{start:{line:56,column:18},end:{line:56,column:19}},loc:{start:{line:56,column:24},end:{line:60,column:3}},line:56},10:{name:"(anonymous_10)",decl:{start:{line:61,column:18},end:{line:61,column:19}},loc:{start:{line:61,column:24},end:{line:64,column:3}},line:61},11:{name:"(anonymous_11)",decl:{start:{line:63,column:11},end:{line:63,column:12}},loc:{start:{line:63,column:17},end:{line:63,column:68}},line:63},12:{name:"(anonymous_12)",decl:{start:{line:65,column:18},end:{line:65,column:19}},loc:{start:{line:65,column:24},end:{line:67,column:3}},line:65},13:{name:"(anonymous_13)",decl:{start:{line:76,column:19},end:{line:76,column:20}},loc:{start:{line:76,column:25},end:{line:76,column:35}},line:76},14:{name:"(anonymous_14)",decl:{start:{line:87,column:46},end:{line:87,column:47}},loc:{start:{line:87,column:79},end:{line:100,column:9}},line:87}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:14}},type:"default-arg",locations:[{start:{line:8,column:12},end:{line:8,column:14}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:10,column:3}},type:"default-arg",locations:[{start:{line:9,column:13},end:{line:10,column:3}}],line:9},2:{loc:{start:{line:13,column:43},end:{line:13,column:54}},type:"binary-expr",locations:[{start:{line:13,column:43},end:{line:13,column:48}},{start:{line:13,column:52},end:{line:13,column:54}}],line:13},3:{loc:{start:{line:21,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:21,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},4:{loc:{start:{line:36,column:28},end:{line:36,column:47}},type:"cond-expr",locations:[{start:{line:36,column:35},end:{line:36,column:42}},{start:{line:36,column:45},end:{line:36,column:47}}],line:36},5:{loc:{start:{line:38,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:38,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},6:{loc:{start:{line:44,column:16},end:{line:44,column:51}},type:"cond-expr",locations:[{start:{line:44,column:31},end:{line:44,column:46}},{start:{line:44,column:49},end:{line:44,column:51}}],line:44},7:{loc:{start:{line:46,column:15},end:{line:46,column:54}},type:"cond-expr",locations:[{start:{line:46,column:30},end:{line:46,column:45}},{start:{line:46,column:48},end:{line:46,column:54}}],line:46},8:{loc:{start:{line:49,column:6},end:{line:53,column:7}},type:"if",locations:[{start:{line:49,column:6},end:{line:53,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},9:{loc:{start:{line:51,column:17},end:{line:51,column:38}},type:"cond-expr",locations:[{start:{line:51,column:28},end:{line:51,column:34}},{start:{line:51,column:37},end:{line:51,column:38}}],line:51},10:{loc:{start:{line:57,column:4},end:{line:59,column:5}},type:"if",locations:[{start:{line:57,column:4},end:{line:59,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:66,column:13},end:{line:66,column:24}},type:"binary-expr",locations:[{start:{line:66,column:13},end:{line:66,column:18}},{start:{line:66,column:22},end:{line:66,column:24}}],line:66},12:{loc:{start:{line:87,column:18},end:{line:100,column:10}},type:"binary-expr",locations:[{start:{line:87,column:18},end:{line:87,column:24}},{start:{line:87,column:28},end:{line:100,column:10}}],line:87}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0],1:[0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx"],names:[],mappings:"AAkFI,SACE,KADF;AAlFJ,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,mBAAkB;AAE1B,MAAM,aAAa;AASnB,wBAAwB,kBAAkB;AAAA,EACxC;AAAA,EACA,UAAU,CAAC;AAAA,EACX,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,cAAc;AAChB,GAA2B;AACzB,QAAM,CAAC,OAAO,QAAQ,IAAI,MAAM,SAAS,SAAS,EAAE;AACpD,QAAM,UAAU,MAAM,OAAuB,IAAI;AACjD,QAAM,CAAC,WAAW,YAAY,IAAI,MAAM,SAAS,UAAU;AAE3D,QAAM,gBAAgB,MAAM,QAAQ,MAAM;AACxC,UAAM,KAAK,MAAM,YAAY;AAC7B,WAAO,QAAQ,OAAO,CAAC,SAAS,KAAK,CAAC,EAAE,YAAY,EAAE,SAAS,EAAE,CAAC;AAAA,EACpE,GAAG,CAAC,SAAS,KAAK,CAAC;AAEnB,QAAM,gBAAgB,MAAM,YAAY,MAAM;AAC5C,QAAI,QAAQ,SAAS;AACnB,YAAM,QAAQ,OAAO,cAAc,QAAQ,QAAQ,sBAAsB,EAAE;AAC3E,mBAAa,KAAK,IAAI,OAAO,UAAU,CAAC;AAAA,IAC1C;AAAA,EACF,GAAG,CAAC,CAAC;AAEL,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI,YAAY;AAAA,IACd,OAAO;AAAA,IACP,YAAY;AAAA,IACZ,cAAc,CAAC,SAAU,OAAO,KAAK,CAAC,IAAI;AAAA,IAC1C,cAAc,CAAC,QAAQ,WAAW;AAChC,UAAI,OAAO,SAAS,YAAY,iBAAiB,YAAY;AAC3D,eAAO,EAAC,GAAG,OAAO,SAAS,QAAQ,KAAI;AAAA,MACzC;AACA,aAAO,OAAO;AAAA,IAChB;AAAA,IACA,sBAAsB,CAAC,EAAC,aAAY,MAAM;AACxC,YAAM,IAAI,eAAe,aAAa,CAAC,IAAI;AAC3C,eAAS,CAAC;AACV,eAAS,eAAe,aAAa,CAAC,IAAI,MAAS;AAAA,IACrD;AAAA,IACA,oBAAoB,CAAC,EAAC,YAAY,EAAC,MAAM;AACvC,UAAI,OAAO,MAAM,UAAU;AACzB,iBAAS,CAAC;AACV,iBAAS,MAAM,KAAK,SAAY,CAAC;AACjC,iBAAS;AAAA,MACX;AAAA,IACF;AAAA,EACF,CAAC;AAED,QAAM,UAAU,MAAM;AACpB,QAAI,QAAQ;AACV,oBAAc;AAAA,IAChB;AAAA,EACF,GAAG,CAAC,QAAQ,aAAa,CAAC;AAE1B,QAAM,UAAU,MAAM;AACpB,WAAO,iBAAiB,UAAU,aAAa;AAC/C,WAAO,MAAM,OAAO,oBAAoB,UAAU,aAAa;AAAA,EACjE,GAAG,CAAC,aAAa,CAAC;AAElB,QAAM,UAAU,MAAM;AACpB,aAAS,SAAS,EAAE;AAAA,EACtB,GAAG,CAAC,KAAK,CAAC;AAEV,SACE,qBAAC,SAAI,WAAU,yBACb;AAAA;AAAA,MAAC;AAAA;AAAA,QACE,GAAG,cAAc;AAAA,UAChB,cAAc;AAAA,UACd,WAAW;AAAA,UACX,YAAY;AAAA,UACZ,SAAS,MAAM,SAAS;AAAA,QAC1B,CAAC;AAAA;AAAA,IACH;AAAA,IACA;AAAA,MAAC;AAAA;AAAA,QACE,GAAG,aAAa,CAAC,GAAG,EAAC,kBAAkB,KAAI,CAAC;AAAA,QAC7C,KAAK;AAAA,QACL,OAAO,EAAC,UAAU,SAAS,UAAU,QAAQ,WAAW,QAAQ,IAAG;AAAA,QACnE,WAAU;AAAA,QAET,oBACC,cAAc,IAAI,CAAC,MAAM,UACvB;AAAA,UAAC;AAAA;AAAA,YAEE,GAAG,aAAa;AAAA,cACf;AAAA,cACA;AAAA,cACA,WAAW,WAAW,mCAAmC;AAAA,gBACvD,4CAA4C,qBAAqB;AAAA,cACnE,CAAC;AAAA,YACH,CAAC;AAAA,YAEA,eAAK,CAAC;AAAA;AAAA,UATF,KAAK,CAAC;AAAA,QAUb,CACD;AAAA;AAAA,IACL;AAAA,KACF;AAEJ;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"73020a5a2032027cc342d42db613082f6da43a81"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Li=function(){return l},l}Li();const WT=(Li().s[0]++,140);function Mb({value:n,options:e=(Li().b[0][0]++,[]),onChange:t=(Li().b[1][0]++,()=>{Li().f[1]++}),"aria-label":i}){Li().f[0]++;const[r,a]=(Li().s[1]++,ni.useState((Li().b[2][0]++,n||(Li().b[2][1]++,"")))),l=(Li().s[2]++,ni.useRef(null)),[o,m]=(Li().s[3]++,ni.useState(WT)),C=(Li().s[4]++,ni.useMemo(()=>{Li().f[2]++;const ee=(Li().s[5]++,r.toLowerCase());return Li().s[6]++,e.filter(V=>(Li().f[3]++,Li().s[7]++,V[0].toLowerCase().includes(ee)))},[e,r])),S=(Li().s[8]++,ni.useCallback(()=>{if(Li().f[4]++,Li().s[9]++,l.current){Li().b[3][0]++;const ee=(Li().s[10]++,window.innerHeight-l.current.getBoundingClientRect().top);Li().s[11]++,m(Math.min(ee,WT))}else Li().b[3][1]++},[])),{isOpen:O,getMenuProps:U,getInputProps:K,getItemProps:z,highlightedIndex:j,openMenu:Q}=(Li().s[12]++,yB({items:C,inputValue:r,itemToString:ee=>(Li().f[5]++,Li().s[13]++,ee?(Li().b[4][0]++,ee[0]):(Li().b[4][1]++,"")),stateReducer:(ee,V)=>(Li().f[6]++,Li().s[14]++,V.type===yB.stateChangeTypes.InputClick?(Li().b[5][0]++,Li().s[15]++,{...V.changes,isOpen:!0}):(Li().b[5][1]++,Li().s[16]++,V.changes)),onSelectedItemChange:({selectedItem:ee})=>{Li().f[7]++;const V=(Li().s[17]++,ee?(Li().b[6][0]++,ee[0]):(Li().b[6][1]++,""));Li().s[18]++,a(V),Li().s[19]++,t(ee?(Li().b[7][0]++,ee[0]):(Li().b[7][1]++,void 0))},onInputValueChange:({inputValue:ee})=>{Li().f[8]++,Li().s[20]++,typeof ee=="string"?(Li().b[8][0]++,Li().s[21]++,a(ee),Li().s[22]++,t(ee===""?(Li().b[9][0]++,void 0):(Li().b[9][1]++,ee)),Li().s[23]++,Q()):Li().b[8][1]++}}));return Li().s[24]++,ni.useEffect(()=>{Li().f[9]++,Li().s[25]++,O?(Li().b[10][0]++,Li().s[26]++,S()):Li().b[10][1]++},[O,S]),Li().s[27]++,ni.useEffect(()=>(Li().f[10]++,Li().s[28]++,window.addEventListener("resize",S),Li().s[29]++,()=>(Li().f[11]++,Li().s[30]++,window.removeEventListener("resize",S))),[S]),Li().s[31]++,ni.useEffect(()=>{Li().f[12]++,Li().s[32]++,a((Li().b[11][0]++,n||(Li().b[11][1]++,"")))},[n]),Li().s[33]++,ce.jsxs("div",{className:"maputnik-autocomplete",children:[ce.jsx("input",{...K({"aria-label":i,className:"maputnik-string",spellCheck:!1,onFocus:()=>(Li().f[13]++,Li().s[34]++,Q())})}),ce.jsx("div",{...U({},{suppressRefError:!0}),ref:l,style:{position:"fixed",overflow:"auto",maxHeight:o,zIndex:998},className:"maputnik-autocomplete-menu",children:(Li().b[12][0]++,O&&(Li().b[12][1]++,C.map((ee,V)=>(Li().f[14]++,Li().s[35]++,ce.jsx("div",{...z({item:ee,index:V,className:e0("maputnik-autocomplete-menu-item",{"maputnik-autocomplete-menu-item-selected":j===V})}),children:ee[1]},ee[0])))))})]})}function qm(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",e="79286c20a2938f727d139d23187ec9741fcf123f",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",statementMap:{0:{start:{line:6,column:28},end:{line:32,column:1}},1:{start:{line:15,column:2},end:{line:31,column:4}},2:{start:{line:27,column:43},end:{line:27,column:53}},3:{start:{line:33,column:20},end:{line:33,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:28},end:{line:6,column:29}},loc:{start:{line:14,column:6},end:{line:32,column:1}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:8,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:27,column:34},end:{line:27,column:35}},loc:{start:{line:27,column:43},end:{line:27,column:53}},line:27}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:8,column:3}},type:"default-arg",locations:[{start:{line:7,column:13},end:{line:8,column:3}}],line:7},1:{loc:{start:{line:9,column:2},end:{line:9,column:16}},type:"default-arg",locations:[{start:{line:9,column:14},end:{line:9,column:16}}],line:9}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0,2:0},b:{0:[0],1:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx"],names:[],mappings:"AA8BM;AA5BN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA0B,uBAAuB;AAUjD,MAAM,sBAA0D,CAAC;AAAA,EAC/D,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,YAAY,CAAC;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,QAAQ;AAAA,MACjB,WAAW,OAAO,MAAM;AAAA,MACxB;AAAA,MACA,eAAa;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC;AAAA,UACA;AAAA,UACA,SAAS,WAAW,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC;AAAA;AAAA,MAC7C;AAAA;AAAA,EACF;AAEJ;AAGA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"79286c20a2938f727d139d23187ec9741fcf123f"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return qm=function(){return l},l}qm();qm().s[0]++;const Gae=({onChange:n=(qm().b[0][0]++,()=>{qm().f[1]++}),sourceIds:e=(qm().b[1][0]++,[]),wdKey:t,value:i,error:r,t:a})=>(qm().f[0]++,qm().s[1]++,ce.jsx(Ks,{label:a("Source"),fieldSpec:da.layer.source,error:r,"data-wd-key":t,children:ce.jsx(Mb,{value:i,onChange:n,options:e?.map(l=>(qm().f[2]++,qm().s[2]++,[l,l]))})})),eG=(qm().s[3]++,ss()(Gae));function Hm(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",e="d13cb986cb9a59433c45c264943b350376b901e4",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",statementMap:{0:{start:{line:6,column:33},end:{line:31,column:1}},1:{start:{line:14,column:2},end:{line:30,column:4}},2:{start:{line:26,column:46},end:{line:26,column:52}},3:{start:{line:32,column:25},end:{line:32,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:33},end:{line:6,column:34}},loc:{start:{line:13,column:6},end:{line:31,column:1}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:8,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:26,column:39},end:{line:26,column:40}},loc:{start:{line:26,column:46},end:{line:26,column:52}},line:26}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:8,column:3}},type:"default-arg",locations:[{start:{line:7,column:13},end:{line:8,column:3}}],line:7},1:{loc:{start:{line:9,column:2},end:{line:9,column:21}},type:"default-arg",locations:[{start:{line:9,column:19},end:{line:9,column:21}}],line:9}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0,2:0},b:{0:[0],1:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx"],names:[],mappings:"AA4BM;AA1BN,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA0B,uBAAuB;AASjD,MAAM,2BAAoE,CAAC;AAAA,EACzE,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,iBAAiB,CAAC;AAAA,EAClB;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,cAAc;AAAA,MACvB,WAAW,OAAO,MAAM,cAAc;AAAA,MACtC,eAAY;AAAA,MACZ;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC;AAAA,UACA;AAAA,UACA,SAAS,gBAAgB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,MAC5C;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d13cb986cb9a59433c45c264943b350376b901e4"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Hm=function(){return l},l}Hm();Hm().s[0]++;const jae=({onChange:n=(Hm().b[0][0]++,()=>{Hm().f[1]++}),sourceLayerIds:e=(Hm().b[1][0]++,[]),value:t,error:i,t:r})=>(Hm().f[0]++,Hm().s[1]++,ce.jsx(Ks,{label:r("Source Layer"),fieldSpec:Ua.layer["source-layer"],"data-wd-key":"layer-source-layer",error:i,children:ce.jsx(Mb,{value:t,onChange:n,options:e?.map(a=>(Hm().f[2]++,Hm().s[2]++,[a,a]))})})),tG=(Hm().s[3]++,ss()(jae));function B8(){var n="/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts",e="674dcf7f1706a4f312a810bdf5e5997ddaf065e0",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts",statementMap:{0:{start:{line:1,column:33},end:{line:1,column:97}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts"],names:[],mappings:"AAAO,aAAM,oBAAoB,CAAC,cAAc,UAAU,aAAa,WAAW,cAAc;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"674dcf7f1706a4f312a810bdf5e5997ddaf065e0"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return B8=function(){return l},l}B8();const vB=(B8().s[0]++,["background","raster","hillshade","heatmap","color-relief"]);function zn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx",e="a02ad75caf62b0a2a5889ba722d59a5e2d0b8ca6",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx",statementMap:{0:{start:{line:12,column:13},end:{line:33,column:3}},1:{start:{line:13,column:4},end:{line:16,column:5}},2:{start:{line:13,column:38},end:{line:13,column:60}},3:{start:{line:14,column:6},end:{line:14,column:72}},4:{start:{line:15,column:6},end:{line:15,column:13}},5:{start:{line:17,column:26},end:{line:17,column:52}},6:{start:{line:18,column:18},end:{line:21,column:5}},7:{start:{line:22,column:4},end:{line:27,column:5}},8:{start:{line:23,column:6},end:{line:23,column:39}},9:{start:{line:24,column:6},end:{line:26,column:7}},10:{start:{line:25,column:8},end:{line:25,column:59}},11:{start:{line:28,column:4},end:{line:28,column:30}},12:{start:{line:29,column:4},end:{line:32,column:7}},13:{start:{line:30,column:6},end:{line:30,column:47}},14:{start:{line:31,column:6},end:{line:31,column:37}},15:{start:{line:35,column:4},end:{line:35,column:17}},16:{start:{line:36,column:18},end:{line:40,column:5}},17:{start:{line:41,column:4},end:{line:47,column:5}},18:{start:{line:42,column:6},end:{line:42,column:56}},19:{start:{line:43,column:27},end:{line:43,column:72}},20:{start:{line:44,column:6},end:{line:46,column:7}},21:{start:{line:45,column:8},end:{line:45,column:48}},22:{start:{line:48,column:4},end:{line:48,column:23}},23:{start:{line:51,column:20},end:{line:51,column:34}},24:{start:{line:52,column:20},end:{line:52,column:35}},25:{start:{line:53,column:32},end:{line:53,column:56}},26:{start:{line:54,column:32},end:{line:54,column:56}},27:{start:{line:55,column:4},end:{line:62,column:5}},28:{start:{line:59,column:6},end:{line:61,column:9}},29:{start:{line:65,column:22},end:{line:65,column:54}},30:{start:{line:66,column:4},end:{line:66,column:34}},31:{start:{line:69,column:4},end:{line:86,column:5}},32:{start:{line:71,column:8},end:{line:71,column:18}},33:{start:{line:74,column:8},end:{line:74,column:113}},34:{start:{line:74,column:69},end:{line:74,column:92}},35:{start:{line:74,column:110},end:{line:74,column:111}},36:{start:{line:76,column:8},end:{line:76,column:109}},37:{start:{line:76,column:69},end:{line:76,column:88}},38:{start:{line:76,column:106},end:{line:76,column:107}},39:{start:{line:83,column:8},end:{line:83,column:133}},40:{start:{line:83,column:69},end:{line:83,column:112}},41:{start:{line:83,column:130},end:{line:83,column:131}},42:{start:{line:85,column:8},end:{line:85,column:18}},43:{start:{line:89,column:14},end:{line:89,column:26}},44:{start:{line:90,column:20},end:{line:90,column:52}},45:{start:{line:91,column:19},end:{line:91,column:61}},46:{start:{line:93,column:4},end:{line:106,column:5}},47:{start:{line:94,column:6},end:{line:105,column:11}},48:{start:{line:100,column:27},end:{line:100,column:57}},49:{start:{line:107,column:4},end:{line:165,column:6}},50:{start:{line:124,column:18},end:{line:124,column:56}},51:{start:{line:133,column:33},end:{line:133,column:59}},52:{start:{line:142,column:33},end:{line:142,column:61}},53:{start:{line:150,column:33},end:{line:150,column:69}},54:{start:{line:168,column:17},end:{line:168,column:52}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:13},end:{line:12,column:14}},loc:{start:{line:12,column:19},end:{line:33,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:13,column:31},end:{line:13,column:32}},loc:{start:{line:13,column:38},end:{line:13,column:60}},line:13},2:{name:"(anonymous_2)",decl:{start:{line:29,column:35},end:{line:29,column:36}},loc:{start:{line:29,column:41},end:{line:32,column:5}},line:29},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:21},end:{line:49,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:44},end:{line:63,column:3}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:29},end:{line:67,column:3}},line:64},6:{name:"(anonymous_6)",decl:{start:{line:68,column:2},end:{line:68,column:3}},loc:{start:{line:68,column:19},end:{line:87,column:3}},line:68},7:{name:"(anonymous_7)",decl:{start:{line:74,column:57},end:{line:74,column:58}},loc:{start:{line:74,column:69},end:{line:74,column:92}},line:74},8:{name:"(anonymous_8)",decl:{start:{line:74,column:98},end:{line:74,column:99}},loc:{start:{line:74,column:110},end:{line:74,column:111}},line:74},9:{name:"(anonymous_9)",decl:{start:{line:76,column:57},end:{line:76,column:58}},loc:{start:{line:76,column:69},end:{line:76,column:88}},line:76},10:{name:"(anonymous_10)",decl:{start:{line:76,column:94},end:{line:76,column:95}},loc:{start:{line:76,column:106},end:{line:76,column:107}},line:76},11:{name:"(anonymous_11)",decl:{start:{line:83,column:57},end:{line:83,column:58}},loc:{start:{line:83,column:69},end:{line:83,column:112}},line:83},12:{name:"(anonymous_12)",decl:{start:{line:83,column:118},end:{line:83,column:119}},loc:{start:{line:83,column:130},end:{line:83,column:131}},line:83},13:{name:"(anonymous_13)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:11},end:{line:166,column:3}},line:88},14:{name:"(anonymous_14)",decl:{start:{line:100,column:21},end:{line:100,column:22}},loc:{start:{line:100,column:27},end:{line:100,column:57}},line:100},15:{name:"(anonymous_15)",decl:{start:{line:123,column:26},end:{line:123,column:27}},loc:{start:{line:123,column:33},end:{line:125,column:17}},line:123},16:{name:"(anonymous_16)",decl:{start:{line:133,column:26},end:{line:133,column:27}},loc:{start:{line:133,column:33},end:{line:133,column:59}},line:133},17:{name:"(anonymous_17)",decl:{start:{line:142,column:26},end:{line:142,column:27}},loc:{start:{line:142,column:33},end:{line:142,column:61}},line:142},18:{name:"(anonymous_18)",decl:{start:{line:150,column:26},end:{line:150,column:27}},loc:{start:{line:150,column:33},end:{line:150,column:69}},line:150}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:16,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:16,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:27,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:27,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},2:{loc:{start:{line:24,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:24,column:6},end:{line:26,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},3:{loc:{start:{line:24,column:10},end:{line:24,column:84}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:54}},{start:{line:24,column:58},end:{line:24,column:84}}],line:24},4:{loc:{start:{line:41,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},5:{loc:{start:{line:43,column:27},end:{line:43,column:72}},type:"binary-expr",locations:[{start:{line:43,column:27},end:{line:43,column:66}},{start:{line:43,column:70},end:{line:43,column:72}}],line:43},6:{loc:{start:{line:44,column:6},end:{line:46,column:7}},type:"if",locations:[{start:{line:44,column:6},end:{line:46,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},7:{loc:{start:{line:55,column:4},end:{line:62,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:62,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},8:{loc:{start:{line:57,column:6},end:{line:57,column:160}},type:"binary-expr",locations:[{start:{line:57,column:6},end:{line:57,column:25}},{start:{line:57,column:29},end:{line:57,column:52}},{start:{line:57,column:56},end:{line:57,column:106}},{start:{line:57,column:110},end:{line:57,column:160}}],line:57},9:{loc:{start:{line:65,column:22},end:{line:65,column:54}},type:"binary-expr",locations:[{start:{line:65,column:22},end:{line:65,column:48}},{start:{line:65,column:52},end:{line:65,column:54}}],line:65},10:{loc:{start:{line:66,column:11},end:{line:66,column:33}},type:"binary-expr",locations:[{start:{line:66,column:11},end:{line:66,column:27}},{start:{line:66,column:31},end:{line:66,column:33}}],line:66},11:{loc:{start:{line:69,column:4},end:{line:86,column:5}},type:"switch",locations:[{start:{line:70,column:6},end:{line:71,column:18}},{start:{line:72,column:6},end:{line:72,column:23}},{start:{line:73,column:6},end:{line:74,column:113}},{start:{line:75,column:6},end:{line:76,column:109}},{start:{line:77,column:6},end:{line:77,column:21}},{start:{line:78,column:6},end:{line:78,column:20}},{start:{line:79,column:6},end:{line:79,column:18}},{start:{line:80,column:6},end:{line:80,column:28}},{start:{line:81,column:6},end:{line:81,column:18}},{start:{line:82,column:6},end:{line:83,column:133}},{start:{line:84,column:6},end:{line:85,column:18}}],line:69},12:{loc:{start:{line:83,column:69},end:{line:83,column:112}},type:"binary-expr",locations:[{start:{line:83,column:69},end:{line:83,column:88}},{start:{line:83,column:92},end:{line:83,column:112}}],line:83},13:{loc:{start:{line:93,column:4},end:{line:106,column:5}},type:"if",locations:[{start:{line:93,column:4},end:{line:106,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},14:{loc:{start:{line:136,column:12},end:{line:144,column:13}},type:"binary-expr",locations:[{start:{line:136,column:12},end:{line:136,column:44}},{start:{line:136,column:64},end:{line:144,column:13}}],line:136},15:{loc:{start:{line:145,column:12},end:{line:152,column:13}},type:"binary-expr",locations:[{start:{line:145,column:12},end:{line:145,column:56}},{start:{line:145,column:76},end:{line:152,column:13}}],line:145}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0,0,0],9:[0,0],10:[0,0],11:[0,0,0,0,0,0,0,0,0,0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx"],names:[],mappings:"AAqIQ,SAEE,KAFF;AArIR,OAAO,WAAW;AAClB,SAA0B,uBAAuB;AAGjD,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB;AAmBlC,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,WAAW,MAAM;AACf,QAAI,KAAK,MAAM,OAAO,KAAK,OAAK,EAAE,OAAO,KAAK,MAAM,EAAE,GAAG;AACvD,WAAK,SAAS,EAAE,OAAO,KAAK,MAAM,EAAE,yBAAyB,EAAE,CAAC;AAChE;AAAA,IACF;AAEA,UAAM,gBAAgB,KAAK,MAAM,OAAO,MAAM,CAAC;AAC/C,UAAM,QAAuB;AAAA,MAC3B,IAAI,KAAK,MAAM;AAAA,MACf,MAAM,KAAK,MAAM;AAAA,IACnB;AAEA,QAAG,KAAK,MAAM,SAAS,cAAc;AACnC,YAAM,SAAS,KAAK,MAAM;AAC1B,UAAG,CAAC,kBAAkB,SAAS,KAAK,MAAM,IAAI,KAAK,KAAK,MAAM,cAAc,GAAG;AAC7E,cAAM,cAAc,IAAI,KAAK,MAAM,cAAc;AAAA,MACnD;AAAA,IACF;AAEA,kBAAc,KAAK,KAA2B;AAC9C,SAAK,SAAS,EAAE,OAAO,KAAK,GAAG,MAAM;AACnC,WAAK,MAAM,eAAe,aAAa;AACvC,WAAK,MAAM,aAAa,KAAK;AAAA,IAC/B,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,OAA8B;AACxC,UAAM,KAAK;AACX,UAAM,QAAuB;AAAA,MAC3B,MAAM;AAAA,MACN,IAAI;AAAA,MACJ,OAAO;AAAA,IACT;AAEA,QAAG,OAAO,KAAK,MAAM,OAAO,EAAE,SAAS,GAAG;AACxC,YAAM,SAAS,OAAO,KAAK,KAAK,MAAM,OAAO,EAAE,CAAC;AAChD,YAAM,eAAe,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAE,UAAU,CAAC;AACjE,UAAI,aAAa,SAAS,GAAG;AAC3B,cAAM,cAAc,IAAI,aAAa,CAAC;AAAA,MACxC;AAAA,IACF;AACA,SAAK,QAAQ;AAAA,EACf;AAAA,EAEA,mBAAmB,YAAmC,WAA0B;AAE9E,UAAM,UAAU,UAAU;AAC1B,UAAM,UAAU,KAAK,MAAM;AAE3B,UAAM,sBAAsB,KAAK,WAAW,OAAO;AACnD,UAAM,sBAAsB,KAAK,WAAW,OAAO;AAEnD;AAAA;AAAA,MAEE,YAAY,WACT,UAAU,WAAW,MAErB,oBAAoB,QAAQ,UAAU,MAAO,IAAI,MAEjD,oBAAoB,QAAQ,KAAK,MAAM,MAAO,IAAI;AAAA,MACrD;AAEA,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,MACV,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,QAAgB;AACjC,UAAM,YAAY,KAAK,MAAM,QAAQ,MAAM,KAAK,CAAC;AACjD,WAAO,UAAU,UAAU,CAAC;AAAA,EAC9B;AAAA,EAEA,WAAW,MAAkC;AAE3C,YAAO,MAAM;AAAA,MACb,KAAK;AACH,eAAO,CAAC;AAAA,MACV,KAAK;AAAA,MACL,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,YAAY,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MACzG,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,QAAQ,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MACrG,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,YAAY,EAAE,SAAS,SAAS,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MAC7H;AACE,eAAO,CAAC;AAAA,IACV;AAAA,EACF;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,UAAU,KAAK,WAAW,KAAK,MAAM,IAAI;AAC/C,UAAM,SAAS,KAAK,mBAAmB,KAAK,MAAM,MAAO;AACzD,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO;AACpB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ;AAAA,UAAC;AAAA;AAAA,YACC,MAAK;AAAA,YACL,SAAS,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK,CAAC;AAAA,YAC5C,WAAU;AAAA,YACX;AAAA;AAAA,QAED;AAAA,SACF;AAAA,IAEJ;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QACpB,eAAY;AAAA,QACZ,WAAU;AAAA,QAET;AAAA;AAAA,UACD,qBAAC,SAAI,WAAU,sBACb;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM;AAAA,gBAClB,OAAM;AAAA,gBACN,UAAU,CAAC,MAAc;AACvB,uBAAK,SAAS,EAAE,IAAI,GAAG,OAAO,KAAK,CAAC;AAAA,gBACtC;AAAA;AAAA,YACF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM;AAAA,gBAClB,OAAM;AAAA,gBACN,UAAU,CAAC,MAAkC,KAAK,SAAS,EAAE,MAAM,EAAE,CAAC;AAAA;AAAA,YACxE;AAAA,YACC,KAAK,MAAM,SAAS,gBACvB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,OAAM;AAAA,gBACN,OAAO,KAAK,MAAM;AAAA,gBAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,QAAQ,EAAE,CAAC;AAAA;AAAA,YACtD;AAAA,YAEG,CAAC,kBAAkB,SAAS,KAAK,MAAM,IAAI,KAC9C;AAAA,cAAC;AAAA;AAAA,gBACC,gBAAgB;AAAA,gBAChB,OAAO,KAAK,MAAM,cAAc;AAAA,gBAChC,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,gBAAgB,EAAE,CAAC;AAAA;AAAA,YAC9D;AAAA,YAEE;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,eAAY;AAAA,gBAEX,YAAE,WAAW;AAAA;AAAA,YAChB;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a02ad75caf62b0a2a5889ba722d59a5e2d0b8ca6"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return zn=function(){return l},l}zn();class Wae extends ni.Component{addLayer=(zn().s[0]++,()=>{if(zn().f[0]++,zn().s[1]++,this.props.layers.some(i=>(zn().f[1]++,zn().s[2]++,i.id===this.state.id))){zn().b[0][0]++,zn().s[3]++,this.setState({error:this.props.t("Layer ID already exists")}),zn().s[4]++;return}else zn().b[0][1]++;const e=(zn().s[5]++,this.props.layers.slice(0)),t=(zn().s[6]++,{id:this.state.id,type:this.state.type});zn().s[7]++,this.state.type!=="background"?(zn().b[1][0]++,zn().s[8]++,t.source=this.state.source,zn().s[9]++,zn().b[3][0]++,!vB.includes(this.state.type)&&(zn().b[3][1]++,this.state["source-layer"])?(zn().b[2][0]++,zn().s[10]++,t["source-layer"]=this.state["source-layer"]):zn().b[2][1]++):zn().b[1][1]++,zn().s[11]++,e.push(t),zn().s[12]++,this.setState({error:null},()=>{zn().f[2]++,zn().s[13]++,this.props.onLayersChange(e),zn().s[14]++,this.props.onOpenToggle(!1)})});constructor(e){zn().f[3]++,zn().s[15]++,super(e);const t=(zn().s[16]++,{type:"fill",id:"",error:null});if(zn().s[17]++,Object.keys(e.sources).length>0){zn().b[4][0]++,zn().s[18]++,t.source=Object.keys(this.props.sources)[0];const i=(zn().s[19]++,zn().b[5][0]++,this.props.sources[t.source].layers||(zn().b[5][1]++,[]));zn().s[20]++,i.length>0?(zn().b[6][0]++,zn().s[21]++,t["source-layer"]=i[0]):zn().b[6][1]++}else zn().b[4][1]++;zn().s[22]++,this.state=t}componentDidUpdate(e,t){zn().f[4]++;const i=(zn().s[23]++,t.type),r=(zn().s[24]++,this.state.type),a=(zn().s[25]++,this.getSources(i)),l=(zn().s[26]++,this.getSources(r));zn().s[27]++,zn().b[8][0]++,i!==r&&(zn().b[8][1]++,t.source!=="")&&(zn().b[8][2]++,a.indexOf(t.source)>-1)&&(zn().b[8][3]++,l.indexOf(this.state.source)<0)?(zn().b[7][0]++,zn().s[28]++,this.setState({source:""})):zn().b[7][1]++}getLayersForSource(e){zn().f[5]++;const t=(zn().s[29]++,zn().b[9][0]++,this.props.sources[e]||(zn().b[9][1]++,{}));return zn().s[30]++,zn().b[10][0]++,t.layers||(zn().b[10][1]++,[])}getSources(e){switch(zn().f[6]++,zn().s[31]++,e){case"background":return zn().b[11][0]++,zn().s[32]++,[];case"hillshade":zn().b[11][1]++;case"color-relief":return zn().b[11][2]++,zn().s[33]++,Object.entries(this.props.sources).filter(([t,i])=>(zn().f[7]++,zn().s[34]++,i.type==="raster-dem")).map(([t,i])=>(zn().f[8]++,zn().s[35]++,t));case"raster":return zn().b[11][3]++,zn().s[36]++,Object.entries(this.props.sources).filter(([t,i])=>(zn().f[9]++,zn().s[37]++,i.type==="raster")).map(([t,i])=>(zn().f[10]++,zn().s[38]++,t));case"heatmap":zn().b[11][4]++;case"circle":zn().b[11][5]++;case"fill":zn().b[11][6]++;case"fill-extrusion":zn().b[11][7]++;case"line":zn().b[11][8]++;case"symbol":return zn().b[11][9]++,zn().s[39]++,Object.entries(this.props.sources).filter(([t,i])=>(zn().f[11]++,zn().s[40]++,zn().b[12][0]++,i.type==="vector"||(zn().b[12][1]++,i.type==="geojson"))).map(([t,i])=>(zn().f[12]++,zn().s[41]++,t));default:return zn().b[11][10]++,zn().s[42]++,[]}}render(){zn().f[13]++;const e=(zn().s[43]++,this.props.t),t=(zn().s[44]++,this.getSources(this.state.type)),i=(zn().s[45]++,this.getLayersForSource(this.state.source));let r;return zn().s[46]++,this.state.error?(zn().b[13][0]++,zn().s[47]++,r=ce.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,ce.jsx("a",{href:"#",onClick:()=>(zn().f[14]++,zn().s[48]++,this.setState({error:null})),className:"maputnik-modal-error-close",children:"×"})]})):zn().b[13][1]++,zn().s[49]++,ce.jsxs(z1,{isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Add Layer"),"data-wd-key":"modal:add-layer",className:"maputnik-add-modal",children:[r,ce.jsxs("div",{className:"maputnik-add-layer",children:[ce.jsx(KN,{value:this.state.id,wdKey:"add-layer.layer-id",onChange:a=>{zn().f[15]++,zn().s[50]++,this.setState({id:a,error:null})}}),ce.jsx(PN,{value:this.state.type,wdKey:"add-layer.layer-type",onChange:a=>(zn().f[16]++,zn().s[51]++,this.setState({type:a}))}),(zn().b[14][0]++,this.state.type!=="background"&&(zn().b[14][1]++,ce.jsx(eG,{sourceIds:t,wdKey:"add-layer.layer-source-block",value:this.state.source,onChange:a=>(zn().f[17]++,zn().s[52]++,this.setState({source:a}))}))),(zn().b[15][0]++,!vB.includes(this.state.type)&&(zn().b[15][1]++,ce.jsx(tG,{sourceLayerIds:i,value:this.state["source-layer"],onChange:a=>(zn().f[18]++,zn().s[53]++,this.setState({"source-layer":a}))}))),ce.jsx(ml,{className:"maputnik-add-layer-button",onClick:this.addLayer,"data-wd-key":"add-layer",children:e("Add Layer")})]})]})}}const Qae=(zn().s[54]++,ss()(Wae));function Tg(){var n="/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",e="a991ed6da2a27b46f1adbb88a645aa2ee0df375e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",statementMap:{0:{start:{line:1,column:10},end:{line:1,column:11}},1:{start:{line:3,column:2},end:{line:3,column:8}},2:{start:{line:4,column:2},end:{line:4,column:22}}},fnMap:{0:{name:"generateUniqueId",decl:{start:{line:2,column:24},end:{line:2,column:40}},loc:{start:{line:2,column:54},end:{line:5,column:1}},line:2}},branchMap:{0:{loc:{start:{line:2,column:41},end:{line:2,column:52}},type:"default-arg",locations:[{start:{line:2,column:50},end:{line:2,column:52}}],line:2}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts"],names:[],mappings:"AAGA,IAAI,MAAM;AAEV,wBAAwB,iBAAiB,SAAO,IAAI;AAClD;AACA,SAAO,SAAO;AAChB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a991ed6da2a27b46f1adbb88a645aa2ee0df375e"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Tg=function(){return l},l}Tg();let QT=(Tg().s[0]++,0);function Lv(n=(Tg().b[0][0]++,"")){return Tg().f[0]++,Tg().s[1]++,QT++,Tg().s[2]++,n+QT}function Nr(){var n="/home/runner/work/maputnik/maputnik/src/libs/layer.ts",e="8d7d71e3a97c0e4b8cc5fd0ca26b8fdf4aa2aa36",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/layer.ts",statementMap:{0:{start:{line:3,column:28},end:{line:3,column:46}},1:{start:{line:4,column:2},end:{line:8,column:5}},2:{start:{line:5,column:4},end:{line:7,column:5}},3:{start:{line:6,column:6},end:{line:6,column:45}},4:{start:{line:9,column:29},end:{line:9,column:48}},5:{start:{line:10,column:2},end:{line:14,column:5}},6:{start:{line:11,column:4},end:{line:13,column:5}},7:{start:{line:12,column:6},end:{line:12,column:46}},8:{start:{line:15,column:2},end:{line:20,column:4}},9:{start:{line:23,column:2},end:{line:59,column:3}},10:{start:{line:24,column:4},end:{line:43,column:5}},11:{start:{line:25,column:23},end:{line:31,column:7}},12:{start:{line:32,column:6},end:{line:32,column:39}},13:{start:{line:33,column:6},end:{line:35,column:7}},14:{start:{line:34,column:8},end:{line:34,column:31}},15:{start:{line:36,column:6},end:{line:36,column:22}},16:{start:{line:38,column:23},end:{line:40,column:7}},17:{start:{line:41,column:6},end:{line:41,column:32}},18:{start:{line:42,column:6},end:{line:42,column:22}},19:{start:{line:45,column:4},end:{line:58,column:5}},20:{start:{line:46,column:6},end:{line:52,column:8}},21:{start:{line:54,column:6},end:{line:57,column:8}},22:{start:{line:62,column:2},end:{line:62,column:64}},23:{start:{line:65,column:29},end:{line:65,column:56}},24:{start:{line:66,column:19},end:{line:66,column:22}},25:{start:{line:67,column:2},end:{line:74,column:3}},26:{start:{line:67,column:15},end:{line:67,column:18}},27:{start:{line:68,column:32},end:{line:68,column:61}},28:{start:{line:69,column:4},end:{line:73,column:5}},29:{start:{line:70,column:6},end:{line:70,column:25}},30:{start:{line:72,column:6},end:{line:72,column:24}},31:{start:{line:75,column:2},end:{line:75,column:20}}},fnMap:{0:{name:"changeType",decl:{start:{line:2,column:16},end:{line:2,column:26}},loc:{start:{line:2,column:43},end:{line:21,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:41},end:{line:4,column:42}},loc:{start:{line:4,column:59},end:{line:8,column:3}},line:4},2:{name:"(anonymous_2)",decl:{start:{line:10,column:42},end:{line:10,column:43}},loc:{start:{line:10,column:60},end:{line:14,column:3}},line:10},3:{name:"changeProperty",decl:{start:{line:22,column:16},end:{line:22,column:30}},loc:{start:{line:22,column:65},end:{line:60,column:1}},line:22},4:{name:"layerPrefix",decl:{start:{line:61,column:16},end:{line:61,column:27}},loc:{start:{line:61,column:34},end:{line:63,column:1}},line:61},5:{name:"findClosestCommonPrefix",decl:{start:{line:64,column:16},end:{line:64,column:39}},loc:{start:{line:64,column:53},end:{line:76,column:1}},line:64}},branchMap:{0:{loc:{start:{line:5,column:4},end:{line:7,column:5}},type:"if",locations:[{start:{line:5,column:4},end:{line:7,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},1:{loc:{start:{line:11,column:4},end:{line:13,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:13,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:11},2:{loc:{start:{line:23,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:59,column:3}},{start:{line:44,column:9},end:{line:59,column:3}}],line:23},3:{loc:{start:{line:24,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:43,column:5}},{start:{line:37,column:11},end:{line:43,column:5}}],line:24},4:{loc:{start:{line:33,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:33,column:6},end:{line:35,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},5:{loc:{start:{line:45,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:58,column:5}},{start:{line:53,column:11},end:{line:58,column:5}}],line:45},6:{loc:{start:{line:69,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:73,column:5}},{start:{line:71,column:11},end:{line:73,column:5}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layer.ts"],names:[],mappings:"AAAA,SAAQ,cAAa;AAGd,gBAAS,WAAW,OAA2B,SAAiB;AACrE,QAAM,oBAAiD,EAAE,GAAG,MAAM,MAAM;AACxE,SAAO,KAAK,iBAAiB,EAAE,QAAQ,kBAAgB;AACrD,QAAG,EAAE,gBAAgB,OAAO,WAAW,OAAO,IAAI;AAChD,aAAO,kBAAkB,YAAiD;AAAA,IAC5E;AAAA,EACF,CAAC;AAED,QAAM,qBAAmD,EAAE,GAAG,MAAM,OAAO;AAC3E,SAAO,KAAK,kBAAkB,EAAE,QAAQ,kBAAgB;AACtD,QAAG,EAAE,gBAAgB,OAAO,YAAY,OAAO,IAAI;AACjD,aAAO,mBAAmB,YAAkD;AAAA,IAC9E;AAAA,EACF,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACR;AACF;AAKO,gBAAS,eAAe,OAA2B,OAAwC,UAAkB,UAAe;AAEjI,MAAG,aAAa,QAAW;AACzB,QAAG,OAAO;AACR,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA;AAAA,QAEH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,QAChB;AAAA,MACF;AACA,aAAO,SAAS,KAAK,EAAE,QAAQ;AAG/B,UAAG,OAAO,KAAK,SAAS,KAAK,CAAC,EAAE,SAAS,GAAG;AAC1C,eAAO,SAAS,KAAK;AAAA,MACvB;AACA,aAAO;AAAA,IACT,OAAO;AACL,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA,MACL;AACA,aAAO,SAAS,QAAQ;AACxB,aAAO;AAAA,IACT;AAAA,EACF,OACK;AACH,QAAG,OAAO;AACR,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,UACd,CAAC,QAAQ,GAAG;AAAA,QACd;AAAA,MACF;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAAA,EACF;AACF;AAEO,gBAAS,YAAY,MAAc;AACxC,SAAO,KAAK,QAAQ,KAAK,GAAG,EAAE,QAAQ,KAAK,GAAG,EAAE,MAAM,GAAG,EAAE,CAAC;AAC9D;AAEO,gBAAS,wBAAwB,QAA8B,KAAa;AACjF,QAAM,qBAAqB,YAAY,OAAO,GAAG,EAAE,EAAE;AACrD,MAAI,aAAa;AACjB,WAAS,IAAI,KAAK,IAAI,GAAG,KAAK;AAC5B,UAAM,sBAAsB,YAAY,OAAO,IAAE,CAAC,EAAE,EAAE;AACtD,QAAG,wBAAwB,oBAAoB;AAC7C,mBAAa,IAAI;AAAA,IACnB,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8d7d71e3a97c0e4b8cc5fd0ca26b8fdf4aa2aa36"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Nr=function(){return l},l}Nr();function Yae(n,e){Nr().f[0]++;const t=(Nr().s[0]++,{...n.paint});Nr().s[1]++,Object.keys(t).forEach(r=>{Nr().f[1]++,Nr().s[2]++,r in Ua["paint_"+e]?Nr().b[0][1]++:(Nr().b[0][0]++,Nr().s[3]++,delete t[r])});const i=(Nr().s[4]++,{...n.layout});return Nr().s[5]++,Object.keys(i).forEach(r=>{Nr().f[2]++,Nr().s[6]++,r in Ua["layout_"+e]?Nr().b[1][1]++:(Nr().b[1][0]++,Nr().s[7]++,delete i[r])}),Nr().s[8]++,{...n,paint:t,layout:i,type:e}}function qae(n,e,t,i){if(Nr().f[3]++,Nr().s[9]++,i===void 0)if(Nr().b[2][0]++,Nr().s[10]++,e){Nr().b[3][0]++;const r=(Nr().s[11]++,{...n,[e]:{...n[e]}});return Nr().s[12]++,delete r[e][t],Nr().s[13]++,Object.keys(r[e]).length<1?(Nr().b[4][0]++,Nr().s[14]++,delete r[e]):Nr().b[4][1]++,Nr().s[15]++,r}else{Nr().b[3][1]++;const r=(Nr().s[16]++,{...n});return Nr().s[17]++,delete r[t],Nr().s[18]++,r}else return Nr().b[2][1]++,Nr().s[19]++,e?(Nr().b[5][0]++,Nr().s[20]++,{...n,[e]:{...n[e],[t]:i}}):(Nr().b[5][1]++,Nr().s[21]++,{...n,[t]:i})}function hv(n){return Nr().f[4]++,Nr().s[22]++,n.replace(" ","-").replace("_","-").split("-")[0]}function Hae(n,e){Nr().f[5]++;const t=(Nr().s[23]++,hv(n[e].id));let i=(Nr().s[24]++,e);Nr().s[25]++;for(let r=(Nr().s[26]++,e);r>0;r--){const a=(Nr().s[27]++,hv(n[r-1].id));if(Nr().s[28]++,a===t)Nr().b[6][0]++,Nr().s[29]++,i=r-1;else return Nr().b[6][1]++,Nr().s[30]++,i}return Nr().s[31]++,i}function an(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",e="49f79f034ad532e673048b301501dbd139f1b2d5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",statementMap:{0:{start:{line:23,column:24},end:{line:26,column:3}},1:{start:{line:30,column:4},end:{line:30,column:17}},2:{start:{line:31,column:4},end:{line:31,column:45}},3:{start:{line:32,column:4},end:{line:32,column:48}},4:{start:{line:33,column:4},end:{line:42,column:6}},5:{start:{line:45,column:4},end:{line:54,column:7}},6:{start:{line:56,column:17},end:{line:73,column:3}},7:{start:{line:57,column:14},end:{line:57,column:15}},8:{start:{line:58,column:22},end:{line:58,column:24}},9:{start:{line:59,column:4},end:{line:68,column:7}},10:{start:{line:60,column:26},end:{line:60,column:51}},11:{start:{line:61,column:24},end:{line:61,column:52}},12:{start:{line:62,column:6},end:{line:64,column:7}},13:{start:{line:63,column:8},end:{line:63,column:63}},14:{start:{line:65,column:6},end:{line:67,column:9}},15:{start:{line:66,column:8},end:{line:66,column:17}},16:{start:{line:69,column:4},end:{line:72,column:7}},17:{start:{line:75,column:19},end:{line:75,column:21}},18:{start:{line:76,column:41},end:{line:76,column:50}},19:{start:{line:77,column:4},end:{line:94,column:5}},20:{start:{line:77,column:17},end:{line:77,column:18}},21:{start:{line:78,column:24},end:{line:78,column:44}},22:{start:{line:79,column:28},end:{line:79,column:52}},23:{start:{line:80,column:6},end:{line:83,column:8}},24:{start:{line:84,column:20},end:{line:87,column:7}},25:{start:{line:88,column:6},end:{line:93,column:7}},26:{start:{line:89,column:26},end:{line:89,column:51}},27:{start:{line:90,column:8},end:{line:90,column:30}},28:{start:{line:92,column:8},end:{line:92,column:29}},29:{start:{line:95,column:4},end:{line:95,column:18}},30:{start:{line:98,column:22},end:{line:98,column:50}},31:{start:{line:99,column:22},end:{line:99,column:55}},32:{start:{line:100,column:4},end:{line:104,column:5}},33:{start:{line:101,column:6},end:{line:101,column:68}},34:{start:{line:103,column:6},end:{line:103,column:35}},35:{start:{line:105,column:4},end:{line:107,column:7}},36:{start:{line:110,column:22},end:{line:110,column:78}},37:{start:{line:111,column:4},end:{line:111,column:51}},38:{start:{line:114,column:4},end:{line:116,column:5}},39:{start:{line:115,column:6},end:{line:115,column:18}},40:{start:{line:118,column:18},end:{line:120,column:7}},41:{start:{line:121,column:6},end:{line:125,column:7}},42:{start:{line:122,column:8},end:{line:124,column:10}},43:{start:{line:126,column:6},end:{line:126,column:17}},44:{start:{line:128,column:24},end:{line:131,column:5}},45:{start:{line:133,column:18},end:{line:135,column:7}},46:{start:{line:136,column:6},end:{line:136,column:27}},47:{start:{line:137,column:6},end:{line:137,column:17}},48:{start:{line:139,column:23},end:{line:142,column:5}},49:{start:{line:143,column:25},end:{line:143,column:53}},50:{start:{line:144,column:4},end:{line:144,column:24}},51:{start:{line:147,column:4},end:{line:163,column:5}},52:{start:{line:148,column:31},end:{line:148,column:59}},53:{start:{line:149,column:6},end:{line:162,column:7}},54:{start:{line:150,column:23},end:{line:150,column:44}},55:{start:{line:151,column:24},end:{line:154,column:9}},56:{start:{line:155,column:25},end:{line:160,column:19}},57:{start:{line:156,column:10},end:{line:156,column:37}},58:{start:{line:157,column:10},end:{line:159,column:11}},59:{start:{line:158,column:12},end:{line:158,column:36}},60:{start:{line:161,column:8},end:{line:161,column:33}},61:{start:{line:166,column:22},end:{line:166,column:24}},62:{start:{line:167,column:14},end:{line:167,column:15}},63:{start:{line:168,column:26},end:{line:168,column:46}},64:{start:{line:169,column:4},end:{line:219,column:7}},65:{start:{line:170,column:26},end:{line:170,column:51}},66:{start:{line:171,column:6},end:{line:184,column:7}},67:{start:{line:172,column:36},end:{line:182,column:9}},68:{start:{line:176,column:47},end:{line:176,column:52}},69:{start:{line:183,column:8},end:{line:183,column:28}},70:{start:{line:185,column:6},end:{line:218,column:9}},71:{start:{line:186,column:25},end:{line:186,column:72}},72:{start:{line:187,column:27},end:{line:189,column:10}},73:{start:{line:188,column:10},end:{line:188,column:97}},74:{start:{line:190,column:32},end:{line:190,column:34}},75:{start:{line:191,column:8},end:{line:193,column:9}},76:{start:{line:192,column:10},end:{line:192,column:53}},77:{start:{line:194,column:41},end:{line:215,column:9}},78:{start:{line:216,column:8},end:{line:216,column:33}},79:{start:{line:217,column:8},end:{line:217,column:17}},80:{start:{line:220,column:14},end:{line:220,column:26}},81:{start:{line:221,column:4},end:{line:274,column:6}},82:{start:{line:277,column:27},end:{line:277,column:72}},83:{start:{line:278,column:18},end:{line:291,column:1}},84:{start:{line:279,column:18},end:{line:279,column:97}},85:{start:{line:280,column:24},end:{line:288,column:3}},86:{start:{line:281,column:29},end:{line:281,column:34}},87:{start:{line:282,column:4},end:{line:282,column:22}},88:{start:{line:282,column:15},end:{line:282,column:22}},89:{start:{line:283,column:21},end:{line:283,column:78}},90:{start:{line:283,column:55},end:{line:283,column:77}},91:{start:{line:284,column:21},end:{line:284,column:76}},92:{start:{line:284,column:55},end:{line:284,column:75}},93:{start:{line:285,column:4},end:{line:287,column:5}},94:{start:{line:286,column:6},end:{line:286,column:48}},95:{start:{line:289,column:19},end:{line:289,column:56}},96:{start:{line:289,column:47},end:{line:289,column:55}},97:{start:{line:290,column:2},end:{line:290,column:288}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:24,column:19},end:{line:24,column:20}},loc:{start:{line:24,column:25},end:{line:25,column:5}},line:24},1:{name:"(anonymous_1)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:21},end:{line:43,column:3}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:25},end:{line:55,column:3}},line:44},3:{name:"(anonymous_3)",decl:{start:{line:56,column:17},end:{line:56,column:18}},loc:{start:{line:56,column:23},end:{line:73,column:3}},line:56},4:{name:"(anonymous_4)",decl:{start:{line:59,column:33},end:{line:59,column:34}},loc:{start:{line:59,column:45},end:{line:68,column:5}},line:59},5:{name:"(anonymous_5)",decl:{start:{line:65,column:21},end:{line:65,column:22}},loc:{start:{line:65,column:33},end:{line:67,column:7}},line:65},6:{name:"(anonymous_6)",decl:{start:{line:74,column:2},end:{line:74,column:3}},loc:{start:{line:74,column:18},end:{line:96,column:3}},line:74},7:{name:"(anonymous_7)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:37},end:{line:108,column:3}},line:97},8:{name:"(anonymous_8)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:32},end:{line:112,column:3}},line:109},9:{name:"(anonymous_9)",decl:{start:{line:113,column:2},end:{line:113,column:3}},loc:{start:{line:113,column:46},end:{line:145,column:3}},line:113},10:{name:"getRequiredProps",decl:{start:{line:117,column:13},end:{line:117,column:29}},loc:{start:{line:117,column:37},end:{line:127,column:5}},line:117},11:{name:"withoutLayers",decl:{start:{line:132,column:13},end:{line:132,column:26}},loc:{start:{line:132,column:34},end:{line:138,column:5}},line:132},12:{name:"(anonymous_12)",decl:{start:{line:146,column:2},end:{line:146,column:3}},loc:{start:{line:146,column:32},end:{line:164,column:3}},line:146},13:{name:"(anonymous_13)",decl:{start:{line:155,column:50},end:{line:155,column:51}},loc:{start:{line:155,column:63},end:{line:160,column:9}},line:155},14:{name:"(anonymous_14)",decl:{start:{line:165,column:2},end:{line:165,column:3}},loc:{start:{line:165,column:11},end:{line:275,column:3}},line:165},15:{name:"(anonymous_15)",decl:{start:{line:169,column:26},end:{line:169,column:27}},loc:{start:{line:169,column:38},end:{line:219,column:5}},line:169},16:{name:"(anonymous_16)",decl:{start:{line:176,column:40},end:{line:176,column:41}},loc:{start:{line:176,column:47},end:{line:176,column:52}},line:176},17:{name:"(anonymous_17)",decl:{start:{line:185,column:21},end:{line:185,column:22}},loc:{start:{line:185,column:44},end:{line:218,column:7}},line:185},18:{name:"(anonymous_18)",decl:{start:{line:187,column:50},end:{line:187,column:51}},loc:{start:{line:187,column:61},end:{line:189,column:9}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:278,column:18},end:{line:278,column:19}},loc:{start:{line:278,column:29},end:{line:291,column:1}},line:278},20:{name:"(anonymous_20)",decl:{start:{line:280,column:24},end:{line:280,column:25}},loc:{start:{line:280,column:35},end:{line:288,column:3}},line:280},21:{name:"(anonymous_21)",decl:{start:{line:283,column:44},end:{line:283,column:45}},loc:{start:{line:283,column:55},end:{line:283,column:77}},line:283},22:{name:"(anonymous_22)",decl:{start:{line:284,column:44},end:{line:284,column:45}},loc:{start:{line:284,column:55},end:{line:284,column:75}},line:284},23:{name:"(anonymous_23)",decl:{start:{line:289,column:36},end:{line:289,column:37}},loc:{start:{line:289,column:47},end:{line:289,column:55}},line:289}},branchMap:{0:{loc:{start:{line:62,column:6},end:{line:64,column:7}},type:"if",locations:[{start:{line:62,column:6},end:{line:64,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},1:{loc:{start:{line:82,column:8},end:{line:82,column:79}},type:"cond-expr",locations:[{start:{line:82,column:41},end:{line:82,column:75}},{start:{line:82,column:78},end:{line:82,column:79}}],line:82},2:{loc:{start:{line:88,column:6},end:{line:93,column:7}},type:"if",locations:[{start:{line:88,column:6},end:{line:93,column:7}},{start:{line:91,column:13},end:{line:93,column:7}}],line:88},3:{loc:{start:{line:88,column:10},end:{line:88,column:81}},type:"binary-expr",locations:[{start:{line:88,column:10},end:{line:88,column:23}},{start:{line:88,column:27},end:{line:88,column:81}}],line:88},4:{loc:{start:{line:100,column:4},end:{line:104,column:5}},type:"if",locations:[{start:{line:100,column:4},end:{line:104,column:5}},{start:{line:102,column:11},end:{line:104,column:5}}],line:100},5:{loc:{start:{line:111,column:11},end:{line:111,column:50}},type:"cond-expr",locations:[{start:{line:111,column:34},end:{line:111,column:38}},{start:{line:111,column:41},end:{line:111,column:50}}],line:111},6:{loc:{start:{line:114,column:4},end:{line:116,column:5}},type:"if",locations:[{start:{line:114,column:4},end:{line:116,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:114},7:{loc:{start:{line:121,column:6},end:{line:125,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:125,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:121},8:{loc:{start:{line:143,column:27},end:{line:143,column:52}},type:"binary-expr",locations:[{start:{line:143,column:27},end:{line:143,column:38}},{start:{line:143,column:42},end:{line:143,column:52}}],line:143},9:{loc:{start:{line:147,column:4},end:{line:163,column:5}},type:"if",locations:[{start:{line:147,column:4},end:{line:163,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:147},10:{loc:{start:{line:149,column:6},end:{line:162,column:7}},type:"if",locations:[{start:{line:149,column:6},end:{line:162,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:149},11:{loc:{start:{line:149,column:10},end:{line:149,column:51}},type:"binary-expr",locations:[{start:{line:149,column:10},end:{line:149,column:26}},{start:{line:149,column:30},end:{line:149,column:51}}],line:149},12:{loc:{start:{line:157,column:10},end:{line:159,column:11}},type:"if",locations:[{start:{line:157,column:10},end:{line:159,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:157},13:{loc:{start:{line:157,column:14},end:{line:157,column:68}},type:"binary-expr",locations:[{start:{line:157,column:14},end:{line:157,column:32}},{start:{line:157,column:36},end:{line:157,column:68}}],line:157},14:{loc:{start:{line:171,column:6},end:{line:184,column:7}},type:"if",locations:[{start:{line:171,column:6},end:{line:184,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:171},15:{loc:{start:{line:178,column:22},end:{line:178,column:98}},type:"binary-expr",locations:[{start:{line:178,column:22},end:{line:178,column:57}},{start:{line:178,column:61},end:{line:178,column:98}}],line:178},16:{loc:{start:{line:188,column:17},end:{line:188,column:96}},type:"binary-expr",locations:[{start:{line:188,column:17},end:{line:188,column:29}},{start:{line:188,column:33},end:{line:188,column:62}},{start:{line:188,column:66},end:{line:188,column:96}}],line:188},17:{loc:{start:{line:191,column:8},end:{line:193,column:9}},type:"if",locations:[{start:{line:191,column:8},end:{line:193,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:191},18:{loc:{start:{line:198,column:52},end:{line:198,column:153}},type:"binary-expr",locations:[{start:{line:198,column:52},end:{line:198,column:69}},{start:{line:198,column:73},end:{line:198,column:112}},{start:{line:198,column:116},end:{line:198,column:153}}],line:198},19:{loc:{start:{line:199,column:53},end:{line:199,column:105}},type:"binary-expr",locations:[{start:{line:199,column:53},end:{line:199,column:84}},{start:{line:199,column:88},end:{line:199,column:105}}],line:199},20:{loc:{start:{line:206,column:25},end:{line:206,column:43}},type:"binary-expr",locations:[{start:{line:206,column:25},end:{line:206,column:37}},{start:{line:206,column:41},end:{line:206,column:43}}],line:206},21:{loc:{start:{line:251,column:26},end:{line:251,column:96}},type:"cond-expr",locations:[{start:{line:251,column:69},end:{line:251,column:82}},{start:{line:251,column:85},end:{line:251,column:96}}],line:251},22:{loc:{start:{line:282,column:4},end:{line:282,column:22}},type:"if",locations:[{start:{line:282,column:4},end:{line:282,column:22}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:282},23:{loc:{start:{line:285,column:4},end:{line:287,column:5}},type:"if",locations:[{start:{line:285,column:4},end:{line:287,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:285},24:{loc:{start:{line:285,column:8},end:{line:285,column:67}},type:"binary-expr",locations:[{start:{line:285,column:8},end:{line:285,column:23}},{start:{line:285,column:27},end:{line:285,column:42}},{start:{line:285,column:46},end:{line:285,column:67}}],line:285}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0,0],17:[0,0],18:[0,0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx"],names:[],mappings:"AA+NoB,cAoEd,YApEc;AA/NpB,OAAO,WAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,YAAY;AACnB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OAEK;AACP;AAAA,EACE;AAAA,EACA;AAAA,OACK;AAEP,OAAO,oBAAoB;AAC3B,OAAO,mBAAmB;AAC1B,OAAO,cAAc;AAGrB,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB,mBAAmB;AACrD,SAA0B,uBAAuB;AAwBjD,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,kBAAkB,MAAM,UAAU;AACvC,SAAK,qBAAqB,MAAM,UAAU;AAC1C,SAAK,QAAQ;AAAA,MACX,iBAAiB,CAAC;AAAA,MAClB,sBAAsB;AAAA,MACtB,MAAM;AAAA,QACJ,KAAK,CAAC,iBAAiB;AAAA,MACzB;AAAA,MACA,QAAQ;AAAA,QACN,KAAK;AAAA,MACP;AAAA,IACF;AAAA,EACF;AAAA,EAEA,YAAY,WAAmB;AAC7B,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,QACJ,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,iBAAiB;AAAA,MACjC;AAAA,MACA,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,KAAK,MAAM,OAAO,SAAS;AAAA,MAC3C;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,eAAe,MAAM;AACnB,QAAI,MAAM;AAEV,UAAM,YAAqC,CAAC;AAE5C,SAAK,cAAc,EAAE,QAAQ,YAAU;AACrC,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,YAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAG7C,UAAI,OAAO,SAAS,GAAG;AACrB,kBAAU,SAAS,IAAI,KAAK,MAAM;AAAA,MACpC;AAEA,aAAO,QAAQ,CAAC,WAAW;AACzB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,MACjB,sBAAsB,CAAC,KAAK,MAAM;AAAA,IACpC,CAAC;AAAA,EACH;AAAA,EAEA,gBAA0D;AACxD,UAAM,SAAS,CAAC;AAChB,UAAM,eAAe,oBAAI,IAAI;AAE7B,aAAS,IAAI,GAAG,IAAI,KAAK,MAAM,OAAO,QAAQ,KAAK;AACjD,YAAM,YAAY,KAAK,MAAM,OAAO,CAAC;AACrC,YAAM,gBAAgB,KAAK,MAAM,OAAO,IAAE,CAAC;AAC3C,mBAAa;AAAA,QAAI,UAAU;AAAA,QACzB,aAAa,IAAI,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,IAAI,IAAI;AAAA,MACxE;AACA,YAAM,QAAQ;AAAA,QACZ,GAAG;AAAA,QACH,KAAK,eAAe,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,CAAC;AAAA,MACpE;AACA,UAAG,iBAAiB,YAAY,cAAc,EAAE,KAAK,YAAY,MAAM,EAAE,GAAG;AAC1E,cAAM,YAAY,OAAO,OAAO,SAAS,CAAC;AAC1C,kBAAU,KAAK,KAAK;AAAA,MACtB,OAAO;AACL,eAAO,KAAK,CAAC,KAAK,CAAC;AAAA,MACrB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,iBAAiB,aAAqB,KAAa;AACjD,UAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAC7C,UAAM,YAAY,EAAE,GAAG,KAAK,MAAM,gBAAgB;AAClD,QAAG,aAAa,KAAK,MAAM,iBAAiB;AAC1C,gBAAU,SAAS,IAAI,CAAC,KAAK,MAAM,gBAAgB,SAAS;AAAA,IAC9D,OAAO;AACL,gBAAU,SAAS,IAAI;AAAA,IACzB;AACA,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,aAAqB,KAAa;AAC5C,UAAM,YAAY,KAAK,MAAM,gBAAgB,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG,CAAC;AACzE,WAAO,cAAc,SAAY,OAAO;AAAA,EAC1C;AAAA,EAEA,sBAAuB,WAAoC,WAAoC;AAE7F,QAAI,KAAK,UAAU,WAAW;AAC5B,aAAO;AAAA,IACT;AAIA,aAAS,iBAAiB,OAA2B;AACnD,YAAM,MAAiD;AAAA,QACrD,IAAI,MAAM;AAAA,MACZ;AAEA,UAAI,MAAM,QAAQ;AAChB,YAAI,SAAS;AAAA,UACX,YAAY,MAAM,OAAO;AAAA,QAC3B;AAAA,MACF;AACA,aAAO;AAAA,IACT;AACA,UAAM,cAAc,OAAO;AAAA,MACzB,UAAU,OAAO,IAAI,gBAAgB;AAAA,MACrC,KAAK,MAAM,OAAO,IAAI,gBAAgB;AAAA,IACxC;AAEA,aAAS,cAAc,OAAgC;AACrD,YAAM,MAAM;AAAA,QACV,GAAG;AAAA,MACL;AACA,aAAO,IAAI,QAAQ;AACnB,aAAO;AAAA,IACT;AAIA,UAAM,aAAa,OAAO;AAAA,MACxB,cAAc,KAAK,KAAK;AAAA,MACxB,cAAc,SAAS;AAAA,IACzB;AAEA,UAAM,eAAe,EAAE,eAAe;AACtC,WAAO;AAAA,EACT;AAAA,EAEA,mBAAoB,WAAoC;AACtD,QAAI,UAAU,uBAAuB,KAAK,MAAM,oBAAoB;AAClE,YAAM,mBAAmB,KAAK,gBAAgB;AAC9C,UAAI,oBAAoB,iBAAiB,MAAM;AAC7C,cAAM,SAAS,iBAAiB;AAChC,cAAM,UAAU;AAAA,UACd,MAAM,KAAK,mBAAmB;AAAA,UAC9B,WAAW;AAAA,QACb;AACA,cAAM,WAAW,IAAI,qBAAqB,aAAW;AACnD,mBAAS,UAAU,MAAM;AACzB,cAAI,QAAQ,SAAS,KAAK,QAAQ,CAAC,EAAE,oBAAoB,GAAG;AAC1D,mBAAO,eAAe;AAAA,UACxB;AAAA,QACF,GAAG,OAAO;AAEV,iBAAS,QAAQ,MAAM;AAAA,MACzB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AAEP,UAAM,YAA2B,CAAC;AAClC,QAAI,MAAM;AACV,UAAM,gBAAgB,KAAK,cAAc;AACzC,kBAAc,QAAQ,YAAU;AAC9B,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,UAAG,OAAO,SAAS,GAAG;AACpB,cAAM,MAAM;AAAA,UAAC;AAAA;AAAA,YACX,eAAa,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAAA,YACxC,iBAAe,OAAO,IAAI,OAAK,EAAE,GAAG,EAAE,KAAK,GAAG;AAAA,YAE9C,OAAO;AAAA,YACP,UAAU,CAAC,KAAK,YAAY,aAAa,GAAG,KAAK,QAAQ,KAAK,MAAM;AAAA,YACpE,gBAAgB,KAAK,iBAAiB,KAAK,MAAM,aAAa,GAAG;AAAA;AAAA,UAH5D,SAAS,WAAW,IAAI,GAAG;AAAA,QAIlC;AACA,kBAAU,KAAK,GAAG;AAAA,MACpB;AAEA,aAAO,QAAQ,CAAC,OAAO,eAAe;AACpC,cAAM,WAAW,wBAAwB,KAAK,MAAM,QAAQ,GAAG;AAE/D,cAAM,aAAa,KAAK,MAAM,OAAO,KAAK,WAAS;AACjD,iBACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS;AAAA,QAE/B,CAAC;AAED,cAAM,kBAAgD,CAAC;AACvD,YAAI,QAAQ,KAAK,MAAM,oBAAoB;AACzC,0BAAgB,MAAM,KAAK;AAAA,QAC7B;AAEA,cAAM,WAAW;AAAA,UAAC;AAAA;AAAA,YAChB,WAAW,WAAW;AAAA,cACpB,sCAAsC,OAAO,SAAS,KAAK,KAAK,YAAY,aAAa,QAAQ,KAAK,QAAQ,KAAK,MAAM;AAAA,cACzH,uCAAuC,cAAc,OAAO,SAAS,KAAK,OAAO,SAAS;AAAA,cAC1F,mCAAmC,CAAC,CAAC;AAAA,YACvC,CAAC;AAAA,YAED,IAAI,MAAM;AAAA,YACV,SAAS,MAAM;AAAA,YACf,YAAY;AAAA,YACZ,WAAW,MAAM;AAAA,YACjB,aAAa,MAAM,UAAU,CAAC,GAAG;AAAA,YACjC,YAAY,QAAQ,KAAK,MAAM;AAAA,YAC/B,eAAe,KAAK,MAAM;AAAA,YAC1B,gBAAgB,KAAK,MAAM,gBAAgB,KAAK,IAAI;AAAA,YACpD,aAAa,KAAK,MAAM,YAAY,KAAK,IAAI;AAAA,YAC7C,yBAAyB,KAAK,MAAM,wBAAwB,KAAK,IAAI;AAAA,YACpE,GAAG;AAAA;AAAA,UAXC,MAAM;AAAA,QAYb;AACA,kBAAU,KAAK,QAAQ;AACvB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,UAAM,IAAI,KAAK,MAAM;AAErB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAY;AAAA,QACZ,MAAK;AAAA,QACL,cAAY,EAAE,aAAa;AAAA,QAC3B,KAAK,KAAK;AAAA,QAEV;AAAA;AAAA,YAAC;AAAA;AAAA,cAEC,QAAQ,KAAK,MAAM;AAAA,cACnB,SAAS,KAAK,MAAM;AAAA,cACpB,QAAQ,KAAK,MAAM,OAAO;AAAA,cAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,cAC/C,gBAAgB,KAAK,MAAM;AAAA;AAAA,YALtB,KAAK,MAAM,KAAK;AAAA,UAMvB;AAAA,UACA,qBAAC,YAAO,WAAU,8BAChB;AAAA,gCAAC,UAAK,WAAU,oCAAoC,YAAE,QAAQ,GAAE;AAAA,YAChE,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,IAAG;AAAA,gBACH,eAAY;AAAA,gBACZ,SAAS,KAAK;AAAA,gBACd,WAAU;AAAA,gBACT,eAAK,MAAM,yBAAyB,OACnC,EAAE,UAAU,IAEZ,EAAE,QAAQ;AAAA;AAAA,YAEd,GACF,GACF;AAAA,YACA,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,SAAS,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,gBAC1C,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACT,YAAE,WAAW;AAAA;AAAA,YAChB,GACF,GACF;AAAA,aACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,MAAK;AAAA,cACL,cAAY,EAAE,aAAa;AAAA,cAE3B,8BAAC,QAAG,WAAU,iCACX,qBACH;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AAMvE,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,UAAU,WAAW,UAAU,eAAe,EAAE,sBAAsB,EAAE,UAAU,EAAE,EAAE,CAAC,CAAC;AAE9F,QAAM,gBAAgB,CAAC,UAAwB;AAC7C,UAAM,EAAC,QAAQ,KAAI,IAAI;AACvB,QAAI,CAAC,KAAM;AAEX,UAAM,WAAW,MAAM,OAAO,UAAU,WAAS,MAAM,OAAO,OAAO,EAAE;AACvE,UAAM,WAAW,MAAM,OAAO,UAAU,WAAS,MAAM,OAAO,KAAK,EAAE;AAErE,QAAI,aAAa,MAAM,aAAa,MAAM,aAAa,UAAU;AAC/D,YAAM,YAAY,EAAC,UAAU,SAAQ,CAAC;AAAA,IACxC;AAAA,EACF;AAEA,QAAM,WAAW,MAAM,OAAO,IAAI,WAAS,MAAM,EAAE;AAEnD,SACE,oBAAC,cAAW,SAAkB,oBAAoB,eAAe,WAAW,eAC1E,8BAAC,mBAAgB,OAAO,UAAU,UAAU,6BAC1C,8BAAC,sBAAoB,GAAG,OAAO,GACjC,GACF;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"49f79f034ad532e673048b301501dbd139f1b2d5"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return an=function(){return l},l}an();class Vae extends ni.Component{static defaultProps=(an().s[0]++,{onLayerSelect:()=>{an().f[0]++}});selectedItemRef;scrollContainerRef;constructor(e){an().f[1]++,an().s[1]++,super(e),an().s[2]++,this.selectedItemRef=ni.createRef(),an().s[3]++,this.scrollContainerRef=ni.createRef(),an().s[4]++,this.state={collapsedGroups:{},areAllGroupsExpanded:!1,keys:{add:+Lv()},isOpen:{add:!1}}}toggleModal(e){an().f[2]++,an().s[5]++,this.setState({keys:{...this.state.keys,[e]:+Lv()},isOpen:{...this.state.isOpen,[e]:!this.state.isOpen[e]}})}toggleLayers=(an().s[6]++,()=>{an().f[3]++;let e=(an().s[7]++,0);const t=(an().s[8]++,{});an().s[9]++,this.groupedLayers().forEach(i=>{an().f[4]++;const r=(an().s[10]++,hv(i[0].id)),a=(an().s[11]++,[r,e].join("-"));an().s[12]++,i.length>1?(an().b[0][0]++,an().s[13]++,t[a]=this.state.areAllGroupsExpanded):an().b[0][1]++,an().s[14]++,i.forEach(l=>{an().f[5]++,an().s[15]++,e+=1})}),an().s[16]++,this.setState({collapsedGroups:t,areAllGroupsExpanded:!this.state.areAllGroupsExpanded})});groupedLayers(){an().f[6]++;const e=(an().s[17]++,[]),t=(an().s[18]++,new Map);an().s[19]++;for(let i=(an().s[20]++,0);i<this.props.layers.length;i++){const r=(an().s[21]++,this.props.layers[i]),a=(an().s[22]++,this.props.layers[i-1]);an().s[23]++,t.set(r.id,t.has(r.id)?(an().b[1][0]++,t.get(r.id)+1):(an().b[1][1]++,0));const l=(an().s[24]++,{...r,key:`layers-list-${r.id}-${t.get(r.id)}`});if(an().s[25]++,an().b[3][0]++,a&&(an().b[3][1]++,hv(a.id)==hv(l.id))){an().b[2][0]++;const o=(an().s[26]++,e[e.length-1]);an().s[27]++,o.push(l)}else an().b[2][1]++,an().s[28]++,e.push([l])}return an().s[29]++,e}toggleLayerGroup(e,t){an().f[7]++;const i=(an().s[30]++,[e,t].join("-")),r=(an().s[31]++,{...this.state.collapsedGroups});an().s[32]++,i in this.state.collapsedGroups?(an().b[4][0]++,an().s[33]++,r[i]=!this.state.collapsedGroups[i]):(an().b[4][1]++,an().s[34]++,r[i]=!1),an().s[35]++,this.setState({collapsedGroups:r})}isCollapsed(e,t){an().f[8]++;const i=(an().s[36]++,this.state.collapsedGroups[[e,t].join("-")]);return an().s[37]++,i===void 0?(an().b[5][0]++,!0):(an().b[5][1]++,i)}shouldComponentUpdate(e,t){if(an().f[9]++,an().s[38]++,this.state!==t)return an().b[6][0]++,an().s[39]++,!0;an().b[6][1]++;function i(m){an().f[10]++;const C=(an().s[40]++,{id:m.id});return an().s[41]++,m.layout?(an().b[7][0]++,an().s[42]++,C.layout={visibility:m.layout.visibility}):an().b[7][1]++,an().s[43]++,C}const r=(an().s[44]++,A6.isEqual(e.layers.map(i),this.props.layers.map(i)));function a(m){an().f[11]++;const C=(an().s[45]++,{...m});return an().s[46]++,delete C.layers,an().s[47]++,C}const l=(an().s[48]++,A6.isEqual(a(this.props),a(e))),o=(an().s[49]++,an().b[8][0]++,!(r&&(an().b[8][1]++,l)));return an().s[50]++,o}componentDidUpdate(e){if(an().f[12]++,an().s[51]++,e.selectedLayerIndex!==this.props.selectedLayerIndex){an().b[9][0]++;const t=(an().s[52]++,this.selectedItemRef.current);if(an().s[53]++,an().b[11][0]++,t&&(an().b[11][1]++,t.node)){an().b[10][0]++;const i=(an().s[54]++,t.node),r=(an().s[55]++,{root:this.scrollContainerRef.current,threshold:1}),a=(an().s[56]++,new IntersectionObserver(l=>{an().f[13]++,an().s[57]++,a.unobserve(i),an().s[58]++,an().b[13][0]++,l.length>0&&(an().b[13][1]++,l[0].intersectionRatio<1)?(an().b[12][0]++,an().s[59]++,i.scrollIntoView()):an().b[12][1]++},r));an().s[60]++,a.observe(i)}else an().b[10][1]++}else an().b[9][1]++}render(){an().f[14]++;const e=(an().s[61]++,[]);let t=(an().s[62]++,0);const i=(an().s[63]++,this.groupedLayers());an().s[64]++,i.forEach(a=>{an().f[15]++;const l=(an().s[65]++,hv(a[0].id));if(an().s[66]++,a.length>1){an().b[14][0]++;const o=(an().s[67]++,ce.jsx(foe,{"data-wd-key":[l,t].join("-"),"aria-controls":a.map(m=>(an().f[16]++,an().s[68]++,m.key)).join(" "),title:l,isActive:(an().b[15][0]++,!this.isCollapsed(l,t)||(an().b[15][1]++,t===this.props.selectedLayerIndex)),onActiveToggle:this.toggleLayerGroup.bind(this,l,t)},`group-${l}-${t}`));an().s[69]++,e.push(o)}else an().b[14][1]++;an().s[70]++,a.forEach((o,m)=>{an().f[17]++;const C=(an().s[71]++,Hae(this.props.layers,t)),S=(an().s[72]++,this.props.errors.find(K=>(an().f[18]++,an().s[73]++,an().b[16][0]++,K.parsed&&(an().b[16][1]++,K.parsed.type==="layer")&&(an().b[16][2]++,K.parsed.data.index==t)))),O=(an().s[74]++,{});an().s[75]++,t===this.props.selectedLayerIndex?(an().b[17][0]++,an().s[76]++,O.ref=this.selectedItemRef):an().b[17][1]++;const U=(an().s[77]++,ce.jsx(poe,{className:e0({"maputnik-layer-list-item-collapsed":(an().b[18][0]++,a.length>1&&(an().b[18][1]++,this.isCollapsed(l,C))&&(an().b[18][2]++,t!==this.props.selectedLayerIndex)),"maputnik-layer-list-item-group-last":(an().b[19][0]++,m==a.length-1&&(an().b[19][1]++,a.length>1)),"maputnik-layer-list-item--error":!!S}),id:o.key,layerId:o.id,layerIndex:t,layerType:o.type,visibility:(an().b[20][0]++,o.layout||(an().b[20][1]++,{})).visibility,isSelected:t===this.props.selectedLayerIndex,onLayerSelect:this.props.onLayerSelect,onLayerDestroy:this.props.onLayerDestroy?.bind(this),onLayerCopy:this.props.onLayerCopy.bind(this),onLayerVisibilityToggle:this.props.onLayerVisibilityToggle.bind(this),...O},o.key));an().s[78]++,e.push(U),an().s[79]++,t+=1})});const r=(an().s[80]++,this.props.t);return an().s[81]++,ce.jsxs("section",{className:"maputnik-layer-list","data-wd-key":"layer-list",role:"complementary","aria-label":r("Layers list"),ref:this.scrollContainerRef,children:[ce.jsx(Qae,{layers:this.props.layers,sources:this.props.sources,isOpen:this.state.isOpen.add,onOpenToggle:this.toggleModal.bind(this,"add"),onLayersChange:this.props.onLayersChange},this.state.keys.add),ce.jsxs("header",{className:"maputnik-layer-list-header",children:[ce.jsx("span",{className:"maputnik-layer-list-header-title",children:r("Layers")}),ce.jsx("span",{className:"maputnik-space"}),ce.jsx("div",{className:"maputnik-default-property",children:ce.jsx("div",{className:"maputnik-multibutton",children:ce.jsx("button",{id:"skip-target-layer-list","data-wd-key":"skip-target-layer-list",onClick:this.toggleLayers,className:"maputnik-button",children:this.state.areAllGroupsExpanded===!0?(an().b[21][0]++,r("Collapse")):(an().b[21][1]++,r("Expand"))})})}),ce.jsx("div",{className:"maputnik-default-property",children:ce.jsx("div",{className:"maputnik-multibutton",children:ce.jsx("button",{onClick:this.toggleModal.bind(this,"add"),"data-wd-key":"layer-list:add-layer",className:"maputnik-button maputnik-button-selected",children:r("Add Layer")})})})]}),ce.jsx("div",{role:"navigation","aria-label":r("Layers list"),children:ce.jsx("ul",{className:"maputnik-layer-list-container",children:e})})]})}}const $ae=(an().s[82]++,ss()(Vae));an().s[83]++;const Zae=n=>{an().f[19]++;const e=(an().s[84]++,Nie(zie(u8,{activationConstraint:{distance:5}})));an().s[85]++;const t=r=>{an().f[20]++;const{active:a,over:l}=(an().s[86]++,r);if(an().s[87]++,l)an().b[22][1]++;else{an().b[22][0]++,an().s[88]++;return}const o=(an().s[89]++,n.layers.findIndex(C=>(an().f[21]++,an().s[90]++,C.id===a.id))),m=(an().s[91]++,n.layers.findIndex(C=>(an().f[22]++,an().s[92]++,C.id===l.id)));an().s[93]++,an().b[24][0]++,o!==-1&&(an().b[24][1]++,m!==-1)&&(an().b[24][2]++,o!==m)?(an().b[23][0]++,an().s[94]++,n.onMoveLayer({oldIndex:o,newIndex:m})):an().b[23][1]++},i=(an().s[95]++,n.layers.map(r=>(an().f[23]++,an().s[96]++,r.id)));return an().s[97]++,ce.jsx(Qre,{sensors:e,collisionDetection:Yie,onDragEnd:t,children:ce.jsx(roe,{items:i,strategy:noe,children:ce.jsx($ae,{...n})})})};var IM,YT;function nG(){if(YT)return IM;YT=1;var n={},e="a menu outside a mounted Wrapper with an id, or a menu that does not exist";function t(l,o){n[l]=o}function i(l){delete n[l]}function r(l,o){var m=n[l];if(!m)throw new Error("Cannot open "+e);m.openMenu(o)}function a(l,o){var m=n[l];if(!m)throw new Error("Cannot close "+e);m.closeMenu(o)}return IM={registerManager:t,unregisterManager:i,openMenu:r,closeMenu:a},IM}var TM,qT;function Xae(){if(qT)return TM;qT=1;function n(r){r=r||{};var a=r.keybindings||{};this._settings={keybindings:{next:a.next||{keyCode:40},prev:a.prev||{keyCode:38},first:a.first,last:a.last},wrap:r.wrap,stringSearch:r.stringSearch,stringSearchDelay:800},this._keybindingsLookup=[];var l,o;for(l in this._settings.keybindings)o=this._settings.keybindings[l],o&&[].concat(o).forEach((function(m){m.metaKey=m.metaKey||!1,m.ctrlKey=m.ctrlKey||!1,m.altKey=m.altKey||!1,m.shiftKey=m.shiftKey||!1,this._keybindingsLookup.push({action:l,eventMatcher:m})}).bind(this));this._searchString="",this._members=[],r.members&&this.setMembers(r.members),this._boundHandleKeydownEvent=this._handleKeydownEvent.bind(this)}n.prototype.activate=function(){return document.addEventListener("keydown",this._boundHandleKeydownEvent,!0),this},n.prototype.deactivate=function(){return document.removeEventListener("keydown",this._boundHandleKeydownEvent,!0),this._clearSearchStringRefreshTimer(),this},n.prototype._handleKeydownEvent=function(r){var a=this._getActiveElementIndex();if(a!==-1){var l=!1;this._keybindingsLookup.forEach((function(o){if(e(o.eventMatcher,r))switch(l=!0,r.preventDefault(),o.action){case"next":this.moveFocusForward();break;case"prev":this.moveFocusBack();break;case"first":this.moveFocusToFirst();break;case"last":this.moveFocusToLast();break;default:return}}).bind(this)),l||this._handleUnboundKey(r)}},n.prototype.moveFocusForward=function(){var r=this._getActiveElementIndex(),a;return r<this._members.length-1?a=r+1:this._settings.wrap?a=0:a=r,this.focusNodeAtIndex(a),a},n.prototype.moveFocusBack=function(){var r=this._getActiveElementIndex(),a;return r>0?a=r-1:this._settings.wrap?a=this._members.length-1:a=r,this.focusNodeAtIndex(a),a},n.prototype.moveFocusToFirst=function(){this.focusNodeAtIndex(0)},n.prototype.moveFocusToLast=function(){this.focusNodeAtIndex(this._members.length-1)},n.prototype._handleUnboundKey=function(r){if(this._settings.stringSearch){if(this._searchString!==""&&(r.key===" "||r.keyCode===32))return r.preventDefault(),-1;if(!t(r.keyCode)||r.ctrlKey||r.metaKey||r.altKey)return-1;r.preventDefault(),this._addToSearchString(String.fromCharCode(r.keyCode)),this._runStringSearch()}},n.prototype._clearSearchString=function(){this._searchString=""},n.prototype._addToSearchString=function(r){this._searchString+=r.toLowerCase()},n.prototype._startSearchStringRefreshTimer=function(){var r=this;this._clearSearchStringRefreshTimer(),this._stringSearchTimer=setTimeout(function(){r._clearSearchString()},this._settings.stringSearchDelay)},n.prototype._clearSearchStringRefreshTimer=function(){clearTimeout(this._stringSearchTimer)},n.prototype._runStringSearch=function(){this._startSearchStringRefreshTimer(),this.moveFocusByString(this._searchString)},n.prototype.moveFocusByString=function(r){for(var a,l=0,o=this._members.length;l<o;l++)if(a=this._members[l],!!a.text&&a.text.indexOf(r)===0)return i(a.node)},n.prototype._findIndexOfNode=function(r){for(var a=0,l=this._members.length;a<l;a++)if(this._members[a].node===r)return a;return-1},n.prototype._getActiveElementIndex=function(){return this._findIndexOfNode(document.activeElement)},n.prototype.focusNodeAtIndex=function(r){var a=this._members[r];return a&&i(a.node),this},n.prototype.addMember=function(r,a){var l=r.node||r,o=r.text||l.getAttribute("data-focus-group-text")||l.textContent||"";this._checkNode(l);var m=o.replace(/[\W_]/g,"").toLowerCase(),C={node:l,text:m};return a!=null?this._members.splice(a,0,C):this._members.push(C),this},n.prototype.removeMember=function(r){var a=typeof r=="number"?r:this._findIndexOfNode(r);if(a!==-1)return this._members.splice(a,1),this},n.prototype.clearMembers=function(){return this._members=[],this},n.prototype.setMembers=function(r){this.clearMembers();for(var a=0,l=r.length;a<l;a++)this.addMember(r[a]);return this},n.prototype.getMembers=function(){return this._members},n.prototype._checkNode=function(r){if(!r.nodeType||r.nodeType!==window.Node.ELEMENT_NODE)throw new Error("focus-group: only DOM nodes allowed");return r};function e(r,a){for(var l in r)if(a[l]!==void 0&&r[l]!==a[l])return!1;return!0}function t(r){return r>=65&&r<=90}function i(r){!r||!r.focus||(r.focus(),r.tagName.toLowerCase()==="input"&&r.select())}return TM=function(a){return new n(a)},TM}var kM,HT;function Jae(){if(HT)return kM;HT=1;var n=Xae(),e=nG(),t={wrap:!0,stringSearch:!0},i={init:function(m){this.updateOptions(m),this.handleBlur=r.bind(this),this.handleSelection=a.bind(this),this.handleMenuKey=l.bind(this),this.focusGroup=n(t),this.button=null,this.menu=null,this.isOpen=!1},updateOptions:function(m){var C=this.options;this.options=m||this.options||{},typeof this.options.closeOnSelection>"u"&&(this.options.closeOnSelection=!0),typeof this.options.closeOnBlur>"u"&&(this.options.closeOnBlur=!0),this.options.id&&e.registerManager(this.options.id,this),C&&C.id&&C.id!==this.options.id&&e.unregisterManager(this.options.id,this)},focusItem:function(m){this.focusGroup.focusNodeAtIndex(m)},addItem:function(m){this.focusGroup.addMember(m)},clearItems:function(){this.focusGroup.clearMembers()},handleButtonNonArrowKey:function(m){this.focusGroup._handleUnboundKey(m)},destroy:function(){this.button=null,this.menu=null,this.focusGroup.deactivate(),clearTimeout(this.blurTimer),clearTimeout(this.moveFocusTimer)},update:function(){this.menu.setState({isOpen:this.isOpen}),this.button.setState({menuOpen:this.isOpen}),this.options.onMenuToggle&&this.options.onMenuToggle({isOpen:this.isOpen})},openMenu:function(m){if(!this.isOpen&&(m=m||{},m.focusMenu===void 0&&(m.focusMenu=!0),this.isOpen=!0,this.update(),this.focusGroup.activate(),m.focusMenu)){var C=this;this.moveFocusTimer=setTimeout(function(){C.focusItem(0)},0)}},closeMenu:function(m){this.isOpen&&(m=m||{},this.isOpen=!1,this.update(),m.focusButton&&this.button.ref.current.focus())},toggleMenu:function(m,C){m=m||{},C=C||{},this.isOpen?this.closeMenu(m):this.openMenu(C)}};function r(){var o=this;o.blurTimer=setTimeout(function(){if(o.button){var m=o.button.ref.current;if(m){var C=m.ownerDocument.activeElement;if(!(m&&C===m)){var S=o.menu.ref.current;if(S===C){o.focusItem(0);return}S&&S.contains(C)||o.isOpen&&o.closeMenu({focusButton:!1})}}}},0)}function a(o,m){this.options.closeOnSelection&&this.closeMenu({focusButton:!0}),this.options.onSelection&&this.options.onSelection(o,m)}function l(o){if(this.isOpen)switch(o.key){case"Escape":o.preventDefault(),this.closeMenu({focusButton:!0});break;case"Home":o.preventDefault(),this.focusGroup.moveFocusToFirst();break;case"End":o.preventDefault(),this.focusGroup.moveFocusToLast();break}}return kM=function(o){var m=Object.create(i);return m.init(o),m},kM}var DM,VT;function I2(){if(VT)return DM;VT=1;var n=pl(),e=n.createContext();return DM=e,DM}var RM,$T;function T2(){if($T)return RM;$T=1;var n=i0();return RM={refType:n.oneOfType([n.func,n.shape({current:n.elementType})])},RM}var PM,ZT;function k2(){return ZT||(ZT=1,PM=function(n,e,t){t=t||{};for(var i in e)e.hasOwnProperty(i)&&(t[i]||(n[i]=e[i]))}),PM}var KM,XT;function ese(){if(XT)return KM;XT=1;function n(K,z){if(!(K instanceof z))throw new TypeError("Cannot call a class as a function")}function e(K,z){if(!K)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:K}function t(K,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);K.prototype=Object.create(z&&z.prototype,{constructor:{value:K,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(K,z):K.__proto__=z)}var i=pl(),r=i0(),a=Jae(),l=I2(),o=T2(),m=o.refType,C=k2(),S={children:r.node.isRequired,forwardedRef:m,onMenuToggle:r.func,onSelection:r.func,closeOnSelection:r.bool,closeOnBlur:r.bool,tag:r.string},O=function(z){return{onMenuToggle:z.onMenuToggle,onSelection:z.onSelection,closeOnSelection:z.closeOnSelection,closeOnBlur:z.closeOnBlur,id:z.id}},U=function(K){t(z,K);function z(j){n(this,z);var Q=e(this,K.call(this,j));return Q.manager=a(O(j)),Q}return z.prototype.componentDidUpdate=function(){this.manager.updateOptions(O(this.props))},z.prototype.render=function(){var Q={};return C(Q,this.props,S),i.createElement(l.Provider,{value:this.manager},i.createElement(this.props.tag,Q,this.props.children))},z}(i.Component);return U.propTypes=S,U.defaultProps={tag:"div"},KM=i.forwardRef(function(K,z){var j={forwardedRef:z};return C(j,K,{children:S.children,forwardedRef:S.forwardedRef}),C(j,{forwardedRef:z}),i.createElement(U,j,K.children)}),KM}var UM,JT;function tse(){if(JT)return UM;JT=1;function n(U,K){if(!(U instanceof K))throw new TypeError("Cannot call a class as a function")}function e(U,K){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return K&&(typeof K=="object"||typeof K=="function")?K:U}function t(U,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof K);U.prototype=Object.create(K&&K.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),K&&(Object.setPrototypeOf?Object.setPrototypeOf(U,K):U.__proto__=K)}var i=pl(),r=i0(),a=I2(),l=T2(),o=l.refType,m=k2(),C={ambManager:r.object.isRequired,children:r.node.isRequired,disabled:r.bool,forwardedRef:o,tag:r.string},S=function(){return["button","fieldset","input","optgroup","option","select","textarea"]},O=function(U){t(K,U);function K(){var z,j,Q;n(this,K);for(var ee=arguments.length,V=Array(ee),ae=0;ae<ee;ae++)V[ae]=arguments[ae];return Q=(z=(j=e(this,U.call.apply(U,[this].concat(V))),j),j.ref=i.createRef(),j.handleKeyDown=function(ne){if(!j.props.disabled){var Z=j.props.ambManager;switch(ne.key){case"ArrowDown":ne.preventDefault(),Z.isOpen?Z.focusItem(0):Z.openMenu();break;case"Enter":case" ":ne.preventDefault(),Z.toggleMenu();break;case"Escape":Z.handleMenuKey(ne);break;default:Z.handleButtonNonArrowKey(ne)}}},j.handleClick=function(){j.props.disabled||j.props.ambManager.toggleMenu({},{focusMenu:!1})},j.setRef=function(ne){j.ref.current=ne,typeof j.props.forwardedRef=="function"?j.props.forwardedRef(ne):j.props.forwardedRef&&(j.props.forwardedRef.current=ne)},z),e(j,Q)}return K.prototype.componentDidMount=function(){this.props.ambManager.button=this},K.prototype.componentWillUnmount=function(){this.props.ambManager.destroy()},K.prototype.render=function(){var j=this.props,Q=this.props.ambManager,ee={role:"button",tabIndex:j.disabled?"":"0","aria-haspopup":!0,"aria-expanded":Q.isOpen,"aria-disabled":j.disabled,onKeyDown:this.handleKeyDown,onClick:this.handleClick},V={};return m(V,C),S().indexOf(j.tag)>=0&&delete V.disabled,Q.options.closeOnBlur&&(ee.onBlur=Q.handleBlur),m(ee,j,V),m(ee,{ref:this.setRef}),i.createElement(j.tag,ee,j.children)},K}(i.Component);return O.propTypes=C,O.defaultProps={tag:"span"},UM=i.forwardRef(function(U,K){return i.createElement(a.Consumer,null,function(z){var j={ambManager:z,forwardedRef:K};return m(j,U,{ambManager:C.ambManager,children:C.children,forwardedRef:C.forwardedRef}),i.createElement(O,j,U.children)})}),UM}var LM,ek;function nse(){return ek||(ek=1,LM=function(e,t,i){var r=0,a=0,l=!1,o=!1,m=!1;e.addEventListener("click",C,i),e.addEventListener("touchstart",S,i);function C(Q){m||t(Q)}function S(Q){m=!0,!l&&(l=!0,e.addEventListener("touchmove",O,i),e.addEventListener("touchend",U,i),e.addEventListener("touchcancel",K,i),o=!1,r=Q.touches[0].clientX,a=Q.touches[0].clientY)}function O(Q){o||Math.abs(Q.touches[0].clientX-r)<=10&&Math.abs(Q.touches[0].clientY-a)<=10||(o=!0)}function U(Q){l=!1,z(),o||t(Q)}function K(){l=!1,o=!1,r=0,a=0}function z(){e.removeEventListener("touchmove",O,i),e.removeEventListener("touchend",U,i),e.removeEventListener("touchcancel",K,i)}function j(){e.removeEventListener("click",C,i),e.removeEventListener("touchstart",S,i),z()}return{remove:j}}),LM}var FM,tk;function ise(){if(tk)return FM;tk=1;function n(U,K){if(!(U instanceof K))throw new TypeError("Cannot call a class as a function")}function e(U,K){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return K&&(typeof K=="object"||typeof K=="function")?K:U}function t(U,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof K);U.prototype=Object.create(K&&K.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),K&&(Object.setPrototypeOf?Object.setPrototypeOf(U,K):U.__proto__=K)}var i=pl(),r=i0(),a=nse(),l=I2(),o=T2(),m=o.refType,C=k2(),S={ambManager:r.object.isRequired,children:r.oneOfType([r.func,r.node]).isRequired,forwardedRef:m,tag:r.string},O=function(U){t(K,U);function K(){var z,j,Q;n(this,K);for(var ee=arguments.length,V=Array(ee),ae=0;ae<ee;ae++)V[ae]=arguments[ae];return Q=(z=(j=e(this,U.call.apply(U,[this].concat(V))),j),j.ref=i.createRef(),j.addTapListener=function(){var ne=j.ref.current;if(ne){var Z=ne.ownerDocument;Z&&(j.tapListener=a(Z.documentElement,j.handleTap))}},j.handleTap=function(ne){j.ref.current.contains(ne.target)||j.props.ambManager.button.ref.current.contains(ne.target)||j.props.ambManager.closeMenu()},j.setRef=function(ne){j.ref.current=ne,typeof j.props.forwardedRef=="function"?j.props.forwardedRef(ne):j.props.forwardedRef&&(j.props.forwardedRef.current=ne)},z),e(j,Q)}return K.prototype.componentDidMount=function(){this.props.ambManager.menu=this},K.prototype.componentDidUpdate=function(){var j=this.props.ambManager;j.options.closeOnBlur&&(j.isOpen&&!this.tapListener?this.addTapListener():!j.isOpen&&this.tapListener&&(this.tapListener.remove(),delete this.tapListener),j.isOpen||j.clearItems())},K.prototype.componentWillUnmount=function(){this.tapListener&&this.tapListener.remove(),this.props.ambManager.destroy()},K.prototype.render=function(){var j=this.props,Q=this.props.ambManager,ee=function(){return typeof j.children=="function"?j.children({isOpen:Q.isOpen}):Q.isOpen?j.children:!1}();if(!ee)return!1;var V={onKeyDown:Q.handleMenuKey,role:"menu",tabIndex:-1};return Q.options.closeOnBlur&&(V.onBlur=Q.handleBlur),C(V,j,S),C(V,{ref:this.setRef}),i.createElement(j.tag,V,ee)},K}(i.Component);return O.propTypes=S,O.defaultProps={tag:"div"},FM=i.forwardRef(function(U,K){return i.createElement(l.Consumer,null,function(z){var j={ambManager:z,forwardedRef:K};return C(j,U,{ambManager:S.ambManager,children:S.children,forwardedRef:S.forwardedRef}),i.createElement(O,j,U.children)})}),FM}var zM,nk;function rse(){if(nk)return zM;nk=1;function n(O,U){if(!(O instanceof U))throw new TypeError("Cannot call a class as a function")}function e(O,U){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:O}function t(O,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);O.prototype=Object.create(U&&U.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(O,U):O.__proto__=U)}var i=pl(),r=i0(),a=I2(),l=T2(),o=l.refType,m=k2(),C={ambManager:r.object.isRequired,children:r.node.isRequired,forwardedRef:o,tag:r.string,text:r.string,value:r.any},S=function(O){t(U,O);function U(){var K,z,j;n(this,U);for(var Q=arguments.length,ee=Array(Q),V=0;V<Q;V++)ee[V]=arguments[V];return j=(K=(z=e(this,O.call.apply(O,[this].concat(ee))),z),z.ref=i.createRef(),z.handleKeyDown=function(ae){ae.key!=="Enter"&&ae.key!==" "||z.props.tag==="a"&&z.props.href||(ae.preventDefault(),z.selectItem(ae))},z.selectItem=function(ae){var ne=typeof z.props.value<"u"?z.props.value:z.props.children;z.props.ambManager.handleSelection(ne,ae)},z.setRef=function(ae){z.ref.current=ae,typeof z.props.forwardedRef=="function"?z.props.forwardedRef(ae):z.props.forwardedRef&&(z.props.forwardedRef.current=ae)},K),e(z,j)}return U.prototype.componentDidMount=function(){this.props.ambManager.addItem({node:this.ref.current,text:this.props.text})},U.prototype.render=function(){var z={onClick:this.selectItem,onKeyDown:this.handleKeyDown,role:"menuitem",tabIndex:"-1",ref:this.setRef};return m(z,this.props,C),i.createElement(this.props.tag,z,this.props.children)},U}(i.Component);return S.propTypes=C,S.defaultProps={tag:"div"},zM=i.forwardRef(function(O,U){return i.createElement(a.Consumer,null,function(K){var z={ambManager:K,forwardedRef:U};return m(z,O,{ambManager:C.ambManager,children:C.children,forwardedRef:C.forwardedRef}),i.createElement(S,z,O.children)})}),zM}var NM,ik;function ose(){if(ik)return NM;ik=1;var n=nG();return NM={Wrapper:ese(),Button:tse(),Menu:ise(),MenuItem:rse(),openMenu:n.openMenu,closeMenu:n.closeMenu},NM}var cx=ose();function rk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function CB(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rk(Object(t),!0).forEach(function(i){tA(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):rk(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function D2(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function ok(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function R2(n,e,t){return e&&ok(n.prototype,e),t&&ok(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function tA(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function n0(){return n0=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},n0.apply(this,arguments)}function O8(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&_B(n,e)}function w3(n){return w3=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},w3(n)}function _B(n,e){return _B=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},_B(n,e)}function ase(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function sse(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,a;for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function P2(n,e){if(n==null)return{};var t=sse(n,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function Vm(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function lse(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vm(n)}function I8(n){var e=ase();return function(){var i=w3(n),r;if(e){var a=w3(this).constructor;r=Reflect.construct(i,arguments,a)}else r=i.apply(this,arguments);return lse(this,r)}}function Ase(n,e){return hse(n)||fse(n,e)||iG(n,e)||pse()}function use(n){return cse(n)||dse(n)||iG(n)||mse()}function cse(n){if(Array.isArray(n))return bB(n)}function hse(n){if(Array.isArray(n))return n}function dse(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function fse(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,a=!1,l,o;try{for(t=t.call(n);!(r=(l=t.next()).done)&&(i.push(l.value),!(e&&i.length===e));r=!0);}catch(m){a=!0,o=m}finally{try{!r&&t.return!=null&&t.return()}finally{if(a)throw o}}return i}}function iG(n,e){if(n){if(typeof n=="string")return bB(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return bB(n,e)}}function bB(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function mse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var gse=R2(function n(e){var t=this,i=e.expanded,r=i===void 0?[]:i,a=e.allowMultipleExpanded,l=a===void 0?!1:a,o=e.allowZeroExpanded,m=o===void 0?!1:o;D2(this,n),tA(this,"expanded",void 0),tA(this,"allowMultipleExpanded",void 0),tA(this,"allowZeroExpanded",void 0),tA(this,"toggleExpanded",function(C){if(t.isItemDisabled(C))return t;var S=t.isItemExpanded(C);return S?t.augment({expanded:t.expanded.filter(function(O){return O!==C})}):t.augment({expanded:t.allowMultipleExpanded?[].concat(use(t.expanded),[C]):[C]})}),tA(this,"isItemDisabled",function(C){var S=t.isItemExpanded(C),O=t.expanded.length===1;return!!(S&&!t.allowZeroExpanded&&O)}),tA(this,"isItemExpanded",function(C){return t.expanded.indexOf(C)!==-1}),tA(this,"getPanelAttributes",function(C,S){var O=S??t.isItemExpanded(C);return{role:t.allowMultipleExpanded?void 0:"region","aria-hidden":t.allowMultipleExpanded?!O:void 0,"aria-labelledby":t.getButtonId(C),id:t.getPanelId(C),hidden:O?void 0:!0}}),tA(this,"getHeadingAttributes",function(){return{role:"heading"}}),tA(this,"getButtonAttributes",function(C,S){var O=S??t.isItemExpanded(C),U=t.isItemDisabled(C);return{id:t.getButtonId(C),"aria-disabled":U,"aria-expanded":O,"aria-controls":t.getPanelId(C),role:"button",tabIndex:0}}),tA(this,"getPanelId",function(C){return"accordion__panel-".concat(C)}),tA(this,"getButtonId",function(C){return"accordion__heading-".concat(C)}),tA(this,"augment",function(C){return new n(CB({expanded:t.expanded,allowMultipleExpanded:t.allowMultipleExpanded,allowZeroExpanded:t.allowZeroExpanded},C))}),this.expanded=r,this.allowMultipleExpanded=l,this.allowZeroExpanded=m}),rG=Gt.createContext(null),oG=function(n){O8(t,n);var e=I8(t);function t(){var i;D2(this,t);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return i=e.call.apply(e,[this].concat(a)),tA(Vm(i),"state",new gse({expanded:i.props.preExpanded,allowMultipleExpanded:i.props.allowMultipleExpanded,allowZeroExpanded:i.props.allowZeroExpanded})),tA(Vm(i),"toggleExpanded",function(o){i.setState(function(m){return m.toggleExpanded(o)},function(){i.props.onChange&&i.props.onChange(i.state.expanded)})}),tA(Vm(i),"isItemDisabled",function(o){return i.state.isItemDisabled(o)}),tA(Vm(i),"isItemExpanded",function(o){return i.state.isItemExpanded(o)}),tA(Vm(i),"getPanelAttributes",function(o,m){return i.state.getPanelAttributes(o,m)}),tA(Vm(i),"getHeadingAttributes",function(){return i.state.getHeadingAttributes()}),tA(Vm(i),"getButtonAttributes",function(o,m){return i.state.getButtonAttributes(o,m)}),i}return R2(t,[{key:"render",value:function(){var r=this.state,a=r.allowZeroExpanded,l=r.allowMultipleExpanded;return Gt.createElement(rG.Provider,{value:{allowMultipleExpanded:l,allowZeroExpanded:a,toggleExpanded:this.toggleExpanded,isItemDisabled:this.isItemDisabled,isItemExpanded:this.isItemExpanded,getPanelAttributes:this.getPanelAttributes,getHeadingAttributes:this.getHeadingAttributes,getButtonAttributes:this.getButtonAttributes}},this.props.children||null)}}]),t}(Gt.PureComponent);tA(oG,"defaultProps",{allowMultipleExpanded:!1,allowZeroExpanded:!1});var aG=function(n){O8(t,n);var e=I8(t);function t(){var i;D2(this,t);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return i=e.call.apply(e,[this].concat(a)),tA(Vm(i),"renderChildren",function(o){return o?i.props.children(o):null}),i}return R2(t,[{key:"render",value:function(){return Gt.createElement(rG.Consumer,null,this.renderChildren)}}]),t}(Gt.PureComponent),yse=["className","allowMultipleExpanded","allowZeroExpanded","onChange","preExpanded"],vse=function(e){var t=e.className,i=t===void 0?"accordion":t,r=e.allowMultipleExpanded,a=e.allowZeroExpanded,l=e.onChange,o=e.preExpanded,m=P2(e,yse);return Gt.createElement(oG,{preExpanded:o,allowMultipleExpanded:r,allowZeroExpanded:a,onChange:l},Gt.createElement("div",n0({"data-accordion-component":"Accordion",className:i},m)))},xB;(function(n){n.Accordion="Accordion",n.AccordionItem="AccordionItem",n.AccordionItemButton="AccordionItemButton",n.AccordionItemHeading="AccordionItemHeading",n.AccordionItemPanel="AccordionItemPanel"})(xB||(xB={}));var sG=xB,GM=0;function Cse(){var n=GM;return GM=GM+1,"raa-".concat(n)}var _se=Gt.useId||Cse,bse=/[\u0009\u000a\u000c\u000d\u0020]/g;function F_(n){return n===""||bse.test(n)?(console.error('uuid must be a valid HTML5 id but was given "'.concat(n,'", ASCII whitespaces are forbidden')),!1):!0}var lG=Gt.createContext(null),xse=function(e){var t=e.children,i=e.uuid,r=e.accordionContext,a=e.dangerouslySetExpanded,l=function(){r.toggleExpanded(i)},o=function(C){var S=a??C.isItemExpanded(i),O=C.isItemDisabled(i),U=C.getPanelAttributes(i,a),K=C.getHeadingAttributes(i),z=C.getButtonAttributes(i,a);return Gt.createElement(lG.Provider,{value:{uuid:i,expanded:S,disabled:O,toggleExpanded:l,panelAttributes:U,headingAttributes:K,buttonAttributes:z}},t)};return Gt.createElement(aG,null,o)},Mse=function(e){return Gt.createElement(aG,null,function(t){return Gt.createElement(xse,n0({},e,{accordionContext:t}))})},K2=function(e){var t=e.children,i=function(a){return a?t(a):null};return Gt.createElement(lG.Consumer,null,i)},Sse=["uuid","dangerouslySetExpanded","className","activeClassName"],AG=function(e){var t=e.uuid,i=e.dangerouslySetExpanded,r=e.className,a=r===void 0?"accordion__item":r,l=e.activeClassName,o=P2(e,Sse),m=Gt.useState(_se()),C=Ase(m,1),S=C[0],O=t??S,U=function(z){var j=z.expanded,Q=j&&l?l:a;return Gt.createElement("div",n0({"data-accordion-component":"AccordionItem",className:Q},o))};return F_(O.toString()),o.id&&F_(o.id),Gt.createElement(Mse,{uuid:O,dangerouslySetExpanded:i},Gt.createElement(K2,null,U))};AG.displayName=sG.AccordionItem;function uG(n){return n&&(n.matches('[data-accordion-component="Accordion"]')?n:uG(n.parentElement))}function U2(n){var e=uG(n);return e&&Array.from(e.querySelectorAll('[data-accordion-component="AccordionItemButton"]'))}function wse(n){var e=U2(n)||[],t=e[0];t&&t.focus()}function Ese(n){var e=U2(n)||[],t=e[e.length-1];t&&t.focus()}function Bse(n){var e=U2(n)||[],t=e.indexOf(n);if(t!==-1){var i=e[t+1];i&&i.focus()}}function Ose(n){var e=U2(n)||[],t=e.indexOf(n);if(t!==-1){var i=e[t-1];i&&i.focus()}}var B0={END:"End",ENTER:"Enter",HOME:"Home",SPACE:" ",SPACE_DEPRECATED:"Spacebar",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight"},Ise=["toggleExpanded","className"],Tse=function(e){var t=e.toggleExpanded,i=e.className,r=i===void 0?"accordion__button":i,a=P2(e,Ise),l=function(m){var C=m.key;if((C===B0.ENTER||C===B0.SPACE||C===B0.SPACE_DEPRECATED)&&(m.preventDefault(),t()),m.target instanceof HTMLElement)switch(C){case B0.HOME:{m.preventDefault(),wse(m.target);break}case B0.END:{m.preventDefault(),Ese(m.target);break}case B0.LEFT:case B0.UP:{m.preventDefault(),Ose(m.target);break}case B0.RIGHT:case B0.DOWN:{m.preventDefault(),Bse(m.target);break}}};return a.id&&F_(a.id),Gt.createElement("div",n0({className:r},a,{role:"button",tabIndex:0,onClick:t,onKeyDown:l,"data-accordion-component":"AccordionItemButton"}))},kse=function(e){return Gt.createElement(K2,null,function(t){var i=t.toggleExpanded,r=t.buttonAttributes;return Gt.createElement(Tse,n0({toggleExpanded:i},e,r))})},Dse={className:"accordion__heading","aria-level":3},Rse=`AccordionItemButton may contain only one child element, which must be an instance of AccordionItemButton.

From the WAI-ARIA spec (https://www.w3.org/TR/wai-aria-practices-1.1/#accordion):

“The button element is the only element inside the heading element. That is, if there are other visually persistent elements, they are not included inside the heading element.”

`,cG=function(n){O8(t,n);var e=I8(t);function t(){var i;D2(this,t);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return i=e.call.apply(e,[this].concat(a)),tA(Vm(i),"ref",void 0),tA(Vm(i),"setRef",function(o){i.ref=o}),i}return R2(t,[{key:"componentDidUpdate",value:function(){t.VALIDATE(this.ref)}},{key:"componentDidMount",value:function(){t.VALIDATE(this.ref)}},{key:"render",value:function(){return Gt.createElement("div",n0({"data-accordion-component":"AccordionItemHeading"},this.props,{ref:this.setRef}))}}],[{key:"VALIDATE",value:function(r){if(r===void 0)throw new Error("ref is undefined");if(!(r.childElementCount===1&&r.firstElementChild&&r.firstElementChild.getAttribute("data-accordion-component")==="AccordionItemButton"))throw new Error(Rse)}}]),t}(Gt.PureComponent);tA(cG,"defaultProps",Dse);var hG=function(e){return Gt.createElement(K2,null,function(t){var i=t.headingAttributes;return e.id&&F_(e.id),Gt.createElement(cG,n0({},e,i))})};hG.displayName=sG.AccordionItemHeading;var Pse=["className","region","id"],Kse=function(e){var t=e.className,i=t===void 0?"accordion__panel":t,r=e.region,a=e.id,l=P2(e,Pse),o=function(C){var S=C.panelAttributes;a&&F_(a);var O=CB(CB({},S),{},{"aria-labelledby":r?S["aria-labelledby"]:void 0});return Gt.createElement("div",n0({"data-accordion-component":"AccordionItemPanel",className:i},l,O,{role:r?"region":void 0}))};return Gt.createElement(K2,null,o)},Ix={exports:{}},Use=Ix.exports,ak;function L2(){return ak||(ak=1,function(n,e){(function(t,i){n.exports=i()})(Use,function(){var t=navigator.userAgent,i=navigator.platform,r=/gecko\/\d/i.test(t),a=/MSIE \d/.test(t),l=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),o=/Edge\/(\d+)/.exec(t),m=a||l||o,C=m&&(a?document.documentMode||6:+(o||l)[1]),S=!o&&/WebKit\//.test(t),O=S&&/Qt\/\d+\.\d+/.test(t),U=!o&&/Chrome\/(\d+)/.exec(t),K=U&&+U[1],z=/Opera\//.test(t),j=/Apple Computer/.test(navigator.vendor),Q=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),ee=/PhantomJS/.test(t),V=j&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),ae=/Android/.test(t),ne=V||ae||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),Z=V||/Mac/.test(i),oe=/\bCrOS\b/.test(t),W=/win/i.test(i),ue=z&&t.match(/Version\/(\d*\.\d*)/);ue&&(ue=Number(ue[1])),ue&&ue>=15&&(z=!1,S=!0);var ge=Z&&(O||z&&(ue==null||ue<12.11)),ye=r||m&&C>=9;function Me(d){return new RegExp("(^|\\s)"+d+"(?:$|\\s)\\s*")}var Be=function(d,v){var B=d.className,E=Me(v).exec(B);if(E){var F=B.slice(E.index+E[0].length);d.className=B.slice(0,E.index)+(F?E[1]+F:"")}};function we(d){for(var v=d.childNodes.length;v>0;--v)d.removeChild(d.firstChild);return d}function qe(d,v){return we(d).appendChild(v)}function xe(d,v,B,E){var F=document.createElement(d);if(B&&(F.className=B),E&&(F.style.cssText=E),typeof v=="string")F.appendChild(document.createTextNode(v));else if(v)for(var X=0;X<v.length;++X)F.appendChild(v[X]);return F}function ze(d,v,B,E){var F=xe(d,v,B,E);return F.setAttribute("role","presentation"),F}var ot;document.createRange?ot=function(d,v,B,E){var F=document.createRange();return F.setEnd(E||d,B),F.setStart(d,v),F}:ot=function(d,v,B){var E=document.body.createTextRange();try{E.moveToElementText(d.parentNode)}catch{return E}return E.collapse(!0),E.moveEnd("character",B),E.moveStart("character",v),E};function yt(d,v){if(v.nodeType==3&&(v=v.parentNode),d.contains)return d.contains(v);do if(v.nodeType==11&&(v=v.host),v==d)return!0;while(v=v.parentNode)}function nt(d){var v=d.ownerDocument||d,B;try{B=d.activeElement}catch{B=v.body||null}for(;B&&B.shadowRoot&&B.shadowRoot.activeElement;)B=B.shadowRoot.activeElement;return B}function be(d,v){var B=d.className;Me(v).test(B)||(d.className+=(B?" ":"")+v)}function Ne(d,v){for(var B=d.split(" "),E=0;E<B.length;E++)B[E]&&!Me(B[E]).test(v)&&(v+=" "+B[E]);return v}var tt=function(d){d.select()};V?tt=function(d){d.selectionStart=0,d.selectionEnd=d.value.length}:m&&(tt=function(d){try{d.select()}catch{}});function lt(d){return d.display.wrapper.ownerDocument}function It(d){return pt(d.display.wrapper)}function pt(d){return d.getRootNode?d.getRootNode():d.ownerDocument}function St(d){return lt(d).defaultView}function Rt(d){var v=Array.prototype.slice.call(arguments,1);return function(){return d.apply(null,v)}}function Le(d,v,B){v||(v={});for(var E in d)d.hasOwnProperty(E)&&(B!==!1||!v.hasOwnProperty(E))&&(v[E]=d[E]);return v}function Pe(d,v,B,E,F){v==null&&(v=d.search(/[^\s\u00a0]/),v==-1&&(v=d.length));for(var X=E||0,fe=F||0;;){var _e=d.indexOf("	",X);if(_e<0||_e>=v)return fe+(v-X);fe+=_e-X,fe+=B-fe%B,X=_e+1}}var Re=function(){this.id=null,this.f=null,this.time=0,this.handler=Rt(this.onTimeout,this)};Re.prototype.onTimeout=function(d){d.id=0,d.time<=+new Date?d.f():setTimeout(d.handler,d.time-+new Date)},Re.prototype.set=function(d,v){this.f=v;var B=+new Date+d;(!this.id||B<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,d),this.time=B)};function He(d,v){for(var B=0;B<d.length;++B)if(d[B]==v)return B;return-1}var bt=50,vt={toString:function(){return"CodeMirror.Pass"}},Ot={scroll:!1},qt={origin:"*mouse"},Kt={origin:"+move"};function on(d,v,B){for(var E=0,F=0;;){var X=d.indexOf("	",E);X==-1&&(X=d.length);var fe=X-E;if(X==d.length||F+fe>=v)return E+Math.min(fe,v-F);if(F+=X-E,F+=B-F%B,E=X+1,F>=v)return E}}var Jn=[""];function Wt(d){for(;Jn.length<=d;)Jn.push($n(Jn)+" ");return Jn[d]}function $n(d){return d[d.length-1]}function On(d,v){for(var B=[],E=0;E<d.length;E++)B[E]=v(d[E],E);return B}function Bn(d,v,B){for(var E=0,F=B(v);E<d.length&&B(d[E])<=F;)E++;d.splice(E,0,v)}function In(){}function Bi(d,v){var B;return Object.create?B=Object.create(d):(In.prototype=d,B=new In),v&&Le(v,B),B}var ei=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Kn(d){return/\w/.test(d)||d>""&&(d.toUpperCase()!=d.toLowerCase()||ei.test(d))}function Ge(d,v){return v?v.source.indexOf("\\w")>-1&&Kn(d)?!0:v.test(d):Kn(d)}function de(d){for(var v in d)if(d.hasOwnProperty(v)&&d[v])return!1;return!0}var re=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function le(d){return d.charCodeAt(0)>=768&&re.test(d)}function me(d,v,B){for(;(B<0?v>0:v<d.length)&&le(d.charAt(v));)v+=B;return v}function Te(d,v,B){for(var E=v>B?-1:1;;){if(v==B)return v;var F=(v+B)/2,X=E<0?Math.ceil(F):Math.floor(F);if(X==v)return d(X)?v:B;d(X)?B=X:v=X+E}}function We(d,v,B,E){if(!d)return E(v,B,"ltr",0);for(var F=!1,X=0;X<d.length;++X){var fe=d[X];(fe.from<B&&fe.to>v||v==B&&fe.to==v)&&(E(Math.max(fe.from,v),Math.min(fe.to,B),fe.level==1?"rtl":"ltr",X),F=!0)}F||E(v,B,"ltr")}var dt=null;function Ye(d,v,B){var E;dt=null;for(var F=0;F<d.length;++F){var X=d[F];if(X.from<v&&X.to>v)return F;X.to==v&&(X.from!=X.to&&B=="before"?E=F:dt=F),X.from==v&&(X.from!=X.to&&B!="before"?E=F:dt=F)}return E??dt}var De=function(){var d="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",v="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function B(Fe){return Fe<=247?d.charAt(Fe):1424<=Fe&&Fe<=1524?"R":1536<=Fe&&Fe<=1785?v.charAt(Fe-1536):1774<=Fe&&Fe<=2220?"r":8192<=Fe&&Fe<=8203?"w":Fe==8204?"b":"L"}var E=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,F=/[stwN]/,X=/[LRr]/,fe=/[Lb1n]/,_e=/[1n]/;function ke(Fe,_t,Tt){this.level=Fe,this.from=_t,this.to=Tt}return function(Fe,_t){var Tt=_t=="ltr"?"L":"R";if(Fe.length==0||_t=="ltr"&&!E.test(Fe))return!1;for(var Jt=Fe.length,Ht=[],_n=0;_n<Jt;++_n)Ht.push(B(Fe.charCodeAt(_n)));for(var Rn=0,oi=Tt;Rn<Jt;++Rn){var pi=Ht[Rn];pi=="m"?Ht[Rn]=oi:oi=pi}for(var Ci=0,gi=Tt;Ci<Jt;++Ci){var ki=Ht[Ci];ki=="1"&&gi=="r"?Ht[Ci]="n":X.test(ki)&&(gi=ki,ki=="r"&&(Ht[Ci]="R"))}for(var ar=1,Yi=Ht[0];ar<Jt-1;++ar){var Xr=Ht[ar];Xr=="+"&&Yi=="1"&&Ht[ar+1]=="1"?Ht[ar]="1":Xr==","&&Yi==Ht[ar+1]&&(Yi=="1"||Yi=="n")&&(Ht[ar]=Yi),Yi=Xr}for(var xr=0;xr<Jt;++xr){var ns=Ht[xr];if(ns==",")Ht[xr]="N";else if(ns=="%"){var ua=void 0;for(ua=xr+1;ua<Jt&&Ht[ua]=="%";++ua);for(var Yr=xr&&Ht[xr-1]=="!"||ua<Jt&&Ht[ua]=="1"?"1":"N",ys=xr;ys<ua;++ys)Ht[ys]=Yr;xr=ua-1}}for(var vs=0,ca=Tt;vs<Jt;++vs){var Vl=Ht[vs];ca=="L"&&Vl=="1"?Ht[vs]="L":X.test(Vl)&&(ca=Vl)}for(var Is=0;Is<Jt;++Is)if(F.test(Ht[Is])){var Ns=void 0;for(Ns=Is+1;Ns<Jt&&F.test(Ht[Ns]);++Ns);for(var Br=(Is?Ht[Is-1]:Tt)=="L",Ea=(Ns<Jt?Ht[Ns]:Tt)=="L",$l=Br==Ea?Br?"L":"R":Tt,fc=Is;fc<Ns;++fc)Ht[fc]=$l;Is=Ns-1}for(var mA=[],rh,cs=0;cs<Jt;)if(fe.test(Ht[cs])){var Su=cs;for(++cs;cs<Jt&&fe.test(Ht[cs]);++cs);mA.push(new ke(0,Su,cs))}else{var Ml=cs,mc=mA.length,al=_t=="rtl"?1:0;for(++cs;cs<Jt&&Ht[cs]!="L";++cs);for(var pA=Ml;pA<cs;)if(_e.test(Ht[pA])){Ml<pA&&(mA.splice(mc,0,new ke(1,Ml,pA)),mc+=al);var Vu=pA;for(++pA;pA<cs&&_e.test(Ht[pA]);++pA);mA.splice(mc,0,new ke(2,Vu,pA)),mc+=al,Ml=pA}else++pA;Ml<cs&&mA.splice(mc,0,new ke(1,Ml,cs))}return _t=="ltr"&&(mA[0].level==1&&(rh=Fe.match(/^\s+/))&&(mA[0].from=rh[0].length,mA.unshift(new ke(0,0,rh[0].length))),$n(mA).level==1&&(rh=Fe.match(/\s+$/))&&($n(mA).to-=rh[0].length,mA.push(new ke(0,Jt-rh[0].length,Jt)))),_t=="rtl"?mA.reverse():mA}}();function Ze(d,v){var B=d.order;return B==null&&(B=d.order=De(d.text,v)),B}var g=[],gt=function(d,v,B){if(d.addEventListener)d.addEventListener(v,B,!1);else if(d.attachEvent)d.attachEvent("on"+v,B);else{var E=d._handlers||(d._handlers={});E[v]=(E[v]||g).concat(B)}};function ht(d,v){return d._handlers&&d._handlers[v]||g}function kt(d,v,B){if(d.removeEventListener)d.removeEventListener(v,B,!1);else if(d.detachEvent)d.detachEvent("on"+v,B);else{var E=d._handlers,F=E&&E[v];if(F){var X=He(F,B);X>-1&&(E[v]=F.slice(0,X).concat(F.slice(X+1)))}}}function it(d,v){var B=ht(d,v);if(B.length)for(var E=Array.prototype.slice.call(arguments,2),F=0;F<B.length;++F)B[F].apply(null,E)}function en(d,v,B){return typeof v=="string"&&(v={type:v,preventDefault:function(){this.defaultPrevented=!0}}),it(d,B||v.type,d,v),er(v)||v.codemirrorIgnore}function Dn(d){var v=d._handlers&&d._handlers.cursorActivity;if(v)for(var B=d.curOp.cursorActivityHandlers||(d.curOp.cursorActivityHandlers=[]),E=0;E<v.length;++E)He(B,v[E])==-1&&B.push(v[E])}function Mn(d,v){return ht(d,v).length>0}function ii(d){d.prototype.on=function(v,B){gt(this,v,B)},d.prototype.off=function(v,B){kt(this,v,B)}}function Wn(d){d.preventDefault?d.preventDefault():d.returnValue=!1}function qi(d){d.stopPropagation?d.stopPropagation():d.cancelBubble=!0}function er(d){return d.defaultPrevented!=null?d.defaultPrevented:d.returnValue==!1}function wi(d){Wn(d),qi(d)}function hi(d){return d.target||d.srcElement}function ti(d){var v=d.which;return v==null&&(d.button&1?v=1:d.button&2?v=3:d.button&4&&(v=2)),Z&&d.ctrlKey&&v==1&&(v=3),v}var Wi=function(){if(m&&C<9)return!1;var d=xe("div");return"draggable"in d||"dragDrop"in d}(),Sn;function lo(d){if(Sn==null){var v=xe("span","​");qe(d,xe("span",[v,document.createTextNode("x")])),d.firstChild.offsetHeight!=0&&(Sn=v.offsetWidth<=1&&v.offsetHeight>2&&!(m&&C<8))}var B=Sn?xe("span","​"):xe("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return B.setAttribute("cm-text",""),B}var Hi;function pa(d){if(Hi!=null)return Hi;var v=qe(d,document.createTextNode("AخA")),B=ot(v,0,1).getBoundingClientRect(),E=ot(v,1,2).getBoundingClientRect();return we(d),!B||B.left==B.right?!1:Hi=E.right-B.right<3}var To=`

b`.split(/\n/).length!=3?function(d){for(var v=0,B=[],E=d.length;v<=E;){var F=d.indexOf(`
`,v);F==-1&&(F=d.length);var X=d.slice(v,d.charAt(F-1)=="\r"?F-1:F),fe=X.indexOf("\r");fe!=-1?(B.push(X.slice(0,fe)),v+=fe+1):(B.push(X),v=F+1)}return B}:function(d){return d.split(/\r\n?|\n/)},Zn=window.getSelection?function(d){try{return d.selectionStart!=d.selectionEnd}catch{return!1}}:function(d){var v;try{v=d.ownerDocument.selection.createRange()}catch{}return!v||v.parentElement()!=d?!1:v.compareEndPoints("StartToEnd",v)!=0},lr=function(){var d=xe("div");return"oncopy"in d?!0:(d.setAttribute("oncopy","return;"),typeof d.oncopy=="function")}(),zi=null;function vr(d){if(zi!=null)return zi;var v=qe(d,xe("span","x")),B=v.getBoundingClientRect(),E=ot(v,0,1).getBoundingClientRect();return zi=Math.abs(B.left-E.left)>1}var La={},Ir={};function Ni(d,v){arguments.length>2&&(v.dependencies=Array.prototype.slice.call(arguments,2)),La[d]=v}function gl(d,v){Ir[d]=v}function Ta(d){if(typeof d=="string"&&Ir.hasOwnProperty(d))d=Ir[d];else if(d&&typeof d.name=="string"&&Ir.hasOwnProperty(d.name)){var v=Ir[d.name];typeof v=="string"&&(v={name:v}),d=Bi(v,d),d.name=v.name}else{if(typeof d=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(d))return Ta("application/xml");if(typeof d=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(d))return Ta("application/json")}return typeof d=="string"?{name:d}:d||{name:"null"}}function So(d,v){v=Ta(v);var B=La[v.name];if(!B)return So(d,"text/plain");var E=B(d,v);if($a.hasOwnProperty(v.name)){var F=$a[v.name];for(var X in F)F.hasOwnProperty(X)&&(E.hasOwnProperty(X)&&(E["_"+X]=E[X]),E[X]=F[X])}if(E.name=v.name,v.helperType&&(E.helperType=v.helperType),v.modeProps)for(var fe in v.modeProps)E[fe]=v.modeProps[fe];return E}var $a={};function Ol(d,v){var B=$a.hasOwnProperty(d)?$a[d]:$a[d]={};Le(v,B)}function Ao(d,v){if(v===!0)return v;if(d.copyState)return d.copyState(v);var B={};for(var E in v){var F=v[E];F instanceof Array&&(F=F.concat([])),B[E]=F}return B}function QA(d,v){for(var B;d.innerMode&&(B=d.innerMode(v),!(!B||B.mode==d));)v=B.state,d=B.mode;return B||{mode:d,state:v}}function ka(d,v,B){return d.startState?d.startState(v,B):!0}var Vi=function(d,v,B){this.pos=this.start=0,this.string=d,this.tabSize=v||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=B};Vi.prototype.eol=function(){return this.pos>=this.string.length},Vi.prototype.sol=function(){return this.pos==this.lineStart},Vi.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Vi.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Vi.prototype.eat=function(d){var v=this.string.charAt(this.pos),B;if(typeof d=="string"?B=v==d:B=v&&(d.test?d.test(v):d(v)),B)return++this.pos,v},Vi.prototype.eatWhile=function(d){for(var v=this.pos;this.eat(d););return this.pos>v},Vi.prototype.eatSpace=function(){for(var d=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>d},Vi.prototype.skipToEnd=function(){this.pos=this.string.length},Vi.prototype.skipTo=function(d){var v=this.string.indexOf(d,this.pos);if(v>-1)return this.pos=v,!0},Vi.prototype.backUp=function(d){this.pos-=d},Vi.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Pe(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Pe(this.string,this.lineStart,this.tabSize):0)},Vi.prototype.indentation=function(){return Pe(this.string,null,this.tabSize)-(this.lineStart?Pe(this.string,this.lineStart,this.tabSize):0)},Vi.prototype.match=function(d,v,B){if(typeof d=="string"){var E=function(fe){return B?fe.toLowerCase():fe},F=this.string.substr(this.pos,d.length);if(E(F)==E(d))return v!==!1&&(this.pos+=d.length),!0}else{var X=this.string.slice(this.pos).match(d);return X&&X.index>0?null:(X&&v!==!1&&(this.pos+=X[0].length),X)}},Vi.prototype.current=function(){return this.string.slice(this.start,this.pos)},Vi.prototype.hideFirstChars=function(d,v){this.lineStart+=d;try{return v()}finally{this.lineStart-=d}},Vi.prototype.lookAhead=function(d){var v=this.lineOracle;return v&&v.lookAhead(d)},Vi.prototype.baseToken=function(){var d=this.lineOracle;return d&&d.baseToken(this.pos)};function xi(d,v){if(v-=d.first,v<0||v>=d.size)throw new Error("There is no line "+(v+d.first)+" in the document.");for(var B=d;!B.lines;)for(var E=0;;++E){var F=B.children[E],X=F.chunkSize();if(v<X){B=F;break}v-=X}return B.lines[v]}function ls(d,v,B){var E=[],F=v.line;return d.iter(v.line,B.line+1,function(X){var fe=X.text;F==B.line&&(fe=fe.slice(0,B.ch)),F==v.line&&(fe=fe.slice(v.ch)),E.push(fe),++F}),E}function Ma(d,v,B){var E=[];return d.iter(v,B,function(F){E.push(F.text)}),E}function Vo(d,v){var B=v-d.height;if(B)for(var E=d;E;E=E.parent)E.height+=B}function $e(d){if(d.parent==null)return null;for(var v=d.parent,B=He(v.lines,d),E=v.parent;E;v=E,E=E.parent)for(var F=0;E.children[F]!=v;++F)B+=E.children[F].chunkSize();return B+v.first}function Et(d,v){var B=d.first;e:do{for(var E=0;E<d.children.length;++E){var F=d.children[E],X=F.height;if(v<X){d=F;continue e}v-=X,B+=F.chunkSize()}return B}while(!d.lines);for(var fe=0;fe<d.lines.length;++fe){var _e=d.lines[fe],ke=_e.height;if(v<ke)break;v-=ke}return B+fe}function xn(d,v){return v>=d.first&&v<d.first+d.size}function jn(d,v){return String(d.lineNumberFormatter(v+d.firstLineNumber))}function rn(d,v,B){if(B===void 0&&(B=null),!(this instanceof rn))return new rn(d,v,B);this.line=d,this.ch=v,this.sticky=B}function si(d,v){return d.line-v.line||d.ch-v.ch}function Jr(d,v){return d.sticky==v.sticky&&si(d,v)==0}function wo(d){return rn(d.line,d.ch)}function As(d,v){return si(d,v)<0?v:d}function Us(d,v){return si(d,v)<0?d:v}function YA(d,v){return Math.max(d.first,Math.min(v,d.first+d.size-1))}function Qi(d,v){if(v.line<d.first)return rn(d.first,0);var B=d.first+d.size-1;return v.line>B?rn(B,xi(d,B).text.length):Du(v,xi(d,v.line).text.length)}function Du(d,v){var B=d.ch;return B==null||B>v?rn(d.line,v):B<0?rn(d.line,0):d}function _A(d,v){for(var B=[],E=0;E<v.length;E++)B[E]=Qi(d,v[E]);return B}var yl=function(d,v){this.state=d,this.lookAhead=v},Ss=function(d,v,B,E){this.state=v,this.doc=d,this.line=B,this.maxLookAhead=E||0,this.baseTokens=null,this.baseTokenPos=1};Ss.prototype.lookAhead=function(d){var v=this.doc.getLine(this.line+d);return v!=null&&d>this.maxLookAhead&&(this.maxLookAhead=d),v},Ss.prototype.baseToken=function(d){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=d;)this.baseTokenPos+=2;var v=this.baseTokens[this.baseTokenPos+1];return{type:v&&v.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-d}},Ss.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Ss.fromSaved=function(d,v,B){return v instanceof yl?new Ss(d,Ao(d.mode,v.state),B,v.lookAhead):new Ss(d,Ao(d.mode,v),B)},Ss.prototype.save=function(d){var v=d!==!1?Ao(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new yl(v,this.maxLookAhead):v};function bc(d,v,B,E){var F=[d.state.modeGen],X={};br(d,v.text,d.doc.mode,B,function(Fe,_t){return F.push(Fe,_t)},X,E);for(var fe=B.state,_e=function(Fe){B.baseTokens=F;var _t=d.state.overlays[Fe],Tt=1,Jt=0;B.state=!0,br(d,v.text,_t.mode,B,function(Ht,_n){for(var Rn=Tt;Jt<Ht;){var oi=F[Tt];oi>Ht&&F.splice(Tt,1,Ht,F[Tt+1],oi),Tt+=2,Jt=Math.min(Ht,oi)}if(_n)if(_t.opaque)F.splice(Rn,Tt-Rn,Ht,"overlay "+_n),Tt=Rn+2;else for(;Rn<Tt;Rn+=2){var pi=F[Rn+1];F[Rn+1]=(pi?pi+" ":"")+"overlay "+_n}},X),B.state=fe,B.baseTokens=null,B.baseTokenPos=1},ke=0;ke<d.state.overlays.length;++ke)_e(ke);return{styles:F,classes:X.bgClass||X.textClass?X:null}}function Qs(d,v,B){if(!v.styles||v.styles[0]!=d.state.modeGen){var E=$o(d,$e(v)),F=v.text.length>d.options.maxHighlightLength&&Ao(d.doc.mode,E.state),X=bc(d,v,E);F&&(E.state=F),v.stateAfter=E.save(!F),v.styles=X.styles,X.classes?v.styleClasses=X.classes:v.styleClasses&&(v.styleClasses=null),B===d.doc.highlightFrontier&&(d.doc.modeFrontier=Math.max(d.doc.modeFrontier,++d.doc.highlightFrontier))}return v.styles}function $o(d,v,B){var E=d.doc,F=d.display;if(!E.mode.startState)return new Ss(E,!0,v);var X=iA(d,v,B),fe=X>E.first&&xi(E,X-1).stateAfter,_e=fe?Ss.fromSaved(E,fe,X):new Ss(E,ka(E.mode),X);return E.iter(X,v,function(ke){ko(d,ke.text,_e);var Fe=_e.line;ke.stateAfter=Fe==v-1||Fe%5==0||Fe>=F.viewFrom&&Fe<F.viewTo?_e.save():null,_e.nextLine()}),B&&(E.modeFrontier=_e.line),_e}function ko(d,v,B,E){var F=d.doc.mode,X=new Vi(v,d.options.tabSize,B);for(X.start=X.pos=E||0,v==""&&dr(F,B.state);!X.eol();)Kl(F,X,B.state),X.start=X.pos}function dr(d,v){if(d.blankLine)return d.blankLine(v);if(d.innerMode){var B=QA(d,v);if(B.mode.blankLine)return B.mode.blankLine(B.state)}}function Kl(d,v,B,E){for(var F=0;F<10;F++){E&&(E[0]=QA(d,B).mode);var X=d.token(v,B);if(v.pos>v.start)return X}throw new Error("Mode "+d.name+" failed to advance stream.")}var ga=function(d,v,B){this.start=d.start,this.end=d.pos,this.string=d.current(),this.type=v||null,this.state=B};function Ul(d,v,B,E){var F=d.doc,X=F.mode,fe;v=Qi(F,v);var _e=xi(F,v.line),ke=$o(d,v.line,B),Fe=new Vi(_e.text,d.options.tabSize,ke),_t;for(E&&(_t=[]);(E||Fe.pos<v.ch)&&!Fe.eol();)Fe.start=Fe.pos,fe=Kl(X,Fe,ke.state),E&&_t.push(new ga(Fe,fe,Ao(F.mode,ke.state)));return E?_t:new ga(Fe,fe,ke.state)}function bA(d,v){if(d)for(;;){var B=d.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!B)break;d=d.slice(0,B.index)+d.slice(B.index+B[0].length);var E=B[1]?"bgClass":"textClass";v[E]==null?v[E]=B[2]:new RegExp("(?:^|\\s)"+B[2]+"(?:$|\\s)").test(v[E])||(v[E]+=" "+B[2])}return d}function br(d,v,B,E,F,X,fe){var _e=B.flattenSpans;_e==null&&(_e=d.options.flattenSpans);var ke=0,Fe=null,_t=new Vi(v,d.options.tabSize,E),Tt,Jt=d.options.addModeClass&&[null];for(v==""&&bA(dr(B,E.state),X);!_t.eol();){if(_t.pos>d.options.maxHighlightLength?(_e=!1,fe&&ko(d,v,E,_t.pos),_t.pos=v.length,Tt=null):Tt=bA(Kl(B,_t,E.state,Jt),X),Jt){var Ht=Jt[0].name;Ht&&(Tt="m-"+(Tt?Ht+" "+Tt:Ht))}if(!_e||Fe!=Tt){for(;ke<_t.start;)ke=Math.min(_t.start,ke+5e3),F(ke,Fe);Fe=Tt}_t.start=_t.pos}for(;ke<_t.pos;){var _n=Math.min(_t.pos,ke+5e3);F(_n,Fe),ke=_n}}function iA(d,v,B){for(var E,F,X=d.doc,fe=B?-1:v-(d.doc.mode.innerMode?1e3:100),_e=v;_e>fe;--_e){if(_e<=X.first)return X.first;var ke=xi(X,_e-1),Fe=ke.stateAfter;if(Fe&&(!B||_e+(Fe instanceof yl?Fe.lookAhead:0)<=X.modeFrontier))return _e;var _t=Pe(ke.text,null,d.options.tabSize);(F==null||E>_t)&&(F=_e-1,E=_t)}return F}function cu(d,v){if(d.modeFrontier=Math.min(d.modeFrontier,v),!(d.highlightFrontier<v-10)){for(var B=d.first,E=v-1;E>B;E--){var F=xi(d,E).stateAfter;if(F&&(!(F instanceof yl)||E+F.lookAhead<v)){B=E+1;break}}d.highlightFrontier=Math.min(d.highlightFrontier,B)}}var No=!1,Eo=!1;function Fa(){No=!0}function Sa(){Eo=!0}function oa(d,v,B){this.marker=d,this.from=v,this.to=B}function kr(d,v){if(d)for(var B=0;B<d.length;++B){var E=d[B];if(E.marker==v)return E}}function rA(d,v){for(var B,E=0;E<d.length;++E)d[E]!=v&&(B||(B=[])).push(d[E]);return B}function za(d,v,B){var E=B&&window.WeakSet&&(B.markedSpans||(B.markedSpans=new WeakSet));E&&d.markedSpans&&E.has(d.markedSpans)?d.markedSpans.push(v):(d.markedSpans=d.markedSpans?d.markedSpans.concat([v]):[v],E&&E.add(d.markedSpans)),v.marker.attachLine(d)}function Za(d,v,B){var E;if(d)for(var F=0;F<d.length;++F){var X=d[F],fe=X.marker,_e=X.from==null||(fe.inclusiveLeft?X.from<=v:X.from<v);if(_e||X.from==v&&fe.type=="bookmark"&&(!B||!X.marker.insertLeft)){var ke=X.to==null||(fe.inclusiveRight?X.to>=v:X.to>v);(E||(E=[])).push(new oa(fe,X.from,ke?null:X.to))}}return E}function ya(d,v,B){var E;if(d)for(var F=0;F<d.length;++F){var X=d[F],fe=X.marker,_e=X.to==null||(fe.inclusiveRight?X.to>=v:X.to>v);if(_e||X.from==v&&fe.type=="bookmark"&&(!B||X.marker.insertLeft)){var ke=X.from==null||(fe.inclusiveLeft?X.from<=v:X.from<v);(E||(E=[])).push(new oa(fe,ke?null:X.from-v,X.to==null?null:X.to-v))}}return E}function Dr(d,v){if(v.full)return null;var B=xn(d,v.from.line)&&xi(d,v.from.line).markedSpans,E=xn(d,v.to.line)&&xi(d,v.to.line).markedSpans;if(!B&&!E)return null;var F=v.from.ch,X=v.to.ch,fe=si(v.from,v.to)==0,_e=Za(B,F,fe),ke=ya(E,X,fe),Fe=v.text.length==1,_t=$n(v.text).length+(Fe?F:0);if(_e)for(var Tt=0;Tt<_e.length;++Tt){var Jt=_e[Tt];if(Jt.to==null){var Ht=kr(ke,Jt.marker);Ht?Fe&&(Jt.to=Ht.to==null?null:Ht.to+_t):Jt.to=F}}if(ke)for(var _n=0;_n<ke.length;++_n){var Rn=ke[_n];if(Rn.to!=null&&(Rn.to+=_t),Rn.from==null){var oi=kr(_e,Rn.marker);oi||(Rn.from=_t,Fe&&(_e||(_e=[])).push(Rn))}else Rn.from+=_t,Fe&&(_e||(_e=[])).push(Rn)}_e&&(_e=vl(_e)),ke&&ke!=_e&&(ke=vl(ke));var pi=[_e];if(!Fe){var Ci=v.text.length-2,gi;if(Ci>0&&_e)for(var ki=0;ki<_e.length;++ki)_e[ki].to==null&&(gi||(gi=[])).push(new oa(_e[ki].marker,null,null));for(var ar=0;ar<Ci;++ar)pi.push(gi);pi.push(ke)}return pi}function vl(d){for(var v=0;v<d.length;++v){var B=d[v];B.from!=null&&B.from==B.to&&B.marker.clearWhenEmpty!==!1&&d.splice(v--,1)}return d.length?d:null}function Zi(d,v,B){var E=null;if(d.iter(v.line,B.line+1,function(Ht){if(Ht.markedSpans)for(var _n=0;_n<Ht.markedSpans.length;++_n){var Rn=Ht.markedSpans[_n].marker;Rn.readOnly&&(!E||He(E,Rn)==-1)&&(E||(E=[])).push(Rn)}}),!E)return null;for(var F=[{from:v,to:B}],X=0;X<E.length;++X)for(var fe=E[X],_e=fe.find(0),ke=0;ke<F.length;++ke){var Fe=F[ke];if(!(si(Fe.to,_e.from)<0||si(Fe.from,_e.to)>0)){var _t=[ke,1],Tt=si(Fe.from,_e.from),Jt=si(Fe.to,_e.to);(Tt<0||!fe.inclusiveLeft&&!Tt)&&_t.push({from:Fe.from,to:_e.from}),(Jt>0||!fe.inclusiveRight&&!Jt)&&_t.push({from:_e.to,to:Fe.to}),F.splice.apply(F,_t),ke+=_t.length-3}}return F}function Mi(d){var v=d.markedSpans;if(v){for(var B=0;B<v.length;++B)v[B].marker.detachLine(d);d.markedSpans=null}}function Qr(d,v){if(v){for(var B=0;B<v.length;++B)v[B].marker.attachLine(d);d.markedSpans=v}}function te(d){return d.inclusiveLeft?-1:0}function Oe(d){return d.inclusiveRight?1:0}function st(d,v){var B=d.lines.length-v.lines.length;if(B!=0)return B;var E=d.find(),F=v.find(),X=si(E.from,F.from)||te(d)-te(v);if(X)return-X;var fe=si(E.to,F.to)||Oe(d)-Oe(v);return fe||v.id-d.id}function jt(d,v){var B=Eo&&d.markedSpans,E;if(B)for(var F=void 0,X=0;X<B.length;++X)F=B[X],F.marker.collapsed&&(v?F.from:F.to)==null&&(!E||st(E,F.marker)<0)&&(E=F.marker);return E}function Si(d){return jt(d,!0)}function Xn(d){return jt(d,!1)}function $i(d,v){var B=Eo&&d.markedSpans,E;if(B)for(var F=0;F<B.length;++F){var X=B[F];X.marker.collapsed&&(X.from==null||X.from<v)&&(X.to==null||X.to>v)&&(!E||st(E,X.marker)<0)&&(E=X.marker)}return E}function or(d,v,B,E,F){var X=xi(d,v),fe=Eo&&X.markedSpans;if(fe)for(var _e=0;_e<fe.length;++_e){var ke=fe[_e];if(ke.marker.collapsed){var Fe=ke.marker.find(0),_t=si(Fe.from,B)||te(ke.marker)-te(F),Tt=si(Fe.to,E)||Oe(ke.marker)-Oe(F);if(!(_t>=0&&Tt<=0||_t<=0&&Tt>=0)&&(_t<=0&&(ke.marker.inclusiveRight&&F.inclusiveLeft?si(Fe.to,B)>=0:si(Fe.to,B)>0)||_t>=0&&(ke.marker.inclusiveRight&&F.inclusiveLeft?si(Fe.from,E)<=0:si(Fe.from,E)<0)))return!0}}}function Di(d){for(var v;v=Si(d);)d=v.find(-1,!0).line;return d}function Xi(d){for(var v;v=Xn(d);)d=v.find(1,!0).line;return d}function eo(d){for(var v,B;v=Xn(d);)d=v.find(1,!0).line,(B||(B=[])).push(d);return B}function uo(d,v){var B=xi(d,v),E=Di(B);return B==E?v:$e(E)}function ur(d,v){if(v>d.lastLine())return v;var B=xi(d,v),E;if(!pr(d,B))return v;for(;E=Xn(B);)B=E.find(1,!0).line;return $e(B)+1}function pr(d,v){var B=Eo&&v.markedSpans;if(B){for(var E=void 0,F=0;F<B.length;++F)if(E=B[F],!!E.marker.collapsed){if(E.from==null)return!0;if(!E.marker.widgetNode&&E.from==0&&E.marker.inclusiveLeft&&co(d,v,E))return!0}}}function co(d,v,B){if(B.to==null){var E=B.marker.find(1,!0);return co(d,E.line,kr(E.line.markedSpans,B.marker))}if(B.marker.inclusiveRight&&B.to==v.text.length)return!0;for(var F=void 0,X=0;X<v.markedSpans.length;++X)if(F=v.markedSpans[X],F.marker.collapsed&&!F.marker.widgetNode&&F.from==B.to&&(F.to==null||F.to!=B.from)&&(F.marker.inclusiveLeft||B.marker.inclusiveRight)&&co(d,v,F))return!0}function Go(d){d=Di(d);for(var v=0,B=d.parent,E=0;E<B.lines.length;++E){var F=B.lines[E];if(F==d)break;v+=F.height}for(var X=B.parent;X;B=X,X=B.parent)for(var fe=0;fe<X.children.length;++fe){var _e=X.children[fe];if(_e==B)break;v+=_e.height}return v}function zr(d){if(d.height==0)return 0;for(var v=d.text.length,B,E=d;B=Si(E);){var F=B.find(0,!0);E=F.from.line,v+=F.from.ch-F.to.ch}for(E=d;B=Xn(E);){var X=B.find(0,!0);v-=E.text.length-X.from.ch,E=X.to.line,v+=E.text.length-X.to.ch}return v}function Ys(d){var v=d.display,B=d.doc;v.maxLine=xi(B,B.first),v.maxLineLength=zr(v.maxLine),v.maxLineChanged=!0,B.iter(function(E){var F=zr(E);F>v.maxLineLength&&(v.maxLineLength=F,v.maxLine=E)})}var Ll=function(d,v,B){this.text=d,Qr(this,v),this.height=B?B(this):1};Ll.prototype.lineNo=function(){return $e(this)},ii(Ll);function qA(d,v,B,E){d.text=v,d.stateAfter&&(d.stateAfter=null),d.styles&&(d.styles=null),d.order!=null&&(d.order=null),Mi(d),Qr(d,B);var F=E?E(d):1;F!=d.height&&Vo(d,F)}function fs(d){d.parent=null,Mi(d)}var gd={},Da={};function yd(d,v){if(!d||/^\s*$/.test(d))return null;var B=v.addModeClass?Da:gd;return B[d]||(B[d]=d.replace(/\S+/g,"cm-$&"))}function Ru(d,v){var B=ze("span",null,null,S?"padding-right: .1px":null),E={pre:ze("pre",[B],"CodeMirror-line"),content:B,col:0,pos:0,cm:d,trailingSpace:!1,splitSpaces:d.getOption("lineWrapping")};v.measure={};for(var F=0;F<=(v.rest?v.rest.length:0);F++){var X=F?v.rest[F-1]:v.line,fe=void 0;E.pos=0,E.addToken=ph,pa(d.display.measure)&&(fe=Ze(X,d.doc.direction))&&(E.addToken=po(E.addToken,fe)),E.map=[];var _e=v!=d.display.externalMeasured&&$e(X);vd(X,E,Qs(d,X,_e)),X.styleClasses&&(X.styleClasses.bgClass&&(E.bgClass=Ne(X.styleClasses.bgClass,E.bgClass||"")),X.styleClasses.textClass&&(E.textClass=Ne(X.styleClasses.textClass,E.textClass||""))),E.map.length==0&&E.map.push(0,0,E.content.appendChild(lo(d.display.measure))),F==0?(v.measure.map=E.map,v.measure.cache={}):((v.measure.maps||(v.measure.maps=[])).push(E.map),(v.measure.caches||(v.measure.caches=[])).push({}))}if(S){var ke=E.content.lastChild;(/\bcm-tab\b/.test(ke.className)||ke.querySelector&&ke.querySelector(".cm-tab"))&&(E.content.className="cm-tab-wrap-hack")}return it(d,"renderLine",d,v.line,E.pre),E.pre.className&&(E.textClass=Ne(E.pre.className,E.textClass||"")),E}function HA(d){var v=xe("span","•","cm-invalidchar");return v.title="\\u"+d.charCodeAt(0).toString(16),v.setAttribute("aria-label",v.title),v}function ph(d,v,B,E,F,X,fe){if(v){var _e=d.splitSpaces?Nh(v,d.trailingSpace):v,ke=d.cm.state.specialChars,Fe=!1,_t;if(!ke.test(v))d.col+=v.length,_t=document.createTextNode(_e),d.map.push(d.pos,d.pos+v.length,_t),m&&C<9&&(Fe=!0),d.pos+=v.length;else{_t=document.createDocumentFragment();for(var Tt=0;;){ke.lastIndex=Tt;var Jt=ke.exec(v),Ht=Jt?Jt.index-Tt:v.length-Tt;if(Ht){var _n=document.createTextNode(_e.slice(Tt,Tt+Ht));m&&C<9?_t.appendChild(xe("span",[_n])):_t.appendChild(_n),d.map.push(d.pos,d.pos+Ht,_n),d.col+=Ht,d.pos+=Ht}if(!Jt)break;Tt+=Ht+1;var Rn=void 0;if(Jt[0]=="	"){var oi=d.cm.options.tabSize,pi=oi-d.col%oi;Rn=_t.appendChild(xe("span",Wt(pi),"cm-tab")),Rn.setAttribute("role","presentation"),Rn.setAttribute("cm-text","	"),d.col+=pi}else Jt[0]=="\r"||Jt[0]==`
`?(Rn=_t.appendChild(xe("span",Jt[0]=="\r"?"␍":"␤","cm-invalidchar")),Rn.setAttribute("cm-text",Jt[0]),d.col+=1):(Rn=d.cm.options.specialCharPlaceholder(Jt[0]),Rn.setAttribute("cm-text",Jt[0]),m&&C<9?_t.appendChild(xe("span",[Rn])):_t.appendChild(Rn),d.col+=1);d.map.push(d.pos,d.pos+1,Rn),d.pos++}}if(d.trailingSpace=_e.charCodeAt(v.length-1)==32,B||E||F||Fe||X||fe){var Ci=B||"";E&&(Ci+=E),F&&(Ci+=F);var gi=xe("span",[_t],Ci,X);if(fe)for(var ki in fe)fe.hasOwnProperty(ki)&&ki!="style"&&ki!="class"&&gi.setAttribute(ki,fe[ki]);return d.content.appendChild(gi)}d.content.appendChild(_t)}}function Nh(d,v){if(d.length>1&&!/  /.test(d))return d;for(var B=v,E="",F=0;F<d.length;F++){var X=d.charAt(F);X==" "&&B&&(F==d.length-1||d.charCodeAt(F+1)==32)&&(X=" "),E+=X,B=X==" "}return E}function po(d,v){return function(B,E,F,X,fe,_e,ke){F=F?F+" cm-force-border":"cm-force-border";for(var Fe=B.pos,_t=Fe+E.length;;){for(var Tt=void 0,Jt=0;Jt<v.length&&(Tt=v[Jt],!(Tt.to>Fe&&Tt.from<=Fe));Jt++);if(Tt.to>=_t)return d(B,E,F,X,fe,_e,ke);d(B,E.slice(0,Tt.to-Fe),F,X,null,_e,ke),X=null,E=E.slice(Tt.to-Fe),Fe=Tt.to}}}function ic(d,v,B,E){var F=!E&&B.widgetNode;F&&d.map.push(d.pos,d.pos+v,F),!E&&d.cm.display.input.needsContentAttribute&&(F||(F=d.content.appendChild(document.createElement("span"))),F.setAttribute("cm-marker",B.id)),F&&(d.cm.display.input.setUneditable(F),d.content.appendChild(F)),d.pos+=v,d.trailingSpace=!1}function vd(d,v,B){var E=d.markedSpans,F=d.text,X=0;if(!E){for(var fe=1;fe<B.length;fe+=2)v.addToken(v,F.slice(X,X=B[fe]),yd(B[fe+1],v.cm.options));return}for(var _e=F.length,ke=0,Fe=1,_t="",Tt,Jt,Ht=0,_n,Rn,oi,pi,Ci;;){if(Ht==ke){_n=Rn=oi=Jt="",Ci=null,pi=null,Ht=1/0;for(var gi=[],ki=void 0,ar=0;ar<E.length;++ar){var Yi=E[ar],Xr=Yi.marker;if(Xr.type=="bookmark"&&Yi.from==ke&&Xr.widgetNode)gi.push(Xr);else if(Yi.from<=ke&&(Yi.to==null||Yi.to>ke||Xr.collapsed&&Yi.to==ke&&Yi.from==ke)){if(Yi.to!=null&&Yi.to!=ke&&Ht>Yi.to&&(Ht=Yi.to,Rn=""),Xr.className&&(_n+=" "+Xr.className),Xr.css&&(Jt=(Jt?Jt+";":"")+Xr.css),Xr.startStyle&&Yi.from==ke&&(oi+=" "+Xr.startStyle),Xr.endStyle&&Yi.to==Ht&&(ki||(ki=[])).push(Xr.endStyle,Yi.to),Xr.title&&((Ci||(Ci={})).title=Xr.title),Xr.attributes)for(var xr in Xr.attributes)(Ci||(Ci={}))[xr]=Xr.attributes[xr];Xr.collapsed&&(!pi||st(pi.marker,Xr)<0)&&(pi=Yi)}else Yi.from>ke&&Ht>Yi.from&&(Ht=Yi.from)}if(ki)for(var ns=0;ns<ki.length;ns+=2)ki[ns+1]==Ht&&(Rn+=" "+ki[ns]);if(!pi||pi.from==ke)for(var ua=0;ua<gi.length;++ua)ic(v,0,gi[ua]);if(pi&&(pi.from||0)==ke){if(ic(v,(pi.to==null?_e+1:pi.to)-ke,pi.marker,pi.from==null),pi.to==null)return;pi.to==ke&&(pi=!1)}}if(ke>=_e)break;for(var Yr=Math.min(_e,Ht);;){if(_t){var ys=ke+_t.length;if(!pi){var vs=ys>Yr?_t.slice(0,Yr-ke):_t;v.addToken(v,vs,Tt?Tt+_n:_n,oi,ke+vs.length==Ht?Rn:"",Jt,Ci)}if(ys>=Yr){_t=_t.slice(Yr-ke),ke=Yr;break}ke=ys,oi=""}_t=F.slice(X,X=B[Fe++]),Tt=yd(B[Fe++],v.cm.options)}}}function dp(d,v,B){this.line=v,this.rest=eo(v),this.size=this.rest?$e($n(this.rest))-B+1:1,this.node=this.text=null,this.hidden=pr(d,v)}function gh(d,v,B){for(var E=[],F,X=v;X<B;X=F){var fe=new dp(d.doc,xi(d.doc,X),X);F=X+fe.size,E.push(fe)}return E}var Cd=null;function o0(d){Cd?Cd.ops.push(d):d.ownsGroup=Cd={ops:[d],delayedCallbacks:[]}}function Tf(d){var v=d.delayedCallbacks,B=0;do{for(;B<v.length;B++)v[B].call(null);for(var E=0;E<d.ops.length;E++){var F=d.ops[E];if(F.cursorActivityHandlers)for(;F.cursorActivityCalled<F.cursorActivityHandlers.length;)F.cursorActivityHandlers[F.cursorActivityCalled++].call(null,F.cm)}}while(B<v.length)}function kf(d,v){var B=d.ownsGroup;if(B)try{Tf(B)}finally{Cd=null,v(B)}}var VA=null;function Xa(d,v){var B=ht(d,v);if(B.length){var E=Array.prototype.slice.call(arguments,2),F;Cd?F=Cd.delayedCallbacks:VA?F=VA:(F=VA=[],setTimeout(_d,0));for(var X=function(_e){F.push(function(){return B[_e].apply(null,E)})},fe=0;fe<B.length;++fe)X(fe)}}function _d(){var d=VA;VA=null;for(var v=0;v<d.length;++v)d[v]()}function Fl(d,v,B,E){for(var F=0;F<v.changes.length;F++){var X=v.changes[F];X=="text"?jh(d,v):X=="gutter"?yh(d,v,B,E):X=="class"?Df(d,v):X=="widget"&&vh(d,v,E)}v.changes=null}function bd(d){return d.node==d.text&&(d.node=xe("div",null,null,"position: relative"),d.text.parentNode&&d.text.parentNode.replaceChild(d.node,d.text),d.node.appendChild(d.text),m&&C<8&&(d.node.style.zIndex=2)),d.node}function Gh(d,v){var B=v.bgClass?v.bgClass+" "+(v.line.bgClass||""):v.line.bgClass;if(B&&(B+=" CodeMirror-linebackground"),v.background)B?v.background.className=B:(v.background.parentNode.removeChild(v.background),v.background=null);else if(B){var E=bd(v);v.background=E.insertBefore(xe("div",null,B),E.firstChild),d.display.input.setUneditable(v.background)}}function Yc(d,v){var B=d.display.externalMeasured;return B&&B.line==v.line?(d.display.externalMeasured=null,v.measure=B.measure,B.built):Ru(d,v)}function jh(d,v){var B=v.text.className,E=Yc(d,v);v.text==v.node&&(v.node=E.pre),v.text.parentNode.replaceChild(E.pre,v.text),v.text=E.pre,E.bgClass!=v.bgClass||E.textClass!=v.textClass?(v.bgClass=E.bgClass,v.textClass=E.textClass,Df(d,v)):B&&(v.text.className=B)}function Df(d,v){Gh(d,v),v.line.wrapClass?bd(v).className=v.line.wrapClass:v.node!=v.text&&(v.node.className="");var B=v.textClass?v.textClass+" "+(v.line.textClass||""):v.line.textClass;v.text.className=B||""}function yh(d,v,B,E){if(v.gutter&&(v.node.removeChild(v.gutter),v.gutter=null),v.gutterBackground&&(v.node.removeChild(v.gutterBackground),v.gutterBackground=null),v.line.gutterClass){var F=bd(v);v.gutterBackground=xe("div",null,"CodeMirror-gutter-background "+v.line.gutterClass,"left: "+(d.options.fixedGutter?E.fixedPos:-E.gutterTotalWidth)+"px; width: "+E.gutterTotalWidth+"px"),d.display.input.setUneditable(v.gutterBackground),F.insertBefore(v.gutterBackground,v.text)}var X=v.line.gutterMarkers;if(d.options.lineNumbers||X){var fe=bd(v),_e=v.gutter=xe("div",null,"CodeMirror-gutter-wrapper","left: "+(d.options.fixedGutter?E.fixedPos:-E.gutterTotalWidth)+"px");if(_e.setAttribute("aria-hidden","true"),d.display.input.setUneditable(_e),fe.insertBefore(_e,v.text),v.line.gutterClass&&(_e.className+=" "+v.line.gutterClass),d.options.lineNumbers&&(!X||!X["CodeMirror-linenumbers"])&&(v.lineNumber=_e.appendChild(xe("div",jn(d.options,B),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+E.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+d.display.lineNumInnerWidth+"px"))),X)for(var ke=0;ke<d.display.gutterSpecs.length;++ke){var Fe=d.display.gutterSpecs[ke].className,_t=X.hasOwnProperty(Fe)&&X[Fe];_t&&_e.appendChild(xe("div",[_t],"CodeMirror-gutter-elt","left: "+E.gutterLeft[Fe]+"px; width: "+E.gutterWidth[Fe]+"px"))}}}function vh(d,v,B){v.alignable&&(v.alignable=null);for(var E=Me("CodeMirror-linewidget"),F=v.node.firstChild,X=void 0;F;F=X)X=F.nextSibling,E.test(F.className)&&v.node.removeChild(F);Rf(d,v,B)}function Wh(d,v,B,E){var F=Yc(d,v);return v.text=v.node=F.pre,F.bgClass&&(v.bgClass=F.bgClass),F.textClass&&(v.textClass=F.textClass),Df(d,v),yh(d,v,B,E),Rf(d,v,E),v.node}function Rf(d,v,B){if(oA(d,v.line,v,B,!0),v.rest)for(var E=0;E<v.rest.length;E++)oA(d,v.rest[E],v,B,!1)}function oA(d,v,B,E,F){if(v.widgets)for(var X=bd(B),fe=0,_e=v.widgets;fe<_e.length;++fe){var ke=_e[fe],Fe=xe("div",[ke.node],"CodeMirror-linewidget"+(ke.className?" "+ke.className:""));ke.handleMouseEvents||Fe.setAttribute("cm-ignore-events","true"),Pf(ke,Fe,B,E),d.display.input.setUneditable(Fe),F&&ke.above?X.insertBefore(Fe,B.gutter||B.text):X.appendChild(Fe),Xa(ke,"redraw")}}function Pf(d,v,B,E){if(d.noHScroll){(B.alignable||(B.alignable=[])).push(v);var F=E.wrapperWidth;v.style.left=E.fixedPos+"px",d.coverGutter||(F-=E.gutterTotalWidth,v.style.paddingLeft=E.gutterTotalWidth+"px"),v.style.width=F+"px"}d.coverGutter&&(v.style.zIndex=5,v.style.position="relative",d.noHScroll||(v.style.marginLeft=-E.gutterTotalWidth+"px"))}function rc(d){if(d.height!=null)return d.height;var v=d.doc.cm;if(!v)return 0;if(!yt(document.body,d.node)){var B="position: relative;";d.coverGutter&&(B+="margin-left: -"+v.display.gutters.offsetWidth+"px;"),d.noHScroll&&(B+="width: "+v.display.wrapper.clientWidth+"px;"),qe(v.display.measure,xe("div",[d.node],null,B))}return d.height=d.node.parentNode.offsetHeight}function aA(d,v){for(var B=hi(v);B!=d.wrapper;B=B.parentNode)if(!B||B.nodeType==1&&B.getAttribute("cm-ignore-events")=="true"||B.parentNode==d.sizer&&B!=d.mover)return!0}function xc(d){return d.lineSpace.offsetTop}function xd(d){return d.mover.offsetHeight-d.lineSpace.offsetHeight}function Md(d){if(d.cachedPaddingH)return d.cachedPaddingH;var v=qe(d.measure,xe("pre","x","CodeMirror-line-like")),B=window.getComputedStyle?window.getComputedStyle(v):v.currentStyle,E={left:parseInt(B.paddingLeft),right:parseInt(B.paddingRight)};return!isNaN(E.left)&&!isNaN(E.right)&&(d.cachedPaddingH=E),E}function Pu(d){return bt-d.display.nativeBarWidth}function $A(d){return d.display.scroller.clientWidth-Pu(d)-d.display.barWidth}function Qh(d){return d.display.scroller.clientHeight-Pu(d)-d.display.barHeight}function Mc(d,v,B){var E=d.options.lineWrapping,F=E&&$A(d);if(!v.measure.heights||E&&v.measure.width!=F){var X=v.measure.heights=[];if(E){v.measure.width=F;for(var fe=v.text.firstChild.getClientRects(),_e=0;_e<fe.length-1;_e++){var ke=fe[_e],Fe=fe[_e+1];Math.abs(ke.bottom-Fe.bottom)>2&&X.push((ke.bottom+Fe.top)/2-B.top)}}X.push(B.bottom-B.top)}}function Yh(d,v,B){if(d.line==v)return{map:d.measure.map,cache:d.measure.cache};if(d.rest){for(var E=0;E<d.rest.length;E++)if(d.rest[E]==v)return{map:d.measure.maps[E],cache:d.measure.caches[E]};for(var F=0;F<d.rest.length;F++)if($e(d.rest[F])>B)return{map:d.measure.maps[F],cache:d.measure.caches[F],before:!0}}}function fp(d,v){v=Di(v);var B=$e(v),E=d.display.externalMeasured=new dp(d.doc,v,B);E.lineN=B;var F=E.built=Ru(d,E);return E.text=F.pre,qe(d.display.lineMeasure,F.pre),E}function qc(d,v,B,E){return ZA(d,hu(d,v),B,E)}function Vd(d,v){if(v>=d.display.viewFrom&&v<d.display.viewTo)return d.display.view[Hs(d,v)];var B=d.display.externalMeasured;if(B&&v>=B.lineN&&v<B.lineN+B.size)return B}function hu(d,v){var B=$e(v),E=Vd(d,B);E&&!E.text?E=null:E&&E.changes&&(Fl(d,E,B,Il(d)),d.curOp.forceUpdate=!0),E||(E=fp(d,v));var F=Yh(E,v,B);return{line:v,view:E,rect:null,map:F.map,cache:F.cache,before:F.before,hasHeights:!1}}function ZA(d,v,B,E,F){v.before&&(B=-1);var X=B+(E||""),fe;return v.cache.hasOwnProperty(X)?fe=v.cache[X]:(v.rect||(v.rect=v.view.text.getBoundingClientRect()),v.hasHeights||(Mc(d,v.view,v.rect),v.hasHeights=!0),fe=oc(d,v,B,E),fe.bogus||(v.cache[X]=fe)),{left:fe.left,right:fe.right,top:F?fe.rtop:fe.top,bottom:F?fe.rbottom:fe.bottom}}var Mm={left:0,right:0,top:0,bottom:0};function Kf(d,v,B){for(var E,F,X,fe,_e,ke,Fe=0;Fe<d.length;Fe+=3)if(_e=d[Fe],ke=d[Fe+1],v<_e?(F=0,X=1,fe="left"):v<ke?(F=v-_e,X=F+1):(Fe==d.length-3||v==ke&&d[Fe+3]>v)&&(X=ke-_e,F=X-1,v>=ke&&(fe="right")),F!=null){if(E=d[Fe+2],_e==ke&&B==(E.insertLeft?"left":"right")&&(fe=B),B=="left"&&F==0)for(;Fe&&d[Fe-2]==d[Fe-3]&&d[Fe-1].insertLeft;)E=d[(Fe-=3)+2],fe="left";if(B=="right"&&F==ke-_e)for(;Fe<d.length-3&&d[Fe+3]==d[Fe+4]&&!d[Fe+5].insertLeft;)E=d[(Fe+=3)+2],fe="right";break}return{node:E,start:F,end:X,collapse:fe,coverStart:_e,coverEnd:ke}}function xA(d,v){var B=Mm;if(v=="left")for(var E=0;E<d.length&&(B=d[E]).left==B.right;E++);else for(var F=d.length-1;F>=0&&(B=d[F]).left==B.right;F--);return B}function oc(d,v,B,E){var F=Kf(v.map,B,E),X=F.node,fe=F.start,_e=F.end,ke=F.collapse,Fe;if(X.nodeType==3){for(var _t=0;_t<4;_t++){for(;fe&&le(v.line.text.charAt(F.coverStart+fe));)--fe;for(;F.coverStart+_e<F.coverEnd&&le(v.line.text.charAt(F.coverStart+_e));)++_e;if(m&&C<9&&fe==0&&_e==F.coverEnd-F.coverStart?Fe=X.parentNode.getBoundingClientRect():Fe=xA(ot(X,fe,_e).getClientRects(),E),Fe.left||Fe.right||fe==0)break;_e=fe,fe=fe-1,ke="right"}m&&C<11&&(Fe=MA(d.display.measure,Fe))}else{fe>0&&(ke=E="right");var Tt;d.options.lineWrapping&&(Tt=X.getClientRects()).length>1?Fe=Tt[E=="right"?Tt.length-1:0]:Fe=X.getBoundingClientRect()}if(m&&C<9&&!fe&&(!Fe||!Fe.left&&!Fe.right)){var Jt=X.parentNode.getClientRects()[0];Jt?Fe={left:Jt.left,right:Jt.left+wA(d.display),top:Jt.top,bottom:Jt.bottom}:Fe=Mm}for(var Ht=Fe.top-v.rect.top,_n=Fe.bottom-v.rect.top,Rn=(Ht+_n)/2,oi=v.view.measure.heights,pi=0;pi<oi.length-1&&!(Rn<oi[pi]);pi++);var Ci=pi?oi[pi-1]:0,gi=oi[pi],ki={left:(ke=="right"?Fe.right:Fe.left)-v.rect.left,right:(ke=="left"?Fe.left:Fe.right)-v.rect.left,top:Ci,bottom:gi};return!Fe.left&&!Fe.right&&(ki.bogus=!0),d.options.singleCursorHeightPerLine||(ki.rtop=Ht,ki.rbottom=_n),ki}function MA(d,v){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!vr(d))return v;var B=screen.logicalXDPI/screen.deviceXDPI,E=screen.logicalYDPI/screen.deviceYDPI;return{left:v.left*B,right:v.right*B,top:v.top*E,bottom:v.bottom*E}}function Ku(d){if(d.measure&&(d.measure.cache={},d.measure.heights=null,d.rest))for(var v=0;v<d.rest.length;v++)d.measure.caches[v]={}}function Bo(d){d.display.externalMeasure=null,we(d.display.lineMeasure);for(var v=0;v<d.display.view.length;v++)Ku(d.display.view[v])}function Ch(d){Bo(d),d.display.cachedCharWidth=d.display.cachedTextHeight=d.display.cachedPaddingH=null,d.options.lineWrapping||(d.display.maxLineChanged=!0),d.display.lineNumChars=null}function Sd(d){return U&&ae?-(d.body.getBoundingClientRect().left-parseInt(getComputedStyle(d.body).marginLeft)):d.defaultView.pageXOffset||(d.documentElement||d.body).scrollLeft}function Sm(d){return U&&ae?-(d.body.getBoundingClientRect().top-parseInt(getComputedStyle(d.body).marginTop)):d.defaultView.pageYOffset||(d.documentElement||d.body).scrollTop}function Sc(d){var v=Di(d),B=v.widgets,E=0;if(B)for(var F=0;F<B.length;++F)B[F].above&&(E+=rc(B[F]));return E}function zl(d,v,B,E,F){if(!F){var X=Sc(v);B.top+=X,B.bottom+=X}if(E=="line")return B;E||(E="local");var fe=Go(v);if(E=="local"?fe+=xc(d.display):fe-=d.display.viewOffset,E=="page"||E=="window"){var _e=d.display.lineSpace.getBoundingClientRect();fe+=_e.top+(E=="window"?0:Sm(lt(d)));var ke=_e.left+(E=="window"?0:Sd(lt(d)));B.left+=ke,B.right+=ke}return B.top+=fe,B.bottom+=fe,B}function Zt(d,v,B){if(B=="div")return v;var E=v.left,F=v.top;if(B=="page")E-=Sd(lt(d)),F-=Sm(lt(d));else if(B=="local"||!B){var X=d.display.sizer.getBoundingClientRect();E+=X.left,F+=X.top}var fe=d.display.lineSpace.getBoundingClientRect();return{left:E-fe.left,top:F-fe.top}}function wn(d,v,B,E,F){return E||(E=xi(d.doc,v.line)),zl(d,E,qc(d,E,v.ch,F),B)}function vn(d,v,B,E,F,X){E=E||xi(d.doc,v.line),F||(F=hu(d,E));function fe(_n,Rn){var oi=ZA(d,F,_n,Rn?"right":"left",X);return Rn?oi.left=oi.right:oi.right=oi.left,zl(d,E,oi,B)}var _e=Ze(E,d.doc.direction),ke=v.ch,Fe=v.sticky;if(ke>=E.text.length?(ke=E.text.length,Fe="before"):ke<=0&&(ke=0,Fe="after"),!_e)return fe(Fe=="before"?ke-1:ke,Fe=="before");function _t(_n,Rn,oi){var pi=_e[Rn],Ci=pi.level==1;return fe(oi?_n-1:_n,Ci!=oi)}var Tt=Ye(_e,ke,Fe),Jt=dt,Ht=_t(ke,Tt,Fe=="before");return Jt!=null&&(Ht.other=_t(ke,Jt,Fe!="before")),Ht}function Ii(d,v){var B=0;v=Qi(d.doc,v),d.options.lineWrapping||(B=wA(d.display)*v.ch);var E=xi(d.doc,v.line),F=Go(E)+xc(d.display);return{left:B,right:B,top:F,bottom:F+E.height}}function Sr(d,v,B,E,F){var X=rn(d,v,B);return X.xRel=F,E&&(X.outside=E),X}function Oo(d,v,B){var E=d.doc;if(B+=d.display.viewOffset,B<0)return Sr(E.first,0,null,-1,-1);var F=Et(E,B),X=E.first+E.size-1;if(F>X)return Sr(E.first+E.size-1,xi(E,X).text.length,null,1,1);v<0&&(v=0);for(var fe=xi(E,F);;){var _e=$d(d,fe,F,v,B),ke=$i(fe,_e.ch+(_e.xRel>0||_e.outside>0?1:0));if(!ke)return _e;var Fe=ke.find(1);if(Fe.line==F)return Fe;fe=xi(E,F=Fe.line)}}function qs(d,v,B,E){E-=Sc(v);var F=v.text.length,X=Te(function(fe){return ZA(d,B,fe-1).bottom<=E},F,0);return F=Te(function(fe){return ZA(d,B,fe).top>E},X,F),{begin:X,end:F}}function Do(d,v,B,E){B||(B=hu(d,v));var F=zl(d,v,ZA(d,B,E),"line").top;return qs(d,v,B,F)}function Hc(d,v,B,E){return d.bottom<=B?!1:d.top>B?!0:(E?d.left:d.right)>v}function $d(d,v,B,E,F){F-=Go(v);var X=hu(d,v),fe=Sc(v),_e=0,ke=v.text.length,Fe=!0,_t=Ze(v,d.doc.direction);if(_t){var Tt=(d.options.lineWrapping?wd:sA)(d,v,B,X,_t,E,F);Fe=Tt.level!=1,_e=Fe?Tt.from:Tt.to-1,ke=Fe?Tt.to:Tt.from-1}var Jt=null,Ht=null,_n=Te(function(ar){var Yi=ZA(d,X,ar);return Yi.top+=fe,Yi.bottom+=fe,Hc(Yi,E,F,!1)?(Yi.top<=F&&Yi.left<=E&&(Jt=ar,Ht=Yi),!0):!1},_e,ke),Rn,oi,pi=!1;if(Ht){var Ci=E-Ht.left<Ht.right-E,gi=Ci==Fe;_n=Jt+(gi?0:1),oi=gi?"after":"before",Rn=Ci?Ht.left:Ht.right}else{!Fe&&(_n==ke||_n==_e)&&_n++,oi=_n==0?"after":_n==v.text.length?"before":ZA(d,X,_n-(Fe?1:0)).bottom+fe<=F==Fe?"after":"before";var ki=vn(d,rn(B,_n,oi),"line",v,X);Rn=ki.left,pi=F<ki.top?-1:F>=ki.bottom?1:0}return _n=me(v.text,_n,1),Sr(B,_n,oi,pi,E-Rn)}function sA(d,v,B,E,F,X,fe){var _e=Te(function(Tt){var Jt=F[Tt],Ht=Jt.level!=1;return Hc(vn(d,rn(B,Ht?Jt.to:Jt.from,Ht?"before":"after"),"line",v,E),X,fe,!0)},0,F.length-1),ke=F[_e];if(_e>0){var Fe=ke.level!=1,_t=vn(d,rn(B,Fe?ke.from:ke.to,Fe?"after":"before"),"line",v,E);Hc(_t,X,fe,!0)&&_t.top>fe&&(ke=F[_e-1])}return ke}function wd(d,v,B,E,F,X,fe){var _e=qs(d,v,E,fe),ke=_e.begin,Fe=_e.end;/\s/.test(v.text.charAt(Fe-1))&&Fe--;for(var _t=null,Tt=null,Jt=0;Jt<F.length;Jt++){var Ht=F[Jt];if(!(Ht.from>=Fe||Ht.to<=ke)){var _n=Ht.level!=1,Rn=ZA(d,E,_n?Math.min(Fe,Ht.to)-1:Math.max(ke,Ht.from)).right,oi=Rn<X?X-Rn+1e9:Rn-X;(!_t||Tt>oi)&&(_t=Ht,Tt=oi)}}return _t||(_t=F[F.length-1]),_t.from<ke&&(_t={from:ke,to:_t.to,level:_t.level}),_t.to>Fe&&(_t={from:_t.from,to:Fe,level:_t.level}),_t}var du;function SA(d){if(d.cachedTextHeight!=null)return d.cachedTextHeight;if(du==null){du=xe("pre",null,"CodeMirror-line-like");for(var v=0;v<49;++v)du.appendChild(document.createTextNode("x")),du.appendChild(xe("br"));du.appendChild(document.createTextNode("x"))}qe(d.measure,du);var B=du.offsetHeight/50;return B>3&&(d.cachedTextHeight=B),we(d.measure),B||1}function wA(d){if(d.cachedCharWidth!=null)return d.cachedCharWidth;var v=xe("span","xxxxxxxxxx"),B=xe("pre",[v],"CodeMirror-line-like");qe(d.measure,B);var E=v.getBoundingClientRect(),F=(E.right-E.left)/10;return F>2&&(d.cachedCharWidth=F),F||10}function Il(d){for(var v=d.display,B={},E={},F=v.gutters.clientLeft,X=v.gutters.firstChild,fe=0;X;X=X.nextSibling,++fe){var _e=d.display.gutterSpecs[fe].className;B[_e]=X.offsetLeft+X.clientLeft+F,E[_e]=X.clientWidth}return{fixedPos:jo(v),gutterTotalWidth:v.gutters.offsetWidth,gutterLeft:B,gutterWidth:E,wrapperWidth:v.wrapper.clientWidth}}function jo(d){return d.scroller.getBoundingClientRect().left-d.sizer.getBoundingClientRect().left}function fu(d){var v=SA(d.display),B=d.options.lineWrapping,E=B&&Math.max(5,d.display.scroller.clientWidth/wA(d.display)-3);return function(F){if(pr(d.doc,F))return 0;var X=0;if(F.widgets)for(var fe=0;fe<F.widgets.length;fe++)F.widgets[fe].height&&(X+=F.widgets[fe].height);return B?X+(Math.ceil(F.text.length/E)||1)*v:X+v}}function qh(d){var v=d.doc,B=fu(d);v.iter(function(E){var F=B(E);F!=E.height&&Vo(E,F)})}function Na(d,v,B,E){var F=d.display;if(!B&&hi(v).getAttribute("cm-not-content")=="true")return null;var X,fe,_e=F.lineSpace.getBoundingClientRect();try{X=v.clientX-_e.left,fe=v.clientY-_e.top}catch{return null}var ke=Oo(d,X,fe),Fe;if(E&&ke.xRel>0&&(Fe=xi(d.doc,ke.line).text).length==ke.ch){var _t=Pe(Fe,Fe.length,d.options.tabSize)-Fe.length;ke=rn(ke.line,Math.max(0,Math.round((X-Md(d.display).left)/wA(d.display))-_t))}return ke}function Hs(d,v){if(v>=d.display.viewTo||(v-=d.display.viewFrom,v<0))return null;for(var B=d.display.view,E=0;E<B.length;E++)if(v-=B[E].size,v<0)return E}function ws(d,v,B,E){v==null&&(v=d.doc.first),B==null&&(B=d.doc.first+d.doc.size),E||(E=0);var F=d.display;if(E&&B<F.viewTo&&(F.updateLineNumbers==null||F.updateLineNumbers>v)&&(F.updateLineNumbers=v),d.curOp.viewChanged=!0,v>=F.viewTo)Eo&&uo(d.doc,v)<F.viewTo&&Nl(d);else if(B<=F.viewFrom)Eo&&ur(d.doc,B+E)>F.viewFrom?Nl(d):(F.viewFrom+=E,F.viewTo+=E);else if(v<=F.viewFrom&&B>=F.viewTo)Nl(d);else if(v<=F.viewFrom){var X=EA(d,B,B+E,1);X?(F.view=F.view.slice(X.index),F.viewFrom=X.lineN,F.viewTo+=E):Nl(d)}else if(B>=F.viewTo){var fe=EA(d,v,v,-1);fe?(F.view=F.view.slice(0,fe.index),F.viewTo=fe.lineN):Nl(d)}else{var _e=EA(d,v,v,-1),ke=EA(d,B,B+E,1);_e&&ke?(F.view=F.view.slice(0,_e.index).concat(gh(d,_e.lineN,ke.lineN)).concat(F.view.slice(ke.index)),F.viewTo+=E):Nl(d)}var Fe=F.externalMeasured;Fe&&(B<Fe.lineN?Fe.lineN+=E:v<Fe.lineN+Fe.size&&(F.externalMeasured=null))}function XA(d,v,B){d.curOp.viewChanged=!0;var E=d.display,F=d.display.externalMeasured;if(F&&v>=F.lineN&&v<F.lineN+F.size&&(E.externalMeasured=null),!(v<E.viewFrom||v>=E.viewTo)){var X=E.view[Hs(d,v)];if(X.node!=null){var fe=X.changes||(X.changes=[]);He(fe,B)==-1&&fe.push(B)}}}function Nl(d){d.display.viewFrom=d.display.viewTo=d.doc.first,d.display.view=[],d.display.viewOffset=0}function EA(d,v,B,E){var F=Hs(d,v),X,fe=d.display.view;if(!Eo||B==d.doc.first+d.doc.size)return{index:F,lineN:B};for(var _e=d.display.viewFrom,ke=0;ke<F;ke++)_e+=fe[ke].size;if(_e!=v){if(E>0){if(F==fe.length-1)return null;X=_e+fe[F].size-v,F++}else X=_e-v;v+=X,B+=X}for(;uo(d.doc,B)!=B;){if(F==(E<0?0:fe.length-1))return null;B+=E*fe[F-(E<0?1:0)].size,F+=E}return{index:F,lineN:B}}function ac(d,v,B){var E=d.display,F=E.view;F.length==0||v>=E.viewTo||B<=E.viewFrom?(E.view=gh(d,v,B),E.viewFrom=v):(E.viewFrom>v?E.view=gh(d,v,E.viewFrom).concat(E.view):E.viewFrom<v&&(E.view=E.view.slice(Hs(d,v))),E.viewFrom=v,E.viewTo<B?E.view=E.view.concat(gh(d,E.viewTo,B)):E.viewTo>B&&(E.view=E.view.slice(0,Hs(d,B)))),E.viewTo=B}function BA(d){for(var v=d.display.view,B=0,E=0;E<v.length;E++){var F=v[E];!F.hidden&&(!F.node||F.changes)&&++B}return B}function wc(d){d.display.input.showSelection(d.display.input.prepareSelection())}function _h(d,v){v===void 0&&(v=!0);var B=d.doc,E={},F=E.cursors=document.createDocumentFragment(),X=E.selection=document.createDocumentFragment(),fe=d.options.$customCursor;fe&&(v=!0);for(var _e=0;_e<B.sel.ranges.length;_e++)if(!(!v&&_e==B.sel.primIndex)){var ke=B.sel.ranges[_e];if(!(ke.from().line>=d.display.viewTo||ke.to().line<d.display.viewFrom)){var Fe=ke.empty();if(fe){var _t=fe(d,ke);_t&&Tr(d,_t,F)}else(Fe||d.options.showCursorWhenSelecting)&&Tr(d,ke.head,F);Fe||JA(d,ke,X)}}return E}function Tr(d,v,B){var E=vn(d,v,"div",null,null,!d.options.singleCursorHeightPerLine),F=B.appendChild(xe("div"," ","CodeMirror-cursor"));if(F.style.left=E.left+"px",F.style.top=E.top+"px",F.style.height=Math.max(0,E.bottom-E.top)*d.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(d.getWrapperElement().className)){var X=wn(d,v,"div",null,null),fe=X.right-X.left;F.style.width=(fe>0?fe:d.defaultCharWidth())+"px"}if(E.other){var _e=B.appendChild(xe("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));_e.style.display="",_e.style.left=E.other.left+"px",_e.style.top=E.other.top+"px",_e.style.height=(E.other.bottom-E.other.top)*.85+"px"}}function sc(d,v){return d.top-v.top||d.left-v.left}function JA(d,v,B){var E=d.display,F=d.doc,X=document.createDocumentFragment(),fe=Md(d.display),_e=fe.left,ke=Math.max(E.sizerWidth,$A(d)-E.sizer.offsetLeft)-fe.right,Fe=F.direction=="ltr";function _t(gi,ki,ar,Yi){ki<0&&(ki=0),ki=Math.round(ki),Yi=Math.round(Yi),X.appendChild(xe("div",null,"CodeMirror-selected","position: absolute; left: "+gi+`px;
                             top: `+ki+"px; width: "+(ar??ke-gi)+`px;
                             height: `+(Yi-ki)+"px"))}function Tt(gi,ki,ar){var Yi=xi(F,gi),Xr=Yi.text.length,xr,ns;function ua(vs,ca){return wn(d,rn(gi,vs),"div",Yi,ca)}function Yr(vs,ca,Vl){var Is=Do(d,Yi,null,vs),Ns=ca=="ltr"==(Vl=="after")?"left":"right",Br=Vl=="after"?Is.begin:Is.end-(/\s/.test(Yi.text.charAt(Is.end-1))?2:1);return ua(Br,Ns)[Ns]}var ys=Ze(Yi,F.direction);return We(ys,ki||0,ar??Xr,function(vs,ca,Vl,Is){var Ns=Vl=="ltr",Br=ua(vs,Ns?"left":"right"),Ea=ua(ca-1,Ns?"right":"left"),$l=ki==null&&vs==0,fc=ar==null&&ca==Xr,mA=Is==0,rh=!ys||Is==ys.length-1;if(Ea.top-Br.top<=3){var cs=(Fe?$l:fc)&&mA,Su=(Fe?fc:$l)&&rh,Ml=cs?_e:(Ns?Br:Ea).left,mc=Su?ke:(Ns?Ea:Br).right;_t(Ml,Br.top,mc-Ml,Br.bottom)}else{var al,pA,Vu,od;Ns?(al=Fe&&$l&&mA?_e:Br.left,pA=Fe?ke:Yr(vs,Vl,"before"),Vu=Fe?_e:Yr(ca,Vl,"after"),od=Fe&&fc&&rh?ke:Ea.right):(al=Fe?Yr(vs,Vl,"before"):_e,pA=!Fe&&$l&&mA?ke:Br.right,Vu=!Fe&&fc&&rh?_e:Ea.left,od=Fe?Yr(ca,Vl,"after"):ke),_t(al,Br.top,pA-al,Br.bottom),Br.bottom<Ea.top&&_t(_e,Br.bottom,null,Ea.top),_t(Vu,Ea.top,od-Vu,Ea.bottom)}(!xr||sc(Br,xr)<0)&&(xr=Br),sc(Ea,xr)<0&&(xr=Ea),(!ns||sc(Br,ns)<0)&&(ns=Br),sc(Ea,ns)<0&&(ns=Ea)}),{start:xr,end:ns}}var Jt=v.from(),Ht=v.to();if(Jt.line==Ht.line)Tt(Jt.line,Jt.ch,Ht.ch);else{var _n=xi(F,Jt.line),Rn=xi(F,Ht.line),oi=Di(_n)==Di(Rn),pi=Tt(Jt.line,Jt.ch,oi?_n.text.length+1:null).end,Ci=Tt(Ht.line,oi?0:null,Ht.ch).start;oi&&(pi.top<Ci.top-2?(_t(pi.right,pi.top,null,pi.bottom),_t(_e,Ci.top,Ci.left,Ci.bottom)):_t(pi.right,pi.top,Ci.left-pi.right,pi.bottom)),pi.bottom<Ci.top&&_t(_e,pi.bottom,null,Ci.top)}B.appendChild(X)}function Ec(d){if(d.state.focused){var v=d.display;clearInterval(v.blinker);var B=!0;v.cursorDiv.style.visibility="",d.options.cursorBlinkRate>0?v.blinker=setInterval(function(){d.hasFocus()||mu(d),v.cursorDiv.style.visibility=(B=!B)?"":"hidden"},d.options.cursorBlinkRate):d.options.cursorBlinkRate<0&&(v.cursorDiv.style.visibility="hidden")}}function Es(d){d.hasFocus()||(d.display.input.focus(),d.state.focused||Ed(d))}function bh(d){d.state.delayingBlurEvent=!0,setTimeout(function(){d.state.delayingBlurEvent&&(d.state.delayingBlurEvent=!1,d.state.focused&&mu(d))},100)}function Ed(d,v){d.state.delayingBlurEvent&&!d.state.draggingText&&(d.state.delayingBlurEvent=!1),d.options.readOnly!="nocursor"&&(d.state.focused||(it(d,"focus",d,v),d.state.focused=!0,be(d.display.wrapper,"CodeMirror-focused"),!d.curOp&&d.display.selForContextMenu!=d.doc.sel&&(d.display.input.reset(),S&&setTimeout(function(){return d.display.input.reset(!0)},20)),d.display.input.receivedFocus()),Ec(d))}function mu(d,v){d.state.delayingBlurEvent||(d.state.focused&&(it(d,"blur",d,v),d.state.focused=!1,Be(d.display.wrapper,"CodeMirror-focused")),clearInterval(d.display.blinker),setTimeout(function(){d.state.focused||(d.display.shift=!1)},150))}function Bd(d){for(var v=d.display,B=v.lineDiv.offsetTop,E=Math.max(0,v.scroller.getBoundingClientRect().top),F=v.lineDiv.getBoundingClientRect().top,X=0,fe=0;fe<v.view.length;fe++){var _e=v.view[fe],ke=d.options.lineWrapping,Fe=void 0,_t=0;if(!_e.hidden){if(F+=_e.line.height,m&&C<8){var Tt=_e.node.offsetTop+_e.node.offsetHeight;Fe=Tt-B,B=Tt}else{var Jt=_e.node.getBoundingClientRect();Fe=Jt.bottom-Jt.top,!ke&&_e.text.firstChild&&(_t=_e.text.firstChild.getBoundingClientRect().right-Jt.left-1)}var Ht=_e.line.height-Fe;if((Ht>.005||Ht<-.005)&&(F<E&&(X-=Ht),Vo(_e.line,Fe),Vc(_e.line),_e.rest))for(var _n=0;_n<_e.rest.length;_n++)Vc(_e.rest[_n]);if(_t>d.display.sizerWidth){var Rn=Math.ceil(_t/wA(d.display));Rn>d.display.maxLineLength&&(d.display.maxLineLength=Rn,d.display.maxLine=_e.line,d.display.maxLineChanged=!0)}}}Math.abs(X)>2&&(v.scroller.scrollTop+=X)}function Vc(d){if(d.widgets)for(var v=0;v<d.widgets.length;++v){var B=d.widgets[v],E=B.node.parentNode;E&&(B.height=E.offsetHeight)}}function OA(d,v,B){var E=B&&B.top!=null?Math.max(0,B.top):d.scroller.scrollTop;E=Math.floor(E-xc(d));var F=B&&B.bottom!=null?B.bottom:E+d.wrapper.clientHeight,X=Et(v,E),fe=Et(v,F);if(B&&B.ensure){var _e=B.ensure.from.line,ke=B.ensure.to.line;_e<X?(X=_e,fe=Et(v,Go(xi(v,_e))+d.wrapper.clientHeight)):Math.min(ke,v.lastLine())>=fe&&(X=Et(v,Go(xi(v,ke))-d.wrapper.clientHeight),fe=ke)}return{from:X,to:Math.max(fe,X+1)}}function Uu(d,v){if(!en(d,"scrollCursorIntoView")){var B=d.display,E=B.sizer.getBoundingClientRect(),F=null,X=B.wrapper.ownerDocument;if(v.top+E.top<0?F=!0:v.bottom+E.top>(X.defaultView.innerHeight||X.documentElement.clientHeight)&&(F=!1),F!=null&&!ee){var fe=xe("div","​",null,`position: absolute;
                         top: `+(v.top-B.viewOffset-xc(d.display))+`px;
                         height: `+(v.bottom-v.top+Pu(d)+B.barHeight)+`px;
                         left: `+v.left+"px; width: "+Math.max(2,v.right-v.left)+"px;");d.display.lineSpace.appendChild(fe),fe.scrollIntoView(F),d.display.lineSpace.removeChild(fe)}}}function xh(d,v,B,E){E==null&&(E=0);var F;!d.options.lineWrapping&&v==B&&(B=v.sticky=="before"?rn(v.line,v.ch+1,"before"):v,v=v.ch?rn(v.line,v.sticky=="before"?v.ch-1:v.ch,"after"):v);for(var X=0;X<5;X++){var fe=!1,_e=vn(d,v),ke=!B||B==v?_e:vn(d,B);F={left:Math.min(_e.left,ke.left),top:Math.min(_e.top,ke.top)-E,right:Math.max(_e.left,ke.left),bottom:Math.max(_e.bottom,ke.bottom)+E};var Fe=IA(d,F),_t=d.doc.scrollTop,Tt=d.doc.scrollLeft;if(Fe.scrollTop!=null&&($c(d,Fe.scrollTop),Math.abs(d.doc.scrollTop-_t)>1&&(fe=!0)),Fe.scrollLeft!=null&&(va(d,Fe.scrollLeft),Math.abs(d.doc.scrollLeft-Tt)>1&&(fe=!0)),!fe)break}return F}function Hh(d,v){var B=IA(d,v);B.scrollTop!=null&&$c(d,B.scrollTop),B.scrollLeft!=null&&va(d,B.scrollLeft)}function IA(d,v){var B=d.display,E=SA(d.display);v.top<0&&(v.top=0);var F=d.curOp&&d.curOp.scrollTop!=null?d.curOp.scrollTop:B.scroller.scrollTop,X=Qh(d),fe={};v.bottom-v.top>X&&(v.bottom=v.top+X);var _e=d.doc.height+xd(B),ke=v.top<E,Fe=v.bottom>_e-E;if(v.top<F)fe.scrollTop=ke?0:v.top;else if(v.bottom>F+X){var _t=Math.min(v.top,(Fe?_e:v.bottom)-X);_t!=F&&(fe.scrollTop=_t)}var Tt=d.options.fixedGutter?0:B.gutters.offsetWidth,Jt=d.curOp&&d.curOp.scrollLeft!=null?d.curOp.scrollLeft:B.scroller.scrollLeft-Tt,Ht=$A(d)-B.gutters.offsetWidth,_n=v.right-v.left>Ht;return _n&&(v.right=v.left+Ht),v.left<10?fe.scrollLeft=0:v.left<Jt?fe.scrollLeft=Math.max(0,v.left+Tt-(_n?0:10)):v.right>Ht+Jt-3&&(fe.scrollLeft=v.right+(_n?0:10)-Ht),fe}function Tl(d,v){v!=null&&(Fu(d),d.curOp.scrollTop=(d.curOp.scrollTop==null?d.doc.scrollTop:d.curOp.scrollTop)+v)}function Wo(d){Fu(d);var v=d.getCursor();d.curOp.scrollToPos={from:v,to:v,margin:d.options.cursorScrollMargin}}function aa(d,v,B){(v!=null||B!=null)&&Fu(d),v!=null&&(d.curOp.scrollLeft=v),B!=null&&(d.curOp.scrollTop=B)}function Lu(d,v){Fu(d),d.curOp.scrollToPos=v}function Fu(d){var v=d.curOp.scrollToPos;if(v){d.curOp.scrollToPos=null;var B=Ii(d,v.from),E=Ii(d,v.to);Bc(d,B,E,v.margin)}}function Bc(d,v,B,E){var F=IA(d,{left:Math.min(v.left,B.left),top:Math.min(v.top,B.top)-E,right:Math.max(v.right,B.right),bottom:Math.max(v.bottom,B.bottom)+E});aa(d,F.scrollLeft,F.scrollTop)}function $c(d,v){Math.abs(d.doc.scrollTop-v)<2||(r||ba(d,{top:v}),Zc(d,v,!0),r&&ba(d),Jc(d,100))}function Zc(d,v,B){v=Math.max(0,Math.min(d.display.scroller.scrollHeight-d.display.scroller.clientHeight,v)),!(d.display.scroller.scrollTop==v&&!B)&&(d.doc.scrollTop=v,d.display.scrollbars.setScrollTop(v),d.display.scroller.scrollTop!=v&&(d.display.scroller.scrollTop=v))}function va(d,v,B,E){v=Math.max(0,Math.min(v,d.display.scroller.scrollWidth-d.display.scroller.clientWidth)),!((B?v==d.doc.scrollLeft:Math.abs(d.doc.scrollLeft-v)<2)&&!E)&&(d.doc.scrollLeft=v,ef(d),d.display.scroller.scrollLeft!=v&&(d.display.scroller.scrollLeft=v),d.display.scrollbars.setScrollLeft(v))}function _a(d){var v=d.display,B=v.gutters.offsetWidth,E=Math.round(d.doc.height+xd(d.display));return{clientHeight:v.scroller.clientHeight,viewHeight:v.wrapper.clientHeight,scrollWidth:v.scroller.scrollWidth,clientWidth:v.scroller.clientWidth,viewWidth:v.wrapper.clientWidth,barLeft:d.options.fixedGutter?B:0,docHeight:E,scrollHeight:E+Pu(d)+v.barHeight,nativeBarWidth:v.nativeBarWidth,gutterWidth:B}}var $r=function(d,v,B){this.cm=B;var E=this.vert=xe("div",[xe("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),F=this.horiz=xe("div",[xe("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");E.tabIndex=F.tabIndex=-1,d(E),d(F),gt(E,"scroll",function(){E.clientHeight&&v(E.scrollTop,"vertical")}),gt(F,"scroll",function(){F.clientWidth&&v(F.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,m&&C<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};$r.prototype.update=function(d){var v=d.scrollWidth>d.clientWidth+1,B=d.scrollHeight>d.clientHeight+1,E=d.nativeBarWidth;if(B){this.vert.style.display="block",this.vert.style.bottom=v?E+"px":"0";var F=d.viewHeight-(v?E:0);this.vert.firstChild.style.height=Math.max(0,d.scrollHeight-d.clientHeight+F)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(v){this.horiz.style.display="block",this.horiz.style.right=B?E+"px":"0",this.horiz.style.left=d.barLeft+"px";var X=d.viewWidth-d.barLeft-(B?E:0);this.horiz.firstChild.style.width=Math.max(0,d.scrollWidth-d.clientWidth+X)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&d.clientHeight>0&&(E==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:B?E:0,bottom:v?E:0}},$r.prototype.setScrollLeft=function(d){this.horiz.scrollLeft!=d&&(this.horiz.scrollLeft=d),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},$r.prototype.setScrollTop=function(d){this.vert.scrollTop!=d&&(this.vert.scrollTop=d),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},$r.prototype.zeroWidthHack=function(){var d=Z&&!Q?"12px":"18px";this.horiz.style.height=this.vert.style.width=d,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Re,this.disableVert=new Re},$r.prototype.enableZeroWidthBar=function(d,v,B){d.style.visibility="";function E(){var F=d.getBoundingClientRect(),X=B=="vert"?document.elementFromPoint(F.right-1,(F.top+F.bottom)/2):document.elementFromPoint((F.right+F.left)/2,F.bottom-1);X!=d?d.style.visibility="hidden":v.set(1e3,E)}v.set(1e3,E)},$r.prototype.clear=function(){var d=this.horiz.parentNode;d.removeChild(this.horiz),d.removeChild(this.vert)};var lA=function(){};lA.prototype.update=function(){return{bottom:0,right:0}},lA.prototype.setScrollLeft=function(){},lA.prototype.setScrollTop=function(){},lA.prototype.clear=function(){};function Ls(d,v){v||(v=_a(d));var B=d.display.barWidth,E=d.display.barHeight;Xc(d,v);for(var F=0;F<4&&B!=d.display.barWidth||E!=d.display.barHeight;F++)B!=d.display.barWidth&&d.options.lineWrapping&&Bd(d),Xc(d,_a(d)),B=d.display.barWidth,E=d.display.barHeight}function Xc(d,v){var B=d.display,E=B.scrollbars.update(v);B.sizer.style.paddingRight=(B.barWidth=E.right)+"px",B.sizer.style.paddingBottom=(B.barHeight=E.bottom)+"px",B.heightForcer.style.borderBottom=E.bottom+"px solid transparent",E.right&&E.bottom?(B.scrollbarFiller.style.display="block",B.scrollbarFiller.style.height=E.bottom+"px",B.scrollbarFiller.style.width=E.right+"px"):B.scrollbarFiller.style.display="",E.bottom&&d.options.coverGutterNextToScrollbar&&d.options.fixedGutter?(B.gutterFiller.style.display="block",B.gutterFiller.style.height=E.bottom+"px",B.gutterFiller.style.width=v.gutterWidth+"px"):B.gutterFiller.style.display=""}var pu={native:$r,null:lA};function Zd(d){d.display.scrollbars&&(d.display.scrollbars.clear(),d.display.scrollbars.addClass&&Be(d.display.wrapper,d.display.scrollbars.addClass)),d.display.scrollbars=new pu[d.options.scrollbarStyle](function(v){d.display.wrapper.insertBefore(v,d.display.scrollbarFiller),gt(v,"mousedown",function(){d.state.focused&&setTimeout(function(){return d.display.input.focus()},0)}),v.setAttribute("cm-not-content","true")},function(v,B){B=="horizontal"?va(d,v):$c(d,v)},d),d.display.scrollbars.addClass&&be(d.display.wrapper,d.display.scrollbars.addClass)}var ms=0;function il(d){d.curOp={cm:d,viewChanged:!1,startHeight:d.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++ms,markArrays:null},o0(d.curOp)}function Fs(d){var v=d.curOp;v&&kf(v,function(B){for(var E=0;E<B.ops.length;E++)B.ops[E].cm.curOp=null;Xd(B)})}function Xd(d){for(var v=d.ops,B=0;B<v.length;B++)zu(v[B]);for(var E=0;E<v.length;E++)Mh(v[E]);for(var F=0;F<v.length;F++)eu(v[F]);for(var X=0;X<v.length;X++)rt(v[X]);for(var fe=0;fe<v.length;fe++)Vs(v[fe])}function zu(d){var v=d.cm,B=v.display;eh(v),d.updateMaxLine&&Ys(v),d.mustUpdate=d.viewChanged||d.forceUpdate||d.scrollTop!=null||d.scrollToPos&&(d.scrollToPos.from.line<B.viewFrom||d.scrollToPos.to.line>=B.viewTo)||B.maxLineChanged&&v.options.lineWrapping,d.update=d.mustUpdate&&new Ro(v,d.mustUpdate&&{top:d.scrollTop,ensure:d.scrollToPos},d.forceUpdate)}function Mh(d){d.updatedDisplay=d.mustUpdate&&Jd(d.cm,d.update)}function eu(d){var v=d.cm,B=v.display;d.updatedDisplay&&Bd(v),d.barMeasure=_a(v),B.maxLineChanged&&!v.options.lineWrapping&&(d.adjustWidthTo=qc(v,B.maxLine,B.maxLine.text.length).left+3,v.display.sizerWidth=d.adjustWidthTo,d.barMeasure.scrollWidth=Math.max(B.scroller.clientWidth,B.sizer.offsetLeft+d.adjustWidthTo+Pu(v)+v.display.barWidth),d.maxScrollLeft=Math.max(0,B.sizer.offsetLeft+d.adjustWidthTo-$A(v))),(d.updatedDisplay||d.selectionChanged)&&(d.preparedSelection=B.input.prepareSelection())}function rt(d){var v=d.cm;d.adjustWidthTo!=null&&(v.display.sizer.style.minWidth=d.adjustWidthTo+"px",d.maxScrollLeft<v.doc.scrollLeft&&va(v,Math.min(v.display.scroller.scrollLeft,d.maxScrollLeft),!0),v.display.maxLineChanged=!1);var B=d.focus&&d.focus==nt(It(v));d.preparedSelection&&v.display.input.showSelection(d.preparedSelection,B),(d.updatedDisplay||d.startHeight!=v.doc.height)&&Ls(v,d.barMeasure),d.updatedDisplay&&Nu(v,d.barMeasure),d.selectionChanged&&Ec(v),v.state.focused&&d.updateInput&&v.display.input.reset(d.typing),B&&Es(d.cm)}function Vs(d){var v=d.cm,B=v.display,E=v.doc;if(d.updatedDisplay&&wm(v,d.update),B.wheelStartX!=null&&(d.scrollTop!=null||d.scrollLeft!=null||d.scrollToPos)&&(B.wheelStartX=B.wheelStartY=null),d.scrollTop!=null&&Zc(v,d.scrollTop,d.forceScroll),d.scrollLeft!=null&&va(v,d.scrollLeft,!0,!0),d.scrollToPos){var F=xh(v,Qi(E,d.scrollToPos.from),Qi(E,d.scrollToPos.to),d.scrollToPos.margin);Uu(v,F)}var X=d.maybeHiddenMarkers,fe=d.maybeUnhiddenMarkers;if(X)for(var _e=0;_e<X.length;++_e)X[_e].lines.length||it(X[_e],"hide");if(fe)for(var ke=0;ke<fe.length;++ke)fe[ke].lines.length&&it(fe[ke],"unhide");B.wrapper.offsetHeight&&(E.scrollTop=v.display.scroller.scrollTop),d.changeObjs&&it(v,"changes",v,d.changeObjs),d.update&&d.update.finish()}function Ga(d,v){if(d.curOp)return v();il(d);try{return v()}finally{Fs(d)}}function Zo(d,v){return function(){if(d.curOp)return v.apply(d,arguments);il(d);try{return v.apply(d,arguments)}finally{Fs(d)}}}function gr(d){return function(){if(this.curOp)return d.apply(this,arguments);il(this);try{return d.apply(this,arguments)}finally{Fs(this)}}}function ps(d){return function(){var v=this.cm;if(!v||v.curOp)return d.apply(this,arguments);il(v);try{return d.apply(this,arguments)}finally{Fs(v)}}}function Jc(d,v){d.doc.highlightFrontier<d.display.viewTo&&d.state.highlight.set(v,Rt(Sh,d))}function Sh(d){var v=d.doc;if(!(v.highlightFrontier>=d.display.viewTo)){var B=+new Date+d.options.workTime,E=$o(d,v.highlightFrontier),F=[];v.iter(E.line,Math.min(v.first+v.size,d.display.viewTo+500),function(X){if(E.line>=d.display.viewFrom){var fe=X.styles,_e=X.text.length>d.options.maxHighlightLength?Ao(v.mode,E.state):null,ke=bc(d,X,E,!0);_e&&(E.state=_e),X.styles=ke.styles;var Fe=X.styleClasses,_t=ke.classes;_t?X.styleClasses=_t:Fe&&(X.styleClasses=null);for(var Tt=!fe||fe.length!=X.styles.length||Fe!=_t&&(!Fe||!_t||Fe.bgClass!=_t.bgClass||Fe.textClass!=_t.textClass),Jt=0;!Tt&&Jt<fe.length;++Jt)Tt=fe[Jt]!=X.styles[Jt];Tt&&F.push(E.line),X.stateAfter=E.save(),E.nextLine()}else X.text.length<=d.options.maxHighlightLength&&ko(d,X.text,E),X.stateAfter=E.line%5==0?E.save():null,E.nextLine();if(+new Date>B)return Jc(d,d.options.workDelay),!0}),v.highlightFrontier=E.line,v.modeFrontier=Math.max(v.modeFrontier,E.line),F.length&&Ga(d,function(){for(var X=0;X<F.length;X++)XA(d,F[X],"text")})}}var Ro=function(d,v,B){var E=d.display;this.viewport=v,this.visible=OA(E,d.doc,v),this.editorIsHidden=!E.wrapper.offsetWidth,this.wrapperHeight=E.wrapper.clientHeight,this.wrapperWidth=E.wrapper.clientWidth,this.oldDisplayWidth=$A(d),this.force=B,this.dims=Il(d),this.events=[]};Ro.prototype.signal=function(d,v){Mn(d,v)&&this.events.push(arguments)},Ro.prototype.finish=function(){for(var d=0;d<this.events.length;d++)it.apply(null,this.events[d])};function eh(d){var v=d.display;!v.scrollbarsClipped&&v.scroller.offsetWidth&&(v.nativeBarWidth=v.scroller.offsetWidth-v.scroller.clientWidth,v.heightForcer.style.height=Pu(d)+"px",v.sizer.style.marginBottom=-v.nativeBarWidth+"px",v.sizer.style.borderRightWidth=Pu(d)+"px",v.scrollbarsClipped=!0)}function TA(d){if(d.hasFocus())return null;var v=nt(It(d));if(!v||!yt(d.display.lineDiv,v))return null;var B={activeElt:v};if(window.getSelection){var E=St(d).getSelection();E.anchorNode&&E.extend&&yt(d.display.lineDiv,E.anchorNode)&&(B.anchorNode=E.anchorNode,B.anchorOffset=E.anchorOffset,B.focusNode=E.focusNode,B.focusOffset=E.focusOffset)}return B}function Od(d){if(!(!d||!d.activeElt||d.activeElt==nt(pt(d.activeElt)))&&(d.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(d.activeElt.nodeName)&&d.anchorNode&&yt(document.body,d.anchorNode)&&yt(document.body,d.focusNode))){var v=d.activeElt.ownerDocument,B=v.defaultView.getSelection(),E=v.createRange();E.setEnd(d.anchorNode,d.anchorOffset),E.collapse(!1),B.removeAllRanges(),B.addRange(E),B.extend(d.focusNode,d.focusOffset)}}function Jd(d,v){var B=d.display,E=d.doc;if(v.editorIsHidden)return Nl(d),!1;if(!v.force&&v.visible.from>=B.viewFrom&&v.visible.to<=B.viewTo&&(B.updateLineNumbers==null||B.updateLineNumbers>=B.viewTo)&&B.renderedView==B.view&&BA(d)==0)return!1;rl(d)&&(Nl(d),v.dims=Il(d));var F=E.first+E.size,X=Math.max(v.visible.from-d.options.viewportMargin,E.first),fe=Math.min(F,v.visible.to+d.options.viewportMargin);B.viewFrom<X&&X-B.viewFrom<20&&(X=Math.max(E.first,B.viewFrom)),B.viewTo>fe&&B.viewTo-fe<20&&(fe=Math.min(F,B.viewTo)),Eo&&(X=uo(d.doc,X),fe=ur(d.doc,fe));var _e=X!=B.viewFrom||fe!=B.viewTo||B.lastWrapHeight!=v.wrapperHeight||B.lastWrapWidth!=v.wrapperWidth;ac(d,X,fe),B.viewOffset=Go(xi(d.doc,B.viewFrom)),d.display.mover.style.top=B.viewOffset+"px";var ke=BA(d);if(!_e&&ke==0&&!v.force&&B.renderedView==B.view&&(B.updateLineNumbers==null||B.updateLineNumbers>=B.viewTo))return!1;var Fe=TA(d);return ke>4&&(B.lineDiv.style.display="none"),wh(d,B.updateLineNumbers,v.dims),ke>4&&(B.lineDiv.style.display=""),B.renderedView=B.view,Od(Fe),we(B.cursorDiv),we(B.selectionDiv),B.gutters.style.height=B.sizer.style.minHeight=0,_e&&(B.lastWrapHeight=v.wrapperHeight,B.lastWrapWidth=v.wrapperWidth,Jc(d,400)),B.updateLineNumbers=null,!0}function wm(d,v){for(var B=v.viewport,E=!0;;E=!1){if(!E||!d.options.lineWrapping||v.oldDisplayWidth==$A(d)){if(B&&B.top!=null&&(B={top:Math.min(d.doc.height+xd(d.display)-Qh(d),B.top)}),v.visible=OA(d.display,d.doc,B),v.visible.from>=d.display.viewFrom&&v.visible.to<=d.display.viewTo)break}else E&&(v.visible=OA(d.display,d.doc,B));if(!Jd(d,v))break;Bd(d);var F=_a(d);wc(d),Ls(d,F),Nu(d,F),v.force=!1}v.signal(d,"update",d),(d.display.viewFrom!=d.display.reportedViewFrom||d.display.viewTo!=d.display.reportedViewTo)&&(v.signal(d,"viewportChange",d,d.display.viewFrom,d.display.viewTo),d.display.reportedViewFrom=d.display.viewFrom,d.display.reportedViewTo=d.display.viewTo)}function ba(d,v){var B=new Ro(d,v);if(Jd(d,B)){Bd(d),wm(d,B);var E=_a(d);wc(d),Ls(d,E),Nu(d,E),B.finish()}}function wh(d,v,B){var E=d.display,F=d.options.lineNumbers,X=E.lineDiv,fe=X.firstChild;function _e(_n){var Rn=_n.nextSibling;return S&&Z&&d.display.currentWheelTarget==_n?_n.style.display="none":_n.parentNode.removeChild(_n),Rn}for(var ke=E.view,Fe=E.viewFrom,_t=0;_t<ke.length;_t++){var Tt=ke[_t];if(!Tt.hidden)if(!Tt.node||Tt.node.parentNode!=X){var Jt=Wh(d,Tt,Fe,B);X.insertBefore(Jt,fe)}else{for(;fe!=Tt.node;)fe=_e(fe);var Ht=F&&v!=null&&v<=Fe&&Tt.lineNumber;Tt.changes&&(He(Tt.changes,"gutter")>-1&&(Ht=!1),Fl(d,Tt,Fe,B)),Ht&&(we(Tt.lineNumber),Tt.lineNumber.appendChild(document.createTextNode(jn(d.options,Fe)))),fe=Tt.node.nextSibling}Fe+=Tt.size}for(;fe;)fe=_e(fe)}function th(d){var v=d.gutters.offsetWidth;d.sizer.style.marginLeft=v+"px",Xa(d,"gutterChanged",d)}function Nu(d,v){d.display.sizer.style.minHeight=v.docHeight+"px",d.display.heightForcer.style.top=v.docHeight+"px",d.display.gutters.style.height=v.docHeight+d.display.barHeight+Pu(d)+"px"}function ef(d){var v=d.display,B=v.view;if(!(!v.alignWidgets&&(!v.gutters.firstChild||!d.options.fixedGutter))){for(var E=jo(v)-v.scroller.scrollLeft+d.doc.scrollLeft,F=v.gutters.offsetWidth,X=E+"px",fe=0;fe<B.length;fe++)if(!B[fe].hidden){d.options.fixedGutter&&(B[fe].gutter&&(B[fe].gutter.style.left=X),B[fe].gutterBackground&&(B[fe].gutterBackground.style.left=X));var _e=B[fe].alignable;if(_e)for(var ke=0;ke<_e.length;ke++)_e[ke].style.left=X}d.options.fixedGutter&&(v.gutters.style.left=E+F+"px")}}function rl(d){if(!d.options.lineNumbers)return!1;var v=d.doc,B=jn(d.options,v.first+v.size-1),E=d.display;if(B.length!=E.lineNumChars){var F=E.measure.appendChild(xe("div",[xe("div",B)],"CodeMirror-linenumber CodeMirror-gutter-elt")),X=F.firstChild.offsetWidth,fe=F.offsetWidth-X;return E.lineGutter.style.width="",E.lineNumInnerWidth=Math.max(X,E.lineGutter.offsetWidth-fe)+1,E.lineNumWidth=E.lineNumInnerWidth+fe,E.lineNumChars=E.lineNumInnerWidth?B.length:-1,E.lineGutter.style.width=E.lineNumWidth+"px",th(d.display),!0}return!1}function Ja(d,v){for(var B=[],E=!1,F=0;F<d.length;F++){var X=d[F],fe=null;if(typeof X!="string"&&(fe=X.style,X=X.className),X=="CodeMirror-linenumbers")if(v)E=!0;else continue;B.push({className:X,style:fe})}return v&&!E&&B.push({className:"CodeMirror-linenumbers",style:null}),B}function Vh(d){var v=d.gutters,B=d.gutterSpecs;we(v),d.lineGutter=null;for(var E=0;E<B.length;++E){var F=B[E],X=F.className,fe=F.style,_e=v.appendChild(xe("div",null,"CodeMirror-gutter "+X));fe&&(_e.style.cssText=fe),X=="CodeMirror-linenumbers"&&(d.lineGutter=_e,_e.style.width=(d.lineNumWidth||1)+"px")}v.style.display=B.length?"":"none",th(d)}function AA(d){Vh(d.display),ws(d),ef(d)}function Id(d,v,B,E){var F=this;this.input=B,F.scrollbarFiller=xe("div",null,"CodeMirror-scrollbar-filler"),F.scrollbarFiller.setAttribute("cm-not-content","true"),F.gutterFiller=xe("div",null,"CodeMirror-gutter-filler"),F.gutterFiller.setAttribute("cm-not-content","true"),F.lineDiv=ze("div",null,"CodeMirror-code"),F.selectionDiv=xe("div",null,null,"position: relative; z-index: 1"),F.cursorDiv=xe("div",null,"CodeMirror-cursors"),F.measure=xe("div",null,"CodeMirror-measure"),F.lineMeasure=xe("div",null,"CodeMirror-measure"),F.lineSpace=ze("div",[F.measure,F.lineMeasure,F.selectionDiv,F.cursorDiv,F.lineDiv],null,"position: relative; outline: none");var X=ze("div",[F.lineSpace],"CodeMirror-lines");F.mover=xe("div",[X],null,"position: relative"),F.sizer=xe("div",[F.mover],"CodeMirror-sizer"),F.sizerWidth=null,F.heightForcer=xe("div",null,null,"position: absolute; height: "+bt+"px; width: 1px;"),F.gutters=xe("div",null,"CodeMirror-gutters"),F.lineGutter=null,F.scroller=xe("div",[F.sizer,F.heightForcer,F.gutters],"CodeMirror-scroll"),F.scroller.setAttribute("tabIndex","-1"),F.wrapper=xe("div",[F.scrollbarFiller,F.gutterFiller,F.scroller],"CodeMirror"),U&&K===105&&(F.wrapper.style.clipPath="inset(0px)"),F.wrapper.setAttribute("translate","no"),m&&C<8&&(F.gutters.style.zIndex=-1,F.scroller.style.paddingRight=0),!S&&!(r&&ne)&&(F.scroller.draggable=!0),d&&(d.appendChild?d.appendChild(F.wrapper):d(F.wrapper)),F.viewFrom=F.viewTo=v.first,F.reportedViewFrom=F.reportedViewTo=v.first,F.view=[],F.renderedView=null,F.externalMeasured=null,F.viewOffset=0,F.lastWrapHeight=F.lastWrapWidth=0,F.updateLineNumbers=null,F.nativeBarWidth=F.barHeight=F.barWidth=0,F.scrollbarsClipped=!1,F.lineNumWidth=F.lineNumInnerWidth=F.lineNumChars=null,F.alignWidgets=!1,F.cachedCharWidth=F.cachedTextHeight=F.cachedPaddingH=null,F.maxLine=null,F.maxLineLength=0,F.maxLineChanged=!1,F.wheelDX=F.wheelDY=F.wheelStartX=F.wheelStartY=null,F.shift=!1,F.selForContextMenu=null,F.activeTouch=null,F.gutterSpecs=Ja(E.gutters,E.lineNumbers),Vh(F),B.init(F)}var tf=0,Cl=null;m?Cl=-.53:r?Cl=15:U?Cl=-.7:j&&(Cl=-1/3);function Oc(d){var v=d.wheelDeltaX,B=d.wheelDeltaY;return v==null&&d.detail&&d.axis==d.HORIZONTAL_AXIS&&(v=d.detail),B==null&&d.detail&&d.axis==d.VERTICAL_AXIS?B=d.detail:B==null&&(B=d.wheelDelta),{x:v,y:B}}function Uf(d){var v=Oc(d);return v.x*=Cl,v.y*=Cl,v}function $h(d,v){U&&K==102&&(d.display.chromeScrollHack==null?d.display.sizer.style.pointerEvents="none":clearTimeout(d.display.chromeScrollHack),d.display.chromeScrollHack=setTimeout(function(){d.display.chromeScrollHack=null,d.display.sizer.style.pointerEvents=""},100));var B=Oc(v),E=B.x,F=B.y,X=Cl;v.deltaMode===0&&(E=v.deltaX,F=v.deltaY,X=1);var fe=d.display,_e=fe.scroller,ke=_e.scrollWidth>_e.clientWidth,Fe=_e.scrollHeight>_e.clientHeight;if(E&&ke||F&&Fe){if(F&&Z&&S){e:for(var _t=v.target,Tt=fe.view;_t!=_e;_t=_t.parentNode)for(var Jt=0;Jt<Tt.length;Jt++)if(Tt[Jt].node==_t){d.display.currentWheelTarget=_t;break e}}if(E&&!r&&!z&&X!=null){F&&Fe&&$c(d,Math.max(0,_e.scrollTop+F*X)),va(d,Math.max(0,_e.scrollLeft+E*X)),(!F||F&&Fe)&&Wn(v),fe.wheelStartX=null;return}if(F&&X!=null){var Ht=F*X,_n=d.doc.scrollTop,Rn=_n+fe.wrapper.clientHeight;Ht<0?_n=Math.max(0,_n+Ht-50):Rn=Math.min(d.doc.height,Rn+Ht+50),ba(d,{top:_n,bottom:Rn})}tf<20&&v.deltaMode!==0&&(fe.wheelStartX==null?(fe.wheelStartX=_e.scrollLeft,fe.wheelStartY=_e.scrollTop,fe.wheelDX=E,fe.wheelDY=F,setTimeout(function(){if(fe.wheelStartX!=null){var oi=_e.scrollLeft-fe.wheelStartX,pi=_e.scrollTop-fe.wheelStartY,Ci=pi&&fe.wheelDY&&pi/fe.wheelDY||oi&&fe.wheelDX&&oi/fe.wheelDX;fe.wheelStartX=fe.wheelStartY=null,Ci&&(Cl=(Cl*tf+Ci)/(tf+1),++tf)}},200)):(fe.wheelDX+=E,fe.wheelDY+=F))}}var Ca=function(d,v){this.ranges=d,this.primIndex=v};Ca.prototype.primary=function(){return this.ranges[this.primIndex]},Ca.prototype.equals=function(d){if(d==this)return!0;if(d.primIndex!=this.primIndex||d.ranges.length!=this.ranges.length)return!1;for(var v=0;v<this.ranges.length;v++){var B=this.ranges[v],E=d.ranges[v];if(!Jr(B.anchor,E.anchor)||!Jr(B.head,E.head))return!1}return!0},Ca.prototype.deepCopy=function(){for(var d=[],v=0;v<this.ranges.length;v++)d[v]=new Zr(wo(this.ranges[v].anchor),wo(this.ranges[v].head));return new Ca(d,this.primIndex)},Ca.prototype.somethingSelected=function(){for(var d=0;d<this.ranges.length;d++)if(!this.ranges[d].empty())return!0;return!1},Ca.prototype.contains=function(d,v){v||(v=d);for(var B=0;B<this.ranges.length;B++){var E=this.ranges[B];if(si(v,E.from())>=0&&si(d,E.to())<=0)return B}return-1};var Zr=function(d,v){this.anchor=d,this.head=v};Zr.prototype.from=function(){return Us(this.anchor,this.head)},Zr.prototype.to=function(){return As(this.anchor,this.head)},Zr.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function ci(d,v,B){var E=d&&d.options.selectionsMayTouch,F=v[B];v.sort(function(Jt,Ht){return si(Jt.from(),Ht.from())}),B=He(v,F);for(var X=1;X<v.length;X++){var fe=v[X],_e=v[X-1],ke=si(_e.to(),fe.from());if(E&&!fe.empty()?ke>0:ke>=0){var Fe=Us(_e.from(),fe.from()),_t=As(_e.to(),fe.to()),Tt=_e.empty()?fe.from()==fe.head:_e.from()==_e.head;X<=B&&--B,v.splice(--X,2,new Zr(Tt?_t:Fe,Tt?Fe:_t))}}return new Ca(v,B)}function Gu(d,v){return new Ca([new Zr(d,v||d)],0)}function ju(d){return d.text?rn(d.from.line+d.text.length-1,$n(d.text).length+(d.text.length==1?d.from.ch:0)):d.to}function Zh(d,v){if(si(d,v.from)<0)return d;if(si(d,v.to)<=0)return ju(v);var B=d.line+v.text.length-(v.to.line-v.from.line)-1,E=d.ch;return d.line==v.to.line&&(E+=ju(v).ch-v.to.ch),rn(B,E)}function Ic(d,v){for(var B=[],E=0;E<d.sel.ranges.length;E++){var F=d.sel.ranges[E];B.push(new Zr(Zh(F.anchor,v),Zh(F.head,v)))}return ci(d.cm,B,d.sel.primIndex)}function gu(d,v,B){return d.line==v.line?rn(B.line,d.ch-v.ch+B.ch):rn(B.line+(d.line-v.line),d.ch)}function nf(d,v,B){for(var E=[],F=rn(d.first,0),X=F,fe=0;fe<v.length;fe++){var _e=v[fe],ke=gu(_e.from,F,X),Fe=gu(ju(_e),F,X);if(F=_e.to,X=Fe,B=="around"){var _t=d.sel.ranges[fe],Tt=si(_t.head,_t.anchor)<0;E[fe]=new Zr(Tt?Fe:ke,Tt?ke:Fe)}else E[fe]=new Zr(ke,ke)}return new Ca(E,d.sel.primIndex)}function to(d){d.doc.mode=So(d.options,d.doc.modeOption),Gl(d)}function Gl(d){d.doc.iter(function(v){v.stateAfter&&(v.stateAfter=null),v.styles&&(v.styles=null)}),d.doc.modeFrontier=d.doc.highlightFrontier=d.doc.first,Jc(d,100),d.state.modeGen++,d.curOp&&ws(d)}function Eh(d,v){return v.from.ch==0&&v.to.ch==0&&$n(v.text)==""&&(!d.cm||d.cm.options.wholeLineUpdateBefore)}function lc(d,v,B,E){function F(Ci){return B?B[Ci]:null}function X(Ci,gi,ki){qA(Ci,gi,ki,E),Xa(Ci,"change",Ci,v)}function fe(Ci,gi){for(var ki=[],ar=Ci;ar<gi;++ar)ki.push(new Ll(Fe[ar],F(ar),E));return ki}var _e=v.from,ke=v.to,Fe=v.text,_t=xi(d,_e.line),Tt=xi(d,ke.line),Jt=$n(Fe),Ht=F(Fe.length-1),_n=ke.line-_e.line;if(v.full)d.insert(0,fe(0,Fe.length)),d.remove(Fe.length,d.size-Fe.length);else if(Eh(d,v)){var Rn=fe(0,Fe.length-1);X(Tt,Tt.text,Ht),_n&&d.remove(_e.line,_n),Rn.length&&d.insert(_e.line,Rn)}else if(_t==Tt)if(Fe.length==1)X(_t,_t.text.slice(0,_e.ch)+Jt+_t.text.slice(ke.ch),Ht);else{var oi=fe(1,Fe.length-1);oi.push(new Ll(Jt+_t.text.slice(ke.ch),Ht,E)),X(_t,_t.text.slice(0,_e.ch)+Fe[0],F(0)),d.insert(_e.line+1,oi)}else if(Fe.length==1)X(_t,_t.text.slice(0,_e.ch)+Fe[0]+Tt.text.slice(ke.ch),F(0)),d.remove(_e.line+1,_n);else{X(_t,_t.text.slice(0,_e.ch)+Fe[0],F(0)),X(Tt,Jt+Tt.text.slice(ke.ch),Ht);var pi=fe(1,Fe.length-1);_n>1&&d.remove(_e.line+1,_n-1),d.insert(_e.line+1,pi)}Xa(d,"change",d,v)}function kA(d,v,B){function E(F,X,fe){if(F.linked)for(var _e=0;_e<F.linked.length;++_e){var ke=F.linked[_e];if(ke.doc!=X){var Fe=fe&&ke.sharedHist;B&&!Fe||(v(ke.doc,Fe),E(ke.doc,F,Fe))}}}E(d,null,!0)}function Ac(d,v){if(v.cm)throw new Error("This document is already in use.");d.doc=v,v.cm=d,qh(d),to(d),Bh(d),d.options.direction=v.direction,d.options.lineWrapping||Ys(d),d.options.mode=v.modeOption,ws(d)}function Bh(d){(d.doc.direction=="rtl"?be:Be)(d.display.lineDiv,"CodeMirror-rtl")}function yu(d){Ga(d,function(){Bh(d),ws(d)})}function nh(d){this.done=[],this.undone=[],this.undoDepth=d?d.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=d?d.maxGeneration:1}function tu(d,v){var B={from:wo(v.from),to:ju(v),text:ls(d,v.from,v.to)};return Xh(d,B,v.from.line,v.to.line+1),kA(d,function(E){return Xh(E,B,v.from.line,v.to.line+1)},!0),B}function _l(d){for(;d.length;){var v=$n(d);if(v.ranges)d.pop();else break}}function Em(d,v){if(v)return _l(d.done),$n(d.done);if(d.done.length&&!$n(d.done).ranges)return $n(d.done);if(d.done.length>1&&!d.done[d.done.length-2].ranges)return d.done.pop(),$n(d.done)}function rf(d,v,B,E){var F=d.history;F.undone.length=0;var X=+new Date,fe,_e;if((F.lastOp==E||F.lastOrigin==v.origin&&v.origin&&(v.origin.charAt(0)=="+"&&F.lastModTime>X-(d.cm?d.cm.options.historyEventDelay:500)||v.origin.charAt(0)=="*"))&&(fe=Em(F,F.lastOp==E)))_e=$n(fe.changes),si(v.from,v.to)==0&&si(v.from,_e.to)==0?_e.to=ju(v):fe.changes.push(tu(d,v));else{var ke=$n(F.done);for((!ke||!ke.ranges)&&Wl(d.sel,F.done),fe={changes:[tu(d,v)],generation:F.generation},F.done.push(fe);F.done.length>F.undoDepth;)F.done.shift(),F.done[0].ranges||F.done.shift()}F.done.push(B),F.generation=++F.maxGeneration,F.lastModTime=F.lastSelTime=X,F.lastOp=F.lastSelOp=E,F.lastOrigin=F.lastSelOrigin=v.origin,_e||it(d,"historyAdded")}function jl(d,v,B,E){var F=v.charAt(0);return F=="*"||F=="+"&&B.ranges.length==E.ranges.length&&B.somethingSelected()==E.somethingSelected()&&new Date-d.history.lastSelTime<=(d.cm?d.cm.options.historyEventDelay:500)}function Po(d,v,B,E){var F=d.history,X=E&&E.origin;B==F.lastSelOp||X&&F.lastSelOrigin==X&&(F.lastModTime==F.lastSelTime&&F.lastOrigin==X||jl(d,X,$n(F.done),v))?F.done[F.done.length-1]=v:Wl(v,F.done),F.lastSelTime=+new Date,F.lastSelOrigin=X,F.lastSelOp=B,E&&E.clearRedo!==!1&&_l(F.undone)}function Wl(d,v){var B=$n(v);B&&B.ranges&&B.equals(d)||v.push(d)}function Xh(d,v,B,E){var F=v["spans_"+d.id],X=0;d.iter(Math.max(d.first,B),Math.min(d.first+d.size,E),function(fe){fe.markedSpans&&((F||(F=v["spans_"+d.id]={}))[X]=fe.markedSpans),++X})}function Lf(d){if(!d)return null;for(var v,B=0;B<d.length;++B)d[B].marker.explicitlyCleared?v||(v=d.slice(0,B)):v&&v.push(d[B]);return v?v.length?v:null:d}function vu(d,v){var B=v["spans_"+d.id];if(!B)return null;for(var E=[],F=0;F<v.text.length;++F)E.push(Lf(B[F]));return E}function no(d,v){var B=vu(d,v),E=Dr(d,v);if(!B)return E;if(!E)return B;for(var F=0;F<B.length;++F){var X=B[F],fe=E[F];if(X&&fe)e:for(var _e=0;_e<fe.length;++_e){for(var ke=fe[_e],Fe=0;Fe<X.length;++Fe)if(X[Fe].marker==ke.marker)continue e;X.push(ke)}else fe&&(B[F]=fe)}return B}function Ko(d,v,B){for(var E=[],F=0;F<d.length;++F){var X=d[F];if(X.ranges){E.push(B?Ca.prototype.deepCopy.call(X):X);continue}var fe=X.changes,_e=[];E.push({changes:_e});for(var ke=0;ke<fe.length;++ke){var Fe=fe[ke],_t=void 0;if(_e.push({from:Fe.from,to:Fe.to,text:Fe.text}),v)for(var Tt in Fe)(_t=Tt.match(/^spans_(\d+)$/))&&He(v,Number(_t[1]))>-1&&($n(_e)[Tt]=Fe[Tt],delete Fe[Tt])}}return E}function Rr(d,v,B,E){if(E){var F=d.anchor;if(B){var X=si(v,F)<0;X!=si(B,F)<0?(F=v,v=B):X!=si(v,B)<0&&(v=B)}return new Zr(F,v)}else return new Zr(B||v,v)}function Wu(d,v,B,E,F){F==null&&(F=d.cm&&(d.cm.display.shift||d.extend)),sa(d,new Ca([Rr(d.sel.primary(),v,B,F)],0),E)}function Oi(d,v,B){for(var E=[],F=d.cm&&(d.cm.display.shift||d.extend),X=0;X<d.sel.ranges.length;X++)E[X]=Rr(d.sel.ranges[X],v[X],null,F);var fe=ci(d.cm,E,d.sel.primIndex);sa(d,fe,B)}function Ti(d,v,B,E){var F=d.sel.ranges.slice(0);F[v]=B,sa(d,ci(d.cm,F,d.sel.primIndex),E)}function Tc(d,v,B,E){sa(d,Gu(v,B),E)}function DA(d,v,B){var E={ranges:v.ranges,update:function(F){this.ranges=[];for(var X=0;X<F.length;X++)this.ranges[X]=new Zr(Qi(d,F[X].anchor),Qi(d,F[X].head))},origin:B&&B.origin};return it(d,"beforeSelectionChange",d,E),d.cm&&it(d.cm,"beforeSelectionChange",d.cm,E),E.ranges!=v.ranges?ci(d.cm,E.ranges,E.ranges.length-1):v}function uA(d,v,B){var E=d.history.done,F=$n(E);F&&F.ranges?(E[E.length-1]=v,go(d,v,B)):sa(d,v,B)}function sa(d,v,B){go(d,v,B),Po(d,d.sel,d.cm?d.cm.curOp.id:NaN,B)}function go(d,v,B){(Mn(d,"beforeSelectionChange")||d.cm&&Mn(d.cm,"beforeSelectionChange"))&&(v=DA(d,v,B));var E=B&&B.bias||(si(v.primary().head,d.sel.primary().head)<0?-1:1);Ql(d,Jh(d,v,E,!0)),!(B&&B.scroll===!1)&&d.cm&&d.cm.getOption("readOnly")!="nocursor"&&Wo(d.cm)}function Ql(d,v){v.equals(d.sel)||(d.sel=v,d.cm&&(d.cm.curOp.updateInput=1,d.cm.curOp.selectionChanged=!0,Dn(d.cm)),Xa(d,"cursorActivity",d))}function Ff(d){Ql(d,Jh(d,d.sel,null,!1))}function Jh(d,v,B,E){for(var F,X=0;X<v.ranges.length;X++){var fe=v.ranges[X],_e=v.ranges.length==d.sel.ranges.length&&d.sel.ranges[X],ke=ja(d,fe.anchor,_e&&_e.anchor,B,E),Fe=fe.head==fe.anchor?ke:ja(d,fe.head,_e&&_e.head,B,E);(F||ke!=fe.anchor||Fe!=fe.head)&&(F||(F=v.ranges.slice(0,X)),F[X]=new Zr(ke,Fe))}return F?ci(d.cm,F,v.primIndex):v}function Uo(d,v,B,E,F){var X=xi(d,v.line);if(X.markedSpans)for(var fe=0;fe<X.markedSpans.length;++fe){var _e=X.markedSpans[fe],ke=_e.marker,Fe="selectLeft"in ke?!ke.selectLeft:ke.inclusiveLeft,_t="selectRight"in ke?!ke.selectRight:ke.inclusiveRight;if((_e.from==null||(Fe?_e.from<=v.ch:_e.from<v.ch))&&(_e.to==null||(_t?_e.to>=v.ch:_e.to>v.ch))){if(F&&(it(ke,"beforeCursorEnter"),ke.explicitlyCleared))if(X.markedSpans){--fe;continue}else break;if(!ke.atomic)continue;if(B){var Tt=ke.find(E<0?1:-1),Jt=void 0;if((E<0?_t:Fe)&&(Tt=ed(d,Tt,-E,Tt&&Tt.line==v.line?X:null)),Tt&&Tt.line==v.line&&(Jt=si(Tt,B))&&(E<0?Jt<0:Jt>0))return Uo(d,Tt,v,E,F)}var Ht=ke.find(E<0?-1:1);return(E<0?Fe:_t)&&(Ht=ed(d,Ht,E,Ht.line==v.line?X:null)),Ht?Uo(d,Ht,v,E,F):null}}return v}function ja(d,v,B,E,F){var X=E||1,fe=Uo(d,v,B,X,F)||!F&&Uo(d,v,B,X,!0)||Uo(d,v,B,-X,F)||!F&&Uo(d,v,B,-X,!0);return fe||(d.cantEdit=!0,rn(d.first,0))}function ed(d,v,B,E){return B<0&&v.ch==0?v.line>d.first?Qi(d,rn(v.line-1)):null:B>0&&v.ch==(E||xi(d,v.line)).text.length?v.line<d.first+d.size-1?rn(v.line+1,0):null:new rn(v.line,v.ch+B)}function Cu(d){d.setSelection(rn(d.firstLine(),0),rn(d.lastLine()),Ot)}function kc(d,v,B){var E={canceled:!1,from:v.from,to:v.to,text:v.text,origin:v.origin,cancel:function(){return E.canceled=!0}};return B&&(E.update=function(F,X,fe,_e){F&&(E.from=Qi(d,F)),X&&(E.to=Qi(d,X)),fe&&(E.text=fe),_e!==void 0&&(E.origin=_e)}),it(d,"beforeChange",d,E),d.cm&&it(d.cm,"beforeChange",d.cm,E),E.canceled?(d.cm&&(d.cm.curOp.updateInput=2),null):{from:E.from,to:E.to,text:E.text,origin:E.origin}}function $s(d,v,B){if(d.cm){if(!d.cm.curOp)return Zo(d.cm,$s)(d,v,B);if(d.cm.state.suppressEdits)return}if(!((Mn(d,"beforeChange")||d.cm&&Mn(d.cm,"beforeChange"))&&(v=kc(d,v,!0),!v))){var E=No&&!B&&Zi(d,v.from,v.to);if(E)for(var F=E.length-1;F>=0;--F)es(d,{from:E[F].from,to:E[F].to,text:F?[""]:v.text,origin:v.origin});else es(d,v)}}function es(d,v){if(!(v.text.length==1&&v.text[0]==""&&si(v.from,v.to)==0)){var B=Ic(d,v);rf(d,v,B,d.cm?d.cm.curOp.id:NaN),uc(d,v,B,Dr(d,v));var E=[];kA(d,function(F,X){!X&&He(E,F.history)==-1&&(Td(F.history,v),E.push(F.history)),uc(F,v,null,Dr(F,v))})}}function cA(d,v,B){var E=d.cm&&d.cm.state.suppressEdits;if(!(E&&!B)){for(var F=d.history,X,fe=d.sel,_e=v=="undo"?F.done:F.undone,ke=v=="undo"?F.undone:F.done,Fe=0;Fe<_e.length&&(X=_e[Fe],!(B?X.ranges&&!X.equals(d.sel):!X.ranges));Fe++);if(Fe!=_e.length){for(F.lastOrigin=F.lastSelOrigin=null;;)if(X=_e.pop(),X.ranges){if(Wl(X,ke),B&&!X.equals(d.sel)){sa(d,X,{clearRedo:!1});return}fe=X}else if(E){_e.push(X);return}else break;var _t=[];Wl(fe,ke),ke.push({changes:_t,generation:F.generation}),F.generation=X.generation||++F.maxGeneration;for(var Tt=Mn(d,"beforeChange")||d.cm&&Mn(d.cm,"beforeChange"),Jt=function(Rn){var oi=X.changes[Rn];if(oi.origin=v,Tt&&!kc(d,oi,!1))return _e.length=0,{};_t.push(tu(d,oi));var pi=Rn?Ic(d,oi):$n(_e);uc(d,oi,pi,no(d,oi)),!Rn&&d.cm&&d.cm.scrollIntoView({from:oi.from,to:ju(oi)});var Ci=[];kA(d,function(gi,ki){!ki&&He(Ci,gi.history)==-1&&(Td(gi.history,oi),Ci.push(gi.history)),uc(gi,oi,null,no(gi,oi))})},Ht=X.changes.length-1;Ht>=0;--Ht){var _n=Jt(Ht);if(_n)return _n.v}}}}function Dc(d,v){if(v!=0&&(d.first+=v,d.sel=new Ca(On(d.sel.ranges,function(F){return new Zr(rn(F.anchor.line+v,F.anchor.ch),rn(F.head.line+v,F.head.ch))}),d.sel.primIndex),d.cm)){ws(d.cm,d.first,d.first-v,v);for(var B=d.cm.display,E=B.viewFrom;E<B.viewTo;E++)XA(d.cm,E,"gutter")}}function uc(d,v,B,E){if(d.cm&&!d.cm.curOp)return Zo(d.cm,uc)(d,v,B,E);if(v.to.line<d.first){Dc(d,v.text.length-1-(v.to.line-v.from.line));return}if(!(v.from.line>d.lastLine())){if(v.from.line<d.first){var F=v.text.length-1-(d.first-v.from.line);Dc(d,F),v={from:rn(d.first,0),to:rn(v.to.line+F,v.to.ch),text:[$n(v.text)],origin:v.origin}}var X=d.lastLine();v.to.line>X&&(v={from:v.from,to:rn(X,xi(d,X).text.length),text:[v.text[0]],origin:v.origin}),v.removed=ls(d,v.from,v.to),B||(B=Ic(d,v)),d.cm?cc(d.cm,v,E):lc(d,v,E),go(d,B,Ot),d.cantEdit&&ja(d,rn(d.firstLine(),0))&&(d.cantEdit=!1)}}function cc(d,v,B){var E=d.doc,F=d.display,X=v.from,fe=v.to,_e=!1,ke=X.line;d.options.lineWrapping||(ke=$e(Di(xi(E,X.line))),E.iter(ke,fe.line+1,function(Ht){if(Ht==F.maxLine)return _e=!0,!0})),E.sel.contains(v.from,v.to)>-1&&Dn(d),lc(E,v,B,fu(d)),d.options.lineWrapping||(E.iter(ke,X.line+v.text.length,function(Ht){var _n=zr(Ht);_n>F.maxLineLength&&(F.maxLine=Ht,F.maxLineLength=_n,F.maxLineChanged=!0,_e=!1)}),_e&&(d.curOp.updateMaxLine=!0)),cu(E,X.line),Jc(d,400);var Fe=v.text.length-(fe.line-X.line)-1;v.full?ws(d):X.line==fe.line&&v.text.length==1&&!Eh(d.doc,v)?XA(d,X.line,"text"):ws(d,X.line,fe.line+1,Fe);var _t=Mn(d,"changes"),Tt=Mn(d,"change");if(Tt||_t){var Jt={from:X,to:fe,text:v.text,removed:v.removed,origin:v.origin};Tt&&Xa(d,"change",d,Jt),_t&&(d.curOp.changeObjs||(d.curOp.changeObjs=[])).push(Jt)}d.display.selForContextMenu=null}function Yl(d,v,B,E,F){var X;E||(E=B),si(E,B)<0&&(X=[E,B],B=X[0],E=X[1]),typeof v=="string"&&(v=d.splitLines(v)),$s(d,{from:B,to:E,text:v,origin:F})}function td(d,v,B,E){B<d.line?d.line+=E:v<d.line&&(d.line=v,d.ch=0)}function nd(d,v,B,E){for(var F=0;F<d.length;++F){var X=d[F],fe=!0;if(X.ranges){X.copied||(X=d[F]=X.deepCopy(),X.copied=!0);for(var _e=0;_e<X.ranges.length;_e++)td(X.ranges[_e].anchor,v,B,E),td(X.ranges[_e].head,v,B,E);continue}for(var ke=0;ke<X.changes.length;++ke){var Fe=X.changes[ke];if(B<Fe.from.line)Fe.from=rn(Fe.from.line+E,Fe.from.ch),Fe.to=rn(Fe.to.line+E,Fe.to.ch);else if(v<=Fe.to.line){fe=!1;break}}fe||(d.splice(0,F+1),F=0)}}function Td(d,v){var B=v.from.line,E=v.to.line,F=v.text.length-(E-B)-1;nd(d.done,B,E,F),nd(d.undone,B,E,F)}function I(d,v,B,E){var F=v,X=v;return typeof v=="number"?X=xi(d,YA(d,v)):F=$e(v),F==null?null:(E(X,F)&&d.cm&&XA(d.cm,F,B),X)}function s(d){this.lines=d,this.parent=null;for(var v=0,B=0;B<d.length;++B)d[B].parent=this,v+=d[B].height;this.height=v}s.prototype={chunkSize:function(){return this.lines.length},removeInner:function(d,v){for(var B=d,E=d+v;B<E;++B){var F=this.lines[B];this.height-=F.height,fs(F),Xa(F,"delete")}this.lines.splice(d,v)},collapse:function(d){d.push.apply(d,this.lines)},insertInner:function(d,v,B){this.height+=B,this.lines=this.lines.slice(0,d).concat(v).concat(this.lines.slice(d));for(var E=0;E<v.length;++E)v[E].parent=this},iterN:function(d,v,B){for(var E=d+v;d<E;++d)if(B(this.lines[d]))return!0}};function f(d){this.children=d;for(var v=0,B=0,E=0;E<d.length;++E){var F=d[E];v+=F.chunkSize(),B+=F.height,F.parent=this}this.size=v,this.height=B,this.parent=null}f.prototype={chunkSize:function(){return this.size},removeInner:function(d,v){this.size-=v;for(var B=0;B<this.children.length;++B){var E=this.children[B],F=E.chunkSize();if(d<F){var X=Math.min(v,F-d),fe=E.height;if(E.removeInner(d,X),this.height-=fe-E.height,F==X&&(this.children.splice(B--,1),E.parent=null),(v-=X)==0)break;d=0}else d-=F}if(this.size-v<25&&(this.children.length>1||!(this.children[0]instanceof s))){var _e=[];this.collapse(_e),this.children=[new s(_e)],this.children[0].parent=this}},collapse:function(d){for(var v=0;v<this.children.length;++v)this.children[v].collapse(d)},insertInner:function(d,v,B){this.size+=v.length,this.height+=B;for(var E=0;E<this.children.length;++E){var F=this.children[E],X=F.chunkSize();if(d<=X){if(F.insertInner(d,v,B),F.lines&&F.lines.length>50){for(var fe=F.lines.length%25+25,_e=fe;_e<F.lines.length;){var ke=new s(F.lines.slice(_e,_e+=25));F.height-=ke.height,this.children.splice(++E,0,ke),ke.parent=this}F.lines=F.lines.slice(0,fe),this.maybeSpill()}break}d-=X}},maybeSpill:function(){if(!(this.children.length<=10)){var d=this;do{var v=d.children.splice(d.children.length-5,5),B=new f(v);if(d.parent){d.size-=B.size,d.height-=B.height;var F=He(d.parent.children,d);d.parent.children.splice(F+1,0,B)}else{var E=new f(d.children);E.parent=d,d.children=[E,B],d=E}B.parent=d.parent}while(d.children.length>10);d.parent.maybeSpill()}},iterN:function(d,v,B){for(var E=0;E<this.children.length;++E){var F=this.children[E],X=F.chunkSize();if(d<X){var fe=Math.min(v,X-d);if(F.iterN(d,fe,B))return!0;if((v-=fe)==0)break;d=0}else d-=X}}};var _=function(d,v,B){if(B)for(var E in B)B.hasOwnProperty(E)&&(this[E]=B[E]);this.doc=d,this.node=v};_.prototype.clear=function(){var d=this.doc.cm,v=this.line.widgets,B=this.line,E=$e(B);if(!(E==null||!v)){for(var F=0;F<v.length;++F)v[F]==this&&v.splice(F--,1);v.length||(B.widgets=null);var X=rc(this);Vo(B,Math.max(0,B.height-X)),d&&(Ga(d,function(){w(d,B,-X),XA(d,E,"widget")}),Xa(d,"lineWidgetCleared",d,this,E))}},_.prototype.changed=function(){var d=this,v=this.height,B=this.doc.cm,E=this.line;this.height=null;var F=rc(this)-v;F&&(pr(this.doc,E)||Vo(E,E.height+F),B&&Ga(B,function(){B.curOp.forceUpdate=!0,w(B,E,F),Xa(B,"lineWidgetChanged",B,d,$e(E))}))},ii(_);function w(d,v,B){Go(v)<(d.curOp&&d.curOp.scrollTop||d.doc.scrollTop)&&Tl(d,B)}function k(d,v,B,E){var F=new _(d,B,E),X=d.cm;return X&&F.noHScroll&&(X.display.alignWidgets=!0),I(d,v,"widget",function(fe){var _e=fe.widgets||(fe.widgets=[]);if(F.insertAt==null?_e.push(F):_e.splice(Math.min(_e.length,Math.max(0,F.insertAt)),0,F),F.line=fe,X&&!pr(d,fe)){var ke=Go(fe)<d.scrollTop;Vo(fe,fe.height+rc(F)),ke&&Tl(X,F.height),X.curOp.forceUpdate=!0}return!0}),X&&Xa(X,"lineWidgetAdded",X,F,typeof v=="number"?v:$e(v)),F}var N=0,q=function(d,v){this.lines=[],this.type=v,this.doc=d,this.id=++N};q.prototype.clear=function(){if(!this.explicitlyCleared){var d=this.doc.cm,v=d&&!d.curOp;if(v&&il(d),Mn(this,"clear")){var B=this.find();B&&Xa(this,"clear",B.from,B.to)}for(var E=null,F=null,X=0;X<this.lines.length;++X){var fe=this.lines[X],_e=kr(fe.markedSpans,this);d&&!this.collapsed?XA(d,$e(fe),"text"):d&&(_e.to!=null&&(F=$e(fe)),_e.from!=null&&(E=$e(fe))),fe.markedSpans=rA(fe.markedSpans,_e),_e.from==null&&this.collapsed&&!pr(this.doc,fe)&&d&&Vo(fe,SA(d.display))}if(d&&this.collapsed&&!d.options.lineWrapping)for(var ke=0;ke<this.lines.length;++ke){var Fe=Di(this.lines[ke]),_t=zr(Fe);_t>d.display.maxLineLength&&(d.display.maxLine=Fe,d.display.maxLineLength=_t,d.display.maxLineChanged=!0)}E!=null&&d&&this.collapsed&&ws(d,E,F+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,d&&Ff(d.doc)),d&&Xa(d,"markerCleared",d,this,E,F),v&&Fs(d),this.parent&&this.parent.clear()}},q.prototype.find=function(d,v){d==null&&this.type=="bookmark"&&(d=1);for(var B,E,F=0;F<this.lines.length;++F){var X=this.lines[F],fe=kr(X.markedSpans,this);if(fe.from!=null&&(B=rn(v?X:$e(X),fe.from),d==-1))return B;if(fe.to!=null&&(E=rn(v?X:$e(X),fe.to),d==1))return E}return B&&{from:B,to:E}},q.prototype.changed=function(){var d=this,v=this.find(-1,!0),B=this,E=this.doc.cm;!v||!E||Ga(E,function(){var F=v.line,X=$e(v.line),fe=Vd(E,X);if(fe&&(Ku(fe),E.curOp.selectionChanged=E.curOp.forceUpdate=!0),E.curOp.updateMaxLine=!0,!pr(B.doc,F)&&B.height!=null){var _e=B.height;B.height=null;var ke=rc(B)-_e;ke&&Vo(F,F.height+ke)}Xa(E,"markerChanged",E,d)})},q.prototype.attachLine=function(d){if(!this.lines.length&&this.doc.cm){var v=this.doc.cm.curOp;(!v.maybeHiddenMarkers||He(v.maybeHiddenMarkers,this)==-1)&&(v.maybeUnhiddenMarkers||(v.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(d)},q.prototype.detachLine=function(d){if(this.lines.splice(He(this.lines,d),1),!this.lines.length&&this.doc.cm){var v=this.doc.cm.curOp;(v.maybeHiddenMarkers||(v.maybeHiddenMarkers=[])).push(this)}},ii(q);function J(d,v,B,E,F){if(E&&E.shared)return pe(d,v,B,E,F);if(d.cm&&!d.cm.curOp)return Zo(d.cm,J)(d,v,B,E,F);var X=new q(d,F),fe=si(v,B);if(E&&Le(E,X,!1),fe>0||fe==0&&X.clearWhenEmpty!==!1)return X;if(X.replacedWith&&(X.collapsed=!0,X.widgetNode=ze("span",[X.replacedWith],"CodeMirror-widget"),E.handleMouseEvents||X.widgetNode.setAttribute("cm-ignore-events","true"),E.insertLeft&&(X.widgetNode.insertLeft=!0)),X.collapsed){if(or(d,v.line,v,B,X)||v.line!=B.line&&or(d,B.line,v,B,X))throw new Error("Inserting collapsed marker partially overlapping an existing one");Sa()}X.addToHistory&&rf(d,{from:v,to:B,origin:"markText"},d.sel,NaN);var _e=v.line,ke=d.cm,Fe;if(d.iter(_e,B.line+1,function(Tt){ke&&X.collapsed&&!ke.options.lineWrapping&&Di(Tt)==ke.display.maxLine&&(Fe=!0),X.collapsed&&_e!=v.line&&Vo(Tt,0),za(Tt,new oa(X,_e==v.line?v.ch:null,_e==B.line?B.ch:null),d.cm&&d.cm.curOp),++_e}),X.collapsed&&d.iter(v.line,B.line+1,function(Tt){pr(d,Tt)&&Vo(Tt,0)}),X.clearOnEnter&&gt(X,"beforeCursorEnter",function(){return X.clear()}),X.readOnly&&(Fa(),(d.history.done.length||d.history.undone.length)&&d.clearHistory()),X.collapsed&&(X.id=++N,X.atomic=!0),ke){if(Fe&&(ke.curOp.updateMaxLine=!0),X.collapsed)ws(ke,v.line,B.line+1);else if(X.className||X.startStyle||X.endStyle||X.css||X.attributes||X.title)for(var _t=v.line;_t<=B.line;_t++)XA(ke,_t,"text");X.atomic&&Ff(ke.doc),Xa(ke,"markerAdded",ke,X)}return X}var he=function(d,v){this.markers=d,this.primary=v;for(var B=0;B<d.length;++B)d[B].parent=this};he.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var d=0;d<this.markers.length;++d)this.markers[d].clear();Xa(this,"clear")}},he.prototype.find=function(d,v){return this.primary.find(d,v)},ii(he);function pe(d,v,B,E,F){E=Le(E),E.shared=!1;var X=[J(d,v,B,E,F)],fe=X[0],_e=E.widgetNode;return kA(d,function(ke){_e&&(E.widgetNode=_e.cloneNode(!0)),X.push(J(ke,Qi(ke,v),Qi(ke,B),E,F));for(var Fe=0;Fe<ke.linked.length;++Fe)if(ke.linked[Fe].isParent)return;fe=$n(X)}),new he(X,fe)}function Ee(d){return d.findMarks(rn(d.first,0),d.clipPos(rn(d.lastLine())),function(v){return v.parent})}function Se(d,v){for(var B=0;B<v.length;B++){var E=v[B],F=E.find(),X=d.clipPos(F.from),fe=d.clipPos(F.to);if(si(X,fe)){var _e=J(d,X,fe,E.primary,E.primary.type);E.markers.push(_e),_e.parent=E}}}function Ue(d){for(var v=function(E){var F=d[E],X=[F.primary.doc];kA(F.primary.doc,function(ke){return X.push(ke)});for(var fe=0;fe<F.markers.length;fe++){var _e=F.markers[fe];He(X,_e.doc)==-1&&(_e.parent=null,F.markers.splice(fe--,1))}},B=0;B<d.length;B++)v(B)}var Xe=0,At=function(d,v,B,E,F){if(!(this instanceof At))return new At(d,v,B,E,F);B==null&&(B=0),f.call(this,[new s([new Ll("",null)])]),this.first=B,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=B;var X=rn(B,0);this.sel=Gu(X),this.history=new nh(null),this.id=++Xe,this.modeOption=v,this.lineSep=E,this.direction=F=="rtl"?"rtl":"ltr",this.extend=!1,typeof d=="string"&&(d=this.splitLines(d)),lc(this,{from:X,to:X,text:d}),sa(this,Gu(X),Ot)};At.prototype=Bi(f.prototype,{constructor:At,iter:function(d,v,B){B?this.iterN(d-this.first,v-d,B):this.iterN(this.first,this.first+this.size,d)},insert:function(d,v){for(var B=0,E=0;E<v.length;++E)B+=v[E].height;this.insertInner(d-this.first,v,B)},remove:function(d,v){this.removeInner(d-this.first,v)},getValue:function(d){var v=Ma(this,this.first,this.first+this.size);return d===!1?v:v.join(d||this.lineSeparator())},setValue:ps(function(d){var v=rn(this.first,0),B=this.first+this.size-1;$s(this,{from:v,to:rn(B,xi(this,B).text.length),text:this.splitLines(d),origin:"setValue",full:!0},!0),this.cm&&aa(this.cm,0,0),sa(this,Gu(v),Ot)}),replaceRange:function(d,v,B,E){v=Qi(this,v),B=B?Qi(this,B):v,Yl(this,d,v,B,E)},getRange:function(d,v,B){var E=ls(this,Qi(this,d),Qi(this,v));return B===!1?E:B===""?E.join(""):E.join(B||this.lineSeparator())},getLine:function(d){var v=this.getLineHandle(d);return v&&v.text},getLineHandle:function(d){if(xn(this,d))return xi(this,d)},getLineNumber:function(d){return $e(d)},getLineHandleVisualStart:function(d){return typeof d=="number"&&(d=xi(this,d)),Di(d)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(d){return Qi(this,d)},getCursor:function(d){var v=this.sel.primary(),B;return d==null||d=="head"?B=v.head:d=="anchor"?B=v.anchor:d=="end"||d=="to"||d===!1?B=v.to():B=v.from(),B},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ps(function(d,v,B){Tc(this,Qi(this,typeof d=="number"?rn(d,v||0):d),null,B)}),setSelection:ps(function(d,v,B){Tc(this,Qi(this,d),Qi(this,v||d),B)}),extendSelection:ps(function(d,v,B){Wu(this,Qi(this,d),v&&Qi(this,v),B)}),extendSelections:ps(function(d,v){Oi(this,_A(this,d),v)}),extendSelectionsBy:ps(function(d,v){var B=On(this.sel.ranges,d);Oi(this,_A(this,B),v)}),setSelections:ps(function(d,v,B){if(d.length){for(var E=[],F=0;F<d.length;F++)E[F]=new Zr(Qi(this,d[F].anchor),Qi(this,d[F].head||d[F].anchor));v==null&&(v=Math.min(d.length-1,this.sel.primIndex)),sa(this,ci(this.cm,E,v),B)}}),addSelection:ps(function(d,v,B){var E=this.sel.ranges.slice(0);E.push(new Zr(Qi(this,d),Qi(this,v||d))),sa(this,ci(this.cm,E,E.length-1),B)}),getSelection:function(d){for(var v=this.sel.ranges,B,E=0;E<v.length;E++){var F=ls(this,v[E].from(),v[E].to());B=B?B.concat(F):F}return d===!1?B:B.join(d||this.lineSeparator())},getSelections:function(d){for(var v=[],B=this.sel.ranges,E=0;E<B.length;E++){var F=ls(this,B[E].from(),B[E].to());d!==!1&&(F=F.join(d||this.lineSeparator())),v[E]=F}return v},replaceSelection:function(d,v,B){for(var E=[],F=0;F<this.sel.ranges.length;F++)E[F]=d;this.replaceSelections(E,v,B||"+input")},replaceSelections:ps(function(d,v,B){for(var E=[],F=this.sel,X=0;X<F.ranges.length;X++){var fe=F.ranges[X];E[X]={from:fe.from(),to:fe.to(),text:this.splitLines(d[X]),origin:B}}for(var _e=v&&v!="end"&&nf(this,E,v),ke=E.length-1;ke>=0;ke--)$s(this,E[ke]);_e?uA(this,_e):this.cm&&Wo(this.cm)}),undo:ps(function(){cA(this,"undo")}),redo:ps(function(){cA(this,"redo")}),undoSelection:ps(function(){cA(this,"undo",!0)}),redoSelection:ps(function(){cA(this,"redo",!0)}),setExtending:function(d){this.extend=d},getExtending:function(){return this.extend},historySize:function(){for(var d=this.history,v=0,B=0,E=0;E<d.done.length;E++)d.done[E].ranges||++v;for(var F=0;F<d.undone.length;F++)d.undone[F].ranges||++B;return{undo:v,redo:B}},clearHistory:function(){var d=this;this.history=new nh(this.history),kA(this,function(v){return v.history=d.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(d){return d&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(d){return this.history.generation==(d||this.cleanGeneration)},getHistory:function(){return{done:Ko(this.history.done),undone:Ko(this.history.undone)}},setHistory:function(d){var v=this.history=new nh(this.history);v.done=Ko(d.done.slice(0),null,!0),v.undone=Ko(d.undone.slice(0),null,!0)},setGutterMarker:ps(function(d,v,B){return I(this,d,"gutter",function(E){var F=E.gutterMarkers||(E.gutterMarkers={});return F[v]=B,!B&&de(F)&&(E.gutterMarkers=null),!0})}),clearGutter:ps(function(d){var v=this;this.iter(function(B){B.gutterMarkers&&B.gutterMarkers[d]&&I(v,B,"gutter",function(){return B.gutterMarkers[d]=null,de(B.gutterMarkers)&&(B.gutterMarkers=null),!0})})}),lineInfo:function(d){var v;if(typeof d=="number"){if(!xn(this,d)||(v=d,d=xi(this,d),!d))return null}else if(v=$e(d),v==null)return null;return{line:v,handle:d,text:d.text,gutterMarkers:d.gutterMarkers,textClass:d.textClass,bgClass:d.bgClass,wrapClass:d.wrapClass,widgets:d.widgets}},addLineClass:ps(function(d,v,B){return I(this,d,v=="gutter"?"gutter":"class",function(E){var F=v=="text"?"textClass":v=="background"?"bgClass":v=="gutter"?"gutterClass":"wrapClass";if(!E[F])E[F]=B;else{if(Me(B).test(E[F]))return!1;E[F]+=" "+B}return!0})}),removeLineClass:ps(function(d,v,B){return I(this,d,v=="gutter"?"gutter":"class",function(E){var F=v=="text"?"textClass":v=="background"?"bgClass":v=="gutter"?"gutterClass":"wrapClass",X=E[F];if(X)if(B==null)E[F]=null;else{var fe=X.match(Me(B));if(!fe)return!1;var _e=fe.index+fe[0].length;E[F]=X.slice(0,fe.index)+(!fe.index||_e==X.length?"":" ")+X.slice(_e)||null}else return!1;return!0})}),addLineWidget:ps(function(d,v,B){return k(this,d,v,B)}),removeLineWidget:function(d){d.clear()},markText:function(d,v,B){return J(this,Qi(this,d),Qi(this,v),B,B&&B.type||"range")},setBookmark:function(d,v){var B={replacedWith:v&&(v.nodeType==null?v.widget:v),insertLeft:v&&v.insertLeft,clearWhenEmpty:!1,shared:v&&v.shared,handleMouseEvents:v&&v.handleMouseEvents};return d=Qi(this,d),J(this,d,d,B,"bookmark")},findMarksAt:function(d){d=Qi(this,d);var v=[],B=xi(this,d.line).markedSpans;if(B)for(var E=0;E<B.length;++E){var F=B[E];(F.from==null||F.from<=d.ch)&&(F.to==null||F.to>=d.ch)&&v.push(F.marker.parent||F.marker)}return v},findMarks:function(d,v,B){d=Qi(this,d),v=Qi(this,v);var E=[],F=d.line;return this.iter(d.line,v.line+1,function(X){var fe=X.markedSpans;if(fe)for(var _e=0;_e<fe.length;_e++){var ke=fe[_e];!(ke.to!=null&&F==d.line&&d.ch>=ke.to||ke.from==null&&F!=d.line||ke.from!=null&&F==v.line&&ke.from>=v.ch)&&(!B||B(ke.marker))&&E.push(ke.marker.parent||ke.marker)}++F}),E},getAllMarks:function(){var d=[];return this.iter(function(v){var B=v.markedSpans;if(B)for(var E=0;E<B.length;++E)B[E].from!=null&&d.push(B[E].marker)}),d},posFromIndex:function(d){var v,B=this.first,E=this.lineSeparator().length;return this.iter(function(F){var X=F.text.length+E;if(X>d)return v=d,!0;d-=X,++B}),Qi(this,rn(B,v))},indexFromPos:function(d){d=Qi(this,d);var v=d.ch;if(d.line<this.first||d.ch<0)return 0;var B=this.lineSeparator().length;return this.iter(this.first,d.line,function(E){v+=E.text.length+B}),v},copy:function(d){var v=new At(Ma(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return v.scrollTop=this.scrollTop,v.scrollLeft=this.scrollLeft,v.sel=this.sel,v.extend=!1,d&&(v.history.undoDepth=this.history.undoDepth,v.setHistory(this.getHistory())),v},linkedDoc:function(d){d||(d={});var v=this.first,B=this.first+this.size;d.from!=null&&d.from>v&&(v=d.from),d.to!=null&&d.to<B&&(B=d.to);var E=new At(Ma(this,v,B),d.mode||this.modeOption,v,this.lineSep,this.direction);return d.sharedHist&&(E.history=this.history),(this.linked||(this.linked=[])).push({doc:E,sharedHist:d.sharedHist}),E.linked=[{doc:this,isParent:!0,sharedHist:d.sharedHist}],Se(E,Ee(this)),E},unlinkDoc:function(d){if(d instanceof Jo&&(d=d.doc),this.linked)for(var v=0;v<this.linked.length;++v){var B=this.linked[v];if(B.doc==d){this.linked.splice(v,1),d.unlinkDoc(this),Ue(Ee(this));break}}if(d.history==this.history){var E=[d.id];kA(d,function(F){return E.push(F.id)},!0),d.history=new nh(null),d.history.done=Ko(this.history.done,E),d.history.undone=Ko(this.history.undone,E)}},iterLinkedDocs:function(d){kA(this,d)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(d){return this.lineSep?d.split(this.lineSep):To(d)},lineSeparator:function(){return this.lineSep||`
`},setDirection:ps(function(d){d!="rtl"&&(d="ltr"),d!=this.direction&&(this.direction=d,this.iter(function(v){return v.order=null}),this.cm&&yu(this.cm))})}),At.prototype.eachLine=At.prototype.iter;var ct=0;function ft(d){var v=this;if(wt(v),!(en(v,d)||aA(v.display,d))){Wn(d),m&&(ct=+new Date);var B=Na(v,d,!0),E=d.dataTransfer.files;if(!(!B||v.isReadOnly()))if(E&&E.length&&window.FileReader&&window.File)for(var F=E.length,X=Array(F),fe=0,_e=function(){++fe==F&&Zo(v,function(){B=Qi(v.doc,B);var Ht={from:B,to:B,text:v.doc.splitLines(X.filter(function(_n){return _n!=null}).join(v.doc.lineSeparator())),origin:"paste"};$s(v.doc,Ht),uA(v.doc,Gu(Qi(v.doc,B),Qi(v.doc,ju(Ht))))})()},ke=function(Ht,_n){if(v.options.allowDropFileTypes&&He(v.options.allowDropFileTypes,Ht.type)==-1){_e();return}var Rn=new FileReader;Rn.onerror=function(){return _e()},Rn.onload=function(){var oi=Rn.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(oi)){_e();return}X[_n]=oi,_e()},Rn.readAsText(Ht)},Fe=0;Fe<E.length;Fe++)ke(E[Fe],Fe);else{if(v.state.draggingText&&v.doc.sel.contains(B)>-1){v.state.draggingText(d),setTimeout(function(){return v.display.input.focus()},20);return}try{var _t=d.dataTransfer.getData("Text");if(_t){var Tt;if(v.state.draggingText&&!v.state.draggingText.copy&&(Tt=v.listSelections()),go(v.doc,Gu(B,B)),Tt)for(var Jt=0;Jt<Tt.length;++Jt)Yl(v.doc,"",Tt[Jt].anchor,Tt[Jt].head,"drag");v.replaceSelection(_t,"around","paste"),v.display.input.focus()}}catch{}}}}function xt(d,v){if(m&&(!d.state.draggingText||+new Date-ct<100)){wi(v);return}if(!(en(d,v)||aA(d.display,v))&&(v.dataTransfer.setData("Text",d.getSelection()),v.dataTransfer.effectAllowed="copyMove",v.dataTransfer.setDragImage&&!j)){var B=xe("img",null,null,"position: fixed; left: 0; top: 0;");B.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",z&&(B.width=B.height=1,d.display.wrapper.appendChild(B),B._top=B.offsetTop),v.dataTransfer.setDragImage(B,0,0),z&&B.parentNode.removeChild(B)}}function Ct(d,v){var B=Na(d,v);if(B){var E=document.createDocumentFragment();Tr(d,B,E),d.display.dragCursor||(d.display.dragCursor=xe("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),d.display.lineSpace.insertBefore(d.display.dragCursor,d.display.cursorDiv)),qe(d.display.dragCursor,E)}}function wt(d){d.display.dragCursor&&(d.display.lineSpace.removeChild(d.display.dragCursor),d.display.dragCursor=null)}function Pt(d){if(document.getElementsByClassName){for(var v=document.getElementsByClassName("CodeMirror"),B=[],E=0;E<v.length;E++){var F=v[E].CodeMirror;F&&B.push(F)}B.length&&B[0].operation(function(){for(var X=0;X<B.length;X++)d(B[X])})}}var Lt=!1;function Bt(){Lt||(Yt(),Lt=!0)}function Yt(){var d;gt(window,"resize",function(){d==null&&(d=setTimeout(function(){d=null,Pt(dn)},100))}),gt(window,"blur",function(){return Pt(mu)})}function dn(d){var v=d.display;v.cachedCharWidth=v.cachedTextHeight=v.cachedPaddingH=null,v.scrollbarsClipped=!1,d.setSize()}for(var Xt={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},nn=0;nn<10;nn++)Xt[nn+48]=Xt[nn+96]=String(nn);for(var An=65;An<=90;An++)Xt[An]=String.fromCharCode(An);for(var qn=1;qn<=12;qn++)Xt[qn+111]=Xt[qn+63235]="F"+qn;var Qn={};Qn.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Qn.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Qn.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Qn.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Qn.default=Z?Qn.macDefault:Qn.pcDefault;function Tn(d){var v=d.split(/-(?!$)/);d=v[v.length-1];for(var B,E,F,X,fe=0;fe<v.length-1;fe++){var _e=v[fe];if(/^(cmd|meta|m)$/i.test(_e))X=!0;else if(/^a(lt)?$/i.test(_e))B=!0;else if(/^(c|ctrl|control)$/i.test(_e))E=!0;else if(/^s(hift)?$/i.test(_e))F=!0;else throw new Error("Unrecognized modifier name: "+_e)}return B&&(d="Alt-"+d),E&&(d="Ctrl-"+d),X&&(d="Cmd-"+d),F&&(d="Shift-"+d),d}function bi(d){var v={};for(var B in d)if(d.hasOwnProperty(B)){var E=d[B];if(/^(name|fallthrough|(de|at)tach)$/.test(B))continue;if(E=="..."){delete d[B];continue}for(var F=On(B.split(" "),Tn),X=0;X<F.length;X++){var fe=void 0,_e=void 0;X==F.length-1?(_e=F.join(" "),fe=E):(_e=F.slice(0,X+1).join(" "),fe="...");var ke=v[_e];if(!ke)v[_e]=fe;else if(ke!=fe)throw new Error("Inconsistent bindings for "+_e)}delete d[B]}for(var Fe in v)d[Fe]=v[Fe];return d}function cr(d,v,B,E){v=Ra(v);var F=v.call?v.call(d,E):v[d];if(F===!1)return"nothing";if(F==="...")return"multi";if(F!=null&&B(F))return"handled";if(v.fallthrough){if(Object.prototype.toString.call(v.fallthrough)!="[object Array]")return cr(d,v.fallthrough,B,E);for(var X=0;X<v.fallthrough.length;X++){var fe=cr(d,v.fallthrough[X],B,E);if(fe)return fe}}}function _o(d){var v=typeof d=="string"?d:Xt[d.keyCode];return v=="Ctrl"||v=="Alt"||v=="Shift"||v=="Mod"}function la(d,v,B){var E=d;return v.altKey&&E!="Alt"&&(d="Alt-"+d),(ge?v.metaKey:v.ctrlKey)&&E!="Ctrl"&&(d="Ctrl-"+d),(ge?v.ctrlKey:v.metaKey)&&E!="Mod"&&(d="Cmd-"+d),!B&&v.shiftKey&&E!="Shift"&&(d="Shift-"+d),d}function Lo(d,v){if(z&&d.keyCode==34&&d.char)return!1;var B=Xt[d.keyCode];return B==null||d.altGraphKey?!1:(d.keyCode==3&&d.code&&(B=d.code),la(B,d,v))}function Ra(d){return typeof d=="string"?Qn[d]:d}function Aa(d,v){for(var B=d.doc.sel.ranges,E=[],F=0;F<B.length;F++){for(var X=v(B[F]);E.length&&si(X.from,$n(E).to)<=0;){var fe=E.pop();if(si(fe.from,X.from)<0){X.from=fe.from;break}}E.push(X)}Ga(d,function(){for(var _e=E.length-1;_e>=0;_e--)Yl(d.doc,"",E[_e].from,E[_e].to,"+delete");Wo(d)})}function Er(d,v,B){var E=me(d.text,v+B,B);return E<0||E>d.text.length?null:E}function Qo(d,v,B){var E=Er(d,v.ch,B);return E==null?null:new rn(v.line,E,B<0?"after":"before")}function ts(d,v,B,E,F){if(d){v.doc.direction=="rtl"&&(F=-F);var X=Ze(B,v.doc.direction);if(X){var fe=F<0?$n(X):X[0],_e=F<0==(fe.level==1),ke=_e?"after":"before",Fe;if(fe.level>0||v.doc.direction=="rtl"){var _t=hu(v,B);Fe=F<0?B.text.length-1:0;var Tt=ZA(v,_t,Fe).top;Fe=Te(function(Jt){return ZA(v,_t,Jt).top==Tt},F<0==(fe.level==1)?fe.from:fe.to-1,Fe),ke=="before"&&(Fe=Er(B,Fe,1))}else Fe=F<0?fe.to:fe.from;return new rn(E,Fe,ke)}}return new rn(E,F<0?B.text.length:0,F<0?"before":"after")}function Wa(d,v,B,E){var F=Ze(v,d.doc.direction);if(!F)return Qo(v,B,E);B.ch>=v.text.length?(B.ch=v.text.length,B.sticky="before"):B.ch<=0&&(B.ch=0,B.sticky="after");var X=Ye(F,B.ch,B.sticky),fe=F[X];if(d.doc.direction=="ltr"&&fe.level%2==0&&(E>0?fe.to>B.ch:fe.from<B.ch))return Qo(v,B,E);var _e=function(pi,Ci){return Er(v,pi instanceof rn?pi.ch:pi,Ci)},ke,Fe=function(pi){return d.options.lineWrapping?(ke=ke||hu(d,v),Do(d,v,ke,pi)):{begin:0,end:v.text.length}},_t=Fe(B.sticky=="before"?_e(B,-1):B.ch);if(d.doc.direction=="rtl"||fe.level==1){var Tt=fe.level==1==E<0,Jt=_e(B,Tt?1:-1);if(Jt!=null&&(Tt?Jt<=fe.to&&Jt<=_t.end:Jt>=fe.from&&Jt>=_t.begin)){var Ht=Tt?"before":"after";return new rn(B.line,Jt,Ht)}}var _n=function(pi,Ci,gi){for(var ki=function(xr,ns){return ns?new rn(B.line,_e(xr,1),"before"):new rn(B.line,xr,"after")};pi>=0&&pi<F.length;pi+=Ci){var ar=F[pi],Yi=Ci>0==(ar.level!=1),Xr=Yi?gi.begin:_e(gi.end,-1);if(ar.from<=Xr&&Xr<ar.to||(Xr=Yi?ar.from:_e(ar.to,-1),gi.begin<=Xr&&Xr<gi.end))return ki(Xr,Yi)}},Rn=_n(X+E,E,_t);if(Rn)return Rn;var oi=E>0?_t.end:_e(_t.begin,-1);return oi!=null&&!(E>0&&oi==v.text.length)&&(Rn=_n(E>0?0:F.length-1,E,Fe(oi)),Rn)?Rn:null}var Bs={selectAll:Cu,singleSelection:function(d){return d.setSelection(d.getCursor("anchor"),d.getCursor("head"),Ot)},killLine:function(d){return Aa(d,function(v){if(v.empty()){var B=xi(d.doc,v.head.line).text.length;return v.head.ch==B&&v.head.line<d.lastLine()?{from:v.head,to:rn(v.head.line+1,0)}:{from:v.head,to:rn(v.head.line,B)}}else return{from:v.from(),to:v.to()}})},deleteLine:function(d){return Aa(d,function(v){return{from:rn(v.from().line,0),to:Qi(d.doc,rn(v.to().line+1,0))}})},delLineLeft:function(d){return Aa(d,function(v){return{from:rn(v.from().line,0),to:v.from()}})},delWrappedLineLeft:function(d){return Aa(d,function(v){var B=d.charCoords(v.head,"div").top+5,E=d.coordsChar({left:0,top:B},"div");return{from:E,to:v.from()}})},delWrappedLineRight:function(d){return Aa(d,function(v){var B=d.charCoords(v.head,"div").top+5,E=d.coordsChar({left:d.display.lineDiv.offsetWidth+100,top:B},"div");return{from:v.from(),to:E}})},undo:function(d){return d.undo()},redo:function(d){return d.redo()},undoSelection:function(d){return d.undoSelection()},redoSelection:function(d){return d.redoSelection()},goDocStart:function(d){return d.extendSelection(rn(d.firstLine(),0))},goDocEnd:function(d){return d.extendSelection(rn(d.lastLine()))},goLineStart:function(d){return d.extendSelectionsBy(function(v){return Os(d,v.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(d){return d.extendSelectionsBy(function(v){return hc(d,v.head)},{origin:"+move",bias:1})},goLineEnd:function(d){return d.extendSelectionsBy(function(v){return Qu(d,v.head.line)},{origin:"+move",bias:-1})},goLineRight:function(d){return d.extendSelectionsBy(function(v){var B=d.cursorCoords(v.head,"div").top+5;return d.coordsChar({left:d.display.lineDiv.offsetWidth+100,top:B},"div")},Kt)},goLineLeft:function(d){return d.extendSelectionsBy(function(v){var B=d.cursorCoords(v.head,"div").top+5;return d.coordsChar({left:0,top:B},"div")},Kt)},goLineLeftSmart:function(d){return d.extendSelectionsBy(function(v){var B=d.cursorCoords(v.head,"div").top+5,E=d.coordsChar({left:0,top:B},"div");return E.ch<d.getLine(E.line).search(/\S/)?hc(d,v.head):E},Kt)},goLineUp:function(d){return d.moveV(-1,"line")},goLineDown:function(d){return d.moveV(1,"line")},goPageUp:function(d){return d.moveV(-1,"page")},goPageDown:function(d){return d.moveV(1,"page")},goCharLeft:function(d){return d.moveH(-1,"char")},goCharRight:function(d){return d.moveH(1,"char")},goColumnLeft:function(d){return d.moveH(-1,"column")},goColumnRight:function(d){return d.moveH(1,"column")},goWordLeft:function(d){return d.moveH(-1,"word")},goGroupRight:function(d){return d.moveH(1,"group")},goGroupLeft:function(d){return d.moveH(-1,"group")},goWordRight:function(d){return d.moveH(1,"word")},delCharBefore:function(d){return d.deleteH(-1,"codepoint")},delCharAfter:function(d){return d.deleteH(1,"char")},delWordBefore:function(d){return d.deleteH(-1,"word")},delWordAfter:function(d){return d.deleteH(1,"word")},delGroupBefore:function(d){return d.deleteH(-1,"group")},delGroupAfter:function(d){return d.deleteH(1,"group")},indentAuto:function(d){return d.indentSelection("smart")},indentMore:function(d){return d.indentSelection("add")},indentLess:function(d){return d.indentSelection("subtract")},insertTab:function(d){return d.replaceSelection("	")},insertSoftTab:function(d){for(var v=[],B=d.listSelections(),E=d.options.tabSize,F=0;F<B.length;F++){var X=B[F].from(),fe=Pe(d.getLine(X.line),X.ch,E);v.push(Wt(E-fe%E))}d.replaceSelections(v)},defaultTab:function(d){d.somethingSelected()?d.indentSelection("add"):d.execCommand("insertTab")},transposeChars:function(d){return Ga(d,function(){for(var v=d.listSelections(),B=[],E=0;E<v.length;E++)if(v[E].empty()){var F=v[E].head,X=xi(d.doc,F.line).text;if(X){if(F.ch==X.length&&(F=new rn(F.line,F.ch-1)),F.ch>0)F=new rn(F.line,F.ch+1),d.replaceRange(X.charAt(F.ch-1)+X.charAt(F.ch-2),rn(F.line,F.ch-2),F,"+transpose");else if(F.line>d.doc.first){var fe=xi(d.doc,F.line-1).text;fe&&(F=new rn(F.line,1),d.replaceRange(X.charAt(0)+d.doc.lineSeparator()+fe.charAt(fe.length-1),rn(F.line-1,fe.length-1),F,"+transpose"))}}B.push(new Zr(F,F))}d.setSelections(B)})},newlineAndIndent:function(d){return Ga(d,function(){for(var v=d.listSelections(),B=v.length-1;B>=0;B--)d.replaceRange(d.doc.lineSeparator(),v[B].anchor,v[B].head,"+input");v=d.listSelections();for(var E=0;E<v.length;E++)d.indentLine(v[E].from().line,null,!0);Wo(d)})},openLine:function(d){return d.replaceSelection(`
`,"start")},toggleOverwrite:function(d){return d.toggleOverwrite()}};function Os(d,v){var B=xi(d.doc,v),E=Di(B);return E!=B&&(v=$e(E)),ts(!0,d,E,v,1)}function Qu(d,v){var B=xi(d.doc,v),E=Xi(B);return E!=B&&(v=$e(E)),ts(!0,d,B,v,-1)}function hc(d,v){var B=Os(d,v.line),E=xi(d.doc,B.line),F=Ze(E,d.doc.direction);if(!F||F[0].level==0){var X=Math.max(B.ch,E.text.search(/\S/)),fe=v.line==B.line&&v.ch<=X&&v.ch;return rn(B.line,fe?0:X,B.sticky)}return B}function ql(d,v,B){if(typeof v=="string"&&(v=Bs[v],!v))return!1;d.display.input.ensurePolled();var E=d.display.shift,F=!1;try{d.isReadOnly()&&(d.state.suppressEdits=!0),B&&(d.display.shift=!1),F=v(d)!=vt}finally{d.display.shift=E,d.state.suppressEdits=!1}return F}function Oh(d,v,B){for(var E=0;E<d.state.keyMaps.length;E++){var F=cr(v,d.state.keyMaps[E],B,d);if(F)return F}return d.options.extraKeys&&cr(v,d.options.extraKeys,B,d)||cr(v,d.options.keyMap,B,d)}var ih=new Re;function Yu(d,v,B,E){var F=d.state.keySeq;if(F){if(_o(v))return"handled";if(/\'$/.test(v)?d.state.keySeq=null:ih.set(50,function(){d.state.keySeq==F&&(d.state.keySeq=null,d.display.input.reset())}),Rc(d,F+" "+v,B,E))return!0}return Rc(d,v,B,E)}function Rc(d,v,B,E){var F=Oh(d,v,E);return F=="multi"&&(d.state.keySeq=v),F=="handled"&&Xa(d,"keyHandled",d,v,B),(F=="handled"||F=="multi")&&(Wn(B),Ec(d)),!!F}function bl(d,v){var B=Lo(v,!0);return B?v.shiftKey&&!d.state.keySeq?Yu(d,"Shift-"+B,v,function(E){return ql(d,E,!0)})||Yu(d,B,v,function(E){if(typeof E=="string"?/^go[A-Z]/.test(E):E.motion)return ql(d,E)}):Yu(d,B,v,function(E){return ql(d,E)}):!1}function qu(d,v,B){return Yu(d,"'"+B+"'",v,function(E){return ql(d,E,!0)})}var xl=null;function Pc(d){var v=this;if(!(d.target&&d.target!=v.display.input.getField())&&(v.curOp.focus=nt(It(v)),!en(v,d))){m&&C<11&&d.keyCode==27&&(d.returnValue=!1);var B=d.keyCode;v.display.shift=B==16||d.shiftKey;var E=bl(v,d);z&&(xl=E?B:null,!E&&B==88&&!lr&&(Z?d.metaKey:d.ctrlKey)&&v.replaceSelection("",null,"cut")),r&&!Z&&!E&&B==46&&d.shiftKey&&!d.ctrlKey&&document.execCommand&&document.execCommand("cut"),B==18&&!/\bCodeMirror-crosshair\b/.test(v.display.lineDiv.className)&&bo(v)}}function bo(d){var v=d.display.lineDiv;be(v,"CodeMirror-crosshair");function B(E){(E.keyCode==18||!E.altKey)&&(Be(v,"CodeMirror-crosshair"),kt(document,"keyup",B),kt(document,"mouseover",B))}gt(document,"keyup",B),gt(document,"mouseover",B)}function Xo(d){d.keyCode==16&&(this.doc.sel.shift=!1),en(this,d)}function hA(d){var v=this;if(!(d.target&&d.target!=v.display.input.getField())&&!(aA(v.display,d)||en(v,d)||d.ctrlKey&&!d.altKey||Z&&d.metaKey)){var B=d.keyCode,E=d.charCode;if(z&&B==xl){xl=null,Wn(d);return}if(!(z&&(!d.which||d.which<10)&&bl(v,d))){var F=String.fromCharCode(E??B);F!="\b"&&(qu(v,d,F)||v.display.input.onKeyPress(d))}}}var gs=400,_u=function(d,v,B){this.time=d,this.pos=v,this.button=B};_u.prototype.compare=function(d,v,B){return this.time+gs>d&&si(v,this.pos)==0&&B==this.button};var dA,RA;function Hl(d,v){var B=+new Date;return RA&&RA.compare(B,d,v)?(dA=RA=null,"triple"):dA&&dA.compare(B,d,v)?(RA=new _u(B,d,v),dA=null,"double"):(dA=new _u(B,d,v),RA=null,"single")}function Kc(d){var v=this,B=v.display;if(!(en(v,d)||B.activeTouch&&B.input.supportsTouch())){if(B.input.ensurePolled(),B.shift=d.shiftKey,aA(B,d)){S||(B.scroller.draggable=!1,setTimeout(function(){return B.scroller.draggable=!0},100));return}if(!id(v,d)){var E=Na(v,d),F=ti(d),X=E?Hl(E,F):"single";St(v).focus(),F==1&&v.state.selectingText&&v.state.selectingText(d),!(E&&nu(v,F,E,X,d))&&(F==1?E?bu(v,E,X,d):hi(d)==B.scroller&&Wn(d):F==2?(E&&Wu(v.doc,E),setTimeout(function(){return B.input.focus()},20)):F==3&&(ye?v.display.input.onContextMenu(d):bh(v)))}}}function nu(d,v,B,E,F){var X="Click";return E=="double"?X="Double"+X:E=="triple"&&(X="Triple"+X),X=(v==1?"Left":v==2?"Middle":"Right")+X,Yu(d,la(X,F),F,function(fe){if(typeof fe=="string"&&(fe=Bs[fe]),!fe)return!1;var _e=!1;try{d.isReadOnly()&&(d.state.suppressEdits=!0),_e=fe(d,B)!=vt}finally{d.state.suppressEdits=!1}return _e})}function Qa(d,v,B){var E=d.getOption("configureMouse"),F=E?E(d,v,B):{};if(F.unit==null){var X=oe?B.shiftKey&&B.metaKey:B.altKey;F.unit=X?"rectangle":v=="single"?"char":v=="double"?"word":"line"}return(F.extend==null||d.doc.extend)&&(F.extend=d.doc.extend||B.shiftKey),F.addNew==null&&(F.addNew=Z?B.metaKey:B.ctrlKey),F.moveOnDrag==null&&(F.moveOnDrag=!(Z?B.altKey:B.ctrlKey)),F}function bu(d,v,B,E){m?setTimeout(Rt(Es,d),0):d.curOp.focus=nt(It(d));var F=Qa(d,B,E),X=d.doc.sel,fe;d.options.dragDrop&&Wi&&!d.isReadOnly()&&B=="single"&&(fe=X.contains(v))>-1&&(si((fe=X.ranges[fe]).from(),v)<0||v.xRel>0)&&(si(fe.to(),v)>0||v.xRel<0)?zf(d,E,v,F):Mu(d,E,v,F)}function zf(d,v,B,E){var F=d.display,X=!1,fe=Zo(d,function(Fe){S&&(F.scroller.draggable=!1),d.state.draggingText=!1,d.state.delayingBlurEvent&&(d.hasFocus()?d.state.delayingBlurEvent=!1:bh(d)),kt(F.wrapper.ownerDocument,"mouseup",fe),kt(F.wrapper.ownerDocument,"mousemove",_e),kt(F.scroller,"dragstart",ke),kt(F.scroller,"drop",fe),X||(Wn(Fe),E.addNew||Wu(d.doc,B,null,null,E.extend),S&&!j||m&&C==9?setTimeout(function(){F.wrapper.ownerDocument.body.focus({preventScroll:!0}),F.input.focus()},20):F.input.focus())}),_e=function(Fe){X=X||Math.abs(v.clientX-Fe.clientX)+Math.abs(v.clientY-Fe.clientY)>=10},ke=function(){return X=!0};S&&(F.scroller.draggable=!0),d.state.draggingText=fe,fe.copy=!E.moveOnDrag,gt(F.wrapper.ownerDocument,"mouseup",fe),gt(F.wrapper.ownerDocument,"mousemove",_e),gt(F.scroller,"dragstart",ke),gt(F.scroller,"drop",fe),d.state.delayingBlurEvent=!0,setTimeout(function(){return F.input.focus()},20),F.scroller.dragDrop&&F.scroller.dragDrop()}function xu(d,v,B){if(B=="char")return new Zr(v,v);if(B=="word")return d.findWordAt(v);if(B=="line")return new Zr(rn(v.line,0),Qi(d.doc,rn(v.line+1,0)));var E=B(d,v);return new Zr(E.from,E.to)}function Mu(d,v,B,E){m&&bh(d);var F=d.display,X=d.doc;Wn(v);var fe,_e,ke=X.sel,Fe=ke.ranges;if(E.addNew&&!E.extend?(_e=X.sel.contains(B),_e>-1?fe=Fe[_e]:fe=new Zr(B,B)):(fe=X.sel.primary(),_e=X.sel.primIndex),E.unit=="rectangle")E.addNew||(fe=new Zr(B,B)),B=Na(d,v,!0,!0),_e=-1;else{var _t=xu(d,B,E.unit);E.extend?fe=Rr(fe,_t.anchor,_t.head,E.extend):fe=_t}E.addNew?_e==-1?(_e=Fe.length,sa(X,ci(d,Fe.concat([fe]),_e),{scroll:!1,origin:"*mouse"})):Fe.length>1&&Fe[_e].empty()&&E.unit=="char"&&!E.extend?(sa(X,ci(d,Fe.slice(0,_e).concat(Fe.slice(_e+1)),0),{scroll:!1,origin:"*mouse"}),ke=X.sel):Ti(X,_e,fe,qt):(_e=0,sa(X,new Ca([fe],0),qt),ke=X.sel);var Tt=B;function Jt(gi){if(si(Tt,gi)!=0)if(Tt=gi,E.unit=="rectangle"){for(var ki=[],ar=d.options.tabSize,Yi=Pe(xi(X,B.line).text,B.ch,ar),Xr=Pe(xi(X,gi.line).text,gi.ch,ar),xr=Math.min(Yi,Xr),ns=Math.max(Yi,Xr),ua=Math.min(B.line,gi.line),Yr=Math.min(d.lastLine(),Math.max(B.line,gi.line));ua<=Yr;ua++){var ys=xi(X,ua).text,vs=on(ys,xr,ar);xr==ns?ki.push(new Zr(rn(ua,vs),rn(ua,vs))):ys.length>vs&&ki.push(new Zr(rn(ua,vs),rn(ua,on(ys,ns,ar))))}ki.length||ki.push(new Zr(B,B)),sa(X,ci(d,ke.ranges.slice(0,_e).concat(ki),_e),{origin:"*mouse",scroll:!1}),d.scrollIntoView(gi)}else{var ca=fe,Vl=xu(d,gi,E.unit),Is=ca.anchor,Ns;si(Vl.anchor,Is)>0?(Ns=Vl.head,Is=Us(ca.from(),Vl.anchor)):(Ns=Vl.anchor,Is=As(ca.to(),Vl.head));var Br=ke.ranges.slice(0);Br[_e]=wa(d,new Zr(Qi(X,Is),Ns)),sa(X,ci(d,Br,_e),qt)}}var Ht=F.wrapper.getBoundingClientRect(),_n=0;function Rn(gi){var ki=++_n,ar=Na(d,gi,!0,E.unit=="rectangle");if(ar)if(si(ar,Tt)!=0){d.curOp.focus=nt(It(d)),Jt(ar);var Yi=OA(F,X);(ar.line>=Yi.to||ar.line<Yi.from)&&setTimeout(Zo(d,function(){_n==ki&&Rn(gi)}),150)}else{var Xr=gi.clientY<Ht.top?-20:gi.clientY>Ht.bottom?20:0;Xr&&setTimeout(Zo(d,function(){_n==ki&&(F.scroller.scrollTop+=Xr,Rn(gi))}),50)}}function oi(gi){d.state.selectingText=!1,_n=1/0,gi&&(Wn(gi),F.input.focus()),kt(F.wrapper.ownerDocument,"mousemove",pi),kt(F.wrapper.ownerDocument,"mouseup",Ci),X.history.lastSelOrigin=null}var pi=Zo(d,function(gi){gi.buttons===0||!ti(gi)?oi(gi):Rn(gi)}),Ci=Zo(d,oi);d.state.selectingText=Ci,gt(F.wrapper.ownerDocument,"mousemove",pi),gt(F.wrapper.ownerDocument,"mouseup",Ci)}function wa(d,v){var B=v.anchor,E=v.head,F=xi(d.doc,B.line);if(si(B,E)==0&&B.sticky==E.sticky)return v;var X=Ze(F);if(!X)return v;var fe=Ye(X,B.ch,B.sticky),_e=X[fe];if(_e.from!=B.ch&&_e.to!=B.ch)return v;var ke=fe+(_e.from==B.ch==(_e.level!=1)?0:1);if(ke==0||ke==X.length)return v;var Fe;if(E.line!=B.line)Fe=(E.line-B.line)*(d.doc.direction=="ltr"?1:-1)>0;else{var _t=Ye(X,E.ch,E.sticky),Tt=_t-fe||(E.ch-B.ch)*(_e.level==1?-1:1);_t==ke-1||_t==ke?Fe=Tt<0:Fe=Tt>0}var Jt=X[ke+(Fe?-1:0)],Ht=Fe==(Jt.level==1),_n=Ht?Jt.from:Jt.to,Rn=Ht?"after":"before";return B.ch==_n&&B.sticky==Rn?v:new Zr(new rn(B.line,_n,Rn),E)}function iu(d,v,B,E){var F,X;if(v.touches)F=v.touches[0].clientX,X=v.touches[0].clientY;else try{F=v.clientX,X=v.clientY}catch{return!1}if(F>=Math.floor(d.display.gutters.getBoundingClientRect().right))return!1;E&&Wn(v);var fe=d.display,_e=fe.lineDiv.getBoundingClientRect();if(X>_e.bottom||!Mn(d,B))return er(v);X-=_e.top-fe.viewOffset;for(var ke=0;ke<d.display.gutterSpecs.length;++ke){var Fe=fe.gutters.childNodes[ke];if(Fe&&Fe.getBoundingClientRect().right>=F){var _t=Et(d.doc,X),Tt=d.display.gutterSpecs[ke];return it(d,B,d,_t,Tt.className,v),er(v)}}}function id(d,v){return iu(d,v,"gutterClick",!0)}function Nf(d,v){aA(d.display,v)||of(d,v)||en(d,v,"contextmenu")||ye||d.display.input.onContextMenu(v)}function of(d,v){return Mn(d,"gutterContextMenu")?iu(d,v,"gutterContextMenu",!1):!1}function mp(d){d.display.wrapper.className=d.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+d.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Ch(d)}var dc={toString:function(){return"CodeMirror.Init"}},rd={},Gf={};function jf(d){var v=d.optionHandlers;function B(E,F,X,fe){d.defaults[E]=F,X&&(v[E]=fe?function(_e,ke,Fe){Fe!=dc&&X(_e,ke,Fe)}:X)}d.defineOption=B,d.Init=dc,B("value","",function(E,F){return E.setValue(F)},!0),B("mode",null,function(E,F){E.doc.modeOption=F,to(E)},!0),B("indentUnit",2,to,!0),B("indentWithTabs",!1),B("smartIndent",!0),B("tabSize",4,function(E){Gl(E),Ch(E),ws(E)},!0),B("lineSeparator",null,function(E,F){if(E.doc.lineSep=F,!!F){var X=[],fe=E.doc.first;E.doc.iter(function(ke){for(var Fe=0;;){var _t=ke.text.indexOf(F,Fe);if(_t==-1)break;Fe=_t+F.length,X.push(rn(fe,_t))}fe++});for(var _e=X.length-1;_e>=0;_e--)Yl(E.doc,F,X[_e],rn(X[_e].line,X[_e].ch+F.length))}}),B("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(E,F,X){E.state.specialChars=new RegExp(F.source+(F.test("	")?"":"|	"),"g"),X!=dc&&E.refresh()}),B("specialCharPlaceholder",HA,function(E){return E.refresh()},!0),B("electricChars",!0),B("inputStyle",ne?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),B("spellcheck",!1,function(E,F){return E.getInputField().spellcheck=F},!0),B("autocorrect",!1,function(E,F){return E.getInputField().autocorrect=F},!0),B("autocapitalize",!1,function(E,F){return E.getInputField().autocapitalize=F},!0),B("rtlMoveVisually",!W),B("wholeLineUpdateBefore",!0),B("theme","default",function(E){mp(E),AA(E)},!0),B("keyMap","default",function(E,F,X){var fe=Ra(F),_e=X!=dc&&Ra(X);_e&&_e.detach&&_e.detach(E,fe),fe.attach&&fe.attach(E,_e||null)}),B("extraKeys",null),B("configureMouse",null),B("lineWrapping",!1,af,!0),B("gutters",[],function(E,F){E.display.gutterSpecs=Ja(F,E.options.lineNumbers),AA(E)},!0),B("fixedGutter",!0,function(E,F){E.display.gutters.style.left=F?jo(E.display)+"px":"0",E.refresh()},!0),B("coverGutterNextToScrollbar",!1,function(E){return Ls(E)},!0),B("scrollbarStyle","native",function(E){Zd(E),Ls(E),E.display.scrollbars.setScrollTop(E.doc.scrollTop),E.display.scrollbars.setScrollLeft(E.doc.scrollLeft)},!0),B("lineNumbers",!1,function(E,F){E.display.gutterSpecs=Ja(E.options.gutters,F),AA(E)},!0),B("firstLineNumber",1,AA,!0),B("lineNumberFormatter",function(E){return E},AA,!0),B("showCursorWhenSelecting",!1,wc,!0),B("resetSelectionOnContextMenu",!0),B("lineWiseCopyCut",!0),B("pasteLinesPerSelection",!0),B("selectionsMayTouch",!1),B("readOnly",!1,function(E,F){F=="nocursor"&&(mu(E),E.display.input.blur()),E.display.input.readOnlyChanged(F)}),B("screenReaderLabel",null,function(E,F){F=F===""?null:F,E.display.input.screenReaderLabelChanged(F)}),B("disableInput",!1,function(E,F){F||E.display.input.reset()},!0),B("dragDrop",!0,W0),B("allowDropFileTypes",null),B("cursorBlinkRate",530),B("cursorScrollMargin",0),B("cursorHeight",1,wc,!0),B("singleCursorHeightPerLine",!0,wc,!0),B("workTime",100),B("workDelay",100),B("flattenSpans",!0,Gl,!0),B("addModeClass",!1,Gl,!0),B("pollInterval",100),B("undoDepth",200,function(E,F){return E.doc.history.undoDepth=F}),B("historyEventDelay",1250),B("viewportMargin",10,function(E){return E.refresh()},!0),B("maxHighlightLength",1e4,Gl,!0),B("moveInputWithCursor",!0,function(E,F){F||E.display.input.resetPosition()}),B("tabindex",null,function(E,F){return E.display.input.getField().tabIndex=F||""}),B("autofocus",null),B("direction","ltr",function(E,F){return E.doc.setDirection(F)},!0),B("phrases",null)}function W0(d,v,B){var E=B&&B!=dc;if(!v!=!E){var F=d.display.dragFunctions,X=v?gt:kt;X(d.display.scroller,"dragstart",F.start),X(d.display.scroller,"dragenter",F.enter),X(d.display.scroller,"dragover",F.over),X(d.display.scroller,"dragleave",F.leave),X(d.display.scroller,"drop",F.drop)}}function af(d){d.options.lineWrapping?(be(d.display.wrapper,"CodeMirror-wrap"),d.display.sizer.style.minWidth="",d.display.sizerWidth=null):(Be(d.display.wrapper,"CodeMirror-wrap"),Ys(d)),qh(d),ws(d),Ch(d),setTimeout(function(){return Ls(d)},100)}function Jo(d,v){var B=this;if(!(this instanceof Jo))return new Jo(d,v);this.options=v=v?Le(v):{},Le(rd,v,!1);var E=v.value;typeof E=="string"?E=new At(E,v.mode,null,v.lineSeparator,v.direction):v.mode&&(E.modeOption=v.mode),this.doc=E;var F=new Jo.inputStyles[v.inputStyle](this),X=this.display=new Id(d,E,F,v);X.wrapper.CodeMirror=this,mp(this),v.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Zd(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Re,keySeq:null,specialChars:null},v.autofocus&&!ne&&X.input.focus(),m&&C<11&&setTimeout(function(){return B.display.input.reset(!0)},20),Bm(this),Bt(),il(this),this.curOp.forceUpdate=!0,Ac(this,E),v.autofocus&&!ne||this.hasFocus()?setTimeout(function(){B.hasFocus()&&!B.state.focused&&Ed(B)},20):mu(this);for(var fe in Gf)Gf.hasOwnProperty(fe)&&Gf[fe](this,v[fe],dc);rl(this),v.finishInit&&v.finishInit(this);for(var _e=0;_e<Ih.length;++_e)Ih[_e](this);Fs(this),S&&v.lineWrapping&&getComputedStyle(X.lineDiv).textRendering=="optimizelegibility"&&(X.lineDiv.style.textRendering="auto")}Jo.defaults=rd,Jo.optionHandlers=Gf;function Bm(d){var v=d.display;gt(v.scroller,"mousedown",Zo(d,Kc)),m&&C<11?gt(v.scroller,"dblclick",Zo(d,function(ke){if(!en(d,ke)){var Fe=Na(d,ke);if(!(!Fe||id(d,ke)||aA(d.display,ke))){Wn(ke);var _t=d.findWordAt(Fe);Wu(d.doc,_t.anchor,_t.head)}}})):gt(v.scroller,"dblclick",function(ke){return en(d,ke)||Wn(ke)}),gt(v.scroller,"contextmenu",function(ke){return Nf(d,ke)}),gt(v.input.getField(),"contextmenu",function(ke){v.scroller.contains(ke.target)||Nf(d,ke)});var B,E={end:0};function F(){v.activeTouch&&(B=setTimeout(function(){return v.activeTouch=null},1e3),E=v.activeTouch,E.end=+new Date)}function X(ke){if(ke.touches.length!=1)return!1;var Fe=ke.touches[0];return Fe.radiusX<=1&&Fe.radiusY<=1}function fe(ke,Fe){if(Fe.left==null)return!0;var _t=Fe.left-ke.left,Tt=Fe.top-ke.top;return _t*_t+Tt*Tt>20*20}gt(v.scroller,"touchstart",function(ke){if(!en(d,ke)&&!X(ke)&&!id(d,ke)){v.input.ensurePolled(),clearTimeout(B);var Fe=+new Date;v.activeTouch={start:Fe,moved:!1,prev:Fe-E.end<=300?E:null},ke.touches.length==1&&(v.activeTouch.left=ke.touches[0].pageX,v.activeTouch.top=ke.touches[0].pageY)}}),gt(v.scroller,"touchmove",function(){v.activeTouch&&(v.activeTouch.moved=!0)}),gt(v.scroller,"touchend",function(ke){var Fe=v.activeTouch;if(Fe&&!aA(v,ke)&&Fe.left!=null&&!Fe.moved&&new Date-Fe.start<300){var _t=d.coordsChar(v.activeTouch,"page"),Tt;!Fe.prev||fe(Fe,Fe.prev)?Tt=new Zr(_t,_t):!Fe.prev.prev||fe(Fe,Fe.prev.prev)?Tt=d.findWordAt(_t):Tt=new Zr(rn(_t.line,0),Qi(d.doc,rn(_t.line+1,0))),d.setSelection(Tt.anchor,Tt.head),d.focus(),Wn(ke)}F()}),gt(v.scroller,"touchcancel",F),gt(v.scroller,"scroll",function(){v.scroller.clientHeight&&($c(d,v.scroller.scrollTop),va(d,v.scroller.scrollLeft,!0),it(d,"scroll",d))}),gt(v.scroller,"mousewheel",function(ke){return $h(d,ke)}),gt(v.scroller,"DOMMouseScroll",function(ke){return $h(d,ke)}),gt(v.wrapper,"scroll",function(){return v.wrapper.scrollTop=v.wrapper.scrollLeft=0}),v.dragFunctions={enter:function(ke){en(d,ke)||wi(ke)},over:function(ke){en(d,ke)||(Ct(d,ke),wi(ke))},start:function(ke){return xt(d,ke)},drop:Zo(d,ft),leave:function(ke){en(d,ke)||wt(d)}};var _e=v.input.getField();gt(_e,"keyup",function(ke){return Xo.call(d,ke)}),gt(_e,"keydown",Zo(d,Pc)),gt(_e,"keypress",Zo(d,hA)),gt(_e,"focus",function(ke){return Ed(d,ke)}),gt(_e,"blur",function(ke){return mu(d,ke)})}var Ih=[];Jo.defineInitHook=function(d){return Ih.push(d)};function Wf(d,v,B,E){var F=d.doc,X;B==null&&(B="add"),B=="smart"&&(F.mode.indent?X=$o(d,v).state:B="prev");var fe=d.options.tabSize,_e=xi(F,v),ke=Pe(_e.text,null,fe);_e.stateAfter&&(_e.stateAfter=null);var Fe=_e.text.match(/^\s*/)[0],_t;if(!E&&!/\S/.test(_e.text))_t=0,B="not";else if(B=="smart"&&(_t=F.mode.indent(X,_e.text.slice(Fe.length),_e.text),_t==vt||_t>150)){if(!E)return;B="prev"}B=="prev"?v>F.first?_t=Pe(xi(F,v-1).text,null,fe):_t=0:B=="add"?_t=ke+d.options.indentUnit:B=="subtract"?_t=ke-d.options.indentUnit:typeof B=="number"&&(_t=ke+B),_t=Math.max(0,_t);var Tt="",Jt=0;if(d.options.indentWithTabs)for(var Ht=Math.floor(_t/fe);Ht;--Ht)Jt+=fe,Tt+="	";if(Jt<_t&&(Tt+=Wt(_t-Jt)),Tt!=Fe)return Yl(F,Tt,rn(v,0),rn(v,Fe.length),"+input"),_e.stateAfter=null,!0;for(var _n=0;_n<F.sel.ranges.length;_n++){var Rn=F.sel.ranges[_n];if(Rn.head.line==v&&Rn.head.ch<Fe.length){var oi=rn(v,Fe.length);Ti(F,_n,new Zr(oi,oi));break}}}var ru=null;function kd(d){ru=d}function Zs(d,v,B,E,F){var X=d.doc;d.display.shift=!1,E||(E=X.sel);var fe=+new Date-200,_e=F=="paste"||d.state.pasteIncoming>fe,ke=To(v),Fe=null;if(_e&&E.ranges.length>1)if(ru&&ru.text.join(`
`)==v){if(E.ranges.length%ru.text.length==0){Fe=[];for(var _t=0;_t<ru.text.length;_t++)Fe.push(X.splitLines(ru.text[_t]))}}else ke.length==E.ranges.length&&d.options.pasteLinesPerSelection&&(Fe=On(ke,function(pi){return[pi]}));for(var Tt=d.curOp.updateInput,Jt=E.ranges.length-1;Jt>=0;Jt--){var Ht=E.ranges[Jt],_n=Ht.from(),Rn=Ht.to();Ht.empty()&&(B&&B>0?_n=rn(_n.line,_n.ch-B):d.state.overwrite&&!_e?Rn=rn(Rn.line,Math.min(xi(X,Rn.line).text.length,Rn.ch+$n(ke).length)):_e&&ru&&ru.lineWise&&ru.text.join(`
`)==ke.join(`
`)&&(_n=Rn=rn(_n.line,0)));var oi={from:_n,to:Rn,text:Fe?Fe[Jt%Fe.length]:ke,origin:F||(_e?"paste":d.state.cutIncoming>fe?"cut":"+input")};$s(d.doc,oi),Xa(d,"inputRead",d,oi)}v&&!_e&&Qf(d,v),Wo(d),d.curOp.updateInput<2&&(d.curOp.updateInput=Tt),d.curOp.typing=!0,d.state.pasteIncoming=d.state.cutIncoming=-1}function us(d,v){var B=d.clipboardData&&d.clipboardData.getData("Text");if(B)return d.preventDefault(),!v.isReadOnly()&&!v.options.disableInput&&v.hasFocus()&&Ga(v,function(){return Zs(v,B,0,null,"paste")}),!0}function Qf(d,v){if(!(!d.options.electricChars||!d.options.smartIndent))for(var B=d.doc.sel,E=B.ranges.length-1;E>=0;E--){var F=B.ranges[E];if(!(F.head.ch>100||E&&B.ranges[E-1].head.line==F.head.line)){var X=d.getModeAt(F.head),fe=!1;if(X.electricChars){for(var _e=0;_e<X.electricChars.length;_e++)if(v.indexOf(X.electricChars.charAt(_e))>-1){fe=Wf(d,F.head.line,"smart");break}}else X.electricInput&&X.electricInput.test(xi(d.doc,F.head.line).text.slice(0,F.head.ch))&&(fe=Wf(d,F.head.line,"smart"));fe&&Xa(d,"electricInput",d,F.head.line)}}}function Om(d){for(var v=[],B=[],E=0;E<d.doc.sel.ranges.length;E++){var F=d.doc.sel.ranges[E].head.line,X={anchor:rn(F,0),head:rn(F+1,0)};B.push(X),v.push(d.getRange(X.anchor,X.head))}return{text:v,ranges:B}}function Yf(d,v,B,E){d.setAttribute("autocorrect",B?"on":"off"),d.setAttribute("autocapitalize",E?"on":"off"),d.setAttribute("spellcheck",!!v)}function sf(){var d=xe("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),v=xe("div",[d],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return S?d.style.width="1000px":d.setAttribute("wrap","off"),V&&(d.style.border="1px solid black"),v}function Dd(d){var v=d.optionHandlers,B=d.helpers={};d.prototype={constructor:d,focus:function(){St(this).focus(),this.display.input.focus()},setOption:function(E,F){var X=this.options,fe=X[E];X[E]==F&&E!="mode"||(X[E]=F,v.hasOwnProperty(E)&&Zo(this,v[E])(this,F,fe),it(this,"optionChange",this,E))},getOption:function(E){return this.options[E]},getDoc:function(){return this.doc},addKeyMap:function(E,F){this.state.keyMaps[F?"push":"unshift"](Ra(E))},removeKeyMap:function(E){for(var F=this.state.keyMaps,X=0;X<F.length;++X)if(F[X]==E||F[X].name==E)return F.splice(X,1),!0},addOverlay:gr(function(E,F){var X=E.token?E:d.getMode(this.options,E);if(X.startState)throw new Error("Overlays may not be stateful.");Bn(this.state.overlays,{mode:X,modeSpec:E,opaque:F&&F.opaque,priority:F&&F.priority||0},function(fe){return fe.priority}),this.state.modeGen++,ws(this)}),removeOverlay:gr(function(E){for(var F=this.state.overlays,X=0;X<F.length;++X){var fe=F[X].modeSpec;if(fe==E||typeof E=="string"&&fe.name==E){F.splice(X,1),this.state.modeGen++,ws(this);return}}}),indentLine:gr(function(E,F,X){typeof F!="string"&&typeof F!="number"&&(F==null?F=this.options.smartIndent?"smart":"prev":F=F?"add":"subtract"),xn(this.doc,E)&&Wf(this,E,F,X)}),indentSelection:gr(function(E){for(var F=this.doc.sel.ranges,X=-1,fe=0;fe<F.length;fe++){var _e=F[fe];if(_e.empty())_e.head.line>X&&(Wf(this,_e.head.line,E,!0),X=_e.head.line,fe==this.doc.sel.primIndex&&Wo(this));else{var ke=_e.from(),Fe=_e.to(),_t=Math.max(X,ke.line);X=Math.min(this.lastLine(),Fe.line-(Fe.ch?0:1))+1;for(var Tt=_t;Tt<X;++Tt)Wf(this,Tt,E);var Jt=this.doc.sel.ranges;ke.ch==0&&F.length==Jt.length&&Jt[fe].from().ch>0&&Ti(this.doc,fe,new Zr(ke,Jt[fe].to()),Ot)}}}),getTokenAt:function(E,F){return Ul(this,E,F)},getLineTokens:function(E,F){return Ul(this,rn(E),F,!0)},getTokenTypeAt:function(E){E=Qi(this.doc,E);var F=Qs(this,xi(this.doc,E.line)),X=0,fe=(F.length-1)/2,_e=E.ch,ke;if(_e==0)ke=F[2];else for(;;){var Fe=X+fe>>1;if((Fe?F[Fe*2-1]:0)>=_e)fe=Fe;else if(F[Fe*2+1]<_e)X=Fe+1;else{ke=F[Fe*2+2];break}}var _t=ke?ke.indexOf("overlay "):-1;return _t<0?ke:_t==0?null:ke.slice(0,_t-1)},getModeAt:function(E){var F=this.doc.mode;return F.innerMode?d.innerMode(F,this.getTokenAt(E).state).mode:F},getHelper:function(E,F){return this.getHelpers(E,F)[0]},getHelpers:function(E,F){var X=[];if(!B.hasOwnProperty(F))return X;var fe=B[F],_e=this.getModeAt(E);if(typeof _e[F]=="string")fe[_e[F]]&&X.push(fe[_e[F]]);else if(_e[F])for(var ke=0;ke<_e[F].length;ke++){var Fe=fe[_e[F][ke]];Fe&&X.push(Fe)}else _e.helperType&&fe[_e.helperType]?X.push(fe[_e.helperType]):fe[_e.name]&&X.push(fe[_e.name]);for(var _t=0;_t<fe._global.length;_t++){var Tt=fe._global[_t];Tt.pred(_e,this)&&He(X,Tt.val)==-1&&X.push(Tt.val)}return X},getStateAfter:function(E,F){var X=this.doc;return E=YA(X,E??X.first+X.size-1),$o(this,E+1,F).state},cursorCoords:function(E,F){var X,fe=this.doc.sel.primary();return E==null?X=fe.head:typeof E=="object"?X=Qi(this.doc,E):X=E?fe.from():fe.to(),vn(this,X,F||"page")},charCoords:function(E,F){return wn(this,Qi(this.doc,E),F||"page")},coordsChar:function(E,F){return E=Zt(this,E,F||"page"),Oo(this,E.left,E.top)},lineAtHeight:function(E,F){return E=Zt(this,{top:E,left:0},F||"page").top,Et(this.doc,E+this.display.viewOffset)},heightAtLine:function(E,F,X){var fe=!1,_e;if(typeof E=="number"){var ke=this.doc.first+this.doc.size-1;E<this.doc.first?E=this.doc.first:E>ke&&(E=ke,fe=!0),_e=xi(this.doc,E)}else _e=E;return zl(this,_e,{top:0,left:0},F||"page",X||fe).top+(fe?this.doc.height-Go(_e):0)},defaultTextHeight:function(){return SA(this.display)},defaultCharWidth:function(){return wA(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(E,F,X,fe,_e){var ke=this.display;E=vn(this,Qi(this.doc,E));var Fe=E.bottom,_t=E.left;if(F.style.position="absolute",F.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(F),ke.sizer.appendChild(F),fe=="over")Fe=E.top;else if(fe=="above"||fe=="near"){var Tt=Math.max(ke.wrapper.clientHeight,this.doc.height),Jt=Math.max(ke.sizer.clientWidth,ke.lineSpace.clientWidth);(fe=="above"||E.bottom+F.offsetHeight>Tt)&&E.top>F.offsetHeight?Fe=E.top-F.offsetHeight:E.bottom+F.offsetHeight<=Tt&&(Fe=E.bottom),_t+F.offsetWidth>Jt&&(_t=Jt-F.offsetWidth)}F.style.top=Fe+"px",F.style.left=F.style.right="",_e=="right"?(_t=ke.sizer.clientWidth-F.offsetWidth,F.style.right="0px"):(_e=="left"?_t=0:_e=="middle"&&(_t=(ke.sizer.clientWidth-F.offsetWidth)/2),F.style.left=_t+"px"),X&&Hh(this,{left:_t,top:Fe,right:_t+F.offsetWidth,bottom:Fe+F.offsetHeight})},triggerOnKeyDown:gr(Pc),triggerOnKeyPress:gr(hA),triggerOnKeyUp:Xo,triggerOnMouseDown:gr(Kc),execCommand:function(E){if(Bs.hasOwnProperty(E))return Bs[E].call(null,this)},triggerElectric:gr(function(E){Qf(this,E)}),findPosH:function(E,F,X,fe){var _e=1;F<0&&(_e=-1,F=-F);for(var ke=Qi(this.doc,E),Fe=0;Fe<F&&(ke=mr(this.doc,ke,_e,X,fe),!ke.hitSide);++Fe);return ke},moveH:gr(function(E,F){var X=this;this.extendSelectionsBy(function(fe){return X.display.shift||X.doc.extend||fe.empty()?mr(X.doc,fe.head,E,F,X.options.rtlMoveVisually):E<0?fe.from():fe.to()},Kt)}),deleteH:gr(function(E,F){var X=this.doc.sel,fe=this.doc;X.somethingSelected()?fe.replaceSelection("",null,"+delete"):Aa(this,function(_e){var ke=mr(fe,_e.head,E,F,!1);return E<0?{from:ke,to:_e.head}:{from:_e.head,to:ke}})}),findPosV:function(E,F,X,fe){var _e=1,ke=fe;F<0&&(_e=-1,F=-F);for(var Fe=Qi(this.doc,E),_t=0;_t<F;++_t){var Tt=vn(this,Fe,"div");if(ke==null?ke=Tt.left:Tt.left=ke,Fe=lf(this,Tt,_e,X),Fe.hitSide)break}return Fe},moveV:gr(function(E,F){var X=this,fe=this.doc,_e=[],ke=!this.display.shift&&!fe.extend&&fe.sel.somethingSelected();if(fe.extendSelectionsBy(function(_t){if(ke)return E<0?_t.from():_t.to();var Tt=vn(X,_t.head,"div");_t.goalColumn!=null&&(Tt.left=_t.goalColumn),_e.push(Tt.left);var Jt=lf(X,Tt,E,F);return F=="page"&&_t==fe.sel.primary()&&Tl(X,wn(X,Jt,"div").top-Tt.top),Jt},Kt),_e.length)for(var Fe=0;Fe<fe.sel.ranges.length;Fe++)fe.sel.ranges[Fe].goalColumn=_e[Fe]}),findWordAt:function(E){var F=this.doc,X=xi(F,E.line).text,fe=E.ch,_e=E.ch;if(X){var ke=this.getHelper(E,"wordChars");(E.sticky=="before"||_e==X.length)&&fe?--fe:++_e;for(var Fe=X.charAt(fe),_t=Ge(Fe,ke)?function(Tt){return Ge(Tt,ke)}:/\s/.test(Fe)?function(Tt){return/\s/.test(Tt)}:function(Tt){return!/\s/.test(Tt)&&!Ge(Tt)};fe>0&&_t(X.charAt(fe-1));)--fe;for(;_e<X.length&&_t(X.charAt(_e));)++_e}return new Zr(rn(E.line,fe),rn(E.line,_e))},toggleOverwrite:function(E){E!=null&&E==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?be(this.display.cursorDiv,"CodeMirror-overwrite"):Be(this.display.cursorDiv,"CodeMirror-overwrite"),it(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==nt(It(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:gr(function(E,F){aa(this,E,F)}),getScrollInfo:function(){var E=this.display.scroller;return{left:E.scrollLeft,top:E.scrollTop,height:E.scrollHeight-Pu(this)-this.display.barHeight,width:E.scrollWidth-Pu(this)-this.display.barWidth,clientHeight:Qh(this),clientWidth:$A(this)}},scrollIntoView:gr(function(E,F){E==null?(E={from:this.doc.sel.primary().head,to:null},F==null&&(F=this.options.cursorScrollMargin)):typeof E=="number"?E={from:rn(E,0),to:null}:E.from==null&&(E={from:E,to:null}),E.to||(E.to=E.from),E.margin=F||0,E.from.line!=null?Lu(this,E):Bc(this,E.from,E.to,E.margin)}),setSize:gr(function(E,F){var X=this,fe=function(ke){return typeof ke=="number"||/^\d+$/.test(String(ke))?ke+"px":ke};E!=null&&(this.display.wrapper.style.width=fe(E)),F!=null&&(this.display.wrapper.style.height=fe(F)),this.options.lineWrapping&&Bo(this);var _e=this.display.viewFrom;this.doc.iter(_e,this.display.viewTo,function(ke){if(ke.widgets){for(var Fe=0;Fe<ke.widgets.length;Fe++)if(ke.widgets[Fe].noHScroll){XA(X,_e,"widget");break}}++_e}),this.curOp.forceUpdate=!0,it(this,"refresh",this)}),operation:function(E){return Ga(this,E)},startOperation:function(){return il(this)},endOperation:function(){return Fs(this)},refresh:gr(function(){var E=this.display.cachedTextHeight;ws(this),this.curOp.forceUpdate=!0,Ch(this),aa(this,this.doc.scrollLeft,this.doc.scrollTop),th(this.display),(E==null||Math.abs(E-SA(this.display))>.5||this.options.lineWrapping)&&qh(this),it(this,"refresh",this)}),swapDoc:gr(function(E){var F=this.doc;return F.cm=null,this.state.selectingText&&this.state.selectingText(),Ac(this,E),Ch(this),this.display.input.reset(),aa(this,E.scrollLeft,E.scrollTop),this.curOp.forceScroll=!0,Xa(this,"swapDoc",this,F),F}),phrase:function(E){var F=this.options.phrases;return F&&Object.prototype.hasOwnProperty.call(F,E)?F[E]:E},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},ii(d),d.registerHelper=function(E,F,X){B.hasOwnProperty(E)||(B[E]=d[E]={_global:[]}),B[E][F]=X},d.registerGlobalHelper=function(E,F,X,fe){d.registerHelper(E,F,fe),B[E]._global.push({pred:X,val:fe})}}function mr(d,v,B,E,F){var X=v,fe=B,_e=xi(d,v.line),ke=F&&d.direction=="rtl"?-B:B;function Fe(){var Ci=v.line+ke;return Ci<d.first||Ci>=d.first+d.size?!1:(v=new rn(Ci,v.ch,v.sticky),_e=xi(d,Ci))}function _t(Ci){var gi;if(E=="codepoint"){var ki=_e.text.charCodeAt(v.ch+(B>0?0:-1));if(isNaN(ki))gi=null;else{var ar=B>0?ki>=55296&&ki<56320:ki>=56320&&ki<57343;gi=new rn(v.line,Math.max(0,Math.min(_e.text.length,v.ch+B*(ar?2:1))),-B)}}else F?gi=Wa(d.cm,_e,v,B):gi=Qo(_e,v,B);if(gi==null)if(!Ci&&Fe())v=ts(F,d.cm,_e,v.line,ke);else return!1;else v=gi;return!0}if(E=="char"||E=="codepoint")_t();else if(E=="column")_t(!0);else if(E=="word"||E=="group")for(var Tt=null,Jt=E=="group",Ht=d.cm&&d.cm.getHelper(v,"wordChars"),_n=!0;!(B<0&&!_t(!_n));_n=!1){var Rn=_e.text.charAt(v.ch)||`
`,oi=Ge(Rn,Ht)?"w":Jt&&Rn==`
`?"n":!Jt||/\s/.test(Rn)?null:"p";if(Jt&&!_n&&!oi&&(oi="s"),Tt&&Tt!=oi){B<0&&(B=1,_t(),v.sticky="after");break}if(oi&&(Tt=oi),B>0&&!_t(!_n))break}var pi=ja(d,v,X,fe,!0);return Jr(X,pi)&&(pi.hitSide=!0),pi}function lf(d,v,B,E){var F=d.doc,X=v.left,fe;if(E=="page"){var _e=Math.min(d.display.wrapper.clientHeight,St(d).innerHeight||F(d).documentElement.clientHeight),ke=Math.max(_e-.5*SA(d.display),3);fe=(B>0?v.bottom:v.top)+B*ke}else E=="line"&&(fe=B>0?v.bottom+3:v.top-3);for(var Fe;Fe=Oo(d,X,fe),!!Fe.outside;){if(B<0?fe<=0:fe>=F.height){Fe.hitSide=!0;break}fe+=B*5}return Fe}var ea=function(d){this.cm=d,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Re,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};ea.prototype.init=function(d){var v=this,B=this,E=B.cm,F=B.div=d.lineDiv;F.contentEditable=!0,Yf(F,E.options.spellcheck,E.options.autocorrect,E.options.autocapitalize);function X(_e){for(var ke=_e.target;ke;ke=ke.parentNode){if(ke==F)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(ke.className))break}return!1}gt(F,"paste",function(_e){!X(_e)||en(E,_e)||us(_e,E)||C<=11&&setTimeout(Zo(E,function(){return v.updateFromDOM()}),20)}),gt(F,"compositionstart",function(_e){v.composing={data:_e.data,done:!1}}),gt(F,"compositionupdate",function(_e){v.composing||(v.composing={data:_e.data,done:!1})}),gt(F,"compositionend",function(_e){v.composing&&(_e.data!=v.composing.data&&v.readFromDOMSoon(),v.composing.done=!0)}),gt(F,"touchstart",function(){return B.forceCompositionEnd()}),gt(F,"input",function(){v.composing||v.readFromDOMSoon()});function fe(_e){if(!(!X(_e)||en(E,_e))){if(E.somethingSelected())kd({lineWise:!1,text:E.getSelections()}),_e.type=="cut"&&E.replaceSelection("",null,"cut");else if(E.options.lineWiseCopyCut){var ke=Om(E);kd({lineWise:!0,text:ke.text}),_e.type=="cut"&&E.operation(function(){E.setSelections(ke.ranges,0,Ot),E.replaceSelection("",null,"cut")})}else return;if(_e.clipboardData){_e.clipboardData.clearData();var Fe=ru.text.join(`
`);if(_e.clipboardData.setData("Text",Fe),_e.clipboardData.getData("Text")==Fe){_e.preventDefault();return}}var _t=sf(),Tt=_t.firstChild;Yf(Tt),E.display.lineSpace.insertBefore(_t,E.display.lineSpace.firstChild),Tt.value=ru.text.join(`
`);var Jt=nt(pt(F));tt(Tt),setTimeout(function(){E.display.lineSpace.removeChild(_t),Jt.focus(),Jt==F&&B.showPrimarySelection()},50)}}gt(F,"copy",fe),gt(F,"cut",fe)},ea.prototype.screenReaderLabelChanged=function(d){d?this.div.setAttribute("aria-label",d):this.div.removeAttribute("aria-label")},ea.prototype.prepareSelection=function(){var d=_h(this.cm,!1);return d.focus=nt(pt(this.div))==this.div,d},ea.prototype.showSelection=function(d,v){!d||!this.cm.display.view.length||((d.focus||v)&&this.showPrimarySelection(),this.showMultipleSelections(d))},ea.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},ea.prototype.showPrimarySelection=function(){var d=this.getSelection(),v=this.cm,B=v.doc.sel.primary(),E=B.from(),F=B.to();if(v.display.viewTo==v.display.viewFrom||E.line>=v.display.viewTo||F.line<v.display.viewFrom){d.removeAllRanges();return}var X=ol(v,d.anchorNode,d.anchorOffset),fe=ol(v,d.focusNode,d.focusOffset);if(!(X&&!X.bad&&fe&&!fe.bad&&si(Us(X,fe),E)==0&&si(As(X,fe),F)==0)){var _e=v.display.view,ke=E.line>=v.display.viewFrom&&Th(v,E)||{node:_e[0].measure.map[2],offset:0},Fe=F.line<v.display.viewTo&&Th(v,F);if(!Fe){var _t=_e[_e.length-1].measure,Tt=_t.maps?_t.maps[_t.maps.length-1]:_t.map;Fe={node:Tt[Tt.length-1],offset:Tt[Tt.length-2]-Tt[Tt.length-3]}}if(!ke||!Fe){d.removeAllRanges();return}var Jt=d.rangeCount&&d.getRangeAt(0),Ht;try{Ht=ot(ke.node,ke.offset,Fe.offset,Fe.node)}catch{}Ht&&(!r&&v.state.focused?(d.collapse(ke.node,ke.offset),Ht.collapsed||(d.removeAllRanges(),d.addRange(Ht))):(d.removeAllRanges(),d.addRange(Ht)),Jt&&d.anchorNode==null?d.addRange(Jt):r&&this.startGracePeriod()),this.rememberSelection()}},ea.prototype.startGracePeriod=function(){var d=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){d.gracePeriod=!1,d.selectionChanged()&&d.cm.operation(function(){return d.cm.curOp.selectionChanged=!0})},20)},ea.prototype.showMultipleSelections=function(d){qe(this.cm.display.cursorDiv,d.cursors),qe(this.cm.display.selectionDiv,d.selection)},ea.prototype.rememberSelection=function(){var d=this.getSelection();this.lastAnchorNode=d.anchorNode,this.lastAnchorOffset=d.anchorOffset,this.lastFocusNode=d.focusNode,this.lastFocusOffset=d.focusOffset},ea.prototype.selectionInEditor=function(){var d=this.getSelection();if(!d.rangeCount)return!1;var v=d.getRangeAt(0).commonAncestorContainer;return yt(this.div,v)},ea.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||nt(pt(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},ea.prototype.blur=function(){this.div.blur()},ea.prototype.getField=function(){return this.div},ea.prototype.supportsTouch=function(){return!0},ea.prototype.receivedFocus=function(){var d=this,v=this;this.selectionInEditor()?setTimeout(function(){return d.pollSelection()},20):Ga(this.cm,function(){return v.cm.curOp.selectionChanged=!0});function B(){v.cm.state.focused&&(v.pollSelection(),v.polling.set(v.cm.options.pollInterval,B))}this.polling.set(this.cm.options.pollInterval,B)},ea.prototype.selectionChanged=function(){var d=this.getSelection();return d.anchorNode!=this.lastAnchorNode||d.anchorOffset!=this.lastAnchorOffset||d.focusNode!=this.lastFocusNode||d.focusOffset!=this.lastFocusOffset},ea.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var d=this.getSelection(),v=this.cm;if(ae&&U&&this.cm.display.gutterSpecs.length&&pp(d.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var B=ol(v,d.anchorNode,d.anchorOffset),E=ol(v,d.focusNode,d.focusOffset);B&&E&&Ga(v,function(){sa(v.doc,Gu(B,E),Ot),(B.bad||E.bad)&&(v.curOp.selectionChanged=!0)})}}},ea.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var d=this.cm,v=d.display,B=d.doc.sel.primary(),E=B.from(),F=B.to();if(E.ch==0&&E.line>d.firstLine()&&(E=rn(E.line-1,xi(d.doc,E.line-1).length)),F.ch==xi(d.doc,F.line).text.length&&F.line<d.lastLine()&&(F=rn(F.line+1,0)),E.line<v.viewFrom||F.line>v.viewTo-1)return!1;var X,fe,_e;E.line==v.viewFrom||(X=Hs(d,E.line))==0?(fe=$e(v.view[0].line),_e=v.view[0].node):(fe=$e(v.view[X].line),_e=v.view[X-1].node.nextSibling);var ke=Hs(d,F.line),Fe,_t;if(ke==v.view.length-1?(Fe=v.viewTo-1,_t=v.lineDiv.lastChild):(Fe=$e(v.view[ke+1].line)-1,_t=v.view[ke+1].node.previousSibling),!_e)return!1;for(var Tt=d.doc.splitLines(fA(d,_e,_t,fe,Fe)),Jt=ls(d.doc,rn(fe,0),rn(Fe,xi(d.doc,Fe).text.length));Tt.length>1&&Jt.length>1;)if($n(Tt)==$n(Jt))Tt.pop(),Jt.pop(),Fe--;else if(Tt[0]==Jt[0])Tt.shift(),Jt.shift(),fe++;else break;for(var Ht=0,_n=0,Rn=Tt[0],oi=Jt[0],pi=Math.min(Rn.length,oi.length);Ht<pi&&Rn.charCodeAt(Ht)==oi.charCodeAt(Ht);)++Ht;for(var Ci=$n(Tt),gi=$n(Jt),ki=Math.min(Ci.length-(Tt.length==1?Ht:0),gi.length-(Jt.length==1?Ht:0));_n<ki&&Ci.charCodeAt(Ci.length-_n-1)==gi.charCodeAt(gi.length-_n-1);)++_n;if(Tt.length==1&&Jt.length==1&&fe==E.line)for(;Ht&&Ht>E.ch&&Ci.charCodeAt(Ci.length-_n-1)==gi.charCodeAt(gi.length-_n-1);)Ht--,_n++;Tt[Tt.length-1]=Ci.slice(0,Ci.length-_n).replace(/^\u200b+/,""),Tt[0]=Tt[0].slice(Ht).replace(/\u200b+$/,"");var ar=rn(fe,Ht),Yi=rn(Fe,Jt.length?$n(Jt).length-_n:0);if(Tt.length>1||Tt[0]||si(ar,Yi))return Yl(d.doc,Tt,ar,Yi,"+input"),!0},ea.prototype.ensurePolled=function(){this.forceCompositionEnd()},ea.prototype.reset=function(){this.forceCompositionEnd()},ea.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},ea.prototype.readFromDOMSoon=function(){var d=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(d.readDOMTimeout=null,d.composing)if(d.composing.done)d.composing=null;else return;d.updateFromDOM()},80))},ea.prototype.updateFromDOM=function(){var d=this;(this.cm.isReadOnly()||!this.pollContent())&&Ga(this.cm,function(){return ws(d.cm)})},ea.prototype.setUneditable=function(d){d.contentEditable="false"},ea.prototype.onKeyPress=function(d){d.charCode==0||this.composing||(d.preventDefault(),this.cm.isReadOnly()||Zo(this.cm,Zs)(this.cm,String.fromCharCode(d.charCode==null?d.keyCode:d.charCode),0))},ea.prototype.readOnlyChanged=function(d){this.div.contentEditable=String(d!="nocursor")},ea.prototype.onContextMenu=function(){},ea.prototype.resetPosition=function(){},ea.prototype.needsContentAttribute=!0;function Th(d,v){var B=Vd(d,v.line);if(!B||B.hidden)return null;var E=xi(d.doc,v.line),F=Yh(B,E,v.line),X=Ze(E,d.doc.direction),fe="left";if(X){var _e=Ye(X,v.ch);fe=_e%2?"right":"left"}var ke=Kf(F.map,v.ch,fe);return ke.offset=ke.collapse=="right"?ke.end:ke.start,ke}function pp(d){for(var v=d;v;v=v.parentNode)if(/CodeMirror-gutter-wrapper/.test(v.className))return!0;return!1}function Hu(d,v){return v&&(d.bad=!0),d}function fA(d,v,B,E,F){var X="",fe=!1,_e=d.doc.lineSeparator(),ke=!1;function Fe(Ht){return function(_n){return _n.id==Ht}}function _t(){fe&&(X+=_e,ke&&(X+=_e),fe=ke=!1)}function Tt(Ht){Ht&&(_t(),X+=Ht)}function Jt(Ht){if(Ht.nodeType==1){var _n=Ht.getAttribute("cm-text");if(_n){Tt(_n);return}var Rn=Ht.getAttribute("cm-marker"),oi;if(Rn){var pi=d.findMarks(rn(E,0),rn(F+1,0),Fe(+Rn));pi.length&&(oi=pi[0].find(0))&&Tt(ls(d.doc,oi.from,oi.to).join(_e));return}if(Ht.getAttribute("contenteditable")=="false")return;var Ci=/^(pre|div|p|li|table|br)$/i.test(Ht.nodeName);if(!/^br$/i.test(Ht.nodeName)&&Ht.textContent.length==0)return;Ci&&_t();for(var gi=0;gi<Ht.childNodes.length;gi++)Jt(Ht.childNodes[gi]);/^(pre|p)$/i.test(Ht.nodeName)&&(ke=!0),Ci&&(fe=!0)}else Ht.nodeType==3&&Tt(Ht.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Jt(v),v!=B;)v=v.nextSibling,ke=!1;return X}function ol(d,v,B){var E;if(v==d.display.lineDiv){if(E=d.display.lineDiv.childNodes[B],!E)return Hu(d.clipPos(rn(d.display.viewTo-1)),!0);v=null,B=0}else for(E=v;;E=E.parentNode){if(!E||E==d.display.lineDiv)return null;if(E.parentNode&&E.parentNode==d.display.lineDiv)break}for(var F=0;F<d.display.view.length;F++){var X=d.display.view[F];if(X.node==E)return gp(X,v,B)}}function gp(d,v,B){var E=d.text.firstChild,F=!1;if(!v||!yt(E,v))return Hu(rn($e(d.line),0),!0);if(v==E&&(F=!0,v=E.childNodes[B],B=0,!v)){var X=d.rest?$n(d.rest):d.line;return Hu(rn($e(X),X.text.length),F)}var fe=v.nodeType==3?v:null,_e=v;for(!fe&&v.childNodes.length==1&&v.firstChild.nodeType==3&&(fe=v.firstChild,B&&(B=fe.nodeValue.length));_e.parentNode!=E;)_e=_e.parentNode;var ke=d.measure,Fe=ke.maps;function _t(oi,pi,Ci){for(var gi=-1;gi<(Fe?Fe.length:0);gi++)for(var ki=gi<0?ke.map:Fe[gi],ar=0;ar<ki.length;ar+=3){var Yi=ki[ar+2];if(Yi==oi||Yi==pi){var Xr=$e(gi<0?d.line:d.rest[gi]),xr=ki[ar]+Ci;return(Ci<0||Yi!=oi)&&(xr=ki[ar+(Ci?1:0)]),rn(Xr,xr)}}}var Tt=_t(fe,_e,B);if(Tt)return Hu(Tt,F);for(var Jt=_e.nextSibling,Ht=fe?fe.nodeValue.length-B:0;Jt;Jt=Jt.nextSibling){if(Tt=_t(Jt,Jt.firstChild,0),Tt)return Hu(rn(Tt.line,Tt.ch-Ht),F);Ht+=Jt.textContent.length}for(var _n=_e.previousSibling,Rn=B;_n;_n=_n.previousSibling){if(Tt=_t(_n,_n.firstChild,-1),Tt)return Hu(rn(Tt.line,Tt.ch+Rn),F);Rn+=_n.textContent.length}}var zs=function(d){this.cm=d,this.prevInput="",this.pollingFast=!1,this.polling=new Re,this.hasSelection=!1,this.composing=null,this.resetting=!1};zs.prototype.init=function(d){var v=this,B=this,E=this.cm;this.createField(d);var F=this.textarea;d.wrapper.insertBefore(this.wrapper,d.wrapper.firstChild),V&&(F.style.width="0px"),gt(F,"input",function(){m&&C>=9&&v.hasSelection&&(v.hasSelection=null),B.poll()}),gt(F,"paste",function(fe){en(E,fe)||us(fe,E)||(E.state.pasteIncoming=+new Date,B.fastPoll())});function X(fe){if(!en(E,fe)){if(E.somethingSelected())kd({lineWise:!1,text:E.getSelections()});else if(E.options.lineWiseCopyCut){var _e=Om(E);kd({lineWise:!0,text:_e.text}),fe.type=="cut"?E.setSelections(_e.ranges,null,Ot):(B.prevInput="",F.value=_e.text.join(`
`),tt(F))}else return;fe.type=="cut"&&(E.state.cutIncoming=+new Date)}}gt(F,"cut",X),gt(F,"copy",X),gt(d.scroller,"paste",function(fe){if(!(aA(d,fe)||en(E,fe))){if(!F.dispatchEvent){E.state.pasteIncoming=+new Date,B.focus();return}var _e=new Event("paste");_e.clipboardData=fe.clipboardData,F.dispatchEvent(_e)}}),gt(d.lineSpace,"selectstart",function(fe){aA(d,fe)||Wn(fe)}),gt(F,"compositionstart",function(){var fe=E.getCursor("from");B.composing&&B.composing.range.clear(),B.composing={start:fe,range:E.markText(fe,E.getCursor("to"),{className:"CodeMirror-composing"})}}),gt(F,"compositionend",function(){B.composing&&(B.poll(),B.composing.range.clear(),B.composing=null)})},zs.prototype.createField=function(d){this.wrapper=sf(),this.textarea=this.wrapper.firstChild;var v=this.cm.options;Yf(this.textarea,v.spellcheck,v.autocorrect,v.autocapitalize)},zs.prototype.screenReaderLabelChanged=function(d){d?this.textarea.setAttribute("aria-label",d):this.textarea.removeAttribute("aria-label")},zs.prototype.prepareSelection=function(){var d=this.cm,v=d.display,B=d.doc,E=_h(d);if(d.options.moveInputWithCursor){var F=vn(d,B.sel.primary().head,"div"),X=v.wrapper.getBoundingClientRect(),fe=v.lineDiv.getBoundingClientRect();E.teTop=Math.max(0,Math.min(v.wrapper.clientHeight-10,F.top+fe.top-X.top)),E.teLeft=Math.max(0,Math.min(v.wrapper.clientWidth-10,F.left+fe.left-X.left))}return E},zs.prototype.showSelection=function(d){var v=this.cm,B=v.display;qe(B.cursorDiv,d.cursors),qe(B.selectionDiv,d.selection),d.teTop!=null&&(this.wrapper.style.top=d.teTop+"px",this.wrapper.style.left=d.teLeft+"px")},zs.prototype.reset=function(d){if(!(this.contextMenuPending||this.composing&&d)){var v=this.cm;if(this.resetting=!0,v.somethingSelected()){this.prevInput="";var B=v.getSelection();this.textarea.value=B,v.state.focused&&tt(this.textarea),m&&C>=9&&(this.hasSelection=B)}else d||(this.prevInput=this.textarea.value="",m&&C>=9&&(this.hasSelection=null));this.resetting=!1}},zs.prototype.getField=function(){return this.textarea},zs.prototype.supportsTouch=function(){return!1},zs.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!ne||nt(pt(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},zs.prototype.blur=function(){this.textarea.blur()},zs.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},zs.prototype.receivedFocus=function(){this.slowPoll()},zs.prototype.slowPoll=function(){var d=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){d.poll(),d.cm.state.focused&&d.slowPoll()})},zs.prototype.fastPoll=function(){var d=!1,v=this;v.pollingFast=!0;function B(){var E=v.poll();!E&&!d?(d=!0,v.polling.set(60,B)):(v.pollingFast=!1,v.slowPoll())}v.polling.set(20,B)},zs.prototype.poll=function(){var d=this,v=this.cm,B=this.textarea,E=this.prevInput;if(this.contextMenuPending||this.resetting||!v.state.focused||Zn(B)&&!E&&!this.composing||v.isReadOnly()||v.options.disableInput||v.state.keySeq)return!1;var F=B.value;if(F==E&&!v.somethingSelected())return!1;if(m&&C>=9&&this.hasSelection===F||Z&&/[\uf700-\uf7ff]/.test(F))return v.display.input.reset(),!1;if(v.doc.sel==v.display.selForContextMenu){var X=F.charCodeAt(0);if(X==8203&&!E&&(E="​"),X==8666)return this.reset(),this.cm.execCommand("undo")}for(var fe=0,_e=Math.min(E.length,F.length);fe<_e&&E.charCodeAt(fe)==F.charCodeAt(fe);)++fe;return Ga(v,function(){Zs(v,F.slice(fe),E.length-fe,null,d.composing?"*compose":null),F.length>1e3||F.indexOf(`
`)>-1?B.value=d.prevInput="":d.prevInput=F,d.composing&&(d.composing.range.clear(),d.composing.range=v.markText(d.composing.start,v.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},zs.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},zs.prototype.onKeyPress=function(){m&&C>=9&&(this.hasSelection=null),this.fastPoll()},zs.prototype.onContextMenu=function(d){var v=this,B=v.cm,E=B.display,F=v.textarea;v.contextMenuPending&&v.contextMenuPending();var X=Na(B,d),fe=E.scroller.scrollTop;if(!X||z)return;var _e=B.options.resetSelectionOnContextMenu;_e&&B.doc.sel.contains(X)==-1&&Zo(B,sa)(B.doc,Gu(X),Ot);var ke=F.style.cssText,Fe=v.wrapper.style.cssText,_t=v.wrapper.offsetParent.getBoundingClientRect();v.wrapper.style.cssText="position: static",F.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(d.clientY-_t.top-5)+"px; left: "+(d.clientX-_t.left-5)+`px;
      z-index: 1000; background: `+(m?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var Tt;S&&(Tt=F.ownerDocument.defaultView.scrollY),E.input.focus(),S&&F.ownerDocument.defaultView.scrollTo(null,Tt),E.input.reset(),B.somethingSelected()||(F.value=v.prevInput=" "),v.contextMenuPending=Ht,E.selForContextMenu=B.doc.sel,clearTimeout(E.detectingSelectAll);function Jt(){if(F.selectionStart!=null){var Rn=B.somethingSelected(),oi="​"+(Rn?F.value:"");F.value="⇚",F.value=oi,v.prevInput=Rn?"":"​",F.selectionStart=1,F.selectionEnd=oi.length,E.selForContextMenu=B.doc.sel}}function Ht(){if(v.contextMenuPending==Ht&&(v.contextMenuPending=!1,v.wrapper.style.cssText=Fe,F.style.cssText=ke,m&&C<9&&E.scrollbars.setScrollTop(E.scroller.scrollTop=fe),F.selectionStart!=null)){(!m||m&&C<9)&&Jt();var Rn=0,oi=function(){E.selForContextMenu==B.doc.sel&&F.selectionStart==0&&F.selectionEnd>0&&v.prevInput=="​"?Zo(B,Cu)(B):Rn++<10?E.detectingSelectAll=setTimeout(oi,500):(E.selForContextMenu=null,E.input.reset())};E.detectingSelectAll=setTimeout(oi,200)}}if(m&&C>=9&&Jt(),ye){wi(d);var _n=function(){kt(window,"mouseup",_n),setTimeout(Ht,20)};gt(window,"mouseup",_n)}else setTimeout(Ht,50)},zs.prototype.readOnlyChanged=function(d){d||this.reset(),this.textarea.disabled=d=="nocursor",this.textarea.readOnly=!!d},zs.prototype.setUneditable=function(){},zs.prototype.needsContentAttribute=!1;function qf(d,v){if(v=v?Le(v):{},v.value=d.value,!v.tabindex&&d.tabIndex&&(v.tabindex=d.tabIndex),!v.placeholder&&d.placeholder&&(v.placeholder=d.placeholder),v.autofocus==null){var B=nt(pt(d));v.autofocus=B==d||d.getAttribute("autofocus")!=null&&B==document.body}function E(){d.value=_e.getValue()}var F;if(d.form&&(gt(d.form,"submit",E),!v.leaveSubmitMethodAlone)){var X=d.form;F=X.submit;try{var fe=X.submit=function(){E(),X.submit=F,X.submit(),X.submit=fe}}catch{}}v.finishInit=function(ke){ke.save=E,ke.getTextArea=function(){return d},ke.toTextArea=function(){ke.toTextArea=isNaN,E(),d.parentNode.removeChild(ke.getWrapperElement()),d.style.display="",d.form&&(kt(d.form,"submit",E),!v.leaveSubmitMethodAlone&&typeof d.form.submit=="function"&&(d.form.submit=F))}},d.style.display="none";var _e=Jo(function(ke){return d.parentNode.insertBefore(ke,d.nextSibling)},v);return _e}function a0(d){d.off=kt,d.on=gt,d.wheelEventPixels=Uf,d.Doc=At,d.splitLines=To,d.countColumn=Pe,d.findColumn=on,d.isWordChar=Kn,d.Pass=vt,d.signal=it,d.Line=Ll,d.changeEnd=ju,d.scrollbarModel=pu,d.Pos=rn,d.cmpPos=si,d.modes=La,d.mimeModes=Ir,d.resolveMode=Ta,d.getMode=So,d.modeExtensions=$a,d.extendMode=Ol,d.copyState=Ao,d.startState=ka,d.innerMode=QA,d.commands=Bs,d.keyMap=Qn,d.keyName=Lo,d.isModifierKey=_o,d.lookupKey=cr,d.normalizeKeyMap=bi,d.StringStream=Vi,d.SharedTextMarker=he,d.TextMarker=q,d.LineWidget=_,d.e_preventDefault=Wn,d.e_stopPropagation=qi,d.e_stop=wi,d.addClass=be,d.contains=yt,d.rmClass=Be,d.keyNames=Xt}jf(Jo),Dd(Jo);var s0="iter insert remove copy getEditor constructor".split(" ");for(var Af in At.prototype)At.prototype.hasOwnProperty(Af)&&He(s0,Af)<0&&(Jo.prototype[Af]=function(d){return function(){return d.apply(this.doc,arguments)}}(At.prototype[Af]));return ii(At),Jo.inputStyles={textarea:zs,contenteditable:ea},Jo.defineMode=function(d){!Jo.defaults.mode&&d!="null"&&(Jo.defaults.mode=d),Ni.apply(this,arguments)},Jo.defineMIME=gl,Jo.defineMode("null",function(){return{token:function(d){return d.skipToEnd()}}}),Jo.defineMIME("text/plain","null"),Jo.defineExtension=function(d,v){Jo.prototype[d]=v},Jo.defineDocExtension=function(d,v){At.prototype[d]=v},Jo.fromTextArea=qf,a0(Jo),Jo.version="5.65.20",Jo})}(Ix)),Ix.exports}var Lse=L2();const tp=WA(Lse);var sk={exports:{}},lk;function Fse(){return lk||(lk=1,function(n,e){(function(t){t(L2())})(function(t){t.defineMode("javascript",function(i,r){var a=i.indentUnit,l=r.statementIndent,o=r.jsonld,m=r.json||o,C=r.trackScope!==!1,S=r.typescript,O=r.wordCharacters||/[\w$\xa1-\uffff]/,U=function(){function $e(wo){return{type:wo,style:"keyword"}}var Et=$e("keyword a"),xn=$e("keyword b"),jn=$e("keyword c"),rn=$e("keyword d"),si=$e("operator"),Jr={type:"atom",style:"atom"};return{if:$e("if"),while:Et,with:Et,else:xn,do:xn,try:xn,finally:xn,return:rn,break:rn,continue:rn,new:$e("new"),delete:jn,void:jn,throw:jn,debugger:$e("debugger"),var:$e("var"),const:$e("var"),let:$e("var"),function:$e("function"),catch:$e("catch"),for:$e("for"),switch:$e("switch"),case:$e("case"),default:$e("default"),in:si,typeof:si,instanceof:si,true:Jr,false:Jr,null:Jr,undefined:Jr,NaN:Jr,Infinity:Jr,this:$e("this"),class:$e("class"),super:$e("atom"),yield:jn,export:$e("export"),import:$e("import"),extends:jn,await:jn}}(),K=/[+\-*&%=<>!?|~^@]/,z=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function j($e){for(var Et=!1,xn,jn=!1;(xn=$e.next())!=null;){if(!Et){if(xn=="/"&&!jn)return;xn=="["?jn=!0:jn&&xn=="]"&&(jn=!1)}Et=!Et&&xn=="\\"}}var Q,ee;function V($e,Et,xn){return Q=$e,ee=xn,Et}function ae($e,Et){var xn=$e.next();if(xn=='"'||xn=="'")return Et.tokenize=ne(xn),Et.tokenize($e,Et);if(xn=="."&&$e.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return V("number","number");if(xn=="."&&$e.match(".."))return V("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(xn))return V(xn);if(xn=="="&&$e.eat(">"))return V("=>","operator");if(xn=="0"&&$e.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return V("number","number");if(/\d/.test(xn))return $e.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),V("number","number");if(xn=="/")return $e.eat("*")?(Et.tokenize=Z,Z($e,Et)):$e.eat("/")?($e.skipToEnd(),V("comment","comment")):Vo($e,Et,1)?(j($e),$e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),V("regexp","string-2")):($e.eat("="),V("operator","operator",$e.current()));if(xn=="`")return Et.tokenize=oe,oe($e,Et);if(xn=="#"&&$e.peek()=="!")return $e.skipToEnd(),V("meta","meta");if(xn=="#"&&$e.eatWhile(O))return V("variable","property");if(xn=="<"&&$e.match("!--")||xn=="-"&&$e.match("->")&&!/\S/.test($e.string.slice(0,$e.start)))return $e.skipToEnd(),V("comment","comment");if(K.test(xn))return(xn!=">"||!Et.lexical||Et.lexical.type!=">")&&($e.eat("=")?(xn=="!"||xn=="=")&&$e.eat("="):/[<>*+\-|&?]/.test(xn)&&($e.eat(xn),xn==">"&&$e.eat(xn))),xn=="?"&&$e.eat(".")?V("."):V("operator","operator",$e.current());if(O.test(xn)){$e.eatWhile(O);var jn=$e.current();if(Et.lastType!="."){if(U.propertyIsEnumerable(jn)){var rn=U[jn];return V(rn.type,rn.style,jn)}if(jn=="async"&&$e.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return V("async","keyword",jn)}return V("variable","variable",jn)}}function ne($e){return function(Et,xn){var jn=!1,rn;if(o&&Et.peek()=="@"&&Et.match(z))return xn.tokenize=ae,V("jsonld-keyword","meta");for(;(rn=Et.next())!=null&&!(rn==$e&&!jn);)jn=!jn&&rn=="\\";return jn||(xn.tokenize=ae),V("string","string")}}function Z($e,Et){for(var xn=!1,jn;jn=$e.next();){if(jn=="/"&&xn){Et.tokenize=ae;break}xn=jn=="*"}return V("comment","comment")}function oe($e,Et){for(var xn=!1,jn;(jn=$e.next())!=null;){if(!xn&&(jn=="`"||jn=="$"&&$e.eat("{"))){Et.tokenize=ae;break}xn=!xn&&jn=="\\"}return V("quasi","string-2",$e.current())}var W="([{}])";function ue($e,Et){Et.fatArrowAt&&(Et.fatArrowAt=null);var xn=$e.string.indexOf("=>",$e.start);if(!(xn<0)){if(S){var jn=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec($e.string.slice($e.start,xn));jn&&(xn=jn.index)}for(var rn=0,si=!1,Jr=xn-1;Jr>=0;--Jr){var wo=$e.string.charAt(Jr),As=W.indexOf(wo);if(As>=0&&As<3){if(!rn){++Jr;break}if(--rn==0){wo=="("&&(si=!0);break}}else if(As>=3&&As<6)++rn;else if(O.test(wo))si=!0;else if(/["'\/`]/.test(wo))for(;;--Jr){if(Jr==0)return;var Us=$e.string.charAt(Jr-1);if(Us==wo&&$e.string.charAt(Jr-2)!="\\"){Jr--;break}}else if(si&&!rn){++Jr;break}}si&&!rn&&(Et.fatArrowAt=Jr)}}var ge={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function ye($e,Et,xn,jn,rn,si){this.indented=$e,this.column=Et,this.type=xn,this.prev=rn,this.info=si,jn!=null&&(this.align=jn)}function Me($e,Et){if(!C)return!1;for(var xn=$e.localVars;xn;xn=xn.next)if(xn.name==Et)return!0;for(var jn=$e.context;jn;jn=jn.prev)for(var xn=jn.vars;xn;xn=xn.next)if(xn.name==Et)return!0}function Be($e,Et,xn,jn,rn){var si=$e.cc;for(we.state=$e,we.stream=rn,we.marked=null,we.cc=si,we.style=Et,$e.lexical.hasOwnProperty("align")||($e.lexical.align=!0);;){var Jr=si.length?si.pop():m?He:Pe;if(Jr(xn,jn)){for(;si.length&&si[si.length-1].lex;)si.pop()();return we.marked?we.marked:xn=="variable"&&Me($e,jn)?"variable-2":Et}}}var we={state:null,marked:null,cc:null};function qe(){for(var $e=arguments.length-1;$e>=0;$e--)we.cc.push(arguments[$e])}function xe(){return qe.apply(null,arguments),!0}function ze($e,Et){for(var xn=Et;xn;xn=xn.next)if(xn.name==$e)return!0;return!1}function ot($e){var Et=we.state;if(we.marked="def",!!C){if(Et.context){if(Et.lexical.info=="var"&&Et.context&&Et.context.block){var xn=yt($e,Et.context);if(xn!=null){Et.context=xn;return}}else if(!ze($e,Et.localVars)){Et.localVars=new Ne($e,Et.localVars);return}}r.globalVars&&!ze($e,Et.globalVars)&&(Et.globalVars=new Ne($e,Et.globalVars))}}function yt($e,Et){if(Et)if(Et.block){var xn=yt($e,Et.prev);return xn?xn==Et.prev?Et:new be(xn,Et.vars,!0):null}else return ze($e,Et.vars)?Et:new be(Et.prev,new Ne($e,Et.vars),!1);else return null}function nt($e){return $e=="public"||$e=="private"||$e=="protected"||$e=="abstract"||$e=="readonly"}function be($e,Et,xn){this.prev=$e,this.vars=Et,this.block=xn}function Ne($e,Et){this.name=$e,this.next=Et}var tt=new Ne("this",new Ne("arguments",null));function lt(){we.state.context=new be(we.state.context,we.state.localVars,!1),we.state.localVars=tt}function It(){we.state.context=new be(we.state.context,we.state.localVars,!0),we.state.localVars=null}lt.lex=It.lex=!0;function pt(){we.state.localVars=we.state.context.vars,we.state.context=we.state.context.prev}pt.lex=!0;function St($e,Et){var xn=function(){var jn=we.state,rn=jn.indented;if(jn.lexical.type=="stat")rn=jn.lexical.indented;else for(var si=jn.lexical;si&&si.type==")"&&si.align;si=si.prev)rn=si.indented;jn.lexical=new ye(rn,we.stream.column(),$e,null,jn.lexical,Et)};return xn.lex=!0,xn}function Rt(){var $e=we.state;$e.lexical.prev&&($e.lexical.type==")"&&($e.indented=$e.lexical.indented),$e.lexical=$e.lexical.prev)}Rt.lex=!0;function Le($e){function Et(xn){return xn==$e?xe():$e==";"||xn=="}"||xn==")"||xn=="]"?qe():xe(Et)}return Et}function Pe($e,Et){return $e=="var"?xe(St("vardef",Et),qi,Le(";"),Rt):$e=="keyword a"?xe(St("form"),vt,Pe,Rt):$e=="keyword b"?xe(St("form"),Pe,Rt):$e=="keyword d"?we.stream.match(/^\s*$/,!1)?xe():xe(St("stat"),qt,Le(";"),Rt):$e=="debugger"?xe(Le(";")):$e=="{"?xe(St("}"),It,Te,Rt,pt):$e==";"?xe():$e=="if"?(we.state.lexical.info=="else"&&we.state.cc[we.state.cc.length-1]==Rt&&we.state.cc.pop()(),xe(St("form"),vt,Pe,Rt,Sn)):$e=="function"?xe(To):$e=="for"?xe(St("form"),It,lo,Pe,pt,Rt):$e=="class"||S&&Et=="interface"?(we.marked="keyword",xe(St("form",$e=="class"?$e:Et),La,Rt)):$e=="variable"?S&&Et=="declare"?(we.marked="keyword",xe(Pe)):S&&(Et=="module"||Et=="enum"||Et=="type")&&we.stream.match(/^\s*\w/,!1)?(we.marked="keyword",Et=="enum"?xe(xi):Et=="type"?xe(lr,Le("operator"),Ze,Le(";")):xe(St("form"),er,Le("{"),St("}"),Te,Rt,Rt)):S&&Et=="namespace"?(we.marked="keyword",xe(St("form"),He,Pe,Rt)):S&&Et=="abstract"?(we.marked="keyword",xe(Pe)):xe(St("stat"),ei):$e=="switch"?xe(St("form"),vt,Le("{"),St("}","switch"),It,Te,Rt,Rt,pt):$e=="case"?xe(He,Le(":")):$e=="default"?xe(Le(":")):$e=="catch"?xe(St("form"),lt,Re,Pe,Rt,pt):$e=="export"?xe(St("stat"),Ta,Rt):$e=="import"?xe(St("stat"),$a,Rt):$e=="async"?xe(Pe):Et=="@"?xe(He,Pe):qe(St("stat"),He,Le(";"),Rt)}function Re($e){if($e=="(")return xe(zi,Le(")"))}function He($e,Et){return Ot($e,Et,!1)}function bt($e,Et){return Ot($e,Et,!0)}function vt($e){return $e!="("?qe():xe(St(")"),qt,Le(")"),Rt)}function Ot($e,Et,xn){if(we.state.fatArrowAt==we.stream.start){var jn=xn?On:$n;if($e=="(")return xe(lt,St(")"),le(zi,")"),Rt,Le("=>"),jn,pt);if($e=="variable")return qe(lt,er,Le("=>"),jn,pt)}var rn=xn?on:Kt;return ge.hasOwnProperty($e)?xe(rn):$e=="function"?xe(To,rn):$e=="class"||S&&Et=="interface"?(we.marked="keyword",xe(St("form"),vr,Rt)):$e=="keyword c"||$e=="async"?xe(xn?bt:He):$e=="("?xe(St(")"),qt,Le(")"),Rt,rn):$e=="operator"||$e=="spread"?xe(xn?bt:He):$e=="["?xe(St("]"),Vi,Rt,rn):$e=="{"?me(Ge,"}",null,rn):$e=="quasi"?qe(Jn,rn):$e=="new"?xe(Bn(xn)):xe()}function qt($e){return $e.match(/[;\}\)\],]/)?qe():qe(He)}function Kt($e,Et){return $e==","?xe(qt):on($e,Et,!1)}function on($e,Et,xn){var jn=xn==!1?Kt:on,rn=xn==!1?He:bt;if($e=="=>")return xe(lt,xn?On:$n,pt);if($e=="operator")return/\+\+|--/.test(Et)||S&&Et=="!"?xe(jn):S&&Et=="<"&&we.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?xe(St(">"),le(Ze,">"),Rt,jn):Et=="?"?xe(He,Le(":"),rn):xe(rn);if($e=="quasi")return qe(Jn,jn);if($e!=";"){if($e=="(")return me(bt,")","call",jn);if($e==".")return xe(Kn,jn);if($e=="[")return xe(St("]"),qt,Le("]"),Rt,jn);if(S&&Et=="as")return we.marked="keyword",xe(Ze,jn);if($e=="regexp")return we.state.lastType=we.marked="operator",we.stream.backUp(we.stream.pos-we.stream.start-1),xe(rn)}}function Jn($e,Et){return $e!="quasi"?qe():Et.slice(Et.length-2)!="${"?xe(Jn):xe(qt,Wt)}function Wt($e){if($e=="}")return we.marked="string-2",we.state.tokenize=oe,xe(Jn)}function $n($e){return ue(we.stream,we.state),qe($e=="{"?Pe:He)}function On($e){return ue(we.stream,we.state),qe($e=="{"?Pe:bt)}function Bn($e){return function(Et){return Et=="."?xe($e?Bi:In):Et=="variable"&&S?xe(Mn,$e?on:Kt):qe($e?bt:He)}}function In($e,Et){if(Et=="target")return we.marked="keyword",xe(Kt)}function Bi($e,Et){if(Et=="target")return we.marked="keyword",xe(on)}function ei($e){return $e==":"?xe(Rt,Pe):qe(Kt,Le(";"),Rt)}function Kn($e){if($e=="variable")return we.marked="property",xe()}function Ge($e,Et){if($e=="async")return we.marked="property",xe(Ge);if($e=="variable"||we.style=="keyword"){if(we.marked="property",Et=="get"||Et=="set")return xe(de);var xn;return S&&we.state.fatArrowAt==we.stream.start&&(xn=we.stream.match(/^\s*:\s*/,!1))&&(we.state.fatArrowAt=we.stream.pos+xn[0].length),xe(re)}else{if($e=="number"||$e=="string")return we.marked=o?"property":we.style+" property",xe(re);if($e=="jsonld-keyword")return xe(re);if(S&&nt(Et))return we.marked="keyword",xe(Ge);if($e=="[")return xe(He,We,Le("]"),re);if($e=="spread")return xe(bt,re);if(Et=="*")return we.marked="keyword",xe(Ge);if($e==":")return qe(re)}}function de($e){return $e!="variable"?qe(re):(we.marked="property",xe(To))}function re($e){if($e==":")return xe(bt);if($e=="(")return qe(To)}function le($e,Et,xn){function jn(rn,si){if(xn?xn.indexOf(rn)>-1:rn==","){var Jr=we.state.lexical;return Jr.info=="call"&&(Jr.pos=(Jr.pos||0)+1),xe(function(wo,As){return wo==Et||As==Et?qe():qe($e)},jn)}return rn==Et||si==Et?xe():xn&&xn.indexOf(";")>-1?qe($e):xe(Le(Et))}return function(rn,si){return rn==Et||si==Et?xe():qe($e,jn)}}function me($e,Et,xn){for(var jn=3;jn<arguments.length;jn++)we.cc.push(arguments[jn]);return xe(St(Et,xn),le($e,Et),Rt)}function Te($e){return $e=="}"?xe():qe(Pe,Te)}function We($e,Et){if(S){if($e==":")return xe(Ze);if(Et=="?")return xe(We)}}function dt($e,Et){if(S&&($e==":"||Et=="in"))return xe(Ze)}function Ye($e){if(S&&$e==":")return we.stream.match(/^\s*\w+\s+is\b/,!1)?xe(He,De,Ze):xe(Ze)}function De($e,Et){if(Et=="is")return we.marked="keyword",xe()}function Ze($e,Et){if(Et=="keyof"||Et=="typeof"||Et=="infer"||Et=="readonly")return we.marked="keyword",xe(Et=="typeof"?bt:Ze);if($e=="variable"||Et=="void")return we.marked="type",xe(Dn);if(Et=="|"||Et=="&")return xe(Ze);if($e=="string"||$e=="number"||$e=="atom")return xe(Dn);if($e=="[")return xe(St("]"),le(Ze,"]",","),Rt,Dn);if($e=="{")return xe(St("}"),gt,Rt,Dn);if($e=="(")return xe(le(en,")"),g,Dn);if($e=="<")return xe(le(Ze,">"),Ze);if($e=="quasi")return qe(kt,Dn)}function g($e){if($e=="=>")return xe(Ze)}function gt($e){return $e.match(/[\}\)\]]/)?xe():$e==","||$e==";"?xe(gt):qe(ht,gt)}function ht($e,Et){if($e=="variable"||we.style=="keyword")return we.marked="property",xe(ht);if(Et=="?"||$e=="number"||$e=="string")return xe(ht);if($e==":")return xe(Ze);if($e=="[")return xe(Le("variable"),dt,Le("]"),ht);if($e=="(")return qe(Zn,ht);if(!$e.match(/[;\}\)\],]/))return xe()}function kt($e,Et){return $e!="quasi"?qe():Et.slice(Et.length-2)!="${"?xe(kt):xe(Ze,it)}function it($e){if($e=="}")return we.marked="string-2",we.state.tokenize=oe,xe(kt)}function en($e,Et){return $e=="variable"&&we.stream.match(/^\s*[?:]/,!1)||Et=="?"?xe(en):$e==":"?xe(Ze):$e=="spread"?xe(en):qe(Ze)}function Dn($e,Et){if(Et=="<")return xe(St(">"),le(Ze,">"),Rt,Dn);if(Et=="|"||$e=="."||Et=="&")return xe(Ze);if($e=="[")return xe(Ze,Le("]"),Dn);if(Et=="extends"||Et=="implements")return we.marked="keyword",xe(Ze);if(Et=="?")return xe(Ze,Le(":"),Ze)}function Mn($e,Et){if(Et=="<")return xe(St(">"),le(Ze,">"),Rt,Dn)}function ii(){return qe(Ze,Wn)}function Wn($e,Et){if(Et=="=")return xe(Ze)}function qi($e,Et){return Et=="enum"?(we.marked="keyword",xe(xi)):qe(er,We,ti,Wi)}function er($e,Et){if(S&&nt(Et))return we.marked="keyword",xe(er);if($e=="variable")return ot(Et),xe();if($e=="spread")return xe(er);if($e=="[")return me(hi,"]");if($e=="{")return me(wi,"}")}function wi($e,Et){return $e=="variable"&&!we.stream.match(/^\s*:/,!1)?(ot(Et),xe(ti)):($e=="variable"&&(we.marked="property"),$e=="spread"?xe(er):$e=="}"?qe():$e=="["?xe(He,Le("]"),Le(":"),wi):xe(Le(":"),er,ti))}function hi(){return qe(er,ti)}function ti($e,Et){if(Et=="=")return xe(bt)}function Wi($e){if($e==",")return xe(qi)}function Sn($e,Et){if($e=="keyword b"&&Et=="else")return xe(St("form","else"),Pe,Rt)}function lo($e,Et){if(Et=="await")return xe(lo);if($e=="(")return xe(St(")"),Hi,Rt)}function Hi($e){return $e=="var"?xe(qi,pa):$e=="variable"?xe(pa):qe(pa)}function pa($e,Et){return $e==")"?xe():$e==";"?xe(pa):Et=="in"||Et=="of"?(we.marked="keyword",xe(He,pa)):qe(He,pa)}function To($e,Et){if(Et=="*")return we.marked="keyword",xe(To);if($e=="variable")return ot(Et),xe(To);if($e=="(")return xe(lt,St(")"),le(zi,")"),Rt,Ye,Pe,pt);if(S&&Et=="<")return xe(St(">"),le(ii,">"),Rt,To)}function Zn($e,Et){if(Et=="*")return we.marked="keyword",xe(Zn);if($e=="variable")return ot(Et),xe(Zn);if($e=="(")return xe(lt,St(")"),le(zi,")"),Rt,Ye,pt);if(S&&Et=="<")return xe(St(">"),le(ii,">"),Rt,Zn)}function lr($e,Et){if($e=="keyword"||$e=="variable")return we.marked="type",xe(lr);if(Et=="<")return xe(St(">"),le(ii,">"),Rt)}function zi($e,Et){return Et=="@"&&xe(He,zi),$e=="spread"?xe(zi):S&&nt(Et)?(we.marked="keyword",xe(zi)):S&&$e=="this"?xe(We,ti):qe(er,We,ti)}function vr($e,Et){return $e=="variable"?La($e,Et):Ir($e,Et)}function La($e,Et){if($e=="variable")return ot(Et),xe(Ir)}function Ir($e,Et){if(Et=="<")return xe(St(">"),le(ii,">"),Rt,Ir);if(Et=="extends"||Et=="implements"||S&&$e==",")return Et=="implements"&&(we.marked="keyword"),xe(S?Ze:He,Ir);if($e=="{")return xe(St("}"),Ni,Rt)}function Ni($e,Et){if($e=="async"||$e=="variable"&&(Et=="static"||Et=="get"||Et=="set"||S&&nt(Et))&&we.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return we.marked="keyword",xe(Ni);if($e=="variable"||we.style=="keyword")return we.marked="property",xe(gl,Ni);if($e=="number"||$e=="string")return xe(gl,Ni);if($e=="[")return xe(He,We,Le("]"),gl,Ni);if(Et=="*")return we.marked="keyword",xe(Ni);if(S&&$e=="(")return qe(Zn,Ni);if($e==";"||$e==",")return xe(Ni);if($e=="}")return xe();if(Et=="@")return xe(He,Ni)}function gl($e,Et){if(Et=="!"||Et=="?")return xe(gl);if($e==":")return xe(Ze,ti);if(Et=="=")return xe(bt);var xn=we.state.lexical.prev,jn=xn&&xn.info=="interface";return qe(jn?Zn:To)}function Ta($e,Et){return Et=="*"?(we.marked="keyword",xe(ka,Le(";"))):Et=="default"?(we.marked="keyword",xe(He,Le(";"))):$e=="{"?xe(le(So,"}"),ka,Le(";")):qe(Pe)}function So($e,Et){if(Et=="as")return we.marked="keyword",xe(Le("variable"));if($e=="variable")return qe(bt,So)}function $a($e){return $e=="string"?xe():$e=="("?qe(He):$e=="."?qe(Kt):qe(Ol,Ao,ka)}function Ol($e,Et){return $e=="{"?me(Ol,"}"):($e=="variable"&&ot(Et),Et=="*"&&(we.marked="keyword"),xe(QA))}function Ao($e){if($e==",")return xe(Ol,Ao)}function QA($e,Et){if(Et=="as")return we.marked="keyword",xe(Ol)}function ka($e,Et){if(Et=="from")return we.marked="keyword",xe(He)}function Vi($e){return $e=="]"?xe():qe(le(bt,"]"))}function xi(){return qe(St("form"),er,Le("{"),St("}"),le(ls,"}"),Rt,Rt)}function ls(){return qe(er,ti)}function Ma($e,Et){return $e.lastType=="operator"||$e.lastType==","||K.test(Et.charAt(0))||/[,.]/.test(Et.charAt(0))}function Vo($e,Et,xn){return Et.tokenize==ae&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(Et.lastType)||Et.lastType=="quasi"&&/\{\s*$/.test($e.string.slice(0,$e.pos-(xn||0)))}return{startState:function($e){var Et={tokenize:ae,lastType:"sof",cc:[],lexical:new ye(($e||0)-a,0,"block",!1),localVars:r.localVars,context:r.localVars&&new be(null,null,!1),indented:$e||0};return r.globalVars&&typeof r.globalVars=="object"&&(Et.globalVars=r.globalVars),Et},token:function($e,Et){if($e.sol()&&(Et.lexical.hasOwnProperty("align")||(Et.lexical.align=!1),Et.indented=$e.indentation(),ue($e,Et)),Et.tokenize!=Z&&$e.eatSpace())return null;var xn=Et.tokenize($e,Et);return Q=="comment"?xn:(Et.lastType=Q=="operator"&&(ee=="++"||ee=="--")?"incdec":Q,Be(Et,xn,Q,ee,$e))},indent:function($e,Et){if($e.tokenize==Z||$e.tokenize==oe)return t.Pass;if($e.tokenize!=ae)return 0;var xn=Et&&Et.charAt(0),jn=$e.lexical,rn;if(!/^\s*else\b/.test(Et))for(var si=$e.cc.length-1;si>=0;--si){var Jr=$e.cc[si];if(Jr==Rt)jn=jn.prev;else if(Jr!=Sn&&Jr!=pt)break}for(;(jn.type=="stat"||jn.type=="form")&&(xn=="}"||(rn=$e.cc[$e.cc.length-1])&&(rn==Kt||rn==on)&&!/^[,\.=+\-*:?[\(]/.test(Et));)jn=jn.prev;l&&jn.type==")"&&jn.prev.type=="stat"&&(jn=jn.prev);var wo=jn.type,As=xn==wo;return wo=="vardef"?jn.indented+($e.lastType=="operator"||$e.lastType==","?jn.info.length+1:0):wo=="form"&&xn=="{"?jn.indented:wo=="form"?jn.indented+a:wo=="stat"?jn.indented+(Ma($e,Et)?l||a:0):jn.info=="switch"&&!As&&r.doubleIndentSwitch!=!1?jn.indented+(/^(?:case|default)\b/.test(Et)?a:2*a):jn.align?jn.column+(As?0:1):jn.indented+(As?0:a)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:m?null:"/*",blockCommentEnd:m?null:"*/",blockCommentContinue:m?null:" * ",lineComment:m?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:m?"json":"javascript",jsonldMode:o,jsonMode:m,expressionAllowed:Vo,skipExpression:function($e){Be($e,"atom","atom","true",new t.StringStream("",2,null))}}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/manifest+json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})})}()),sk.exports}Fse();var Ak={exports:{}},uk;function zse(){return uk||(uk=1,function(n,e){(function(t){t(L2())})(function(t){var i="CodeMirror-lint-markers",r="CodeMirror-lint-line-";function a(W,ue,ge){var ye=document.createElement("div");ye.className="CodeMirror-lint-tooltip cm-s-"+W.options.theme,ye.appendChild(ge.cloneNode(!0)),W.state.lint.options.selfContain?W.getWrapperElement().appendChild(ye):document.body.appendChild(ye);function Me(Be){if(!ye.parentNode)return t.off(document,"mousemove",Me);var we=Math.max(0,Be.clientY-ye.offsetHeight-5),qe=Math.max(0,Math.min(Be.clientX+5,ye.ownerDocument.defaultView.innerWidth-ye.offsetWidth));ye.style.top=we+"px",ye.style.left=qe+"px"}return t.on(document,"mousemove",Me),Me(ue),ye.style.opacity!=null&&(ye.style.opacity=1),ye}function l(W){W.parentNode&&W.parentNode.removeChild(W)}function o(W){W.parentNode&&(W.style.opacity==null&&l(W),W.style.opacity=0,setTimeout(function(){l(W)},600))}function m(W,ue,ge,ye){var Me=a(W,ue,ge);function Be(){t.off(ye,"mouseout",Be),Me&&(o(Me),Me=null)}var we=setInterval(function(){if(Me)for(var qe=ye;;qe=qe.parentNode){if(qe&&qe.nodeType==11&&(qe=qe.host),qe==document.body)return;if(!qe){Be();break}}if(!Me)return clearInterval(we)},400);t.on(ye,"mouseout",Be)}function C(W,ue,ge){this.marked=[],ue instanceof Function&&(ue={getAnnotations:ue}),(!ue||ue===!0)&&(ue={}),this.options={},this.linterOptions=ue.options||{};for(var ye in S)this.options[ye]=S[ye];for(var ye in ue)S.hasOwnProperty(ye)?ue[ye]!=null&&(this.options[ye]=ue[ye]):ue.options||(this.linterOptions[ye]=ue[ye]);this.timeout=null,this.hasGutter=ge,this.onMouseOver=function(Me){oe(W,Me)},this.waitingFor=0}var S={highlightLines:!1,tooltips:!0,delay:500,lintOnChange:!0,getAnnotations:null,async:!1,selfContain:null,formatAnnotation:null,onUpdateLinting:null};function O(W){var ue=W.state.lint;ue.hasGutter&&W.clearGutter(i),ue.options.highlightLines&&U(W);for(var ge=0;ge<ue.marked.length;++ge)ue.marked[ge].clear();ue.marked.length=0}function U(W){W.eachLine(function(ue){var ge=ue.wrapClass&&/\bCodeMirror-lint-line-\w+\b/.exec(ue.wrapClass);ge&&W.removeLineClass(ue,"wrap",ge[0])})}function K(W,ue,ge,ye,Me){var Be=document.createElement("div"),we=Be;return Be.className="CodeMirror-lint-marker CodeMirror-lint-marker-"+ge,ye&&(we=Be.appendChild(document.createElement("div")),we.className="CodeMirror-lint-marker CodeMirror-lint-marker-multiple"),Me!=!1&&t.on(we,"mouseover",function(qe){m(W,qe,ue,we)}),Be}function z(W,ue){return W=="error"?W:ue}function j(W){for(var ue=[],ge=0;ge<W.length;++ge){var ye=W[ge],Me=ye.from.line;(ue[Me]||(ue[Me]=[])).push(ye)}return ue}function Q(W){var ue=W.severity;ue||(ue="error");var ge=document.createElement("div");return ge.className="CodeMirror-lint-message CodeMirror-lint-message-"+ue,typeof W.messageHTML<"u"?ge.innerHTML=W.messageHTML:ge.appendChild(document.createTextNode(W.message)),ge}function ee(W,ue){var ge=W.state.lint,ye=++ge.waitingFor;function Me(){ye=-1,W.off("change",Me)}W.on("change",Me),ue(W.getValue(),function(Be,we){W.off("change",Me),ge.waitingFor==ye&&(we&&Be instanceof t&&(Be=we),W.operation(function(){ae(W,Be)}))},ge.linterOptions,W)}function V(W){var ue=W.state.lint;if(ue){var ge=ue.options,ye=ge.getAnnotations||W.getHelper(t.Pos(0,0),"lint");if(ye)if(ge.async||ye.async)ee(W,ye);else{var Me=ye(W.getValue(),ue.linterOptions,W);if(!Me)return;Me.then?Me.then(function(Be){W.operation(function(){ae(W,Be)})}):W.operation(function(){ae(W,Me)})}}}function ae(W,ue){var ge=W.state.lint;if(ge){var ye=ge.options;O(W);for(var Me=j(ue),Be=0;Be<Me.length;++Be){var we=Me[Be];if(we){for(var qe=null,xe=ge.hasGutter&&document.createDocumentFragment(),ze=0;ze<we.length;++ze){var ot=we[ze],yt=ot.severity;yt||(yt="error"),qe=z(qe,yt),ye.formatAnnotation&&(ot=ye.formatAnnotation(ot)),ge.hasGutter&&xe.appendChild(Q(ot)),ot.to&&ge.marked.push(W.markText(ot.from,ot.to,{className:"CodeMirror-lint-mark CodeMirror-lint-mark-"+yt,__annotation:ot}))}ge.hasGutter&&W.setGutterMarker(Be,i,K(W,xe,qe,we.length>1,ye.tooltips)),ye.highlightLines&&W.addLineClass(Be,"wrap",r+qe)}}ye.onUpdateLinting&&ye.onUpdateLinting(ue,Me,W)}}function ne(W){var ue=W.state.lint;ue&&(clearTimeout(ue.timeout),ue.timeout=setTimeout(function(){V(W)},ue.options.delay))}function Z(W,ue,ge){for(var ye=ge.target||ge.srcElement,Me=document.createDocumentFragment(),Be=0;Be<ue.length;Be++){var we=ue[Be];Me.appendChild(Q(we))}m(W,ge,Me,ye)}function oe(W,ue){var ge=ue.target||ue.srcElement;if(/\bCodeMirror-lint-mark-/.test(ge.className)){for(var ye=ge.getBoundingClientRect(),Me=(ye.left+ye.right)/2,Be=(ye.top+ye.bottom)/2,we=W.findMarksAt(W.coordsChar({left:Me,top:Be},"client")),qe=[],xe=0;xe<we.length;++xe){var ze=we[xe].__annotation;ze&&qe.push(ze)}qe.length&&Z(W,qe,ue)}}t.defineOption("lint",!1,function(W,ue,ge){if(ge&&ge!=t.Init&&(O(W),W.state.lint.options.lintOnChange!==!1&&W.off("change",ne),t.off(W.getWrapperElement(),"mouseover",W.state.lint.onMouseOver),clearTimeout(W.state.lint.timeout),delete W.state.lint),ue){for(var ye=W.getOption("gutters"),Me=!1,Be=0;Be<ye.length;++Be)ye[Be]==i&&(Me=!0);var we=W.state.lint=new C(W,ue,Me);we.options.lintOnChange&&W.on("change",ne),we.options.tooltips!=!1&&we.options.tooltips!="gutter"&&t.on(W.getWrapperElement(),"mouseover",we.onMouseOver),V(W)}}),t.defineExtension("performLint",function(){V(this)})})}()),Ak.exports}zse();var ck={exports:{}},hk;function Nse(){return hk||(hk=1,function(n,e){(function(t){t(L2())})(function(t){var i=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),r=t.Pos,a={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function l(U){return U&&U.bracketRegex||/[(){}[\]]/}function o(U,K,z){var j=U.getLineHandle(K.line),Q=K.ch-1,ee=z&&z.afterCursor;ee==null&&(ee=/(^| )cm-fat-cursor($| )/.test(U.getWrapperElement().className));var V=l(z),ae=!ee&&Q>=0&&V.test(j.text.charAt(Q))&&a[j.text.charAt(Q)]||V.test(j.text.charAt(Q+1))&&a[j.text.charAt(++Q)];if(!ae)return null;var ne=ae.charAt(1)==">"?1:-1;if(z&&z.strict&&ne>0!=(Q==K.ch))return null;var Z=U.getTokenTypeAt(r(K.line,Q+1)),oe=m(U,r(K.line,Q+(ne>0?1:0)),ne,Z,z);return oe==null?null:{from:r(K.line,Q),to:oe&&oe.pos,match:oe&&oe.ch==ae.charAt(0),forward:ne>0}}function m(U,K,z,j,Q){for(var ee=Q&&Q.maxScanLineLength||1e4,V=Q&&Q.maxScanLines||1e3,ae=[],ne=l(Q),Z=z>0?Math.min(K.line+V,U.lastLine()+1):Math.max(U.firstLine()-1,K.line-V),oe=K.line;oe!=Z;oe+=z){var W=U.getLine(oe);if(W){var ue=z>0?0:W.length-1,ge=z>0?W.length:-1;if(!(W.length>ee))for(oe==K.line&&(ue=K.ch-(z<0?1:0));ue!=ge;ue+=z){var ye=W.charAt(ue);if(ne.test(ye)&&(j===void 0||(U.getTokenTypeAt(r(oe,ue+1))||"")==(j||""))){var Me=a[ye];if(Me&&Me.charAt(1)==">"==z>0)ae.push(ye);else if(ae.length)ae.pop();else return{pos:r(oe,ue),ch:ye}}}}}return oe-z==(z>0?U.lastLine():U.firstLine())?!1:null}function C(U,K,z){for(var j=U.state.matchBrackets.maxHighlightLineLength||1e3,Q=z&&z.highlightNonMatching,ee=[],V=U.listSelections(),ae=0;ae<V.length;ae++){var ne=V[ae].empty()&&o(U,V[ae].head,z);if(ne&&(ne.match||Q!==!1)&&U.getLine(ne.from.line).length<=j){var Z=ne.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";ee.push(U.markText(ne.from,r(ne.from.line,ne.from.ch+1),{className:Z})),ne.to&&U.getLine(ne.to.line).length<=j&&ee.push(U.markText(ne.to,r(ne.to.line,ne.to.ch+1),{className:Z}))}}if(ee.length){i&&U.state.focused&&U.focus();var oe=function(){U.operation(function(){for(var W=0;W<ee.length;W++)ee[W].clear()})};if(K)setTimeout(oe,800);else return oe}}function S(U){U.operation(function(){U.state.matchBrackets.currentlyHighlighted&&(U.state.matchBrackets.currentlyHighlighted(),U.state.matchBrackets.currentlyHighlighted=null),U.state.matchBrackets.currentlyHighlighted=C(U,!1,U.state.matchBrackets)})}function O(U){U.state.matchBrackets&&U.state.matchBrackets.currentlyHighlighted&&(U.state.matchBrackets.currentlyHighlighted(),U.state.matchBrackets.currentlyHighlighted=null)}t.defineOption("matchBrackets",!1,function(U,K,z){z&&z!=t.Init&&(U.off("cursorActivity",S),U.off("focus",S),U.off("blur",O),O(U)),K&&(U.state.matchBrackets=typeof K=="object"?K:{},U.on("cursorActivity",S),U.on("focus",S),U.on("blur",O))}),t.defineExtension("matchBrackets",function(){C(this,!0)}),t.defineExtension("findMatchingBracket",function(U,K,z){return(z||typeof K=="boolean")&&(z?(z.strict=K,K=z):K=K?{strict:!0}:null),o(this,U,K)}),t.defineExtension("scanForBracket",function(U,K,z,j){return m(this,U,K,z,j)})})}()),ck.exports}Nse();const Gse=/("(?:[^\\"]|\\.)*")|[:,]/g;function dG(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),i=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:r}=e;return function a(l,o,m){l&&typeof l.toJSON=="function"&&(l=l.toJSON());const C=JSON.stringify(l,r);if(C===void 0)return C;const S=i-o.length-m;if(C.length<=S){const O=C.replace(Gse,(U,K)=>K||`${U} `);if(O.length<=S)return O}if(r!=null&&(l=JSON.parse(C),r=void 0),typeof l=="object"&&l!==null){const O=o+t,U=[];let K=0,z,j;if(Array.isArray(l)){z="[",j="]";const{length:Q}=l;for(;K<Q;K++)U.push(a(l[K],O,K===Q-1?0:1)||"null")}else{z="{",j="}";const Q=Object.keys(l),{length:ee}=Q;for(;K<ee;K++){const V=Q[K],ae=`${JSON.stringify(V)}: `,ne=a(l[V],O,ae.length+(K===ee-1?0:1));ne!==void 0&&U.push(ae+ne)}}if(U.length>0)return[z,t+U.join(`,
${O}`),j].join(`
${o}`)}return C}(n,"",0)}var FC={exports:{}},jse=FC.exports,dk;function Wse(){return dk||(dk=1,function(n,e){(function(t,i){i(e)})(jse,function(t){const i={isWhiteSpace:function(be){return be===" "||be===" "||be==="\uFEFF"||be>="	"&&be<="\r"||be===" "||be>=" "&&be<=" "||be==="\u2028"||be==="\u2029"||be===" "||be===" "||be==="　"},isWhiteSpaceJSON:function(be){return be===" "||be==="	"||be===`
`||be==="\r"},isLineTerminator:function(be){return be===`
`||be==="\r"||be==="\u2028"||be==="\u2029"},isLineTerminatorJSON:function(be){return be===`
`||be==="\r"},isIdentifierStart:function(be){return be==="$"||be==="_"||be>="A"&&be<="Z"||be>="a"&&be<="z"||be>=""&&i.NonAsciiIdentifierStart.test(be)},isIdentifierPart:function(be){return be==="$"||be==="_"||be>="A"&&be<="Z"||be>="a"&&be<="z"||be>="0"&&be<="9"||be>=""&&i.NonAsciiIdentifierPart.test(be)},NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0\u08A2-\u08AC\u08E4-\u08FE\u0900-\u0963\u0966-\u096F\u0971-\u0977\u0979-\u097F\u0981-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C82\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191C\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1D00-\u1DE6\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA697\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7B\uAA80-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE26\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/};function r(nt){return nt>="0"&&nt<="9"||nt>="A"&&nt<="F"||nt>="a"&&nt<="f"}function a(nt){return nt>="0"&&nt<="7"}function l(nt){return nt>="0"&&nt<="9"}function o(nt){return nt.charCodeAt(0)===65279}const m={"'":"'",'"':'"',"\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	",v:"\v","/":"/"},C=Object.hasOwn,S={};function O(nt,be){(typeof nt!="string"||!(nt instanceof String))&&(nt=String(nt));const Ne=be.mode==="json5",tt=be.ignoreBOM,lt=be.ignoreComments||be.mode==="cjson"||Ne,It=be.ignoreTrailingCommas||Ne,pt=be.ignoreProtoKey,St=be.ignorePrototypeKeys,Rt=be.allowSingleQuotedStrings||Ne,Le=be.allowDuplicateObjectKeys,Pe=be.reviver,Re=be.tokenize,He=be.rawTokens,bt=be.tokenLocations,vt=be.tokenPaths,Ot=Ne?i.isLineTerminator:i.isLineTerminatorJSON,qt=Ne?i.isWhiteSpace:i.isWhiteSpaceJSON,Kt=nt.length;let on=0,Jn=0,Wt=0;const $n=[];let On,Bn,In;if(Re){let ht=null,kt,it;On=function(){if(ht!==null)throw Error("internal error, token overlap");kt=on+1,it=Wt-Jn+1,ht=Wt},Bn=function(en,Dn){if(ht!==Wt){const Mn={type:en};He&&(Mn.raw=nt.substr(ht,Wt-ht)),Dn!==void 0&&(Mn.value=Dn),bt&&(Mn.location={start:{column:it,line:kt,offset:ht}}),vt&&(Mn.path=In.slice()),$n.push(Mn)}return ht=null,Dn},vt&&(In=[])}function Bi(){let ht;return Wt<Kt?ht=`Unexpected token ${JSON.stringify(nt[Wt])}`:ht="Unexpected end of input",ht}function ei(ht){const kt=Wt-Jn+1;++on;const it=Me(ht,nt,Wt,on,kt),en=SyntaxError(it.message);return en.reason=ht,en.excerpt=it.excerpt,en.pointer=it.pointer,en.location={start:{column:kt,line:on,offset:Wt}},en}function Kn(ht){throw ht||(ht=Bi()),ei(ht)}function Ge(ht){ht==="\r"&&nt[Wt]===`
`&&++Wt,Jn=Wt,++on}function de(){if(Wt<Kt){On?.();const ht=nt[Wt++];if(ht==='"'||ht==="'"&&Rt){const kt=g(ht);return Bn?.("literal",kt),kt}if(ht==="{")return Bn?.("symbol","{"),dt();if(ht==="[")return Bn?.("symbol","["),Ye();if(ht==="-"||ht==="."||l(ht)||Ne&&(ht==="+"||ht==="I"||ht==="N")){const kt=De();return Bn?.("literal",kt),kt}if(ht==="n")return We("null"),Bn?.("literal",null),null;if(ht==="t")return We("true"),Bn?.("literal",!0),!0;if(ht==="f")return We("false"),Bn?.("literal",!1),!1;--Wt,Bn?.();return}}function re(){let ht;if(Wt<Kt){On?.();const kt=nt[Wt++];if(kt==='"'||kt==="'"&&Rt){const it=g(kt);return Bn?.("literal",it),it}if(kt==="{")return Bn?.("symbol","{"),dt();if(kt==="[")return Bn?.("symbol","["),Ye();if(kt==="."||l(kt)){const it=De();return Bn?.("literal",it),it}if(Ne&&i.isIdentifierStart(kt)||kt==="\\"&&nt[Wt]==="u"){const it=Wt-1;if(ht=Ze(),ht===void 0){Wt=it,Bn?.();return}return Bn?.("literal",ht),ht}--Wt,Bn?.();return}}function le(){o(nt)&&(On?.(),++Wt,Bn?.("bom"))}function me(){let ht;function kt(){ht||(ht=!0,--Wt,On(),++Wt)}function it(){ht&&(ht=!1,Bn("whitespace"))}for(;Wt<Kt;){const en=nt[Wt++];if(Ot(en))On&&kt(),Ge(en);else if(qt(en))On&&kt();else if(en==="/"&&lt&&(nt[Wt]==="/"||nt[Wt]==="*"))On&&(--Wt,it(),On(),++Wt),Te(nt[Wt++]==="*"),Bn?.("comment");else{--Wt;break}}Bn&&it()}function Te(ht){for(;Wt<Kt;){const kt=nt[Wt++];if(Ot(kt)){if(!ht){--Wt;return}Ge(kt)}else if(kt==="*"&&ht&&nt[Wt]==="/"){++Wt;return}}ht&&Kn("Unclosed multiline comment")}function We(ht){const kt=Wt;for(let it=1,en=ht.length;it<en;++it)(Wt>=Kt||ht[it]!==nt[Wt])&&(Wt=kt-1,Kn()),++Wt}function dt(){let ht={},kt=!1;for(;Wt<Kt;){me();const it=re();Le===!1&&C(ht,it)&&Kn(`Duplicate key: "${it}"`),me(),On?.();let en=nt[Wt++];if(Bn?.("symbol",en),en==="}"&&it===void 0)return!It&&kt&&(--Wt,Kn("Trailing comma in object")),ht;if(en===":"&&it!==void 0){me(),In?.push(it);let Dn=de();if(In?.pop(),Dn===void 0&&Kn(`No value found for key "${it}"`),typeof it!="string"&&(!Ne||typeof it!="number")&&Kn(`Wrong key type: "${it}"`),St&&(it in S||S[it]!=null)||pt&&it==="__proto__"||(Pe&&(Dn=Pe(it,Dn)),Dn!==void 0&&(kt=!0,it==="__proto__"?ht=Object.assign(JSON.parse(`{"__proto__":${JSON.stringify(Dn)}}`),ht):ht[it]=Dn)),me(),On?.(),en=nt[Wt++],Bn?.("symbol",en),en!==","){if(en==="}")return ht;Kn()}}else--Wt,Kn()}Kn()}function Ye(){const ht=[];for(;Wt<Kt;){me(),In?.push(ht.length);let kt=de();In?.pop(),me(),On?.();const it=nt[Wt++];if(Bn?.("symbol",it),kt!==void 0&&(Pe&&(kt=Pe(String(ht.length),kt)),kt===void 0?(++ht.length,kt=!0):ht.push(kt)),it===",")kt===void 0&&Kn("Elisions are not supported");else{if(it==="]")return!It&&kt===void 0&&ht.length&&(--Wt,Kn("Trailing comma in array")),ht;--Wt,Kn()}}}function De(){--Wt;let ht=Wt,kt=nt[Wt++];const it=function(en){const Dn=nt.substr(ht,Wt-ht);let Mn;if(en?Mn=Number.parseInt(Dn.replace(/^0o?/,""),8):Mn=Number(Dn),Number.isNaN(Mn))--Wt,Kn(`Bad numeric literal - "${nt.substr(ht,Wt-ht+1)}"`);else if(!Ne&&!Dn.match(/^-?(0|[1-9][0-9]*)(\.[0-9]+)?(e[+-]?[0-9]+)?$/i))--Wt,Kn(`Non-json numeric literal - "${nt.substr(ht,Wt-ht+1)}"`);else return Mn};if((kt==="-"||kt==="+"&&Ne)&&(kt=nt[Wt++]),kt==="N"&&Ne)return We("NaN"),Number.NaN;if(kt==="I"&&Ne)return We("Infinity"),it();if(kt>="1"&&kt<="9"){for(;Wt<Kt&&l(nt[Wt]);)++Wt;kt=nt[Wt++]}if(kt==="0"){kt=nt[Wt++];const en=kt==="o"||kt==="O"||a(kt),Dn=kt==="x"||kt==="X";if(Ne&&(en||Dn)){for(;Wt<Kt&&(Dn?r:a)(nt[Wt]);)++Wt;let Mn=1;return nt[ht]==="-"?(Mn=-1,++ht):nt[ht]==="+"&&++ht,Mn*it(en)}}if(kt==="."){for(;Wt<Kt&&l(nt[Wt]);)++Wt;kt=nt[Wt++]}if(kt==="e"||kt==="E"){for(kt=nt[Wt++],(kt==="-"||kt==="+")&&++Wt;Wt<Kt&&l(nt[Wt]);)++Wt;kt=nt[Wt++]}return--Wt,it()}function Ze(){--Wt;let ht="";for(;Wt<Kt;){let kt=nt[Wt++];if(kt==="\\"&&nt[Wt]==="u"&&r(nt[Wt+1])&&r(nt[Wt+2])&&r(nt[Wt+3])&&r(nt[Wt+4])&&(kt=String.fromCharCode(Number.parseInt(nt.substr(Wt+1,4),16)),Wt+=5),ht.length)if(i.isIdentifierPart(kt))ht+=kt;else return--Wt,ht;else if(i.isIdentifierStart(kt))ht+=kt;else return}Kn()}function g(ht){let kt="";for(;Wt<Kt;){let it=nt[Wt++];if(it===ht)return kt;if(it==="\\")if(Wt>=Kt&&Kn(),it=nt[Wt++],m[it]&&(Ne||it!=="v"&&(it!=="'"||Rt)))kt+=m[it];else if(Ne&&Ot(it))Ge(it);else if(it==="u"||it==="x"&&Ne){const en=it==="u"?4:2;for(let Dn=0;Dn<en;++Dn)Wt>=Kt&&Kn(),r(nt[Wt])||Kn("Bad escape sequence"),Wt++;kt+=String.fromCharCode(Number.parseInt(nt.substr(Wt-en,en),16))}else if(Ne&&a(it)){let en;it<"4"&&a(nt[Wt])&&a(nt[Wt+1])?en=3:a(nt[Wt])?en=2:en=1,Wt+=en-1,kt+=String.fromCharCode(Number.parseInt(nt.substr(Wt-en,en),8))}else Ne?kt+=it:(--Wt,Kn());else Ot(it)?Kn():(!Ne&&it.charCodeAt(0)<32&&(--Wt,Kn("Unexpected control character")),kt+=it)}Kn()}tt&&le(),me();let gt=de();if(gt!==void 0||Wt<Kt){if(me(),Wt>=Kt)return Pe&&(gt=Pe("",gt)),Re?$n:gt;Kn()}else Kn(Wt?"No data, only a whitespace":"No data, empty input")}function U(nt,be){return typeof be=="function"?be={reviver:be}:be||(be={}),O(nt,be)}function K(nt,be){be||(be={});const Ne=be.tokenize;be.tokenize=!0;const tt=O(nt,be);return be.tokenize=Ne,tt}function z(nt){return nt.toString().replace(/~/g,"~0").replace(/\//g,"~1")}function j(nt){return nt.length===0?"":`/${nt.map(z).join("/")}`}function Q(nt){return nt.replace(/~1/g,"/").replace(/~0/g,"~")}function ee(nt){if(nt==="")return[];if(nt[0]!=="/")throw new Error('Missing initial "/" in the reference');return nt.substr(1).split("/").map(Q)}function V(nt,be){const Ne=nt.substr(0,be).split(/\r?\n/),tt=Ne.length,lt=Ne[tt-1].length+1;return{line:tt,column:lt}}function ae(nt,be,Ne){if(be>1){const tt=/\r?\n/g;let lt;for(;lt=tt.exec(nt);)if(--be===1)return lt.index+Ne}return Ne-1}function ne(nt,be){const Ne=Math.max(0,be-20),tt=nt.substr(Ne,be-Ne);return(be>20?"...":"")+tt.replace(/\r?\n/g,"")}function Z(nt,be){let Ne=Math.max(0,be-20);Ne+=be-Ne;const tt=nt.length-Ne;return nt.substr(Ne,Math.min(20,tt)).replace(/\r?\n/g,"")+(tt>20?"...":"")}function oe(nt,be){const Ne=ne(nt,be),tt=Z(nt,be),lt=`${new Array(Ne.length+1).join("-")}^`;return{excerpt:Ne+tt,pointer:lt}}function W(nt){let be=nt.message.replace("JSON.parse: ","").replace("JSON Parse error: ","");const Ne=be.charAt(0);return Ne>="a"&&(be=Ne.toUpperCase()+be.substr(1)),be}function ue(nt,be){const Ne=/ in JSON at position (\d+)$/.exec(be);if(Ne){const tt=+Ne[1],lt=V(nt,tt);return{offset:tt,line:lt.line,column:lt.column,reason:be.substr(0,Ne.index)}}}function ge(nt,be){const Ne=/ end of JSON input$/.exec(be);if(Ne){const tt=nt.length,lt=V(nt,tt);return{offset:tt,line:lt.line,column:lt.column,reason:be.substr(0,Ne.index+4)}}}function ye(nt,be){const Ne=/ at line (\d+) column (\d+) of the JSON data$/.exec(be);if(Ne){const tt=+Ne[1],lt=+Ne[2];return{offset:ae(nt,tt,lt),line:tt,column:lt,reason:be.substr(0,Ne.index)}}}function Me(nt,be,Ne,tt,lt){const It=oe(be,Ne),pt=It.excerpt;let St,Rt;return typeof tt=="number"?(Rt=It.pointer,St=`Parse error on line ${tt}, column ${lt}:
${pt}
${Rt}
${nt}`):St=`Parse error in JSON input:
${pt}
${nt}`,{message:St,excerpt:pt,pointer:Rt}}function Be(nt,be){let Ne=W(be);const tt=ue(nt,Ne)||ge(nt,Ne)||ye(nt,Ne);let lt,It,pt;tt?(lt=tt.offset,It=tt.line,pt=tt.column,Ne=tt.reason):lt=0,be.reason=Ne;const St=Me(Ne,nt,lt,It,pt);return be.message=St.message,be.excerpt=St.excerpt,St.pointer&&(be.pointer=St.pointer,be.location={start:{column:pt,line:It,offset:lt}}),be}function we(nt,be){try{return JSON.parse(nt,be)}catch(Ne){const tt=Be(nt,Ne);if(Ne.location)throw tt;return U(nt,be)}}const qe=typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor),xe=typeof process<"u"&&process.version.startsWith("v4.");function ze(nt){return nt.ignoreBOM||nt.ignoreComments||nt.ignoreTrailingCommas||nt.allowSingleQuotedStrings||nt.allowDuplicateObjectKeys===!1||nt.ignoreProtoKey||nt.ignorePrototypeKeys||nt.mode==="cjson"||nt.mode==="json5"||qe||xe}function ot(nt){if(typeof nt=="function")return nt;if(nt)return nt.reviver}function yt(nt,be){return be||(be={}),ze(be)?U(nt,be):we(nt,ot(be))}t.parse=yt,t.tokenize=K,t.pathToPointer=j,t.pointerToPath=ee,t.parseNative=we,t.parseCustom=U,t.getErrorTexts=Me,Object.defineProperty(t,"__esModule",{value:!0})})}(FC,FC.exports)),FC.exports}var Qse=Wse(),Tx={exports:{}},Yse=Tx.exports,fk;function qse(){return fk||(fk=1,function(n,e){(function(t,i){n.exports=i()})(Yse,function(){var t=typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function i(Pe,Re){return Re={exports:{}},Pe(Re,Re.exports),Re.exports}var r=i(function(Pe){function Re(){var He=0,bt=1,vt=2,Ot=3,qt=4,Kt=5,on=6,Jn=7,Wt=8,$n=9,On=10,Bn=11,In=12,Bi=13,ei=14,Kn=15,Ge=16,de=17,re=0,le=1,me=2,Te=3,We=4;function dt(g,gt){return 55296<=g.charCodeAt(gt)&&g.charCodeAt(gt)<=56319&&56320<=g.charCodeAt(gt+1)&&g.charCodeAt(gt+1)<=57343}function Ye(g,gt){gt===void 0&&(gt=0);var ht=g.charCodeAt(gt);if(55296<=ht&&ht<=56319&&gt<g.length-1){var kt=ht,it=g.charCodeAt(gt+1);return 56320<=it&&it<=57343?(kt-55296)*1024+(it-56320)+65536:kt}if(56320<=ht&&ht<=57343&&gt>=1){var kt=g.charCodeAt(gt-1),it=ht;return 55296<=kt&&kt<=56319?(kt-55296)*1024+(it-56320)+65536:it}return ht}function De(g,gt,ht){var kt=[g].concat(gt).concat([ht]),it=kt[kt.length-2],en=ht,Dn=kt.lastIndexOf(ei);if(Dn>1&&kt.slice(1,Dn).every(function(Wn){return Wn==Ot})&&[Ot,Bi,de].indexOf(g)==-1)return me;var Mn=kt.lastIndexOf(qt);if(Mn>0&&kt.slice(1,Mn).every(function(Wn){return Wn==qt})&&[In,qt].indexOf(it)==-1)return kt.filter(function(Wn){return Wn==qt}).length%2==1?Te:We;if(it==He&&en==bt)return re;if(it==vt||it==He||it==bt)return en==ei&&gt.every(function(Wn){return Wn==Ot})?me:le;if(en==vt||en==He||en==bt)return le;if(it==on&&(en==on||en==Jn||en==$n||en==On))return re;if((it==$n||it==Jn)&&(en==Jn||en==Wt))return re;if((it==On||it==Wt)&&en==Wt)return re;if(en==Ot||en==Kn)return re;if(en==Kt)return re;if(it==In)return re;var ii=kt.indexOf(Ot)!=-1?kt.lastIndexOf(Ot)-1:kt.length-2;return[Bi,de].indexOf(kt[ii])!=-1&&kt.slice(ii+1,-1).every(function(Wn){return Wn==Ot})&&en==ei||it==Kn&&[Ge,de].indexOf(en)!=-1?re:gt.indexOf(qt)!=-1?me:it==qt&&en==qt?re:le}this.nextBreak=function(g,gt){if(gt===void 0&&(gt=0),gt<0)return 0;if(gt>=g.length-1)return g.length;for(var ht=Ze(Ye(g,gt)),kt=[],it=gt+1;it<g.length;it++)if(!dt(g,it-1)){var en=Ze(Ye(g,it));if(De(ht,kt,en))return it;kt.push(en)}return g.length},this.splitGraphemes=function(g){for(var gt=[],ht=0,kt;(kt=this.nextBreak(g,ht))<g.length;)gt.push(g.slice(ht,kt)),ht=kt;return ht<g.length&&gt.push(g.slice(ht)),gt},this.iterateGraphemes=function(g){var gt=0,ht={next:(function(){var kt,it;return(it=this.nextBreak(g,gt))<g.length?(kt=g.slice(gt,it),gt=it,{value:kt,done:!1}):gt<g.length?(kt=g.slice(gt),gt=g.length,{value:kt,done:!1}):{value:void 0,done:!0}}).bind(this)};return typeof Symbol<"u"&&Symbol.iterator&&(ht[Symbol.iterator]=function(){return ht}),ht},this.countGraphemes=function(g){for(var gt=0,ht=0,kt;(kt=this.nextBreak(g,ht))<g.length;)ht=kt,gt++;return ht<g.length&&gt++,gt};function Ze(g){return 1536<=g&&g<=1541||g==1757||g==1807||g==2274||g==3406||g==69821||70082<=g&&g<=70083||g==72250||72326<=g&&g<=72329||g==73030?In:g==13?He:g==10?bt:0<=g&&g<=9||11<=g&&g<=12||14<=g&&g<=31||127<=g&&g<=159||g==173||g==1564||g==6158||g==8203||8206<=g&&g<=8207||g==8232||g==8233||8234<=g&&g<=8238||8288<=g&&g<=8292||g==8293||8294<=g&&g<=8303||55296<=g&&g<=57343||g==65279||65520<=g&&g<=65528||65529<=g&&g<=65531||113824<=g&&g<=113827||119155<=g&&g<=119162||g==917504||g==917505||917506<=g&&g<=917535||917632<=g&&g<=917759||918e3<=g&&g<=921599?vt:768<=g&&g<=879||1155<=g&&g<=1159||1160<=g&&g<=1161||1425<=g&&g<=1469||g==1471||1473<=g&&g<=1474||1476<=g&&g<=1477||g==1479||1552<=g&&g<=1562||1611<=g&&g<=1631||g==1648||1750<=g&&g<=1756||1759<=g&&g<=1764||1767<=g&&g<=1768||1770<=g&&g<=1773||g==1809||1840<=g&&g<=1866||1958<=g&&g<=1968||2027<=g&&g<=2035||2070<=g&&g<=2073||2075<=g&&g<=2083||2085<=g&&g<=2087||2089<=g&&g<=2093||2137<=g&&g<=2139||2260<=g&&g<=2273||2275<=g&&g<=2306||g==2362||g==2364||2369<=g&&g<=2376||g==2381||2385<=g&&g<=2391||2402<=g&&g<=2403||g==2433||g==2492||g==2494||2497<=g&&g<=2500||g==2509||g==2519||2530<=g&&g<=2531||2561<=g&&g<=2562||g==2620||2625<=g&&g<=2626||2631<=g&&g<=2632||2635<=g&&g<=2637||g==2641||2672<=g&&g<=2673||g==2677||2689<=g&&g<=2690||g==2748||2753<=g&&g<=2757||2759<=g&&g<=2760||g==2765||2786<=g&&g<=2787||2810<=g&&g<=2815||g==2817||g==2876||g==2878||g==2879||2881<=g&&g<=2884||g==2893||g==2902||g==2903||2914<=g&&g<=2915||g==2946||g==3006||g==3008||g==3021||g==3031||g==3072||3134<=g&&g<=3136||3142<=g&&g<=3144||3146<=g&&g<=3149||3157<=g&&g<=3158||3170<=g&&g<=3171||g==3201||g==3260||g==3263||g==3266||g==3270||3276<=g&&g<=3277||3285<=g&&g<=3286||3298<=g&&g<=3299||3328<=g&&g<=3329||3387<=g&&g<=3388||g==3390||3393<=g&&g<=3396||g==3405||g==3415||3426<=g&&g<=3427||g==3530||g==3535||3538<=g&&g<=3540||g==3542||g==3551||g==3633||3636<=g&&g<=3642||3655<=g&&g<=3662||g==3761||3764<=g&&g<=3769||3771<=g&&g<=3772||3784<=g&&g<=3789||3864<=g&&g<=3865||g==3893||g==3895||g==3897||3953<=g&&g<=3966||3968<=g&&g<=3972||3974<=g&&g<=3975||3981<=g&&g<=3991||3993<=g&&g<=4028||g==4038||4141<=g&&g<=4144||4146<=g&&g<=4151||4153<=g&&g<=4154||4157<=g&&g<=4158||4184<=g&&g<=4185||4190<=g&&g<=4192||4209<=g&&g<=4212||g==4226||4229<=g&&g<=4230||g==4237||g==4253||4957<=g&&g<=4959||5906<=g&&g<=5908||5938<=g&&g<=5940||5970<=g&&g<=5971||6002<=g&&g<=6003||6068<=g&&g<=6069||6071<=g&&g<=6077||g==6086||6089<=g&&g<=6099||g==6109||6155<=g&&g<=6157||6277<=g&&g<=6278||g==6313||6432<=g&&g<=6434||6439<=g&&g<=6440||g==6450||6457<=g&&g<=6459||6679<=g&&g<=6680||g==6683||g==6742||6744<=g&&g<=6750||g==6752||g==6754||6757<=g&&g<=6764||6771<=g&&g<=6780||g==6783||6832<=g&&g<=6845||g==6846||6912<=g&&g<=6915||g==6964||6966<=g&&g<=6970||g==6972||g==6978||7019<=g&&g<=7027||7040<=g&&g<=7041||7074<=g&&g<=7077||7080<=g&&g<=7081||7083<=g&&g<=7085||g==7142||7144<=g&&g<=7145||g==7149||7151<=g&&g<=7153||7212<=g&&g<=7219||7222<=g&&g<=7223||7376<=g&&g<=7378||7380<=g&&g<=7392||7394<=g&&g<=7400||g==7405||g==7412||7416<=g&&g<=7417||7616<=g&&g<=7673||7675<=g&&g<=7679||g==8204||8400<=g&&g<=8412||8413<=g&&g<=8416||g==8417||8418<=g&&g<=8420||8421<=g&&g<=8432||11503<=g&&g<=11505||g==11647||11744<=g&&g<=11775||12330<=g&&g<=12333||12334<=g&&g<=12335||12441<=g&&g<=12442||g==42607||42608<=g&&g<=42610||42612<=g&&g<=42621||42654<=g&&g<=42655||42736<=g&&g<=42737||g==43010||g==43014||g==43019||43045<=g&&g<=43046||43204<=g&&g<=43205||43232<=g&&g<=43249||43302<=g&&g<=43309||43335<=g&&g<=43345||43392<=g&&g<=43394||g==43443||43446<=g&&g<=43449||g==43452||g==43493||43561<=g&&g<=43566||43569<=g&&g<=43570||43573<=g&&g<=43574||g==43587||g==43596||g==43644||g==43696||43698<=g&&g<=43700||43703<=g&&g<=43704||43710<=g&&g<=43711||g==43713||43756<=g&&g<=43757||g==43766||g==44005||g==44008||g==44013||g==64286||65024<=g&&g<=65039||65056<=g&&g<=65071||65438<=g&&g<=65439||g==66045||g==66272||66422<=g&&g<=66426||68097<=g&&g<=68099||68101<=g&&g<=68102||68108<=g&&g<=68111||68152<=g&&g<=68154||g==68159||68325<=g&&g<=68326||g==69633||69688<=g&&g<=69702||69759<=g&&g<=69761||69811<=g&&g<=69814||69817<=g&&g<=69818||69888<=g&&g<=69890||69927<=g&&g<=69931||69933<=g&&g<=69940||g==70003||70016<=g&&g<=70017||70070<=g&&g<=70078||70090<=g&&g<=70092||70191<=g&&g<=70193||g==70196||70198<=g&&g<=70199||g==70206||g==70367||70371<=g&&g<=70378||70400<=g&&g<=70401||g==70460||g==70462||g==70464||g==70487||70502<=g&&g<=70508||70512<=g&&g<=70516||70712<=g&&g<=70719||70722<=g&&g<=70724||g==70726||g==70832||70835<=g&&g<=70840||g==70842||g==70845||70847<=g&&g<=70848||70850<=g&&g<=70851||g==71087||71090<=g&&g<=71093||71100<=g&&g<=71101||71103<=g&&g<=71104||71132<=g&&g<=71133||71219<=g&&g<=71226||g==71229||71231<=g&&g<=71232||g==71339||g==71341||71344<=g&&g<=71349||g==71351||71453<=g&&g<=71455||71458<=g&&g<=71461||71463<=g&&g<=71467||72193<=g&&g<=72198||72201<=g&&g<=72202||72243<=g&&g<=72248||72251<=g&&g<=72254||g==72263||72273<=g&&g<=72278||72281<=g&&g<=72283||72330<=g&&g<=72342||72344<=g&&g<=72345||72752<=g&&g<=72758||72760<=g&&g<=72765||g==72767||72850<=g&&g<=72871||72874<=g&&g<=72880||72882<=g&&g<=72883||72885<=g&&g<=72886||73009<=g&&g<=73014||g==73018||73020<=g&&g<=73021||73023<=g&&g<=73029||g==73031||92912<=g&&g<=92916||92976<=g&&g<=92982||94095<=g&&g<=94098||113821<=g&&g<=113822||g==119141||119143<=g&&g<=119145||119150<=g&&g<=119154||119163<=g&&g<=119170||119173<=g&&g<=119179||119210<=g&&g<=119213||119362<=g&&g<=119364||121344<=g&&g<=121398||121403<=g&&g<=121452||g==121461||g==121476||121499<=g&&g<=121503||121505<=g&&g<=121519||122880<=g&&g<=122886||122888<=g&&g<=122904||122907<=g&&g<=122913||122915<=g&&g<=122916||122918<=g&&g<=122922||125136<=g&&g<=125142||125252<=g&&g<=125258||917536<=g&&g<=917631||917760<=g&&g<=917999?Ot:127462<=g&&g<=127487?qt:g==2307||g==2363||2366<=g&&g<=2368||2377<=g&&g<=2380||2382<=g&&g<=2383||2434<=g&&g<=2435||2495<=g&&g<=2496||2503<=g&&g<=2504||2507<=g&&g<=2508||g==2563||2622<=g&&g<=2624||g==2691||2750<=g&&g<=2752||g==2761||2763<=g&&g<=2764||2818<=g&&g<=2819||g==2880||2887<=g&&g<=2888||2891<=g&&g<=2892||g==3007||3009<=g&&g<=3010||3014<=g&&g<=3016||3018<=g&&g<=3020||3073<=g&&g<=3075||3137<=g&&g<=3140||3202<=g&&g<=3203||g==3262||3264<=g&&g<=3265||3267<=g&&g<=3268||3271<=g&&g<=3272||3274<=g&&g<=3275||3330<=g&&g<=3331||3391<=g&&g<=3392||3398<=g&&g<=3400||3402<=g&&g<=3404||3458<=g&&g<=3459||3536<=g&&g<=3537||3544<=g&&g<=3550||3570<=g&&g<=3571||g==3635||g==3763||3902<=g&&g<=3903||g==3967||g==4145||4155<=g&&g<=4156||4182<=g&&g<=4183||g==4228||g==6070||6078<=g&&g<=6085||6087<=g&&g<=6088||6435<=g&&g<=6438||6441<=g&&g<=6443||6448<=g&&g<=6449||6451<=g&&g<=6456||6681<=g&&g<=6682||g==6741||g==6743||6765<=g&&g<=6770||g==6916||g==6965||g==6971||6973<=g&&g<=6977||6979<=g&&g<=6980||g==7042||g==7073||7078<=g&&g<=7079||g==7082||g==7143||7146<=g&&g<=7148||g==7150||7154<=g&&g<=7155||7204<=g&&g<=7211||7220<=g&&g<=7221||g==7393||7410<=g&&g<=7411||g==7415||43043<=g&&g<=43044||g==43047||43136<=g&&g<=43137||43188<=g&&g<=43203||43346<=g&&g<=43347||g==43395||43444<=g&&g<=43445||43450<=g&&g<=43451||43453<=g&&g<=43456||43567<=g&&g<=43568||43571<=g&&g<=43572||g==43597||g==43755||43758<=g&&g<=43759||g==43765||44003<=g&&g<=44004||44006<=g&&g<=44007||44009<=g&&g<=44010||g==44012||g==69632||g==69634||g==69762||69808<=g&&g<=69810||69815<=g&&g<=69816||g==69932||g==70018||70067<=g&&g<=70069||70079<=g&&g<=70080||70188<=g&&g<=70190||70194<=g&&g<=70195||g==70197||70368<=g&&g<=70370||70402<=g&&g<=70403||g==70463||70465<=g&&g<=70468||70471<=g&&g<=70472||70475<=g&&g<=70477||70498<=g&&g<=70499||70709<=g&&g<=70711||70720<=g&&g<=70721||g==70725||70833<=g&&g<=70834||g==70841||70843<=g&&g<=70844||g==70846||g==70849||71088<=g&&g<=71089||71096<=g&&g<=71099||g==71102||71216<=g&&g<=71218||71227<=g&&g<=71228||g==71230||g==71340||71342<=g&&g<=71343||g==71350||71456<=g&&g<=71457||g==71462||72199<=g&&g<=72200||g==72249||72279<=g&&g<=72280||g==72343||g==72751||g==72766||g==72873||g==72881||g==72884||94033<=g&&g<=94078||g==119142||g==119149?Kt:4352<=g&&g<=4447||43360<=g&&g<=43388?on:4448<=g&&g<=4519||55216<=g&&g<=55238?Jn:4520<=g&&g<=4607||55243<=g&&g<=55291?Wt:g==44032||g==44060||g==44088||g==44116||g==44144||g==44172||g==44200||g==44228||g==44256||g==44284||g==44312||g==44340||g==44368||g==44396||g==44424||g==44452||g==44480||g==44508||g==44536||g==44564||g==44592||g==44620||g==44648||g==44676||g==44704||g==44732||g==44760||g==44788||g==44816||g==44844||g==44872||g==44900||g==44928||g==44956||g==44984||g==45012||g==45040||g==45068||g==45096||g==45124||g==45152||g==45180||g==45208||g==45236||g==45264||g==45292||g==45320||g==45348||g==45376||g==45404||g==45432||g==45460||g==45488||g==45516||g==45544||g==45572||g==45600||g==45628||g==45656||g==45684||g==45712||g==45740||g==45768||g==45796||g==45824||g==45852||g==45880||g==45908||g==45936||g==45964||g==45992||g==46020||g==46048||g==46076||g==46104||g==46132||g==46160||g==46188||g==46216||g==46244||g==46272||g==46300||g==46328||g==46356||g==46384||g==46412||g==46440||g==46468||g==46496||g==46524||g==46552||g==46580||g==46608||g==46636||g==46664||g==46692||g==46720||g==46748||g==46776||g==46804||g==46832||g==46860||g==46888||g==46916||g==46944||g==46972||g==47e3||g==47028||g==47056||g==47084||g==47112||g==47140||g==47168||g==47196||g==47224||g==47252||g==47280||g==47308||g==47336||g==47364||g==47392||g==47420||g==47448||g==47476||g==47504||g==47532||g==47560||g==47588||g==47616||g==47644||g==47672||g==47700||g==47728||g==47756||g==47784||g==47812||g==47840||g==47868||g==47896||g==47924||g==47952||g==47980||g==48008||g==48036||g==48064||g==48092||g==48120||g==48148||g==48176||g==48204||g==48232||g==48260||g==48288||g==48316||g==48344||g==48372||g==48400||g==48428||g==48456||g==48484||g==48512||g==48540||g==48568||g==48596||g==48624||g==48652||g==48680||g==48708||g==48736||g==48764||g==48792||g==48820||g==48848||g==48876||g==48904||g==48932||g==48960||g==48988||g==49016||g==49044||g==49072||g==49100||g==49128||g==49156||g==49184||g==49212||g==49240||g==49268||g==49296||g==49324||g==49352||g==49380||g==49408||g==49436||g==49464||g==49492||g==49520||g==49548||g==49576||g==49604||g==49632||g==49660||g==49688||g==49716||g==49744||g==49772||g==49800||g==49828||g==49856||g==49884||g==49912||g==49940||g==49968||g==49996||g==50024||g==50052||g==50080||g==50108||g==50136||g==50164||g==50192||g==50220||g==50248||g==50276||g==50304||g==50332||g==50360||g==50388||g==50416||g==50444||g==50472||g==50500||g==50528||g==50556||g==50584||g==50612||g==50640||g==50668||g==50696||g==50724||g==50752||g==50780||g==50808||g==50836||g==50864||g==50892||g==50920||g==50948||g==50976||g==51004||g==51032||g==51060||g==51088||g==51116||g==51144||g==51172||g==51200||g==51228||g==51256||g==51284||g==51312||g==51340||g==51368||g==51396||g==51424||g==51452||g==51480||g==51508||g==51536||g==51564||g==51592||g==51620||g==51648||g==51676||g==51704||g==51732||g==51760||g==51788||g==51816||g==51844||g==51872||g==51900||g==51928||g==51956||g==51984||g==52012||g==52040||g==52068||g==52096||g==52124||g==52152||g==52180||g==52208||g==52236||g==52264||g==52292||g==52320||g==52348||g==52376||g==52404||g==52432||g==52460||g==52488||g==52516||g==52544||g==52572||g==52600||g==52628||g==52656||g==52684||g==52712||g==52740||g==52768||g==52796||g==52824||g==52852||g==52880||g==52908||g==52936||g==52964||g==52992||g==53020||g==53048||g==53076||g==53104||g==53132||g==53160||g==53188||g==53216||g==53244||g==53272||g==53300||g==53328||g==53356||g==53384||g==53412||g==53440||g==53468||g==53496||g==53524||g==53552||g==53580||g==53608||g==53636||g==53664||g==53692||g==53720||g==53748||g==53776||g==53804||g==53832||g==53860||g==53888||g==53916||g==53944||g==53972||g==54e3||g==54028||g==54056||g==54084||g==54112||g==54140||g==54168||g==54196||g==54224||g==54252||g==54280||g==54308||g==54336||g==54364||g==54392||g==54420||g==54448||g==54476||g==54504||g==54532||g==54560||g==54588||g==54616||g==54644||g==54672||g==54700||g==54728||g==54756||g==54784||g==54812||g==54840||g==54868||g==54896||g==54924||g==54952||g==54980||g==55008||g==55036||g==55064||g==55092||g==55120||g==55148||g==55176?$n:44033<=g&&g<=44059||44061<=g&&g<=44087||44089<=g&&g<=44115||44117<=g&&g<=44143||44145<=g&&g<=44171||44173<=g&&g<=44199||44201<=g&&g<=44227||44229<=g&&g<=44255||44257<=g&&g<=44283||44285<=g&&g<=44311||44313<=g&&g<=44339||44341<=g&&g<=44367||44369<=g&&g<=44395||44397<=g&&g<=44423||44425<=g&&g<=44451||44453<=g&&g<=44479||44481<=g&&g<=44507||44509<=g&&g<=44535||44537<=g&&g<=44563||44565<=g&&g<=44591||44593<=g&&g<=44619||44621<=g&&g<=44647||44649<=g&&g<=44675||44677<=g&&g<=44703||44705<=g&&g<=44731||44733<=g&&g<=44759||44761<=g&&g<=44787||44789<=g&&g<=44815||44817<=g&&g<=44843||44845<=g&&g<=44871||44873<=g&&g<=44899||44901<=g&&g<=44927||44929<=g&&g<=44955||44957<=g&&g<=44983||44985<=g&&g<=45011||45013<=g&&g<=45039||45041<=g&&g<=45067||45069<=g&&g<=45095||45097<=g&&g<=45123||45125<=g&&g<=45151||45153<=g&&g<=45179||45181<=g&&g<=45207||45209<=g&&g<=45235||45237<=g&&g<=45263||45265<=g&&g<=45291||45293<=g&&g<=45319||45321<=g&&g<=45347||45349<=g&&g<=45375||45377<=g&&g<=45403||45405<=g&&g<=45431||45433<=g&&g<=45459||45461<=g&&g<=45487||45489<=g&&g<=45515||45517<=g&&g<=45543||45545<=g&&g<=45571||45573<=g&&g<=45599||45601<=g&&g<=45627||45629<=g&&g<=45655||45657<=g&&g<=45683||45685<=g&&g<=45711||45713<=g&&g<=45739||45741<=g&&g<=45767||45769<=g&&g<=45795||45797<=g&&g<=45823||45825<=g&&g<=45851||45853<=g&&g<=45879||45881<=g&&g<=45907||45909<=g&&g<=45935||45937<=g&&g<=45963||45965<=g&&g<=45991||45993<=g&&g<=46019||46021<=g&&g<=46047||46049<=g&&g<=46075||46077<=g&&g<=46103||46105<=g&&g<=46131||46133<=g&&g<=46159||46161<=g&&g<=46187||46189<=g&&g<=46215||46217<=g&&g<=46243||46245<=g&&g<=46271||46273<=g&&g<=46299||46301<=g&&g<=46327||46329<=g&&g<=46355||46357<=g&&g<=46383||46385<=g&&g<=46411||46413<=g&&g<=46439||46441<=g&&g<=46467||46469<=g&&g<=46495||46497<=g&&g<=46523||46525<=g&&g<=46551||46553<=g&&g<=46579||46581<=g&&g<=46607||46609<=g&&g<=46635||46637<=g&&g<=46663||46665<=g&&g<=46691||46693<=g&&g<=46719||46721<=g&&g<=46747||46749<=g&&g<=46775||46777<=g&&g<=46803||46805<=g&&g<=46831||46833<=g&&g<=46859||46861<=g&&g<=46887||46889<=g&&g<=46915||46917<=g&&g<=46943||46945<=g&&g<=46971||46973<=g&&g<=46999||47001<=g&&g<=47027||47029<=g&&g<=47055||47057<=g&&g<=47083||47085<=g&&g<=47111||47113<=g&&g<=47139||47141<=g&&g<=47167||47169<=g&&g<=47195||47197<=g&&g<=47223||47225<=g&&g<=47251||47253<=g&&g<=47279||47281<=g&&g<=47307||47309<=g&&g<=47335||47337<=g&&g<=47363||47365<=g&&g<=47391||47393<=g&&g<=47419||47421<=g&&g<=47447||47449<=g&&g<=47475||47477<=g&&g<=47503||47505<=g&&g<=47531||47533<=g&&g<=47559||47561<=g&&g<=47587||47589<=g&&g<=47615||47617<=g&&g<=47643||47645<=g&&g<=47671||47673<=g&&g<=47699||47701<=g&&g<=47727||47729<=g&&g<=47755||47757<=g&&g<=47783||47785<=g&&g<=47811||47813<=g&&g<=47839||47841<=g&&g<=47867||47869<=g&&g<=47895||47897<=g&&g<=47923||47925<=g&&g<=47951||47953<=g&&g<=47979||47981<=g&&g<=48007||48009<=g&&g<=48035||48037<=g&&g<=48063||48065<=g&&g<=48091||48093<=g&&g<=48119||48121<=g&&g<=48147||48149<=g&&g<=48175||48177<=g&&g<=48203||48205<=g&&g<=48231||48233<=g&&g<=48259||48261<=g&&g<=48287||48289<=g&&g<=48315||48317<=g&&g<=48343||48345<=g&&g<=48371||48373<=g&&g<=48399||48401<=g&&g<=48427||48429<=g&&g<=48455||48457<=g&&g<=48483||48485<=g&&g<=48511||48513<=g&&g<=48539||48541<=g&&g<=48567||48569<=g&&g<=48595||48597<=g&&g<=48623||48625<=g&&g<=48651||48653<=g&&g<=48679||48681<=g&&g<=48707||48709<=g&&g<=48735||48737<=g&&g<=48763||48765<=g&&g<=48791||48793<=g&&g<=48819||48821<=g&&g<=48847||48849<=g&&g<=48875||48877<=g&&g<=48903||48905<=g&&g<=48931||48933<=g&&g<=48959||48961<=g&&g<=48987||48989<=g&&g<=49015||49017<=g&&g<=49043||49045<=g&&g<=49071||49073<=g&&g<=49099||49101<=g&&g<=49127||49129<=g&&g<=49155||49157<=g&&g<=49183||49185<=g&&g<=49211||49213<=g&&g<=49239||49241<=g&&g<=49267||49269<=g&&g<=49295||49297<=g&&g<=49323||49325<=g&&g<=49351||49353<=g&&g<=49379||49381<=g&&g<=49407||49409<=g&&g<=49435||49437<=g&&g<=49463||49465<=g&&g<=49491||49493<=g&&g<=49519||49521<=g&&g<=49547||49549<=g&&g<=49575||49577<=g&&g<=49603||49605<=g&&g<=49631||49633<=g&&g<=49659||49661<=g&&g<=49687||49689<=g&&g<=49715||49717<=g&&g<=49743||49745<=g&&g<=49771||49773<=g&&g<=49799||49801<=g&&g<=49827||49829<=g&&g<=49855||49857<=g&&g<=49883||49885<=g&&g<=49911||49913<=g&&g<=49939||49941<=g&&g<=49967||49969<=g&&g<=49995||49997<=g&&g<=50023||50025<=g&&g<=50051||50053<=g&&g<=50079||50081<=g&&g<=50107||50109<=g&&g<=50135||50137<=g&&g<=50163||50165<=g&&g<=50191||50193<=g&&g<=50219||50221<=g&&g<=50247||50249<=g&&g<=50275||50277<=g&&g<=50303||50305<=g&&g<=50331||50333<=g&&g<=50359||50361<=g&&g<=50387||50389<=g&&g<=50415||50417<=g&&g<=50443||50445<=g&&g<=50471||50473<=g&&g<=50499||50501<=g&&g<=50527||50529<=g&&g<=50555||50557<=g&&g<=50583||50585<=g&&g<=50611||50613<=g&&g<=50639||50641<=g&&g<=50667||50669<=g&&g<=50695||50697<=g&&g<=50723||50725<=g&&g<=50751||50753<=g&&g<=50779||50781<=g&&g<=50807||50809<=g&&g<=50835||50837<=g&&g<=50863||50865<=g&&g<=50891||50893<=g&&g<=50919||50921<=g&&g<=50947||50949<=g&&g<=50975||50977<=g&&g<=51003||51005<=g&&g<=51031||51033<=g&&g<=51059||51061<=g&&g<=51087||51089<=g&&g<=51115||51117<=g&&g<=51143||51145<=g&&g<=51171||51173<=g&&g<=51199||51201<=g&&g<=51227||51229<=g&&g<=51255||51257<=g&&g<=51283||51285<=g&&g<=51311||51313<=g&&g<=51339||51341<=g&&g<=51367||51369<=g&&g<=51395||51397<=g&&g<=51423||51425<=g&&g<=51451||51453<=g&&g<=51479||51481<=g&&g<=51507||51509<=g&&g<=51535||51537<=g&&g<=51563||51565<=g&&g<=51591||51593<=g&&g<=51619||51621<=g&&g<=51647||51649<=g&&g<=51675||51677<=g&&g<=51703||51705<=g&&g<=51731||51733<=g&&g<=51759||51761<=g&&g<=51787||51789<=g&&g<=51815||51817<=g&&g<=51843||51845<=g&&g<=51871||51873<=g&&g<=51899||51901<=g&&g<=51927||51929<=g&&g<=51955||51957<=g&&g<=51983||51985<=g&&g<=52011||52013<=g&&g<=52039||52041<=g&&g<=52067||52069<=g&&g<=52095||52097<=g&&g<=52123||52125<=g&&g<=52151||52153<=g&&g<=52179||52181<=g&&g<=52207||52209<=g&&g<=52235||52237<=g&&g<=52263||52265<=g&&g<=52291||52293<=g&&g<=52319||52321<=g&&g<=52347||52349<=g&&g<=52375||52377<=g&&g<=52403||52405<=g&&g<=52431||52433<=g&&g<=52459||52461<=g&&g<=52487||52489<=g&&g<=52515||52517<=g&&g<=52543||52545<=g&&g<=52571||52573<=g&&g<=52599||52601<=g&&g<=52627||52629<=g&&g<=52655||52657<=g&&g<=52683||52685<=g&&g<=52711||52713<=g&&g<=52739||52741<=g&&g<=52767||52769<=g&&g<=52795||52797<=g&&g<=52823||52825<=g&&g<=52851||52853<=g&&g<=52879||52881<=g&&g<=52907||52909<=g&&g<=52935||52937<=g&&g<=52963||52965<=g&&g<=52991||52993<=g&&g<=53019||53021<=g&&g<=53047||53049<=g&&g<=53075||53077<=g&&g<=53103||53105<=g&&g<=53131||53133<=g&&g<=53159||53161<=g&&g<=53187||53189<=g&&g<=53215||53217<=g&&g<=53243||53245<=g&&g<=53271||53273<=g&&g<=53299||53301<=g&&g<=53327||53329<=g&&g<=53355||53357<=g&&g<=53383||53385<=g&&g<=53411||53413<=g&&g<=53439||53441<=g&&g<=53467||53469<=g&&g<=53495||53497<=g&&g<=53523||53525<=g&&g<=53551||53553<=g&&g<=53579||53581<=g&&g<=53607||53609<=g&&g<=53635||53637<=g&&g<=53663||53665<=g&&g<=53691||53693<=g&&g<=53719||53721<=g&&g<=53747||53749<=g&&g<=53775||53777<=g&&g<=53803||53805<=g&&g<=53831||53833<=g&&g<=53859||53861<=g&&g<=53887||53889<=g&&g<=53915||53917<=g&&g<=53943||53945<=g&&g<=53971||53973<=g&&g<=53999||54001<=g&&g<=54027||54029<=g&&g<=54055||54057<=g&&g<=54083||54085<=g&&g<=54111||54113<=g&&g<=54139||54141<=g&&g<=54167||54169<=g&&g<=54195||54197<=g&&g<=54223||54225<=g&&g<=54251||54253<=g&&g<=54279||54281<=g&&g<=54307||54309<=g&&g<=54335||54337<=g&&g<=54363||54365<=g&&g<=54391||54393<=g&&g<=54419||54421<=g&&g<=54447||54449<=g&&g<=54475||54477<=g&&g<=54503||54505<=g&&g<=54531||54533<=g&&g<=54559||54561<=g&&g<=54587||54589<=g&&g<=54615||54617<=g&&g<=54643||54645<=g&&g<=54671||54673<=g&&g<=54699||54701<=g&&g<=54727||54729<=g&&g<=54755||54757<=g&&g<=54783||54785<=g&&g<=54811||54813<=g&&g<=54839||54841<=g&&g<=54867||54869<=g&&g<=54895||54897<=g&&g<=54923||54925<=g&&g<=54951||54953<=g&&g<=54979||54981<=g&&g<=55007||55009<=g&&g<=55035||55037<=g&&g<=55063||55065<=g&&g<=55091||55093<=g&&g<=55119||55121<=g&&g<=55147||55149<=g&&g<=55175||55177<=g&&g<=55203?On:g==9757||g==9977||9994<=g&&g<=9997||g==127877||127938<=g&&g<=127940||g==127943||127946<=g&&g<=127948||128066<=g&&g<=128067||128070<=g&&g<=128080||g==128110||128112<=g&&g<=128120||g==128124||128129<=g&&g<=128131||128133<=g&&g<=128135||g==128170||128372<=g&&g<=128373||g==128378||g==128400||128405<=g&&g<=128406||128581<=g&&g<=128583||128587<=g&&g<=128591||g==128675||128692<=g&&g<=128694||g==128704||g==128716||129304<=g&&g<=129308||129310<=g&&g<=129311||g==129318||129328<=g&&g<=129337||129341<=g&&g<=129342||129489<=g&&g<=129501?Bi:127995<=g&&g<=127999?ei:g==8205?Kn:g==9792||g==9794||9877<=g&&g<=9878||g==9992||g==10084||g==127752||g==127806||g==127859||g==127891||g==127908||g==127912||g==127979||g==127981||g==128139||128187<=g&&g<=128188||g==128295||g==128300||g==128488||g==128640||g==128658?Ge:128102<=g&&g<=128105?de:Bn}return this}Pe.exports&&(Pe.exports=Re)}),a=new r,l=function(Re,He,bt){for(var vt=a.iterateGraphemes(Re.substring(He)),Ot="",qt=0;qt<bt-He;qt++){var Kt=vt.next();if(Ot+=Kt.value,Kt.done)break}return Ot},o=function(Pe,Re,He,bt,vt,Ot,qt){return{start:{line:Pe,column:Re,offset:He},end:{line:bt,column:vt,offset:Ot},source:qt||null}},m=i(function(Pe,Re){(function(He,bt){Pe.exports=bt()})(t,function(){var He="",bt,vt=Ot;function Ot(On,Bn){if(typeof On!="string")throw new TypeError("expected a string");if(Bn===1)return On;if(Bn===2)return On+On;var In=On.length*Bn;if(bt!==On||typeof bt>"u")bt=On,He="";else if(He.length>=In)return He.substr(0,In);for(;In>He.length&&Bn>1;)Bn&1&&(He+=On),Bn>>=1,On+=On;return He+=On,He=He.substr(0,In),He}var qt=function(Bn,In,Bi){if(Bn==null||In==null)return Bn;var ei=String(Bn),Kn=typeof In=="number"?In:parseInt(In,10);if(isNaN(Kn)||!isFinite(Kn))return ei;var Ge=ei.length;if(Ge>=Kn)return ei;var de=String(Bi);de===""&&(de=" ");for(var re=Kn-Ge;de.length<re;)de+=de;var le=de.length>re?de.substr(0,re):de;return le+ei},Kt=Object.assign||function(On){for(var Bn=1;Bn<arguments.length;Bn++){var In=arguments[Bn];for(var Bi in In)Object.prototype.hasOwnProperty.call(In,Bi)&&(On[Bi]=In[Bi])}return On};function on(On,Bn,In,Bi){var ei=String(Bn),Kn=qt(ei,In," "),Ge=vt(" ",Bi.tabSize);return Kn+" | "+On.replace(/\t/g,Ge)}function Jn(On,Bn,In,Bi,ei){return On.slice(Bn,In).map(function(Kn,Ge){return on(Kn,Bn+Ge+1,Bi,ei)}).join(`
`)}var Wt={extraLines:2,tabSize:4},$n=function(Bn,In,Bi,ei){ei=Kt({},Wt,ei);var Kn=Bn.split(/\r\n?|\n|\f/),Ge=Math.max(1,In-ei.extraLines)-1,de=Math.min(In+ei.extraLines,Kn.length),re=String(de).length,le=Jn(Kn,Ge,In,re,ei),me=on(Kn[In-1].substring(0,Bi-1),In,re,ei),Te=vt(" ",me.length)+"^",We=Jn(Kn,In,de,re,ei);return[le,Te,We].filter(Boolean).join(`
`)};return $n})}),C=new Error().stack,S=function(Pe){var Re=Object.create(SyntaxError.prototype);return Object.assign(Re,Pe,{name:"SyntaxError"}),Object.defineProperty(Re,"stack",{get:function(){return C?C.replace(/^(.+\n){1,3}/,String(Re)+`
`):""}}),Re},O=function(Pe,Re,He,bt,vt){throw S({message:bt?Pe+`
`+m(Re,bt,vt):Pe,rawMessage:Pe,source:He,line:bt,column:vt})},U={unexpectedEnd:function(){return"Unexpected end of input"},unexpectedToken:function(Re){for(var He=arguments.length,bt=Array(He>1?He-1:0),vt=1;vt<He;vt++)bt[vt-1]=arguments[vt];return"Unexpected token <"+Re+"> at "+bt.filter(Boolean).join(":")}},K={unexpectedSymbol:function(Re){for(var He=arguments.length,bt=Array(He>1?He-1:0),vt=1;vt<He;vt++)bt[vt-1]=arguments[vt];return"Unexpected symbol <"+Re+"> at "+bt.filter(Boolean).join(":")}},z={LEFT_BRACE:0,RIGHT_BRACE:1,LEFT_BRACKET:2,RIGHT_BRACKET:3,COLON:4,COMMA:5,STRING:6,NUMBER:7,TRUE:8,FALSE:9,NULL:10},j={"{":z.LEFT_BRACE,"}":z.RIGHT_BRACE,"[":z.LEFT_BRACKET,"]":z.RIGHT_BRACKET,":":z.COLON,",":z.COMMA},Q={true:z.TRUE,false:z.FALSE,null:z.NULL},ee={_START_:0,START_QUOTE_OR_CHAR:1,ESCAPE:2},V={'"':0,"\\":1,"/":2,b:3,f:4,n:5,r:6,t:7,u:8},ae={_START_:0,MINUS:1,ZERO:2,DIGIT:3,POINT:4,DIGIT_FRACTION:5,EXP:6,EXP_DIGIT_OR_SIGN:7};function ne(Pe){return Pe>="1"&&Pe<="9"}function Z(Pe){return Pe>="0"&&Pe<="9"}function oe(Pe){return Z(Pe)||Pe>="a"&&Pe<="f"||Pe>="A"&&Pe<="F"}function W(Pe){return Pe==="e"||Pe==="E"}function ue(Pe,Re,He,bt){var vt=Pe.charAt(Re);if(vt==="\r")Re++,He++,bt=1,Pe.charAt(Re)===`
`&&Re++;else if(vt===`
`)Re++,He++,bt=1;else if(vt==="	"||vt===" ")Re++,bt++;else return null;return{index:Re,line:He,column:bt}}function ge(Pe,Re,He,bt){var vt=Pe.charAt(Re);return vt in j?{type:j[vt],line:He,column:bt+1,index:Re+1,value:null}:null}function ye(Pe,Re,He,bt){for(var vt in Q)if(Q.hasOwnProperty(vt)&&Pe.substr(Re,vt.length)===vt)return{type:Q[vt],line:He,column:bt+vt.length,index:Re+vt.length,value:vt};return null}function Me(Pe,Re,He,bt){for(var vt=Re,Ot=ee._START_;Re<Pe.length;){var qt=Pe.charAt(Re);switch(Ot){case ee._START_:{if(qt==='"')Re++,Ot=ee.START_QUOTE_OR_CHAR;else return null;break}case ee.START_QUOTE_OR_CHAR:{if(qt==="\\")Re++,Ot=ee.ESCAPE;else{if(qt==='"')return Re++,{type:z.STRING,line:He,column:bt+Re-vt,index:Re,value:Pe.slice(vt,Re)};Re++}break}case ee.ESCAPE:{if(qt in V){if(Re++,qt==="u")for(var Kt=0;Kt<4;Kt++){var on=Pe.charAt(Re);if(on&&oe(on))Re++;else return null}Ot=ee.START_QUOTE_OR_CHAR}else return null;break}}}}function Be(Pe,Re,He,bt){var vt=Re,Ot=Re,qt=ae._START_;e:for(;Re<Pe.length;){var Kt=Pe.charAt(Re);switch(qt){case ae._START_:{if(Kt==="-")qt=ae.MINUS;else if(Kt==="0")Ot=Re+1,qt=ae.ZERO;else if(ne(Kt))Ot=Re+1,qt=ae.DIGIT;else return null;break}case ae.MINUS:{if(Kt==="0")Ot=Re+1,qt=ae.ZERO;else if(ne(Kt))Ot=Re+1,qt=ae.DIGIT;else return null;break}case ae.ZERO:{if(Kt===".")qt=ae.POINT;else if(W(Kt))qt=ae.EXP;else break e;break}case ae.DIGIT:{if(Z(Kt))Ot=Re+1;else if(Kt===".")qt=ae.POINT;else if(W(Kt))qt=ae.EXP;else break e;break}case ae.POINT:{if(Z(Kt))Ot=Re+1,qt=ae.DIGIT_FRACTION;else break e;break}case ae.DIGIT_FRACTION:{if(Z(Kt))Ot=Re+1;else if(W(Kt))qt=ae.EXP;else break e;break}case ae.EXP:{if(Kt==="+"||Kt==="-")qt=ae.EXP_DIGIT_OR_SIGN;else if(Z(Kt))Ot=Re+1,qt=ae.EXP_DIGIT_OR_SIGN;else break e;break}case ae.EXP_DIGIT_OR_SIGN:{if(Z(Kt))Ot=Re+1;else break e;break}}Re++}return Ot>0?{type:z.NUMBER,line:He,column:bt+Ot-vt,index:Ot,value:Pe.slice(vt,Ot)}:null}var we=function(Re,He){for(var bt=1,vt=1,Ot=0,qt=[];Ot<Re.length;){var Kt=[Re,Ot,bt,vt],on=ue.apply(void 0,Kt);if(on){Ot=on.index,bt=on.line,vt=on.column;continue}var Jn=ge.apply(void 0,Kt)||ye.apply(void 0,Kt)||Me.apply(void 0,Kt)||Be.apply(void 0,Kt);if(Jn){var Wt={type:Jn.type,value:Jn.value,loc:o(bt,vt,Ot,Jn.line,Jn.column,Jn.index,He.source)};qt.push(Wt),Ot=Jn.index,bt=Jn.line,vt=Jn.column}else O(K.unexpectedSymbol(l(Re,Ot,Ot+1),He.source,bt,vt),Re,He.source,bt,vt)}return qt},qe={_START_:0,OPEN_OBJECT:1,PROPERTY:2,COMMA:3},xe={_START_:0,KEY:1,COLON:2},ze={_START_:0,OPEN_ARRAY:1,VALUE:2,COMMA:3},ot={loc:!0,source:null};function yt(Pe,Re,He){var bt=Re.length>0?Re[Re.length-1].loc.end:{line:1,column:1};O(U.unexpectedEnd(),Pe,He.source,bt.line,bt.column)}function nt(Pe){for(var Re=0,He=0;He<4;He++)Re=Re*16+parseInt(Pe[He],16);return String.fromCharCode(Re)}var be={b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},Ne=['"',"\\","/"];function tt(Pe){for(var Re="",He=0;He<Pe.length;He++){var bt=Pe.charAt(He);if(bt==="\\"){He++;var vt=Pe.charAt(He);if(vt==="u")Re+=nt(Pe.substr(He+1,4)),He+=4;else if(Ne.indexOf(vt)!==-1)Re+=vt;else if(vt in be)Re+=be[vt];else break}else Re+=bt}return Re}function lt(Pe,Re,He,bt){for(var vt=void 0,Ot={type:"Object",children:[]},qt=qe._START_;He<Re.length;){var Kt=Re[He];switch(qt){case qe._START_:{if(Kt.type===z.LEFT_BRACE)vt=Kt,qt=qe.OPEN_OBJECT,He++;else return null;break}case qe.OPEN_OBJECT:{if(Kt.type===z.RIGHT_BRACE)return bt.loc&&(Ot.loc=o(vt.loc.start.line,vt.loc.start.column,vt.loc.start.offset,Kt.loc.end.line,Kt.loc.end.column,Kt.loc.end.offset,bt.source)),{value:Ot,index:He+1};var on=It(Pe,Re,He,bt);Ot.children.push(on.value),qt=qe.PROPERTY,He=on.index;break}case qe.PROPERTY:{if(Kt.type===z.RIGHT_BRACE)return bt.loc&&(Ot.loc=o(vt.loc.start.line,vt.loc.start.column,vt.loc.start.offset,Kt.loc.end.line,Kt.loc.end.column,Kt.loc.end.offset,bt.source)),{value:Ot,index:He+1};Kt.type===z.COMMA?(qt=qe.COMMA,He++):O(U.unexpectedToken(l(Pe,Kt.loc.start.offset,Kt.loc.end.offset),bt.source,Kt.loc.start.line,Kt.loc.start.column),Pe,bt.source,Kt.loc.start.line,Kt.loc.start.column);break}case qe.COMMA:{var Jn=It(Pe,Re,He,bt);Jn?(He=Jn.index,Ot.children.push(Jn.value),qt=qe.PROPERTY):O(U.unexpectedToken(l(Pe,Kt.loc.start.offset,Kt.loc.end.offset),bt.source,Kt.loc.start.line,Kt.loc.start.column),Pe,bt.source,Kt.loc.start.line,Kt.loc.start.column);break}}}yt(Pe,Re,bt)}function It(Pe,Re,He,bt){for(var vt=void 0,Ot={type:"Property",key:null,value:null},qt=xe._START_;He<Re.length;){var Kt=Re[He];switch(qt){case xe._START_:{if(Kt.type===z.STRING){var on={type:"Identifier",value:tt(Pe.slice(Kt.loc.start.offset+1,Kt.loc.end.offset-1)),raw:Kt.value};bt.loc&&(on.loc=Kt.loc),vt=Kt,Ot.key=on,qt=xe.KEY,He++}else return null;break}case xe.KEY:{Kt.type===z.COLON?(qt=xe.COLON,He++):O(U.unexpectedToken(l(Pe,Kt.loc.start.offset,Kt.loc.end.offset),bt.source,Kt.loc.start.line,Kt.loc.start.column),Pe,bt.source,Kt.loc.start.line,Kt.loc.start.column);break}case xe.COLON:{var Jn=Rt(Pe,Re,He,bt);return Ot.value=Jn.value,bt.loc&&(Ot.loc=o(vt.loc.start.line,vt.loc.start.column,vt.loc.start.offset,Jn.value.loc.end.line,Jn.value.loc.end.column,Jn.value.loc.end.offset,bt.source)),{value:Ot,index:Jn.index}}}}}function pt(Pe,Re,He,bt){for(var vt=void 0,Ot={type:"Array",children:[]},qt=ze._START_,Kt=void 0;He<Re.length;)switch(Kt=Re[He],qt){case ze._START_:{if(Kt.type===z.LEFT_BRACKET)vt=Kt,qt=ze.OPEN_ARRAY,He++;else return null;break}case ze.OPEN_ARRAY:{if(Kt.type===z.RIGHT_BRACKET)return bt.loc&&(Ot.loc=o(vt.loc.start.line,vt.loc.start.column,vt.loc.start.offset,Kt.loc.end.line,Kt.loc.end.column,Kt.loc.end.offset,bt.source)),{value:Ot,index:He+1};var on=Rt(Pe,Re,He,bt);He=on.index,Ot.children.push(on.value),qt=ze.VALUE;break}case ze.VALUE:{if(Kt.type===z.RIGHT_BRACKET)return bt.loc&&(Ot.loc=o(vt.loc.start.line,vt.loc.start.column,vt.loc.start.offset,Kt.loc.end.line,Kt.loc.end.column,Kt.loc.end.offset,bt.source)),{value:Ot,index:He+1};Kt.type===z.COMMA?(qt=ze.COMMA,He++):O(U.unexpectedToken(l(Pe,Kt.loc.start.offset,Kt.loc.end.offset),bt.source,Kt.loc.start.line,Kt.loc.start.column),Pe,bt.source,Kt.loc.start.line,Kt.loc.start.column);break}case ze.COMMA:{var Jn=Rt(Pe,Re,He,bt);He=Jn.index,Ot.children.push(Jn.value),qt=ze.VALUE;break}}yt(Pe,Re,bt)}function St(Pe,Re,He,bt){var vt=Re[He],Ot=null;switch(vt.type){case z.STRING:{Ot=tt(Pe.slice(vt.loc.start.offset+1,vt.loc.end.offset-1));break}case z.NUMBER:{Ot=Number(vt.value);break}case z.TRUE:{Ot=!0;break}case z.FALSE:{Ot=!1;break}case z.NULL:{Ot=null;break}default:return null}var qt={type:"Literal",value:Ot,raw:vt.value};return bt.loc&&(qt.loc=vt.loc),{value:qt,index:He+1}}function Rt(Pe,Re,He,bt){var vt=Re[He],Ot=St.apply(void 0,arguments)||lt.apply(void 0,arguments)||pt.apply(void 0,arguments);if(Ot)return Ot;O(U.unexpectedToken(l(Pe,vt.loc.start.offset,vt.loc.end.offset),bt.source,vt.loc.start.line,vt.loc.start.column),Pe,bt.source,vt.loc.start.line,vt.loc.start.column)}var Le=function(Pe,Re){Re=Object.assign({},ot,Re);var He=we(Pe,Re);He.length===0&&yt(Pe,He,Re);var bt=Rt(Pe,He,0,Re);if(bt.index===He.length)return bt.value;var vt=He[bt.index];O(U.unexpectedToken(l(Pe,vt.loc.start.offset,vt.loc.end.offset),Re.source,vt.loc.start.line,vt.loc.start.column),Pe,Re.source,vt.loc.start.line,vt.loc.start.column)};return Le})}(Tx)),Tx.exports}var Hse=qse();const Vse=WA(Hse);function li(){var n="/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts",e="89c156e637b20b434cfb214df7fad7d710253070",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts",statementMap:{0:{start:{line:5,column:0},end:{line:10,column:3}},1:{start:{line:6,column:2},end:{line:9,column:4}},2:{start:{line:12,column:16},end:{line:12,column:18}},3:{start:{line:13,column:2},end:{line:30,column:3}},4:{start:{line:14,column:4},end:{line:14,column:16}},5:{start:{line:16,column:23},end:{line:16,column:71}},6:{start:{line:17,column:4},end:{line:29,column:5}},7:{start:{line:18,column:18},end:{line:23,column:7}},8:{start:{line:24,column:6},end:{line:28,column:9}},9:{start:{line:31,column:2},end:{line:31,column:15}},10:{start:{line:33,column:0},end:{line:35,column:3}},11:{start:{line:34,column:2},end:{line:34,column:26}},12:{start:{line:36,column:0},end:{line:130,column:3}},13:{start:{line:37,column:16},end:{line:37,column:32}},14:{start:{line:38,column:22},end:{line:38,column:26}},15:{start:{line:39,column:2},end:{line:41,column:3}},16:{start:{line:40,column:4},end:{line:40,column:17}},17:{start:{line:42,column:14},end:{line:42,column:29}},18:{start:{line:43,column:16},end:{line:43,column:32}},19:{start:{line:45,column:4},end:{line:65,column:5}},20:{start:{line:46,column:6},end:{line:46,column:20}},21:{start:{line:47,column:11},end:{line:65,column:5}},22:{start:{line:48,column:6},end:{line:48,column:18}},23:{start:{line:49,column:11},end:{line:65,column:5}},24:{start:{line:50,column:6},end:{line:50,column:20}},25:{start:{line:52,column:18},end:{line:52,column:25}},26:{start:{line:54,column:6},end:{line:63,column:7}},27:{start:{line:55,column:8},end:{line:55,column:41}},28:{start:{line:57,column:8},end:{line:59,column:11}},29:{start:{line:58,column:10},end:{line:58,column:101}},30:{start:{line:60,column:8},end:{line:62,column:9}},31:{start:{line:61,column:10},end:{line:61,column:34}},32:{start:{line:64,column:6},end:{line:64,column:63}},33:{start:{line:67,column:12},end:{line:67,column:16}},34:{start:{line:68,column:2},end:{line:99,column:3}},35:{start:{line:69,column:19},end:{line:79,column:6}},36:{start:{line:80,column:4},end:{line:94,column:5}},37:{start:{line:81,column:6},end:{line:93,column:8}},38:{start:{line:84,column:10},end:{line:84,column:76}},39:{start:{line:86,column:34},end:{line:86,column:85}},40:{start:{line:87,column:10},end:{line:91,column:12}},41:{start:{line:95,column:9},end:{line:99,column:3}},42:{start:{line:96,column:4},end:{line:96,column:56}},43:{start:{line:98,column:4},end:{line:98,column:50}},44:{start:{line:100,column:2},end:{line:128,column:3}},45:{start:{line:101,column:19},end:{line:101,column:28}},46:{start:{line:102,column:4},end:{line:127,column:7}},47:{start:{line:103,column:31},end:{line:103,column:36}},48:{start:{line:104,column:6},end:{line:126,column:7}},49:{start:{line:105,column:31},end:{line:105,column:64}},50:{start:{line:106,column:20},end:{line:110,column:9}},51:{start:{line:111,column:8},end:{line:111,column:24}},52:{start:{line:112,column:13},end:{line:126,column:7}},53:{start:{line:113,column:21},end:{line:113,column:83}},54:{start:{line:114,column:28},end:{line:114,column:64}},55:{start:{line:115,column:8},end:{line:118,column:9}},56:{start:{line:116,column:10},end:{line:116,column:69}},57:{start:{line:117,column:10},end:{line:117,column:17}},58:{start:{line:119,column:24},end:{line:119,column:35}},59:{start:{line:120,column:31},end:{line:120,column:34}},60:{start:{line:121,column:8},end:{line:125,column:11}},61:{start:{line:129,column:2},end:{line:129,column:15}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:29},end:{line:5,column:30}},loc:{start:{line:5,column:55},end:{line:10,column:1}},line:5},1:{name:"tryToParse",decl:{start:{line:11,column:9},end:{line:11,column:19}},loc:{start:{line:11,column:26},end:{line:32,column:1}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:33,column:42},end:{line:33,column:43}},loc:{start:{line:33,column:52},end:{line:35,column:1}},line:33},3:{name:"(anonymous_3)",decl:{start:{line:36,column:41},end:{line:36,column:42}},loc:{start:{line:36,column:62},end:{line:130,column:1}},line:36},4:{name:"getArrayPositionalFromAst",decl:{start:{line:44,column:11},end:{line:44,column:36}},loc:{start:{line:44,column:49},end:{line:66,column:3}},line:44},5:{name:"(anonymous_5)",decl:{start:{line:57,column:37},end:{line:57,column:38}},loc:{start:{line:57,column:52},end:{line:59,column:9}},line:57},6:{name:"(anonymous_6)",decl:{start:{line:83,column:29},end:{line:83,column:30}},loc:{start:{line:83,column:38},end:{line:85,column:9}},line:83},7:{name:"(anonymous_7)",decl:{start:{line:85,column:15},end:{line:85,column:16}},loc:{start:{line:85,column:24},end:{line:92,column:9}},line:85},8:{name:"(anonymous_8)",decl:{start:{line:102,column:19},end:{line:102,column:20}},loc:{start:{line:102,column:30},end:{line:127,column:5}},line:102}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:29,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:29,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:39,column:2},end:{line:41,column:3}},type:"if",locations:[{start:{line:39,column:2},end:{line:41,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:45,column:4},end:{line:65,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:65,column:5}},{start:{line:47,column:11},end:{line:65,column:5}}],line:45},3:{loc:{start:{line:47,column:11},end:{line:65,column:5}},type:"if",locations:[{start:{line:47,column:11},end:{line:65,column:5}},{start:{line:49,column:11},end:{line:65,column:5}}],line:47},4:{loc:{start:{line:49,column:11},end:{line:65,column:5}},type:"if",locations:[{start:{line:49,column:11},end:{line:65,column:5}},{start:{line:51,column:11},end:{line:65,column:5}}],line:49},5:{loc:{start:{line:54,column:6},end:{line:63,column:7}},type:"if",locations:[{start:{line:54,column:6},end:{line:63,column:7}},{start:{line:56,column:13},end:{line:63,column:7}}],line:54},6:{loc:{start:{line:58,column:17},end:{line:58,column:100}},type:"binary-expr",locations:[{start:{line:58,column:17},end:{line:58,column:30}},{start:{line:58,column:34},end:{line:58,column:69}},{start:{line:58,column:73},end:{line:58,column:100}}],line:58},7:{loc:{start:{line:60,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:60,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},8:{loc:{start:{line:68,column:2},end:{line:99,column:3}},type:"if",locations:[{start:{line:68,column:2},end:{line:99,column:3}},{start:{line:95,column:9},end:{line:99,column:3}}],line:68},9:{loc:{start:{line:80,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:80,column:4},end:{line:94,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:80},10:{loc:{start:{line:95,column:9},end:{line:99,column:3}},type:"if",locations:[{start:{line:95,column:9},end:{line:99,column:3}},{start:{line:97,column:9},end:{line:99,column:3}}],line:95},11:{loc:{start:{line:100,column:2},end:{line:128,column:3}},type:"if",locations:[{start:{line:100,column:2},end:{line:128,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:100},12:{loc:{start:{line:104,column:6},end:{line:126,column:7}},type:"if",locations:[{start:{line:104,column:6},end:{line:126,column:7}},{start:{line:112,column:13},end:{line:126,column:7}}],line:104},13:{loc:{start:{line:112,column:13},end:{line:126,column:7}},type:"if",locations:[{start:{line:112,column:13},end:{line:126,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:112},14:{loc:{start:{line:115,column:8},end:{line:118,column:9}},type:"if",locations:[{start:{line:115,column:8},end:{line:118,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:115}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts"],names:[],mappings:"AAAA,SAAQ,aAAY;AACpB,OAAO,gBAAiC;AACxC,OAAO,eAAe;AACtB,SAAQ,YAAY,wBAAuB;AAK3C,WAAW,WAAW,OAAO,CAAC,QAAQ,iBAAiB;AAErD,SAAO,WAAW,MAAM;AAAA,IACtB,EAAC,GAAG,QAAQ,MAAM,KAAI;AAAA,IACtB;AAAA,EACF;AACF,CAAC;AAGD,SAAS,WAAW,MAAc;AAEhC,QAAM,QAAkC,CAAC;AACzC,MAAI;AACF,UAAM,IAAI;AAAA,EACZ,SACM,KAAU;AAEd,UAAM,aAAa,IAAI,SAAS,EAAE,MAAM,0BAA0B;AAClE,QAAI,YAAY;AACd,YAAM,MAAM;AAAA,QACV,YAAY,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACtC,cAAc,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACxC,WAAW,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACrC,aAAa,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,MACzC;AAGA,YAAM,KAAK;AAAA,QACT,MAAM,WAAW,IAAI,IAAI,aAAa,GAAG,IAAI,YAAY;AAAA,QACzD,IAAI,WAAW,IAAI,IAAI,YAAY,GAAG,IAAI,WAAW;AAAA,QACrD,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAEA,SAAO;AACT;AAEA,WAAW,eAAe,QAAQ,QAAQ,CAAC,SAAiB;AAC1D,SAAO,WAAW,IAAI;AACxB,CAAC;AAED,WAAW,eAAe,QAAQ,OAAO,CAAC,MAAc,MAAW,QAAa;AAE9E,QAAM,QAAkC,WAAW,IAAI;AAEvD,QAAM,EAAC,QAAO,IAAI;AAElB,MAAI,MAAM,SAAS,GAAG;AAEpB,WAAO;AAAA,EACT;AAEA,QAAM,MAAM,UAAU,IAAI;AAC1B,QAAM,QAAQ,KAAK,MAAM,IAAI;AAE7B,WAAS,0BAA0B,MAAW,MAAgB;AAC5D,QAAI,CAAC,MAAM;AACT,aAAO;AAAA,IACT,WACS,KAAK,SAAS,GAAG;AACxB,aAAO;AAAA,IACT,WACS,CAAC,KAAK,UAAU;AACvB,aAAO;AAAA,IACT,OACK;AACH,YAAM,MAAM,KAAK,CAAC;AAClB,UAAI;AACJ,UAAI,IAAI,MAAM,UAAU,GAAG;AACzB,kBAAU,KAAK,SAAS,KAAK,CAAC,CAAC;AAAA,MACjC,OACK;AACH,kBAAU,KAAK,SAAS,KAAK,CAAC,cAAmB;AAC/C,iBACE,UAAU,OACV,UAAU,IAAI,SAAS,gBACvB,UAAU,IAAI,UAAU;AAAA,QAE5B,CAAC;AACD,YAAI,SAAS;AACX,oBAAU,QAAQ;AAAA,QACpB;AAAA,MACF;AACA,aAAO,0BAA0B,SAAS,KAAK,MAAM,CAAC,CAAC;AAAA,IACzD;AAAA,EACF;AAEA,MAAI,MAA6D;AACjE,MAAI,YAAY,SAAS;AAEvB,UAAM,SAAS,iBAAiB;AAAA,MAC9B,WAAW;AAAA,MACX,QAAQ;AAAA,MACR,YAAY,CAAC;AAAA,MACb,WAAW,CAAC;AAAA,MACZ,UAAU;AAAA,MACV,UAAU;AAAA,MACV,UAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,QAAQ;AACV,YAAM;AAAA,QACJ,QAAQ;AAAA,QACR,OAAO,OACJ,OAAO,SAAO;AAEb,iBAAO,CAAC,IAAI,QAAQ,MAAM,sCAAsC;AAAA,QAClE,CAAC,EACA,IAAI,SAAO;AAEV,gBAAM,kBAAkB,IAAI,QAAQ,QAAQ,iBAAiB,EAAE,EAAE,MAAM,GAAG;AAC1E,iBAAO;AAAA,YACL,MAAM;AAAA,YACN,KAAK,gBAAgB,CAAC;AAAA,YACtB,SAAS,gBAAgB,CAAC;AAAA,UAC5B;AAAA,QACF,CAAC;AAAA,MACL;AAAA,IACF;AAAA,EACF,WACS,YAAY,cAAc;AACjC,UAAM,WAAW,iBAAiB,OAAO,KAAK,IAAI;AAAA,EACpD,OACK;AACH,UAAM,IAAI,MAAM,mBAAmB,OAAO,EAAE;AAAA,EAC9C;AAEA,MAAI,KAAK,WAAW,SAAS;AAC3B,UAAM,SAAS,IAAI;AACnB,WAAO,QAAQ,WAAS;AACtB,YAAM,EAAC,KAAK,QAAO,IAAI;AAEvB,UAAI,CAAC,KAAK;AACR,cAAM,iBAAiB,IAAI,cAAc,IAAI,SAAS,CAAC;AACvD,cAAM,MAAM;AAAA,UACV,MAAM,WAAW,IAAI,IAAI,UAAU,GAAG,CAAC;AAAA,UACvC,IAAI,WAAW,IAAI,IAAI,SAAS,GAAG,eAAe,KAAK,MAAM;AAAA,UAC7D;AAAA,QACF;AACA,cAAM,KAAK,GAAG;AAAA,MAChB,WACS,KAAK;AACZ,cAAM,OAAO,IAAI,QAAQ,YAAY,EAAE,EAAE,MAAM,WAAW,EAAE,OAAO,OAAO;AAC1E,cAAM,cAAc,0BAA0B,KAAK,IAAI;AACvD,YAAI,CAAC,aAAa;AAChB,kBAAQ,KAAK,uCAAuC,KAAK;AACzD;AAAA,QACF;AAEA,cAAM,EAAC,IAAG,IAAI;AACd,cAAM,EAAC,OAAO,IAAG,IAAI;AAErB,cAAM,KAAK;AAAA,UACT,MAAM,WAAW,IAAI,MAAM,OAAO,GAAG,MAAM,MAAM;AAAA,UACjD,IAAI,WAAW,IAAI,IAAI,OAAO,GAAG,IAAI,MAAM;AAAA,UAC3C;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"89c156e637b20b434cfb214df7fad7d710253070"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return li=function(){return l},l}li();li().s[0]++;tp.defineMode("mgl",(n,e)=>(li().f[0]++,li().s[1]++,tp.modes.javascript({...n,json:!0},e)));function fG(n){li().f[1]++;const e=(li().s[2]++,[]);li().s[3]++;try{li().s[4]++,Qse.parse(n)}catch(t){const i=(li().s[5]++,t.toString().match(/line (\d+), column (\d+)/));if(li().s[6]++,i){li().b[0][0]++;const r=(li().s[7]++,{first_line:parseInt(i[1],10),first_column:parseInt(i[2],10),last_line:parseInt(i[1],10),last_column:parseInt(i[2],10)});li().s[8]++,e.push({from:tp.Pos(r.first_line-1,r.first_column),to:tp.Pos(r.last_line-1,r.last_column),message:t})}else li().b[0][1]++}return li().s[9]++,e}li().s[10]++;tp.registerHelper("lint","json",n=>(li().f[2]++,li().s[11]++,fG(n)));li().s[12]++;tp.registerHelper("lint","mgl",(n,e,t)=>{li().f[3]++;const i=(li().s[13]++,fG(n)),{context:r}=(li().s[14]++,e);if(li().s[15]++,i.length>0)return li().b[1][0]++,li().s[16]++,i;li().b[1][1]++;const a=(li().s[17]++,Vse(n)),l=(li().s[18]++,JSON.parse(n));function o(C,S){if(li().f[4]++,li().s[19]++,C){if(li().b[2][1]++,li().s[21]++,S.length<1)return li().b[3][0]++,li().s[22]++,C;if(li().b[3][1]++,li().s[23]++,C.children){li().b[4][1]++;const O=(li().s[25]++,S[0]);let U;return li().s[26]++,O.match(/^[0-9]+$/)?(li().b[5][0]++,li().s[27]++,U=C.children[S[0]]):(li().b[5][1]++,li().s[28]++,U=C.children.find(K=>(li().f[5]++,li().s[29]++,li().b[6][0]++,K.key&&(li().b[6][1]++,K.key.type==="Identifier")&&(li().b[6][2]++,K.key.value===O))),li().s[30]++,U?(li().b[7][0]++,li().s[31]++,U=U.value):li().b[7][1]++),li().s[32]++,o(U,S.slice(1))}else{li().b[4][0]++,li().s[24]++;return}}else{li().b[2][0]++,li().s[20]++;return}}let m=(li().s[33]++,null);if(li().s[34]++,r==="layer"){li().b[8][0]++;const C=(li().s[35]++,Of({version:8,name:"Empty Style",metadata:{},sources:{},sprite:"",glyphs:"https://example.com/glyphs/{fontstack}/{range}.pbf",layers:[l]}));li().s[36]++,C?(li().b[9][0]++,li().s[37]++,m={result:"error",value:C.filter(S=>(li().f[6]++,li().s[38]++,!S.message.match(/^layers\[0\]: source ".*" not found$/))).map(S=>{li().f[7]++;const O=(li().s[39]++,S.message.replace(/^layers\[0\]./,"").split(":"));return li().s[40]++,{name:"",key:O[0],message:O[1]}})}):li().b[9][1]++}else if(li().b[8][1]++,li().s[41]++,r==="expression")li().b[10][0]++,li().s[42]++,m=pV.createExpression(l,e.spec);else throw li().b[10][1]++,li().s[43]++,new Error(`Invalid context ${r}`);if(li().s[44]++,m?.result==="error"){li().b[11][0]++;const C=(li().s[45]++,m.value);li().s[46]++,C.forEach(S=>{li().f[8]++;const{key:O,message:U}=(li().s[47]++,S);if(li().s[48]++,O)if(li().b[12][1]++,li().s[52]++,O){li().b[13][0]++;const K=(li().s[53]++,O.replace(/^\[|\]$/g,"").split(/\.|[[\]]+/).filter(Boolean)),z=(li().s[54]++,o(a,K));if(li().s[55]++,z)li().b[14][1]++;else{li().b[14][0]++,li().s[56]++,console.warn("Something went wrong parsing error:",S),li().s[57]++;return}const{loc:j}=(li().s[58]++,z),{start:Q,end:ee}=(li().s[59]++,j);li().s[60]++,i.push({from:tp.Pos(Q.line-1,Q.column),to:tp.Pos(ee.line-1,ee.column),message:U})}else li().b[13][1]++;else{li().b[12][0]++;const K=(li().s[49]++,t.getLineHandle(t.lastLine())),z=(li().s[50]++,{from:tp.Pos(t.firstLine(),0),to:tp.Pos(t.lastLine(),K.text.length),message:U});li().s[51]++,i.push(z)}})}else li().b[11][1]++;return li().s[61]++,i});function yi(){var n="/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",e="1ca261de16bf1903ff881ab95fa4cd798e46aba9",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",statementMap:{0:{start:{line:14,column:24},end:{line:29,column:3}},1:{start:{line:19,column:6},end:{line:19,column:65}},2:{start:{line:32,column:8},end:{line:32,column:12}},3:{start:{line:33,column:22},end:{line:33,column:27}},4:{start:{line:35,column:4},end:{line:35,column:17}},5:{start:{line:36,column:4},end:{line:36,column:32}},6:{start:{line:37,column:4},end:{line:41,column:6}},7:{start:{line:44,column:4},end:{line:60,column:7}},8:{start:{line:61,column:4},end:{line:61,column:42}},9:{start:{line:62,column:4},end:{line:62,column:40}},10:{start:{line:63,column:4},end:{line:63,column:38}},11:{start:{line:65,column:18},end:{line:67,column:3}},12:{start:{line:66,column:4},end:{line:66,column:31}},13:{start:{line:68,column:12},end:{line:74,column:3}},14:{start:{line:69,column:4},end:{line:69,column:49}},15:{start:{line:69,column:28},end:{line:69,column:49}},16:{start:{line:70,column:4},end:{line:73,column:7}},17:{start:{line:75,column:11},end:{line:82,column:3}},18:{start:{line:76,column:4},end:{line:76,column:32}},19:{start:{line:77,column:4},end:{line:77,column:47}},20:{start:{line:77,column:27},end:{line:77,column:47}},21:{start:{line:78,column:4},end:{line:81,column:7}},22:{start:{line:84,column:4},end:{line:84,column:43}},23:{start:{line:85,column:4},end:{line:85,column:41}},24:{start:{line:86,column:4},end:{line:86,column:39}},25:{start:{line:89,column:4},end:{line:94,column:5}},26:{start:{line:90,column:6},end:{line:90,column:36}},27:{start:{line:91,column:6},end:{line:93,column:8}},28:{start:{line:96,column:13},end:{line:123,column:3}},29:{start:{line:97,column:4},end:{line:103,column:5}},30:{start:{line:98,column:6},end:{line:98,column:37}},31:{start:{line:99,column:6},end:{line:101,column:9}},32:{start:{line:102,column:6},end:{line:102,column:13}},33:{start:{line:104,column:20},end:{line:104,column:40}},34:{start:{line:105,column:4},end:{line:119,column:5}},35:{start:{line:107,column:6},end:{line:112,column:7}},36:{start:{line:108,column:8},end:{line:108,column:42}},37:{start:{line:110,column:8},end:{line:110,column:19}},38:{start:{line:111,column:8},end:{line:111,column:27}},39:{start:{line:113,column:6},end:{line:118,column:7}},40:{start:{line:114,column:8},end:{line:114,column:35}},41:{start:{line:116,column:8},end:{line:116,column:66}},42:{start:{line:116,column:33},end:{line:116,column:66}},43:{start:{line:117,column:8},end:{line:117,column:61}},44:{start:{line:117,column:36},end:{line:117,column:61}},45:{start:{line:120,column:4},end:{line:122,column:7}},46:{start:{line:125,column:14},end:{line:125,column:26}},47:{start:{line:126,column:28},end:{line:126,column:38}},48:{start:{line:127,column:18},end:{line:127,column:20}},49:{start:{line:128,column:4},end:{line:130,column:5}},50:{start:{line:129,column:6},end:{line:129,column:45}},51:{start:{line:131,column:4},end:{line:147,column:9}},52:{start:{line:142,column:12},end:{line:142,column:26}},53:{start:{line:150,column:18},end:{line:150,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:18,column:14},end:{line:18,column:15}},loc:{start:{line:18,column:24},end:{line:20,column:5}},line:18},1:{name:"(anonymous_1)",decl:{start:{line:21,column:13},end:{line:21,column:14}},loc:{start:{line:21,column:19},end:{line:22,column:5}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:12},end:{line:23,column:13}},loc:{start:{line:23,column:18},end:{line:24,column:5}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:25,column:19},end:{line:25,column:20}},loc:{start:{line:25,column:25},end:{line:26,column:5}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:27,column:17},end:{line:27,column:18}},loc:{start:{line:27,column:23},end:{line:28,column:5}},line:27},5:{name:"(anonymous_5)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:21},end:{line:42,column:3}},line:34},6:{name:"(anonymous_6)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:22},end:{line:64,column:3}},line:43},7:{name:"(anonymous_7)",decl:{start:{line:65,column:18},end:{line:65,column:19}},loc:{start:{line:65,column:24},end:{line:67,column:3}},line:65},8:{name:"(anonymous_8)",decl:{start:{line:68,column:12},end:{line:68,column:13}},loc:{start:{line:68,column:18},end:{line:74,column:3}},line:68},9:{name:"(anonymous_9)",decl:{start:{line:75,column:11},end:{line:75,column:12}},loc:{start:{line:75,column:17},end:{line:82,column:3}},line:75},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:25},end:{line:87,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:32},end:{line:95,column:3}},line:88},12:{name:"(anonymous_12)",decl:{start:{line:96,column:13},end:{line:96,column:14}},loc:{start:{line:96,column:21},end:{line:123,column:3}},line:96},13:{name:"(anonymous_13)",decl:{start:{line:124,column:2},end:{line:124,column:3}},loc:{start:{line:124,column:11},end:{line:148,column:3}},line:124},14:{name:"(anonymous_14)",decl:{start:{line:141,column:15},end:{line:141,column:16}},loc:{start:{line:141,column:23},end:{line:143,column:11}},line:141}},branchMap:{0:{loc:{start:{line:46,column:12},end:{line:48,column:7}},type:"binary-expr",locations:[{start:{line:46,column:12},end:{line:46,column:27}},{start:{line:46,column:31},end:{line:48,column:7}}],line:46},1:{loc:{start:{line:54,column:12},end:{line:56,column:7}},type:"binary-expr",locations:[{start:{line:54,column:12},end:{line:54,column:27}},{start:{line:54,column:31},end:{line:56,column:7}}],line:54},2:{loc:{start:{line:69,column:4},end:{line:69,column:49}},type:"if",locations:[{start:{line:69,column:4},end:{line:69,column:49}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:77,column:4},end:{line:77,column:47}},type:"if",locations:[{start:{line:77,column:4},end:{line:77,column:47}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:77},4:{loc:{start:{line:89,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:89,column:4},end:{line:94,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:89},5:{loc:{start:{line:89,column:8},end:{line:89,column:69}},type:"binary-expr",locations:[{start:{line:89,column:8},end:{line:89,column:29}},{start:{line:89,column:33},end:{line:89,column:69}}],line:89},6:{loc:{start:{line:97,column:4},end:{line:103,column:5}},type:"if",locations:[{start:{line:97,column:4},end:{line:103,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:97},7:{loc:{start:{line:105,column:4},end:{line:119,column:5}},type:"if",locations:[{start:{line:105,column:4},end:{line:119,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:105},8:{loc:{start:{line:113,column:6},end:{line:118,column:7}},type:"if",locations:[{start:{line:113,column:6},end:{line:118,column:7}},{start:{line:115,column:13},end:{line:118,column:7}}],line:113},9:{loc:{start:{line:113,column:10},end:{line:113,column:41}},type:"binary-expr",locations:[{start:{line:113,column:10},end:{line:113,column:13}},{start:{line:113,column:17},end:{line:113,column:41}}],line:113},10:{loc:{start:{line:116,column:8},end:{line:116,column:66}},type:"if",locations:[{start:{line:116,column:8},end:{line:116,column:66}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:116},11:{loc:{start:{line:117,column:8},end:{line:117,column:61}},type:"if",locations:[{start:{line:117,column:8},end:{line:117,column:61}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:117},12:{loc:{start:{line:128,column:4},end:{line:130,column:5}},type:"if",locations:[{start:{line:128,column:4},end:{line:130,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:128}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx"],names:[],mappings:"AAyKQ,SACQ,KADR;AAzKR,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,OAAO,gBAA8B;AACrC,SAAS,OAAwB,uBAAuB;AAExD,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,qBAAqB;AAC5B,OAAO;AA2BP,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,OAAO,eAAe;AAAA,IACpB,aAAa;AAAA,IACb,cAAc;AAAA,IACd,SAAS,CAAC,yBAAyB;AAAA,IACnC,UAAU,CAAC,SAAc;AACvB,aAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,IACzD;AAAA,IACA,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,IACf,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,aAAa,MAAM;AAAA,IAAC;AAAA,EACtB;AAAA,EACA;AAAA,EACA;AAAA,EACA,MAA6B;AAAA,EAC7B,oBAA6B;AAAA,EAE7B,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,YAAY;AACjB,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,MACX,aAAa;AAAA,MACb,WAAW,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,IAClD;AAAA,EACF;AAAA,EAEA,oBAAqB;AACnB,SAAK,OAAO,WAAW,KAAK,KAAM;AAAA,MAChC,OAAO,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,MAC5C,MAAM,KAAK,MAAM,QAAQ;AAAA,QACvB,MAAM;AAAA,MACR;AAAA,MACA,cAAc,KAAK,MAAM;AAAA,MACzB,SAAS;AAAA,MACT,OAAO;AAAA,MACP,gBAAgB;AAAA,MAChB,aAAa,KAAK,MAAM;AAAA,MACxB,MAAM,KAAK,MAAM,QAAQ;AAAA,QACvB,SAAS;AAAA,MACX;AAAA,MACA,eAAe;AAAA,MACf,SAAS,KAAK,MAAM;AAAA,MACpB,gBAAgB;AAAA,IAClB,CAAC;AAED,SAAK,KAAK,GAAG,UAAU,KAAK,QAAQ;AACpC,SAAK,KAAK,GAAG,SAAS,KAAK,OAAO;AAClC,SAAK,KAAK,GAAG,QAAQ,KAAK,MAAM;AAAA,EAClC;AAAA,EAEA,gBAAgB,MAAM;AACpB,SAAK,YAAY;AAAA,EACnB;AAAA,EAEA,UAAU,MAAM;AACd,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ;AAC3C,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,MACX,aAAc,KAAK,cAAc;AAAA,IACnC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,SAAK,YAAY;AACjB,QAAI,KAAK,MAAM,OAAQ,MAAK,MAAM,OAAO;AACzC,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,MACX,aAAa;AAAA,IACf,CAAC;AAAA,EACH;AAAA,EAEA,uBAAwB;AACtB,SAAK,KAAM,IAAI,UAAU,KAAK,QAAQ;AACtC,SAAK,KAAM,IAAI,SAAS,KAAK,OAAO;AACpC,SAAK,KAAM,IAAI,QAAQ,KAAK,MAAM;AAAA,EACpC;AAAA,EAEA,mBAAmB,WAA2B;AAC5C,QAAI,CAAC,KAAK,MAAM,aAAa,UAAU,UAAU,KAAK,MAAM,OAAO;AACjE,WAAK,oBAAoB;AACzB,WAAK,KAAM;AAAA,QACT,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,CAAC,OAAgB;AAC1B,QAAI,KAAK,mBAAmB;AAC1B,WAAK,oBAAoB;AACzB,WAAK,SAAS;AAAA,QACZ,WAAW,KAAK,KAAM,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,UAAM,UAAU,KAAK,KAAM,SAAS;AAEpC,QAAI,KAAK,MAAM,cAAc,SAAS;AACpC,UAAI,aAAa;AACjB,UAAI;AACF,sBAAc,KAAK,MAAM,OAAO;AAAA,MAClC,SAAQ,MAAM;AACZ,cAAM;AACN,gBAAQ,KAAK,IAAI;AAAA,MACnB;AAEA,UAAI,OAAO,KAAK,MAAM,eAAe;AACnC,aAAK,MAAM,cAAc;AAAA,MAC3B,OACK;AACH,YAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,WAAW;AACxD,YAAI,KAAK,MAAM,YAAa,MAAK,MAAM,YAAY;AAAA,MACrD;AAAA,IACF;AAEA,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,EAAC,YAAW,IAAI,KAAK;AAC3B,UAAM,QAAQ,CAAC;AACf,QAAI,KAAK,MAAM,WAAW;AACxB,YAAM,YAAY,KAAK,MAAM;AAAA,IAC/B;AAEA,WAAO,qBAAC,SAAI,WAAU,cAAa,eAAe,KAAK,eAAe,eAAY,QAChF;AAAA,0BAAC,SAAI,WAAW,WAAW,uBAAuB,EAAC,2BAA2B,YAAW,CAAC,GACxF,+BAAC,SAAM,GAAM;AAAA;AAAA,QACL,oBAAC,SAAI,iBAAG;AAAA,QAAM;AAAA,SACtB,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAW,WAAW,wBAAwB,KAAK,MAAM,SAAS;AAAA,UAClE,KAAK,CAAC,OAAO;AAAC,iBAAK,MAAM;AAAA,UAAE;AAAA,UAC3B;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1ca261de16bf1903ff881ab95fa4cd798e46aba9"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return yi=function(){return l},l}yi();class $se extends ni.Component{static defaultProps=(yi().s[0]++,{lineNumbers:!0,lineWrapping:!1,gutters:["CodeMirror-lint-markers"],getValue:e=>(yi().f[0]++,yi().s[1]++,dG(e,{indent:2,maxLength:40})),onFocus:()=>{yi().f[1]++},onBlur:()=>{yi().f[2]++},onJSONInvalid:()=>{yi().f[3]++},onJSONValid:()=>{yi().f[4]++}});_keyEvent;_doc;_el=(yi().s[2]++,null);_cancelNextChange=(yi().s[3]++,!1);constructor(e){yi().f[5]++,yi().s[4]++,super(e),yi().s[5]++,this._keyEvent="keyboard",yi().s[6]++,this.state={isEditing:!1,showMessage:!1,prevValue:this.props.getValue(this.props.layer)}}componentDidMount(){yi().f[6]++,yi().s[7]++,this._doc=tp(this._el,{value:this.props.getValue(this.props.layer),mode:(yi().b[0][0]++,this.props.mode||(yi().b[0][1]++,{name:"mgl"})),lineWrapping:this.props.lineWrapping,tabSize:2,theme:"maputnik",viewportMargin:1/0,lineNumbers:this.props.lineNumbers,lint:(yi().b[1][0]++,this.props.lint||(yi().b[1][1]++,{context:"layer"})),matchBrackets:!0,gutters:this.props.gutters,scrollbarStyle:"null"}),yi().s[8]++,this._doc.on("change",this.onChange),yi().s[9]++,this._doc.on("focus",this.onFocus),yi().s[10]++,this._doc.on("blur",this.onBlur)}onPointerDown=(yi().s[11]++,()=>{yi().f[7]++,yi().s[12]++,this._keyEvent="pointer"});onFocus=(yi().s[13]++,()=>{yi().f[8]++,yi().s[14]++,this.props.onFocus?(yi().b[2][0]++,yi().s[15]++,this.props.onFocus()):yi().b[2][1]++,yi().s[16]++,this.setState({isEditing:!0,showMessage:this._keyEvent==="keyboard"})});onBlur=(yi().s[17]++,()=>{yi().f[9]++,yi().s[18]++,this._keyEvent="keyboard",yi().s[19]++,this.props.onBlur?(yi().b[3][0]++,yi().s[20]++,this.props.onBlur()):yi().b[3][1]++,yi().s[21]++,this.setState({isEditing:!1,showMessage:!1})});componentWillUnMount(){yi().f[10]++,yi().s[22]++,this._doc.off("change",this.onChange),yi().s[23]++,this._doc.off("focus",this.onFocus),yi().s[24]++,this._doc.off("blur",this.onBlur)}componentDidUpdate(e){yi().f[11]++,yi().s[25]++,yi().b[5][0]++,!this.state.isEditing&&(yi().b[5][1]++,e.layer!==this.props.layer)?(yi().b[4][0]++,yi().s[26]++,this._cancelNextChange=!0,yi().s[27]++,this._doc.setValue(this.props.getValue(this.props.layer))):yi().b[4][1]++}onChange=(yi().s[28]++,e=>{if(yi().f[12]++,yi().s[29]++,this._cancelNextChange){yi().b[6][0]++,yi().s[30]++,this._cancelNextChange=!1,yi().s[31]++,this.setState({prevValue:this._doc.getValue()}),yi().s[32]++;return}else yi().b[6][1]++;const t=(yi().s[33]++,this._doc.getValue());if(yi().s[34]++,this.state.prevValue!==t){yi().b[7][0]++;let i,r;yi().s[35]++;try{yi().s[36]++,i=JSON.parse(t)}catch(a){yi().s[37]++,r=a,yi().s[38]++,console.warn(a)}yi().s[39]++,yi().b[9][0]++,r&&(yi().b[9][1]++,this.props.onJSONInvalid)?(yi().b[8][0]++,yi().s[40]++,this.props.onJSONInvalid()):(yi().b[8][1]++,yi().s[41]++,this.props.onChange?(yi().b[10][0]++,yi().s[42]++,this.props.onChange(i)):yi().b[10][1]++,yi().s[43]++,this.props.onJSONValid?(yi().b[11][0]++,yi().s[44]++,this.props.onJSONValid()):yi().b[11][1]++)}else yi().b[7][1]++;yi().s[45]++,this.setState({prevValue:t})});render(){yi().f[13]++;const e=(yi().s[46]++,this.props.t),{showMessage:t}=(yi().s[47]++,this.state),i=(yi().s[48]++,{});return yi().s[49]++,this.props.maxHeight?(yi().b[12][0]++,yi().s[50]++,i.maxHeight=this.props.maxHeight):yi().b[12][1]++,yi().s[51]++,ce.jsxs("div",{className:"JSONEditor",onPointerDown:this.onPointerDown,"aria-hidden":"true",children:[ce.jsx("div",{className:e0("JSONEditor__message",{"JSONEditor__message--on":t}),children:ce.jsxs(O1,{t:e,children:["Press ",ce.jsx("kbd",{children:"ESC"})," to lose focus"]})}),ce.jsx("div",{className:e0("codemirror-container",this.props.className),ref:r=>{yi().f[14]++,yi().s[52]++,this._el=r},style:i})]})}}const Zse=(yi().s[53]++,ss()($se));function z_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",e="ba883449bc5c5bdef8990a340e3c3a506f463d35",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",statementMap:{0:{start:{line:3,column:18},end:{line:5,column:1}},1:{start:{line:4,column:2},end:{line:4,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:3,column:18},end:{line:3,column:19}},loc:{start:{line:3,column:29},end:{line:5,column:1}},line:3}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx"],names:[],mappings:"AAOS;AAPT,OAAO,eAAiC;AAMxC,MAAM,YAAsC,CAAC,UAAU;AACrD,SAAO,oBAAC,aAAW,GAAG,OAAO;AAC/B;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ba883449bc5c5bdef8990a340e3c3a506f463d35"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return z_=function(){return l},l}z_();z_().s[0]++;const T8=n=>(z_().f[0]++,z_().s[1]++,ce.jsx(Zse,{...n}));var N_="M12.42,5.29C11.32,5.19 10.35,6 10.25,7.11L10,10H12.82V12H9.82L9.38,17.07C9.18,19.27 7.24,20.9 5.04,20.7C3.79,20.59 2.66,19.9 2,18.83L3.5,17.33C3.83,18.38 4.96,18.97 6,18.63C6.78,18.39 7.33,17.7 7.4,16.89L7.82,12H4.82V10H8L8.27,6.93C8.46,4.73 10.39,3.1 12.6,3.28C13.86,3.39 15,4.09 15.66,5.17L14.16,6.67C13.91,5.9 13.23,5.36 12.42,5.29M22,13.65L20.59,12.24L17.76,15.07L14.93,12.24L13.5,13.65L16.35,16.5L13.5,19.31L14.93,20.72L17.76,17.89L20.59,20.72L22,19.31L19.17,16.5L22,13.65Z",Xse="M7,10L12,15L17,10H7Z",Jse="M7,15L12,10L17,15H7Z",k8="M22,10A2,2 0 0,1 20,12H4A2,2 0 0,1 2,10V3H4V5H8V3H10V5H14V3H16V5H20V3H22V10M4,10H8V7H4V10M10,10H14V7H10V10M20,10V7H16V10H20M11,14H13V17H16V19H13V22H11V19H8V17H11V14Z";function Lg(){var n="/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",e="99dad9631fbee5fc23be2dafaf7c7eea92c38eac",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",statementMap:{0:{start:{line:2,column:34},end:{line:2,column:56}},1:{start:{line:3,column:28},end:{line:3,column:41}},2:{start:{line:4,column:30},end:{line:4,column:123}},3:{start:{line:4,column:88},end:{line:4,column:122}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:80},end:{line:4,column:81}},loc:{start:{line:4,column:88},end:{line:4,column:122}},line:4}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/filterops.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEZ,aAAM,qBAAqB,CAAC,OAAO,OAAO,MAAM;AAChD,aAAM,eAAe,CAAC,MAAM,KAAK;AACjC,aAAM,iBAAiB,OAC3B,KAAK,OAAO,gBAAgB,MAAM,EAClC,OAAO,QAAM,mBAAmB,QAAQ,EAAE,IAAI,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"99dad9631fbee5fc23be2dafaf7c7eea92c38eac"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Lg=function(){return l},l}Lg();const D8=(Lg().s[0]++,["all","any","none"]);Lg().s[1]++;const ele=(Lg().s[2]++,Object.keys(da.filter_operator.values).filter(n=>(Lg().f[0]++,Lg().s[3]++,D8.indexOf(n)<0)));function _r(){var n="/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",e="d18e3b448d830733ac17bcacd45f7c08e364baa2",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",statementMap:{0:{start:{line:8,column:2},end:{line:8,column:25}},1:{start:{line:8,column:16},end:{line:8,column:25}},2:{start:{line:9,column:2},end:{line:9,column:25}},3:{start:{line:9,column:16},end:{line:9,column:25}},4:{start:{line:10,column:2},end:{line:10,column:23}},5:{start:{line:13,column:19},end:{line:13,column:40}},6:{start:{line:14,column:2},end:{line:16,column:3}},7:{start:{line:15,column:4},end:{line:15,column:13}},8:{start:{line:17,column:2},end:{line:23,column:3}},9:{start:{line:18,column:4},end:{line:18,column:16}},10:{start:{line:19,column:9},end:{line:23,column:3}},11:{start:{line:20,column:4},end:{line:20,column:17}},12:{start:{line:22,column:4},end:{line:22,column:13}},13:{start:{line:26,column:2},end:{line:26,column:21}},14:{start:{line:27,column:2},end:{line:27,column:22}},15:{start:{line:28,column:2},end:{line:28,column:11}},16:{start:{line:31,column:24},end:{line:33,column:3}},17:{start:{line:35,column:20},end:{line:35,column:76}},18:{start:{line:36,column:4},end:{line:40,column:5}},19:{start:{line:37,column:6},end:{line:37,column:43}},20:{start:{line:38,column:11},end:{line:40,column:5}},21:{start:{line:39,column:6},end:{line:39,column:47}},22:{start:{line:41,column:4},end:{line:41,column:35}},23:{start:{line:44,column:14},end:{line:44,column:31}},24:{start:{line:45,column:21},end:{line:45,column:25}},25:{start:{line:46,column:25},end:{line:46,column:29}},26:{start:{line:47,column:23},end:{line:47,column:33}},27:{start:{line:48,column:4},end:{line:75,column:9}},28:{start:{line:54,column:72},end:{line:54,column:92}},29:{start:{line:55,column:41},end:{line:55,column:104}},30:{start:{line:63,column:37},end:{line:63,column:100}},31:{start:{line:72,column:27},end:{line:72,column:89}}},fnMap:{0:{name:"tryParseInt",decl:{start:{line:7,column:9},end:{line:7,column:20}},loc:{start:{line:7,column:24},end:{line:11,column:1}},line:7},1:{name:"tryParseBool",decl:{start:{line:12,column:9},end:{line:12,column:21}},loc:{start:{line:12,column:25},end:{line:24,column:1}},line:12},2:{name:"parseFilter",decl:{start:{line:25,column:9},end:{line:25,column:20}},loc:{start:{line:25,column:24},end:{line:29,column:1}},line:25},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:58},end:{line:42,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:11},end:{line:76,column:3}},line:43},5:{name:"(anonymous_5)",decl:{start:{line:54,column:58},end:{line:54,column:59}},loc:{start:{line:54,column:72},end:{line:54,column:92}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:55,column:20},end:{line:55,column:21}},loc:{start:{line:55,column:41},end:{line:55,column:104}},line:55},7:{name:"(anonymous_7)",decl:{start:{line:63,column:20},end:{line:63,column:21}},loc:{start:{line:63,column:37},end:{line:63,column:100}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:72,column:20},end:{line:72,column:21}},loc:{start:{line:72,column:27},end:{line:72,column:89}},line:72}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:25}},type:"if",locations:[{start:{line:8,column:2},end:{line:8,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:9,column:25}},type:"if",locations:[{start:{line:9,column:2},end:{line:9,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},2:{loc:{start:{line:14,column:2},end:{line:16,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:16,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:14},3:{loc:{start:{line:17,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:23,column:3}},{start:{line:19,column:9},end:{line:23,column:3}}],line:17},4:{loc:{start:{line:19,column:9},end:{line:23,column:3}},type:"if",locations:[{start:{line:19,column:9},end:{line:23,column:3}},{start:{line:21,column:9},end:{line:23,column:3}}],line:19},5:{loc:{start:{line:36,column:4},end:{line:40,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:40,column:5}},{start:{line:38,column:11},end:{line:40,column:5}}],line:36},6:{loc:{start:{line:36,column:8},end:{line:36,column:49}},type:"binary-expr",locations:[{start:{line:36,column:8},end:{line:36,column:26}},{start:{line:36,column:30},end:{line:36,column:49}}],line:36},7:{loc:{start:{line:38,column:11},end:{line:40,column:5}},type:"if",locations:[{start:{line:38,column:11},end:{line:40,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},8:{loc:{start:{line:67,column:6},end:{line:74,column:10}},type:"binary-expr",locations:[{start:{line:67,column:6},end:{line:67,column:27}},{start:{line:67,column:47},end:{line:74,column:10}}],line:67}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx"],names:[],mappings:"AA+DW,SAEH,KAFG;AA/DX,OAAO,WAAW;AAElB,SAAQ,sBAAqB;AAC7B,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AAExB,SAAS,YAAY,GAAoB;AACvC,MAAI,MAAM,GAAI,QAAO;AACrB,MAAI,MAAM,CAAW,EAAG,QAAO;AAC/B,SAAO,WAAW,CAAW;AAC/B;AAEA,SAAS,aAAa,GAAqB;AACzC,QAAM,WAAY,OAAO,MAAO;AAChC,MAAG,CAAC,UAAU;AACZ,WAAO;AAAA,EACT;AAEA,MAAG,EAAE,MAAM,cAAc,GAAG;AAC1B,WAAO;AAAA,EACT,WACQ,EAAE,MAAM,eAAe,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,YAAY,GAA8B;AACjD,MAAI,YAAY,CAAQ;AACxB,MAAI,aAAa,CAAQ;AACzB,SAAO;AACT;AAQA,qBAAqB,2BAA2B,MAAM,UAAmC;AAAA,EACvF,OAAO,eAAe;AAAA,IACpB,YAAY,CAAC;AAAA,EACf;AAAA,EAEA,oBAAoB,UAAkB,cAAsB,YAAsB;AAChF,QAAI,YAAY,CAAC,UAAU,cAAc,GAAG,WAAW,IAAI,WAAW,CAAC;AACvE,QAAG,aAAa,SAAS,aAAa,QAAQ;AAC5C,kBAAY,CAAC,UAAU,YAAY;AAAA,IACrC,WAAU,WAAW,WAAW,GAAG;AACjC,kBAAY,CAAC,UAAU,cAAc,EAAE;AAAA,IACzC;AACA,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,WAAW,EAAE,CAAC;AACpB,UAAM,eAAe,EAAE,CAAC;AACxB,UAAM,aAAa,EAAE,MAAM,CAAC;AAE5B,WAAO,qBAAC,SAAI,WAAU,iCACpB;AAAA,0BAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS,OAAO,KAAK,KAAK,MAAM,UAAW,EAAE,IAAI,cAAY,CAAC,UAAU,QAAQ,CAAC;AAAA,UACjF,UAAU,CAAC,oBAA4B,KAAK,oBAAoB,UAAU,iBAAiB,UAAU;AAAA;AAAA,MACvG,GACF;AAAA,MACA,oBAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,UAAU,CAAC,gBAAwB,KAAK,oBAAoB,aAAa,cAAc,UAAU;AAAA,UACjG,SAAS;AAAA;AAAA,MACX,GACF;AAAA,MACC,WAAW,SAAS,KACrB,oBAAC,SAAI,WAAU,+BACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO,WAAW,KAAK,GAAG;AAAA,UAC1B,UAAU,CAAC,MAAc,KAAK,oBAAoB,UAAU,cAAc,EAAE,MAAM,GAAG,CAAC;AAAA;AAAA,MACxF,GACF;AAAA,OAEF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d18e3b448d830733ac17bcacd45f7c08e364baa2"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return _r=function(){return l},l}_r();function tle(n){return _r().f[0]++,_r().s[0]++,n===""?(_r().b[0][0]++,_r().s[1]++,n):(_r().b[0][1]++,_r().s[2]++,isNaN(n)?(_r().b[1][0]++,_r().s[3]++,n):(_r().b[1][1]++,_r().s[4]++,parseFloat(n)))}function nle(n){_r().f[1]++;const e=(_r().s[5]++,typeof n=="string");if(_r().s[6]++,e)_r().b[2][1]++;else return _r().b[2][0]++,_r().s[7]++,n;return _r().s[8]++,n.match(/^\s*true\s*$/)?(_r().b[3][0]++,_r().s[9]++,!0):(_r().b[3][1]++,_r().s[10]++,n.match(/^\s*false\s*$/)?(_r().b[4][0]++,_r().s[11]++,!1):(_r().b[4][1]++,_r().s[12]++,n))}function ile(n){return _r().f[2]++,_r().s[13]++,n=tle(n),_r().s[14]++,n=nle(n),_r().s[15]++,n}class rle extends ni.Component{static defaultProps=(_r().s[16]++,{properties:{}});onFilterPartChanged(e,t,i){_r().f[3]++;let r=(_r().s[17]++,[e,t,...i.map(ile)]);_r().s[18]++,_r().b[6][0]++,e==="has"||(_r().b[6][1]++,e==="!has")?(_r().b[5][0]++,_r().s[19]++,r=[e,t]):(_r().b[5][1]++,_r().s[20]++,i.length===0?(_r().b[7][0]++,_r().s[21]++,r=[e,t,""]):_r().b[7][1]++),_r().s[22]++,this.props.onChange(r)}render(){_r().f[4]++;const e=(_r().s[23]++,this.props.filter),t=(_r().s[24]++,e[0]),i=(_r().s[25]++,e[1]),r=(_r().s[26]++,e.slice(2));return _r().s[27]++,ce.jsxs("div",{className:"maputnik-filter-editor-single",children:[ce.jsx("div",{className:"maputnik-filter-editor-property",children:ce.jsx(Mb,{"aria-label":"key",value:i,options:Object.keys(this.props.properties).map(a=>(_r().f[5]++,_r().s[28]++,[a,a])),onChange:a=>(_r().f[6]++,_r().s[29]++,this.onFilterPartChanged(t,a,r))})}),ce.jsx("div",{className:"maputnik-filter-editor-operator",children:ce.jsx(ey,{"aria-label":"function",value:t,onChange:a=>(_r().f[7]++,_r().s[30]++,this.onFilterPartChanged(a,i,r)),options:ele})}),(_r().b[8][0]++,r.length>0&&(_r().b[8][1]++,ce.jsx("div",{className:"maputnik-filter-editor-args",children:ce.jsx(ap,{"aria-label":"value",value:r.join(","),onChange:a=>(_r().f[8]++,_r().s[31]++,this.onFilterPartChanged(t,i,a.split(",")))})})))]})}}function _v(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",e="13a2e2db8b749f303c3bce9d46fec729506d3ee2",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:20,column:9}},2:{start:{line:23,column:26},end:{line:23,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:21,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx"],names:[],mappings:"AAYW,SACL,KADK;AAZX,OAAO,WAAkC;AACzC,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAMjD,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,gCACpB;AAAA,0BAAC,SAAI,WAAU,wCACZ,eAAK,MAAM,UACd;AAAA,MACA,oBAAC,SAAI,WAAU,uCACb;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,qBAAqB;AAAA,UAE9B,8BAAC,YAAS;AAAA;AAAA,MACZ,GACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"13a2e2db8b749f303c3bce9d46fec729506d3ee2"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return _v=function(){return l},l}_v();class ole extends ni.Component{render(){_v().f[0]++;const e=(_v().s[0]++,this.props.t);return _v().s[1]++,ce.jsxs("div",{className:"maputnik-filter-editor-block",children:[ce.jsx("div",{className:"maputnik-filter-editor-block-content",children:this.props.children}),ce.jsx("div",{className:"maputnik-filter-editor-block-action",children:ce.jsx(ml,{className:"maputnik-icon-button",onClick:this.props.onDelete,title:e("Delete filter block"),children:ce.jsx(Wv,{})})})]})}}const ale=(_v().s[2]++,ss()(ole));var jM,mk;function sle(){if(mk)return jM;mk=1;var n="[object Symbol]",e="\\ud800-\\udfff",t="\\u0300-\\u036f\\ufe20-\\ufe23",i="\\u20d0-\\u20f0",r="\\ufe0e\\ufe0f",a="["+e+"]",l="["+t+i+"]",o="\\ud83c[\\udffb-\\udfff]",m="(?:"+l+"|"+o+")",C="[^"+e+"]",S="(?:\\ud83c[\\udde6-\\uddff]){2}",O="[\\ud800-\\udbff][\\udc00-\\udfff]",U="\\u200d",K=m+"?",z="["+r+"]?",j="(?:"+U+"(?:"+[C,S,O].join("|")+")"+z+K+")*",Q=z+K+j,ee="(?:"+[C+l+"?",l,S,O,a].join("|")+")",V=RegExp(o+"(?="+o+")|"+ee+Q,"g"),ae=RegExp("["+U+e+t+i+r+"]"),ne=typeof window=="object"&&window&&window.Object===Object&&window,Z=typeof self=="object"&&self&&self.Object===Object&&self,oe=ne||Z||Function("return this")();function W(pt){return pt.split("")}function ue(pt){return ae.test(pt)}function ge(pt){return ue(pt)?ye(pt):W(pt)}function ye(pt){return pt.match(V)||[]}var Me=Object.prototype,Be=Me.toString,we=oe.Symbol,qe=we?we.prototype:void 0,xe=qe?qe.toString:void 0;function ze(pt,St,Rt){var Le=-1,Pe=pt.length;St<0&&(St=-St>Pe?0:Pe+St),Rt=Rt>Pe?Pe:Rt,Rt<0&&(Rt+=Pe),Pe=St>Rt?0:Rt-St>>>0,St>>>=0;for(var Re=Array(Pe);++Le<Pe;)Re[Le]=pt[Le+St];return Re}function ot(pt){if(typeof pt=="string")return pt;if(Ne(pt))return xe?xe.call(pt):"";var St=pt+"";return St=="0"&&1/pt==-1/0?"-0":St}function yt(pt,St,Rt){var Le=pt.length;return Rt=Rt===void 0?Le:Rt,!St&&Rt>=Le?pt:ze(pt,St,Rt)}function nt(pt){return function(St){St=tt(St);var Rt=ue(St)?ge(St):void 0,Le=Rt?Rt[0]:St.charAt(0),Pe=Rt?yt(Rt,1).join(""):St.slice(1);return Le[pt]()+Pe}}function be(pt){return!!pt&&typeof pt=="object"}function Ne(pt){return typeof pt=="symbol"||be(pt)&&Be.call(pt)==n}function tt(pt){return pt==null?"":ot(pt)}function lt(pt){return It(tt(pt).toLowerCase())}var It=nt("toUpperCase");return jM=lt,jM}var lle=sle();const R8=WA(lle);function Up(){var n="/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",e="8b86d889d32efa9a6cc667b2fa3579002dfb58fc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",statementMap:{0:{start:{line:4,column:16},end:{line:4,column:36}},1:{start:{line:5,column:2},end:{line:9,column:3}},2:{start:{line:6,column:4},end:{line:6,column:52}},3:{start:{line:8,column:4},end:{line:8,column:22}},4:{start:{line:10,column:2},end:{line:10,column:27}}},fnMap:{0:{name:"labelFromFieldName",decl:{start:{line:2,column:24},end:{line:2,column:42}},loc:{start:{line:2,column:54},end:{line:11,column:1}},line:2}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:9,column:3}},{start:{line:7,column:9},end:{line:9,column:3}}],line:5}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,wBAAwB,mBAAmB,WAAmB;AAC5D,MAAI;AACJ,QAAM,QAAQ,UAAU,MAAM,GAAG;AACjC,MAAI,MAAM,SAAS,GAAG;AACpB,YAAQ,UAAU,MAAM,GAAG,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG;AAAA,EAChD,OACK;AACH,YAAQ;AAAA,EACV;AACA,SAAO,WAAW,KAAK;AACzB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b86d889d32efa9a6cc667b2fa3579002dfb58fc"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Up=function(){return l},l}Up();function F2(n){Up().f[0]++;let e;const t=(Up().s[0]++,n.split("-"));return Up().s[1]++,t.length>1?(Up().b[0][0]++,Up().s[2]++,e=n.split("-").slice(1).join(" ")):(Up().b[0][1]++,Up().s[3]++,e=n),Up().s[4]++,R8(e)}function xo(){var n="/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",e="550aede3b5713892add5bda71ec153770e1b1129",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",statementMap:{0:{start:{line:11,column:24},end:{line:17,column:3}},1:{start:{line:19,column:4},end:{line:19,column:17}},2:{start:{line:20,column:4},end:{line:22,column:6}},3:{start:{line:24,column:18},end:{line:28,column:3}},4:{start:{line:25,column:4},end:{line:27,column:7}},5:{start:{line:29,column:16},end:{line:33,column:3}},6:{start:{line:30,column:4},end:{line:32,column:7}},7:{start:{line:35,column:64},end:{line:35,column:74}},8:{start:{line:36,column:26},end:{line:36,column:36}},9:{start:{line:37,column:25},end:{line:37,column:52}},10:{start:{line:38,column:42},end:{line:60,column:8}},11:{start:{line:61,column:21},end:{line:61,column:83}},12:{start:{line:62,column:23},end:{line:62,column:39}},13:{start:{line:63,column:26},end:{line:63,column:40}},14:{start:{line:64,column:24},end:{line:64,column:26}},15:{start:{line:66,column:6},end:{line:66,column:65}},16:{start:{line:68,column:4},end:{line:79,column:5}},17:{start:{line:69,column:6},end:{line:69,column:52}},18:{start:{line:71,column:6},end:{line:75,column:9}},19:{start:{line:72,column:8},end:{line:72,column:45}},20:{start:{line:74,column:8},end:{line:74,column:39}},21:{start:{line:76,column:6},end:{line:78,column:7}},22:{start:{line:77,column:8},end:{line:77,column:37}},23:{start:{line:80,column:4},end:{line:110,column:6}},24:{start:{line:113,column:27},end:{line:113,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:13},end:{line:13,column:14}},loc:{start:{line:13,column:19},end:{line:14,column:5}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:15,column:12},end:{line:15,column:13}},loc:{start:{line:15,column:18},end:{line:16,column:5}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:21},end:{line:23,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:24,column:18},end:{line:24,column:19}},loc:{start:{line:24,column:28},end:{line:28,column:3}},line:24},4:{name:"(anonymous_4)",decl:{start:{line:29,column:16},end:{line:29,column:17}},loc:{start:{line:29,column:22},end:{line:33,column:3}},line:29},5:{name:"(anonymous_5)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:11},end:{line:111,column:3}},line:34},6:{name:"getValue",decl:{start:{line:65,column:13},end:{line:65,column:21}},loc:{start:{line:65,column:28},end:{line:67,column:5}},line:65},7:{name:"(anonymous_7)",decl:{start:{line:71,column:36},end:{line:71,column:37}},loc:{start:{line:71,column:55},end:{line:73,column:7}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:73,column:17},end:{line:73,column:18}},loc:{start:{line:73,column:36},end:{line:75,column:7}},line:73}},branchMap:{0:{loc:{start:{line:37,column:25},end:{line:37,column:52}},type:"cond-expr",locations:[{start:{line:37,column:35},end:{line:37,column:45}},{start:{line:37,column:48},end:{line:37,column:52}}],line:37},1:{loc:{start:{line:39,column:6},end:{line:49,column:7}},type:"binary-expr",locations:[{start:{line:39,column:6},end:{line:39,column:23}},{start:{line:39,column:43},end:{line:49,column:7}}],line:39},2:{loc:{start:{line:61,column:21},end:{line:61,column:83}},type:"cond-expr",locations:[{start:{line:61,column:44},end:{line:61,column:53}},{start:{line:61,column:56},end:{line:61,column:83}}],line:61},3:{loc:{start:{line:68,column:4},end:{line:79,column:5}},type:"if",locations:[{start:{line:68,column:4},end:{line:79,column:5}},{start:{line:70,column:11},end:{line:79,column:5}}],line:68},4:{loc:{start:{line:76,column:6},end:{line:78,column:7}},type:"if",locations:[{start:{line:76,column:6},end:{line:78,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx"],names:[],mappings:"AA6DM,mBASM,KATN;AA7DN,OAAO,WAAW;AAClB,SAAQ,UAAU,cAAa;AAC/B,OAAO,qBAAqB;AAC5B,SAA0B,uBAAuB;AAEjD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,wBAAwB;AAC/B,OAAO,eAAe;AAqBtB,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,IACT,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,EACjB;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,SAAgB;AAC/B,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,MAAM;AAClB,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,QAAQ,WAAW,WAAW,OAAO,QAAO,IAAI,KAAK;AAC/D,UAAM,EAAC,UAAS,IAAI,KAAK;AACzB,UAAM,eAAe,UAAU,CAAC,QAAQ,IAAI;AAE5C,UAAM,gBACJ,iCACG;AAAA,WAAK,MAAM,UACV;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,UAAU;AAAA,UACV,WAAU;AAAA,UACV,OAAO,EAAE,wBAAwB;AAAA,UAEjC,8BAAC,UAAO;AAAA;AAAA,QANJ;AAAA,MAON;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,WAAU;AAAA,UACV,OAAO,EAAE,mBAAmB;AAAA,UAE5B,8BAAC,YAAS;AAAA;AAAA,QALN;AAAA,MAMN;AAAA,OACF;AAGF,UAAM,WAAW,cAAc,SAAY,YAAY,GAAG,SAAS,IAAI,SAAS;AAEhF,UAAM,aAAa,OAAQ,QAAQ;AACnC,UAAM,gBAAgB,GAAG,QAAQ;AACjC,UAAM,cAAc,CAAC;AAErB,aAAS,SAAS,MAAW;AAC3B,aAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,IACzD;AAEA,QAAI,WAAW;AACb,kBAAY,KAAK,EAAC,SAAS,eAAc,CAAC;AAAA,IAC5C,OACK;AACH,aAAO,QAAQ,MAAO,EACnB,OAAO,CAAC,CAAC,KAAK,MAAM,MAAM;AACzB,eAAO,IAAI,WAAW,aAAa;AAAA,MACrC,CAAC,EACA,QAAQ,CAAC,CAAC,MAAM,KAAK,MAAM;AAC1B,eAAO,YAAY,KAAK,KAAK;AAAA,MAC/B,CAAC;AAEH,UAAI,YAAY;AACd,oBAAY,KAAK,UAAU;AAAA,MAC7B;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QAEN,OAAO;AAAA,QACP,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,EAAE,mBAAmB,KAAK,MAAM,SAAS,CAAC;AAAA,QACjD,QAAQ;AAAA,QACR,UAAU;AAAA,QAEV;AAAA,UAAC;AAAA;AAAA,YACC,MAAM,EAAC,MAAM,MAAK;AAAA,YAClB,MAAM;AAAA,cACJ,SAAS;AAAA,cACT,MAAM,KAAK,MAAM;AAAA,YACnB;AAAA,YACA,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,QAAQ,KAAK,MAAM;AAAA,YACnB,eAAe,KAAK;AAAA,YACpB,aAAa,KAAK;AAAA,YAClB,OAAO;AAAA,YACP,aAAa;AAAA,YACb,WAAW;AAAA,YACX,cAAc;AAAA,YACd;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AACvE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"550aede3b5713892add5bda71ec153770e1b1129"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return xo=function(){return l},l}xo();class Ale extends ni.Component{static defaultProps=(xo().s[0]++,{errors:{},onFocus:()=>{xo().f[0]++},onBlur:()=>{xo().f[1]++}});constructor(e){xo().f[2]++,xo().s[1]++,super(e),xo().s[2]++,this.state={jsonError:!1}}onJSONInvalid=(xo().s[3]++,e=>{xo().f[3]++,xo().s[4]++,this.setState({jsonError:!0})});onJSONValid=(xo().s[5]++,()=>{xo().f[4]++,xo().s[6]++,this.setState({jsonError:!1})});render(){xo().f[5]++;const{t:e,errors:t,fieldName:i,fieldType:r,value:a,canUndo:l}=(xo().s[7]++,this.props),{jsonError:o}=(xo().s[8]++,this.state),m=(xo().s[9]++,l?(xo().b[0][0]++,!l()):(xo().b[0][1]++,!0)),C=(xo().s[10]++,ce.jsxs(ce.Fragment,{children:[(xo().b[1][0]++,this.props.onUndo&&(xo().b[1][1]++,ce.jsx(ml,{onClick:this.props.onUndo,disabled:m,className:"maputnik-delete-stop",title:e("Revert from expression"),children:ce.jsx(n$,{})},"undo_action"))),ce.jsx(ml,{onClick:this.props.onDelete,className:"maputnik-delete-stop",title:e("Delete expression"),children:ce.jsx(Wv,{})},"delete_action")]})),S=(xo().s[11]++,r===void 0?(xo().b[2][0]++,i):(xo().b[2][1]++,`${r}.${i}`)),O=(xo().s[12]++,t[S]),U=(xo().s[13]++,`${S}[`),K=(xo().s[14]++,[]);function z(j){return xo().f[6]++,xo().s[15]++,dG(j,{indent:2,maxLength:38})}return xo().s[16]++,o?(xo().b[3][0]++,xo().s[17]++,K.push({message:"Invalid JSON"})):(xo().b[3][1]++,xo().s[18]++,Object.entries(t).filter(([j,Q])=>(xo().f[7]++,xo().s[19]++,j.startsWith(U))).forEach(([j,Q])=>(xo().f[8]++,xo().s[20]++,K.push(Q))),xo().s[21]++,O?(xo().b[4][0]++,xo().s[22]++,K.push(O)):xo().b[4][1]++),xo().s[23]++,ce.jsx(Ks,{error:K,fieldSpec:this.props.fieldSpec,label:e(F2(this.props.fieldName)),action:C,wideMode:!0,children:ce.jsx(T8,{mode:{name:"mgl"},lint:{context:"expression",spec:this.props.fieldSpec},className:"maputnik-expression-editor",onFocus:this.props.onFocus,onBlur:this.props.onBlur,onJSONInvalid:this.onJSONInvalid,onJSONValid:this.onJSONValid,layer:a,lineNumbers:!1,maxHeight:200,lineWrapping:!0,getValue:z,onChange:this.props.onChange})})}}const mG=(xo().s[24]++,ss()(Ale));function Pn(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",e="2450f82df6194fa7ce5a592b459b4ddcbdcc401f",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",statementMap:{0:{start:{line:17,column:17},end:{line:17,column:40}},1:{start:{line:18,column:2},end:{line:20,column:3}},2:{start:{line:19,column:4},end:{line:19,column:18}},3:{start:{line:21,column:20},end:{line:21,column:29}},4:{start:{line:22,column:16},end:{line:22,column:31}},5:{start:{line:23,column:2},end:{line:26,column:3}},6:{start:{line:24,column:4},end:{line:24,column:24}},7:{start:{line:25,column:4},end:{line:25,column:32}},8:{start:{line:27,column:2},end:{line:27,column:35}},9:{start:{line:30,column:2},end:{line:30,column:65}},10:{start:{line:33,column:2},end:{line:54,column:4}},11:{start:{line:56,column:19},end:{line:60,column:1}},12:{start:{line:62,column:2},end:{line:64,column:3}},13:{start:{line:63,column:4},end:{line:63,column:16}},14:{start:{line:65,column:21},end:{line:65,column:42}},15:{start:{line:66,column:2},end:{line:66,column:38}},16:{start:{line:69,column:2},end:{line:69,column:52}},17:{start:{line:72,column:2},end:{line:74,column:3}},18:{start:{line:73,column:4},end:{line:73,column:97}},19:{start:{line:73,column:38},end:{line:73,column:59}},20:{start:{line:73,column:75},end:{line:73,column:84}},21:{start:{line:75,column:2},end:{line:75,column:15}},22:{start:{line:78,column:24},end:{line:80,column:3}},23:{start:{line:82,column:4},end:{line:82,column:17}},24:{start:{line:83,column:4},end:{line:86,column:6}},25:{start:{line:90,column:22},end:{line:90,column:58}},26:{start:{line:91,column:4},end:{line:91,column:35}},27:{start:{line:92,column:4},end:{line:92,column:35}},28:{start:{line:95,column:22},end:{line:95,column:58}},29:{start:{line:96,column:4},end:{line:96,column:39}},30:{start:{line:97,column:4},end:{line:97,column:35}},31:{start:{line:99,column:18},end:{line:103,column:3}},32:{start:{line:100,column:26},end:{line:100,column:62}},33:{start:{line:101,column:4},end:{line:101,column:43}},34:{start:{line:102,column:4},end:{line:102,column:39}},35:{start:{line:104,column:16},end:{line:108,column:3}},36:{start:{line:105,column:4},end:{line:107,column:7}},37:{start:{line:109,column:15},end:{line:113,column:3}},38:{start:{line:110,column:4},end:{line:112,column:7}},39:{start:{line:114,column:19},end:{line:120,column:3}},40:{start:{line:115,column:19},end:{line:115,column:46}},41:{start:{line:116,column:4},end:{line:116,column:47}},42:{start:{line:117,column:4},end:{line:119,column:7}},43:{start:{line:122,column:32},end:{line:122,column:75}},44:{start:{line:123,column:4},end:{line:136,column:5}},45:{start:{line:124,column:6},end:{line:127,column:8}},46:{start:{line:128,column:11},end:{line:136,column:5}},47:{start:{line:129,column:6},end:{line:131,column:8}},48:{start:{line:133,column:6},end:{line:135,column:8}},49:{start:{line:139,column:26},end:{line:139,column:36}},50:{start:{line:140,column:36},end:{line:140,column:46}},51:{start:{line:141,column:22},end:{line:143,column:5}},52:{start:{line:144,column:26},end:{line:144,column:33}},53:{start:{line:145,column:36},end:{line:145,column:112}},54:{start:{line:146,column:4},end:{line:271,column:5}},55:{start:{line:147,column:6},end:{line:160,column:11}},56:{start:{line:161,column:11},end:{line:271,column:5}},57:{start:{line:162,column:21},end:{line:162,column:48}},58:{start:{line:163,column:26},end:{line:163,column:35}},59:{start:{line:164,column:22},end:{line:164,column:37}},60:{start:{line:165,column:38},end:{line:173,column:10}},61:{start:{line:174,column:27},end:{line:187,column:8}},62:{start:{line:175,column:22},end:{line:175,column:50}},63:{start:{line:176,column:8},end:{line:186,column:29}},64:{start:{line:188,column:6},end:{line:240,column:11}},65:{start:{line:199,column:33},end:{line:199,column:63}},66:{start:{line:242,column:25},end:{line:242,column:35}},67:{start:{line:243,column:6},end:{line:270,column:11}},68:{start:{line:248,column:14},end:{line:248,column:59}},69:{start:{line:249,column:14},end:{line:249,column:49}},70:{start:{line:274,column:21},end:{line:274,column:60}}},fnMap:{0:{name:"combiningFilter",decl:{start:{line:16,column:9},end:{line:16,column:24}},loc:{start:{line:16,column:32},end:{line:28,column:1}},line:16},1:{name:"migrateFilter",decl:{start:{line:29,column:9},end:{line:29,column:22}},loc:{start:{line:29,column:31},end:{line:31,column:1}},line:29},2:{name:"createStyleFromFilter",decl:{start:{line:32,column:9},end:{line:32,column:30}},loc:{start:{line:32,column:39},end:{line:55,column:1}},line:32},3:{name:"checkIfSimpleFilter",decl:{start:{line:61,column:9},end:{line:61,column:28}},loc:{start:{line:61,column:37},end:{line:67,column:1}},line:61},4:{name:"hasCombiningFilter",decl:{start:{line:68,column:9},end:{line:68,column:27}},loc:{start:{line:68,column:36},end:{line:70,column:1}},line:68},5:{name:"hasNestedCombiningFilter",decl:{start:{line:71,column:9},end:{line:71,column:33}},loc:{start:{line:71,column:42},end:{line:76,column:1}},line:71},6:{name:"(anonymous_6)",decl:{start:{line:73,column:31},end:{line:73,column:32}},loc:{start:{line:73,column:38},end:{line:73,column:59}},line:73},7:{name:"(anonymous_7)",decl:{start:{line:73,column:68},end:{line:73,column:69}},loc:{start:{line:73,column:75},end:{line:73,column:84}},line:73},8:{name:"(anonymous_8)",decl:{start:{line:81,column:2},end:{line:81,column:3}},loc:{start:{line:81,column:21},end:{line:87,column:3}},line:81},9:{name:"(anonymous_9)",decl:{start:{line:89,column:2},end:{line:89,column:3}},loc:{start:{line:89,column:42},end:{line:93,column:3}},line:89},10:{name:"(anonymous_10)",decl:{start:{line:94,column:2},end:{line:94,column:3}},loc:{start:{line:94,column:30},end:{line:98,column:3}},line:94},11:{name:"(anonymous_11)",decl:{start:{line:99,column:18},end:{line:99,column:19}},loc:{start:{line:99,column:24},end:{line:103,column:3}},line:99},12:{name:"(anonymous_12)",decl:{start:{line:104,column:16},end:{line:104,column:17}},loc:{start:{line:104,column:25},end:{line:108,column:3}},line:104},13:{name:"(anonymous_13)",decl:{start:{line:109,column:15},end:{line:109,column:16}},loc:{start:{line:109,column:21},end:{line:113,column:3}},line:109},14:{name:"(anonymous_14)",decl:{start:{line:114,column:19},end:{line:114,column:20}},loc:{start:{line:114,column:25},end:{line:120,column:3}},line:114},15:{name:"(anonymous_15)",decl:{start:{line:121,column:2},end:{line:121,column:3}},loc:{start:{line:121,column:48},end:{line:137,column:3}},line:121},16:{name:"(anonymous_16)",decl:{start:{line:138,column:2},end:{line:138,column:3}},loc:{start:{line:138,column:11},end:{line:272,column:3}},line:138},17:{name:"(anonymous_17)",decl:{start:{line:174,column:39},end:{line:174,column:40}},loc:{start:{line:174,column:51},end:{line:187,column:7}},line:174},18:{name:"(anonymous_18)",decl:{start:{line:199,column:26},end:{line:199,column:27}},loc:{start:{line:199,column:33},end:{line:199,column:63}},line:199},19:{name:"(anonymous_19)",decl:{start:{line:247,column:22},end:{line:247,column:23}},loc:{start:{line:247,column:28},end:{line:250,column:13}},line:247}},branchMap:{0:{loc:{start:{line:17,column:17},end:{line:17,column:40}},type:"binary-expr",locations:[{start:{line:17,column:17},end:{line:17,column:29}},{start:{line:17,column:33},end:{line:17,column:40}}],line:17},1:{loc:{start:{line:18,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:18,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},2:{loc:{start:{line:23,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:62,column:2},end:{line:64,column:3}},type:"if",locations:[{start:{line:62,column:2},end:{line:64,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},4:{loc:{start:{line:62,column:6},end:{line:62,column:59}},type:"binary-expr",locations:[{start:{line:62,column:6},end:{line:62,column:25}},{start:{line:62,column:29},end:{line:62,column:59}}],line:62},5:{loc:{start:{line:72,column:2},end:{line:74,column:3}},type:"if",locations:[{start:{line:72,column:2},end:{line:74,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:72},6:{loc:{start:{line:123,column:4},end:{line:136,column:5}},type:"if",locations:[{start:{line:123,column:4},end:{line:136,column:5}},{start:{line:128,column:11},end:{line:136,column:5}}],line:123},7:{loc:{start:{line:123,column:8},end:{line:123,column:66}},type:"binary-expr",locations:[{start:{line:123,column:8},end:{line:123,column:28}},{start:{line:123,column:32},end:{line:123,column:66}}],line:123},8:{loc:{start:{line:128,column:11},end:{line:136,column:5}},type:"if",locations:[{start:{line:128,column:11},end:{line:136,column:5}},{start:{line:132,column:11},end:{line:136,column:5}}],line:128},9:{loc:{start:{line:128,column:15},end:{line:128,column:73}},type:"binary-expr",locations:[{start:{line:128,column:15},end:{line:128,column:34}},{start:{line:128,column:38},end:{line:128,column:73}}],line:128},10:{loc:{start:{line:145,column:36},end:{line:145,column:112}},type:"binary-expr",locations:[{start:{line:145,column:36},end:{line:145,column:55}},{start:{line:145,column:59},end:{line:145,column:112}}],line:145},11:{loc:{start:{line:146,column:4},end:{line:271,column:5}},type:"if",locations:[{start:{line:146,column:4},end:{line:271,column:5}},{start:{line:161,column:11},end:{line:271,column:5}}],line:146},12:{loc:{start:{line:161,column:11},end:{line:271,column:5}},type:"if",locations:[{start:{line:161,column:11},end:{line:271,column:5}},{start:{line:241,column:11},end:{line:271,column:5}}],line:161},13:{loc:{start:{line:185,column:10},end:{line:185,column:119}},type:"binary-expr",locations:[{start:{line:185,column:10},end:{line:185,column:15}},{start:{line:185,column:35},end:{line:185,column:119}}],line:185},14:{loc:{start:{line:235,column:30},end:{line:235,column:62}},type:"cond-expr",locations:[{start:{line:235,column:51},end:{line:235,column:53}},{start:{line:235,column:56},end:{line:235,column:62}}],line:235},15:{loc:{start:{line:258,column:8},end:{line:269,column:12}},type:"binary-expr",locations:[{start:{line:258,column:8},end:{line:258,column:38}},{start:{line:258,column:58},end:{line:269,column:12}}],line:258}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx"],names:[],mappings:"AAiMQ,SAsDA,UAtDA,KAGA,YAHA;AAjMR,OAAO,WAAW;AAClB,SAAQ,4BAA2B;AACnC,SAAQ,eAAc;AAEtB,SAAQ,QAAQ,SAAS,qBAAoB;AAC7C,SAAQ,0BAAyB;AAEjC,SAAQ,0BAAyB;AACjC,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,wBAAwB;AAC/B,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AACxB,OAAO,SAAS;AAChB,OAAO,wBAAwB;AAC/B,SAA0B,uBAAuB;AAIjD,SAAS,gBAAgB,OAAuF;AAC9G,QAAM,SAAS,MAAM,UAAU,CAAC,KAAK;AAErC,MAAI,CAAC,MAAM,QAAQ,MAAM,GAAG;AAC1B,WAAO;AAAA,EACT;AAEA,MAAI,cAAc,OAAO,CAAC;AAC1B,MAAI,UAAU,OAAO,MAAM,CAAC;AAE5B,MAAG,mBAAmB,QAAQ,WAAW,IAAI,GAAG;AAC9C,kBAAc;AACd,cAAU,CAAC,OAAO,MAAM,CAAC,CAAC;AAAA,EAC5B;AAEA,SAAO,CAAC,aAAa,GAAG,OAAO;AACjC;AAEA,SAAS,cAAc,QAA6D;AAElF,SAAQ,QAAQ,sBAAsB,MAAM,CAAQ,EAAE,OAAO,CAAC,EAAU;AAC1E;AAEA,SAAS,sBAAsB,QAAuF;AACpH,SAAO;AAAA,IACL,MAAM;AAAA,IACN,WAAW;AAAA,IACX,QAAQ;AAAA,IACR,YAAY,EAAC,qBAAqB,SAAQ;AAAA,IAC1C,WAAW;AAAA,MACT,OAAO;AAAA,QACL,QAAQ;AAAA,QACR,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,IACA,UAAU;AAAA,IACV,UAAU;AAAA,IACV,UAAU;AAAA,MACR;AAAA,QACE,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,QAAQ;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa;AAAA,EACjB;AAAA,EACA;AAAA,EACA;AACF;AAGA,SAAS,oBAAqB,QAA6D;AACzF,MAAI,OAAO,WAAW,KAAK,WAAW,SAAS,OAAO,CAAC,CAAC,GAAG;AACzD,WAAO;AAAA,EACT;AACA,QAAM,aAAa,cAAc,MAAM;AACvC,SAAO,CAAC,QAAQ,YAAY,MAAM;AACpC;AAEA,SAAS,mBAAmB,QAA6D;AACvF,SAAO,mBAAmB,QAAQ,OAAO,CAAC,CAAC,KAAK;AAClD;AAEA,SAAS,yBAAyB,QAA6D;AAC7F,MAAG,mBAAmB,MAAM,GAAG;AAC7B,WAAO,OAAO,MAAM,CAAC,EAAE,IAAI,OAAK,mBAAmB,CAAQ,CAAC,EAAE,OAAO,OAAK,KAAK,IAAI,EAAE,SAAS;AAAA,EAChG;AACA,SAAO;AACT;AAgBA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC,KAAK;AAAA,EAChB;AAAA,EAEA,YAAa,OAAkC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,qBAAqB,oBAAoB,gBAAgB,KAAK,CAAC;AAAA,IACjE;AAAA,EACF;AAAA;AAAA,EAGA,oBAAoB,WAAmB,SAAgB;AACrD,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,SAAS,IAAI;AACvB,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,iBAAiB,WAAmB;AAClC,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,OAAO,YAAY,GAAG,CAAC;AACjC,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,gBAAgB,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACzD,IAAC,cAAwB,KAAK,CAAC,MAAM,QAAQ,EAAE,CAAC;AAChD,SAAK,MAAM,SAAS,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,SAAK,MAAM,SAAS,cAAc,MAAM,CAAC;AACzC,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,sBAAsB,oBAAoB,gBAAgB,KAAK,CAAC;AAGtE,QAAI,CAAC,uBAAuB,MAAM,wBAAwB,MAAM;AAC9D,aAAO;AAAA,QACL,qBAAqB;AAAA,QACrB,qBAAqB;AAAA,MACvB;AAAA,IACF,WACS,uBAAuB,MAAM,wBAAwB,OAAO;AACnE,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF,OACK;AACH,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,EAAC,IAAI,KAAK;AACzB,UAAM,EAAC,oBAAmB,IAAI,KAAK;AACnC,UAAM,YAAU;AAAA,MACd,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,IACjC;AACA,UAAM,gBAAgB,CAAC,KAAK;AAE5B,UAAM,0BAA0B,uBAAuB,yBAAyB,gBAAgB,KAAK,KAAK,CAAC;AAE3G,QAAI,yBAAyB;AAC3B,aAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,4BAAC,OACE,YAAE,mCAAmC,GACxC;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,KAAK;AAAA,YACd,OAAO,EAAE,uBAAuB;AAAA,YAEhC;AAAA,kCAAC,SAAI,OAAO,EAAC,aAAa,SAAS,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAChG,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,cACC,EAAE,uBAAuB;AAAA;AAAA;AAAA,QAC5B;AAAA,SACF;AAAA,IACF,WACS,qBAAqB;AAC5B,YAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,YAAM,cAAc,OAAO,CAAC;AAC5B,YAAM,UAAU,OAAO,MAAM,CAAC;AAE9B,YAAM,UACJ,oBAAC,SACC;AAAA,QAAC;AAAA;AAAA,UACC,SAAS,KAAK;AAAA,UACd,OAAO,EAAE,uBAAuB;AAAA,UAChC,WAAU;AAAA,UAEV,8BAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAC1E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA;AAAA,MACF,GACF;AAGF,YAAM,eAAe,QAAQ,IAAI,CAAC,GAAG,QAAQ;AAC3C,cAAM,QAAQ,OAAQ,UAAU,MAAI,CAAC,GAAG;AAExC,eACE,qBAAC,SACC;AAAA,8BAAC,qBAA4B,UAAU,KAAK,iBAAiB,KAAK,MAAM,GAAG,GACzE;AAAA,YAAC;AAAA;AAAA,cACC,YAAY,KAAK,MAAM;AAAA,cACvB,QAAQ;AAAA,cACR,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM,CAAC;AAAA;AAAA,UACvD,KALsB,GAMxB;AAAA,UACC,SACC,oBAAC,SAAgB,WAAU,yBAAyB,gBAAM,WAAjD,OAAyD;AAAA,aAT5D,SAAS,GAAG,EAWtB;AAAA,MAEJ,CAAC;AAGD,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YAEC;AAAA,YACA,OAAO,EAAE,QAAQ;AAAA,YACjB,QAAQ;AAAA,YAER;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,MAAqB,KAAK,oBAAoB,GAAG,CAAC;AAAA,gBAC7D,SAAS;AAAA,kBACP,CAAC,OAAO,EAAE,sBAAsB,CAAC;AAAA,kBACjC,CAAC,QAAQ,EAAE,mBAAmB,CAAC;AAAA,kBAC/B,CAAC,OAAO,EAAE,oBAAoB,CAAC;AAAA,gBACjC;AAAA;AAAA,YACF;AAAA;AAAA,UAbI;AAAA,QAcN;AAAA,QACC;AAAA,QACD;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YAEV;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBAEd;AAAA,sCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,kBAAM;AAAA,kBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,YACxB;AAAA;AAAA,UAXI;AAAA,QAYN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,YAEjD,8BAAC,OAAI,WAAsB;AAAA;AAAA,UAJvB;AAAA,QAKN;AAAA,SACF;AAAA,IAEJ,OACK;AACH,YAAM,EAAC,OAAM,IAAI,KAAK;AAEtB,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,UAAU,MAAM;AACd,mBAAK,SAAS,EAAC,qBAAqB,KAAI,CAAC;AACzC,mBAAK,MAAM,SAAS,aAAa;AAAA,YACnC;AAAA,YACA,WAAU;AAAA,YACV;AAAA,YACA,OAAO;AAAA,YACP;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA,QACC,KAAK,MAAM,uBACV,qBAAC,SAAI,WAAU,yBACZ;AAAA,YAAE,qCAAqC;AAAA,UACvC;AAAA,UACD;AAAA,YAAC;AAAA;AAAA,cACC,SAAS,KAAK;AAAA,cACd,WAAU;AAAA,cAET,YAAE,0BAA0B;AAAA;AAAA,UAC/B;AAAA,WACF;AAAA,SAEJ;AAAA,IAEJ;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2450f82df6194fa7ce5a592b459b4ddcbdcc401f"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Pn=function(){return l},l}Pn();function f1(n){Pn().f[0]++;const e=(Pn().s[0]++,Pn().b[0][0]++,n.filter||(Pn().b[0][1]++,["all"]));if(Pn().s[1]++,Array.isArray(e))Pn().b[1][1]++;else return Pn().b[1][0]++,Pn().s[2]++,e;let t=(Pn().s[3]++,e[0]),i=(Pn().s[4]++,e.slice(1));return Pn().s[5]++,D8.indexOf(t)<0?(Pn().b[2][0]++,Pn().s[6]++,t="all",Pn().s[7]++,i=[e.slice(0)]):Pn().b[2][1]++,Pn().s[8]++,[t,...i]}function ule(n){return Pn().f[1]++,Pn().s[9]++,mV(cle(n)).layers[0].filter}function cle(n){return Pn().f[2]++,Pn().s[10]++,{id:"tmp",version:8,name:"Empty Style",metadata:{"maputnik:renderer":"mlgljs"},sources:{tmp:{type:"geojson",data:""}},sprite:"",glyphs:"https://orangemug.github.io/font-glyphs/glyphs/{fontstack}/{range}.pbf",layers:[{id:"tmp",type:"fill",source:"tmp",filter:n}]}}const hle=(Pn().s[11]++,["all","any","none"]);function pk(n){if(Pn().f[3]++,Pn().s[12]++,Pn().b[4][0]++,n.length===1&&(Pn().b[4][1]++,hle.includes(n[0])))return Pn().b[3][0]++,Pn().s[13]++,!0;Pn().b[3][1]++;const e=(Pn().s[14]++,$C(n));return Pn().s[15]++,!J_.isEqual(e,n)}function gk(n){return Pn().f[4]++,Pn().s[16]++,D8.indexOf(n[0])>=0}function dle(n){return Pn().f[5]++,Pn().s[17]++,gk(n)?(Pn().b[5][0]++,Pn().s[18]++,n.slice(1).map(e=>(Pn().f[6]++,Pn().s[19]++,gk(e))).filter(e=>(Pn().f[7]++,Pn().s[20]++,e==!0)).length>0):(Pn().b[5][1]++,Pn().s[21]++,!1)}class fle extends ni.Component{static defaultProps=(Pn().s[22]++,{filter:["all"]});constructor(e){Pn().f[8]++,Pn().s[23]++,super(e),Pn().s[24]++,this.state={showDoc:!1,displaySimpleFilter:pk(f1(e))}}onFilterPartChanged(e,t){Pn().f[9]++;const i=(Pn().s[25]++,f1(this.props).slice(0));Pn().s[26]++,i[e]=t,Pn().s[27]++,this.props.onChange(i)}deleteFilterItem(e){Pn().f[10]++;const t=(Pn().s[28]++,f1(this.props).slice(0));Pn().s[29]++,t.splice(e+1,1),Pn().s[30]++,this.props.onChange(t)}addFilterItem=(Pn().s[31]++,()=>{Pn().f[11]++;const e=(Pn().s[32]++,f1(this.props).slice(0));Pn().s[33]++,e.push(["==","name",""]),Pn().s[34]++,this.props.onChange(e)});onToggleDoc=(Pn().s[35]++,e=>{Pn().f[12]++,Pn().s[36]++,this.setState({showDoc:e})});makeFilter=(Pn().s[37]++,()=>{Pn().f[13]++,Pn().s[38]++,this.setState({displaySimpleFilter:!0})});makeExpression=(Pn().s[39]++,()=>{Pn().f[14]++;const e=(Pn().s[40]++,f1(this.props));Pn().s[41]++,this.props.onChange(ule(e)),Pn().s[42]++,this.setState({displaySimpleFilter:!1})});static getDerivedStateFromProps(e,t){Pn().f[15]++;const i=(Pn().s[43]++,pk(f1(e)));return Pn().s[44]++,Pn().b[7][0]++,!i&&(Pn().b[7][1]++,t.displaySimpleFilter===!0)?(Pn().b[6][0]++,Pn().s[45]++,{displaySimpleFilter:!1,valueIsSimpleFilter:!1}):(Pn().b[6][1]++,Pn().s[46]++,Pn().b[9][0]++,i&&(Pn().b[9][1]++,t.displaySimpleFilter===!1)?(Pn().b[8][0]++,Pn().s[47]++,{valueIsSimpleFilter:!0}):(Pn().b[8][1]++,Pn().s[48]++,{valueIsSimpleFilter:!1}))}render(){Pn().f[16]++;const{errors:e,t}=(Pn().s[49]++,this.props),{displaySimpleFilter:i}=(Pn().s[50]++,this.state),r=(Pn().s[51]++,{doc:Ua.layer.filter.doc+" Combine multiple filters together by using a compound filter."}),a=(Pn().s[52]++,["all"]),l=(Pn().s[53]++,Pn().b[10][0]++,i&&(Pn().b[10][1]++,dle(f1(this.props))));if(Pn().s[54]++,l)return Pn().b[11][0]++,Pn().s[55]++,ce.jsxs("div",{className:"maputnik-filter-editor-unsupported",children:[ce.jsx("p",{children:t("Nested filters are not supported.")}),ce.jsxs(ml,{onClick:this.makeExpression,title:t("Convert to expression"),children:[ce.jsx("svg",{style:{marginRight:"0.2em",width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:ce.jsx("path",{fill:"currentColor",d:N_})}),t("Upgrade to expression")]})]});if(Pn().b[11][1]++,Pn().s[56]++,i){Pn().b[12][0]++;const o=(Pn().s[57]++,f1(this.props)),m=(Pn().s[58]++,o[0]),C=(Pn().s[59]++,o.slice(1)),S=(Pn().s[60]++,ce.jsx("div",{children:ce.jsx(ml,{onClick:this.makeExpression,title:t("Convert to expression"),className:"maputnik-make-zoom-function",children:ce.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:ce.jsx("path",{fill:"currentColor",d:N_})})})})),O=(Pn().s[61]++,C.map((U,K)=>{Pn().f[17]++;const z=(Pn().s[62]++,e[`filter[${K+1}]`]);return Pn().s[63]++,ce.jsxs("div",{children:[ce.jsx(ale,{onDelete:this.deleteFilterItem.bind(this,K),children:ce.jsx(rle,{properties:this.props.properties,filter:U,onChange:this.onFilterPartChanged.bind(this,K+1)})},K),(Pn().b[13][0]++,z&&(Pn().b[13][1]++,ce.jsx("div",{className:"maputnik-inline-error",children:z.message},"error")))]},`block-${K}`)}));return Pn().s[64]++,ce.jsxs(ce.Fragment,{children:[ce.jsx(Ks,{fieldSpec:r,label:t("Filter"),action:S,children:ce.jsx(ey,{value:m,onChange:U=>(Pn().f[18]++,Pn().s[65]++,this.onFilterPartChanged(0,U)),options:[["all",t("every filter matches")],["none",t("no filter matches")],["any",t("any filter matches")]]})},"top"),O,ce.jsx("div",{className:"maputnik-filter-editor-add-wrapper",children:ce.jsxs(ml,{"data-wd-key":"layer-filter-button",className:"maputnik-add-filter",onClick:this.addFilterItem,children:[ce.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:ce.jsx("path",{fill:"currentColor",d:k8})})," ",t("Add filter")]})},"buttons"),ce.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(Pn().b[14][0]++,""):(Pn().b[14][1]++,"none")},children:ce.jsx(h8,{fieldSpec:r})},"doc")]})}else{Pn().b[12][1]++;const{filter:o}=(Pn().s[66]++,this.props);return Pn().s[67]++,ce.jsxs(ce.Fragment,{children:[ce.jsx(mG,{onDelete:()=>{Pn().f[19]++,Pn().s[68]++,this.setState({displaySimpleFilter:!0}),Pn().s[69]++,this.props.onChange(a)},fieldName:"filter",fieldSpec:r,value:o,errors:e,onChange:this.props.onChange}),(Pn().b[15][0]++,this.state.valueIsSimpleFilter&&(Pn().b[15][1]++,ce.jsxs("div",{className:"maputnik-expr-infobox",children:[t("You've entered an old style filter.")," ",ce.jsx("button",{onClick:this.makeFilter,className:"maputnik-expr-infobox__button",children:t("Switch to filter editor.")})]})))]})}}}const mle=(Pn().s[70]++,ss()(fle));var Uy={},zd={},Ly={},WM,yk;function pG(){if(yk)return WM;yk=1;var n=typeof window=="object"&&window&&window.Object===Object&&window;return WM=n,WM}var QM,vk;function cp(){if(vk)return QM;vk=1;var n=pG(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return QM=t,QM}var YM,Ck;function Sb(){if(Ck)return YM;Ck=1;var n=cp(),e=n.Symbol;return YM=e,YM}var qM,_k;function ple(){if(_k)return qM;_k=1;var n=Sb(),e=Object.prototype,t=e.hasOwnProperty,i=e.toString,r=n?n.toStringTag:void 0;function a(l){var o=t.call(l,r),m=l[r];try{l[r]=void 0;var C=!0}catch{}var S=i.call(l);return C&&(o?l[r]=m:delete l[r]),S}return qM=a,qM}var HM,bk;function gle(){if(bk)return HM;bk=1;var n=Object.prototype,e=n.toString;function t(i){return e.call(i)}return HM=t,HM}var VM,xk;function ty(){if(xk)return VM;xk=1;var n=Sb(),e=ple(),t=gle(),i="[object Null]",r="[object Undefined]",a=n?n.toStringTag:void 0;function l(o){return o==null?o===void 0?r:i:a&&a in Object(o)?e(o):t(o)}return VM=l,VM}var $M,Mk;function If(){if(Mk)return $M;Mk=1;var n=Array.isArray;return $M=n,$M}var ZM,Sk;function r0(){if(Sk)return ZM;Sk=1;function n(e){return e!=null&&typeof e=="object"}return ZM=n,ZM}var XM,wk;function yle(){if(wk)return XM;wk=1;var n=ty(),e=If(),t=r0(),i="[object String]";function r(a){return typeof a=="string"||!e(a)&&t(a)&&n(a)==i}return XM=r,XM}var JM,Ek;function vle(){if(Ek)return JM;Ek=1;function n(e){return function(t,i,r){for(var a=-1,l=Object(t),o=r(t),m=o.length;m--;){var C=o[e?m:++a];if(i(l[C],C,l)===!1)break}return t}}return JM=n,JM}var e5,Bk;function gG(){if(Bk)return e5;Bk=1;var n=vle(),e=n();return e5=e,e5}var t5,Ok;function Cle(){if(Ok)return t5;Ok=1;function n(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}return t5=n,t5}var n5,Ik;function _le(){if(Ik)return n5;Ik=1;var n=ty(),e=r0(),t="[object Arguments]";function i(r){return e(r)&&n(r)==t}return n5=i,n5}var i5,Tk;function P8(){if(Tk)return i5;Tk=1;var n=_le(),e=r0(),t=Object.prototype,i=t.hasOwnProperty,r=t.propertyIsEnumerable,a=n(function(){return arguments}())?n:function(l){return e(l)&&i.call(l,"callee")&&!r.call(l,"callee")};return i5=a,i5}var zC={exports:{}},r5,kk;function ble(){if(kk)return r5;kk=1;function n(){return!1}return r5=n,r5}zC.exports;var Dk;function z2(){return Dk||(Dk=1,function(n,e){var t=cp(),i=ble(),r=e&&!e.nodeType&&e,a=r&&!0&&n&&!n.nodeType&&n,l=a&&a.exports===r,o=l?t.Buffer:void 0,m=o?o.isBuffer:void 0,C=m||i;n.exports=C}(zC,zC.exports)),zC.exports}var o5,Rk;function K8(){if(Rk)return o5;Rk=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(i,r){var a=typeof i;return r=r??n,!!r&&(a=="number"||a!="symbol"&&e.test(i))&&i>-1&&i%1==0&&i<r}return o5=t,o5}var a5,Pk;function U8(){if(Pk)return a5;Pk=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return a5=e,a5}var s5,Kk;function xle(){if(Kk)return s5;Kk=1;var n=ty(),e=U8(),t=r0(),i="[object Arguments]",r="[object Array]",a="[object Boolean]",l="[object Date]",o="[object Error]",m="[object Function]",C="[object Map]",S="[object Number]",O="[object Object]",U="[object RegExp]",K="[object Set]",z="[object String]",j="[object WeakMap]",Q="[object ArrayBuffer]",ee="[object DataView]",V="[object Float32Array]",ae="[object Float64Array]",ne="[object Int8Array]",Z="[object Int16Array]",oe="[object Int32Array]",W="[object Uint8Array]",ue="[object Uint8ClampedArray]",ge="[object Uint16Array]",ye="[object Uint32Array]",Me={};Me[V]=Me[ae]=Me[ne]=Me[Z]=Me[oe]=Me[W]=Me[ue]=Me[ge]=Me[ye]=!0,Me[i]=Me[r]=Me[Q]=Me[a]=Me[ee]=Me[l]=Me[o]=Me[m]=Me[C]=Me[S]=Me[O]=Me[U]=Me[K]=Me[z]=Me[j]=!1;function Be(we){return t(we)&&e(we.length)&&!!Me[n(we)]}return s5=Be,s5}var l5,Uk;function L8(){if(Uk)return l5;Uk=1;function n(e){return function(t){return e(t)}}return l5=n,l5}var NC={exports:{}};NC.exports;var Lk;function F8(){return Lk||(Lk=1,function(n,e){var t=pG(),i=e&&!e.nodeType&&e,r=i&&!0&&n&&!n.nodeType&&n,a=r&&r.exports===i,l=a&&t.process,o=function(){try{var m=r&&r.require&&r.require("util").types;return m||l&&l.binding&&l.binding("util")}catch{}}();n.exports=o}(NC,NC.exports)),NC.exports}var A5,Fk;function z8(){if(Fk)return A5;Fk=1;var n=xle(),e=L8(),t=F8(),i=t&&t.isTypedArray,r=i?e(i):n;return A5=r,A5}var u5,zk;function yG(){if(zk)return u5;zk=1;var n=Cle(),e=P8(),t=If(),i=z2(),r=K8(),a=z8(),l=Object.prototype,o=l.hasOwnProperty;function m(C,S){var O=t(C),U=!O&&e(C),K=!O&&!U&&i(C),z=!O&&!U&&!K&&a(C),j=O||U||K||z,Q=j?n(C.length,String):[],ee=Q.length;for(var V in C)(S||o.call(C,V))&&!(j&&(V=="length"||K&&(V=="offset"||V=="parent")||z&&(V=="buffer"||V=="byteLength"||V=="byteOffset")||r(V,ee)))&&Q.push(V);return Q}return u5=m,u5}var c5,Nk;function N8(){if(Nk)return c5;Nk=1;var n=Object.prototype;function e(t){var i=t&&t.constructor,r=typeof i=="function"&&i.prototype||n;return t===r}return c5=e,c5}var h5,Gk;function vG(){if(Gk)return h5;Gk=1;function n(e,t){return function(i){return e(t(i))}}return h5=n,h5}var d5,jk;function Mle(){if(jk)return d5;jk=1;var n=vG(),e=n(Object.keys,Object);return d5=e,d5}var f5,Wk;function Sle(){if(Wk)return f5;Wk=1;var n=N8(),e=Mle(),t=Object.prototype,i=t.hasOwnProperty;function r(a){if(!n(a))return e(a);var l=[];for(var o in Object(a))i.call(a,o)&&o!="constructor"&&l.push(o);return l}return f5=r,f5}var m5,Qk;function xm(){if(Qk)return m5;Qk=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return m5=n,m5}var p5,Yk;function G8(){if(Yk)return p5;Yk=1;var n=ty(),e=xm(),t="[object AsyncFunction]",i="[object Function]",r="[object GeneratorFunction]",a="[object Proxy]";function l(o){if(!e(o))return!1;var m=n(o);return m==i||m==r||m==t||m==a}return p5=l,p5}var g5,qk;function Jv(){if(qk)return g5;qk=1;var n=G8(),e=U8();function t(i){return i!=null&&e(i.length)&&!n(i)}return g5=t,g5}var y5,Hk;function wb(){if(Hk)return y5;Hk=1;var n=yG(),e=Sle(),t=Jv();function i(r){return t(r)?n(r):e(r)}return y5=i,y5}var v5,Vk;function CG(){if(Vk)return v5;Vk=1;var n=gG(),e=wb();function t(i,r){return i&&n(i,r,e)}return v5=t,v5}var C5,$k;function N2(){if($k)return C5;$k=1;function n(e){return e}return C5=n,C5}var _5,Zk;function _G(){if(Zk)return _5;Zk=1;var n=N2();function e(t){return typeof t=="function"?t:n}return _5=e,_5}var b5,Xk;function j8(){if(Xk)return b5;Xk=1;var n=CG(),e=_G();function t(i,r){return i&&n(i,e(r))}return b5=t,b5}var x5,Jk;function W8(){if(Jk)return x5;Jk=1;var n=vG(),e=n(Object.getPrototypeOf,Object);return x5=e,x5}var M5,eD;function bG(){if(eD)return M5;eD=1;var n=ty(),e=W8(),t=r0(),i="[object Object]",r=Function.prototype,a=Object.prototype,l=r.toString,o=a.hasOwnProperty,m=l.call(Object);function C(S){if(!t(S)||n(S)!=i)return!1;var O=e(S);if(O===null)return!0;var U=o.call(O,"constructor")&&O.constructor;return typeof U=="function"&&U instanceof U&&l.call(U)==m}return M5=C,M5}var S5,tD;function xG(){if(tD)return S5;tD=1;function n(e,t){for(var i=-1,r=e==null?0:e.length,a=Array(r);++i<r;)a[i]=t(e[i],i,e);return a}return S5=n,S5}var w5,nD;function wle(){if(nD)return w5;nD=1;function n(){this.__data__=[],this.size=0}return w5=n,w5}var E5,iD;function Eb(){if(iD)return E5;iD=1;function n(e,t){return e===t||e!==e&&t!==t}return E5=n,E5}var B5,rD;function G2(){if(rD)return B5;rD=1;var n=Eb();function e(t,i){for(var r=t.length;r--;)if(n(t[r][0],i))return r;return-1}return B5=e,B5}var O5,oD;function Ele(){if(oD)return O5;oD=1;var n=G2(),e=Array.prototype,t=e.splice;function i(r){var a=this.__data__,l=n(a,r);if(l<0)return!1;var o=a.length-1;return l==o?a.pop():t.call(a,l,1),--this.size,!0}return O5=i,O5}var I5,aD;function Ble(){if(aD)return I5;aD=1;var n=G2();function e(t){var i=this.__data__,r=n(i,t);return r<0?void 0:i[r][1]}return I5=e,I5}var T5,sD;function Ole(){if(sD)return T5;sD=1;var n=G2();function e(t){return n(this.__data__,t)>-1}return T5=e,T5}var k5,lD;function Ile(){if(lD)return k5;lD=1;var n=G2();function e(t,i){var r=this.__data__,a=n(r,t);return a<0?(++this.size,r.push([t,i])):r[a][1]=i,this}return k5=e,k5}var D5,AD;function j2(){if(AD)return D5;AD=1;var n=wle(),e=Ele(),t=Ble(),i=Ole(),r=Ile();function a(l){var o=-1,m=l==null?0:l.length;for(this.clear();++o<m;){var C=l[o];this.set(C[0],C[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=i,a.prototype.set=r,D5=a,D5}var R5,uD;function Tle(){if(uD)return R5;uD=1;var n=j2();function e(){this.__data__=new n,this.size=0}return R5=e,R5}var P5,cD;function kle(){if(cD)return P5;cD=1;function n(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}return P5=n,P5}var K5,hD;function Dle(){if(hD)return K5;hD=1;function n(e){return this.__data__.get(e)}return K5=n,K5}var U5,dD;function Rle(){if(dD)return U5;dD=1;function n(e){return this.__data__.has(e)}return U5=n,U5}var L5,fD;function Ple(){if(fD)return L5;fD=1;var n=cp(),e=n["__core-js_shared__"];return L5=e,L5}var F5,mD;function Kle(){if(mD)return F5;mD=1;var n=Ple(),e=function(){var i=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function t(i){return!!e&&e in i}return F5=t,F5}var z5,pD;function MG(){if(pD)return z5;pD=1;var n=Function.prototype,e=n.toString;function t(i){if(i!=null){try{return e.call(i)}catch{}try{return i+""}catch{}}return""}return z5=t,z5}var N5,gD;function Ule(){if(gD)return N5;gD=1;var n=G8(),e=Kle(),t=xm(),i=MG(),r=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,l=Function.prototype,o=Object.prototype,m=l.toString,C=o.hasOwnProperty,S=RegExp("^"+m.call(C).replace(r,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function O(U){if(!t(U)||e(U))return!1;var K=n(U)?S:a;return K.test(i(U))}return N5=O,N5}var G5,yD;function Lle(){if(yD)return G5;yD=1;function n(e,t){return e?.[t]}return G5=n,G5}var j5,vD;function ny(){if(vD)return j5;vD=1;var n=Ule(),e=Lle();function t(i,r){var a=e(i,r);return n(a)?a:void 0}return j5=t,j5}var W5,CD;function Q8(){if(CD)return W5;CD=1;var n=ny(),e=cp(),t=n(e,"Map");return W5=t,W5}var Q5,_D;function W2(){if(_D)return Q5;_D=1;var n=ny(),e=n(Object,"create");return Q5=e,Q5}var Y5,bD;function Fle(){if(bD)return Y5;bD=1;var n=W2();function e(){this.__data__=n?n(null):{},this.size=0}return Y5=e,Y5}var q5,xD;function zle(){if(xD)return q5;xD=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return q5=n,q5}var H5,MD;function Nle(){if(MD)return H5;MD=1;var n=W2(),e="__lodash_hash_undefined__",t=Object.prototype,i=t.hasOwnProperty;function r(a){var l=this.__data__;if(n){var o=l[a];return o===e?void 0:o}return i.call(l,a)?l[a]:void 0}return H5=r,H5}var V5,SD;function Gle(){if(SD)return V5;SD=1;var n=W2(),e=Object.prototype,t=e.hasOwnProperty;function i(r){var a=this.__data__;return n?a[r]!==void 0:t.call(a,r)}return V5=i,V5}var $5,wD;function jle(){if(wD)return $5;wD=1;var n=W2(),e="__lodash_hash_undefined__";function t(i,r){var a=this.__data__;return this.size+=this.has(i)?0:1,a[i]=n&&r===void 0?e:r,this}return $5=t,$5}var Z5,ED;function Wle(){if(ED)return Z5;ED=1;var n=Fle(),e=zle(),t=Nle(),i=Gle(),r=jle();function a(l){var o=-1,m=l==null?0:l.length;for(this.clear();++o<m;){var C=l[o];this.set(C[0],C[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=i,a.prototype.set=r,Z5=a,Z5}var X5,BD;function Qle(){if(BD)return X5;BD=1;var n=Wle(),e=j2(),t=Q8();function i(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return X5=i,X5}var J5,OD;function Yle(){if(OD)return J5;OD=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return J5=n,J5}var eS,ID;function Q2(){if(ID)return eS;ID=1;var n=Yle();function e(t,i){var r=t.__data__;return n(i)?r[typeof i=="string"?"string":"hash"]:r.map}return eS=e,eS}var tS,TD;function qle(){if(TD)return tS;TD=1;var n=Q2();function e(t){var i=n(this,t).delete(t);return this.size-=i?1:0,i}return tS=e,tS}var nS,kD;function Hle(){if(kD)return nS;kD=1;var n=Q2();function e(t){return n(this,t).get(t)}return nS=e,nS}var iS,DD;function Vle(){if(DD)return iS;DD=1;var n=Q2();function e(t){return n(this,t).has(t)}return iS=e,iS}var rS,RD;function $le(){if(RD)return rS;RD=1;var n=Q2();function e(t,i){var r=n(this,t),a=r.size;return r.set(t,i),this.size+=r.size==a?0:1,this}return rS=e,rS}var oS,PD;function Y8(){if(PD)return oS;PD=1;var n=Qle(),e=qle(),t=Hle(),i=Vle(),r=$le();function a(l){var o=-1,m=l==null?0:l.length;for(this.clear();++o<m;){var C=l[o];this.set(C[0],C[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=i,a.prototype.set=r,oS=a,oS}var aS,KD;function Zle(){if(KD)return aS;KD=1;var n=j2(),e=Q8(),t=Y8(),i=200;function r(a,l){var o=this.__data__;if(o instanceof n){var m=o.__data__;if(!e||m.length<i-1)return m.push([a,l]),this.size=++o.size,this;o=this.__data__=new t(m)}return o.set(a,l),this.size=o.size,this}return aS=r,aS}var sS,UD;function Y2(){if(UD)return sS;UD=1;var n=j2(),e=Tle(),t=kle(),i=Dle(),r=Rle(),a=Zle();function l(o){var m=this.__data__=new n(o);this.size=m.size}return l.prototype.clear=e,l.prototype.delete=t,l.prototype.get=i,l.prototype.has=r,l.prototype.set=a,sS=l,sS}var lS,LD;function Xle(){if(LD)return lS;LD=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return lS=e,lS}var AS,FD;function Jle(){if(FD)return AS;FD=1;function n(e){return this.__data__.has(e)}return AS=n,AS}var uS,zD;function eAe(){if(zD)return uS;zD=1;var n=Y8(),e=Xle(),t=Jle();function i(r){var a=-1,l=r==null?0:r.length;for(this.__data__=new n;++a<l;)this.add(r[a])}return i.prototype.add=i.prototype.push=e,i.prototype.has=t,uS=i,uS}var cS,ND;function tAe(){if(ND)return cS;ND=1;function n(e,t){for(var i=-1,r=e==null?0:e.length;++i<r;)if(t(e[i],i,e))return!0;return!1}return cS=n,cS}var hS,GD;function nAe(){if(GD)return hS;GD=1;function n(e,t){return e.has(t)}return hS=n,hS}var dS,jD;function SG(){if(jD)return dS;jD=1;var n=eAe(),e=tAe(),t=nAe(),i=1,r=2;function a(l,o,m,C,S,O){var U=m&i,K=l.length,z=o.length;if(K!=z&&!(U&&z>K))return!1;var j=O.get(l),Q=O.get(o);if(j&&Q)return j==o&&Q==l;var ee=-1,V=!0,ae=m&r?new n:void 0;for(O.set(l,o),O.set(o,l);++ee<K;){var ne=l[ee],Z=o[ee];if(C)var oe=U?C(Z,ne,ee,o,l,O):C(ne,Z,ee,l,o,O);if(oe!==void 0){if(oe)continue;V=!1;break}if(ae){if(!e(o,function(W,ue){if(!t(ae,ue)&&(ne===W||S(ne,W,m,C,O)))return ae.push(ue)})){V=!1;break}}else if(!(ne===Z||S(ne,Z,m,C,O))){V=!1;break}}return O.delete(l),O.delete(o),V}return dS=a,dS}var fS,WD;function wG(){if(WD)return fS;WD=1;var n=cp(),e=n.Uint8Array;return fS=e,fS}var mS,QD;function iAe(){if(QD)return mS;QD=1;function n(e){var t=-1,i=Array(e.size);return e.forEach(function(r,a){i[++t]=[a,r]}),i}return mS=n,mS}var pS,YD;function rAe(){if(YD)return pS;YD=1;function n(e){var t=-1,i=Array(e.size);return e.forEach(function(r){i[++t]=r}),i}return pS=n,pS}var gS,qD;function oAe(){if(qD)return gS;qD=1;var n=Sb(),e=wG(),t=Eb(),i=SG(),r=iAe(),a=rAe(),l=1,o=2,m="[object Boolean]",C="[object Date]",S="[object Error]",O="[object Map]",U="[object Number]",K="[object RegExp]",z="[object Set]",j="[object String]",Q="[object Symbol]",ee="[object ArrayBuffer]",V="[object DataView]",ae=n?n.prototype:void 0,ne=ae?ae.valueOf:void 0;function Z(oe,W,ue,ge,ye,Me,Be){switch(ue){case V:if(oe.byteLength!=W.byteLength||oe.byteOffset!=W.byteOffset)return!1;oe=oe.buffer,W=W.buffer;case ee:return!(oe.byteLength!=W.byteLength||!Me(new e(oe),new e(W)));case m:case C:case U:return t(+oe,+W);case S:return oe.name==W.name&&oe.message==W.message;case K:case j:return oe==W+"";case O:var we=r;case z:var qe=ge&l;if(we||(we=a),oe.size!=W.size&&!qe)return!1;var xe=Be.get(oe);if(xe)return xe==W;ge|=o,Be.set(oe,W);var ze=i(we(oe),we(W),ge,ye,Me,Be);return Be.delete(oe),ze;case Q:if(ne)return ne.call(oe)==ne.call(W)}return!1}return gS=Z,gS}var yS,HD;function EG(){if(HD)return yS;HD=1;function n(e,t){for(var i=-1,r=t.length,a=e.length;++i<r;)e[a+i]=t[i];return e}return yS=n,yS}var vS,VD;function BG(){if(VD)return vS;VD=1;var n=EG(),e=If();function t(i,r,a){var l=r(i);return e(i)?l:n(l,a(i))}return vS=t,vS}var CS,$D;function aAe(){if($D)return CS;$D=1;function n(e,t){for(var i=-1,r=e==null?0:e.length,a=0,l=[];++i<r;){var o=e[i];t(o,i,e)&&(l[a++]=o)}return l}return CS=n,CS}var _S,ZD;function OG(){if(ZD)return _S;ZD=1;function n(){return[]}return _S=n,_S}var bS,XD;function q8(){if(XD)return bS;XD=1;var n=aAe(),e=OG(),t=Object.prototype,i=t.propertyIsEnumerable,r=Object.getOwnPropertySymbols,a=r?function(l){return l==null?[]:(l=Object(l),n(r(l),function(o){return i.call(l,o)}))}:e;return bS=a,bS}var xS,JD;function IG(){if(JD)return xS;JD=1;var n=BG(),e=q8(),t=wb();function i(r){return n(r,t,e)}return xS=i,xS}var MS,eR;function sAe(){if(eR)return MS;eR=1;var n=IG(),e=1,t=Object.prototype,i=t.hasOwnProperty;function r(a,l,o,m,C,S){var O=o&e,U=n(a),K=U.length,z=n(l),j=z.length;if(K!=j&&!O)return!1;for(var Q=K;Q--;){var ee=U[Q];if(!(O?ee in l:i.call(l,ee)))return!1}var V=S.get(a),ae=S.get(l);if(V&&ae)return V==l&&ae==a;var ne=!0;S.set(a,l),S.set(l,a);for(var Z=O;++Q<K;){ee=U[Q];var oe=a[ee],W=l[ee];if(m)var ue=O?m(W,oe,ee,l,a,S):m(oe,W,ee,a,l,S);if(!(ue===void 0?oe===W||C(oe,W,o,m,S):ue)){ne=!1;break}Z||(Z=ee=="constructor")}if(ne&&!Z){var ge=a.constructor,ye=l.constructor;ge!=ye&&"constructor"in a&&"constructor"in l&&!(typeof ge=="function"&&ge instanceof ge&&typeof ye=="function"&&ye instanceof ye)&&(ne=!1)}return S.delete(a),S.delete(l),ne}return MS=r,MS}var SS,tR;function lAe(){if(tR)return SS;tR=1;var n=ny(),e=cp(),t=n(e,"DataView");return SS=t,SS}var wS,nR;function AAe(){if(nR)return wS;nR=1;var n=ny(),e=cp(),t=n(e,"Promise");return wS=t,wS}var ES,iR;function uAe(){if(iR)return ES;iR=1;var n=ny(),e=cp(),t=n(e,"Set");return ES=t,ES}var BS,rR;function cAe(){if(rR)return BS;rR=1;var n=ny(),e=cp(),t=n(e,"WeakMap");return BS=t,BS}var OS,oR;function q2(){if(oR)return OS;oR=1;var n=lAe(),e=Q8(),t=AAe(),i=uAe(),r=cAe(),a=ty(),l=MG(),o="[object Map]",m="[object Object]",C="[object Promise]",S="[object Set]",O="[object WeakMap]",U="[object DataView]",K=l(n),z=l(e),j=l(t),Q=l(i),ee=l(r),V=a;return(n&&V(new n(new ArrayBuffer(1)))!=U||e&&V(new e)!=o||t&&V(t.resolve())!=C||i&&V(new i)!=S||r&&V(new r)!=O)&&(V=function(ae){var ne=a(ae),Z=ne==m?ae.constructor:void 0,oe=Z?l(Z):"";if(oe)switch(oe){case K:return U;case z:return o;case j:return C;case Q:return S;case ee:return O}return ne}),OS=V,OS}var IS,aR;function hAe(){if(aR)return IS;aR=1;var n=Y2(),e=SG(),t=oAe(),i=sAe(),r=q2(),a=If(),l=z2(),o=z8(),m=1,C="[object Arguments]",S="[object Array]",O="[object Object]",U=Object.prototype,K=U.hasOwnProperty;function z(j,Q,ee,V,ae,ne){var Z=a(j),oe=a(Q),W=Z?S:r(j),ue=oe?S:r(Q);W=W==C?O:W,ue=ue==C?O:ue;var ge=W==O,ye=ue==O,Me=W==ue;if(Me&&l(j)){if(!l(Q))return!1;Z=!0,ge=!1}if(Me&&!ge)return ne||(ne=new n),Z||o(j)?e(j,Q,ee,V,ae,ne):t(j,Q,W,ee,V,ae,ne);if(!(ee&m)){var Be=ge&&K.call(j,"__wrapped__"),we=ye&&K.call(Q,"__wrapped__");if(Be||we){var qe=Be?j.value():j,xe=we?Q.value():Q;return ne||(ne=new n),ae(qe,xe,ee,V,ne)}}return Me?(ne||(ne=new n),i(j,Q,ee,V,ae,ne)):!1}return IS=z,IS}var TS,sR;function TG(){if(sR)return TS;sR=1;var n=hAe(),e=r0();function t(i,r,a,l,o){return i===r?!0:i==null||r==null||!e(i)&&!e(r)?i!==i&&r!==r:n(i,r,a,l,t,o)}return TS=t,TS}var kS,lR;function dAe(){if(lR)return kS;lR=1;var n=Y2(),e=TG(),t=1,i=2;function r(a,l,o,m){var C=o.length,S=C,O=!m;if(a==null)return!S;for(a=Object(a);C--;){var U=o[C];if(O&&U[2]?U[1]!==a[U[0]]:!(U[0]in a))return!1}for(;++C<S;){U=o[C];var K=U[0],z=a[K],j=U[1];if(O&&U[2]){if(z===void 0&&!(K in a))return!1}else{var Q=new n;if(m)var ee=m(z,j,K,a,l,Q);if(!(ee===void 0?e(j,z,t|i,m,Q):ee))return!1}}return!0}return kS=r,kS}var DS,AR;function kG(){if(AR)return DS;AR=1;var n=xm();function e(t){return t===t&&!n(t)}return DS=e,DS}var RS,uR;function fAe(){if(uR)return RS;uR=1;var n=kG(),e=wb();function t(i){for(var r=e(i),a=r.length;a--;){var l=r[a],o=i[l];r[a]=[l,o,n(o)]}return r}return RS=t,RS}var PS,cR;function DG(){if(cR)return PS;cR=1;function n(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==void 0||e in Object(i))}}return PS=n,PS}var KS,hR;function mAe(){if(hR)return KS;hR=1;var n=dAe(),e=fAe(),t=DG();function i(r){var a=e(r);return a.length==1&&a[0][2]?t(a[0][0],a[0][1]):function(l){return l===r||n(l,r,a)}}return KS=i,KS}var US,dR;function H2(){if(dR)return US;dR=1;var n=ty(),e=r0(),t="[object Symbol]";function i(r){return typeof r=="symbol"||e(r)&&n(r)==t}return US=i,US}var LS,fR;function H8(){if(fR)return LS;fR=1;var n=If(),e=H2(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function r(a,l){if(n(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||e(a)?!0:i.test(a)||!t.test(a)||l!=null&&a in Object(l)}return LS=r,LS}var FS,mR;function pAe(){if(mR)return FS;mR=1;var n=Y8(),e="Expected a function";function t(i,r){if(typeof i!="function"||r!=null&&typeof r!="function")throw new TypeError(e);var a=function(){var l=arguments,o=r?r.apply(this,l):l[0],m=a.cache;if(m.has(o))return m.get(o);var C=i.apply(this,l);return a.cache=m.set(o,C)||m,C};return a.cache=new(t.Cache||n),a}return t.Cache=n,FS=t,FS}var zS,pR;function gAe(){if(pR)return zS;pR=1;var n=pAe(),e=500;function t(i){var r=n(i,function(l){return a.size===e&&a.clear(),l}),a=r.cache;return r}return zS=t,zS}var NS,gR;function yAe(){if(gR)return NS;gR=1;var n=gAe(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,i=n(function(r){var a=[];return r.charCodeAt(0)===46&&a.push(""),r.replace(e,function(l,o,m,C){a.push(m?C.replace(t,"$1"):o||l)}),a});return NS=i,NS}var GS,yR;function vAe(){if(yR)return GS;yR=1;var n=Sb(),e=xG(),t=If(),i=H2(),r=n?n.prototype:void 0,a=r?r.toString:void 0;function l(o){if(typeof o=="string")return o;if(t(o))return e(o,l)+"";if(i(o))return a?a.call(o):"";var m=o+"";return m=="0"&&1/o==-1/0?"-0":m}return GS=l,GS}var jS,vR;function CAe(){if(vR)return jS;vR=1;var n=vAe();function e(t){return t==null?"":n(t)}return jS=e,jS}var WS,CR;function RG(){if(CR)return WS;CR=1;var n=If(),e=H8(),t=yAe(),i=CAe();function r(a,l){return n(a)?a:e(a,l)?[a]:t(i(a))}return WS=r,WS}var QS,_R;function V2(){if(_R)return QS;_R=1;var n=H2();function e(t){if(typeof t=="string"||n(t))return t;var i=t+"";return i=="0"&&1/t==-1/0?"-0":i}return QS=e,QS}var YS,bR;function PG(){if(bR)return YS;bR=1;var n=RG(),e=V2();function t(i,r){r=n(r,i);for(var a=0,l=r.length;i!=null&&a<l;)i=i[e(r[a++])];return a&&a==l?i:void 0}return YS=t,YS}var qS,xR;function _Ae(){if(xR)return qS;xR=1;var n=PG();function e(t,i,r){var a=t==null?void 0:n(t,i);return a===void 0?r:a}return qS=e,qS}var HS,MR;function bAe(){if(MR)return HS;MR=1;function n(e,t){return e!=null&&t in Object(e)}return HS=n,HS}var VS,SR;function xAe(){if(SR)return VS;SR=1;var n=RG(),e=P8(),t=If(),i=K8(),r=U8(),a=V2();function l(o,m,C){m=n(m,o);for(var S=-1,O=m.length,U=!1;++S<O;){var K=a(m[S]);if(!(U=o!=null&&C(o,K)))break;o=o[K]}return U||++S!=O?U:(O=o==null?0:o.length,!!O&&r(O)&&i(K,O)&&(t(o)||e(o)))}return VS=l,VS}var $S,wR;function MAe(){if(wR)return $S;wR=1;var n=bAe(),e=xAe();function t(i,r){return i!=null&&e(i,r,n)}return $S=t,$S}var ZS,ER;function SAe(){if(ER)return ZS;ER=1;var n=TG(),e=_Ae(),t=MAe(),i=H8(),r=kG(),a=DG(),l=V2(),o=1,m=2;function C(S,O){return i(S)&&r(O)?a(l(S),O):function(U){var K=e(U,S);return K===void 0&&K===O?t(U,S):n(O,K,o|m)}}return ZS=C,ZS}var XS,BR;function wAe(){if(BR)return XS;BR=1;function n(e){return function(t){return t?.[e]}}return XS=n,XS}var JS,OR;function EAe(){if(OR)return JS;OR=1;var n=PG();function e(t){return function(i){return n(i,t)}}return JS=e,JS}var ew,IR;function BAe(){if(IR)return ew;IR=1;var n=wAe(),e=EAe(),t=H8(),i=V2();function r(a){return t(a)?n(i(a)):e(a)}return ew=r,ew}var tw,TR;function OAe(){if(TR)return tw;TR=1;var n=mAe(),e=SAe(),t=N2(),i=If(),r=BAe();function a(l){return typeof l=="function"?l:l==null?t:typeof l=="object"?i(l)?e(l[0],l[1]):n(l):r(l)}return tw=a,tw}var nw,kR;function IAe(){if(kR)return nw;kR=1;var n=Jv();function e(t,i){return function(r,a){if(r==null)return r;if(!n(r))return t(r,a);for(var l=r.length,o=i?l:-1,m=Object(r);(i?o--:++o<l)&&a(m[o],o,m)!==!1;);return r}}return nw=e,nw}var iw,DR;function KG(){if(DR)return iw;DR=1;var n=CG(),e=IAe(),t=e(n);return iw=t,iw}var rw,RR;function TAe(){if(RR)return rw;RR=1;var n=KG(),e=Jv();function t(i,r){var a=-1,l=e(i)?Array(i.length):[];return n(i,function(o,m,C){l[++a]=r(o,m,C)}),l}return rw=t,rw}var ow,PR;function kAe(){if(PR)return ow;PR=1;var n=xG(),e=OAe(),t=TAe(),i=If();function r(a,l){var o=i(a)?n:t;return o(a,e(l,3))}return ow=r,ow}var KR;function DAe(){if(KR)return Ly;KR=1,Object.defineProperty(Ly,"__esModule",{value:!0}),Ly.flattenNames=void 0;var n=yle(),e=m(n),t=j8(),i=m(t),r=bG(),a=m(r),l=kAe(),o=m(l);function m(S){return S&&S.__esModule?S:{default:S}}var C=Ly.flattenNames=function S(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],U=[];return(0,o.default)(O,function(K){Array.isArray(K)?S(K).map(function(z){return U.push(z)}):(0,a.default)(K)?(0,i.default)(K,function(z,j){z===!0&&U.push(j),U.push(j+"-"+z)}):(0,e.default)(K)&&U.push(K)}),U};return Ly.default=C,Ly}var Fy={},aw,UR;function UG(){if(UR)return aw;UR=1;function n(e,t){for(var i=-1,r=e==null?0:e.length;++i<r&&t(e[i],i,e)!==!1;);return e}return aw=n,aw}var sw,LR;function LG(){if(LR)return sw;LR=1;var n=ny(),e=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}}();return sw=e,sw}var lw,FR;function V8(){if(FR)return lw;FR=1;var n=LG();function e(t,i,r){i=="__proto__"&&n?n(t,i,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[i]=r}return lw=e,lw}var Aw,zR;function FG(){if(zR)return Aw;zR=1;var n=V8(),e=Eb(),t=Object.prototype,i=t.hasOwnProperty;function r(a,l,o){var m=a[l];(!(i.call(a,l)&&e(m,o))||o===void 0&&!(l in a))&&n(a,l,o)}return Aw=r,Aw}var uw,NR;function Bb(){if(NR)return uw;NR=1;var n=FG(),e=V8();function t(i,r,a,l){var o=!a;a||(a={});for(var m=-1,C=r.length;++m<C;){var S=r[m],O=l?l(a[S],i[S],S,a,i):void 0;O===void 0&&(O=i[S]),o?e(a,S,O):n(a,S,O)}return a}return uw=t,uw}var cw,GR;function RAe(){if(GR)return cw;GR=1;var n=Bb(),e=wb();function t(i,r){return i&&n(r,e(r),i)}return cw=t,cw}var hw,jR;function PAe(){if(jR)return hw;jR=1;function n(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}return hw=n,hw}var dw,WR;function KAe(){if(WR)return dw;WR=1;var n=xm(),e=N8(),t=PAe(),i=Object.prototype,r=i.hasOwnProperty;function a(l){if(!n(l))return t(l);var o=e(l),m=[];for(var C in l)C=="constructor"&&(o||!r.call(l,C))||m.push(C);return m}return dw=a,dw}var fw,QR;function Ob(){if(QR)return fw;QR=1;var n=yG(),e=KAe(),t=Jv();function i(r){return t(r)?n(r,!0):e(r)}return fw=i,fw}var mw,YR;function UAe(){if(YR)return mw;YR=1;var n=Bb(),e=Ob();function t(i,r){return i&&n(r,e(r),i)}return mw=t,mw}var GC={exports:{}};GC.exports;var qR;function zG(){return qR||(qR=1,function(n,e){var t=cp(),i=e&&!e.nodeType&&e,r=i&&!0&&n&&!n.nodeType&&n,a=r&&r.exports===i,l=a?t.Buffer:void 0,o=l?l.allocUnsafe:void 0;function m(C,S){if(S)return C.slice();var O=C.length,U=o?o(O):new C.constructor(O);return C.copy(U),U}n.exports=m}(GC,GC.exports)),GC.exports}var pw,HR;function NG(){if(HR)return pw;HR=1;function n(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}return pw=n,pw}var gw,VR;function LAe(){if(VR)return gw;VR=1;var n=Bb(),e=q8();function t(i,r){return n(i,e(i),r)}return gw=t,gw}var yw,$R;function GG(){if($R)return yw;$R=1;var n=EG(),e=W8(),t=q8(),i=OG(),r=Object.getOwnPropertySymbols,a=r?function(l){for(var o=[];l;)n(o,t(l)),l=e(l);return o}:i;return yw=a,yw}var vw,ZR;function FAe(){if(ZR)return vw;ZR=1;var n=Bb(),e=GG();function t(i,r){return n(i,e(i),r)}return vw=t,vw}var Cw,XR;function zAe(){if(XR)return Cw;XR=1;var n=BG(),e=GG(),t=Ob();function i(r){return n(r,t,e)}return Cw=i,Cw}var _w,JR;function NAe(){if(JR)return _w;JR=1;var n=Object.prototype,e=n.hasOwnProperty;function t(i){var r=i.length,a=new i.constructor(r);return r&&typeof i[0]=="string"&&e.call(i,"index")&&(a.index=i.index,a.input=i.input),a}return _w=t,_w}var bw,eP;function $8(){if(eP)return bw;eP=1;var n=wG();function e(t){var i=new t.constructor(t.byteLength);return new n(i).set(new n(t)),i}return bw=e,bw}var xw,tP;function GAe(){if(tP)return xw;tP=1;var n=$8();function e(t,i){var r=i?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}return xw=e,xw}var Mw,nP;function jAe(){if(nP)return Mw;nP=1;var n=/\w*$/;function e(t){var i=new t.constructor(t.source,n.exec(t));return i.lastIndex=t.lastIndex,i}return Mw=e,Mw}var Sw,iP;function WAe(){if(iP)return Sw;iP=1;var n=Sb(),e=n?n.prototype:void 0,t=e?e.valueOf:void 0;function i(r){return t?Object(t.call(r)):{}}return Sw=i,Sw}var ww,rP;function jG(){if(rP)return ww;rP=1;var n=$8();function e(t,i){var r=i?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}return ww=e,ww}var Ew,oP;function QAe(){if(oP)return Ew;oP=1;var n=$8(),e=GAe(),t=jAe(),i=WAe(),r=jG(),a="[object Boolean]",l="[object Date]",o="[object Map]",m="[object Number]",C="[object RegExp]",S="[object Set]",O="[object String]",U="[object Symbol]",K="[object ArrayBuffer]",z="[object DataView]",j="[object Float32Array]",Q="[object Float64Array]",ee="[object Int8Array]",V="[object Int16Array]",ae="[object Int32Array]",ne="[object Uint8Array]",Z="[object Uint8ClampedArray]",oe="[object Uint16Array]",W="[object Uint32Array]";function ue(ge,ye,Me){var Be=ge.constructor;switch(ye){case K:return n(ge);case a:case l:return new Be(+ge);case z:return e(ge,Me);case j:case Q:case ee:case V:case ae:case ne:case Z:case oe:case W:return r(ge,Me);case o:return new Be;case m:case O:return new Be(ge);case C:return t(ge);case S:return new Be;case U:return i(ge)}}return Ew=ue,Ew}var Bw,aP;function YAe(){if(aP)return Bw;aP=1;var n=xm(),e=Object.create,t=function(){function i(){}return function(r){if(!n(r))return{};if(e)return e(r);i.prototype=r;var a=new i;return i.prototype=void 0,a}}();return Bw=t,Bw}var Ow,sP;function WG(){if(sP)return Ow;sP=1;var n=YAe(),e=W8(),t=N8();function i(r){return typeof r.constructor=="function"&&!t(r)?n(e(r)):{}}return Ow=i,Ow}var Iw,lP;function qAe(){if(lP)return Iw;lP=1;var n=q2(),e=r0(),t="[object Map]";function i(r){return e(r)&&n(r)==t}return Iw=i,Iw}var Tw,AP;function HAe(){if(AP)return Tw;AP=1;var n=qAe(),e=L8(),t=F8(),i=t&&t.isMap,r=i?e(i):n;return Tw=r,Tw}var kw,uP;function VAe(){if(uP)return kw;uP=1;var n=q2(),e=r0(),t="[object Set]";function i(r){return e(r)&&n(r)==t}return kw=i,kw}var Dw,cP;function $Ae(){if(cP)return Dw;cP=1;var n=VAe(),e=L8(),t=F8(),i=t&&t.isSet,r=i?e(i):n;return Dw=r,Dw}var Rw,hP;function ZAe(){if(hP)return Rw;hP=1;var n=Y2(),e=UG(),t=FG(),i=RAe(),r=UAe(),a=zG(),l=NG(),o=LAe(),m=FAe(),C=IG(),S=zAe(),O=q2(),U=NAe(),K=QAe(),z=WG(),j=If(),Q=z2(),ee=HAe(),V=xm(),ae=$Ae(),ne=wb(),Z=Ob(),oe=1,W=2,ue=4,ge="[object Arguments]",ye="[object Array]",Me="[object Boolean]",Be="[object Date]",we="[object Error]",qe="[object Function]",xe="[object GeneratorFunction]",ze="[object Map]",ot="[object Number]",yt="[object Object]",nt="[object RegExp]",be="[object Set]",Ne="[object String]",tt="[object Symbol]",lt="[object WeakMap]",It="[object ArrayBuffer]",pt="[object DataView]",St="[object Float32Array]",Rt="[object Float64Array]",Le="[object Int8Array]",Pe="[object Int16Array]",Re="[object Int32Array]",He="[object Uint8Array]",bt="[object Uint8ClampedArray]",vt="[object Uint16Array]",Ot="[object Uint32Array]",qt={};qt[ge]=qt[ye]=qt[It]=qt[pt]=qt[Me]=qt[Be]=qt[St]=qt[Rt]=qt[Le]=qt[Pe]=qt[Re]=qt[ze]=qt[ot]=qt[yt]=qt[nt]=qt[be]=qt[Ne]=qt[tt]=qt[He]=qt[bt]=qt[vt]=qt[Ot]=!0,qt[we]=qt[qe]=qt[lt]=!1;function Kt(on,Jn,Wt,$n,On,Bn){var In,Bi=Jn&oe,ei=Jn&W,Kn=Jn&ue;if(Wt&&(In=On?Wt(on,$n,On,Bn):Wt(on)),In!==void 0)return In;if(!V(on))return on;var Ge=j(on);if(Ge){if(In=U(on),!Bi)return l(on,In)}else{var de=O(on),re=de==qe||de==xe;if(Q(on))return a(on,Bi);if(de==yt||de==ge||re&&!On){if(In=ei||re?{}:z(on),!Bi)return ei?m(on,r(In,on)):o(on,i(In,on))}else{if(!qt[de])return On?on:{};In=K(on,de,Bi)}}Bn||(Bn=new n);var le=Bn.get(on);if(le)return le;Bn.set(on,In),ae(on)?on.forEach(function(We){In.add(Kt(We,Jn,Wt,We,on,Bn))}):ee(on)&&on.forEach(function(We,dt){In.set(dt,Kt(We,Jn,Wt,dt,on,Bn))});var me=Kn?ei?S:C:ei?Z:ne,Te=Ge?void 0:me(on);return e(Te||on,function(We,dt){Te&&(dt=We,We=on[dt]),t(In,dt,Kt(We,Jn,Wt,dt,on,Bn))}),In}return Rw=Kt,Rw}var Pw,dP;function XAe(){if(dP)return Pw;dP=1;var n=ZAe(),e=1,t=4;function i(r){return n(r,e|t)}return Pw=i,Pw}var fP;function JAe(){if(fP)return Fy;fP=1,Object.defineProperty(Fy,"__esModule",{value:!0}),Fy.mergeClasses=void 0;var n=j8(),e=a(n),t=XAe(),i=a(t),r=Object.assign||function(o){for(var m=1;m<arguments.length;m++){var C=arguments[m];for(var S in C)Object.prototype.hasOwnProperty.call(C,S)&&(o[S]=C[S])}return o};function a(o){return o&&o.__esModule?o:{default:o}}var l=Fy.mergeClasses=function(m){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],S=m.default&&(0,i.default)(m.default)||{};return C.map(function(O){var U=m[O];return U&&(0,e.default)(U,function(K,z){S[z]||(S[z]={}),S[z]=r({},S[z],U[z])}),O}),S};return Fy.default=l,Fy}var zy={},mP;function eue(){if(mP)return zy;mP=1,Object.defineProperty(zy,"__esModule",{value:!0}),zy.autoprefix=void 0;var n=j8(),e=i(n),t=Object.assign||function(l){for(var o=1;o<arguments.length;o++){var m=arguments[o];for(var C in m)Object.prototype.hasOwnProperty.call(m,C)&&(l[C]=m[C])}return l};function i(l){return l&&l.__esModule?l:{default:l}}var r={borderRadius:function(o){return{msBorderRadius:o,MozBorderRadius:o,OBorderRadius:o,WebkitBorderRadius:o,borderRadius:o}},boxShadow:function(o){return{msBoxShadow:o,MozBoxShadow:o,OBoxShadow:o,WebkitBoxShadow:o,boxShadow:o}},userSelect:function(o){return{WebkitTouchCallout:o,KhtmlUserSelect:o,MozUserSelect:o,msUserSelect:o,WebkitUserSelect:o,userSelect:o}},flex:function(o){return{WebkitBoxFlex:o,MozBoxFlex:o,WebkitFlex:o,msFlex:o,flex:o}},flexBasis:function(o){return{WebkitFlexBasis:o,flexBasis:o}},justifyContent:function(o){return{WebkitJustifyContent:o,justifyContent:o}},transition:function(o){return{msTransition:o,MozTransition:o,OTransition:o,WebkitTransition:o,transition:o}},transform:function(o){return{msTransform:o,MozTransform:o,OTransform:o,WebkitTransform:o,transform:o}},absolute:function(o){var m=o&&o.split(" ");return{position:"absolute",top:m&&m[0],right:m&&m[1],bottom:m&&m[2],left:m&&m[3]}},extend:function(o,m){var C=m[o];return C||{extend:o}}},a=zy.autoprefix=function(o){var m={};return(0,e.default)(o,function(C,S){var O={};(0,e.default)(C,function(U,K){var z=r[K];z?O=t({},O,z(U)):O[K]=U}),m[S]=O}),m};return zy.default=a,zy}var Ny={},pP;function tue(){if(pP)return Ny;pP=1,Object.defineProperty(Ny,"__esModule",{value:!0}),Ny.hover=void 0;var n=Object.assign||function(m){for(var C=1;C<arguments.length;C++){var S=arguments[C];for(var O in S)Object.prototype.hasOwnProperty.call(S,O)&&(m[O]=S[O])}return m},e=pl(),t=i(e);function i(m){return m&&m.__esModule?m:{default:m}}function r(m,C){if(!(m instanceof C))throw new TypeError("Cannot call a class as a function")}function a(m,C){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:m}function l(m,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);m.prototype=Object.create(C&&C.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(m,C):m.__proto__=C)}var o=Ny.hover=function(C){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(O){l(U,O);function U(){var K,z,j,Q;r(this,U);for(var ee=arguments.length,V=Array(ee),ae=0;ae<ee;ae++)V[ae]=arguments[ae];return Q=(z=(j=a(this,(K=U.__proto__||Object.getPrototypeOf(U)).call.apply(K,[this].concat(V))),j),j.state={hover:!1},j.handleMouseOver=function(){return j.setState({hover:!0})},j.handleMouseOut=function(){return j.setState({hover:!1})},j.render=function(){return t.default.createElement(S,{onMouseOver:j.handleMouseOver,onMouseOut:j.handleMouseOut},t.default.createElement(C,n({},j.props,j.state)))},z),a(j,Q)}return U}(t.default.Component)};return Ny.default=o,Ny}var Gy={},gP;function nue(){if(gP)return Gy;gP=1,Object.defineProperty(Gy,"__esModule",{value:!0}),Gy.active=void 0;var n=Object.assign||function(m){for(var C=1;C<arguments.length;C++){var S=arguments[C];for(var O in S)Object.prototype.hasOwnProperty.call(S,O)&&(m[O]=S[O])}return m},e=pl(),t=i(e);function i(m){return m&&m.__esModule?m:{default:m}}function r(m,C){if(!(m instanceof C))throw new TypeError("Cannot call a class as a function")}function a(m,C){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:m}function l(m,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);m.prototype=Object.create(C&&C.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(m,C):m.__proto__=C)}var o=Gy.active=function(C){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(O){l(U,O);function U(){var K,z,j,Q;r(this,U);for(var ee=arguments.length,V=Array(ee),ae=0;ae<ee;ae++)V[ae]=arguments[ae];return Q=(z=(j=a(this,(K=U.__proto__||Object.getPrototypeOf(U)).call.apply(K,[this].concat(V))),j),j.state={active:!1},j.handleMouseDown=function(){return j.setState({active:!0})},j.handleMouseUp=function(){return j.setState({active:!1})},j.render=function(){return t.default.createElement(S,{onMouseDown:j.handleMouseDown,onMouseUp:j.handleMouseUp},t.default.createElement(C,n({},j.props,j.state)))},z),a(j,Q)}return U}(t.default.Component)};return Gy.default=o,Gy}var hx={},yP;function iue(){if(yP)return hx;yP=1,Object.defineProperty(hx,"__esModule",{value:!0});var n=function(t,i){var r={},a=function(o){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r[o]=m};return t===0&&a("first-child"),t===i-1&&a("last-child"),(t===0||t%2===0)&&a("even"),Math.abs(t%2)===1&&a("odd"),a("nth-child",t),r};return hx.default=n,hx}var vP;function hp(){if(vP)return zd;vP=1,Object.defineProperty(zd,"__esModule",{value:!0}),zd.ReactCSS=zd.loop=zd.handleActive=zd.handleHover=zd.hover=void 0;var n=DAe(),e=U(n),t=JAe(),i=U(t),r=eue(),a=U(r),l=tue(),o=U(l),m=nue(),C=U(m),S=iue(),O=U(S);function U(z){return z&&z.__esModule?z:{default:z}}zd.hover=o.default,zd.handleHover=o.default,zd.handleActive=C.default,zd.loop=O.default;var K=zd.ReactCSS=function(j){for(var Q=arguments.length,ee=Array(Q>1?Q-1:0),V=1;V<Q;V++)ee[V-1]=arguments[V];var ae=(0,e.default)(ee),ne=(0,i.default)(j,ae);return(0,a.default)(ne)};return zd.default=K,zd}var Kw,CP;function QG(){if(CP)return Kw;CP=1;var n=V8(),e=Eb();function t(i,r,a){(a!==void 0&&!e(i[r],a)||a===void 0&&!(r in i))&&n(i,r,a)}return Kw=t,Kw}var Uw,_P;function rue(){if(_P)return Uw;_P=1;var n=Jv(),e=r0();function t(i){return e(i)&&n(i)}return Uw=t,Uw}var Lw,bP;function YG(){if(bP)return Lw;bP=1;function n(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}return Lw=n,Lw}var Fw,xP;function oue(){if(xP)return Fw;xP=1;var n=Bb(),e=Ob();function t(i){return n(i,e(i))}return Fw=t,Fw}var zw,MP;function aue(){if(MP)return zw;MP=1;var n=QG(),e=zG(),t=jG(),i=NG(),r=WG(),a=P8(),l=If(),o=rue(),m=z2(),C=G8(),S=xm(),O=bG(),U=z8(),K=YG(),z=oue();function j(Q,ee,V,ae,ne,Z,oe){var W=K(Q,V),ue=K(ee,V),ge=oe.get(ue);if(ge){n(Q,V,ge);return}var ye=Z?Z(W,ue,V+"",Q,ee,oe):void 0,Me=ye===void 0;if(Me){var Be=l(ue),we=!Be&&m(ue),qe=!Be&&!we&&U(ue);ye=ue,Be||we||qe?l(W)?ye=W:o(W)?ye=i(W):we?(Me=!1,ye=e(ue,!0)):qe?(Me=!1,ye=t(ue,!0)):ye=[]:O(ue)||a(ue)?(ye=W,a(W)?ye=z(W):(!S(W)||C(W))&&(ye=r(ue))):Me=!1}Me&&(oe.set(ue,ye),ne(ye,ue,ae,Z,oe),oe.delete(ue)),n(Q,V,ye)}return zw=j,zw}var Nw,SP;function sue(){if(SP)return Nw;SP=1;var n=Y2(),e=QG(),t=gG(),i=aue(),r=xm(),a=Ob(),l=YG();function o(m,C,S,O,U){m!==C&&t(C,function(K,z){if(U||(U=new n),r(K))i(m,C,z,S,o,O,U);else{var j=O?O(l(m,z),K,z+"",m,C,U):void 0;j===void 0&&(j=K),e(m,z,j)}},a)}return Nw=o,Nw}var Gw,wP;function lue(){if(wP)return Gw;wP=1;function n(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}return Gw=n,Gw}var jw,EP;function Aue(){if(EP)return jw;EP=1;var n=lue(),e=Math.max;function t(i,r,a){return r=e(r===void 0?i.length-1:r,0),function(){for(var l=arguments,o=-1,m=e(l.length-r,0),C=Array(m);++o<m;)C[o]=l[r+o];o=-1;for(var S=Array(r+1);++o<r;)S[o]=l[o];return S[r]=a(C),n(i,this,S)}}return jw=t,jw}var Ww,BP;function uue(){if(BP)return Ww;BP=1;function n(e){return function(){return e}}return Ww=n,Ww}var Qw,OP;function cue(){if(OP)return Qw;OP=1;var n=uue(),e=LG(),t=N2(),i=e?function(r,a){return e(r,"toString",{configurable:!0,enumerable:!1,value:n(a),writable:!0})}:t;return Qw=i,Qw}var Yw,IP;function hue(){if(IP)return Yw;IP=1;var n=800,e=16,t=Date.now;function i(r){var a=0,l=0;return function(){var o=t(),m=e-(o-l);if(l=o,m>0){if(++a>=n)return arguments[0]}else a=0;return r.apply(void 0,arguments)}}return Yw=i,Yw}var qw,TP;function due(){if(TP)return qw;TP=1;var n=cue(),e=hue(),t=e(n);return qw=t,qw}var Hw,kP;function fue(){if(kP)return Hw;kP=1;var n=N2(),e=Aue(),t=due();function i(r,a){return t(e(r,a,n),r+"")}return Hw=i,Hw}var Vw,DP;function mue(){if(DP)return Vw;DP=1;var n=Eb(),e=Jv(),t=K8(),i=xm();function r(a,l,o){if(!i(o))return!1;var m=typeof l;return(m=="number"?e(o)&&t(l,o.length):m=="string"&&l in o)?n(o[l],a):!1}return Vw=r,Vw}var $w,RP;function pue(){if(RP)return $w;RP=1;var n=fue(),e=mue();function t(i){return n(function(r,a){var l=-1,o=a.length,m=o>1?a[o-1]:void 0,C=o>2?a[2]:void 0;for(m=i.length>3&&typeof m=="function"?(o--,m):void 0,C&&e(a[0],a[1],C)&&(m=o<3?void 0:m,o=1),r=Object(r);++l<o;){var S=a[l];S&&i(r,S,l,m)}return r})}return $w=t,$w}var Zw,PP;function qG(){if(PP)return Zw;PP=1;var n=sue(),e=pue(),t=e(function(i,r,a){n(i,r,a)});return Zw=t,Zw}var Xw={},jy={},dx={},KP;function gue(){return KP||(KP=1,Object.defineProperty(dx,"__esModule",{value:!0}),dx.calculateChange=function(e,t,i,r,a){var l=a.clientWidth,o=a.clientHeight,m=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,C=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,S=m-(a.getBoundingClientRect().left+window.pageXOffset),O=C-(a.getBoundingClientRect().top+window.pageYOffset);if(i==="vertical"){var U=void 0;if(O<0?U=0:O>o?U=1:U=Math.round(O*100/o)/100,t.a!==U)return{h:t.h,s:t.s,l:t.l,a:U,source:"rgb"}}else{var K=void 0;if(S<0?K=0:S>l?K=1:K=Math.round(S*100/l)/100,r!==K)return{h:t.h,s:t.s,l:t.l,a:K,source:"rgb"}}return null}),dx}var Wy={},MC={},UP;function yue(){if(UP)return MC;UP=1,Object.defineProperty(MC,"__esModule",{value:!0});var n={},e=MC.render=function(i,r,a,l){if(typeof document>"u"&&!l)return null;var o=l?new l:document.createElement("canvas");o.width=a*2,o.height=a*2;var m=o.getContext("2d");return m?(m.fillStyle=i,m.fillRect(0,0,o.width,o.height),m.fillStyle=r,m.fillRect(0,0,a,a),m.translate(a,a),m.fillRect(0,0,a,a),o.toDataURL()):null};return MC.get=function(i,r,a,l){var o=i+"-"+r+"-"+a+(l?"-server":"");if(n[o])return n[o];var m=e(i,r,a,l);return n[o]=m,m},MC}var LP;function Z8(){if(LP)return Wy;LP=1,Object.defineProperty(Wy,"__esModule",{value:!0}),Wy.Checkboard=void 0;var n=Object.assign||function(S){for(var O=1;O<arguments.length;O++){var U=arguments[O];for(var K in U)Object.prototype.hasOwnProperty.call(U,K)&&(S[K]=U[K])}return S},e=pl(),t=m(e),i=hp(),r=m(i),a=yue(),l=o(a);function o(S){if(S&&S.__esModule)return S;var O={};if(S!=null)for(var U in S)Object.prototype.hasOwnProperty.call(S,U)&&(O[U]=S[U]);return O.default=S,O}function m(S){return S&&S.__esModule?S:{default:S}}var C=Wy.Checkboard=function(O){var U=O.white,K=O.grey,z=O.size,j=O.renderers,Q=O.borderRadius,ee=O.boxShadow,V=O.children,ae=(0,r.default)({default:{grid:{borderRadius:Q,boxShadow:ee,absolute:"0px 0px 0px 0px",background:"url("+l.get(U,K,z,j.canvas)+") center left"}}});return(0,e.isValidElement)(V)?t.default.cloneElement(V,n({},V.props,{style:n({},V.props.style,ae.grid)})):t.default.createElement("div",{style:ae.grid})};return C.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},Wy.default=C,Wy}var FP;function vue(){if(FP)return jy;FP=1,Object.defineProperty(jy,"__esModule",{value:!0}),jy.Alpha=void 0;var n=Object.assign||function(Q){for(var ee=1;ee<arguments.length;ee++){var V=arguments[ee];for(var ae in V)Object.prototype.hasOwnProperty.call(V,ae)&&(Q[ae]=V[ae])}return Q},e=function(){function Q(ee,V){for(var ae=0;ae<V.length;ae++){var ne=V[ae];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(ee,ne.key,ne)}}return function(ee,V,ae){return V&&Q(ee.prototype,V),ae&&Q(ee,ae),ee}}(),t=pl(),i=O(t),r=hp(),a=O(r),l=gue(),o=S(l),m=Z8(),C=O(m);function S(Q){if(Q&&Q.__esModule)return Q;var ee={};if(Q!=null)for(var V in Q)Object.prototype.hasOwnProperty.call(Q,V)&&(ee[V]=Q[V]);return ee.default=Q,ee}function O(Q){return Q&&Q.__esModule?Q:{default:Q}}function U(Q,ee){if(!(Q instanceof ee))throw new TypeError("Cannot call a class as a function")}function K(Q,ee){if(!Q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ee&&(typeof ee=="object"||typeof ee=="function")?ee:Q}function z(Q,ee){if(typeof ee!="function"&&ee!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ee);Q.prototype=Object.create(ee&&ee.prototype,{constructor:{value:Q,enumerable:!1,writable:!0,configurable:!0}}),ee&&(Object.setPrototypeOf?Object.setPrototypeOf(Q,ee):Q.__proto__=ee)}var j=jy.Alpha=function(Q){z(ee,Q);function ee(){var V,ae,ne,Z;U(this,ee);for(var oe=arguments.length,W=Array(oe),ue=0;ue<oe;ue++)W[ue]=arguments[ue];return Z=(ae=(ne=K(this,(V=ee.__proto__||Object.getPrototypeOf(ee)).call.apply(V,[this].concat(W))),ne),ne.handleChange=function(ge){var ye=o.calculateChange(ge,ne.props.hsl,ne.props.direction,ne.props.a,ne.container);ye&&typeof ne.props.onChange=="function"&&ne.props.onChange(ye,ge)},ne.handleMouseDown=function(ge){ne.handleChange(ge),window.addEventListener("mousemove",ne.handleChange),window.addEventListener("mouseup",ne.handleMouseUp)},ne.handleMouseUp=function(){ne.unbindEventListeners()},ne.unbindEventListeners=function(){window.removeEventListener("mousemove",ne.handleChange),window.removeEventListener("mouseup",ne.handleMouseUp)},ae),K(ne,Z)}return e(ee,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var ae=this,ne=this.props.rgb,Z=(0,a.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+ne.r+","+ne.g+","+ne.b+`, 0) 0%,
           rgba(`+ne.r+","+ne.g+","+ne.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:ne.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+ne.r+","+ne.g+","+ne.b+`, 0) 0%,
           rgba(`+ne.r+","+ne.g+","+ne.b+", 1) 100%)"},pointer:{left:0,top:ne.a*100+"%"}},overwrite:n({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return i.default.createElement("div",{style:Z.alpha},i.default.createElement("div",{style:Z.checkboard},i.default.createElement(C.default,{renderers:this.props.renderers})),i.default.createElement("div",{style:Z.gradient}),i.default.createElement("div",{style:Z.container,ref:function(W){return ae.container=W},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},i.default.createElement("div",{style:Z.pointer},this.props.pointer?i.default.createElement(this.props.pointer,this.props):i.default.createElement("div",{style:Z.slider}))))}}]),ee}(t.PureComponent||t.Component);return jy.default=j,jy}var Qy={},zP;function Cue(){if(zP)return Qy;zP=1,Object.defineProperty(Qy,"__esModule",{value:!0}),Qy.EditableInput=void 0;var n=function(){function V(ae,ne){for(var Z=0;Z<ne.length;Z++){var oe=ne[Z];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(ae,oe.key,oe)}}return function(ae,ne,Z){return ne&&V(ae.prototype,ne),Z&&V(ae,Z),ae}}(),e=pl(),t=a(e),i=hp(),r=a(i);function a(V){return V&&V.__esModule?V:{default:V}}function l(V,ae,ne){return ae in V?Object.defineProperty(V,ae,{value:ne,enumerable:!0,configurable:!0,writable:!0}):V[ae]=ne,V}function o(V,ae){if(!(V instanceof ae))throw new TypeError("Cannot call a class as a function")}function m(V,ae){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ae&&(typeof ae=="object"||typeof ae=="function")?ae:V}function C(V,ae){if(typeof ae!="function"&&ae!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ae);V.prototype=Object.create(ae&&ae.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),ae&&(Object.setPrototypeOf?Object.setPrototypeOf(V,ae):V.__proto__=ae)}var S=1,O=38,U=40,K=[O,U],z=function(ae){return K.indexOf(ae)>-1},j=function(ae){return Number(String(ae).replace(/%/g,""))},Q=1,ee=Qy.EditableInput=function(V){C(ae,V);function ae(ne){o(this,ae);var Z=m(this,(ae.__proto__||Object.getPrototypeOf(ae)).call(this));return Z.handleBlur=function(){Z.state.blurValue&&Z.setState({value:Z.state.blurValue,blurValue:null})},Z.handleChange=function(oe){Z.setUpdatedValue(oe.target.value,oe)},Z.handleKeyDown=function(oe){var W=j(oe.target.value);if(!isNaN(W)&&z(oe.keyCode)){var ue=Z.getArrowOffset(),ge=oe.keyCode===O?W+ue:W-ue;Z.setUpdatedValue(ge,oe)}},Z.handleDrag=function(oe){if(Z.props.dragLabel){var W=Math.round(Z.props.value+oe.movementX);W>=0&&W<=Z.props.dragMax&&Z.props.onChange&&Z.props.onChange(Z.getValueObjectWithLabel(W),oe)}},Z.handleMouseDown=function(oe){Z.props.dragLabel&&(oe.preventDefault(),Z.handleDrag(oe),window.addEventListener("mousemove",Z.handleDrag),window.addEventListener("mouseup",Z.handleMouseUp))},Z.handleMouseUp=function(){Z.unbindEventListeners()},Z.unbindEventListeners=function(){window.removeEventListener("mousemove",Z.handleDrag),window.removeEventListener("mouseup",Z.handleMouseUp)},Z.state={value:String(ne.value).toUpperCase(),blurValue:String(ne.value).toUpperCase()},Z.inputId="rc-editable-input-"+Q++,Z}return n(ae,[{key:"componentDidUpdate",value:function(Z,oe){this.props.value!==this.state.value&&(Z.value!==this.props.value||oe.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(Z){return l({},this.props.label,Z)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||S}},{key:"setUpdatedValue",value:function(Z,oe){var W=this.props.label?this.getValueObjectWithLabel(Z):Z;this.props.onChange&&this.props.onChange(W,oe),this.setState({value:Z})}},{key:"render",value:function(){var Z=this,oe=(0,r.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return t.default.createElement("div",{style:oe.wrap},t.default.createElement("input",{id:this.inputId,style:oe.input,ref:function(ue){return Z.input=ue},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?t.default.createElement("label",{htmlFor:this.inputId,style:oe.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),ae}(e.PureComponent||e.Component);return Qy.default=ee,Qy}var Yy={},fx={},NP;function _ue(){return NP||(NP=1,Object.defineProperty(fx,"__esModule",{value:!0}),fx.calculateChange=function(e,t,i,r){var a=r.clientWidth,l=r.clientHeight,o=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,m=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,C=o-(r.getBoundingClientRect().left+window.pageXOffset),S=m-(r.getBoundingClientRect().top+window.pageYOffset);if(t==="vertical"){var O=void 0;if(S<0)O=359;else if(S>l)O=0;else{var U=-(S*100/l)+100;O=360*U/100}if(i.h!==O)return{h:O,s:i.s,l:i.l,a:i.a,source:"hsl"}}else{var K=void 0;if(C<0)K=0;else if(C>a)K=359;else{var z=C*100/a;K=360*z/100}if(i.h!==K)return{h:K,s:i.s,l:i.l,a:i.a,source:"hsl"}}return null}),fx}var GP;function bue(){if(GP)return Yy;GP=1,Object.defineProperty(Yy,"__esModule",{value:!0}),Yy.Hue=void 0;var n=function(){function K(z,j){for(var Q=0;Q<j.length;Q++){var ee=j[Q];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty(z,ee.key,ee)}}return function(z,j,Q){return j&&K(z.prototype,j),Q&&K(z,Q),z}}(),e=pl(),t=m(e),i=hp(),r=m(i),a=_ue(),l=o(a);function o(K){if(K&&K.__esModule)return K;var z={};if(K!=null)for(var j in K)Object.prototype.hasOwnProperty.call(K,j)&&(z[j]=K[j]);return z.default=K,z}function m(K){return K&&K.__esModule?K:{default:K}}function C(K,z){if(!(K instanceof z))throw new TypeError("Cannot call a class as a function")}function S(K,z){if(!K)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:K}function O(K,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);K.prototype=Object.create(z&&z.prototype,{constructor:{value:K,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(K,z):K.__proto__=z)}var U=Yy.Hue=function(K){O(z,K);function z(){var j,Q,ee,V;C(this,z);for(var ae=arguments.length,ne=Array(ae),Z=0;Z<ae;Z++)ne[Z]=arguments[Z];return V=(Q=(ee=S(this,(j=z.__proto__||Object.getPrototypeOf(z)).call.apply(j,[this].concat(ne))),ee),ee.handleChange=function(oe){var W=l.calculateChange(oe,ee.props.direction,ee.props.hsl,ee.container);W&&typeof ee.props.onChange=="function"&&ee.props.onChange(W,oe)},ee.handleMouseDown=function(oe){ee.handleChange(oe),window.addEventListener("mousemove",ee.handleChange),window.addEventListener("mouseup",ee.handleMouseUp)},ee.handleMouseUp=function(){ee.unbindEventListeners()},Q),S(ee,V)}return n(z,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var Q=this,ee=this.props.direction,V=ee===void 0?"horizontal":ee,ae=(0,r.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:V==="vertical"});return t.default.createElement("div",{style:ae.hue},t.default.createElement("div",{className:"hue-"+V,style:ae.container,ref:function(Z){return Q.container=Z},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),t.default.createElement("div",{style:ae.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:ae.slider}))))}}]),z}(e.PureComponent||e.Component);return Yy.default=U,Yy}var qy={},jP;function xue(){if(jP)return qy;jP=1,Object.defineProperty(qy,"__esModule",{value:!0}),qy.Raised=void 0;var n=pl(),e=m(n),t=i0(),i=m(t),r=hp(),a=m(r),l=qG(),o=m(l);function m(S){return S&&S.__esModule?S:{default:S}}var C=qy.Raised=function(O){var U=O.zDepth,K=O.radius,z=O.background,j=O.children,Q=O.styles,ee=Q===void 0?{}:Q,V=(0,a.default)((0,o.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+U+"px "+U*4+"px rgba(0,0,0,.24)",borderRadius:K,background:z}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},ee),{"zDepth-1":U===1});return e.default.createElement("div",{style:V.wrap},e.default.createElement("div",{style:V.bg}),e.default.createElement("div",{style:V.content},j))};return C.propTypes={background:i.default.string,zDepth:i.default.oneOf([0,1,2,3,4,5]),radius:i.default.number,styles:i.default.object},C.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},qy.default=C,qy}var Hy={},Jw,WP;function Mue(){if(WP)return Jw;WP=1;var n=cp(),e=function(){return n.Date.now()};return Jw=e,Jw}var eE,QP;function Sue(){if(QP)return eE;QP=1;var n=/\s/;function e(t){for(var i=t.length;i--&&n.test(t.charAt(i)););return i}return eE=e,eE}var tE,YP;function wue(){if(YP)return tE;YP=1;var n=Sue(),e=/^\s+/;function t(i){return i&&i.slice(0,n(i)+1).replace(e,"")}return tE=t,tE}var nE,qP;function Eue(){if(qP)return nE;qP=1;var n=wue(),e=xm(),t=H2(),i=NaN,r=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt;function m(C){if(typeof C=="number")return C;if(t(C))return i;if(e(C)){var S=typeof C.valueOf=="function"?C.valueOf():C;C=e(S)?S+"":S}if(typeof C!="string")return C===0?C:+C;C=n(C);var O=a.test(C);return O||l.test(C)?o(C.slice(2),O?2:8):r.test(C)?i:+C}return nE=m,nE}var iE,HP;function HG(){if(HP)return iE;HP=1;var n=xm(),e=Mue(),t=Eue(),i="Expected a function",r=Math.max,a=Math.min;function l(o,m,C){var S,O,U,K,z,j,Q=0,ee=!1,V=!1,ae=!0;if(typeof o!="function")throw new TypeError(i);m=t(m)||0,n(C)&&(ee=!!C.leading,V="maxWait"in C,U=V?r(t(C.maxWait)||0,m):U,ae="trailing"in C?!!C.trailing:ae);function ne(we){var qe=S,xe=O;return S=O=void 0,Q=we,K=o.apply(xe,qe),K}function Z(we){return Q=we,z=setTimeout(ue,m),ee?ne(we):K}function oe(we){var qe=we-j,xe=we-Q,ze=m-qe;return V?a(ze,U-xe):ze}function W(we){var qe=we-j,xe=we-Q;return j===void 0||qe>=m||qe<0||V&&xe>=U}function ue(){var we=e();if(W(we))return ge(we);z=setTimeout(ue,oe(we))}function ge(we){return z=void 0,ae&&S?ne(we):(S=O=void 0,K)}function ye(){z!==void 0&&clearTimeout(z),Q=0,S=j=O=z=void 0}function Me(){return z===void 0?K:ge(e())}function Be(){var we=e(),qe=W(we);if(S=arguments,O=this,j=we,qe){if(z===void 0)return Z(j);if(V)return clearTimeout(z),z=setTimeout(ue,m),ne(j)}return z===void 0&&(z=setTimeout(ue,m)),K}return Be.cancel=ye,Be.flush=Me,Be}return iE=l,iE}var rE,VP;function Bue(){if(VP)return rE;VP=1;var n=HG(),e=xm(),t="Expected a function";function i(r,a,l){var o=!0,m=!0;if(typeof r!="function")throw new TypeError(t);return e(l)&&(o="leading"in l?!!l.leading:o,m="trailing"in l?!!l.trailing:m),n(r,a,{leading:o,maxWait:a,trailing:m})}return rE=i,rE}var mx={},$P;function Oue(){return $P||($P=1,Object.defineProperty(mx,"__esModule",{value:!0}),mx.calculateChange=function(e,t,i){var r=i.getBoundingClientRect(),a=r.width,l=r.height,o=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,m=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,C=o-(i.getBoundingClientRect().left+window.pageXOffset),S=m-(i.getBoundingClientRect().top+window.pageYOffset);C<0?C=0:C>a&&(C=a),S<0?S=0:S>l&&(S=l);var O=C/a,U=1-S/l;return{h:t.h,s:O,v:U,a:t.a,source:"hsv"}}),mx}var ZP;function Iue(){if(ZP)return Hy;ZP=1,Object.defineProperty(Hy,"__esModule",{value:!0}),Hy.Saturation=void 0;var n=function(){function j(Q,ee){for(var V=0;V<ee.length;V++){var ae=ee[V];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(Q,ae.key,ae)}}return function(Q,ee,V){return ee&&j(Q.prototype,ee),V&&j(Q,V),Q}}(),e=pl(),t=S(e),i=hp(),r=S(i),a=Bue(),l=S(a),o=Oue(),m=C(o);function C(j){if(j&&j.__esModule)return j;var Q={};if(j!=null)for(var ee in j)Object.prototype.hasOwnProperty.call(j,ee)&&(Q[ee]=j[ee]);return Q.default=j,Q}function S(j){return j&&j.__esModule?j:{default:j}}function O(j,Q){if(!(j instanceof Q))throw new TypeError("Cannot call a class as a function")}function U(j,Q){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Q&&(typeof Q=="object"||typeof Q=="function")?Q:j}function K(j,Q){if(typeof Q!="function"&&Q!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Q);j.prototype=Object.create(Q&&Q.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),Q&&(Object.setPrototypeOf?Object.setPrototypeOf(j,Q):j.__proto__=Q)}var z=Hy.Saturation=function(j){K(Q,j);function Q(ee){O(this,Q);var V=U(this,(Q.__proto__||Object.getPrototypeOf(Q)).call(this,ee));return V.handleChange=function(ae){typeof V.props.onChange=="function"&&V.throttle(V.props.onChange,m.calculateChange(ae,V.props.hsl,V.container),ae)},V.handleMouseDown=function(ae){V.handleChange(ae);var ne=V.getContainerRenderWindow();ne.addEventListener("mousemove",V.handleChange),ne.addEventListener("mouseup",V.handleMouseUp)},V.handleMouseUp=function(){V.unbindEventListeners()},V.throttle=(0,l.default)(function(ae,ne,Z){ae(ne,Z)},50),V}return n(Q,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var V=this.container,ae=window;!ae.document.contains(V)&&ae.parent!==ae;)ae=ae.parent;return ae}},{key:"unbindEventListeners",value:function(){var V=this.getContainerRenderWindow();V.removeEventListener("mousemove",this.handleChange),V.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var V=this,ae=this.props.style||{},ne=ae.color,Z=ae.white,oe=ae.black,W=ae.pointer,ue=ae.circle,ge=(0,r.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:ne,white:Z,black:oe,pointer:W,circle:ue}},{custom:!!this.props.style});return t.default.createElement("div",{style:ge.color,ref:function(Me){return V.container=Me},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),t.default.createElement("div",{style:ge.white,className:"saturation-white"},t.default.createElement("div",{style:ge.black,className:"saturation-black"}),t.default.createElement("div",{style:ge.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:ge.circle}))))}}]),Q}(e.PureComponent||e.Component);return Hy.default=z,Hy}var Vy={},cd={},oE,XP;function Tue(){if(XP)return oE;XP=1;var n=UG(),e=KG(),t=_G(),i=If();function r(a,l){var o=i(a)?n:e;return o(a,t(l))}return oE=r,oE}var aE,JP;function kue(){return JP||(JP=1,aE=Tue()),aE}var kx={exports:{}},Due=kx.exports,eK;function Rue(){return eK||(eK=1,function(n,e){(function(t,i){n.exports=i()})(Due,function(){function t(Le){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Pe){return typeof Pe}:function(Pe){return Pe&&typeof Symbol=="function"&&Pe.constructor===Symbol&&Pe!==Symbol.prototype?"symbol":typeof Pe},t(Le)}var i=/^\s+/,r=/\s+$/;function a(Le,Pe){if(Le=Le||"",Pe=Pe||{},Le instanceof a)return Le;if(!(this instanceof a))return new a(Le,Pe);var Re=l(Le);this._originalInput=Le,this._r=Re.r,this._g=Re.g,this._b=Re.b,this._a=Re.a,this._roundA=Math.round(100*this._a)/100,this._format=Pe.format||Re.format,this._gradientType=Pe.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=Re.ok}a.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Pe=this.toRgb();return(Pe.r*299+Pe.g*587+Pe.b*114)/1e3},getLuminance:function(){var Pe=this.toRgb(),Re,He,bt,vt,Ot,qt;return Re=Pe.r/255,He=Pe.g/255,bt=Pe.b/255,Re<=.03928?vt=Re/12.92:vt=Math.pow((Re+.055)/1.055,2.4),He<=.03928?Ot=He/12.92:Ot=Math.pow((He+.055)/1.055,2.4),bt<=.03928?qt=bt/12.92:qt=Math.pow((bt+.055)/1.055,2.4),.2126*vt+.7152*Ot+.0722*qt},setAlpha:function(Pe){return this._a=qe(Pe),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var Pe=S(this._r,this._g,this._b);return{h:Pe.h*360,s:Pe.s,v:Pe.v,a:this._a}},toHsvString:function(){var Pe=S(this._r,this._g,this._b),Re=Math.round(Pe.h*360),He=Math.round(Pe.s*100),bt=Math.round(Pe.v*100);return this._a==1?"hsv("+Re+", "+He+"%, "+bt+"%)":"hsva("+Re+", "+He+"%, "+bt+"%, "+this._roundA+")"},toHsl:function(){var Pe=m(this._r,this._g,this._b);return{h:Pe.h*360,s:Pe.s,l:Pe.l,a:this._a}},toHslString:function(){var Pe=m(this._r,this._g,this._b),Re=Math.round(Pe.h*360),He=Math.round(Pe.s*100),bt=Math.round(Pe.l*100);return this._a==1?"hsl("+Re+", "+He+"%, "+bt+"%)":"hsla("+Re+", "+He+"%, "+bt+"%, "+this._roundA+")"},toHex:function(Pe){return U(this._r,this._g,this._b,Pe)},toHexString:function(Pe){return"#"+this.toHex(Pe)},toHex8:function(Pe){return K(this._r,this._g,this._b,this._a,Pe)},toHex8String:function(Pe){return"#"+this.toHex8(Pe)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(xe(this._r,255)*100)+"%",g:Math.round(xe(this._g,255)*100)+"%",b:Math.round(xe(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(xe(this._r,255)*100)+"%, "+Math.round(xe(this._g,255)*100)+"%, "+Math.round(xe(this._b,255)*100)+"%)":"rgba("+Math.round(xe(this._r,255)*100)+"%, "+Math.round(xe(this._g,255)*100)+"%, "+Math.round(xe(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Be[U(this._r,this._g,this._b,!0)]||!1},toFilter:function(Pe){var Re="#"+z(this._r,this._g,this._b,this._a),He=Re,bt=this._gradientType?"GradientType = 1, ":"";if(Pe){var vt=a(Pe);He="#"+z(vt._r,vt._g,vt._b,vt._a)}return"progid:DXImageTransform.Microsoft.gradient("+bt+"startColorstr="+Re+",endColorstr="+He+")"},toString:function(Pe){var Re=!!Pe;Pe=Pe||this._format;var He=!1,bt=this._a<1&&this._a>=0,vt=!Re&&bt&&(Pe==="hex"||Pe==="hex6"||Pe==="hex3"||Pe==="hex4"||Pe==="hex8"||Pe==="name");return vt?Pe==="name"&&this._a===0?this.toName():this.toRgbString():(Pe==="rgb"&&(He=this.toRgbString()),Pe==="prgb"&&(He=this.toPercentageRgbString()),(Pe==="hex"||Pe==="hex6")&&(He=this.toHexString()),Pe==="hex3"&&(He=this.toHexString(!0)),Pe==="hex4"&&(He=this.toHex8String(!0)),Pe==="hex8"&&(He=this.toHex8String()),Pe==="name"&&(He=this.toName()),Pe==="hsl"&&(He=this.toHslString()),Pe==="hsv"&&(He=this.toHsvString()),He||this.toHexString())},clone:function(){return a(this.toString())},_applyModification:function(Pe,Re){var He=Pe.apply(null,[this].concat([].slice.call(Re)));return this._r=He._r,this._g=He._g,this._b=He._b,this.setAlpha(He._a),this},lighten:function(){return this._applyModification(V,arguments)},brighten:function(){return this._applyModification(ae,arguments)},darken:function(){return this._applyModification(ne,arguments)},desaturate:function(){return this._applyModification(j,arguments)},saturate:function(){return this._applyModification(Q,arguments)},greyscale:function(){return this._applyModification(ee,arguments)},spin:function(){return this._applyModification(Z,arguments)},_applyCombination:function(Pe,Re){return Pe.apply(null,[this].concat([].slice.call(Re)))},analogous:function(){return this._applyCombination(ge,arguments)},complement:function(){return this._applyCombination(oe,arguments)},monochromatic:function(){return this._applyCombination(ye,arguments)},splitcomplement:function(){return this._applyCombination(ue,arguments)},triad:function(){return this._applyCombination(W,[3])},tetrad:function(){return this._applyCombination(W,[4])}},a.fromRatio=function(Le,Pe){if(t(Le)=="object"){var Re={};for(var He in Le)Le.hasOwnProperty(He)&&(He==="a"?Re[He]=Le[He]:Re[He]=Ne(Le[He]));Le=Re}return a(Le,Pe)};function l(Le){var Pe={r:0,g:0,b:0},Re=1,He=null,bt=null,vt=null,Ot=!1,qt=!1;return typeof Le=="string"&&(Le=St(Le)),t(Le)=="object"&&(pt(Le.r)&&pt(Le.g)&&pt(Le.b)?(Pe=o(Le.r,Le.g,Le.b),Ot=!0,qt=String(Le.r).substr(-1)==="%"?"prgb":"rgb"):pt(Le.h)&&pt(Le.s)&&pt(Le.v)?(He=Ne(Le.s),bt=Ne(Le.v),Pe=O(Le.h,He,bt),Ot=!0,qt="hsv"):pt(Le.h)&&pt(Le.s)&&pt(Le.l)&&(He=Ne(Le.s),vt=Ne(Le.l),Pe=C(Le.h,He,vt),Ot=!0,qt="hsl"),Le.hasOwnProperty("a")&&(Re=Le.a)),Re=qe(Re),{ok:Ot,format:Le.format||qt,r:Math.min(255,Math.max(Pe.r,0)),g:Math.min(255,Math.max(Pe.g,0)),b:Math.min(255,Math.max(Pe.b,0)),a:Re}}function o(Le,Pe,Re){return{r:xe(Le,255)*255,g:xe(Pe,255)*255,b:xe(Re,255)*255}}function m(Le,Pe,Re){Le=xe(Le,255),Pe=xe(Pe,255),Re=xe(Re,255);var He=Math.max(Le,Pe,Re),bt=Math.min(Le,Pe,Re),vt,Ot,qt=(He+bt)/2;if(He==bt)vt=Ot=0;else{var Kt=He-bt;switch(Ot=qt>.5?Kt/(2-He-bt):Kt/(He+bt),He){case Le:vt=(Pe-Re)/Kt+(Pe<Re?6:0);break;case Pe:vt=(Re-Le)/Kt+2;break;case Re:vt=(Le-Pe)/Kt+4;break}vt/=6}return{h:vt,s:Ot,l:qt}}function C(Le,Pe,Re){var He,bt,vt;Le=xe(Le,360),Pe=xe(Pe,100),Re=xe(Re,100);function Ot(on,Jn,Wt){return Wt<0&&(Wt+=1),Wt>1&&(Wt-=1),Wt<1/6?on+(Jn-on)*6*Wt:Wt<1/2?Jn:Wt<2/3?on+(Jn-on)*(2/3-Wt)*6:on}if(Pe===0)He=bt=vt=Re;else{var qt=Re<.5?Re*(1+Pe):Re+Pe-Re*Pe,Kt=2*Re-qt;He=Ot(Kt,qt,Le+1/3),bt=Ot(Kt,qt,Le),vt=Ot(Kt,qt,Le-1/3)}return{r:He*255,g:bt*255,b:vt*255}}function S(Le,Pe,Re){Le=xe(Le,255),Pe=xe(Pe,255),Re=xe(Re,255);var He=Math.max(Le,Pe,Re),bt=Math.min(Le,Pe,Re),vt,Ot,qt=He,Kt=He-bt;if(Ot=He===0?0:Kt/He,He==bt)vt=0;else{switch(He){case Le:vt=(Pe-Re)/Kt+(Pe<Re?6:0);break;case Pe:vt=(Re-Le)/Kt+2;break;case Re:vt=(Le-Pe)/Kt+4;break}vt/=6}return{h:vt,s:Ot,v:qt}}function O(Le,Pe,Re){Le=xe(Le,360)*6,Pe=xe(Pe,100),Re=xe(Re,100);var He=Math.floor(Le),bt=Le-He,vt=Re*(1-Pe),Ot=Re*(1-bt*Pe),qt=Re*(1-(1-bt)*Pe),Kt=He%6,on=[Re,Ot,vt,vt,qt,Re][Kt],Jn=[qt,Re,Re,Ot,vt,vt][Kt],Wt=[vt,vt,qt,Re,Re,Ot][Kt];return{r:on*255,g:Jn*255,b:Wt*255}}function U(Le,Pe,Re,He){var bt=[be(Math.round(Le).toString(16)),be(Math.round(Pe).toString(16)),be(Math.round(Re).toString(16))];return He&&bt[0].charAt(0)==bt[0].charAt(1)&&bt[1].charAt(0)==bt[1].charAt(1)&&bt[2].charAt(0)==bt[2].charAt(1)?bt[0].charAt(0)+bt[1].charAt(0)+bt[2].charAt(0):bt.join("")}function K(Le,Pe,Re,He,bt){var vt=[be(Math.round(Le).toString(16)),be(Math.round(Pe).toString(16)),be(Math.round(Re).toString(16)),be(tt(He))];return bt&&vt[0].charAt(0)==vt[0].charAt(1)&&vt[1].charAt(0)==vt[1].charAt(1)&&vt[2].charAt(0)==vt[2].charAt(1)&&vt[3].charAt(0)==vt[3].charAt(1)?vt[0].charAt(0)+vt[1].charAt(0)+vt[2].charAt(0)+vt[3].charAt(0):vt.join("")}function z(Le,Pe,Re,He){var bt=[be(tt(He)),be(Math.round(Le).toString(16)),be(Math.round(Pe).toString(16)),be(Math.round(Re).toString(16))];return bt.join("")}a.equals=function(Le,Pe){return!Le||!Pe?!1:a(Le).toRgbString()==a(Pe).toRgbString()},a.random=function(){return a.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function j(Le,Pe){Pe=Pe===0?0:Pe||10;var Re=a(Le).toHsl();return Re.s-=Pe/100,Re.s=ze(Re.s),a(Re)}function Q(Le,Pe){Pe=Pe===0?0:Pe||10;var Re=a(Le).toHsl();return Re.s+=Pe/100,Re.s=ze(Re.s),a(Re)}function ee(Le){return a(Le).desaturate(100)}function V(Le,Pe){Pe=Pe===0?0:Pe||10;var Re=a(Le).toHsl();return Re.l+=Pe/100,Re.l=ze(Re.l),a(Re)}function ae(Le,Pe){Pe=Pe===0?0:Pe||10;var Re=a(Le).toRgb();return Re.r=Math.max(0,Math.min(255,Re.r-Math.round(255*-(Pe/100)))),Re.g=Math.max(0,Math.min(255,Re.g-Math.round(255*-(Pe/100)))),Re.b=Math.max(0,Math.min(255,Re.b-Math.round(255*-(Pe/100)))),a(Re)}function ne(Le,Pe){Pe=Pe===0?0:Pe||10;var Re=a(Le).toHsl();return Re.l-=Pe/100,Re.l=ze(Re.l),a(Re)}function Z(Le,Pe){var Re=a(Le).toHsl(),He=(Re.h+Pe)%360;return Re.h=He<0?360+He:He,a(Re)}function oe(Le){var Pe=a(Le).toHsl();return Pe.h=(Pe.h+180)%360,a(Pe)}function W(Le,Pe){if(isNaN(Pe)||Pe<=0)throw new Error("Argument to polyad must be a positive number");for(var Re=a(Le).toHsl(),He=[a(Le)],bt=360/Pe,vt=1;vt<Pe;vt++)He.push(a({h:(Re.h+vt*bt)%360,s:Re.s,l:Re.l}));return He}function ue(Le){var Pe=a(Le).toHsl(),Re=Pe.h;return[a(Le),a({h:(Re+72)%360,s:Pe.s,l:Pe.l}),a({h:(Re+216)%360,s:Pe.s,l:Pe.l})]}function ge(Le,Pe,Re){Pe=Pe||6,Re=Re||30;var He=a(Le).toHsl(),bt=360/Re,vt=[a(Le)];for(He.h=(He.h-(bt*Pe>>1)+720)%360;--Pe;)He.h=(He.h+bt)%360,vt.push(a(He));return vt}function ye(Le,Pe){Pe=Pe||6;for(var Re=a(Le).toHsv(),He=Re.h,bt=Re.s,vt=Re.v,Ot=[],qt=1/Pe;Pe--;)Ot.push(a({h:He,s:bt,v:vt})),vt=(vt+qt)%1;return Ot}a.mix=function(Le,Pe,Re){Re=Re===0?0:Re||50;var He=a(Le).toRgb(),bt=a(Pe).toRgb(),vt=Re/100,Ot={r:(bt.r-He.r)*vt+He.r,g:(bt.g-He.g)*vt+He.g,b:(bt.b-He.b)*vt+He.b,a:(bt.a-He.a)*vt+He.a};return a(Ot)},a.readability=function(Le,Pe){var Re=a(Le),He=a(Pe);return(Math.max(Re.getLuminance(),He.getLuminance())+.05)/(Math.min(Re.getLuminance(),He.getLuminance())+.05)},a.isReadable=function(Le,Pe,Re){var He=a.readability(Le,Pe),bt,vt;switch(vt=!1,bt=Rt(Re),bt.level+bt.size){case"AAsmall":case"AAAlarge":vt=He>=4.5;break;case"AAlarge":vt=He>=3;break;case"AAAsmall":vt=He>=7;break}return vt},a.mostReadable=function(Le,Pe,Re){var He=null,bt=0,vt,Ot,qt,Kt;Re=Re||{},Ot=Re.includeFallbackColors,qt=Re.level,Kt=Re.size;for(var on=0;on<Pe.length;on++)vt=a.readability(Le,Pe[on]),vt>bt&&(bt=vt,He=a(Pe[on]));return a.isReadable(Le,He,{level:qt,size:Kt})||!Ot?He:(Re.includeFallbackColors=!1,a.mostReadable(Le,["#fff","#000"],Re))};var Me=a.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Be=a.hexNames=we(Me);function we(Le){var Pe={};for(var Re in Le)Le.hasOwnProperty(Re)&&(Pe[Le[Re]]=Re);return Pe}function qe(Le){return Le=parseFloat(Le),(isNaN(Le)||Le<0||Le>1)&&(Le=1),Le}function xe(Le,Pe){yt(Le)&&(Le="100%");var Re=nt(Le);return Le=Math.min(Pe,Math.max(0,parseFloat(Le))),Re&&(Le=parseInt(Le*Pe,10)/100),Math.abs(Le-Pe)<1e-6?1:Le%Pe/parseFloat(Pe)}function ze(Le){return Math.min(1,Math.max(0,Le))}function ot(Le){return parseInt(Le,16)}function yt(Le){return typeof Le=="string"&&Le.indexOf(".")!=-1&&parseFloat(Le)===1}function nt(Le){return typeof Le=="string"&&Le.indexOf("%")!=-1}function be(Le){return Le.length==1?"0"+Le:""+Le}function Ne(Le){return Le<=1&&(Le=Le*100+"%"),Le}function tt(Le){return Math.round(parseFloat(Le)*255).toString(16)}function lt(Le){return ot(Le)/255}var It=function(){var Le="[-\\+]?\\d+%?",Pe="[-\\+]?\\d*\\.\\d+%?",Re="(?:"+Pe+")|(?:"+Le+")",He="[\\s|\\(]+("+Re+")[,|\\s]+("+Re+")[,|\\s]+("+Re+")\\s*\\)?",bt="[\\s|\\(]+("+Re+")[,|\\s]+("+Re+")[,|\\s]+("+Re+")[,|\\s]+("+Re+")\\s*\\)?";return{CSS_UNIT:new RegExp(Re),rgb:new RegExp("rgb"+He),rgba:new RegExp("rgba"+bt),hsl:new RegExp("hsl"+He),hsla:new RegExp("hsla"+bt),hsv:new RegExp("hsv"+He),hsva:new RegExp("hsva"+bt),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function pt(Le){return!!It.CSS_UNIT.exec(Le)}function St(Le){Le=Le.replace(i,"").replace(r,"").toLowerCase();var Pe=!1;if(Me[Le])Le=Me[Le],Pe=!0;else if(Le=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var Re;return(Re=It.rgb.exec(Le))?{r:Re[1],g:Re[2],b:Re[3]}:(Re=It.rgba.exec(Le))?{r:Re[1],g:Re[2],b:Re[3],a:Re[4]}:(Re=It.hsl.exec(Le))?{h:Re[1],s:Re[2],l:Re[3]}:(Re=It.hsla.exec(Le))?{h:Re[1],s:Re[2],l:Re[3],a:Re[4]}:(Re=It.hsv.exec(Le))?{h:Re[1],s:Re[2],v:Re[3]}:(Re=It.hsva.exec(Le))?{h:Re[1],s:Re[2],v:Re[3],a:Re[4]}:(Re=It.hex8.exec(Le))?{r:ot(Re[1]),g:ot(Re[2]),b:ot(Re[3]),a:lt(Re[4]),format:Pe?"name":"hex8"}:(Re=It.hex6.exec(Le))?{r:ot(Re[1]),g:ot(Re[2]),b:ot(Re[3]),format:Pe?"name":"hex"}:(Re=It.hex4.exec(Le))?{r:ot(Re[1]+""+Re[1]),g:ot(Re[2]+""+Re[2]),b:ot(Re[3]+""+Re[3]),a:lt(Re[4]+""+Re[4]),format:Pe?"name":"hex8"}:(Re=It.hex3.exec(Le))?{r:ot(Re[1]+""+Re[1]),g:ot(Re[2]+""+Re[2]),b:ot(Re[3]+""+Re[3]),format:Pe?"name":"hex"}:!1}function Rt(Le){var Pe,Re;return Le=Le||{level:"AA",size:"small"},Pe=(Le.level||"AA").toUpperCase(),Re=(Le.size||"small").toLowerCase(),Pe!=="AA"&&Pe!=="AAA"&&(Pe="AA"),Re!=="small"&&Re!=="large"&&(Re="small"),{level:Pe,size:Re}}return a})}(kx)),kx.exports}var tK;function VG(){if(tK)return cd;tK=1,Object.defineProperty(cd,"__esModule",{value:!0}),cd.isvalidColorString=cd.red=cd.getContrastingColor=cd.isValidHex=cd.toState=cd.simpleCheckForValidColor=void 0;var n=kue(),e=r(n),t=Rue(),i=r(t);function r(l){return l&&l.__esModule?l:{default:l}}cd.simpleCheckForValidColor=function(o){var m=["r","g","b","a","h","s","l","v"],C=0,S=0;return(0,e.default)(m,function(O){if(o[O]&&(C+=1,isNaN(o[O])||(S+=1),O==="s"||O==="l")){var U=/^\d+%$/;U.test(o[O])&&(S+=1)}}),C===S?o:!1};var a=cd.toState=function(o,m){var C=o.hex?(0,i.default)(o.hex):(0,i.default)(o),S=C.toHsl(),O=C.toHsv(),U=C.toRgb(),K=C.toHex();S.s===0&&(S.h=m||0,O.h=m||0);var z=K==="000000"&&U.a===0;return{hsl:S,hex:z?"transparent":"#"+K,rgb:U,hsv:O,oldHue:o.h||m||S.h,source:o.source}};return cd.isValidHex=function(o){if(o==="transparent")return!0;var m=String(o).charAt(0)==="#"?1:0;return o.length!==4+m&&o.length<7+m&&(0,i.default)(o).isValid()},cd.getContrastingColor=function(o){if(!o)return"#fff";var m=a(o);if(m.hex==="transparent")return"rgba(0,0,0,0.4)";var C=(m.rgb.r*299+m.rgb.g*587+m.rgb.b*114)/1e3;return C>=128?"#000":"#fff"},cd.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}},cd.isvalidColorString=function(o,m){var C=o.replace("°","");return(0,i.default)(m+" ("+C+")")._ok},cd}var nK;function Pue(){if(nK)return Vy;nK=1,Object.defineProperty(Vy,"__esModule",{value:!0}),Vy.ColorWrap=void 0;var n=Object.assign||function(z){for(var j=1;j<arguments.length;j++){var Q=arguments[j];for(var ee in Q)Object.prototype.hasOwnProperty.call(Q,ee)&&(z[ee]=Q[ee])}return z},e=function(){function z(j,Q){for(var ee=0;ee<Q.length;ee++){var V=Q[ee];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(j,V.key,V)}}return function(j,Q,ee){return Q&&z(j.prototype,Q),ee&&z(j,ee),j}}(),t=pl(),i=C(t),r=HG(),a=C(r),l=VG(),o=m(l);function m(z){if(z&&z.__esModule)return z;var j={};if(z!=null)for(var Q in z)Object.prototype.hasOwnProperty.call(z,Q)&&(j[Q]=z[Q]);return j.default=z,j}function C(z){return z&&z.__esModule?z:{default:z}}function S(z,j){if(!(z instanceof j))throw new TypeError("Cannot call a class as a function")}function O(z,j){if(!z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:z}function U(z,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);z.prototype=Object.create(j&&j.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(z,j):z.__proto__=j)}var K=Vy.ColorWrap=function(j){var Q=function(ee){U(V,ee);function V(ae){S(this,V);var ne=O(this,(V.__proto__||Object.getPrototypeOf(V)).call(this));return ne.handleChange=function(Z,oe){var W=o.simpleCheckForValidColor(Z);if(W){var ue=o.toState(Z,Z.h||ne.state.oldHue);ne.setState(ue),ne.props.onChangeComplete&&ne.debounce(ne.props.onChangeComplete,ue,oe),ne.props.onChange&&ne.props.onChange(ue,oe)}},ne.handleSwatchHover=function(Z,oe){var W=o.simpleCheckForValidColor(Z);if(W){var ue=o.toState(Z,Z.h||ne.state.oldHue);ne.props.onSwatchHover&&ne.props.onSwatchHover(ue,oe)}},ne.state=n({},o.toState(ae.color,0)),ne.debounce=(0,a.default)(function(Z,oe,W){Z(oe,W)},100),ne}return e(V,[{key:"render",value:function(){var ne={};return this.props.onSwatchHover&&(ne.onSwatchHover=this.handleSwatchHover),i.default.createElement(j,n({},this.props,this.state,{onChange:this.handleChange},ne))}}],[{key:"getDerivedStateFromProps",value:function(ne,Z){return n({},o.toState(ne.color,Z.oldHue))}}]),V}(t.PureComponent||t.Component);return Q.propTypes=n({},j.propTypes),Q.defaultProps=n({},j.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),Q};return Vy.default=K,Vy}var $y={},SC={},iK;function Kue(){if(iK)return SC;iK=1,Object.defineProperty(SC,"__esModule",{value:!0}),SC.handleFocus=void 0;var n=Object.assign||function(m){for(var C=1;C<arguments.length;C++){var S=arguments[C];for(var O in S)Object.prototype.hasOwnProperty.call(S,O)&&(m[O]=S[O])}return m},e=function(){function m(C,S){for(var O=0;O<S.length;O++){var U=S[O];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(C,U.key,U)}}return function(C,S,O){return S&&m(C.prototype,S),O&&m(C,O),C}}(),t=pl(),i=r(t);function r(m){return m&&m.__esModule?m:{default:m}}function a(m,C){if(!(m instanceof C))throw new TypeError("Cannot call a class as a function")}function l(m,C){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:m}function o(m,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);m.prototype=Object.create(C&&C.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(m,C):m.__proto__=C)}return SC.handleFocus=function(C){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(O){o(U,O);function U(){var K,z,j,Q;a(this,U);for(var ee=arguments.length,V=Array(ee),ae=0;ae<ee;ae++)V[ae]=arguments[ae];return Q=(z=(j=l(this,(K=U.__proto__||Object.getPrototypeOf(U)).call.apply(K,[this].concat(V))),j),j.state={focus:!1},j.handleFocus=function(){return j.setState({focus:!0})},j.handleBlur=function(){return j.setState({focus:!1})},z),l(j,Q)}return e(U,[{key:"render",value:function(){return i.default.createElement(S,{onFocus:this.handleFocus,onBlur:this.handleBlur},i.default.createElement(C,n({},this.props,this.state)))}}]),U}(i.default.Component)},SC}var rK;function Uue(){if(rK)return $y;rK=1,Object.defineProperty($y,"__esModule",{value:!0}),$y.Swatch=void 0;var n=Object.assign||function(O){for(var U=1;U<arguments.length;U++){var K=arguments[U];for(var z in K)Object.prototype.hasOwnProperty.call(K,z)&&(O[z]=K[z])}return O},e=pl(),t=m(e),i=hp(),r=m(i),a=Kue(),l=Z8(),o=m(l);function m(O){return O&&O.__esModule?O:{default:O}}var C=13,S=$y.Swatch=function(U){var K=U.color,z=U.style,j=U.onClick,Q=j===void 0?function(){}:j,ee=U.onHover,V=U.title,ae=V===void 0?K:V,ne=U.children,Z=U.focus,oe=U.focusStyle,W=oe===void 0?{}:oe,ue=K==="transparent",ge=(0,r.default)({default:{swatch:n({background:K,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},z,Z?W:{})}}),ye=function(xe){return Q(K,xe)},Me=function(xe){return xe.keyCode===C&&Q(K,xe)},Be=function(xe){return ee(K,xe)},we={};return ee&&(we.onMouseOver=Be),t.default.createElement("div",n({style:ge.swatch,onClick:ye,title:ae,tabIndex:0,onKeyDown:Me},we),ne,ue&&t.default.createElement(o.default,{borderRadius:ge.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};return $y.default=(0,a.handleFocus)(S),$y}var oK;function $G(){return oK||(oK=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=vue();Object.defineProperty(n,"Alpha",{enumerable:!0,get:function(){return C(e).default}});var t=Z8();Object.defineProperty(n,"Checkboard",{enumerable:!0,get:function(){return C(t).default}});var i=Cue();Object.defineProperty(n,"EditableInput",{enumerable:!0,get:function(){return C(i).default}});var r=bue();Object.defineProperty(n,"Hue",{enumerable:!0,get:function(){return C(r).default}});var a=xue();Object.defineProperty(n,"Raised",{enumerable:!0,get:function(){return C(a).default}});var l=Iue();Object.defineProperty(n,"Saturation",{enumerable:!0,get:function(){return C(l).default}});var o=Pue();Object.defineProperty(n,"ColorWrap",{enumerable:!0,get:function(){return C(o).default}});var m=Uue();Object.defineProperty(n,"Swatch",{enumerable:!0,get:function(){return C(m).default}});function C(S){return S&&S.__esModule?S:{default:S}}}(Xw)),Xw}var Zy={},sE,aK;function Lue(){if(aK)return sE;aK=1;function n(e){return e===void 0}return sE=n,sE}var px={},sK;function Fue(){if(sK)return px;sK=1,Object.defineProperty(px,"__esModule",{value:!0});var n=Object.assign||function(l){for(var o=1;o<arguments.length;o++){var m=arguments[o];for(var C in m)Object.prototype.hasOwnProperty.call(m,C)&&(l[C]=m[C])}return l},e=pl(),t=i(e);function i(l){return l&&l.__esModule?l:{default:l}}function r(l,o){var m={};for(var C in l)o.indexOf(C)>=0||Object.prototype.hasOwnProperty.call(l,C)&&(m[C]=l[C]);return m}var a=24;return px.default=function(l){var o=l.fill,m=o===void 0?"currentColor":o,C=l.width,S=C===void 0?a:C,O=l.height,U=O===void 0?a:O,K=l.style,z=K===void 0?{}:K,j=r(l,["fill","width","height","style"]);return t.default.createElement("svg",n({viewBox:"0 0 "+a+" "+a,style:n({fill:m,width:S,height:U},z)},j),t.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},px}var lK;function zue(){if(lK)return Zy;lK=1,Object.defineProperty(Zy,"__esModule",{value:!0}),Zy.ChromeFields=void 0;var n=function(){function V(ae,ne){for(var Z=0;Z<ne.length;Z++){var oe=ne[Z];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(ae,oe.key,oe)}}return function(ae,ne,Z){return ne&&V(ae.prototype,ne),Z&&V(ae,Z),ae}}(),e=pl(),t=K(e),i=hp(),r=K(i),a=VG(),l=U(a),o=Lue(),m=K(o),C=$G(),S=Fue(),O=K(S);function U(V){if(V&&V.__esModule)return V;var ae={};if(V!=null)for(var ne in V)Object.prototype.hasOwnProperty.call(V,ne)&&(ae[ne]=V[ne]);return ae.default=V,ae}function K(V){return V&&V.__esModule?V:{default:V}}function z(V,ae){if(!(V instanceof ae))throw new TypeError("Cannot call a class as a function")}function j(V,ae){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ae&&(typeof ae=="object"||typeof ae=="function")?ae:V}function Q(V,ae){if(typeof ae!="function"&&ae!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ae);V.prototype=Object.create(ae&&ae.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),ae&&(Object.setPrototypeOf?Object.setPrototypeOf(V,ae):V.__proto__=ae)}var ee=Zy.ChromeFields=function(V){Q(ae,V);function ae(ne){z(this,ae);var Z=j(this,(ae.__proto__||Object.getPrototypeOf(ae)).call(this));return Z.toggleViews=function(){Z.state.view==="hex"?Z.setState({view:"rgb"}):Z.state.view==="rgb"?Z.setState({view:"hsl"}):Z.state.view==="hsl"&&(Z.props.hsl.a===1?Z.setState({view:"hex"}):Z.setState({view:"rgb"}))},Z.handleChange=function(oe,W){oe.hex?l.isValidHex(oe.hex)&&Z.props.onChange({hex:oe.hex,source:"hex"},W):oe.r||oe.g||oe.b?Z.props.onChange({r:oe.r||Z.props.rgb.r,g:oe.g||Z.props.rgb.g,b:oe.b||Z.props.rgb.b,source:"rgb"},W):oe.a?(oe.a<0?oe.a=0:oe.a>1&&(oe.a=1),Z.props.onChange({h:Z.props.hsl.h,s:Z.props.hsl.s,l:Z.props.hsl.l,a:Math.round(oe.a*100)/100,source:"rgb"},W)):(oe.h||oe.s||oe.l)&&(typeof oe.s=="string"&&oe.s.includes("%")&&(oe.s=oe.s.replace("%","")),typeof oe.l=="string"&&oe.l.includes("%")&&(oe.l=oe.l.replace("%","")),oe.s==1?oe.s=.01:oe.l==1&&(oe.l=.01),Z.props.onChange({h:oe.h||Z.props.hsl.h,s:Number((0,m.default)(oe.s)?Z.props.hsl.s:oe.s),l:Number((0,m.default)(oe.l)?Z.props.hsl.l:oe.l),source:"hsl"},W))},Z.showHighlight=function(oe){oe.currentTarget.style.background="#eee"},Z.hideHighlight=function(oe){oe.currentTarget.style.background="transparent"},ne.hsl.a!==1&&ne.view==="hex"?Z.state={view:"rgb"}:Z.state={view:ne.view},Z}return n(ae,[{key:"render",value:function(){var Z=this,oe=(0,r.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),W=void 0;return this.state.view==="hex"?W=t.default.createElement("div",{style:oe.fields,className:"flexbox-fix"},t.default.createElement("div",{style:oe.field},t.default.createElement(C.EditableInput,{style:{input:oe.input,label:oe.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?W=t.default.createElement("div",{style:oe.fields,className:"flexbox-fix"},t.default.createElement("div",{style:oe.field},t.default.createElement(C.EditableInput,{style:{input:oe.input,label:oe.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),t.default.createElement("div",{style:oe.field},t.default.createElement(C.EditableInput,{style:{input:oe.input,label:oe.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),t.default.createElement("div",{style:oe.field},t.default.createElement(C.EditableInput,{style:{input:oe.input,label:oe.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),t.default.createElement("div",{style:oe.alpha},t.default.createElement(C.EditableInput,{style:{input:oe.input,label:oe.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(W=t.default.createElement("div",{style:oe.fields,className:"flexbox-fix"},t.default.createElement("div",{style:oe.field},t.default.createElement(C.EditableInput,{style:{input:oe.input,label:oe.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),t.default.createElement("div",{style:oe.field},t.default.createElement(C.EditableInput,{style:{input:oe.input,label:oe.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:oe.field},t.default.createElement(C.EditableInput,{style:{input:oe.input,label:oe.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:oe.alpha},t.default.createElement(C.EditableInput,{style:{input:oe.input,label:oe.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),t.default.createElement("div",{style:oe.wrap,className:"flexbox-fix"},W,t.default.createElement("div",{style:oe.toggle},t.default.createElement("div",{style:oe.icon,onClick:this.toggleViews,ref:function(ge){return Z.icon=ge}},t.default.createElement(O.default,{style:oe.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(Z,oe){return Z.hsl.a!==1&&oe.view==="hex"?{view:"rgb"}:null}}]),ae}(t.default.Component);return ee.defaultProps={view:"hex"},Zy.default=ee,Zy}var Xy={},AK;function Nue(){if(AK)return Xy;AK=1,Object.defineProperty(Xy,"__esModule",{value:!0}),Xy.ChromePointer=void 0;var n=pl(),e=r(n),t=hp(),i=r(t);function r(l){return l&&l.__esModule?l:{default:l}}var a=Xy.ChromePointer=function(){var o=(0,i.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return e.default.createElement("div",{style:o.picker})};return Xy.default=a,Xy}var Jy={},uK;function Gue(){if(uK)return Jy;uK=1,Object.defineProperty(Jy,"__esModule",{value:!0}),Jy.ChromePointerCircle=void 0;var n=pl(),e=r(n),t=hp(),i=r(t);function r(l){return l&&l.__esModule?l:{default:l}}var a=Jy.ChromePointerCircle=function(){var o=(0,i.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return e.default.createElement("div",{style:o.picker})};return Jy.default=a,Jy}var cK;function jue(){if(cK)return Uy;cK=1,Object.defineProperty(Uy,"__esModule",{value:!0}),Uy.Chrome=void 0;var n=pl(),e=j(n),t=i0(),i=j(t),r=hp(),a=j(r),l=qG(),o=j(l),m=$G(),C=zue(),S=j(C),O=Nue(),U=j(O),K=Gue(),z=j(K);function j(ee){return ee&&ee.__esModule?ee:{default:ee}}var Q=Uy.Chrome=function(V){var ae=V.width,ne=V.onChange,Z=V.disableAlpha,oe=V.rgb,W=V.hsl,ue=V.hsv,ge=V.hex,ye=V.renderers,Me=V.styles,Be=Me===void 0?{}:Me,we=V.className,qe=we===void 0?"":we,xe=V.defaultView,ze=(0,a.default)((0,o.default)({default:{picker:{width:ae,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+oe.r+", "+oe.g+", "+oe.b+", "+oe.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},Be),{disableAlpha:Z});return e.default.createElement("div",{style:ze.picker,className:"chrome-picker "+qe},e.default.createElement("div",{style:ze.saturation},e.default.createElement(m.Saturation,{style:ze.Saturation,hsl:W,hsv:ue,pointer:z.default,onChange:ne})),e.default.createElement("div",{style:ze.body},e.default.createElement("div",{style:ze.controls,className:"flexbox-fix"},e.default.createElement("div",{style:ze.color},e.default.createElement("div",{style:ze.swatch},e.default.createElement("div",{style:ze.active}),e.default.createElement(m.Checkboard,{renderers:ye}))),e.default.createElement("div",{style:ze.toggles},e.default.createElement("div",{style:ze.hue},e.default.createElement(m.Hue,{style:ze.Hue,hsl:W,pointer:U.default,onChange:ne})),e.default.createElement("div",{style:ze.alpha},e.default.createElement(m.Alpha,{style:ze.Alpha,rgb:oe,hsl:W,pointer:U.default,renderers:ye,onChange:ne})))),e.default.createElement(S.default,{rgb:oe,hsl:W,hex:ge,view:xe,onChange:ne,disableAlpha:Z})))};return Q.propTypes={width:i.default.oneOfType([i.default.string,i.default.number]),disableAlpha:i.default.bool,styles:i.default.object,defaultView:i.default.oneOf(["hex","rgb","hsl"])},Q.defaultProps={width:225,disableAlpha:!1,styles:{}},Uy.default=(0,m.ColorWrap)(Q),Uy}var Wue=jue();const Que=WA(Wue);function ao(){var n="/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",e="a28adae6198a0e1a821ffd418caef3c10570b2ba",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:23}},1:{start:{line:8,column:2},end:{line:8,column:56}},2:{start:{line:11,column:10},end:{line:13,column:3}},3:{start:{line:14,column:15},end:{line:14,column:19}},4:{start:{line:16,column:4},end:{line:16,column:17}},5:{start:{line:17,column:4},end:{line:17,column:75}},6:{start:{line:20,column:4},end:{line:20,column:27}},7:{start:{line:25,column:21},end:{line:39,column:3}},8:{start:{line:26,column:17},end:{line:26,column:32}},9:{start:{line:27,column:4},end:{line:38,column:5}},10:{start:{line:28,column:18},end:{line:28,column:46}},11:{start:{line:29,column:6},end:{line:32,column:8}},12:{start:{line:34,column:6},end:{line:37,column:8}},13:{start:{line:40,column:17},end:{line:42,column:3}},14:{start:{line:41,column:4},end:{line:41,column:62}},15:{start:{line:44,column:4},end:{line:49,column:5}},16:{start:{line:45,column:6},end:{line:45,column:43}},17:{start:{line:47,column:6},end:{line:47,column:49}},18:{start:{line:48,column:6},end:{line:48,column:39}},19:{start:{line:52,column:4},end:{line:52,column:47}},20:{start:{line:55,column:19},end:{line:55,column:42}},21:{start:{line:56,column:25},end:{line:56,column:44}},22:{start:{line:57,column:31},end:{line:63,column:5}},23:{start:{line:64,column:35},end:{line:99,column:5}},24:{start:{line:79,column:31},end:{line:79,column:67}},25:{start:{line:100,column:24},end:{line:102,column:5}},26:{start:{line:103,column:4},end:{line:124,column:9}},27:{start:{line:114,column:12},end:{line:114,column:36}},28:{start:{line:121,column:27},end:{line:121,column:56}}},fnMap:{0:{name:"formatColor",decl:{start:{line:6,column:9},end:{line:6,column:20}},loc:{start:{line:6,column:28},end:{line:9,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:21},end:{line:18,column:3}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:21},end:{line:21,column:3}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:25,column:21},end:{line:25,column:22}},loc:{start:{line:25,column:27},end:{line:39,column:3}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:40,column:17},end:{line:40,column:18}},loc:{start:{line:40,column:23},end:{line:42,column:3}},line:40},5:{name:"(anonymous_5)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:14},end:{line:50,column:3}},line:43},6:{name:"(anonymous_6)",decl:{start:{line:51,column:2},end:{line:51,column:3}},loc:{start:{line:51,column:14},end:{line:53,column:3}},line:51},7:{name:"(anonymous_7)",decl:{start:{line:54,column:2},end:{line:54,column:3}},loc:{start:{line:54,column:11},end:{line:125,column:3}},line:54},8:{name:"(anonymous_8)",decl:{start:{line:79,column:24},end:{line:79,column:25}},loc:{start:{line:79,column:31},end:{line:79,column:67}},line:79},9:{name:"(anonymous_9)",decl:{start:{line:113,column:15},end:{line:113,column:16}},loc:{start:{line:113,column:26},end:{line:115,column:11}},line:113},10:{name:"(anonymous_10)",decl:{start:{line:121,column:20},end:{line:121,column:21}},loc:{start:{line:121,column:27},end:{line:121,column:56}},line:121}},branchMap:{0:{loc:{start:{line:27,column:4},end:{line:38,column:5}},type:"if",locations:[{start:{line:27,column:4},end:{line:38,column:5}},{start:{line:33,column:11},end:{line:38,column:5}}],line:27},1:{loc:{start:{line:52,column:24},end:{line:52,column:45}},type:"cond-expr",locations:[{start:{line:52,column:35},end:{line:52,column:41}},{start:{line:52,column:44},end:{line:52,column:45}}],line:52},2:{loc:{start:{line:104,column:6},end:{line:104,column:39}},type:"binary-expr",locations:[{start:{line:104,column:6},end:{line:104,column:29}},{start:{line:104,column:33},end:{line:104,column:39}}],line:104},3:{loc:{start:{line:120,column:17},end:{line:120,column:57}},type:"cond-expr",locations:[{start:{line:120,column:36},end:{line:120,column:52}},{start:{line:120,column:55},end:{line:120,column:57}}],line:120}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx"],names:[],mappings:"AAsFmB,SAQb,KARa;AAtFnB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AAEzB,OAAO,YAAY;AAEnB,SAAS,YAAY,OAA4B;AAC/C,QAAM,MAAM,MAAM;AAClB,SAAO,QAAQ,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC;AACpD;AAaA,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,QAAQ;AAAA,IACN,cAAc;AAAA,EAChB;AAAA,EACA,aAAsC;AAAA,EAEtC,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,kBAAkB,OAAO,SAAS,KAAK,iBAAiB,MAAK,EAAE;AAAA,EACtE;AAAA,EAEA,gBAAgB,GAAW;AACzB,SAAK,MAAM,SAAS,CAAC;AAAA,EACvB;AAAA;AAAA;AAAA;AAAA,EAKA,mBAAmB,MAAM;AACvB,UAAM,OAAO,KAAK;AAClB,QAAG,MAAM;AACP,YAAM,MAAM,KAAK,sBAAsB;AACvC,aAAO;AAAA,QACL,KAAK,IAAI;AAAA,QACT,MAAM,IAAI,OAAO;AAAA,MACnB;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,KAAK;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AAAA,EACF;AAAA,EAEA,eAAe,MAAM;AACnB,SAAK,SAAS,EAAE,cAAc,CAAC,KAAK,MAAM,aAAa,CAAC;AAAA,EAC1D;AAAA,EAEA,IAAI,QAAQ;AAEV,QAAI;AACF,aAAO,MAAM,KAAK,MAAM,KAAK,EAAE,IAAI;AAAA,IACrC,SACM,KAAK;AACT,cAAQ,KAAK,yBAAyB,GAAG;AACzC,aAAO,MAAM,kBAAkB;AAAA,IACjC;AAAA,EACF;AAAA,EAEA,SAAU,GAAW;AACnB,SAAK,MAAM,SAAS,MAAM,KAAK,SAAY,CAAC;AAAA,EAC9C;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,iBAAiB;AACrC,UAAM,eAAe,KAAK,MAAM,OAAO;AACvC,UAAM,qBAAqB;AAAA,MACzB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA;AAAA,MAEhB,GAAG,aAAa;AAAA,IAClB;AAEA,UAAM,SAAS;AAAA,MAAC;AAAA;AAAA,QACd,WAAU;AAAA,QACV,OAAO;AAAA,UACL,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,MAAM,OAAO;AAAA,UACb,KAAK,OAAO;AAAA,QACd;AAAA,QACA;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,gBAAgB,YAAY,CAAC,CAAC;AAAA;AAAA,UACpD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK;AAAA,cACd,OAAO;AAAA,gBACL,QAAQ;AAAA,gBACR,UAAU;AAAA,gBACV,KAAK;AAAA,gBACL,OAAO;AAAA,gBACP,QAAQ;AAAA,gBACR,MAAM;AAAA,cACR;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAEA,UAAM,cAAc;AAAA,MAClB,iBAAiB,KAAK,MAAM;AAAA,IAC9B;AAEA,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA,WAAK,MAAM,gBAAgB;AAAA,MAC5B,oBAAC,SAAI,WAAU,yBAAwB,OAAO,aAAa;AAAA,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,cAAa;AAAA,UACb,WAAU;AAAA,UACV,KAAK,CAAC,UAAU;AAAC,iBAAK,aAAa;AAAA,UAAK;AAAA,UACxC,SAAS,KAAK;AAAA,UACd,OAAO,KAAK,MAAM;AAAA,UAClB,MAAM,KAAK,MAAM;AAAA,UACjB,aAAa,KAAK,MAAM;AAAA,UACxB,OAAO,KAAK,MAAM,QAAQ,KAAK,MAAM,QAAQ;AAAA,UAC7C,UAAU,CAAC,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK;AAAA;AAAA,MAC/C;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a28adae6198a0e1a821ffd418caef3c10570b2ba"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return ao=function(){return l},l}ao();function Yue(n){ao().f[0]++;const e=(ao().s[0]++,n.rgb);return ao().s[1]++,`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`}class ZG extends ni.Component{state=(ao().s[2]++,{pickerOpened:!1});colorInput=(ao().s[3]++,null);constructor(e){ao().f[1]++,ao().s[4]++,super(e),ao().s[5]++,this.onChangeNoCheck=A6.throttle(this.onChangeNoCheck,1e3/30)}onChangeNoCheck(e){ao().f[2]++,ao().s[6]++,this.props.onChange(e)}calcPickerOffset=(ao().s[7]++,()=>{ao().f[3]++;const e=(ao().s[8]++,this.colorInput);if(ao().s[9]++,e){ao().b[0][0]++;const t=(ao().s[10]++,e.getBoundingClientRect());return ao().s[11]++,{top:t.top,left:t.left+196}}else return ao().b[0][1]++,ao().s[12]++,{top:160,left:555}});togglePicker=(ao().s[13]++,()=>{ao().f[4]++,ao().s[14]++,this.setState({pickerOpened:!this.state.pickerOpened})});get color(){ao().f[5]++,ao().s[15]++;try{return ao().s[16]++,Ju(this.props.value).rgb()}catch(e){return ao().s[17]++,console.warn("Error parsing color: ",e),ao().s[18]++,Ju("rgb(255,255,255)")}}onChange(e){ao().f[6]++,ao().s[19]++,this.props.onChange(e===""?(ao().b[1][0]++,void 0):(ao().b[1][1]++,e))}render(){ao().f[7]++;const e=(ao().s[20]++,this.calcPickerOffset()),t=(ao().s[21]++,this.color.object()),i=(ao().s[22]++,{r:t.r,g:t.g,b:t.b,a:t.alpha}),r=(ao().s[23]++,ce.jsxs("div",{className:"maputnik-color-picker-offset",style:{position:"fixed",zIndex:1,left:e.left,top:e.top},children:[ce.jsx(Que,{color:i,onChange:l=>(ao().f[8]++,ao().s[24]++,this.onChangeNoCheck(Yue(l)))}),ce.jsx("div",{className:"maputnik-color-picker-offset",onClick:this.togglePicker,style:{zIndex:-1,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}})]})),a=(ao().s[25]++,{backgroundColor:this.props.value});return ao().s[26]++,ce.jsxs("div",{className:"maputnik-color-wrapper",children:[(ao().b[2][0]++,this.state.pickerOpened&&(ao().b[2][1]++,r)),ce.jsx("div",{className:"maputnik-color-swatch",style:a}),ce.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",autoComplete:"off",className:"maputnik-color",ref:l=>{ao().f[9]++,ao().s[27]++,this.colorInput=l},onClick:this.togglePicker,style:this.props.style,name:this.props.name,placeholder:this.props.default,value:this.props.value?(ao().b[3][0]++,this.props.value):(ao().b[3][1]++,""),onChange:l=>(ao().f[10]++,ao().s[28]++,this.onChange(l.target.value))})]})}}function yn(){var n="/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",e="ab7734237b4c4e642d73d3a00f670557b7ee2f29",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:8,column:19},end:{line:8,column:24}},2:{start:{line:10,column:4},end:{line:10,column:17}},3:{start:{line:11,column:4},end:{line:16,column:6}},4:{start:{line:19,column:4},end:{line:24,column:5}},5:{start:{line:20,column:6},end:{line:23,column:8}},6:{start:{line:25,column:4},end:{line:25,column:16}},7:{start:{line:28,column:18},end:{line:28,column:77}},8:{start:{line:29,column:23},end:{line:29,column:49}},9:{start:{line:30,column:4},end:{line:39,column:5}},10:{start:{line:31,column:6},end:{line:31,column:58}},11:{start:{line:31,column:31},end:{line:31,column:58}},12:{start:{line:32,column:6},end:{line:34,column:9}},13:{start:{line:35,column:11},end:{line:39,column:5}},14:{start:{line:36,column:6},end:{line:38,column:9}},15:{start:{line:40,column:4},end:{line:42,column:7}},16:{start:{line:45,column:4},end:{line:47,column:5}},17:{start:{line:46,column:6},end:{line:46,column:18}},18:{start:{line:48,column:18},end:{line:48,column:20}},19:{start:{line:49,column:4},end:{line:51,column:5}},20:{start:{line:50,column:6},end:{line:50,column:19}},21:{start:{line:52,column:4},end:{line:54,column:5}},22:{start:{line:53,column:6},end:{line:53,column:19}},23:{start:{line:55,column:4},end:{line:57,column:5}},24:{start:{line:56,column:6},end:{line:56,column:19}},25:{start:{line:58,column:4},end:{line:58,column:16}},26:{start:{line:60,column:15},end:{line:74,column:3}},27:{start:{line:61,column:4},end:{line:61,column:38}},28:{start:{line:62,column:4},end:{line:64,column:5}},29:{start:{line:63,column:6},end:{line:63,column:13}},30:{start:{line:65,column:4},end:{line:73,column:5}},31:{start:{line:66,column:6},end:{line:72,column:7}},32:{start:{line:67,column:8},end:{line:67,column:43}},33:{start:{line:68,column:8},end:{line:68,column:56}},34:{start:{line:70,column:8},end:{line:70,column:33}},35:{start:{line:71,column:8},end:{line:71,column:46}},36:{start:{line:75,column:18},end:{line:100,column:3}},37:{start:{line:76,column:16},end:{line:76,column:42}},38:{start:{line:77,column:17},end:{line:77,column:37}},39:{start:{line:78,column:21},end:{line:78,column:26}},40:{start:{line:79,column:4},end:{line:95,column:5}},41:{start:{line:80,column:19},end:{line:80,column:31}},42:{start:{line:81,column:6},end:{line:94,column:7}},43:{start:{line:82,column:8},end:{line:86,column:9}},44:{start:{line:83,column:10},end:{line:83,column:42}},45:{start:{line:85,column:10},end:{line:85,column:42}},46:{start:{line:87,column:8},end:{line:87,column:27}},47:{start:{line:89,column:8},end:{line:93,column:9}},48:{start:{line:90,column:10},end:{line:90,column:31}},49:{start:{line:92,column:10},end:{line:92,column:40}},50:{start:{line:96,column:4},end:{line:96,column:32}},51:{start:{line:97,column:4},end:{line:97,column:70}},52:{start:{line:98,column:4},end:{line:98,column:41}},53:{start:{line:99,column:4},end:{line:99,column:56}},54:{start:{line:99,column:29},end:{line:99,column:56}},55:{start:{line:102,column:4},end:{line:185,column:5}},56:{start:{line:103,column:20},end:{line:103,column:81}},57:{start:{line:104,column:27},end:{line:104,column:82}},58:{start:{line:106,column:6},end:{line:110,column:7}},59:{start:{line:107,column:8},end:{line:107,column:38}},60:{start:{line:109,column:8},end:{line:109,column:27}},61:{start:{line:111,column:6},end:{line:165,column:11}},62:{start:{line:124,column:14},end:{line:124,column:41}},63:{start:{line:127,column:14},end:{line:127,column:67}},64:{start:{line:130,column:14},end:{line:130,column:69}},65:{start:{line:133,column:14},end:{line:137,column:17}},66:{start:{line:152,column:14},end:{line:152,column:47}},67:{start:{line:155,column:14},end:{line:155,column:47}},68:{start:{line:158,column:14},end:{line:158,column:48}},69:{start:{line:159,column:14},end:{line:159,column:32}},70:{start:{line:167,column:20},end:{line:167,column:81}},71:{start:{line:168,column:6},end:{line:184,column:8}},72:{start:{line:176,column:27},end:{line:176,column:59}},73:{start:{line:178,column:12},end:{line:178,column:45}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:21},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:26,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:24},end:{line:43,column:3}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:13},end:{line:59,column:3}},line:44},4:{name:"(anonymous_4)",decl:{start:{line:60,column:15},end:{line:60,column:16}},loc:{start:{line:60,column:21},end:{line:74,column:3}},line:60},5:{name:"(anonymous_5)",decl:{start:{line:75,column:18},end:{line:75,column:19}},loc:{start:{line:75,column:25},end:{line:100,column:3}},line:75},6:{name:"(anonymous_6)",decl:{start:{line:101,column:2},end:{line:101,column:3}},loc:{start:{line:101,column:11},end:{line:186,column:3}},line:101},7:{name:"(anonymous_7)",decl:{start:{line:123,column:23},end:{line:123,column:24}},loc:{start:{line:123,column:29},end:{line:125,column:13}},line:123},8:{name:"(anonymous_8)",decl:{start:{line:126,column:27},end:{line:126,column:28}},loc:{start:{line:126,column:33},end:{line:128,column:13}},line:126},9:{name:"(anonymous_9)",decl:{start:{line:129,column:25},end:{line:129,column:26}},loc:{start:{line:129,column:31},end:{line:131,column:13}},line:129},10:{name:"(anonymous_10)",decl:{start:{line:132,column:20},end:{line:132,column:21}},loc:{start:{line:132,column:26},end:{line:138,column:13}},line:132},11:{name:"(anonymous_11)",decl:{start:{line:151,column:21},end:{line:151,column:22}},loc:{start:{line:151,column:29},end:{line:153,column:13}},line:151},12:{name:"(anonymous_12)",decl:{start:{line:154,column:22},end:{line:154,column:23}},loc:{start:{line:154,column:29},end:{line:156,column:13}},line:154},13:{name:"(anonymous_13)",decl:{start:{line:157,column:20},end:{line:157,column:21}},loc:{start:{line:157,column:28},end:{line:160,column:13}},line:157},14:{name:"(anonymous_14)",decl:{start:{line:176,column:20},end:{line:176,column:21}},loc:{start:{line:176,column:27},end:{line:176,column:59}},line:176},15:{name:"(anonymous_15)",decl:{start:{line:177,column:19},end:{line:177,column:20}},loc:{start:{line:177,column:25},end:{line:179,column:11}},line:177}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:8},end:{line:19,column:53}},type:"binary-expr",locations:[{start:{line:19,column:8},end:{line:19,column:22}},{start:{line:19,column:26},end:{line:19,column:53}}],line:19},2:{loc:{start:{line:28,column:18},end:{line:28,column:77}},type:"cond-expr",locations:[{start:{line:28,column:59},end:{line:28,column:65}},{start:{line:28,column:68},end:{line:28,column:77}}],line:28},3:{loc:{start:{line:28,column:18},end:{line:28,column:56}},type:"binary-expr",locations:[{start:{line:28,column:18},end:{line:28,column:33}},{start:{line:28,column:37},end:{line:28,column:56}}],line:28},4:{loc:{start:{line:30,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:39,column:5}},{start:{line:35,column:11},end:{line:39,column:5}}],line:30},5:{loc:{start:{line:30,column:8},end:{line:30,column:41}},type:"binary-expr",locations:[{start:{line:30,column:8},end:{line:30,column:27}},{start:{line:30,column:31},end:{line:30,column:41}}],line:30},6:{loc:{start:{line:31,column:6},end:{line:31,column:58}},type:"if",locations:[{start:{line:31,column:6},end:{line:31,column:58}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},7:{loc:{start:{line:35,column:11},end:{line:39,column:5}},type:"if",locations:[{start:{line:35,column:11},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},8:{loc:{start:{line:35,column:15},end:{line:35,column:49}},type:"binary-expr",locations:[{start:{line:35,column:15},end:{line:35,column:35}},{start:{line:35,column:39},end:{line:35,column:49}}],line:35},9:{loc:{start:{line:41,column:18},end:{line:41,column:53}},type:"cond-expr",locations:[{start:{line:41,column:36},end:{line:41,column:42}},{start:{line:41,column:45},end:{line:41,column:53}}],line:41},10:{loc:{start:{line:45,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},11:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},12:{loc:{start:{line:52,column:4},end:{line:54,column:5}},type:"if",locations:[{start:{line:52,column:4},end:{line:54,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},13:{loc:{start:{line:52,column:8},end:{line:52,column:56}},type:"binary-expr",locations:[{start:{line:52,column:8},end:{line:52,column:30}},{start:{line:52,column:34},end:{line:52,column:56}}],line:52},14:{loc:{start:{line:55,column:4},end:{line:57,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:57,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},15:{loc:{start:{line:55,column:8},end:{line:55,column:56}},type:"binary-expr",locations:[{start:{line:55,column:8},end:{line:55,column:30}},{start:{line:55,column:34},end:{line:55,column:56}}],line:55},16:{loc:{start:{line:62,column:4},end:{line:64,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:64,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},17:{loc:{start:{line:65,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:73,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},18:{loc:{start:{line:66,column:6},end:{line:72,column:7}},type:"if",locations:[{start:{line:66,column:6},end:{line:72,column:7}},{start:{line:69,column:13},end:{line:72,column:7}}],line:66},19:{loc:{start:{line:79,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:79,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},20:{loc:{start:{line:81,column:6},end:{line:94,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:94,column:7}},{start:{line:88,column:13},end:{line:94,column:7}}],line:81},21:{loc:{start:{line:82,column:8},end:{line:86,column:9}},type:"if",locations:[{start:{line:82,column:8},end:{line:86,column:9}},{start:{line:84,column:15},end:{line:86,column:9}}],line:82},22:{loc:{start:{line:89,column:8},end:{line:93,column:9}},type:"if",locations:[{start:{line:89,column:8},end:{line:93,column:9}},{start:{line:91,column:15},end:{line:93,column:9}}],line:89},23:{loc:{start:{line:99,column:4},end:{line:99,column:56}},type:"if",locations:[{start:{line:99,column:4},end:{line:99,column:56}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:99},24:{loc:{start:{line:102,column:4},end:{line:185,column:5}},type:"if",locations:[{start:{line:102,column:4},end:{line:185,column:5}},{start:{line:166,column:11},end:{line:185,column:5}}],line:102},25:{loc:{start:{line:102,column:8},end:{line:102,column:205}},type:"binary-expr",locations:[{start:{line:102,column:8},end:{line:102,column:63}},{start:{line:102,column:67},end:{line:102,column:122}},{start:{line:102,column:126},end:{line:102,column:151}},{start:{line:102,column:155},end:{line:102,column:180}},{start:{line:102,column:184},end:{line:102,column:205}}],line:102},26:{loc:{start:{line:103,column:20},end:{line:103,column:81}},type:"cond-expr",locations:[{start:{line:103,column:41},end:{line:103,column:62}},{start:{line:103,column:65},end:{line:103,column:81}}],line:103},27:{loc:{start:{line:104,column:27},end:{line:104,column:82}},type:"cond-expr",locations:[{start:{line:104,column:59},end:{line:104,column:61}},{start:{line:104,column:64},end:{line:104,column:82}}],line:104},28:{loc:{start:{line:106,column:6},end:{line:110,column:7}},type:"if",locations:[{start:{line:106,column:6},end:{line:110,column:7}},{start:{line:108,column:13},end:{line:110,column:7}}],line:106},29:{loc:{start:{line:121,column:19},end:{line:121,column:58}},type:"cond-expr",locations:[{start:{line:121,column:38},end:{line:121,column:50}},{start:{line:121,column:53},end:{line:121,column:58}}],line:121},30:{loc:{start:{line:150,column:19},end:{line:150,column:58}},type:"cond-expr",locations:[{start:{line:150,column:43},end:{line:150,column:45}},{start:{line:150,column:48},end:{line:150,column:58}}],line:150},31:{loc:{start:{line:167,column:20},end:{line:167,column:81}},type:"cond-expr",locations:[{start:{line:167,column:41},end:{line:167,column:62}},{start:{line:167,column:65},end:{line:167,column:81}}],line:167},32:{loc:{start:{line:175,column:17},end:{line:175,column:46}},type:"cond-expr",locations:[{start:{line:175,column:36},end:{line:175,column:38}},{start:{line:175,column:41},end:{line:175,column:46}}],line:175}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0,0,0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx"],names:[],mappings:"AA8Ka,SACL,KADK;AA9Kb,OAAO,WAAmC;AAC1C,OAAO,sBAAsB;AA0B7B,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,WAAW;AAAA,EACb;AAAA,EACA,iBAA0B;AAAA,EAE1B,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM,CAAC,iBAAiB;AAAA,MACxB,SAAS;AAAA,MACT,OAAO,MAAM;AAAA,MACb,YAAY,MAAM;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,WAAW,MAAM,UAAU,MAAM,OAAO;AACjD,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,QACb,YAAY,MAAM;AAAA,MACpB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,YAAY,UAAuC;AACjD,UAAM,QAAS,aAAa,MAAM,aAAa,SAC7C,SAAY,CAAC;AAEf,UAAM,aAAa,KAAK,MAAM,UAAU;AACxC,QAAG,KAAK,QAAQ,KAAK,KAAK,YAAY;AACpC,UAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAClD,WAAK,SAAS;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,IACH,WACS,CAAC,KAAK,QAAQ,KAAK,KAAK,YAAY;AAC3C,WAAK,SAAS;AAAA,QACZ,OAAO;AAAA,MACT,CAAC;AAAA,IACH;AAEA,SAAK,SAAS;AAAA,MACZ,YAAY,aAAa,KAAK,SAAY;AAAA,IAC5C,CAAC;AAAA,EACH;AAAA,EAEA,QAAQ,GAAgC;AACtC,QAAI,MAAM,QAAW;AACnB,aAAO;AAAA,IACT;AAEA,UAAM,QAAQ,CAAC;AACf,QAAG,MAAM,KAAK,GAAG;AACf,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAE9B,QAAG,CAAC,KAAK,MAAM,OAAO;AACpB;AAAA,IACF;AAGA,QAAI,CAAC,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACnC,UAAG,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACjC,aAAK,YAAY,KAAK,MAAM,KAAK;AACjC,aAAK,SAAS,EAAC,YAAY,KAAK,MAAM,MAAK,CAAC;AAAA,MAC9C,OAAO;AACL,aAAK,YAAY,MAAS;AAC1B,aAAK,SAAS,EAAC,YAAY,OAAS,CAAC;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,MAAqE;AACpF,QAAI,QAAQ,WAAW,EAAE,OAAO,KAAK;AACrC,UAAM,OAAO,KAAK,MAAM;AACxB,QAAI,aAAa;AAEjB,QAAG,MAAM;AAEP,YAAM,OAAO,QAAQ;AAGrB,UAAI,KAAK,gBAAgB;AAKvB,YAAI,QAAQ,CAAC,KAAK,MAAM,YAAa;AACnC,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B,OACK;AACH,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B;AACA,qBAAa;AAAA,MACf,OACK;AACH,YAAI,OAAO,OAAK,GAAG;AACjB,kBAAQ,QAAQ;AAAA,QAClB,OACK;AACH,kBAAQ,SAAS,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,SAAK,iBAAiB;AAGtB,YAAQ,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,CAAC;AAElE,SAAK,SAAS,EAAC,OAAO,WAAU,CAAC;AACjC,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAAA,EACpD;AAAA,EAEA,SAAS;AACP,QACE,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,KAAK,MAAM,QAAQ,UAAa,KAAK,MAAM,QAAQ,UACnD,KAAK,MAAM,YACX;AACA,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AACtE,YAAM,eAAe,KAAK,MAAM,YAAY,SAAY,KAAK,KAAK,MAAM;AACxE,UAAI;AACJ,UAAI,KAAK,MAAM,cAAc;AAC3B,qBAAa,KAAK,MAAM;AAAA,MAC1B,OACK;AACH,qBAAa;AAAA,MACf;AAEA,aAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,WAAU;AAAA,YAEV,MAAK;AAAA,YACL,KAAK,KAAK,MAAM;AAAA,YAChB,KAAK,KAAK,MAAM;AAAA,YAChB,MAAK;AAAA,YACL,YAAW;AAAA,YACX,OAAO,UAAU,SAAY,eAAe;AAAA,YAC5C,UAAU,KAAK;AAAA,YACf,WAAW,MAAM;AACf,mBAAK,iBAAiB;AAAA,YACxB;AAAA,YACA,eAAe,MAAM;AACnB,mBAAK,SAAS,EAAC,SAAS,MAAM,cAAc,KAAI,CAAC;AAAA,YACnD;AAAA,YACA,aAAa,MAAM;AAEjB,mBAAK,SAAS,EAAC,SAAS,OAAO,cAAc,MAAK,CAAC;AAAA,YACrD;AAAA,YACA,QAAQ,MAAM;AACZ,mBAAK,SAAS;AAAA,gBACZ,SAAS;AAAA,gBACT,cAAc;AAAA,gBACd,YAAY,KAAK,MAAM;AAAA,cACzB,CAAC;AAAA,YACH;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAzBrC;AAAA,QA0BN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,MAAK;AAAA,YACL,YAAW;AAAA,YACX,WAAU;AAAA,YACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,YAC1C,OAAO,eAAe,SAAY,KAAK;AAAA,YACvC,SAAS,QAAM;AACb,mBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,YAC/B;AAAA,YACA,UAAU,OAAK;AACb,mBAAK,YAAY,EAAE,OAAO,KAAK;AAAA,YACjC;AAAA,YACA,QAAQ,QAAM;AACZ,mBAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,mBAAK,WAAW;AAAA,YAClB;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAhBrC;AAAA,QAkBN;AAAA,SACF;AAAA,IACF,OACK;AACH,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AAEtE,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,WAAU;AAAA,UACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,UAC1C,OAAO,UAAU,SAAY,KAAK;AAAA,UAClC,UAAU,OAAK,KAAK,YAAY,EAAE,OAAO,KAAK;AAAA,UAC9C,SAAS,MAAM;AACb,iBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,UAC/B;AAAA,UACA,QAAQ,KAAK;AAAA,UACb,UAAU,KAAK,MAAM;AAAA,UACrB,eAAa,KAAK,MAAM,aAAa;AAAA;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ab7734237b4c4e642d73d3a00f670557b7ee2f29"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return yn=function(){return l},l}yn();class z0 extends ni.Component{static defaultProps=(yn().s[0]++,{rangeStep:1});_keyboardEvent=(yn().s[1]++,!1);constructor(e){yn().f[0]++,yn().s[2]++,super(e),yn().s[3]++,this.state={uuid:+Lv(),editing:!1,value:e.value,dirtyValue:e.value}}static getDerivedStateFromProps(e,t){return yn().f[1]++,yn().s[4]++,yn().b[1][0]++,!t.editing&&(yn().b[1][1]++,e.value!==t.value)?(yn().b[0][0]++,yn().s[5]++,{value:e.value,dirtyValue:e.value}):(yn().b[0][1]++,yn().s[6]++,null)}changeValue(e){yn().f[2]++;const t=(yn().s[7]++,yn().b[3][0]++,e===""||(yn().b[3][1]++,e===void 0)?(yn().b[2][0]++,void 0):(yn().b[2][1]++,+e)),i=(yn().s[8]++,this.props.value!==t);yn().s[9]++,yn().b[5][0]++,this.isValid(t)&&(yn().b[5][1]++,i)?(yn().b[4][0]++,yn().s[10]++,this.props.onChange?(yn().b[6][0]++,yn().s[11]++,this.props.onChange(t)):yn().b[6][1]++,yn().s[12]++,this.setState({value:t})):(yn().b[4][1]++,yn().s[13]++,yn().b[8][0]++,!this.isValid(t)&&(yn().b[8][1]++,i)?(yn().b[7][0]++,yn().s[14]++,this.setState({value:void 0})):yn().b[7][1]++),yn().s[15]++,this.setState({dirtyValue:e===""?(yn().b[9][0]++,void 0):(yn().b[9][1]++,e)})}isValid(e){if(yn().f[3]++,yn().s[16]++,e===void 0)return yn().b[10][0]++,yn().s[17]++,!0;yn().b[10][1]++;const t=(yn().s[18]++,+e);return yn().s[19]++,isNaN(t)?(yn().b[11][0]++,yn().s[20]++,!1):(yn().b[11][1]++,yn().s[21]++,yn().b[13][0]++,!isNaN(this.props.min)&&(yn().b[13][1]++,t<this.props.min)?(yn().b[12][0]++,yn().s[22]++,!1):(yn().b[12][1]++,yn().s[23]++,yn().b[15][0]++,!isNaN(this.props.max)&&(yn().b[15][1]++,t>this.props.max)?(yn().b[14][0]++,yn().s[24]++,!1):(yn().b[14][1]++,yn().s[25]++,!0)))}resetValue=(yn().s[26]++,()=>{if(yn().f[4]++,yn().s[27]++,this.setState({editing:!1}),yn().s[28]++,this.state.value)yn().b[16][1]++;else{yn().b[16][0]++,yn().s[29]++;return}yn().s[30]++,this.isValid(this.state.value)?yn().b[17][1]++:(yn().b[17][0]++,yn().s[31]++,this.isValid(this.props.value)?(yn().b[18][0]++,yn().s[32]++,this.changeValue(this.props.value),yn().s[33]++,this.setState({dirtyValue:this.props.value})):(yn().b[18][1]++,yn().s[34]++,this.changeValue(void 0),yn().s[35]++,this.setState({dirtyValue:void 0})))});onChangeRange=(yn().s[36]++,e=>{yn().f[5]++;let t=(yn().s[37]++,parseFloat(e.target.value));const i=(yn().s[38]++,this.props.rangeStep);let r=(yn().s[39]++,t);if(yn().s[40]++,i){yn().b[19][0]++;const a=(yn().s[41]++,t%i);yn().s[42]++,this._keyboardEvent?(yn().b[20][0]++,yn().s[43]++,t<+this.state.dirtyValue?(yn().b[21][0]++,yn().s[44]++,t=this.state.value-i):(yn().b[21][1]++,yn().s[45]++,t=this.state.value+i),yn().s[46]++,r=t):(yn().b[20][1]++,yn().s[47]++,a<i/2?(yn().b[22][0]++,yn().s[48]++,t=t-a):(yn().b[22][1]++,yn().s[49]++,t=t+(i-a)))}else yn().b[19][1]++;yn().s[50]++,this._keyboardEvent=!1,yn().s[51]++,t=Math.max(this.props.min,Math.min(this.props.max,t)),yn().s[52]++,this.setState({value:t,dirtyValue:r}),yn().s[53]++,this.props.onChange?(yn().b[23][0]++,yn().s[54]++,this.props.onChange(t)):yn().b[23][1]++});render(){if(yn().f[6]++,yn().s[55]++,yn().b[25][0]++,Object.prototype.hasOwnProperty.call(this.props,"min")&&(yn().b[25][1]++,Object.prototype.hasOwnProperty.call(this.props,"max"))&&(yn().b[25][2]++,this.props.min!==void 0)&&(yn().b[25][3]++,this.props.max!==void 0)&&(yn().b[25][4]++,this.props.allowRange)){yn().b[24][0]++;const e=(yn().s[56]++,this.state.editing?(yn().b[26][0]++,this.state.dirtyValue):(yn().b[26][1]++,this.state.value)),t=(yn().s[57]++,this.props.default===void 0?(yn().b[27][0]++,""):(yn().b[27][1]++,this.props.default));let i;return yn().s[58]++,this.state.editingRange?(yn().b[28][0]++,yn().s[59]++,i=this.state.value):(yn().b[28][1]++,yn().s[60]++,i=e),yn().s[61]++,ce.jsxs("div",{className:"maputnik-number-container",children:[ce.jsx("input",{className:"maputnik-number-range",type:"range",max:this.props.max,min:this.props.min,step:"any",spellCheck:"false",value:e===void 0?(yn().b[29][0]++,t):(yn().b[29][1]++,e),onChange:this.onChangeRange,onKeyDown:()=>{yn().f[7]++,yn().s[62]++,this._keyboardEvent=!0},onPointerDown:()=>{yn().f[8]++,yn().s[63]++,this.setState({editing:!0,editingRange:!0})},onPointerUp:()=>{yn().f[9]++,yn().s[64]++,this.setState({editing:!1,editingRange:!1})},onBlur:()=>{yn().f[10]++,yn().s[65]++,this.setState({editing:!1,editingRange:!1,dirtyValue:this.state.value})},"data-wd-key":this.props["data-wd-key"]+"-range"},"range"),ce.jsx("input",{type:"text",spellCheck:"false",className:"maputnik-number",placeholder:this.props.default?.toString(),value:i===void 0?(yn().b[30][0]++,""):(yn().b[30][1]++,i),onFocus:r=>{yn().f[11]++,yn().s[66]++,this.setState({editing:!0})},onChange:r=>{yn().f[12]++,yn().s[67]++,this.changeValue(r.target.value)},onBlur:r=>{yn().f[13]++,yn().s[68]++,this.setState({editing:!1}),yn().s[69]++,this.resetValue()},"data-wd-key":this.props["data-wd-key"]+"-text"},"text")]})}else{yn().b[24][1]++;const e=(yn().s[70]++,this.state.editing?(yn().b[31][0]++,this.state.dirtyValue):(yn().b[31][1]++,this.state.value));return yn().s[71]++,ce.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",className:"maputnik-number",placeholder:this.props.default?.toString(),value:e===void 0?(yn().b[32][0]++,""):(yn().b[32][1]++,e),onChange:t=>(yn().f[14]++,yn().s[72]++,this.changeValue(t.target.value)),onFocus:()=>{yn().f[15]++,yn().s[73]++,this.setState({editing:!0})},onBlur:this.resetValue,required:this.props.required,"data-wd-key":this.props["data-wd-key"]})}}}function Lp(){var n="/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",e="e85f7924976070cbab7795bce9cf0e191e4a6b5e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",statementMap:{0:{start:{line:4,column:24},end:{line:6,column:3}},1:{start:{line:7,column:13},end:{line:9,column:3}},2:{start:{line:8,column:4},end:{line:8,column:43}},3:{start:{line:11,column:4},end:{line:26,column:9}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:27,column:3}},line:10}},branchMap:{0:{loc:{start:{line:24,column:17},end:{line:24,column:53}},type:"cond-expr",locations:[{start:{line:24,column:36},end:{line:24,column:44}},{start:{line:24,column:47},end:{line:24,column:53}}],line:24}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx"],names:[],mappings:"AAkBW,SACL,KADK;AAlBX,OAAO,WAAW;AAQlB,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,OAAO,eAAe;AAAA,IACpB,OAAO;AAAA,EACT;AAAA,EAEA,WAAW,MAAM;AACf,SAAK,MAAM,SAAS,CAAC,KAAK,MAAM,KAAK;AAAA,EACvC;AAAA,EAEA,SAAS;AACP,WAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,MAAK;AAAA,UACL,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,KAAK;AAAA,UACf,SAAS,KAAK;AAAA,UACd,SAAS,KAAK,MAAM;AAAA;AAAA,MACtB;AAAA,MACA,oBAAC,SAAI,WAAU,yBACb,8BAAC,SAAI,OAAO;AAAA,QACV,SAAS,KAAK,MAAM,QAAQ,WAAW;AAAA,MACzC,GAAG,WAAU,0BAAyB,SAAQ,aAC5C,8BAAC,UAAK,GAAE,2CAA0C,GACpD,GACF;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e85f7924976070cbab7795bce9cf0e191e4a6b5e"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Lp=function(){return l},l}Lp();class XG extends ni.Component{static defaultProps=(Lp().s[0]++,{value:!1});onChange=(Lp().s[1]++,()=>{Lp().f[0]++,Lp().s[2]++,this.props.onChange(!this.props.value)});render(){return Lp().f[1]++,Lp().s[3]++,ce.jsxs("div",{className:"maputnik-checkbox-wrapper",children:[ce.jsx("input",{className:"maputnik-checkbox",type:"checkbox",style:this.props.style,onChange:this.onChange,onClick:this.onChange,checked:this.props.value}),ce.jsx("div",{className:"maputnik-checkbox-box",children:ce.jsx("svg",{style:{display:this.props.value?(Lp().b[0][0]++,"inline"):(Lp().b[0][1]++,"none")},className:"maputnik-checkbox-icon",viewBox:"0 0 32 32",children:ce.jsx("path",{d:"M1 14 L5 10 L13 18 L27 4 L31 8 L13 26 z"})})})]})}}function ji(){var n="/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",e="9ed81d69001830f70ea45ac1502cde5125167d89",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:4},end:{line:11,column:17}},2:{start:{line:12,column:4},end:{line:16,column:6}},3:{start:{line:19,column:18},end:{line:19,column:20}},4:{start:{line:20,column:30},end:{line:20,column:62}},5:{start:{line:21,column:4},end:{line:28,column:7}},6:{start:{line:22,column:6},end:{line:27,column:7}},7:{start:{line:23,column:8},end:{line:23,column:34}},8:{start:{line:25,column:8},end:{line:25,column:34}},9:{start:{line:26,column:8},end:{line:26,column:46}},10:{start:{line:29,column:4},end:{line:32,column:6}},11:{start:{line:35,column:4},end:{line:38,column:7}},12:{start:{line:36,column:18},end:{line:36,column:26}},13:{start:{line:37,column:6},end:{line:37,column:45}},14:{start:{line:41,column:18},end:{line:41,column:43}},15:{start:{line:42,column:4},end:{line:42,column:26}},16:{start:{line:43,column:4},end:{line:51,column:7}},17:{start:{line:46,column:6},end:{line:50,column:7}},18:{start:{line:47,column:8},end:{line:47,column:35}},19:{start:{line:48,column:13},end:{line:50,column:7}},20:{start:{line:49,column:8},end:{line:49,column:36}},21:{start:{line:54,column:22},end:{line:54,column:32}},22:{start:{line:55,column:27},end:{line:57,column:6}},23:{start:{line:56,column:6},end:{line:56,column:42}},24:{start:{line:58,column:19},end:{line:84,column:6}},25:{start:{line:59,column:6},end:{line:83,column:7}},26:{start:{line:60,column:8},end:{line:70,column:10}},27:{start:{line:66,column:29},end:{line:66,column:51}},28:{start:{line:72,column:8},end:{line:82,column:10}},29:{start:{line:85,column:4},end:{line:85,column:89}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:21},end:{line:17,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:33,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:39},end:{line:21,column:40}},loc:{start:{line:21,column:49},end:{line:28,column:5}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:20},end:{line:39,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:35,column:53},end:{line:35,column:54}},loc:{start:{line:35,column:63},end:{line:38,column:5}},line:35},5:{name:"(anonymous_5)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:29},end:{line:52,column:3}},line:40},6:{name:"(anonymous_6)",decl:{start:{line:45,column:7},end:{line:45,column:8}},loc:{start:{line:45,column:13},end:{line:51,column:5}},line:45},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:86,column:3}},line:53},8:{name:"(anonymous_8)",decl:{start:{line:55,column:60},end:{line:55,column:61}},loc:{start:{line:55,column:69},end:{line:57,column:5}},line:55},9:{name:"(anonymous_9)",decl:{start:{line:58,column:59},end:{line:58,column:60}},loc:{start:{line:58,column:69},end:{line:84,column:5}},line:58},10:{name:"(anonymous_10)",decl:{start:{line:66,column:22},end:{line:66,column:23}},loc:{start:{line:66,column:29},end:{line:66,column:51}},line:66}},branchMap:{0:{loc:{start:{line:22,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:22,column:6},end:{line:27,column:7}},{start:{line:24,column:13},end:{line:27,column:7}}],line:22},1:{loc:{start:{line:37,column:15},end:{line:37,column:43}},type:"binary-expr",locations:[{start:{line:37,column:15},end:{line:37,column:29}},{start:{line:37,column:33},end:{line:37,column:43}}],line:37},2:{loc:{start:{line:46,column:6},end:{line:50,column:7}},type:"if",locations:[{start:{line:46,column:6},end:{line:50,column:7}},{start:{line:48,column:13},end:{line:50,column:7}}],line:46},3:{loc:{start:{line:46,column:10},end:{line:46,column:55}},type:"binary-expr",locations:[{start:{line:46,column:10},end:{line:46,column:32}},{start:{line:46,column:36},end:{line:46,column:55}}],line:46},4:{loc:{start:{line:48,column:13},end:{line:50,column:7}},type:"if",locations:[{start:{line:48,column:13},end:{line:50,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:55,column:27},end:{line:57,column:6}},type:"binary-expr",locations:[{start:{line:55,column:27},end:{line:55,column:43}},{start:{line:55,column:47},end:{line:57,column:6}}],line:55},6:{loc:{start:{line:56,column:13},end:{line:56,column:41}},type:"binary-expr",locations:[{start:{line:56,column:13},end:{line:56,column:23}},{start:{line:56,column:27},end:{line:56,column:41}}],line:56},7:{loc:{start:{line:59,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:59,column:6},end:{line:83,column:7}},{start:{line:71,column:13},end:{line:83,column:7}}],line:59},8:{loc:{start:{line:63,column:21},end:{line:63,column:91}},type:"cond-expr",locations:[{start:{line:63,column:61},end:{line:63,column:67}},{start:{line:63,column:70},end:{line:63,column:91}}],line:63},9:{loc:{start:{line:63,column:21},end:{line:63,column:58}},type:"binary-expr",locations:[{start:{line:63,column:21},end:{line:63,column:35}},{start:{line:63,column:39},end:{line:63,column:58}}],line:63},10:{loc:{start:{line:65,column:22},end:{line:65,column:51}},type:"cond-expr",locations:[{start:{line:65,column:39},end:{line:65,column:43}},{start:{line:65,column:46},end:{line:65,column:51}}],line:65},11:{loc:{start:{line:67,column:26},end:{line:67,column:70}},type:"binary-expr",locations:[{start:{line:67,column:26},end:{line:67,column:50}},{start:{line:67,column:54},end:{line:67,column:70}}],line:67},12:{loc:{start:{line:75,column:21},end:{line:75,column:91}},type:"cond-expr",locations:[{start:{line:75,column:61},end:{line:75,column:67}},{start:{line:75,column:70},end:{line:75,column:91}}],line:75},13:{loc:{start:{line:75,column:21},end:{line:75,column:58}},type:"binary-expr",locations:[{start:{line:75,column:21},end:{line:75,column:35}},{start:{line:75,column:39},end:{line:75,column:58}}],line:75},14:{loc:{start:{line:77,column:22},end:{line:77,column:51}},type:"cond-expr",locations:[{start:{line:77,column:39},end:{line:77,column:43}},{start:{line:77,column:46},end:{line:77,column:51}}],line:77},15:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx"],names:[],mappings:"AA0Fe;AA1Ff,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AAiBxB,qBAAqB,mBAAmB,MAAM,UAA4C;AAAA,EACxF,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,IACR,SAAS,CAAC;AAAA,EACZ;AAAA,EAEA,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA;AAAA,MAE/B,mBAAmB,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA,IAC7C;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAkC,OAAwB;AACxF,UAAM,QAAe,CAAC;AACtB,UAAM,oBAAoB,MAAM,kBAAkB,MAAM,CAAC;AAEzD,UAAM,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC3C,UAAI,MAAM,MAAM,CAAC,MAAM,MAAM,kBAAkB,CAAC,GAAG;AACjD,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MAC1B,OACK;AACH,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AACxB,0BAAkB,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MACtC;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL;AAAA,MACA;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,OAAkB;AAC3B,WAAO,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,MAAM,CAAC,GAAG,MAAM;AACzD,YAAM,MAAM,MAAM,CAAC;AACnB,aAAO,EAAE,QAAQ,UAAa,QAAQ;AAAA,IACxC,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,KAAa,UAAuC;AAC9D,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,CAAC;AACtC,UAAM,GAAG,IAAI;AAEb,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,GAAG,MAAM;AACP,UAAI,KAAK,WAAW,KAAK,KAAK,KAAK,MAAM,UAAU;AACjD,aAAK,MAAM,SAAS,KAAK;AAAA,MAC3B,WACS,KAAK,MAAM,UAAS;AAE3B,aAAK,MAAM,SAAS,MAAS;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,MAAK,IAAI,KAAK;AAErB,UAAM,iBACJ,MAAM,SAAS,KACf,CAAC,MAAM,MAAM,SAAO;AAClB,aAAQ,QAAQ,MAAM,QAAQ;AAAA,IAChC,CAAC;AAGH,UAAM,SAAS,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC/D,UAAG,KAAK,MAAM,SAAS,UAAU;AAC/B,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,CAAC,MAAM,KAAK,YAAY,GAAG,CAAC;AAAA,YACtC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF,OAAO;AACL,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF;AAAA,IACF,CAAC;AAED,WACE,oBAAC,SAAI,WAAU,kBACZ,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9ed81d69001830f70ea45ac1502cde5125167d89"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return ji=function(){return l},l}ji();class JG extends ni.Component{static defaultProps=(ji().s[0]++,{value:[],default:[]});constructor(e){ji().f[0]++,ji().s[1]++,super(e),ji().s[2]++,this.state={value:this.props.value.slice(0),initialPropsValue:this.props.value.slice(0)}}static getDerivedStateFromProps(e,t){ji().f[1]++;const i=(ji().s[3]++,[]),r=(ji().s[4]++,t.initialPropsValue.slice(0));return ji().s[5]++,Array(e.length).fill(null).map((a,l)=>{ji().f[2]++,ji().s[6]++,e.value[l]===t.initialPropsValue[l]?(ji().b[0][0]++,ji().s[7]++,i[l]=t.value[l]):(ji().b[0][1]++,ji().s[8]++,i[l]=t.value[l],ji().s[9]++,r[l]=t.value[l])}),ji().s[10]++,{value:i,initialPropsValue:r}}isComplete(e){return ji().f[3]++,ji().s[11]++,Array(this.props.length).fill(null).every((t,i)=>{ji().f[4]++;const r=(ji().s[12]++,e[i]);return ji().s[13]++,ji().b[1][0]++,!(r===void 0||(ji().b[1][1]++,r===""))})}changeValue(e,t){ji().f[5]++;const i=(ji().s[14]++,this.state.value.slice(0));ji().s[15]++,i[e]=t,ji().s[16]++,this.setState({value:i},()=>{ji().f[6]++,ji().s[17]++,ji().b[3][0]++,this.isComplete(i)&&(ji().b[3][1]++,this.props.onChange)?(ji().b[2][0]++,ji().s[18]++,this.props.onChange(i)):(ji().b[2][1]++,ji().s[19]++,this.props.onChange?(ji().b[4][0]++,ji().s[20]++,this.props.onChange(void 0)):ji().b[4][1]++)})}render(){ji().f[7]++;const{value:e}=(ji().s[21]++,this.state),t=(ji().s[22]++,ji().b[5][0]++,e.length>0&&(ji().b[5][1]++,!e.every(r=>(ji().f[8]++,ji().s[23]++,ji().b[6][0]++,r===""||(ji().b[6][1]++,r===void 0))))),i=(ji().s[24]++,Array(this.props.length).fill(null).map((r,a)=>(ji().f[9]++,ji().s[25]++,this.props.type==="number"?(ji().b[7][0]++,ji().s[26]++,ce.jsx(z0,{default:(ji().b[9][0]++,t||(ji().b[9][1]++,!this.props.default)?(ji().b[8][0]++,void 0):(ji().b[8][1]++,this.props.default[a])),value:e[a],required:t?(ji().b[10][0]++,!0):(ji().b[10][1]++,!1),onChange:l=>(ji().f[10]++,ji().s[27]++,this.changeValue(a,l)),"aria-label":(ji().b[11][0]++,this.props["aria-label"]||(ji().b[11][1]++,this.props.label))},a)):(ji().b[7][1]++,ji().s[28]++,ce.jsx(ap,{default:(ji().b[13][0]++,t||(ji().b[13][1]++,!this.props.default)?(ji().b[12][0]++,void 0):(ji().b[12][1]++,this.props.default[a])),value:e[a],required:t?(ji().b[14][0]++,!0):(ji().b[14][1]++,!1),onChange:this.changeValue.bind(this,a),"aria-label":(ji().b[15][0]++,this.props["aria-label"]||(ji().b[15][1]++,this.props.label))},a)))));return ji().s[29]++,ce.jsx("div",{className:"maputnik-array",children:i})}}function Tu(){var n="/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",e="bdd7d8430a2c43402b1b125b74a343e39aea6a6c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",statementMap:{0:{start:{line:6,column:18},end:{line:6,column:36}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:43}},3:{start:{line:8,column:35},end:{line:8,column:41}},4:{start:{line:10,column:26},end:{line:10,column:59}},5:{start:{line:11,column:19},end:{line:32,column:6}},6:{start:{line:12,column:6},end:{line:31,column:8}},7:{start:{line:22,column:34},end:{line:22,column:58}},8:{start:{line:33,column:4},end:{line:33,column:140}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:34,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:8,column:28},end:{line:8,column:29}},loc:{start:{line:8,column:35},end:{line:8,column:41}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:31},end:{line:11,column:32}},loc:{start:{line:11,column:49},end:{line:32,column:5}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:26},end:{line:22,column:27}},loc:{start:{line:22,column:34},end:{line:22,column:58}},line:22}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:7,column:8},end:{line:7,column:56}},type:"binary-expr",locations:[{start:{line:7,column:8},end:{line:7,column:26}},{start:{line:7,column:30},end:{line:7,column:56}}],line:7},2:{loc:{start:{line:10,column:26},end:{line:10,column:59}},type:"binary-expr",locations:[{start:{line:10,column:26},end:{line:10,column:42}},{start:{line:10,column:46},end:{line:10,column:59}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx"],names:[],mappings:"AAoBa,SAIL,KAJK;AApBb,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAUvB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,IACnC;AAEA,UAAM,gBAAgB,KAAK,MAAM,SAAS,QAAQ,CAAC,EAAE,CAAC;AACtD,UAAM,SAAS,QAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAK;AAC1C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,WAAW,WAAW,mBAAmB,4BAA4B,EAAC,4BAA4B,QAAQ,cAAa,CAAC;AAAA,UAExH;AAAA;AAAA,cAAC;AAAA;AAAA,gBAAM,MAAK;AAAA,gBACV,MAAM,KAAK,MAAM;AAAA,gBACjB,UAAU,QAAM,KAAK,MAAM,SAAS,GAAG;AAAA,gBACvC,OAAO;AAAA,gBACP,SAAS,QAAQ;AAAA;AAAA,YACnB;AAAA,YACC;AAAA;AAAA;AAAA,QATI;AAAA,MAUP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,cAAS,WAAU,wBAAuB,cAAY,KAAK,MAAM,YAAY,GAClF,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bdd7d8430a2c43402b1b125b74a343e39aea6a6c"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Tu=function(){return l},l}Tu();class que extends ni.Component{render(){Tu().f[0]++;let e=(Tu().s[0]++,this.props.options);Tu().s[1]++,Tu().b[1][0]++,e.length>0&&(Tu().b[1][1]++,!Array.isArray(e[0]))?(Tu().b[0][0]++,Tu().s[2]++,e=e.map(r=>(Tu().f[1]++,Tu().s[3]++,[r,r]))):Tu().b[0][1]++;const t=(Tu().s[4]++,Tu().b[2][0]++,this.props.value||(Tu().b[2][1]++,e[0][0])),i=(Tu().s[5]++,e.map(([r,a])=>(Tu().f[2]++,Tu().s[6]++,ce.jsxs("label",{className:e0("maputnik-button","maputnik-radio-as-button",{"maputnik-button-selected":r===t}),children:[ce.jsx("input",{type:"radio",name:this.props.name,onChange:l=>(Tu().f[3]++,Tu().s[7]++,this.props.onChange(r)),value:r,checked:r===t}),a]},r))));return Tu().s[8]++,ce.jsx("fieldset",{className:"maputnik-multibutton","aria-label":this.props["aria-label"],children:i})}}function eA(){var n="/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",e="d905b5da4422f2b84d44f87b04fda3de421542f5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",statementMap:{0:{start:{line:6,column:12},end:{line:6,column:13}},1:{start:{line:7,column:2},end:{line:9,column:5}},2:{start:{line:8,column:4},end:{line:8,column:24}},3:{start:{line:10,column:2},end:{line:10,column:13}},4:{start:{line:14,column:54},end:{line:14,column:64}},5:{start:{line:15,column:4},end:{line:36,column:5}},6:{start:{line:16,column:6},end:{line:25,column:8}},7:{start:{line:27,column:6},end:{line:35,column:8}}},fnMap:{0:{name:"optionsLabelLength",decl:{start:{line:5,column:9},end:{line:5,column:27}},loc:{start:{line:5,column:37},end:{line:11,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:34},end:{line:9,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:37,column:3}},line:13}},branchMap:{0:{loc:{start:{line:15,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:36,column:5}},{start:{line:26,column:11},end:{line:36,column:5}}],line:15},1:{loc:{start:{line:15,column:8},end:{line:15,column:64}},type:"binary-expr",locations:[{start:{line:15,column:8},end:{line:15,column:27}},{start:{line:15,column:31},end:{line:15,column:64}}],line:15},2:{loc:{start:{line:21,column:17},end:{line:21,column:44}},type:"binary-expr",locations:[{start:{line:21,column:17},end:{line:21,column:22}},{start:{line:21,column:26},end:{line:21,column:44}}],line:21},3:{loc:{start:{line:23,column:24},end:{line:23,column:57}},type:"binary-expr",locations:[{start:{line:23,column:24},end:{line:23,column:48}},{start:{line:23,column:52},end:{line:23,column:57}}],line:23},4:{loc:{start:{line:31,column:17},end:{line:31,column:44}},type:"binary-expr",locations:[{start:{line:31,column:17},end:{line:31,column:22}},{start:{line:31,column:26},end:{line:31,column:44}}],line:31},5:{loc:{start:{line:33,column:24},end:{line:33,column:57}},type:"binary-expr",locations:[{start:{line:33,column:24},end:{line:33,column:48}},{start:{line:33,column:52},end:{line:33,column:57}}],line:33}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx"],names:[],mappings:"AAgCa;AAhCb,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,qBAAqB;AAG5B,SAAS,mBAAmB,SAAgB;AAC1C,MAAI,MAAM;AACV,UAAQ,QAAQ,CAAC,CAAC,GAAG,KAAK,MAAM;AAC9B,WAAO,MAAM;AAAA,EACf,CAAC;AACD,SAAO;AACT;AAgBA,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,EAAC,SAAS,OAAO,UAAU,MAAM,MAAK,IAAI,KAAK;AAErD,QAAG,QAAQ,UAAU,KAAK,mBAAmB,OAAO,KAAK,IAAI;AAC3D,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d905b5da4422f2b84d44f87b04fda3de421542f5"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return eA=function(){return l},l}eA();function Hue(n){eA().f[0]++;let e=(eA().s[0]++,0);return eA().s[1]++,n.forEach(([t,i])=>{eA().f[1]++,eA().s[2]++,e+=i.length}),eA().s[3]++,e}class X8 extends ni.Component{render(){eA().f[2]++;const{options:e,value:t,onChange:i,name:r,label:a}=(eA().s[4]++,this.props);return eA().s[5]++,eA().b[1][0]++,e.length<=3&&(eA().b[1][1]++,Hue(e)<=20)?(eA().b[0][0]++,eA().s[6]++,ce.jsx(que,{name:r,options:e,value:(eA().b[2][0]++,t||(eA().b[2][1]++,this.props.default)),onChange:i,"aria-label":(eA().b[3][0]++,this.props["aria-label"]||(eA().b[3][1]++,a))})):(eA().b[0][1]++,eA().s[7]++,ce.jsx(ey,{options:e,value:(eA().b[4][0]++,t||(eA().b[4][1]++,this.props.default)),onChange:i,"aria-label":(eA().b[5][0]++,this.props["aria-label"]||(eA().b[5][1]++,a))}))}}function bv(){var n="/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",e="d603f5ded455e8f3bb5709d22f215a115aa4ac65",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:4},end:{line:12,column:9}},2:{start:{line:15,column:19},end:{line:15,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:13,column:3}},line:6}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,WAAW;AAClB,SAA0B,uBAAuB;AACjD,OAAO;AAOP,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAU;AACR,UAAM,IAAI,KAAK,MAAM;AACrB,WACE,qBAAC,SAAI,WAAU,cACZ;AAAA,QAAE,QAAQ;AAAA,MAAE;AAAA,MAAE,KAAK,MAAM;AAAA,OAC5B;AAAA,EAEJ;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d603f5ded455e8f3bb5709d22f215a115aa4ac65"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return bv=function(){return l},l}bv();class Vue extends ni.Component{render(){bv().f[0]++;const e=(bv().s[0]++,this.props.t);return bv().s[1]++,ce.jsxs("div",{className:"SmallError",children:[e("Error:")," ",this.props.children]})}}const lE=(bv().s[2]++,ss()(Vue));function so(){var n="/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",e="066093a016afc154b7c7f02db523924cec466dd4",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",statementMap:{0:{start:{line:7,column:2},end:{line:9,column:3}},1:{start:{line:8,column:4},end:{line:8,column:11}},2:{start:{line:11,column:22},end:{line:18,column:3}},3:{start:{line:12,column:4},end:{line:17,column:5}},4:{start:{line:13,column:21},end:{line:13,column:34}},5:{start:{line:14,column:6},end:{line:14,column:29}},6:{start:{line:16,column:6},end:{line:16,column:20}},7:{start:{line:19,column:19},end:{line:19,column:35}},8:{start:{line:20,column:16},end:{line:20,column:53}},9:{start:{line:21,column:2},end:{line:41,column:3}},10:{start:{line:22,column:4},end:{line:34,column:5}},11:{start:{line:23,column:6},end:{line:26,column:14}},12:{start:{line:28,column:6},end:{line:33,column:14}},13:{start:{line:35,column:9},end:{line:41,column:3}},14:{start:{line:36,column:4},end:{line:40,column:12}},15:{start:{line:42,column:2},end:{line:42,column:15}},16:{start:{line:45,column:24},end:{line:48,column:3}},17:{start:{line:50,column:4},end:{line:50,column:17}},18:{start:{line:51,column:4},end:{line:53,column:6}},19:{start:{line:55,column:12},end:{line:60,column:3}},20:{start:{line:56,column:4},end:{line:58,column:7}},21:{start:{line:59,column:4},end:{line:59,column:52}},22:{start:{line:59,column:28},end:{line:59,column:52}},23:{start:{line:61,column:13},end:{line:66,column:3}},24:{start:{line:62,column:4},end:{line:64,column:7}},25:{start:{line:65,column:4},end:{line:65,column:29}},26:{start:{line:68,column:4},end:{line:79,column:9}},27:{start:{line:82,column:17},end:{line:82,column:52}}},fnMap:{0:{name:"validate",decl:{start:{line:6,column:9},end:{line:6,column:17}},loc:{start:{line:6,column:26},end:{line:43,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:11,column:22},end:{line:11,column:23}},loc:{start:{line:11,column:32},end:{line:18,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:46,column:13},end:{line:46,column:14}},loc:{start:{line:46,column:19},end:{line:47,column:5}},line:46},3:{name:"(anonymous_3)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:21},end:{line:54,column:3}},line:49},4:{name:"(anonymous_4)",decl:{start:{line:55,column:12},end:{line:55,column:13}},loc:{start:{line:55,column:21},end:{line:60,column:3}},line:55},5:{name:"(anonymous_5)",decl:{start:{line:61,column:13},end:{line:61,column:14}},loc:{start:{line:61,column:22},end:{line:66,column:3}},line:61},6:{name:"(anonymous_6)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:11},end:{line:80,column:3}},line:67}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:7,column:2},end:{line:9,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:21,column:2},end:{line:41,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:41,column:3}},{start:{line:35,column:9},end:{line:41,column:3}}],line:21},2:{loc:{start:{line:22,column:4},end:{line:34,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:34,column:5}},{start:{line:27,column:11},end:{line:34,column:5}}],line:22},3:{loc:{start:{line:35,column:9},end:{line:41,column:3}},type:"if",locations:[{start:{line:35,column:9},end:{line:41,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},4:{loc:{start:{line:35,column:13},end:{line:35,column:86}},type:"binary-expr",locations:[{start:{line:35,column:13},end:{line:35,column:21}},{start:{line:35,column:25},end:{line:35,column:45}},{start:{line:35,column:49},end:{line:35,column:86}}],line:35},5:{loc:{start:{line:59,column:4},end:{line:59,column:52}},type:"if",locations:[{start:{line:59,column:4},end:{line:59,column:52}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx"],names:["url"],mappings:"AA4BU,SAAoC,KAApC;AA5BV,OAAO,WAAoB;AAC3B,OAAO,iBAAiB;AACxB,OAAO,gBAAgB;AACvB,SAAS,OAAwB,uBAAuB;AAGxD,SAAS,SAAS,KAAa,GAAuC;AACpE,MAAI,QAAQ,IAAI;AACd;AAAA,EACF;AAEA,MAAI;AACJ,QAAM,cAAc,CAACA,SAAgB;AACnC,QAAI;AACF,YAAM,SAAS,IAAI,IAAIA,IAAG;AAC1B,aAAO,OAAO;AAAA,IAChB,SACO,MAAM;AACX,aAAO;AAAA,IACT;AAAA,EACF;AACA,QAAM,WAAW,YAAY,GAAG;AAChC,QAAM,QAAQ,OAAO,SAAS,aAAa;AAE3C,MAAI,CAAC,UAAU;AACb,QAAI,OAAO;AACT,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GAC3D;AAAA,IAEJ,OAAO;AACL,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,qBAAO;AAAA,QAAO;AAAA,QAAI,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GACnF;AAAA,IAEJ;AAAA,EACF,WAEE,YACA,aAAa,WACb,OAAO,SAAS,aAAa,UAC7B;AACA,YACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,MACwE,oBAAC,UAAK,sBAAQ;AAAA,MAAO;AAAA,OAC1G,GACF;AAAA,EAEJ;AAEA,SAAO;AACT;AAsBA,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAa,OAA8B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,SAAS,MAAM,OAAO,MAAM,CAAC;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,UAAU,CAAC,QAAgB;AACzB,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,GAAG;AAAA,EAChD;AAAA,EAEA,WAAW,CAAC,QAAgB;AAC1B,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,SAAK,MAAM,SAAS,GAAG;AAAA,EACzB;AAAA,EAEA,SAAU;AACR,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACE,GAAG,KAAK;AAAA,UACT,SAAS,KAAK;AAAA,UACd,UAAU,KAAK;AAAA,UACf,cAAY,KAAK,MAAM,YAAY;AAAA;AAAA,MACrC;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEJ;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"066093a016afc154b7c7f02db523924cec466dd4"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return so=function(){return l},l}so();function AE(n,e){if(so().f[0]++,so().s[0]++,n===""){so().b[0][0]++,so().s[1]++;return}else so().b[0][1]++;let t;so().s[2]++;const i=l=>{so().f[1]++,so().s[3]++;try{const o=(so().s[4]++,new URL(l));return so().s[5]++,o.protocol}catch{so().s[6]++;return}},r=(so().s[7]++,i(n)),a=(so().s[8]++,window.location.protocol==="https:");return so().s[9]++,r?(so().b[1][1]++,so().s[13]++,so().b[4][0]++,r&&(so().b[4][1]++,r==="http:")&&(so().b[4][2]++,window.location.protocol==="https:")?(so().b[3][0]++,so().s[14]++,t=ce.jsx(lE,{children:ce.jsxs(O1,{t:e,children:["CORS policy won't allow fetching resources served over http from https, use a ",ce.jsx("code",{children:"https://"})," domain"]})})):so().b[3][1]++):(so().b[1][0]++,so().s[10]++,a?(so().b[2][0]++,so().s[11]++,t=ce.jsx(lE,{children:ce.jsxs(O1,{t:e,children:["Must provide protocol: ",ce.jsx("code",{children:"https://"})]})})):(so().b[2][1]++,so().s[12]++,t=ce.jsx(lE,{children:ce.jsxs(O1,{t:e,children:["Must provide protocol: ",ce.jsx("code",{children:"http://"})," or ",ce.jsx("code",{children:"https://"})]})}))),so().s[15]++,t}class $ue extends ni.Component{static defaultProps=(so().s[16]++,{onInput:()=>{so().f[2]++}});constructor(e){so().f[3]++,so().s[17]++,super(e),so().s[18]++,this.state={error:AE(e.value,e.t)}}onInput=(so().s[19]++,e=>{so().f[4]++,so().s[20]++,this.setState({error:AE(e,this.props.t)}),so().s[21]++,this.props.onInput?(so().b[5][0]++,so().s[22]++,this.props.onInput(e)):so().b[5][1]++});onChange=(so().s[23]++,e=>{so().f[5]++,so().s[24]++,this.setState({error:AE(e,this.props.t)}),so().s[25]++,this.props.onChange(e)});render(){return so().f[6]++,so().s[26]++,ce.jsxs("div",{children:[ce.jsx(ap,{...this.props,onInput:this.onInput,onChange:this.onChange,"aria-label":this.props["aria-label"]}),this.state.error]})}}const J8=(so().s[27]++,ss()($ue));function Ri(){var n="/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",e="b43f9efa2bc6409a39f030c91aca2fefba2121b9",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",statementMap:{0:{start:{line:14,column:19},end:{line:14,column:39}},1:{start:{line:15,column:4},end:{line:15,column:27}},2:{start:{line:16,column:4},end:{line:16,column:57}},3:{start:{line:16,column:29},end:{line:16,column:57}},4:{start:{line:19,column:4},end:{line:19,column:56}},5:{start:{line:21,column:13},end:{line:35,column:3}},6:{start:{line:22,column:19},end:{line:22,column:39}},7:{start:{line:23,column:4},end:{line:33,column:5}},8:{start:{line:24,column:6},end:{line:24,column:21}},9:{start:{line:25,column:11},end:{line:33,column:5}},10:{start:{line:26,column:6},end:{line:26,column:22}},11:{start:{line:27,column:11},end:{line:33,column:5}},12:{start:{line:28,column:28},end:{line:28,column:38}},13:{start:{line:29,column:27},end:{line:29,column:59}},14:{start:{line:30,column:6},end:{line:30,column:32}},15:{start:{line:32,column:6},end:{line:32,column:22}},16:{start:{line:34,column:4},end:{line:34,column:57}},17:{start:{line:34,column:29},end:{line:34,column:57}},18:{start:{line:37,column:19},end:{line:37,column:39}},19:{start:{line:38,column:4},end:{line:38,column:31}},20:{start:{line:39,column:4},end:{line:39,column:86}},21:{start:{line:39,column:29},end:{line:39,column:86}},22:{start:{line:42,column:14},end:{line:42,column:26}},23:{start:{line:43,column:22},end:{line:43,column:77}},24:{start:{line:44,column:19},end:{line:104,column:6}},25:{start:{line:45,column:45},end:{line:51,column:7}},26:{start:{line:53,column:6},end:{line:91,column:7}},27:{start:{line:54,column:8},end:{line:61,column:10}},28:{start:{line:62,column:13},end:{line:91,column:7}},29:{start:{line:63,column:8},end:{line:70,column:10}},30:{start:{line:71,column:13},end:{line:91,column:7}},31:{start:{line:72,column:24},end:{line:72,column:99}},32:{start:{line:72,column:78},end:{line:72,column:98}},33:{start:{line:73,column:8},end:{line:81,column:10}},34:{start:{line:83,column:8},end:{line:90,column:10}},35:{start:{line:92,column:6},end:{line:103,column:8}},36:{start:{line:105,column:4},end:{line:115,column:9}},37:{start:{line:118,column:26},end:{line:118,column:70}},38:{start:{line:122,column:14},end:{line:122,column:26}},39:{start:{line:123,column:4},end:{line:136,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:29},end:{line:17,column:3}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:15},end:{line:20,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:13},end:{line:21,column:14}},loc:{start:{line:21,column:19},end:{line:35,column:3}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:24},end:{line:40,column:3}},line:36},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:116,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:44,column:35},end:{line:44,column:36}},loc:{start:{line:44,column:45},end:{line:104,column:5}},line:44},6:{name:"(anonymous_6)",decl:{start:{line:72,column:70},end:{line:72,column:71}},loc:{start:{line:72,column:78},end:{line:72,column:98}},line:72},7:{name:"(anonymous_7)",decl:{start:{line:121,column:2},end:{line:121,column:3}},loc:{start:{line:121,column:11},end:{line:137,column:3}},line:121}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:16,column:57}},type:"if",locations:[{start:{line:16,column:4},end:{line:16,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:19,column:11},end:{line:19,column:55}},type:"binary-expr",locations:[{start:{line:19,column:11},end:{line:19,column:27}},{start:{line:19,column:31},end:{line:19,column:49}},{start:{line:19,column:53},end:{line:19,column:55}}],line:19},2:{loc:{start:{line:23,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:33,column:5}},{start:{line:25,column:11},end:{line:33,column:5}}],line:23},3:{loc:{start:{line:25,column:11},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:11},end:{line:33,column:5}},{start:{line:27,column:11},end:{line:33,column:5}}],line:25},4:{loc:{start:{line:27,column:11},end:{line:33,column:5}},type:"if",locations:[{start:{line:27,column:11},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:27},5:{loc:{start:{line:34,column:4},end:{line:34,column:57}},type:"if",locations:[{start:{line:34,column:4},end:{line:34,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},6:{loc:{start:{line:39,column:4},end:{line:39,column:86}},type:"if",locations:[{start:{line:39,column:4},end:{line:39,column:86}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},7:{loc:{start:{line:39,column:49},end:{line:39,column:84}},type:"cond-expr",locations:[{start:{line:39,column:69},end:{line:39,column:75}},{start:{line:39,column:78},end:{line:39,column:84}}],line:39},8:{loc:{start:{line:53,column:6},end:{line:91,column:7}},type:"if",locations:[{start:{line:53,column:6},end:{line:91,column:7}},{start:{line:62,column:13},end:{line:91,column:7}}],line:53},9:{loc:{start:{line:59,column:26},end:{line:59,column:70}},type:"binary-expr",locations:[{start:{line:59,column:26},end:{line:59,column:50}},{start:{line:59,column:54},end:{line:59,column:70}}],line:59},10:{loc:{start:{line:62,column:13},end:{line:91,column:7}},type:"if",locations:[{start:{line:62,column:13},end:{line:91,column:7}},{start:{line:71,column:13},end:{line:91,column:7}}],line:62},11:{loc:{start:{line:68,column:26},end:{line:68,column:70}},type:"binary-expr",locations:[{start:{line:68,column:26},end:{line:68,column:50}},{start:{line:68,column:54},end:{line:68,column:70}}],line:68},12:{loc:{start:{line:71,column:13},end:{line:91,column:7}},type:"if",locations:[{start:{line:71,column:13},end:{line:91,column:7}},{start:{line:82,column:13},end:{line:91,column:7}}],line:71},13:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79},14:{loc:{start:{line:88,column:26},end:{line:88,column:70}},type:"binary-expr",locations:[{start:{line:88,column:26},end:{line:88,column:50}},{start:{line:88,column:54},end:{line:88,column:70}}],line:88}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx"],names:["v"],mappings:"AAqE4B,cAoCf,YApCe;AArE5B,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAEjD,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,cAAc;AAkBrB,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,YAAY,KAAa,UAAuC;AAC9D,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,GAAG,IAAI;AACd,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAAA,EACpD;AAAA,EAEA,WAAW,MAAM;AACf,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,QAAI,KAAK,MAAM,SAAS,UAAU;AAChC,aAAO,KAAK,CAAC;AAAA,IACf,WACS,KAAK,MAAM,SAAS,OAAO;AAClC,aAAO,KAAK,EAAE;AAAA,IAChB,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,YAAM,EAAC,UAAS,IAAI,KAAK;AACzB,YAAM,eAAe,OAAO,KAAK,UAAW,MAAM,EAAE,CAAC;AACrD,aAAO,KAAK,YAAY;AAAA,IAC1B,OAAO;AACL,aAAO,KAAK,EAAE;AAAA,IAChB;AAEA,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,YAAY,UAAkB;AAC5B,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,OAAO,UAAU,CAAC;AAEzB,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,OAAO,SAAS,IAAI,SAAS,MAAS;AAAA,EACrF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,YAAY,EAAE,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAO;AACxE,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,GAAG,MAAM;AACvC,YAAM,iBAAgB;AAAA,QAAC;AAAA;AAAA,UACrB,SAAS,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,UACrC,GAAG;AAAA;AAAA,MACN;AACA,UAAI;AACJ,UAAG,KAAK,MAAM,SAAS,OAAO;AAC5B,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,UAAU;AACrC,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,WAAW,MAAM,EAAE,IAAI,CAAAA,OAAK,CAACA,IAAG,WAAWA,EAAC,CAAC,CAAC;AACrF,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP;AAAA,YACA,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,OACK;AACH,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF;AAEA,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,OAAO,KAAK,MAAM;AAAA,UAElB,WAAU;AAAA,UAEV;AAAA,gCAAC,SAAI,WAAU,+BACZ,0BACH;AAAA,YACA,oBAAC,SAAI,WAAU,gCACZ,iBACH;AAAA;AAAA;AAAA,QARK;AAAA,MASP;AAAA,IACF,CAAC;AAED,WACE,qBAAC,SAAI,WAAU,kBACZ;AAAA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UAEb,YAAE,WAAW;AAAA;AAAA,MAChB;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;AAMf,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,mBAAmB;AAAA,QAE5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,oBAAC,YAAS;AAAA;AAAA,QACnB;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b43f9efa2bc6409a39f030c91aca2fefba2121b9"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Ri=function(){return l},l}Ri();class Zue extends ni.Component{changeValue(e,t){Ri().f[0]++;const i=(Ri().s[0]++,this.values.slice(0));Ri().s[1]++,i[e]=t,Ri().s[2]++,this.props.onChange?(Ri().b[0][0]++,Ri().s[3]++,this.props.onChange(i)):Ri().b[0][1]++}get values(){return Ri().f[1]++,Ri().s[4]++,Ri().b[1][0]++,this.props.value||(Ri().b[1][1]++,this.props.default)||(Ri().b[1][2]++,[])}addValue=(Ri().s[5]++,()=>{Ri().f[2]++;const e=(Ri().s[6]++,this.values.slice(0));if(Ri().s[7]++,this.props.type==="number")Ri().b[2][0]++,Ri().s[8]++,e.push(0);else if(Ri().b[2][1]++,Ri().s[9]++,this.props.type==="url")Ri().b[3][0]++,Ri().s[10]++,e.push("");else if(Ri().b[3][1]++,Ri().s[11]++,this.props.type==="enum"){Ri().b[4][0]++;const{fieldSpec:t}=(Ri().s[12]++,this.props),i=(Ri().s[13]++,Object.keys(t.values)[0]);Ri().s[14]++,e.push(i)}else Ri().b[4][1]++,Ri().s[15]++,e.push("");Ri().s[16]++,this.props.onChange?(Ri().b[5][0]++,Ri().s[17]++,this.props.onChange(e)):Ri().b[5][1]++});deleteValue(e){Ri().f[3]++;const t=(Ri().s[18]++,this.values.slice(0));Ri().s[19]++,t.splice(e,1),Ri().s[20]++,this.props.onChange?(Ri().b[6][0]++,Ri().s[21]++,this.props.onChange(t.length>0?(Ri().b[7][0]++,t):(Ri().b[7][1]++,void 0))):Ri().b[6][1]++}render(){Ri().f[4]++;const e=(Ri().s[22]++,this.props.t),t=(Ri().s[23]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),i=(Ri().s[24]++,this.values.map((r,a)=>{Ri().f[5]++;const l=(Ri().s[25]++,ce.jsx(Xue,{onClick:this.deleteValue.bind(this,a),...t}));let o;if(Ri().s[26]++,this.props.type==="url")Ri().b[8][0]++,Ri().s[27]++,o=ce.jsx(J8,{value:r,onChange:this.changeValue.bind(this,a),"aria-label":(Ri().b[9][0]++,this.props["aria-label"]||(Ri().b[9][1]++,this.props.label))});else if(Ri().b[8][1]++,Ri().s[28]++,this.props.type==="number")Ri().b[10][0]++,Ri().s[29]++,o=ce.jsx(z0,{value:r,onChange:this.changeValue.bind(this,a),"aria-label":(Ri().b[11][0]++,this.props["aria-label"]||(Ri().b[11][1]++,this.props.label))});else if(Ri().b[10][1]++,Ri().s[30]++,this.props.type==="enum"){Ri().b[12][0]++;const m=(Ri().s[31]++,Object.keys(this.props.fieldSpec?.values).map(C=>(Ri().f[6]++,Ri().s[32]++,[C,R8(C)])));Ri().s[33]++,o=ce.jsx(X8,{options:m,value:r,onChange:this.changeValue.bind(this,a),"aria-label":(Ri().b[13][0]++,this.props["aria-label"]||(Ri().b[13][1]++,this.props.label))})}else Ri().b[12][1]++,Ri().s[34]++,o=ce.jsx(ap,{value:r,onChange:this.changeValue.bind(this,a),"aria-label":(Ri().b[14][0]++,this.props["aria-label"]||(Ri().b[14][1]++,this.props.label))});return Ri().s[35]++,ce.jsxs("div",{style:this.props.style,className:"maputnik-array-block",children:[ce.jsx("div",{className:"maputnik-array-block-action",children:l}),ce.jsx("div",{className:"maputnik-array-block-content",children:o})]},a)}));return Ri().s[36]++,ce.jsxs("div",{className:"maputnik-array",children:[i,ce.jsx(ml,{className:"maputnik-array-add-value",onClick:this.addValue,children:e("Add value")})]})}}const ej=(Ri().s[37]++,ss()(Zue));class Xue extends ni.Component{render(){Ri().f[7]++;const e=(Ri().s[38]++,this.props.t);return Ri().s[39]++,ce.jsx(ml,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove array item"),children:ce.jsx(c8,{label:ce.jsx(Wv,{})})})}}function Ds(){var n="/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",e="cd16dc68fc42c219caf080518fd74984d4f8d81e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:9,column:16},end:{line:9,column:60}},2:{start:{line:10,column:4},end:{line:14,column:5}},3:{start:{line:11,column:6},end:{line:11,column:28}},4:{start:{line:13,column:6},end:{line:13,column:17}},5:{start:{line:17,column:26},end:{line:17,column:46}},6:{start:{line:18,column:4},end:{line:18,column:34}},7:{start:{line:19,column:27},end:{line:19,column:92}},8:{start:{line:19,column:55},end:{line:19,column:67}},9:{start:{line:19,column:83},end:{line:19,column:91}},10:{start:{line:20,column:4},end:{line:20,column:40}},11:{start:{line:23,column:19},end:{line:39,column:6}},12:{start:{line:24,column:6},end:{line:38,column:8}},13:{start:{line:32,column:52},end:{line:32,column:58}},14:{start:{line:40,column:4},end:{line:40,column:87}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:15,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:28},end:{line:21,column:3}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:48},end:{line:19,column:49}},loc:{start:{line:19,column:55},end:{line:19,column:67}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:76},end:{line:19,column:77}},loc:{start:{line:19,column:83},end:{line:19,column:91}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:41,column:3}},line:22},5:{name:"(anonymous_5)",decl:{start:{line:23,column:35},end:{line:23,column:36}},loc:{start:{line:23,column:49},end:{line:39,column:5}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:32,column:45},end:{line:32,column:46}},loc:{start:{line:32,column:52},end:{line:32,column:58}},line:32}},branchMap:{0:{loc:{start:{line:9,column:16},end:{line:9,column:60}},type:"binary-expr",locations:[{start:{line:9,column:16},end:{line:9,column:32}},{start:{line:9,column:36},end:{line:9,column:54}},{start:{line:9,column:58},end:{line:9,column:60}}],line:9},1:{loc:{start:{line:10,column:4},end:{line:14,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:14,column:5}},{start:{line:12,column:11},end:{line:14,column:5}}],line:10},2:{loc:{start:{line:30,column:28},end:{line:30,column:71}},type:"binary-expr",locations:[{start:{line:30,column:28},end:{line:30,column:52}},{start:{line:30,column:56},end:{line:30,column:71}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx"],names:[],mappings:"AA6CQ;AA7CR,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAY9B,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,EACV;AAAA,EAEA,IAAI,SAAS;AACX,UAAM,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAGvD,QAAI,IAAI,IAAI,SAAO,CAAC,MAAM,IAAG;AAC3B,aAAO,IAAI,OAAO,EAAE;AAAA,IACtB,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,WAAW,KAAa,UAAkB;AACxC,UAAM,gBAAgB,KAAK,OAAO,MAAM,CAAC;AACzC,kBAAc,GAAG,IAAI;AACrB,UAAM,iBAAiB,cACpB,OAAO,OAAK,MAAM,MAAS,EAC3B,OAAO,OAAK,MAAM,EAAE;AAEvB,SAAK,MAAM,SAAS,cAAc;AAAA,EACpC;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,OAAO,MAAM;AAC3C,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA,cACnD;AAAA,cACA,SAAS,KAAK,MAAM,OAAO,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,cAC1C,UAAU,KAAK,WAAW,KAAK,MAAM,CAAC;AAAA;AAAA,UACxC;AAAA;AAAA,QAPK;AAAA,MAQP;AAAA,IACF,CAAC;AAED,WACE,oBAAC,QAAG,WAAU,iBACX,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cd16dc68fc42c219caf080518fd74984d4f8d81e"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Ds=function(){return l},l}Ds();class Jue extends ni.Component{static defaultProps=(Ds().s[0]++,{fonts:[]});get values(){Ds().f[0]++;const e=(Ds().s[1]++,Ds().b[0][0]++,this.props.value||(Ds().b[0][1]++,this.props.default)||(Ds().b[0][2]++,[]));return Ds().s[2]++,e[e.length-1]!==""?(Ds().b[1][0]++,Ds().s[3]++,e.concat("")):(Ds().b[1][1]++,Ds().s[4]++,e)}changeFont(e,t){Ds().f[1]++;const i=(Ds().s[5]++,this.values.slice(0));Ds().s[6]++,i[e]=t;const r=(Ds().s[7]++,i.filter(a=>(Ds().f[2]++,Ds().s[8]++,a!==void 0)).filter(a=>(Ds().f[3]++,Ds().s[9]++,a!=="")));Ds().s[10]++,this.props.onChange(r)}render(){Ds().f[4]++;const e=(Ds().s[11]++,this.values.map((t,i)=>(Ds().f[5]++,Ds().s[12]++,ce.jsx("li",{children:ce.jsx(Mb,{"aria-label":(Ds().b[2][0]++,this.props["aria-label"]||(Ds().b[2][1]++,this.props.name)),value:t,options:this.props.fonts?.map(r=>(Ds().f[6]++,Ds().s[13]++,[r,r])),onChange:this.changeFont.bind(this,i)})},i))));return Ds().s[14]++,ce.jsx("ul",{className:"maputnik-font",children:e})}}function ho(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",e="8a7e9c26497bbcdc9141a7bf10d3ed50f729d679",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",statementMap:{0:{start:{line:13,column:23},end:{line:13,column:117}},1:{start:{line:16,column:24},end:{line:28,column:5}},2:{start:{line:26,column:30},end:{line:26,column:81}},3:{start:{line:29,column:4},end:{line:115,column:5}},4:{start:{line:31,column:8},end:{line:38,column:10}},5:{start:{line:40,column:24},end:{line:40,column:101}},6:{start:{line:40,column:82},end:{line:40,column:100}},7:{start:{line:41,column:8},end:{line:47,column:10}},8:{start:{line:52,column:8},end:{line:68,column:9}},9:{start:{line:53,column:26},end:{line:53,column:59}},10:{start:{line:54,column:10},end:{line:60,column:12}},11:{start:{line:58,column:42},end:{line:58,column:48}},12:{start:{line:62,column:10},end:{line:67,column:12}},13:{start:{line:70,column:8},end:{line:75,column:10}},14:{start:{line:77,column:8},end:{line:82,column:10}},15:{start:{line:84,column:8},end:{line:112,column:9}},16:{start:{line:85,column:10},end:{line:91,column:12}},17:{start:{line:93,column:10},end:{line:111,column:11}},18:{start:{line:94,column:12},end:{line:101,column:14}},19:{start:{line:103,column:12},end:{line:110,column:14}},20:{start:{line:114,column:8},end:{line:114,column:20}},21:{start:{line:118,column:4},end:{line:118,column:124}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:15},end:{line:116,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:26,column:16},end:{line:26,column:17}},loc:{start:{line:26,column:30},end:{line:26,column:81}},line:26},2:{name:"(anonymous_2)",decl:{start:{line:40,column:75},end:{line:40,column:76}},loc:{start:{line:40,column:82},end:{line:40,column:100}},line:40},3:{name:"(anonymous_3)",decl:{start:{line:58,column:35},end:{line:58,column:36}},loc:{start:{line:58,column:42},end:{line:58,column:48}},line:58},4:{name:"(anonymous_4)",decl:{start:{line:117,column:2},end:{line:117,column:3}},loc:{start:{line:117,column:11},end:{line:119,column:3}},line:117}},branchMap:{0:{loc:{start:{line:29,column:4},end:{line:115,column:5}},type:"switch",locations:[{start:{line:30,column:6},end:{line:38,column:10}},{start:{line:39,column:6},end:{line:48,column:7}},{start:{line:49,column:6},end:{line:49,column:27}},{start:{line:50,column:6},end:{line:50,column:23}},{start:{line:51,column:6},end:{line:68,column:9}},{start:{line:69,column:6},end:{line:75,column:10}},{start:{line:76,column:6},end:{line:82,column:10}},{start:{line:83,column:6},end:{line:112,column:9}},{start:{line:113,column:6},end:{line:114,column:20}}],line:29},1:{loc:{start:{line:40,column:36},end:{line:40,column:69}},type:"binary-expr",locations:[{start:{line:40,column:36},end:{line:40,column:63}},{start:{line:40,column:67},end:{line:40,column:69}}],line:40},2:{loc:{start:{line:52,column:8},end:{line:68,column:9}},type:"if",locations:[{start:{line:52,column:8},end:{line:68,column:9}},{start:{line:61,column:15},end:{line:68,column:9}}],line:52},3:{loc:{start:{line:53,column:26},end:{line:53,column:59}},type:"binary-expr",locations:[{start:{line:53,column:26},end:{line:53,column:53}},{start:{line:53,column:57},end:{line:53,column:59}}],line:53},4:{loc:{start:{line:84,column:8},end:{line:112,column:9}},type:"if",locations:[{start:{line:84,column:8},end:{line:112,column:9}},{start:{line:92,column:15},end:{line:112,column:9}}],line:84},5:{loc:{start:{line:93,column:10},end:{line:111,column:11}},type:"if",locations:[{start:{line:93,column:10},end:{line:111,column:11}},{start:{line:102,column:17},end:{line:111,column:11}}],line:93}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0,0,0,0,0,0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx"],names:[],mappings:"AAyDM;AAzDN,OAAO,WAA6B;AAEpC,OAAO,gBAAqC;AAC5C,OAAO,iBAAuC;AAC9C,OAAO,mBAA2C;AAClD,OAAO,iBAAuC;AAC9C,OAAO,gBAAqC;AAC5C,OAAO,uBAAmD;AAC1D,OAAO,eAAmC;AAC1C,OAAO,uBAAmD;AAC1D,OAAO,eAAmC;AAC1C,OAAO,gBAAgB;AAEvB,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AA0BpH,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EAErE,aAAa;AACX,UAAM,cAAc;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,WAAW,KAAK,MAAM;AAAA,MACtB,OAAO,KAAK,MAAM;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,SAAS,KAAK,MAAM,WAAW;AAAA,MAC/B,MAAM,KAAK,MAAM;AAAA,MACjB,eAAe,sBAAsB,KAAK,MAAM;AAAA,MAChD,UAAU,CAAC,aAAmE,KAAK,MAAM,SAAU,KAAK,MAAM,WAAW,QAAQ;AAAA,MACjI,cAAc,KAAK,MAAM,YAAY;AAAA,IACvC;AACA,YAAO,KAAK,MAAM,WAAW,MAAM;AAAA,MACnC,KAAK;AAAU,eACb;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,KAAK,KAAK,MAAM,UAAU;AAAA,YAC1B,KAAK,KAAK,MAAM,UAAU;AAAA;AAAA,QAC5B;AAAA,MAEF,KAAK,QAAQ;AACX,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,UAAU,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAE1F,eAAO;AAAA,UAAC;AAAA;AAAA,YACL,GAAG;AAAA,YACJ;AAAA;AAAA,QACF;AAAA,MACF;AAAA,MACA,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,YAAI,eAAe,QAAQ,KAAK,MAAM,SAAU,KAAK,GAAG;AACtD,gBAAM,UAAU,KAAK,MAAM,UAAU,UAAU,CAAC;AAChD,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,SAAS,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,UAClC;AAAA,QACF,OAAO;AACL,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA;AAAA,UACN;AAAA,QACF;AAAA,MACF,KAAK;AAAS,eACZ;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AAAW,eACd;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AACH,YAAG,KAAK,MAAM,cAAc,aAAa;AACvC,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,OAAO,KAAK,MAAM,UAAU;AAAA;AAAA,UAC9B;AAAA,QACF,OAAO;AACL,cAAI,KAAK,MAAM,UAAU,QAAQ;AAC/B,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,MAAM,KAAK,MAAM,UAAU;AAAA,gBAC3B,QAAQ,KAAK,MAAM,UAAU;AAAA;AAAA,YAC/B;AAAA,UACF,OAAO;AACL,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,WAAW,KAAK,MAAM;AAAA,gBACtB,MAAM,KAAK,MAAM,UAAU;AAAA;AAAA,YAC7B;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAS,eAAO;AAAA,IAChB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WACE,oBAAC,SAAI,eAAa,gBAAc,KAAK,MAAM,WACxC,eAAK,WAAW,GACnB;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8a7e9c26497bbcdc9141a7bf10d3ed50f729d679"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return ho=function(){return l},l}ho();const ece=(ho().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);class xv extends ni.Component{childNodes(){ho().f[0]++;const e=(ho().s[1]++,{error:this.props.error,fieldSpec:this.props.fieldSpec,label:this.props.label,action:this.props.action,style:this.props.style,value:this.props.value,default:this.props.fieldSpec?.default,name:this.props.fieldName,"data-wd-key":"spec-field-input:"+this.props.fieldName,onChange:t=>(ho().f[1]++,ho().s[2]++,this.props.onChange(this.props.fieldName,t)),"aria-label":this.props["aria-label"]});switch(ho().s[3]++,this.props.fieldSpec?.type){case"number":return ho().b[0][0]++,ho().s[4]++,ce.jsx(z0,{...e,min:this.props.fieldSpec.minimum,max:this.props.fieldSpec.maximum});case"enum":ho().b[0][1]++;{const t=(ho().s[5]++,Object.keys((ho().b[1][0]++,this.props.fieldSpec.values||(ho().b[1][1]++,[]))).map(i=>(ho().f[2]++,ho().s[6]++,[i,R8(i)])));return ho().s[7]++,ce.jsx(X8,{...e,options:t})}case"resolvedImage":ho().b[0][2]++;case"formatted":ho().b[0][3]++;case"string":if(ho().b[0][4]++,ho().s[8]++,ece.indexOf(this.props.fieldName)>=0){ho().b[2][0]++;const t=(ho().s[9]++,ho().b[3][0]++,this.props.fieldSpec.values||(ho().b[3][1]++,[]));return ho().s[10]++,ce.jsx(Mb,{...e,options:t.map(i=>(ho().f[3]++,ho().s[11]++,[i,i]))})}else return ho().b[2][1]++,ho().s[12]++,ce.jsx(ap,{...e});case"color":return ho().b[0][5]++,ho().s[13]++,ce.jsx(ZG,{...e});case"boolean":return ho().b[0][6]++,ho().s[14]++,ce.jsx(XG,{...e});case"array":return ho().b[0][7]++,ho().s[15]++,this.props.fieldName==="text-font"?(ho().b[4][0]++,ho().s[16]++,ce.jsx(Jue,{...e,fonts:this.props.fieldSpec.values})):(ho().b[4][1]++,ho().s[17]++,this.props.fieldSpec.length?(ho().b[5][0]++,ho().s[18]++,ce.jsx(JG,{...e,type:this.props.fieldSpec.value,length:this.props.fieldSpec.length})):(ho().b[5][1]++,ho().s[19]++,ce.jsx(ej,{...e,fieldSpec:this.props.fieldSpec,type:this.props.fieldSpec.value})));default:return ho().b[0][8]++,ho().s[20]++,null}}render(){return ho().f[4]++,ho().s[21]++,ce.jsx("div",{"data-wd-key":"spec-field:"+this.props.fieldName,children:this.childNodes()})}}function Nc(){var n="/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",e="cf4fa307cbacd101a0c445717dc560b88355320c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",statementMap:{0:{start:{line:6,column:17},end:{line:26,column:1}},1:{start:{line:7,column:32},end:{line:7,column:53}},2:{start:{line:8,column:18},end:{line:8,column:67}},3:{start:{line:9,column:22},end:{line:11,column:3}},4:{start:{line:10,column:4},end:{line:10,column:20}},5:{start:{line:12,column:2},end:{line:25,column:7}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:17},end:{line:6,column:18}},loc:{start:{line:6,column:28},end:{line:26,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:9,column:22},end:{line:9,column:23}},loc:{start:{line:9,column:31},end:{line:11,column:3}},line:9}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:20,column:8}},type:"binary-expr",locations:[{start:{line:13,column:4},end:{line:13,column:19}},{start:{line:13,column:39},end:{line:20,column:8}}],line:13},1:{loc:{start:{line:21,column:4},end:{line:21,column:118}},type:"binary-expr",locations:[{start:{line:21,column:4},end:{line:21,column:20}},{start:{line:21,column:40},end:{line:21,column:118}}],line:21},2:{loc:{start:{line:24,column:4},end:{line:24,column:198}},type:"binary-expr",locations:[{start:{line:24,column:4},end:{line:24,column:19}},{start:{line:24,column:39},end:{line:24,column:198}}],line:24},3:{loc:{start:{line:24,column:104},end:{line:24,column:125}},type:"cond-expr",locations:[{start:{line:24,column:114},end:{line:24,column:116}},{start:{line:24,column:119},end:{line:24,column:125}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx"],names:[],mappings:"AAqBI,SAGM,KAHN;AArBJ,OAAO,WAAgD;AACvD,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAChB,OAAO,sBAAsB;AAS7B,MAAM,WAAoC,CAAC,UAAU;AACnD,QAAM,CAAC,SAAS,UAAU,IAAI,MAAM,SAAS,KAAK;AAClD,QAAM,UAAU,MAAM,OAAO,iBAAiB,iBAAiB,CAAC;AAEhE,QAAM,cAAc,CAAC,QAAiB;AACpC,eAAW,GAAG;AAAA,EAChB;AAEA,SACE,qBAAC,SAAI,WAAU,wBAAuB,MAAK,SAAQ,mBAAiB,QAAQ,SACzE;AAAA,UAAM,aACL,oBAAC,SAAI,WAAU,8BACb;AAAA,MAAC;AAAA;AAAA,QACC,OAAO,MAAM;AAAA,QACb;AAAA,QACA,WAAW,MAAM;AAAA;AAAA,IACnB,GACF;AAAA,IAED,CAAC,MAAM,aACN,oBAAC,SAAI,WAAU,8BACZ,gBAAM,OACT;AAAA,IAEF,oBAAC,SAAI,WAAU,+BAA+B,gBAAM,QAAO;AAAA,IAC3D,oBAAC,SAAI,WAAU,gCAAgC,gBAAM,UAAS;AAAA,IAC7D,MAAM,aACL,oBAAC,SAAI,WAAU,uBAAsB,OAAO,EAAE,SAAS,UAAU,KAAK,OAAO,GAC3E,8BAAC,OAAI,WAAW,MAAM,WAAW,GACnC;AAAA,KAEJ;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cf4fa307cbacd101a0c445717dc560b88355320c"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Nc=function(){return l},l}Nc();Nc().s[0]++;const G_=n=>{Nc().f[0]++;const[e,t]=(Nc().s[1]++,ni.useState(!1)),i=(Nc().s[2]++,ni.useRef(Lv("fieldset_label_")));Nc().s[3]++;const r=a=>{Nc().f[1]++,Nc().s[4]++,t(a)};return Nc().s[5]++,ce.jsxs("div",{className:"maputnik-input-block",role:"group","aria-labelledby":i.current,children:[(Nc().b[0][0]++,n.fieldSpec&&(Nc().b[0][1]++,ce.jsx("div",{className:"maputnik-input-block-label",children:ce.jsx(c8,{label:n.label,onToggleDoc:r,fieldSpec:n.fieldSpec})}))),(Nc().b[1][0]++,!n.fieldSpec&&(Nc().b[1][1]++,ce.jsx("div",{className:"maputnik-input-block-label",children:n.label}))),ce.jsx("div",{className:"maputnik-input-block-action",children:n.action}),ce.jsx("div",{className:"maputnik-input-block-content",children:n.children}),(Nc().b[2][0]++,n.fieldSpec&&(Nc().b[2][1]++,ce.jsx("div",{className:"maputnik-doc-inline",style:{display:e?(Nc().b[3][0]++,""):(Nc().b[3][1]++,"none")},children:ce.jsx(h8,{fieldSpec:n.fieldSpec})})))]})};function os(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx",e="1523d1b0573453c99a4bbd660fb228bbbcf102fc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx",statementMap:{0:{start:{line:5,column:16},end:{line:15,column:1}},1:{start:{line:6,column:15},end:{line:6,column:20}},2:{start:{line:7,column:27},end:{line:7,column:87}},3:{start:{line:8,column:17},end:{line:8,column:22}},4:{start:{line:9,column:15},end:{line:9,column:23}},5:{start:{line:10,column:23},end:{line:10,column:28}},6:{start:{line:11,column:16},end:{line:11,column:21}},7:{start:{line:12,column:16},end:{line:12,column:21}},8:{start:{line:13,column:19},end:{line:13,column:24}},9:{start:{line:14,column:17},end:{line:14,column:22}},10:{start:{line:16,column:18},end:{line:27,column:1}},11:{start:{line:17,column:20},end:{line:17,column:41}},12:{start:{line:18,column:22},end:{line:18,column:40}},13:{start:{line:20,column:2},end:{line:25,column:3}},14:{start:{line:21,column:4},end:{line:21,column:35}},15:{start:{line:23,column:4},end:{line:23,column:53}},16:{start:{line:24,column:4},end:{line:24,column:22}},17:{start:{line:26,column:2},end:{line:26,column:170}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:9},end:{line:6,column:10}},loc:{start:{line:6,column:15},end:{line:6,column:20}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:7,column:8},end:{line:7,column:9}},loc:{start:{line:7,column:27},end:{line:7,column:87}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:8,column:11},end:{line:8,column:12}},loc:{start:{line:8,column:17},end:{line:8,column:22}},line:8},3:{name:"(anonymous_3)",decl:{start:{line:9,column:9},end:{line:9,column:10}},loc:{start:{line:9,column:15},end:{line:9,column:23}},line:9},4:{name:"(anonymous_4)",decl:{start:{line:10,column:17},end:{line:10,column:18}},loc:{start:{line:10,column:23},end:{line:10,column:28}},line:10},5:{name:"(anonymous_5)",decl:{start:{line:11,column:10},end:{line:11,column:11}},loc:{start:{line:11,column:16},end:{line:11,column:21}},line:11},6:{name:"(anonymous_6)",decl:{start:{line:12,column:10},end:{line:12,column:11}},loc:{start:{line:12,column:16},end:{line:12,column:21}},line:12},7:{name:"(anonymous_7)",decl:{start:{line:13,column:13},end:{line:13,column:14}},loc:{start:{line:13,column:19},end:{line:13,column:24}},line:13},8:{name:"(anonymous_8)",decl:{start:{line:14,column:11},end:{line:14,column:12}},loc:{start:{line:14,column:17},end:{line:14,column:22}},line:14},9:{name:"(anonymous_9)",decl:{start:{line:16,column:18},end:{line:16,column:19}},loc:{start:{line:16,column:29},end:{line:27,column:1}},line:16}},branchMap:{0:{loc:{start:{line:7,column:27},end:{line:7,column:87}},type:"cond-expr",locations:[{start:{line:7,column:71},end:{line:7,column:79}},{start:{line:7,column:82},end:{line:7,column:87}}],line:7},1:{loc:{start:{line:20,column:2},end:{line:25,column:3}},type:"if",locations:[{start:{line:20,column:2},end:{line:25,column:3}},{start:{line:22,column:9},end:{line:25,column:3}}],line:20}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx"],names:[],mappings:"AAqCM;AArCN,OAAO,WAAW;AAClB,OAAO,eAAmC;AAC1C,OAAO,cAAc;AAGrB,MAAM,UAAU;AAAA,EACd,OAAO,MAAM;AAAA,EACb,MAAM,CAAC,EAAC,UAAS,MAAY,OAAO,KAAK,UAAU,MAAM,EAAE,UAAU,IAAI,WAAW;AAAA,EACpF,SAAS,MAAM;AAAA,EACf,OAAO,MAAM;AAAA,EACb,eAAe,MAAM;AAAA,EACrB,QAAQ,MAAM;AAAA,EACd,QAAQ,MAAM;AAAA,EACd,WAAW,MAAM;AAAA,EACjB,SAAS,MAAM;AACjB;AAMA,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,YAAY,MAAM,WAAW;AAEnC,QAAM,cAAc,QAAQ,SAAU;AAEtC,MAAI;AACJ,MAAI,aAAa;AACf,gBAAY,YAAY,KAAK;AAAA,EAC/B,OACK;AACH,YAAQ,KAAK,yBAAyB,SAAS;AAC/C,gBAAY;AAAA,EACd;AAEA,SACE,oBAAC,aAAU,OAAO,MAAM,OAAO,QAAQ,MAAM,QAAQ,WAAW,MAAM,WACpE,8BAAC,aAAW,GAAG,OAAO,GACxB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1523d1b0573453c99a4bbd660fb228bbbcf102fc"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return os=function(){return l},l}os();const tce=(os().s[0]++,{color:()=>(os().f[0]++,os().s[1]++,Ks),enum:({fieldSpec:n})=>(os().f[1]++,os().s[2]++,Object.keys(n.values).length<=3?(os().b[0][0]++,G_):(os().b[0][1]++,Ks)),boolean:()=>(os().f[2]++,os().s[3]++,Ks),array:()=>(os().f[3]++,os().s[4]++,G_),resolvedImage:()=>(os().f[4]++,os().s[5]++,Ks),number:()=>(os().f[5]++,os().s[6]++,Ks),string:()=>(os().f[6]++,os().s[7]++,Ks),formatted:()=>(os().f[7]++,os().s[8]++,Ks),padding:()=>(os().f[8]++,os().s[9]++,Ks)});os().s[10]++;const nce=n=>{os().f[9]++;const e=(os().s[11]++,n.fieldSpec?.type),t=(os().s[12]++,tce[e]);let i;return os().s[13]++,t?(os().b[1][0]++,os().s[14]++,i=t(n)):(os().b[1][1]++,os().s[15]++,console.warn("No such type for '%s'",e),os().s[16]++,i=Ks),os().s[17]++,ce.jsx(i,{label:n.label,action:n.action,fieldSpec:n.fieldSpec,children:ce.jsx(xv,{...n})})};function Uh(){var n="/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",e="1b48667f7b6c71286214e7e9a6764b7991e25bd6",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:11,column:4},end:{line:48,column:5}},2:{start:{line:12,column:6},end:{line:20,column:8}},3:{start:{line:21,column:6},end:{line:29,column:8}},4:{start:{line:30,column:6},end:{line:40,column:7}},5:{start:{line:31,column:8},end:{line:39,column:10}},6:{start:{line:41,column:6},end:{line:45,column:11}},7:{start:{line:47,column:6},end:{line:47,column:77}},8:{start:{line:51,column:29},end:{line:51,column:76}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:49,column:3}},line:8}},branchMap:{0:{loc:{start:{line:11,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:48,column:5}},{start:{line:46,column:11},end:{line:48,column:5}}],line:11},1:{loc:{start:{line:30,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:30,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx"],names:[],mappings:"AA2BY,cAsBC,YAtBD;AA3BZ,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,aAAa,qBAAoB;AACzC,SAAQ,0BAAyB;AACjC,SAA0B,uBAAuB;AASjD,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAI,qBAAqB,qBAAqB;AAE9C,QAAI,KAAK,MAAM,UAAU,YAAY,WAAW,SAAS,MAAM,GAAG;AAChE,8BACE;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uBAAuB;AAAA,UAEhC,8BAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAC1E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA;AAAA,MACF;AAGF,4BAAsB;AAAA,QAAC;AAAA;AAAA,UACrB,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uCAAuC;AAAA,UAEhD,8BAAC,eAAY;AAAA;AAAA,MACf;AAEA,UAAI,KAAK,MAAM,UAAU,eAAe,MAAM,eAAe;AAC3D,8BAAsB;AAAA,UAAC;AAAA;AAAA,YACrB,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,OAAO,EAAE,mCAAmC;AAAA,YAE5C,8BAAC,iBAAc;AAAA;AAAA,QACjB;AAAA,MACF;AACA,aAAO,qBAAC,SACL;AAAA;AAAA,QACA;AAAA,QACA;AAAA,SACH;AAAA,IACF,OACK;AACH,aAAO,oBAAC,SAAK,iCAAsB;AAAA,IACrC;AAAA,EACF;AACF;AAEA,MAAM,uBAAuB,gBAAgB,EAAE,4BAA4B;AAC3E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1b48667f7b6c71286214e7e9a6764b7991e25bd6"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Uh=function(){return l},l}Uh();class ice extends ni.Component{render(){Uh().f[0]++;const e=(Uh().s[0]++,this.props.t);let t,i,r;return Uh().s[1]++,this.props.fieldSpec.expression?.parameters.includes("zoom")?(Uh().b[0][0]++,Uh().s[2]++,r=ce.jsx(ml,{className:"maputnik-make-zoom-function",onClick:this.props.onExpressionClick,title:e("Convert to expression"),children:ce.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:ce.jsx("path",{fill:"currentColor",d:N_})})}),Uh().s[3]++,t=ce.jsx(ml,{className:"maputnik-make-zoom-function",onClick:this.props.onZoomClick,title:e("Convert property into a zoom function"),children:ce.jsx(i$,{})}),Uh().s[4]++,this.props.fieldSpec["property-type"]==="data-driven"?(Uh().b[1][0]++,Uh().s[5]++,i=ce.jsx(ml,{className:"maputnik-make-data-function",onClick:this.props.onDataClick,title:e("Convert property to data function"),children:ce.jsx(r$,{})})):Uh().b[1][1]++,Uh().s[6]++,ce.jsxs("div",{children:[r,i,t]})):(Uh().b[0][1]++,Uh().s[7]++,ce.jsx("div",{children:r}))}}const rce=(Uh().s[8]++,ss()(ice));function Fp(){var n="/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",e="60f6f0f35f3e44d7e7f08e2966cfff09ee69557d",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",statementMap:{0:{start:{line:7,column:24},end:{line:9,column:3}},1:{start:{line:11,column:45},end:{line:11,column:55}},2:{start:{line:12,column:40},end:{line:20,column:5}},3:{start:{line:21,column:18},end:{line:21,column:53}},4:{start:{line:22,column:4},end:{line:31,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:32,column:3}},line:10}},branchMap:{0:{loc:{start:{line:28,column:34},end:{line:28,column:60}},type:"binary-expr",locations:[{start:{line:28,column:34},end:{line:28,column:54}},{start:{line:28,column:58},end:{line:28,column:60}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx"],names:[],mappings:"AA4BwB;AA5BxB,OAAO,WAAW;AAElB,OAAO,eAAiC;AACxC,OAAO,qBAAqB;AAE5B,OAAO,wBAAwB;AAe/B,qBAAqB,qBAAqB,MAAM,UAA6B;AAAA,EAC3E,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,WAAW,UAAS,IAAI,KAAK;AAE5C,UAAM,cAAc;AAAA,MAAC;AAAA;AAAA,QACnB,WAAW,KAAK,MAAM;AAAA,QACtB,aAAa,KAAK,MAAM;AAAA,QACxB,aAAa,KAAK,MAAM;AAAA,QACxB,mBAAmB,KAAK,MAAM;AAAA;AAAA,IAChC;AAEA,UAAM,QAAQ,OAAQ,YAAU,MAAI,SAAgB;AAEpD,WAAO;AAAA,MAAC;AAAA;AAAA,QACL,GAAG,KAAK;AAAA,QACT;AAAA,QACA,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,mBAAmB,KAAK,MAAM,aAAa,EAAE;AAAA,QACpD,QAAQ;AAAA;AAAA,IACV;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"60f6f0f35f3e44d7e7f08e2966cfff09ee69557d"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Fp=function(){return l},l}Fp();class oce extends ni.Component{static defaultProps=(Fp().s[0]++,{errors:{}});render(){Fp().f[0]++;const{errors:e,fieldName:t,fieldType:i}=(Fp().s[1]++,this.props),r=(Fp().s[2]++,ce.jsx(rce,{fieldSpec:this.props.fieldSpec,onZoomClick:this.props.onZoomClick,onDataClick:this.props.onDataClick,onExpressionClick:this.props.onExpressionClick})),a=(Fp().s[3]++,e[i+"."+t]);return Fp().s[4]++,ce.jsx(nce,{...this.props,error:a,fieldSpec:this.props.fieldSpec,label:F2((Fp().b[0][0]++,this.props.fieldName||(Fp().b[0][1]++,""))),action:r})}}function Nd(){var n="/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",e="e8906f642b33ab7d7a780fc0db870f7e4872d29c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",statementMap:{0:{start:{line:2,column:12},end:{line:2,column:17}},1:{start:{line:3,column:12},end:{line:3,column:17}},2:{start:{line:4,column:2},end:{line:10,column:3}},3:{start:{line:5,column:4},end:{line:5,column:14}},4:{start:{line:6,column:9},end:{line:10,column:3}},5:{start:{line:7,column:4},end:{line:7,column:13}},6:{start:{line:9,column:4},end:{line:9,column:13}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:15},end:{line:1,column:16}},loc:{start:{line:1,column:36},end:{line:11,column:1}},line:1}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:10,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:10,column:3}},{start:{line:6,column:9},end:{line:10,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:10,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:10,column:3}},{start:{line:8,column:9},end:{line:10,column:3}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts"],names:[],mappings:"AAAA,wBAAwB,MAAuB,MAAsB;AACnE,QAAM,IAAI,CAAC;AACX,QAAM,IAAI,CAAC;AAEX,MAAG,IAAI,GAAG;AACR,WAAO;AAAA,EACT,WACQ,IAAI,GAAG;AACb,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e8906f642b33ab7d7a780fc0db870f7e4872d29c"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Nd=function(){return l},l}Nd();function tj(n,e){Nd().f[0]++;const t=(Nd().s[0]++,+n),i=(Nd().s[1]++,+e);return Nd().s[2]++,t<i?(Nd().b[0][0]++,Nd().s[3]++,-1):(Nd().b[0][1]++,Nd().s[4]++,t>i?(Nd().b[1][0]++,Nd().s[5]++,1):(Nd().b[1][1]++,Nd().s[6]++,0))}function Ym(){var n="/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",e="2f98128f0f990b67a049c58486c1fab4310fbcfa",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",statementMap:{0:{start:{line:2,column:2},end:{line:4,column:3}},1:{start:{line:3,column:4},end:{line:3,column:24}},2:{start:{line:5,column:19},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:12,column:35}}},fnMap:{0:{name:"findDefaultFromSpec",decl:{start:{line:1,column:16},end:{line:1,column:35}},loc:{start:{line:1,column:42},end:{line:13,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:2},end:{line:4,column:3}},type:"if",locations:[{start:{line:2,column:2},end:{line:4,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:2},1:{loc:{start:{line:12,column:9},end:{line:12,column:34}},type:"binary-expr",locations:[{start:{line:12,column:9},end:{line:12,column:28}},{start:{line:12,column:32},end:{line:12,column:34}}],line:12}},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts"],names:[],mappings:"AAGO,gBAAS,oBAAoB,MAAyE;AAC3G,MAAI,OAAO,UAAU,eAAe,KAAK,MAAM,SAAS,GAAG;AACzD,WAAO,KAAK;AAAA,EACd;AAEA,QAAM,WAAW;AAAA,IACf,SAAS;AAAA,IACT,UAAU;AAAA,IACV,WAAW;AAAA,IACX,UAAU;AAAA,IACV,SAAS,CAAC;AAAA,EACZ;AAEA,SAAO,SAAS,KAAK,IAAI,KAAK;AAChC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f98128f0f990b67a049c58486c1fab4310fbcfa"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Ym=function(){return l},l}Ym();function um(n){if(Ym().f[0]++,Ym().s[0]++,Object.prototype.hasOwnProperty.call(n,"default"))return Ym().b[0][0]++,Ym().s[1]++,n.default;Ym().b[0][1]++;const e=(Ym().s[2]++,{color:"#000000",string:"",boolean:!1,number:0,array:[]});return Ym().s[3]++,Ym().b[1][0]++,e[n.type]||(Ym().b[1][1]++,"")}function Mv(){var n="/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",e="04a32613b456a577be3ef20dcd48d43233f27837",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:17,column:6}},2:{start:{line:20,column:25},end:{line:20,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:18,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAQjD,MAAM,iCAAiC,MAAM,UAAyC;AAAA,EACpF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,6BAA6B;AAAA,QAEtC,8BAAC,YAAS;AAAA;AAAA,IACZ;AAAA,EACF;AACF;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"04a32613b456a577be3ef20dcd48d43233f27837"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Mv=function(){return l},l}Mv();class ace extends ni.Component{render(){Mv().f[0]++;const e=(Mv().s[0]++,this.props.t);return Mv().s[1]++,ce.jsx(ml,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove zoom level from stop"),children:ce.jsx(Wv,{})})}}const nj=(Mv().s[2]++,ss()(ace));function gn(){var n="/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",e="97b6de35ac4a8f739cf06eabc39facf249622fab",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",statementMap:{0:{start:{line:19,column:2},end:{line:28,column:3}},1:{start:{line:20,column:4},end:{line:27,column:7}},2:{start:{line:21,column:6},end:{line:26,column:7}},3:{start:{line:22,column:8},end:{line:24,column:9}},4:{start:{line:23,column:10},end:{line:23,column:33}},5:{start:{line:25,column:8},end:{line:25,column:39}},6:{start:{line:29,column:2},end:{line:29,column:17}},7:{start:{line:32,column:10},end:{line:34,column:3}},8:{start:{line:36,column:20},end:{line:36,column:55}},9:{start:{line:37,column:4},end:{line:41,column:5}},10:{start:{line:38,column:6},end:{line:40,column:9}},11:{start:{line:44,column:20},end:{line:44,column:45}},12:{start:{line:45,column:4},end:{line:49,column:5}},13:{start:{line:46,column:6},end:{line:48,column:8}},14:{start:{line:50,column:4},end:{line:50,column:16}},15:{start:{line:53,column:4},end:{line:55,column:5}},16:{start:{line:54,column:6},end:{line:54,column:27}},17:{start:{line:56,column:4},end:{line:58,column:5}},18:{start:{line:57,column:6},end:{line:57,column:24}},19:{start:{line:59,column:4},end:{line:59,column:25}},20:{start:{line:62,column:4},end:{line:66,column:5}},21:{start:{line:63,column:6},end:{line:63,column:83}},22:{start:{line:65,column:6},end:{line:65,column:53}},23:{start:{line:70,column:26},end:{line:75,column:70}},24:{start:{line:71,column:6},end:{line:74,column:8}},25:{start:{line:75,column:22},end:{line:75,column:69}},26:{start:{line:76,column:20},end:{line:76,column:22}},27:{start:{line:77,column:4},end:{line:79,column:7}},28:{start:{line:78,column:6},end:{line:78,column:30}},29:{start:{line:80,column:4},end:{line:82,column:7}},30:{start:{line:83,column:4},end:{line:83,column:50}},31:{start:{line:83,column:39},end:{line:83,column:48}},32:{start:{line:85,column:13},end:{line:105,column:3}},33:{start:{line:86,column:4},end:{line:103,column:5}},34:{start:{line:87,column:6},end:{line:90,column:8}},35:{start:{line:92,column:24},end:{line:92,column:61}},36:{start:{line:93,column:6},end:{line:102,column:8}},37:{start:{line:104,column:4},end:{line:104,column:42}},38:{start:{line:107,column:18},end:{line:107,column:56}},39:{start:{line:108,column:4},end:{line:114,column:6}},40:{start:{line:115,column:25},end:{line:115,column:53}},41:{start:{line:116,column:25},end:{line:119,column:5}},42:{start:{line:120,column:4},end:{line:120,column:54}},43:{start:{line:123,column:25},end:{line:126,column:5}},44:{start:{line:127,column:4},end:{line:129,column:5}},45:{start:{line:128,column:6},end:{line:128,column:34}},46:{start:{line:130,column:4},end:{line:130,column:60}},47:{start:{line:133,column:4},end:{line:140,column:5}},48:{start:{line:134,column:6},end:{line:134,column:42}},49:{start:{line:136,column:6},end:{line:139,column:9}},50:{start:{line:143,column:4},end:{line:147,column:5}},51:{start:{line:144,column:6},end:{line:144,column:43}},52:{start:{line:146,column:6},end:{line:146,column:40}},53:{start:{line:148,column:4},end:{line:148,column:58}},54:{start:{line:151,column:14},end:{line:151,column:26}},55:{start:{line:152,column:4},end:{line:154,column:5}},56:{start:{line:153,column:6},end:{line:153,column:78}},57:{start:{line:156,column:4},end:{line:204,column:5}},58:{start:{line:157,column:6},end:{line:203,column:9}},59:{start:{line:158,column:26},end:{line:158,column:77}},60:{start:{line:159,column:20},end:{line:159,column:40}},61:{start:{line:160,column:26},end:{line:160,column:79}},62:{start:{line:161,column:22},end:{line:161,column:29}},63:{start:{line:162,column:46},end:{line:162,column:122}},64:{start:{line:163,column:26},end:{line:168,column:9}},65:{start:{line:167,column:33},end:{line:167,column:97}},66:{start:{line:170,column:8},end:{line:174,column:9}},67:{start:{line:171,column:10},end:{line:171,column:73}},68:{start:{line:173,column:10},end:{line:173,column:73}},69:{start:{line:175,column:24},end:{line:175,column:28}},70:{start:{line:176,column:8},end:{line:187,column:9}},71:{start:{line:177,column:10},end:{line:186,column:15}},72:{start:{line:182,column:37},end:{line:182,column:101}},73:{start:{line:188,column:8},end:{line:202,column:18}},74:{start:{line:198,column:41},end:{line:198,column:110}},75:{start:{line:205,column:4},end:{line:307,column:12}},76:{start:{line:216,column:39},end:{line:216,column:67}},77:{start:{line:234,column:43},end:{line:234,column:68}},78:{start:{line:249,column:39},end:{line:249,column:83}},79:{start:{line:265,column:42},end:{line:265,column:85}},80:{start:{line:310,column:21},end:{line:310,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:17,column:9},end:{line:17,column:20}},loc:{start:{line:17,column:35},end:{line:30,column:1}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:20,column:30},end:{line:20,column:31}},loc:{start:{line:20,column:45},end:{line:27,column:5}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:22},end:{line:42,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:48},end:{line:51,column:3}},line:43},4:{name:"(anonymous_4)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:34},end:{line:60,column:3}},line:52},5:{name:"(anonymous_5)",decl:{start:{line:61,column:2},end:{line:61,column:3}},loc:{start:{line:61,column:34},end:{line:67,column:3}},line:61},6:{name:"(anonymous_6)",decl:{start:{line:69,column:2},end:{line:69,column:3}},loc:{start:{line:69,column:26},end:{line:84,column:3}},line:69},7:{name:"(anonymous_7)",decl:{start:{line:70,column:36},end:{line:70,column:37}},loc:{start:{line:70,column:51},end:{line:75,column:5}},line:70},8:{name:"(anonymous_8)",decl:{start:{line:75,column:12},end:{line:75,column:13}},loc:{start:{line:75,column:22},end:{line:75,column:69}},line:75},9:{name:"(anonymous_9)",decl:{start:{line:77,column:26},end:{line:77,column:27}},loc:{start:{line:77,column:41},end:{line:79,column:5}},line:77},10:{name:"(anonymous_10)",decl:{start:{line:83,column:29},end:{line:83,column:30}},loc:{start:{line:83,column:39},end:{line:83,column:48}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:85,column:13},end:{line:85,column:14}},loc:{start:{line:85,column:35},end:{line:105,column:3}},line:85},12:{name:"(anonymous_12)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:41},end:{line:121,column:3}},line:106},13:{name:"(anonymous_13)",decl:{start:{line:122,column:2},end:{line:122,column:3}},loc:{start:{line:122,column:23},end:{line:131,column:3}},line:122},14:{name:"(anonymous_14)",decl:{start:{line:132,column:2},end:{line:132,column:3}},loc:{start:{line:132,column:26},end:{line:141,column:3}},line:132},15:{name:"(anonymous_15)",decl:{start:{line:142,column:2},end:{line:142,column:3}},loc:{start:{line:142,column:40},end:{line:149,column:3}},line:142},16:{name:"(anonymous_16)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:308,column:3}},line:150},17:{name:"(anonymous_17)",decl:{start:{line:157,column:46},end:{line:157,column:47}},loc:{start:{line:157,column:61},end:{line:203,column:7}},line:157},18:{name:"(anonymous_18)",decl:{start:{line:167,column:20},end:{line:167,column:21}},loc:{start:{line:167,column:33},end:{line:167,column:97}},line:167},19:{name:"(anonymous_19)",decl:{start:{line:182,column:24},end:{line:182,column:25}},loc:{start:{line:182,column:37},end:{line:182,column:101}},line:182},20:{name:"(anonymous_20)",decl:{start:{line:198,column:24},end:{line:198,column:25}},loc:{start:{line:198,column:41},end:{line:198,column:110}},line:198},21:{name:"(anonymous_21)",decl:{start:{line:216,column:26},end:{line:216,column:27}},loc:{start:{line:216,column:39},end:{line:216,column:67}},line:216},22:{name:"(anonymous_22)",decl:{start:{line:234,column:26},end:{line:234,column:27}},loc:{start:{line:234,column:43},end:{line:234,column:68}},line:234},23:{name:"(anonymous_23)",decl:{start:{line:249,column:26},end:{line:249,column:27}},loc:{start:{line:249,column:39},end:{line:249,column:83}},line:249},24:{name:"(anonymous_24)",decl:{start:{line:265,column:26},end:{line:265,column:27}},loc:{start:{line:265,column:42},end:{line:265,column:85}},line:265}},branchMap:{0:{loc:{start:{line:19,column:2},end:{line:28,column:3}},type:"if",locations:[{start:{line:19,column:2},end:{line:28,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:6},end:{line:19,column:38}},type:"binary-expr",locations:[{start:{line:19,column:6},end:{line:19,column:17}},{start:{line:19,column:21},end:{line:19,column:38}}],line:19},2:{loc:{start:{line:21,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:21,column:6},end:{line:26,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},3:{loc:{start:{line:22,column:8},end:{line:24,column:9}},type:"if",locations:[{start:{line:22,column:8},end:{line:24,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},4:{loc:{start:{line:37,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:45,column:4},end:{line:49,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:49,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},6:{loc:{start:{line:53,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:53,column:4},end:{line:55,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},7:{loc:{start:{line:56,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:56,column:4},end:{line:58,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},8:{loc:{start:{line:62,column:4},end:{line:66,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:66,column:5}},{start:{line:64,column:11},end:{line:66,column:5}}],line:62},9:{loc:{start:{line:86,column:4},end:{line:103,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:103,column:5}},{start:{line:91,column:11},end:{line:103,column:5}}],line:86},10:{loc:{start:{line:92,column:24},end:{line:92,column:61}},type:"cond-expr",locations:[{start:{line:92,column:55},end:{line:92,column:57}},{start:{line:92,column:60},end:{line:92,column:61}}],line:92},11:{loc:{start:{line:107,column:18},end:{line:107,column:56}},type:"binary-expr",locations:[{start:{line:107,column:18},end:{line:107,column:50}},{start:{line:107,column:54},end:{line:107,column:56}}],line:107},12:{loc:{start:{line:111,column:14},end:{line:111,column:58}},type:"cond-expr",locations:[{start:{line:111,column:41},end:{line:111,column:42}},{start:{line:111,column:45},end:{line:111,column:58}}],line:111},13:{loc:{start:{line:127,column:4},end:{line:129,column:5}},type:"if",locations:[{start:{line:127,column:4},end:{line:129,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:127},14:{loc:{start:{line:133,column:4},end:{line:140,column:5}},type:"if",locations:[{start:{line:133,column:4},end:{line:140,column:5}},{start:{line:135,column:11},end:{line:140,column:5}}],line:133},15:{loc:{start:{line:133,column:8},end:{line:133,column:70}},type:"binary-expr",locations:[{start:{line:133,column:8},end:{line:133,column:33}},{start:{line:133,column:37},end:{line:133,column:70}}],line:133},16:{loc:{start:{line:143,column:4},end:{line:147,column:5}},type:"if",locations:[{start:{line:143,column:4},end:{line:147,column:5}},{start:{line:145,column:11},end:{line:147,column:5}}],line:143},17:{loc:{start:{line:152,column:4},end:{line:154,column:5}},type:"if",locations:[{start:{line:152,column:4},end:{line:154,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:152},18:{loc:{start:{line:156,column:4},end:{line:204,column:5}},type:"if",locations:[{start:{line:156,column:4},end:{line:204,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:156},19:{loc:{start:{line:158,column:26},end:{line:158,column:77}},type:"cond-expr",locations:[{start:{line:158,column:56},end:{line:158,column:68}},{start:{line:158,column:71},end:{line:158,column:77}}],line:158},20:{loc:{start:{line:160,column:26},end:{line:160,column:79}},type:"cond-expr",locations:[{start:{line:160,column:56},end:{line:160,column:69}},{start:{line:160,column:72},end:{line:160,column:79}}],line:160},21:{loc:{start:{line:170,column:8},end:{line:174,column:9}},type:"if",locations:[{start:{line:170,column:8},end:{line:174,column:9}},{start:{line:172,column:15},end:{line:174,column:9}}],line:170},22:{loc:{start:{line:176,column:8},end:{line:187,column:9}},type:"if",locations:[{start:{line:176,column:8},end:{line:187,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:176},23:{loc:{start:{line:224,column:8},end:{line:239,column:9}},type:"binary-expr",locations:[{start:{line:224,column:8},end:{line:224,column:45}},{start:{line:224,column:65},end:{line:239,column:9}}],line:224},24:{loc:{start:{line:255,column:8},end:{line:270,column:9}},type:"binary-expr",locations:[{start:{line:255,column:8},end:{line:255,column:18}},{start:{line:255,column:38},end:{line:270,column:9}}],line:255},25:{loc:{start:{line:271,column:8},end:{line:279,column:15}},type:"binary-expr",locations:[{start:{line:271,column:8},end:{line:271,column:18}},{start:{line:271,column:38},end:{line:279,column:15}}],line:271},26:{loc:{start:{line:281,column:10},end:{line:292,column:11}},type:"binary-expr",locations:[{start:{line:281,column:10},end:{line:281,column:20}},{start:{line:281,column:40},end:{line:292,column:11}}],line:281}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx"],names:[],mappings:"AAqO8B,cA8Bf,YA9Be;AArO9B,OAAO,WAAW;AAClB,SAAQ,oBAAoB,4BAA2B;AACvD,OAAO,YAAY;AAEnB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAC5B,SAAQ,2BAA0B;AAClC,SAA0B,uBAAuB;AAEjD,OAAO,wBAAwB;AAC/B,OAAO,sBAAsB;AAI7B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI;AAEJ,MAAG,MAAM,SAAS,MAAM,MAAM,OAAO;AACnC,UAAM,MAAM,MAAM,QAAQ,CAAC,MAAM,QAAQ;AACvC,UAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAgCA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,eAAe,YAAY,UAAU;AAAA,IAC/C;AAAA,EACF;AAAA;AAAA,EAGA,iBAAiB,OAAe;AAC9B,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,EAAE,IAAI,CAAC;AAGjE,UAAM,UAAU,CAAC;AACjB,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,WAAW,CAAC,WAAmB,UAAe;AAC5C,QAAI,MAAM,SAAS,YAAY;AAC7B,cAAQ;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,UAAU,MAAM;AAAA,MAClB;AAAA,IACF,OACK;AACH,YAAM,YAAY,MAAM,SAAS,gBAAgB,KAAK;AACtD,cAAQ;AAAA,QACN,UAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,QAEZ,OAAO;AAAA,UACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,UAC9E,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,QACjF;AAAA,QACA,GAAG;AAAA,MACL;AAAA,IACF;AACA,SAAK,MAAM,SAAU,WAAW,KAAK;AAAA,EACvC;AAAA,EAEA,WAAW,WAAmB,UAAuD,OAAe;AAClG,UAAM,QAAQ,KAAK,MAAM,OAAO,MAAM,MAAM,CAAC,KAAK,CAAC;AAEnD,UAAM,SAAS,IAAI;AAAA,MACjB;AAAA,QACE,OAAO,SAAS;AAAA,QAChB,MAAO,SAAS,SAAS,SAAa,IAAI,SAAS;AAAA,MACrD;AAAA,MACA;AAAA,IACF;AAEA,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EAClD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,eAAe,SAAiB;AAC9B,QAAI,YAAY,iBAAiB,KAAK,MAAM,wBAAwB;AAClE,WAAK,MAAM,uBAAuB;AAAA,IACpC,OACK;AACH,WAAK,SAAS,KAAK,MAAM,WAAW;AAAA,QAClC,GAAG,KAAK,MAAM;AAAA,QACd,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,UAAkC,SAAc;AACjE,QAAI,SAAS;AACX,WAAK,MAAM,MAAO,QAAQ,IAAI;AAAA,IAChC,OACK;AACH,aAAO,KAAK,MAAM,MAAO,QAAQ;AAAA,IACnC;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,KAAK,MAAM,KAAK;AAAA,EACtD;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,QAAI,OAAO,KAAK,MAAM,OAAO,SAAS,aAAa;AACjD,WAAK,MAAM,MAAO,OAAO,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA,IACzE;AAEA,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO,OAAO;AAC3B,mBAAa,KAAK,MAAM,MAAM,MAAM,IAAI,CAAC,MAAM,QAAQ;AACrD,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,OAAO;AAC/D,cAAM,MAAO,KAAK,MAAM,KAAK,GAAG;AAChC,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,QAAQ,KAAK,CAAC;AACtE,cAAM,QAAQ,KAAK,CAAC;AACpB,cAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAE3F,cAAM,YAAY;AAAA,UAChB,cAAc,EAAE,aAAa;AAAA,UAC7B,OAAO,EAAE,YAAY;AAAA,UACrB,OAAO;AAAA,UACP,UAAU,CAAC,YAAyC,KAAK,WAAW,KAAK,EAAE,MAAM,WAAW,OAAO,QAAkB,GAAG,KAAK;AAAA,QAC/H;AAEA,YAAI;AACJ,YAAG,KAAK,MAAM,OAAO,SAAS,eAAe;AAC3C,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C,OACK;AACH,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C;AAEA,YAAI,YAAY;AAChB,YAAG,cAAc,QAAW;AAC1B,sBAAY,oBAAC,SACX;AAAA,YAAC;AAAA;AAAA,cACC,cAAW;AAAA,cACX,OAAO;AAAA,cACP,UAAU,aAAW,KAAK,WAAW,KAAK,EAAC,MAAM,SAAS,OAAO,UAAS,GAAG,KAAK;AAAA,cAClF,KAAK;AAAA,cACL,KAAK;AAAA;AAAA,UACP,GACF;AAAA,QACF;AAEA,eAAO,qBAAC,QACN;AAAA,8BAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACC;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,EAAE,cAAc;AAAA,cAC5B,WAAW,KAAK,MAAM;AAAA,cACtB,WAAW,KAAK,MAAM;AAAA,cACtB;AAAA,cACA,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,KAAK,EAAC,MAAM,WAAW,OAAO,UAAS,GAAG,QAAkB;AAAA;AAAA,UACzG,GACF;AAAA,UACA,oBAAC,QACE,yBACH;AAAA,aAlBc,GAmBhB;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAGnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,MAAO;AAAA,gBACzB,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA;AAAA,YACzD,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QACC,KAAK,MAAM,OAAO,SAAS,cAC1B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAGf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAAkB;AAAA;AAAA,YAC/D,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QAEF;AAAA,UAAC;AAAA;AAAA,YACC,OAAO;AAAA,YAGP,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,OAAO,EAAE,8CAA8C;AAAA,gBACvD,UAAU,aAAW,KAAK,mBAAmB,YAAY,OAAO;AAAA;AAAA,YAClE,GACF;AAAA;AAAA,UARI;AAAA,QASN;AAAA,QACC,cACC;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,SAAS;AAAA,YAGlB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,YAAY,KAAK,mBAAmB,WAAW,OAAO;AAAA;AAAA,YACtE;AAAA;AAAA,UAPI;AAAA,QAQN;AAAA,QAED,cACC,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,gCACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAI,YAAE,aAAa,GAAE;AAAA,YACtB,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QAEF,qBAAC,SAAI,WAAU,oBACZ;AAAA,wBACC;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,gBAAM;AAAA,gBAAE,EAAE,UAAU;AAAA;AAAA;AAAA,UACtB;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,gBAAM;AAAA,gBAAE,EAAE,uBAAuB;AAAA;AAAA;AAAA,UACnC;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"97b6de35ac4a8f739cf06eabc39facf249622fab"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return gn=function(){return l},l}gn();function hK(n,e){gn().f[0]++;let t;return gn().s[0]++,gn().b[1][0]++,n.value&&(gn().b[1][1]++,n.value.stops)?(gn().b[0][0]++,gn().s[1]++,n.value.stops.forEach((i,r)=>{gn().f[1]++,gn().s[2]++,Object.prototype.hasOwnProperty.call(e.refs,r)?gn().b[2][1]++:(gn().b[2][0]++,gn().s[3]++,t?gn().b[3][1]++:(gn().b[3][0]++,gn().s[4]++,t={...e}),gn().s[5]++,t[r]=Lv("stop-"))})):gn().b[0][1]++,gn().s[6]++,t}class sce extends ni.Component{state=(gn().s[7]++,{refs:{}});componentDidMount(){gn().f[2]++;const e=(gn().s[8]++,hK(this.props,this.state));gn().s[9]++,e?(gn().b[4][0]++,gn().s[10]++,this.setState({refs:e})):gn().b[4][1]++}static getDerivedStateFromProps(e,t){gn().f[3]++;const i=(gn().s[11]++,hK(e,t));return gn().s[12]++,i?(gn().b[5][0]++,gn().s[13]++,{refs:i}):(gn().b[5][1]++,gn().s[14]++,null)}getFieldFunctionType(e){return gn().f[4]++,gn().s[15]++,e.expression.interpolated?(gn().b[6][0]++,gn().s[16]++,"exponential"):(gn().b[6][1]++,gn().s[17]++,e.type==="number"?(gn().b[7][0]++,gn().s[18]++,"interval"):(gn().b[7][1]++,gn().s[19]++,"categorical"))}getDataFunctionTypes(e){return gn().f[5]++,gn().s[20]++,e.expression.interpolated?(gn().b[8][0]++,gn().s[21]++,["interpolate","categorical","interval","exponential","identity"]):(gn().b[8][1]++,gn().s[22]++,["categorical","interval","identity"])}orderStopsByZoom(e){gn().f[6]++;const t=(gn().s[23]++,e.map((r,a)=>(gn().f[7]++,gn().s[24]++,{ref:this.state.refs[a],data:r})).sort((r,a)=>(gn().f[8]++,gn().s[25]++,tj(r.data[0].zoom,a.data[0].zoom)))),i=(gn().s[26]++,{});return gn().s[27]++,t.forEach((r,a)=>{gn().f[9]++,gn().s[28]++,i[a]=r.ref}),gn().s[29]++,this.setState({refs:i}),gn().s[30]++,t.map(r=>(gn().f[10]++,gn().s[31]++,r.data))}onChange=(gn().s[32]++,(e,t)=>{if(gn().f[11]++,gn().s[33]++,t.type==="identity")gn().b[9][0]++,gn().s[34]++,t={type:t.type,property:t.property};else{gn().b[9][1]++;const i=(gn().s[35]++,t.type==="categorical"?(gn().b[10][0]++,""):(gn().b[10][1]++,0));gn().s[36]++,t={property:"",type:t.type,stops:[[{zoom:6,value:i},um(this.props.fieldSpec)],[{zoom:10,value:i},um(this.props.fieldSpec)]],...t}}gn().s[37]++,this.props.onChange(e,t)});changeStop(e,t,i){gn().f[12]++;const r=(gn().s[38]++,gn().b[11][0]++,this.props.value?.stops.slice(0)||(gn().b[11][1]++,[]));gn().s[39]++,r[e]=[{value:t.value,zoom:t.zoom===void 0?(gn().b[12][0]++,0):(gn().b[12][1]++,t.zoom)},i];const a=(gn().s[40]++,this.orderStopsByZoom(r)),l=(gn().s[41]++,{...this.props.value,stops:a});gn().s[42]++,this.onChange(this.props.fieldName,l)}changeBase(e){gn().f[13]++;const t=(gn().s[43]++,{...this.props.value,base:e});gn().s[44]++,t.base===void 0?(gn().b[13][0]++,gn().s[45]++,delete t.base):gn().b[13][1]++,gn().s[46]++,this.props.onChange(this.props.fieldName,t)}changeDataType(e){gn().f[14]++,gn().s[47]++,gn().b[15][0]++,e==="interpolate"&&(gn().b[15][1]++,this.props.onChangeToZoomFunction)?(gn().b[14][0]++,gn().s[48]++,this.props.onChangeToZoomFunction()):(gn().b[14][1]++,gn().s[49]++,this.onChange(this.props.fieldName,{...this.props.value,type:e}))}changeDataProperty(e,t){gn().f[15]++,gn().s[50]++,t?(gn().b[16][0]++,gn().s[51]++,this.props.value[e]=t):(gn().b[16][1]++,gn().s[52]++,delete this.props.value[e]),gn().s[53]++,this.onChange(this.props.fieldName,this.props.value)}render(){gn().f[16]++;const e=(gn().s[54]++,this.props.t);gn().s[55]++,typeof this.props.value?.type>"u"?(gn().b[17][0]++,gn().s[56]++,this.props.value.type=this.getFieldFunctionType(this.props.fieldSpec)):gn().b[17][1]++;let t;return gn().s[57]++,this.props.value?.stops?(gn().b[18][0]++,gn().s[58]++,t=this.props.value.stops.map((i,r)=>{gn().f[17]++;const a=(gn().s[59]++,typeof i[0]=="object"?(gn().b[19][0]++,i[0].zoom):(gn().b[19][1]++,void 0)),l=(gn().s[60]++,this.state.refs[r]),o=(gn().s[61]++,typeof i[0]=="object"?(gn().b[20][0]++,i[0].value):(gn().b[20][1]++,i[0])),m=(gn().s[62]++,i[1]),C=(gn().s[63]++,ce.jsx(nj,{onClick:this.props.onDeleteStop?.bind(this,r)})),S=(gn().s[64]++,{"aria-label":e("Input value"),label:e("Data value"),value:o,onChange:K=>(gn().f[18]++,gn().s[65]++,this.changeStop(r,{zoom:a,value:K},m))});let O;gn().s[66]++,this.props.value?.type==="categorical"?(gn().b[21][0]++,gn().s[67]++,O=ce.jsx(ap,{...S})):(gn().b[21][1]++,gn().s[68]++,O=ce.jsx(z0,{...S}));let U=(gn().s[69]++,null);return gn().s[70]++,a!==void 0?(gn().b[22][0]++,gn().s[71]++,U=ce.jsx("div",{children:ce.jsx(z0,{"aria-label":"Zoom",value:a,onChange:K=>(gn().f[19]++,gn().s[72]++,this.changeStop(r,{zoom:K,value:o},m)),min:0,max:22})})):gn().b[22][1]++,gn().s[73]++,ce.jsxs("tr",{children:[ce.jsx("td",{children:U}),ce.jsx("td",{children:O}),ce.jsx("td",{children:ce.jsx(xv,{"aria-label":e("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:m,onChange:(K,z)=>(gn().f[20]++,gn().s[74]++,this.changeStop(r,{zoom:a,value:o},z))})}),ce.jsx("td",{children:C})]},l)})):gn().b[18][1]++,gn().s[75]++,ce.jsx("div",{className:"maputnik-data-spec-block",children:ce.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[ce.jsx("legend",{children:F2(this.props.fieldName)}),ce.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[ce.jsx(Ks,{label:e("Function"),children:ce.jsx("div",{className:"maputnik-data-spec-property-input",children:ce.jsx(ey,{value:this.props.value.type,onChange:i=>(gn().f[21]++,gn().s[76]++,this.changeDataType(i)),title:e("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})},"function"),(gn().b[23][0]++,this.props.value?.type!=="identity"&&(gn().b[23][1]++,ce.jsx(Ks,{label:e("Base"),children:ce.jsx("div",{className:"maputnik-data-spec-property-input",children:ce.jsx(xv,{fieldName:"base",fieldSpec:da.function.base,value:this.props.value?.base,onChange:(i,r)=>(gn().f[22]++,gn().s[77]++,this.changeBase(r))})})},"base"))),ce.jsx(Ks,{label:"Property",children:ce.jsx("div",{className:"maputnik-data-spec-property-input",children:ce.jsx(ap,{value:this.props.value?.property,title:e("Input a data property to base styles off of."),onChange:i=>(gn().f[23]++,gn().s[78]++,this.changeDataProperty("property",i))})})},"property"),(gn().b[24][0]++,t&&(gn().b[24][1]++,ce.jsx(Ks,{label:e("Default"),children:ce.jsx(xv,{fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value?.default,onChange:(i,r)=>(gn().f[24]++,gn().s[79]++,this.changeDataProperty("default",r))})},"default"))),(gn().b[25][0]++,t&&(gn().b[25][1]++,ce.jsx("div",{className:"maputnik-function-stop",children:ce.jsxs("table",{className:"maputnik-function-stop-table",children:[ce.jsx("caption",{children:e("Stops")}),ce.jsx("thead",{children:ce.jsxs("tr",{children:[ce.jsx("th",{children:e("Zoom")}),ce.jsx("th",{children:e("Input value")}),ce.jsx("th",{rowSpan:2,children:e("Output value")})]})}),ce.jsx("tbody",{children:t})]})}))),ce.jsxs("div",{className:"maputnik-toolbox",children:[(gn().b[26][0]++,t&&(gn().b[26][1]++,ce.jsxs(ml,{className:"maputnik-add-stop",onClick:this.props.onAddStop?.bind(this),children:[ce.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:ce.jsx("path",{fill:"currentColor",d:k8})})," ",e("Add stop")]}))),ce.jsxs(ml,{className:"maputnik-add-stop",onClick:this.props.onExpressionClick?.bind(this),children:[ce.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:ce.jsx("path",{fill:"currentColor",d:N_})})," ",e("Convert to expression")]})]})]})]})})}}const lce=(gn().s[80]++,ss()(sce));function vi(){var n="/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",e="6a4c93b52ca21ec4b555a0d2906ee27fc49f34f8",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",statementMap:{0:{start:{line:16,column:16},end:{line:16,column:18}},1:{start:{line:17,column:2},end:{line:28,column:3}},2:{start:{line:18,column:4},end:{line:27,column:7}},3:{start:{line:19,column:6},end:{line:26,column:7}},4:{start:{line:20,column:8},end:{line:22,column:9}},5:{start:{line:21,column:10},end:{line:21,column:33}},6:{start:{line:23,column:8},end:{line:23,column:39}},7:{start:{line:25,column:8},end:{line:25,column:39}},8:{start:{line:29,column:2},end:{line:29,column:17}},9:{start:{line:32,column:24},end:{line:34,column:3}},10:{start:{line:35,column:10},end:{line:37,column:3}},11:{start:{line:39,column:20},end:{line:39,column:55}},12:{start:{line:40,column:4},end:{line:44,column:5}},13:{start:{line:41,column:6},end:{line:43,column:9}},14:{start:{line:47,column:20},end:{line:47,column:45}},15:{start:{line:48,column:4},end:{line:52,column:5}},16:{start:{line:49,column:6},end:{line:51,column:8}},17:{start:{line:53,column:4},end:{line:53,column:16}},18:{start:{line:57,column:26},end:{line:62,column:60}},19:{start:{line:58,column:6},end:{line:61,column:8}},20:{start:{line:62,column:22},end:{line:62,column:59}},21:{start:{line:63,column:20},end:{line:63,column:22}},22:{start:{line:64,column:4},end:{line:66,column:7}},23:{start:{line:65,column:6},end:{line:65,column:30}},24:{start:{line:67,column:4},end:{line:69,column:7}},25:{start:{line:70,column:4},end:{line:70,column:50}},26:{start:{line:70,column:39},end:{line:70,column:48}},27:{start:{line:73,column:18},end:{line:73,column:49}},28:{start:{line:74,column:4},end:{line:74,column:41}},29:{start:{line:75,column:25},end:{line:75,column:53}},30:{start:{line:76,column:25},end:{line:79,column:5}},31:{start:{line:80,column:4},end:{line:80,column:60}},32:{start:{line:83,column:25},end:{line:86,column:5}},33:{start:{line:87,column:4},end:{line:89,column:5}},34:{start:{line:88,column:6},end:{line:88,column:34}},35:{start:{line:90,column:4},end:{line:90,column:60}},36:{start:{line:92,column:19},end:{line:96,column:3}},37:{start:{line:93,column:4},end:{line:95,column:5}},38:{start:{line:94,column:6},end:{line:94,column:46}},39:{start:{line:98,column:14},end:{line:98,column:26}},40:{start:{line:99,column:23},end:{line:132,column:6}},41:{start:{line:100,column:24},end:{line:100,column:31}},42:{start:{line:101,column:20},end:{line:101,column:27}},43:{start:{line:102,column:44},end:{line:102,column:120}},44:{start:{line:103,column:6},end:{line:131,column:8}},45:{start:{line:112,column:43},end:{line:112,column:87}},46:{start:{line:124,column:43},end:{line:124,column:88}},47:{start:{line:133,column:4},end:{line:201,column:12}},48:{start:{line:144,column:39},end:{line:144,column:67}},49:{start:{line:161,column:43},end:{line:161,column:68}},50:{start:{line:204,column:4},end:{line:208,column:5}},51:{start:{line:205,column:6},end:{line:205,column:83}},52:{start:{line:207,column:6},end:{line:207,column:29}},53:{start:{line:211,column:21},end:{line:211,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:35},end:{line:30,column:1}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:18,column:30},end:{line:18,column:31}},loc:{start:{line:18,column:45},end:{line:27,column:5}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:38,column:2},end:{line:38,column:3}},loc:{start:{line:38,column:22},end:{line:45,column:3}},line:38},3:{name:"(anonymous_3)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:48},end:{line:54,column:3}},line:46},4:{name:"(anonymous_4)",decl:{start:{line:56,column:2},end:{line:56,column:3}},loc:{start:{line:56,column:26},end:{line:71,column:3}},line:56},5:{name:"(anonymous_5)",decl:{start:{line:57,column:36},end:{line:57,column:37}},loc:{start:{line:57,column:51},end:{line:62,column:5}},line:57},6:{name:"(anonymous_6)",decl:{start:{line:62,column:12},end:{line:62,column:13}},loc:{start:{line:62,column:22},end:{line:62,column:59}},line:62},7:{name:"(anonymous_7)",decl:{start:{line:64,column:26},end:{line:64,column:27}},loc:{start:{line:64,column:41},end:{line:66,column:5}},line:64},8:{name:"(anonymous_8)",decl:{start:{line:70,column:29},end:{line:70,column:30}},loc:{start:{line:70,column:39},end:{line:70,column:48}},line:70},9:{name:"(anonymous_9)",decl:{start:{line:72,column:2},end:{line:72,column:3}},loc:{start:{line:72,column:45},end:{line:81,column:3}},line:72},10:{name:"(anonymous_10)",decl:{start:{line:82,column:2},end:{line:82,column:3}},loc:{start:{line:82,column:23},end:{line:91,column:3}},line:82},11:{name:"(anonymous_11)",decl:{start:{line:92,column:19},end:{line:92,column:20}},loc:{start:{line:92,column:29},end:{line:96,column:3}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:11},end:{line:202,column:3}},line:97},13:{name:"(anonymous_13)",decl:{start:{line:99,column:51},end:{line:99,column:52}},loc:{start:{line:99,column:66},end:{line:132,column:5}},line:99},14:{name:"(anonymous_14)",decl:{start:{line:112,column:26},end:{line:112,column:27}},loc:{start:{line:112,column:43},end:{line:112,column:87}},line:112},15:{name:"(anonymous_15)",decl:{start:{line:124,column:26},end:{line:124,column:27}},loc:{start:{line:124,column:43},end:{line:124,column:88}},line:124},16:{name:"(anonymous_16)",decl:{start:{line:144,column:26},end:{line:144,column:27}},loc:{start:{line:144,column:39},end:{line:144,column:67}},line:144},17:{name:"(anonymous_17)",decl:{start:{line:161,column:26},end:{line:161,column:27}},loc:{start:{line:161,column:43},end:{line:161,column:68}},line:161},18:{name:"(anonymous_18)",decl:{start:{line:203,column:2},end:{line:203,column:3}},loc:{start:{line:203,column:34},end:{line:209,column:3}},line:203}},branchMap:{0:{loc:{start:{line:17,column:2},end:{line:28,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:28,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:17,column:6},end:{line:17,column:38}},type:"binary-expr",locations:[{start:{line:17,column:6},end:{line:17,column:17}},{start:{line:17,column:21},end:{line:17,column:38}}],line:17},2:{loc:{start:{line:19,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:26,column:7}},{start:{line:24,column:13},end:{line:26,column:7}}],line:19},3:{loc:{start:{line:20,column:8},end:{line:22,column:9}},type:"if",locations:[{start:{line:20,column:8},end:{line:22,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},4:{loc:{start:{line:40,column:4},end:{line:44,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:44,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:40},5:{loc:{start:{line:48,column:4},end:{line:52,column:5}},type:"if",locations:[{start:{line:48,column:4},end:{line:52,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},6:{loc:{start:{line:87,column:4},end:{line:89,column:5}},type:"if",locations:[{start:{line:87,column:4},end:{line:89,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:87},7:{loc:{start:{line:93,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:93,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},8:{loc:{start:{line:93,column:8},end:{line:93,column:67}},type:"binary-expr",locations:[{start:{line:93,column:8},end:{line:93,column:30}},{start:{line:93,column:34},end:{line:93,column:67}}],line:93},9:{loc:{start:{line:204,column:4},end:{line:208,column:5}},type:"if",locations:[{start:{line:204,column:4},end:{line:208,column:5}},{start:{line:206,column:11},end:{line:208,column:5}}],line:204}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx"],names:[],mappings:"AA+J4B,cACf,YADe;AA/J5B,OAAO,WAAW;AAClB,SAAQ,oBAAoB,4BAA2B;AACvD,OAAO,YAAY;AACnB,SAA0B,uBAAuB;AAEjD,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAElB,OAAO,sBAAsB;AAC7B,OAAO,wBAAwB;AAE/B,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAQ5B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI,UAAmC,CAAC;AAExC,MAAG,MAAM,SAAU,MAAM,MAAwB,OAAO;AACtD,IAAC,MAAM,MAAwB,MAAM,QAAQ,CAAC,MAAM,QAAgB;AAClE,UAAG,OAAO,UAAU,eAAe,KAAK,CAAC,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B,OAAO;AACL,gBAAQ,GAAG,IAAI,MAAM,KAAK,GAAG;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AACA,SAAO;AACT;AA4BA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA;AAAA,EAGA,iBAAiB,OAA+B;AAC9C,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,GAAI,EAAE,KAAK,CAAC,CAAE,CAAC;AAGzD,UAAM,UAAkC,CAAC;AACzC,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,eAAe,WAAmB,UAA8B,OAAe;AAC7E,UAAM,QAAS,KAAK,MAAM,MAAwB,MAAM,MAAM,CAAC;AAC/D,UAAM,SAAS,IAAI,CAAC,UAAU,KAAK;AAEnC,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,iBAAiB,CAAC,SAAiB;AACjC,QAAI,SAAS,iBAAiB,KAAK,MAAM,wBAAwB;AAC/D,WAAK,MAAM,uBAAuB,IAAI;AAAA,IACxC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,aAAa,KAAK,MAAM,OAAO,MAAM,IAAI,CAAC,MAAM,QAAQ;AAC5D,YAAM,YAAY,KAAK,CAAC;AACxB,YAAM,QAAQ,KAAK,CAAC;AACpB,YAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAC3F,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,gCAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,MAAM;AAAA,gBACpB,OAAO;AAAA,gBACP,UAAU,iBAAe,KAAK,eAAe,KAAK,aAAa,KAAK;AAAA,gBACpE,KAAK;AAAA,gBACL,KAAK;AAAA;AAAA,YACP,GACF;AAAA,YACA,oBAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,cAAc;AAAA,gBAC5B,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB;AAAA,gBACA,UAAU,CAAC,GAAG,aAAa,KAAK,eAAe,KAAK,WAAW,QAAkB;AAAA;AAAA,YACnF,GACF;AAAA,YACA,oBAAC,QACE,yBACH;AAAA;AAAA;AAAA,QAtBK,GAAG,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC;AAAA,MAuB5B;AAAA,IACF,CAAC;AAGD,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAEnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAU;AAAA;AAAA,YAC1D,GACF;AAAA;AAAA,QACF;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAEf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAA8B;AAAA;AAAA,YAC3E,GACF;AAAA;AAAA,QACF;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,mEACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QACA,qBAAC,SAAI,WAAU,oBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,gBAAM;AAAA,gBAAE,EAAE,UAAU;AAAA;AAAA;AAAA,UACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,gBAAM;AAAA,gBAAE,EAAE,uBAAuB;AAAA;AAAA;AAAA,UACnC;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AAAA,EAEA,qBAAqB,WAGlB;AACD,QAAI,UAAU,eAAe,MAAM,eAAe;AAChD,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,aAAa;AAAA,IACvB;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6a4c93b52ca21ec4b555a0d2906ee27fc49f34f8"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return vi=function(){return l},l}vi();function dK(n,e){vi().f[0]++;let t=(vi().s[0]++,{});return vi().s[1]++,vi().b[1][0]++,n.value&&(vi().b[1][1]++,n.value.stops)?(vi().b[0][0]++,vi().s[2]++,n.value.stops.forEach((i,r)=>{vi().f[1]++,vi().s[3]++,Object.prototype.hasOwnProperty.call(!e.refs,r)?(vi().b[2][0]++,vi().s[4]++,t?vi().b[3][1]++:(vi().b[3][0]++,vi().s[5]++,t={...e}),vi().s[6]++,t[r]=Lv("stop-")):(vi().b[2][1]++,vi().s[7]++,t[r]=e.refs[r])})):vi().b[0][1]++,vi().s[8]++,t}class Ace extends ni.Component{static defaultProps=(vi().s[9]++,{errors:{}});state=(vi().s[10]++,{refs:{}});componentDidMount(){vi().f[2]++;const e=(vi().s[11]++,dK(this.props,this.state));vi().s[12]++,e?(vi().b[4][0]++,vi().s[13]++,this.setState({refs:e})):vi().b[4][1]++}static getDerivedStateFromProps(e,t){vi().f[3]++;const i=(vi().s[14]++,dK(e,t));return vi().s[15]++,i?(vi().b[5][0]++,vi().s[16]++,{refs:i}):(vi().b[5][1]++,vi().s[17]++,null)}orderStopsByZoom(e){vi().f[4]++;const t=(vi().s[18]++,e.map((r,a)=>(vi().f[5]++,vi().s[19]++,{ref:this.state.refs[a],data:r})).sort((r,a)=>(vi().f[6]++,vi().s[20]++,tj(r.data[0],a.data[0])))),i=(vi().s[21]++,{});return vi().s[22]++,t.forEach((r,a)=>{vi().f[7]++,vi().s[23]++,i[a]=r.ref}),vi().s[24]++,this.setState({refs:i}),vi().s[25]++,t.map(r=>(vi().f[8]++,vi().s[26]++,r.data))}changeZoomStop(e,t,i){vi().f[9]++;const r=(vi().s[27]++,this.props.value.stops.slice(0));vi().s[28]++,r[e]=[t,i];const a=(vi().s[29]++,this.orderStopsByZoom(r)),l=(vi().s[30]++,{...this.props.value,stops:a});vi().s[31]++,this.props.onChange(this.props.fieldName,l)}changeBase(e){vi().f[10]++;const t=(vi().s[32]++,{...this.props.value,base:e});vi().s[33]++,t.base===void 0?(vi().b[6][0]++,vi().s[34]++,delete t.base):vi().b[6][1]++,vi().s[35]++,this.props.onChange(this.props.fieldName,t)}changeDataType=(vi().s[36]++,e=>{vi().f[11]++,vi().s[37]++,vi().b[8][0]++,e!=="interpolate"&&(vi().b[8][1]++,this.props.onChangeToDataFunction)?(vi().b[7][0]++,vi().s[38]++,this.props.onChangeToDataFunction(e)):vi().b[7][1]++});render(){vi().f[12]++;const e=(vi().s[39]++,this.props.t),t=(vi().s[40]++,this.props.value?.stops.map((i,r)=>{vi().f[13]++;const a=(vi().s[41]++,i[0]),l=(vi().s[42]++,i[1]),o=(vi().s[43]++,ce.jsx(nj,{onClick:this.props.onDeleteStop?.bind(this,r)}));return vi().s[44]++,ce.jsxs("tr",{children:[ce.jsx("td",{children:ce.jsx(z0,{"aria-label":e("Zoom"),value:a,onChange:m=>(vi().f[14]++,vi().s[45]++,this.changeZoomStop(r,m,l)),min:0,max:22})}),ce.jsx("td",{children:ce.jsx(xv,{"aria-label":e("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:l,onChange:(m,C)=>(vi().f[15]++,vi().s[46]++,this.changeZoomStop(r,a,C))})}),ce.jsx("td",{children:o})]},`${i[0]}-${i[1]}`)}));return vi().s[47]++,ce.jsx("div",{className:"maputnik-data-spec-block",children:ce.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[ce.jsx("legend",{children:F2(this.props.fieldName)}),ce.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[ce.jsx(Ks,{label:e("Function"),children:ce.jsx("div",{className:"maputnik-data-spec-property-input",children:ce.jsx(ey,{value:"interpolate",onChange:i=>(vi().f[16]++,vi().s[48]++,this.changeDataType(i)),title:e("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})}),ce.jsx(Ks,{label:e("Base"),children:ce.jsx("div",{className:"maputnik-data-spec-property-input",children:ce.jsx(xv,{fieldName:"base",fieldSpec:da.function.base,value:this.props.value?.base,onChange:(i,r)=>(vi().f[17]++,vi().s[49]++,this.changeBase(r))})})}),ce.jsx("div",{className:"maputnik-function-stop",children:ce.jsxs("table",{className:"maputnik-function-stop-table maputnik-function-stop-table--zoom",children:[ce.jsx("caption",{children:e("Stops")}),ce.jsx("thead",{children:ce.jsxs("tr",{children:[ce.jsx("th",{children:e("Zoom")}),ce.jsx("th",{rowSpan:2,children:e("Output value")})]})}),ce.jsx("tbody",{children:t})]})}),ce.jsxs("div",{className:"maputnik-toolbox",children:[ce.jsxs(ml,{className:"maputnik-add-stop",onClick:this.props.onAddStop?.bind(this),children:[ce.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:ce.jsx("path",{fill:"currentColor",d:k8})})," ",e("Add stop")]}),ce.jsxs(ml,{className:"maputnik-add-stop",onClick:this.props.onExpressionClick?.bind(this),children:[ce.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:ce.jsx("path",{fill:"currentColor",d:N_})})," ",e("Convert to expression")]})]})]})]})})}getDataFunctionTypes(e){return vi().f[18]++,vi().s[50]++,e["property-type"]==="data-driven"?(vi().b[9][0]++,vi().s[51]++,["interpolate","categorical","interval","exponential","identity"]):(vi().b[9][1]++,vi().s[52]++,["interpolate"])}}const uce=(vi().s[53]++,ss()(Ace));function Nt(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",e="5033c253416f295119927ac94f2be1c5d08ca915",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",statementMap:{0:{start:{line:10,column:2},end:{line:10,column:78}},1:{start:{line:13,column:2},end:{line:13,column:74}},2:{start:{line:16,column:2},end:{line:18,column:5}},3:{start:{line:17,column:4},end:{line:17,column:52}},4:{start:{line:21,column:2},end:{line:21,column:123}},5:{start:{line:24,column:2},end:{line:26,column:5}},6:{start:{line:25,column:4},end:{line:25,column:83}},7:{start:{line:29,column:2},end:{line:29,column:64}},8:{start:{line:32,column:16},end:{line:32,column:47}},9:{start:{line:33,column:2},end:{line:33,column:38}},10:{start:{line:36,column:2},end:{line:38,column:3}},11:{start:{line:37,column:4},end:{line:37,column:37}},12:{start:{line:39,column:2},end:{line:39,column:15}},13:{start:{line:42,column:2},end:{line:54,column:3}},14:{start:{line:43,column:4},end:{line:43,column:19}},15:{start:{line:44,column:9},end:{line:54,column:3}},16:{start:{line:45,column:4},end:{line:45,column:19}},17:{start:{line:46,column:9},end:{line:54,column:3}},18:{start:{line:47,column:4},end:{line:47,column:19}},19:{start:{line:48,column:9},end:{line:54,column:3}},20:{start:{line:49,column:4},end:{line:49,column:27}},21:{start:{line:50,column:9},end:{line:54,column:3}},22:{start:{line:51,column:4},end:{line:51,column:27}},23:{start:{line:53,column:4},end:{line:53,column:24}},24:{start:{line:56,column:22},end:{line:281,column:1}},25:{start:{line:57,column:34},end:{line:59,column:3}},26:{start:{line:60,column:36},end:{line:60,column:57}},27:{start:{line:61,column:2},end:{line:65,column:48}},28:{start:{line:62,column:4},end:{line:64,column:5}},29:{start:{line:63,column:6},end:{line:63,column:61}},30:{start:{line:66,column:31},end:{line:74,column:3}},31:{start:{line:67,column:4},end:{line:69,column:5}},32:{start:{line:68,column:6},end:{line:68,column:27}},33:{start:{line:70,column:4},end:{line:72,column:5}},34:{start:{line:71,column:6},end:{line:71,column:24}},35:{start:{line:73,column:4},end:{line:73,column:25}},36:{start:{line:75,column:18},end:{line:91,column:3}},37:{start:{line:76,column:18},end:{line:76,column:44}},38:{start:{line:77,column:21},end:{line:77,column:44}},39:{start:{line:78,column:4},end:{line:85,column:5}},40:{start:{line:79,column:6},end:{line:82,column:9}},41:{start:{line:84,column:6},end:{line:84,column:49}},42:{start:{line:86,column:25},end:{line:89,column:5}},43:{start:{line:90,column:4},end:{line:90,column:50}},44:{start:{line:92,column:27},end:{line:96,column:3}},45:{start:{line:93,column:37},end:{line:93,column:42}},46:{start:{line:94,column:4},end:{line:94,column:49}},47:{start:{line:95,column:4},end:{line:95,column:25}},48:{start:{line:97,column:21},end:{line:108,column:3}},49:{start:{line:98,column:18},end:{line:98,column:44}},50:{start:{line:99,column:4},end:{line:99,column:29}},51:{start:{line:100,column:23},end:{line:103,column:5}},52:{start:{line:104,column:4},end:{line:106,column:5}},53:{start:{line:105,column:6},end:{line:105,column:33}},54:{start:{line:107,column:4},end:{line:107,column:50}},55:{start:{line:109,column:27},end:{line:138,column:3}},56:{start:{line:110,column:22},end:{line:110,column:27}},57:{start:{line:112,column:4},end:{line:136,column:5}},58:{start:{line:113,column:6},end:{line:128,column:7}},59:{start:{line:114,column:8},end:{line:119,column:10}},60:{start:{line:117,column:12},end:{line:117,column:83}},61:{start:{line:121,column:8},end:{line:127,column:10}},62:{start:{line:130,column:6},end:{line:135,column:8}},63:{start:{line:137,column:4},end:{line:137,column:46}},64:{start:{line:139,column:25},end:{line:151,column:3}},65:{start:{line:140,column:33},end:{line:140,column:38}},66:{start:{line:141,column:4},end:{line:150,column:5}},67:{start:{line:142,column:6},end:{line:145,column:9}},68:{start:{line:146,column:6},end:{line:146,column:27}},69:{start:{line:147,column:11},end:{line:150,column:5}},70:{start:{line:148,column:6},end:{line:148,column:42}},71:{start:{line:149,column:6},end:{line:149,column:27}},72:{start:{line:152,column:18},end:{line:155,column:3}},73:{start:{line:153,column:33},end:{line:153,column:38}},74:{start:{line:154,column:4},end:{line:154,column:140}},75:{start:{line:156,column:25},end:{line:167,column:3}},76:{start:{line:157,column:33},end:{line:157,column:38}},77:{start:{line:159,column:4},end:{line:165,column:5}},78:{start:{line:160,column:6},end:{line:160,column:67}},79:{start:{line:161,column:11},end:{line:165,column:5}},80:{start:{line:162,column:6},end:{line:162,column:43}},81:{start:{line:164,column:6},end:{line:164,column:65}},82:{start:{line:166,column:4},end:{line:166,column:48}},83:{start:{line:168,column:27},end:{line:206,column:3}},84:{start:{line:169,column:25},end:{line:169,column:62}},85:{start:{line:170,column:22},end:{line:170,column:61}},86:{start:{line:171,column:22},end:{line:171,column:27}},87:{start:{line:173,column:4},end:{line:204,column:5}},88:{start:{line:174,column:6},end:{line:193,column:7}},89:{start:{line:175,column:8},end:{line:182,column:10}},90:{start:{line:180,column:12},end:{line:180,column:106}},91:{start:{line:184,column:8},end:{line:192,column:10}},92:{start:{line:195,column:6},end:{line:203,column:8}},93:{start:{line:205,column:4},end:{line:205,column:46}},94:{start:{line:207,column:24},end:{line:209,column:3}},95:{start:{line:208,column:4},end:{line:208,column:23}},96:{start:{line:210,column:26},end:{line:212,column:3}},97:{start:{line:211,column:4},end:{line:211,column:24}},98:{start:{line:213,column:20},end:{line:213,column:120}},99:{start:{line:215,column:2},end:{line:279,column:3}},100:{start:{line:216,column:4},end:{line:231,column:6}},101:{start:{line:232,column:9},end:{line:279,column:3}},102:{start:{line:233,column:4},end:{line:247,column:6}},103:{start:{line:248,column:9},end:{line:279,column:3}},104:{start:{line:249,column:4},end:{line:263,column:6}},105:{start:{line:265,column:4},end:{line:278,column:6}},106:{start:{line:280,column:2},end:{line:280,column:141}}},fnMap:{0:{name:"isLiteralExpression",decl:{start:{line:9,column:9},end:{line:9,column:28}},loc:{start:{line:9,column:36},end:{line:11,column:1}},line:9},1:{name:"isGetExpression",decl:{start:{line:12,column:9},end:{line:12,column:24}},loc:{start:{line:12,column:32},end:{line:14,column:1}},line:12},2:{name:"isZoomField",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:28},end:{line:19,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:16,column:168},end:{line:16,column:169}},loc:{start:{line:16,column:178},end:{line:18,column:3}},line:16},4:{name:"isIdentityProperty",decl:{start:{line:20,column:9},end:{line:20,column:27}},loc:{start:{line:20,column:35},end:{line:22,column:1}},line:20},5:{name:"isDataStopProperty",decl:{start:{line:23,column:9},end:{line:23,column:27}},loc:{start:{line:23,column:35},end:{line:27,column:1}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:24,column:168},end:{line:24,column:169}},loc:{start:{line:24,column:178},end:{line:26,column:3}},line:24},7:{name:"isDataField",decl:{start:{line:28,column:9},end:{line:28,column:20}},loc:{start:{line:28,column:28},end:{line:30,column:1}},line:28},8:{name:"isPrimative",decl:{start:{line:31,column:9},end:{line:31,column:20}},loc:{start:{line:31,column:28},end:{line:34,column:1}},line:31},9:{name:"isArrayOfPrimatives",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:37},end:{line:40,column:1}},line:35},10:{name:"getDataType",decl:{start:{line:41,column:9},end:{line:41,column:20}},loc:{start:{line:41,column:44},end:{line:55,column:1}},line:41},11:{name:"(anonymous_11)",decl:{start:{line:56,column:22},end:{line:56,column:23}},loc:{start:{line:56,column:33},end:{line:281,column:1}},line:56},12:{name:"(anonymous_12)",decl:{start:{line:61,column:18},end:{line:61,column:19}},loc:{start:{line:61,column:24},end:{line:65,column:3}},line:61},13:{name:"(anonymous_13)",decl:{start:{line:66,column:31},end:{line:66,column:32}},loc:{start:{line:66,column:46},end:{line:74,column:3}},line:66},14:{name:"(anonymous_14)",decl:{start:{line:75,column:18},end:{line:75,column:19}},loc:{start:{line:75,column:24},end:{line:91,column:3}},line:75},15:{name:"(anonymous_15)",decl:{start:{line:92,column:27},end:{line:92,column:28}},loc:{start:{line:92,column:33},end:{line:96,column:3}},line:92},16:{name:"(anonymous_16)",decl:{start:{line:97,column:21},end:{line:97,column:22}},loc:{start:{line:97,column:34},end:{line:108,column:3}},line:97},17:{name:"(anonymous_17)",decl:{start:{line:109,column:27},end:{line:109,column:28}},loc:{start:{line:109,column:33},end:{line:138,column:3}},line:109},18:{name:"(anonymous_18)",decl:{start:{line:116,column:33},end:{line:116,column:34}},loc:{start:{line:116,column:43},end:{line:118,column:11}},line:116},19:{name:"(anonymous_19)",decl:{start:{line:139,column:25},end:{line:139,column:26}},loc:{start:{line:139,column:31},end:{line:151,column:3}},line:139},20:{name:"(anonymous_20)",decl:{start:{line:152,column:18},end:{line:152,column:19}},loc:{start:{line:152,column:24},end:{line:155,column:3}},line:152},21:{name:"(anonymous_21)",decl:{start:{line:156,column:25},end:{line:156,column:26}},loc:{start:{line:156,column:31},end:{line:167,column:3}},line:156},22:{name:"(anonymous_22)",decl:{start:{line:168,column:27},end:{line:168,column:28}},loc:{start:{line:168,column:33},end:{line:206,column:3}},line:168},23:{name:"(anonymous_23)",decl:{start:{line:179,column:33},end:{line:179,column:34}},loc:{start:{line:179,column:43},end:{line:181,column:11}},line:179},24:{name:"(anonymous_24)",decl:{start:{line:207,column:24},end:{line:207,column:25}},loc:{start:{line:207,column:30},end:{line:209,column:3}},line:207},25:{name:"(anonymous_25)",decl:{start:{line:210,column:26},end:{line:210,column:27}},loc:{start:{line:210,column:32},end:{line:212,column:3}},line:210}},branchMap:{0:{loc:{start:{line:10,column:9},end:{line:10,column:77}},type:"binary-expr",locations:[{start:{line:10,column:9},end:{line:10,column:29}},{start:{line:10,column:33},end:{line:10,column:51}},{start:{line:10,column:55},end:{line:10,column:77}}],line:10},1:{loc:{start:{line:13,column:9},end:{line:13,column:73}},type:"binary-expr",locations:[{start:{line:13,column:9},end:{line:13,column:29}},{start:{line:13,column:33},end:{line:13,column:51}},{start:{line:13,column:55},end:{line:13,column:73}}],line:13},2:{loc:{start:{line:16,column:9},end:{line:18,column:4}},type:"binary-expr",locations:[{start:{line:16,column:9},end:{line:16,column:34}},{start:{line:16,column:38},end:{line:16,column:49}},{start:{line:16,column:53},end:{line:16,column:90}},{start:{line:16,column:94},end:{line:16,column:120}},{start:{line:16,column:124},end:{line:16,column:146}},{start:{line:16,column:150},end:{line:18,column:4}}],line:16},3:{loc:{start:{line:17,column:11},end:{line:17,column:51}},type:"binary-expr",locations:[{start:{line:17,column:11},end:{line:17,column:30}},{start:{line:17,column:34},end:{line:17,column:51}}],line:17},4:{loc:{start:{line:21,column:9},end:{line:21,column:122}},type:"binary-expr",locations:[{start:{line:21,column:9},end:{line:21,column:34}},{start:{line:21,column:38},end:{line:21,column:63}},{start:{line:21,column:67},end:{line:21,column:122}}],line:21},5:{loc:{start:{line:24,column:9},end:{line:26,column:4}},type:"binary-expr",locations:[{start:{line:24,column:9},end:{line:24,column:34}},{start:{line:24,column:38},end:{line:24,column:49}},{start:{line:24,column:53},end:{line:24,column:90}},{start:{line:24,column:94},end:{line:24,column:116}},{start:{line:24,column:120},end:{line:24,column:146}},{start:{line:24,column:150},end:{line:26,column:4}}],line:24},6:{loc:{start:{line:25,column:11},end:{line:25,column:82}},type:"binary-expr",locations:[{start:{line:25,column:11},end:{line:25,column:30}},{start:{line:25,column:34},end:{line:25,column:51}},{start:{line:25,column:55},end:{line:25,column:82}}],line:25},7:{loc:{start:{line:29,column:9},end:{line:29,column:63}},type:"binary-expr",locations:[{start:{line:29,column:9},end:{line:29,column:34}},{start:{line:29,column:38},end:{line:29,column:63}}],line:29},8:{loc:{start:{line:36,column:2},end:{line:38,column:3}},type:"if",locations:[{start:{line:36,column:2},end:{line:38,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},9:{loc:{start:{line:41,column:28},end:{line:41,column:42}},type:"default-arg",locations:[{start:{line:41,column:40},end:{line:41,column:42}}],line:41},10:{loc:{start:{line:42,column:2},end:{line:54,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:54,column:3}},{start:{line:44,column:9},end:{line:54,column:3}}],line:42},11:{loc:{start:{line:44,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:44,column:9},end:{line:54,column:3}},{start:{line:46,column:9},end:{line:54,column:3}}],line:44},12:{loc:{start:{line:46,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:46,column:9},end:{line:54,column:3}},{start:{line:48,column:9},end:{line:54,column:3}}],line:46},13:{loc:{start:{line:46,column:13},end:{line:46,column:69}},type:"binary-expr",locations:[{start:{line:46,column:13},end:{line:46,column:39}},{start:{line:46,column:43},end:{line:46,column:69}}],line:46},14:{loc:{start:{line:48,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:48,column:9},end:{line:54,column:3}},{start:{line:50,column:9},end:{line:54,column:3}}],line:48},15:{loc:{start:{line:50,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:50,column:9},end:{line:54,column:3}},{start:{line:52,column:9},end:{line:54,column:3}}],line:50},16:{loc:{start:{line:62,column:4},end:{line:64,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:64,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},17:{loc:{start:{line:67,column:4},end:{line:69,column:5}},type:"if",locations:[{start:{line:67,column:4},end:{line:69,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:67},18:{loc:{start:{line:70,column:4},end:{line:72,column:5}},type:"if",locations:[{start:{line:70,column:4},end:{line:72,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:70},19:{loc:{start:{line:78,column:4},end:{line:85,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:85,column:5}},{start:{line:83,column:11},end:{line:85,column:5}}],line:78},20:{loc:{start:{line:104,column:4},end:{line:106,column:5}},type:"if",locations:[{start:{line:104,column:4},end:{line:106,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:104},21:{loc:{start:{line:112,column:4},end:{line:136,column:5}},type:"if",locations:[{start:{line:112,column:4},end:{line:136,column:5}},{start:{line:129,column:11},end:{line:136,column:5}}],line:112},22:{loc:{start:{line:113,column:6},end:{line:128,column:7}},type:"if",locations:[{start:{line:113,column:6},end:{line:128,column:7}},{start:{line:120,column:13},end:{line:128,column:7}}],line:113},23:{loc:{start:{line:117,column:34},end:{line:117,column:81}},type:"binary-expr",locations:[{start:{line:117,column:34},end:{line:117,column:41}},{start:{line:117,column:45},end:{line:117,column:81}}],line:117},24:{loc:{start:{line:132,column:14},end:{line:132,column:59}},type:"binary-expr",locations:[{start:{line:132,column:14},end:{line:132,column:19}},{start:{line:132,column:23},end:{line:132,column:59}}],line:132},25:{loc:{start:{line:133,column:15},end:{line:133,column:60}},type:"binary-expr",locations:[{start:{line:133,column:15},end:{line:133,column:20}},{start:{line:133,column:24},end:{line:133,column:60}}],line:133},26:{loc:{start:{line:141,column:4},end:{line:150,column:5}},type:"if",locations:[{start:{line:141,column:4},end:{line:150,column:5}},{start:{line:147,column:11},end:{line:150,column:5}}],line:141},27:{loc:{start:{line:147,column:11},end:{line:150,column:5}},type:"if",locations:[{start:{line:147,column:11},end:{line:150,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:147},28:{loc:{start:{line:154,column:11},end:{line:154,column:139}},type:"binary-expr",locations:[{start:{line:154,column:11},end:{line:154,column:33}},{start:{line:154,column:37},end:{line:154,column:63}},{start:{line:154,column:67},end:{line:154,column:85}},{start:{line:154,column:89},end:{line:154,column:109}},{start:{line:154,column:113},end:{line:154,column:139}}],line:154},29:{loc:{start:{line:159,column:4},end:{line:165,column:5}},type:"if",locations:[{start:{line:159,column:4},end:{line:165,column:5}},{start:{line:161,column:11},end:{line:165,column:5}}],line:159},30:{loc:{start:{line:159,column:8},end:{line:159,column:53}},type:"binary-expr",locations:[{start:{line:159,column:8},end:{line:159,column:33}},{start:{line:159,column:37},end:{line:159,column:53}}],line:159},31:{loc:{start:{line:161,column:11},end:{line:165,column:5}},type:"if",locations:[{start:{line:161,column:11},end:{line:165,column:5}},{start:{line:163,column:11},end:{line:165,column:5}}],line:161},32:{loc:{start:{line:164,column:31},end:{line:164,column:63}},type:"binary-expr",locations:[{start:{line:164,column:31},end:{line:164,column:36}},{start:{line:164,column:40},end:{line:164,column:63}}],line:164},33:{loc:{start:{line:170,column:22},end:{line:170,column:61}},type:"cond-expr",locations:[{start:{line:170,column:55},end:{line:170,column:57}},{start:{line:170,column:60},end:{line:170,column:61}}],line:170},34:{loc:{start:{line:173,column:4},end:{line:204,column:5}},type:"if",locations:[{start:{line:173,column:4},end:{line:204,column:5}},{start:{line:194,column:11},end:{line:204,column:5}}],line:173},35:{loc:{start:{line:174,column:6},end:{line:193,column:7}},type:"if",locations:[{start:{line:174,column:6},end:{line:193,column:7}},{start:{line:183,column:13},end:{line:193,column:7}}],line:174},36:{loc:{start:{line:180,column:57},end:{line:180,column:104}},type:"binary-expr",locations:[{start:{line:180,column:57},end:{line:180,column:64}},{start:{line:180,column:68},end:{line:180,column:104}}],line:180},37:{loc:{start:{line:200,column:42},end:{line:200,column:93}},type:"binary-expr",locations:[{start:{line:200,column:42},end:{line:200,column:53}},{start:{line:200,column:57},end:{line:200,column:93}}],line:200},38:{loc:{start:{line:201,column:43},end:{line:201,column:94}},type:"binary-expr",locations:[{start:{line:201,column:43},end:{line:201,column:54}},{start:{line:201,column:58},end:{line:201,column:94}}],line:201},39:{loc:{start:{line:213,column:20},end:{line:213,column:120}},type:"cond-expr",locations:[{start:{line:213,column:62},end:{line:213,column:89}},{start:{line:213,column:92},end:{line:213,column:120}}],line:213},40:{loc:{start:{line:215,column:2},end:{line:279,column:3}},type:"if",locations:[{start:{line:215,column:2},end:{line:279,column:3}},{start:{line:232,column:9},end:{line:279,column:3}}],line:215},41:{loc:{start:{line:232,column:9},end:{line:279,column:3}},type:"if",locations:[{start:{line:232,column:9},end:{line:279,column:3}},{start:{line:248,column:9},end:{line:279,column:3}}],line:232},42:{loc:{start:{line:248,column:9},end:{line:279,column:3}},type:"if",locations:[{start:{line:248,column:9},end:{line:279,column:3}},{start:{line:264,column:9},end:{line:279,column:3}}],line:248}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},b:{0:[0,0,0],1:[0,0,0],2:[0,0,0,0,0,0],3:[0,0],4:[0,0,0],5:[0,0,0,0,0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0,0,0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx"],names:[],mappings:"AAsTM;AAtTN,OAAO,WAAW;AAElB,OAAO,kBAAkB;AACzB,OAAO,kBAA4B;AACnC,OAAO,kBAAkB;AACzB,OAAO,wBAAwB;AAC/B,SAAQ,YAAY,qBAAoB;AACxC,SAAQ,2BAA0B;AAGlC,SAAS,oBAAoB,OAAY;AACvC,SAAQ,MAAM,QAAQ,KAAK,KAAK,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM;AACrE;AAEA,SAAS,gBAAgB,OAAY;AACnC,SACE,MAAM,QAAQ,KAAK,KACnB,MAAM,WAAW,KACjB,MAAM,CAAC,MAAM;AAEjB;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,SAAS,KACrB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW;AAAA,EAEpB,CAAC;AAEL;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SAAS,cACf,OAAO,UAAU,eAAe,KAAK,OAAO,UAAU;AAE1D;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,MAAM,SAAS,KACrB,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW,KAChB,OAAO,KAAK,CAAC,MAAO;AAAA,EAExB,CAAC;AAEL;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,mBAAmB,KAAK,KACxB,mBAAmB,KAAK;AAE5B;AAEA,SAAS,YAAY,OAAgD;AACnE,QAAM,QAAQ,CAAC,UAAU,WAAW,QAAQ;AAC5C,SAAO,MAAM,SAAS,OAAO,KAAM;AACrC;AAEA,SAAS,oBAAoB,QAAyD;AACpF,MAAI,MAAM,QAAQ,MAAM,GAAG;AACzB,WAAO,OAAO,MAAM,WAAW;AAAA,EACjC;AACA,SAAO;AACT;AAEA,SAAS,YAAY,OAAY,YAAU,CAAC,GAAU;AACpD,MAAI,UAAU,QAAW;AACvB,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,UAAU,SAAS,WAAW,oBAAoB,KAAK,GAAG;AACjE,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAgBA,MAAM,gBAA8C,CAAC,UAAU;AAC7D,QAAM,CAAC,UAAU,WAAW,IAAI,MAAM;AAAA,IACpC,YAAY,MAAM,OAAO,MAAM,SAAS;AAAA,EAC1C;AACA,QAAM,CAAC,WAAW,YAAY,IAAI,MAAM,SAAS,KAAK;AAEtD,QAAM,UAAU,MAAM;AACpB,QAAI,CAAC,WAAW;AACd,kBAAY,YAAY,MAAM,OAAO,MAAM,SAAS,CAAC;AAAA,IACvD;AAAA,EACF,GAAG,CAAC,MAAM,OAAO,MAAM,WAAW,SAAS,CAAC;AAE5C,QAAM,uBAAuB,CAAC,cAAmB;AAC/C,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAEA,QAAM,UAAU,MAAM;AACpB,UAAM,QAAQ,MAAM,MAAM,MAAM,MAAM,CAAC;AACvC,UAAM,WAAW,MAAM,MAAM,SAAS,CAAC;AACvC,QAAI,OAAO,SAAS,CAAC,MAAM,UAAU;AACnC,YAAM,KAAK;AAAA,QACT,EAAE,MAAM,SAAS,CAAC,EAAE,OAAO,GAAG,OAAO,SAAS,CAAC,EAAE,MAAM;AAAA,QACvD,SAAS,CAAC;AAAA,MACZ,CAAC;AAAA,IACH,OAAO;AACL,YAAM,KAAK,CAAC,SAAS,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC;AAAA,IAC3C;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,MAAM;AAAA,MACT;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,YAAY;AAAA,EAC9C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,EAAE,WAAW,UAAU,IAAI;AACjC,UAAM,SAAS,WAAW,UAAU,OAAO;AAC3C,gBAAY,OAAO;AAAA,EACrB;AAEA,QAAM,aAAa,CAAC,YAAoB;AACtC,UAAM,QAAQ,MAAM,MAAM,MAAM,MAAM,CAAC;AACvC,UAAM,OAAO,SAAS,CAAC;AAEvB,QAAI,eAAoB;AAAA,MACtB,GAAG,MAAM;AAAA,MACT;AAAA,IACF;AAEA,QAAI,MAAM,WAAW,GAAG;AACtB,qBAAe,MAAM,CAAC,EAAE,CAAC;AAAA,IAC3B;AAEA,UAAM,SAAS,MAAM,WAAW,YAAY;AAAA,EAC9C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,EAAE,MAAM,IAAI;AAElB,QAAI;AACJ,QAAI,OAAO,UAAU,UAAU;AAC7B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,KAAK,CAAC,EAAE,MAAM,KAAK,CAAC,KAAK,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACvE,CAAC;AAAA,QACH;AAAA,MACF,OAAO;AACL,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,YACxC,CAAC,IAAI,oBAAoB,MAAM,SAAS,CAAC;AAAA,UAC3C;AAAA,QACF;AAAA,MACF;AAAA,IACF,OAAO;AACL,iBAAW;AAAA,QACT,OAAO;AAAA,UACL,CAAC,GAAG,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACjD,CAAC,IAAI,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,QACpD;AAAA,MACF;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,QAAQ;AAAA,EAC1C;AAEA,QAAM,iBAAiB,MAAM;AAC3B,UAAM,EAAE,OAAO,UAAU,IAAI;AAE7B,QAAI,gBAAgB,KAAK,GAAG;AAC1B,YAAM,SAAS,WAAW;AAAA,QACxB,MAAM;AAAA,QACN,UAAU,MAAM,CAAC;AAAA,MACnB,CAAC;AACD,kBAAY,OAAO;AAAA,IACrB,WAAW,oBAAoB,KAAK,GAAG;AACrC,YAAM,SAAS,WAAW,MAAM,CAAC,CAAC;AAClC,kBAAY,OAAO;AAAA,IACrB;AAAA,EACF;AAEA,QAAM,UAAU,MAAM;AACpB,UAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,WACE,gBAAgB,KAAK,KACrB,oBAAoB,KAAK,KACzB,YAAY,KAAK,KAChB,MAAM,QAAQ,KAAK,KAAK,UAAU,SAAS;AAAA,EAEhD;AAEA,QAAM,iBAAiB,MAAM;AAC3B,UAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,QAAI;AAEJ,QAAI,OAAO,UAAU,YAAY,WAAW,OAAO;AACjD,mBAAa,cAAc,gBAAgB,OAAO,SAAS;AAAA,IAC7D,WAAW,mBAAmB,KAAK,GAAG;AACpC,mBAAa,CAAC,OAAO,MAAM,QAAQ;AAAA,IACrC,OAAO;AACL,mBAAa,CAAC,WAAW,SAAS,MAAM,UAAU,OAAO;AAAA,IAC3D;AACA,UAAM,SAAS,MAAM,WAAW,UAAU;AAAA,EAC5C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,eAAe,qBAAqB,MAAM,SAAS;AACzD,UAAM,YAAY,iBAAiB,gBAAgB,KAAK;AACxD,UAAM,EAAE,MAAM,IAAI;AAClB,QAAI;AAEJ,QAAI,OAAO,UAAU,UAAU;AAC7B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,EAAE,MAAM,KAAK,CAAC,GAAG,OAAO,UAAU,GAAG,KAAK,CAAC,KAAK,oBAAoB,MAAM,SAAS,CAAC;AAAA,UAC9F,CAAC;AAAA,QACH;AAAA,MACF,OAAO;AACL,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,EAAE,MAAM,GAAG,OAAO,UAAU,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,YACpE,CAAC,EAAE,MAAM,IAAI,OAAO,UAAU,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACvE;AAAA,QACF;AAAA,MACF;AAAA,IACF,OAAO;AACL,iBAAW;AAAA,QACT,UAAU;AAAA,QACV,MAAM;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,OAAO;AAAA,UACL,CAAC,EAAE,MAAM,GAAG,OAAO,UAAU,GAAG,MAAM,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACnF,CAAC,EAAE,MAAM,IAAI,OAAO,UAAU,GAAG,MAAM,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,QACtF;AAAA,MACF;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,QAAQ;AAAA,EAC1C;AAEA,QAAM,gBAAgB,MAAM;AAC1B,iBAAa,IAAI;AAAA,EACnB;AAEA,QAAM,kBAAkB,MAAM;AAC5B,iBAAa,KAAK;AAAA,EACpB;AAEA,QAAM,YACJ,MAAM,UAAU,YAAY,MAAM,QAAQ,8BAA8B;AAE1E,MAAI;AAEJ,MAAI,aAAa,cAAc;AAC7B,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,MAAM,MAAM,SAAS;AAAA,QACnD;AAAA,QACA,QAAQ;AAAA,QACR,UAAU;AAAA,QACV,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,SAAS;AAAA,QACT,QAAQ;AAAA;AAAA,IACV;AAAA,EAEJ,WAAW,aAAa,iBAAiB;AACvC,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,cAAc;AAAA,QACd,WAAW;AAAA,QACX,wBAAwB;AAAA,QACxB,mBAAmB;AAAA;AAAA,IACrB;AAAA,EAEJ,WAAW,aAAa,iBAAiB;AACvC,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,cAAc;AAAA,QACd,WAAW;AAAA,QACX,wBAAwB;AAAA,QACxB,mBAAmB;AAAA;AAAA,IACrB;AAAA,EAEJ,OAAO;AACL,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,aAAa;AAAA,QACb,aAAa;AAAA,QACb,mBAAmB;AAAA;AAAA,IACrB;AAAA,EAEJ;AAEA,SACE,oBAAC,SAAI,WAAW,WAAW,eAAa,0BAA0B,MAAM,WACrE,qBACH;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5033c253416f295119927ac94f2be1c5d08ca915"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Nt=function(){return l},l}Nt();function fK(n){return Nt().f[0]++,Nt().s[0]++,Nt().b[0][0]++,Array.isArray(n)&&(Nt().b[0][1]++,n.length===2)&&(Nt().b[0][2]++,n[0]==="literal")}function mK(n){return Nt().f[1]++,Nt().s[1]++,Nt().b[1][0]++,Array.isArray(n)&&(Nt().b[1][1]++,n.length===2)&&(Nt().b[1][2]++,n[0]==="get")}function cce(n){return Nt().f[2]++,Nt().s[2]++,Nt().b[2][0]++,typeof n=="object"&&(Nt().b[2][1]++,n.stops)&&(Nt().b[2][2]++,typeof n.property>"u")&&(Nt().b[2][3]++,Array.isArray(n.stops))&&(Nt().b[2][4]++,n.stops.length>1)&&(Nt().b[2][5]++,n.stops.every(e=>(Nt().f[3]++,Nt().s[3]++,Nt().b[3][0]++,Array.isArray(e)&&(Nt().b[3][1]++,e.length===2))))}function ij(n){return Nt().f[4]++,Nt().s[4]++,Nt().b[4][0]++,typeof n=="object"&&(Nt().b[4][1]++,n.type==="identity")&&(Nt().b[4][2]++,Object.prototype.hasOwnProperty.call(n,"property"))}function hce(n){return Nt().f[5]++,Nt().s[5]++,Nt().b[5][0]++,typeof n=="object"&&(Nt().b[5][1]++,n.stops)&&(Nt().b[5][2]++,typeof n.property<"u")&&(Nt().b[5][3]++,n.stops.length>1)&&(Nt().b[5][4]++,Array.isArray(n.stops))&&(Nt().b[5][5]++,n.stops.every(e=>(Nt().f[6]++,Nt().s[6]++,Nt().b[6][0]++,Array.isArray(e)&&(Nt().b[6][1]++,e.length===2)&&(Nt().b[6][2]++,typeof e[0]=="object"))))}function dce(n){return Nt().f[7]++,Nt().s[7]++,Nt().b[7][0]++,ij(n)||(Nt().b[7][1]++,hce(n))}function e7(n){Nt().f[8]++;const e=(Nt().s[8]++,["string","boolean","number"]);return Nt().s[9]++,e.includes(typeof n)}function fce(n){return Nt().f[9]++,Nt().s[10]++,Array.isArray(n)?(Nt().b[8][0]++,Nt().s[11]++,n.every(e7)):(Nt().b[8][1]++,Nt().s[12]++,!1)}function pK(n,e=(Nt().b[9][0]++,{})){return Nt().f[10]++,Nt().s[13]++,n===void 0?(Nt().b[10][0]++,Nt().s[14]++,"value"):(Nt().b[10][1]++,Nt().s[15]++,e7(n)?(Nt().b[11][0]++,Nt().s[16]++,"value"):(Nt().b[11][1]++,Nt().s[17]++,Nt().b[13][0]++,e.type==="array"&&(Nt().b[13][1]++,fce(n))?(Nt().b[12][0]++,Nt().s[18]++,"value"):(Nt().b[12][1]++,Nt().s[19]++,cce(n)?(Nt().b[14][0]++,Nt().s[20]++,"zoom_function"):(Nt().b[14][1]++,Nt().s[21]++,dce(n)?(Nt().b[15][0]++,Nt().s[22]++,"data_function"):(Nt().b[15][1]++,Nt().s[23]++,"expression")))))}Nt().s[24]++;const mce=n=>{Nt().f[11]++;const[e,t]=(Nt().s[25]++,ni.useState(pK(n.value,n.fieldSpec))),[i,r]=(Nt().s[26]++,ni.useState(!1));Nt().s[27]++,ni.useEffect(()=>{Nt().f[12]++,Nt().s[28]++,i?Nt().b[16][1]++:(Nt().b[16][0]++,Nt().s[29]++,t(pK(n.value,n.fieldSpec)))},[n.value,n.fieldSpec,i]),Nt().s[30]++;const a=V=>(Nt().f[13]++,Nt().s[31]++,V.expression.interpolated?(Nt().b[17][0]++,Nt().s[32]++,"exponential"):(Nt().b[17][1]++,Nt().s[33]++,V.type==="number"?(Nt().b[18][0]++,Nt().s[34]++,"interval"):(Nt().b[18][1]++,Nt().s[35]++,"categorical")));Nt().s[36]++;const l=()=>{Nt().f[14]++;const V=(Nt().s[37]++,n.value.stops.slice(0)),ae=(Nt().s[38]++,V[V.length-1]);Nt().s[39]++,typeof ae[0]=="object"?(Nt().b[19][0]++,Nt().s[40]++,V.push([{zoom:ae[0].zoom+1,value:ae[0].value},ae[1]])):(Nt().b[19][1]++,Nt().s[41]++,V.push([ae[0]+1,ae[1]]));const ne=(Nt().s[42]++,{...n.value,stops:V});Nt().s[43]++,n.onChange(n.fieldName,ne)};Nt().s[44]++;const o=()=>{Nt().f[15]++;const{fieldSpec:V,fieldName:ae}=(Nt().s[45]++,n);Nt().s[46]++,n.onChange(ae,V.default),Nt().s[47]++,t("value")};Nt().s[48]++;const m=V=>{Nt().f[16]++;const ae=(Nt().s[49]++,n.value.stops.slice(0));Nt().s[50]++,ae.splice(V,1);let ne=(Nt().s[51]++,{...n.value,stops:ae});Nt().s[52]++,ae.length===1?(Nt().b[20][0]++,Nt().s[53]++,ne=ae[0][1]):Nt().b[20][1]++,Nt().s[54]++,n.onChange(n.fieldName,ne)};Nt().s[55]++;const C=()=>{Nt().f[17]++;const{value:V}=(Nt().s[56]++,n);let ae;Nt().s[57]++,typeof V=="object"?(Nt().b[21][0]++,Nt().s[58]++,V.stops?(Nt().b[22][0]++,Nt().s[59]++,ae={base:V.base,stops:V.stops.map(ne=>(Nt().f[18]++,Nt().s[60]++,[ne[0].zoom,(Nt().b[23][0]++,ne[1]||(Nt().b[23][1]++,um(n.fieldSpec)))]))}):(Nt().b[22][1]++,Nt().s[61]++,ae={base:V.base,stops:[[6,um(n.fieldSpec)],[10,um(n.fieldSpec)]]})):(Nt().b[21][1]++,Nt().s[62]++,ae={stops:[[6,(Nt().b[24][0]++,V||(Nt().b[24][1]++,um(n.fieldSpec)))],[10,(Nt().b[25][0]++,V||(Nt().b[25][1]++,um(n.fieldSpec)))]]}),Nt().s[63]++,n.onChange(n.fieldName,ae)};Nt().s[64]++;const S=()=>{Nt().f[19]++;const{value:V,fieldName:ae}=(Nt().s[65]++,n);Nt().s[66]++,mK(V)?(Nt().b[26][0]++,Nt().s[67]++,n.onChange(ae,{type:"identity",property:V[1]}),Nt().s[68]++,t("value")):(Nt().b[26][1]++,Nt().s[69]++,fK(V)?(Nt().b[27][0]++,Nt().s[70]++,n.onChange(ae,V[1]),Nt().s[71]++,t("value")):Nt().b[27][1]++)};Nt().s[72]++;const O=()=>{Nt().f[20]++;const{value:V,fieldSpec:ae}=(Nt().s[73]++,n);return Nt().s[74]++,Nt().b[28][0]++,mK(V)||(Nt().b[28][1]++,fK(V))||(Nt().b[28][2]++,e7(V))||(Nt().b[28][3]++,Array.isArray(V)&&(Nt().b[28][4]++,ae.type==="array"))};Nt().s[75]++;const U=()=>{Nt().f[21]++;const{value:V,fieldSpec:ae}=(Nt().s[76]++,n);let ne;Nt().s[77]++,Nt().b[30][0]++,typeof V=="object"&&(Nt().b[30][1]++,"stops"in V)?(Nt().b[29][0]++,Nt().s[78]++,ne=gV.convertFunction(V,ae)):(Nt().b[29][1]++,Nt().s[79]++,ij(V)?(Nt().b[31][0]++,Nt().s[80]++,ne=["get",V.property]):(Nt().b[31][1]++,Nt().s[81]++,ne=["literal",(Nt().b[32][0]++,V||(Nt().b[32][1]++,n.fieldSpec.default))])),Nt().s[82]++,n.onChange(n.fieldName,ne)};Nt().s[83]++;const K=()=>{Nt().f[22]++;const V=(Nt().s[84]++,a(n.fieldSpec)),ae=(Nt().s[85]++,V==="categorical"?(Nt().b[33][0]++,""):(Nt().b[33][1]++,0)),{value:ne}=(Nt().s[86]++,n);let Z;Nt().s[87]++,typeof ne=="object"?(Nt().b[34][0]++,Nt().s[88]++,ne.stops?(Nt().b[35][0]++,Nt().s[89]++,Z={property:"",type:V,base:ne.base,stops:ne.stops.map(oe=>(Nt().f[23]++,Nt().s[90]++,[{zoom:oe[0],value:ae},(Nt().b[36][0]++,oe[1]||(Nt().b[36][1]++,um(n.fieldSpec)))]))}):(Nt().b[35][1]++,Nt().s[91]++,Z={property:"",type:V,base:ne.base,stops:[[{zoom:6,value:ae},um(n.fieldSpec)],[{zoom:10,value:ae},um(n.fieldSpec)]]})):(Nt().b[34][1]++,Nt().s[92]++,Z={property:"",type:V,base:ne.base,stops:[[{zoom:6,value:ae},(Nt().b[37][0]++,n.value||(Nt().b[37][1]++,um(n.fieldSpec)))],[{zoom:10,value:ae},(Nt().b[38][0]++,n.value||(Nt().b[38][1]++,um(n.fieldSpec)))]]}),Nt().s[93]++,n.onChange(n.fieldName,Z)};Nt().s[94]++;const z=()=>{Nt().f[24]++,Nt().s[95]++,r(!0)};Nt().s[96]++;const j=()=>{Nt().f[25]++,Nt().s[97]++,r(!1)},Q=(Nt().s[98]++,n.fieldSpec.default===n.value?(Nt().b[39][0]++,"maputnik-default-property"):(Nt().b[39][1]++,"maputnik-modified-property"));let ee;return Nt().s[99]++,e==="expression"?(Nt().b[40][0]++,Nt().s[100]++,ee=ce.jsx(mG,{errors:n.errors,onChange:n.onChange.bind(null,n.fieldName),canUndo:O,onUndo:S,onDelete:o,fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onFocus:z,onBlur:j})):(Nt().b[40][1]++,Nt().s[101]++,e==="zoom_function"?(Nt().b[41][0]++,Nt().s[102]++,ee=ce.jsx(uce,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onDeleteStop:m,onAddStop:l,onChangeToDataFunction:K,onExpressionClick:U})):(Nt().b[41][1]++,Nt().s[103]++,e==="data_function"?(Nt().b[42][0]++,Nt().s[104]++,ee=ce.jsx(lce,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onDeleteStop:m,onAddStop:l,onChangeToZoomFunction:C,onExpressionClick:U})):(Nt().b[42][1]++,Nt().s[105]++,ee=ce.jsx(oce,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onZoomClick:C,onDataClick:K,onExpressionClick:U})))),Nt().s[106]++,ce.jsx("div",{className:Q,"data-wd-key":"spec-field-container:"+n.fieldName,children:ee})};function fo(){var n="/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",e="411d3be261f729b266d6cb26884b34616b925c83",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",statementMap:{0:{start:{line:4,column:23},end:{line:4,column:117}},1:{start:{line:6,column:20},end:{line:6,column:60}},2:{start:{line:7,column:16},end:{line:7,column:49}},3:{start:{line:8,column:20},end:{line:8,column:36}},4:{start:{line:9,column:2},end:{line:14,column:3}},5:{start:{line:10,column:4},end:{line:13,column:6}},6:{start:{line:15,column:2},end:{line:20,column:3}},7:{start:{line:16,column:4},end:{line:19,column:6}},8:{start:{line:21,column:2},end:{line:21,column:19}},9:{start:{line:24,column:16},end:{line:24,column:48}},10:{start:{line:25,column:2},end:{line:29,column:3}},11:{start:{line:26,column:4},end:{line:26,column:19}},12:{start:{line:28,column:4},end:{line:28,column:20}},13:{start:{line:32,column:21},end:{line:35,column:3}},14:{start:{line:33,column:18},end:{line:33,column:80}},15:{start:{line:34,column:4},end:{line:34,column:51}},16:{start:{line:37,column:23},end:{line:37,column:33}},17:{start:{line:38,column:19},end:{line:56,column:6}},18:{start:{line:39,column:24},end:{line:39,column:87}},19:{start:{line:40,column:20},end:{line:40,column:48}},20:{start:{line:41,column:21},end:{line:41,column:50}},21:{start:{line:42,column:25},end:{line:42,column:82}},22:{start:{line:43,column:24},end:{line:43,column:63}},23:{start:{line:44,column:6},end:{line:55,column:8}},24:{start:{line:57,column:4},end:{line:57,column:98}}},fnMap:{0:{name:"getFieldSpec",decl:{start:{line:5,column:9},end:{line:5,column:21}},loc:{start:{line:5,column:50},end:{line:22,column:1}},line:5},1:{name:"getGroupName",decl:{start:{line:23,column:9},end:{line:23,column:21}},loc:{start:{line:23,column:50},end:{line:30,column:1}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:32,column:21},end:{line:32,column:22}},loc:{start:{line:32,column:45},end:{line:35,column:3}},line:32},3:{name:"(anonymous_3)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:11},end:{line:58,column:3}},line:36},4:{name:"(anonymous_4)",decl:{start:{line:38,column:46},end:{line:38,column:47}},loc:{start:{line:38,column:61},end:{line:56,column:5}},line:38}},branchMap:{0:{loc:{start:{line:9,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},1:{loc:{start:{line:15,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:15,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:24,column:16},end:{line:24,column:48}},type:"binary-expr",locations:[{start:{line:24,column:16},end:{line:24,column:42}},{start:{line:24,column:46},end:{line:24,column:48}}],line:24},3:{loc:{start:{line:25,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:25,column:2},end:{line:29,column:3}},{start:{line:27,column:9},end:{line:29,column:3}}],line:25},4:{loc:{start:{line:40,column:20},end:{line:40,column:48}},type:"binary-expr",locations:[{start:{line:40,column:20},end:{line:40,column:42}},{start:{line:40,column:46},end:{line:40,column:48}}],line:40},5:{loc:{start:{line:41,column:21},end:{line:41,column:50}},type:"binary-expr",locations:[{start:{line:41,column:21},end:{line:41,column:44}},{start:{line:41,column:48},end:{line:41,column:50}}],line:41},6:{loc:{start:{line:42,column:25},end:{line:42,column:82}},type:"cond-expr",locations:[{start:{line:42,column:46},end:{line:42,column:62}},{start:{line:42,column:65},end:{line:42,column:82}}],line:42},7:{loc:{start:{line:43,column:24},end:{line:43,column:63}},type:"cond-expr",locations:[{start:{line:43,column:45},end:{line:43,column:52}},{start:{line:43,column:55},end:{line:43,column:63}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx"],names:[],mappings:"AA+Da;AA/Db,OAAO,WAAW;AAElB,OAAO,mBAAmB;AAG1B,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AAIpH,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,YAAY,aAAa,MAAM,WAAW,SAAS;AACzD,QAAM,QAAQ,KAAK,YAAY,MAAM,SAAS;AAC9C,QAAM,YAAY,MAAM,SAAS;AACjC,MAAG,eAAe,QAAQ,SAAS,KAAK,GAAG;AACzC,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,MAAG,cAAc,aAAa;AAC5B,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,QAAS,KAAK,WAAW,SAAS,KAAK,CAAC;AAC9C,MAAI,aAAa,OAAO;AACtB,WAAO;AAAA,EACT,OAAO;AACL,WAAO;AAAA,EACT;AACF;AAUA,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,mBAAmB,CAAC,UAAkB,aAAkB;AACtD,UAAM,QAAQ,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,QAAQ;AAC3E,SAAK,MAAM,SAAS,OAAO,UAAU,QAAQ;AAAA,EAC/C;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,OAAM,IAAI,KAAK;AACtB,UAAM,SAAS,KAAK,MAAM,YAAY,IAAI,eAAa;AACrD,YAAM,YAAY,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,SAAS;AAEhF,YAAM,QAAQ,KAAK,MAAM,MAAM,SAAS,CAAC;AACzC,YAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAC3C,YAAM,aAAa,aAAa,QAC5B,MAAM,SAA+B,IACrC,OAAO,SAAgC;AAC3C,YAAM,YAAY,aAAa,QAAQ,UAAU;AAEjD,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,UAAU,KAAK;AAAA,UAEf;AAAA,UACA,OAAO;AAAA,UACP;AAAA,UACA;AAAA;AAAA,QAJK;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,2BACnB,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"411d3be261f729b266d6cb26884b34616b925c83"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return fo=function(){return l},l}fo();const pce=(fo().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);function gce(n,e,t){fo().f[0]++;const i=(fo().s[1]++,rj(n,e,t)),r=(fo().s[2]++,n[i+"_"+e]),a=(fo().s[3]++,r[t]);return fo().s[4]++,pce.indexOf(t)>=0?(fo().b[0][0]++,fo().s[5]++,{...a,values:n.$root.sprite.values}):(fo().b[0][1]++,fo().s[6]++,t==="text-font"?(fo().b[1][0]++,fo().s[7]++,{...a,values:n.$root.glyphs.values}):(fo().b[1][1]++,fo().s[8]++,a))}function rj(n,e,t){fo().f[1]++;const i=(fo().s[9]++,fo().b[2][0]++,n["paint_"+e]||(fo().b[2][1]++,{}));return fo().s[10]++,t in i?(fo().b[3][0]++,fo().s[11]++,"paint"):(fo().b[3][1]++,fo().s[12]++,"layout")}class yce extends ni.Component{onPropertyChange=(fo().s[13]++,(e,t)=>{fo().f[2]++;const i=(fo().s[14]++,rj(this.props.spec,this.props.layer.type,e));fo().s[15]++,this.props.onChange(i,e,t)});render(){fo().f[3]++;const{errors:e}=(fo().s[16]++,this.props),t=(fo().s[17]++,this.props.groupFields.map(i=>{fo().f[4]++;const r=(fo().s[18]++,gce(this.props.spec,this.props.layer.type,i)),a=(fo().s[19]++,fo().b[4][0]++,this.props.layer.paint||(fo().b[4][1]++,{})),l=(fo().s[20]++,fo().b[5][0]++,this.props.layer.layout||(fo().b[5][1]++,{})),o=(fo().s[21]++,i in a?(fo().b[6][0]++,a[i]):(fo().b[6][1]++,l[i])),m=(fo().s[22]++,i in a?(fo().b[7][0]++,"paint"):(fo().b[7][1]++,"layout"));return fo().s[23]++,ce.jsx(mce,{errors:e,onChange:this.onPropertyChange,fieldName:i,value:o,fieldType:m,fieldSpec:r},i)}));return fo().s[24]++,ce.jsx("div",{className:"maputnik-property-group",children:t})}}var uE,gK;function vce(){return gK||(gK=1,uE=function(n){var e={};function t(i){if(e[i])return e[i].exports;var r=e[i]={i,l:!1,exports:{}};return n[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=n,t.c=e,t.d=function(i,r,a){t.o(i,r)||Object.defineProperty(i,r,{enumerable:!0,get:a})},t.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},t.t=function(i,r){if(1&r&&(i=t(i)),8&r||4&r&&typeof i=="object"&&i&&i.__esModule)return i;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:i}),2&r&&typeof i!="string")for(var l in i)t.d(a,l,(function(o){return i[o]}).bind(null,l));return a},t.n=function(i){var r=i&&i.__esModule?function(){return i.default}:function(){return i};return t.d(r,"a",r),r},t.o=function(i,r){return Object.prototype.hasOwnProperty.call(i,r)},t.p="",t(t.s=2)}([function(n,e){n.exports=i0()},function(n,e){n.exports=pl()},function(n,e,t){t.r(e);var i=t(1),r=t(0),a=function(){return(a=Object.assign||function(z){for(var j,Q=1,ee=arguments.length;Q<ee;Q++)for(var V in j=arguments[Q])Object.prototype.hasOwnProperty.call(j,V)&&(z[V]=j[V]);return z}).apply(this,arguments)},l=function(z,j){var Q={};for(var ee in z)Object.prototype.hasOwnProperty.call(z,ee)&&j.indexOf(ee)<0&&(Q[ee]=z[ee]);if(z!=null&&typeof Object.getOwnPropertySymbols=="function"){var V=0;for(ee=Object.getOwnPropertySymbols(z);V<ee.length;V++)j.indexOf(ee[V])<0&&Object.prototype.propertyIsEnumerable.call(z,ee[V])&&(Q[ee[V]]=z[ee[V]])}return Q},o=0,m=i.forwardRef(function(z,j){var Q=z.title,ee=Q===void 0?null:Q,V=z.description,ae=V===void 0?null:V,ne=z.size,Z=ne===void 0?null:ne,oe=z.color,W=oe===void 0?"currentColor":oe,ue=z.horizontal,ge=ue===void 0?null:ue,ye=z.vertical,Me=ye===void 0?null:ye,Be=z.rotate,we=Be===void 0?null:Be,qe=z.spin,xe=qe===void 0?null:qe,ze=z.style,ot=ze===void 0?{}:ze,yt=z.children,nt=l(z,["title","description","size","color","horizontal","vertical","rotate","spin","style","children"]);o++;var be,Ne=xe!==null&&xe,tt=i.Children.map(yt,function(St){var Rt=St;Ne!==!0&&(Ne=(xe===null?Rt.props.spin:xe)===!0);var Le=Rt.props.size;typeof Z=="number"&&typeof Rt.props.size=="number"&&(Le=Rt.props.size/Z);var Pe={size:Le,color:W===null?Rt.props.color:W,horizontal:ge===null?Rt.props.horizontal:ge,vertical:Me===null?Rt.props.vertical:Me,rotate:we===null?Rt.props.rotate:we,spin:xe===null?Rt.props.spin:xe,inStack:!0};return i.cloneElement(Rt,Pe)});Z!==null&&(ot.width=typeof Z=="string"?Z:1.5*Z+"rem");var lt,It="stack_labelledby_"+o,pt="stack_describedby_"+o;if(ee)be=ae?It+" "+pt:It;else if(lt="presentation",ae)throw new Error("title attribute required when description is set");return i.createElement("svg",a({ref:j,viewBox:"0 0 24 24",style:ot,role:lt,"aria-labelledby":be},nt),ee&&i.createElement("title",{id:It},ee),ae&&i.createElement("desc",{id:pt},ae),Ne&&i.createElement("style",null,"@keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }","@keyframes spin-inverse { from { transform: rotate(0deg) } to { transform: rotate(-360deg) } }"),tt)});m.displayName="Stack",m.propTypes={size:r.oneOfType([r.number,r.string]),color:r.string,horizontal:r.bool,vertical:r.bool,rotate:r.number,spin:r.oneOfType([r.bool,r.number]),children:r.oneOfType([r.arrayOf(r.node),r.node]).isRequired,className:r.string,style:r.object},m.defaultProps={size:null,color:null,horizontal:null,vertical:null,rotate:null,spin:null};var C=m;t.d(e,"Icon",function(){return K}),t.d(e,"Stack",function(){return C});var S=function(){return(S=Object.assign||function(z){for(var j,Q=1,ee=arguments.length;Q<ee;Q++)for(var V in j=arguments[Q])Object.prototype.hasOwnProperty.call(j,V)&&(z[V]=j[V]);return z}).apply(this,arguments)},O=function(z,j){var Q={};for(var ee in z)Object.prototype.hasOwnProperty.call(z,ee)&&j.indexOf(ee)<0&&(Q[ee]=z[ee]);if(z!=null&&typeof Object.getOwnPropertySymbols=="function"){var V=0;for(ee=Object.getOwnPropertySymbols(z);V<ee.length;V++)j.indexOf(ee[V])<0&&Object.prototype.propertyIsEnumerable.call(z,ee[V])&&(Q[ee[V]]=z[ee[V]])}return Q},U=0,K=i.forwardRef(function(z,j){var Q=z.path,ee=z.id,V=ee===void 0?++U:ee,ae=z.title,ne=ae===void 0?null:ae,Z=z.description,oe=Z===void 0?null:Z,W=z.size,ue=W===void 0?null:W,ge=z.color,ye=ge===void 0?"currentColor":ge,Me=z.horizontal,Be=Me!==void 0&&Me,we=z.vertical,qe=we!==void 0&&we,xe=z.rotate,ze=xe===void 0?0:xe,ot=z.spin,yt=ot!==void 0&&ot,nt=z.style,be=nt===void 0?{}:nt,Ne=z.inStack,tt=Ne!==void 0&&Ne,lt=O(z,["path","id","title","description","size","color","horizontal","vertical","rotate","spin","style","inStack"]),It={},pt=[];ue!==null&&(tt?pt.push("scale("+ue+")"):(be.width=typeof ue=="string"?ue:1.5*ue+"rem",be.height=be.width)),Be&&pt.push("scaleX(-1)"),qe&&pt.push("scaleY(-1)"),ze!==0&&pt.push("rotate("+ze+"deg)"),ye!==null&&(It.fill=ye);var St=i.createElement("path",S({d:Q,style:It},tt?lt:{})),Rt=St;pt.length>0&&(be.transform=pt.join(" "),be.transformOrigin="center",tt&&(Rt=i.createElement("g",{style:be},St,i.createElement("rect",{width:"24",height:"24",fill:"transparent"}))));var Le,Pe=Rt,Re=yt===!0||typeof yt!="number"?2:yt,He=!tt&&(Be||qe);if(Re<0&&(He=!He),yt&&(Pe=i.createElement("g",{style:{animation:"spin"+(He?"-inverse":"")+" linear "+Math.abs(Re)+"s infinite",transformOrigin:"center"}},Rt,!(Be||qe||ze!==0)&&i.createElement("rect",{width:"24",height:"24",fill:"transparent"}))),tt)return Pe;var bt,vt="icon_labelledby_"+V,Ot="icon_describedby_"+V;if(ne)Le=oe?vt+" "+Ot:vt;else if(bt="presentation",oe)throw new Error("title attribute required when description is set");return i.createElement("svg",S({ref:j,viewBox:"0 0 24 24",style:be,role:bt,"aria-labelledby":Le},lt),ne&&i.createElement("title",{id:vt},ne),oe&&i.createElement("desc",{id:Ot},oe),!tt&&yt&&(He?i.createElement("style",null,"@keyframes spin-inverse { from { transform: rotate(0deg) } to { transform: rotate(-360deg) } }"):i.createElement("style",null,"@keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }")),Pe)});K.displayName="Icon",K.propTypes={path:r.string.isRequired,size:r.oneOfType([r.number,r.string]),color:r.string,horizontal:r.bool,vertical:r.bool,rotate:r.number,spin:r.oneOfType([r.bool,r.number]),style:r.object,inStack:r.bool,className:r.string},K.defaultProps={size:null,color:"currentColor",horizontal:!1,vertical:!1,rotate:0,spin:!1},e.default=K}])),uE}var Cce=vce();const yK=WA(Cce);function dv(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",e="2f1dde9b3c8e927b8e8868bcb310eb3d6a65eb08",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:45,column:9}},1:{start:{line:22,column:27},end:{line:22,column:74}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:46,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:22,column:19},end:{line:22,column:20}},loc:{start:{line:22,column:27},end:{line:22,column:74}},line:22}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx"],names:[],mappings:"AA+BQ,SACE,KADF;AA/BR,OAAO,WAAW;AAClB,OAAO,UAAU;AACjB;AAAA,EACE;AAAA,EACA;AAAA,OACK;AACP;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AAaP,qBAAqB,yBAAyB,MAAM,UAAiC;AAAA,EACnF,SAAS;AACP,WAAO,qBAAC,iBAAc,MAAM,KAAK,MAAM,IACrC;AAAA;AAAA,QAAC;AAAA;AAAA,UAAqB,WAAU;AAAA,UAC9B,eAAa,wBAAsB,KAAK,MAAM,aAAa;AAAA,UAC3D,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,UAE7D,+BAAC,uBAAoB,WAAU,uCAC7B;AAAA,gCAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAI,eAAK,MAAM,OAAM;AAAA,YAC9C;AAAA,cAAC;AAAA;AAAA,gBACC,MAAM;AAAA,gBACN,MAAM;AAAA,gBACN,WAAU;AAAA;AAAA,YACZ;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,MAAM;AAAA,gBACN,MAAM;AAAA,gBACN,WAAU;AAAA;AAAA,YACZ;AAAA,aACF;AAAA;AAAA,MACF;AAAA,MACA,oBAAC,sBACE,eAAK,MAAM,UACd;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f1dde9b3c8e927b8e8868bcb310eb3d6a65eb08"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return dv=function(){return l},l}dv();class _ce extends ni.Component{render(){return dv().f[0]++,dv().s[0]++,ce.jsxs(AG,{uuid:this.props.id,children:[ce.jsx(hG,{className:"maputnik-layer-editor-group","data-wd-key":"layer-editor-group:"+this.props["data-wd-key"],onClick:e=>(dv().f[1]++,dv().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:ce.jsxs(kse,{className:"maputnik-layer-editor-group__button",children:[ce.jsx("span",{style:{flexGrow:1},children:this.props.title}),ce.jsx(yK,{path:Jse,size:1,className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--up"}),ce.jsx(yK,{path:Xse,size:1,className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--down"})]})}),ce.jsx(Kse,{children:this.props.children})]})}}function Fg(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",e="90f4763b72e1eacd247b39087553d31d1a0a133a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",statementMap:{0:{start:{line:6,column:29},end:{line:29,column:1}},1:{start:{line:7,column:12},end:{line:7,column:19}},2:{start:{line:8,column:2},end:{line:28,column:4}},3:{start:{line:30,column:21},end:{line:30,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:29},end:{line:6,column:30}},loc:{start:{line:6,column:40},end:{line:29,column:1}},line:6}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx"],names:[],mappings:"AAoBM;AAlBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,UAAU;AAAA,MAAG,WAAW,OAAO,MAAM;AAAA,MACnD,OAAO,MAAM;AAAA,MACb,eAAY;AAAA,MAEZ;AAAA,QAAC;AAAA;AAAA,UACC,YAAY;AAAA,UACZ,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,UAC9B,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"90f4763b72e1eacd247b39087553d31d1a0a133a"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Fg=function(){return l},l}Fg();Fg().s[0]++;const bce=n=>{Fg().f[0]++;const e=(Fg().s[1]++,n.t);return Fg().s[2]++,ce.jsx(Ks,{label:e("Min Zoom"),fieldSpec:da.layer.minzoom,error:n.error,"data-wd-key":"min-zoom",children:ce.jsx(z0,{allowRange:!0,value:n.value,onChange:n.onChange,min:da.layer.minzoom.minimum,max:da.layer.minzoom.maximum,default:da.layer.minzoom.minimum,"data-wd-key":"min-zoom.input"})})},xce=(Fg().s[3]++,ss()(bce));function zg(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",e="af8478150b9688dd685e47e421715e80a172fde9",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",statementMap:{0:{start:{line:6,column:29},end:{line:29,column:1}},1:{start:{line:7,column:12},end:{line:7,column:19}},2:{start:{line:8,column:2},end:{line:28,column:4}},3:{start:{line:30,column:21},end:{line:30,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:29},end:{line:6,column:30}},loc:{start:{line:6,column:40},end:{line:29,column:1}},line:6}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx"],names:[],mappings:"AAoBM;AAlBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,UAAU;AAAA,MAAG,WAAW,OAAO,MAAM;AAAA,MACnD,OAAO,MAAM;AAAA,MACb,eAAY;AAAA,MAEZ;AAAA,QAAC;AAAA;AAAA,UACC,YAAY;AAAA,UACZ,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,UAC9B,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"af8478150b9688dd685e47e421715e80a172fde9"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return zg=function(){return l},l}zg();zg().s[0]++;const Mce=n=>{zg().f[0]++;const e=(zg().s[1]++,n.t);return zg().s[2]++,ce.jsx(Ks,{label:e("Max Zoom"),fieldSpec:da.layer.maxzoom,error:n.error,"data-wd-key":"max-zoom",children:ce.jsx(z0,{allowRange:!0,value:n.value,onChange:n.onChange,min:da.layer.maxzoom.minimum,max:da.layer.maxzoom.maximum,default:da.layer.maxzoom.maximum,"data-wd-key":"max-zoom.input"})})},Sce=(zg().s[3]++,ss()(Mce));function B1(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",e="57456766e3c3291370696e036ad161fb7b3e99e2",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",statementMap:{0:{start:{line:5,column:29},end:{line:31,column:1}},1:{start:{line:6,column:12},end:{line:6,column:19}},2:{start:{line:7,column:20},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:30,column:4}},4:{start:{line:32,column:21},end:{line:32,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:29},end:{line:5,column:30}},loc:{start:{line:5,column:40},end:{line:31,column:1}},line:5}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx"],names:[],mappings:"AA2BM;AAzBN,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,QAAM,YAAY;AAAA,IAChB,KAAK;AAAA,MACH;AAAA,IACF;AAAA,EACF;AAEA,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,UAAU;AAAA,MACnB;AAAA,MACA,eAAY;AAAA,MACZ,OAAO,MAAM;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO;AAAA,UACP,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,SAAS,EAAE,YAAY;AAAA,UACvB,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"57456766e3c3291370696e036ad161fb7b3e99e2"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return B1=function(){return l},l}B1();B1().s[0]++;const wce=n=>{B1().f[0]++;const e=(B1().s[1]++,n.t),t=(B1().s[2]++,{doc:e("Comments for the current layer. This is non-standard and not in the spec.")});return B1().s[3]++,ce.jsx(Ks,{label:e("Comments"),fieldSpec:t,"data-wd-key":"layer-comment",error:n.error,children:ce.jsx(ap,{multi:!0,value:n.value,onChange:n.onChange,default:e("Comment..."),"data-wd-key":"layer-comment.input"})})},Ece=(B1().s[4]++,ss()(wce));function fv(){var n="/home/runner/work/maputnik/maputnik/src/libs/format.ts",e="c45fbfac66e994b59070a295e5a7f219cd5d66ac",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/format.ts",statementMap:{0:{start:{line:2,column:2},end:{line:2,column:50}}},fnMap:{0:{name:"formatLayerId",decl:{start:{line:1,column:16},end:{line:1,column:29}},loc:{start:{line:1,column:34},end:{line:3,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:9},end:{line:2,column:49}},type:"cond-expr",locations:[{start:{line:2,column:21},end:{line:2,column:37}},{start:{line:2,column:40},end:{line:2,column:49}}],line:2}},s:{0:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/format.ts"],names:[],mappings:"AAAO,gBAAS,cAAe,IAAwB;AACrD,SAAO,OAAO,KAAK,mBAAmB,IAAI,EAAE;AAC9C;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c45fbfac66e994b59070a295e5a7f219cd5d66ac"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return fv=function(){return l},l}fv();function oj(n){return fv().f[0]++,fv().s[0]++,n===""?(fv().b[0][0]++,"[empty_string]"):(fv().b[0][1]++,`'${n}'`)}function pn(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",e="3841487cdf145c8b2ca211ec85dc555aa6f1c4bb",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",statementMap:{0:{start:{line:24,column:17},end:{line:24,column:19}},1:{start:{line:25,column:2},end:{line:30,column:5}},2:{start:{line:29,column:59},end:{line:29,column:82}},3:{start:{line:31,column:2},end:{line:36,column:5}},4:{start:{line:35,column:59},end:{line:35,column:80}},5:{start:{line:37,column:2},end:{line:42,column:5}},6:{start:{line:41,column:59},end:{line:41,column:80}},7:{start:{line:43,column:2},end:{line:48,column:5}},8:{start:{line:47,column:58},end:{line:47,column:79}},9:{start:{line:49,column:2},end:{line:54,column:5}},10:{start:{line:53,column:58},end:{line:53,column:79}},11:{start:{line:55,column:2},end:{line:55,column:16}},12:{start:{line:58,column:2},end:{line:60,column:3}},13:{start:{line:59,column:4},end:{line:59,column:14}},14:{start:{line:61,column:2},end:{line:63,column:3}},15:{start:{line:62,column:4},end:{line:62,column:37}},16:{start:{line:64,column:17},end:{line:64,column:19}},17:{start:{line:65,column:2},end:{line:72,column:3}},18:{start:{line:66,column:4},end:{line:71,column:7}},19:{start:{line:73,column:2},end:{line:80,column:3}},20:{start:{line:74,column:4},end:{line:79,column:7}},21:{start:{line:81,column:2},end:{line:81,column:16}},22:{start:{line:84,column:21},end:{line:88,column:3}},23:{start:{line:89,column:22},end:{line:93,column:3}},24:{start:{line:94,column:22},end:{line:98,column:3}},25:{start:{line:99,column:2},end:{line:99,column:96}},26:{start:{line:102,column:24},end:{line:109,column:3}},27:{start:{line:111,column:4},end:{line:111,column:17}},28:{start:{line:112,column:25},end:{line:112,column:27}},29:{start:{line:113,column:4},end:{line:115,column:5}},30:{start:{line:114,column:6},end:{line:114,column:39}},31:{start:{line:116,column:4},end:{line:116,column:34}},32:{start:{line:119,column:29},end:{line:119,column:54}},33:{start:{line:120,column:4},end:{line:124,column:5}},34:{start:{line:121,column:6},end:{line:123,column:7}},35:{start:{line:122,column:8},end:{line:122,column:45}},36:{start:{line:125,column:4},end:{line:127,column:6}},37:{start:{line:130,column:4},end:{line:133,column:6}},38:{start:{line:136,column:32},end:{line:139,column:5}},39:{start:{line:140,column:4},end:{line:142,column:7}},40:{start:{line:145,column:18},end:{line:145,column:20}},41:{start:{line:146,column:4},end:{line:148,column:5}},42:{start:{line:147,column:6},end:{line:147,column:62}},43:{start:{line:149,column:35},end:{line:149,column:45}},44:{start:{line:150,column:22},end:{line:150,column:24}},45:{start:{line:151,column:4},end:{line:157,column:7}},46:{start:{line:152,column:6},end:{line:156,column:7}},47:{start:{line:153,column:8},end:{line:155,column:10}},48:{start:{line:159,column:18},end:{line:159,column:34}},49:{start:{line:160,column:4},end:{line:162,column:5}},50:{start:{line:161,column:6},end:{line:161,column:63}},51:{start:{line:163,column:4},end:{line:266,column:5}},52:{start:{line:165,column:8},end:{line:229,column:13}},53:{start:{line:172,column:35},end:{line:172,column:112}},54:{start:{line:181,column:37},end:{line:184,column:15}},55:{start:{line:193,column:31},end:{line:193,column:69}},56:{start:{line:202,column:31},end:{line:202,column:75}},57:{start:{line:210,column:31},end:{line:210,column:70}},58:{start:{line:218,column:31},end:{line:218,column:70}},59:{start:{line:226,column:31},end:{line:226,column:104}},60:{start:{line:231,column:8},end:{line:239,column:16}},61:{start:{line:237,column:29},end:{line:237,column:67}},62:{start:{line:241,column:8},end:{line:250,column:10}},63:{start:{line:252,column:8},end:{line:263,column:10}},64:{start:{line:257,column:14},end:{line:260,column:16}},65:{start:{line:265,column:8},end:{line:265,column:49}},66:{start:{line:269,column:4},end:{line:272,column:7}},67:{start:{line:275,column:14},end:{line:275,column:26}},68:{start:{line:276,column:21},end:{line:276,column:23}},69:{start:{line:277,column:22},end:{line:277,column:43}},70:{start:{line:278,column:19},end:{line:295,column:6}},71:{start:{line:279,column:6},end:{line:279,column:70}},72:{start:{line:281,column:22},end:{line:281,column:30}},73:{start:{line:282,column:6},end:{line:282,column:29}},74:{start:{line:283,column:6},end:{line:294,column:8}},75:{start:{line:296,column:19},end:{line:296,column:48}},76:{start:{line:297,column:18},end:{line:325,column:5}},77:{start:{line:300,column:23},end:{line:300,column:71}},78:{start:{line:305,column:23},end:{line:305,column:68}},79:{start:{line:310,column:23},end:{line:310,column:80}},80:{start:{line:316,column:23},end:{line:316,column:41}},81:{start:{line:322,column:23},end:{line:322,column:40}},82:{start:{line:327,column:6},end:{line:327,column:30}},83:{start:{line:328,column:6},end:{line:328,column:26}},84:{start:{line:330,column:4},end:{line:375,column:9}},85:{start:{line:357,column:33},end:{line:357,column:42}},86:{start:{line:358,column:20},end:{line:358,column:201}},87:{start:{line:378,column:20},end:{line:378,column:58}}},fnMap:{0:{name:"getLayoutForSymbolType",decl:{start:{line:23,column:9},end:{line:23,column:31}},loc:{start:{line:23,column:35},end:{line:56,column:1}},line:23},1:{name:"(anonymous_1)",decl:{start:{line:29,column:52},end:{line:29,column:53}},loc:{start:{line:29,column:59},end:{line:29,column:82}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:35,column:52},end:{line:35,column:53}},loc:{start:{line:35,column:59},end:{line:35,column:80}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:41,column:52},end:{line:41,column:53}},loc:{start:{line:41,column:59},end:{line:41,column:80}},line:41},4:{name:"(anonymous_4)",decl:{start:{line:47,column:51},end:{line:47,column:52}},loc:{start:{line:47,column:58},end:{line:47,column:79}},line:47},5:{name:"(anonymous_5)",decl:{start:{line:53,column:51},end:{line:53,column:52}},loc:{start:{line:53,column:58},end:{line:53,column:79}},line:53},6:{name:"getLayoutForType",decl:{start:{line:57,column:9},end:{line:57,column:25}},loc:{start:{line:57,column:35},end:{line:82,column:1}},line:57},7:{name:"layoutGroups",decl:{start:{line:83,column:9},end:{line:83,column:21}},loc:{start:{line:83,column:36},end:{line:100,column:1}},line:83},8:{name:"(anonymous_8)",decl:{start:{line:103,column:20},end:{line:103,column:21}},loc:{start:{line:103,column:26},end:{line:104,column:5}},line:103},9:{name:"(anonymous_9)",decl:{start:{line:105,column:21},end:{line:105,column:22}},loc:{start:{line:105,column:27},end:{line:106,column:5}},line:105},10:{name:"(anonymous_10)",decl:{start:{line:107,column:22},end:{line:107,column:23}},loc:{start:{line:107,column:28},end:{line:108,column:5}},line:107},11:{name:"(anonymous_11)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:21},end:{line:117,column:3}},line:110},12:{name:"(anonymous_12)",decl:{start:{line:118,column:2},end:{line:118,column:3}},loc:{start:{line:118,column:48},end:{line:128,column:3}},line:118},13:{name:"(anonymous_13)",decl:{start:{line:129,column:2},end:{line:129,column:3}},loc:{start:{line:129,column:44},end:{line:134,column:3}},line:129},14:{name:"(anonymous_14)",decl:{start:{line:135,column:2},end:{line:135,column:3}},loc:{start:{line:135,column:36},end:{line:143,column:3}},line:135},15:{name:"(anonymous_15)",decl:{start:{line:144,column:2},end:{line:144,column:3}},loc:{start:{line:144,column:32},end:{line:267,column:3}},line:144},16:{name:"(anonymous_16)",decl:{start:{line:151,column:19},end:{line:151,column:20}},loc:{start:{line:151,column:30},end:{line:157,column:5}},line:151},17:{name:"(anonymous_17)",decl:{start:{line:172,column:24},end:{line:172,column:25}},loc:{start:{line:172,column:35},end:{line:172,column:112}},line:172},18:{name:"(anonymous_18)",decl:{start:{line:181,column:24},end:{line:181,column:25}},loc:{start:{line:181,column:37},end:{line:184,column:15}},line:181},19:{name:"(anonymous_19)",decl:{start:{line:193,column:24},end:{line:193,column:25}},loc:{start:{line:193,column:31},end:{line:193,column:69}},line:193},20:{name:"(anonymous_20)",decl:{start:{line:202,column:24},end:{line:202,column:25}},loc:{start:{line:202,column:31},end:{line:202,column:75}},line:202},21:{name:"(anonymous_21)",decl:{start:{line:210,column:24},end:{line:210,column:25}},loc:{start:{line:210,column:31},end:{line:210,column:70}},line:210},22:{name:"(anonymous_22)",decl:{start:{line:218,column:24},end:{line:218,column:25}},loc:{start:{line:218,column:31},end:{line:218,column:70}},line:218},23:{name:"(anonymous_23)",decl:{start:{line:226,column:24},end:{line:226,column:25}},loc:{start:{line:226,column:31},end:{line:226,column:104}},line:226},24:{name:"(anonymous_24)",decl:{start:{line:237,column:22},end:{line:237,column:23}},loc:{start:{line:237,column:29},end:{line:237,column:67}},line:237},25:{name:"(anonymous_25)",decl:{start:{line:256,column:22},end:{line:256,column:23}},loc:{start:{line:256,column:34},end:{line:261,column:13}},line:256},26:{name:"(anonymous_26)",decl:{start:{line:268,column:2},end:{line:268,column:3}},loc:{start:{line:268,column:20},end:{line:273,column:3}},line:268},27:{name:"(anonymous_27)",decl:{start:{line:274,column:2},end:{line:274,column:3}},loc:{start:{line:274,column:11},end:{line:376,column:3}},line:274},28:{name:"(anonymous_28)",decl:{start:{line:278,column:53},end:{line:278,column:54}},loc:{start:{line:278,column:64},end:{line:280,column:5}},line:278},29:{name:"(anonymous_29)",decl:{start:{line:280,column:11},end:{line:280,column:12}},loc:{start:{line:280,column:22},end:{line:295,column:5}},line:280},30:{name:"(anonymous_30)",decl:{start:{line:300,column:17},end:{line:300,column:18}},loc:{start:{line:300,column:23},end:{line:300,column:71}},line:300},31:{name:"(anonymous_31)",decl:{start:{line:305,column:17},end:{line:305,column:18}},loc:{start:{line:305,column:23},end:{line:305,column:68}},line:305},32:{name:"(anonymous_32)",decl:{start:{line:310,column:17},end:{line:310,column:18}},loc:{start:{line:310,column:23},end:{line:310,column:80}},line:310},33:{name:"(anonymous_33)",decl:{start:{line:316,column:17},end:{line:316,column:18}},loc:{start:{line:316,column:23},end:{line:316,column:41}},line:316},34:{name:"(anonymous_34)",decl:{start:{line:322,column:17},end:{line:322,column:18}},loc:{start:{line:322,column:23},end:{line:322,column:40}},line:322},35:{name:"handleSelection",decl:{start:{line:326,column:13},end:{line:326,column:28}},loc:{start:{line:326,column:40},end:{line:329,column:5}},line:326},36:{name:"(anonymous_36)",decl:{start:{line:356,column:147},end:{line:356,column:148}},loc:{start:{line:356,column:155},end:{line:359,column:19}},line:356}},branchMap:{0:{loc:{start:{line:58,column:2},end:{line:60,column:3}},type:"if",locations:[{start:{line:58,column:2},end:{line:60,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:58},1:{loc:{start:{line:61,column:2},end:{line:63,column:3}},type:"if",locations:[{start:{line:61,column:2},end:{line:63,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},2:{loc:{start:{line:65,column:2},end:{line:72,column:3}},type:"if",locations:[{start:{line:65,column:2},end:{line:72,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},3:{loc:{start:{line:73,column:2},end:{line:80,column:3}},type:"if",locations:[{start:{line:73,column:2},end:{line:80,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:73},4:{loc:{start:{line:121,column:6},end:{line:123,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:123,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:121},5:{loc:{start:{line:146,column:4},end:{line:148,column:5}},type:"if",locations:[{start:{line:146,column:4},end:{line:148,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:146},6:{loc:{start:{line:152,column:6},end:{line:156,column:7}},type:"if",locations:[{start:{line:152,column:6},end:{line:156,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:152},7:{loc:{start:{line:152,column:10},end:{line:152,column:96}},type:"binary-expr",locations:[{start:{line:152,column:10},end:{line:152,column:22}},{start:{line:152,column:26},end:{line:152,column:55}},{start:{line:152,column:59},end:{line:152,column:96}}],line:152},8:{loc:{start:{line:160,column:4},end:{line:162,column:5}},type:"if",locations:[{start:{line:160,column:4},end:{line:162,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:160},9:{loc:{start:{line:163,column:4},end:{line:266,column:5}},type:"switch",locations:[{start:{line:164,column:6},end:{line:229,column:13}},{start:{line:230,column:6},end:{line:239,column:16}},{start:{line:240,column:6},end:{line:250,column:10}},{start:{line:251,column:6},end:{line:263,column:10}},{start:{line:264,column:6},end:{line:265,column:49}}],line:163},10:{loc:{start:{line:187,column:10},end:{line:195,column:11}},type:"binary-expr",locations:[{start:{line:187,column:10},end:{line:187,column:48}},{start:{line:187,column:68},end:{line:195,column:11}}],line:187},11:{loc:{start:{line:196,column:10},end:{line:204,column:11}},type:"binary-expr",locations:[{start:{line:196,column:10},end:{line:196,column:60}},{start:{line:196,column:80},end:{line:204,column:11}}],line:196},12:{loc:{start:{line:226,column:83},end:{line:226,column:103}},type:"cond-expr",locations:[{start:{line:226,column:93},end:{line:226,column:99}},{start:{line:226,column:102},end:{line:226,column:103}}],line:226},13:{loc:{start:{line:279,column:15},end:{line:279,column:68}},type:"binary-expr",locations:[{start:{line:279,column:15},end:{line:279,column:41}},{start:{line:279,column:45},end:{line:279,column:68}}],line:279},14:{loc:{start:{line:296,column:19},end:{line:296,column:48}},type:"binary-expr",locations:[{start:{line:296,column:19},end:{line:296,column:42}},{start:{line:296,column:46},end:{line:296,column:48}}],line:296},15:{loc:{start:{line:309,column:14},end:{line:309,column:66}},type:"cond-expr",locations:[{start:{line:309,column:45},end:{line:309,column:54}},{start:{line:309,column:57},end:{line:309,column:66}}],line:309}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0,0],8:[0,0],9:[0,0,0,0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx"],names:["layer"],mappings:"AAuNyB,SA2EL,UA1Ed,KADmB;AAvNzB,OAAO,WAAuB;AAC9B,SAAS,SAAS,QAAQ,MAAM,gBAAgB;AAChD,SAAQ,iBAAgB;AACxB,SAAQ,kBAAiB;AACzB,SAAS,mBAAmB;AAE5B,SAAQ,UAAS;AAEjB,OAAO,eAAe;AACtB,OAAO,kBAAkB;AACzB,OAAO,mBAAmB;AAC1B,OAAO,sBAAsB;AAC7B,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,YAAY,sBAAsB;AAC3C,SAAQ,qBAAoB;AAC5B,SAA0B,uBAAuB;AAEjD,SAAS,yBAAyB;AAUlC,SAAS,uBAAuB,GAAqC;AACnE,QAAM,SAAgC,CAAC;AACvC,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,2BAA2B;AAAA,IACpC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,SAAS,CAAC;AAAA,EAC9E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,wBAAwB;AAAA,IACjC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC5E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,wBAAwB;AAAA,IACjC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC5E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,uBAAuB;AAAA,IAChC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,cAAc,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC3E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,uBAAuB;AAAA,IAChC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,cAAc,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC3E,CAAC;AACD,SAAO;AACT;AAEA,SAAS,iBAAiB,MAAkC,GAAqC;AAC/F,MAAI,OAAO,KAAK,GAAG,MAAM,KAAK,MAAM,EAAE,QAAQ,IAAI,IAAI,GAAG;AACvD,WAAO,CAAC;AAAA,EACV;AACA,MAAI,SAAS,UAAU;AACrB,WAAO,uBAAuB,CAAC;AAAA,EACjC;AACA,QAAM,SAAgC,CAAC;AACvC,MAAI,OAAO,KAAK,GAAG,WAAW,IAAI,CAAC,EAAE,SAAS,GAAG;AAC/C,WAAO,KAAK;AAAA,MACV,OAAO,EAAE,kBAAkB;AAAA,MAC3B,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,QAAQ,OAAO,KAAK,GAAG,WAAW,IAAI,CAAC;AAAA,IACzC,CAAC;AAAA,EACH;AACA,MAAI,OAAO,KAAK,GAAG,YAAY,IAAI,CAAC,EAAE,SAAS,GAAG;AAChD,WAAO,KAAK;AAAA,MACV,OAAO,EAAE,mBAAmB;AAAA,MAC5B,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,QAAQ,OAAO,KAAK,GAAG,YAAY,IAAI,CAAC;AAAA,IAC1C,CAAC;AAAA,EACH;AACA,SAAO;AACT;AAEA,SAAS,aAAa,WAAuC,GAA8E;AACzI,QAAM,aAAa;AAAA,IACjB,IAAI;AAAA,IACJ,OAAO,EAAE,OAAO;AAAA,IAChB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,QAAQ;AAAA,IACjB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,aAAa;AAAA,IACtB,MAAM;AAAA,EACR;AACA,SAAO,CAAC,YAAY,WAAW,EAC5B,OAAO,iBAAiB,WAAW,CAAC,CAAC,EACrC,OAAO,CAAC,WAAW,CAAC;AACzB;AAwBA,MAAM,4BAA4B,MAAM,UAAsD;AAAA,EAC5F,OAAO,eAAe;AAAA,IACpB,gBAAgB,MAAM;AAAA,IAAC;AAAA,IACvB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,kBAAkB,MAAM;AAAA,IAAC;AAAA,EAC3B;AAAA,EAEA,YAAY,OAAiC;AAC3C,UAAM,KAAK;AAEX,UAAM,eAAyC,CAAC;AAChD,eAAW,SAAS,aAAa,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC,GAAG;AAChE,mBAAa,MAAM,KAAK,IAAI;AAAA,IAC9B;AAEA,SAAK,QAAQ,EAAE,aAAa;AAAA,EAC9B;AAAA,EAEA,OAAO,yBAAyB,OAA2C,OAAyB;AAClG,UAAM,mBAAmB,EAAE,GAAG,MAAM,aAAa;AAEjD,eAAW,SAAS,iBAAiB,MAAM,MAAM,MAAM,MAAM,CAAC,GAAG;AAC/D,UAAG,EAAE,MAAM,SAAS,mBAAmB;AACrC,yBAAiB,MAAM,KAAK,IAAI;AAAA,MAClC;AAAA,IACF;AAEA,WAAO;AAAA,MACL,cAAc;AAAA,IAChB;AAAA,EACF;AAAA,EAGA,eAAe,OAAwC,UAAkB,UAAe;AACtF,SAAK,MAAM;AAAA,MACT,KAAK,MAAM;AAAA,MACX,eAAe,KAAK,MAAM,OAAO,OAAO,UAAU,QAAQ;AAAA,IAC5D;AAAA,EACF;AAAA,EAEA,cAAc,YAAoB,QAAiB;AACjD,UAAM,sBAAsB;AAAA,MAC1B,GAAG,KAAK,MAAM;AAAA,MACd,CAAC,UAAU,GAAG;AAAA,IAChB;AACA,SAAK,SAAS;AAAA,MACZ,cAAc;AAAA,IAChB,CAAC;AAAA,EACH;AAAA,EAEA,gBAAgB,MAAc,QAAgC;AAC5D,QAAI,UAAU;AACd,QAAG,KAAK,MAAM,MAAM,UAAU;AAC5B,gBAAW,KAAK,MAAM,MAAM,SAAiB,kBAAkB;AAAA,IACjE;AACA,UAAM,EAAC,QAAQ,WAAU,IAAI,KAAK;AAElC,UAAM,YAAwE,CAAC;AAC/E,WAAQ,QAAQ,WAAS;AACvB,UACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS,YAC3B;AACA,kBAAU,MAAM,OAAO,KAAK,GAAG,IAAI;AAAA,UACjC,SAAS,MAAM,OAAO,KAAK;AAAA,QAC7B;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI;AACJ,UAAM,QAAQ,KAAK,MAAM;AACzB,QAAG,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,SAAS,MAAM,MAAM,GAAG;AACzE,uBAAiB,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAE;AAAA,IACpD;AAEA,YAAO,MAAM;AAAA,MACb,KAAK;AAAS,eAAO,qBAAC,SACpB;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,OAAM;AAAA,cACN,OAAO,UAAU;AAAA,cACjB,UAAU,WAAS,KAAK,MAAM,gBAAgB,KAAK,MAAM,YAAY,KAAK,MAAM,MAAM,IAAI,KAAK;AAAA;AAAA,UACjG;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,UAAU;AAAA,cACV,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,aAAW,KAAK,MAAM;AAAA,gBAC9B,KAAK,MAAM;AAAA,gBACX,WAAW,KAAK,MAAM,OAAO,OAAO;AAAA,cACtC;AAAA;AAAA,UACF;AAAA,UACC,KAAK,MAAM,MAAM,SAAS,gBAAgB;AAAA,YAAC;AAAA;AAAA,cAC1C,OAAO,UAAU;AAAA,cACjB,WAAW,OAAO,KAAK,KAAK,MAAM,OAAQ;AAAA,cAC1C,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,UACtD;AAAA,UAEC,CAAC,kBAAkB,SAAS,KAAK,MAAM,MAAM,IAAI,KAChD;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU,cAAc;AAAA,cAC/B;AAAA,cACA,OAAQ,KAAK,MAAM,MAAc,cAAc;AAAA,cAC/C,UAAU,OAAK,KAAK,eAAe,MAAM,gBAAgB,CAAC;AAAA;AAAA,UAC5D;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,eAAe,YAAY,oBAAoB,KAAK,KAAM,SAAY,CAAC;AAAA;AAAA,UAC7F;AAAA,WACF;AAAA,MACA,KAAK;AAAU,eAAO,oBAAC,SACrB,8BAAC,SAAI,WAAU,kCACb;AAAA,UAAC;AAAA;AAAA,YACC,QAAQ;AAAA,YACR,QAAS,KAAK,MAAM,MAAc;AAAA,YAClC,YAAY,KAAK,MAAM,aAAc,KAAK,MAAM,MAAc,cAAc,CAAC;AAAA,YAC7E,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,QACtD,GACF,GACF;AAAA,MACA,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,QAAQ;AAAA,YACR,OAAO,KAAK,MAAM;AAAA,YAClB,aAAa;AAAA,YACb,MAAM,KAAK,MAAM;AAAA,YACjB,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,QACzC;AAAA,MACF,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,CAACA,WAAU;AACnB,mBAAK,MAAM;AAAA,gBACT,KAAK,MAAM;AAAA,gBACXA;AAAA,cACF;AAAA,YACF;AAAA;AAAA,QACF;AAAA,MACF;AAAS,eAAO,gCAAE;AAAA,IAClB;AAAA,EACF;AAAA,EAEA,UAAU,QAAgB;AACxB,SAAK,MAAM,YAAY;AAAA,MACrB,UAAU,KAAK,MAAM;AAAA,MACrB,UAAU,KAAK,MAAM,aAAW;AAAA,IAClC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,UAAM,WAAqB,CAAC;AAC5B,UAAM,YAAY,KAAK,MAAM,MAAM;AACnC,UAAM,SAAS,aAAa,WAAW,CAAC,EAAE,OAAO,WAAS;AACxD,aAAO,EAAE,cAAc,gBAAgB,MAAM,SAAS;AAAA,IACxD,CAAC,EAAE,IAAI,WAAS;AACd,YAAM,UAAU,MAAM;AACtB,eAAS,KAAK,OAAO;AACrB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,eAAa,MAAM;AAAA,UACnB,IAAI;AAAA,UAEJ,OAAO,MAAM;AAAA,UACb,UAAU,KAAK,MAAM,aAAa,MAAM,KAAK;AAAA,UAC7C,gBAAgB,KAAK,cAAc,KAAK,MAAM,MAAM,KAAK;AAAA,UAExD,eAAK,gBAAgB,MAAM,MAAM,MAAM,MAAM;AAAA;AAAA,QALzC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAE3C,UAAM,QAKD;AAAA,MACH,QAAQ;AAAA,QACN,MAAM,EAAE,QAAQ;AAAA,QAChB,SAAS,MAAM,KAAK,MAAM,eAAe,KAAK,MAAM,UAAU;AAAA,QAC9D,OAAO;AAAA,MACT;AAAA,MACA,WAAW;AAAA,QACT,MAAM,EAAE,WAAW;AAAA,QACnB,SAAS,MAAM,KAAK,MAAM,YAAY,KAAK,MAAM,UAAU;AAAA,QAC3D,OAAO;AAAA,MACT;AAAA,MACA,MAAM;AAAA,QACJ,MAAO,OAAO,eAAe,SAAU,EAAE,MAAM,IAAI,EAAE,MAAM;AAAA,QAC3D,SAAS,MAAM,KAAK,MAAM,wBAAwB,KAAK,MAAM,UAAU;AAAA,QACvE,OAAO;AAAA,MACT;AAAA,MACA,aAAa;AAAA,QACX,MAAM,EAAE,eAAe;AAAA,QACvB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,EAAE;AAAA,QAChC,OAAO;AAAA,MACT;AAAA,MACA,eAAe;AAAA,QACb,MAAM,EAAE,iBAAiB;AAAA,QACzB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,CAAE;AAAA,QAChC,OAAO;AAAA,MACT;AAAA,IACF;AAEA,aAAS,gBAAgB,IAAY,OAA6B;AAChE,YAAM,gBAAgB;AACtB,YAAM,EAAE,EAAE,QAAQ;AAAA,IACpB;AAEA,WAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,QAAQ,OAAO,UAAS,GACjE;AAAA,MAAC;AAAA;AAAA,QAAQ,WAAU;AAAA,QACjB,MAAK;AAAA,QACL,cAAY,EAAE,cAAc;AAAA,QAE5B;AAAA,8BAAC,YACC,+BAAC,SAAI,WAAU,gBACb;AAAA,gCAAC,QAAG,WAAU,uBACX,YAAE,sBAAsB,EAAE,SAAS,cAAc,KAAK,MAAM,MAAM,EAAE,EAAE,CAAC,GAC1E;AAAA,YACA,oBAAC,SAAI,WAAU,sBACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,aAAa;AAAA,gBACb,kBAAkB;AAAA,gBAElB;AAAA;AAAA,oBAAC;AAAA;AAAA,sBACC,IAAG;AAAA,sBACH,eAAY;AAAA,sBACZ,WAAU;AAAA,sBACV,OAAO;AAAA,sBACP,8BAAC,cAAW,WAAU,0BAAyB;AAAA;AAAA,kBACjD;AAAA,kBACA,oBAAC,QACC,8BAAC,QAAG,WAAU,mBACX,iBAAO,KAAK,KAAK,EAAE,IAAI,CAAC,OAAO;AAC9B,0BAAM,OAAO,MAAM,EAAE;AACrB,2BAAO,oBAAC,QACN,8BAAC,YAAS,OAAO,IAAI,WAAU,yBAAwB,eAAa,KAAK,OACtE,eAAK,MACR,KAHc,EAIhB;AAAA,kBACF,CAAC,GACH,GACF;AAAA;AAAA;AAAA,YACF,GACF;AAAA,aACF,GAEF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,uBAAuB;AAAA,cACvB,mBAAmB;AAAA,cACnB,aAAa;AAAA,cAEZ;AAAA;AAAA,UACH;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3841487cdf145c8b2ca211ec85dc555aa6f1c4bb"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return pn=function(){return l},l}pn();function Bce(n){pn().f[0]++;const e=(pn().s[0]++,[]);return pn().s[1]++,e.push({title:n("General layout properties"),id:"General_layout_properties",type:"properties",fields:Object.keys(xf.layout_symbol).filter(t=>(pn().f[1]++,pn().s[2]++,t.startsWith("symbol-")))}),pn().s[3]++,e.push({title:n("Text layout properties"),id:"Text_layout_properties",type:"properties",fields:Object.keys(xf.layout_symbol).filter(t=>(pn().f[2]++,pn().s[4]++,t.startsWith("text-")))}),pn().s[5]++,e.push({title:n("Icon layout properties"),id:"Icon_layout_properties",type:"properties",fields:Object.keys(xf.layout_symbol).filter(t=>(pn().f[3]++,pn().s[6]++,t.startsWith("icon-")))}),pn().s[7]++,e.push({title:n("Text paint properties"),id:"Text_paint_properties",type:"properties",fields:Object.keys(xf.paint_symbol).filter(t=>(pn().f[4]++,pn().s[8]++,t.startsWith("text-")))}),pn().s[9]++,e.push({title:n("Icon paint properties"),id:"Icon_paint_properties",type:"properties",fields:Object.keys(xf.paint_symbol).filter(t=>(pn().f[5]++,pn().s[10]++,t.startsWith("icon-")))}),pn().s[11]++,e}function aj(n,e){if(pn().f[6]++,pn().s[12]++,Object.keys(xf.layer.type.values).indexOf(n)<0)return pn().b[0][0]++,pn().s[13]++,[];if(pn().b[0][1]++,pn().s[14]++,n==="symbol")return pn().b[1][0]++,pn().s[15]++,Bce(e);pn().b[1][1]++;const t=(pn().s[16]++,[]);return pn().s[17]++,Object.keys(xf["paint_"+n]).length>0?(pn().b[2][0]++,pn().s[18]++,t.push({title:e("Paint properties"),id:"Paint_properties",type:"properties",fields:Object.keys(xf["paint_"+n])})):pn().b[2][1]++,pn().s[19]++,Object.keys(xf["layout_"+n]).length>0?(pn().b[3][0]++,pn().s[20]++,t.push({title:e("Layout properties"),id:"Layout_properties",type:"properties",fields:Object.keys(xf["layout_"+n])})):pn().b[3][1]++,pn().s[21]++,t}function vK(n,e){pn().f[7]++;const t=(pn().s[22]++,{id:"layer",title:e("Layer"),type:"layer"}),i=(pn().s[23]++,{id:"filter",title:e("Filter"),type:"filter"}),r=(pn().s[24]++,{id:"jsoneditor",title:e("JSON Editor"),type:"jsoneditor"});return pn().s[25]++,[t,i].concat(aj(n,e)).concat([r])}class Oce extends ni.Component{static defaultProps=(pn().s[26]++,{onLayerChanged:()=>{pn().f[8]++},onLayerIdChange:()=>{pn().f[9]++},onLayerDestroyed:()=>{pn().f[10]++}});constructor(e){pn().f[11]++,pn().s[27]++,super(e);const t=(pn().s[28]++,{});pn().s[29]++;for(const i of vK(this.props.layer.type,e.t))pn().s[30]++,t[i.title]=!0;pn().s[31]++,this.state={editorGroups:t}}static getDerivedStateFromProps(e,t){pn().f[12]++;const i=(pn().s[32]++,{...t.editorGroups});pn().s[33]++;for(const r of aj(e.layer.type,e.t))pn().s[34]++,r.title in i?pn().b[4][1]++:(pn().b[4][0]++,pn().s[35]++,i[r.title]=!0);return pn().s[36]++,{editorGroups:i}}changeProperty(e,t,i){pn().f[13]++,pn().s[37]++,this.props.onLayerChanged(this.props.layerIndex,qae(this.props.layer,e,t,i))}onGroupToggle(e,t){pn().f[14]++;const i=(pn().s[38]++,{...this.state.editorGroups,[e]:t});pn().s[39]++,this.setState({editorGroups:i})}renderGroupType(e,t){pn().f[15]++;let i=(pn().s[40]++,"");pn().s[41]++,this.props.layer.metadata?(pn().b[5][0]++,pn().s[42]++,i=this.props.layer.metadata["maputnik:comment"]):pn().b[5][1]++;const{errors:r,layerIndex:a}=(pn().s[43]++,this.props),l=(pn().s[44]++,{});pn().s[45]++,r.forEach(C=>{pn().f[16]++,pn().s[46]++,pn().b[7][0]++,C.parsed&&(pn().b[7][1]++,C.parsed.type==="layer")&&(pn().b[7][2]++,C.parsed.data.index==a)?(pn().b[6][0]++,pn().s[47]++,l[C.parsed.data.key]={message:C.parsed.data.message}):pn().b[6][1]++});let o;const m=(pn().s[48]++,this.props.layer);switch(pn().s[49]++,Object.prototype.hasOwnProperty.call(this.props.sources,m.source)?(pn().b[8][0]++,pn().s[50]++,o=this.props.sources[m.source].layers):pn().b[8][1]++,pn().s[51]++,e){case"layer":return pn().b[9][0]++,pn().s[52]++,ce.jsxs("div",{children:[ce.jsx(KN,{value:this.props.layer.id,wdKey:"layer-editor.layer-id",error:l.id,onChange:C=>(pn().f[17]++,pn().s[53]++,this.props.onLayerIdChange(this.props.layerIndex,this.props.layer.id,C))}),ce.jsx(PN,{disabled:!0,error:l.type,value:this.props.layer.type,onChange:C=>(pn().f[18]++,pn().s[54]++,this.props.onLayerChanged(this.props.layerIndex,Yae(this.props.layer,C)))}),(pn().b[10][0]++,this.props.layer.type!=="background"&&(pn().b[10][1]++,ce.jsx(eG,{error:l.source,sourceIds:Object.keys(this.props.sources),value:this.props.layer.source,onChange:C=>(pn().f[19]++,pn().s[55]++,this.changeProperty(null,"source",C))}))),(pn().b[11][0]++,!vB.includes(this.props.layer.type)&&(pn().b[11][1]++,ce.jsx(tG,{error:l["source-layer"],sourceLayerIds:o,value:this.props.layer["source-layer"],onChange:C=>(pn().f[20]++,pn().s[56]++,this.changeProperty(null,"source-layer",C))}))),ce.jsx(xce,{error:l.minzoom,value:this.props.layer.minzoom,onChange:C=>(pn().f[21]++,pn().s[57]++,this.changeProperty(null,"minzoom",C))}),ce.jsx(Sce,{error:l.maxzoom,value:this.props.layer.maxzoom,onChange:C=>(pn().f[22]++,pn().s[58]++,this.changeProperty(null,"maxzoom",C))}),ce.jsx(Ece,{error:l.comment,value:i,onChange:C=>(pn().f[23]++,pn().s[59]++,this.changeProperty("metadata","maputnik:comment",C==""?(pn().b[12][0]++,void 0):(pn().b[12][1]++,C)))})]});case"filter":return pn().b[9][1]++,pn().s[60]++,ce.jsx("div",{children:ce.jsx("div",{className:"maputnik-filter-editor-wrapper",children:ce.jsx(mle,{errors:l,filter:this.props.layer.filter,properties:this.props.vectorLayers[this.props.layer["source-layer"]],onChange:C=>(pn().f[24]++,pn().s[61]++,this.changeProperty(null,"filter",C))})})});case"properties":return pn().b[9][2]++,pn().s[62]++,ce.jsx(yce,{errors:l,layer:this.props.layer,groupFields:t,spec:this.props.spec,onChange:this.changeProperty.bind(this)});case"jsoneditor":return pn().b[9][3]++,pn().s[63]++,ce.jsx(T8,{layer:this.props.layer,onChange:C=>{pn().f[25]++,pn().s[64]++,this.props.onLayerChanged(this.props.layerIndex,C)}});default:return pn().b[9][4]++,pn().s[65]++,ce.jsx(ce.Fragment,{})}}moveLayer(e){pn().f[26]++,pn().s[66]++,this.props.onMoveLayer({oldIndex:this.props.layerIndex,newIndex:this.props.layerIndex+e})}render(){pn().f[27]++;const e=(pn().s[67]++,this.props.t),t=(pn().s[68]++,[]),i=(pn().s[69]++,this.props.layer.type),r=(pn().s[70]++,vK(i,e).filter(m=>(pn().f[28]++,pn().s[71]++,pn().b[13][0]++,!(i==="background"&&(pn().b[13][1]++,m.type==="source")))).map(m=>{pn().f[29]++;const C=(pn().s[72]++,m.id);return pn().s[73]++,t.push(C),pn().s[74]++,ce.jsx(_ce,{"data-wd-key":m.title,id:C,title:m.title,isActive:this.state.editorGroups[m.title],onActiveToggle:this.onGroupToggle.bind(this,m.title),children:this.renderGroupType(m.type,m.fields)},C)})),a=(pn().s[75]++,pn().b[14][0]++,this.props.layer.layout||(pn().b[14][1]++,{})),l=(pn().s[76]++,{delete:{text:e("Delete"),handler:()=>(pn().f[30]++,pn().s[77]++,this.props.onLayerDestroy(this.props.layerIndex)),wdKey:"menu-delete-layer"},duplicate:{text:e("Duplicate"),handler:()=>(pn().f[31]++,pn().s[78]++,this.props.onLayerCopy(this.props.layerIndex)),wdKey:"menu-duplicate-layer"},hide:{text:a.visibility==="none"?(pn().b[15][0]++,e("Show")):(pn().b[15][1]++,e("Hide")),handler:()=>(pn().f[32]++,pn().s[79]++,this.props.onLayerVisibilityToggle(this.props.layerIndex)),wdKey:"menu-hide-layer"},moveLayerUp:{text:e("Move layer up"),disabled:this.props.isFirstLayer,handler:()=>(pn().f[33]++,pn().s[80]++,this.moveLayer(-1)),wdKey:"menu-move-layer-up"},moveLayerDown:{text:e("Move layer down"),disabled:this.props.isLastLayer,handler:()=>(pn().f[34]++,pn().s[81]++,this.moveLayer(1)),wdKey:"menu-move-layer-down"}});function o(m,C){pn().f[35]++,pn().s[82]++,C.stopPropagation(),pn().s[83]++,l[m].handler()}return pn().s[84]++,ce.jsx(Sv.Provider,{value:{size:"14px",color:"#8e8e8e"},children:ce.jsxs("section",{className:"maputnik-layer-editor",role:"main","aria-label":e("Layer editor"),children:[ce.jsx("header",{children:ce.jsxs("div",{className:"layer-header",children:[ce.jsx("h2",{className:"layer-header__title",children:e("Layer: {{layerId}}",{layerId:oj(this.props.layer.id)})}),ce.jsx("div",{className:"layer-header__info",children:ce.jsxs(cx.Wrapper,{className:"more-menu",onSelection:o,closeOnSelection:!1,children:[ce.jsx(cx.Button,{id:"skip-target-layer-editor","data-wd-key":"skip-target-layer-editor",className:"more-menu__button",title:"Layer options",children:ce.jsx(u$,{className:"more-menu__button__svg"})}),ce.jsx(cx.Menu,{children:ce.jsx("ul",{className:"more-menu__menu",children:Object.keys(l).map(m=>{pn().f[36]++;const C=(pn().s[85]++,l[m]);return pn().s[86]++,ce.jsx("li",{children:ce.jsx(cx.MenuItem,{value:m,className:"more-menu__menu__item","data-wd-key":C.wdKey,children:C.text})},m)})})})]})})]})}),ce.jsx(vse,{allowMultipleExpanded:!0,allowZeroExpanded:!0,preExpanded:t,children:r})]})})}}const Ice=(pn().s[87]++,ss()(Oce));var CK=function(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,a;i<r;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return n.concat(a||Array.prototype.slice.call(e))},Tce=function(){function n(e,t,i){this.name=e,this.version=t,this.os=i,this.type="browser"}return n}(),kce=function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n}(),Dce=function(){function n(e,t,i,r){this.name=e,this.version=t,this.os=i,this.bot=r,this.type="bot-device"}return n}(),Rce=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),Pce=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),Kce=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Uce=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,_K=3,Lce=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Kce]],bK=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Fce(n){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Pce:typeof navigator<"u"?Nce(navigator.userAgent):jce()}function zce(n){return n!==""&&Lce.reduce(function(e,t){var i=t[0],r=t[1];if(e)return e;var a=r.exec(n);return!!a&&[i,a]},!1)}function Nce(n){var e=zce(n);if(!e)return null;var t=e[0],i=e[1];if(t==="searchbot")return new Rce;var r=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);r?r.length<_K&&(r=CK(CK([],r,!0),Wce(_K-r.length),!0)):r=[];var a=r.join("."),l=Gce(n),o=Uce.exec(n);return o&&o[1]?new Dce(t,a,l,o[1]):new Tce(t,a,l)}function Gce(n){for(var e=0,t=bK.length;e<t;e++){var i=bK[e],r=i[0],a=i[1],l=a.exec(n);if(l)return r}return null}function jce(){var n=typeof process<"u"&&process.version;return n?new kce(process.version.slice(1)):null}function Wce(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}const Qce="maputnik",Yce="3.0.0",xK={name:Qce,version:Yce},qce="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='1200'%20height='1200'%20viewBox='0%200%20100%20100'%3e%3cg%20class='map'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--map__main'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line1'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line2'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line3'%20fill='none'%3e%3c/use%3e%3c/g%3e%3cg%20class='palette'%3e%3cuse%20xlink:href='%23ref-1--palette__main'%20fill='%23fff'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__inner'%20fill='none'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle5'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle4'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle3'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle2'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle1'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle0'%20fill='%234eba6f'%3e%3c/use%3e%3c/g%3e%3cg%20class='brush'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--brush__bottom'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--brush__top'%20fill='%23fff'%3e%3c/use%3e%3c/g%3e%3cdefs%3e%3cpath%20id='ref-1--map__main'%20stroke-width='2.366'%20stroke-linejoin='round'%20d='M18.84%207.717l15.44%207.542%2015.75-7.762%2015.7%207.857L81.005%207.67%2096.31%2054.052%2073.598%2062.12%2050.93%2053.872l-25.1%208.066-22.668-8.066z'%3e%3c/path%3e%3cpath%20id='ref-1--map__line1'%20d='M65.556%2015.07l7.647%2046.838'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line2'%20d='M50.261%207.422l.717%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line3'%20d='M34.011%2015.07l-8.603%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--palette__main'%20stroke-width='2.3'%20d='M47.352%2030.887c7.993.226%2016.934%209.725%2017.954%2015.25%201.02%205.527-.743%2011.125-4.298%2013.875-3.554%202.75-8.6%202.905-8.723%208.302-.097%204.237%208.457%208.5%208.088%2015.653-.406%207.857-15.508%2013.15-30.943%206.102-8.556-3.906-14.249-13.653-13.385-26.238C16.833%2052.334%2022.32%2043.658%2027.382%2039c5.977-5.503%2011.977-8.337%2019.97-8.112z'%3e%3c/path%3e%3ccircle%20id='ref-1--palette__inner'%20stroke-width='2.3'%20cx='41.873'%20cy='61.901'%20r='6.389'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle5'%20cy='44.56'%20cx='54.347'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle4'%20cx='40.443'%20cy='41.555'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle3'%20r='4.336'%20cy='51.102'%20cx='29.651'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle2'%20cx='25.293'%20cy='65.836'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle1'%20r='4.336'%20cy='79.326'%20cx='32.764'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle0'%20cx='46.669'%20cy='80.571'%20r='4.336'%3e%3c/circle%3e%3cpath%20id='ref-1--brush__bottom'%20d='M76.333%2089.333c-1.645-9.794-4.375-35.26-4.32-37.887.056-2.627%202.52-4.34%205.36-4.317%202.842.022%205.098%201.87%205.314%204.27.107%201.2-1.576%2028.06-2.318%2037.844-.332%204.374-3.31%204.413-4.036.09z'%20stroke-width='2.3'%20stroke-linejoin='round'%3e%3c/path%3e%3cpath%20id='ref-1--brush__top'%20stroke-linejoin='round'%20stroke-width='2.3'%20d='M77.184%2026.428s-5.621%207.02-5.621%2011.978c0%204.957%202.206%206.878%205.81%206.878%203.606%200%205.148-1.708%205.29-6.736.142-5.028-5.479-12.12-5.479-12.12z'%3e%3c/path%3e%3c/defs%3e%3c/svg%3e";function jr(){var n="/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",e="8a543ce29d3fad4d3fcfcf304cf6316fa3ea9488",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",statementMap:{0:{start:{line:18,column:16},end:{line:18,column:24}},1:{start:{line:19,column:41},end:{line:19,column:89}},2:{start:{line:22,column:4},end:{line:22,column:107}},3:{start:{line:27,column:4},end:{line:37,column:6}},4:{start:{line:42,column:4},end:{line:49,column:6}},5:{start:{line:54,column:4},end:{line:62,column:6}},6:{start:{line:66,column:10},end:{line:74,column:3}},7:{start:{line:76,column:4},end:{line:76,column:34}},8:{start:{line:79,column:4},end:{line:79,column:40}},9:{start:{line:81,column:11},end:{line:88,column:3}},10:{start:{line:82,column:4},end:{line:87,column:5}},11:{start:{line:83,column:6},end:{line:83,column:59}},12:{start:{line:85,column:17},end:{line:85,column:65}},13:{start:{line:86,column:6},end:{line:86,column:17}},14:{start:{line:90,column:14},end:{line:90,column:26}},15:{start:{line:91,column:18},end:{line:127,column:5}},16:{start:{line:128,column:24},end:{line:130,column:6}},17:{start:{line:129,column:6},end:{line:129,column:45}},18:{start:{line:131,column:4},end:{line:249,column:12}},19:{start:{line:142,column:33},end:{line:142,column:58}},20:{start:{line:151,column:33},end:{line:151,column:60}},21:{start:{line:160,column:33},end:{line:160,column:51}},22:{start:{line:212,column:33},end:{line:212,column:69}},23:{start:{line:215,column:38},end:{line:215,column:59}},24:{start:{line:216,column:20},end:{line:216,column:157}},25:{start:{line:218,column:115},end:{line:218,column:148}},26:{start:{line:219,column:20},end:{line:219,column:133}},27:{start:{line:235,column:33},end:{line:235,column:74}},28:{start:{line:238,column:18},end:{line:238,column:94}},29:{start:{line:252,column:19},end:{line:252,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:21,column:2},end:{line:21,column:3}},loc:{start:{line:21,column:11},end:{line:23,column:3}},line:21},1:{name:"(anonymous_1)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:11},end:{line:38,column:3}},line:26},2:{name:"(anonymous_2)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:50,column:3}},line:41},3:{name:"(anonymous_3)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:63,column:3}},line:53},4:{name:"(anonymous_4)",decl:{start:{line:75,column:2},end:{line:75,column:3}},loc:{start:{line:75,column:23},end:{line:77,column:3}},line:75},5:{name:"(anonymous_5)",decl:{start:{line:78,column:2},end:{line:78,column:3}},loc:{start:{line:78,column:28},end:{line:80,column:3}},line:78},6:{name:"(anonymous_6)",decl:{start:{line:81,column:11},end:{line:81,column:12}},loc:{start:{line:81,column:23},end:{line:88,column:3}},line:81},7:{name:"(anonymous_7)",decl:{start:{line:89,column:2},end:{line:89,column:3}},loc:{start:{line:89,column:11},end:{line:250,column:3}},line:89},8:{name:"(anonymous_8)",decl:{start:{line:128,column:35},end:{line:128,column:36}},loc:{start:{line:128,column:45},end:{line:130,column:5}},line:128},9:{name:"(anonymous_9)",decl:{start:{line:142,column:25},end:{line:142,column:26}},loc:{start:{line:142,column:33},end:{line:142,column:58}},line:142},10:{name:"(anonymous_10)",decl:{start:{line:151,column:25},end:{line:151,column:26}},loc:{start:{line:151,column:33},end:{line:151,column:60}},line:151},11:{name:"(anonymous_11)",decl:{start:{line:160,column:25},end:{line:160,column:26}},loc:{start:{line:160,column:33},end:{line:160,column:51}},line:160},12:{name:"(anonymous_12)",decl:{start:{line:212,column:26},end:{line:212,column:27}},loc:{start:{line:212,column:33},end:{line:212,column:69}},line:212},13:{name:"(anonymous_13)",decl:{start:{line:215,column:31},end:{line:215,column:32}},loc:{start:{line:215,column:38},end:{line:215,column:59}},line:215},14:{name:"(anonymous_14)",decl:{start:{line:215,column:65},end:{line:215,column:66}},loc:{start:{line:215,column:75},end:{line:217,column:19}},line:215},15:{name:"(anonymous_15)",decl:{start:{line:218,column:108},end:{line:218,column:109}},loc:{start:{line:218,column:115},end:{line:218,column:148}},line:218},16:{name:"(anonymous_16)",decl:{start:{line:218,column:154},end:{line:218,column:155}},loc:{start:{line:218,column:164},end:{line:220,column:19}},line:218},17:{name:"(anonymous_17)",decl:{start:{line:235,column:26},end:{line:235,column:27}},loc:{start:{line:235,column:33},end:{line:235,column:74}},line:235},18:{name:"(anonymous_18)",decl:{start:{line:237,column:65},end:{line:237,column:66}},loc:{start:{line:237,column:83},end:{line:239,column:17}},line:237}},branchMap:{0:{loc:{start:{line:82,column:4},end:{line:87,column:5}},type:"if",locations:[{start:{line:82,column:4},end:{line:87,column:5}},{start:{line:84,column:11},end:{line:87,column:5}}],line:82}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx"],names:[],mappings:"AAgCW,cAyLG,YAzLH;AAhCX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,cAAa;AAErB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AACP,OAAO,aAAa;AAEpB,OAAO,kBAAkB;AACzB,SAAS,uBAAwC;AACjD,SAAS,0BAA0B;AAInC,MAAM,UAAU,OAAO;AACvB,MAAM,mCAAmC,CAAC,UAAU,SAAS,EAAE,QAAQ,QAAS,IAAI,IAAI;AAQxF,MAAM,iBAAiB,MAAM,UAAyB;AAAA,EACpD,SAAS;AACP,WAAO,oBAAC,UAAK,WAAU,sBAAsB,eAAK,MAAM,UAAS;AAAA,EACnE;AACF;AASA,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAW,WAAW,yBAAyB,KAAK,MAAM,SAAS;AAAA,QACnE,MAAM,KAAK,MAAM;AAAA,QACjB,KAAI;AAAA,QACJ,QAAO;AAAA,QACP,eAAY;AAAA,QAEX,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAOA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QAEvB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAQA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QAEnB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAmBA,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,QAAQ;AAAA,IACN,QAAQ;AAAA,MACN,UAAU;AAAA,MACV,SAAS;AAAA,MACT,MAAM;AAAA,MACN,KAAK;AAAA,MACL,QAAQ;AAAA,IACV;AAAA,EACF;AAAA,EAEA,gBAAgB,KAAe;AAC7B,SAAK,MAAM,cAAc,GAAG;AAAA,EAC9B;AAAA,EAEA,qBAAqB,KAAa;AAChC,SAAK,MAAM,KAAK,eAAe,GAAG;AAAA,EACpC;AAAA,EAEA,SAAS,CAAC,WAAmB;AAC3B,QAAI,WAAW,OAAO;AACpB,MAAC,SAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,IAC5E,OACK;AACH,YAAM,KAAK,SAAS,cAAc,kBAAgB,MAAM;AACxD,SAAG,MAAM;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,QAAQ;AAAA,MACZ;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,KAAK;AAAA,MAChB;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,SAAS;AAAA,QAClB,UAAU,KAAK,MAAM,aAAa;AAAA,MACpC;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,qBAAqB;AAAA,QAC9B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,sBAAsB;AAAA,QAC/B,UAAU,CAAC;AAAA,MACb;AAAA,IACF;AAEA,UAAM,cAAc,MAAM,KAAK,CAAC,SAAS;AACvC,aAAO,KAAK,OAAO,KAAK,MAAM;AAAA,IAChC,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,oBACpB,+BAAC,SAAI,WAAU,2BACb;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UAGV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,YAAY;AAAA,gBAEtC,YAAE,aAAa;AAAA;AAAA,YAClB;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,cAAc;AAAA,gBAExC,YAAE,cAAc;AAAA;AAAA,YACnB;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,KAAK;AAAA,gBAE/B,YAAE,UAAU;AAAA;AAAA,YACf;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,QAAO;AAAA,gBACP,KAAI;AAAA,gBACJ,MAAK;AAAA,gBAEL;AAAA,sCAAC,SAAI,KAAK,cAAc,KAAK,EAAE,oBAAoB,GAAG;AAAA,kBACtD,qBAAC,QACC;AAAA,wCAAC,UAAK,WAAU,yBAAyB,kBAAQ,MAAK;AAAA,oBACtD,qBAAC,UAAK,WAAU,4BAA2B;AAAA;AAAA,sBAAE,QAAQ;AAAA,uBAAQ;AAAA,qBAC/D;AAAA;AAAA;AAAA,YACF;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,6BAA4B,MAAK,cAAa,cAAW,WACtE;AAAA,6BAAC,iBAAc,OAAM,YAAW,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,MAAM,GACjF;AAAA,8BAAC,mBAAgB;AAAA,UACjB,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,QACA,qBAAC,iBAAc,OAAM,cAAa,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,QAAQ,GACrF;AAAA,8BAAC,UAAO;AAAA,UACR,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,QACA,qBAAC,iBAAc,OAAM,eAAc,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,SAAS,GACvF;AAAA,8BAAC,YAAS;AAAA,UACV,oBAAC,YAAU,YAAE,cAAc,GAAE;AAAA,WAC/B;AAAA,QACA,qBAAC,iBAAc,OAAM,gBAAe,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,UAAU,GACzF;AAAA,8BAAC,cAAW;AAAA,UACZ,oBAAC,YAAU,YAAE,gBAAgB,GAAE;AAAA,WACjC;AAAA,QAEA,qBAAC,iBAAc,OAAM,eACnB;AAAA,8BAAC,gBAAa;AAAA,UACd,qBAAC,YAAU;AAAA,cAAE,MAAM;AAAA,YACjB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,gBAAgB,EAAE,OAAO,KAAiB;AAAA,gBAChE,OAAO,aAAa;AAAA,gBAEnB;AAAA,wBAAM,OAAO,OAAK,EAAE,UAAU,SAAS,EAAE,IAAI,CAAC,SAAS;AACtD,2BACE,oBAAC,YAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAAU,eAAa,KAAK,IAC9E,eAAK,SADK,KAAK,EAElB;AAAA,kBAEJ,CAAC;AAAA,kBACD,oBAAC,cAAS,OAAO,EAAE,qBAAqB,GACrC,gBAAM,OAAO,OAAK,EAAE,UAAU,qBAAqB,EAAE,IAAI,CAAC,SAAS;AAClE,2BACE,oBAAC,YAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAClD,eAAK,SADK,KAAK,EAElB;AAAA,kBAEJ,CAAC,GACH;AAAA;AAAA;AAAA,YACF;AAAA,aACF;AAAA,WACF;AAAA,QAEA,qBAAC,iBAAc,OAAM,gBACnB;AAAA,8BAAC,cAAW;AAAA,UACZ,qBAAC,YAAS;AAAA;AAAA,YACR;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,qBAAqB,EAAE,OAAO,KAAK;AAAA,gBACzD,OAAO,KAAK,MAAM,KAAK;AAAA,gBAEtB,iBAAO,QAAQ,kBAAkB,EAAE,IAAI,CAAC,CAAC,MAAM,IAAI,MAAM;AACxD,yBACE,oBAAC,YAAkB,OAAO,MACvB,kBADU,IAEb;AAAA,gBAEJ,CAAC;AAAA;AAAA,YACH;AAAA,aACF;AAAA,WACF;AAAA,QAEA,qBAAC,eAAY,MAAM,6CACjB;AAAA,8BAAC,iBAAc;AAAA,UACf,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8a543ce29d3fad4d3fcfcf304cf6316fa3ea9488"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return jr=function(){return l},l}jr();const Hce=(jr().s[0]++,Fce()),gx=(jr().s[1]++,["chrome","firefox"].indexOf(Hce.name)>-1);class yg extends ni.Component{render(){return jr().f[0]++,jr().s[2]++,ce.jsx("span",{className:"maputnik-icon-text",children:this.props.children})}}class Vce extends ni.Component{render(){return jr().f[1]++,jr().s[3]++,ce.jsx("a",{className:e0("maputnik-toolbar-link",this.props.className),href:this.props.href,rel:"noopener noreferrer",target:"_blank","data-wd-key":"toolbar:link",children:this.props.children})}}class MK extends ni.Component{render(){return jr().f[2]++,jr().s[4]++,ce.jsx("div",{className:"maputnik-toolbar-select","data-wd-key":this.props.wdKey,children:this.props.children})}}class yx extends ni.Component{render(){return jr().f[3]++,jr().s[5]++,ce.jsx("button",{className:"maputnik-toolbar-action","data-wd-key":this.props.wdKey,onClick:this.props.onClick,children:this.props.children})}}class $ce extends ni.Component{state=(jr().s[6]++,{isOpen:{settings:!1,sources:!1,open:!1,add:!1,export:!1}});handleSelection(e){jr().f[4]++,jr().s[7]++,this.props.onSetMapState(e)}handleLanguageChange(e){jr().f[5]++,jr().s[8]++,this.props.i18n.changeLanguage(e)}onSkip=(jr().s[9]++,e=>{if(jr().f[6]++,jr().s[10]++,e==="map")jr().b[0][0]++,jr().s[11]++,document.querySelector(".maplibregl-canvas").focus();else{jr().b[0][1]++;const t=(jr().s[12]++,document.querySelector("#skip-target-"+e));jr().s[13]++,t.focus()}});render(){jr().f[7]++;const e=(jr().s[14]++,this.props.t),t=(jr().s[15]++,[{id:"map",group:"general",title:e("Map")},{id:"inspect",group:"general",title:e("Inspect"),disabled:this.props.renderer==="ol"},{id:"filter-deuteranopia",group:"color-accessibility",title:e("Deuteranopia filter"),disabled:!gx},{id:"filter-protanopia",group:"color-accessibility",title:e("Protanopia filter"),disabled:!gx},{id:"filter-tritanopia",group:"color-accessibility",title:e("Tritanopia filter"),disabled:!gx},{id:"filter-achromatopsia",group:"color-accessibility",title:e("Achromatopsia filter"),disabled:!gx}]),i=(jr().s[16]++,t.find(r=>(jr().f[8]++,jr().s[17]++,r.id===this.props.mapState)));return jr().s[18]++,ce.jsx("nav",{className:"maputnik-toolbar",children:ce.jsxs("div",{className:"maputnik-toolbar__inner",children:[ce.jsxs("div",{className:"maputnik-toolbar-logo-container",children:[ce.jsx("button",{"data-wd-key":"root:skip:layer-list",className:"maputnik-toolbar-skip",onClick:r=>(jr().f[9]++,jr().s[19]++,this.onSkip("layer-list")),children:e("Layers list")}),ce.jsx("button",{"data-wd-key":"root:skip:layer-editor",className:"maputnik-toolbar-skip",onClick:r=>(jr().f[10]++,jr().s[20]++,this.onSkip("layer-editor")),children:e("Layer editor")}),ce.jsx("button",{"data-wd-key":"root:skip:map-view",className:"maputnik-toolbar-skip",onClick:r=>(jr().f[11]++,jr().s[21]++,this.onSkip("map")),children:e("Map view")}),ce.jsxs("a",{className:"maputnik-toolbar-logo",target:"blank",rel:"noreferrer noopener",href:"https://github.com/maplibre/maputnik",children:[ce.jsx("img",{src:qce,alt:e("Maputnik on GitHub")}),ce.jsxs("h1",{children:[ce.jsx("span",{className:"maputnik-toolbar-name",children:xK.name}),ce.jsxs("span",{className:"maputnik-toolbar-version",children:["v",xK.version]})]})]})]}),ce.jsxs("div",{className:"maputnik-toolbar__actions",role:"navigation","aria-label":"Toolbar",children:[ce.jsxs(yx,{wdKey:"nav:open",onClick:this.props.onToggleModal.bind(this,"open"),children:[ce.jsx(ZV,{}),ce.jsx(yg,{children:e("Open")})]}),ce.jsxs(yx,{wdKey:"nav:export",onClick:this.props.onToggleModal.bind(this,"export"),children:[ce.jsx(B6,{}),ce.jsx(yg,{children:e("Save")})]}),ce.jsxs(yx,{wdKey:"nav:sources",onClick:this.props.onToggleModal.bind(this,"sources"),children:[ce.jsx(o$,{}),ce.jsx(yg,{children:e("Data Sources")})]}),ce.jsxs(yx,{wdKey:"nav:settings",onClick:this.props.onToggleModal.bind(this,"settings"),children:[ce.jsx(XV,{}),ce.jsx(yg,{children:e("Style Settings")})]}),ce.jsxs(MK,{wdKey:"nav:inspect",children:[ce.jsx(YV,{}),ce.jsxs(yg,{children:[e("View"),ce.jsxs("select",{className:"maputnik-select","data-wd-key":"maputnik-select",onChange:r=>(jr().f[12]++,jr().s[22]++,this.handleSelection(r.target.value)),value:i?.id,children:[t.filter(r=>(jr().f[13]++,jr().s[23]++,r.group==="general")).map(r=>(jr().f[14]++,jr().s[24]++,ce.jsx("option",{value:r.id,disabled:r.disabled,"data-wd-key":r.id,children:r.title},r.id))),ce.jsx("optgroup",{label:e("Color accessibility"),children:t.filter(r=>(jr().f[15]++,jr().s[25]++,r.group==="color-accessibility")).map(r=>(jr().f[16]++,jr().s[26]++,ce.jsx("option",{value:r.id,disabled:r.disabled,children:r.title},r.id)))})]})]})]}),ce.jsxs(MK,{wdKey:"nav:language",children:[ce.jsx($V,{}),ce.jsxs(yg,{children:["Language",ce.jsx("select",{className:"maputnik-select","data-wd-key":"maputnik-lang-select",onChange:r=>(jr().f[17]++,jr().s[27]++,this.handleLanguageChange(r.target.value)),value:this.props.i18n.language,children:Object.entries($U).map(([r,a])=>(jr().f[18]++,jr().s[28]++,ce.jsx("option",{value:r,children:a},r)))})]})]}),ce.jsxs(Vce,{href:"https://github.com/maplibre/maputnik/wiki",children:[ce.jsx(qV,{}),ce.jsx(yg,{children:e("Help")})]})]})]})})}}const Zce=(jr().s[29]++,ss()($ce));function E3(){var n="/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",e="d17a642b15310eb6111b086bd920c67ec86a8271",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:6,column:3}},line:4}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx"],names:[],mappings:"AAQW;AARX,OAAO,WAAW;AAMlB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,6BACnB,eAAK,MAAM,UACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d17a642b15310eb6111b086bd920c67ec86a8271"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return E3=function(){return l},l}E3();class Xce extends ni.Component{render(){return E3().f[0]++,E3().s[0]++,ce.jsx("div",{className:"maputnik-scroll-container",children:this.props.children})}}function C1(){var n="/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",e="8ec38c69dd624a1f42daa5f8d5bda8f1451ec7e4",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:8,column:46}},1:{start:{line:9,column:4},end:{line:18,column:12}},2:{start:{line:21,column:18},end:{line:21,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:19,column:3}},line:7}},branchMap:{0:{loc:{start:{line:16,column:6},end:{line:16,column:123}},type:"binary-expr",locations:[{start:{line:16,column:6},end:{line:16,column:23}},{start:{line:16,column:43},end:{line:16,column:123}}],line:16}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx"],names:[],mappings:"AAsBQ,SACE,KADF;AAtBR,OAAO,WAAW;AAClB,OAAO,qBAAqB;AAC5B,SAA0B,uBAAuB;AACjD,SAAS,mBAAmB;AAW5B,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EAEtE,SAAS;AACP,aAAS,KAAK,MAAM,KAAK,MAAM,KAAK,IAAI;AAExC,WAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,OAAM,GAC/C,+BAAC,SAAI,WAAU,mBACZ;AAAA,WAAK,MAAM;AAAA,MACZ,qBAAC,SAAI,WAAU,wBACb;AAAA,4BAAC,SAAI,WAAU,wBACZ,eAAK,MAAM,WACd;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,8BAAC,mBACE,eAAK,MAAM,aACd,GACF;AAAA,QACC,KAAK,MAAM;AAAA,SACd;AAAA,MACC,KAAK,MAAM,UAAU,oBAAC,SAAI,WAAU,0BAClC,eAAK,MAAM,QACd;AAAA,MAEC,KAAK,MAAM;AAAA,OACd,GACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8ec38c69dd624a1f42daa5f8d5bda8f1451ec7e4"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return C1=function(){return l},l}C1();class Jce extends ni.Component{render(){return C1().f[0]++,C1().s[0]++,document.body.dir=this.props.i18n.dir(),C1().s[1]++,ce.jsx(Sv.Provider,{value:{size:"14px"},children:ce.jsxs("div",{className:"maputnik-layout",children:[this.props.toolbar,ce.jsxs("div",{className:"maputnik-layout-main",children:[ce.jsx("div",{className:"maputnik-layout-list",children:this.props.layerList}),ce.jsx("div",{className:"maputnik-layout-drawer",children:ce.jsx(Xce,{children:this.props.layerEditor})}),this.props.map]}),(C1().b[0][0]++,this.props.bottom&&(C1().b[0][1]++,ce.jsx("div",{className:"maputnik-layout-bottom",children:this.props.bottom}))),this.props.modals]})})}}const ehe=(C1().s[2]++,ss()(Jce));function El(){var n="/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",e="79207020c1a6a62db4f3db3338a49c0819045455",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:38},end:{line:11,column:48}},2:{start:{line:12,column:19},end:{line:40,column:6}},3:{start:{line:14,column:6},end:{line:38,column:7}},4:{start:{line:15,column:27},end:{line:15,column:32}},5:{start:{line:16,column:24},end:{line:16,column:73}},6:{start:{line:17,column:8},end:{line:35,column:13}},7:{start:{line:30,column:31},end:{line:30,column:74}},8:{start:{line:37,column:8},end:{line:37,column:32}},9:{start:{line:39,column:6},end:{line:39,column:120}},10:{start:{line:41,column:18},end:{line:43,column:6}},11:{start:{line:42,column:6},end:{line:42,column:68}},12:{start:{line:44,column:4},end:{line:47,column:9}},13:{start:{line:50,column:24},end:{line:50,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:25},end:{line:8,column:5}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:48,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:42},end:{line:12,column:43}},loc:{start:{line:12,column:58},end:{line:40,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:30,column:25},end:{line:30,column:26}},loc:{start:{line:30,column:31},end:{line:30,column:74}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:41,column:40},end:{line:41,column:41}},loc:{start:{line:41,column:50},end:{line:43,column:5}},line:41}},branchMap:{0:{loc:{start:{line:14,column:6},end:{line:38,column:7}},type:"if",locations:[{start:{line:14,column:6},end:{line:38,column:7}},{start:{line:36,column:13},end:{line:38,column:7}}],line:14},1:{loc:{start:{line:14,column:10},end:{line:14,column:55}},type:"binary-expr",locations:[{start:{line:14,column:10},end:{line:14,column:22}},{start:{line:14,column:26},end:{line:14,column:55}}],line:14},2:{loc:{start:{line:24,column:10},end:{line:34,column:14}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:50}},{start:{line:24,column:70},end:{line:34,column:14}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx"],names:[],mappings:"AA4BY,SAIE,UAHM,KADR;AA5BZ,OAAO,WAAW;AAClB,SAAQ,qBAAoB;AAE5B,SAAS,OAAwB,uBAAuB;AAWxD,MAAM,gCAAgC,MAAM,UAAwC;AAAA,EAClF,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,mBAAkB,IAAI,KAAK;AACrC,UAAM,SAAS,KAAK,MAAM,QAAQ,IAAI,CAAC,OAAY,QAAQ;AACzD,UAAI;AACJ,UAAI,MAAM,UAAU,MAAM,OAAO,SAAS,SAAS;AACjD,cAAM,EAAC,OAAM,IAAI;AACjB,cAAM,UAAU,KAAK,MAAM,UAAU,OAAO,OAAO,KAAK,KAAK,EAAE;AAC/D,kBACE,iCACE;AAAA,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAM,wBAAc,OAAO,GAAE;AAAA,YAAO;AAAA,YAAG,OAAO,KAAK;AAAA,aAC5D;AAAA,UACC,uBAAuB,OAAO,KAAK,SAClC,iCAAE;AAAA;AAAA,YAEA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,MAAM,KAAK,MAAM,cAAe,OAAO,KAAK,KAAK;AAAA,gBAEzD,YAAE,iBAAiB;AAAA;AAAA,YACtB;AAAA,aACF;AAAA,WAEJ;AAAA,MAEJ,OACK;AACH,kBAAU,MAAM;AAAA,MAClB;AACA,aAAO,oBAAC,OAAqB,WAAU,gCACpC,qBADY,WAAS,GAExB;AAAA,IACF,CAAC;AAED,UAAM,QAAQ,KAAK,MAAM,OAAO,IAAI,CAAC,GAAG,MAAM;AAC5C,aAAO,oBAAC,OAAmB,eAAZ,UAAQ,CAAM;AAAA,IAC/B,CAAC;AAED,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA;AAAA,MACA;AAAA,OACH;AAAA,EACF;AACF;AAEA,MAAM,kBAAkB,gBAAgB,EAAE,uBAAuB;AACjE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"79207020c1a6a62db4f3db3338a49c0819045455"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return El=function(){return l},l}El();class the extends ni.Component{static defaultProps=(El().s[0]++,{onLayerSelect:()=>{El().f[0]++}});render(){El().f[1]++;const{t:e,selectedLayerIndex:t}=(El().s[1]++,this.props),i=(El().s[2]++,this.props.errors?.map((a,l)=>{El().f[2]++;let o;if(El().s[3]++,El().b[1][0]++,a.parsed&&(El().b[1][1]++,a.parsed.type==="layer")){El().b[0][0]++;const{parsed:m}=(El().s[4]++,a),C=(El().s[5]++,this.props.mapStyle?.layers[m.data.index].id);El().s[6]++,o=ce.jsxs(ce.Fragment,{children:[ce.jsxs(O1,{t:e,children:["Layer ",ce.jsx("span",{children:oj(C)}),": ",m.data.message]}),(El().b[2][0]++,t!==m.data.index&&(El().b[2][1]++,ce.jsxs(ce.Fragment,{children:[" — ",ce.jsx("button",{className:"maputnik-message-panel__switch-button",onClick:()=>(El().f[3]++,El().s[7]++,this.props.onLayerSelect(m.data.index)),children:e("switch to layer")})]})))]})}else El().b[0][1]++,El().s[8]++,o=a.message;return El().s[9]++,ce.jsx("p",{className:"maputnik-message-panel-error",children:o},"error-"+l)})),r=(El().s[10]++,this.props.infos?.map((a,l)=>(El().f[4]++,El().s[11]++,ce.jsx("p",{children:a},"info-"+l))));return El().s[12]++,ce.jsxs("div",{className:"maputnik-message-panel",children:[i,r]})}}const nhe=(El().s[13]++,ss()(the));function j_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",e="b4917506fd241ad371e89e09cf886040a4a066b2",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",statementMap:{0:{start:{line:4,column:19},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:148}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:19},end:{line:4,column:20}},loc:{start:{line:4,column:30},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,gBAAqC;AAC5C,OAAO,cAAc;AASrB,MAAM,aAAwC,CAAC,UAAU;AACvD,SACE,oBAAC,YAAS,OAAO,MAAM,OAAO,WAAW,MAAM,WAC7C,8BAAC,cAAY,GAAG,OAAO,GACzB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b4917506fd241ad371e89e09cf886040a4a066b2"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return j_=function(){return l},l}j_();j_().s[0]++;const B3=n=>(j_().f[0]++,j_().s[1]++,ce.jsx(G_,{label:n.label,fieldSpec:n.fieldSpec,children:ce.jsx(JG,{...n})}));function W_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",e="fffa19ca675ebdef11e1e19bc5de80e92e7ab3b7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,iBAAqC;AAC5C,OAAO,WAAW;AAWlB,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fffa19ca675ebdef11e1e19bc5de80e92e7ab3b7"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return W_=function(){return l},l}W_();W_().s[0]++;const $m=n=>(W_().f[0]++,W_().s[1]++,ce.jsx(Ks,{label:n.label,fieldSpec:n.fieldSpec,children:ce.jsx(z0,{...n})}));function Q_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",e="52bce12df188c4d6d93f7468926f9c71d8918aec",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx"],names:[],mappings:"AAcM;AAdN,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAU5C,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"52bce12df188c4d6d93f7468926f9c71d8918aec"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Q_=function(){return l},l}Q_();Q_().s[0]++;const fm=n=>(Q_().f[0]++,Q_().s[1]++,ce.jsx(Ks,{label:n.label,fieldSpec:n.fieldSpec,children:ce.jsx(ap,{...n})}));function Y_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",e="22d8106d93846b5349fc1a84506c2b599d950216",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",statementMap:{0:{start:{line:4,column:17},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:143}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:17},end:{line:4,column:18}},loc:{start:{line:4,column:28},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,cAAgD;AACvD,OAAO,WAAW;AAWlB,MAAM,WAAoC,CAAC,UAAU;AACnD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,YAAU,GAAG,OAAO,GACvB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"22d8106d93846b5349fc1a84506c2b599d950216"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Y_=function(){return l},l}Y_();Y_().s[0]++;const Fv=n=>(Y_().f[0]++,Y_().s[1]++,ce.jsx(Ks,{label:n.label,fieldSpec:n.fieldSpec,children:ce.jsx(J8,{...n})}));function q_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",e="fc56b0bbcfdebee59c0c65a50c638259331ea9d2",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAW5C,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fc56b0bbcfdebee59c0c65a50c638259331ea9d2"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return q_=function(){return l},l}q_();q_().s[0]++;const $2=n=>(q_().f[0]++,q_().s[1]++,ce.jsx(Ks,{label:n.label,fieldSpec:n.fieldSpec,children:ce.jsx(ey,{...n})}));function H_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",e="3037ded4ee585e31829504c4e3cf91968b29d62e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",statementMap:{0:{start:{line:4,column:18},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:147}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:18},end:{line:4,column:19}},loc:{start:{line:4,column:29},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,eAAiC;AACxC,OAAO,cAAc;AAWrB,MAAM,YAAsC,CAAC,UAAU;AACrD,SACE,oBAAC,YAAS,OAAO,MAAM,OAAO,WAAW,MAAM,WAC7C,8BAAC,aAAW,GAAG,OAAO,GACxB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3037ded4ee585e31829504c4e3cf91968b29d62e"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return H_=function(){return l},l}H_();H_().s[0]++;const ihe=n=>(H_().f[0]++,H_().s[1]++,ce.jsx(G_,{label:n.label,fieldSpec:n.fieldSpec,children:ce.jsx(X8,{...n})}));function V_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",e="eafb3279f0c8cbcaa727c8284a8764c1ce8a88a6",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",statementMap:{0:{start:{line:4,column:19},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:145}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:19},end:{line:4,column:20}},loc:{start:{line:4,column:30},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,gBAAmC;AAW1C,MAAM,aAAwC,CAAC,UAAU;AACvD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,cAAY,GAAG,OAAO,GACzB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"eafb3279f0c8cbcaa727c8284a8764c1ce8a88a6"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return V_=function(){return l},l}V_();V_().s[0]++;const rhe=n=>(V_().f[0]++,V_().s[1]++,ce.jsx(Ks,{label:n.label,fieldSpec:n.fieldSpec,children:ce.jsx(ZG,{...n})}));function $_(){var n="/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",e="3fd72cd1ec4be346f0d6d854a97e371e1b9c2997",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",statementMap:{0:{start:{line:1,column:13},end:{line:32,column:2}},1:{start:{line:1,column:21},end:{line:32,column:1}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:13},end:{line:1,column:14}},loc:{start:{line:1,column:21},end:{line:32,column:1}},line:1}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts"],names:[],mappings:"AAEA,MAAM,OAAO,CAAC,OAAkB;AAAA,EAC9B,UAAU;AAAA,IACR,uBAAuB;AAAA,MACrB,OAAO,EAAE,uBAAuB;AAAA,MAChC,KAAK,EAAE,yCAAyC;AAAA,MAChD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,4BAA4B;AAAA,MAC1B,OAAO,EAAE,4BAA4B;AAAA,MACrC,KAAK,EAAE,iDAAiD;AAAA,MACxD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,qBAAqB;AAAA,MACnB,OAAO,EAAE,qBAAqB;AAAA,MAC9B,KAAK,EAAE,0BAA0B;AAAA,MACjC,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,yBAAyB;AAAA,MACvB,OAAO,EAAE,yBAAyB;AAAA,MAClC,KAAK,EAAE,8CAA8C;AAAA,MACrD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,gBAAgB;AAAA,MACd,OAAO,EAAE,gBAAgB;AAAA,MACzB,KAAK,EAAE,sDAAsD;AAAA,IAC/D;AAAA,EACF;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3fd72cd1ec4be346f0d6d854a97e371e1b9c2997"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return $_=function(){return l},l}$_();$_().s[0]++;const sj=n=>($_().f[0]++,$_().s[1]++,{maputnik:{maptiler_access_token:{label:n("MapTiler Access Token"),doc:n("Public access token for MapTiler Cloud."),docUrl:"https://docs.maptiler.com/cloud/api/authentication-key/",docUrlLinkText:n("Learn More")},thunderforest_access_token:{label:n("Thunderforest Access Token"),doc:n("Public access token for Thunderforest services."),docUrl:"https://www.thunderforest.com/docs/apikeys/",docUrlLinkText:n("Learn More")},stadia_access_token:{label:n("Stadia Maps API Key"),doc:n("API key for Stadia Maps."),docUrl:"https://docs.stadiamaps.com/authentication/",docUrlLinkText:n("Learn More")},locationiq_access_token:{label:n("LocationIQ Access Token"),doc:n("Public access token for LocationIQ services."),docUrl:"https://docs.locationiq.com/docs/maps",docUrlLinkText:n("Learn More")},style_renderer:{label:n("Style Renderer"),doc:n("Choose the default Maputnik renderer for this style.")}}});function Fr(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx",e="60211903de1808a55602506683d9085b6c39e35b",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx",statementMap:{0:{start:{line:16,column:23},end:{line:18,column:5}},1:{start:{line:19,column:4},end:{line:23,column:5}},2:{start:{line:20,column:6},end:{line:20,column:34}},3:{start:{line:22,column:6},end:{line:22,column:35}},4:{start:{line:24,column:4},end:{line:27,column:7}},5:{start:{line:30,column:18},end:{line:32,column:5}},6:{start:{line:33,column:4},end:{line:37,column:5}},7:{start:{line:34,column:6},end:{line:34,column:29}},8:{start:{line:36,column:6},end:{line:36,column:30}},9:{start:{line:38,column:4},end:{line:41,column:7}},10:{start:{line:44,column:20},end:{line:46,column:5}},11:{start:{line:47,column:4},end:{line:51,column:5}},12:{start:{line:48,column:6},end:{line:48,column:31}},13:{start:{line:50,column:6},end:{line:50,column:32}},14:{start:{line:52,column:4},end:{line:55,column:7}},15:{start:{line:58,column:25},end:{line:60,column:5}},16:{start:{line:61,column:4},end:{line:65,column:5}},17:{start:{line:62,column:6},end:{line:62,column:36}},18:{start:{line:64,column:6},end:{line:64,column:37}},19:{start:{line:66,column:4},end:{line:66,column:44}},20:{start:{line:69,column:21},end:{line:69,column:55}},21:{start:{line:70,column:54},end:{line:70,column:64}},22:{start:{line:71,column:16},end:{line:71,column:38}},23:{start:{line:72,column:18},end:{line:72,column:49}},24:{start:{line:73,column:23},end:{line:73,column:59}},25:{start:{line:74,column:20},end:{line:74,column:53}},26:{start:{line:75,column:4},end:{line:305,column:6}},27:{start:{line:308,column:22},end:{line:308,column:62}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:44},end:{line:28,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:39},end:{line:42,column:3}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:41},end:{line:56,column:3}},line:43},3:{name:"(anonymous_3)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:39},end:{line:67,column:3}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:68,column:2},end:{line:68,column:3}},loc:{start:{line:68,column:11},end:{line:306,column:3}},line:68}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:23,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:23,column:5}},{start:{line:21,column:11},end:{line:23,column:5}}],line:19},1:{loc:{start:{line:33,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:33,column:4},end:{line:37,column:5}},{start:{line:35,column:11},end:{line:37,column:5}}],line:33},2:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:49,column:11},end:{line:51,column:5}}],line:47},3:{loc:{start:{line:61,column:4},end:{line:65,column:5}},type:"if",locations:[{start:{line:61,column:4},end:{line:65,column:5}},{start:{line:63,column:11},end:{line:65,column:5}}],line:61},4:{loc:{start:{line:69,column:21},end:{line:69,column:55}},type:"binary-expr",locations:[{start:{line:69,column:21},end:{line:69,column:49}},{start:{line:69,column:53},end:{line:69,column:55}}],line:69},5:{loc:{start:{line:72,column:18},end:{line:72,column:49}},type:"binary-expr",locations:[{start:{line:72,column:18},end:{line:72,column:43}},{start:{line:72,column:47},end:{line:72,column:49}}],line:72},6:{loc:{start:{line:73,column:23},end:{line:73,column:59}},type:"binary-expr",locations:[{start:{line:73,column:23},end:{line:73,column:53}},{start:{line:73,column:57},end:{line:73,column:59}}],line:73},7:{loc:{start:{line:74,column:20},end:{line:74,column:53}},type:"binary-expr",locations:[{start:{line:74,column:20},end:{line:74,column:47}},{start:{line:74,column:51},end:{line:74,column:53}}],line:74},8:{loc:{start:{line:170,column:21},end:{line:170,column:42}},type:"binary-expr",locations:[{start:{line:170,column:21},end:{line:170,column:36}},{start:{line:170,column:40},end:{line:170,column:42}}],line:170},9:{loc:{start:{line:299,column:21},end:{line:299,column:62}},type:"binary-expr",locations:[{start:{line:299,column:21},end:{line:299,column:50}},{start:{line:299,column:54},end:{line:299,column:62}}],line:299}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx"],names:[],mappings:"AAgHM,SACE,KADF;AAhHN,OAAO,WAAW;AAClB,OAAO,YAAY;AAEnB,SAA0B,uBAAuB;AAEjD,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAWhC,MAAM,8BAA8B,MAAM,UAAsC;AAAA,EAC9E,yBAAyB,UAAyC,OAA2B;AAC3F,UAAM,aAAa;AAAA,MACjB,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,WAAW,QAAQ;AAAA,IAC5B,OACK;AACH,iBAAW,QAAQ,IAAI;AAAA,IACzB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAAoC,OAAY;AAClE,UAAM,QAAQ;AAAA,MACZ,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,MAAM,QAAQ;AAAA,IACvB,OACK;AAEH,YAAM,QAAQ,IAAI;AAAA,IACpB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,UAAsC,OAAY;AACtE,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,QAAQ,QAAQ;AAAA,IACzB,OACK;AAEH,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAA8C,OAAY;AAC5E,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,IAChB;AAEA,QAAI,UAAU,QAAW;AAEvB,aAAO,aAAa,QAAQ;AAAA,IAC9B,OACK;AAEH,mBAAa,QAAQ,IAAI;AAAA,IAC3B;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAEA,SAAS;AACP,UAAM,WAAW,KAAK,MAAM,SAAS,YAAY,CAAC;AAClD,UAAM,EAAC,GAAG,0BAA0B,SAAQ,IAAI,KAAK;AACrD,UAAM,MAAM,oBAAoB,CAAC;AAEjC,UAAM,QAAQ,KAAK,MAAM,SAAS,SAAS,CAAC;AAC5C,UAAM,aAAa,KAAK,MAAM,SAAS,cAAc,CAAC;AACtD,UAAM,UAAU,KAAK,MAAM,SAAS,WAAW,CAAC;AAEhD,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,gBAAgB;AAAA,QAEzB,+BAAC,SAAI,WAAU,kBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM;AAAA;AAAA,UACtD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,EAAC,KAAK,EAAE,6DAA6D,EAAC;AAAA,cACjF,eAAY;AAAA,cACZ,OAAQ,KAAK,MAAM,SAAiB;AAAA,cACpC,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,EAAE,YAAY;AAAA,cACrB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,YAAY;AAAA,cACrB,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,cAC1C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,oCAAoC;AAAA,cACpD,UAAU,yBAAyB,KAAK,MAAM,oCAAoC;AAAA;AAAA,UACpF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,cAC/C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,qCAAqC;AAAA,cACrD,UAAU,yBAAyB,KAAK,MAAM,qCAAqC;AAAA;AAAA,UACrF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,cACxC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,8BAA8B;AAAA,cAC9C,UAAU,yBAAyB,KAAK,MAAM,8BAA8B;AAAA;AAAA,UAC9E;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,wBAAwB;AAAA,cAC5C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,kCAAkC;AAAA,cAClD,UAAU,yBAAyB,KAAK,MAAM,kCAAkC;AAAA;AAAA,UAClF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ;AAAA,cACjB,WAAW,OAAO,MAAM;AAAA,cACxB,QAAQ;AAAA,cACR,MAAK;AAAA,cACL,OAAO,SAAS,UAAU,CAAC;AAAA,cAC3B,SAAS,CAAC,GAAG,CAAC;AAAA,cACd,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS;AAAA,cACT,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM;AAAA;AAAA,UACtD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,SAAS;AAAA,cAClB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,QAAQ;AAAA,cAC9B,UAAU,KAAK,oBAAoB,KAAK,MAAM,SAAS;AAAA;AAAA,UACzD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,cAAc;AAAA,cACvB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,cAC/C,SAAS,OAAO,MAAM,OAAO;AAAA,cAC7B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,aAAa;AAAA,cACtB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,iBAAiB;AAAA,cAC1B,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,UAAU;AAAA,cAChC,UAAU,KAAK,oBAAoB,KAAK,MAAM,WAAW;AAAA;AAAA,UAC3D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,QAAQ,OAAO,MAAM,SAAS;AAAA,cAC9B,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,SAAS;AAAA,cAC/B,UAAU,KAAK,oBAAoB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC1D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,QAAQ;AAAA,cAC1B,eAAY;AAAA,cACZ,OAAO,QAAQ;AAAA,cACf,UAAU,KAAK,sBAAsB,KAAK,MAAM,QAAQ;AAAA;AAAA,UAC1D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,sBAAsB;AAAA,cAC/B,WAAW,OAAO,QAAQ;AAAA,cAC1B,OAAO,QAAQ;AAAA,cACf,SAAS,OAAO,QAAQ,aAAa;AAAA,cACrC,UAAU,KAAK,sBAAsB,KAAK,MAAM,cAAc;AAAA;AAAA,UAChE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,kBAAkB;AAAA,cAC3B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,MAAM;AAAA,cACjC,UAAU,KAAK,yBAAyB,KAAK,MAAM,OAAO;AAAA;AAAA,UAC5D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,qBAAqB;AAAA,cAC9B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,SAAS;AAAA,cACpC,UAAU,KAAK,yBAAyB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,eAAe;AAAA,cACnC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,SAAS;AAAA,gBACP,CAAC,UAAU,eAAe;AAAA,gBAC1B,CAAC,MAAM,EAAE,4BAA4B,CAAC;AAAA,cACxC;AAAA,cACA,OAAO,SAAS,mBAAmB,KAAK;AAAA,cACxC,UAAU,yBAAyB,KAAK,MAAM,mBAAmB;AAAA;AAAA,UACnE;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"60211903de1808a55602506683d9085b6c39e35b"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Fr=function(){return l},l}Fr();class ohe extends ni.Component{changeTransitionProperty(e,t){Fr().f[0]++;const i=(Fr().s[0]++,{...this.props.mapStyle.transition});Fr().s[1]++,t===void 0?(Fr().b[0][0]++,Fr().s[2]++,delete i[e]):(Fr().b[0][1]++,Fr().s[3]++,i[e]=t),Fr().s[4]++,this.props.onStyleChanged({...this.props.mapStyle,transition:i})}changeLightProperty(e,t){Fr().f[1]++;const i=(Fr().s[5]++,{...this.props.mapStyle.light});Fr().s[6]++,t===void 0?(Fr().b[1][0]++,Fr().s[7]++,delete i[e]):(Fr().b[1][1]++,Fr().s[8]++,i[e]=t),Fr().s[9]++,this.props.onStyleChanged({...this.props.mapStyle,light:i})}changeTerrainProperty(e,t){Fr().f[2]++;const i=(Fr().s[10]++,{...this.props.mapStyle.terrain});Fr().s[11]++,t===void 0?(Fr().b[2][0]++,Fr().s[12]++,delete i[e]):(Fr().b[2][1]++,Fr().s[13]++,i[e]=t),Fr().s[14]++,this.props.onStyleChanged({...this.props.mapStyle,terrain:i})}changeStyleProperty(e,t){Fr().f[3]++;const i=(Fr().s[15]++,{...this.props.mapStyle});Fr().s[16]++,t===void 0?(Fr().b[3][0]++,Fr().s[17]++,delete i[e]):(Fr().b[3][1]++,Fr().s[18]++,i[e]=t),Fr().s[19]++,this.props.onStyleChanged(i)}render(){Fr().f[4]++;const e=(Fr().s[20]++,Fr().b[4][0]++,this.props.mapStyle.metadata||(Fr().b[4][1]++,{})),{t,onChangeMetadataProperty:i,mapStyle:r}=(Fr().s[21]++,this.props),a=(Fr().s[22]++,sj(t)),l=(Fr().s[23]++,Fr().b[5][0]++,this.props.mapStyle.light||(Fr().b[5][1]++,{})),o=(Fr().s[24]++,Fr().b[6][0]++,this.props.mapStyle.transition||(Fr().b[6][1]++,{})),m=(Fr().s[25]++,Fr().b[7][0]++,this.props.mapStyle.terrain||(Fr().b[7][1]++,{}));return Fr().s[26]++,ce.jsx(z1,{"data-wd-key":"modal:settings",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:t("Style Settings"),children:ce.jsxs("div",{className:"modal:settings",children:[ce.jsx(fm,{label:t("Name"),fieldSpec:da.$root.name,"data-wd-key":"modal:settings.name",value:this.props.mapStyle.name,onChange:this.changeStyleProperty.bind(this,"name")}),ce.jsx(fm,{label:t("Owner"),fieldSpec:{doc:t("Owner ID of the style. Used by Mapbox or future style APIs.")},"data-wd-key":"modal:settings.owner",value:this.props.mapStyle.owner,onChange:this.changeStyleProperty.bind(this,"owner")}),ce.jsx(Fv,{fieldSpec:da.$root.sprite,label:t("Sprite URL"),"data-wd-key":"modal:settings.sprite",value:this.props.mapStyle.sprite,onChange:this.changeStyleProperty.bind(this,"sprite")}),ce.jsx(Fv,{label:t("Glyphs URL"),fieldSpec:da.$root.glyphs,"data-wd-key":"modal:settings.glyphs",value:this.props.mapStyle.glyphs,onChange:this.changeStyleProperty.bind(this,"glyphs")}),ce.jsx(fm,{label:a.maputnik.maptiler_access_token.label,fieldSpec:a.maputnik.maptiler_access_token,"data-wd-key":"modal:settings.maputnik:openmaptiles_access_token",value:e["maputnik:openmaptiles_access_token"],onChange:i.bind(this,"maputnik:openmaptiles_access_token")}),ce.jsx(fm,{label:a.maputnik.thunderforest_access_token.label,fieldSpec:a.maputnik.thunderforest_access_token,"data-wd-key":"modal:settings.maputnik:thunderforest_access_token",value:e["maputnik:thunderforest_access_token"],onChange:i.bind(this,"maputnik:thunderforest_access_token")}),ce.jsx(fm,{label:a.maputnik.stadia_access_token.label,fieldSpec:a.maputnik.stadia_access_token,"data-wd-key":"modal:settings.maputnik:stadia_access_token",value:e["maputnik:stadia_access_token"],onChange:i.bind(this,"maputnik:stadia_access_token")}),ce.jsx(fm,{label:a.maputnik.locationiq_access_token.label,fieldSpec:a.maputnik.locationiq_access_token,"data-wd-key":"modal:settings.maputnik:locationiq_access_token",value:e["maputnik:locationiq_access_token"],onChange:i.bind(this,"maputnik:locationiq_access_token")}),ce.jsx(B3,{label:t("Center"),fieldSpec:da.$root.center,length:2,type:"number",value:(Fr().b[8][0]++,r.center||(Fr().b[8][1]++,[])),default:[0,0],onChange:this.changeStyleProperty.bind(this,"center")}),ce.jsx($m,{label:t("Zoom"),fieldSpec:da.$root.zoom,value:r.zoom,default:0,onChange:this.changeStyleProperty.bind(this,"zoom")}),ce.jsx($m,{label:t("Bearing"),fieldSpec:da.$root.bearing,value:r.bearing,default:da.$root.bearing.default,onChange:this.changeStyleProperty.bind(this,"bearing")}),ce.jsx($m,{label:t("Pitch"),fieldSpec:da.$root.pitch,value:r.pitch,default:da.$root.pitch.default,onChange:this.changeStyleProperty.bind(this,"pitch")}),ce.jsx(ihe,{label:t("Light anchor"),fieldSpec:da.light.anchor,name:"light-anchor",value:l.anchor,options:Object.keys(da.light.anchor.values),default:da.light.anchor.default,onChange:this.changeLightProperty.bind(this,"anchor")}),ce.jsx(rhe,{label:t("Light color"),fieldSpec:da.light.color,value:l.color,default:da.light.color.default,onChange:this.changeLightProperty.bind(this,"color")}),ce.jsx($m,{label:t("Light intensity"),fieldSpec:da.light.intensity,value:l.intensity,default:da.light.intensity.default,onChange:this.changeLightProperty.bind(this,"intensity")}),ce.jsx(B3,{label:t("Light position"),fieldSpec:da.light.position,type:"number",length:da.light.position.length,value:l.position,default:da.light.position.default,onChange:this.changeLightProperty.bind(this,"position")}),ce.jsx(fm,{label:t("Terrain source"),fieldSpec:da.terrain.source,"data-wd-key":"modal:settings.maputnik:terrain_source",value:m.source,onChange:this.changeTerrainProperty.bind(this,"source")}),ce.jsx($m,{label:t("Terrain exaggeration"),fieldSpec:da.terrain.exaggeration,value:m.exaggeration,default:da.terrain.exaggeration.default,onChange:this.changeTerrainProperty.bind(this,"exaggeration")}),ce.jsx($m,{label:t("Transition delay"),fieldSpec:da.transition.delay,value:o.delay,default:da.transition.delay.default,onChange:this.changeTransitionProperty.bind(this,"delay")}),ce.jsx($m,{label:t("Transition duration"),fieldSpec:da.transition.duration,value:o.duration,default:da.transition.duration.default,onChange:this.changeTransitionProperty.bind(this,"duration")}),ce.jsx($2,{label:a.maputnik.style_renderer.label,fieldSpec:a.maputnik.style_renderer,"data-wd-key":"modal:settings.maputnik:renderer",options:[["mlgljs","MapLibreGL JS"],["ol",t("Open Layers (experimental)")]],value:(Fr().b[9][0]++,e["maputnik:renderer"]||(Fr().b[9][1]++,"mlgljs")),onChange:i.bind(this,"maputnik:renderer")})]})})}}const ahe=(Fr().s[27]++,ss()(ohe));var Dx={exports:{}},she=Dx.exports,SK;function lhe(){return SK||(SK=1,function(n,e){(function(t,i,r){n.exports=r(),n.exports.default=r()})("slugify",she,function(){var t=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","¢":"cent","£":"pound","¤":"currency","¥":"yen","©":"(c)","ª":"a","®":"(r)","º":"o","À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"DJ","đ":"dj","Ē":"E","ē":"e","Ė":"E","ė":"e","Ę":"e","ę":"e","Ě":"E","ě":"e","Ğ":"G","ğ":"g","Ģ":"G","ģ":"g","Ĩ":"I","ĩ":"i","Ī":"i","ī":"i","Į":"I","į":"i","İ":"I","ı":"i","Ķ":"k","ķ":"k","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","Ō":"O","ō":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ũ":"U","ũ":"u","Ū":"u","ū":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","Ə":"E","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","ǈ":"LJ","ǉ":"lj","ǋ":"NJ","ǌ":"nj","Ș":"S","ș":"s","Ț":"T","ț":"t","ə":"e","˚":"o","Ά":"A","Έ":"E","Ή":"H","Ί":"I","Ό":"O","Ύ":"Y","Ώ":"W","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ϊ":"I","Ϋ":"Y","ά":"a","έ":"e","ή":"h","ί":"i","ΰ":"y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","ς":"s","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ϊ":"i","ϋ":"y","ό":"o","ύ":"y","ώ":"w","Ё":"Yo","Ђ":"DJ","Є":"Ye","І":"I","Ї":"Yi","Ј":"J","Љ":"LJ","Њ":"NJ","Ћ":"C","Џ":"DZ","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"U","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"u","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","ё":"yo","ђ":"dj","є":"ye","і":"i","ї":"yi","ј":"j","љ":"lj","њ":"nj","ћ":"c","ѝ":"u","џ":"dz","Ґ":"G","ґ":"g","Ғ":"GH","ғ":"gh","Қ":"KH","қ":"kh","Ң":"NG","ң":"ng","Ү":"UE","ү":"ue","Ұ":"U","ұ":"u","Һ":"H","һ":"h","Ә":"AE","ә":"ae","Ө":"OE","ө":"oe","Ա":"A","Բ":"B","Գ":"G","Դ":"D","Ե":"E","Զ":"Z","Է":"E'","Ը":"Y'","Թ":"T'","Ժ":"JH","Ի":"I","Լ":"L","Խ":"X","Ծ":"C'","Կ":"K","Հ":"H","Ձ":"D'","Ղ":"GH","Ճ":"TW","Մ":"M","Յ":"Y","Ն":"N","Շ":"SH","Չ":"CH","Պ":"P","Ջ":"J","Ռ":"R'","Ս":"S","Վ":"V","Տ":"T","Ր":"R","Ց":"C","Փ":"P'","Ք":"Q'","Օ":"O''","Ֆ":"F","և":"EV","ء":"a","آ":"aa","أ":"a","ؤ":"u","إ":"i","ئ":"e","ا":"a","ب":"b","ة":"h","ت":"t","ث":"th","ج":"j","ح":"h","خ":"kh","د":"d","ذ":"th","ر":"r","ز":"z","س":"s","ش":"sh","ص":"s","ض":"dh","ط":"t","ظ":"z","ع":"a","غ":"gh","ف":"f","ق":"q","ك":"k","ل":"l","م":"m","ن":"n","ه":"h","و":"w","ى":"a","ي":"y","ً":"an","ٌ":"on","ٍ":"en","َ":"a","ُ":"u","ِ":"e","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","پ":"p","چ":"ch","ژ":"zh","ک":"k","گ":"g","ی":"y","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","฿":"baht","ა":"a","ბ":"b","გ":"g","დ":"d","ე":"e","ვ":"v","ზ":"z","თ":"t","ი":"i","კ":"k","ლ":"l","მ":"m","ნ":"n","ო":"o","პ":"p","ჟ":"zh","რ":"r","ს":"s","ტ":"t","უ":"u","ფ":"f","ქ":"k","ღ":"gh","ყ":"q","შ":"sh","ჩ":"ch","ც":"ts","ძ":"dz","წ":"ts","ჭ":"ch","ხ":"kh","ჯ":"j","ჰ":"h","Ṣ":"S","ṣ":"s","Ẁ":"W","ẁ":"w","Ẃ":"W","ẃ":"w","Ẅ":"W","ẅ":"w","ẞ":"SS","Ạ":"A","ạ":"a","Ả":"A","ả":"a","Ấ":"A","ấ":"a","Ầ":"A","ầ":"a","Ẩ":"A","ẩ":"a","Ẫ":"A","ẫ":"a","Ậ":"A","ậ":"a","Ắ":"A","ắ":"a","Ằ":"A","ằ":"a","Ẳ":"A","ẳ":"a","Ẵ":"A","ẵ":"a","Ặ":"A","ặ":"a","Ẹ":"E","ẹ":"e","Ẻ":"E","ẻ":"e","Ẽ":"E","ẽ":"e","Ế":"E","ế":"e","Ề":"E","ề":"e","Ể":"E","ể":"e","Ễ":"E","ễ":"e","Ệ":"E","ệ":"e","Ỉ":"I","ỉ":"i","Ị":"I","ị":"i","Ọ":"O","ọ":"o","Ỏ":"O","ỏ":"o","Ố":"O","ố":"o","Ồ":"O","ồ":"o","Ổ":"O","ổ":"o","Ỗ":"O","ỗ":"o","Ộ":"O","ộ":"o","Ớ":"O","ớ":"o","Ờ":"O","ờ":"o","Ở":"O","ở":"o","Ỡ":"O","ỡ":"o","Ợ":"O","ợ":"o","Ụ":"U","ụ":"u","Ủ":"U","ủ":"u","Ứ":"U","ứ":"u","Ừ":"U","ừ":"u","Ử":"U","ử":"u","Ữ":"U","ữ":"u","Ự":"U","ự":"u","Ỳ":"Y","ỳ":"y","Ỵ":"Y","ỵ":"y","Ỷ":"Y","ỷ":"y","Ỹ":"Y","ỹ":"y","–":"-","‘":"'","’":"'","“":"\\"","”":"\\"","„":"\\"","†":"+","•":"*","…":"...","₠":"ecu","₢":"cruzeiro","₣":"french franc","₤":"lira","₥":"mill","₦":"naira","₧":"peseta","₨":"rupee","₩":"won","₪":"new shequel","₫":"dong","€":"euro","₭":"kip","₮":"tugrik","₯":"drachma","₰":"penny","₱":"peso","₲":"guarani","₳":"austral","₴":"hryvnia","₵":"cedi","₸":"kazakhstani tenge","₹":"indian rupee","₺":"turkish lira","₽":"russian ruble","₿":"bitcoin","℠":"sm","™":"tm","∂":"d","∆":"delta","∑":"sum","∞":"infinity","♥":"love","元":"yuan","円":"yen","﷼":"rial","ﻵ":"laa","ﻷ":"laa","ﻹ":"lai","ﻻ":"la"}`),i=JSON.parse('{"bg":{"Й":"Y","Ц":"Ts","Щ":"Sht","Ъ":"A","Ь":"Y","й":"y","ц":"ts","щ":"sht","ъ":"a","ь":"y"},"de":{"Ä":"AE","ä":"ae","Ö":"OE","ö":"oe","Ü":"UE","ü":"ue","ß":"ss","%":"prozent","&":"und","|":"oder","∑":"summe","∞":"unendlich","♥":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","¢":"centavos","£":"libras","¤":"moneda","₣":"francos","∑":"suma","∞":"infinito","♥":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","¢":"centime","£":"livre","¤":"devise","₣":"franc","∑":"somme","∞":"infini","♥":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","¢":"centavo","∑":"soma","£":"libra","∞":"infinito","♥":"amor"},"uk":{"И":"Y","и":"y","Й":"Y","й":"y","Ц":"Ts","ц":"ts","Х":"Kh","х":"kh","Щ":"Shch","щ":"shch","Г":"H","г":"h"},"vi":{"Đ":"D","đ":"d"},"da":{"Ø":"OE","ø":"oe","Å":"AA","å":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"større end"},"nb":{"&":"og","Å":"AA","Æ":"AE","Ø":"OE","å":"aa","æ":"ae","ø":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","Å":"AA","Ä":"AE","Ö":"OE","å":"aa","ä":"ae","ö":"oe"}}');function r(a,l){if(typeof a!="string")throw new Error("slugify: string argument expected");l=typeof l=="string"?{replacement:l}:l||{};var o=i[l.locale]||{},m=l.replacement===void 0?"-":l.replacement,C=l.trim===void 0?!0:l.trim,S=a.normalize().split("").reduce(function(O,U){var K=o[U];return K===void 0&&(K=t[U]),K===void 0&&(K=U),K===m&&(K=" "),O+K.replace(l.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return l.strict&&(S=S.replace(/[^A-Za-z0-9\s]/g,"")),C&&(S=S.trim()),S=S.replace(/\s+/g,m),l.lower&&(S=S.toLowerCase()),S}return r.extend=function(a){Object.assign(t,a)},r})}(Dx)),Dx.exports}var Ahe=lhe();const uhe=WA(Ahe);var Rx={exports:{}},che=Rx.exports,wK;function hhe(){return wK||(wK=1,function(n,e){(function(t,i){i()})(che,function(){function t(C,S){return typeof S>"u"?S={autoBom:!1}:typeof S!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),S={autoBom:!S}),S.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(C.type)?new Blob(["\uFEFF",C],{type:C.type}):C}function i(C,S,O){var U=new XMLHttpRequest;U.open("GET",C),U.responseType="blob",U.onload=function(){m(U.response,S,O)},U.onerror=function(){console.error("could not download file")},U.send()}function r(C){var S=new XMLHttpRequest;S.open("HEAD",C,!1);try{S.send()}catch{}return 200<=S.status&&299>=S.status}function a(C){try{C.dispatchEvent(new MouseEvent("click"))}catch{var S=document.createEvent("MouseEvents");S.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),C.dispatchEvent(S)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof window=="object"&&window.global===window?window:void 0,o=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),m=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(C,S,O){var U=l.URL||l.webkitURL,K=document.createElement("a");S=S||C.name||"download",K.download=S,K.rel="noopener",typeof C=="string"?(K.href=C,K.origin===location.origin?a(K):r(K.href)?i(C,S,O):a(K,K.target="_blank")):(K.href=U.createObjectURL(C),setTimeout(function(){U.revokeObjectURL(K.href)},4e4),setTimeout(function(){a(K)},0))}:"msSaveOrOpenBlob"in navigator?function(C,S,O){if(S=S||C.name||"download",typeof C!="string")navigator.msSaveOrOpenBlob(t(C,O),S);else if(r(C))i(C,S,O);else{var U=document.createElement("a");U.href=C,U.target="_blank",setTimeout(function(){a(U)})}}:function(C,S,O,U){if(U=U||open("","_blank"),U&&(U.document.title=U.document.body.innerText="downloading..."),typeof C=="string")return i(C,S,O);var K=C.type==="application/octet-stream",z=/constructor/i.test(l.HTMLElement)||l.safari,j=/CriOS\/[\d]+/.test(navigator.userAgent);if((j||K&&z||o)&&typeof FileReader<"u"){var Q=new FileReader;Q.onloadend=function(){var ae=Q.result;ae=j?ae:ae.replace(/^data:[^;]*;/,"data:attachment/file;"),U?U.location.href=ae:location=ae,U=null},Q.readAsDataURL(C)}else{var ee=l.URL||l.webkitURL,V=ee.createObjectURL(C);U?U.location=V:location.href=V,U=null,setTimeout(function(){ee.revokeObjectURL(V)},4e4)}});l.saveAs=m.saveAs=m,n.exports=m})}(Rx)),Rx.exports}var EK=hhe();const dhe="5.7.1",fhe="get_your_own_OpIi9ZULNHzrESv6T2vL",mhe="b71f7f0ba4064f5eb9e903859a9cf5c6",phe="pk.put_your_api_key_here7bb23dffeb4",lj={openmaptiles:fhe,thunderforest:mhe,locationiq:phe};function Vn(){var n="/home/runner/work/maputnik/maputnik/src/libs/style.ts",e="16e079a55cdd4175ffeada8708d6c49d219f1229",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/style.ts",statementMap:{0:{start:{line:3,column:19},end:{line:7,column:2}},1:{start:{line:9,column:2},end:{line:9,column:52}},2:{start:{line:12,column:2},end:{line:14,column:3}},3:{start:{line:13,column:4},end:{line:13,column:28}},4:{start:{line:15,column:2},end:{line:15,column:15}},5:{start:{line:18,column:24},end:{line:22,column:4}},6:{start:{line:19,column:25},end:{line:19,column:37}},7:{start:{line:20,column:4},end:{line:20,column:36}},8:{start:{line:21,column:4},end:{line:21,column:24}},9:{start:{line:23,column:2},end:{line:26,column:4}},10:{start:{line:29,column:2},end:{line:32,column:4}},11:{start:{line:35,column:2},end:{line:35,column:69}},12:{start:{line:38,column:2},end:{line:42,column:3}},13:{start:{line:38,column:15},end:{line:38,column:16}},14:{start:{line:39,column:4},end:{line:41,column:5}},15:{start:{line:40,column:6},end:{line:40,column:15}},16:{start:{line:43,column:2},end:{line:43,column:14}},17:{start:{line:46,column:19},end:{line:46,column:42}},18:{start:{line:47,column:20},end:{line:47,column:67}},19:{start:{line:48,column:2},end:{line:50,column:3}},20:{start:{line:49,column:4},end:{line:49,column:37}},21:{start:{line:51,column:2},end:{line:51,column:21}},22:{start:{line:54,column:17},end:{line:54,column:45}},23:{start:{line:55,column:2},end:{line:55,column:31}},24:{start:{line:55,column:15},end:{line:55,column:31}},25:{start:{line:56,column:2},end:{line:56,column:57}},26:{start:{line:56,column:41},end:{line:56,column:57}},27:{start:{line:57,column:23},end:{line:57,column:33}},28:{start:{line:58,column:2},end:{line:64,column:3}},29:{start:{line:59,column:4},end:{line:59,column:37}},30:{start:{line:60,column:9},end:{line:64,column:3}},31:{start:{line:61,column:4},end:{line:61,column:30}},32:{start:{line:62,column:9},end:{line:64,column:3}},33:{start:{line:63,column:4},end:{line:63,column:34}},34:{start:{line:65,column:22},end:{line:65,column:68}},35:{start:{line:66,column:2},end:{line:68,column:3}},36:{start:{line:67,column:4},end:{line:67,column:20}},37:{start:{line:70,column:2},end:{line:74,column:3}},38:{start:{line:71,column:4},end:{line:71,column:55}},39:{start:{line:73,column:4},end:{line:73,column:57}},40:{start:{line:75,column:25},end:{line:81,column:3}},41:{start:{line:82,column:23},end:{line:85,column:3}},42:{start:{line:86,column:2},end:{line:86,column:22}},43:{start:{line:89,column:21},end:{line:89,column:29}},44:{start:{line:90,column:2},end:{line:92,column:5}},45:{start:{line:91,column:4},end:{line:91,column:76}},46:{start:{line:93,column:2},end:{line:101,column:3}},47:{start:{line:94,column:27},end:{line:94,column:73}},48:{start:{line:95,column:4},end:{line:100,column:5}},49:{start:{line:96,column:6},end:{line:99,column:8}},50:{start:{line:102,column:2},end:{line:102,column:22}},51:{start:{line:105,column:26},end:{line:107,column:3}},52:{start:{line:108,column:2},end:{line:108,column:63}},53:{start:{line:109,column:2},end:{line:109,column:64}},54:{start:{line:110,column:2},end:{line:110,column:57}},55:{start:{line:111,column:2},end:{line:111,column:61}},56:{start:{line:112,column:2},end:{line:115,column:4}}},fnMap:{0:{name:"generateId",decl:{start:{line:8,column:9},end:{line:8,column:19}},loc:{start:{line:8,column:22},end:{line:10,column:1}},line:8},1:{name:"ensureHasId",decl:{start:{line:11,column:9},end:{line:11,column:20}},loc:{start:{line:11,column:28},end:{line:16,column:1}},line:11},2:{name:"ensureHasNoInteractive",decl:{start:{line:17,column:9},end:{line:17,column:31}},loc:{start:{line:17,column:39},end:{line:27,column:1}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:18,column:41},end:{line:18,column:42}},loc:{start:{line:18,column:52},end:{line:22,column:3}},line:18},4:{name:"ensureHasNoRefs",decl:{start:{line:28,column:9},end:{line:28,column:24}},loc:{start:{line:28,column:32},end:{line:33,column:1}},line:28},5:{name:"ensureStyleValidity",decl:{start:{line:34,column:9},end:{line:34,column:28}},loc:{start:{line:34,column:36},end:{line:36,column:1}},line:34},6:{name:"indexOfLayer",decl:{start:{line:37,column:9},end:{line:37,column:21}},loc:{start:{line:37,column:39},end:{line:44,column:1}},line:37},7:{name:"getAccessToken",decl:{start:{line:45,column:9},end:{line:45,column:23}},loc:{start:{line:45,column:52},end:{line:52,column:1}},line:45},8:{name:"replaceSourceAccessToken",decl:{start:{line:53,column:9},end:{line:53,column:33}},loc:{start:{line:53,column:67},end:{line:87,column:1}},line:53},9:{name:"replaceAccessTokens",decl:{start:{line:88,column:9},end:{line:88,column:28}},loc:{start:{line:88,column:50},end:{line:103,column:1}},line:88},10:{name:"(anonymous_10)",decl:{start:{line:90,column:40},end:{line:90,column:41}},loc:{start:{line:90,column:56},end:{line:92,column:3}},line:90},11:{name:"stripAccessTokens",decl:{start:{line:104,column:9},end:{line:104,column:26}},loc:{start:{line:104,column:37},end:{line:116,column:1}},line:104}},branchMap:{0:{loc:{start:{line:12,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},1:{loc:{start:{line:12,column:6},end:{line:12,column:35}},type:"binary-expr",locations:[{start:{line:12,column:6},end:{line:12,column:22}},{start:{line:12,column:26},end:{line:12,column:35}}],line:12},2:{loc:{start:{line:39,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},3:{loc:{start:{line:46,column:19},end:{line:46,column:42}},type:"binary-expr",locations:[{start:{line:46,column:19},end:{line:46,column:36}},{start:{line:46,column:40},end:{line:46,column:42}}],line:46},4:{loc:{start:{line:48,column:2},end:{line:50,column:3}},type:"if",locations:[{start:{line:48,column:2},end:{line:50,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:48,column:6},end:{line:48,column:40}},type:"binary-expr",locations:[{start:{line:48,column:6},end:{line:48,column:24}},{start:{line:48,column:28},end:{line:48,column:40}}],line:48},6:{loc:{start:{line:53,column:56},end:{line:53,column:65}},type:"default-arg",locations:[{start:{line:53,column:63},end:{line:53,column:65}}],line:53},7:{loc:{start:{line:55,column:2},end:{line:55,column:31}},type:"if",locations:[{start:{line:55,column:2},end:{line:55,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},8:{loc:{start:{line:56,column:2},end:{line:56,column:57}},type:"if",locations:[{start:{line:56,column:2},end:{line:56,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},9:{loc:{start:{line:56,column:6},end:{line:56,column:39}},type:"binary-expr",locations:[{start:{line:56,column:6},end:{line:56,column:24}},{start:{line:56,column:28},end:{line:56,column:39}}],line:56},10:{loc:{start:{line:58,column:2},end:{line:64,column:3}},type:"if",locations:[{start:{line:58,column:2},end:{line:64,column:3}},{start:{line:60,column:9},end:{line:64,column:3}}],line:58},11:{loc:{start:{line:58,column:6},end:{line:58,column:89}},type:"binary-expr",locations:[{start:{line:58,column:6},end:{line:58,column:46}},{start:{line:58,column:50},end:{line:58,column:89}}],line:58},12:{loc:{start:{line:60,column:9},end:{line:64,column:3}},type:"if",locations:[{start:{line:60,column:9},end:{line:64,column:3}},{start:{line:62,column:9},end:{line:64,column:3}}],line:60},13:{loc:{start:{line:60,column:13},end:{line:60,column:70}},type:"binary-expr",locations:[{start:{line:60,column:13},end:{line:60,column:28}},{start:{line:60,column:32},end:{line:60,column:70}}],line:60},14:{loc:{start:{line:62,column:9},end:{line:64,column:3}},type:"if",locations:[{start:{line:62,column:9},end:{line:64,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},15:{loc:{start:{line:62,column:13},end:{line:62,column:70}},type:"binary-expr",locations:[{start:{line:62,column:13},end:{line:62,column:28}},{start:{line:62,column:32},end:{line:62,column:70}}],line:62},16:{loc:{start:{line:66,column:2},end:{line:68,column:3}},type:"if",locations:[{start:{line:66,column:2},end:{line:68,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:66},17:{loc:{start:{line:70,column:2},end:{line:74,column:3}},type:"if",locations:[{start:{line:70,column:2},end:{line:74,column:3}},{start:{line:72,column:9},end:{line:74,column:3}}],line:70},18:{loc:{start:{line:88,column:39},end:{line:88,column:48}},type:"default-arg",locations:[{start:{line:88,column:46},end:{line:88,column:48}}],line:88},19:{loc:{start:{line:93,column:2},end:{line:101,column:3}},type:"if",locations:[{start:{line:93,column:2},end:{line:101,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},20:{loc:{start:{line:93,column:6},end:{line:93,column:114}},type:"binary-expr",locations:[{start:{line:93,column:6},end:{line:93,column:21}},{start:{line:93,column:26},end:{line:93,column:69}},{start:{line:93,column:73},end:{line:93,column:113}}],line:93},21:{loc:{start:{line:95,column:4},end:{line:100,column:5}},type:"if",locations:[{start:{line:95,column:4},end:{line:100,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:95}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0],19:[0,0],20:[0,0,0],21:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/style.ts"],names:[],mappings:"AAAA,SAAQ,mBAAkB;AAE1B,OAAO,YAAY;AAInB,MAAM,aAAa,oBAAoB;AAAA,EACrC,SAAS;AAAA,EACT,SAAS,CAAC;AAAA,EACV,QAAQ,CAAC;AACX,CAAC;AAED,SAAS,aAAa;AACpB,SAAO,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,UAAU,GAAG,CAAC;AAClD;AAEA,SAAS,YAAY,OAAuE;AAC1F,MAAG,EAAE,QAAQ,UAAU,CAAC,MAAM,IAAI;AAChC,UAAM,KAAK,WAAW;AAAA,EACxB;AACA,SAAO;AACT;AAEA,SAAS,uBAAuB,OAAiC;AAC/D,QAAM,gBAAgB,MAAM,OAAO,IAAI,WAAS;AAC9C,UAAM,eAA2D,EAAE,GAAG,MAAM;AAC5E,WAAO,aAAa;AACpB,WAAO;AAAA,EACT,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ;AAAA,EACV;AACF;AAEA,SAAS,gBAAgB,OAAiC;AACxD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ,YAAY,MAAM,MAAM;AAAA,EAClC;AACF;AAEA,SAAS,oBAAoB,OAAqD;AAChF,SAAO,uBAAuB,gBAAgB,YAAY,KAAK,CAAC,CAAC;AACnE;AAEA,SAAS,aAAa,QAA8B,SAAiB;AACnE,WAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,QAAG,OAAO,CAAC,EAAE,OAAO,SAAS;AAC3B,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,eAAe,YAAoB,UAA8B,MAAiC;AACzG,QAAM,WAAW,SAAS,YAAY,CAAC;AACvC,MAAI,cAAc,SAAS,YAAY,UAAU,eAAe;AAEhE,MAAG,KAAK,iBAAiB,CAAC,aAAa;AACrC,kBAAc,OAAO,UAAiC;AAAA,EACxD;AAEA,SAAO;AACT;AAEA,SAAS,yBAAyB,UAA8B,YAAoB,OAAK,CAAC,GAAG;AAC3F,QAAM,SAAS,SAAS,QAAQ,UAAU;AAC1C,MAAG,CAAC,OAAQ,QAAO;AACnB,MAAG,EAAE,SAAS,WAAW,CAAC,OAAO,IAAK,QAAO;AAE7C,MAAI,iBAAiB;AACrB,MAAG,eAAe,6BAA6B,eAAe,0BAA0B;AACtF,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AAGpE,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AACpE,qBAAiB;AAAA,EACnB;AAEA,QAAM,cAAc,eAAe,gBAAgB,UAAU,IAAI;AAEjE,MAAG,CAAC,aAAa;AAEf,WAAO;AAAA,EACT;AAEA,MAAI;AACJ,MAAI,kBAAkB,UAAU;AAI9B,gBAAY,GAAG,OAAO,GAAG,YAAY,WAAW;AAAA,EAClD,OAAO;AACL,gBAAY,OAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,EACrD;AAEA,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,UAAU,GAAG;AAAA,MACZ,GAAG;AAAA,MACH,KAAK;AAAA,IACP;AAAA,EACF;AACA,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACA,SAAO;AACT;AAEA,SAAS,oBAAoB,UAA8B,OAAK,CAAC,GAAG;AAClE,MAAI,eAAe;AAEnB,SAAO,KAAK,SAAS,OAAO,EAAE,QAAQ,CAAC,eAAe;AACpD,mBAAe,yBAAyB,cAAc,YAAY,IAAI;AAAA,EACxE,CAAC;AAED,MAAI,SAAS,WAAW,SAAS,OAAO,MAAM,oBAAoB,KAAK,SAAS,OAAO,MAAM,iBAAiB,IAAI;AAChH,UAAM,iBAAiB,eAAe,gBAAgB,UAAU,IAAI;AACpE,QAAI,gBAAgB;AAClB,qBAAe;AAAA,QACb,GAAG;AAAA,QACH,QAAQ,SAAS,OAAO,QAAQ,SAAS,cAAc;AAAA,MACzD;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,kBAAkB,UAA8B;AACvD,QAAM,kBAAkB;AAAA,IACtB,GAAG,SAAS;AAAA,EACd;AACA,SAAO,gBAAgB,oCAAoC;AAC3D,SAAO,gBAAgB,qCAAqC;AAC5D,SAAO,gBAAgB,8BAA8B;AACrD,SAAO,gBAAgB,kCAAkC;AACzD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,UAAU;AAAA,EACZ;AACF;AAEA,eAAe;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"16e079a55cdd4175ffeada8708d6c49d219f1229"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Vn=function(){return l},l}Vn();const ghe=(Vn().s[0]++,uj({version:8,sources:{},layers:[]}));function Aj(){return Vn().f[0]++,Vn().s[1]++,Math.random().toString(36).substring(2,9)}function yhe(n){return Vn().f[1]++,Vn().s[2]++,Vn().b[1][0]++,!("id"in n)||(Vn().b[1][1]++,!n.id)?(Vn().b[0][0]++,Vn().s[3]++,n.id=Aj()):Vn().b[0][1]++,Vn().s[4]++,n}function vhe(n){Vn().f[2]++;const e=(Vn().s[5]++,n.layers.map(t=>{Vn().f[3]++;const i=(Vn().s[6]++,{...t});return Vn().s[7]++,delete i.interactive,Vn().s[8]++,i}));return Vn().s[9]++,{...n,layers:e}}function Che(n){return Vn().f[4]++,Vn().s[10]++,{...n,layers:DB(n.layers)}}function uj(n){return Vn().f[5]++,Vn().s[11]++,vhe(Che(yhe(n)))}function _he(n,e){Vn().f[6]++,Vn().s[12]++;for(let t=(Vn().s[13]++,0);t<n.length;t++){if(Vn().s[14]++,n[t].id===e)return Vn().b[2][0]++,Vn().s[15]++,t;Vn().b[2][1]++}return Vn().s[16]++,null}function t7(n,e,t){Vn().f[7]++;const i=(Vn().s[17]++,Vn().b[3][0]++,e.metadata||(Vn().b[3][1]++,{}));let r=(Vn().s[18]++,i[`maputnik:${n}_access_token`]);return Vn().s[19]++,Vn().b[5][0]++,t.allowFallback&&(Vn().b[5][1]++,!r)?(Vn().b[4][0]++,Vn().s[20]++,r=lj[n]):Vn().b[4][1]++,Vn().s[21]++,r}function bhe(n,e,t=(Vn().b[6][0]++,{})){Vn().f[8]++;const i=(Vn().s[22]++,n.sources[e]);if(Vn().s[23]++,i)Vn().b[7][1]++;else return Vn().b[7][0]++,Vn().s[24]++,n;if(Vn().s[25]++,Vn().b[9][0]++,!("url"in i)||(Vn().b[9][1]++,!i.url))return Vn().b[8][0]++,Vn().s[26]++,n;Vn().b[8][1]++;let r=(Vn().s[27]++,e);Vn().s[28]++,Vn().b[11][0]++,e==="thunderforest_transport"||(Vn().b[11][1]++,e==="thunderforest_outdoors")?(Vn().b[10][0]++,Vn().s[29]++,r="thunderforest"):(Vn().b[10][1]++,Vn().s[30]++,Vn().b[13][0]++,"url"in i&&(Vn().b[13][1]++,i.url?.match(/\.stadiamaps\.com/))?(Vn().b[12][0]++,Vn().s[31]++,r="stadia"):(Vn().b[12][1]++,Vn().s[32]++,Vn().b[15][0]++,"url"in i&&(Vn().b[15][1]++,i.url?.match(/\.locationiq\.com/))?(Vn().b[14][0]++,Vn().s[33]++,r="locationiq"):Vn().b[14][1]++));const a=(Vn().s[34]++,t7(r,n,t));if(Vn().s[35]++,a)Vn().b[16][1]++;else return Vn().b[16][0]++,Vn().s[36]++,n;let l;Vn().s[37]++,r=="stadia"?(Vn().b[17][0]++,Vn().s[38]++,l=`${i.url}?api_key=${a}`):(Vn().b[17][1]++,Vn().s[39]++,l=i.url.replace("{key}",a));const o=(Vn().s[40]++,{...n.sources,[e]:{...i,url:l}}),m=(Vn().s[41]++,{...n,sources:o});return Vn().s[42]++,m}function xhe(n,e=(Vn().b[18][0]++,{})){Vn().f[9]++;let t=(Vn().s[43]++,n);if(Vn().s[44]++,Object.keys(n.sources).forEach(i=>{Vn().f[10]++,Vn().s[45]++,t=bhe(t,i,e)}),Vn().s[46]++,Vn().b[20][0]++,n.glyphs&&(Vn().b[20][1]++,n.glyphs.match(/\.tilehosting\.com/)||(Vn().b[20][2]++,n.glyphs.match(/\.maptiler\.com/)))){Vn().b[19][0]++;const i=(Vn().s[47]++,t7("openmaptiles",n,e));Vn().s[48]++,i?(Vn().b[21][0]++,Vn().s[49]++,t={...t,glyphs:n.glyphs.replace("{key}",i)}):Vn().b[21][1]++}else Vn().b[19][1]++;return Vn().s[50]++,t}function Mhe(n){Vn().f[11]++;const e=(Vn().s[51]++,{...n.metadata});return Vn().s[52]++,delete e["maputnik:openmaptiles_access_token"],Vn().s[53]++,delete e["maputnik:thunderforest_access_token"],Vn().s[54]++,delete e["maputnik:stadia_access_token"],Vn().s[55]++,delete e["maputnik:locationiq_access_token"],Vn().s[56]++,{...n,metadata:e}}const qd={ensureStyleValidity:uj,emptyStyle:ghe,indexOfLayer:_he,generateId:Aj,getAccessToken:t7,replaceAccessTokens:xhe,stripAccessTokens:Mhe};function Ki(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx",e="16258c524eb55d7b72850177018e588101c2a4df",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx",statementMap:{0:{start:{line:14,column:28},end:{line:14,column:35}},1:{start:{line:15,column:36},end:{line:15,column:83}},2:{start:{line:18,column:4},end:{line:22,column:6}},3:{start:{line:25,column:4},end:{line:33,column:5}},4:{start:{line:26,column:6},end:{line:30,column:9}},5:{start:{line:32,column:6},end:{line:32,column:36}},6:{start:{line:36,column:23},end:{line:36,column:44}},7:{start:{line:37,column:22},end:{line:37,column:69}},8:{start:{line:38,column:17},end:{line:62,column:1}},9:{start:{line:63,column:17},end:{line:63,column:70}},10:{start:{line:64,column:23},end:{line:64,column:40}},11:{start:{line:65,column:4},end:{line:65,column:39}},12:{start:{line:68,column:23},end:{line:68,column:44}},13:{start:{line:69,column:4},end:{line:74,column:5}},14:{start:{line:70,column:19},end:{line:70,column:85}},15:{start:{line:71,column:25},end:{line:71,column:42}},16:{start:{line:72,column:6},end:{line:72,column:41}},17:{start:{line:73,column:6},end:{line:73,column:13}},18:{start:{line:75,column:21},end:{line:75,column:42}},19:{start:{line:76,column:4},end:{line:80,column:5}},20:{start:{line:77,column:6},end:{line:77,column:49}},21:{start:{line:78,column:6},end:{line:78,column:45}},22:{start:{line:79,column:6},end:{line:79,column:37}},23:{start:{line:79,column:30},end:{line:79,column:37}},24:{start:{line:81,column:21},end:{line:81,column:54}},25:{start:{line:82,column:4},end:{line:82,column:37}},26:{start:{line:83,column:4},end:{line:83,column:27}},27:{start:{line:84,column:4},end:{line:84,column:30}},28:{start:{line:87,column:23},end:{line:87,column:44}},29:{start:{line:88,column:23},end:{line:88,column:52}},30:{start:{line:89,column:4},end:{line:89,column:43}},31:{start:{line:90,column:4},end:{line:90,column:35}},32:{start:{line:90,column:28},end:{line:90,column:35}},33:{start:{line:91,column:21},end:{line:91,column:54}},34:{start:{line:92,column:4},end:{line:92,column:37}},35:{start:{line:93,column:4},end:{line:93,column:27}},36:{start:{line:94,column:4},end:{line:94,column:30}},37:{start:{line:97,column:23},end:{line:105,column:5}},38:{start:{line:106,column:23},end:{line:106,column:66}},39:{start:{line:107,column:4},end:{line:107,column:43}},40:{start:{line:108,column:4},end:{line:108,column:22}},41:{start:{line:111,column:25},end:{line:117,column:5}},42:{start:{line:118,column:4},end:{line:118,column:44}},43:{start:{line:121,column:14},end:{line:121,column:26}},44:{start:{line:122,column:16},end:{line:122,column:38}},45:{start:{line:123,column:4},end:{line:188,column:6}},46:{start:{line:191,column:20},end:{line:191,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:19},end:{line:23,column:3}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:34,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:15},end:{line:66,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:20},end:{line:85,column:3}},line:67},4:{name:"(anonymous_4)",decl:{start:{line:86,column:2},end:{line:86,column:3}},loc:{start:{line:86,column:22},end:{line:95,column:3}},line:86},5:{name:"(anonymous_5)",decl:{start:{line:96,column:2},end:{line:96,column:3}},loc:{start:{line:96,column:27},end:{line:109,column:3}},line:96},6:{name:"(anonymous_6)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:42},end:{line:119,column:3}},line:110},7:{name:"(anonymous_7)",decl:{start:{line:120,column:2},end:{line:120,column:3}},loc:{start:{line:120,column:11},end:{line:189,column:3}},line:120}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:25},1:{loc:{start:{line:37,column:22},end:{line:37,column:69}},type:"binary-expr",locations:[{start:{line:37,column:22},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:69}}],line:37},2:{loc:{start:{line:69,column:4},end:{line:74,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:74,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:76,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:76,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76},4:{loc:{start:{line:79,column:6},end:{line:79,column:37}},type:"if",locations:[{start:{line:79,column:6},end:{line:79,column:37}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},5:{loc:{start:{line:90,column:4},end:{line:90,column:35}},type:"if",locations:[{start:{line:90,column:4},end:{line:90,column:35}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90},6:{loc:{start:{line:140,column:24},end:{line:140,column:58}},type:"binary-expr",locations:[{start:{line:140,column:24},end:{line:140,column:52}},{start:{line:140,column:56},end:{line:140,column:58}}],line:140},7:{loc:{start:{line:149,column:24},end:{line:149,column:58}},type:"binary-expr",locations:[{start:{line:149,column:24},end:{line:149,column:52}},{start:{line:149,column:56},end:{line:149,column:58}}],line:149},8:{loc:{start:{line:158,column:24},end:{line:158,column:58}},type:"binary-expr",locations:[{start:{line:158,column:24},end:{line:158,column:52}},{start:{line:158,column:56},end:{line:158,column:58}}],line:158},9:{loc:{start:{line:167,column:24},end:{line:167,column:58}},type:"binary-expr",locations:[{start:{line:167,column:24},end:{line:167,column:52}},{start:{line:167,column:56},end:{line:167,column:58}}],line:167},10:{loc:{start:{line:177,column:12},end:{line:180,column:16}},type:"binary-expr",locations:[{start:{line:177,column:12},end:{line:177,column:39}},{start:{line:177,column:59},end:{line:180,column:16}}],line:177}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx"],names:[],mappings:"AAoKQ,cAKA,YALA;AApKR,OAAO,WAAW;AAClB,OAAO,aAAa;AACpB,SAAQ,cAAa;AACrB,SAAQ,eAAc;AACtB,SAAQ,cAAa;AACrB,SAAQ,OAAO,cAAa;AAC5B,SAAyB,uBAAsB;AAE/C,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAIhC,MAAM,sBAAsB;AAC5B,MAAM,8BAA8B,OAAO,OAAO,uBAAuB;AAazE,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAE1E,iBAAiB;AACf,WAAO;AAAA,MACL,MAAM;AAAA,QACJ,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MAC/C;AAAA,IACF;AAAA,EACF;AAAA,EAEA,aAAa;AACX,QAAI,KAAK,MAAM,SAAS,MAAM;AAC5B,aAAO,QAAQ,KAAK,MAAM,SAAS,MAAM;AAAA,QACvC,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,OAAO;AAAA,MACT,CAAC;AAAA,IACH,OAAO;AACL,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AAAA,EACF;AAAA,EAEA,aAAa;AACX,UAAM,aAAa,KAAK,eAAe;AACvC,UAAM,YAAY,KAAK,MAAM,SAAS,QAAQ,KAAK,MAAM,EAAE,KAAK;AAChE,UAAM,OAAO;AAAA;AAAA;AAAA;AAAA,WAIN,SAAS;AAAA;AAAA,+CAE2B,mBAAmB;AAAA,8CACpB,mBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAW/C,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQxB,UAAM,OAAO,IAAI,KAAK,CAAC,IAAI,GAAG,EAAC,MAAM,0BAAyB,CAAC;AAC/D,UAAM,aAAa,KAAK,WAAW;AACnC,WAAO,MAAM,aAAa,OAAO;AAAA,EACnC;AAAA,EAEA,MAAM,YAAY;AAChB,UAAM,aAAa,KAAK,eAAe;AAIvC,QAAI,CAAC,6BAA6B;AAChC,YAAM,OAAO,IAAI,KAAK,CAAC,UAAU,GAAG,EAAC,MAAM,iCAAgC,CAAC;AAC5E,YAAM,aAAa,KAAK,WAAW;AACnC,aAAO,MAAM,aAAa,OAAO;AACjC;AAAA,IACF;AAEA,QAAI,aAAa,KAAK,MAAM;AAC5B,QAAI,cAAc,MAAM;AACtB,mBAAa,MAAM,KAAK,iBAAiB;AACzC,WAAK,MAAM,gBAAgB,UAAU;AACrC,UAAI,cAAc,KAAM;AAAA,IAC1B;AAEA,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,cAAc;AAClB,UAAM,aAAa,KAAK,eAAe;AAEvC,UAAM,aAAa,MAAM,KAAK,iBAAiB;AAC/C,SAAK,MAAM,gBAAgB,UAAU;AACrC,QAAI,cAAc,KAAM;AAExB,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,mBAAyD;AAC7D,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAC,oBAAoB,CAAC,OAAO,EAAC;AAAA,QACxC;AAAA,MACF;AAAA,MACA,eAAe,KAAK,WAAW;AAAA,IACjC;AAEA,UAAM,aAAa,MAAM,OAAO,mBAAmB,UAAU;AAC7D,SAAK,MAAM,gBAAgB,UAAU;AACrC,WAAO;AAAA,EACT;AAAA,EAEA,uBAAuB,UAAkB,OAAY;AACnD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,MAAM,oBAAoB,CAAC;AACjC,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,YAAY;AAAA,QACrB,WAAU;AAAA,QAGV,+BAAC,aAAQ,WAAU,0BACjB;AAAA,8BAAC,QAAI,YAAE,YAAY,GAAE;AAAA,UACrB,oBAAC,OACE,YAAE,uCAAuC,GAC5C;AAAA,UAEA,qBAAC,SACC;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,gBAC1C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,oCAAoC;AAAA,gBACvF,UAAU,KAAK,uBAAuB,KAAK,MAAM,oCAAoC;AAAA;AAAA,YACvF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,gBAC/C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,qCAAqC;AAAA,gBACxF,UAAU,KAAK,uBAAuB,KAAK,MAAM,qCAAqC;AAAA;AAAA,YACxF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,gBACxC,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,8BAA8B;AAAA,gBACjF,UAAU,KAAK,uBAAuB,KAAK,MAAM,8BAA8B;AAAA;AAAA,YACjF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,wBAAwB;AAAA,gBAC5C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,kCAAkC;AAAA,gBACrF,UAAU,KAAK,uBAAuB,KAAK,MAAM,kCAAkC;AAAA;AAAA,YACrF;AAAA,aACF;AAAA,UAEA,qBAAC,SAAI,WAAU,iCACb;AAAA,iCAAC,eAAY,SAAS,KAAK,UAAU,KAAK,IAAI,GAC5C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,MAAM;AAAA,eACX;AAAA,YACC,+BACC,qBAAC,eAAY,SAAS,KAAK,YAAY,KAAK,IAAI,GAC9C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,SAAS;AAAA,eACd;AAAA,YAGF,qBAAC,eAAY,SAAS,KAAK,WAAW,KAAK,IAAI,GAC7C;AAAA,kCAAC,SAAK;AAAA,cACL,EAAE,aAAa;AAAA,eAClB;AAAA,aACF;AAAA,WACF;AAAA;AAAA,IAEF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"16258c524eb55d7b72850177018e588101c2a4df"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Ki=function(){return l},l}Ki();const BK=(Ki().s[0]++,dhe),OK=(Ki().s[1]++,typeof window.showSaveFilePicker=="function");class She extends ni.Component{tokenizedStyle(){return Ki().f[0]++,Ki().s[2]++,AV(qd.stripAccessTokens(qd.replaceAccessTokens(this.props.mapStyle)))}exportName(){return Ki().f[1]++,Ki().s[3]++,this.props.mapStyle.name?(Ki().b[0][0]++,Ki().s[4]++,uhe(this.props.mapStyle.name,{replacement:"_",remove:/[*\-+~.()'"!:]/g,lower:!0})):(Ki().b[0][1]++,Ki().s[5]++,this.props.mapStyle.id)}createHtml(){Ki().f[2]++;const e=(Ki().s[6]++,this.tokenizedStyle()),t=(Ki().s[7]++,Ki().b[1][0]++,this.props.mapStyle.name||(Ki().b[1][1]++,this.props.t("Map"))),i=(Ki().s[8]++,`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>${t}</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <script src="https://unpkg.com/maplibre-gl@${BK}/dist/maplibre-gl.js"><\/script>
  <link href="https://unpkg.com/maplibre-gl@${BK}/dist/maplibre-gl.css" rel="stylesheet" />
  <style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
      const map = new maplibregl.Map({
         container: 'map',
         style: ${e},
      });
      map.addControl(new maplibregl.NavigationControl());
  <\/script>
</body>
</html>
`),r=(Ki().s[9]++,new Blob([i],{type:"text/html;charset=utf-8"})),a=(Ki().s[10]++,this.exportName());Ki().s[11]++,EK.saveAs(r,a+".html")}async saveStyle(){Ki().f[3]++;const e=(Ki().s[12]++,this.tokenizedStyle());if(Ki().s[13]++,OK)Ki().b[2][1]++;else{Ki().b[2][0]++;const r=(Ki().s[14]++,new Blob([e],{type:"application/json;charset=utf-8"})),a=(Ki().s[15]++,this.exportName());Ki().s[16]++,EK.saveAs(r,a+".json"),Ki().s[17]++;return}let t=(Ki().s[18]++,this.props.fileHandle);if(Ki().s[19]++,t==null)if(Ki().b[3][0]++,Ki().s[20]++,t=await this.createFileHandle(),Ki().s[21]++,this.props.onSetFileHandle(t),Ki().s[22]++,t==null){Ki().b[4][0]++,Ki().s[23]++;return}else Ki().b[4][1]++;else Ki().b[3][1]++;const i=(Ki().s[24]++,await t.createWritable());Ki().s[25]++,await i.write(e),Ki().s[26]++,await i.close(),Ki().s[27]++,this.props.onOpenToggle()}async saveStyleAs(){Ki().f[4]++;const e=(Ki().s[28]++,this.tokenizedStyle()),t=(Ki().s[29]++,await this.createFileHandle());if(Ki().s[30]++,this.props.onSetFileHandle(t),Ki().s[31]++,t==null){Ki().b[5][0]++,Ki().s[32]++;return}else Ki().b[5][1]++;const i=(Ki().s[33]++,await t.createWritable());Ki().s[34]++,await i.write(e),Ki().s[35]++,await i.close(),Ki().s[36]++,this.props.onOpenToggle()}async createFileHandle(){Ki().f[5]++;const e=(Ki().s[37]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],suggestedName:this.exportName()}),t=(Ki().s[38]++,await window.showSaveFilePicker(e));return Ki().s[39]++,this.props.onSetFileHandle(t),Ki().s[40]++,t}changeMetadataProperty(e,t){Ki().f[6]++;const i=(Ki().s[41]++,{...this.props.mapStyle,metadata:{...this.props.mapStyle.metadata,[e]:t}});Ki().s[42]++,this.props.onStyleChanged(i)}render(){Ki().f[7]++;const e=(Ki().s[43]++,this.props.t),t=(Ki().s[44]++,sj(e));return Ki().s[45]++,ce.jsx(z1,{"data-wd-key":"modal:export",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Save Style"),className:"maputnik-export-modal",children:ce.jsxs("section",{className:"maputnik-modal-section",children:[ce.jsx("h1",{children:e("Save Style")}),ce.jsx("p",{children:e("Save the JSON style to your computer.")}),ce.jsxs("div",{children:[ce.jsx(fm,{label:t.maputnik.maptiler_access_token.label,fieldSpec:t.maputnik.maptiler_access_token,value:(Ki().b[6][0]++,this.props.mapStyle.metadata||(Ki().b[6][1]++,{}))["maputnik:openmaptiles_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:openmaptiles_access_token")}),ce.jsx(fm,{label:t.maputnik.thunderforest_access_token.label,fieldSpec:t.maputnik.thunderforest_access_token,value:(Ki().b[7][0]++,this.props.mapStyle.metadata||(Ki().b[7][1]++,{}))["maputnik:thunderforest_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:thunderforest_access_token")}),ce.jsx(fm,{label:t.maputnik.stadia_access_token.label,fieldSpec:t.maputnik.stadia_access_token,value:(Ki().b[8][0]++,this.props.mapStyle.metadata||(Ki().b[8][1]++,{}))["maputnik:stadia_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:stadia_access_token")}),ce.jsx(fm,{label:t.maputnik.locationiq_access_token.label,fieldSpec:t.maputnik.locationiq_access_token,value:(Ki().b[9][0]++,this.props.mapStyle.metadata||(Ki().b[9][1]++,{}))["maputnik:locationiq_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:locationiq_access_token")})]}),ce.jsxs("div",{className:"maputnik-modal-export-buttons",children:[ce.jsxs(ml,{onClick:this.saveStyle.bind(this),children:[ce.jsx(B6,{}),e("Save")]}),(Ki().b[10][0]++,OK&&(Ki().b[10][1]++,ce.jsxs(ml,{onClick:this.saveStyleAs.bind(this),children:[ce.jsx(B6,{}),e("Save as")]}))),ce.jsxs(ml,{onClick:this.createHtml.bind(this),children:[ce.jsx(a$,{}),e("Create HTML")]})]})]})})}}const whe=(Ki().s[46]++,ss()(She));function Z_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",e="2e5d03b7f42a543faefa54bee9f15b9e801b91be",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",statementMap:{0:{start:{line:4,column:26},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:127}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:26},end:{line:4,column:27}},loc:{start:{line:4,column:37},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx"],names:[],mappings:"AAUM;AAVN,OAAO,uBAAiD;AACxD,OAAO,cAAc;AAMrB,MAAM,oBAAsD,CAAC,UAAU;AACrE,SACE,oBAAC,YAAS,OAAO,MAAM,OACrB,8BAAC,qBAAmB,GAAG,OAAO,GAChC;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2e5d03b7f42a543faefa54bee9f15b9e801b91be"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Z_=function(){return l},l}Z_();Z_().s[0]++;const cj=n=>(Z_().f[0]++,Z_().s[1]++,ce.jsx(G_,{label:n.label,children:ce.jsx(ej,{...n})}));function X_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",e="c125b14cc26e01a4ebcfb9f19e77a3d5d28023c7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",statementMap:{0:{start:{line:4,column:22},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:120}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:22},end:{line:4,column:23}},loc:{start:{line:4,column:33},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx"],names:[],mappings:"AAYM;AAZN,OAAO,WAAW;AAClB,OAAO,mBAAyC;AAQhD,MAAM,gBAA8C,CAAC,UAAU;AAC7D,SACE,oBAAC,SAAM,OAAO,MAAM,OAClB,8BAAC,iBAAe,GAAG,OAAO,GAC5B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c125b14cc26e01a4ebcfb9f19e77a3d5d28023c7"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return X_=function(){return l},l}X_();X_().s[0]++;const Ehe=n=>(X_().f[0]++,X_().s[1]++,ce.jsx(Ks,{label:n.label,children:ce.jsx(XG,{...n})}));function Nn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx",e="e0e9caddbd5f7d5c69c7ac8202b6df075201571c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx",statementMap:{0:{start:{line:15,column:14},end:{line:15,column:26}},1:{start:{line:16,column:4},end:{line:30,column:9}},2:{start:{line:23,column:29},end:{line:26,column:12}},3:{start:{line:35,column:4},end:{line:38,column:7}},4:{start:{line:41,column:18},end:{line:41,column:47}},5:{start:{line:42,column:4},end:{line:51,column:6}},6:{start:{line:54,column:14},end:{line:54,column:26}},7:{start:{line:55,column:4},end:{line:99,column:9}},8:{start:{line:66,column:32},end:{line:69,column:12}},9:{start:{line:80,column:33},end:{line:83,column:12}},10:{start:{line:92,column:33},end:{line:95,column:12}},11:{start:{line:102,column:27},end:{line:107,column:1}},12:{start:{line:102,column:34},end:{line:107,column:1}},13:{start:{line:110,column:14},end:{line:110,column:26}},14:{start:{line:111,column:24},end:{line:118,column:5}},15:{start:{line:112,column:26},end:{line:112,column:64}},16:{start:{line:113,column:6},end:{line:113,column:29}},17:{start:{line:114,column:6},end:{line:117,column:9}},18:{start:{line:119,column:4},end:{line:146,column:9}},19:{start:{line:126,column:29},end:{line:129,column:12}},20:{start:{line:133,column:8},end:{line:144,column:10}},21:{start:{line:141,column:31},end:{line:141,column:52}},22:{start:{line:151,column:14},end:{line:151,column:26}},23:{start:{line:152,column:24},end:{line:159,column:5}},24:{start:{line:153,column:26},end:{line:153,column:64}},25:{start:{line:154,column:6},end:{line:154,column:29}},26:{start:{line:155,column:6},end:{line:158,column:9}},27:{start:{line:160,column:23},end:{line:165,column:5}},28:{start:{line:161,column:6},end:{line:164,column:9}},29:{start:{line:166,column:4},end:{line:192,column:9}},30:{start:{line:179,column:8},end:{line:190,column:10}},31:{start:{line:187,column:31},end:{line:187,column:52}},32:{start:{line:197,column:14},end:{line:197,column:26}},33:{start:{line:198,column:4},end:{line:209,column:6}},34:{start:{line:204,column:28},end:{line:207,column:10}},35:{start:{line:214,column:14},end:{line:214,column:26}},36:{start:{line:215,column:4},end:{line:247,column:9}},37:{start:{line:227,column:12},end:{line:230,column:15}},38:{start:{line:240,column:12},end:{line:243,column:15}},39:{start:{line:252,column:14},end:{line:252,column:26}},40:{start:{line:253,column:4},end:{line:268,column:9}},41:{start:{line:261,column:29},end:{line:264,column:12}},42:{start:{line:273,column:14},end:{line:273,column:26}},43:{start:{line:274,column:24},end:{line:280,column:5}},44:{start:{line:281,column:4},end:{line:345,column:5}},45:{start:{line:283,column:8},end:{line:283,column:79}},46:{start:{line:285,column:8},end:{line:285,column:85}},47:{start:{line:287,column:8},end:{line:287,column:77}},48:{start:{line:289,column:8},end:{line:289,column:76}},49:{start:{line:291,column:8},end:{line:291,column:77}},50:{start:{line:293,column:8},end:{line:305,column:13}},51:{start:{line:298,column:36},end:{line:301,column:14}},52:{start:{line:307,column:8},end:{line:307,column:77}},53:{start:{line:309,column:8},end:{line:336,column:13}},54:{start:{line:315,column:38},end:{line:318,column:16}},55:{start:{line:329,column:38},end:{line:332,column:16}},56:{start:{line:338,column:8},end:{line:338,column:76}},57:{start:{line:340,column:8},end:{line:340,column:74}},58:{start:{line:342,column:8},end:{line:342,column:74}},59:{start:{line:344,column:8},end:{line:344,column:20}},60:{start:{line:348,column:31},end:{line:348,column:80}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:31,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:23,column:20},end:{line:23,column:21}},loc:{start:{line:23,column:29},end:{line:26,column:12}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:24},end:{line:39,column:3}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:19},end:{line:52,column:3}},line:40},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:100,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:66,column:20},end:{line:66,column:21}},loc:{start:{line:66,column:32},end:{line:69,column:12}},line:66},6:{name:"(anonymous_6)",decl:{start:{line:80,column:20},end:{line:80,column:21}},loc:{start:{line:80,column:33},end:{line:83,column:12}},line:80},7:{name:"(anonymous_7)",decl:{start:{line:92,column:20},end:{line:92,column:21}},loc:{start:{line:92,column:33},end:{line:95,column:12}},line:92},8:{name:"(anonymous_8)",decl:{start:{line:102,column:27},end:{line:102,column:28}},loc:{start:{line:102,column:34},end:{line:107,column:1}},line:102},9:{name:"(anonymous_9)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:11},end:{line:147,column:3}},line:109},10:{name:"(anonymous_10)",decl:{start:{line:111,column:24},end:{line:111,column:25}},loc:{start:{line:111,column:38},end:{line:118,column:5}},line:111},11:{name:"(anonymous_11)",decl:{start:{line:126,column:20},end:{line:126,column:21}},loc:{start:{line:126,column:29},end:{line:129,column:12}},line:126},12:{name:"(anonymous_12)",decl:{start:{line:132,column:32},end:{line:132,column:33}},loc:{start:{line:132,column:57},end:{line:145,column:7}},line:132},13:{name:"(anonymous_13)",decl:{start:{line:141,column:22},end:{line:141,column:23}},loc:{start:{line:141,column:31},end:{line:141,column:52}},line:141},14:{name:"(anonymous_14)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:193,column:3}},line:150},15:{name:"(anonymous_15)",decl:{start:{line:152,column:24},end:{line:152,column:25}},loc:{start:{line:152,column:38},end:{line:159,column:5}},line:152},16:{name:"(anonymous_16)",decl:{start:{line:160,column:23},end:{line:160,column:24}},loc:{start:{line:160,column:33},end:{line:165,column:5}},line:160},17:{name:"(anonymous_17)",decl:{start:{line:178,column:32},end:{line:178,column:33}},loc:{start:{line:178,column:57},end:{line:191,column:7}},line:178},18:{name:"(anonymous_18)",decl:{start:{line:187,column:22},end:{line:187,column:23}},loc:{start:{line:187,column:31},end:{line:187,column:52}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:196,column:2},end:{line:196,column:3}},loc:{start:{line:196,column:11},end:{line:210,column:3}},line:196},20:{name:"(anonymous_20)",decl:{start:{line:204,column:18},end:{line:204,column:19}},loc:{start:{line:204,column:28},end:{line:207,column:10}},line:204},21:{name:"(anonymous_21)",decl:{start:{line:213,column:2},end:{line:213,column:3}},loc:{start:{line:213,column:11},end:{line:248,column:3}},line:213},22:{name:"(anonymous_22)",decl:{start:{line:226,column:20},end:{line:226,column:21}},loc:{start:{line:226,column:30},end:{line:231,column:11}},line:226},23:{name:"(anonymous_23)",decl:{start:{line:239,column:20},end:{line:239,column:21}},loc:{start:{line:239,column:33},end:{line:244,column:11}},line:239},24:{name:"(anonymous_24)",decl:{start:{line:251,column:2},end:{line:251,column:3}},loc:{start:{line:251,column:11},end:{line:269,column:3}},line:251},25:{name:"(anonymous_25)",decl:{start:{line:261,column:20},end:{line:261,column:21}},loc:{start:{line:261,column:29},end:{line:264,column:12}},line:261},26:{name:"(anonymous_26)",decl:{start:{line:272,column:2},end:{line:272,column:3}},loc:{start:{line:272,column:11},end:{line:346,column:3}},line:272},27:{name:"(anonymous_27)",decl:{start:{line:298,column:22},end:{line:298,column:23}},loc:{start:{line:298,column:36},end:{line:301,column:14}},line:298},28:{name:"(anonymous_28)",decl:{start:{line:315,column:24},end:{line:315,column:25}},loc:{start:{line:315,column:38},end:{line:318,column:16}},line:315},29:{name:"(anonymous_29)",decl:{start:{line:329,column:24},end:{line:329,column:25}},loc:{start:{line:329,column:38},end:{line:332,column:16}},line:329}},branchMap:{0:{loc:{start:{line:41,column:18},end:{line:41,column:47}},type:"binary-expr",locations:[{start:{line:41,column:18},end:{line:41,column:41}},{start:{line:41,column:45},end:{line:41,column:47}}],line:41},1:{loc:{start:{line:79,column:17},end:{line:79,column:47}},type:"binary-expr",locations:[{start:{line:79,column:17},end:{line:79,column:42}},{start:{line:79,column:46},end:{line:79,column:47}}],line:79},2:{loc:{start:{line:91,column:17},end:{line:91,column:48}},type:"binary-expr",locations:[{start:{line:91,column:17},end:{line:91,column:42}},{start:{line:91,column:46},end:{line:91,column:48}}],line:91},3:{loc:{start:{line:263,column:17},end:{line:263,column:72}},type:"cond-expr",locations:[{start:{line:263,column:48},end:{line:263,column:51}},{start:{line:263,column:54},end:{line:263,column:72}}],line:263},4:{loc:{start:{line:281,column:4},end:{line:345,column:5}},type:"switch",locations:[{start:{line:282,column:6},end:{line:283,column:79}},{start:{line:284,column:6},end:{line:285,column:85}},{start:{line:286,column:6},end:{line:287,column:77}},{start:{line:288,column:6},end:{line:289,column:76}},{start:{line:290,column:6},end:{line:291,column:77}},{start:{line:292,column:6},end:{line:305,column:13}},{start:{line:306,column:6},end:{line:307,column:77}},{start:{line:308,column:6},end:{line:336,column:13}},{start:{line:337,column:6},end:{line:338,column:76}},{start:{line:339,column:6},end:{line:340,column:74}},{start:{line:341,column:6},end:{line:342,column:74}},{start:{line:343,column:6},end:{line:344,column:20}}],line:281},5:{loc:{start:{line:302,column:19},end:{line:302,column:86}},type:"binary-expr",locations:[{start:{line:302,column:19},end:{line:302,column:45}},{start:{line:302,column:49},end:{line:302,column:86}}],line:302},6:{loc:{start:{line:319,column:21},end:{line:319,column:92}},type:"binary-expr",locations:[{start:{line:319,column:21},end:{line:319,column:47}},{start:{line:319,column:51},end:{line:319,column:92}}],line:319},7:{loc:{start:{line:333,column:21},end:{line:333,column:92}},type:"binary-expr",locations:[{start:{line:333,column:21},end:{line:333,column:47}},{start:{line:333,column:51},end:{line:333,column:92}}],line:333}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx"],names:[],mappings:"AA6BW,SACL,KADK;AA7BX,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,SAA0B,uBAAuB;AAGjD,OAAO,WAAW;AAClB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,eAAe;AACtB,OAAO,mBAAmB;AAc1B,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,cAAc;AAAA,UACvB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAaA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,eAAe,OAAiB;AAC9B,SAAK,MAAM,SAAS;AAAA,MAClB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB;AACf,UAAM,QAAQ,KAAK,MAAM,OAAO,SAAS,CAAC;AAC1C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,KAAK,MAAM,EAAE,UAAU;AAAA,QAC9B,WAAW,OAAO,cAAc;AAAA,QAChC,MAAK;AAAA,QACL,OAAO;AAAA,QACP,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,IACzC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACL;AAAA,WAAK,eAAe;AAAA,MACrB;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,SAAS;AAAA,YACP,CAAC,OAAO,mCAAmC;AAAA,YAC3C,CAAC,OAAO,yBAAyB;AAAA,UACnC;AAAA,UACA,UAAU,YAAU,KAAK,MAAM,SAAS;AAAA,YACtC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA,UACD,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEF;AACF;AAEA,MAAM,qBAAyE,CAAC,MAAO;AAAA,EACrF,EAAE,OAAO,EAAE,gBAAgB,GAAG,KAAK,WAAW;AAAA,EAC9C,EAAE,OAAO,EAAE,iBAAiB,GAAG,KAAK,YAAY;AAAA,EAChD,EAAE,OAAO,EAAE,oBAAoB,GAAG,KAAK,eAAe;AAAA,EACtD,EAAE,OAAO,EAAE,mBAAmB,GAAG,KAAK,cAAc;AACtD;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,aAAa,CAAC,SAAmB;AACrC,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,MAAK;AAAA,UACL,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,SAAS,CAAC;AAAA,UACV,UAAU;AAAA;AAAA,MACZ;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AASA,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,aAAa;AAAA,QACtB,WAAW,OAAO,eAAe;AAAA,QACjC,OAAO,KAAK,MAAM,OAAO;AAAA,QACzB,UAAU,UAAQ,KAAK,MAAM,SAAS;AAAA,UACpC,GAAG,KAAK,MAAM;AAAA,UACd;AAAA,QACF,CAAC;AAAA;AAAA,IACH;AAAA,EACF;AACF;AAUA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA,0BAAC,SAAM,OAAO,EAAE,SAAS,GAAG,WAAW,OAAO,eAAe,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,WAAW;AAAA,UACX,MAAM;AAAA,YACJ,MAAM;AAAA,YACN,MAAM;AAAA,UACR;AAAA,UACA,MAAM;AAAA,UACN,UAAU,UAAQ;AAChB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,SAAS;AAAA,UAClB,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,aAAW;AACnB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAUA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA,UACZ,UAAU,CAAC,QAAgB,KAAK,MAAM,SAAS;AAAA,YAC7C,GAAG,KAAK,MAAM;AAAA,YACd,KAAK,IAAI,WAAW,YAAY,IAAI,MAAM,aAAa,GAAG;AAAA,UAC5D,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAQA,MAAM,uCAAuC,MAAM,UAA+C;AAAA,EAChG,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,UAAU,KAAK,MAAM;AAAA,MACrB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM,KAAK,MAAM;AAAA,MACjB,QAAQ,KAAK,MAAM;AAAA,IACrB;AACA,YAAO,KAAK,MAAM,MAAM;AAAA,MACxB,KAAK;AAAe,eAAO,oBAAC,0BAAwB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAgB,eAAO,oBAAC,gCAA8B,GAAG,aAAa;AAAA,MAC3E,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACjE,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAClD;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,WAAW;AAAA,YACpB,WAAW,OAAO,cAAc;AAAA,YAChC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,cACxC,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,YACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,cAAc,SAAS;AAAA,YACnE,eAAY;AAAA;AAAA,QACd,GACF;AAAA,MACA,KAAK;AAAuB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MAC1E,KAAK;AAAsB,eAAO,qBAAC,uBAAqB,GAAG,aACzD;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,WAAW;AAAA,cACpB,WAAW,OAAO,kBAAkB;AAAA,cACpC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA,cACvE,eAAY;AAAA;AAAA,UACd;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,UAAU;AAAA,cACnB,WAAW,OAAO,kBAAkB;AAAA,cACpC,SAAS,OAAO,KAAK,OAAO,kBAAkB,SAAS,MAAM;AAAA,cAC7D,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA;AAAA,UACzE;AAAA,WACF;AAAA,MACA,KAAK;AAAkB,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD;AAAS,eAAO;AAAA,IAChB;AAAA,EACF;AACF;AAEA,MAAM,yBAAyB,gBAAgB,EAAE,8BAA8B;AAC/E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e0e9caddbd5f7d5c69c7ac8202b6df075201571c"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Nn=function(){return l},l}Nn();class cE extends ni.Component{render(){Nn().f[0]++;const e=(Nn().s[0]++,this.props.t);return Nn().s[1]++,ce.jsxs("div",{children:[ce.jsx(Fv,{label:e("TileJSON URL"),fieldSpec:Ua.source_vector.url,value:this.props.source.url,onChange:t=>(Nn().f[1]++,Nn().s[2]++,this.props.onChange({...this.props.source,url:t}))}),this.props.children]})}}class hE extends ni.Component{changeTileUrls(e){Nn().f[2]++,Nn().s[3]++,this.props.onChange({...this.props.source,tiles:e})}renderTileUrls(){Nn().f[3]++;const e=(Nn().s[4]++,Nn().b[0][0]++,this.props.source.tiles||(Nn().b[0][1]++,[]));return Nn().s[5]++,ce.jsx(cj,{label:this.props.t("Tile URL"),fieldSpec:Ua.source_vector.tiles,type:"url",value:e,onChange:this.changeTileUrls.bind(this)})}render(){Nn().f[4]++;const e=(Nn().s[6]++,this.props.t);return Nn().s[7]++,ce.jsxs("div",{children:[this.renderTileUrls(),ce.jsx($2,{label:e("Scheme Type"),fieldSpec:Ua.source_vector.scheme,options:[["xyz","xyz (Slippy map tilenames scheme)"],["tms","tms (OSGeo spec scheme)"]],onChange:t=>(Nn().f[5]++,Nn().s[8]++,this.props.onChange({...this.props.source,scheme:t})),value:this.props.source.scheme,"data-wd-key":"modal:sources.add.scheme_type"}),ce.jsx($m,{label:e("Min Zoom"),fieldSpec:Ua.source_vector.minzoom,value:(Nn().b[1][0]++,this.props.source.minzoom||(Nn().b[1][1]++,0)),onChange:t=>(Nn().f[6]++,Nn().s[9]++,this.props.onChange({...this.props.source,minzoom:t}))}),ce.jsx($m,{label:e("Max Zoom"),fieldSpec:Ua.source_vector.maxzoom,value:(Nn().b[2][0]++,this.props.source.maxzoom||(Nn().b[2][1]++,22)),onChange:t=>(Nn().f[7]++,Nn().s[10]++,this.props.onChange({...this.props.source,maxzoom:t}))}),this.props.children]})}}Nn().s[11]++;const hj=n=>(Nn().f[8]++,Nn().s[12]++,[{label:n("Coord top left"),key:"top left"},{label:n("Coord top right"),key:"top right"},{label:n("Coord bottom right"),key:"bottom right"},{label:n("Coord bottom left"),key:"bottom left"}]);class Bhe extends ni.Component{render(){Nn().f[9]++;const e=(Nn().s[13]++,this.props.t);Nn().s[14]++;const t=(i,r)=>{Nn().f[10]++;const a=(Nn().s[15]++,this.props.source.coordinates.slice(0));Nn().s[16]++,a[i]=r,Nn().s[17]++,this.props.onChange({...this.props.source,coordinates:a})};return Nn().s[18]++,ce.jsxs("div",{children:[ce.jsx(Fv,{label:e("Image URL"),fieldSpec:Ua.source_image.url,value:this.props.source.url,onChange:i=>(Nn().f[11]++,Nn().s[19]++,this.props.onChange({...this.props.source,url:i}))}),hj(e).map(({label:i,key:r},a)=>(Nn().f[12]++,Nn().s[20]++,ce.jsx(B3,{label:i,length:2,type:"number",value:this.props.source.coordinates[a],default:[0,0],onChange:l=>(Nn().f[13]++,Nn().s[21]++,t(a,l))},r)))]})}}class Ohe extends ni.Component{render(){Nn().f[14]++;const e=(Nn().s[22]++,this.props.t);Nn().s[23]++;const t=(r,a)=>{Nn().f[15]++;const l=(Nn().s[24]++,this.props.source.coordinates.slice(0));Nn().s[25]++,l[r]=a,Nn().s[26]++,this.props.onChange({...this.props.source,coordinates:l})};Nn().s[27]++;const i=r=>{Nn().f[16]++,Nn().s[28]++,this.props.onChange({...this.props.source,urls:r})};return Nn().s[29]++,ce.jsxs("div",{children:[ce.jsx(cj,{label:e("Video URL"),fieldSpec:Ua.source_video.urls,type:"string",value:this.props.source.urls,default:[],onChange:i}),hj(e).map(({label:r,key:a},l)=>(Nn().f[17]++,Nn().s[30]++,ce.jsx(B3,{label:r,length:2,type:"number",value:this.props.source.coordinates[l],default:[0,0],onChange:o=>(Nn().f[18]++,Nn().s[31]++,t(l,o))},a)))]})}}class Ihe extends ni.Component{render(){Nn().f[19]++;const e=(Nn().s[32]++,this.props.t);return Nn().s[33]++,ce.jsx(Fv,{label:e("GeoJSON URL"),fieldSpec:Ua.source_geojson.data,value:this.props.source.data,onChange:t=>(Nn().f[20]++,Nn().s[34]++,this.props.onChange({...this.props.source,data:t}))})}}class The extends ni.Component{render(){Nn().f[21]++;const e=(Nn().s[35]++,this.props.t);return Nn().s[36]++,ce.jsxs("div",{children:[ce.jsx(Ks,{label:e("GeoJSON"),fieldSpec:Ua.source_geojson.data,children:ce.jsx(T8,{layer:this.props.source.data,maxHeight:200,mode:{name:"javascript",json:!0},lint:!0,onChange:t=>{Nn().f[22]++,Nn().s[37]++,this.props.onChange({...this.props.source,data:t})}})}),ce.jsx(Ehe,{label:e("Cluster"),value:this.props.source.cluster,onChange:t=>{Nn().f[23]++,Nn().s[38]++,this.props.onChange({...this.props.source,cluster:t})}})]})}}class khe extends ni.Component{render(){Nn().f[24]++;const e=(Nn().s[39]++,this.props.t);return Nn().s[40]++,ce.jsxs("div",{children:[ce.jsx(Fv,{label:e("PMTiles URL"),fieldSpec:Ua.source_vector.url,value:this.props.source.url,"data-wd-key":"modal:sources.add.source_url",onChange:t=>(Nn().f[25]++,Nn().s[41]++,this.props.onChange({...this.props.source,url:t.startsWith("pmtiles://")?(Nn().b[3][0]++,t):(Nn().b[3][1]++,`pmtiles://${t}`)}))}),this.props.children]})}}class Dhe extends ni.Component{render(){Nn().f[26]++;const e=(Nn().s[42]++,this.props.t),t=(Nn().s[43]++,{source:this.props.source,onChange:this.props.onChange,t:this.props.t,i18n:this.props.i18n,tReady:this.props.tReady});switch(Nn().s[44]++,this.props.mode){case"geojson_url":return Nn().b[4][0]++,Nn().s[45]++,ce.jsx(Ihe,{...t});case"geojson_json":return Nn().b[4][1]++,Nn().s[46]++,ce.jsx(The,{...t});case"tilejson_vector":return Nn().b[4][2]++,Nn().s[47]++,ce.jsx(cE,{...t});case"tile_vector":return Nn().b[4][3]++,Nn().s[48]++,ce.jsx(hE,{...t});case"tilejson_raster":return Nn().b[4][4]++,Nn().s[49]++,ce.jsx(cE,{...t});case"tile_raster":return Nn().b[4][5]++,Nn().s[50]++,ce.jsx(hE,{...t,children:ce.jsx($m,{label:e("Tile Size"),fieldSpec:Ua.source_raster.tileSize,onChange:i=>(Nn().f[27]++,Nn().s[51]++,this.props.onChange({...this.props.source,tileSize:i})),value:(Nn().b[5][0]++,this.props.source.tileSize||(Nn().b[5][1]++,Ua.source_raster.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"})});case"tilejson_raster-dem":return Nn().b[4][6]++,Nn().s[52]++,ce.jsx(cE,{...t});case"tilexyz_raster-dem":return Nn().b[4][7]++,Nn().s[53]++,ce.jsxs(hE,{...t,children:[ce.jsx($m,{label:e("Tile Size"),fieldSpec:Ua.source_raster_dem.tileSize,onChange:i=>(Nn().f[28]++,Nn().s[54]++,this.props.onChange({...this.props.source,tileSize:i})),value:(Nn().b[6][0]++,this.props.source.tileSize||(Nn().b[6][1]++,Ua.source_raster_dem.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"}),ce.jsx($2,{label:e("Encoding"),fieldSpec:Ua.source_raster_dem.encoding,options:Object.keys(Ua.source_raster_dem.encoding.values),onChange:i=>(Nn().f[29]++,Nn().s[55]++,this.props.onChange({...this.props.source,encoding:i})),value:(Nn().b[7][0]++,this.props.source.encoding||(Nn().b[7][1]++,Ua.source_raster_dem.encoding.default))})]});case"pmtiles_vector":return Nn().b[4][8]++,Nn().s[56]++,ce.jsx(khe,{...t});case"image":return Nn().b[4][9]++,Nn().s[57]++,ce.jsx(Bhe,{...t});case"video":return Nn().b[4][10]++,Nn().s[58]++,ce.jsx(Ohe,{...t});default:return Nn().b[4][11]++,Nn().s[59]++,null}}}const dj=(Nn().s[60]++,ss()(Dhe));function np(){var n="/home/runner/work/maputnik/maputnik/src/libs/source.ts",e="871503159abbdc3b3ae7b24cdaefb6478172c58b",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/source.ts",statementMap:{0:{start:{line:2,column:27},end:{line:2,column:50}},1:{start:{line:3,column:2},end:{line:3,column:36}},2:{start:{line:4,column:2},end:{line:7,column:4}},3:{start:{line:10,column:2},end:{line:10,column:50}},4:{start:{line:13,column:25},end:{line:16,column:3}},5:{start:{line:17,column:2},end:{line:20,column:4}}},fnMap:{0:{name:"deleteSource",decl:{start:{line:1,column:16},end:{line:1,column:28}},loc:{start:{line:1,column:49},end:{line:8,column:1}},line:1},1:{name:"addSource",decl:{start:{line:9,column:16},end:{line:9,column:25}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},2:{name:"changeSource",decl:{start:{line:12,column:16},end:{line:12,column:28}},loc:{start:{line:12,column:57},end:{line:21,column:1}},line:12}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/source.ts"],names:[],mappings:"AAGO,gBAAS,aAAa,UAAoC,UAAkB;AACjF,QAAM,mBAAmB,EAAE,GAAG,SAAS,QAAO;AAC9C,SAAO,iBAAiB,QAAQ;AAChC,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;AAGO,gBAAS,UAAU,UAAoC,UAAkB,QAA6B;AAC3G,SAAO,aAAa,UAAU,UAAU,MAAM;AAChD;AAEO,gBAAS,aAAa,UAAoC,UAAkB,QAA6B;AAC9G,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,QAAQ,GAAG;AAAA,EACd;AACA,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"871503159abbdc3b3ae7b24cdaefb6478172c58b"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return np=function(){return l},l}np();function Rhe(n,e){np().f[0]++;const t=(np().s[0]++,{...n.sources});return np().s[1]++,delete t[e],np().s[2]++,{...n,sources:t}}function IK(n,e,t){return np().f[1]++,np().s[3]++,fj(n,e,t)}function fj(n,e,t){np().f[2]++;const i=(np().s[4]++,{...n.sources,[e]:t});return np().s[5]++,{...n,sources:i}}const Phe={type:"vector",url:"https://api.maptiler.com/tiles/v3-openmaptiles/tiles.json?key={key}",title:"OpenMapTiles v3"},Khe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.transport-v2.json?apikey={key}",title:"Thunderforest Transport v2"},Uhe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.outdoors-v2.json?apikey={key}",title:"Thunderforest Outdoors v2"},Lhe={type:"vector",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/data/vector/open-zoomstack/config.json",title:"OS Open Zoomstack v2"},Fhe={type:"vector",url:"https://tiles.locationiq.com/v3/pbf/tiles.json?key={key}",title:"LocationIQ"},TK={openmaptiles:Phe,thunderforest_transport:Khe,thunderforest_outdoors:Uhe,open_zoomstack:Lhe,locationiq:Fhe};function cn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx",e="0537a582bcd36cbdeaa2bd8cddc8748f59a8c748",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:33,column:9}},1:{start:{line:20,column:23},end:{line:20,column:57}},2:{start:{line:37,column:2},end:{line:40,column:3}},3:{start:{line:38,column:4},end:{line:38,column:43}},4:{start:{line:38,column:22},end:{line:38,column:43}},5:{start:{line:39,column:4},end:{line:39,column:29}},6:{start:{line:41,column:2},end:{line:44,column:3}},7:{start:{line:42,column:4},end:{line:42,column:50}},8:{start:{line:42,column:22},end:{line:42,column:50}},9:{start:{line:43,column:4},end:{line:43,column:33}},10:{start:{line:45,column:2},end:{line:49,column:3}},11:{start:{line:46,column:4},end:{line:46,column:43}},12:{start:{line:46,column:22},end:{line:46,column:43}},13:{start:{line:47,column:4},end:{line:47,column:83}},14:{start:{line:47,column:59},end:{line:47,column:83}},15:{start:{line:48,column:4},end:{line:48,column:29}},16:{start:{line:50,column:2},end:{line:56,column:3}},17:{start:{line:51,column:4},end:{line:55,column:5}},18:{start:{line:52,column:6},end:{line:52,column:27}},19:{start:{line:54,column:6},end:{line:54,column:28}},20:{start:{line:57,column:2},end:{line:59,column:3}},21:{start:{line:58,column:4},end:{line:58,column:19}},22:{start:{line:60,column:2},end:{line:62,column:3}},23:{start:{line:61,column:4},end:{line:61,column:19}},24:{start:{line:63,column:2},end:{line:63,column:14}},25:{start:{line:67,column:14},end:{line:67,column:26}},26:{start:{line:68,column:4},end:{line:94,column:9}},27:{start:{line:80,column:27},end:{line:80,column:67}},28:{start:{line:99,column:4},end:{line:99,column:17}},29:{start:{line:100,column:4},end:{line:104,column:6}},30:{start:{line:107,column:19},end:{line:107,column:50}},31:{start:{line:108,column:25},end:{line:108,column:40}},32:{start:{line:109,column:4},end:{line:192,column:5}},33:{start:{line:111,column:8},end:{line:114,column:10}},34:{start:{line:116,column:8},end:{line:119,column:10}},35:{start:{line:121,column:8},end:{line:125,column:10}},36:{start:{line:127,column:8},end:{line:130,column:10}},37:{start:{line:132,column:8},end:{line:138,column:10}},38:{start:{line:140,column:8},end:{line:143,column:10}},39:{start:{line:145,column:8},end:{line:152,column:10}},40:{start:{line:154,column:8},end:{line:157,column:10}},41:{start:{line:159,column:8},end:{line:165,column:10}},42:{start:{line:167,column:8},end:{line:176,column:10}},43:{start:{line:178,column:8},end:{line:189,column:10}},44:{start:{line:191,column:8},end:{line:191,column:18}},45:{start:{line:194,column:10},end:{line:197,column:3}},46:{start:{line:195,column:33},end:{line:195,column:43}},47:{start:{line:196,column:4},end:{line:196,column:39}},48:{start:{line:198,column:19},end:{line:200,column:3}},49:{start:{line:199,column:4},end:{line:199,column:30}},50:{start:{line:202,column:14},end:{line:202,column:26}},51:{start:{line:203,column:32},end:{line:205,column:5}},52:{start:{line:206,column:4},end:{line:257,column:9}},53:{start:{line:213,column:27},end:{line:213,column:57}},54:{start:{line:235,column:30},end:{line:235,column:87}},55:{start:{line:262,column:27},end:{line:262,column:40}},56:{start:{line:263,column:4},end:{line:263,column:35}},57:{start:{line:264,column:4},end:{line:264,column:26}},58:{start:{line:267,column:28},end:{line:267,column:38}},59:{start:{line:268,column:22},end:{line:268,column:77}},60:{start:{line:269,column:26},end:{line:282,column:6}},61:{start:{line:270,column:21},end:{line:270,column:47}},62:{start:{line:271,column:6},end:{line:281,column:8}},63:{start:{line:276,column:29},end:{line:276,column:93}},64:{start:{line:277,column:26},end:{line:277,column:85}},65:{start:{line:283,column:27},end:{line:295,column:6}},66:{start:{line:283,column:75},end:{line:283,column:106}},67:{start:{line:284,column:21},end:{line:284,column:44}},68:{start:{line:285,column:6},end:{line:294,column:8}},69:{start:{line:291,column:26},end:{line:291,column:107}},70:{start:{line:296,column:4},end:{line:326,column:6}},71:{start:{line:319,column:45},end:{line:319,column:109}},72:{start:{line:329,column:21},end:{line:329,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:34,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:57}},line:20},2:{name:"editorMode",decl:{start:{line:36,column:9},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:64,column:1}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:66,column:2},end:{line:66,column:3}},loc:{start:{line:66,column:11},end:{line:95,column:3}},line:66},4:{name:"(anonymous_4)",decl:{start:{line:80,column:21},end:{line:80,column:22}},loc:{start:{line:80,column:27},end:{line:80,column:67}},line:80},5:{name:"(anonymous_5)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:21},end:{line:105,column:3}},line:98},6:{name:"(anonymous_6)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:22},end:{line:193,column:3}},line:106},7:{name:"(anonymous_7)",decl:{start:{line:194,column:10},end:{line:194,column:11}},loc:{start:{line:194,column:16},end:{line:197,column:3}},line:194},8:{name:"(anonymous_8)",decl:{start:{line:198,column:19},end:{line:198,column:20}},loc:{start:{line:198,column:31},end:{line:200,column:3}},line:198},9:{name:"(anonymous_9)",decl:{start:{line:201,column:2},end:{line:201,column:3}},loc:{start:{line:201,column:11},end:{line:258,column:3}},line:201},10:{name:"(anonymous_10)",decl:{start:{line:213,column:20},end:{line:213,column:21}},loc:{start:{line:213,column:27},end:{line:213,column:57}},line:213},11:{name:"(anonymous_11)",decl:{start:{line:235,column:20},end:{line:235,column:21}},loc:{start:{line:235,column:30},end:{line:235,column:87}},line:235},12:{name:"(anonymous_12)",decl:{start:{line:261,column:2},end:{line:261,column:3}},loc:{start:{line:261,column:21},end:{line:265,column:3}},line:261},13:{name:"(anonymous_13)",decl:{start:{line:266,column:2},end:{line:266,column:3}},loc:{start:{line:266,column:11},end:{line:327,column:3}},line:266},14:{name:"(anonymous_14)",decl:{start:{line:269,column:60},end:{line:269,column:61}},loc:{start:{line:269,column:74},end:{line:282,column:5}},line:269},15:{name:"(anonymous_15)",decl:{start:{line:276,column:20},end:{line:276,column:21}},loc:{start:{line:276,column:29},end:{line:276,column:93}},line:276},16:{name:"(anonymous_16)",decl:{start:{line:277,column:20},end:{line:277,column:21}},loc:{start:{line:277,column:26},end:{line:277,column:85}},line:277},17:{name:"(anonymous_17)",decl:{start:{line:283,column:61},end:{line:283,column:62}},loc:{start:{line:283,column:75},end:{line:283,column:106}},line:283},18:{name:"(anonymous_18)",decl:{start:{line:283,column:112},end:{line:283,column:113}},loc:{start:{line:283,column:126},end:{line:295,column:5}},line:283},19:{name:"(anonymous_19)",decl:{start:{line:291,column:20},end:{line:291,column:21}},loc:{start:{line:291,column:26},end:{line:291,column:107}},line:291},20:{name:"(anonymous_20)",decl:{start:{line:319,column:23},end:{line:319,column:24}},loc:{start:{line:319,column:45},end:{line:319,column:109}},line:319}},branchMap:{0:{loc:{start:{line:37,column:2},end:{line:40,column:3}},type:"if",locations:[{start:{line:37,column:2},end:{line:40,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},1:{loc:{start:{line:38,column:4},end:{line:38,column:43}},type:"if",locations:[{start:{line:38,column:4},end:{line:38,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},2:{loc:{start:{line:41,column:2},end:{line:44,column:3}},type:"if",locations:[{start:{line:41,column:2},end:{line:44,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:42,column:4},end:{line:42,column:50}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:50}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},4:{loc:{start:{line:45,column:2},end:{line:49,column:3}},type:"if",locations:[{start:{line:45,column:2},end:{line:49,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},5:{loc:{start:{line:46,column:4},end:{line:46,column:43}},type:"if",locations:[{start:{line:46,column:4},end:{line:46,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},6:{loc:{start:{line:47,column:4},end:{line:47,column:83}},type:"if",locations:[{start:{line:47,column:4},end:{line:47,column:83}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},7:{loc:{start:{line:47,column:8},end:{line:47,column:57}},type:"binary-expr",locations:[{start:{line:47,column:8},end:{line:47,column:18}},{start:{line:47,column:22},end:{line:47,column:57}}],line:47},8:{loc:{start:{line:50,column:2},end:{line:56,column:3}},type:"if",locations:[{start:{line:50,column:2},end:{line:56,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:50},9:{loc:{start:{line:51,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:55,column:5}},{start:{line:53,column:11},end:{line:55,column:5}}],line:51},10:{loc:{start:{line:57,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:57,column:2},end:{line:59,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:60,column:2},end:{line:62,column:3}},type:"if",locations:[{start:{line:60,column:2},end:{line:62,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},12:{loc:{start:{line:107,column:19},end:{line:107,column:50}},type:"binary-expr",locations:[{start:{line:107,column:19},end:{line:107,column:44}},{start:{line:107,column:48},end:{line:107,column:50}}],line:107},13:{loc:{start:{line:107,column:20},end:{line:107,column:36}},type:"binary-expr",locations:[{start:{line:107,column:20},end:{line:107,column:30}},{start:{line:107,column:34},end:{line:107,column:36}}],line:107},14:{loc:{start:{line:109,column:4},end:{line:192,column:5}},type:"switch",locations:[{start:{line:110,column:6},end:{line:114,column:10}},{start:{line:115,column:6},end:{line:119,column:10}},{start:{line:120,column:6},end:{line:125,column:10}},{start:{line:126,column:6},end:{line:130,column:10}},{start:{line:131,column:6},end:{line:138,column:10}},{start:{line:139,column:6},end:{line:143,column:10}},{start:{line:144,column:6},end:{line:152,column:10}},{start:{line:153,column:6},end:{line:157,column:10}},{start:{line:158,column:6},end:{line:165,column:10}},{start:{line:166,column:6},end:{line:176,column:10}},{start:{line:177,column:6},end:{line:189,column:10}},{start:{line:190,column:6},end:{line:191,column:18}}],line:109},15:{loc:{start:{line:123,column:19},end:{line:123,column:42}},type:"binary-expr",locations:[{start:{line:123,column:19},end:{line:123,column:33}},{start:{line:123,column:37},end:{line:123,column:42}}],line:123},16:{loc:{start:{line:129,column:15},end:{line:129,column:72}},type:"binary-expr",locations:[{start:{line:129,column:15},end:{line:129,column:25}},{start:{line:129,column:29},end:{line:129,column:72}}],line:129},17:{loc:{start:{line:134,column:17},end:{line:134,column:80}},type:"binary-expr",locations:[{start:{line:134,column:17},end:{line:134,column:29}},{start:{line:134,column:33},end:{line:134,column:80}}],line:134},18:{loc:{start:{line:135,column:19},end:{line:135,column:38}},type:"binary-expr",locations:[{start:{line:135,column:19},end:{line:135,column:33}},{start:{line:135,column:37},end:{line:135,column:38}}],line:135},19:{loc:{start:{line:136,column:19},end:{line:136,column:39}},type:"binary-expr",locations:[{start:{line:136,column:19},end:{line:136,column:33}},{start:{line:136,column:37},end:{line:136,column:39}}],line:136},20:{loc:{start:{line:137,column:18},end:{line:137,column:40}},type:"binary-expr",locations:[{start:{line:137,column:18},end:{line:137,column:31}},{start:{line:137,column:35},end:{line:137,column:40}}],line:137},21:{loc:{start:{line:142,column:15},end:{line:142,column:72}},type:"binary-expr",locations:[{start:{line:142,column:15},end:{line:142,column:25}},{start:{line:142,column:29},end:{line:142,column:72}}],line:142},22:{loc:{start:{line:147,column:17},end:{line:147,column:80}},type:"binary-expr",locations:[{start:{line:147,column:17},end:{line:147,column:29}},{start:{line:147,column:33},end:{line:147,column:80}}],line:147},23:{loc:{start:{line:148,column:19},end:{line:148,column:38}},type:"binary-expr",locations:[{start:{line:148,column:19},end:{line:148,column:33}},{start:{line:148,column:37},end:{line:148,column:38}}],line:148},24:{loc:{start:{line:149,column:19},end:{line:149,column:39}},type:"binary-expr",locations:[{start:{line:149,column:19},end:{line:149,column:33}},{start:{line:149,column:37},end:{line:149,column:39}}],line:149},25:{loc:{start:{line:150,column:18},end:{line:150,column:40}},type:"binary-expr",locations:[{start:{line:150,column:18},end:{line:150,column:31}},{start:{line:150,column:35},end:{line:150,column:40}}],line:150},26:{loc:{start:{line:151,column:20},end:{line:151,column:42}},type:"binary-expr",locations:[{start:{line:151,column:20},end:{line:151,column:35}},{start:{line:151,column:39},end:{line:151,column:42}}],line:151},27:{loc:{start:{line:156,column:15},end:{line:156,column:72}},type:"binary-expr",locations:[{start:{line:156,column:15},end:{line:156,column:25}},{start:{line:156,column:29},end:{line:156,column:72}}],line:156},28:{loc:{start:{line:161,column:17},end:{line:161,column:80}},type:"binary-expr",locations:[{start:{line:161,column:17},end:{line:161,column:29}},{start:{line:161,column:33},end:{line:161,column:80}}],line:161},29:{loc:{start:{line:162,column:19},end:{line:162,column:38}},type:"binary-expr",locations:[{start:{line:162,column:19},end:{line:162,column:33}},{start:{line:162,column:37},end:{line:162,column:38}}],line:162},30:{loc:{start:{line:163,column:19},end:{line:163,column:39}},type:"binary-expr",locations:[{start:{line:163,column:19},end:{line:163,column:33}},{start:{line:163,column:37},end:{line:163,column:39}}],line:163},31:{loc:{start:{line:164,column:20},end:{line:164,column:42}},type:"binary-expr",locations:[{start:{line:164,column:20},end:{line:164,column:35}},{start:{line:164,column:39},end:{line:164,column:42}}],line:164}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0,0,0,0,0,0,0,0,0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx"],names:[],mappings:"AAiCU,cACA,YADA;AAjCV,OAAO,WAAW;AAClB,SAAQ,oBAAoB,gBAAe;AAC3C,OAAO,YAAY;AAEnB,SAA0B,uBAAuB;AAEjD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,4BAA4C;AAEnD,OAAO,WAAW;AAClB,SAAS,cAAc,WAAW,oBAAoB;AACtD,OAAO,mBAAmB;AAW1B,MAAM,qBAAqB,MAAM,UAA6B;AAAA,EAC5D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,0BACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,EAAE;AAAA,QAEhD;AAAA,+BAAC,SAAI,WAAU,+BACb;AAAA,gCAAC,OAAE,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,YAC7D,qBAAC,OAAE,WAAU,6BAA4B;AAAA;AAAA,cAAE,KAAK,MAAM;AAAA,eAAG;AAAA,aAC3D;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC,oBAAC,sBAAmB;AAAA;AAAA;AAAA,IACtB,GACF;AAAA,EACF;AACF;AAEA,SAAS,WAAW,QAA6B;AAC/C,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,cAAc;AAC/B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,QAAG,OAAO,OAAO,OAAO,IAAI,WAAW,YAAY,EAAG,QAAO;AAC7D,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,WAAW;AAC5B,QAAI,OAAO,OAAO,SAAU,UAAU;AACpC,aAAO;AAAA,IACT,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,SAAO;AACT;AASA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,2BAAC,SAAI,WAAU,6CACb;AAAA,6BAAC,UAAK,WAAU,gDAA+C;AAAA;AAAA,UAAE,KAAK,MAAM;AAAA,WAAS;AAAA,QACrF,oBAAC,UAAK,WAAU,kBAAiB;AAAA,QACjC;AAAA,UAAC;AAAA;AAAA,YACC,cAAY,EAAE,gCAAgC,EAAC,UAAU,KAAK,MAAM,SAAQ,CAAC;AAAA,YAC7E,WAAU;AAAA,YACV,SAAS,MAAK,KAAK,MAAM,SAAS,KAAK,MAAM,QAAQ;AAAA,YACrD,OAAO,EAAC,iBAAiB,cAAa;AAAA,YAEtC,8BAAC,YAAS;AAAA;AAAA,QACZ;AAAA,SACF;AAAA,MACA,oBAAC,SAAI,WAAU,8CACb;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,MAAM,WAAW,KAAK,MAAM,MAAM;AAAA,UAClC,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB,GACF;AAAA,OACF;AAAA,EACF;AACF;AAYA,MAAM,kBAAkB,MAAM,UAA0C;AAAA,EACtE,YAAY,OAAuB;AACjC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU,MAAM,WAAW;AAAA,MAC3B,QAAQ,KAAK,cAAc,iBAAiB;AAAA,IAC9C;AAAA,EACF;AAAA,EAEA,cAAc,MAAuC;AACnD,UAAM,UAAU,KAAK,SAAS,CAAC,GAAG,UAAU,CAAC;AAC7C,UAAM,EAAC,SAAQ,IAAI,OAAO;AAE1B,YAAO,MAAM;AAAA,MACb,KAAK;AAAkB,eAAO;AAAA,UAC5B,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,QAClB;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,MAAM,GAAG,QAAQ;AAAA,QACnB;AAAA,MACA,KAAK;AAAgB,eAAO;AAAA,UAC1B,MAAM;AAAA,UACN,SAAU,OAAsC,WAAW;AAAA,UAC3D,MAAM;AAAA,QACR;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,QAC1D;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,UACxD,UAAW,OAAqC,YAAY;AAAA,QAC9D;AAAA,MACA,KAAK;AAAuB,eAAO;AAAA,UACjC,MAAM;AAAA,UACN,KAAM,OAAwC,OAAO,GAAG,QAAQ;AAAA,QAClE;AAAA,MACA,KAAK;AAAsB,eAAO;AAAA,UAChC,MAAM;AAAA,UACN,OAAQ,OAAwC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACvG,SAAU,OAAwC,WAAW;AAAA,UAC7D,SAAU,OAAwC,WAAW;AAAA,UAC7D,UAAW,OAAwC,YAAY;AAAA,QACjE;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,UAChB,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,MAAM;AAAA,YACJ,GAAG,QAAQ;AAAA,UACb;AAAA,UACA,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA;AAAS,eAAO,CAAC;AAAA,IACjB;AAAA,EACF;AAAA,EAEA,QAAQ,MAAM;AACZ,UAAM,EAAC,QAAQ,SAAQ,IAAI,KAAK;AAChC,SAAK,MAAM,MAAM,UAAU,MAAM;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,WAAgC;AAChD,SAAK,SAAS,EAAC,OAAM,CAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAQrB,UAAM,sBAAsB;AAAA,MAC1B,KAAK,OAAO,cAAc,KAAK;AAAA,IACjC;AAEA,WAAO,qBAAC,SAAI,WAAU,uBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,EAAC,KAAK,EAAE,wFAAwF,EAAC;AAAA,UAC5G,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,UAAU,EAAC,CAAC;AAAA,UACrD,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW;AAAA,UACX,SAAS;AAAA,YACP,CAAC,gBAAgB,EAAE,gBAAgB,CAAC;AAAA,YACpC,CAAC,eAAe,EAAE,eAAe,CAAC;AAAA,YAClC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,uBAAuB,EAAE,2BAA2B,CAAC;AAAA,YACtD,CAAC,sBAAsB,EAAE,uBAAuB,CAAC;AAAA,YACjD,CAAC,kBAAkB,EAAE,kBAAkB,CAAC;AAAA,YACxC,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,YACpB,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,UACtB;AAAA,UACA,UAAU,UAAQ,KAAK,SAAS,EAAC,MAA0B,QAAQ,KAAK,cAAc,IAAkB,EAAC,CAAC;AAAA,UAC1G,OAAO,KAAK,MAAM;AAAA,UAClB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK;AAAA,UACf,MAAM,KAAK,MAAM;AAAA,UACjB,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UACd,eAAY;AAAA,UAEX,YAAE,YAAY;AAAA;AAAA,MACjB;AAAA,OACF;AAAA,EACF;AACF;AASA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,WAAW,QAAqE;AAC9E,UAAM,iBAAiB,EAAC,GAAG,OAAM;AACjC,WAAO,eAAe,OAAO;AAC7B,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,SAAQ,IAAI,KAAK;AAC3B,UAAM,YAAY,EAAC,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAM;AACtE,UAAM,gBAAgB,OAAO,KAAK,SAAS,OAAO,EAAE,IAAI,cAAY;AAClE,YAAM,SAAS,SAAS,QAAQ,QAAQ;AACxC,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN;AAAA,UACA;AAAA,UACA,UAAU,CAAC,QAA6B,KAAK,MAAM,eAAe,aAAa,UAAU,UAAU,GAAG,CAAC;AAAA,UACvG,UAAU,MAAM,KAAK,MAAM,eAAe,aAAa,UAAU,QAAQ,CAAC;AAAA,UACzE,GAAG;AAAA;AAAA,QALC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,iBAAiB,OAAO,KAAK,aAAa,EAAE,OAAO,CAAC,aAAqB,EAAE,YAAY,SAAS,QAAQ,EAAE,IAAI,CAAC,aAAqB;AACxI,YAAM,SAAS,cAAc,QAAsC;AACnE,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,IAAI;AAAA,UACJ,MAAM,OAAO;AAAA,UACb,OAAO,OAAO;AAAA,UACd,UAAU,MAAM,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,KAAK,WAAW,MAAM,CAAC,CAAC;AAAA;AAAA,QAJ3F;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,SAAS;AAAA,QAElB;AAAA,+BAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACxB;AAAA,aACH;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,sBAAsB,GAAE;AAAA,YAC/B,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,YACA,oBAAC,SAAI,WAAU,2BAA0B,OAAO,EAAC,UAAU,IAAG,GAC3D,0BACH;AAAA,aACF;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACzB,oBAAC,OAAG,YAAE,8FAA8F,GAAE;AAAA,YACtG;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,CAAC,UAAkB,WAAgC,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,MAAM,CAAC;AAAA,gBACxH,GAAG;AAAA;AAAA,YACN;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0537a582bcd36cbdeaa2bd8cddc8748f59a8c748"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return cn=function(){return l},l}cn();class zhe extends ni.Component{render(){return cn().f[0]++,cn().s[0]++,ce.jsx("div",{className:"maputnik-public-source",children:ce.jsxs(ml,{className:"maputnik-public-source-select",onClick:()=>(cn().f[1]++,cn().s[1]++,this.props.onSelect(this.props.id)),children:[ce.jsxs("div",{className:"maputnik-public-source-info",children:[ce.jsx("p",{className:"maputnik-public-source-name",children:this.props.title}),ce.jsxs("p",{className:"maputnik-public-source-id",children:["#",this.props.id]})]}),ce.jsx("span",{className:"maputnik-space"}),ce.jsx(iF,{})]})})}}function Nhe(n){return cn().f[2]++,cn().s[2]++,n.type==="raster"?(cn().b[0][0]++,cn().s[3]++,n.tiles?(cn().b[1][0]++,cn().s[4]++,"tile_raster"):(cn().b[1][1]++,cn().s[5]++,"tilejson_raster")):(cn().b[0][1]++,cn().s[6]++,n.type==="raster-dem"?(cn().b[2][0]++,cn().s[7]++,n.tiles?(cn().b[3][0]++,cn().s[8]++,"tilexyz_raster-dem"):(cn().b[3][1]++,cn().s[9]++,"tilejson_raster-dem")):(cn().b[2][1]++,cn().s[10]++,n.type==="vector"?(cn().b[4][0]++,cn().s[11]++,n.tiles?(cn().b[5][0]++,cn().s[12]++,"tile_vector"):(cn().b[5][1]++,cn().s[13]++,cn().b[7][0]++,n.url&&(cn().b[7][1]++,n.url.startsWith("pmtiles://"))?(cn().b[6][0]++,cn().s[14]++,"pmtiles_vector"):(cn().b[6][1]++,cn().s[15]++,"tilejson_vector"))):(cn().b[4][1]++,cn().s[16]++,n.type==="geojson"?(cn().b[8][0]++,cn().s[17]++,typeof n.data=="string"?(cn().b[9][0]++,cn().s[18]++,"geojson_url"):(cn().b[9][1]++,cn().s[19]++,"geojson_json")):(cn().b[8][1]++,cn().s[20]++,n.type==="image"?(cn().b[10][0]++,cn().s[21]++,"image"):(cn().b[10][1]++,cn().s[22]++,n.type==="video"?(cn().b[11][0]++,cn().s[23]++,"video"):(cn().b[11][1]++,cn().s[24]++,null))))))}class Ghe extends ni.Component{render(){cn().f[3]++;const e=(cn().s[25]++,this.props.t);return cn().s[26]++,ce.jsxs("div",{className:"maputnik-active-source-type-editor",children:[ce.jsxs("div",{className:"maputnik-active-source-type-editor-header",children:[ce.jsxs("span",{className:"maputnik-active-source-type-editor-header-id",children:["#",this.props.sourceId]}),ce.jsx("span",{className:"maputnik-space"}),ce.jsx(ml,{"aria-label":e("Remove '{{sourceId}}' source",{sourceId:this.props.sourceId}),className:"maputnik-active-source-type-editor-header-delete",onClick:()=>(cn().f[4]++,cn().s[27]++,this.props.onDelete(this.props.sourceId)),style:{backgroundColor:"transparent"},children:ce.jsx(Wv,{})})]}),ce.jsx("div",{className:"maputnik-active-source-type-editor-content",children:ce.jsx(dj,{onChange:this.props.onChange,mode:Nhe(this.props.source),source:this.props.source})})]})}}class jhe extends ni.Component{constructor(e){cn().f[5]++,cn().s[28]++,super(e),cn().s[29]++,this.state={mode:"tilejson_vector",sourceId:qd.generateId(),source:this.defaultSource("tilejson_vector")}}defaultSource(e){cn().f[6]++;const t=(cn().s[30]++,cn().b[12][0]++,(cn().b[13][0]++,this.state||(cn().b[13][1]++,{})).source||(cn().b[12][1]++,{})),{protocol:i}=(cn().s[31]++,window.location);switch(cn().s[32]++,e){case"pmtiles_vector":return cn().b[14][0]++,cn().s[33]++,{type:"vector",url:`${i}//localhost:3000/file.pmtiles`};case"geojson_url":return cn().b[14][1]++,cn().s[34]++,{type:"geojson",data:`${i}//localhost:3000/geojson.json`};case"geojson_json":return cn().b[14][2]++,cn().s[35]++,{type:"geojson",cluster:(cn().b[15][0]++,t.cluster||(cn().b[15][1]++,!1)),data:""};case"tilejson_vector":return cn().b[14][3]++,cn().s[36]++,{type:"vector",url:(cn().b[16][0]++,t.url||(cn().b[16][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_vector":return cn().b[14][4]++,cn().s[37]++,{type:"vector",tiles:(cn().b[17][0]++,t.tiles||(cn().b[17][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.pbf`])),minzoom:(cn().b[18][0]++,t.minzoom||(cn().b[18][1]++,0)),maxzoom:(cn().b[19][0]++,t.maxzoom||(cn().b[19][1]++,14)),scheme:(cn().b[20][0]++,t.scheme||(cn().b[20][1]++,"xyz"))};case"tilejson_raster":return cn().b[14][5]++,cn().s[38]++,{type:"raster",url:(cn().b[21][0]++,t.url||(cn().b[21][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_raster":return cn().b[14][6]++,cn().s[39]++,{type:"raster",tiles:(cn().b[22][0]++,t.tiles||(cn().b[22][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(cn().b[23][0]++,t.minzoom||(cn().b[23][1]++,0)),maxzoom:(cn().b[24][0]++,t.maxzoom||(cn().b[24][1]++,14)),scheme:(cn().b[25][0]++,t.scheme||(cn().b[25][1]++,"xyz")),tileSize:(cn().b[26][0]++,t.tileSize||(cn().b[26][1]++,512))};case"tilejson_raster-dem":return cn().b[14][7]++,cn().s[40]++,{type:"raster-dem",url:(cn().b[27][0]++,t.url||(cn().b[27][1]++,`${i}//localhost:3000/tilejson.json`))};case"tilexyz_raster-dem":return cn().b[14][8]++,cn().s[41]++,{type:"raster-dem",tiles:(cn().b[28][0]++,t.tiles||(cn().b[28][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(cn().b[29][0]++,t.minzoom||(cn().b[29][1]++,0)),maxzoom:(cn().b[30][0]++,t.maxzoom||(cn().b[30][1]++,14)),tileSize:(cn().b[31][0]++,t.tileSize||(cn().b[31][1]++,512))};case"image":return cn().b[14][9]++,cn().s[42]++,{type:"image",url:`${i}//localhost:3000/image.png`,coordinates:[[0,0],[0,0],[0,0],[0,0]]};case"video":return cn().b[14][10]++,cn().s[43]++,{type:"video",urls:[`${i}//localhost:3000/movie.mp4`],coordinates:[[0,0],[0,0],[0,0],[0,0]]};default:return cn().b[14][11]++,cn().s[44]++,{}}}onAdd=(cn().s[45]++,()=>{cn().f[7]++;const{source:e,sourceId:t}=(cn().s[46]++,this.state);cn().s[47]++,this.props.onAdd(t,e)});onChangeSource=(cn().s[48]++,e=>{cn().f[8]++,cn().s[49]++,this.setState({source:e})});render(){cn().f[9]++;const e=(cn().s[50]++,this.props.t),t=(cn().s[51]++,{doc:da.source_vector.type.doc});return cn().s[52]++,ce.jsxs("div",{className:"maputnik-add-source",children:[ce.jsx(fm,{label:e("Source ID"),fieldSpec:{doc:e("Unique ID that identifies the source and is used in the layer to reference the source.")},value:this.state.sourceId,onChange:i=>(cn().f[10]++,cn().s[53]++,this.setState({sourceId:i})),"data-wd-key":"modal:sources.add.source_id"}),ce.jsx($2,{label:e("Source Type"),fieldSpec:t,options:[["geojson_json",e("GeoJSON (JSON)")],["geojson_url",e("GeoJSON (URL)")],["tilejson_vector",e("Vector (TileJSON URL)")],["tile_vector",e("Vector (Tile URLs)")],["tilejson_raster",e("Raster (TileJSON URL)")],["tile_raster",e("Raster (Tile URLs)")],["tilejson_raster-dem",e("Raster DEM (TileJSON URL)")],["tilexyz_raster-dem",e("Raster DEM (XYZ URLs)")],["pmtiles_vector",e("Vector (PMTiles)")],["image",e("Image")],["video",e("Video")]],onChange:i=>(cn().f[11]++,cn().s[54]++,this.setState({mode:i,source:this.defaultSource(i)})),value:this.state.mode,"data-wd-key":"modal:sources.add.source_type"}),ce.jsx(dj,{onChange:this.onChangeSource,mode:this.state.mode,source:this.state.source}),ce.jsx(ml,{className:"maputnik-add-source-button",onClick:this.onAdd,"data-wd-key":"modal:sources.add.add_source",children:e("Add Source")})]})}}class Whe extends ni.Component{stripTitle(e){cn().f[12]++;const t=(cn().s[55]++,{...e});return cn().s[56]++,delete t.title,cn().s[57]++,t}render(){cn().f[13]++;const{t:e,mapStyle:t}=(cn().s[58]++,this.props),i=(cn().s[59]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),r=(cn().s[60]++,Object.keys(t.sources).map(l=>{cn().f[14]++;const o=(cn().s[61]++,t.sources[l]);return cn().s[62]++,ce.jsx(Ghe,{sourceId:l,source:o,onChange:m=>(cn().f[15]++,cn().s[63]++,this.props.onStyleChanged(fj(t,l,m))),onDelete:()=>(cn().f[16]++,cn().s[64]++,this.props.onStyleChanged(Rhe(t,l))),...i},l)})),a=(cn().s[65]++,Object.keys(TK).filter(l=>(cn().f[17]++,cn().s[66]++,!(l in t.sources))).map(l=>{cn().f[18]++;const o=(cn().s[67]++,TK[l]);return cn().s[68]++,ce.jsx(zhe,{id:l,type:o.type,title:o.title,onSelect:()=>(cn().f[19]++,cn().s[69]++,this.props.onStyleChanged(IK(t,l,this.stripTitle(o))))},l)}));return cn().s[70]++,ce.jsxs(z1,{"data-wd-key":"modal:sources",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Sources"),children:[ce.jsxs("section",{className:"maputnik-modal-section",children:[ce.jsx("h1",{children:e("Active Sources")}),r]}),ce.jsxs("section",{className:"maputnik-modal-section",children:[ce.jsx("h1",{children:e("Choose Public Source")}),ce.jsx("p",{children:e("Add one of the publicly available sources to your style.")}),ce.jsx("div",{className:"maputnik-public-sources",style:{maxWidth:500},children:a})]}),ce.jsxs("section",{className:"maputnik-modal-section",children:[ce.jsx("h1",{children:e("Add New Source")}),ce.jsx("p",{children:e("Add a new source to your style. You can only choose the source type and id at creation time!")}),ce.jsx(jhe,{onAdd:(l,o)=>(cn().f[20]++,cn().s[71]++,this.props.onStyleChanged(IK(t,l,o))),...i})]})]})}}const Qhe=(cn().s[72]++,ss()(Whe));var vx={},kK;function Yhe(){if(kK)return vx;kK=1,Object.defineProperty(vx,"__esModule",{value:!0});var n=Object.assign||function(z){for(var j=1;j<arguments.length;j++){var Q=arguments[j];for(var ee in Q)Object.prototype.hasOwnProperty.call(Q,ee)&&(z[ee]=Q[ee])}return z},e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},t=function(){function z(j,Q){for(var ee=0;ee<Q.length;ee++){var V=Q[ee];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(j,V.key,V)}}return function(j,Q,ee){return Q&&z(j.prototype,Q),ee&&z(j,ee),j}}(),i=pl(),r=m(i),a=O3(),l=o(a);function o(z){return z&&z.__esModule?z:{default:z}}function m(z){if(z&&z.__esModule)return z;var j={};if(z!=null)for(var Q in z)Object.prototype.hasOwnProperty.call(z,Q)&&(j[Q]=z[Q]);return j.default=z,j}function C(z,j){var Q={};for(var ee in z)j.indexOf(ee)>=0||Object.prototype.hasOwnProperty.call(z,ee)&&(Q[ee]=z[ee]);return Q}function S(z,j){if(!(z instanceof j))throw new TypeError("Cannot call a class as a function")}function O(z,j){if(!z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:z}function U(z,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);z.prototype=Object.create(j&&j.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(z,j):z.__proto__=j)}var K=function(z){U(j,z);function j(Q){S(this,j);var ee=O(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,Q));ee.handleChange=function(ae){var ne=Array.prototype.slice.call(ae.target.files),Z=(ee.props.as||"url").toLowerCase();Promise.all(ne.map(function(oe){return new Promise(function(W,ue){var ge=new FileReader;switch(ge.onload=function(ye){W([ye,oe])},Z){case"binary":{ge.readAsBinaryString(oe);break}case"buffer":{ge.readAsArrayBuffer(oe);break}case"text":{ge.readAsText(oe);break}case"url":{ge.readAsDataURL(oe);break}}})})).then(function(oe){ee.props.onChange(ae,oe)})},ee.triggerInput=function(){var ae=l.default.findDOMNode(ee._reactFileReaderInput);ae&&ae.click()};var V=(typeof window>"u"?"undefined":e(window))==="object"?window:{};return(!V.File||!V.FileReader||!V.FileList||!V.Blob)&&console.warn("[react-file-reader-input] Some file APIs detected as not supported. File reader functionality may not fully work."),ee}return t(j,[{key:"render",value:function(){var ee=this,V=this.props;V.as;var ae=V.children,ne=V.style,Z=C(V,["as","children","style"]),oe=ae?{position:"absolute",top:"-9999px"}:{};return r.createElement("div",{className:"_react-file-reader-input",onClick:this.triggerInput,style:ne},r.createElement("input",n({},Z,{type:"file",ref:function(ue){ee._reactFileReaderInput=ue},onChange:this.handleChange,onClick:function(){ee._reactFileReaderInput.value=null},style:oe})),ae)}}]),j}(r.Component);return vx.default=K,vx}var qhe=Yhe();const Hhe=WA(qhe);function zp(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx",e="8bde27145f1281699b1dfa62d581929784f317bf",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:22,column:6}},2:{start:{line:16,column:28},end:{line:16,column:49}},3:{start:{line:19,column:137},end:{line:19,column:159}},4:{start:{line:25,column:21},end:{line:25,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:23,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:16,column:22},end:{line:16,column:23}},loc:{start:{line:16,column:28},end:{line:16,column:49}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:130},end:{line:19,column:131}},loc:{start:{line:19,column:137},end:{line:19,column:159}},line:19}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx"],names:[],mappings:"AAkBW,SAOL,KAPK;AAlBX,OAAO,WAAW;AAClB,SAA0B,uBAAuB;AAEjD,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAWlB,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,oBAAoB;AAAA,QACpB,OAAO,KAAK,MAAM;AAAA,QAClB,cAAc,MAAM,KAAK,MAAM,SAAS;AAAA,QAExC;AAAA,8BAAC,OACE,eAAK,MAAM,SACd;AAAA,UACA,oBAAC,OAAE,WAAU,4BACX,8BAAC,eAAY,SAAS,CAAC,MAAM,KAAK,MAAM,SAAS,CAAC,GAC/C,YAAE,QAAQ,GACb,GACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8bde27145f1281699b1dfa62d581929784f317bf"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return zp=function(){return l},l}zp();class Vhe extends ni.Component{render(){zp().f[0]++;const e=(zp().s[0]++,this.props.t);return zp().s[1]++,ce.jsxs(z1,{"data-wd-key":"modal:loading",isOpen:this.props.isOpen,underlayClickExits:!1,title:this.props.title,onOpenToggle:()=>(zp().f[1]++,zp().s[2]++,this.props.onCancel()),children:[ce.jsx("p",{children:this.props.message}),ce.jsx("p",{className:"maputnik-dialog__buttons",children:ce.jsx(ml,{onClick:t=>(zp().f[2]++,zp().s[3]++,this.props.onCancel(t)),children:e("Cancel")})})]})}}const $he=(zp().s[4]++,ss()(Vhe)),mj=[{id:"0-empty-style",title:"Empty Style",url:"https://cdn.jsdelivr.net/gh/maputnik/editor@9cf74ca405d2be0608b57db8109cf3a6af5b9f49/src/config/empty-style.json",thumbnail:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAQAAAAHDYbIAAAAEUlEQVR42mP8/58BDhiJ4wAA974H/U5Xe1oAAAAASUVORK5CYII="},{id:"americana",title:"Americana",url:"https://americanamap.org/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/23fa75ad-63e6-43f5-8837-03cdb0428bac"},{id:"aws-hybrid",title:"AWS Hybrid",url:"https://maps.geo.eu-west-1.amazonaws.com/v2/styles/Hybrid/descriptor?key=v1.public.eyJqdGkiOiJiOTNkYjBlZi04OWUzLTQxMGUtODFhMC0zYjZjZjVmZWZmMDgifYtukap0NBaJpcrS6Vit9j03GJgK9Bn-RSu5UCe3jkdSql2kKp3IEgLPtyLssbmKUdVO11sXddjK3ZOZy8V6QG0olv0K_1tOxyMIe4DAO3IV6H4VzHWiaXlbSakGiEgFLuHBdcfLDeMotye7N6rSRxuZb0CN9ytH9VjLly6-NEBRZezO_qPQyvdTFdeZsARIpL0f9YVpxPxPVvUcAWYCk5LpaPseRCDPrY5SlCdA1ZKqUA4F9RzxSTxB73Fel_SoNDkCNaux1VposBu791-uUpDzUpr7leKckrPXrpZ2hwnFbafVxFV9vq4fLTpB5KoBksuLfGNIwAx1RLLxWuMhE4c.ZGQzZDY2OGQtMWQxMy00ZTEwLWIyZGUtOGVjYzUzMjU3OGE4&color-scheme=Light",thumbnail:"https://maputnik.s3.eu-west-1.amazonaws.com/thumbnails/aws-hybrid.jpg"},{id:"aws-standard",title:"AWS Standard",url:"https://maps.geo.eu-west-1.amazonaws.com/v2/styles/Standard/descriptor?key=v1.public.eyJqdGkiOiJiOTNkYjBlZi04OWUzLTQxMGUtODFhMC0zYjZjZjVmZWZmMDgifYtukap0NBaJpcrS6Vit9j03GJgK9Bn-RSu5UCe3jkdSql2kKp3IEgLPtyLssbmKUdVO11sXddjK3ZOZy8V6QG0olv0K_1tOxyMIe4DAO3IV6H4VzHWiaXlbSakGiEgFLuHBdcfLDeMotye7N6rSRxuZb0CN9ytH9VjLly6-NEBRZezO_qPQyvdTFdeZsARIpL0f9YVpxPxPVvUcAWYCk5LpaPseRCDPrY5SlCdA1ZKqUA4F9RzxSTxB73Fel_SoNDkCNaux1VposBu791-uUpDzUpr7leKckrPXrpZ2hwnFbafVxFV9vq4fLTpB5KoBksuLfGNIwAx1RLLxWuMhE4c.ZGQzZDY2OGQtMWQxMy00ZTEwLWIyZGUtOGVjYzUzMjU3OGE4&color-scheme=Light",thumbnail:"https://maputnik.s3.eu-west-1.amazonaws.com/thumbnails/aws-standard.jpg"},{id:"dark-matter",title:"Dark Matter",url:"https://cdn.jsdelivr.net/gh/openmaptiles/dark-matter-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/dark-matter.png"},{id:"locationiq-streets",title:"LocationIQ Streets",url:"https://tiles.locationiq.com/v3/streets/vector.json?key={key}",thumbnail:"https://static-assets.locationiq.com/maputnik/locationiq-streets.png"},{id:"maptiler-basic-gl-style",title:"MapTiler Basic",url:"https://cdn.jsdelivr.net/gh/openmaptiles/klokantech-basic-gl-style@v1.10/style.json",thumbnail:"https://maputnik.github.io/thumbnails/klokantech-basic.png"},{id:"maptiler-toner-gl-style",title:"Toner",url:"https://cdn.jsdelivr.net/gh/openmaptiles/toner-gl-style@v1.0/style.json",thumbnail:"https://maputnik.github.io/thumbnails/toner.png"},{id:"osm-bright",title:"OSM Bright",url:"https://cdn.jsdelivr.net/gh/openmaptiles/osm-bright-gl-style@v1.11/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-bright.png"},{id:"osm-liberty",title:"OSM Liberty",url:"https://maputnik.github.io/osm-liberty/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-liberty.png"},{id:"osm-openmaptiles",title:"OSM OpenMapTiles",url:"https://api.maptiler.com/maps/openstreetmap/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL",thumbnail:"https://openmaptiles.org/img/styles/openmaptiles.png"},{id:"positron",title:"Positron",url:"https://cdn.jsdelivr.net/gh/openmaptiles/positron-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/positron.png"},{id:"protomaps-light",title:"Protomaps Light",url:"https://api.protomaps.com/styles/v4/light/en.json?key=d828297496b11844",thumbnail:"https://github.com/user-attachments/assets/911f9765-4a7d-4736-9ec0-f2d4c90ae587"},{id:"stadia-outdoors",title:"Stadia Outdoors",url:"https://tiles.stadiamaps.com/styles/outdoors.json",thumbnail:"https://tiles.stadiamaps.com/static/outdoors.png?size=480x320&center=47.350259,8.49035&zoom=16"},{id:"versatiles-colorful",title:"Versatiles Colorful",url:"https://tiles.versatiles.org/assets/styles/colorful/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/6cd69818-c541-46e4-a920-65fb4f654931"}];function ri(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx",e="8184c6deffa3a127d027cb740011486d4cec7c6b",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx",statementMap:{0:{start:{line:15,column:4},end:{line:38,column:9}},1:{start:{line:20,column:23},end:{line:20,column:58}},2:{start:{line:43,column:4},end:{line:43,column:17}},3:{start:{line:44,column:4},end:{line:46,column:6}},4:{start:{line:49,column:4},end:{line:51,column:7}},5:{start:{line:54,column:4},end:{line:54,column:31}},6:{start:{line:54,column:11},end:{line:54,column:31}},7:{start:{line:55,column:4},end:{line:61,column:5}},8:{start:{line:56,column:6},end:{line:56,column:39}},9:{start:{line:57,column:6},end:{line:60,column:9}},10:{start:{line:63,column:18},end:{line:100,column:3}},11:{start:{line:64,column:4},end:{line:64,column:22}},12:{start:{line:65,column:19},end:{line:65,column:24}},13:{start:{line:66,column:4},end:{line:91,column:7}},14:{start:{line:70,column:6},end:{line:70,column:29}},15:{start:{line:72,column:6},end:{line:74,column:7}},16:{start:{line:73,column:8},end:{line:73,column:15}},17:{start:{line:75,column:6},end:{line:78,column:9}},18:{start:{line:79,column:23},end:{line:79,column:54}},19:{start:{line:80,column:6},end:{line:80,column:48}},20:{start:{line:81,column:6},end:{line:81,column:39}},21:{start:{line:82,column:6},end:{line:82,column:26}},22:{start:{line:84,column:6},end:{line:88,column:9}},23:{start:{line:89,column:6},end:{line:89,column:25}},24:{start:{line:90,column:6},end:{line:90,column:61}},25:{start:{line:92,column:4},end:{line:99,column:7}},26:{start:{line:95,column:10},end:{line:95,column:26}},27:{start:{line:101,column:16},end:{line:104,column:3}},28:{start:{line:102,column:4},end:{line:102,column:23}},29:{start:{line:103,column:4},end:{line:103,column:44}},30:{start:{line:105,column:15},end:{line:132,column:3}},31:{start:{line:106,column:4},end:{line:106,column:22}},32:{start:{line:107,column:23},end:{line:115,column:5}},33:{start:{line:116,column:25},end:{line:116,column:68}},34:{start:{line:117,column:17},end:{line:117,column:43}},35:{start:{line:118,column:20},end:{line:118,column:37}},36:{start:{line:120,column:4},end:{line:127,column:5}},37:{start:{line:121,column:6},end:{line:121,column:37}},38:{start:{line:123,column:6},end:{line:125,column:9}},39:{start:{line:126,column:6},end:{line:126,column:13}},40:{start:{line:128,column:4},end:{line:128,column:51}},41:{start:{line:129,column:4},end:{line:129,column:49}},42:{start:{line:130,column:4},end:{line:130,column:24}},43:{start:{line:131,column:4},end:{line:131,column:16}},44:{start:{line:135,column:18},end:{line:155,column:3}},45:{start:{line:136,column:21},end:{line:136,column:29}},46:{start:{line:137,column:19},end:{line:137,column:35}},47:{start:{line:138,column:4},end:{line:138,column:22}},48:{start:{line:139,column:4},end:{line:139,column:37}},49:{start:{line:140,column:4},end:{line:153,column:6}},50:{start:{line:142,column:6},end:{line:149,column:7}},51:{start:{line:143,column:8},end:{line:143,column:48}},52:{start:{line:145,column:8},end:{line:147,column:11}},53:{start:{line:148,column:8},end:{line:148,column:15}},54:{start:{line:150,column:6},end:{line:150,column:53}},55:{start:{line:151,column:6},end:{line:151,column:39}},56:{start:{line:152,column:6},end:{line:152,column:26}},57:{start:{line:154,column:4},end:{line:154,column:50}},58:{start:{line:154,column:28},end:{line:154,column:49}},59:{start:{line:157,column:4},end:{line:159,column:7}},60:{start:{line:160,column:4},end:{line:160,column:22}},61:{start:{line:161,column:4},end:{line:161,column:30}},62:{start:{line:163,column:16},end:{line:167,column:3}},63:{start:{line:164,column:4},end:{line:166,column:7}},64:{start:{line:169,column:14},end:{line:169,column:26}},65:{start:{line:170,column:25},end:{line:181,column:6}},66:{start:{line:171,column:6},end:{line:180,column:8}},67:{start:{line:183,column:4},end:{line:188,column:5}},68:{start:{line:184,column:6},end:{line:187,column:11}},69:{start:{line:186,column:61},end:{line:186,column:78}},70:{start:{line:189,column:4},end:{line:267,column:9}},71:{start:{line:195,column:30},end:{line:195,column:49}},72:{start:{line:263,column:27},end:{line:263,column:56}},73:{start:{line:270,column:18},end:{line:270,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:39,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:58}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:42,column:2},end:{line:42,column:3}},loc:{start:{line:42,column:21},end:{line:47,column:3}},line:42},3:{name:"(anonymous_3)",decl:{start:{line:48,column:2},end:{line:48,column:3}},loc:{start:{line:48,column:15},end:{line:52,column:3}},line:48},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:27},end:{line:62,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:32},end:{line:100,column:3}},line:63},6:{name:"(anonymous_6)",decl:{start:{line:69,column:12},end:{line:69,column:13}},loc:{start:{line:69,column:31},end:{line:71,column:5}},line:69},7:{name:"(anonymous_7)",decl:{start:{line:71,column:12},end:{line:71,column:13}},loc:{start:{line:71,column:22},end:{line:83,column:5}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:83,column:13},end:{line:83,column:14}},loc:{start:{line:83,column:22},end:{line:91,column:5}},line:83},9:{name:"(anonymous_9)",decl:{start:{line:94,column:15},end:{line:94,column:16}},loc:{start:{line:94,column:26},end:{line:96,column:9}},line:94},10:{name:"(anonymous_10)",decl:{start:{line:101,column:16},end:{line:101,column:17}},loc:{start:{line:101,column:23},end:{line:104,column:3}},line:101},11:{name:"(anonymous_11)",decl:{start:{line:105,column:15},end:{line:105,column:16}},loc:{start:{line:105,column:27},end:{line:132,column:3}},line:105},12:{name:"(anonymous_12)",decl:{start:{line:135,column:18},end:{line:135,column:19}},loc:{start:{line:135,column:38},end:{line:155,column:3}},line:135},13:{name:"(anonymous_13)",decl:{start:{line:140,column:20},end:{line:140,column:21}},loc:{start:{line:140,column:27},end:{line:153,column:5}},line:140},14:{name:"(anonymous_14)",decl:{start:{line:154,column:21},end:{line:154,column:22}},loc:{start:{line:154,column:28},end:{line:154,column:49}},line:154},15:{name:"(anonymous_15)",decl:{start:{line:156,column:2},end:{line:156,column:3}},loc:{start:{line:156,column:17},end:{line:162,column:3}},line:156},16:{name:"(anonymous_16)",decl:{start:{line:163,column:16},end:{line:163,column:17}},loc:{start:{line:163,column:25},end:{line:167,column:3}},line:163},17:{name:"(anonymous_17)",decl:{start:{line:168,column:2},end:{line:168,column:3}},loc:{start:{line:168,column:11},end:{line:268,column:3}},line:168},18:{name:"(anonymous_18)",decl:{start:{line:170,column:42},end:{line:170,column:43}},loc:{start:{line:170,column:54},end:{line:181,column:5}},line:170},19:{name:"(anonymous_19)",decl:{start:{line:186,column:55},end:{line:186,column:56}},loc:{start:{line:186,column:61},end:{line:186,column:78}},line:186},20:{name:"(anonymous_20)",decl:{start:{line:195,column:24},end:{line:195,column:25}},loc:{start:{line:195,column:30},end:{line:195,column:49}},line:195},21:{name:"(anonymous_21)",decl:{start:{line:263,column:20},end:{line:263,column:21}},loc:{start:{line:263,column:27},end:{line:263,column:56}},line:263}},branchMap:{0:{loc:{start:{line:54,column:4},end:{line:54,column:31}},type:"if",locations:[{start:{line:54,column:4},end:{line:54,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},1:{loc:{start:{line:55,column:4},end:{line:61,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:61,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},2:{loc:{start:{line:72,column:6},end:{line:74,column:7}},type:"if",locations:[{start:{line:72,column:6},end:{line:74,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:72},3:{loc:{start:{line:183,column:4},end:{line:188,column:5}},type:"if",locations:[{start:{line:183,column:4},end:{line:188,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:183},4:{loc:{start:{line:202,column:53},end:{line:217,column:21}},type:"cond-expr",locations:[{start:{line:202,column:119},end:{line:213,column:15}},{start:{line:213,column:34},end:{line:217,column:21}}],line:202}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx"],names:["style"],mappings:"AA6BQ,SACE,KADF;AA7BR,OAAO,WAA0B;AACjC,SAAQ,oBAAmB;AAC3B,SAAQ,0BAAyB;AACjC,OAAO,qBAAiC;AACxC,SAAS,OAAwB,uBAAuB;AAExD,OAAO,kBAAkB;AACzB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AAErB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AASzB,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,yBACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,cAAY,KAAK,MAAM;AAAA,QACvB,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,GAAG;AAAA,QAEjD;AAAA,+BAAC,SAAI,WAAU,gCACb;AAAA,gCAAC,SAAK,eAAK,MAAM,OAAM;AAAA,YACvB,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,sBAAmB;AAAA,aACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO;AAAA,gBACL,iBAAiB,OAAO,KAAK,MAAM,YAAY;AAAA,cACjD;AAAA;AAAA,UACD;AAAA;AAAA;AAAA,IACH,GACF;AAAA,EACF;AACF;AAgBA,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,UAAU;AAAA,IACZ;AAAA,EACF;AAAA,EAEA,aAAa;AACX,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,GAAU;AAE9B,QAAG,EAAG,GAAE,gBAAgB;AAExB,QAAG,KAAK,MAAM,eAAe;AAC3B,WAAK,MAAM,cAAc,MAAM;AAC/B,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,aAAqB;AACpC,SAAK,WAAW;AAEhB,QAAI,WAAoB;AAExB,UAAM,UAAU;AAAA,MACd,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,UAAG,UAAU;AACX;AAAA,MACF;AAEA,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAED,YAAM,WAAW,MAAM,oBAAoB,IAAI;AAC/C,cAAQ,IAAI,iBAAiB,SAAS,EAAE;AACxC,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB,CAAC,EACA,MAAM,CAAC,QAAQ;AACd,WAAK,SAAS;AAAA,QACZ,OAAO,oBAAoB,QAAQ;AAAA,QACnC,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AACD,cAAQ,MAAM,GAAG;AACjB,cAAQ,KAAK,gCAAgC,QAAQ;AAAA,IACvD,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,eAAe;AAAA,QACb,OAAO,WAAW;AAChB,qBAAW;AAAA,QACb;AAAA,MACF;AAAA,MACA,kBAAkB;AAAA,IACpB,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,MAAkC;AAC/C,MAAE,eAAe;AACjB,SAAK,cAAc,KAAK,MAAM,QAAQ;AAAA,EACxC;AAAA,EAEA,aAAa,YAAY;AACvB,SAAK,WAAW;AAEhB,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAE,oBAAoB,CAAC,OAAO,EAAE;AAAA,QAC1C;AAAA,MACF;AAAA,MACA,UAAU;AAAA,IACZ;AAEA,UAAM,CAAC,UAAU,IAAI,MAAM,OAAO,mBAAmB,UAAU;AAC/D,UAAM,OAAO,MAAM,WAAW,QAAQ;AACtC,UAAM,UAAU,MAAM,KAAK,KAAK;AAEhC,QAAI;AACJ,QAAI;AACF,iBAAW,KAAK,MAAM,OAAO;AAAA,IAC/B,SAAS,KAAK;AACZ,WAAK,SAAS;AAAA,QACZ,OAAQ,IAAc,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,eAAW,MAAM,oBAAoB,QAAQ;AAE7C,SAAK,MAAM,YAAY,UAAU,UAAU;AAC3C,SAAK,aAAa;AAClB,WAAO;AAAA,EACT;AAAA;AAAA;AAAA,EAIA,gBAAgB,OAAO,GAAQ,UAAoB;AACjD,UAAM,CAAC,EAAE,IAAI,IAAI,MAAM,CAAC;AACxB,UAAM,SAAS,IAAI,WAAW;AAC9B,SAAK,WAAW;AAEhB,WAAO,WAAW,MAAM,OAAO;AAC/B,WAAO,SAAS,OAAK;AACnB,UAAI;AACJ,UAAI;AACF,mBAAW,KAAK,MAAM,EAAE,QAAQ,MAAgB;AAAA,MAClD,SACM,KAAK;AACT,aAAK,SAAS;AAAA,UACZ,OAAQ,IAAc,SAAS;AAAA,QACjC,CAAC;AACD;AAAA,MACF;AACA,iBAAW,MAAM,oBAAoB,QAAQ;AAC7C,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB;AACA,WAAO,UAAU,OAAK,QAAQ,IAAI,EAAE,MAAM;AAAA,EAC5C;AAAA,EAEA,eAAe;AACb,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AACD,SAAK,WAAW;AAChB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,cAAc,CAAC,QAAgB;AAC7B,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,eAAe,aAAa,IAAI,CAAAA,WAAS;AAC7C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,KAAKA,OAAM;AAAA,UACX,OAAOA,OAAM;AAAA,UACb,cAAcA,OAAM;AAAA,UACpB,UAAU,KAAK;AAAA;AAAA,QAJVA,OAAM;AAAA,MAKb;AAAA,IACF,CAAC;AAED,QAAI;AACJ,QAAG,KAAK,MAAM,OAAO;AACnB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ,oBAAC,OAAE,MAAK,KAAI,SAAS,MAAM,KAAK,WAAW,GAAG,WAAU,8BAA6B,eAAC;AAAA,SACxF;AAAA,IAEJ;AAEA,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,eAAY;AAAA,UACZ,QAAQ,KAAK,MAAM;AAAA,UACnB,cAAc,MAAM,KAAK,aAAa;AAAA,UACtC,OAAO,EAAE,YAAY;AAAA,UAEpB;AAAA;AAAA,YACD,qBAAC,aAAQ,WAAU,0BACjB;AAAA,kCAAC,QAAI,YAAE,kBAAkB,GAAE;AAAA,cAC3B,oBAAC,OAAG,YAAE,6CAA6C,GAAE;AAAA,cACrD,oBAAC,SACE,iBAAO,OAAO,uBAAuB,aACpC;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,KAAK;AAAA,kBAAY;AAAA,wCAAC,gBAAY;AAAA,oBAAE;AAAA,oBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,cAC3D,IAEA,oBAAC,mBAAgB,UAAU,KAAK,eAAe,UAAU,IAAI,cAAY,EAAE,YAAY,GACrF,+BAAC,eAAY,WAAU,0BAAyB;AAAA,oCAAC,gBAAa;AAAA,gBAAE;AAAA,gBAAE,EAAE,YAAY;AAAA,iBAAE,GACpF,GAEJ;AAAA,eACF;AAAA,YAEA,oBAAC,aAAQ,WAAU,0BACjB,+BAAC,UAAK,UAAU,KAAK,aACnB;AAAA,kCAAC,QAAI,YAAE,eAAe,GAAE;AAAA,cACxB,oBAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,gBACkC,oBAAC,OAAE,MAAK,2BAA0B,QAAO,UAAS,KAAI,uBAAsB,0BAAY;AAAA,gBAAI;AAAA,iBAC3I,GACF;AAAA,cACA;AAAA,gBAAC;AAAA;AAAA,kBACC,cAAY,EAAE,WAAW;AAAA,kBACzB,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,SAAS,EAAE,cAAc;AAAA,kBACzB,OAAO,KAAK,MAAM;AAAA,kBAClB,SAAS,KAAK;AAAA,kBACd,UAAU,KAAK;AAAA;AAAA,cACjB;AAAA,cACA,oBAAC,SACC;AAAA,gBAAC;AAAA;AAAA,kBACC,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,UAAU,KAAK,MAAM,SAAS,SAAS;AAAA,kBACxC;AAAA;AAAA,cAAa,GAChB;AAAA,eACF,GACF;AAAA,YAEA,qBAAC,aAAQ,WAAU,yDACjB;AAAA,kCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,cACzB,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,cACA,oBAAC,SAAI,WAAU,oCACZ,wBACH;AAAA,eACF;AAAA;AAAA;AAAA,MACF;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,CAAC,CAAC,KAAK,MAAM;AAAA,UACrB,OAAO,EAAE,eAAe;AAAA,UACxB,UAAU,CAAC,MAAa,KAAK,sBAAsB,CAAC;AAAA,UACpD,SAAS,EAAE,2BAA2B,EAAE,YAAY,KAAK,MAAM,iBAAiB,CAAC;AAAA;AAAA,MACnF;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8184c6deffa3a127d027cb740011486d4cec7c6b"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return ri=function(){return l},l}ri();class Zhe extends ni.Component{render(){return ri().f[0]++,ri().s[0]++,ce.jsx("div",{className:"maputnik-public-style",children:ce.jsxs(ml,{className:"maputnik-public-style-button","aria-label":this.props.title,onClick:()=>(ri().f[1]++,ri().s[1]++,this.props.onSelect(this.props.url)),children:[ce.jsxs("div",{className:"maputnik-public-style-header",children:[ce.jsx("div",{children:this.props.title}),ce.jsx("span",{className:"maputnik-space"}),ce.jsx(iF,{})]}),ce.jsx("div",{className:"maputnik-public-style-thumbnail",style:{backgroundImage:`url(${this.props.thumbnailUrl})`}})]})})}}class Xhe extends ni.Component{constructor(e){ri().f[2]++,ri().s[2]++,super(e),ri().s[3]++,this.state={styleUrl:""}}clearError(){ri().f[3]++,ri().s[4]++,this.setState({error:null})}onCancelActiveRequest(e){ri().f[4]++,ri().s[5]++,e?(ri().b[0][0]++,ri().s[6]++,e.stopPropagation()):ri().b[0][1]++,ri().s[7]++,this.state.activeRequest?(ri().b[1][0]++,ri().s[8]++,this.state.activeRequest.abort(),ri().s[9]++,this.setState({activeRequest:null,activeRequestUrl:null})):ri().b[1][1]++}onStyleSelect=(ri().s[10]++,e=>{ri().f[5]++,ri().s[11]++,this.clearError();let t=(ri().s[12]++,!1);ri().s[13]++,fetch(e,{mode:"cors",credentials:"same-origin"}).then(function(i){return ri().f[6]++,ri().s[14]++,i.json()}).then(i=>{if(ri().f[7]++,ri().s[15]++,t){ri().b[2][0]++,ri().s[16]++;return}else ri().b[2][1]++;ri().s[17]++,this.setState({activeRequest:null,activeRequestUrl:null});const r=(ri().s[18]++,qd.ensureStyleValidity(i));ri().s[19]++,console.log("Loaded style ",r.id),ri().s[20]++,this.props.onStyleOpen(r),ri().s[21]++,this.onOpenToggle()}).catch(i=>{ri().f[8]++,ri().s[22]++,this.setState({error:`Failed to load: '${e}'`,activeRequest:null,activeRequestUrl:null}),ri().s[23]++,console.error(i),ri().s[24]++,console.warn("Could not open the style URL",e)}),ri().s[25]++,this.setState({activeRequest:{abort:function(){ri().f[9]++,ri().s[26]++,t=!0}},activeRequestUrl:e})});onSubmitUrl=(ri().s[27]++,e=>{ri().f[10]++,ri().s[28]++,e.preventDefault(),ri().s[29]++,this.onStyleSelect(this.state.styleUrl)});onOpenFile=(ri().s[30]++,async()=>{ri().f[11]++,ri().s[31]++,this.clearError();const e=(ri().s[32]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],multiple:!1}),[t]=(ri().s[33]++,await window.showOpenFilePicker(e)),i=(ri().s[34]++,await t.getFile()),r=(ri().s[35]++,await i.text());let a;ri().s[36]++;try{ri().s[37]++,a=JSON.parse(r)}catch(l){ri().s[38]++,this.setState({error:l.toString()}),ri().s[39]++;return}return ri().s[40]++,a=qd.ensureStyleValidity(a),ri().s[41]++,this.props.onStyleOpen(a,t),ri().s[42]++,this.onOpenToggle(),ri().s[43]++,i});onFileChanged=(ri().s[44]++,async(e,t)=>{ri().f[12]++;const[,i]=(ri().s[45]++,t[0]),r=(ri().s[46]++,new FileReader);ri().s[47]++,this.clearError(),ri().s[48]++,r.readAsText(i,"UTF-8"),ri().s[49]++,r.onload=a=>{ri().f[13]++;let l;ri().s[50]++;try{ri().s[51]++,l=JSON.parse(a.target?.result)}catch(o){ri().s[52]++,this.setState({error:o.toString()}),ri().s[53]++;return}ri().s[54]++,l=qd.ensureStyleValidity(l),ri().s[55]++,this.props.onStyleOpen(l),ri().s[56]++,this.onOpenToggle()},ri().s[57]++,r.onerror=a=>(ri().f[14]++,ri().s[58]++,console.log(a.target))});onOpenToggle(){ri().f[15]++,ri().s[59]++,this.setState({styleUrl:""}),ri().s[60]++,this.clearError(),ri().s[61]++,this.props.onOpenToggle()}onChangeUrl=(ri().s[62]++,e=>{ri().f[16]++,ri().s[63]++,this.setState({styleUrl:e})});render(){ri().f[17]++;const e=(ri().s[64]++,this.props.t),t=(ri().s[65]++,mj.map(r=>(ri().f[18]++,ri().s[66]++,ce.jsx(Zhe,{url:r.url,title:r.title,thumbnailUrl:r.thumbnail,onSelect:this.onStyleSelect},r.id))));let i;return ri().s[67]++,this.state.error?(ri().b[3][0]++,ri().s[68]++,i=ce.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,ce.jsx("a",{href:"#",onClick:()=>(ri().f[19]++,ri().s[69]++,this.clearError()),className:"maputnik-modal-error-close",children:"×"})]})):ri().b[3][1]++,ri().s[70]++,ce.jsxs("div",{children:[ce.jsxs(z1,{"data-wd-key":"modal:open",isOpen:this.props.isOpen,onOpenToggle:()=>(ri().f[20]++,ri().s[71]++,this.onOpenToggle()),title:e("Open Style"),children:[i,ce.jsxs("section",{className:"maputnik-modal-section",children:[ce.jsx("h1",{children:e("Open local Style")}),ce.jsx("p",{children:e("Open a local JSON style from your computer.")}),ce.jsx("div",{children:typeof window.showOpenFilePicker=="function"?(ri().b[4][0]++,ce.jsxs(ml,{className:"maputnik-big-button",onClick:this.onOpenFile,children:[ce.jsx(II,{})," ",e("Open Style")]})):(ri().b[4][1]++,ce.jsx(Hhe,{onChange:this.onFileChanged,tabIndex:-1,"aria-label":e("Open Style"),children:ce.jsxs(ml,{className:"maputnik-upload-button",children:[ce.jsx(II,{})," ",e("Open Style")]})}))})]}),ce.jsx("section",{className:"maputnik-modal-section",children:ce.jsxs("form",{onSubmit:this.onSubmitUrl,children:[ce.jsx("h1",{children:e("Load from URL")}),ce.jsx("p",{children:ce.jsxs(O1,{t:e,children:["Load from a URL. Note that the URL must have ",ce.jsx("a",{href:"https://enable-cors.org",target:"_blank",rel:"noopener noreferrer",children:"CORS enabled"}),"."]})}),ce.jsx(J8,{"aria-label":e("Style URL"),"data-wd-key":"modal:open.url.input",type:"text",className:"maputnik-input",default:e("Enter URL..."),value:this.state.styleUrl,onInput:this.onChangeUrl,onChange:this.onChangeUrl}),ce.jsx("div",{children:ce.jsx(ml,{"data-wd-key":"modal:open.url.button",type:"submit",className:"maputnik-big-button",disabled:this.state.styleUrl.length<1,children:"Load from URL"})})]})}),ce.jsxs("section",{className:"maputnik-modal-section maputnik-modal-section--shrink",children:[ce.jsx("h1",{children:e("Gallery Styles")}),ce.jsx("p",{children:e("Open one of the publicly available styles to start from.")}),ce.jsx("div",{className:"maputnik-style-gallery-container",children:t})]})]}),ce.jsx($he,{isOpen:!!this.state.activeRequest,title:e("Loading style"),onCancel:r=>(ri().f[21]++,ri().s[72]++,this.onCancelActiveRequest(r)),message:e("Loading: {{requestUrl}}",{requestUrl:this.state.activeRequestUrl})})]})}}const Jhe=(ri().s[73]++,ss()(Xhe));function hm(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx",e="191036865e47f3c94f728b94bda5a71f6ea5aff5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:17},end:{line:41,column:5}},2:{start:{line:42,column:25},end:{line:115,column:5}},3:{start:{line:116,column:4},end:{line:145,column:6}},4:{start:{line:130,column:12},end:{line:133,column:22}},5:{start:{line:137,column:12},end:{line:141,column:22}},6:{start:{line:148,column:23},end:{line:148,column:64}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:146,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:129,column:57},end:{line:129,column:58}},loc:{start:{line:129,column:72},end:{line:134,column:11}},line:129},2:{name:"(anonymous_2)",decl:{start:{line:136,column:65},end:{line:136,column:66}},loc:{start:{line:136,column:80},end:{line:142,column:11}},line:136}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx"],names:[],mappings:"AAiBa,SAwCA,UAxCA,KAwCA,YAxCA;AAjBb,OAAO,WAAW;AAClB,SAAS,OAAwB,uBAAuB;AAExD,OAAO,WAAW;AASlB,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,OAAO;AAAA,MACX;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,YAAY;AAAA,MACtB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,cAAc;AAAA,MACxB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,oBAAoB;AAAA,MAC9B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,sBAAsB;AAAA,MAChC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,WAAW;AAAA,MACrB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,aAAa;AAAA,MACvB;AAAA,IACF;AAGA,UAAM,eAAe;AAAA,MACnB;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,gBAAE;AAAA,QACZ,MAAM,EAAE,uBAAwB;AAAA,MAClC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,mBAAK;AAAA,QACf,MAAM,EAAE,0BAA2B;AAAA,MACrC;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,mBAAK;AAAA,WAAM;AAAA,QAC1C,MAAM,EAAE,sCAAuC;AAAA,MACjD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,sCAAsC;AAAA,MAChD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,gBAAE;AAAA,WAAM;AAAA,QACvC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,IACF;AAGA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QAEpB,+BAAC,aAAQ,WAAU,mDACjB;AAAA,8BAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAK,iBAAG;AAAA,YAAO;AAAA,aACxB,GACF;AAAA,UACA,oBAAC,QACE,eAAK,IAAI,CAAC,MAAM,QAAQ;AACvB,mBAAO,qBAAC,SAAc,WAAU,sCAC9B;AAAA,kCAAC,QAAmB,eAAK,OAAhB,OAAK,GAAe;AAAA,cAC7B,oBAAC,QAAmB,eAAK,QAAhB,OAAK,GAAgB;AAAA,iBAFf,GAGjB;AAAA,UACF,CAAC,GACH;AAAA,UACA,oBAAC,OAAG,YAAE,8DAA8D,GAAE;AAAA,UACtE,oBAAC,QACE,uBAAa,IAAI,CAAC,MAAM,QAAQ;AAC/B,mBAAO,qBAAC,QACN;AAAA,kCAAC,UAAM,eAAK,KAAI;AAAA,cAAO;AAAA,cAAE,KAAK;AAAA,iBADhB,GAEhB;AAAA,UACF,CAAC,GACH;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,iBAAiB,gBAAgB,EAAE,sBAAsB;AAC/D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"191036865e47f3c94f728b94bda5a71f6ea5aff5"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return hm=function(){return l},l}hm();class ede extends ni.Component{render(){hm().f[0]++;const e=(hm().s[0]++,this.props.t),t=(hm().s[1]++,[{key:ce.jsx("kbd",{children:"?"}),text:e("Shortcuts menu")},{key:ce.jsx("kbd",{children:"o"}),text:e("Open modal")},{key:ce.jsx("kbd",{children:"e"}),text:e("Export modal")},{key:ce.jsx("kbd",{children:"d"}),text:e("Data Sources modal")},{key:ce.jsx("kbd",{children:"s"}),text:e("Style Settings modal")},{key:ce.jsx("kbd",{children:"i"}),text:e("Toggle inspect")},{key:ce.jsx("kbd",{children:"m"}),text:e("Focus map")},{key:ce.jsx("kbd",{children:"!"}),text:e("Debug modal")}]),i=(hm().s[2]++,[{key:ce.jsx("kbd",{children:"+"}),text:e("Increase the zoom level by 1.")},{key:ce.jsxs(ce.Fragment,{children:[ce.jsx("kbd",{children:"Shift"})," + ",ce.jsx("kbd",{children:"+"})]}),text:e("Increase the zoom level by 2.")},{key:ce.jsx("kbd",{children:"-"}),text:e("Decrease the zoom level by 1.")},{key:ce.jsxs(ce.Fragment,{children:[ce.jsx("kbd",{children:"Shift"})," + ",ce.jsx("kbd",{children:"-"})]}),text:e("Decrease the zoom level by 2.")},{key:ce.jsx("kbd",{children:"Up"}),text:e("Pan up by 100 pixels.")},{key:ce.jsx("kbd",{children:"Down"}),text:e("Pan down by 100 pixels.")},{key:ce.jsx("kbd",{children:"Left"}),text:e("Pan left by 100 pixels.")},{key:ce.jsx("kbd",{children:"Right"}),text:e("Pan right by 100 pixels.")},{key:ce.jsxs(ce.Fragment,{children:[ce.jsx("kbd",{children:"Shift"})," + ",ce.jsx("kbd",{children:"Right"})]}),text:e("Increase the rotation by 15 degrees.")},{key:ce.jsxs(ce.Fragment,{children:[ce.jsx("kbd",{children:"Shift"})," + ",ce.jsx("kbd",{children:"Left"})]}),text:e("Decrease the rotation by 15 degrees.")},{key:ce.jsxs(ce.Fragment,{children:[ce.jsx("kbd",{children:"Shift"})," + ",ce.jsx("kbd",{children:"Up"})]}),text:e("Increase the pitch by 10 degrees.")},{key:ce.jsxs(ce.Fragment,{children:[ce.jsx("kbd",{children:"Shift"})," + ",ce.jsx("kbd",{children:"Down"})]}),text:e("Decrease the pitch by 10 degrees.")}]);return hm().s[3]++,ce.jsx(z1,{"data-wd-key":"modal:shortcuts",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Shortcuts"),children:ce.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[ce.jsx("p",{children:ce.jsxs(O1,{t:e,children:["Press ",ce.jsx("code",{children:"ESC"})," to lose focus of any active elements, then press one of:"]})}),ce.jsx("dl",{children:t.map((r,a)=>(hm().f[1]++,hm().s[4]++,ce.jsxs("div",{className:"maputnik-modal-shortcuts__shortcut",children:[ce.jsx("dt",{children:r.key},"dt"+a),ce.jsx("dd",{children:r.text},"dd"+a)]},a)))}),ce.jsx("p",{children:e("If the Map is in focused you can use the following shortcuts")}),ce.jsx("ul",{children:i.map((r,a)=>(hm().f[2]++,hm().s[5]++,ce.jsxs("li",{children:[ce.jsx("span",{children:r.key})," ",r.text]},a)))})]})})}}const tde=(hm().s[6]++,ss()(ede));function ku(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx",e="cdc361a696e28ff748486407bff41d3396d90851",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx",statementMap:{0:{start:{line:7,column:27},end:{line:7,column:37}},1:{start:{line:8,column:20},end:{line:8,column:48}},2:{start:{line:9,column:19},end:{line:9,column:49}},3:{start:{line:10,column:19},end:{line:10,column:49}},4:{start:{line:11,column:4},end:{line:53,column:6}},5:{start:{line:22,column:14},end:{line:26,column:27}},6:{start:{line:23,column:96},end:{line:23,column:153}},7:{start:{line:29,column:14},end:{line:33,column:27}},8:{start:{line:30,column:96},end:{line:30,column:153}},9:{start:{line:56,column:19},end:{line:56,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:54,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:21,column:140},end:{line:21,column:141}},loc:{start:{line:21,column:156},end:{line:27,column:13}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:89},end:{line:23,column:90}},loc:{start:{line:23,column:96},end:{line:23,column:153}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:28,column:136},end:{line:28,column:137}},loc:{start:{line:28,column:152},end:{line:34,column:13}},line:28},4:{name:"(anonymous_4)",decl:{start:{line:30,column:89},end:{line:30,column:90}},loc:{start:{line:30,column:96},end:{line:30,column:153}},line:30}},branchMap:{0:{loc:{start:{line:21,column:12},end:{line:27,column:17}},type:"binary-expr",locations:[{start:{line:21,column:12},end:{line:21,column:44}},{start:{line:21,column:64},end:{line:27,column:17}}],line:21},1:{loc:{start:{line:28,column:12},end:{line:34,column:17}},type:"binary-expr",locations:[{start:{line:28,column:12},end:{line:28,column:40}},{start:{line:28,column:60},end:{line:34,column:17}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx"],names:[],mappings:"AAuCQ,cAKQ,YALR;AAvCR,OAAO,WAAW;AAClB,SAAS,OAAwB,uBAAuB;AAExD,OAAO,WAAW;AAqBlB,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAS;AACP,UAAM,EAAC,GAAG,QAAO,IAAI,KAAK;AAE1B,UAAM,UAAU,KAAK,MAAM,QAAQ,IAAI,IAAE;AACzC,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAC9C,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAE9C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,OAAO;AAAA,QAEhB;AAAA,+BAAC,aAAQ,WAAU,mDACjB;AAAA,gCAAC,QAAI,YAAE,SAAS,GAAE;AAAA,YACjB,KAAK,MAAM,aAAa,YACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,YAED,KAAK,MAAM,aAAa,QACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,aAEJ;AAAA,UACA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,OAAO,GAAE;AAAA,YAChB,oBAAC,OACC,+BAAC,SAAM,GACL;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,QAAO;AAAA,kBACP,KAAI;AAAA,kBACJ,MAAM,sCAAsC,OAAO,IAAI,MAAM,IAAI,MAAM;AAAA,kBACxE;AAAA;AAAA,cAED;AAAA,cAAI;AAAA,eACN,GACF;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cdc361a696e28ff748486407bff41d3396d90851"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return ku=function(){return l},l}ku();class nde extends ni.Component{render(){ku().f[0]++;const{t:e,mapView:t}=(ku().s[0]++,this.props),i=(ku().s[1]++,Math.round(t.zoom)+1),r=(ku().s[2]++,+t.center.lng.toFixed(5)),a=(ku().s[3]++,+t.center.lat.toFixed(5));return ku().s[4]++,ce.jsxs(z1,{"data-wd-key":"modal:debug",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Debug"),children:[ce.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[ce.jsx("h1",{children:e("Options")}),(ku().b[0][0]++,this.props.renderer==="mlgljs"&&(ku().b[0][1]++,ce.jsx("ul",{children:Object.entries(this.props.maplibreGlDebugOptions).map(([l,o])=>(ku().f[1]++,ku().s[5]++,ce.jsx("li",{children:ce.jsxs("label",{children:[ce.jsx("input",{type:"checkbox",checked:o,onChange:m=>(ku().f[2]++,ku().s[6]++,this.props.onChangeMaplibreGlDebug(l,m.target.checked))})," ",l]})},l)))}))),(ku().b[1][0]++,this.props.renderer==="ol"&&(ku().b[1][1]++,ce.jsx("ul",{children:Object.entries(this.props.openlayersDebugOptions).map(([l,o])=>(ku().f[3]++,ku().s[7]++,ce.jsx("li",{children:ce.jsxs("label",{children:[ce.jsx("input",{type:"checkbox",checked:o,onChange:m=>(ku().f[4]++,ku().s[8]++,this.props.onChangeOpenlayersDebug(l,m.target.checked))})," ",l]})},l)))})))]}),ce.jsxs("section",{className:"maputnik-modal-section",children:[ce.jsx("h1",{children:e("Links")}),ce.jsx("p",{children:ce.jsxs(O1,{t:e,children:[ce.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:`https://www.openstreetmap.org/#map=${i}/${a}/${r}`,children:"Open in OSM"}),". Opens the current view on openstreetmap.org"]})})]})]})}}const ide=(ku().s[9]++,ss()(nde));var vg={},jC={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var rde=jC.exports,DK;function ode(){return DK||(DK=1,function(n,e){(function(t){var i=e&&!e.nodeType&&e,r=n&&!n.nodeType&&n,a=typeof window=="object"&&window;(a.global===a||a.window===a||a.self===a)&&(t=a);var l,o=2147483647,m=36,C=1,S=26,O=38,U=700,K=72,z=128,j="-",Q=/^xn--/,ee=/[^\x20-\x7E]/,V=/[\x2E\u3002\uFF0E\uFF61]/g,ae={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ne=m-C,Z=Math.floor,oe=String.fromCharCode,W;function ue(be){throw new RangeError(ae[be])}function ge(be,Ne){for(var tt=be.length,lt=[];tt--;)lt[tt]=Ne(be[tt]);return lt}function ye(be,Ne){var tt=be.split("@"),lt="";tt.length>1&&(lt=tt[0]+"@",be=tt[1]),be=be.replace(V,".");var It=be.split("."),pt=ge(It,Ne).join(".");return lt+pt}function Me(be){for(var Ne=[],tt=0,lt=be.length,It,pt;tt<lt;)It=be.charCodeAt(tt++),It>=55296&&It<=56319&&tt<lt?(pt=be.charCodeAt(tt++),(pt&64512)==56320?Ne.push(((It&1023)<<10)+(pt&1023)+65536):(Ne.push(It),tt--)):Ne.push(It);return Ne}function Be(be){return ge(be,function(Ne){var tt="";return Ne>65535&&(Ne-=65536,tt+=oe(Ne>>>10&1023|55296),Ne=56320|Ne&1023),tt+=oe(Ne),tt}).join("")}function we(be){return be-48<10?be-22:be-65<26?be-65:be-97<26?be-97:m}function qe(be,Ne){return be+22+75*(be<26)-((Ne!=0)<<5)}function xe(be,Ne,tt){var lt=0;for(be=tt?Z(be/U):be>>1,be+=Z(be/Ne);be>ne*S>>1;lt+=m)be=Z(be/ne);return Z(lt+(ne+1)*be/(be+O))}function ze(be){var Ne=[],tt=be.length,lt,It=0,pt=z,St=K,Rt,Le,Pe,Re,He,bt,vt,Ot,qt;for(Rt=be.lastIndexOf(j),Rt<0&&(Rt=0),Le=0;Le<Rt;++Le)be.charCodeAt(Le)>=128&&ue("not-basic"),Ne.push(be.charCodeAt(Le));for(Pe=Rt>0?Rt+1:0;Pe<tt;){for(Re=It,He=1,bt=m;Pe>=tt&&ue("invalid-input"),vt=we(be.charCodeAt(Pe++)),(vt>=m||vt>Z((o-It)/He))&&ue("overflow"),It+=vt*He,Ot=bt<=St?C:bt>=St+S?S:bt-St,!(vt<Ot);bt+=m)qt=m-Ot,He>Z(o/qt)&&ue("overflow"),He*=qt;lt=Ne.length+1,St=xe(It-Re,lt,Re==0),Z(It/lt)>o-pt&&ue("overflow"),pt+=Z(It/lt),It%=lt,Ne.splice(It++,0,pt)}return Be(Ne)}function ot(be){var Ne,tt,lt,It,pt,St,Rt,Le,Pe,Re,He,bt=[],vt,Ot,qt,Kt;for(be=Me(be),vt=be.length,Ne=z,tt=0,pt=K,St=0;St<vt;++St)He=be[St],He<128&&bt.push(oe(He));for(lt=It=bt.length,It&&bt.push(j);lt<vt;){for(Rt=o,St=0;St<vt;++St)He=be[St],He>=Ne&&He<Rt&&(Rt=He);for(Ot=lt+1,Rt-Ne>Z((o-tt)/Ot)&&ue("overflow"),tt+=(Rt-Ne)*Ot,Ne=Rt,St=0;St<vt;++St)if(He=be[St],He<Ne&&++tt>o&&ue("overflow"),He==Ne){for(Le=tt,Pe=m;Re=Pe<=pt?C:Pe>=pt+S?S:Pe-pt,!(Le<Re);Pe+=m)Kt=Le-Re,qt=m-Re,bt.push(oe(qe(Re+Kt%qt,0))),Le=Z(Kt/qt);bt.push(oe(qe(Le,0))),pt=xe(tt,Ot,lt==It),tt=0,++lt}++tt,++Ne}return bt.join("")}function yt(be){return ye(be,function(Ne){return Q.test(Ne)?ze(Ne.slice(4).toLowerCase()):Ne})}function nt(be){return ye(be,function(Ne){return ee.test(Ne)?"xn--"+ot(Ne):Ne})}if(l={version:"1.4.1",ucs2:{decode:Me,encode:Be},decode:ze,encode:ot,toASCII:nt,toUnicode:yt},i&&r)if(n.exports==i)r.exports=l;else for(W in l)l.hasOwnProperty(W)&&(i[W]=l[W]);else t.punycode=l})(rde)}(jC,jC.exports)),jC.exports}var dE,RK;function eC(){return RK||(RK=1,dE=TypeError),dE}const ade={},sde=Object.freeze(Object.defineProperty({__proto__:null,default:ade},Symbol.toStringTag,{value:"Module"})),lde=wB(sde);var fE,PK;function Z2(){if(PK)return fE;PK=1;var n=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=n&&e&&typeof e.get=="function"?e.get:null,i=n&&Map.prototype.forEach,r=typeof Set=="function"&&Set.prototype,a=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,l=r&&a&&typeof a.get=="function"?a.get:null,o=r&&Set.prototype.forEach,m=typeof WeakMap=="function"&&WeakMap.prototype,C=m?WeakMap.prototype.has:null,S=typeof WeakSet=="function"&&WeakSet.prototype,O=S?WeakSet.prototype.has:null,U=typeof WeakRef=="function"&&WeakRef.prototype,K=U?WeakRef.prototype.deref:null,z=Boolean.prototype.valueOf,j=Object.prototype.toString,Q=Function.prototype.toString,ee=String.prototype.match,V=String.prototype.slice,ae=String.prototype.replace,ne=String.prototype.toUpperCase,Z=String.prototype.toLowerCase,oe=RegExp.prototype.test,W=Array.prototype.concat,ue=Array.prototype.join,ge=Array.prototype.slice,ye=Math.floor,Me=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Be=Object.getOwnPropertySymbols,we=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,qe=typeof Symbol=="function"&&typeof Symbol.iterator=="object",xe=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===qe||!0)?Symbol.toStringTag:null,ze=Object.prototype.propertyIsEnumerable,ot=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(Ye){return Ye.__proto__}:null);function yt(Ye,De){if(Ye===1/0||Ye===-1/0||Ye!==Ye||Ye&&Ye>-1e3&&Ye<1e3||oe.call(/e/,De))return De;var Ze=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof Ye=="number"){var g=Ye<0?-ye(-Ye):ye(Ye);if(g!==Ye){var gt=String(g),ht=V.call(De,gt.length+1);return ae.call(gt,Ze,"$&_")+"."+ae.call(ae.call(ht,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ae.call(De,Ze,"$&_")}var nt=lde,be=nt.custom,Ne=vt(be)?be:null,tt={__proto__:null,double:'"',single:"'"},lt={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};fE=function Ye(De,Ze,g,gt){var ht=Ze||{};if(Kt(ht,"quoteStyle")&&!Kt(tt,ht.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Kt(ht,"maxStringLength")&&(typeof ht.maxStringLength=="number"?ht.maxStringLength<0&&ht.maxStringLength!==1/0:ht.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var kt=Kt(ht,"customInspect")?ht.customInspect:!0;if(typeof kt!="boolean"&&kt!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Kt(ht,"indent")&&ht.indent!==null&&ht.indent!=="	"&&!(parseInt(ht.indent,10)===ht.indent&&ht.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Kt(ht,"numericSeparator")&&typeof ht.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var it=ht.numericSeparator;if(typeof De>"u")return"undefined";if(De===null)return"null";if(typeof De=="boolean")return De?"true":"false";if(typeof De=="string")return Kn(De,ht);if(typeof De=="number"){if(De===0)return 1/0/De>0?"0":"-0";var en=String(De);return it?yt(De,en):en}if(typeof De=="bigint"){var Dn=String(De)+"n";return it?yt(De,Dn):Dn}var Mn=typeof ht.depth>"u"?5:ht.depth;if(typeof g>"u"&&(g=0),g>=Mn&&Mn>0&&typeof De=="object")return St(De)?"[Array]":"[Object]";var ii=Te(ht,g);if(typeof gt>"u")gt=[];else if(Wt(gt,De)>=0)return"[Circular]";function Wn(Ir,Ni,gl){if(Ni&&(gt=ge.call(gt),gt.push(Ni)),gl){var Ta={depth:ht.depth};return Kt(ht,"quoteStyle")&&(Ta.quoteStyle=ht.quoteStyle),Ye(Ir,Ta,g+1,gt)}return Ye(Ir,ht,g+1,gt)}if(typeof De=="function"&&!Le(De)){var qi=Jn(De),er=dt(De,Wn);return"[Function"+(qi?": "+qi:" (anonymous)")+"]"+(er.length>0?" { "+ue.call(er,", ")+" }":"")}if(vt(De)){var wi=qe?ae.call(String(De),/^(Symbol\(.*\))_[^)]*$/,"$1"):we.call(De);return typeof De=="object"&&!qe?de(wi):wi}if(ei(De)){for(var hi="<"+Z.call(String(De.nodeName)),ti=De.attributes||[],Wi=0;Wi<ti.length;Wi++)hi+=" "+ti[Wi].name+"="+It(pt(ti[Wi].value),"double",ht);return hi+=">",De.childNodes&&De.childNodes.length&&(hi+="..."),hi+="</"+Z.call(String(De.nodeName))+">",hi}if(St(De)){if(De.length===0)return"[]";var Sn=dt(De,Wn);return ii&&!me(Sn)?"["+We(Sn,ii)+"]":"[ "+ue.call(Sn,", ")+" ]"}if(Pe(De)){var lo=dt(De,Wn);return!("cause"in Error.prototype)&&"cause"in De&&!ze.call(De,"cause")?"{ ["+String(De)+"] "+ue.call(W.call("[cause]: "+Wn(De.cause),lo),", ")+" }":lo.length===0?"["+String(De)+"]":"{ ["+String(De)+"] "+ue.call(lo,", ")+" }"}if(typeof De=="object"&&kt){if(Ne&&typeof De[Ne]=="function"&&nt)return nt(De,{depth:Mn-g});if(kt!=="symbol"&&typeof De.inspect=="function")return De.inspect()}if($n(De)){var Hi=[];return i&&i.call(De,function(Ir,Ni){Hi.push(Wn(Ni,De,!0)+" => "+Wn(Ir,De))}),le("Map",t.call(De),Hi,ii)}if(In(De)){var pa=[];return o&&o.call(De,function(Ir){pa.push(Wn(Ir,De))}),le("Set",l.call(De),pa,ii)}if(On(De))return re("WeakMap");if(Bi(De))return re("WeakSet");if(Bn(De))return re("WeakRef");if(He(De))return de(Wn(Number(De)));if(Ot(De))return de(Wn(Me.call(De)));if(bt(De))return de(z.call(De));if(Re(De))return de(Wn(String(De)));if(typeof window<"u"&&De===window)return"{ [object Window] }";if(typeof globalThis<"u"&&De===globalThis||typeof window<"u"&&De===window)return"{ [object globalThis] }";if(!Rt(De)&&!Le(De)){var To=dt(De,Wn),Zn=ot?ot(De)===Object.prototype:De instanceof Object||De.constructor===Object,lr=De instanceof Object?"":"null prototype",zi=!Zn&&xe&&Object(De)===De&&xe in De?V.call(on(De),8,-1):lr?"Object":"",vr=Zn||typeof De.constructor!="function"?"":De.constructor.name?De.constructor.name+" ":"",La=vr+(zi||lr?"["+ue.call(W.call([],zi||[],lr||[]),": ")+"] ":"");return To.length===0?La+"{}":ii?La+"{"+We(To,ii)+"}":La+"{ "+ue.call(To,", ")+" }"}return String(De)};function It(Ye,De,Ze){var g=Ze.quoteStyle||De,gt=tt[g];return gt+Ye+gt}function pt(Ye){return ae.call(String(Ye),/"/g,"&quot;")}function St(Ye){return on(Ye)==="[object Array]"&&(!xe||!(typeof Ye=="object"&&xe in Ye))}function Rt(Ye){return on(Ye)==="[object Date]"&&(!xe||!(typeof Ye=="object"&&xe in Ye))}function Le(Ye){return on(Ye)==="[object RegExp]"&&(!xe||!(typeof Ye=="object"&&xe in Ye))}function Pe(Ye){return on(Ye)==="[object Error]"&&(!xe||!(typeof Ye=="object"&&xe in Ye))}function Re(Ye){return on(Ye)==="[object String]"&&(!xe||!(typeof Ye=="object"&&xe in Ye))}function He(Ye){return on(Ye)==="[object Number]"&&(!xe||!(typeof Ye=="object"&&xe in Ye))}function bt(Ye){return on(Ye)==="[object Boolean]"&&(!xe||!(typeof Ye=="object"&&xe in Ye))}function vt(Ye){if(qe)return Ye&&typeof Ye=="object"&&Ye instanceof Symbol;if(typeof Ye=="symbol")return!0;if(!Ye||typeof Ye!="object"||!we)return!1;try{return we.call(Ye),!0}catch{}return!1}function Ot(Ye){if(!Ye||typeof Ye!="object"||!Me)return!1;try{return Me.call(Ye),!0}catch{}return!1}var qt=Object.prototype.hasOwnProperty||function(Ye){return Ye in this};function Kt(Ye,De){return qt.call(Ye,De)}function on(Ye){return j.call(Ye)}function Jn(Ye){if(Ye.name)return Ye.name;var De=ee.call(Q.call(Ye),/^function\s*([\w$]+)/);return De?De[1]:null}function Wt(Ye,De){if(Ye.indexOf)return Ye.indexOf(De);for(var Ze=0,g=Ye.length;Ze<g;Ze++)if(Ye[Ze]===De)return Ze;return-1}function $n(Ye){if(!t||!Ye||typeof Ye!="object")return!1;try{t.call(Ye);try{l.call(Ye)}catch{return!0}return Ye instanceof Map}catch{}return!1}function On(Ye){if(!C||!Ye||typeof Ye!="object")return!1;try{C.call(Ye,C);try{O.call(Ye,O)}catch{return!0}return Ye instanceof WeakMap}catch{}return!1}function Bn(Ye){if(!K||!Ye||typeof Ye!="object")return!1;try{return K.call(Ye),!0}catch{}return!1}function In(Ye){if(!l||!Ye||typeof Ye!="object")return!1;try{l.call(Ye);try{t.call(Ye)}catch{return!0}return Ye instanceof Set}catch{}return!1}function Bi(Ye){if(!O||!Ye||typeof Ye!="object")return!1;try{O.call(Ye,O);try{C.call(Ye,C)}catch{return!0}return Ye instanceof WeakSet}catch{}return!1}function ei(Ye){return!Ye||typeof Ye!="object"?!1:typeof HTMLElement<"u"&&Ye instanceof HTMLElement?!0:typeof Ye.nodeName=="string"&&typeof Ye.getAttribute=="function"}function Kn(Ye,De){if(Ye.length>De.maxStringLength){var Ze=Ye.length-De.maxStringLength,g="... "+Ze+" more character"+(Ze>1?"s":"");return Kn(V.call(Ye,0,De.maxStringLength),De)+g}var gt=lt[De.quoteStyle||"single"];gt.lastIndex=0;var ht=ae.call(ae.call(Ye,gt,"\\$1"),/[\x00-\x1f]/g,Ge);return It(ht,"single",De)}function Ge(Ye){var De=Ye.charCodeAt(0),Ze={8:"b",9:"t",10:"n",12:"f",13:"r"}[De];return Ze?"\\"+Ze:"\\x"+(De<16?"0":"")+ne.call(De.toString(16))}function de(Ye){return"Object("+Ye+")"}function re(Ye){return Ye+" { ? }"}function le(Ye,De,Ze,g){var gt=g?We(Ze,g):ue.call(Ze,", ");return Ye+" ("+De+") {"+gt+"}"}function me(Ye){for(var De=0;De<Ye.length;De++)if(Wt(Ye[De],`
`)>=0)return!1;return!0}function Te(Ye,De){var Ze;if(Ye.indent==="	")Ze="	";else if(typeof Ye.indent=="number"&&Ye.indent>0)Ze=ue.call(Array(Ye.indent+1)," ");else return null;return{base:Ze,prev:ue.call(Array(De+1),Ze)}}function We(Ye,De){if(Ye.length===0)return"";var Ze=`
`+De.prev+De.base;return Ze+ue.call(Ye,","+Ze)+`
`+De.prev}function dt(Ye,De){var Ze=St(Ye),g=[];if(Ze){g.length=Ye.length;for(var gt=0;gt<Ye.length;gt++)g[gt]=Kt(Ye,gt)?De(Ye[gt],Ye):""}var ht=typeof Be=="function"?Be(Ye):[],kt;if(qe){kt={};for(var it=0;it<ht.length;it++)kt["$"+ht[it]]=ht[it]}for(var en in Ye)Kt(Ye,en)&&(Ze&&String(Number(en))===en&&en<Ye.length||qe&&kt["$"+en]instanceof Symbol||(oe.call(/[^\w$]/,en)?g.push(De(en,Ye)+": "+De(Ye[en],Ye)):g.push(en+": "+De(Ye[en],Ye))));if(typeof Be=="function")for(var Dn=0;Dn<ht.length;Dn++)ze.call(Ye,ht[Dn])&&g.push("["+De(ht[Dn])+"]: "+De(Ye[ht[Dn]],Ye));return g}return fE}var mE,KK;function Ade(){if(KK)return mE;KK=1;var n=Z2(),e=eC(),t=function(o,m,C){for(var S=o,O;(O=S.next)!=null;S=O)if(O.key===m)return S.next=O.next,C||(O.next=o.next,o.next=O),O},i=function(o,m){if(o){var C=t(o,m);return C&&C.value}},r=function(o,m,C){var S=t(o,m);S?S.value=C:o.next={key:m,next:o.next,value:C}},a=function(o,m){return o?!!t(o,m):!1},l=function(o,m){if(o)return t(o,m,!0)};return mE=function(){var m,C={assert:function(S){if(!C.has(S))throw new e("Side channel does not contain "+n(S))},delete:function(S){var O=m&&m.next,U=l(m,S);return U&&O&&O===U&&(m=void 0),!!U},get:function(S){return i(m,S)},has:function(S){return a(m,S)},set:function(S,O){m||(m={next:void 0}),r(m,S,O)}};return C},mE}var pE,UK;function pj(){return UK||(UK=1,pE=Object),pE}var gE,LK;function ude(){return LK||(LK=1,gE=Error),gE}var yE,FK;function cde(){return FK||(FK=1,yE=EvalError),yE}var vE,zK;function hde(){return zK||(zK=1,vE=RangeError),vE}var CE,NK;function dde(){return NK||(NK=1,CE=ReferenceError),CE}var _E,GK;function fde(){return GK||(GK=1,_E=SyntaxError),_E}var bE,jK;function mde(){return jK||(jK=1,bE=URIError),bE}var xE,WK;function pde(){return WK||(WK=1,xE=Math.abs),xE}var ME,QK;function gde(){return QK||(QK=1,ME=Math.floor),ME}var SE,YK;function yde(){return YK||(YK=1,SE=Math.max),SE}var wE,qK;function vde(){return qK||(qK=1,wE=Math.min),wE}var EE,HK;function Cde(){return HK||(HK=1,EE=Math.pow),EE}var BE,VK;function _de(){return VK||(VK=1,BE=Math.round),BE}var OE,$K;function bde(){return $K||($K=1,OE=Number.isNaN||function(e){return e!==e}),OE}var IE,ZK;function xde(){if(ZK)return IE;ZK=1;var n=bde();return IE=function(t){return n(t)||t===0?t:t<0?-1:1},IE}var TE,XK;function Mde(){return XK||(XK=1,TE=Object.getOwnPropertyDescriptor),TE}var kE,JK;function gj(){if(JK)return kE;JK=1;var n=Mde();if(n)try{n([],"length")}catch{n=null}return kE=n,kE}var DE,eU;function Sde(){if(eU)return DE;eU=1;var n=Object.defineProperty||!1;if(n)try{n({},"a",{value:1})}catch{n=!1}return DE=n,DE}var RE,tU;function wde(){return tU||(tU=1,RE=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),i=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var r=42;e[t]=r;for(var a in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var l=Object.getOwnPropertySymbols(e);if(l.length!==1||l[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==r||o.enumerable!==!0)return!1}return!0}),RE}var PE,nU;function Ede(){if(nU)return PE;nU=1;var n=typeof Symbol<"u"&&Symbol,e=wde();return PE=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},PE}var KE,iU;function yj(){return iU||(iU=1,KE=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),KE}var UE,rU;function vj(){if(rU)return UE;rU=1;var n=pj();return UE=n.getPrototypeOf||null,UE}var LE,oU;function Bde(){if(oU)return LE;oU=1;var n="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,i="[object Function]",r=function(m,C){for(var S=[],O=0;O<m.length;O+=1)S[O]=m[O];for(var U=0;U<C.length;U+=1)S[U+m.length]=C[U];return S},a=function(m,C){for(var S=[],O=C,U=0;O<m.length;O+=1,U+=1)S[U]=m[O];return S},l=function(o,m){for(var C="",S=0;S<o.length;S+=1)C+=o[S],S+1<o.length&&(C+=m);return C};return LE=function(m){var C=this;if(typeof C!="function"||e.apply(C)!==i)throw new TypeError(n+C);for(var S=a(arguments,1),O,U=function(){if(this instanceof O){var ee=C.apply(this,r(S,arguments));return Object(ee)===ee?ee:this}return C.apply(m,r(S,arguments))},K=t(0,C.length-S.length),z=[],j=0;j<K;j++)z[j]="$"+j;if(O=Function("binder","return function ("+l(z,",")+"){ return binder.apply(this,arguments); }")(U),C.prototype){var Q=function(){};Q.prototype=C.prototype,O.prototype=new Q,Q.prototype=null}return O},LE}var FE,aU;function X2(){if(aU)return FE;aU=1;var n=Bde();return FE=Function.prototype.bind||n,FE}var zE,sU;function n7(){return sU||(sU=1,zE=Function.prototype.call),zE}var NE,lU;function Cj(){return lU||(lU=1,NE=Function.prototype.apply),NE}var GE,AU;function Ode(){return AU||(AU=1,GE=typeof Reflect<"u"&&Reflect&&Reflect.apply),GE}var jE,uU;function Ide(){if(uU)return jE;uU=1;var n=X2(),e=Cj(),t=n7(),i=Ode();return jE=i||n.call(t,e),jE}var WE,cU;function _j(){if(cU)return WE;cU=1;var n=X2(),e=eC(),t=n7(),i=Ide();return WE=function(a){if(a.length<1||typeof a[0]!="function")throw new e("a function is required");return i(n,t,a)},WE}var QE,hU;function Tde(){if(hU)return QE;hU=1;var n=_j(),e=gj(),t;try{t=[].__proto__===Array.prototype}catch(l){if(!l||typeof l!="object"||!("code"in l)||l.code!=="ERR_PROTO_ACCESS")throw l}var i=!!t&&e&&e(Object.prototype,"__proto__"),r=Object,a=r.getPrototypeOf;return QE=i&&typeof i.get=="function"?n([i.get]):typeof a=="function"?function(o){return a(o==null?o:r(o))}:!1,QE}var YE,dU;function kde(){if(dU)return YE;dU=1;var n=yj(),e=vj(),t=Tde();return YE=n?function(r){return n(r)}:e?function(r){if(!r||typeof r!="object"&&typeof r!="function")throw new TypeError("getProto: not an object");return e(r)}:t?function(r){return t(r)}:null,YE}var qE,fU;function Dde(){if(fU)return qE;fU=1;var n=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=X2();return qE=t.call(n,e),qE}var HE,mU;function i7(){if(mU)return HE;mU=1;var n,e=pj(),t=ude(),i=cde(),r=hde(),a=dde(),l=fde(),o=eC(),m=mde(),C=pde(),S=gde(),O=yde(),U=vde(),K=Cde(),z=_de(),j=xde(),Q=Function,ee=function(Pe){try{return Q('"use strict"; return ('+Pe+").constructor;")()}catch{}},V=gj(),ae=Sde(),ne=function(){throw new o},Z=V?function(){try{return arguments.callee,ne}catch{try{return V(arguments,"callee").get}catch{return ne}}}():ne,oe=Ede()(),W=kde(),ue=vj(),ge=yj(),ye=Cj(),Me=n7(),Be={},we=typeof Uint8Array>"u"||!W?n:W(Uint8Array),qe={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":oe&&W?W([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":Be,"%AsyncGenerator%":Be,"%AsyncGeneratorFunction%":Be,"%AsyncIteratorPrototype%":Be,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":i,"%Float16Array%":typeof Float16Array>"u"?n:Float16Array,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":Q,"%GeneratorFunction%":Be,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":oe&&W?W(W([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!oe||!W?n:W(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":V,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":r,"%ReferenceError%":a,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!oe||!W?n:W(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":oe&&W?W(""[Symbol.iterator]()):n,"%Symbol%":oe?Symbol:n,"%SyntaxError%":l,"%ThrowTypeError%":Z,"%TypedArray%":we,"%TypeError%":o,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":m,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet,"%Function.prototype.call%":Me,"%Function.prototype.apply%":ye,"%Object.defineProperty%":ae,"%Object.getPrototypeOf%":ue,"%Math.abs%":C,"%Math.floor%":S,"%Math.max%":O,"%Math.min%":U,"%Math.pow%":K,"%Math.round%":z,"%Math.sign%":j,"%Reflect.getPrototypeOf%":ge};if(W)try{null.error}catch(Pe){var xe=W(W(Pe));qe["%Error.prototype%"]=xe}var ze=function Pe(Re){var He;if(Re==="%AsyncFunction%")He=ee("async function () {}");else if(Re==="%GeneratorFunction%")He=ee("function* () {}");else if(Re==="%AsyncGeneratorFunction%")He=ee("async function* () {}");else if(Re==="%AsyncGenerator%"){var bt=Pe("%AsyncGeneratorFunction%");bt&&(He=bt.prototype)}else if(Re==="%AsyncIteratorPrototype%"){var vt=Pe("%AsyncGenerator%");vt&&W&&(He=W(vt.prototype))}return qe[Re]=He,He},ot={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},yt=X2(),nt=Dde(),be=yt.call(Me,Array.prototype.concat),Ne=yt.call(ye,Array.prototype.splice),tt=yt.call(Me,String.prototype.replace),lt=yt.call(Me,String.prototype.slice),It=yt.call(Me,RegExp.prototype.exec),pt=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,St=/\\(\\)?/g,Rt=function(Re){var He=lt(Re,0,1),bt=lt(Re,-1);if(He==="%"&&bt!=="%")throw new l("invalid intrinsic syntax, expected closing `%`");if(bt==="%"&&He!=="%")throw new l("invalid intrinsic syntax, expected opening `%`");var vt=[];return tt(Re,pt,function(Ot,qt,Kt,on){vt[vt.length]=Kt?tt(on,St,"$1"):qt||Ot}),vt},Le=function(Re,He){var bt=Re,vt;if(nt(ot,bt)&&(vt=ot[bt],bt="%"+vt[0]+"%"),nt(qe,bt)){var Ot=qe[bt];if(Ot===Be&&(Ot=ze(bt)),typeof Ot>"u"&&!He)throw new o("intrinsic "+Re+" exists, but is not available. Please file an issue!");return{alias:vt,name:bt,value:Ot}}throw new l("intrinsic "+Re+" does not exist!")};return HE=function(Re,He){if(typeof Re!="string"||Re.length===0)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof He!="boolean")throw new o('"allowMissing" argument must be a boolean');if(It(/^%?[^%]*%?$/,Re)===null)throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var bt=Rt(Re),vt=bt.length>0?bt[0]:"",Ot=Le("%"+vt+"%",He),qt=Ot.name,Kt=Ot.value,on=!1,Jn=Ot.alias;Jn&&(vt=Jn[0],Ne(bt,be([0,1],Jn)));for(var Wt=1,$n=!0;Wt<bt.length;Wt+=1){var On=bt[Wt],Bn=lt(On,0,1),In=lt(On,-1);if((Bn==='"'||Bn==="'"||Bn==="`"||In==='"'||In==="'"||In==="`")&&Bn!==In)throw new l("property names with quotes must have matching quotes");if((On==="constructor"||!$n)&&(on=!0),vt+="."+On,qt="%"+vt+"%",nt(qe,qt))Kt=qe[qt];else if(Kt!=null){if(!(On in Kt)){if(!He)throw new o("base intrinsic for "+Re+" exists, but the property is not available.");return}if(V&&Wt+1>=bt.length){var Bi=V(Kt,On);$n=!!Bi,$n&&"get"in Bi&&!("originalValue"in Bi.get)?Kt=Bi.get:Kt=Kt[On]}else $n=nt(Kt,On),Kt=Kt[On];$n&&!on&&(qe[qt]=Kt)}}return Kt},HE}var VE,pU;function bj(){if(pU)return VE;pU=1;var n=i7(),e=_j(),t=e([n("%String.prototype.indexOf%")]);return VE=function(r,a){var l=n(r,!!a);return typeof l=="function"&&t(r,".prototype.")>-1?e([l]):l},VE}var $E,gU;function xj(){if(gU)return $E;gU=1;var n=i7(),e=bj(),t=Z2(),i=eC(),r=n("%Map%",!0),a=e("Map.prototype.get",!0),l=e("Map.prototype.set",!0),o=e("Map.prototype.has",!0),m=e("Map.prototype.delete",!0),C=e("Map.prototype.size",!0);return $E=!!r&&function(){var O,U={assert:function(K){if(!U.has(K))throw new i("Side channel does not contain "+t(K))},delete:function(K){if(O){var z=m(O,K);return C(O)===0&&(O=void 0),z}return!1},get:function(K){if(O)return a(O,K)},has:function(K){return O?o(O,K):!1},set:function(K,z){O||(O=new r),l(O,K,z)}};return U},$E}var ZE,yU;function Rde(){if(yU)return ZE;yU=1;var n=i7(),e=bj(),t=Z2(),i=xj(),r=eC(),a=n("%WeakMap%",!0),l=e("WeakMap.prototype.get",!0),o=e("WeakMap.prototype.set",!0),m=e("WeakMap.prototype.has",!0),C=e("WeakMap.prototype.delete",!0);return ZE=a?function(){var O,U,K={assert:function(z){if(!K.has(z))throw new r("Side channel does not contain "+t(z))},delete:function(z){if(a&&z&&(typeof z=="object"||typeof z=="function")){if(O)return C(O,z)}else if(i&&U)return U.delete(z);return!1},get:function(z){return a&&z&&(typeof z=="object"||typeof z=="function")&&O?l(O,z):U&&U.get(z)},has:function(z){return a&&z&&(typeof z=="object"||typeof z=="function")&&O?m(O,z):!!U&&U.has(z)},set:function(z,j){a&&z&&(typeof z=="object"||typeof z=="function")?(O||(O=new a),o(O,z,j)):i&&(U||(U=i()),U.set(z,j))}};return K}:i,ZE}var XE,vU;function Pde(){if(vU)return XE;vU=1;var n=eC(),e=Z2(),t=Ade(),i=xj(),r=Rde(),a=r||i||t;return XE=function(){var o,m={assert:function(C){if(!m.has(C))throw new n("Side channel does not contain "+e(C))},delete:function(C){return!!o&&o.delete(C)},get:function(C){return o&&o.get(C)},has:function(C){return!!o&&o.has(C)},set:function(C,S){o||(o=a()),o.set(C,S)}};return m},XE}var JE,CU;function r7(){if(CU)return JE;CU=1;var n=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return JE={default:t.RFC3986,formatters:{RFC1738:function(i){return n.call(i,e,"+")},RFC3986:function(i){return String(i)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},JE}var e6,_U;function Mj(){if(_U)return e6;_U=1;var n=r7(),e=Object.prototype.hasOwnProperty,t=Array.isArray,i=function(){for(var Q=[],ee=0;ee<256;++ee)Q.push("%"+((ee<16?"0":"")+ee.toString(16)).toUpperCase());return Q}(),r=function(ee){for(;ee.length>1;){var V=ee.pop(),ae=V.obj[V.prop];if(t(ae)){for(var ne=[],Z=0;Z<ae.length;++Z)typeof ae[Z]<"u"&&ne.push(ae[Z]);V.obj[V.prop]=ne}}},a=function(ee,V){for(var ae=V&&V.plainObjects?{__proto__:null}:{},ne=0;ne<ee.length;++ne)typeof ee[ne]<"u"&&(ae[ne]=ee[ne]);return ae},l=function Q(ee,V,ae){if(!V)return ee;if(typeof V!="object"&&typeof V!="function"){if(t(ee))ee.push(V);else if(ee&&typeof ee=="object")(ae&&(ae.plainObjects||ae.allowPrototypes)||!e.call(Object.prototype,V))&&(ee[V]=!0);else return[ee,V];return ee}if(!ee||typeof ee!="object")return[ee].concat(V);var ne=ee;return t(ee)&&!t(V)&&(ne=a(ee,ae)),t(ee)&&t(V)?(V.forEach(function(Z,oe){if(e.call(ee,oe)){var W=ee[oe];W&&typeof W=="object"&&Z&&typeof Z=="object"?ee[oe]=Q(W,Z,ae):ee.push(Z)}else ee[oe]=Z}),ee):Object.keys(V).reduce(function(Z,oe){var W=V[oe];return e.call(Z,oe)?Z[oe]=Q(Z[oe],W,ae):Z[oe]=W,Z},ne)},o=function(ee,V){return Object.keys(V).reduce(function(ae,ne){return ae[ne]=V[ne],ae},ee)},m=function(Q,ee,V){var ae=Q.replace(/\+/g," ");if(V==="iso-8859-1")return ae.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(ae)}catch{return ae}},C=1024,S=function(ee,V,ae,ne,Z){if(ee.length===0)return ee;var oe=ee;if(typeof ee=="symbol"?oe=Symbol.prototype.toString.call(ee):typeof ee!="string"&&(oe=String(ee)),ae==="iso-8859-1")return escape(oe).replace(/%u[0-9a-f]{4}/gi,function(we){return"%26%23"+parseInt(we.slice(2),16)+"%3B"});for(var W="",ue=0;ue<oe.length;ue+=C){for(var ge=oe.length>=C?oe.slice(ue,ue+C):oe,ye=[],Me=0;Me<ge.length;++Me){var Be=ge.charCodeAt(Me);if(Be===45||Be===46||Be===95||Be===126||Be>=48&&Be<=57||Be>=65&&Be<=90||Be>=97&&Be<=122||Z===n.RFC1738&&(Be===40||Be===41)){ye[ye.length]=ge.charAt(Me);continue}if(Be<128){ye[ye.length]=i[Be];continue}if(Be<2048){ye[ye.length]=i[192|Be>>6]+i[128|Be&63];continue}if(Be<55296||Be>=57344){ye[ye.length]=i[224|Be>>12]+i[128|Be>>6&63]+i[128|Be&63];continue}Me+=1,Be=65536+((Be&1023)<<10|ge.charCodeAt(Me)&1023),ye[ye.length]=i[240|Be>>18]+i[128|Be>>12&63]+i[128|Be>>6&63]+i[128|Be&63]}W+=ye.join("")}return W},O=function(ee){for(var V=[{obj:{o:ee},prop:"o"}],ae=[],ne=0;ne<V.length;++ne)for(var Z=V[ne],oe=Z.obj[Z.prop],W=Object.keys(oe),ue=0;ue<W.length;++ue){var ge=W[ue],ye=oe[ge];typeof ye=="object"&&ye!==null&&ae.indexOf(ye)===-1&&(V.push({obj:oe,prop:ge}),ae.push(ye))}return r(V),ee},U=function(ee){return Object.prototype.toString.call(ee)==="[object RegExp]"},K=function(ee){return!ee||typeof ee!="object"?!1:!!(ee.constructor&&ee.constructor.isBuffer&&ee.constructor.isBuffer(ee))},z=function(ee,V){return[].concat(ee,V)},j=function(ee,V){if(t(ee)){for(var ae=[],ne=0;ne<ee.length;ne+=1)ae.push(V(ee[ne]));return ae}return V(ee)};return e6={arrayToObject:a,assign:o,combine:z,compact:O,decode:m,encode:S,isBuffer:K,isRegExp:U,maybeMap:j,merge:l},e6}var t6,bU;function Kde(){if(bU)return t6;bU=1;var n=Pde(),e=Mj(),t=r7(),i=Object.prototype.hasOwnProperty,r={brackets:function(Q){return Q+"[]"},comma:"comma",indices:function(Q,ee){return Q+"["+ee+"]"},repeat:function(Q){return Q}},a=Array.isArray,l=Array.prototype.push,o=function(j,Q){l.apply(j,a(Q)?Q:[Q])},m=Date.prototype.toISOString,C=t.default,S={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:C,formatter:t.formatters[C],indices:!1,serializeDate:function(Q){return m.call(Q)},skipNulls:!1,strictNullHandling:!1},O=function(Q){return typeof Q=="string"||typeof Q=="number"||typeof Q=="boolean"||typeof Q=="symbol"||typeof Q=="bigint"},U={},K=function j(Q,ee,V,ae,ne,Z,oe,W,ue,ge,ye,Me,Be,we,qe,xe,ze,ot){for(var yt=Q,nt=ot,be=0,Ne=!1;(nt=nt.get(U))!==void 0&&!Ne;){var tt=nt.get(Q);if(be+=1,typeof tt<"u"){if(tt===be)throw new RangeError("Cyclic object value");Ne=!0}typeof nt.get(U)>"u"&&(be=0)}if(typeof ge=="function"?yt=ge(ee,yt):yt instanceof Date?yt=Be(yt):V==="comma"&&a(yt)&&(yt=e.maybeMap(yt,function(qt){return qt instanceof Date?Be(qt):qt})),yt===null){if(Z)return ue&&!xe?ue(ee,S.encoder,ze,"key",we):ee;yt=""}if(O(yt)||e.isBuffer(yt)){if(ue){var lt=xe?ee:ue(ee,S.encoder,ze,"key",we);return[qe(lt)+"="+qe(ue(yt,S.encoder,ze,"value",we))]}return[qe(ee)+"="+qe(String(yt))]}var It=[];if(typeof yt>"u")return It;var pt;if(V==="comma"&&a(yt))xe&&ue&&(yt=e.maybeMap(yt,ue)),pt=[{value:yt.length>0?yt.join(",")||null:void 0}];else if(a(ge))pt=ge;else{var St=Object.keys(yt);pt=ye?St.sort(ye):St}var Rt=W?String(ee).replace(/\./g,"%2E"):String(ee),Le=ae&&a(yt)&&yt.length===1?Rt+"[]":Rt;if(ne&&a(yt)&&yt.length===0)return Le+"[]";for(var Pe=0;Pe<pt.length;++Pe){var Re=pt[Pe],He=typeof Re=="object"&&Re&&typeof Re.value<"u"?Re.value:yt[Re];if(!(oe&&He===null)){var bt=Me&&W?String(Re).replace(/\./g,"%2E"):String(Re),vt=a(yt)?typeof V=="function"?V(Le,bt):Le:Le+(Me?"."+bt:"["+bt+"]");ot.set(Q,be);var Ot=n();Ot.set(U,ot),o(It,j(He,vt,V,ae,ne,Z,oe,W,V==="comma"&&xe&&a(yt)?null:ue,ge,ye,Me,Be,we,qe,xe,ze,Ot))}}return It},z=function(Q){if(!Q)return S;if(typeof Q.allowEmptyArrays<"u"&&typeof Q.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof Q.encodeDotInKeys<"u"&&typeof Q.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(Q.encoder!==null&&typeof Q.encoder<"u"&&typeof Q.encoder!="function")throw new TypeError("Encoder has to be a function.");var ee=Q.charset||S.charset;if(typeof Q.charset<"u"&&Q.charset!=="utf-8"&&Q.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var V=t.default;if(typeof Q.format<"u"){if(!i.call(t.formatters,Q.format))throw new TypeError("Unknown format option provided.");V=Q.format}var ae=t.formatters[V],ne=S.filter;(typeof Q.filter=="function"||a(Q.filter))&&(ne=Q.filter);var Z;if(Q.arrayFormat in r?Z=Q.arrayFormat:"indices"in Q?Z=Q.indices?"indices":"repeat":Z=S.arrayFormat,"commaRoundTrip"in Q&&typeof Q.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var oe=typeof Q.allowDots>"u"?Q.encodeDotInKeys===!0?!0:S.allowDots:!!Q.allowDots;return{addQueryPrefix:typeof Q.addQueryPrefix=="boolean"?Q.addQueryPrefix:S.addQueryPrefix,allowDots:oe,allowEmptyArrays:typeof Q.allowEmptyArrays=="boolean"?!!Q.allowEmptyArrays:S.allowEmptyArrays,arrayFormat:Z,charset:ee,charsetSentinel:typeof Q.charsetSentinel=="boolean"?Q.charsetSentinel:S.charsetSentinel,commaRoundTrip:!!Q.commaRoundTrip,delimiter:typeof Q.delimiter>"u"?S.delimiter:Q.delimiter,encode:typeof Q.encode=="boolean"?Q.encode:S.encode,encodeDotInKeys:typeof Q.encodeDotInKeys=="boolean"?Q.encodeDotInKeys:S.encodeDotInKeys,encoder:typeof Q.encoder=="function"?Q.encoder:S.encoder,encodeValuesOnly:typeof Q.encodeValuesOnly=="boolean"?Q.encodeValuesOnly:S.encodeValuesOnly,filter:ne,format:V,formatter:ae,serializeDate:typeof Q.serializeDate=="function"?Q.serializeDate:S.serializeDate,skipNulls:typeof Q.skipNulls=="boolean"?Q.skipNulls:S.skipNulls,sort:typeof Q.sort=="function"?Q.sort:null,strictNullHandling:typeof Q.strictNullHandling=="boolean"?Q.strictNullHandling:S.strictNullHandling}};return t6=function(j,Q){var ee=j,V=z(Q),ae,ne;typeof V.filter=="function"?(ne=V.filter,ee=ne("",ee)):a(V.filter)&&(ne=V.filter,ae=ne);var Z=[];if(typeof ee!="object"||ee===null)return"";var oe=r[V.arrayFormat],W=oe==="comma"&&V.commaRoundTrip;ae||(ae=Object.keys(ee)),V.sort&&ae.sort(V.sort);for(var ue=n(),ge=0;ge<ae.length;++ge){var ye=ae[ge],Me=ee[ye];V.skipNulls&&Me===null||o(Z,K(Me,ye,oe,W,V.allowEmptyArrays,V.strictNullHandling,V.skipNulls,V.encodeDotInKeys,V.encode?V.encoder:null,V.filter,V.sort,V.allowDots,V.serializeDate,V.format,V.formatter,V.encodeValuesOnly,V.charset,ue))}var Be=Z.join(V.delimiter),we=V.addQueryPrefix===!0?"?":"";return V.charsetSentinel&&(V.charset==="iso-8859-1"?we+="utf8=%26%2310003%3B&":we+="utf8=%E2%9C%93&"),Be.length>0?we+Be:""},t6}var n6,xU;function Ude(){if(xU)return n6;xU=1;var n=Mj(),e=Object.prototype.hasOwnProperty,t=Array.isArray,i={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},r=function(U){return U.replace(/&#(\d+);/g,function(K,z){return String.fromCharCode(parseInt(z,10))})},a=function(U,K,z){if(U&&typeof U=="string"&&K.comma&&U.indexOf(",")>-1)return U.split(",");if(K.throwOnLimitExceeded&&z>=K.arrayLimit)throw new RangeError("Array limit exceeded. Only "+K.arrayLimit+" element"+(K.arrayLimit===1?"":"s")+" allowed in an array.");return U},l="utf8=%26%2310003%3B",o="utf8=%E2%9C%93",m=function(K,z){var j={__proto__:null},Q=z.ignoreQueryPrefix?K.replace(/^\?/,""):K;Q=Q.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var ee=z.parameterLimit===1/0?void 0:z.parameterLimit,V=Q.split(z.delimiter,z.throwOnLimitExceeded?ee+1:ee);if(z.throwOnLimitExceeded&&V.length>ee)throw new RangeError("Parameter limit exceeded. Only "+ee+" parameter"+(ee===1?"":"s")+" allowed.");var ae=-1,ne,Z=z.charset;if(z.charsetSentinel)for(ne=0;ne<V.length;++ne)V[ne].indexOf("utf8=")===0&&(V[ne]===o?Z="utf-8":V[ne]===l&&(Z="iso-8859-1"),ae=ne,ne=V.length);for(ne=0;ne<V.length;++ne)if(ne!==ae){var oe=V[ne],W=oe.indexOf("]="),ue=W===-1?oe.indexOf("="):W+1,ge,ye;ue===-1?(ge=z.decoder(oe,i.decoder,Z,"key"),ye=z.strictNullHandling?null:""):(ge=z.decoder(oe.slice(0,ue),i.decoder,Z,"key"),ye=n.maybeMap(a(oe.slice(ue+1),z,t(j[ge])?j[ge].length:0),function(Be){return z.decoder(Be,i.decoder,Z,"value")})),ye&&z.interpretNumericEntities&&Z==="iso-8859-1"&&(ye=r(String(ye))),oe.indexOf("[]=")>-1&&(ye=t(ye)?[ye]:ye);var Me=e.call(j,ge);Me&&z.duplicates==="combine"?j[ge]=n.combine(j[ge],ye):(!Me||z.duplicates==="last")&&(j[ge]=ye)}return j},C=function(U,K,z,j){var Q=0;if(U.length>0&&U[U.length-1]==="[]"){var ee=U.slice(0,-1).join("");Q=Array.isArray(K)&&K[ee]?K[ee].length:0}for(var V=j?K:a(K,z,Q),ae=U.length-1;ae>=0;--ae){var ne,Z=U[ae];if(Z==="[]"&&z.parseArrays)ne=z.allowEmptyArrays&&(V===""||z.strictNullHandling&&V===null)?[]:n.combine([],V);else{ne=z.plainObjects?{__proto__:null}:{};var oe=Z.charAt(0)==="["&&Z.charAt(Z.length-1)==="]"?Z.slice(1,-1):Z,W=z.decodeDotInKeys?oe.replace(/%2E/g,"."):oe,ue=parseInt(W,10);!z.parseArrays&&W===""?ne={0:V}:!isNaN(ue)&&Z!==W&&String(ue)===W&&ue>=0&&z.parseArrays&&ue<=z.arrayLimit?(ne=[],ne[ue]=V):W!=="__proto__"&&(ne[W]=V)}V=ne}return V},S=function(K,z,j,Q){if(K){var ee=j.allowDots?K.replace(/\.([^.[]+)/g,"[$1]"):K,V=/(\[[^[\]]*])/,ae=/(\[[^[\]]*])/g,ne=j.depth>0&&V.exec(ee),Z=ne?ee.slice(0,ne.index):ee,oe=[];if(Z){if(!j.plainObjects&&e.call(Object.prototype,Z)&&!j.allowPrototypes)return;oe.push(Z)}for(var W=0;j.depth>0&&(ne=ae.exec(ee))!==null&&W<j.depth;){if(W+=1,!j.plainObjects&&e.call(Object.prototype,ne[1].slice(1,-1))&&!j.allowPrototypes)return;oe.push(ne[1])}if(ne){if(j.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+j.depth+" and strictDepth is true");oe.push("["+ee.slice(ne.index)+"]")}return C(oe,z,j,Q)}},O=function(K){if(!K)return i;if(typeof K.allowEmptyArrays<"u"&&typeof K.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof K.decodeDotInKeys<"u"&&typeof K.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(K.decoder!==null&&typeof K.decoder<"u"&&typeof K.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof K.charset<"u"&&K.charset!=="utf-8"&&K.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof K.throwOnLimitExceeded<"u"&&typeof K.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var z=typeof K.charset>"u"?i.charset:K.charset,j=typeof K.duplicates>"u"?i.duplicates:K.duplicates;if(j!=="combine"&&j!=="first"&&j!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var Q=typeof K.allowDots>"u"?K.decodeDotInKeys===!0?!0:i.allowDots:!!K.allowDots;return{allowDots:Q,allowEmptyArrays:typeof K.allowEmptyArrays=="boolean"?!!K.allowEmptyArrays:i.allowEmptyArrays,allowPrototypes:typeof K.allowPrototypes=="boolean"?K.allowPrototypes:i.allowPrototypes,allowSparse:typeof K.allowSparse=="boolean"?K.allowSparse:i.allowSparse,arrayLimit:typeof K.arrayLimit=="number"?K.arrayLimit:i.arrayLimit,charset:z,charsetSentinel:typeof K.charsetSentinel=="boolean"?K.charsetSentinel:i.charsetSentinel,comma:typeof K.comma=="boolean"?K.comma:i.comma,decodeDotInKeys:typeof K.decodeDotInKeys=="boolean"?K.decodeDotInKeys:i.decodeDotInKeys,decoder:typeof K.decoder=="function"?K.decoder:i.decoder,delimiter:typeof K.delimiter=="string"||n.isRegExp(K.delimiter)?K.delimiter:i.delimiter,depth:typeof K.depth=="number"||K.depth===!1?+K.depth:i.depth,duplicates:j,ignoreQueryPrefix:K.ignoreQueryPrefix===!0,interpretNumericEntities:typeof K.interpretNumericEntities=="boolean"?K.interpretNumericEntities:i.interpretNumericEntities,parameterLimit:typeof K.parameterLimit=="number"?K.parameterLimit:i.parameterLimit,parseArrays:K.parseArrays!==!1,plainObjects:typeof K.plainObjects=="boolean"?K.plainObjects:i.plainObjects,strictDepth:typeof K.strictDepth=="boolean"?!!K.strictDepth:i.strictDepth,strictNullHandling:typeof K.strictNullHandling=="boolean"?K.strictNullHandling:i.strictNullHandling,throwOnLimitExceeded:typeof K.throwOnLimitExceeded=="boolean"?K.throwOnLimitExceeded:!1}};return n6=function(U,K){var z=O(K);if(U===""||U===null||typeof U>"u")return z.plainObjects?{__proto__:null}:{};for(var j=typeof U=="string"?m(U,z):U,Q=z.plainObjects?{__proto__:null}:{},ee=Object.keys(j),V=0;V<ee.length;++V){var ae=ee[V],ne=S(ae,j[ae],z,typeof U=="string");Q=n.merge(Q,ne,z)}return z.allowSparse===!0?Q:n.compact(Q)},n6}var i6,MU;function Lde(){if(MU)return i6;MU=1;var n=Kde(),e=Ude(),t=r7();return i6={formats:t,parse:e,stringify:n},i6}var SU;function Fde(){if(SU)return vg;SU=1;var n=ode();function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,r=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,a=["<",">",'"',"`"," ","\r",`
`,"	"],l=["{","}","|","\\","^","`"].concat(a),o=["'"].concat(l),m=["%","/","?",";","#"].concat(o),C=["/","?","#"],S=255,O=/^[+a-z0-9A-Z_-]{0,63}$/,U=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,K={javascript:!0,"javascript:":!0},z={javascript:!0,"javascript:":!0},j={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Q=Lde();function ee(Z,oe,W){if(Z&&typeof Z=="object"&&Z instanceof e)return Z;var ue=new e;return ue.parse(Z,oe,W),ue}e.prototype.parse=function(Z,oe,W){if(typeof Z!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof Z);var ue=Z.indexOf("?"),ge=ue!==-1&&ue<Z.indexOf("#")?"?":"#",ye=Z.split(ge),Me=/\\/g;ye[0]=ye[0].replace(Me,"/"),Z=ye.join(ge);var Be=Z;if(Be=Be.trim(),!W&&Z.split("#").length===1){var we=r.exec(Be);if(we)return this.path=Be,this.href=Be,this.pathname=we[1],we[2]?(this.search=we[2],oe?this.query=Q.parse(this.search.substr(1)):this.query=this.search.substr(1)):oe&&(this.search="",this.query={}),this}var qe=t.exec(Be);if(qe){qe=qe[0];var xe=qe.toLowerCase();this.protocol=xe,Be=Be.substr(qe.length)}if(W||qe||Be.match(/^\/\/[^@/]+@[^@/]+/)){var ze=Be.substr(0,2)==="//";ze&&!(qe&&z[qe])&&(Be=Be.substr(2),this.slashes=!0)}if(!z[qe]&&(ze||qe&&!j[qe])){for(var ot=-1,yt=0;yt<C.length;yt++){var nt=Be.indexOf(C[yt]);nt!==-1&&(ot===-1||nt<ot)&&(ot=nt)}var be,Ne;ot===-1?Ne=Be.lastIndexOf("@"):Ne=Be.lastIndexOf("@",ot),Ne!==-1&&(be=Be.slice(0,Ne),Be=Be.slice(Ne+1),this.auth=decodeURIComponent(be)),ot=-1;for(var yt=0;yt<m.length;yt++){var nt=Be.indexOf(m[yt]);nt!==-1&&(ot===-1||nt<ot)&&(ot=nt)}ot===-1&&(ot=Be.length),this.host=Be.slice(0,ot),Be=Be.slice(ot),this.parseHost(),this.hostname=this.hostname||"";var tt=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!tt)for(var lt=this.hostname.split(/\./),yt=0,It=lt.length;yt<It;yt++){var pt=lt[yt];if(pt&&!pt.match(O)){for(var St="",Rt=0,Le=pt.length;Rt<Le;Rt++)pt.charCodeAt(Rt)>127?St+="x":St+=pt[Rt];if(!St.match(O)){var Pe=lt.slice(0,yt),Re=lt.slice(yt+1),He=pt.match(U);He&&(Pe.push(He[1]),Re.unshift(He[2])),Re.length&&(Be="/"+Re.join(".")+Be),this.hostname=Pe.join(".");break}}}this.hostname.length>S?this.hostname="":this.hostname=this.hostname.toLowerCase(),tt||(this.hostname=n.toASCII(this.hostname));var bt=this.port?":"+this.port:"",vt=this.hostname||"";this.host=vt+bt,this.href+=this.host,tt&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),Be[0]!=="/"&&(Be="/"+Be))}if(!K[xe])for(var yt=0,It=o.length;yt<It;yt++){var Ot=o[yt];if(Be.indexOf(Ot)!==-1){var qt=encodeURIComponent(Ot);qt===Ot&&(qt=escape(Ot)),Be=Be.split(Ot).join(qt)}}var Kt=Be.indexOf("#");Kt!==-1&&(this.hash=Be.substr(Kt),Be=Be.slice(0,Kt));var on=Be.indexOf("?");if(on!==-1?(this.search=Be.substr(on),this.query=Be.substr(on+1),oe&&(this.query=Q.parse(this.query)),Be=Be.slice(0,on)):oe&&(this.search="",this.query={}),Be&&(this.pathname=Be),j[xe]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var bt=this.pathname||"",Jn=this.search||"";this.path=bt+Jn}return this.href=this.format(),this};function V(Z){return typeof Z=="string"&&(Z=ee(Z)),Z instanceof e?Z.format():e.prototype.format.call(Z)}e.prototype.format=function(){var Z=this.auth||"";Z&&(Z=encodeURIComponent(Z),Z=Z.replace(/%3A/i,":"),Z+="@");var oe=this.protocol||"",W=this.pathname||"",ue=this.hash||"",ge=!1,ye="";this.host?ge=Z+this.host:this.hostname&&(ge=Z+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(ge+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(ye=Q.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var Me=this.search||ye&&"?"+ye||"";return oe&&oe.substr(-1)!==":"&&(oe+=":"),this.slashes||(!oe||j[oe])&&ge!==!1?(ge="//"+(ge||""),W&&W.charAt(0)!=="/"&&(W="/"+W)):ge||(ge=""),ue&&ue.charAt(0)!=="#"&&(ue="#"+ue),Me&&Me.charAt(0)!=="?"&&(Me="?"+Me),W=W.replace(/[?#]/g,function(Be){return encodeURIComponent(Be)}),Me=Me.replace("#","%23"),oe+ge+W+Me+ue};function ae(Z,oe){return ee(Z,!1,!0).resolve(oe)}e.prototype.resolve=function(Z){return this.resolveObject(ee(Z,!1,!0)).format()};function ne(Z,oe){return Z?ee(Z,!1,!0).resolveObject(oe):oe}return e.prototype.resolveObject=function(Z){if(typeof Z=="string"){var oe=new e;oe.parse(Z,!1,!0),Z=oe}for(var W=new e,ue=Object.keys(this),ge=0;ge<ue.length;ge++){var ye=ue[ge];W[ye]=this[ye]}if(W.hash=Z.hash,Z.href==="")return W.href=W.format(),W;if(Z.slashes&&!Z.protocol){for(var Me=Object.keys(Z),Be=0;Be<Me.length;Be++){var we=Me[Be];we!=="protocol"&&(W[we]=Z[we])}return j[W.protocol]&&W.hostname&&!W.pathname&&(W.pathname="/",W.path=W.pathname),W.href=W.format(),W}if(Z.protocol&&Z.protocol!==W.protocol){if(!j[Z.protocol]){for(var qe=Object.keys(Z),xe=0;xe<qe.length;xe++){var ze=qe[xe];W[ze]=Z[ze]}return W.href=W.format(),W}if(W.protocol=Z.protocol,!Z.host&&!z[Z.protocol]){for(var It=(Z.pathname||"").split("/");It.length&&!(Z.host=It.shift()););Z.host||(Z.host=""),Z.hostname||(Z.hostname=""),It[0]!==""&&It.unshift(""),It.length<2&&It.unshift(""),W.pathname=It.join("/")}else W.pathname=Z.pathname;if(W.search=Z.search,W.query=Z.query,W.host=Z.host||"",W.auth=Z.auth,W.hostname=Z.hostname||Z.host,W.port=Z.port,W.pathname||W.search){var ot=W.pathname||"",yt=W.search||"";W.path=ot+yt}return W.slashes=W.slashes||Z.slashes,W.href=W.format(),W}var nt=W.pathname&&W.pathname.charAt(0)==="/",be=Z.host||Z.pathname&&Z.pathname.charAt(0)==="/",Ne=be||nt||W.host&&Z.pathname,tt=Ne,lt=W.pathname&&W.pathname.split("/")||[],It=Z.pathname&&Z.pathname.split("/")||[],pt=W.protocol&&!j[W.protocol];if(pt&&(W.hostname="",W.port=null,W.host&&(lt[0]===""?lt[0]=W.host:lt.unshift(W.host)),W.host="",Z.protocol&&(Z.hostname=null,Z.port=null,Z.host&&(It[0]===""?It[0]=Z.host:It.unshift(Z.host)),Z.host=null),Ne=Ne&&(It[0]===""||lt[0]==="")),be)W.host=Z.host||Z.host===""?Z.host:W.host,W.hostname=Z.hostname||Z.hostname===""?Z.hostname:W.hostname,W.search=Z.search,W.query=Z.query,lt=It;else if(It.length)lt||(lt=[]),lt.pop(),lt=lt.concat(It),W.search=Z.search,W.query=Z.query;else if(Z.search!=null){if(pt){W.host=lt.shift(),W.hostname=W.host;var St=W.host&&W.host.indexOf("@")>0?W.host.split("@"):!1;St&&(W.auth=St.shift(),W.hostname=St.shift(),W.host=W.hostname)}return W.search=Z.search,W.query=Z.query,(W.pathname!==null||W.search!==null)&&(W.path=(W.pathname?W.pathname:"")+(W.search?W.search:"")),W.href=W.format(),W}if(!lt.length)return W.pathname=null,W.search?W.path="/"+W.search:W.path=null,W.href=W.format(),W;for(var Rt=lt.slice(-1)[0],Le=(W.host||Z.host||lt.length>1)&&(Rt==="."||Rt==="..")||Rt==="",Pe=0,Re=lt.length;Re>=0;Re--)Rt=lt[Re],Rt==="."?lt.splice(Re,1):Rt===".."?(lt.splice(Re,1),Pe++):Pe&&(lt.splice(Re,1),Pe--);if(!Ne&&!tt)for(;Pe--;Pe)lt.unshift("..");Ne&&lt[0]!==""&&(!lt[0]||lt[0].charAt(0)!=="/")&&lt.unshift(""),Le&&lt.join("/").substr(-1)!=="/"&&lt.push("");var He=lt[0]===""||lt[0]&&lt[0].charAt(0)==="/";if(pt){W.hostname=He?"":lt.length?lt.shift():"",W.host=W.hostname;var St=W.host&&W.host.indexOf("@")>0?W.host.split("@"):!1;St&&(W.auth=St.shift(),W.hostname=St.shift(),W.host=W.hostname)}return Ne=Ne||W.host&&lt.length,Ne&&!He&&lt.unshift(""),lt.length>0?W.pathname=lt.join("/"):(W.pathname=null,W.path=null),(W.pathname!==null||W.search!==null)&&(W.path=(W.pathname?W.pathname:"")+(W.search?W.search:"")),W.auth=Z.auth||W.auth,W.slashes=W.slashes||Z.slashes,W.href=W.format(),W},e.prototype.parseHost=function(){var Z=this.host,oe=i.exec(Z);oe&&(oe=oe[0],oe!==":"&&(this.port=oe.substr(1)),Z=Z.substr(0,Z.length-oe.length)),Z&&(this.hostname=Z)},vg.parse=ee,vg.resolve=ae,vg.resolveObject=ne,vg.format=V,vg.Url=e,vg}var zde=Fde();const wU=WA(zde);function xa(){var n="/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",e="370277aff056c0894d7ae34686219318414cc635",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",statementMap:{0:{start:{line:3,column:2},end:{line:16,column:5}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:60}},3:{start:{line:10,column:4},end:{line:10,column:27}},4:{start:{line:12,column:4},end:{line:12,column:13}},5:{start:{line:14,column:4},end:{line:14,column:95}},6:{start:{line:15,column:4},end:{line:15,column:21}},7:{start:{line:19,column:2},end:{line:19,column:34}},8:{start:{line:19,column:20},end:{line:19,column:34}},9:{start:{line:20,column:17},end:{line:20,column:42}},10:{start:{line:21,column:23},end:{line:21,column:57}},11:{start:{line:22,column:2},end:{line:26,column:3}},12:{start:{line:23,column:4},end:{line:23,column:41}},13:{start:{line:25,column:4},end:{line:25,column:69}},14:{start:{line:27,column:14},end:{line:27,column:35}},15:{start:{line:28,column:2},end:{line:28,column:24}},16:{start:{line:31,column:2},end:{line:31,column:30}},17:{start:{line:31,column:16},end:{line:31,column:30}},18:{start:{line:32,column:14},end:{line:32,column:31}},19:{start:{line:33,column:2},end:{line:33,column:57}},20:{start:{line:33,column:32},end:{line:33,column:55}}},fnMap:{0:{name:"loadJSON",decl:{start:{line:2,column:9},end:{line:2,column:17}},loc:{start:{line:2,column:41},end:{line:17,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:6,column:10},end:{line:6,column:11}},loc:{start:{line:6,column:24},end:{line:11,column:3}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:11,column:10},end:{line:11,column:11}},loc:{start:{line:11,column:20},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:13,column:11},end:{line:13,column:12}},loc:{start:{line:13,column:17},end:{line:16,column:3}},line:13},4:{name:"downloadGlyphsMetadata",decl:{start:{line:18,column:16},end:{line:18,column:38}},loc:{start:{line:18,column:56},end:{line:29,column:1}},line:18},5:{name:"downloadSpriteMetadata",decl:{start:{line:30,column:16},end:{line:30,column:38}},loc:{start:{line:30,column:52},end:{line:34,column:1}},line:30},6:{name:"(anonymous_6)",decl:{start:{line:33,column:20},end:{line:33,column:21}},loc:{start:{line:33,column:32},end:{line:33,column:55}},line:33}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:19,column:2},end:{line:19,column:34}},type:"if",locations:[{start:{line:19,column:2},end:{line:19,column:34}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:22,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:22,column:2},end:{line:26,column:3}},{start:{line:24,column:9},end:{line:26,column:3}}],line:22},3:{loc:{start:{line:31,column:2},end:{line:31,column:30}},type:"if",locations:[{start:{line:31,column:2},end:{line:31,column:30}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/metadata.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEnB,SAAS,SAAS,KAAa,cAAmB,IAA8B;AAC9E,QAAM,KAAK;AAAA,IACT,MAAM;AAAA,IACN,aAAa;AAAA,EACf,CAAC,EACE,KAAK,CAAC,aAAa;AAClB,QAAI,CAAC,SAAS,IAAI;AAChB,YAAM,IAAI,MAAM,iCAAiC,GAAG;AAAA,IACtD;AACA,WAAO,SAAS,KAAK;AAAA,EACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,OAAG,IAAI;AAAA,EACT,CAAC,EACA,MAAM,MAAM;AACX,YAAQ,KAAK,+BAA+B,MAAM,2BAA2B,YAAY;AACzF,OAAG,YAAY;AAAA,EACjB,CAAC;AACL;AAEO,gBAAS,uBAAuB,aAAqB,IAA8B;AACxF,MAAG,CAAC,YAAa,QAAO,GAAG,CAAC,CAAC;AAI7B,QAAM,SAAS,OAAO,MAAM,WAAW;AACvC,QAAM,eAAe;AACrB,MAAG,OAAO,aAAa,cAAc;AACnC,WAAO,WAAW;AAAA,EACpB,OAAO;AACL,WAAO,WAAW,OAAO,SAAU,QAAQ,cAAc,OAAO;AAAA,EAClE;AACA,QAAM,MAAM,OAAO,OAAO,MAAM;AAEhC,WAAS,KAAK,CAAC,GAAG,EAAE;AACtB;AAEO,gBAAS,uBAAuB,SAAiB,IAA8B;AACpF,MAAG,CAAC,QAAS,QAAO,GAAG,CAAC,CAAC;AACzB,QAAM,MAAM,UAAU;AACtB,WAAS,KAAK,CAAC,GAAG,YAAU,GAAG,OAAO,KAAK,MAAM,CAAC,CAAC;AACrD;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"370277aff056c0894d7ae34686219318414cc635"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return xa=function(){return l},l}xa();function Sj(n,e,t){xa().f[0]++,xa().s[0]++,fetch(n,{mode:"cors",credentials:"same-origin"}).then(i=>{if(xa().f[1]++,xa().s[1]++,i.ok)xa().b[0][1]++;else throw xa().b[0][0]++,xa().s[2]++,new Error("Failed to load metadata for "+n);return xa().s[3]++,i.json()}).then(i=>{xa().f[2]++,xa().s[4]++,t(i)}).catch(()=>{xa().f[3]++,xa().s[5]++,console.warn("Can not load metadata for "+n+", using default value "+e),xa().s[6]++,t(e)})}function Nde(n,e){if(xa().f[4]++,xa().s[7]++,n)xa().b[1][1]++;else return xa().b[1][0]++,xa().s[8]++,e([]);const t=(xa().s[9]++,wU.parse(n)),i=(xa().s[10]++,"/%7Bfontstack%7D/%7Brange%7D.pbf");xa().s[11]++,t.pathname===i?(xa().b[2][0]++,xa().s[12]++,t.pathname="/fontstacks.json"):(xa().b[2][1]++,xa().s[13]++,t.pathname=t.pathname.replace(i,".json"));const r=(xa().s[14]++,wU.format(t));xa().s[15]++,Sj(r,[],e)}function Gde(n,e){if(xa().f[5]++,xa().s[16]++,n)xa().b[3][1]++;else return xa().b[3][0]++,xa().s[17]++,e([]);const t=(xa().s[18]++,n+".json");xa().s[19]++,Sj(t,{},i=>(xa().f[6]++,xa().s[20]++,e(Object.keys(i))))}function fd(){var n="/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",e="f92fa2abb31199d99fd3ae02d967dc6702faf862",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",statementMap:{0:{start:{line:3,column:18},end:{line:3,column:47}},1:{start:{line:4,column:2},end:{line:4,column:70}},2:{start:{line:4,column:30},end:{line:4,column:68}},3:{start:{line:7,column:2},end:{line:7,column:71}},4:{start:{line:7,column:58},end:{line:7,column:69}},5:{start:{line:10,column:2},end:{line:10,column:71}},6:{start:{line:10,column:58},end:{line:10,column:69}}},fnMap:{0:{name:"diffMessages",decl:{start:{line:2,column:9},end:{line:2,column:21}},loc:{start:{line:2,column:47},end:{line:5,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:21},end:{line:4,column:22}},loc:{start:{line:4,column:30},end:{line:4,column:68}},line:4},2:{name:"undoMessages",decl:{start:{line:6,column:16},end:{line:6,column:28}},loc:{start:{line:6,column:54},end:{line:8,column:1}},line:6},3:{name:"(anonymous_3)",decl:{start:{line:7,column:51},end:{line:7,column:52}},loc:{start:{line:7,column:58},end:{line:7,column:69}},line:7},4:{name:"redoMessages",decl:{start:{line:9,column:16},end:{line:9,column:28}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},5:{name:"(anonymous_5)",decl:{start:{line:10,column:51},end:{line:10,column:52}},loc:{start:{line:10,column:58},end:{line:10,column:69}},line:10}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts"],names:[],mappings:"AAAA,SAAQ,YAAW;AAGnB,SAAS,aAAa,aAAiC,YAAgC;AACrF,QAAM,UAAU,KAAK,aAAa,UAAU;AAC5C,SAAO,QAAQ,IAAI,SAAO,IAAI,UAAU,MAAM,IAAI,KAAK,KAAK,GAAG,CAAC;AAClE;AAEO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;AACO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f92fa2abb31199d99fd3ae02d967dc6702faf862"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return fd=function(){return l},l}fd();function wj(n,e){fd().f[0]++;const t=(fd().s[0]++,dq(n,e));return fd().s[1]++,t.map(i=>(fd().f[1]++,fd().s[2]++,i.command+" "+i.args.join(" ")))}function jde(n,e){return fd().f[2]++,fd().s[3]++,wj(n,e).map(t=>(fd().f[3]++,fd().s[4]++,"Undo "+t))}function Wde(n,e){return fd().f[4]++,fd().s[5]++,wj(n,e).map(t=>(fd().f[5]++,fd().s[6]++,"Redo "+t))}function vc(){var n="/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",e="d72dae9738057e855ea98626011f8090b99877cc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",statementMap:{0:{start:{line:3,column:21},end:{line:3,column:50}},1:{start:{line:4,column:19},end:{line:4,column:55}},2:{start:{line:5,column:2},end:{line:8,column:3}},3:{start:{line:6,column:4},end:{line:6,column:44}},4:{start:{line:7,column:4},end:{line:7,column:75}},5:{start:{line:9,column:2},end:{line:9,column:18}},6:{start:{line:12,column:2},end:{line:12,column:41}},7:{start:{line:13,column:2},end:{line:23,column:3}},8:{start:{line:14,column:21},end:{line:17,column:6}},9:{start:{line:18,column:17},end:{line:18,column:38}},10:{start:{line:19,column:4},end:{line:19,column:43}},11:{start:{line:21,column:4},end:{line:21,column:63}},12:{start:{line:22,column:4},end:{line:22,column:28}}},fnMap:{0:{name:"getStyleUrlFromAddressbarAndRemoveItIfNeeded",decl:{start:{line:2,column:16},end:{line:2,column:60}},loc:{start:{line:2,column:63},end:{line:10,column:1}},line:2},1:{name:"loadStyleUrl",decl:{start:{line:11,column:22},end:{line:11,column:34}},loc:{start:{line:11,column:45},end:{line:24,column:1}},line:11}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAGX,gBAAS,+CAA8D;AAC5E,QAAM,aAAa,IAAI,IAAI,OAAO,SAAS,IAAI;AAC/C,QAAM,WAAW,WAAW,aAAa,IAAI,OAAO;AACpD,MAAI,UAAU;AACZ,eAAW,aAAa,OAAO,OAAO;AACtC,WAAO,QAAQ,aAAa,CAAC,GAAG,SAAS,OAAO,WAAW,SAAS,CAAC;AAAA,EACvE;AACA,SAAO;AACT;AAEA,sBAAsB,aAAa,UAAqD;AACtF,UAAQ,IAAI,iBAAiB,QAAQ;AACrC,MAAI;AACF,UAAM,WAAW,MAAM,MAAM,UAAU;AAAA,MACrC,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC;AACD,UAAM,OAAO,MAAM,SAAS,KAAK;AACjC,WAAO,MAAM,oBAAoB,IAAI;AAAA,EACvC,QAAQ;AACN,YAAQ,KAAK,oCAAoC,QAAQ;AACzD,WAAO,MAAM;AAAA,EACf;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d72dae9738057e855ea98626011f8090b99877cc"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return vc=function(){return l},l}vc();function Qde(){vc().f[0]++;const n=(vc().s[0]++,new URL(window.location.href)),e=(vc().s[1]++,n.searchParams.get("style"));return vc().s[2]++,e?(vc().b[0][0]++,vc().s[3]++,n.searchParams.delete("style"),vc().s[4]++,window.history.replaceState({},document.title,n.toString())):vc().b[0][1]++,vc().s[5]++,e}async function Ej(n){vc().f[1]++,vc().s[6]++,console.log("Loading style",n),vc().s[7]++;try{const e=(vc().s[8]++,await fetch(n,{mode:"cors",credentials:"same-origin"})),t=(vc().s[9]++,await e.json());return vc().s[10]++,qd.ensureStyleValidity(t)}catch{return vc().s[11]++,console.warn("Could not fetch default style: "+n),vc().s[12]++,qd.emptyStyle}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var MB=function(n,e){return MB=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])},MB(n,e)};function Bj(n,e){MB(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Yde(n){var e=typeof Symbol=="function"&&n[Symbol.iterator],t=0;return e?e.call(n):{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}}}function qde(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,a=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(o){l={error:o}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(l)throw l.error}}return a}function Hde(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(qde(arguments[e]));return n}var Oj=function(){function n(e,t){this.target=t,this.type=e}return n}(),Vde=function(n){Bj(e,n);function e(t,i){var r=n.call(this,"error",i)||this;return r.message=t.message,r.error=t,r}return e}(Oj),$de=function(n){Bj(e,n);function e(t,i,r){t===void 0&&(t=1e3),i===void 0&&(i="");var a=n.call(this,"close",r)||this;return a.wasClean=!0,a.code=t,a.reason=i,a}return e}(Oj);/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */var Zde=function(){if(typeof WebSocket<"u")return WebSocket},Xde=function(n){return typeof n<"u"&&!!n&&n.CLOSING===2},Cg={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0};(function(){function n(e,t,i){var r=this;i===void 0&&(i={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(a){r._debug("open event");var l=r._options.minUptime,o=l===void 0?Cg.minUptime:l;clearTimeout(r._connectTimeout),r._uptimeTimeout=setTimeout(function(){return r._acceptOpen()},o),r._ws.binaryType=r._binaryType,r._messageQueue.forEach(function(m){return r._ws.send(m)}),r._messageQueue=[],r.onopen&&r.onopen(a),r._listeners.open.forEach(function(m){return r._callEventListener(a,m)})},this._handleMessage=function(a){r._debug("message event"),r.onmessage&&r.onmessage(a),r._listeners.message.forEach(function(l){return r._callEventListener(a,l)})},this._handleError=function(a){r._debug("error event",a.message),r._disconnect(void 0,a.message==="TIMEOUT"?"timeout":void 0),r.onerror&&r.onerror(a),r._debug("exec error listeners"),r._listeners.error.forEach(function(l){return r._callEventListener(a,l)}),r._connect()},this._handleClose=function(a){r._debug("close event"),r._clearTimeouts(),r._shouldReconnect&&r._connect(),r.onclose&&r.onclose(a),r._listeners.close.forEach(function(l){return r._callEventListener(a,l)})},this._url=e,this._protocols=t,this._options=i,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(n,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CONNECTING",{get:function(){return n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"OPEN",{get:function(){return n.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSING",{get:function(){return n.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSED",{get:function(){return n.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bufferedAmount",{get:function(){var e=this._messageQueue.reduce(function(t,i){return typeof i=="string"?t+=i.length:i instanceof Blob?t+=i.size:t+=i.byteLength,t},0);return e+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?n.CLOSED:n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),n.prototype.close=function(e,t){if(e===void 0&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(e,t)},n.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(e,t),this._connect())},n.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,i=t===void 0?Cg.maxEnqueuedMessages:t;this._messageQueue.length<i&&(this._debug("enqueue",e),this._messageQueue.push(e))}},n.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},n.prototype.dispatchEvent=function(e){var t,i,r=this._listeners[e.type];if(r)try{for(var a=Yde(r),l=a.next();!l.done;l=a.next()){var o=l.value;this._callEventListener(e,o)}}catch(m){t={error:m}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(t)throw t.error}}return!0},n.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(function(i){return i!==t}))},n.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,Hde(["RWS>"],e))},n.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,i=t===void 0?Cg.reconnectionDelayGrowFactor:t,r=e.minReconnectionDelay,a=r===void 0?Cg.minReconnectionDelay:r,l=e.maxReconnectionDelay,o=l===void 0?Cg.maxReconnectionDelay:l,m=0;return this._retryCount>0&&(m=a*Math.pow(i,this._retryCount-1),m>o&&(m=o)),this._debug("next delay",m),m},n.prototype._wait=function(){var e=this;return new Promise(function(t){setTimeout(t,e._getNextDelay())})},n.prototype._getNextUrl=function(e){if(typeof e=="string")return Promise.resolve(e);if(typeof e=="function"){var t=e();if(typeof t=="string")return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},n.prototype._connect=function(){var e=this;if(!(this._connectLock||!this._shouldReconnect)){this._connectLock=!0;var t=this._options,i=t.maxRetries,r=i===void 0?Cg.maxRetries:i,a=t.connectionTimeout,l=a===void 0?Cg.connectionTimeout:a,o=t.WebSocket,m=o===void 0?Zde():o;if(this._retryCount>=r){this._debug("max retries reached",this._retryCount,">=",r);return}if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!Xde(m))throw Error("No valid WebSocket class provided");this._wait().then(function(){return e._getNextUrl(e._url)}).then(function(C){e._closeCalled||(e._debug("connect",{url:C,protocols:e._protocols}),e._ws=e._protocols?new m(C,e._protocols):new m(C),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout(function(){return e._handleTimeout()},l))})}},n.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new Vde(Error("TIMEOUT"),this))},n.prototype._disconnect=function(e,t){if(e===void 0&&(e=1e3),this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new $de(e,t,this))}catch{}}},n.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},n.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},n.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},n.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},n.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},n})();function Ij(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts",e="511b7cd31edca7d05c4852901896ddb82085d1f5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts",statementMap:{0:{start:{line:7,column:18},end:{line:7,column:24}},1:{start:{line:10,column:4},end:{line:11,column:7}},2:{start:{line:12,column:17},end:{line:12,column:37}},3:{start:{line:13,column:17},end:{line:13,column:28}},4:{start:{line:14,column:4},end:{line:14,column:45}},5:{start:{line:15,column:4},end:{line:15,column:50}},6:{start:{line:16,column:4},end:{line:16,column:37}},7:{start:{line:19,column:4},end:{line:27,column:5}},8:{start:{line:20,column:23},end:{line:20,column:79}},9:{start:{line:21,column:19},end:{line:21,column:40}},10:{start:{line:22,column:23},end:{line:22,column:27}},11:{start:{line:23,column:6},end:{line:23,column:39}},12:{start:{line:24,column:6},end:{line:24,column:32}},13:{start:{line:26,column:6},end:{line:26,column:54}},14:{start:{line:30,column:23},end:{line:30,column:67}},15:{start:{line:31,column:4},end:{line:42,column:6}},16:{start:{line:32,column:6},end:{line:32,column:26}},17:{start:{line:32,column:19},end:{line:32,column:26}},18:{start:{line:33,column:6},end:{line:33,column:52}},19:{start:{line:34,column:24},end:{line:34,column:40}},20:{start:{line:35,column:6},end:{line:39,column:7}},21:{start:{line:36,column:8},end:{line:36,column:41}},22:{start:{line:38,column:8},end:{line:38,column:27}},23:{start:{line:40,column:27},end:{line:40,column:65}},24:{start:{line:41,column:6},end:{line:41,column:44}},25:{start:{line:45,column:4},end:{line:53,column:5}},26:{start:{line:46,column:23},end:{line:48,column:8}},27:{start:{line:49,column:19},end:{line:49,column:40}},28:{start:{line:50,column:6},end:{line:50,column:45}},29:{start:{line:52,column:6},end:{line:52,column:92}},30:{start:{line:57,column:22},end:{line:61,column:5}},31:{start:{line:62,column:15},end:{line:62,column:26}},32:{start:{line:63,column:4},end:{line:72,column:7}},33:{start:{line:71,column:6},end:{line:71,column:38}},34:{start:{line:71,column:17},end:{line:71,column:38}},35:{start:{line:73,column:4},end:{line:73,column:20}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:20},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:58},end:{line:10,column:59}},loc:{start:{line:10,column:64},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:15},end:{line:28,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:23},end:{line:43,column:3}},line:29},4:{name:"(anonymous_4)",decl:{start:{line:31,column:27},end:{line:31,column:28}},loc:{start:{line:31,column:34},end:{line:42,column:5}},line:31},5:{name:"(anonymous_5)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:25},end:{line:54,column:3}},line:44},6:{name:"(anonymous_6)",decl:{start:{line:56,column:2},end:{line:56,column:3}},loc:{start:{line:56,column:17},end:{line:74,column:3}},line:56},7:{name:"(anonymous_7)",decl:{start:{line:70,column:13},end:{line:70,column:14}},loc:{start:{line:70,column:29},end:{line:72,column:5}},line:70}},branchMap:{0:{loc:{start:{line:10,column:30},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:30},end:{line:10,column:53}},{start:{line:10,column:58},end:{line:11,column:5}}],line:10},1:{loc:{start:{line:32,column:6},end:{line:32,column:26}},type:"if",locations:[{start:{line:32,column:6},end:{line:32,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:32},2:{loc:{start:{line:45,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:53,column:5}},{start:{line:51,column:11},end:{line:53,column:5}}],line:45},3:{loc:{start:{line:71,column:6},end:{line:71,column:38}},type:"if",locations:[{start:{line:71,column:6},end:{line:71,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:71}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,OAAO,2BAA2B;AAO3B,aAAM,cAAqC;AAAA,EAEhD;AAAA,EACA;AAAA,EACA,gBAAoC;AAAA,EACpC;AAAA,EAEA,YAAY,MAA4B;AACtC,SAAK,qBAAqB,KAAK,uBAAuB,MAAM;AAAA,IAAC;AAC7D,UAAM,OAAO,OAAO,SAAS;AAC7B,UAAM,OAAO;AACb,SAAK,WAAW,UAAU,IAAI,IAAI,IAAI;AACtC,SAAK,eAAe,QAAQ,IAAI,IAAI,IAAI;AACxC,SAAK,OAAO,KAAK,KAAK,KAAK,IAAI;AAAA,EACjC;AAAA,EAEA,MAAM,OAAsB;AAC1B,QAAI;AACF,YAAM,WAAW,MAAM,MAAM,KAAK,WAAW,WAAW,EAAC,MAAM,OAAM,CAAC;AACtE,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,YAAM,WAAW;AACjB,WAAK,gBAAgB,SAAS,CAAC;AAC/B,WAAK,mBAAmB;AAAA,IAC1B,QAAQ;AACN,YAAM,IAAI,MAAM,8BAA8B;AAAA,IAChD;AAAA,EACF;AAAA,EAEA,qBAAqB;AACnB,UAAM,aAAa,IAAI,sBAAsB,KAAK,YAAY;AAC9D,eAAW,YAAY,OAAK;AAC1B,UAAG,CAAC,EAAE,KAAM;AACZ,cAAQ,IAAI,gCAAgC;AAC5C,UAAI,cAAc,MAAM;AACxB,UAAI;AACF,sBAAc,KAAK,MAAM,EAAE,IAAI;AAAA,MACjC,SAAQ,KAAK;AACX,gBAAQ,MAAM,GAAG;AAAA,MACnB;AACA,YAAM,eAAe,MAAM,oBAAoB,WAAW;AAC1D,WAAK,mBAAmB,YAAY;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,MAAM,iBAAoD;AACxD,QAAG,KAAK,eAAe;AACrB,YAAM,WAAW,MAAM,MAAM,KAAK,WAAW,aAAa,KAAK,eAAe;AAAA,QAC5E,MAAM;AAAA,MACR,CAAC;AACD,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,aAAO,MAAM,oBAAoB,IAAI;AAAA,IACvC,OAAO;AACL,YAAM,IAAI,MAAM,oEAAoE;AAAA,IACtF;AAAA,EACF;AAAA;AAAA,EAGA,KAAK,UAAoC;AACvC,UAAM,YAAY;AAAA,MAChB,MAAM;AAAA,QACJ,MAAM,oBAAoB,QAAQ;AAAA,MACpC;AAAA,IACF;AAEA,UAAM,KAAK,SAAS;AACpB,UAAM,KAAK,WAAW,aAAa,IAAI;AAAA,MACrC,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,QACP,gBAAgB;AAAA,MAClB;AAAA,MACA,MAAM;AAAA,IACR,CAAC,EACE,MAAM,SAAS,OAAO;AACrB,UAAG,MAAO,SAAQ,MAAM,KAAK;AAAA,IAC/B,CAAC;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"511b7cd31edca7d05c4852901896ddb82085d1f5"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Ij=function(){return l},l}Ij();function Fi(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts",e="1506dd6f3469e4801b7fd940c02682bf4ad7b098",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts",statementMap:{0:{start:{line:4,column:22},end:{line:4,column:32}},1:{start:{line:5,column:20},end:{line:5,column:27}},2:{start:{line:6,column:20},end:{line:9,column:1}},3:{start:{line:10,column:24},end:{line:10,column:44}},4:{start:{line:12,column:2},end:{line:12,column:39}},5:{start:{line:15,column:17},end:{line:15,column:19}},6:{start:{line:16,column:2},end:{line:21,column:3}},7:{start:{line:16,column:15},end:{line:16,column:16}},8:{start:{line:17,column:16},end:{line:17,column:42}},9:{start:{line:18,column:4},end:{line:20,column:5}},10:{start:{line:19,column:6},end:{line:19,column:32}},11:{start:{line:22,column:2},end:{line:22,column:16}},12:{start:{line:25,column:16},end:{line:25,column:30}},13:{start:{line:26,column:2},end:{line:26,column:86}},14:{start:{line:29,column:2},end:{line:31,column:3}},15:{start:{line:30,column:4},end:{line:30,column:41}},16:{start:{line:32,column:16},end:{line:32,column:30}},17:{start:{line:33,column:18},end:{line:33,column:26}},18:{start:{line:34,column:2},end:{line:34,column:17}},19:{start:{line:37,column:2},end:{line:37,column:57}},20:{start:{line:47,column:4},end:{line:47,column:40}},21:{start:{line:51,column:4},end:{line:56,column:5}},22:{start:{line:51,column:17},end:{line:51,column:18}},23:{start:{line:52,column:18},end:{line:52,column:44}},24:{start:{line:53,column:6},end:{line:55,column:7}},25:{start:{line:54,column:8},end:{line:54,column:44}},26:{start:{line:60,column:4},end:{line:62,column:5}},27:{start:{line:61,column:6},end:{line:61,column:32}},28:{start:{line:63,column:20},end:{line:63,column:67}},29:{start:{line:64,column:22},end:{line:64,column:68}},30:{start:{line:65,column:4},end:{line:67,column:5}},31:{start:{line:66,column:6},end:{line:66,column:35}},32:{start:{line:68,column:4},end:{line:68,column:30}},33:{start:{line:72,column:4},end:{line:72,column:51}},34:{start:{line:73,column:16},end:{line:73,column:37}},35:{start:{line:74,column:19},end:{line:77,column:5}},36:{start:{line:75,column:6},end:{line:75,column:65}},37:{start:{line:76,column:6},end:{line:76,column:67}},38:{start:{line:78,column:4},end:{line:89,column:5}},39:{start:{line:79,column:6},end:{line:79,column:15}},40:{start:{line:81,column:6},end:{line:88,column:7}},41:{start:{line:84,column:8},end:{line:84,column:21}},42:{start:{line:85,column:8},end:{line:85,column:17}},43:{start:{line:87,column:8},end:{line:87,column:16}},44:{start:{line:90,column:4},end:{line:90,column:20}}},fnMap:{0:{name:"loadDefaultStyle",decl:{start:{line:11,column:16},end:{line:11,column:32}},loc:{start:{line:11,column:35},end:{line:13,column:1}},line:11},1:{name:"loadStoredStyles",decl:{start:{line:14,column:9},end:{line:14,column:25}},loc:{start:{line:14,column:28},end:{line:23,column:1}},line:14},2:{name:"isStyleKey",decl:{start:{line:24,column:9},end:{line:24,column:19}},loc:{start:{line:24,column:25},end:{line:27,column:1}},line:24},3:{name:"fromKey",decl:{start:{line:28,column:9},end:{line:28,column:16}},loc:{start:{line:28,column:22},end:{line:35,column:1}},line:28},4:{name:"styleKey",decl:{start:{line:36,column:9},end:{line:36,column:17}},loc:{start:{line:36,column:27},end:{line:38,column:1}},line:36},5:{name:"(anonymous_5)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:16},end:{line:48,column:3}},line:46},6:{name:"(anonymous_6)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:10},end:{line:57,column:3}},line:50},7:{name:"(anonymous_7)",decl:{start:{line:59,column:2},end:{line:59,column:3}},loc:{start:{line:59,column:25},end:{line:69,column:3}},line:59},8:{name:"(anonymous_8)",decl:{start:{line:71,column:2},end:{line:71,column:3}},loc:{start:{line:71,column:17},end:{line:91,column:3}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:74,column:19},end:{line:74,column:20}},loc:{start:{line:74,column:25},end:{line:77,column:5}},line:74}},branchMap:{0:{loc:{start:{line:18,column:4},end:{line:20,column:5}},type:"if",locations:[{start:{line:18,column:4},end:{line:20,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},1:{loc:{start:{line:26,column:9},end:{line:26,column:85}},type:"binary-expr",locations:[{start:{line:26,column:9},end:{line:26,column:27}},{start:{line:26,column:31},end:{line:26,column:57}},{start:{line:26,column:61},end:{line:26,column:85}}],line:26},2:{loc:{start:{line:29,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:2},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29},3:{loc:{start:{line:53,column:6},end:{line:55,column:7}},type:"if",locations:[{start:{line:53,column:6},end:{line:55,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},4:{loc:{start:{line:60,column:4},end:{line:62,column:5}},type:"if",locations:[{start:{line:60,column:4},end:{line:62,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},5:{loc:{start:{line:65,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:67,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},6:{loc:{start:{line:81,column:6},end:{line:88,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:88,column:7}},{start:{line:86,column:13},end:{line:88,column:7}}],line:81},7:{loc:{start:{line:81,column:10},end:{line:83,column:81}},type:"binary-expr",locations:[{start:{line:81,column:10},end:{line:81,column:35}},{start:{line:81,column:40},end:{line:81,column:53}},{start:{line:82,column:6},end:{line:82,column:21}},{start:{line:83,column:6},end:{line:83,column:37}},{start:{line:83,column:41},end:{line:83,column:80}}],line:81}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,oBAAmB;AAC3B,OAAO,mBAAmB;AAG1B,MAAM,gBAAgB;AACtB,MAAM,cAAc;AACpB,MAAM,cAAc;AAAA,EAClB,QAAQ,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AAAA,EAChD,aAAa,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AACvD;AAEA,MAAM,kBAAkB,cAAc,CAAC,EAAE;AAGlC,gBAAS,mBAAsD;AACpE,SAAO,aAAa,eAAe;AACrC;AAGA,SAAS,mBAAmB;AAC1B,QAAM,SAAS,CAAC;AAChB,WAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,UAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,QAAG,WAAW,GAAI,GAAG;AACnB,aAAO,KAAK,QAAQ,GAAI,CAAC;AAAA,IAC3B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,WAAW,KAAa;AAC/B,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,SAAO,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM,iBAAiB,MAAM,CAAC,MAAM;AAC1E;AAGA,SAAS,QAAQ,KAAa;AAC5B,MAAG,CAAC,WAAW,GAAG,GAAG;AACnB,UAAM;AAAA,EACR;AAEA,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,QAAM,UAAU,MAAM,CAAC;AACvB,SAAO;AACT;AAGA,SAAS,SAAS,SAAiB;AACjC,SAAO,CAAC,eAAe,aAAa,OAAO,EAAE,KAAK,GAAG;AACvD;AAGO,aAAM,WAAkC;AAAA;AAAA;AAAA;AAAA,EAI7C;AAAA;AAAA;AAAA,EAIA,cAAc;AACZ,SAAK,YAAY,iBAAiB;AAAA,EACpC;AAAA;AAAA,EAGA,QAAQ;AACN,aAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,YAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,UAAG,IAAI,WAAW,aAAa,GAAG;AAChC,eAAO,aAAa,WAAW,GAAG;AAAA,MACpC;AAAA,IACF;AAAA,EACF;AAAA;AAAA,EAGA,MAAM,iBAAoD;AACxD,QAAG,KAAK,UAAU,WAAW,GAAG;AAC9B,aAAO,iBAAiB;AAAA,IAC1B;AACA,UAAM,UAAU,OAAO,aAAa,QAAQ,YAAY,MAAM;AAC9D,UAAM,YAAY,OAAO,aAAa,QAAQ,SAAS,OAAO,CAAC;AAE/D,QAAI,WAAW;AACb,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AACA,WAAO,iBAAiB;AAAA,EAC1B;AAAA;AAAA,EAGA,KAAK,UAAoC;AACvC,eAAW,MAAM,oBAAoB,QAAQ;AAC7C,UAAM,MAAM,SAAS,SAAS,EAAE;AAEhC,UAAM,SAAS,MAAM;AACnB,aAAO,aAAa,QAAQ,KAAK,KAAK,UAAU,QAAQ,CAAC;AACzD,aAAO,aAAa,QAAQ,YAAY,QAAQ,SAAS,EAAE;AAAA,IAC7D;AAEA,QAAI;AACF,aAAO;AAAA,IACT,SAAS,GAAG;AAEV,UAAI,aAAa,iBACf,EAAE,SAAS;AAAA,MACX,EAAE,SAAS;AAAA,MACX,EAAE,SAAS,wBACX,EAAE,SAAS,+BACV;AACD,aAAK,MAAM;AACX,eAAO;AAAA,MACT,OAAO;AACL,cAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1506dd6f3469e4801b7fd940c02682bf4ad7b098"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Fi=function(){return l},l}Fi();const J2=(Fi().s[0]++,"maputnik"),Tj=(Fi().s[1]++,"style"),EU=(Fi().s[2]++,{latest:[J2,"latest_style"].join(":")}),Jde=(Fi().s[3]++,mj[0].url);function BU(){return Fi().f[0]++,Fi().s[4]++,Ej(Jde)}function efe(){Fi().f[1]++;const n=(Fi().s[5]++,[]);Fi().s[6]++;for(let e=(Fi().s[7]++,0);e<window.localStorage.length;e++){const t=(Fi().s[8]++,window.localStorage.key(e));Fi().s[9]++,kj(t)?(Fi().b[0][0]++,Fi().s[10]++,n.push(tfe(t))):Fi().b[0][1]++}return Fi().s[11]++,n}function kj(n){Fi().f[2]++;const e=(Fi().s[12]++,n.split(":"));return Fi().s[13]++,Fi().b[1][0]++,e.length===3&&(Fi().b[1][1]++,e[0]===J2)&&(Fi().b[1][2]++,e[1]===Tj)}function tfe(n){if(Fi().f[3]++,Fi().s[14]++,kj(n))Fi().b[2][1]++;else throw Fi().b[2][0]++,Fi().s[15]++,"Key is not a valid style key";const e=(Fi().s[16]++,n.split(":")),t=(Fi().s[17]++,e[2]);return Fi().s[18]++,t}function OU(n){return Fi().f[4]++,Fi().s[19]++,[J2,Tj,n].join(":")}class nfe{mapStyles;constructor(){Fi().f[5]++,Fi().s[20]++,this.mapStyles=efe()}purge(){Fi().f[6]++,Fi().s[21]++;for(let e=(Fi().s[22]++,0);e<window.localStorage.length;e++){const t=(Fi().s[23]++,window.localStorage.key(e));Fi().s[24]++,t.startsWith(J2)?(Fi().b[3][0]++,Fi().s[25]++,window.localStorage.removeItem(t)):Fi().b[3][1]++}}async getLatestStyle(){if(Fi().f[7]++,Fi().s[26]++,this.mapStyles.length===0)return Fi().b[4][0]++,Fi().s[27]++,BU();Fi().b[4][1]++;const e=(Fi().s[28]++,window.localStorage.getItem(EU.latest)),t=(Fi().s[29]++,window.localStorage.getItem(OU(e)));return Fi().s[30]++,t?(Fi().b[5][0]++,Fi().s[31]++,JSON.parse(t)):(Fi().b[5][1]++,Fi().s[32]++,BU())}save(e){Fi().f[8]++,Fi().s[33]++,e=qd.ensureStyleValidity(e);const t=(Fi().s[34]++,OU(e.id));Fi().s[35]++;const i=()=>{Fi().f[9]++,Fi().s[36]++,window.localStorage.setItem(t,JSON.stringify(e)),Fi().s[37]++,window.localStorage.setItem(EU.latest,e.id)};Fi().s[38]++;try{Fi().s[39]++,i()}catch(r){if(Fi().s[40]++,Fi().b[7][0]++,r instanceof DOMException&&(Fi().b[7][1]++,r.code===22||(Fi().b[7][2]++,r.code===1014)||(Fi().b[7][3]++,r.name==="QuotaExceededError")||(Fi().b[7][4]++,r.name==="NS_ERROR_DOM_QUOTA_REACHED")))Fi().b[6][0]++,Fi().s[41]++,this.purge(),Fi().s[42]++,i();else throw Fi().b[6][1]++,Fi().s[43]++,r}return Fi().s[44]++,e}}function hd(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts",e="2de8d55bfe17551e08818e39ce7b23b7139f970e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:65}},1:{start:{line:6,column:22},end:{line:6,column:118}},2:{start:{line:8,column:2},end:{line:20,column:3}},3:{start:{line:9,column:26},end:{line:11,column:6}},4:{start:{line:10,column:40},end:{line:10,column:81}},5:{start:{line:12,column:4},end:{line:17,column:5}},6:{start:{line:13,column:6},end:{line:13,column:33}},7:{start:{line:14,column:6},end:{line:14,column:33}},8:{start:{line:16,column:6},end:{line:16,column:36}},9:{start:{line:19,column:4},end:{line:19,column:34}},10:{start:{line:21,column:22},end:{line:21,column:100}},11:{start:{line:22,column:2},end:{line:22,column:66}},12:{start:{line:23,column:2},end:{line:23,column:20}}},fnMap:{0:{name:"createStyleStore",decl:{start:{line:4,column:22},end:{line:4,column:38}},loc:{start:{line:4,column:55},end:{line:24,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:10,column:26},end:{line:10,column:27}},loc:{start:{line:10,column:40},end:{line:10,column:81}},line:10}},branchMap:{0:{loc:{start:{line:6,column:22},end:{line:6,column:118}},type:"binary-expr",locations:[{start:{line:6,column:22},end:{line:6,column:30}},{start:{line:6,column:34},end:{line:6,column:118}}],line:6},1:{loc:{start:{line:8,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:8,column:2},end:{line:20,column:3}},{start:{line:18,column:9},end:{line:20,column:3}}],line:8},2:{loc:{start:{line:21,column:22},end:{line:21,column:100}},type:"cond-expr",locations:[{start:{line:21,column:36},end:{line:21,column:64}},{start:{line:21,column:67},end:{line:21,column:100}}],line:21}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts"],names:[],mappings:"AAEA,SAAS,8CAA8C,oBAAoB;AAC3E,SAAS,qBAAqB;AAC9B,SAAS,kBAAkB;AAE3B,sBAAsB,iBAAiB,gBAA8D;AACnG,QAAM,WAAW,6CAA6C;AAC9D,QAAM,cAAc,YAAY,OAAO,QAAQ,0BAA0B,WAAW,+BAA+B;AACnH,MAAI;AACJ,MAAI,OAAoD;AACtD,UAAM,gBAAgB,IAAI,cAAc;AAAA,MACtC,oBAAoB,CAAA,aAAY,eAAe,UAAU,EAAC,MAAM,MAAK,CAAC;AAAA,IACxE,CAAC;AACD,QAAI;AACF,YAAM,cAAc,KAAK;AACzB,mBAAa;AAAA,IACf,QAAQ;AACN,mBAAa,IAAI,WAAW;AAAA,IAC9B;AAAA,EACF,OAAO;AACL,iBAAa,IAAI,WAAW;AAAA,EAC9B;AACA,QAAM,cAAc,cAAc,MAAM,aAAa,QAAQ,IAAI,MAAM,WAAW,eAAe;AACjG,iBAAe,aAAa,EAAC,aAAa,MAAM,MAAM,MAAK,CAAC;AAC5D,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2de8d55bfe17551e08818e39ce7b23b7139f970e"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return hd=function(){return l},l}hd();async function ife(n){hd().f[0]++;const e=(hd().s[0]++,Qde()),t=(hd().s[1]++,hd().b[0][0]++,e&&(hd().b[0][1]++,window.confirm("Load style from URL: "+e+" and discard current changes?")));let i;hd().s[2]++,hd().b[1][1]++,hd().s[9]++,i=new nfe;const r=(hd().s[10]++,t?(hd().b[2][0]++,await Ej(e)):(hd().b[2][1]++,await i.getLatestStyle()));return hd().s[11]++,n(r,{initialLoad:!0,save:!1}),hd().s[12]++,i}function Rl(){var n="/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",e="2443d70bd38cc3b176918d5f84a8a7d35a1ef2fe",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:38}},1:{start:{line:6,column:4},end:{line:6,column:50}},2:{start:{line:9,column:4},end:{line:9,column:53}},3:{start:{line:12,column:4},end:{line:12,column:43}},4:{start:{line:15,column:4},end:{line:15,column:66}},5:{start:{line:16,column:4},end:{line:16,column:34}},6:{start:{line:17,column:4},end:{line:17,column:22}},7:{start:{line:20,column:4},end:{line:22,column:5}},8:{start:{line:21,column:6},end:{line:21,column:24}},9:{start:{line:23,column:4},end:{line:23,column:24}},10:{start:{line:26,column:4},end:{line:28,column:5}},11:{start:{line:27,column:6},end:{line:27,column:24}},12:{start:{line:29,column:4},end:{line:29,column:24}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:37},end:{line:7,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:10,column:3}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:16},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:24},end:{line:18,column:3}},line:14},4:{name:"(anonymous_4)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:9},end:{line:24,column:3}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:25,column:2},end:{line:25,column:3}},loc:{start:{line:25,column:9},end:{line:30,column:3}},line:25}},branchMap:{0:{loc:{start:{line:4,column:14},end:{line:4,column:35}},type:"default-arg",locations:[{start:{line:4,column:33},end:{line:4,column:35}}],line:4},1:{loc:{start:{line:20,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:20,column:4},end:{line:22,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},2:{loc:{start:{line:26,column:4},end:{line:28,column:5}},type:"if",locations:[{start:{line:26,column:4},end:{line:28,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/revisions.ts"],names:[],mappings:"AAEO,aAAM,cAAc;AAAA,EACzB;AAAA,EACA;AAAA,EAGA,YAAY,mBAAiB,CAAC,GAAG;AAC/B,SAAK,YAAY;AACjB,SAAK,aAAa,iBAAiB,SAAS;AAAA,EAC9C;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,UAAU,KAAK,UAAU,SAAS,CAAC;AAAA,EACjD;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,UAAU,KAAK,UAAU;AAAA,EACvC;AAAA,EAEA,YAAY,UAAoC;AAG9C,SAAK,YAAY,KAAK,UAAU,MAAM,GAAG,KAAK,aAAa,CAAC;AAE5D,SAAK,UAAU,KAAK,QAAQ;AAC5B,SAAK;AAAA,EAEP;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,GAAG;AACtB,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,KAAK,UAAU,SAAS,GAAG;AAC9C,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2443d70bd38cc3b176918d5f84a8a7d35a1ef2fe"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Rl=function(){return l},l}Rl();class rfe{revisions;currentIdx;constructor(e=(Rl().b[0][0]++,[])){Rl().f[0]++,Rl().s[0]++,this.revisions=e,Rl().s[1]++,this.currentIdx=e.length-1}get latest(){return Rl().f[1]++,Rl().s[2]++,this.revisions[this.revisions.length-1]}get current(){return Rl().f[2]++,Rl().s[3]++,this.revisions[this.currentIdx]}addRevision(e){Rl().f[3]++,Rl().s[4]++,this.revisions=this.revisions.slice(0,this.currentIdx+1),Rl().s[5]++,this.revisions.push(e),Rl().s[6]++,this.currentIdx++}undo(){return Rl().f[4]++,Rl().s[7]++,this.currentIdx>0?(Rl().b[1][0]++,Rl().s[8]++,this.currentIdx--):Rl().b[1][1]++,Rl().s[9]++,this.current}redo(){return Rl().f[5]++,Rl().s[10]++,this.currentIdx<this.revisions.length-1?(Rl().b[2][0]++,Rl().s[11]++,this.currentIdx++):Rl().b[2][1]++,Rl().s[12]++,this.current}}var r6,IU;function ofe(){if(IU)return r6;IU=1;var n="Expected a function",e=NaN,t="[object Symbol]",i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt,m=typeof window=="object"&&window&&window.Object===Object&&window,C=typeof self=="object"&&self&&self.Object===Object&&self,S=m||C||Function("return this")(),O=Object.prototype,U=O.toString,K=Math.max,z=Math.min,j=function(){return S.Date.now()};function Q(oe,W,ue){var ge,ye,Me,Be,we,qe,xe=0,ze=!1,ot=!1,yt=!0;if(typeof oe!="function")throw new TypeError(n);W=Z(W)||0,V(ue)&&(ze=!!ue.leading,ot="maxWait"in ue,Me=ot?K(Z(ue.maxWait)||0,W):Me,yt="trailing"in ue?!!ue.trailing:yt);function nt(Le){var Pe=ge,Re=ye;return ge=ye=void 0,xe=Le,Be=oe.apply(Re,Pe),Be}function be(Le){return xe=Le,we=setTimeout(lt,W),ze?nt(Le):Be}function Ne(Le){var Pe=Le-qe,Re=Le-xe,He=W-Pe;return ot?z(He,Me-Re):He}function tt(Le){var Pe=Le-qe,Re=Le-xe;return qe===void 0||Pe>=W||Pe<0||ot&&Re>=Me}function lt(){var Le=j();if(tt(Le))return It(Le);we=setTimeout(lt,Ne(Le))}function It(Le){return we=void 0,yt&&ge?nt(Le):(ge=ye=void 0,Be)}function pt(){we!==void 0&&clearTimeout(we),xe=0,ge=qe=ye=we=void 0}function St(){return we===void 0?Be:It(j())}function Rt(){var Le=j(),Pe=tt(Le);if(ge=arguments,ye=this,qe=Le,Pe){if(we===void 0)return be(qe);if(ot)return we=setTimeout(lt,W),nt(qe)}return we===void 0&&(we=setTimeout(lt,W)),Be}return Rt.cancel=pt,Rt.flush=St,Rt}function ee(oe,W,ue){var ge=!0,ye=!0;if(typeof oe!="function")throw new TypeError(n);return V(ue)&&(ge="leading"in ue?!!ue.leading:ge,ye="trailing"in ue?!!ue.trailing:ye),Q(oe,W,{leading:ge,maxWait:W,trailing:ye})}function V(oe){var W=typeof oe;return!!oe&&(W=="object"||W=="function")}function ae(oe){return!!oe&&typeof oe=="object"}function ne(oe){return typeof oe=="symbol"||ae(oe)&&U.call(oe)==t}function Z(oe){if(typeof oe=="number")return oe;if(ne(oe))return e;if(V(oe)){var W=typeof oe.valueOf=="function"?oe.valueOf():oe;oe=V(W)?W+"":W}if(typeof oe!="string")return oe===0?oe:+oe;oe=oe.replace(i,"");var ue=a.test(oe);return ue||l.test(oe)?o(oe.slice(2),ue?2:8):r.test(oe)?e:+oe}return r6=ee,r6}var afe=ofe();const sfe=WA(afe);var WC={exports:{}};WC.exports;var TU;function lfe(){return TU||(TU=1,function(n,e){var t=200,i="__lodash_hash_undefined__",r=1,a=2,l=9007199254740991,o="[object Arguments]",m="[object Array]",C="[object AsyncFunction]",S="[object Boolean]",O="[object Date]",U="[object Error]",K="[object Function]",z="[object GeneratorFunction]",j="[object Map]",Q="[object Number]",ee="[object Null]",V="[object Object]",ae="[object Promise]",ne="[object Proxy]",Z="[object RegExp]",oe="[object Set]",W="[object String]",ue="[object Symbol]",ge="[object Undefined]",ye="[object WeakMap]",Me="[object ArrayBuffer]",Be="[object DataView]",we="[object Float32Array]",qe="[object Float64Array]",xe="[object Int8Array]",ze="[object Int16Array]",ot="[object Int32Array]",yt="[object Uint8Array]",nt="[object Uint8ClampedArray]",be="[object Uint16Array]",Ne="[object Uint32Array]",tt=/[\\^$.*+?()[\]{}|]/g,lt=/^\[object .+?Constructor\]$/,It=/^(?:0|[1-9]\d*)$/,pt={};pt[we]=pt[qe]=pt[xe]=pt[ze]=pt[ot]=pt[yt]=pt[nt]=pt[be]=pt[Ne]=!0,pt[o]=pt[m]=pt[Me]=pt[S]=pt[Be]=pt[O]=pt[U]=pt[K]=pt[j]=pt[Q]=pt[V]=pt[Z]=pt[oe]=pt[W]=pt[ye]=!1;var St=typeof window=="object"&&window&&window.Object===Object&&window,Rt=typeof self=="object"&&self&&self.Object===Object&&self,Le=St||Rt||Function("return this")(),Pe=e&&!e.nodeType&&e,Re=Pe&&!0&&n&&!n.nodeType&&n,He=Re&&Re.exports===Pe,bt=He&&St.process,vt=function(){try{return bt&&bt.binding&&bt.binding("util")}catch{}}(),Ot=vt&&vt.isTypedArray;function qt(te,Oe){for(var st=-1,jt=te==null?0:te.length,Si=0,Xn=[];++st<jt;){var $i=te[st];Oe($i,st,te)&&(Xn[Si++]=$i)}return Xn}function Kt(te,Oe){for(var st=-1,jt=Oe.length,Si=te.length;++st<jt;)te[Si+st]=Oe[st];return te}function on(te,Oe){for(var st=-1,jt=te==null?0:te.length;++st<jt;)if(Oe(te[st],st,te))return!0;return!1}function Jn(te,Oe){for(var st=-1,jt=Array(te);++st<te;)jt[st]=Oe(st);return jt}function Wt(te){return function(Oe){return te(Oe)}}function $n(te,Oe){return te.has(Oe)}function On(te,Oe){return te?.[Oe]}function Bn(te){var Oe=-1,st=Array(te.size);return te.forEach(function(jt,Si){st[++Oe]=[Si,jt]}),st}function In(te,Oe){return function(st){return te(Oe(st))}}function Bi(te){var Oe=-1,st=Array(te.size);return te.forEach(function(jt){st[++Oe]=jt}),st}var ei=Array.prototype,Kn=Function.prototype,Ge=Object.prototype,de=Le["__core-js_shared__"],re=Kn.toString,le=Ge.hasOwnProperty,me=function(){var te=/[^.]+$/.exec(de&&de.keys&&de.keys.IE_PROTO||"");return te?"Symbol(src)_1."+te:""}(),Te=Ge.toString,We=RegExp("^"+re.call(le).replace(tt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),dt=He?Le.Buffer:void 0,Ye=Le.Symbol,De=Le.Uint8Array,Ze=Ge.propertyIsEnumerable,g=ei.splice,gt=Ye?Ye.toStringTag:void 0,ht=Object.getOwnPropertySymbols,kt=dt?dt.isBuffer:void 0,it=In(Object.keys,Object),en=ko(Le,"DataView"),Dn=ko(Le,"Map"),Mn=ko(Le,"Promise"),ii=ko(Le,"Set"),Wn=ko(Le,"WeakMap"),qi=ko(Object,"create"),er=No(en),wi=No(Dn),hi=No(Mn),ti=No(ii),Wi=No(Wn),Sn=Ye?Ye.prototype:void 0,lo=Sn?Sn.valueOf:void 0;function Hi(te){var Oe=-1,st=te==null?0:te.length;for(this.clear();++Oe<st;){var jt=te[Oe];this.set(jt[0],jt[1])}}function pa(){this.__data__=qi?qi(null):{},this.size=0}function To(te){var Oe=this.has(te)&&delete this.__data__[te];return this.size-=Oe?1:0,Oe}function Zn(te){var Oe=this.__data__;if(qi){var st=Oe[te];return st===i?void 0:st}return le.call(Oe,te)?Oe[te]:void 0}function lr(te){var Oe=this.__data__;return qi?Oe[te]!==void 0:le.call(Oe,te)}function zi(te,Oe){var st=this.__data__;return this.size+=this.has(te)?0:1,st[te]=qi&&Oe===void 0?i:Oe,this}Hi.prototype.clear=pa,Hi.prototype.delete=To,Hi.prototype.get=Zn,Hi.prototype.has=lr,Hi.prototype.set=zi;function vr(te){var Oe=-1,st=te==null?0:te.length;for(this.clear();++Oe<st;){var jt=te[Oe];this.set(jt[0],jt[1])}}function La(){this.__data__=[],this.size=0}function Ir(te){var Oe=this.__data__,st=si(Oe,te);if(st<0)return!1;var jt=Oe.length-1;return st==jt?Oe.pop():g.call(Oe,st,1),--this.size,!0}function Ni(te){var Oe=this.__data__,st=si(Oe,te);return st<0?void 0:Oe[st][1]}function gl(te){return si(this.__data__,te)>-1}function Ta(te,Oe){var st=this.__data__,jt=si(st,te);return jt<0?(++this.size,st.push([te,Oe])):st[jt][1]=Oe,this}vr.prototype.clear=La,vr.prototype.delete=Ir,vr.prototype.get=Ni,vr.prototype.has=gl,vr.prototype.set=Ta;function So(te){var Oe=-1,st=te==null?0:te.length;for(this.clear();++Oe<st;){var jt=te[Oe];this.set(jt[0],jt[1])}}function $a(){this.size=0,this.__data__={hash:new Hi,map:new(Dn||vr),string:new Hi}}function Ol(te){var Oe=$o(this,te).delete(te);return this.size-=Oe?1:0,Oe}function Ao(te){return $o(this,te).get(te)}function QA(te){return $o(this,te).has(te)}function ka(te,Oe){var st=$o(this,te),jt=st.size;return st.set(te,Oe),this.size+=st.size==jt?0:1,this}So.prototype.clear=$a,So.prototype.delete=Ol,So.prototype.get=Ao,So.prototype.has=QA,So.prototype.set=ka;function Vi(te){var Oe=-1,st=te==null?0:te.length;for(this.__data__=new So;++Oe<st;)this.add(te[Oe])}function xi(te){return this.__data__.set(te,i),this}function ls(te){return this.__data__.has(te)}Vi.prototype.add=Vi.prototype.push=xi,Vi.prototype.has=ls;function Ma(te){var Oe=this.__data__=new vr(te);this.size=Oe.size}function Vo(){this.__data__=new vr,this.size=0}function $e(te){var Oe=this.__data__,st=Oe.delete(te);return this.size=Oe.size,st}function Et(te){return this.__data__.get(te)}function xn(te){return this.__data__.has(te)}function jn(te,Oe){var st=this.__data__;if(st instanceof vr){var jt=st.__data__;if(!Dn||jt.length<t-1)return jt.push([te,Oe]),this.size=++st.size,this;st=this.__data__=new So(jt)}return st.set(te,Oe),this.size=st.size,this}Ma.prototype.clear=Vo,Ma.prototype.delete=$e,Ma.prototype.get=Et,Ma.prototype.has=xn,Ma.prototype.set=jn;function rn(te,Oe){var st=Sa(te),jt=!st&&Fa(te),Si=!st&&!jt&&kr(te),Xn=!st&&!jt&&!Si&&vl(te),$i=st||jt||Si||Xn,or=$i?Jn(te.length,String):[],Di=or.length;for(var Xi in te)le.call(te,Xi)&&!($i&&(Xi=="length"||Si&&(Xi=="offset"||Xi=="parent")||Xn&&(Xi=="buffer"||Xi=="byteLength"||Xi=="byteOffset")||Ul(Xi,Di)))&&or.push(Xi);return or}function si(te,Oe){for(var st=te.length;st--;)if(Eo(te[st][0],Oe))return st;return-1}function Jr(te,Oe,st){var jt=Oe(te);return Sa(te)?jt:Kt(jt,st(te))}function wo(te){return te==null?te===void 0?ge:ee:gt&&gt in Object(te)?dr(te):cu(te)}function As(te){return Dr(te)&&wo(te)==o}function Us(te,Oe,st,jt,Si){return te===Oe?!0:te==null||Oe==null||!Dr(te)&&!Dr(Oe)?te!==te&&Oe!==Oe:YA(te,Oe,st,jt,Us,Si)}function YA(te,Oe,st,jt,Si,Xn){var $i=Sa(te),or=Sa(Oe),Di=$i?m:ga(te),Xi=or?m:ga(Oe);Di=Di==o?V:Di,Xi=Xi==o?V:Xi;var eo=Di==V,uo=Xi==V,ur=Di==Xi;if(ur&&kr(te)){if(!kr(Oe))return!1;$i=!0,eo=!1}if(ur&&!eo)return Xn||(Xn=new Ma),$i||vl(te)?yl(te,Oe,st,jt,Si,Xn):Ss(te,Oe,Di,st,jt,Si,Xn);if(!(st&r)){var pr=eo&&le.call(te,"__wrapped__"),co=uo&&le.call(Oe,"__wrapped__");if(pr||co){var Go=pr?te.value():te,zr=co?Oe.value():Oe;return Xn||(Xn=new Ma),Si(Go,zr,st,jt,Xn)}}return ur?(Xn||(Xn=new Ma),bc(te,Oe,st,jt,Si,Xn)):!1}function Qi(te){if(!ya(te)||br(te))return!1;var Oe=za(te)?We:lt;return Oe.test(No(te))}function Du(te){return Dr(te)&&Za(te.length)&&!!pt[wo(te)]}function _A(te){if(!iA(te))return it(te);var Oe=[];for(var st in Object(te))le.call(te,st)&&st!="constructor"&&Oe.push(st);return Oe}function yl(te,Oe,st,jt,Si,Xn){var $i=st&r,or=te.length,Di=Oe.length;if(or!=Di&&!($i&&Di>or))return!1;var Xi=Xn.get(te);if(Xi&&Xn.get(Oe))return Xi==Oe;var eo=-1,uo=!0,ur=st&a?new Vi:void 0;for(Xn.set(te,Oe),Xn.set(Oe,te);++eo<or;){var pr=te[eo],co=Oe[eo];if(jt)var Go=$i?jt(co,pr,eo,Oe,te,Xn):jt(pr,co,eo,te,Oe,Xn);if(Go!==void 0){if(Go)continue;uo=!1;break}if(ur){if(!on(Oe,function(zr,Ys){if(!$n(ur,Ys)&&(pr===zr||Si(pr,zr,st,jt,Xn)))return ur.push(Ys)})){uo=!1;break}}else if(!(pr===co||Si(pr,co,st,jt,Xn))){uo=!1;break}}return Xn.delete(te),Xn.delete(Oe),uo}function Ss(te,Oe,st,jt,Si,Xn,$i){switch(st){case Be:if(te.byteLength!=Oe.byteLength||te.byteOffset!=Oe.byteOffset)return!1;te=te.buffer,Oe=Oe.buffer;case Me:return!(te.byteLength!=Oe.byteLength||!Xn(new De(te),new De(Oe)));case S:case O:case Q:return Eo(+te,+Oe);case U:return te.name==Oe.name&&te.message==Oe.message;case Z:case W:return te==Oe+"";case j:var or=Bn;case oe:var Di=jt&r;if(or||(or=Bi),te.size!=Oe.size&&!Di)return!1;var Xi=$i.get(te);if(Xi)return Xi==Oe;jt|=a,$i.set(te,Oe);var eo=yl(or(te),or(Oe),jt,Si,Xn,$i);return $i.delete(te),eo;case ue:if(lo)return lo.call(te)==lo.call(Oe)}return!1}function bc(te,Oe,st,jt,Si,Xn){var $i=st&r,or=Qs(te),Di=or.length,Xi=Qs(Oe),eo=Xi.length;if(Di!=eo&&!$i)return!1;for(var uo=Di;uo--;){var ur=or[uo];if(!($i?ur in Oe:le.call(Oe,ur)))return!1}var pr=Xn.get(te);if(pr&&Xn.get(Oe))return pr==Oe;var co=!0;Xn.set(te,Oe),Xn.set(Oe,te);for(var Go=$i;++uo<Di;){ur=or[uo];var zr=te[ur],Ys=Oe[ur];if(jt)var Ll=$i?jt(Ys,zr,ur,Oe,te,Xn):jt(zr,Ys,ur,te,Oe,Xn);if(!(Ll===void 0?zr===Ys||Si(zr,Ys,st,jt,Xn):Ll)){co=!1;break}Go||(Go=ur=="constructor")}if(co&&!Go){var qA=te.constructor,fs=Oe.constructor;qA!=fs&&"constructor"in te&&"constructor"in Oe&&!(typeof qA=="function"&&qA instanceof qA&&typeof fs=="function"&&fs instanceof fs)&&(co=!1)}return Xn.delete(te),Xn.delete(Oe),co}function Qs(te){return Jr(te,Zi,Kl)}function $o(te,Oe){var st=te.__data__;return bA(Oe)?st[typeof Oe=="string"?"string":"hash"]:st.map}function ko(te,Oe){var st=On(te,Oe);return Qi(st)?st:void 0}function dr(te){var Oe=le.call(te,gt),st=te[gt];try{te[gt]=void 0;var jt=!0}catch{}var Si=Te.call(te);return jt&&(Oe?te[gt]=st:delete te[gt]),Si}var Kl=ht?function(te){return te==null?[]:(te=Object(te),qt(ht(te),function(Oe){return Ze.call(te,Oe)}))}:Mi,ga=wo;(en&&ga(new en(new ArrayBuffer(1)))!=Be||Dn&&ga(new Dn)!=j||Mn&&ga(Mn.resolve())!=ae||ii&&ga(new ii)!=oe||Wn&&ga(new Wn)!=ye)&&(ga=function(te){var Oe=wo(te),st=Oe==V?te.constructor:void 0,jt=st?No(st):"";if(jt)switch(jt){case er:return Be;case wi:return j;case hi:return ae;case ti:return oe;case Wi:return ye}return Oe});function Ul(te,Oe){return Oe=Oe??l,!!Oe&&(typeof te=="number"||It.test(te))&&te>-1&&te%1==0&&te<Oe}function bA(te){var Oe=typeof te;return Oe=="string"||Oe=="number"||Oe=="symbol"||Oe=="boolean"?te!=="__proto__":te===null}function br(te){return!!me&&me in te}function iA(te){var Oe=te&&te.constructor,st=typeof Oe=="function"&&Oe.prototype||Ge;return te===st}function cu(te){return Te.call(te)}function No(te){if(te!=null){try{return re.call(te)}catch{}try{return te+""}catch{}}return""}function Eo(te,Oe){return te===Oe||te!==te&&Oe!==Oe}var Fa=As(function(){return arguments}())?As:function(te){return Dr(te)&&le.call(te,"callee")&&!Ze.call(te,"callee")},Sa=Array.isArray;function oa(te){return te!=null&&Za(te.length)&&!za(te)}var kr=kt||Qr;function rA(te,Oe){return Us(te,Oe)}function za(te){if(!ya(te))return!1;var Oe=wo(te);return Oe==K||Oe==z||Oe==C||Oe==ne}function Za(te){return typeof te=="number"&&te>-1&&te%1==0&&te<=l}function ya(te){var Oe=typeof te;return te!=null&&(Oe=="object"||Oe=="function")}function Dr(te){return te!=null&&typeof te=="object"}var vl=Ot?Wt(Ot):Du;function Zi(te){return oa(te)?rn(te):_A(te)}function Mi(){return[]}function Qr(){return!1}n.exports=rA}(WC,WC.exports)),WC.exports}var Afe=lfe();const SB=WA(Afe);function Lr(){var n="/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",e="77d2098743f5a64765174c6e14fc4dc25f900f6c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",statementMap:{0:{start:{line:10,column:4},end:{line:11,column:7}},1:{start:{line:12,column:4},end:{line:13,column:7}},2:{start:{line:14,column:4},end:{line:14,column:23}},3:{start:{line:15,column:4},end:{line:15,column:28}},4:{start:{line:16,column:4},end:{line:16,column:90}},5:{start:{line:19,column:28},end:{line:19,column:48}},6:{start:{line:20,column:4},end:{line:22,column:7}},7:{start:{line:21,column:6},end:{line:21,column:88}},8:{start:{line:23,column:4},end:{line:25,column:5}},9:{start:{line:24,column:6},end:{line:24,column:42}},10:{start:{line:26,column:4},end:{line:26,column:48}},11:{start:{line:29,column:33},end:{line:29,column:58}},12:{start:{line:30,column:4},end:{line:43,column:7}},13:{start:{line:31,column:6},end:{line:42,column:9}},14:{start:{line:32,column:32},end:{line:32,column:71}},15:{start:{line:33,column:23},end:{line:33,column:53}},16:{start:{line:34,column:8},end:{line:40,column:11}},17:{start:{line:35,column:10},end:{line:39,column:13}},18:{start:{line:36,column:40},end:{line:36,column:75}},19:{start:{line:37,column:12},end:{line:37,column:71}},20:{start:{line:38,column:12},end:{line:38,column:64}},21:{start:{line:41,column:8},end:{line:41,column:60}},22:{start:{line:44,column:4},end:{line:46,column:5}},23:{start:{line:45,column:6},end:{line:45,column:52}},24:{start:{line:50,column:4},end:{line:50,column:25}},25:{start:{line:53,column:4},end:{line:53,column:30}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:25},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:52},end:{line:10,column:53}},loc:{start:{line:10,column:58},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:62},end:{line:12,column:63}},loc:{start:{line:12,column:68},end:{line:13,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:18},end:{line:27,column:3}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:20,column:48},end:{line:20,column:49}},loc:{start:{line:20,column:62},end:{line:22,column:5}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:28,column:2},end:{line:28,column:3}},loc:{start:{line:28,column:32},end:{line:47,column:3}},line:28},6:{name:"(anonymous_6)",decl:{start:{line:30,column:39},end:{line:30,column:40}},loc:{start:{line:30,column:53},end:{line:43,column:5}},line:30},7:{name:"(anonymous_7)",decl:{start:{line:31,column:46},end:{line:31,column:47}},loc:{start:{line:31,column:65},end:{line:42,column:7}},line:31},8:{name:"(anonymous_8)",decl:{start:{line:34,column:58},end:{line:34,column:59}},loc:{start:{line:34,column:71},end:{line:40,column:9}},line:34},9:{name:"(anonymous_9)",decl:{start:{line:35,column:50},end:{line:35,column:51}},loc:{start:{line:35,column:68},end:{line:39,column:11}},line:35},10:{name:"(anonymous_10)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:16},end:{line:51,column:3}},line:49},11:{name:"(anonymous_11)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:21},end:{line:54,column:3}},line:52}},branchMap:{0:{loc:{start:{line:9,column:14},end:{line:9,column:23}},type:"default-arg",locations:[{start:{line:9,column:21},end:{line:9,column:23}}],line:9},1:{loc:{start:{line:10,column:27},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:27},end:{line:10,column:47}},{start:{line:10,column:52},end:{line:11,column:5}}],line:10},2:{loc:{start:{line:12,column:32},end:{line:13,column:6}},type:"binary-expr",locations:[{start:{line:12,column:32},end:{line:12,column:57}},{start:{line:12,column:62},end:{line:13,column:5}}],line:12},3:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},4:{loc:{start:{line:31,column:7},end:{line:31,column:36}},type:"binary-expr",locations:[{start:{line:31,column:7},end:{line:31,column:30}},{start:{line:31,column:34},end:{line:31,column:36}}],line:31},5:{loc:{start:{line:32,column:32},end:{line:32,column:71}},type:"binary-expr",locations:[{start:{line:32,column:32},end:{line:32,column:65}},{start:{line:32,column:69},end:{line:32,column:71}}],line:32},6:{loc:{start:{line:36,column:40},end:{line:36,column:75}},type:"binary-expr",locations:[{start:{line:36,column:40},end:{line:36,column:69}},{start:{line:36,column:73},end:{line:36,column:75}}],line:36},7:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,aAAa;AAUpB,qBAAqB,aAAa;AAAA,EAChC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAA4B,CAAC,GAAG;AAC1C,SAAK,kBAAkB,KAAK,oBAAoB,MAAM;AAAA,IAAC;AACvD,SAAK,uBAAuB,KAAK,yBAAyB,MAAM;AAAA,IAAC;AAEjE,SAAK,WAAW,CAAC;AACjB,SAAK,gBAAgB,CAAC;AAKtB,SAAK,oCAAoC,SAAS,KAAK,0BAA0B,GAAI;AAAA,EACvF;AAAA,EAEA,WAAW,KAAU;AACnB,UAAM,kBAAkB,EAAE,GAAG,KAAK,SAAS;AAE3C,WAAO,KAAK,IAAI,MAAM,YAAY,EAAE,QAAQ,cAAY;AAGtD,WAAK,SAAS,QAAQ,IAAI,IAAI,MAAM,aAAa,QAAQ,EAAE,QAAQ;AAAA,IACrE,CAAC;AAED,QAAG,CAAC,QAAQ,iBAAiB,KAAK,QAAQ,GAAG;AAC3C,WAAK,gBAAgB,KAAK,QAAQ;AAAA,IACpC;AAEA,SAAK,kCAAkC,GAAG;AAAA,EAC5C;AAAA,EAEA,yBAAyB,KAAU;AACjC,UAAM,uBAAuB,EAAE,GAAG,KAAK,cAAc;AAErD,WAAO,KAAK,KAAK,QAAQ,EAAE,QAAQ,cAAY;AAC7C,OAAC,KAAK,SAAS,QAAQ,KAAK,CAAC,GAAG,QAAQ,mBAAiB;AACvD,cAAM,kBAAkB,KAAK,cAAc,aAAa,KAAK,CAAC;AAC9D,cAAM,SAAS,EAAE,aAAa,cAAc;AAC5C,YAAI,oBAAoB,UAAU,MAAa,EAAE,QAAQ,aAAW;AAClE,iBAAO,KAAK,QAAQ,UAAU,EAAE,QAAQ,kBAAgB;AACtD,kBAAM,sBAAsB,gBAAgB,YAAY,KAAK,CAAC;AAC9D,gCAAoB,QAAQ,WAAW,YAAY,CAAC,IAAI,CAAC;AACzD,4BAAgB,YAAY,IAAI;AAAA,UAClC,CAAC;AAAA,QACH,CAAC;AAED,aAAK,cAAc,aAAa,IAAI;AAAA,MACtC,CAAC;AAAA,IACH,CAAC;AAED,QAAG,CAAC,QAAQ,sBAAsB,KAAK,aAAa,GAAG;AACrD,WAAK,qBAAqB,KAAK,aAAa;AAAA,IAC9C;AAAA,EAEF;AAAA;AAAA,EAGA,IAAI,UAAU;AACZ,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,eAAe;AACjB,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"77d2098743f5a64765174c6e14fc4dc25f900f6c"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Lr=function(){return l},l}Lr();class ufe{onSourcesChange;onVectorLayersChange;throttledAnalyzeVectorLayerFields;_sources;_vectorLayers;constructor(e=(Lr().b[0][0]++,{})){Lr().f[0]++,Lr().s[0]++,this.onSourcesChange=(Lr().b[1][0]++,e.onSourcesChange||(Lr().b[1][1]++,()=>{Lr().f[1]++})),Lr().s[1]++,this.onVectorLayersChange=(Lr().b[2][0]++,e.onVectorLayersChange||(Lr().b[2][1]++,()=>{Lr().f[2]++})),Lr().s[2]++,this._sources={},Lr().s[3]++,this._vectorLayers={},Lr().s[4]++,this.throttledAnalyzeVectorLayerFields=sfe(this.analyzeVectorLayerFields,5e3)}analyzeMap(e){Lr().f[3]++;const t=(Lr().s[5]++,{...this._sources});Lr().s[6]++,Object.keys(e.style.sourceCaches).forEach(i=>{Lr().f[4]++,Lr().s[7]++,this._sources[i]=e.style.sourceCaches[i]._source.vectorLayerIds}),Lr().s[8]++,SB(t,this._sources)?Lr().b[3][1]++:(Lr().b[3][0]++,Lr().s[9]++,this.onSourcesChange(this._sources)),Lr().s[10]++,this.throttledAnalyzeVectorLayerFields(e)}analyzeVectorLayerFields(e){Lr().f[5]++;const t=(Lr().s[11]++,{...this._vectorLayers});Lr().s[12]++,Object.keys(this._sources).forEach(i=>{Lr().f[6]++,Lr().s[13]++,(Lr().b[4][0]++,this._sources[i]||(Lr().b[4][1]++,[])).forEach(r=>{Lr().f[7]++;const a=(Lr().s[14]++,Lr().b[5][0]++,this._vectorLayers[r]||(Lr().b[5][1]++,{})),l=(Lr().s[15]++,{sourceLayer:r});Lr().s[16]++,e.querySourceFeatures(i,l).forEach(o=>{Lr().f[8]++,Lr().s[17]++,Object.keys(o.properties).forEach(m=>{Lr().f[9]++;const C=(Lr().s[18]++,Lr().b[6][0]++,a[m]||(Lr().b[6][1]++,{}));Lr().s[19]++,C[o.properties[m]]={},Lr().s[20]++,a[m]=C})}),Lr().s[21]++,this._vectorLayers[r]=a})}),Lr().s[22]++,SB(t,this._vectorLayers)?Lr().b[7][1]++:(Lr().b[7][0]++,Lr().s[23]++,this.onVectorLayersChange(this._vectorLayers))}get sources(){return Lr().f[10]++,Lr().s[24]++,this._sources}get vectorLayers(){return Lr().f[11]++,Lr().s[25]++,this._vectorLayers}}function Ie(){var n="/home/runner/work/maputnik/maputnik/src/components/App.tsx",e="d77b464e77665bdbe41b0615e107d5b288737dd7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/App.tsx",statementMap:{0:{start:{line:33,column:0},end:{line:33,column:30}},1:{start:{line:35,column:29},end:{line:35,column:60}},2:{start:{line:36,column:26},end:{line:36,column:54}},3:{start:{line:37,column:31},end:{line:37,column:64}},4:{start:{line:38,column:28},end:{line:38,column:58}},5:{start:{line:39,column:2},end:{line:56,column:3}},6:{start:{line:40,column:24},end:{line:40,column:95}},7:{start:{line:41,column:4},end:{line:43,column:5}},8:{start:{line:42,column:6},end:{line:42,column:47}},9:{start:{line:44,column:9},end:{line:56,column:3}},10:{start:{line:45,column:24},end:{line:45,column:96}},11:{start:{line:46,column:4},end:{line:48,column:5}},12:{start:{line:47,column:6},end:{line:47,column:47}},13:{start:{line:49,column:9},end:{line:56,column:3}},14:{start:{line:50,column:24},end:{line:50,column:93}},15:{start:{line:51,column:4},end:{line:53,column:5}},16:{start:{line:52,column:6},end:{line:52,column:47}},17:{start:{line:55,column:4},end:{line:55,column:15}},18:{start:{line:59,column:2},end:{line:68,column:4}},19:{start:{line:72,column:15},end:{line:72,column:19}},20:{start:{line:75,column:4},end:{line:75,column:17}},21:{start:{line:76,column:4},end:{line:76,column:45}},22:{start:{line:77,column:4},end:{line:77,column:38}},23:{start:{line:78,column:4},end:{line:111,column:6}},24:{start:{line:112,column:4},end:{line:114,column:7}},25:{start:{line:113,column:35},end:{line:113,column:69}},26:{start:{line:116,column:31},end:{line:183,column:3}},27:{start:{line:117,column:22},end:{line:168,column:5}},28:{start:{line:121,column:10},end:{line:121,column:40}},29:{start:{line:127,column:10},end:{line:127,column:35}},30:{start:{line:133,column:10},end:{line:133,column:37}},31:{start:{line:139,column:10},end:{line:139,column:38}},32:{start:{line:145,column:10},end:{line:145,column:39}},33:{start:{line:151,column:10},end:{line:153,column:12}},34:{start:{line:159,column:10},end:{line:159,column:63}},35:{start:{line:165,column:10},end:{line:165,column:36}},36:{start:{line:169,column:4},end:{line:182,column:7}},37:{start:{line:170,column:6},end:{line:181,column:7}},38:{start:{line:171,column:8},end:{line:171,column:24}},39:{start:{line:172,column:8},end:{line:172,column:30}},40:{start:{line:173,column:13},end:{line:181,column:7}},41:{start:{line:174,column:25},end:{line:176,column:10}},42:{start:{line:175,column:10},end:{line:175,column:41}},43:{start:{line:177,column:8},end:{line:180,column:9}},44:{start:{line:178,column:10},end:{line:178,column:44}},45:{start:{line:179,column:10},end:{line:179,column:29}},46:{start:{line:184,column:19},end:{line:202,column:3}},47:{start:{line:185,column:4},end:{line:201,column:5}},48:{start:{line:186,column:6},end:{line:192,column:7}},49:{start:{line:187,column:8},end:{line:187,column:27}},50:{start:{line:188,column:8},end:{line:188,column:22}},51:{start:{line:189,column:13},end:{line:192,column:7}},52:{start:{line:190,column:8},end:{line:190,column:27}},53:{start:{line:191,column:8},end:{line:191,column:22}},54:{start:{line:194,column:6},end:{line:200,column:7}},55:{start:{line:195,column:8},end:{line:195,column:27}},56:{start:{line:196,column:8},end:{line:196,column:22}},57:{start:{line:197,column:13},end:{line:200,column:7}},58:{start:{line:198,column:8},end:{line:198,column:27}},59:{start:{line:199,column:8},end:{line:199,column:22}},60:{start:{line:204,column:4},end:{line:204,column:102}},61:{start:{line:204,column:65},end:{line:204,column:100}},62:{start:{line:205,column:4},end:{line:205,column:60}},63:{start:{line:208,column:4},end:{line:208,column:63}},64:{start:{line:211,column:4},end:{line:211,column:41}},65:{start:{line:214,column:21},end:{line:214,column:55}},66:{start:{line:215,column:24},end:{line:215,column:93}},67:{start:{line:216,column:21},end:{line:216,column:110}},68:{start:{line:217,column:4},end:{line:219,column:7}},69:{start:{line:218,column:6},end:{line:218,column:80}},70:{start:{line:222,column:4},end:{line:224,column:7}},71:{start:{line:223,column:6},end:{line:223,column:80}},72:{start:{line:226,column:29},end:{line:240,column:3}},73:{start:{line:227,column:4},end:{line:231,column:5}},74:{start:{line:228,column:6},end:{line:230,column:9}},75:{start:{line:232,column:25},end:{line:238,column:5}},76:{start:{line:239,column:4},end:{line:239,column:38}},77:{start:{line:241,column:19},end:{line:364,column:3}},78:{start:{line:242,column:4},end:{line:247,column:6}},79:{start:{line:248,column:4},end:{line:250,column:5}},80:{start:{line:249,column:6},end:{line:249,column:71}},81:{start:{line:251,column:4},end:{line:253,column:5}},82:{start:{line:252,column:6},end:{line:252,column:71}},83:{start:{line:254,column:4},end:{line:258,column:5}},84:{start:{line:255,column:6},end:{line:257,column:7}},85:{start:{line:256,column:8},end:{line:256,column:63}},86:{start:{line:259,column:4},end:{line:261,column:5}},87:{start:{line:260,column:6},end:{line:260,column:44}},88:{start:{line:262,column:19},end:{line:262,column:51}},89:{start:{line:263,column:24},end:{line:263,column:26}},90:{start:{line:264,column:4},end:{line:275,column:5}},91:{start:{line:265,column:26},end:{line:265,column:42}},92:{start:{line:266,column:6},end:{line:274,column:9}},93:{start:{line:267,column:8},end:{line:272,column:9}},94:{start:{line:268,column:24},end:{line:270,column:11}},95:{start:{line:271,column:10},end:{line:271,column:34}},96:{start:{line:273,column:8},end:{line:273,column:40}},97:{start:{line:276,column:25},end:{line:327,column:6}},98:{start:{line:277,column:23},end:{line:277,column:109}},99:{start:{line:278,column:6},end:{line:291,column:7}},100:{start:{line:279,column:35},end:{line:279,column:43}},101:{start:{line:280,column:8},end:{line:290,column:10}},102:{start:{line:292,column:33},end:{line:292,column:100}},103:{start:{line:293,column:6},end:{line:306,column:7}},104:{start:{line:294,column:35},end:{line:294,column:53}},105:{start:{line:295,column:8},end:{line:305,column:10}},106:{start:{line:307,column:25},end:{line:307,column:88}},107:{start:{line:308,column:6},end:{line:326,column:7}},108:{start:{line:309,column:52},end:{line:309,column:62}},109:{start:{line:310,column:20},end:{line:310,column:78}},110:{start:{line:311,column:8},end:{line:321,column:10}},111:{start:{line:323,column:8},end:{line:325,column:10}},112:{start:{line:328,column:24},end:{line:328,column:30}},113:{start:{line:329,column:4},end:{line:343,column:5}},114:{start:{line:330,column:6},end:{line:330,column:42}},115:{start:{line:331,column:6},end:{line:342,column:7}},116:{start:{line:332,column:28},end:{line:332,column:33}},117:{start:{line:333,column:8},end:{line:341,column:9}},118:{start:{line:334,column:10},end:{line:340,column:11}},119:{start:{line:335,column:28},end:{line:335,column:49}},120:{start:{line:336,column:30},end:{line:336,column:69}},121:{start:{line:337,column:12},end:{line:337,column:44}},122:{start:{line:339,column:12},end:{line:339,column:46}},123:{start:{line:344,column:4},end:{line:346,column:5}},124:{start:{line:345,column:6},end:{line:345,column:40}},125:{start:{line:347,column:4},end:{line:349,column:5}},126:{start:{line:348,column:6},end:{line:348,column:40}},127:{start:{line:350,column:4},end:{line:352,column:5}},128:{start:{line:351,column:6},end:{line:351,column:47}},129:{start:{line:353,column:4},end:{line:355,column:5}},130:{start:{line:354,column:6},end:{line:354,column:31}},131:{start:{line:356,column:4},end:{line:363,column:7}},132:{start:{line:361,column:6},end:{line:361,column:26}},133:{start:{line:362,column:6},end:{line:362,column:27}},134:{start:{line:365,column:11},end:{line:372,column:3}},135:{start:{line:366,column:24},end:{line:366,column:49}},136:{start:{line:367,column:21},end:{line:367,column:67}},137:{start:{line:368,column:4},end:{line:368,column:61}},138:{start:{line:369,column:4},end:{line:371,column:7}},139:{start:{line:373,column:11},end:{line:380,column:3}},140:{start:{line:374,column:24},end:{line:374,column:49}},141:{start:{line:375,column:21},end:{line:375,column:67}},142:{start:{line:376,column:4},end:{line:376,column:61}},143:{start:{line:377,column:4},end:{line:379,column:7}},144:{start:{line:381,column:16},end:{line:395,column:3}},145:{start:{line:382,column:33},end:{line:382,column:37}},146:{start:{line:383,column:17},end:{line:383,column:43}},147:{start:{line:384,column:4},end:{line:384,column:53}},148:{start:{line:385,column:4},end:{line:385,column:53}},149:{start:{line:386,column:4},end:{line:386,column:38}},150:{start:{line:386,column:31},end:{line:386,column:38}},151:{start:{line:387,column:4},end:{line:391,column:5}},152:{start:{line:388,column:6},end:{line:390,column:9}},153:{start:{line:392,column:4},end:{line:392,column:29}},154:{start:{line:393,column:4},end:{line:393,column:49}},155:{start:{line:394,column:4},end:{line:394,column:32}},156:{start:{line:396,column:19},end:{line:402,column:3}},157:{start:{line:397,column:25},end:{line:400,column:5}},158:{start:{line:401,column:4},end:{line:401,column:38}},159:{start:{line:403,column:19},end:{line:408,column:3}},160:{start:{line:404,column:19},end:{line:404,column:45}},161:{start:{line:405,column:28},end:{line:405,column:43}},162:{start:{line:406,column:4},end:{line:406,column:37}},163:{start:{line:407,column:4},end:{line:407,column:41}},164:{start:{line:409,column:16},end:{line:416,column:3}},165:{start:{line:410,column:19},end:{line:410,column:45}},166:{start:{line:411,column:26},end:{line:411,column:41}},167:{start:{line:412,column:24},end:{line:412,column:55}},168:{start:{line:413,column:4},end:{line:413,column:46}},169:{start:{line:414,column:4},end:{line:414,column:48}},170:{start:{line:415,column:4},end:{line:415,column:39}},171:{start:{line:417,column:28},end:{line:426,column:3}},172:{start:{line:418,column:19},end:{line:418,column:45}},173:{start:{line:419,column:26},end:{line:419,column:41}},174:{start:{line:420,column:18},end:{line:420,column:45}},175:{start:{line:421,column:26},end:{line:421,column:70}},176:{start:{line:422,column:4},end:{line:422,column:88}},177:{start:{line:423,column:4},end:{line:423,column:33}},178:{start:{line:424,column:4},end:{line:424,column:33}},179:{start:{line:425,column:4},end:{line:425,column:39}},180:{start:{line:427,column:20},end:{line:434,column:3}},181:{start:{line:428,column:26},end:{line:428,column:61}},182:{start:{line:429,column:4},end:{line:432,column:6}},183:{start:{line:433,column:4},end:{line:433,column:39}},184:{start:{line:435,column:19},end:{line:439,column:3}},185:{start:{line:436,column:26},end:{line:436,column:61}},186:{start:{line:437,column:4},end:{line:437,column:33}},187:{start:{line:438,column:4},end:{line:438,column:39}},188:{start:{line:440,column:16},end:{line:444,column:3}},189:{start:{line:441,column:4},end:{line:443,column:27}},190:{start:{line:445,column:21},end:{line:459,column:3}},191:{start:{line:446,column:21},end:{line:446,column:44}},192:{start:{line:447,column:4},end:{line:458,column:5}},193:{start:{line:448,column:27},end:{line:454,column:7}},194:{start:{line:455,column:6},end:{line:455,column:26}},195:{start:{line:457,column:6},end:{line:457,column:22}},196:{start:{line:460,column:14},end:{line:464,column:3}},197:{start:{line:461,column:4},end:{line:461,column:34}},198:{start:{line:462,column:4},end:{line:462,column:47}},199:{start:{line:463,column:4},end:{line:463,column:34}},200:{start:{line:466,column:23},end:{line:466,column:25}},201:{start:{line:467,column:4},end:{line:506,column:5}},202:{start:{line:468,column:21},end:{line:468,column:53}},203:{start:{line:469,column:6},end:{line:505,column:7}},204:{start:{line:470,column:8},end:{line:470,column:93}},205:{start:{line:471,column:8},end:{line:473,column:9}},206:{start:{line:472,column:10},end:{line:472,column:38}},207:{start:{line:475,column:8},end:{line:478,column:10}},208:{start:{line:479,column:18},end:{line:479,column:28}},209:{start:{line:480,column:8},end:{line:484,column:9}},210:{start:{line:481,column:10},end:{line:481,column:62}},211:{start:{line:483,column:10},end:{line:483,column:63}},212:{start:{line:485,column:32},end:{line:492,column:9}},213:{start:{line:486,column:10},end:{line:488,column:11}},214:{start:{line:487,column:12},end:{line:487,column:19}},215:{start:{line:489,column:10},end:{line:491,column:11}},216:{start:{line:490,column:12},end:{line:490,column:50}},217:{start:{line:493,column:8},end:{line:504,column:9}},218:{start:{line:494,column:10},end:{line:501,column:11}},219:{start:{line:495,column:25},end:{line:495,column:77}},220:{start:{line:496,column:12},end:{line:496,column:34}},221:{start:{line:498,column:29},end:{line:498,column:63}},222:{start:{line:499,column:25},end:{line:499,column:46}},223:{start:{line:500,column:12},end:{line:500,column:34}},224:{start:{line:503,column:10},end:{line:503,column:78}},225:{start:{line:507,column:4},end:{line:512,column:5}},226:{start:{line:508,column:6},end:{line:508,column:51}},227:{start:{line:509,column:6},end:{line:511,column:9}},228:{start:{line:515,column:21},end:{line:515,column:55}},229:{start:{line:516,column:4},end:{line:516,column:53}},230:{start:{line:518,column:16},end:{line:522,column:3}},231:{start:{line:519,column:4},end:{line:521,column:7}},232:{start:{line:524,column:40},end:{line:524,column:50}},233:{start:{line:525,column:21},end:{line:536,column:5}},234:{start:{line:528,column:8},end:{line:530,column:11}},235:{start:{line:533,column:8},end:{line:533,column:44}},236:{start:{line:534,column:8},end:{line:534,column:28}},237:{start:{line:537,column:21},end:{line:537,column:40}},238:{start:{line:539,column:4},end:{line:561,column:5}},239:{start:{line:540,column:6},end:{line:548,column:8}},240:{start:{line:546,column:38},end:{line:546,column:66}},241:{start:{line:550,column:6},end:{line:560,column:8}},242:{start:{line:563,column:4},end:{line:565,column:5}},243:{start:{line:564,column:6},end:{line:564,column:63}},244:{start:{line:566,column:25},end:{line:566,column:27}},245:{start:{line:567,column:4},end:{line:569,column:5}},246:{start:{line:568,column:6},end:{line:568,column:52}},247:{start:{line:570,column:4},end:{line:570,column:160}},248:{start:{line:572,column:18},end:{line:590,column:3}},249:{start:{line:573,column:43},end:{line:573,column:53}},250:{start:{line:574,column:35},end:{line:574,column:45}},251:{start:{line:575,column:16},end:{line:575,column:38}},252:{start:{line:576,column:20},end:{line:576,column:50}},253:{start:{line:577,column:4},end:{line:577,column:70}},254:{start:{line:578,column:23},end:{line:578,column:122}},255:{start:{line:578,column:66},end:{line:578,column:91}},256:{start:{line:578,column:109},end:{line:578,column:121}},257:{start:{line:579,column:4},end:{line:583,column:5}},258:{start:{line:580,column:6},end:{line:580,column:58}},259:{start:{line:582,column:6},end:{line:582,column:39}},260:{start:{line:584,column:4},end:{line:588,column:5}},261:{start:{line:585,column:6},end:{line:585,column:38}},262:{start:{line:586,column:11},end:{line:588,column:5}},263:{start:{line:587,column:6},end:{line:587,column:46}},264:{start:{line:589,column:4},end:{line:589,column:71}},265:{start:{line:591,column:27},end:{line:636,column:3}},266:{start:{line:592,column:16},end:{line:592,column:38}},267:{start:{line:593,column:23},end:{line:593,column:52}},268:{start:{line:594,column:4},end:{line:606,column:5}},269:{start:{line:595,column:21},end:{line:595,column:42}},270:{start:{line:596,column:23},end:{line:596,column:25}},271:{start:{line:597,column:6},end:{line:599,column:9}},272:{start:{line:598,column:8},end:{line:598,column:35}},273:{start:{line:600,column:6},end:{line:605,column:9}},274:{start:{line:607,column:17},end:{line:607,column:45}},275:{start:{line:608,column:4},end:{line:610,column:5}},276:{start:{line:609,column:6},end:{line:609,column:29}},277:{start:{line:611,column:17},end:{line:611,column:46}},278:{start:{line:612,column:4},end:{line:635,column:5}},279:{start:{line:613,column:6},end:{line:634,column:7}},280:{start:{line:614,column:22},end:{line:614,column:37}},281:{start:{line:615,column:46},end:{line:618,column:9}},282:{start:{line:619,column:20},end:{line:619,column:24}},283:{start:{line:620,column:8},end:{line:625,column:9}},284:{start:{line:621,column:33},end:{line:621,column:63}},285:{start:{line:622,column:10},end:{line:624,column:11}},286:{start:{line:623,column:12},end:{line:623,column:26}},287:{start:{line:626,column:8},end:{line:631,column:9}},288:{start:{line:627,column:10},end:{line:630,column:13}},289:{start:{line:633,column:8},end:{line:633,column:26}},290:{start:{line:637,column:18},end:{line:642,column:3}},291:{start:{line:638,column:4},end:{line:641,column:27}},292:{start:{line:644,column:4},end:{line:649,column:27}},293:{start:{line:652,column:4},end:{line:652,column:60}},294:{start:{line:654,column:20},end:{line:656,column:3}},295:{start:{line:655,column:4},end:{line:655,column:34}},296:{start:{line:657,column:28},end:{line:664,column:3}},297:{start:{line:658,column:4},end:{line:663,column:7}},298:{start:{line:665,column:28},end:{line:672,column:3}},299:{start:{line:666,column:4},end:{line:671,column:7}},300:{start:{line:674,column:19},end:{line:674,column:51}},301:{start:{line:675,column:26},end:{line:675,column:92}},302:{start:{line:676,column:36},end:{line:689,column:5}},303:{start:{line:690,column:38},end:{line:704,column:5}},304:{start:{line:705,column:24},end:{line:724,column:14}},305:{start:{line:725,column:24},end:{line:735,column:14}},306:{start:{line:736,column:35},end:{line:796,column:8}},307:{start:{line:797,column:4},end:{line:807,column:6}}},fnMap:{0:{name:"setFetchAccessToken",decl:{start:{line:34,column:9},end:{line:34,column:28}},loc:{start:{line:34,column:44},end:{line:57,column:1}},line:34},1:{name:"updateRootSpec",decl:{start:{line:58,column:9},end:{line:58,column:23}},loc:{start:{line:58,column:52},end:{line:69,column:1}},line:58},2:{name:"(anonymous_2)",decl:{start:{line:74,column:2},end:{line:74,column:3}},loc:{start:{line:74,column:21},end:{line:115,column:3}},line:74},3:{name:"(anonymous_3)",decl:{start:{line:113,column:28},end:{line:113,column:29}},loc:{start:{line:113,column:35},end:{line:113,column:69}},line:113},4:{name:"(anonymous_4)",decl:{start:{line:116,column:31},end:{line:116,column:32}},loc:{start:{line:116,column:37},end:{line:183,column:3}},line:116},5:{name:"(anonymous_5)",decl:{start:{line:120,column:17},end:{line:120,column:18}},loc:{start:{line:120,column:23},end:{line:122,column:9}},line:120},6:{name:"(anonymous_6)",decl:{start:{line:126,column:17},end:{line:126,column:18}},loc:{start:{line:126,column:23},end:{line:128,column:9}},line:126},7:{name:"(anonymous_7)",decl:{start:{line:132,column:17},end:{line:132,column:18}},loc:{start:{line:132,column:23},end:{line:134,column:9}},line:132},8:{name:"(anonymous_8)",decl:{start:{line:138,column:17},end:{line:138,column:18}},loc:{start:{line:138,column:23},end:{line:140,column:9}},line:138},9:{name:"(anonymous_9)",decl:{start:{line:144,column:17},end:{line:144,column:18}},loc:{start:{line:144,column:23},end:{line:146,column:9}},line:144},10:{name:"(anonymous_10)",decl:{start:{line:150,column:17},end:{line:150,column:18}},loc:{start:{line:150,column:23},end:{line:154,column:9}},line:150},11:{name:"(anonymous_11)",decl:{start:{line:158,column:17},end:{line:158,column:18}},loc:{start:{line:158,column:23},end:{line:160,column:9}},line:158},12:{name:"(anonymous_12)",decl:{start:{line:164,column:17},end:{line:164,column:18}},loc:{start:{line:164,column:23},end:{line:166,column:9}},line:164},13:{name:"(anonymous_13)",decl:{start:{line:169,column:44},end:{line:169,column:45}},loc:{start:{line:169,column:51},end:{line:182,column:5}},line:169},14:{name:"(anonymous_14)",decl:{start:{line:174,column:40},end:{line:174,column:41}},loc:{start:{line:174,column:55},end:{line:176,column:9}},line:174},15:{name:"(anonymous_15)",decl:{start:{line:184,column:19},end:{line:184,column:20}},loc:{start:{line:184,column:26},end:{line:202,column:3}},line:184},16:{name:"(anonymous_16)",decl:{start:{line:203,column:2},end:{line:203,column:3}},loc:{start:{line:203,column:28},end:{line:206,column:3}},line:203},17:{name:"(anonymous_17)",decl:{start:{line:204,column:45},end:{line:204,column:46}},loc:{start:{line:204,column:65},end:{line:204,column:100}},line:204},18:{name:"(anonymous_18)",decl:{start:{line:207,column:2},end:{line:207,column:3}},loc:{start:{line:207,column:25},end:{line:209,column:3}},line:207},19:{name:"(anonymous_19)",decl:{start:{line:210,column:2},end:{line:210,column:3}},loc:{start:{line:210,column:27},end:{line:212,column:3}},line:210},20:{name:"(anonymous_20)",decl:{start:{line:213,column:2},end:{line:213,column:3}},loc:{start:{line:213,column:27},end:{line:220,column:3}},line:213},21:{name:"(anonymous_21)",decl:{start:{line:217,column:37},end:{line:217,column:38}},loc:{start:{line:217,column:48},end:{line:219,column:5}},line:217},22:{name:"(anonymous_22)",decl:{start:{line:221,column:2},end:{line:221,column:3}},loc:{start:{line:221,column:23},end:{line:225,column:3}},line:221},23:{name:"(anonymous_23)",decl:{start:{line:222,column:36},end:{line:222,column:37}},loc:{start:{line:222,column:47},end:{line:224,column:5}},line:222},24:{name:"(anonymous_24)",decl:{start:{line:226,column:29},end:{line:226,column:30}},loc:{start:{line:226,column:50},end:{line:240,column:3}},line:226},25:{name:"(anonymous_25)",decl:{start:{line:241,column:19},end:{line:241,column:20}},loc:{start:{line:241,column:44},end:{line:364,column:3}},line:241},26:{name:"(anonymous_26)",decl:{start:{line:266,column:30},end:{line:266,column:31}},loc:{start:{line:266,column:48},end:{line:274,column:7}},line:266},27:{name:"(anonymous_27)",decl:{start:{line:276,column:56},end:{line:276,column:57}},loc:{start:{line:276,column:67},end:{line:327,column:5}},line:276},28:{name:"(anonymous_28)",decl:{start:{line:360,column:7},end:{line:360,column:8}},loc:{start:{line:360,column:13},end:{line:363,column:5}},line:360},29:{name:"(anonymous_29)",decl:{start:{line:365,column:11},end:{line:365,column:12}},loc:{start:{line:365,column:17},end:{line:372,column:3}},line:365},30:{name:"(anonymous_30)",decl:{start:{line:373,column:11},end:{line:373,column:12}},loc:{start:{line:373,column:17},end:{line:380,column:3}},line:373},31:{name:"(anonymous_31)",decl:{start:{line:381,column:16},end:{line:381,column:17}},loc:{start:{line:381,column:26},end:{line:395,column:3}},line:381},32:{name:"(anonymous_32)",decl:{start:{line:396,column:19},end:{line:396,column:20}},loc:{start:{line:396,column:38},end:{line:402,column:3}},line:396},33:{name:"(anonymous_33)",decl:{start:{line:403,column:19},end:{line:403,column:20}},loc:{start:{line:403,column:30},end:{line:408,column:3}},line:403},34:{name:"(anonymous_34)",decl:{start:{line:409,column:16},end:{line:409,column:17}},loc:{start:{line:409,column:27},end:{line:416,column:3}},line:409},35:{name:"(anonymous_35)",decl:{start:{line:417,column:28},end:{line:417,column:29}},loc:{start:{line:417,column:39},end:{line:426,column:3}},line:417},36:{name:"(anonymous_36)",decl:{start:{line:427,column:20},end:{line:427,column:21}},loc:{start:{line:427,column:46},end:{line:434,column:3}},line:427},37:{name:"(anonymous_37)",decl:{start:{line:435,column:19},end:{line:435,column:20}},loc:{start:{line:435,column:37},end:{line:439,column:3}},line:435},38:{name:"(anonymous_38)",decl:{start:{line:440,column:16},end:{line:440,column:17}},loc:{start:{line:440,column:30},end:{line:444,column:3}},line:440},39:{name:"(anonymous_39)",decl:{start:{line:445,column:21},end:{line:445,column:22}},loc:{start:{line:445,column:35},end:{line:459,column:3}},line:445},40:{name:"(anonymous_40)",decl:{start:{line:460,column:14},end:{line:460,column:15}},loc:{start:{line:460,column:40},end:{line:464,column:3}},line:460},41:{name:"(anonymous_41)",decl:{start:{line:465,column:2},end:{line:465,column:3}},loc:{start:{line:465,column:23},end:{line:513,column:3}},line:465},42:{name:"(anonymous_42)",decl:{start:{line:485,column:32},end:{line:485,column:33}},loc:{start:{line:485,column:42},end:{line:492,column:9}},line:485},43:{name:"(anonymous_43)",decl:{start:{line:514,column:2},end:{line:514,column:3}},loc:{start:{line:514,column:17},end:{line:517,column:3}},line:514},44:{name:"(anonymous_44)",decl:{start:{line:518,column:16},end:{line:518,column:17}},loc:{start:{line:518,column:29},end:{line:522,column:3}},line:518},45:{name:"(anonymous_45)",decl:{start:{line:523,column:2},end:{line:523,column:3}},loc:{start:{line:523,column:16},end:{line:571,column:3}},line:523},46:{name:"(anonymous_46)",decl:{start:{line:527,column:27},end:{line:527,column:28}},loc:{start:{line:527,column:42},end:{line:531,column:7}},line:527},47:{name:"(anonymous_47)",decl:{start:{line:532,column:20},end:{line:532,column:21}},loc:{start:{line:532,column:27},end:{line:535,column:7}},line:532},48:{name:"(anonymous_48)",decl:{start:{line:546,column:25},end:{line:546,column:26}},loc:{start:{line:546,column:38},end:{line:546,column:66}},line:546},49:{name:"(anonymous_49)",decl:{start:{line:572,column:18},end:{line:572,column:19}},loc:{start:{line:572,column:24},end:{line:590,column:3}},line:572},50:{name:"(anonymous_50)",decl:{start:{line:578,column:50},end:{line:578,column:51}},loc:{start:{line:578,column:66},end:{line:578,column:91}},line:578},51:{name:"(anonymous_51)",decl:{start:{line:578,column:100},end:{line:578,column:101}},loc:{start:{line:578,column:109},end:{line:578,column:121}},line:578},52:{name:"(anonymous_52)",decl:{start:{line:591,column:27},end:{line:591,column:28}},loc:{start:{line:591,column:41},end:{line:636,column:3}},line:591},53:{name:"(anonymous_53)",decl:{start:{line:597,column:21},end:{line:597,column:22}},loc:{start:{line:597,column:36},end:{line:599,column:7}},line:597},54:{name:"(anonymous_54)",decl:{start:{line:637,column:18},end:{line:637,column:19}},loc:{start:{line:637,column:29},end:{line:642,column:3}},line:637},55:{name:"(anonymous_55)",decl:{start:{line:643,column:2},end:{line:643,column:3}},loc:{start:{line:643,column:29},end:{line:650,column:3}},line:643},56:{name:"(anonymous_56)",decl:{start:{line:651,column:2},end:{line:651,column:3}},loc:{start:{line:651,column:25},end:{line:653,column:3}},line:651},57:{name:"(anonymous_57)",decl:{start:{line:654,column:20},end:{line:654,column:21}},loc:{start:{line:654,column:36},end:{line:656,column:3}},line:654},58:{name:"(anonymous_58)",decl:{start:{line:657,column:28},end:{line:657,column:29}},loc:{start:{line:657,column:44},end:{line:664,column:3}},line:657},59:{name:"(anonymous_59)",decl:{start:{line:665,column:28},end:{line:665,column:29}},loc:{start:{line:665,column:44},end:{line:672,column:3}},line:665},60:{name:"(anonymous_60)",decl:{start:{line:673,column:2},end:{line:673,column:3}},loc:{start:{line:673,column:11},end:{line:808,column:3}},line:673}},branchMap:{0:{loc:{start:{line:39,column:2},end:{line:56,column:3}},type:"if",locations:[{start:{line:39,column:2},end:{line:56,column:3}},{start:{line:44,column:9},end:{line:56,column:3}}],line:39},1:{loc:{start:{line:39,column:6},end:{line:39,column:43}},type:"binary-expr",locations:[{start:{line:39,column:6},end:{line:39,column:24}},{start:{line:39,column:28},end:{line:39,column:43}}],line:39},2:{loc:{start:{line:41,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:43,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:44,column:9},end:{line:56,column:3}},type:"if",locations:[{start:{line:44,column:9},end:{line:56,column:3}},{start:{line:49,column:9},end:{line:56,column:3}}],line:44},4:{loc:{start:{line:46,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:46,column:4},end:{line:48,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},5:{loc:{start:{line:49,column:9},end:{line:56,column:3}},type:"if",locations:[{start:{line:49,column:9},end:{line:56,column:3}},{start:{line:54,column:9},end:{line:56,column:3}}],line:49},6:{loc:{start:{line:51,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:53,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:51},7:{loc:{start:{line:152,column:12},end:{line:152,column:61}},type:"cond-expr",locations:[{start:{line:152,column:44},end:{line:152,column:53}},{start:{line:152,column:56},end:{line:152,column:61}}],line:152},8:{loc:{start:{line:170,column:6},end:{line:181,column:7}},type:"if",locations:[{start:{line:170,column:6},end:{line:181,column:7}},{start:{line:173,column:13},end:{line:181,column:7}}],line:170},9:{loc:{start:{line:173,column:13},end:{line:181,column:7}},type:"if",locations:[{start:{line:173,column:13},end:{line:181,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:173},10:{loc:{start:{line:173,column:17},end:{line:173,column:88}},type:"binary-expr",locations:[{start:{line:173,column:17},end:{line:173,column:44}},{start:{line:173,column:48},end:{line:173,column:88}}],line:173},11:{loc:{start:{line:177,column:8},end:{line:180,column:9}},type:"if",locations:[{start:{line:177,column:8},end:{line:180,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:177},12:{loc:{start:{line:185,column:4},end:{line:201,column:5}},type:"if",locations:[{start:{line:185,column:4},end:{line:201,column:5}},{start:{line:193,column:11},end:{line:201,column:5}}],line:185},13:{loc:{start:{line:186,column:6},end:{line:192,column:7}},type:"if",locations:[{start:{line:186,column:6},end:{line:192,column:7}},{start:{line:189,column:13},end:{line:192,column:7}}],line:186},14:{loc:{start:{line:186,column:10},end:{line:186,column:53}},type:"binary-expr",locations:[{start:{line:186,column:10},end:{line:186,column:19}},{start:{line:186,column:23},end:{line:186,column:33}},{start:{line:186,column:37},end:{line:186,column:53}}],line:186},15:{loc:{start:{line:189,column:13},end:{line:192,column:7}},type:"if",locations:[{start:{line:189,column:13},end:{line:192,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:189},16:{loc:{start:{line:189,column:17},end:{line:189,column:46}},type:"binary-expr",locations:[{start:{line:189,column:17},end:{line:189,column:26}},{start:{line:189,column:30},end:{line:189,column:46}}],line:189},17:{loc:{start:{line:194,column:6},end:{line:200,column:7}},type:"if",locations:[{start:{line:194,column:6},end:{line:200,column:7}},{start:{line:197,column:13},end:{line:200,column:7}}],line:194},18:{loc:{start:{line:194,column:10},end:{line:194,column:39}},type:"binary-expr",locations:[{start:{line:194,column:10},end:{line:194,column:19}},{start:{line:194,column:23},end:{line:194,column:39}}],line:194},19:{loc:{start:{line:197,column:13},end:{line:200,column:7}},type:"if",locations:[{start:{line:197,column:13},end:{line:200,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:197},20:{loc:{start:{line:197,column:17},end:{line:197,column:46}},type:"binary-expr",locations:[{start:{line:197,column:17},end:{line:197,column:26}},{start:{line:197,column:30},end:{line:197,column:46}}],line:197},21:{loc:{start:{line:214,column:21},end:{line:214,column:55}},type:"binary-expr",locations:[{start:{line:214,column:21},end:{line:214,column:49}},{start:{line:214,column:53},end:{line:214,column:55}}],line:214},22:{loc:{start:{line:215,column:24},end:{line:215,column:93}},type:"binary-expr",locations:[{start:{line:215,column:24},end:{line:215,column:70}},{start:{line:215,column:74},end:{line:215,column:93}}],line:215},23:{loc:{start:{line:216,column:21},end:{line:216,column:110}},type:"cond-expr",locations:[{start:{line:216,column:55},end:{line:216,column:96}},{start:{line:216,column:99},end:{line:216,column:110}}],line:216},24:{loc:{start:{line:227,column:4},end:{line:231,column:5}},type:"if",locations:[{start:{line:227,column:4},end:{line:231,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:227},25:{loc:{start:{line:227,column:8},end:{line:227,column:123}},type:"binary-expr",locations:[{start:{line:227,column:8},end:{line:227,column:40}},{start:{line:227,column:44},end:{line:227,column:123}}],line:227},26:{loc:{start:{line:241,column:30},end:{line:241,column:39}},type:"default-arg",locations:[{start:{line:241,column:37},end:{line:241,column:39}}],line:241},27:{loc:{start:{line:248,column:4},end:{line:250,column:5}},type:"if",locations:[{start:{line:248,column:4},end:{line:250,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:248},28:{loc:{start:{line:248,column:8},end:{line:248,column:62}},type:"binary-expr",locations:[{start:{line:248,column:8},end:{line:248,column:23}},{start:{line:248,column:27},end:{line:248,column:62}}],line:248},29:{loc:{start:{line:251,column:4},end:{line:253,column:5}},type:"if",locations:[{start:{line:251,column:4},end:{line:253,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:251},30:{loc:{start:{line:251,column:8},end:{line:251,column:62}},type:"binary-expr",locations:[{start:{line:251,column:8},end:{line:251,column:23}},{start:{line:251,column:27},end:{line:251,column:62}}],line:251},31:{loc:{start:{line:255,column:6},end:{line:257,column:7}},type:"if",locations:[{start:{line:255,column:6},end:{line:257,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:255},32:{loc:{start:{line:255,column:10},end:{line:255,column:69}},type:"binary-expr",locations:[{start:{line:255,column:10},end:{line:255,column:16}},{start:{line:255,column:20},end:{line:255,column:35}},{start:{line:255,column:39},end:{line:255,column:69}}],line:255},33:{loc:{start:{line:259,column:4},end:{line:261,column:5}},type:"if",locations:[{start:{line:259,column:4},end:{line:261,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:259},34:{loc:{start:{line:262,column:19},end:{line:262,column:51}},type:"binary-expr",locations:[{start:{line:262,column:19},end:{line:262,column:45}},{start:{line:262,column:49},end:{line:262,column:51}}],line:262},35:{loc:{start:{line:264,column:4},end:{line:275,column:5}},type:"if",locations:[{start:{line:264,column:4},end:{line:275,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:264},36:{loc:{start:{line:264,column:8},end:{line:264,column:35}},type:"binary-expr",locations:[{start:{line:264,column:8},end:{line:264,column:16}},{start:{line:264,column:20},end:{line:264,column:35}}],line:264},37:{loc:{start:{line:267,column:8},end:{line:272,column:9}},type:"if",locations:[{start:{line:267,column:8},end:{line:272,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:267},38:{loc:{start:{line:267,column:12},end:{line:267,column:56}},type:"binary-expr",locations:[{start:{line:267,column:12},end:{line:267,column:27}},{start:{line:267,column:31},end:{line:267,column:56}}],line:267},39:{loc:{start:{line:278,column:6},end:{line:291,column:7}},type:"if",locations:[{start:{line:278,column:6},end:{line:291,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:278},40:{loc:{start:{line:293,column:6},end:{line:306,column:7}},type:"if",locations:[{start:{line:293,column:6},end:{line:306,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:293},41:{loc:{start:{line:308,column:6},end:{line:326,column:7}},type:"if",locations:[{start:{line:308,column:6},end:{line:326,column:7}},{start:{line:322,column:13},end:{line:326,column:7}}],line:308},42:{loc:{start:{line:310,column:20},end:{line:310,column:78}},type:"cond-expr",locations:[{start:{line:310,column:40},end:{line:310,column:67}},{start:{line:310,column:70},end:{line:310,column:78}}],line:310},43:{loc:{start:{line:310,column:20},end:{line:310,column:37}},type:"binary-expr",locations:[{start:{line:310,column:20},end:{line:310,column:25}},{start:{line:310,column:29},end:{line:310,column:37}}],line:310},44:{loc:{start:{line:329,column:4},end:{line:343,column:5}},type:"if",locations:[{start:{line:329,column:4},end:{line:343,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:329},45:{loc:{start:{line:333,column:8},end:{line:341,column:9}},type:"if",locations:[{start:{line:333,column:8},end:{line:341,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:333},46:{loc:{start:{line:344,column:4},end:{line:346,column:5}},type:"if",locations:[{start:{line:344,column:4},end:{line:346,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:344},47:{loc:{start:{line:347,column:4},end:{line:349,column:5}},type:"if",locations:[{start:{line:347,column:4},end:{line:349,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:347},48:{loc:{start:{line:350,column:4},end:{line:352,column:5}},type:"if",locations:[{start:{line:350,column:4},end:{line:352,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:350},49:{loc:{start:{line:353,column:4},end:{line:355,column:5}},type:"if",locations:[{start:{line:353,column:4},end:{line:355,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:353},50:{loc:{start:{line:386,column:4},end:{line:386,column:38}},type:"if",locations:[{start:{line:386,column:4},end:{line:386,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:386},51:{loc:{start:{line:387,column:4},end:{line:391,column:5}},type:"if",locations:[{start:{line:387,column:4},end:{line:391,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:387},52:{loc:{start:{line:421,column:26},end:{line:421,column:70}},type:"cond-expr",locations:[{start:{line:421,column:46},end:{line:421,column:65}},{start:{line:421,column:68},end:{line:421,column:70}}],line:421},53:{loc:{start:{line:422,column:31},end:{line:422,column:87}},type:"cond-expr",locations:[{start:{line:422,column:69},end:{line:422,column:78}},{start:{line:422,column:81},end:{line:422,column:87}}],line:422},54:{loc:{start:{line:446,column:21},end:{line:446,column:44}},type:"binary-expr",locations:[{start:{line:446,column:21},end:{line:446,column:38}},{start:{line:446,column:42},end:{line:446,column:44}}],line:446},55:{loc:{start:{line:447,column:4},end:{line:458,column:5}},type:"if",locations:[{start:{line:447,column:4},end:{line:458,column:5}},{start:{line:456,column:11},end:{line:458,column:5}}],line:447},56:{loc:{start:{line:469,column:6},end:{line:505,column:7}},type:"if",locations:[{start:{line:469,column:6},end:{line:505,column:7}},{start:{line:474,column:13},end:{line:505,column:7}}],line:469},57:{loc:{start:{line:469,column:10},end:{line:469,column:56}},type:"binary-expr",locations:[{start:{line:469,column:10},end:{line:469,column:34}},{start:{line:469,column:38},end:{line:469,column:56}}],line:469},58:{loc:{start:{line:470,column:26},end:{line:470,column:92}},type:"binary-expr",locations:[{start:{line:470,column:26},end:{line:470,column:49}},{start:{line:470,column:53},end:{line:470,column:92}}],line:470},59:{loc:{start:{line:471,column:8},end:{line:473,column:9}},type:"if",locations:[{start:{line:471,column:8},end:{line:473,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:471},60:{loc:{start:{line:486,column:10},end:{line:488,column:11}},type:"if",locations:[{start:{line:486,column:10},end:{line:488,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:486},61:{loc:{start:{line:494,column:10},end:{line:501,column:11}},type:"if",locations:[{start:{line:494,column:10},end:{line:501,column:11}},{start:{line:497,column:17},end:{line:501,column:11}}],line:494},62:{loc:{start:{line:507,column:4},end:{line:512,column:5}},type:"if",locations:[{start:{line:507,column:4},end:{line:512,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:507},63:{loc:{start:{line:515,column:21},end:{line:515,column:55}},type:"binary-expr",locations:[{start:{line:515,column:21},end:{line:515,column:49}},{start:{line:515,column:53},end:{line:515,column:55}}],line:515},64:{loc:{start:{line:516,column:11},end:{line:516,column:52}},type:"binary-expr",locations:[{start:{line:516,column:11},end:{line:516,column:40}},{start:{line:516,column:44},end:{line:516,column:52}}],line:516},65:{loc:{start:{line:526,column:16},end:{line:526,column:41}},type:"binary-expr",locations:[{start:{line:526,column:16},end:{line:526,column:29}},{start:{line:526,column:33},end:{line:526,column:41}}],line:526},66:{loc:{start:{line:539,column:4},end:{line:561,column:5}},type:"if",locations:[{start:{line:539,column:4},end:{line:561,column:5}},{start:{line:549,column:11},end:{line:561,column:5}}],line:539},67:{loc:{start:{line:563,column:4},end:{line:565,column:5}},type:"if",locations:[{start:{line:563,column:4},end:{line:565,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:563},68:{loc:{start:{line:567,column:4},end:{line:569,column:5}},type:"if",locations:[{start:{line:567,column:4},end:{line:569,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:567},69:{loc:{start:{line:578,column:66},end:{line:578,column:91}},type:"cond-expr",locations:[{start:{line:578,column:81},end:{line:578,column:84}},{start:{line:578,column:87},end:{line:578,column:91}}],line:578},70:{loc:{start:{line:579,column:4},end:{line:583,column:5}},type:"if",locations:[{start:{line:579,column:4},end:{line:583,column:5}},{start:{line:581,column:11},end:{line:583,column:5}}],line:579},71:{loc:{start:{line:584,column:4},end:{line:588,column:5}},type:"if",locations:[{start:{line:584,column:4},end:{line:588,column:5}},{start:{line:586,column:11},end:{line:588,column:5}}],line:584},72:{loc:{start:{line:586,column:11},end:{line:588,column:5}},type:"if",locations:[{start:{line:586,column:11},end:{line:588,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:586},73:{loc:{start:{line:594,column:4},end:{line:606,column:5}},type:"if",locations:[{start:{line:594,column:4},end:{line:606,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:594},74:{loc:{start:{line:594,column:8},end:{line:594,column:39}},type:"binary-expr",locations:[{start:{line:594,column:8},end:{line:594,column:18}},{start:{line:594,column:22},end:{line:594,column:39}}],line:594},75:{loc:{start:{line:608,column:4},end:{line:610,column:5}},type:"if",locations:[{start:{line:608,column:4},end:{line:610,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:608},76:{loc:{start:{line:608,column:8},end:{line:608,column:27}},type:"binary-expr",locations:[{start:{line:608,column:8},end:{line:608,column:12}},{start:{line:608,column:16},end:{line:608,column:27}}],line:608},77:{loc:{start:{line:612,column:4},end:{line:635,column:5}},type:"if",locations:[{start:{line:612,column:4},end:{line:635,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:612},78:{loc:{start:{line:620,column:8},end:{line:625,column:9}},type:"if",locations:[{start:{line:620,column:8},end:{line:625,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:620},79:{loc:{start:{line:622,column:10},end:{line:624,column:11}},type:"if",locations:[{start:{line:622,column:10},end:{line:624,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:622},80:{loc:{start:{line:626,column:8},end:{line:631,column:9}},type:"if",locations:[{start:{line:626,column:8},end:{line:631,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:626},81:{loc:{start:{line:674,column:19},end:{line:674,column:51}},type:"binary-expr",locations:[{start:{line:674,column:19},end:{line:674,column:45}},{start:{line:674,column:49},end:{line:674,column:51}}],line:674},82:{loc:{start:{line:675,column:26},end:{line:675,column:92}},type:"cond-expr",locations:[{start:{line:675,column:46},end:{line:675,column:83}},{start:{line:675,column:86},end:{line:675,column:92}}],line:675},83:{loc:{start:{line:705,column:24},end:{line:724,column:14}},type:"cond-expr",locations:[{start:{line:705,column:56},end:{line:724,column:5}},{start:{line:724,column:8},end:{line:724,column:14}}],line:705},84:{loc:{start:{line:725,column:24},end:{line:735,column:14}},type:"cond-expr",locations:[{start:{line:725,column:97},end:{line:735,column:5}},{start:{line:735,column:8},end:{line:735,column:14}}],line:725}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0,118:0,119:0,120:0,121:0,122:0,123:0,124:0,125:0,126:0,127:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:0,136:0,137:0,138:0,139:0,140:0,141:0,142:0,143:0,144:0,145:0,146:0,147:0,148:0,149:0,150:0,151:0,152:0,153:0,154:0,155:0,156:0,157:0,158:0,159:0,160:0,161:0,162:0,163:0,164:0,165:0,166:0,167:0,168:0,169:0,170:0,171:0,172:0,173:0,174:0,175:0,176:0,177:0,178:0,179:0,180:0,181:0,182:0,183:0,184:0,185:0,186:0,187:0,188:0,189:0,190:0,191:0,192:0,193:0,194:0,195:0,196:0,197:0,198:0,199:0,200:0,201:0,202:0,203:0,204:0,205:0,206:0,207:0,208:0,209:0,210:0,211:0,212:0,213:0,214:0,215:0,216:0,217:0,218:0,219:0,220:0,221:0,222:0,223:0,224:0,225:0,226:0,227:0,228:0,229:0,230:0,231:0,232:0,233:0,234:0,235:0,236:0,237:0,238:0,239:0,240:0,241:0,242:0,243:0,244:0,245:0,246:0,247:0,248:0,249:0,250:0,251:0,252:0,253:0,254:0,255:0,256:0,257:0,258:0,259:0,260:0,261:0,262:0,263:0,264:0,265:0,266:0,267:0,268:0,269:0,270:0,271:0,272:0,273:0,274:0,275:0,276:0,277:0,278:0,279:0,280:0,281:0,282:0,283:0,284:0,285:0,286:0,287:0,288:0,289:0,290:0,291:0,292:0,293:0,294:0,295:0,296:0,297:0,298:0,299:0,300:0,301:0,302:0,303:0,304:0,305:0,306:0,307:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0,0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0],48:[0,0],49:[0,0],50:[0,0],51:[0,0],52:[0,0],53:[0,0],54:[0,0],55:[0,0],56:[0,0],57:[0,0],58:[0,0],59:[0,0],60:[0,0],61:[0,0],62:[0,0],63:[0,0],64:[0,0],65:[0,0],66:[0,0],67:[0,0],68:[0,0],69:[0,0],70:[0,0],71:[0,0],72:[0,0],73:[0,0],74:[0,0],75:[0,0],76:[0,0],77:[0,0],78:[0,0],79:[0,0],80:[0,0],81:[0,0],82:[0,0],83:[0,0],84:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/App.tsx"],names:["shortcut","mapStyle"],mappings:"AAsrBmB,SAAA,KAkNA,YAlNA;AAtrBnB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,SAAS;AAChB,SAAQ,aAAY;AACpB,SAAQ,wBAAuB;AAC/B,OAAO,UAAU;AACjB,SAAS,eAAe;AAExB,SAAQ,QAAQ,wBAAuB;AAEvC,OAAO,mBAAmB;AAC1B,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,gBAA8B;AACrC,OAAO,eAAe;AACtB,OAAO,kBAAkB;AAEzB,OAAO,mBAAmB;AAC1B,OAAO,iBAAiB;AACxB,OAAO,kBAAkB;AACzB,OAAO,eAAe;AACtB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AAEvB,SAAQ,wBAAwB,8BAA6B;AAC7D,OAAO,WAAW;AAClB,SAAS,cAAc,oBAAoB;AAC3C,SAAS,wBAA0C;AACnD,SAAS,qBAAqB;AAC9B,OAAO,kBAAkB;AACzB,OAAO,YAAY;AACnB,OAAO,aAAa;AAKpB,OAAO,SAAS,OAAO;AAEvB,SAAS,oBAAoB,KAAa,UAA8B;AACtE,QAAM,qBAAqB,IAAI,MAAM,oBAAoB;AACzD,QAAM,kBAAkB,IAAI,MAAM,iBAAiB;AACnD,QAAM,uBAAuB,IAAI,MAAM,sBAAsB;AAC7D,QAAM,oBAAoB,IAAI,MAAM,mBAAmB;AACvD,MAAI,sBAAsB,iBAAiB;AACzC,UAAM,cAAc,MAAM,eAAe,gBAAgB,UAAU,EAAC,eAAe,KAAI,CAAC;AACxF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,sBAAsB;AAC7B,UAAM,cAAc,MAAM,eAAe,iBAAiB,UAAU,EAAC,eAAe,KAAI,CAAC;AACzF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,mBAAmB;AAC1B,UAAM,cAAc,MAAM,eAAe,cAAc,UAAU,EAAC,eAAe,KAAI,CAAC;AACtF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,eAAe,MAAW,WAAmB,WAAgB;AACpE,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,MACL,GAAG,KAAK;AAAA,MACR,CAAC,SAAS,GAAG;AAAA,QACX,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,EACF;AACF;AAmDA,qBAAqB,YAAY,MAAM,UAAyB;AAAA,EAC9D;AAAA,EACA,aAAiC;AAAA,EACjC;AAAA,EAEA,YAAY,OAAY;AACtB,UAAM,KAAK;AAEX,SAAK,gBAAgB,IAAI,cAAc;AACvC,SAAK,2BAA2B;AAEhC,SAAK,QAAQ;AAAA,MACX,QAAQ,CAAC;AAAA,MACT,OAAO,CAAC;AAAA,MACR,UAAU,MAAM;AAAA,MAChB,oBAAoB;AAAA,MACpB,SAAS,CAAC;AAAA,MACV,cAAc,CAAC;AAAA,MACf,UAAU;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,QACP,MAAM;AAAA,QACN,QAAQ;AAAA,UACN,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN,UAAU;AAAA,QACV,SAAS;AAAA,QACT,MAAM;AAAA,QACN,WAAW;AAAA,QACX,QAAQ;AAAA,QACR,OAAO;AAAA,MACT;AAAA,MACA,wBAAwB;AAAA,QACtB,oBAAoB;AAAA,QACpB,oBAAoB;AAAA,QACpB,uBAAuB;AAAA,MACzB;AAAA,MACA,wBAAwB;AAAA,QACtB,cAAc;AAAA,MAChB;AAAA,MACA,YAAY;AAAA,IACd;AAEA,SAAK,eAAe,IAAI,aAAa;AAAA,MACnC,sBAAsB,CAAA,MAAK,KAAK,SAAS,EAAE,cAAc,EAAE,CAAC;AAAA,IAC9D,CAAC;AAAA,EACH;AAAA,EAEA,6BAA6B,MAAM;AACjC,UAAM,YAAY;AAAA,MAChB;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,WAAW;AAAA,QAC9B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,MAAM;AAAA,QACzB;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,QAAQ;AAAA,QAC3B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,SAAS;AAAA,QAC5B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,UAAU;AAAA,QAC7B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK;AAAA,YACH,KAAK,MAAM,aAAa,QAAQ,YAAY;AAAA,UAC9C;AAAA,QACF;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACZ,mBAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,QAC5E;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,aAAS,KAAK,iBAAiB,SAAS,CAAC,MAAM;AAC7C,UAAG,EAAE,QAAQ,UAAU;AACpB,UAAE,OAAuB,KAAK;AAC/B,iBAAS,KAAK,MAAM;AAAA,MACtB,WACQ,KAAK,MAAM,OAAO,aAAa,SAAS,kBAAkB,SAAS,MAAM;AAC/E,cAAM,WAAW,UAAU,KAAK,CAACA,cAAa;AAC5C,iBAAQA,UAAS,QAAQ,EAAE;AAAA,QAC7B,CAAC;AAED,YAAG,UAAU;AACX,eAAK,SAAS,aAAa,KAAK;AAChC,mBAAS,QAAQ;AAAA,QACnB;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,CAAC,MAAqB;AACrC,QAAG,UAAU,SAAS,YAAY,EAAE,QAAQ,KAAK,KAAK,GAAG;AACvD,UAAG,EAAE,WAAW,EAAE,YAAY,EAAE,YAAY,IAAI;AAC9C,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF,OACK;AACH,UAAG,EAAE,WAAW,EAAE,YAAY,IAAI;AAChC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF;AAAA,EACF;AAAA,EAEA,MAAM,oBAAoB;AACxB,SAAK,aAAa,MAAM,iBAAiB,CAAC,UAAU,SAAS,KAAK,eAAe,UAAU,IAAI,CAAC;AAChG,WAAO,iBAAiB,WAAW,KAAK,cAAc;AAAA,EACxD;AAAA,EAEA,uBAAuB;AACrB,WAAO,oBAAoB,WAAW,KAAK,cAAc;AAAA,EAC3D;AAAA,EAEA,UAAU,eAAyC;AACjD,SAAK,YAAY,KAAK,aAAa;AAAA,EACrC;AAAA,EAEA,YAAY,aAAqB;AAC/B,UAAM,WAAoC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC3E,UAAM,cAAc,SAAS,oCAAoC,KAAK,OAAO;AAE7E,UAAM,WAAY,OAAO,gBAAgB,WAAW,YAAY,QAAQ,SAAS,WAAW,IAAG;AAC/F,2BAAuB,UAAU,CAAA,UAAS;AACxC,WAAK,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,SAAiB;AAC3B,2BAAuB,SAAS,CAAA,UAAS;AACvC,WAAK,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,2BAA2B,CAAC,UAAkB,UAAe;AAE3D,QACE,aAAa,uBACb,UAAU,IAAI,KAAK,MAAM,UAAU,CAAC,YAAY,mBAAmB,GAAG,QAAQ,GAC9E;AACA,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAI,KAAK,MAAM,SAAiB;AAAA,QAChC,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAEA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAoC,OAAyB,CAAC,MAAY;AAC1F,WAAO;AAAA,MACL,MAAM;AAAA,MACN,aAAa;AAAA,MACb,aAAa;AAAA,MACb,GAAG;AAAA,IACL;AAKA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEA,eAAW,CAAC,WAAW,MAAM,KAAK,OAAO,QAAQ,SAAS,OAAO,GAAG;AAClE,UAAI,UAAU,SAAS,UAAU,OAAO,OAAO,QAAQ,UAAU;AAC/D,eAAO,MAAM,oBAAoB,OAAO,KAAK,QAAQ;AAAA,MACvD;AAAA,IACF;AAGA,QAAI,KAAK,aAAa;AACpB,WAAK,uBAAuB,QAAQ;AAAA,IACtC;AAEA,UAAM,SAA4B,iBAAiB,QAAQ,KAAK,CAAC;AAGjE,UAAM,cAA2C,CAAC;AAClD,QAAI,YAAY,SAAS,QAAQ;AAC/B,YAAM,cAAc,IAAI,OAAO,IAAI;AACnC,eAAS,OAAO,QAAQ,CAAC,OAAO,UAAU;AACxC,YAAI,MAAM,OAAO,MAAM,YAAY,IAAI,MAAM,EAAE,GAAG;AAChD,gBAAM,QAAQ,IAAI;AAAA,YAChB,UAAU,KAAK;AAAA,UACjB;AACA,sBAAY,KAAK,KAAK;AAAA,QACxB;AACA,oBAAY,IAAI,MAAM,IAAI,IAAI;AAAA,MAChC,CAAC;AAAA,IACH;AAEA,UAAM,eAAe,YAAY,OAAO,MAAM,EAAE,IAAI,CAAA,UAAS;AAE3D,YAAM,WAAW,MAAM,QAAQ,MAAM,iEAAiE;AACtG,UAAI,UAAU;AACZ,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AAC3B,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAGA,YAAM,qBAAqB,MAAM,QAAQ,MAAM,8CAA8C;AAC7F,UAAI,oBAAoB;AACtB,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AAC3B,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAEA,YAAM,aAAa,MAAM,QAAQ,MAAM,0CAA0C;AACjF,UAAI,YAAY;AACd,cAAM,CAAC,EAAE,OAAO,OAAO,UAAU,OAAO,IAAI;AAC5C,cAAM,MAAO,SAAS,WAAY,CAAC,OAAO,QAAQ,EAAE,KAAK,GAAG,IAAI;AAChE,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB;AAAA,cACA;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF,OACK;AACH,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,QACjB;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,gBAAgD;AACpD,QAAI,OAAO,SAAS,GAAG;AACrB,sBAAgB,UAAU,QAAQ;AAElC,iBAAW,SAAS,QAAQ;AAC1B,cAAM,EAAC,QAAO,IAAI;AAClB,YAAI,SAAS;AACX,cAAI;AACF,kBAAM,UAAU,QAAQ,MAAM,GAAG,EAAE,CAAC;AAEpC,kBAAM,YAAY,QAAQ,MAAM,qBAAqB,EAAG,CAAC;AACzD,kBAAM,eAAe,SAAS;AAAA,UAChC,SACO,KAAK;AACV,oBAAQ,KAAK,UAAU,MAAM,GAAG;AAAA,UAClC;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAEA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AACjD,WAAK,YAAY,SAAS,MAAgB;AAAA,IAC5C;AACA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AACjD,WAAK,YAAY,SAAS,MAAgB;AAAA,IAC5C;AAEA,QAAI,KAAK,aAAa;AACpB,WAAK,cAAc,YAAY,QAAQ;AAAA,IACzC;AACA,QAAI,KAAK,MAAM;AACb,WAAK,UAAU,QAAQ;AAAA,IACzB;AAEA,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,MACV;AAAA,MACA,QAAQ;AAAA,IACV,GAAG,MAAM;AACP,WAAK,aAAa;AAClB,WAAK,cAAc;AAAA,IACrB,CAAC;AAAA,EAEH;AAAA,EAEA,SAAS,MAAM;AACb,UAAM,cAAc,KAAK,cAAc,KAAK;AAE5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,UAAM,cAAc,KAAK,cAAc,KAAK;AAC5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,SAA+C;AAC5D,QAAI,EAAE,UAAU,SAAS,IAAI;AAC7B,QAAI,SAAS,KAAK,MAAM,SAAS;AACjC,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,QAAG,aAAa,SAAU;AAE1B,QAAI,aAAa,KAAK,MAAM,oBAAoB;AAC9C,WAAK,SAAS;AAAA,QACZ,oBAAoB;AAAA,MACtB,CAAC;AAAA,IACH;AAEA,aAAS,OAAO,MAAM,CAAC;AACvB,qBAAiB,QAAQ,UAAU,QAAQ;AAC3C,SAAK,eAAe,MAAM;AAAA,EAC5B;AAAA,EAEA,iBAAiB,CAAC,kBAAwC;AACxD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,QAAQ;AAAA,IACV;AACA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAkB;AAClC,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,kBAAkB,OAAO,MAAM,CAAC;AACtC,oBAAgB,OAAO,OAAO,CAAC;AAC/B,SAAK,eAAe,eAAe;AAAA,EACrC;AAAA,EAEA,cAAc,CAAC,UAAkB;AAC/B,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,cAAc,UAAU,cAAc,KAAK,CAAC;AAClD,gBAAY,KAAK,YAAY,KAAK;AAClC,kBAAc,OAAO,OAAO,GAAG,WAAW;AAC1C,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,0BAA0B,CAAC,UAAkB;AAC3C,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,QAAQ,EAAE,GAAG,cAAc,KAAK,EAAE;AACxC,UAAM,gBAAgB,YAAY,QAAQ,EAAC,GAAG,MAAM,OAAM,IAAI,CAAC;AAC/D,kBAAc,aAAa,cAAc,eAAe,SAAS,YAAY;AAE7E,UAAM,SAAS;AACf,kBAAc,KAAK,IAAI;AACvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAGA,kBAAkB,CAAC,OAAe,QAAgB,UAAkB;AAClE,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAAA,MACrB,GAAG,cAAc,KAAK;AAAA,MACtB,IAAI;AAAA,IACN;AAEA,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,OAAe,UAA8B;AAC7D,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAEvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,aAAuB;AACpC,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,mBAAmB,CAAC,aAAuC;AACzD,UAAM,WAAoC,SAAS,YAAY,CAAC;AAChE,QAAG,SAAS,mBAAmB,MAAM,QAAW;AAC9C,YAAM,eAAe;AAAA,QACnB,GAAG;AAAA,QACH,UAAU;AAAA,UACR,GAAG,SAAS;AAAA,UACZ,qBAAqB;AAAA,QACvB;AAAA,MACF;AACA,aAAO;AAAA,IACT,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,YAAY,CAAC,UAAoC,eAA4C;AAC3F,SAAK,SAAS,EAAC,WAAsB,CAAC;AACtC,eAAW,KAAK,iBAAiB,QAAQ;AACzC,SAAK,eAAe,QAAQ;AAAA,EAC9B;AAAA,EAEA,MAAM,eAAe;AACnB,UAAM,aAAwE,CAAC;AAC/E,eAAU,OAAO,OAAO,KAAK,KAAK,MAAM,SAAS,OAAO,GAAG;AACzD,YAAM,SAAS,KAAK,MAAM,SAAS,QAAQ,GAAG;AAC9C,UAAG,OAAO,SAAS,YAAY,EAAE,SAAS,SAAS;AACjD,mBAAW,GAAG,IAAI,KAAK,MAAM,QAAQ,GAAG,KAAK,EAAC,GAAG,KAAK,MAAM,SAAS,QAAQ,GAAG,EAAC;AACjF,YAAI,WAAW,GAAG,EAAE,WAAW,QAAW;AACxC,qBAAW,GAAG,EAAE,SAAS,CAAC;AAAA,QAC5B;AAAA,MACF,OAAO;AACL,mBAAW,GAAG,IAAI;AAAA,UAChB,MAAM,OAAO;AAAA,UACb,QAAQ,CAAC;AAAA,QACX;AAEA,YAAI,MAAM,OAAO;AAEjB,YAAI;AACF,gBAAM,oBAAoB,KAAM,KAAK,MAAM,QAAQ;AAAA,QACrD,SAAQ,KAAK;AACX,kBAAQ,KAAK,mCAAmC,GAAG;AAAA,QACrD;AAEA,cAAM,kBAAkB,CAAC,SAAa;AACpC,cAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,eAAe,GAAG;AAC/D;AAAA,UACF;AAEA,qBAAU,SAAS,KAAK,eAAe;AACrC,uBAAW,GAAG,EAAE,OAAO,KAAK,MAAM,EAAE;AAAA,UACtC;AAAA,QACF;AAEA,YAAI;AACF,cAAI,IAAK,WAAW,YAAY,GAAG;AACjC,kBAAM,OAAO,MAAO,IAAI,QAAQ,IAAK,UAAU,EAAE,CAAC,EAAG,YAAY,EAAE;AACnE,4BAAgB,IAAI;AAAA,UACtB,OAAO;AACL,kBAAM,WAAW,MAAM,MAAM,KAAM,EAAE,MAAM,OAAO,CAAC;AACnD,kBAAM,OAAO,MAAM,SAAS,KAAK;AACjC,4BAAgB,IAAI;AAAA,UACtB;AAAA,QACF,SAAQ,KAAK;AACX,kBAAQ,MAAM,sCAAsC,GAAG,MAAM,GAAG,EAAE;AAAA,QACpE;AAAA,MACF;AAAA,IACF;AAEA,QAAG,CAAC,QAAQ,KAAK,MAAM,SAAS,UAAU,GAAG;AAC3C,cAAQ,MAAM,mBAAmB,UAAU;AAC3C,WAAK,SAAS;AAAA,QACZ,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,eAAgB;AACd,UAAM,WAAmC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC1E,WAAO,SAAS,mBAAmB,KAAK;AAAA,EAC1C;AAAA,EAEA,cAAc,CAAC,YAMT;AACJ,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,cAAc;AACZ,UAAM,EAAC,UAAU,cAAa,IAAI,KAAK;AAEvC,UAAM,WAAW;AAAA,MACf,UAAW,iBAAiB;AAAA,MAC5B,qBAAqB,CAACC,cAAiC;AACrD,eAAO,MAAM,oBAAoBA,WAAU;AAAA,UACzC,eAAe;AAAA,QACjB,CAAC;AAAA,MACH;AAAA,MACA,cAAc,CAAC,MAAkB;AAC/B,aAAK,aAAa,WAAW,EAAE,GAAG;AAClC,aAAK,aAAa;AAAA,MACpB;AAAA,IACF;AAEA,UAAM,WAAW,KAAK,aAAa;AAEnC,QAAI;AAGJ,QAAG,aAAa,MAAM;AACpB,mBAAa;AAAA,QAAC;AAAA,QAAA;AAAA,UACX,GAAG;AAAA,UACJ,UAAU,KAAK;AAAA,UACf,cAAc,KAAK,MAAM,uBAAuB;AAAA,UAChD,eAAe,CAAC,YAAY,KAAK,cAAc,CAAC,OAAO;AAAA,QAAA;AAAA,MACzD;AAAA,IACF,OAAO;AAEL,mBAAa;AAAA,QAAC;AAAA,QAAA;AAAA,UAAe,GAAG;AAAA,UAC9B,UAAU,KAAK;AAAA,UACf,SAAS,KAAK,MAAM;AAAA,UACpB,oBAAoB,KAAK,MAAM,aAAa;AAAA,UAC5C,kBAAkB,KAAK,MAAM,SAAS,OAAO,KAAK,MAAM,kBAAkB;AAAA,UAC1E,eAAe,KAAK;AAAA,QAAA;AAAA,MAAe;AAAA,IACvC;AAEA,QAAI;AACJ,QAAG,KAAK,MAAM,SAAS,MAAM,UAAU,GAAG;AACxC,mBAAa,KAAK,MAAM,SAAS,QAAQ,YAAY,EAAE;AAAA,IACzD;AACA,UAAM,eAAkC,CAAC;AACzC,QAAI,YAAY;AACd,mBAAa,SAAS,SAAS,UAAU;AAAA,IAC3C;AAEA,WAAO,oBAAC,SAAI,OAAO,cAAc,WAAU,2BAA0B,eAAY,sBAC9E,UAAA,WAAA,CACH;AAAA,EACF;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,EAAC,UAAU,UAAU,OAAM,IAAI,KAAK;AAC1C,UAAM,EAAC,mBAAkB,IAAI,KAAK;AAClC,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,UAAU,KAAK,KAAK,UAAU,QAAQ,CAAC;AAC7C,QAAI,aAAa,IAAI,SAAS,GAAG,OAAO,IAAI,kBAAkB,EAAE;AAEhE,UAAM,aAAa,OAAO,QAAQ,MAAM,EACrC,IAAI,CAAC,CAAC,KAAK,GAAG,MAAO,QAAQ,OAAO,MAAM,IAAK,EAC/C,OAAO,CAAA,QAAO,QAAQ,IAAI;AAE7B,QAAI,WAAW,SAAS,GAAG;AACzB,UAAI,aAAa,IAAI,SAAS,WAAW,KAAK,GAAG,CAAC;AAAA,IACpD,OACK;AACH,UAAI,aAAa,OAAO,OAAO;AAAA,IACjC;AAEA,QAAI,aAAa,OAAO;AACtB,UAAI,aAAa,OAAO,MAAM;AAAA,IAChC,WACS,aAAa,WAAW;AAC/B,UAAI,aAAa,IAAI,QAAQ,SAAS;AAAA,IACxC;AAEA,YAAQ,aAAa,EAAC,mBAAkB,GAAG,YAAY,IAAI,IAAI;AAAA,EACjE;AAAA,EAEA,yBAAyB,CAAC,aAAiC;AACzD,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,aAAa,IAAI,aAAa,IAAI,OAAO;AAE/C,QAAI,cAAc,eAAe,IAAI;AACnC,YAAM,SAAS,WAAW,MAAM,GAAG;AACnC,YAAM,WAAqC,CAAC;AAC5C,aAAO,QAAQ,CAAA,cAAa;AAC1B,iBAAS,SAAS,IAAI;AAAA,MACxB,CAAC;AAED,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,GAAG,KAAK,MAAM;AAAA,UACd,GAAG;AAAA,QACL;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,MAAM;AACxC,QAAI,QAAQ,SAAS,IAAI;AACvB,WAAK,YAAY,IAAgB;AAAA,IACnC;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,OAAO;AACzC,QAAI,MAAM;AACR,UAAI;AACF,cAAM,QAAQ,KAAK,MAAM,GAAG;AAC5B,cAAM,CAAC,SAAS,kBAAkB,IAAI;AAAA,UACpC,MAAM,CAAC;AAAA,UACP,SAAS,MAAM,CAAC,GAAG,EAAE;AAAA,QACvB;AAEA,YAAI,QAAQ;AACZ,YAAI,YAAY,KAAK;AACnB,gBAAM,iBAAiB,KAAK,KAAK,UAAU,QAAQ,CAAC;AACpD,cAAI,mBAAmB,SAAS,SAAS,EAAE,GAAG;AAC5C,oBAAQ;AAAA,UACV;AAAA,QACF;AACA,YAAI,OAAO;AACT,eAAK,SAAS;AAAA,YACZ;AAAA,YACA,yBAAyB,SAAS,OAAO,kBAAkB,EAAE;AAAA,UAC/D,CAAC;AAAA,QACH;AAAA,MACF,SACO,KAAK;AACV,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,UAAkB;AACjC,SAAK,SAAS;AAAA,MACZ,oBAAoB;AAAA,MACpB,yBAAyB,KAAK,MAAM,SAAS,OAAO,KAAK,EAAE;AAAA,IAC7D,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,SAAS,WAAqC,OAAgB;AAC5D,SAAK,SAAS;AAAA,MACZ,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG;AAAA,MACf;AAAA,IACF,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,YAAY,WAAqC;AAC/C,SAAK,SAAS,WAAW,CAAC,KAAK,MAAM,OAAO,SAAS,CAAC;AAAA,EACxD;AAAA,EAEA,kBAAkB,CAAC,eAA4C;AAC7D,SAAK,SAAS,EAAE,WAAW,CAAC;AAAA,EAC9B;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAmB;AAC3F,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAe;AACvF,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,MAAM,SAAS,UAAU,CAAC;AAC9C,UAAM,gBAAgB,OAAO,SAAS,IAAI,OAAO,KAAK,MAAM,kBAAkB,IAAI;AAElF,UAAM,UAAU;AAAA,MAAC;AAAA,MAAA;AAAA,QACf,UAAU,KAAK,aAAa;AAAA,QAC5B,UAAU,KAAK,MAAM;AAAA,QACrB,UAAU,KAAK,MAAM;AAAA,QACrB,oBAAoB,KAAK,MAAM,aAAa;AAAA,QAC5C,SAAS,KAAK,MAAM;AAAA,QACpB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,eAAe,KAAK;AAAA,QACpB,eAAe,KAAK,YAAY,KAAK,IAAI;AAAA,MAAA;AAAA,IAC3C;AAEA,UAAM,YAAY;AAAA,MAAC;AAAA,MAAA;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,gBAAgB,KAAK;AAAA,QACrB,eAAe,KAAK;AAAA,QACpB,oBAAoB,KAAK,MAAM;AAAA,QAC/B;AAAA,QACA,SAAS,KAAK,MAAM;AAAA,QACpB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,IACrB;AAEA,UAAM,cAAc,gBAAgB;AAAA,MAAC;AAAA,MAAA;AAAA,QAEnC,OAAO;AAAA,QACP,YAAY,KAAK,MAAM;AAAA,QACvB,cAAc,KAAK,MAAM,qBAAqB;AAAA,QAC9C,aAAa,KAAK,MAAM,uBAAuB,KAAK,MAAM,SAAS,OAAO,SAAO;AAAA,QACjF,SAAS,KAAK,MAAM;AAAA,QACpB,cAAc,KAAK,MAAM;AAAA,QACzB,MAAM,KAAK,MAAM;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,iBAAiB,KAAK;AAAA,QACtB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,MAdd,KAAK,MAAM;AAAA,IAelB,IAAK;AAEL,UAAM,cAAe,KAAK,MAAM,OAAO,SAAS,KAAK,MAAM,MAAM,SAAU,IAAI;AAAA,MAAC;AAAA,MAAA;AAAA,QAC9E,cAAc;AAAA,QACd,oBAAoB,KAAK,MAAM;AAAA,QAC/B,eAAe,KAAK;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,QAAQ,KAAK,MAAM;AAAA,QACnB,OAAO,KAAK,MAAM;AAAA,MAAA;AAAA,IACpB,IAAK;AAGL,UAAM,8BAAU,OAAA,EACd,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,aAAa;AAAA,UAC5B,wBAAwB,KAAK,MAAM;AAAA,UACnC,wBAAwB,KAAK,MAAM;AAAA,UACnC,yBAAyB,KAAK;AAAA,UAC9B,yBAAyB,KAAK;AAAA,UAC9B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,OAAO;AAAA,UACjD,SAAS,KAAK,MAAM;AAAA,QAAA;AAAA,MACtB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,WAAW;AAAA,QAAA;AAAA,MACvD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,0BAA0B,KAAK;AAAA,UAC/B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,UAAU;AAAA,QAAA;AAAA,MACtD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,QAAQ;AAAA,UAClD,YAAY,KAAK,MAAM;AAAA,UACvB,iBAAiB,KAAK;AAAA,QAAA;AAAA,MACxB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,aAAa,KAAK;AAAA,UAClB,cAAc,KAAK,YAAY,KAAK,MAAM,MAAM;AAAA,UAChD,YAAY,KAAK,MAAM;AAAA,QAAA;AAAA,MACzB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,SAAS;AAAA,QAAA;AAAA,MACrD;AAAA,IAAA,EAAA,CACF;AAEA,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA,KAAK,KAAK,YAAY;AAAA,QACtB,QAAQ;AAAA,QACR;AAAA,MAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d77b464e77665bdbe41b0615e107d5b288737dd7"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Ie=function(){return l},l}Ie();Ie().s[0]++;window.Buffer=RQ.Buffer;function Cx(n,e){Ie().f[0]++;const t=(Ie().s[1]++,n.match(/\.tilehosting\.com/)),i=(Ie().s[2]++,n.match(/\.maptiler\.com/)),r=(Ie().s[3]++,n.match(/\.thunderforest\.com/)),a=(Ie().s[4]++,n.match(/\.locationiq\.com/));if(Ie().s[5]++,Ie().b[1][0]++,t||(Ie().b[1][1]++,i)){Ie().b[0][0]++;const l=(Ie().s[6]++,qd.getAccessToken("openmaptiles",e,{allowFallback:!0}));if(Ie().s[7]++,l)return Ie().b[2][0]++,Ie().s[8]++,n.replace("{key}",l);Ie().b[2][1]++}else if(Ie().b[0][1]++,Ie().s[9]++,r){Ie().b[3][0]++;const l=(Ie().s[10]++,qd.getAccessToken("thunderforest",e,{allowFallback:!0}));if(Ie().s[11]++,l)return Ie().b[4][0]++,Ie().s[12]++,n.replace("{key}",l);Ie().b[4][1]++}else if(Ie().b[3][1]++,Ie().s[13]++,a){Ie().b[5][0]++;const l=(Ie().s[14]++,qd.getAccessToken("locationiq",e,{allowFallback:!0}));if(Ie().s[15]++,l)return Ie().b[6][0]++,Ie().s[16]++,n.replace("{key}",l);Ie().b[6][1]++}else return Ie().b[5][1]++,Ie().s[17]++,n}function kU(n,e,t){return Ie().f[1]++,Ie().s[18]++,{...n,$root:{...n.$root,[e]:{...n.$root[e],values:t}}}}class cfe extends ni.Component{revisionStore;styleStore=(Ie().s[19]++,null);layerWatcher;constructor(e){Ie().f[2]++,Ie().s[20]++,super(e),Ie().s[21]++,this.revisionStore=new rfe,Ie().s[22]++,this.configureKeyboardShortcuts(),Ie().s[23]++,this.state={errors:[],infos:[],mapStyle:qd.emptyStyle,selectedLayerIndex:0,sources:{},vectorLayers:{},mapState:"map",spec:Ua,mapView:{zoom:0,center:{lng:0,lat:0}},isOpen:{settings:!1,sources:!1,open:!1,shortcuts:!1,export:!1,debug:!1},maplibreGlDebugOptions:{showTileBoundaries:!1,showCollisionBoxes:!1,showOverdrawInspector:!1},openlayersDebugOptions:{debugToolbox:!1},fileHandle:null},Ie().s[24]++,this.layerWatcher=new ufe({onVectorLayersChange:t=>(Ie().f[3]++,Ie().s[25]++,this.setState({vectorLayers:t}))})}configureKeyboardShortcuts=(Ie().s[26]++,()=>{Ie().f[4]++;const e=(Ie().s[27]++,[{key:"?",handler:()=>{Ie().f[5]++,Ie().s[28]++,this.toggleModal("shortcuts")}},{key:"o",handler:()=>{Ie().f[6]++,Ie().s[29]++,this.toggleModal("open")}},{key:"e",handler:()=>{Ie().f[7]++,Ie().s[30]++,this.toggleModal("export")}},{key:"d",handler:()=>{Ie().f[8]++,Ie().s[31]++,this.toggleModal("sources")}},{key:"s",handler:()=>{Ie().f[9]++,Ie().s[32]++,this.toggleModal("settings")}},{key:"i",handler:()=>{Ie().f[10]++,Ie().s[33]++,this.setMapState(this.state.mapState==="map"?(Ie().b[7][0]++,"inspect"):(Ie().b[7][1]++,"map"))}},{key:"m",handler:()=>{Ie().f[11]++,Ie().s[34]++,document.querySelector(".maplibregl-canvas").focus()}},{key:"!",handler:()=>{Ie().f[12]++,Ie().s[35]++,this.toggleModal("debug")}}]);Ie().s[36]++,document.body.addEventListener("keyup",t=>{if(Ie().f[13]++,Ie().s[37]++,t.key==="Escape")Ie().b[8][0]++,Ie().s[38]++,t.target.blur(),Ie().s[39]++,document.body.focus();else if(Ie().b[8][1]++,Ie().s[40]++,Ie().b[10][0]++,this.state.isOpen.shortcuts||(Ie().b[10][1]++,document.activeElement===document.body)){Ie().b[9][0]++;const i=(Ie().s[41]++,e.find(r=>(Ie().f[14]++,Ie().s[42]++,r.key===t.key)));Ie().s[43]++,i?(Ie().b[11][0]++,Ie().s[44]++,this.setModal("shortcuts",!1),Ie().s[45]++,i.handler()):Ie().b[11][1]++}else Ie().b[9][1]++})});handleKeyPress=(Ie().s[46]++,e=>{Ie().f[15]++,Ie().s[47]++,navigator.platform.toUpperCase().indexOf("MAC")>=0?(Ie().b[12][0]++,Ie().s[48]++,Ie().b[14][0]++,e.metaKey&&(Ie().b[14][1]++,e.shiftKey)&&(Ie().b[14][2]++,e.keyCode===90)?(Ie().b[13][0]++,Ie().s[49]++,e.preventDefault(),Ie().s[50]++,this.onRedo()):(Ie().b[13][1]++,Ie().s[51]++,Ie().b[16][0]++,e.metaKey&&(Ie().b[16][1]++,e.keyCode===90)?(Ie().b[15][0]++,Ie().s[52]++,e.preventDefault(),Ie().s[53]++,this.onUndo()):Ie().b[15][1]++)):(Ie().b[12][1]++,Ie().s[54]++,Ie().b[18][0]++,e.ctrlKey&&(Ie().b[18][1]++,e.keyCode===90)?(Ie().b[17][0]++,Ie().s[55]++,e.preventDefault(),Ie().s[56]++,this.onUndo()):(Ie().b[17][1]++,Ie().s[57]++,Ie().b[20][0]++,e.ctrlKey&&(Ie().b[20][1]++,e.keyCode===89)?(Ie().b[19][0]++,Ie().s[58]++,e.preventDefault(),Ie().s[59]++,this.onRedo()):Ie().b[19][1]++))});async componentDidMount(){Ie().f[16]++,Ie().s[60]++,this.styleStore=await ife((e,t)=>(Ie().f[17]++,Ie().s[61]++,this.onStyleChanged(e,t))),Ie().s[62]++,window.addEventListener("keydown",this.handleKeyPress)}componentWillUnmount(){Ie().f[18]++,Ie().s[63]++,window.removeEventListener("keydown",this.handleKeyPress)}saveStyle(e){Ie().f[19]++,Ie().s[64]++,this.styleStore?.save(e)}updateFonts(e){Ie().f[20]++;const t=(Ie().s[65]++,Ie().b[21][0]++,this.state.mapStyle.metadata||(Ie().b[21][1]++,{})),i=(Ie().s[66]++,Ie().b[22][0]++,t["maputnik:openmaptiles_access_token"]||(Ie().b[22][1]++,lj.openmaptiles)),r=(Ie().s[67]++,typeof e=="string"?(Ie().b[23][0]++,e.replace("{key}",i)):(Ie().b[23][1]++,e));Ie().s[68]++,Nde(r,a=>{Ie().f[21]++,Ie().s[69]++,this.setState({spec:kU(this.state.spec,"glyphs",a)})})}updateIcons(e){Ie().f[22]++,Ie().s[70]++,Gde(e,t=>{Ie().f[23]++,Ie().s[71]++,this.setState({spec:kU(this.state.spec,"sprite",t)})})}onChangeMetadataProperty=(Ie().s[72]++,(e,t)=>{Ie().f[24]++,Ie().s[73]++,Ie().b[25][0]++,e==="maputnik:renderer"&&(Ie().b[25][1]++,t!==UQ(this.state.mapStyle,["metadata","maputnik:renderer"],"mlgljs"))?(Ie().b[24][0]++,Ie().s[74]++,this.setState({mapState:"map"})):Ie().b[24][1]++;const i=(Ie().s[75]++,{...this.state.mapStyle,metadata:{...this.state.mapStyle.metadata,[e]:t}});Ie().s[76]++,this.onStyleChanged(i)});onStyleChanged=(Ie().s[77]++,(e,t=(Ie().b[26][0]++,{}))=>{Ie().f[25]++,Ie().s[78]++,t={save:!0,addRevision:!0,initialLoad:!1,...t},Ie().s[79]++,Ie().b[28][0]++,e.glyphs&&(Ie().b[28][1]++,typeof e.glyphs=="string")?(Ie().b[27][0]++,Ie().s[80]++,e.glyphs=Cx(e.glyphs,e)):Ie().b[27][1]++,Ie().s[81]++,Ie().b[30][0]++,e.sprite&&(Ie().b[30][1]++,typeof e.sprite=="string")?(Ie().b[29][0]++,Ie().s[82]++,e.sprite=Cx(e.sprite,e)):Ie().b[29][1]++,Ie().s[83]++;for(const[o,m]of Object.entries(e.sources))Ie().s[84]++,Ie().b[32][0]++,m&&(Ie().b[32][1]++,"url"in m)&&(Ie().b[32][2]++,typeof m.url=="string")?(Ie().b[31][0]++,Ie().s[85]++,m.url=Cx(m.url,e)):Ie().b[31][1]++;Ie().s[86]++,t.initialLoad?(Ie().b[33][0]++,Ie().s[87]++,this.getInitialStateFromUrl(e)):Ie().b[33][1]++;const i=(Ie().s[88]++,Ie().b[34][0]++,Of(e)||(Ie().b[34][1]++,[])),r=(Ie().s[89]++,[]);if(Ie().s[90]++,Ie().b[36][0]++,e&&(Ie().b[36][1]++,e.layers)){Ie().b[35][0]++;const o=(Ie().s[91]++,new window.Map);Ie().s[92]++,e.layers.forEach((m,C)=>{if(Ie().f[26]++,Ie().s[93]++,Ie().b[38][0]++,m.id===""&&(Ie().b[38][1]++,o.has(m.id))){Ie().b[37][0]++;const S=(Ie().s[94]++,new Error(`layers[${C}]: duplicate layer id [empty_string], previously used`));Ie().s[95]++,r.push(S)}else Ie().b[37][1]++;Ie().s[96]++,o.set(m.id,!0)})}else Ie().b[35][1]++;const a=(Ie().s[97]++,r.concat(i).map(o=>{Ie().f[27]++;const m=(Ie().s[98]++,o.message.match(/layers\[(\d+)\]: (duplicate layer id "?(.*)"?, previously used)/));if(Ie().s[99]++,m){Ie().b[39][0]++;const[,O,U]=(Ie().s[100]++,m);return Ie().s[101]++,{message:o.message,parsed:{type:"layer",data:{index:parseInt(O,10),key:"id",message:U}}}}else Ie().b[39][1]++;const C=(Ie().s[102]++,o.message.match(/layers\[(\d+)\]: (source "(?:.*)" not found)/));if(Ie().s[103]++,C){Ie().b[40][0]++;const[,O,U]=(Ie().s[104]++,C);return Ie().s[105]++,{message:o.message,parsed:{type:"layer",data:{index:parseInt(O,10),key:"source",message:U}}}}else Ie().b[40][1]++;const S=(Ie().s[106]++,o.message.match(/layers\[(\d+)\]\.(?:(\S+)\.)?(\S+): (.*)/));if(Ie().s[107]++,S){Ie().b[41][0]++;const[,O,U,K,z]=(Ie().s[108]++,S),j=(Ie().s[109]++,Ie().b[43][0]++,U&&(Ie().b[43][1]++,K)?(Ie().b[42][0]++,[U,K].join(".")):(Ie().b[42][1]++,K));return Ie().s[110]++,{message:o.message,parsed:{type:"layer",data:{index:parseInt(O,10),key:j,message:z}}}}else return Ie().b[41][1]++,Ie().s[111]++,{message:o.message}}));let l=(Ie().s[112]++,void 0);if(Ie().s[113]++,i.length>0){Ie().b[44][0]++,Ie().s[114]++,l=N7(e),Ie().s[115]++;for(const o of i){const{message:m}=(Ie().s[116]++,o);if(Ie().s[117]++,m){Ie().b[45][0]++,Ie().s[118]++;try{const C=(Ie().s[119]++,m.split(":")[0]),S=(Ie().s[120]++,C.match(/^\S+?\[\d+\]\.[^[]+/)[0]);Ie().s[121]++,J_.unset(l,S)}catch(C){Ie().s[122]++,console.warn(m+" "+C)}}else Ie().b[45][1]++}}else Ie().b[44][1]++;Ie().s[123]++,e.glyphs!==this.state.mapStyle.glyphs?(Ie().b[46][0]++,Ie().s[124]++,this.updateFonts(e.glyphs)):Ie().b[46][1]++,Ie().s[125]++,e.sprite!==this.state.mapStyle.sprite?(Ie().b[47][0]++,Ie().s[126]++,this.updateIcons(e.sprite)):Ie().b[47][1]++,Ie().s[127]++,t.addRevision?(Ie().b[48][0]++,Ie().s[128]++,this.revisionStore.addRevision(e)):Ie().b[48][1]++,Ie().s[129]++,t.save?(Ie().b[49][0]++,Ie().s[130]++,this.saveStyle(e)):Ie().b[49][1]++,Ie().s[131]++,this.setState({mapStyle:e,dirtyMapStyle:l,errors:a},()=>{Ie().f[28]++,Ie().s[132]++,this.fetchSources(),Ie().s[133]++,this.setStateInUrl()})});onUndo=(Ie().s[134]++,()=>{Ie().f[29]++;const e=(Ie().s[135]++,this.revisionStore.undo()),t=(Ie().s[136]++,jde(this.state.mapStyle,e));Ie().s[137]++,this.onStyleChanged(e,{addRevision:!1}),Ie().s[138]++,this.setState({infos:t})});onRedo=(Ie().s[139]++,()=>{Ie().f[30]++;const e=(Ie().s[140]++,this.revisionStore.redo()),t=(Ie().s[141]++,Wde(this.state.mapStyle,e));Ie().s[142]++,this.onStyleChanged(e,{addRevision:!1}),Ie().s[143]++,this.setState({infos:t})});onMoveLayer=(Ie().s[144]++,e=>{Ie().f[31]++;let{oldIndex:t,newIndex:i}=(Ie().s[145]++,e),r=(Ie().s[146]++,this.state.mapStyle.layers);if(Ie().s[147]++,t=j7(t,0,r.length-1),Ie().s[148]++,i=j7(i,0,r.length-1),Ie().s[149]++,t===i){Ie().b[50][0]++,Ie().s[150]++;return}else Ie().b[50][1]++;Ie().s[151]++,t===this.state.selectedLayerIndex?(Ie().b[51][0]++,Ie().s[152]++,this.setState({selectedLayerIndex:i})):Ie().b[51][1]++,Ie().s[153]++,r=r.slice(0),Ie().s[154]++,zQ(r,t,i),Ie().s[155]++,this.onLayersChange(r)});onLayersChange=(Ie().s[156]++,e=>{Ie().f[32]++;const t=(Ie().s[157]++,{...this.state.mapStyle,layers:e});Ie().s[158]++,this.onStyleChanged(t)});onLayerDestroy=(Ie().s[159]++,e=>{Ie().f[33]++;const t=(Ie().s[160]++,this.state.mapStyle.layers),i=(Ie().s[161]++,t.slice(0));Ie().s[162]++,i.splice(e,1),Ie().s[163]++,this.onLayersChange(i)});onLayerCopy=(Ie().s[164]++,e=>{Ie().f[34]++;const t=(Ie().s[165]++,this.state.mapStyle.layers),i=(Ie().s[166]++,t.slice(0)),r=(Ie().s[167]++,N7(i[e]));Ie().s[168]++,r.id=r.id+"-copy",Ie().s[169]++,i.splice(e,0,r),Ie().s[170]++,this.onLayersChange(i)});onLayerVisibilityToggle=(Ie().s[171]++,e=>{Ie().f[35]++;const t=(Ie().s[172]++,this.state.mapStyle.layers),i=(Ie().s[173]++,t.slice(0)),r=(Ie().s[174]++,{...i[e]}),a=(Ie().s[175]++,"layout"in r?(Ie().b[52][0]++,{...r.layout}):(Ie().b[52][1]++,{}));Ie().s[176]++,a.visibility=a.visibility==="none"?(Ie().b[53][0]++,"visible"):(Ie().b[53][1]++,"none"),Ie().s[177]++,r.layout=a,Ie().s[178]++,i[e]=r,Ie().s[179]++,this.onLayersChange(i)});onLayerIdChange=(Ie().s[180]++,(e,t,i)=>{Ie().f[36]++;const r=(Ie().s[181]++,this.state.mapStyle.layers.slice(0));Ie().s[182]++,r[e]={...r[e],id:i},Ie().s[183]++,this.onLayersChange(r)});onLayerChanged=(Ie().s[184]++,(e,t)=>{Ie().f[37]++;const i=(Ie().s[185]++,this.state.mapStyle.layers.slice(0));Ie().s[186]++,i[e]=t,Ie().s[187]++,this.onLayersChange(i)});setMapState=(Ie().s[188]++,e=>{Ie().f[38]++,Ie().s[189]++,this.setState({mapState:e},this.setStateInUrl)});setDefaultValues=(Ie().s[190]++,e=>{Ie().f[39]++;const t=(Ie().s[191]++,Ie().b[54][0]++,e.metadata||(Ie().b[54][1]++,{}));if(Ie().s[192]++,t["maputnik:renderer"]===void 0){Ie().b[55][0]++;const i=(Ie().s[193]++,{...e,metadata:{...e.metadata,"maputnik:renderer":"mlgljs"}});return Ie().s[194]++,i}else return Ie().b[55][1]++,Ie().s[195]++,e});openStyle=(Ie().s[196]++,(e,t)=>{Ie().f[40]++,Ie().s[197]++,this.setState({fileHandle:t}),Ie().s[198]++,e=this.setDefaultValues(e),Ie().s[199]++,this.onStyleChanged(e)});async fetchSources(){Ie().f[41]++;const e=(Ie().s[200]++,{});Ie().s[201]++;for(const t of Object.keys(this.state.mapStyle.sources)){const i=(Ie().s[202]++,this.state.mapStyle.sources[t]);if(Ie().s[203]++,Ie().b[57][0]++,i.type!=="vector"||(Ie().b[57][1]++,!("url"in i)))Ie().b[56][0]++,Ie().s[204]++,e[t]=(Ie().b[58][0]++,this.state.sources[t]||(Ie().b[58][1]++,{...this.state.mapStyle.sources[t]})),Ie().s[205]++,e[t].layers===void 0?(Ie().b[59][0]++,Ie().s[206]++,e[t].layers=[]):Ie().b[59][1]++;else{Ie().b[56][1]++,Ie().s[207]++,e[t]={type:i.type,layers:[]};let r=(Ie().s[208]++,i.url);Ie().s[209]++;try{Ie().s[210]++,r=Cx(r,this.state.mapStyle)}catch(l){Ie().s[211]++,console.warn("Failed to setFetchAccessToken: ",l)}Ie().s[212]++;const a=l=>{if(Ie().f[42]++,Ie().s[213]++,Object.prototype.hasOwnProperty.call(l,"vector_layers"))Ie().b[60][1]++;else{Ie().b[60][0]++,Ie().s[214]++;return}Ie().s[215]++;for(const o of l.vector_layers)Ie().s[216]++,e[t].layers.push(o.id)};Ie().s[217]++;try{if(Ie().s[218]++,r.startsWith("pmtiles://")){Ie().b[61][0]++;const l=(Ie().s[219]++,await new h6(r.substring(10)).getTileJson(""));Ie().s[220]++,a(l)}else{Ie().b[61][1]++;const l=(Ie().s[221]++,await fetch(r,{mode:"cors"})),o=(Ie().s[222]++,await l.json());Ie().s[223]++,a(o)}}catch(l){Ie().s[224]++,console.error(`Failed to process source for url: '${r}', ${l}`)}}}Ie().s[225]++,SB(this.state.sources,e)?Ie().b[62][1]++:(Ie().b[62][0]++,Ie().s[226]++,console.debug("Setting sources",e),Ie().s[227]++,this.setState({sources:e}))}_getRenderer(){Ie().f[43]++;const e=(Ie().s[228]++,Ie().b[63][0]++,this.state.mapStyle.metadata||(Ie().b[63][1]++,{}));return Ie().s[229]++,Ie().b[64][0]++,e["maputnik:renderer"]||(Ie().b[64][1]++,"mlgljs")}onMapChange=(Ie().s[230]++,e=>{Ie().f[44]++,Ie().s[231]++,this.setState({mapView:e})});mapRenderer(){Ie().f[45]++;const{mapStyle:e,dirtyMapStyle:t}=(Ie().s[232]++,this.state),i=(Ie().s[233]++,{mapStyle:(Ie().b[65][0]++,t||(Ie().b[65][1]++,e)),replaceAccessTokens:m=>(Ie().f[46]++,Ie().s[234]++,qd.replaceAccessTokens(m,{allowFallback:!0})),onDataChange:m=>{Ie().f[47]++,Ie().s[235]++,this.layerWatcher.analyzeMap(m.map),Ie().s[236]++,this.fetchSources()}}),r=(Ie().s[237]++,this._getRenderer());let a;Ie().s[238]++,r==="ol"?(Ie().b[66][0]++,Ie().s[239]++,a=ce.jsx(xie,{...i,onChange:this.onMapChange,debugToolbox:this.state.openlayersDebugOptions.debugToolbox,onLayerSelect:m=>(Ie().f[48]++,Ie().s[240]++,this.onLayerSelect(+m))})):(Ie().b[66][1]++,Ie().s[241]++,a=ce.jsx(iZ,{...i,onChange:this.onMapChange,options:this.state.maplibreGlDebugOptions,inspectModeEnabled:this.state.mapState==="inspect",highlightedLayer:this.state.mapStyle.layers[this.state.selectedLayerIndex],onLayerSelect:this.onLayerSelect}));let l;Ie().s[242]++,this.state.mapState.match(/^filter-/)?(Ie().b[67][0]++,Ie().s[243]++,l=this.state.mapState.replace(/^filter-/,"")):Ie().b[67][1]++;const o=(Ie().s[244]++,{});return Ie().s[245]++,l?(Ie().b[68][0]++,Ie().s[246]++,o.filter=`url('#${l}')`):Ie().b[68][1]++,Ie().s[247]++,ce.jsx("div",{style:o,className:"maputnik-map__container","data-wd-key":"maplibre:container",children:a})}setStateInUrl=(Ie().s[248]++,()=>{Ie().f[49]++;const{mapState:e,mapStyle:t,isOpen:i}=(Ie().s[249]++,this.state),{selectedLayerIndex:r}=(Ie().s[250]++,this.state),a=(Ie().s[251]++,new URL(location.href)),l=(Ie().s[252]++,$7(JSON.stringify(t)));Ie().s[253]++,a.searchParams.set("layer",`${l}~${r}`);const o=(Ie().s[254]++,Object.entries(i).map(([m,C])=>(Ie().f[50]++,Ie().s[255]++,C===!0?(Ie().b[69][0]++,m):(Ie().b[69][1]++,null))).filter(m=>(Ie().f[51]++,Ie().s[256]++,m!==null)));Ie().s[257]++,o.length>0?(Ie().b[70][0]++,Ie().s[258]++,a.searchParams.set("modal",o.join(","))):(Ie().b[70][1]++,Ie().s[259]++,a.searchParams.delete("modal")),Ie().s[260]++,e==="map"?(Ie().b[71][0]++,Ie().s[261]++,a.searchParams.delete("view")):(Ie().b[71][1]++,Ie().s[262]++,e==="inspect"?(Ie().b[72][0]++,Ie().s[263]++,a.searchParams.set("view","inspect")):Ie().b[72][1]++),Ie().s[264]++,history.replaceState({selectedLayerIndex:r},"Maputnik",a.href)});getInitialStateFromUrl=(Ie().s[265]++,e=>{Ie().f[52]++;const t=(Ie().s[266]++,new URL(location.href)),i=(Ie().s[267]++,t.searchParams.get("modal"));if(Ie().s[268]++,Ie().b[74][0]++,i&&(Ie().b[74][1]++,i!=="")){Ie().b[73][0]++;const l=(Ie().s[269]++,i.split(",")),o=(Ie().s[270]++,{});Ie().s[271]++,l.forEach(m=>{Ie().f[53]++,Ie().s[272]++,o[m]=!0}),Ie().s[273]++,this.setState({isOpen:{...this.state.isOpen,...o}})}else Ie().b[73][1]++;const r=(Ie().s[274]++,t.searchParams.get("view"));Ie().s[275]++,Ie().b[76][0]++,r&&(Ie().b[76][1]++,r!=="")?(Ie().b[75][0]++,Ie().s[276]++,this.setMapState(r)):Ie().b[75][1]++;const a=(Ie().s[277]++,t.searchParams.get("layer"));if(Ie().s[278]++,a){Ie().b[77][0]++,Ie().s[279]++;try{const l=(Ie().s[280]++,a.split("~")),[o,m]=(Ie().s[281]++,[l[0],parseInt(l[1],10)]);let C=(Ie().s[282]++,!0);if(Ie().s[283]++,o!=="-"){Ie().b[78][0]++;const S=(Ie().s[284]++,$7(JSON.stringify(e)));Ie().s[285]++,S!==parseInt(o,10)?(Ie().b[79][0]++,Ie().s[286]++,C=!1):Ie().b[79][1]++}else Ie().b[78][1]++;Ie().s[287]++,C?(Ie().b[80][0]++,Ie().s[288]++,this.setState({selectedLayerIndex:m,selectedLayerOriginalId:e.layers[m].id})):Ie().b[80][1]++}catch(l){Ie().s[289]++,console.warn(l)}}else Ie().b[77][1]++});onLayerSelect=(Ie().s[290]++,e=>{Ie().f[54]++,Ie().s[291]++,this.setState({selectedLayerIndex:e,selectedLayerOriginalId:this.state.mapStyle.layers[e].id},this.setStateInUrl)});setModal(e,t){Ie().f[55]++,Ie().s[292]++,this.setState({isOpen:{...this.state.isOpen,[e]:t}},this.setStateInUrl)}toggleModal(e){Ie().f[56]++,Ie().s[293]++,this.setModal(e,!this.state.isOpen[e])}onSetFileHandle=(Ie().s[294]++,e=>{Ie().f[57]++,Ie().s[295]++,this.setState({fileHandle:e})});onChangeOpenlayersDebug=(Ie().s[296]++,(e,t)=>{Ie().f[58]++,Ie().s[297]++,this.setState({openlayersDebugOptions:{...this.state.openlayersDebugOptions,[e]:t}})});onChangeMaplibreGlDebug=(Ie().s[298]++,(e,t)=>{Ie().f[59]++,Ie().s[299]++,this.setState({maplibreGlDebugOptions:{...this.state.maplibreGlDebugOptions,[e]:t}})});render(){Ie().f[60]++;const e=(Ie().s[300]++,Ie().b[81][0]++,this.state.mapStyle.layers||(Ie().b[81][1]++,[])),t=(Ie().s[301]++,e.length>0?(Ie().b[82][0]++,e[this.state.selectedLayerIndex]):(Ie().b[82][1]++,void 0)),i=(Ie().s[302]++,ce.jsx(Zce,{renderer:this._getRenderer(),mapState:this.state.mapState,mapStyle:this.state.mapStyle,inspectModeEnabled:this.state.mapState==="inspect",sources:this.state.sources,onStyleChanged:this.onStyleChanged,onStyleOpen:this.onStyleChanged,onSetMapState:this.setMapState,onToggleModal:this.toggleModal.bind(this)})),r=(Ie().s[303]++,ce.jsx(Zae,{onMoveLayer:this.onMoveLayer,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayersChange:this.onLayersChange,onLayerSelect:this.onLayerSelect,selectedLayerIndex:this.state.selectedLayerIndex,layers:e,sources:this.state.sources,errors:this.state.errors})),a=(Ie().s[304]++,t?(Ie().b[83][0]++,ce.jsx(Ice,{layer:t,layerIndex:this.state.selectedLayerIndex,isFirstLayer:this.state.selectedLayerIndex<1,isLastLayer:this.state.selectedLayerIndex===this.state.mapStyle.layers.length-1,sources:this.state.sources,vectorLayers:this.state.vectorLayers,spec:this.state.spec,onMoveLayer:this.onMoveLayer,onLayerChanged:this.onLayerChanged,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayerIdChange:this.onLayerIdChange,errors:this.state.errors},this.state.selectedLayerOriginalId)):(Ie().b[83][1]++,void 0)),l=(Ie().s[305]++,this.state.errors.length+this.state.infos.length>0?(Ie().b[84][0]++,ce.jsx(nhe,{currentLayer:t,selectedLayerIndex:this.state.selectedLayerIndex,onLayerSelect:this.onLayerSelect,mapStyle:this.state.mapStyle,errors:this.state.errors,infos:this.state.infos})):(Ie().b[84][1]++,void 0)),o=(Ie().s[306]++,ce.jsxs("div",{children:[ce.jsx(ide,{renderer:this._getRenderer(),maplibreGlDebugOptions:this.state.maplibreGlDebugOptions,openlayersDebugOptions:this.state.openlayersDebugOptions,onChangeMaplibreGlDebug:this.onChangeMaplibreGlDebug,onChangeOpenlayersDebug:this.onChangeOpenlayersDebug,isOpen:this.state.isOpen.debug,onOpenToggle:this.toggleModal.bind(this,"debug"),mapView:this.state.mapView}),ce.jsx(tde,{isOpen:this.state.isOpen.shortcuts,onOpenToggle:this.toggleModal.bind(this,"shortcuts")}),ce.jsx(ahe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,onChangeMetadataProperty:this.onChangeMetadataProperty,isOpen:this.state.isOpen.settings,onOpenToggle:this.toggleModal.bind(this,"settings")}),ce.jsx(whe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.export,onOpenToggle:this.toggleModal.bind(this,"export"),fileHandle:this.state.fileHandle,onSetFileHandle:this.onSetFileHandle}),ce.jsx(Jhe,{isOpen:this.state.isOpen.open,onStyleOpen:this.openStyle,onOpenToggle:this.toggleModal.bind(this,"open"),fileHandle:this.state.fileHandle}),ce.jsx(Qhe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.sources,onOpenToggle:this.toggleModal.bind(this,"sources")})]}));return Ie().s[307]++,ce.jsx(ehe,{toolbar:i,layerList:r,layerEditor:a,map:this.mapRenderer(),bottom:l,modals:o})}}const hfe=PU.createRoot(document.querySelector("#app"));hfe.render(ce.jsx(Sv.Provider,{value:{className:"react-icons"},children:ce.jsx(cfe,{})}));document.querySelector(".loading").style.display="none";
//# sourceMappingURL=index-BIbB1_sK.js.map
