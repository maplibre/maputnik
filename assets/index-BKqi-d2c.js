(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function Zl(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function bH(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function i(){var r=!1;try{r=this instanceof i}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var XB={exports:{}},J2={};var YK;function iae(){if(YK)return J2;YK=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,o){var s=null;if(o!==void 0&&(s=""+o),r.key!==void 0&&(s=""+r.key),"key"in r){o={};for(var a in r)a!=="key"&&(o[a]=r[a])}else o=r;return r=o.ref,{$$typeof:n,type:i,key:s,ref:r!==void 0?r:null,props:o}}return J2.Fragment=e,J2.jsx=t,J2.jsxs=t,J2}var VK;function rae(){return VK||(VK=1,XB.exports=iae()),XB.exports}var te=rae(),JB={exports:{}},Er={};var $K;function oae(){if($K)return Er;$K=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),E=Symbol.iterator;function I(Ie){return Ie===null||typeof Ie!="object"?null:(Ie=E&&Ie[E]||Ie["@@iterator"],typeof Ie=="function"?Ie:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K=Object.assign,z={};function Q(Ie,ze,Te){this.props=Ie,this.context=ze,this.refs=z,this.updater=Te||P}Q.prototype.isReactComponent={},Q.prototype.setState=function(Ie,ze){if(typeof Ie!="object"&&typeof Ie!="function"&&Ie!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ie,ze,"setState")},Q.prototype.forceUpdate=function(Ie){this.updater.enqueueForceUpdate(this,Ie,"forceUpdate")};function V(){}V.prototype=Q.prototype;function $(Ie,ze,Te){this.props=Ie,this.context=ze,this.refs=z,this.updater=Te||P}var Z=$.prototype=new V;Z.constructor=$,K(Z,Q.prototype),Z.isPureReactComponent=!0;var ee=Array.isArray;function X(){}var W={H:null,A:null,T:null,S:null},se=Object.prototype.hasOwnProperty;function ue(Ie,ze,Te){var vt=Te.ref;return{$$typeof:n,type:Ie,key:ze,ref:vt!==void 0?vt:null,props:Te}}function ve(Ie,ze){return ue(Ie.type,ze,Ie.props)}function ye(Ie){return typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===n}function Ee(Ie){var ze={"=":"=0",":":"=2"};return"$"+Ie.replace(/[=:]/g,function(Te){return ze[Te]})}var _e=/\/+/g;function Be(Ie,ze){return typeof Ie=="object"&&Ie!==null&&Ie.key!=null?Ee(""+Ie.key):ze.toString(36)}function Fe(Ie){switch(Ie.status){case"fulfilled":return Ie.value;case"rejected":throw Ie.reason;default:switch(typeof Ie.status=="string"?Ie.then(X,X):(Ie.status="pending",Ie.then(function(ze){Ie.status==="pending"&&(Ie.status="fulfilled",Ie.value=ze)},function(ze){Ie.status==="pending"&&(Ie.status="rejected",Ie.reason=ze)})),Ie.status){case"fulfilled":return Ie.value;case"rejected":throw Ie.reason}}throw Ie}function Se(Ie,ze,Te,vt,st){var Et=typeof Ie;(Et==="undefined"||Et==="boolean")&&(Ie=null);var Pt=!1;if(Ie===null)Pt=!0;else switch(Et){case"bigint":case"string":case"number":Pt=!0;break;case"object":switch(Ie.$$typeof){case n:case e:Pt=!0;break;case y:return Pt=Ie._init,Se(Pt(Ie._payload),ze,Te,vt,st)}}if(Pt)return st=st(Ie),Pt=vt===""?"."+Be(Ie,0):vt,ee(st)?(Te="",Pt!=null&&(Te=Pt.replace(_e,"$&/")+"/"),Se(st,ze,Te,"",function(we){return we})):st!=null&&(ye(st)&&(st=ve(st,Te+(st.key==null||Ie&&Ie.key===st.key?"":(""+st.key).replace(_e,"$&/")+"/")+Pt)),ze.push(st)),1;Pt=0;var ke=vt===""?".":vt+":";if(ee(Ie))for(var Oe=0;Oe<Ie.length;Oe++)vt=Ie[Oe],Et=ke+Be(vt,Oe),Pt+=Se(vt,ze,Te,Et,st);else if(Oe=I(Ie),typeof Oe=="function")for(Ie=Oe.call(Ie),Oe=0;!(vt=Ie.next()).done;)vt=vt.value,Et=ke+Be(vt,Oe++),Pt+=Se(vt,ze,Te,Et,st);else if(Et==="object"){if(typeof Ie.then=="function")return Se(Fe(Ie),ze,Te,vt,st);throw ze=String(Ie),Error("Objects are not valid as a React child (found: "+(ze==="[object Object]"?"object with keys {"+Object.keys(Ie).join(", ")+"}":ze)+"). If you meant to render a collection of children, use an array instead.")}return Pt}function qe(Ie,ze,Te){if(Ie==null)return Ie;var vt=[],st=0;return Se(Ie,vt,"","",function(Et){return ze.call(Te,Et,st++)}),vt}function ut(Ie){if(Ie._status===-1){var ze=Ie._result;ze=ze(),ze.then(function(Te){(Ie._status===0||Ie._status===-1)&&(Ie._status=1,Ie._result=Te)},function(Te){(Ie._status===0||Ie._status===-1)&&(Ie._status=2,Ie._result=Te)}),Ie._status===-1&&(Ie._status=0,Ie._result=ze)}if(Ie._status===1)return Ie._result.default;throw Ie._result}var ht=typeof reportError=="function"?reportError:function(Ie){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ze=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Ie=="object"&&Ie!==null&&typeof Ie.message=="string"?String(Ie.message):String(Ie),error:Ie});if(!window.dispatchEvent(ze))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Ie);return}console.error(Ie)},De={map:qe,forEach:function(Ie,ze,Te){qe(Ie,function(){ze.apply(this,arguments)},Te)},count:function(Ie){var ze=0;return qe(Ie,function(){ze++}),ze},toArray:function(Ie){return qe(Ie,function(ze){return ze})||[]},only:function(Ie){if(!ye(Ie))throw Error("React.Children.only expected to receive a single React element child.");return Ie}};return Er.Activity=_,Er.Children=De,Er.Component=Q,Er.Fragment=t,Er.Profiler=r,Er.PureComponent=$,Er.StrictMode=i,Er.Suspense=c,Er.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,Er.__COMPILER_RUNTIME={__proto__:null,c:function(Ie){return W.H.useMemoCache(Ie)}},Er.cache=function(Ie){return function(){return Ie.apply(null,arguments)}},Er.cacheSignal=function(){return null},Er.cloneElement=function(Ie,ze,Te){if(Ie==null)throw Error("The argument must be a React element, but you passed "+Ie+".");var vt=K({},Ie.props),st=Ie.key;if(ze!=null)for(Et in ze.key!==void 0&&(st=""+ze.key),ze)!se.call(ze,Et)||Et==="key"||Et==="__self"||Et==="__source"||Et==="ref"&&ze.ref===void 0||(vt[Et]=ze[Et]);var Et=arguments.length-2;if(Et===1)vt.children=Te;else if(1<Et){for(var Pt=Array(Et),ke=0;ke<Et;ke++)Pt[ke]=arguments[ke+2];vt.children=Pt}return ue(Ie.type,st,vt)},Er.createContext=function(Ie){return Ie={$$typeof:s,_currentValue:Ie,_currentValue2:Ie,_threadCount:0,Provider:null,Consumer:null},Ie.Provider=Ie,Ie.Consumer={$$typeof:o,_context:Ie},Ie},Er.createElement=function(Ie,ze,Te){var vt,st={},Et=null;if(ze!=null)for(vt in ze.key!==void 0&&(Et=""+ze.key),ze)se.call(ze,vt)&&vt!=="key"&&vt!=="__self"&&vt!=="__source"&&(st[vt]=ze[vt]);var Pt=arguments.length-2;if(Pt===1)st.children=Te;else if(1<Pt){for(var ke=Array(Pt),Oe=0;Oe<Pt;Oe++)ke[Oe]=arguments[Oe+2];st.children=ke}if(Ie&&Ie.defaultProps)for(vt in Pt=Ie.defaultProps,Pt)st[vt]===void 0&&(st[vt]=Pt[vt]);return ue(Ie,Et,st)},Er.createRef=function(){return{current:null}},Er.forwardRef=function(Ie){return{$$typeof:a,render:Ie}},Er.isValidElement=ye,Er.lazy=function(Ie){return{$$typeof:y,_payload:{_status:-1,_result:Ie},_init:ut}},Er.memo=function(Ie,ze){return{$$typeof:f,type:Ie,compare:ze===void 0?null:ze}},Er.startTransition=function(Ie){var ze=W.T,Te={};W.T=Te;try{var vt=Ie(),st=W.S;st!==null&&st(Te,vt),typeof vt=="object"&&vt!==null&&typeof vt.then=="function"&&vt.then(X,ht)}catch(Et){ht(Et)}finally{ze!==null&&Te.types!==null&&(ze.types=Te.types),W.T=ze}},Er.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},Er.use=function(Ie){return W.H.use(Ie)},Er.useActionState=function(Ie,ze,Te){return W.H.useActionState(Ie,ze,Te)},Er.useCallback=function(Ie,ze){return W.H.useCallback(Ie,ze)},Er.useContext=function(Ie){return W.H.useContext(Ie)},Er.useDebugValue=function(){},Er.useDeferredValue=function(Ie,ze){return W.H.useDeferredValue(Ie,ze)},Er.useEffect=function(Ie,ze){return W.H.useEffect(Ie,ze)},Er.useEffectEvent=function(Ie){return W.H.useEffectEvent(Ie)},Er.useId=function(){return W.H.useId()},Er.useImperativeHandle=function(Ie,ze,Te){return W.H.useImperativeHandle(Ie,ze,Te)},Er.useInsertionEffect=function(Ie,ze){return W.H.useInsertionEffect(Ie,ze)},Er.useLayoutEffect=function(Ie,ze){return W.H.useLayoutEffect(Ie,ze)},Er.useMemo=function(Ie,ze){return W.H.useMemo(Ie,ze)},Er.useOptimistic=function(Ie,ze){return W.H.useOptimistic(Ie,ze)},Er.useReducer=function(Ie,ze,Te){return W.H.useReducer(Ie,ze,Te)},Er.useRef=function(Ie){return W.H.useRef(Ie)},Er.useState=function(Ie){return W.H.useState(Ie)},Er.useSyncExternalStore=function(Ie,ze,Te){return W.H.useSyncExternalStore(Ie,ze,Te)},Er.useTransition=function(){return W.H.useTransition()},Er.version="19.2.0",Er}var HK;function pa(){return HK||(HK=1,JB.exports=oae()),JB.exports}var yt=pa();const On=Zl(yt);var CH={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Xx=On.createContext&&On.createContext(CH),sae=["attr","size","title"];function aae(n,e){if(n==null)return{};var t=lae(n,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function lae(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function IS(){return IS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},IS.apply(this,arguments)}function ZK(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function TS(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ZK(Object(t),!0).forEach(function(i){uae(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ZK(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function uae(n,e,t){return e=cae(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function cae(n){var e=Aae(n,"string");return typeof e=="symbol"?e:e+""}function Aae(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function _H(n){return n&&n.map((e,t)=>On.createElement(e.tag,TS({key:t},e.attr),_H(e.child)))}function fo(n){return e=>On.createElement(hae,IS({attr:TS({},n.attr)},e),_H(n.child))}function hae(n){var e=t=>{var{attr:i,size:r,title:o}=n,s=aae(n,sae),a=r||t.size||"1em",c;return t.className&&(c=t.className),n.className&&(c=(c?c+" ":"")+n.className),On.createElement("svg",IS({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,s,{className:c,style:TS(TS({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&On.createElement("title",null,o),n.children)};return Xx!==void 0?On.createElement(Xx.Consumer,null,t=>e(t)):e(CH)}var eO={exports:{}},e3={},tO={exports:{}},nO={};var XK;function dae(){return XK||(XK=1,(function(n){function e(Se,qe){var ut=Se.length;Se.push(qe);e:for(;0<ut;){var ht=ut-1>>>1,De=Se[ht];if(0<r(De,qe))Se[ht]=qe,Se[ut]=De,ut=ht;else break e}}function t(Se){return Se.length===0?null:Se[0]}function i(Se){if(Se.length===0)return null;var qe=Se[0],ut=Se.pop();if(ut!==qe){Se[0]=ut;e:for(var ht=0,De=Se.length,Ie=De>>>1;ht<Ie;){var ze=2*(ht+1)-1,Te=Se[ze],vt=ze+1,st=Se[vt];if(0>r(Te,ut))vt<De&&0>r(st,Te)?(Se[ht]=st,Se[vt]=ut,ht=vt):(Se[ht]=Te,Se[ze]=ut,ht=ze);else if(vt<De&&0>r(st,ut))Se[ht]=st,Se[vt]=ut,ht=vt;else break e}}return qe}function r(Se,qe){var ut=Se.sortIndex-qe.sortIndex;return ut!==0?ut:Se.id-qe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();n.unstable_now=function(){return s.now()-a}}var c=[],f=[],y=1,_=null,E=3,I=!1,P=!1,K=!1,z=!1,Q=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function Z(Se){for(var qe=t(f);qe!==null;){if(qe.callback===null)i(f);else if(qe.startTime<=Se)i(f),qe.sortIndex=qe.expirationTime,e(c,qe);else break;qe=t(f)}}function ee(Se){if(K=!1,Z(Se),!P)if(t(c)!==null)P=!0,X||(X=!0,Ee());else{var qe=t(f);qe!==null&&Fe(ee,qe.startTime-Se)}}var X=!1,W=-1,se=5,ue=-1;function ve(){return z?!0:!(n.unstable_now()-ue<se)}function ye(){if(z=!1,X){var Se=n.unstable_now();ue=Se;var qe=!0;try{e:{P=!1,K&&(K=!1,V(W),W=-1),I=!0;var ut=E;try{t:{for(Z(Se),_=t(c);_!==null&&!(_.expirationTime>Se&&ve());){var ht=_.callback;if(typeof ht=="function"){_.callback=null,E=_.priorityLevel;var De=ht(_.expirationTime<=Se);if(Se=n.unstable_now(),typeof De=="function"){_.callback=De,Z(Se),qe=!0;break t}_===t(c)&&i(c),Z(Se)}else i(c);_=t(c)}if(_!==null)qe=!0;else{var Ie=t(f);Ie!==null&&Fe(ee,Ie.startTime-Se),qe=!1}}break e}finally{_=null,E=ut,I=!1}qe=void 0}}finally{qe?Ee():X=!1}}}var Ee;if(typeof $=="function")Ee=function(){$(ye)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,Be=_e.port2;_e.port1.onmessage=ye,Ee=function(){Be.postMessage(null)}}else Ee=function(){Q(ye,0)};function Fe(Se,qe){W=Q(function(){Se(n.unstable_now())},qe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Se){Se.callback=null},n.unstable_forceFrameRate=function(Se){0>Se||125<Se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<Se?Math.floor(1e3/Se):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_next=function(Se){switch(E){case 1:case 2:case 3:var qe=3;break;default:qe=E}var ut=E;E=qe;try{return Se()}finally{E=ut}},n.unstable_requestPaint=function(){z=!0},n.unstable_runWithPriority=function(Se,qe){switch(Se){case 1:case 2:case 3:case 4:case 5:break;default:Se=3}var ut=E;E=Se;try{return qe()}finally{E=ut}},n.unstable_scheduleCallback=function(Se,qe,ut){var ht=n.unstable_now();switch(typeof ut=="object"&&ut!==null?(ut=ut.delay,ut=typeof ut=="number"&&0<ut?ht+ut:ht):ut=ht,Se){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=ut+De,Se={id:y++,callback:qe,priorityLevel:Se,startTime:ut,expirationTime:De,sortIndex:-1},ut>ht?(Se.sortIndex=ut,e(f,Se),t(c)===null&&Se===t(f)&&(K?(V(W),W=-1):K=!0,Fe(ee,ut-ht))):(Se.sortIndex=De,e(c,Se),P||I||(P=!0,X||(X=!0,Ee()))),Se},n.unstable_shouldYield=ve,n.unstable_wrapCallback=function(Se){var qe=E;return function(){var ut=E;E=qe;try{return Se.apply(this,arguments)}finally{E=ut}}}})(nO)),nO}var JK;function fae(){return JK||(JK=1,tO.exports=dae()),tO.exports}var iO={exports:{}},DA={};var eF;function pae(){if(eF)return DA;eF=1;var n=pa();function e(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(c,f,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:_==null?null:""+_,children:c,containerInfo:f,implementation:y}}var s=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return DA.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,DA.createPortal=function(c,f){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(c,f,null,y)},DA.flushSync=function(c){var f=s.T,y=i.p;try{if(s.T=null,i.p=2,c)return c()}finally{s.T=f,i.p=y,i.d.f()}},DA.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(c,f))},DA.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},DA.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var y=f.as,_=a(y,f.crossOrigin),E=typeof f.integrity=="string"?f.integrity:void 0,I=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;y==="style"?i.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:_,integrity:E,fetchPriority:I}):y==="script"&&i.d.X(c,{crossOrigin:_,integrity:E,fetchPriority:I,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},DA.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var y=a(f.as,f.crossOrigin);i.d.M(c,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(c)},DA.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var y=f.as,_=a(y,f.crossOrigin);i.d.L(c,y,{crossOrigin:_,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},DA.preloadModule=function(c,f){if(typeof c=="string")if(f){var y=a(f.as,f.crossOrigin);i.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(c)},DA.requestFormReset=function(c){i.d.r(c)},DA.unstable_batchedUpdates=function(c,f){return c(f)},DA.useFormState=function(c,f,y){return s.H.useFormState(c,f,y)},DA.useFormStatus=function(){return s.H.useHostTransitionStatus()},DA.version="19.2.0",DA}var tF;function JR(){if(tF)return iO.exports;tF=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),iO.exports=pae(),iO.exports}var nF;function mae(){if(nF)return e3;nF=1;var n=fae(),e=pa(),t=JR();function i(d){var v="https://react.dev/errors/"+d;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)v+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+d+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function o(d){var v=d,S=d;if(d.alternate)for(;v.return;)v=v.return;else{d=v;do v=d,(v.flags&4098)!==0&&(S=v.return),d=v.return;while(d)}return v.tag===3?S:null}function s(d){if(d.tag===13){var v=d.memoizedState;if(v===null&&(d=d.alternate,d!==null&&(v=d.memoizedState)),v!==null)return v.dehydrated}return null}function a(d){if(d.tag===31){var v=d.memoizedState;if(v===null&&(d=d.alternate,d!==null&&(v=d.memoizedState)),v!==null)return v.dehydrated}return null}function c(d){if(o(d)!==d)throw Error(i(188))}function f(d){var v=d.alternate;if(!v){if(v=o(d),v===null)throw Error(i(188));return v!==d?null:d}for(var S=d,R=v;;){var N=S.return;if(N===null)break;var Y=N.alternate;if(Y===null){if(R=N.return,R!==null){S=R;continue}break}if(N.child===Y.child){for(Y=N.child;Y;){if(Y===S)return c(N),d;if(Y===R)return c(N),v;Y=Y.sibling}throw Error(i(188))}if(S.return!==R.return)S=N,R=Y;else{for(var Ce=!1,Qe=N.child;Qe;){if(Qe===S){Ce=!0,S=N,R=Y;break}if(Qe===R){Ce=!0,R=N,S=Y;break}Qe=Qe.sibling}if(!Ce){for(Qe=Y.child;Qe;){if(Qe===S){Ce=!0,S=Y,R=N;break}if(Qe===R){Ce=!0,R=Y,S=N;break}Qe=Qe.sibling}if(!Ce)throw Error(i(189))}}if(S.alternate!==R)throw Error(i(190))}if(S.tag!==3)throw Error(i(188));return S.stateNode.current===S?d:v}function y(d){var v=d.tag;if(v===5||v===26||v===27||v===6)return d;for(d=d.child;d!==null;){if(v=y(d),v!==null)return v;d=d.sibling}return null}var _=Object.assign,E=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),V=Symbol.for("react.consumer"),$=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),ue=Symbol.for("react.activity"),ve=Symbol.for("react.memo_cache_sentinel"),ye=Symbol.iterator;function Ee(d){return d===null||typeof d!="object"?null:(d=ye&&d[ye]||d["@@iterator"],typeof d=="function"?d:null)}var _e=Symbol.for("react.client.reference");function Be(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===_e?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case K:return"Fragment";case Q:return"Profiler";case z:return"StrictMode";case ee:return"Suspense";case X:return"SuspenseList";case ue:return"Activity"}if(typeof d=="object")switch(d.$$typeof){case P:return"Portal";case $:return d.displayName||"Context";case V:return(d._context.displayName||"Context")+".Consumer";case Z:var v=d.render;return d=d.displayName,d||(d=v.displayName||v.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case W:return v=d.displayName||null,v!==null?v:Be(d.type)||"Memo";case se:v=d._payload,d=d._init;try{return Be(d(v))}catch{}}return null}var Fe=Array.isArray,Se=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,qe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ut={pending:!1,data:null,method:null,action:null},ht=[],De=-1;function Ie(d){return{current:d}}function ze(d){0>De||(d.current=ht[De],ht[De]=null,De--)}function Te(d,v){De++,ht[De]=d.current,d.current=v}var vt=Ie(null),st=Ie(null),Et=Ie(null),Pt=Ie(null);function ke(d,v){switch(Te(Et,v),Te(st,d),Te(vt,null),v.nodeType){case 9:case 11:d=(d=v.documentElement)&&(d=d.namespaceURI)?wg(d):0;break;default:if(d=v.tagName,v=v.namespaceURI)v=wg(v),d=du(v,d);else switch(d){case"svg":d=1;break;case"math":d=2;break;default:d=0}}ze(vt),Te(vt,d)}function Oe(){ze(vt),ze(st),ze(Et)}function we(d){d.memoizedState!==null&&Te(Pt,d);var v=vt.current,S=du(v,d.type);v!==S&&(Te(st,d),Te(vt,S))}function Ye(d){st.current===d&&(ze(vt),ze(st)),Pt.current===d&&(ze(Pt),Xf._currentValue=ut)}var ft,dt;function gt(d){if(ft===void 0)try{throw Error()}catch(S){var v=S.stack.trim().match(/\n( *(at )?)/);ft=v&&v[1]||"",dt=-1<S.stack.indexOf(`
    at`)?" (<anonymous>)":-1<S.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ft+d+dt}var Lt=!1;function Tt(d,v){if(!d||Lt)return"";Lt=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var R={DetermineComponentFrameRoot:function(){try{if(v){var fn=function(){throw Error()};if(Object.defineProperty(fn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fn,[])}catch(tn){var $t=tn}Reflect.construct(d,[],fn)}else{try{fn.call()}catch(tn){$t=tn}d.call(fn.prototype)}}else{try{throw Error()}catch(tn){$t=tn}(fn=d())&&typeof fn.catch=="function"&&fn.catch(function(){})}}catch(tn){if(tn&&$t&&typeof tn.stack=="string")return[tn.stack,$t.stack]}return[null,null]}};R.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var N=Object.getOwnPropertyDescriptor(R.DetermineComponentFrameRoot,"name");N&&N.configurable&&Object.defineProperty(R.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Y=R.DetermineComponentFrameRoot(),Ce=Y[0],Qe=Y[1];if(Ce&&Qe){var mt=Ce.split(`
`),Wt=Qe.split(`
`);for(N=R=0;R<mt.length&&!mt[R].includes("DetermineComponentFrameRoot");)R++;for(;N<Wt.length&&!Wt[N].includes("DetermineComponentFrameRoot");)N++;if(R===mt.length||N===Wt.length)for(R=mt.length-1,N=Wt.length-1;1<=R&&0<=N&&mt[R]!==Wt[N];)N--;for(;1<=R&&0<=N;R--,N--)if(mt[R]!==Wt[N]){if(R!==1||N!==1)do if(R--,N--,0>N||mt[R]!==Wt[N]){var un=`
`+mt[R].replace(" at new "," at ");return d.displayName&&un.includes("<anonymous>")&&(un=un.replace("<anonymous>",d.displayName)),un}while(1<=R&&0<=N);break}}}finally{Lt=!1,Error.prepareStackTrace=S}return(S=d?d.displayName||d.name:"")?gt(S):""}function Zt(d,v){switch(d.tag){case 26:case 27:case 5:return gt(d.type);case 16:return gt("Lazy");case 13:return d.child!==v&&v!==null?gt("Suspense Fallback"):gt("Suspense");case 19:return gt("SuspenseList");case 0:case 15:return Tt(d.type,!1);case 11:return Tt(d.type.render,!1);case 1:return Tt(d.type,!0);case 31:return gt("Activity");default:return""}}function Fn(d){try{var v="",S=null;do v+=Zt(d,S),S=d,d=d.return;while(d);return v}catch(R){return`
Error generating stack: `+R.message+`
`+R.stack}}var Ln=Object.prototype.hasOwnProperty,fi=n.unstable_scheduleCallback,Rn=n.unstable_cancelCallback,Dn=n.unstable_shouldYield,wn=n.unstable_requestPaint,qn=n.unstable_now,En=n.unstable_getCurrentPriorityLevel,wt=n.unstable_ImmediatePriority,be=n.unstable_UserBlockingPriority,re=n.unstable_NormalPriority,ce=n.unstable_LowPriority,Pe=n.unstable_IdlePriority,tt=n.log,xt=n.unstable_setDisableYieldValue,It=null,_n=null;function Xe(d){if(typeof tt=="function"&&xt(d),_n&&typeof _n.setStrictMode=="function")try{_n.setStrictMode(It,d)}catch{}}var ae=Math.clz32?Math.clz32:Ke,he=Math.log,C=Math.LN2;function Ke(d){return d>>>=0,d===0?32:31-(he(d)/C|0)|0}var $e=256,rt=262144,Re=4194304;function at(d){var v=d&42;if(v!==0)return v;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return d&261888;case 262144:case 524288:case 1048576:case 2097152:return d&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function St(d,v,S){var R=d.pendingLanes;if(R===0)return 0;var N=0,Y=d.suspendedLanes,Ce=d.pingedLanes;d=d.warmLanes;var Qe=R&134217727;return Qe!==0?(R=Qe&~Y,R!==0?N=at(R):(Ce&=Qe,Ce!==0?N=at(Ce):S||(S=Qe&~d,S!==0&&(N=at(S))))):(Qe=R&~Y,Qe!==0?N=at(Qe):Ce!==0?N=at(Ce):S||(S=R&~d,S!==0&&(N=at(S)))),N===0?0:v!==0&&v!==N&&(v&Y)===0&&(Y=N&-N,S=v&-v,Y>=S||Y===32&&(S&4194048)!==0)?v:N}function Bt(d,v){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&v)===0}function kt(d,v){switch(d){case 1:case 2:case 4:case 8:case 64:return v+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sn(){var d=Re;return Re<<=1,(Re&62914560)===0&&(Re=4194304),d}function Tn(d){for(var v=[],S=0;31>S;S++)v.push(d);return v}function Yn(d,v){d.pendingLanes|=v,v!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function vi(d,v,S,R,N,Y){var Ce=d.pendingLanes;d.pendingLanes=S,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=S,d.entangledLanes&=S,d.errorRecoveryDisabledLanes&=S,d.shellSuspendCounter=0;var Qe=d.entanglements,mt=d.expirationTimes,Wt=d.hiddenUpdates;for(S=Ce&~S;0<S;){var un=31-ae(S),fn=1<<un;Qe[un]=0,mt[un]=-1;var $t=Wt[un];if($t!==null)for(Wt[un]=null,un=0;un<$t.length;un++){var tn=$t[un];tn!==null&&(tn.lane&=-536870913)}S&=~fn}R!==0&&ui(d,R,0),Y!==0&&N===0&&d.tag!==0&&(d.suspendedLanes|=Y&~(Ce&~v))}function ui(d,v,S){d.pendingLanes|=v,d.suspendedLanes&=~v;var R=31-ae(v);d.entangledLanes|=v,d.entanglements[R]=d.entanglements[R]|1073741824|S&261930}function Zn(d,v){var S=d.entangledLanes|=v;for(d=d.entanglements;S;){var R=31-ae(S),N=1<<R;N&v|d[R]&v&&(d[R]|=v),S&=~N}}function Mi(d,v){var S=v&-v;return S=(S&42)!==0?1:nn(S),(S&(d.suspendedLanes|v))!==0?0:S}function nn(d){switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=128;break;case 268435456:d=134217728;break;default:d=0}return d}function $i(d){return d&=-d,2<d?8<d?(d&134217727)!==0?32:268435456:8:2}function bi(){var d=qe.p;return d!==0?d:(d=window.event,d===void 0?32:g_(d.type))}function to(d,v){var S=qe.p;try{return qe.p=d,v()}finally{qe.p=S}}var tr=Math.random().toString(36).slice(2),an="__reactFiber$"+tr,Kn="__reactProps$"+tr,ii="__reactContainer$"+tr,nr="__reactEvents$"+tr,Su="__reactListeners$"+tr,Ms="__reactHandles$"+tr,Si="__reactResources$"+tr,Ba="__reactMarker$"+tr;function Xl(d){delete d[an],delete d[Kn],delete d[nr],delete d[Su],delete d[Ms]}function Yr(d){var v=d[an];if(v)return v;for(var S=d.parentNode;S;){if(v=S[ii]||S[an]){if(S=v.alternate,v.child!==null||S!==null&&S.child!==null)for(d=lb(d);d!==null;){if(S=d[an])return S;d=lb(d)}return v}d=S,S=d.parentNode}return null}function ls(d){if(d=d[an]||d[ii]){var v=d.tag;if(v===5||v===6||v===13||v===31||v===26||v===27||v===3)return d}return null}function $a(d){var v=d.tag;if(v===5||v===26||v===27||v===6)return d.stateNode;throw Error(i(33))}function ma(d){var v=d[Si];return v||(v=d[Si]={hoistableStyles:new Map,hoistableScripts:new Map}),v}function wo(d){d[Ba]=!0}var ga=new Set,mr={};function Sl(d,v){us(d,v),us(d+"Capture",v)}function us(d,v){for(mr[d]=v,d=0;d<v.length;d++)ga.add(v[d])}var Xo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),no={},El={};function YA(d){return Ln.call(El,d)?!0:Ln.call(no,d)?!1:Xo.test(d)?El[d]=!0:(no[d]=!0,!1)}function Bl(d,v,S){if(YA(v))if(S===null)d.removeAttribute(v);else{switch(typeof S){case"undefined":case"function":case"symbol":d.removeAttribute(v);return;case"boolean":var R=v.toLowerCase().slice(0,5);if(R!=="data-"&&R!=="aria-"){d.removeAttribute(v);return}}d.setAttribute(v,""+S)}}function Eu(d,v,S){if(S===null)d.removeAttribute(v);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(v);return}d.setAttribute(v,""+S)}}function na(d,v,S,R){if(R===null)d.removeAttribute(S);else{switch(typeof R){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(S);return}d.setAttributeNS(v,S,""+R)}}function Jo(d){switch(typeof d){case"bigint":case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function Bu(d){var v=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(v==="checkbox"||v==="radio")}function Ol(d,v,S){var R=Object.getOwnPropertyDescriptor(d.constructor.prototype,v);if(!d.hasOwnProperty(v)&&typeof R<"u"&&typeof R.get=="function"&&typeof R.set=="function"){var N=R.get,Y=R.set;return Object.defineProperty(d,v,{configurable:!0,get:function(){return N.call(this)},set:function(Ce){S=""+Ce,Y.call(this,Ce)}}),Object.defineProperty(d,v,{enumerable:R.enumerable}),{getValue:function(){return S},setValue:function(Ce){S=""+Ce},stopTracking:function(){d._valueTracker=null,delete d[v]}}}}function Ou(d){if(!d._valueTracker){var v=Bu(d)?"checked":"value";d._valueTracker=Ol(d,v,""+d[v])}}function Jl(d){if(!d)return!1;var v=d._valueTracker;if(!v)return!0;var S=v.getValue(),R="";return d&&(R=Bu(d)?d.checked?"true":"false":d.value),d=R,d!==S?(v.setValue(d),!0):!1}function Zu(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}var VA=/[\n"\\]/g;function ia(d){return d.replace(VA,function(v){return"\\"+v.charCodeAt(0).toString(16)+" "})}function Bc(d,v,S,R,N,Y,Ce,Qe){d.name="",Ce!=null&&typeof Ce!="function"&&typeof Ce!="symbol"&&typeof Ce!="boolean"?d.type=Ce:d.removeAttribute("type"),v!=null?Ce==="number"?(v===0&&d.value===""||d.value!=v)&&(d.value=""+Jo(v)):d.value!==""+Jo(v)&&(d.value=""+Jo(v)):Ce!=="submit"&&Ce!=="reset"||d.removeAttribute("value"),v!=null?Oc(d,Ce,Jo(v)):S!=null?Oc(d,Ce,Jo(S)):R!=null&&d.removeAttribute("value"),N==null&&Y!=null&&(d.defaultChecked=!!Y),N!=null&&(d.checked=N&&typeof N!="function"&&typeof N!="symbol"),Qe!=null&&typeof Qe!="function"&&typeof Qe!="symbol"&&typeof Qe!="boolean"?d.name=""+Jo(Qe):d.removeAttribute("name")}function Il(d,v,S,R,N,Y,Ce,Qe){if(Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(d.type=Y),v!=null||S!=null){if(!(Y!=="submit"&&Y!=="reset"||v!=null)){Ou(d);return}S=S!=null?""+Jo(S):"",v=v!=null?""+Jo(v):S,Qe||v===d.value||(d.value=v),d.defaultValue=v}R=R??N,R=typeof R!="function"&&typeof R!="symbol"&&!!R,d.checked=Qe?d.checked:!!R,d.defaultChecked=!!R,Ce!=null&&typeof Ce!="function"&&typeof Ce!="symbol"&&typeof Ce!="boolean"&&(d.name=Ce),Ou(d)}function Oc(d,v,S){v==="number"&&Zu(d.ownerDocument)===d||d.defaultValue===""+S||(d.defaultValue=""+S)}function eu(d,v,S,R){if(d=d.options,v){v={};for(var N=0;N<S.length;N++)v["$"+S[N]]=!0;for(S=0;S<d.length;S++)N=v.hasOwnProperty("$"+d[S].value),d[S].selected!==N&&(d[S].selected=N),N&&R&&(d[S].defaultSelected=!0)}else{for(S=""+Jo(S),v=null,N=0;N<d.length;N++){if(d[N].value===S){d[N].selected=!0,R&&(d[N].defaultSelected=!0);return}v!==null||d[N].disabled||(v=d[N])}v!==null&&(v.selected=!0)}}function Rs(d,v,S){if(v!=null&&(v=""+Jo(v),v!==d.value&&(d.value=v),S==null)){d.defaultValue!==v&&(d.defaultValue=v);return}d.defaultValue=S!=null?""+Jo(S):""}function ws(d,v,S,R){if(v==null){if(R!=null){if(S!=null)throw Error(i(92));if(Fe(R)){if(1<R.length)throw Error(i(93));R=R[0]}S=R}S==null&&(S=""),v=S}S=Jo(v),d.defaultValue=S,R=d.textContent,R===S&&R!==""&&R!==null&&(d.value=R),Ou(d)}function So(d,v){if(v){var S=d.firstChild;if(S&&S===d.lastChild&&S.nodeType===3){S.nodeValue=v;return}}d.textContent=v}var Ps=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function iA(d,v,S){var R=v.indexOf("--")===0;S==null||typeof S=="boolean"||S===""?R?d.setProperty(v,""):v==="float"?d.cssFloat="":d[v]="":R?d.setProperty(v,S):typeof S!="number"||S===0||Ps.has(v)?v==="float"?d.cssFloat=S:d[v]=(""+S).trim():d[v]=S+"px"}function Ws(d,v,S){if(v!=null&&typeof v!="object")throw Error(i(62));if(d=d.style,S!=null){for(var R in S)!S.hasOwnProperty(R)||v!=null&&v.hasOwnProperty(R)||(R.indexOf("--")===0?d.setProperty(R,""):R==="float"?d.cssFloat="":d[R]="");for(var N in v)R=v[N],v.hasOwnProperty(N)&&S[N]!==R&&iA(d,N,R)}else for(var Y in v)v.hasOwnProperty(Y)&&iA(d,Y,v[Y])}function Ha(d){if(d.indexOf("-")===-1)return!1;switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qs(d){return Yi.test(""+d)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":d}function zi(){}var Vr=null;function yo(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var Eo=null,io=null;function Lo(d){var v=ls(d);if(v&&(d=v.stateNode)){var S=d[Kn]||null;e:switch(d=v.stateNode,v.type){case"input":if(Bc(d,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name),v=S.name,S.type==="radio"&&v!=null){for(S=d;S.parentNode;)S=S.parentNode;for(S=S.querySelectorAll('input[name="'+ia(""+v)+'"][type="radio"]'),v=0;v<S.length;v++){var R=S[v];if(R!==d&&R.form===d.form){var N=R[Kn]||null;if(!N)throw Error(i(90));Bc(R,N.value,N.defaultValue,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name)}}for(v=0;v<S.length;v++)R=S[v],R.form===d.form&&Jl(R)}break e;case"textarea":Rs(d,S.value,S.defaultValue);break e;case"select":v=S.value,v!=null&&eu(d,!!S.multiple,v,!1)}}}var gr=!1;function Ic(d,v,S){if(gr)return d(v,S);gr=!0;try{var R=d(v);return R}finally{if(gr=!1,(Eo!==null||io!==null)&&(_g(),Eo&&(v=Eo,d=io,io=Eo=null,Lo(v),d)))for(v=0;v<d.length;v++)Lo(d[v])}}function Bo(d,v){var S=d.stateNode;if(S===null)return null;var R=S[Kn]||null;if(R===null)return null;S=R[v];e:switch(v){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(R=!R.disabled)||(d=d.type,R=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!R;break e;default:d=!1}if(d)return null;if(S&&typeof S!="function")throw Error(i(231,v,typeof S));return S}var po=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),es=!1;if(po)try{var Ls={};Object.defineProperty(Ls,"passive",{get:function(){es=!0}}),window.addEventListener("test",Ls,Ls),window.removeEventListener("test",Ls,Ls)}catch{es=!1}var Us=null,Rr=null,_r=null;function yr(){if(_r)return _r;var d,v=Rr,S=v.length,R,N="value"in Us?Us.value:Us.textContent,Y=N.length;for(d=0;d<S&&v[d]===N[d];d++);var Ce=S-d;for(R=1;R<=Ce&&v[S-R]===N[Y-R];R++);return _r=N.slice(d,1<R?1-R:void 0)}function J(d){var v=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&v===13&&(d=13)):d=v,d===10&&(d=13),32<=d||d===13?d:0}function ge(){return!0}function Ge(){return!1}function bt(d){function v(S,R,N,Y,Ce){this._reactName=S,this._targetInst=N,this.type=R,this.nativeEvent=Y,this.target=Ce,this.currentTarget=null;for(var Qe in d)d.hasOwnProperty(Qe)&&(S=d[Qe],this[Qe]=S?S(Y):Y[Qe]);return this.isDefaultPrevented=(Y.defaultPrevented!=null?Y.defaultPrevented:Y.returnValue===!1)?ge:Ge,this.isPropagationStopped=Ge,this}return _(v.prototype,{preventDefault:function(){this.defaultPrevented=!0;var S=this.nativeEvent;S&&(S.preventDefault?S.preventDefault():typeof S.returnValue!="unknown"&&(S.returnValue=!1),this.isDefaultPrevented=ge)},stopPropagation:function(){var S=this.nativeEvent;S&&(S.stopPropagation?S.stopPropagation():typeof S.cancelBubble!="unknown"&&(S.cancelBubble=!0),this.isPropagationStopped=ge)},persist:function(){},isPersistent:ge}),v}var bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xt=bt(bn),hi=_({},bn,{view:0,detail:0}),Pn=bt(hi),Ci,ni,Hi,xr=_({},hi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_f,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==Hi&&(Hi&&d.type==="mousemove"?(Ci=d.screenX-Hi.screenX,ni=d.screenY-Hi.screenY):ni=Ci=0,Hi=d),Ci)},movementY:function(d){return"movementY"in d?d.movementY:ni}}),ir=bt(xr),Zi=_({},xr,{dataTransfer:0}),Or=bt(Zi),Ks=_({},hi,{relatedTarget:0}),Oo=bt(Ks),Oa=_({},bn,{animationName:0,elapsedTime:0,pseudoElement:0}),Za=bt(Oa),Uo=_({},bn,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),ts=bt(Uo),q1=_({},bn,{data:0}),Io=bt(q1),ya={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Iu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cf(d){var v=this.nativeEvent;return v.getModifierState?v.getModifierState(d):(d=Iu[d])?!!v[d]:!1}function _f(){return Cf}var $r=_({},hi,{key:function(d){if(d.key){var v=ya[d.key]||d.key;if(v!=="Unidentified")return v}return d.type==="keypress"?(d=J(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Xu[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_f,charCode:function(d){return d.type==="keypress"?J(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?J(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),Tc=bt($r),Ep=_({},xr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Y1=bt(Ep),Hm=_({},hi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_f}),Zm=bt(Hm),Xm=_({},bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),nu=bt(Xm),Bp=_({},xr,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),rA=bt(Bp),Sh=_({},bn,{newState:0,oldState:0}),Op=bt(Sh),kc=[9,13,27,32],Jm=po&&"CompositionEvent"in window,$A=null;po&&"documentMode"in document&&($A=document.documentMode);var Cd=po&&"TextEvent"in window&&!$A,oA=po&&(!Jm||$A&&8<$A&&11>=$A),V1=" ",Eh=!1;function Ip(d,v){switch(d){case"keyup":return kc.indexOf(v.keyCode)!==-1;case"keydown":return v.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _d(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var Bh=!1;function iu(d,v){switch(d){case"compositionend":return _d(v);case"keypress":return v.which!==32?null:(Eh=!0,V1);case"textInput":return d=v.data,d===V1&&Eh?null:d;default:return null}}function w0(d,v){if(Bh)return d==="compositionend"||!Jm&&Ip(d,v)?(d=yr(),_r=Rr=Us=null,Bh=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(v.ctrlKey||v.altKey||v.metaKey)||v.ctrlKey&&v.altKey){if(v.char&&1<v.char.length)return v.char;if(v.which)return String.fromCharCode(v.which)}return null;case"compositionend":return oA&&v.locale!=="ko"?null:v.data;default:return null}}var xf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tp(d){var v=d&&d.nodeName&&d.nodeName.toLowerCase();return v==="input"?!!xf[d.type]:v==="textarea"}function eg(d,v,S,R){Eo?io?io.push(R):io=[R]:Eo=R,v=Mg(v,"onChange"),0<v.length&&(S=new Xt("onChange","change",null,S,R),d.push({event:S,listeners:v}))}var xd=null,Md=null;function S0(d){$d(d,0)}function sA(d){var v=$a(d);if(Jl(v))return d}function E0(d,v){if(d==="change")return v}var Oh=!1;if(po){var wd;if(po){var Mf="oninput"in document;if(!Mf){var Ih=document.createElement("div");Ih.setAttribute("oninput","return;"),Mf=typeof Ih.oninput=="function"}wd=Mf}else wd=!1;Oh=wd&&(!document.documentMode||9<document.documentMode)}function B0(){xd&&(xd.detachEvent("onpropertychange",HA),Md=xd=null)}function HA(d){if(d.propertyName==="value"&&sA(Md)){var v=[];eg(v,Md,d,yo(d)),Ic(S0,v)}}function kp(d,v,S){d==="focusin"?(B0(),xd=v,Md=S,xd.attachEvent("onpropertychange",HA)):d==="focusout"&&B0()}function tg(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return sA(Md)}function O0(d,v){if(d==="click")return sA(v)}function I0(d,v){if(d==="input"||d==="change")return sA(v)}function Sd(d,v){return d===v&&(d!==0||1/d===1/v)||d!==d&&v!==v}var Wo=typeof Object.is=="function"?Object.is:Sd;function Tl(d,v){if(Wo(d,v))return!0;if(typeof d!="object"||d===null||typeof v!="object"||v===null)return!1;var S=Object.keys(d),R=Object.keys(v);if(S.length!==R.length)return!1;for(R=0;R<S.length;R++){var N=S[R];if(!Ln.call(v,N)||!Wo(d[N],v[N]))return!1}return!0}function ng(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function ig(d,v){var S=ng(d);d=0;for(var R;S;){if(S.nodeType===3){if(R=d+S.textContent.length,d<=v&&R>=v)return{node:S,offset:v-d};d=R}e:{for(;S;){if(S.nextSibling){S=S.nextSibling;break e}S=S.parentNode}S=void 0}S=ng(S)}}function rg(d,v){return d&&v?d===v?!0:d&&d.nodeType===3?!1:v&&v.nodeType===3?rg(d,v.parentNode):"contains"in d?d.contains(v):d.compareDocumentPosition?!!(d.compareDocumentPosition(v)&16):!1:!1}function og(d){d=d!=null&&d.ownerDocument!=null&&d.ownerDocument.defaultView!=null?d.ownerDocument.defaultView:window;for(var v=Zu(d.document);v instanceof d.HTMLIFrameElement;){try{var S=typeof v.contentWindow.location.href=="string"}catch{S=!1}if(S)d=v.contentWindow;else break;v=Zu(d.document)}return v}function Dp(d){var v=d&&d.nodeName&&d.nodeName.toLowerCase();return v&&(v==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||v==="textarea"||d.contentEditable==="true")}var Ju=po&&"documentMode"in document&&11>=document.documentMode,Ot=null,ln=null,Rt=null,ri=!1;function er(d,v,S){var R=S.window===S?S.document:S.nodeType===9?S:S.ownerDocument;ri||Ot==null||Ot!==Zu(R)||(R=Ot,"selectionStart"in R&&Dp(R)?R={start:R.selectionStart,end:R.selectionEnd}:(R=(R.ownerDocument&&R.ownerDocument.defaultView||window).getSelection(),R={anchorNode:R.anchorNode,anchorOffset:R.anchorOffset,focusNode:R.focusNode,focusOffset:R.focusOffset}),Rt&&Tl(Rt,R)||(Rt=R,R=Mg(ln,"onSelect"),0<R.length&&(v=new Xt("onSelect","select",null,v,S),d.push({event:v,listeners:R}),v.target=Ot)))}function Mr(d,v){var S={};return S[d.toLowerCase()]=v.toLowerCase(),S["Webkit"+d]="webkit"+v,S["Moz"+d]="moz"+v,S}var Ss={animationend:Mr("Animation","AnimationEnd"),animationiteration:Mr("Animation","AnimationIteration"),animationstart:Mr("Animation","AnimationStart"),transitionrun:Mr("Transition","TransitionRun"),transitionstart:Mr("Transition","TransitionStart"),transitioncancel:Mr("Transition","TransitionCancel"),transitionend:Mr("Transition","TransitionEnd")},vo={},Ed={};po&&(Ed=document.createElement("div").style,"AnimationEvent"in window||(delete Ss.animationend.animation,delete Ss.animationiteration.animation,delete Ss.animationstart.animation),"TransitionEvent"in window||delete Ss.transitionend.transition);function aA(d){if(vo[d])return vo[d];if(!Ss[d])return d;var v=Ss[d],S;for(S in v)if(v.hasOwnProperty(S)&&S in Ed)return vo[d]=v[S];return d}var hl=aA("animationend"),Bd=aA("animationiteration"),Th=aA("animationstart"),lA=aA("transitionrun"),ZA=aA("transitionstart"),kl=aA("transitioncancel"),mo=aA("transitionend"),T0=new Map,wf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wf.push("scrollEnd");function va(d,v){T0.set(d,v),Sl(v,[d])}var Od=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var v=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(v))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)},Dl=[],uA=0,XA=0;function ec(){for(var d=uA,v=XA=uA=0;v<d;){var S=Dl[v];Dl[v++]=null;var R=Dl[v];Dl[v++]=null;var N=Dl[v];Dl[v++]=null;var Y=Dl[v];if(Dl[v++]=null,R!==null&&N!==null){var Ce=R.pending;Ce===null?N.next=N:(N.next=Ce.next,Ce.next=N),R.pending=N}Y!==0&&Rp(S,N,Y)}}function tc(d,v,S,R){Dl[uA++]=d,Dl[uA++]=v,Dl[uA++]=S,Dl[uA++]=R,XA|=R,d.lanes|=R,d=d.alternate,d!==null&&(d.lanes|=R)}function JA(d,v,S,R){return tc(d,v,S,R),rr(d)}function Dc(d,v){return tc(d,null,null,v),rr(d)}function Rp(d,v,S){d.lanes|=S;var R=d.alternate;R!==null&&(R.lanes|=S);for(var N=!1,Y=d.return;Y!==null;)Y.childLanes|=S,R=Y.alternate,R!==null&&(R.childLanes|=S),Y.tag===22&&(d=Y.stateNode,d===null||d._visibility&1||(N=!0)),d=Y,Y=Y.return;return d.tag===3?(Y=d.stateNode,N&&v!==null&&(N=31-ae(S),d=Y.hiddenUpdates,R=d[N],R===null?d[N]=[v]:R.push(v),v.lane=S|536870912),Y):null}function rr(d){if(50<Vd)throw Vd=0,Vv=null,Error(i(185));for(var v=d.return;v!==null;)d=v,v=d.return;return d.tag===3?d.stateNode:null}var nc={};function $1(d,v,S,R){this.tag=d,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=v,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=R,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ga(d,v,S,R){return new $1(d,v,S,R)}function Tu(d){return d=d.prototype,!(!d||!d.isReactComponent)}function ru(d,v){var S=d.alternate;return S===null?(S=Ga(d.tag,v,d.key,d.mode),S.elementType=d.elementType,S.type=d.type,S.stateNode=d.stateNode,S.alternate=d,d.alternate=S):(S.pendingProps=v,S.type=d.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=d.flags&65011712,S.childLanes=d.childLanes,S.lanes=d.lanes,S.child=d.child,S.memoizedProps=d.memoizedProps,S.memoizedState=d.memoizedState,S.updateQueue=d.updateQueue,v=d.dependencies,S.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext},S.sibling=d.sibling,S.index=d.index,S.ref=d.ref,S.refCleanup=d.refCleanup,S}function H1(d,v){d.flags&=65011714;var S=d.alternate;return S===null?(d.childLanes=0,d.lanes=v,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=S.childLanes,d.lanes=S.lanes,d.child=S.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=S.memoizedProps,d.memoizedState=S.memoizedState,d.updateQueue=S.updateQueue,d.type=S.type,v=S.dependencies,d.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext}),d}function Pp(d,v,S,R,N,Y){var Ce=0;if(R=d,typeof d=="function")Tu(d)&&(Ce=1);else if(typeof d=="string")Ce=fb(d,S,vt.current)?26:d==="html"||d==="head"||d==="body"?27:5;else e:switch(d){case ue:return d=Ga(31,S,v,N),d.elementType=ue,d.lanes=Y,d;case K:return Id(S.children,N,Y,v);case z:Ce=8,N|=24;break;case Q:return d=Ga(12,S,v,N|2),d.elementType=Q,d.lanes=Y,d;case ee:return d=Ga(13,S,v,N),d.elementType=ee,d.lanes=Y,d;case X:return d=Ga(19,S,v,N),d.elementType=X,d.lanes=Y,d;default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case $:Ce=10;break e;case V:Ce=9;break e;case Z:Ce=11;break e;case W:Ce=14;break e;case se:Ce=16,R=null;break e}Ce=29,S=Error(i(130,d===null?"null":typeof d,"")),R=null}return v=Ga(Ce,S,v,N),v.elementType=d,v.type=R,v.lanes=Y,v}function Id(d,v,S,R){return d=Ga(7,d,R,v),d.lanes=S,d}function eh(d,v,S){return d=Ga(6,d,null,v),d.lanes=S,d}function kh(d){var v=Ga(18,null,null,0);return v.stateNode=d,v}function Dh(d,v,S){return v=Ga(4,d.children!==null?d.children:[],d.key,v),v.lanes=S,v.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},v}var Rh=new WeakMap;function dl(d,v){if(typeof d=="object"&&d!==null){var S=Rh.get(d);return S!==void 0?S:(v={value:d,source:v,stack:Fn(v)},Rh.set(d,v),v)}return{value:d,source:v,stack:Fn(v)}}var Td=[],th=0,cs=null,Fs=0,Xa=[],Rl=0,cA=null,ou=1,ic="";function Pl(d,v){Td[th++]=Fs,Td[th++]=cs,cs=d,Fs=v}function Ph(d,v,S){Xa[Rl++]=ou,Xa[Rl++]=ic,Xa[Rl++]=cA,cA=d;var R=ou;d=ic;var N=32-ae(R)-1;R&=~(1<<N),S+=1;var Y=32-ae(v)+N;if(30<Y){var Ce=N-N%5;Y=(R&(1<<Ce)-1).toString(32),R>>=Ce,N-=Ce,ou=1<<32-ae(v)+N|S<<N|R,ic=Y+d}else ou=1<<Y|S<<N|R,ic=d}function Rc(d){d.return!==null&&(Pl(d,1),Ph(d,1,0))}function Lh(d){for(;d===cs;)cs=Td[--th],Td[th]=null,Fs=Td[--th],Td[th]=null;for(;d===cA;)cA=Xa[--Rl],Xa[Rl]=null,ic=Xa[--Rl],Xa[Rl]=null,ou=Xa[--Rl],Xa[Rl]=null}function kd(d,v){Xa[Rl++]=ou,Xa[Rl++]=ic,Xa[Rl++]=cA,ou=v.id,ic=v.overflow,cA=d}var zs=null,so=null,Pr=!1,AA=null,Nr=!1,Pc=Error(i(519));function ra(d){var v=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw oc(dl(v,d)),Pc}function nh(d){var v=d.stateNode,S=d.type,R=d.memoizedProps;switch(v[an]=d,v[Kn]=R,S){case"dialog":Lr("cancel",v),Lr("close",v);break;case"iframe":case"object":case"embed":Lr("load",v);break;case"video":case"audio":for(S=0;S<e1.length;S++)Lr(e1[S],v);break;case"source":Lr("error",v);break;case"img":case"image":case"link":Lr("error",v),Lr("load",v);break;case"details":Lr("toggle",v);break;case"input":Lr("invalid",v),Il(v,R.value,R.defaultValue,R.checked,R.defaultChecked,R.type,R.name,!0);break;case"select":Lr("invalid",v);break;case"textarea":Lr("invalid",v),ws(v,R.value,R.defaultValue,R.children)}S=R.children,typeof S!="string"&&typeof S!="number"&&typeof S!="bigint"||v.textContent===""+S||R.suppressHydrationWarning===!0||am(v.textContent,S)?(R.popover!=null&&(Lr("beforetoggle",v),Lr("toggle",v)),R.onScroll!=null&&Lr("scroll",v),R.onScrollEnd!=null&&Lr("scrollend",v),R.onClick!=null&&(v.onclick=zi),v=!0):v=!1,v||ra(d,!0)}function rc(d){for(zs=d.return;zs;)switch(zs.tag){case 5:case 31:case 13:Nr=!1;return;case 27:case 3:Nr=!0;return;default:zs=zs.return}}function Uh(d){if(d!==zs)return!1;if(!Pr)return rc(d),Pr=!0,!1;var v=d.tag,S;if((S=v!==3&&v!==27)&&((S=v===5)&&(S=d.type,S=!(S!=="form"&&S!=="button")||ed(d.type,d.memoizedProps)),S=!S),S&&so&&ra(d),rc(d),v===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));so=u_(d)}else if(v===31){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));so=u_(d)}else v===27?(v=so,Oi(d.type)?(d=qf,qf=null,so=d):so=v):so=zs?yl(d.stateNode.nextSibling):null;return!0}function Ne(){so=zs=null,Pr=!1}function hA(){var d=AA;return d!==null&&(Lu===null?Lu=d:Lu.push.apply(Lu,d),AA=null),d}function oc(d){AA===null?AA=[d]:AA.push(d)}var fl=Ie(null),sr=null,Lc=null;function dA(d,v,S){Te(fl,v._currentValue),v._currentValue=S}function ku(d){d._currentValue=fl.current,ze(fl)}function fA(d,v,S){for(;d!==null;){var R=d.alternate;if((d.childLanes&v)!==v?(d.childLanes|=v,R!==null&&(R.childLanes|=v)):R!==null&&(R.childLanes&v)!==v&&(R.childLanes|=v),d===S)break;d=d.return}}function pA(d,v,S,R){var N=d.child;for(N!==null&&(N.return=d);N!==null;){var Y=N.dependencies;if(Y!==null){var Ce=N.child;Y=Y.firstContext;e:for(;Y!==null;){var Qe=Y;Y=N;for(var mt=0;mt<v.length;mt++)if(Qe.context===v[mt]){Y.lanes|=S,Qe=Y.alternate,Qe!==null&&(Qe.lanes|=S),fA(Y.return,S,d),R||(Ce=null);break e}Y=Qe.next}}else if(N.tag===18){if(Ce=N.return,Ce===null)throw Error(i(341));Ce.lanes|=S,Y=Ce.alternate,Y!==null&&(Y.lanes|=S),fA(Ce,S,d),Ce=null}else Ce=N.child;if(Ce!==null)Ce.return=N;else for(Ce=N;Ce!==null;){if(Ce===d){Ce=null;break}if(N=Ce.sibling,N!==null){N.return=Ce.return,Ce=N;break}Ce=Ce.return}N=Ce}}function Kh(d,v,S,R){d=null;for(var N=v,Y=!1;N!==null;){if(!Y){if((N.flags&524288)!==0)Y=!0;else if((N.flags&262144)!==0)break}if(N.tag===10){var Ce=N.alternate;if(Ce===null)throw Error(i(387));if(Ce=Ce.memoizedProps,Ce!==null){var Qe=N.type;Wo(N.pendingProps.value,Ce.value)||(d!==null?d.push(Qe):d=[Qe])}}else if(N===Pt.current){if(Ce=N.alternate,Ce===null)throw Error(i(387));Ce.memoizedState.memoizedState!==N.memoizedState.memoizedState&&(d!==null?d.push(Xf):d=[Xf])}N=N.return}d!==null&&pA(v,d,S,R),v.flags|=262144}function Lp(d){for(d=d.firstContext;d!==null;){if(!Wo(d.context._currentValue,d.memoizedValue))return!0;d=d.next}return!1}function ih(d){sr=d,Lc=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function Ia(d){return k0(sr,d)}function Ja(d,v){return sr===null&&ih(d),k0(d,v)}function k0(d,v){var S=v._currentValue;if(v={context:v,memoizedValue:S,next:null},Lc===null){if(d===null)throw Error(i(308));Lc=v,d.dependencies={lanes:0,firstContext:v},d.flags|=524288}else Lc=Lc.next=v;return S}var Z1=typeof AbortController<"u"?AbortController:function(){var d=[],v=this.signal={aborted:!1,addEventListener:function(S,R){d.push(R)}};this.abort=function(){v.aborted=!0,d.forEach(function(S){return S()})}},X1=n.unstable_scheduleCallback,sg=n.unstable_NormalPriority,oa={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qs(){return{controller:new Z1,data:new Map,refCount:0}}function Ta(d){d.refCount--,d.refCount===0&&X1(sg,function(){d.controller.abort()})}var mA=null,As=0,gA=0,sc=null;function Dd(d,v){if(mA===null){var S=mA=[];As=0,gA=Fu(),sc={status:"pending",value:void 0,then:function(R){S.push(R)}}}return As++,v.then(J1,J1),v}function J1(){if(--As===0&&mA!==null){sc!==null&&(sc.status="fulfilled");var d=mA;mA=null,gA=0,sc=null;for(var v=0;v<d.length;v++)(0,d[v])()}}function Up(d,v){var S=[],R={status:"pending",value:null,reason:null,then:function(N){S.push(N)}};return d.then(function(){R.status="fulfilled",R.value=v;for(var N=0;N<S.length;N++)(0,S[N])(v)},function(N){for(R.status="rejected",R.reason=N,N=0;N<S.length;N++)(0,S[N])(void 0)}),R}var Du=Se.S;Se.S=function(d,v){JC=qn(),typeof v=="object"&&v!==null&&typeof v.then=="function"&&Dd(d,v),Du!==null&&Du(d,v)};var yA=Ie(null);function Rd(){var d=yA.current;return d!==null?d:Yo.pooledCache}function su(d,v){v===null?Te(yA,yA.current):Te(yA,v.pool)}function Gn(){var d=Rd();return d===null?null:{parent:oa._currentValue,pool:d}}var Uc=Error(i(460)),Sf=Error(i(474)),Ef=Error(i(542)),Fh={then:function(){}};function vA(d){return d=d.status,d==="fulfilled"||d==="rejected"}function Bf(d,v,S){switch(S=d[S],S===void 0?d.push(v):S!==v&&(v.then(zi,zi),v=S),v.status){case"fulfilled":return v.value;case"rejected":throw d=v.reason,Pd(d),d;default:if(typeof v.status=="string")v.then(zi,zi);else{if(d=Yo,d!==null&&100<d.shellSuspendCounter)throw Error(i(482));d=v,d.status="pending",d.then(function(R){if(v.status==="pending"){var N=v;N.status="fulfilled",N.value=R}},function(R){if(v.status==="pending"){var N=v;N.status="rejected",N.reason=R}})}switch(v.status){case"fulfilled":return v.value;case"rejected":throw d=v.reason,Pd(d),d}throw Ll=v,Uc}}function Kc(d){try{var v=d._init;return v(d._payload)}catch(S){throw S!==null&&typeof S=="object"&&typeof S.then=="function"?(Ll=S,Uc):S}}var Ll=null;function D0(){if(Ll===null)throw Error(i(459));var d=Ll;return Ll=null,d}function Pd(d){if(d===Uc||d===Ef)throw Error(i(483))}var rh=null,Ul=0;function Ld(d){var v=Ul;return Ul+=1,rh===null&&(rh=[]),Bf(rh,d,v)}function ac(d,v){v=v.props.ref,d.ref=v!==void 0?v:null}function el(d,v){throw v.$$typeof===E?Error(i(525)):(d=Object.prototype.toString.call(v),Error(i(31,d==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":d)))}function ag(d){function v(Dt,_t){if(d){var Gt=Dt.deletions;Gt===null?(Dt.deletions=[_t],Dt.flags|=16):Gt.push(_t)}}function S(Dt,_t){if(!d)return null;for(;_t!==null;)v(Dt,_t),_t=_t.sibling;return null}function R(Dt){for(var _t=new Map;Dt!==null;)Dt.key!==null?_t.set(Dt.key,Dt):_t.set(Dt.index,Dt),Dt=Dt.sibling;return _t}function N(Dt,_t){return Dt=ru(Dt,_t),Dt.index=0,Dt.sibling=null,Dt}function Y(Dt,_t,Gt){return Dt.index=Gt,d?(Gt=Dt.alternate,Gt!==null?(Gt=Gt.index,Gt<_t?(Dt.flags|=67108866,_t):Gt):(Dt.flags|=67108866,_t)):(Dt.flags|=1048576,_t)}function Ce(Dt){return d&&Dt.alternate===null&&(Dt.flags|=67108866),Dt}function Qe(Dt,_t,Gt,dn){return _t===null||_t.tag!==6?(_t=eh(Gt,Dt.mode,dn),_t.return=Dt,_t):(_t=N(_t,Gt),_t.return=Dt,_t)}function mt(Dt,_t,Gt,dn){var Di=Gt.type;return Di===K?un(Dt,_t,Gt.props.children,dn,Gt.key):_t!==null&&(_t.elementType===Di||typeof Di=="object"&&Di!==null&&Di.$$typeof===se&&Kc(Di)===_t.type)?(_t=N(_t,Gt.props),ac(_t,Gt),_t.return=Dt,_t):(_t=Pp(Gt.type,Gt.key,Gt.props,null,Dt.mode,dn),ac(_t,Gt),_t.return=Dt,_t)}function Wt(Dt,_t,Gt,dn){return _t===null||_t.tag!==4||_t.stateNode.containerInfo!==Gt.containerInfo||_t.stateNode.implementation!==Gt.implementation?(_t=Dh(Gt,Dt.mode,dn),_t.return=Dt,_t):(_t=N(_t,Gt.children||[]),_t.return=Dt,_t)}function un(Dt,_t,Gt,dn,Di){return _t===null||_t.tag!==7?(_t=Id(Gt,Dt.mode,dn,Di),_t.return=Dt,_t):(_t=N(_t,Gt),_t.return=Dt,_t)}function fn(Dt,_t,Gt){if(typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint")return _t=eh(""+_t,Dt.mode,Gt),_t.return=Dt,_t;if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case I:return Gt=Pp(_t.type,_t.key,_t.props,null,Dt.mode,Gt),ac(Gt,_t),Gt.return=Dt,Gt;case P:return _t=Dh(_t,Dt.mode,Gt),_t.return=Dt,_t;case se:return _t=Kc(_t),fn(Dt,_t,Gt)}if(Fe(_t)||Ee(_t))return _t=Id(_t,Dt.mode,Gt,null),_t.return=Dt,_t;if(typeof _t.then=="function")return fn(Dt,Ld(_t),Gt);if(_t.$$typeof===$)return fn(Dt,Ja(Dt,_t),Gt);el(Dt,_t)}return null}function $t(Dt,_t,Gt,dn){var Di=_t!==null?_t.key:null;if(typeof Gt=="string"&&Gt!==""||typeof Gt=="number"||typeof Gt=="bigint")return Di!==null?null:Qe(Dt,_t,""+Gt,dn);if(typeof Gt=="object"&&Gt!==null){switch(Gt.$$typeof){case I:return Gt.key===Di?mt(Dt,_t,Gt,dn):null;case P:return Gt.key===Di?Wt(Dt,_t,Gt,dn):null;case se:return Gt=Kc(Gt),$t(Dt,_t,Gt,dn)}if(Fe(Gt)||Ee(Gt))return Di!==null?null:un(Dt,_t,Gt,dn,null);if(typeof Gt.then=="function")return $t(Dt,_t,Ld(Gt),dn);if(Gt.$$typeof===$)return $t(Dt,_t,Ja(Dt,Gt),dn);el(Dt,Gt)}return null}function tn(Dt,_t,Gt,dn,Di){if(typeof dn=="string"&&dn!==""||typeof dn=="number"||typeof dn=="bigint")return Dt=Dt.get(Gt)||null,Qe(_t,Dt,""+dn,Di);if(typeof dn=="object"&&dn!==null){switch(dn.$$typeof){case I:return Dt=Dt.get(dn.key===null?Gt:dn.key)||null,mt(_t,Dt,dn,Di);case P:return Dt=Dt.get(dn.key===null?Gt:dn.key)||null,Wt(_t,Dt,dn,Di);case se:return dn=Kc(dn),tn(Dt,_t,Gt,dn,Di)}if(Fe(dn)||Ee(dn))return Dt=Dt.get(Gt)||null,un(_t,Dt,dn,Di,null);if(typeof dn.then=="function")return tn(Dt,_t,Gt,Ld(dn),Di);if(dn.$$typeof===$)return tn(Dt,_t,Gt,Ja(_t,dn),Di);el(_t,dn)}return null}function mi(Dt,_t,Gt,dn){for(var Di=null,oo=null,_i=_t,Ar=_t=0,Ur=null;_i!==null&&Ar<Gt.length;Ar++){_i.index>Ar?(Ur=_i,_i=null):Ur=_i.sibling;var Ao=$t(Dt,_i,Gt[Ar],dn);if(Ao===null){_i===null&&(_i=Ur);break}d&&_i&&Ao.alternate===null&&v(Dt,_i),_t=Y(Ao,_t,Ar),oo===null?Di=Ao:oo.sibling=Ao,oo=Ao,_i=Ur}if(Ar===Gt.length)return S(Dt,_i),Pr&&Pl(Dt,Ar),Di;if(_i===null){for(;Ar<Gt.length;Ar++)_i=fn(Dt,Gt[Ar],dn),_i!==null&&(_t=Y(_i,_t,Ar),oo===null?Di=_i:oo.sibling=_i,oo=_i);return Pr&&Pl(Dt,Ar),Di}for(_i=R(_i);Ar<Gt.length;Ar++)Ur=tn(_i,Dt,Ar,Gt[Ar],dn),Ur!==null&&(d&&Ur.alternate!==null&&_i.delete(Ur.key===null?Ar:Ur.key),_t=Y(Ur,_t,Ar),oo===null?Di=Ur:oo.sibling=Ur,oo=Ur);return d&&_i.forEach(function(ep){return v(Dt,ep)}),Pr&&Pl(Dt,Ar),Di}function ji(Dt,_t,Gt,dn){if(Gt==null)throw Error(i(151));for(var Di=null,oo=null,_i=_t,Ar=_t=0,Ur=null,Ao=Gt.next();_i!==null&&!Ao.done;Ar++,Ao=Gt.next()){_i.index>Ar?(Ur=_i,_i=null):Ur=_i.sibling;var ep=$t(Dt,_i,Ao.value,dn);if(ep===null){_i===null&&(_i=Ur);break}d&&_i&&ep.alternate===null&&v(Dt,_i),_t=Y(ep,_t,Ar),oo===null?Di=ep:oo.sibling=ep,oo=ep,_i=Ur}if(Ao.done)return S(Dt,_i),Pr&&Pl(Dt,Ar),Di;if(_i===null){for(;!Ao.done;Ar++,Ao=Gt.next())Ao=fn(Dt,Ao.value,dn),Ao!==null&&(_t=Y(Ao,_t,Ar),oo===null?Di=Ao:oo.sibling=Ao,oo=Ao);return Pr&&Pl(Dt,Ar),Di}for(_i=R(_i);!Ao.done;Ar++,Ao=Gt.next())Ao=tn(_i,Dt,Ar,Ao.value,dn),Ao!==null&&(d&&Ao.alternate!==null&&_i.delete(Ao.key===null?Ar:Ao.key),_t=Y(Ao,_t,Ar),oo===null?Di=Ao:oo.sibling=Ao,oo=Ao);return d&&_i.forEach(function(p){return v(Dt,p)}),Pr&&Pl(Dt,Ar),Di}function jo(Dt,_t,Gt,dn){if(typeof Gt=="object"&&Gt!==null&&Gt.type===K&&Gt.key===null&&(Gt=Gt.props.children),typeof Gt=="object"&&Gt!==null){switch(Gt.$$typeof){case I:e:{for(var Di=Gt.key;_t!==null;){if(_t.key===Di){if(Di=Gt.type,Di===K){if(_t.tag===7){S(Dt,_t.sibling),dn=N(_t,Gt.props.children),dn.return=Dt,Dt=dn;break e}}else if(_t.elementType===Di||typeof Di=="object"&&Di!==null&&Di.$$typeof===se&&Kc(Di)===_t.type){S(Dt,_t.sibling),dn=N(_t,Gt.props),ac(dn,Gt),dn.return=Dt,Dt=dn;break e}S(Dt,_t);break}else v(Dt,_t);_t=_t.sibling}Gt.type===K?(dn=Id(Gt.props.children,Dt.mode,dn,Gt.key),dn.return=Dt,Dt=dn):(dn=Pp(Gt.type,Gt.key,Gt.props,null,Dt.mode,dn),ac(dn,Gt),dn.return=Dt,Dt=dn)}return Ce(Dt);case P:e:{for(Di=Gt.key;_t!==null;){if(_t.key===Di)if(_t.tag===4&&_t.stateNode.containerInfo===Gt.containerInfo&&_t.stateNode.implementation===Gt.implementation){S(Dt,_t.sibling),dn=N(_t,Gt.children||[]),dn.return=Dt,Dt=dn;break e}else{S(Dt,_t);break}else v(Dt,_t);_t=_t.sibling}dn=Dh(Gt,Dt.mode,dn),dn.return=Dt,Dt=dn}return Ce(Dt);case se:return Gt=Kc(Gt),jo(Dt,_t,Gt,dn)}if(Fe(Gt))return mi(Dt,_t,Gt,dn);if(Ee(Gt)){if(Di=Ee(Gt),typeof Di!="function")throw Error(i(150));return Gt=Di.call(Gt),ji(Dt,_t,Gt,dn)}if(typeof Gt.then=="function")return jo(Dt,_t,Ld(Gt),dn);if(Gt.$$typeof===$)return jo(Dt,_t,Ja(Dt,Gt),dn);el(Dt,Gt)}return typeof Gt=="string"&&Gt!==""||typeof Gt=="number"||typeof Gt=="bigint"?(Gt=""+Gt,_t!==null&&_t.tag===6?(S(Dt,_t.sibling),dn=N(_t,Gt),dn.return=Dt,Dt=dn):(S(Dt,_t),dn=eh(Gt,Dt.mode,dn),dn.return=Dt,Dt=dn),Ce(Dt)):S(Dt,_t)}return function(Dt,_t,Gt,dn){try{Ul=0;var Di=jo(Dt,_t,Gt,dn);return rh=null,Di}catch(_i){if(_i===Uc||_i===Ef)throw _i;var oo=Ga(29,_i,null,Dt.mode);return oo.lanes=dn,oo.return=Dt,oo}finally{}}}var bA=ag(!0),R0=ag(!1),Ru=!1;function tl(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ao(d,v){d=d.updateQueue,v.updateQueue===d&&(v.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function zh(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function Kl(d,v,S){var R=d.updateQueue;if(R===null)return null;if(R=R.shared,(ro&2)!==0){var N=R.pending;return N===null?v.next=v:(v.next=N.next,N.next=v),R.pending=v,v=rr(d),Rp(d,null,S),v}return tc(d,R,v,S),rr(d)}function oh(d,v,S){if(v=v.updateQueue,v!==null&&(v=v.shared,(S&4194048)!==0)){var R=v.lanes;R&=d.pendingLanes,S|=R,v.lanes=S,Zn(d,S)}}function Of(d,v){var S=d.updateQueue,R=d.alternate;if(R!==null&&(R=R.updateQueue,S===R)){var N=null,Y=null;if(S=S.firstBaseUpdate,S!==null){do{var Ce={lane:S.lane,tag:S.tag,payload:S.payload,callback:null,next:null};Y===null?N=Y=Ce:Y=Y.next=Ce,S=S.next}while(S!==null);Y===null?N=Y=v:Y=Y.next=v}else N=Y=v;S={baseState:R.baseState,firstBaseUpdate:N,lastBaseUpdate:Y,shared:R.shared,callbacks:R.callbacks},d.updateQueue=S;return}d=S.lastBaseUpdate,d===null?S.firstBaseUpdate=v:d.next=v,S.lastBaseUpdate=v}var ba=!1;function sh(){if(ba){var d=sc;if(d!==null)throw d}}function jh(d,v,S,R){ba=!1;var N=d.updateQueue;Ru=!1;var Y=N.firstBaseUpdate,Ce=N.lastBaseUpdate,Qe=N.shared.pending;if(Qe!==null){N.shared.pending=null;var mt=Qe,Wt=mt.next;mt.next=null,Ce===null?Y=Wt:Ce.next=Wt,Ce=mt;var un=d.alternate;un!==null&&(un=un.updateQueue,Qe=un.lastBaseUpdate,Qe!==Ce&&(Qe===null?un.firstBaseUpdate=Wt:Qe.next=Wt,un.lastBaseUpdate=mt))}if(Y!==null){var fn=N.baseState;Ce=0,un=Wt=mt=null,Qe=Y;do{var $t=Qe.lane&-536870913,tn=$t!==Qe.lane;if(tn?(Zr&$t)===$t:(R&$t)===$t){$t!==0&&$t===gA&&(ba=!0),un!==null&&(un=un.next={lane:0,tag:Qe.tag,payload:Qe.payload,callback:null,next:null});e:{var mi=d,ji=Qe;$t=v;var jo=S;switch(ji.tag){case 1:if(mi=ji.payload,typeof mi=="function"){fn=mi.call(jo,fn,$t);break e}fn=mi;break e;case 3:mi.flags=mi.flags&-65537|128;case 0:if(mi=ji.payload,$t=typeof mi=="function"?mi.call(jo,fn,$t):mi,$t==null)break e;fn=_({},fn,$t);break e;case 2:Ru=!0}}$t=Qe.callback,$t!==null&&(d.flags|=64,tn&&(d.flags|=8192),tn=N.callbacks,tn===null?N.callbacks=[$t]:tn.push($t))}else tn={lane:$t,tag:Qe.tag,payload:Qe.payload,callback:Qe.callback,next:null},un===null?(Wt=un=tn,mt=fn):un=un.next=tn,Ce|=$t;if(Qe=Qe.next,Qe===null){if(Qe=N.shared.pending,Qe===null)break;tn=Qe,Qe=tn.next,tn.next=null,N.lastBaseUpdate=tn,N.shared.pending=null}}while(!0);un===null&&(mt=fn),N.baseState=mt,N.firstBaseUpdate=Wt,N.lastBaseUpdate=un,Y===null&&(N.shared.lanes=0),Ff|=Ce,d.lanes=Ce,d.memoizedState=fn}}function lc(d,v){if(typeof d!="function")throw Error(i(191,d));d.call(v)}function au(d,v){var S=d.callbacks;if(S!==null)for(d.callbacks=null,d=0;d<S.length;d++)lc(S[d],v)}var Fl=Ie(null),Vn=Ie(0);function wi(d,v){d=OA,Te(Vn,d),Te(Fl,v),OA=d|v.baseLanes}function sa(){Te(Vn,OA),Te(Fl,Fl.current)}function If(){OA=Vn.current,ze(Fl),ze(Vn)}var nl=Ie(null),Qo=null;function ka(d){var v=d.alternate;Te(hs,hs.current&1),Te(nl,d),Qo===null&&(v===null||Fl.current!==null||v.memoizedState!==null)&&(Qo=d)}function Tf(d){Te(hs,hs.current),Te(nl,d),Qo===null&&(Qo=d)}function ey(d){d.tag===22?(Te(hs,hs.current),Te(nl,d),Qo===null&&(Qo=d)):uc()}function uc(){Te(hs,hs.current),Te(nl,nl.current)}function lu(d){ze(nl),Qo===d&&(Qo=null),ze(hs)}var hs=Ie(0);function lo(d){for(var v=d;v!==null;){if(v.tag===13){var S=v.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||um(S)||Sg(S)))return v}else if(v.tag===19&&(v.memoizedProps.revealOrder==="forwards"||v.memoizedProps.revealOrder==="backwards"||v.memoizedProps.revealOrder==="unstable_legacy-backwards"||v.memoizedProps.revealOrder==="together")){if((v.flags&128)!==0)return v}else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===d)break;for(;v.sibling===null;){if(v.return===null||v.return===d)return null;v=v.return}v.sibling.return=v.return,v=v.sibling}return null}var Hr=0,ar=null,uo=null,ns=null,Ud=!1,Nh=!1,zl=!1,ah=0,CA=0,Fc=null,Kp=0;function is(){throw Error(i(321))}function lh(d,v){if(v===null)return!1;for(var S=0;S<v.length&&S<d.length;S++)if(!Wo(d[S],v[S]))return!1;return!0}function _A(d,v,S,R,N,Y){return Hr=Y,ar=v,v.memoizedState=null,v.updateQueue=null,v.lanes=0,Se.H=d===null||d.memoizedState===null?P0:MA,zl=!1,Y=S(R,N),zl=!1,Nh&&(Y=Gh(v,S,R,N)),Fp(d),Y}function Fp(d){Se.H=ch;var v=uo!==null&&uo.next!==null;if(Hr=0,ns=uo=ar=null,Ud=!1,CA=0,Fc=null,v)throw Error(i(300));d===null||Vs||(d=d.dependencies,d!==null&&Lp(d)&&(Vs=!0))}function Gh(d,v,S,R){ar=d;var N=0;do{if(Nh&&(Fc=null),CA=0,Nh=!1,25<=N)throw Error(i(301));if(N+=1,ns=uo=null,d.updateQueue!=null){var Y=d.updateQueue;Y.lastEffect=null,Y.events=null,Y.stores=null,Y.memoCache!=null&&(Y.memoCache.index=0)}Se.H=jp,Y=v(S,R)}while(Nh);return Y}function Kd(){var d=Se.H,v=d.useState()[0];return v=typeof v.then=="function"?m(v):v,d=d.useState()[0],(uo!==null?uo.memoizedState:null)!==d&&(ar.flags|=1024),v}function Fd(){var d=ah!==0;return ah=0,d}function kf(d,v,S){v.updateQueue=d.updateQueue,v.flags&=-2053,d.lanes&=~S}function Df(d){if(Ud){for(d=d.memoizedState;d!==null;){var v=d.queue;v!==null&&(v.pending=null),d=d.next}Ud=!1}Hr=0,ns=uo=ar=null,Nh=!1,CA=ah=0,Fc=null}function Da(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ns===null?ar.memoizedState=ns=d:ns=ns.next=d,ns}function T(){if(uo===null){var d=ar.alternate;d=d!==null?d.memoizedState:null}else d=uo.next;var v=ns===null?ar.memoizedState:ns.next;if(v!==null)ns=v,uo=d;else{if(d===null)throw ar.alternate===null?Error(i(467)):Error(i(310));uo=d,d={memoizedState:uo.memoizedState,baseState:uo.baseState,baseQueue:uo.baseQueue,queue:uo.queue,next:null},ns===null?ar.memoizedState=ns=d:ns=ns.next=d}return ns}function u(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function m(d){var v=CA;return CA+=1,Fc===null&&(Fc=[]),d=Bf(Fc,d,v),v=ar,(ns===null?v.memoizedState:ns.next)===null&&(v=v.alternate,Se.H=v===null||v.memoizedState===null?P0:MA),d}function M(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return m(d);if(d.$$typeof===$)return Ia(d)}throw Error(i(438,String(d)))}function O(d){var v=null,S=ar.updateQueue;if(S!==null&&(v=S.memoCache),v==null){var R=ar.alternate;R!==null&&(R=R.updateQueue,R!==null&&(R=R.memoCache,R!=null&&(v={data:R.data.map(function(N){return N.slice()}),index:0})))}if(v==null&&(v={data:[],index:0}),S===null&&(S=u(),ar.updateQueue=S),S.memoCache=v,S=v.data[v.index],S===void 0)for(S=v.data[v.index]=Array(d),R=0;R<d;R++)S[R]=ve;return v.index++,S}function D(d,v){return typeof v=="function"?v(d):v}function U(d){var v=T();return G(v,uo,d)}function G(d,v,S){var R=d.queue;if(R===null)throw Error(i(311));R.lastRenderedReducer=S;var N=d.baseQueue,Y=R.pending;if(Y!==null){if(N!==null){var Ce=N.next;N.next=Y.next,Y.next=Ce}v.baseQueue=N=Y,R.pending=null}if(Y=d.baseState,N===null)d.memoizedState=Y;else{v=N.next;var Qe=Ce=null,mt=null,Wt=v,un=!1;do{var fn=Wt.lane&-536870913;if(fn!==Wt.lane?(Zr&fn)===fn:(Hr&fn)===fn){var $t=Wt.revertLane;if($t===0)mt!==null&&(mt=mt.next={lane:0,revertLane:0,gesture:null,action:Wt.action,hasEagerState:Wt.hasEagerState,eagerState:Wt.eagerState,next:null}),fn===gA&&(un=!0);else if((Hr&$t)===$t){Wt=Wt.next,$t===gA&&(un=!0);continue}else fn={lane:0,revertLane:Wt.revertLane,gesture:null,action:Wt.action,hasEagerState:Wt.hasEagerState,eagerState:Wt.eagerState,next:null},mt===null?(Qe=mt=fn,Ce=Y):mt=mt.next=fn,ar.lanes|=$t,Ff|=$t;fn=Wt.action,zl&&S(Y,fn),Y=Wt.hasEagerState?Wt.eagerState:S(Y,fn)}else $t={lane:fn,revertLane:Wt.revertLane,gesture:Wt.gesture,action:Wt.action,hasEagerState:Wt.hasEagerState,eagerState:Wt.eagerState,next:null},mt===null?(Qe=mt=$t,Ce=Y):mt=mt.next=$t,ar.lanes|=fn,Ff|=fn;Wt=Wt.next}while(Wt!==null&&Wt!==v);if(mt===null?Ce=Y:mt.next=Qe,!Wo(Y,d.memoizedState)&&(Vs=!0,un&&(S=sc,S!==null)))throw S;d.memoizedState=Y,d.baseState=Ce,d.baseQueue=mt,R.lastRenderedState=Y}return N===null&&(R.lanes=0),[d.memoizedState,R.dispatch]}function q(d){var v=T(),S=v.queue;if(S===null)throw Error(i(311));S.lastRenderedReducer=d;var R=S.dispatch,N=S.pending,Y=v.memoizedState;if(N!==null){S.pending=null;var Ce=N=N.next;do Y=d(Y,Ce.action),Ce=Ce.next;while(Ce!==N);Wo(Y,v.memoizedState)||(Vs=!0),v.memoizedState=Y,v.baseQueue===null&&(v.baseState=Y),S.lastRenderedState=Y}return[Y,R]}function oe(d,v,S){var R=ar,N=T(),Y=Pr;if(Y){if(S===void 0)throw Error(i(407));S=S()}else S=v();var Ce=!Wo((uo||N).memoizedState,S);if(Ce&&(N.memoizedState=S,Vs=!0),N=N.queue,Fi(pe.bind(null,R,N,d),[d]),N.getSnapshot!==v||Ce||ns!==null&&ns.memoizedState.tag&1){if(R.flags|=2048,pn(9,{destroy:void 0},me.bind(null,R,N,S,v),null),Yo===null)throw Error(i(349));Y||(Hr&127)!==0||le(R,v,S)}return S}function le(d,v,S){d.flags|=16384,d={getSnapshot:v,value:S},v=ar.updateQueue,v===null?(v=u(),ar.updateQueue=v,v.stores=[d]):(S=v.stores,S===null?v.stores=[d]:S.push(d))}function me(d,v,S,R){v.value=S,v.getSnapshot=R,xe(v)&&Le(d)}function pe(d,v,S){return S(function(){xe(v)&&Le(d)})}function xe(d){var v=d.getSnapshot;d=d.value;try{var S=v();return!Wo(d,S)}catch{return!0}}function Le(d){var v=Dc(d,2);v!==null&&Uu(v,d,2)}function Ve(d){var v=Da();if(typeof d=="function"){var S=d;if(d=S(),zl){Xe(!0);try{S()}finally{Xe(!1)}}}return v.memoizedState=v.baseState=d,v.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:D,lastRenderedState:d},v}function He(d,v,S,R){return d.baseState=S,G(d,uo,typeof R=="function"?R:D)}function Ze(d,v,S,R,N){if(co(d))throw Error(i(485));if(d=v.action,d!==null){var Y={payload:N,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Ce){Y.listeners.push(Ce)}};Se.T!==null?S(!0):Y.isTransition=!1,R(Y),S=v.pending,S===null?(Y.next=v.pending=Y,et(v,Y)):(Y.next=S.next,v.pending=S.next=Y)}}function et(d,v){var S=v.action,R=v.payload,N=d.state;if(v.isTransition){var Y=Se.T,Ce={};Se.T=Ce;try{var Qe=S(N,R),mt=Se.S;mt!==null&&mt(Ce,Qe),lt(d,v,Qe)}catch(Wt){At(d,v,Wt)}finally{Y!==null&&Ce.types!==null&&(Y.types=Ce.types),Se.T=Y}}else try{Y=S(N,R),lt(d,v,Y)}catch(Wt){At(d,v,Wt)}}function lt(d,v,S){S!==null&&typeof S=="object"&&typeof S.then=="function"?S.then(function(R){Je(d,v,R)},function(R){return At(d,v,R)}):Je(d,v,S)}function Je(d,v,S){v.status="fulfilled",v.value=S,pt(v),d.state=S,v=d.pending,v!==null&&(S=v.next,S===v?d.pending=null:(S=S.next,v.next=S,et(d,S)))}function At(d,v,S){var R=d.pending;if(d.pending=null,R!==null){R=R.next;do v.status="rejected",v.reason=S,pt(v),v=v.next;while(v!==R)}d.action=null}function pt(d){d=d.listeners;for(var v=0;v<d.length;v++)(0,d[v])()}function it(d,v){return v}function Ct(d,v){if(Pr){var S=Yo.formState;if(S!==null){e:{var R=ar;if(Pr){if(so){t:{for(var N=so,Y=Nr;N.nodeType!==8;){if(!Y){N=null;break t}if(N=yl(N.nextSibling),N===null){N=null;break t}}Y=N.data,N=Y==="F!"||Y==="F"?N:null}if(N){so=yl(N.nextSibling),R=N.data==="F!";break e}}ra(R)}R=!1}R&&(v=S[0])}}return S=Da(),S.memoizedState=S.baseState=v,R={pending:null,lanes:0,dispatch:null,lastRenderedReducer:it,lastRenderedState:v},S.queue=R,S=ps.bind(null,ar,R),R.dispatch=S,R=Ve(!1),Y=ms.bind(null,ar,!1,R.queue),R=Da(),N={state:v,dispatch:null,action:d,pending:null},R.queue=N,S=Ze.bind(null,ar,N,Y,S),N.dispatch=S,R.memoizedState=d,[v,S,!1]}function Nt(d){var v=T();return Kt(v,uo,d)}function Kt(d,v,S){if(v=G(d,v,it)[0],d=U(D)[0],typeof v=="object"&&v!==null&&typeof v.then=="function")try{var R=m(v)}catch(Ce){throw Ce===Uc?Ef:Ce}else R=v;v=T();var N=v.queue,Y=N.dispatch;return S!==v.memoizedState&&(ar.flags|=2048,pn(9,{destroy:void 0},Ft.bind(null,N,S),null)),[R,Y,d]}function Ft(d,v){d.action=v}function jt(d){var v=T(),S=uo;if(S!==null)return Kt(v,S,d);T(),v=v.memoizedState,S=T();var R=S.queue.dispatch;return S.memoizedState=d,[v,R,!1]}function pn(d,v,S,R){return d={tag:d,create:S,deps:R,inst:v,next:null},v=ar.updateQueue,v===null&&(v=u(),ar.updateQueue=v),S=v.lastEffect,S===null?v.lastEffect=d.next=d:(R=S.next,S.next=d,d.next=R,v.lastEffect=d),d}function Sn(){return T().memoizedState}function rn(d,v,S,R){var N=Da();ar.flags|=d,N.memoizedState=pn(1|v,{destroy:void 0},S,R===void 0?null:R)}function $n(d,v,S,R){var N=T();R=R===void 0?null:R;var Y=N.memoizedState.inst;uo!==null&&R!==null&&lh(R,uo.memoizedState.deps)?N.memoizedState=pn(v,Y,S,R):(ar.flags|=d,N.memoizedState=pn(1|v,Y,S,R))}function Ni(d,v){rn(8390656,8,d,v)}function Fi(d,v){$n(2048,8,d,v)}function qo(d){ar.flags|=4;var v=ar.updateQueue;if(v===null)v=u(),ar.updateQueue=v,v.events=[d];else{var S=v.events;S===null?v.events=[d]:S.push(d)}}function Ko(d){var v=T().memoizedState;return qo({ref:v,nextImpl:d}),function(){if((ro&2)!==0)throw Error(i(440));return v.impl.apply(void 0,arguments)}}function ds(d,v){return $n(4,2,d,v)}function bo(d,v){return $n(4,4,d,v)}function Ys(d,v){if(typeof v=="function"){d=d();var S=v(d);return function(){typeof S=="function"?S():v(null)}}if(v!=null)return d=d(),v.current=d,function(){v.current=null}}function rs(d,v,S){S=S!=null?S.concat([d]):null,$n(4,4,Ys.bind(null,v,d),S)}function Es(){}function Bs(d,v){var S=T();v=v===void 0?null:v;var R=S.memoizedState;return v!==null&&lh(v,R[1])?R[0]:(S.memoizedState=[d,v],d)}function Gr(d,v){var S=T();v=v===void 0?null:v;var R=S.memoizedState;if(v!==null&&lh(v,R[1]))return R[0];if(R=d(),zl){Xe(!0);try{d()}finally{Xe(!1)}}return S.memoizedState=[R,v],R}function fs(d,v,S){return S===void 0||(Hr&1073741824)!==0&&(Zr&261930)===0?d.memoizedState=v:(d.memoizedState=S,d=$v(),ar.lanes|=d,Ff|=d,S)}function xA(d,v,S,R){return Wo(S,v)?S:Fl.current!==null?(d=fs(d,S,R),Wo(d,v)||(Vs=!0),d):(Hr&42)===0||(Hr&1073741824)!==0&&(Zr&261930)===0?(Vs=!0,d.memoizedState=S):(d=$v(),ar.lanes|=d,Ff|=d,v)}function zc(d,v,S,R,N){var Y=qe.p;qe.p=Y!==0&&8>Y?Y:8;var Ce=Se.T,Qe={};Se.T=Qe,ms(d,!1,v,S);try{var mt=N(),Wt=Se.S;if(Wt!==null&&Wt(Qe,mt),mt!==null&&typeof mt=="object"&&typeof mt.then=="function"){var un=Up(mt,R);To(d,v,un,qc(d))}else To(d,v,R,qc(d))}catch(fn){To(d,v,{then:function(){},status:"rejected",reason:fn},qc())}finally{qe.p=Y,Ce!==null&&Qe.types!==null&&(Ce.types=Qe.types),Se.T=Ce}}function jc(){}function jl(d,v,S,R){if(d.tag!==5)throw Error(i(476));var N=uh(d).queue;zc(d,N,v,ut,S===null?jc:function(){return uu(d),S(R)})}function uh(d){var v=d.memoizedState;if(v!==null)return v;v={memoizedState:ut,baseState:ut,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:D,lastRenderedState:ut},next:null};var S={};return v.next={memoizedState:S,baseState:S,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:D,lastRenderedState:S},next:null},d.memoizedState=v,d=d.alternate,d!==null&&(d.memoizedState=v),v}function uu(d){var v=uh(d);v.next===null&&(v=d.alternate.memoizedState),To(d,v.next.queue,{},qc())}function Nc(){return Ia(Xf)}function Nl(){return T().memoizedState}function Gl(){return T().memoizedState}function Gc(d){for(var v=d.return;v!==null;){switch(v.tag){case 24:case 3:var S=qc();d=zh(S);var R=Kl(v,d,S);R!==null&&(Uu(R,v,S),oh(R,v,S)),v={cache:qs()},d.payload=v;return}v=v.return}}function zd(d,v,S){var R=qc();S={lane:R,revertLane:0,gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null},co(d)?cc(v,S):(S=JA(d,v,S,R),S!==null&&(Uu(S,d,R),zp(S,v,R)))}function ps(d,v,S){var R=qc();To(d,v,S,R)}function To(d,v,S,R){var N={lane:R,revertLane:0,gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null};if(co(d))cc(v,N);else{var Y=d.alternate;if(d.lanes===0&&(Y===null||Y.lanes===0)&&(Y=v.lastRenderedReducer,Y!==null))try{var Ce=v.lastRenderedState,Qe=Y(Ce,S);if(N.hasEagerState=!0,N.eagerState=Qe,Wo(Qe,Ce))return tc(d,v,N,0),Yo===null&&ec(),!1}catch{}finally{}if(S=JA(d,v,N,R),S!==null)return Uu(S,d,R),zp(S,v,R),!0}return!1}function ms(d,v,S,R){if(R={lane:2,revertLane:Fu(),gesture:null,action:R,hasEagerState:!1,eagerState:null,next:null},co(d)){if(v)throw Error(i(479))}else v=JA(d,S,R,2),v!==null&&Uu(v,d,2)}function co(d){var v=d.alternate;return d===ar||v!==null&&v===ar}function cc(d,v){Nh=Ud=!0;var S=d.pending;S===null?v.next=v:(v.next=S.next,S.next=v),d.pending=v}function zp(d,v,S){if((S&4194048)!==0){var R=v.lanes;R&=d.pendingLanes,S|=R,v.lanes=S,Zn(d,S)}}var ch={readContext:Ia,use:M,useCallback:is,useContext:is,useEffect:is,useImperativeHandle:is,useLayoutEffect:is,useInsertionEffect:is,useMemo:is,useReducer:is,useRef:is,useState:is,useDebugValue:is,useDeferredValue:is,useTransition:is,useSyncExternalStore:is,useId:is,useHostTransitionStatus:is,useFormState:is,useActionState:is,useOptimistic:is,useMemoCache:is,useCacheRefresh:is};ch.useEffectEvent=is;var P0={readContext:Ia,use:M,useCallback:function(d,v){return Da().memoizedState=[d,v===void 0?null:v],d},useContext:Ia,useEffect:Ni,useImperativeHandle:function(d,v,S){S=S!=null?S.concat([d]):null,rn(4194308,4,Ys.bind(null,v,d),S)},useLayoutEffect:function(d,v){return rn(4194308,4,d,v)},useInsertionEffect:function(d,v){rn(4,2,d,v)},useMemo:function(d,v){var S=Da();v=v===void 0?null:v;var R=d();if(zl){Xe(!0);try{d()}finally{Xe(!1)}}return S.memoizedState=[R,v],R},useReducer:function(d,v,S){var R=Da();if(S!==void 0){var N=S(v);if(zl){Xe(!0);try{S(v)}finally{Xe(!1)}}}else N=v;return R.memoizedState=R.baseState=N,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:N},R.queue=d,d=d.dispatch=zd.bind(null,ar,d),[R.memoizedState,d]},useRef:function(d){var v=Da();return d={current:d},v.memoizedState=d},useState:function(d){d=Ve(d);var v=d.queue,S=ps.bind(null,ar,v);return v.dispatch=S,[d.memoizedState,S]},useDebugValue:Es,useDeferredValue:function(d,v){var S=Da();return fs(S,d,v)},useTransition:function(){var d=Ve(!1);return d=zc.bind(null,ar,d.queue,!0,!1),Da().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,v,S){var R=ar,N=Da();if(Pr){if(S===void 0)throw Error(i(407));S=S()}else{if(S=v(),Yo===null)throw Error(i(349));(Zr&127)!==0||le(R,v,S)}N.memoizedState=S;var Y={value:S,getSnapshot:v};return N.queue=Y,Ni(pe.bind(null,R,Y,d),[d]),R.flags|=2048,pn(9,{destroy:void 0},me.bind(null,R,Y,S,v),null),S},useId:function(){var d=Da(),v=Yo.identifierPrefix;if(Pr){var S=ic,R=ou;S=(R&~(1<<32-ae(R)-1)).toString(32)+S,v="_"+v+"R_"+S,S=ah++,0<S&&(v+="H"+S.toString(32)),v+="_"}else S=Kp++,v="_"+v+"r_"+S.toString(32)+"_";return d.memoizedState=v},useHostTransitionStatus:Nc,useFormState:Ct,useActionState:Ct,useOptimistic:function(d){var v=Da();v.memoizedState=v.baseState=d;var S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return v.queue=S,v=ms.bind(null,ar,!0,S),S.dispatch=v,[d,v]},useMemoCache:O,useCacheRefresh:function(){return Da().memoizedState=Gc.bind(null,ar)},useEffectEvent:function(d){var v=Da(),S={impl:d};return v.memoizedState=S,function(){if((ro&2)!==0)throw Error(i(440));return S.impl.apply(void 0,arguments)}}},MA={readContext:Ia,use:M,useCallback:Bs,useContext:Ia,useEffect:Fi,useImperativeHandle:rs,useInsertionEffect:ds,useLayoutEffect:bo,useMemo:Gr,useReducer:U,useRef:Sn,useState:function(){return U(D)},useDebugValue:Es,useDeferredValue:function(d,v){var S=T();return xA(S,uo.memoizedState,d,v)},useTransition:function(){var d=U(D)[0],v=T().memoizedState;return[typeof d=="boolean"?d:m(d),v]},useSyncExternalStore:oe,useId:Nl,useHostTransitionStatus:Nc,useFormState:Nt,useActionState:Nt,useOptimistic:function(d,v){var S=T();return He(S,uo,d,v)},useMemoCache:O,useCacheRefresh:Gl};MA.useEffectEvent=Ko;var jp={readContext:Ia,use:M,useCallback:Bs,useContext:Ia,useEffect:Fi,useImperativeHandle:rs,useInsertionEffect:ds,useLayoutEffect:bo,useMemo:Gr,useReducer:q,useRef:Sn,useState:function(){return q(D)},useDebugValue:Es,useDeferredValue:function(d,v){var S=T();return uo===null?fs(S,d,v):xA(S,uo.memoizedState,d,v)},useTransition:function(){var d=q(D)[0],v=T().memoizedState;return[typeof d=="boolean"?d:m(d),v]},useSyncExternalStore:oe,useId:Nl,useHostTransitionStatus:Nc,useFormState:jt,useActionState:jt,useOptimistic:function(d,v){var S=T();return uo!==null?He(S,uo,d,v):(S.baseState=d,[d,S.queue.dispatch])},useMemoCache:O,useCacheRefresh:Gl};jp.useEffectEvent=Ko;function Wc(d,v,S,R){v=d.memoizedState,S=S(R,v),S=S==null?v:_({},v,S),d.memoizedState=S,d.lanes===0&&(d.updateQueue.baseState=S)}var Wh={enqueueSetState:function(d,v,S){d=d._reactInternals;var R=qc(),N=zh(R);N.payload=v,S!=null&&(N.callback=S),v=Kl(d,N,R),v!==null&&(Uu(v,d,R),oh(v,d,R))},enqueueReplaceState:function(d,v,S){d=d._reactInternals;var R=qc(),N=zh(R);N.tag=1,N.payload=v,S!=null&&(N.callback=S),v=Kl(d,N,R),v!==null&&(Uu(v,d,R),oh(v,d,R))},enqueueForceUpdate:function(d,v){d=d._reactInternals;var S=qc(),R=zh(S);R.tag=2,v!=null&&(R.callback=v),v=Kl(d,R,S),v!==null&&(Uu(v,d,S),oh(v,d,S))}};function lg(d,v,S,R,N,Y,Ce){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(R,Y,Ce):v.prototype&&v.prototype.isPureReactComponent?!Tl(S,R)||!Tl(N,Y):!0}function wA(d,v,S,R){d=v.state,typeof v.componentWillReceiveProps=="function"&&v.componentWillReceiveProps(S,R),typeof v.UNSAFE_componentWillReceiveProps=="function"&&v.UNSAFE_componentWillReceiveProps(S,R),v.state!==d&&Wh.enqueueReplaceState(v,v.state,null)}function js(d,v){var S=v;if("ref"in v){S={};for(var R in v)R!=="ref"&&(S[R]=v[R])}if(d=d.defaultProps){S===v&&(S=_({},S));for(var N in d)S[N]===void 0&&(S[N]=d[N])}return S}function Np(d){Od(d)}function Gp(d){console.error(d)}function ty(d){Od(d)}function ug(d,v){try{var S=d.onUncaughtError;S(v.value,{componentStack:v.stack})}catch(R){setTimeout(function(){throw R})}}function L0(d,v,S){try{var R=d.onCaughtError;R(S.value,{componentStack:S.stack,errorBoundary:v.tag===1?v.stateNode:null})}catch(N){setTimeout(function(){throw N})}}function ny(d,v,S){return S=zh(S),S.tag=3,S.payload={element:null},S.callback=function(){ug(d,v)},S}function Qh(d){return d=zh(d),d.tag=3,d}function cg(d,v,S,R){var N=S.type.getDerivedStateFromError;if(typeof N=="function"){var Y=R.value;d.payload=function(){return N(Y)},d.callback=function(){L0(v,S,R)}}var Ce=S.stateNode;Ce!==null&&typeof Ce.componentDidCatch=="function"&&(d.callback=function(){L0(v,S,R),typeof N!="function"&&(Yd===null?Yd=new Set([this]):Yd.add(this));var Qe=R.stack;this.componentDidCatch(R.value,{componentStack:Qe!==null?Qe:""})})}function Pv(d,v,S,R,N){if(S.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){if(v=S.alternate,v!==null&&Kh(v,S,N,!0),S=nl.current,S!==null){switch(S.tag){case 31:case 13:return Qo===null?by():S.alternate===null&&la===0&&(la=3),S.flags&=-257,S.flags|=65536,S.lanes=N,R===Fh?S.flags|=16384:(v=S.updateQueue,v===null?S.updateQueue=new Set([R]):v.add(R),tb(d,R,N)),!1;case 22:return S.flags|=65536,R===Fh?S.flags|=16384:(v=S.updateQueue,v===null?(v={transitions:null,markerInstances:null,retryQueue:new Set([R])},S.updateQueue=v):(S=v.retryQueue,S===null?v.retryQueue=new Set([R]):S.add(R)),tb(d,R,N)),!1}throw Error(i(435,S.tag))}return tb(d,R,N),by(),!1}if(Pr)return v=nl.current,v!==null?((v.flags&65536)===0&&(v.flags|=256),v.flags|=65536,v.lanes=N,R!==Pc&&(d=Error(i(422),{cause:R}),oc(dl(d,S)))):(R!==Pc&&(v=Error(i(423),{cause:R}),oc(dl(v,S))),d=d.current.alternate,d.flags|=65536,N&=-N,d.lanes|=N,R=dl(R,S),N=ny(d.stateNode,R,N),Of(d,N),la!==4&&(la=2)),!1;var Y=Error(i(520),{cause:R});if(Y=dl(Y,S),nm===null?nm=[Y]:nm.push(Y),la!==4&&(la=2),v===null)return!0;R=dl(R,S),S=v;do{switch(S.tag){case 3:return S.flags|=65536,d=N&-N,S.lanes|=d,d=ny(S.stateNode,R,d),Of(S,d),!1;case 1:if(v=S.type,Y=S.stateNode,(S.flags&128)===0&&(typeof v.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(Yd===null||!Yd.has(Y))))return S.flags|=65536,N&=-N,S.lanes|=N,N=Qh(N),cg(N,d,S,R),Of(S,N),!1}S=S.return}while(S!==null);return!1}var Wp=Error(i(461)),Vs=!1;function aa(d,v,S,R){v.child=d===null?R0(v,null,S,R):bA(v,d.child,S,R)}function ki(d,v,S,R,N){S=S.render;var Y=v.ref;if("ref"in R){var Ce={};for(var Qe in R)Qe!=="ref"&&(Ce[Qe]=R[Qe])}else Ce=R;return ih(v),R=_A(d,v,S,Ce,Y,N),Qe=Fd(),d!==null&&!Vs?(kf(d,v,N),EA(d,v,N)):(Pr&&Qe&&Rc(v),v.flags|=1,aa(d,v,R,N),v.child)}function U0(d,v,S,R,N){if(d===null){var Y=S.type;return typeof Y=="function"&&!Tu(Y)&&Y.defaultProps===void 0&&S.compare===null?(v.tag=15,v.type=Y,jd(d,v,Y,R,N)):(d=Pp(S.type,null,R,v,v.mode,N),d.ref=v.ref,d.return=v,v.child=d)}if(Y=d.child,!sy(d,N)){var Ce=Y.memoizedProps;if(S=S.compare,S=S!==null?S:Tl,S(Ce,R)&&d.ref===v.ref)return EA(d,v,N)}return v.flags|=1,d=ru(Y,R),d.ref=v.ref,d.return=v,v.child=d}function jd(d,v,S,R,N){if(d!==null){var Y=d.memoizedProps;if(Tl(Y,R)&&d.ref===v.ref)if(Vs=!1,v.pendingProps=R=Y,sy(d,N))(d.flags&131072)!==0&&(Vs=!0);else return v.lanes=d.lanes,EA(d,v,N)}return Ag(d,v,S,R,N)}function Ah(d,v,S,R){var N=R.children,Y=d!==null?d.memoizedState:null;if(d===null&&v.stateNode===null&&(v.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),R.mode==="hidden"){if((v.flags&128)!==0){if(Y=Y!==null?Y.baseLanes|S:S,d!==null){for(R=v.child=d.child,N=0;R!==null;)N=N|R.lanes|R.childLanes,R=R.sibling;R=N&~Y}else R=0,v.child=null;return iy(d,v,Y,S,R)}if((S&536870912)!==0)v.memoizedState={baseLanes:0,cachePool:null},d!==null&&su(v,Y!==null?Y.cachePool:null),Y!==null?wi(v,Y):sa(),ey(v);else return R=v.lanes=536870912,iy(d,v,Y!==null?Y.baseLanes|S:S,S,R)}else Y!==null?(su(v,Y.cachePool),wi(v,Y),uc(),v.memoizedState=null):(d!==null&&su(v,null),sa(),uc());return aa(d,v,N,S),v.child}function Rf(d,v){return d!==null&&d.tag===22||v.stateNode!==null||(v.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.sibling}function iy(d,v,S,R,N){var Y=Rd();return Y=Y===null?null:{parent:oa._currentValue,pool:Y},v.memoizedState={baseLanes:S,cachePool:Y},d!==null&&su(v,null),sa(),ey(v),d!==null&&Kh(d,v,R,!0),v.childLanes=N,null}function K0(d,v){return v=z0({mode:v.mode,children:v.children},d.mode),v.ref=d.ref,d.child=v,v.return=d,v}function Wl(d,v,S){return bA(v,d.child,null,S),d=K0(v,v.pendingProps),d.flags|=2,lu(v),v.memoizedState=null,d}function N2(d,v,S){var R=v.pendingProps,N=(v.flags&128)!==0;if(v.flags&=-129,d===null){if(Pr){if(R.mode==="hidden")return d=K0(v,R),v.lanes=536870912,Rf(null,d);if(Tf(v),(d=so)?(d=_a(d,Nr),d=d!==null&&d.data==="&"?d:null,d!==null&&(v.memoizedState={dehydrated:d,treeContext:cA!==null?{id:ou,overflow:ic}:null,retryLane:536870912,hydrationErrors:null},S=kh(d),S.return=v,v.child=S,zs=v,so=null)):d=null,d===null)throw ra(v);return v.lanes=536870912,null}return K0(v,R)}var Y=d.memoizedState;if(Y!==null){var Ce=Y.dehydrated;if(Tf(v),N)if(v.flags&256)v.flags&=-257,v=Wl(d,v,S);else if(v.memoizedState!==null)v.child=d.child,v.flags|=128,v=null;else throw Error(i(558));else if(Vs||Kh(d,v,S,!1),N=(S&d.childLanes)!==0,Vs||N){if(R=Yo,R!==null&&(Ce=Mi(R,S),Ce!==0&&Ce!==Y.retryLane))throw Y.retryLane=Ce,Dc(d,Ce),Uu(R,d,Ce),Wp;by(),v=Wl(d,v,S)}else d=Y.treeContext,so=yl(Ce.nextSibling),zs=v,Pr=!0,AA=null,Nr=!1,d!==null&&kd(v,d),v=K0(v,R),v.flags|=4096;return v}return d=ru(d.child,{mode:R.mode,children:R.children}),d.ref=v.ref,v.child=d,d.return=v,d}function F0(d,v){var S=v.ref;if(S===null)d!==null&&d.ref!==null&&(v.flags|=4194816);else{if(typeof S!="function"&&typeof S!="object")throw Error(i(284));(d===null||d.ref!==S)&&(v.flags|=4194816)}}function Ag(d,v,S,R,N){return ih(v),S=_A(d,v,S,R,void 0,N),R=Fd(),d!==null&&!Vs?(kf(d,v,N),EA(d,v,N)):(Pr&&R&&Rc(v),v.flags|=1,aa(d,v,S,N),v.child)}function Lv(d,v,S,R,N,Y){return ih(v),v.updateQueue=null,S=Gh(v,R,S,N),Fp(d),R=Fd(),d!==null&&!Vs?(kf(d,v,Y),EA(d,v,Y)):(Pr&&R&&Rc(v),v.flags|=1,aa(d,v,S,Y),v.child)}function ry(d,v,S,R,N){if(ih(v),v.stateNode===null){var Y=nc,Ce=S.contextType;typeof Ce=="object"&&Ce!==null&&(Y=Ia(Ce)),Y=new S(R,Y),v.memoizedState=Y.state!==null&&Y.state!==void 0?Y.state:null,Y.updater=Wh,v.stateNode=Y,Y._reactInternals=v,Y=v.stateNode,Y.props=R,Y.state=v.memoizedState,Y.refs={},tl(v),Ce=S.contextType,Y.context=typeof Ce=="object"&&Ce!==null?Ia(Ce):nc,Y.state=v.memoizedState,Ce=S.getDerivedStateFromProps,typeof Ce=="function"&&(Wc(v,S,Ce,R),Y.state=v.memoizedState),typeof S.getDerivedStateFromProps=="function"||typeof Y.getSnapshotBeforeUpdate=="function"||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(Ce=Y.state,typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount(),Ce!==Y.state&&Wh.enqueueReplaceState(Y,Y.state,null),jh(v,R,Y,N),sh(),Y.state=v.memoizedState),typeof Y.componentDidMount=="function"&&(v.flags|=4194308),R=!0}else if(d===null){Y=v.stateNode;var Qe=v.memoizedProps,mt=js(S,Qe);Y.props=mt;var Wt=Y.context,un=S.contextType;Ce=nc,typeof un=="object"&&un!==null&&(Ce=Ia(un));var fn=S.getDerivedStateFromProps;un=typeof fn=="function"||typeof Y.getSnapshotBeforeUpdate=="function",Qe=v.pendingProps!==Qe,un||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(Qe||Wt!==Ce)&&wA(v,Y,R,Ce),Ru=!1;var $t=v.memoizedState;Y.state=$t,jh(v,R,Y,N),sh(),Wt=v.memoizedState,Qe||$t!==Wt||Ru?(typeof fn=="function"&&(Wc(v,S,fn,R),Wt=v.memoizedState),(mt=Ru||lg(v,S,mt,R,$t,Wt,Ce))?(un||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount()),typeof Y.componentDidMount=="function"&&(v.flags|=4194308)):(typeof Y.componentDidMount=="function"&&(v.flags|=4194308),v.memoizedProps=R,v.memoizedState=Wt),Y.props=R,Y.state=Wt,Y.context=Ce,R=mt):(typeof Y.componentDidMount=="function"&&(v.flags|=4194308),R=!1)}else{Y=v.stateNode,ao(d,v),Ce=v.memoizedProps,un=js(S,Ce),Y.props=un,fn=v.pendingProps,$t=Y.context,Wt=S.contextType,mt=nc,typeof Wt=="object"&&Wt!==null&&(mt=Ia(Wt)),Qe=S.getDerivedStateFromProps,(Wt=typeof Qe=="function"||typeof Y.getSnapshotBeforeUpdate=="function")||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(Ce!==fn||$t!==mt)&&wA(v,Y,R,mt),Ru=!1,$t=v.memoizedState,Y.state=$t,jh(v,R,Y,N),sh();var tn=v.memoizedState;Ce!==fn||$t!==tn||Ru||d!==null&&d.dependencies!==null&&Lp(d.dependencies)?(typeof Qe=="function"&&(Wc(v,S,Qe,R),tn=v.memoizedState),(un=Ru||lg(v,S,un,R,$t,tn,mt)||d!==null&&d.dependencies!==null&&Lp(d.dependencies))?(Wt||typeof Y.UNSAFE_componentWillUpdate!="function"&&typeof Y.componentWillUpdate!="function"||(typeof Y.componentWillUpdate=="function"&&Y.componentWillUpdate(R,tn,mt),typeof Y.UNSAFE_componentWillUpdate=="function"&&Y.UNSAFE_componentWillUpdate(R,tn,mt)),typeof Y.componentDidUpdate=="function"&&(v.flags|=4),typeof Y.getSnapshotBeforeUpdate=="function"&&(v.flags|=1024)):(typeof Y.componentDidUpdate!="function"||Ce===d.memoizedProps&&$t===d.memoizedState||(v.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||Ce===d.memoizedProps&&$t===d.memoizedState||(v.flags|=1024),v.memoizedProps=R,v.memoizedState=tn),Y.props=R,Y.state=tn,Y.context=mt,R=un):(typeof Y.componentDidUpdate!="function"||Ce===d.memoizedProps&&$t===d.memoizedState||(v.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||Ce===d.memoizedProps&&$t===d.memoizedState||(v.flags|=1024),R=!1)}return Y=R,F0(d,v),R=(v.flags&128)!==0,Y||R?(Y=v.stateNode,S=R&&typeof S.getDerivedStateFromError!="function"?null:Y.render(),v.flags|=1,d!==null&&R?(v.child=bA(v,d.child,null,N),v.child=bA(v,null,S,N)):aa(d,v,S,N),v.memoizedState=Y.state,d=v.child):d=EA(d,v,N),d}function GC(d,v,S,R){return Ne(),v.flags|=256,aa(d,v,S,R),v.child}var Uv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function oy(d){return{baseLanes:d,cachePool:Gn()}}function SA(d,v,S){return d=d!==null?d.childLanes&~S:0,v&&(d|=Qc),d}function cu(d,v,S){var R=v.pendingProps,N=!1,Y=(v.flags&128)!==0,Ce;if((Ce=Y)||(Ce=d!==null&&d.memoizedState===null?!1:(hs.current&2)!==0),Ce&&(N=!0,v.flags&=-129),Ce=(v.flags&32)!==0,v.flags&=-33,d===null){if(Pr){if(N?ka(v):uc(),(d=so)?(d=_a(d,Nr),d=d!==null&&d.data!=="&"?d:null,d!==null&&(v.memoizedState={dehydrated:d,treeContext:cA!==null?{id:ou,overflow:ic}:null,retryLane:536870912,hydrationErrors:null},S=kh(d),S.return=v,v.child=S,zs=v,so=null)):d=null,d===null)throw ra(v);return Sg(d)?v.lanes=32:v.lanes=536870912,null}var Qe=R.children;return R=R.fallback,N?(uc(),N=v.mode,Qe=z0({mode:"hidden",children:Qe},N),R=Id(R,N,S,null),Qe.return=v,R.return=v,Qe.sibling=R,v.child=Qe,R=v.child,R.memoizedState=oy(S),R.childLanes=SA(d,Ce,S),v.memoizedState=Uv,Rf(null,R)):(ka(v),Qp(v,Qe))}var mt=d.memoizedState;if(mt!==null&&(Qe=mt.dehydrated,Qe!==null)){if(Y)v.flags&256?(ka(v),v.flags&=-257,v=qp(d,v,S)):v.memoizedState!==null?(uc(),v.child=d.child,v.flags|=128,v=null):(uc(),Qe=R.fallback,N=v.mode,R=z0({mode:"visible",children:R.children},N),Qe=Id(Qe,N,S,null),Qe.flags|=2,R.return=v,Qe.return=v,R.sibling=Qe,v.child=R,bA(v,d.child,null,S),R=v.child,R.memoizedState=oy(S),R.childLanes=SA(d,Ce,S),v.memoizedState=Uv,v=Rf(null,R));else if(ka(v),Sg(Qe)){if(Ce=Qe.nextSibling&&Qe.nextSibling.dataset,Ce)var Wt=Ce.dgst;Ce=Wt,R=Error(i(419)),R.stack="",R.digest=Ce,oc({value:R,source:null,stack:null}),v=qp(d,v,S)}else if(Vs||Kh(d,v,S,!1),Ce=(S&d.childLanes)!==0,Vs||Ce){if(Ce=Yo,Ce!==null&&(R=Mi(Ce,S),R!==0&&R!==mt.retryLane))throw mt.retryLane=R,Dc(d,R),Uu(Ce,d,R),Wp;um(Qe)||by(),v=qp(d,v,S)}else um(Qe)?(v.flags|=192,v.child=d.child,v=null):(d=mt.treeContext,so=yl(Qe.nextSibling),zs=v,Pr=!0,AA=null,Nr=!1,d!==null&&kd(v,d),v=Qp(v,R.children),v.flags|=4096);return v}return N?(uc(),Qe=R.fallback,N=v.mode,mt=d.child,Wt=mt.sibling,R=ru(mt,{mode:"hidden",children:R.children}),R.subtreeFlags=mt.subtreeFlags&65011712,Wt!==null?Qe=ru(Wt,Qe):(Qe=Id(Qe,N,S,null),Qe.flags|=2),Qe.return=v,R.return=v,R.sibling=Qe,v.child=R,Rf(null,R),R=v.child,Qe=d.child.memoizedState,Qe===null?Qe=oy(S):(N=Qe.cachePool,N!==null?(mt=oa._currentValue,N=N.parent!==mt?{parent:mt,pool:mt}:N):N=Gn(),Qe={baseLanes:Qe.baseLanes|S,cachePool:N}),R.memoizedState=Qe,R.childLanes=SA(d,Ce,S),v.memoizedState=Uv,Rf(d.child,R)):(ka(v),S=d.child,d=S.sibling,S=ru(S,{mode:"visible",children:R.children}),S.return=v,S.sibling=null,d!==null&&(Ce=v.deletions,Ce===null?(v.deletions=[d],v.flags|=16):Ce.push(d)),v.child=S,v.memoizedState=null,S)}function Qp(d,v){return v=z0({mode:"visible",children:v},d.mode),v.return=d,d.child=v}function z0(d,v){return d=Ga(22,d,null,v),d.lanes=0,d}function qp(d,v,S){return bA(v,d.child,null,S),d=Qp(v,v.pendingProps.children),d.flags|=2,v.memoizedState=null,d}function hg(d,v,S){d.lanes|=v;var R=d.alternate;R!==null&&(R.lanes|=v),fA(d.return,v,S)}function Ql(d,v,S,R,N,Y){var Ce=d.memoizedState;Ce===null?d.memoizedState={isBackwards:v,rendering:null,renderingStartTime:0,last:R,tail:S,tailMode:N,treeForkCount:Y}:(Ce.isBackwards=v,Ce.rendering=null,Ce.renderingStartTime=0,Ce.last=R,Ce.tail=S,Ce.tailMode=N,Ce.treeForkCount=Y)}function Yp(d,v,S){var R=v.pendingProps,N=R.revealOrder,Y=R.tail;R=R.children;var Ce=hs.current,Qe=(Ce&2)!==0;if(Qe?(Ce=Ce&1|2,v.flags|=128):Ce&=1,Te(hs,Ce),aa(d,v,R,S),R=Pr?Fs:0,!Qe&&d!==null&&(d.flags&128)!==0)e:for(d=v.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&hg(d,S,v);else if(d.tag===19)hg(d,S,v);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===v)break e;for(;d.sibling===null;){if(d.return===null||d.return===v)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}switch(N){case"forwards":for(S=v.child,N=null;S!==null;)d=S.alternate,d!==null&&lo(d)===null&&(N=S),S=S.sibling;S=N,S===null?(N=v.child,v.child=null):(N=S.sibling,S.sibling=null),Ql(v,!1,N,S,Y,R);break;case"backwards":case"unstable_legacy-backwards":for(S=null,N=v.child,v.child=null;N!==null;){if(d=N.alternate,d!==null&&lo(d)===null){v.child=N;break}d=N.sibling,N.sibling=S,S=N,N=d}Ql(v,!0,S,null,Y,R);break;case"together":Ql(v,!1,null,null,void 0,R);break;default:v.memoizedState=null}return v.child}function EA(d,v,S){if(d!==null&&(v.dependencies=d.dependencies),Ff|=v.lanes,(S&v.childLanes)===0)if(d!==null){if(Kh(d,v,S,!1),(S&v.childLanes)===0)return null}else return null;if(d!==null&&v.child!==d.child)throw Error(i(153));if(v.child!==null){for(d=v.child,S=ru(d,d.pendingProps),v.child=S,S.return=v;d.sibling!==null;)d=d.sibling,S=S.sibling=ru(d,d.pendingProps),S.return=v;S.sibling=null}return v.child}function sy(d,v){return(d.lanes&v)!==0?!0:(d=d.dependencies,!!(d!==null&&Lp(d)))}function WC(d,v,S){switch(v.tag){case 3:ke(v,v.stateNode.containerInfo),dA(v,oa,d.memoizedState.cache),Ne();break;case 27:case 5:we(v);break;case 4:ke(v,v.stateNode.containerInfo);break;case 10:dA(v,v.type,v.memoizedProps.value);break;case 31:if(v.memoizedState!==null)return v.flags|=128,Tf(v),null;break;case 13:var R=v.memoizedState;if(R!==null)return R.dehydrated!==null?(ka(v),v.flags|=128,null):(S&v.child.childLanes)!==0?cu(d,v,S):(ka(v),d=EA(d,v,S),d!==null?d.sibling:null);ka(v);break;case 19:var N=(d.flags&128)!==0;if(R=(S&v.childLanes)!==0,R||(Kh(d,v,S,!1),R=(S&v.childLanes)!==0),N){if(R)return Yp(d,v,S);v.flags|=128}if(N=v.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),Te(hs,hs.current),R)break;return null;case 22:return v.lanes=0,Ah(d,v,S,v.pendingProps);case 24:dA(v,oa,d.memoizedState.cache)}return EA(d,v,S)}function QC(d,v,S){if(d!==null)if(d.memoizedProps!==v.pendingProps)Vs=!0;else{if(!sy(d,S)&&(v.flags&128)===0)return Vs=!1,WC(d,v,S);Vs=(d.flags&131072)!==0}else Vs=!1,Pr&&(v.flags&1048576)!==0&&Ph(v,Fs,v.index);switch(v.lanes=0,v.tag){case 16:e:{var R=v.pendingProps;if(d=Kc(v.elementType),v.type=d,typeof d=="function")Tu(d)?(R=js(d,R),v.tag=1,v=ry(null,v,d,R,S)):(v.tag=0,v=Ag(null,v,d,R,S));else{if(d!=null){var N=d.$$typeof;if(N===Z){v.tag=11,v=ki(null,v,d,R,S);break e}else if(N===W){v.tag=14,v=U0(null,v,d,R,S);break e}}throw v=Be(d)||d,Error(i(306,v,""))}}return v;case 0:return Ag(d,v,v.type,v.pendingProps,S);case 1:return R=v.type,N=js(R,v.pendingProps),ry(d,v,R,N,S);case 3:e:{if(ke(v,v.stateNode.containerInfo),d===null)throw Error(i(387));R=v.pendingProps;var Y=v.memoizedState;N=Y.element,ao(d,v),jh(v,R,null,S);var Ce=v.memoizedState;if(R=Ce.cache,dA(v,oa,R),R!==Y.cache&&pA(v,[oa],S,!0),sh(),R=Ce.element,Y.isDehydrated)if(Y={element:R,isDehydrated:!1,cache:Ce.cache},v.updateQueue.baseState=Y,v.memoizedState=Y,v.flags&256){v=GC(d,v,R,S);break e}else if(R!==N){N=dl(Error(i(424)),v),oc(N),v=GC(d,v,R,S);break e}else{switch(d=v.stateNode.containerInfo,d.nodeType){case 9:d=d.body;break;default:d=d.nodeName==="HTML"?d.ownerDocument.body:d}for(so=yl(d.firstChild),zs=v,Pr=!0,AA=null,Nr=!0,S=R0(v,null,R,S),v.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling}else{if(Ne(),R===N){v=EA(d,v,S);break e}aa(d,v,R,S)}v=v.child}return v;case 26:return F0(d,v),d===null?(S=Ab(v.type,null,v.pendingProps,null))?v.memoizedState=S:Pr||(S=v.type,d=v.pendingProps,R=lm(Et.current).createElement(S),R[an]=v,R[Kn]=d,gl(R,S,d),wo(R),v.stateNode=R):v.memoizedState=Ab(v.type,d.memoizedProps,v.pendingProps,d.memoizedState),null;case 27:return we(v),d===null&&Pr&&(R=v.stateNode=ub(v.type,v.pendingProps,Et.current),zs=v,Nr=!0,N=so,Oi(v.type)?(qf=N,so=yl(R.firstChild)):so=N),aa(d,v,v.pendingProps.children,S),F0(d,v),d===null&&(v.flags|=4194304),v.child;case 5:return d===null&&Pr&&((N=R=so)&&(R=Vc(R,v.type,v.pendingProps,Nr),R!==null?(v.stateNode=R,zs=v,so=yl(R.firstChild),Nr=!1,N=!0):N=!1),N||ra(v)),we(v),N=v.type,Y=v.pendingProps,Ce=d!==null?d.memoizedProps:null,R=Y.children,ed(N,Y)?R=null:Ce!==null&&ed(N,Ce)&&(v.flags|=32),v.memoizedState!==null&&(N=_A(d,v,Kd,null,null,S),Xf._currentValue=N),F0(d,v),aa(d,v,R,S),v.child;case 6:return d===null&&Pr&&((d=S=so)&&(S=xo(S,v.pendingProps,Nr),S!==null?(v.stateNode=S,zs=v,so=null,d=!0):d=!1),d||ra(v)),null;case 13:return cu(d,v,S);case 4:return ke(v,v.stateNode.containerInfo),R=v.pendingProps,d===null?v.child=bA(v,null,R,S):aa(d,v,R,S),v.child;case 11:return ki(d,v,v.type,v.pendingProps,S);case 7:return aa(d,v,v.pendingProps,S),v.child;case 8:return aa(d,v,v.pendingProps.children,S),v.child;case 12:return aa(d,v,v.pendingProps.children,S),v.child;case 10:return R=v.pendingProps,dA(v,v.type,R.value),aa(d,v,R.children,S),v.child;case 9:return N=v.type._context,R=v.pendingProps.children,ih(v),N=Ia(N),R=R(N),v.flags|=1,aa(d,v,R,S),v.child;case 14:return U0(d,v,v.type,v.pendingProps,S);case 15:return jd(d,v,v.type,v.pendingProps,S);case 19:return Yp(d,v,S);case 31:return N2(d,v,S);case 22:return Ah(d,v,S,v.pendingProps);case 24:return ih(v),R=Ia(oa),d===null?(N=Rd(),N===null&&(N=Yo,Y=qs(),N.pooledCache=Y,Y.refCount++,Y!==null&&(N.pooledCacheLanes|=S),N=Y),v.memoizedState={parent:R,cache:N},tl(v),dA(v,oa,N)):((d.lanes&S)!==0&&(ao(d,v),jh(v,null,null,S),sh()),N=d.memoizedState,Y=v.memoizedState,N.parent!==R?(N={parent:R,cache:R},v.memoizedState=N,v.lanes===0&&(v.memoizedState=v.updateQueue.baseState=N),dA(v,oa,R)):(R=Y.cache,dA(v,oa,R),R!==N.cache&&pA(v,[oa],S,!0))),aa(d,v,v.pendingProps.children,S),v.child;case 29:throw v.pendingProps}throw Error(i(156,v.tag))}function Nd(d){d.flags|=4}function ay(d,v,S,R,N){if((v=(d.mode&32)!==0)&&(v=!1),v){if(d.flags|=16777216,(N&335544128)===N)if(d.stateNode.complete)d.flags|=8192;else if($h())d.flags|=8192;else throw Ll=Fh,Sf}else d.flags&=-16777217}function Kv(d,v){if(v.type!=="stylesheet"||(v.state.loading&4)!==0)d.flags&=-16777217;else if(d.flags|=16777216,!pb(v))if($h())d.flags|=8192;else throw Ll=Fh,Sf}function Vp(d,v){v!==null&&(d.flags|=4),d.flags&16384&&(v=d.tag!==22?sn():536870912,d.lanes|=v,tm|=v)}function dg(d,v){if(!Pr)switch(d.tailMode){case"hidden":v=d.tail;for(var S=null;v!==null;)v.alternate!==null&&(S=v),v=v.sibling;S===null?d.tail=null:S.sibling=null;break;case"collapsed":S=d.tail;for(var R=null;S!==null;)S.alternate!==null&&(R=S),S=S.sibling;R===null?v||d.tail===null?d.tail=null:d.tail.sibling=null:R.sibling=null}}function os(d){var v=d.alternate!==null&&d.alternate.child===d.child,S=0,R=0;if(v)for(var N=d.child;N!==null;)S|=N.lanes|N.childLanes,R|=N.subtreeFlags&65011712,R|=N.flags&65011712,N.return=d,N=N.sibling;else for(N=d.child;N!==null;)S|=N.lanes|N.childLanes,R|=N.subtreeFlags,R|=N.flags,N.return=d,N=N.sibling;return d.subtreeFlags|=R,d.childLanes=S,v}function qC(d,v,S){var R=v.pendingProps;switch(Lh(v),v.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return os(v),null;case 1:return os(v),null;case 3:return S=v.stateNode,R=null,d!==null&&(R=d.memoizedState.cache),v.memoizedState.cache!==R&&(v.flags|=2048),ku(oa),Oe(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(d===null||d.child===null)&&(Uh(v)?Nd(v):d===null||d.memoizedState.isDehydrated&&(v.flags&256)===0||(v.flags|=1024,hA())),os(v),null;case 26:var N=v.type,Y=v.memoizedState;return d===null?(Nd(v),Y!==null?(os(v),Kv(v,Y)):(os(v),ay(v,N,null,R,S))):Y?Y!==d.memoizedState?(Nd(v),os(v),Kv(v,Y)):(os(v),v.flags&=-16777217):(d=d.memoizedProps,d!==R&&Nd(v),os(v),ay(v,N,d,R,S)),null;case 27:if(Ye(v),S=Et.current,N=v.type,d!==null&&v.stateNode!=null)d.memoizedProps!==R&&Nd(v);else{if(!R){if(v.stateNode===null)throw Error(i(166));return os(v),null}d=vt.current,Uh(v)?nh(v):(d=ub(N,R,S),v.stateNode=d,Nd(v))}return os(v),null;case 5:if(Ye(v),N=v.type,d!==null&&v.stateNode!=null)d.memoizedProps!==R&&Nd(v);else{if(!R){if(v.stateNode===null)throw Error(i(166));return os(v),null}if(Y=vt.current,Uh(v))nh(v);else{var Ce=lm(Et.current);switch(Y){case 1:Y=Ce.createElementNS("http://www.w3.org/2000/svg",N);break;case 2:Y=Ce.createElementNS("http://www.w3.org/1998/Math/MathML",N);break;default:switch(N){case"svg":Y=Ce.createElementNS("http://www.w3.org/2000/svg",N);break;case"math":Y=Ce.createElementNS("http://www.w3.org/1998/Math/MathML",N);break;case"script":Y=Ce.createElement("div"),Y.innerHTML="<script><\/script>",Y=Y.removeChild(Y.firstChild);break;case"select":Y=typeof R.is=="string"?Ce.createElement("select",{is:R.is}):Ce.createElement("select"),R.multiple?Y.multiple=!0:R.size&&(Y.size=R.size);break;default:Y=typeof R.is=="string"?Ce.createElement(N,{is:R.is}):Ce.createElement(N)}}Y[an]=v,Y[Kn]=R;e:for(Ce=v.child;Ce!==null;){if(Ce.tag===5||Ce.tag===6)Y.appendChild(Ce.stateNode);else if(Ce.tag!==4&&Ce.tag!==27&&Ce.child!==null){Ce.child.return=Ce,Ce=Ce.child;continue}if(Ce===v)break e;for(;Ce.sibling===null;){if(Ce.return===null||Ce.return===v)break e;Ce=Ce.return}Ce.sibling.return=Ce.return,Ce=Ce.sibling}v.stateNode=Y;e:switch(gl(Y,N,R),N){case"button":case"input":case"select":case"textarea":R=!!R.autoFocus;break e;case"img":R=!0;break e;default:R=!1}R&&Nd(v)}}return os(v),ay(v,v.type,d===null?null:d.memoizedProps,v.pendingProps,S),null;case 6:if(d&&v.stateNode!=null)d.memoizedProps!==R&&Nd(v);else{if(typeof R!="string"&&v.stateNode===null)throw Error(i(166));if(d=Et.current,Uh(v)){if(d=v.stateNode,S=v.memoizedProps,R=null,N=zs,N!==null)switch(N.tag){case 27:case 5:R=N.memoizedProps}d[an]=v,d=!!(d.nodeValue===S||R!==null&&R.suppressHydrationWarning===!0||am(d.nodeValue,S)),d||ra(v,!0)}else d=lm(d).createTextNode(R),d[an]=v,v.stateNode=d}return os(v),null;case 31:if(S=v.memoizedState,d===null||d.memoizedState!==null){if(R=Uh(v),S!==null){if(d===null){if(!R)throw Error(i(318));if(d=v.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(557));d[an]=v}else Ne(),(v.flags&128)===0&&(v.memoizedState=null),v.flags|=4;os(v),d=!1}else S=hA(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=S),d=!0;if(!d)return v.flags&256?(lu(v),v):(lu(v),null);if((v.flags&128)!==0)throw Error(i(558))}return os(v),null;case 13:if(R=v.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(N=Uh(v),R!==null&&R.dehydrated!==null){if(d===null){if(!N)throw Error(i(318));if(N=v.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(i(317));N[an]=v}else Ne(),(v.flags&128)===0&&(v.memoizedState=null),v.flags|=4;os(v),N=!1}else N=hA(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=N),N=!0;if(!N)return v.flags&256?(lu(v),v):(lu(v),null)}return lu(v),(v.flags&128)!==0?(v.lanes=S,v):(S=R!==null,d=d!==null&&d.memoizedState!==null,S&&(R=v.child,N=null,R.alternate!==null&&R.alternate.memoizedState!==null&&R.alternate.memoizedState.cachePool!==null&&(N=R.alternate.memoizedState.cachePool.pool),Y=null,R.memoizedState!==null&&R.memoizedState.cachePool!==null&&(Y=R.memoizedState.cachePool.pool),Y!==N&&(R.flags|=2048)),S!==d&&S&&(v.child.flags|=8192),Vp(v,v.updateQueue),os(v),null);case 4:return Oe(),d===null&&Ey(v.stateNode.containerInfo),os(v),null;case 10:return ku(v.type),os(v),null;case 19:if(ze(hs),R=v.memoizedState,R===null)return os(v),null;if(N=(v.flags&128)!==0,Y=R.rendering,Y===null)if(N)dg(R,!1);else{if(la!==0||d!==null&&(d.flags&128)!==0)for(d=v.child;d!==null;){if(Y=lo(d),Y!==null){for(v.flags|=128,dg(R,!1),d=Y.updateQueue,v.updateQueue=d,Vp(v,d),v.subtreeFlags=0,d=S,S=v.child;S!==null;)H1(S,d),S=S.sibling;return Te(hs,hs.current&1|2),Pr&&Pl(v,R.treeForkCount),v.child}d=d.sibling}R.tail!==null&&qn()>Yh&&(v.flags|=128,N=!0,dg(R,!1),v.lanes=4194304)}else{if(!N)if(d=lo(Y),d!==null){if(v.flags|=128,N=!0,d=d.updateQueue,v.updateQueue=d,Vp(v,d),dg(R,!0),R.tail===null&&R.tailMode==="hidden"&&!Y.alternate&&!Pr)return os(v),null}else 2*qn()-R.renderingStartTime>Yh&&S!==536870912&&(v.flags|=128,N=!0,dg(R,!1),v.lanes=4194304);R.isBackwards?(Y.sibling=v.child,v.child=Y):(d=R.last,d!==null?d.sibling=Y:v.child=Y,R.last=Y)}return R.tail!==null?(d=R.tail,R.rendering=d,R.tail=d.sibling,R.renderingStartTime=qn(),d.sibling=null,S=hs.current,Te(hs,N?S&1|2:S&1),Pr&&Pl(v,R.treeForkCount),d):(os(v),null);case 22:case 23:return lu(v),If(),R=v.memoizedState!==null,d!==null?d.memoizedState!==null!==R&&(v.flags|=8192):R&&(v.flags|=8192),R?(S&536870912)!==0&&(v.flags&128)===0&&(os(v),v.subtreeFlags&6&&(v.flags|=8192)):os(v),S=v.updateQueue,S!==null&&Vp(v,S.retryQueue),S=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(S=d.memoizedState.cachePool.pool),R=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(R=v.memoizedState.cachePool.pool),R!==S&&(v.flags|=2048),d!==null&&ze(yA),null;case 24:return S=null,d!==null&&(S=d.memoizedState.cache),v.memoizedState.cache!==S&&(v.flags|=2048),ku(oa),os(v),null;case 25:return null;case 30:return null}throw Error(i(156,v.tag))}function j0(d,v){switch(Lh(v),v.tag){case 1:return d=v.flags,d&65536?(v.flags=d&-65537|128,v):null;case 3:return ku(oa),Oe(),d=v.flags,(d&65536)!==0&&(d&128)===0?(v.flags=d&-65537|128,v):null;case 26:case 27:case 5:return Ye(v),null;case 31:if(v.memoizedState!==null){if(lu(v),v.alternate===null)throw Error(i(340));Ne()}return d=v.flags,d&65536?(v.flags=d&-65537|128,v):null;case 13:if(lu(v),d=v.memoizedState,d!==null&&d.dehydrated!==null){if(v.alternate===null)throw Error(i(340));Ne()}return d=v.flags,d&65536?(v.flags=d&-65537|128,v):null;case 19:return ze(hs),null;case 4:return Oe(),null;case 10:return ku(v.type),null;case 22:case 23:return lu(v),If(),d!==null&&ze(yA),d=v.flags,d&65536?(v.flags=d&-65537|128,v):null;case 24:return ku(oa),null;case 25:return null;default:return null}}function ly(d,v){switch(Lh(v),v.tag){case 3:ku(oa),Oe();break;case 26:case 27:case 5:Ye(v);break;case 4:Oe();break;case 31:v.memoizedState!==null&&lu(v);break;case 13:lu(v);break;case 19:ze(hs);break;case 10:ku(v.type);break;case 22:case 23:lu(v),If(),d!==null&&ze(yA);break;case 24:ku(oa)}}function Gd(d,v){try{var S=v.updateQueue,R=S!==null?S.lastEffect:null;if(R!==null){var N=R.next;S=N;do{if((S.tag&d)===d){R=void 0;var Y=S.create,Ce=S.inst;R=Y(),Ce.destroy=R}S=S.next}while(S!==N)}}catch(Qe){zo(v,v.return,Qe)}}function hh(d,v,S){try{var R=v.updateQueue,N=R!==null?R.lastEffect:null;if(N!==null){var Y=N.next;R=Y;do{if((R.tag&d)===d){var Ce=R.inst,Qe=Ce.destroy;if(Qe!==void 0){Ce.destroy=void 0,N=v;var mt=S,Wt=Qe;try{Wt()}catch(un){zo(N,mt,un)}}}R=R.next}while(R!==Y)}}catch(un){zo(v,v.return,un)}}function fg(d){var v=d.updateQueue;if(v!==null){var S=d.stateNode;try{au(v,S)}catch(R){zo(d,d.return,R)}}}function Wd(d,v,S){S.props=js(d.type,d.memoizedProps),S.state=d.memoizedState;try{S.componentWillUnmount()}catch(R){zo(d,v,R)}}function pl(d,v){try{var S=d.ref;if(S!==null){switch(d.tag){case 26:case 27:case 5:var R=d.stateNode;break;case 30:R=d.stateNode;break;default:R=d.stateNode}typeof S=="function"?d.refCleanup=S(R):S.current=R}}catch(N){zo(d,v,N)}}function Au(d,v){var S=d.ref,R=d.refCleanup;if(S!==null)if(typeof R=="function")try{R()}catch(N){zo(d,v,N)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof S=="function")try{S(null)}catch(N){zo(d,v,N)}else S.current=null}function YC(d){var v=d.type,S=d.memoizedProps,R=d.stateNode;try{e:switch(v){case"button":case"input":case"select":case"textarea":S.autoFocus&&R.focus();break e;case"img":S.src?R.src=S.src:S.srcSet&&(R.srcset=S.srcSet)}}catch(N){zo(d,d.return,N)}}function uy(d,v,S){try{var R=d.stateNode;a_(R,d.type,S,v),R[Kn]=v}catch(N){zo(d,d.return,N)}}function VC(d){return d.tag===5||d.tag===3||d.tag===26||d.tag===27&&Oi(d.type)||d.tag===4}function Fv(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||VC(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.tag===27&&Oi(d.type)||d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function zv(d,v,S){var R=d.tag;if(R===5||R===6)d=d.stateNode,v?(S.nodeType===9?S.body:S.nodeName==="HTML"?S.ownerDocument.body:S).insertBefore(d,v):(v=S.nodeType===9?S.body:S.nodeName==="HTML"?S.ownerDocument.body:S,v.appendChild(d),S=S._reactRootContainer,S!=null||v.onclick!==null||(v.onclick=zi));else if(R!==4&&(R===27&&Oi(d.type)&&(S=d.stateNode,v=null),d=d.child,d!==null))for(zv(d,v,S),d=d.sibling;d!==null;)zv(d,v,S),d=d.sibling}function cy(d,v,S){var R=d.tag;if(R===5||R===6)d=d.stateNode,v?S.insertBefore(d,v):S.appendChild(d);else if(R!==4&&(R===27&&Oi(d.type)&&(S=d.stateNode),d=d.child,d!==null))for(cy(d,v,S),d=d.sibling;d!==null;)cy(d,v,S),d=d.sibling}function Ay(d){var v=d.stateNode,S=d.memoizedProps;try{for(var R=d.type,N=v.attributes;N.length;)v.removeAttributeNode(N[0]);gl(v,R,S),v[an]=d,v[Kn]=S}catch(Y){zo(d,d.return,Y)}}var Qd=!1,Ra=!1,$p=!1,$C=typeof WeakSet=="function"?WeakSet:Set,wr=null;function pg(d,v){if(d=d.containerInfo,Qf=ky,d=og(d),Dp(d)){if("selectionStart"in d)var S={start:d.selectionStart,end:d.selectionEnd};else e:{S=(S=d.ownerDocument)&&S.defaultView||window;var R=S.getSelection&&S.getSelection();if(R&&R.rangeCount!==0){S=R.anchorNode;var N=R.anchorOffset,Y=R.focusNode;R=R.focusOffset;try{S.nodeType,Y.nodeType}catch{S=null;break e}var Ce=0,Qe=-1,mt=-1,Wt=0,un=0,fn=d,$t=null;t:for(;;){for(var tn;fn!==S||N!==0&&fn.nodeType!==3||(Qe=Ce+N),fn!==Y||R!==0&&fn.nodeType!==3||(mt=Ce+R),fn.nodeType===3&&(Ce+=fn.nodeValue.length),(tn=fn.firstChild)!==null;)$t=fn,fn=tn;for(;;){if(fn===d)break t;if($t===S&&++Wt===N&&(Qe=Ce),$t===Y&&++un===R&&(mt=Ce),(tn=fn.nextSibling)!==null)break;fn=$t,$t=fn.parentNode}fn=tn}S=Qe===-1||mt===-1?null:{start:Qe,end:mt}}else S=null}S=S||{start:0,end:0}}else S=null;for(i1={focusedElem:d,selectionRange:S},ky=!1,wr=v;wr!==null;)if(v=wr,d=v.child,(v.subtreeFlags&1028)!==0&&d!==null)d.return=v,wr=d;else for(;wr!==null;){switch(v=wr,Y=v.alternate,d=v.flags,v.tag){case 0:if((d&4)!==0&&(d=v.updateQueue,d=d!==null?d.events:null,d!==null))for(S=0;S<d.length;S++)N=d[S],N.ref.impl=N.nextImpl;break;case 11:case 15:break;case 1:if((d&1024)!==0&&Y!==null){d=void 0,S=v,N=Y.memoizedProps,Y=Y.memoizedState,R=S.stateNode;try{var mi=js(S.type,N);d=R.getSnapshotBeforeUpdate(mi,Y),R.__reactInternalSnapshotBeforeUpdate=d}catch(ji){zo(S,S.return,ji)}}break;case 3:if((d&1024)!==0){if(d=v.stateNode.containerInfo,S=d.nodeType,S===9)r1(d);else if(S===1)switch(d.nodeName){case"HEAD":case"HTML":case"BODY":r1(d);break;default:d.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(i(163))}if(d=v.sibling,d!==null){d.return=v.return,wr=d;break}wr=v.return}}function hy(d,v,S){var R=S.flags;switch(S.tag){case 0:case 11:case 15:qd(d,S),R&4&&Gd(5,S);break;case 1:if(qd(d,S),R&4)if(d=S.stateNode,v===null)try{d.componentDidMount()}catch(Ce){zo(S,S.return,Ce)}else{var N=js(S.type,v.memoizedProps);v=v.memoizedState;try{d.componentDidUpdate(N,v,d.__reactInternalSnapshotBeforeUpdate)}catch(Ce){zo(S,S.return,Ce)}}R&64&&fg(S),R&512&&pl(S,S.return);break;case 3:if(qd(d,S),R&64&&(d=S.updateQueue,d!==null)){if(v=null,S.child!==null)switch(S.child.tag){case 27:case 5:v=S.child.stateNode;break;case 1:v=S.child.stateNode}try{au(d,v)}catch(Ce){zo(S,S.return,Ce)}}break;case 27:v===null&&R&4&&Ay(S);case 26:case 5:qd(d,S),v===null&&R&4&&YC(S),R&512&&pl(S,S.return);break;case 12:qd(d,S);break;case 31:qd(d,S),R&4&&Hp(d,S);break;case 13:qd(d,S),R&4&&dy(d,S),R&64&&(d=S.memoizedState,d!==null&&(d=d.dehydrated,d!==null&&(S=xy.bind(null,S),l_(d,S))));break;case 22:if(R=S.memoizedState!==null||Qd,!R){v=v!==null&&v.memoizedState!==null||Ra,N=Qd;var Y=Ra;Qd=R,(Ra=v)&&!Y?Ac(d,S,(S.subtreeFlags&8772)!==0):qd(d,S),Qd=N,Ra=Y}break;case 30:break;default:qd(d,S)}}function mg(d){var v=d.alternate;v!==null&&(d.alternate=null,mg(v)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(v=d.stateNode,v!==null&&Xl(v)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}var ss=null,ml=!1;function qh(d,v,S){for(S=S.child;S!==null;)jv(d,v,S),S=S.sibling}function jv(d,v,S){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(It,S)}catch{}switch(S.tag){case 26:Ra||Au(S,v),qh(d,v,S),S.memoizedState?S.memoizedState.count--:S.stateNode&&(S=S.stateNode,S.parentNode.removeChild(S));break;case 27:Ra||Au(S,v);var R=ss,N=ml;Oi(S.type)&&(ss=S.stateNode,ml=!1),qh(d,v,S),Eg(S.stateNode),ss=R,ml=N;break;case 5:Ra||Au(S,v);case 6:if(R=ss,N=ml,ss=null,qh(d,v,S),ss=R,ml=N,ss!==null)if(ml)try{(ss.nodeType===9?ss.body:ss.nodeName==="HTML"?ss.ownerDocument.body:ss).removeChild(S.stateNode)}catch(Y){zo(S,v,Y)}else try{ss.removeChild(S.stateNode)}catch(Y){zo(S,v,Y)}break;case 18:ss!==null&&(ml?(d=ss,Ca(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,S.stateNode),Dg(d)):Ca(ss,S.stateNode));break;case 4:R=ss,N=ml,ss=S.stateNode.containerInfo,ml=!0,qh(d,v,S),ss=R,ml=N;break;case 0:case 11:case 14:case 15:hh(2,S,v),Ra||hh(4,S,v),qh(d,v,S);break;case 1:Ra||(Au(S,v),R=S.stateNode,typeof R.componentWillUnmount=="function"&&Wd(S,v,R)),qh(d,v,S);break;case 21:qh(d,v,S);break;case 22:Ra=(R=Ra)||S.memoizedState!==null,qh(d,v,S),Ra=R;break;default:qh(d,v,S)}}function Hp(d,v){if(v.memoizedState===null&&(d=v.alternate,d!==null&&(d=d.memoizedState,d!==null))){d=d.dehydrated;try{Dg(d)}catch(S){zo(v,v.return,S)}}}function dy(d,v){if(v.memoizedState===null&&(d=v.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{Dg(d)}catch(S){zo(v,v.return,S)}}function gg(d){switch(d.tag){case 31:case 13:case 19:var v=d.stateNode;return v===null&&(v=d.stateNode=new $C),v;case 22:return d=d.stateNode,v=d._retryCache,v===null&&(v=d._retryCache=new $C),v;default:throw Error(i(435,d.tag))}}function Zp(d,v){var S=gg(d);v.forEach(function(R){if(!S.has(R)){S.add(R);var N=V2.bind(null,d,R);R.then(N,N)}})}function il(d,v){var S=v.deletions;if(S!==null)for(var R=0;R<S.length;R++){var N=S[R],Y=d,Ce=v,Qe=Ce;e:for(;Qe!==null;){switch(Qe.tag){case 27:if(Oi(Qe.type)){ss=Qe.stateNode,ml=!1;break e}break;case 5:ss=Qe.stateNode,ml=!1;break e;case 3:case 4:ss=Qe.stateNode.containerInfo,ml=!0;break e}Qe=Qe.return}if(ss===null)throw Error(i(160));jv(Y,Ce,N),ss=null,ml=!1,Y=N.alternate,Y!==null&&(Y.return=null),N.return=null}if(v.subtreeFlags&13886)for(v=v.child;v!==null;)HC(v,d),v=v.sibling}var Pu=null;function HC(d,v){var S=d.alternate,R=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:il(v,d),Os(d),R&4&&(hh(3,d,d.return),Gd(3,d),hh(5,d,d.return));break;case 1:il(v,d),Os(d),R&512&&(Ra||S===null||Au(S,S.return)),R&64&&Qd&&(d=d.updateQueue,d!==null&&(R=d.callbacks,R!==null&&(S=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=S===null?R:S.concat(R))));break;case 26:var N=Pu;if(il(v,d),Os(d),R&512&&(Ra||S===null||Au(S,S.return)),R&4){var Y=S!==null?S.memoizedState:null;if(R=d.memoizedState,S===null)if(R===null)if(d.stateNode===null){e:{R=d.type,S=d.memoizedProps,N=N.ownerDocument||N;t:switch(R){case"title":Y=N.getElementsByTagName("title")[0],(!Y||Y[Ba]||Y[an]||Y.namespaceURI==="http://www.w3.org/2000/svg"||Y.hasAttribute("itemprop"))&&(Y=N.createElement(R),N.head.insertBefore(Y,N.querySelector("head > title"))),gl(Y,R,S),Y[an]=d,wo(Y),R=Y;break e;case"link":var Ce=l1("link","href",N).get(R+(S.href||""));if(Ce){for(var Qe=0;Qe<Ce.length;Qe++)if(Y=Ce[Qe],Y.getAttribute("href")===(S.href==null||S.href===""?null:S.href)&&Y.getAttribute("rel")===(S.rel==null?null:S.rel)&&Y.getAttribute("title")===(S.title==null?null:S.title)&&Y.getAttribute("crossorigin")===(S.crossOrigin==null?null:S.crossOrigin)){Ce.splice(Qe,1);break t}}Y=N.createElement(R),gl(Y,R,S),N.head.appendChild(Y);break;case"meta":if(Ce=l1("meta","content",N).get(R+(S.content||""))){for(Qe=0;Qe<Ce.length;Qe++)if(Y=Ce[Qe],Y.getAttribute("content")===(S.content==null?null:""+S.content)&&Y.getAttribute("name")===(S.name==null?null:S.name)&&Y.getAttribute("property")===(S.property==null?null:S.property)&&Y.getAttribute("http-equiv")===(S.httpEquiv==null?null:S.httpEquiv)&&Y.getAttribute("charset")===(S.charSet==null?null:S.charSet)){Ce.splice(Qe,1);break t}}Y=N.createElement(R),gl(Y,R,S),N.head.appendChild(Y);break;default:throw Error(i(468,R))}Y[an]=d,wo(Y),R=Y}d.stateNode=R}else h_(N,d.type,d.stateNode);else d.stateNode=db(N,R,d.memoizedProps);else Y!==R?(Y===null?S.stateNode!==null&&(S=S.stateNode,S.parentNode.removeChild(S)):Y.count--,R===null?h_(N,d.type,d.stateNode):db(N,R,d.memoizedProps)):R===null&&d.stateNode!==null&&uy(d,d.memoizedProps,S.memoizedProps)}break;case 27:il(v,d),Os(d),R&512&&(Ra||S===null||Au(S,S.return)),S!==null&&R&4&&uy(d,d.memoizedProps,S.memoizedProps);break;case 5:if(il(v,d),Os(d),R&512&&(Ra||S===null||Au(S,S.return)),d.flags&32){N=d.stateNode;try{So(N,"")}catch(mi){zo(d,d.return,mi)}}R&4&&d.stateNode!=null&&(N=d.memoizedProps,uy(d,N,S!==null?S.memoizedProps:N)),R&1024&&($p=!0);break;case 6:if(il(v,d),Os(d),R&4){if(d.stateNode===null)throw Error(i(162));R=d.memoizedProps,S=d.stateNode;try{S.nodeValue=R}catch(mi){zo(d,d.return,mi)}}break;case 3:if(Hf=null,N=Pu,Pu=dh(v.containerInfo),il(v,d),Pu=N,Os(d),R&4&&S!==null&&S.memoizedState.isDehydrated)try{Dg(v.containerInfo)}catch(mi){zo(d,d.return,mi)}$p&&($p=!1,Pf(d));break;case 4:R=Pu,Pu=dh(d.stateNode.containerInfo),il(v,d),Os(d),Pu=R;break;case 12:il(v,d),Os(d);break;case 31:il(v,d),Os(d),R&4&&(R=d.updateQueue,R!==null&&(d.updateQueue=null,Zp(d,R)));break;case 13:il(v,d),Os(d),d.child.flags&8192&&d.memoizedState!==null!=(S!==null&&S.memoizedState!==null)&&(bg=qn()),R&4&&(R=d.updateQueue,R!==null&&(d.updateQueue=null,Zp(d,R)));break;case 22:N=d.memoizedState!==null;var mt=S!==null&&S.memoizedState!==null,Wt=Qd,un=Ra;if(Qd=Wt||N,Ra=un||mt,il(v,d),Ra=un,Qd=Wt,Os(d),R&8192)e:for(v=d.stateNode,v._visibility=N?v._visibility&-2:v._visibility|1,N&&(S===null||mt||Qd||Ra||Lf(d)),S=null,v=d;;){if(v.tag===5||v.tag===26){if(S===null){mt=S=v;try{if(Y=mt.stateNode,N)Ce=Y.style,typeof Ce.setProperty=="function"?Ce.setProperty("display","none","important"):Ce.display="none";else{Qe=mt.stateNode;var fn=mt.memoizedProps.style,$t=fn!=null&&fn.hasOwnProperty("display")?fn.display:null;Qe.style.display=$t==null||typeof $t=="boolean"?"":(""+$t).trim()}}catch(mi){zo(mt,mt.return,mi)}}}else if(v.tag===6){if(S===null){mt=v;try{mt.stateNode.nodeValue=N?"":mt.memoizedProps}catch(mi){zo(mt,mt.return,mi)}}}else if(v.tag===18){if(S===null){mt=v;try{var tn=mt.stateNode;N?_o(tn,!0):_o(mt.stateNode,!1)}catch(mi){zo(mt,mt.return,mi)}}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===d)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===d)break e;for(;v.sibling===null;){if(v.return===null||v.return===d)break e;S===v&&(S=null),v=v.return}S===v&&(S=null),v.sibling.return=v.return,v=v.sibling}R&4&&(R=d.updateQueue,R!==null&&(S=R.retryQueue,S!==null&&(R.retryQueue=null,Zp(d,S))));break;case 19:il(v,d),Os(d),R&4&&(R=d.updateQueue,R!==null&&(d.updateQueue=null,Zp(d,R)));break;case 30:break;case 21:break;default:il(v,d),Os(d)}}function Os(d){var v=d.flags;if(v&2){try{for(var S,R=d.return;R!==null;){if(VC(R)){S=R;break}R=R.return}if(S==null)throw Error(i(160));switch(S.tag){case 27:var N=S.stateNode,Y=Fv(d);cy(d,Y,N);break;case 5:var Ce=S.stateNode;S.flags&32&&(So(Ce,""),S.flags&=-33);var Qe=Fv(d);cy(d,Qe,Ce);break;case 3:case 4:var mt=S.stateNode.containerInfo,Wt=Fv(d);zv(d,Wt,mt);break;default:throw Error(i(161))}}catch(un){zo(d,d.return,un)}d.flags&=-3}v&4096&&(d.flags&=-4097)}function Pf(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var v=d;Pf(v),v.tag===5&&v.flags&1024&&v.stateNode.reset(),d=d.sibling}}function qd(d,v){if(v.subtreeFlags&8772)for(v=v.child;v!==null;)hy(d,v.alternate,v),v=v.sibling}function Lf(d){for(d=d.child;d!==null;){var v=d;switch(v.tag){case 0:case 11:case 14:case 15:hh(4,v,v.return),Lf(v);break;case 1:Au(v,v.return);var S=v.stateNode;typeof S.componentWillUnmount=="function"&&Wd(v,v.return,S),Lf(v);break;case 27:Eg(v.stateNode);case 26:case 5:Au(v,v.return),Lf(v);break;case 22:v.memoizedState===null&&Lf(v);break;case 30:Lf(v);break;default:Lf(v)}d=d.sibling}}function Ac(d,v,S){for(S=S&&(v.subtreeFlags&8772)!==0,v=v.child;v!==null;){var R=v.alternate,N=d,Y=v,Ce=Y.flags;switch(Y.tag){case 0:case 11:case 15:Ac(N,Y,S),Gd(4,Y);break;case 1:if(Ac(N,Y,S),R=Y,N=R.stateNode,typeof N.componentDidMount=="function")try{N.componentDidMount()}catch(Wt){zo(R,R.return,Wt)}if(R=Y,N=R.updateQueue,N!==null){var Qe=R.stateNode;try{var mt=N.shared.hiddenCallbacks;if(mt!==null)for(N.shared.hiddenCallbacks=null,N=0;N<mt.length;N++)lc(mt[N],Qe)}catch(Wt){zo(R,R.return,Wt)}}S&&Ce&64&&fg(Y),pl(Y,Y.return);break;case 27:Ay(Y);case 26:case 5:Ac(N,Y,S),S&&R===null&&Ce&4&&YC(Y),pl(Y,Y.return);break;case 12:Ac(N,Y,S);break;case 31:Ac(N,Y,S),S&&Ce&4&&Hp(N,Y);break;case 13:Ac(N,Y,S),S&&Ce&4&&dy(N,Y);break;case 22:Y.memoizedState===null&&Ac(N,Y,S),pl(Y,Y.return);break;case 30:break;default:Ac(N,Y,S)}v=v.sibling}}function N0(d,v){var S=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(S=d.memoizedState.cachePool.pool),d=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(d=v.memoizedState.cachePool.pool),d!==S&&(d!=null&&d.refCount++,S!=null&&Ta(S))}function fy(d,v){d=null,v.alternate!==null&&(d=v.alternate.memoizedState.cache),v=v.memoizedState.cache,v!==d&&(v.refCount++,d!=null&&Ta(d))}function BA(d,v,S,R){if(v.subtreeFlags&10256)for(v=v.child;v!==null;)ZC(d,v,S,R),v=v.sibling}function ZC(d,v,S,R){var N=v.flags;switch(v.tag){case 0:case 11:case 15:BA(d,v,S,R),N&2048&&Gd(9,v);break;case 1:BA(d,v,S,R);break;case 3:BA(d,v,S,R),N&2048&&(d=null,v.alternate!==null&&(d=v.alternate.memoizedState.cache),v=v.memoizedState.cache,v!==d&&(v.refCount++,d!=null&&Ta(d)));break;case 12:if(N&2048){BA(d,v,S,R),d=v.stateNode;try{var Y=v.memoizedProps,Ce=Y.id,Qe=Y.onPostCommit;typeof Qe=="function"&&Qe(Ce,v.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(mt){zo(v,v.return,mt)}}else BA(d,v,S,R);break;case 31:BA(d,v,S,R);break;case 13:BA(d,v,S,R);break;case 23:break;case 22:Y=v.stateNode,Ce=v.alternate,v.memoizedState!==null?Y._visibility&2?BA(d,v,S,R):G0(d,v):Y._visibility&2?BA(d,v,S,R):(Y._visibility|=2,Uf(d,v,S,R,(v.subtreeFlags&10256)!==0||!1)),N&2048&&N0(Ce,v);break;case 24:BA(d,v,S,R),N&2048&&fy(v.alternate,v);break;default:BA(d,v,S,R)}}function Uf(d,v,S,R,N){for(N=N&&((v.subtreeFlags&10256)!==0||!1),v=v.child;v!==null;){var Y=d,Ce=v,Qe=S,mt=R,Wt=Ce.flags;switch(Ce.tag){case 0:case 11:case 15:Uf(Y,Ce,Qe,mt,N),Gd(8,Ce);break;case 23:break;case 22:var un=Ce.stateNode;Ce.memoizedState!==null?un._visibility&2?Uf(Y,Ce,Qe,mt,N):G0(Y,Ce):(un._visibility|=2,Uf(Y,Ce,Qe,mt,N)),N&&Wt&2048&&N0(Ce.alternate,Ce);break;case 24:Uf(Y,Ce,Qe,mt,N),N&&Wt&2048&&fy(Ce.alternate,Ce);break;default:Uf(Y,Ce,Qe,mt,N)}v=v.sibling}}function G0(d,v){if(v.subtreeFlags&10256)for(v=v.child;v!==null;){var S=d,R=v,N=R.flags;switch(R.tag){case 22:G0(S,R),N&2048&&N0(R.alternate,R);break;case 24:G0(S,R),N&2048&&fy(R.alternate,R);break;default:G0(S,R)}v=v.sibling}}var W0=8192;function yg(d,v,S){if(d.subtreeFlags&W0)for(d=d.child;d!==null;)Xp(d,v,S),d=d.sibling}function Xp(d,v,S){switch(d.tag){case 26:yg(d,v,S),d.flags&W0&&d.memoizedState!==null&&Og(S,Pu,d.memoizedState,d.memoizedProps);break;case 5:yg(d,v,S);break;case 3:case 4:var R=Pu;Pu=dh(d.stateNode.containerInfo),yg(d,v,S),Pu=R;break;case 22:d.memoizedState===null&&(R=d.alternate,R!==null&&R.memoizedState!==null?(R=W0,W0=16777216,yg(d,v,S),W0=R):yg(d,v,S));break;default:yg(d,v,S)}}function XC(d){var v=d.alternate;if(v!==null&&(d=v.child,d!==null)){v.child=null;do v=d.sibling,d.sibling=null,d=v;while(d!==null)}}function Q0(d){var v=d.deletions;if((d.flags&16)!==0){if(v!==null)for(var S=0;S<v.length;S++){var R=v[S];wr=R,Gv(R,d)}XC(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)Nv(d),d=d.sibling}function Nv(d){switch(d.tag){case 0:case 11:case 15:Q0(d),d.flags&2048&&hh(9,d,d.return);break;case 3:Q0(d);break;case 12:Q0(d);break;case 22:var v=d.stateNode;d.memoizedState!==null&&v._visibility&2&&(d.return===null||d.return.tag!==13)?(v._visibility&=-3,py(d)):Q0(d);break;default:Q0(d)}}function py(d){var v=d.deletions;if((d.flags&16)!==0){if(v!==null)for(var S=0;S<v.length;S++){var R=v[S];wr=R,Gv(R,d)}XC(d)}for(d=d.child;d!==null;){switch(v=d,v.tag){case 0:case 11:case 15:hh(8,v,v.return),py(v);break;case 22:S=v.stateNode,S._visibility&2&&(S._visibility&=-3,py(v));break;default:py(v)}d=d.sibling}}function Gv(d,v){for(;wr!==null;){var S=wr;switch(S.tag){case 0:case 11:case 15:hh(8,S,v);break;case 23:case 22:if(S.memoizedState!==null&&S.memoizedState.cachePool!==null){var R=S.memoizedState.cachePool.pool;R!=null&&R.refCount++}break;case 24:Ta(S.memoizedState.cache)}if(R=S.child,R!==null)R.return=S,wr=R;else e:for(S=d;wr!==null;){R=wr;var N=R.sibling,Y=R.return;if(mg(R),R===S){wr=null;break e}if(N!==null){N.return=Y,wr=N;break e}wr=Y}}}var G2={getCacheForType:function(d){var v=Ia(oa),S=v.data.get(d);return S===void 0&&(S=d(),v.data.set(d,S)),S},cacheSignal:function(){return Ia(oa).controller.signal}},Wv=typeof WeakMap=="function"?WeakMap:Map,ro=0,Yo=null,Wr=null,Zr=0,Fo=0,hc=null,Kf=!1,vg=!1,Jp=!1,OA=0,la=0,Ff=0,em=0,Qv=0,Qc=0,tm=0,nm=null,Lu=null,my=!1,bg=0,JC=0,Yh=1/0,gy=null,Yd=null,rl=0,zf=null,Cg=null,Vh=0,qv=0,Yv=null,Pa=null,Vd=0,Vv=null;function qc(){return(ro&2)!==0&&Zr!==0?Zr&-Zr:Se.T!==null?Fu():bi()}function $v(){if(Qc===0)if((Zr&536870912)===0||Pr){var d=rt;rt<<=1,(rt&3932160)===0&&(rt=262144),Qc=d}else Qc=536870912;return d=nl.current,d!==null&&(d.flags|=32),Qc}function Uu(d,v,S){(d===Yo&&(Fo===2||Fo===9)||d.cancelPendingCommit!==null)&&(im(d,0),dc(d,Zr,Qc,!1)),Yn(d,S),((ro&2)===0||d!==Yo)&&(d===Yo&&((ro&2)===0&&(em|=S),la===4&&dc(d,Zr,Qc,!1)),Yc(d))}function e_(d,v,S){if((ro&6)!==0)throw Error(i(327));var R=!S&&(v&127)===0&&(v&d.expiredLanes)===0||Bt(d,v),N=R?Q2(d,v):Jv(d,v,!0),Y=R;do{if(N===0){vg&&!R&&dc(d,v,0,!1);break}else{if(S=d.current.alternate,Y&&!Zv(S)){N=Jv(d,v,!1),Y=!1;continue}if(N===2){if(Y=v,d.errorRecoveryDisabledLanes&Y)var Ce=0;else Ce=d.pendingLanes&-536870913,Ce=Ce!==0?Ce:Ce&536870912?536870912:0;if(Ce!==0){v=Ce;e:{var Qe=d;N=nm;var mt=Qe.current.memoizedState.isDehydrated;if(mt&&(im(Qe,Ce).flags|=256),Ce=Jv(Qe,Ce,!1),Ce!==2){if(Jp&&!mt){Qe.errorRecoveryDisabledLanes|=Y,em|=Y,N=4;break e}Y=Lu,Lu=N,Y!==null&&(Lu===null?Lu=Y:Lu.push.apply(Lu,Y))}N=Ce}if(Y=!1,N!==2)continue}}if(N===1){im(d,0),dc(d,v,0,!0);break}e:{switch(R=d,Y=N,Y){case 0:case 1:throw Error(i(345));case 4:if((v&4194048)!==v)break;case 6:dc(R,v,Qc,!Kf);break e;case 2:Lu=null;break;case 3:case 5:break;default:throw Error(i(329))}if((v&62914560)===v&&(N=bg+300-qn(),10<N)){if(dc(R,v,Qc,!Kf),St(R,0,!0)!==0)break e;Vh=v,R.timeoutHandle=ol(Hv.bind(null,R,S,Lu,gy,my,v,Qc,em,tm,Kf,Y,"Throttled",-0,0),N);break e}Hv(R,S,Lu,gy,my,v,Qc,em,tm,Kf,Y,null,-0,0)}}break}while(!0);Yc(d)}function Hv(d,v,S,R,N,Y,Ce,Qe,mt,Wt,un,fn,$t,tn){if(d.timeoutHandle=-1,fn=v.subtreeFlags,fn&8192||(fn&16785408)===16785408){fn={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:zi},Xp(v,Y,fn);var mi=(Y&62914560)===Y?bg-qn():(Y&4194048)===Y?JC-qn():0;if(mi=d_(fn,mi),mi!==null){Vh=Y,d.cancelPendingCommit=mi(r_.bind(null,d,v,Y,S,R,N,Ce,Qe,mt,un,fn,null,$t,tn)),dc(d,Y,Ce,!Wt);return}}r_(d,v,Y,S,R,N,Ce,Qe,mt)}function Zv(d){for(var v=d;;){var S=v.tag;if((S===0||S===11||S===15)&&v.flags&16384&&(S=v.updateQueue,S!==null&&(S=S.stores,S!==null)))for(var R=0;R<S.length;R++){var N=S[R],Y=N.getSnapshot;N=N.value;try{if(!Wo(Y(),N))return!1}catch{return!1}}if(S=v.child,v.subtreeFlags&16384&&S!==null)S.return=v,v=S;else{if(v===d)break;for(;v.sibling===null;){if(v.return===null||v.return===d)return!0;v=v.return}v.sibling.return=v.return,v=v.sibling}}return!0}function dc(d,v,S,R){v&=~Qv,v&=~em,d.suspendedLanes|=v,d.pingedLanes&=~v,R&&(d.warmLanes|=v),R=d.expirationTimes;for(var N=v;0<N;){var Y=31-ae(N),Ce=1<<Y;R[Y]=-1,N&=~Ce}S!==0&&ui(d,S,v)}function _g(){return(ro&6)===0?(om(0),!1):!0}function yy(){if(Wr!==null){if(Fo===0)var d=Wr.return;else d=Wr,Lc=sr=null,Df(d),rh=null,Ul=0,d=Wr;for(;d!==null;)ly(d.alternate,d),d=d.return;Wr=null}}function im(d,v){var S=d.timeoutHandle;S!==-1&&(d.timeoutHandle=-1,vr(S)),S=d.cancelPendingCommit,S!==null&&(d.cancelPendingCommit=null,S()),Vh=0,yy(),Yo=d,Wr=S=ru(d.current,null),Zr=v,Fo=0,hc=null,Kf=!1,vg=Bt(d,v),Jp=!1,tm=Qc=Qv=em=Ff=la=0,Lu=nm=null,my=!1,(v&8)!==0&&(v|=v&32);var R=d.entangledLanes;if(R!==0)for(d=d.entanglements,R&=v;0<R;){var N=31-ae(R),Y=1<<N;v|=d[N],R&=~Y}return OA=v,ec(),S}function vy(d,v){ar=null,Se.H=ch,v===Uc||v===Ef?(v=D0(),Fo=3):v===Sf?(v=D0(),Fo=4):Fo=v===Wp?8:v!==null&&typeof v=="object"&&typeof v.then=="function"?6:1,hc=v,Wr===null&&(la=1,ug(d,dl(v,d.current)))}function $h(){var d=nl.current;return d===null?!0:(Zr&4194048)===Zr?Qo===null:(Zr&62914560)===Zr||(Zr&536870912)!==0?d===Qo:!1}function Xv(){var d=Se.H;return Se.H=ch,d===null?ch:d}function t_(){var d=Se.A;return Se.A=G2,d}function by(){la=4,Kf||(Zr&4194048)!==Zr&&nl.current!==null||(vg=!0),(Ff&134217727)===0&&(em&134217727)===0||Yo===null||dc(Yo,Zr,Qc,!1)}function Jv(d,v,S){var R=ro;ro|=2;var N=Xv(),Y=t_();(Yo!==d||Zr!==v)&&(gy=null,im(d,v)),v=!1;var Ce=la;e:do try{if(Fo!==0&&Wr!==null){var Qe=Wr,mt=hc;switch(Fo){case 8:yy(),Ce=6;break e;case 3:case 2:case 9:case 6:nl.current===null&&(v=!0);var Wt=Fo;if(Fo=0,hc=null,xg(d,Qe,mt,Wt),S&&vg){Ce=0;break e}break;default:Wt=Fo,Fo=0,hc=null,xg(d,Qe,mt,Wt)}}W2(),Ce=la;break}catch(un){vy(d,un)}while(!0);return v&&d.shellSuspendCounter++,Lc=sr=null,ro=R,Se.H=N,Se.A=Y,Wr===null&&(Yo=null,Zr=0,ec()),Ce}function W2(){for(;Wr!==null;)n_(Wr)}function Q2(d,v){var S=ro;ro|=2;var R=Xv(),N=t_();Yo!==d||Zr!==v?(gy=null,Yh=qn()+500,im(d,v)):vg=Bt(d,v);e:do try{if(Fo!==0&&Wr!==null){v=Wr;var Y=hc;t:switch(Fo){case 1:Fo=0,hc=null,xg(d,v,Y,1);break;case 2:case 9:if(vA(Y)){Fo=0,hc=null,i_(v);break}v=function(){Fo!==2&&Fo!==9||Yo!==d||(Fo=7),Yc(d)},Y.then(v,v);break e;case 3:Fo=7;break e;case 4:Fo=5;break e;case 7:vA(Y)?(Fo=0,hc=null,i_(v)):(Fo=0,hc=null,xg(d,v,Y,7));break;case 5:var Ce=null;switch(Wr.tag){case 26:Ce=Wr.memoizedState;case 5:case 27:var Qe=Wr;if(Ce?pb(Ce):Qe.stateNode.complete){Fo=0,hc=null;var mt=Qe.sibling;if(mt!==null)Wr=mt;else{var Wt=Qe.return;Wt!==null?(Wr=Wt,Cy(Wt)):Wr=null}break t}}Fo=0,hc=null,xg(d,v,Y,5);break;case 6:Fo=0,hc=null,xg(d,v,Y,6);break;case 8:yy(),la=6;break e;default:throw Error(i(462))}}q2();break}catch(un){vy(d,un)}while(!0);return Lc=sr=null,Se.H=R,Se.A=N,ro=S,Wr!==null?0:(Yo=null,Zr=0,ec(),la)}function q2(){for(;Wr!==null&&!Dn();)n_(Wr)}function n_(d){var v=QC(d.alternate,d,OA);d.memoizedProps=d.pendingProps,v===null?Cy(d):Wr=v}function i_(d){var v=d,S=v.alternate;switch(v.tag){case 15:case 0:v=Lv(S,v,v.pendingProps,v.type,void 0,Zr);break;case 11:v=Lv(S,v,v.pendingProps,v.type.render,v.ref,Zr);break;case 5:Df(v);default:ly(S,v),v=Wr=H1(v,OA),v=QC(S,v,OA)}d.memoizedProps=d.pendingProps,v===null?Cy(d):Wr=v}function xg(d,v,S,R){Lc=sr=null,Df(v),rh=null,Ul=0;var N=v.return;try{if(Pv(d,N,v,S,Zr)){la=1,ug(d,dl(S,d.current)),Wr=null;return}}catch(Y){if(N!==null)throw Wr=N,Y;la=1,ug(d,dl(S,d.current)),Wr=null;return}v.flags&32768?(Pr||R===1?d=!0:vg||(Zr&536870912)!==0?d=!1:(Kf=d=!0,(R===2||R===9||R===3||R===6)&&(R=nl.current,R!==null&&R.tag===13&&(R.flags|=16384))),q0(v,d)):Cy(v)}function Cy(d){var v=d;do{if((v.flags&32768)!==0){q0(v,Kf);return}d=v.return;var S=qC(v.alternate,v,OA);if(S!==null){Wr=S;return}if(v=v.sibling,v!==null){Wr=v;return}Wr=v=d}while(v!==null);la===0&&(la=5)}function q0(d,v){do{var S=j0(d.alternate,d);if(S!==null){S.flags&=32767,Wr=S;return}if(S=d.return,S!==null&&(S.flags|=32768,S.subtreeFlags=0,S.deletions=null),!v&&(d=d.sibling,d!==null)){Wr=d;return}Wr=d=S}while(d!==null);la=6,Wr=null}function r_(d,v,S,R,N,Y,Ce,Qe,mt){d.cancelPendingCommit=null;do jf();while(rl!==0);if((ro&6)!==0)throw Error(i(327));if(v!==null){if(v===d.current)throw Error(i(177));if(Y=v.lanes|v.childLanes,Y|=XA,vi(d,S,Y,Ce,Qe,mt),d===Yo&&(Wr=Yo=null,Zr=0),Cg=v,zf=d,Vh=S,qv=Y,Yv=N,Pa=R,(v.subtreeFlags&10256)!==0||(v.flags&10256)!==0?(d.callbackNode=null,d.callbackPriority=0,o_(re,function(){return $0(),null})):(d.callbackNode=null,d.callbackPriority=0),R=(v.flags&13878)!==0,(v.subtreeFlags&13878)!==0||R){R=Se.T,Se.T=null,N=qe.p,qe.p=2,Ce=ro,ro|=4;try{pg(d,v,S)}finally{ro=Ce,qe.p=N,Se.T=R}}rl=1,_y(),Y0(),V0()}}function _y(){if(rl===1){rl=0;var d=zf,v=Cg,S=(v.flags&13878)!==0;if((v.subtreeFlags&13878)!==0||S){S=Se.T,Se.T=null;var R=qe.p;qe.p=2;var N=ro;ro|=4;try{HC(v,d);var Y=i1,Ce=og(d.containerInfo),Qe=Y.focusedElem,mt=Y.selectionRange;if(Ce!==Qe&&Qe&&Qe.ownerDocument&&rg(Qe.ownerDocument.documentElement,Qe)){if(mt!==null&&Dp(Qe)){var Wt=mt.start,un=mt.end;if(un===void 0&&(un=Wt),"selectionStart"in Qe)Qe.selectionStart=Wt,Qe.selectionEnd=Math.min(un,Qe.value.length);else{var fn=Qe.ownerDocument||document,$t=fn&&fn.defaultView||window;if($t.getSelection){var tn=$t.getSelection(),mi=Qe.textContent.length,ji=Math.min(mt.start,mi),jo=mt.end===void 0?ji:Math.min(mt.end,mi);!tn.extend&&ji>jo&&(Ce=jo,jo=ji,ji=Ce);var Dt=ig(Qe,ji),_t=ig(Qe,jo);if(Dt&&_t&&(tn.rangeCount!==1||tn.anchorNode!==Dt.node||tn.anchorOffset!==Dt.offset||tn.focusNode!==_t.node||tn.focusOffset!==_t.offset)){var Gt=fn.createRange();Gt.setStart(Dt.node,Dt.offset),tn.removeAllRanges(),ji>jo?(tn.addRange(Gt),tn.extend(_t.node,_t.offset)):(Gt.setEnd(_t.node,_t.offset),tn.addRange(Gt))}}}}for(fn=[],tn=Qe;tn=tn.parentNode;)tn.nodeType===1&&fn.push({element:tn,left:tn.scrollLeft,top:tn.scrollTop});for(typeof Qe.focus=="function"&&Qe.focus(),Qe=0;Qe<fn.length;Qe++){var dn=fn[Qe];dn.element.scrollLeft=dn.left,dn.element.scrollTop=dn.top}}ky=!!Qf,i1=Qf=null}finally{ro=N,qe.p=R,Se.T=S}}d.current=v,rl=2}}function Y0(){if(rl===2){rl=0;var d=zf,v=Cg,S=(v.flags&8772)!==0;if((v.subtreeFlags&8772)!==0||S){S=Se.T,Se.T=null;var R=qe.p;qe.p=2;var N=ro;ro|=4;try{hy(d,v.alternate,v)}finally{ro=N,qe.p=R,Se.T=S}}rl=3}}function V0(){if(rl===4||rl===3){rl=0,wn();var d=zf,v=Cg,S=Vh,R=Pa;(v.subtreeFlags&10256)!==0||(v.flags&10256)!==0?rl=5:(rl=0,Cg=zf=null,Hh(d,d.pendingLanes));var N=d.pendingLanes;if(N===0&&(Yd=null),$i(S),v=v.stateNode,_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(It,v,void 0,(v.current.flags&128)===128)}catch{}if(R!==null){v=Se.T,N=qe.p,qe.p=2,Se.T=null;try{for(var Y=d.onRecoverableError,Ce=0;Ce<R.length;Ce++){var Qe=R[Ce];Y(Qe.value,{componentStack:Qe.stack})}}finally{Se.T=v,qe.p=N}}(Vh&3)!==0&&jf(),Yc(d),N=d.pendingLanes,(S&261930)!==0&&(N&42)!==0?d===Vv?Vd++:(Vd=0,Vv=d):Vd=0,om(0)}}function Hh(d,v){(d.pooledCacheLanes&=v)===0&&(v=d.pooledCache,v!=null&&(d.pooledCache=null,Ta(v)))}function jf(){return _y(),Y0(),V0(),$0()}function $0(){if(rl!==5)return!1;var d=zf,v=qv;qv=0;var S=$i(Vh),R=Se.T,N=qe.p;try{qe.p=32>S?32:S,Se.T=null,S=Yv,Yv=null;var Y=zf,Ce=Vh;if(rl=0,Cg=zf=null,Vh=0,(ro&6)!==0)throw Error(i(331));var Qe=ro;if(ro|=4,Nv(Y.current),ZC(Y,Y.current,Ce,S),ro=Qe,om(0,!1),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(It,Y)}catch{}return!0}finally{qe.p=N,Se.T=R,Hh(d,v)}}function eb(d,v,S){v=dl(S,v),v=ny(d.stateNode,v,2),d=Kl(d,v,2),d!==null&&(Yn(d,2),Yc(d))}function zo(d,v,S){if(d.tag===3)eb(d,d,S);else for(;v!==null;){if(v.tag===3){eb(v,d,S);break}else if(v.tag===1){var R=v.stateNode;if(typeof v.type.getDerivedStateFromError=="function"||typeof R.componentDidCatch=="function"&&(Yd===null||!Yd.has(R))){d=dl(S,d),S=Qh(2),R=Kl(v,S,2),R!==null&&(cg(S,R,v,d),Yn(R,2),Yc(R));break}}v=v.return}}function tb(d,v,S){var R=d.pingCache;if(R===null){R=d.pingCache=new Wv;var N=new Set;R.set(v,N)}else N=R.get(v),N===void 0&&(N=new Set,R.set(v,N));N.has(S)||(Jp=!0,N.add(S),d=Y2.bind(null,d,v,S),v.then(d,d))}function Y2(d,v,S){var R=d.pingCache;R!==null&&R.delete(v),d.pingedLanes|=d.suspendedLanes&S,d.warmLanes&=~S,Yo===d&&(Zr&S)===S&&(la===4||la===3&&(Zr&62914560)===Zr&&300>qn()-bg?(ro&2)===0&&im(d,0):Qv|=S,tm===Zr&&(tm=0)),Yc(d)}function H0(d,v){v===0&&(v=sn()),d=Dc(d,v),d!==null&&(Yn(d,v),Yc(d))}function xy(d){var v=d.memoizedState,S=0;v!==null&&(S=v.retryLane),H0(d,S)}function V2(d,v){var S=0;switch(d.tag){case 31:case 13:var R=d.stateNode,N=d.memoizedState;N!==null&&(S=N.retryLane);break;case 19:R=d.stateNode;break;case 22:R=d.stateNode._retryCache;break;default:throw Error(i(314))}R!==null&&R.delete(v),H0(d,S)}function o_(d,v){return fi(d,v)}var rm=null,Ku=null,Zh=!1,Z0=!1,X0=!1,Nf=0;function Yc(d){d!==Ku&&d.next===null&&(Ku===null?rm=Ku=d:Ku=Ku.next=d),Z0=!0,Zh||(Zh=!0,s_())}function om(d,v){if(!X0&&Z0){X0=!0;do for(var S=!1,R=rm;R!==null;){if(d!==0){var N=R.pendingLanes;if(N===0)var Y=0;else{var Ce=R.suspendedLanes,Qe=R.pingedLanes;Y=(1<<31-ae(42|d)+1)-1,Y&=N&~(Ce&~Qe),Y=Y&201326741?Y&201326741|1:Y?Y|2:0}Y!==0&&(S=!0,nb(R,Y))}else Y=Zr,Y=St(R,R===Yo?Y:0,R.cancelPendingCommit!==null||R.timeoutHandle!==-1),(Y&3)===0||Bt(R,Y)||(S=!0,nb(R,Y));R=R.next}while(S);X0=!1}}function $2(){My()}function My(){Z0=Zh=!1;var d=0;Nf!==0&&H2()&&(d=Nf);for(var v=qn(),S=null,R=rm;R!==null;){var N=R.next,Y=wy(R,v);Y===0?(R.next=null,S===null?rm=N:S.next=N,N===null&&(Ku=S)):(S=R,(d!==0||(Y&3)!==0)&&(Z0=!0)),R=N}rl!==0&&rl!==5||om(d),Nf!==0&&(Nf=0)}function wy(d,v){for(var S=d.suspendedLanes,R=d.pingedLanes,N=d.expirationTimes,Y=d.pendingLanes&-62914561;0<Y;){var Ce=31-ae(Y),Qe=1<<Ce,mt=N[Ce];mt===-1?((Qe&S)===0||(Qe&R)!==0)&&(N[Ce]=kt(Qe,v)):mt<=v&&(d.expiredLanes|=Qe),Y&=~Qe}if(v=Yo,S=Zr,S=St(d,d===v?S:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),R=d.callbackNode,S===0||d===v&&(Fo===2||Fo===9)||d.cancelPendingCommit!==null)return R!==null&&R!==null&&Rn(R),d.callbackNode=null,d.callbackPriority=0;if((S&3)===0||Bt(d,S)){if(v=S&-S,v===d.callbackPriority)return v;switch(R!==null&&Rn(R),$i(S)){case 2:case 8:S=be;break;case 32:S=re;break;case 268435456:S=Pe;break;default:S=re}return R=sm.bind(null,d),S=fi(S,R),d.callbackPriority=v,d.callbackNode=S,v}return R!==null&&R!==null&&Rn(R),d.callbackPriority=2,d.callbackNode=null,2}function sm(d,v){if(rl!==0&&rl!==5)return d.callbackNode=null,d.callbackPriority=0,null;var S=d.callbackNode;if(jf()&&d.callbackNode!==S)return null;var R=Zr;return R=St(d,d===Yo?R:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),R===0?null:(e_(d,R,v),wy(d,qn()),d.callbackNode!=null&&d.callbackNode===S?sm.bind(null,d):null)}function nb(d,v){if(jf())return null;e_(d,v,!0)}function s_(){IA(function(){(ro&6)!==0?fi(wt,$2):My()})}function Fu(){if(Nf===0){var d=gA;d===0&&(d=$e,$e<<=1,($e&261888)===0&&($e=256)),Nf=d}return Nf}function ib(d){return d==null||typeof d=="symbol"||typeof d=="boolean"?null:typeof d=="function"?d:Qs(""+d)}function J0(d,v){var S=v.ownerDocument.createElement("input");return S.name=v.name,S.value=v.value,d.id&&S.setAttribute("form",d.id),v.parentNode.insertBefore(S,v),d=new FormData(d),S.parentNode.removeChild(S),d}function Gf(d,v,S,R,N){if(v==="submit"&&S&&S.stateNode===N){var Y=ib((N[Kn]||null).action),Ce=R.submitter;Ce&&(v=(v=Ce[Kn]||null)?ib(v.formAction):Ce.getAttribute("formAction"),v!==null&&(Y=v,Ce=null));var Qe=new Xt("action","action",null,R,N);d.push({event:Qe,listeners:[{instance:null,listener:function(){if(R.defaultPrevented){if(Nf!==0){var mt=Ce?J0(N,Ce):new FormData(N);jl(S,{pending:!0,data:mt,method:N.method,action:Y},null,mt)}}else typeof Y=="function"&&(Qe.preventDefault(),mt=Ce?J0(N,Ce):new FormData(N),jl(S,{pending:!0,data:mt,method:N.method,action:Y},Y,mt))},currentTarget:N}]})}}for(var lr=0;lr<wf.length;lr++){var rb=wf[lr],fc=rb.toLowerCase(),La=rb[0].toUpperCase()+rb.slice(1);va(fc,"on"+La)}va(hl,"onAnimationEnd"),va(Bd,"onAnimationIteration"),va(Th,"onAnimationStart"),va("dblclick","onDoubleClick"),va("focusin","onFocus"),va("focusout","onBlur"),va(lA,"onTransitionRun"),va(ZA,"onTransitionStart"),va(kl,"onTransitionCancel"),va(mo,"onTransitionEnd"),us("onMouseEnter",["mouseout","mouseover"]),us("onMouseLeave",["mouseout","mouseover"]),us("onPointerEnter",["pointerout","pointerover"]),us("onPointerLeave",["pointerout","pointerover"]),Sl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Sl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Sl("onBeforeInput",["compositionend","keypress","textInput","paste"]),Sl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Sl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Sl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var e1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xh=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(e1));function $d(d,v){v=(v&4)!==0;for(var S=0;S<d.length;S++){var R=d[S],N=R.event;R=R.listeners;e:{var Y=void 0;if(v)for(var Ce=R.length-1;0<=Ce;Ce--){var Qe=R[Ce],mt=Qe.instance,Wt=Qe.currentTarget;if(Qe=Qe.listener,mt!==Y&&N.isPropagationStopped())break e;Y=Qe,N.currentTarget=Wt;try{Y(N)}catch(un){Od(un)}N.currentTarget=null,Y=mt}else for(Ce=0;Ce<R.length;Ce++){if(Qe=R[Ce],mt=Qe.instance,Wt=Qe.currentTarget,Qe=Qe.listener,mt!==Y&&N.isPropagationStopped())break e;Y=Qe,N.currentTarget=Wt;try{Y(N)}catch(un){Od(un)}N.currentTarget=null,Y=mt}}}}function Lr(d,v){var S=v[nr];S===void 0&&(S=v[nr]=new Set);var R=d+"__bubble";S.has(R)||(n1(v,d,2,!1),S.add(R))}function Sy(d,v,S){var R=0;v&&(R|=4),n1(S,d,R,v)}var t1="_reactListening"+Math.random().toString(36).slice(2);function Ey(d){if(!d[t1]){d[t1]=!0,ga.forEach(function(S){S!=="selectionchange"&&(Xh.has(S)||Sy(S,!1,d),Sy(S,!0,d))});var v=d.nodeType===9?d:d.ownerDocument;v===null||v[t1]||(v[t1]=!0,Sy("selectionchange",!1,v))}}function n1(d,v,S,R){switch(g_(v)){case 2:var N=p_;break;case 8:N=m_;break;default:N=Cb}S=N.bind(null,v,S,d),N=void 0,!es||v!=="touchstart"&&v!=="touchmove"&&v!=="wheel"||(N=!0),R?N!==void 0?d.addEventListener(v,S,{capture:!0,passive:N}):d.addEventListener(v,S,!0):N!==void 0?d.addEventListener(v,S,{passive:N}):d.addEventListener(v,S,!1)}function By(d,v,S,R,N){var Y=R;if((v&1)===0&&(v&2)===0&&R!==null)e:for(;;){if(R===null)return;var Ce=R.tag;if(Ce===3||Ce===4){var Qe=R.stateNode.containerInfo;if(Qe===N)break;if(Ce===4)for(Ce=R.return;Ce!==null;){var mt=Ce.tag;if((mt===3||mt===4)&&Ce.stateNode.containerInfo===N)return;Ce=Ce.return}for(;Qe!==null;){if(Ce=Yr(Qe),Ce===null)return;if(mt=Ce.tag,mt===5||mt===6||mt===26||mt===27){R=Y=Ce;continue e}Qe=Qe.parentNode}}R=R.return}Ic(function(){var Wt=Y,un=yo(S),fn=[];e:{var $t=T0.get(d);if($t!==void 0){var tn=Xt,mi=d;switch(d){case"keypress":if(J(S)===0)break e;case"keydown":case"keyup":tn=Tc;break;case"focusin":mi="focus",tn=Oo;break;case"focusout":mi="blur",tn=Oo;break;case"beforeblur":case"afterblur":tn=Oo;break;case"click":if(S.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":tn=ir;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":tn=Or;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":tn=Zm;break;case hl:case Bd:case Th:tn=Za;break;case mo:tn=nu;break;case"scroll":case"scrollend":tn=Pn;break;case"wheel":tn=rA;break;case"copy":case"cut":case"paste":tn=ts;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":tn=Y1;break;case"toggle":case"beforetoggle":tn=Op}var ji=(v&4)!==0,jo=!ji&&(d==="scroll"||d==="scrollend"),Dt=ji?$t!==null?$t+"Capture":null:$t;ji=[];for(var _t=Wt,Gt;_t!==null;){var dn=_t;if(Gt=dn.stateNode,dn=dn.tag,dn!==5&&dn!==26&&dn!==27||Gt===null||Dt===null||(dn=Bo(_t,Dt),dn!=null&&ji.push(hu(_t,dn,Gt))),jo)break;_t=_t.return}0<ji.length&&($t=new tn($t,mi,null,S,un),fn.push({event:$t,listeners:ji}))}}if((v&7)===0){e:{if($t=d==="mouseover"||d==="pointerover",tn=d==="mouseout"||d==="pointerout",$t&&S!==Vr&&(mi=S.relatedTarget||S.fromElement)&&(Yr(mi)||mi[ii]))break e;if((tn||$t)&&($t=un.window===un?un:($t=un.ownerDocument)?$t.defaultView||$t.parentWindow:window,tn?(mi=S.relatedTarget||S.toElement,tn=Wt,mi=mi?Yr(mi):null,mi!==null&&(jo=o(mi),ji=mi.tag,mi!==jo||ji!==5&&ji!==27&&ji!==6)&&(mi=null)):(tn=null,mi=Wt),tn!==mi)){if(ji=ir,dn="onMouseLeave",Dt="onMouseEnter",_t="mouse",(d==="pointerout"||d==="pointerover")&&(ji=Y1,dn="onPointerLeave",Dt="onPointerEnter",_t="pointer"),jo=tn==null?$t:$a(tn),Gt=mi==null?$t:$a(mi),$t=new ji(dn,_t+"leave",tn,S,un),$t.target=jo,$t.relatedTarget=Gt,dn=null,Yr(un)===Wt&&(ji=new ji(Dt,_t+"enter",mi,S,un),ji.target=Gt,ji.relatedTarget=jo,dn=ji),jo=dn,tn&&mi)t:{for(ji=Wf,Dt=tn,_t=mi,Gt=0,dn=Dt;dn;dn=ji(dn))Gt++;dn=0;for(var Di=_t;Di;Di=ji(Di))dn++;for(;0<Gt-dn;)Dt=ji(Dt),Gt--;for(;0<dn-Gt;)_t=ji(_t),dn--;for(;Gt--;){if(Dt===_t||_t!==null&&Dt===_t.alternate){ji=Dt;break t}Dt=ji(Dt),_t=ji(_t)}ji=null}else ji=null;tn!==null&&Ns(fn,$t,tn,ji,!1),mi!==null&&jo!==null&&Ns(fn,jo,mi,ji,!0)}}e:{if($t=Wt?$a(Wt):window,tn=$t.nodeName&&$t.nodeName.toLowerCase(),tn==="select"||tn==="input"&&$t.type==="file")var oo=E0;else if(Tp($t))if(Oh)oo=I0;else{oo=tg;var _i=kp}else tn=$t.nodeName,!tn||tn.toLowerCase()!=="input"||$t.type!=="checkbox"&&$t.type!=="radio"?Wt&&Ha(Wt.elementType)&&(oo=E0):oo=O0;if(oo&&(oo=oo(d,Wt))){eg(fn,oo,S,un);break e}_i&&_i(d,$t,Wt),d==="focusout"&&Wt&&$t.type==="number"&&Wt.memoizedProps.value!=null&&Oc($t,"number",$t.value)}switch(_i=Wt?$a(Wt):window,d){case"focusin":(Tp(_i)||_i.contentEditable==="true")&&(Ot=_i,ln=Wt,Rt=null);break;case"focusout":Rt=ln=Ot=null;break;case"mousedown":ri=!0;break;case"contextmenu":case"mouseup":case"dragend":ri=!1,er(fn,S,un);break;case"selectionchange":if(Ju)break;case"keydown":case"keyup":er(fn,S,un)}var Ar;if(Jm)e:{switch(d){case"compositionstart":var Ur="onCompositionStart";break e;case"compositionend":Ur="onCompositionEnd";break e;case"compositionupdate":Ur="onCompositionUpdate";break e}Ur=void 0}else Bh?Ip(d,S)&&(Ur="onCompositionEnd"):d==="keydown"&&S.keyCode===229&&(Ur="onCompositionStart");Ur&&(oA&&S.locale!=="ko"&&(Bh||Ur!=="onCompositionStart"?Ur==="onCompositionEnd"&&Bh&&(Ar=yr()):(Us=un,Rr="value"in Us?Us.value:Us.textContent,Bh=!0)),_i=Mg(Wt,Ur),0<_i.length&&(Ur=new Io(Ur,d,null,S,un),fn.push({event:Ur,listeners:_i}),Ar?Ur.data=Ar:(Ar=_d(S),Ar!==null&&(Ur.data=Ar)))),(Ar=Cd?iu(d,S):w0(d,S))&&(Ur=Mg(Wt,"onBeforeInput"),0<Ur.length&&(_i=new Io("onBeforeInput","beforeinput",null,S,un),fn.push({event:_i,listeners:Ur}),_i.data=Ar)),Gf(fn,d,Wt,S,un)}$d(fn,v)})}function hu(d,v,S){return{instance:d,listener:v,currentTarget:S}}function Mg(d,v){for(var S=v+"Capture",R=[];d!==null;){var N=d,Y=N.stateNode;if(N=N.tag,N!==5&&N!==26&&N!==27||Y===null||(N=Bo(d,S),N!=null&&R.unshift(hu(d,N,Y)),N=Bo(d,v),N!=null&&R.push(hu(d,N,Y))),d.tag===3)return R;d=d.return}return[]}function Wf(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5&&d.tag!==27);return d||null}function Ns(d,v,S,R,N){for(var Y=v._reactName,Ce=[];S!==null&&S!==R;){var Qe=S,mt=Qe.alternate,Wt=Qe.stateNode;if(Qe=Qe.tag,mt!==null&&mt===R)break;Qe!==5&&Qe!==26&&Qe!==27||Wt===null||(mt=Wt,N?(Wt=Bo(S,Y),Wt!=null&&Ce.unshift(hu(S,Wt,mt))):N||(Wt=Bo(S,Y),Wt!=null&&Ce.push(hu(S,Wt,mt)))),S=S.return}Ce.length!==0&&d.push({event:v,listeners:Ce})}var $s=/\r\n?/g,ob=/\u0000|\uFFFD/g;function pc(d){return(typeof d=="string"?d:""+d).replace($s,`
`).replace(ob,"")}function am(d,v){return v=pc(v),pc(d)===v}function Co(d,v,S,R,N,Y){switch(S){case"children":typeof R=="string"?v==="body"||v==="textarea"&&R===""||So(d,R):(typeof R=="number"||typeof R=="bigint")&&v!=="body"&&So(d,""+R);break;case"className":Eu(d,"class",R);break;case"tabIndex":Eu(d,"tabindex",R);break;case"dir":case"role":case"viewBox":case"width":case"height":Eu(d,S,R);break;case"style":Ws(d,R,Y);break;case"data":if(v!=="object"){Eu(d,"data",R);break}case"src":case"href":if(R===""&&(v!=="a"||S!=="href")){d.removeAttribute(S);break}if(R==null||typeof R=="function"||typeof R=="symbol"||typeof R=="boolean"){d.removeAttribute(S);break}R=Qs(""+R),d.setAttribute(S,R);break;case"action":case"formAction":if(typeof R=="function"){d.setAttribute(S,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Y=="function"&&(S==="formAction"?(v!=="input"&&Co(d,v,"name",N.name,N,null),Co(d,v,"formEncType",N.formEncType,N,null),Co(d,v,"formMethod",N.formMethod,N,null),Co(d,v,"formTarget",N.formTarget,N,null)):(Co(d,v,"encType",N.encType,N,null),Co(d,v,"method",N.method,N,null),Co(d,v,"target",N.target,N,null)));if(R==null||typeof R=="symbol"||typeof R=="boolean"){d.removeAttribute(S);break}R=Qs(""+R),d.setAttribute(S,R);break;case"onClick":R!=null&&(d.onclick=zi);break;case"onScroll":R!=null&&Lr("scroll",d);break;case"onScrollEnd":R!=null&&Lr("scrollend",d);break;case"dangerouslySetInnerHTML":if(R!=null){if(typeof R!="object"||!("__html"in R))throw Error(i(61));if(S=R.__html,S!=null){if(N.children!=null)throw Error(i(60));d.innerHTML=S}}break;case"multiple":d.multiple=R&&typeof R!="function"&&typeof R!="symbol";break;case"muted":d.muted=R&&typeof R!="function"&&typeof R!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(R==null||typeof R=="function"||typeof R=="boolean"||typeof R=="symbol"){d.removeAttribute("xlink:href");break}S=Qs(""+R),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",S);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":R!=null&&typeof R!="function"&&typeof R!="symbol"?d.setAttribute(S,""+R):d.removeAttribute(S);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":R&&typeof R!="function"&&typeof R!="symbol"?d.setAttribute(S,""):d.removeAttribute(S);break;case"capture":case"download":R===!0?d.setAttribute(S,""):R!==!1&&R!=null&&typeof R!="function"&&typeof R!="symbol"?d.setAttribute(S,R):d.removeAttribute(S);break;case"cols":case"rows":case"size":case"span":R!=null&&typeof R!="function"&&typeof R!="symbol"&&!isNaN(R)&&1<=R?d.setAttribute(S,R):d.removeAttribute(S);break;case"rowSpan":case"start":R==null||typeof R=="function"||typeof R=="symbol"||isNaN(R)?d.removeAttribute(S):d.setAttribute(S,R);break;case"popover":Lr("beforetoggle",d),Lr("toggle",d),Bl(d,"popover",R);break;case"xlinkActuate":na(d,"http://www.w3.org/1999/xlink","xlink:actuate",R);break;case"xlinkArcrole":na(d,"http://www.w3.org/1999/xlink","xlink:arcrole",R);break;case"xlinkRole":na(d,"http://www.w3.org/1999/xlink","xlink:role",R);break;case"xlinkShow":na(d,"http://www.w3.org/1999/xlink","xlink:show",R);break;case"xlinkTitle":na(d,"http://www.w3.org/1999/xlink","xlink:title",R);break;case"xlinkType":na(d,"http://www.w3.org/1999/xlink","xlink:type",R);break;case"xmlBase":na(d,"http://www.w3.org/XML/1998/namespace","xml:base",R);break;case"xmlLang":na(d,"http://www.w3.org/XML/1998/namespace","xml:lang",R);break;case"xmlSpace":na(d,"http://www.w3.org/XML/1998/namespace","xml:space",R);break;case"is":Bl(d,"is",R);break;case"innerText":case"textContent":break;default:(!(2<S.length)||S[0]!=="o"&&S[0]!=="O"||S[1]!=="n"&&S[1]!=="N")&&(S=tu.get(S)||S,Bl(d,S,R))}}function sb(d,v,S,R,N,Y){switch(S){case"style":Ws(d,R,Y);break;case"dangerouslySetInnerHTML":if(R!=null){if(typeof R!="object"||!("__html"in R))throw Error(i(61));if(S=R.__html,S!=null){if(N.children!=null)throw Error(i(60));d.innerHTML=S}}break;case"children":typeof R=="string"?So(d,R):(typeof R=="number"||typeof R=="bigint")&&So(d,""+R);break;case"onScroll":R!=null&&Lr("scroll",d);break;case"onScrollEnd":R!=null&&Lr("scrollend",d);break;case"onClick":R!=null&&(d.onclick=zi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!mr.hasOwnProperty(S))e:{if(S[0]==="o"&&S[1]==="n"&&(N=S.endsWith("Capture"),v=S.slice(2,N?S.length-7:void 0),Y=d[Kn]||null,Y=Y!=null?Y[S]:null,typeof Y=="function"&&d.removeEventListener(v,Y,N),typeof R=="function")){typeof Y!="function"&&Y!==null&&(S in d?d[S]=null:d.hasAttribute(S)&&d.removeAttribute(S)),d.addEventListener(v,R,N);break e}S in d?d[S]=R:R===!0?d.setAttribute(S,""):Bl(d,S,R)}}}function gl(d,v,S){switch(v){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Lr("error",d),Lr("load",d);var R=!1,N=!1,Y;for(Y in S)if(S.hasOwnProperty(Y)){var Ce=S[Y];if(Ce!=null)switch(Y){case"src":R=!0;break;case"srcSet":N=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,v));default:Co(d,v,Y,Ce,S,null)}}N&&Co(d,v,"srcSet",S.srcSet,S,null),R&&Co(d,v,"src",S.src,S,null);return;case"input":Lr("invalid",d);var Qe=Y=Ce=N=null,mt=null,Wt=null;for(R in S)if(S.hasOwnProperty(R)){var un=S[R];if(un!=null)switch(R){case"name":N=un;break;case"type":Ce=un;break;case"checked":mt=un;break;case"defaultChecked":Wt=un;break;case"value":Y=un;break;case"defaultValue":Qe=un;break;case"children":case"dangerouslySetInnerHTML":if(un!=null)throw Error(i(137,v));break;default:Co(d,v,R,un,S,null)}}Il(d,Y,Qe,mt,Wt,Ce,N,!1);return;case"select":Lr("invalid",d),R=Ce=Y=null;for(N in S)if(S.hasOwnProperty(N)&&(Qe=S[N],Qe!=null))switch(N){case"value":Y=Qe;break;case"defaultValue":Ce=Qe;break;case"multiple":R=Qe;default:Co(d,v,N,Qe,S,null)}v=Y,S=Ce,d.multiple=!!R,v!=null?eu(d,!!R,v,!1):S!=null&&eu(d,!!R,S,!0);return;case"textarea":Lr("invalid",d),Y=N=R=null;for(Ce in S)if(S.hasOwnProperty(Ce)&&(Qe=S[Ce],Qe!=null))switch(Ce){case"value":R=Qe;break;case"defaultValue":N=Qe;break;case"children":Y=Qe;break;case"dangerouslySetInnerHTML":if(Qe!=null)throw Error(i(91));break;default:Co(d,v,Ce,Qe,S,null)}ws(d,R,N,Y);return;case"option":for(mt in S)if(S.hasOwnProperty(mt)&&(R=S[mt],R!=null))switch(mt){case"selected":d.selected=R&&typeof R!="function"&&typeof R!="symbol";break;default:Co(d,v,mt,R,S,null)}return;case"dialog":Lr("beforetoggle",d),Lr("toggle",d),Lr("cancel",d),Lr("close",d);break;case"iframe":case"object":Lr("load",d);break;case"video":case"audio":for(R=0;R<e1.length;R++)Lr(e1[R],d);break;case"image":Lr("error",d),Lr("load",d);break;case"details":Lr("toggle",d);break;case"embed":case"source":case"link":Lr("error",d),Lr("load",d);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Wt in S)if(S.hasOwnProperty(Wt)&&(R=S[Wt],R!=null))switch(Wt){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,v));default:Co(d,v,Wt,R,S,null)}return;default:if(Ha(v)){for(un in S)S.hasOwnProperty(un)&&(R=S[un],R!==void 0&&sb(d,v,un,R,S,void 0));return}}for(Qe in S)S.hasOwnProperty(Qe)&&(R=S[Qe],R!=null&&Co(d,v,Qe,R,S,null))}function a_(d,v,S,R){switch(v){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var N=null,Y=null,Ce=null,Qe=null,mt=null,Wt=null,un=null;for(tn in S){var fn=S[tn];if(S.hasOwnProperty(tn)&&fn!=null)switch(tn){case"checked":break;case"value":break;case"defaultValue":mt=fn;default:R.hasOwnProperty(tn)||Co(d,v,tn,null,R,fn)}}for(var $t in R){var tn=R[$t];if(fn=S[$t],R.hasOwnProperty($t)&&(tn!=null||fn!=null))switch($t){case"type":Y=tn;break;case"name":N=tn;break;case"checked":Wt=tn;break;case"defaultChecked":un=tn;break;case"value":Ce=tn;break;case"defaultValue":Qe=tn;break;case"children":case"dangerouslySetInnerHTML":if(tn!=null)throw Error(i(137,v));break;default:tn!==fn&&Co(d,v,$t,tn,R,fn)}}Bc(d,Ce,Qe,mt,Wt,un,Y,N);return;case"select":tn=Ce=Qe=$t=null;for(Y in S)if(mt=S[Y],S.hasOwnProperty(Y)&&mt!=null)switch(Y){case"value":break;case"multiple":tn=mt;default:R.hasOwnProperty(Y)||Co(d,v,Y,null,R,mt)}for(N in R)if(Y=R[N],mt=S[N],R.hasOwnProperty(N)&&(Y!=null||mt!=null))switch(N){case"value":$t=Y;break;case"defaultValue":Qe=Y;break;case"multiple":Ce=Y;default:Y!==mt&&Co(d,v,N,Y,R,mt)}v=Qe,S=Ce,R=tn,$t!=null?eu(d,!!S,$t,!1):!!R!=!!S&&(v!=null?eu(d,!!S,v,!0):eu(d,!!S,S?[]:"",!1));return;case"textarea":tn=$t=null;for(Qe in S)if(N=S[Qe],S.hasOwnProperty(Qe)&&N!=null&&!R.hasOwnProperty(Qe))switch(Qe){case"value":break;case"children":break;default:Co(d,v,Qe,null,R,N)}for(Ce in R)if(N=R[Ce],Y=S[Ce],R.hasOwnProperty(Ce)&&(N!=null||Y!=null))switch(Ce){case"value":$t=N;break;case"defaultValue":tn=N;break;case"children":break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(i(91));break;default:N!==Y&&Co(d,v,Ce,N,R,Y)}Rs(d,$t,tn);return;case"option":for(var mi in S)if($t=S[mi],S.hasOwnProperty(mi)&&$t!=null&&!R.hasOwnProperty(mi))switch(mi){case"selected":d.selected=!1;break;default:Co(d,v,mi,null,R,$t)}for(mt in R)if($t=R[mt],tn=S[mt],R.hasOwnProperty(mt)&&$t!==tn&&($t!=null||tn!=null))switch(mt){case"selected":d.selected=$t&&typeof $t!="function"&&typeof $t!="symbol";break;default:Co(d,v,mt,$t,R,tn)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ji in S)$t=S[ji],S.hasOwnProperty(ji)&&$t!=null&&!R.hasOwnProperty(ji)&&Co(d,v,ji,null,R,$t);for(Wt in R)if($t=R[Wt],tn=S[Wt],R.hasOwnProperty(Wt)&&$t!==tn&&($t!=null||tn!=null))switch(Wt){case"children":case"dangerouslySetInnerHTML":if($t!=null)throw Error(i(137,v));break;default:Co(d,v,Wt,$t,R,tn)}return;default:if(Ha(v)){for(var jo in S)$t=S[jo],S.hasOwnProperty(jo)&&$t!==void 0&&!R.hasOwnProperty(jo)&&sb(d,v,jo,void 0,R,$t);for(un in R)$t=R[un],tn=S[un],!R.hasOwnProperty(un)||$t===tn||$t===void 0&&tn===void 0||sb(d,v,un,$t,R,tn);return}}for(var Dt in S)$t=S[Dt],S.hasOwnProperty(Dt)&&$t!=null&&!R.hasOwnProperty(Dt)&&Co(d,v,Dt,null,R,$t);for(fn in R)$t=R[fn],tn=S[fn],!R.hasOwnProperty(fn)||$t===tn||$t==null&&tn==null||Co(d,v,fn,$t,R,tn)}function Oy(d){switch(d){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Jh(){if(typeof performance.getEntriesByType=="function"){for(var d=0,v=0,S=performance.getEntriesByType("resource"),R=0;R<S.length;R++){var N=S[R],Y=N.transferSize,Ce=N.initiatorType,Qe=N.duration;if(Y&&Qe&&Oy(Ce)){for(Ce=0,Qe=N.responseEnd,R+=1;R<S.length;R++){var mt=S[R],Wt=mt.startTime;if(Wt>Qe)break;var un=mt.transferSize,fn=mt.initiatorType;un&&Oy(fn)&&(mt=mt.responseEnd,Ce+=un*(mt<Qe?1:(Qe-Wt)/(mt-Wt)))}if(--R,v+=8*(Y+Ce)/(N.duration/1e3),d++,10<d)break}}if(0<d)return v/d/1e6}return navigator.connection&&(d=navigator.connection.downlink,typeof d=="number")?d:5}var Qf=null,i1=null;function lm(d){return d.nodeType===9?d:d.ownerDocument}function wg(d){switch(d){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function du(d,v){if(d===0)switch(v){case"svg":return 1;case"math":return 2;default:return 0}return d===1&&v==="foreignObject"?0:d}function ed(d,v){return d==="textarea"||d==="noscript"||typeof v.children=="string"||typeof v.children=="number"||typeof v.children=="bigint"||typeof v.dangerouslySetInnerHTML=="object"&&v.dangerouslySetInnerHTML!==null&&v.dangerouslySetInnerHTML.__html!=null}var ab=null;function H2(){var d=window.event;return d&&d.type==="popstate"?d===ab?!1:(ab=d,!0):(ab=null,!1)}var ol=typeof setTimeout=="function"?setTimeout:void 0,vr=typeof clearTimeout=="function"?clearTimeout:void 0,td=typeof Promise=="function"?Promise:void 0,IA=typeof queueMicrotask=="function"?queueMicrotask:typeof td<"u"?function(d){return td.resolve(null).then(d).catch(zu)}:ol;function zu(d){setTimeout(function(){throw d})}function Oi(d){return d==="head"}function Ca(d,v){var S=v,R=0;do{var N=S.nextSibling;if(d.removeChild(S),N&&N.nodeType===8)if(S=N.data,S==="/$"||S==="/&"){if(R===0){d.removeChild(N),Dg(v);return}R--}else if(S==="$"||S==="$?"||S==="$~"||S==="$!"||S==="&")R++;else if(S==="html")Eg(d.ownerDocument.documentElement);else if(S==="head"){S=d.ownerDocument.head,Eg(S);for(var Y=S.firstChild;Y;){var Ce=Y.nextSibling,Qe=Y.nodeName;Y[Ba]||Qe==="SCRIPT"||Qe==="STYLE"||Qe==="LINK"&&Y.rel.toLowerCase()==="stylesheet"||S.removeChild(Y),Y=Ce}}else S==="body"&&Eg(d.ownerDocument.body);S=N}while(S);Dg(v)}function _o(d,v){var S=d;d=0;do{var R=S.nextSibling;if(S.nodeType===1?v?(S._stashedDisplay=S.style.display,S.style.display="none"):(S.style.display=S._stashedDisplay||"",S.getAttribute("style")===""&&S.removeAttribute("style")):S.nodeType===3&&(v?(S._stashedText=S.nodeValue,S.nodeValue=""):S.nodeValue=S._stashedText||""),R&&R.nodeType===8)if(S=R.data,S==="/$"){if(d===0)break;d--}else S!=="$"&&S!=="$?"&&S!=="$~"&&S!=="$!"||d++;S=R}while(S)}function r1(d){var v=d.firstChild;for(v&&v.nodeType===10&&(v=v.nextSibling);v;){var S=v;switch(v=v.nextSibling,S.nodeName){case"HTML":case"HEAD":case"BODY":r1(S),Xl(S);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(S.rel.toLowerCase()==="stylesheet")continue}d.removeChild(S)}}function Vc(d,v,S,R){for(;d.nodeType===1;){var N=S;if(d.nodeName.toLowerCase()!==v.toLowerCase()){if(!R&&(d.nodeName!=="INPUT"||d.type!=="hidden"))break}else if(R){if(!d[Ba])switch(v){case"meta":if(!d.hasAttribute("itemprop"))break;return d;case"link":if(Y=d.getAttribute("rel"),Y==="stylesheet"&&d.hasAttribute("data-precedence"))break;if(Y!==N.rel||d.getAttribute("href")!==(N.href==null||N.href===""?null:N.href)||d.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin)||d.getAttribute("title")!==(N.title==null?null:N.title))break;return d;case"style":if(d.hasAttribute("data-precedence"))break;return d;case"script":if(Y=d.getAttribute("src"),(Y!==(N.src==null?null:N.src)||d.getAttribute("type")!==(N.type==null?null:N.type)||d.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin))&&Y&&d.hasAttribute("async")&&!d.hasAttribute("itemprop"))break;return d;default:return d}}else if(v==="input"&&d.type==="hidden"){var Y=N.name==null?null:""+N.name;if(N.type==="hidden"&&d.getAttribute("name")===Y)return d}else return d;if(d=yl(d.nextSibling),d===null)break}return null}function xo(d,v,S){if(v==="")return null;for(;d.nodeType!==3;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!S||(d=yl(d.nextSibling),d===null))return null;return d}function _a(d,v){for(;d.nodeType!==8;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!v||(d=yl(d.nextSibling),d===null))return null;return d}function um(d){return d.data==="$?"||d.data==="$~"}function Sg(d){return d.data==="$!"||d.data==="$?"&&d.ownerDocument.readyState!=="loading"}function l_(d,v){var S=d.ownerDocument;if(d.data==="$~")d._reactRetry=v;else if(d.data!=="$?"||S.readyState!=="loading")v();else{var R=function(){v(),S.removeEventListener("DOMContentLoaded",R)};S.addEventListener("DOMContentLoaded",R),d._reactRetry=R}}function yl(d){for(;d!=null;d=d.nextSibling){var v=d.nodeType;if(v===1||v===3)break;if(v===8){if(v=d.data,v==="$"||v==="$!"||v==="$?"||v==="$~"||v==="&"||v==="F!"||v==="F")break;if(v==="/$"||v==="/&")return null}}return d}var qf=null;function u_(d){d=d.nextSibling;for(var v=0;d;){if(d.nodeType===8){var S=d.data;if(S==="/$"||S==="/&"){if(v===0)return yl(d.nextSibling);v--}else S!=="$"&&S!=="$!"&&S!=="$?"&&S!=="$~"&&S!=="&"||v++}d=d.nextSibling}return null}function lb(d){d=d.previousSibling;for(var v=0;d;){if(d.nodeType===8){var S=d.data;if(S==="$"||S==="$!"||S==="$?"||S==="$~"||S==="&"){if(v===0)return d;v--}else S!=="/$"&&S!=="/&"||v++}d=d.previousSibling}return null}function ub(d,v,S){switch(v=lm(S),d){case"html":if(d=v.documentElement,!d)throw Error(i(452));return d;case"head":if(d=v.head,!d)throw Error(i(453));return d;case"body":if(d=v.body,!d)throw Error(i(454));return d;default:throw Error(i(451))}}function Eg(d){for(var v=d.attributes;v.length;)d.removeAttributeNode(v[0]);Xl(d)}var mc=new Map,cb=new Set;function dh(d){return typeof d.getRootNode=="function"?d.getRootNode():d.nodeType===9?d:d.ownerDocument}var ju=qe.d;qe.d={f:Iy,r:o1,D:Gi,C:c_,L:A_,m:Bg,X:sl,S:vl,M:Z2};function Iy(){var d=ju.f(),v=_g();return d||v}function o1(d){var v=ls(d);v!==null&&v.tag===5&&v.type==="form"?uu(v):ju.r(d)}var Hs=typeof document>"u"?null:document;function TA(d,v,S){var R=Hs;if(R&&typeof v=="string"&&v){var N=ia(v);N='link[rel="'+d+'"][href="'+N+'"]',typeof S=="string"&&(N+='[crossorigin="'+S+'"]'),cb.has(N)||(cb.add(N),d={rel:d,crossOrigin:S,href:v},R.querySelector(N)===null&&(v=R.createElement("link"),gl(v,"link",d),wo(v),R.head.appendChild(v)))}}function Gi(d){ju.D(d),TA("dns-prefetch",d,null)}function c_(d,v){ju.C(d,v),TA("preconnect",d,v)}function A_(d,v,S){ju.L(d,v,S);var R=Hs;if(R&&d&&v){var N='link[rel="preload"][as="'+ia(v)+'"]';v==="image"&&S&&S.imageSrcSet?(N+='[imagesrcset="'+ia(S.imageSrcSet)+'"]',typeof S.imageSizes=="string"&&(N+='[imagesizes="'+ia(S.imageSizes)+'"]')):N+='[href="'+ia(d)+'"]';var Y=N;switch(v){case"style":Y=Hd(d);break;case"script":Y=Yf(d)}mc.has(Y)||(d=_({rel:"preload",href:v==="image"&&S&&S.imageSrcSet?void 0:d,as:v},S),mc.set(Y,d),R.querySelector(N)!==null||v==="style"&&R.querySelector(Zd(Y))||v==="script"&&R.querySelector(Vf(Y))||(v=R.createElement("link"),gl(v,"link",d),wo(v),R.head.appendChild(v)))}}function Bg(d,v){ju.m(d,v);var S=Hs;if(S&&d){var R=v&&typeof v.as=="string"?v.as:"script",N='link[rel="modulepreload"][as="'+ia(R)+'"][href="'+ia(d)+'"]',Y=N;switch(R){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Y=Yf(d)}if(!mc.has(Y)&&(d=_({rel:"modulepreload",href:d},v),mc.set(Y,d),S.querySelector(N)===null)){switch(R){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(S.querySelector(Vf(Y)))return}R=S.createElement("link"),gl(R,"link",d),wo(R),S.head.appendChild(R)}}}function vl(d,v,S){ju.S(d,v,S);var R=Hs;if(R&&d){var N=ma(R).hoistableStyles,Y=Hd(d);v=v||"default";var Ce=N.get(Y);if(!Ce){var Qe={loading:0,preload:null};if(Ce=R.querySelector(Zd(Y)))Qe.loading=5;else{d=_({rel:"stylesheet",href:d,"data-precedence":v},S),(S=mc.get(Y))&&cm(d,S);var mt=Ce=R.createElement("link");wo(mt),gl(mt,"link",d),mt._p=new Promise(function(Wt,un){mt.onload=Wt,mt.onerror=un}),mt.addEventListener("load",function(){Qe.loading|=1}),mt.addEventListener("error",function(){Qe.loading|=2}),Qe.loading|=4,$f(Ce,v,R)}Ce={type:"stylesheet",instance:Ce,count:1,state:Qe},N.set(Y,Ce)}}}function sl(d,v){ju.X(d,v);var S=Hs;if(S&&d){var R=ma(S).hoistableScripts,N=Yf(d),Y=R.get(N);Y||(Y=S.querySelector(Vf(N)),Y||(d=_({src:d,async:!0},v),(v=mc.get(N))&&a1(d,v),Y=S.createElement("script"),wo(Y),gl(Y,"link",d),S.head.appendChild(Y)),Y={type:"script",instance:Y,count:1,state:null},R.set(N,Y))}}function Z2(d,v){ju.M(d,v);var S=Hs;if(S&&d){var R=ma(S).hoistableScripts,N=Yf(d),Y=R.get(N);Y||(Y=S.querySelector(Vf(N)),Y||(d=_({src:d,async:!0,type:"module"},v),(v=mc.get(N))&&a1(d,v),Y=S.createElement("script"),wo(Y),gl(Y,"link",d),S.head.appendChild(Y)),Y={type:"script",instance:Y,count:1,state:null},R.set(N,Y))}}function Ab(d,v,S,R){var N=(N=Et.current)?dh(N):null;if(!N)throw Error(i(446));switch(d){case"meta":case"title":return null;case"style":return typeof S.precedence=="string"&&typeof S.href=="string"?(v=Hd(S.href),S=ma(N).hoistableStyles,R=S.get(v),R||(R={type:"style",instance:null,count:0,state:null},S.set(v,R)),R):{type:"void",instance:null,count:0,state:null};case"link":if(S.rel==="stylesheet"&&typeof S.href=="string"&&typeof S.precedence=="string"){d=Hd(S.href);var Y=ma(N).hoistableStyles,Ce=Y.get(d);if(Ce||(N=N.ownerDocument||N,Ce={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Y.set(d,Ce),(Y=N.querySelector(Zd(d)))&&!Y._p&&(Ce.instance=Y,Ce.state.loading=5),mc.has(d)||(S={rel:"preload",as:"style",href:S.href,crossOrigin:S.crossOrigin,integrity:S.integrity,media:S.media,hrefLang:S.hrefLang,referrerPolicy:S.referrerPolicy},mc.set(d,S),Y||hb(N,d,S,Ce.state))),v&&R===null)throw Error(i(528,""));return Ce}if(v&&R!==null)throw Error(i(529,""));return null;case"script":return v=S.async,S=S.src,typeof S=="string"&&v&&typeof v!="function"&&typeof v!="symbol"?(v=Yf(S),S=ma(N).hoistableScripts,R=S.get(v),R||(R={type:"script",instance:null,count:0,state:null},S.set(v,R)),R):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,d))}}function Hd(d){return'href="'+ia(d)+'"'}function Zd(d){return'link[rel="stylesheet"]['+d+"]"}function s1(d){return _({},d,{"data-precedence":d.precedence,precedence:null})}function hb(d,v,S,R){d.querySelector('link[rel="preload"][as="style"]['+v+"]")?R.loading=1:(v=d.createElement("link"),R.preload=v,v.addEventListener("load",function(){return R.loading|=1}),v.addEventListener("error",function(){return R.loading|=2}),gl(v,"link",S),wo(v),d.head.appendChild(v))}function Yf(d){return'[src="'+ia(d)+'"]'}function Vf(d){return"script[async]"+d}function db(d,v,S){if(v.count++,v.instance===null)switch(v.type){case"style":var R=d.querySelector('style[data-href~="'+ia(S.href)+'"]');if(R)return v.instance=R,wo(R),R;var N=_({},S,{"data-href":S.href,"data-precedence":S.precedence,href:null,precedence:null});return R=(d.ownerDocument||d).createElement("style"),wo(R),gl(R,"style",N),$f(R,S.precedence,d),v.instance=R;case"stylesheet":N=Hd(S.href);var Y=d.querySelector(Zd(N));if(Y)return v.state.loading|=4,v.instance=Y,wo(Y),Y;R=s1(S),(N=mc.get(N))&&cm(R,N),Y=(d.ownerDocument||d).createElement("link"),wo(Y);var Ce=Y;return Ce._p=new Promise(function(Qe,mt){Ce.onload=Qe,Ce.onerror=mt}),gl(Y,"link",R),v.state.loading|=4,$f(Y,S.precedence,d),v.instance=Y;case"script":return Y=Yf(S.src),(N=d.querySelector(Vf(Y)))?(v.instance=N,wo(N),N):(R=S,(N=mc.get(Y))&&(R=_({},S),a1(R,N)),d=d.ownerDocument||d,N=d.createElement("script"),wo(N),gl(N,"link",R),d.head.appendChild(N),v.instance=N);case"void":return null;default:throw Error(i(443,v.type))}else v.type==="stylesheet"&&(v.state.loading&4)===0&&(R=v.instance,v.state.loading|=4,$f(R,S.precedence,d));return v.instance}function $f(d,v,S){for(var R=S.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),N=R.length?R[R.length-1]:null,Y=N,Ce=0;Ce<R.length;Ce++){var Qe=R[Ce];if(Qe.dataset.precedence===v)Y=Qe;else if(Y!==N)break}Y?Y.parentNode.insertBefore(d,Y.nextSibling):(v=S.nodeType===9?S.head:S,v.insertBefore(d,v.firstChild))}function cm(d,v){d.crossOrigin==null&&(d.crossOrigin=v.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=v.referrerPolicy),d.title==null&&(d.title=v.title)}function a1(d,v){d.crossOrigin==null&&(d.crossOrigin=v.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=v.referrerPolicy),d.integrity==null&&(d.integrity=v.integrity)}var Hf=null;function l1(d,v,S){if(Hf===null){var R=new Map,N=Hf=new Map;N.set(S,R)}else N=Hf,R=N.get(S),R||(R=new Map,N.set(S,R));if(R.has(d))return R;for(R.set(d,null),S=S.getElementsByTagName(d),N=0;N<S.length;N++){var Y=S[N];if(!(Y[Ba]||Y[an]||d==="link"&&Y.getAttribute("rel")==="stylesheet")&&Y.namespaceURI!=="http://www.w3.org/2000/svg"){var Ce=Y.getAttribute(v)||"";Ce=d+Ce;var Qe=R.get(Ce);Qe?Qe.push(Y):R.set(Ce,[Y])}}return R}function h_(d,v,S){d=d.ownerDocument||d,d.head.insertBefore(S,v==="title"?d.querySelector("head > title"):null)}function fb(d,v,S){if(S===1||v.itemProp!=null)return!1;switch(d){case"meta":case"title":return!0;case"style":if(typeof v.precedence!="string"||typeof v.href!="string"||v.href==="")break;return!0;case"link":if(typeof v.rel!="string"||typeof v.href!="string"||v.href===""||v.onLoad||v.onError)break;switch(v.rel){case"stylesheet":return d=v.disabled,typeof v.precedence=="string"&&d==null;default:return!0}case"script":if(v.async&&typeof v.async!="function"&&typeof v.async!="symbol"&&!v.onLoad&&!v.onError&&v.src&&typeof v.src=="string")return!0}return!1}function pb(d){return!(d.type==="stylesheet"&&(d.state.loading&3)===0)}function Og(d,v,S,R){if(S.type==="stylesheet"&&(typeof R.media!="string"||matchMedia(R.media).matches!==!1)&&(S.state.loading&4)===0){if(S.instance===null){var N=Hd(R.href),Y=v.querySelector(Zd(N));if(Y){v=Y._p,v!==null&&typeof v=="object"&&typeof v.then=="function"&&(d.count++,d=Ty.bind(d),v.then(d,d)),S.state.loading|=4,S.instance=Y,wo(Y);return}Y=v.ownerDocument||v,R=s1(R),(N=mc.get(N))&&cm(R,N),Y=Y.createElement("link"),wo(Y);var Ce=Y;Ce._p=new Promise(function(Qe,mt){Ce.onload=Qe,Ce.onerror=mt}),gl(Y,"link",R),S.instance=Y}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(S,v),(v=S.state.preload)&&(S.state.loading&3)===0&&(d.count++,S=Ty.bind(d),v.addEventListener("load",S),v.addEventListener("error",S))}}var mb=0;function d_(d,v){return d.stylesheets&&d.count===0&&u1(d,d.stylesheets),0<d.count||0<d.imgCount?function(S){var R=setTimeout(function(){if(d.stylesheets&&u1(d,d.stylesheets),d.unsuspend){var Y=d.unsuspend;d.unsuspend=null,Y()}},6e4+v);0<d.imgBytes&&mb===0&&(mb=62500*Jh());var N=setTimeout(function(){if(d.waitingForImages=!1,d.count===0&&(d.stylesheets&&u1(d,d.stylesheets),d.unsuspend)){var Y=d.unsuspend;d.unsuspend=null,Y()}},(d.imgBytes>mb?50:800)+v);return d.unsuspend=S,function(){d.unsuspend=null,clearTimeout(R),clearTimeout(N)}}:null}function Ty(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)u1(this,this.stylesheets);else if(this.unsuspend){var d=this.unsuspend;this.unsuspend=null,d()}}}var Zf=null;function u1(d,v){d.stylesheets=null,d.unsuspend!==null&&(d.count++,Zf=new Map,v.forEach(f_,d),Zf=null,Ty.call(d))}function f_(d,v){if(!(v.state.loading&4)){var S=Zf.get(d);if(S)var R=S.get(null);else{S=new Map,Zf.set(d,S);for(var N=d.querySelectorAll("link[data-precedence],style[data-precedence]"),Y=0;Y<N.length;Y++){var Ce=N[Y];(Ce.nodeName==="LINK"||Ce.getAttribute("media")!=="not all")&&(S.set(Ce.dataset.precedence,Ce),R=Ce)}R&&S.set(null,R)}N=v.instance,Ce=N.getAttribute("data-precedence"),Y=S.get(Ce)||R,Y===R&&S.set(null,N),S.set(Ce,N),this.count++,R=Ty.bind(this),N.addEventListener("load",R),N.addEventListener("error",R),Y?Y.parentNode.insertBefore(N,Y.nextSibling):(d=d.nodeType===9?d.head:d,d.insertBefore(N,d.firstChild)),v.state.loading|=4}}var Xf={$$typeof:$,Provider:null,Consumer:null,_currentValue:ut,_currentValue2:ut,_threadCount:0};function gb(d,v,S,R,N,Y,Ce,Qe,mt){this.tag=1,this.containerInfo=d,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Tn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tn(0),this.hiddenUpdates=Tn(null),this.identifierPrefix=R,this.onUncaughtError=N,this.onCaughtError=Y,this.onRecoverableError=Ce,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=mt,this.incompleteTransitions=new Map}function yb(d,v,S,R,N,Y,Ce,Qe,mt,Wt,un,fn){return d=new gb(d,v,S,Ce,mt,Wt,un,fn,Qe),v=1,Y===!0&&(v|=24),Y=Ga(3,null,null,v),d.current=Y,Y.stateNode=d,v=qs(),v.refCount++,d.pooledCache=v,v.refCount++,Y.memoizedState={element:R,isDehydrated:S,cache:v},tl(Y),d}function Am(d){return d?(d=nc,d):nc}function vb(d,v,S,R,N,Y){N=Am(N),R.context===null?R.context=N:R.pendingContext=N,R=zh(v),R.payload={element:S},Y=Y===void 0?null:Y,Y!==null&&(R.callback=Y),S=Kl(d,R,v),S!==null&&(Uu(S,d,v),oh(S,d,v))}function Ig(d,v){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var S=d.retryLane;d.retryLane=S!==0&&S<v?S:v}}function bb(d,v){Ig(d,v),(d=d.alternate)&&Ig(d,v)}function Tg(d){if(d.tag===13||d.tag===31){var v=Dc(d,67108864);v!==null&&Uu(v,d,67108864),bb(d,67108864)}}function c1(d){if(d.tag===13||d.tag===31){var v=qc();v=nn(v);var S=Dc(d,v);S!==null&&Uu(S,d,v),bb(d,v)}}var ky=!0;function p_(d,v,S,R){var N=Se.T;Se.T=null;var Y=qe.p;try{qe.p=2,Cb(d,v,S,R)}finally{qe.p=Y,Se.T=N}}function m_(d,v,S,R){var N=Se.T;Se.T=null;var Y=qe.p;try{qe.p=8,Cb(d,v,S,R)}finally{qe.p=Y,Se.T=N}}function Cb(d,v,S,R){if(ky){var N=_b(R);if(N===null)By(d,v,R,Dy,S),v_(d,R);else if(b_(N,d,v,S,R))R.stopPropagation();else if(v_(d,R),v&4&&-1<y_.indexOf(d)){for(;N!==null;){var Y=ls(N);if(Y!==null)switch(Y.tag){case 3:if(Y=Y.stateNode,Y.current.memoizedState.isDehydrated){var Ce=at(Y.pendingLanes);if(Ce!==0){var Qe=Y;for(Qe.pendingLanes|=2,Qe.entangledLanes|=2;Ce;){var mt=1<<31-ae(Ce);Qe.entanglements[1]|=mt,Ce&=~mt}Yc(Y),(ro&6)===0&&(Yh=qn()+500,om(0))}}break;case 31:case 13:Qe=Dc(Y,2),Qe!==null&&Uu(Qe,Y,2),_g(),bb(Y,2)}if(Y=_b(R),Y===null&&By(d,v,R,Dy,S),Y===N)break;N=Y}N!==null&&R.stopPropagation()}else By(d,v,R,null,S)}}function _b(d){return d=yo(d),xb(d)}var Dy=null;function xb(d){if(Dy=null,d=Yr(d),d!==null){var v=o(d);if(v===null)d=null;else{var S=v.tag;if(S===13){if(d=s(v),d!==null)return d;d=null}else if(S===31){if(d=a(v),d!==null)return d;d=null}else if(S===3){if(v.stateNode.current.memoizedState.isDehydrated)return v.tag===3?v.stateNode.containerInfo:null;d=null}else v!==d&&(d=null)}}return Dy=d,null}function g_(d){switch(d){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(En()){case wt:return 2;case be:return 8;case re:case ce:return 32;case Pe:return 268435456;default:return 32}default:return 32}}var Ry=!1,gc=null,nd=null,Xd=null,kg=new Map,A1=new Map,Jd=[],y_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function v_(d,v){switch(d){case"focusin":case"focusout":gc=null;break;case"dragenter":case"dragleave":nd=null;break;case"mouseover":case"mouseout":Xd=null;break;case"pointerover":case"pointerout":kg.delete(v.pointerId);break;case"gotpointercapture":case"lostpointercapture":A1.delete(v.pointerId)}}function Jf(d,v,S,R,N,Y){return d===null||d.nativeEvent!==Y?(d={blockedOn:v,domEventName:S,eventSystemFlags:R,nativeEvent:Y,targetContainers:[N]},v!==null&&(v=ls(v),v!==null&&Tg(v)),d):(d.eventSystemFlags|=R,v=d.targetContainers,N!==null&&v.indexOf(N)===-1&&v.push(N),d)}function b_(d,v,S,R,N){switch(v){case"focusin":return gc=Jf(gc,d,v,S,R,N),!0;case"dragenter":return nd=Jf(nd,d,v,S,R,N),!0;case"mouseover":return Xd=Jf(Xd,d,v,S,R,N),!0;case"pointerover":var Y=N.pointerId;return kg.set(Y,Jf(kg.get(Y)||null,d,v,S,R,N)),!0;case"gotpointercapture":return Y=N.pointerId,A1.set(Y,Jf(A1.get(Y)||null,d,v,S,R,N)),!0}return!1}function Mb(d){var v=Yr(d.target);if(v!==null){var S=o(v);if(S!==null){if(v=S.tag,v===13){if(v=s(S),v!==null){d.blockedOn=v,to(d.priority,function(){c1(S)});return}}else if(v===31){if(v=a(S),v!==null){d.blockedOn=v,to(d.priority,function(){c1(S)});return}}else if(v===3&&S.stateNode.current.memoizedState.isDehydrated){d.blockedOn=S.tag===3?S.stateNode.containerInfo:null;return}}}d.blockedOn=null}function fh(d){if(d.blockedOn!==null)return!1;for(var v=d.targetContainers;0<v.length;){var S=_b(d.nativeEvent);if(S===null){S=d.nativeEvent;var R=new S.constructor(S.type,S);Vr=R,S.target.dispatchEvent(R),Vr=null}else return v=ls(S),v!==null&&Tg(v),d.blockedOn=S,!1;v.shift()}return!0}function wb(d,v,S){fh(d)&&S.delete(v)}function C_(){Ry=!1,gc!==null&&fh(gc)&&(gc=null),nd!==null&&fh(nd)&&(nd=null),Xd!==null&&fh(Xd)&&(Xd=null),kg.forEach(wb),A1.forEach(wb)}function hm(d,v){d.blockedOn===v&&(d.blockedOn=null,Ry||(Ry=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,C_)))}var h1=null;function __(d){h1!==d&&(h1=d,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){h1===d&&(h1=null);for(var v=0;v<d.length;v+=3){var S=d[v],R=d[v+1],N=d[v+2];if(typeof R!="function"){if(xb(R||S)===null)continue;break}var Y=ls(S);Y!==null&&(d.splice(v,3),v-=3,jl(Y,{pending:!0,data:N,method:S.method,action:R},R,N))}}))}function Dg(d){function v(mt){return hm(mt,d)}gc!==null&&hm(gc,d),nd!==null&&hm(nd,d),Xd!==null&&hm(Xd,d),kg.forEach(v),A1.forEach(v);for(var S=0;S<Jd.length;S++){var R=Jd[S];R.blockedOn===d&&(R.blockedOn=null)}for(;0<Jd.length&&(S=Jd[0],S.blockedOn===null);)Mb(S),S.blockedOn===null&&Jd.shift();if(S=(d.ownerDocument||d).$$reactFormReplay,S!=null)for(R=0;R<S.length;R+=3){var N=S[R],Y=S[R+1],Ce=N[Kn]||null;if(typeof Y=="function")Ce||__(S);else if(Ce){var Qe=null;if(Y&&Y.hasAttribute("formAction")){if(N=Y,Ce=Y[Kn]||null)Qe=Ce.formAction;else if(xb(N)!==null)continue}else Qe=Ce.action;typeof Qe=="function"?S[R+1]=Qe:(S.splice(R,3),R-=3),__(S)}}}function fu(){function d(Y){Y.canIntercept&&Y.info==="react-transition"&&Y.intercept({handler:function(){return new Promise(function(Ce){return N=Ce})},focusReset:"manual",scroll:"manual"})}function v(){N!==null&&(N(),N=null),R||setTimeout(S,20)}function S(){if(!R&&!navigation.transition){var Y=navigation.currentEntry;Y&&Y.url!=null&&navigation.navigate(Y.url,{state:Y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var R=!1,N=null;return navigation.addEventListener("navigate",d),navigation.addEventListener("navigatesuccess",v),navigation.addEventListener("navigateerror",v),setTimeout(S,100),function(){R=!0,navigation.removeEventListener("navigate",d),navigation.removeEventListener("navigatesuccess",v),navigation.removeEventListener("navigateerror",v),N!==null&&(N(),N=null)}}}function Rg(d){this._internalRoot=d}dm.prototype.render=Rg.prototype.render=function(d){var v=this._internalRoot;if(v===null)throw Error(i(409));var S=v.current,R=qc();vb(S,R,d,v,null,null)},dm.prototype.unmount=Rg.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var v=d.containerInfo;vb(d.current,2,null,d,null,null),_g(),v[ii]=null}};function dm(d){this._internalRoot=d}dm.prototype.unstable_scheduleHydration=function(d){if(d){var v=bi();d={blockedOn:null,target:d,priority:v};for(var S=0;S<Jd.length&&v!==0&&v<Jd[S].priority;S++);Jd.splice(S,0,d),S===0&&Mb(d)}};var Sb=e.version;if(Sb!=="19.2.0")throw Error(i(527,Sb,"19.2.0"));qe.findDOMNode=function(d){var v=d._reactInternals;if(v===void 0)throw typeof d.render=="function"?Error(i(188)):(d=Object.keys(d).join(","),Error(i(268,d)));return d=f(v),d=d!==null?y(d):null,d=d===null?null:d.stateNode,d};var Py={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Se,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fm.isDisabled&&fm.supportsFiber)try{It=fm.inject(Py),_n=fm}catch{}}return e3.createRoot=function(d,v){if(!r(d))throw Error(i(299));var S=!1,R="",N=Np,Y=Gp,Ce=ty;return v!=null&&(v.unstable_strictMode===!0&&(S=!0),v.identifierPrefix!==void 0&&(R=v.identifierPrefix),v.onUncaughtError!==void 0&&(N=v.onUncaughtError),v.onCaughtError!==void 0&&(Y=v.onCaughtError),v.onRecoverableError!==void 0&&(Ce=v.onRecoverableError)),v=yb(d,1,!1,null,null,S,R,null,N,Y,Ce,fu),d[ii]=v.current,Ey(d),new Rg(v)},e3.hydrateRoot=function(d,v,S){if(!r(d))throw Error(i(299));var R=!1,N="",Y=Np,Ce=Gp,Qe=ty,mt=null;return S!=null&&(S.unstable_strictMode===!0&&(R=!0),S.identifierPrefix!==void 0&&(N=S.identifierPrefix),S.onUncaughtError!==void 0&&(Y=S.onUncaughtError),S.onCaughtError!==void 0&&(Ce=S.onCaughtError),S.onRecoverableError!==void 0&&(Qe=S.onRecoverableError),S.formState!==void 0&&(mt=S.formState)),v=yb(d,1,!0,v,S??null,R,N,mt,Y,Ce,Qe,fu),v.context=Am(null),S=v.current,R=qc(),R=nn(R),N=zh(R),N.callback=null,Kl(S,N,R),S=R,v.current.lanes=S,Yn(v,S),Yc(v),d[ii]=v.current,Ey(d),new dm(v)},e3.version="19.2.0",e3}var iF;function gae(){if(iF)return eO.exports;iF=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),eO.exports=mae(),eO.exports}var xH=gae();const yae="modulepreload",vae=function(n){return"/maputnik/"+n},rF={},S_=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){let f=function(y){return Promise.all(y.map(_=>Promise.resolve(_).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};var s=f;document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");r=f(t.map(y=>{if(y=vae(y),y in rF)return;rF[y]=!0;const _=y.endsWith(".css"),E=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${E}`))return;const I=document.createElement("link");if(I.rel=_?"stylesheet":yae,_||(I.as="script"),I.crossOrigin="",I.href=y,c&&I.setAttribute("nonce",c),document.head.appendChild(I),_)return new Promise((P,K)=>{I.addEventListener("load",P),I.addEventListener("error",()=>K(new Error(`Unable to preload CSS for ${y}`)))})}))}function o(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return r.then(a=>{for(const c of a||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})},bae=(n,e,t)=>{const i=n[e];return i?typeof i=="function"?i():Promise.resolve(i):new Promise((r,o)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},Cr=n=>typeof n=="string",t3=()=>{let n,e;const t=new Promise((i,r)=>{n=i,e=r});return t.resolve=n,t.reject=e,t},oF=n=>n==null?"":""+n,Cae=(n,e,t)=>{n.forEach(i=>{e[i]&&(t[i]=e[i])})},_ae=/###/g,sF=n=>n&&n.indexOf("###")>-1?n.replace(_ae,"."):n,aF=n=>!n||Cr(n),$3=(n,e,t)=>{const i=Cr(e)?e.split("."):e;let r=0;for(;r<i.length-1;){if(aF(n))return{};const o=sF(i[r]);!n[o]&&t&&(n[o]=new t),Object.prototype.hasOwnProperty.call(n,o)?n=n[o]:n={},++r}return aF(n)?{}:{obj:n,k:sF(i[r])}},lF=(n,e,t)=>{const{obj:i,k:r}=$3(n,e,Object);if(i!==void 0||e.length===1){i[r]=t;return}let o=e[e.length-1],s=e.slice(0,e.length-1),a=$3(n,s,Object);for(;a.obj===void 0&&s.length;)o=`${s[s.length-1]}.${o}`,s=s.slice(0,s.length-1),a=$3(n,s,Object),a?.obj&&typeof a.obj[`${a.k}.${o}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${o}`]=t},xae=(n,e,t,i)=>{const{obj:r,k:o}=$3(n,e,Object);r[o]=r[o]||[],r[o].push(t)},kS=(n,e)=>{const{obj:t,k:i}=$3(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,i))return t[i]},Mae=(n,e,t)=>{const i=kS(n,t);return i!==void 0?i:kS(e,t)},MH=(n,e,t)=>{for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in n?Cr(n[i])||n[i]instanceof String||Cr(e[i])||e[i]instanceof String?t&&(n[i]=e[i]):MH(n[i],e[i],t):n[i]=e[i]);return n},E_=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var wae={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Sae=n=>Cr(n)?n.replace(/[&<>"'\/]/g,e=>wae[e]):n;class Eae{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}const Bae=[" ",",","?","!",";"],Oae=new Eae(20),Iae=(n,e,t)=>{e=e||"",t=t||"";const i=Bae.filter(s=>e.indexOf(s)<0&&t.indexOf(s)<0);if(i.length===0)return!0;const r=Oae.getRegExp(`(${i.map(s=>s==="?"?"\\?":s).join("|")})`);let o=!r.test(n);if(!o){const s=n.indexOf(t);s>0&&!r.test(n.substring(0,s))&&(o=!0)}return o},l9=(n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const i=e.split(t);let r=n;for(let o=0;o<i.length;){if(!r||typeof r!="object")return;let s,a="";for(let c=o;c<i.length;++c)if(c!==o&&(a+=t),a+=i[c],s=r[a],s!==void 0){if(["string","number","boolean"].indexOf(typeof s)>-1&&c<i.length-1)continue;o+=c-o+1;break}r=s}return r},w4=n=>n?.replace("_","-"),Tae={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console?.[n]?.apply?.(console,e)}};class DS{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||Tae,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,i,r){return r&&!this.debug?null:(Cr(e[0])&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new DS(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new DS(this.logger,e)}}var Zg=new DS;class r6{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const r=this.observers[i].get(t)||0;this.observers[i].set(t,r+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([r,o])=>{for(let s=0;s<o;s++)r(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([r,o])=>{for(let s=0;s<o;s++)r.apply(r,[e,...t])})}}class uF extends r6{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,i,r={}){const o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,s=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,t],i&&(Array.isArray(i)?a.push(...i):Cr(i)&&o?a.push(...i.split(o)):a.push(i)));const c=kS(this.data,a);return!c&&!t&&!i&&e.indexOf(".")>-1&&(e=a[0],t=a[1],i=a.slice(2).join(".")),c||!s||!Cr(i)?c:l9(this.data?.[e]?.[t],i,o)}addResource(e,t,i,r,o={silent:!1}){const s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let a=[e,t];i&&(a=a.concat(s?i.split(s):i)),e.indexOf(".")>-1&&(a=e.split("."),r=t,t=a[1]),this.addNamespaces(t),lF(this.data,a,r),o.silent||this.emit("added",e,t,i,r)}addResources(e,t,i,r={silent:!1}){for(const o in i)(Cr(i[o])||Array.isArray(i[o]))&&this.addResource(e,t,o,i[o],{silent:!0});r.silent||this.emit("added",e,t,i)}addResourceBundle(e,t,i,r,o,s={silent:!1,skipCopy:!1}){let a=[e,t];e.indexOf(".")>-1&&(a=e.split("."),r=i,i=t,t=a[1]),this.addNamespaces(t);let c=kS(this.data,a)||{};s.skipCopy||(i=JSON.parse(JSON.stringify(i))),r?MH(c,i,o):c={...c,...i},lF(this.data,a,c),s.silent||this.emit("added",e,t,i)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(r=>t[r]&&Object.keys(t[r]).length>0)}toJSON(){return this.data}}var wH={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,i,r){return n.forEach(o=>{e=this.processors[o]?.process(e,t,i,r)??e}),e}};const SH=Symbol("i18next/PATH_KEY");function kae(){const n=[],e=Object.create(null);let t;return e.get=(i,r)=>(t?.revoke?.(),r===SH?n:(n.push(r),t=Proxy.revocable(i,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function RS(n,e){const{[SH]:t}=n(kae());return t.join(e?.keySeparator??".")}const cF={},rO=n=>!Cr(n)&&typeof n!="boolean"&&typeof n!="number";class PS extends r6{constructor(e,t={}){super(),Cae(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Zg.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const i={...t};if(e==null)return!1;const r=this.resolve(e,i);if(r?.res===void 0)return!1;const o=rO(r.res);return!(i.returnObjects===!1&&o)}extractFromKey(e,t){let i=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const r=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let o=t.ns||this.options.defaultNS||[];const s=i&&e.indexOf(i)>-1,a=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Iae(e,i,r);if(s&&!a){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:Cr(o)?[o]:o};const f=e.split(i);(i!==r||i===r&&this.options.ns.indexOf(f[0])>-1)&&(o=f.shift()),e=f.join(r)}return{key:e,namespaces:Cr(o)?[o]:o}}translate(e,t,i){let r=typeof t=="object"?{...t}:t;if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),e==null)return"";typeof e=="function"&&(e=RS(e,{...this.options,...r})),Array.isArray(e)||(e=[String(e)]);const o=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,s=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:a,namespaces:c}=this.extractFromKey(e[e.length-1],r),f=c[c.length-1];let y=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;y===void 0&&(y=":");const _=r.lng||this.language,E=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(_?.toLowerCase()==="cimode")return E?o?{res:`${f}${y}${a}`,usedKey:a,exactUsedKey:a,usedLng:_,usedNS:f,usedParams:this.getUsedParamsDetails(r)}:`${f}${y}${a}`:o?{res:a,usedKey:a,exactUsedKey:a,usedLng:_,usedNS:f,usedParams:this.getUsedParamsDetails(r)}:a;const I=this.resolve(e,r);let P=I?.res;const K=I?.usedKey||a,z=I?.exactUsedKey||a,Q=["[object Number]","[object Function]","[object RegExp]"],V=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,$=!this.i18nFormat||this.i18nFormat.handleAsObject,Z=r.count!==void 0&&!Cr(r.count),ee=PS.hasDefaultValue(r),X=Z?this.pluralResolver.getSuffix(_,r.count,r):"",W=r.ordinal&&Z?this.pluralResolver.getSuffix(_,r.count,{ordinal:!1}):"",se=Z&&!r.ordinal&&r.count===0,ue=se&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${X}`]||r[`defaultValue${W}`]||r.defaultValue;let ve=P;$&&!P&&ee&&(ve=ue);const ye=rO(ve),Ee=Object.prototype.toString.apply(ve);if($&&ve&&ye&&Q.indexOf(Ee)<0&&!(Cr(V)&&Array.isArray(ve))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const _e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(K,ve,{...r,ns:c}):`key '${a} (${this.language})' returned an object instead of string.`;return o?(I.res=_e,I.usedParams=this.getUsedParamsDetails(r),I):_e}if(s){const _e=Array.isArray(ve),Be=_e?[]:{},Fe=_e?z:K;for(const Se in ve)if(Object.prototype.hasOwnProperty.call(ve,Se)){const qe=`${Fe}${s}${Se}`;ee&&!P?Be[Se]=this.translate(qe,{...r,defaultValue:rO(ue)?ue[Se]:void 0,joinArrays:!1,ns:c}):Be[Se]=this.translate(qe,{...r,joinArrays:!1,ns:c}),Be[Se]===qe&&(Be[Se]=ve[Se])}P=Be}}else if($&&Cr(V)&&Array.isArray(P))P=P.join(V),P&&(P=this.extendTranslation(P,e,r,i));else{let _e=!1,Be=!1;!this.isValidLookup(P)&&ee&&(_e=!0,P=ue),this.isValidLookup(P)||(Be=!0,P=a);const Se=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Be?void 0:P,qe=ee&&ue!==P&&this.options.updateMissing;if(Be||_e||qe){if(this.logger.log(qe?"updateKey":"missingKey",_,f,a,qe?ue:P),s){const Ie=this.resolve(a,{...r,keySeparator:!1});Ie&&Ie.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let ut=[];const ht=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ht&&ht[0])for(let Ie=0;Ie<ht.length;Ie++)ut.push(ht[Ie]);else this.options.saveMissingTo==="all"?ut=this.languageUtils.toResolveHierarchy(r.lng||this.language):ut.push(r.lng||this.language);const De=(Ie,ze,Te)=>{const vt=ee&&Te!==P?Te:Se;this.options.missingKeyHandler?this.options.missingKeyHandler(Ie,f,ze,vt,qe,r):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(Ie,f,ze,vt,qe,r),this.emit("missingKey",Ie,f,ze,P)};this.options.saveMissing&&(this.options.saveMissingPlurals&&Z?ut.forEach(Ie=>{const ze=this.pluralResolver.getSuffixes(Ie,r);se&&r[`defaultValue${this.options.pluralSeparator}zero`]&&ze.indexOf(`${this.options.pluralSeparator}zero`)<0&&ze.push(`${this.options.pluralSeparator}zero`),ze.forEach(Te=>{De([Ie],a+Te,r[`defaultValue${Te}`]||ue)})}):De(ut,a,ue))}P=this.extendTranslation(P,e,r,I,i),Be&&P===a&&this.options.appendNamespaceToMissingKey&&(P=`${f}${y}${a}`),(Be||_e)&&this.options.parseMissingKeyHandler&&(P=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${f}${y}${a}`:a,_e?P:void 0,r))}return o?(I.res=P,I.usedParams=this.getUsedParamsDetails(r),I):P}extendTranslation(e,t,i,r,o){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const c=Cr(e)&&(i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(c){const _=e.match(this.interpolator.nestingRegexp);f=_&&_.length}let y=i.replace&&!Cr(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(y={...this.options.interpolation.defaultVariables,...y}),e=this.interpolator.interpolate(e,y,i.lng||this.language||r.usedLng,i),c){const _=e.match(this.interpolator.nestingRegexp),E=_&&_.length;f<E&&(i.nest=!1)}!i.lng&&r&&r.res&&(i.lng=this.language||r.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,(..._)=>o?.[0]===_[0]&&!i.context?(this.logger.warn(`It seems you are nesting recursively key: ${_[0]} in key: ${t[0]}`),null):this.translate(..._,t),i)),i.interpolation&&this.interpolator.reset()}const s=i.postProcess||this.options.postProcess,a=Cr(s)?[s]:s;return e!=null&&a?.length&&i.applyPostProcessor!==!1&&(e=wH.handle(a,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e,t={}){let i,r,o,s,a;return Cr(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(i))return;const f=this.extractFromKey(c,t),y=f.key;r=y;let _=f.namespaces;this.options.fallbackNS&&(_=_.concat(this.options.fallbackNS));const E=t.count!==void 0&&!Cr(t.count),I=E&&!t.ordinal&&t.count===0,P=t.context!==void 0&&(Cr(t.context)||typeof t.context=="number")&&t.context!=="",K=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);_.forEach(z=>{this.isValidLookup(i)||(a=z,!cF[`${K[0]}-${z}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(a)&&(cF[`${K[0]}-${z}`]=!0,this.logger.warn(`key "${r}" for languages "${K.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),K.forEach(Q=>{if(this.isValidLookup(i))return;s=Q;const V=[y];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(V,y,Q,z,t);else{let Z;E&&(Z=this.pluralResolver.getSuffix(Q,t.count,t));const ee=`${this.options.pluralSeparator}zero`,X=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(E&&(t.ordinal&&Z.indexOf(X)===0&&V.push(y+Z.replace(X,this.options.pluralSeparator)),V.push(y+Z),I&&V.push(y+ee)),P){const W=`${y}${this.options.contextSeparator||"_"}${t.context}`;V.push(W),E&&(t.ordinal&&Z.indexOf(X)===0&&V.push(W+Z.replace(X,this.options.pluralSeparator)),V.push(W+Z),I&&V.push(W+ee))}}let $;for(;$=V.pop();)this.isValidLookup(i)||(o=$,i=this.getResource(Q,z,$,t))}))})}),{res:i,usedKey:r,exactUsedKey:o,usedLng:s,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,i,r={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,i,r):this.resourceStore.getResource(e,t,i,r)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&!Cr(e.replace);let r=i?e.replace:e;if(i&&typeof e.count<"u"&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!i){r={...r};for(const o of t)delete r[o]}return r}static hasDefaultValue(e){const t="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t===i.substring(0,t.length)&&e[i]!==void 0)return!0;return!1}}class AF{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Zg.create("languageUtils")}getScriptPartFromCode(e){if(e=w4(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=w4(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Cr(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(i=>{if(t)return;const r=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(r))&&(t=r)}),!t&&this.options.supportedLngs&&e.forEach(i=>{if(t)return;const r=this.getScriptPartFromCode(i);if(this.isSupportedCode(r))return t=r;const o=this.getLanguagePartFromCode(i);if(this.isSupportedCode(o))return t=o;t=this.options.supportedLngs.find(s=>{if(s===o)return s;if(!(s.indexOf("-")<0&&o.indexOf("-")<0)&&(s.indexOf("-")>0&&o.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===o||s.indexOf(o)===0&&o.length>1))return s})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Cr(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let i=e[t];return i||(i=e[this.getScriptPartFromCode(t)]),i||(i=e[this.formatLanguageCode(t)]),i||(i=e[this.getLanguagePartFromCode(t)]),i||(i=e.default),i||[]}toResolveHierarchy(e,t){const i=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),r=[],o=s=>{s&&(this.isSupportedCode(s)?r.push(s):this.logger.warn(`rejecting language code not found in supportedLngs: ${s}`))};return Cr(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):Cr(e)&&o(this.formatLanguageCode(e)),i.forEach(s=>{r.indexOf(s)<0&&o(this.formatLanguageCode(s))}),r}}const hF={zero:0,one:1,two:2,few:3,many:4,other:5},dF={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Dae{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Zg.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const i=w4(e==="dev"?"en":e),r=t.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:i,type:r});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let s;try{s=new Intl.PluralRules(i,{type:r})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),dF;if(!e.match(/-|_/))return dF;const c=this.languageUtils.getLanguagePartFromCode(e);s=this.getRule(c,t)}return this.pluralRulesCache[o]=s,s}needsPlural(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,i={}){return this.getSuffixes(e,i).map(r=>`${t}${r}`)}getSuffixes(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?i.resolvedOptions().pluralCategories.sort((r,o)=>hF[r]-hF[o]).map(r=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${r}`):[]}getSuffix(e,t,i={}){const r=this.getRule(e,i);return r?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,i))}}const fF=(n,e,t,i=".",r=!0)=>{let o=Mae(n,e,t);return!o&&r&&Cr(t)&&(o=l9(n,t,i),o===void 0&&(o=l9(e,t,i))),o},oO=n=>n.replace(/\$/g,"$$$$");class Rae{constructor(e={}){this.logger=Zg.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:i,useRawValueToEscape:r,prefix:o,prefixEscaped:s,suffix:a,suffixEscaped:c,formatSeparator:f,unescapeSuffix:y,unescapePrefix:_,nestingPrefix:E,nestingPrefixEscaped:I,nestingSuffix:P,nestingSuffixEscaped:K,nestingOptionsSeparator:z,maxReplaces:Q,alwaysFormat:V}=e.interpolation;this.escape=t!==void 0?t:Sae,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=o?E_(o):s||"{{",this.suffix=a?E_(a):c||"}}",this.formatSeparator=f||",",this.unescapePrefix=y?"":_||"-",this.unescapeSuffix=this.unescapePrefix?"":y||"",this.nestingPrefix=E?E_(E):I||E_("$t("),this.nestingSuffix=P?E_(P):K||E_(")"),this.nestingOptionsSeparator=z||",",this.maxReplaces=Q||1e3,this.alwaysFormat=V!==void 0?V:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,i)=>t?.source===i?(t.lastIndex=0,t):new RegExp(i,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,i,r){let o,s,a;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},f=I=>{if(I.indexOf(this.formatSeparator)<0){const Q=fF(t,c,I,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(Q,void 0,i,{...r,...t,interpolationkey:I}):Q}const P=I.split(this.formatSeparator),K=P.shift().trim(),z=P.join(this.formatSeparator).trim();return this.format(fF(t,c,K,this.options.keySeparator,this.options.ignoreJSONStructure),z,i,{...r,...t,interpolationkey:K})};this.resetRegExp();const y=r?.missingInterpolationHandler||this.options.missingInterpolationHandler,_=r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:I=>oO(I)},{regex:this.regexp,safeValue:I=>this.escapeValue?oO(this.escape(I)):oO(I)}].forEach(I=>{for(a=0;o=I.regex.exec(e);){const P=o[1].trim();if(s=f(P),s===void 0)if(typeof y=="function"){const z=y(e,o,r);s=Cr(z)?z:""}else if(r&&Object.prototype.hasOwnProperty.call(r,P))s="";else if(_){s=o[0];continue}else this.logger.warn(`missed to pass in variable ${P} for interpolating ${e}`),s="";else!Cr(s)&&!this.useRawValueToEscape&&(s=oF(s));const K=I.safeValue(s);if(e=e.replace(o[0],K),_?(I.regex.lastIndex+=s.length,I.regex.lastIndex-=o[0].length):I.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,t,i={}){let r,o,s;const a=(c,f)=>{const y=this.nestingOptionsSeparator;if(c.indexOf(y)<0)return c;const _=c.split(new RegExp(`${y}[ ]*{`));let E=`{${_[1]}`;c=_[0],E=this.interpolate(E,s);const I=E.match(/'/g),P=E.match(/"/g);((I?.length??0)%2===0&&!P||P.length%2!==0)&&(E=E.replace(/'/g,'"'));try{s=JSON.parse(E),f&&(s={...f,...s})}catch(K){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,K),`${c}${y}${E}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,c};for(;r=this.nestingRegexp.exec(e);){let c=[];s={...i},s=s.replace&&!Cr(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;const f=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(f!==-1&&(c=r[1].slice(f).split(this.formatSeparator).map(y=>y.trim()).filter(Boolean),r[1]=r[1].slice(0,f)),o=t(a.call(this,r[1].trim(),s),s),o&&r[0]===e&&!Cr(o))return o;Cr(o)||(o=oF(o)),o||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),o=""),c.length&&(o=c.reduce((y,_)=>this.format(y,_,i.lng,{...i,interpolationkey:r[1].trim()}),o.trim())),e=e.replace(r[0],o),this.regexp.lastIndex=0}return e}}const Pae=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const i=n.split("(");e=i[0].toLowerCase().trim();const r=i[1].substring(0,i[1].length-1);e==="currency"&&r.indexOf(":")<0?t.currency||(t.currency=r.trim()):e==="relativetime"&&r.indexOf(":")<0?t.range||(t.range=r.trim()):r.split(";").forEach(s=>{if(s){const[a,...c]=s.split(":"),f=c.join(":").trim().replace(/^'+|'+$/g,""),y=a.trim();t[y]||(t[y]=f),f==="false"&&(t[y]=!1),f==="true"&&(t[y]=!0),isNaN(f)||(t[y]=parseInt(f,10))}})}return{formatName:e,formatOptions:t}},pF=n=>{const e={};return(t,i,r)=>{let o=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(o={...o,[r.interpolationkey]:void 0});const s=i+JSON.stringify(o);let a=e[s];return a||(a=n(w4(i),r),e[s]=a),a(t)}},Lae=n=>(e,t,i)=>n(w4(t),i)(e);class Uae{constructor(e={}){this.logger=Zg.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const i=t.cacheInBuiltFormats?pF:Lae;this.formats={number:i((r,o)=>{const s=new Intl.NumberFormat(r,{...o});return a=>s.format(a)}),currency:i((r,o)=>{const s=new Intl.NumberFormat(r,{...o,style:"currency"});return a=>s.format(a)}),datetime:i((r,o)=>{const s=new Intl.DateTimeFormat(r,{...o});return a=>s.format(a)}),relativetime:i((r,o)=>{const s=new Intl.RelativeTimeFormat(r,{...o});return a=>s.format(a,o.range||"day")}),list:i((r,o)=>{const s=new Intl.ListFormat(r,{...o});return a=>s.format(a)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=pF(t)}format(e,t,i,r={}){const o=t.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(a=>a.indexOf(")")>-1)){const a=o.findIndex(c=>c.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,a)].join(this.formatSeparator)}return o.reduce((a,c)=>{const{formatName:f,formatOptions:y}=Pae(c);if(this.formats[f]){let _=a;try{const E=r?.formatParams?.[r.interpolationkey]||{},I=E.locale||E.lng||r.locale||r.lng||i;_=this.formats[f](a,I,{...y,...r,...E})}catch(E){this.logger.warn(E)}return _}else this.logger.warn(`there was no format function for ${f}`);return a},e)}}const Kae=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class Fae extends r6{constructor(e,t,i,r={}){super(),this.backend=e,this.store=t,this.services=i,this.languageUtils=i.languageUtils,this.options=r,this.logger=Zg.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(i,r.backend,r)}queueLoad(e,t,i,r){const o={},s={},a={},c={};return e.forEach(f=>{let y=!0;t.forEach(_=>{const E=`${f}|${_}`;!i.reload&&this.store.hasResourceBundle(f,_)?this.state[E]=2:this.state[E]<0||(this.state[E]===1?s[E]===void 0&&(s[E]=!0):(this.state[E]=1,y=!1,s[E]===void 0&&(s[E]=!0),o[E]===void 0&&(o[E]=!0),c[_]===void 0&&(c[_]=!0)))}),y||(a[f]=!0)}),(Object.keys(o).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(o),pending:Object.keys(s),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(c)}}loaded(e,t,i){const r=e.split("|"),o=r[0],s=r[1];t&&this.emit("failedLoading",o,s,t),!t&&i&&this.store.addResourceBundle(o,s,i,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&i&&(this.state[e]=0);const a={};this.queue.forEach(c=>{xae(c.loaded,[o],s),Kae(c,e),t&&c.errors.push(t),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(f=>{a[f]||(a[f]={});const y=c.loaded[f];y.length&&y.forEach(_=>{a[f][_]===void 0&&(a[f][_]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(c=>!c.done)}read(e,t,i,r=0,o=this.retryTimeout,s){if(!e.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:i,tried:r,wait:o,callback:s});return}this.readingCalls++;const a=(f,y)=>{if(this.readingCalls--,this.waitingReads.length>0){const _=this.waitingReads.shift();this.read(_.lng,_.ns,_.fcName,_.tried,_.wait,_.callback)}if(f&&y&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,i,r+1,o*2,s)},o);return}s(f,y)},c=this.backend[i].bind(this.backend);if(c.length===2){try{const f=c(e,t);f&&typeof f.then=="function"?f.then(y=>a(null,y)).catch(a):a(null,f)}catch(f){a(f)}return}return c(e,t,a)}prepareLoading(e,t,i={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();Cr(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Cr(t)&&(t=[t]);const o=this.queueLoad(e,t,i,r);if(!o.toLoad.length)return o.pending.length||r(),null;o.toLoad.forEach(s=>{this.loadOne(s)})}load(e,t,i){this.prepareLoading(e,t,{},i)}reload(e,t,i){this.prepareLoading(e,t,{reload:!0},i)}loadOne(e,t=""){const i=e.split("|"),r=i[0],o=i[1];this.read(r,o,"read",void 0,void 0,(s,a)=>{s&&this.logger.warn(`${t}loading namespace ${o} for language ${r} failed`,s),!s&&a&&this.logger.log(`${t}loaded namespace ${o} for language ${r}`,a),this.loaded(e,s,a)})}saveMissing(e,t,i,r,o,s={},a=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${i}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend?.create){const c={...s,isUpdate:o},f=this.backend.create.bind(this.backend);if(f.length<6)try{let y;f.length===5?y=f(e,t,i,r,c):y=f(e,t,i,r),y&&typeof y.then=="function"?y.then(_=>a(null,_)).catch(a):a(null,y)}catch(y){a(y)}else f(e,t,i,r,a,c)}!e||!e[0]||this.store.addResource(e[0],t,i,r)}}}const mF=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),Cr(n[1])&&(e.defaultValue=n[1]),Cr(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(i=>{e[i]=t[i]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),gF=n=>(Cr(n.ns)&&(n.ns=[n.ns]),Cr(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),Cr(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),I5=()=>{},zae=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class H3 extends r6{constructor(e={},t){if(super(),this.options=gF(e),this.services={},this.logger=Zg,this.modules={external:[]},zae(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(Cr(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const i=mF();this.options={...i,...this.options,...gF(e)},this.options.interpolation={...i.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const r=f=>f?typeof f=="function"?new f:f:null;if(!this.options.isClone){this.modules.logger?Zg.init(r(this.modules.logger),this.options):Zg.init(null,this.options);let f;this.modules.formatter?f=this.modules.formatter:f=Uae;const y=new AF(this.options);this.store=new uF(this.options.resources,this.options);const _=this.services;_.logger=Zg,_.resourceStore=this.store,_.languageUtils=y,_.pluralResolver=new Dae(y,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),f&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(_.formatter=r(f),_.formatter.init&&_.formatter.init(_,this.options),this.options.interpolation.format=_.formatter.format.bind(_.formatter)),_.interpolator=new Rae(this.options),_.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},_.backendConnector=new Fae(r(this.modules.backend),_.resourceStore,_,this.options),_.backendConnector.on("*",(I,...P)=>{this.emit(I,...P)}),this.modules.languageDetector&&(_.languageDetector=r(this.modules.languageDetector),_.languageDetector.init&&_.languageDetector.init(_,this.options.detection,this.options)),this.modules.i18nFormat&&(_.i18nFormat=r(this.modules.i18nFormat),_.i18nFormat.init&&_.i18nFormat.init(this)),this.translator=new PS(this.services,this.options),this.translator.on("*",(I,...P)=>{this.emit(I,...P)}),this.modules.external.forEach(I=>{I.init&&I.init(this)})}if(this.format=this.options.interpolation.format,t||(t=I5),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.length>0&&f[0]!=="dev"&&(this.options.lng=f[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(f=>{this[f]=(...y)=>this.store[f](...y)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(f=>{this[f]=(...y)=>(this.store[f](...y),this)});const a=t3(),c=()=>{const f=(y,_)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(_),t(y,_)};if(this.languages&&!this.isInitialized)return f(null,this.t.bind(this));this.changeLanguage(this.options.lng,f)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),a}loadResources(e,t=I5){let i=t;const r=Cr(e)?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(r?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const o=[],s=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(f=>{f!=="cimode"&&o.indexOf(f)<0&&o.push(f)})};r?s(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>s(c)),this.options.preload?.forEach?.(a=>s(a)),this.services.backendConnector.load(o,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(a)})}else i(null)}reloadResources(e,t,i){const r=t3();return typeof e=="function"&&(i=e,e=void 0),typeof t=="function"&&(i=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),i||(i=I5),this.services.backendConnector.reload(e,t,o=>{r.resolve(),i(o)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&wH.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const i=this.languages[t];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const i=t3();this.emit("languageChanging",e);const r=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},o=(a,c)=>{c?this.isLanguageChangingTo===e&&(r(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,i.resolve((...f)=>this.t(...f)),t&&t(a,(...f)=>this.t(...f))},s=a=>{!e&&!a&&this.services.languageDetector&&(a=[]);const c=Cr(a)?a:a&&a[0],f=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(Cr(a)?[a]:a);f&&(this.language||r(f),this.translator.language||this.translator.changeLanguage(f),this.services.languageDetector?.cacheUserLanguage?.(f)),this.loadResources(f,y=>{o(y,f)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e),i}getFixedT(e,t,i){const r=(o,s,...a)=>{let c;typeof s!="object"?c=this.options.overloadTranslationOptionHandler([o,s].concat(a)):c={...s},c.lng=c.lng||r.lng,c.lngs=c.lngs||r.lngs,c.ns=c.ns||r.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||i||r.keyPrefix);const f=this.options.keySeparator||".";let y;return c.keyPrefix&&Array.isArray(o)?y=o.map(_=>(typeof _=="function"&&(_=RS(_,{...this.options,...s})),`${c.keyPrefix}${f}${_}`)):(typeof o=="function"&&(o=RS(o,{...this.options,...s})),y=c.keyPrefix?`${c.keyPrefix}${f}${o}`:o),this.t(y,c)};return Cr(e)?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=i,r}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=t.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const s=(a,c)=>{const f=this.services.backendConnector.state[`${a}|${c}`];return f===-1||f===0||f===2};if(t.precheck){const a=t.precheck(this,s);if(a!==void 0)return a}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(i,e)&&(!r||s(o,e)))}loadNamespaces(e,t){const i=t3();return this.options.ns?(Cr(e)&&(e=[e]),e.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{i.resolve(),t&&t(r)}),i):(t&&t(),Promise.resolve())}loadLanguages(e,t){const i=t3();Cr(e)&&(e=[e]);const r=this.options.preload||[],o=e.filter(s=>r.indexOf(s)<0&&this.services.languageUtils.isSupportedCode(s));return o.length?(this.options.preload=r.concat(o),this.loadResources(s=>{i.resolve(),t&&t(s)}),i):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const r=new Intl.Locale(e);if(r&&r.getTextInfo){const o=r.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services?.languageUtils||new AF(mF());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){const i=new H3(e,t);return i.createInstance=H3.createInstance,i}cloneInstance(e={},t=I5){const i=e.forkResourceStore;i&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},o=new H3(r);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(a=>{o[a]=this[a]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},i){const a=Object.keys(this.store.data).reduce((c,f)=>(c[f]={...this.store.data[f]},c[f]=Object.keys(c[f]).reduce((y,_)=>(y[_]={...c[f][_]},y),c[f]),c),{});o.store=new uF(a,r),o.services.resourceStore=o.store}return o.translator=new PS(o.services,r),o.translator.on("*",(a,...c)=>{o.emit(a,...c)}),o.init(r,t),o.translator.options=r,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const WA=H3.createInstance();WA.createInstance;WA.dir;WA.init;WA.loadResources;WA.reloadResources;WA.use;WA.changeLanguage;WA.getFixedT;WA.t;WA.exists;WA.setDefaultNamespace;WA.hasLoadedNamespace;WA.loadNamespaces;WA.loadLanguages;const{slice:jae,forEach:Nae}=[];function Gae(n){return Nae.call(jae.call(arguments,1),e=>{if(e)for(const t in e)n[t]===void 0&&(n[t]=e[t])}),n}function Wae(n){return typeof n!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(n))}const yF=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Qae=function(n,e){const i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},r=encodeURIComponent(e);let o=`${n}=${r}`;if(i.maxAge>0){const s=i.maxAge-0;if(Number.isNaN(s))throw new Error("maxAge should be a Number");o+=`; Max-Age=${Math.floor(s)}`}if(i.domain){if(!yF.test(i.domain))throw new TypeError("option domain is invalid");o+=`; Domain=${i.domain}`}if(i.path){if(!yF.test(i.path))throw new TypeError("option path is invalid");o+=`; Path=${i.path}`}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+=`; Expires=${i.expires.toUTCString()}`}if(i.httpOnly&&(o+="; HttpOnly"),i.secure&&(o+="; Secure"),i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return i.partitioned&&(o+="; Partitioned"),o},vF={create(n,e,t,i){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+t*60*1e3)),i&&(r.domain=i),document.cookie=Qae(n,e,r)},read(n){const e=`${n}=`,t=document.cookie.split(";");for(let i=0;i<t.length;i++){let r=t[i];for(;r.charAt(0)===" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return r.substring(e.length,r.length)}return null},remove(n,e){this.create(n,"",-1,e)}};var qae={name:"cookie",lookup(n){let{lookupCookie:e}=n;if(e&&typeof document<"u")return vF.read(e)||void 0},cacheUserLanguage(n,e){let{lookupCookie:t,cookieMinutes:i,cookieDomain:r,cookieOptions:o}=e;t&&typeof document<"u"&&vF.create(t,n,i,r,o)}},Yae={name:"querystring",lookup(n){let{lookupQuerystring:e}=n,t;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const o=i.substring(1).split("&");for(let s=0;s<o.length;s++){const a=o[s].indexOf("=");a>0&&o[s].substring(0,a)===e&&(t=o[s].substring(a+1))}}return t}},Vae={name:"hash",lookup(n){let{lookupHash:e,lookupFromHashIndex:t}=n,i;if(typeof window<"u"){const{hash:r}=window.location;if(r&&r.length>2){const o=r.substring(1);if(e){const s=o.split("&");for(let a=0;a<s.length;a++){const c=s[a].indexOf("=");c>0&&s[a].substring(0,c)===e&&(i=s[a].substring(c+1))}}if(i)return i;if(!i&&t>-1){const s=r.match(/\/([a-zA-Z-]*)/g);return Array.isArray(s)?s[typeof t=="number"?t:0]?.replace("/",""):void 0}}}return i}};let B_=null;const bF=()=>{if(B_!==null)return B_;try{if(B_=typeof window<"u"&&window.localStorage!==null,!B_)return!1;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{B_=!1}return B_};var $ae={name:"localStorage",lookup(n){let{lookupLocalStorage:e}=n;if(e&&bF())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupLocalStorage:t}=e;t&&bF()&&window.localStorage.setItem(t,n)}};let O_=null;const CF=()=>{if(O_!==null)return O_;try{if(O_=typeof window<"u"&&window.sessionStorage!==null,!O_)return!1;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{O_=!1}return O_};var Hae={name:"sessionStorage",lookup(n){let{lookupSessionStorage:e}=n;if(e&&CF())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupSessionStorage:t}=e;t&&CF()&&window.sessionStorage.setItem(t,n)}},Zae={name:"navigator",lookup(n){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:i,language:r}=navigator;if(t)for(let o=0;o<t.length;o++)e.push(t[o]);i&&e.push(i),r&&e.push(r)}return e.length>0?e:void 0}},Xae={name:"htmlTag",lookup(n){let{htmlTag:e}=n,t;const i=e||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(t=i.getAttribute("lang")),t}},Jae={name:"path",lookup(n){let{lookupFromPathIndex:e}=n;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?t[typeof e=="number"?e:0]?.replace("/",""):void 0}},ele={name:"subdomain",lookup(n){let{lookupFromSubdomainIndex:e}=n;const t=typeof e=="number"?e+1:1,i=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(i)return i[t]}};let EH=!1;try{document.cookie,EH=!0}catch{}const BH=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];EH||BH.splice(1,1);const tle=()=>({order:BH,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class OH{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=Gae(t,this.options||{},tle()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=r=>r.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(qae),this.addDetector(Yae),this.addDetector($ae),this.addDetector(Hae),this.addDetector(Zae),this.addDetector(Xae),this.addDetector(Jae),this.addDetector(ele),this.addDetector(Vae)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(i=>{if(this.detectors[i]){let r=this.detectors[i].lookup(this.options);r&&typeof r=="string"&&(r=[r]),r&&(t=t.concat(r))}}),t=t.filter(i=>i!=null&&!Wae(i)).map(i=>this.options.convertDetectedLanguage(i)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(i=>{this.detectors[i]&&this.detectors[i].cacheUserLanguage(e,this.options)}))}}OH.type="languageDetector";var nle=function(e){return{type:"backend",init:function(i,r,o){},read:function(i,r,o){if(typeof e=="function"){if(e.length<3){try{var s=e(i,r);s&&typeof s.then=="function"?s.then(function(a){return o(null,a&&a.default||a)}).catch(o):o(null,s)}catch(a){o(a)}return}e(i,r,o);return}o(null,e&&e[i]&&e[i][r])}}},sO,_F;function ile(){return _F||(_F=1,sO={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),sO}var rle=ile();const ole=Zl(rle);var sle=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function xF(n){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=n.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(e.name=t[1],(ole[t[1]]||n.charAt(n.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var i=n.indexOf("-->");return{type:"comment",comment:i!==-1?n.slice(4,i):""}}for(var r=new RegExp(sle),o=null;(o=r.exec(n))!==null;)if(o[0].trim())if(o[1]){var s=o[1].trim(),a=[s,""];s.indexOf("=")>-1&&(a=s.split("=")),e.attrs[a[0]]=a[1],r.lastIndex--}else o[2]&&(e.attrs[o[2]]=o[3].trim().substring(1,o[3].length-1));return e}var ale=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,lle=/^\s*$/,ule=Object.create(null);function IH(n,e){switch(e.type){case"text":return n+e.content;case"tag":return n+="<"+e.name+(e.attrs?(function(t){var i=[];for(var r in t)i.push(r+'="'+t[r]+'"');return i.length?" "+i.join(" "):""})(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?n:n+e.children.reduce(IH,"")+"</"+e.name+">";case"comment":return n+"<!--"+e.comment+"-->"}}var cle={parse:function(n,e){e||(e={}),e.components||(e.components=ule);var t,i=[],r=[],o=-1,s=!1;if(n.indexOf("<")!==0){var a=n.indexOf("<");i.push({type:"text",content:a===-1?n:n.substring(0,a)})}return n.replace(ale,function(c,f){if(s){if(c!=="</"+t.name+">")return;s=!1}var y,_=c.charAt(1)!=="/",E=c.startsWith("<!--"),I=f+c.length,P=n.charAt(I);if(E){var K=xF(c);return o<0?(i.push(K),i):((y=r[o]).children.push(K),i)}if(_&&(o++,(t=xF(c)).type==="tag"&&e.components[t.name]&&(t.type="component",s=!0),t.voidElement||s||!P||P==="<"||t.children.push({type:"text",content:n.slice(I,n.indexOf("<",I))}),o===0&&i.push(t),(y=r[o-1])&&y.children.push(t),r[o]=t),(!_||t.voidElement)&&(o>-1&&(t.voidElement||t.name===c.slice(2,-1))&&(o--,t=o===-1?i:r[o]),!s&&P!=="<"&&P)){y=o===-1?i:r[o].children;var z=n.indexOf("<",I),Q=n.slice(I,z===-1?void 0:z);lle.test(Q)&&(Q=" "),(z>-1&&o+y.length>=0||Q!==" ")&&y.push({type:"text",content:Q})}}),i},stringify:function(n){return n.reduce(function(e,t){return e+IH("",t)},"")}};const $w=(n,e,t,i)=>{const r=[t,{code:e,...i||{}}];if(n?.services?.logger?.forward)return n.services.logger.forward(r,"warn","react-i18next::",!0);yf(r[0])&&(r[0]=`react-i18next:: ${r[0]}`),n?.services?.logger?.warn?n.services.logger.warn(...r):console?.warn&&console.warn(...r)},MF={},o6=(n,e,t,i)=>{yf(t)&&MF[t]||(yf(t)&&(MF[t]=new Date),$w(n,e,t,i))},TH=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},u9=(n,e,t)=>{n.loadNamespaces(e,TH(n,t))},wF=(n,e,t,i)=>{if(yf(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return u9(n,t,i);t.forEach(r=>{n.options.ns.indexOf(r)<0&&n.options.ns.push(r)}),n.loadLanguages(e,TH(n,i))},Ale=(n,e,t={})=>!e.languages||!e.languages.length?(o6(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(i,r)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!r(i.isLanguageChangingTo,n))return!1}}),hle=n=>n.displayName||n.name||(yf(n)&&n.length>0?n:"Unknown"),yf=n=>typeof n=="string",iv=n=>typeof n=="object"&&n!==null,dle=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,fle={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},ple=n=>fle[n],mle=n=>n.replace(dle,ple);let c9={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:mle};const gle=(n={})=>{c9={...c9,...n}},kH=()=>c9;let DH;const yle=n=>{DH=n},eP=()=>DH,aO=(n,e)=>{if(!n)return!1;const t=n.props?.children??n.children;return e?t.length>0:!!t},lO=n=>{if(!n)return[];const e=n.props?.children??n.children;return n.props?.i18nIsDynamicList?yx(e):e},vle=n=>Array.isArray(n)&&n.every(yt.isValidElement),yx=n=>Array.isArray(n)?n:[n],ble=(n,e)=>{const t={...e};return t.props=Object.assign(n.props,e.props),t},RH=(n,e,t,i)=>{if(!n)return"";let r="";const o=yx(n),s=e?.transSupportBasicHtmlNodes?e.transKeepBasicHtmlNodesFor??[]:[];return o.forEach((a,c)=>{if(yf(a)){r+=`${a}`;return}if(yt.isValidElement(a)){const{props:f,type:y}=a,_=Object.keys(f).length,E=s.indexOf(y)>-1,I=f.children;if(!I&&E&&!_){r+=`<${y}/>`;return}if(!I&&(!E||_)||f.i18nIsDynamicList){r+=`<${c}></${c}>`;return}if(E&&_===1&&yf(I)){r+=`<${y}>${I}</${y}>`;return}const P=RH(I,e,t,i);r+=`<${c}>${P}</${c}>`;return}if(a===null){$w(t,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:i});return}if(iv(a)){const{format:f,...y}=a,_=Object.keys(y);if(_.length===1){const E=f?`${_[0]}, ${f}`:_[0];r+=`{{${E}}}`;return}$w(t,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:i,child:a});return}$w(t,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:i,child:a})}),r},Cle=(n,e=[],t={})=>{if(!n)return n;const i=Object.keys(t),r=[...e,...i];let o="",s=0;for(;s<n.length;)if(n[s]==="<"){let a=!1;const c=n.slice(s).match(/^<\/(\d+|[a-zA-Z][a-zA-Z0-9-]*)>/);if(c){const f=c[1];(/^\d+$/.test(f)||r.includes(f))&&(a=!0,o+=c[0],s+=c[0].length)}if(!a){const f=n.slice(s).match(/^<(\d+|[a-zA-Z][a-zA-Z0-9-]*)(\s+[\w-]+(?:=(?:"[^"]*"|'[^']*'|[^\s>]+))?)*\s*(\/)?>/);if(f){const y=f[1];(/^\d+$/.test(y)||r.includes(y))&&(a=!0,o+=f[0],s+=f[0].length)}}a||(o+="&lt;",s+=1)}else o+=n[s],s+=1;return o},_le=(n,e,t,i,r,o,s)=>{if(t==="")return[];const a=r.transKeepBasicHtmlNodesFor||[],c=t&&new RegExp(a.map(V=>`<${V}`).join("|")).test(t);if(!n&&!e&&!c&&!s)return[t];const f=e??{},y=V=>{yx(V).forEach(Z=>{yf(Z)||(aO(Z)?y(lO(Z)):iv(Z)&&!yt.isValidElement(Z)&&Object.assign(f,Z))})};y(n);const _=Cle(t,a,f),E=cle.parse(`<0>${_}</0>`),I={...f,...o},P=(V,$,Z)=>{const ee=lO(V),X=z(ee,$.children,Z);return vle(ee)&&X.length===0||V.props?.i18nIsDynamicList?ee:X},K=(V,$,Z,ee,X)=>{V.dummy?(V.children=$,Z.push(yt.cloneElement(V,{key:ee},X?void 0:$))):Z.push(...yt.Children.map([V],W=>{const se={...W.props};return delete se.i18nIsDynamicList,yt.createElement(W.type,{...se,key:ee,ref:W.props.ref??W.ref},X?null:$)}))},z=(V,$,Z)=>{const ee=yx(V);return yx($).reduce((W,se,ue)=>{const ve=se.children?.[0]?.content&&i.services.interpolator.interpolate(se.children[0].content,I,i.language);if(se.type==="tag"){let ye=ee[parseInt(se.name,10)];!ye&&e&&(ye=e[se.name]),Z.length===1&&!ye&&(ye=Z[0][se.name]),ye||(ye={});const Ee=Object.keys(se.attrs).length!==0?ble({props:se.attrs},ye):ye,_e=yt.isValidElement(Ee),Be=_e&&aO(se,!0)&&!se.voidElement,Fe=c&&iv(Ee)&&Ee.dummy&&!_e,Se=iv(e)&&Object.hasOwnProperty.call(e,se.name);if(yf(Ee)){const qe=i.services.interpolator.interpolate(Ee,I,i.language);W.push(qe)}else if(aO(Ee)||Be){const qe=P(Ee,se,Z);K(Ee,qe,W,ue)}else if(Fe){const qe=z(ee,se.children,Z);K(Ee,qe,W,ue)}else if(Number.isNaN(parseFloat(se.name)))if(Se){const qe=P(Ee,se,Z);K(Ee,qe,W,ue,se.voidElement)}else if(r.transSupportBasicHtmlNodes&&a.indexOf(se.name)>-1)if(se.voidElement)W.push(yt.createElement(se.name,{key:`${se.name}-${ue}`}));else{const qe=z(ee,se.children,Z);W.push(yt.createElement(se.name,{key:`${se.name}-${ue}`},qe))}else if(se.voidElement)W.push(`<${se.name} />`);else{const qe=z(ee,se.children,Z);W.push(`<${se.name}>${qe}</${se.name}>`)}else if(iv(Ee)&&!_e){const qe=se.children[0]?ve:null;qe&&W.push(qe)}else K(Ee,ve,W,ue,se.children.length!==1||!ve)}else if(se.type==="text"){const ye=r.transWrapTextNodes,Ee=s?r.unescape(i.services.interpolator.interpolate(se.content,I,i.language)):i.services.interpolator.interpolate(se.content,I,i.language);ye?W.push(yt.createElement(ye,{key:`${se.name}-${ue}`},Ee)):W.push(Ee)}return W},[])},Q=z([{dummy:!0,children:n||[]}],E,yx(n||[]));return lO(Q[0])},PH=(n,e,t)=>{const i=n.key||e,r=yt.cloneElement(n,{key:i});if(!r.props||!r.props.children||t.indexOf(`${e}/>`)<0&&t.indexOf(`${e} />`)<0)return r;function o(){return yt.createElement(yt.Fragment,null,r)}return yt.createElement(o,{key:i})},xle=(n,e)=>n.map((t,i)=>PH(t,i,e)),Mle=(n,e)=>{const t={};return Object.keys(n).forEach(i=>{Object.assign(t,{[i]:PH(n[i],i,e)})}),t},wle=(n,e,t,i)=>n?Array.isArray(n)?xle(n,e):iv(n)?Mle(n,e):(o6(t,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:i}),null):null,Sle=n=>!iv(n)||Array.isArray(n)?!1:Object.keys(n).reduce((e,t)=>e&&Number.isNaN(Number.parseFloat(t)),!0);function Ele({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:o={},values:s,defaults:a,components:c,ns:f,i18n:y,t:_,shouldUnescape:E,...I}){const P=y||eP();if(!P)return o6(P,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:i}),n;const K=_||P.t.bind(P)||(Be=>Be),z={...kH(),...P.options?.react};let Q=f||K.ns||P.options?.defaultNS;Q=yf(Q)?[Q]:Q||["translation"];const V=RH(n,z,P,i),$=a||o?.defaultValue||V||z.transEmptyNodeValue||(typeof i=="function"?RS(i):i),{hashTransKey:Z}=z,ee=i||(Z?Z(V||$):V||$);P.options?.interpolation?.defaultVariables&&(s=s&&Object.keys(s).length>0?{...s,...P.options.interpolation.defaultVariables}:{...P.options.interpolation.defaultVariables});const X=s||e!==void 0&&!P.options?.interpolation?.alwaysFormat||!n?o.interpolation:{interpolation:{...o.interpolation,prefix:"#$?",suffix:"?$#"}},W={...o,context:r||o.context,count:e,...s,...X,defaultValue:$,ns:Q};let se=ee?K(ee,W):$;se===ee&&$&&(se=$);const ue=wle(c,se,P,i);let ve=ue||n,ye=null;Sle(ue)&&(ye=ue,ve=n);const Ee=_le(ve,ye,se,P,z,W,E),_e=t??z.defaultTransParent;return _e?yt.createElement(_e,I,Ee):Ee}const Ble={type:"3rdParty",init(n){gle(n.options.react),yle(n)}},LH=yt.createContext();class Ole{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function tC({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:o={},values:s,defaults:a,components:c,ns:f,i18n:y,t:_,shouldUnescape:E,...I}){const{i18n:P,defaultNS:K}=yt.useContext(LH)||{},z=y||P||eP(),Q=_||z?.t.bind(z);return Ele({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:o,values:s,defaults:a,components:c,ns:f||Q?.ns||K||z?.options?.defaultNS,i18n:z,t:_,shouldUnescape:E,...I})}var uO={exports:{}},cO={};var SF;function Ile(){if(SF)return cO;SF=1;var n=pa();function e(_,E){return _===E&&(_!==0||1/_===1/E)||_!==_&&E!==E}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,r=n.useEffect,o=n.useLayoutEffect,s=n.useDebugValue;function a(_,E){var I=E(),P=i({inst:{value:I,getSnapshot:E}}),K=P[0].inst,z=P[1];return o(function(){K.value=I,K.getSnapshot=E,c(K)&&z({inst:K})},[_,I,E]),r(function(){return c(K)&&z({inst:K}),_(function(){c(K)&&z({inst:K})})},[_]),s(I),I}function c(_){var E=_.getSnapshot;_=_.value;try{var I=E();return!t(_,I)}catch{return!0}}function f(_,E){return E()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:a;return cO.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:y,cO}var EF;function Tle(){return EF||(EF=1,uO.exports=Ile()),uO.exports}var kle=Tle();const Dle=(n,e)=>yf(e)?e:iv(e)&&yf(e.defaultValue)?e.defaultValue:Array.isArray(n)?n[n.length-1]:n,Rle={t:Dle,ready:!1},Ple=()=>()=>{},Lle=(n,e={})=>{const{i18n:t}=e,{i18n:i,defaultNS:r}=yt.useContext(LH)||{},o=t||i||eP();o&&!o.reportNamespaces&&(o.reportNamespaces=new Ole),o||o6(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const s=yt.useMemo(()=>({...kH(),...o?.options?.react,...e}),[o,e]),{useSuspense:a,keyPrefix:c}=s,f=yt.useMemo(()=>{const W=r||o?.options?.defaultNS;return yf(W)?[W]:W||["translation"]},[n,r,o]);o?.reportNamespaces?.addUsedNamespaces?.(f);const y=yt.useRef(0),_=yt.useCallback(W=>{if(!o)return Ple;const{bindI18n:se,bindI18nStore:ue}=s,ve=()=>{y.current+=1,W()};return se&&o.on(se,ve),ue&&o.store.on(ue,ve),()=>{se&&se.split(" ").forEach(ye=>o.off(ye,ve)),ue&&ue.split(" ").forEach(ye=>o.store.off(ye,ve))}},[o,s]),E=yt.useRef(),I=yt.useCallback(()=>{if(!o)return Rle;const W=!!(o.isInitialized||o.initializedStoreOnce)&&f.every(_e=>Ale(_e,o,s)),se=e.lng||o.language,ue=y.current,ve=E.current;if(ve&&ve.ready===W&&ve.lng===se&&ve.keyPrefix===c&&ve.revision===ue)return ve;const Ee={t:o.getFixedT(se,s.nsMode==="fallback"?f:f[0],c),ready:W,lng:se,keyPrefix:c,revision:ue};return E.current=Ee,Ee},[o,f,c,s,e.lng]),[P,K]=yt.useState(0),{t:z,ready:Q}=kle.useSyncExternalStore(_,I,I);yt.useEffect(()=>{if(o&&!Q&&!a){const W=()=>K(se=>se+1);e.lng?wF(o,e.lng,f,W):u9(o,f,W)}},[o,e.lng,f,Q,a,P]);const V=o||{},$=yt.useRef(null),Z=yt.useRef(),ee=W=>{const se=Object.getOwnPropertyDescriptors(W);se.__original&&delete se.__original;const ue=Object.create(Object.getPrototypeOf(W),se);if(!Object.prototype.hasOwnProperty.call(ue,"__original"))try{Object.defineProperty(ue,"__original",{value:W,writable:!1,enumerable:!1,configurable:!1})}catch{}return ue},X=yt.useMemo(()=>{const W=V,se=W?.language;let ue=W;W&&($.current&&$.current.__original===W?Z.current!==se?(ue=ee(W),$.current=ue,Z.current=se):ue=$.current:(ue=ee(W),$.current=ue,Z.current=se));const ve=[z,ue,Q];return ve.t=z,ve.i18n=ue,ve.ready=Q,ve},[z,V,Q,V.resolvedLanguage,V.language,V.languages]);if(o&&a&&!Q)throw new Promise(W=>{const se=()=>W();e.lng?wF(o,e.lng,f,se):u9(o,f,se)});return X},Mo=(n,e={})=>function(i){function r({forwardedRef:s,...a}){const[c,f,y]=Lle(n,{...a,keyPrefix:e.keyPrefix}),_={...a,t:c,i18n:f,tReady:y};return e.withRef&&s?_.ref=s:!e.withRef&&s&&(_.forwardedRef=s),yt.createElement(i,_)}r.displayName=`withI18nextTranslation(${hle(i)})`,r.WrappedComponent=i;const o=(s,a)=>yt.createElement(r,Object.assign({},s,{forwardedRef:a}));return e.withRef?yt.forwardRef(o):r};function Xs(){var n="/home/runner/work/maputnik/maputnik/src/i18n.ts",e="529ee327821ff95d86675c5d3e41229f0d9cb0df",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/i18n.ts",statementMap:{0:{start:{line:5,column:34},end:{line:13,column:1}},1:{start:{line:14,column:0},end:{line:40,column:3}},2:{start:{line:16,column:4},end:{line:18,column:5}},3:{start:{line:17,column:6},end:{line:17,column:16}},4:{start:{line:19,column:4},end:{line:19,column:593}},5:{start:{line:19,column:119},end:{line:19,column:158}},6:{start:{line:19,column:198},end:{line:19,column:237}},7:{start:{line:19,column:277},end:{line:19,column:316}},8:{start:{line:19,column:356},end:{line:19,column:395}},9:{start:{line:19,column:435},end:{line:19,column:474}},10:{start:{line:19,column:514},end:{line:19,column:553}},11:{start:{line:35,column:4},end:{line:37,column:5}},12:{start:{line:36,column:6},end:{line:36,column:13}},13:{start:{line:38,column:4},end:{line:38,column:77}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:21},end:{line:15,column:22}},loc:{start:{line:15,column:35},end:{line:20,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:19,column:113},end:{line:19,column:114}},loc:{start:{line:19,column:119},end:{line:19,column:158}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:19,column:192},end:{line:19,column:193}},loc:{start:{line:19,column:198},end:{line:19,column:237}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:271},end:{line:19,column:272}},loc:{start:{line:19,column:277},end:{line:19,column:316}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:19,column:350},end:{line:19,column:351}},loc:{start:{line:19,column:356},end:{line:19,column:395}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:19,column:429},end:{line:19,column:430}},loc:{start:{line:19,column:435},end:{line:19,column:474}},line:19},6:{name:"(anonymous_6)",decl:{start:{line:19,column:508},end:{line:19,column:509}},loc:{start:{line:19,column:514},end:{line:19,column:553}},line:19},7:{name:"(anonymous_7)",decl:{start:{line:34,column:21},end:{line:34,column:22}},loc:{start:{line:34,column:41},end:{line:39,column:3}},line:34}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:35,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:37,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/i18n.ts"],names:[],mappings:"AAAA,MAAA,CAAA,oCAAA,CAAA,IAAA,CAAA,CAAA,CAAA,IAAA,CAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,CAAA,CAAA,MAAA,CAAO,IAAA,CAAA,IAAA,CAAU,CAAA,OAAA,CAAA;AACjB,MAAA,CAAO,QAAA,CAAA,IAAA,CAAc,CAAA,OAAA,CAAA,OAAA,CAAA,gBAAA,CAAA;AACrB,MAAA,CAAO,kBAAA,CAAA,IAAA,CAAwB,CAAA,OAAA,CAAA,SAAA,CAAA,EAAA,CAAA,OAAA,CAAA;AAC/B,MAAA,CAAA,CAAA,CAAS,gBAAA,CAAA,CAAA,CAAA,IAAA,CAAwB,CAAA,KAAA,CAAA,OAAA,CAAA;AAE1B,MAAA,CAAA,KAAA,CAAM,kBAAA,CAAA,CAAA,CAAqB;AAAA,CAAA,CAChC,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,IAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,QAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA;AACR,CAAA;AAEA,IAAA,CACG,GAAA,CAAI,QAAQ,CAAA,CACZ,GAAA;AAAA,CAAA,CACC,kBAAA,CAAmB,CAAC,IAAA,CAAA,CAAc,EAAA,CAAA,CAAA,CAAA,CAAA,CAAe;AAC/C,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,SAAS,CAAA,EAAA,CAAA,CAAA,CAAM;AAEjB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,CAAC,CAAA;AAAA,CAAA,CAAA,CAAA,CACV;AACA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,oCAAA,CAAA,CAAA,0fAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,CAA8B;AAAA,CAAA,CACvC,CAAC;AACH,CAAA,CACC,GAAA,CAAI,gBAAgB,CAAA,CACpB,IAAA,CAAK;AAAA,CAAA,CACJ,aAAA,CAAA,CAAe,MAAA,CAAO,IAAA,CAAK,kBAAkB,CAAA;AAAA,CAAA,CAC7C,YAAA,CAAA,CAAc,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,EAAA,CAAA,IAAA,CAAA,QAAA,CAAA;AAAA,CAAA,CACd,WAAA,CAAA,CAAa,KAAA;AAAA,CAAA,CACb,aAAA,CAAA,CAAe;AAAA,CAAA,CAAA,CAAA,CACb,WAAA,CAAA,CAAa;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACf,CAAA;AAAA,CAAA,CACA,WAAA,CAAA,CAAa,IAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,iBAAA,CAAA,EAAA,CAAA;AAAA,CAAA,CACb,WAAA,CAAA,CAAa,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,QAAA,CAAA,EAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,GAAA,CAAA,OAAA,CAAA,QAAA,CAAA,EAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACb,iBAAA,CAAA,CAAmB,CAAC,IAAA,CAAA,CAAM,GAAA,CAAA,CAAK,GAAA,CAAA,CAAA,CAAA,CAAA,CAAQ;AACrC,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,IAAA,CAAK,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAA,EAAA,CAAA,CAAA,CAAM;AAAE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA;AAAA,CAAA,CAAA,CAAA,CAAQ;AAChC,CAAA,CAAA,CAAA,CAAA,OAAA,CAAQ,IAAA,CAAK,4BAA4B,GAAG,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,CAAA,CAAS,KAAK,IAAA,CAAK,CAAA,CAAA,CAAA,CAAI,CAAC,CAAA,CAAA,CAAG,CAAA;AAAA,CAAA,CACzE;AACF,CAAC,CAAA;AAEH,MAAA,CAAA,OAAA,CAAe,IAAA;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"529ee327821ff95d86675c5d3e41229f0d9cb0df"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Xs=function(){return s},s}Xs();const UH=(Xs().s[0]++,{de:"Deutsch",en:"English",fr:"Franais",he:"",it:"Italiano",ja:"",zh:""});Xs().s[1]++;WA.use(OH).use(nle((n,e)=>(Xs().f[0]++,Xs().s[2]++,n==="en"?(Xs().b[0][0]++,Xs().s[3]++,{}):(Xs().b[0][1]++,Xs().s[4]++,bae(Object.assign({"./locales/de/translation.json":()=>(Xs().f[1]++,Xs().s[5]++,S_(()=>import("./translation-CQD4fuPu.js"),[])),"./locales/fr/translation.json":()=>(Xs().f[2]++,Xs().s[6]++,S_(()=>import("./translation-XoriI0W-.js"),[])),"./locales/he/translation.json":()=>(Xs().f[3]++,Xs().s[7]++,S_(()=>import("./translation-aD1CAGoy.js"),[])),"./locales/it/translation.json":()=>(Xs().f[4]++,Xs().s[8]++,S_(()=>import("./translation-CZ64AJ8H.js"),[])),"./locales/ja/translation.json":()=>(Xs().f[5]++,Xs().s[9]++,S_(()=>import("./translation-BhJ-ufwk.js"),[])),"./locales/zh/translation.json":()=>(Xs().f[6]++,Xs().s[10]++,S_(()=>import("./translation-BrzYPxJn.js"),[]))}),`./locales/${n}/${e}.json`,4))))).use(Ble).init({supportedLngs:Object.keys(UH),keySeparator:!1,nsSeparator:!1,interpolation:{escapeValue:!1},saveMissing:!0,fallbackLng:!1,missingKeyHandler:(n,e,t)=>{if(Xs().f[7]++,Xs().s[11]++,n[0]==="en"){Xs().b[1][0]++,Xs().s[12]++;return}else Xs().b[1][1]++;Xs().s[13]++,console.warn(`Missing translation for "${t}" in "${n.join(", ")}"`)}});var M3={exports:{}};M3.exports;var BF;function Ule(){return BF||(BF=1,(function(n,e){var t=200,i="__lodash_hash_undefined__",r=9007199254740991,o="[object Arguments]",s="[object Array]",a="[object Boolean]",c="[object Date]",f="[object Error]",y="[object Function]",_="[object GeneratorFunction]",E="[object Map]",I="[object Number]",P="[object Object]",K="[object Promise]",z="[object RegExp]",Q="[object Set]",V="[object String]",$="[object Symbol]",Z="[object WeakMap]",ee="[object ArrayBuffer]",X="[object DataView]",W="[object Float32Array]",se="[object Float64Array]",ue="[object Int8Array]",ve="[object Int16Array]",ye="[object Int32Array]",Ee="[object Uint8Array]",_e="[object Uint8ClampedArray]",Be="[object Uint16Array]",Fe="[object Uint32Array]",Se=/[\\^$.*+?()[\]{}|]/g,qe=/\w*$/,ut=/^\[object .+?Constructor\]$/,ht=/^(?:0|[1-9]\d*)$/,De={};De[o]=De[s]=De[ee]=De[X]=De[a]=De[c]=De[W]=De[se]=De[ue]=De[ve]=De[ye]=De[E]=De[I]=De[P]=De[z]=De[Q]=De[V]=De[$]=De[Ee]=De[_e]=De[Be]=De[Fe]=!0,De[f]=De[y]=De[Z]=!1;var Ie=typeof window=="object"&&window&&window.Object===Object&&window,ze=typeof self=="object"&&self&&self.Object===Object&&self,Te=Ie||ze||Function("return this")(),vt=e&&!e.nodeType&&e,st=vt&&!0&&n&&!n.nodeType&&n,Et=st&&st.exports===vt;function Pt(J,ge){return J.set(ge[0],ge[1]),J}function ke(J,ge){return J.add(ge),J}function Oe(J,ge){for(var Ge=-1,bt=J?J.length:0;++Ge<bt&&ge(J[Ge],Ge,J)!==!1;);return J}function we(J,ge){for(var Ge=-1,bt=ge.length,bn=J.length;++Ge<bt;)J[bn+Ge]=ge[Ge];return J}function Ye(J,ge,Ge,bt){for(var bn=-1,Xt=J?J.length:0;++bn<Xt;)Ge=ge(Ge,J[bn],bn,J);return Ge}function ft(J,ge){for(var Ge=-1,bt=Array(J);++Ge<J;)bt[Ge]=ge(Ge);return bt}function dt(J,ge){return J?.[ge]}function gt(J){var ge=!1;if(J!=null&&typeof J.toString!="function")try{ge=!!(J+"")}catch{}return ge}function Lt(J){var ge=-1,Ge=Array(J.size);return J.forEach(function(bt,bn){Ge[++ge]=[bn,bt]}),Ge}function Tt(J,ge){return function(Ge){return J(ge(Ge))}}function Zt(J){var ge=-1,Ge=Array(J.size);return J.forEach(function(bt){Ge[++ge]=bt}),Ge}var Fn=Array.prototype,Ln=Function.prototype,fi=Object.prototype,Rn=Te["__core-js_shared__"],Dn=(function(){var J=/[^.]+$/.exec(Rn&&Rn.keys&&Rn.keys.IE_PROTO||"");return J?"Symbol(src)_1."+J:""})(),wn=Ln.toString,qn=fi.hasOwnProperty,En=fi.toString,wt=RegExp("^"+wn.call(qn).replace(Se,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),be=Et?Te.Buffer:void 0,re=Te.Symbol,ce=Te.Uint8Array,Pe=Tt(Object.getPrototypeOf,Object),tt=Object.create,xt=fi.propertyIsEnumerable,It=Fn.splice,_n=Object.getOwnPropertySymbols,Xe=be?be.isBuffer:void 0,ae=Tt(Object.keys,Object),he=ws(Te,"DataView"),C=ws(Te,"Map"),Ke=ws(Te,"Promise"),$e=ws(Te,"Set"),rt=ws(Te,"WeakMap"),Re=ws(Object,"create"),at=Vr(he),St=Vr(C),Bt=Vr(Ke),kt=Vr($e),sn=Vr(rt),Tn=re?re.prototype:void 0,Yn=Tn?Tn.valueOf:void 0;function vi(J){var ge=-1,Ge=J?J.length:0;for(this.clear();++ge<Ge;){var bt=J[ge];this.set(bt[0],bt[1])}}function ui(){this.__data__=Re?Re(null):{}}function Zn(J){return this.has(J)&&delete this.__data__[J]}function Mi(J){var ge=this.__data__;if(Re){var Ge=ge[J];return Ge===i?void 0:Ge}return qn.call(ge,J)?ge[J]:void 0}function nn(J){var ge=this.__data__;return Re?ge[J]!==void 0:qn.call(ge,J)}function $i(J,ge){var Ge=this.__data__;return Ge[J]=Re&&ge===void 0?i:ge,this}vi.prototype.clear=ui,vi.prototype.delete=Zn,vi.prototype.get=Mi,vi.prototype.has=nn,vi.prototype.set=$i;function bi(J){var ge=-1,Ge=J?J.length:0;for(this.clear();++ge<Ge;){var bt=J[ge];this.set(bt[0],bt[1])}}function to(){this.__data__=[]}function tr(J){var ge=this.__data__,Ge=us(ge,J);if(Ge<0)return!1;var bt=ge.length-1;return Ge==bt?ge.pop():It.call(ge,Ge,1),!0}function an(J){var ge=this.__data__,Ge=us(ge,J);return Ge<0?void 0:ge[Ge][1]}function Kn(J){return us(this.__data__,J)>-1}function ii(J,ge){var Ge=this.__data__,bt=us(Ge,J);return bt<0?Ge.push([J,ge]):Ge[bt][1]=ge,this}bi.prototype.clear=to,bi.prototype.delete=tr,bi.prototype.get=an,bi.prototype.has=Kn,bi.prototype.set=ii;function nr(J){var ge=-1,Ge=J?J.length:0;for(this.clear();++ge<Ge;){var bt=J[ge];this.set(bt[0],bt[1])}}function Su(){this.__data__={hash:new vi,map:new(C||bi),string:new vi}}function Ms(J){return Rs(this,J).delete(J)}function Si(J){return Rs(this,J).get(J)}function Ba(J){return Rs(this,J).has(J)}function Xl(J,ge){return Rs(this,J).set(J,ge),this}nr.prototype.clear=Su,nr.prototype.delete=Ms,nr.prototype.get=Si,nr.prototype.has=Ba,nr.prototype.set=Xl;function Yr(J){this.__data__=new bi(J)}function ls(){this.__data__=new bi}function $a(J){return this.__data__.delete(J)}function ma(J){return this.__data__.get(J)}function wo(J){return this.__data__.has(J)}function ga(J,ge){var Ge=this.__data__;if(Ge instanceof bi){var bt=Ge.__data__;if(!C||bt.length<t-1)return bt.push([J,ge]),this;Ge=this.__data__=new nr(bt)}return Ge.set(J,ge),this}Yr.prototype.clear=ls,Yr.prototype.delete=$a,Yr.prototype.get=ma,Yr.prototype.has=wo,Yr.prototype.set=ga;function mr(J,ge){var Ge=Lo(J)||io(J)?ft(J.length,String):[],bt=Ge.length,bn=!!bt;for(var Xt in J)qn.call(J,Xt)&&!(bn&&(Xt=="length"||tu(Xt,bt)))&&Ge.push(Xt);return Ge}function Sl(J,ge,Ge){var bt=J[ge];(!(qn.call(J,ge)&&Eo(bt,Ge))||Ge===void 0&&!(ge in J))&&(J[ge]=Ge)}function us(J,ge){for(var Ge=J.length;Ge--;)if(Eo(J[Ge][0],ge))return Ge;return-1}function Xo(J,ge){return J&&Il(ge,Rr(ge),J)}function no(J,ge,Ge,bt,bn,Xt,hi){var Pn;if(bt&&(Pn=Xt?bt(J,bn,Xt,hi):bt(J)),Pn!==void 0)return Pn;if(!Ls(J))return J;var Ci=Lo(J);if(Ci){if(Pn=iA(J),!ge)return Bc(J,Pn)}else{var ni=Ps(J),Hi=ni==y||ni==_;if(Bo(J))return Jo(J,ge);if(ni==P||ni==o||Hi&&!Xt){if(gt(J))return Xt?J:{};if(Pn=Ws(Hi?{}:J),!ge)return Oc(J,Xo(Pn,J))}else{if(!De[ni])return Xt?J:{};Pn=Ha(J,ni,no,ge)}}hi||(hi=new Yr);var xr=hi.get(J);if(xr)return xr;if(hi.set(J,Pn),!Ci)var ir=Ge?eu(J):Rr(J);return Oe(ir||J,function(Zi,Or){ir&&(Or=Zi,Zi=J[Or]),Sl(Pn,Or,no(Zi,ge,Ge,bt,Or,J,hi))}),Pn}function El(J){return Ls(J)?tt(J):{}}function YA(J,ge,Ge){var bt=ge(J);return Lo(J)?bt:we(bt,Ge(J))}function Bl(J){return En.call(J)}function Eu(J){if(!Ls(J)||Qs(J))return!1;var ge=po(J)||gt(J)?wt:ut;return ge.test(Vr(J))}function na(J){if(!zi(J))return ae(J);var ge=[];for(var Ge in Object(J))qn.call(J,Ge)&&Ge!="constructor"&&ge.push(Ge);return ge}function Jo(J,ge){if(ge)return J.slice();var Ge=new J.constructor(J.length);return J.copy(Ge),Ge}function Bu(J){var ge=new J.constructor(J.byteLength);return new ce(ge).set(new ce(J)),ge}function Ol(J,ge){var Ge=ge?Bu(J.buffer):J.buffer;return new J.constructor(Ge,J.byteOffset,J.byteLength)}function Ou(J,ge,Ge){var bt=ge?Ge(Lt(J),!0):Lt(J);return Ye(bt,Pt,new J.constructor)}function Jl(J){var ge=new J.constructor(J.source,qe.exec(J));return ge.lastIndex=J.lastIndex,ge}function Zu(J,ge,Ge){var bt=ge?Ge(Zt(J),!0):Zt(J);return Ye(bt,ke,new J.constructor)}function VA(J){return Yn?Object(Yn.call(J)):{}}function ia(J,ge){var Ge=ge?Bu(J.buffer):J.buffer;return new J.constructor(Ge,J.byteOffset,J.length)}function Bc(J,ge){var Ge=-1,bt=J.length;for(ge||(ge=Array(bt));++Ge<bt;)ge[Ge]=J[Ge];return ge}function Il(J,ge,Ge,bt){Ge||(Ge={});for(var bn=-1,Xt=ge.length;++bn<Xt;){var hi=ge[bn],Pn=void 0;Sl(Ge,hi,Pn===void 0?J[hi]:Pn)}return Ge}function Oc(J,ge){return Il(J,So(J),ge)}function eu(J){return YA(J,Rr,So)}function Rs(J,ge){var Ge=J.__data__;return Yi(ge)?Ge[typeof ge=="string"?"string":"hash"]:Ge.map}function ws(J,ge){var Ge=dt(J,ge);return Eu(Ge)?Ge:void 0}var So=_n?Tt(_n,Object):_r,Ps=Bl;(he&&Ps(new he(new ArrayBuffer(1)))!=X||C&&Ps(new C)!=E||Ke&&Ps(Ke.resolve())!=K||$e&&Ps(new $e)!=Q||rt&&Ps(new rt)!=Z)&&(Ps=function(J){var ge=En.call(J),Ge=ge==P?J.constructor:void 0,bt=Ge?Vr(Ge):void 0;if(bt)switch(bt){case at:return X;case St:return E;case Bt:return K;case kt:return Q;case sn:return Z}return ge});function iA(J){var ge=J.length,Ge=J.constructor(ge);return ge&&typeof J[0]=="string"&&qn.call(J,"index")&&(Ge.index=J.index,Ge.input=J.input),Ge}function Ws(J){return typeof J.constructor=="function"&&!zi(J)?El(Pe(J)):{}}function Ha(J,ge,Ge,bt){var bn=J.constructor;switch(ge){case ee:return Bu(J);case a:case c:return new bn(+J);case X:return Ol(J,bt);case W:case se:case ue:case ve:case ye:case Ee:case _e:case Be:case Fe:return ia(J,bt);case E:return Ou(J,bt,Ge);case I:case V:return new bn(J);case z:return Jl(J);case Q:return Zu(J,bt,Ge);case $:return VA(J)}}function tu(J,ge){return ge=ge??r,!!ge&&(typeof J=="number"||ht.test(J))&&J>-1&&J%1==0&&J<ge}function Yi(J){var ge=typeof J;return ge=="string"||ge=="number"||ge=="symbol"||ge=="boolean"?J!=="__proto__":J===null}function Qs(J){return!!Dn&&Dn in J}function zi(J){var ge=J&&J.constructor,Ge=typeof ge=="function"&&ge.prototype||fi;return J===Ge}function Vr(J){if(J!=null){try{return wn.call(J)}catch{}try{return J+""}catch{}}return""}function yo(J){return no(J,!0,!0)}function Eo(J,ge){return J===ge||J!==J&&ge!==ge}function io(J){return Ic(J)&&qn.call(J,"callee")&&(!xt.call(J,"callee")||En.call(J)==o)}var Lo=Array.isArray;function gr(J){return J!=null&&es(J.length)&&!po(J)}function Ic(J){return Us(J)&&gr(J)}var Bo=Xe||yr;function po(J){var ge=Ls(J)?En.call(J):"";return ge==y||ge==_}function es(J){return typeof J=="number"&&J>-1&&J%1==0&&J<=r}function Ls(J){var ge=typeof J;return!!J&&(ge=="object"||ge=="function")}function Us(J){return!!J&&typeof J=="object"}function Rr(J){return gr(J)?mr(J):na(J)}function _r(){return[]}function yr(){return!1}n.exports=yo})(M3,M3.exports)),M3.exports}var Kle=Ule();const OF=Zl(Kle);var AO,IF;function Fle(){if(IF)return AO;IF=1;var n=NaN,e="[object Symbol]",t=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,a=Object.prototype,c=a.toString;function f(K,z,Q){return K===K&&(Q!==void 0&&(K=K<=Q?K:Q),z!==void 0&&(K=K>=z?K:z)),K}function y(K){var z=typeof K;return!!K&&(z=="object"||z=="function")}function _(K){return!!K&&typeof K=="object"}function E(K){return typeof K=="symbol"||_(K)&&c.call(K)==e}function I(K){if(typeof K=="number")return K;if(E(K))return n;if(y(K)){var z=typeof K.valueOf=="function"?K.valueOf():K;K=y(z)?z+"":z}if(typeof K!="string")return K===0?K:+K;K=K.replace(t,"");var Q=r.test(K);return Q||o.test(K)?s(K.slice(2),Q?2:8):i.test(K)?n:+K}function P(K,z,Q){return Q===void 0&&(Q=z,z=void 0),Q!==void 0&&(Q=I(Q),Q=Q===Q?Q:0),z!==void 0&&(z=I(z),z=z===z?z:0),f(I(K),z,Q)}return AO=P,AO}var zle=Fle();const TF=Zl(zle);var hO={},n3={},kF;function jle(){if(kF)return n3;kF=1,n3.byteLength=a,n3.toByteArray=f,n3.fromByteArray=E;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,o=i.length;r<o;++r)n[r]=i[r],e[i.charCodeAt(r)]=r;e[45]=62,e[95]=63;function s(I){var P=I.length;if(P%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var K=I.indexOf("=");K===-1&&(K=P);var z=K===P?0:4-K%4;return[K,z]}function a(I){var P=s(I),K=P[0],z=P[1];return(K+z)*3/4-z}function c(I,P,K){return(P+K)*3/4-K}function f(I){var P,K=s(I),z=K[0],Q=K[1],V=new t(c(I,z,Q)),$=0,Z=Q>0?z-4:z,ee;for(ee=0;ee<Z;ee+=4)P=e[I.charCodeAt(ee)]<<18|e[I.charCodeAt(ee+1)]<<12|e[I.charCodeAt(ee+2)]<<6|e[I.charCodeAt(ee+3)],V[$++]=P>>16&255,V[$++]=P>>8&255,V[$++]=P&255;return Q===2&&(P=e[I.charCodeAt(ee)]<<2|e[I.charCodeAt(ee+1)]>>4,V[$++]=P&255),Q===1&&(P=e[I.charCodeAt(ee)]<<10|e[I.charCodeAt(ee+1)]<<4|e[I.charCodeAt(ee+2)]>>2,V[$++]=P>>8&255,V[$++]=P&255),V}function y(I){return n[I>>18&63]+n[I>>12&63]+n[I>>6&63]+n[I&63]}function _(I,P,K){for(var z,Q=[],V=P;V<K;V+=3)z=(I[V]<<16&16711680)+(I[V+1]<<8&65280)+(I[V+2]&255),Q.push(y(z));return Q.join("")}function E(I){for(var P,K=I.length,z=K%3,Q=[],V=16383,$=0,Z=K-z;$<Z;$+=V)Q.push(_(I,$,$+V>Z?Z:$+V));return z===1?(P=I[K-1],Q.push(n[P>>2]+n[P<<4&63]+"==")):z===2&&(P=(I[K-2]<<8)+I[K-1],Q.push(n[P>>10]+n[P>>4&63]+n[P<<2&63]+"=")),Q.join("")}return n3}var T5={};var DF;function Nle(){return DF||(DF=1,T5.read=function(n,e,t,i,r){var o,s,a=r*8-i-1,c=(1<<a)-1,f=c>>1,y=-7,_=t?r-1:0,E=t?-1:1,I=n[e+_];for(_+=E,o=I&(1<<-y)-1,I>>=-y,y+=a;y>0;o=o*256+n[e+_],_+=E,y-=8);for(s=o&(1<<-y)-1,o>>=-y,y+=i;y>0;s=s*256+n[e+_],_+=E,y-=8);if(o===0)o=1-f;else{if(o===c)return s?NaN:(I?-1:1)*(1/0);s=s+Math.pow(2,i),o=o-f}return(I?-1:1)*s*Math.pow(2,o-i)},T5.write=function(n,e,t,i,r,o){var s,a,c,f=o*8-r-1,y=(1<<f)-1,_=y>>1,E=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,I=i?0:o-1,P=i?1:-1,K=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=y):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+_>=1?e+=E/c:e+=E*Math.pow(2,1-_),e*c>=2&&(s++,c/=2),s+_>=y?(a=0,s=y):s+_>=1?(a=(e*c-1)*Math.pow(2,r),s=s+_):(a=e*Math.pow(2,_-1)*Math.pow(2,r),s=0));r>=8;n[t+I]=a&255,I+=P,a/=256,r-=8);for(s=s<<r|a,f+=r;f>0;n[t+I]=s&255,I+=P,s/=256,f-=8);n[t+I-P]|=K*128}),T5}var RF;function Gle(){return RF||(RF=1,(function(n){const e=jle(),t=Nle(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=V,n.INSPECT_MAX_BYTES=50;const r=2147483647;n.kMaxLength=r,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const be=new Uint8Array(1),re={foo:function(){return 42}};return Object.setPrototypeOf(re,Uint8Array.prototype),Object.setPrototypeOf(be,re),be.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function s(be){if(be>r)throw new RangeError('The value "'+be+'" is invalid for option "size"');const re=new Uint8Array(be);return Object.setPrototypeOf(re,a.prototype),re}function a(be,re,ce){if(typeof be=="number"){if(typeof re=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _(be)}return c(be,re,ce)}a.poolSize=8192;function c(be,re,ce){if(typeof be=="string")return E(be,re);if(ArrayBuffer.isView(be))return P(be);if(be==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof be);if(Dn(be,ArrayBuffer)||be&&Dn(be.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Dn(be,SharedArrayBuffer)||be&&Dn(be.buffer,SharedArrayBuffer)))return K(be,re,ce);if(typeof be=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Pe=be.valueOf&&be.valueOf();if(Pe!=null&&Pe!==be)return a.from(Pe,re,ce);const tt=z(be);if(tt)return tt;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof be[Symbol.toPrimitive]=="function")return a.from(be[Symbol.toPrimitive]("string"),re,ce);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof be)}a.from=function(be,re,ce){return c(be,re,ce)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function f(be){if(typeof be!="number")throw new TypeError('"size" argument must be of type number');if(be<0)throw new RangeError('The value "'+be+'" is invalid for option "size"')}function y(be,re,ce){return f(be),be<=0?s(be):re!==void 0?typeof ce=="string"?s(be).fill(re,ce):s(be).fill(re):s(be)}a.alloc=function(be,re,ce){return y(be,re,ce)};function _(be){return f(be),s(be<0?0:Q(be)|0)}a.allocUnsafe=function(be){return _(be)},a.allocUnsafeSlow=function(be){return _(be)};function E(be,re){if((typeof re!="string"||re==="")&&(re="utf8"),!a.isEncoding(re))throw new TypeError("Unknown encoding: "+re);const ce=$(be,re)|0;let Pe=s(ce);const tt=Pe.write(be,re);return tt!==ce&&(Pe=Pe.slice(0,tt)),Pe}function I(be){const re=be.length<0?0:Q(be.length)|0,ce=s(re);for(let Pe=0;Pe<re;Pe+=1)ce[Pe]=be[Pe]&255;return ce}function P(be){if(Dn(be,Uint8Array)){const re=new Uint8Array(be);return K(re.buffer,re.byteOffset,re.byteLength)}return I(be)}function K(be,re,ce){if(re<0||be.byteLength<re)throw new RangeError('"offset" is outside of buffer bounds');if(be.byteLength<re+(ce||0))throw new RangeError('"length" is outside of buffer bounds');let Pe;return re===void 0&&ce===void 0?Pe=new Uint8Array(be):ce===void 0?Pe=new Uint8Array(be,re):Pe=new Uint8Array(be,re,ce),Object.setPrototypeOf(Pe,a.prototype),Pe}function z(be){if(a.isBuffer(be)){const re=Q(be.length)|0,ce=s(re);return ce.length===0||be.copy(ce,0,0,re),ce}if(be.length!==void 0)return typeof be.length!="number"||wn(be.length)?s(0):I(be);if(be.type==="Buffer"&&Array.isArray(be.data))return I(be.data)}function Q(be){if(be>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return be|0}function V(be){return+be!=be&&(be=0),a.alloc(+be)}a.isBuffer=function(re){return re!=null&&re._isBuffer===!0&&re!==a.prototype},a.compare=function(re,ce){if(Dn(re,Uint8Array)&&(re=a.from(re,re.offset,re.byteLength)),Dn(ce,Uint8Array)&&(ce=a.from(ce,ce.offset,ce.byteLength)),!a.isBuffer(re)||!a.isBuffer(ce))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(re===ce)return 0;let Pe=re.length,tt=ce.length;for(let xt=0,It=Math.min(Pe,tt);xt<It;++xt)if(re[xt]!==ce[xt]){Pe=re[xt],tt=ce[xt];break}return Pe<tt?-1:tt<Pe?1:0},a.isEncoding=function(re){switch(String(re).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(re,ce){if(!Array.isArray(re))throw new TypeError('"list" argument must be an Array of Buffers');if(re.length===0)return a.alloc(0);let Pe;if(ce===void 0)for(ce=0,Pe=0;Pe<re.length;++Pe)ce+=re[Pe].length;const tt=a.allocUnsafe(ce);let xt=0;for(Pe=0;Pe<re.length;++Pe){let It=re[Pe];if(Dn(It,Uint8Array))xt+It.length>tt.length?(a.isBuffer(It)||(It=a.from(It)),It.copy(tt,xt)):Uint8Array.prototype.set.call(tt,It,xt);else if(a.isBuffer(It))It.copy(tt,xt);else throw new TypeError('"list" argument must be an Array of Buffers');xt+=It.length}return tt};function $(be,re){if(a.isBuffer(be))return be.length;if(ArrayBuffer.isView(be)||Dn(be,ArrayBuffer))return be.byteLength;if(typeof be!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof be);const ce=be.length,Pe=arguments.length>2&&arguments[2]===!0;if(!Pe&&ce===0)return 0;let tt=!1;for(;;)switch(re){case"ascii":case"latin1":case"binary":return ce;case"utf8":case"utf-8":return Zt(be).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ce*2;case"hex":return ce>>>1;case"base64":return fi(be).length;default:if(tt)return Pe?-1:Zt(be).length;re=(""+re).toLowerCase(),tt=!0}}a.byteLength=$;function Z(be,re,ce){let Pe=!1;if((re===void 0||re<0)&&(re=0),re>this.length||((ce===void 0||ce>this.length)&&(ce=this.length),ce<=0)||(ce>>>=0,re>>>=0,ce<=re))return"";for(be||(be="utf8");;)switch(be){case"hex":return ht(this,re,ce);case"utf8":case"utf-8":return Be(this,re,ce);case"ascii":return qe(this,re,ce);case"latin1":case"binary":return ut(this,re,ce);case"base64":return _e(this,re,ce);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return De(this,re,ce);default:if(Pe)throw new TypeError("Unknown encoding: "+be);be=(be+"").toLowerCase(),Pe=!0}}a.prototype._isBuffer=!0;function ee(be,re,ce){const Pe=be[re];be[re]=be[ce],be[ce]=Pe}a.prototype.swap16=function(){const re=this.length;if(re%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let ce=0;ce<re;ce+=2)ee(this,ce,ce+1);return this},a.prototype.swap32=function(){const re=this.length;if(re%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let ce=0;ce<re;ce+=4)ee(this,ce,ce+3),ee(this,ce+1,ce+2);return this},a.prototype.swap64=function(){const re=this.length;if(re%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let ce=0;ce<re;ce+=8)ee(this,ce,ce+7),ee(this,ce+1,ce+6),ee(this,ce+2,ce+5),ee(this,ce+3,ce+4);return this},a.prototype.toString=function(){const re=this.length;return re===0?"":arguments.length===0?Be(this,0,re):Z.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(re){if(!a.isBuffer(re))throw new TypeError("Argument must be a Buffer");return this===re?!0:a.compare(this,re)===0},a.prototype.inspect=function(){let re="";const ce=n.INSPECT_MAX_BYTES;return re=this.toString("hex",0,ce).replace(/(.{2})/g,"$1 ").trim(),this.length>ce&&(re+=" ... "),"<Buffer "+re+">"},i&&(a.prototype[i]=a.prototype.inspect),a.prototype.compare=function(re,ce,Pe,tt,xt){if(Dn(re,Uint8Array)&&(re=a.from(re,re.offset,re.byteLength)),!a.isBuffer(re))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof re);if(ce===void 0&&(ce=0),Pe===void 0&&(Pe=re?re.length:0),tt===void 0&&(tt=0),xt===void 0&&(xt=this.length),ce<0||Pe>re.length||tt<0||xt>this.length)throw new RangeError("out of range index");if(tt>=xt&&ce>=Pe)return 0;if(tt>=xt)return-1;if(ce>=Pe)return 1;if(ce>>>=0,Pe>>>=0,tt>>>=0,xt>>>=0,this===re)return 0;let It=xt-tt,_n=Pe-ce;const Xe=Math.min(It,_n),ae=this.slice(tt,xt),he=re.slice(ce,Pe);for(let C=0;C<Xe;++C)if(ae[C]!==he[C]){It=ae[C],_n=he[C];break}return It<_n?-1:_n<It?1:0};function X(be,re,ce,Pe,tt){if(be.length===0)return-1;if(typeof ce=="string"?(Pe=ce,ce=0):ce>2147483647?ce=2147483647:ce<-2147483648&&(ce=-2147483648),ce=+ce,wn(ce)&&(ce=tt?0:be.length-1),ce<0&&(ce=be.length+ce),ce>=be.length){if(tt)return-1;ce=be.length-1}else if(ce<0)if(tt)ce=0;else return-1;if(typeof re=="string"&&(re=a.from(re,Pe)),a.isBuffer(re))return re.length===0?-1:W(be,re,ce,Pe,tt);if(typeof re=="number")return re=re&255,typeof Uint8Array.prototype.indexOf=="function"?tt?Uint8Array.prototype.indexOf.call(be,re,ce):Uint8Array.prototype.lastIndexOf.call(be,re,ce):W(be,[re],ce,Pe,tt);throw new TypeError("val must be string, number or Buffer")}function W(be,re,ce,Pe,tt){let xt=1,It=be.length,_n=re.length;if(Pe!==void 0&&(Pe=String(Pe).toLowerCase(),Pe==="ucs2"||Pe==="ucs-2"||Pe==="utf16le"||Pe==="utf-16le")){if(be.length<2||re.length<2)return-1;xt=2,It/=2,_n/=2,ce/=2}function Xe(he,C){return xt===1?he[C]:he.readUInt16BE(C*xt)}let ae;if(tt){let he=-1;for(ae=ce;ae<It;ae++)if(Xe(be,ae)===Xe(re,he===-1?0:ae-he)){if(he===-1&&(he=ae),ae-he+1===_n)return he*xt}else he!==-1&&(ae-=ae-he),he=-1}else for(ce+_n>It&&(ce=It-_n),ae=ce;ae>=0;ae--){let he=!0;for(let C=0;C<_n;C++)if(Xe(be,ae+C)!==Xe(re,C)){he=!1;break}if(he)return ae}return-1}a.prototype.includes=function(re,ce,Pe){return this.indexOf(re,ce,Pe)!==-1},a.prototype.indexOf=function(re,ce,Pe){return X(this,re,ce,Pe,!0)},a.prototype.lastIndexOf=function(re,ce,Pe){return X(this,re,ce,Pe,!1)};function se(be,re,ce,Pe){ce=Number(ce)||0;const tt=be.length-ce;Pe?(Pe=Number(Pe),Pe>tt&&(Pe=tt)):Pe=tt;const xt=re.length;Pe>xt/2&&(Pe=xt/2);let It;for(It=0;It<Pe;++It){const _n=parseInt(re.substr(It*2,2),16);if(wn(_n))return It;be[ce+It]=_n}return It}function ue(be,re,ce,Pe){return Rn(Zt(re,be.length-ce),be,ce,Pe)}function ve(be,re,ce,Pe){return Rn(Fn(re),be,ce,Pe)}function ye(be,re,ce,Pe){return Rn(fi(re),be,ce,Pe)}function Ee(be,re,ce,Pe){return Rn(Ln(re,be.length-ce),be,ce,Pe)}a.prototype.write=function(re,ce,Pe,tt){if(ce===void 0)tt="utf8",Pe=this.length,ce=0;else if(Pe===void 0&&typeof ce=="string")tt=ce,Pe=this.length,ce=0;else if(isFinite(ce))ce=ce>>>0,isFinite(Pe)?(Pe=Pe>>>0,tt===void 0&&(tt="utf8")):(tt=Pe,Pe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const xt=this.length-ce;if((Pe===void 0||Pe>xt)&&(Pe=xt),re.length>0&&(Pe<0||ce<0)||ce>this.length)throw new RangeError("Attempt to write outside buffer bounds");tt||(tt="utf8");let It=!1;for(;;)switch(tt){case"hex":return se(this,re,ce,Pe);case"utf8":case"utf-8":return ue(this,re,ce,Pe);case"ascii":case"latin1":case"binary":return ve(this,re,ce,Pe);case"base64":return ye(this,re,ce,Pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ee(this,re,ce,Pe);default:if(It)throw new TypeError("Unknown encoding: "+tt);tt=(""+tt).toLowerCase(),It=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _e(be,re,ce){return re===0&&ce===be.length?e.fromByteArray(be):e.fromByteArray(be.slice(re,ce))}function Be(be,re,ce){ce=Math.min(be.length,ce);const Pe=[];let tt=re;for(;tt<ce;){const xt=be[tt];let It=null,_n=xt>239?4:xt>223?3:xt>191?2:1;if(tt+_n<=ce){let Xe,ae,he,C;switch(_n){case 1:xt<128&&(It=xt);break;case 2:Xe=be[tt+1],(Xe&192)===128&&(C=(xt&31)<<6|Xe&63,C>127&&(It=C));break;case 3:Xe=be[tt+1],ae=be[tt+2],(Xe&192)===128&&(ae&192)===128&&(C=(xt&15)<<12|(Xe&63)<<6|ae&63,C>2047&&(C<55296||C>57343)&&(It=C));break;case 4:Xe=be[tt+1],ae=be[tt+2],he=be[tt+3],(Xe&192)===128&&(ae&192)===128&&(he&192)===128&&(C=(xt&15)<<18|(Xe&63)<<12|(ae&63)<<6|he&63,C>65535&&C<1114112&&(It=C))}}It===null?(It=65533,_n=1):It>65535&&(It-=65536,Pe.push(It>>>10&1023|55296),It=56320|It&1023),Pe.push(It),tt+=_n}return Se(Pe)}const Fe=4096;function Se(be){const re=be.length;if(re<=Fe)return String.fromCharCode.apply(String,be);let ce="",Pe=0;for(;Pe<re;)ce+=String.fromCharCode.apply(String,be.slice(Pe,Pe+=Fe));return ce}function qe(be,re,ce){let Pe="";ce=Math.min(be.length,ce);for(let tt=re;tt<ce;++tt)Pe+=String.fromCharCode(be[tt]&127);return Pe}function ut(be,re,ce){let Pe="";ce=Math.min(be.length,ce);for(let tt=re;tt<ce;++tt)Pe+=String.fromCharCode(be[tt]);return Pe}function ht(be,re,ce){const Pe=be.length;(!re||re<0)&&(re=0),(!ce||ce<0||ce>Pe)&&(ce=Pe);let tt="";for(let xt=re;xt<ce;++xt)tt+=qn[be[xt]];return tt}function De(be,re,ce){const Pe=be.slice(re,ce);let tt="";for(let xt=0;xt<Pe.length-1;xt+=2)tt+=String.fromCharCode(Pe[xt]+Pe[xt+1]*256);return tt}a.prototype.slice=function(re,ce){const Pe=this.length;re=~~re,ce=ce===void 0?Pe:~~ce,re<0?(re+=Pe,re<0&&(re=0)):re>Pe&&(re=Pe),ce<0?(ce+=Pe,ce<0&&(ce=0)):ce>Pe&&(ce=Pe),ce<re&&(ce=re);const tt=this.subarray(re,ce);return Object.setPrototypeOf(tt,a.prototype),tt};function Ie(be,re,ce){if(be%1!==0||be<0)throw new RangeError("offset is not uint");if(be+re>ce)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(re,ce,Pe){re=re>>>0,ce=ce>>>0,Pe||Ie(re,ce,this.length);let tt=this[re],xt=1,It=0;for(;++It<ce&&(xt*=256);)tt+=this[re+It]*xt;return tt},a.prototype.readUintBE=a.prototype.readUIntBE=function(re,ce,Pe){re=re>>>0,ce=ce>>>0,Pe||Ie(re,ce,this.length);let tt=this[re+--ce],xt=1;for(;ce>0&&(xt*=256);)tt+=this[re+--ce]*xt;return tt},a.prototype.readUint8=a.prototype.readUInt8=function(re,ce){return re=re>>>0,ce||Ie(re,1,this.length),this[re]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(re,ce){return re=re>>>0,ce||Ie(re,2,this.length),this[re]|this[re+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(re,ce){return re=re>>>0,ce||Ie(re,2,this.length),this[re]<<8|this[re+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(re,ce){return re=re>>>0,ce||Ie(re,4,this.length),(this[re]|this[re+1]<<8|this[re+2]<<16)+this[re+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(re,ce){return re=re>>>0,ce||Ie(re,4,this.length),this[re]*16777216+(this[re+1]<<16|this[re+2]<<8|this[re+3])},a.prototype.readBigUInt64LE=En(function(re){re=re>>>0,dt(re,"offset");const ce=this[re],Pe=this[re+7];(ce===void 0||Pe===void 0)&&gt(re,this.length-8);const tt=ce+this[++re]*2**8+this[++re]*2**16+this[++re]*2**24,xt=this[++re]+this[++re]*2**8+this[++re]*2**16+Pe*2**24;return BigInt(tt)+(BigInt(xt)<<BigInt(32))}),a.prototype.readBigUInt64BE=En(function(re){re=re>>>0,dt(re,"offset");const ce=this[re],Pe=this[re+7];(ce===void 0||Pe===void 0)&&gt(re,this.length-8);const tt=ce*2**24+this[++re]*2**16+this[++re]*2**8+this[++re],xt=this[++re]*2**24+this[++re]*2**16+this[++re]*2**8+Pe;return(BigInt(tt)<<BigInt(32))+BigInt(xt)}),a.prototype.readIntLE=function(re,ce,Pe){re=re>>>0,ce=ce>>>0,Pe||Ie(re,ce,this.length);let tt=this[re],xt=1,It=0;for(;++It<ce&&(xt*=256);)tt+=this[re+It]*xt;return xt*=128,tt>=xt&&(tt-=Math.pow(2,8*ce)),tt},a.prototype.readIntBE=function(re,ce,Pe){re=re>>>0,ce=ce>>>0,Pe||Ie(re,ce,this.length);let tt=ce,xt=1,It=this[re+--tt];for(;tt>0&&(xt*=256);)It+=this[re+--tt]*xt;return xt*=128,It>=xt&&(It-=Math.pow(2,8*ce)),It},a.prototype.readInt8=function(re,ce){return re=re>>>0,ce||Ie(re,1,this.length),this[re]&128?(255-this[re]+1)*-1:this[re]},a.prototype.readInt16LE=function(re,ce){re=re>>>0,ce||Ie(re,2,this.length);const Pe=this[re]|this[re+1]<<8;return Pe&32768?Pe|4294901760:Pe},a.prototype.readInt16BE=function(re,ce){re=re>>>0,ce||Ie(re,2,this.length);const Pe=this[re+1]|this[re]<<8;return Pe&32768?Pe|4294901760:Pe},a.prototype.readInt32LE=function(re,ce){return re=re>>>0,ce||Ie(re,4,this.length),this[re]|this[re+1]<<8|this[re+2]<<16|this[re+3]<<24},a.prototype.readInt32BE=function(re,ce){return re=re>>>0,ce||Ie(re,4,this.length),this[re]<<24|this[re+1]<<16|this[re+2]<<8|this[re+3]},a.prototype.readBigInt64LE=En(function(re){re=re>>>0,dt(re,"offset");const ce=this[re],Pe=this[re+7];(ce===void 0||Pe===void 0)&&gt(re,this.length-8);const tt=this[re+4]+this[re+5]*2**8+this[re+6]*2**16+(Pe<<24);return(BigInt(tt)<<BigInt(32))+BigInt(ce+this[++re]*2**8+this[++re]*2**16+this[++re]*2**24)}),a.prototype.readBigInt64BE=En(function(re){re=re>>>0,dt(re,"offset");const ce=this[re],Pe=this[re+7];(ce===void 0||Pe===void 0)&&gt(re,this.length-8);const tt=(ce<<24)+this[++re]*2**16+this[++re]*2**8+this[++re];return(BigInt(tt)<<BigInt(32))+BigInt(this[++re]*2**24+this[++re]*2**16+this[++re]*2**8+Pe)}),a.prototype.readFloatLE=function(re,ce){return re=re>>>0,ce||Ie(re,4,this.length),t.read(this,re,!0,23,4)},a.prototype.readFloatBE=function(re,ce){return re=re>>>0,ce||Ie(re,4,this.length),t.read(this,re,!1,23,4)},a.prototype.readDoubleLE=function(re,ce){return re=re>>>0,ce||Ie(re,8,this.length),t.read(this,re,!0,52,8)},a.prototype.readDoubleBE=function(re,ce){return re=re>>>0,ce||Ie(re,8,this.length),t.read(this,re,!1,52,8)};function ze(be,re,ce,Pe,tt,xt){if(!a.isBuffer(be))throw new TypeError('"buffer" argument must be a Buffer instance');if(re>tt||re<xt)throw new RangeError('"value" argument is out of bounds');if(ce+Pe>be.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(re,ce,Pe,tt){if(re=+re,ce=ce>>>0,Pe=Pe>>>0,!tt){const _n=Math.pow(2,8*Pe)-1;ze(this,re,ce,Pe,_n,0)}let xt=1,It=0;for(this[ce]=re&255;++It<Pe&&(xt*=256);)this[ce+It]=re/xt&255;return ce+Pe},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(re,ce,Pe,tt){if(re=+re,ce=ce>>>0,Pe=Pe>>>0,!tt){const _n=Math.pow(2,8*Pe)-1;ze(this,re,ce,Pe,_n,0)}let xt=Pe-1,It=1;for(this[ce+xt]=re&255;--xt>=0&&(It*=256);)this[ce+xt]=re/It&255;return ce+Pe},a.prototype.writeUint8=a.prototype.writeUInt8=function(re,ce,Pe){return re=+re,ce=ce>>>0,Pe||ze(this,re,ce,1,255,0),this[ce]=re&255,ce+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(re,ce,Pe){return re=+re,ce=ce>>>0,Pe||ze(this,re,ce,2,65535,0),this[ce]=re&255,this[ce+1]=re>>>8,ce+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(re,ce,Pe){return re=+re,ce=ce>>>0,Pe||ze(this,re,ce,2,65535,0),this[ce]=re>>>8,this[ce+1]=re&255,ce+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(re,ce,Pe){return re=+re,ce=ce>>>0,Pe||ze(this,re,ce,4,4294967295,0),this[ce+3]=re>>>24,this[ce+2]=re>>>16,this[ce+1]=re>>>8,this[ce]=re&255,ce+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(re,ce,Pe){return re=+re,ce=ce>>>0,Pe||ze(this,re,ce,4,4294967295,0),this[ce]=re>>>24,this[ce+1]=re>>>16,this[ce+2]=re>>>8,this[ce+3]=re&255,ce+4};function Te(be,re,ce,Pe,tt){ft(re,Pe,tt,be,ce,7);let xt=Number(re&BigInt(4294967295));be[ce++]=xt,xt=xt>>8,be[ce++]=xt,xt=xt>>8,be[ce++]=xt,xt=xt>>8,be[ce++]=xt;let It=Number(re>>BigInt(32)&BigInt(4294967295));return be[ce++]=It,It=It>>8,be[ce++]=It,It=It>>8,be[ce++]=It,It=It>>8,be[ce++]=It,ce}function vt(be,re,ce,Pe,tt){ft(re,Pe,tt,be,ce,7);let xt=Number(re&BigInt(4294967295));be[ce+7]=xt,xt=xt>>8,be[ce+6]=xt,xt=xt>>8,be[ce+5]=xt,xt=xt>>8,be[ce+4]=xt;let It=Number(re>>BigInt(32)&BigInt(4294967295));return be[ce+3]=It,It=It>>8,be[ce+2]=It,It=It>>8,be[ce+1]=It,It=It>>8,be[ce]=It,ce+8}a.prototype.writeBigUInt64LE=En(function(re,ce=0){return Te(this,re,ce,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=En(function(re,ce=0){return vt(this,re,ce,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(re,ce,Pe,tt){if(re=+re,ce=ce>>>0,!tt){const Xe=Math.pow(2,8*Pe-1);ze(this,re,ce,Pe,Xe-1,-Xe)}let xt=0,It=1,_n=0;for(this[ce]=re&255;++xt<Pe&&(It*=256);)re<0&&_n===0&&this[ce+xt-1]!==0&&(_n=1),this[ce+xt]=(re/It>>0)-_n&255;return ce+Pe},a.prototype.writeIntBE=function(re,ce,Pe,tt){if(re=+re,ce=ce>>>0,!tt){const Xe=Math.pow(2,8*Pe-1);ze(this,re,ce,Pe,Xe-1,-Xe)}let xt=Pe-1,It=1,_n=0;for(this[ce+xt]=re&255;--xt>=0&&(It*=256);)re<0&&_n===0&&this[ce+xt+1]!==0&&(_n=1),this[ce+xt]=(re/It>>0)-_n&255;return ce+Pe},a.prototype.writeInt8=function(re,ce,Pe){return re=+re,ce=ce>>>0,Pe||ze(this,re,ce,1,127,-128),re<0&&(re=255+re+1),this[ce]=re&255,ce+1},a.prototype.writeInt16LE=function(re,ce,Pe){return re=+re,ce=ce>>>0,Pe||ze(this,re,ce,2,32767,-32768),this[ce]=re&255,this[ce+1]=re>>>8,ce+2},a.prototype.writeInt16BE=function(re,ce,Pe){return re=+re,ce=ce>>>0,Pe||ze(this,re,ce,2,32767,-32768),this[ce]=re>>>8,this[ce+1]=re&255,ce+2},a.prototype.writeInt32LE=function(re,ce,Pe){return re=+re,ce=ce>>>0,Pe||ze(this,re,ce,4,2147483647,-2147483648),this[ce]=re&255,this[ce+1]=re>>>8,this[ce+2]=re>>>16,this[ce+3]=re>>>24,ce+4},a.prototype.writeInt32BE=function(re,ce,Pe){return re=+re,ce=ce>>>0,Pe||ze(this,re,ce,4,2147483647,-2147483648),re<0&&(re=4294967295+re+1),this[ce]=re>>>24,this[ce+1]=re>>>16,this[ce+2]=re>>>8,this[ce+3]=re&255,ce+4},a.prototype.writeBigInt64LE=En(function(re,ce=0){return Te(this,re,ce,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=En(function(re,ce=0){return vt(this,re,ce,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function st(be,re,ce,Pe,tt,xt){if(ce+Pe>be.length)throw new RangeError("Index out of range");if(ce<0)throw new RangeError("Index out of range")}function Et(be,re,ce,Pe,tt){return re=+re,ce=ce>>>0,tt||st(be,re,ce,4),t.write(be,re,ce,Pe,23,4),ce+4}a.prototype.writeFloatLE=function(re,ce,Pe){return Et(this,re,ce,!0,Pe)},a.prototype.writeFloatBE=function(re,ce,Pe){return Et(this,re,ce,!1,Pe)};function Pt(be,re,ce,Pe,tt){return re=+re,ce=ce>>>0,tt||st(be,re,ce,8),t.write(be,re,ce,Pe,52,8),ce+8}a.prototype.writeDoubleLE=function(re,ce,Pe){return Pt(this,re,ce,!0,Pe)},a.prototype.writeDoubleBE=function(re,ce,Pe){return Pt(this,re,ce,!1,Pe)},a.prototype.copy=function(re,ce,Pe,tt){if(!a.isBuffer(re))throw new TypeError("argument should be a Buffer");if(Pe||(Pe=0),!tt&&tt!==0&&(tt=this.length),ce>=re.length&&(ce=re.length),ce||(ce=0),tt>0&&tt<Pe&&(tt=Pe),tt===Pe||re.length===0||this.length===0)return 0;if(ce<0)throw new RangeError("targetStart out of bounds");if(Pe<0||Pe>=this.length)throw new RangeError("Index out of range");if(tt<0)throw new RangeError("sourceEnd out of bounds");tt>this.length&&(tt=this.length),re.length-ce<tt-Pe&&(tt=re.length-ce+Pe);const xt=tt-Pe;return this===re&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ce,Pe,tt):Uint8Array.prototype.set.call(re,this.subarray(Pe,tt),ce),xt},a.prototype.fill=function(re,ce,Pe,tt){if(typeof re=="string"){if(typeof ce=="string"?(tt=ce,ce=0,Pe=this.length):typeof Pe=="string"&&(tt=Pe,Pe=this.length),tt!==void 0&&typeof tt!="string")throw new TypeError("encoding must be a string");if(typeof tt=="string"&&!a.isEncoding(tt))throw new TypeError("Unknown encoding: "+tt);if(re.length===1){const It=re.charCodeAt(0);(tt==="utf8"&&It<128||tt==="latin1")&&(re=It)}}else typeof re=="number"?re=re&255:typeof re=="boolean"&&(re=Number(re));if(ce<0||this.length<ce||this.length<Pe)throw new RangeError("Out of range index");if(Pe<=ce)return this;ce=ce>>>0,Pe=Pe===void 0?this.length:Pe>>>0,re||(re=0);let xt;if(typeof re=="number")for(xt=ce;xt<Pe;++xt)this[xt]=re;else{const It=a.isBuffer(re)?re:a.from(re,tt),_n=It.length;if(_n===0)throw new TypeError('The value "'+re+'" is invalid for argument "value"');for(xt=0;xt<Pe-ce;++xt)this[xt+ce]=It[xt%_n]}return this};const ke={};function Oe(be,re,ce){ke[be]=class extends ce{constructor(){super(),Object.defineProperty(this,"message",{value:re.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${be}]`,this.stack,delete this.name}get code(){return be}set code(tt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:tt,writable:!0})}toString(){return`${this.name} [${be}]: ${this.message}`}}}Oe("ERR_BUFFER_OUT_OF_BOUNDS",function(be){return be?`${be} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Oe("ERR_INVALID_ARG_TYPE",function(be,re){return`The "${be}" argument must be of type number. Received type ${typeof re}`},TypeError),Oe("ERR_OUT_OF_RANGE",function(be,re,ce){let Pe=`The value of "${be}" is out of range.`,tt=ce;return Number.isInteger(ce)&&Math.abs(ce)>2**32?tt=we(String(ce)):typeof ce=="bigint"&&(tt=String(ce),(ce>BigInt(2)**BigInt(32)||ce<-(BigInt(2)**BigInt(32)))&&(tt=we(tt)),tt+="n"),Pe+=` It must be ${re}. Received ${tt}`,Pe},RangeError);function we(be){let re="",ce=be.length;const Pe=be[0]==="-"?1:0;for(;ce>=Pe+4;ce-=3)re=`_${be.slice(ce-3,ce)}${re}`;return`${be.slice(0,ce)}${re}`}function Ye(be,re,ce){dt(re,"offset"),(be[re]===void 0||be[re+ce]===void 0)&&gt(re,be.length-(ce+1))}function ft(be,re,ce,Pe,tt,xt){if(be>ce||be<re){const It=typeof re=="bigint"?"n":"";let _n;throw re===0||re===BigInt(0)?_n=`>= 0${It} and < 2${It} ** ${(xt+1)*8}${It}`:_n=`>= -(2${It} ** ${(xt+1)*8-1}${It}) and < 2 ** ${(xt+1)*8-1}${It}`,new ke.ERR_OUT_OF_RANGE("value",_n,be)}Ye(Pe,tt,xt)}function dt(be,re){if(typeof be!="number")throw new ke.ERR_INVALID_ARG_TYPE(re,"number",be)}function gt(be,re,ce){throw Math.floor(be)!==be?(dt(be,ce),new ke.ERR_OUT_OF_RANGE("offset","an integer",be)):re<0?new ke.ERR_BUFFER_OUT_OF_BOUNDS:new ke.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${re}`,be)}const Lt=/[^+/0-9A-Za-z-_]/g;function Tt(be){if(be=be.split("=")[0],be=be.trim().replace(Lt,""),be.length<2)return"";for(;be.length%4!==0;)be=be+"=";return be}function Zt(be,re){re=re||1/0;let ce;const Pe=be.length;let tt=null;const xt=[];for(let It=0;It<Pe;++It){if(ce=be.charCodeAt(It),ce>55295&&ce<57344){if(!tt){if(ce>56319){(re-=3)>-1&&xt.push(239,191,189);continue}else if(It+1===Pe){(re-=3)>-1&&xt.push(239,191,189);continue}tt=ce;continue}if(ce<56320){(re-=3)>-1&&xt.push(239,191,189),tt=ce;continue}ce=(tt-55296<<10|ce-56320)+65536}else tt&&(re-=3)>-1&&xt.push(239,191,189);if(tt=null,ce<128){if((re-=1)<0)break;xt.push(ce)}else if(ce<2048){if((re-=2)<0)break;xt.push(ce>>6|192,ce&63|128)}else if(ce<65536){if((re-=3)<0)break;xt.push(ce>>12|224,ce>>6&63|128,ce&63|128)}else if(ce<1114112){if((re-=4)<0)break;xt.push(ce>>18|240,ce>>12&63|128,ce>>6&63|128,ce&63|128)}else throw new Error("Invalid code point")}return xt}function Fn(be){const re=[];for(let ce=0;ce<be.length;++ce)re.push(be.charCodeAt(ce)&255);return re}function Ln(be,re){let ce,Pe,tt;const xt=[];for(let It=0;It<be.length&&!((re-=2)<0);++It)ce=be.charCodeAt(It),Pe=ce>>8,tt=ce%256,xt.push(tt),xt.push(Pe);return xt}function fi(be){return e.toByteArray(Tt(be))}function Rn(be,re,ce,Pe){let tt;for(tt=0;tt<Pe&&!(tt+ce>=re.length||tt>=be.length);++tt)re[tt+ce]=be[tt];return tt}function Dn(be,re){return be instanceof re||be!=null&&be.constructor!=null&&be.constructor.name!=null&&be.constructor.name===re.name}function wn(be){return be!==be}const qn=(function(){const be="0123456789abcdef",re=new Array(256);for(let ce=0;ce<16;++ce){const Pe=ce*16;for(let tt=0;tt<16;++tt)re[Pe+tt]=be[ce]+be[tt]}return re})();function En(be){return typeof BigInt>"u"?wt:be}function wt(){throw new Error("BigInt not supported")}})(hO)),hO}var Wle=Gle();const Qle=Zl(Wle);var dO,PF;function qle(){if(PF)return dO;PF=1;var n="Expected a function",e="__lodash_hash_undefined__",t="[object Function]",i="[object GeneratorFunction]",r="[object Symbol]",o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/,a=/^\./,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f=/[\\^$.*+?()[\]{}|]/g,y=/\\(\\)?/g,_=/^\[object .+?Constructor\]$/,E=typeof window=="object"&&window&&window.Object===Object&&window,I=typeof self=="object"&&self&&self.Object===Object&&self,P=E||I||Function("return this")();function K(ae,he){return ae?.[he]}function z(ae){var he=!1;if(ae!=null&&typeof ae.toString!="function")try{he=!!(ae+"")}catch{}return he}var Q=Array.prototype,V=Function.prototype,$=Object.prototype,Z=P["__core-js_shared__"],ee=(function(){var ae=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||"");return ae?"Symbol(src)_1."+ae:""})(),X=V.toString,W=$.hasOwnProperty,se=$.toString,ue=RegExp("^"+X.call(W).replace(f,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ve=P.Symbol,ye=Q.splice,Ee=fi(P,"Map"),_e=fi(Object,"create"),Be=ve?ve.prototype:void 0,Fe=Be?Be.toString:void 0;function Se(ae){var he=-1,C=ae?ae.length:0;for(this.clear();++he<C;){var Ke=ae[he];this.set(Ke[0],Ke[1])}}function qe(){this.__data__=_e?_e(null):{}}function ut(ae){return this.has(ae)&&delete this.__data__[ae]}function ht(ae){var he=this.__data__;if(_e){var C=he[ae];return C===e?void 0:C}return W.call(he,ae)?he[ae]:void 0}function De(ae){var he=this.__data__;return _e?he[ae]!==void 0:W.call(he,ae)}function Ie(ae,he){var C=this.__data__;return C[ae]=_e&&he===void 0?e:he,this}Se.prototype.clear=qe,Se.prototype.delete=ut,Se.prototype.get=ht,Se.prototype.has=De,Se.prototype.set=Ie;function ze(ae){var he=-1,C=ae?ae.length:0;for(this.clear();++he<C;){var Ke=ae[he];this.set(Ke[0],Ke[1])}}function Te(){this.__data__=[]}function vt(ae){var he=this.__data__,C=gt(he,ae);if(C<0)return!1;var Ke=he.length-1;return C==Ke?he.pop():ye.call(he,C,1),!0}function st(ae){var he=this.__data__,C=gt(he,ae);return C<0?void 0:he[C][1]}function Et(ae){return gt(this.__data__,ae)>-1}function Pt(ae,he){var C=this.__data__,Ke=gt(C,ae);return Ke<0?C.push([ae,he]):C[Ke][1]=he,this}ze.prototype.clear=Te,ze.prototype.delete=vt,ze.prototype.get=st,ze.prototype.has=Et,ze.prototype.set=Pt;function ke(ae){var he=-1,C=ae?ae.length:0;for(this.clear();++he<C;){var Ke=ae[he];this.set(Ke[0],Ke[1])}}function Oe(){this.__data__={hash:new Se,map:new(Ee||ze),string:new Se}}function we(ae){return Ln(this,ae).delete(ae)}function Ye(ae){return Ln(this,ae).get(ae)}function ft(ae){return Ln(this,ae).has(ae)}function dt(ae,he){return Ln(this,ae).set(ae,he),this}ke.prototype.clear=Oe,ke.prototype.delete=we,ke.prototype.get=Ye,ke.prototype.has=ft,ke.prototype.set=dt;function gt(ae,he){for(var C=ae.length;C--;)if(re(ae[C][0],he))return C;return-1}function Lt(ae,he){he=Rn(he,ae)?[he]:Fn(he);for(var C=0,Ke=he.length;ae!=null&&C<Ke;)ae=ae[En(he[C++])];return C&&C==Ke?ae:void 0}function Tt(ae){if(!tt(ae)||wn(ae))return!1;var he=Pe(ae)||z(ae)?ue:_;return he.test(wt(ae))}function Zt(ae){if(typeof ae=="string")return ae;if(It(ae))return Fe?Fe.call(ae):"";var he=ae+"";return he=="0"&&1/ae==-1/0?"-0":he}function Fn(ae){return ce(ae)?ae:qn(ae)}function Ln(ae,he){var C=ae.__data__;return Dn(he)?C[typeof he=="string"?"string":"hash"]:C.map}function fi(ae,he){var C=K(ae,he);return Tt(C)?C:void 0}function Rn(ae,he){if(ce(ae))return!1;var C=typeof ae;return C=="number"||C=="symbol"||C=="boolean"||ae==null||It(ae)?!0:s.test(ae)||!o.test(ae)||he!=null&&ae in Object(he)}function Dn(ae){var he=typeof ae;return he=="string"||he=="number"||he=="symbol"||he=="boolean"?ae!=="__proto__":ae===null}function wn(ae){return!!ee&&ee in ae}var qn=be(function(ae){ae=_n(ae);var he=[];return a.test(ae)&&he.push(""),ae.replace(c,function(C,Ke,$e,rt){he.push($e?rt.replace(y,"$1"):Ke||C)}),he});function En(ae){if(typeof ae=="string"||It(ae))return ae;var he=ae+"";return he=="0"&&1/ae==-1/0?"-0":he}function wt(ae){if(ae!=null){try{return X.call(ae)}catch{}try{return ae+""}catch{}}return""}function be(ae,he){if(typeof ae!="function"||he&&typeof he!="function")throw new TypeError(n);var C=function(){var Ke=arguments,$e=he?he.apply(this,Ke):Ke[0],rt=C.cache;if(rt.has($e))return rt.get($e);var Re=ae.apply(this,Ke);return C.cache=rt.set($e,Re),Re};return C.cache=new(be.Cache||ke),C}be.Cache=ke;function re(ae,he){return ae===he||ae!==ae&&he!==he}var ce=Array.isArray;function Pe(ae){var he=tt(ae)?se.call(ae):"";return he==t||he==i}function tt(ae){var he=typeof ae;return!!ae&&(he=="object"||he=="function")}function xt(ae){return!!ae&&typeof ae=="object"}function It(ae){return typeof ae=="symbol"||xt(ae)&&se.call(ae)==r}function _n(ae){return ae==null?"":Zt(ae)}function Xe(ae,he,C){var Ke=ae==null?void 0:Lt(ae,he);return Ke===void 0?C:Ke}return dO=Xe,dO}var Yle=qle();const Vle=Zl(Yle);var w3={exports:{}};var $le=w3.exports,LF;function Hle(){return LF||(LF=1,(function(n,e){(function(){var t,i="4.17.21",r=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",a="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",f=500,y="__lodash_placeholder__",_=1,E=2,I=4,P=1,K=2,z=1,Q=2,V=4,$=8,Z=16,ee=32,X=64,W=128,se=256,ue=512,ve=30,ye="...",Ee=800,_e=16,Be=1,Fe=2,Se=3,qe=1/0,ut=9007199254740991,ht=17976931348623157e292,De=NaN,Ie=4294967295,ze=Ie-1,Te=Ie>>>1,vt=[["ary",W],["bind",z],["bindKey",Q],["curry",$],["curryRight",Z],["flip",ue],["partial",ee],["partialRight",X],["rearg",se]],st="[object Arguments]",Et="[object Array]",Pt="[object AsyncFunction]",ke="[object Boolean]",Oe="[object Date]",we="[object DOMException]",Ye="[object Error]",ft="[object Function]",dt="[object GeneratorFunction]",gt="[object Map]",Lt="[object Number]",Tt="[object Null]",Zt="[object Object]",Fn="[object Promise]",Ln="[object Proxy]",fi="[object RegExp]",Rn="[object Set]",Dn="[object String]",wn="[object Symbol]",qn="[object Undefined]",En="[object WeakMap]",wt="[object WeakSet]",be="[object ArrayBuffer]",re="[object DataView]",ce="[object Float32Array]",Pe="[object Float64Array]",tt="[object Int8Array]",xt="[object Int16Array]",It="[object Int32Array]",_n="[object Uint8Array]",Xe="[object Uint8ClampedArray]",ae="[object Uint16Array]",he="[object Uint32Array]",C=/\b__p \+= '';/g,Ke=/\b(__p \+=) '' \+/g,$e=/(__e\(.*?\)|\b__t\)) \+\n'';/g,rt=/&(?:amp|lt|gt|quot|#39);/g,Re=/[&<>"']/g,at=RegExp(rt.source),St=RegExp(Re.source),Bt=/<%-([\s\S]+?)%>/g,kt=/<%([\s\S]+?)%>/g,sn=/<%=([\s\S]+?)%>/g,Tn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Yn=/^\w*$/,vi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ui=/[\\^$.*+?()[\]{}|]/g,Zn=RegExp(ui.source),Mi=/^\s+/,nn=/\s/,$i=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,bi=/\{\n\/\* \[wrapped with (.+)\] \*/,to=/,? & /,tr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,an=/[()=,{}\[\]\/\s]/,Kn=/\\(\\)?/g,ii=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,nr=/\w*$/,Su=/^[-+]0x[0-9a-f]+$/i,Ms=/^0b[01]+$/i,Si=/^\[object .+?Constructor\]$/,Ba=/^0o[0-7]+$/i,Xl=/^(?:0|[1-9]\d*)$/,Yr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ls=/($^)/,$a=/['\n\r\u2028\u2029\\]/g,ma="\\ud800-\\udfff",wo="\\u0300-\\u036f",ga="\\ufe20-\\ufe2f",mr="\\u20d0-\\u20ff",Sl=wo+ga+mr,us="\\u2700-\\u27bf",Xo="a-z\\xdf-\\xf6\\xf8-\\xff",no="\\xac\\xb1\\xd7\\xf7",El="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",YA="\\u2000-\\u206f",Bl=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Eu="A-Z\\xc0-\\xd6\\xd8-\\xde",na="\\ufe0e\\ufe0f",Jo=no+El+YA+Bl,Bu="[']",Ol="["+ma+"]",Ou="["+Jo+"]",Jl="["+Sl+"]",Zu="\\d+",VA="["+us+"]",ia="["+Xo+"]",Bc="[^"+ma+Jo+Zu+us+Xo+Eu+"]",Il="\\ud83c[\\udffb-\\udfff]",Oc="(?:"+Jl+"|"+Il+")",eu="[^"+ma+"]",Rs="(?:\\ud83c[\\udde6-\\uddff]){2}",ws="[\\ud800-\\udbff][\\udc00-\\udfff]",So="["+Eu+"]",Ps="\\u200d",iA="(?:"+ia+"|"+Bc+")",Ws="(?:"+So+"|"+Bc+")",Ha="(?:"+Bu+"(?:d|ll|m|re|s|t|ve))?",tu="(?:"+Bu+"(?:D|LL|M|RE|S|T|VE))?",Yi=Oc+"?",Qs="["+na+"]?",zi="(?:"+Ps+"(?:"+[eu,Rs,ws].join("|")+")"+Qs+Yi+")*",Vr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",yo="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Eo=Qs+Yi+zi,io="(?:"+[VA,Rs,ws].join("|")+")"+Eo,Lo="(?:"+[eu+Jl+"?",Jl,Rs,ws,Ol].join("|")+")",gr=RegExp(Bu,"g"),Ic=RegExp(Jl,"g"),Bo=RegExp(Il+"(?="+Il+")|"+Lo+Eo,"g"),po=RegExp([So+"?"+ia+"+"+Ha+"(?="+[Ou,So,"$"].join("|")+")",Ws+"+"+tu+"(?="+[Ou,So+iA,"$"].join("|")+")",So+"?"+iA+"+"+Ha,So+"+"+tu,yo,Vr,Zu,io].join("|"),"g"),es=RegExp("["+Ps+ma+Sl+na+"]"),Ls=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Us=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Rr=-1,_r={};_r[ce]=_r[Pe]=_r[tt]=_r[xt]=_r[It]=_r[_n]=_r[Xe]=_r[ae]=_r[he]=!0,_r[st]=_r[Et]=_r[be]=_r[ke]=_r[re]=_r[Oe]=_r[Ye]=_r[ft]=_r[gt]=_r[Lt]=_r[Zt]=_r[fi]=_r[Rn]=_r[Dn]=_r[En]=!1;var yr={};yr[st]=yr[Et]=yr[be]=yr[re]=yr[ke]=yr[Oe]=yr[ce]=yr[Pe]=yr[tt]=yr[xt]=yr[It]=yr[gt]=yr[Lt]=yr[Zt]=yr[fi]=yr[Rn]=yr[Dn]=yr[wn]=yr[_n]=yr[Xe]=yr[ae]=yr[he]=!0,yr[Ye]=yr[ft]=yr[En]=!1;var J={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},ge={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ge={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},bt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},bn=parseFloat,Xt=parseInt,hi=typeof window=="object"&&window&&window.Object===Object&&window,Pn=typeof self=="object"&&self&&self.Object===Object&&self,Ci=hi||Pn||Function("return this")(),ni=e&&!e.nodeType&&e,Hi=ni&&!0&&n&&!n.nodeType&&n,xr=Hi&&Hi.exports===ni,ir=xr&&hi.process,Zi=(function(){try{var Ot=Hi&&Hi.require&&Hi.require("util").types;return Ot||ir&&ir.binding&&ir.binding("util")}catch{}})(),Or=Zi&&Zi.isArrayBuffer,Ks=Zi&&Zi.isDate,Oo=Zi&&Zi.isMap,Oa=Zi&&Zi.isRegExp,Za=Zi&&Zi.isSet,Uo=Zi&&Zi.isTypedArray;function ts(Ot,ln,Rt){switch(Rt.length){case 0:return Ot.call(ln);case 1:return Ot.call(ln,Rt[0]);case 2:return Ot.call(ln,Rt[0],Rt[1]);case 3:return Ot.call(ln,Rt[0],Rt[1],Rt[2])}return Ot.apply(ln,Rt)}function q1(Ot,ln,Rt,ri){for(var er=-1,Mr=Ot==null?0:Ot.length;++er<Mr;){var Ss=Ot[er];ln(ri,Ss,Rt(Ss),Ot)}return ri}function Io(Ot,ln){for(var Rt=-1,ri=Ot==null?0:Ot.length;++Rt<ri&&ln(Ot[Rt],Rt,Ot)!==!1;);return Ot}function ya(Ot,ln){for(var Rt=Ot==null?0:Ot.length;Rt--&&ln(Ot[Rt],Rt,Ot)!==!1;);return Ot}function Xu(Ot,ln){for(var Rt=-1,ri=Ot==null?0:Ot.length;++Rt<ri;)if(!ln(Ot[Rt],Rt,Ot))return!1;return!0}function Iu(Ot,ln){for(var Rt=-1,ri=Ot==null?0:Ot.length,er=0,Mr=[];++Rt<ri;){var Ss=Ot[Rt];ln(Ss,Rt,Ot)&&(Mr[er++]=Ss)}return Mr}function Cf(Ot,ln){var Rt=Ot==null?0:Ot.length;return!!Rt&&Sh(Ot,ln,0)>-1}function _f(Ot,ln,Rt){for(var ri=-1,er=Ot==null?0:Ot.length;++ri<er;)if(Rt(ln,Ot[ri]))return!0;return!1}function $r(Ot,ln){for(var Rt=-1,ri=Ot==null?0:Ot.length,er=Array(ri);++Rt<ri;)er[Rt]=ln(Ot[Rt],Rt,Ot);return er}function Tc(Ot,ln){for(var Rt=-1,ri=ln.length,er=Ot.length;++Rt<ri;)Ot[er+Rt]=ln[Rt];return Ot}function Ep(Ot,ln,Rt,ri){var er=-1,Mr=Ot==null?0:Ot.length;for(ri&&Mr&&(Rt=Ot[++er]);++er<Mr;)Rt=ln(Rt,Ot[er],er,Ot);return Rt}function Y1(Ot,ln,Rt,ri){var er=Ot==null?0:Ot.length;for(ri&&er&&(Rt=Ot[--er]);er--;)Rt=ln(Rt,Ot[er],er,Ot);return Rt}function Hm(Ot,ln){for(var Rt=-1,ri=Ot==null?0:Ot.length;++Rt<ri;)if(ln(Ot[Rt],Rt,Ot))return!0;return!1}var Zm=$A("length");function Xm(Ot){return Ot.split("")}function nu(Ot){return Ot.match(tr)||[]}function Bp(Ot,ln,Rt){var ri;return Rt(Ot,function(er,Mr,Ss){if(ln(er,Mr,Ss))return ri=Mr,!1}),ri}function rA(Ot,ln,Rt,ri){for(var er=Ot.length,Mr=Rt+(ri?1:-1);ri?Mr--:++Mr<er;)if(ln(Ot[Mr],Mr,Ot))return Mr;return-1}function Sh(Ot,ln,Rt){return ln===ln?O0(Ot,ln,Rt):rA(Ot,kc,Rt)}function Op(Ot,ln,Rt,ri){for(var er=Rt-1,Mr=Ot.length;++er<Mr;)if(ri(Ot[er],ln))return er;return-1}function kc(Ot){return Ot!==Ot}function Jm(Ot,ln){var Rt=Ot==null?0:Ot.length;return Rt?Eh(Ot,ln)/Rt:De}function $A(Ot){return function(ln){return ln==null?t:ln[Ot]}}function Cd(Ot){return function(ln){return Ot==null?t:Ot[ln]}}function oA(Ot,ln,Rt,ri,er){return er(Ot,function(Mr,Ss,vo){Rt=ri?(ri=!1,Mr):ln(Rt,Mr,Ss,vo)}),Rt}function V1(Ot,ln){var Rt=Ot.length;for(Ot.sort(ln);Rt--;)Ot[Rt]=Ot[Rt].value;return Ot}function Eh(Ot,ln){for(var Rt,ri=-1,er=Ot.length;++ri<er;){var Mr=ln(Ot[ri]);Mr!==t&&(Rt=Rt===t?Mr:Rt+Mr)}return Rt}function Ip(Ot,ln){for(var Rt=-1,ri=Array(Ot);++Rt<Ot;)ri[Rt]=ln(Rt);return ri}function _d(Ot,ln){return $r(ln,function(Rt){return[Rt,Ot[Rt]]})}function Bh(Ot){return Ot&&Ot.slice(0,Tl(Ot)+1).replace(Mi,"")}function iu(Ot){return function(ln){return Ot(ln)}}function w0(Ot,ln){return $r(ln,function(Rt){return Ot[Rt]})}function xf(Ot,ln){return Ot.has(ln)}function Tp(Ot,ln){for(var Rt=-1,ri=Ot.length;++Rt<ri&&Sh(ln,Ot[Rt],0)>-1;);return Rt}function eg(Ot,ln){for(var Rt=Ot.length;Rt--&&Sh(ln,Ot[Rt],0)>-1;);return Rt}function xd(Ot,ln){for(var Rt=Ot.length,ri=0;Rt--;)Ot[Rt]===ln&&++ri;return ri}var Md=Cd(J),S0=Cd(ge);function sA(Ot){return"\\"+bt[Ot]}function E0(Ot,ln){return Ot==null?t:Ot[ln]}function Oh(Ot){return es.test(Ot)}function wd(Ot){return Ls.test(Ot)}function Mf(Ot){for(var ln,Rt=[];!(ln=Ot.next()).done;)Rt.push(ln.value);return Rt}function Ih(Ot){var ln=-1,Rt=Array(Ot.size);return Ot.forEach(function(ri,er){Rt[++ln]=[er,ri]}),Rt}function B0(Ot,ln){return function(Rt){return Ot(ln(Rt))}}function HA(Ot,ln){for(var Rt=-1,ri=Ot.length,er=0,Mr=[];++Rt<ri;){var Ss=Ot[Rt];(Ss===ln||Ss===y)&&(Ot[Rt]=y,Mr[er++]=Rt)}return Mr}function kp(Ot){var ln=-1,Rt=Array(Ot.size);return Ot.forEach(function(ri){Rt[++ln]=ri}),Rt}function tg(Ot){var ln=-1,Rt=Array(Ot.size);return Ot.forEach(function(ri){Rt[++ln]=[ri,ri]}),Rt}function O0(Ot,ln,Rt){for(var ri=Rt-1,er=Ot.length;++ri<er;)if(Ot[ri]===ln)return ri;return-1}function I0(Ot,ln,Rt){for(var ri=Rt+1;ri--;)if(Ot[ri]===ln)return ri;return ri}function Sd(Ot){return Oh(Ot)?ig(Ot):Zm(Ot)}function Wo(Ot){return Oh(Ot)?rg(Ot):Xm(Ot)}function Tl(Ot){for(var ln=Ot.length;ln--&&nn.test(Ot.charAt(ln)););return ln}var ng=Cd(Ge);function ig(Ot){for(var ln=Bo.lastIndex=0;Bo.test(Ot);)++ln;return ln}function rg(Ot){return Ot.match(Bo)||[]}function og(Ot){return Ot.match(po)||[]}var Dp=(function Ot(ln){ln=ln==null?Ci:Ju.defaults(Ci.Object(),ln,Ju.pick(Ci,Us));var Rt=ln.Array,ri=ln.Date,er=ln.Error,Mr=ln.Function,Ss=ln.Math,vo=ln.Object,Ed=ln.RegExp,aA=ln.String,hl=ln.TypeError,Bd=Rt.prototype,Th=Mr.prototype,lA=vo.prototype,ZA=ln["__core-js_shared__"],kl=Th.toString,mo=lA.hasOwnProperty,T0=0,wf=(function(){var h=/[^.]+$/.exec(ZA&&ZA.keys&&ZA.keys.IE_PROTO||"");return h?"Symbol(src)_1."+h:""})(),va=lA.toString,Od=kl.call(vo),Dl=Ci._,uA=Ed("^"+kl.call(mo).replace(ui,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),XA=xr?ln.Buffer:t,ec=ln.Symbol,tc=ln.Uint8Array,JA=XA?XA.allocUnsafe:t,Dc=B0(vo.getPrototypeOf,vo),Rp=vo.create,rr=lA.propertyIsEnumerable,nc=Bd.splice,$1=ec?ec.isConcatSpreadable:t,Ga=ec?ec.iterator:t,Tu=ec?ec.toStringTag:t,ru=(function(){try{var h=Ah(vo,"defineProperty");return h({},"",{}),h}catch{}})(),H1=ln.clearTimeout!==Ci.clearTimeout&&ln.clearTimeout,Pp=ri&&ri.now!==Ci.Date.now&&ri.now,Id=ln.setTimeout!==Ci.setTimeout&&ln.setTimeout,eh=Ss.ceil,kh=Ss.floor,Dh=vo.getOwnPropertySymbols,Rh=XA?XA.isBuffer:t,dl=ln.isFinite,Td=Bd.join,th=B0(vo.keys,vo),cs=Ss.max,Fs=Ss.min,Xa=ri.now,Rl=ln.parseInt,cA=Ss.random,ou=Bd.reverse,ic=Ah(ln,"DataView"),Pl=Ah(ln,"Map"),Ph=Ah(ln,"Promise"),Rc=Ah(ln,"Set"),Lh=Ah(ln,"WeakMap"),kd=Ah(vo,"create"),zs=Lh&&new Lh,so={},Pr=Au(ic),AA=Au(Pl),Nr=Au(Ph),Pc=Au(Rc),ra=Au(Lh),nh=ec?ec.prototype:t,rc=nh?nh.valueOf:t,Uh=nh?nh.toString:t;function Ne(h){if($s(h)&&!lr(h)&&!(h instanceof sr)){if(h instanceof fl)return h;if(mo.call(h,"__wrapped__"))return uy(h)}return new fl(h)}var hA=(function(){function h(){}return function(g){if(!Ns(g))return{};if(Rp)return Rp(g);h.prototype=g;var w=new h;return h.prototype=t,w}})();function oc(){}function fl(h,g){this.__wrapped__=h,this.__actions__=[],this.__chain__=!!g,this.__index__=0,this.__values__=t}Ne.templateSettings={escape:Bt,evaluate:kt,interpolate:sn,variable:"",imports:{_:Ne}},Ne.prototype=oc.prototype,Ne.prototype.constructor=Ne,fl.prototype=hA(oc.prototype),fl.prototype.constructor=fl;function sr(h){this.__wrapped__=h,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ie,this.__views__=[]}function Lc(){var h=new sr(this.__wrapped__);return h.__actions__=Gr(this.__actions__),h.__dir__=this.__dir__,h.__filtered__=this.__filtered__,h.__iteratees__=Gr(this.__iteratees__),h.__takeCount__=this.__takeCount__,h.__views__=Gr(this.__views__),h}function dA(){if(this.__filtered__){var h=new sr(this);h.__dir__=-1,h.__filtered__=!0}else h=this.clone(),h.__dir__*=-1;return h}function ku(){var h=this.__wrapped__.value(),g=this.__dir__,w=lr(h),k=g<0,F=w?h.length:0,j=N2(0,F,this.__views__),H=j.start,ne=j.end,ie=ne-H,Ae=k?ne:H-1,de=this.__iteratees__,Me=de.length,We=0,Ue=Fs(ie,this.__takeCount__);if(!w||!k&&F==ie&&Ue==ie)return Ct(h,this.__actions__);var je=[];e:for(;ie--&&We<Ue;){Ae+=g;for(var ot=-1,nt=h[Ae];++ot<Me;){var Mt=de[ot],Vt=Mt.iteratee,Jt=Mt.type,on=Vt(nt);if(Jt==Fe)nt=on;else if(!on){if(Jt==Be)continue e;break e}}je[We++]=nt}return je}sr.prototype=hA(oc.prototype),sr.prototype.constructor=sr;function fA(h){var g=-1,w=h==null?0:h.length;for(this.clear();++g<w;){var k=h[g];this.set(k[0],k[1])}}function pA(){this.__data__=kd?kd(null):{},this.size=0}function Kh(h){var g=this.has(h)&&delete this.__data__[h];return this.size-=g?1:0,g}function Lp(h){var g=this.__data__;if(kd){var w=g[h];return w===c?t:w}return mo.call(g,h)?g[h]:t}function ih(h){var g=this.__data__;return kd?g[h]!==t:mo.call(g,h)}function Ia(h,g){var w=this.__data__;return this.size+=this.has(h)?0:1,w[h]=kd&&g===t?c:g,this}fA.prototype.clear=pA,fA.prototype.delete=Kh,fA.prototype.get=Lp,fA.prototype.has=ih,fA.prototype.set=Ia;function Ja(h){var g=-1,w=h==null?0:h.length;for(this.clear();++g<w;){var k=h[g];this.set(k[0],k[1])}}function k0(){this.__data__=[],this.size=0}function Z1(h){var g=this.__data__,w=Ll(g,h);if(w<0)return!1;var k=g.length-1;return w==k?g.pop():nc.call(g,w,1),--this.size,!0}function X1(h){var g=this.__data__,w=Ll(g,h);return w<0?t:g[w][1]}function sg(h){return Ll(this.__data__,h)>-1}function oa(h,g){var w=this.__data__,k=Ll(w,h);return k<0?(++this.size,w.push([h,g])):w[k][1]=g,this}Ja.prototype.clear=k0,Ja.prototype.delete=Z1,Ja.prototype.get=X1,Ja.prototype.has=sg,Ja.prototype.set=oa;function qs(h){var g=-1,w=h==null?0:h.length;for(this.clear();++g<w;){var k=h[g];this.set(k[0],k[1])}}function Ta(){this.size=0,this.__data__={hash:new fA,map:new(Pl||Ja),string:new fA}}function mA(h){var g=U0(this,h).delete(h);return this.size-=g?1:0,g}function As(h){return U0(this,h).get(h)}function gA(h){return U0(this,h).has(h)}function sc(h,g){var w=U0(this,h),k=w.size;return w.set(h,g),this.size+=w.size==k?0:1,this}qs.prototype.clear=Ta,qs.prototype.delete=mA,qs.prototype.get=As,qs.prototype.has=gA,qs.prototype.set=sc;function Dd(h){var g=-1,w=h==null?0:h.length;for(this.__data__=new qs;++g<w;)this.add(h[g])}function J1(h){return this.__data__.set(h,c),this}function Up(h){return this.__data__.has(h)}Dd.prototype.add=Dd.prototype.push=J1,Dd.prototype.has=Up;function Du(h){var g=this.__data__=new Ja(h);this.size=g.size}function yA(){this.__data__=new Ja,this.size=0}function Rd(h){var g=this.__data__,w=g.delete(h);return this.size=g.size,w}function su(h){return this.__data__.get(h)}function Gn(h){return this.__data__.has(h)}function Uc(h,g){var w=this.__data__;if(w instanceof Ja){var k=w.__data__;if(!Pl||k.length<r-1)return k.push([h,g]),this.size=++w.size,this;w=this.__data__=new qs(k)}return w.set(h,g),this.size=w.size,this}Du.prototype.clear=yA,Du.prototype.delete=Rd,Du.prototype.get=su,Du.prototype.has=Gn,Du.prototype.set=Uc;function Sf(h,g){var w=lr(h),k=!w&&Gf(h),F=!w&&!k&&Xh(h),j=!w&&!k&&!F&&ed(h),H=w||k||F||j,ne=H?Ip(h.length,aA):[],ie=ne.length;for(var Ae in h)(g||mo.call(h,Ae))&&!(H&&(Ae=="length"||F&&(Ae=="offset"||Ae=="parent")||j&&(Ae=="buffer"||Ae=="byteLength"||Ae=="byteOffset")||SA(Ae,ie)))&&ne.push(Ae);return ne}function Ef(h){var g=h.length;return g?h[M(0,g-1)]:t}function Fh(h,g){return fg(Gr(h),ac(g,0,h.length))}function vA(h){return fg(Gr(h))}function Bf(h,g,w){(w!==t&&!Fu(h[g],w)||w===t&&!(g in h))&&Ul(h,g,w)}function Kc(h,g,w){var k=h[g];(!(mo.call(h,g)&&Fu(k,w))||w===t&&!(g in h))&&Ul(h,g,w)}function Ll(h,g){for(var w=h.length;w--;)if(Fu(h[w][0],g))return w;return-1}function D0(h,g,w,k){return tl(h,function(F,j,H){g(k,F,w(F),H)}),k}function Pd(h,g){return h&&fs(g,vl(g),h)}function rh(h,g){return h&&fs(g,sl(g),h)}function Ul(h,g,w){g=="__proto__"&&ru?ru(h,g,{configurable:!0,enumerable:!0,value:w,writable:!0}):h[g]=w}function Ld(h,g){for(var w=-1,k=g.length,F=Rt(k),j=h==null;++w<k;)F[w]=j?t:Hs(h,g[w]);return F}function ac(h,g,w){return h===h&&(w!==t&&(h=h<=w?h:w),g!==t&&(h=h>=g?h:g)),h}function el(h,g,w,k,F,j){var H,ne=g&_,ie=g&E,Ae=g&I;if(w&&(H=F?w(h,k,F,j):w(h)),H!==t)return H;if(!Ns(h))return h;var de=lr(h);if(de){if(H=Lv(h),!ne)return Gr(h,H)}else{var Me=Wl(h),We=Me==ft||Me==dt;if(Xh(h))return Ni(h,ne);if(Me==Zt||Me==st||We&&!F){if(H=ie||We?{}:ry(h),!ne)return ie?zc(h,rh(H,h)):xA(h,Pd(H,h))}else{if(!yr[Me])return F?h:{};H=GC(h,Me,ne)}}j||(j=new Du);var Ue=j.get(h);if(Ue)return Ue;j.set(h,H),lm(h)?h.forEach(function(nt){H.add(el(nt,g,w,nt,h,j))}):ob(h)&&h.forEach(function(nt,Mt){H.set(Mt,el(nt,g,w,Mt,h,j))});var je=Ae?ie?Pv:cg:ie?sl:vl,ot=de?t:je(h);return Io(ot||h,function(nt,Mt){ot&&(Mt=nt,nt=h[Mt]),Kc(H,Mt,el(nt,g,w,Mt,h,j))}),H}function ag(h){var g=vl(h);return function(w){return bA(w,h,g)}}function bA(h,g,w){var k=w.length;if(h==null)return!k;for(h=vo(h);k--;){var F=w[k],j=g[F],H=h[F];if(H===t&&!(F in h)||!j(H))return!1}return!0}function R0(h,g,w){if(typeof h!="function")throw new hl(s);return j0(function(){h.apply(t,w)},g)}function Ru(h,g,w,k){var F=-1,j=Cf,H=!0,ne=h.length,ie=[],Ae=g.length;if(!ne)return ie;w&&(g=$r(g,iu(w))),k?(j=_f,H=!1):g.length>=r&&(j=xf,H=!1,g=new Dd(g));e:for(;++F<ne;){var de=h[F],Me=w==null?de:w(de);if(de=k||de!==0?de:0,H&&Me===Me){for(var We=Ae;We--;)if(g[We]===Me)continue e;ie.push(de)}else j(g,Me,k)||ie.push(de)}return ie}var tl=uh(lc),ao=uh(au,!0);function zh(h,g){var w=!0;return tl(h,function(k,F,j){return w=!!g(k,F,j),w}),w}function Kl(h,g,w){for(var k=-1,F=h.length;++k<F;){var j=h[k],H=g(j);if(H!=null&&(ne===t?H===H&&!du(H):w(H,ne)))var ne=H,ie=j}return ie}function oh(h,g,w,k){var F=h.length;for(w=Oi(w),w<0&&(w=-w>F?0:F+w),k=k===t||k>F?F:Oi(k),k<0&&(k+=F),k=w>k?0:Ca(k);w<k;)h[w++]=g;return h}function Of(h,g){var w=[];return tl(h,function(k,F,j){g(k,F,j)&&w.push(k)}),w}function ba(h,g,w,k,F){var j=-1,H=h.length;for(w||(w=oy),F||(F=[]);++j<H;){var ne=h[j];g>0&&w(ne)?g>1?ba(ne,g-1,w,k,F):Tc(F,ne):k||(F[F.length]=ne)}return F}var sh=uu(),jh=uu(!0);function lc(h,g){return h&&sh(h,g,vl)}function au(h,g){return h&&jh(h,g,vl)}function Fl(h,g){return Iu(g,function(w){return hu(h[w])})}function Vn(h,g){g=pn(g,h);for(var w=0,k=g.length;h!=null&&w<k;)h=h[pl(g[w++])];return w&&w==k?h:t}function wi(h,g,w){var k=g(h);return lr(h)?k:Tc(k,w(h))}function sa(h){return h==null?h===t?qn:Tt:Tu&&Tu in vo(h)?Rf(h):ay(h)}function If(h,g){return h>g}function nl(h,g){return h!=null&&mo.call(h,g)}function Qo(h,g){return h!=null&&g in vo(h)}function ka(h,g,w){return h>=Fs(g,w)&&h<cs(g,w)}function Tf(h,g,w){for(var k=w?_f:Cf,F=h[0].length,j=h.length,H=j,ne=Rt(j),ie=1/0,Ae=[];H--;){var de=h[H];H&&g&&(de=$r(de,iu(g))),ie=Fs(de.length,ie),ne[H]=!w&&(g||F>=120&&de.length>=120)?new Dd(H&&de):t}de=h[0];var Me=-1,We=ne[0];e:for(;++Me<F&&Ae.length<ie;){var Ue=de[Me],je=g?g(Ue):Ue;if(Ue=w||Ue!==0?Ue:0,!(We?xf(We,je):k(Ae,je,w))){for(H=j;--H;){var ot=ne[H];if(!(ot?xf(ot,je):k(h[H],je,w)))continue e}We&&We.push(je),Ae.push(Ue)}}return Ae}function ey(h,g,w,k){return lc(h,function(F,j,H){g(k,w(F),j,H)}),k}function uc(h,g,w){g=pn(g,h),h=Vp(h,g);var k=h==null?h:h[pl(Os(g))];return k==null?t:ts(k,h,w)}function lu(h){return $s(h)&&sa(h)==st}function hs(h){return $s(h)&&sa(h)==be}function lo(h){return $s(h)&&sa(h)==Oe}function Hr(h,g,w,k,F){return h===g?!0:h==null||g==null||!$s(h)&&!$s(g)?h!==h&&g!==g:ar(h,g,w,k,Hr,F)}function ar(h,g,w,k,F,j){var H=lr(h),ne=lr(g),ie=H?Et:Wl(h),Ae=ne?Et:Wl(g);ie=ie==st?Zt:ie,Ae=Ae==st?Zt:Ae;var de=ie==Zt,Me=Ae==Zt,We=ie==Ae;if(We&&Xh(h)){if(!Xh(g))return!1;H=!0,de=!1}if(We&&!de)return j||(j=new Du),H||ed(h)?ug(h,g,w,k,F,j):L0(h,g,ie,w,k,F,j);if(!(w&P)){var Ue=de&&mo.call(h,"__wrapped__"),je=Me&&mo.call(g,"__wrapped__");if(Ue||je){var ot=Ue?h.value():h,nt=je?g.value():g;return j||(j=new Du),F(ot,nt,w,k,j)}}return We?(j||(j=new Du),ny(h,g,w,k,F,j)):!1}function uo(h){return $s(h)&&Wl(h)==gt}function ns(h,g,w,k){var F=w.length,j=F,H=!k;if(h==null)return!j;for(h=vo(h);F--;){var ne=w[F];if(H&&ne[2]?ne[1]!==h[ne[0]]:!(ne[0]in h))return!1}for(;++F<j;){ne=w[F];var ie=ne[0],Ae=h[ie],de=ne[1];if(H&&ne[2]){if(Ae===t&&!(ie in h))return!1}else{var Me=new Du;if(k)var We=k(Ae,de,ie,h,g,Me);if(!(We===t?Hr(de,Ae,P|K,k,Me):We))return!1}}return!0}function Ud(h){if(!Ns(h)||hg(h))return!1;var g=hu(h)?uA:Si;return g.test(Au(h))}function Nh(h){return $s(h)&&sa(h)==fi}function zl(h){return $s(h)&&Wl(h)==Rn}function ah(h){return $s(h)&&Wf(h.length)&&!!_r[sa(h)]}function CA(h){return typeof h=="function"?h:h==null?fu:typeof h=="object"?lr(h)?Fp(h[0],h[1]):_A(h):Qe(h)}function Fc(h){if(!Yp(h))return th(h);var g=[];for(var w in vo(h))mo.call(h,w)&&w!="constructor"&&g.push(w);return g}function Kp(h){if(!Ns(h))return Nd(h);var g=Yp(h),w=[];for(var k in h)k=="constructor"&&(g||!mo.call(h,k))||w.push(k);return w}function is(h,g){return h<g}function lh(h,g){var w=-1,k=fc(h)?Rt(h.length):[];return tl(h,function(F,j,H){k[++w]=g(F,j,H)}),k}function _A(h){var g=jd(h);return g.length==1&&g[0][2]?sy(g[0][0],g[0][1]):function(w){return w===h||ns(w,h,g)}}function Fp(h,g){return Qp(h)&&EA(g)?sy(pl(h),g):function(w){var k=Hs(w,h);return k===t&&k===g?Gi(w,h):Hr(g,k,P|K)}}function Gh(h,g,w,k,F){h!==g&&sh(g,function(j,H){if(F||(F=new Du),Ns(j))Kd(h,g,H,w,Gh,k,F);else{var ne=k?k(os(h,H),j,H+"",h,g,F):t;ne===t&&(ne=j),Bf(h,H,ne)}},sl)}function Kd(h,g,w,k,F,j,H){var ne=os(h,w),ie=os(g,w),Ae=H.get(ie);if(Ae){Bf(h,w,Ae);return}var de=j?j(ne,ie,w+"",h,g,H):t,Me=de===t;if(Me){var We=lr(ie),Ue=!We&&Xh(ie),je=!We&&!Ue&&ed(ie);de=ie,We||Ue||je?lr(ne)?de=ne:La(ne)?de=Gr(ne):Ue?(Me=!1,de=Ni(ie,!0)):je?(Me=!1,de=bo(ie,!0)):de=[]:Jh(ie)||Gf(ie)?(de=ne,Gf(ne)?de=r1(ne):(!Ns(ne)||hu(ne))&&(de=ry(ie))):Me=!1}Me&&(H.set(ie,de),F(de,ie,k,j,H),H.delete(ie)),Bf(h,w,de)}function Fd(h,g){var w=h.length;if(w)return g+=g<0?w:0,SA(g,w)?h[g]:t}function kf(h,g,w){g.length?g=$r(g,function(j){return lr(j)?function(H){return Vn(H,j.length===1?j[0]:j)}:j}):g=[fu];var k=-1;g=$r(g,iu(ki()));var F=lh(h,function(j,H,ne){var ie=$r(g,function(Ae){return Ae(j)});return{criteria:ie,index:++k,value:j}});return V1(F,function(j,H){return rs(j,H,w)})}function Df(h,g){return Da(h,g,function(w,k){return Gi(h,k)})}function Da(h,g,w){for(var k=-1,F=g.length,j={};++k<F;){var H=g[k],ne=Vn(h,H);w(ne,H)&&oe(j,pn(H,h),ne)}return j}function T(h){return function(g){return Vn(g,h)}}function u(h,g,w,k){var F=k?Op:Sh,j=-1,H=g.length,ne=h;for(h===g&&(g=Gr(g)),w&&(ne=$r(h,iu(w)));++j<H;)for(var ie=0,Ae=g[j],de=w?w(Ae):Ae;(ie=F(ne,de,ie,k))>-1;)ne!==h&&nc.call(ne,ie,1),nc.call(h,ie,1);return h}function m(h,g){for(var w=h?g.length:0,k=w-1;w--;){var F=g[w];if(w==k||F!==j){var j=F;SA(F)?nc.call(h,F,1):At(h,F)}}return h}function M(h,g){return h+kh(cA()*(g-h+1))}function O(h,g,w,k){for(var F=-1,j=cs(eh((g-h)/(w||1)),0),H=Rt(j);j--;)H[k?j:++F]=h,h+=w;return H}function D(h,g){var w="";if(!h||g<1||g>ut)return w;do g%2&&(w+=h),g=kh(g/2),g&&(h+=h);while(g);return w}function U(h,g){return ly(Kv(h,g,fu),h+"")}function G(h){return Ef(Og(h))}function q(h,g){var w=Og(h);return fg(w,ac(g,0,w.length))}function oe(h,g,w,k){if(!Ns(h))return h;g=pn(g,h);for(var F=-1,j=g.length,H=j-1,ne=h;ne!=null&&++F<j;){var ie=pl(g[F]),Ae=w;if(ie==="__proto__"||ie==="constructor"||ie==="prototype")return h;if(F!=H){var de=ne[ie];Ae=k?k(de,ie,ne):t,Ae===t&&(Ae=Ns(de)?de:SA(g[F+1])?[]:{})}Kc(ne,ie,Ae),ne=ne[ie]}return h}var le=zs?function(h,g){return zs.set(h,g),h}:fu,me=ru?function(h,g){return ru(h,"toString",{configurable:!0,enumerable:!1,value:hm(g),writable:!0})}:fu;function pe(h){return fg(Og(h))}function xe(h,g,w){var k=-1,F=h.length;g<0&&(g=-g>F?0:F+g),w=w>F?F:w,w<0&&(w+=F),F=g>w?0:w-g>>>0,g>>>=0;for(var j=Rt(F);++k<F;)j[k]=h[k+g];return j}function Le(h,g){var w;return tl(h,function(k,F,j){return w=g(k,F,j),!w}),!!w}function Ve(h,g,w){var k=0,F=h==null?k:h.length;if(typeof g=="number"&&g===g&&F<=Te){for(;k<F;){var j=k+F>>>1,H=h[j];H!==null&&!du(H)&&(w?H<=g:H<g)?k=j+1:F=j}return F}return He(h,g,fu,w)}function He(h,g,w,k){var F=0,j=h==null?0:h.length;if(j===0)return 0;g=w(g);for(var H=g!==g,ne=g===null,ie=du(g),Ae=g===t;F<j;){var de=kh((F+j)/2),Me=w(h[de]),We=Me!==t,Ue=Me===null,je=Me===Me,ot=du(Me);if(H)var nt=k||je;else Ae?nt=je&&(k||We):ne?nt=je&&We&&(k||!Ue):ie?nt=je&&We&&!Ue&&(k||!ot):Ue||ot?nt=!1:nt=k?Me<=g:Me<g;nt?F=de+1:j=de}return Fs(j,ze)}function Ze(h,g){for(var w=-1,k=h.length,F=0,j=[];++w<k;){var H=h[w],ne=g?g(H):H;if(!w||!Fu(ne,ie)){var ie=ne;j[F++]=H===0?0:H}}return j}function et(h){return typeof h=="number"?h:du(h)?De:+h}function lt(h){if(typeof h=="string")return h;if(lr(h))return $r(h,lt)+"";if(du(h))return Uh?Uh.call(h):"";var g=h+"";return g=="0"&&1/h==-qe?"-0":g}function Je(h,g,w){var k=-1,F=Cf,j=h.length,H=!0,ne=[],ie=ne;if(w)H=!1,F=_f;else if(j>=r){var Ae=g?null:lg(h);if(Ae)return kp(Ae);H=!1,F=xf,ie=new Dd}else ie=g?[]:ne;e:for(;++k<j;){var de=h[k],Me=g?g(de):de;if(de=w||de!==0?de:0,H&&Me===Me){for(var We=ie.length;We--;)if(ie[We]===Me)continue e;g&&ie.push(Me),ne.push(de)}else F(ie,Me,w)||(ie!==ne&&ie.push(Me),ne.push(de))}return ne}function At(h,g){return g=pn(g,h),h=Vp(h,g),h==null||delete h[pl(Os(g))]}function pt(h,g,w,k){return oe(h,g,w(Vn(h,g)),k)}function it(h,g,w,k){for(var F=h.length,j=k?F:-1;(k?j--:++j<F)&&g(h[j],j,h););return w?xe(h,k?0:j,k?j+1:F):xe(h,k?j+1:0,k?F:j)}function Ct(h,g){var w=h;return w instanceof sr&&(w=w.value()),Ep(g,function(k,F){return F.func.apply(F.thisArg,Tc([k],F.args))},w)}function Nt(h,g,w){var k=h.length;if(k<2)return k?Je(h[0]):[];for(var F=-1,j=Rt(k);++F<k;)for(var H=h[F],ne=-1;++ne<k;)ne!=F&&(j[F]=Ru(j[F]||H,h[ne],g,w));return Je(ba(j,1),g,w)}function Kt(h,g,w){for(var k=-1,F=h.length,j=g.length,H={};++k<F;){var ne=k<j?g[k]:t;w(H,h[k],ne)}return H}function Ft(h){return La(h)?h:[]}function jt(h){return typeof h=="function"?h:fu}function pn(h,g){return lr(h)?h:Qp(h,g)?[h]:Wd(xo(h))}var Sn=U;function rn(h,g,w){var k=h.length;return w=w===t?k:w,!g&&w>=k?h:xe(h,g,w)}var $n=H1||function(h){return Ci.clearTimeout(h)};function Ni(h,g){if(g)return h.slice();var w=h.length,k=JA?JA(w):new h.constructor(w);return h.copy(k),k}function Fi(h){var g=new h.constructor(h.byteLength);return new tc(g).set(new tc(h)),g}function qo(h,g){var w=g?Fi(h.buffer):h.buffer;return new h.constructor(w,h.byteOffset,h.byteLength)}function Ko(h){var g=new h.constructor(h.source,nr.exec(h));return g.lastIndex=h.lastIndex,g}function ds(h){return rc?vo(rc.call(h)):{}}function bo(h,g){var w=g?Fi(h.buffer):h.buffer;return new h.constructor(w,h.byteOffset,h.length)}function Ys(h,g){if(h!==g){var w=h!==t,k=h===null,F=h===h,j=du(h),H=g!==t,ne=g===null,ie=g===g,Ae=du(g);if(!ne&&!Ae&&!j&&h>g||j&&H&&ie&&!ne&&!Ae||k&&H&&ie||!w&&ie||!F)return 1;if(!k&&!j&&!Ae&&h<g||Ae&&w&&F&&!k&&!j||ne&&w&&F||!H&&F||!ie)return-1}return 0}function rs(h,g,w){for(var k=-1,F=h.criteria,j=g.criteria,H=F.length,ne=w.length;++k<H;){var ie=Ys(F[k],j[k]);if(ie){if(k>=ne)return ie;var Ae=w[k];return ie*(Ae=="desc"?-1:1)}}return h.index-g.index}function Es(h,g,w,k){for(var F=-1,j=h.length,H=w.length,ne=-1,ie=g.length,Ae=cs(j-H,0),de=Rt(ie+Ae),Me=!k;++ne<ie;)de[ne]=g[ne];for(;++F<H;)(Me||F<j)&&(de[w[F]]=h[F]);for(;Ae--;)de[ne++]=h[F++];return de}function Bs(h,g,w,k){for(var F=-1,j=h.length,H=-1,ne=w.length,ie=-1,Ae=g.length,de=cs(j-ne,0),Me=Rt(de+Ae),We=!k;++F<de;)Me[F]=h[F];for(var Ue=F;++ie<Ae;)Me[Ue+ie]=g[ie];for(;++H<ne;)(We||F<j)&&(Me[Ue+w[H]]=h[F++]);return Me}function Gr(h,g){var w=-1,k=h.length;for(g||(g=Rt(k));++w<k;)g[w]=h[w];return g}function fs(h,g,w,k){var F=!w;w||(w={});for(var j=-1,H=g.length;++j<H;){var ne=g[j],ie=k?k(w[ne],h[ne],ne,w,h):t;ie===t&&(ie=h[ne]),F?Ul(w,ne,ie):Kc(w,ne,ie)}return w}function xA(h,g){return fs(h,iy(h),g)}function zc(h,g){return fs(h,K0(h),g)}function jc(h,g){return function(w,k){var F=lr(w)?q1:D0,j=g?g():{};return F(w,h,ki(k,2),j)}}function jl(h){return U(function(g,w){var k=-1,F=w.length,j=F>1?w[F-1]:t,H=F>2?w[2]:t;for(j=h.length>3&&typeof j=="function"?(F--,j):t,H&&cu(w[0],w[1],H)&&(j=F<3?t:j,F=1),g=vo(g);++k<F;){var ne=w[k];ne&&h(g,ne,k,j)}return g})}function uh(h,g){return function(w,k){if(w==null)return w;if(!fc(w))return h(w,k);for(var F=w.length,j=g?F:-1,H=vo(w);(g?j--:++j<F)&&k(H[j],j,H)!==!1;);return w}}function uu(h){return function(g,w,k){for(var F=-1,j=vo(g),H=k(g),ne=H.length;ne--;){var ie=H[h?ne:++F];if(w(j[ie],ie,j)===!1)break}return g}}function Nc(h,g,w){var k=g&z,F=Gc(h);function j(){var H=this&&this!==Ci&&this instanceof j?F:h;return H.apply(k?w:this,arguments)}return j}function Nl(h){return function(g){g=xo(g);var w=Oh(g)?Wo(g):t,k=w?w[0]:g.charAt(0),F=w?rn(w,1).join(""):g.slice(1);return k[h]()+F}}function Gl(h){return function(g){return Ep(b_(Xf(g).replace(gr,"")),h,"")}}function Gc(h){return function(){var g=arguments;switch(g.length){case 0:return new h;case 1:return new h(g[0]);case 2:return new h(g[0],g[1]);case 3:return new h(g[0],g[1],g[2]);case 4:return new h(g[0],g[1],g[2],g[3]);case 5:return new h(g[0],g[1],g[2],g[3],g[4]);case 6:return new h(g[0],g[1],g[2],g[3],g[4],g[5]);case 7:return new h(g[0],g[1],g[2],g[3],g[4],g[5],g[6])}var w=hA(h.prototype),k=h.apply(w,g);return Ns(k)?k:w}}function zd(h,g,w){var k=Gc(h);function F(){for(var j=arguments.length,H=Rt(j),ne=j,ie=aa(F);ne--;)H[ne]=arguments[ne];var Ae=j<3&&H[0]!==ie&&H[j-1]!==ie?[]:HA(H,ie);if(j-=Ae.length,j<w)return Wc(h,g,ms,F.placeholder,t,H,Ae,t,t,w-j);var de=this&&this!==Ci&&this instanceof F?k:h;return ts(de,this,H)}return F}function ps(h){return function(g,w,k){var F=vo(g);if(!fc(g)){var j=ki(w,3);g=vl(g),w=function(ne){return j(F[ne],ne,F)}}var H=h(g,w,k);return H>-1?F[j?g[H]:H]:t}}function To(h){return Qh(function(g){var w=g.length,k=w,F=fl.prototype.thru;for(h&&g.reverse();k--;){var j=g[k];if(typeof j!="function")throw new hl(s);if(F&&!H&&Vs(j)=="wrapper")var H=new fl([],!0)}for(k=H?k:w;++k<w;){j=g[k];var ne=Vs(j),ie=ne=="wrapper"?Wp(j):t;ie&&qp(ie[0])&&ie[1]==(W|$|ee|se)&&!ie[4].length&&ie[9]==1?H=H[Vs(ie[0])].apply(H,ie[3]):H=j.length==1&&qp(j)?H[ne]():H.thru(j)}return function(){var Ae=arguments,de=Ae[0];if(H&&Ae.length==1&&lr(de))return H.plant(de).value();for(var Me=0,We=w?g[Me].apply(this,Ae):de;++Me<w;)We=g[Me].call(this,We);return We}})}function ms(h,g,w,k,F,j,H,ne,ie,Ae){var de=g&W,Me=g&z,We=g&Q,Ue=g&($|Z),je=g&ue,ot=We?t:Gc(h);function nt(){for(var Mt=arguments.length,Vt=Rt(Mt),Jt=Mt;Jt--;)Vt[Jt]=arguments[Jt];if(Ue)var on=aa(nt),kn=xd(Vt,on);if(k&&(Vt=Es(Vt,k,F,Ue)),j&&(Vt=Bs(Vt,j,H,Ue)),Mt-=kn,Ue&&Mt<Ae){var An=HA(Vt,on);return Wc(h,g,ms,nt.placeholder,w,Vt,An,ne,ie,Ae-Mt)}var Cn=Me?w:this,en=We?Cn[h]:h;return Mt=Vt.length,ne?Vt=dg(Vt,ne):je&&Mt>1&&Vt.reverse(),de&&ie<Mt&&(Vt.length=ie),this&&this!==Ci&&this instanceof nt&&(en=ot||Gc(en)),en.apply(Cn,Vt)}return nt}function co(h,g){return function(w,k){return ey(w,h,g(k),{})}}function cc(h,g){return function(w,k){var F;if(w===t&&k===t)return g;if(w!==t&&(F=w),k!==t){if(F===t)return k;typeof w=="string"||typeof k=="string"?(w=lt(w),k=lt(k)):(w=et(w),k=et(k)),F=h(w,k)}return F}}function zp(h){return Qh(function(g){return g=$r(g,iu(ki())),U(function(w){var k=this;return h(g,function(F){return ts(F,k,w)})})})}function ch(h,g){g=g===t?" ":lt(g);var w=g.length;if(w<2)return w?D(g,h):g;var k=D(g,eh(h/Sd(g)));return Oh(g)?rn(Wo(k),0,h).join(""):k.slice(0,h)}function P0(h,g,w,k){var F=g&z,j=Gc(h);function H(){for(var ne=-1,ie=arguments.length,Ae=-1,de=k.length,Me=Rt(de+ie),We=this&&this!==Ci&&this instanceof H?j:h;++Ae<de;)Me[Ae]=k[Ae];for(;ie--;)Me[Ae++]=arguments[++ne];return ts(We,F?w:this,Me)}return H}function MA(h){return function(g,w,k){return k&&typeof k!="number"&&cu(g,w,k)&&(w=k=t),g=zu(g),w===t?(w=g,g=0):w=zu(w),k=k===t?g<w?1:-1:zu(k),O(g,w,k,h)}}function jp(h){return function(g,w){return typeof g=="string"&&typeof w=="string"||(g=_o(g),w=_o(w)),h(g,w)}}function Wc(h,g,w,k,F,j,H,ne,ie,Ae){var de=g&$,Me=de?H:t,We=de?t:H,Ue=de?j:t,je=de?t:j;g|=de?ee:X,g&=~(de?X:ee),g&V||(g&=-4);var ot=[h,g,F,Ue,Me,je,We,ne,ie,Ae],nt=w.apply(t,ot);return qp(h)&&qC(nt,ot),nt.placeholder=k,Gd(nt,h,g)}function Wh(h){var g=Ss[h];return function(w,k){if(w=_o(w),k=k==null?0:Fs(Oi(k),292),k&&dl(w)){var F=(xo(w)+"e").split("e"),j=g(F[0]+"e"+(+F[1]+k));return F=(xo(j)+"e").split("e"),+(F[0]+"e"+(+F[1]-k))}return g(w)}}var lg=Rc&&1/kp(new Rc([,-0]))[1]==qe?function(h){return new Rc(h)}:S;function wA(h){return function(g){var w=Wl(g);return w==gt?Ih(g):w==Rn?tg(g):_d(g,h(g))}}function js(h,g,w,k,F,j,H,ne){var ie=g&Q;if(!ie&&typeof h!="function")throw new hl(s);var Ae=k?k.length:0;if(Ae||(g&=-97,k=F=t),H=H===t?H:cs(Oi(H),0),ne=ne===t?ne:Oi(ne),Ae-=F?F.length:0,g&X){var de=k,Me=F;k=F=t}var We=ie?t:Wp(h),Ue=[h,g,w,k,F,de,Me,j,H,ne];if(We&&QC(Ue,We),h=Ue[0],g=Ue[1],w=Ue[2],k=Ue[3],F=Ue[4],ne=Ue[9]=Ue[9]===t?ie?0:h.length:cs(Ue[9]-Ae,0),!ne&&g&($|Z)&&(g&=-25),!g||g==z)var je=Nc(h,g,w);else g==$||g==Z?je=zd(h,g,ne):(g==ee||g==(z|ee))&&!F.length?je=P0(h,g,w,k):je=ms.apply(t,Ue);var ot=We?le:qC;return Gd(ot(je,Ue),h,g)}function Np(h,g,w,k){return h===t||Fu(h,lA[w])&&!mo.call(k,w)?g:h}function Gp(h,g,w,k,F,j){return Ns(h)&&Ns(g)&&(j.set(g,h),Gh(h,g,t,Gp,j),j.delete(g)),h}function ty(h){return Jh(h)?t:h}function ug(h,g,w,k,F,j){var H=w&P,ne=h.length,ie=g.length;if(ne!=ie&&!(H&&ie>ne))return!1;var Ae=j.get(h),de=j.get(g);if(Ae&&de)return Ae==g&&de==h;var Me=-1,We=!0,Ue=w&K?new Dd:t;for(j.set(h,g),j.set(g,h);++Me<ne;){var je=h[Me],ot=g[Me];if(k)var nt=H?k(ot,je,Me,g,h,j):k(je,ot,Me,h,g,j);if(nt!==t){if(nt)continue;We=!1;break}if(Ue){if(!Hm(g,function(Mt,Vt){if(!xf(Ue,Vt)&&(je===Mt||F(je,Mt,w,k,j)))return Ue.push(Vt)})){We=!1;break}}else if(!(je===ot||F(je,ot,w,k,j))){We=!1;break}}return j.delete(h),j.delete(g),We}function L0(h,g,w,k,F,j,H){switch(w){case re:if(h.byteLength!=g.byteLength||h.byteOffset!=g.byteOffset)return!1;h=h.buffer,g=g.buffer;case be:return!(h.byteLength!=g.byteLength||!j(new tc(h),new tc(g)));case ke:case Oe:case Lt:return Fu(+h,+g);case Ye:return h.name==g.name&&h.message==g.message;case fi:case Dn:return h==g+"";case gt:var ne=Ih;case Rn:var ie=k&P;if(ne||(ne=kp),h.size!=g.size&&!ie)return!1;var Ae=H.get(h);if(Ae)return Ae==g;k|=K,H.set(h,g);var de=ug(ne(h),ne(g),k,F,j,H);return H.delete(h),de;case wn:if(rc)return rc.call(h)==rc.call(g)}return!1}function ny(h,g,w,k,F,j){var H=w&P,ne=cg(h),ie=ne.length,Ae=cg(g),de=Ae.length;if(ie!=de&&!H)return!1;for(var Me=ie;Me--;){var We=ne[Me];if(!(H?We in g:mo.call(g,We)))return!1}var Ue=j.get(h),je=j.get(g);if(Ue&&je)return Ue==g&&je==h;var ot=!0;j.set(h,g),j.set(g,h);for(var nt=H;++Me<ie;){We=ne[Me];var Mt=h[We],Vt=g[We];if(k)var Jt=H?k(Vt,Mt,We,g,h,j):k(Mt,Vt,We,h,g,j);if(!(Jt===t?Mt===Vt||F(Mt,Vt,w,k,j):Jt)){ot=!1;break}nt||(nt=We=="constructor")}if(ot&&!nt){var on=h.constructor,kn=g.constructor;on!=kn&&"constructor"in h&&"constructor"in g&&!(typeof on=="function"&&on instanceof on&&typeof kn=="function"&&kn instanceof kn)&&(ot=!1)}return j.delete(h),j.delete(g),ot}function Qh(h){return ly(Kv(h,t,ss),h+"")}function cg(h){return wi(h,vl,iy)}function Pv(h){return wi(h,sl,K0)}var Wp=zs?function(h){return zs.get(h)}:S;function Vs(h){for(var g=h.name+"",w=so[g],k=mo.call(so,g)?w.length:0;k--;){var F=w[k],j=F.func;if(j==null||j==h)return F.name}return g}function aa(h){var g=mo.call(Ne,"placeholder")?Ne:h;return g.placeholder}function ki(){var h=Ne.iteratee||Rg;return h=h===Rg?CA:h,arguments.length?h(arguments[0],arguments[1]):h}function U0(h,g){var w=h.__data__;return z0(g)?w[typeof g=="string"?"string":"hash"]:w.map}function jd(h){for(var g=vl(h),w=g.length;w--;){var k=g[w],F=h[k];g[w]=[k,F,EA(F)]}return g}function Ah(h,g){var w=E0(h,g);return Ud(w)?w:t}function Rf(h){var g=mo.call(h,Tu),w=h[Tu];try{h[Tu]=t;var k=!0}catch{}var F=va.call(h);return k&&(g?h[Tu]=w:delete h[Tu]),F}var iy=Dh?function(h){return h==null?[]:(h=vo(h),Iu(Dh(h),function(g){return rr.call(h,g)}))}:fn,K0=Dh?function(h){for(var g=[];h;)Tc(g,iy(h)),h=Dc(h);return g}:fn,Wl=sa;(ic&&Wl(new ic(new ArrayBuffer(1)))!=re||Pl&&Wl(new Pl)!=gt||Ph&&Wl(Ph.resolve())!=Fn||Rc&&Wl(new Rc)!=Rn||Lh&&Wl(new Lh)!=En)&&(Wl=function(h){var g=sa(h),w=g==Zt?h.constructor:t,k=w?Au(w):"";if(k)switch(k){case Pr:return re;case AA:return gt;case Nr:return Fn;case Pc:return Rn;case ra:return En}return g});function N2(h,g,w){for(var k=-1,F=w.length;++k<F;){var j=w[k],H=j.size;switch(j.type){case"drop":h+=H;break;case"dropRight":g-=H;break;case"take":g=Fs(g,h+H);break;case"takeRight":h=cs(h,g-H);break}}return{start:h,end:g}}function F0(h){var g=h.match(bi);return g?g[1].split(to):[]}function Ag(h,g,w){g=pn(g,h);for(var k=-1,F=g.length,j=!1;++k<F;){var H=pl(g[k]);if(!(j=h!=null&&w(h,H)))break;h=h[H]}return j||++k!=F?j:(F=h==null?0:h.length,!!F&&Wf(F)&&SA(H,F)&&(lr(h)||Gf(h)))}function Lv(h){var g=h.length,w=new h.constructor(g);return g&&typeof h[0]=="string"&&mo.call(h,"index")&&(w.index=h.index,w.input=h.input),w}function ry(h){return typeof h.constructor=="function"&&!Yp(h)?hA(Dc(h)):{}}function GC(h,g,w){var k=h.constructor;switch(g){case be:return Fi(h);case ke:case Oe:return new k(+h);case re:return qo(h,w);case ce:case Pe:case tt:case xt:case It:case _n:case Xe:case ae:case he:return bo(h,w);case gt:return new k;case Lt:case Dn:return new k(h);case fi:return Ko(h);case Rn:return new k;case wn:return ds(h)}}function Uv(h,g){var w=g.length;if(!w)return h;var k=w-1;return g[k]=(w>1?"& ":"")+g[k],g=g.join(w>2?", ":" "),h.replace($i,`{
/* [wrapped with `+g+`] */
`)}function oy(h){return lr(h)||Gf(h)||!!($1&&h&&h[$1])}function SA(h,g){var w=typeof h;return g=g??ut,!!g&&(w=="number"||w!="symbol"&&Xl.test(h))&&h>-1&&h%1==0&&h<g}function cu(h,g,w){if(!Ns(w))return!1;var k=typeof g;return(k=="number"?fc(w)&&SA(g,w.length):k=="string"&&g in w)?Fu(w[g],h):!1}function Qp(h,g){if(lr(h))return!1;var w=typeof h;return w=="number"||w=="symbol"||w=="boolean"||h==null||du(h)?!0:Yn.test(h)||!Tn.test(h)||g!=null&&h in vo(g)}function z0(h){var g=typeof h;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?h!=="__proto__":h===null}function qp(h){var g=Vs(h),w=Ne[g];if(typeof w!="function"||!(g in sr.prototype))return!1;if(h===w)return!0;var k=Wp(w);return!!k&&h===k[0]}function hg(h){return!!wf&&wf in h}var Ql=ZA?hu:$t;function Yp(h){var g=h&&h.constructor,w=typeof g=="function"&&g.prototype||lA;return h===w}function EA(h){return h===h&&!Ns(h)}function sy(h,g){return function(w){return w==null?!1:w[h]===g&&(g!==t||h in vo(w))}}function WC(h){var g=H0(h,function(k){return w.size===f&&w.clear(),k}),w=g.cache;return g}function QC(h,g){var w=h[1],k=g[1],F=w|k,j=F<(z|Q|W),H=k==W&&w==$||k==W&&w==se&&h[7].length<=g[8]||k==(W|se)&&g[7].length<=g[8]&&w==$;if(!(j||H))return h;k&z&&(h[2]=g[2],F|=w&z?0:V);var ne=g[3];if(ne){var ie=h[3];h[3]=ie?Es(ie,ne,g[4]):ne,h[4]=ie?HA(h[3],y):g[4]}return ne=g[5],ne&&(ie=h[5],h[5]=ie?Bs(ie,ne,g[6]):ne,h[6]=ie?HA(h[5],y):g[6]),ne=g[7],ne&&(h[7]=ne),k&W&&(h[8]=h[8]==null?g[8]:Fs(h[8],g[8])),h[9]==null&&(h[9]=g[9]),h[0]=g[0],h[1]=F,h}function Nd(h){var g=[];if(h!=null)for(var w in vo(h))g.push(w);return g}function ay(h){return va.call(h)}function Kv(h,g,w){return g=cs(g===t?h.length-1:g,0),function(){for(var k=arguments,F=-1,j=cs(k.length-g,0),H=Rt(j);++F<j;)H[F]=k[g+F];F=-1;for(var ne=Rt(g+1);++F<g;)ne[F]=k[F];return ne[g]=w(H),ts(h,this,ne)}}function Vp(h,g){return g.length<2?h:Vn(h,xe(g,0,-1))}function dg(h,g){for(var w=h.length,k=Fs(g.length,w),F=Gr(h);k--;){var j=g[k];h[k]=SA(j,w)?F[j]:t}return h}function os(h,g){if(!(g==="constructor"&&typeof h[g]=="function")&&g!="__proto__")return h[g]}var qC=hh(le),j0=Id||function(h,g){return Ci.setTimeout(h,g)},ly=hh(me);function Gd(h,g,w){var k=g+"";return ly(h,Uv(k,YC(F0(k),w)))}function hh(h){var g=0,w=0;return function(){var k=Xa(),F=_e-(k-w);if(w=k,F>0){if(++g>=Ee)return arguments[0]}else g=0;return h.apply(t,arguments)}}function fg(h,g){var w=-1,k=h.length,F=k-1;for(g=g===t?k:g;++w<g;){var j=M(w,F),H=h[j];h[j]=h[w],h[w]=H}return h.length=g,h}var Wd=WC(function(h){var g=[];return h.charCodeAt(0)===46&&g.push(""),h.replace(vi,function(w,k,F,j){g.push(F?j.replace(Kn,"$1"):k||w)}),g});function pl(h){if(typeof h=="string"||du(h))return h;var g=h+"";return g=="0"&&1/h==-qe?"-0":g}function Au(h){if(h!=null){try{return kl.call(h)}catch{}try{return h+""}catch{}}return""}function YC(h,g){return Io(vt,function(w){var k="_."+w[0];g&w[1]&&!Cf(h,k)&&h.push(k)}),h.sort()}function uy(h){if(h instanceof sr)return h.clone();var g=new fl(h.__wrapped__,h.__chain__);return g.__actions__=Gr(h.__actions__),g.__index__=h.__index__,g.__values__=h.__values__,g}function VC(h,g,w){(w?cu(h,g,w):g===t)?g=1:g=cs(Oi(g),0);var k=h==null?0:h.length;if(!k||g<1)return[];for(var F=0,j=0,H=Rt(eh(k/g));F<k;)H[j++]=xe(h,F,F+=g);return H}function Fv(h){for(var g=-1,w=h==null?0:h.length,k=0,F=[];++g<w;){var j=h[g];j&&(F[k++]=j)}return F}function zv(){var h=arguments.length;if(!h)return[];for(var g=Rt(h-1),w=arguments[0],k=h;k--;)g[k-1]=arguments[k];return Tc(lr(w)?Gr(w):[w],ba(g,1))}var cy=U(function(h,g){return La(h)?Ru(h,ba(g,1,La,!0)):[]}),Ay=U(function(h,g){var w=Os(g);return La(w)&&(w=t),La(h)?Ru(h,ba(g,1,La,!0),ki(w,2)):[]}),Qd=U(function(h,g){var w=Os(g);return La(w)&&(w=t),La(h)?Ru(h,ba(g,1,La,!0),t,w):[]});function Ra(h,g,w){var k=h==null?0:h.length;return k?(g=w||g===t?1:Oi(g),xe(h,g<0?0:g,k)):[]}function $p(h,g,w){var k=h==null?0:h.length;return k?(g=w||g===t?1:Oi(g),g=k-g,xe(h,0,g<0?0:g)):[]}function $C(h,g){return h&&h.length?it(h,ki(g,3),!0,!0):[]}function wr(h,g){return h&&h.length?it(h,ki(g,3),!0):[]}function pg(h,g,w,k){var F=h==null?0:h.length;return F?(w&&typeof w!="number"&&cu(h,g,w)&&(w=0,k=F),oh(h,g,w,k)):[]}function hy(h,g,w){var k=h==null?0:h.length;if(!k)return-1;var F=w==null?0:Oi(w);return F<0&&(F=cs(k+F,0)),rA(h,ki(g,3),F)}function mg(h,g,w){var k=h==null?0:h.length;if(!k)return-1;var F=k-1;return w!==t&&(F=Oi(w),F=w<0?cs(k+F,0):Fs(F,k-1)),rA(h,ki(g,3),F,!0)}function ss(h){var g=h==null?0:h.length;return g?ba(h,1):[]}function ml(h){var g=h==null?0:h.length;return g?ba(h,qe):[]}function qh(h,g){var w=h==null?0:h.length;return w?(g=g===t?1:Oi(g),ba(h,g)):[]}function jv(h){for(var g=-1,w=h==null?0:h.length,k={};++g<w;){var F=h[g];k[F[0]]=F[1]}return k}function Hp(h){return h&&h.length?h[0]:t}function dy(h,g,w){var k=h==null?0:h.length;if(!k)return-1;var F=w==null?0:Oi(w);return F<0&&(F=cs(k+F,0)),Sh(h,g,F)}function gg(h){var g=h==null?0:h.length;return g?xe(h,0,-1):[]}var Zp=U(function(h){var g=$r(h,Ft);return g.length&&g[0]===h[0]?Tf(g):[]}),il=U(function(h){var g=Os(h),w=$r(h,Ft);return g===Os(w)?g=t:w.pop(),w.length&&w[0]===h[0]?Tf(w,ki(g,2)):[]}),Pu=U(function(h){var g=Os(h),w=$r(h,Ft);return g=typeof g=="function"?g:t,g&&w.pop(),w.length&&w[0]===h[0]?Tf(w,t,g):[]});function HC(h,g){return h==null?"":Td.call(h,g)}function Os(h){var g=h==null?0:h.length;return g?h[g-1]:t}function Pf(h,g,w){var k=h==null?0:h.length;if(!k)return-1;var F=k;return w!==t&&(F=Oi(w),F=F<0?cs(k+F,0):Fs(F,k-1)),g===g?I0(h,g,F):rA(h,kc,F,!0)}function qd(h,g){return h&&h.length?Fd(h,Oi(g)):t}var Lf=U(Ac);function Ac(h,g){return h&&h.length&&g&&g.length?u(h,g):h}function N0(h,g,w){return h&&h.length&&g&&g.length?u(h,g,ki(w,2)):h}function fy(h,g,w){return h&&h.length&&g&&g.length?u(h,g,t,w):h}var BA=Qh(function(h,g){var w=h==null?0:h.length,k=Ld(h,g);return m(h,$r(g,function(F){return SA(F,w)?+F:F}).sort(Ys)),k});function ZC(h,g){var w=[];if(!(h&&h.length))return w;var k=-1,F=[],j=h.length;for(g=ki(g,3);++k<j;){var H=h[k];g(H,k,h)&&(w.push(H),F.push(k))}return m(h,F),w}function Uf(h){return h==null?h:ou.call(h)}function G0(h,g,w){var k=h==null?0:h.length;return k?(w&&typeof w!="number"&&cu(h,g,w)?(g=0,w=k):(g=g==null?0:Oi(g),w=w===t?k:Oi(w)),xe(h,g,w)):[]}function W0(h,g){return Ve(h,g)}function yg(h,g,w){return He(h,g,ki(w,2))}function Xp(h,g){var w=h==null?0:h.length;if(w){var k=Ve(h,g);if(k<w&&Fu(h[k],g))return k}return-1}function XC(h,g){return Ve(h,g,!0)}function Q0(h,g,w){return He(h,g,ki(w,2),!0)}function Nv(h,g){var w=h==null?0:h.length;if(w){var k=Ve(h,g,!0)-1;if(Fu(h[k],g))return k}return-1}function py(h){return h&&h.length?Ze(h):[]}function Gv(h,g){return h&&h.length?Ze(h,ki(g,2)):[]}function G2(h){var g=h==null?0:h.length;return g?xe(h,1,g):[]}function Wv(h,g,w){return h&&h.length?(g=w||g===t?1:Oi(g),xe(h,0,g<0?0:g)):[]}function ro(h,g,w){var k=h==null?0:h.length;return k?(g=w||g===t?1:Oi(g),g=k-g,xe(h,g<0?0:g,k)):[]}function Yo(h,g){return h&&h.length?it(h,ki(g,3),!1,!0):[]}function Wr(h,g){return h&&h.length?it(h,ki(g,3)):[]}var Zr=U(function(h){return Je(ba(h,1,La,!0))}),Fo=U(function(h){var g=Os(h);return La(g)&&(g=t),Je(ba(h,1,La,!0),ki(g,2))}),hc=U(function(h){var g=Os(h);return g=typeof g=="function"?g:t,Je(ba(h,1,La,!0),t,g)});function Kf(h){return h&&h.length?Je(h):[]}function vg(h,g){return h&&h.length?Je(h,ki(g,2)):[]}function Jp(h,g){return g=typeof g=="function"?g:t,h&&h.length?Je(h,t,g):[]}function OA(h){if(!(h&&h.length))return[];var g=0;return h=Iu(h,function(w){if(La(w))return g=cs(w.length,g),!0}),Ip(g,function(w){return $r(h,$A(w))})}function la(h,g){if(!(h&&h.length))return[];var w=OA(h);return g==null?w:$r(w,function(k){return ts(g,t,k)})}var Ff=U(function(h,g){return La(h)?Ru(h,g):[]}),em=U(function(h){return Nt(Iu(h,La))}),Qv=U(function(h){var g=Os(h);return La(g)&&(g=t),Nt(Iu(h,La),ki(g,2))}),Qc=U(function(h){var g=Os(h);return g=typeof g=="function"?g:t,Nt(Iu(h,La),t,g)}),tm=U(OA);function nm(h,g){return Kt(h||[],g||[],Kc)}function Lu(h,g){return Kt(h||[],g||[],oe)}var my=U(function(h){var g=h.length,w=g>1?h[g-1]:t;return w=typeof w=="function"?(h.pop(),w):t,la(h,w)});function bg(h){var g=Ne(h);return g.__chain__=!0,g}function JC(h,g){return g(h),h}function Yh(h,g){return g(h)}var gy=Qh(function(h){var g=h.length,w=g?h[0]:0,k=this.__wrapped__,F=function(j){return Ld(j,h)};return g>1||this.__actions__.length||!(k instanceof sr)||!SA(w)?this.thru(F):(k=k.slice(w,+w+(g?1:0)),k.__actions__.push({func:Yh,args:[F],thisArg:t}),new fl(k,this.__chain__).thru(function(j){return g&&!j.length&&j.push(t),j}))});function Yd(){return bg(this)}function rl(){return new fl(this.value(),this.__chain__)}function zf(){this.__values__===t&&(this.__values__=IA(this.value()));var h=this.__index__>=this.__values__.length,g=h?t:this.__values__[this.__index__++];return{done:h,value:g}}function Cg(){return this}function Vh(h){for(var g,w=this;w instanceof oc;){var k=uy(w);k.__index__=0,k.__values__=t,g?F.__wrapped__=k:g=k;var F=k;w=w.__wrapped__}return F.__wrapped__=h,g}function qv(){var h=this.__wrapped__;if(h instanceof sr){var g=h;return this.__actions__.length&&(g=new sr(this)),g=g.reverse(),g.__actions__.push({func:Yh,args:[Uf],thisArg:t}),new fl(g,this.__chain__)}return this.thru(Uf)}function Yv(){return Ct(this.__wrapped__,this.__actions__)}var Pa=jc(function(h,g,w){mo.call(h,w)?++h[w]:Ul(h,w,1)});function Vd(h,g,w){var k=lr(h)?Xu:zh;return w&&cu(h,g,w)&&(g=t),k(h,ki(g,3))}function Vv(h,g){var w=lr(h)?Iu:Of;return w(h,ki(g,3))}var qc=ps(hy),$v=ps(mg);function Uu(h,g){return ba($h(h,g),1)}function e_(h,g){return ba($h(h,g),qe)}function Hv(h,g,w){return w=w===t?1:Oi(w),ba($h(h,g),w)}function Zv(h,g){var w=lr(h)?Io:tl;return w(h,ki(g,3))}function dc(h,g){var w=lr(h)?ya:ao;return w(h,ki(g,3))}var _g=jc(function(h,g,w){mo.call(h,w)?h[w].push(g):Ul(h,w,[g])});function yy(h,g,w,k){h=fc(h)?h:Og(h),w=w&&!k?Oi(w):0;var F=h.length;return w<0&&(w=cs(F+w,0)),wg(h)?w<=F&&h.indexOf(g,w)>-1:!!F&&Sh(h,g,w)>-1}var im=U(function(h,g,w){var k=-1,F=typeof g=="function",j=fc(h)?Rt(h.length):[];return tl(h,function(H){j[++k]=F?ts(g,H,w):uc(H,g,w)}),j}),vy=jc(function(h,g,w){Ul(h,w,g)});function $h(h,g){var w=lr(h)?$r:lh;return w(h,ki(g,3))}function Xv(h,g,w,k){return h==null?[]:(lr(g)||(g=g==null?[]:[g]),w=k?t:w,lr(w)||(w=w==null?[]:[w]),kf(h,g,w))}var t_=jc(function(h,g,w){h[w?0:1].push(g)},function(){return[[],[]]});function by(h,g,w){var k=lr(h)?Ep:oA,F=arguments.length<3;return k(h,ki(g,4),w,F,tl)}function Jv(h,g,w){var k=lr(h)?Y1:oA,F=arguments.length<3;return k(h,ki(g,4),w,F,ao)}function W2(h,g){var w=lr(h)?Iu:Of;return w(h,xy(ki(g,3)))}function Q2(h){var g=lr(h)?Ef:G;return g(h)}function q2(h,g,w){(w?cu(h,g,w):g===t)?g=1:g=Oi(g);var k=lr(h)?Fh:q;return k(h,g)}function n_(h){var g=lr(h)?vA:pe;return g(h)}function i_(h){if(h==null)return 0;if(fc(h))return wg(h)?Sd(h):h.length;var g=Wl(h);return g==gt||g==Rn?h.size:Fc(h).length}function xg(h,g,w){var k=lr(h)?Hm:Le;return w&&cu(h,g,w)&&(g=t),k(h,ki(g,3))}var Cy=U(function(h,g){if(h==null)return[];var w=g.length;return w>1&&cu(h,g[0],g[1])?g=[]:w>2&&cu(g[0],g[1],g[2])&&(g=[g[0]]),kf(h,ba(g,1),[])}),q0=Pp||function(){return Ci.Date.now()};function r_(h,g){if(typeof g!="function")throw new hl(s);return h=Oi(h),function(){if(--h<1)return g.apply(this,arguments)}}function _y(h,g,w){return g=w?t:g,g=h&&g==null?h.length:g,js(h,W,t,t,t,t,g)}function Y0(h,g){var w;if(typeof g!="function")throw new hl(s);return h=Oi(h),function(){return--h>0&&(w=g.apply(this,arguments)),h<=1&&(g=t),w}}var V0=U(function(h,g,w){var k=z;if(w.length){var F=HA(w,aa(V0));k|=ee}return js(h,k,g,w,F)}),Hh=U(function(h,g,w){var k=z|Q;if(w.length){var F=HA(w,aa(Hh));k|=ee}return js(g,k,h,w,F)});function jf(h,g,w){g=w?t:g;var k=js(h,$,t,t,t,t,t,g);return k.placeholder=jf.placeholder,k}function $0(h,g,w){g=w?t:g;var k=js(h,Z,t,t,t,t,t,g);return k.placeholder=$0.placeholder,k}function eb(h,g,w){var k,F,j,H,ne,ie,Ae=0,de=!1,Me=!1,We=!0;if(typeof h!="function")throw new hl(s);g=_o(g)||0,Ns(w)&&(de=!!w.leading,Me="maxWait"in w,j=Me?cs(_o(w.maxWait)||0,g):j,We="trailing"in w?!!w.trailing:We);function Ue(An){var Cn=k,en=F;return k=F=t,Ae=An,H=h.apply(en,Cn),H}function je(An){return Ae=An,ne=j0(Mt,g),de?Ue(An):H}function ot(An){var Cn=An-ie,en=An-Ae,xi=g-Cn;return Me?Fs(xi,j-en):xi}function nt(An){var Cn=An-ie,en=An-Ae;return ie===t||Cn>=g||Cn<0||Me&&en>=j}function Mt(){var An=q0();if(nt(An))return Vt(An);ne=j0(Mt,ot(An))}function Vt(An){return ne=t,We&&k?Ue(An):(k=F=t,H)}function Jt(){ne!==t&&$n(ne),Ae=0,k=ie=F=ne=t}function on(){return ne===t?H:Vt(q0())}function kn(){var An=q0(),Cn=nt(An);if(k=arguments,F=this,ie=An,Cn){if(ne===t)return je(ie);if(Me)return $n(ne),ne=j0(Mt,g),Ue(ie)}return ne===t&&(ne=j0(Mt,g)),H}return kn.cancel=Jt,kn.flush=on,kn}var zo=U(function(h,g){return R0(h,1,g)}),tb=U(function(h,g,w){return R0(h,_o(g)||0,w)});function Y2(h){return js(h,ue)}function H0(h,g){if(typeof h!="function"||g!=null&&typeof g!="function")throw new hl(s);var w=function(){var k=arguments,F=g?g.apply(this,k):k[0],j=w.cache;if(j.has(F))return j.get(F);var H=h.apply(this,k);return w.cache=j.set(F,H)||j,H};return w.cache=new(H0.Cache||qs),w}H0.Cache=qs;function xy(h){if(typeof h!="function")throw new hl(s);return function(){var g=arguments;switch(g.length){case 0:return!h.call(this);case 1:return!h.call(this,g[0]);case 2:return!h.call(this,g[0],g[1]);case 3:return!h.call(this,g[0],g[1],g[2])}return!h.apply(this,g)}}function V2(h){return Y0(2,h)}var o_=Sn(function(h,g){g=g.length==1&&lr(g[0])?$r(g[0],iu(ki())):$r(ba(g,1),iu(ki()));var w=g.length;return U(function(k){for(var F=-1,j=Fs(k.length,w);++F<j;)k[F]=g[F].call(this,k[F]);return ts(h,this,k)})}),rm=U(function(h,g){var w=HA(g,aa(rm));return js(h,ee,t,g,w)}),Ku=U(function(h,g){var w=HA(g,aa(Ku));return js(h,X,t,g,w)}),Zh=Qh(function(h,g){return js(h,se,t,t,t,g)});function Z0(h,g){if(typeof h!="function")throw new hl(s);return g=g===t?g:Oi(g),U(h,g)}function X0(h,g){if(typeof h!="function")throw new hl(s);return g=g==null?0:cs(Oi(g),0),U(function(w){var k=w[g],F=rn(w,0,g);return k&&Tc(F,k),ts(h,this,F)})}function Nf(h,g,w){var k=!0,F=!0;if(typeof h!="function")throw new hl(s);return Ns(w)&&(k="leading"in w?!!w.leading:k,F="trailing"in w?!!w.trailing:F),eb(h,g,{leading:k,maxWait:g,trailing:F})}function Yc(h){return _y(h,1)}function om(h,g){return rm(jt(g),h)}function $2(){if(!arguments.length)return[];var h=arguments[0];return lr(h)?h:[h]}function My(h){return el(h,I)}function wy(h,g){return g=typeof g=="function"?g:t,el(h,I,g)}function sm(h){return el(h,_|I)}function nb(h,g){return g=typeof g=="function"?g:t,el(h,_|I,g)}function s_(h,g){return g==null||bA(h,g,vl(g))}function Fu(h,g){return h===g||h!==h&&g!==g}var ib=jp(If),J0=jp(function(h,g){return h>=g}),Gf=lu((function(){return arguments})())?lu:function(h){return $s(h)&&mo.call(h,"callee")&&!rr.call(h,"callee")},lr=Rt.isArray,rb=Or?iu(Or):hs;function fc(h){return h!=null&&Wf(h.length)&&!hu(h)}function La(h){return $s(h)&&fc(h)}function e1(h){return h===!0||h===!1||$s(h)&&sa(h)==ke}var Xh=Rh||$t,$d=Ks?iu(Ks):lo;function Lr(h){return $s(h)&&h.nodeType===1&&!Jh(h)}function Sy(h){if(h==null)return!0;if(fc(h)&&(lr(h)||typeof h=="string"||typeof h.splice=="function"||Xh(h)||ed(h)||Gf(h)))return!h.length;var g=Wl(h);if(g==gt||g==Rn)return!h.size;if(Yp(h))return!Fc(h).length;for(var w in h)if(mo.call(h,w))return!1;return!0}function t1(h,g){return Hr(h,g)}function Ey(h,g,w){w=typeof w=="function"?w:t;var k=w?w(h,g):t;return k===t?Hr(h,g,t,w):!!k}function n1(h){if(!$s(h))return!1;var g=sa(h);return g==Ye||g==we||typeof h.message=="string"&&typeof h.name=="string"&&!Jh(h)}function By(h){return typeof h=="number"&&dl(h)}function hu(h){if(!Ns(h))return!1;var g=sa(h);return g==ft||g==dt||g==Pt||g==Ln}function Mg(h){return typeof h=="number"&&h==Oi(h)}function Wf(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=ut}function Ns(h){var g=typeof h;return h!=null&&(g=="object"||g=="function")}function $s(h){return h!=null&&typeof h=="object"}var ob=Oo?iu(Oo):uo;function pc(h,g){return h===g||ns(h,g,jd(g))}function am(h,g,w){return w=typeof w=="function"?w:t,ns(h,g,jd(g),w)}function Co(h){return Oy(h)&&h!=+h}function sb(h){if(Ql(h))throw new er(o);return Ud(h)}function gl(h){return h===null}function a_(h){return h==null}function Oy(h){return typeof h=="number"||$s(h)&&sa(h)==Lt}function Jh(h){if(!$s(h)||sa(h)!=Zt)return!1;var g=Dc(h);if(g===null)return!0;var w=mo.call(g,"constructor")&&g.constructor;return typeof w=="function"&&w instanceof w&&kl.call(w)==Od}var Qf=Oa?iu(Oa):Nh;function i1(h){return Mg(h)&&h>=-ut&&h<=ut}var lm=Za?iu(Za):zl;function wg(h){return typeof h=="string"||!lr(h)&&$s(h)&&sa(h)==Dn}function du(h){return typeof h=="symbol"||$s(h)&&sa(h)==wn}var ed=Uo?iu(Uo):ah;function ab(h){return h===t}function H2(h){return $s(h)&&Wl(h)==En}function ol(h){return $s(h)&&sa(h)==wt}var vr=jp(is),td=jp(function(h,g){return h<=g});function IA(h){if(!h)return[];if(fc(h))return wg(h)?Wo(h):Gr(h);if(Ga&&h[Ga])return Mf(h[Ga]());var g=Wl(h),w=g==gt?Ih:g==Rn?kp:Og;return w(h)}function zu(h){if(!h)return h===0?h:0;if(h=_o(h),h===qe||h===-qe){var g=h<0?-1:1;return g*ht}return h===h?h:0}function Oi(h){var g=zu(h),w=g%1;return g===g?w?g-w:g:0}function Ca(h){return h?ac(Oi(h),0,Ie):0}function _o(h){if(typeof h=="number")return h;if(du(h))return De;if(Ns(h)){var g=typeof h.valueOf=="function"?h.valueOf():h;h=Ns(g)?g+"":g}if(typeof h!="string")return h===0?h:+h;h=Bh(h);var w=Ms.test(h);return w||Ba.test(h)?Xt(h.slice(2),w?2:8):Su.test(h)?De:+h}function r1(h){return fs(h,sl(h))}function Vc(h){return h?ac(Oi(h),-ut,ut):h===0?h:0}function xo(h){return h==null?"":lt(h)}var _a=jl(function(h,g){if(Yp(g)||fc(g)){fs(g,vl(g),h);return}for(var w in g)mo.call(g,w)&&Kc(h,w,g[w])}),um=jl(function(h,g){fs(g,sl(g),h)}),Sg=jl(function(h,g,w,k){fs(g,sl(g),h,k)}),l_=jl(function(h,g,w,k){fs(g,vl(g),h,k)}),yl=Qh(Ld);function qf(h,g){var w=hA(h);return g==null?w:Pd(w,g)}var u_=U(function(h,g){h=vo(h);var w=-1,k=g.length,F=k>2?g[2]:t;for(F&&cu(g[0],g[1],F)&&(k=1);++w<k;)for(var j=g[w],H=sl(j),ne=-1,ie=H.length;++ne<ie;){var Ae=H[ne],de=h[Ae];(de===t||Fu(de,lA[Ae])&&!mo.call(h,Ae))&&(h[Ae]=j[Ae])}return h}),lb=U(function(h){return h.push(t,Gp),ts(Zd,t,h)});function ub(h,g){return Bp(h,ki(g,3),lc)}function Eg(h,g){return Bp(h,ki(g,3),au)}function mc(h,g){return h==null?h:sh(h,ki(g,3),sl)}function cb(h,g){return h==null?h:jh(h,ki(g,3),sl)}function dh(h,g){return h&&lc(h,ki(g,3))}function ju(h,g){return h&&au(h,ki(g,3))}function Iy(h){return h==null?[]:Fl(h,vl(h))}function o1(h){return h==null?[]:Fl(h,sl(h))}function Hs(h,g,w){var k=h==null?t:Vn(h,g);return k===t?w:k}function TA(h,g){return h!=null&&Ag(h,g,nl)}function Gi(h,g){return h!=null&&Ag(h,g,Qo)}var c_=co(function(h,g,w){g!=null&&typeof g.toString!="function"&&(g=va.call(g)),h[g]=w},hm(fu)),A_=co(function(h,g,w){g!=null&&typeof g.toString!="function"&&(g=va.call(g)),mo.call(h,g)?h[g].push(w):h[g]=[w]},ki),Bg=U(uc);function vl(h){return fc(h)?Sf(h):Fc(h)}function sl(h){return fc(h)?Sf(h,!0):Kp(h)}function Z2(h,g){var w={};return g=ki(g,3),lc(h,function(k,F,j){Ul(w,g(k,F,j),k)}),w}function Ab(h,g){var w={};return g=ki(g,3),lc(h,function(k,F,j){Ul(w,F,g(k,F,j))}),w}var Hd=jl(function(h,g,w){Gh(h,g,w)}),Zd=jl(function(h,g,w,k){Gh(h,g,w,k)}),s1=Qh(function(h,g){var w={};if(h==null)return w;var k=!1;g=$r(g,function(j){return j=pn(j,h),k||(k=j.length>1),j}),fs(h,Pv(h),w),k&&(w=el(w,_|E|I,ty));for(var F=g.length;F--;)At(w,g[F]);return w});function hb(h,g){return Vf(h,xy(ki(g)))}var Yf=Qh(function(h,g){return h==null?{}:Df(h,g)});function Vf(h,g){if(h==null)return{};var w=$r(Pv(h),function(k){return[k]});return g=ki(g),Da(h,w,function(k,F){return g(k,F[0])})}function db(h,g,w){g=pn(g,h);var k=-1,F=g.length;for(F||(F=1,h=t);++k<F;){var j=h==null?t:h[pl(g[k])];j===t&&(k=F,j=w),h=hu(j)?j.call(h):j}return h}function $f(h,g,w){return h==null?h:oe(h,g,w)}function cm(h,g,w,k){return k=typeof k=="function"?k:t,h==null?h:oe(h,g,w,k)}var a1=wA(vl),Hf=wA(sl);function l1(h,g,w){var k=lr(h),F=k||Xh(h)||ed(h);if(g=ki(g,4),w==null){var j=h&&h.constructor;F?w=k?new j:[]:Ns(h)?w=hu(j)?hA(Dc(h)):{}:w={}}return(F?Io:lc)(h,function(H,ne,ie){return g(w,H,ne,ie)}),w}function h_(h,g){return h==null?!0:At(h,g)}function fb(h,g,w){return h==null?h:pt(h,g,jt(w))}function pb(h,g,w,k){return k=typeof k=="function"?k:t,h==null?h:pt(h,g,jt(w),k)}function Og(h){return h==null?[]:w0(h,vl(h))}function mb(h){return h==null?[]:w0(h,sl(h))}function d_(h,g,w){return w===t&&(w=g,g=t),w!==t&&(w=_o(w),w=w===w?w:0),g!==t&&(g=_o(g),g=g===g?g:0),ac(_o(h),g,w)}function Ty(h,g,w){return g=zu(g),w===t?(w=g,g=0):w=zu(w),h=_o(h),ka(h,g,w)}function Zf(h,g,w){if(w&&typeof w!="boolean"&&cu(h,g,w)&&(g=w=t),w===t&&(typeof g=="boolean"?(w=g,g=t):typeof h=="boolean"&&(w=h,h=t)),h===t&&g===t?(h=0,g=1):(h=zu(h),g===t?(g=h,h=0):g=zu(g)),h>g){var k=h;h=g,g=k}if(w||h%1||g%1){var F=cA();return Fs(h+F*(g-h+bn("1e-"+((F+"").length-1))),g)}return M(h,g)}var u1=Gl(function(h,g,w){return g=g.toLowerCase(),h+(w?f_(g):g)});function f_(h){return Jf(xo(h).toLowerCase())}function Xf(h){return h=xo(h),h&&h.replace(Yr,Md).replace(Ic,"")}function gb(h,g,w){h=xo(h),g=lt(g);var k=h.length;w=w===t?k:ac(Oi(w),0,k);var F=w;return w-=g.length,w>=0&&h.slice(w,F)==g}function yb(h){return h=xo(h),h&&St.test(h)?h.replace(Re,S0):h}function Am(h){return h=xo(h),h&&Zn.test(h)?h.replace(ui,"\\$&"):h}var vb=Gl(function(h,g,w){return h+(w?"-":"")+g.toLowerCase()}),Ig=Gl(function(h,g,w){return h+(w?" ":"")+g.toLowerCase()}),bb=Nl("toLowerCase");function Tg(h,g,w){h=xo(h),g=Oi(g);var k=g?Sd(h):0;if(!g||k>=g)return h;var F=(g-k)/2;return ch(kh(F),w)+h+ch(eh(F),w)}function c1(h,g,w){h=xo(h),g=Oi(g);var k=g?Sd(h):0;return g&&k<g?h+ch(g-k,w):h}function ky(h,g,w){h=xo(h),g=Oi(g);var k=g?Sd(h):0;return g&&k<g?ch(g-k,w)+h:h}function p_(h,g,w){return w||g==null?g=0:g&&(g=+g),Rl(xo(h).replace(Mi,""),g||0)}function m_(h,g,w){return(w?cu(h,g,w):g===t)?g=1:g=Oi(g),D(xo(h),g)}function Cb(){var h=arguments,g=xo(h[0]);return h.length<3?g:g.replace(h[1],h[2])}var _b=Gl(function(h,g,w){return h+(w?"_":"")+g.toLowerCase()});function Dy(h,g,w){return w&&typeof w!="number"&&cu(h,g,w)&&(g=w=t),w=w===t?Ie:w>>>0,w?(h=xo(h),h&&(typeof g=="string"||g!=null&&!Qf(g))&&(g=lt(g),!g&&Oh(h))?rn(Wo(h),0,w):h.split(g,w)):[]}var xb=Gl(function(h,g,w){return h+(w?" ":"")+Jf(g)});function g_(h,g,w){return h=xo(h),w=w==null?0:ac(Oi(w),0,h.length),g=lt(g),h.slice(w,w+g.length)==g}function Ry(h,g,w){var k=Ne.templateSettings;w&&cu(h,g,w)&&(g=t),h=xo(h),g=Sg({},g,k,Np);var F=Sg({},g.imports,k.imports,Np),j=vl(F),H=w0(F,j),ne,ie,Ae=0,de=g.interpolate||ls,Me="__p += '",We=Ed((g.escape||ls).source+"|"+de.source+"|"+(de===sn?ii:ls).source+"|"+(g.evaluate||ls).source+"|$","g"),Ue="//# sourceURL="+(mo.call(g,"sourceURL")?(g.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Rr+"]")+`
`;h.replace(We,function(nt,Mt,Vt,Jt,on,kn){return Vt||(Vt=Jt),Me+=h.slice(Ae,kn).replace($a,sA),Mt&&(ne=!0,Me+=`' +
__e(`+Mt+`) +
'`),on&&(ie=!0,Me+=`';
`+on+`;
__p += '`),Vt&&(Me+=`' +
((__t = (`+Vt+`)) == null ? '' : __t) +
'`),Ae=kn+nt.length,nt}),Me+=`';
`;var je=mo.call(g,"variable")&&g.variable;if(!je)Me=`with (obj) {
`+Me+`
}
`;else if(an.test(je))throw new er(a);Me=(ie?Me.replace(C,""):Me).replace(Ke,"$1").replace($e,"$1;"),Me="function("+(je||"obj")+`) {
`+(je?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ne?", __e = _.escape":"")+(ie?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Me+`return __p
}`;var ot=Mb(function(){return Mr(j,Ue+"return "+Me).apply(t,H)});if(ot.source=Me,n1(ot))throw ot;return ot}function gc(h){return xo(h).toLowerCase()}function nd(h){return xo(h).toUpperCase()}function Xd(h,g,w){if(h=xo(h),h&&(w||g===t))return Bh(h);if(!h||!(g=lt(g)))return h;var k=Wo(h),F=Wo(g),j=Tp(k,F),H=eg(k,F)+1;return rn(k,j,H).join("")}function kg(h,g,w){if(h=xo(h),h&&(w||g===t))return h.slice(0,Tl(h)+1);if(!h||!(g=lt(g)))return h;var k=Wo(h),F=eg(k,Wo(g))+1;return rn(k,0,F).join("")}function A1(h,g,w){if(h=xo(h),h&&(w||g===t))return h.replace(Mi,"");if(!h||!(g=lt(g)))return h;var k=Wo(h),F=Tp(k,Wo(g));return rn(k,F).join("")}function Jd(h,g){var w=ve,k=ye;if(Ns(g)){var F="separator"in g?g.separator:F;w="length"in g?Oi(g.length):w,k="omission"in g?lt(g.omission):k}h=xo(h);var j=h.length;if(Oh(h)){var H=Wo(h);j=H.length}if(w>=j)return h;var ne=w-Sd(k);if(ne<1)return k;var ie=H?rn(H,0,ne).join(""):h.slice(0,ne);if(F===t)return ie+k;if(H&&(ne+=ie.length-ne),Qf(F)){if(h.slice(ne).search(F)){var Ae,de=ie;for(F.global||(F=Ed(F.source,xo(nr.exec(F))+"g")),F.lastIndex=0;Ae=F.exec(de);)var Me=Ae.index;ie=ie.slice(0,Me===t?ne:Me)}}else if(h.indexOf(lt(F),ne)!=ne){var We=ie.lastIndexOf(F);We>-1&&(ie=ie.slice(0,We))}return ie+k}function y_(h){return h=xo(h),h&&at.test(h)?h.replace(rt,ng):h}var v_=Gl(function(h,g,w){return h+(w?" ":"")+g.toUpperCase()}),Jf=Nl("toUpperCase");function b_(h,g,w){return h=xo(h),g=w?t:g,g===t?wd(h)?og(h):nu(h):h.match(g)||[]}var Mb=U(function(h,g){try{return ts(h,t,g)}catch(w){return n1(w)?w:new er(w)}}),fh=Qh(function(h,g){return Io(g,function(w){w=pl(w),Ul(h,w,V0(h[w],h))}),h});function wb(h){var g=h==null?0:h.length,w=ki();return h=g?$r(h,function(k){if(typeof k[1]!="function")throw new hl(s);return[w(k[0]),k[1]]}):[],U(function(k){for(var F=-1;++F<g;){var j=h[F];if(ts(j[0],this,k))return ts(j[1],this,k)}})}function C_(h){return ag(el(h,_))}function hm(h){return function(){return h}}function h1(h,g){return h==null||h!==h?g:h}var __=To(),Dg=To(!0);function fu(h){return h}function Rg(h){return CA(typeof h=="function"?h:el(h,_))}function dm(h){return _A(el(h,_))}function Sb(h,g){return Fp(h,el(g,_))}var Py=U(function(h,g){return function(w){return uc(w,h,g)}}),fm=U(function(h,g){return function(w){return uc(h,w,g)}});function d(h,g,w){var k=vl(g),F=Fl(g,k);w==null&&!(Ns(g)&&(F.length||!k.length))&&(w=g,g=h,h=this,F=Fl(g,vl(g)));var j=!(Ns(w)&&"chain"in w)||!!w.chain,H=hu(h);return Io(F,function(ne){var ie=g[ne];h[ne]=ie,H&&(h.prototype[ne]=function(){var Ae=this.__chain__;if(j||Ae){var de=h(this.__wrapped__),Me=de.__actions__=Gr(this.__actions__);return Me.push({func:ie,args:arguments,thisArg:h}),de.__chain__=Ae,de}return ie.apply(h,Tc([this.value()],arguments))})}),h}function v(){return Ci._===this&&(Ci._=Dl),this}function S(){}function R(h){return h=Oi(h),U(function(g){return Fd(g,h)})}var N=zp($r),Y=zp(Xu),Ce=zp(Hm);function Qe(h){return Qp(h)?$A(pl(h)):T(h)}function mt(h){return function(g){return h==null?t:Vn(h,g)}}var Wt=MA(),un=MA(!0);function fn(){return[]}function $t(){return!1}function tn(){return{}}function mi(){return""}function ji(){return!0}function jo(h,g){if(h=Oi(h),h<1||h>ut)return[];var w=Ie,k=Fs(h,Ie);g=ki(g),h-=Ie;for(var F=Ip(k,g);++w<h;)g(w);return F}function Dt(h){return lr(h)?$r(h,pl):du(h)?[h]:Gr(Wd(xo(h)))}function _t(h){var g=++T0;return xo(h)+g}var Gt=cc(function(h,g){return h+g},0),dn=Wh("ceil"),Di=cc(function(h,g){return h/g},1),oo=Wh("floor");function _i(h){return h&&h.length?Kl(h,fu,If):t}function Ar(h,g){return h&&h.length?Kl(h,ki(g,2),If):t}function Ur(h){return Jm(h,fu)}function Ao(h,g){return Jm(h,ki(g,2))}function ep(h){return h&&h.length?Kl(h,fu,is):t}function p(h,g){return h&&h.length?Kl(h,ki(g,2),is):t}var l=cc(function(h,g){return h*g},1),A=Wh("round"),b=cc(function(h,g){return h-g},0);function x(h){return h&&h.length?Eh(h,fu):0}function B(h,g){return h&&h.length?Eh(h,ki(g,2)):0}return Ne.after=r_,Ne.ary=_y,Ne.assign=_a,Ne.assignIn=um,Ne.assignInWith=Sg,Ne.assignWith=l_,Ne.at=yl,Ne.before=Y0,Ne.bind=V0,Ne.bindAll=fh,Ne.bindKey=Hh,Ne.castArray=$2,Ne.chain=bg,Ne.chunk=VC,Ne.compact=Fv,Ne.concat=zv,Ne.cond=wb,Ne.conforms=C_,Ne.constant=hm,Ne.countBy=Pa,Ne.create=qf,Ne.curry=jf,Ne.curryRight=$0,Ne.debounce=eb,Ne.defaults=u_,Ne.defaultsDeep=lb,Ne.defer=zo,Ne.delay=tb,Ne.difference=cy,Ne.differenceBy=Ay,Ne.differenceWith=Qd,Ne.drop=Ra,Ne.dropRight=$p,Ne.dropRightWhile=$C,Ne.dropWhile=wr,Ne.fill=pg,Ne.filter=Vv,Ne.flatMap=Uu,Ne.flatMapDeep=e_,Ne.flatMapDepth=Hv,Ne.flatten=ss,Ne.flattenDeep=ml,Ne.flattenDepth=qh,Ne.flip=Y2,Ne.flow=__,Ne.flowRight=Dg,Ne.fromPairs=jv,Ne.functions=Iy,Ne.functionsIn=o1,Ne.groupBy=_g,Ne.initial=gg,Ne.intersection=Zp,Ne.intersectionBy=il,Ne.intersectionWith=Pu,Ne.invert=c_,Ne.invertBy=A_,Ne.invokeMap=im,Ne.iteratee=Rg,Ne.keyBy=vy,Ne.keys=vl,Ne.keysIn=sl,Ne.map=$h,Ne.mapKeys=Z2,Ne.mapValues=Ab,Ne.matches=dm,Ne.matchesProperty=Sb,Ne.memoize=H0,Ne.merge=Hd,Ne.mergeWith=Zd,Ne.method=Py,Ne.methodOf=fm,Ne.mixin=d,Ne.negate=xy,Ne.nthArg=R,Ne.omit=s1,Ne.omitBy=hb,Ne.once=V2,Ne.orderBy=Xv,Ne.over=N,Ne.overArgs=o_,Ne.overEvery=Y,Ne.overSome=Ce,Ne.partial=rm,Ne.partialRight=Ku,Ne.partition=t_,Ne.pick=Yf,Ne.pickBy=Vf,Ne.property=Qe,Ne.propertyOf=mt,Ne.pull=Lf,Ne.pullAll=Ac,Ne.pullAllBy=N0,Ne.pullAllWith=fy,Ne.pullAt=BA,Ne.range=Wt,Ne.rangeRight=un,Ne.rearg=Zh,Ne.reject=W2,Ne.remove=ZC,Ne.rest=Z0,Ne.reverse=Uf,Ne.sampleSize=q2,Ne.set=$f,Ne.setWith=cm,Ne.shuffle=n_,Ne.slice=G0,Ne.sortBy=Cy,Ne.sortedUniq=py,Ne.sortedUniqBy=Gv,Ne.split=Dy,Ne.spread=X0,Ne.tail=G2,Ne.take=Wv,Ne.takeRight=ro,Ne.takeRightWhile=Yo,Ne.takeWhile=Wr,Ne.tap=JC,Ne.throttle=Nf,Ne.thru=Yh,Ne.toArray=IA,Ne.toPairs=a1,Ne.toPairsIn=Hf,Ne.toPath=Dt,Ne.toPlainObject=r1,Ne.transform=l1,Ne.unary=Yc,Ne.union=Zr,Ne.unionBy=Fo,Ne.unionWith=hc,Ne.uniq=Kf,Ne.uniqBy=vg,Ne.uniqWith=Jp,Ne.unset=h_,Ne.unzip=OA,Ne.unzipWith=la,Ne.update=fb,Ne.updateWith=pb,Ne.values=Og,Ne.valuesIn=mb,Ne.without=Ff,Ne.words=b_,Ne.wrap=om,Ne.xor=em,Ne.xorBy=Qv,Ne.xorWith=Qc,Ne.zip=tm,Ne.zipObject=nm,Ne.zipObjectDeep=Lu,Ne.zipWith=my,Ne.entries=a1,Ne.entriesIn=Hf,Ne.extend=um,Ne.extendWith=Sg,d(Ne,Ne),Ne.add=Gt,Ne.attempt=Mb,Ne.camelCase=u1,Ne.capitalize=f_,Ne.ceil=dn,Ne.clamp=d_,Ne.clone=My,Ne.cloneDeep=sm,Ne.cloneDeepWith=nb,Ne.cloneWith=wy,Ne.conformsTo=s_,Ne.deburr=Xf,Ne.defaultTo=h1,Ne.divide=Di,Ne.endsWith=gb,Ne.eq=Fu,Ne.escape=yb,Ne.escapeRegExp=Am,Ne.every=Vd,Ne.find=qc,Ne.findIndex=hy,Ne.findKey=ub,Ne.findLast=$v,Ne.findLastIndex=mg,Ne.findLastKey=Eg,Ne.floor=oo,Ne.forEach=Zv,Ne.forEachRight=dc,Ne.forIn=mc,Ne.forInRight=cb,Ne.forOwn=dh,Ne.forOwnRight=ju,Ne.get=Hs,Ne.gt=ib,Ne.gte=J0,Ne.has=TA,Ne.hasIn=Gi,Ne.head=Hp,Ne.identity=fu,Ne.includes=yy,Ne.indexOf=dy,Ne.inRange=Ty,Ne.invoke=Bg,Ne.isArguments=Gf,Ne.isArray=lr,Ne.isArrayBuffer=rb,Ne.isArrayLike=fc,Ne.isArrayLikeObject=La,Ne.isBoolean=e1,Ne.isBuffer=Xh,Ne.isDate=$d,Ne.isElement=Lr,Ne.isEmpty=Sy,Ne.isEqual=t1,Ne.isEqualWith=Ey,Ne.isError=n1,Ne.isFinite=By,Ne.isFunction=hu,Ne.isInteger=Mg,Ne.isLength=Wf,Ne.isMap=ob,Ne.isMatch=pc,Ne.isMatchWith=am,Ne.isNaN=Co,Ne.isNative=sb,Ne.isNil=a_,Ne.isNull=gl,Ne.isNumber=Oy,Ne.isObject=Ns,Ne.isObjectLike=$s,Ne.isPlainObject=Jh,Ne.isRegExp=Qf,Ne.isSafeInteger=i1,Ne.isSet=lm,Ne.isString=wg,Ne.isSymbol=du,Ne.isTypedArray=ed,Ne.isUndefined=ab,Ne.isWeakMap=H2,Ne.isWeakSet=ol,Ne.join=HC,Ne.kebabCase=vb,Ne.last=Os,Ne.lastIndexOf=Pf,Ne.lowerCase=Ig,Ne.lowerFirst=bb,Ne.lt=vr,Ne.lte=td,Ne.max=_i,Ne.maxBy=Ar,Ne.mean=Ur,Ne.meanBy=Ao,Ne.min=ep,Ne.minBy=p,Ne.stubArray=fn,Ne.stubFalse=$t,Ne.stubObject=tn,Ne.stubString=mi,Ne.stubTrue=ji,Ne.multiply=l,Ne.nth=qd,Ne.noConflict=v,Ne.noop=S,Ne.now=q0,Ne.pad=Tg,Ne.padEnd=c1,Ne.padStart=ky,Ne.parseInt=p_,Ne.random=Zf,Ne.reduce=by,Ne.reduceRight=Jv,Ne.repeat=m_,Ne.replace=Cb,Ne.result=db,Ne.round=A,Ne.runInContext=Ot,Ne.sample=Q2,Ne.size=i_,Ne.snakeCase=_b,Ne.some=xg,Ne.sortedIndex=W0,Ne.sortedIndexBy=yg,Ne.sortedIndexOf=Xp,Ne.sortedLastIndex=XC,Ne.sortedLastIndexBy=Q0,Ne.sortedLastIndexOf=Nv,Ne.startCase=xb,Ne.startsWith=g_,Ne.subtract=b,Ne.sum=x,Ne.sumBy=B,Ne.template=Ry,Ne.times=jo,Ne.toFinite=zu,Ne.toInteger=Oi,Ne.toLength=Ca,Ne.toLower=gc,Ne.toNumber=_o,Ne.toSafeInteger=Vc,Ne.toString=xo,Ne.toUpper=nd,Ne.trim=Xd,Ne.trimEnd=kg,Ne.trimStart=A1,Ne.truncate=Jd,Ne.unescape=y_,Ne.uniqueId=_t,Ne.upperCase=v_,Ne.upperFirst=Jf,Ne.each=Zv,Ne.eachRight=dc,Ne.first=Hp,d(Ne,(function(){var h={};return lc(Ne,function(g,w){mo.call(Ne.prototype,w)||(h[w]=g)}),h})(),{chain:!1}),Ne.VERSION=i,Io(["bind","bindKey","curry","curryRight","partial","partialRight"],function(h){Ne[h].placeholder=Ne}),Io(["drop","take"],function(h,g){sr.prototype[h]=function(w){w=w===t?1:cs(Oi(w),0);var k=this.__filtered__&&!g?new sr(this):this.clone();return k.__filtered__?k.__takeCount__=Fs(w,k.__takeCount__):k.__views__.push({size:Fs(w,Ie),type:h+(k.__dir__<0?"Right":"")}),k},sr.prototype[h+"Right"]=function(w){return this.reverse()[h](w).reverse()}}),Io(["filter","map","takeWhile"],function(h,g){var w=g+1,k=w==Be||w==Se;sr.prototype[h]=function(F){var j=this.clone();return j.__iteratees__.push({iteratee:ki(F,3),type:w}),j.__filtered__=j.__filtered__||k,j}}),Io(["head","last"],function(h,g){var w="take"+(g?"Right":"");sr.prototype[h]=function(){return this[w](1).value()[0]}}),Io(["initial","tail"],function(h,g){var w="drop"+(g?"":"Right");sr.prototype[h]=function(){return this.__filtered__?new sr(this):this[w](1)}}),sr.prototype.compact=function(){return this.filter(fu)},sr.prototype.find=function(h){return this.filter(h).head()},sr.prototype.findLast=function(h){return this.reverse().find(h)},sr.prototype.invokeMap=U(function(h,g){return typeof h=="function"?new sr(this):this.map(function(w){return uc(w,h,g)})}),sr.prototype.reject=function(h){return this.filter(xy(ki(h)))},sr.prototype.slice=function(h,g){h=Oi(h);var w=this;return w.__filtered__&&(h>0||g<0)?new sr(w):(h<0?w=w.takeRight(-h):h&&(w=w.drop(h)),g!==t&&(g=Oi(g),w=g<0?w.dropRight(-g):w.take(g-h)),w)},sr.prototype.takeRightWhile=function(h){return this.reverse().takeWhile(h).reverse()},sr.prototype.toArray=function(){return this.take(Ie)},lc(sr.prototype,function(h,g){var w=/^(?:filter|find|map|reject)|While$/.test(g),k=/^(?:head|last)$/.test(g),F=Ne[k?"take"+(g=="last"?"Right":""):g],j=k||/^find/.test(g);F&&(Ne.prototype[g]=function(){var H=this.__wrapped__,ne=k?[1]:arguments,ie=H instanceof sr,Ae=ne[0],de=ie||lr(H),Me=function(Mt){var Vt=F.apply(Ne,Tc([Mt],ne));return k&&We?Vt[0]:Vt};de&&w&&typeof Ae=="function"&&Ae.length!=1&&(ie=de=!1);var We=this.__chain__,Ue=!!this.__actions__.length,je=j&&!We,ot=ie&&!Ue;if(!j&&de){H=ot?H:new sr(this);var nt=h.apply(H,ne);return nt.__actions__.push({func:Yh,args:[Me],thisArg:t}),new fl(nt,We)}return je&&ot?h.apply(this,ne):(nt=this.thru(Me),je?k?nt.value()[0]:nt.value():nt)})}),Io(["pop","push","shift","sort","splice","unshift"],function(h){var g=Bd[h],w=/^(?:push|sort|unshift)$/.test(h)?"tap":"thru",k=/^(?:pop|shift)$/.test(h);Ne.prototype[h]=function(){var F=arguments;if(k&&!this.__chain__){var j=this.value();return g.apply(lr(j)?j:[],F)}return this[w](function(H){return g.apply(lr(H)?H:[],F)})}}),lc(sr.prototype,function(h,g){var w=Ne[g];if(w){var k=w.name+"";mo.call(so,k)||(so[k]=[]),so[k].push({name:g,func:w})}}),so[ms(t,Q).name]=[{name:"wrapper",func:t}],sr.prototype.clone=Lc,sr.prototype.reverse=dA,sr.prototype.value=ku,Ne.prototype.at=gy,Ne.prototype.chain=Yd,Ne.prototype.commit=rl,Ne.prototype.next=zf,Ne.prototype.plant=Vh,Ne.prototype.reverse=qv,Ne.prototype.toJSON=Ne.prototype.valueOf=Ne.prototype.value=Yv,Ne.prototype.first=Ne.prototype.head,Ga&&(Ne.prototype[Ga]=Cg),Ne}),Ju=Dp();Hi?((Hi.exports=Ju)._=Ju,ni._=Ju):Ci._=Ju}).call($le)})(w3,w3.exports)),w3.exports}var UM=Hle();const A9=Zl(UM);function Zle(n,e,t){const i=e<0?n.length+e:e;if(i>=0&&i<n.length){const r=t<0?n.length+t:t,[o]=n.splice(e,1);n.splice(r,0,o)}}var fO,UF;function Xle(){if(UF)return fO;UF=1;function n(e){for(var t=5381,i=e.length;i;)t=t*33^e.charCodeAt(--i);return t>>>0}return fO=n,fO}var Jle=Xle();const KF=Zl(Jle);var uf=Uint8Array,vx=Uint16Array,eue=Int32Array,KH=new uf([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),FH=new uf([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),tue=new uf([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),zH=function(n,e){for(var t=new vx(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new eue(t[30]),i=1;i<30;++i)for(var o=t[i];o<t[i+1];++o)r[o]=o-t[i]<<5|i;return{b:t,r}},jH=zH(KH,2),NH=jH.b,nue=jH.r;NH[28]=258,nue[258]=28;var iue=zH(FH,0),rue=iue.b,h9=new vx(32768);for(var ja=0;ja<32768;++ja){var Uy=(ja&43690)>>1|(ja&21845)<<1;Uy=(Uy&52428)>>2|(Uy&13107)<<2,Uy=(Uy&61680)>>4|(Uy&3855)<<4,h9[ja]=((Uy&65280)>>8|(Uy&255)<<8)>>1}var Z3=(function(n,e,t){for(var i=n.length,r=0,o=new vx(e);r<i;++r)n[r]&&++o[n[r]-1];var s=new vx(e);for(r=1;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var a;if(t){a=new vx(1<<e);var c=15-e;for(r=0;r<i;++r)if(n[r])for(var f=r<<4|n[r],y=e-n[r],_=s[n[r]-1]++<<y,E=_|(1<<y)-1;_<=E;++_)a[h9[_]>>c]=f}else for(a=new vx(i),r=0;r<i;++r)n[r]&&(a[r]=h9[s[n[r]-1]++]>>15-n[r]);return a}),KM=new uf(288);for(var ja=0;ja<144;++ja)KM[ja]=8;for(var ja=144;ja<256;++ja)KM[ja]=9;for(var ja=256;ja<280;++ja)KM[ja]=7;for(var ja=280;ja<288;++ja)KM[ja]=8;var GH=new uf(32);for(var ja=0;ja<32;++ja)GH[ja]=5;var oue=Z3(KM,9,1),sue=Z3(GH,5,1),pO=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},ym=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},mO=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},aue=function(n){return(n+7)/8|0},lue=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new uf(n.subarray(e,t))},uue=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],of=function(n,e,t){var i=new Error(e||uue[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,of),!t)throw i;return i},tP=function(n,e,t,i){var r=n.length,o=0;if(!r||e.f&&!e.l)return t||new uf(0);var s=!t,a=s||e.i!=2,c=e.i;s&&(t=new uf(r*3));var f=function(Ye){var ft=t.length;if(Ye>ft){var dt=new uf(Math.max(ft*2,Ye));dt.set(t),t=dt}},y=e.f||0,_=e.p||0,E=e.b||0,I=e.l,P=e.d,K=e.m,z=e.n,Q=r*8;do{if(!I){y=ym(n,_,1);var V=ym(n,_+1,3);if(_+=3,V)if(V==1)I=oue,P=sue,K=9,z=5;else if(V==2){var X=ym(n,_,31)+257,W=ym(n,_+10,15)+4,se=X+ym(n,_+5,31)+1;_+=14;for(var ue=new uf(se),ve=new uf(19),ye=0;ye<W;++ye)ve[tue[ye]]=ym(n,_+ye*3,7);_+=W*3;for(var Ee=pO(ve),_e=(1<<Ee)-1,Be=Z3(ve,Ee,1),ye=0;ye<se;){var Fe=Be[ym(n,_,_e)];_+=Fe&15;var $=Fe>>4;if($<16)ue[ye++]=$;else{var Se=0,qe=0;for($==16?(qe=3+ym(n,_,3),_+=2,Se=ue[ye-1]):$==17?(qe=3+ym(n,_,7),_+=3):$==18&&(qe=11+ym(n,_,127),_+=7);qe--;)ue[ye++]=Se}}var ut=ue.subarray(0,X),ht=ue.subarray(X);K=pO(ut),z=pO(ht),I=Z3(ut,K,1),P=Z3(ht,z,1)}else of(1);else{var $=aue(_)+4,Z=n[$-4]|n[$-3]<<8,ee=$+Z;if(ee>r){c&&of(0);break}a&&f(E+Z),t.set(n.subarray($,ee),E),e.b=E+=Z,e.p=_=ee*8,e.f=y;continue}if(_>Q){c&&of(0);break}}a&&f(E+131072);for(var De=(1<<K)-1,Ie=(1<<z)-1,ze=_;;ze=_){var Se=I[mO(n,_)&De],Te=Se>>4;if(_+=Se&15,_>Q){c&&of(0);break}if(Se||of(2),Te<256)t[E++]=Te;else if(Te==256){ze=_,I=null;break}else{var vt=Te-254;if(Te>264){var ye=Te-257,st=KH[ye];vt=ym(n,_,(1<<st)-1)+NH[ye],_+=st}var Et=P[mO(n,_)&Ie],Pt=Et>>4;Et||of(3),_+=Et&15;var ht=rue[Pt];if(Pt>3){var st=FH[Pt];ht+=mO(n,_)&(1<<st)-1,_+=st}if(_>Q){c&&of(0);break}a&&f(E+131072);var ke=E+vt;if(E<ht){var Oe=o-ht,we=Math.min(ht,ke);for(Oe+E<0&&of(3);E<we;++E)t[E]=i[Oe+E]}for(;E<ke;++E)t[E]=t[E-ht]}}e.l=I,e.p=ze,e.b=E,e.f=y,I&&(y=1,e.m=K,e.d=P,e.n=z)}while(!y);return E!=t.length&&s?lue(t,0,E):t.subarray(0,E)},cue=new uf(0),Aue=function(n){(n[0]!=31||n[1]!=139||n[2]!=8)&&of(6,"invalid gzip data");var e=n[3],t=10;e&4&&(t+=(n[10]|n[11]<<8)+2);for(var i=(e>>3&1)+(e>>4&1);i>0;i-=!n[t++]);return t+(e&2)},hue=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},due=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&of(6,"invalid zlib data"),(n[1]>>5&1)==1&&of(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function fue(n,e){return tP(n,{i:2},e,e)}function pue(n,e){var t=Aue(n);return t+8>n.length&&of(6,"invalid gzip data"),tP(n.subarray(t,-8),{i:2},new uf(hue(n)),e)}function mue(n,e){return tP(n.subarray(due(n),-4),{i:2},e,e)}function gue(n,e){return n[0]==31&&n[1]==139&&n[2]==8?pue(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?fue(n,e):mue(n,e)}var yue=typeof TextDecoder<"u"&&new TextDecoder,vue=0;try{yue.decode(cue,{stream:!0}),vue=1}catch{}var bue=Object.defineProperty,X3=Math.pow,ea=(n,e)=>bue(n,"name",{value:e,configurable:!0}),Mc=(n,e,t)=>new Promise((i,r)=>{var o=c=>{try{a(t.next(c))}catch(f){r(f)}},s=c=>{try{a(t.throw(c))}catch(f){r(f)}},a=c=>c.done?i(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});ea((n,e)=>{let t=!1,i="",r=L.GridLayer.extend({createTile:ea((o,s)=>{let a=document.createElement("img"),c=new AbortController,f=c.signal;return a.cancel=()=>{c.abort()},t||(n.getHeader().then(y=>{y.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):y.tileType===2?i="image/png":y.tileType===3?i="image/jpeg":y.tileType===4?i="image/webp":y.tileType===5&&(i="image/avif")}),t=!0),n.getZxy(o.z,o.x,o.y,f).then(y=>{if(y){let _=new Blob([y.data],{type:i}),E=window.URL.createObjectURL(_);a.src=E,a.cancel=void 0,s(void 0,a)}}).catch(y=>{if(y.name!=="AbortError")throw y}),a},"createTile"),_removeTile:ea(function(o){let s=this._tiles[o];s&&(s.el.cancel&&s.el.cancel(),s.el.width=0,s.el.height=0,s.el.deleted=!0,L.DomUtil.remove(s.el),delete this._tiles[o],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(o)}))},"_removeTile")});return new r(e)},"leafletRasterLayer");var Cue=ea(n=>(e,t)=>{if(t instanceof AbortController)return n(e,t);let i=new AbortController;return n(e,i).then(r=>t(void 0,r.data,r.cacheControl||"",r.expires||""),r=>t(r)).catch(r=>t(r)),{cancel:ea(()=>i.abort(),"cancel")}},"v3compat"),WH=class{constructor(e){this.tilev4=ea((t,i)=>Mc(this,null,function*(){if(t.type==="json"){let I=t.url.substr(10),P=this.tiles.get(I);if(P||(P=new f9(I),this.tiles.set(I,P)),this.metadata)return{data:yield P.getTileJson(t.url)};let K=yield P.getHeader();return(K.minLon>=K.maxLon||K.minLat>=K.maxLat)&&console.error(`Bounds of PMTiles archive ${K.minLon},${K.minLat},${K.maxLon},${K.maxLat} are not valid.`),{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:K.minZoom,maxzoom:K.maxZoom,bounds:[K.minLon,K.minLat,K.maxLon,K.maxLat]}}}let r=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),o=t.url.match(r);if(!o)throw new Error("Invalid PMTiles protocol URL");let s=o[1],a=this.tiles.get(s);a||(a=new f9(s),this.tiles.set(s,a));let c=o[2],f=o[3],y=o[4],_=yield a.getHeader(),E=yield a?.getZxy(+c,+f,+y,i.signal);if(E)return{data:new Uint8Array(E.data),cacheControl:E.cacheControl,expires:E.expires};if(_.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=Cue(this.tilev4),this.tiles=new Map,this.metadata=e?.metadata||!1,this.errorOnMissingTile=e?.errorOnMissingTile||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};ea(WH,"Protocol");var _ue=WH;function QH(n,e){return(e>>>0)*4294967296+(n>>>0)}ea(QH,"toNum");function qH(n,e){let t=e.buf,i=t[e.pos++],r=(i&112)>>4;if(i<128||(i=t[e.pos++],r|=(i&127)<<3,i<128)||(i=t[e.pos++],r|=(i&127)<<10,i<128)||(i=t[e.pos++],r|=(i&127)<<17,i<128)||(i=t[e.pos++],r|=(i&127)<<24,i<128)||(i=t[e.pos++],r|=(i&1)<<31,i<128))return QH(n,r);throw new Error("Expected varint not more than 10 bytes")}ea(qH,"readVarintRemainder");function ox(n){let e=n.buf,t=e[n.pos++],i=t&127;return t<128||(t=e[n.pos++],i|=(t&127)<<7,t<128)||(t=e[n.pos++],i|=(t&127)<<14,t<128)||(t=e[n.pos++],i|=(t&127)<<21,t<128)?i:(t=e[n.pos],i|=(t&15)<<28,qH(i,n))}ea(ox,"readVarint");function nP(n,e,t,i){if(i===0){t===1&&(e[0]=n-1-e[0],e[1]=n-1-e[1]);let r=e[0];e[0]=e[1],e[1]=r}}ea(nP,"rotate");function YH(n,e){let t=X3(2,n),i=e,r=e,o=e,s=[0,0],a=1;for(;a<t;)i=1&o/2,r=1&(o^i),nP(a,s,i,r),s[0]+=a*i,s[1]+=a*r,o=o/4,a*=2;return[n,s[0],s[1]]}ea(YH,"idOnLevel");var xue=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function VH(n,e,t){if(n>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(e>X3(2,n)-1||t>X3(2,n)-1)throw new Error("tile x/y outside zoom level bounds");let i=xue[n],r=X3(2,n),o=0,s=0,a=0,c=[e,t],f=r/2;for(;f>0;)o=(c[0]&f)>0?1:0,s=(c[1]&f)>0?1:0,a+=f*f*(3*o^s),nP(f,c,o,s),f=f/2;return i+a}ea(VH,"zxyToTileId");function Mue(n){let e=0;for(let t=0;t<27;t++){let i=(1<<t)*(1<<t);if(e+i>n)return YH(t,n-e);e+=i}throw new Error("Tile zoom level exceeds max safe number limit (26)")}ea(Mue,"tileIdToZxy");var wue=(n=>(n[n.Unknown=0]="Unknown",n[n.None=1]="None",n[n.Gzip=2]="Gzip",n[n.Brotli=3]="Brotli",n[n.Zstd=4]="Zstd",n))(wue||{});function s6(n,e){return Mc(this,null,function*(){if(e===1||e===0)return n;if(e===2){if(typeof globalThis.DecompressionStream>"u")return gue(new Uint8Array(n));let t=new Response(n).body;if(!t)throw new Error("Failed to read response stream");let i=t.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(i).arrayBuffer()}throw new Error("Compression method not supported")})}ea(s6,"defaultDecompress");var Sue=(n=>(n[n.Unknown=0]="Unknown",n[n.Mvt=1]="Mvt",n[n.Png=2]="Png",n[n.Jpeg=3]="Jpeg",n[n.Webp=4]="Webp",n[n.Avif=5]="Avif",n))(Sue||{});function $H(n){return n===1?".mvt":n===2?".png":n===3?".jpg":n===4?".webp":n===5?".avif":""}ea($H,"tileTypeExt");var Eue=127;function HH(n,e){let t=0,i=n.length-1;for(;t<=i;){let r=i+t>>1,o=e-n[r].tileId;if(o>0)t=r+1;else if(o<0)i=r-1;else return n[r]}return i>=0&&(n[i].runLength===0||e-n[i].tileId<n[i].runLength)?n[i]:null}ea(HH,"findTile");var Bue=class{constructor(e){this.file=e}getKey(){return this.file.name}getBytes(e,t){return Mc(this,null,function*(){return{data:yield this.file.slice(e,e+t).arrayBuffer()}})}};ea(Bue,"FileSource");var ZH=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1;let i="";"navigator"in globalThis&&(i=globalThis.navigator.userAgent||"");let r=i.indexOf("Windows")>-1,o=/Chrome|Chromium|Edg|OPR|Brave/.test(i);this.chromeWindowsNoCache=!1,r&&o&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,i,r){return Mc(this,null,function*(){let o,s;i?s=i:(o=new AbortController,s=o.signal);let a=new Headers(this.customHeaders);a.set("range",`bytes=${e}-${e+t-1}`);let c;this.mustReload?c="reload":this.chromeWindowsNoCache&&(c="no-store");let f=yield fetch(this.url,{signal:s,cache:c,headers:a});if(e===0&&f.status===416){let E=f.headers.get("Content-Range");if(!E||!E.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let I=+E.substr(8);f=yield fetch(this.url,{signal:s,cache:"reload",headers:{range:`bytes=0-${I-1}`}})}let y=f.headers.get("Etag");if(y!=null&&y.startsWith("W/")&&(y=null),f.status===416||r&&y&&y!==r)throw this.mustReload=!0,new d9(`Server returned non-matching ETag ${r} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(f.status>=300)throw new Error(`Bad response code: ${f.status}`);let _=f.headers.get("Content-Length");if(f.status===200&&(!_||+_>t))throw o&&o.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield f.arrayBuffer(),etag:y||void 0,cacheControl:f.headers.get("Cache-Control")||void 0,expires:f.headers.get("Expires")||void 0}})}};ea(ZH,"FetchSource");var Oue=ZH;function rp(n,e){let t=n.getUint32(e+4,!0),i=n.getUint32(e+0,!0);return t*X3(2,32)+i}ea(rp,"getUint64");function XH(n,e){let t=new DataView(n),i=t.getUint8(7);if(i>3)throw new Error(`Archive is spec version ${i} but this library supports up to spec version 3`);return{specVersion:i,rootDirectoryOffset:rp(t,8),rootDirectoryLength:rp(t,16),jsonMetadataOffset:rp(t,24),jsonMetadataLength:rp(t,32),leafDirectoryOffset:rp(t,40),leafDirectoryLength:rp(t,48),tileDataOffset:rp(t,56),tileDataLength:rp(t,64),numAddressedTiles:rp(t,72),numTileEntries:rp(t,80),numTileContents:rp(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}ea(XH,"bytesToHeader");function iP(n){let e={buf:new Uint8Array(n),pos:0},t=ox(e),i=[],r=0;for(let o=0;o<t;o++){let s=ox(e);i.push({tileId:r+s,offset:0,length:0,runLength:1}),r+=s}for(let o=0;o<t;o++)i[o].runLength=ox(e);for(let o=0;o<t;o++)i[o].length=ox(e);for(let o=0;o<t;o++){let s=ox(e);s===0&&o>0?i[o].offset=i[o-1].offset+i[o-1].length:i[o].offset=s-1}return i}ea(iP,"deserializeIndex");var JH=class extends Error{};ea(JH,"EtagMismatch");var d9=JH;function rP(n,e){return Mc(this,null,function*(){let t=yield n.getBytes(0,16384);if(new DataView(t.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let i=t.data.slice(0,Eue),r=XH(i,t.etag),o=t.data.slice(r.rootDirectoryOffset,r.rootDirectoryOffset+r.rootDirectoryLength),s=`${n.getKey()}|${r.etag||""}|${r.rootDirectoryOffset}|${r.rootDirectoryLength}`,a=iP(yield e(o,r.internalCompression));return[r,[s,a.length,a]]})}ea(rP,"getHeaderAndRoot");function oP(n,e,t,i,r){return Mc(this,null,function*(){let o=yield n.getBytes(t,i,void 0,r.etag),s=yield e(o.data,r.internalCompression),a=iP(s);if(a.length===0)throw new Error("Empty directory is invalid");return a})}ea(oP,"getDirectory");var Iue=class{constructor(e=100,t=!0,i=s6){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=i}getHeader(e){return Mc(this,null,function*(){let t=e.getKey(),i=this.cache.get(t);if(i)return i.lastUsed=this.counter++,i.data;let r=yield rP(e,this.decompress);return r[1]&&this.cache.set(r[1][0],{lastUsed:this.counter++,data:r[1][2]}),this.cache.set(t,{lastUsed:this.counter++,data:r[0]}),this.prune(),r[0]})}getDirectory(e,t,i,r){return Mc(this,null,function*(){let o=`${e.getKey()}|${r.etag||""}|${t}|${i}`,s=this.cache.get(o);if(s)return s.lastUsed=this.counter++,s.data;let a=yield oP(e,this.decompress,t,i,r);return this.cache.set(o,{lastUsed:this.counter++,data:a}),this.prune(),a})}prune(){if(this.cache.size>this.maxCacheEntries){let e=1/0,t;this.cache.forEach((i,r)=>{i.lastUsed<e&&(e=i.lastUsed,t=r)}),t&&this.cache.delete(t)}}invalidate(e){return Mc(this,null,function*(){this.cache.delete(e.getKey())})}};ea(Iue,"ResolvedValueCache");var eZ=class{constructor(e=100,t=!0,i=s6){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=i}getHeader(e){return Mc(this,null,function*(){let t=e.getKey(),i=this.cache.get(t);if(i)return i.lastUsed=this.counter++,yield i.data;let r=new Promise((o,s)=>{rP(e,this.decompress).then(a=>{a[1]&&this.cache.set(a[1][0],{lastUsed:this.counter++,data:Promise.resolve(a[1][2])}),o(a[0]),this.prune()}).catch(a=>{s(a)})});return this.cache.set(t,{lastUsed:this.counter++,data:r}),r})}getDirectory(e,t,i,r){return Mc(this,null,function*(){let o=`${e.getKey()}|${r.etag||""}|${t}|${i}`,s=this.cache.get(o);if(s)return s.lastUsed=this.counter++,yield s.data;let a=new Promise((c,f)=>{oP(e,this.decompress,t,i,r).then(y=>{c(y),this.prune()}).catch(y=>{f(y)})});return this.cache.set(o,{lastUsed:this.counter++,data:a}),a})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((i,r)=>{i.lastUsed<e&&(e=i.lastUsed,t=r)}),t&&this.cache.delete(t)}}invalidate(e){return Mc(this,null,function*(){let t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());let i=new Promise((r,o)=>{this.getHeader(e).then(s=>{r(),this.invalidations.delete(t)}).catch(s=>{o(s)})});this.invalidations.set(t,i)})}};ea(eZ,"SharedPromiseCache");var Tue=eZ,tZ=class{constructor(e,t,i){typeof e=="string"?this.source=new Oue(e):this.source=e,i?this.decompress=i:this.decompress=s6,t?this.cache=t:this.cache=new Tue}getHeader(){return Mc(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,i,r){return Mc(this,null,function*(){let o=VH(e,t,i),s=yield this.cache.getHeader(this.source);if(e<s.minZoom||e>s.maxZoom)return;let a=s.rootDirectoryOffset,c=s.rootDirectoryLength;for(let f=0;f<=3;f++){let y=yield this.cache.getDirectory(this.source,a,c,s),_=HH(y,o);if(_){if(_.runLength>0){let E=yield this.source.getBytes(s.tileDataOffset+_.offset,_.length,r,s.etag);return{data:yield this.decompress(E.data,s.tileCompression),cacheControl:E.cacheControl,expires:E.expires}}a=s.leafDirectoryOffset+_.offset,c=_.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(e,t,i,r){return Mc(this,null,function*(){try{return yield this.getZxyAttempt(e,t,i,r)}catch(o){if(o instanceof d9)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,i,r);throw o}})}getMetadataAttempt(){return Mc(this,null,function*(){let e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),i=yield this.decompress(t.data,e.internalCompression),r=new TextDecoder("utf-8");return JSON.parse(r.decode(i))})}getMetadata(){return Mc(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof d9)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return Mc(this,null,function*(){let t=yield this.getHeader(),i=yield this.getMetadata(),r=$H(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${r}`],vector_layers:i.vector_layers,attribution:i.attribution,description:i.description,name:i.name,version:i.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};ea(tZ,"PMTiles");var f9=tZ,kue=8,Due={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},Rue={"*":{type:"source"}},Pue=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Lue={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},Uue={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Kue={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Fue={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},zue={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},jue={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Nue={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Gue=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],Wue={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Que={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},que={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Yue={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Vue={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},$ue={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Hue={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Zue={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Xue={type:"array",value:"*"},Jue={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},ece={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},tce={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},nce={type:"array",value:"*",minimum:1},ice={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},rce={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},oce={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},sce={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},ace=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],lce={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},uce={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},cce={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},Ace={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},hce={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},dce={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},fce={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},pce={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},mce={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},gce={"*":{type:"string"}},No={$version:kue,$root:Due,sources:Rue,source:Pue,source_vector:Lue,source_raster:Uue,source_raster_dem:Kue,source_geojson:Fue,source_video:zue,source_image:jue,layer:Nue,layout:Gue,layout_background:Wue,layout_fill:Que,layout_circle:que,layout_heatmap:Yue,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:Vue,layout_symbol:$ue,layout_raster:Hue,layout_hillshade:Zue,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:Xue,filter_operator:Jue,geometry_type:ece,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:tce,expression:nce,light:ice,sky:rce,terrain:oce,projection:sce,paint:ace,paint_fill:lce,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:uce,paint_circle:cce,paint_heatmap:Ace,paint_symbol:hce,paint_raster:dce,paint_hillshade:fce,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:pce,transition:mce,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:gce};const yce=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function vce(n,e){const t={};for(const i in n)i!=="ref"&&(t[i]=n[i]);return yce.forEach(i=>{i in e&&(t[i]=e[i])}),t}function bce(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=vce(n[t],e[n[t].ref]));return n}function bs(n,e){if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!bs(n[t],e[t]))return!1;return!0}if(typeof n=="object"&&n!==null&&e!==null){if(typeof e!="object"||Object.keys(n).length!==Object.keys(e).length)return!1;for(const i in n)if(!bs(n[i],e[i]))return!1;return!0}return n===e}function sp(n,e){n.push(e)}function nZ(n,e,t){sp(t,{command:"addSource",args:[n,e[n]]})}function iZ(n,e,t){sp(e,{command:"removeSource",args:[n]}),t[n]=!0}function Cce(n,e,t,i){iZ(n,t,i),nZ(n,e,t)}function _ce(n,e,t){let i;for(i in n[t])if(Object.prototype.hasOwnProperty.call(n[t],i)&&i!=="data"&&!bs(n[t][i],e[t][i]))return!1;for(i in e[t])if(Object.prototype.hasOwnProperty.call(e[t],i)&&i!=="data"&&!bs(n[t][i],e[t][i]))return!1;return!0}function xce(n,e,t,i){n=n||{},e=e||{};let r;for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(Object.prototype.hasOwnProperty.call(e,r)||iZ(r,t,i));for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(Object.prototype.hasOwnProperty.call(n,r)?bs(n[r],e[r])||(n[r].type==="geojson"&&e[r].type==="geojson"&&_ce(n,e,r)?sp(t,{command:"setGeoJSONSourceData",args:[r,e[r].data]}):Cce(r,e,t,i)):nZ(r,e,t))}function k5(n,e,t,i,r,o){n=n||{},e=e||{};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(bs(n[s],e[s])||t.push({command:o,args:[i,s,e[s],r]}));for(const s in e)!Object.prototype.hasOwnProperty.call(e,s)||Object.prototype.hasOwnProperty.call(n,s)||bs(n[s],e[s])||t.push({command:o,args:[i,s,e[s],r]})}function FF(n){return n.id}function zF(n,e){return n[e.id]=e,n}function Mce(n,e,t){n=n||[],e=e||[];const i=n.map(FF),r=e.map(FF),o=n.reduce(zF,{}),s=e.reduce(zF,{}),a=i.slice(),c=Object.create(null);let f,y,_,E,I;for(let P=0,K=0;P<i.length;P++)f=i[P],Object.prototype.hasOwnProperty.call(s,f)?K++:(sp(t,{command:"removeLayer",args:[f]}),a.splice(a.indexOf(f,K),1));for(let P=0,K=0;P<r.length;P++)f=r[r.length-1-P],a[a.length-1-P]!==f&&(Object.prototype.hasOwnProperty.call(o,f)?(sp(t,{command:"removeLayer",args:[f]}),a.splice(a.lastIndexOf(f,a.length-K),1)):K++,E=a[a.length-P],sp(t,{command:"addLayer",args:[s[f],E]}),a.splice(a.length-P,0,f),c[f]=!0);for(let P=0;P<r.length;P++)if(f=r[P],y=o[f],_=s[f],!(c[f]||bs(y,_))){if(!bs(y.source,_.source)||!bs(y["source-layer"],_["source-layer"])||!bs(y.type,_.type)){sp(t,{command:"removeLayer",args:[f]}),E=a[a.lastIndexOf(f)+1],sp(t,{command:"addLayer",args:[_,E]});continue}k5(y.layout,_.layout,t,f,null,"setLayoutProperty"),k5(y.paint,_.paint,t,f,null,"setPaintProperty"),bs(y.filter,_.filter)||sp(t,{command:"setFilter",args:[f,_.filter]}),(!bs(y.minzoom,_.minzoom)||!bs(y.maxzoom,_.maxzoom))&&sp(t,{command:"setLayerZoomRange",args:[f,_.minzoom,_.maxzoom]});for(I in y)Object.prototype.hasOwnProperty.call(y,I)&&(I==="layout"||I==="paint"||I==="filter"||I==="metadata"||I==="minzoom"||I==="maxzoom"||(I.indexOf("paint.")===0?k5(y[I],_[I],t,f,I.slice(6),"setPaintProperty"):bs(y[I],_[I])||sp(t,{command:"setLayerProperty",args:[f,I,_[I]]})));for(I in _)!Object.prototype.hasOwnProperty.call(_,I)||Object.prototype.hasOwnProperty.call(y,I)||I==="layout"||I==="paint"||I==="filter"||I==="metadata"||I==="minzoom"||I==="maxzoom"||(I.indexOf("paint.")===0?k5(y[I],_[I],t,f,I.slice(6),"setPaintProperty"):bs(y[I],_[I])||sp(t,{command:"setLayerProperty",args:[f,I,_[I]]}))}}function wce(n,e){if(!n)return[{command:"setStyle",args:[e]}];let t=[];try{if(!bs(n.version,e.version))return[{command:"setStyle",args:[e]}];bs(n.center,e.center)||t.push({command:"setCenter",args:[e.center]}),bs(n.state,e.state)||t.push({command:"setGlobalState",args:[e.state]}),bs(n.centerAltitude,e.centerAltitude)||t.push({command:"setCenterAltitude",args:[e.centerAltitude]}),bs(n.zoom,e.zoom)||t.push({command:"setZoom",args:[e.zoom]}),bs(n.bearing,e.bearing)||t.push({command:"setBearing",args:[e.bearing]}),bs(n.pitch,e.pitch)||t.push({command:"setPitch",args:[e.pitch]}),bs(n.roll,e.roll)||t.push({command:"setRoll",args:[e.roll]}),bs(n.sprite,e.sprite)||t.push({command:"setSprite",args:[e.sprite]}),bs(n.glyphs,e.glyphs)||t.push({command:"setGlyphs",args:[e.glyphs]}),bs(n.transition,e.transition)||t.push({command:"setTransition",args:[e.transition]}),bs(n.light,e.light)||t.push({command:"setLight",args:[e.light]}),bs(n.terrain,e.terrain)||t.push({command:"setTerrain",args:[e.terrain]}),bs(n.sky,e.sky)||t.push({command:"setSky",args:[e.sky]}),bs(n.projection,e.projection)||t.push({command:"setProjection",args:[e.projection]});const i={},r=[];xce(n.sources,e.sources,r,i);const o=[];n.layers&&n.layers.forEach(s=>{"source"in s&&i[s.source]?t.push({command:"removeLayer",args:[s.id]}):o.push(s)}),t=t.concat(r),Mce(o,e.layers,t)}catch(i){console.warn("Unable to compute style diff:",i),t=[{command:"setStyle",args:[e]}]}return t}class zn{constructor(e,t,i,r){this.message=(e?`${e}: `:"")+i,r&&(this.identifier=r),t!=null&&t.__line__&&(this.line=t.__line__)}}function Jx(n,...e){for(const t of e)for(const i in t)n[i]=t[i];return n}let Qg=class extends Error{constructor(e,t){super(t),this.message=t,this.key=e}},Sce=class rZ{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[i,r]of t)this.bindings[i]=r}concat(e){return new rZ(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}};const a6={kind:"null"},Wn={kind:"number"},Xr={kind:"string"},Fr={kind:"boolean"},o0={kind:"color"},l6={kind:"projectionDefinition"},nC={kind:"object"},kr={kind:"value"},Ece={kind:"error"},u6={kind:"collator"},c6={kind:"formatted"},A6={kind:"padding"},S4={kind:"colorArray"},h6={kind:"numberArray"},FM={kind:"resolvedImage"},d6={kind:"variableAnchorOffsetCollection"};function cf(n,e){return{kind:"array",itemType:n,N:e}}function qa(n){if(n.kind==="array"){const e=qa(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const Bce=[a6,Wn,Xr,Fr,o0,l6,c6,nC,cf(kr),A6,h6,S4,FM,d6];function E4(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!E4(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of Bce)if(!E4(t,e))return null}}return`Expected ${qa(n)} but found ${qa(e)} instead.`}function sP(n,e){return e.some(t=>t.kind===n.kind)}function iC(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function Ky(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const oZ=.96422,sZ=1,aZ=.82521,lZ=4/29,Ix=6/29,uZ=3*Ix*Ix,Oce=Ix*Ix*Ix,Ice=Math.PI/180,Tce=180/Math.PI;function cZ(n){return n=n%360,n<0&&(n+=360),n}function AZ([n,e,t,i]){n=gO(n),e=gO(e),t=gO(t);let r,o;const s=yO((.2225045*n+.7168786*e+.0606169*t)/sZ);n===e&&e===t?r=o=s:(r=yO((.4360747*n+.3850649*e+.1430804*t)/oZ),o=yO((.0139322*n+.0971045*e+.7141733*t)/aZ));const a=116*s-16;return[a<0?0:a,500*(r-s),200*(s-o),i]}function gO(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function yO(n){return n>Oce?Math.pow(n,1/3):n/uZ+lZ}function hZ([n,e,t,i]){let r=(n+16)/116,o=isNaN(e)?r:r+e/500,s=isNaN(t)?r:r-t/200;return r=sZ*bO(r),o=oZ*bO(o),s=aZ*bO(s),[vO(3.1338561*o-1.6168667*r-.4906146*s),vO(-.9787684*o+1.9161415*r+.033454*s),vO(.0719453*o-.2289914*r+1.4052427*s),i]}function vO(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function bO(n){return n>Ix?n*n*n:uZ*(n-lZ)}function kce(n){const[e,t,i,r]=AZ(n),o=Math.sqrt(t*t+i*i);return[Math.round(o*1e4)?cZ(Math.atan2(i,t)*Tce):NaN,o,e,r]}function Dce([n,e,t,i]){return n=isNaN(n)?0:n*Ice,hZ([t,Math.cos(n)*e,Math.sin(n)*e,i])}function Rce([n,e,t,i]){n=cZ(n),e/=100,t/=100;function r(o){const s=(o+n/30)%12,a=e*Math.min(t,1-t);return t-a*Math.max(-1,Math.min(s-3,9-s,1))}return[r(0),r(8),r(4),i]}const Pce=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function J3(n,e){return Pce(n,e)?n[e]:void 0}function Lce(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=J3(Uce,n);if(e){const[r,o,s]=e;return[r/255,o/255,s/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const o=n.length<6?1:2;let s=1;return[D5(n.slice(s,s+=o)),D5(n.slice(s,s+=o)),D5(n.slice(s,s+=o)),D5(n.slice(s,s+o)||"ff")]}if(n.startsWith("rgb")){const r=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,o=n.match(r);if(o){const[s,a,c,f,y,_,E,I,P,K,z,Q]=o,V=[f||" ",E||" ",K].join("");if(V==="  "||V==="  /"||V===",,"||V===",,,"){const $=[c,_,P].join(""),Z=$==="%%%"?100:$===""?255:0;if(Z){const ee=[sx(+a/Z,0,1),sx(+y/Z,0,1),sx(+I/Z,0,1),z?jF(+z,Q):1];if(NF(ee))return ee}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,i=n.match(t);if(i){const[r,o,s,a,c,f,y,_,E]=i,I=[s||" ",c||" ",y].join("");if(I==="  "||I==="  /"||I===",,"||I===",,,"){const P=[+o,sx(+a,0,100),sx(+f,0,100),_?jF(+_,E):1];if(NF(P))return Rce(P)}}}function D5(n){return parseInt(n.padEnd(2,n),16)/255}function jF(n,e){return sx(e?n/100:n,0,1)}function sx(n,e,t){return Math.min(Math.max(e,n),t)}function NF(n){return!n.some(Number.isNaN)}const Uce={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function pv(n,e,t){return n+t*(e-n)}function e2(n,e,t){return n.map((i,r)=>pv(i,e[r],t))}function Kce(n){return n==="rgb"||n==="hcl"||n==="lab"}let ta=class ax{constructor(e,t,i,r=1,o=!0){this.r=e,this.g=t,this.b=i,this.a=r,o||(this.r*=r,this.g*=r,this.b*=r,r||this.overwriteGetter("rgb",[e,t,i,r]))}static parse(e){if(e instanceof ax)return e;if(typeof e!="string")return;const t=Lce(e);if(t)return new ax(...t,!1)}get rgb(){const{r:e,g:t,b:i,a:r}=this,o=r||1/0;return this.overwriteGetter("rgb",[e/o,t/o,i/o,r])}get hcl(){return this.overwriteGetter("hcl",kce(this.rgb))}get lab(){return this.overwriteGetter("lab",AZ(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,i,r]=this.rgb;return`rgba(${[e,t,i].map(o=>Math.round(o*255)).join(",")},${r})`}static interpolate(e,t,i,r="rgb"){switch(r){case"rgb":{const[o,s,a,c]=e2(e.rgb,t.rgb,i);return new ax(o,s,a,c,!1)}case"hcl":{const[o,s,a,c]=e.hcl,[f,y,_,E]=t.hcl;let I,P;if(!isNaN(o)&&!isNaN(f)){let $=f-o;f>o&&$>180?$-=360:f<o&&o-f>180&&($+=360),I=o+i*$}else isNaN(o)?isNaN(f)?I=NaN:(I=f,(a===1||a===0)&&(P=y)):(I=o,(_===1||_===0)&&(P=s));const[K,z,Q,V]=Dce([I,P??pv(s,y,i),pv(a,_,i),pv(c,E,i)]);return new ax(K,z,Q,V,!1)}case"lab":{const[o,s,a,c]=hZ(e2(e.lab,t.lab,i));return new ax(o,s,a,c,!1)}}}};ta.black=new ta(0,0,0,1);ta.white=new ta(1,1,1,1);ta.transparent=new ta(0,0,0,0);ta.red=new ta(1,0,0,1);let aP=class{constructor(e,t,i){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}};const Fce=["bottom","center","top"];let p9=class{constructor(e,t,i,r,o,s){this.text=e,this.image=t,this.scale=i,this.fontStack=r,this.textColor=o,this.verticalAlign=s}},_2=class Hw{constructor(e){this.sections=e}static fromString(e){return new Hw([new p9(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Hw?e:Hw.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}},C0=class S3{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof S3)return e;if(typeof e=="number")return new S3([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new S3(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new S3(e2(e.values,t.values,i))}},_0=class E3{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof E3)return e;if(typeof e=="number")return new E3([e]);if(Array.isArray(e)){for(const t of e)if(typeof t!="number")return;return new E3(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new E3(e2(e.values,t.values,i))}},vp=class B3{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof B3)return e;if(typeof e=="string"){const i=ta.parse(e);return i?new B3([i]):void 0}if(!Array.isArray(e))return;const t=[];for(const i of e){if(typeof i!="string")return;const r=ta.parse(i);if(!r)return;t.push(r)}return new B3(t)}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i,r="rgb"){const o=[];if(e.values.length!=t.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${t.values.length}), cannot interpolate.`);for(let s=0;s<e.values.length;s++)o.push(ta.interpolate(e.values[s],t.values[s],i,r));return new B3(o)}},ll=class extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}};const zce=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);let Ov=class Zw{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Zw)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const i=e[t],r=e[t+1];if(typeof i!="string"||!zce.has(i)||!Array.isArray(r)||r.length!==2||typeof r[0]!="number"||typeof r[1]!="number")return}return new Zw(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){const r=e.values,o=t.values;if(r.length!==o.length)throw new ll(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const s=[];for(let a=0;a<r.length;a+=2){if(r[a]!==o[a])throw new ll(`Cannot interpolate values containing mismatched anchors. from[${a}]: ${r[a]}, to[${a}]: ${o[a]}`);s.push(r[a]);const[c,f]=r[a+1],[y,_]=o[a+1];s.push([pv(c,y,i),pv(f,_,i)])}return new Zw(s)}},IC=class dZ{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new dZ({name:e,available:!1}):null}},x2=class lx{constructor(e,t,i){this.from=e,this.to=t,this.transition=i}static interpolate(e,t,i){return new lx(e,t,i)}static parse(e){if(e instanceof lx)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new lx(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new lx(e.from,e.to,e.transition);if(typeof e=="string")return new lx(e,e,1)}};function fZ(n,e,t,i){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof i>"u"||typeof i=="number"&&i>=0&&i<=1?null:`Invalid rgba value [${[n,e,t,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof i=="number"?[n,e,t,i]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function B4(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof x2||n instanceof ta||n instanceof aP||n instanceof _2||n instanceof C0||n instanceof _0||n instanceof vp||n instanceof Ov||n instanceof IC)return!0;if(Array.isArray(n)){for(const e of n)if(!B4(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!B4(n[e]))return!1;return!0}else return!1}function _u(n){if(n===null)return a6;if(typeof n=="string")return Xr;if(typeof n=="boolean")return Fr;if(typeof n=="number")return Wn;if(n instanceof ta)return o0;if(n instanceof x2)return l6;if(n instanceof aP)return u6;if(n instanceof _2)return c6;if(n instanceof C0)return A6;if(n instanceof _0)return h6;if(n instanceof vp)return S4;if(n instanceof Ov)return d6;if(n instanceof IC)return FM;if(Array.isArray(n)){const e=n.length;let t;for(const i of n){const r=_u(i);if(!t)t=r;else{if(t===r)continue;t=kr;break}}return cf(t||kr,e)}else return nC}function e4(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof ta||n instanceof x2||n instanceof _2||n instanceof C0||n instanceof _0||n instanceof vp||n instanceof Ov||n instanceof IC?n.toString():JSON.stringify(n)}let LS=class pZ{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!B4(e[1]))return t.error("invalid value");const i=e[1];let r=_u(i);const o=t.expectedType;return r.kind==="array"&&r.N===0&&o&&o.kind==="array"&&(typeof o.N!="number"||o.N===0)&&(r=o),new pZ(r,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}};const R5={string:Xr,number:Wn,boolean:Fr,object:nC};let M1=class mZ{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=1,r;const o=e[0];if(o==="array"){let a;if(e.length>2){const f=e[1];if(typeof f!="string"||!(f in R5)||f==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);a=R5[f],i++}else a=kr;let c;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);c=e[2],i++}r=cf(a,c)}else{if(!R5[o])throw new Error(`Types doesn't contain name = ${o}`);r=R5[o]}const s=[];for(;i<e.length;i++){const a=t.parse(e[i],i,kr);if(!a)return null;s.push(a)}return new mZ(r,s)}evaluate(e){for(let t=0;t<this.args.length;t++){const i=this.args[t].evaluate(e);if(E4(this.type,_u(i))){if(t===this.args.length-1)throw new ll(`Expected value to be of type ${qa(this.type)}, but found ${qa(_u(i))} instead.`)}else return i}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};const GF={"to-boolean":Fr,"to-color":o0,"to-number":Wn,"to-string":Xr};let bx=class gZ{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[0];if(!GF[i])throw new Error(`Can't parse ${i} as it is not part of the known types`);if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");const r=GF[i],o=[];for(let s=1;s<e.length;s++){const a=t.parse(e[s],s,kr);if(!a)return null;o.push(a)}return new gZ(r,o)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,i;for(const r of this.args){if(t=r.evaluate(e),i=null,t instanceof ta)return t;if(typeof t=="string"){const o=e.parseColor(t);if(o)return o}else if(Array.isArray(t)&&(t.length<3||t.length>4?i=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:i=fZ(t[0],t[1],t[2],t[3]),!i))return new ta(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new ll(i||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const i of this.args){t=i.evaluate(e);const r=C0.parse(t);if(r)return r}throw new ll(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"numberArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=_0.parse(t);if(r)return r}throw new ll(`Could not parse numberArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"colorArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=vp.parse(t);if(r)return r}throw new ll(`Could not parse colorArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const i of this.args){t=i.evaluate(e);const r=Ov.parse(t);if(r)return r}throw new ll(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const i of this.args){if(t=i.evaluate(e),t===null)return 0;const r=Number(t);if(!isNaN(r))return r}throw new ll(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return _2.fromString(e4(this.args[0].evaluate(e)));case"resolvedImage":return IC.fromString(e4(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return e4(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};const jce=["Unknown","Point","LineString","Polygon"];let yZ=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?jce[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache.get(e);return t||(t=ta.parse(e),this._parseColorCache.set(e,t)),t}},vZ=class bZ{constructor(e,t,i=[],r,o=new Sce,s=[]){this.registry=e,this.path=i,this.key=i.map(a=>`[${a}]`).join(""),this.scope=o,this.errors=s,this.expectedType=r,this._isConstant=t}parse(e,t,i,r,o={}){return t?this.concat(t,i,r)._parse(e,o):this._parse(e,o)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function i(r,o,s){return s==="assert"?new M1(o,[r]):s==="coerce"?new bx(o,[r]):r}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if(typeof r!="string")return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const o=this.registry[r];if(o){let s=o.parse(e,this);if(!s)return null;if(this.expectedType){const a=this.expectedType,c=s.type;if((a.kind==="string"||a.kind==="number"||a.kind==="boolean"||a.kind==="object"||a.kind==="array")&&c.kind==="value")s=i(s,a,t.typeAnnotation||"assert");else if(a.kind==="projectionDefinition"&&["string","array"].includes(c.kind)||["color","formatted","resolvedImage"].includes(a.kind)&&["value","string"].includes(c.kind)||["padding","numberArray"].includes(a.kind)&&["value","number","array"].includes(c.kind)||a.kind==="colorArray"&&["value","string","array"].includes(c.kind)||a.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(c.kind))s=i(s,a,t.typeAnnotation||"coerce");else if(this.checkSubtype(a,c))return null}if(!(s instanceof LS)&&s.type.kind!=="resolvedImage"&&this._isConstant(s)){const a=new yZ;try{s=new LS(s.type,s.evaluate(a))}catch(c){return this.error(c.message),null}}return s}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,i){const r=typeof e=="number"?this.path.concat(e):this.path,o=i?this.scope.concat(i):this.scope;return new bZ(this.registry,this._isConstant,r,t||null,o,this.errors)}error(e,...t){const i=`${this.key}${t.map(r=>`[${r}]`).join("")}`;this.errors.push(new Qg(i,e))}checkSubtype(e,t){const i=E4(e,t);return i&&this.error(i),i}},CZ=class _Z{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const i=[];for(let o=1;o<e.length-1;o+=2){const s=e[o];if(typeof s!="string")return t.error(`Expected string, but found ${typeof s} instead.`,o);if(/[^a-zA-Z0-9_]/.test(s))return t.error("Variable names must contain only alphanumeric characters or '_'.",o);const a=t.parse(e[o+1],o+1);if(!a)return null;i.push([s,a])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return r?new _Z(i,r):null}outputDefined(){return this.result.outputDefined()}},xZ=class MZ{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const i=e[1];return t.scope.has(i)?new MZ(i,t.scope.get(i)):t.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}},Nce=class wZ{constructor(e,t,i){this.type=e,this.index=t,this.input=i}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Wn),r=t.parse(e[2],2,cf(t.expectedType||kr));if(!i||!r)return null;const o=r.type;return new wZ(o.itemType,i,r)}evaluate(e){const t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new ll(`Array index out of bounds: ${t} < 0.`);if(t>=i.length)throw new ll(`Array index out of bounds: ${t} > ${i.length-1}.`);if(t!==Math.floor(t))throw new ll(`Array index must be an integer, but found ${t} instead.`);return i[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}},Gce=class SZ{constructor(e,t){this.type=Fr,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,kr),r=t.parse(e[2],2,kr);return!i||!r?null:sP(i.type,[Fr,Xr,Wn,a6,kr])?new SZ(i,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${qa(i.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!iC(t,["boolean","string","number","null"]))throw new ll(`Expected first argument to be of type boolean, string, number or null, but found ${qa(_u(t))} instead.`);if(!iC(i,["string","array"]))throw new ll(`Expected second argument to be of type array or string, but found ${qa(_u(i))} instead.`);return i.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}},Wce=class m9{constructor(e,t,i){this.type=Wn,this.needle=e,this.haystack=t,this.fromIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,kr),r=t.parse(e[2],2,kr);if(!i||!r)return null;if(!sP(i.type,[Fr,Xr,Wn,a6,kr]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${qa(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,Wn);return o?new m9(i,r,o):null}else return new m9(i,r)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!iC(t,["boolean","string","number","null"]))throw new ll(`Expected first argument to be of type boolean, string, number or null, but found ${qa(_u(t))} instead.`);let r;if(this.fromIndex&&(r=this.fromIndex.evaluate(e)),iC(i,["string"])){const o=i.indexOf(t,r);return o===-1?-1:[...i.slice(0,o)].length}else{if(iC(i,["array"]))return i.indexOf(t,r);throw new ll(`Expected second argument to be of type array or string, but found ${qa(_u(i))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}},Qce=class EZ{constructor(e,t,i,r,o,s){this.inputType=e,this.type=t,this.input=i,this.cases=r,this.outputs=o,this.otherwise=s}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let i,r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const o={},s=[];for(let f=2;f<e.length-1;f+=2){let y=e[f];const _=e[f+1];Array.isArray(y)||(y=[y]);const E=t.concat(f);if(y.length===0)return E.error("Expected at least one branch label.");for(const P of y){if(typeof P!="number"&&typeof P!="string")return E.error("Branch labels must be numbers or strings.");if(typeof P=="number"&&Math.abs(P)>Number.MAX_SAFE_INTEGER)return E.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof P=="number"&&Math.floor(P)!==P)return E.error("Numeric branch labels must be integer values.");if(!i)i=_u(P);else if(E.checkSubtype(i,_u(P)))return null;if(typeof o[String(P)]<"u")return E.error("Branch labels must be unique.");o[String(P)]=s.length}const I=t.parse(_,f,r);if(!I)return null;r=r||I.type,s.push(I)}const a=t.parse(e[1],1,kr);if(!a)return null;const c=t.parse(e[e.length-1],e.length-1,r);return!c||a.type.kind!=="value"&&t.concat(1).checkSubtype(i,a.type)?null:new EZ(i,r,a,o,s,c)}evaluate(e){const t=this.input.evaluate(e);return(_u(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}},qce=class BZ{constructor(e,t,i){this.type=e,this.branches=t,this.otherwise=i}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const r=[];for(let s=1;s<e.length-1;s+=2){const a=t.parse(e[s],s,Fr);if(!a)return null;const c=t.parse(e[s+1],s+1,i);if(!c)return null;r.push([a,c]),i=i||c.type}const o=t.parse(e[e.length-1],e.length-1,i);if(!o)return null;if(!i)throw new Error("Can't infer output type");return new BZ(i,r,o)}evaluate(e){for(const[t,i]of this.branches)if(t.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,i]of this.branches)e(t),e(i);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}},Yce=class g9{constructor(e,t,i,r){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,kr),r=t.parse(e[2],2,Wn);if(!i||!r)return null;if(!sP(i.type,[cf(kr),Xr,kr]))return t.error(`Expected first argument to be of type array or string, but found ${qa(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,Wn);return o?new g9(i.type,i,r,o):null}else return new g9(i.type,i,r)}evaluate(e){const t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);let r;if(this.endIndex&&(r=this.endIndex.evaluate(e)),iC(t,["string"]))return[...t].slice(i,r).join("");if(iC(t,["array"]))return t.slice(i,r);throw new ll(`Expected first argument to be of type array or string, but found ${qa(_u(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}};function f6(n,e){const t=n.length-1;let i=0,r=t,o=0,s,a;for(;i<=r;)if(o=Math.floor((i+r)/2),s=n[o],a=n[o+1],s<=e){if(o===t||e<a)return o;i=o+1}else if(s>e)r=o-1;else throw new ll("Input is not a number.");return 0}let OZ=class IZ{constructor(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,o]of i)this.labels.push(r),this.outputs.push(o)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const i=t.parse(e[1],1,Wn);if(!i)return null;const r=[];let o=null;t.expectedType&&t.expectedType.kind!=="value"&&(o=t.expectedType);for(let s=1;s<e.length;s+=2){const a=s===1?-1/0:e[s],c=e[s+1],f=s,y=s+1;if(typeof a!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',f);if(r.length&&r[r.length-1][0]>=a)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',f);const _=t.parse(c,y,o);if(!_)return null;o=o||_.type,r.push([a,_])}return new IZ(o,i,r)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=f6(t,r);return i[s].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}};function Vce(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var CO,WF;function $ce(){if(WF)return CO;WF=1,CO=n;function n(e,t,i,r){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=i,this.p2y=r}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var i=e,r=0;r<8;r++){var o=this.sampleCurveX(i)-e;if(Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i=i-o/s}var a=0,c=1;for(i=e,r=0;r<20&&(o=this.sampleCurveX(i),!(Math.abs(o-e)<t));r++)e>o?a=i:c=i,i=(c-a)*.5+a;return i},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},CO}var Hce=$ce(),Zce=Vce(Hce);let E1=class y9{constructor(e,t,i,r,o){this.type=e,this.operator=t,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(const[s,a]of o)this.labels.push(s),this.outputs.push(a)}static interpolationFactor(e,t,i,r){let o=0;if(e.name==="exponential")o=_O(t,e.base,i,r);else if(e.name==="linear")o=_O(t,1,i,r);else if(e.name==="cubic-bezier"){const s=e.controlPoints;o=new Zce(s[0],s[1],s[2],s[3]).solve(_O(t,1,i,r))}return o}static parse(e,t){let[i,r,o,...s]=e;if(!Array.isArray(r)||r.length===0)return t.error("Expected an interpolation type expression.",1);if(r[0]==="linear")r={name:"linear"};else if(r[0]==="exponential"){const f=r[1];if(typeof f!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:f}}else if(r[0]==="cubic-bezier"){const f=r.slice(1);if(f.length!==4||f.some(y=>typeof y!="number"||y<0||y>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:f}}else return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(o=t.parse(o,2,Wn),!o)return null;const a=[];let c=null;(i==="interpolate-hcl"||i==="interpolate-lab")&&t.expectedType!=S4?c=o0:t.expectedType&&t.expectedType.kind!=="value"&&(c=t.expectedType);for(let f=0;f<s.length;f+=2){const y=s[f],_=s[f+1],E=f+3,I=f+4;if(typeof y!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',E);if(a.length&&a[a.length-1][0]>=y)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',E);const P=t.parse(_,I,c);if(!P)return null;c=c||P.type,a.push([y,P])}return!Ky(c,Wn)&&!Ky(c,l6)&&!Ky(c,o0)&&!Ky(c,A6)&&!Ky(c,h6)&&!Ky(c,S4)&&!Ky(c,d6)&&!Ky(c,cf(Wn))?t.error(`Type ${qa(c)} is not interpolatable.`):new y9(c,i,r,o,a)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=f6(t,r),a=t[s],c=t[s+1],f=y9.interpolationFactor(this.interpolation,r,a,c),y=i[s].evaluate(e),_=i[s+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return pv(y,_,f);case"color":return ta.interpolate(y,_,f);case"padding":return C0.interpolate(y,_,f);case"colorArray":return vp.interpolate(y,_,f);case"numberArray":return _0.interpolate(y,_,f);case"variableAnchorOffsetCollection":return Ov.interpolate(y,_,f);case"array":return e2(y,_,f);case"projectionDefinition":return x2.interpolate(y,_,f)}case"interpolate-hcl":switch(this.type.kind){case"color":return ta.interpolate(y,_,f,"hcl");case"colorArray":return vp.interpolate(y,_,f,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return ta.interpolate(y,_,f,"lab");case"colorArray":return vp.interpolate(y,_,f,"lab")}}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}};function _O(n,e,t,i){const r=i-t,o=n-t;return r===0?0:e===1?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}const Xce={color:ta.interpolate,number:pv,padding:C0.interpolate,numberArray:_0.interpolate,colorArray:vp.interpolate,variableAnchorOffsetCollection:Ov.interpolate,array:e2};let TZ=class v9{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=null;const r=t.expectedType;r&&r.kind!=="value"&&(i=r);const o=[];for(const a of e.slice(1)){const c=t.parse(a,1+o.length,i,void 0,{typeAnnotation:"omit"});if(!c)return null;i=i||c.type,o.push(c)}if(!i)throw new Error("No output type");return r&&o.some(a=>E4(r,a.type))?new v9(kr,o):new v9(i,o)}evaluate(e){let t=null,i=0,r;for(const o of this.args)if(i++,t=o.evaluate(e),t&&t instanceof IC&&!t.available&&(r||(r=t.name),t=null,i===this.args.length&&(t=r)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};function QF(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function Jce(n,e,t){return e===t}function eAe(n,e,t){return e!==t}function tAe(n,e,t){return e<t}function nAe(n,e,t){return e>t}function iAe(n,e,t){return e<=t}function rAe(n,e,t){return e>=t}function kZ(n,e,t,i){return i.compare(e,t)===0}function oAe(n,e,t,i){return!kZ(n,e,t,i)}function sAe(n,e,t,i){return i.compare(e,t)<0}function aAe(n,e,t,i){return i.compare(e,t)>0}function lAe(n,e,t,i){return i.compare(e,t)<=0}function uAe(n,e,t,i){return i.compare(e,t)>=0}function M2(n,e,t){const i=n!=="=="&&n!=="!=";return class DZ{constructor(o,s,a){this.type=Fr,this.lhs=o,this.rhs=s,this.collator=a,this.hasUntypedArgument=o.type.kind==="value"||s.type.kind==="value"}static parse(o,s){if(o.length!==3&&o.length!==4)return s.error("Expected two or three arguments.");const a=o[0];let c=s.parse(o[1],1,kr);if(!c)return null;if(!QF(a,c.type))return s.concat(1).error(`"${a}" comparisons are not supported for type '${qa(c.type)}'.`);let f=s.parse(o[2],2,kr);if(!f)return null;if(!QF(a,f.type))return s.concat(2).error(`"${a}" comparisons are not supported for type '${qa(f.type)}'.`);if(c.type.kind!==f.type.kind&&c.type.kind!=="value"&&f.type.kind!=="value")return s.error(`Cannot compare types '${qa(c.type)}' and '${qa(f.type)}'.`);i&&(c.type.kind==="value"&&f.type.kind!=="value"?c=new M1(f.type,[c]):c.type.kind!=="value"&&f.type.kind==="value"&&(f=new M1(c.type,[f])));let y=null;if(o.length===4){if(c.type.kind!=="string"&&f.type.kind!=="string"&&c.type.kind!=="value"&&f.type.kind!=="value")return s.error("Cannot use collator to compare non-string types.");if(y=s.parse(o[3],3,u6),!y)return null}return new DZ(c,f,y)}evaluate(o){const s=this.lhs.evaluate(o),a=this.rhs.evaluate(o);if(i&&this.hasUntypedArgument){const c=_u(s),f=_u(a);if(c.kind!==f.kind||!(c.kind==="string"||c.kind==="number"))throw new ll(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${c.kind}, ${f.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const c=_u(s),f=_u(a);if(c.kind!=="string"||f.kind!=="string")return e(o,s,a)}return this.collator?t(o,s,a,this.collator.evaluate(o)):e(o,s,a)}eachChild(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)}outputDefined(){return!0}}}const cAe=M2("==",Jce,kZ),AAe=M2("!=",eAe,oAe),hAe=M2("<",tAe,sAe),dAe=M2(">",nAe,aAe),fAe=M2("<=",iAe,lAe),pAe=M2(">=",rAe,uAe);let RZ=class PZ{constructor(e,t,i){this.type=u6,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");const r=t.parse(i["case-sensitive"]===void 0?!1:i["case-sensitive"],1,Fr);if(!r)return null;const o=t.parse(i["diacritic-sensitive"]===void 0?!1:i["diacritic-sensitive"],1,Fr);if(!o)return null;let s=null;return i.locale&&(s=t.parse(i.locale,1,Xr),!s)?null:new PZ(r,o,s)}evaluate(e){return new aP(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}},mAe=class LZ{constructor(e,t,i,r,o){this.type=Xr,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=o}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const i=t.parse(e[1],1,Wn);if(!i)return null;const r=e[2];if(typeof r!="object"||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let o=null;if(r.locale&&(o=t.parse(r.locale,1,Xr),!o))return null;let s=null;if(r.currency&&(s=t.parse(r.currency,1,Xr),!s))return null;let a=null;if(r["min-fraction-digits"]&&(a=t.parse(r["min-fraction-digits"],1,Wn),!a))return null;let c=null;return r["max-fraction-digits"]&&(c=t.parse(r["max-fraction-digits"],1,Wn),!c)?null:new LZ(i,o,s,a,c)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}},gAe=class UZ{constructor(e){this.type=c6,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");const r=[];let o=!1;for(let s=1;s<=e.length-1;++s){const a=e[s];if(o&&typeof a=="object"&&!Array.isArray(a)){o=!1;let c=null;if(a["font-scale"]&&(c=t.parse(a["font-scale"],1,Wn),!c))return null;let f=null;if(a["text-font"]&&(f=t.parse(a["text-font"],1,cf(Xr)),!f))return null;let y=null;if(a["text-color"]&&(y=t.parse(a["text-color"],1,o0),!y))return null;let _=null;if(a["vertical-align"]){if(typeof a["vertical-align"]=="string"&&!Fce.includes(a["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${a["vertical-align"]}' instead.`);if(_=t.parse(a["vertical-align"],1,Xr),!_)return null}const E=r[r.length-1];E.scale=c,E.font=f,E.textColor=y,E.verticalAlign=_}else{const c=t.parse(e[s],1,kr);if(!c)return null;const f=c.type.kind;if(f!=="string"&&f!=="value"&&f!=="null"&&f!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,r.push({content:c,scale:null,font:null,textColor:null,verticalAlign:null})}}return new UZ(r)}evaluate(e){const t=i=>{const r=i.content.evaluate(e);return _u(r)===FM?new p9("",r,null,null,null,i.verticalAlign?i.verticalAlign.evaluate(e):null):new p9(e4(r),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null,i.verticalAlign?i.verticalAlign.evaluate(e):null)};return new _2(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}},yAe=class KZ{constructor(e){this.type=FM,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const i=t.parse(e[1],1,Xr);return i?new KZ(i):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),i=IC.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i}eachChild(e){e(this.input)}outputDefined(){return!1}},vAe=class FZ{constructor(e){this.type=Wn,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${qa(i.type)} instead.`):new FZ(i):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new ll(`Expected value to be of type string or array, but found ${qa(_u(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}};const s0=8192;function bAe(n,e){const t=CAe(n[0]),i=xAe(n[1]),r=Math.pow(2,e.z);return[Math.round(t*r*s0),Math.round(i*r*s0)]}function lP(n,e){const t=Math.pow(2,e.z),i=(n[0]/s0+e.x)/t,r=(n[1]/s0+e.y)/t;return[_Ae(i),MAe(r)]}function CAe(n){return(180+n)/360}function _Ae(n){return n*360-180}function xAe(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function MAe(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function zM(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function O4(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function wAe(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function SAe(n,e,t){const i=n[0]-e[0],r=n[1]-e[1],o=n[0]-t[0],s=n[1]-t[1];return i*s-o*r===0&&i*o<=0&&r*s<=0}function p6(n,e,t,i){const r=[e[0]-n[0],e[1]-n[1]],o=[i[0]-t[0],i[1]-t[1]];return IAe(o,r)===0?!1:!!(qF(n,e,t,i)&&qF(t,i,n,e))}function EAe(n,e,t){for(const i of t)for(let r=0;r<i.length-1;++r)if(p6(n,e,i[r],i[r+1]))return!0;return!1}function w2(n,e,t=!1){let i=!1;for(const r of e)for(let o=0;o<r.length-1;o++){if(SAe(n,r[o],r[o+1]))return t;wAe(n,r[o],r[o+1])&&(i=!i)}return i}function BAe(n,e){for(const t of e)if(w2(n,t))return!0;return!1}function zZ(n,e){for(const t of n)if(!w2(t,e))return!1;for(let t=0;t<n.length-1;++t)if(EAe(n[t],n[t+1],e))return!1;return!0}function OAe(n,e){for(const t of e)if(zZ(n,t))return!0;return!1}function IAe(n,e){return n[0]*e[1]-n[1]*e[0]}function qF(n,e,t,i){const r=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1],c=i[0]-t[0],f=i[1]-t[1],y=r*f-c*o,_=s*f-c*a;return y>0&&_<0||y<0&&_>0}function uP(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=[];for(let s=0;s<n[r].length;s++){const a=bAe(n[r][s],t);zM(e,a),o.push(a)}i.push(o)}return i}function jZ(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=uP(n[r],e,t);i.push(o)}return i}function NZ(n,e,t,i){if(n[0]<t[0]||n[0]>t[2]){const r=i*.5;let o=n[0]-t[0]>r?-i:t[0]-n[0]>r?i:0;o===0&&(o=n[0]-t[2]>r?-i:t[2]-n[0]>r?i:0),n[0]+=o}zM(e,n)}function TAe(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function YF(n,e,t,i){const r=Math.pow(2,i.z)*s0,o=[i.x*s0,i.y*s0],s=[];for(const a of n)for(const c of a){const f=[c.x+o[0],c.y+o[1]];NZ(f,e,t,r),s.push(f)}return s}function VF(n,e,t,i){const r=Math.pow(2,i.z)*s0,o=[i.x*s0,i.y*s0],s=[];for(const a of n){const c=[];for(const f of a){const y=[f.x+o[0],f.y+o[1]];zM(e,y),c.push(y)}s.push(c)}if(e[2]-e[0]<=r/2){TAe(e);for(const a of s)for(const c of a)NZ(c,e,t,r)}return s}function kAe(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=uP(e.coordinates,i,r),s=YF(n.geometry(),t,i,r);if(!O4(t,i))return!1;for(const a of s)if(!w2(a,o))return!1}if(e.type==="MultiPolygon"){const o=jZ(e.coordinates,i,r),s=YF(n.geometry(),t,i,r);if(!O4(t,i))return!1;for(const a of s)if(!BAe(a,o))return!1}return!0}function DAe(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=uP(e.coordinates,i,r),s=VF(n.geometry(),t,i,r);if(!O4(t,i))return!1;for(const a of s)if(!zZ(a,o))return!1}if(e.type==="MultiPolygon"){const o=jZ(e.coordinates,i,r),s=VF(n.geometry(),t,i,r);if(!O4(t,i))return!1;for(const a of s)if(!OAe(a,o))return!1}return!0}let cP=class Xw{constructor(e,t){this.type=Fr,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(B4(e[1])){const i=e[1];if(i.type==="FeatureCollection"){const r=[];for(const o of i.features){const{type:s,coordinates:a}=o.geometry;s==="Polygon"&&r.push(a),s==="MultiPolygon"&&r.push(...a)}if(r.length){const o={type:"MultiPolygon",coordinates:r};return new Xw(i,o)}}else if(i.type==="Feature"){const r=i.geometry.type;if(r==="Polygon"||r==="MultiPolygon")return new Xw(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new Xw(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return kAe(e,this.geometries);if(e.geometryType()==="LineString")return DAe(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}},GZ=class{constructor(e=[],t=(i,r)=>i<r?-1:i>r?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:i}=this,r=t[e];for(;e>0;){const o=e-1>>1,s=t[o];if(i(r,s)>=0)break;t[e]=s,e=o}t[e]=r}_down(e){const{data:t,compare:i}=this,r=this.length>>1,o=t[e];for(;e<r;){let s=(e<<1)+1;const a=s+1;if(a<this.length&&i(t[a],t[s])<0&&(s=a),i(t[s],o)>=0)break;t[e]=t[s],e=s}t[e]=o}};function RAe(n,e){if(n.length<=1)return[n];const i=[];let r,o;for(const s of n){const a=PAe(s);a!==0&&(s.area=Math.abs(a),o===void 0&&(o=a<0),o===a<0?(r&&i.push(r),r=[s]):r.push(s))}return r&&i.push(r),i}function PAe(n){let e=0;for(let t=0,i=n.length,r=i-1,o,s;t<i;r=t++)o=n[t],s=n[r],e+=(s.x-o.x)*(o.y+s.y);return e}const LAe=6378.137,$F=1/298.257223563,HF=$F*(2-$F),ZF=Math.PI/180;let AP=class{constructor(e){const t=ZF*LAe*1e3,i=Math.cos(e*ZF),r=1/(1-HF*(1-i*i)),o=Math.sqrt(r);this.kx=t*o*i,this.ky=t*o*r*(1-HF)}distance(e,t){const i=this.wrap(e[0]-t[0])*this.kx,r=(e[1]-t[1])*this.ky;return Math.sqrt(i*i+r*r)}pointOnLine(e,t){let i=1/0,r,o,s,a;for(let c=0;c<e.length-1;c++){let f=e[c][0],y=e[c][1],_=this.wrap(e[c+1][0]-f)*this.kx,E=(e[c+1][1]-y)*this.ky,I=0;(_!==0||E!==0)&&(I=(this.wrap(t[0]-f)*this.kx*_+(t[1]-y)*this.ky*E)/(_*_+E*E),I>1?(f=e[c+1][0],y=e[c+1][1]):I>0&&(f+=_/this.kx*I,y+=E/this.ky*I)),_=this.wrap(t[0]-f)*this.kx,E=(t[1]-y)*this.ky;const P=_*_+E*E;P<i&&(i=P,r=f,o=y,s=c,a=I)}return{point:[r,o],index:s,t:Math.max(0,Math.min(1,a))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}};const b9=100,C9=50;function WZ(n,e){return e[0]-n[0]}function US(n){return n[1]-n[0]+1}function D1(n,e){return n[1]>=n[0]&&n[1]<e}function _9(n,e){if(n[0]>n[1])return[null,null];const t=US(n);if(e){if(t===2)return[n,null];const r=Math.floor(t/2);return[[n[0],n[0]+r],[n[0]+r,n[1]]]}if(t===1)return[n,null];const i=Math.floor(t/2)-1;return[[n[0],n[0]+i],[n[0]+i+1,n[1]]]}function x9(n,e){if(!D1(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let i=e[0];i<=e[1];++i)zM(t,n[i]);return t}function M9(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const i of t)zM(e,i);return e}function XF(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function hP(n,e,t){if(!XF(n)||!XF(e))return NaN;let i=0,r=0;return n[2]<e[0]&&(i=e[0]-n[2]),n[0]>e[2]&&(i=n[0]-e[2]),n[1]>e[3]&&(r=n[1]-e[3]),n[3]<e[1]&&(r=e[1]-n[3]),t.distance([0,0],[i,r])}function qb(n,e,t){const i=t.pointOnLine(e,n);return t.distance(n,i.point)}function dP(n,e,t,i,r){const o=Math.min(qb(n,[t,i],r),qb(e,[t,i],r)),s=Math.min(qb(t,[n,e],r),qb(i,[n,e],r));return Math.min(o,s)}function UAe(n,e,t,i,r){if(!(D1(e,n.length)&&D1(i,t.length)))return 1/0;let s=1/0;for(let a=e[0];a<e[1];++a){const c=n[a],f=n[a+1];for(let y=i[0];y<i[1];++y){const _=t[y],E=t[y+1];if(p6(c,f,_,E))return 0;s=Math.min(s,dP(c,f,_,E,r))}}return s}function KAe(n,e,t,i,r){if(!(D1(e,n.length)&&D1(i,t.length)))return NaN;let s=1/0;for(let a=e[0];a<=e[1];++a)for(let c=i[0];c<=i[1];++c)if(s=Math.min(s,r.distance(n[a],t[c])),s===0)return s;return s}function FAe(n,e,t){if(w2(n,e,!0))return 0;let i=1/0;for(const r of e){const o=r[0],s=r[r.length-1];if(o!==s&&(i=Math.min(i,qb(n,[s,o],t)),i===0))return i;const a=t.pointOnLine(r,n);if(i=Math.min(i,t.distance(n,a.point)),i===0)return i}return i}function zAe(n,e,t,i){if(!D1(e,n.length))return NaN;for(let o=e[0];o<=e[1];++o)if(w2(n[o],t,!0))return 0;let r=1/0;for(let o=e[0];o<e[1];++o){const s=n[o],a=n[o+1];for(const c of t)for(let f=0,y=c.length,_=y-1;f<y;_=f++){const E=c[_],I=c[f];if(p6(s,a,E,I))return 0;r=Math.min(r,dP(s,a,E,I,i))}}return r}function JF(n,e){for(const t of n)for(const i of t)if(w2(i,e,!0))return!0;return!1}function jAe(n,e,t,i=1/0){const r=M9(n),o=M9(e);if(i!==1/0&&hP(r,o,t)>=i)return i;if(O4(r,o)){if(JF(n,e))return 0}else if(JF(e,n))return 0;let s=1/0;for(const a of n)for(let c=0,f=a.length,y=f-1;c<f;y=c++){const _=a[y],E=a[c];for(const I of e)for(let P=0,K=I.length,z=K-1;P<K;z=P++){const Q=I[z],V=I[P];if(p6(_,E,Q,V))return 0;s=Math.min(s,dP(_,E,Q,V,t))}}return s}function ez(n,e,t,i,r,o){if(!o)return;const s=hP(x9(i,o),r,t);s<e&&n.push([s,o,[0,0]])}function P5(n,e,t,i,r,o,s){if(!o||!s)return;const a=hP(x9(i,o),x9(r,s),t);a<e&&n.push([a,o,s])}function KS(n,e,t,i,r=1/0){let o=Math.min(i.distance(n[0],t[0][0]),r);if(o===0)return o;const s=new GZ([[0,[0,n.length-1],[0,0]]],WZ),a=M9(t);for(;s.length>0;){const c=s.pop();if(c[0]>=o)continue;const f=c[1],y=e?C9:b9;if(US(f)<=y){if(!D1(f,n.length))return NaN;if(e){const _=zAe(n,f,t,i);if(isNaN(_)||_===0)return _;o=Math.min(o,_)}else for(let _=f[0];_<=f[1];++_){const E=FAe(n[_],t,i);if(o=Math.min(o,E),o===0)return 0}}else{const _=_9(f,e);ez(s,o,i,n,a,_[0]),ez(s,o,i,n,a,_[1])}}return o}function FS(n,e,t,i,r,o=1/0){let s=Math.min(o,r.distance(n[0],t[0]));if(s===0)return s;const a=new GZ([[0,[0,n.length-1],[0,t.length-1]]],WZ);for(;a.length>0;){const c=a.pop();if(c[0]>=s)continue;const f=c[1],y=c[2],_=e?C9:b9,E=i?C9:b9;if(US(f)<=_&&US(y)<=E){if(!D1(f,n.length)&&D1(y,t.length))return NaN;let I;if(e&&i)I=UAe(n,f,t,y,r),s=Math.min(s,I);else if(e&&!i){const P=n.slice(f[0],f[1]+1);for(let K=y[0];K<=y[1];++K)if(I=qb(t[K],P,r),s=Math.min(s,I),s===0)return s}else if(!e&&i){const P=t.slice(y[0],y[1]+1);for(let K=f[0];K<=f[1];++K)if(I=qb(n[K],P,r),s=Math.min(s,I),s===0)return s}else I=KAe(n,f,t,y,r),s=Math.min(s,I)}else{const I=_9(f,e),P=_9(y,i);P5(a,s,r,n,t,I[0],P[0]),P5(a,s,r,n,t,I[0],P[1]),P5(a,s,r,n,t,I[1],P[0]),P5(a,s,r,n,t,I[1],P[1])}}return s}function NAe(n,e){const t=n.geometry(),i=t.flat().map(s=>lP([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new AP(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,FS(i,!1,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,FS(i,!1,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,KS(i,!1,s.coordinates,r,o));break}if(o===0)return o}return o}function GAe(n,e){const t=n.geometry(),i=t.flat().map(s=>lP([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new AP(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,FS(i,!0,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,FS(i,!0,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,KS(i,!0,s.coordinates,r,o));break}if(o===0)return o}return o}function WAe(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const i=RAe(t).map(s=>s.map(a=>a.map(c=>lP([c.x,c.y],n.canonical)))),r=new AP(i[0][0][0][1]);let o=1/0;for(const s of e)for(const a of i){switch(s.type){case"Point":o=Math.min(o,KS([s.coordinates],!1,a,r,o));break;case"LineString":o=Math.min(o,KS(s.coordinates,!0,a,r,o));break;case"Polygon":o=Math.min(o,jAe(a,s.coordinates,r,o));break}if(o===0)return o}return o}function xO(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}let fP=class Jw{constructor(e,t){this.type=Wn,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(B4(e[1])){const i=e[1];if(i.type==="FeatureCollection")return new Jw(i,i.features.map(r=>xO(r.geometry)).flat());if(i.type==="Feature")return new Jw(i,xO(i.geometry));if("type"in i&&"coordinates"in i)return new Jw(i,xO(i))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return NAe(e,this.geometries);if(e.geometryType()==="LineString")return GAe(e,this.geometries);if(e.geometryType()==="Polygon")return WAe(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}},pP=class QZ{constructor(e){this.type=kr,this.key=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=e[1];return i==null?t.error("Global state property must be defined."):typeof i!="string"?t.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new QZ(i)}evaluate(e){var t;const i=(t=e.globals)===null||t===void 0?void 0:t.globalState;return!i||Object.keys(i).length===0?null:J3(i,this.key)}eachChild(){}outputDefined(){return!1}};const mP={"==":cAe,"!=":AAe,">":dAe,"<":hAe,">=":pAe,"<=":fAe,array:M1,at:Nce,boolean:M1,case:qce,coalesce:TZ,collator:RZ,format:gAe,image:yAe,in:Gce,"index-of":Wce,interpolate:E1,"interpolate-hcl":E1,"interpolate-lab":E1,length:vAe,let:CZ,literal:LS,match:Qce,number:M1,"number-format":mAe,object:M1,slice:Yce,step:OZ,string:M1,"to-boolean":bx,"to-color":bx,"to-number":bx,"to-string":bx,var:xZ,within:cP,distance:fP,"global-state":pP};let S2=class O3{constructor(e,t,i,r){this.name=e,this.type=t,this._evaluate=i,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const i=e[0],r=O3.definitions[i];if(!r)return t.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const o=Array.isArray(r)?r[0]:r.type,s=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=s.filter(([f])=>!Array.isArray(f)||f.length===e.length-1);let c=null;for(const[f,y]of a){c=new vZ(t.registry,zS,t.path,null,t.scope);const _=[];let E=!1;for(let I=1;I<e.length;I++){const P=e[I],K=Array.isArray(f)?f[I-1]:f.type,z=c.parse(P,1+_.length,K);if(!z){E=!0;break}_.push(z)}if(!E){if(Array.isArray(f)&&f.length!==_.length){c.error(`Expected ${f.length} arguments, but found ${_.length} instead.`);continue}for(let I=0;I<_.length;I++){const P=Array.isArray(f)?f[I]:f.type,K=_[I];c.concat(I+1).checkSubtype(P,K.type)}if(c.errors.length===0)return new O3(i,o,y,_)}}if(a.length===1)t.errors.push(...c.errors);else{const y=(a.length?a:s).map(([E])=>qAe(E)).join(" | "),_=[];for(let E=1;E<e.length;E++){const I=t.parse(e[E],1+_.length);if(!I)return null;_.push(qa(I.type))}t.error(`Expected arguments of type ${y}, but found (${_.join(", ")}) instead.`)}return null}static register(e,t){O3.definitions=t;for(const i in t)e[i]=O3}};function tz(n,[e,t,i,r]){e=e.evaluate(n),t=t.evaluate(n),i=i.evaluate(n);const o=r?r.evaluate(n):1,s=fZ(e,t,i,o);if(s)throw new ll(s);return new ta(e/255,t/255,i/255,o,!1)}function nz(n,e){return n in e}function MO(n,e){const t=e[n];return typeof t>"u"?null:t}function QAe(n,e,t,i){for(;t<=i;){const r=t+i>>1;if(e[r]===n)return!0;e[r]>n?i=r-1:t=r+1}return!1}function Ib(n){return{type:n}}S2.register(mP,{error:[Ece,[Xr],(n,[e])=>{throw new ll(e.evaluate(n))}],typeof:[Xr,[kr],(n,[e])=>qa(_u(e.evaluate(n)))],"to-rgba":[cf(Wn,4),[o0],(n,[e])=>{const[t,i,r,o]=e.evaluate(n).rgb;return[t*255,i*255,r*255,o]}],rgb:[o0,[Wn,Wn,Wn],tz],rgba:[o0,[Wn,Wn,Wn,Wn],tz],has:{type:Fr,overloads:[[[Xr],(n,[e])=>nz(e.evaluate(n),n.properties())],[[Xr,nC],(n,[e,t])=>nz(e.evaluate(n),t.evaluate(n))]]},get:{type:kr,overloads:[[[Xr],(n,[e])=>MO(e.evaluate(n),n.properties())],[[Xr,nC],(n,[e,t])=>MO(e.evaluate(n),t.evaluate(n))]]},"feature-state":[kr,[Xr],(n,[e])=>MO(e.evaluate(n),n.featureState||{})],properties:[nC,[],n=>n.properties()],"geometry-type":[Xr,[],n=>n.geometryType()],id:[kr,[],n=>n.id()],zoom:[Wn,[],n=>n.globals.zoom],"heatmap-density":[Wn,[],n=>n.globals.heatmapDensity||0],elevation:[Wn,[],n=>n.globals.elevation||0],"line-progress":[Wn,[],n=>n.globals.lineProgress||0],accumulated:[kr,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[Wn,Ib(Wn),(n,e)=>{let t=0;for(const i of e)t+=i.evaluate(n);return t}],"*":[Wn,Ib(Wn),(n,e)=>{let t=1;for(const i of e)t*=i.evaluate(n);return t}],"-":{type:Wn,overloads:[[[Wn,Wn],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[Wn],(n,[e])=>-e.evaluate(n)]]},"/":[Wn,[Wn,Wn],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[Wn,[Wn,Wn],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[Wn,[],()=>Math.LN2],pi:[Wn,[],()=>Math.PI],e:[Wn,[],()=>Math.E],"^":[Wn,[Wn,Wn],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[Wn,[Wn],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[Wn,[Wn],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[Wn,[Wn],(n,[e])=>Math.log(e.evaluate(n))],log2:[Wn,[Wn],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[Wn,[Wn],(n,[e])=>Math.sin(e.evaluate(n))],cos:[Wn,[Wn],(n,[e])=>Math.cos(e.evaluate(n))],tan:[Wn,[Wn],(n,[e])=>Math.tan(e.evaluate(n))],asin:[Wn,[Wn],(n,[e])=>Math.asin(e.evaluate(n))],acos:[Wn,[Wn],(n,[e])=>Math.acos(e.evaluate(n))],atan:[Wn,[Wn],(n,[e])=>Math.atan(e.evaluate(n))],min:[Wn,Ib(Wn),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[Wn,Ib(Wn),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[Wn,[Wn],(n,[e])=>Math.abs(e.evaluate(n))],round:[Wn,[Wn],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[Wn,[Wn],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[Wn,[Wn],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[Fr,[Xr,kr],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[Fr,[kr],(n,[e])=>n.id()===e.value],"filter-type-==":[Fr,[Xr],(n,[e])=>n.geometryType()===e.value],"filter-<":[Fr,[Xr,kr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<r}],"filter-id-<":[Fr,[kr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<i}],"filter->":[Fr,[Xr,kr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>r}],"filter-id->":[Fr,[kr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>i}],"filter-<=":[Fr,[Xr,kr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<=r}],"filter-id-<=":[Fr,[kr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<=i}],"filter->=":[Fr,[Xr,kr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>=r}],"filter-id->=":[Fr,[kr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>=i}],"filter-has":[Fr,[kr],(n,[e])=>e.value in n.properties()],"filter-has-id":[Fr,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[Fr,[cf(Xr)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[Fr,[cf(kr)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[Fr,[Xr,cf(kr)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[Fr,[Xr,cf(kr)],(n,[e,t])=>QAe(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:Fr,overloads:[[[Fr,Fr],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[Ib(Fr),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:Fr,overloads:[[[Fr,Fr],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[Ib(Fr),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[Fr,[Fr],(n,[e])=>!e.evaluate(n)],"is-supported-script":[Fr,[Xr],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[Xr,[Xr],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[Xr,[Xr],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[Xr,Ib(kr),(n,e)=>e.map(t=>e4(t.evaluate(n))).join("")],"resolved-locale":[Xr,[u6],(n,[e])=>e.evaluate(n).resolvedLocale()]});function qAe(n){return Array.isArray(n)?`(${n.map(qa).join(", ")})`:`(${qa(n.type)}...)`}function zS(n){if(n instanceof xZ)return zS(n.boundExpression);if(n instanceof S2&&n.name==="error")return!1;if(n instanceof RZ)return!1;if(n instanceof cP)return!1;if(n instanceof fP)return!1;if(n instanceof pP)return!1;const e=n instanceof bx||n instanceof M1;let t=!0;return n.eachChild(i=>{e?t=t&&zS(i):t=t&&i instanceof LS}),t?m6(n)&&g6(n,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function m6(n){if(n instanceof S2){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof cP||n instanceof fP)return!1;let e=!0;return n.eachChild(t=>{e&&!m6(t)&&(e=!1)}),e}function I4(n){if(n instanceof S2&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!I4(t)&&(e=!1)}),e}function g6(n,e){if(n instanceof S2&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(i=>{t&&!g6(i,e)&&(t=!1)}),t}function w9(n){return{result:"success",value:n}}function ux(n){return{result:"error",value:n}}function jS(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function qZ(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function gP(n){return!!n.expression&&n.expression.interpolated}function eo(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function jM(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&_u(n)===nC}function YAe(n){return n}function VAe(n){switch(n.type){case"color":return ta.parse;case"padding":return C0.parse;case"numberArray":return _0.parse;case"colorArray":return vp.parse;default:return null}}function $Ae(n){switch(n){case"exponential":return YZ;case"interval":return ZAe;case"categorical":return HAe;case"identity":return XAe;default:throw new Error(`Unknown function type "${n}"`)}}function yP(n,e){const t=n.stops&&typeof n.stops[0][0]=="object",i=t||n.property!==void 0,r=t||!i,o=n.type||(gP(e)?"exponential":"interval"),s=VAe(e);if(s&&(n=Jx({},n),n.stops&&(n.stops=n.stops.map(y=>[y[0],s(y[1])])),n.default?n.default=s(n.default):n.default=s(e.default)),n.colorSpace&&!Kce(n.colorSpace))throw new Error(`Unknown color space: "${n.colorSpace}"`);const a=$Ae(o);let c,f;if(o==="categorical"){c=Object.create(null);for(const y of n.stops)c[y[0]]=y[1];f=typeof n.stops[0][0]}if(t){const y={},_=[];for(let P=0;P<n.stops.length;P++){const K=n.stops[P],z=K[0].zoom;y[z]===void 0&&(y[z]={zoom:z,type:n.type,property:n.property,default:n.default,stops:[]},_.push(z)),y[z].stops.push([K[0].value,K[1]])}const E=[];for(const P of _)E.push([y[P].zoom,yP(y[P],e)]);const I={name:"linear"};return{kind:"composite",interpolationType:I,interpolationFactor:E1.interpolationFactor.bind(void 0,I),zoomStops:E.map(P=>P[0]),evaluate({zoom:P},K){return YZ({stops:E,base:n.base},e,P).evaluate(P,K)}}}else if(r){const y=o==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:y,interpolationFactor:E1.interpolationFactor.bind(void 0,y),zoomStops:n.stops.map(_=>_[0]),evaluate:({zoom:_})=>a(n,e,_,c,f)}}else return{kind:"source",evaluate(y,_){const E=_&&_.properties?_.properties[n.property]:void 0;return E===void 0?NM(n.default,e.default):a(n,e,E,c,f)}}}function NM(n,e,t){if(n!==void 0)return n;if(e!==void 0)return e;if(t!==void 0)return t}function HAe(n,e,t,i,r){const o=typeof t===r?i[t]:void 0;return NM(o,n.default,e.default)}function ZAe(n,e,t){if(eo(t)!=="number")return NM(n.default,e.default);const i=n.stops.length;if(i===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[i-1][0])return n.stops[i-1][1];const r=f6(n.stops.map(o=>o[0]),t);return n.stops[r][1]}function YZ(n,e,t){const i=n.base!==void 0?n.base:1;if(eo(t)!=="number")return NM(n.default,e.default);const r=n.stops.length;if(r===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[r-1][0])return n.stops[r-1][1];const o=f6(n.stops.map(y=>y[0]),t),s=JAe(t,i,n.stops[o][0],n.stops[o+1][0]),a=n.stops[o][1],c=n.stops[o+1][1],f=Xce[e.type]||YAe;return typeof a.evaluate=="function"?{evaluate(...y){const _=a.evaluate.apply(void 0,y),E=c.evaluate.apply(void 0,y);if(!(_===void 0||E===void 0))return f(_,E,s,n.colorSpace)}}:f(a,c,s,n.colorSpace)}function XAe(n,e,t){switch(e.type){case"color":t=ta.parse(t);break;case"formatted":t=_2.fromString(t.toString());break;case"resolvedImage":t=IC.fromString(t.toString());break;case"padding":t=C0.parse(t);break;case"colorArray":t=vp.parse(t);break;case"numberArray":t=_0.parse(t);break;default:eo(t)!==e.type&&(e.type!=="enum"||!e.values[t])&&(t=void 0)}return NM(t,n.default,e.default)}function JAe(n,e,t,i){const r=i-t,o=n-t;return r===0?0:e===1?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}let VZ=class{constructor(e,t,i){this.expression=e,this._warningHistory={},this._evaluator=new yZ,this._defaultValue=t?ihe(t):null,this._enumValues=t&&t.type==="enum"?t.values:null,this._globalState=i}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._globalState&&(e=t2(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s,this.expression.evaluate(this._evaluator)}evaluate(e,t,i,r,o,s){this._globalState&&(e=t2(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s||null;try{const a=this.expression.evaluate(this._evaluator);if(a==null||typeof a=="number"&&a!==a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new ll(`Expected value to be one of ${Object.keys(this._enumValues).map(c=>JSON.stringify(c)).join(", ")}, but found ${JSON.stringify(a)} instead.`);return a}catch(a){return this._warningHistory[a.message]||(this._warningHistory[a.message]=!0,typeof console<"u"&&console.warn(a.message)),this._defaultValue}}};function GM(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in mP}function vP(n,e,t){const i=new vZ(mP,zS,[],e?nhe(e):void 0),r=i.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?w9(new VZ(r,e,t)):ux(i.errors)}let S9=class{constructor(e,t,i){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!I4(t.expression),this.globalStateRefs=CP(t.expression),this._globalState=i}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._globalState&&(e=t2(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._globalState&&(e=t2(e,this._globalState)),this._styleExpression.evaluate(e,t,i,r,o,s)}},E9=class{constructor(e,t,i,r,o){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!I4(t.expression),this.globalStateRefs=CP(t.expression),this.interpolationType=r,this._globalState=o}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._globalState&&(e=t2(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._globalState&&(e=t2(e,this._globalState)),this._styleExpression.evaluate(e,t,i,r,o,s)}interpolationFactor(e,t,i){return this.interpolationType?E1.interpolationFactor(this.interpolationType,e,t,i):0}};function ehe(n){return n._styleExpression!==void 0}function bP(n,e,t){const i=vP(n,e,t);if(i.result==="error")return i;const r=i.value.expression,o=m6(r);if(!o&&!jS(e))return ux([new Qg("","data expressions not supported")]);const s=g6(r,["zoom"]);if(!s&&!qZ(e))return ux([new Qg("","zoom expressions not supported")]);const a=eS(r);if(!a&&!s)return ux([new Qg("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(a instanceof Qg)return ux([a]);if(a instanceof E1&&!gP(e))return ux([new Qg("",'"interpolate" expressions cannot be used with this property')]);if(!a)return w9(o?new S9("constant",i.value,t):new S9("source",i.value,t));const c=a instanceof E1?a.interpolation:void 0;return w9(o?new E9("camera",i.value,a.labels,c,t):new E9("composite",i.value,a.labels,c,t))}class y6{constructor(e,t){this._parameters=e,this._specification=t,Jx(this,yP(this._parameters,this._specification))}static deserialize(e){return new y6(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function the(n,e,t){if(jM(n))return new y6(n,e);if(GM(n)){const i=bP(n,e,t);if(i.result==="error")throw new Error(i.value.map(r=>`${r.key}: ${r.message}`).join(", "));return i.value}else{let i=n;return e.type==="color"&&typeof n=="string"?i=ta.parse(n):e.type==="padding"&&(typeof n=="number"||Array.isArray(n))?i=C0.parse(n):e.type==="numberArray"&&(typeof n=="number"||Array.isArray(n))?i=_0.parse(n):e.type==="colorArray"&&(typeof n=="string"||Array.isArray(n))?i=vp.parse(n):e.type==="variableAnchorOffsetCollection"&&Array.isArray(n)?i=Ov.parse(n):e.type==="projectionDefinition"&&typeof n=="string"&&(i=x2.parse(n)),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>i}}}function eS(n){let e=null;if(n instanceof CZ)e=eS(n.result);else if(n instanceof TZ){for(const t of n.args)if(e=eS(t),e)break}else(n instanceof OZ||n instanceof E1)&&n.input instanceof S2&&n.input.name==="zoom"&&(e=n);return e instanceof Qg||n.eachChild(t=>{const i=eS(t);i instanceof Qg?e=i:!e&&i?e=new Qg("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new Qg("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function CP(n,e=new Set){return n instanceof pP&&e.add(n.key),n.eachChild(t=>{CP(t,e)}),e}function nhe(n){const e={color:o0,string:Xr,number:Wn,enum:Xr,boolean:Fr,formatted:c6,padding:A6,numberArray:h6,colorArray:S4,projectionDefinition:l6,resolvedImage:FM,variableAnchorOffsetCollection:d6};return n.type==="array"?cf(e[n.value]||kr,n.length):e[n.type]}function ihe(n){if(n.type==="color"&&jM(n.default))return new ta(0,0,0,0);switch(n.type){case"color":return ta.parse(n.default)||null;case"padding":return C0.parse(n.default)||null;case"numberArray":return _0.parse(n.default)||null;case"colorArray":return vp.parse(n.default)||null;case"variableAnchorOffsetCollection":return Ov.parse(n.default)||null;case"projectionDefinition":return x2.parse(n.default)||null;default:return n.default===void 0?null:n.default}}function t2(n,e){const{zoom:t,heatmapDensity:i,elevation:r,lineProgress:o,isSupportedScript:s,accumulated:a}=n??{};return{zoom:t,heatmapDensity:i,elevation:r,lineProgress:o,isSupportedScript:s,accumulated:a,globalState:e}}function v6(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!v6(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function t4(n,e={}){if(v6(n))return n;if(!n)return!0;const t=n,i=t[0];if(n.length<=1)return i!=="any";switch(i){case"==":case"!=":case"<":case">":case"<=":case">=":{const[,r,o]=n;return ohe(r,o,i,e)}case"any":{const[,...r]=t;return["any",...r.map(s=>{const a={},c=t4(s,a),f=rhe(a);return f===!0?c:["case",f,c,!1]})]}case"all":{const[,...r]=t,o=r.map(s=>t4(s,e));return o.length>1?["all",...o]:o[0]}case"none":{const[,...r]=t;return["!",t4(["any",...r],{})]}case"in":{const[,r,...o]=t;return iz(r,o)}case"!in":{const[,r,...o]=t;return iz(r,o,!0)}case"has":return rz(t[1]);case"!has":return["!",rz(t[1])];default:return!0}}function rhe(n){const e=[];for(const t in n){const i=t==="$id"?["id"]:["get",t];e.push(["==",["typeof",i],n[t]])}return e.length===0?!0:e.length===1?e[0]:["all",...e]}function ohe(n,e,t,i){let r;if(n==="$type")return[t,["geometry-type"],e];if(n==="$id"?r=["id"]:r=["get",n],i&&e!==null){const o=typeof e;i[n]=o}return t==="=="&&n!=="$id"&&e===null?["all",["has",n],["==",r,null]]:t==="!="&&n!=="$id"&&e===null?["any",["!",["has",n]],["!=",r,null]]:[t,r,e]}function iz(n,e,t=!1){if(e.length===0)return t;let i;n==="$type"?i=["geometry-type"]:n==="$id"?i=["id"]:i=["get",n];let r=!0;const o=typeof e[0];for(const s of e)if(typeof s!==o){r=!1;break}if(r&&(o==="string"||o==="number")){const s=e.sort().filter((a,c)=>c===0||e[c-1]!==a);return["match",i,s,!t,t]}return t?["all",...e.map(s=>["!=",i,s])]:["any",...e.map(s=>["==",i,s])]}function rz(n){return n==="$type"?!0:n==="$id"?["!=",["id"],null]:["has",n]}function T4(n){return typeof n=="object"?["literal",n]:n}function $Z(n,e){let t=n.stops;if(!t)return she(n,e);const i=t&&typeof t[0][0]=="object",r=i||n.property!==void 0,o=i||!r;return t=t.map(s=>!r&&e.tokens&&typeof s[1]=="string"?[s[0],HZ(s[1])]:[s[0],T4(s[1])]),i?ahe(n,e,t):o?uhe(n,e,t):B9(n,e,t)}function she(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const i=[e.type==="color"?"to-color":e.type,t,T4(n.default)];return e.type==="array"&&i.splice(1,0,e.value,e.length||null),i}}function _P(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function ahe(n,e,t){const i={},r={},o=[];for(let a=0;a<t.length;a++){const c=t[a],f=c[0].zoom;i[f]===void 0&&(i[f]={zoom:f,type:n.type,property:n.property,default:n.default},r[f]=[],o.push(f)),r[f].push([c[0].value,c[1]])}if(MP({},e)==="exponential"){const a=[_P(n),["linear"],["zoom"]];for(const c of o){const f=B9(i[c],e,r[c]);Tx(a,c,f,!1)}return a}else{const a=["step",["zoom"]];for(const c of o){const f=B9(i[c],e,r[c]);Tx(a,c,f,!0)}return xP(a),a}}function lhe(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function oz(n,e){const t=T4(lhe(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function B9(n,e,t){const i=MP(n,e),r=["get",n.property];if(i==="categorical"&&typeof t[0][0]=="boolean"){const o=["case"];for(const s of t)o.push(["==",r,s[0]],s[1]);return o.push(oz(n,e)),o}else if(i==="categorical"){const o=["match",r];for(const s of t)Tx(o,s[0],s[1],!1);return o.push(oz(n,e)),o}else if(i==="interval"){const o=["step",["number",r]];for(const s of t)Tx(o,s[0],s[1],!0);return xP(o),n.default===void 0?o:["case",["==",["typeof",r],"number"],o,T4(n.default)]}else if(i==="exponential"){const o=n.base!==void 0?n.base:1,s=[_P(n),o===1?["linear"]:["exponential",o],["number",r]];for(const a of t)Tx(s,a[0],a[1],!1);return n.default===void 0?s:["case",["==",["typeof",r],"number"],s,T4(n.default)]}else throw new Error(`Unknown property function type ${i}`)}function uhe(n,e,t,i=["zoom"]){const r=MP(n,e);let o,s=!1;if(r==="interval")o=["step",i],s=!0;else if(r==="exponential"){const a=n.base!==void 0?n.base:1;o=[_P(n),a===1?["linear"]:["exponential",a],i]}else throw new Error(`Unknown zoom function type "${r}"`);for(const a of t)Tx(o,a[0],a[1],s);return xP(o),o}function xP(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function Tx(n,e,t,i){n.length>3&&e===n[n.length-2]||(i&&n.length===2||n.push(e),n.push(t))}function MP(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function HZ(n){const e=["concat"],t=/{([^{}]+)}/g;let i=0;for(let r=t.exec(n);r!==null;r=t.exec(n)){const o=n.slice(i,t.lastIndex-r[0].length);i=t.lastIndex,o.length>0&&e.push(o),e.push(["get",r[1]])}if(e.length===1)return n;if(i<n.length)e.push(n.slice(i));else if(e.length===2)return["to-string",e[1]];return e}function che(n){for(let e=0;e<No.layout.length;e++)for(const t in No[No.layout[e]])if(t===n)return No[No.layout[e]][t];for(let e=0;e<No.paint.length;e++)for(const t in No[No.paint[e]])if(t===n)return No[No.paint[e]][t];return null}function Ahe(n,e){for(const t in n.sources)e(n.sources[t])}function n4(n,e){for(const t of n.layers)e(t)}function wP(n,e,t){function i(r,o){const s=r[o];s&&Object.keys(s).forEach(a=>{t({path:[r.id,o,a],key:a,value:s[a],reference:che(a),set(c){s[a]=c}})})}n4(n,r=>{e.paint&&i(r,"paint"),e.layout&&i(r,"layout")})}function ZZ(n){const e=n.key,t=n.value;return t?[new zn(e,t,"constants have been deprecated as of v8")]:[]}function Ml(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function mC(n){if(Array.isArray(n))return n.map(mC);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const t in n)e[t]=mC(n[t]);return e}return Ml(n)}function dp(n){const e=n.key,t=n.value,i=n.valueSpec||{},r=n.objectElementValidators||{},o=n.style,s=n.styleSpec,a=n.validateSpec;let c=[];const f=eo(t);if(f!=="object")return[new zn(e,t,`object expected, ${f} found`)];for(const y in t){const _=y.split(".")[0],E=J3(i,_)||i["*"];let I;if(J3(r,_))I=r[_];else if(J3(i,_))I=a;else if(r["*"])I=r["*"];else if(i["*"])I=a;else{c.push(new zn(e,t[y],`unknown property "${y}"`));continue}c=c.concat(I({key:(e&&`${e}.`)+y,value:t[y],valueSpec:E,style:o,styleSpec:s,object:t,objectKey:y,validateSpec:a},t))}for(const y in i)r[y]||i[y].required&&i[y].default===void 0&&t[y]===void 0&&c.push(new zn(e,t,`missing required property "${y}"`));return c}function SP(n){const e=n.value,t=n.valueSpec,i=n.validateSpec,r=n.style,o=n.styleSpec,s=n.key,a=n.arrayElementValidator||i;if(eo(e)!=="array")return[new zn(s,e,`array expected, ${eo(e)} found`)];if(t.length&&e.length!==t.length)return[new zn(s,e,`array length ${t.length} expected, length ${e.length} found`)];if(t["min-length"]&&e.length<t["min-length"])return[new zn(s,e,`array length at least ${t["min-length"]} expected, length ${e.length} found`)];let c={type:t.value,values:t.values};o.$version<7&&(c.function=t.function),eo(t.value)==="object"&&(c=t.value);let f=[];for(let y=0;y<e.length;y++)f=f.concat(a({array:e,arrayIndex:y,value:e[y],valueSpec:c,validateSpec:n.validateSpec,style:r,styleSpec:o,key:`${s}[${y}]`}));return f}function b6(n){const e=n.key,t=n.value,i=n.valueSpec;let r=eo(t);return r==="number"&&t!==t&&(r="NaN"),r!=="number"?[new zn(e,t,`number expected, ${r} found`)]:"minimum"in i&&t<i.minimum?[new zn(e,t,`${t} is less than the minimum value ${i.minimum}`)]:"maximum"in i&&t>i.maximum?[new zn(e,t,`${t} is greater than the maximum value ${i.maximum}`)]:[]}function XZ(n){const e=n.valueSpec,t=Ml(n.value.type);let i,r={},o,s;const a=t!=="categorical"&&n.value.property===void 0,c=!a,f=eo(n.value.stops)==="array"&&eo(n.value.stops[0])==="array"&&eo(n.value.stops[0][0])==="object",y=dp({key:n.key,value:n.value,valueSpec:n.styleSpec.function,validateSpec:n.validateSpec,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:_,default:P}});return t==="identity"&&a&&y.push(new zn(n.key,n.value,'missing required property "property"')),t!=="identity"&&!n.value.stops&&y.push(new zn(n.key,n.value,'missing required property "stops"')),t==="exponential"&&n.valueSpec.expression&&!gP(n.valueSpec)&&y.push(new zn(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(c&&!jS(n.valueSpec)?y.push(new zn(n.key,n.value,"property functions not supported")):a&&!qZ(n.valueSpec)&&y.push(new zn(n.key,n.value,"zoom functions not supported"))),(t==="categorical"||f)&&n.value.property===void 0&&y.push(new zn(n.key,n.value,'"property" property is required')),y;function _(K){if(t==="identity")return[new zn(K.key,K.value,'identity function may not have a "stops" property')];let z=[];const Q=K.value;return z=z.concat(SP({key:K.key,value:Q,valueSpec:K.valueSpec,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec,arrayElementValidator:E})),eo(Q)==="array"&&Q.length===0&&z.push(new zn(K.key,Q,"array must have at least one stop")),z}function E(K){let z=[];const Q=K.value,V=K.key;if(eo(Q)!=="array")return[new zn(V,Q,`array expected, ${eo(Q)} found`)];if(Q.length!==2)return[new zn(V,Q,`array length 2 expected, length ${Q.length} found`)];if(f){if(eo(Q[0])!=="object")return[new zn(V,Q,`object expected, ${eo(Q[0])} found`)];if(Q[0].zoom===void 0)return[new zn(V,Q,"object stop key must have zoom")];if(Q[0].value===void 0)return[new zn(V,Q,"object stop key must have value")];if(s&&s>Ml(Q[0].zoom))return[new zn(V,Q[0].zoom,"stop zoom values must appear in ascending order")];Ml(Q[0].zoom)!==s&&(s=Ml(Q[0].zoom),o=void 0,r={}),z=z.concat(dp({key:`${V}[0]`,value:Q[0],valueSpec:{zoom:{}},validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec,objectElementValidators:{zoom:b6,value:I}}))}else z=z.concat(I({key:`${V}[0]`,value:Q[0],validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec},Q));return GM(mC(Q[1]))?z.concat([new zn(`${V}[1]`,Q[1],"expressions are not allowed in function stops.")]):z.concat(K.validateSpec({key:`${V}[1]`,value:Q[1],valueSpec:e,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec}))}function I(K,z){const Q=eo(K.value),V=Ml(K.value),$=K.value!==null?K.value:z;if(!i)i=Q;else if(Q!==i)return[new zn(K.key,$,`${Q} stop domain type must match previous stop domain type ${i}`)];if(Q!=="number"&&Q!=="string"&&Q!=="boolean")return[new zn(K.key,$,"stop domain value must be a number, string, or boolean")];if(Q!=="number"&&t!=="categorical"){let Z=`number expected, ${Q} found`;return jS(e)&&t===void 0&&(Z+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new zn(K.key,$,Z)]}return t==="categorical"&&Q==="number"&&(!isFinite(V)||Math.floor(V)!==V)?[new zn(K.key,$,`integer expected, found ${V}`)]:t!=="categorical"&&Q==="number"&&o!==void 0&&V<o?[new zn(K.key,$,"stop domain values must appear in ascending order")]:(o=V,t==="categorical"&&V in r?[new zn(K.key,$,"stop domain values must be unique")]:(r[V]=!0,[]))}function P(K){return K.validateSpec({key:K.key,value:K.value,valueSpec:e,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec})}}function n2(n){const e=(n.expressionContext==="property"?bP:vP)(mC(n.value),n.valueSpec);if(e.result==="error")return e.value.map(i=>new zn(`${n.key}${i.key}`,n.value,i.message));const t=e.value.expression||e.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!t.outputDefined())return[new zn(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!I4(t))return[new zn(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!I4(t))return[new zn(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!g6(t,["zoom","feature-state"]))return[new zn(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!m6(t))return[new zn(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function hhe(n){const e=n.value,t=n.key,i=eo(e);return i!=="boolean"?[new zn(t,e,`boolean expected, ${i} found`)]:[]}function O9(n){const e=n.key,t=n.value,i=eo(t);return i!=="string"?[new zn(e,t,`color expected, ${i} found`)]:ta.parse(String(t))?[]:[new zn(e,t,`color expected, "${t}" found`)]}function k4(n){const e=n.key,t=n.value,i=n.valueSpec,r=[];return Array.isArray(i.values)?i.values.indexOf(Ml(t))===-1&&r.push(new zn(e,t,`expected one of [${i.values.join(", ")}], ${JSON.stringify(t)} found`)):Object.keys(i.values).indexOf(Ml(t))===-1&&r.push(new zn(e,t,`expected one of [${Object.keys(i.values).join(", ")}], ${JSON.stringify(t)} found`)),r}function EP(n){return v6(mC(n.value))?n2(Jx({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):JZ(n)}function JZ(n){const e=n.value,t=n.key;if(eo(e)!=="array")return[new zn(t,e,`array expected, ${eo(e)} found`)];const i=n.styleSpec;let r,o=[];if(e.length<1)return[new zn(t,e,"filter array must have at least 1 element")];switch(o=o.concat(k4({key:`${t}[0]`,value:e[0],valueSpec:i.filter_operator,style:n.style,styleSpec:n.styleSpec})),Ml(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&Ml(e[1])==="$type"&&o.push(new zn(t,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&o.push(new zn(t,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(r=eo(e[1]),r!=="string"&&o.push(new zn(`${t}[1]`,e[1],`string expected, ${r} found`)));for(let s=2;s<e.length;s++)r=eo(e[s]),Ml(e[1])==="$type"?o=o.concat(k4({key:`${t}[${s}]`,value:e[s],valueSpec:i.geometry_type,style:n.style,styleSpec:n.styleSpec})):r!=="string"&&r!=="number"&&r!=="boolean"&&o.push(new zn(`${t}[${s}]`,e[s],`string, number, or boolean expected, ${r} found`));break;case"any":case"all":case"none":for(let s=1;s<e.length;s++)o=o.concat(JZ({key:`${t}[${s}]`,value:e[s],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":r=eo(e[1]),e.length!==2?o.push(new zn(t,e,`filter array for "${e[0]}" operator must have 2 elements`)):r!=="string"&&o.push(new zn(`${t}[1]`,e[1],`string expected, ${r} found`));break}return o}function eX(n,e){const t=n.key,i=n.validateSpec,r=n.style,o=n.styleSpec,s=n.value,a=n.objectKey,c=o[`${e}_${n.layerType}`];if(!c)return[];const f=a.match(/^(.*)-transition$/);if(e==="paint"&&f&&c[f[1]]&&c[f[1]].transition)return i({key:t,value:s,valueSpec:o.transition,style:r,styleSpec:o});const y=n.valueSpec||c[a];if(!y)return[new zn(t,s,`unknown property "${a}"`)];let _;if(eo(s)==="string"&&jS(y)&&!y.tokens&&(_=/^{([^}]+)}$/.exec(s)))return[new zn(t,s,`"${a}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(_[1])} }\`.`)];const E=[];return n.layerType==="symbol"&&a==="text-font"&&jM(mC(s))&&Ml(s.type)==="identity"&&E.push(new zn(t,s,'"text-font" does not support identity functions')),E.concat(i({key:n.key,value:s,valueSpec:y,style:r,styleSpec:o,expressionContext:"property",propertyType:e,propertyKey:a}))}function tX(n){return eX(n,"paint")}function nX(n){return eX(n,"layout")}function iX(n){let e=[];const t=n.value,i=n.key,r=n.style,o=n.styleSpec;if(eo(t)!=="object")return[new zn(i,t,`object expected, ${eo(t)} found`)];!t.type&&!t.ref&&e.push(new zn(i,t,'either "type" or "ref" is required'));let s=Ml(t.type);const a=Ml(t.ref);if(t.id){const c=Ml(t.id);for(let f=0;f<n.arrayIndex;f++){const y=r.layers[f];Ml(y.id)===c&&e.push(new zn(i,t.id,`duplicate layer id "${t.id}", previously used at line ${y.id.__line__}`))}}if("ref"in t){["type","source","source-layer","filter","layout"].forEach(f=>{f in t&&e.push(new zn(i,t[f],`"${f}" is prohibited for ref layers`))});let c;r.layers.forEach(f=>{Ml(f.id)===a&&(c=f)}),c?c.ref?e.push(new zn(i,t.ref,"ref cannot reference another ref layer")):s=Ml(c.type):e.push(new zn(i,t.ref,`ref layer "${a}" not found`))}else if(s!=="background")if(!t.source)e.push(new zn(i,t,'missing required property "source"'));else{const c=r.sources&&r.sources[t.source],f=c&&Ml(c.type);c?f==="vector"&&s==="raster"?e.push(new zn(i,t.source,`layer "${t.id}" requires a raster source`)):f!=="raster-dem"&&s==="hillshade"?e.push(new zn(i,t.source,`layer "${t.id}" requires a raster-dem source`)):f!=="raster-dem"&&s==="color-relief"?e.push(new zn(i,t.source,`layer "${t.id}" requires a raster-dem source`)):f==="raster"&&s!=="raster"?e.push(new zn(i,t.source,`layer "${t.id}" requires a vector source`)):f==="vector"&&!t["source-layer"]?e.push(new zn(i,t,`layer "${t.id}" must specify a "source-layer"`)):f==="raster-dem"&&s!=="hillshade"&&s!=="color-relief"?e.push(new zn(i,t.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):s==="line"&&t.paint&&t.paint["line-gradient"]&&(f!=="geojson"||!c.lineMetrics)&&e.push(new zn(i,t,`layer "${t.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new zn(i,t.source,`source "${t.source}" not found`))}return e=e.concat(dp({key:i,value:t,valueSpec:o.layer,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,objectElementValidators:{"*"(){return[]},type(){return n.validateSpec({key:`${i}.type`,value:t.type,valueSpec:o.layer.type,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,object:t,objectKey:"type"})},filter:EP,layout(c){return dp({layer:t,key:c.key,value:c.value,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*"(f){return nX(Jx({layerType:s},f))}}})},paint(c){return dp({layer:t,key:c.key,value:c.value,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*"(f){return tX(Jx({layerType:s},f))}}})}}})),e}function gC(n){const e=n.value,t=n.key,i=eo(e);return i!=="string"?[new zn(t,e,`string expected, ${i} found`)]:[]}function dhe(n){var e;const t=(e=n.sourceName)!==null&&e!==void 0?e:"",i=n.value,r=n.styleSpec,o=r.source_raster_dem,s=n.style;let a=[];const c=eo(i);if(i===void 0)return a;if(c!=="object")return a.push(new zn("source_raster_dem",i,`object expected, ${c} found`)),a;const y=Ml(i.encoding)==="custom",_=["redFactor","greenFactor","blueFactor","baseShift"],E=n.value.encoding?`"${n.value.encoding}"`:"Default";for(const I in i)!y&&_.includes(I)?a.push(new zn(I,i[I],`In "${t}": "${I}" is only valid when "encoding" is set to "custom". ${E} encoding found`)):o[I]?a=a.concat(n.validateSpec({key:I,value:i[I],valueSpec:o[I],validateSpec:n.validateSpec,style:s,styleSpec:r})):a.push(new zn(I,i[I],`unknown property "${I}"`));return a}const sz={promoteId:fhe};function rX(n){const e=n.value,t=n.key,i=n.styleSpec,r=n.style,o=n.validateSpec;if(!e.type)return[new zn(t,e,'"type" is required')];const s=Ml(e.type);let a;switch(s){case"vector":case"raster":return a=dp({key:t,value:e,valueSpec:i[`source_${s.replace("-","_")}`],style:n.style,styleSpec:i,objectElementValidators:sz,validateSpec:o}),a;case"raster-dem":return a=dhe({sourceName:t,value:e,style:n.style,styleSpec:i,validateSpec:o}),a;case"geojson":if(a=dp({key:t,value:e,valueSpec:i.source_geojson,style:r,styleSpec:i,validateSpec:o,objectElementValidators:sz}),e.cluster)for(const c in e.clusterProperties){const[f,y]=e.clusterProperties[c],_=typeof f=="string"?[f,["accumulated"],["get",c]]:f;a.push(...n2({key:`${t}.${c}.map`,value:y,expressionContext:"cluster-map"})),a.push(...n2({key:`${t}.${c}.reduce`,value:_,expressionContext:"cluster-reduce"}))}return a;case"video":return dp({key:t,value:e,valueSpec:i.source_video,style:r,validateSpec:o,styleSpec:i});case"image":return dp({key:t,value:e,valueSpec:i.source_image,style:r,validateSpec:o,styleSpec:i});case"canvas":return[new zn(t,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return k4({key:`${t}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function fhe({key:n,value:e}){if(eo(e)==="string")return gC({key:n,value:e});{const t=[];for(const i in e)t.push(...gC({key:`${n}.${i}`,value:e[i]}));return t}}function oX(n){const e=n.value,t=n.styleSpec,i=t.light,r=n.style;let o=[];const s=eo(e);if(e===void 0)return o;if(s!=="object")return o=o.concat([new zn("light",e,`object expected, ${s} found`)]),o;for(const a in e){const c=a.match(/^(.*)-transition$/);c&&i[c[1]]&&i[c[1]].transition?o=o.concat(n.validateSpec({key:a,value:e[a],valueSpec:t.transition,validateSpec:n.validateSpec,style:r,styleSpec:t})):i[a]?o=o.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],validateSpec:n.validateSpec,style:r,styleSpec:t})):o=o.concat([new zn(a,e[a],`unknown property "${a}"`)])}return o}function sX(n){const e=n.value,t=n.styleSpec,i=t.sky,r=n.style,o=eo(e);if(e===void 0)return[];if(o!=="object")return[new zn("sky",e,`object expected, ${o} found`)];let s=[];for(const a in e)i[a]?s=s.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],style:r,styleSpec:t})):s=s.concat([new zn(a,e[a],`unknown property "${a}"`)]);return s}function aX(n){const e=n.value,t=n.styleSpec,i=t.terrain,r=n.style;let o=[];const s=eo(e);if(e===void 0)return o;if(s!=="object")return o=o.concat([new zn("terrain",e,`object expected, ${s} found`)]),o;for(const a in e)i[a]?o=o.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],validateSpec:n.validateSpec,style:r,styleSpec:t})):o=o.concat([new zn(a,e[a],`unknown property "${a}"`)]);return o}function phe(n){return gC(n).length===0?[]:n2(n)}function mhe(n){return gC(n).length===0?[]:n2(n)}function ghe(n){const e=n.key,t=n.value;if(eo(t)==="array"){if(t.length<1||t.length>4)return[new zn(e,t,`padding requires 1 to 4 values; ${t.length} values found`)];const r={type:"number"};let o=[];for(let s=0;s<t.length;s++)o=o.concat(n.validateSpec({key:`${e}[${s}]`,value:t[s],validateSpec:n.validateSpec,valueSpec:r}));return o}else return b6({key:e,value:t,valueSpec:{}})}function yhe(n){const e=n.key,t=n.value;if(eo(t)==="array"){const r={type:"number"};if(t.length<1)return[new zn(e,t,"array length at least 1 expected, length 0 found")];let o=[];for(let s=0;s<t.length;s++)o=o.concat(n.validateSpec({key:`${e}[${s}]`,value:t[s],validateSpec:n.validateSpec,valueSpec:r}));return o}else return b6({key:e,value:t,valueSpec:{}})}function vhe(n){const e=n.key,t=n.value;if(eo(t)==="array"){if(t.length<1)return[new zn(e,t,"array length at least 1 expected, length 0 found")];let r=[];for(let o=0;o<t.length;o++)r=r.concat(O9({key:`${e}[${o}]`,value:t[o]}));return r}else return O9({key:e,value:t})}function bhe(n){const e=n.key,t=n.value,i=eo(t),r=n.styleSpec;if(i!=="array"||t.length<1||t.length%2!==0)return[new zn(e,t,"variableAnchorOffsetCollection requires a non-empty array of even length")];let o=[];for(let s=0;s<t.length;s+=2)o=o.concat(k4({key:`${e}[${s}]`,value:t[s],valueSpec:r.layout_symbol["text-anchor"]})),o=o.concat(SP({key:`${e}[${s+1}]`,value:t[s+1],valueSpec:{length:2,value:"number"},validateSpec:n.validateSpec,style:n.style,styleSpec:r}));return o}function lX(n){let e=[];const t=n.value,i=n.key;if(Array.isArray(t)){const r=[],o=[];for(const s in t){t[s].id&&r.includes(t[s].id)&&e.push(new zn(i,t,`all the sprites' ids must be unique, but ${t[s].id} is duplicated`)),r.push(t[s].id),t[s].url&&o.includes(t[s].url)&&e.push(new zn(i,t,`all the sprites' URLs must be unique, but ${t[s].url} is duplicated`)),o.push(t[s].url);const a={id:{type:"string",required:!0},url:{type:"string",required:!0}};e=e.concat(dp({key:`${i}[${s}]`,value:t[s],valueSpec:a,validateSpec:n.validateSpec}))}return e}else return gC({key:i,value:t})}function Che(n){const e=n.value,t=n.styleSpec,i=t.projection,r=n.style,o=eo(e);if(e===void 0)return[];if(o!=="object")return[new zn("projection",e,`object expected, ${o} found`)];let s=[];for(const a in e)i[a]?s=s.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],style:r,styleSpec:t})):s=s.concat([new zn(a,e[a],`unknown property "${a}"`)]);return s}function _he(n){const e=n.key;let t=n.value;t=t instanceof String?t.valueOf():t;const i=eo(t);return i==="array"&&!Mhe(t)&&!xhe(t)?[new zn(e,t,`projection expected, invalid array ${JSON.stringify(t)} found`)]:["array","string"].includes(i)?[]:[new zn(e,t,`projection expected, invalid type "${i}" found`)]}function xhe(n){return!!["interpolate","step","literal"].includes(n[0])}function Mhe(n){return Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"}function whe(n){return!!n&&n.constructor===Object}function uX(n){return whe(n.value)?[]:[new zn(n.key,n.value,`object expected, ${eo(n.value)} found`)]}const az={"*"(){return[]},array:SP,boolean:hhe,number:b6,color:O9,constants:ZZ,enum:k4,filter:EP,function:XZ,layer:iX,object:dp,source:rX,light:oX,sky:sX,terrain:aX,projection:Che,projectionDefinition:_he,string:gC,formatted:phe,resolvedImage:mhe,padding:ghe,numberArray:yhe,colorArray:vhe,variableAnchorOffsetCollection:bhe,sprite:lX,state:uX};function NS(n){const e=n.value,t=n.valueSpec,i=n.styleSpec;return n.validateSpec=NS,t.expression&&jM(Ml(e))?XZ(n):t.expression&&GM(mC(e))?n2(n):t.type&&az[t.type]?az[t.type](n):dp(Jx({},n,{valueSpec:t.type?i[t.type]:t}))}function cX(n){const e=n.value,t=n.key,i=gC(n);return i.length||(e.indexOf("{fontstack}")===-1&&i.push(new zn(t,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&i.push(new zn(t,e,'"glyphs" url must include a "{range}" token'))),i}function yd(n,e=No){let t=[];return t=t.concat(NS({key:"",value:n,valueSpec:e.$root,styleSpec:e,style:n,validateSpec:NS,objectElementValidators:{glyphs:cX,"*"(){return[]}}})),n.constants&&(t=t.concat(ZZ({key:"constants",value:n.constants}))),AX(t)}yd.source=Nm(jm(rX));yd.sprite=Nm(jm(lX));yd.glyphs=Nm(jm(cX));yd.light=Nm(jm(oX));yd.sky=Nm(jm(sX));yd.terrain=Nm(jm(aX));yd.state=Nm(jm(uX));yd.layer=Nm(jm(iX));yd.filter=Nm(jm(EP));yd.paintProperty=Nm(jm(tX));yd.layoutProperty=Nm(jm(nX));function jm(n){return function(e){return n(Object.assign({},e,{validateSpec:NS}))}}function AX(n){return[].concat(n).sort((e,t)=>e.line-t.line)}function Nm(n){return function(...e){return AX(n.apply(this,e))}}const She=/("(?:[^\\"]|\\.)*")|[:,]/g;function Ehe(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),i=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:r}=e;return(function o(s,a,c){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const f=JSON.stringify(s,r);if(f===void 0)return f;const y=i-a.length-c;if(f.length<=y){const _=f.replace(She,(E,I)=>I||`${E} `);if(_.length<=y)return _}if(r!=null&&(s=JSON.parse(f),r=void 0),typeof s=="object"&&s!==null){const _=a+t,E=[];let I=0,P,K;if(Array.isArray(s)){P="[",K="]";const{length:z}=s;for(;I<z;I++)E.push(o(s[I],_,I===z-1?0:1)||"null")}else{P="{",K="}";const z=Object.keys(s),{length:Q}=z;for(;I<Q;I++){const V=z[I],$=`${JSON.stringify(V)}: `,Z=o(s[V],_,$.length+(I===Q-1?0:1));Z!==void 0&&E.push($+Z)}}if(E.length>0)return[P,t+E.join(`,
${_}`),K].join(`
${a}`)}return f})(n,"",0)}function lz(n,e){const t={};for(const i in e)n[i]!==void 0&&(t[i]=n[i]);for(const i in n)t[i]===void 0&&(t[i]=n[i]);return t}function Bhe(n,e=2){return n=lz(n,No.$root),n.layers&&(n.layers=n.layers.map(t=>lz(t,No.layer))),Ehe(n,{indent:e})}function wO(n,e){for(const t in n)t.indexOf("layout")===0&&e(n[t],t)}function uz(n,e){for(const t in n)t.indexOf("paint")===0&&e(n[t],t)}function I9(n,e){return typeof e=="string"&&e[0]==="@"?I9(n,n.constants[e]):e}function Ohe(n){return Array.isArray(n.stops)}function i3(n,e,t){n[t]=n[e],delete n[e]}function Ihe(n){n.version=8,Ahe(n,r=>{r.type==="video"&&r.url!==void 0&&i3(r,"url","urls"),r.type==="video"&&r.coordinates.forEach(o=>o.reverse())}),n4(n,r=>{wO(r,o=>{o["symbol-min-distance"]!==void 0&&i3(o,"symbol-min-distance","symbol-spacing")}),uz(r,o=>{o["background-image"]!==void 0&&i3(o,"background-image","background-pattern"),o["line-image"]!==void 0&&i3(o,"line-image","line-pattern"),o["fill-image"]!==void 0&&i3(o,"fill-image","fill-pattern")})}),wP(n,{paint:!0,layout:!0},r=>{const o=I9(n,r.value);Ohe(o)&&o.stops.forEach(s=>{s[1]=I9(n,s[1])}),r.set(o)}),delete n.constants,n4(n,r=>{wO(r,o=>{delete o["text-max-size"],delete o["icon-max-size"]}),uz(r,o=>{o["text-size"]&&(r.layout||(r.layout={}),r.layout["text-size"]=o["text-size"],delete o["text-size"]),o["icon-size"]&&(r.layout||(r.layout={}),r.layout["icon-size"]=o["icon-size"],delete o["icon-size"])})});function e(r){function o(s){return s.split(",").map(a=>a.trim())}if(Array.isArray(r))return r;if(typeof r=="string")return o(r);if(typeof r=="object")return r.stops.forEach(s=>{s[1]=o(s[1])}),r;throw new Error("unexpected font value")}n4(n,r=>{wO(r,o=>{o["text-font"]&&(o["text-font"]=e(o["text-font"]))})});let t=0;for(let r=n.layers.length-1;r>=0;r--)if(n.layers[r].type!=="symbol"){t=r+1;break}const i=n.layers.splice(t);return i.reverse(),n.layers=n.layers.concat(i),n}function The(n){const e=[];return n4(n,t=>{t.filter&&(t.filter=t4(t.filter))}),wP(n,{paint:!0,layout:!0},({path:t,key:i,value:r,reference:o,set:s})=>{GM(r)||i.endsWith("-transition")||o===null||(typeof r=="object"&&!Array.isArray(r)?(s($Z(r,o)),e.push(t.join("."))):o.tokens&&typeof r=="string"&&s(HZ(r)))}),n}function khe(n){return JSON.parse(Dhe(JSON.stringify(n)))}function Dhe(n){return n.replace(/"hsla?\((.+?)\)"/gi,(e,t)=>{const i=t.match(/^(.+?)\s*,\s*(.+?)\s*,\s*(.+?)(?:\s*,\s*(.+))?$/i);if(i){let[r,o,s,a]=i.slice(1);return[o,s]=[o,s].map(c=>c.endsWith("%")?c:`${parseFloat(c)*100}%`),`"hsl${typeof a=="string"?"a":""}(${[r,o,s,a].filter(Boolean).join(",")})"`}return e})}function Rhe(n){let e=!1;if(n.version===7&&(n=Ihe(n),e=!0),n.version===8&&(e=!!The(n),e=!0),wP(n,{paint:!0,layout:!0},({value:t,reference:i,set:r})=>{i?.type==="color"&&r(khe(t))}),!e)throw new Error(`Cannot migrate from ${n.version}`);return n}const hp=No,Phe={StyleExpression:VZ,StylePropertyFunction:y6,ZoomConstantExpression:S9,ZoomDependentExpression:E9,createExpression:vP,createPropertyExpression:bP,isExpression:GM,isExpressionFilter:v6,isZoomExpression:ehe,normalizePropertyExpression:the},Lhe={convertFunction:$Z,createFunction:yP,isFunction:jM},Uhe=8,Khe=JSON.parse('{"version":{"required":true,"type":"enum","values":[8],"doc":"Style specification version number. Must be 8.","example":8},"name":{"type":"string","doc":"A human-readable name for the style.","example":"Bright"},"metadata":{"type":"*","doc":"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like \'maplibre:\'.","example":{"styleeditor:slimmode":true,"styleeditor:comment":"Style generated 1677776383","styleeditor:version":"3.14.159265","example:object":{"String":"one","Number":2,"Boolean":false}}},"center":{"type":"array","value":"number","doc":"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":[-73.9749,40.7736]},"centerAltitude":{"type":"number","doc":"Default map center altitude in meters above sea level. The style center altitude defines the altitude where the camera is looking at and will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":123.4,"sdk-support":{"basic functionality":{"js":"5.0.0","android":"https://github.com/maplibre/maplibre-native/issues/2980","ios":"https://github.com/maplibre/maplibre-native/issues/2980"}}},"zoom":{"type":"number","doc":"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":12.5},"bearing":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Default bearing, in degrees. The bearing is the compass direction that is \\"up\\"; for example, a bearing of 90 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":29},"pitch":{"type":"number","default":0,"units":"degrees","doc":"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":50,"sdk-support":{"0-60 degrees":{"js":"0.8.0","android":"1.0.0","ios":"1.0.0"},"0-85 degrees":{"js":"2.0.0","android":"https://github.com/maplibre/maplibre-native/issues/1909","ios":"https://github.com/maplibre/maplibre-native/issues/1909"},"0-180 degrees":{"js":"5.0.0","android":"https://github.com/maplibre/maplibre-native/issues/1909","ios":"https://github.com/maplibre/maplibre-native/issues/1909"}}},"roll":{"type":"number","default":0,"units":"degrees","doc":"Default roll, in degrees. The roll angle is measured counterclockwise about the camera boresight. The style roll will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":45,"sdk-support":{"basic functionality":{"js":"5.0.0","android":"https://github.com/maplibre/maplibre-native/issues/2941","ios":"https://github.com/maplibre/maplibre-native/issues/2941"}}},"state":{"type":"state","default":{},"doc":"An object used to define default values when using the [`global-state`](https://maplibre.org/maplibre-style-spec/expressions/#global-state) expression.","example":{"chargerType":{"default":["CCS","CHAdeMO","Type2"]},"minPreferredChargingSpeed":{"default":50}},"sdk-support":{"basic functionality":{"js":"5.6.0","android":"https://github.com/maplibre/maplibre-native/issues/3302","ios":"https://github.com/maplibre/maplibre-native/issues/3302"}}},"light":{"type":"light","doc":"The global light source.","example":{"anchor":"viewport","color":"white","intensity":0.4}},"sky":{"type":"sky","doc":"The map\'s sky configuration. **Note:** this definition is still experimental and is under development in maplibre-gl-js.","example":{"sky-color":"#199EF3","sky-horizon-blend":0.5,"horizon-color":"#ffffff","horizon-fog-blend":0.5,"fog-color":"#0000ff","fog-ground-blend":0.5,"atmosphere-blend":["interpolate",["linear"],["zoom"],0,1,10,1,12,0]}},"projection":{"type":"projection","doc":"The projection configuration","example":{"type":["interpolate",["linear"],["zoom"],10,"vertical-perspective",12,"mercator"]}},"terrain":{"type":"terrain","doc":"The terrain configuration.","example":{"source":"raster-dem-source","exaggeration":0.5}},"sources":{"required":true,"type":"sources","doc":"Sources state which data the map should display. Specify the type of source with the `type` property. Adding a source isn\'t enough to make data appear on the map because sources don\'t contain styling details like color or width. Layers refer to a source and give it a visual representation. This makes it possible to style the same source in different ways, like differentiating between types of roads in a highways layer.\\n\\nTiled sources (vector and raster) must specify their details according to the [TileJSON specification](https://github.com/mapbox/tilejson-spec).","example":{"maplibre-demotiles":{"type":"vector","url":"https://demotiles.maplibre.org/tiles/tiles.json"},"maplibre-tilejson":{"type":"vector","url":"http://api.example.com/tilejson.json"},"maplibre-streets":{"type":"vector","tiles":["http://a.example.com/tiles/{z}/{x}/{y}.pbf","http://b.example.com/tiles/{z}/{x}/{y}.pbf"],"maxzoom":14},"wms-imagery":{"type":"raster","tiles":["http://a.example.com/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&width=256&height=256&layers=example"],"tileSize":256}}},"sprite":{"type":"sprite","doc":"An array of `{id: \'my-sprite\', url: \'https://example.com/sprite\'}` objects. Each object should represent a unique URL to load a sprite from and and a unique ID to use as a prefix when referencing images from that sprite (i.e. \'my-sprite:image\'). All the URLs are internally extended to load both .json and .png files. If the `id` field is equal to \'default\', the prefix is omitted (just \'image\' instead of \'default:image\'). All the IDs and URLs must be unique. For backwards compatibility, instead of an array, one can also provide a single string that represent a URL to load the sprite from. The images in this case won\'t be prefixed.","example":"https://demotiles.maplibre.org/styles/osm-bright-gl-style/sprite"},"glyphs":{"type":"string","doc":"A URL template for loading signed-distance-field glyph sets in PBF format.\\n\\nIf this property is set, any text in the `text-field` layout property is displayed in the font stack named by the `text-font` layout property based on glyphs located at the URL specified by this property. Otherwise, font faces will be determined by the `text-font` property based on the local environment.\\n\\nThe URL must include:\\n\\n - `{fontstack}` - When requesting glyphs, this token is replaced with a comma separated list of fonts from a font stack specified in the `text-font` property of a symbol layer. \\n\\n - `{range}` - When requesting glyphs, this token is replaced with a range of 256 Unicode code points. For example, to load glyphs for the Unicode Basic Latin and Basic Latin-1 Supplement blocks, the range would be 0-255. The actual ranges that are loaded are determined at runtime based on what text needs to be displayed.\\n\\nThe URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).","example":"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf","sdk-support":{"basic functionality":{"js":"0.0.16","android":"0.1.1","ios":"0.1.0"},"omit to use local fonts":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/3302","android":"https://github.com/maplibre/maplibre-native/issues/165","ios":"https://github.com/maplibre/maplibre-native/issues/165"}}},"font-faces":{"type":"array","value":"fontFaces","doc":"The `font-faces` property can be used to specify what font files to use for rendering text. Font faces contain information needed to render complex texts such as [Devanagari](https://en.wikipedia.org/wiki/Devanagari), [Khmer](https://en.wikipedia.org/wiki/Khmer_script) among many others.<h2>Unicode range</h2>The optional `unicode-range` property can be used to only use a particular font file for characters within the specified unicode range(s). Its value should be an array of strings, each indicating a start and end of a unicode range, similar to the [CSS descriptor with the same name](https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/unicode-range). This allows specifying multiple non-consecutive unicode ranges. When not specified, the default value is `U+0-10FFFF`, meaning the font file will be used for all unicode characters.\\n\\nRefer to the [Unicode Character Code Charts](https://www.unicode.org/charts/) to see ranges for scripts supported by Unicode. To see what unicode code-points are available in a font, use a tool like [FontDrop](https://fontdrop.info/).\\n\\n<h2>Font Resolution</h2>For every name in a symbol layers [`text-font`](./layers.md/#text-font) array, characters are matched if they are covered one of the by the font files in the corresponding entry of the `font-faces` map. Any still-unmatched characters then fall back to the [`glyphs`](./glyphs.md) URL if provided.\\n\\n<h2>Supported Fonts</h2>What type of fonts are supported is implementation-defined. Unsupported fonts are ignored.","example":{"Noto Sans Regular":[{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansKhmer/hinted/ttf/NotoSansKhmer-Regular.ttf","unicode-range":["U+1780-17FF"]},{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansDevanagari/hinted/ttf/NotoSansDevanagari-Regular.ttf","unicode-range":["U+0900-097F"]},{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansMyanmar/hinted/ttf/NotoSansMyanmar-Regular.ttf","unicode-range":["U+1000-109F"]},{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansEthiopic/hinted/ttf/NotoSansEthiopic-Regular.ttf","unicode-range":["U+1200-137F"]}],"Unifont":"https://ftp.gnu.org/gnu/unifont/unifont-15.0.01/unifont-15.0.01.ttf"},"sdk-support":{"basic functionality":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/50","android":"11.13.0","ios":"6.18.0"}}},"transition":{"type":"transition","doc":"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style\'s `transition` property.","example":{"duration":300,"delay":0}},"layers":{"required":true,"type":"array","value":"layer","doc":"A style\'s `layers` property lists all the layers available in that style. The type of layer is specified by the `type` property, and must be one of `background`, `fill`, `line`, `symbol`, `raster`, `circle`, `fill-extrusion`, `heatmap`, `hillshade`, `color-relief`.\\n\\nExcept for layers of the `background` type, each layer needs to refer to a source. Layers take the data that they get from a source, optionally filter features, and then define how those features are styled.","example":[{"id":"coastline","source":"maplibre","source-layer":"countries","type":"line","paint":{"line-color":"#198EC8"}}]}}'),Fhe={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},zhe=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],jhe={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},encoding:{type:"enum",values:{mvt:{doc:"Mapbox Vector Tiles. See http://github.com/mapbox/vector-tile-spec for more info."},mlt:{doc:"MapLibre Vector Tiles. See https://github.com/maplibre/maplibre-tile-spec for more info."}},default:"mvt",doc:"The encoding used by this source. Mapbox Vector Tiles encoding is used by default.","sdk-support":{mvt:{android:"supported",ios:"supported",js:"supported"},mlt:{android:"https://github.com/maplibre/maplibre-native/issues/3721",ios:"https://github.com/maplibre/maplibre-native/issues/3721",js:"https://github.com/maplibre/maplibre-gl-js/issues/6258"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},Nhe={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},Ghe={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."},custom:{doc:"Decodes tiles using the redFactor, blueFactor, greenFactor, baseShift parameters."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default.","sdk-support":{"mapbox, terrarium":{js:"0.43.0",ios:"6.0.0",android:"6.0.0"},custom:{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},redFactor:{type:"number",default:1,doc:"Value that will be multiplied by the red channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},blueFactor:{type:"number",default:1,doc:"Value that will be multiplied by the blue channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},greenFactor:{type:"number",default:1,doc:"Value that will be multiplied by the green channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2358",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},baseShift:{type:"number",default:0,doc:"Value that will be added to the encoding mix when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},Whe={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{required:!0,type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n\n * `cluster` Is `true` if the point is a cluster \n\n * `cluster_id` A unique id for the cluster to be used in conjunction with the [cluster inspection methods](https://maplibre.org/maplibre-gl-js/docs/API/classes/GeoJSONSource/#getclusterexpansionzoom)\n\n * `point_count` Number of original points grouped into this cluster\n\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`)  it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},Qhe={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},qhe={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},Yhe={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. The implementation supports Mapbox Terrain RGB, Mapzen Terrarium tiles and custom encodings.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},"additional methods":{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}}},"color-relief":{doc:"Client-side elevation coloring based on DEM data. The implementation supports Mapbox Terrain RGB, Mapzen Terrarium tiles and custom encodings.","sdk-support":{"basic functionality":{js:"5.6.0",android:"https://github.com/maplibre/maplibre-native/issues/3408",ios:"https://github.com/maplibre/maplibre-native/issues/3408"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'maplibre:'.",example:{"source:comment":"Hydrology FCCODE 460 - Narrow wash"}},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `feature-state` expression is not supported in filter expressions."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},Vhe=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],$he={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Hhe={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Zhe={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Xhe={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},Jhe={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},ede=JSON.parse('{"symbol-placement":{"type":"enum","values":{"point":{"doc":"The label is placed at the point where the geometry is located."},"line":{"doc":"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{"doc":"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},"default":"point","doc":"Label placement relative to its geometry.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`line-center` value":{"js":"0.47.0","android":"6.4.0","ios":"4.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","doc":"Distance between two symbol anchors.","requires":[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"doc":"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don\'t have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like MapLibre GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","doc":"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"},"data-driven styling":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{"doc":"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"source":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},"default":"auto","doc":"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{"js":"0.49.0","android":"6.6.0","ios":"4.5.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the icon will be visible even if it collides with other previously drawn symbols.","requires":["icon-image",{"!":"icon-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-overlap":{"type":"enum","values":{"never":{"doc":"The icon will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The icon will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the icon collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new icon is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new icon is visible."}},"doc":"Allows for control over whether to show an icon when it overlaps other symbols on the map. If `icon-overlap` is not set, `icon-allow-overlap` is used instead.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the icon.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"doc":"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},"viewport":{"doc":"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of icons.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","doc":"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{"doc":"The icon is displayed at its intrinsic aspect ratio."},"width":{"doc":"The icon is scaled in the x-dimension to fit the width of the text."},"height":{"doc":"The icon is scaled in the y-dimension to fit the height of the text."},"both":{"doc":"The icon is scaled in both x- and y-dimensions."}},"default":"none","doc":"Scales the icon to fit around the associated text.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"stretchable icons":{"js":"1.6.0","android":"9.2.0","ios":"5.8.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","doc":"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","doc":"Name of image in sprite to use for drawing an image background.","tokens":true,"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the icon clockwise.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.21.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"padding","default":[2],"units":"pixels","doc":"Size of additional area round the icon bounding box used for detecting symbol collisions.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"2.2.0","android":"https://github.com/maplibre/maplibre-native/issues/2754","ios":"https://github.com/maplibre/maplibre-native/issues/2754"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{"type":"boolean","default":false,"doc":"If true, the icon may be flipped to prevent it from being rendered upside-down.","requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"doc":"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.29.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{"doc":"The center of the icon is placed closest to the anchor."},"left":{"doc":"The left side of the icon is placed closest to the anchor."},"right":{"doc":"The right side of the icon is placed closest to the anchor."},"top":{"doc":"The top of the icon is placed closest to the anchor."},"bottom":{"doc":"The bottom of the icon is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the icon is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the icon is placed closest to the anchor."}},"default":"center","doc":"Part of the icon placed closest to the anchor.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The icon is aligned to the plane of the map."},"viewport":{"doc":"The icon is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `icon-rotation-alignment`."}},"default":"auto","doc":"Orientation of icon when map is pitched.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The text is aligned to the plane of the map."},"viewport":{"doc":"The text is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `text-rotation-alignment`."}},"default":"auto","doc":"Orientation of text when map is pitched.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},"viewport":{"doc":"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"viewport-glyph":{"doc":"When `symbol-placement` is set to `point`, aligns text to the x-axis of the viewport. When `symbol-placement` is set to `line` or `line-center`, aligns glyphs to the x-axis of the viewport and places them along the line."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"},"`viewport-glyph` value":{"js":"2.1.8","android":"https://github.com/maplibre/maplibre-native/issues/250","ios":"https://github.com/maplibre/maplibre-native/issues/250"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"doc":"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"doc":"Fonts to use for displaying text. If the `glyphs` root property is specified, this array is joined together and interpreted as a font stack name. Otherwise, it is interpreted as a cascading fallback list of local font names.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.43.0","android":"6.0.0","ios":"4.0.0"},"local fonts":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/3302","android":"https://github.com/maplibre/maplibre-native/issues/165","ios":"https://github.com/maplibre/maplibre-native/issues/165"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","doc":"Font size.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","doc":"The maximum line width for text wrapping.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","doc":"Text leading value for multi-line text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","doc":"Text tracking amount.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{"doc":"The text is aligned towards the anchor position."},"left":{"doc":"The text is aligned to the left."},"center":{"doc":"The text is centered."},"right":{"doc":"The text is aligned to the right."}},"default":"center","doc":"Text justification options.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"},"auto":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"doc":"Radial offset of text, in the direction of the symbol\'s anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"},"data-driven styling":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{"type":"variableAnchorOffsetCollection","requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations, each paired with an offset value. The renderer will attempt to place the label at each location, in order, before moving on to the next location+offset. Use `text-justify: auto` to choose justification based on anchor position. \\n\\n The length of the array must be even, and must alternate between enum and point entries. i.e., each anchor location must be accompanied by a point, and that point defines the offset when the corresponding anchor location is used. Positive offset values indicate right and down, while negative values indicate left and up. Anchor locations may repeat, allowing the renderer to try multiple offsets to try and place a label using the same anchor. \\n\\n When present, this property takes precedence over `text-anchor`, `text-variable-anchor`, `text-offset`, and `text-radial-offset`. \\n\\n ```json \\n\\n { \\"text-variable-anchor-offset\\": [\\"top\\", [0, 4], \\"left\\", [3,0], \\"bottom\\", [1, 1]] } \\n\\n ``` \\n\\n When the renderer chooses the `top` anchor, `[0, 4]` will be used for `text-offset`; the text will be shifted down by 4 ems. \\n\\n When the renderer chooses the `left` anchor, `[3, 0]` will be used for `text-offset`; the text will be shifted right by 3 ems.","sdk-support":{"basic functionality":{"js":"3.3.0","ios":"6.8.0","android":"11.6.0"},"data-driven styling":{"js":"3.3.0","ios":"https://github.com/maplibre/maplibre-native/issues/2358","android":"https://github.com/maplibre/maplibre-native/issues/2358"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{"type":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"default":"center","doc":"Part of the text placed closest to the anchor.","requires":["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","doc":"Maximum angle change between adjacent characters.","requires":["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{"doc":"If a text\'s language supports horizontal writing mode, symbols with point placement would be laid out horizontally."},"vertical":{"doc":"If a text\'s language supports vertical writing mode, symbols with point placement would be laid out vertically."}},"doc":"The property allows control over a symbol\'s orientation. Note that the property values act as a hint, so that a symbol whose language doesnt support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single \'vertical\' enum value. The order of elements in an array define priority order for the placement of an orientation variant.","requires":["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{"js":"1.3.0","android":"8.3.0","ios":"5.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the text clockwise.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","doc":"Size of the additional area around the text bounding box used for detecting symbol collisions.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"doc":"If true, the text may be flipped vertically to prevent it from being rendered upside-down.","requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{"doc":"The text is not altered."},"uppercase":{"doc":"Forces all letters to be displayed in uppercase."},"lowercase":{"doc":"Forces all letters to be displayed in lowercase."}},"default":"none","doc":"Specifies how to capitalize text, similar to the CSS `text-transform` property.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","doc":"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the text will be visible even if it collides with other previously drawn symbols.","requires":["text-field",{"!":"text-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-overlap":{"type":"enum","values":{"never":{"doc":"The text will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The text will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the text collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new text is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new text is visible."}},"doc":"Allows for control over whether to show symbol text when it overlaps other symbols on the map. If `text-overlap` is not set, `text-allow-overlap` is used instead","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"doc":"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.","requires":["text-field","icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{"doc":"The layer is shown."},"none":{"doc":"The layer is not shown."}},"default":"visible","doc":"Whether this layer is displayed.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"property-type":"constant"}}'),tde={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},nde={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},ide={type:"array",value:"*",doc:"A filter selects specific features from a layer."},rde={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key]  value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key]  value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key]  value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key]  {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key]  {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0  ...  fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0  ...  fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `f0  ...  fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'}},doc:"The filter operator."},ode={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},sde={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},ade={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},lde=JSON.parse('{"doc":"","type":"enum","values":{"let":{"doc":"Binds expressions to named variables, which can then be referenced in the result expression using `[\\"var\\", \\"variable_name\\"]`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["var_1_name","var_1_value","...","var_n_name","var_n_value","expression"],"output-type":"any"}],"parameters":[{"name":"var_i_name","type":"string literal","description":"The name of the i-th variable."},{"name":"var_i_value","type":"any","description":"The value of the i-th variable."},{"name":"expression","type":"any","description":"The expression within which the named variables can be referenced."}]},"example":["let","someNumber",500,["interpolate",["linear"],["var","someNumber"],274,"#edf8e9",1551,"#006d2c"]],"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"var":{"doc":"References variable bound using `let`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["var_name"],"output-type":"any"}],"parameters":[{"name":"var_name","type":"string literal","description":"The name of the variable bound using `let`."}]},"example":["var","density"],"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"literal":{"doc":"Provides a literal array or object value.\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","syntax":{"overloads":[{"parameters":["json_object"],"output-type":"object"},{"parameters":["json_array"],"output-type":"array"}],"parameters":[{"name":"json_object","type":"JSON object"},{"name":"json_array","type":"JSON array"}]},"example":["literal",["DIN Offc Pro Italic","Arial Unicode MS Regular"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"array":{"doc":"Asserts that the input is an array (optionally with a specific item type and length). If, when the input expression is evaluated, it is not of the asserted type or length, then this assertion will cause the whole expression to be aborted.","syntax":{"overloads":[{"parameters":["value"],"output-type":"array"},{"parameters":["type","value"],"output-type":"array<type>"},{"parameters":["type","length","value"],"output-type":"array<type, length>"}],"parameters":[{"name":"value","type":"any"},{"name":"type","type":"\\"string\\" | \\"number\\" | \\"boolean\\"","description":"The asserted type of the input array."},{"name":"length","type":"number literal","description":"The asserted length of the input array."}]},"example":["array","string",3,["literal",["a","b","c"]]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"at":{"doc":"Retrieves an item from an array.","syntax":{"overloads":[{"parameters":["index","array"],"output-type":"T"}],"parameters":[{"name":"index","type":"number","description":"The index into `array`."},{"name":"array","type":"array<T>","description":"The array of items to retrieve the specified item from."}]},"example":["at",1,["literal",["a","b","c"]]],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"in":{"doc":"Determines whether an item exists in an array or a substring exists in a string.\\n\\n - [Measure distances](https://maplibre.org/maplibre-gl-js/docs/examples/measure-distances/)","syntax":{"overloads":[{"parameters":["item","array"],"output-type":"boolean"},{"parameters":["substring","string"],"output-type":"boolean"}],"parameters":[{"name":"item","type":"T","description":"The needle to search for within `array`."},{"name":"array","type":"array<T>","description":"The haystack through which to search for `item`."},{"name":"substring","type":"string","description":"The needle to search for within `string`."},{"name":"string","type":"string","description":"The haystack through which to search for `substring`."}]},"example":["in","$type","Point"],"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.6.0","android":"9.1.0","ios":"5.8.0"}}},"index-of":{"doc":"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search. In a string, a UTF-16 surrogate pair counts as a single position.","syntax":{"overloads":[{"parameters":["item","array","from_index?"],"output-type":"number"},{"parameters":["substring","string","from_index?"],"output-type":"number"}],"parameters":[{"name":"item","type":"T","description":"The needle to search for within `array`."},{"name":"array","type":"array<T>","description":"The haystack through which to search for `item`."},{"name":"substring","type":"string","description":"The needle to search for within `string`."},{"name":"string","type":"string","description":"The haystack through which to search for `substring`."},{"name":"from_index","type":"number","description":"The index from where to begin the search."}]},"example":["index-of","foo",["baz","bar","hello","foo","world"]],"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"slice":{"doc":"Returns a subarray from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index. In a string, a UTF-16 surrogate pair counts as a single position.","syntax":{"overloads":[{"parameters":["array","start_index","end_index?"],"output-type":"array<T>"},{"parameters":["string","start_index","end_index?"],"output-type":"string"}],"parameters":[{"name":"array","type":"array<T>","description":"The original array from which to extract the subarray."},{"name":"string","type":"string","description":"The original string from which to extract the substring."},{"name":"start_index","type":"number","description":"The inclusive index from which `slice` extracts items or characters from the subarray or substring."},{"name":"end_index","type":"number","description":"The non-inclusive index up to which `slice` extracts items or characters from the subarray or substring."}]},"example":["slice",["get","name"],0,3],"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"case":{"doc":"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-hover-effect/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["condition_1","output_1","...","condition_n","output_n","fallback"],"output-type":"any"}],"parameters":[{"name":"condition_i","type":"boolean"},{"name":"output_i","type":"any"},{"name":"fallback","type":"any","description":"The result when no condition evaluates to true."}]},"example":["case",["boolean",["feature-state","hover"],false],1,0.5],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"match":{"doc":"Selects the output whose label value matches the input value, or the fallback value if no match is found. The input can be any expression (e.g. `[\\"get\\", \\"building_type\\"]`). Each label must be either:\\n\\n - a single literal value; or\\n\\n - an array of literal values, whose values must be all strings or all numbers (e.g. `[100, 101]` or `[\\"c\\", \\"b\\"]`). The input matches if any of the values in the array matches, similar to the `\\"in\\"` operator.\\n\\nEach label must be unique. If the input type does not match the type of the labels, the result will be the fallback value.","syntax":{"overloads":[{"parameters":["input","label_1","output_1","...","label_n","output_n","fallback"],"output-type":"any"}],"parameters":[{"name":"input","type":"string | number","description":"Any expression."},{"name":"label_i","type":"string literal | number literal | array<string literal> | array<number literal>","description":"The i-th literal value or array of literal values to match the input against."},{"name":"output_i","type":"any","description":"The result when the i-th label is the first label to match the input."},{"name":"fallback","type":"any","description":"The result when no label matches the input."}]},"example":["match",["get","building_type"],"residential","#f00","commercial","#0f0","#000"],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"coalesce":{"doc":"Evaluates each expression in turn until the first non-null value is obtained, and returns that value.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/use-a-fallback-image/)","syntax":{"overloads":[{"parameters":["expression_1","...","expression_n"],"output-type":"any"}],"parameters":[{"name":"expression_i","type":"any"}]},"example":["coalesce",["image",["concat",["get","icon"],"_15"]],["image","marker_15"]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"step":{"doc":"Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order.\\n\\nReturns the output value of the stop just less than the input, or the first output if the input is less than the first stop.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/create-and-style-clusters/)","syntax":{"overloads":[{"parameters":["input","output_0","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"any"}],"parameters":[{"name":"input","type":"number","description":"Any numeric expression."},{"name":"output_0","type":"any","description":"The result when the `input` is less than the first stop."},{"name":"stop_i_input","type":"number literal","description":"The value of the i-th stop against which the `input` is compared."},{"name":"stop_i_output","type":"any","description":"The result when the i-th stop is the last stop less than the `input`."}]},"example":["step",["get","point_count"],20,100,30,750,40],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, `color`, `array<color>`, or `projection`.\\n\\nInterpolation types:\\n\\n- `[\\"linear\\"]`, or an expression returning one of those types: Interpolates linearly between the pair of stops just less than and just greater than the input.\\n\\n- `[\\"exponential\\", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\\n\\n- `[\\"cubic-bezier\\", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.\\n\\n - [Animate map camera around a point](https://maplibre.org/maplibre-gl-js/docs/examples/animate-camera-around-point/)\\n\\n - [Change building color based on zoom level](https://maplibre.org/maplibre-gl-js/docs/examples/change-building-color-based-on-zoom-level/)\\n\\n - [Create a heatmap layer](https://maplibre.org/maplibre-gl-js/docs/examples/heatmap-layer/)\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["interpolation_type","input","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"number | array<number> | color | array<color> | projection"}],"parameters":[{"name":"interpolation_type","type":"[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","description":"The interpolation type."},{"name":"input","type":"number","description":"Any numeric expression."},{"name":"stop_i_input","type":"number literal","description":"The value of the i-th stop against which the `input` is compared."},{"name":"stop_i_output","type":"number | array<number> | color | array<color> | projection","description":"The output value corresponding to the i-th stop."}]},"example":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate-hcl":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color` or `array<color>`, and the interpolation is performed in the Hue-Chroma-Luminance color space.","syntax":{"overloads":[{"parameters":["interpolation_type","input","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"color | array<color>"}],"parameters":[{"name":"interpolation_type","type":"[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]"},{"name":"input","type":"number"},{"name":"stop_i_input","type":"number literal"},{"name":"stop_i_output","type":"color | array<color>"}]},"example":["interpolate-hcl",["linear"],["zoom"],15,"#f00",15.05,"#00f"],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"interpolate-lab":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color` or `array<color>`, and the interpolation is performed in the CIELAB color space.","syntax":{"overloads":[{"parameters":["interpolation_type","input","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"color | array<color>"}],"parameters":[{"name":"interpolation_type","type":"[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]"},{"name":"input","type":"number"},{"name":"stop_i_input","type":"number literal"},{"name":"stop_i_output","type":"color | array<color>"}]},"example":["interpolate-lab",["linear"],["zoom"],15,"#f00",15.05,"#00f"],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"ln2":{"doc":"Returns the mathematical constant ln(2).","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["ln2"],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"pi":{"doc":"Returns the mathematical constant pi.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["pi"],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"e":{"doc":"Returns the mathematical constant e.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["e"],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"typeof":{"doc":"Returns a string describing the type of the given value.","syntax":{"overloads":[{"parameters":["value"],"output-type":"string"}],"parameters":[{"name":"value","type":"any"}]},"example":["typeof",["get","name"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"string":{"doc":"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"string"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["string",["get","name"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"number":{"doc":"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"number"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["number",["get","population"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"boolean":{"doc":"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-hover-effect/)","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"boolean"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["boolean",["feature-state","hover"],false],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"object":{"doc":"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"object"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["object",["get","some-property"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"collator":{"doc":"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.","syntax":{"overloads":[{"parameters":["options"],"output-type":"collator"}],"parameters":[{"name":"options","type":"{ \\"case-sensitive\\"?: boolean, \\"diacritic-sensitive\\"?: boolean, \\"locale\\"?: string }"}]},"example":["collator",{"case-sensitive":true,"diacritic-sensitive":true,"locale":"fr"}],"group":"Types","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"format":{"doc":"Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#image) expression. Strings may be followed by a style override object that supports the following properties:\\n\\n- `\\"text-font\\"`: Overrides the font stack specified by the root layout property.\\n\\n- `\\"text-color\\"`: Overrides the color specified by the root paint property.\\n\\n- `\\"font-scale\\"`: Applies a scaling factor on `text-size` as specified by the root layout property.\\n\\n- `\\"vertical-align\\"`: Aligns vertically text section or image in relation to the row it belongs to. Possible values are: \\n\\t- `\\"bottom\\"` *default*: align the bottom of this section with the bottom of other sections.\\n<img alt=\\"Visual representation of bottom alignment\\" src=\\"https://github.com/user-attachments/assets/0474a2fd-a4b2-417c-9187-7a13a28695bc\\"/>\\n\\t- `\\"center\\"`: align the center of this section with the center of other sections.\\n<img alt=\\"Visual representation of center alignment\\" src=\\"https://github.com/user-attachments/assets/92237455-be6d-4c5d-b8f6-8127effc1950\\"/>\\n\\t- `\\"top\\"`: align the top of this section with the top of other sections.\\n<img alt=\\"Visual representation of top alignment\\" src=\\"https://github.com/user-attachments/assets/45dccb28-d977-4abb-a006-4ea9792b7c53\\"/>\\n\\t- Refer to [the design proposal](https://github.com/maplibre/maplibre-style-spec/issues/832) for more details.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","syntax":{"overloads":[{"parameters":["input_1","style_overrides_1?","...","input_n","style_overrides_n?"],"output-type":"formatted"}],"parameters":[{"name":"input_i","type":"string | image"},{"name":"style_overrides_i","type":"{ \\"text-font\\"?: string, \\"text-color\\"?: color, \\"font-scale\\"?: number, \\"vertical-align\\"?: \\"bottom\\" | \\"center\\" | \\"top\\" }"}]},"example":["format",["upcase",["get","FacilityName"]],{"font-scale":0.8},"\\n\\n",{},["downcase",["get","Comments"]],{"font-scale":0.6,"vertical-align":"center"}],"group":"Types","sdk-support":{"basic functionality":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-font":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"font-scale":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-color":{"js":"1.3.0","android":"7.3.0","ios":"4.10.0"},"vertical-align":{"js":"5.1.0","android":"https://github.com/maplibre/maplibre-native/issues/3055","ios":"https://github.com/maplibre/maplibre-native/issues/3055"},"image":{"js":"1.6.0","android":"8.6.0","ios":"5.7.0"}}},"image":{"doc":"Returns an `image` type for use in `icon-image`, `*-pattern` entries and as a section in the `format` expression. If set, the `image` argument will check that the requested image exists in the style and will return either the resolved image name or `null`, depending on whether or not the image is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `image` argument.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/use-a-fallback-image/)","syntax":{"overloads":[{"parameters":["image_name"],"output-type":"image"}],"parameters":[{"name":"image_name","type":"string"}]},"example":["image","marker_15"],"group":"Types","sdk-support":{"basic functionality":{"js":"1.4.0","android":"8.6.0","ios":"5.7.0"}}},"global-state":{"doc":"Retrieves a property value from global state that can be set with platform-specific APIs. Defaults can be provided using the [`state`](https://maplibre.org/maplibre-style-spec/root/#state) root property. Returns `null` if no value nor default value is set for the retrieved property.","group":"Lookup","syntax":{"overloads":[{"parameters":["property_name"],"output-type":"any"}],"parameters":[{"name":"property_name","type":"string literal","description":"The name of the global state property to retrieve."}]},"example":["global-state","someProperty"],"sdk-support":{"basic functionality":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/4964","android":"https://github.com/maplibre/maplibre-native/issues/3302","ios":"https://github.com/maplibre/maplibre-native/issues/3302"}}},"number-format":{"doc":"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["input","format_options"],"output-type":"string"}],"parameters":[{"name":"input","type":"number"},{"name":"format_options","type":"{ \\"locale\\"?: string, \\"currency\\"?: string, \\"min-fraction-digits\\"?: number, \\"max-fraction-digits\\"?: number }"}]},"example":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}],"group":"Types","sdk-support":{"basic functionality":{"js":"0.54.0","android":"8.4.0","ios":"supported"}}},"to-string":{"doc":"Converts the input value to a string. If the input is `null`, the result is `\\"\\"`. If the input is a boolean, the result is `\\"true\\"` or `\\"false\\"`. If the input is a number, it is converted to a string as specified by the [\\"NumberToString\\" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form `\\"rgba(r,g,b,a)\\"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-time-slider/)","syntax":{"overloads":[{"parameters":["value"],"output-type":"string"}],"parameters":[{"name":"value","type":"any"}]},"example":["to-string",["get","mag"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-number":{"doc":"Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the [\\"ToNumber Applied to the String Type\\" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"number"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["to-number","someProperty"],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-boolean":{"doc":"Converts the input value to a boolean. The result is `false` when the input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.","syntax":{"overloads":[{"parameters":["value"],"output-type":"boolean"}],"parameters":[{"name":"value","type":"any"}]},"example":["to-boolean","someProperty"],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-rgba":{"doc":"Returns a four-element array containing the input color\'s red, green, blue, and alpha components, in that order.","syntax":{"overloads":[{"parameters":["color"],"output-type":"array"}],"parameters":[{"name":"color","type":"color"}]},"example":["to-rgba","#ff0000"],"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-color":{"doc":"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"color"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["to-color","#edf8e9"],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgb":{"doc":"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.","syntax":{"overloads":[{"parameters":["red","green","blue"],"output-type":"color"}],"parameters":[{"name":"red","type":"number"},{"name":"green","type":"number"},{"name":"blue","type":"number"}]},"example":["rgb",255,0,0],"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgba":{"doc":"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.","syntax":{"overloads":[{"parameters":["red","green","blue","alpha"],"output-type":"color"}],"parameters":[{"name":"red","type":"number"},{"name":"green","type":"number"},{"name":"blue","type":"number"},{"name":"alpha","type":"number"}]},"example":["rgba",255,0,0,1],"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"get":{"doc":"Retrieves a property value from the current feature\'s properties, or from another object if a second argument is provided. Returns null if the requested property is missing.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)\\n\\n - [Extrude polygons for 3D indoor mapping](https://maplibre.org/maplibre-gl-js/docs/examples/extrude-polygons-for-3d-indoor-mapping/)","syntax":{"overloads":[{"parameters":["property_name","object?"],"output-type":"any"}],"parameters":[{"name":"property_name","type":"string","description":"The name of the property to retrieve the value of."},{"name":"object","type":"object","description":"The object to retrieve the value from."}]},"example":["get","someProperty"],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"has":{"doc":"Tests for the presence of a property value in the current feature\'s properties, or from another object if a second argument is provided.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/create-and-style-clusters/)","syntax":{"overloads":[{"parameters":["property_name","object?"],"output-type":"boolean"}],"parameters":[{"name":"property_name","type":"string","description":"The name of the property to test for the presence of."},{"name":"object","type":"object","description":"The object in which to test for the presence of the `property_name` property."}]},"example":["has","someProperty"],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"length":{"doc":"Gets the length of an array or string. In a string, a UTF-16 surrogate pair counts as a single position.","syntax":{"overloads":[{"parameters":["array_or_string"],"output-type":"number"}],"parameters":[{"name":"array_or_string","type":"array | string"}]},"example":["length",["get","myArray"]],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"properties":{"doc":"Gets the feature properties object.  Note that in some cases, it may be more efficient to use [\\"get\\", \\"property_name\\"] directly.","syntax":{"overloads":[{"parameters":[],"output-type":"object"}]},"example":["properties"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"feature-state":{"doc":"Retrieves a property value from the current feature\'s state. Returns null if the requested property is not present on the feature\'s state. A feature\'s state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. When `source.promoteId` is not provided, features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. When `source.promoteId` is provided, features are identified by their `promoteId` property, which may be a number, string, or any primitive data type. Note that [\\"feature-state\\"] can only be used with paint properties that support data-driven styling.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-hover-effect/)","syntax":{"overloads":[{"parameters":["property_name"],"output-type":"any"}],"parameters":[{"name":"property_name","type":"string"}]},"example":["feature-state","hover"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.46.0","ios":"https://github.com/maplibre/maplibre-native/issues/1698","android":"https://github.com/maplibre/maplibre-native/issues/1698"}}},"geometry-type":{"doc":"Returns the feature\'s simple geometry type: `Point`, `LineString`, or `Polygon`. `MultiPoint`, `MultiLineString`, and `MultiPolygon` are returned as `Point`, `LineString`, and `Polygon`, respectively.","syntax":{"overloads":[{"parameters":[],"output-type":"string"}]},"example":["==",["geometry-type"],"Polygon"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"id":{"doc":"Gets the feature\'s id, if it has one.","syntax":{"overloads":[{"parameters":[],"output-type":"any"}]},"example":["id"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"zoom":{"doc":"Gets the current zoom level.  Note that in style layout and paint properties, [\\"zoom\\"] may only appear as the input to a top-level \\"step\\" or \\"interpolate\\" expression.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"group":"Zoom","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"heatmap-density":{"doc":"Gets the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["heatmap-density"],"group":"Heatmap","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"elevation":{"doc":"Gets the elevation of a pixel (in meters above the vertical datum reference of the `raster-dem` tiles) from a `raster-dem` source. Can only be used in the `color-relief-color` property of a `color-relief` layer.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["elevation"],"group":"Color Relief","sdk-support":{"basic functionality":{"js":"5.6.0","android":"https://github.com/maplibre/maplibre-native/issues/3408","ios":"https://github.com/maplibre/maplibre-native/issues/3408"}}},"line-progress":{"doc":"Gets the progress along a gradient line. Can only be used in the `line-gradient` property.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["line-progress"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.6.0"}}},"accumulated":{"doc":"Gets the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.","syntax":{"overloads":[{"parameters":[],"output-type":"any"}]},"example":["accumulated"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.53.0","ios":"supported","android":"supported"}}},"+":{"doc":"Returns the sum of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["+",2,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"*":{"doc":"Returns the product of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["*",2,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"-":{"doc":"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"},{"parameters":["single_input"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The number from which to subtract `input_2`."},{"name":"input_2","type":"number","description":"The number to subtract from `input_1`."},{"name":"single_input","type":"number","description":"The number to subtract from 0."}]},"example":["-",10],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"/":{"doc":"Returns the result of floating point division of the first input by the second.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The dividend."},{"name":"input_2","type":"number","description":"The divisor."}]},"example":["/",["get","population"],["get","sq-km"]],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"%":{"doc":"Returns the remainder after integer division of the first input by the second.","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The dividend."},{"name":"input_2","type":"number","description":"The divisor."}]},"example":["%",10,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"^":{"doc":"Returns the result of raising the first input to the power specified by the second.","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The base."},{"name":"input_2","type":"number","description":"The exponent."}]},"example":["^",2,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sqrt":{"doc":"Returns the square root of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number","description":"The radicand."}]},"example":["sqrt",9],"group":"Math","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"log10":{"doc":"Returns the base-ten logarithm of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["log10",8],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"ln":{"doc":"Returns the natural logarithm of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["ln",8],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"log2":{"doc":"Returns the base-two logarithm of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["log2",8],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sin":{"doc":"Returns the sine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["sin",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"cos":{"doc":"Returns the cosine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["cos",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"tan":{"doc":"Returns the tangent of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["tan",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"asin":{"doc":"Returns the arcsine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["asin",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"acos":{"doc":"Returns the arccosine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["acos",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"atan":{"doc":"Returns the arctangent of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["atan",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"min":{"doc":"Returns the minimum value of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["min",1,2],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"max":{"doc":"Returns the maximum value of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["max",1,2],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"round":{"doc":"Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `[\\"round\\", -1.5]` evaluates to -2.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["round",1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"abs":{"doc":"Returns the absolute value of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["abs",-1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"ceil":{"doc":"Returns the smallest integer that is greater than or equal to the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["ceil",1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"floor":{"doc":"Returns the largest integer that is less than or equal to the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["floor",1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"distance":{"doc":"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.","syntax":{"overloads":[{"parameters":["geojson"],"output-type":"number"}],"parameters":[{"name":"geojson","type":"GeoJSON object"}]},"example":["distance",{"type":"Point","coordinates":[0,0]}],"group":"Math","sdk-support":{"basic functionality":{"js":"4.2.0","android":"9.2.0","ios":"5.9.0"}}},"==":{"doc":"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Add multiple geometries from one GeoJSON source](https://maplibre.org/maplibre-gl-js/docs/examples/multiple-geometries/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)\\n\\n - [Display buildings in 3D](https://maplibre.org/maplibre-gl-js/docs/examples/display-buildings-in-3d/)\\n\\n - [Filter symbols by toggling a list](https://maplibre.org/maplibre-gl-js/docs/examples/filter-symbols-by-toggling-a-list/)","syntax":{"overloads":[{"parameters":["input_1","input_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"input_1","type":"any"},{"name":"input_2","type":"any"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["==","$type","Polygon"],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"!=":{"doc":"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["input_1","input_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"input_1","type":"any"},{"name":"input_2","type":"any"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["!=","cluster",true],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">":{"doc":"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":[">",["get","mag"],2],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<":{"doc":"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["<",["get","mag"],2],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">=":{"doc":"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":[">=",["get","mag"],6],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<=":{"doc":"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["<=",["get","mag"],6],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"all":{"doc":"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"boolean"}],"parameters":[{"name":"input_i","type":"boolean"}]},"example":["all",[">=",["get","mag"],4],["<",["get","mag"],5]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"any":{"doc":"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"boolean"}],"parameters":[{"name":"input_i","type":"boolean"}]},"example":["any",[">=",["get","mag"],4],["<",["get","mag"],5]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"!":{"doc":"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/create-and-style-clusters/)","syntax":{"overloads":[{"parameters":["input"],"output-type":"boolean"}],"parameters":[{"name":"input","type":"boolean"}]},"example":["!",["has","point_count"]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"within":{"doc":"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\\n\\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\\n\\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line\'s endpoint is on the boundary.","syntax":{"overloads":[{"parameters":["geojson"],"output-type":"boolean"}],"parameters":[{"name":"geojson","type":"GeoJSON object"}]},"example":["within",{"type":"Polygon","coordinates":[[[0,0],[0,5],[5,5],[5,0],[0,0]]]}],"group":"Decision","sdk-support":{"basic functionality":{"js":"1.9.0","android":"9.1.0","ios":"5.8.0"}}},"is-supported-script":{"doc":"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the `mapbox-gl-rtl-text` plugin is not in use in MapLibre GL JS).","syntax":{"overloads":[{"parameters":["input"],"output-type":"boolean"}],"parameters":[{"name":"input","type":"string"}]},"example":["is-supported-script",""],"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.6.0","ios":"supported"}}},"upcase":{"doc":"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","syntax":{"overloads":[{"parameters":["input"],"output-type":"string"}],"parameters":[{"name":"input","type":"string"}]},"example":["upcase",["get","name"]],"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"downcase":{"doc":"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","syntax":{"overloads":[{"parameters":["input"],"output-type":"string"}],"parameters":[{"name":"input","type":"string"}]},"example":["downcase",["get","name"]],"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"concat":{"doc":"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.\\n\\n - [Add a generated icon to the map](https://maplibre.org/maplibre-gl-js/docs/examples/add-a-generated-icon-to-the-map/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-time-slider/)\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)\\n\\n - [Variable label placement](https://maplibre.org/maplibre-gl-js/docs/examples/variable-label-placement/)","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"string"}],"parameters":[{"name":"input_i","type":"any"}]},"example":["concat","square-rgb-",["get","color"]],"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"resolved-locale":{"doc":"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.","syntax":{"overloads":[{"parameters":["collator"],"output-type":"string"}],"parameters":[{"name":"collator","type":"collator"}]},"example":["resolved-locale",["collator",{"case-sensitive":true,"diacritic-sensitive":false,"locale":"de"}]],"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}}}}'),ude={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0 (0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0, directly above, to 180, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}}},cde={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the sky."},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color at the horizon."},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the fog. Requires 3D terrain."},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog over the 3D terrain. Where 0 is the map center and 1 is the horizon."},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog color and the horizon color. Where 0 is using the horizon color only and 1 is using the fog color only."},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the sky color and the horizon color. Where 1 is blending the color at the middle of the sky and 0 is not blending at all and using the sky color only."},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the atmosphere. Where 1 is visible atmosphere and 0 is hidden. It is best to interpolate this expression when using globe projection."}},Ade={source:{type:"string",doc:"The source for the terrain data.",required:!0,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}},exaggeration:{type:"number",minimum:0,doc:"The exaggeration of the terrain - how high it will look.",default:1,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}}},hde={type:{type:"projectionDefinition",doc:"The projection definition type. Can be specified as a string, a transition state, or an expression.",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},dde=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],fde={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},pde={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:'Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. GeoJSON sources with `lineMetrics: true` specified won\'t render dashed lines to the expected scale. Zoom-dependent expressions will be evaluated only at integer zoom levels. The only way to create an array value is using `["literal", [...]]`; arrays cannot be read from or derived from feature properties.',minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"5.8.0",ios:"https://github.com/maplibre/maplibre-native/issues/744",android:"https://github.com/maplibre/maplibre-native/issues/744"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},mde={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},gde={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},yde={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline. \n\nThe unit is in pixels only for SDF sprites that were created with a blur radius of 8, multiplied by the display density. I.e., the radius needs to be 16 for `@2x` sprites, etc.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},vde={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added, or when a video is started or its coordinates are updated.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},bde={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,doc:"The direction of the light source(s) used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`. Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,doc:"The altitude of the light source(s) used to generate the hillshading with 0 as sunset and 90 as noon. Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!1,"sdk-support":{"basic functionality":{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",doc:"The shading color of areas that face away from the light source(s). Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source(s). Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{doc:"The legacy hillshade method."},basic:{doc:"Basic hillshade. Uses a simple physics model where the reflected light intensity is proportional to the cosine of the angle between the incident light and the surface normal. Similar to GDAL's `gdaldem` default algorithm."},combined:{doc:"Hillshade algorithm whose intensity scales with slope. Similar to GDAL's `gdaldem` with `-combined` option."},igor:{doc:"Hillshade algorithm which tries to minimize effects on other map features beneath. Similar to GDAL's `gdaldem` with `-igor` option."},multidirectional:{doc:"Hillshade with multiple illumination directions. Uses the basic hillshade model with multiple independent light sources."}},default:"standard",doc:"The hillshade algorithm to use, one of `standard`, `basic`, `combined`, `igor`, or `multidirectional`. ![image](assets/hillshade_methods.png)","sdk-support":{"basic functionality":{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Cde={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},_de={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},xde={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},Tr={$version:Uhe,$root:Khe,sources:Fhe,source:zhe,source_vector:jhe,source_raster:Nhe,source_raster_dem:Ghe,source_geojson:Whe,source_video:Qhe,source_image:qhe,layer:Yhe,layout:Vhe,layout_background:$he,layout_fill:Hhe,layout_circle:Zhe,layout_heatmap:Xhe,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},"property-type":"constant"}},layout_line:Jhe,layout_symbol:ede,layout_raster:tde,layout_hillshade:nde,"layout_color-relief":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{}},"property-type":"constant"}},filter:ide,filter_operator:rde,geometry_type:ode,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:`A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:

* In categorical functions, when the feature value does not match any of the stop domain values.

* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.

* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a \`circle-color\` property but the feature property value is not a string or not a valid color).

* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.

If no default is provided, the style property's default is used in these circumstances.`}},function_stop:sde,expression:ade,expression_name:lde,light:ude,sky:cde,terrain:Ade,projection:hde,paint:dde,paint_fill:fde,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",ios:"4.7.0",android:"7.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:pde,paint_circle:mde,paint_heatmap:gde,paint_symbol:yde,paint_raster:vde,paint_hillshade:bde,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the color-relief will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"5.6.0",android:"https://github.com/maplibre/maplibre-native/issues/3408",ios:"https://github.com/maplibre/maplibre-native/issues/3408"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",doc:'Defines the color of each pixel based on its elevation. Should be an expression that uses `["elevation"]` as input.',example:["interpolate",["linear"],["elevation"],0,"black",8849,"white"],transition:!1,"sdk-support":{"basic functionality":{js:"5.6.0",android:"https://github.com/maplibre/maplibre-native/issues/3408",ios:"https://github.com/maplibre/maplibre-native/issues/3408"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:Cde,transition:_de,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:xde};var tS={exports:{}};var Mde=tS.exports,cz;function wde(){return cz||(cz=1,(function(n,e){(function(t,i){n.exports=i()})(Mde,(function(){var t={},i={};function r(s,a,c){if(i[s]=c,s==="index"){var f="var sharedModule = {}; ("+i.shared+")(sharedModule); ("+i.worker+")(sharedModule);",y={};return i.shared(y),i.index(t,y),typeof window<"u"&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([f],{type:"text/javascript"}))),t}}r("shared",["exports"],(function(s){function a(p,l,A,b){return new(A||(A=Promise))((function(x,B){function h(k){try{w(b.next(k))}catch(F){B(F)}}function g(k){try{w(b.throw(k))}catch(F){B(F)}}function w(k){var F;k.done?x(k.value):(F=k.value,F instanceof A?F:new A((function(j){j(F)}))).then(h,g)}w((b=b.apply(p,l||[])).next())}))}function c(p,l){this.x=p,this.y=l}function f(p){return p&&p.__esModule&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p}var y,_;typeof SuppressedError=="function"&&SuppressedError,c.prototype={clone(){return new c(this.x,this.y)},add(p){return this.clone()._add(p)},sub(p){return this.clone()._sub(p)},multByPoint(p){return this.clone()._multByPoint(p)},divByPoint(p){return this.clone()._divByPoint(p)},mult(p){return this.clone()._mult(p)},div(p){return this.clone()._div(p)},rotate(p){return this.clone()._rotate(p)},rotateAround(p,l){return this.clone()._rotateAround(p,l)},matMult(p){return this.clone()._matMult(p)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(p){return this.x===p.x&&this.y===p.y},dist(p){return Math.sqrt(this.distSqr(p))},distSqr(p){const l=p.x-this.x,A=p.y-this.y;return l*l+A*A},angle(){return Math.atan2(this.y,this.x)},angleTo(p){return Math.atan2(this.y-p.y,this.x-p.x)},angleWith(p){return this.angleWithSep(p.x,p.y)},angleWithSep(p,l){return Math.atan2(this.x*l-this.y*p,this.x*p+this.y*l)},_matMult(p){const l=p[2]*this.x+p[3]*this.y;return this.x=p[0]*this.x+p[1]*this.y,this.y=l,this},_add(p){return this.x+=p.x,this.y+=p.y,this},_sub(p){return this.x-=p.x,this.y-=p.y,this},_mult(p){return this.x*=p,this.y*=p,this},_div(p){return this.x/=p,this.y/=p,this},_multByPoint(p){return this.x*=p.x,this.y*=p.y,this},_divByPoint(p){return this.x/=p.x,this.y/=p.y,this},_unit(){return this._div(this.mag()),this},_perp(){const p=this.y;return this.y=this.x,this.x=-p,this},_rotate(p){const l=Math.cos(p),A=Math.sin(p),b=A*this.x+l*this.y;return this.x=l*this.x-A*this.y,this.y=b,this},_rotateAround(p,l){const A=Math.cos(p),b=Math.sin(p),x=l.y+b*(this.x-l.x)+A*(this.y-l.y);return this.x=l.x+A*(this.x-l.x)-b*(this.y-l.y),this.y=x,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:c},c.convert=function(p){if(p instanceof c)return p;if(Array.isArray(p))return new c(+p[0],+p[1]);if(p.x!==void 0&&p.y!==void 0)return new c(+p.x,+p.y);throw new Error("Expected [x, y] or {x, y} point format")};var E=(function(){if(_)return y;function p(l,A,b,x){this.cx=3*l,this.bx=3*(b-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*A,this.by=3*(x-A)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=A,this.p2x=b,this.p2y=x}return _=1,y=p,p.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,A){if(A===void 0&&(A=1e-6),l<0)return 0;if(l>1)return 1;for(var b=l,x=0;x<8;x++){var B=this.sampleCurveX(b)-l;if(Math.abs(B)<A)return b;var h=this.sampleCurveDerivativeX(b);if(Math.abs(h)<1e-6)break;b-=B/h}var g=0,w=1;for(b=l,x=0;x<20&&(B=this.sampleCurveX(b),!(Math.abs(B-l)<A));x++)l>B?g=b:w=b,b=.5*(w-g)+g;return b},solve:function(l,A){return this.sampleCurveY(this.solveCurveX(l,A))}},y})(),I=f(E);let P,K;function z(){return P==null&&(P=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),P}function Q(){if(K==null&&(K=!1,z())){const l=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(l){for(let b=0;b<25;b++){const x=4*b;l.fillStyle=`rgb(${x},${x+1},${x+2})`,l.fillRect(b%5,Math.floor(b/5),1,1)}const A=l.getImageData(0,0,5,5).data;for(let b=0;b<100;b++)if(b%4!=3&&A[b]!==b){K=!0;break}}}return K||!1}var V=1e-6,$=typeof Float32Array<"u"?Float32Array:Array;function Z(){var p=new $(9);return $!=Float32Array&&(p[1]=0,p[2]=0,p[3]=0,p[5]=0,p[6]=0,p[7]=0),p[0]=1,p[4]=1,p[8]=1,p}function ee(p){return p[0]=1,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=1,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=1,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}function X(){var p=new $(3);return $!=Float32Array&&(p[0]=0,p[1]=0,p[2]=0),p}function W(p){var l=p[0],A=p[1],b=p[2];return Math.sqrt(l*l+A*A+b*b)}function se(p,l,A){var b=new $(3);return b[0]=p,b[1]=l,b[2]=A,b}function ue(p,l,A){return p[0]=l[0]+A[0],p[1]=l[1]+A[1],p[2]=l[2]+A[2],p}function ve(p,l,A){return p[0]=l[0]*A,p[1]=l[1]*A,p[2]=l[2]*A,p}function ye(p,l,A){var b=l[0],x=l[1],B=l[2],h=A[0],g=A[1],w=A[2];return p[0]=x*w-B*g,p[1]=B*h-b*w,p[2]=b*g-x*h,p}var Ee,_e=W;function Be(p,l,A){var b=l[0],x=l[1],B=l[2],h=l[3];return p[0]=A[0]*b+A[4]*x+A[8]*B+A[12]*h,p[1]=A[1]*b+A[5]*x+A[9]*B+A[13]*h,p[2]=A[2]*b+A[6]*x+A[10]*B+A[14]*h,p[3]=A[3]*b+A[7]*x+A[11]*B+A[15]*h,p}function Fe(){var p=new $(4);return $!=Float32Array&&(p[0]=0,p[1]=0,p[2]=0),p[3]=1,p}function Se(p,l,A,b){var x=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",B=Math.PI/360;l*=B,b*=B,A*=B;var h=Math.sin(l),g=Math.cos(l),w=Math.sin(A),k=Math.cos(A),F=Math.sin(b),j=Math.cos(b);switch(x){case"xyz":p[0]=h*k*j+g*w*F,p[1]=g*w*j-h*k*F,p[2]=g*k*F+h*w*j,p[3]=g*k*j-h*w*F;break;case"xzy":p[0]=h*k*j-g*w*F,p[1]=g*w*j-h*k*F,p[2]=g*k*F+h*w*j,p[3]=g*k*j+h*w*F;break;case"yxz":p[0]=h*k*j+g*w*F,p[1]=g*w*j-h*k*F,p[2]=g*k*F-h*w*j,p[3]=g*k*j+h*w*F;break;case"yzx":p[0]=h*k*j+g*w*F,p[1]=g*w*j+h*k*F,p[2]=g*k*F-h*w*j,p[3]=g*k*j-h*w*F;break;case"zxy":p[0]=h*k*j-g*w*F,p[1]=g*w*j+h*k*F,p[2]=g*k*F+h*w*j,p[3]=g*k*j-h*w*F;break;case"zyx":p[0]=h*k*j-g*w*F,p[1]=g*w*j+h*k*F,p[2]=g*k*F-h*w*j,p[3]=g*k*j+h*w*F;break;default:throw new Error("Unknown angle order "+x)}return p}function qe(){var p=new $(2);return $!=Float32Array&&(p[0]=0,p[1]=0),p}function ut(p,l){var A=new $(2);return A[0]=p,A[1]=l,A}X(),Ee=new $(4),$!=Float32Array&&(Ee[0]=0,Ee[1]=0,Ee[2]=0,Ee[3]=0),X(),se(1,0,0),se(0,1,0),Fe(),Fe(),Z(),qe();const ht=8192;function De(p,l,A){return l*(ht/(p.tileSize*Math.pow(2,A-p.tileID.overscaledZ)))}function Ie(p,l){return(p%l+l)%l}function ze(p,l,A){return p*(1-A)+l*A}function Te(p){if(p<=0)return 0;if(p>=1)return 1;const l=p*p,A=l*p;return 4*(p<.5?A:3*(p-l)+A-.75)}function vt(p,l,A,b){const x=new I(p,l,A,b);return B=>x.solve(B)}const st=vt(.25,.1,.25,1);function Et(p,l,A){return Math.min(A,Math.max(l,p))}function Pt(p,l,A){const b=A-l,x=((p-l)%b+b)%b+l;return x===l?A:x}function ke(p,...l){for(const A of l)for(const b in A)p[b]=A[b];return p}let Oe=1;function we(p,l,A){const b={};for(const x in p)b[x]=l.call(this,p[x],x,p);return b}function Ye(p,l,A){const b={};for(const x in p)l.call(this,p[x],x,p)&&(b[x]=p[x]);return b}function ft(p){return Array.isArray(p)?p.map(ft):typeof p=="object"&&p?we(p,ft):p}const dt={};function gt(p){dt[p]||(typeof console<"u"&&console.warn(p),dt[p]=!0)}function Lt(p,l,A){return(A.y-p.y)*(l.x-p.x)>(l.y-p.y)*(A.x-p.x)}function Tt(p){return typeof WorkerGlobalScope<"u"&&p!==void 0&&p instanceof WorkerGlobalScope}let Zt=null;function Fn(p){return typeof ImageBitmap<"u"&&p instanceof ImageBitmap}const Ln="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function fi(p,l,A,b,x){return a(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const B=new VideoFrame(p,{timestamp:0});try{const h=B?.format;if(!h||!h.startsWith("BGR")&&!h.startsWith("RGB"))throw new Error(`Unrecognized format ${h}`);const g=h.startsWith("BGR"),w=new Uint8ClampedArray(b*x*4);if(yield B.copyTo(w,(function(k,F,j,H,ne){const ie=4*Math.max(-F,0),Ae=(Math.max(0,j)-j)*H*4+ie,de=4*H,Me=Math.max(0,F),We=Math.max(0,j);return{rect:{x:Me,y:We,width:Math.min(k.width,F+H)-Me,height:Math.min(k.height,j+ne)-We},layout:[{offset:Ae,stride:de}]}})(p,l,A,b,x)),g)for(let k=0;k<w.length;k+=4){const F=w[k];w[k]=w[k+2],w[k+2]=F}return w}finally{B.close()}}))}let Rn,Dn;function wn(p,l,A,b){return p.addEventListener(l,A,b),{unsubscribe:()=>{p.removeEventListener(l,A,b)}}}function qn(p){return p*Math.PI/180}function En(p){return p/Math.PI*180}const wt={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},be={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},re="AbortError";function ce(){return new Error(re)}const Pe={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function tt(p){return Pe.REGISTERED_PROTOCOLS[p.substring(0,p.indexOf("://"))]}const xt="global-dispatcher";class It extends Error{constructor(l,A,b,x){super(`AJAXError: ${A} (${l}): ${b}`),this.status=l,this.statusText=A,this.url=b,this.body=x}}const _n=()=>Tt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Xe=function(p,l){if(/:\/\//.test(p.url)&&!/^https?:|^file:/.test(p.url)){const b=tt(p.url);if(b)return b(p,l);if(Tt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:p,targetMapId:xt},l)}if(!(/^file:/.test(A=p.url)||/^file:/.test(_n())&&!/^\w+:/.test(A))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(b,x){return a(this,void 0,void 0,(function*(){const B=new Request(b.url,{method:b.method||"GET",body:b.body,credentials:b.credentials,headers:b.headers,cache:b.cache,referrer:_n(),signal:x.signal});let h,g;b.type!=="json"||B.headers.has("Accept")||B.headers.set("Accept","application/json");try{h=yield fetch(B)}catch(k){throw new It(0,k.message,b.url,new Blob)}if(!h.ok){const k=yield h.blob();throw new It(h.status,h.statusText,b.url,k)}g=b.type==="arrayBuffer"||b.type==="image"?h.arrayBuffer():b.type==="json"?h.json():h.text();const w=yield g;if(x.signal.aborted)throw ce();return{data:w,cacheControl:h.headers.get("Cache-Control"),expires:h.headers.get("Expires")}}))})(p,l);if(Tt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:p,mustQueue:!0,targetMapId:xt},l)}var A;return(function(b,x){return new Promise(((B,h)=>{var g;const w=new XMLHttpRequest;w.open(b.method||"GET",b.url,!0),b.type!=="arrayBuffer"&&b.type!=="image"||(w.responseType="arraybuffer");for(const k in b.headers)w.setRequestHeader(k,b.headers[k]);b.type==="json"&&(w.responseType="text",!((g=b.headers)===null||g===void 0)&&g.Accept||w.setRequestHeader("Accept","application/json")),w.withCredentials=b.credentials==="include",w.onerror=()=>{h(new Error(w.statusText))},w.onload=()=>{if(!x.signal.aborted)if((w.status>=200&&w.status<300||w.status===0)&&w.response!==null){let k=w.response;if(b.type==="json")try{k=JSON.parse(w.response)}catch(F){return void h(F)}B({data:k,cacheControl:w.getResponseHeader("Cache-Control"),expires:w.getResponseHeader("Expires")})}else{const k=new Blob([w.response],{type:w.getResponseHeader("Content-Type")});h(new It(w.status,w.statusText,b.url,k))}},x.signal.addEventListener("abort",(()=>{w.abort(),h(ce())})),w.send(b.body)}))})(p,l)};function ae(p){if(!p||p.indexOf("://")<=0||p.indexOf("data:image/")===0||p.indexOf("blob:")===0)return!0;const l=new URL(p),A=window.location;return l.protocol===A.protocol&&l.host===A.host}function he(p,l,A){A[p]&&A[p].indexOf(l)!==-1||(A[p]=A[p]||[],A[p].push(l))}function C(p,l,A){if(A&&A[p]){const b=A[p].indexOf(l);b!==-1&&A[p].splice(b,1)}}class Ke{constructor(l,A={}){ke(this,A),this.type=l}}class $e extends Ke{constructor(l,A={}){super("error",ke({error:l},A))}}class rt{on(l,A){return this._listeners=this._listeners||{},he(l,A,this._listeners),{unsubscribe:()=>{this.off(l,A)}}}off(l,A){return C(l,A,this._listeners),C(l,A,this._oneTimeListeners),this}once(l,A){return A?(this._oneTimeListeners=this._oneTimeListeners||{},he(l,A,this._oneTimeListeners),this):new Promise((b=>this.once(l,b)))}fire(l,A){typeof l=="string"&&(l=new Ke(l,A||{}));const b=l.type;if(this.listens(b)){l.target=this;const x=this._listeners&&this._listeners[b]?this._listeners[b].slice():[];for(const g of x)g.call(this,l);const B=this._oneTimeListeners&&this._oneTimeListeners[b]?this._oneTimeListeners[b].slice():[];for(const g of B)C(b,g,this._oneTimeListeners),g.call(this,l);const h=this._eventedParent;h&&(ke(l,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),h.fire(l))}else l instanceof $e&&console.error(l.error);return this}listens(l){return this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l)}setEventedParent(l,A){return this._eventedParent=l,this._eventedParentData=A,this}}var Re={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const at=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function St(p,l){const A={};for(const b in p)b!=="ref"&&(A[b]=p[b]);return at.forEach((b=>{b in l&&(A[b]=l[b])})),A}function Bt(p,l){if(Array.isArray(p)){if(!Array.isArray(l)||p.length!==l.length)return!1;for(let A=0;A<p.length;A++)if(!Bt(p[A],l[A]))return!1;return!0}if(typeof p=="object"&&p!==null&&l!==null){if(typeof l!="object"||Object.keys(p).length!==Object.keys(l).length)return!1;for(const A in p)if(!Bt(p[A],l[A]))return!1;return!0}return p===l}function kt(p,l){p.push(l)}function sn(p,l,A){kt(A,{command:"addSource",args:[p,l[p]]})}function Tn(p,l,A){kt(l,{command:"removeSource",args:[p]}),A[p]=!0}function Yn(p,l,A,b){Tn(p,A,b),sn(p,l,A)}function vi(p,l,A){let b;for(b in p[A])if(Object.prototype.hasOwnProperty.call(p[A],b)&&b!=="data"&&!Bt(p[A][b],l[A][b]))return!1;for(b in l[A])if(Object.prototype.hasOwnProperty.call(l[A],b)&&b!=="data"&&!Bt(p[A][b],l[A][b]))return!1;return!0}function ui(p,l,A,b,x,B){p=p||{},l=l||{};for(const h in p)Object.prototype.hasOwnProperty.call(p,h)&&(Bt(p[h],l[h])||A.push({command:B,args:[b,h,l[h],x]}));for(const h in l)Object.prototype.hasOwnProperty.call(l,h)&&!Object.prototype.hasOwnProperty.call(p,h)&&(Bt(p[h],l[h])||A.push({command:B,args:[b,h,l[h],x]}))}function Zn(p){return p.id}function Mi(p,l){return p[l.id]=l,p}class nn{constructor(l,A,b,x){this.message=(l?`${l}: `:"")+b,x&&(this.identifier=x),A!=null&&A.__line__&&(this.line=A.__line__)}}function $i(p,...l){for(const A of l)for(const b in A)p[b]=A[b];return p}class bi extends Error{constructor(l,A){super(A),this.message=A,this.key=l}}class to{constructor(l,A=[]){this.parent=l,this.bindings={};for(const[b,x]of A)this.bindings[b]=x}concat(l){return new to(this,l)}get(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(`${l} not found in scope.`)}has(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)}}const tr={kind:"null"},an={kind:"number"},Kn={kind:"string"},ii={kind:"boolean"},nr={kind:"color"},Su={kind:"projectionDefinition"},Ms={kind:"object"},Si={kind:"value"},Ba={kind:"collator"},Xl={kind:"formatted"},Yr={kind:"padding"},ls={kind:"colorArray"},$a={kind:"numberArray"},ma={kind:"resolvedImage"},wo={kind:"variableAnchorOffsetCollection"};function ga(p,l){return{kind:"array",itemType:p,N:l}}function mr(p){if(p.kind==="array"){const l=mr(p.itemType);return typeof p.N=="number"?`array<${l}, ${p.N}>`:p.itemType.kind==="value"?"array":`array<${l}>`}return p.kind}const Sl=[tr,an,Kn,ii,nr,Su,Xl,Ms,ga(Si),Yr,$a,ls,ma,wo];function us(p,l){if(l.kind==="error")return null;if(p.kind==="array"){if(l.kind==="array"&&(l.N===0&&l.itemType.kind==="value"||!us(p.itemType,l.itemType))&&(typeof p.N!="number"||p.N===l.N))return null}else{if(p.kind===l.kind)return null;if(p.kind==="value"){for(const A of Sl)if(!us(A,l))return null}}return`Expected ${mr(p)} but found ${mr(l)} instead.`}function Xo(p,l){return l.some((A=>A.kind===p.kind))}function no(p,l){return l.some((A=>A==="null"?p===null:A==="array"?Array.isArray(p):A==="object"?p&&!Array.isArray(p)&&typeof p=="object":A===typeof p))}function El(p,l){return p.kind==="array"&&l.kind==="array"?p.itemType.kind===l.itemType.kind&&typeof p.N=="number":p.kind===l.kind}const YA=.96422,Bl=.82521,Eu=4/29,na=6/29,Jo=3*na*na,Bu=na*na*na,Ol=Math.PI/180,Ou=180/Math.PI;function Jl(p){return(p%=360)<0&&(p+=360),p}function Zu([p,l,A,b]){let x,B;const h=ia((.2225045*(p=VA(p))+.7168786*(l=VA(l))+.0606169*(A=VA(A)))/1);p===l&&l===A?x=B=h:(x=ia((.4360747*p+.3850649*l+.1430804*A)/YA),B=ia((.0139322*p+.0971045*l+.7141733*A)/Bl));const g=116*h-16;return[g<0?0:g,500*(x-h),200*(h-B),b]}function VA(p){return p<=.04045?p/12.92:Math.pow((p+.055)/1.055,2.4)}function ia(p){return p>Bu?Math.pow(p,1/3):p/Jo+Eu}function Bc([p,l,A,b]){let x=(p+16)/116,B=isNaN(l)?x:x+l/500,h=isNaN(A)?x:x-A/200;return x=1*Oc(x),B=YA*Oc(B),h=Bl*Oc(h),[Il(3.1338561*B-1.6168667*x-.4906146*h),Il(-.9787684*B+1.9161415*x+.033454*h),Il(.0719453*B-.2289914*x+1.4052427*h),b]}function Il(p){return(p=p<=.00304?12.92*p:1.055*Math.pow(p,1/2.4)-.055)<0?0:p>1?1:p}function Oc(p){return p>na?p*p*p:Jo*(p-Eu)}const eu=Object.hasOwn||function(p,l){return Object.prototype.hasOwnProperty.call(p,l)};function Rs(p,l){return eu(p,l)?p[l]:void 0}function ws(p){return parseInt(p.padEnd(2,p),16)/255}function So(p,l){return Ps(l?p/100:p,0,1)}function Ps(p,l,A){return Math.min(Math.max(l,p),A)}function iA(p){return!p.some(Number.isNaN)}const Ws={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Ha(p,l,A){return p+A*(l-p)}function tu(p,l,A){return p.map(((b,x)=>Ha(b,l[x],A)))}class Yi{constructor(l,A,b,x=1,B=!0){this.r=l,this.g=A,this.b=b,this.a=x,B||(this.r*=x,this.g*=x,this.b*=x,x||this.overwriteGetter("rgb",[l,A,b,x]))}static parse(l){if(l instanceof Yi)return l;if(typeof l!="string")return;const A=(function(b){if((b=b.toLowerCase().trim())==="transparent")return[0,0,0,0];const x=Rs(Ws,b);if(x){const[h,g,w]=x;return[h/255,g/255,w/255,1]}if(b.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(b)){const h=b.length<6?1:2;let g=1;return[ws(b.slice(g,g+=h)),ws(b.slice(g,g+=h)),ws(b.slice(g,g+=h)),ws(b.slice(g,g+h)||"ff")]}if(b.startsWith("rgb")){const h=b.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(h){const[g,w,k,F,j,H,ne,ie,Ae,de,Me,We]=h,Ue=[F||" ",ne||" ",de].join("");if(Ue==="  "||Ue==="  /"||Ue===",,"||Ue===",,,"){const je=[k,H,Ae].join(""),ot=je==="%%%"?100:je===""?255:0;if(ot){const nt=[Ps(+w/ot,0,1),Ps(+j/ot,0,1),Ps(+ie/ot,0,1),Me?So(+Me,We):1];if(iA(nt))return nt}}return}}const B=b.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(B){const[h,g,w,k,F,j,H,ne,ie]=B,Ae=[w||" ",F||" ",H].join("");if(Ae==="  "||Ae==="  /"||Ae===",,"||Ae===",,,"){const de=[+g,Ps(+k,0,100),Ps(+j,0,100),ne?So(+ne,ie):1];if(iA(de))return(function([Me,We,Ue,je]){function ot(nt){const Mt=(nt+Me/30)%12,Vt=We*Math.min(Ue,1-Ue);return Ue-Vt*Math.max(-1,Math.min(Mt-3,9-Mt,1))}return Me=Jl(Me),We/=100,Ue/=100,[ot(0),ot(8),ot(4),je]})(de)}}})(l);return A?new Yi(...A,!1):void 0}get rgb(){const{r:l,g:A,b,a:x}=this,B=x||1/0;return this.overwriteGetter("rgb",[l/B,A/B,b/B,x])}get hcl(){return this.overwriteGetter("hcl",(function(l){const[A,b,x,B]=Zu(l),h=Math.sqrt(b*b+x*x);return[Math.round(1e4*h)?Jl(Math.atan2(x,b)*Ou):NaN,h,A,B]})(this.rgb))}get lab(){return this.overwriteGetter("lab",Zu(this.rgb))}overwriteGetter(l,A){return Object.defineProperty(this,l,{value:A}),A}toString(){const[l,A,b,x]=this.rgb;return`rgba(${[l,A,b].map((B=>Math.round(255*B))).join(",")},${x})`}static interpolate(l,A,b,x="rgb"){switch(x){case"rgb":{const[B,h,g,w]=tu(l.rgb,A.rgb,b);return new Yi(B,h,g,w,!1)}case"hcl":{const[B,h,g,w]=l.hcl,[k,F,j,H]=A.hcl;let ne,ie;if(isNaN(B)||isNaN(k))isNaN(B)?isNaN(k)?ne=NaN:(ne=k,g!==1&&g!==0||(ie=F)):(ne=B,j!==1&&j!==0||(ie=h));else{let Ue=k-B;k>B&&Ue>180?Ue-=360:k<B&&B-k>180&&(Ue+=360),ne=B+b*Ue}const[Ae,de,Me,We]=(function([Ue,je,ot,nt]){return Ue=isNaN(Ue)?0:Ue*Ol,Bc([ot,Math.cos(Ue)*je,Math.sin(Ue)*je,nt])})([ne,ie??Ha(h,F,b),Ha(g,j,b),Ha(w,H,b)]);return new Yi(Ae,de,Me,We,!1)}case"lab":{const[B,h,g,w]=Bc(tu(l.lab,A.lab,b));return new Yi(B,h,g,w,!1)}}}}Yi.black=new Yi(0,0,0,1),Yi.white=new Yi(1,1,1,1),Yi.transparent=new Yi(0,0,0,0),Yi.red=new Yi(1,0,0,1);class Qs{constructor(l,A,b){this.sensitivity=l?A?"variant":"case":A?"accent":"base",this.locale=b,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(l,A){return this.collator.compare(l,A)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const zi=["bottom","center","top"];class Vr{constructor(l,A,b,x,B,h){this.text=l,this.image=A,this.scale=b,this.fontStack=x,this.textColor=B,this.verticalAlign=h}}class yo{constructor(l){this.sections=l}static fromString(l){return new yo([new Vr(l,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((l=>l.text.length!==0||l.image&&l.image.name.length!==0))}static factory(l){return l instanceof yo?l:yo.fromString(l)}toString(){return this.sections.length===0?"":this.sections.map((l=>l.text)).join("")}}class Eo{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Eo)return l;if(typeof l=="number")return new Eo([l,l,l,l]);if(Array.isArray(l)&&!(l.length<1||l.length>4)){for(const A of l)if(typeof A!="number")return;switch(l.length){case 1:l=[l[0],l[0],l[0],l[0]];break;case 2:l=[l[0],l[1],l[0],l[1]];break;case 3:l=[l[0],l[1],l[2],l[1]]}return new Eo(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,A,b){return new Eo(tu(l.values,A.values,b))}}class io{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof io)return l;if(typeof l=="number")return new io([l]);if(Array.isArray(l)){for(const A of l)if(typeof A!="number")return;return new io(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,A,b){return new io(tu(l.values,A.values,b))}}class Lo{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Lo)return l;if(typeof l=="string"){const b=Yi.parse(l);return b?new Lo([b]):void 0}if(!Array.isArray(l))return;const A=[];for(const b of l){if(typeof b!="string")return;const x=Yi.parse(b);if(!x)return;A.push(x)}return new Lo(A)}toString(){return JSON.stringify(this.values)}static interpolate(l,A,b,x="rgb"){const B=[];if(l.values.length!=A.values.length)throw new Error(`colorArray: Arrays have mismatched length (${l.values.length} vs. ${A.values.length}), cannot interpolate.`);for(let h=0;h<l.values.length;h++)B.push(Yi.interpolate(l.values[h],A.values[h],b,x));return new Lo(B)}}class gr extends Error{constructor(l){super(l),this.name="RuntimeError"}toJSON(){return this.message}}const Ic=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Bo{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Bo)return l;if(Array.isArray(l)&&!(l.length<1)&&l.length%2==0){for(let A=0;A<l.length;A+=2){const b=l[A],x=l[A+1];if(typeof b!="string"||!Ic.has(b)||!Array.isArray(x)||x.length!==2||typeof x[0]!="number"||typeof x[1]!="number")return}return new Bo(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,A,b){const x=l.values,B=A.values;if(x.length!==B.length)throw new gr(`Cannot interpolate values of different length. from: ${l.toString()}, to: ${A.toString()}`);const h=[];for(let g=0;g<x.length;g+=2){if(x[g]!==B[g])throw new gr(`Cannot interpolate values containing mismatched anchors. from[${g}]: ${x[g]}, to[${g}]: ${B[g]}`);h.push(x[g]);const[w,k]=x[g+1],[F,j]=B[g+1];h.push([Ha(w,F,b),Ha(k,j,b)])}return new Bo(h)}}class po{constructor(l){this.name=l.name,this.available=l.available}toString(){return this.name}static fromString(l){return l?new po({name:l,available:!1}):null}}class es{constructor(l,A,b){this.from=l,this.to=A,this.transition=b}static interpolate(l,A,b){return new es(l,A,b)}static parse(l){return l instanceof es?l:Array.isArray(l)&&l.length===3&&typeof l[0]=="string"&&typeof l[1]=="string"&&typeof l[2]=="number"?new es(l[0],l[1],l[2]):typeof l=="object"&&typeof l.from=="string"&&typeof l.to=="string"&&typeof l.transition=="number"?new es(l.from,l.to,l.transition):typeof l=="string"?new es(l,l,1):void 0}}function Ls(p,l,A,b){return typeof p=="number"&&p>=0&&p<=255&&typeof l=="number"&&l>=0&&l<=255&&typeof A=="number"&&A>=0&&A<=255?b===void 0||typeof b=="number"&&b>=0&&b<=1?null:`Invalid rgba value [${[p,l,A,b].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof b=="number"?[p,l,A,b]:[p,l,A]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Us(p){if(p===null||typeof p=="string"||typeof p=="boolean"||typeof p=="number"||p instanceof es||p instanceof Yi||p instanceof Qs||p instanceof yo||p instanceof Eo||p instanceof io||p instanceof Lo||p instanceof Bo||p instanceof po)return!0;if(Array.isArray(p)){for(const l of p)if(!Us(l))return!1;return!0}if(typeof p=="object"){for(const l in p)if(!Us(p[l]))return!1;return!0}return!1}function Rr(p){if(p===null)return tr;if(typeof p=="string")return Kn;if(typeof p=="boolean")return ii;if(typeof p=="number")return an;if(p instanceof Yi)return nr;if(p instanceof es)return Su;if(p instanceof Qs)return Ba;if(p instanceof yo)return Xl;if(p instanceof Eo)return Yr;if(p instanceof io)return $a;if(p instanceof Lo)return ls;if(p instanceof Bo)return wo;if(p instanceof po)return ma;if(Array.isArray(p)){const l=p.length;let A;for(const b of p){const x=Rr(b);if(A){if(A===x)continue;A=Si;break}A=x}return ga(A||Si,l)}return Ms}function _r(p){const l=typeof p;return p===null?"":l==="string"||l==="number"||l==="boolean"?String(p):p instanceof Yi||p instanceof es||p instanceof yo||p instanceof Eo||p instanceof io||p instanceof Lo||p instanceof Bo||p instanceof po?p.toString():JSON.stringify(p)}class yr{constructor(l,A){this.type=l,this.value=A}static parse(l,A){if(l.length!==2)return A.error(`'literal' expression requires exactly one argument, but found ${l.length-1} instead.`);if(!Us(l[1]))return A.error("invalid value");const b=l[1];let x=Rr(b);const B=A.expectedType;return x.kind!=="array"||x.N!==0||!B||B.kind!=="array"||typeof B.N=="number"&&B.N!==0||(x=B),new yr(x,b)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const J={string:Kn,number:an,boolean:ii,object:Ms};class ge{constructor(l,A){this.type=l,this.args=A}static parse(l,A){if(l.length<2)return A.error("Expected at least one argument.");let b,x=1;const B=l[0];if(B==="array"){let g,w;if(l.length>2){const k=l[1];if(typeof k!="string"||!(k in J)||k==="object")return A.error('The item type argument of "array" must be one of string, number, boolean',1);g=J[k],x++}else g=Si;if(l.length>3){if(l[2]!==null&&(typeof l[2]!="number"||l[2]<0||l[2]!==Math.floor(l[2])))return A.error('The length argument to "array" must be a positive integer literal',2);w=l[2],x++}b=ga(g,w)}else{if(!J[B])throw new Error(`Types doesn't contain name = ${B}`);b=J[B]}const h=[];for(;x<l.length;x++){const g=A.parse(l[x],x,Si);if(!g)return null;h.push(g)}return new ge(b,h)}evaluate(l){for(let A=0;A<this.args.length;A++){const b=this.args[A].evaluate(l);if(!us(this.type,Rr(b)))return b;if(A===this.args.length-1)throw new gr(`Expected value to be of type ${mr(this.type)}, but found ${mr(Rr(b))} instead.`)}throw new Error}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}const Ge={"to-boolean":ii,"to-color":nr,"to-number":an,"to-string":Kn};class bt{constructor(l,A){this.type=l,this.args=A}static parse(l,A){if(l.length<2)return A.error("Expected at least one argument.");const b=l[0];if(!Ge[b])throw new Error(`Can't parse ${b} as it is not part of the known types`);if((b==="to-boolean"||b==="to-string")&&l.length!==2)return A.error("Expected one argument.");const x=Ge[b],B=[];for(let h=1;h<l.length;h++){const g=A.parse(l[h],h,Si);if(!g)return null;B.push(g)}return new bt(x,B)}evaluate(l){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(l);case"color":{let A,b;for(const x of this.args){if(A=x.evaluate(l),b=null,A instanceof Yi)return A;if(typeof A=="string"){const B=l.parseColor(A);if(B)return B}else if(Array.isArray(A)&&(b=A.length<3||A.length>4?`Invalid rgba value ${JSON.stringify(A)}: expected an array containing either three or four numeric values.`:Ls(A[0],A[1],A[2],A[3]),!b))return new Yi(A[0]/255,A[1]/255,A[2]/255,A[3])}throw new gr(b||`Could not parse color from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"padding":{let A;for(const b of this.args){A=b.evaluate(l);const x=Eo.parse(A);if(x)return x}throw new gr(`Could not parse padding from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"numberArray":{let A;for(const b of this.args){A=b.evaluate(l);const x=io.parse(A);if(x)return x}throw new gr(`Could not parse numberArray from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"colorArray":{let A;for(const b of this.args){A=b.evaluate(l);const x=Lo.parse(A);if(x)return x}throw new gr(`Could not parse colorArray from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"variableAnchorOffsetCollection":{let A;for(const b of this.args){A=b.evaluate(l);const x=Bo.parse(A);if(x)return x}throw new gr(`Could not parse variableAnchorOffsetCollection from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"number":{let A=null;for(const b of this.args){if(A=b.evaluate(l),A===null)return 0;const x=Number(A);if(!isNaN(x))return x}throw new gr(`Could not convert ${JSON.stringify(A)} to number.`)}case"formatted":return yo.fromString(_r(this.args[0].evaluate(l)));case"resolvedImage":return po.fromString(_r(this.args[0].evaluate(l)));case"projectionDefinition":return this.args[0].evaluate(l);default:return _r(this.args[0].evaluate(l))}}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}const bn=["Unknown","Point","LineString","Polygon"];class Xt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?bn[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(l){let A=this._parseColorCache.get(l);return A||(A=Yi.parse(l),this._parseColorCache.set(l,A)),A}}class hi{constructor(l,A,b=[],x,B=new to,h=[]){this.registry=l,this.path=b,this.key=b.map((g=>`[${g}]`)).join(""),this.scope=B,this.errors=h,this.expectedType=x,this._isConstant=A}parse(l,A,b,x,B={}){return A?this.concat(A,b,x)._parse(l,B):this._parse(l,B)}_parse(l,A){function b(x,B,h){return h==="assert"?new ge(B,[x]):h==="coerce"?new bt(B,[x]):x}if(l!==null&&typeof l!="string"&&typeof l!="boolean"&&typeof l!="number"||(l=["literal",l]),Array.isArray(l)){if(l.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const x=l[0];if(typeof x!="string")return this.error(`Expression name must be a string, but found ${typeof x} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const B=this.registry[x];if(B){let h=B.parse(l,this);if(!h)return null;if(this.expectedType){const g=this.expectedType,w=h.type;if(g.kind!=="string"&&g.kind!=="number"&&g.kind!=="boolean"&&g.kind!=="object"&&g.kind!=="array"||w.kind!=="value"){if(g.kind==="projectionDefinition"&&["string","array"].includes(w.kind)||["color","formatted","resolvedImage"].includes(g.kind)&&["value","string"].includes(w.kind)||["padding","numberArray"].includes(g.kind)&&["value","number","array"].includes(w.kind)||g.kind==="colorArray"&&["value","string","array"].includes(w.kind)||g.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(w.kind))h=b(h,g,A.typeAnnotation||"coerce");else if(this.checkSubtype(g,w))return null}else h=b(h,g,A.typeAnnotation||"assert")}if(!(h instanceof yr)&&h.type.kind!=="resolvedImage"&&this._isConstant(h)){const g=new Xt;try{h=new yr(h.type,h.evaluate(g))}catch(w){return this.error(w.message),null}}return h}return this.error(`Unknown expression "${x}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(l===void 0?"'undefined' value invalid. Use null instead.":typeof l=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof l} instead.`)}concat(l,A,b){const x=typeof l=="number"?this.path.concat(l):this.path,B=b?this.scope.concat(b):this.scope;return new hi(this.registry,this._isConstant,x,A||null,B,this.errors)}error(l,...A){const b=`${this.key}${A.map((x=>`[${x}]`)).join("")}`;this.errors.push(new bi(b,l))}checkSubtype(l,A){const b=us(l,A);return b&&this.error(b),b}}class Pn{constructor(l,A){this.type=A.type,this.bindings=[].concat(l),this.result=A}evaluate(l){return this.result.evaluate(l)}eachChild(l){for(const A of this.bindings)l(A[1]);l(this.result)}static parse(l,A){if(l.length<4)return A.error(`Expected at least 3 arguments, but found ${l.length-1} instead.`);const b=[];for(let B=1;B<l.length-1;B+=2){const h=l[B];if(typeof h!="string")return A.error(`Expected string, but found ${typeof h} instead.`,B);if(/[^a-zA-Z0-9_]/.test(h))return A.error("Variable names must contain only alphanumeric characters or '_'.",B);const g=A.parse(l[B+1],B+1);if(!g)return null;b.push([h,g])}const x=A.parse(l[l.length-1],l.length-1,A.expectedType,b);return x?new Pn(b,x):null}outputDefined(){return this.result.outputDefined()}}class Ci{constructor(l,A){this.type=A.type,this.name=l,this.boundExpression=A}static parse(l,A){if(l.length!==2||typeof l[1]!="string")return A.error("'var' expression requires exactly one string literal argument.");const b=l[1];return A.scope.has(b)?new Ci(b,A.scope.get(b)):A.error(`Unknown variable "${b}". Make sure "${b}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(l){return this.boundExpression.evaluate(l)}eachChild(){}outputDefined(){return!1}}class ni{constructor(l,A,b){this.type=l,this.index=A,this.input=b}static parse(l,A){if(l.length!==3)return A.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const b=A.parse(l[1],1,an),x=A.parse(l[2],2,ga(A.expectedType||Si));return b&&x?new ni(x.type.itemType,b,x):null}evaluate(l){const A=this.index.evaluate(l),b=this.input.evaluate(l);if(A<0)throw new gr(`Array index out of bounds: ${A} < 0.`);if(A>=b.length)throw new gr(`Array index out of bounds: ${A} > ${b.length-1}.`);if(A!==Math.floor(A))throw new gr(`Array index must be an integer, but found ${A} instead.`);return b[A]}eachChild(l){l(this.index),l(this.input)}outputDefined(){return!1}}class Hi{constructor(l,A){this.type=ii,this.needle=l,this.haystack=A}static parse(l,A){if(l.length!==3)return A.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const b=A.parse(l[1],1,Si),x=A.parse(l[2],2,Si);return b&&x?Xo(b.type,[ii,Kn,an,tr,Si])?new Hi(b,x):A.error(`Expected first argument to be of type boolean, string, number or null, but found ${mr(b.type)} instead`):null}evaluate(l){const A=this.needle.evaluate(l),b=this.haystack.evaluate(l);if(!b)return!1;if(!no(A,["boolean","string","number","null"]))throw new gr(`Expected first argument to be of type boolean, string, number or null, but found ${mr(Rr(A))} instead.`);if(!no(b,["string","array"]))throw new gr(`Expected second argument to be of type array or string, but found ${mr(Rr(b))} instead.`);return b.indexOf(A)>=0}eachChild(l){l(this.needle),l(this.haystack)}outputDefined(){return!0}}class xr{constructor(l,A,b){this.type=an,this.needle=l,this.haystack=A,this.fromIndex=b}static parse(l,A){if(l.length<=2||l.length>=5)return A.error(`Expected 2 or 3 arguments, but found ${l.length-1} instead.`);const b=A.parse(l[1],1,Si),x=A.parse(l[2],2,Si);if(!b||!x)return null;if(!Xo(b.type,[ii,Kn,an,tr,Si]))return A.error(`Expected first argument to be of type boolean, string, number or null, but found ${mr(b.type)} instead`);if(l.length===4){const B=A.parse(l[3],3,an);return B?new xr(b,x,B):null}return new xr(b,x)}evaluate(l){const A=this.needle.evaluate(l),b=this.haystack.evaluate(l);if(!no(A,["boolean","string","number","null"]))throw new gr(`Expected first argument to be of type boolean, string, number or null, but found ${mr(Rr(A))} instead.`);let x;if(this.fromIndex&&(x=this.fromIndex.evaluate(l)),no(b,["string"])){const B=b.indexOf(A,x);return B===-1?-1:[...b.slice(0,B)].length}if(no(b,["array"]))return b.indexOf(A,x);throw new gr(`Expected second argument to be of type array or string, but found ${mr(Rr(b))} instead.`)}eachChild(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)}outputDefined(){return!1}}class ir{constructor(l,A,b,x,B,h){this.inputType=l,this.type=A,this.input=b,this.cases=x,this.outputs=B,this.otherwise=h}static parse(l,A){if(l.length<5)return A.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if(l.length%2!=1)return A.error("Expected an even number of arguments.");let b,x;A.expectedType&&A.expectedType.kind!=="value"&&(x=A.expectedType);const B={},h=[];for(let k=2;k<l.length-1;k+=2){let F=l[k];const j=l[k+1];Array.isArray(F)||(F=[F]);const H=A.concat(k);if(F.length===0)return H.error("Expected at least one branch label.");for(const ie of F){if(typeof ie!="number"&&typeof ie!="string")return H.error("Branch labels must be numbers or strings.");if(typeof ie=="number"&&Math.abs(ie)>Number.MAX_SAFE_INTEGER)return H.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ie=="number"&&Math.floor(ie)!==ie)return H.error("Numeric branch labels must be integer values.");if(b){if(H.checkSubtype(b,Rr(ie)))return null}else b=Rr(ie);if(B[String(ie)]!==void 0)return H.error("Branch labels must be unique.");B[String(ie)]=h.length}const ne=A.parse(j,k,x);if(!ne)return null;x=x||ne.type,h.push(ne)}const g=A.parse(l[1],1,Si);if(!g)return null;const w=A.parse(l[l.length-1],l.length-1,x);return w?g.type.kind!=="value"&&A.concat(1).checkSubtype(b,g.type)?null:new ir(b,x,g,B,h,w):null}evaluate(l){const A=this.input.evaluate(l);return(Rr(A)===this.inputType&&this.outputs[this.cases[A]]||this.otherwise).evaluate(l)}eachChild(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))&&this.otherwise.outputDefined()}}class Zi{constructor(l,A,b){this.type=l,this.branches=A,this.otherwise=b}static parse(l,A){if(l.length<4)return A.error(`Expected at least 3 arguments, but found only ${l.length-1}.`);if(l.length%2!=0)return A.error("Expected an odd number of arguments.");let b;A.expectedType&&A.expectedType.kind!=="value"&&(b=A.expectedType);const x=[];for(let h=1;h<l.length-1;h+=2){const g=A.parse(l[h],h,ii);if(!g)return null;const w=A.parse(l[h+1],h+1,b);if(!w)return null;x.push([g,w]),b=b||w.type}const B=A.parse(l[l.length-1],l.length-1,b);if(!B)return null;if(!b)throw new Error("Can't infer output type");return new Zi(b,x,B)}evaluate(l){for(const[A,b]of this.branches)if(A.evaluate(l))return b.evaluate(l);return this.otherwise.evaluate(l)}eachChild(l){for(const[A,b]of this.branches)l(A),l(b);l(this.otherwise)}outputDefined(){return this.branches.every((([l,A])=>A.outputDefined()))&&this.otherwise.outputDefined()}}class Or{constructor(l,A,b,x){this.type=l,this.input=A,this.beginIndex=b,this.endIndex=x}static parse(l,A){if(l.length<=2||l.length>=5)return A.error(`Expected 2 or 3 arguments, but found ${l.length-1} instead.`);const b=A.parse(l[1],1,Si),x=A.parse(l[2],2,an);if(!b||!x)return null;if(!Xo(b.type,[ga(Si),Kn,Si]))return A.error(`Expected first argument to be of type array or string, but found ${mr(b.type)} instead`);if(l.length===4){const B=A.parse(l[3],3,an);return B?new Or(b.type,b,x,B):null}return new Or(b.type,b,x)}evaluate(l){const A=this.input.evaluate(l),b=this.beginIndex.evaluate(l);let x;if(this.endIndex&&(x=this.endIndex.evaluate(l)),no(A,["string"]))return[...A].slice(b,x).join("");if(no(A,["array"]))return A.slice(b,x);throw new gr(`Expected first argument to be of type array or string, but found ${mr(Rr(A))} instead.`)}eachChild(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)}outputDefined(){return!1}}function Ks(p,l){const A=p.length-1;let b,x,B=0,h=A,g=0;for(;B<=h;)if(g=Math.floor((B+h)/2),b=p[g],x=p[g+1],b<=l){if(g===A||l<x)return g;B=g+1}else{if(!(b>l))throw new gr("Input is not a number.");h=g-1}return 0}class Oo{constructor(l,A,b){this.type=l,this.input=A,this.labels=[],this.outputs=[];for(const[x,B]of b)this.labels.push(x),this.outputs.push(B)}static parse(l,A){if(l.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return A.error("Expected an even number of arguments.");const b=A.parse(l[1],1,an);if(!b)return null;const x=[];let B=null;A.expectedType&&A.expectedType.kind!=="value"&&(B=A.expectedType);for(let h=1;h<l.length;h+=2){const g=h===1?-1/0:l[h],w=l[h+1],k=h,F=h+1;if(typeof g!="number")return A.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(x.length&&x[x.length-1][0]>=g)return A.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',k);const j=A.parse(w,F,B);if(!j)return null;B=B||j.type,x.push([g,j])}return new Oo(B,b,x)}evaluate(l){const A=this.labels,b=this.outputs;if(A.length===1)return b[0].evaluate(l);const x=this.input.evaluate(l);if(x<=A[0])return b[0].evaluate(l);const B=A.length;return x>=A[B-1]?b[B-1].evaluate(l):b[Ks(A,x)].evaluate(l)}eachChild(l){l(this.input);for(const A of this.outputs)l(A)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))}}function Oa(p){return p&&p.__esModule&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p}var Za,Uo,ts=(function(){if(Uo)return Za;function p(l,A,b,x){this.cx=3*l,this.bx=3*(b-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*A,this.by=3*(x-A)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=A,this.p2x=b,this.p2y=x}return Uo=1,Za=p,p.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,A){if(A===void 0&&(A=1e-6),l<0)return 0;if(l>1)return 1;for(var b=l,x=0;x<8;x++){var B=this.sampleCurveX(b)-l;if(Math.abs(B)<A)return b;var h=this.sampleCurveDerivativeX(b);if(Math.abs(h)<1e-6)break;b-=B/h}var g=0,w=1;for(b=l,x=0;x<20&&(B=this.sampleCurveX(b),!(Math.abs(B-l)<A));x++)l>B?g=b:w=b,b=.5*(w-g)+g;return b},solve:function(l,A){return this.sampleCurveY(this.solveCurveX(l,A))}},Za})(),q1=Oa(ts);class Io{constructor(l,A,b,x,B){this.type=l,this.operator=A,this.interpolation=b,this.input=x,this.labels=[],this.outputs=[];for(const[h,g]of B)this.labels.push(h),this.outputs.push(g)}static interpolationFactor(l,A,b,x){let B=0;if(l.name==="exponential")B=ya(A,l.base,b,x);else if(l.name==="linear")B=ya(A,1,b,x);else if(l.name==="cubic-bezier"){const h=l.controlPoints;B=new q1(h[0],h[1],h[2],h[3]).solve(ya(A,1,b,x))}return B}static parse(l,A){let[b,x,B,...h]=l;if(!Array.isArray(x)||x.length===0)return A.error("Expected an interpolation type expression.",1);if(x[0]==="linear")x={name:"linear"};else if(x[0]==="exponential"){const k=x[1];if(typeof k!="number")return A.error("Exponential interpolation requires a numeric base.",1,1);x={name:"exponential",base:k}}else{if(x[0]!=="cubic-bezier")return A.error(`Unknown interpolation type ${String(x[0])}`,1,0);{const k=x.slice(1);if(k.length!==4||k.some((F=>typeof F!="number"||F<0||F>1)))return A.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);x={name:"cubic-bezier",controlPoints:k}}}if(l.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return A.error("Expected an even number of arguments.");if(B=A.parse(B,2,an),!B)return null;const g=[];let w=null;b!=="interpolate-hcl"&&b!=="interpolate-lab"||A.expectedType==ls?A.expectedType&&A.expectedType.kind!=="value"&&(w=A.expectedType):w=nr;for(let k=0;k<h.length;k+=2){const F=h[k],j=h[k+1],H=k+3,ne=k+4;if(typeof F!="number")return A.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',H);if(g.length&&g[g.length-1][0]>=F)return A.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',H);const ie=A.parse(j,ne,w);if(!ie)return null;w=w||ie.type,g.push([F,ie])}return El(w,an)||El(w,Su)||El(w,nr)||El(w,Yr)||El(w,$a)||El(w,ls)||El(w,wo)||El(w,ga(an))?new Io(w,b,x,B,g):A.error(`Type ${mr(w)} is not interpolatable.`)}evaluate(l){const A=this.labels,b=this.outputs;if(A.length===1)return b[0].evaluate(l);const x=this.input.evaluate(l);if(x<=A[0])return b[0].evaluate(l);const B=A.length;if(x>=A[B-1])return b[B-1].evaluate(l);const h=Ks(A,x),g=Io.interpolationFactor(this.interpolation,x,A[h],A[h+1]),w=b[h].evaluate(l),k=b[h+1].evaluate(l);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Ha(w,k,g);case"color":return Yi.interpolate(w,k,g);case"padding":return Eo.interpolate(w,k,g);case"colorArray":return Lo.interpolate(w,k,g);case"numberArray":return io.interpolate(w,k,g);case"variableAnchorOffsetCollection":return Bo.interpolate(w,k,g);case"array":return tu(w,k,g);case"projectionDefinition":return es.interpolate(w,k,g)}case"interpolate-hcl":switch(this.type.kind){case"color":return Yi.interpolate(w,k,g,"hcl");case"colorArray":return Lo.interpolate(w,k,g,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Yi.interpolate(w,k,g,"lab");case"colorArray":return Lo.interpolate(w,k,g,"lab")}}}eachChild(l){l(this.input);for(const A of this.outputs)l(A)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))}}function ya(p,l,A,b){const x=b-A,B=p-A;return x===0?0:l===1?B/x:(Math.pow(l,B)-1)/(Math.pow(l,x)-1)}const Xu={color:Yi.interpolate,number:Ha,padding:Eo.interpolate,numberArray:io.interpolate,colorArray:Lo.interpolate,variableAnchorOffsetCollection:Bo.interpolate,array:tu};class Iu{constructor(l,A){this.type=l,this.args=A}static parse(l,A){if(l.length<2)return A.error("Expected at least one argument.");let b=null;const x=A.expectedType;x&&x.kind!=="value"&&(b=x);const B=[];for(const g of l.slice(1)){const w=A.parse(g,1+B.length,b,void 0,{typeAnnotation:"omit"});if(!w)return null;b=b||w.type,B.push(w)}if(!b)throw new Error("No output type");const h=x&&B.some((g=>us(x,g.type)));return new Iu(h?Si:b,B)}evaluate(l){let A,b=null,x=0;for(const B of this.args)if(x++,b=B.evaluate(l),b&&b instanceof po&&!b.available&&(A||(A=b.name),b=null,x===this.args.length&&(b=A)),b!==null)break;return b}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}function Cf(p,l){return p==="=="||p==="!="?l.kind==="boolean"||l.kind==="string"||l.kind==="number"||l.kind==="null"||l.kind==="value":l.kind==="string"||l.kind==="number"||l.kind==="value"}function _f(p,l,A,b){return b.compare(l,A)===0}function $r(p,l,A){const b=p!=="=="&&p!=="!=";return class hX{constructor(B,h,g){this.type=ii,this.lhs=B,this.rhs=h,this.collator=g,this.hasUntypedArgument=B.type.kind==="value"||h.type.kind==="value"}static parse(B,h){if(B.length!==3&&B.length!==4)return h.error("Expected two or three arguments.");const g=B[0];let w=h.parse(B[1],1,Si);if(!w)return null;if(!Cf(g,w.type))return h.concat(1).error(`"${g}" comparisons are not supported for type '${mr(w.type)}'.`);let k=h.parse(B[2],2,Si);if(!k)return null;if(!Cf(g,k.type))return h.concat(2).error(`"${g}" comparisons are not supported for type '${mr(k.type)}'.`);if(w.type.kind!==k.type.kind&&w.type.kind!=="value"&&k.type.kind!=="value")return h.error(`Cannot compare types '${mr(w.type)}' and '${mr(k.type)}'.`);b&&(w.type.kind==="value"&&k.type.kind!=="value"?w=new ge(k.type,[w]):w.type.kind!=="value"&&k.type.kind==="value"&&(k=new ge(w.type,[k])));let F=null;if(B.length===4){if(w.type.kind!=="string"&&k.type.kind!=="string"&&w.type.kind!=="value"&&k.type.kind!=="value")return h.error("Cannot use collator to compare non-string types.");if(F=h.parse(B[3],3,Ba),!F)return null}return new hX(w,k,F)}evaluate(B){const h=this.lhs.evaluate(B),g=this.rhs.evaluate(B);if(b&&this.hasUntypedArgument){const w=Rr(h),k=Rr(g);if(w.kind!==k.kind||w.kind!=="string"&&w.kind!=="number")throw new gr(`Expected arguments for "${p}" to be (string, string) or (number, number), but found (${w.kind}, ${k.kind}) instead.`)}if(this.collator&&!b&&this.hasUntypedArgument){const w=Rr(h),k=Rr(g);if(w.kind!=="string"||k.kind!=="string")return l(B,h,g)}return this.collator?A(B,h,g,this.collator.evaluate(B)):l(B,h,g)}eachChild(B){B(this.lhs),B(this.rhs),this.collator&&B(this.collator)}outputDefined(){return!0}}}const Tc=$r("==",(function(p,l,A){return l===A}),_f),Ep=$r("!=",(function(p,l,A){return l!==A}),(function(p,l,A,b){return!_f(0,l,A,b)})),Y1=$r("<",(function(p,l,A){return l<A}),(function(p,l,A,b){return b.compare(l,A)<0})),Hm=$r(">",(function(p,l,A){return l>A}),(function(p,l,A,b){return b.compare(l,A)>0})),Zm=$r("<=",(function(p,l,A){return l<=A}),(function(p,l,A,b){return b.compare(l,A)<=0})),Xm=$r(">=",(function(p,l,A){return l>=A}),(function(p,l,A,b){return b.compare(l,A)>=0}));class nu{constructor(l,A,b){this.type=Ba,this.locale=b,this.caseSensitive=l,this.diacriticSensitive=A}static parse(l,A){if(l.length!==2)return A.error("Expected one argument.");const b=l[1];if(typeof b!="object"||Array.isArray(b))return A.error("Collator options argument must be an object.");const x=A.parse(b["case-sensitive"]!==void 0&&b["case-sensitive"],1,ii);if(!x)return null;const B=A.parse(b["diacritic-sensitive"]!==void 0&&b["diacritic-sensitive"],1,ii);if(!B)return null;let h=null;return b.locale&&(h=A.parse(b.locale,1,Kn),!h)?null:new nu(x,B,h)}evaluate(l){return new Qs(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)}eachChild(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)}outputDefined(){return!1}}class Bp{constructor(l,A,b,x,B){this.type=Kn,this.number=l,this.locale=A,this.currency=b,this.minFractionDigits=x,this.maxFractionDigits=B}static parse(l,A){if(l.length!==3)return A.error("Expected two arguments.");const b=A.parse(l[1],1,an);if(!b)return null;const x=l[2];if(typeof x!="object"||Array.isArray(x))return A.error("NumberFormat options argument must be an object.");let B=null;if(x.locale&&(B=A.parse(x.locale,1,Kn),!B))return null;let h=null;if(x.currency&&(h=A.parse(x.currency,1,Kn),!h))return null;let g=null;if(x["min-fraction-digits"]&&(g=A.parse(x["min-fraction-digits"],1,an),!g))return null;let w=null;return x["max-fraction-digits"]&&(w=A.parse(x["max-fraction-digits"],1,an),!w)?null:new Bp(b,B,h,g,w)}evaluate(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))}eachChild(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)}outputDefined(){return!1}}class rA{constructor(l){this.type=Xl,this.sections=l}static parse(l,A){if(l.length<2)return A.error("Expected at least one argument.");const b=l[1];if(!Array.isArray(b)&&typeof b=="object")return A.error("First argument must be an image or text section.");const x=[];let B=!1;for(let h=1;h<=l.length-1;++h){const g=l[h];if(B&&typeof g=="object"&&!Array.isArray(g)){B=!1;let w=null;if(g["font-scale"]&&(w=A.parse(g["font-scale"],1,an),!w))return null;let k=null;if(g["text-font"]&&(k=A.parse(g["text-font"],1,ga(Kn)),!k))return null;let F=null;if(g["text-color"]&&(F=A.parse(g["text-color"],1,nr),!F))return null;let j=null;if(g["vertical-align"]){if(typeof g["vertical-align"]=="string"&&!zi.includes(g["vertical-align"]))return A.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${g["vertical-align"]}' instead.`);if(j=A.parse(g["vertical-align"],1,Kn),!j)return null}const H=x[x.length-1];H.scale=w,H.font=k,H.textColor=F,H.verticalAlign=j}else{const w=A.parse(l[h],1,Si);if(!w)return null;const k=w.type.kind;if(k!=="string"&&k!=="value"&&k!=="null"&&k!=="resolvedImage")return A.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");B=!0,x.push({content:w,scale:null,font:null,textColor:null,verticalAlign:null})}}return new rA(x)}evaluate(l){return new yo(this.sections.map((A=>{const b=A.content.evaluate(l);return Rr(b)===ma?new Vr("",b,null,null,null,A.verticalAlign?A.verticalAlign.evaluate(l):null):new Vr(_r(b),null,A.scale?A.scale.evaluate(l):null,A.font?A.font.evaluate(l).join(","):null,A.textColor?A.textColor.evaluate(l):null,A.verticalAlign?A.verticalAlign.evaluate(l):null)})))}eachChild(l){for(const A of this.sections)l(A.content),A.scale&&l(A.scale),A.font&&l(A.font),A.textColor&&l(A.textColor),A.verticalAlign&&l(A.verticalAlign)}outputDefined(){return!1}}class Sh{constructor(l){this.type=ma,this.input=l}static parse(l,A){if(l.length!==2)return A.error("Expected two arguments.");const b=A.parse(l[1],1,Kn);return b?new Sh(b):A.error("No image name provided.")}evaluate(l){const A=this.input.evaluate(l),b=po.fromString(A);return b&&l.availableImages&&(b.available=l.availableImages.indexOf(A)>-1),b}eachChild(l){l(this.input)}outputDefined(){return!1}}class Op{constructor(l){this.type=an,this.input=l}static parse(l,A){if(l.length!==2)return A.error(`Expected 1 argument, but found ${l.length-1} instead.`);const b=A.parse(l[1],1);return b?b.type.kind!=="array"&&b.type.kind!=="string"&&b.type.kind!=="value"?A.error(`Expected argument of type string or array, but found ${mr(b.type)} instead.`):new Op(b):null}evaluate(l){const A=this.input.evaluate(l);if(typeof A=="string")return[...A].length;if(Array.isArray(A))return A.length;throw new gr(`Expected value to be of type string or array, but found ${mr(Rr(A))} instead.`)}eachChild(l){l(this.input)}outputDefined(){return!1}}const kc=8192;function Jm(p,l){const A=(180+p[0])/360,b=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+p[1]*Math.PI/360)))/360,x=Math.pow(2,l.z);return[Math.round(A*x*kc),Math.round(b*x*kc)]}function $A(p,l){const A=Math.pow(2,l.z);return[(x=(p[0]/kc+l.x)/A,360*x-180),(b=(p[1]/kc+l.y)/A,360/Math.PI*Math.atan(Math.exp((180-360*b)*Math.PI/180))-90)];var b,x}function Cd(p,l){p[0]=Math.min(p[0],l[0]),p[1]=Math.min(p[1],l[1]),p[2]=Math.max(p[2],l[0]),p[3]=Math.max(p[3],l[1])}function oA(p,l){return!(p[0]<=l[0]||p[2]>=l[2]||p[1]<=l[1]||p[3]>=l[3])}function V1(p,l,A){const b=p[0]-l[0],x=p[1]-l[1],B=p[0]-A[0],h=p[1]-A[1];return b*h-B*x==0&&b*B<=0&&x*h<=0}function Eh(p,l,A,b){return(x=[b[0]-A[0],b[1]-A[1]])[0]*(B=[l[0]-p[0],l[1]-p[1]])[1]-x[1]*B[0]!=0&&!(!xf(p,l,A,b)||!xf(A,b,p,l));var x,B}function Ip(p,l,A){for(const b of A)for(let x=0;x<b.length-1;++x)if(Eh(p,l,b[x],b[x+1]))return!0;return!1}function _d(p,l,A=!1){let b=!1;for(const g of l)for(let w=0;w<g.length-1;w++){if(V1(p,g[w],g[w+1]))return A;(B=g[w])[1]>(x=p)[1]!=(h=g[w+1])[1]>x[1]&&x[0]<(h[0]-B[0])*(x[1]-B[1])/(h[1]-B[1])+B[0]&&(b=!b)}var x,B,h;return b}function Bh(p,l){for(const A of l)if(_d(p,A))return!0;return!1}function iu(p,l){for(const A of p)if(!_d(A,l))return!1;for(let A=0;A<p.length-1;++A)if(Ip(p[A],p[A+1],l))return!1;return!0}function w0(p,l){for(const A of l)if(iu(p,A))return!0;return!1}function xf(p,l,A,b){const x=b[0]-A[0],B=b[1]-A[1],h=(p[0]-A[0])*B-x*(p[1]-A[1]),g=(l[0]-A[0])*B-x*(l[1]-A[1]);return h>0&&g<0||h<0&&g>0}function Tp(p,l,A){const b=[];for(let x=0;x<p.length;x++){const B=[];for(let h=0;h<p[x].length;h++){const g=Jm(p[x][h],A);Cd(l,g),B.push(g)}b.push(B)}return b}function eg(p,l,A){const b=[];for(let x=0;x<p.length;x++){const B=Tp(p[x],l,A);b.push(B)}return b}function xd(p,l,A,b){if(p[0]<A[0]||p[0]>A[2]){const x=.5*b;let B=p[0]-A[0]>x?-b:A[0]-p[0]>x?b:0;B===0&&(B=p[0]-A[2]>x?-b:A[2]-p[0]>x?b:0),p[0]+=B}Cd(l,p)}function Md(p,l,A,b){const x=Math.pow(2,b.z)*kc,B=[b.x*kc,b.y*kc],h=[];for(const g of p)for(const w of g){const k=[w.x+B[0],w.y+B[1]];xd(k,l,A,x),h.push(k)}return h}function S0(p,l,A,b){const x=Math.pow(2,b.z)*kc,B=[b.x*kc,b.y*kc],h=[];for(const w of p){const k=[];for(const F of w){const j=[F.x+B[0],F.y+B[1]];Cd(l,j),k.push(j)}h.push(k)}if(l[2]-l[0]<=x/2){(g=l)[0]=g[1]=1/0,g[2]=g[3]=-1/0;for(const w of h)for(const k of w)xd(k,l,A,x)}var g;return h}class sA{constructor(l,A){this.type=ii,this.geojson=l,this.geometries=A}static parse(l,A){if(l.length!==2)return A.error(`'within' expression requires exactly one argument, but found ${l.length-1} instead.`);if(Us(l[1])){const b=l[1];if(b.type==="FeatureCollection"){const x=[];for(const B of b.features){const{type:h,coordinates:g}=B.geometry;h==="Polygon"&&x.push(g),h==="MultiPolygon"&&x.push(...g)}if(x.length)return new sA(b,{type:"MultiPolygon",coordinates:x})}else if(b.type==="Feature"){const x=b.geometry.type;if(x==="Polygon"||x==="MultiPolygon")return new sA(b,b.geometry)}else if(b.type==="Polygon"||b.type==="MultiPolygon")return new sA(b,b)}return A.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return(function(A,b){const x=[1/0,1/0,-1/0,-1/0],B=[1/0,1/0,-1/0,-1/0],h=A.canonicalID();if(b.type==="Polygon"){const g=Tp(b.coordinates,B,h),w=Md(A.geometry(),x,B,h);if(!oA(x,B))return!1;for(const k of w)if(!_d(k,g))return!1}if(b.type==="MultiPolygon"){const g=eg(b.coordinates,B,h),w=Md(A.geometry(),x,B,h);if(!oA(x,B))return!1;for(const k of w)if(!Bh(k,g))return!1}return!0})(l,this.geometries);if(l.geometryType()==="LineString")return(function(A,b){const x=[1/0,1/0,-1/0,-1/0],B=[1/0,1/0,-1/0,-1/0],h=A.canonicalID();if(b.type==="Polygon"){const g=Tp(b.coordinates,B,h),w=S0(A.geometry(),x,B,h);if(!oA(x,B))return!1;for(const k of w)if(!iu(k,g))return!1}if(b.type==="MultiPolygon"){const g=eg(b.coordinates,B,h),w=S0(A.geometry(),x,B,h);if(!oA(x,B))return!1;for(const k of w)if(!w0(k,g))return!1}return!0})(l,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let E0=class{constructor(p=[],l=(A,b)=>A<b?-1:A>b?1:0){if(this.data=p,this.length=this.data.length,this.compare=l,this.length>0)for(let A=(this.length>>1)-1;A>=0;A--)this._down(A)}push(p){this.data.push(p),this._up(this.length++)}pop(){if(this.length===0)return;const p=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),p}peek(){return this.data[0]}_up(p){const{data:l,compare:A}=this,b=l[p];for(;p>0;){const x=p-1>>1,B=l[x];if(A(b,B)>=0)break;l[p]=B,p=x}l[p]=b}_down(p){const{data:l,compare:A}=this,b=this.length>>1,x=l[p];for(;p<b;){let B=1+(p<<1);const h=B+1;if(h<this.length&&A(l[h],l[B])<0&&(B=h),A(l[B],x)>=0)break;l[p]=l[B],p=B}l[p]=x}};function Oh(p,l,A=0,b=p.length-1,x=Mf){for(;b>A;){if(b-A>600){const w=b-A+1,k=l-A+1,F=Math.log(w),j=.5*Math.exp(2*F/3),H=.5*Math.sqrt(F*j*(w-j)/w)*(k-w/2<0?-1:1);Oh(p,l,Math.max(A,Math.floor(l-k*j/w+H)),Math.min(b,Math.floor(l+(w-k)*j/w+H)),x)}const B=p[l];let h=A,g=b;for(wd(p,A,l),x(p[b],B)>0&&wd(p,A,b);h<g;){for(wd(p,h,g),h++,g--;x(p[h],B)<0;)h++;for(;x(p[g],B)>0;)g--}x(p[A],B)===0?wd(p,A,g):(g++,wd(p,g,b)),g<=l&&(A=g+1),l<=g&&(b=g-1)}}function wd(p,l,A){const b=p[l];p[l]=p[A],p[A]=b}function Mf(p,l){return p<l?-1:p>l?1:0}function Ih(p,l){if(p.length<=1)return[p];const A=[];let b,x;for(const B of p){const h=HA(B);h!==0&&(B.area=Math.abs(h),x===void 0&&(x=h<0),x===h<0?(b&&A.push(b),b=[B]):b.push(B))}if(b&&A.push(b),l>1)for(let B=0;B<A.length;B++)A[B].length<=l||(Oh(A[B],l,1,A[B].length-1,B0),A[B]=A[B].slice(0,l));return A}function B0(p,l){return l.area-p.area}function HA(p){let l=0;for(let A,b,x=0,B=p.length,h=B-1;x<B;h=x++)A=p[x],b=p[h],l+=(b.x-A.x)*(A.y+b.y);return l}const kp=1/298.257223563,tg=kp*(2-kp),O0=Math.PI/180;class I0{constructor(l){const A=6378.137*O0*1e3,b=Math.cos(l*O0),x=1/(1-tg*(1-b*b)),B=Math.sqrt(x);this.kx=A*B*b,this.ky=A*B*x*(1-tg)}distance(l,A){const b=this.wrap(l[0]-A[0])*this.kx,x=(l[1]-A[1])*this.ky;return Math.sqrt(b*b+x*x)}pointOnLine(l,A){let b,x,B,h,g=1/0;for(let w=0;w<l.length-1;w++){let k=l[w][0],F=l[w][1],j=this.wrap(l[w+1][0]-k)*this.kx,H=(l[w+1][1]-F)*this.ky,ne=0;j===0&&H===0||(ne=(this.wrap(A[0]-k)*this.kx*j+(A[1]-F)*this.ky*H)/(j*j+H*H),ne>1?(k=l[w+1][0],F=l[w+1][1]):ne>0&&(k+=j/this.kx*ne,F+=H/this.ky*ne)),j=this.wrap(A[0]-k)*this.kx,H=(A[1]-F)*this.ky;const ie=j*j+H*H;ie<g&&(g=ie,b=k,x=F,B=w,h=ne)}return{point:[b,x],index:B,t:Math.max(0,Math.min(1,h))}}wrap(l){for(;l<-180;)l+=360;for(;l>180;)l-=360;return l}}function Sd(p,l){return l[0]-p[0]}function Wo(p){return p[1]-p[0]+1}function Tl(p,l){return p[1]>=p[0]&&p[1]<l}function ng(p,l){if(p[0]>p[1])return[null,null];const A=Wo(p);if(l){if(A===2)return[p,null];const x=Math.floor(A/2);return[[p[0],p[0]+x],[p[0]+x,p[1]]]}if(A===1)return[p,null];const b=Math.floor(A/2)-1;return[[p[0],p[0]+b],[p[0]+b+1,p[1]]]}function ig(p,l){if(!Tl(l,p.length))return[1/0,1/0,-1/0,-1/0];const A=[1/0,1/0,-1/0,-1/0];for(let b=l[0];b<=l[1];++b)Cd(A,p[b]);return A}function rg(p){const l=[1/0,1/0,-1/0,-1/0];for(const A of p)for(const b of A)Cd(l,b);return l}function og(p){return p[0]!==-1/0&&p[1]!==-1/0&&p[2]!==1/0&&p[3]!==1/0}function Dp(p,l,A){if(!og(p)||!og(l))return NaN;let b=0,x=0;return p[2]<l[0]&&(b=l[0]-p[2]),p[0]>l[2]&&(b=p[0]-l[2]),p[1]>l[3]&&(x=p[1]-l[3]),p[3]<l[1]&&(x=l[1]-p[3]),A.distance([0,0],[b,x])}function Ju(p,l,A){const b=A.pointOnLine(l,p);return A.distance(p,b.point)}function Ot(p,l,A,b,x){const B=Math.min(Ju(p,[A,b],x),Ju(l,[A,b],x)),h=Math.min(Ju(A,[p,l],x),Ju(b,[p,l],x));return Math.min(B,h)}function ln(p,l,A,b,x){if(!Tl(l,p.length)||!Tl(b,A.length))return 1/0;let B=1/0;for(let h=l[0];h<l[1];++h){const g=p[h],w=p[h+1];for(let k=b[0];k<b[1];++k){const F=A[k],j=A[k+1];if(Eh(g,w,F,j))return 0;B=Math.min(B,Ot(g,w,F,j,x))}}return B}function Rt(p,l,A,b,x){if(!Tl(l,p.length)||!Tl(b,A.length))return NaN;let B=1/0;for(let h=l[0];h<=l[1];++h)for(let g=b[0];g<=b[1];++g)if(B=Math.min(B,x.distance(p[h],A[g])),B===0)return B;return B}function ri(p,l,A){if(_d(p,l,!0))return 0;let b=1/0;for(const x of l){const B=x[0],h=x[x.length-1];if(B!==h&&(b=Math.min(b,Ju(p,[h,B],A)),b===0))return b;const g=A.pointOnLine(x,p);if(b=Math.min(b,A.distance(p,g.point)),b===0)return b}return b}function er(p,l,A,b){if(!Tl(l,p.length))return NaN;for(let B=l[0];B<=l[1];++B)if(_d(p[B],A,!0))return 0;let x=1/0;for(let B=l[0];B<l[1];++B){const h=p[B],g=p[B+1];for(const w of A)for(let k=0,F=w.length,j=F-1;k<F;j=k++){const H=w[j],ne=w[k];if(Eh(h,g,H,ne))return 0;x=Math.min(x,Ot(h,g,H,ne,b))}}return x}function Mr(p,l){for(const A of p)for(const b of A)if(_d(b,l,!0))return!0;return!1}function Ss(p,l,A,b=1/0){const x=rg(p),B=rg(l);if(b!==1/0&&Dp(x,B,A)>=b)return b;if(oA(x,B)){if(Mr(p,l))return 0}else if(Mr(l,p))return 0;let h=1/0;for(const g of p)for(let w=0,k=g.length,F=k-1;w<k;F=w++){const j=g[F],H=g[w];for(const ne of l)for(let ie=0,Ae=ne.length,de=Ae-1;ie<Ae;de=ie++){const Me=ne[de],We=ne[ie];if(Eh(j,H,Me,We))return 0;h=Math.min(h,Ot(j,H,Me,We,A))}}return h}function vo(p,l,A,b,x,B){if(!B)return;const h=Dp(ig(b,B),x,A);h<l&&p.push([h,B,[0,0]])}function Ed(p,l,A,b,x,B,h){if(!B||!h)return;const g=Dp(ig(b,B),ig(x,h),A);g<l&&p.push([g,B,h])}function aA(p,l,A,b,x=1/0){let B=Math.min(b.distance(p[0],A[0][0]),x);if(B===0)return B;const h=new E0([[0,[0,p.length-1],[0,0]]],Sd),g=rg(A);for(;h.length>0;){const w=h.pop();if(w[0]>=B)continue;const k=w[1],F=l?50:100;if(Wo(k)<=F){if(!Tl(k,p.length))return NaN;if(l){const j=er(p,k,A,b);if(isNaN(j)||j===0)return j;B=Math.min(B,j)}else for(let j=k[0];j<=k[1];++j){const H=ri(p[j],A,b);if(B=Math.min(B,H),B===0)return 0}}else{const j=ng(k,l);vo(h,B,b,p,g,j[0]),vo(h,B,b,p,g,j[1])}}return B}function hl(p,l,A,b,x,B=1/0){let h=Math.min(B,x.distance(p[0],A[0]));if(h===0)return h;const g=new E0([[0,[0,p.length-1],[0,A.length-1]]],Sd);for(;g.length>0;){const w=g.pop();if(w[0]>=h)continue;const k=w[1],F=w[2],j=l?50:100,H=b?50:100;if(Wo(k)<=j&&Wo(F)<=H){if(!Tl(k,p.length)&&Tl(F,A.length))return NaN;let ne;if(l&&b)ne=ln(p,k,A,F,x),h=Math.min(h,ne);else if(l&&!b){const ie=p.slice(k[0],k[1]+1);for(let Ae=F[0];Ae<=F[1];++Ae)if(ne=Ju(A[Ae],ie,x),h=Math.min(h,ne),h===0)return h}else if(!l&&b){const ie=A.slice(F[0],F[1]+1);for(let Ae=k[0];Ae<=k[1];++Ae)if(ne=Ju(p[Ae],ie,x),h=Math.min(h,ne),h===0)return h}else ne=Rt(p,k,A,F,x),h=Math.min(h,ne)}else{const ne=ng(k,l),ie=ng(F,b);Ed(g,h,x,p,A,ne[0],ie[0]),Ed(g,h,x,p,A,ne[0],ie[1]),Ed(g,h,x,p,A,ne[1],ie[0]),Ed(g,h,x,p,A,ne[1],ie[1])}}return h}function Bd(p){return p.type==="MultiPolygon"?p.coordinates.map((l=>({type:"Polygon",coordinates:l}))):p.type==="MultiLineString"?p.coordinates.map((l=>({type:"LineString",coordinates:l}))):p.type==="MultiPoint"?p.coordinates.map((l=>({type:"Point",coordinates:l}))):[p]}class Th{constructor(l,A){this.type=an,this.geojson=l,this.geometries=A}static parse(l,A){if(l.length!==2)return A.error(`'distance' expression requires exactly one argument, but found ${l.length-1} instead.`);if(Us(l[1])){const b=l[1];if(b.type==="FeatureCollection")return new Th(b,b.features.map((x=>Bd(x.geometry))).flat());if(b.type==="Feature")return new Th(b,Bd(b.geometry));if("type"in b&&"coordinates"in b)return new Th(b,Bd(b))}return A.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return(function(A,b){const x=A.geometry(),B=x.flat().map((w=>$A([w.x,w.y],A.canonical)));if(x.length===0)return NaN;const h=new I0(B[0][1]);let g=1/0;for(const w of b){switch(w.type){case"Point":g=Math.min(g,hl(B,!1,[w.coordinates],!1,h,g));break;case"LineString":g=Math.min(g,hl(B,!1,w.coordinates,!0,h,g));break;case"Polygon":g=Math.min(g,aA(B,!1,w.coordinates,h,g))}if(g===0)return g}return g})(l,this.geometries);if(l.geometryType()==="LineString")return(function(A,b){const x=A.geometry(),B=x.flat().map((w=>$A([w.x,w.y],A.canonical)));if(x.length===0)return NaN;const h=new I0(B[0][1]);let g=1/0;for(const w of b){switch(w.type){case"Point":g=Math.min(g,hl(B,!0,[w.coordinates],!1,h,g));break;case"LineString":g=Math.min(g,hl(B,!0,w.coordinates,!0,h,g));break;case"Polygon":g=Math.min(g,aA(B,!0,w.coordinates,h,g))}if(g===0)return g}return g})(l,this.geometries);if(l.geometryType()==="Polygon")return(function(A,b){const x=A.geometry();if(x.length===0||x[0].length===0)return NaN;const B=Ih(x,0).map((w=>w.map((k=>k.map((F=>$A([F.x,F.y],A.canonical))))))),h=new I0(B[0][0][0][1]);let g=1/0;for(const w of b)for(const k of B){switch(w.type){case"Point":g=Math.min(g,aA([w.coordinates],!1,k,h,g));break;case"LineString":g=Math.min(g,aA(w.coordinates,!0,k,h,g));break;case"Polygon":g=Math.min(g,Ss(k,w.coordinates,h,g))}if(g===0)return g}return g})(l,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class lA{constructor(l){this.type=Si,this.key=l}static parse(l,A){if(l.length!==2)return A.error(`Expected 1 argument, but found ${l.length-1} instead.`);const b=l[1];return b==null?A.error("Global state property must be defined."):typeof b!="string"?A.error(`Global state property must be string, but found ${typeof l[1]} instead.`):new lA(b)}evaluate(l){var A;const b=(A=l.globals)===null||A===void 0?void 0:A.globalState;return b&&Object.keys(b).length!==0?Rs(b,this.key):null}eachChild(){}outputDefined(){return!1}}const ZA={"==":Tc,"!=":Ep,">":Hm,"<":Y1,">=":Xm,"<=":Zm,array:ge,at:ni,boolean:ge,case:Zi,coalesce:Iu,collator:nu,format:rA,image:Sh,in:Hi,"index-of":xr,interpolate:Io,"interpolate-hcl":Io,"interpolate-lab":Io,length:Op,let:Pn,literal:yr,match:ir,number:ge,"number-format":Bp,object:ge,slice:Or,step:Oo,string:ge,"to-boolean":bt,"to-color":bt,"to-number":bt,"to-string":bt,var:Ci,within:sA,distance:Th,"global-state":lA};class kl{constructor(l,A,b,x){this.name=l,this.type=A,this._evaluate=b,this.args=x}evaluate(l){return this._evaluate(l,this.args)}eachChild(l){this.args.forEach(l)}outputDefined(){return!1}static parse(l,A){const b=l[0],x=kl.definitions[b];if(!x)return A.error(`Unknown expression "${b}". If you wanted a literal array, use ["literal", [...]].`,0);const B=Array.isArray(x)?x[0]:x.type,h=Array.isArray(x)?[[x[1],x[2]]]:x.overloads,g=h.filter((([k])=>!Array.isArray(k)||k.length===l.length-1));let w=null;for(const[k,F]of g){w=new hi(A.registry,Od,A.path,null,A.scope);const j=[];let H=!1;for(let ne=1;ne<l.length;ne++){const ie=l[ne],Ae=Array.isArray(k)?k[ne-1]:k.type,de=w.parse(ie,1+j.length,Ae);if(!de){H=!0;break}j.push(de)}if(!H)if(Array.isArray(k)&&k.length!==j.length)w.error(`Expected ${k.length} arguments, but found ${j.length} instead.`);else{for(let ne=0;ne<j.length;ne++){const ie=Array.isArray(k)?k[ne]:k.type,Ae=j[ne];w.concat(ne+1).checkSubtype(ie,Ae.type)}if(w.errors.length===0)return new kl(b,B,F,j)}}if(g.length===1)A.errors.push(...w.errors);else{const k=(g.length?g:h).map((([j])=>{return H=j,Array.isArray(H)?`(${H.map(mr).join(", ")})`:`(${mr(H.type)}...)`;var H})).join(" | "),F=[];for(let j=1;j<l.length;j++){const H=A.parse(l[j],1+F.length);if(!H)return null;F.push(mr(H.type))}A.error(`Expected arguments of type ${k}, but found (${F.join(", ")}) instead.`)}return null}static register(l,A){kl.definitions=A;for(const b in A)l[b]=kl}}function mo(p,[l,A,b,x]){l=l.evaluate(p),A=A.evaluate(p),b=b.evaluate(p);const B=x?x.evaluate(p):1,h=Ls(l,A,b,B);if(h)throw new gr(h);return new Yi(l/255,A/255,b/255,B,!1)}function T0(p,l){return p in l}function wf(p,l){const A=l[p];return A===void 0?null:A}function va(p){return{type:p}}function Od(p){if(p instanceof Ci)return Od(p.boundExpression);if(p instanceof kl&&p.name==="error"||p instanceof nu||p instanceof sA||p instanceof Th||p instanceof lA)return!1;const l=p instanceof bt||p instanceof ge;let A=!0;return p.eachChild((b=>{A=l?A&&Od(b):A&&b instanceof yr})),!!A&&Dl(p)&&XA(p,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Dl(p){if(p instanceof kl&&(p.name==="get"&&p.args.length===1||p.name==="feature-state"||p.name==="has"&&p.args.length===1||p.name==="properties"||p.name==="geometry-type"||p.name==="id"||/^filter-/.test(p.name))||p instanceof sA||p instanceof Th)return!1;let l=!0;return p.eachChild((A=>{l&&!Dl(A)&&(l=!1)})),l}function uA(p){if(p instanceof kl&&p.name==="feature-state")return!1;let l=!0;return p.eachChild((A=>{l&&!uA(A)&&(l=!1)})),l}function XA(p,l){if(p instanceof kl&&l.indexOf(p.name)>=0)return!1;let A=!0;return p.eachChild((b=>{A&&!XA(b,l)&&(A=!1)})),A}function ec(p){return{result:"success",value:p}}function tc(p){return{result:"error",value:p}}function JA(p){return p["property-type"]==="data-driven"||p["property-type"]==="cross-faded-data-driven"}function Dc(p){return!!p.expression&&p.expression.parameters.indexOf("zoom")>-1}function Rp(p){return!!p.expression&&p.expression.interpolated}function rr(p){return p instanceof Number?"number":p instanceof String?"string":p instanceof Boolean?"boolean":Array.isArray(p)?"array":p===null?"null":typeof p}function nc(p){return typeof p=="object"&&p!==null&&!Array.isArray(p)&&Rr(p)===Ms}function $1(p){return p}function Ga(p,l){const A=p.stops&&typeof p.stops[0][0]=="object",b=A||!(A||p.property!==void 0),x=p.type||(Rp(l)?"exponential":"interval"),B=(function(F){switch(F.type){case"color":return Yi.parse;case"padding":return Eo.parse;case"numberArray":return io.parse;case"colorArray":return Lo.parse;default:return null}})(l);if(B&&((p=$i({},p)).stops&&(p.stops=p.stops.map((F=>[F[0],B(F[1])]))),p.default=B(p.default?p.default:l.default)),p.colorSpace&&(h=p.colorSpace)!=="rgb"&&h!=="hcl"&&h!=="lab")throw new Error(`Unknown color space: "${p.colorSpace}"`);var h;const g=(function(F){switch(F){case"exponential":return Pp;case"interval":return H1;case"categorical":return ru;case"identity":return Id;default:throw new Error(`Unknown function type "${F}"`)}})(x);let w,k;if(x==="categorical"){w=Object.create(null);for(const F of p.stops)w[F[0]]=F[1];k=typeof p.stops[0][0]}if(A){const F={},j=[];for(let ie=0;ie<p.stops.length;ie++){const Ae=p.stops[ie],de=Ae[0].zoom;F[de]===void 0&&(F[de]={zoom:de,type:p.type,property:p.property,default:p.default,stops:[]},j.push(de)),F[de].stops.push([Ae[0].value,Ae[1]])}const H=[];for(const ie of j)H.push([F[ie].zoom,Ga(F[ie],l)]);const ne={name:"linear"};return{kind:"composite",interpolationType:ne,interpolationFactor:Io.interpolationFactor.bind(void 0,ne),zoomStops:H.map((ie=>ie[0])),evaluate:({zoom:ie},Ae)=>Pp({stops:H,base:p.base},l,ie).evaluate(ie,Ae)}}if(b){const F=x==="exponential"?{name:"exponential",base:p.base!==void 0?p.base:1}:null;return{kind:"camera",interpolationType:F,interpolationFactor:Io.interpolationFactor.bind(void 0,F),zoomStops:p.stops.map((j=>j[0])),evaluate:({zoom:j})=>g(p,l,j,w,k)}}return{kind:"source",evaluate(F,j){const H=j&&j.properties?j.properties[p.property]:void 0;return H===void 0?Tu(p.default,l.default):g(p,l,H,w,k)}}}function Tu(p,l,A){return p!==void 0?p:l!==void 0?l:A!==void 0?A:void 0}function ru(p,l,A,b,x){return Tu(typeof A===x?b[A]:void 0,p.default,l.default)}function H1(p,l,A){if(rr(A)!=="number")return Tu(p.default,l.default);const b=p.stops.length;if(b===1||A<=p.stops[0][0])return p.stops[0][1];if(A>=p.stops[b-1][0])return p.stops[b-1][1];const x=Ks(p.stops.map((B=>B[0])),A);return p.stops[x][1]}function Pp(p,l,A){const b=p.base!==void 0?p.base:1;if(rr(A)!=="number")return Tu(p.default,l.default);const x=p.stops.length;if(x===1||A<=p.stops[0][0])return p.stops[0][1];if(A>=p.stops[x-1][0])return p.stops[x-1][1];const B=Ks(p.stops.map((F=>F[0])),A),h=(function(F,j,H,ne){const ie=ne-H,Ae=F-H;return ie===0?0:j===1?Ae/ie:(Math.pow(j,Ae)-1)/(Math.pow(j,ie)-1)})(A,b,p.stops[B][0],p.stops[B+1][0]),g=p.stops[B][1],w=p.stops[B+1][1],k=Xu[l.type]||$1;return typeof g.evaluate=="function"?{evaluate(...F){const j=g.evaluate.apply(void 0,F),H=w.evaluate.apply(void 0,F);if(j!==void 0&&H!==void 0)return k(j,H,h,p.colorSpace)}}:k(g,w,h,p.colorSpace)}function Id(p,l,A){switch(l.type){case"color":A=Yi.parse(A);break;case"formatted":A=yo.fromString(A.toString());break;case"resolvedImage":A=po.fromString(A.toString());break;case"padding":A=Eo.parse(A);break;case"colorArray":A=Lo.parse(A);break;case"numberArray":A=io.parse(A);break;default:rr(A)===l.type||l.type==="enum"&&l.values[A]||(A=void 0)}return Tu(A,p.default,l.default)}kl.register(ZA,{error:[{kind:"error"},[Kn],(p,[l])=>{throw new gr(l.evaluate(p))}],typeof:[Kn,[Si],(p,[l])=>mr(Rr(l.evaluate(p)))],"to-rgba":[ga(an,4),[nr],(p,[l])=>{const[A,b,x,B]=l.evaluate(p).rgb;return[255*A,255*b,255*x,B]}],rgb:[nr,[an,an,an],mo],rgba:[nr,[an,an,an,an],mo],has:{type:ii,overloads:[[[Kn],(p,[l])=>T0(l.evaluate(p),p.properties())],[[Kn,Ms],(p,[l,A])=>T0(l.evaluate(p),A.evaluate(p))]]},get:{type:Si,overloads:[[[Kn],(p,[l])=>wf(l.evaluate(p),p.properties())],[[Kn,Ms],(p,[l,A])=>wf(l.evaluate(p),A.evaluate(p))]]},"feature-state":[Si,[Kn],(p,[l])=>wf(l.evaluate(p),p.featureState||{})],properties:[Ms,[],p=>p.properties()],"geometry-type":[Kn,[],p=>p.geometryType()],id:[Si,[],p=>p.id()],zoom:[an,[],p=>p.globals.zoom],"heatmap-density":[an,[],p=>p.globals.heatmapDensity||0],elevation:[an,[],p=>p.globals.elevation||0],"line-progress":[an,[],p=>p.globals.lineProgress||0],accumulated:[Si,[],p=>p.globals.accumulated===void 0?null:p.globals.accumulated],"+":[an,va(an),(p,l)=>{let A=0;for(const b of l)A+=b.evaluate(p);return A}],"*":[an,va(an),(p,l)=>{let A=1;for(const b of l)A*=b.evaluate(p);return A}],"-":{type:an,overloads:[[[an,an],(p,[l,A])=>l.evaluate(p)-A.evaluate(p)],[[an],(p,[l])=>-l.evaluate(p)]]},"/":[an,[an,an],(p,[l,A])=>l.evaluate(p)/A.evaluate(p)],"%":[an,[an,an],(p,[l,A])=>l.evaluate(p)%A.evaluate(p)],ln2:[an,[],()=>Math.LN2],pi:[an,[],()=>Math.PI],e:[an,[],()=>Math.E],"^":[an,[an,an],(p,[l,A])=>Math.pow(l.evaluate(p),A.evaluate(p))],sqrt:[an,[an],(p,[l])=>Math.sqrt(l.evaluate(p))],log10:[an,[an],(p,[l])=>Math.log(l.evaluate(p))/Math.LN10],ln:[an,[an],(p,[l])=>Math.log(l.evaluate(p))],log2:[an,[an],(p,[l])=>Math.log(l.evaluate(p))/Math.LN2],sin:[an,[an],(p,[l])=>Math.sin(l.evaluate(p))],cos:[an,[an],(p,[l])=>Math.cos(l.evaluate(p))],tan:[an,[an],(p,[l])=>Math.tan(l.evaluate(p))],asin:[an,[an],(p,[l])=>Math.asin(l.evaluate(p))],acos:[an,[an],(p,[l])=>Math.acos(l.evaluate(p))],atan:[an,[an],(p,[l])=>Math.atan(l.evaluate(p))],min:[an,va(an),(p,l)=>Math.min(...l.map((A=>A.evaluate(p))))],max:[an,va(an),(p,l)=>Math.max(...l.map((A=>A.evaluate(p))))],abs:[an,[an],(p,[l])=>Math.abs(l.evaluate(p))],round:[an,[an],(p,[l])=>{const A=l.evaluate(p);return A<0?-Math.round(-A):Math.round(A)}],floor:[an,[an],(p,[l])=>Math.floor(l.evaluate(p))],ceil:[an,[an],(p,[l])=>Math.ceil(l.evaluate(p))],"filter-==":[ii,[Kn,Si],(p,[l,A])=>p.properties()[l.value]===A.value],"filter-id-==":[ii,[Si],(p,[l])=>p.id()===l.value],"filter-type-==":[ii,[Kn],(p,[l])=>p.geometryType()===l.value],"filter-<":[ii,[Kn,Si],(p,[l,A])=>{const b=p.properties()[l.value],x=A.value;return typeof b==typeof x&&b<x}],"filter-id-<":[ii,[Si],(p,[l])=>{const A=p.id(),b=l.value;return typeof A==typeof b&&A<b}],"filter->":[ii,[Kn,Si],(p,[l,A])=>{const b=p.properties()[l.value],x=A.value;return typeof b==typeof x&&b>x}],"filter-id->":[ii,[Si],(p,[l])=>{const A=p.id(),b=l.value;return typeof A==typeof b&&A>b}],"filter-<=":[ii,[Kn,Si],(p,[l,A])=>{const b=p.properties()[l.value],x=A.value;return typeof b==typeof x&&b<=x}],"filter-id-<=":[ii,[Si],(p,[l])=>{const A=p.id(),b=l.value;return typeof A==typeof b&&A<=b}],"filter->=":[ii,[Kn,Si],(p,[l,A])=>{const b=p.properties()[l.value],x=A.value;return typeof b==typeof x&&b>=x}],"filter-id->=":[ii,[Si],(p,[l])=>{const A=p.id(),b=l.value;return typeof A==typeof b&&A>=b}],"filter-has":[ii,[Si],(p,[l])=>l.value in p.properties()],"filter-has-id":[ii,[],p=>p.id()!==null&&p.id()!==void 0],"filter-type-in":[ii,[ga(Kn)],(p,[l])=>l.value.indexOf(p.geometryType())>=0],"filter-id-in":[ii,[ga(Si)],(p,[l])=>l.value.indexOf(p.id())>=0],"filter-in-small":[ii,[Kn,ga(Si)],(p,[l,A])=>A.value.indexOf(p.properties()[l.value])>=0],"filter-in-large":[ii,[Kn,ga(Si)],(p,[l,A])=>(function(b,x,B,h){for(;B<=h;){const g=B+h>>1;if(x[g]===b)return!0;x[g]>b?h=g-1:B=g+1}return!1})(p.properties()[l.value],A.value,0,A.value.length-1)],all:{type:ii,overloads:[[[ii,ii],(p,[l,A])=>l.evaluate(p)&&A.evaluate(p)],[va(ii),(p,l)=>{for(const A of l)if(!A.evaluate(p))return!1;return!0}]]},any:{type:ii,overloads:[[[ii,ii],(p,[l,A])=>l.evaluate(p)||A.evaluate(p)],[va(ii),(p,l)=>{for(const A of l)if(A.evaluate(p))return!0;return!1}]]},"!":[ii,[ii],(p,[l])=>!l.evaluate(p)],"is-supported-script":[ii,[Kn],(p,[l])=>{const A=p.globals&&p.globals.isSupportedScript;return!A||A(l.evaluate(p))}],upcase:[Kn,[Kn],(p,[l])=>l.evaluate(p).toUpperCase()],downcase:[Kn,[Kn],(p,[l])=>l.evaluate(p).toLowerCase()],concat:[Kn,va(Si),(p,l)=>l.map((A=>_r(A.evaluate(p)))).join("")],"resolved-locale":[Kn,[Ba],(p,[l])=>l.evaluate(p).resolvedLocale()]});class eh{constructor(l,A,b){this.expression=l,this._warningHistory={},this._evaluator=new Xt,this._defaultValue=A?(function(x){if(x.type==="color"&&nc(x.default))return new Yi(0,0,0,0);switch(x.type){case"color":return Yi.parse(x.default)||null;case"padding":return Eo.parse(x.default)||null;case"numberArray":return io.parse(x.default)||null;case"colorArray":return Lo.parse(x.default)||null;case"variableAnchorOffsetCollection":return Bo.parse(x.default)||null;case"projectionDefinition":return es.parse(x.default)||null;default:return x.default===void 0?null:x.default}})(A):null,this._enumValues=A&&A.type==="enum"?A.values:null,this._globalState=b}evaluateWithoutErrorHandling(l,A,b,x,B,h){return this._globalState&&(l=Xa(l,this._globalState)),this._evaluator.globals=l,this._evaluator.feature=A,this._evaluator.featureState=b,this._evaluator.canonical=x,this._evaluator.availableImages=B||null,this._evaluator.formattedSection=h,this.expression.evaluate(this._evaluator)}evaluate(l,A,b,x,B,h){this._globalState&&(l=Xa(l,this._globalState)),this._evaluator.globals=l,this._evaluator.feature=A||null,this._evaluator.featureState=b||null,this._evaluator.canonical=x,this._evaluator.availableImages=B||null,this._evaluator.formattedSection=h||null;try{const g=this.expression.evaluate(this._evaluator);if(g==null||typeof g=="number"&&g!=g)return this._defaultValue;if(this._enumValues&&!(g in this._enumValues))throw new gr(`Expected value to be one of ${Object.keys(this._enumValues).map((w=>JSON.stringify(w))).join(", ")}, but found ${JSON.stringify(g)} instead.`);return g}catch(g){return this._warningHistory[g.message]||(this._warningHistory[g.message]=!0,typeof console<"u"&&console.warn(g.message)),this._defaultValue}}}function kh(p){return Array.isArray(p)&&p.length>0&&typeof p[0]=="string"&&p[0]in ZA}function Dh(p,l,A){const b=new hi(ZA,Od,[],l?(function(B){const h={color:nr,string:Kn,number:an,enum:Kn,boolean:ii,formatted:Xl,padding:Yr,numberArray:$a,colorArray:ls,projectionDefinition:Su,resolvedImage:ma,variableAnchorOffsetCollection:wo};return B.type==="array"?ga(h[B.value]||Si,B.length):h[B.type]})(l):void 0),x=b.parse(p,void 0,void 0,void 0,l&&l.type==="string"?{typeAnnotation:"coerce"}:void 0);return x?ec(new eh(x,l,A)):tc(b.errors)}class Rh{constructor(l,A,b){this.kind=l,this._styleExpression=A,this.isStateDependent=l!=="constant"&&!uA(A.expression),this.globalStateRefs=Fs(A.expression),this._globalState=b}evaluateWithoutErrorHandling(l,A,b,x,B,h){return this._globalState&&(l=Xa(l,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(l,A,b,x,B,h)}evaluate(l,A,b,x,B,h){return this._globalState&&(l=Xa(l,this._globalState)),this._styleExpression.evaluate(l,A,b,x,B,h)}}class dl{constructor(l,A,b,x,B){this.kind=l,this.zoomStops=b,this._styleExpression=A,this.isStateDependent=l!=="camera"&&!uA(A.expression),this.globalStateRefs=Fs(A.expression),this.interpolationType=x,this._globalState=B}evaluateWithoutErrorHandling(l,A,b,x,B,h){return this._globalState&&(l=Xa(l,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(l,A,b,x,B,h)}evaluate(l,A,b,x,B,h){return this._globalState&&(l=Xa(l,this._globalState)),this._styleExpression.evaluate(l,A,b,x,B,h)}interpolationFactor(l,A,b){return this.interpolationType?Io.interpolationFactor(this.interpolationType,l,A,b):0}}function Td(p,l,A){const b=Dh(p,l,A);if(b.result==="error")return b;const x=b.value.expression,B=Dl(x);if(!B&&!JA(l))return tc([new bi("","data expressions not supported")]);const h=XA(x,["zoom"]);if(!h&&!Dc(l))return tc([new bi("","zoom expressions not supported")]);const g=cs(x);return g||h?g instanceof bi?tc([g]):g instanceof Io&&!Rp(l)?tc([new bi("",'"interpolate" expressions cannot be used with this property')]):ec(g?new dl(B?"camera":"composite",b.value,g.labels,g instanceof Io?g.interpolation:void 0,A):new Rh(B?"constant":"source",b.value,A)):tc([new bi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class th{constructor(l,A){this._parameters=l,this._specification=A,$i(this,Ga(this._parameters,this._specification))}static deserialize(l){return new th(l._parameters,l._specification)}static serialize(l){return{_parameters:l._parameters,_specification:l._specification}}}function cs(p){let l=null;if(p instanceof Pn)l=cs(p.result);else if(p instanceof Iu){for(const A of p.args)if(l=cs(A),l)break}else(p instanceof Oo||p instanceof Io)&&p.input instanceof kl&&p.input.name==="zoom"&&(l=p);return l instanceof bi||p.eachChild((A=>{const b=cs(A);b instanceof bi?l=b:!l&&b?l=new bi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):l&&b&&l!==b&&(l=new bi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),l}function Fs(p,l=new Set){return p instanceof lA&&l.add(p.key),p.eachChild((A=>{Fs(A,l)})),l}function Xa(p,l){const{zoom:A,heatmapDensity:b,elevation:x,lineProgress:B,isSupportedScript:h,accumulated:g}=p??{};return{zoom:A,heatmapDensity:b,elevation:x,lineProgress:B,isSupportedScript:h,accumulated:g,globalState:l}}function Rl(p){if(p===!0||p===!1)return!0;if(!Array.isArray(p)||p.length===0)return!1;switch(p[0]){case"has":return p.length>=2&&p[1]!=="$id"&&p[1]!=="$type";case"in":return p.length>=3&&(typeof p[1]!="string"||Array.isArray(p[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return p.length!==3||Array.isArray(p[1])||Array.isArray(p[2]);case"any":case"all":for(const l of p.slice(1))if(!Rl(l)&&typeof l!="boolean")return!1;return!0;default:return!0}}const cA={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ou(p,l){if(p==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Rl(p)||(p=Ph(p));const A=Dh(p,cA,l);if(A.result==="error")throw new Error(A.value.map((b=>`${b.key}: ${b.message}`)).join(", "));return{filter:(b,x,B)=>A.value.evaluate(b,x,{},B),needGeometry:Pl(p),getGlobalStateRefs:()=>Fs(A.value.expression)}}function ic(p,l){return p<l?-1:p>l?1:0}function Pl(p){if(!Array.isArray(p))return!1;if(p[0]==="within"||p[0]==="distance")return!0;for(let l=1;l<p.length;l++)if(Pl(p[l]))return!0;return!1}function Ph(p){if(!p)return!0;const l=p[0];return p.length<=1?l!=="any":l==="=="?Rc(p[1],p[2],"=="):l==="!="?zs(Rc(p[1],p[2],"==")):l==="<"||l===">"||l==="<="||l===">="?Rc(p[1],p[2],l):l==="any"?(A=p.slice(1),["any"].concat(A.map(Ph))):l==="all"?["all"].concat(p.slice(1).map(Ph)):l==="none"?["all"].concat(p.slice(1).map(Ph).map(zs)):l==="in"?Lh(p[1],p.slice(2)):l==="!in"?zs(Lh(p[1],p.slice(2))):l==="has"?kd(p[1]):l!=="!has"||zs(kd(p[1]));var A}function Rc(p,l,A){switch(p){case"$type":return[`filter-type-${A}`,l];case"$id":return[`filter-id-${A}`,l];default:return[`filter-${A}`,p,l]}}function Lh(p,l){if(l.length===0)return!1;switch(p){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some((A=>typeof A!=typeof l[0]))?["filter-in-large",p,["literal",l.sort(ic)]]:["filter-in-small",p,["literal",l]]}}function kd(p){switch(p){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",p]}}function zs(p){return["!",p]}function so(p){const l=typeof p;if(l==="number"||l==="boolean"||l==="string"||p==null)return JSON.stringify(p);if(Array.isArray(p)){let x="[";for(const B of p)x+=`${so(B)},`;return`${x}]`}const A=Object.keys(p).sort();let b="{";for(let x=0;x<A.length;x++)b+=`${JSON.stringify(A[x])}:${so(p[A[x]])},`;return`${b}}`}function Pr(p){let l="";for(const A of at)l+=`/${so(p[A])}`;return l}function AA(p){const l=p.value;return l?[new nn(p.key,l,"constants have been deprecated as of v8")]:[]}function Nr(p){return p instanceof Number||p instanceof String||p instanceof Boolean?p.valueOf():p}function Pc(p){if(Array.isArray(p))return p.map(Pc);if(p instanceof Object&&!(p instanceof Number||p instanceof String||p instanceof Boolean)){const l={};for(const A in p)l[A]=Pc(p[A]);return l}return Nr(p)}function ra(p){const l=p.key,A=p.value,b=p.valueSpec||{},x=p.objectElementValidators||{},B=p.style,h=p.styleSpec,g=p.validateSpec;let w=[];const k=rr(A);if(k!=="object")return[new nn(l,A,`object expected, ${k} found`)];for(const F in A){const j=F.split(".")[0],H=Rs(b,j)||b["*"];let ne;if(Rs(x,j))ne=x[j];else if(Rs(b,j))ne=g;else if(x["*"])ne=x["*"];else{if(!b["*"]){w.push(new nn(l,A[F],`unknown property "${F}"`));continue}ne=g}w=w.concat(ne({key:(l&&`${l}.`)+F,value:A[F],valueSpec:H,style:B,styleSpec:h,object:A,objectKey:F,validateSpec:g},A))}for(const F in b)x[F]||b[F].required&&b[F].default===void 0&&A[F]===void 0&&w.push(new nn(l,A,`missing required property "${F}"`));return w}function nh(p){const l=p.value,A=p.valueSpec,b=p.style,x=p.styleSpec,B=p.key,h=p.arrayElementValidator||p.validateSpec;if(rr(l)!=="array")return[new nn(B,l,`array expected, ${rr(l)} found`)];if(A.length&&l.length!==A.length)return[new nn(B,l,`array length ${A.length} expected, length ${l.length} found`)];if(A["min-length"]&&l.length<A["min-length"])return[new nn(B,l,`array length at least ${A["min-length"]} expected, length ${l.length} found`)];let g={type:A.value,values:A.values};x.$version<7&&(g.function=A.function),rr(A.value)==="object"&&(g=A.value);let w=[];for(let k=0;k<l.length;k++)w=w.concat(h({array:l,arrayIndex:k,value:l[k],valueSpec:g,validateSpec:p.validateSpec,style:b,styleSpec:x,key:`${B}[${k}]`}));return w}function rc(p){const l=p.key,A=p.value,b=p.valueSpec;let x=rr(A);return x==="number"&&A!=A&&(x="NaN"),x!=="number"?[new nn(l,A,`number expected, ${x} found`)]:"minimum"in b&&A<b.minimum?[new nn(l,A,`${A} is less than the minimum value ${b.minimum}`)]:"maximum"in b&&A>b.maximum?[new nn(l,A,`${A} is greater than the maximum value ${b.maximum}`)]:[]}function Uh(p){const l=p.valueSpec,A=Nr(p.value.type);let b,x,B,h={};const g=A!=="categorical"&&p.value.property===void 0,w=!g,k=rr(p.value.stops)==="array"&&rr(p.value.stops[0])==="array"&&rr(p.value.stops[0][0])==="object",F=ra({key:p.key,value:p.value,valueSpec:p.styleSpec.function,validateSpec:p.validateSpec,style:p.style,styleSpec:p.styleSpec,objectElementValidators:{stops:function(ne){if(A==="identity")return[new nn(ne.key,ne.value,'identity function may not have a "stops" property')];let ie=[];const Ae=ne.value;return ie=ie.concat(nh({key:ne.key,value:Ae,valueSpec:ne.valueSpec,validateSpec:ne.validateSpec,style:ne.style,styleSpec:ne.styleSpec,arrayElementValidator:j})),rr(Ae)==="array"&&Ae.length===0&&ie.push(new nn(ne.key,Ae,"array must have at least one stop")),ie},default:function(ne){return ne.validateSpec({key:ne.key,value:ne.value,valueSpec:l,validateSpec:ne.validateSpec,style:ne.style,styleSpec:ne.styleSpec})}}});return A==="identity"&&g&&F.push(new nn(p.key,p.value,'missing required property "property"')),A==="identity"||p.value.stops||F.push(new nn(p.key,p.value,'missing required property "stops"')),A==="exponential"&&p.valueSpec.expression&&!Rp(p.valueSpec)&&F.push(new nn(p.key,p.value,"exponential functions not supported")),p.styleSpec.$version>=8&&(w&&!JA(p.valueSpec)?F.push(new nn(p.key,p.value,"property functions not supported")):g&&!Dc(p.valueSpec)&&F.push(new nn(p.key,p.value,"zoom functions not supported"))),A!=="categorical"&&!k||p.value.property!==void 0||F.push(new nn(p.key,p.value,'"property" property is required')),F;function j(ne){let ie=[];const Ae=ne.value,de=ne.key;if(rr(Ae)!=="array")return[new nn(de,Ae,`array expected, ${rr(Ae)} found`)];if(Ae.length!==2)return[new nn(de,Ae,`array length 2 expected, length ${Ae.length} found`)];if(k){if(rr(Ae[0])!=="object")return[new nn(de,Ae,`object expected, ${rr(Ae[0])} found`)];if(Ae[0].zoom===void 0)return[new nn(de,Ae,"object stop key must have zoom")];if(Ae[0].value===void 0)return[new nn(de,Ae,"object stop key must have value")];if(B&&B>Nr(Ae[0].zoom))return[new nn(de,Ae[0].zoom,"stop zoom values must appear in ascending order")];Nr(Ae[0].zoom)!==B&&(B=Nr(Ae[0].zoom),x=void 0,h={}),ie=ie.concat(ra({key:`${de}[0]`,value:Ae[0],valueSpec:{zoom:{}},validateSpec:ne.validateSpec,style:ne.style,styleSpec:ne.styleSpec,objectElementValidators:{zoom:rc,value:H}}))}else ie=ie.concat(H({key:`${de}[0]`,value:Ae[0],validateSpec:ne.validateSpec,style:ne.style,styleSpec:ne.styleSpec},Ae));return kh(Pc(Ae[1]))?ie.concat([new nn(`${de}[1]`,Ae[1],"expressions are not allowed in function stops.")]):ie.concat(ne.validateSpec({key:`${de}[1]`,value:Ae[1],valueSpec:l,validateSpec:ne.validateSpec,style:ne.style,styleSpec:ne.styleSpec}))}function H(ne,ie){const Ae=rr(ne.value),de=Nr(ne.value),Me=ne.value!==null?ne.value:ie;if(b){if(Ae!==b)return[new nn(ne.key,Me,`${Ae} stop domain type must match previous stop domain type ${b}`)]}else b=Ae;if(Ae!=="number"&&Ae!=="string"&&Ae!=="boolean")return[new nn(ne.key,Me,"stop domain value must be a number, string, or boolean")];if(Ae!=="number"&&A!=="categorical"){let We=`number expected, ${Ae} found`;return JA(l)&&A===void 0&&(We+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new nn(ne.key,Me,We)]}return A!=="categorical"||Ae!=="number"||isFinite(de)&&Math.floor(de)===de?A!=="categorical"&&Ae==="number"&&x!==void 0&&de<x?[new nn(ne.key,Me,"stop domain values must appear in ascending order")]:(x=de,A==="categorical"&&de in h?[new nn(ne.key,Me,"stop domain values must be unique")]:(h[de]=!0,[])):[new nn(ne.key,Me,`integer expected, found ${de}`)]}}function Ne(p){const l=(p.expressionContext==="property"?Td:Dh)(Pc(p.value),p.valueSpec);if(l.result==="error")return l.value.map((b=>new nn(`${p.key}${b.key}`,p.value,b.message)));const A=l.value.expression||l.value._styleExpression.expression;if(p.expressionContext==="property"&&p.propertyKey==="text-font"&&!A.outputDefined())return[new nn(p.key,p.value,`Invalid data expression for "${p.propertyKey}". Output values must be contained as literals within the expression.`)];if(p.expressionContext==="property"&&p.propertyType==="layout"&&!uA(A))return[new nn(p.key,p.value,'"feature-state" data expressions are not supported with layout properties.')];if(p.expressionContext==="filter"&&!uA(A))return[new nn(p.key,p.value,'"feature-state" data expressions are not supported with filters.')];if(p.expressionContext&&p.expressionContext.indexOf("cluster")===0){if(!XA(A,["zoom","feature-state"]))return[new nn(p.key,p.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(p.expressionContext==="cluster-initial"&&!Dl(A))return[new nn(p.key,p.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function hA(p){const l=p.key,A=p.value,b=rr(A);return b!=="string"?[new nn(l,A,`color expected, ${b} found`)]:Yi.parse(String(A))?[]:[new nn(l,A,`color expected, "${A}" found`)]}function oc(p){const l=p.key,A=p.value,b=p.valueSpec,x=[];return Array.isArray(b.values)?b.values.indexOf(Nr(A))===-1&&x.push(new nn(l,A,`expected one of [${b.values.join(", ")}], ${JSON.stringify(A)} found`)):Object.keys(b.values).indexOf(Nr(A))===-1&&x.push(new nn(l,A,`expected one of [${Object.keys(b.values).join(", ")}], ${JSON.stringify(A)} found`)),x}function fl(p){return Rl(Pc(p.value))?Ne($i({},p,{expressionContext:"filter",valueSpec:{value:"boolean"}})):sr(p)}function sr(p){const l=p.value,A=p.key;if(rr(l)!=="array")return[new nn(A,l,`array expected, ${rr(l)} found`)];const b=p.styleSpec;let x,B=[];if(l.length<1)return[new nn(A,l,"filter array must have at least 1 element")];switch(B=B.concat(oc({key:`${A}[0]`,value:l[0],valueSpec:b.filter_operator,style:p.style,styleSpec:p.styleSpec})),Nr(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&Nr(l[1])==="$type"&&B.push(new nn(A,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":l.length!==3&&B.push(new nn(A,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(x=rr(l[1]),x!=="string"&&B.push(new nn(`${A}[1]`,l[1],`string expected, ${x} found`)));for(let h=2;h<l.length;h++)x=rr(l[h]),Nr(l[1])==="$type"?B=B.concat(oc({key:`${A}[${h}]`,value:l[h],valueSpec:b.geometry_type,style:p.style,styleSpec:p.styleSpec})):x!=="string"&&x!=="number"&&x!=="boolean"&&B.push(new nn(`${A}[${h}]`,l[h],`string, number, or boolean expected, ${x} found`));break;case"any":case"all":case"none":for(let h=1;h<l.length;h++)B=B.concat(sr({key:`${A}[${h}]`,value:l[h],style:p.style,styleSpec:p.styleSpec}));break;case"has":case"!has":x=rr(l[1]),l.length!==2?B.push(new nn(A,l,`filter array for "${l[0]}" operator must have 2 elements`)):x!=="string"&&B.push(new nn(`${A}[1]`,l[1],`string expected, ${x} found`))}return B}function Lc(p,l){const A=p.key,b=p.validateSpec,x=p.style,B=p.styleSpec,h=p.value,g=p.objectKey,w=B[`${l}_${p.layerType}`];if(!w)return[];const k=g.match(/^(.*)-transition$/);if(l==="paint"&&k&&w[k[1]]&&w[k[1]].transition)return b({key:A,value:h,valueSpec:B.transition,style:x,styleSpec:B});const F=p.valueSpec||w[g];if(!F)return[new nn(A,h,`unknown property "${g}"`)];let j;if(rr(h)==="string"&&JA(F)&&!F.tokens&&(j=/^{([^}]+)}$/.exec(h)))return[new nn(A,h,`"${g}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(j[1])} }\`.`)];const H=[];return p.layerType==="symbol"&&g==="text-font"&&nc(Pc(h))&&Nr(h.type)==="identity"&&H.push(new nn(A,h,'"text-font" does not support identity functions')),H.concat(b({key:p.key,value:h,valueSpec:F,style:x,styleSpec:B,expressionContext:"property",propertyType:l,propertyKey:g}))}function dA(p){return Lc(p,"paint")}function ku(p){return Lc(p,"layout")}function fA(p){let l=[];const A=p.value,b=p.key,x=p.style,B=p.styleSpec;if(rr(A)!=="object")return[new nn(b,A,`object expected, ${rr(A)} found`)];A.type||A.ref||l.push(new nn(b,A,'either "type" or "ref" is required'));let h=Nr(A.type);const g=Nr(A.ref);if(A.id){const w=Nr(A.id);for(let k=0;k<p.arrayIndex;k++){const F=x.layers[k];Nr(F.id)===w&&l.push(new nn(b,A.id,`duplicate layer id "${A.id}", previously used at line ${F.id.__line__}`))}}if("ref"in A){let w;["type","source","source-layer","filter","layout"].forEach((k=>{k in A&&l.push(new nn(b,A[k],`"${k}" is prohibited for ref layers`))})),x.layers.forEach((k=>{Nr(k.id)===g&&(w=k)})),w?w.ref?l.push(new nn(b,A.ref,"ref cannot reference another ref layer")):h=Nr(w.type):l.push(new nn(b,A.ref,`ref layer "${g}" not found`))}else if(h!=="background")if(A.source){const w=x.sources&&x.sources[A.source],k=w&&Nr(w.type);w?k==="vector"&&h==="raster"?l.push(new nn(b,A.source,`layer "${A.id}" requires a raster source`)):k!=="raster-dem"&&h==="hillshade"||k!=="raster-dem"&&h==="color-relief"?l.push(new nn(b,A.source,`layer "${A.id}" requires a raster-dem source`)):k==="raster"&&h!=="raster"?l.push(new nn(b,A.source,`layer "${A.id}" requires a vector source`)):k!=="vector"||A["source-layer"]?k==="raster-dem"&&h!=="hillshade"&&h!=="color-relief"?l.push(new nn(b,A.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):h!=="line"||!A.paint||!A.paint["line-gradient"]||k==="geojson"&&w.lineMetrics||l.push(new nn(b,A,`layer "${A.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new nn(b,A,`layer "${A.id}" must specify a "source-layer"`)):l.push(new nn(b,A.source,`source "${A.source}" not found`))}else l.push(new nn(b,A,'missing required property "source"'));return l=l.concat(ra({key:b,value:A,valueSpec:B.layer,style:p.style,styleSpec:p.styleSpec,validateSpec:p.validateSpec,objectElementValidators:{"*":()=>[],type:()=>p.validateSpec({key:`${b}.type`,value:A.type,valueSpec:B.layer.type,style:p.style,styleSpec:p.styleSpec,validateSpec:p.validateSpec,object:A,objectKey:"type"}),filter:fl,layout:w=>ra({layer:A,key:w.key,value:w.value,style:w.style,styleSpec:w.styleSpec,validateSpec:w.validateSpec,objectElementValidators:{"*":k=>ku($i({layerType:h},k))}}),paint:w=>ra({layer:A,key:w.key,value:w.value,style:w.style,styleSpec:w.styleSpec,validateSpec:w.validateSpec,objectElementValidators:{"*":k=>dA($i({layerType:h},k))}})}})),l}function pA(p){const l=p.value,A=p.key,b=rr(l);return b!=="string"?[new nn(A,l,`string expected, ${b} found`)]:[]}const Kh={promoteId:function({key:p,value:l}){if(rr(l)==="string")return pA({key:p,value:l});{const A=[];for(const b in l)A.push(...pA({key:`${p}.${b}`,value:l[b]}));return A}}};function Lp(p){const l=p.value,A=p.key,b=p.styleSpec,x=p.style,B=p.validateSpec;if(!l.type)return[new nn(A,l,'"type" is required')];const h=Nr(l.type);let g;switch(h){case"vector":case"raster":return g=ra({key:A,value:l,valueSpec:b[`source_${h.replace("-","_")}`],style:p.style,styleSpec:b,objectElementValidators:Kh,validateSpec:B}),g;case"raster-dem":return g=(function(w){var k;const F=(k=w.sourceName)!==null&&k!==void 0?k:"",j=w.value,H=w.styleSpec,ne=H.source_raster_dem,ie=w.style;let Ae=[];const de=rr(j);if(j===void 0)return Ae;if(de!=="object")return Ae.push(new nn("source_raster_dem",j,`object expected, ${de} found`)),Ae;const Me=Nr(j.encoding)==="custom",We=["redFactor","greenFactor","blueFactor","baseShift"],Ue=w.value.encoding?`"${w.value.encoding}"`:"Default";for(const je in j)!Me&&We.includes(je)?Ae.push(new nn(je,j[je],`In "${F}": "${je}" is only valid when "encoding" is set to "custom". ${Ue} encoding found`)):ne[je]?Ae=Ae.concat(w.validateSpec({key:je,value:j[je],valueSpec:ne[je],validateSpec:w.validateSpec,style:ie,styleSpec:H})):Ae.push(new nn(je,j[je],`unknown property "${je}"`));return Ae})({sourceName:A,value:l,style:p.style,styleSpec:b,validateSpec:B}),g;case"geojson":if(g=ra({key:A,value:l,valueSpec:b.source_geojson,style:x,styleSpec:b,validateSpec:B,objectElementValidators:Kh}),l.cluster)for(const w in l.clusterProperties){const[k,F]=l.clusterProperties[w],j=typeof k=="string"?[k,["accumulated"],["get",w]]:k;g.push(...Ne({key:`${A}.${w}.map`,value:F,expressionContext:"cluster-map"})),g.push(...Ne({key:`${A}.${w}.reduce`,value:j,expressionContext:"cluster-reduce"}))}return g;case"video":return ra({key:A,value:l,valueSpec:b.source_video,style:x,validateSpec:B,styleSpec:b});case"image":return ra({key:A,value:l,valueSpec:b.source_image,style:x,validateSpec:B,styleSpec:b});case"canvas":return[new nn(A,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return oc({key:`${A}.type`,value:l.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function ih(p){const l=p.value,A=p.styleSpec,b=A.light,x=p.style;let B=[];const h=rr(l);if(l===void 0)return B;if(h!=="object")return B=B.concat([new nn("light",l,`object expected, ${h} found`)]),B;for(const g in l){const w=g.match(/^(.*)-transition$/);B=B.concat(w&&b[w[1]]&&b[w[1]].transition?p.validateSpec({key:g,value:l[g],valueSpec:A.transition,validateSpec:p.validateSpec,style:x,styleSpec:A}):b[g]?p.validateSpec({key:g,value:l[g],valueSpec:b[g],validateSpec:p.validateSpec,style:x,styleSpec:A}):[new nn(g,l[g],`unknown property "${g}"`)])}return B}function Ia(p){const l=p.value,A=p.styleSpec,b=A.sky,x=p.style,B=rr(l);if(l===void 0)return[];if(B!=="object")return[new nn("sky",l,`object expected, ${B} found`)];let h=[];for(const g in l)h=h.concat(b[g]?p.validateSpec({key:g,value:l[g],valueSpec:b[g],style:x,styleSpec:A}):[new nn(g,l[g],`unknown property "${g}"`)]);return h}function Ja(p){const l=p.value,A=p.styleSpec,b=A.terrain,x=p.style;let B=[];const h=rr(l);if(l===void 0)return B;if(h!=="object")return B=B.concat([new nn("terrain",l,`object expected, ${h} found`)]),B;for(const g in l)B=B.concat(b[g]?p.validateSpec({key:g,value:l[g],valueSpec:b[g],validateSpec:p.validateSpec,style:x,styleSpec:A}):[new nn(g,l[g],`unknown property "${g}"`)]);return B}function k0(p){let l=[];const A=p.value,b=p.key;if(Array.isArray(A)){const x=[],B=[];for(const h in A)A[h].id&&x.includes(A[h].id)&&l.push(new nn(b,A,`all the sprites' ids must be unique, but ${A[h].id} is duplicated`)),x.push(A[h].id),A[h].url&&B.includes(A[h].url)&&l.push(new nn(b,A,`all the sprites' URLs must be unique, but ${A[h].url} is duplicated`)),B.push(A[h].url),l=l.concat(ra({key:`${b}[${h}]`,value:A[h],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:p.validateSpec}));return l}return pA({key:b,value:A})}function Z1(p){return l=p.value,l&&l.constructor===Object?[]:[new nn(p.key,p.value,`object expected, ${rr(p.value)} found`)];var l}const X1={"*":()=>[],array:nh,boolean:function(p){const l=p.value,A=p.key,b=rr(l);return b!=="boolean"?[new nn(A,l,`boolean expected, ${b} found`)]:[]},number:rc,color:hA,constants:AA,enum:oc,filter:fl,function:Uh,layer:fA,object:ra,source:Lp,light:ih,sky:Ia,terrain:Ja,projection:function(p){const l=p.value,A=p.styleSpec,b=A.projection,x=p.style,B=rr(l);if(l===void 0)return[];if(B!=="object")return[new nn("projection",l,`object expected, ${B} found`)];let h=[];for(const g in l)h=h.concat(b[g]?p.validateSpec({key:g,value:l[g],valueSpec:b[g],style:x,styleSpec:A}):[new nn(g,l[g],`unknown property "${g}"`)]);return h},projectionDefinition:function(p){const l=p.key;let A=p.value;A=A instanceof String?A.valueOf():A;const b=rr(A);return b!=="array"||(function(x){return Array.isArray(x)&&x.length===3&&typeof x[0]=="string"&&typeof x[1]=="string"&&typeof x[2]=="number"})(A)||(function(x){return!!["interpolate","step","literal"].includes(x[0])})(A)?["array","string"].includes(b)?[]:[new nn(l,A,`projection expected, invalid type "${b}" found`)]:[new nn(l,A,`projection expected, invalid array ${JSON.stringify(A)} found`)]},string:pA,formatted:function(p){return pA(p).length===0?[]:Ne(p)},resolvedImage:function(p){return pA(p).length===0?[]:Ne(p)},padding:function(p){const l=p.key,A=p.value;if(rr(A)==="array"){if(A.length<1||A.length>4)return[new nn(l,A,`padding requires 1 to 4 values; ${A.length} values found`)];const b={type:"number"};let x=[];for(let B=0;B<A.length;B++)x=x.concat(p.validateSpec({key:`${l}[${B}]`,value:A[B],validateSpec:p.validateSpec,valueSpec:b}));return x}return rc({key:l,value:A,valueSpec:{}})},numberArray:function(p){const l=p.key,A=p.value;if(rr(A)==="array"){const b={type:"number"};if(A.length<1)return[new nn(l,A,"array length at least 1 expected, length 0 found")];let x=[];for(let B=0;B<A.length;B++)x=x.concat(p.validateSpec({key:`${l}[${B}]`,value:A[B],validateSpec:p.validateSpec,valueSpec:b}));return x}return rc({key:l,value:A,valueSpec:{}})},colorArray:function(p){const l=p.key,A=p.value;if(rr(A)==="array"){if(A.length<1)return[new nn(l,A,"array length at least 1 expected, length 0 found")];let b=[];for(let x=0;x<A.length;x++)b=b.concat(hA({key:`${l}[${x}]`,value:A[x]}));return b}return hA({key:l,value:A})},variableAnchorOffsetCollection:function(p){const l=p.key,A=p.value,b=rr(A),x=p.styleSpec;if(b!=="array"||A.length<1||A.length%2!=0)return[new nn(l,A,"variableAnchorOffsetCollection requires a non-empty array of even length")];let B=[];for(let h=0;h<A.length;h+=2)B=B.concat(oc({key:`${l}[${h}]`,value:A[h],valueSpec:x.layout_symbol["text-anchor"]})),B=B.concat(nh({key:`${l}[${h+1}]`,value:A[h+1],valueSpec:{length:2,value:"number"},validateSpec:p.validateSpec,style:p.style,styleSpec:x}));return B},sprite:k0,state:Z1};function sg(p){const l=p.value,A=p.valueSpec,b=p.styleSpec;return p.validateSpec=sg,A.expression&&nc(Nr(l))?Uh(p):A.expression&&kh(Pc(l))?Ne(p):A.type&&X1[A.type]?X1[A.type](p):ra($i({},p,{valueSpec:A.type?b[A.type]:A}))}function oa(p){const l=p.value,A=p.key,b=pA(p);return b.length||(l.indexOf("{fontstack}")===-1&&b.push(new nn(A,l,'"glyphs" url must include a "{fontstack}" token')),l.indexOf("{range}")===-1&&b.push(new nn(A,l,'"glyphs" url must include a "{range}" token'))),b}function qs(p,l=Re){let A=[];return A=A.concat(sg({key:"",value:p,valueSpec:l.$root,styleSpec:l,style:p,validateSpec:sg,objectElementValidators:{glyphs:oa,"*":()=>[]}})),p.constants&&(A=A.concat(AA({key:"constants",value:p.constants}))),mA(A)}function Ta(p){return function(l){return p(Object.assign({},l,{validateSpec:sg}))}}function mA(p){return[].concat(p).sort(((l,A)=>l.line-A.line))}function As(p){return function(...l){return mA(p.apply(this,l))}}qs.source=As(Ta(Lp)),qs.sprite=As(Ta(k0)),qs.glyphs=As(Ta(oa)),qs.light=As(Ta(ih)),qs.sky=As(Ta(Ia)),qs.terrain=As(Ta(Ja)),qs.state=As(Ta(Z1)),qs.layer=As(Ta(fA)),qs.filter=As(Ta(fl)),qs.paintProperty=As(Ta(dA)),qs.layoutProperty=As(Ta(ku));const gA=Re,sc=qs,Dd=sc.light,J1=sc.sky,Up=sc.paintProperty,Du=sc.layoutProperty;function yA(p,l){let A=!1;if(l&&l.length)for(const b of l)p.fire(new $e(new Error(b.message))),A=!0;return A}class Rd{constructor(l,A,b){const x=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;const h=new Int32Array(this.arrayBuffer);l=h[0],this.d=(A=h[1])+2*(b=h[2]);for(let w=0;w<this.d*this.d;w++){const k=h[3+w],F=h[3+w+1];x.push(k===F?null:h.subarray(k,F))}const g=h[3+x.length+1];this.keys=h.subarray(h[3+x.length],g),this.bboxes=h.subarray(g),this.insert=this._insertReadonly}else{this.d=A+2*b;for(let h=0;h<this.d*this.d;h++)x.push([]);this.keys=[],this.bboxes=[]}this.n=A,this.extent=l,this.padding=b,this.scale=A/l,this.uid=0;const B=b/A*l;this.min=-B,this.max=l+B}insert(l,A,b,x,B){this._forEachCell(A,b,x,B,this._insertCell,this.uid++,void 0,void 0),this.keys.push(l),this.bboxes.push(A),this.bboxes.push(b),this.bboxes.push(x),this.bboxes.push(B)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(l,A,b,x,B,h){this.cells[B].push(h)}query(l,A,b,x,B){const h=this.min,g=this.max;if(l<=h&&A<=h&&g<=b&&g<=x&&!B)return Array.prototype.slice.call(this.keys);{const w=[];return this._forEachCell(l,A,b,x,this._queryCell,w,{},B),w}}_queryCell(l,A,b,x,B,h,g,w){const k=this.cells[B];if(k!==null){const F=this.keys,j=this.bboxes;for(let H=0;H<k.length;H++){const ne=k[H];if(g[ne]===void 0){const ie=4*ne;(w?w(j[ie+0],j[ie+1],j[ie+2],j[ie+3]):l<=j[ie+2]&&A<=j[ie+3]&&b>=j[ie+0]&&x>=j[ie+1])?(g[ne]=!0,h.push(F[ne])):g[ne]=!1}}}}_forEachCell(l,A,b,x,B,h,g,w){const k=this._convertToCellCoord(l),F=this._convertToCellCoord(A),j=this._convertToCellCoord(b),H=this._convertToCellCoord(x);for(let ne=k;ne<=j;ne++)for(let ie=F;ie<=H;ie++){const Ae=this.d*ie+ne;if((!w||w(this._convertFromCellCoord(ne),this._convertFromCellCoord(ie),this._convertFromCellCoord(ne+1),this._convertFromCellCoord(ie+1)))&&B.call(this,l,A,b,x,Ae,h,g,w))return}}_convertFromCellCoord(l){return(l-this.padding)/this.scale}_convertToCellCoord(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const l=this.cells,A=3+this.cells.length+1+1;let b=0;for(let h=0;h<this.cells.length;h++)b+=this.cells[h].length;const x=new Int32Array(A+b+this.keys.length+this.bboxes.length);x[0]=this.extent,x[1]=this.n,x[2]=this.padding;let B=A;for(let h=0;h<l.length;h++){const g=l[h];x[3+h]=B,x.set(g,B),B+=g.length}return x[3+l.length]=B,x.set(this.keys,B),B+=this.keys.length,x[3+l.length+1]=B,x.set(this.bboxes,B),B+=this.bboxes.length,x.buffer}static serialize(l,A){const b=l.toArrayBuffer();return A&&A.push(b),{buffer:b}}static deserialize(l){return new Rd(l.buffer)}}const su={};function Gn(p,l,A={}){if(su[p])throw new Error(`${p} is already registered.`);Object.defineProperty(l,"_classRegistryKey",{value:p,writeable:!1}),su[p]={klass:l,omit:A.omit||[],shallow:A.shallow||[]}}Gn("Object",Object),Gn("Set",Set),Gn("TransferableGridIndex",Rd),Gn("Color",Yi),Gn("Error",Error),Gn("AJAXError",It),Gn("ResolvedImage",po),Gn("StylePropertyFunction",th),Gn("StyleExpression",eh,{omit:["_evaluator"]}),Gn("ZoomDependentExpression",dl),Gn("ZoomConstantExpression",Rh),Gn("CompoundExpression",kl,{omit:["_evaluate"]});for(const p in ZA)ZA[p]._classRegistryKey||Gn(`Expression_${p}`,ZA[p]);function Uc(p){return p&&typeof ArrayBuffer<"u"&&(p instanceof ArrayBuffer||p.constructor&&p.constructor.name==="ArrayBuffer")}function Sf(p){return p.$name||p.constructor._classRegistryKey}function Ef(p){return!(function(l){if(l===null||typeof l!="object")return!1;const A=Sf(l);return!(!A||A==="Object")})(p)&&(p==null||typeof p=="boolean"||typeof p=="number"||typeof p=="string"||p instanceof Boolean||p instanceof Number||p instanceof String||p instanceof Date||p instanceof RegExp||p instanceof Blob||p instanceof Error||Uc(p)||Fn(p)||ArrayBuffer.isView(p)||p instanceof ImageData)}function Fh(p,l){if(Ef(p))return(Uc(p)||Fn(p))&&l&&l.push(p),ArrayBuffer.isView(p)&&l&&l.push(p.buffer),p instanceof ImageData&&l&&l.push(p.data.buffer),p;if(Array.isArray(p)){const B=[];for(const h of p)B.push(Fh(h,l));return B}if(typeof p!="object")throw new Error("can't serialize object of type "+typeof p);const A=Sf(p);if(!A)throw new Error(`can't serialize object of unregistered class ${p.constructor.name}`);if(!su[A])throw new Error(`${A} is not registered.`);const{klass:b}=su[A],x=b.serialize?b.serialize(p,l):{};if(b.serialize){if(l&&x===l[l.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const B in p){if(!p.hasOwnProperty(B)||su[A].omit.indexOf(B)>=0)continue;const h=p[B];x[B]=su[A].shallow.indexOf(B)>=0?h:Fh(h,l)}p instanceof Error&&(x.message=p.message)}if(x.$name)throw new Error("$name property is reserved for worker serialization logic.");return A!=="Object"&&(x.$name=A),x}function vA(p){if(Ef(p))return p;if(Array.isArray(p))return p.map(vA);if(typeof p!="object")throw new Error("can't deserialize object of type "+typeof p);const l=Sf(p)||"Object";if(!su[l])throw new Error(`can't deserialize unregistered class ${l}`);const{klass:A}=su[l];if(!A)throw new Error(`can't deserialize unregistered class ${l}`);if(A.deserialize)return A.deserialize(p);const b=Object.create(A.prototype);for(const x of Object.keys(p)){if(x==="$name")continue;const B=p[x];b[x]=su[l].shallow.indexOf(x)>=0?B:vA(B)}return b}class Bf{constructor(){this.first=!0}update(l,A){const b=Math.floor(l);return this.first?(this.first=!1,this.lastIntegerZoom=b,this.lastIntegerZoomTime=0,this.lastZoom=l,this.lastFloorZoom=b,!0):(this.lastFloorZoom>b?(this.lastIntegerZoom=b+1,this.lastIntegerZoomTime=A):this.lastFloorZoom<b&&(this.lastIntegerZoom=b,this.lastIntegerZoomTime=A),l!==this.lastZoom&&(this.lastZoom=l,this.lastFloorZoom=b,!0))}}function Kc(p){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(p))}function Ll(p){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(p))}function D0(p){return/\s/u.test(String.fromCodePoint(p))}function Pd(p){for(const l of p)if(Ll(l.codePointAt(0)))return!0;return!1}function rh(p){for(const l of p)if(!ac(l.codePointAt(0)))return!1;return!0}function Ul(p){const l=p.map((A=>{try{return new RegExp(`\\p{sc=${A}}`,"u").source}catch{return null}})).filter((A=>A));return new RegExp(l.join("|"),"u")}const Ld=Ul(["Arab","Dupl","Mong","Ougr","Syrc"]);function ac(p){return!Ld.test(String.fromCodePoint(p))}function el(p){return!(Ll(p)||(l=p,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(l))));var l}const ag=Ul(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function bA(p){return ag.test(String.fromCodePoint(p))}function R0(p,l){return!(!l&&bA(p)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(p)))}function Ru(p){for(const l of p)if(bA(l.codePointAt(0)))return!0;return!1}const tl=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(p){this.pluginStatus=p.pluginStatus,this.pluginURL=p.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(p){if(tl.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=p.applyArabicShaping,this.processBidirectionalText=p.processBidirectionalText,this.processStyledBidirectionalText=p.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(p,l){return a(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(p.pluginStatus!=="loading")return this.setState(p),p;const A=p.pluginURL,b=new Promise((B=>{this.loadScriptResolve=B}));l(A);const x=new Promise((B=>setTimeout((()=>B()),this.TIMEOUT)));if(yield Promise.race([b,x]),this.isParsed()){const B={pluginStatus:"loaded",pluginURL:A};return this.setState(B),B}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${A}`)}))}};class ao{constructor(l,A){this.isSupportedScript=zh,this.zoom=l,A?(this.now=A.now||0,this.fadeDuration=A.fadeDuration||0,this.zoomHistory=A.zoomHistory||new Bf,this.transition=A.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Bf,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const l=this.zoom,A=l-Math.floor(l),b=this.crossFadingFactor();return l>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:A+(1-A)*b}:{fromScale:.5,toScale:1,t:1-(1-b)*A}}}function zh(p){return(function(l,A){for(const b of l)if(!R0(b.codePointAt(0),A))return!1;return!0})(p,tl.getRTLTextPluginStatus()==="loaded")}const Kl="-transition";class oh{constructor(l,A,b){this.property=l,this.value=A,this.expression=(function(x,B,h){if(nc(x))return new th(x,B);if(kh(x)){const g=Td(x,B,h);if(g.result==="error")throw new Error(g.value.map((w=>`${w.key}: ${w.message}`)).join(", "));return g.value}{let g=x;return B.type==="color"&&typeof x=="string"?g=Yi.parse(x):B.type!=="padding"||typeof x!="number"&&!Array.isArray(x)?B.type!=="numberArray"||typeof x!="number"&&!Array.isArray(x)?B.type!=="colorArray"||typeof x!="string"&&!Array.isArray(x)?B.type==="variableAnchorOffsetCollection"&&Array.isArray(x)?g=Bo.parse(x):B.type==="projectionDefinition"&&typeof x=="string"&&(g=es.parse(x)):g=Lo.parse(x):g=io.parse(x):g=Eo.parse(x),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>g}}})(A===void 0?l.specification.default:A,l.specification,b)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(l,A,b){return this.property.possiblyEvaluate(this,l,A,b)}}class Of{constructor(l,A){this.property=l,this.value=new oh(l,void 0,A)}transitioned(l,A){return new sh(this.property,this.value,A,ke({},l.transition,this.transition),l.now)}untransitioned(){return new sh(this.property,this.value,null,{},0)}}class ba{constructor(l,A){this._properties=l,this._values=Object.create(l.defaultTransitionablePropertyValues),this._globalState=A}getValue(l){return ft(this._values[l].value.value)}setValue(l,A){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new Of(this._values[l].property,this._globalState)),this._values[l].value=new oh(this._values[l].property,A===null?void 0:ft(A),this._globalState)}getTransition(l){return ft(this._values[l].transition)}setTransition(l,A){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new Of(this._values[l].property,this._globalState)),this._values[l].transition=ft(A)||void 0}serialize(){const l={};for(const A of Object.keys(this._values)){const b=this.getValue(A);b!==void 0&&(l[A]=b);const x=this.getTransition(A);x!==void 0&&(l[`${A}${Kl}`]=x)}return l}transitioned(l,A){const b=new jh(this._properties);for(const x of Object.keys(this._values))b._values[x]=this._values[x].transitioned(l,A._values[x]);return b}untransitioned(){const l=new jh(this._properties);for(const A of Object.keys(this._values))l._values[A]=this._values[A].untransitioned();return l}}class sh{constructor(l,A,b,x,B){this.property=l,this.value=A,this.begin=B+x.delay||0,this.end=this.begin+x.duration||0,l.specification.transition&&(x.delay||x.duration)&&(this.prior=b)}possiblyEvaluate(l,A,b){const x=l.now||0,B=this.value.possiblyEvaluate(l,A,b),h=this.prior;if(h){if(x>this.end)return this.prior=null,B;if(this.value.isDataDriven())return this.prior=null,B;if(x<this.begin)return h.possiblyEvaluate(l,A,b);{const g=(x-this.begin)/(this.end-this.begin);return this.property.interpolate(h.possiblyEvaluate(l,A,b),B,Te(g))}}return B}}class jh{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitioningPropertyValues)}possiblyEvaluate(l,A,b){const x=new Fl(this._properties);for(const B of Object.keys(this._values))x._values[B]=this._values[B].possiblyEvaluate(l,A,b);return x}hasTransition(){for(const l of Object.keys(this._values))if(this._values[l].prior)return!0;return!1}}class lc{constructor(l,A){this._properties=l,this._values=Object.create(l.defaultPropertyValues),this._globalState=A}hasValue(l){return this._values[l].value!==void 0}getValue(l){return ft(this._values[l].value)}setValue(l,A){this._values[l]=new oh(this._values[l].property,A===null?void 0:ft(A),this._globalState)}serialize(){const l={};for(const A of Object.keys(this._values)){const b=this.getValue(A);b!==void 0&&(l[A]=b)}return l}possiblyEvaluate(l,A,b){const x=new Fl(this._properties);for(const B of Object.keys(this._values))x._values[B]=this._values[B].possiblyEvaluate(l,A,b);return x}}class au{constructor(l,A,b){this.property=l,this.value=A,this.parameters=b}isConstant(){return this.value.kind==="constant"}constantOr(l){return this.value.kind==="constant"?this.value.value:l}evaluate(l,A,b,x){return this.property.evaluate(this.value,this.parameters,l,A,b,x)}}class Fl{constructor(l){this._properties=l,this._values=Object.create(l.defaultPossiblyEvaluatedValues)}get(l){return this._values[l]}}class Vn{constructor(l){this.specification=l}possiblyEvaluate(l,A){if(l.isDataDriven())throw new Error("Value should not be data driven");return l.expression.evaluate(A)}interpolate(l,A,b){const x=Xu[this.specification.type];return x?x(l,A,b):l}}class wi{constructor(l,A){this.specification=l,this.overrides=A}possiblyEvaluate(l,A,b,x){return new au(this,l.expression.kind==="constant"||l.expression.kind==="camera"?{kind:"constant",value:l.expression.evaluate(A,null,{},b,x)}:l.expression,A)}interpolate(l,A,b){if(l.value.kind!=="constant"||A.value.kind!=="constant")return l;if(l.value.value===void 0||A.value.value===void 0)return new au(this,{kind:"constant",value:void 0},l.parameters);const x=Xu[this.specification.type];if(x){const B=x(l.value.value,A.value.value,b);return new au(this,{kind:"constant",value:B},l.parameters)}return l}evaluate(l,A,b,x,B,h){return l.kind==="constant"?l.value:l.evaluate(A,b,x,B,h)}}class sa extends wi{possiblyEvaluate(l,A,b,x){if(l.value===void 0)return new au(this,{kind:"constant",value:void 0},A);if(l.expression.kind==="constant"){const B=l.expression.evaluate(A,null,{},b,x),h=l.property.specification.type==="resolvedImage"&&typeof B!="string"?B.name:B,g=this._calculate(h,h,h,A);return new au(this,{kind:"constant",value:g},A)}if(l.expression.kind==="camera"){const B=this._calculate(l.expression.evaluate({zoom:A.zoom-1}),l.expression.evaluate({zoom:A.zoom}),l.expression.evaluate({zoom:A.zoom+1}),A);return new au(this,{kind:"constant",value:B},A)}return new au(this,l.expression,A)}evaluate(l,A,b,x,B,h){if(l.kind==="source"){const g=l.evaluate(A,b,x,B,h);return this._calculate(g,g,g,A)}return l.kind==="composite"?this._calculate(l.evaluate({zoom:Math.floor(A.zoom)-1},b,x),l.evaluate({zoom:Math.floor(A.zoom)},b,x),l.evaluate({zoom:Math.floor(A.zoom)+1},b,x),A):l.value}_calculate(l,A,b,x){return x.zoom>x.zoomHistory.lastIntegerZoom?{from:l,to:A}:{from:b,to:A}}interpolate(l){return l}}class If{constructor(l){this.specification=l}possiblyEvaluate(l,A,b,x){if(l.value!==void 0){if(l.expression.kind==="constant"){const B=l.expression.evaluate(A,null,{},b,x);return this._calculate(B,B,B,A)}return this._calculate(l.expression.evaluate(new ao(Math.floor(A.zoom-1),A)),l.expression.evaluate(new ao(Math.floor(A.zoom),A)),l.expression.evaluate(new ao(Math.floor(A.zoom+1),A)),A)}}_calculate(l,A,b,x){return x.zoom>x.zoomHistory.lastIntegerZoom?{from:l,to:A}:{from:b,to:A}}interpolate(l){return l}}class nl{constructor(l){this.specification=l}possiblyEvaluate(l,A,b,x){return!!l.expression.evaluate(A,null,{},b,x)}interpolate(){return!1}}class Qo{constructor(l){this.properties=l,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const A in l){const b=l[A];b.specification.overridable&&this.overridableProperties.push(A);const x=this.defaultPropertyValues[A]=new oh(b,void 0,void 0),B=this.defaultTransitionablePropertyValues[A]=new Of(b,void 0);this.defaultTransitioningPropertyValues[A]=B.untransitioned(),this.defaultPossiblyEvaluatedValues[A]=x.possiblyEvaluate({})}}}Gn("DataDrivenProperty",wi),Gn("DataConstantProperty",Vn),Gn("CrossFadedDataDrivenProperty",sa),Gn("CrossFadedProperty",If),Gn("ColorRampProperty",nl);class ka extends rt{constructor(l,A,b){if(super(),this.id=l.id,this.type=l.type,this._globalState=b,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},l.type!=="custom"&&(this.metadata=l.metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,l.type!=="background"&&(this.source=l.source,this.sourceLayer=l["source-layer"],this.filter=l.filter,this._featureFilter=ou(l.filter,b)),A.layout&&(this._unevaluatedLayout=new lc(A.layout,b)),A.paint)){this._transitionablePaint=new ba(A.paint,b);for(const x in l.paint)this.setPaintProperty(x,l.paint[x],{validate:!1});for(const x in l.layout)this.setLayoutProperty(x,l.layout[x],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Fl(A.paint)}}setFilter(l){this.filter=l,this._featureFilter=ou(l,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(l){return l==="visibility"?this.visibility:this._unevaluatedLayout.getValue(l)}getLayoutAffectingGlobalStateRefs(){const l=new Set;if(this._unevaluatedLayout)for(const A in this._unevaluatedLayout._values){const b=this._unevaluatedLayout._values[A];for(const x of b.getGlobalStateRefs())l.add(x)}for(const A of this._featureFilter.getGlobalStateRefs())l.add(A);return l}getPaintAffectingGlobalStateRefs(){var l;const A=new globalThis.Map;if(this._transitionablePaint)for(const b in this._transitionablePaint._values){const x=this._transitionablePaint._values[b].value;for(const B of x.getGlobalStateRefs()){const h=(l=A.get(B))!==null&&l!==void 0?l:[];h.push({name:b,value:x.value}),A.set(B,h)}}return A}setLayoutProperty(l,A,b={}){A!=null&&this._validate(Du,`layers.${this.id}.layout.${l}`,l,A,b)||(l!=="visibility"?this._unevaluatedLayout.setValue(l,A):this.visibility=A)}getPaintProperty(l){return l.endsWith(Kl)?this._transitionablePaint.getTransition(l.slice(0,-11)):this._transitionablePaint.getValue(l)}setPaintProperty(l,A,b={}){if(A!=null&&this._validate(Up,`layers.${this.id}.paint.${l}`,l,A,b))return!1;if(l.endsWith(Kl))return this._transitionablePaint.setTransition(l.slice(0,-11),A||void 0),!1;{const x=this._transitionablePaint._values[l],B=x.property.specification["property-type"]==="cross-faded-data-driven",h=x.value.isDataDriven(),g=x.value;this._transitionablePaint.setValue(l,A),this._handleSpecialPaintPropertyUpdate(l);const w=this._transitionablePaint._values[l].value;return w.isDataDriven()||h||B||this._handleOverridablePaintPropertyUpdate(l,g,w)}}_handleSpecialPaintPropertyUpdate(l){}_handleOverridablePaintPropertyUpdate(l,A,b){return!1}isHidden(l,A=!1){return!!(this.minzoom&&l<(A?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&l>=this.maxzoom)||this.visibility==="none"}updateTransitions(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(l,A){l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,A)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,A)}serialize(){const l={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),Ye(l,((A,b)=>!(A===void 0||b==="layout"&&!Object.keys(A).length||b==="paint"&&!Object.keys(A).length)))}_validate(l,A,b,x,B={}){return(!B||B.validate!==!1)&&yA(this,l.call(sc,{key:A,layerType:this.type,objectKey:b,value:x,styleSpec:Re,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const l in this.paint._values){const A=this.paint.get(l);if(A instanceof au&&JA(A.property.specification)&&(A.value.kind==="source"||A.value.kind==="composite")&&A.value.isStateDependent)return!0}return!1}}let Tf;var ey={get paint(){return Tf=Tf||new Qo({"raster-opacity":new Vn(Re.paint_raster["raster-opacity"]),"raster-hue-rotate":new Vn(Re.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Vn(Re.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Vn(Re.paint_raster["raster-brightness-max"]),"raster-saturation":new Vn(Re.paint_raster["raster-saturation"]),"raster-contrast":new Vn(Re.paint_raster["raster-contrast"]),"raster-resampling":new Vn(Re.paint_raster["raster-resampling"]),"raster-fade-duration":new Vn(Re.paint_raster["raster-fade-duration"])})}};class uc extends ka{constructor(l,A){super(l,ey,A)}}const lu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class hs{constructor(l,A){this._structArray=l,this._pos1=A*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class lo{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(l,A){return l._trim(),A&&(l.isTransferred=!0,A.push(l.arrayBuffer)),{length:l.length,arrayBuffer:l.arrayBuffer}}static deserialize(l){const A=Object.create(this.prototype);return A.arrayBuffer=l.arrayBuffer,A.length=l.length,A.capacity=l.arrayBuffer.byteLength/A.bytesPerElement,A._refreshViews(),A}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(l){this.reserve(l),this.length=l}reserve(l){if(l>this.capacity){this.capacity=Math.max(l,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const A=this.uint8;this._refreshViews(),A&&this.uint8.set(A)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Hr(p,l=1){let A=0,b=0;return{members:p.map((x=>{const B=lu[x.type].BYTES_PER_ELEMENT,h=A=ar(A,Math.max(l,B)),g=x.components||1;return b=Math.max(b,B),A+=B*g,{name:x.name,type:x.type,components:g,offset:h}})),size:ar(A,Math.max(b,l)),alignment:l}}function ar(p,l){return Math.ceil(p/l)*l}class uo extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,A){const b=this.length;return this.resize(b+1),this.emplace(b,l,A)}emplace(l,A,b){const x=2*l;return this.int16[x+0]=A,this.int16[x+1]=b,l}}uo.prototype.bytesPerElement=4,Gn("StructArrayLayout2i4",uo);class ns extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,A,b){const x=this.length;return this.resize(x+1),this.emplace(x,l,A,b)}emplace(l,A,b,x){const B=3*l;return this.int16[B+0]=A,this.int16[B+1]=b,this.int16[B+2]=x,l}}ns.prototype.bytesPerElement=6,Gn("StructArrayLayout3i6",ns);class Ud extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,A,b,x){const B=this.length;return this.resize(B+1),this.emplace(B,l,A,b,x)}emplace(l,A,b,x,B){const h=4*l;return this.int16[h+0]=A,this.int16[h+1]=b,this.int16[h+2]=x,this.int16[h+3]=B,l}}Ud.prototype.bytesPerElement=8,Gn("StructArrayLayout4i8",Ud);class Nh extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,A,b,x,B,h){const g=this.length;return this.resize(g+1),this.emplace(g,l,A,b,x,B,h)}emplace(l,A,b,x,B,h,g){const w=6*l;return this.int16[w+0]=A,this.int16[w+1]=b,this.int16[w+2]=x,this.int16[w+3]=B,this.int16[w+4]=h,this.int16[w+5]=g,l}}Nh.prototype.bytesPerElement=12,Gn("StructArrayLayout2i4i12",Nh);class zl extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,A,b,x,B,h){const g=this.length;return this.resize(g+1),this.emplace(g,l,A,b,x,B,h)}emplace(l,A,b,x,B,h,g){const w=4*l,k=8*l;return this.int16[w+0]=A,this.int16[w+1]=b,this.uint8[k+4]=x,this.uint8[k+5]=B,this.uint8[k+6]=h,this.uint8[k+7]=g,l}}zl.prototype.bytesPerElement=8,Gn("StructArrayLayout2i4ub8",zl);class ah extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,A){const b=this.length;return this.resize(b+1),this.emplace(b,l,A)}emplace(l,A,b){const x=2*l;return this.float32[x+0]=A,this.float32[x+1]=b,l}}ah.prototype.bytesPerElement=8,Gn("StructArrayLayout2f8",ah);class CA extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,A,b,x,B,h,g,w,k,F){const j=this.length;return this.resize(j+1),this.emplace(j,l,A,b,x,B,h,g,w,k,F)}emplace(l,A,b,x,B,h,g,w,k,F,j){const H=10*l;return this.uint16[H+0]=A,this.uint16[H+1]=b,this.uint16[H+2]=x,this.uint16[H+3]=B,this.uint16[H+4]=h,this.uint16[H+5]=g,this.uint16[H+6]=w,this.uint16[H+7]=k,this.uint16[H+8]=F,this.uint16[H+9]=j,l}}CA.prototype.bytesPerElement=20,Gn("StructArrayLayout10ui20",CA);class Fc extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,A,b,x,B,h,g,w){const k=this.length;return this.resize(k+1),this.emplace(k,l,A,b,x,B,h,g,w)}emplace(l,A,b,x,B,h,g,w,k){const F=8*l;return this.uint16[F+0]=A,this.uint16[F+1]=b,this.uint16[F+2]=x,this.uint16[F+3]=B,this.uint16[F+4]=h,this.uint16[F+5]=g,this.uint16[F+6]=w,this.uint16[F+7]=k,l}}Fc.prototype.bytesPerElement=16,Gn("StructArrayLayout8ui16",Fc);class Kp extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,A,b,x,B,h,g,w,k,F,j,H){const ne=this.length;return this.resize(ne+1),this.emplace(ne,l,A,b,x,B,h,g,w,k,F,j,H)}emplace(l,A,b,x,B,h,g,w,k,F,j,H,ne){const ie=12*l;return this.int16[ie+0]=A,this.int16[ie+1]=b,this.int16[ie+2]=x,this.int16[ie+3]=B,this.uint16[ie+4]=h,this.uint16[ie+5]=g,this.uint16[ie+6]=w,this.uint16[ie+7]=k,this.int16[ie+8]=F,this.int16[ie+9]=j,this.int16[ie+10]=H,this.int16[ie+11]=ne,l}}Kp.prototype.bytesPerElement=24,Gn("StructArrayLayout4i4ui4i24",Kp);class is extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,A,b){const x=this.length;return this.resize(x+1),this.emplace(x,l,A,b)}emplace(l,A,b,x){const B=3*l;return this.float32[B+0]=A,this.float32[B+1]=b,this.float32[B+2]=x,l}}is.prototype.bytesPerElement=12,Gn("StructArrayLayout3f12",is);class lh extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(l){const A=this.length;return this.resize(A+1),this.emplace(A,l)}emplace(l,A){return this.uint32[1*l+0]=A,l}}lh.prototype.bytesPerElement=4,Gn("StructArrayLayout1ul4",lh);class _A extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,A,b,x,B,h,g,w,k){const F=this.length;return this.resize(F+1),this.emplace(F,l,A,b,x,B,h,g,w,k)}emplace(l,A,b,x,B,h,g,w,k,F){const j=10*l,H=5*l;return this.int16[j+0]=A,this.int16[j+1]=b,this.int16[j+2]=x,this.int16[j+3]=B,this.int16[j+4]=h,this.int16[j+5]=g,this.uint32[H+3]=w,this.uint16[j+8]=k,this.uint16[j+9]=F,l}}_A.prototype.bytesPerElement=20,Gn("StructArrayLayout6i1ul2ui20",_A);class Fp extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,A,b,x,B,h){const g=this.length;return this.resize(g+1),this.emplace(g,l,A,b,x,B,h)}emplace(l,A,b,x,B,h,g){const w=6*l;return this.int16[w+0]=A,this.int16[w+1]=b,this.int16[w+2]=x,this.int16[w+3]=B,this.int16[w+4]=h,this.int16[w+5]=g,l}}Fp.prototype.bytesPerElement=12,Gn("StructArrayLayout2i2i2i12",Fp);class Gh extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,A,b,x,B){const h=this.length;return this.resize(h+1),this.emplace(h,l,A,b,x,B)}emplace(l,A,b,x,B,h){const g=4*l,w=8*l;return this.float32[g+0]=A,this.float32[g+1]=b,this.float32[g+2]=x,this.int16[w+6]=B,this.int16[w+7]=h,l}}Gh.prototype.bytesPerElement=16,Gn("StructArrayLayout2f1f2i16",Gh);class Kd extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,A,b,x,B,h){const g=this.length;return this.resize(g+1),this.emplace(g,l,A,b,x,B,h)}emplace(l,A,b,x,B,h,g){const w=16*l,k=4*l,F=8*l;return this.uint8[w+0]=A,this.uint8[w+1]=b,this.float32[k+1]=x,this.float32[k+2]=B,this.int16[F+6]=h,this.int16[F+7]=g,l}}Kd.prototype.bytesPerElement=16,Gn("StructArrayLayout2ub2f2i16",Kd);class Fd extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,A,b){const x=this.length;return this.resize(x+1),this.emplace(x,l,A,b)}emplace(l,A,b,x){const B=3*l;return this.uint16[B+0]=A,this.uint16[B+1]=b,this.uint16[B+2]=x,l}}Fd.prototype.bytesPerElement=6,Gn("StructArrayLayout3ui6",Fd);class kf extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,A,b,x,B,h,g,w,k,F,j,H,ne,ie,Ae,de,Me){const We=this.length;return this.resize(We+1),this.emplace(We,l,A,b,x,B,h,g,w,k,F,j,H,ne,ie,Ae,de,Me)}emplace(l,A,b,x,B,h,g,w,k,F,j,H,ne,ie,Ae,de,Me,We){const Ue=24*l,je=12*l,ot=48*l;return this.int16[Ue+0]=A,this.int16[Ue+1]=b,this.uint16[Ue+2]=x,this.uint16[Ue+3]=B,this.uint32[je+2]=h,this.uint32[je+3]=g,this.uint32[je+4]=w,this.uint16[Ue+10]=k,this.uint16[Ue+11]=F,this.uint16[Ue+12]=j,this.float32[je+7]=H,this.float32[je+8]=ne,this.uint8[ot+36]=ie,this.uint8[ot+37]=Ae,this.uint8[ot+38]=de,this.uint32[je+10]=Me,this.int16[Ue+22]=We,l}}kf.prototype.bytesPerElement=48,Gn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",kf);class Df extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,A,b,x,B,h,g,w,k,F,j,H,ne,ie,Ae,de,Me,We,Ue,je,ot,nt,Mt,Vt,Jt,on,kn,An){const Cn=this.length;return this.resize(Cn+1),this.emplace(Cn,l,A,b,x,B,h,g,w,k,F,j,H,ne,ie,Ae,de,Me,We,Ue,je,ot,nt,Mt,Vt,Jt,on,kn,An)}emplace(l,A,b,x,B,h,g,w,k,F,j,H,ne,ie,Ae,de,Me,We,Ue,je,ot,nt,Mt,Vt,Jt,on,kn,An,Cn){const en=32*l,xi=16*l;return this.int16[en+0]=A,this.int16[en+1]=b,this.int16[en+2]=x,this.int16[en+3]=B,this.int16[en+4]=h,this.int16[en+5]=g,this.int16[en+6]=w,this.int16[en+7]=k,this.uint16[en+8]=F,this.uint16[en+9]=j,this.uint16[en+10]=H,this.uint16[en+11]=ne,this.uint16[en+12]=ie,this.uint16[en+13]=Ae,this.uint16[en+14]=de,this.uint16[en+15]=Me,this.uint16[en+16]=We,this.uint16[en+17]=Ue,this.uint16[en+18]=je,this.uint16[en+19]=ot,this.uint16[en+20]=nt,this.uint16[en+21]=Mt,this.uint16[en+22]=Vt,this.uint32[xi+12]=Jt,this.float32[xi+13]=on,this.float32[xi+14]=kn,this.uint16[en+30]=An,this.uint16[en+31]=Cn,l}}Df.prototype.bytesPerElement=64,Gn("StructArrayLayout8i15ui1ul2f2ui64",Df);class Da extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l){const A=this.length;return this.resize(A+1),this.emplace(A,l)}emplace(l,A){return this.float32[1*l+0]=A,l}}Da.prototype.bytesPerElement=4,Gn("StructArrayLayout1f4",Da);class T extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,A,b){const x=this.length;return this.resize(x+1),this.emplace(x,l,A,b)}emplace(l,A,b,x){const B=3*l;return this.uint16[6*l+0]=A,this.float32[B+1]=b,this.float32[B+2]=x,l}}T.prototype.bytesPerElement=12,Gn("StructArrayLayout1ui2f12",T);class u extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,A,b){const x=this.length;return this.resize(x+1),this.emplace(x,l,A,b)}emplace(l,A,b,x){const B=4*l;return this.uint32[2*l+0]=A,this.uint16[B+2]=b,this.uint16[B+3]=x,l}}u.prototype.bytesPerElement=8,Gn("StructArrayLayout1ul2ui8",u);class m extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,A){const b=this.length;return this.resize(b+1),this.emplace(b,l,A)}emplace(l,A,b){const x=2*l;return this.uint16[x+0]=A,this.uint16[x+1]=b,l}}m.prototype.bytesPerElement=4,Gn("StructArrayLayout2ui4",m);class M extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l){const A=this.length;return this.resize(A+1),this.emplace(A,l)}emplace(l,A){return this.uint16[1*l+0]=A,l}}M.prototype.bytesPerElement=2,Gn("StructArrayLayout1ui2",M);class O extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,A,b,x){const B=this.length;return this.resize(B+1),this.emplace(B,l,A,b,x)}emplace(l,A,b,x,B){const h=4*l;return this.float32[h+0]=A,this.float32[h+1]=b,this.float32[h+2]=x,this.float32[h+3]=B,l}}O.prototype.bytesPerElement=16,Gn("StructArrayLayout4f16",O);class D extends hs{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new c(this.anchorPointX,this.anchorPointY)}}D.prototype.size=20;class U extends _A{get(l){return new D(this,l)}}Gn("CollisionBoxArray",U);class G extends hs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(l){this._structArray.uint8[this._pos1+37]=l}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(l){this._structArray.uint8[this._pos1+38]=l}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(l){this._structArray.uint32[this._pos4+10]=l}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}G.prototype.size=48;class q extends kf{get(l){return new G(this,l)}}Gn("PlacedSymbolArray",q);class oe extends hs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(l){this._structArray.uint32[this._pos4+12]=l}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}oe.prototype.size=64;class le extends Df{get(l){return new oe(this,l)}}Gn("SymbolInstanceArray",le);class me extends Da{getoffsetX(l){return this.float32[1*l+0]}}Gn("GlyphOffsetArray",me);class pe extends ns{getx(l){return this.int16[3*l+0]}gety(l){return this.int16[3*l+1]}gettileUnitDistanceFromAnchor(l){return this.int16[3*l+2]}}Gn("SymbolLineVertexArray",pe);class xe extends hs{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}xe.prototype.size=12;class Le extends T{get(l){return new xe(this,l)}}Gn("TextAnchorOffsetArray",Le);class Ve extends hs{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ve.prototype.size=8;class He extends u{get(l){return new Ve(this,l)}}Gn("FeatureIndexArray",He);class Ze extends uo{}class et extends uo{}class lt extends uo{}class Je extends Nh{}class At extends zl{}class pt extends ah{}class it extends CA{}class Ct extends Fc{}class Nt extends Kp{}class Kt extends is{}class Ft extends lh{}class jt extends Fp{}class pn extends Kd{}class Sn extends Fd{}class rn extends m{}const $n=Hr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ni}=$n;class Fi{constructor(l=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=l}prepareSegment(l,A,b,x){const B=this.segments[this.segments.length-1];return l>Fi.MAX_VERTEX_ARRAY_LENGTH&&gt(`Max vertices per segment is ${Fi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${l}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Fi.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!B||B.vertexLength+l>Fi.MAX_VERTEX_ARRAY_LENGTH||B.sortKey!==x?this.createNewSegment(A,b,x):B}createNewSegment(l,A,b){const x={vertexOffset:l.length,primitiveOffset:A.length,vertexLength:0,primitiveLength:0,vaos:{}};return b!==void 0&&(x.sortKey=b),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(x),x}getOrCreateLatestSegment(l,A,b){return this.prepareSegment(0,l,A,b)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const l of this.segments)for(const A in l.vaos)l.vaos[A].destroy()}static simpleSegment(l,A,b,x){return new Fi([{vertexOffset:l,primitiveOffset:A,vertexLength:b,primitiveLength:x,vaos:{},sortKey:0}])}}function qo(p,l){return 256*(p=Et(Math.floor(p),0,255))+Et(Math.floor(l),0,255)}Fi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Gn("SegmentVector",Fi);const Ko=Hr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ds=Hr([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var bo,Ys,rs,Es={exports:{}},Bs={exports:{}},Gr={exports:{}},fs=(function(){if(rs)return Es.exports;rs=1;var p=(bo||(bo=1,Bs.exports=function(A,b){var x,B,h,g,w,k,F,j;for(B=A.length-(x=3&A.length),h=b,w=3432918353,k=461845907,j=0;j<B;)F=255&A.charCodeAt(j)|(255&A.charCodeAt(++j))<<8|(255&A.charCodeAt(++j))<<16|(255&A.charCodeAt(++j))<<24,++j,h=27492+(65535&(g=5*(65535&(h=(h^=F=(65535&(F=(F=(65535&F)*w+(((F>>>16)*w&65535)<<16)&4294967295)<<15|F>>>17))*k+(((F>>>16)*k&65535)<<16)&4294967295)<<13|h>>>19))+((5*(h>>>16)&65535)<<16)&4294967295))+((58964+(g>>>16)&65535)<<16);switch(F=0,x){case 3:F^=(255&A.charCodeAt(j+2))<<16;case 2:F^=(255&A.charCodeAt(j+1))<<8;case 1:h^=F=(65535&(F=(F=(65535&(F^=255&A.charCodeAt(j)))*w+(((F>>>16)*w&65535)<<16)&4294967295)<<15|F>>>17))*k+(((F>>>16)*k&65535)<<16)&4294967295}return h^=A.length,h=2246822507*(65535&(h^=h>>>16))+((2246822507*(h>>>16)&65535)<<16)&4294967295,h=3266489909*(65535&(h^=h>>>13))+((3266489909*(h>>>16)&65535)<<16)&4294967295,(h^=h>>>16)>>>0}),Bs.exports),l=(Ys||(Ys=1,Gr.exports=function(A,b){for(var x,B=A.length,h=b^B,g=0;B>=4;)x=1540483477*(65535&(x=255&A.charCodeAt(g)|(255&A.charCodeAt(++g))<<8|(255&A.charCodeAt(++g))<<16|(255&A.charCodeAt(++g))<<24))+((1540483477*(x>>>16)&65535)<<16),h=1540483477*(65535&h)+((1540483477*(h>>>16)&65535)<<16)^(x=1540483477*(65535&(x^=x>>>24))+((1540483477*(x>>>16)&65535)<<16)),B-=4,++g;switch(B){case 3:h^=(255&A.charCodeAt(g+2))<<16;case 2:h^=(255&A.charCodeAt(g+1))<<8;case 1:h=1540483477*(65535&(h^=255&A.charCodeAt(g)))+((1540483477*(h>>>16)&65535)<<16)}return h=1540483477*(65535&(h^=h>>>13))+((1540483477*(h>>>16)&65535)<<16),(h^=h>>>15)>>>0}),Gr.exports);return Es.exports=p,Es.exports.murmur3=p,Es.exports.murmur2=l,Es.exports})(),xA=f(fs);class zc{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(l,A,b,x){this.ids.push(jc(l)),this.positions.push(A,b,x)}getPositions(l){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const A=jc(l);let b=0,x=this.ids.length-1;for(;b<x;){const h=b+x>>1;this.ids[h]>=A?x=h:b=h+1}const B=[];for(;this.ids[b]===A;)B.push({index:this.positions[3*b],start:this.positions[3*b+1],end:this.positions[3*b+2]}),b++;return B}static serialize(l,A){const b=new Float64Array(l.ids),x=new Uint32Array(l.positions);return jl(b,x,0,b.length-1),A&&A.push(b.buffer,x.buffer),{ids:b,positions:x}}static deserialize(l){const A=new zc;return A.ids=l.ids,A.positions=l.positions,A.indexed=!0,A}}function jc(p){const l=+p;return!isNaN(l)&&l<=Number.MAX_SAFE_INTEGER?l:xA(String(p))}function jl(p,l,A,b){for(;A<b;){const x=p[A+b>>1];let B=A-1,h=b+1;for(;;){do B++;while(p[B]<x);do h--;while(p[h]>x);if(B>=h)break;uh(p,B,h),uh(l,3*B,3*h),uh(l,3*B+1,3*h+1),uh(l,3*B+2,3*h+2)}h-A<b-h?(jl(p,l,A,h),A=h+1):(jl(p,l,h+1,b),b=h)}}function uh(p,l,A){const b=p[l];p[l]=p[A],p[A]=b}Gn("FeaturePositionMap",zc);class uu{constructor(l,A){this.gl=l.gl,this.location=A}}class Nc extends uu{constructor(l,A){super(l,A),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))}}class Nl extends uu{constructor(l,A){super(l,A),this.current=[0,0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))}}class Gl extends uu{constructor(l,A){super(l,A),this.current=Yi.transparent}set(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))}}const Gc=new Float32Array(16);function zd(p){return[qo(255*p.r,255*p.g),qo(255*p.b,255*p.a)]}class ps{constructor(l,A,b){this.value=l,this.uniformNames=A.map((x=>`u_${x}`)),this.type=b}setUniform(l,A,b){l.set(b.constantOr(this.value))}getBinding(l,A,b){return this.type==="color"?new Gl(l,A):new Nc(l,A)}}class To{constructor(l,A){this.uniformNames=A.map((b=>`u_${b}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(l,A){this.pixelRatioFrom=A.pixelRatio,this.pixelRatioTo=l.pixelRatio,this.patternFrom=A.tlbr,this.patternTo=l.tlbr}setConstantDashPositions(l,A){this.dashTo=[0,l.y,l.height,l.width],this.dashFrom=[0,A.y,A.height,A.width]}setUniform(l,A,b,x){let B=null;x==="u_pattern_to"?B=this.patternTo:x==="u_pattern_from"?B=this.patternFrom:x==="u_dasharray_to"?B=this.dashTo:x==="u_dasharray_from"?B=this.dashFrom:x==="u_pixel_ratio_to"?B=this.pixelRatioTo:x==="u_pixel_ratio_from"&&(B=this.pixelRatioFrom),B!==null&&l.set(B)}getBinding(l,A,b){return b.substr(0,9)==="u_pattern"||b.substr(0,12)==="u_dasharray_"?new Nl(l,A):new Nc(l,A)}}class ms{constructor(l,A,b,x){this.expression=l,this.type=b,this.maxValue=0,this.paintVertexAttributes=A.map((B=>({name:`a_${B}`,type:"Float32",components:b==="color"?2:1,offset:0}))),this.paintVertexArray=new x}populatePaintArray(l,A,b){const x=this.paintVertexArray.length,B=this.expression.evaluate(new ao(0,b),A,{},b.canonical,[],b.formattedSection);this.paintVertexArray.resize(l),this._setPaintValue(x,l,B)}updatePaintArray(l,A,b,x,B){const h=this.expression.evaluate(new ao(0,B),b,x);this._setPaintValue(l,A,h)}_setPaintValue(l,A,b){if(this.type==="color"){const x=zd(b);for(let B=l;B<A;B++)this.paintVertexArray.emplace(B,x[0],x[1])}else{for(let x=l;x<A;x++)this.paintVertexArray.emplace(x,b);this.maxValue=Math.max(this.maxValue,Math.abs(b))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class co{constructor(l,A,b,x,B,h){this.expression=l,this.uniformNames=A.map((g=>`u_${g}_t`)),this.type=b,this.useIntegerZoom=x,this.zoom=B,this.maxValue=0,this.paintVertexAttributes=A.map((g=>({name:`a_${g}`,type:"Float32",components:b==="color"?4:2,offset:0}))),this.paintVertexArray=new h}populatePaintArray(l,A,b){const x=this.expression.evaluate(new ao(this.zoom,b),A,{},b.canonical,[],b.formattedSection),B=this.expression.evaluate(new ao(this.zoom+1,b),A,{},b.canonical,[],b.formattedSection),h=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(h,l,x,B)}updatePaintArray(l,A,b,x,B){const h=this.expression.evaluate(new ao(this.zoom,B),b,x),g=this.expression.evaluate(new ao(this.zoom+1,B),b,x);this._setPaintValue(l,A,h,g)}_setPaintValue(l,A,b,x){if(this.type==="color"){const B=zd(b),h=zd(x);for(let g=l;g<A;g++)this.paintVertexArray.emplace(g,B[0],B[1],h[0],h[1])}else{for(let B=l;B<A;B++)this.paintVertexArray.emplace(B,b,x);this.maxValue=Math.max(this.maxValue,Math.abs(b),Math.abs(x))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(l,A){const b=this.useIntegerZoom?Math.floor(A.zoom):A.zoom,x=Et(this.expression.interpolationFactor(b,this.zoom,this.zoom+1),0,1);l.set(x)}getBinding(l,A,b){return new Nc(l,A)}}class cc{constructor(l,A,b,x,B,h){this.expression=l,this.type=A,this.useIntegerZoom=b,this.zoom=x,this.layerId=h,this.zoomInPaintVertexArray=new B,this.zoomOutPaintVertexArray=new B}populatePaintArray(l,A,b){const x=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(l),this.zoomOutPaintVertexArray.resize(l),this._setPaintValues(x,l,this.getPositionIds(A),b)}updatePaintArray(l,A,b,x,B){this._setPaintValues(l,A,this.getPositionIds(b),B)}_setPaintValues(l,A,b,x){const B=this.getPositions(x);if(!B||!b)return;const h=B[b.min],g=B[b.mid],w=B[b.max];if(h&&g&&w)for(let k=l;k<A;k++)this.emplace(this.zoomInPaintVertexArray,k,g,h),this.emplace(this.zoomOutPaintVertexArray,k,g,w)}upload(l){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const A=this.getVertexAttributes();this.zoomInPaintVertexBuffer=l.createVertexBuffer(this.zoomInPaintVertexArray,A,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=l.createVertexBuffer(this.zoomOutPaintVertexArray,A,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class zp extends cc{getPositions(l){return l.imagePositions}getPositionIds(l){return l.patterns&&l.patterns[this.layerId]}getVertexAttributes(){return Ko.members}emplace(l,A,b,x){l.emplace(A,b.tlbr[0],b.tlbr[1],b.tlbr[2],b.tlbr[3],x.tlbr[0],x.tlbr[1],x.tlbr[2],x.tlbr[3],b.pixelRatio,x.pixelRatio)}}class ch extends cc{getPositions(l){return l.dashPositions}getPositionIds(l){return l.dashes&&l.dashes[this.layerId]}getVertexAttributes(){return ds.members}emplace(l,A,b,x){l.emplace(A,0,b.y,b.height,b.width,0,x.y,x.height,x.width)}}class P0{constructor(l,A,b){this.binders={},this._buffers=[];const x=[];for(const B in l.paint._values){if(!b(B))continue;const h=l.paint.get(B);if(!(h instanceof au&&JA(h.property.specification)))continue;const g=jp(B,l.type),w=h.value,k=h.property.specification.type,F=h.property.useIntegerZoom,j=h.property.specification["property-type"],H=j==="cross-faded"||j==="cross-faded-data-driven";if(w.kind==="constant")this.binders[B]=H?new To(w.value,g):new ps(w.value,g,k),x.push(`/u_${B}`);else if(w.kind==="source"||H){const ne=Wc(B,k,"source");this.binders[B]=H?B==="line-dasharray"?new ch(w,k,F,A,ne,l.id):new zp(w,k,F,A,ne,l.id):new ms(w,g,k,ne),x.push(`/a_${B}`)}else{const ne=Wc(B,k,"composite");this.binders[B]=new co(w,g,k,F,A,ne),x.push(`/z_${B}`)}}this.cacheKey=x.sort().join("")}getMaxValue(l){const A=this.binders[l];return A instanceof ms||A instanceof co?A.maxValue:0}populatePaintArrays(l,A,b){for(const x in this.binders){const B=this.binders[x];(B instanceof ms||B instanceof co||B instanceof cc)&&B.populatePaintArray(l,A,b)}}setConstantPatternPositions(l,A){for(const b in this.binders){const x=this.binders[b];x instanceof To&&x.setConstantPatternPositions(l,A)}}setConstantDashPositions(l,A){for(const b in this.binders){const x=this.binders[b];x instanceof To&&x.setConstantDashPositions(l,A)}}updatePaintArrays(l,A,b,x,B){let h=!1;for(const g in l){const w=A.getPositions(g);for(const k of w){const F=b.feature(k.index);for(const j in this.binders){const H=this.binders[j];if((H instanceof ms||H instanceof co||H instanceof cc)&&H.expression.isStateDependent===!0){const ne=x.paint.get(j);H.expression=ne.value,H.updatePaintArray(k.start,k.end,F,l[g],B),h=!0}}}}return h}defines(){const l=[];for(const A in this.binders){const b=this.binders[A];(b instanceof ps||b instanceof To)&&l.push(...b.uniformNames.map((x=>`#define HAS_UNIFORM_${x}`)))}return l}getBinderAttributes(){const l=[];for(const A in this.binders){const b=this.binders[A];if(b instanceof ms||b instanceof co)for(let x=0;x<b.paintVertexAttributes.length;x++)l.push(b.paintVertexAttributes[x].name);else if(b instanceof cc){const x=b.getVertexAttributes();for(const B of x)l.push(B.name)}}return l}getBinderUniforms(){const l=[];for(const A in this.binders){const b=this.binders[A];if(b instanceof ps||b instanceof To||b instanceof co)for(const x of b.uniformNames)l.push(x)}return l}getPaintVertexBuffers(){return this._buffers}getUniforms(l,A){const b=[];for(const x in this.binders){const B=this.binders[x];if(B instanceof ps||B instanceof To||B instanceof co){for(const h of B.uniformNames)if(A[h]){const g=B.getBinding(l,A[h],h);b.push({name:h,property:x,binding:g})}}}return b}setUniforms(l,A,b,x){for(const{name:B,property:h,binding:g}of A)this.binders[h].setUniform(g,x,b.get(h),B)}updatePaintBuffers(l){this._buffers=[];for(const A in this.binders){const b=this.binders[A];if(l&&b instanceof cc){const x=l.fromScale===2?b.zoomInPaintVertexBuffer:b.zoomOutPaintVertexBuffer;x&&this._buffers.push(x)}else(b instanceof ms||b instanceof co)&&b.paintVertexBuffer&&this._buffers.push(b.paintVertexBuffer)}}upload(l){for(const A in this.binders){const b=this.binders[A];(b instanceof ms||b instanceof co||b instanceof cc)&&b.upload(l)}this.updatePaintBuffers()}destroy(){for(const l in this.binders){const A=this.binders[l];(A instanceof ms||A instanceof co||A instanceof cc)&&A.destroy()}}}class MA{constructor(l,A,b=()=>!0){this.programConfigurations={};for(const x of l)this.programConfigurations[x.id]=new P0(x,A,b);this.needsUpload=!1,this._featureMap=new zc,this._bufferOffset=0}populatePaintArrays(l,A,b,x){for(const B in this.programConfigurations)this.programConfigurations[B].populatePaintArrays(l,A,x);A.id!==void 0&&this._featureMap.add(A.id,b,this._bufferOffset,l),this._bufferOffset=l,this.needsUpload=!0}updatePaintArrays(l,A,b,x){for(const B of b)this.needsUpload=this.programConfigurations[B.id].updatePaintArrays(l,this._featureMap,A,B,x)||this.needsUpload}get(l){return this.programConfigurations[l]}upload(l){if(this.needsUpload){for(const A in this.programConfigurations)this.programConfigurations[A].upload(l);this.needsUpload=!1}}destroy(){for(const l in this.programConfigurations)this.programConfigurations[l].destroy()}}function jp(p,l){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[p]||[p.replace(`${l}-`,"").replace(/-/g,"_")]}function Wc(p,l,A){const b={color:{source:ah,composite:O},number:{source:Da,composite:ah}},x=(function(B){return{"line-pattern":{source:it,composite:it},"fill-pattern":{source:it,composite:it},"fill-extrusion-pattern":{source:it,composite:it},"line-dasharray":{source:Ct,composite:Ct}}[B]})(p);return x&&x[A]||b[l][A]}Gn("ConstantBinder",ps),Gn("CrossFadedConstantBinder",To),Gn("SourceExpressionBinder",ms),Gn("CrossFadedPatternBinder",zp),Gn("CrossFadedDasharrayBinder",ch),Gn("CompositeExpressionBinder",co),Gn("ProgramConfiguration",P0,{omit:["_buffers"]}),Gn("ProgramConfigurationSet",MA);const Wh=Math.pow(2,14)-1,lg=-Wh-1;function wA(p){const l=ht/p.extent,A=p.loadGeometry();for(let b=0;b<A.length;b++){const x=A[b];for(let B=0;B<x.length;B++){const h=x[B],g=Math.round(h.x*l),w=Math.round(h.y*l);h.x=Et(g,lg,Wh),h.y=Et(w,lg,Wh),(g<h.x||g>h.x+1||w<h.y||w>h.y+1)&&gt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return A}function js(p,l){return{type:p.type,id:p.id,properties:p.properties,geometry:l?wA(p):[]}}const Np=-32768;function Gp(p,l,A,b,x){p.emplaceBack(Np+8*l+b,Np+8*A+x)}class ty{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((A=>A.id)),this.index=l.index,this.hasDependencies=!1,this.layoutVertexArray=new et,this.indexArray=new Sn,this.segments=new Fi,this.programConfigurations=new MA(l.layers,l.zoom),this.stateDependentLayerIds=this.layers.filter((A=>A.isStateDependent())).map((A=>A.id))}populate(l,A,b){const x=this.layers[0],B=[];let h=null,g=!1,w=x.type==="heatmap";if(x.type==="circle"){const F=x;h=F.layout.get("circle-sort-key"),g=!h.isConstant(),w=w||F.paint.get("circle-pitch-alignment")==="map"}const k=w?A.subdivisionGranularity.circle:1;for(const{feature:F,id:j,index:H,sourceLayerIndex:ne}of l){const ie=this.layers[0]._featureFilter.needGeometry,Ae=js(F,ie);if(!this.layers[0]._featureFilter.filter(new ao(this.zoom),Ae,b))continue;const de=g?h.evaluate(Ae,{},b):void 0,Me={id:j,properties:F.properties,type:F.type,sourceLayerIndex:ne,index:H,geometry:ie?Ae.geometry:wA(F),patterns:{},sortKey:de};B.push(Me)}g&&B.sort(((F,j)=>F.sortKey-j.sortKey));for(const F of B){const{geometry:j,index:H,sourceLayerIndex:ne}=F,ie=l[H].feature;this.addFeature(F,j,H,b,k),A.featureIndex.insert(ie,j,H,ne,this.index)}}update(l,A,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,A,this.stateDependentLayers,{imagePositions:b})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Ni),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(l,A,b,x,B=1){let h;switch(B){case 1:h=[0,7];break;case 3:h=[0,2,5,7];break;case 5:h=[0,1,3,4,6,7];break;case 7:h=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${B}; valid values are 1, 3, 5, 7.`)}const g=h.length;for(const w of A)for(const k of w){const F=k.x,j=k.y;if(F<0||F>=ht||j<0||j>=ht)continue;const H=this.segments.prepareSegment(g*g,this.layoutVertexArray,this.indexArray,l.sortKey),ne=H.vertexLength;for(let ie=0;ie<g;ie++)for(let Ae=0;Ae<g;Ae++)Gp(this.layoutVertexArray,F,j,h[Ae],h[ie]);for(let ie=0;ie<g-1;ie++)for(let Ae=0;Ae<g-1;Ae++){const de=ne+ie*g+Ae,Me=ne+(ie+1)*g+Ae;this.indexArray.emplaceBack(de,Me+1,de+1),this.indexArray.emplaceBack(de,Me,Me+1)}H.vertexLength+=g*g,H.primitiveLength+=(g-1)*(g-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,b,{imagePositions:{},canonical:x})}}function ug(p,l){for(let A=0;A<p.length;A++)if(ki(l,p[A]))return!0;for(let A=0;A<l.length;A++)if(ki(p,l[A]))return!0;return!!cg(p,l)}function L0(p,l,A){return!!ki(p,l)||!!Wp(l,p,A)}function ny(p,l){if(p.length===1)return aa(l,p[0]);for(let A=0;A<l.length;A++){const b=l[A];for(let x=0;x<b.length;x++)if(ki(p,b[x]))return!0}for(let A=0;A<p.length;A++)if(aa(l,p[A]))return!0;for(let A=0;A<l.length;A++)if(cg(p,l[A]))return!0;return!1}function Qh(p,l,A){if(p.length>1){if(cg(p,l))return!0;for(let b=0;b<l.length;b++)if(Wp(l[b],p,A))return!0}for(let b=0;b<p.length;b++)if(Wp(p[b],l,A))return!0;return!1}function cg(p,l){if(p.length===0||l.length===0)return!1;for(let A=0;A<p.length-1;A++){const b=p[A],x=p[A+1];for(let B=0;B<l.length-1;B++)if(Pv(b,x,l[B],l[B+1]))return!0}return!1}function Pv(p,l,A,b){return Lt(p,A,b)!==Lt(l,A,b)&&Lt(p,l,A)!==Lt(p,l,b)}function Wp(p,l,A){const b=A*A;if(l.length===1)return p.distSqr(l[0])<b;for(let x=1;x<l.length;x++)if(Vs(p,l[x-1],l[x])<b)return!0;return!1}function Vs(p,l,A){const b=l.distSqr(A);if(b===0)return p.distSqr(l);const x=((p.x-l.x)*(A.x-l.x)+(p.y-l.y)*(A.y-l.y))/b;return p.distSqr(x<0?l:x>1?A:A.sub(l)._mult(x)._add(l))}function aa(p,l){let A,b,x,B=!1;for(let h=0;h<p.length;h++){A=p[h];for(let g=0,w=A.length-1;g<A.length;w=g++)b=A[g],x=A[w],b.y>l.y!=x.y>l.y&&l.x<(x.x-b.x)*(l.y-b.y)/(x.y-b.y)+b.x&&(B=!B)}return B}function ki(p,l){let A=!1;for(let b=0,x=p.length-1;b<p.length;x=b++){const B=p[b],h=p[x];B.y>l.y!=h.y>l.y&&l.x<(h.x-B.x)*(l.y-B.y)/(h.y-B.y)+B.x&&(A=!A)}return A}function U0(p,l,A){const b=A[0],x=A[2];if(p.x<b.x&&l.x<b.x||p.x>x.x&&l.x>x.x||p.y<b.y&&l.y<b.y||p.y>x.y&&l.y>x.y)return!1;const B=Lt(p,l,A[0]);return B!==Lt(p,l,A[1])||B!==Lt(p,l,A[2])||B!==Lt(p,l,A[3])}function jd(p,l,A){const b=l.paint.get(p).value;return b.kind==="constant"?b.value:A.programConfigurations.get(l.id).getMaxValue(p)}function Ah(p){return Math.sqrt(p[0]*p[0]+p[1]*p[1])}function Rf(p,l,A,b,x){if(!l[0]&&!l[1])return p;const B=c.convert(l)._mult(x);A==="viewport"&&B._rotate(-b);const h=[];for(let g=0;g<p.length;g++)h.push(p[g].sub(B));return h}function iy({queryGeometry:p,size:l},A){return L0(p,A,l)}function K0({queryGeometry:p,size:l,transform:A,unwrappedTileID:b,getElevation:x},B){return L0(p,B,l*(A.projectTileCoordinates(B.x,B.y,b,x).signedDistanceFromCamera/A.cameraToCenterDistance))}function Wl({queryGeometry:p,size:l,transform:A,unwrappedTileID:b,getElevation:x},B){const h=A.projectTileCoordinates(B.x,B.y,b,x).signedDistanceFromCamera,g=l*(A.cameraToCenterDistance/h);return L0(p,Ag(B,A,b,x),g)}function N2({queryGeometry:p,size:l,transform:A,unwrappedTileID:b,getElevation:x},B){return L0(p,Ag(B,A,b,x),l)}function F0({queryGeometry:p,size:l,transform:A,unwrappedTileID:b,getElevation:x,pitchAlignment:B="map",pitchScale:h="map"},g){const w=B==="map"?h==="map"?iy:K0:h==="map"?Wl:N2,k={queryGeometry:p,size:l,transform:A,unwrappedTileID:b,getElevation:x};for(const F of g)for(const j of F)if(w(k,j))return!0;return!1}function Ag(p,l,A,b){const x=l.projectTileCoordinates(p.x,p.y,A,b).point;return new c((.5*x.x+.5)*l.width,(.5*-x.y+.5)*l.height)}let Lv,ry;Gn("CircleBucket",ty,{omit:["layers"]});var GC={get paint(){return ry=ry||new Qo({"circle-radius":new wi(Re.paint_circle["circle-radius"]),"circle-color":new wi(Re.paint_circle["circle-color"]),"circle-blur":new wi(Re.paint_circle["circle-blur"]),"circle-opacity":new wi(Re.paint_circle["circle-opacity"]),"circle-translate":new Vn(Re.paint_circle["circle-translate"]),"circle-translate-anchor":new Vn(Re.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Vn(Re.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Vn(Re.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new wi(Re.paint_circle["circle-stroke-width"]),"circle-stroke-color":new wi(Re.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new wi(Re.paint_circle["circle-stroke-opacity"])})},get layout(){return Lv=Lv||new Qo({"circle-sort-key":new wi(Re.layout_circle["circle-sort-key"])})}};class Uv extends ka{constructor(l,A){super(l,GC,A)}createBucket(l){return new ty(l)}queryRadius(l){const A=l;return jd("circle-radius",this,A)+jd("circle-stroke-width",this,A)+Ah(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:l,feature:A,featureState:b,geometry:x,transform:B,pixelsToTileUnits:h,unwrappedTileID:g,getElevation:w}){const k=Rf(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-B.bearingInRadians,h),F=this.paint.get("circle-radius").evaluate(A,b)+this.paint.get("circle-stroke-width").evaluate(A,b),j=this.paint.get("circle-pitch-scale"),H=this.paint.get("circle-pitch-alignment");let ne,ie;return H==="map"?(ne=k,ie=F*h):(ne=(function(Ae,de,Me,We){return Ae.map((Ue=>Ag(Ue,de,Me,We)))})(k,B,g,w),ie=F),F0({queryGeometry:ne,size:ie,transform:B,unwrappedTileID:g,getElevation:w,pitchAlignment:H,pitchScale:j},x)}}class oy extends ty{}let SA;Gn("HeatmapBucket",oy,{omit:["layers"]});var cu={get paint(){return SA=SA||new Qo({"heatmap-radius":new wi(Re.paint_heatmap["heatmap-radius"]),"heatmap-weight":new wi(Re.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Vn(Re.paint_heatmap["heatmap-intensity"]),"heatmap-color":new nl(Re.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Vn(Re.paint_heatmap["heatmap-opacity"])})}};function Qp(p,{width:l,height:A},b,x){if(x){if(x instanceof Uint8ClampedArray)x=new Uint8Array(x.buffer);else if(x.length!==l*A*b)throw new RangeError(`mismatched image size. expected: ${x.length} but got: ${l*A*b}`)}else x=new Uint8Array(l*A*b);return p.width=l,p.height=A,p.data=x,p}function z0(p,{width:l,height:A},b){if(l===p.width&&A===p.height)return;const x=Qp({},{width:l,height:A},b);qp(p,x,{x:0,y:0},{x:0,y:0},{width:Math.min(p.width,l),height:Math.min(p.height,A)},b),p.width=l,p.height=A,p.data=x.data}function qp(p,l,A,b,x,B){if(x.width===0||x.height===0)return l;if(x.width>p.width||x.height>p.height||A.x>p.width-x.width||A.y>p.height-x.height)throw new RangeError("out of range source coordinates for image copy");if(x.width>l.width||x.height>l.height||b.x>l.width-x.width||b.y>l.height-x.height)throw new RangeError("out of range destination coordinates for image copy");const h=p.data,g=l.data;if(h===g)throw new Error("srcData equals dstData, so image is already copied");for(let w=0;w<x.height;w++){const k=((A.y+w)*p.width+A.x)*B,F=((b.y+w)*l.width+b.x)*B;for(let j=0;j<x.width*B;j++)g[F+j]=h[k+j]}return l}class hg{constructor(l,A){Qp(this,l,1,A)}resize(l){z0(this,l,1)}clone(){return new hg({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,A,b,x,B){qp(l,A,b,x,B,1)}}class Ql{constructor(l,A){Qp(this,l,4,A)}resize(l){z0(this,l,4)}replace(l,A){A?this.data.set(l):this.data=l instanceof Uint8ClampedArray?new Uint8Array(l.buffer):l}clone(){return new Ql({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,A,b,x,B){qp(l,A,b,x,B,4)}setPixel(l,A,b){const x=4*(l*this.width+A);this.data[x+0]=Math.round(255*b.r/b.a),this.data[x+1]=Math.round(255*b.g/b.a),this.data[x+2]=Math.round(255*b.b/b.a),this.data[x+3]=Math.round(255*b.a)}}function Yp(p){const l={},A=p.resolution||256,b=p.clips?p.clips.length:1,x=p.image||new Ql({width:A,height:b});if(Math.log(A)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${A}`);const B=(h,g,w)=>{l[p.evaluationKey]=w;const k=p.expression.evaluate(l);x.setPixel(h/4/A,g/4,k)};if(p.clips)for(let h=0,g=0;h<b;++h,g+=4*A)for(let w=0,k=0;w<A;w++,k+=4){const F=w/(A-1),{start:j,end:H}=p.clips[h];B(g,k,j*(1-F)+H*F)}else for(let h=0,g=0;h<A;h++,g+=4)B(0,g,h/(A-1));return x}Gn("AlphaImage",hg),Gn("RGBAImage",Ql);const EA="big-fb";class sy extends ka{createBucket(l){return new oy(l)}constructor(l,A){super(l,cu,A),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Yp({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(EA)&&this.heatmapFbos.delete(EA)}queryRadius(l){return jd("heatmap-radius",this,l)}queryIntersectsFeature({queryGeometry:l,feature:A,featureState:b,geometry:x,transform:B,pixelsToTileUnits:h,unwrappedTileID:g,getElevation:w}){return F0({queryGeometry:l,size:this.paint.get("heatmap-radius").evaluate(A,b)*h,transform:B,unwrappedTileID:g,getElevation:w},x)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let WC;var QC={get paint(){return WC=WC||new Qo({"hillshade-illumination-direction":new Vn(Re.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Vn(Re.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Vn(Re.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Vn(Re.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Vn(Re.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Vn(Re.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Vn(Re.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Vn(Re.paint_hillshade["hillshade-method"])})}};class Nd extends ka{constructor(l,A){super(l,QC,A),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let l=this.paint.get("hillshade-illumination-direction").values,A=this.paint.get("hillshade-illumination-altitude").values,b=this.paint.get("hillshade-highlight-color").values,x=this.paint.get("hillshade-shadow-color").values;const B=Math.max(l.length,A.length,b.length,x.length);l=l.concat(Array(B-l.length).fill(l.at(-1))),A=A.concat(Array(B-A.length).fill(A.at(-1))),b=b.concat(Array(B-b.length).fill(b.at(-1))),x=x.concat(Array(B-x.length).fill(x.at(-1)));const h=A.map(qn);return{directionRadians:l.map(qn),altitudeRadians:h,shadowColor:x,highlightColor:b}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let ay;var Kv={get paint(){return ay=ay||new Qo({"color-relief-opacity":new Vn(Re["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new nl(Re["paint_color-relief"]["color-relief-color"])})}};class Vp{constructor(l,A,b,x){this.context=l,this.format=b,this.texture=l.gl.createTexture(),this.update(A,x)}update(l,A,b){const{width:x,height:B}=l,h=!(this.size&&this.size[0]===x&&this.size[1]===B||b),{context:g}=this,{gl:w}=g;if(this.useMipmap=!!(A&&A.useMipmap),w.bindTexture(w.TEXTURE_2D,this.texture),g.pixelStoreUnpackFlipY.set(!1),g.pixelStoreUnpack.set(1),g.pixelStoreUnpackPremultiplyAlpha.set(this.format===w.RGBA&&(!A||A.premultiply!==!1)),h)this.size=[x,B],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||Fn(l)?w.texImage2D(w.TEXTURE_2D,0,this.format,this.format,w.UNSIGNED_BYTE,l):w.texImage2D(w.TEXTURE_2D,0,this.format,x,B,0,this.format,w.UNSIGNED_BYTE,l.data);else{const{x:k,y:F}=b||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||Fn(l)?w.texSubImage2D(w.TEXTURE_2D,0,k,F,w.RGBA,w.UNSIGNED_BYTE,l):w.texSubImage2D(w.TEXTURE_2D,0,k,F,x,B,w.RGBA,w.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&w.generateMipmap(w.TEXTURE_2D),g.pixelStoreUnpackFlipY.setDefault(),g.pixelStoreUnpack.setDefault(),g.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(l,A,b){const{context:x}=this,{gl:B}=x;B.bindTexture(B.TEXTURE_2D,this.texture),b!==B.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(b=B.LINEAR),l!==this.filter&&(B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,l),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,b||l),this.filter=l),A!==this.wrap&&(B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_S,A),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_T,A),this.wrap=A)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}class dg{constructor(l,A,b,x=1,B=1,h=1,g=0){if(this.uid=l,A.height!==A.width)throw new RangeError("DEM tiles must be square");if(b&&!["mapbox","terrarium","custom"].includes(b))return void gt(`"${b}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=A.height;const w=this.dim=A.height-2;switch(this.data=new Uint32Array(A.data.buffer),b){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=x,this.greenFactor=B,this.blueFactor=h,this.baseShift=g;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let k=0;k<w;k++)this.data[this._idx(-1,k)]=this.data[this._idx(0,k)],this.data[this._idx(w,k)]=this.data[this._idx(w-1,k)],this.data[this._idx(k,-1)]=this.data[this._idx(k,0)],this.data[this._idx(k,w)]=this.data[this._idx(k,w-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(w,-1)]=this.data[this._idx(w-1,0)],this.data[this._idx(-1,w)]=this.data[this._idx(0,w-1)],this.data[this._idx(w,w)]=this.data[this._idx(w-1,w-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let k=0;k<w;k++)for(let F=0;F<w;F++){const j=this.get(k,F);j>this.max&&(this.max=j),j<this.min&&(this.min=j)}}get(l,A){const b=new Uint8Array(this.data.buffer),x=4*this._idx(l,A);return this.unpack(b[x],b[x+1],b[x+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(l,A){if(l<-1||l>=this.dim+1||A<-1||A>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(A+1)*this.stride+(l+1)}unpack(l,A,b){return l*this.redFactor+A*this.greenFactor+b*this.blueFactor-this.baseShift}pack(l){return os(l,this.getUnpackVector())}getPixels(){return new Ql({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(l,A,b){if(this.dim!==l.dim)throw new Error("dem dimension mismatch");let x=A*this.dim,B=A*this.dim+this.dim,h=b*this.dim,g=b*this.dim+this.dim;switch(A){case-1:x=B-1;break;case 1:B=x+1}switch(b){case-1:h=g-1;break;case 1:g=h+1}const w=-A*this.dim,k=-b*this.dim;for(let F=h;F<g;F++)for(let j=x;j<B;j++)this.data[this._idx(j,F)]=l.data[this._idx(j+w,F+k)]}}function os(p,l){const A=l[0],b=l[1],x=l[2],B=l[3],h=Math.min(A,b,x),g=Math.round((p+B)/h);return{r:Math.floor(g*h/A)%256,g:Math.floor(g*h/b)%256,b:Math.floor(g*h/x)%256}}Gn("DEMData",dg);class qC extends ka{constructor(l,A){super(l,Kv,A)}_createColorRamp(l){const A={elevationStops:[],colorStops:[]},b=this._transitionablePaint._values["color-relief-color"].value.expression;if(b instanceof Rh&&b._styleExpression.expression instanceof Io){this.colorRampExpression=b;const h=b._styleExpression.expression;A.elevationStops=h.labels,A.colorStops=[];for(const g of A.elevationStops)A.colorStops.push(h.evaluate({globals:{elevation:g}}))}if(A.elevationStops.length<1&&(A.elevationStops=[0],A.colorStops=[Yi.transparent]),A.elevationStops.length<2&&(A.elevationStops.push(A.elevationStops[0]+1),A.colorStops.push(A.colorStops[0])),A.elevationStops.length<=l)return A;const x={elevationStops:[],colorStops:[]},B=(A.elevationStops.length-1)/(l-1);for(let h=0;h<A.elevationStops.length-.5;h+=B)x.elevationStops.push(A.elevationStops[Math.round(h)]),x.colorStops.push(A.colorStops[Math.round(h)]);return gt(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${l}, provided: ${A.elevationStops.length}`),x}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(l,A,b){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const x=this._createColorRamp(A),B=new Ql({width:x.colorStops.length,height:1}),h=new Ql({width:x.colorStops.length,height:1});for(let g=0;g<x.elevationStops.length;g++){const w=os(x.elevationStops[g],b);h.setPixel(0,g,new Yi(w.r/255,w.g/255,w.b/255,1)),B.setPixel(0,g,x.colorStops[g])}return this.colorRampTextures={elevationTexture:new Vp(l,h,l.gl.RGBA),colorTexture:new Vp(l,B,l.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const j0=Hr([{name:"a_pos",components:2,type:"Int16"}],4),{members:ly}=j0;function Gd(p,l,A){const b=A.patternDependencies;let x=!1;for(const B of l){const h=B.paint.get(`${p}-pattern`);h.isConstant()||(x=!0);const g=h.constantOr(null);g&&(x=!0,b[g.to]=!0,b[g.from]=!0)}return x}function hh(p,l,A,b,x){const{zoom:B}=b,h=x.patternDependencies;for(const g of l){const w=g.paint.get(`${p}-pattern`).value;if(w.kind!=="constant"){let k=w.evaluate({zoom:B-1},A,{},x.availableImages),F=w.evaluate({zoom:B},A,{},x.availableImages),j=w.evaluate({zoom:B+1},A,{},x.availableImages);k=k&&k.name?k.name:k,F=F&&F.name?F.name:F,j=j&&j.name?j.name:j,h[k]=!0,h[F]=!0,h[j]=!0,A.patterns[g.id]={min:k,mid:F,max:j}}}return A}function fg(p,l,A,b,x){let B;if(x===(function(h,g,w,k){let F=0;for(let j=g,H=w-k;j<w;j+=k)F+=(h[H]-h[j])*(h[j+1]+h[H+1]),H=j;return F})(p,l,A,b)>0)for(let h=l;h<A;h+=b)B=jv(h/b|0,p[h],p[h+1],B);else for(let h=A-b;h>=l;h-=b)B=jv(h/b|0,p[h],p[h+1],B);return B&&pg(B,B.next)&&(Hp(B),B=B.next),B}function Wd(p,l){if(!p)return p;l||(l=p);let A,b=p;do if(A=!1,b.steiner||!pg(b,b.next)&&wr(b.prev,b,b.next)!==0)b=b.next;else{if(Hp(b),b=l=b.prev,b===b.next)break;A=!0}while(A||b!==l);return l}function pl(p,l,A,b,x,B,h){if(!p)return;!h&&B&&(function(w,k,F,j){let H=w;do H.z===0&&(H.z=Ay(H.x,H.y,k,F,j)),H.prevZ=H.prev,H.nextZ=H.next,H=H.next;while(H!==w);H.prevZ.nextZ=null,H.prevZ=null,(function(ne){let ie,Ae=1;do{let de,Me=ne;ne=null;let We=null;for(ie=0;Me;){ie++;let Ue=Me,je=0;for(let nt=0;nt<Ae&&(je++,Ue=Ue.nextZ,Ue);nt++);let ot=Ae;for(;je>0||ot>0&&Ue;)je!==0&&(ot===0||!Ue||Me.z<=Ue.z)?(de=Me,Me=Me.nextZ,je--):(de=Ue,Ue=Ue.nextZ,ot--),We?We.nextZ=de:ne=de,de.prevZ=We,We=de;Me=Ue}We.nextZ=null,Ae*=2}while(ie>1)})(H)})(p,b,x,B);let g=p;for(;p.prev!==p.next;){const w=p.prev,k=p.next;if(B?YC(p,b,x,B):Au(p))l.push(w.i,p.i,k.i),Hp(p),p=k.next,g=k.next;else if((p=k)===g){h?h===1?pl(p=uy(Wd(p),l),l,A,b,x,B,2):h===2&&VC(p,l,A,b,x,B):pl(Wd(p),l,A,b,x,B,1);break}}}function Au(p){const l=p.prev,A=p,b=p.next;if(wr(l,A,b)>=0)return!1;const x=l.x,B=A.x,h=b.x,g=l.y,w=A.y,k=b.y,F=Math.min(x,B,h),j=Math.min(g,w,k),H=Math.max(x,B,h),ne=Math.max(g,w,k);let ie=b.next;for(;ie!==l;){if(ie.x>=F&&ie.x<=H&&ie.y>=j&&ie.y<=ne&&$p(x,g,B,w,h,k,ie.x,ie.y)&&wr(ie.prev,ie,ie.next)>=0)return!1;ie=ie.next}return!0}function YC(p,l,A,b){const x=p.prev,B=p,h=p.next;if(wr(x,B,h)>=0)return!1;const g=x.x,w=B.x,k=h.x,F=x.y,j=B.y,H=h.y,ne=Math.min(g,w,k),ie=Math.min(F,j,H),Ae=Math.max(g,w,k),de=Math.max(F,j,H),Me=Ay(ne,ie,l,A,b),We=Ay(Ae,de,l,A,b);let Ue=p.prevZ,je=p.nextZ;for(;Ue&&Ue.z>=Me&&je&&je.z<=We;){if(Ue.x>=ne&&Ue.x<=Ae&&Ue.y>=ie&&Ue.y<=de&&Ue!==x&&Ue!==h&&$p(g,F,w,j,k,H,Ue.x,Ue.y)&&wr(Ue.prev,Ue,Ue.next)>=0||(Ue=Ue.prevZ,je.x>=ne&&je.x<=Ae&&je.y>=ie&&je.y<=de&&je!==x&&je!==h&&$p(g,F,w,j,k,H,je.x,je.y)&&wr(je.prev,je,je.next)>=0))return!1;je=je.nextZ}for(;Ue&&Ue.z>=Me;){if(Ue.x>=ne&&Ue.x<=Ae&&Ue.y>=ie&&Ue.y<=de&&Ue!==x&&Ue!==h&&$p(g,F,w,j,k,H,Ue.x,Ue.y)&&wr(Ue.prev,Ue,Ue.next)>=0)return!1;Ue=Ue.prevZ}for(;je&&je.z<=We;){if(je.x>=ne&&je.x<=Ae&&je.y>=ie&&je.y<=de&&je!==x&&je!==h&&$p(g,F,w,j,k,H,je.x,je.y)&&wr(je.prev,je,je.next)>=0)return!1;je=je.nextZ}return!0}function uy(p,l){let A=p;do{const b=A.prev,x=A.next.next;!pg(b,x)&&hy(b,A,A.next,x)&&ml(b,x)&&ml(x,b)&&(l.push(b.i,A.i,x.i),Hp(A),Hp(A.next),A=p=x),A=A.next}while(A!==p);return Wd(A)}function VC(p,l,A,b,x,B){let h=p;do{let g=h.next.next;for(;g!==h.prev;){if(h.i!==g.i&&$C(h,g)){let w=qh(h,g);return h=Wd(h,h.next),w=Wd(w,w.next),pl(h,l,A,b,x,B,0),void pl(w,l,A,b,x,B,0)}g=g.next}h=h.next}while(h!==p)}function Fv(p,l){let A=p.x-l.x;return A===0&&(A=p.y-l.y,A===0)&&(A=(p.next.y-p.y)/(p.next.x-p.x)-(l.next.y-l.y)/(l.next.x-l.x)),A}function zv(p,l){const A=(function(x,B){let h=B;const g=x.x,w=x.y;let k,F=-1/0;if(pg(x,h))return h;do{if(pg(x,h.next))return h.next;if(w<=h.y&&w>=h.next.y&&h.next.y!==h.y){const Ae=h.x+(w-h.y)*(h.next.x-h.x)/(h.next.y-h.y);if(Ae<=g&&Ae>F&&(F=Ae,k=h.x<h.next.x?h:h.next,Ae===g))return k}h=h.next}while(h!==B);if(!k)return null;const j=k,H=k.x,ne=k.y;let ie=1/0;h=k;do{if(g>=h.x&&h.x>=H&&g!==h.x&&Ra(w<ne?g:F,w,H,ne,w<ne?F:g,w,h.x,h.y)){const Ae=Math.abs(w-h.y)/(g-h.x);ml(h,x)&&(Ae<ie||Ae===ie&&(h.x>k.x||h.x===k.x&&cy(k,h)))&&(k=h,ie=Ae)}h=h.next}while(h!==j);return k})(p,l);if(!A)return l;const b=qh(A,p);return Wd(b,b.next),Wd(A,A.next)}function cy(p,l){return wr(p.prev,p,l.prev)<0&&wr(l.next,p,p.next)<0}function Ay(p,l,A,b,x){return(p=1431655765&((p=858993459&((p=252645135&((p=16711935&((p=(p-A)*x|0)|p<<8))|p<<4))|p<<2))|p<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-b)*x|0)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function Qd(p){let l=p,A=p;do(l.x<A.x||l.x===A.x&&l.y<A.y)&&(A=l),l=l.next;while(l!==p);return A}function Ra(p,l,A,b,x,B,h,g){return(x-h)*(l-g)>=(p-h)*(B-g)&&(p-h)*(b-g)>=(A-h)*(l-g)&&(A-h)*(B-g)>=(x-h)*(b-g)}function $p(p,l,A,b,x,B,h,g){return!(p===h&&l===g)&&Ra(p,l,A,b,x,B,h,g)}function $C(p,l){return p.next.i!==l.i&&p.prev.i!==l.i&&!(function(A,b){let x=A;do{if(x.i!==A.i&&x.next.i!==A.i&&x.i!==b.i&&x.next.i!==b.i&&hy(x,x.next,A,b))return!0;x=x.next}while(x!==A);return!1})(p,l)&&(ml(p,l)&&ml(l,p)&&(function(A,b){let x=A,B=!1;const h=(A.x+b.x)/2,g=(A.y+b.y)/2;do x.y>g!=x.next.y>g&&x.next.y!==x.y&&h<(x.next.x-x.x)*(g-x.y)/(x.next.y-x.y)+x.x&&(B=!B),x=x.next;while(x!==A);return B})(p,l)&&(wr(p.prev,p,l.prev)||wr(p,l.prev,l))||pg(p,l)&&wr(p.prev,p,p.next)>0&&wr(l.prev,l,l.next)>0)}function wr(p,l,A){return(l.y-p.y)*(A.x-l.x)-(l.x-p.x)*(A.y-l.y)}function pg(p,l){return p.x===l.x&&p.y===l.y}function hy(p,l,A,b){const x=ss(wr(p,l,A)),B=ss(wr(p,l,b)),h=ss(wr(A,b,p)),g=ss(wr(A,b,l));return x!==B&&h!==g||!(x!==0||!mg(p,A,l))||!(B!==0||!mg(p,b,l))||!(h!==0||!mg(A,p,b))||!(g!==0||!mg(A,l,b))}function mg(p,l,A){return l.x<=Math.max(p.x,A.x)&&l.x>=Math.min(p.x,A.x)&&l.y<=Math.max(p.y,A.y)&&l.y>=Math.min(p.y,A.y)}function ss(p){return p>0?1:p<0?-1:0}function ml(p,l){return wr(p.prev,p,p.next)<0?wr(p,l,p.next)>=0&&wr(p,p.prev,l)>=0:wr(p,l,p.prev)<0||wr(p,p.next,l)<0}function qh(p,l){const A=dy(p.i,p.x,p.y),b=dy(l.i,l.x,l.y),x=p.next,B=l.prev;return p.next=l,l.prev=p,A.next=x,x.prev=A,b.next=A,A.prev=b,B.next=b,b.prev=B,b}function jv(p,l,A,b){const x=dy(p,l,A);return b?(x.next=b.next,x.prev=b,b.next.prev=x,b.next=x):(x.prev=x,x.next=x),x}function Hp(p){p.next.prev=p.prev,p.prev.next=p.next,p.prevZ&&(p.prevZ.nextZ=p.nextZ),p.nextZ&&(p.nextZ.prevZ=p.prevZ)}function dy(p,l,A){return{i:p,x:l,y:A,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class gg{constructor(l,A){if(A>l)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=l,this._minGranularity=A}getGranularityForZoomLevel(l){return Math.max(Math.floor(this._baseZoomGranularity/(1<<l)),this._minGranularity,1)}}class Zp{constructor(l){this.fill=l.fill,this.line=l.line,this.tile=l.tile,this.stencil=l.stencil,this.circle=l.circle}}Zp.noSubdivision=new Zp({fill:new gg(0,0),line:new gg(0,0),tile:new gg(0,0),stencil:new gg(0,0),circle:1}),Gn("SubdivisionGranularityExpression",gg),Gn("SubdivisionGranularitySetting",Zp);const il=-32768,Pu=32767;class HC{constructor(l,A){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=l,this._granularityCellSize=ht/l,this._canonical=A}_getKey(l,A){return(l+=32768)<<16|A+32768}_vertexToIndex(l,A){if(l<-32768||A<-32768||l>32767||A>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const b=0|Math.round(l),x=0|Math.round(A),B=this._getKey(b,x);if(this._vertexDictionary.has(B))return this._vertexDictionary.get(B);const h=this._vertexBuffer.length/2;return this._vertexDictionary.set(B,h),this._vertexBuffer.push(b,x),h}_subdivideTrianglesScanline(l){if(this._granularity<2)return(function(x,B){const h=[];for(let g=0;g<B.length;g+=3){const w=B[g],k=B[g+1],F=B[g+2],j=x[2*w],H=x[2*w+1];(x[2*k]-j)*(x[2*F+1]-H)-(x[2*k+1]-H)*(x[2*F]-j)>0?(h.push(w),h.push(F),h.push(k)):(h.push(w),h.push(k),h.push(F))}return h})(this._vertexBuffer,l);const A=[],b=l.length;for(let x=0;x<b;x+=3){const B=[l[x+0],l[x+1],l[x+2]],h=[this._vertexBuffer[2*l[x+0]+0],this._vertexBuffer[2*l[x+0]+1],this._vertexBuffer[2*l[x+1]+0],this._vertexBuffer[2*l[x+1]+1],this._vertexBuffer[2*l[x+2]+0],this._vertexBuffer[2*l[x+2]+1]];let g=1/0,w=1/0,k=-1/0,F=-1/0;for(let Ae=0;Ae<3;Ae++){const de=h[2*Ae],Me=h[2*Ae+1];g=Math.min(g,de),k=Math.max(k,de),w=Math.min(w,Me),F=Math.max(F,Me)}if(g===k||w===F)continue;const j=Math.floor(g/this._granularityCellSize),H=Math.ceil(k/this._granularityCellSize),ne=Math.floor(w/this._granularityCellSize),ie=Math.ceil(F/this._granularityCellSize);if(j!==H||ne!==ie)for(let Ae=ne;Ae<ie;Ae++){const de=this._scanlineGenerateVertexRingForCellRow(Ae,h,B);qd(this._vertexBuffer,de,A)}else A.push(...B)}return A}_scanlineGenerateVertexRingForCellRow(l,A,b){const x=l*this._granularityCellSize,B=x+this._granularityCellSize,h=[];for(let g=0;g<3;g++){const w=A[2*g],k=A[2*g+1],F=A[2*(g+1)%6],j=A[(2*(g+1)+1)%6],H=A[2*(g+2)%6],ne=A[(2*(g+2)+1)%6],ie=F-w,Ae=j-k,de=ie===0,Me=Ae===0,We=(x-k)/Ae,Ue=(B-k)/Ae,je=Math.min(We,Ue),ot=Math.max(We,Ue);if(!Me&&(je>=1||ot<=0)||Me&&(k<x||k>B)){j>=x&&j<=B&&h.push(b[(g+1)%3]);continue}!Me&&je>0&&h.push(this._vertexToIndex(w+ie*je,k+Ae*je));const nt=w+ie*Math.max(je,0),Mt=w+ie*Math.min(ot,1);de||this._generateIntraEdgeVertices(h,w,k,F,j,nt,Mt),!Me&&ot<1&&h.push(this._vertexToIndex(w+ie*ot,k+Ae*ot)),(Me||j>=x&&j<=B)&&h.push(b[(g+1)%3]),!Me&&(j<=x||j>=B)&&this._generateInterEdgeVertices(h,w,k,F,j,H,ne,Mt,x,B)}return h}_generateIntraEdgeVertices(l,A,b,x,B,h,g){const w=x-A,k=B-b,F=k===0,j=F?Math.min(A,x):Math.min(h,g),H=F?Math.max(A,x):Math.max(h,g),ne=Math.floor(j/this._granularityCellSize)+1,ie=Math.ceil(H/this._granularityCellSize)-1;if(F?A<x:h<g)for(let Ae=ne;Ae<=ie;Ae++){const de=Ae*this._granularityCellSize;l.push(this._vertexToIndex(de,b+k*(de-A)/w))}else for(let Ae=ie;Ae>=ne;Ae--){const de=Ae*this._granularityCellSize;l.push(this._vertexToIndex(de,b+k*(de-A)/w))}}_generateInterEdgeVertices(l,A,b,x,B,h,g,w,k,F){const j=B-b,H=h-x,ne=g-B,ie=(k-B)/ne,Ae=(F-B)/ne,de=Math.min(ie,Ae),Me=Math.max(ie,Ae),We=x+H*de;let Ue=Math.floor(Math.min(We,w)/this._granularityCellSize)+1,je=Math.ceil(Math.max(We,w)/this._granularityCellSize)-1,ot=w<We;const nt=ne===0;if(nt&&(g===k||g===F))return;if(nt||de>=1||Me<=0){const Vt=b-g,Jt=h+(A-h)*Math.min((k-g)/Vt,(F-g)/Vt);Ue=Math.floor(Math.min(Jt,w)/this._granularityCellSize)+1,je=Math.ceil(Math.max(Jt,w)/this._granularityCellSize)-1,ot=w<Jt}const Mt=j>0?F:k;if(ot)for(let Vt=Ue;Vt<=je;Vt++)l.push(this._vertexToIndex(Vt*this._granularityCellSize,Mt));else for(let Vt=je;Vt>=Ue;Vt--)l.push(this._vertexToIndex(Vt*this._granularityCellSize,Mt))}_generateOutline(l){const A=[];for(const b of l){const x=Pf(b,this._granularity,!0),B=this._pointArrayToIndices(x),h=[];for(let g=1;g<B.length;g++)h.push(B[g-1]),h.push(B[g]);A.push(h)}return A}_handlePoles(l){let A=!1,b=!1;this._canonical&&(this._canonical.y===0&&(A=!0),this._canonical.y===(1<<this._canonical.z)-1&&(b=!0)),(A||b)&&this._fillPoles(l,A,b)}_ensureNoPoleVertices(){const l=this._vertexBuffer;for(let A=0;A<l.length;A+=2){const b=l[A+1];b===il&&(l[A+1]=-32767),b===Pu&&(l[A+1]=32766)}}_generatePoleQuad(l,A,b,x,B,h){x>B!=(h===il)?(l.push(A),l.push(b),l.push(this._vertexToIndex(x,h)),l.push(b),l.push(this._vertexToIndex(B,h)),l.push(this._vertexToIndex(x,h))):(l.push(b),l.push(A),l.push(this._vertexToIndex(x,h)),l.push(this._vertexToIndex(B,h)),l.push(b),l.push(this._vertexToIndex(x,h)))}_fillPoles(l,A,b){const x=this._vertexBuffer,B=ht,h=l.length;for(let g=2;g<h;g+=3){const w=l[g-2],k=l[g-1],F=l[g],j=x[2*w],H=x[2*w+1],ne=x[2*k],ie=x[2*k+1],Ae=x[2*F],de=x[2*F+1];A&&(H===0&&ie===0&&this._generatePoleQuad(l,w,k,j,ne,il),ie===0&&de===0&&this._generatePoleQuad(l,k,F,ne,Ae,il),de===0&&H===0&&this._generatePoleQuad(l,F,w,Ae,j,il)),b&&(H===B&&ie===B&&this._generatePoleQuad(l,w,k,j,ne,Pu),ie===B&&de===B&&this._generatePoleQuad(l,k,F,ne,Ae,Pu),de===B&&H===B&&this._generatePoleQuad(l,F,w,Ae,j,Pu))}}_initializeVertices(l){for(let A=0;A<l.length;A+=2)this._vertexToIndex(l[A],l[A+1])}subdividePolygonInternal(l,A){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:b,holeIndices:x}=(function(g){const w=[],k=[];for(const F of g)if(F.length!==0){F!==g[0]&&w.push(k.length/2);for(let j=0;j<F.length;j++)k.push(F[j].x),k.push(F[j].y)}return{flattened:k,holeIndices:w}})(l);let B;this._initializeVertices(b);try{const g=(function(k,F,j=2){const H=F&&F.length,ne=H?F[0]*j:k.length;let ie=fg(k,0,ne,j,!0);const Ae=[];if(!ie||ie.next===ie.prev)return Ae;let de,Me,We;if(H&&(ie=(function(Ue,je,ot,nt){const Mt=[];for(let Vt=0,Jt=je.length;Vt<Jt;Vt++){const on=fg(Ue,je[Vt]*nt,Vt<Jt-1?je[Vt+1]*nt:Ue.length,nt,!1);on===on.next&&(on.steiner=!0),Mt.push(Qd(on))}Mt.sort(Fv);for(let Vt=0;Vt<Mt.length;Vt++)ot=zv(Mt[Vt],ot);return ot})(k,F,ie,j)),k.length>80*j){de=k[0],Me=k[1];let Ue=de,je=Me;for(let ot=j;ot<ne;ot+=j){const nt=k[ot],Mt=k[ot+1];nt<de&&(de=nt),Mt<Me&&(Me=Mt),nt>Ue&&(Ue=nt),Mt>je&&(je=Mt)}We=Math.max(Ue-de,je-Me),We=We!==0?32767/We:0}return pl(ie,Ae,j,de,Me,We,0),Ae})(b,x),w=this._convertIndices(b,g);B=this._subdivideTrianglesScanline(w)}catch(g){console.error(g)}let h=[];return A&&(h=this._generateOutline(l)),this._ensureNoPoleVertices(),this._handlePoles(B),{verticesFlattened:this._vertexBuffer,indicesTriangles:B,indicesLineList:h}}_convertIndices(l,A){const b=[];for(let x=0;x<A.length;x++)b.push(this._vertexToIndex(l[2*A[x]],l[2*A[x]+1]));return b}_pointArrayToIndices(l){const A=[];for(let b=0;b<l.length;b++){const x=l[b];A.push(this._vertexToIndex(x.x,x.y))}return A}}function Os(p,l,A,b=!0){return new HC(A,l).subdividePolygonInternal(p,b)}function Pf(p,l,A=!1){if(!p||p.length<1)return[];if(p.length<2)return[];const b=p[0],x=p[p.length-1],B=A&&(b.x!==x.x||b.y!==x.y);if(l<2)return B?[...p,p[0]]:[...p];const h=Math.floor(ht/l),g=[];g.push(new c(p[0].x,p[0].y));const w=p.length,k=B?w:w-1;for(let F=0;F<k;F++){const j=p[F],H=F<w-1?p[F+1]:p[0],ne=j.x,ie=j.y,Ae=H.x,de=H.y,Me=ne!==Ae,We=ie!==de;if(!Me&&!We)continue;const Ue=Ae-ne,je=de-ie,ot=Math.abs(Ue),nt=Math.abs(je);let Mt=ne,Vt=ie;for(;;){const on=Ue>0?(Math.floor(Mt/h)+1)*h:(Math.ceil(Mt/h)-1)*h,kn=je>0?(Math.floor(Vt/h)+1)*h:(Math.ceil(Vt/h)-1)*h,An=Math.abs(Mt-on),Cn=Math.abs(Vt-kn),en=Math.abs(Mt-Ae),xi=Math.abs(Vt-de),Ei=Me?An/ot:Number.POSITIVE_INFINITY,Ri=We?Cn/nt:Number.POSITIVE_INFINITY;if((en<=An||!Me)&&(xi<=Cn||!We))break;if(Ei<Ri&&Me||!We){Mt=on,Vt+=je*Ei;const oi=new c(Mt,Math.round(Vt));g[g.length-1].x===oi.x&&g[g.length-1].y===oi.y||g.push(oi)}else{Mt+=Ue*Ri,Vt=kn;const oi=new c(Math.round(Mt),Vt);g[g.length-1].x===oi.x&&g[g.length-1].y===oi.y||g.push(oi)}}const Jt=new c(Ae,de);g[g.length-1].x===Jt.x&&g[g.length-1].y===Jt.y||g.push(Jt)}return g}function qd(p,l,A){if(l.length===0)throw new Error("Subdivision vertex ring is empty.");let b=0,x=p[2*l[0]];for(let w=1;w<l.length;w++){const k=p[2*l[w]];k<x&&(x=k,b=w)}const B=l.length;let h=b,g=(h+1)%B;for(;;){const w=h-1>=0?h-1:B-1,k=(g+1)%B,F=p[2*l[w]],j=p[2*l[k]],H=p[2*l[h]],ne=p[2*l[h]+1],ie=p[2*l[g]+1];let Ae=!1;if(F<j)Ae=!0;else if(F>j)Ae=!1;else{const de=ie-ne,Me=-(p[2*l[g]]-H),We=ne<ie?1:-1;((F-H)*de+(p[2*l[w]+1]-ne)*Me)*We>((j-H)*de+(p[2*l[k]+1]-ne)*Me)*We&&(Ae=!0)}if(Ae){const de=l[w],Me=l[h],We=l[g];de!==Me&&de!==We&&Me!==We&&A.push(We,Me,de),h--,h<0&&(h=B-1)}else{const de=l[k],Me=l[h],We=l[g];de!==Me&&de!==We&&Me!==We&&A.push(We,Me,de),g++,g>=B&&(g=0)}if(w===k)break}}function Lf(p,l,A,b,x,B,h,g,w){const k=x.length/2,F=h&&g&&w;if(k<Fi.MAX_VERTEX_ARRAY_LENGTH){const j=l.prepareSegment(k,A,b),H=j.vertexLength;for(let Ae=0;Ae<B.length;Ae+=3)b.emplaceBack(H+B[Ae],H+B[Ae+1],H+B[Ae+2]);let ne,ie;j.vertexLength+=k,j.primitiveLength+=B.length/3,F&&(ie=h.prepareSegment(k,A,g),ne=ie.vertexLength,ie.vertexLength+=k);for(let Ae=0;Ae<x.length;Ae+=2)p(x[Ae],x[Ae+1]);if(F)for(let Ae=0;Ae<w.length;Ae++){const de=w[Ae];for(let Me=1;Me<de.length;Me+=2)g.emplaceBack(ne+de[Me-1],ne+de[Me]);ie.primitiveLength+=de.length/2}}else(function(j,H,ne,ie,Ae,de){const Me=[];for(let nt=0;nt<ie.length/2;nt++)Me.push(-1);const We={count:0};let Ue=0,je=j.getOrCreateLatestSegment(H,ne),ot=je.vertexLength;for(let nt=2;nt<Ae.length;nt+=3){const Mt=Ae[nt-2],Vt=Ae[nt-1],Jt=Ae[nt];let on=Me[Mt]<Ue,kn=Me[Vt]<Ue,An=Me[Jt]<Ue;je.vertexLength+((on?1:0)+(kn?1:0)+(An?1:0))>Fi.MAX_VERTEX_ARRAY_LENGTH&&(je=j.createNewSegment(H,ne),Ue=We.count,on=!0,kn=!0,An=!0,ot=0);const Cn=Ac(Me,ie,de,We,Mt,on,je),en=Ac(Me,ie,de,We,Vt,kn,je),xi=Ac(Me,ie,de,We,Jt,An,je);ne.emplaceBack(ot+Cn-Ue,ot+en-Ue,ot+xi-Ue),je.primitiveLength++}})(l,A,b,x,B,p),F&&(function(j,H,ne,ie,Ae,de){const Me=[];for(let nt=0;nt<ie.length/2;nt++)Me.push(-1);const We={count:0};let Ue=0,je=j.getOrCreateLatestSegment(H,ne),ot=je.vertexLength;for(let nt=0;nt<Ae.length;nt++){const Mt=Ae[nt];for(let Vt=1;Vt<Ae[nt].length;Vt+=2){const Jt=Mt[Vt-1],on=Mt[Vt];let kn=Me[Jt]<Ue,An=Me[on]<Ue;je.vertexLength+((kn?1:0)+(An?1:0))>Fi.MAX_VERTEX_ARRAY_LENGTH&&(je=j.createNewSegment(H,ne),Ue=We.count,kn=!0,An=!0,ot=0);const Cn=Ac(Me,ie,de,We,Jt,kn,je),en=Ac(Me,ie,de,We,on,An,je);ne.emplaceBack(ot+Cn-Ue,ot+en-Ue),je.primitiveLength++}}})(h,A,g,x,w,p),l.forceNewSegmentOnNextPrepare(),h?.forceNewSegmentOnNextPrepare()}function Ac(p,l,A,b,x,B,h){if(B){const g=b.count;return A(l[2*x],l[2*x+1]),p[x]=b.count,b.count++,h.vertexLength++,g}return p[x]}class N0{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((A=>A.id)),this.index=l.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new lt,this.indexArray=new Sn,this.indexArray2=new rn,this.programConfigurations=new MA(l.layers,l.zoom),this.segments=new Fi,this.segments2=new Fi,this.stateDependentLayerIds=this.layers.filter((A=>A.isStateDependent())).map((A=>A.id))}populate(l,A,b){this.hasDependencies=Gd("fill",this.layers,A);const x=this.layers[0].layout.get("fill-sort-key"),B=!x.isConstant(),h=[];for(const{feature:g,id:w,index:k,sourceLayerIndex:F}of l){const j=this.layers[0]._featureFilter.needGeometry,H=js(g,j);if(!this.layers[0]._featureFilter.filter(new ao(this.zoom),H,b))continue;const ne=B?x.evaluate(H,{},b,A.availableImages):void 0,ie={id:w,properties:g.properties,type:g.type,sourceLayerIndex:F,index:k,geometry:j?H.geometry:wA(g),patterns:{},sortKey:ne};h.push(ie)}B&&h.sort(((g,w)=>g.sortKey-w.sortKey));for(const g of h){const{geometry:w,index:k,sourceLayerIndex:F}=g;if(this.hasDependencies){const j=hh("fill",this.layers,g,{zoom:this.zoom},A);this.patternFeatures.push(j)}else this.addFeature(g,w,k,b,{},A.subdivisionGranularity);A.featureIndex.insert(l[k].feature,w,k,F,this.index)}}update(l,A,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,A,this.stateDependentLayers,{imagePositions:b})}addFeatures(l,A,b){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,A,b,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,ly),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.indexBuffer2=l.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(l,A,b,x,B,h){for(const g of Ih(A,500)){const w=Os(g,x,h.fill.getGranularityForZoomLevel(x.z)),k=this.layoutVertexArray;Lf(((F,j)=>{k.emplaceBack(F,j)}),this.segments,this.layoutVertexArray,this.indexArray,w.verticesFlattened,w.indicesTriangles,this.segments2,this.indexArray2,w.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,b,{imagePositions:B,canonical:x})}}let fy,BA;Gn("FillBucket",N0,{omit:["layers","patternFeatures"]});var ZC={get paint(){return BA=BA||new Qo({"fill-antialias":new Vn(Re.paint_fill["fill-antialias"]),"fill-opacity":new wi(Re.paint_fill["fill-opacity"]),"fill-color":new wi(Re.paint_fill["fill-color"]),"fill-outline-color":new wi(Re.paint_fill["fill-outline-color"]),"fill-translate":new Vn(Re.paint_fill["fill-translate"]),"fill-translate-anchor":new Vn(Re.paint_fill["fill-translate-anchor"]),"fill-pattern":new sa(Re.paint_fill["fill-pattern"])})},get layout(){return fy=fy||new Qo({"fill-sort-key":new wi(Re.layout_fill["fill-sort-key"])})}};class Uf extends ka{constructor(l,A){super(l,ZC,A)}recalculate(l,A){super.recalculate(l,A);const b=this.paint._values["fill-outline-color"];b.value.kind==="constant"&&b.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new N0(l)}queryRadius(){return Ah(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:l,geometry:A,transform:b,pixelsToTileUnits:x}){return ny(Rf(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-b.bearingInRadians,x),A)}isTileClipped(){return!0}}const G0=Hr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),W0=Hr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:yg}=G0;class Xp{constructor(l,A,b,x,B){this.properties={},this.extent=b,this.type=0,this.id=void 0,this._pbf=l,this._geometry=-1,this._keys=x,this._values=B,l.readFields(XC,this,A)}loadGeometry(){const l=this._pbf;l.pos=this._geometry;const A=l.readVarint()+l.pos,b=[];let x,B=1,h=0,g=0,w=0;for(;l.pos<A;){if(h<=0){const k=l.readVarint();B=7&k,h=k>>3}if(h--,B===1||B===2)g+=l.readSVarint(),w+=l.readSVarint(),B===1&&(x&&b.push(x),x=[]),x&&x.push(new c(g,w));else{if(B!==7)throw new Error(`unknown command ${B}`);x&&x.push(x[0].clone())}}return x&&b.push(x),b}bbox(){const l=this._pbf;l.pos=this._geometry;const A=l.readVarint()+l.pos;let b=1,x=0,B=0,h=0,g=1/0,w=-1/0,k=1/0,F=-1/0;for(;l.pos<A;){if(x<=0){const j=l.readVarint();b=7&j,x=j>>3}if(x--,b===1||b===2)B+=l.readSVarint(),h+=l.readSVarint(),B<g&&(g=B),B>w&&(w=B),h<k&&(k=h),h>F&&(F=h);else if(b!==7)throw new Error(`unknown command ${b}`)}return[g,k,w,F]}toGeoJSON(l,A,b){const x=this.extent*Math.pow(2,b),B=this.extent*l,h=this.extent*A,g=this.loadGeometry();function w(H){return[360*(H.x+B)/x-180,360/Math.PI*Math.atan(Math.exp((1-2*(H.y+h)/x)*Math.PI))-90]}function k(H){return H.map(w)}let F;if(this.type===1){const H=[];for(const ie of g)H.push(ie[0]);const ne=k(H);F=H.length===1?{type:"Point",coordinates:ne[0]}:{type:"MultiPoint",coordinates:ne}}else if(this.type===2){const H=g.map(k);F=H.length===1?{type:"LineString",coordinates:H[0]}:{type:"MultiLineString",coordinates:H}}else{if(this.type!==3)throw new Error("unknown feature type");{const H=(function(ie){const Ae=ie.length;if(Ae<=1)return[ie];const de=[];let Me,We;for(let Ue=0;Ue<Ae;Ue++){const je=Q0(ie[Ue]);je!==0&&(We===void 0&&(We=je<0),We===je<0?(Me&&de.push(Me),Me=[ie[Ue]]):Me&&Me.push(ie[Ue]))}return Me&&de.push(Me),de})(g),ne=[];for(const ie of H)ne.push(ie.map(k));F=ne.length===1?{type:"Polygon",coordinates:ne[0]}:{type:"MultiPolygon",coordinates:ne}}}const j={type:"Feature",geometry:F,properties:this.properties};return this.id!=null&&(j.id=this.id),j}}function XC(p,l,A){p===1?l.id=A.readVarint():p===2?(function(b,x){const B=b.readVarint()+b.pos;for(;b.pos<B;){const h=x._keys[b.readVarint()],g=x._values[b.readVarint()];x.properties[h]=g}})(A,l):p===3?l.type=A.readVarint():p===4&&(l._geometry=A.pos)}function Q0(p){let l=0;for(let A,b,x=0,B=p.length,h=B-1;x<B;h=x++)A=p[x],b=p[h],l+=(b.x-A.x)*(A.y+b.y);return l}Xp.types=["Unknown","Point","LineString","Polygon"];class Nv{constructor(l,A){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(py,this,A),this.length=this._features.length}feature(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];const A=this._pbf.readVarint()+this._pbf.pos;return new Xp(this._pbf,A,this.extent,this._keys,this._values)}}function py(p,l,A){p===15?l.version=A.readVarint():p===1?l.name=A.readString():p===5?l.extent=A.readVarint():p===2?l._features.push(A.pos):p===3?l._keys.push(A.readString()):p===4&&l._values.push((function(b){let x=null;const B=b.readVarint()+b.pos;for(;b.pos<B;){const h=b.readVarint()>>3;x=h===1?b.readString():h===2?b.readFloat():h===3?b.readDouble():h===4?b.readVarint64():h===5?b.readVarint():h===6?b.readSVarint():h===7?b.readBoolean():null}if(x==null)throw new Error("unknown feature value");return x})(A))}class Gv{constructor(l,A){this.layers=l.readFields(G2,{},A)}}function G2(p,l,A){if(p===3){const b=new Nv(A,A.readVarint()+A.pos);b.length&&(l[b.name]=b)}}const Wv=Math.pow(2,13);function ro(p,l,A,b,x,B,h,g){p.emplaceBack(l,A,2*Math.floor(b*Wv)+h,x*Wv*2,B*Wv*2,Math.round(g))}class Yo{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((A=>A.id)),this.index=l.index,this.hasDependencies=!1,this.layoutVertexArray=new Je,this.centroidVertexArray=new Ze,this.indexArray=new Sn,this.programConfigurations=new MA(l.layers,l.zoom),this.segments=new Fi,this.stateDependentLayerIds=this.layers.filter((A=>A.isStateDependent())).map((A=>A.id))}populate(l,A,b){this.features=[],this.hasDependencies=Gd("fill-extrusion",this.layers,A);for(const{feature:x,id:B,index:h,sourceLayerIndex:g}of l){const w=this.layers[0]._featureFilter.needGeometry,k=js(x,w);if(!this.layers[0]._featureFilter.filter(new ao(this.zoom),k,b))continue;const F={id:B,sourceLayerIndex:g,index:h,geometry:w?k.geometry:wA(x),properties:x.properties,type:x.type,patterns:{}};this.hasDependencies?this.features.push(hh("fill-extrusion",this.layers,F,{zoom:this.zoom},A)):this.addFeature(F,F.geometry,h,b,{},A.subdivisionGranularity),A.featureIndex.insert(x,F.geometry,h,g,this.index,!0)}}addFeatures(l,A,b){for(const x of this.features){const{geometry:B}=x;this.addFeature(x,B,x.index,A,b,l.subdivisionGranularity)}}update(l,A,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,A,this.stateDependentLayers,{imagePositions:b})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,yg),this.centroidVertexBuffer=l.createVertexBuffer(this.centroidVertexArray,W0.members,!0),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(l,A,b,x,B,h){for(const g of Ih(A,500)){const w={x:0,y:0,sampleCount:0},k=this.layoutVertexArray.length;this.processPolygon(w,x,l,g,h);const F=this.layoutVertexArray.length-k,j=Math.floor(w.x/w.sampleCount),H=Math.floor(w.y/w.sampleCount);for(let ne=0;ne<F;ne++)this.centroidVertexArray.emplaceBack(j,H)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,b,{imagePositions:B,canonical:x})}processPolygon(l,A,b,x,B){if(x.length<1||Fo(x[0]))return;for(const j of x)j.length!==0&&Wr(l,j);const h={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},g=B.fill.getGranularityForZoomLevel(A.z),w=Xp.types[b.type]==="Polygon";for(const j of x){if(j.length===0||Fo(j))continue;const H=Pf(j,g,w);this._generateSideFaces(H,h)}if(!w)return;const k=Os(x,A,g,!1),F=this.layoutVertexArray;Lf(((j,H)=>{ro(F,j,H,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,k.verticesFlattened,k.indicesTriangles)}_generateSideFaces(l,A){let b=0;for(let x=1;x<l.length;x++){const B=l[x],h=l[x-1];if(Zr(B,h))continue;A.segment.vertexLength+4>Fi.MAX_VERTEX_ARRAY_LENGTH&&(A.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const g=B.sub(h)._perp()._unit(),w=h.dist(B);b+w>32768&&(b=0),ro(this.layoutVertexArray,B.x,B.y,g.x,g.y,0,0,b),ro(this.layoutVertexArray,B.x,B.y,g.x,g.y,0,1,b),b+=w,ro(this.layoutVertexArray,h.x,h.y,g.x,g.y,0,0,b),ro(this.layoutVertexArray,h.x,h.y,g.x,g.y,0,1,b);const k=A.segment.vertexLength;this.indexArray.emplaceBack(k,k+2,k+1),this.indexArray.emplaceBack(k+1,k+2,k+3),A.segment.vertexLength+=4,A.segment.primitiveLength+=2}}}function Wr(p,l){for(let A=0;A<l.length;A++){const b=l[A];A===l.length-1&&l[0].x===b.x&&l[0].y===b.y||(p.x+=b.x,p.y+=b.y,p.sampleCount++)}}function Zr(p,l){return p.x===l.x&&(p.x<0||p.x>ht)||p.y===l.y&&(p.y<0||p.y>ht)}function Fo(p){return p.every((l=>l.x<0))||p.every((l=>l.x>ht))||p.every((l=>l.y<0))||p.every((l=>l.y>ht))}let hc;Gn("FillExtrusionBucket",Yo,{omit:["layers","features"]});var Kf={get paint(){return hc=hc||new Qo({"fill-extrusion-opacity":new Vn(Re["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new wi(Re["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Vn(Re["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Vn(Re["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new sa(Re["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new wi(Re["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new wi(Re["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Vn(Re["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class vg extends ka{constructor(l,A){super(l,Kf,A)}createBucket(l){return new Yo(l)}queryRadius(){return Ah(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:l,feature:A,featureState:b,geometry:x,transform:B,pixelsToTileUnits:h,pixelPosMatrix:g}){const w=Rf(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-B.bearingInRadians,h),k=this.paint.get("fill-extrusion-height").evaluate(A,b),F=this.paint.get("fill-extrusion-base").evaluate(A,b),j=(function(ne,ie){const Ae=[];for(const de of ne){const Me=[de.x,de.y,0,1];Be(Me,Me,ie),Ae.push(new c(Me[0]/Me[3],Me[1]/Me[3]))}return Ae})(w,g),H=(function(ne,ie,Ae,de){const Me=[],We=[],Ue=de[8]*ie,je=de[9]*ie,ot=de[10]*ie,nt=de[11]*ie,Mt=de[8]*Ae,Vt=de[9]*Ae,Jt=de[10]*Ae,on=de[11]*Ae;for(const kn of ne){const An=[],Cn=[];for(const en of kn){const xi=en.x,Ei=en.y,Ri=de[0]*xi+de[4]*Ei+de[12],oi=de[1]*xi+de[5]*Ei+de[13],Sr=de[2]*xi+de[6]*Ei+de[14],ua=de[3]*xi+de[7]*Ei+de[15],bl=Sr+ot,yc=ua+nt,tp=Ri+Mt,kA=oi+Vt,Nu=Sr+Jt,vc=ua+on,Wa=new c((Ri+Ue)/yc,(oi+je)/yc);Wa.z=bl/yc,An.push(Wa);const Gu=new c(tp/vc,kA/vc);Gu.z=Nu/vc,Cn.push(Gu)}Me.push(An),We.push(Cn)}return[Me,We]})(x,F,k,g);return(function(ne,ie,Ae){let de=1/0;ny(Ae,ie)&&(de=OA(Ae,ie[0]));for(let Me=0;Me<ie.length;Me++){const We=ie[Me],Ue=ne[Me];for(let je=0;je<We.length-1;je++){const ot=We[je],nt=[ot,We[je+1],Ue[je+1],Ue[je],ot];ug(Ae,nt)&&(de=Math.min(de,OA(Ae,nt)))}}return de!==1/0&&de})(H[0],H[1],j)}}function Jp(p,l){return p.x*l.x+p.y*l.y}function OA(p,l){if(p.length===1){let A=0;const b=l[A++];let x;for(;!x||b.equals(x);)if(x=l[A++],!x)return 1/0;for(;A<l.length;A++){const B=l[A],h=p[0],g=x.sub(b),w=B.sub(b),k=h.sub(b),F=Jp(g,g),j=Jp(g,w),H=Jp(w,w),ne=Jp(k,g),ie=Jp(k,w),Ae=F*H-j*j,de=(H*ne-j*ie)/Ae,Me=(F*ie-j*ne)/Ae,We=b.z*(1-de-Me)+x.z*de+B.z*Me;if(isFinite(We))return We}return 1/0}{let A=1/0;for(const b of l)A=Math.min(A,b.z);return A}}const la=Hr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Ff}=la,em=Hr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Qv}=em,Qc=Math.cos(Math.PI/180*37.5),tm=Math.pow(2,14)/.5;class nm{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((A=>A.id)),this.index=l.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((A=>{this.gradients[A.id]={}})),this.layoutVertexArray=new At,this.layoutVertexArray2=new pt,this.indexArray=new Sn,this.programConfigurations=new MA(l.layers,l.zoom),this.segments=new Fi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((A=>A.isStateDependent())).map((A=>A.id))}populate(l,A,b){this.hasDependencies=Gd("line",this.layers,A)||this.hasLineDasharray(this.layers);const x=this.layers[0].layout.get("line-sort-key"),B=!x.isConstant(),h=[];for(const{feature:g,id:w,index:k,sourceLayerIndex:F}of l){const j=this.layers[0]._featureFilter.needGeometry,H=js(g,j);if(!this.layers[0]._featureFilter.filter(new ao(this.zoom),H,b))continue;const ne=B?x.evaluate(H,{},b):void 0,ie={id:w,properties:g.properties,type:g.type,sourceLayerIndex:F,index:k,geometry:j?H.geometry:wA(g),patterns:{},dashes:{},sortKey:ne};h.push(ie)}B&&h.sort(((g,w)=>g.sortKey-w.sortKey));for(const g of h){const{geometry:w,index:k,sourceLayerIndex:F}=g;this.hasDependencies?(Gd("line",this.layers,A)?hh("line",this.layers,g,{zoom:this.zoom},A):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,g,this.zoom,A),this.patternFeatures.push(g)):this.addFeature(g,w,k,b,{},{},A.subdivisionGranularity),A.featureIndex.insert(l[k].feature,w,k,F,this.index)}}update(l,A,b,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,A,this.stateDependentLayers,{imagePositions:b,dashPositions:x})}addFeatures(l,A,b,x){for(const B of this.patternFeatures)this.addFeature(B,B.geometry,B.index,A,b,x,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=l.createVertexBuffer(this.layoutVertexArray2,Qv)),this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Ff),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(l){if(l.properties&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_end"))return{start:+l.properties.mapbox_clip_start,end:+l.properties.mapbox_clip_end}}addFeature(l,A,b,x,B,h,g){const w=this.layers[0].layout,k=w.get("line-join").evaluate(l,{}),F=w.get("line-cap"),j=w.get("line-miter-limit"),H=w.get("line-round-limit");this.lineClips=this.lineFeatureClips(l);for(const ne of A)this.addLine(ne,l,k,F,j,H,x,g);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,b,{imagePositions:B,dashPositions:h,canonical:x})}addLine(l,A,b,x,B,h,g,w){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,l=Pf(l,g?w.line.getGranularityForZoomLevel(g.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ue=0;Ue<l.length-1;Ue++)this.totalDistance+=l[Ue].dist(l[Ue+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const k=Xp.types[A.type]==="Polygon";let F=l.length;for(;F>=2&&l[F-1].equals(l[F-2]);)F--;let j=0;for(;j<F-1&&l[j].equals(l[j+1]);)j++;if(F<(k?3:2))return;b==="bevel"&&(B=1.05);const H=this.overscaling<=16?122880/(512*this.overscaling):0,ne=this.segments.prepareSegment(10*F,this.layoutVertexArray,this.indexArray);let ie,Ae,de,Me,We;this.e1=this.e2=-1,k&&(ie=l[F-2],We=l[j].sub(ie)._unit()._perp());for(let Ue=j;Ue<F;Ue++){if(de=Ue===F-1?k?l[j+1]:void 0:l[Ue+1],de&&l[Ue].equals(de))continue;We&&(Me=We),ie&&(Ae=ie),ie=l[Ue],We=de?de.sub(ie)._unit()._perp():Me,Me=Me||We;let je=Me.add(We);je.x===0&&je.y===0||je._unit();const ot=Me.x*We.x+Me.y*We.y,nt=je.x*We.x+je.y*We.y,Mt=nt!==0?1/nt:1/0,Vt=2*Math.sqrt(2-2*nt),Jt=nt<Qc&&Ae&&de,on=Me.x*We.y-Me.y*We.x>0;if(Jt&&Ue>j){const Cn=ie.dist(Ae);if(Cn>2*H){const en=ie.sub(ie.sub(Ae)._mult(H/Cn)._round());this.updateDistance(Ae,en),this.addCurrentVertex(en,Me,0,0,ne),Ae=en}}const kn=Ae&&de;let An=kn?b:k?"butt":x;if(kn&&An==="round"&&(Mt<h?An="miter":Mt<=2&&(An="fakeround")),An==="miter"&&Mt>B&&(An="bevel"),An==="bevel"&&(Mt>2&&(An="flipbevel"),Mt<B&&(An="miter")),Ae&&this.updateDistance(Ae,ie),An==="miter")je._mult(Mt),this.addCurrentVertex(ie,je,0,0,ne);else if(An==="flipbevel"){if(Mt>100)je=We.mult(-1);else{const Cn=Mt*Me.add(We).mag()/Me.sub(We).mag();je._perp()._mult(Cn*(on?-1:1))}this.addCurrentVertex(ie,je,0,0,ne),this.addCurrentVertex(ie,je.mult(-1),0,0,ne)}else if(An==="bevel"||An==="fakeround"){const Cn=-Math.sqrt(Mt*Mt-1),en=on?Cn:0,xi=on?0:Cn;if(Ae&&this.addCurrentVertex(ie,Me,en,xi,ne),An==="fakeround"){const Ei=Math.round(180*Vt/Math.PI/20);for(let Ri=1;Ri<Ei;Ri++){let oi=Ri/Ei;if(oi!==.5){const ua=oi-.5;oi+=oi*ua*(oi-1)*((1.0904+ot*(ot*(3.55645-1.43519*ot)-3.2452))*ua*ua+(.848013+ot*(.215638*ot-1.06021)))}const Sr=We.sub(Me)._mult(oi)._add(Me)._unit()._mult(on?-1:1);this.addHalfVertex(ie,Sr.x,Sr.y,!1,on,0,ne)}}de&&this.addCurrentVertex(ie,We,-en,-xi,ne)}else if(An==="butt")this.addCurrentVertex(ie,je,0,0,ne);else if(An==="square"){const Cn=Ae?1:-1;this.addCurrentVertex(ie,je,Cn,Cn,ne)}else An==="round"&&(Ae&&(this.addCurrentVertex(ie,Me,0,0,ne),this.addCurrentVertex(ie,Me,1,1,ne,!0)),de&&(this.addCurrentVertex(ie,We,-1,-1,ne,!0),this.addCurrentVertex(ie,We,0,0,ne)));if(Jt&&Ue<F-1){const Cn=ie.dist(de);if(Cn>2*H){const en=ie.add(de.sub(ie)._mult(H/Cn)._round());this.updateDistance(ie,en),this.addCurrentVertex(en,We,0,0,ne),ie=en}}}}addCurrentVertex(l,A,b,x,B,h=!1){const g=A.y*x-A.x,w=-A.y-A.x*x;this.addHalfVertex(l,A.x+A.y*b,A.y-A.x*b,h,!1,b,B),this.addHalfVertex(l,g,w,h,!0,-x,B),this.distance>tm/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(l,A,b,x,B,h))}addHalfVertex({x:l,y:A},b,x,B,h,g,w){const k=.5*(this.lineClips?this.scaledDistance*(tm-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((l<<1)+(B?1:0),(A<<1)+(h?1:0),Math.round(63*b)+128,Math.round(63*x)+128,1+(g===0?0:g<0?-1:1)|(63&k)<<2,k>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const F=w.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,F,this.e2),w.primitiveLength++),h?this.e2=F:this.e1=F}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(l,A){this.distance+=l.dist(A),this.updateScaledDistance()}hasLineDasharray(l){for(const A of l){const b=A.paint.get("line-dasharray");if(b&&!b.isConstant())return!0}return!1}addLineDashDependencies(l,A,b,x){for(const B of l){const h=B.paint.get("line-dasharray");if(!h||h.value.kind==="constant")continue;const g=B.layout.get("line-cap")==="round",w={dasharray:h.value.evaluate({zoom:b-1},A,{}),round:g},k={dasharray:h.value.evaluate({zoom:b},A,{}),round:g},F={dasharray:h.value.evaluate({zoom:b+1},A,{}),round:g},j=`${w.dasharray.join(",")},${w.round}`,H=`${k.dasharray.join(",")},${k.round}`,ne=`${F.dasharray.join(",")},${F.round}`;x.dashDependencies[j]=w,x.dashDependencies[H]=k,x.dashDependencies[ne]=F,A.dashes[B.id]={min:j,mid:H,max:ne}}}}let Lu,my;Gn("LineBucket",nm,{omit:["layers","patternFeatures"]});var bg={get paint(){return my=my||new Qo({"line-opacity":new wi(Re.paint_line["line-opacity"]),"line-color":new wi(Re.paint_line["line-color"]),"line-translate":new Vn(Re.paint_line["line-translate"]),"line-translate-anchor":new Vn(Re.paint_line["line-translate-anchor"]),"line-width":new wi(Re.paint_line["line-width"]),"line-gap-width":new wi(Re.paint_line["line-gap-width"]),"line-offset":new wi(Re.paint_line["line-offset"]),"line-blur":new wi(Re.paint_line["line-blur"]),"line-dasharray":new sa(Re.paint_line["line-dasharray"]),"line-pattern":new sa(Re.paint_line["line-pattern"]),"line-gradient":new nl(Re.paint_line["line-gradient"])})},get layout(){return Lu=Lu||new Qo({"line-cap":new Vn(Re.layout_line["line-cap"]),"line-join":new wi(Re.layout_line["line-join"]),"line-miter-limit":new Vn(Re.layout_line["line-miter-limit"]),"line-round-limit":new Vn(Re.layout_line["line-round-limit"]),"line-sort-key":new wi(Re.layout_line["line-sort-key"])})}};class JC extends wi{possiblyEvaluate(l,A){return A=new ao(Math.floor(A.zoom),{now:A.now,fadeDuration:A.fadeDuration,zoomHistory:A.zoomHistory,transition:A.transition}),super.possiblyEvaluate(l,A)}evaluate(l,A,b,x){return A=ke({},A,{zoom:Math.floor(A.zoom)}),super.evaluate(l,A,b,x)}}let Yh;class gy extends ka{constructor(l,A){super(l,bg,A),this.gradientVersion=0,Yh||(Yh=new JC(bg.paint.properties["line-width"].specification),Yh.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(l){if(l==="line-gradient"){const A=this.gradientExpression();this.stepInterpolant=!!(function(b){return b._styleExpression!==void 0})(A)&&A._styleExpression.expression instanceof Oo,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(l,A){super.recalculate(l,A),this.paint._values["line-floorwidth"]=Yh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new nm(l)}queryRadius(l){const A=l,b=Yd(jd("line-width",this,A),jd("line-gap-width",this,A)),x=jd("line-offset",this,A);return b/2+Math.abs(x)+Ah(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:l,feature:A,featureState:b,geometry:x,transform:B,pixelsToTileUnits:h}){const g=Rf(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-B.bearingInRadians,h),w=h/2*Yd(this.paint.get("line-width").evaluate(A,b),this.paint.get("line-gap-width").evaluate(A,b)),k=this.paint.get("line-offset").evaluate(A,b);return k&&(x=(function(F,j){const H=[];for(let ne=0;ne<F.length;ne++){const ie=F[ne],Ae=[];for(let de=0;de<ie.length;de++){const Me=ie[de-1],We=ie[de],Ue=ie[de+1],je=de===0?new c(0,0):We.sub(Me)._unit()._perp(),ot=de===ie.length-1?new c(0,0):Ue.sub(We)._unit()._perp(),nt=je._add(ot)._unit(),Mt=nt.x*ot.x+nt.y*ot.y;Mt!==0&&nt._mult(1/Mt),Ae.push(nt._mult(j)._add(We))}H.push(Ae)}return H})(x,k*h)),(function(F,j,H){for(let ne=0;ne<j.length;ne++){const ie=j[ne];if(F.length>=3){for(let Ae=0;Ae<ie.length;Ae++)if(ki(F,ie[Ae]))return!0}if(Qh(F,ie,H))return!0}return!1})(g,x,w)}isTileClipped(){return!0}}function Yd(p,l){return l>0?l+2*p:p}const rl=Hr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),zf=Hr([{name:"a_projected_pos",components:3,type:"Float32"}],4);Hr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Cg=Hr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Hr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Vh=Hr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),qv=Hr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Yv(p,l,A){return p.sections.forEach((b=>{b.text=(function(x,B,h){const g=B.layout.get("text-transform").evaluate(h,{});return g==="uppercase"?x=x.toLocaleUpperCase():g==="lowercase"&&(x=x.toLocaleLowerCase()),tl.applyArabicShaping&&(x=tl.applyArabicShaping(x)),x})(b.text,l,A)})),p}Hr([{name:"triangle",components:3,type:"Uint16"}]),Hr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Hr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Hr([{type:"Float32",name:"offsetX"}]),Hr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Hr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var Pa=24;const Vd={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Vv={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},qc={40:!0};function $v(p,l,A,b,x,B){if("fontStack"in l){const h=A[l.fontStack],g=h&&h[p];return g?g.metrics.advance*l.scale+x:0}{const h=b[l.imageName];return h?h.displaySize[0]*l.scale*Pa/B+x:0}}function Uu(p,l,A,b){const x=Math.pow(p-l,2);return b?p<l?x/2:2*x:x+Math.abs(A)*A}function e_(p,l,A){let b=0;return p===10&&(b-=1e4),A&&(b+=150),p!==40&&p!==65288||(b+=50),l!==41&&l!==65289||(b+=50),b}function Hv(p,l,A,b,x,B){let h=null,g=Uu(l,A,x,B);for(const w of b){const k=Uu(l-w.x,A,x,B)+w.badness;k<=g&&(h=w,g=k)}return{index:p,x:l,priorBreak:h,badness:g}}function Zv(p){return p?Zv(p.priorBreak).concat(p.index):[]}class dc{constructor(l="",A=[],b=[]){this.text=l,this.sections=A,this.sectionIndex=b,this.imageSectionID=null}static fromFeature(l,A){const b=new dc;for(let x=0;x<l.sections.length;x++){const B=l.sections[x];B.image?b.addImageSection(B):b.addTextSection(B,A)}return b}length(){return[...this.text].length}getSection(l){return this.sections[this.sectionIndex[l]]}getSectionIndex(l){return this.sectionIndex[l]}verticalizePunctuation(){this.text=(function(l){let A="",b={premature:!0,value:void 0};const x=l[Symbol.iterator]();let B=x.next();const h=l[Symbol.iterator]();h.next();let g=h.next();for(;!B.done;)A+=!g.done&&el(g.value.codePointAt(0))&&!Vd[g.value]||!b.premature&&el(b.value.codePointAt(0))&&!Vd[b.value]||!Vd[B.value]?B.value:Vd[B.value],b={value:B.value,premature:!1},B=x.next(),g=h.next();return A})(this.text)}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const l=this.text.match(/^\s*/),A=l?l[0].length:0,b=this.text.match(/\S\s*$/),x=b?b[0].length-1:0;this.text=this.text.substring(A,this.text.length-x),this.sectionIndex=this.sectionIndex.slice(A,this.sectionIndex.length-x)}substring(l,A){const b=[...this.text].slice(l,A).join(""),x=this.sectionIndex.slice(l,A);return new dc(b,this.sections,x)}toCodeUnitIndex(l){return[...this.text].slice(0,l).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((l,A)=>Math.max(l,this.sections[A].scale)),0)}getMaxImageSize(l){let A=0,b=0;for(let x=0;x<this.length();x++){const B=this.getSection(x);if("imageName"in B){const h=l[B.imageName];if(!h)continue;const g=h.displaySize;A=Math.max(A,g[0]),b=Math.max(b,g[1])}}return{maxImageWidth:A,maxImageHeight:b}}addTextSection(l,A){this.text+=l.text,this.sections.push({scale:l.scale||1,verticalAlign:l.verticalAlign||"bottom",fontStack:l.fontStack||A});const b=this.sections.length-1;this.sectionIndex.push(...[...l.text].map((()=>b)))}addImageSection(l){const A=l.image?l.image.name:"";if(A.length===0)return void gt("Can't add FormattedSection with an empty image.");const b=this.getNextImageSectionCharCode();b?(this.text+=String.fromCharCode(b),this.sections.push({scale:1,verticalAlign:l.verticalAlign||"bottom",imageName:A}),this.sectionIndex.push(this.sections.length-1)):gt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(l,A,b,x,B){const h=[],g=this.determineAverageLineWidth(l,A,b,x,B),w=this.hasZeroWidthSpaces();let k=0,F=0;const j=this.text[Symbol.iterator]();let H=j.next();const ne=this.text[Symbol.iterator]();ne.next();let ie=ne.next();const Ae=this.text[Symbol.iterator]();Ae.next(),Ae.next();let de=Ae.next();for(;!H.done;){const Me=this.getSection(F),We=H.value.codePointAt(0);if(D0(We)||(k+=$v(We,Me,b,x,l,B)),!ie.done){const Ue=Kc(We),je=ie.value.codePointAt(0);(Vv[We]||Ue||"imageName"in Me||!de.done&&qc[je])&&h.push(Hv(F+1,k,g,h,e_(We,je,Ue&&w),!1))}F++,H=j.next(),ie=ne.next(),de=Ae.next()}return Zv(Hv(this.length(),k,g,h,0,!0))}determineAverageLineWidth(l,A,b,x,B){let h=0,g=0;for(const w of this.text){const k=this.getSection(g);h+=$v(w.codePointAt(0),k,b,x,l,B),g++}return h/Math.max(1,Math.ceil(h/A))}}const _g=4294967296,yy=1/_g,im=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class vy{constructor(l=new Uint8Array(16)){this.buf=ArrayBuffer.isView(l)?l:new Uint8Array(l),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(l,A,b=this.length){for(;this.pos<b;){const x=this.readVarint(),B=x>>3,h=this.pos;this.type=7&x,l(B,A,this),this.pos===h&&this.skip(x)}return A}readMessage(l,A){return this.readFields(l,A,this.readVarint()+this.pos)}readFixed32(){const l=this.dataView.getUint32(this.pos,!0);return this.pos+=4,l}readSFixed32(){const l=this.dataView.getInt32(this.pos,!0);return this.pos+=4,l}readFixed64(){const l=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*_g;return this.pos+=8,l}readSFixed64(){const l=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*_g;return this.pos+=8,l}readFloat(){const l=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,l}readDouble(){const l=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,l}readVarint(l){const A=this.buf;let b,x;return x=A[this.pos++],b=127&x,x<128?b:(x=A[this.pos++],b|=(127&x)<<7,x<128?b:(x=A[this.pos++],b|=(127&x)<<14,x<128?b:(x=A[this.pos++],b|=(127&x)<<21,x<128?b:(x=A[this.pos],b|=(15&x)<<28,(function(B,h,g){const w=g.buf;let k,F;if(F=w[g.pos++],k=(112&F)>>4,F<128||(F=w[g.pos++],k|=(127&F)<<3,F<128)||(F=w[g.pos++],k|=(127&F)<<10,F<128)||(F=w[g.pos++],k|=(127&F)<<17,F<128)||(F=w[g.pos++],k|=(127&F)<<24,F<128)||(F=w[g.pos++],k|=(1&F)<<31,F<128))return $h(B,k,h);throw new Error("Expected varint not more than 10 bytes")})(b,l,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const l=this.readVarint();return l%2==1?(l+1)/-2:l/2}readBoolean(){return!!this.readVarint()}readString(){const l=this.readVarint()+this.pos,A=this.pos;return this.pos=l,l-A>=12&&im?im.decode(this.buf.subarray(A,l)):(function(b,x,B){let h="",g=x;for(;g<B;){const w=b[g];let k,F,j,H=null,ne=w>239?4:w>223?3:w>191?2:1;if(g+ne>B)break;ne===1?w<128&&(H=w):ne===2?(k=b[g+1],(192&k)==128&&(H=(31&w)<<6|63&k,H<=127&&(H=null))):ne===3?(k=b[g+1],F=b[g+2],(192&k)==128&&(192&F)==128&&(H=(15&w)<<12|(63&k)<<6|63&F,(H<=2047||H>=55296&&H<=57343)&&(H=null))):ne===4&&(k=b[g+1],F=b[g+2],j=b[g+3],(192&k)==128&&(192&F)==128&&(192&j)==128&&(H=(15&w)<<18|(63&k)<<12|(63&F)<<6|63&j,(H<=65535||H>=1114112)&&(H=null))),H===null?(H=65533,ne=1):H>65535&&(H-=65536,h+=String.fromCharCode(H>>>10&1023|55296),H=56320|1023&H),h+=String.fromCharCode(H),g+=ne}return h})(this.buf,A,l)}readBytes(){const l=this.readVarint()+this.pos,A=this.buf.subarray(this.pos,l);return this.pos=l,A}readPackedVarint(l=[],A){const b=this.readPackedEnd();for(;this.pos<b;)l.push(this.readVarint(A));return l}readPackedSVarint(l=[]){const A=this.readPackedEnd();for(;this.pos<A;)l.push(this.readSVarint());return l}readPackedBoolean(l=[]){const A=this.readPackedEnd();for(;this.pos<A;)l.push(this.readBoolean());return l}readPackedFloat(l=[]){const A=this.readPackedEnd();for(;this.pos<A;)l.push(this.readFloat());return l}readPackedDouble(l=[]){const A=this.readPackedEnd();for(;this.pos<A;)l.push(this.readDouble());return l}readPackedFixed32(l=[]){const A=this.readPackedEnd();for(;this.pos<A;)l.push(this.readFixed32());return l}readPackedSFixed32(l=[]){const A=this.readPackedEnd();for(;this.pos<A;)l.push(this.readSFixed32());return l}readPackedFixed64(l=[]){const A=this.readPackedEnd();for(;this.pos<A;)l.push(this.readFixed64());return l}readPackedSFixed64(l=[]){const A=this.readPackedEnd();for(;this.pos<A;)l.push(this.readSFixed64());return l}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(l){const A=7&l;if(A===0)for(;this.buf[this.pos++]>127;);else if(A===2)this.pos=this.readVarint()+this.pos;else if(A===5)this.pos+=4;else{if(A!==1)throw new Error(`Unimplemented type: ${A}`);this.pos+=8}}writeTag(l,A){this.writeVarint(l<<3|A)}realloc(l){let A=this.length||16;for(;A<this.pos+l;)A*=2;if(A!==this.length){const b=new Uint8Array(A);b.set(this.buf),this.buf=b,this.dataView=new DataView(b.buffer),this.length=A}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(l){this.realloc(4),this.dataView.setInt32(this.pos,l,!0),this.pos+=4}writeSFixed32(l){this.realloc(4),this.dataView.setInt32(this.pos,l,!0),this.pos+=4}writeFixed64(l){this.realloc(8),this.dataView.setInt32(this.pos,-1&l,!0),this.dataView.setInt32(this.pos+4,Math.floor(l*yy),!0),this.pos+=8}writeSFixed64(l){this.realloc(8),this.dataView.setInt32(this.pos,-1&l,!0),this.dataView.setInt32(this.pos+4,Math.floor(l*yy),!0),this.pos+=8}writeVarint(l){(l=+l||0)>268435455||l<0?(function(A,b){let x,B;if(A>=0?(x=A%4294967296|0,B=A/4294967296|0):(x=~(-A%4294967296),B=~(-A/4294967296),4294967295^x?x=x+1|0:(x=0,B=B+1|0)),A>=18446744073709552e3||A<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");b.realloc(10),(function(h,g,w){w.buf[w.pos++]=127&h|128,h>>>=7,w.buf[w.pos++]=127&h|128,h>>>=7,w.buf[w.pos++]=127&h|128,h>>>=7,w.buf[w.pos++]=127&h|128,w.buf[w.pos]=127&(h>>>=7)})(x,0,b),(function(h,g){const w=(7&h)<<4;g.buf[g.pos++]|=w|((h>>>=3)?128:0),h&&(g.buf[g.pos++]=127&h|((h>>>=7)?128:0),h&&(g.buf[g.pos++]=127&h|((h>>>=7)?128:0),h&&(g.buf[g.pos++]=127&h|((h>>>=7)?128:0),h&&(g.buf[g.pos++]=127&h|((h>>>=7)?128:0),h&&(g.buf[g.pos++]=127&h)))))})(B,b)})(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))}writeSVarint(l){this.writeVarint(l<0?2*-l-1:2*l)}writeBoolean(l){this.writeVarint(+l)}writeString(l){l=String(l),this.realloc(4*l.length),this.pos++;const A=this.pos;this.pos=(function(x,B,h){for(let g,w,k=0;k<B.length;k++){if(g=B.charCodeAt(k),g>55295&&g<57344){if(!w){g>56319||k+1===B.length?(x[h++]=239,x[h++]=191,x[h++]=189):w=g;continue}if(g<56320){x[h++]=239,x[h++]=191,x[h++]=189,w=g;continue}g=w-55296<<10|g-56320|65536,w=null}else w&&(x[h++]=239,x[h++]=191,x[h++]=189,w=null);g<128?x[h++]=g:(g<2048?x[h++]=g>>6|192:(g<65536?x[h++]=g>>12|224:(x[h++]=g>>18|240,x[h++]=g>>12&63|128),x[h++]=g>>6&63|128),x[h++]=63&g|128)}return h})(this.buf,l,this.pos);const b=this.pos-A;b>=128&&Xv(A,b,this),this.pos=A-1,this.writeVarint(b),this.pos+=b}writeFloat(l){this.realloc(4),this.dataView.setFloat32(this.pos,l,!0),this.pos+=4}writeDouble(l){this.realloc(8),this.dataView.setFloat64(this.pos,l,!0),this.pos+=8}writeBytes(l){const A=l.length;this.writeVarint(A),this.realloc(A);for(let b=0;b<A;b++)this.buf[this.pos++]=l[b]}writeRawMessage(l,A){this.pos++;const b=this.pos;l(A,this);const x=this.pos-b;x>=128&&Xv(b,x,this),this.pos=b-1,this.writeVarint(x),this.pos+=x}writeMessage(l,A,b){this.writeTag(l,2),this.writeRawMessage(A,b)}writePackedVarint(l,A){A.length&&this.writeMessage(l,t_,A)}writePackedSVarint(l,A){A.length&&this.writeMessage(l,by,A)}writePackedBoolean(l,A){A.length&&this.writeMessage(l,Q2,A)}writePackedFloat(l,A){A.length&&this.writeMessage(l,Jv,A)}writePackedDouble(l,A){A.length&&this.writeMessage(l,W2,A)}writePackedFixed32(l,A){A.length&&this.writeMessage(l,q2,A)}writePackedSFixed32(l,A){A.length&&this.writeMessage(l,n_,A)}writePackedFixed64(l,A){A.length&&this.writeMessage(l,i_,A)}writePackedSFixed64(l,A){A.length&&this.writeMessage(l,xg,A)}writeBytesField(l,A){this.writeTag(l,2),this.writeBytes(A)}writeFixed32Field(l,A){this.writeTag(l,5),this.writeFixed32(A)}writeSFixed32Field(l,A){this.writeTag(l,5),this.writeSFixed32(A)}writeFixed64Field(l,A){this.writeTag(l,1),this.writeFixed64(A)}writeSFixed64Field(l,A){this.writeTag(l,1),this.writeSFixed64(A)}writeVarintField(l,A){this.writeTag(l,0),this.writeVarint(A)}writeSVarintField(l,A){this.writeTag(l,0),this.writeSVarint(A)}writeStringField(l,A){this.writeTag(l,2),this.writeString(A)}writeFloatField(l,A){this.writeTag(l,5),this.writeFloat(A)}writeDoubleField(l,A){this.writeTag(l,1),this.writeDouble(A)}writeBooleanField(l,A){this.writeVarintField(l,+A)}}function $h(p,l,A){return A?4294967296*l+(p>>>0):4294967296*(l>>>0)+(p>>>0)}function Xv(p,l,A){const b=l<=16383?1:l<=2097151?2:l<=268435455?3:Math.floor(Math.log(l)/(7*Math.LN2));A.realloc(b);for(let x=A.pos-1;x>=p;x--)A.buf[x+b]=A.buf[x]}function t_(p,l){for(let A=0;A<p.length;A++)l.writeVarint(p[A])}function by(p,l){for(let A=0;A<p.length;A++)l.writeSVarint(p[A])}function Jv(p,l){for(let A=0;A<p.length;A++)l.writeFloat(p[A])}function W2(p,l){for(let A=0;A<p.length;A++)l.writeDouble(p[A])}function Q2(p,l){for(let A=0;A<p.length;A++)l.writeBoolean(p[A])}function q2(p,l){for(let A=0;A<p.length;A++)l.writeFixed32(p[A])}function n_(p,l){for(let A=0;A<p.length;A++)l.writeSFixed32(p[A])}function i_(p,l){for(let A=0;A<p.length;A++)l.writeFixed64(p[A])}function xg(p,l){for(let A=0;A<p.length;A++)l.writeSFixed64(p[A])}function Cy(p,l,A){p===1&&A.readMessage(q0,l)}function q0(p,l,A){if(p===3){const{id:b,bitmap:x,width:B,height:h,left:g,top:w,advance:k}=A.readMessage(r_,{});l.push({id:b,bitmap:new hg({width:B+6,height:h+6},x),metrics:{width:B,height:h,left:g,top:w,advance:k}})}}function r_(p,l,A){p===1?l.id=A.readVarint():p===2?l.bitmap=A.readBytes():p===3?l.width=A.readVarint():p===4?l.height=A.readVarint():p===5?l.left=A.readSVarint():p===6?l.top=A.readSVarint():p===7&&(l.advance=A.readVarint())}function _y(p){let l=0,A=0;for(const h of p)l+=h.w*h.h,A=Math.max(A,h.w);p.sort(((h,g)=>g.h-h.h));const b=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),A),h:1/0}];let x=0,B=0;for(const h of p)for(let g=b.length-1;g>=0;g--){const w=b[g];if(!(h.w>w.w||h.h>w.h)){if(h.x=w.x,h.y=w.y,B=Math.max(B,h.y+h.h),x=Math.max(x,h.x+h.w),h.w===w.w&&h.h===w.h){const k=b.pop();k&&g<b.length&&(b[g]=k)}else h.h===w.h?(w.x+=h.w,w.w-=h.w):h.w===w.w?(w.y+=h.h,w.h-=h.h):(b.push({x:w.x+h.w,y:w.y,w:w.w-h.w,h:h.h}),w.y+=h.h,w.h-=h.h);break}}return{w:x,h:B,fill:l/(x*B)||0}}class Y0{constructor(l,{pixelRatio:A,version:b,stretchX:x,stretchY:B,content:h,textFitWidth:g,textFitHeight:w}){this.paddedRect=l,this.pixelRatio=A,this.stretchX=x,this.stretchY=B,this.content=h,this.version=b,this.textFitWidth=g,this.textFitHeight=w}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class V0{constructor(l,A){const b={},x={};this.haveRenderCallbacks=[];const B=[];this.addImages(l,b,B),this.addImages(A,x,B);const{w:h,h:g}=_y(B),w=new Ql({width:h||1,height:g||1});for(const k in l){const F=l[k],j=b[k].paddedRect;Ql.copy(F.data,w,{x:0,y:0},{x:j.x+1,y:j.y+1},F.data)}for(const k in A){const F=A[k],j=x[k].paddedRect,H=j.x+1,ne=j.y+1,ie=F.data.width,Ae=F.data.height;Ql.copy(F.data,w,{x:0,y:0},{x:H,y:ne},F.data),Ql.copy(F.data,w,{x:0,y:Ae-1},{x:H,y:ne-1},{width:ie,height:1}),Ql.copy(F.data,w,{x:0,y:0},{x:H,y:ne+Ae},{width:ie,height:1}),Ql.copy(F.data,w,{x:ie-1,y:0},{x:H-1,y:ne},{width:1,height:Ae}),Ql.copy(F.data,w,{x:0,y:0},{x:H+ie,y:ne},{width:1,height:Ae})}this.image=w,this.iconPositions=b,this.patternPositions=x}addImages(l,A,b){for(const x in l){const B=l[x],h={x:0,y:0,w:B.data.width+2,h:B.data.height+2};b.push(h),A[x]=new Y0(h,B),B.hasRenderCallback&&this.haveRenderCallbacks.push(x)}}patchUpdatedImages(l,A){l.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const b in l.updatedImages)this.patchUpdatedImage(this.iconPositions[b],l.getImage(b),A),this.patchUpdatedImage(this.patternPositions[b],l.getImage(b),A)}patchUpdatedImage(l,A,b){if(!l||!A||l.version===A.version)return;l.version=A.version;const[x,B]=l.tl;b.update(A.data,void 0,{x,y:B})}}var Hh;function jf(p,l,A,b,x,B,h,g,w,k,F,j,H,ne,ie){const Ae=dc.fromFeature(p,x);let de;j===s.ay.vertical&&Ae.verticalizePunctuation();let Me=Ae.determineLineBreaks(k,B,l,b,ne);const{processBidirectionalText:We,processStyledBidirectionalText:Ue}=tl;if(We&&Ae.sections.length===1){de=[],Me=Me.map((Mt=>Ae.toCodeUnitIndex(Mt)));const nt=We(Ae.toString(),Me);for(const Mt of nt){const Vt=[...Mt].map((()=>0));de.push(new dc(Mt,Ae.sections,Vt))}}else if(Ue){de=[],Me=Me.map((Jt=>Ae.toCodeUnitIndex(Jt)));let nt=0;const Mt=[];for(const Jt of Ae.text)Mt.push(...Array(Jt.length).fill(Ae.sectionIndex[nt])),nt++;const Vt=Ue(Ae.text,Mt,Me);for(const Jt of Vt){const on=[];let kn="";for(const An of Jt[0])on.push(Jt[1][kn.length]),kn+=An;de.push(new dc(Jt[0],Ae.sections,on))}}else de=(function(nt,Mt){const Vt=[];let Jt=0;for(const on of Mt)Vt.push(nt.substring(Jt,on)),Jt=on;return Jt<nt.length()&&Vt.push(nt.substring(Jt,nt.length())),Vt})(Ae,Me);const je=[],ot={positionedLines:je,text:Ae.toString(),top:F[1],bottom:F[1],left:F[0],right:F[0],writingMode:j,iconsInText:!1,verticalizable:!1};return(function(nt,Mt,Vt,Jt,on,kn,An,Cn,en,xi,Ei,Ri){let oi=0,Sr=0,ua=0,bl=0;const yc=Cn==="right"?1:Cn==="left"?0:.5,tp=Pa/Ri;let kA=0;for(const Wa of on){Wa.trim();const Gu=Wa.getMaxScale(),$c={positionedGlyphs:[],lineOffset:0};nt.positionedLines[kA]=$c;const Hc=$c.positionedGlyphs;let ph=0;if(!Wa.length()){Sr+=kn,++kA;continue}const bc=eb(Jt,Wa,tp);let mh=0;for(const pu of Wa.text){const xa=Wa.getSection(mh),Cl=pu.codePointAt(0),Ua=tb(en,Ei,Cl),mu={glyph:Cl,imageName:null,x:oi,y:Sr+-17,vertical:Ua,scale:1,fontStack:"",sectionIndex:Wa.getSectionIndex(mh),metrics:null,rect:null};let d1;if("fontStack"in xa){if(d1=Y2(xa,Cl,Ua,bc,Mt,Vt),!d1)continue;mu.fontStack=xa.fontStack}else{if(nt.iconsInText=!0,xa.scale*=tp,d1=H0(xa,Ua,Gu,bc,Jt),!d1)continue;ph=Math.max(ph,d1.imageOffset),mu.imageName=xa.imageName}const{rect:pm,metrics:X2,baselineOffset:Ly}=d1;mu.y+=Ly,mu.scale=xa.scale,mu.metrics=X2,mu.rect=pm,Hc.push(mu),Ua?(nt.verticalizable=!0,oi+=("imageName"in xa?X2.advance:Pa)*xa.scale+xi):oi+=X2.advance*xa.scale+xi,mh++}Hc.length!==0&&(ua=Math.max(oi-xi,ua),xy(Hc,0,Hc.length-1,yc)),oi=0,$c.lineOffset=Math.max(ph,(Gu-1)*Pa);const np=kn*Gu+ph;Sr+=np,bl=Math.max(np,bl),++kA}const{horizontalAlign:Nu,verticalAlign:vc}=$0(An);(function(Wa,Gu,$c,Hc,ph,bc,mh,np,pu){const xa=(Gu-$c)*ph;let Cl=0;Cl=bc!==mh?-np*Hc- -17:-Hc*pu*mh+.5*mh;for(const Ua of Wa)for(const mu of Ua.positionedGlyphs)mu.x+=xa,mu.y+=Cl})(nt.positionedLines,yc,Nu,vc,ua,bl,kn,Sr,on.length),nt.top+=-vc*Sr,nt.bottom=nt.top+Sr,nt.left+=-Nu*ua,nt.right=nt.left+ua})(ot,l,A,b,de,h,g,w,j,k,H,ie),!(function(nt){for(const Mt of nt)if(Mt.positionedGlyphs.length!==0)return!1;return!0})(je)&&ot}function $0(p){let l=.5,A=.5;switch(p){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0}switch(p){case"bottom":case"bottom-right":case"bottom-left":A=1;break;case"top":case"top-right":case"top-left":A=0}return{horizontalAlign:l,verticalAlign:A}}function eb(p,l,A){const b=l.getMaxScale()*Pa,{maxImageWidth:x,maxImageHeight:B}=l.getMaxImageSize(p),h=Math.max(b,B*A);return{verticalLineContentWidth:Math.max(b,x*A),horizontalLineContentHeight:h}}function zo(p){switch(p){case"top":return 0;case"center":return .5;default:return 1}}function tb(p,l,A){return!(p===s.ay.horizontal||!l&&!Ll(A)||l&&(D0(A)||(b=A,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(b)))));var b}function Y2(p,l,A,b,x,B){const h=B[p.fontStack],g=(function(k,F,j,H){if(k&&k.rect)return k;const ne=F[j.fontStack],ie=ne&&ne[H];return ie?{rect:null,metrics:ie.metrics}:null})(h&&h[l],x,p,l);if(g===null)return null;let w;if(A)w=b.verticalLineContentWidth-p.scale*Pa;else{const k=zo(p.verticalAlign);w=(b.horizontalLineContentHeight-p.scale*Pa)*k}return{rect:g.rect,metrics:g.metrics,baselineOffset:w}}function H0(p,l,A,b,x){const B=x[p.imageName];if(!B)return null;const h=B.paddedRect,g=B.displaySize,w={width:g[0],height:g[1],left:1,top:-3,advance:l?g[1]:g[0]};let k;if(l)k=b.verticalLineContentWidth-g[1]*p.scale;else{const F=zo(p.verticalAlign);k=(b.horizontalLineContentHeight-g[1]*p.scale)*F}return{rect:h,metrics:w,baselineOffset:k,imageOffset:(l?g[0]:g[1])*p.scale-Pa*A}}function xy(p,l,A,b){if(b===0)return;const x=p[A],B=(p[A].x+x.metrics.advance*x.scale)*b;for(let h=l;h<=A;h++)p[h].x-=B}function V2(p,l,A){const{horizontalAlign:b,verticalAlign:x}=$0(A),B=l[0]-p.displaySize[0]*b,h=l[1]-p.displaySize[1]*x;return{image:p,top:h,bottom:h+p.displaySize[1],left:B,right:B+p.displaySize[0]}}function o_(p){var l,A;let b=p.left,x=p.top,B=p.right-b,h=p.bottom-x;const g=(l=p.image.textFitWidth)!==null&&l!==void 0?l:"stretchOrShrink",w=(A=p.image.textFitHeight)!==null&&A!==void 0?A:"stretchOrShrink",k=(p.image.content[2]-p.image.content[0])/(p.image.content[3]-p.image.content[1]);if(w==="proportional"){if(g==="stretchOnly"&&B/h<k||g==="proportional"){const F=Math.ceil(h*k);b*=F/B,B=F}}else if(g==="proportional"&&w==="stretchOnly"&&k!==0&&B/h>k){const F=Math.ceil(B/k);x*=F/h,h=F}return{x1:b,y1:x,x2:b+B,y2:x+h}}function rm(p,l,A,b,x,B){const h=p.image;let g;if(h.content){const de=h.content,Me=h.pixelRatio||1;g=[de[0]/Me,de[1]/Me,h.displaySize[0]-de[2]/Me,h.displaySize[1]-de[3]/Me]}const w=l.left*B,k=l.right*B;let F,j,H,ne;A==="width"||A==="both"?(ne=x[0]+w-b[3],j=x[0]+k+b[1]):(ne=x[0]+(w+k-h.displaySize[0])/2,j=ne+h.displaySize[0]);const ie=l.top*B,Ae=l.bottom*B;return A==="height"||A==="both"?(F=x[1]+ie-b[0],H=x[1]+Ae+b[2]):(F=x[1]+(ie+Ae-h.displaySize[1])/2,H=F+h.displaySize[1]),{image:h,top:F,right:j,bottom:H,left:ne,collisionPadding:g}}Gn("ImagePosition",Y0),Gn("ImageAtlas",V0),s.ay=void 0,(Hh=s.ay||(s.ay={}))[Hh.none=0]="none",Hh[Hh.horizontal=1]="horizontal",Hh[Hh.vertical=2]="vertical",Hh[Hh.horizontalOnly=3]="horizontalOnly";const Ku=128,Zh=32640;function Z0(p,l){const{expression:A}=l;if(A.kind==="constant")return{kind:"constant",layoutSize:A.evaluate(new ao(p+1))};if(A.kind==="source")return{kind:"source"};{const{zoomStops:b,interpolationType:x}=A;let B=0;for(;B<b.length&&b[B]<=p;)B++;B=Math.max(0,B-1);let h=B;for(;h<b.length&&b[h]<p+1;)h++;h=Math.min(b.length-1,h);const g=b[B],w=b[h];return A.kind==="composite"?{kind:"composite",minZoom:g,maxZoom:w,interpolationType:x}:{kind:"camera",minZoom:g,maxZoom:w,minSize:A.evaluate(new ao(g)),maxSize:A.evaluate(new ao(w)),interpolationType:x}}}function X0(p,l,A){let b="never";const x=p.get(l);return x?b=x:p.get(A)&&(b="always"),b}const Nf=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Yc(p,l,A,b,x,B,h,g,w,k,F,j,H){const ne=g?Math.min(Zh,Math.round(g[0])):0,ie=g?Math.min(Zh,Math.round(g[1])):0;p.emplaceBack(l,A,Math.round(32*b),Math.round(32*x),B,h,(ne<<1)+(w?1:0),ie,16*k,16*F,256*j,256*H)}function om(p,l,A){p.emplaceBack(l.x,l.y,A),p.emplaceBack(l.x,l.y,A),p.emplaceBack(l.x,l.y,A),p.emplaceBack(l.x,l.y,A)}function $2(p){for(const l of p.sections)if(Ru(l.text))return!0;return!1}class My{constructor(l){this.layoutVertexArray=new Nt,this.indexArray=new Sn,this.programConfigurations=l,this.segments=new Fi,this.dynamicLayoutVertexArray=new Kt,this.opacityVertexArray=new Ft,this.hasVisibleVertices=!1,this.placedSymbolArray=new q}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(l,A,b,x){this.isEmpty()||(b&&(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,rl.members),this.indexBuffer=l.createIndexBuffer(this.indexArray,A),this.dynamicLayoutVertexBuffer=l.createVertexBuffer(this.dynamicLayoutVertexArray,zf.members,!0),this.opacityVertexBuffer=l.createVertexBuffer(this.opacityVertexArray,Nf,!0),this.opacityVertexBuffer.itemSize=1),(b||x)&&this.programConfigurations.upload(l))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Gn("SymbolBuffers",My);class wy{constructor(l,A,b){this.layoutVertexArray=new l,this.layoutAttributes=A,this.indexArray=new b,this.segments=new Fi,this.collisionVertexArray=new pn}upload(l){this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=l.createVertexBuffer(this.collisionVertexArray,Cg.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Gn("CollisionBuffers",wy);class sm{constructor(l){this.collisionBoxArray=l.collisionBoxArray,this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((h=>h.id)),this.index=l.index,this.pixelRatio=l.pixelRatio,this.sourceLayerIndex=l.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const A=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Z0(this.zoom,A["text-size"]),this.iconSizeData=Z0(this.zoom,A["icon-size"]);const b=this.layers[0].layout,x=b.get("symbol-sort-key"),B=b.get("symbol-z-order");this.canOverlap=X0(b,"text-overlap","text-allow-overlap")!=="never"||X0(b,"icon-overlap","icon-allow-overlap")!=="never"||b.get("text-ignore-placement")||b.get("icon-ignore-placement"),this.sortFeaturesByKey=B!=="viewport-y"&&!x.isConstant(),this.sortFeaturesByY=(B==="viewport-y"||B==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,b.get("symbol-placement")==="point"&&(this.writingModes=b.get("text-writing-mode").map((h=>s.ay[h]))),this.stateDependentLayerIds=this.layers.filter((h=>h.isStateDependent())).map((h=>h.id)),this.sourceID=l.sourceID}createArrays(){this.text=new My(new MA(this.layers,this.zoom,(l=>/^text/.test(l)))),this.icon=new My(new MA(this.layers,this.zoom,(l=>/^icon/.test(l)))),this.glyphOffsetArray=new me,this.lineVertexArray=new pe,this.symbolInstances=new le,this.textAnchorOffsets=new Le}calculateGlyphDependencies(l,A,b,x,B){for(const h of l)if(A[h.codePointAt(0)]=!0,(b||x)&&B){const g=Vd[h];g&&(A[g.codePointAt(0)]=!0)}}populate(l,A,b){const x=this.layers[0],B=x.layout,h=B.get("text-font"),g=B.get("text-field"),w=B.get("icon-image"),k=(g.value.kind!=="constant"||g.value.value instanceof yo&&!g.value.value.isEmpty()||g.value.value.toString().length>0)&&(h.value.kind!=="constant"||h.value.value.length>0),F=w.value.kind!=="constant"||!!w.value.value||Object.keys(w.parameters).length>0,j=B.get("symbol-sort-key");if(this.features=[],!k&&!F)return;const H=A.iconDependencies,ne=A.glyphDependencies,ie=A.availableImages,Ae=new ao(this.zoom);for(const{feature:de,id:Me,index:We,sourceLayerIndex:Ue}of l){const je=x._featureFilter.needGeometry,ot=js(de,je);if(!x._featureFilter.filter(Ae,ot,b))continue;let nt,Mt;if(je||(ot.geometry=wA(de)),k){const Jt=x.getValueAndResolveTokens("text-field",ot,b,ie),on=yo.factory(Jt),kn=this.hasRTLText=this.hasRTLText||$2(on);(!kn||tl.getRTLTextPluginStatus()==="unavailable"||kn&&tl.isParsed())&&(nt=Yv(on,x,ot))}if(F){const Jt=x.getValueAndResolveTokens("icon-image",ot,b,ie);Mt=Jt instanceof po?Jt:po.fromString(Jt)}if(!nt&&!Mt)continue;const Vt=this.sortFeaturesByKey?j.evaluate(ot,{},b):void 0;if(this.features.push({id:Me,text:nt,icon:Mt,index:We,sourceLayerIndex:Ue,geometry:ot.geometry,properties:de.properties,type:Xp.types[de.type],sortKey:Vt}),Mt&&(H[Mt.name]=!0),nt){const Jt=h.evaluate(ot,{},b).join(","),on=B.get("text-rotation-alignment")!=="viewport"&&B.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(s.ay.vertical)>=0;for(const kn of nt.sections)if(kn.image)H[kn.image.name]=!0;else{const An=Pd(nt.toString()),Cn=kn.fontStack||Jt,en=ne[Cn]=ne[Cn]||{};this.calculateGlyphDependencies(kn.text,en,on,this.allowVerticalPlacement,An)}}}B.get("symbol-placement")==="line"&&(this.features=(function(de){const Me={},We={},Ue=[];let je=0;function ot(Jt){Ue.push(de[Jt]),je++}function nt(Jt,on,kn){const An=We[Jt];return delete We[Jt],We[on]=An,Ue[An].geometry[0].pop(),Ue[An].geometry[0]=Ue[An].geometry[0].concat(kn[0]),An}function Mt(Jt,on,kn){const An=Me[on];return delete Me[on],Me[Jt]=An,Ue[An].geometry[0].shift(),Ue[An].geometry[0]=kn[0].concat(Ue[An].geometry[0]),An}function Vt(Jt,on,kn){const An=kn?on[0][on[0].length-1]:on[0][0];return`${Jt}:${An.x}:${An.y}`}for(let Jt=0;Jt<de.length;Jt++){const on=de[Jt],kn=on.geometry,An=on.text?on.text.toString():null;if(!An){ot(Jt);continue}const Cn=Vt(An,kn),en=Vt(An,kn,!0);if(Cn in We&&en in Me&&We[Cn]!==Me[en]){const xi=Mt(Cn,en,kn),Ei=nt(Cn,en,Ue[xi].geometry);delete Me[Cn],delete We[en],We[Vt(An,Ue[Ei].geometry,!0)]=Ei,Ue[xi].geometry=null}else Cn in We?nt(Cn,en,kn):en in Me?Mt(Cn,en,kn):(ot(Jt),Me[Cn]=je-1,We[en]=je-1)}return Ue.filter((Jt=>Jt.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((de,Me)=>de.sortKey-Me.sortKey))}update(l,A,b){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(l,A,this.layers,{imagePositions:b}),this.icon.programConfigurations.updatePaintArrays(l,A,this.layers,{imagePositions:b}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(l){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(l),this.iconCollisionBox.upload(l)),this.text.upload(l,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(l,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(l,A){const b=this.lineVertexArray.length;if(l.segment!==void 0){let x=l.dist(A[l.segment+1]),B=l.dist(A[l.segment]);const h={};for(let g=l.segment+1;g<A.length;g++)h[g]={x:A[g].x,y:A[g].y,tileUnitDistanceFromAnchor:x},g<A.length-1&&(x+=A[g+1].dist(A[g]));for(let g=l.segment||0;g>=0;g--)h[g]={x:A[g].x,y:A[g].y,tileUnitDistanceFromAnchor:B},g>0&&(B+=A[g-1].dist(A[g]));for(let g=0;g<A.length;g++){const w=h[g];this.lineVertexArray.emplaceBack(w.x,w.y,w.tileUnitDistanceFromAnchor)}}return{lineStartIndex:b,lineLength:this.lineVertexArray.length-b}}addSymbols(l,A,b,x,B,h,g,w,k,F,j,H){const ne=l.indexArray,ie=l.layoutVertexArray,Ae=l.segments.prepareSegment(4*A.length,ie,ne,this.canOverlap?h.sortKey:void 0),de=this.glyphOffsetArray.length,Me=Ae.vertexLength,We=this.allowVerticalPlacement&&g===s.ay.vertical?Math.PI/2:0,Ue=h.text&&h.text.sections;for(let je=0;je<A.length;je++){const{tl:ot,tr:nt,bl:Mt,br:Vt,tex:Jt,pixelOffsetTL:on,pixelOffsetBR:kn,minFontScaleX:An,minFontScaleY:Cn,glyphOffset:en,isSDF:xi,sectionIndex:Ei}=A[je],Ri=Ae.vertexLength,oi=en[1];Yc(ie,w.x,w.y,ot.x,oi+ot.y,Jt.x,Jt.y,b,xi,on.x,on.y,An,Cn),Yc(ie,w.x,w.y,nt.x,oi+nt.y,Jt.x+Jt.w,Jt.y,b,xi,kn.x,on.y,An,Cn),Yc(ie,w.x,w.y,Mt.x,oi+Mt.y,Jt.x,Jt.y+Jt.h,b,xi,on.x,kn.y,An,Cn),Yc(ie,w.x,w.y,Vt.x,oi+Vt.y,Jt.x+Jt.w,Jt.y+Jt.h,b,xi,kn.x,kn.y,An,Cn),om(l.dynamicLayoutVertexArray,w,We),ne.emplaceBack(Ri,Ri+2,Ri+1),ne.emplaceBack(Ri+1,Ri+2,Ri+3),Ae.vertexLength+=4,Ae.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(en[0]),je!==A.length-1&&Ei===A[je+1].sectionIndex||l.programConfigurations.populatePaintArrays(ie.length,h,h.index,{imagePositions:{},canonical:H,formattedSection:Ue&&Ue[Ei]})}l.placedSymbolArray.emplaceBack(w.x,w.y,de,this.glyphOffsetArray.length-de,Me,k,F,w.segment,b?b[0]:0,b?b[1]:0,x[0],x[1],g,0,!1,0,j)}_addCollisionDebugVertex(l,A,b,x,B,h){return A.emplaceBack(0,0),l.emplaceBack(b.x,b.y,x,B,Math.round(h.x),Math.round(h.y))}addCollisionDebugVertices(l,A,b,x,B,h,g){const w=B.segments.prepareSegment(4,B.layoutVertexArray,B.indexArray),k=w.vertexLength,F=B.layoutVertexArray,j=B.collisionVertexArray,H=g.anchorX,ne=g.anchorY;this._addCollisionDebugVertex(F,j,h,H,ne,new c(l,A)),this._addCollisionDebugVertex(F,j,h,H,ne,new c(b,A)),this._addCollisionDebugVertex(F,j,h,H,ne,new c(b,x)),this._addCollisionDebugVertex(F,j,h,H,ne,new c(l,x)),w.vertexLength+=4;const ie=B.indexArray;ie.emplaceBack(k,k+1),ie.emplaceBack(k+1,k+2),ie.emplaceBack(k+2,k+3),ie.emplaceBack(k+3,k),w.primitiveLength+=4}addDebugCollisionBoxes(l,A,b,x){for(let B=l;B<A;B++){const h=this.collisionBoxArray.get(B);this.addCollisionDebugVertices(h.x1,h.y1,h.x2,h.y2,x?this.textCollisionBox:this.iconCollisionBox,h.anchorPoint,b)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new wy(jt,Vh.members,rn),this.iconCollisionBox=new wy(jt,Vh.members,rn);for(let l=0;l<this.symbolInstances.length;l++){const A=this.symbolInstances.get(l);this.addDebugCollisionBoxes(A.textBoxStartIndex,A.textBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.verticalTextBoxStartIndex,A.verticalTextBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.iconBoxStartIndex,A.iconBoxEndIndex,A,!1),this.addDebugCollisionBoxes(A.verticalIconBoxStartIndex,A.verticalIconBoxEndIndex,A,!1)}}_deserializeCollisionBoxesForSymbol(l,A,b,x,B,h,g,w,k){const F={};for(let j=A;j<b;j++){const H=l.get(j);F.textBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},F.textFeatureIndex=H.featureIndex;break}for(let j=x;j<B;j++){const H=l.get(j);F.verticalTextBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},F.verticalTextFeatureIndex=H.featureIndex;break}for(let j=h;j<g;j++){const H=l.get(j);F.iconBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},F.iconFeatureIndex=H.featureIndex;break}for(let j=w;j<k;j++){const H=l.get(j);F.verticalIconBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},F.verticalIconFeatureIndex=H.featureIndex;break}return F}deserializeCollisionBoxes(l){this.collisionArrays=[];for(let A=0;A<this.symbolInstances.length;A++){const b=this.symbolInstances.get(A);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(l,b.textBoxStartIndex,b.textBoxEndIndex,b.verticalTextBoxStartIndex,b.verticalTextBoxEndIndex,b.iconBoxStartIndex,b.iconBoxEndIndex,b.verticalIconBoxStartIndex,b.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(l,A){const b=l.placedSymbolArray.get(A),x=b.vertexStartIndex+4*b.numGlyphs;for(let B=b.vertexStartIndex;B<x;B+=4)l.indexArray.emplaceBack(B,B+2,B+1),l.indexArray.emplaceBack(B+1,B+2,B+3)}getSortedSymbolIndexes(l){if(this.sortedAngle===l&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const A=Math.sin(l),b=Math.cos(l),x=[],B=[],h=[];for(let g=0;g<this.symbolInstances.length;++g){h.push(g);const w=this.symbolInstances.get(g);x.push(0|Math.round(A*w.anchorX+b*w.anchorY)),B.push(w.featureIndex)}return h.sort(((g,w)=>x[g]-x[w]||B[w]-B[g])),h}addToSortKeyRanges(l,A){const b=this.sortKeyRanges[this.sortKeyRanges.length-1];b&&b.sortKey===A?b.symbolInstanceEnd=l+1:this.sortKeyRanges.push({sortKey:A,symbolInstanceStart:l,symbolInstanceEnd:l+1})}sortFeatures(l){if(this.sortFeaturesByY&&this.sortedAngle!==l&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(l),this.sortedAngle=l,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const A of this.symbolInstanceIndexes){const b=this.symbolInstances.get(A);this.featureSortOrder.push(b.featureIndex),[b.rightJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.leftJustifiedTextSymbolIndex].forEach(((x,B,h)=>{x>=0&&h.indexOf(x)===B&&this.addIndicesForPlacedSymbol(this.text,x)})),b.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,b.verticalPlacedTextSymbolIndex),b.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,b.placedIconSymbolIndex),b.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,b.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let nb,s_;Gn("SymbolBucket",sm,{omit:["layers","collisionBoxArray","features","compareText"]}),sm.MAX_GLYPHS=65535,sm.addDynamicAttributes=om;var Fu={get paint(){return s_=s_||new Qo({"icon-opacity":new wi(Re.paint_symbol["icon-opacity"]),"icon-color":new wi(Re.paint_symbol["icon-color"]),"icon-halo-color":new wi(Re.paint_symbol["icon-halo-color"]),"icon-halo-width":new wi(Re.paint_symbol["icon-halo-width"]),"icon-halo-blur":new wi(Re.paint_symbol["icon-halo-blur"]),"icon-translate":new Vn(Re.paint_symbol["icon-translate"]),"icon-translate-anchor":new Vn(Re.paint_symbol["icon-translate-anchor"]),"text-opacity":new wi(Re.paint_symbol["text-opacity"]),"text-color":new wi(Re.paint_symbol["text-color"],{runtimeType:nr,getOverride:p=>p.textColor,hasOverride:p=>!!p.textColor}),"text-halo-color":new wi(Re.paint_symbol["text-halo-color"]),"text-halo-width":new wi(Re.paint_symbol["text-halo-width"]),"text-halo-blur":new wi(Re.paint_symbol["text-halo-blur"]),"text-translate":new Vn(Re.paint_symbol["text-translate"]),"text-translate-anchor":new Vn(Re.paint_symbol["text-translate-anchor"])})},get layout(){return nb=nb||new Qo({"symbol-placement":new Vn(Re.layout_symbol["symbol-placement"]),"symbol-spacing":new Vn(Re.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Vn(Re.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new wi(Re.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Vn(Re.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Vn(Re.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Vn(Re.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Vn(Re.layout_symbol["icon-ignore-placement"]),"icon-optional":new Vn(Re.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Vn(Re.layout_symbol["icon-rotation-alignment"]),"icon-size":new wi(Re.layout_symbol["icon-size"]),"icon-text-fit":new Vn(Re.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Vn(Re.layout_symbol["icon-text-fit-padding"]),"icon-image":new wi(Re.layout_symbol["icon-image"]),"icon-rotate":new wi(Re.layout_symbol["icon-rotate"]),"icon-padding":new wi(Re.layout_symbol["icon-padding"]),"icon-keep-upright":new Vn(Re.layout_symbol["icon-keep-upright"]),"icon-offset":new wi(Re.layout_symbol["icon-offset"]),"icon-anchor":new wi(Re.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Vn(Re.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Vn(Re.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Vn(Re.layout_symbol["text-rotation-alignment"]),"text-field":new wi(Re.layout_symbol["text-field"]),"text-font":new wi(Re.layout_symbol["text-font"]),"text-size":new wi(Re.layout_symbol["text-size"]),"text-max-width":new wi(Re.layout_symbol["text-max-width"]),"text-line-height":new Vn(Re.layout_symbol["text-line-height"]),"text-letter-spacing":new wi(Re.layout_symbol["text-letter-spacing"]),"text-justify":new wi(Re.layout_symbol["text-justify"]),"text-radial-offset":new wi(Re.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Vn(Re.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new wi(Re.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new wi(Re.layout_symbol["text-anchor"]),"text-max-angle":new Vn(Re.layout_symbol["text-max-angle"]),"text-writing-mode":new Vn(Re.layout_symbol["text-writing-mode"]),"text-rotate":new wi(Re.layout_symbol["text-rotate"]),"text-padding":new Vn(Re.layout_symbol["text-padding"]),"text-keep-upright":new Vn(Re.layout_symbol["text-keep-upright"]),"text-transform":new wi(Re.layout_symbol["text-transform"]),"text-offset":new wi(Re.layout_symbol["text-offset"]),"text-allow-overlap":new Vn(Re.layout_symbol["text-allow-overlap"]),"text-overlap":new Vn(Re.layout_symbol["text-overlap"]),"text-ignore-placement":new Vn(Re.layout_symbol["text-ignore-placement"]),"text-optional":new Vn(Re.layout_symbol["text-optional"])})}};class ib{constructor(l){if(l.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=l.property.overrides?l.property.overrides.runtimeType:tr,this.defaultValue=l}evaluate(l){if(l.formattedSection){const A=this.defaultValue.property.overrides;if(A&&A.hasOverride(l.formattedSection))return A.getOverride(l.formattedSection)}return l.feature&&l.featureState?this.defaultValue.evaluate(l.feature,l.featureState):this.defaultValue.property.specification.default}eachChild(l){this.defaultValue.isConstant()||l(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Gn("FormatSectionOverride",ib,{omit:["defaultValue"]});class J0 extends ka{constructor(l,A){super(l,Fu,A)}recalculate(l,A){if(super.recalculate(l,A),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const b=this.layout.get("text-writing-mode");if(b){const x=[];for(const B of b)x.indexOf(B)<0&&x.push(B);this.layout._values["text-writing-mode"]=x}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(l,A,b,x){const B=this.layout.get(l).evaluate(A,{},b,x),h=this._unevaluatedLayout._values[l];return h.isDataDriven()||kh(h.value)||!B?B:(function(g,w){return w.replace(/{([^{}]+)}/g,((k,F)=>g&&F in g?String(g[F]):""))})(A.properties,B)}createBucket(l){return new sm(l)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const l of Fu.paint.overridableProperties){if(!J0.hasPaintOverride(this.layout,l))continue;const A=this.paint.get(l),b=new ib(A),x=new eh(b,A.property.specification);let B=null;B=A.value.kind==="constant"||A.value.kind==="source"?new Rh("source",x):new dl("composite",x,A.value.zoomStops),this.paint._values[l]=new au(A.property,B,A.parameters)}}_handleOverridablePaintPropertyUpdate(l,A,b){return!(!this.layout||A.isDataDriven()||b.isDataDriven())&&J0.hasPaintOverride(this.layout,l)}static hasPaintOverride(l,A){const b=l.get("text-field"),x=Fu.paint.properties[A];let B=!1;const h=g=>{for(const w of g)if(x.overrides&&x.overrides.hasOverride(w))return void(B=!0)};if(b.value.kind==="constant"&&b.value.value instanceof yo)h(b.value.value.sections);else if(b.value.kind==="source"||b.value.kind==="composite"){const g=k=>{B||(k instanceof yr&&Rr(k.value)===Xl?h(k.value.sections):k instanceof rA?h(k.sections):k.eachChild(g))},w=b.value;w._styleExpression&&g(w._styleExpression.expression)}return B}}let Gf;var lr={get paint(){return Gf=Gf||new Qo({"background-color":new Vn(Re.paint_background["background-color"]),"background-pattern":new If(Re.paint_background["background-pattern"]),"background-opacity":new Vn(Re.paint_background["background-opacity"])})}};class rb extends ka{constructor(l,A){super(l,lr,A)}}class fc extends ka{constructor(l,A){super(l,{},A),this.onAdd=b=>{this.implementation.onAdd&&this.implementation.onAdd(b,b.painter.context.gl)},this.onRemove=b=>{this.implementation.onRemove&&this.implementation.onRemove(b,b.painter.context.gl)},this.implementation=l}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class La{constructor(l){this._methodToThrottle=l,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const e1={once:!0},Xh=63710088e-1;class $d{constructor(l,A){if(isNaN(l)||isNaN(A))throw new Error(`Invalid LngLat object: (${l}, ${A})`);if(this.lng=+l,this.lat=+A,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new $d(Pt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(l){const A=Math.PI/180,b=this.lat*A,x=l.lat*A,B=Math.sin(b)*Math.sin(x)+Math.cos(b)*Math.cos(x)*Math.cos((l.lng-this.lng)*A);return Xh*Math.acos(Math.min(B,1))}static convert(l){if(l instanceof $d)return l;if(Array.isArray(l)&&(l.length===2||l.length===3))return new $d(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&typeof l=="object"&&l!==null)return new $d(Number("lng"in l?l.lng:l.lon),Number(l.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Lr=2*Math.PI*Xh;function Sy(p){return Lr*Math.cos(p*Math.PI/180)}function t1(p){return(180+p)/360}function Ey(p){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+p*Math.PI/360)))/360}function n1(p,l){return p/Sy(l)}function By(p){return 360*p-180}function hu(p){return 360/Math.PI*Math.atan(Math.exp((180-360*p)*Math.PI/180))-90}function Mg(p,l){return p*Sy(hu(l))}class Wf{constructor(l,A,b=0){this.x=+l,this.y=+A,this.z=+b}static fromLngLat(l,A=0){const b=$d.convert(l);return new Wf(t1(b.lng),Ey(b.lat),n1(A,b.lat))}toLngLat(){return new $d(By(this.x),hu(this.y))}toAltitude(){return Mg(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Lr*(l=hu(this.y),1/Math.cos(l*Math.PI/180));var l}}function Ns(p,l,A){var b=2*Math.PI*6378137/256/Math.pow(2,A);return[p*b-2*Math.PI*6378137/2,l*b-2*Math.PI*6378137/2]}class $s{constructor(l,A,b){if(!(function(x,B,h){return!(x<0||x>25||h<0||h>=Math.pow(2,x)||B<0||B>=Math.pow(2,x))})(l,A,b))throw new Error(`x=${A}, y=${b}, z=${l} outside of bounds. 0<=x<${Math.pow(2,l)}, 0<=y<${Math.pow(2,l)} 0<=z<=25 `);this.z=l,this.x=A,this.y=b,this.key=am(0,l,l,A,b)}equals(l){return this.z===l.z&&this.x===l.x&&this.y===l.y}url(l,A,b){const x=(h=this.y,g=this.z,w=Ns(256*(B=this.x),256*(h=Math.pow(2,g)-h-1),g),k=Ns(256*(B+1),256*(h+1),g),w[0]+","+w[1]+","+k[0]+","+k[1]);var B,h,g,w,k;const F=(function(j,H,ne){let ie,Ae="";for(let de=j;de>0;de--)ie=1<<de-1,Ae+=(H&ie?1:0)+(ne&ie?2:0);return Ae})(this.z,this.x,this.y);return l[(this.x+this.y)%l.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(b==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,A>1?"@2x":"").replace(/{quadkey}/g,F).replace(/{bbox-epsg-3857}/g,x)}isChildOf(l){const A=this.z-l.z;return A>0&&l.x===this.x>>A&&l.y===this.y>>A}getTilePoint(l){const A=Math.pow(2,this.z);return new c((l.x*A-this.x)*ht,(l.y*A-this.y)*ht)}toString(){return`${this.z}/${this.x}/${this.y}`}}class ob{constructor(l,A){this.wrap=l,this.canonical=A,this.key=am(l,A.z,A.z,A.x,A.y)}}class pc{constructor(l,A,b,x,B){if(this.terrainRttPosMatrix32f=null,l<b)throw new Error(`overscaledZ should be >= z; overscaledZ = ${l}; z = ${b}`);this.overscaledZ=l,this.wrap=A,this.canonical=new $s(b,+x,+B),this.key=am(A,l,b,x,B)}clone(){return new pc(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(l){return this.overscaledZ===l.overscaledZ&&this.wrap===l.wrap&&this.canonical.equals(l.canonical)}scaledTo(l){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const A=this.canonical.z-l;return l>this.canonical.z?new pc(l,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new pc(l,this.wrap,l,this.canonical.x>>A,this.canonical.y>>A)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(l,A){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const b=this.canonical.z-l;return l>this.canonical.z?am(this.wrap*+A,l,this.canonical.z,this.canonical.x,this.canonical.y):am(this.wrap*+A,l,l,this.canonical.x>>b,this.canonical.y>>b)}isChildOf(l){if(l.wrap!==this.wrap||this.overscaledZ-l.overscaledZ<=0)return!1;if(l.overscaledZ===0)return this.overscaledZ>0;const A=this.canonical.z-l.canonical.z;return!(A<0)&&l.canonical.x===this.canonical.x>>A&&l.canonical.y===this.canonical.y>>A}children(l){if(this.overscaledZ>=l)return[new pc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const A=this.canonical.z+1,b=2*this.canonical.x,x=2*this.canonical.y;return[new pc(A,this.wrap,A,b,x),new pc(A,this.wrap,A,b+1,x),new pc(A,this.wrap,A,b,x+1),new pc(A,this.wrap,A,b+1,x+1)]}isLessThan(l){return this.wrap<l.wrap||!(this.wrap>l.wrap)&&(this.overscaledZ<l.overscaledZ||!(this.overscaledZ>l.overscaledZ)&&(this.canonical.x<l.canonical.x||!(this.canonical.x>l.canonical.x)&&this.canonical.y<l.canonical.y))}wrapped(){return new pc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(l){return new pc(this.overscaledZ,l,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new ob(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(l){return this.canonical.getTilePoint(new Wf(l.x-this.wrap,l.y))}}function am(p,l,A,b,x){(p*=2)<0&&(p=-1*p-1);const B=1<<A;return(B*B*p+B*x+b).toString(36)+A.toString(36)+l.toString(36)}function Co(p,l){return l?p.properties[l]:p.id}function sb(p,l){const A={id:p.id};if(l.removeAllProperties&&(delete p.removeProperties,delete p.addOrUpdateProperties,delete l.removeProperties),l.removeProperties)for(const b of l.removeProperties){const x=p.addOrUpdateProperties.findIndex((B=>B.key===b));x>-1&&p.addOrUpdateProperties.splice(x,1)}return(p.removeAllProperties||l.removeAllProperties)&&(A.removeAllProperties=!0),(p.removeProperties||l.removeProperties)&&(A.removeProperties=[...p.removeProperties||[],...l.removeProperties||[]]),(p.addOrUpdateProperties||l.addOrUpdateProperties)&&(A.addOrUpdateProperties=[...p.addOrUpdateProperties||[],...l.addOrUpdateProperties||[]]),(p.newGeometry||l.newGeometry)&&(A.newGeometry=l.newGeometry||p.newGeometry),A}function gl(p){var l,A;if(!p)return{};const b={};return b.removeAll=p.removeAll,b.remove=new Set(p.remove||[]),b.add=new Map((l=p.add)===null||l===void 0?void 0:l.map((x=>[x.id,x]))),b.update=new Map((A=p.update)===null||A===void 0?void 0:A.map((x=>[x.id,x]))),b}Gn("CanonicalTileID",$s),Gn("OverscaledTileID",pc,{omit:["terrainRttPosMatrix32f"]});class a_{constructor(l){this._stringToNumber={},this._numberToString=[];for(let A=0;A<l.length;A++){const b=l[A];this._stringToNumber[b]=A,this._numberToString[A]=b}}encode(l){return this._stringToNumber[l]}decode(l){if(l>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${l} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[l]}}class Oy{constructor(l,A,b,x,B){this.type="Feature",this._vectorTileFeature=l,l._z=A,l._x=b,l._y=x,this.properties=l.properties,this.id=B}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(l){this._geometry=l}toJSON(){const l={geometry:this.geometry};for(const A in this)A!=="_geometry"&&A!=="_vectorTileFeature"&&(l[A]=this[A]);return l}}class Jh{_name;dataBuffer;nullabilityBuffer;_size;constructor(l,A,b){this._name=l,this.dataBuffer=A,typeof b=="number"?this._size=b:(this.nullabilityBuffer=b,this._size=b.size())}getValue(l){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(l)?null:this.getValueFromBuffer(l)}has(l){return this.nullabilityBuffer&&this.nullabilityBuffer.get(l)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class Qf extends Jh{}class i1 extends Qf{getValueFromBuffer(l){return this.dataBuffer[l]}}class lm extends Qf{getValueFromBuffer(l){return this.dataBuffer[l]}}class wg extends Jh{delta;constructor(l,A,b,x){super(l,A,x),this.delta=b}}class du extends wg{constructor(l,A,b,x){super(l,Int32Array.of(A),b,x)}getValueFromBuffer(l){return this.dataBuffer[0]+l*this.delta}}class ed extends Jh{constructor(l,A,b){super(l,Int32Array.of(A),b)}getValueFromBuffer(l){return this.dataBuffer[0]}}class ab{_name;_geometryVector;_idVector;_propertyVectors;_extent;propertyVectorsMap;constructor(l,A,b,x,B=4096){this._name=l,this._geometryVector=A,this._idVector=b,this._propertyVectors=x,this._extent=B}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(l){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((A=>[A.name,A])))),this.propertyVectorsMap.get(l)}*[Symbol.iterator](){const l=this.geometryVector[Symbol.iterator]();let A=0;for(;A<this.numFeatures;){let b;this.idVector&&(b=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(A)):this.idVector.getValue(A));const x=l?.next().value,B={};for(const h of this.propertyVectors){if(!h)continue;const g=h.name,w=h.getValue(A);w!==null&&(B[g]=w)}A++,yield{id:b,geometry:x,properties:B}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const l=[],A=this.geometryVector.getGeometries();for(let b=0;b<this.numFeatures;b++){let x;this.idVector&&(x=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(b)):this.idVector.getValue(b));const B={coordinates:A[b],type:this.geometryVector.geometryType(b)},h={};for(const g of this.propertyVectors){if(!g)continue;const w=g.name,k=g.getValue(b);k!==null&&(h[w]=k)}l.push({id:x,geometry:B,properties:h})}return l}containsMaxSaveIntegerValues(l){return l instanceof i1||l instanceof ed&&l instanceof du||l instanceof lm}}class H2{value;constructor(l){this.value=l}get(){return this.value}set(l){this.value=l}increment(){return this.value++}add(l){this.value+=l}}var ol,vr,td,IA,zu,Oi,Ca,_o,r1,Vc;(function(p){p.PRESENT="PRESENT",p.DATA="DATA",p.OFFSET="OFFSET",p.LENGTH="LENGTH"})(ol||(ol={}));class xo{_dictionaryType;_offsetType;_lengthType;constructor(l,A,b){this._dictionaryType=l,this._offsetType=A,this._lengthType=b}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function _a(p,l,A){const b=new Int32Array(A);let x=0,B=l.get();for(let h=0;h<b.length;h++){let g=p[B++],w=127&g;g<128||(g=p[B++],w|=(127&g)<<7,g<128||(g=p[B++],w|=(127&g)<<14,g<128||(g=p[B++],w|=(127&g)<<21,g<128||(g=p[B++],w|=(15&g)<<28)))),b[x++]=w}return l.set(B),b}function um(p,l,A){const b=new BigInt64Array(A);for(let x=0;x<b.length;x++)b[x]=u_(p,l);return b}function Sg(p,l){let A,b;return b=p[l.get()],l.increment(),A=127&b,b<128?A:(b=p[l.get()],l.increment(),A|=(127&b)<<7,b<128?A:(b=p[l.get()],l.increment(),A|=(127&b)<<14,b<128?A:(b=p[l.get()],l.increment(),A|=(127&b)<<21,b<128?A:(b=p[l.get()],A|=(15&b)<<28,(function(x,B,h){let g,w;if(w=B[h.get()],h.increment(),g=(112&w)>>4,w<128||(w=B[h.get()],h.increment(),g|=(127&w)<<3,w<128)||(w=B[h.get()],h.increment(),g|=(127&w)<<10,w<128)||(w=B[h.get()],h.increment(),g|=(127&w)<<17,w<128)||(w=B[h.get()],h.increment(),g|=(127&w)<<24,w<128)||(w=B[h.get()],h.increment(),g|=(1&w)<<31,w<128))return 4294967296*g+(x>>>0);throw new Error("Expected varint not more than 10 bytes")})(A,p,l)))))}function l_(p,l,A,b){throw new Error("FastPFor is not implemented yet.")}function yl(p){return p>>>1^-(1&p)}function qf(p){return p>>1n^-(1n&p)}function u_(p,l){let A=0n,b=0,x=l.get();for(;x<p.length;){const B=p[x++];if(A|=BigInt(127&B)<<BigInt(b),!(128&B))break;if(b+=7,b>=64)throw new Error("Varint too long")}return l.set(x),A}function lb(p,l,A){const b=new Int32Array(A);let x=0;for(let B=0;B<l;B++){const h=p[B];b.fill(p[B+l],x,x+h),x+=h}return b}function ub(p,l,A){const b=new BigInt64Array(A);let x=0;for(let B=0;B<l;B++){const h=Number(p[B]);b.fill(p[B+l],x,x+h),x+=h}return b}function Eg(p,l,A){const b=new Float64Array(A);let x=0;for(let B=0;B<l;B++){const h=p[B];b.fill(p[B+l],x,x+h),x+=h}return b}function mc(p){const l=p.length/4*4;let A=1;if(l>=4)for(let b=p[0];A<l-4;A+=4)b=p[A]+=b,b=p[A+1]+=b,b=p[A+2]+=b,b=p[A+3]+=b;for(;A!=p.length;)p[A]+=p[A-1],++A}function cb(p){p[0]=p[0]>>>1^-(1&p[0]),p[1]=p[1]>>>1^-(1&p[1]);const l=p.length/4*4;let A=2;if(l>=4)for(;A<l-4;A+=4){const b=p[A],x=p[A+1],B=p[A+2],h=p[A+3];p[A]=(b>>>1^-(1&b))+p[A-2],p[A+1]=(x>>>1^-(1&x))+p[A-1],p[A+2]=(B>>>1^-(1&B))+p[A],p[A+3]=(h>>>1^-(1&h))+p[A+1]}for(;A!=p.length;A+=2)p[A]=(p[A]>>>1^-(1&p[A]))+p[A-2],p[A+1]=(p[A+1]>>>1^-(1&p[A+1]))+p[A-1]}function dh(p,l,A){return Math.min(A,Math.max(l,p))}(function(p){p.NONE="NONE",p.DELTA="DELTA",p.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",p.RLE="RLE",p.MORTON="MORTON",p.PDE="PDE"})(vr||(vr={})),(function(p){p.NONE="NONE",p.FAST_PFOR="FAST_PFOR",p.VARINT="VARINT",p.ALP="ALP"})(td||(td={})),(function(p){p.NONE="NONE",p.SINGLE="SINGLE",p.SHARED="SHARED",p.VERTEX="VERTEX",p.MORTON="MORTON",p.FSST="FSST"})(IA||(IA={})),(function(p){p.VERTEX="VERTEX",p.INDEX="INDEX",p.STRING="STRING",p.KEY="KEY"})(zu||(zu={})),(function(p){p.VAR_BINARY="VAR_BINARY",p.GEOMETRIES="GEOMETRIES",p.PARTS="PARTS",p.RINGS="RINGS",p.TRIANGLES="TRIANGLES",p.SYMBOL="SYMBOL",p.DICTIONARY="DICTIONARY"})(Oi||(Oi={}));class ju{_physicalStreamType;_logicalStreamType;_logicalLevelTechnique1;_logicalLevelTechnique2;_physicalLevelTechnique;_numValues;_byteLength;constructor(l,A,b,x,B,h,g){this._physicalStreamType=l,this._logicalStreamType=A,this._logicalLevelTechnique1=b,this._logicalLevelTechnique2=x,this._physicalLevelTechnique=B,this._numValues=h,this._byteLength=g}static decode(l,A){const b=l[A.get()],x=Object.values(ol)[b>>4];let B=null;switch(x){case ol.DATA:B=new xo(Object.values(IA)[15&b]);break;case ol.OFFSET:B=new xo(null,Object.values(zu)[15&b]);break;case ol.LENGTH:B=new xo(null,null,Object.values(Oi)[15&b])}A.increment();const h=l[A.get()],g=Object.values(vr)[h>>5],w=Object.values(vr)[h>>2&7],k=Object.values(td)[3&h];A.increment();const F=_a(l,A,2);return new ju(x,B,g,w,k,F[0],F[1])}get physicalStreamType(){return this._physicalStreamType}get logicalStreamType(){return this._logicalStreamType}get logicalLevelTechnique1(){return this._logicalLevelTechnique1}get logicalLevelTechnique2(){return this._logicalLevelTechnique2}get physicalLevelTechnique(){return this._physicalLevelTechnique}get numValues(){return this._numValues}get byteLength(){return this._byteLength}getDecompressedCount(){return this._numValues}}class Iy extends ju{num_bits;coordinate_shift;constructor(l,A,b,x,B,h,g,w,k){super(l,A,b,x,B,h,g),this.num_bits=w,this.coordinate_shift=k}static decode(l,A){const b=ju.decode(l,A),x=_a(l,A,2);return new Iy(b.physicalStreamType,b.logicalStreamType,b.logicalLevelTechnique1,b.logicalLevelTechnique2,b.physicalLevelTechnique,b.numValues,b.byteLength,x[0],x[1])}static decodePartial(l,A,b){const x=_a(A,b,2);return new Iy(l.physicalStreamType,l.logicalStreamType,l.logicalLevelTechnique1,l.logicalLevelTechnique2,l.physicalLevelTechnique,l.numValues,l.byteLength,x[0],x[1])}numBits(){return this.num_bits}coordinateShift(){return this.coordinate_shift}}class o1 extends ju{_runs;_numRleValues;constructor(l,A,b,x,B,h,g,w,k){super(l,A,b,x,B,h,g),this._runs=w,this._numRleValues=k}static decode(l,A){const b=ju.decode(l,A),x=_a(l,A,2);return new o1(b.physicalStreamType,b.logicalStreamType,b.logicalLevelTechnique1,b.logicalLevelTechnique2,b.physicalLevelTechnique,b.numValues,b.byteLength,x[0],x[1])}static decodePartial(l,A,b){const x=_a(A,b,2);return new o1(l.physicalStreamType,l.logicalStreamType,l.logicalLevelTechnique1,l.logicalLevelTechnique2,l.physicalLevelTechnique,l.numValues,l.byteLength,x[0],x[1])}get runs(){return this._runs}get numRleValues(){return this._numRleValues}getDecompressedCount(){return this._numRleValues}}class Hs{static decode(l,A){const b=ju.decode(l,A);return b.logicalLevelTechnique1===vr.MORTON?Iy.decodePartial(b,l,A):vr.RLE!==b.logicalLevelTechnique1&&vr.RLE!==b.logicalLevelTechnique2||td.NONE===b.physicalLevelTechnique?b:o1.decodePartial(b,l,A)}}(function(p){p[p.FLAT=0]="FLAT",p[p.CONST=1]="CONST",p[p.SEQUENCE=2]="SEQUENCE",p[p.DICTIONARY=3]="DICTIONARY",p[p.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(Ca||(Ca={}));class TA{values;_size;constructor(l,A){this.values=l,this._size=A}get(l){const A=Math.floor(l/8);return(this.values[A]>>l%8&1)==1}set(l,A){const b=Math.floor(l/8);this.values[b]=this.values[b]|(A?1:0)<<l%8}getInt(l){const A=Math.floor(l/8);return this.values[A]>>l%8&1}size(){return this._size}getBuffer(){return this.values}}class Gi{constructor(){}static decodeIntStream(l,A,b,x,B){const h=Gi.decodePhysicalLevelTechnique(l,A,b);return this.decodeIntBuffer(h,b,x,B)}static decodeLengthStreamToOffsetBuffer(l,A,b){const x=Gi.decodePhysicalLevelTechnique(l,A,b);return this.decodeLengthToOffsetBuffer(x,b)}static decodePhysicalLevelTechnique(l,A,b){const x=b.physicalLevelTechnique;if(x===td.FAST_PFOR)return l_();if(x===td.VARINT)return _a(l,A,b.numValues);if(x===td.NONE){const B=A.get();A.add(b.byteLength);const h=l.subarray(B,A.get());return new Int32Array(h)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}static decodeConstIntStream(l,A,b,x){const B=Gi.decodePhysicalLevelTechnique(l,A,b);if(B.length===1){const h=B[0];return x?yl(h):h}return x?(function(h){return yl(h[1])})(B):(function(h){return h[1]})(B)}static decodeSequenceIntStream(l,A,b){return(function(x){if(x.length==2){const B=yl(x[1]);return[B,B]}return[yl(x[2]),yl(x[3])]})(Gi.decodePhysicalLevelTechnique(l,A,b))}static decodeSequenceLongStream(l,A,b){return(function(x){if(x.length==2){const B=qf(x[1]);return[B,B]}return[qf(x[2]),qf(x[3])]})(um(l,A,b.numValues))}static decodeLongStream(l,A,b,x){const B=um(l,A,b.numValues);return this.decodeLongBuffer(B,b,x)}static decodeLongFloat64Stream(l,A,b,x){const B=(function(h,g,w){const k=new Float64Array(g);for(let F=0;F<g;F++)k[F]=Sg(h,w);return k})(l,b.numValues,A);return this.decodeFloat64Buffer(B,b,x)}static decodeConstLongStream(l,A,b,x){const B=um(l,A,b.numValues);if(B.length===1){const h=B[0];return x?qf(h):h}return x?(function(h){return qf(h[1])})(B):(function(h){return h[1]})(B)}static decodeIntBuffer(l,A,b,x){switch(A.logicalLevelTechnique1){case vr.DELTA:return A.logicalLevelTechnique2===vr.RLE?(function(B,h,g){const w=new Int32Array(g);let k=0,F=0;for(let j=0;j<h;j++){const H=B[j],ne=yl(B[j+h]);for(let ie=0;ie<H;ie++)F+=ne,w[k++]=F}return w})(l,A.runs,A.numRleValues):((function(B){B[0]=B[0]>>>1^-(1&B[0]);const h=B.length/4*4;let g=1;if(h>=4)for(;g<h-4;g+=4){const w=B[g],k=B[g+1],F=B[g+2],j=B[g+3];B[g]=(w>>>1^-(1&w))+B[g-1],B[g+1]=(k>>>1^-(1&k))+B[g],B[g+2]=(F>>>1^-(1&F))+B[g+1],B[g+3]=(j>>>1^-(1&j))+B[g+2]}for(;g!=B.length;++g)B[g]=(B[g]>>>1^-(1&B[g]))+B[g-1]})(l),l);case vr.RLE:return(function(B,h,g){return g?(function(w,k,F){const j=new Int32Array(F);let H=0;for(let ne=0;ne<k;ne++){const ie=w[ne];let Ae=w[ne+k];Ae=Ae>>>1^-(1&Ae),j.fill(Ae,H,H+ie),H+=ie}return j})(B,h.runs,h.numRleValues):lb(B,h.runs,h.numRleValues)})(l,A,b);case vr.MORTON:return mc(l),l;case vr.COMPONENTWISE_DELTA:return x?((function(B,h,g,w){let k=B[0]>>>1^-(1&B[0]),F=B[1]>>>1^-(1&B[1]);B[0]=dh(Math.round(k*h),g,w),B[1]=dh(Math.round(F*h),g,w);const j=B.length/16;let H=2;if(j>=4)for(;H<j-4;H+=4){const ne=B[H],ie=B[H+1],Ae=(ne>>>1^-(1&ne))+k,de=(ie>>>1^-(1&ie))+F;B[H]=dh(Math.round(Ae*h),g,w),B[H+1]=dh(Math.round(de*h),g,w);const Me=B[H+2],We=B[H+3];k=(Me>>>1^-(1&Me))+Ae,F=(We>>>1^-(1&We))+de,B[H+2]=dh(Math.round(k*h),g,w),B[H+3]=dh(Math.round(F*h),g,w)}for(;H!=B.length;H+=2)k+=B[H]>>>1^-(1&B[H]),F+=B[H+1]>>>1^-(1&B[H+1]),B[H]=dh(Math.round(k*h),g,w),B[H+1]=dh(Math.round(F*h),g,w)})(l,x.scale,x.min,x.max),l):(cb(l),l);case vr.NONE:return b&&(function(B){for(let h=0;h<B.length;h++){const g=B[h];B[h]=g>>>1^-(1&g)}})(l),l;default:throw new Error(`The specified Logical level technique is not supported: ${A.logicalLevelTechnique1}`)}}static decodeLongBuffer(l,A,b){switch(A.logicalLevelTechnique1){case vr.DELTA:return A.logicalLevelTechnique2===vr.RLE?(function(x,B,h){const g=new BigInt64Array(h);let w=0,k=0n;for(let F=0;F<B;F++){const j=Number(x[F]),H=qf(x[F+B]);for(let ne=0;ne<j;ne++)k+=H,g[w++]=k}return g})(l,A.runs,A.numRleValues):((function(x){x[0]=x[0]>>1n^-(1n&x[0]);const B=x.length/4*4;let h=1;if(B>=4)for(;h<B-4;h+=4){const g=x[h],w=x[h+1],k=x[h+2],F=x[h+3];x[h]=(g>>1n^-(1n&g))+x[h-1],x[h+1]=(w>>1n^-(1n&w))+x[h],x[h+2]=(k>>1n^-(1n&k))+x[h+1],x[h+3]=(F>>1n^-(1n&F))+x[h+2]}for(;h!=x.length;++h)x[h]=(x[h]>>1n^-(1n&x[h]))+x[h-1]})(l),l);case vr.RLE:return(function(x,B,h){return h?(function(g,w,k){const F=new BigInt64Array(k);let j=0;for(let H=0;H<w;H++){const ne=Number(g[H]);let ie=g[H+w];ie=ie>>1n^-(1n&ie),F.fill(ie,j,j+ne),j+=ne}return F})(x,B.runs,B.numRleValues):ub(x,B.runs,B.numRleValues)})(l,A,b);case vr.NONE:return b&&(function(x){for(let B=0;B<x.length;B++){const h=x[B];x[B]=h>>1n^-(1n&h)}})(l),l;default:throw new Error(`The specified Logical level technique is not supported: ${A.logicalLevelTechnique1}`)}}static decodeFloat64Buffer(l,A,b){switch(A.logicalLevelTechnique1){case vr.DELTA:return A.logicalLevelTechnique2===vr.RLE&&(l=Eg(l,A.runs,A.numRleValues)),(function(x){x[0]=x[0]%2==1?(x[0]+1)/-2:x[0]/2;const B=x.length/4*4;let h=1;if(B>=4)for(;h<B-4;h+=4){const g=x[h],w=x[h+1],k=x[h+2],F=x[h+3];x[h]=(g%2==1?(g+1)/-2:g/2)+x[h-1],x[h+1]=(w%2==1?(w+1)/-2:w/2)+x[h],x[h+2]=(k%2==1?(k+1)/-2:k/2)+x[h+1],x[h+3]=(F%2==1?(F+1)/-2:F/2)+x[h+2]}for(;h!=x.length;++h)x[h]=(x[h]%2==1?(x[h]+1)/-2:x[h]/2)+x[h-1]})(l),l;case vr.RLE:return(function(x,B,h){return h?(function(g,w,k){const F=new Float64Array(k);let j=0;for(let H=0;H<w;H++){const ne=g[H];let ie=g[H+w];ie=ie%2==1?(ie+1)/-2:ie/2,F.fill(ie,j,j+ne),j+=ne}return F})(x,B.runs,B.numRleValues):Eg(x,B.runs,B.numRleValues)})(l,A,b);case vr.NONE:return b&&(function(x){for(let B=0;B<x.length;B++){const h=x[B];x[B]=h%2==1?(h+1)/-2:h/2}})(l),l;default:throw new Error(`The specified Logical level technique is not supported: ${A.logicalLevelTechnique1}`)}}static decodeLengthToOffsetBuffer(l,A){if(A.logicalLevelTechnique1===vr.DELTA&&A.logicalLevelTechnique2===vr.NONE)return(function(b){const x=new Int32Array(b.length+1);x[0]=0,x[1]=yl(b[0]);let B=x[1],h=2;for(;h!=x.length;++h){const g=b[h-1];B+=g>>>1^-(1&g),x[h]=x[h-1]+B}return x})(l);if(A.logicalLevelTechnique1===vr.RLE&&A.logicalLevelTechnique2===vr.NONE)return(function(b,x,B){const h=new Int32Array(B+1);h[0]=0;let g=1,w=h[0];for(let k=0;k<x;k++){const F=b[k],j=b[k+x];for(let H=g;H<g+F;H++)h[H]=j+w,w=h[H];g+=F}return h})(l,A.runs,A.numRleValues);if(A.logicalLevelTechnique1===vr.NONE&&A.logicalLevelTechnique2===vr.NONE){(function(x){let B=0;for(let h=0;h<x.length;h++)x[h]+=B,B=x[h]})(l);const b=new Int32Array(A.numValues+1);return b[0]=0,b.set(l,1),b}if(A.logicalLevelTechnique1===vr.DELTA&&A.logicalLevelTechnique2===vr.RLE){const b=(function(x,B,h){const g=new Int32Array(h+1);g[0]=0;let w=1,k=g[0];for(let F=0;F<B;F++){const j=x[F];let H=x[F+B];H=H>>>1^-(1&H);for(let ne=w;ne<w+j;ne++)g[ne]=H+k,k=g[ne];w+=j}return g})(l,A.runs,A.numRleValues);return mc(b),b}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")}static decodeNullableIntStream(l,A,b,x,B){const h=b.physicalLevelTechnique===td.FAST_PFOR?l_():_a(l,A,b.numValues);return this.decodeNullableIntBuffer(h,b,x,B)}static decodeNullableLongStream(l,A,b,x,B){const h=um(l,A,b.numValues);return this.decodeNullableLongBuffer(h,b,x,B)}static decodeNullableIntBuffer(l,A,b,x){switch(A.logicalLevelTechnique1){case vr.DELTA:return A.logicalLevelTechnique2===vr.RLE&&(l=lb(l,A.runs,A.numRleValues)),(function(B,h){const g=new Int32Array(B.size());let w=0;B.get(0)?(g[0]=B.get(0)?h[0]>>>1^-(1&h[0]):0,w=1):g[0]=0;let k=1;for(;k!=g.length;++k)g[k]=B.get(k)?g[k-1]+(h[w]>>>1^-(1&h[w++])):g[k-1];return g})(x,l);case vr.RLE:return(function(B,h,g,w){const k=h;return g?(function(F,j,H){const ne=new Int32Array(F.size());let ie=0;for(let Ae=0;Ae<H;Ae++){const de=j[Ae];let Me=j[Ae+H];Me=Me>>>1^-(1&Me);for(let We=ie;We<ie+de;We++)F.get(We)?ne[We]=Me:(ne[We]=0,ie++);ie+=de}return ne})(w,B,k.runs):(function(F,j,H){const ne=new Int32Array(F.size());let ie=0;for(let Ae=0;Ae<H;Ae++){const de=j[Ae],Me=j[Ae+H];for(let We=ie;We<ie+de;We++)F.get(We)?ne[We]=Me:(ne[We]=0,ie++);ie+=de}return ne})(w,B,k.runs)})(l,A,b,x);case vr.MORTON:return mc(l),l;case vr.COMPONENTWISE_DELTA:return cb(l),l;case vr.NONE:return l=b?(function(B,h){const g=new Int32Array(B.size());let w=0,k=0;for(;k!=g.length;++k)if(B.get(k)){const F=h[w++];g[k]=F>>>1^-(1&F)}else g[k]=0;return g})(x,l):(function(B,h){const g=new Int32Array(B.size());let w=0,k=0;for(;k!=g.length;++k)g[k]=B.get(k)?h[w++]:0;return g})(x,l),l;default:throw new Error("The specified Logical level technique is not supported")}}static decodeNullableLongBuffer(l,A,b,x){switch(A.logicalLevelTechnique1){case vr.DELTA:return A.logicalLevelTechnique2===vr.RLE&&(l=ub(l,A.runs,A.numRleValues)),(function(B,h){const g=new BigInt64Array(B.size());let w=0;B.get(0)?(g[0]=B.get(0)?h[0]>>1n^-(1n&h[0]):0n,w=1):g[0]=0n;let k=1;for(;k!=g.length;++k)g[k]=B.get(k)?g[k-1]+(h[w]>>1n^-(1n&h[w++])):g[k-1];return g})(x,l);case vr.RLE:return(function(B,h,g,w){const k=h;return g?(function(F,j,H){const ne=new BigInt64Array(F.size());let ie=0;for(let Ae=0;Ae<H;Ae++){const de=Number(j[Ae]);let Me=j[Ae+H];Me=Me>>1n^-(1n&Me);for(let We=ie;We<ie+de;We++)F.get(We)?ne[We]=Me:(ne[We]=0n,ie++);ie+=de}return ne})(w,B,k.runs):(function(F,j,H){const ne=new BigInt64Array(F.size());let ie=0;for(let Ae=0;Ae<H;Ae++){const de=Number(j[Ae]),Me=j[Ae+H];for(let We=ie;We<ie+de;We++)F.get(We)?ne[We]=Me:(ne[We]=0n,ie++);ie+=de}return ne})(w,B,k.runs)})(l,A,b,x);case vr.NONE:return l=b?(function(B,h){const g=new BigInt64Array(B.size());let w=0,k=0;for(;k!=g.length;++k)if(B.get(k)){const F=h[w++];g[k]=F>>1n^-(1n&F)}else g[k]=0n;return g})(x,l):(function(B,h){const g=new BigInt64Array(B.size());let w=0,k=0;for(;k!=g.length;++k)g[k]=B.get(k)?h[w++]:0n;return g})(x,l),l;default:throw new Error("The specified Logical level technique is not supported")}}static getVectorType(l,A,b,x){const B=l.logicalLevelTechnique1;if(B===vr.RLE)return l.runs===1?Ca.CONST:Ca.FLAT;const h=A instanceof TA?A.size():A;if(B===vr.DELTA&&l.logicalLevelTechnique2===vr.RLE){const g=l.runs,w=2;if(l.numRleValues!==h)return Ca.FLAT;if(g===1)return Ca.SEQUENCE;if(g===2){const k=x.get();let F;if(l.physicalLevelTechnique===td.VARINT)F=_a(b,x,4);else{const j=x.get();F=new Int32Array(b.buffer,b.byteOffset+j,4)}if(x.set(k),F[2]===w&&F[3]===w)return Ca.SEQUENCE}}return l.numValues===1?Ca.CONST:Ca.FLAT}}class c_ extends Qf{getValueFromBuffer(l){return this.dataBuffer[l]}}class A_ extends wg{constructor(l,A,b,x){super(l,BigInt64Array.of(A),b,x)}getValueFromBuffer(l){return this.dataBuffer[0]+BigInt(l)*this.delta}}class Bg{_geometryOffsets;_partOffsets;_ringOffsets;constructor(l,A,b){this._geometryOffsets=l,this._partOffsets=A,this._ringOffsets=b}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}class vl{tileExtent;_numBits;_coordinateShift;minBound;maxBound;constructor(l,A){this._coordinateShift=l<0?Math.abs(l):0,this.tileExtent=A+this._coordinateShift,this._numBits=Math.ceil(Math.log2(this.tileExtent)),this.minBound=l,this.maxBound=A}validateCoordinates(l){if(l.x<this.minBound||l.y<this.minBound||l.x>this.maxBound||l.y>this.maxBound)throw new Error("The specified tile buffer size is currently not supported.")}numBits(){return this._numBits}coordinateShift(){return this._coordinateShift}}class sl extends vl{encode(l){this.validateCoordinates(l);const A=l.x+this._coordinateShift,b=l.y+this._coordinateShift;let x=0;for(let B=0;B<this._numBits;B++)x|=(A&1<<B)<<B|(b&1<<B)<<B+1;return x}decode(l){return{x:this.decodeMorton(l)-this._coordinateShift,y:this.decodeMorton(l>>1)-this._coordinateShift}}decodeMorton(l){let A=0;for(let b=0;b<this._numBits;b++)A|=(l&1<<2*b)>>b;return A}static decode(l,A,b){return{x:sl.decodeMorton(l,A)-b,y:sl.decodeMorton(l>>1,A)-b}}static decodeMorton(l,A){let b=0;for(let x=0;x<A;x++)b|=(l&1<<2*x)>>x;return b}}(function(p){p[p.POINT=0]="POINT",p[p.LINESTRING=1]="LINESTRING",p[p.POLYGON=2]="POLYGON",p[p.MULTIPOINT=3]="MULTIPOINT",p[p.MULTILINESTRING=4]="MULTILINESTRING",p[p.MULTIPOLYGON=5]="MULTIPOLYGON"})(_o||(_o={})),(function(p){p[p.POINT=0]="POINT",p[p.LINESTRING=1]="LINESTRING",p[p.POLYGON=2]="POLYGON"})(r1||(r1={})),(function(p){p[p.MORTON=0]="MORTON",p[p.VEC_2=1]="VEC_2",p[p.VEC_3=2]="VEC_3"})(Vc||(Vc={}));class Z2{createPoint(l){return[[l]]}createMultiPoint(l){return l.map((A=>[A]))}createLineString(l){return[l]}createMultiLineString(l){return l}createPolygon(l,A){return[l,...A]}createMultiPolygon(l){return l.flat()}}function Ab(p){const l=new Array(p.numGeometries);let A=1,b=1,x=1,B=0;const h=new Z2;let g=0,w=0;const k=p.mortonSettings,F=p.topologyVector,j=F.geometryOffsets,H=F.partOffsets,ne=F.ringOffsets,ie=p.vertexOffsets,Ae=p.containsPolygonGeometry(),de=p.vertexBuffer;for(let Me=0;Me<p.numGeometries;Me++){const We=p.geometryType(Me);if(We===_o.POINT){if(ie&&ie.length!==0)if(p.vertexBufferType===Vc.VEC_2){const Ue=2*ie[w++],je=new c(de[Ue],de[Ue+1]);l[B++]=h.createPoint(je)}else{const Ue=ie[w++],je=sl.decode(de[Ue],k.numBits,k.coordinateShift),ot=new c(je.x,je.y);l[B++]=h.createPoint(ot)}else{const Ue=new c(de[g++],de[g++]);l[B++]=h.createPoint(Ue)}j&&x++,H&&A++,ne&&b++}else if(We===_o.MULTIPOINT){const Ue=j[x]-j[x-1];x++;const je=new Array(Ue);if(ie&&ie.length!==0){for(let ot=0;ot<Ue;ot++){const nt=2*ie[w++];je[ot]=new c(de[nt],de[nt+1])}l[B++]=h.createMultiPoint(je)}else{for(let ot=0;ot<Ue;ot++){const nt=de[g++],Mt=de[g++];je[ot]=new c(nt,Mt)}l[B++]=h.createMultiPoint(je)}}else if(We===_o.LINESTRING){let Ue,je=0;Ae?(je=ne[b]-ne[b-1],b++):je=H[A]-H[A-1],A++,ie&&ie.length!==0?(Ue=p.vertexBufferType===Vc.VEC_2?Yf(de,ie,w,je,!1):Vf(de,ie,w,je,!1,k),w+=je):(Ue=hb(de,g,je,!1),g+=2*je),l[B++]=h.createLineString(Ue),j&&x++}else if(We===_o.POLYGON){const Ue=H[A]-H[A-1];A++;const je=new Array(Ue-1);let ot=ne[b]-ne[b-1];if(b++,ie&&ie.length!==0){const nt=p.vertexBufferType===Vc.VEC_2?Zd(de,ie,w,ot):s1(de,ie,w,ot,0,k);w+=ot;for(let Mt=0;Mt<je.length;Mt++)ot=ne[b]-ne[b-1],b++,je[Mt]=p.vertexBufferType===Vc.VEC_2?Zd(de,ie,w,ot):s1(de,ie,w,ot,0,k),w+=ot;l[B++]=h.createPolygon(nt,je)}else{const nt=Hd(de,g,ot);g+=2*ot;for(let Mt=0;Mt<je.length;Mt++)ot=ne[b]-ne[b-1],b++,je[Mt]=Hd(de,g,ot),g+=2*ot;l[B++]=h.createPolygon(nt,je)}j&&x++}else if(We===_o.MULTILINESTRING){const Ue=j[x]-j[x-1];x++;const je=new Array(Ue);if(ie&&ie.length!==0){for(let ot=0;ot<Ue;ot++){let nt=0;Ae?(nt=ne[b]-ne[b-1],b++):nt=H[A]-H[A-1],A++;const Mt=p.vertexBufferType===Vc.VEC_2?Yf(de,ie,w,nt,!1):Vf(de,ie,w,nt,!1,k);je[ot]=Mt,w+=nt}l[B++]=h.createMultiLineString(je)}else{for(let ot=0;ot<Ue;ot++){let nt=0;Ae?(nt=ne[b]-ne[b-1],b++):nt=H[A]-H[A-1],A++,je[ot]=hb(de,g,nt,!1),g+=2*nt}l[B++]=h.createMultiLineString(je)}}else{if(We!==_o.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const Ue=j[x]-j[x-1];x++;const je=new Array(Ue);let ot=0;if(ie&&ie.length!==0){for(let nt=0;nt<Ue;nt++){const Mt=H[A]-H[A-1];A++;const Vt=new Array(Mt-1);ot=ne[b]-ne[b-1],b++;const Jt=p.vertexBufferType===Vc.VEC_2?Zd(de,ie,w,ot):s1(de,ie,w,ot,0,k);w+=ot;for(let on=0;on<Vt.length;on++)ot=ne[b]-ne[b-1],b++,Vt[on]=p.vertexBufferType===Vc.VEC_2?Zd(de,ie,w,ot):s1(de,ie,w,ot,0,k),w+=ot;je[nt]=h.createPolygon(Jt,Vt)}l[B++]=h.createMultiPolygon(je)}else{for(let nt=0;nt<Ue;nt++){const Mt=H[A]-H[A-1];A++;const Vt=new Array(Mt-1);ot=ne[b]-ne[b-1],b++;const Jt=Hd(de,g,ot);g+=2*ot;for(let on=0;on<Vt.length;on++){const kn=ne[b]-ne[b-1];b++,Vt[on]=Hd(de,g,kn),g+=2*kn}je[nt]=h.createPolygon(Jt,Vt)}l[B++]=h.createMultiPolygon(je)}}}}return l}function Hd(p,l,A){return hb(p,l,A,!0)}function Zd(p,l,A,b){return Yf(p,l,A,b,!0)}function s1(p,l,A,b,x,B){return Vf(p,l,A,b,!0,B)}function hb(p,l,A,b){const x=new Array(b?A+1:A);for(let B=0;B<2*A;B+=2)x[B/2]=new c(p[l+B],p[l+B+1]);return b&&(x[x.length-1]=x[0]),x}function Yf(p,l,A,b,x){const B=new Array(x?b+1:b);for(let h=0;h<2*b;h+=2){const g=2*l[A+h/2];B[h/2]=new c(p[g],p[g+1])}return x&&(B[B.length-1]=B[0]),B}function Vf(p,l,A,b,x,B){const h=new Array(x?b+1:b);for(let g=0;g<b;g++){const w=sl.decode(p[l[A+g]],B.numBits,B.coordinateShift);h[g]=new c(w.x,w.y)}return x&&(h[h.length-1]=h[0]),h}class db{_vertexBufferType;_topologyVector;_vertexOffsets;_vertexBuffer;_mortonSettings;constructor(l,A,b,x,B){this._vertexBufferType=l,this._topologyVector=A,this._vertexOffsets=b,this._vertexBuffer=x,this._mortonSettings=B}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const l=Ab(this);let A=0;for(;A<this.numGeometries;)yield{coordinates:l[A],type:this.geometryType(A)},A++}getSimpleEncodedVertex(l){const A=this.vertexOffsets?2*this.vertexOffsets[l]:2*l;return[this.vertexBuffer[A],this.vertexBuffer[A+1]]}getVertex(l){if(this.vertexOffsets&&this.mortonSettings){const b=sl.decode(this.vertexBuffer[this.vertexOffsets[l]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[b.x,b.y]}const A=this.vertexOffsets?2*this.vertexOffsets[l]:2*l;return[this.vertexBuffer[A],this.vertexBuffer[A+1]]}getGeometries(){return Ab(this)}get mortonSettings(){return this._mortonSettings}}class $f extends db{_numGeometries;_geometryType;constructor(l,A,b,x,B,h,g){super(b,x,B,h,g),this._numGeometries=l,this._geometryType=A}static createMortonEncoded(l,A,b,x,B,h){return new $f(l,A,Vc.MORTON,b,x,B,h)}static create(l,A,b,x,B){return new $f(l,A,Vc.VEC_2,b,x,B)}geometryType(l){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===_o.POLYGON||this._geometryType===_o.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class cm extends db{_geometryTypes;constructor(l,A,b,x,B,h){super(l,b,x,B,h),this._geometryTypes=A}static createMortonEncoded(l,A,b,x,B){return new cm(Vc.MORTON,l,A,b,x,B)}static create(l,A,b,x){return new cm(Vc.VEC_2,l,A,b,x)}geometryType(l){return this._geometryTypes[l]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let l=0;l<this.numGeometries;l++)if(this.geometryType(l)===_o.POLYGON||this.geometryType(l)===_o.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class a1{_triangleOffsets;_indexBuffer;_vertexBuffer;_topologyVector;constructor(l,A,b,x){this._triangleOffsets=l,this._indexBuffer=A,this._vertexBuffer=b,this._topologyVector=x}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const l=new Array(this.numGeometries),A=this._topologyVector,b=A.partOffsets,x=A.ringOffsets,B=A.geometryOffsets;let h=0,g=1,w=1,k=1;for(let F=0;F<this.numGeometries;F++)switch(this.geometryType(F)){case _o.POLYGON:{const j=b[g]-b[g-1];g++;const H=[];for(let ne=0;ne<j;ne++){const ie=x[w]-x[w-1];w++;const Ae=[];for(let de=0;de<ie;de++){const Me=this._vertexBuffer[h++],We=this._vertexBuffer[h++];Ae.push(new c(Me,We))}Ae.length>0&&Ae.push(Ae[0]),H.push(Ae)}l[F]=H,B&&k++}break;case _o.MULTIPOLYGON:{const j=B[k]-B[k-1];k++;const H=[];for(let ne=0;ne<j;ne++){const ie=b[g]-b[g-1];g++;for(let Ae=0;Ae<ie;Ae++){const de=x[w]-x[w-1];w++;const Me=[];for(let We=0;We<de;We++){const Ue=this._vertexBuffer[h++],je=this._vertexBuffer[h++];Me.push(new c(Ue,je))}Me.length>0&&Me.push(Me[0]),H.push(Me)}}l[F]=H}}return l}[Symbol.iterator](){return null}}class Hf extends a1{_numGeometries;_geometryType;constructor(l,A,b,x,B,h){super(b,x,B,h),this._numGeometries=l,this._geometryType=A}static create(l,A,b,x,B,h){return new Hf(l,A,b,x,B,h)}geometryType(l){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}class l1 extends a1{_geometryTypes;constructor(l,A,b,x,B){super(A,b,x,B),this._geometryTypes=l}static create(l,A,b,x,B){return new l1(l,A,b,x,B)}geometryType(l){return this._geometryTypes[l]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function h_(p,l,A,b,x){const B=Hs.decode(p,A);let h=null,g=null,w=null,k=null,F=null,j=null,H=null,ne=null;if(Gi.getVectorType(B,b,p,A)===Ca.CONST){const Ae=Gi.decodeConstIntStream(p,A,B,!1);for(let de=0;de<l-1;de++){const Me=Hs.decode(p,A);switch(Me.physicalStreamType){case ol.LENGTH:switch(Me.logicalStreamType.lengthType){case Oi.GEOMETRIES:h=Gi.decodeLengthStreamToOffsetBuffer(p,A,Me);break;case Oi.PARTS:g=Gi.decodeLengthStreamToOffsetBuffer(p,A,Me);break;case Oi.RINGS:w=Gi.decodeLengthStreamToOffsetBuffer(p,A,Me);break;case Oi.TRIANGLES:H=Gi.decodeLengthStreamToOffsetBuffer(p,A,Me)}break;case ol.OFFSET:switch(Me.logicalStreamType.offsetType){case zu.VERTEX:k=Gi.decodeIntStream(p,A,Me,!1);break;case zu.INDEX:ne=Gi.decodeIntStream(p,A,Me,!1)}break;case ol.DATA:if(IA.VERTEX===Me.logicalStreamType.dictionaryType)F=Gi.decodeIntStream(p,A,Me,!0,x);else{const We=Me;j={numBits:We.numBits(),coordinateShift:We.coordinateShift()},F=Gi.decodeIntStream(p,A,Me,!1,x)}}}if(ne!==null){if(h!=null||g!=null){const de=new Bg(h,g,w);return Hf.create(b,Ae,H,ne,F,de)}return Hf.create(b,Ae,H,ne,F)}return j===null?$f.create(b,Ae,new Bg(h,g,w),k,F):$f.createMortonEncoded(b,Ae,new Bg(h,g,w),k,F,j)}const ie=Gi.decodeIntStream(p,A,B,!1);for(let Ae=0;Ae<l-1;Ae++){const de=Hs.decode(p,A);switch(de.physicalStreamType){case ol.LENGTH:switch(de.logicalStreamType.lengthType){case Oi.GEOMETRIES:h=Gi.decodeIntStream(p,A,de,!1);break;case Oi.PARTS:g=Gi.decodeIntStream(p,A,de,!1);break;case Oi.RINGS:w=Gi.decodeIntStream(p,A,de,!1);break;case Oi.TRIANGLES:H=Gi.decodeLengthStreamToOffsetBuffer(p,A,de)}break;case ol.OFFSET:switch(de.logicalStreamType.offsetType){case zu.VERTEX:k=Gi.decodeIntStream(p,A,de,!1);break;case zu.INDEX:ne=Gi.decodeIntStream(p,A,de,!1)}break;case ol.DATA:if(IA.VERTEX===de.logicalStreamType.dictionaryType)F=Gi.decodeIntStream(p,A,de,!0,x);else{const Me=de;j={numBits:Me.numBits(),coordinateShift:Me.coordinateShift()},F=Gi.decodeIntStream(p,A,de,!1,x)}}}return ne!==null&&g===null?l1.create(ie,H,ne,F):(h!==null?(h=fb(ie,h,2),g!==null&&w!==null?(g=pb(ie,h,g,!1),w=(function(Ae,de,Me,We){const Ue=new Int32Array(Me[Me.length-1]+1);let je=0;Ue[0]=je;let ot=1,nt=1,Mt=0;for(let Vt=0;Vt<Ae.length;Vt++){const Jt=Ae[Vt],on=de[Vt+1]-de[Vt];if(Jt!==0&&Jt!==3)for(let kn=0;kn<on;kn++){const An=Me[ot]-Me[ot-1];ot++;for(let Cn=0;Cn<An;Cn++)je=Ue[nt++]=je+We[Mt++]}else for(let kn=0;kn<on;kn++)Ue[nt++]=++je,ot++}return Ue})(ie,h,g,w)):g!==null&&(g=(function(Ae,de,Me){const We=new Int32Array(de[de.length-1]+1);let Ue=0;We[0]=Ue;let je=1,ot=0;for(let nt=0;nt<Ae.length;nt++){const Mt=Ae[nt],Vt=de[nt+1]-de[nt];if(Mt===4||Mt===1)for(let Jt=0;Jt<Vt;Jt++)Ue=We[je++]=Ue+Me[ot++];else for(let Jt=0;Jt<Vt;Jt++)We[je++]=++Ue}return We})(ie,h,g))):g!==null&&w!==null?(g=fb(ie,g,1),w=pb(ie,g,w,!0)):g!==null&&(g=fb(ie,g,0)),ne!==null?l1.create(ie,H,ne,F,new Bg(h,g,w)):j===null?cm.create(ie,new Bg(h,g,w),k,F):cm.createMortonEncoded(ie,new Bg(h,g,w),k,F,j))}function fb(p,l,A){const b=new Int32Array(p.length+1);let x=0;b[0]=x;let B=0;for(let h=0;h<p.length;h++)x=b[h+1]=x+(p[h]>A?l[B++]:1);return b}function pb(p,l,A,b){const x=new Int32Array(l[l.length-1]+1);let B=0;x[0]=B;let h=1,g=0;for(let w=0;w<p.length;w++){const k=p[w],F=l[w+1]-l[w];if(k===5||k===2||b&&(k===4||k===1))for(let j=0;j<F;j++)B=x[h++]=B+A[g++];else for(let j=0;j<F;j++)x[h++]=++B}return x}class Og extends Jh{dataVector;constructor(l,A,b){super(l,A.getBuffer(),b),this.dataVector=A}getValueFromBuffer(l){return this.dataVector.get(l)}}class mb extends Qf{getValueFromBuffer(l){return this.dataBuffer[l]}}class d_ extends Jh{constructor(l,A,b){super(l,BigInt64Array.of(A),b)}getValueFromBuffer(l){return this.dataBuffer[0]}}function Ty(p,l,A){for(let b=0;b<p;b++){const x=Hs.decode(l,A);A.add(x.byteLength)}}function Zf(p,l,A){return u1(p,Math.ceil(l/8),A)}function u1(p,l,A){const b=new Uint8Array(l);let x=0;for(;x<l;){const B=p[A.increment()];if(B<=127){const h=B+3,g=p[A.increment()],w=x+h;b.fill(g,x,w),x=w}else{const h=256-B;for(let g=0;g<h;g++)b[x++]=p[A.increment()]}}return b}const f_=new TextDecoder;function Xf(p,l,A){return A-l>=12?f_.decode(p.subarray(l,A)):(function(b,x,B){let h="",g=x;for(;g<B;){const w=b[g];let k,F,j,H=null,ne=w>239?4:w>223?3:w>191?2:1;if(g+ne>B)break;ne===1?w<128&&(H=w):ne===2?(k=b[g+1],(192&k)==128&&(H=(31&w)<<6|63&k,H<=127&&(H=null))):ne===3?(k=b[g+1],F=b[g+2],(192&k)==128&&(192&F)==128&&(H=(15&w)<<12|(63&k)<<6|63&F,(H<=2047||H>=55296&&H<=57343)&&(H=null))):ne===4&&(k=b[g+1],F=b[g+2],j=b[g+3],(192&k)==128&&(192&F)==128&&(192&j)==128&&(H=(15&w)<<18|(63&k)<<12|(63&F)<<6|63&j,(H<=65535||H>=1114112)&&(H=null))),H===null?(H=65533,ne=1):H>65535&&(H-=65536,h+=String.fromCharCode(H>>>10&1023|55296),H=56320|1023&H),h+=String.fromCharCode(H),g+=ne}return h})(p,l,A)}class gb extends Jh{offsetBuffer;constructor(l,A,b,x){super(l,b,x),this.offsetBuffer=A}}class yb extends gb{textEncoder;constructor(l,A,b,x){super(l,A,b,x??A.length-1),this.textEncoder=new TextEncoder}getValueFromBuffer(l){return Xf(this.dataBuffer,this.offsetBuffer[l],this.offsetBuffer[l+1])}}class Am extends gb{indexBuffer;textEncoder;constructor(l,A,b,x,B){super(l,b,x,B??A.length),this.indexBuffer=A,this.indexBuffer=A,this.textEncoder=new TextEncoder}getValueFromBuffer(l){const A=this.indexBuffer[l];return Xf(this.dataBuffer,this.offsetBuffer[A],this.offsetBuffer[A+1])}}class vb extends gb{indexBuffer;symbolOffsetBuffer;symbolTableBuffer;textEncoder;symbolLengthBuffer;lengthBuffer;decodedDictionary;constructor(l,A,b,x,B,h,g){super(l,b,x,g),this.indexBuffer=A,this.symbolOffsetBuffer=B,this.symbolTableBuffer=h,this.textEncoder=new TextEncoder}getValueFromBuffer(l){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=(function(b,x,B){const h=[],g=new Array(x.length).fill(0);for(let w=1;w<x.length;w++)g[w]=g[w-1]+x[w-1];for(let w=0;w<B.length;w++)if(B[w]===255)h.push(B[++w]);else{const k=x[B[w]],F=g[B[w]];for(let j=0;j<k;j++)h.push(b[F+j])}return new Uint8Array(h)})(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const A=this.indexBuffer[l];return Xf(this.decodedDictionary,this.offsetBuffer[A],this.offsetBuffer[A+1])}offsetToLengthBuffer(l){const A=new Uint32Array(l.length-1);let b=l[0];for(let x=1;x<l.length;x++){const B=l[x];A[x-1]=B-b,b=B}return A}}class Ig{static ROOT_COLUMN_NAME="default";static NESTED_COLUMN_SEPARATOR=":";constructor(){}static decode(l,A,b,x,B){let h=null,g=null,w=null,k=null,F=null,j=null,H=null,ne=null;for(let ie=0;ie<x;ie++){const Ae=Hs.decode(A,b);if(Ae.byteLength!==0)switch(Ae.physicalStreamType){case ol.PRESENT:{const de=Zf(A,Ae.numValues,b);j=new TA(de,Ae.numValues);break}case ol.OFFSET:g=B!=null||j!=null?Gi.decodeNullableIntStream(A,b,Ae,!1,B??j):Gi.decodeIntStream(A,b,Ae,!1);break;case ol.LENGTH:{const de=Gi.decodeLengthStreamToOffsetBuffer(A,b,Ae);Oi.DICTIONARY===Ae.logicalStreamType.lengthType?h=de:Oi.SYMBOL===Ae.logicalStreamType.lengthType?k=de:H=de;break}case ol.DATA:{const de=A.subarray(b.get(),b.get()+Ae.byteLength);b.add(Ae.byteLength);const Me=Ae.logicalStreamType.dictionaryType;IA.FSST===Me?F=de:IA.SINGLE===Me||IA.SHARED===Me?w=de:IA.NONE===Me&&(ne=de);break}}}return this.decodeFsstDictionaryVector(l,F,g,h,w,k,B??j)??this.decodeDictionaryVector(l,w,g,h,B??j)??this.decodePlainStringVector(l,H,ne,g,B??j)}static decodeFsstDictionaryVector(l,A,b,x,B,h,g){return A?new vb(l,b,x,B,h,A,g):null}static decodeDictionaryVector(l,A,b,x,B){return A?B?new Am(l,b,x,A,B):new Am(l,b,x,A):null}static decodePlainStringVector(l,A,b,x,B){if(!A||!b)return null;if(x)return B?new Am(l,x,A,b,B):new Am(l,x,A,b);if(B&&B.size()!==A.length-1){const h=new Int32Array(B.size());let g=0;for(let w=0;w<B.size();w++)h[w]=B.get(w)?g++:0;return new Am(l,h,A,b,B)}return B?new yb(l,A,b,B):new yb(l,A,b)}static decodeSharedDictionary(l,A,b,x,B){let h=null,g=null,w=null,k=null,F=!1;for(;!F;){const ie=Hs.decode(l,A);switch(ie.physicalStreamType){case ol.LENGTH:Oi.DICTIONARY===ie.logicalStreamType.lengthType?h=Gi.decodeLengthStreamToOffsetBuffer(l,A,ie):w=Gi.decodeLengthStreamToOffsetBuffer(l,A,ie);break;case ol.DATA:IA.SINGLE===ie.logicalStreamType.dictionaryType||IA.SHARED===ie.logicalStreamType.dictionaryType?(g=l.subarray(A.get(),A.get()+ie.byteLength),F=!0):k=l.subarray(A.get(),A.get()+ie.byteLength),A.add(ie.byteLength)}}const j=b.complexType.children,H=[];let ne=0;for(const ie of j){const Ae=_a(l,A,1)[0];if(Ae==0)continue;const de=`${b.name}${ie.name===Ig.ROOT_COLUMN_NAME?"":Ig.NESTED_COLUMN_SEPARATOR+ie.name}`;if(B&&!B.has(de)){Ty(Ae,l,A);continue}if(Ae!==2||ie.type!=="scalarField"||ie.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");const Me=Hs.decode(l,A),We=Zf(l,Me.numValues,A),Ue=Hs.decode(l,A),je=(Ue instanceof o1?Ue.numRleValues:Ue.numValues)!==x?Gi.decodeNullableIntStream(l,A,Ue,!1,new TA(We,Me.numValues)):Gi.decodeIntStream(l,A,Ue,!1);H[ne++]=k?new vb(de,je,h,g,w,k,new TA(We,Me.numValues)):new Am(de,je,h,g,new TA(We,Me.numValues))}return H}}function bb(p,l,A,b,x,B){return A.type==="scalarType"?(function(h,g,w,k,F,j){let H=null,ne=0;if(h===0)return null;if(j.nullable){const Ae=Hs.decode(g,w);ne=Ae.numValues;const de=w.get(),Me=Zf(g,ne,w);w.set(de+Ae.byteLength),H=new TA(Me,Ae.numValues)}const ie=H??k;switch(F.physicalType){case 4:case 3:return(function(Ae,de,Me,We,Ue){const je=Hs.decode(Ae,de),ot=Gi.getVectorType(je,Ue,Ae,de),nt=We.physicalType===3;if(ot===Ca.FLAT){const Mt=Tg(Ue)?Gi.decodeNullableIntStream(Ae,de,je,nt,Ue):Gi.decodeIntStream(Ae,de,je,nt);return new i1(Me.name,Mt,Ue)}if(ot===Ca.SEQUENCE){const Mt=Gi.decodeSequenceIntStream(Ae,de,je);return new du(Me.name,Mt[0],Mt[1],je.numRleValues)}{const Mt=Gi.decodeConstIntStream(Ae,de,je,nt);return new ed(Me.name,Mt,Ue)}})(g,w,j,F,ie);case 9:return Ig.decode(j.name,g,w,j.nullable?h-1:h,H);case 0:return(function(Ae,de,Me,We,Ue){const je=Hs.decode(Ae,de),ot=je.numValues,nt=de.get(),Mt=Tg(Ue)?(function(Jt,on,kn,An){const Cn=u1(Jt,Math.ceil(on/8),kn),en=new TA(Cn,on),xi=An.size(),Ei=new TA(new Uint8Array(xi),xi);let Ri=0;for(let oi=0;oi<An.size();oi++){const Sr=!!An.get(oi)&&en.get(Ri++);Ei.set(oi,Sr)}return Ei.getBuffer()})(Ae,ot,de,Ue):Zf(Ae,ot,de);de.set(nt+je.byteLength);const Vt=new TA(Mt,ot);return new Og(Me.name,Vt,Ue)})(g,w,j,0,ie);case 6:case 5:return(function(Ae,de,Me,We,Ue){const je=Hs.decode(Ae,de),ot=Gi.getVectorType(je,We,Ae,de),nt=Ue.physicalType===5;if(ot===Ca.FLAT){const Mt=Tg(We)?Gi.decodeNullableLongStream(Ae,de,je,nt,We):Gi.decodeLongStream(Ae,de,je,nt);return new c_(Me.name,Mt,We)}if(ot===Ca.SEQUENCE){const Mt=Gi.decodeSequenceLongStream(Ae,de,je);return new A_(Me.name,Mt[0],Mt[1],je.numRleValues)}{const Mt=Gi.decodeConstLongStream(Ae,de,je,nt);return new d_(Me.name,Mt,We)}})(g,w,j,ie,F);case 7:return(function(Ae,de,Me,We){const Ue=Hs.decode(Ae,de),je=Tg(We)?(function(ot,nt,Mt,Vt){const Jt=nt.get(),on=Jt+Vt*Float32Array.BYTES_PER_ELEMENT,kn=new Uint8Array(ot.subarray(Jt,on)).buffer,An=new Float32Array(kn);nt.set(on);const Cn=Mt.size(),en=new Float32Array(Cn);let xi=0;for(let Ei=0;Ei<Cn;Ei++)en[Ei]=Mt.get(Ei)?An[xi++]:0;return en})(Ae,de,We,Ue.numValues):(function(ot,nt,Mt){const Vt=nt.get(),Jt=Vt+Mt*Float32Array.BYTES_PER_ELEMENT,on=new Uint8Array(ot.subarray(Vt,Jt)).buffer,kn=new Float32Array(on);return nt.set(Jt),kn})(Ae,de,Ue.numValues);return new mb(Me.name,je,We)})(g,w,j,ie);case 8:return(function(Ae,de,Me,We){const Ue=Hs.decode(Ae,de),je=Tg(We)?(function(ot,nt,Mt,Vt){const Jt=nt.get(),on=Jt+Vt*Float64Array.BYTES_PER_ELEMENT,kn=new Uint8Array(ot.subarray(Jt,on)).buffer,An=new Float64Array(kn);nt.set(on);const Cn=Mt.size(),en=new Float64Array(Cn);let xi=0;for(let Ei=0;Ei<Cn;Ei++)en[Ei]=Mt.get(Ei)?An[xi++]:0;return en})(Ae,de,We,Ue.numValues):(function(ot,nt,Mt){const Vt=nt.get(),Jt=Vt+Mt*Float64Array.BYTES_PER_ELEMENT,on=new Uint8Array(ot.subarray(Vt,Jt)).buffer,kn=new Float64Array(on);return nt.set(Jt),kn})(Ae,de,Ue.numValues);return new lm(Me.name,je,We)})(g,w,j,ie);default:throw new Error(`The specified data type for the field is currently not supported: ${F}`)}})(b,p,l,x,A.scalarType,A):b!=1?null:Ig.decodeSharedDictionary(p,l,A,x,B)}function Tg(p){return p instanceof TA}class c1{static decodeColumnType(l){switch(l){case 0:case 1:case 2:case 3:{const A={};A.nullable=!!(1&l),A.columnScope=0;const b={};return b.physicalType=l>1?6:4,b.type="physicalType",A.scalarType=b,A.type="scalarType",A}case 4:{const A={nullable:!1,columnScope:0},b={type:"physicalType",physicalType:0};return A.type="complexType",A.complexType=b,A}case 30:{const A={nullable:!1,columnScope:0},b={type:"physicalType",physicalType:1};return A.type="complexType",A.complexType=b,A}default:return this.mapScalarType(l)}}static columnTypeHasName(l){return l>=10}static columnTypeHasChildren(l){return l===30}static hasStreamCount(l){if(l.name==="id")return!1;if(l.type==="scalarType"){const A=l.scalarType;if(A.type==="physicalType")switch(A.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(A.type==="logicalType")return!1}else if(l.type==="complexType"){const A=l.complexType;if(A.type==="physicalType")switch(A.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",l),!1}static mapScalarType(l){let A=null;switch(l){case 10:case 11:A=0;break;case 12:case 13:A=1;break;case 14:case 15:A=2;break;case 16:case 17:A=3;break;case 18:case 19:A=4;break;case 20:case 21:A=5;break;case 22:case 23:A=6;break;case 24:case 25:A=7;break;case 26:case 27:A=8;break;case 28:case 29:A=9;break;default:return null}const b={};b.nullable=!!(1&l),b.columnScope=0;const x={type:"physicalType"};return x.physicalType=A,b.type="scalarType",b.scalarType=x,b}}const ky=new TextDecoder;function p_(p,l){const A=_a(p,l,1)[0];if(A===0)return"";const b=l.get(),x=p.subarray(b,b+A);return l.add(A),ky.decode(x)}function m_(p,l){const A=_a(p,l,1)[0]>>>0,b=!!(4&A),x=!!(2&A),B=_a(p,l,1)[0]>>>0,h={};if(1&A&&(h.nullable=!0),x){const g={};if(b?(g.type="logicalType",g.logicalType=B):(g.type="physicalType",g.physicalType=B),8&A){const w=_a(p,l,1)[0]>>>0;g.children=new Array(w);for(let k=0;k<w;k++)g.children[k]=m_(p,l)}h.type="complexField",h.complexField=g}else{const g={};b?(g.type="logicalType",g.logicalType=B):(g.type="physicalType",g.physicalType=B),h.type="scalarField",h.scalarField=g}return h}function Cb(p,l){const A=_a(p,l,1)[0]>>>0,b=c1.decodeColumnType(A);if(!b)throw new Error(`Unsupported column type code: ${A}`);if(c1.columnTypeHasName(A)?b.name=p_(p,l):A>=0&&A<=3?b.name="id":A===4&&(b.name="geometry"),c1.columnTypeHasChildren(A)){const x=_a(p,l,1)[0]>>>0,B=b.complexType;B.children=new Array(x);for(let h=0;h<x;h++)B.children[h]=m_(p,l)}return b}function _b(p,l){const A={featureTables:[]},b={};b.name=p_(p,l);const x=_a(p,l,1)[0]>>>0,B=_a(p,l,1)[0]>>>0;b.columns=new Array(B);for(let h=0;h<B;h++)b.columns[h]=Cb(p,l);return A.featureTables.push(b),[A,x]}function Dy(p,l,A,b,x,B,h=!1){const g=l.scalarType.physicalType,w=Gi.getVectorType(x,B,p,A);if(g===4)switch(w){case Ca.FLAT:{const k=Gi.decodeIntStream(p,A,x,!1);return new i1(b,k,B)}case Ca.SEQUENCE:{const k=Gi.decodeSequenceIntStream(p,A,x);return new du(b,k[0],k[1],x.numRleValues)}case Ca.CONST:{const k=Gi.decodeConstIntStream(p,A,x,!1);return new ed(b,k,B)}}else switch(w){case Ca.FLAT:{if(h){const F=Gi.decodeLongFloat64Stream(p,A,x,!1);return new lm(b,F,B)}const k=Gi.decodeLongStream(p,A,x,!1);return new c_(b,k,B)}case Ca.SEQUENCE:{const k=Gi.decodeSequenceLongStream(p,A,x);return new A_(b,k[0],k[1],x.numRleValues)}case Ca.CONST:{const k=Gi.decodeConstLongStream(p,A,x,!1);return new d_(b,k,B)}}throw new Error("Vector type not supported for id column.")}class xb{constructor(l,A){var b;switch(this._featureData=l,this.properties=this._featureData.properties||{},(b=this._featureData.geometry)===null||b===void 0?void 0:b.type){case _o.POINT:case _o.MULTIPOINT:this.type=1;break;case _o.LINESTRING:case _o.MULTILINESTRING:this.type=2;break;case _o.POLYGON:case _o.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=A,this.id=Number(this._featureData.id)}projectPoint(l,A,b,x){return[360*(l.x+A)/x-180,360/Math.PI*Math.atan(Math.exp((1-2*(l.y+b)/x)*Math.PI))-90]}projectLine(l,A,b,x){return l.map((B=>this.projectPoint(B,A,b,x)))}toGeoJSON(l,A,b){const x=this.extent*Math.pow(2,b),B=this.extent*l,h=this.extent*A,g=this.loadGeometry();let w;switch(this.type){case 1:{const F=[];for(const H of g)F.push(H[0]);const j=this.projectLine(F,B,h,x);w=F.length===1?{type:"Point",coordinates:j[0]}:{type:"MultiPoint",coordinates:j};break}case 2:{const F=g.map((j=>this.projectLine(j,B,h,x)));w=F.length===1?{type:"LineString",coordinates:F[0]}:{type:"MultiLineString",coordinates:F};break}case 3:{const F=Ih(g),j=[];for(const H of F)j.push(H.map((ne=>this.projectLine(ne,B,h,x))));w=j.length===1?{type:"Polygon",coordinates:j[0]}:{type:"MultiPolygon",coordinates:j};break}default:throw new Error(`unknown feature type: ${this.type}`)}const k={type:"Feature",geometry:w,properties:this.properties};return this.id!=null&&(k.id=this.id),k}loadGeometry(){const l=[];for(const A of this._featureData.geometry.coordinates){const b=[];for(const x of A)b.push(new c(x.x,x.y));l.push(b)}return l}bbox(){return[0,0,0,0]}}class g_{constructor(l){this.features=[],this.featureTable=l,this.name=l.name,this.extent=l.extent,this.version=2,this.features=l.getFeatures(),this.length=this.features.length}feature(l){return new xb(this.features[l],this.extent)}}class Ry{constructor(l){this.layers={};const A=(function(b,x,B=!0){const h=new H2(0),g=[];for(;h.get()<b.length;){const w=_a(b,h,1)[0]>>>0,k=h.get()+w;if(k>b.length)throw new Error(`Block overruns tile: ${k} > ${b.length}`);if(_a(b,h,1)[0]>>>0!=1){h.set(k);continue}const F=_b(b,h),j=F[1],H=F[0].featureTables[0];let ne=null,ie=null;const Ae=[];let de=0;for(const We of H.columns){const Ue=We.name;if(Ue==="id"){let je=null;if(We.nullable){const nt=Hs.decode(b,h),Mt=h.get(),Vt=Zf(b,nt.numValues,h);h.set(Mt+nt.byteLength),je=new TA(Vt,nt.numValues)}const ot=Hs.decode(b,h);de=ot.getDecompressedCount(),ne=Dy(b,We,h,Ue,ot,je??de,B)}else if(Ue==="geometry"){const je=_a(b,h,1)[0];if(de===0){const ot=h.get();de=Hs.decode(b,h).getDecompressedCount(),h.set(ot)}ie=h_(b,je,h,de,x)}else{const je=c1.hasStreamCount(We)?_a(b,h,1)[0]:1;if(je===0&&We.type==="scalarType")continue;const ot=bb(b,h,We,je,de,void 0);ot&&(Array.isArray(ot)?Ae.push(...ot):Ae.push(ot))}}const Me=new ab(H.name,ie,ne,Ae,j);g.push(Me),h.set(k)}return g})(new Uint8Array(l));this.layers=A.reduce(((b,x)=>Object.assign(Object.assign({},b),{[x.name]:new g_(x)})),{})}}class gc{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(l){return this.minX=Math.min(this.minX,l.x),this.minY=Math.min(this.minY,l.y),this.maxX=Math.max(this.maxX,l.x),this.maxY=Math.max(this.maxY,l.y),this}expandBy(l){return this.minX-=l,this.minY-=l,this.maxX+=l,this.maxY+=l,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(l){return this.expandBy(-l)}map(l){const A=new gc;return A.extend(l(new c(this.minX,this.minY))),A.extend(l(new c(this.maxX,this.minY))),A.extend(l(new c(this.minX,this.maxY))),A.extend(l(new c(this.maxX,this.maxY))),A}static fromPoints(l){const A=new gc;for(const b of l)A.extend(b);return A}contains(l){return l.x>=this.minX&&l.x<=this.maxX&&l.y>=this.minY&&l.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(l){return!this.empty()&&!l.empty()&&l.minX>=this.minX&&l.maxX<=this.maxX&&l.minY>=this.minY&&l.maxY<=this.maxY}intersects(l){return!this.empty()&&!l.empty()&&l.minX<=this.maxX&&l.maxX>=this.minX&&l.minY<=this.maxY&&l.maxY>=this.minY}}const nd="_geojsonTileLayer";class Xd{constructor(l,A){this.tileID=l,this.x=l.canonical.x,this.y=l.canonical.y,this.z=l.canonical.z,this.grid=new Rd(ht,16,0),this.grid3D=new Rd(ht,16,0),this.featureIndexArray=new He,this.promoteId=A}insert(l,A,b,x,B,h){const g=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(b,x,B);const w=h?this.grid3D:this.grid;for(let k=0;k<A.length;k++){const F=A[k],j=[1/0,1/0,-1/0,-1/0];for(let H=0;H<F.length;H++){const ne=F[H];j[0]=Math.min(j[0],ne.x),j[1]=Math.min(j[1],ne.y),j[2]=Math.max(j[2],ne.x),j[3]=Math.max(j[3],ne.y)}j[0]<ht&&j[1]<ht&&j[2]>=0&&j[3]>=0&&w.insert(g,j[0],j[1],j[2],j[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new Gv(new vy(this.rawTileData)).layers:new Ry(this.rawTileData).layers,this.sourceLayerCoder=new a_(this.vtLayers?Object.keys(this.vtLayers).sort():[nd])),this.vtLayers}query(l,A,b,x){this.loadVTLayers();const B=l.params,h=ht/l.tileSize/l.scale,g=ou(B.filter,B.globalState),w=l.queryGeometry,k=l.queryPadding*h,F=gc.fromPoints(w),j=this.grid.query(F.minX-k,F.minY-k,F.maxX+k,F.maxY+k),H=gc.fromPoints(l.cameraQueryGeometry).expandBy(k),ne=this.grid3D.query(H.minX,H.minY,H.maxX,H.maxY,((de,Me,We,Ue)=>(function(je,ot,nt,Mt,Vt){for(const on of je)if(ot<=on.x&&nt<=on.y&&Mt>=on.x&&Vt>=on.y)return!0;const Jt=[new c(ot,nt),new c(ot,Vt),new c(Mt,Vt),new c(Mt,nt)];if(je.length>2){for(const on of Jt)if(ki(je,on))return!0}for(let on=0;on<je.length-1;on++)if(U0(je[on],je[on+1],Jt))return!0;return!1})(l.cameraQueryGeometry,de-k,Me-k,We+k,Ue+k)));for(const de of ne)j.push(de);j.sort(A1);const ie={};let Ae;for(let de=0;de<j.length;de++){const Me=j[de];if(Me===Ae)continue;Ae=Me;const We=this.featureIndexArray.get(Me);let Ue=null;this.loadMatchingFeature(ie,We.bucketIndex,We.sourceLayerIndex,We.featureIndex,g,B.layers,B.availableImages,A,b,x,((je,ot,nt)=>(Ue||(Ue=wA(je)),ot.queryIntersectsFeature({queryGeometry:w,feature:je,featureState:nt,geometry:Ue,zoom:this.z,transform:l.transform,pixelsToTileUnits:h,pixelPosMatrix:l.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:l.getElevation}))))}return ie}loadMatchingFeature(l,A,b,x,B,h,g,w,k,F,j){const H=this.bucketLayerIDs[A];if(h&&!H.some((de=>h.has(de))))return;const ne=this.sourceLayerCoder.decode(b),ie=this.vtLayers[ne].feature(x);if(B.needGeometry){const de=js(ie,!0);if(!B.filter(new ao(this.tileID.overscaledZ),de,this.tileID.canonical))return}else if(!B.filter(new ao(this.tileID.overscaledZ),ie))return;const Ae=this.getId(ie,ne);for(let de=0;de<H.length;de++){const Me=H[de];if(h&&!h.has(Me))continue;const We=w[Me];if(!We)continue;let Ue={};Ae&&F&&(Ue=F.getState(We.sourceLayer||nd,Ae));const je=ke({},k[Me]);je.paint=kg(je.paint,We.paint,ie,Ue,g),je.layout=kg(je.layout,We.layout,ie,Ue,g);const ot=!j||j(ie,We,Ue);if(!ot)continue;const nt=new Oy(ie,this.z,this.x,this.y,Ae);nt.layer=je;let Mt=l[Me];Mt===void 0&&(Mt=l[Me]=[]),Mt.push({featureIndex:x,feature:nt,intersectionZ:ot})}}lookupSymbolFeatures(l,A,b,x,B,h,g,w){const k={};this.loadVTLayers();const F=ou(B.filterSpec,B.globalState);for(const j of l)this.loadMatchingFeature(k,b,x,j,F,h,g,w,A);return k}hasLayer(l){for(const A of this.bucketLayerIDs)for(const b of A)if(l===b)return!0;return!1}getId(l,A){var b;let x=l.id;return this.promoteId&&(x=l.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[A]],typeof x=="boolean"&&(x=Number(x)),x===void 0&&(!((b=l.properties)===null||b===void 0)&&b.cluster)&&this.promoteId&&(x=Number(l.properties.cluster_id))),x}}function kg(p,l,A,b,x){return we(p,((B,h)=>{const g=l instanceof Fl?l.get(h):null;return g&&g.evaluate?g.evaluate(A,b,x):g}))}function A1(p,l){return l-p}function Jd(p,l,A,b,x){const B=[];for(let h=0;h<p.length;h++){const g=p[h];let w;for(let k=0;k<g.length-1;k++){let F=g[k],j=g[k+1];F.x<l&&j.x<l||(F.x<l?F=new c(l,F.y+(l-F.x)/(j.x-F.x)*(j.y-F.y))._round():j.x<l&&(j=new c(l,F.y+(l-F.x)/(j.x-F.x)*(j.y-F.y))._round()),F.y<A&&j.y<A||(F.y<A?F=new c(F.x+(A-F.y)/(j.y-F.y)*(j.x-F.x),A)._round():j.y<A&&(j=new c(F.x+(A-F.y)/(j.y-F.y)*(j.x-F.x),A)._round()),F.x>=b&&j.x>=b||(F.x>=b?F=new c(b,F.y+(b-F.x)/(j.x-F.x)*(j.y-F.y))._round():j.x>=b&&(j=new c(b,F.y+(b-F.x)/(j.x-F.x)*(j.y-F.y))._round()),F.y>=x&&j.y>=x||(F.y>=x?F=new c(F.x+(x-F.y)/(j.y-F.y)*(j.x-F.x),x)._round():j.y>=x&&(j=new c(F.x+(x-F.y)/(j.y-F.y)*(j.x-F.x),x)._round()),w&&F.equals(w[w.length-1])||(w=[F],B.push(w)),w.push(j)))))}}return B}function y_(p,l,A,b,x){switch(l){case 1:return(function(B,h,g,w){const k=[];for(const F of B)for(const j of F){const H=w===0?j.x:j.y;H>=h&&H<=g&&k.push([j])}return k})(p,A,b,x);case 2:return Jf(p,A,b,x,!1);case 3:return Jf(p,A,b,x,!0)}return[]}function v_(p,l,A,b,x){const B=b===0?b_:Mb;let h=[];const g=[];for(let F=0;F<p.length-1;F++){const j=p[F],H=p[F+1],ne=b===0?j.x:j.y,ie=b===0?H.x:H.y;let Ae=!1;ne<l?ie>l&&h.push(B(j,H,l)):ne>A?ie<A&&h.push(B(j,H,A)):h.push(j),ie<l&&ne>=l&&(h.push(B(j,H,l)),Ae=!0),ie>A&&ne<=A&&(h.push(B(j,H,A)),Ae=!0),!x&&Ae&&(g.push(h),h=[])}const w=p.length-1,k=b===0?p[w].x:p[w].y;return k>=l&&k<=A&&h.push(p[w]),x&&h.length>0&&!h[0].equals(h[h.length-1])&&h.push(new c(h[0].x,h[0].y)),h.length>0&&g.push(h),g}function Jf(p,l,A,b,x){const B=[];for(const h of p){const g=v_(h,l,A,b,x);g.length>0&&B.push(...g)}return B}function b_(p,l,A){return new c(A,p.y+(A-p.x)/(l.x-p.x)*(l.y-p.y))}function Mb(p,l,A){return new c(p.x+(A-p.y)/(l.y-p.y)*(l.x-p.x),A)}Gn("FeatureIndex",Xd,{omit:["rawTileData","sourceLayerCoder"]});class fh extends c{constructor(l,A,b,x){super(l,A),this.angle=b,x!==void 0&&(this.segment=x)}clone(){return new fh(this.x,this.y,this.angle,this.segment)}}function wb(p,l,A,b,x){if(l.segment===void 0||A===0)return!0;let B=l,h=l.segment+1,g=0;for(;g>-A/2;){if(h--,h<0)return!1;g-=p[h].dist(B),B=p[h]}g+=p[h].dist(p[h+1]),h++;const w=[];let k=0;for(;g<A/2;){const F=p[h],j=p[h+1];if(!j)return!1;let H=p[h-1].angleTo(F)-F.angleTo(j);for(H=Math.abs((H+3*Math.PI)%(2*Math.PI)-Math.PI),w.push({distance:g,angleDelta:H}),k+=H;g-w[0].distance>b;)k-=w.shift().angleDelta;if(k>x)return!1;h++,g+=F.dist(j)}return!0}function C_(p){let l=0;for(let A=0;A<p.length-1;A++)l+=p[A].dist(p[A+1]);return l}function hm(p,l,A){return p?.6*l*A:0}function h1(p,l){return Math.max(p?p.right-p.left:0,l?l.right-l.left:0)}function __(p,l,A,b,x,B){const h=hm(A,x,B),g=h1(A,b)*B;let w=0;const k=C_(p)/2;for(let F=0;F<p.length-1;F++){const j=p[F],H=p[F+1],ne=j.dist(H);if(w+ne>k){const ie=(k-w)/ne,Ae=Xu.number(j.x,H.x,ie),de=Xu.number(j.y,H.y,ie),Me=new fh(Ae,de,H.angleTo(j),F);return Me._round(),!h||wb(p,Me,g,h,l)?Me:void 0}w+=ne}}function Dg(p,l,A,b,x,B,h,g,w){const k=hm(b,B,h),F=h1(b,x),j=F*h,H=p[0].x===0||p[0].x===w||p[0].y===0||p[0].y===w;return l-j<l/4&&(l=j+l/4),fu(p,H?l/2*g%l:(F/2+2*B)*h*g%l,l,k,A,j,H,!1,w)}function fu(p,l,A,b,x,B,h,g,w){const k=B/2,F=C_(p);let j=0,H=l-A,ne=[];for(let ie=0;ie<p.length-1;ie++){const Ae=p[ie],de=p[ie+1],Me=Ae.dist(de),We=de.angleTo(Ae);for(;H+A<j+Me;){H+=A;const Ue=(H-j)/Me,je=Xu.number(Ae.x,de.x,Ue),ot=Xu.number(Ae.y,de.y,Ue);if(je>=0&&je<w&&ot>=0&&ot<w&&H-k>=0&&H+k<=F){const nt=new fh(je,ot,We,ie);nt._round(),b&&!wb(p,nt,B,b,x)||ne.push(nt)}}j+=Me}return g||ne.length||h||(ne=fu(p,j/2,A,b,x,B,h,!0,w)),ne}function Rg(p,l,A,b){const x=[],B=p.image,h=B.pixelRatio,g=B.paddedRect.w-2,w=B.paddedRect.h-2;let k={x1:p.left,y1:p.top,x2:p.right,y2:p.bottom};const F=B.stretchX||[[0,g]],j=B.stretchY||[[0,w]],H=(en,xi)=>en+xi[1]-xi[0],ne=F.reduce(H,0),ie=j.reduce(H,0),Ae=g-ne,de=w-ie;let Me=0,We=ne,Ue=0,je=ie,ot=0,nt=Ae,Mt=0,Vt=de;if(B.content&&b){const en=B.content,xi=en[2]-en[0],Ei=en[3]-en[1];(B.textFitWidth||B.textFitHeight)&&(k=o_(p)),Me=dm(F,0,en[0]),Ue=dm(j,0,en[1]),We=dm(F,en[0],en[2]),je=dm(j,en[1],en[3]),ot=en[0]-Me,Mt=en[1]-Ue,nt=xi-We,Vt=Ei-je}const Jt=k.x1,on=k.y1,kn=k.x2-Jt,An=k.y2-on,Cn=(en,xi,Ei,Ri)=>{const oi=Py(en.stretch-Me,We,kn,Jt),Sr=fm(en.fixed-ot,nt,en.stretch,ne),ua=Py(xi.stretch-Ue,je,An,on),bl=fm(xi.fixed-Mt,Vt,xi.stretch,ie),yc=Py(Ei.stretch-Me,We,kn,Jt),tp=fm(Ei.fixed-ot,nt,Ei.stretch,ne),kA=Py(Ri.stretch-Ue,je,An,on),Nu=fm(Ri.fixed-Mt,Vt,Ri.stretch,ie),vc=new c(oi,ua),Wa=new c(yc,ua),Gu=new c(yc,kA),$c=new c(oi,kA),Hc=new c(Sr/h,bl/h),ph=new c(tp/h,Nu/h),bc=l*Math.PI/180;if(bc){const pu=Math.sin(bc),xa=Math.cos(bc),Cl=[xa,-pu,pu,xa];vc._matMult(Cl),Wa._matMult(Cl),$c._matMult(Cl),Gu._matMult(Cl)}const mh=en.stretch+en.fixed,np=xi.stretch+xi.fixed;return{tl:vc,tr:Wa,bl:$c,br:Gu,tex:{x:B.paddedRect.x+1+mh,y:B.paddedRect.y+1+np,w:Ei.stretch+Ei.fixed-mh,h:Ri.stretch+Ri.fixed-np},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Hc,pixelOffsetBR:ph,minFontScaleX:nt/h/kn,minFontScaleY:Vt/h/An,isSDF:A}};if(b&&(B.stretchX||B.stretchY)){const en=Sb(F,Ae,ne),xi=Sb(j,de,ie);for(let Ei=0;Ei<en.length-1;Ei++){const Ri=en[Ei],oi=en[Ei+1];for(let Sr=0;Sr<xi.length-1;Sr++)x.push(Cn(Ri,xi[Sr],oi,xi[Sr+1]))}}else x.push(Cn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:g+1},{fixed:0,stretch:w+1}));return x}function dm(p,l,A){let b=0;for(const x of p)b+=Math.max(l,Math.min(A,x[1]))-Math.max(l,Math.min(A,x[0]));return b}function Sb(p,l,A){const b=[{fixed:-1,stretch:0}];for(const[x,B]of p){const h=b[b.length-1];b.push({fixed:x-h.stretch,stretch:h.stretch}),b.push({fixed:x-h.stretch,stretch:h.stretch+(B-x)})}return b.push({fixed:l+1,stretch:A}),b}function Py(p,l,A,b){return p/l*A+b}function fm(p,l,A,b){return p-l*A/b}Gn("Anchor",fh);class d{constructor(l,A,b,x,B,h,g,w,k,F){var j;if(this.boxStartIndex=l.length,k){let H=h.top,ne=h.bottom;const ie=h.collisionPadding;ie&&(H-=ie[1],ne+=ie[3]);let Ae=ne-H;Ae>0&&(Ae=Math.max(10,Ae),this.circleDiameter=Ae)}else{const H=!((j=h.image)===null||j===void 0)&&j.content&&(h.image.textFitWidth||h.image.textFitHeight)?o_(h):{x1:h.left,y1:h.top,x2:h.right,y2:h.bottom};H.y1=H.y1*g-w[0],H.y2=H.y2*g+w[2],H.x1=H.x1*g-w[3],H.x2=H.x2*g+w[1];const ne=h.collisionPadding;if(ne&&(H.x1-=ne[0]*g,H.y1-=ne[1]*g,H.x2+=ne[2]*g,H.y2+=ne[3]*g),F){const ie=new c(H.x1,H.y1),Ae=new c(H.x2,H.y1),de=new c(H.x1,H.y2),Me=new c(H.x2,H.y2),We=F*Math.PI/180;ie._rotate(We),Ae._rotate(We),de._rotate(We),Me._rotate(We),H.x1=Math.min(ie.x,Ae.x,de.x,Me.x),H.x2=Math.max(ie.x,Ae.x,de.x,Me.x),H.y1=Math.min(ie.y,Ae.y,de.y,Me.y),H.y2=Math.max(ie.y,Ae.y,de.y,Me.y)}l.emplaceBack(A.x,A.y,H.x1,H.y1,H.x2,H.y2,b,x,B)}this.boxEndIndex=l.length}}class v{constructor(l=[],A=(b,x)=>b<x?-1:b>x?1:0){if(this.data=l,this.length=this.data.length,this.compare=A,this.length>0)for(let b=(this.length>>1)-1;b>=0;b--)this._down(b)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;const l=this.data[0],A=this.data.pop();return--this.length>0&&(this.data[0]=A,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:A,compare:b}=this,x=A[l];for(;l>0;){const B=l-1>>1,h=A[B];if(b(x,h)>=0)break;A[l]=h,l=B}A[l]=x}_down(l){const{data:A,compare:b}=this,x=this.length>>1,B=A[l];for(;l<x;){let h=1+(l<<1);const g=h+1;if(g<this.length&&b(A[g],A[h])<0&&(h=g),b(A[h],B)>=0)break;A[l]=A[h],l=h}A[l]=B}}function S(p,l=1,A=!1){const b=gc.fromPoints(p[0]),x=Math.min(b.width(),b.height());let B=x/2;const h=new v([],R),{minX:g,minY:w,maxX:k,maxY:F}=b;if(x===0)return new c(g,w);for(let ne=g;ne<k;ne+=x)for(let ie=w;ie<F;ie+=x)h.push(new N(ne+B,ie+B,B,p));let j=(function(ne){let ie=0,Ae=0,de=0;const Me=ne[0];for(let We=0,Ue=Me.length,je=Ue-1;We<Ue;je=We++){const ot=Me[We],nt=Me[je],Mt=ot.x*nt.y-nt.x*ot.y;Ae+=(ot.x+nt.x)*Mt,de+=(ot.y+nt.y)*Mt,ie+=3*Mt}return new N(Ae/ie,de/ie,0,ne)})(p),H=h.length;for(;h.length;){const ne=h.pop();(ne.d>j.d||!j.d)&&(j=ne,A&&console.log("found best %d after %d probes",Math.round(1e4*ne.d)/1e4,H)),ne.max-j.d<=l||(B=ne.h/2,h.push(new N(ne.p.x-B,ne.p.y-B,B,p)),h.push(new N(ne.p.x+B,ne.p.y-B,B,p)),h.push(new N(ne.p.x-B,ne.p.y+B,B,p)),h.push(new N(ne.p.x+B,ne.p.y+B,B,p)),H+=4)}return A&&(console.log(`num probes: ${H}`),console.log(`best distance: ${j.d}`)),j.p}function R(p,l){return l.max-p.max}function N(p,l,A,b){this.p=new c(p,l),this.h=A,this.d=(function(x,B){let h=!1,g=1/0;for(let w=0;w<B.length;w++){const k=B[w];for(let F=0,j=k.length,H=j-1;F<j;H=F++){const ne=k[F],ie=k[H];ne.y>x.y!=ie.y>x.y&&x.x<(ie.x-ne.x)*(x.y-ne.y)/(ie.y-ne.y)+ne.x&&(h=!h),g=Math.min(g,Vs(x,ne,ie))}}return(h?1:-1)*Math.sqrt(g)})(this.p,b),this.max=this.d+this.h*Math.SQRT2}var Y;s.aO=void 0,(Y=s.aO||(s.aO={}))[Y.center=1]="center",Y[Y.left=2]="left",Y[Y.right=3]="right",Y[Y.top=4]="top",Y[Y.bottom=5]="bottom",Y[Y["top-left"]=6]="top-left",Y[Y["top-right"]=7]="top-right",Y[Y["bottom-left"]=8]="bottom-left",Y[Y["bottom-right"]=9]="bottom-right";const Ce=Number.POSITIVE_INFINITY;function Qe(p,l){return l[1]!==Ce?(function(A,b,x){let B=0,h=0;switch(b=Math.abs(b),x=Math.abs(x),A){case"top-right":case"top-left":case"top":h=x-7;break;case"bottom-right":case"bottom-left":case"bottom":h=7-x}switch(A){case"top-right":case"bottom-right":case"right":B=-b;break;case"top-left":case"bottom-left":case"left":B=b}return[B,h]})(p,l[0],l[1]):(function(A,b){let x=0,B=0;b<0&&(b=0);const h=b/Math.SQRT2;switch(A){case"top-right":case"top-left":B=h-7;break;case"bottom-right":case"bottom-left":B=7-h;break;case"bottom":B=7-b;break;case"top":B=b-7}switch(A){case"top-right":case"bottom-right":x=-h;break;case"top-left":case"bottom-left":x=h;break;case"left":x=b;break;case"right":x=-b}return[x,B]})(p,l[0])}function mt(p,l,A){var b;const x=p.layout,B=(b=x.get("text-variable-anchor-offset"))===null||b===void 0?void 0:b.evaluate(l,{},A);if(B){const g=B.values,w=[];for(let k=0;k<g.length;k+=2){const F=w[k]=g[k],j=g[k+1].map((H=>H*Pa));F.startsWith("top")?j[1]-=7:F.startsWith("bottom")&&(j[1]+=7),w[k+1]=j}return new Bo(w)}const h=x.get("text-variable-anchor");if(h){let g;g=p._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[x.get("text-radial-offset").evaluate(l,{},A)*Pa,Ce]:x.get("text-offset").evaluate(l,{},A).map((k=>k*Pa));const w=[];for(const k of h)w.push(k,Qe(k,g));return new Bo(w)}return null}function Wt(p){switch(p){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function un(p,l,A,b,x,B,h,g,w,k,F,j){let H=B.textMaxSize.evaluate(l,{});H===void 0&&(H=h);const ne=p.layers[0].layout,ie=ne.get("icon-offset").evaluate(l,{},F),Ae=$t(A.horizontal),de=h/24,Me=p.tilePixelRatio*de,We=p.tilePixelRatio*H/24,Ue=p.tilePixelRatio*g,je=p.tilePixelRatio*ne.get("symbol-spacing"),ot=ne.get("text-padding")*p.tilePixelRatio,nt=(function(Ei,Ri,oi,Sr=1){const ua=Ei.get("icon-padding").evaluate(Ri,{},oi),bl=ua&&ua.values;return[bl[0]*Sr,bl[1]*Sr,bl[2]*Sr,bl[3]*Sr]})(ne,l,F,p.tilePixelRatio),Mt=ne.get("text-max-angle")/180*Math.PI,Vt=ne.get("text-rotation-alignment")!=="viewport"&&ne.get("symbol-placement")!=="point",Jt=ne.get("icon-rotation-alignment")==="map"&&ne.get("symbol-placement")!=="point",on=ne.get("symbol-placement"),kn=je/2,An=ne.get("icon-text-fit");let Cn;b&&An!=="none"&&(p.allowVerticalPlacement&&A.vertical&&(Cn=rm(b,A.vertical,An,ne.get("icon-text-fit-padding"),ie,de)),Ae&&(b=rm(b,Ae,An,ne.get("icon-text-fit-padding"),ie,de)));const en=F?j.line.getGranularityForZoomLevel(F.z):1,xi=(Ei,Ri)=>{Ri.x<0||Ri.x>=ht||Ri.y<0||Ri.y>=ht||(function(oi,Sr,ua,bl,yc,tp,kA,Nu,vc,Wa,Gu,$c,Hc,ph,bc,mh,np,pu,xa,Cl,Ua,mu,d1,pm,X2){const Ly=oi.addToLineVertexArray(Sr,ua);let Eb,x_,M_,w_,zK=0,jK=0,NK=0,GK=0,HB=-1,ZB=-1;const f1={};let WK=xA("");if(oi.allowVerticalPlacement&&bl.vertical){const Zc=Nu.layout.get("text-rotate").evaluate(Ua,{},pm)+90;M_=new d(vc,Sr,Wa,Gu,$c,bl.vertical,Hc,ph,bc,Zc),kA&&(w_=new d(vc,Sr,Wa,Gu,$c,kA,np,pu,bc,Zc))}if(yc){const Zc=Nu.layout.get("icon-rotate").evaluate(Ua,{}),ef=Nu.layout.get("icon-text-fit")!=="none",Bb=Rg(yc,Zc,d1,ef),gm=kA?Rg(kA,Zc,d1,ef):void 0;x_=new d(vc,Sr,Wa,Gu,$c,yc,np,pu,!1,Zc),zK=4*Bb.length;const Ob=oi.iconSizeData;let Pg=null;Ob.kind==="source"?(Pg=[Ku*Nu.layout.get("icon-size").evaluate(Ua,{})],Pg[0]>Zh&&gt(`${oi.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Ob.kind==="composite"&&(Pg=[Ku*mu.compositeIconSizes[0].evaluate(Ua,{},pm),Ku*mu.compositeIconSizes[1].evaluate(Ua,{},pm)],(Pg[0]>Zh||Pg[1]>Zh)&&gt(`${oi.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),oi.addSymbols(oi.icon,Bb,Pg,Cl,xa,Ua,s.ay.none,Sr,Ly.lineStartIndex,Ly.lineLength,-1,pm),HB=oi.icon.placedSymbolArray.length-1,gm&&(jK=4*gm.length,oi.addSymbols(oi.icon,gm,Pg,Cl,xa,Ua,s.ay.vertical,Sr,Ly.lineStartIndex,Ly.lineLength,-1,pm),ZB=oi.icon.placedSymbolArray.length-1)}const QK=Object.keys(bl.horizontal);for(const Zc of QK){const ef=bl.horizontal[Zc];if(!Eb){WK=xA(ef.text);const gm=Nu.layout.get("text-rotate").evaluate(Ua,{},pm);Eb=new d(vc,Sr,Wa,Gu,$c,ef,Hc,ph,bc,gm)}const Bb=ef.positionedLines.length===1;if(NK+=fn(oi,Sr,ef,tp,Nu,bc,Ua,mh,Ly,bl.vertical?s.ay.horizontal:s.ay.horizontalOnly,Bb?QK:[Zc],f1,HB,mu,pm),Bb)break}bl.vertical&&(GK+=fn(oi,Sr,bl.vertical,tp,Nu,bc,Ua,mh,Ly,s.ay.vertical,["vertical"],f1,ZB,mu,pm));const qse=Eb?Eb.boxStartIndex:oi.collisionBoxArray.length,Yse=Eb?Eb.boxEndIndex:oi.collisionBoxArray.length,Vse=M_?M_.boxStartIndex:oi.collisionBoxArray.length,$se=M_?M_.boxEndIndex:oi.collisionBoxArray.length,Hse=x_?x_.boxStartIndex:oi.collisionBoxArray.length,Zse=x_?x_.boxEndIndex:oi.collisionBoxArray.length,Xse=w_?w_.boxStartIndex:oi.collisionBoxArray.length,Jse=w_?w_.boxEndIndex:oi.collisionBoxArray.length;let mm=-1;const O5=(Zc,ef)=>Zc&&Zc.circleDiameter?Math.max(Zc.circleDiameter,ef):ef;mm=O5(Eb,mm),mm=O5(M_,mm),mm=O5(x_,mm),mm=O5(w_,mm);const qK=mm>-1?1:0;qK&&(mm*=X2/Pa),oi.glyphOffsetArray.length>=sm.MAX_GLYPHS&&gt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ua.sortKey!==void 0&&oi.addToSortKeyRanges(oi.symbolInstances.length,Ua.sortKey);const eae=mt(Nu,Ua,pm),[tae,nae]=(function(Zc,ef){const Bb=Zc.length,gm=ef?.values;if(gm?.length>0)for(let Ob=0;Ob<gm.length;Ob+=2){const Pg=gm[Ob+1];Zc.emplaceBack(s.aO[gm[Ob]],Pg[0],Pg[1])}return[Bb,Zc.length]})(oi.textAnchorOffsets,eae);oi.symbolInstances.emplaceBack(Sr.x,Sr.y,f1.right>=0?f1.right:-1,f1.center>=0?f1.center:-1,f1.left>=0?f1.left:-1,f1.vertical||-1,HB,ZB,WK,qse,Yse,Vse,$se,Hse,Zse,Xse,Jse,Wa,NK,GK,zK,jK,qK,0,Hc,mm,tae,nae)})(p,Ri,Ei,A,b,x,Cn,p.layers[0],p.collisionBoxArray,l.index,l.sourceLayerIndex,p.index,Me,[ot,ot,ot,ot],Vt,w,Ue,nt,Jt,ie,l,B,k,F,h)};if(on==="line")for(const Ei of Jd(l.geometry,0,0,ht,ht)){const Ri=Pf(Ei,en),oi=Dg(Ri,je,Mt,A.vertical||Ae,b,24,We,p.overscaling,ht);for(const Sr of oi)Ae&&tn(p,Ae.text,kn,Sr)||xi(Ri,Sr)}else if(on==="line-center"){for(const Ei of l.geometry)if(Ei.length>1){const Ri=Pf(Ei,en),oi=__(Ri,Mt,A.vertical||Ae,b,24,We);oi&&xi(Ri,oi)}}else if(l.type==="Polygon")for(const Ei of Ih(l.geometry,0)){const Ri=S(Ei,16);xi(Pf(Ei[0],en,!0),new fh(Ri.x,Ri.y,0))}else if(l.type==="LineString")for(const Ei of l.geometry){const Ri=Pf(Ei,en);xi(Ri,new fh(Ri[0].x,Ri[0].y,0))}else if(l.type==="Point")for(const Ei of l.geometry)for(const Ri of Ei)xi([Ri],new fh(Ri.x,Ri.y,0))}function fn(p,l,A,b,x,B,h,g,w,k,F,j,H,ne,ie){const Ae=(function(We,Ue,je,ot,nt,Mt,Vt,Jt){const on=ot.layout.get("text-rotate").evaluate(Mt,{})*Math.PI/180,kn=[];for(const An of Ue.positionedLines)for(const Cn of An.positionedGlyphs){if(!Cn.rect)continue;const en=Cn.rect||{};let xi=4,Ei=!0,Ri=1,oi=0;const Sr=(nt||Jt)&&Cn.vertical,ua=Cn.metrics.advance*Cn.scale/2;if(Jt&&Ue.verticalizable&&(oi=An.lineOffset/2-(Cn.imageName?-(Pa-Cn.metrics.width*Cn.scale)/2:(Cn.scale-1)*Pa)),Cn.imageName){const pu=Vt[Cn.imageName];Ei=pu.sdf,Ri=pu.pixelRatio,xi=1/Ri}const bl=nt?[Cn.x+ua,Cn.y]:[0,0];let yc=nt?[0,0]:[Cn.x+ua+je[0],Cn.y+je[1]-oi],tp=[0,0];Sr&&(tp=yc,yc=[0,0]);const kA=Cn.metrics.isDoubleResolution?2:1,Nu=(Cn.metrics.left-xi)*Cn.scale-ua+yc[0],vc=(-Cn.metrics.top-xi)*Cn.scale+yc[1],Wa=Nu+en.w/kA*Cn.scale/Ri,Gu=vc+en.h/kA*Cn.scale/Ri,$c=new c(Nu,vc),Hc=new c(Wa,vc),ph=new c(Nu,Gu),bc=new c(Wa,Gu);if(Sr){const pu=new c(-ua,ua- -17),xa=-Math.PI/2,Cl=12-ua,Ua=new c(22-Cl,-(Cn.imageName?Cl:0)),mu=new c(...tp);$c._rotateAround(xa,pu)._add(Ua)._add(mu),Hc._rotateAround(xa,pu)._add(Ua)._add(mu),ph._rotateAround(xa,pu)._add(Ua)._add(mu),bc._rotateAround(xa,pu)._add(Ua)._add(mu)}if(on){const pu=Math.sin(on),xa=Math.cos(on),Cl=[xa,-pu,pu,xa];$c._matMult(Cl),Hc._matMult(Cl),ph._matMult(Cl),bc._matMult(Cl)}const mh=new c(0,0),np=new c(0,0);kn.push({tl:$c,tr:Hc,bl:ph,br:bc,tex:en,writingMode:Ue.writingMode,glyphOffset:bl,sectionIndex:Cn.sectionIndex,isSDF:Ei,pixelOffsetTL:mh,pixelOffsetBR:np,minFontScaleX:0,minFontScaleY:0})}return kn})(0,A,g,x,B,h,b,p.allowVerticalPlacement),de=p.textSizeData;let Me=null;de.kind==="source"?(Me=[Ku*x.layout.get("text-size").evaluate(h,{})],Me[0]>Zh&&gt(`${p.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):de.kind==="composite"&&(Me=[Ku*ne.compositeTextSizes[0].evaluate(h,{},ie),Ku*ne.compositeTextSizes[1].evaluate(h,{},ie)],(Me[0]>Zh||Me[1]>Zh)&&gt(`${p.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),p.addSymbols(p.text,Ae,Me,g,B,h,k,l,w.lineStartIndex,w.lineLength,H,ie);for(const We of F)j[We]=p.text.placedSymbolArray.length-1;return 4*Ae.length}function $t(p){for(const l in p)return p[l];return null}function tn(p,l,A,b){const x=p.compareText;if(l in x){const B=x[l];for(let h=B.length-1;h>=0;h--)if(b.dist(B[h])<A)return!0}else x[l]=[];return x[l].push(b),!1}const mi=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class ji{static from(l){if(!(l instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[A,b]=new Uint8Array(l,0,2);if(A!==219)throw new Error("Data does not appear to be in a KDBush format.");const x=b>>4;if(x!==1)throw new Error(`Got v${x} data when expected v1.`);const B=mi[15&b];if(!B)throw new Error("Unrecognized array type.");const[h]=new Uint16Array(l,2,1),[g]=new Uint32Array(l,4,1);return new ji(g,h,B,l)}constructor(l,A=64,b=Float64Array,x){if(isNaN(l)||l<0)throw new Error(`Unpexpected numItems value: ${l}.`);this.numItems=+l,this.nodeSize=Math.min(Math.max(+A,2),65535),this.ArrayType=b,this.IndexArrayType=l<65536?Uint16Array:Uint32Array;const B=mi.indexOf(this.ArrayType),h=2*l*this.ArrayType.BYTES_PER_ELEMENT,g=l*this.IndexArrayType.BYTES_PER_ELEMENT,w=(8-g%8)%8;if(B<0)throw new Error(`Unexpected typed array class: ${b}.`);x&&x instanceof ArrayBuffer?(this.data=x,this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+g+w,2*l),this._pos=2*l,this._finished=!0):(this.data=new ArrayBuffer(8+h+g+w),this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+g+w,2*l),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+B]),new Uint16Array(this.data,2,1)[0]=A,new Uint32Array(this.data,4,1)[0]=l)}add(l,A){const b=this._pos>>1;return this.ids[b]=b,this.coords[this._pos++]=l,this.coords[this._pos++]=A,b}finish(){const l=this._pos>>1;if(l!==this.numItems)throw new Error(`Added ${l} items when expected ${this.numItems}.`);return jo(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(l,A,b,x){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:B,coords:h,nodeSize:g}=this,w=[0,B.length-1,0],k=[];for(;w.length;){const F=w.pop()||0,j=w.pop()||0,H=w.pop()||0;if(j-H<=g){for(let de=H;de<=j;de++){const Me=h[2*de],We=h[2*de+1];Me>=l&&Me<=b&&We>=A&&We<=x&&k.push(B[de])}continue}const ne=H+j>>1,ie=h[2*ne],Ae=h[2*ne+1];ie>=l&&ie<=b&&Ae>=A&&Ae<=x&&k.push(B[ne]),(F===0?l<=ie:A<=Ae)&&(w.push(H),w.push(ne-1),w.push(1-F)),(F===0?b>=ie:x>=Ae)&&(w.push(ne+1),w.push(j),w.push(1-F))}return k}within(l,A,b){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:B,nodeSize:h}=this,g=[0,x.length-1,0],w=[],k=b*b;for(;g.length;){const F=g.pop()||0,j=g.pop()||0,H=g.pop()||0;if(j-H<=h){for(let de=H;de<=j;de++)dn(B[2*de],B[2*de+1],l,A)<=k&&w.push(x[de]);continue}const ne=H+j>>1,ie=B[2*ne],Ae=B[2*ne+1];dn(ie,Ae,l,A)<=k&&w.push(x[ne]),(F===0?l-b<=ie:A-b<=Ae)&&(g.push(H),g.push(ne-1),g.push(1-F)),(F===0?l+b>=ie:A+b>=Ae)&&(g.push(ne+1),g.push(j),g.push(1-F))}return w}}function jo(p,l,A,b,x,B){if(x-b<=A)return;const h=b+x>>1;Dt(p,l,h,b,x,B),jo(p,l,A,b,h-1,1-B),jo(p,l,A,h+1,x,1-B)}function Dt(p,l,A,b,x,B){for(;x>b;){if(x-b>600){const k=x-b+1,F=A-b+1,j=Math.log(k),H=.5*Math.exp(2*j/3),ne=.5*Math.sqrt(j*H*(k-H)/k)*(F-k/2<0?-1:1);Dt(p,l,A,Math.max(b,Math.floor(A-F*H/k+ne)),Math.min(x,Math.floor(A+(k-F)*H/k+ne)),B)}const h=l[2*A+B];let g=b,w=x;for(_t(p,l,b,A),l[2*x+B]>h&&_t(p,l,b,x);g<w;){for(_t(p,l,g,w),g++,w--;l[2*g+B]<h;)g++;for(;l[2*w+B]>h;)w--}l[2*b+B]===h?_t(p,l,b,w):(w++,_t(p,l,w,x)),w<=A&&(b=w+1),A<=w&&(x=w-1)}}function _t(p,l,A,b){Gt(p,A,b),Gt(l,2*A,2*b),Gt(l,2*A+1,2*b+1)}function Gt(p,l,A){const b=p[l];p[l]=p[A],p[A]=b}function dn(p,l,A,b){const x=p-A,B=l-b;return x*x+B*B}var Di;s.cG=void 0,(Di=s.cG||(s.cG={})).create="create",Di.load="load",Di.fullLoad="fullLoad";let oo=null,_i=[];const Ar=1e3/60,Ur="loadTime",Ao="fullLoadTime",ep={mark(p){performance.mark(p)},frame(p){const l=p;oo!=null&&_i.push(l-oo),oo=l},clearMetrics(){oo=null,_i=[],performance.clearMeasures(Ur),performance.clearMeasures(Ao);for(const p in s.cG)performance.clearMarks(s.cG[p])},getPerformanceMetrics(){performance.measure(Ur,s.cG.create,s.cG.load),performance.measure(Ao,s.cG.create,s.cG.fullLoad);const p=performance.getEntriesByName(Ur)[0].duration,l=performance.getEntriesByName(Ao)[0].duration,A=_i.length,b=1/(_i.reduce(((B,h)=>B+h),0)/A/1e3),x=_i.filter((B=>B>Ar)).reduce(((B,h)=>B+(h-Ar)/Ar),0);return{loadTime:p,fullLoadTime:l,fps:b,percentDroppedFrames:x/(A+x)*100,totalFrames:A}}};s.$=Q,s.A=$,s.B=yA,s.C=sc,s.D=Vn,s.E=rt,s.F=function([p,l,A]){return l+=90,l*=Math.PI/180,A*=Math.PI/180,{x:p*Math.cos(l)*Math.sin(A),y:p*Math.sin(l)*Math.sin(A),z:p*Math.cos(A)}},s.G=Xu,s.H=ao,s.I=Y0,s.J=J1,s.K=function(p){if(Zt==null){const l=p.navigator?p.navigator.userAgent:null;Zt=!!p.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return Zt},s.L=class{constructor(p,l){this.target=p,this.mapId=l,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new La((()=>this.process())),this.subscription=wn(this.target,"message",(A=>this.receive(A)),!1),this.globalScope=Tt(self)?p:window}registerMessageHandler(p,l){this.messageHandlers[p]=l}unregisterMessageHandler(p){delete this.messageHandlers[p]}sendAsync(p,l){return new Promise(((A,b)=>{const x=Math.round(1e18*Math.random()).toString(36).substring(0,10),B=l?wn(l.signal,"abort",(()=>{B?.unsubscribe(),delete this.resolveRejects[x];const w={id:x,type:"<cancel>",origin:location.origin,targetMapId:p.targetMapId,sourceMapId:this.mapId};this.target.postMessage(w)}),e1):null;this.resolveRejects[x]={resolve:w=>{B?.unsubscribe(),A(w)},reject:w=>{B?.unsubscribe(),b(w)}};const h=[],g=Object.assign(Object.assign({},p),{id:x,sourceMapId:this.mapId,origin:location.origin,data:Fh(p.data,h)});this.target.postMessage(g,{transfer:h})}))}receive(p){const l=p.data,A=l.id;if(!(l.origin!=="file://"&&location.origin!=="file://"&&l.origin!=="resource://android"&&location.origin!=="resource://android"&&l.origin!==location.origin||l.targetMapId&&this.mapId!==l.targetMapId)){if(l.type==="<cancel>"){delete this.tasks[A];const b=this.abortControllers[A];return delete this.abortControllers[A],void(b&&b.abort())}if(Tt(self)||l.mustQueue)return this.tasks[A]=l,this.taskQueue.push(A),void this.invoker.trigger();this.processTask(A,l)}}process(){if(this.taskQueue.length===0)return;const p=this.taskQueue.shift(),l=this.tasks[p];delete this.tasks[p],this.taskQueue.length>0&&this.invoker.trigger(),l&&this.processTask(p,l)}processTask(p,l){return a(this,void 0,void 0,(function*(){if(l.type==="<response>"){const x=this.resolveRejects[p];return delete this.resolveRejects[p],x?void(l.error?x.reject(vA(l.error)):x.resolve(vA(l.data))):void 0}if(!this.messageHandlers[l.type])return void this.completeTask(p,new Error(`Could not find a registered handler for ${l.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const A=vA(l.data),b=new AbortController;this.abortControllers[p]=b;try{const x=yield this.messageHandlers[l.type](l.sourceMapId,A,b);this.completeTask(p,null,x)}catch(x){this.completeTask(p,x)}}))}completeTask(p,l,A){const b=[];delete this.abortControllers[p];const x={id:p,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:l?Fh(l):null,data:Fh(A,b)};this.target.postMessage(x,{transfer:b})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},s.M=xt,s.N=function(){var p=new $(16);return $!=Float32Array&&(p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[11]=0,p[12]=0,p[13]=0,p[14]=0),p[0]=1,p[5]=1,p[10]=1,p[15]=1,p},s.O=function(p,l,A){var b,x,B,h,g,w,k,F,j,H,ne,ie,Ae=A[0],de=A[1],Me=A[2];return l===p?(p[12]=l[0]*Ae+l[4]*de+l[8]*Me+l[12],p[13]=l[1]*Ae+l[5]*de+l[9]*Me+l[13],p[14]=l[2]*Ae+l[6]*de+l[10]*Me+l[14],p[15]=l[3]*Ae+l[7]*de+l[11]*Me+l[15]):(x=l[1],B=l[2],h=l[3],g=l[4],w=l[5],k=l[6],F=l[7],j=l[8],H=l[9],ne=l[10],ie=l[11],p[0]=b=l[0],p[1]=x,p[2]=B,p[3]=h,p[4]=g,p[5]=w,p[6]=k,p[7]=F,p[8]=j,p[9]=H,p[10]=ne,p[11]=ie,p[12]=b*Ae+g*de+j*Me+l[12],p[13]=x*Ae+w*de+H*Me+l[13],p[14]=B*Ae+k*de+ne*Me+l[14],p[15]=h*Ae+F*de+ie*Me+l[15]),p},s.P=c,s.Q=function(p,l,A){var b=A[0],x=A[1],B=A[2];return p[0]=l[0]*b,p[1]=l[1]*b,p[2]=l[2]*b,p[3]=l[3]*b,p[4]=l[4]*x,p[5]=l[5]*x,p[6]=l[6]*x,p[7]=l[7]*x,p[8]=l[8]*B,p[9]=l[9]*B,p[10]=l[10]*B,p[11]=l[11]*B,p[12]=l[12],p[13]=l[13],p[14]=l[14],p[15]=l[15],p},s.R=Ql,s.S=function(p,l,A){var b=l[0],x=l[1],B=l[2],h=l[3],g=l[4],w=l[5],k=l[6],F=l[7],j=l[8],H=l[9],ne=l[10],ie=l[11],Ae=l[12],de=l[13],Me=l[14],We=l[15],Ue=A[0],je=A[1],ot=A[2],nt=A[3];return p[0]=Ue*b+je*g+ot*j+nt*Ae,p[1]=Ue*x+je*w+ot*H+nt*de,p[2]=Ue*B+je*k+ot*ne+nt*Me,p[3]=Ue*h+je*F+ot*ie+nt*We,p[4]=(Ue=A[4])*b+(je=A[5])*g+(ot=A[6])*j+(nt=A[7])*Ae,p[5]=Ue*x+je*w+ot*H+nt*de,p[6]=Ue*B+je*k+ot*ne+nt*Me,p[7]=Ue*h+je*F+ot*ie+nt*We,p[8]=(Ue=A[8])*b+(je=A[9])*g+(ot=A[10])*j+(nt=A[11])*Ae,p[9]=Ue*x+je*w+ot*H+nt*de,p[10]=Ue*B+je*k+ot*ne+nt*Me,p[11]=Ue*h+je*F+ot*ie+nt*We,p[12]=(Ue=A[12])*b+(je=A[13])*g+(ot=A[14])*j+(nt=A[15])*Ae,p[13]=Ue*x+je*w+ot*H+nt*de,p[14]=Ue*B+je*k+ot*ne+nt*Me,p[15]=Ue*h+je*F+ot*ie+nt*We,p},s.T=Vp,s.U=function(p,l){const A={};for(let b=0;b<l.length;b++){const x=l[b];x in p&&(A[x]=p[x])}return A},s.V=$d,s.W=Pt,s.X=Ey,s.Y=t1,s.Z=z,s._=a,s.a=Pe,s.a$=ue,s.a0=fi,s.a1=pc,s.a2=By,s.a3=hu,s.a4=ht,s.a5=function(p,l,A){if(!p)return l||{};if(!l)return p||{};const b=gl(p),x=gl(l);(function(h,g){g.removeAll&&(h.add.clear(),h.update.clear(),h.remove.clear(),g.remove.clear());for(const w of g.remove)h.add.delete(w),h.update.delete(w);for(const[w,k]of g.update){const F=h.update.get(w);F&&(g.update.set(w,sb(F,k)),h.update.delete(w))}})(b,x);const B={};if((b.removeAll||x.removeAll)&&(B.removeAll=!0),B.remove=new Set([...b.remove,...x.remove]),B.add=new Map([...b.add,...x.add]),B.update=new Map([...b.update,...x.update]),B.remove.size&&B.add.size)for(const h of B.add.keys())B.remove.delete(h);return(function(h){const g={};return h.removeAll&&(g.removeAll=h.removeAll),h.remove&&(g.remove=Array.from(h.remove)),h.add&&(g.add=Array.from(h.add.values())),h.update&&(g.update=Array.from(h.update.values())),g})(B)},s.a6=function(p,l){if(p==null)return!0;if(p.type==="Feature")return Co(p,l)!=null;if(p.type==="FeatureCollection"){const A=new Set;for(const b of p.features){const x=Co(b,l);if(x==null||A.has(x))return!1;A.add(x)}return!0}return!1},s.a7=function(p,l){const A=new Map;if(p!=null)if(p.type==="Feature")A.set(Co(p,l),p);else for(const b of p.features)A.set(Co(b,l),b);return A},s.a8=function(p,l,A){var b,x;if(l.removeAll)p.clear();else if(l.remove)for(const B of l.remove)p.delete(B);if(l.add)for(const B of l.add){const h=Co(B,A);h!=null&&p.set(h,B)}if(l.update)for(const B of l.update){let h=p.get(B.id);if(!h)continue;const g=!!B.newGeometry,w=B.removeAllProperties||((b=B.removeProperties)===null||b===void 0?void 0:b.length)>0||((x=B.addOrUpdateProperties)===null||x===void 0?void 0:x.length)>0;if((g||w)&&(h=Object.assign({},h),p.set(B.id,h),g&&(h.geometry=B.newGeometry),w)){if(h.properties=B.removeAllProperties?{}:Object.assign({},h.properties||{}),B.removeProperties)for(const k of B.removeProperties)delete h.properties[k];if(B.addOrUpdateProperties)for(const{key:k,value:F}of B.addOrUpdateProperties)h.properties[k]=F}}},s.a9=nd,s.aA=function(p,l){var A=l[0],b=l[1],x=l[2],B=l[3],h=l[4],g=l[5],w=l[6],k=l[7],F=l[8],j=l[9],H=l[10],ne=l[11],ie=l[12],Ae=l[13],de=l[14],Me=l[15],We=A*g-b*h,Ue=A*w-x*h,je=A*k-B*h,ot=b*w-x*g,nt=b*k-B*g,Mt=x*k-B*w,Vt=F*Ae-j*ie,Jt=F*de-H*ie,on=F*Me-ne*ie,kn=j*de-H*Ae,An=j*Me-ne*Ae,Cn=H*Me-ne*de,en=We*Cn-Ue*An+je*kn+ot*on-nt*Jt+Mt*Vt;return en?(p[0]=(g*Cn-w*An+k*kn)*(en=1/en),p[1]=(x*An-b*Cn-B*kn)*en,p[2]=(Ae*Mt-de*nt+Me*ot)*en,p[3]=(H*nt-j*Mt-ne*ot)*en,p[4]=(w*on-h*Cn-k*Jt)*en,p[5]=(A*Cn-x*on+B*Jt)*en,p[6]=(de*je-ie*Mt-Me*Ue)*en,p[7]=(F*Mt-H*je+ne*Ue)*en,p[8]=(h*An-g*on+k*Vt)*en,p[9]=(b*on-A*An-B*Vt)*en,p[10]=(ie*nt-Ae*je+Me*We)*en,p[11]=(j*je-F*nt-ne*We)*en,p[12]=(g*Jt-h*kn-w*Vt)*en,p[13]=(A*kn-b*Jt+x*Vt)*en,p[14]=(Ae*Ue-ie*ot-de*We)*en,p[15]=(F*ot-j*Ue+H*We)*en,p):null},s.aB=qe,s.aC=function(p){var l=p[0],A=p[1];return Math.sqrt(l*l+A*A)},s.aD=function(p){return p[0]=0,p[1]=0,p},s.aE=function(p,l,A){return p[0]=l[0]*A,p[1]=l[1]*A,p},s.aF=om,s.aG=Be,s.aH=function(p,l,A,b){const x=l.y-p.y,B=l.x-p.x,h=b.y-A.y,g=b.x-A.x,w=h*B-g*x;if(w===0)return null;const k=(g*(p.y-A.y)-h*(p.x-A.x))/w;return new c(p.x+k*B,p.y+k*x)},s.aI=Jd,s.aJ=ug,s.aK=function(p){let l=1/0,A=1/0,b=-1/0,x=-1/0;for(const B of p)l=Math.min(l,B.x),A=Math.min(A,B.y),b=Math.max(b,B.x),x=Math.max(x,B.y);return[l,A,b,x]},s.aL=Pa,s.aM=De,s.aN=function(p,l,A,b,x=!1){if(!A[0]&&!A[1])return[0,0];const B=x?b==="map"?-p.bearingInRadians:0:b==="viewport"?p.bearingInRadians:0;if(B){const h=Math.sin(B),g=Math.cos(B);A=[A[0]*g-A[1]*h,A[0]*h+A[1]*g]}return[x?A[0]:De(l,A[0],p.zoom),x?A[1]:De(l,A[1],p.zoom)]},s.aP=X0,s.aQ=Wt,s.aR=$0,s.aS=ji,s.aT=Hr,s.aU=Zp,s.aV=Ze,s.aW=Fi,s.aX=Sn,s.aY=En,s.aZ=Mg,s.a_=ve,s.aa=Wf,s.ab=gc,s.ac=25,s.ad=$s,s.ae=p=>{const l=window.document.createElement("video");return l.muted=!0,new Promise((A=>{l.onloadstart=()=>{A(l)};for(const b of p){const x=window.document.createElement("source");ae(b)||(l.crossOrigin="Anonymous"),x.src=b,l.appendChild(x)}}))},s.af=nn,s.ag=function(){return Oe++},s.ah=U,s.ai=sm,s.aj=ou,s.ak=js,s.al=Oy,s.am=function(p){const l={};if(p.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((A,b,x,B)=>{const h=x||B;return l[b]=!h||h.toLowerCase(),""})),l["max-age"]){const A=parseInt(l["max-age"],10);isNaN(A)?delete l["max-age"]:l["max-age"]=A}return l},s.an=Et,s.ao=85.051129,s.ap=qn,s.aq=function(p){return Math.pow(2,p)},s.ar=ee,s.as=n1,s.at=function(p){return Math.log(p)/Math.LN2},s.au=function(p){var l=p[0],A=p[1];return l*l+A*A},s.av=class{constructor(p,l){this.max=p,this.onRemove=l,this.reset()}reset(){for(const p in this.data)for(const l of this.data[p])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(p,l,A){const b=p.wrapped().key;this.data[b]===void 0&&(this.data[b]=[]);const x={value:l,timeout:void 0};if(A!==void 0&&(x.timeout=setTimeout((()=>{this.remove(p,x)}),A)),this.data[b].push(x),this.order.push(b),this.order.length>this.max){const B=this._getAndRemoveByKey(this.order[0]);B&&this.onRemove(B)}return this}has(p){return p.wrapped().key in this.data}getAndRemove(p){return this.has(p)?this._getAndRemoveByKey(p.wrapped().key):null}_getAndRemoveByKey(p){const l=this.data[p].shift();return l.timeout&&clearTimeout(l.timeout),this.data[p].length===0&&delete this.data[p],this.order.splice(this.order.indexOf(p),1),l.value}getByKey(p){const l=this.data[p];return l?l[0].value:null}get(p){return this.has(p)?this.data[p.wrapped().key][0].value:null}remove(p,l){if(!this.has(p))return this;const A=p.wrapped().key,b=l===void 0?0:this.data[A].indexOf(l),x=this.data[A][b];return this.data[A].splice(b,1),x.timeout&&clearTimeout(x.timeout),this.data[A].length===0&&delete this.data[A],this.onRemove(x.value),this.order.splice(this.order.indexOf(A),1),this}setMaxSize(p){for(this.max=p;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(p){const l=[];for(const A in this.data)for(const b of this.data[A])p(b.value)||l.push(b);for(const A of l)this.remove(A.value.tileID,A)}},s.aw=function(p){if(!p.length)return new Set;const l=Math.max(...p.map((w=>w.canonical.z)));let A=1/0,b=-1/0,x=1/0,B=-1/0;const h=[];for(const w of p){const{x:k,y:F,z:j}=w.canonical,H=Math.pow(2,l-j),ne=k*H,ie=F*H;h.push({id:w,x:ne,y:ie}),ne<A&&(A=ne),ne>b&&(b=ne),ie<x&&(x=ie),ie>B&&(B=ie)}const g=new Set;for(const w of h)w.x!==A&&w.x!==b&&w.y!==x&&w.y!==B||g.add(w.id);return g},s.ax=function(p,l){let A=0,b=0;if(p.kind==="constant")b=p.layoutSize;else if(p.kind!=="source"){const{interpolationType:x,minZoom:B,maxZoom:h}=p,g=x?Et(Io.interpolationFactor(x,l,B,h),0,1):0;p.kind==="camera"?b=Xu.number(p.minSize,p.maxSize,g):A=g}return{uSizeT:A,uSize:b}},s.az=function(p,{uSize:l,uSizeT:A},{lowerSize:b,upperSize:x}){return p.kind==="source"?b/Ku:p.kind==="composite"?Xu.number(b/Ku,x/Ku,A):l},s.b=Fn,s.b$=class extends uu{constructor(p,l){super(p,l),this.current=Gc}set(p){if(p[12]!==this.current[12]||p[0]!==this.current[0])return this.current=p,void this.gl.uniformMatrix4fv(this.location,!1,p);for(let l=1;l<16;l++)if(p[l]!==this.current[l]){this.current=p,this.gl.uniformMatrix4fv(this.location,!1,p);break}}},s.b0=function(p){var l=new $(3);return l[0]=p[0],l[1]=p[1],l[2]=p[2],l},s.b1=function(p,l,A){return p[0]=l[0]-A[0],p[1]=l[1]-A[1],p[2]=l[2]-A[2],p},s.b2=function(p,l){var A=l[0],b=l[1],x=l[2],B=A*A+b*b+x*x;return B>0&&(B=1/Math.sqrt(B)),p[0]=l[0]*B,p[1]=l[1]*B,p[2]=l[2]*B,p},s.b3=ye,s.b4=function(p,l){return p[0]*l[0]+p[1]*l[1]+p[2]*l[2]},s.b5=function(p,l,A){return p[0]=l[0]*A[0],p[1]=l[1]*A[1],p[2]=l[2]*A[2],p[3]=l[3]*A[3],p},s.b6=W,s.b7=function(p,l,A){const b=l[0]*A[0]+l[1]*A[1]+l[2]*A[2];return b===0?null:(-(p[0]*A[0]+p[1]*A[1]+p[2]*A[2])-A[3])/b},s.b8=_e,s.b9=function(p,l,A){return p[0]=l[0]*A,p[1]=l[1]*A,p[2]=l[2]*A,p[3]=l[3]*A,p},s.bA=Se,s.bB=function(p,l,A){var b=A[0],x=A[1],B=A[2],h=A[3],g=l[0],w=l[1],k=l[2],F=x*k-B*w,j=B*g-b*k,H=b*w-x*g;return p[0]=g+h*(F+=F)+x*(H+=H)-B*(j+=j),p[1]=w+h*j+B*F-b*H,p[2]=k+h*H+b*j-x*F,p},s.bC=function(p,l,A){const b=(x=[p[0],p[1],p[2],l[0],l[1],l[2],A[0],A[1],A[2]])[0]*((F=x[8])*(h=x[4])-(g=x[5])*(k=x[7]))+x[1]*(-F*(B=x[3])+g*(w=x[6]))+x[2]*(k*B-h*w);var x,B,h,g,w,k,F;if(b===0)return null;const j=ye([],[l[0],l[1],l[2]],[A[0],A[1],A[2]]),H=ye([],[A[0],A[1],A[2]],[p[0],p[1],p[2]]),ne=ye([],[p[0],p[1],p[2]],[l[0],l[1],l[2]]),ie=ve([],j,-p[3]);return ue(ie,ie,ve([],H,-l[3])),ue(ie,ie,ve([],ne,-A[3])),ve(ie,ie,1/b),ie},s.bD=Xh,s.bE=function(){return new Float64Array(4)},s.bF=function(p,l,A,b){var x=[],B=[];return x[0]=l[0]-A[0],x[1]=l[1]-A[1],x[2]=l[2]-A[2],B[0]=x[0]*Math.cos(b)-x[1]*Math.sin(b),B[1]=x[0]*Math.sin(b)+x[1]*Math.cos(b),B[2]=x[2],p[0]=B[0]+A[0],p[1]=B[1]+A[1],p[2]=B[2]+A[2],p},s.bG=function(p,l,A,b){var x=[],B=[];return x[0]=l[0]-A[0],x[1]=l[1]-A[1],x[2]=l[2]-A[2],B[0]=x[0],B[1]=x[1]*Math.cos(b)-x[2]*Math.sin(b),B[2]=x[1]*Math.sin(b)+x[2]*Math.cos(b),p[0]=B[0]+A[0],p[1]=B[1]+A[1],p[2]=B[2]+A[2],p},s.bH=function(p,l,A,b){var x=[],B=[];return x[0]=l[0]-A[0],x[1]=l[1]-A[1],x[2]=l[2]-A[2],B[0]=x[2]*Math.sin(b)+x[0]*Math.cos(b),B[1]=x[1],B[2]=x[2]*Math.cos(b)-x[0]*Math.sin(b),p[0]=B[0]+A[0],p[1]=B[1]+A[1],p[2]=B[2]+A[2],p},s.bI=function(p,l,A){var b=Math.sin(A),x=Math.cos(A),B=l[0],h=l[1],g=l[2],w=l[3],k=l[8],F=l[9],j=l[10],H=l[11];return l!==p&&(p[4]=l[4],p[5]=l[5],p[6]=l[6],p[7]=l[7],p[12]=l[12],p[13]=l[13],p[14]=l[14],p[15]=l[15]),p[0]=B*x-k*b,p[1]=h*x-F*b,p[2]=g*x-j*b,p[3]=w*x-H*b,p[8]=B*b+k*x,p[9]=h*b+F*x,p[10]=g*b+j*x,p[11]=w*b+H*x,p},s.bJ=function(p,l){const A=Ie(p,360),b=Ie(l,360),x=b-A,B=b>A?x-360:x+360;return Math.abs(x)<Math.abs(B)?x:B},s.bK=function(p){return p[0]=0,p[1]=0,p[2]=0,p},s.bL=function(p,l,A,b){const x=Math.sqrt(p*p+l*l),B=Math.sqrt(A*A+b*b);p/=x,l/=x,A/=B,b/=B;const h=Math.acos(p*A+l*b);return-l*A+p*b>0?h:-h},s.bM=function(p,l){const A=Ie(p,2*Math.PI),b=Ie(l,2*Math.PI);return Math.min(Math.abs(A-b),Math.abs(A-b+2*Math.PI),Math.abs(A-b-2*Math.PI))},s.bN=function(){const p={},l=Re.$version;for(const A in Re.$root){const b=Re.$root[A];if(b.required){let x=null;x=A==="version"?l:b.type==="array"?[]:{},x!=null&&(p[A]=x)}}return p},s.bO=_n,s.bP=Bf,s.bQ=function p(l,A){if(Array.isArray(l)){if(!Array.isArray(A)||l.length!==A.length)return!1;for(let b=0;b<l.length;b++)if(!p(l[b],A[b]))return!1;return!0}if(typeof l=="object"&&l!==null&&A!==null){if(typeof A!="object"||Object.keys(l).length!==Object.keys(A).length)return!1;for(const b in l)if(!p(l[b],A[b]))return!1;return!0}return l===A},s.bR=function(p){p=p.slice();const l=Object.create(null);for(let A=0;A<p.length;A++)l[p[A].id]=p[A];for(let A=0;A<p.length;A++)"ref"in p[A]&&(p[A]=St(p[A],l[p[A].ref]));return p},s.bS=function(p,l){if(p.type==="custom")return new fc(p,l);switch(p.type){case"background":return new rb(p,l);case"circle":return new Uv(p,l);case"color-relief":return new qC(p,l);case"fill":return new Uf(p,l);case"fill-extrusion":return new vg(p,l);case"heatmap":return new sy(p,l);case"hillshade":return new Nd(p,l);case"line":return new gy(p,l);case"raster":return new uc(p,l);case"symbol":return new J0(p,l)}},s.bT=p=>p.type==="raster",s.bU=ft,s.bV=function(p,l){if(!p)return[{command:"setStyle",args:[l]}];let A=[];try{if(!Bt(p.version,l.version))return[{command:"setStyle",args:[l]}];Bt(p.center,l.center)||A.push({command:"setCenter",args:[l.center]}),Bt(p.state,l.state)||A.push({command:"setGlobalState",args:[l.state]}),Bt(p.centerAltitude,l.centerAltitude)||A.push({command:"setCenterAltitude",args:[l.centerAltitude]}),Bt(p.zoom,l.zoom)||A.push({command:"setZoom",args:[l.zoom]}),Bt(p.bearing,l.bearing)||A.push({command:"setBearing",args:[l.bearing]}),Bt(p.pitch,l.pitch)||A.push({command:"setPitch",args:[l.pitch]}),Bt(p.roll,l.roll)||A.push({command:"setRoll",args:[l.roll]}),Bt(p.sprite,l.sprite)||A.push({command:"setSprite",args:[l.sprite]}),Bt(p.glyphs,l.glyphs)||A.push({command:"setGlyphs",args:[l.glyphs]}),Bt(p.transition,l.transition)||A.push({command:"setTransition",args:[l.transition]}),Bt(p.light,l.light)||A.push({command:"setLight",args:[l.light]}),Bt(p.terrain,l.terrain)||A.push({command:"setTerrain",args:[l.terrain]}),Bt(p.sky,l.sky)||A.push({command:"setSky",args:[l.sky]}),Bt(p.projection,l.projection)||A.push({command:"setProjection",args:[l.projection]});const b={},x=[];(function(h,g,w,k){let F;for(F in g=g||{},h=h||{})Object.prototype.hasOwnProperty.call(h,F)&&(Object.prototype.hasOwnProperty.call(g,F)||Tn(F,w,k));for(F in g)Object.prototype.hasOwnProperty.call(g,F)&&(Object.prototype.hasOwnProperty.call(h,F)?Bt(h[F],g[F])||(h[F].type==="geojson"&&g[F].type==="geojson"&&vi(h,g,F)?kt(w,{command:"setGeoJSONSourceData",args:[F,g[F].data]}):Yn(F,g,w,k)):sn(F,g,w))})(p.sources,l.sources,x,b);const B=[];p.layers&&p.layers.forEach((h=>{"source"in h&&b[h.source]?A.push({command:"removeLayer",args:[h.id]}):B.push(h)})),A=A.concat(x),(function(h,g,w){g=g||[];const k=(h=h||[]).map(Zn),F=g.map(Zn),j=h.reduce(Mi,{}),H=g.reduce(Mi,{}),ne=k.slice(),ie=Object.create(null);let Ae,de,Me,We,Ue;for(let je=0,ot=0;je<k.length;je++)Ae=k[je],Object.prototype.hasOwnProperty.call(H,Ae)?ot++:(kt(w,{command:"removeLayer",args:[Ae]}),ne.splice(ne.indexOf(Ae,ot),1));for(let je=0,ot=0;je<F.length;je++)Ae=F[F.length-1-je],ne[ne.length-1-je]!==Ae&&(Object.prototype.hasOwnProperty.call(j,Ae)?(kt(w,{command:"removeLayer",args:[Ae]}),ne.splice(ne.lastIndexOf(Ae,ne.length-ot),1)):ot++,We=ne[ne.length-je],kt(w,{command:"addLayer",args:[H[Ae],We]}),ne.splice(ne.length-je,0,Ae),ie[Ae]=!0);for(let je=0;je<F.length;je++)if(Ae=F[je],de=j[Ae],Me=H[Ae],!ie[Ae]&&!Bt(de,Me))if(Bt(de.source,Me.source)&&Bt(de["source-layer"],Me["source-layer"])&&Bt(de.type,Me.type)){for(Ue in ui(de.layout,Me.layout,w,Ae,null,"setLayoutProperty"),ui(de.paint,Me.paint,w,Ae,null,"setPaintProperty"),Bt(de.filter,Me.filter)||kt(w,{command:"setFilter",args:[Ae,Me.filter]}),Bt(de.minzoom,Me.minzoom)&&Bt(de.maxzoom,Me.maxzoom)||kt(w,{command:"setLayerZoomRange",args:[Ae,Me.minzoom,Me.maxzoom]}),de)Object.prototype.hasOwnProperty.call(de,Ue)&&Ue!=="layout"&&Ue!=="paint"&&Ue!=="filter"&&Ue!=="metadata"&&Ue!=="minzoom"&&Ue!=="maxzoom"&&(Ue.indexOf("paint.")===0?ui(de[Ue],Me[Ue],w,Ae,Ue.slice(6),"setPaintProperty"):Bt(de[Ue],Me[Ue])||kt(w,{command:"setLayerProperty",args:[Ae,Ue,Me[Ue]]}));for(Ue in Me)Object.prototype.hasOwnProperty.call(Me,Ue)&&!Object.prototype.hasOwnProperty.call(de,Ue)&&Ue!=="layout"&&Ue!=="paint"&&Ue!=="filter"&&Ue!=="metadata"&&Ue!=="minzoom"&&Ue!=="maxzoom"&&(Ue.indexOf("paint.")===0?ui(de[Ue],Me[Ue],w,Ae,Ue.slice(6),"setPaintProperty"):Bt(de[Ue],Me[Ue])||kt(w,{command:"setLayerProperty",args:[Ae,Ue,Me[Ue]]}))}else kt(w,{command:"removeLayer",args:[Ae]}),We=ne[ne.lastIndexOf(Ae)+1],kt(w,{command:"addLayer",args:[Me,We]})})(B,l.layers,A)}catch(b){console.warn("Unable to compute style diff:",b),A=[{command:"setStyle",args:[l]}]}return A},s.bW=function(p){const l=[],A=p.id;return A===void 0&&l.push({message:`layers.${A}: missing required property "id"`}),p.render===void 0&&l.push({message:`layers.${A}: missing required method "render"`}),p.renderingMode&&p.renderingMode!=="2d"&&p.renderingMode!=="3d"&&l.push({message:`layers.${A}: property "renderingMode" must be either "2d" or "3d"`}),l},s.bX=we,s.bY=Ye,s.bZ=class extends uu{constructor(p,l){super(p,l),this.current=0}set(p){this.current!==p&&(this.current=p,this.gl.uniform1i(this.location,p))}},s.b_=Gl,s.ba=function(p,l){return p[0]*l[0]+p[1]*l[1]+p[2]*l[2]+p[3]},s.bb=ob,s.bc=am,s.bd=function(p,l,A,b,x){var B=1/Math.tan(l/2);if(p[0]=B/A,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=B,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[11]=-1,p[12]=0,p[13]=0,p[15]=0,x!=null&&x!==1/0){var h=1/(b-x);p[10]=(x+b)*h,p[14]=2*x*b*h}else p[10]=-1,p[14]=-2*b;return p},s.be=function(p){var l=new $(16);return l[0]=p[0],l[1]=p[1],l[2]=p[2],l[3]=p[3],l[4]=p[4],l[5]=p[5],l[6]=p[6],l[7]=p[7],l[8]=p[8],l[9]=p[9],l[10]=p[10],l[11]=p[11],l[12]=p[12],l[13]=p[13],l[14]=p[14],l[15]=p[15],l},s.bf=function(p,l,A){var b=Math.sin(A),x=Math.cos(A),B=l[0],h=l[1],g=l[2],w=l[3],k=l[4],F=l[5],j=l[6],H=l[7];return l!==p&&(p[8]=l[8],p[9]=l[9],p[10]=l[10],p[11]=l[11],p[12]=l[12],p[13]=l[13],p[14]=l[14],p[15]=l[15]),p[0]=B*x+k*b,p[1]=h*x+F*b,p[2]=g*x+j*b,p[3]=w*x+H*b,p[4]=k*x-B*b,p[5]=F*x-h*b,p[6]=j*x-g*b,p[7]=H*x-w*b,p},s.bg=function(p,l,A){var b=Math.sin(A),x=Math.cos(A),B=l[4],h=l[5],g=l[6],w=l[7],k=l[8],F=l[9],j=l[10],H=l[11];return l!==p&&(p[0]=l[0],p[1]=l[1],p[2]=l[2],p[3]=l[3],p[12]=l[12],p[13]=l[13],p[14]=l[14],p[15]=l[15]),p[4]=B*x+k*b,p[5]=h*x+F*b,p[6]=g*x+j*b,p[7]=w*x+H*b,p[8]=k*x-B*b,p[9]=F*x-h*b,p[10]=j*x-g*b,p[11]=H*x-w*b,p},s.bh=function(){const p=new Float32Array(16);return ee(p),p},s.bi=function(){const p=new Float64Array(16);return ee(p),p},s.bj=function(){return new Float64Array(16)},s.bk=function(p,l,A){const b=new Float64Array(4);return Se(b,p,l-90,A),b},s.bl=function(p,l,A,b){var x,B,h,g,w,k=l[0],F=l[1],j=l[2],H=l[3],ne=A[0],ie=A[1],Ae=A[2],de=A[3];return(B=k*ne+F*ie+j*Ae+H*de)<0&&(B=-B,ne=-ne,ie=-ie,Ae=-Ae,de=-de),1-B>V?(x=Math.acos(B),h=Math.sin(x),g=Math.sin((1-b)*x)/h,w=Math.sin(b*x)/h):(g=1-b,w=b),p[0]=g*k+w*ne,p[1]=g*F+w*ie,p[2]=g*j+w*Ae,p[3]=g*H+w*de,p},s.bm=function(p){const l=new Float64Array(9);var A,b,x,B,h,g,w,k,F,j,H,ne,ie,Ae,de,Me,We,Ue;j=(x=(b=p)[0])*(w=x+x),H=(B=b[1])*w,ie=(h=b[2])*w,Ae=h*(k=B+B),Me=(g=b[3])*w,We=g*k,Ue=g*(F=h+h),(A=l)[0]=1-(ne=B*k)-(de=h*F),A[3]=H-Ue,A[6]=ie+We,A[1]=H+Ue,A[4]=1-j-de,A[7]=Ae-Me,A[2]=ie-We,A[5]=Ae+Me,A[8]=1-j-ne;const je=En(-Math.asin(Et(l[2],-1,1)));let ot,nt;return Math.hypot(l[5],l[8])<.001?(ot=0,nt=-En(Math.atan2(l[3],l[4]))):(ot=En(l[5]===0&&l[8]===0?0:Math.atan2(l[5],l[8])),nt=En(l[1]===0&&l[0]===0?0:Math.atan2(l[1],l[0]))),{roll:ot,pitch:je+90,bearing:nt}},s.bn=function(p,l){return p.roll==l.roll&&p.pitch==l.pitch&&p.bearing==l.bearing},s.bo=Yi,s.bp=Nc,s.bq=il,s.br=Pu,s.bs=gg,s.bt=ze,s.bu=Te,s.bv=es,s.bw=function(p,l,A,b,x){return ze(b,x,Et((p-l)/(A-l),0,1))},s.bx=Ie,s.by=function(){return new Float64Array(3)},s.bz=function(p,l,A,b){return p[0]=l[0]+A[0]*b,p[1]=l[1]+A[1]*b,p[2]=l[2]+A[2]*b,p},s.c=ce,s.c$=class{constructor(p){this._marks={start:[p.url,"start"].join("#"),end:[p.url,"end"].join("#"),measure:p.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let p=performance.getEntriesByName(this._marks.measure);return p.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),p=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),p}},s.c0=Nl,s.c1=class extends uu{constructor(p,l){super(p,l),this.current=[0,0,0]}set(p){p[0]===this.current[0]&&p[1]===this.current[1]&&p[2]===this.current[2]||(this.current=p,this.gl.uniform3f(this.location,p[0],p[1],p[2]))}},s.c2=class extends uu{constructor(p,l){super(p,l),this.current=[0,0]}set(p){p[0]===this.current[0]&&p[1]===this.current[1]||(this.current=p,this.gl.uniform2f(this.location,p[0],p[1]))}},s.c3=Z,s.c4=function(p,l){var A=Math.sin(l),b=Math.cos(l);return p[0]=b,p[1]=A,p[2]=0,p[3]=-A,p[4]=b,p[5]=0,p[6]=0,p[7]=0,p[8]=1,p},s.c5=function(p,l,A){var b=l[0],x=l[1],B=l[2];return p[0]=b*A[0]+x*A[3]+B*A[6],p[1]=b*A[1]+x*A[4]+B*A[7],p[2]=b*A[2]+x*A[5]+B*A[8],p},s.c6=function(p,l,A,b,x,B,h){var g=1/(l-A),w=1/(b-x),k=1/(B-h);return p[0]=-2*g,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=-2*w,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=2*k,p[11]=0,p[12]=(l+A)*g,p[13]=(x+b)*w,p[14]=(h+B)*k,p[15]=1,p},s.c7=class extends uu{constructor(p,l){super(p,l),this.current=new Array}set(p){if(p!=this.current){this.current=p;const l=new Float32Array(4*p.length);for(let A=0;A<p.length;A++)l[4*A]=p[A].r,l[4*A+1]=p[A].g,l[4*A+2]=p[A].b,l[4*A+3]=p[A].a;this.gl.uniform4fv(this.location,l)}}},s.c8=class extends uu{constructor(p,l){super(p,l),this.current=new Array}set(p){if(p!=this.current){this.current=p;const l=new Float32Array(p);this.gl.uniform1fv(this.location,l)}}},s.c9=class extends Gh{},s.cA=function(p){return wt[p]||be[p]},s.cB=function(p,l,A){var b=l[0],x=l[1];return p[0]=A[0]*b+A[4]*x+A[12],p[1]=A[1]*b+A[5]*x+A[13],p},s.cC=function(p,l){const{x:A,y:b}=Wf.fromLngLat(l);return!(p<0||p>25||b<0||b>=1||A<0||A>=1)},s.cD=function(p,l){return p[0]=l[0],p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=l[1],p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=l[2],p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p},s.cE=class extends ns{},s.cF=ep,s.cH=function(p){return p.message===re},s.cI=It,s.cJ=function(p,l){Pe.REGISTERED_PROTOCOLS[p]=l},s.cK=function(p){delete Pe.REGISTERED_PROTOCOLS[p]},s.cL=function(p,l){const A={};for(let x=0;x<p.length;x++){const B=l&&l[p[x].id]||Pr(p[x]);l&&(l[p[x].id]=B);let h=A[B];h||(h=A[B]=[]),h.push(p[x])}const b=[];for(const x in A)b.push(A[x]);return b},s.cM=Gn,s.cN=a_,s.cO=Xd,s.cP=V0,s.cQ=function(p){p.bucket.createArrays(),p.bucket.tilePixelRatio=ht/(512*p.bucket.overscaling),p.bucket.compareText={},p.bucket.iconsNeedLinear=!1;const l=p.bucket.layers[0],A=l.layout,b=l._unevaluatedLayout._values,x={layoutIconSize:b["icon-size"].possiblyEvaluate(new ao(p.bucket.zoom+1),p.canonical),layoutTextSize:b["text-size"].possiblyEvaluate(new ao(p.bucket.zoom+1),p.canonical),textMaxSize:b["text-size"].possiblyEvaluate(new ao(18))};if(p.bucket.textSizeData.kind==="composite"){const{minZoom:k,maxZoom:F}=p.bucket.textSizeData;x.compositeTextSizes=[b["text-size"].possiblyEvaluate(new ao(k),p.canonical),b["text-size"].possiblyEvaluate(new ao(F),p.canonical)]}if(p.bucket.iconSizeData.kind==="composite"){const{minZoom:k,maxZoom:F}=p.bucket.iconSizeData;x.compositeIconSizes=[b["icon-size"].possiblyEvaluate(new ao(k),p.canonical),b["icon-size"].possiblyEvaluate(new ao(F),p.canonical)]}const B=A.get("text-line-height")*Pa,h=A.get("text-rotation-alignment")!=="viewport"&&A.get("symbol-placement")!=="point",g=A.get("text-keep-upright"),w=A.get("text-size");for(const k of p.bucket.features){const F=A.get("text-font").evaluate(k,{},p.canonical).join(","),j=w.evaluate(k,{},p.canonical),H=x.layoutTextSize.evaluate(k,{},p.canonical),ne=x.layoutIconSize.evaluate(k,{},p.canonical),ie={horizontal:{},vertical:void 0},Ae=k.text;let de,Me=[0,0];if(Ae){const je=Ae.toString(),ot=A.get("text-letter-spacing").evaluate(k,{},p.canonical)*Pa,nt=rh(je)?ot:0,Mt=A.get("text-anchor").evaluate(k,{},p.canonical),Vt=mt(l,k,p.canonical);if(!Vt){const An=A.get("text-radial-offset").evaluate(k,{},p.canonical);Me=An?Qe(Mt,[An*Pa,Ce]):A.get("text-offset").evaluate(k,{},p.canonical).map((Cn=>Cn*Pa))}let Jt=h?"center":A.get("text-justify").evaluate(k,{},p.canonical);const on=A.get("symbol-placement")==="point"?A.get("text-max-width").evaluate(k,{},p.canonical)*Pa:1/0,kn=()=>{p.bucket.allowVerticalPlacement&&Pd(je)&&(ie.vertical=jf(Ae,p.glyphMap,p.glyphPositions,p.imagePositions,F,on,B,Mt,"left",nt,Me,s.ay.vertical,!0,H,j))};if(!h&&Vt){const An=new Set;if(Jt==="auto")for(let en=0;en<Vt.values.length;en+=2)An.add(Wt(Vt.values[en]));else An.add(Jt);let Cn=!1;for(const en of An)if(!ie.horizontal[en])if(Cn)ie.horizontal[en]=ie.horizontal[0];else{const xi=jf(Ae,p.glyphMap,p.glyphPositions,p.imagePositions,F,on,B,"center",en,nt,Me,s.ay.horizontal,!1,H,j);xi&&(ie.horizontal[en]=xi,Cn=xi.positionedLines.length===1)}kn()}else{Jt==="auto"&&(Jt=Wt(Mt));const An=jf(Ae,p.glyphMap,p.glyphPositions,p.imagePositions,F,on,B,Mt,Jt,nt,Me,s.ay.horizontal,!1,H,j);An&&(ie.horizontal[Jt]=An),kn(),Pd(je)&&h&&g&&(ie.vertical=jf(Ae,p.glyphMap,p.glyphPositions,p.imagePositions,F,on,B,Mt,Jt,nt,Me,s.ay.vertical,!1,H,j))}}let We=!1;if(k.icon&&k.icon.name){const je=p.imageMap[k.icon.name];je&&(de=V2(p.imagePositions[k.icon.name],A.get("icon-offset").evaluate(k,{},p.canonical),A.get("icon-anchor").evaluate(k,{},p.canonical)),We=!!je.sdf,p.bucket.sdfIcons===void 0?p.bucket.sdfIcons=We:p.bucket.sdfIcons!==We&&gt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(je.pixelRatio!==p.bucket.pixelRatio||A.get("icon-rotate").constantOr(1)!==0)&&(p.bucket.iconsNeedLinear=!0))}const Ue=$t(ie.horizontal)||ie.vertical;p.bucket.iconsInText=!!Ue&&Ue.iconsInText,(Ue||de)&&un(p.bucket,k,ie,de,p.imageMap,x,H,ne,Me,We,p.canonical,p.subdivisionGranularity)}p.showCollisionBoxes&&p.bucket.generateCollisionDebugBuffers()},s.cR=N0,s.cS=Yo,s.cT=nm,s.cU=Nv,s.cV=vy,s.cW=Xp,s.cX=function(p,l,A,b,x,B){let h=y_(p,l,A,x,0);return h=y_(h,l,b,B,1),h},s.cY=class{constructor(p){this.maxEntries=p,this.map=new Map}get(p){const l=this.map.get(p);return l!==void 0&&(this.map.delete(p),this.map.set(p,l)),l}set(p,l){if(this.map.has(p))this.map.delete(p);else if(this.map.size>=this.maxEntries){const A=this.map.keys().next().value;this.map.delete(A)}this.map.set(p,l)}clear(){this.map.clear()}},s.cZ=Gv,s.c_=Ry,s.ca=qv,s.cb=class extends Fd{},s.cc=EA,s.cd=function(p){return p<=1?1:Math.pow(2,Math.ceil(Math.log(p)/Math.LN2))},s.ce=Yp,s.cf=function(p,l,A){var b=l[0],x=l[1],B=l[2],h=A[3]*b+A[7]*x+A[11]*B+A[15];return p[0]=(A[0]*b+A[4]*x+A[8]*B+A[12])/(h=h||1),p[1]=(A[1]*b+A[5]*x+A[9]*B+A[13])/h,p[2]=(A[2]*b+A[6]*x+A[10]*B+A[14])/h,p},s.cg=class extends Ud{},s.ch=class extends M{},s.ci=function(p,l){return p[0]===l[0]&&p[1]===l[1]&&p[2]===l[2]&&p[3]===l[3]&&p[4]===l[4]&&p[5]===l[5]&&p[6]===l[6]&&p[7]===l[7]&&p[8]===l[8]&&p[9]===l[9]&&p[10]===l[10]&&p[11]===l[11]&&p[12]===l[12]&&p[13]===l[13]&&p[14]===l[14]&&p[15]===l[15]},s.cj=function(p,l){var A=p[0],b=p[1],x=p[2],B=p[3],h=p[4],g=p[5],w=p[6],k=p[7],F=p[8],j=p[9],H=p[10],ne=p[11],ie=p[12],Ae=p[13],de=p[14],Me=p[15],We=l[0],Ue=l[1],je=l[2],ot=l[3],nt=l[4],Mt=l[5],Vt=l[6],Jt=l[7],on=l[8],kn=l[9],An=l[10],Cn=l[11],en=l[12],xi=l[13],Ei=l[14],Ri=l[15];return Math.abs(A-We)<=V*Math.max(1,Math.abs(A),Math.abs(We))&&Math.abs(b-Ue)<=V*Math.max(1,Math.abs(b),Math.abs(Ue))&&Math.abs(x-je)<=V*Math.max(1,Math.abs(x),Math.abs(je))&&Math.abs(B-ot)<=V*Math.max(1,Math.abs(B),Math.abs(ot))&&Math.abs(h-nt)<=V*Math.max(1,Math.abs(h),Math.abs(nt))&&Math.abs(g-Mt)<=V*Math.max(1,Math.abs(g),Math.abs(Mt))&&Math.abs(w-Vt)<=V*Math.max(1,Math.abs(w),Math.abs(Vt))&&Math.abs(k-Jt)<=V*Math.max(1,Math.abs(k),Math.abs(Jt))&&Math.abs(F-on)<=V*Math.max(1,Math.abs(F),Math.abs(on))&&Math.abs(j-kn)<=V*Math.max(1,Math.abs(j),Math.abs(kn))&&Math.abs(H-An)<=V*Math.max(1,Math.abs(H),Math.abs(An))&&Math.abs(ne-Cn)<=V*Math.max(1,Math.abs(ne),Math.abs(Cn))&&Math.abs(ie-en)<=V*Math.max(1,Math.abs(ie),Math.abs(en))&&Math.abs(Ae-xi)<=V*Math.max(1,Math.abs(Ae),Math.abs(xi))&&Math.abs(de-Ei)<=V*Math.max(1,Math.abs(de),Math.abs(Ei))&&Math.abs(Me-Ri)<=V*Math.max(1,Math.abs(Me),Math.abs(Ri))},s.ck=function(p,l){return p[0]=l[0],p[1]=l[1],p[2]=l[2],p[3]=l[3],p[4]=l[4],p[5]=l[5],p[6]=l[6],p[7]=l[7],p[8]=l[8],p[9]=l[9],p[10]=l[10],p[11]=l[11],p[12]=l[12],p[13]=l[13],p[14]=l[14],p[15]=l[15],p},s.cl=p=>p.type==="symbol",s.cm=p=>p.type==="circle",s.cn=p=>p.type==="heatmap",s.co=p=>p.type==="line",s.cp=p=>p.type==="fill",s.cq=p=>p.type==="fill-extrusion",s.cr=p=>p.type==="hillshade",s.cs=p=>p.type==="color-relief",s.ct=p=>p.type==="background",s.cu=p=>p.type==="custom",s.cv=vt,s.cw=function(p,l,A){const b=ut(l.x-A.x,l.y-A.y),x=ut(p.x-A.x,p.y-A.y);var B,h;return En(Math.atan2(b[0]*x[1]-b[1]*x[0],(B=b)[0]*(h=x)[0]+B[1]*h[1]))},s.cx=st,s.cy=function(p,l){return be[l]&&(p instanceof MouseEvent||p instanceof WheelEvent)},s.cz=function(p,l){return wt[l]&&"touches"in p},s.d=ae,s.d0=function(p,l,A,b,x){return a(this,void 0,void 0,(function*(){if(Q())try{return yield fi(p,l,A,b,x)}catch{}return(function(B,h,g,w,k){const F=B.width,j=B.height;Rn&&Dn||(Rn=new OffscreenCanvas(F,j),Dn=Rn.getContext("2d",{willReadFrequently:!0})),Rn.width=F,Rn.height=j,Dn.drawImage(B,0,0,F,j);const H=Dn.getImageData(h,g,w,k);return Dn.clearRect(0,0,F,j),H.data})(p,l,A,b,x)}))},s.d1=dg,s.d2=f,s.d3=Dh,s.d4=tl,s.e=ke,s.f=p=>a(void 0,void 0,void 0,(function*(){if(p.byteLength===0)return createImageBitmap(new ImageData(1,1));const l=new Blob([new Uint8Array(p)],{type:"image/png"});try{return createImageBitmap(l)}catch(A){throw new Error(`Could not load image because of ${A.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),s.g=tt,s.h=p=>new Promise(((l,A)=>{const b=new Image;b.onload=()=>{l(b),URL.revokeObjectURL(b.src),b.onload=null,window.requestAnimationFrame((()=>{b.src=Ln}))},b.onerror=()=>A(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const x=new Blob([new Uint8Array(p)],{type:"image/png"});b.src=p.byteLength?URL.createObjectURL(x):Ln})),s.i=Tt,s.j=(p,l)=>Xe(ke(p,{type:"json"}),l),s.k=$e,s.l=Ke,s.m=Xe,s.n=(p,l)=>Xe(ke(p,{type:"arrayBuffer"}),l),s.o=function(p){return new vy(p).readFields(Cy,[])},s.p=_y,s.q=function(p){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(p))},s.r=hg,s.s=wn,s.t=Qo,s.u=Re,s.v=gA,s.w=gt,s.x=ba,s.y=Dd,s.z=Kl})),r("worker",["./shared"],(function(s){class a{constructor(ae,he){this.keyCache={},ae&&this.replace(ae,he)}replace(ae,he){this._layerConfigs={},this._layers={},this.update(ae,[],he)}update(ae,he,C){for(const $e of ae){this._layerConfigs[$e.id]=$e;const rt=this._layers[$e.id]=s.bS($e,C);rt._featureFilter=s.aj(rt.filter,C),this.keyCache[$e.id]&&delete this.keyCache[$e.id]}for(const $e of he)delete this.keyCache[$e],delete this._layerConfigs[$e],delete this._layers[$e];this.familiesBySource={};const Ke=s.cL(Object.values(this._layerConfigs),this.keyCache);for(const $e of Ke){const rt=$e.map((sn=>this._layers[sn.id])),Re=rt[0];if(Re.visibility==="none")continue;const at=Re.source||"";let St=this.familiesBySource[at];St||(St=this.familiesBySource[at]={});const Bt=Re.sourceLayer||s.a9;let kt=St[Bt];kt||(kt=St[Bt]=[]),kt.push(rt)}}}class c{constructor(ae){const he={},C=[];for(const Re in ae){const at=ae[Re],St=he[Re]={};for(const Bt in at){const kt=at[+Bt];if(!kt||kt.bitmap.width===0||kt.bitmap.height===0)continue;const sn={x:0,y:0,w:kt.bitmap.width+2,h:kt.bitmap.height+2};C.push(sn),St[Bt]={rect:sn,metrics:kt.metrics}}}const{w:Ke,h:$e}=s.p(C),rt=new s.r({width:Ke||1,height:$e||1});for(const Re in ae){const at=ae[Re];for(const St in at){const Bt=at[+St];if(!Bt||Bt.bitmap.width===0||Bt.bitmap.height===0)continue;const kt=he[Re][St].rect;s.r.copy(Bt.bitmap,rt,{x:0,y:0},{x:kt.x+1,y:kt.y+1},Bt.bitmap)}}this.image=rt,this.positions=he}}s.cM("GlyphAtlas",c);class f{constructor(ae){this.tileID=new s.a1(ae.tileID.overscaledZ,ae.tileID.wrap,ae.tileID.canonical.z,ae.tileID.canonical.x,ae.tileID.canonical.y),this.uid=ae.uid,this.zoom=ae.zoom,this.pixelRatio=ae.pixelRatio,this.tileSize=ae.tileSize,this.source=ae.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ae.showCollisionBoxes,this.collectResourceTiming=!!ae.collectResourceTiming,this.returnDependencies=!!ae.returnDependencies,this.promoteId=ae.promoteId,this.inFlightDependencies=[]}parse(ae,he,C,Ke,$e){return s._(this,void 0,void 0,(function*(){this.status="parsing",this.data=ae,this.collisionBoxArray=new s.ah;const rt=new s.cN(Object.keys(ae.layers).sort()),Re=new s.cO(this.tileID,this.promoteId);Re.bucketLayerIDs=[];const at={},St={featureIndex:Re,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:C,subdivisionGranularity:$e},Bt=he.familiesBySource[this.source];for(const Kn in Bt){const ii=ae.layers[Kn];if(!ii)continue;ii.version===1&&s.w(`Vector tile source "${this.source}" layer "${Kn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const nr=rt.encode(Kn),Su=[];for(let Ms=0;Ms<ii.length;Ms++){const Si=ii.feature(Ms),Ba=Re.getId(Si,Kn);Su.push({feature:Si,id:Ba,index:Ms,sourceLayerIndex:nr})}for(const Ms of Bt[Kn]){const Si=Ms[0];Si.source!==this.source&&s.w(`layer.source = ${Si.source} does not equal this.source = ${this.source}`),Si.isHidden(this.zoom,!0)||(y(Ms,this.zoom,C),(at[Si.id]=Si.createBucket({index:Re.bucketLayerIDs.length,layers:Ms,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:nr,sourceID:this.source})).populate(Su,St,this.tileID.canonical),Re.bucketLayerIDs.push(Ms.map((Ba=>Ba.id))))}}const kt=s.bX(St.glyphDependencies,(Kn=>Object.keys(Kn).map(Number)));this.inFlightDependencies.forEach((Kn=>Kn?.abort())),this.inFlightDependencies=[];let sn=Promise.resolve({});if(Object.keys(kt).length){const Kn=new AbortController;this.inFlightDependencies.push(Kn),sn=Ke.sendAsync({type:"GG",data:{stacks:kt,source:this.source,tileID:this.tileID,type:"glyphs"}},Kn)}const Tn=Object.keys(St.iconDependencies);let Yn=Promise.resolve({});if(Tn.length){const Kn=new AbortController;this.inFlightDependencies.push(Kn),Yn=Ke.sendAsync({type:"GI",data:{icons:Tn,source:this.source,tileID:this.tileID,type:"icons"}},Kn)}const vi=Object.keys(St.patternDependencies);let ui=Promise.resolve({});if(vi.length){const Kn=new AbortController;this.inFlightDependencies.push(Kn),ui=Ke.sendAsync({type:"GI",data:{icons:vi,source:this.source,tileID:this.tileID,type:"patterns"}},Kn)}const Zn=St.dashDependencies;let Mi=Promise.resolve({});if(Object.keys(Zn).length){const Kn=new AbortController;this.inFlightDependencies.push(Kn),Mi=Ke.sendAsync({type:"GDA",data:{dashes:Zn}},Kn)}const[nn,$i,bi,to]=yield Promise.all([sn,Yn,ui,Mi]),tr=new c(nn),an=new s.cP($i,bi);for(const Kn in at){const ii=at[Kn];ii instanceof s.ai?(y(ii.layers,this.zoom,C),s.cQ({bucket:ii,glyphMap:nn,glyphPositions:tr.positions,imageMap:$i,imagePositions:an.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:St.subdivisionGranularity})):ii.hasDependencies&&(ii instanceof s.cR||ii instanceof s.cS||ii instanceof s.cT)&&(y(ii.layers,this.zoom,C),ii.addFeatures(St,this.tileID.canonical,an.patternPositions,to))}return this.status="done",{buckets:Object.values(at).filter((Kn=>!Kn.isEmpty())),featureIndex:Re,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:tr.image,imageAtlas:an,dashPositions:to,glyphMap:this.returnDependencies?nn:null,iconMap:this.returnDependencies?$i:null,glyphPositions:this.returnDependencies?tr.positions:null}}))}}function y(Xe,ae,he){const C=new s.H(ae);for(const Ke of Xe)Ke.recalculate(C,he)}class _ extends s.cW{constructor(ae,he){super(new s.cV,0,he,[],[]),this.feature=ae,this.type=ae.type,this.properties=ae.tags?ae.tags:{},"id"in ae&&(typeof ae.id=="string"?this.id=parseInt(ae.id,10):typeof ae.id!="number"||isNaN(ae.id)||(this.id=ae.id))}loadGeometry(){const ae=[],he=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const C of he){const Ke=[];for(const $e of C)Ke.push(new s.P($e[0],$e[1]));ae.push(Ke)}return ae}}class E extends s.cU{constructor(ae,he){super(new s.cV),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=he?he.version:1,this.extent=he?he.extent:4096,this.length=ae.length,this.features=ae}feature(ae){return new _(this.features[ae],this.extent)}}function I(Xe,ae){ae.writeVarintField(15,Xe.version||1),ae.writeStringField(1,Xe.name||""),ae.writeVarintField(5,Xe.extent||4096);const he={keys:[],values:[],keycache:{},valuecache:{}};for(let $e=0;$e<Xe.length;$e++)he.feature=Xe.feature($e),ae.writeMessage(2,P,he);const C=he.keys;for(const $e of C)ae.writeStringField(3,$e);const Ke=he.values;for(const $e of Ke)ae.writeMessage(4,$,$e)}function P(Xe,ae){if(!Xe.feature)return;const he=Xe.feature;he.id!==void 0&&ae.writeVarintField(1,he.id),ae.writeMessage(2,K,Xe),ae.writeVarintField(3,he.type),ae.writeMessage(4,V,he)}function K(Xe,ae){for(const he in Xe.feature?.properties){let C=Xe.feature.properties[he],Ke=Xe.keycache[he];if(C===null)continue;Ke===void 0&&(Xe.keys.push(he),Ke=Xe.keys.length-1,Xe.keycache[he]=Ke),ae.writeVarint(Ke),typeof C!="string"&&typeof C!="boolean"&&typeof C!="number"&&(C=JSON.stringify(C));const $e=typeof C+":"+C;let rt=Xe.valuecache[$e];rt===void 0&&(Xe.values.push(C),rt=Xe.values.length-1,Xe.valuecache[$e]=rt),ae.writeVarint(rt)}}function z(Xe,ae){return(ae<<3)+(7&Xe)}function Q(Xe){return Xe<<1^Xe>>31}function V(Xe,ae){const he=Xe.loadGeometry(),C=Xe.type;let Ke=0,$e=0;for(const rt of he){let Re=1;C===1&&(Re=rt.length),ae.writeVarint(z(1,Re));const at=C===3?rt.length-1:rt.length;for(let St=0;St<at;St++){St===1&&C!==1&&ae.writeVarint(z(2,at-1));const Bt=rt[St].x-Ke,kt=rt[St].y-$e;ae.writeVarint(Q(Bt)),ae.writeVarint(Q(kt)),Ke+=Bt,$e+=kt}Xe.type===3&&ae.writeVarint(z(7,1))}}function $(Xe,ae){const he=typeof Xe;he==="string"?ae.writeStringField(1,Xe):he==="boolean"?ae.writeBooleanField(7,Xe):he==="number"&&(Xe%1!=0?ae.writeDoubleField(3,Xe):Xe<0?ae.writeSVarintField(6,Xe):ae.writeVarintField(5,Xe))}class Z extends s.cW{constructor(ae,he,C,Ke,$e){super(new s.cV,0,$e,[],[]),this.type=ae,this.properties=C||{},this.extent=$e,this.pointsArray=he,this.id=Ke}loadGeometry(){return this.pointsArray.map((ae=>ae.map((he=>new s.P(he.x,he.y)))))}}class ee extends s.cU{constructor(ae,he,C){super(new s.cV),this.version=2,this._myFeatures=ae,this.name=he,this.length=ae.length,this.extent=C}feature(ae){return this._myFeatures[ae]}}class X{constructor(){this.layers={}}addLayer(ae){this.layers[ae.name]=ae}}function W(Xe){let ae=(function(he){const C=new s.cV;return(function(Ke,$e){for(const rt in Ke.layers)$e.writeMessage(3,I,Ke.layers[rt])})(he,C),C.finish()})(Xe);return ae.byteOffset===0&&ae.byteLength===ae.buffer.byteLength||(ae=new Uint8Array(ae)),{vectorTile:Xe,rawData:ae.buffer}}function se(Xe,ae,he){const{extent:C}=Xe,Ke=Math.pow(2,he.z-ae.z),$e=(he.x-ae.x*Ke)*C,rt=(he.y-ae.y*Ke)*C,Re=[];for(let at=0;at<Xe.length;at++){const St=Xe.feature(at);let Bt=St.loadGeometry();for(const sn of Bt)for(const Tn of sn)Tn.x=Tn.x*Ke-$e,Tn.y=Tn.y*Ke-rt;const kt=128;Bt=s.cX(Bt,St.type,-kt,-kt,C+kt,C+kt),Bt.length!==0&&Re.push(new Z(St.type,Bt,St.properties,St.id,C))}return new ee(Re,Xe.name,C)}class ue{constructor(ae,he,C){this.actor=ae,this.layerIndex=he,this.availableImages=C,this.fetching={},this.loading={},this.loaded={},this.overzoomedTileResultCache=new s.cY(1e3)}loadVectorTile(ae,he){return s._(this,void 0,void 0,(function*(){const C=yield s.n(ae.request,he);try{return{vectorTile:ae.encoding!=="mlt"?new s.cZ(new s.cV(C.data)):new s.c_(C.data),rawData:C.data,cacheControl:C.cacheControl,expires:C.expires}}catch(Ke){const $e=new Uint8Array(C.data);let rt=`Unable to parse the tile at ${ae.request.url}, `;throw rt+=$e[0]===31&&$e[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ke.message}`,new Error(rt)}}))}loadTile(ae){return s._(this,void 0,void 0,(function*(){const{uid:he,overzoomParameters:C}=ae;C&&(ae.request=C.overzoomRequest);const Ke=!!(ae&&ae.request&&ae.request.collectResourceTiming)&&new s.c$(ae.request),$e=new f(ae);this.loading[he]=$e;const rt=new AbortController;$e.abort=rt;try{const Re=yield this.loadVectorTile(ae,rt);if(delete this.loading[he],!Re)return null;if(C){const sn=this._getOverzoomTile(ae,Re.vectorTile);Re.rawData=sn.rawData,Re.vectorTile=sn.vectorTile}const at=Re.rawData,St={};Re.expires&&(St.expires=Re.expires),Re.cacheControl&&(St.cacheControl=Re.cacheControl);const Bt={};if(Ke){const sn=Ke.finish();sn&&(Bt.resourceTiming=JSON.parse(JSON.stringify(sn)))}$e.vectorTile=Re.vectorTile;const kt=$e.parse(Re.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity);this.loaded[he]=$e,this.fetching[he]={rawTileData:at,cacheControl:St,resourceTiming:Bt};try{const sn=yield kt;return s.e({rawTileData:at.slice(0),encoding:ae.encoding},sn,St,Bt)}finally{delete this.fetching[he]}}catch(Re){throw delete this.loading[he],$e.status="done",this.loaded[he]=$e,Re}}))}_getOverzoomTile(ae,he){const{tileID:C,source:Ke,overzoomParameters:$e}=ae,{maxZoomTileID:rt}=$e,Re=`${rt.key}_${C.key}`,at=this.overzoomedTileResultCache.get(Re);if(at)return at;const St=new X,Bt=this.layerIndex.familiesBySource[Ke];for(const sn in Bt){const Tn=he.layers[sn];if(!Tn)continue;const Yn=se(Tn,rt,C.canonical);Yn.length>0&&St.addLayer(Yn)}const kt=W(St);return this.overzoomedTileResultCache.set(Re,kt),kt}reloadTile(ae){return s._(this,void 0,void 0,(function*(){const he=ae.uid;if(!this.loaded||!this.loaded[he])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const C=this.loaded[he];if(C.showCollisionBoxes=ae.showCollisionBoxes,C.status==="parsing"){const Ke=yield C.parse(C.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity);let $e;if(this.fetching[he]){const{rawTileData:rt,cacheControl:Re,resourceTiming:at}=this.fetching[he];delete this.fetching[he],$e=s.e({rawTileData:rt.slice(0),encoding:ae.encoding},Ke,Re,at)}else $e=Ke;return $e}if(C.status==="done"&&C.vectorTile)return C.parse(C.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity)}))}abortTile(ae){return s._(this,void 0,void 0,(function*(){const he=this.loading,C=ae.uid;he&&he[C]&&he[C].abort&&(he[C].abort.abort(),delete he[C])}))}removeTile(ae){return s._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[ae.uid]&&delete this.loaded[ae.uid]}))}}class ve{constructor(){this.loaded={}}loadTile(ae){return s._(this,void 0,void 0,(function*(){const{uid:he,encoding:C,rawImageData:Ke,redFactor:$e,greenFactor:rt,blueFactor:Re,baseShift:at}=ae,St=Ke.width+2,Bt=Ke.height+2,kt=s.b(Ke)?new s.R({width:St,height:Bt},yield s.d0(Ke,-1,-1,St,Bt)):Ke,sn=new s.d1(he,kt,C,$e,rt,Re,at);return this.loaded=this.loaded||{},this.loaded[he]=sn,sn}))}removeTile(ae){const he=this.loaded,C=ae.uid;he&&he[C]&&delete he[C]}}var ye,Ee,_e=(function(){if(Ee)return ye;function Xe(he,C){if(he.length!==0){ae(he[0],C);for(var Ke=1;Ke<he.length;Ke++)ae(he[Ke],!C)}}function ae(he,C){for(var Ke=0,$e=0,rt=0,Re=he.length,at=Re-1;rt<Re;at=rt++){var St=(he[rt][0]-he[at][0])*(he[at][1]+he[rt][1]),Bt=Ke+St;$e+=Math.abs(Ke)>=Math.abs(St)?Ke-Bt+St:St-Bt+Ke,Ke=Bt}Ke+$e>=0!=!!C&&he.reverse()}return Ee=1,ye=function he(C,Ke){var $e,rt=C&&C.type;if(rt==="FeatureCollection")for($e=0;$e<C.features.length;$e++)he(C.features[$e],Ke);else if(rt==="GeometryCollection")for($e=0;$e<C.geometries.length;$e++)he(C.geometries[$e],Ke);else if(rt==="Feature")he(C.geometry,Ke);else if(rt==="Polygon")Xe(C.coordinates,Ke);else if(rt==="MultiPolygon")for($e=0;$e<C.coordinates.length;$e++)Xe(C.coordinates[$e],Ke);return C}})(),Be=s.d2(_e);const Fe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Xe=>Xe},Se=Math.fround||(qe=new Float32Array(1),Xe=>(qe[0]=+Xe,qe[0]));var qe;class ut{constructor(ae){this.options=Object.assign(Object.create(Fe),ae),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ae){const{log:he,minZoom:C,maxZoom:Ke}=this.options;he&&console.time("total time");const $e=`prepare ${ae.length} points`;he&&console.time($e),this.points=ae;const rt=[];for(let at=0;at<ae.length;at++){const St=ae[at];if(!St.geometry)continue;const[Bt,kt]=St.geometry.coordinates,sn=Se(Ie(Bt)),Tn=Se(ze(kt));rt.push(sn,Tn,1/0,at,-1,1),this.options.reduce&&rt.push(0)}let Re=this.trees[Ke+1]=this._createTree(rt);he&&console.timeEnd($e);for(let at=Ke;at>=C;at--){const St=+Date.now();Re=this.trees[at]=this._createTree(this._cluster(Re,at)),he&&console.log("z%d: %d clusters in %dms",at,Re.numItems,+Date.now()-St)}return he&&console.timeEnd("total time"),this}getClusters(ae,he){let C=((ae[0]+180)%360+360)%360-180;const Ke=Math.max(-90,Math.min(90,ae[1]));let $e=ae[2]===180?180:((ae[2]+180)%360+360)%360-180;const rt=Math.max(-90,Math.min(90,ae[3]));if(ae[2]-ae[0]>=360)C=-180,$e=180;else if(C>$e){const kt=this.getClusters([C,Ke,180,rt],he),sn=this.getClusters([-180,Ke,$e,rt],he);return kt.concat(sn)}const Re=this.trees[this._limitZoom(he)],at=Re.range(Ie(C),ze(rt),Ie($e),ze(Ke)),St=Re.data,Bt=[];for(const kt of at){const sn=this.stride*kt;Bt.push(St[sn+5]>1?ht(St,sn,this.clusterProps):this.points[St[sn+3]])}return Bt}getChildren(ae){const he=this._getOriginId(ae),C=this._getOriginZoom(ae),Ke="No cluster with the specified id.",$e=this.trees[C];if(!$e)throw new Error(Ke);const rt=$e.data;if(he*this.stride>=rt.length)throw new Error(Ke);const Re=this.options.radius/(this.options.extent*Math.pow(2,C-1)),at=$e.within(rt[he*this.stride],rt[he*this.stride+1],Re),St=[];for(const Bt of at){const kt=Bt*this.stride;rt[kt+4]===ae&&St.push(rt[kt+5]>1?ht(rt,kt,this.clusterProps):this.points[rt[kt+3]])}if(St.length===0)throw new Error(Ke);return St}getLeaves(ae,he,C){const Ke=[];return this._appendLeaves(Ke,ae,he=he||10,C=C||0,0),Ke}getTile(ae,he,C){const Ke=this.trees[this._limitZoom(ae)],$e=Math.pow(2,ae),{extent:rt,radius:Re}=this.options,at=Re/rt,St=(C-at)/$e,Bt=(C+1+at)/$e,kt={features:[]};return this._addTileFeatures(Ke.range((he-at)/$e,St,(he+1+at)/$e,Bt),Ke.data,he,C,$e,kt),he===0&&this._addTileFeatures(Ke.range(1-at/$e,St,1,Bt),Ke.data,$e,C,$e,kt),he===$e-1&&this._addTileFeatures(Ke.range(0,St,at/$e,Bt),Ke.data,-1,C,$e,kt),kt.features.length?kt:null}getClusterExpansionZoom(ae){let he=this._getOriginZoom(ae)-1;for(;he<=this.options.maxZoom;){const C=this.getChildren(ae);if(he++,C.length!==1)break;ae=C[0].properties.cluster_id}return he}_appendLeaves(ae,he,C,Ke,$e){const rt=this.getChildren(he);for(const Re of rt){const at=Re.properties;if(at&&at.cluster?$e+at.point_count<=Ke?$e+=at.point_count:$e=this._appendLeaves(ae,at.cluster_id,C,Ke,$e):$e<Ke?$e++:ae.push(Re),ae.length===C)break}return $e}_createTree(ae){const he=new s.aS(ae.length/this.stride|0,this.options.nodeSize,Float32Array);for(let C=0;C<ae.length;C+=this.stride)he.add(ae[C],ae[C+1]);return he.finish(),he.data=ae,he}_addTileFeatures(ae,he,C,Ke,$e,rt){for(const Re of ae){const at=Re*this.stride,St=he[at+5]>1;let Bt,kt,sn;if(St)Bt=De(he,at,this.clusterProps),kt=he[at],sn=he[at+1];else{const vi=this.points[he[at+3]];Bt=vi.properties;const[ui,Zn]=vi.geometry.coordinates;kt=Ie(ui),sn=ze(Zn)}const Tn={type:1,geometry:[[Math.round(this.options.extent*(kt*$e-C)),Math.round(this.options.extent*(sn*$e-Ke))]],tags:Bt};let Yn;Yn=St||this.options.generateId?he[at+3]:this.points[he[at+3]].id,Yn!==void 0&&(Tn.id=Yn),rt.features.push(Tn)}}_limitZoom(ae){return Math.max(this.options.minZoom,Math.min(Math.floor(+ae),this.options.maxZoom+1))}_cluster(ae,he){const{radius:C,extent:Ke,reduce:$e,minPoints:rt}=this.options,Re=C/(Ke*Math.pow(2,he)),at=ae.data,St=[],Bt=this.stride;for(let kt=0;kt<at.length;kt+=Bt){if(at[kt+2]<=he)continue;at[kt+2]=he;const sn=at[kt],Tn=at[kt+1],Yn=ae.within(at[kt],at[kt+1],Re),vi=at[kt+5];let ui=vi;for(const Zn of Yn){const Mi=Zn*Bt;at[Mi+2]>he&&(ui+=at[Mi+5])}if(ui>vi&&ui>=rt){let Zn,Mi=sn*vi,nn=Tn*vi,$i=-1;const bi=(kt/Bt<<5)+(he+1)+this.points.length;for(const to of Yn){const tr=to*Bt;if(at[tr+2]<=he)continue;at[tr+2]=he;const an=at[tr+5];Mi+=at[tr]*an,nn+=at[tr+1]*an,at[tr+4]=bi,$e&&(Zn||(Zn=this._map(at,kt,!0),$i=this.clusterProps.length,this.clusterProps.push(Zn)),$e(Zn,this._map(at,tr)))}at[kt+4]=bi,St.push(Mi/ui,nn/ui,1/0,bi,-1,ui),$e&&St.push($i)}else{for(let Zn=0;Zn<Bt;Zn++)St.push(at[kt+Zn]);if(ui>1)for(const Zn of Yn){const Mi=Zn*Bt;if(!(at[Mi+2]<=he)){at[Mi+2]=he;for(let nn=0;nn<Bt;nn++)St.push(at[Mi+nn])}}}}return St}_getOriginId(ae){return ae-this.points.length>>5}_getOriginZoom(ae){return(ae-this.points.length)%32}_map(ae,he,C){if(ae[he+5]>1){const rt=this.clusterProps[ae[he+6]];return C?Object.assign({},rt):rt}const Ke=this.points[ae[he+3]].properties,$e=this.options.map(Ke);return C&&$e===Ke?Object.assign({},$e):$e}}function ht(Xe,ae,he){return{type:"Feature",id:Xe[ae+3],properties:De(Xe,ae,he),geometry:{type:"Point",coordinates:[(C=Xe[ae],360*(C-.5)),Te(Xe[ae+1])]}};var C}function De(Xe,ae,he){const C=Xe[ae+5],Ke=C>=1e4?`${Math.round(C/1e3)}k`:C>=1e3?Math.round(C/100)/10+"k":C,$e=Xe[ae+6],rt=$e===-1?{}:Object.assign({},he[$e]);return Object.assign(rt,{cluster:!0,cluster_id:Xe[ae+3],point_count:C,point_count_abbreviated:Ke})}function Ie(Xe){return Xe/360+.5}function ze(Xe){const ae=Math.sin(Xe*Math.PI/180),he=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return he<0?0:he>1?1:he}function Te(Xe){const ae=(180-360*Xe)*Math.PI/180;return 360*Math.atan(Math.exp(ae))/Math.PI-90}function vt(Xe,ae,he,C){let Ke=C;const $e=ae+(he-ae>>1);let rt,Re=he-ae;const at=Xe[ae],St=Xe[ae+1],Bt=Xe[he],kt=Xe[he+1];for(let sn=ae+3;sn<he;sn+=3){const Tn=st(Xe[sn],Xe[sn+1],at,St,Bt,kt);if(Tn>Ke)rt=sn,Ke=Tn;else if(Tn===Ke){const Yn=Math.abs(sn-$e);Yn<Re&&(rt=sn,Re=Yn)}}Ke>C&&(rt-ae>3&&vt(Xe,ae,rt,C),Xe[rt+2]=Ke,he-rt>3&&vt(Xe,rt,he,C))}function st(Xe,ae,he,C,Ke,$e){let rt=Ke-he,Re=$e-C;if(rt!==0||Re!==0){const at=((Xe-he)*rt+(ae-C)*Re)/(rt*rt+Re*Re);at>1?(he=Ke,C=$e):at>0&&(he+=rt*at,C+=Re*at)}return rt=Xe-he,Re=ae-C,rt*rt+Re*Re}function Et(Xe,ae,he,C){const Ke={id:Xe??null,type:ae,geometry:he,tags:C,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ae==="Point"||ae==="MultiPoint"||ae==="LineString")Pt(Ke,he);else if(ae==="Polygon")Pt(Ke,he[0]);else if(ae==="MultiLineString")for(const $e of he)Pt(Ke,$e);else if(ae==="MultiPolygon")for(const $e of he)Pt(Ke,$e[0]);return Ke}function Pt(Xe,ae){for(let he=0;he<ae.length;he+=3)Xe.minX=Math.min(Xe.minX,ae[he]),Xe.minY=Math.min(Xe.minY,ae[he+1]),Xe.maxX=Math.max(Xe.maxX,ae[he]),Xe.maxY=Math.max(Xe.maxY,ae[he+1])}function ke(Xe,ae,he,C){if(!ae.geometry)return;const Ke=ae.geometry.coordinates;if(Ke&&Ke.length===0)return;const $e=ae.geometry.type,rt=Math.pow(he.tolerance/((1<<he.maxZoom)*he.extent),2);let Re=[],at=ae.id;if(he.promoteId?at=ae.properties[he.promoteId]:he.generateId&&(at=C||0),$e==="Point")Oe(Ke,Re);else if($e==="MultiPoint")for(const St of Ke)Oe(St,Re);else if($e==="LineString")we(Ke,Re,rt,!1);else if($e==="MultiLineString"){if(he.lineMetrics){for(const St of Ke)Re=[],we(St,Re,rt,!1),Xe.push(Et(at,"LineString",Re,ae.properties));return}Ye(Ke,Re,rt,!1)}else if($e==="Polygon")Ye(Ke,Re,rt,!0);else{if($e!=="MultiPolygon"){if($e==="GeometryCollection"){for(const St of ae.geometry.geometries)ke(Xe,{id:at,geometry:St,properties:ae.properties},he,C);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const St of Ke){const Bt=[];Ye(St,Bt,rt,!0),Re.push(Bt)}}Xe.push(Et(at,$e,Re,ae.properties))}function Oe(Xe,ae){ae.push(ft(Xe[0]),dt(Xe[1]),0)}function we(Xe,ae,he,C){let Ke,$e,rt=0;for(let at=0;at<Xe.length;at++){const St=ft(Xe[at][0]),Bt=dt(Xe[at][1]);ae.push(St,Bt,0),at>0&&(rt+=C?(Ke*Bt-St*$e)/2:Math.sqrt(Math.pow(St-Ke,2)+Math.pow(Bt-$e,2))),Ke=St,$e=Bt}const Re=ae.length-3;ae[2]=1,vt(ae,0,Re,he),ae[Re+2]=1,ae.size=Math.abs(rt),ae.start=0,ae.end=ae.size}function Ye(Xe,ae,he,C){for(let Ke=0;Ke<Xe.length;Ke++){const $e=[];we(Xe[Ke],$e,he,C),ae.push($e)}}function ft(Xe){return Xe/360+.5}function dt(Xe){const ae=Math.sin(Xe*Math.PI/180),he=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return he<0?0:he>1?1:he}function gt(Xe,ae,he,C,Ke,$e,rt,Re){if(C/=ae,$e>=(he/=ae)&&rt<C)return Xe;if(rt<he||$e>=C)return null;const at=[];for(const St of Xe){const Bt=St.geometry;let kt=St.type;const sn=Ke===0?St.minX:St.minY,Tn=Ke===0?St.maxX:St.maxY;if(sn>=he&&Tn<C){at.push(St);continue}if(Tn<he||sn>=C)continue;let Yn=[];if(kt==="Point"||kt==="MultiPoint")Lt(Bt,Yn,he,C,Ke);else if(kt==="LineString")Tt(Bt,Yn,he,C,Ke,!1,Re.lineMetrics);else if(kt==="MultiLineString")Fn(Bt,Yn,he,C,Ke,!1);else if(kt==="Polygon")Fn(Bt,Yn,he,C,Ke,!0);else if(kt==="MultiPolygon")for(const vi of Bt){const ui=[];Fn(vi,ui,he,C,Ke,!0),ui.length&&Yn.push(ui)}if(Yn.length){if(Re.lineMetrics&&kt==="LineString"){for(const vi of Yn)at.push(Et(St.id,kt,vi,St.tags));continue}kt!=="LineString"&&kt!=="MultiLineString"||(Yn.length===1?(kt="LineString",Yn=Yn[0]):kt="MultiLineString"),kt!=="Point"&&kt!=="MultiPoint"||(kt=Yn.length===3?"Point":"MultiPoint"),at.push(Et(St.id,kt,Yn,St.tags))}}return at.length?at:null}function Lt(Xe,ae,he,C,Ke){for(let $e=0;$e<Xe.length;$e+=3){const rt=Xe[$e+Ke];rt>=he&&rt<=C&&Ln(ae,Xe[$e],Xe[$e+1],Xe[$e+2])}}function Tt(Xe,ae,he,C,Ke,$e,rt){let Re=Zt(Xe);const at=Ke===0?fi:Rn;let St,Bt,kt=Xe.start;for(let ui=0;ui<Xe.length-3;ui+=3){const Zn=Xe[ui],Mi=Xe[ui+1],nn=Xe[ui+2],$i=Xe[ui+3],bi=Xe[ui+4],to=Ke===0?Zn:Mi,tr=Ke===0?$i:bi;let an=!1;rt&&(St=Math.sqrt(Math.pow(Zn-$i,2)+Math.pow(Mi-bi,2))),to<he?tr>he&&(Bt=at(Re,Zn,Mi,$i,bi,he),rt&&(Re.start=kt+St*Bt)):to>C?tr<C&&(Bt=at(Re,Zn,Mi,$i,bi,C),rt&&(Re.start=kt+St*Bt)):Ln(Re,Zn,Mi,nn),tr<he&&to>=he&&(Bt=at(Re,Zn,Mi,$i,bi,he),an=!0),tr>C&&to<=C&&(Bt=at(Re,Zn,Mi,$i,bi,C),an=!0),!$e&&an&&(rt&&(Re.end=kt+St*Bt),ae.push(Re),Re=Zt(Xe)),rt&&(kt+=St)}let sn=Xe.length-3;const Tn=Xe[sn],Yn=Xe[sn+1],vi=Ke===0?Tn:Yn;vi>=he&&vi<=C&&Ln(Re,Tn,Yn,Xe[sn+2]),sn=Re.length-3,$e&&sn>=3&&(Re[sn]!==Re[0]||Re[sn+1]!==Re[1])&&Ln(Re,Re[0],Re[1],Re[2]),Re.length&&ae.push(Re)}function Zt(Xe){const ae=[];return ae.size=Xe.size,ae.start=Xe.start,ae.end=Xe.end,ae}function Fn(Xe,ae,he,C,Ke,$e){for(const rt of Xe)Tt(rt,ae,he,C,Ke,$e,!1)}function Ln(Xe,ae,he,C){Xe.push(ae,he,C)}function fi(Xe,ae,he,C,Ke,$e){const rt=($e-ae)/(C-ae);return Ln(Xe,$e,he+(Ke-he)*rt,1),rt}function Rn(Xe,ae,he,C,Ke,$e){const rt=($e-he)/(Ke-he);return Ln(Xe,ae+(C-ae)*rt,$e,1),rt}function Dn(Xe,ae){const he=[];for(let C=0;C<Xe.length;C++){const Ke=Xe[C],$e=Ke.type;let rt;if($e==="Point"||$e==="MultiPoint"||$e==="LineString")rt=wn(Ke.geometry,ae);else if($e==="MultiLineString"||$e==="Polygon"){rt=[];for(const Re of Ke.geometry)rt.push(wn(Re,ae))}else if($e==="MultiPolygon"){rt=[];for(const Re of Ke.geometry){const at=[];for(const St of Re)at.push(wn(St,ae));rt.push(at)}}he.push(Et(Ke.id,$e,rt,Ke.tags))}return he}function wn(Xe,ae){const he=[];he.size=Xe.size,Xe.start!==void 0&&(he.start=Xe.start,he.end=Xe.end);for(let C=0;C<Xe.length;C+=3)he.push(Xe[C]+ae,Xe[C+1],Xe[C+2]);return he}function qn(Xe,ae){if(Xe.transformed)return Xe;const he=1<<Xe.z,C=Xe.x,Ke=Xe.y;for(const $e of Xe.features){const rt=$e.geometry,Re=$e.type;if($e.geometry=[],Re===1)for(let at=0;at<rt.length;at+=2)$e.geometry.push(En(rt[at],rt[at+1],ae,he,C,Ke));else for(let at=0;at<rt.length;at++){const St=[];for(let Bt=0;Bt<rt[at].length;Bt+=2)St.push(En(rt[at][Bt],rt[at][Bt+1],ae,he,C,Ke));$e.geometry.push(St)}}return Xe.transformed=!0,Xe}function En(Xe,ae,he,C,Ke,$e){return[Math.round(he*(Xe*C-Ke)),Math.round(he*(ae*C-$e))]}function wt(Xe,ae,he,C,Ke){const $e=ae===Ke.maxZoom?0:Ke.tolerance/((1<<ae)*Ke.extent),rt={features:[],numPoints:0,numSimplified:0,numFeatures:Xe.length,source:null,x:he,y:C,z:ae,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Re of Xe)be(rt,Re,$e,Ke);return rt}function be(Xe,ae,he,C){const Ke=ae.geometry,$e=ae.type,rt=[];if(Xe.minX=Math.min(Xe.minX,ae.minX),Xe.minY=Math.min(Xe.minY,ae.minY),Xe.maxX=Math.max(Xe.maxX,ae.maxX),Xe.maxY=Math.max(Xe.maxY,ae.maxY),$e==="Point"||$e==="MultiPoint")for(let Re=0;Re<Ke.length;Re+=3)rt.push(Ke[Re],Ke[Re+1]),Xe.numPoints++,Xe.numSimplified++;else if($e==="LineString")re(rt,Ke,Xe,he,!1,!1);else if($e==="MultiLineString"||$e==="Polygon")for(let Re=0;Re<Ke.length;Re++)re(rt,Ke[Re],Xe,he,$e==="Polygon",Re===0);else if($e==="MultiPolygon")for(let Re=0;Re<Ke.length;Re++){const at=Ke[Re];for(let St=0;St<at.length;St++)re(rt,at[St],Xe,he,!0,St===0)}if(rt.length){let Re=ae.tags||null;if($e==="LineString"&&C.lineMetrics){Re={};for(const St in ae.tags)Re[St]=ae.tags[St];Re.mapbox_clip_start=Ke.start/Ke.size,Re.mapbox_clip_end=Ke.end/Ke.size}const at={geometry:rt,type:$e==="Polygon"||$e==="MultiPolygon"?3:$e==="LineString"||$e==="MultiLineString"?2:1,tags:Re};ae.id!==null&&(at.id=ae.id),Xe.features.push(at)}}function re(Xe,ae,he,C,Ke,$e){const rt=C*C;if(C>0&&ae.size<(Ke?rt:C))return void(he.numPoints+=ae.length/3);const Re=[];for(let at=0;at<ae.length;at+=3)(C===0||ae[at+2]>rt)&&(he.numSimplified++,Re.push(ae[at],ae[at+1])),he.numPoints++;Ke&&(function(at,St){let Bt=0;for(let kt=0,sn=at.length,Tn=sn-2;kt<sn;Tn=kt,kt+=2)Bt+=(at[kt]-at[Tn])*(at[kt+1]+at[Tn+1]);if(Bt>0===St)for(let kt=0,sn=at.length;kt<sn/2;kt+=2){const Tn=at[kt],Yn=at[kt+1];at[kt]=at[sn-2-kt],at[kt+1]=at[sn-1-kt],at[sn-2-kt]=Tn,at[sn-1-kt]=Yn}})(Re,$e),Xe.push(Re)}const ce={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Pe{constructor(ae,he){const C=(he=this.options=(function($e,rt){for(const Re in rt)$e[Re]=rt[Re];return $e})(Object.create(ce),he)).debug;if(C&&console.time("preprocess data"),he.maxZoom<0||he.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(he.promoteId&&he.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ke=(function($e,rt){const Re=[];if($e.type==="FeatureCollection")for(let at=0;at<$e.features.length;at++)ke(Re,$e.features[at],rt,at);else ke(Re,$e.type==="Feature"?$e:{geometry:$e},rt);return Re})(ae,he);this.tiles={},this.tileCoords=[],C&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",he.indexMaxZoom,he.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ke=(function($e,rt){const Re=rt.buffer/rt.extent;let at=$e;const St=gt($e,1,-1-Re,Re,0,-1,2,rt),Bt=gt($e,1,1-Re,2+Re,0,-1,2,rt);return(St||Bt)&&(at=gt($e,1,-Re,1+Re,0,-1,2,rt)||[],St&&(at=Dn(St,1).concat(at)),Bt&&(at=at.concat(Dn(Bt,-1)))),at})(Ke,he),Ke.length&&this.splitTile(Ke,0,0,0),C&&(Ke.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ae,he,C,Ke,$e,rt,Re){const at=[ae,he,C,Ke],St=this.options,Bt=St.debug;for(;at.length;){Ke=at.pop(),C=at.pop(),he=at.pop(),ae=at.pop();const kt=1<<he,sn=tt(he,C,Ke);let Tn=this.tiles[sn];if(!Tn&&(Bt>1&&console.time("creation"),Tn=this.tiles[sn]=wt(ae,he,C,Ke,St),this.tileCoords.push({z:he,x:C,y:Ke}),Bt)){Bt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",he,C,Ke,Tn.numFeatures,Tn.numPoints,Tn.numSimplified),console.timeEnd("creation"));const an=`z${he}`;this.stats[an]=(this.stats[an]||0)+1,this.total++}if(Tn.source=ae,$e==null){if(he===St.indexMaxZoom||Tn.numPoints<=St.indexMaxPoints)continue}else{if(he===St.maxZoom||he===$e)continue;if($e!=null){const an=$e-he;if(C!==rt>>an||Ke!==Re>>an)continue}}if(Tn.source=null,ae.length===0)continue;Bt>1&&console.time("clipping");const Yn=.5*St.buffer/St.extent,vi=.5-Yn,ui=.5+Yn,Zn=1+Yn;let Mi=null,nn=null,$i=null,bi=null,to=gt(ae,kt,C-Yn,C+ui,0,Tn.minX,Tn.maxX,St),tr=gt(ae,kt,C+vi,C+Zn,0,Tn.minX,Tn.maxX,St);ae=null,to&&(Mi=gt(to,kt,Ke-Yn,Ke+ui,1,Tn.minY,Tn.maxY,St),nn=gt(to,kt,Ke+vi,Ke+Zn,1,Tn.minY,Tn.maxY,St),to=null),tr&&($i=gt(tr,kt,Ke-Yn,Ke+ui,1,Tn.minY,Tn.maxY,St),bi=gt(tr,kt,Ke+vi,Ke+Zn,1,Tn.minY,Tn.maxY,St),tr=null),Bt>1&&console.timeEnd("clipping"),at.push(Mi||[],he+1,2*C,2*Ke),at.push(nn||[],he+1,2*C,2*Ke+1),at.push($i||[],he+1,2*C+1,2*Ke),at.push(bi||[],he+1,2*C+1,2*Ke+1)}}getTile(ae,he,C){ae=+ae,he=+he,C=+C;const Ke=this.options,{extent:$e,debug:rt}=Ke;if(ae<0||ae>24)return null;const Re=1<<ae,at=tt(ae,he=he+Re&Re-1,C);if(this.tiles[at])return qn(this.tiles[at],$e);rt>1&&console.log("drilling down to z%d-%d-%d",ae,he,C);let St,Bt=ae,kt=he,sn=C;for(;!St&&Bt>0;)Bt--,kt>>=1,sn>>=1,St=this.tiles[tt(Bt,kt,sn)];return St&&St.source?(rt>1&&(console.log("found parent tile z%d-%d-%d",Bt,kt,sn),console.time("drilling down")),this.splitTile(St.source,Bt,kt,sn,ae,he,C),rt>1&&console.timeEnd("drilling down"),this.tiles[at]?qn(this.tiles[at],$e):null):null}}function tt(Xe,ae,he){return 32*((1<<Xe)*he+ae)+Xe}class xt extends ue{constructor(ae,he,C,Ke=It){super(ae,he,C),this._dataUpdateable=new Map,this._createGeoJSONIndex=Ke}loadVectorTile(ae,he){return s._(this,void 0,void 0,(function*(){const C=ae.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ke=this._geoJSONIndex.getTile(C.z,C.x,C.y);return Ke?W(new E(Ke.features,{version:2,extent:s.a4})):null}))}loadData(ae){return s._(this,void 0,void 0,(function*(){var he;(he=this._pendingRequest)===null||he===void 0||he.abort();const C=this._startPerformance(ae);this._pendingRequest=new AbortController;try{(!this._pendingData||ae.request||ae.data||ae.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(ae,this._pendingRequest));const Ke=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(Ke,ae),this.loaded={};const $e=ae.dataDiff&&s.a6(Ke)?{applyDiff:!0}:{data:Ke};return this._finishPerformance(C,ae,$e),$e}catch(Ke){if(delete this._pendingRequest,s.cH(Ke))return{abandoned:!0};throw Ke}}))}_startPerformance(ae){var he;if(!((he=ae?.request)===null||he===void 0)&&he.collectResourceTiming)return new s.c$(ae.request)}_finishPerformance(ae,he,C){if(!ae)return;const Ke=ae.finish();Ke&&(C.resourceTiming={},C.resourceTiming[he.source]=JSON.parse(JSON.stringify(Ke)))}getData(){return s._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(ae){const he=this.loaded;return he&&he[ae.uid]?super.reloadTile(ae):this.loadTile(ae)}loadAndProcessGeoJSON(ae,he){return s._(this,void 0,void 0,(function*(){let C;if(ae.request?C=yield this.loadGeoJSONFromUrl(ae.request,ae.promoteId,he):ae.data?C=this._loadGeoJSONFromObject(ae.data,ae.promoteId):ae.dataDiff&&(C=this._loadGeoJSONFromDiff(ae.dataDiff,ae.promoteId,ae.source)),delete this._pendingRequest,typeof C!="object")throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`);return Be(C,!0),ae.filter&&(C=this._filterGeoJSON(C,ae.filter)),C}))}loadGeoJSONFromUrl(ae,he,C){return s._(this,void 0,void 0,(function*(){const Ke=yield s.j(ae,C);return this._dataUpdateable=s.a6(Ke.data,he)?s.a7(Ke.data,he):void 0,Ke.data}))}_loadGeoJSONFromObject(ae,he){return this._dataUpdateable=s.a6(ae,he)?s.a7(ae,he):void 0,ae}_loadGeoJSONFromDiff(ae,he,C){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${C}`);s.a8(this._dataUpdateable,ae,he);const Ke=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(Ke)}_filterGeoJSON(ae,he){const C=s.d3(he,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(C.result==="error")throw new Error(C.value.map(($e=>`${$e.key}: ${$e.message}`)).join(", "));const Ke=ae.features.filter(($e=>C.value.evaluate({zoom:0},$e)));return this._toFeatureCollection(Ke)}_toFeatureCollection(ae){return{type:"FeatureCollection",features:ae}}removeSource(ae){return s._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(ae){return this._geoJSONIndex.getClusterExpansionZoom(ae.clusterId)}getClusterChildren(ae){return this._geoJSONIndex.getChildren(ae.clusterId)}getClusterLeaves(ae){return this._geoJSONIndex.getLeaves(ae.clusterId,ae.limit,ae.offset)}}function It(Xe,ae){return ae.cluster?new ut((function({superclusterOptions:he,clusterProperties:C}){if(!C||!he)return he;const Ke={},$e={},rt={accumulated:null,zoom:0},Re={properties:null},at=Object.keys(C);for(const St of at){const[Bt,kt]=C[St],sn=s.d3(kt),Tn=s.d3(typeof Bt=="string"?[Bt,["accumulated"],["get",St]]:Bt);Ke[St]=sn.value,$e[St]=Tn.value}return he.map=St=>{Re.properties=St;const Bt={};for(const kt of at)Bt[kt]=Ke[kt].evaluate(rt,Re);return Bt},he.reduce=(St,Bt)=>{Re.properties=Bt;for(const kt of at)rt.accumulated=St[kt],St[kt]=$e[kt].evaluate(rt,Re)},he})(ae)).load(Xe.features):(function(he,C){return new Pe(he,C)})(Xe,ae.geojsonVtOptions)}class _n{constructor(ae){this.self=ae,this.actor=new s.L(ae),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(he,C)=>{if(this.externalWorkerSourceTypes[he])throw new Error(`Worker source with name "${he}" already registered.`);this.externalWorkerSourceTypes[he]=C},this.self.addProtocol=s.cJ,this.self.removeProtocol=s.cK,this.self.registerRTLTextPlugin=he=>{s.d4.setMethods(he)},this.actor.registerMessageHandler("LDT",((he,C)=>this._getDEMWorkerSource(he,C.source).loadTile(C))),this.actor.registerMessageHandler("RDT",((he,C)=>s._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(he,C.source).removeTile(C)})))),this.actor.registerMessageHandler("GCEZ",((he,C)=>s._(this,void 0,void 0,(function*(){return this._getWorkerSource(he,C.type,C.source).getClusterExpansionZoom(C)})))),this.actor.registerMessageHandler("GCC",((he,C)=>s._(this,void 0,void 0,(function*(){return this._getWorkerSource(he,C.type,C.source).getClusterChildren(C)})))),this.actor.registerMessageHandler("GCL",((he,C)=>s._(this,void 0,void 0,(function*(){return this._getWorkerSource(he,C.type,C.source).getClusterLeaves(C)})))),this.actor.registerMessageHandler("LD",((he,C)=>this._getWorkerSource(he,C.type,C.source).loadData(C))),this.actor.registerMessageHandler("GD",((he,C)=>this._getWorkerSource(he,C.type,C.source).getData())),this.actor.registerMessageHandler("LT",((he,C)=>this._getWorkerSource(he,C.type,C.source).loadTile(C))),this.actor.registerMessageHandler("RT",((he,C)=>this._getWorkerSource(he,C.type,C.source).reloadTile(C))),this.actor.registerMessageHandler("AT",((he,C)=>this._getWorkerSource(he,C.type,C.source).abortTile(C))),this.actor.registerMessageHandler("RMT",((he,C)=>this._getWorkerSource(he,C.type,C.source).removeTile(C))),this.actor.registerMessageHandler("RS",((he,C)=>s._(this,void 0,void 0,(function*(){if(!this.workerSources[he]||!this.workerSources[he][C.type]||!this.workerSources[he][C.type][C.source])return;const Ke=this.workerSources[he][C.type][C.source];delete this.workerSources[he][C.type][C.source],Ke.removeSource!==void 0&&Ke.removeSource(C)})))),this.actor.registerMessageHandler("RM",(he=>s._(this,void 0,void 0,(function*(){delete this.layerIndexes[he],delete this.availableImages[he],delete this.workerSources[he],delete this.demWorkerSources[he],this.globalStates.delete(he)})))),this.actor.registerMessageHandler("SR",((he,C)=>s._(this,void 0,void 0,(function*(){this.referrer=C})))),this.actor.registerMessageHandler("SRPS",((he,C)=>this._syncRTLPluginState(he,C))),this.actor.registerMessageHandler("IS",((he,C)=>s._(this,void 0,void 0,(function*(){this.self.importScripts(C)})))),this.actor.registerMessageHandler("SI",((he,C)=>this._setImages(he,C))),this.actor.registerMessageHandler("UL",((he,C)=>s._(this,void 0,void 0,(function*(){this._getLayerIndex(he).update(C.layers,C.removedIds,this._getGlobalState(he))})))),this.actor.registerMessageHandler("UGS",((he,C)=>s._(this,void 0,void 0,(function*(){const Ke=this._getGlobalState(he);for(const $e in C)Ke[$e]=C[$e]})))),this.actor.registerMessageHandler("SL",((he,C)=>s._(this,void 0,void 0,(function*(){this._getLayerIndex(he).replace(C,this._getGlobalState(he))}))))}_getGlobalState(ae){let he=this.globalStates.get(ae);return he||(he={},this.globalStates.set(ae,he)),he}_setImages(ae,he){return s._(this,void 0,void 0,(function*(){this.availableImages[ae]=he;for(const C in this.workerSources[ae]){const Ke=this.workerSources[ae][C];for(const $e in Ke)Ke[$e].availableImages=he}}))}_syncRTLPluginState(ae,he){return s._(this,void 0,void 0,(function*(){return yield s.d4.syncState(he,this.self.importScripts)}))}_getAvailableImages(ae){let he=this.availableImages[ae];return he||(he=[]),he}_getLayerIndex(ae){let he=this.layerIndexes[ae];return he||(he=this.layerIndexes[ae]=new a),he}_getWorkerSource(ae,he,C){if(this.workerSources[ae]||(this.workerSources[ae]={}),this.workerSources[ae][he]||(this.workerSources[ae][he]={}),!this.workerSources[ae][he][C]){const Ke={sendAsync:($e,rt)=>($e.targetMapId=ae,this.actor.sendAsync($e,rt))};switch(he){case"vector":this.workerSources[ae][he][C]=new ue(Ke,this._getLayerIndex(ae),this._getAvailableImages(ae));break;case"geojson":this.workerSources[ae][he][C]=new xt(Ke,this._getLayerIndex(ae),this._getAvailableImages(ae));break;default:this.workerSources[ae][he][C]=new this.externalWorkerSourceTypes[he](Ke,this._getLayerIndex(ae),this._getAvailableImages(ae))}}return this.workerSources[ae][he][C]}_getDEMWorkerSource(ae,he){return this.demWorkerSources[ae]||(this.demWorkerSources[ae]={}),this.demWorkerSources[ae][he]||(this.demWorkerSources[ae][he]=new ve),this.demWorkerSources[ae][he]}}return s.i(self)&&(self.worker=new _n(self)),_n})),r("index",["exports","./shared"],(function(s,a){var c="5.13.0";function f(){var T=new a.A(4);return a.A!=Float32Array&&(T[1]=0,T[2]=0),T[0]=1,T[3]=1,T}let y,_,E;const I={frame(T,u,m){const M=requestAnimationFrame((D=>{O(),u(D)})),{unsubscribe:O}=a.s(T.signal,"abort",(()=>{O(),cancelAnimationFrame(M),m(a.c())}),!1)},frameAsync(T){return new Promise(((u,m)=>{this.frame(T,u,m)}))},getImageData(T,u=0){return this.getImageCanvasContext(T).getImageData(-u,-u,T.width+2*u,T.height+2*u)},getImageCanvasContext(T){const u=window.document.createElement("canvas"),m=u.getContext("2d",{willReadFrequently:!0});if(!m)throw new Error("failed to create canvas 2d context");return u.width=T.width,u.height=T.height,m.drawImage(T,0,0,T.width,T.height),m},resolveURL:T=>(y||(y=document.createElement("a")),y.href=T,y.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return E!==void 0?E:!!matchMedia&&(_==null&&(_=matchMedia("(prefers-reduced-motion: reduce)")),_.matches)},set prefersReducedMotion(T){E=T}},P=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(T){this._frozenAt=T}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function K(){return P.getCurrentTime()}class z{static testProp(u){if(!z.docStyle)return u[0];for(let m=0;m<u.length;m++)if(u[m]in z.docStyle)return u[m];return u[0]}static create(u,m,M){const O=window.document.createElement(u);return m!==void 0&&(O.className=m),M&&M.appendChild(O),O}static createNS(u,m){return window.document.createElementNS(u,m)}static disableDrag(){z.docStyle&&z.selectProp&&(z.userSelect=z.docStyle[z.selectProp],z.docStyle[z.selectProp]="none")}static enableDrag(){z.docStyle&&z.selectProp&&(z.docStyle[z.selectProp]=z.userSelect)}static setTransform(u,m){u.style[z.transformProp]=m}static addEventListener(u,m,M,O={}){u.addEventListener(m,M,"passive"in O?O:O.capture)}static removeEventListener(u,m,M,O={}){u.removeEventListener(m,M,"passive"in O?O:O.capture)}static suppressClickInternal(u){u.preventDefault(),u.stopPropagation(),window.removeEventListener("click",z.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",z.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",z.suppressClickInternal,!0)}),0)}static getScale(u){const m=u.getBoundingClientRect();return{x:m.width/u.offsetWidth||1,y:m.height/u.offsetHeight||1,boundingClientRect:m}}static getPoint(u,m,M){const O=m.boundingClientRect;return new a.P((M.clientX-O.left)/m.x-u.clientLeft,(M.clientY-O.top)/m.y-u.clientTop)}static mousePos(u,m){const M=z.getScale(u);return z.getPoint(u,M,m)}static touchPos(u,m){const M=[],O=z.getScale(u);for(let D=0;D<m.length;D++)M.push(z.getPoint(u,O,m[D]));return M}static mouseButton(u){return u.button}static remove(u){u.parentNode&&u.parentNode.removeChild(u)}static sanitize(u){const m=new DOMParser().parseFromString(u,"text/html").body||document.createElement("body"),M=m.querySelectorAll("script");for(const O of M)O.remove();return z.clean(m),m.innerHTML}static isPossiblyDangerous(u,m){const M=m.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(u)||!M.includes("javascript:")&&!M.includes("data:"))||!!u.startsWith("on")||void 0}static clean(u){const m=u.children;for(const M of m)z.removeAttributes(M),z.clean(M)}static removeAttributes(u){for(const{name:m,value:M}of u.attributes)z.isPossiblyDangerous(m,M)&&u.removeAttribute(m)}}z.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,z.selectProp=z.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),z.transformProp=z.testProp(["transform","WebkitTransform"]);const Q={supported:!1,testSupport:function(T){!Z&&$&&(ee?X(T):V=T)}};let V,$,Z=!1,ee=!1;function X(T){const u=T.createTexture();T.bindTexture(T.TEXTURE_2D,u);try{if(T.texImage2D(T.TEXTURE_2D,0,T.RGBA,T.RGBA,T.UNSIGNED_BYTE,$),T.isContextLost())return;Q.supported=!0}catch{}T.deleteTexture(u),Z=!0}var W;typeof document<"u"&&($=document.createElement("img"),$.onload=()=>{V&&X(V),V=null,ee=!0},$.onerror=()=>{Z=!0,V=null},$.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(T){let u,m,M,O;T.resetRequestQueue=()=>{u=[],m=0,M=0,O={}},T.addThrottleControl=q=>{const oe=M++;return O[oe]=q,oe},T.removeThrottleControl=q=>{delete O[q],U()},T.getImage=(q,oe,le=!0)=>new Promise(((me,pe)=>{Q.supported&&(q.headers||(q.headers={}),q.headers.accept="image/webp,*/*"),a.e(q,{type:"image"}),u.push({abortController:oe,requestParameters:q,supportImageRefresh:le,state:"queued",onError:xe=>{pe(xe)},onSuccess:xe=>{me(xe)}}),U()}));const D=q=>a._(this,void 0,void 0,(function*(){q.state="running";const{requestParameters:oe,supportImageRefresh:le,onError:me,onSuccess:pe,abortController:xe}=q,Le=le===!1&&!a.i(self)&&!a.g(oe.url)&&(!oe.headers||Object.keys(oe.headers).reduce(((Ze,et)=>Ze&&et==="accept"),!0));m++;const Ve=Le?G(oe,xe):a.m(oe,xe);try{const Ze=yield Ve;delete q.abortController,q.state="completed",Ze.data instanceof HTMLImageElement||a.b(Ze.data)?pe(Ze):Ze.data&&pe({data:yield(He=Ze.data,typeof createImageBitmap=="function"?a.f(He):a.h(He)),cacheControl:Ze.cacheControl,expires:Ze.expires})}catch(Ze){delete q.abortController,me(Ze)}finally{m--,U()}var He})),U=()=>{const q=(()=>{for(const oe of Object.keys(O))if(O[oe]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let oe=m;oe<q&&u.length>0;oe++){const le=u.shift();le.abortController.signal.aborted?oe--:D(le)}},G=(q,oe)=>new Promise(((le,me)=>{const pe=new Image,xe=q.url,Le=q.credentials;Le&&Le==="include"?pe.crossOrigin="use-credentials":(Le&&Le==="same-origin"||!a.d(xe))&&(pe.crossOrigin="anonymous"),oe.signal.addEventListener("abort",(()=>{pe.src="",me(a.c())})),pe.fetchPriority="high",pe.onload=()=>{pe.onerror=pe.onload=null,le({data:pe})},pe.onerror=()=>{pe.onerror=pe.onload=null,oe.signal.aborted||me(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},pe.src=xe}))})(W||(W={})),W.resetRequestQueue();class se{constructor(u){this._transformRequestFn=u??null}transformRequest(u,m){return this._transformRequestFn&&this._transformRequestFn(u,m)||{url:u}}setTransformRequest(u){this._transformRequestFn=u}}function ue(T){const u=[];if(typeof T=="string")u.push({id:"default",url:T});else if(T&&T.length>0){const m=[];for(const{id:M,url:O}of T){const D=`${M}${O}`;m.indexOf(D)===-1&&(m.push(D),u.push({id:M,url:O}))}}return u}function ve(T,u,m){try{const M=new URL(T);return M.pathname+=`${u}${m}`,M.toString()}catch{throw new Error(`Invalid sprite URL "${T}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function ye(T){const{userImage:u}=T;return!!(u&&u.render&&u.render())&&(T.data.replace(new Uint8Array(u.data.buffer)),!0)}class Ee extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const u of Object.keys(this.images))this.removeImage(u);this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(u){if(this.loaded!==u&&(this.loaded=u,u)){for(const{ids:m,promiseResolve:M}of this.requestors)M(this._getImagesForIds(m));this.requestors=[]}}getImage(u){const m=this.images[u];if(m&&!m.data&&m.spriteData){const M=m.spriteData;m.data=new a.R({width:M.width,height:M.height},M.context.getImageData(M.x,M.y,M.width,M.height).data),m.spriteData=null}return m}addImage(u,m){if(this.images[u])throw new Error(`Image id ${u} already exist, use updateImage instead`);this._validate(u,m)&&(this.images[u]=m)}_validate(u,m){let M=!0;const O=m.data||m.spriteData;return this._validateStretch(m.stretchX,O&&O.width)||(this.fire(new a.k(new Error(`Image "${u}" has invalid "stretchX" value`))),M=!1),this._validateStretch(m.stretchY,O&&O.height)||(this.fire(new a.k(new Error(`Image "${u}" has invalid "stretchY" value`))),M=!1),this._validateContent(m.content,m)||(this.fire(new a.k(new Error(`Image "${u}" has invalid "content" value`))),M=!1),M}_validateStretch(u,m){if(!u)return!0;let M=0;for(const O of u){if(O[0]<M||O[1]<O[0]||m<O[1])return!1;M=O[1]}return!0}_validateContent(u,m){if(!u)return!0;if(u.length!==4)return!1;const M=m.spriteData,O=M&&M.width||m.data.width,D=M&&M.height||m.data.height;return!(u[0]<0||O<u[0]||u[1]<0||D<u[1]||u[2]<0||O<u[2]||u[3]<0||D<u[3]||u[2]<u[0]||u[3]<u[1])}updateImage(u,m,M=!0){const O=this.getImage(u);if(M&&(O.data.width!==m.data.width||O.data.height!==m.data.height))throw new Error(`size mismatch between old image (${O.data.width}x${O.data.height}) and new image (${m.data.width}x${m.data.height}).`);m.version=O.version+1,this.images[u]=m,this.updatedImages[u]=!0}removeImage(u){const m=this.images[u];delete this.images[u],delete this.patterns[u],m.userImage&&m.userImage.onRemove&&m.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(u){return new Promise(((m,M)=>{let O=!0;if(!this.isLoaded())for(const D of u)this.images[D]||(O=!1);this.isLoaded()||O?m(this._getImagesForIds(u)):this.requestors.push({ids:u,promiseResolve:m})}))}_getImagesForIds(u){const m={};for(const M of u){let O=this.getImage(M);O||(this.fire(new a.l("styleimagemissing",{id:M})),O=this.getImage(M)),O?m[M]={data:O.data.clone(),pixelRatio:O.pixelRatio,sdf:O.sdf,version:O.version,stretchX:O.stretchX,stretchY:O.stretchY,content:O.content,textFitWidth:O.textFitWidth,textFitHeight:O.textFitHeight,hasRenderCallback:!!(O.userImage&&O.userImage.render)}:a.w(`Image "${M}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return m}getPixelSize(){const{width:u,height:m}=this.atlasImage;return{width:u,height:m}}getPattern(u){const m=this.patterns[u],M=this.getImage(u);if(!M)return null;if(m&&m.position.version===M.version)return m.position;if(m)m.position.version=M.version;else{const O={w:M.data.width+2,h:M.data.height+2,x:0,y:0},D=new a.I(O,M);this.patterns[u]={bin:O,position:D}}return this._updatePatternAtlas(),this.patterns[u].position}bind(u){const m=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.T(u,this.atlasImage,m.RGBA),this.atlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE)}_updatePatternAtlas(){const u=[];for(const D in this.patterns)u.push(this.patterns[D].bin);const{w:m,h:M}=a.p(u),O=this.atlasImage;O.resize({width:m||1,height:M||1});for(const D in this.patterns){const{bin:U}=this.patterns[D],G=U.x+1,q=U.y+1,oe=this.getImage(D).data,le=oe.width,me=oe.height;a.R.copy(oe,O,{x:0,y:0},{x:G,y:q},{width:le,height:me}),a.R.copy(oe,O,{x:0,y:me-1},{x:G,y:q-1},{width:le,height:1}),a.R.copy(oe,O,{x:0,y:0},{x:G,y:q+me},{width:le,height:1}),a.R.copy(oe,O,{x:le-1,y:0},{x:G-1,y:q},{width:1,height:me}),a.R.copy(oe,O,{x:0,y:0},{x:G+le,y:q},{width:1,height:me})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(u){for(const m of u){if(this.callbackDispatchedThisFrame[m])continue;this.callbackDispatchedThisFrame[m]=!0;const M=this.getImage(m);M||a.w(`Image with ID: "${m}" was not found`),ye(M)&&this.updateImage(m,M)}}cloneImages(){const u={};for(const m in this.images){const M=this.images[m];u[m]=Object.assign(Object.assign({},M),{data:M.data?M.data.clone():null})}return u}}const _e=1e20;function Be(T,u,m,M,O,D,U,G,q){for(let oe=u;oe<u+M;oe++)Fe(T,m*D+oe,D,O,U,G,q);for(let oe=m;oe<m+O;oe++)Fe(T,oe*D+u,1,M,U,G,q)}function Fe(T,u,m,M,O,D,U){D[0]=0,U[0]=-_e,U[1]=_e,O[0]=T[u];for(let G=1,q=0,oe=0;G<M;G++){O[G]=T[u+G*m];const le=G*G;do{const me=D[q];oe=(O[G]-O[me]+le-me*me)/(G-me)/2}while(oe<=U[q]&&--q>-1);q++,D[q]=G,U[q]=oe,U[q+1]=_e}for(let G=0,q=0;G<M;G++){for(;U[q+1]<G;)q++;const oe=D[q],le=G-oe;T[u+G*m]=O[oe]+le*le}}const Se=a.v.layout_symbol["text-font"].default.join(",");class qe{constructor(u,m,M){this.requestManager=u,this.localIdeographFontFamily=m,this.entries={},this.lang=M}setURL(u){this.url=u}getGlyphs(u){return a._(this,void 0,void 0,(function*(){const m=[];for(const D in u)for(const U of u[D])m.push(this._getAndCacheGlyphsPromise(D,U));const M=yield Promise.all(m),O={};for(const{stack:D,id:U,glyph:G}of M)O[D]||(O[D]={}),O[D][U]=G&&{id:G.id,bitmap:G.bitmap.clone(),metrics:G.metrics};return O}))}_getAndCacheGlyphsPromise(u,m){return a._(this,void 0,void 0,(function*(){let M=this.entries[u];M||(M=this.entries[u]={glyphs:{},requests:{},ranges:{}});let O=M.glyphs[m];return O!==void 0?{stack:u,id:m,glyph:O}:!this.url||this._charUsesLocalIdeographFontFamily(m)?(O=M.glyphs[m]=this._drawGlyph(M,u,m),{stack:u,id:m,glyph:O}):yield this._downloadAndCacheRangePromise(u,m)}))}_downloadAndCacheRangePromise(u,m){return a._(this,void 0,void 0,(function*(){const M=this.entries[u],O=Math.floor(m/256);if(M.ranges[O])return{stack:u,id:m,glyph:null};if(!M.requests[O]){const D=qe.loadGlyphRange(u,O,this.url,this.requestManager);M.requests[O]=D}try{const D=yield M.requests[O];for(const U in D)M.glyphs[+U]=D[+U];return M.ranges[O]=!0,{stack:u,id:m,glyph:D[m]||null}}catch(D){const U=M.glyphs[m]=this._drawGlyph(M,u,m);return this._warnOnMissingGlyphRange(U,O,m,D),{stack:u,id:m,glyph:U}}}))}_warnOnMissingGlyphRange(u,m,M,O){const D=256*m,U=D+255,G=M.toString(16).padStart(4,"0").toUpperCase();a.w(`Unable to load glyph range ${m}, ${D}-${U}. Rendering codepoint U+${G} locally instead. ${O}`)}_charUsesLocalIdeographFontFamily(u){return!!this.localIdeographFontFamily&&a.q(u)}_drawGlyph(u,m,M){const O=m===Se&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(M),D=O?"ideographTinySDF":"tinySDF";u[D]||(u[D]=this._createTinySDF(O?this.localIdeographFontFamily:m));const U=u[D].draw(String.fromCodePoint(M));return{id:M,bitmap:new a.r({width:U.width||60,height:U.height||60},U.data),metrics:{width:U.glyphWidth/2||24,height:U.glyphHeight/2||24,left:U.glyphLeft/2+.5||0,top:U.glyphTop/2-27.5||-8,advance:U.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(u){const m=u?u.split(","):[];m.push("sans-serif");const M=m.map((O=>/[-\w]+/.test(O)?O:`'${CSS.escape(O)}'`)).join(",");return new qe.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:M,fontWeight:this._fontWeight(m[0]),fontStyle:this._fontStyle(m[0]),lang:this.lang})}_fontStyle(u){return/italic/i.test(u)?"italic":/oblique/i.test(u)?"oblique":"normal"}_fontWeight(u){const m={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let M;for(const[O,D]of Object.entries(m))new RegExp(`\\b${O}\\b`,"i").test(u)&&(M=`${D}`);return M}destroy(){for(const u in this.entries){const m=this.entries[u];m.tinySDF&&(m.tinySDF=null),m.ideographTinySDF&&(m.ideographTinySDF=null),m.glyphs={},m.requests={},m.ranges={}}this.entries={}}}qe.loadGlyphRange=function(T,u,m,M){return a._(this,void 0,void 0,(function*(){const O=256*u,D=O+255,U=M.transformRequest(m.replace("{fontstack}",T).replace("{range}",`${O}-${D}`),"Glyphs"),G=yield a.n(U,new AbortController);if(!G||!G.data)throw new Error(`Could not load glyph range. range: ${u}, ${O}-${D}`);const q={};for(const oe of a.o(G.data))q[oe.id]=oe;return q}))},qe.TinySDF=class{constructor({fontSize:T=24,buffer:u=3,radius:m=8,cutoff:M=.25,fontFamily:O="sans-serif",fontWeight:D="normal",fontStyle:U="normal",lang:G=null}={}){this.buffer=u,this.cutoff=M,this.radius=m,this.lang=G;const q=this.size=T+4*u,oe=this._createCanvas(q),le=this.ctx=oe.getContext("2d",{willReadFrequently:!0});le.font=`${U} ${D} ${T}px ${O}`,le.textBaseline="alphabetic",le.textAlign="left",le.fillStyle="black",this.gridOuter=new Float64Array(q*q),this.gridInner=new Float64Array(q*q),this.f=new Float64Array(q),this.z=new Float64Array(q+1),this.v=new Uint16Array(q)}_createCanvas(T){const u=document.createElement("canvas");return u.width=u.height=T,u}draw(T){const{width:u,actualBoundingBoxAscent:m,actualBoundingBoxDescent:M,actualBoundingBoxLeft:O,actualBoundingBoxRight:D}=this.ctx.measureText(T),U=Math.ceil(m),G=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(D-O))),q=Math.min(this.size-this.buffer,U+Math.ceil(M)),oe=G+2*this.buffer,le=q+2*this.buffer,me=Math.max(oe*le,0),pe=new Uint8ClampedArray(me),xe={data:pe,width:oe,height:le,glyphWidth:G,glyphHeight:q,glyphTop:U,glyphLeft:0,glyphAdvance:u};if(G===0||q===0)return xe;const{ctx:Le,buffer:Ve,gridInner:He,gridOuter:Ze}=this;this.lang&&(Le.lang=this.lang),Le.clearRect(Ve,Ve,G,q),Le.fillText(T,Ve,Ve+U);const et=Le.getImageData(Ve,Ve,G,q);Ze.fill(_e,0,me),He.fill(0,0,me);for(let lt=0;lt<q;lt++)for(let Je=0;Je<G;Je++){const At=et.data[4*(lt*G+Je)+3]/255;if(At===0)continue;const pt=(lt+Ve)*oe+Je+Ve;if(At===1)Ze[pt]=0,He[pt]=_e;else{const it=.5-At;Ze[pt]=it>0?it*it:0,He[pt]=it<0?it*it:0}}Be(Ze,0,0,oe,le,oe,this.f,this.v,this.z),Be(He,Ve,Ve,G,q,oe,this.f,this.v,this.z);for(let lt=0;lt<me;lt++){const Je=Math.sqrt(Ze[lt])-Math.sqrt(He[lt]);pe[lt]=Math.round(255-255*(Je/this.radius+this.cutoff))}return xe}};class ut{constructor(){this.specification=a.u.light.position}possiblyEvaluate(u,m){return a.F(u.expression.evaluate(m))}interpolate(u,m,M){return{x:a.G.number(u.x,m.x,M),y:a.G.number(u.y,m.y,M),z:a.G.number(u.z,m.z,M)}}}let ht;class De extends a.E{constructor(u){super(),ht=ht||new a.t({anchor:new a.D(a.u.light.anchor),position:new ut,color:new a.D(a.u.light.color),intensity:new a.D(a.u.light.intensity)}),this._transitionable=new a.x(ht,void 0),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(u,m={}){if(!this._validate(a.y,u,m))for(const M in u){const O=u[M];M.endsWith(a.z)?this._transitionable.setTransition(M.slice(0,-a.z.length),O):this._transitionable.setValue(M,O)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,m,M){return(!M||M.validate!==!1)&&a.B(this,u.call(a.C,{value:m,style:{glyphs:!0,sprite:!0},styleSpec:a.u}))}}const Ie=new a.t({"sky-color":new a.D(a.u.sky["sky-color"]),"horizon-color":new a.D(a.u.sky["horizon-color"]),"fog-color":new a.D(a.u.sky["fog-color"]),"fog-ground-blend":new a.D(a.u.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.u.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.u.sky["atmosphere-blend"])});class ze extends a.E{constructor(u){super(),this._transitionable=new a.x(Ie,void 0),this.setSky(u),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.H(0))}setSky(u,m={}){if(!this._validate(a.J,u,m)){u||(u={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const M in u){const O=u[M];M.endsWith(a.z)?this._transitionable.setTransition(M.slice(0,-a.z.length),O):this._transitionable.setValue(M,O)}}}getSky(){return this._transitionable.serialize()}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,m,M={}){return M?.validate!==!1&&a.B(this,u.call(a.C,a.e({value:m,style:{glyphs:!0,sprite:!0},styleSpec:a.u})))}calculateFogBlendOpacity(u){return u<60?0:u<70?(u-60)/10:1}}class Te{constructor(u,m){this.width=u,this.height=m,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(u,m){const M=u.join(",")+String(m);return this.dashEntry[M]||(this.dashEntry[M]=this.addDash(u,m)),this.dashEntry[M]}getDashRanges(u,m,M){const O=[];let D=u.length%2==1?-u[u.length-1]*M:0,U=u[0]*M,G=!0;O.push({left:D,right:U,isDash:G,zeroLength:u[0]===0});let q=u[0];for(let oe=1;oe<u.length;oe++){G=!G;const le=u[oe];D=q*M,q+=le,U=q*M,O.push({left:D,right:U,isDash:G,zeroLength:le===0})}return O}addRoundDash(u,m,M){const O=m/2;for(let D=-M;D<=M;D++){const U=this.width*(this.nextRow+M+D);let G=0,q=u[G];for(let oe=0;oe<this.width;oe++){oe/q.right>1&&(q=u[++G]);const le=Math.abs(oe-q.left),me=Math.abs(oe-q.right),pe=Math.min(le,me);let xe;const Le=D/M*(O+1);if(q.isDash){const Ve=O-Math.abs(Le);xe=Math.sqrt(pe*pe+Ve*Ve)}else xe=O-Math.sqrt(pe*pe+Le*Le);this.data[U+oe]=Math.max(0,Math.min(255,xe+128))}}}addRegularDash(u){for(let G=u.length-1;G>=0;--G){const q=u[G],oe=u[G+1];q.zeroLength?u.splice(G,1):oe&&oe.isDash===q.isDash&&(oe.left=q.left,u.splice(G,1))}const m=u[0],M=u[u.length-1];m.isDash===M.isDash&&(m.left=M.left-this.width,M.right=m.right+this.width);const O=this.width*this.nextRow;let D=0,U=u[D];for(let G=0;G<this.width;G++){G/U.right>1&&(U=u[++D]);const q=Math.abs(G-U.left),oe=Math.abs(G-U.right),le=Math.min(q,oe);this.data[O+G]=Math.max(0,Math.min(255,(U.isDash?le:-le)+128))}}addDash(u,m){const M=m?7:0,O=2*M+1;if(this.nextRow+O>this.height)return a.w("LineAtlas out of space"),null;let D=0;for(let G=0;G<u.length;G++)D+=u[G];if(D!==0){const G=this.width/D,q=this.getDashRanges(u,this.width,G);m?this.addRoundDash(q,G,M):this.addRegularDash(q)}const U={y:this.nextRow+M,height:2*M,width:D};return this.nextRow+=O,this.dirty=!0,U}bind(u){const m=u.gl;this.texture?(m.bindTexture(m.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,m.texSubImage2D(m.TEXTURE_2D,0,0,0,this.width,this.height,m.ALPHA,m.UNSIGNED_BYTE,this.data))):(this.texture=m.createTexture(),m.bindTexture(m.TEXTURE_2D,this.texture),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.REPEAT),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.REPEAT),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.LINEAR),m.texImage2D(m.TEXTURE_2D,0,m.ALPHA,this.width,this.height,0,m.ALPHA,m.UNSIGNED_BYTE,this.data))}}const vt="maplibre_preloaded_worker_pool";class st{constructor(){this.active={}}acquire(u){if(!this.workers)for(this.workers=[];this.workers.length<st.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[u]=!0,this.workers.slice()}release(u){delete this.active[u],this.numActive()===0&&(this.workers.forEach((m=>{m.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[vt]}numActive(){return Object.keys(this.active).length}}const Et=Math.floor(I.hardwareConcurrency/2);let Pt,ke;function Oe(){return Pt||(Pt=new st),Pt}st.workerCount=a.K(globalThis)?Math.max(Math.min(Et,3),1):1;class we{constructor(u,m){this.workerPool=u,this.actors=[],this.currentActor=0,this.id=m;const M=this.workerPool.acquire(m);for(let O=0;O<M.length;O++){const D=new a.L(M[O],m);D.name=`Worker ${O}`,this.actors.push(D)}if(!this.actors.length)throw new Error("No actors found")}broadcast(u,m){const M=[];for(const O of this.actors)M.push(O.sendAsync({type:u,data:m}));return Promise.all(M)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(u=!0){this.actors.forEach((m=>{m.remove()})),this.actors=[],u&&this.workerPool.release(this.id)}registerMessageHandler(u,m){for(const M of this.actors)M.registerMessageHandler(u,m)}unregisterMessageHandler(u){for(const m of this.actors)m.unregisterMessageHandler(u)}}function Ye(){return ke||(ke=new we(Oe(),a.M),ke.registerMessageHandler("GR",((T,u,m)=>a.m(u,m)))),ke}function ft(T,u){const m=a.N();return a.O(m,m,[1,1,0]),a.Q(m,m,[.5*T.width,.5*T.height,1]),T.calculatePosMatrix?a.S(m,m,T.calculatePosMatrix(u.toUnwrapped())):m}function dt(T,u,m,M,O,D,U){var G;const q=(function(pe,xe,Le){if(pe)for(const Ve of pe){const He=xe[Ve];if(He&&He.source===Le&&He.type==="fill-extrusion")return!0}else for(const Ve in xe){const He=xe[Ve];if(He.source===Le&&He.type==="fill-extrusion")return!0}return!1})((G=O?.layers)!==null&&G!==void 0?G:null,u,T.id),oe=D.maxPitchScaleFactor(),le=T.tilesIn(M,oe,q);le.sort(gt);const me=[];for(const pe of le)me.push({wrappedTileID:pe.tileID.wrapped().key,queryResults:pe.tile.queryRenderedFeatures(u,m,T.getState(),pe.queryGeometry,pe.cameraQueryGeometry,pe.scale,O,D,oe,ft(D,pe.tileID),U?(xe,Le)=>U(pe.tileID,xe,Le):void 0)});return(function(pe,xe){for(const Le in pe)for(const Ve of pe[Le])Lt(Ve,xe);return pe})((function(pe){const xe={},Le={};for(const Ve of pe){const He=Ve.queryResults,Ze=Ve.wrappedTileID,et=Le[Ze]=Le[Ze]||{};for(const lt in He){const Je=He[lt],At=et[lt]=et[lt]||{},pt=xe[lt]=xe[lt]||[];for(const it of Je)At[it.featureIndex]||(At[it.featureIndex]=!0,pt.push(it))}}return xe})(me),T)}function gt(T,u){const m=T.tileID,M=u.tileID;return m.overscaledZ-M.overscaledZ||m.canonical.y-M.canonical.y||m.wrap-M.wrap||m.canonical.x-M.canonical.x}function Lt(T,u){const m=T.feature,M=u.getFeatureState(m.layer["source-layer"],m.id);m.source=m.layer.source,m.layer["source-layer"]&&(m.sourceLayer=m.layer["source-layer"]),m.state=M}function Tt(T,u,m){return a._(this,void 0,void 0,(function*(){let M=T;if(T.url?M=(yield a.j(u.transformRequest(T.url,"Source"),m)).data:yield I.frameAsync(m),!M)return null;const O=a.U(a.e(M,T),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in M&&M.vector_layers&&(O.vectorLayerIds=M.vector_layers.map((D=>D.id))),O}))}class Zt{constructor(u,m){u&&(m?this.setSouthWest(u).setNorthEast(m):Array.isArray(u)&&(u.length===4?this.setSouthWest([u[0],u[1]]).setNorthEast([u[2],u[3]]):this.setSouthWest(u[0]).setNorthEast(u[1])))}setNorthEast(u){return this._ne=u instanceof a.V?new a.V(u.lng,u.lat):a.V.convert(u),this}setSouthWest(u){return this._sw=u instanceof a.V?new a.V(u.lng,u.lat):a.V.convert(u),this}extend(u){const m=this._sw,M=this._ne;let O,D;if(u instanceof a.V)O=u,D=u;else{if(!(u instanceof Zt))return Array.isArray(u)?u.length===4||u.every(Array.isArray)?this.extend(Zt.convert(u)):this.extend(a.V.convert(u)):u&&("lng"in u||"lon"in u)&&"lat"in u?this.extend(a.V.convert(u)):this;if(O=u._sw,D=u._ne,!O||!D)return this}return m||M?(m.lng=Math.min(O.lng,m.lng),m.lat=Math.min(O.lat,m.lat),M.lng=Math.max(D.lng,M.lng),M.lat=Math.max(D.lat,M.lat)):(this._sw=new a.V(O.lng,O.lat),this._ne=new a.V(D.lng,D.lat)),this}getCenter(){return new a.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.V(this.getWest(),this.getNorth())}getSouthEast(){return new a.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(u){const{lng:m,lat:M}=a.V.convert(u);let O=this._sw.lng<=m&&m<=this._ne.lng;return this._sw.lng>this._ne.lng&&(O=this._sw.lng>=m&&m>=this._ne.lng),this._sw.lat<=M&&M<=this._ne.lat&&O}intersects(u){if((u=Zt.convert(u)).getNorth()<this.getSouth()||u.getSouth()>this.getNorth())return!1;const m=a.W(this.getWest(),-180,180),M=a.W(this.getEast(),-180,180),O=a.W(u.getWest(),-180,180),D=a.W(u.getEast(),-180,180),U=m>M,G=O>D;return!(!U||!G)||(U?D>=m||O<=M:G?M>=O||m<=D:!(O>M||D<m))}static convert(u){return u instanceof Zt?u:u&&new Zt(u)}static fromLngLat(u,m=0){const M=360*m/40075017,O=M/Math.cos(Math.PI/180*u.lat);return new Zt(new a.V(u.lng-O,u.lat-M),new a.V(u.lng+O,u.lat+M))}adjustAntiMeridian(){const u=new a.V(this._sw.lng,this._sw.lat),m=new a.V(this._ne.lng,this._ne.lat);return new Zt(u,u.lng>m.lng?new a.V(m.lng+360,m.lat):m)}}class Fn{constructor(u,m,M){this.bounds=Zt.convert(this.validateBounds(u)),this.minzoom=m||0,this.maxzoom=M||24}validateBounds(u){return Array.isArray(u)&&u.length===4?[Math.max(-180,u[0]),Math.max(-90,u[1]),Math.min(180,u[2]),Math.min(90,u[3])]:[-180,-90,180,90]}contains(u){const m=Math.pow(2,u.z),M=Math.floor(a.Y(this.bounds.getWest())*m),O=Math.floor(a.X(this.bounds.getNorth())*m),D=Math.ceil(a.Y(this.bounds.getEast())*m),U=Math.ceil(a.X(this.bounds.getSouth())*m);return u.x>=M&&u.x<D&&u.y>=O&&u.y<U}}class Ln extends a.E{constructor(u,m,M,O){if(super(),this.id=u,this.dispatcher=M,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.U(m,["url","scheme","tileSize","promoteId","encoding"])),this._options=a.e({type:"vector"},m),this._collectResourceTiming=m.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(O)}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const u=yield Tt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),u&&(a.e(this,u),u.bounds&&(this.tileBounds=new Fn(u.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(u){this._tileJSONRequest=null,this._loaded=!0,this.fire(new a.k(u))}}))}loaded(){return this._loaded}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}onAdd(u){this.map=u,this.load()}setSourceProperty(u){this._tileJSONRequest&&this._tileJSONRequest.abort(),u(),this.load()}setTiles(u){return this.setSourceProperty((()=>{this._options.tiles=u})),this}setUrl(u){return this.setSourceProperty((()=>{this.url=u,this._options.url=u})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(u){return a._(this,void 0,void 0,(function*(){const m=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),M={request:this.map._requestManager.transformRequest(m,"Tile"),uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(u)};M.request.collectResourceTiming=this._collectResourceTiming;let O="RT";if(u.actor&&u.state!=="expired"){if(u.state==="loading")return new Promise(((D,U)=>{u.reloadPromise={resolve:D,reject:U}}))}else u.actor=this.dispatcher.getActor(),O="LT";u.abortController=new AbortController;try{const D=yield u.actor.sendAsync({type:O,data:M},u.abortController);if(delete u.abortController,u.aborted)return;this._afterTileLoadWorkerResponse(u,D)}catch(D){if(delete u.abortController,u.aborted)return;if(D&&D.status!==404)throw D;this._afterTileLoadWorkerResponse(u,null)}}))}_getOverzoomParameters(u){if(u.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;const m=u.tileID.scaledTo(this.maxzoom).canonical,M=m.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:m,overzoomRequest:this.map._requestManager.transformRequest(M,"Tile")}}_afterTileLoadWorkerResponse(u,m){if(m&&m.resourceTiming&&(u.resourceTiming=m.resourceTiming),m&&this.map._refreshExpiredTiles&&u.setExpiryData(m),u.loadVectorData(m,this.map.painter),u.reloadPromise){const M=u.reloadPromise;u.reloadPromise=null,this.loadTile(u).then(M.resolve).catch(M.reject)}}abortTile(u){return a._(this,void 0,void 0,(function*(){u.abortController&&(u.abortController.abort(),delete u.abortController),u.actor&&(yield u.actor.sendAsync({type:"AT",data:{uid:u.uid,type:this.type,source:this.id}}))}))}unloadTile(u){return a._(this,void 0,void 0,(function*(){u.unloadVectorData(),u.actor&&(yield u.actor.sendAsync({type:"RMT",data:{uid:u.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class fi extends a.E{constructor(u,m,M,O){super(),this.id=u,this.dispatcher=M,this.setEventedParent(O),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},m),a.e(this,a.U(m,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,(function*(u=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const m=yield Tt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,m&&(a.e(this,m),m.bounds&&(this.tileBounds=new Fn(m.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:u})))}catch(m){this._tileJSONRequest=null,this._loaded=!0,this.fire(new a.k(m))}}))}loaded(){return this._loaded}onAdd(u){this.map=u,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(u){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),u(),this.load(!0)}setTiles(u){return this.setSourceProperty((()=>{this._options.tiles=u})),this}setUrl(u){return this.setSourceProperty((()=>{this.url=u,this._options.url=u})),this}serialize(){return a.e({},this._options)}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}loadTile(u){return a._(this,void 0,void 0,(function*(){const m=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);u.abortController=new AbortController;try{const M=yield W.getImage(this.map._requestManager.transformRequest(m,"Tile"),u.abortController,this.map._refreshExpiredTiles);if(delete u.abortController,u.aborted)return void(u.state="unloaded");if(M&&M.data){this.map._refreshExpiredTiles&&(M.cacheControl||M.expires)&&u.setExpiryData({cacheControl:M.cacheControl,expires:M.expires});const O=this.map.painter.context,D=O.gl,U=M.data;u.texture=this.map.painter.getTileTexture(U.width),u.texture?u.texture.update(U,{useMipmap:!0}):(u.texture=new a.T(O,U,D.RGBA,{useMipmap:!0}),u.texture.bind(D.LINEAR,D.CLAMP_TO_EDGE,D.LINEAR_MIPMAP_NEAREST)),u.state="loaded"}}catch(M){if(delete u.abortController,u.aborted)u.state="unloaded";else if(M)throw u.state="errored",M}}))}abortTile(u){return a._(this,void 0,void 0,(function*(){u.abortController&&(u.abortController.abort(),delete u.abortController)}))}unloadTile(u){return a._(this,void 0,void 0,(function*(){u.texture&&this.map.painter.saveTileTexture(u.texture)}))}hasTransition(){return!1}}class Rn extends fi{constructor(u,m,M,O){super(u,m,M,O),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},m),this.encoding=m.encoding||"mapbox",this.redFactor=m.redFactor,this.greenFactor=m.greenFactor,this.blueFactor=m.blueFactor,this.baseShift=m.baseShift}loadTile(u){return a._(this,void 0,void 0,(function*(){const m=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),M=this.map._requestManager.transformRequest(m,"Tile");u.neighboringTiles=this._getNeighboringTiles(u.tileID),u.abortController=new AbortController;try{const O=yield W.getImage(M,u.abortController,this.map._refreshExpiredTiles);if(delete u.abortController,u.aborted)return void(u.state="unloaded");if(O&&O.data){const D=O.data;this.map._refreshExpiredTiles&&(O.cacheControl||O.expires)&&u.setExpiryData({cacheControl:O.cacheControl,expires:O.expires});const U=a.b(D)&&a.Z()?D:yield this.readImageNow(D),G={type:this.type,uid:u.uid,source:this.id,rawImageData:U,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!u.actor||u.state==="expired"){u.actor=this.dispatcher.getActor();const q=yield u.actor.sendAsync({type:"LDT",data:G});u.dem=q,u.needsHillshadePrepare=!0,u.needsTerrainPrepare=!0,u.state="loaded"}}}catch(O){if(delete u.abortController,u.aborted)u.state="unloaded";else if(O)throw u.state="errored",O}}))}readImageNow(u){return a._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&a.$()){const m=u.width+2,M=u.height+2;try{return new a.R({width:m,height:M},yield a.a0(u,-1,-1,m,M))}catch{}}return I.getImageData(u,1)}))}_getNeighboringTiles(u){const m=u.canonical,M=Math.pow(2,m.z),O=(m.x-1+M)%M,D=m.x===0?u.wrap-1:u.wrap,U=(m.x+1+M)%M,G=m.x+1===M?u.wrap+1:u.wrap,q={};return q[new a.a1(u.overscaledZ,D,m.z,O,m.y).key]={backfilled:!1},q[new a.a1(u.overscaledZ,G,m.z,U,m.y).key]={backfilled:!1},m.y>0&&(q[new a.a1(u.overscaledZ,D,m.z,O,m.y-1).key]={backfilled:!1},q[new a.a1(u.overscaledZ,u.wrap,m.z,m.x,m.y-1).key]={backfilled:!1},q[new a.a1(u.overscaledZ,G,m.z,U,m.y-1).key]={backfilled:!1}),m.y+1<M&&(q[new a.a1(u.overscaledZ,D,m.z,O,m.y+1).key]={backfilled:!1},q[new a.a1(u.overscaledZ,u.wrap,m.z,m.x,m.y+1).key]={backfilled:!1},q[new a.a1(u.overscaledZ,G,m.z,U,m.y+1).key]={backfilled:!1}),q}unloadTile(u){return a._(this,void 0,void 0,(function*(){u.demTexture&&this.map.painter.saveTileTexture(u.demTexture),u.fbo&&(u.fbo.destroy(),delete u.fbo),u.dem&&delete u.dem,delete u.neighboringTiles,u.state="unloaded",u.actor&&(yield u.actor.sendAsync({type:"RDT",data:{type:this.type,uid:u.uid,source:this.id}}))}))}}function Dn(T){return T.type==="GeometryCollection"?T.geometries.map((u=>u.coordinates)).flat(1/0):T.coordinates.flat(1/0)}function wn(T){const u=new Zt;let m;switch(T.type){case"FeatureCollection":m=T.features.map((M=>Dn(M.geometry))).flat(1/0);break;case"Feature":m=Dn(T.geometry);break;default:m=Dn(T)}if(m.length==0)return u;for(let M=0;M<m.length-1;M+=2)u.extend([m[M],m[M+1]]);return u}class qn extends a.E{constructor(u,m,M,O){super(),this.id=u,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:m.data},this.actor=M.getActor(),this.setEventedParent(O),this._data=typeof m.data=="string"?{url:m.data}:{geojson:m.data},this._options=a.e({},m),this._collectResourceTiming=m.collectResourceTiming,m.maxzoom!==void 0&&(this.maxzoom=m.maxzoom),m.type&&(this.type=m.type),m.attribution&&(this.attribution=m.attribution),this.promoteId=m.promoteId,m.clusterMaxZoom!==void 0&&this.maxzoom<=m.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${m.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:m.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(m.buffer!==void 0?m.buffer:128),tolerance:this._pixelsToTileUnits(m.tolerance!==void 0?m.tolerance:.375),extent:a.a4,maxZoom:this.maxzoom,lineMetrics:m.lineMetrics||!1,generateId:m.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(m.clusterMaxZoom),minPoints:Math.max(2,m.clusterMinPoints||2),extent:a.a4,radius:this._pixelsToTileUnits(m.clusterRadius||50),log:!1,generateId:m.generateId||!1},clusterProperties:m.clusterProperties,filter:m.filter},m.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(u){return u*(a.a4/this.tileSize)}_getClusterMaxZoom(u){const m=u?Math.round(u):this.maxzoom-1;return Number.isInteger(u)||u===void 0||a.w(`Integer expected for option 'clusterMaxZoom': provided value "${u}" rounded to "${m}"`),m}load(){return a._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(u){this.map=u,this.load()}setData(u,m){this._data=typeof u=="string"?{url:u}:{geojson:u},this._pendingWorkerUpdate={data:u};const M=this._updateWorkerData();return m?M:this}updateData(u,m){this._pendingWorkerUpdate.diff=a.a5(this._pendingWorkerUpdate.diff,u);const M=this._updateWorkerData();return m?M:this}getData(){return a._(this,void 0,void 0,(function*(){const u=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:u})}))}getBounds(){return a._(this,void 0,void 0,(function*(){return wn(yield this.getData())}))}setClusterOptions(u){return this.workerOptions.cluster=u.cluster,u.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(u.clusterRadius)),u.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(u.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(u){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:u,source:this.id}})}getClusterChildren(u){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:u,source:this.id}})}getClusterLeaves(u,m,M){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:u,limit:m,offset:M}})}_updateWorkerData(){return a._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void a.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:u,diff:m}=this._pendingWorkerUpdate,M=a.e({type:this.type},this.workerOptions);u?(typeof u=="string"?(M.request=this.map._requestManager.transformRequest(I.resolveURL(u),"Source"),M.request.collectResourceTiming=this._collectResourceTiming):M.data=u,this._pendingWorkerUpdate.data=void 0):m&&(M.dataDiff=m,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new a.l("dataloading",{dataType:"source"}));try{const O=yield this.actor.sendAsync({type:"LD",data:M});if(this._isUpdatingWorker=!1,this._removed||O.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));O.applyDiff?this._applyDiff(m):this._data={geojson:O.data};let D=null;O.resourceTiming&&O.resourceTiming[this.id]&&(D=O.resourceTiming[this.id].slice(0));const U={dataType:"source"};this._collectResourceTiming&&D&&D.length>0&&a.e(U,{resourceTiming:D}),this.fire(new a.l("data",Object.assign(Object.assign({},U),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},U),{sourceDataType:"content",shouldReloadTileOptions:this._getShouldReloadTileOptions(m)})))}catch(O){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(O))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_applyDiff(u){const m=typeof this.promoteId=="string"?this.promoteId:void 0;this._data.url||this._data.updateable||!a.a6(this._data.geojson,m)||(this._data={updateable:a.a7(this._data.geojson,m)}),u&&this._data.updateable?a.a8(this._data.updateable,u,m):a.w("Cannot apply GeoJSONSource#updateData due to internal error")}_getShouldReloadTileOptions(u){if(this._options.cluster||!u||u.removeAll)return;const{add:m=[],update:M=[],remove:O=[]}=u||{},D=new Set([...M.map((U=>U.id)),...O]);for(const U of D.values())if(typeof U!="number"&&this.promoteId==null)return void a.w(`GeoJSONSource "${this.id}": updateData is slower when using string GeoJSON feature IDs (e.g. "${U}"). Consider using promoteId or numeric IDs for better performance.`);return{nextBounds:[...M.map((U=>U.newGeometry)),...m.map((U=>U.geometry))].filter(Boolean).map((U=>wn(U))),prevIds:D}}shouldReloadTile(u,{nextBounds:m,prevIds:M}){if(!u.latestFeatureIndex)return u.state!=="unloaded";const O=u.latestFeatureIndex.loadVTLayers();for(let q=0;q<u.latestFeatureIndex.featureIndexArray.length;q++){const oe=u.latestFeatureIndex.featureIndexArray.get(q),le=O[a.a9].feature(oe.featureIndex),me=u.latestFeatureIndex.getId(le,a.a9);if(M.has(me))return!0}const{buffer:D,extent:U}=this.workerOptions.geojsonVtOptions,G=(function({x:q,y:oe,z:le},me=0){const pe=a.a2((q-me)/Math.pow(2,le)),xe=a.a3((oe+1+me)/Math.pow(2,le)),Le=a.a2((q+1+me)/Math.pow(2,le)),Ve=a.a3((oe-me)/Math.pow(2,le));return new Zt([pe,xe],[Le,Ve])})(u.tileID.canonical,D/U);for(const q of m)if(G.intersects(q))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(u){return a._(this,void 0,void 0,(function*(){const m=u.actor?"RT":"LT";u.actor=this.actor;const M={type:this.type,uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};u.abortController=new AbortController;const O=yield this.actor.sendAsync({type:m,data:M},u.abortController);delete u.abortController,u.unloadVectorData(),u.aborted||u.loadVectorData(O,this.map.painter,m==="RT")}))}abortTile(u){return a._(this,void 0,void 0,(function*(){u.abortController&&(u.abortController.abort(),delete u.abortController),u.aborted=!0}))}unloadTile(u){return a._(this,void 0,void 0,(function*(){u.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:u.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class En extends a.E{constructor(u,m,M,O){super(),this.flippedWindingOrder=!1,this.id=u,this.dispatcher=M,this.coordinates=m.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(O),this.options=m}load(u){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const m=yield W.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,m&&m.data&&(this.image=m.data,u&&(this.coordinates=u),this._finishLoading())}catch(m){this._request=null,this._loaded=!0,this.fire(new a.k(m))}}))}loaded(){return this._loaded}updateImage(u){return u.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=u.url,this.load(u.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(u){this.map=u,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(u){this.coordinates=u;const m=u.map(a.aa.fromLngLat);var M;return this.tileID=(function(O){const D=a.ab.fromPoints(O),U=D.width(),G=D.height(),q=Math.max(U,G),oe=Math.max(0,Math.floor(-Math.log(q)/Math.LN2)),le=Math.pow(2,oe);return new a.ad(oe,Math.floor((D.minX+D.maxX)/2*le),Math.floor((D.minY+D.maxY)/2*le))})(m),this.terrainTileRanges=this._getOverlappingTileRanges(m),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=m.map((O=>this.tileID.getTilePoint(O)._round())),this.flippedWindingOrder=((M=this.tileCoords)[1].x-M[0].x)*(M[2].y-M[0].y)-(M[1].y-M[0].y)*(M[2].x-M[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const u=this.map.painter.context,m=u.gl;this.texture||(this.texture=new a.T(u,this.image,m.RGBA),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE));let M=!1;for(const O in this.tiles){const D=this.tiles[O];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,M=!0)}M&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(u){return a._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={}):u.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(u){const{minX:m,minY:M,maxX:O,maxY:D}=a.ab.fromPoints(u),U={};for(let G=0;G<=a.ac;G++){const q=Math.pow(2,G),oe=Math.floor(m*q),le=Math.floor(M*q),me=Math.floor(O*q),pe=Math.floor(D*q);U[G]={minTileX:oe,minTileY:le,maxTileX:me,maxTileY:pe}}return U}}class wt extends En{constructor(u,m,M,O){super(u,m,M,O),this.roundZoom=!0,this.type="video",this.options=m}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1;const u=this.options;this.urls=[];for(const m of u.urls)this.urls.push(this.map._requestManager.transformRequest(m,"Source").url);try{const m=yield a.ae(this.urls);if(this._loaded=!0,!m)return;this.video=m,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(m){this.fire(new a.k(m))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(u){if(this.video){const m=this.video.seekable;u<m.start(0)||u>m.end(0)?this.fire(new a.k(new a.af(`sources.${this.id}`,null,`Playback for this video can be set only between the ${m.start(0)} and ${m.end(0)}-second mark.`))):this.video.currentTime=u}}getVideo(){return this.video}onAdd(u){this.map||(this.map=u,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const u=this.map.painter.context,m=u.gl;this.texture?this.video.paused||(this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE),m.texSubImage2D(m.TEXTURE_2D,0,0,0,m.RGBA,m.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(u,this.video,m.RGBA),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE));let M=!1;for(const O in this.tiles){const D=this.tiles[O];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,M=!0)}M&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class be extends En{constructor(u,m,M,O){super(u,m,M,O),m.coordinates?Array.isArray(m.coordinates)&&m.coordinates.length===4&&!m.coordinates.some((D=>!Array.isArray(D)||D.length!==2||D.some((U=>typeof U!="number"))))||this.fire(new a.k(new a.af(`sources.${u}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.k(new a.af(`sources.${u}`,null,'missing required property "coordinates"'))),m.animate&&typeof m.animate!="boolean"&&this.fire(new a.k(new a.af(`sources.${u}`,null,'optional "animate" property must be a boolean value'))),m.canvas?typeof m.canvas=="string"||m.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.af(`sources.${u}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.k(new a.af(`sources.${u}`,null,'missing required property "canvas"'))),this.options=m,this.animate=m.animate===void 0||m.animate}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(u){this.map=u,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let u=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,u=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,u=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const m=this.map.painter.context,M=m.gl;this.texture?(u||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.T(m,this.canvas,M.RGBA,{premultiply:!0});let O=!1;for(const D in this.tiles){const U=this.tiles[D];U.state!=="loaded"&&(U.state="loaded",U.texture=this.texture,O=!0)}O&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const u of[this.canvas.width,this.canvas.height])if(isNaN(u)||u<=0)return!0;return!1}}const re={},ce=T=>{switch(T){case"geojson":return qn;case"image":return En;case"raster":return fi;case"raster-dem":return Rn;case"vector":return Ln;case"video":return wt;case"canvas":return be}return re[T]},Pe="RTLPluginLoaded";class tt extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Ye()}_syncState(u){return this.status=u,this.dispatcher.broadcast("SRPS",{pluginStatus:u,pluginURL:this.url}).catch((m=>{throw this.status="error",m}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(u){return a._(this,arguments,void 0,(function*(m,M=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=I.resolveURL(m),!this.url)throw new Error(`requested url ${m} is invalid`);if(this.status==="unavailable"){if(!M)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return a._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(Pe))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let xt=null;function It(){return xt||(xt=new tt),xt}var _n,Xe;(function(T){T[T.Base=0]="Base",T[T.Parent=1]="Parent"})(_n||(_n={})),(function(T){T[T.Departing=0]="Departing",T[T.Incoming=1]="Incoming"})(Xe||(Xe={}));class ae{constructor(u,m){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=u,this.uid=a.ag(),this.uses=0,this.tileSize=m,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(u){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(u||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:u,fadingDirection:m,fadingParentID:M,fadeEndTime:O}){this.resetFadeLogic(),this.fadingRole=u,this.fadingDirection=m,this.fadingParentID=M,this.fadeEndTime=O}setSelfFadeLogic(u){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=u}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=K(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(u){this.demTexture&&u.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(u,m,M){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",u){u.featureIndex&&(this.latestFeatureIndex=u.featureIndex,u.rawTileData?(this.latestRawTileData=u.rawTileData,this.latestFeatureIndex.rawTileData=u.rawTileData,this.latestFeatureIndex.encoding=u.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=u.collisionBoxArray,this.buckets=(function(O,D){const U={};if(!D)return U;for(const G of O){const q=G.layerIds.map((oe=>D.getLayer(oe))).filter(Boolean);if(q.length!==0){G.layers=q,G.stateDependentLayerIds&&(G.stateDependentLayers=G.stateDependentLayerIds.map((oe=>q.filter((le=>le.id===oe))[0])));for(const oe of q)U[oe.id]=G}}return U})(u.buckets,m?.style),this.hasSymbolBuckets=!1;for(const O in this.buckets){const D=this.buckets[O];if(D instanceof a.ai){if(this.hasSymbolBuckets=!0,!M)break;D.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const O in this.buckets){const D=this.buckets[O];if(D instanceof a.ai&&D.hasRTLText){this.hasRTLText=!0,It().lazyLoad();break}}this.queryPadding=0;for(const O in this.buckets){const D=this.buckets[O];this.queryPadding=Math.max(this.queryPadding,m.style.getLayer(O).queryRadius(D))}u.imageAtlas&&(this.imageAtlas=u.imageAtlas),u.glyphAtlasImage&&(this.glyphAtlasImage=u.glyphAtlasImage),this.dashPositions=u.dashPositions}else this.collisionBoxArray=new a.ah}unloadVectorData(){for(const u in this.buckets)this.buckets[u].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(u){return this.buckets[u.id]}upload(u){for(const M in this.buckets){const O=this.buckets[M];O.uploadPending()&&O.upload(u)}const m=u.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new a.T(u,this.imageAtlas.image,m.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(u,this.glyphAtlasImage,m.ALPHA),this.glyphAtlasImage=null)}prepare(u){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(u,this.imageAtlasTexture)}queryRenderedFeatures(u,m,M,O,D,U,G,q,oe,le,me){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:O,cameraQueryGeometry:D,scale:U,tileSize:this.tileSize,pixelPosMatrix:le,transform:q,params:G,queryPadding:this.queryPadding*oe,getElevation:me},u,m,M):{}}querySourceFeatures(u,m){const M=this.latestFeatureIndex;if(!M||!M.rawTileData)return;const O=M.loadVTLayers(),D=m&&m.sourceLayer?m.sourceLayer:"",U=O[a.a9]||O[D];if(!U)return;const G=a.aj(m?.filter,m?.globalState),{z:q,x:oe,y:le}=this.tileID.canonical,me={z:q,x:oe,y:le};for(let pe=0;pe<U.length;pe++){const xe=U.feature(pe);if(G.needGeometry){const He=a.ak(xe,!0);if(!G.filter(new a.H(this.tileID.overscaledZ),He,this.tileID.canonical))continue}else if(!G.filter(new a.H(this.tileID.overscaledZ),xe))continue;const Le=M.getId(xe,D),Ve=new a.al(xe,q,oe,le,Le);Ve.tile=me,u.push(Ve)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(u){const m=this.expirationTime;if(u.cacheControl){const M=a.am(u.cacheControl);M["max-age"]&&(this.expirationTime=Date.now()+1e3*M["max-age"])}else u.expires&&(this.expirationTime=new Date(u.expires).getTime());if(this.expirationTime){const M=Date.now();let O=!1;if(this.expirationTime>M)O=!1;else if(m)if(this.expirationTime<m)O=!0;else{const D=this.expirationTime-m;D?this.expirationTime=M+Math.max(D,3e4):O=!0}else O=!0;O?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(u,m){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(u).length===0)return;const M=this.latestFeatureIndex.loadVTLayers();for(const O in this.buckets){if(!m.style.hasLayer(O))continue;const D=this.buckets[O],U=D.layers[0].sourceLayer||a.a9,G=M[U],q=u[U];if(!G||!q||Object.keys(q).length===0)continue;D.update(q,G,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const oe=m&&m.style&&m.style.getLayer(O);oe&&(this.queryPadding=Math.max(this.queryPadding,oe.queryRadius(D)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<K()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(u){this.symbolFadeHoldUntil=K()+u}setDependencies(u,m){const M={};for(const O of m)M[O]=!0;this.dependencies[u]=M}hasDependency(u,m){for(const M of u){const O=this.dependencies[M];if(O){for(const D of m)if(O[D])return!0}}return!1}}class he{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(u,m,M){const O=String(m);if(this.stateChanges[u]=this.stateChanges[u]||{},this.stateChanges[u][O]=this.stateChanges[u][O]||{},a.e(this.stateChanges[u][O],M),this.deletedStates[u]===null){this.deletedStates[u]={};for(const D in this.state[u])D!==O&&(this.deletedStates[u][D]=null)}else if(this.deletedStates[u]&&this.deletedStates[u][O]===null){this.deletedStates[u][O]={};for(const D in this.state[u][O])M[D]||(this.deletedStates[u][O][D]=null)}else for(const D in M)this.deletedStates[u]&&this.deletedStates[u][O]&&this.deletedStates[u][O][D]===null&&delete this.deletedStates[u][O][D]}removeFeatureState(u,m,M){if(this.deletedStates[u]===null)return;const O=String(m);if(this.deletedStates[u]=this.deletedStates[u]||{},M&&m!==void 0)this.deletedStates[u][O]!==null&&(this.deletedStates[u][O]=this.deletedStates[u][O]||{},this.deletedStates[u][O][M]=null);else if(m!==void 0)if(this.stateChanges[u]&&this.stateChanges[u][O])for(M in this.deletedStates[u][O]={},this.stateChanges[u][O])this.deletedStates[u][O][M]=null;else this.deletedStates[u][O]=null;else this.deletedStates[u]=null}getState(u,m){const M=String(m),O=a.e({},(this.state[u]||{})[M],(this.stateChanges[u]||{})[M]);if(this.deletedStates[u]===null)return{};if(this.deletedStates[u]){const D=this.deletedStates[u][m];if(D===null)return{};for(const U in D)delete O[U]}return O}initializeTileState(u,m){u.setFeatureState(this.state,m)}coalesceChanges(u,m){const M={};for(const O in this.stateChanges){this.state[O]=this.state[O]||{};const D={};for(const U in this.stateChanges[O])this.state[O][U]||(this.state[O][U]={}),a.e(this.state[O][U],this.stateChanges[O][U]),D[U]=this.state[O][U];M[O]=D}for(const O in this.deletedStates){this.state[O]=this.state[O]||{};const D={};if(this.deletedStates[O]===null)for(const U in this.state[O])D[U]={},this.state[O][U]={};else for(const U in this.deletedStates[O]){if(this.deletedStates[O][U]===null)this.state[O][U]={};else for(const G of Object.keys(this.deletedStates[O][U]))delete this.state[O][U][G];D[U]=this.state[O][U]}M[O]=M[O]||{},a.e(M[O],D)}if(this.stateChanges={},this.deletedStates={},Object.keys(M).length!==0)for(const O in u)u[O].setFeatureState(M,m)}}const C=89.25;function Ke(T,u){const m=a.an(u.lat,-a.ao,a.ao);return new a.P(a.Y(u.lng)*T,a.X(m)*T)}function $e(T,u){return new a.aa(u.x/T,u.y/T).toLngLat()}function rt(T){return T.cameraToCenterDistance*Math.min(.85*Math.tan(a.ap(90-T.pitch)),Math.tan(a.ap(C-T.pitch)))}function Re(T,u){const m=T.canonical,M=u/a.aq(m.z),O=m.x+Math.pow(2,m.z)*T.wrap,D=a.ar(new Float64Array(16));return a.O(D,D,[O*M,m.y*M,0]),a.Q(D,D,[M/a.a4,M/a.a4,1]),D}function at(T,u,m,M,O){const D=a.aa.fromLngLat(T,u),U=O*a.as(1,T.lat),G=U*Math.cos(a.ap(m)),q=Math.sqrt(U*U-G*G),oe=q*Math.sin(a.ap(-M)),le=q*Math.cos(a.ap(-M));return new a.aa(D.x+oe,D.y+le,D.z+G)}function St(T,u,m){const M=u.intersectsFrustum(T);if(!m||M===0)return M;const O=u.intersectsPlane(m);return O===0?0:M===2&&O===2?2:1}function Bt(T,u,m){let M=0;const O=(m-u)/10;for(let D=0;D<10;D++)M+=O*Math.pow(Math.cos(u+(D+.5)/10*(m-u)),T);return M}function kt(T,u){return function(m,M,O,D,U){const G=2*((T-1)/a.at(Math.cos(a.ap(C-U))/Math.cos(a.ap(C)))-1),q=Math.acos(O/D),oe=2*Bt(G-1,0,a.ap(U/2)),le=Math.min(a.ap(C),q+a.ap(U/2)),me=Bt(G-1,Math.min(le,q-a.ap(U/2)),le),pe=Math.atan(M/O),xe=Math.hypot(M,O);let Le=m;return Le+=a.at(D/xe/Math.max(.5,Math.cos(a.ap(U/2)))),Le+=G*a.at(Math.cos(pe))/2,Le-=a.at(Math.max(1,me/oe/u))/2,Le}}const sn=kt(9.314,3);function Tn(T,u){const m=(u.roundZoom?Math.round:Math.floor)(T.zoom+a.at(T.tileSize/u.tileSize));return Math.max(0,m)}function Yn(T,u){const m=T.getCameraFrustum(),M=T.getClippingPlane(),O=T.screenPointToMercatorCoordinate(T.getCameraPoint()),D=a.aa.fromLngLat(T.center,T.elevation);O.z=D.z+Math.cos(T.pitchInRadians)*T.cameraToCenterDistance/T.worldSize;const U=T.getCoveringTilesDetailsProvider(),G=U.allowVariableZoom(T,u),q=Tn(T,u),oe=u.minzoom||0,le=u.maxzoom!==void 0?u.maxzoom:T.maxZoom,me=Math.min(Math.max(0,q),le),pe=Math.pow(2,me),xe=[pe*O.x,pe*O.y,0],Le=[pe*D.x,pe*D.y,0],Ve=Math.hypot(D.x-O.x,D.y-O.y),He=Math.abs(D.z-O.z),Ze=Math.hypot(Ve,He),et=At=>({zoom:0,x:0,y:0,wrap:At,fullyVisible:!1}),lt=[],Je=[];if(T.renderWorldCopies&&U.allowWorldCopies())for(let At=1;At<=3;At++)lt.push(et(-At)),lt.push(et(At));for(lt.push(et(0));lt.length>0;){const At=lt.pop(),pt=At.x,it=At.y;let Ct=At.fullyVisible;const Nt={x:pt,y:it,z:At.zoom},Kt=U.getTileBoundingVolume(Nt,At.wrap,T.elevation,u);if(!Ct){const Sn=St(m,Kt,M);if(Sn===0)continue;Ct=Sn===2}const Ft=U.distanceToTile2d(O.x,O.y,Nt,Kt);let jt=q;G&&(jt=(u.calculateTileZoom||sn)(T.zoom+a.at(T.tileSize/u.tileSize),Ft,He,Ze,T.fov)),jt=(u.roundZoom?Math.round:Math.floor)(jt),jt=Math.max(0,jt);const pn=Math.min(jt,le);if(At.wrap=U.getWrap(D,Nt,At.wrap),At.zoom>=pn){if(At.zoom<oe)continue;const Sn=me-At.zoom,rn=xe[0]-.5-(pt<<Sn),$n=xe[1]-.5-(it<<Sn),Ni=u.reparseOverscaled?Math.max(At.zoom,jt):At.zoom;Je.push({tileID:new a.a1(At.zoom===le?Ni:At.zoom,At.wrap,At.zoom,pt,it),distanceSq:a.au([Le[0]-.5-pt,Le[1]-.5-it]),tileDistanceToCamera:Math.sqrt(rn*rn+$n*$n)})}else for(let Sn=0;Sn<4;Sn++)lt.push({zoom:At.zoom+1,x:(pt<<1)+Sn%2,y:(it<<1)+(Sn>>1),wrap:At.wrap,fullyVisible:Ct})}return Je.sort(((At,pt)=>At.distanceSq-pt.distanceSq)).map((At=>At.tileID))}const vi=a.ab.fromPoints([new a.P(0,0),new a.P(a.a4,a.a4)]);class ui extends a.E{constructor(u,m,M){super(),this.id=u,this.dispatcher=M,this.on("data",(O=>this._dataHandler(O))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((O,D,U,G)=>{const q=new(ce(D.type))(O,D,U,G);if(q.id!==O)throw new Error(`Expected Source id to be ${O} instead of ${q.id}`);return q})(u,m,M,this),this._tiles={},this._cache=new a.av(0,(O=>this._unloadTile(O))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new he,this._didEmitContent=!1,this._updated=!1}onAdd(u){this.map=u,this._maxTileCacheSize=u?u._maxTileCacheSize:null,this._maxTileCacheZoomLevels=u?u._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(u)}onRemove(u){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(u)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const u in this._tiles){const m=this._tiles[u];if(m.state!=="loaded"&&m.state!=="errored")return!1}return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const u=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,u&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(u,m,M){return a._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(u),this._tileLoaded(u,m,M)}catch(O){u.state="errored",O.status!==404?this._source.fire(new a.k(O,{tile:u})):this.update(this.transform,this.terrain)}}))}_unloadTile(u){this._source.unloadTile&&this._source.unloadTile(u)}_abortTile(u){this._source.abortTile&&this._source.abortTile(u),this._source.fire(new a.l("dataabort",{tile:u,coord:u.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(u){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const m in this._tiles){const M=this._tiles[m];M.upload(u),M.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((u=>u.tileID)).sort(Zn).map((u=>u.key))}getRenderableIds(u){const m=[];for(const M in this._tiles)this._isIdRenderable(M,u)&&m.push(this._tiles[M]);return u?m.sort(((M,O)=>{const D=M.tileID,U=O.tileID,G=new a.P(D.canonical.x,D.canonical.y)._rotate(-this.transform.bearingInRadians),q=new a.P(U.canonical.x,U.canonical.y)._rotate(-this.transform.bearingInRadians);return D.overscaledZ-U.overscaledZ||q.y-G.y||q.x-G.x})).map((M=>M.tileID.key)):m.map((M=>M.tileID)).sort(Zn).map((M=>M.key))}hasRenderableParent(u){const m=u.overscaledZ-1;if(m>=this._source.minzoom){const M=this.getLoadedTile(u.scaledTo(m));if(M)return this._isIdRenderable(M.tileID.key)}return!1}_isIdRenderable(u,m=!1){var M;return(M=this._tiles[u])===null||M===void 0?void 0:M.isRenderable(m)}reload(u,m=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const M in this._tiles)m&&this._source.shouldReloadTile&&!this._source.shouldReloadTile(this._tiles[M],m)||(u?this._reloadTile(M,"expired"):this._tiles[M].state!=="errored"&&this._reloadTile(M,"reloading"))}}_reloadTile(u,m){return a._(this,void 0,void 0,(function*(){const M=this._tiles[u];M&&(M.state!=="loading"&&(M.state=m),yield this._loadTile(M,u,m))}))}_tileLoaded(u,m,M){u.timeAdded=K(),u.selfFading&&(u.fadeEndTime=u.timeAdded+this._rasterFadeDuration),M==="expired"&&(u.refreshedUponExpiration=!0),this._setTileReloadTimer(m,u),this.getSource().type==="raster-dem"&&u.dem&&this._backfillDEM(u),this._state.initializeTileState(u,this.map?this.map.painter:null),u.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:u,coord:u.tileID}))}_backfillDEM(u){const m=this.getRenderableIds();for(let O=0;O<m.length;O++){const D=m[O];if(u.neighboringTiles&&u.neighboringTiles[D]){const U=this.getTileByID(D);M(u,U),M(U,u)}}function M(O,D){O.needsHillshadePrepare=!0,O.needsTerrainPrepare=!0;let U=D.tileID.canonical.x-O.tileID.canonical.x;const G=D.tileID.canonical.y-O.tileID.canonical.y,q=Math.pow(2,O.tileID.canonical.z),oe=D.tileID.key;U===0&&G===0||Math.abs(G)>1||(Math.abs(U)>1&&(Math.abs(U+q)===1?U+=q:Math.abs(U-q)===1&&(U-=q)),D.dem&&O.dem&&(O.dem.backfillBorder(D.dem,U,G),O.neighboringTiles&&O.neighboringTiles[oe]&&(O.neighboringTiles[oe].backfilled=!0)))}}getTile(u){return this.getTileByID(u.key)}getTileByID(u){return this._tiles[u]}_retainLoadedChildren(u,m){const M=this._getLoadedDescendents(m),O=new Set;for(const D of m){const U=M[D.key];if(!U?.length){O.add(D);continue}const G=D.overscaledZ+ui.maxOverzooming,q=U.filter((me=>me.tileID.overscaledZ<=G));if(!q.length){O.add(D);continue}const oe=Math.min(...q.map((me=>me.tileID.overscaledZ))),le=q.filter((me=>me.tileID.overscaledZ===oe)).map((me=>me.tileID));for(const me of le)u[me.key]=me;this._areDescendentsComplete(le,oe,D.overscaledZ)||O.add(D)}return O}_getLoadedDescendents(u){var m;const M={};for(const O in this._tiles){const D=this._tiles[O];if(D.hasData())for(const U of u)D.tileID.isChildOf(U)&&(M[m=U.key]||(M[m]=[])).push(D)}return M}_areDescendentsComplete(u,m,M){return u.length===1&&u[0].isOverscaled()?u[0].overscaledZ===m:Math.pow(4,m-M)===u.length}getLoadedTile(u){const m=this._tiles[u.key];return m?.hasData()?m:null}updateCacheSize(u){const m=Math.ceil(u.width/this._source.tileSize)+1,M=Math.ceil(u.height/this._source.tileSize)+1,O=Math.floor(m*M*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),D=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,O):O;this._cache.setMaxSize(D)}handleWrapJump(u){const m=Math.round((u-(this._prevLng===void 0?u:this._prevLng))/360);if(this._prevLng=u,m){const M={};for(const O in this._tiles){const D=this._tiles[O];D.tileID=D.tileID.unwrapTo(D.tileID.wrap+m),M[D.tileID.key]=D}this._tiles=M,this._resetTileReloadTimers()}}update(u,m){if(!this._sourceLoaded||this._paused)return;let M;this.transform=u,this.terrain=m,this.updateCacheSize(u),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?M=u.getVisibleUnwrappedCoordinates(this._source.tileID).map((q=>new a.a1(q.canonical.z,q.wrap,q.canonical.z,q.canonical.x,q.canonical.y))):(M=Yn(u,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?u.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:m,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(M=M.filter((q=>this._source.hasTile(q))))):M=[],this.usedForTerrain&&(M=this._addTerrainIdealTiles(M));const O=M.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,O&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const D=Tn(u,this._source),U=this._updateRetainedTiles(M,D),G=Mi(this._source.type);G&&this._rasterFadeDuration>0&&!m&&this._updateFadingTiles(M,U),G?this._cleanUpRasterTiles(U):this._cleanUpVectorTiles(U)}_cleanUpRasterTiles(u){for(const m in this._tiles)u[m]||this._removeTile(m)}_cleanUpVectorTiles(u){for(const m in this._tiles){const M=this._tiles[m];u[m]?M.clearSymbolFadeHold():M.hasSymbolBuckets?M.holdingForSymbolFade()?M.symbolFadeFinished()&&this._removeTile(m):M.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(m)}}_addTerrainIdealTiles(u){const m=[];for(const M of u)if(M.canonical.z>this._source.minzoom){const O=M.scaledTo(M.canonical.z-1);m.push(O);const D=M.scaledTo(Math.max(this._source.minzoom,Math.min(M.canonical.z,5)));m.push(D)}return u.concat(m)}releaseSymbolFadeTiles(){for(const u in this._tiles)this._tiles[u].holdingForSymbolFade()&&this._removeTile(u)}_updateRetainedTiles(u,m){var M;const O=new Set;for(const oe of u)this._addTile(oe).hasData()||O.add(oe);const D=u.reduce(((oe,le)=>(oe[le.key]=le,oe)),{}),U=this._retainLoadedChildren(D,O),G={},q=Math.max(m-ui.maxUnderzooming,this._source.minzoom);for(const oe of U){let le=this._tiles[oe.key],me=le?.wasRequested();for(let pe=oe.overscaledZ-1;pe>=q;--pe){const xe=oe.scaledTo(pe);if(G[xe.key])break;if(G[xe.key]=!0,le=this.getTile(xe),!le&&me&&(le=this._addTile(xe)),le){const Le=le.hasData();if((Le||!(!((M=this.map)===null||M===void 0)&&M.cancelPendingTileRequestsWhileZooming)||me)&&(D[xe.key]=xe),me=le.wasRequested(),Le)break}}}return D}_updateFadingTiles(u,m){const M=K(),O=a.aw(u);for(const D of u){const U=this._tiles[D.key];U.fadingDirection!==Xe.Departing&&U.fadeOpacity!==0||U.resetFadeLogic(),this._updateFadingAncestor(U,m,M)||this._updateFadingDescendents(U,m,M)||this._updateFadingEdge(U,O,M)||U.resetFadeLogic()}}_updateFadingAncestor(u,m,M){if(!u.hasData())return!1;const{tileID:O,fadingRole:D,fadingDirection:U,fadingParentID:G}=u;if(D===_n.Base&&U===Xe.Incoming&&G)return m[G.key]=G,!0;const q=Math.max(O.overscaledZ-this._maxFadingAncestorLevels,this._source.minzoom);for(let oe=O.overscaledZ-1;oe>=q;oe--){const le=O.scaledTo(oe),me=this.getLoadedTile(le);if(me)return u.setCrossFadeLogic({fadingRole:_n.Base,fadingDirection:Xe.Incoming,fadingParentID:me.tileID,fadeEndTime:M+this._rasterFadeDuration}),me.setCrossFadeLogic({fadingRole:_n.Parent,fadingDirection:Xe.Departing,fadeEndTime:M+this._rasterFadeDuration}),m[le.key]=le,!0}return!1}_updateFadingDescendents(u,m,M){if(!u.hasData())return!1;const O=u.tileID.children(this._source.maxzoom);let D=this._updateFadingChildren(u,O,m,M);if(D)return!0;for(const U of O){const G=U.children(this._source.maxzoom);this._updateFadingChildren(u,G,m,M)&&(D=!0)}return D}_updateFadingChildren(u,m,M,O){if(m[0].overscaledZ>=this._source.maxzoom)return!1;let D=!1;for(const U of m){const G=this.getLoadedTile(U);if(!G)continue;const{fadingRole:q,fadingDirection:oe,fadingParentID:le}=G;q===_n.Base&&oe===Xe.Departing&&le||(G.setCrossFadeLogic({fadingRole:_n.Base,fadingDirection:Xe.Departing,fadingParentID:u.tileID,fadeEndTime:O+this._rasterFadeDuration}),u.setCrossFadeLogic({fadingRole:_n.Parent,fadingDirection:Xe.Incoming,fadeEndTime:O+this._rasterFadeDuration})),M[U.key]=U,D=!0}return D}_updateFadingEdge(u,m,M){const O=u.tileID;return!!u.selfFading||!u.hasData()&&!!m.has(O)&&(u.setSelfFadeLogic(M+this._rasterFadeDuration),!0)}_addTile(u){let m=this._tiles[u.key];if(m)return m;m=this._cache.getAndRemove(u),m&&(m.resetFadeLogic(),this._setTileReloadTimer(u.key,m),m.tileID=u,this._state.initializeTileState(m,this.map?this.map.painter:null));const M=m;return m||(m=new ae(u,this._source.tileSize*u.overscaleFactor()),this._loadTile(m,u.key,m.state)),m.uses++,this._tiles[u.key]=m,M||this._source.fire(new a.l("dataloading",{tile:m,coord:m.tileID,dataType:"source"})),m}_setTileReloadTimer(u,m){this._clearTileReloadTimer(u);const M=m.getExpiryTimeout();M&&(this._timers[u]=setTimeout((()=>{this._reloadTile(u,"expired"),delete this._timers[u]}),M))}_clearTileReloadTimer(u){const m=this._timers[u];m&&(clearTimeout(m),delete this._timers[u])}_resetTileReloadTimers(){for(const u in this._timers)clearTimeout(this._timers[u]),delete this._timers[u];for(const u in this._tiles)this._setTileReloadTimer(u,this._tiles[u])}refreshTiles(u){for(const m in this._tiles)(this._isIdRenderable(m)||this._tiles[m].state=="errored")&&u.some((M=>M.equals(this._tiles[m].tileID.canonical)))&&this._reloadTile(m,"expired")}_removeTile(u){const m=this._tiles[u];m&&(m.uses--,delete this._tiles[u],this._clearTileReloadTimer(u),m.uses>0||(m.hasData()&&m.state!=="reloading"?this._cache.add(m.tileID,m,m.getExpiryTimeout()):(m.aborted=!0,this._abortTile(m),this._unloadTile(m))))}_dataHandler(u){u.dataType==="source"&&(u.sourceDataType!=="metadata"?u.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(u.sourceDataChanged,u.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const u in this._tiles)this._removeTile(u);this._cache.reset()}tilesIn(u,m,M){const O=[],D=this.transform;if(!D)return O;const U=D.getCoveringTilesDetailsProvider().allowWorldCopies(),G=M?D.getCameraQueryGeometry(u):u,q=xe=>D.screenPointToMercatorCoordinate(xe,this.terrain),oe=this.transformBbox(u,q,!U),le=this.transformBbox(G,q,!U),me=this.getIds(),pe=a.ab.fromPoints(le);for(let xe=0;xe<me.length;xe++){const Le=this._tiles[me[xe]];if(Le.holdingForSymbolFade())continue;const Ve=U?[Le.tileID]:[Le.tileID.unwrapTo(-1),Le.tileID.unwrapTo(0)],He=Math.pow(2,D.zoom-Le.tileID.overscaledZ),Ze=m*Le.queryPadding*a.a4/Le.tileSize/He;for(const et of Ve){const lt=pe.map((Je=>et.getTilePoint(new a.aa(Je.x,Je.y))));if(lt.expandBy(Ze),lt.intersects(vi)){const Je=oe.map((pt=>et.getTilePoint(pt))),At=le.map((pt=>et.getTilePoint(pt)));O.push({tile:Le,tileID:U?et:et.unwrapTo(0),queryGeometry:Je,cameraQueryGeometry:At,scale:He})}}}return O}transformBbox(u,m,M){let O=u.map(m);if(M){const D=a.ab.fromPoints(u);D.shrinkBy(.001*Math.min(D.width(),D.height()));const U=D.map(m);a.ab.fromPoints(O).covers(U)||(O=O.map((G=>G.x>.5?new a.aa(G.x-1,G.y,G.z):G)))}return O}getVisibleCoordinates(u){const m=this.getRenderableIds(u).map((M=>this._tiles[M].tileID));return this.transform&&this.transform.populateCache(m),m}hasTransition(){if(this._source.hasTransition())return!0;if(Mi(this._source.type)&&this._rasterFadeDuration>0){const u=K();for(const m in this._tiles)if(this._tiles[m].fadeEndTime>=u)return!0}return!1}setRasterFadeDuration(u){this._rasterFadeDuration=u}setFeatureState(u,m,M){this._state.updateState(u=u||a.a9,m,M)}removeFeatureState(u,m,M){this._state.removeFeatureState(u=u||a.a9,m,M)}getFeatureState(u,m){return this._state.getState(u=u||a.a9,m)}setDependencies(u,m,M){const O=this._tiles[u];O&&O.setDependencies(m,M)}reloadTilesForDependencies(u,m){for(const M in this._tiles)this._tiles[M].hasDependency(u,m)&&this._reloadTile(M,"reloading");this._cache.filter((M=>!M.hasDependency(u,m)))}}function Zn(T,u){const m=Math.abs(2*T.wrap)-+(T.wrap<0),M=Math.abs(2*u.wrap)-+(u.wrap<0);return T.overscaledZ-u.overscaledZ||M-m||u.canonical.y-T.canonical.y||u.canonical.x-T.canonical.x}function Mi(T){return T==="raster"||T==="image"||T==="video"}ui.maxUnderzooming=10,ui.maxOverzooming=3;class nn{constructor(u,m){this.reset(u,m)}reset(u,m){this.points=u||[],this._distances=[0];for(let M=1;M<this.points.length;M++)this._distances[M]=this._distances[M-1]+this.points[M].dist(this.points[M-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(m||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(u){if(this.points.length===1)return this.points[0];u=a.an(u,0,1);let m=1,M=this._distances[m];const O=u*this.paddedLength+this.padding;for(;M<O&&m<this._distances.length;)M=this._distances[++m];const D=m-1,U=this._distances[D],G=M-U,q=G>0?(O-U)/G:0;return this.points[D].mult(1-q).add(this.points[m].mult(q))}}function $i(T,u){let m=!0;return T==="always"||T!=="never"&&u!=="never"||(m=!1),m}class bi{constructor(u,m,M){const O=this.boxCells=[],D=this.circleCells=[];this.xCellCount=Math.ceil(u/M),this.yCellCount=Math.ceil(m/M);for(let U=0;U<this.xCellCount*this.yCellCount;U++)O.push([]),D.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=u,this.height=m,this.xScale=this.xCellCount/u,this.yScale=this.yCellCount/m,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(u,m,M,O,D){this._forEachCell(m,M,O,D,this._insertBoxCell,this.boxUid++),this.boxKeys.push(u),this.bboxes.push(m),this.bboxes.push(M),this.bboxes.push(O),this.bboxes.push(D)}insertCircle(u,m,M,O){this._forEachCell(m-O,M-O,m+O,M+O,this._insertCircleCell,this.circleUid++),this.circleKeys.push(u),this.circles.push(m),this.circles.push(M),this.circles.push(O)}_insertBoxCell(u,m,M,O,D,U){this.boxCells[D].push(U)}_insertCircleCell(u,m,M,O,D,U){this.circleCells[D].push(U)}_query(u,m,M,O,D,U,G){if(M<0||u>this.width||O<0||m>this.height)return[];const q=[];if(u<=0&&m<=0&&this.width<=M&&this.height<=O){if(D)return[{key:null,x1:u,y1:m,x2:M,y2:O}];for(let oe=0;oe<this.boxKeys.length;oe++)q.push({key:this.boxKeys[oe],x1:this.bboxes[4*oe],y1:this.bboxes[4*oe+1],x2:this.bboxes[4*oe+2],y2:this.bboxes[4*oe+3]});for(let oe=0;oe<this.circleKeys.length;oe++){const le=this.circles[3*oe],me=this.circles[3*oe+1],pe=this.circles[3*oe+2];q.push({key:this.circleKeys[oe],x1:le-pe,y1:me-pe,x2:le+pe,y2:me+pe})}}else this._forEachCell(u,m,M,O,this._queryCell,q,{hitTest:D,overlapMode:U,seenUids:{box:{},circle:{}}},G);return q}query(u,m,M,O){return this._query(u,m,M,O,!1,null)}hitTest(u,m,M,O,D,U){return this._query(u,m,M,O,!0,D,U).length>0}hitTestCircle(u,m,M,O,D){const U=u-M,G=u+M,q=m-M,oe=m+M;if(G<0||U>this.width||oe<0||q>this.height)return!1;const le=[];return this._forEachCell(U,q,G,oe,this._queryCellCircle,le,{hitTest:!0,overlapMode:O,circle:{x:u,y:m,radius:M},seenUids:{box:{},circle:{}}},D),le.length>0}_queryCell(u,m,M,O,D,U,G,q){const{seenUids:oe,hitTest:le,overlapMode:me}=G,pe=this.boxCells[D];if(pe!==null){const Le=this.bboxes;for(const Ve of pe)if(!oe.box[Ve]){oe.box[Ve]=!0;const He=4*Ve,Ze=this.boxKeys[Ve];if(u<=Le[He+2]&&m<=Le[He+3]&&M>=Le[He+0]&&O>=Le[He+1]&&(!q||q(Ze))&&(!le||!$i(me,Ze.overlapMode))&&(U.push({key:Ze,x1:Le[He],y1:Le[He+1],x2:Le[He+2],y2:Le[He+3]}),le))return!0}}const xe=this.circleCells[D];if(xe!==null){const Le=this.circles;for(const Ve of xe)if(!oe.circle[Ve]){oe.circle[Ve]=!0;const He=3*Ve,Ze=this.circleKeys[Ve];if(this._circleAndRectCollide(Le[He],Le[He+1],Le[He+2],u,m,M,O)&&(!q||q(Ze))&&(!le||!$i(me,Ze.overlapMode))){const et=Le[He],lt=Le[He+1],Je=Le[He+2];if(U.push({key:Ze,x1:et-Je,y1:lt-Je,x2:et+Je,y2:lt+Je}),le)return!0}}}return!1}_queryCellCircle(u,m,M,O,D,U,G,q){const{circle:oe,seenUids:le,overlapMode:me}=G,pe=this.boxCells[D];if(pe!==null){const Le=this.bboxes;for(const Ve of pe)if(!le.box[Ve]){le.box[Ve]=!0;const He=4*Ve,Ze=this.boxKeys[Ve];if(this._circleAndRectCollide(oe.x,oe.y,oe.radius,Le[He+0],Le[He+1],Le[He+2],Le[He+3])&&(!q||q(Ze))&&!$i(me,Ze.overlapMode))return U.push(!0),!0}}const xe=this.circleCells[D];if(xe!==null){const Le=this.circles;for(const Ve of xe)if(!le.circle[Ve]){le.circle[Ve]=!0;const He=3*Ve,Ze=this.circleKeys[Ve];if(this._circlesCollide(Le[He],Le[He+1],Le[He+2],oe.x,oe.y,oe.radius)&&(!q||q(Ze))&&!$i(me,Ze.overlapMode))return U.push(!0),!0}}}_forEachCell(u,m,M,O,D,U,G,q){const oe=this._convertToXCellCoord(u),le=this._convertToYCellCoord(m),me=this._convertToXCellCoord(M),pe=this._convertToYCellCoord(O);for(let xe=oe;xe<=me;xe++)for(let Le=le;Le<=pe;Le++)if(D.call(this,u,m,M,O,this.xCellCount*Le+xe,U,G,q))return}_convertToXCellCoord(u){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(u*this.xScale)))}_convertToYCellCoord(u){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(u*this.yScale)))}_circlesCollide(u,m,M,O,D,U){const G=O-u,q=D-m,oe=M+U;return oe*oe>G*G+q*q}_circleAndRectCollide(u,m,M,O,D,U,G){const q=(U-O)/2,oe=Math.abs(u-(O+q));if(oe>q+M)return!1;const le=(G-D)/2,me=Math.abs(m-(D+le));if(me>le+M)return!1;if(oe<=q||me<=le)return!0;const pe=oe-q,xe=me-le;return pe*pe+xe*xe<=M*M}}function to(T,u,m){const M=a.N();if(!T){const{vecSouth:me,vecEast:pe}=an(u),xe=f();xe[0]=pe[0],xe[1]=pe[1],xe[2]=me[0],xe[3]=me[1],O=xe,(le=(U=(D=xe)[0])*(oe=D[3])-(q=D[2])*(G=D[1]))&&(O[0]=oe*(le=1/le),O[1]=-G*le,O[2]=-q*le,O[3]=U*le),M[0]=xe[0],M[1]=xe[1],M[4]=xe[2],M[5]=xe[3]}var O,D,U,G,q,oe,le;return a.Q(M,M,[1/m,1/m,1]),M}function tr(T,u,m,M){if(T){const O=a.N();if(!u){const{vecSouth:D,vecEast:U}=an(m);O[0]=U[0],O[1]=U[1],O[4]=D[0],O[5]=D[1]}return a.Q(O,O,[M,M,1]),O}return m.pixelsToClipSpaceMatrix}function an(T){const u=Math.cos(T.rollInRadians),m=Math.sin(T.rollInRadians),M=Math.cos(T.pitchInRadians),O=Math.cos(T.bearingInRadians),D=Math.sin(T.bearingInRadians),U=a.aB();U[0]=-O*M*m-D*u,U[1]=-D*M*m+O*u;const G=a.aC(U);G<1e-9?a.aD(U):a.aE(U,U,1/G);const q=a.aB();q[0]=O*M*u-D*m,q[1]=D*M*u+O*m;const oe=a.aC(q);return oe<1e-9?a.aD(q):a.aE(q,q,1/oe),{vecEast:q,vecSouth:U}}function Kn(T,u,m,M){let O;M?(O=[T,u,M(T,u),1],a.aG(O,O,m)):(O=[T,u,0,1],Xo(O,O,m));const D=O[3];return{point:new a.P(O[0]/D,O[1]/D),signedDistanceFromCamera:D,isOccluded:!1}}function ii(T,u){return .5+T/u*.5}function nr(T,u){return T.x>=-u[0]&&T.x<=u[0]&&T.y>=-u[1]&&T.y<=u[1]}function Su(T,u,m,M,O,D,U,G,q,oe,le,me,pe){const xe=m?T.textSizeData:T.iconSizeData,Le=a.ax(xe,u.transform.zoom),Ve=[256/u.width*2+1,256/u.height*2+1],He=m?T.text.dynamicLayoutVertexArray:T.icon.dynamicLayoutVertexArray;He.clear();const Ze=T.lineVertexArray,et=m?T.text.placedSymbolArray:T.icon.placedSymbolArray,lt=u.transform.width/u.transform.height;let Je=!1;for(let At=0;At<et.length;At++){const pt=et.get(At);if(pt.hidden||pt.writingMode===a.ay.vertical&&!Je){us(pt.numGlyphs,He);continue}Je=!1;const it=new a.P(pt.anchorX,pt.anchorY),Ct={getElevation:pe,pitchedLabelPlaneMatrix:M,lineVertexArray:Ze,pitchWithMap:D,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:u.transform,tileAnchorPoint:it,unwrappedTileID:q,width:oe,height:le,translation:me},Nt=ma(pt.anchorX,pt.anchorY,Ct);if(!nr(Nt.point,Ve)){us(pt.numGlyphs,He);continue}const Kt=ii(u.transform.cameraToCenterDistance,Nt.signedDistanceFromCamera),Ft=a.az(xe,Le,pt),jt=D?Ft*u.transform.getPitchedTextCorrection(pt.anchorX,pt.anchorY,q)/Kt:Ft*Kt,pn=Ba({projectionContext:Ct,pitchedLabelPlaneMatrixInverse:O,symbol:pt,fontSize:jt,flip:!1,keepUpright:U,glyphOffsetArray:T.glyphOffsetArray,dynamicLayoutVertexArray:He,aspectRatio:lt,rotateToLine:G});Je=pn.useVertical,(pn.notEnoughRoom||Je||pn.needsFlipping&&Ba({projectionContext:Ct,pitchedLabelPlaneMatrixInverse:O,symbol:pt,fontSize:jt,flip:!0,keepUpright:U,glyphOffsetArray:T.glyphOffsetArray,dynamicLayoutVertexArray:He,aspectRatio:lt,rotateToLine:G}).notEnoughRoom)&&us(pt.numGlyphs,He)}m?T.text.dynamicLayoutVertexBuffer.updateData(He):T.icon.dynamicLayoutVertexBuffer.updateData(He)}function Ms(T,u,m,M,O,D,U,G){const q=D.glyphStartIndex+D.numGlyphs,oe=D.lineStartIndex,le=D.lineStartIndex+D.lineLength,me=u.getoffsetX(D.glyphStartIndex),pe=u.getoffsetX(q-1),xe=mr(T*me,m,M,O,D.segment,oe,le,G,U);if(!xe)return null;const Le=mr(T*pe,m,M,O,D.segment,oe,le,G,U);return Le?G.projectionCache.anyProjectionOccluded?null:{first:xe,last:Le}:null}function Si(T,u,m,M){return T===a.ay.horizontal&&Math.abs(m.y-u.y)>Math.abs(m.x-u.x)*M?{useVertical:!0}:(T===a.ay.vertical?u.y<m.y:u.x>m.x)?{needsFlipping:!0}:null}function Ba(T){const{projectionContext:u,pitchedLabelPlaneMatrixInverse:m,symbol:M,fontSize:O,flip:D,keepUpright:U,glyphOffsetArray:G,dynamicLayoutVertexArray:q,aspectRatio:oe,rotateToLine:le}=T,me=O/24,pe=M.lineOffsetX*me,xe=M.lineOffsetY*me;let Le;if(M.numGlyphs>1){const Ve=M.glyphStartIndex+M.numGlyphs,He=M.lineStartIndex,Ze=M.lineStartIndex+M.lineLength,et=Ms(me,G,pe,xe,D,M,le,u);if(!et)return{notEnoughRoom:!0};const lt=$a(et.first.point.x,et.first.point.y,u,m),Je=$a(et.last.point.x,et.last.point.y,u,m);if(U&&!D){const At=Si(M.writingMode,lt,Je,oe);if(At)return At}Le=[et.first];for(let At=M.glyphStartIndex+1;At<Ve-1;At++){const pt=mr(me*G.getoffsetX(At),pe,xe,D,M.segment,He,Ze,u,le);if(!pt)return{notEnoughRoom:!0};Le.push(pt)}Le.push(et.last)}else{if(U&&!D){const He=ls(u.tileAnchorPoint.x,u.tileAnchorPoint.y,u).point,Ze=M.lineStartIndex+M.segment+1,et=new a.P(u.lineVertexArray.getx(Ze),u.lineVertexArray.gety(Ze)),lt=ls(et.x,et.y,u),Je=lt.signedDistanceFromCamera>0?lt.point:Xl(u.tileAnchorPoint,et,He,1,u),At=$a(He.x,He.y,u,m),pt=$a(Je.x,Je.y,u,m),it=Si(M.writingMode,At,pt,oe);if(it)return it}const Ve=mr(me*G.getoffsetX(M.glyphStartIndex),pe,xe,D,M.segment,M.lineStartIndex,M.lineStartIndex+M.lineLength,u,le);if(!Ve||u.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Le=[Ve]}for(const Ve of Le)a.aF(q,Ve.point,Ve.angle);return{}}function Xl(T,u,m,M,O){const D=T.add(T.sub(u)._unit()),U=ls(D.x,D.y,O).point,G=m.sub(U);return m.add(G._mult(M/G.mag()))}function Yr(T,u,m){const M=u.projectionCache;if(M.projections[T])return M.projections[T];const O=new a.P(u.lineVertexArray.getx(T),u.lineVertexArray.gety(T)),D=ls(O.x,O.y,u);if(D.signedDistanceFromCamera>0)return M.projections[T]=D.point,M.anyProjectionOccluded=M.anyProjectionOccluded||D.isOccluded,D.point;const U=T-m.direction;return Xl(m.distanceFromAnchor===0?u.tileAnchorPoint:new a.P(u.lineVertexArray.getx(U),u.lineVertexArray.gety(U)),O,m.previousVertex,m.absOffsetX-m.distanceFromAnchor+1,u)}function ls(T,u,m){const M=T+m.translation[0],O=u+m.translation[1];let D;return m.pitchWithMap?(D=Kn(M,O,m.pitchedLabelPlaneMatrix,m.getElevation),D.isOccluded=!1):(D=m.transform.projectTileCoordinates(M,O,m.unwrappedTileID,m.getElevation),D.point.x=(.5*D.point.x+.5)*m.width,D.point.y=(.5*-D.point.y+.5)*m.height),D}function $a(T,u,m,M){if(m.pitchWithMap){const O=[T,u,0,1];return a.aG(O,O,M),m.transform.projectTileCoordinates(O[0]/O[3],O[1]/O[3],m.unwrappedTileID,m.getElevation).point}return{x:T/m.width*2-1,y:1-u/m.height*2}}function ma(T,u,m){return m.transform.projectTileCoordinates(T,u,m.unwrappedTileID,m.getElevation)}function wo(T,u,m){return T._unit()._perp()._mult(u*m)}function ga(T,u,m,M,O,D,U,G,q){if(G.projectionCache.offsets[T])return G.projectionCache.offsets[T];const oe=m.add(u);if(T+q.direction<M||T+q.direction>=O)return G.projectionCache.offsets[T]=oe,oe;const le=Yr(T+q.direction,G,q),me=wo(le.sub(m),U,q.direction),pe=m.add(me),xe=le.add(me);return G.projectionCache.offsets[T]=a.aH(D,oe,pe,xe)||oe,G.projectionCache.offsets[T]}function mr(T,u,m,M,O,D,U,G,q){const oe=M?T-u:T+u;let le=oe>0?1:-1,me=0;M&&(le*=-1,me=Math.PI),le<0&&(me+=Math.PI);let pe,xe=le>0?D+O:D+O+1;G.projectionCache.cachedAnchorPoint?pe=G.projectionCache.cachedAnchorPoint:(pe=ls(G.tileAnchorPoint.x,G.tileAnchorPoint.y,G).point,G.projectionCache.cachedAnchorPoint=pe);let Le,Ve,He=pe,Ze=pe,et=0,lt=0;const Je=Math.abs(oe),At=[];let pt;for(;et+lt<=Je;){if(xe+=le,xe<D||xe>=U)return null;et+=lt,Ze=He,Ve=Le;const Nt={absOffsetX:Je,direction:le,distanceFromAnchor:et,previousVertex:Ze};if(He=Yr(xe,G,Nt),m===0)At.push(Ze),pt=He.sub(Ze);else{let Kt;const Ft=He.sub(Ze);Kt=Ft.mag()===0?wo(Yr(xe+le,G,Nt).sub(He),m,le):wo(Ft,m,le),Ve||(Ve=Ze.add(Kt)),Le=ga(xe,Kt,He,D,U,Ve,m,G,Nt),At.push(Ve),pt=Le.sub(Ve)}lt=pt.mag()}const it=pt._mult((Je-et)/lt)._add(Ve||Ze),Ct=me+Math.atan2(He.y-Ze.y,He.x-Ze.x);return At.push(it),{point:it,angle:q?Ct:0,path:At}}const Sl=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function us(T,u){for(let m=0;m<T;m++){const M=u.length;u.resize(M+4),u.float32.set(Sl,3*M)}}function Xo(T,u,m){const M=u[0],O=u[1];return T[0]=m[0]*M+m[4]*O+m[12],T[1]=m[1]*M+m[5]*O+m[13],T[3]=m[3]*M+m[7]*O+m[15],T}const no=100;class El{constructor(u,m=new bi(u.width+200,u.height+200,25),M=new bi(u.width+200,u.height+200,25)){this.transform=u,this.grid=m,this.ignoredGrid=M,this.pitchFactor=Math.cos(u.pitch*Math.PI/180)*u.cameraToCenterDistance,this.screenRightBoundary=u.width+no,this.screenBottomBoundary=u.height+no,this.gridRightBoundary=u.width+200,this.gridBottomBoundary=u.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(u,m,M,O,D,U,G,q,oe,le,me,pe){const xe=this.projectAndGetPerspectiveRatio(u.anchorPointX+q[0],u.anchorPointY+q[1],D,le,pe),Le=M*xe.perspectiveRatio;let Ve;if(U||G)Ve=this._projectCollisionBox(u,Le,O,D,U,G,q,xe,le,me,pe);else{const pt=xe.x+(me?me.x*Le:0),it=xe.y+(me?me.y*Le:0);Ve={allPointsOccluded:!1,box:[pt+u.x1*Le,it+u.y1*Le,pt+u.x2*Le,it+u.y2*Le]}}const[He,Ze,et,lt]=Ve.box,Je=U?Ve.allPointsOccluded:xe.isOccluded;let At=Je;return At||(At=xe.perspectiveRatio<this.perspectiveRatioCutoff),At||(At=!this.isInsideGrid(He,Ze,et,lt)),At||m!=="always"&&this.grid.hitTest(He,Ze,et,lt,m,oe)?{box:[He,Ze,et,lt],placeable:!1,offscreen:!1,occluded:Je}:{box:[He,Ze,et,lt],placeable:!0,offscreen:this.isOffscreen(He,Ze,et,lt),occluded:Je}}placeCollisionCircles(u,m,M,O,D,U,G,q,oe,le,me,pe,xe,Le){const Ve=[],He=new a.P(m.anchorX,m.anchorY),Ze=this.getPerspectiveRatio(He.x,He.y,U,Le),et=(oe?D*this.transform.getPitchedTextCorrection(m.anchorX,m.anchorY,U)/Ze:D*Ze)/a.aL,lt={getElevation:Le,pitchedLabelPlaneMatrix:G,lineVertexArray:M,pitchWithMap:oe,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:He,unwrappedTileID:U,width:this.transform.width,height:this.transform.height,translation:xe},Je=Ms(et,O,m.lineOffsetX*et,m.lineOffsetY*et,!1,m,!1,lt);let At=!1,pt=!1,it=!0;if(Je){const Ct=.5*me*Ze+pe,Nt=new a.P(-100,-100),Kt=new a.P(this.screenRightBoundary,this.screenBottomBoundary),Ft=new nn,jt=Je.first,pn=Je.last;let Sn=[];for(let Ni=jt.path.length-1;Ni>=1;Ni--)Sn.push(jt.path[Ni]);for(let Ni=1;Ni<pn.path.length;Ni++)Sn.push(pn.path[Ni]);const rn=2.5*Ct;if(oe){const Ni=this.projectPathToScreenSpace(Sn,lt);Sn=Ni.some((Fi=>Fi.signedDistanceFromCamera<=0))?[]:Ni.map((Fi=>Fi.point))}let $n=[];if(Sn.length>0){const Ni=Sn[0].clone(),Fi=Sn[0].clone();for(let qo=1;qo<Sn.length;qo++)Ni.x=Math.min(Ni.x,Sn[qo].x),Ni.y=Math.min(Ni.y,Sn[qo].y),Fi.x=Math.max(Fi.x,Sn[qo].x),Fi.y=Math.max(Fi.y,Sn[qo].y);$n=Ni.x>=Nt.x&&Fi.x<=Kt.x&&Ni.y>=Nt.y&&Fi.y<=Kt.y?[Sn]:Fi.x<Nt.x||Ni.x>Kt.x||Fi.y<Nt.y||Ni.y>Kt.y?[]:a.aI([Sn],Nt.x,Nt.y,Kt.x,Kt.y)}for(const Ni of $n){Ft.reset(Ni,.25*Ct);let Fi=0;Fi=Ft.length<=.5*Ct?1:Math.ceil(Ft.paddedLength/rn)+1;for(let qo=0;qo<Fi;qo++){const Ko=qo/Math.max(Fi-1,1),ds=Ft.lerp(Ko),bo=ds.x+no,Ys=ds.y+no;Ve.push(bo,Ys,Ct,0);const rs=bo-Ct,Es=Ys-Ct,Bs=bo+Ct,Gr=Ys+Ct;if(it=it&&this.isOffscreen(rs,Es,Bs,Gr),pt=pt||this.isInsideGrid(rs,Es,Bs,Gr),u!=="always"&&this.grid.hitTestCircle(bo,Ys,Ct,u,le)&&(At=!0,!q))return{circles:[],offscreen:!1,collisionDetected:At}}}}return{circles:!q&&At||!pt||Ze<this.perspectiveRatioCutoff?[]:Ve,offscreen:it,collisionDetected:At}}projectPathToScreenSpace(u,m){const M=(function(O,D){const U=a.N();return a.aA(U,D.pitchedLabelPlaneMatrix),O.map((G=>{const q=Kn(G.x,G.y,U,D.getElevation),oe=D.transform.projectTileCoordinates(q.point.x,q.point.y,D.unwrappedTileID,D.getElevation);return oe.point.x=(.5*oe.point.x+.5)*D.width,oe.point.y=(.5*-oe.point.y+.5)*D.height,oe}))})(u,m);return(function(O){let D=0,U=0,G=0,q=0;for(let oe=0;oe<O.length;oe++)O[oe].isOccluded?(G=oe+1,q=0):(q++,q>U&&(U=q,D=G));return O.slice(D,D+U)})(M)}queryRenderedSymbols(u){if(u.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const m=[],M=new a.ab;for(const me of u){const pe=new a.P(me.x+no,me.y+no);M.extend(pe),m.push(pe)}const{minX:O,minY:D,maxX:U,maxY:G}=M,q=this.grid.query(O,D,U,G).concat(this.ignoredGrid.query(O,D,U,G)),oe={},le={};for(const me of q){const pe=me.key;if(oe[pe.bucketInstanceId]===void 0&&(oe[pe.bucketInstanceId]={}),oe[pe.bucketInstanceId][pe.featureIndex])continue;const xe=[new a.P(me.x1,me.y1),new a.P(me.x2,me.y1),new a.P(me.x2,me.y2),new a.P(me.x1,me.y2)];a.aJ(m,xe)&&(oe[pe.bucketInstanceId][pe.featureIndex]=!0,le[pe.bucketInstanceId]===void 0&&(le[pe.bucketInstanceId]=[]),le[pe.bucketInstanceId].push(pe.featureIndex))}return le}insertCollisionBox(u,m,M,O,D,U){(M?this.ignoredGrid:this.grid).insert({bucketInstanceId:O,featureIndex:D,collisionGroupID:U,overlapMode:m},u[0],u[1],u[2],u[3])}insertCollisionCircles(u,m,M,O,D,U){const G=M?this.ignoredGrid:this.grid,q={bucketInstanceId:O,featureIndex:D,collisionGroupID:U,overlapMode:m};for(let oe=0;oe<u.length;oe+=4)G.insertCircle(q,u[oe],u[oe+1],u[oe+2])}projectAndGetPerspectiveRatio(u,m,M,O,D){if(D){let U;O?(U=[u,m,O(u,m),1],a.aG(U,U,D)):(U=[u,m,0,1],Xo(U,U,D));const G=U[3];return{x:(U[0]/G+1)/2*this.transform.width+no,y:(-U[1]/G+1)/2*this.transform.height+no,perspectiveRatio:.5+this.transform.cameraToCenterDistance/G*.5,isOccluded:!1,signedDistanceFromCamera:G}}{const U=this.transform.projectTileCoordinates(u,m,M,O);return{x:(U.point.x+1)/2*this.transform.width+no,y:(1-U.point.y)/2*this.transform.height+no,perspectiveRatio:.5+this.transform.cameraToCenterDistance/U.signedDistanceFromCamera*.5,isOccluded:U.isOccluded,signedDistanceFromCamera:U.signedDistanceFromCamera}}}getPerspectiveRatio(u,m,M,O){const D=this.transform.projectTileCoordinates(u,m,M,O);return .5+this.transform.cameraToCenterDistance/D.signedDistanceFromCamera*.5}isOffscreen(u,m,M,O){return M<no||u>=this.screenRightBoundary||O<no||m>this.screenBottomBoundary}isInsideGrid(u,m,M,O){return M>=0&&u<this.gridRightBoundary&&O>=0&&m<this.gridBottomBoundary}getViewportMatrix(){const u=a.ar([]);return a.O(u,u,[-100,-100,0]),u}_projectCollisionBox(u,m,M,O,D,U,G,q,oe,le,me){let pe=1,xe=0,Le=0,Ve=1;const He=u.anchorPointX+G[0],Ze=u.anchorPointY+G[1];if(U&&!D){const Sn=this.projectAndGetPerspectiveRatio(He+1,Ze,O,oe,me),rn=Sn.x-q.x,$n=Math.atan((Sn.y-q.y)/rn)+(rn<0?Math.PI:0),Ni=Math.sin($n),Fi=Math.cos($n);pe=Fi,xe=Ni,Le=-Ni,Ve=Fi}else if(!U&&D){const Sn=an(this.transform);pe=Sn.vecEast[0],xe=Sn.vecEast[1],Le=Sn.vecSouth[0],Ve=Sn.vecSouth[1]}let et=q.x,lt=q.y,Je=m;D&&(et=He,lt=Ze,Je=Math.pow(2,-(this.transform.zoom-M.overscaledZ)),Je*=this.transform.getPitchedTextCorrection(He,Ze,O),le||(Je*=a.an(.5+q.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),le&&(et+=pe*le.x*Je+Le*le.y*Je,lt+=xe*le.x*Je+Ve*le.y*Je);const At=u.x1*Je,pt=u.x2*Je,it=(At+pt)/2,Ct=u.y1*Je,Nt=u.y2*Je,Kt=(Ct+Nt)/2,Ft=[{offsetX:At,offsetY:Ct},{offsetX:it,offsetY:Ct},{offsetX:pt,offsetY:Ct},{offsetX:pt,offsetY:Kt},{offsetX:pt,offsetY:Nt},{offsetX:it,offsetY:Nt},{offsetX:At,offsetY:Nt},{offsetX:At,offsetY:Kt}];let jt=[];for(const{offsetX:Sn,offsetY:rn}of Ft)jt.push(new a.P(et+pe*Sn+Le*rn,lt+xe*Sn+Ve*rn));let pn=!1;if(D){const Sn=jt.map((rn=>this.projectAndGetPerspectiveRatio(rn.x,rn.y,O,oe,me)));pn=Sn.some((rn=>!rn.isOccluded)),jt=Sn.map((rn=>new a.P(rn.x,rn.y)))}else pn=!0;return{box:a.aK(jt),allPointsOccluded:!pn}}}class YA{constructor(u,m,M,O){this.opacity=u?Math.max(0,Math.min(1,u.opacity+(u.placed?m:-m))):O&&M?1:0,this.placed=M}isHidden(){return this.opacity===0&&!this.placed}}class Bl{constructor(u,m,M,O,D){this.text=new YA(u?u.text:null,m,M,D),this.icon=new YA(u?u.icon:null,m,O,D)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Eu{constructor(u,m,M){this.text=u,this.icon=m,this.skipFade=M}}class na{constructor(u,m,M,O,D){this.bucketInstanceId=u,this.featureIndex=m,this.sourceLayerIndex=M,this.bucketIndex=O,this.tileID=D}}class Jo{constructor(u){this.crossSourceCollisions=u,this.maxGroupID=0,this.collisionGroups={}}get(u){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[u]){const m=++this.maxGroupID;this.collisionGroups[u]={ID:m,predicate:M=>M.collisionGroupID===m}}return this.collisionGroups[u]}}function Bu(T,u,m,M,O){const{horizontalAlign:D,verticalAlign:U}=a.aR(T);return new a.P(-(D-.5)*u+M[0]*O,-(U-.5)*m+M[1]*O)}class Ol{constructor(u,m,M,O,D){this.transform=u.clone(),this.terrain=m,this.collisionIndex=new El(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=M,this.retainedQueryData={},this.collisionGroups=new Jo(O),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=D,D&&(D.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(u){const m=this.terrain;return m?(M,O)=>m.getElevation(u,M,O):null}getBucketParts(u,m,M,O){const D=M.getBucket(m),U=M.latestFeatureIndex;if(!D||!U||m.id!==D.layerIds[0])return;const G=M.collisionBoxArray,q=D.layers[0].layout,oe=D.layers[0].paint,le=Math.pow(2,this.transform.zoom-M.tileID.overscaledZ),me=M.tileSize/a.a4,pe=M.tileID.toUnwrapped(),xe=q.get("text-rotation-alignment")==="map",Le=a.aM(M,1,this.transform.zoom),Ve=a.aN(this.collisionIndex.transform,M,oe.get("text-translate"),oe.get("text-translate-anchor")),He=a.aN(this.collisionIndex.transform,M,oe.get("icon-translate"),oe.get("icon-translate-anchor")),Ze=to(xe,this.transform,Le);this.retainedQueryData[D.bucketInstanceId]=new na(D.bucketInstanceId,U,D.sourceLayerIndex,D.index,M.tileID);const et={bucket:D,layout:q,translationText:Ve,translationIcon:He,unwrappedTileID:pe,pitchedLabelPlaneMatrix:Ze,scale:le,textPixelRatio:me,holdingForFade:M.holdingForSymbolFade(),collisionBoxArray:G,partiallyEvaluatedTextSize:a.ax(D.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(D.sourceID)};if(O)for(const lt of D.sortKeyRanges){const{sortKey:Je,symbolInstanceStart:At,symbolInstanceEnd:pt}=lt;u.push({sortKey:Je,symbolInstanceStart:At,symbolInstanceEnd:pt,parameters:et})}else u.push({symbolInstanceStart:0,symbolInstanceEnd:D.symbolInstances.length,parameters:et})}attemptAnchorPlacement(u,m,M,O,D,U,G,q,oe,le,me,pe,xe,Le,Ve,He,Ze,et,lt,Je){const At=a.aO[u.textAnchor],pt=[u.textOffset0,u.textOffset1],it=Bu(At,M,O,pt,D),Ct=this.collisionIndex.placeCollisionBox(m,pe,q,oe,le,G,U,He,me.predicate,lt,it,Je);if((!et||this.collisionIndex.placeCollisionBox(et,pe,q,oe,le,G,U,Ze,me.predicate,lt,it,Je).placeable)&&Ct.placeable){let Nt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[xe.crossTileID]&&this.prevPlacement.placements[xe.crossTileID]&&this.prevPlacement.placements[xe.crossTileID].text&&(Nt=this.prevPlacement.variableOffsets[xe.crossTileID].anchor),xe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[xe.crossTileID]={textOffset:pt,width:M,height:O,anchor:At,textBoxScale:D,prevAnchor:Nt},this.markUsedJustification(Le,At,xe,Ve),Le.allowVerticalPlacement&&(this.markUsedOrientation(Le,Ve,xe),this.placedOrientations[xe.crossTileID]=Ve),{shift:it,placedGlyphBoxes:Ct}}}placeLayerBucketPart(u,m,M){const{bucket:O,layout:D,translationText:U,translationIcon:G,unwrappedTileID:q,pitchedLabelPlaneMatrix:oe,textPixelRatio:le,holdingForFade:me,collisionBoxArray:pe,partiallyEvaluatedTextSize:xe,collisionGroup:Le}=u.parameters,Ve=D.get("text-optional"),He=D.get("icon-optional"),Ze=a.aP(D,"text-overlap","text-allow-overlap"),et=Ze==="always",lt=a.aP(D,"icon-overlap","icon-allow-overlap"),Je=lt==="always",At=D.get("text-rotation-alignment")==="map",pt=D.get("text-pitch-alignment")==="map",it=D.get("icon-text-fit")!=="none",Ct=D.get("symbol-z-order")==="viewport-y",Nt=et&&(Je||!O.hasIconData()||He),Kt=Je&&(et||!O.hasTextData()||Ve);!O.collisionArrays&&pe&&O.deserializeCollisionBoxes(pe);const Ft=this.retainedQueryData[O.bucketInstanceId].tileID,jt=this._getTerrainElevationFunc(Ft),pn=this.transform.getFastPathSimpleProjectionMatrix(Ft),Sn=(rn,$n,Ni)=>{var Fi,qo;if(m[rn.crossTileID])return;if(me)return void(this.placements[rn.crossTileID]=new Eu(!1,!1,!1));let Ko=!1,ds=!1,bo=!0,Ys=null,rs={box:null,placeable:!1,offscreen:null,occluded:!1},Es={placeable:!1},Bs=null,Gr=null,fs=null,xA=0,zc=0,jc=0;$n.textFeatureIndex?xA=$n.textFeatureIndex:rn.useRuntimeCollisionCircles&&(xA=rn.featureIndex),$n.verticalTextFeatureIndex&&(zc=$n.verticalTextFeatureIndex);const jl=$n.textBox;if(jl){const Nl=ps=>{let To=a.ay.horizontal;if(O.allowVerticalPlacement&&!ps&&this.prevPlacement){const ms=this.prevPlacement.placedOrientations[rn.crossTileID];ms&&(this.placedOrientations[rn.crossTileID]=ms,To=ms,this.markUsedOrientation(O,To,rn))}return To},Gl=(ps,To)=>{if(O.allowVerticalPlacement&&rn.numVerticalGlyphVertices>0&&$n.verticalTextBox){for(const ms of O.writingModes)if(ms===a.ay.vertical?(rs=To(),Es=rs):rs=ps(),rs&&rs.placeable)break}else rs=ps()},Gc=rn.textAnchorOffsetStartIndex,zd=rn.textAnchorOffsetEndIndex;if(zd===Gc){const ps=(To,ms)=>{const co=this.collisionIndex.placeCollisionBox(To,Ze,le,Ft,q,pt,At,U,Le.predicate,jt,void 0,pn);return co&&co.placeable&&(this.markUsedOrientation(O,ms,rn),this.placedOrientations[rn.crossTileID]=ms),co};Gl((()=>ps(jl,a.ay.horizontal)),(()=>{const To=$n.verticalTextBox;return O.allowVerticalPlacement&&rn.numVerticalGlyphVertices>0&&To?ps(To,a.ay.vertical):{box:null,offscreen:null}})),Nl(rs&&rs.placeable)}else{let ps=a.aO[(qo=(Fi=this.prevPlacement)===null||Fi===void 0?void 0:Fi.variableOffsets[rn.crossTileID])===null||qo===void 0?void 0:qo.anchor];const To=(co,cc,zp)=>{const ch=co.x2-co.x1,P0=co.y2-co.y1,MA=rn.textBoxScale,jp=it&&lt==="never"?cc:null;let Wc=null,Wh=Ze==="never"?1:2,lg="never";ps&&Wh++;for(let wA=0;wA<Wh;wA++){for(let js=Gc;js<zd;js++){const Np=O.textAnchorOffsets.get(js);if(ps&&Np.textAnchor!==ps)continue;const Gp=this.attemptAnchorPlacement(Np,co,ch,P0,MA,At,pt,le,Ft,q,Le,lg,rn,O,zp,U,G,jp,jt);if(Gp&&(Wc=Gp.placedGlyphBoxes,Wc&&Wc.placeable))return Ko=!0,Ys=Gp.shift,Wc}ps?ps=null:lg=Ze}return M&&!Wc&&(Wc={box:this.collisionIndex.placeCollisionBox(jl,"always",le,Ft,q,pt,At,U,Le.predicate,jt,void 0,pn).box,offscreen:!1,placeable:!1,occluded:!1}),Wc};Gl((()=>To(jl,$n.iconBox,a.ay.horizontal)),(()=>{const co=$n.verticalTextBox;return O.allowVerticalPlacement&&(!rs||!rs.placeable)&&rn.numVerticalGlyphVertices>0&&co?To(co,$n.verticalIconBox,a.ay.vertical):{box:null,occluded:!0,offscreen:null}})),rs&&(Ko=rs.placeable,bo=rs.offscreen);const ms=Nl(rs&&rs.placeable);if(!Ko&&this.prevPlacement){const co=this.prevPlacement.variableOffsets[rn.crossTileID];co&&(this.variableOffsets[rn.crossTileID]=co,this.markUsedJustification(O,co.anchor,rn,ms))}}}if(Bs=rs,Ko=Bs&&Bs.placeable,bo=Bs&&Bs.offscreen,rn.useRuntimeCollisionCircles&&rn.centerJustifiedTextSymbolIndex>=0){const Nl=O.text.placedSymbolArray.get(rn.centerJustifiedTextSymbolIndex),Gl=a.az(O.textSizeData,xe,Nl),Gc=D.get("text-padding");Gr=this.collisionIndex.placeCollisionCircles(Ze,Nl,O.lineVertexArray,O.glyphOffsetArray,Gl,q,oe,M,pt,Le.predicate,rn.collisionCircleDiameter,Gc,U,jt),Gr.circles.length&&Gr.collisionDetected&&!M&&a.w("Collisions detected, but collision boxes are not shown"),Ko=et||Gr.circles.length>0&&!Gr.collisionDetected,bo=bo&&Gr.offscreen}if($n.iconFeatureIndex&&(jc=$n.iconFeatureIndex),$n.iconBox){const Nl=Gl=>this.collisionIndex.placeCollisionBox(Gl,lt,le,Ft,q,pt,At,G,Le.predicate,jt,it&&Ys?Ys:void 0,pn);Es&&Es.placeable&&$n.verticalIconBox?(fs=Nl($n.verticalIconBox),ds=fs.placeable):(fs=Nl($n.iconBox),ds=fs.placeable),bo=bo&&fs.offscreen}const uh=Ve||rn.numHorizontalGlyphVertices===0&&rn.numVerticalGlyphVertices===0,uu=He||rn.numIconVertices===0;uh||uu?uu?uh||(ds=ds&&Ko):Ko=ds&&Ko:ds=Ko=ds&&Ko;const Nc=ds&&fs.placeable;if(Ko&&Bs.placeable&&this.collisionIndex.insertCollisionBox(Bs.box,Ze,D.get("text-ignore-placement"),O.bucketInstanceId,Es&&Es.placeable&&zc?zc:xA,Le.ID),Nc&&this.collisionIndex.insertCollisionBox(fs.box,lt,D.get("icon-ignore-placement"),O.bucketInstanceId,jc,Le.ID),Gr&&Ko&&this.collisionIndex.insertCollisionCircles(Gr.circles,Ze,D.get("text-ignore-placement"),O.bucketInstanceId,xA,Le.ID),M&&this.storeCollisionData(O.bucketInstanceId,Ni,$n,Bs,fs,Gr),rn.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(O.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[rn.crossTileID]=new Eu((Ko||Nt)&&!Bs?.occluded,(ds||Kt)&&!fs?.occluded,bo||O.justReloaded),m[rn.crossTileID]=!0};if(Ct){if(u.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const rn=O.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let $n=rn.length-1;$n>=0;--$n){const Ni=rn[$n];Sn(O.symbolInstances.get(Ni),O.collisionArrays[Ni],Ni)}}else for(let rn=u.symbolInstanceStart;rn<u.symbolInstanceEnd;rn++)Sn(O.symbolInstances.get(rn),O.collisionArrays[rn],rn);O.justReloaded=!1}storeCollisionData(u,m,M,O,D,U){if(M.textBox||M.iconBox){let G,q;this.collisionBoxArrays.has(u)?G=this.collisionBoxArrays.get(u):(G=new Map,this.collisionBoxArrays.set(u,G)),G.has(m)?q=G.get(m):(q={text:null,icon:null},G.set(m,q)),M.textBox&&(q.text=O.box),M.iconBox&&(q.icon=D.box)}if(U){let G=this.collisionCircleArrays[u];G===void 0&&(G=this.collisionCircleArrays[u]=[]);for(let q=0;q<U.circles.length;q+=4)G.push(U.circles[q+0]-no),G.push(U.circles[q+1]-no),G.push(U.circles[q+2]),G.push(U.collisionDetected?1:0)}}markUsedJustification(u,m,M,O){let D;D=O===a.ay.vertical?M.verticalPlacedTextSymbolIndex:{left:M.leftJustifiedTextSymbolIndex,center:M.centerJustifiedTextSymbolIndex,right:M.rightJustifiedTextSymbolIndex}[a.aQ(m)];const U=[M.leftJustifiedTextSymbolIndex,M.centerJustifiedTextSymbolIndex,M.rightJustifiedTextSymbolIndex,M.verticalPlacedTextSymbolIndex];for(const G of U)G>=0&&(u.text.placedSymbolArray.get(G).crossTileID=D>=0&&G!==D?0:M.crossTileID)}markUsedOrientation(u,m,M){const O=m===a.ay.horizontal||m===a.ay.horizontalOnly?m:0,D=m===a.ay.vertical?m:0,U=[M.leftJustifiedTextSymbolIndex,M.centerJustifiedTextSymbolIndex,M.rightJustifiedTextSymbolIndex];for(const G of U)u.text.placedSymbolArray.get(G).placedOrientation=O;M.verticalPlacedTextSymbolIndex&&(u.text.placedSymbolArray.get(M.verticalPlacedTextSymbolIndex).placedOrientation=D)}commit(u){this.commitTime=u,this.zoomAtLastRecencyCheck=this.transform.zoom;const m=this.prevPlacement;let M=!1;this.prevZoomAdjustment=m?m.zoomAdjustment(this.transform.zoom):0;const O=m?m.symbolFadeChange(u):1,D=m?m.opacities:{},U=m?m.variableOffsets:{},G=m?m.placedOrientations:{};for(const q in this.placements){const oe=this.placements[q],le=D[q];le?(this.opacities[q]=new Bl(le,O,oe.text,oe.icon),M=M||oe.text!==le.text.placed||oe.icon!==le.icon.placed):(this.opacities[q]=new Bl(null,O,oe.text,oe.icon,oe.skipFade),M=M||oe.text||oe.icon)}for(const q in D){const oe=D[q];if(!this.opacities[q]){const le=new Bl(oe,O,!1,!1);le.isHidden()||(this.opacities[q]=le,M=M||oe.text.placed||oe.icon.placed)}}for(const q in U)this.variableOffsets[q]||!this.opacities[q]||this.opacities[q].isHidden()||(this.variableOffsets[q]=U[q]);for(const q in G)this.placedOrientations[q]||!this.opacities[q]||this.opacities[q].isHidden()||(this.placedOrientations[q]=G[q]);if(m&&m.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");M?this.lastPlacementChangeTime=u:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=m?m.lastPlacementChangeTime:u)}updateLayerOpacities(u,m){const M={};for(const O of m){const D=O.getBucket(u);D&&O.latestFeatureIndex&&u.id===D.layerIds[0]&&this.updateBucketOpacities(D,O.tileID,M,O.collisionBoxArray)}}updateBucketOpacities(u,m,M,O){u.hasTextData()&&(u.text.opacityVertexArray.clear(),u.text.hasVisibleVertices=!1),u.hasIconData()&&(u.icon.opacityVertexArray.clear(),u.icon.hasVisibleVertices=!1),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexArray.clear(),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexArray.clear();const D=u.layers[0],U=D.layout,G=new Bl(null,0,!1,!1,!0),q=U.get("text-allow-overlap"),oe=U.get("icon-allow-overlap"),le=D._unevaluatedLayout.hasValue("text-variable-anchor")||D._unevaluatedLayout.hasValue("text-variable-anchor-offset"),me=U.get("text-rotation-alignment")==="map",pe=U.get("text-pitch-alignment")==="map",xe=U.get("icon-text-fit")!=="none",Le=new Bl(null,0,q&&(oe||!u.hasIconData()||U.get("icon-optional")),oe&&(q||!u.hasTextData()||U.get("text-optional")),!0);!u.collisionArrays&&O&&(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData())&&u.deserializeCollisionBoxes(O);const Ve=(Ze,et,lt)=>{for(let Je=0;Je<et/4;Je++)Ze.opacityVertexArray.emplaceBack(lt);Ze.hasVisibleVertices=Ze.hasVisibleVertices||lt!==Rs},He=this.collisionBoxArrays.get(u.bucketInstanceId);for(let Ze=0;Ze<u.symbolInstances.length;Ze++){const et=u.symbolInstances.get(Ze),{numHorizontalGlyphVertices:lt,numVerticalGlyphVertices:Je,crossTileID:At}=et;let pt=this.opacities[At];M[At]?pt=G:pt||(pt=Le,this.opacities[At]=pt),M[At]=!0;const it=et.numIconVertices>0,Ct=this.placedOrientations[et.crossTileID],Nt=Ct===a.ay.vertical,Kt=Ct===a.ay.horizontal||Ct===a.ay.horizontalOnly;if(lt>0||Je>0){const jt=eu(pt.text);Ve(u.text,lt,Nt?Rs:jt),Ve(u.text,Je,Kt?Rs:jt);const pn=pt.text.isHidden();[et.rightJustifiedTextSymbolIndex,et.centerJustifiedTextSymbolIndex,et.leftJustifiedTextSymbolIndex].forEach(($n=>{$n>=0&&(u.text.placedSymbolArray.get($n).hidden=pn||Nt?1:0)})),et.verticalPlacedTextSymbolIndex>=0&&(u.text.placedSymbolArray.get(et.verticalPlacedTextSymbolIndex).hidden=pn||Kt?1:0);const Sn=this.variableOffsets[et.crossTileID];Sn&&this.markUsedJustification(u,Sn.anchor,et,Ct);const rn=this.placedOrientations[et.crossTileID];rn&&(this.markUsedJustification(u,"left",et,rn),this.markUsedOrientation(u,rn,et))}if(it){const jt=eu(pt.icon),pn=!(xe&&et.verticalPlacedIconSymbolIndex&&Nt);et.placedIconSymbolIndex>=0&&(Ve(u.icon,et.numIconVertices,pn?jt:Rs),u.icon.placedSymbolArray.get(et.placedIconSymbolIndex).hidden=pt.icon.isHidden()),et.verticalPlacedIconSymbolIndex>=0&&(Ve(u.icon,et.numVerticalIconVertices,pn?Rs:jt),u.icon.placedSymbolArray.get(et.verticalPlacedIconSymbolIndex).hidden=pt.icon.isHidden())}const Ft=He&&He.has(Ze)?He.get(Ze):{text:null,icon:null};if(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData()){const jt=u.collisionArrays[Ze];if(jt){let pn=new a.P(0,0);if(jt.textBox||jt.verticalTextBox){let Sn=!0;if(le){const rn=this.variableOffsets[At];rn?(pn=Bu(rn.anchor,rn.width,rn.height,rn.textOffset,rn.textBoxScale),me&&pn._rotate(pe?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Sn=!1}if(jt.textBox||jt.verticalTextBox){let rn;jt.textBox&&(rn=Nt),jt.verticalTextBox&&(rn=Kt),Ou(u.textCollisionBox.collisionVertexArray,pt.text.placed,!Sn||rn,Ft.text,pn.x,pn.y)}}if(jt.iconBox||jt.verticalIconBox){const Sn=!!(!Kt&&jt.verticalIconBox);let rn;jt.iconBox&&(rn=Sn),jt.verticalIconBox&&(rn=!Sn),Ou(u.iconCollisionBox.collisionVertexArray,pt.icon.placed,rn,Ft.icon,xe?pn.x:0,xe?pn.y:0)}}}}if(u.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[u.bucketInstanceId]&&(this.retainedQueryData[u.bucketInstanceId].featureSortOrder=u.featureSortOrder),u.hasTextData()&&u.text.opacityVertexBuffer&&u.text.opacityVertexBuffer.updateData(u.text.opacityVertexArray),u.hasIconData()&&u.icon.opacityVertexBuffer&&u.icon.opacityVertexBuffer.updateData(u.icon.opacityVertexArray),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexBuffer&&u.iconCollisionBox.collisionVertexBuffer.updateData(u.iconCollisionBox.collisionVertexArray),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexBuffer&&u.textCollisionBox.collisionVertexBuffer.updateData(u.textCollisionBox.collisionVertexArray),u.text.opacityVertexArray.length!==u.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${u.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${u.text.layoutVertexArray.length}) / 4`);if(u.icon.opacityVertexArray.length!==u.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${u.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${u.icon.layoutVertexArray.length}) / 4`);u.bucketInstanceId in this.collisionCircleArrays&&(u.collisionCircleArray=this.collisionCircleArrays[u.bucketInstanceId],delete this.collisionCircleArrays[u.bucketInstanceId])}symbolFadeChange(u){return this.fadeDuration===0?1:(u-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(u){return Math.max(0,(this.transform.zoom-u)/1.5)}hasTransitions(u){return this.stale||u-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(u,m){const M=this.zoomAtLastRecencyCheck===m?1-this.zoomAdjustment(m):1;return this.zoomAtLastRecencyCheck=m,this.commitTime+this.fadeDuration*M>u}setStale(){this.stale=!0}}function Ou(T,u,m,M,O,D){M&&M.length!==0||(M=[0,0,0,0]);const U=M[0]-no,G=M[1]-no,q=M[2]-no,oe=M[3]-no;T.emplaceBack(u?1:0,m?1:0,O||0,D||0,U,G),T.emplaceBack(u?1:0,m?1:0,O||0,D||0,q,G),T.emplaceBack(u?1:0,m?1:0,O||0,D||0,q,oe),T.emplaceBack(u?1:0,m?1:0,O||0,D||0,U,oe)}const Jl=Math.pow(2,25),Zu=Math.pow(2,24),VA=Math.pow(2,17),ia=Math.pow(2,16),Bc=Math.pow(2,9),Il=Math.pow(2,8),Oc=Math.pow(2,1);function eu(T){if(T.opacity===0&&!T.placed)return 0;if(T.opacity===1&&T.placed)return 4294967295;const u=T.placed?1:0,m=Math.floor(127*T.opacity);return m*Jl+u*Zu+m*VA+u*ia+m*Bc+u*Il+m*Oc+u}const Rs=0;class ws{constructor(u){this._sortAcrossTiles=u.layout.get("symbol-z-order")!=="viewport-y"&&!u.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(u,m,M,O,D){const U=this._bucketParts;for(;this._currentTileIndex<u.length;)if(m.getBucketParts(U,O,u[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,D())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,U.sort(((G,q)=>G.sortKey-q.sortKey)));this._currentPartIndex<U.length;)if(m.placeLayerBucketPart(U[this._currentPartIndex],this._seenCrossTileIDs,M),this._currentPartIndex++,D())return!0;return!1}}class So{constructor(u,m,M,O,D,U,G,q){this.placement=new Ol(u,m,U,G,q),this._currentPlacementIndex=M.length-1,this._forceFullPlacement=O,this._showCollisionBoxes=D,this._done=!1}isDone(){return this._done}continuePlacement(u,m,M){const O=K(),D=()=>!this._forceFullPlacement&&K()-O>2;for(;this._currentPlacementIndex>=0;){const U=m[u[this._currentPlacementIndex]],G=this.placement.collisionIndex.transform.zoom;if(U.type==="symbol"&&(!U.minzoom||U.minzoom<=G)&&(!U.maxzoom||U.maxzoom>G)){if(this._inProgressLayer||(this._inProgressLayer=new ws(U)),this._inProgressLayer.continuePlacement(M[U.source],this.placement,this._showCollisionBoxes,U,D))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(u){return this.placement.commit(u),this.placement}}const Ps=512/a.a4/2;class iA{constructor(u,m,M){this.tileID=u,this.bucketInstanceId=M,this._symbolsByKey={};const O=new Map;for(let D=0;D<m.length;D++){const U=m.get(D),G=U.key,q=O.get(G);q?q.push(U):O.set(G,[U])}for(const[D,U]of O){const G={positions:U.map((q=>({x:Math.floor(q.anchorX*Ps),y:Math.floor(q.anchorY*Ps)}))),crossTileIDs:U.map((q=>q.crossTileID))};if(G.positions.length>128){const q=new a.aS(G.positions.length,16,Uint16Array);for(const{x:oe,y:le}of G.positions)q.add(oe,le);q.finish(),delete G.positions,G.index=q}this._symbolsByKey[D]=G}}getScaledCoordinates(u,m){const{x:M,y:O,z:D}=this.tileID.canonical,{x:U,y:G,z:q}=m.canonical,oe=Ps/Math.pow(2,q-D),le=(G*a.a4+u.anchorY)*oe,me=O*a.a4*Ps;return{x:Math.floor((U*a.a4+u.anchorX)*oe-M*a.a4*Ps),y:Math.floor(le-me)}}findMatches(u,m,M){const O=this.tileID.canonical.z<m.canonical.z?1:Math.pow(2,this.tileID.canonical.z-m.canonical.z);for(let D=0;D<u.length;D++){const U=u.get(D);if(U.crossTileID)continue;const G=this._symbolsByKey[U.key];if(!G)continue;const q=this.getScaledCoordinates(U,m);if(G.index){const oe=G.index.range(q.x-O,q.y-O,q.x+O,q.y+O).sort();for(const le of oe){const me=G.crossTileIDs[le];if(!M[me]){M[me]=!0,U.crossTileID=me;break}}}else if(G.positions)for(let oe=0;oe<G.positions.length;oe++){const le=G.positions[oe],me=G.crossTileIDs[oe];if(Math.abs(le.x-q.x)<=O&&Math.abs(le.y-q.y)<=O&&!M[me]){M[me]=!0,U.crossTileID=me;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:u})=>u))}}class Ws{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ha{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(u){const m=Math.round((u-this.lng)/360);if(m!==0)for(const M in this.indexes){const O=this.indexes[M],D={};for(const U in O){const G=O[U];G.tileID=G.tileID.unwrapTo(G.tileID.wrap+m),D[G.tileID.key]=G}this.indexes[M]=D}this.lng=u}addBucket(u,m,M){if(this.indexes[u.overscaledZ]&&this.indexes[u.overscaledZ][u.key]){if(this.indexes[u.overscaledZ][u.key].bucketInstanceId===m.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(u.overscaledZ,this.indexes[u.overscaledZ][u.key])}for(let D=0;D<m.symbolInstances.length;D++)m.symbolInstances.get(D).crossTileID=0;this.usedCrossTileIDs[u.overscaledZ]||(this.usedCrossTileIDs[u.overscaledZ]={});const O=this.usedCrossTileIDs[u.overscaledZ];for(const D in this.indexes){const U=this.indexes[D];if(Number(D)>u.overscaledZ)for(const G in U){const q=U[G];q.tileID.isChildOf(u)&&q.findMatches(m.symbolInstances,u,O)}else{const G=U[u.scaledTo(Number(D)).key];G&&G.findMatches(m.symbolInstances,u,O)}}for(let D=0;D<m.symbolInstances.length;D++){const U=m.symbolInstances.get(D);U.crossTileID||(U.crossTileID=M.generate(),O[U.crossTileID]=!0)}return this.indexes[u.overscaledZ]===void 0&&(this.indexes[u.overscaledZ]={}),this.indexes[u.overscaledZ][u.key]=new iA(u,m.symbolInstances,m.bucketInstanceId),!0}removeBucketCrossTileIDs(u,m){for(const M of m.getCrossTileIDsLists())for(const O of M)delete this.usedCrossTileIDs[u][O]}removeStaleBuckets(u){let m=!1;for(const M in this.indexes){const O=this.indexes[M];for(const D in O)u[O[D].bucketInstanceId]||(this.removeBucketCrossTileIDs(M,O[D]),delete O[D],m=!0)}return m}}class tu{constructor(){this.layerIndexes={},this.crossTileIDs=new Ws,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(u,m,M){let O=this.layerIndexes[u.id];O===void 0&&(O=this.layerIndexes[u.id]=new Ha);let D=!1;const U={};O.handleWrapJump(M);for(const G of m){const q=G.getBucket(u);q&&u.id===q.layerIds[0]&&(q.bucketInstanceId||(q.bucketInstanceId=++this.maxBucketInstanceId),O.addBucket(G.tileID,q,this.crossTileIDs)&&(D=!0),U[q.bucketInstanceId]=!0)}return O.removeStaleBuckets(U)&&(D=!0),D}pruneUnusedLayers(u){const m={};u.forEach((M=>{m[M]=!0}));for(const M in this.layerIndexes)m[M]||delete this.layerIndexes[M]}}var Yi="void main() {fragColor=vec4(1.0);}";const Qs={prelude:zi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:zi("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:zi("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:zi(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:zi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:zi(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:zi(Yi,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:zi(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:zi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:zi("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:zi("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:zi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:zi("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:zi(Yi,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:zi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:zi(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:zi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:zi(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:zi(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:zi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:zi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:zi(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:zi(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:zi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:zi(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:zi(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:zi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:zi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:zi(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:zi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:zi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:zi("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:zi("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:zi("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:zi("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:zi(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:zi("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function zi(T,u){const m=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,M=u.match(/in ([\w]+) ([\w]+)/g),O=T.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),D=u.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),U=D?D.concat(O):O,G={};return{fragmentSource:T=T.replace(m,((q,oe,le,me,pe)=>(G[pe]=!0,oe==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
in ${le} ${me} ${pe};
#else
uniform ${le} ${me} u_${pe};
#endif
`:`
#ifdef HAS_UNIFORM_u_${pe}
    ${le} ${me} ${pe} = u_${pe};
#endif
`))),vertexSource:u=u.replace(m,((q,oe,le,me,pe)=>{const xe=me==="float"?"vec2":"vec4",Le=pe.match(/color/)?"color":xe;return G[pe]?oe==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
uniform lowp float u_${pe}_t;
in ${le} ${xe} a_${pe};
out ${le} ${me} ${pe};
#else
uniform ${le} ${me} u_${pe};
#endif
`:Le==="vec4"?`
#ifndef HAS_UNIFORM_u_${pe}
    ${pe} = a_${pe};
#else
    ${le} ${me} ${pe} = u_${pe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${pe}
    ${pe} = unpack_mix_${Le}(a_${pe}, u_${pe}_t);
#else
    ${le} ${me} ${pe} = u_${pe};
#endif
`:oe==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
uniform lowp float u_${pe}_t;
in ${le} ${xe} a_${pe};
#else
uniform ${le} ${me} u_${pe};
#endif
`:Le==="vec4"?`
#ifndef HAS_UNIFORM_u_${pe}
    ${le} ${me} ${pe} = a_${pe};
#else
    ${le} ${me} ${pe} = u_${pe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${pe}
    ${le} ${me} ${pe} = unpack_mix_${Le}(a_${pe}, u_${pe}_t);
#else
    ${le} ${me} ${pe} = u_${pe};
#endif
`})),staticAttributes:M,staticUniforms:U}}class Vr{constructor(u,m,M){this.vertexBuffer=u,this.indexBuffer=m,this.segments=M}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var yo=a.aT([{name:"a_pos",type:"Int16",components:2}]);const Eo="#define PROJECTION_MERCATOR",io="mercator";class Lo{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return io}get shaderDefine(){return Eo}get shaderPreludeCode(){return Qs.projectionMercator}get vertexShaderPreludeCode(){return Qs.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aU.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(u){}getMeshFromTileID(u,m,M,O,D){if(this._cachedMesh)return this._cachedMesh;const U=new a.aV;U.emplaceBack(0,0),U.emplaceBack(a.a4,0),U.emplaceBack(0,a.a4),U.emplaceBack(a.a4,a.a4);const G=u.createVertexBuffer(U,yo.members),q=a.aW.simpleSegment(0,0,4,2),oe=new a.aX;oe.emplaceBack(1,0,2),oe.emplaceBack(1,2,3);const le=u.createIndexBuffer(oe);return this._cachedMesh=new Vr(G,le,q),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(u){}}class gr{constructor(u=0,m=0,M=0,O=0){if(isNaN(u)||u<0||isNaN(m)||m<0||isNaN(M)||M<0||isNaN(O)||O<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=u,this.bottom=m,this.left=M,this.right=O}interpolate(u,m,M){return m.top!=null&&u.top!=null&&(this.top=a.G.number(u.top,m.top,M)),m.bottom!=null&&u.bottom!=null&&(this.bottom=a.G.number(u.bottom,m.bottom,M)),m.left!=null&&u.left!=null&&(this.left=a.G.number(u.left,m.left,M)),m.right!=null&&u.right!=null&&(this.right=a.G.number(u.right,m.right,M)),this}getCenter(u,m){const M=a.an((this.left+u-this.right)/2,0,u),O=a.an((this.top+m-this.bottom)/2,0,m);return new a.P(M,O)}equals(u){return this.top===u.top&&this.bottom===u.bottom&&this.left===u.left&&this.right===u.right}clone(){return new gr(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Ic(T,u){if(!T.renderWorldCopies||T.lngRange)return;const m=u.lng-T.center.lng;u.lng+=m>180?-360:m<-180?360:0}function Bo(T){return Math.max(0,Math.floor(T))}class po{constructor(u,m){var M;this.applyConstrain=(O,D)=>this._constrainOverride!==null?this._constrainOverride(O,D):this._callbacks.defaultConstrain(O,D),this._callbacks=u,this._tileSize=512,this._renderWorldCopies=m?.renderWorldCopies===void 0||!!m?.renderWorldCopies,this._minZoom=m?.minZoom||0,this._maxZoom=m?.maxZoom||22,this._minPitch=m?.minPitch==null?0:m?.minPitch,this._maxPitch=m?.maxPitch==null?60:m?.maxPitch,this._constrainOverride=(M=m?.constrainOverride)!==null&&M!==void 0?M:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Bo(this._zoom),this._scale=a.aq(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new gr,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(u,m,M){this._constrainOverride=u.constrainOverride,this._latRange=u.latRange,this._lngRange=u.lngRange,this._width=u.width,this._height=u.height,this._center=u.center,this._elevation=u.elevation,this._minElevationForCurrentTile=u.minElevationForCurrentTile,this._zoom=u.zoom,this._tileZoom=Bo(this._zoom),this._scale=a.aq(this._zoom),this._bearingInRadians=u.bearingInRadians,this._fovInRadians=u.fovInRadians,this._pitchInRadians=u.pitchInRadians,this._rollInRadians=u.rollInRadians,this._unmodified=u.unmodified,this._edgeInsets=new gr(u.padding.top,u.padding.bottom,u.padding.left,u.padding.right),this._minZoom=u.minZoom,this._maxZoom=u.maxZoom,this._minPitch=u.minPitch,this._maxPitch=u.maxPitch,this._renderWorldCopies=u.renderWorldCopies,this._cameraToCenterDistance=u.cameraToCenterDistance,this._nearZ=u.nearZ,this._farZ=u.farZ,this._autoCalculateNearFarZ=!M&&u.autoCalculateNearFarZ,m&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(u){this._minElevationForCurrentTile=u}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(u){this._minZoom!==u&&(this._minZoom=u,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(u){this._maxZoom!==u&&(this._maxZoom=u,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(u){this._minPitch!==u&&(this._minPitch=u,this.setPitch(Math.max(this.pitch,u)))}get maxPitch(){return this._maxPitch}setMaxPitch(u){this._maxPitch!==u&&(this._maxPitch=u,this.setPitch(Math.min(this.pitch,u)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(u){u===void 0?u=!0:u===null&&(u=!1),this._renderWorldCopies=u}get constrainOverride(){return this._constrainOverride}setConstrainOverride(u){u===void 0&&(u=null),this._constrainOverride!==u&&(this._constrainOverride=u,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(u){const m=a.W(u,-180,180)*Math.PI/180;var M,O,D,U,G,q,oe,le,me;this._bearingInRadians!==m&&(this._unmodified=!1,this._bearingInRadians=m,this._calcMatrices(),this._rotationMatrix=f(),M=this._rotationMatrix,D=-this._bearingInRadians,U=(O=this._rotationMatrix)[0],G=O[1],q=O[2],oe=O[3],le=Math.sin(D),me=Math.cos(D),M[0]=U*me+q*le,M[1]=G*me+oe*le,M[2]=U*-le+q*me,M[3]=G*-le+oe*me)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(u){const m=a.an(u,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==m&&(this._unmodified=!1,this._pitchInRadians=m,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(u){const m=u/180*Math.PI;this._rollInRadians!==m&&(this._unmodified=!1,this._rollInRadians=m,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.aY(this._fovInRadians)}setFov(u){u=a.an(u,.1,150),this.fov!==u&&(this._unmodified=!1,this._fovInRadians=a.ap(u),this._calcMatrices())}get zoom(){return this._zoom}setZoom(u){const m=this.applyConstrain(this._center,u).zoom;this._zoom!==m&&(this._unmodified=!1,this._zoom=m,this._tileZoom=Math.max(0,Math.floor(m)),this._scale=a.aq(m),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(u){u.lat===this._center.lat&&u.lng===this._center.lng||(this._unmodified=!1,this._center=u,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(u){u!==this._elevation&&(this._elevation=u,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(u){this._edgeInsets.equals(u)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,u,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(u,m){this._autoCalculateNearFarZ=!1,this._nearZ=u,this._farZ=m,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(u){return this._edgeInsets.equals(u)}interpolatePadding(u,m,M){this._unmodified=!1,this._edgeInsets.interpolate(u,m,M),this.constrainInternal(),this._calcMatrices()}resize(u,m,M=!0){this._width=u,this._height=m,M&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Zt([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(u){u?(this._lngRange=[u.getWest(),u.getEast()],this._latRange=[u.getSouth(),u.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-a.ao,a.ao])}getCameraQueryGeometry(u,m){if(m.length===1)return[m[0],u];{const{minX:M,minY:O,maxX:D,maxY:U}=a.ab.fromPoints(m).extend(u);return[new a.P(M,O),new a.P(D,O),new a.P(D,U),new a.P(M,U),new a.P(M,O)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const u=this._unmodified,{center:m,zoom:M}=this.applyConstrain(this.center,this.zoom);this.setCenter(m),this.setZoom(M),this._unmodified=u,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let u=a.ar(new Float64Array(16));a.Q(u,u,[this._width/2,-this._height/2,1]),a.O(u,u,[1,-1,0]),this._clipSpaceToPixelsMatrix=u,u=a.ar(new Float64Array(16)),a.Q(u,u,[1,-1,1]),a.O(u,u,[-1,-1,0]),a.Q(u,u,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=u,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(u,m,M,O){const D=M!==void 0?M:this.bearing,U=O=O!==void 0?O:this.pitch,G=a.aa.fromLngLat(u,m),q=-Math.cos(a.ap(U)),oe=Math.sin(a.ap(U)),le=oe*Math.sin(a.ap(D)),me=-oe*Math.cos(a.ap(D));let pe=this.elevation;const xe=m-pe;let Le;q*xe>=0||Math.abs(q)<.1?(Le=1e4,pe=m+Le*q):Le=-xe/q;let Ve,He,Ze=a.aZ(1,G.y),et=0;do{if(et+=1,et>10)break;He=Le/Ze,Ve=new a.aa(G.x+le*He,G.y+me*He),Ze=1/Ve.meterInMercatorCoordinateUnits()}while(Math.abs(Le-He*Ze)>1e-12);return{center:Ve.toLngLat(),elevation:pe,zoom:a.at(this.height/2/Math.tan(this.fovInRadians/2)/He/this.tileSize)}}recalculateZoomAndCenter(u){if(this.elevation-u==0)return;const m=a.as(1,this.center.lat)*this.worldSize,M=this.cameraToCenterDistance/m,O=a.aa.fromLngLat(this.center,this.elevation),D=at(this.center,this.elevation,this.pitch,this.bearing,M);this._elevation=u;const U=this.calculateCenterFromCameraLngLatAlt(D.toLngLat(),a.aZ(D.z,O.y),this.bearing,this.pitch);this._elevation=U.elevation,this._center=U.center,this.setZoom(U.zoom)}getCameraPoint(){const u=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(u*Math.sin(this.rollInRadians),u*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const u=a.as(1,this.center.lat)*this.worldSize;return at(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/u).toLngLat()}getMercatorTileCoordinates(u){if(!u)return[0,0,1,1];const m=u.canonical.z>=0?1<<u.canonical.z:Math.pow(2,u.canonical.z);return[u.canonical.x/m,u.canonical.y/m,1/m/a.a4,1/m/a.a4]}}class es{constructor(u,m){this.min=u,this.max=m,this.center=a.a_([],a.a$([],this.min,this.max),.5)}quadrant(u){const m=[u%2==0,u<2],M=a.b0(this.min),O=a.b0(this.max);for(let D=0;D<m.length;D++)M[D]=m[D]?this.min[D]:this.center[D],O[D]=m[D]?this.center[D]:this.max[D];return O[2]=this.max[2],new es(M,O)}distanceX(u){return Math.max(Math.min(this.max[0],u[0]),this.min[0])-u[0]}distanceY(u){return Math.max(Math.min(this.max[1],u[1]),this.min[1])-u[1]}intersectsFrustum(u){let m=!0;for(let M=0;M<u.planes.length;M++){const O=this.intersectsPlane(u.planes[M]);if(O===0)return 0;O===1&&(m=!1)}return m?2:u.aabb.min[0]>this.max[0]||u.aabb.min[1]>this.max[1]||u.aabb.min[2]>this.max[2]||u.aabb.max[0]<this.min[0]||u.aabb.max[1]<this.min[1]||u.aabb.max[2]<this.min[2]?0:1}intersectsPlane(u){let m=u[3],M=u[3];for(let O=0;O<3;O++)u[O]>0?(m+=u[O]*this.min[O],M+=u[O]*this.max[O]):(M+=u[O]*this.min[O],m+=u[O]*this.max[O]);return m>=0?2:M<0?0:1}}class Ls{distanceToTile2d(u,m,M,O){const D=O.distanceX([u,m]),U=O.distanceY([u,m]);return Math.hypot(D,U)}getWrap(u,m,M){return M}getTileBoundingVolume(u,m,M,O){var D,U;let G=0,q=0;if(O?.terrain){const le=new a.a1(u.z,m,u.z,u.x,u.y),me=O.terrain.getMinMaxElevation(le);G=(D=me.minElevation)!==null&&D!==void 0?D:Math.min(0,M),q=(U=me.maxElevation)!==null&&U!==void 0?U:Math.max(0,M)}const oe=1<<u.z;return new es([m+u.x/oe,u.y/oe,G],[m+(u.x+1)/oe,(u.y+1)/oe,q])}allowVariableZoom(u,m){const M=u.fov*(Math.abs(Math.cos(u.rollInRadians))*u.height+Math.abs(Math.sin(u.rollInRadians))*u.width)/u.height,O=a.an(78.5-M/2,0,60);return!!m.terrain||u.pitch>O}allowWorldCopies(){return!0}prepareNextFrame(){}}class Us{constructor(u,m,M){this.points=u,this.planes=m,this.aabb=M}static fromInvProjectionMatrix(u,m=1,M=0,O,D){const U=D?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],G=Math.pow(2,M),q=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((pe=>(function(xe,Le,Ve,He){const Ze=a.aG([],xe,Le),et=1/Ze[3]/Ve*He;return a.b5(Ze,Ze,[et,et,1/Ze[3],et])})(pe,u,m,G)));O&&(function(pe,xe,Le,Ve){const He=Ve?4:0,Ze=Ve?0:4;let et=0;const lt=[],Je=[];for(let it=0;it<4;it++){const Ct=a.b1([],pe[it+Ze],pe[it+He]),Nt=a.b6(Ct);a.a_(Ct,Ct,1/Nt),lt.push(Nt),Je.push(Ct)}for(let it=0;it<4;it++){const Ct=a.b7(pe[it+He],Je[it],Le);et=Ct!==null&&Ct>=0?Math.max(et,Ct):Math.max(et,lt[it])}const At=(function(it,Ct){const Nt=a.b1([],it[Ct[0]],it[Ct[1]]),Kt=a.b1([],it[Ct[2]],it[Ct[1]]),Ft=[0,0,0,0];return a.b2(Ft,a.b3([],Nt,Kt)),Ft[3]=-a.b4(Ft,it[Ct[0]]),Ft})(pe,xe),pt=(function(it,Ct){const Nt=a.b8(it),Kt=a.b9([],it,1/Nt),Ft=a.b1([],Ct,a.a_([],Kt,a.b4(Ct,Kt))),jt=a.b8(Ft);if(jt>0){const pn=Math.sqrt(1-Kt[3]*Kt[3]),Sn=a.a_([],Kt,-Kt[3]),rn=a.a$([],Sn,a.a_([],Ft,pn/jt));return a.ba(Ct,rn)}return null})(Le,At);if(pt!==null){const it=pt/a.b4(Je[0],At);et=Math.min(et,it)}for(let it=0;it<4;it++){const Ct=Math.min(et,lt[it]);pe[it+Ze]=[pe[it+He][0]+Je[it][0]*Ct,pe[it+He][1]+Je[it][1]*Ct,pe[it+He][2]+Je[it][2]*Ct,1]}})(q,U[0],O,D);const oe=U.map((pe=>{const xe=a.b1([],q[pe[0]],q[pe[1]]),Le=a.b1([],q[pe[2]],q[pe[1]]),Ve=a.b2([],a.b3([],xe,Le)),He=-a.b4(Ve,q[pe[1]]);return Ve.concat(He)})),le=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],me=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const pe of q)for(let xe=0;xe<3;xe++)le[xe]=Math.min(le[xe],pe[xe]),me[xe]=Math.max(me[xe],pe[xe]);return new Us(q,oe,new es(le,me))}}class Rr{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(u){this._helper.setMinZoom(u)}setMaxZoom(u){this._helper.setMaxZoom(u)}setMinPitch(u){this._helper.setMinPitch(u)}setMaxPitch(u){this._helper.setMaxPitch(u)}setRenderWorldCopies(u){this._helper.setRenderWorldCopies(u)}setBearing(u){this._helper.setBearing(u)}setPitch(u){this._helper.setPitch(u)}setRoll(u){this._helper.setRoll(u)}setFov(u){this._helper.setFov(u)}setZoom(u){this._helper.setZoom(u)}setCenter(u){this._helper.setCenter(u)}setElevation(u){this._helper.setElevation(u)}setMinElevationForCurrentTile(u){this._helper.setMinElevationForCurrentTile(u)}setPadding(u){this._helper.setPadding(u)}interpolatePadding(u,m,M){return this._helper.interpolatePadding(u,m,M)}isPaddingEqual(u){return this._helper.isPaddingEqual(u)}resize(u,m,M=!0){this._helper.resize(u,m,M)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(u){this._helper.setMaxBounds(u)}setConstrainOverride(u){this._helper.setConstrainOverride(u)}overrideNearFarZ(u,m){this._helper.overrideNearFarZ(u,m)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(u){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),u)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(u,m){}constructor(u){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(m,M)=>{M=a.an(+M,this.minZoom,this.maxZoom);const O={center:new a.V(m.lng,m.lat),zoom:M};let D=this._helper._lngRange;if(!this._helper._renderWorldCopies&&D===null){const Je=179.9999999999;D=[-Je,Je]}const U=this.tileSize*a.aq(O.zoom);let G=0,q=U,oe=0,le=U,me=0,pe=0;const{x:xe,y:Le}=this.size;if(this._helper._latRange){const Je=this._helper._latRange;G=a.X(Je[1])*U,q=a.X(Je[0])*U,q-G<Le&&(me=Le/(q-G))}D&&(oe=a.W(a.Y(D[0])*U,0,U),le=a.W(a.Y(D[1])*U,0,U),le<oe&&(le+=U),le-oe<xe&&(pe=xe/(le-oe)));const{x:Ve,y:He}=Ke(U,m);let Ze,et;const lt=Math.max(pe||0,me||0);if(lt){const Je=new a.P(pe?(le+oe)/2:Ve,me?(q+G)/2:He);return O.center=$e(U,Je).wrap(),O.zoom+=a.at(lt),O}if(this._helper._latRange){const Je=Le/2;He-Je<G&&(et=G+Je),He+Je>q&&(et=q-Je)}if(D){const Je=(oe+le)/2;let At=Ve;this._helper._renderWorldCopies&&(At=a.W(Ve,Je-U/2,Je+U/2));const pt=xe/2;At-pt<oe&&(Ze=oe+pt),At+pt>le&&(Ze=le-pt)}if(Ze!==void 0||et!==void 0){const Je=new a.P(Ze??Ve,et??He);O.center=$e(U,Je).wrap()}return O},this.applyConstrain=(m,M)=>this._helper.applyConstrain(m,M),this._helper=new po({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(m,M)=>this.defaultConstrain(m,M)},u),this._coveringTilesDetailsProvider=new Ls}clone(){const u=new Rr;return u.apply(this),u}apply(u,m,M){this._helper.apply(u,m,M)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(u){const m=[new a.bb(0,u)];if(this._helper._renderWorldCopies){const M=this.screenPointToMercatorCoordinate(new a.P(0,0)),O=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),D=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),U=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),G=Math.floor(Math.min(M.x,O.x,D.x,U.x)),q=Math.floor(Math.max(M.x,O.x,D.x,U.x)),oe=1;for(let le=G-oe;le<=q+oe;le++)le!==0&&m.push(new a.bb(le,u))}return m}getCameraFrustum(){return Us.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(u){const m=this.screenPointToLocation(this.centerPoint,u),M=u?u.getElevationForLngLatZoom(m,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(M)}setLocationAtPoint(u,m){const M=a.as(this.elevation,this.center.lat),O=this.screenPointToMercatorCoordinateAtZ(m,M),D=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,M),U=a.aa.fromLngLat(u),G=new a.aa(U.x-(O.x-D.x),U.y-(O.y-D.y));this.setCenter(G?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(u,m){return m?this.coordinatePoint(a.aa.fromLngLat(u),m.getElevationForLngLatZoom(u,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(a.aa.fromLngLat(u))}screenPointToLocation(u,m){var M;return(M=this.screenPointToMercatorCoordinate(u,m))===null||M===void 0?void 0:M.toLngLat()}screenPointToMercatorCoordinate(u,m){if(m){const M=m.pointCoordinate(u);if(M!=null)return M}return this.screenPointToMercatorCoordinateAtZ(u)}screenPointToMercatorCoordinateAtZ(u,m){const M=m||0,O=[u.x,u.y,0,1],D=[u.x,u.y,1,1];a.aG(O,O,this._pixelMatrixInverse),a.aG(D,D,this._pixelMatrixInverse);const U=O[3],G=D[3],q=O[1]/U,oe=D[1]/G,le=O[2]/U,me=D[2]/G,pe=le===me?0:(M-le)/(me-le);return new a.aa(a.G.number(O[0]/U,D[0]/G,pe)/this.worldSize,a.G.number(q,oe,pe)/this.worldSize,M)}coordinatePoint(u,m=0,M=this._pixelMatrix){const O=[u.x*this.worldSize,u.y*this.worldSize,m,1];return a.aG(O,O,M),new a.P(O[0]/O[3],O[1]/O[3])}getBounds(){const u=Math.max(0,this._helper._height/2-rt(this));return new Zt().extend(this.screenPointToLocation(new a.P(0,u))).extend(this.screenPointToLocation(new a.P(this._helper._width,u))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(u,m){return m?m.pointCoordinate(u)!=null:u.y>this.height/2-rt(this)}calculatePosMatrix(u,m=!1,M){var O;const D=(O=u.key)!==null&&O!==void 0?O:a.bc(u.wrap,u.canonical.z,u.canonical.z,u.canonical.x,u.canonical.y),U=m?this._alignedPosMatrixCache:this._posMatrixCache;if(U.has(D)){const oe=U.get(D);return M?oe.f32:oe.f64}const G=Re(u,this.worldSize);a.S(G,m?this._alignedProjMatrix:this._viewProjMatrix,G);const q={f64:G,f32:new Float32Array(G)};return U.set(D,q),M?q.f32:q.f64}calculateFogMatrix(u){const m=u.key,M=this._fogMatrixCacheF32;if(M.has(m))return M.get(m);const O=Re(u,this.worldSize);return a.S(O,this._fogMatrix,O),M.set(m,new Float32Array(O)),M.get(m)}calculateCenterFromCameraLngLatAlt(u,m,M,O){return this._helper.calculateCenterFromCameraLngLatAlt(u,m,M,O)}_calculateNearFarZIfNeeded(u,m,M){if(!this._helper.autoCalculateNearFarZ)return;const O=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),D=u-O*this._helper._pixelPerMeter/Math.cos(m),U=O<0?D:u,G=Math.PI/2+this.pitchInRadians,q=a.ap(this.fov)*(Math.abs(Math.cos(a.ap(this.roll)))*this.height+Math.abs(Math.sin(a.ap(this.roll)))*this.width)/this.height*(.5+M.y/this.height),oe=Math.sin(q)*U/Math.sin(a.an(Math.PI-G-q,.01,Math.PI-.01)),le=rt(this),me=Math.atan(le/this._helper.cameraToCenterDistance),pe=a.ap(.75),xe=me>pe?2*me*(.5+M.y/(2*le)):pe,Le=Math.sin(xe)*U/Math.sin(a.an(Math.PI-G-xe,.01,Math.PI-.01)),Ve=Math.min(oe,Le);this._helper._farZ=1.01*(Math.cos(Math.PI/2-m)*Ve+U),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const u=this.centerOffset,m=Ke(this.worldSize,this.center),M=m.x,O=m.y;this._helper._pixelPerMeter=a.as(1,this.center.lat)*this.worldSize;const D=a.ap(Math.min(this.pitch,C)),U=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(D));let G;this._calculateNearFarZIfNeeded(U,D,u),G=new Float64Array(16),a.bd(G,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.aA(this._invProjMatrix,G),G[8]=2*-u.x/this._helper._width,G[9]=2*u.y/this._helper._height,this._projectionMatrix=a.be(G),a.Q(G,G,[1,-1,1]),a.O(G,G,[0,0,-this._helper.cameraToCenterDistance]),a.bf(G,G,-this.rollInRadians),a.bg(G,G,this.pitchInRadians),a.bf(G,G,-this.bearingInRadians),a.O(G,G,[-M,-O,0]),this._mercatorMatrix=a.Q([],G,[this.worldSize,this.worldSize,this.worldSize]),a.Q(G,G,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,G),a.O(G,G,[0,0,-this.elevation]),this._viewProjMatrix=G,this._invViewProjMatrix=a.aA([],G);const q=[0,0,-1,1];a.aG(q,q,this._invViewProjMatrix),this._cameraPosition=[q[0]/q[3],q[1]/q[3],q[2]/q[3]],this._fogMatrix=new Float64Array(16),a.bd(this._fogMatrix,this.fovInRadians,this.width/this.height,U,this._helper._farZ),this._fogMatrix[8]=2*-u.x/this.width,this._fogMatrix[9]=2*u.y/this.height,a.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.bf(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.bg(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.bf(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.O(this._fogMatrix,this._fogMatrix,[-M,-O,0]),a.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,G);const oe=this._helper._width%2/2,le=this._helper._height%2/2,me=Math.cos(this.bearingInRadians),pe=Math.sin(-this.bearingInRadians),xe=M-Math.round(M)+me*oe+pe*le,Le=O-Math.round(O)+me*le+pe*oe,Ve=new Float64Array(G);if(a.O(Ve,Ve,[xe>.5?xe-1:xe,Le>.5?Le-1:Le,0]),this._alignedProjMatrix=Ve,G=a.aA(new Float64Array(16),this._pixelMatrix),!G)throw new Error("failed to invert matrix");this._pixelMatrixInverse=G,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const u=this.screenPointToMercatorCoordinate(new a.P(0,0)),m=[u.x*this.worldSize,u.y*this.worldSize,0,1];return a.aG(m,m,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const u=a.as(1,this.center.lat)*this.worldSize;return at(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/u).toLngLat()}lngLatToCameraDepth(u,m){const M=a.aa.fromLngLat(u),O=[M.x*this.worldSize,M.y*this.worldSize,m,1];return a.aG(O,O,this._viewProjMatrix),O[2]/O[3]}getProjectionData(u){const{overscaledTileID:m,aligned:M,applyTerrainMatrix:O}=u,D=this._helper.getMercatorTileCoordinates(m),U=m?this.calculatePosMatrix(m,M,!0):null;let G;return G=m&&m.terrainRttPosMatrix32f&&O?m.terrainRttPosMatrix32f:U||a.bh(),{mainMatrix:G,tileMercatorCoords:D,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:G}}isLocationOccluded(u){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(u,m,M){return 1}transformLightDirection(u){return a.b0(u)}getRayDirectionFromPixel(u){throw new Error("Not implemented.")}projectTileCoordinates(u,m,M,O){const D=this.calculatePosMatrix(M);let U;O?(U=[u,m,O(u,m),1],a.aG(U,U,D)):(U=[u,m,0,1],Xo(U,U,D));const G=U[3];return{point:new a.P(U[0]/G,U[1]/G),signedDistanceFromCamera:G,isOccluded:!1}}populateCache(u){for(const m of u)this.calculatePosMatrix(m)}getMatrixForModel(u,m){const M=a.aa.fromLngLat(u,m),O=M.meterInMercatorCoordinateUnits(),D=a.bi();return a.O(D,D,[M.x,M.y,M.z]),a.bf(D,D,Math.PI),a.bg(D,D,Math.PI/2),a.Q(D,D,[-O,O,O]),D}getProjectionDataForCustomLayer(u=!0){const m=new a.a1(0,0,0,0,0),M=this.getProjectionData({overscaledTileID:m,applyGlobeMatrix:u}),O=Re(m,this.worldSize);a.S(O,this._viewProjMatrix,O),M.tileMercatorCoords=[0,0,1,1];const D=[a.a4,a.a4,this.worldSize/this._helper.pixelsPerMeter],U=a.bj();return a.Q(U,O,D),M.fallbackMatrix=U,M.mainMatrix=U,M}getFastPathSimpleProjectionMatrix(u){return this.calculatePosMatrix(u)}}function _r(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function yr(T){if(T.useSlerp)if(T.k<1){const u=a.bk(T.startEulerAngles.roll,T.startEulerAngles.pitch,T.startEulerAngles.bearing),m=a.bk(T.endEulerAngles.roll,T.endEulerAngles.pitch,T.endEulerAngles.bearing),M=new Float64Array(4);a.bl(M,u,m,T.k);const O=a.bm(M);T.tr.setRoll(O.roll),T.tr.setPitch(O.pitch),T.tr.setBearing(O.bearing)}else T.tr.setRoll(T.endEulerAngles.roll),T.tr.setPitch(T.endEulerAngles.pitch),T.tr.setBearing(T.endEulerAngles.bearing);else T.tr.setRoll(a.G.number(T.startEulerAngles.roll,T.endEulerAngles.roll,T.k)),T.tr.setPitch(a.G.number(T.startEulerAngles.pitch,T.endEulerAngles.pitch,T.k)),T.tr.setBearing(a.G.number(T.startEulerAngles.bearing,T.endEulerAngles.bearing,T.k))}function J(T,u,m,M,O){const D=O.padding,U=Ke(O.worldSize,m.getNorthWest()),G=Ke(O.worldSize,m.getNorthEast()),q=Ke(O.worldSize,m.getSouthEast()),oe=Ke(O.worldSize,m.getSouthWest()),le=a.ap(-M),me=U.rotate(le),pe=G.rotate(le),xe=q.rotate(le),Le=oe.rotate(le),Ve=new a.P(Math.max(me.x,pe.x,Le.x,xe.x),Math.max(me.y,pe.y,Le.y,xe.y)),He=new a.P(Math.min(me.x,pe.x,Le.x,xe.x),Math.min(me.y,pe.y,Le.y,xe.y)),Ze=Ve.sub(He),et=(O.width-(D.left+D.right+u.left+u.right))/Ze.x,lt=(O.height-(D.top+D.bottom+u.top+u.bottom))/Ze.y;if(lt<0||et<0)return void _r();const Je=Math.min(a.at(O.scale*Math.min(et,lt)),T.maxZoom),At=a.P.convert(T.offset),pt=new a.P((u.left-u.right)/2,(u.top-u.bottom)/2).rotate(a.ap(M)),it=At.add(pt).mult(O.scale/a.aq(Je));return{center:$e(O.worldSize,U.add(q).div(2).sub(it)),zoom:Je,bearing:M}}class ge{get useGlobeControls(){return!1}handlePanInertia(u,m){const M=u.mag(),O=Math.abs(rt(m));return{easingOffset:u.mult(Math.min(.75*O/M,1)),easingCenter:m.center}}handleMapControlsRollPitchBearingZoom(u,m){u.bearingDelta&&m.setBearing(m.bearing+u.bearingDelta),u.pitchDelta&&m.setPitch(m.pitch+u.pitchDelta),u.rollDelta&&m.setRoll(m.roll+u.rollDelta),u.zoomDelta&&m.setZoom(m.zoom+u.zoomDelta)}handleMapControlsPan(u,m,M){u.around.distSqr(m.centerPoint)<.01||m.setLocationAtPoint(M,u.around)}cameraForBoxAndBearing(u,m,M,O,D){return J(u,m,M,O,D)}handleJumpToCenterZoom(u,m){u.zoom!==(m.zoom!==void 0?+m.zoom:u.zoom)&&u.setZoom(+m.zoom),m.center!==void 0&&u.setCenter(a.V.convert(m.center))}handleEaseTo(u,m){const M=u.zoom,O=u.padding,D={roll:u.roll,pitch:u.pitch,bearing:u.bearing},U={roll:m.roll===void 0?u.roll:m.roll,pitch:m.pitch===void 0?u.pitch:m.pitch,bearing:m.bearing===void 0?u.bearing:m.bearing},G=m.zoom!==void 0,q=!u.isPaddingEqual(m.padding);let oe=!1;const le=G?+m.zoom:u.zoom;let me=u.centerPoint.add(m.offsetAsPoint);const pe=u.screenPointToLocation(me),{center:xe,zoom:Le}=u.applyConstrain(a.V.convert(m.center||pe),le??M);Ic(u,xe);const Ve=Ke(u.worldSize,pe),He=Ke(u.worldSize,xe).sub(Ve),Ze=a.aq(Le-M);return oe=Le!==M,{easeFunc:et=>{if(oe&&u.setZoom(a.G.number(M,Le,et)),a.bn(D,U)||yr({startEulerAngles:D,endEulerAngles:U,tr:u,k:et,useSlerp:D.roll!=U.roll}),q&&(u.interpolatePadding(O,m.padding,et),me=u.centerPoint.add(m.offsetAsPoint)),m.around)u.setLocationAtPoint(m.around,m.aroundPoint);else{const lt=a.aq(u.zoom-M),Je=Le>M?Math.min(2,Ze):Math.max(.5,Ze),At=Math.pow(Je,1-et),pt=$e(u.worldSize,Ve.add(He.mult(et*At)).mult(lt));u.setLocationAtPoint(u.renderWorldCopies?pt.wrap():pt,me)}},isZooming:oe,elevationCenter:xe}}handleFlyTo(u,m){const M=m.zoom!==void 0,O=u.zoom,D=u.applyConstrain(a.V.convert(m.center||m.locationAtOffset),M?+m.zoom:O),U=D.center,G=D.zoom;Ic(u,U);const q=Ke(u.worldSize,m.locationAtOffset),oe=Ke(u.worldSize,U).sub(q),le=oe.mag(),me=a.aq(G-O);let pe;if(m.minZoom!==void 0){const xe=Math.min(+m.minZoom,O,G),Le=u.applyConstrain(U,xe).zoom;pe=a.aq(Le-O)}return{easeFunc:(xe,Le,Ve,He)=>{u.setZoom(xe===1?G:O+a.at(Le));const Ze=xe===1?U:$e(u.worldSize,q.add(oe.mult(Ve)).mult(Le));u.setLocationAtPoint(u.renderWorldCopies?Ze.wrap():Ze,He)},scaleOfZoom:me,targetCenter:U,scaleOfMinZoom:pe,pixelPathLength:le}}}class Ge{constructor(u,m,M){this.blendFunction=u,this.blendColor=m,this.mask=M}}Ge.Replace=[1,0],Ge.disabled=new Ge(Ge.Replace,a.bo.transparent,[!1,!1,!1,!1]),Ge.unblended=new Ge(Ge.Replace,a.bo.transparent,[!0,!0,!0,!0]),Ge.alphaBlended=new Ge([1,771],a.bo.transparent,[!0,!0,!0,!0]);const bt=2305;class bn{constructor(u,m,M){this.enable=u,this.mode=m,this.frontFace=M}}bn.disabled=new bn(!1,1029,bt),bn.backCCW=new bn(!0,1029,bt),bn.frontCCW=new bn(!0,1028,bt);class Xt{constructor(u,m,M){this.func=u,this.mask=m,this.range=M}}Xt.ReadOnly=!1,Xt.ReadWrite=!0,Xt.disabled=new Xt(519,Xt.ReadOnly,[0,1]);const hi=7680;class Pn{constructor(u,m,M,O,D,U){this.test=u,this.ref=m,this.mask=M,this.fail=O,this.depthFail=D,this.pass=U}}Pn.disabled=new Pn({func:519,mask:0},0,0,hi,hi,hi);const Ci=new WeakMap;function ni(T){var u;if(Ci.has(T))return Ci.get(T);{const m=(u=T.getParameter(T.VERSION))===null||u===void 0?void 0:u.startsWith("WebGL 2.0");return Ci.set(T,m),m}}class Hi{get awaitingQuery(){return!!this._readbackQueue}constructor(u){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=u;const m=u.context,M=m.gl;this._texFormat=M.RGBA,this._texType=M.UNSIGNED_BYTE;const O=new a.aV;O.emplaceBack(-1,-1),O.emplaceBack(2,-1),O.emplaceBack(-1,2);const D=new a.aX;D.emplaceBack(0,1,2),this._fullscreenTriangle=new Vr(m.createVertexBuffer(O,yo.members),m.createIndexBuffer(D),a.aW.simpleSegment(0,0,O.length,D.length)),this._resultBuffer=new Uint8Array(4),m.activeTexture.set(M.TEXTURE1);const U=M.createTexture();M.bindTexture(M.TEXTURE_2D,U),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_S,M.CLAMP_TO_EDGE),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_T,M.CLAMP_TO_EDGE),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MIN_FILTER,M.NEAREST),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MAG_FILTER,M.NEAREST),M.texImage2D(M.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=m.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(U),ni(M)&&(this._pbo=M.createBuffer(),M.bindBuffer(M.PIXEL_PACK_BUFFER,this._pbo),M.bufferData(M.PIXEL_PACK_BUFFER,4,M.STREAM_READ),M.bindBuffer(M.PIXEL_PACK_BUFFER,null))}destroy(){const u=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),u.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(u,m){const M=this._updateCount;return this._readbackQueue?M>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():M>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(u,m),this._updateCount++,this._measuredError}_bindFramebuffer(){const u=this._cachedRenderContext.context,m=u.gl;u.activeTexture.set(m.TEXTURE1),m.bindTexture(m.TEXTURE_2D,this._fbo.colorAttachment.get()),u.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(u,m){const M=this._cachedRenderContext.context,O=M.gl;if(this._bindFramebuffer(),M.viewport.set([0,0,this._texWidth,this._texHeight]),M.clear({color:a.bo.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(M,O.TRIANGLES,Xt.disabled,Pn.disabled,Ge.unblended,bn.disabled,((D,U)=>({u_input:D,u_output_expected:U}))(u,m),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&ni(O)){O.bindBuffer(O.PIXEL_PACK_BUFFER,this._pbo),O.readBuffer(O.COLOR_ATTACHMENT0),O.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),O.bindBuffer(O.PIXEL_PACK_BUFFER,null);const D=O.fenceSync(O.SYNC_GPU_COMMANDS_COMPLETE,0);O.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:D}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const u=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&ni(u)){const m=u.clientWaitSync(this._readbackQueue.sync,0,0);if(m===u.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(m===u.TIMEOUT_EXPIRED)return;u.bindBuffer(u.PIXEL_PACK_BUFFER,this._pbo),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),u.bindBuffer(u.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),u.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Hi._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(u){let m=0;return m+=u[0]/256,m+=u[1]/65536,m+=u[2]/16777216,u[3]<127&&(m=-m),m/128}}const xr=a.a4/128;function ir(T,u){const m=T.granularity!==void 0?Math.max(T.granularity,1):1,M=m+(T.generateBorders?2:0),O=m+(T.extendToNorthPole||T.generateBorders?1:0)+(T.extendToSouthPole||T.generateBorders?1:0),D=M+1,U=O+1,G=T.generateBorders?-1:0,q=T.generateBorders||T.extendToNorthPole?-1:0,oe=m+(T.generateBorders?1:0),le=m+(T.generateBorders||T.extendToSouthPole?1:0),me=D*U,pe=M*O*6,xe=D*U>65536;if(xe&&u==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const Le=xe||u==="32bit",Ve=new Int16Array(2*me);let He=0;for(let lt=q;lt<=le;lt++)for(let Je=G;Je<=oe;Je++){let At=Je/m*a.a4;Je===-1&&(At=-xr),Je===m+1&&(At=a.a4+xr);let pt=lt/m*a.a4;lt===-1&&(pt=T.extendToNorthPole?a.bq:-xr),lt===m+1&&(pt=T.extendToSouthPole?a.br:a.a4+xr),Ve[He++]=At,Ve[He++]=pt}const Ze=Le?new Uint32Array(pe):new Uint16Array(pe);let et=0;for(let lt=0;lt<O;lt++)for(let Je=0;Je<M;Je++){const At=Je+1+lt*D,pt=Je+(lt+1)*D,it=Je+1+(lt+1)*D;Ze[et++]=Je+lt*D,Ze[et++]=pt,Ze[et++]=At,Ze[et++]=At,Ze[et++]=pt,Ze[et++]=it}return{vertices:Ve.buffer.slice(0),indices:Ze.buffer.slice(0),uses32bitIndices:Le}}const Zi=new a.aU({fill:new a.bs(128,2),line:new a.bs(512,0),tile:new a.bs(128,32),stencil:new a.bs(128,1),circle:3});class Or{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Qs.projectionGlobe}get vertexShaderPreludeCode(){return Qs.projectionMercator.vertexSource}get subdivisionGranularity(){return Zi}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(u){this._errorMeasurement||(this._errorMeasurement=new Hi(u));const m=a.X(this._errorQueryLatitudeDegrees),M=2*Math.atan(Math.exp(Math.PI-m*Math.PI*2))-.5*Math.PI,O=this._errorMeasurement.updateErrorLoop(m,M),D=K();O!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=O,this._errorMeasurementLastChangeTime=D);const U=Math.min(Math.max((D-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bt(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bu(U))}_getMeshKey(u){return`${u.granularity.toString(36)}_${u.generateBorders?"b":""}${u.extendToNorthPole?"n":""}${u.extendToSouthPole?"s":""}`}getMeshFromTileID(u,m,M,O,D){const U=(D==="stencil"?Zi.stencil:Zi.tile).getGranularityForZoomLevel(m.z);return this._getMesh(u,{granularity:U,generateBorders:M,extendToNorthPole:m.y===0&&O,extendToSouthPole:m.y===(1<<m.z)-1&&O})}_getMesh(u,m){const M=this._getMeshKey(m);if(M in this._tileMeshCache)return this._tileMeshCache[M];const O=(function(D,U){const G=ir(U,"16bit"),q=a.aV.deserialize({arrayBuffer:G.vertices,length:G.vertices.byteLength/2/2}),oe=a.aX.deserialize({arrayBuffer:G.indices,length:G.indices.byteLength/2/3});return new Vr(D.createVertexBuffer(q,yo.members),D.createIndexBuffer(oe),a.aW.simpleSegment(0,0,q.length,oe.length))})(u,m);return this._tileMeshCache[M]=O,O}recalculate(u){}hasTransition(){const u=K();let m=!1;return m=m||(u-this._errorMeasurementLastChangeTime)/1e3<.7,m=m||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,m}setErrorQueryLatitudeDegrees(u){this._errorQueryLatitudeDegrees=u}}const Ks=new a.t({type:new a.D(a.u.projection.type)});class Oo extends a.E{constructor(u){super(),this._transitionable=new a.x(Ks,void 0),this.setProjection(u),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.H(0)),this._mercatorProjection=new Lo,this._verticalPerspectiveProjection=new Or}get transitionState(){const u=this.properties.get("type");if(typeof u=="string"&&u==="mercator")return 0;if(typeof u=="string"&&u==="vertical-perspective")return 1;if(u instanceof a.bv){if(u.from==="vertical-perspective"&&u.to==="mercator")return 1-u.transition;if(u.from==="mercator"&&u.to==="vertical-perspective")return u.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(u){this._mercatorProjection.updateGPUdependent(u),this._verticalPerspectiveProjection.updateGPUdependent(u)}getMeshFromTileID(u,m,M,O,D){return this.currentProjection.getMeshFromTileID(u,m,M,O,D)}setProjection(u){this._transitionable.setValue("type",u?.type||"mercator")}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}setErrorQueryLatitudeDegrees(u){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(u),this._mercatorProjection.setErrorQueryLatitudeDegrees(u)}}function Oa(T){const u=ts(T.worldSize,T.center.lat);return 2*Math.PI*u}function Za(T,u,m,M,O){const D=1/(1<<O),U=u/a.a4*D+M*D,G=a.bx((T/a.a4*D+m*D)*Math.PI*2+Math.PI,2*Math.PI),q=2*Math.atan(Math.exp(Math.PI-U*Math.PI*2))-.5*Math.PI,oe=Math.cos(q),le=new Float64Array(3);return le[0]=Math.sin(G)*oe,le[1]=Math.sin(q),le[2]=Math.cos(G)*oe,le}function Uo(T){return(function(u,m){const M=Math.cos(m),O=new Float64Array(3);return O[0]=Math.sin(u)*M,O[1]=Math.sin(m),O[2]=Math.cos(u)*M,O})(T.lng*Math.PI/180,T.lat*Math.PI/180)}function ts(T,u){return T/(2*Math.PI)/Math.cos(u*Math.PI/180)}function q1(T){const u=Math.asin(T[1])/Math.PI*180,m=Math.sqrt(T[0]*T[0]+T[2]*T[2]);if(m>1e-6){const M=T[0]/m,O=Math.acos(T[2]/m),D=(M>0?O:-O)/Math.PI*180;return new a.V(a.W(D,-180,180),u)}return new a.V(0,u)}function Io(T){return Math.cos(T*Math.PI/180)}function ya(T,u){const m=Io(T),M=Io(u);return a.at(M/m)}function Xu(T,u){const m=T.rotate(u.bearingInRadians),M=u.zoom+ya(u.center.lat,0),O=a.bt(1/Io(u.center.lat),1/Io(Math.min(Math.abs(u.center.lat),60)),a.bw(M,7,3,0,1)),D=360/Oa({worldSize:u.worldSize,center:{lat:u.center.lat}});return new a.V(u.center.lng-m.x*D*O,a.an(u.center.lat+m.y*D,-a.ao,a.ao))}function Iu(T){const u=.5*T,m=Math.sin(u),M=Math.cos(u);return Math.log(m+M)-Math.log(M-m)}function Cf(T,u,m,M){const O=T.lat+m*M;if(Math.abs(m)>1){const D=(Math.sign(T.lat+m)!==Math.sign(T.lat)?-Math.abs(T.lat):Math.abs(T.lat))*Math.PI/180,U=Math.abs(T.lat+m)*Math.PI/180,G=Iu(D+M*(U-D)),q=Iu(D),oe=Iu(U);return new a.V(T.lng+u*((G-q)/(oe-q)),O)}return new a.V(T.lng+u*M,O)}class _f{constructor(u){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=u}swapBuffers(){if(!this._hadAnyChanges)return;const u=this._cachePrevious;this._cachePrevious=this._cache,this._cache=u,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(u,m,M,O){const D=`${u.z}_${u.x}_${u.y}_${O?.terrain?"t":""}`,U=this._cache.get(D);if(U)return U;const G=this._cachePrevious.get(D);if(G)return this._cache.set(D,G),G;const q=this._boundingVolumeFactory(u,m,M,O);return this._cache.set(D,q),this._hadAnyChanges=!0,q}}class $r{constructor(u,m,M,O){this.min=M,this.max=O,this.points=u,this.planes=m}static fromAabb(u,m){const M=[];for(let O=0;O<8;O++)M.push([1&~O?u[0]:m[0],(O>>1&1)==1?m[1]:u[1],(O>>2&1)==1?m[2]:u[2]]);return new $r(M,[[-1,0,0,m[0]],[1,0,0,-u[0]],[0,-1,0,m[1]],[0,1,0,-u[1]],[0,0,-1,m[2]],[0,0,1,-u[2]]],u,m)}static fromCenterSizeAngles(u,m,M){const O=a.bA([],M[0],M[1],M[2]),D=a.bB([],[m[0],0,0],O),U=a.bB([],[0,m[1],0],O),G=a.bB([],[0,0,m[2]],O),q=[...u],oe=[...u];for(let me=0;me<8;me++)for(let pe=0;pe<3;pe++){const xe=u[pe]+D[pe]*(1&~me?-1:1)+U[pe]*((me>>1&1)==1?1:-1)+G[pe]*((me>>2&1)==1?1:-1);q[pe]=Math.min(q[pe],xe),oe[pe]=Math.max(oe[pe],xe)}const le=[];for(let me=0;me<8;me++){const pe=[...u];a.a$(pe,pe,a.a_([],D,1&~me?-1:1)),a.a$(pe,pe,a.a_([],U,(me>>1&1)==1?1:-1)),a.a$(pe,pe,a.a_([],G,(me>>2&1)==1?1:-1)),le.push(pe)}return new $r(le,[[...D,-a.b4(D,le[0])],[...U,-a.b4(U,le[0])],[...G,-a.b4(G,le[0])],[-D[0],-D[1],-D[2],-a.b4(D,le[7])],[-U[0],-U[1],-U[2],-a.b4(U,le[7])],[-G[0],-G[1],-G[2],-a.b4(G,le[7])]],q,oe)}intersectsFrustum(u){let m=!0;const M=this.points.length,O=this.planes.length,D=u.planes.length,U=u.points.length;for(let G=0;G<D;G++){const q=u.planes[G];let oe=0;for(let le=0;le<M;le++){const me=this.points[le];q[0]*me[0]+q[1]*me[1]+q[2]*me[2]+q[3]>=0&&oe++}if(oe===0)return 0;oe<M&&(m=!1)}if(m)return 2;for(let G=0;G<O;G++){const q=this.planes[G];let oe=0;for(let le=0;le<U;le++){const me=u.points[le];q[0]*me[0]+q[1]*me[1]+q[2]*me[2]+q[3]>=0&&oe++}if(oe===0)return 0}return 1}intersectsPlane(u){const m=this.points.length;let M=0;for(let O=0;O<m;O++){const D=this.points[O];u[0]*D[0]+u[1]*D[1]+u[2]*D[2]+u[3]>=0&&M++}return M===m?2:M===0?0:1}}function Tc(T,u,m){const M=T-u;return M<0?-M:Math.max(0,M-m)}function Ep(T,u,m,M,O){const D=T-m;let U;return U=D<0?Math.min(-D,1+D-O):D>1?Math.min(Math.max(D-O,0),1-D):0,Math.max(U,Tc(u,M,O))}class Y1{constructor(){this._boundingVolumeCache=new _f(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(u,m,M,O){const D=1<<M.z,U=1/D,G=M.x/D,q=M.y/D;let oe=2;return oe=Math.min(oe,Ep(u,m,G,q,U)),oe=Math.min(oe,Ep(u,m,G+.5,-q-U,U)),oe=Math.min(oe,Ep(u,m,G+.5,2-q-U,U)),oe}getWrap(u,m,M){const O=1<<m.z,D=1/O,U=m.x/O,G=Tc(u.x,U,D),q=Tc(u.x,U-1,D),oe=Tc(u.x,U+1,D),le=Math.min(G,q,oe);return le===oe?1:le===q?-1:0}allowVariableZoom(u,m){return Tn(u,m)>4}allowWorldCopies(){return!1}getTileBoundingVolume(u,m,M,O){return this._boundingVolumeCache.getTileBoundingVolume(u,m,M,O)}_computeTileBoundingVolume(u,m,M,O){var D,U;let G=0,q=0;if(O?.terrain){const oe=new a.a1(u.z,m,u.z,u.x,u.y),le=O.terrain.getMinMaxElevation(oe);G=(D=le.minElevation)!==null&&D!==void 0?D:Math.min(0,M),q=(U=le.maxElevation)!==null&&U!==void 0?U:Math.max(0,M)}if(G/=a.bD,q/=a.bD,G+=1,q+=1,u.z<=0)return $r.fromAabb([-q,-q,-q],[q,q,q]);if(u.z===1)return $r.fromAabb([u.x===0?-q:0,u.y===0?0:-q,-q],[u.x===0?0:q,u.y===0?q:0,q]);{const oe=[Za(0,0,u.x,u.y,u.z),Za(a.a4,0,u.x,u.y,u.z),Za(a.a4,a.a4,u.x,u.y,u.z),Za(0,a.a4,u.x,u.y,u.z)],le=[];for(const Ft of oe)le.push(a.a_([],Ft,q));if(q!==G)for(const Ft of oe)le.push(a.a_([],Ft,G));u.y===0&&le.push([0,1,0]),u.y===(1<<u.z)-1&&le.push([0,-1,0]);const me=[1,1,1],pe=[-1,-1,-1];for(const Ft of le)for(let jt=0;jt<3;jt++)me[jt]=Math.min(me[jt],Ft[jt]),pe[jt]=Math.max(pe[jt],Ft[jt]);const xe=Za(a.a4/2,a.a4/2,u.x,u.y,u.z),Le=a.b3([],[0,1,0],xe);a.b2(Le,Le);const Ve=a.b3([],xe,Le);a.b2(Ve,Ve);const He=a.b3([],oe[2],oe[1]);a.b2(He,He);const Ze=a.b3([],oe[0],oe[3]);a.b2(Ze,Ze),le.push(a.a_([],xe,q)),u.y>=(1<<u.z)/2&&le.push(a.a_([],Za(a.a4/2,0,u.x,u.y,u.z),q)),u.y<(1<<u.z)/2&&le.push(a.a_([],Za(a.a4/2,a.a4,u.x,u.y,u.z),q));const et=Hm(xe,le),lt=Hm(Ve,le),Je=[-xe[0],-xe[1],-xe[2],et.max],At=[xe[0],xe[1],xe[2],-et.min],pt=[-Ve[0],-Ve[1],-Ve[2],lt.max],it=[Ve[0],Ve[1],Ve[2],-lt.min],Ct=[...He,0],Nt=[...Ze,0],Kt=[];return u.y===0?Kt.push(a.bC(Nt,Ct,Je),a.bC(Nt,Ct,At)):Kt.push(a.bC(pt,Ct,Je),a.bC(pt,Ct,At),a.bC(pt,Nt,Je),a.bC(pt,Nt,At)),u.y===(1<<u.z)-1?Kt.push(a.bC(Nt,Ct,Je),a.bC(Nt,Ct,At)):Kt.push(a.bC(it,Ct,Je),a.bC(it,Ct,At),a.bC(it,Nt,Je),a.bC(it,Nt,At)),new $r(Kt,[Je,At,pt,it,Ct,Nt],me,pe)}}}function Hm(T,u){let m=1/0,M=-1/0;for(const O of u){const D=a.b4(T,O);m=Math.min(m,D),M=Math.max(M,D)}return{min:m,max:M}}class Zm{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(u){this._helper.setMinZoom(u)}setMaxZoom(u){this._helper.setMaxZoom(u)}setMinPitch(u){this._helper.setMinPitch(u)}setMaxPitch(u){this._helper.setMaxPitch(u)}setRenderWorldCopies(u){this._helper.setRenderWorldCopies(u)}setBearing(u){this._helper.setBearing(u)}setPitch(u){this._helper.setPitch(u)}setRoll(u){this._helper.setRoll(u)}setFov(u){this._helper.setFov(u)}setZoom(u){this._helper.setZoom(u)}setCenter(u){this._helper.setCenter(u)}setElevation(u){this._helper.setElevation(u)}setMinElevationForCurrentTile(u){this._helper.setMinElevationForCurrentTile(u)}setPadding(u){this._helper.setPadding(u)}interpolatePadding(u,m,M){return this._helper.interpolatePadding(u,m,M)}isPaddingEqual(u){return this._helper.isPaddingEqual(u)}resize(u,m){this._helper.resize(u,m)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(u){this._helper.setMaxBounds(u)}setConstrainOverride(u){this._helper.setConstrainOverride(u)}overrideNearFarZ(u,m){this._helper.overrideNearFarZ(u,m)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(u){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),u)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(u){}constructor(u){this._cachedClippingPlane=a.bE(),this._projectionMatrix=a.bi(),this._globeViewProjMatrix32f=a.bh(),this._globeViewProjMatrixNoCorrection=a.bi(),this._globeViewProjMatrixNoCorrectionInverted=a.bi(),this._globeProjMatrixInverted=a.bi(),this._cameraPosition=a.by(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(m,M)=>{const O=a.an(m.lat,-a.ao,a.ao),D=a.an(+M,this.minZoom+ya(0,O),this.maxZoom);return{center:new a.V(m.lng,O),zoom:D}},this.applyConstrain=(m,M)=>this._helper.applyConstrain(m,M),this._helper=new po({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(m,M)=>this.defaultConstrain(m,M)},u),this._coveringTilesDetailsProvider=new Y1}clone(){const u=new Zm;return u.apply(this),u}apply(u,m){this._globeLatitudeErrorCorrectionRadians=m||0,this._helper.apply(u)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const u=a.by();return u[0]=this._cameraPosition[0],u[1]=this._cameraPosition[1],u[2]=this._cameraPosition[2],u}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(u){const{overscaledTileID:m,applyGlobeMatrix:M}=u,O=this._helper.getMercatorTileCoordinates(m);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:O,clippingPlane:this._cachedClippingPlane,projectionTransition:M?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(u){const m=this.pitchInRadians,M=this.cameraToCenterDistance/u,O=Math.sin(m)*M,D=Math.cos(m)*M+1,U=1/Math.sqrt(O*O+D*D)*1;let G=-O,q=D;const oe=Math.sqrt(G*G+q*q);G/=oe,q/=oe;const le=[0,G,q];a.bF(le,le,[0,0,0],-this.bearingInRadians),a.bG(le,le,[0,0,0],-1*this.center.lat*Math.PI/180),a.bH(le,le,[0,0,0],this.center.lng*Math.PI/180);const me=1/a.b6(le);return a.a_(le,le,me),[...le,-U*me]}isLocationOccluded(u){return!this.isSurfacePointVisible(Uo(u))}transformLightDirection(u){const m=this._helper._center.lng*Math.PI/180,M=this._helper._center.lat*Math.PI/180,O=Math.cos(M),D=[Math.sin(m)*O,Math.sin(M),Math.cos(m)*O],U=[D[2],0,-D[0]],G=[0,0,0];a.b3(G,U,D),a.b2(U,U),a.b2(G,G);const q=[0,0,0];return a.b2(q,[U[0]*u[0]+G[0]*u[1]+D[0]*u[2],U[1]*u[0]+G[1]*u[1]+D[1]*u[2],U[2]*u[0]+G[2]*u[1]+D[2]*u[2]]),q}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(u,m,M){const O=(function(G,q,oe){const le=1/(1<<oe.z);return new a.aa(G/a.a4*le+oe.x*le,q/a.a4*le+oe.y*le)})(u,m,M.canonical),D=(U=O.y,[a.bx(O.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-U*Math.PI*2))-.5*Math.PI]);var U;return this.getCircleRadiusCorrection()/Math.cos(D[1])}projectTileCoordinates(u,m,M,O){const D=M.canonical,U=Za(u,m,D.x,D.y,D.z),G=1+(O?O(u,m):0)/a.bD,q=[U[0]*G,U[1]*G,U[2]*G,1];a.aG(q,q,this._globeViewProjMatrixNoCorrection);const oe=this._cachedClippingPlane,le=oe[0]*U[0]+oe[1]*U[1]+oe[2]*U[2]+oe[3]<0;return{point:new a.P(q[0]/q[3],q[1]/q[3]),signedDistanceFromCamera:q[3],isOccluded:le}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const u=ts(this.worldSize,this.center.lat),m=a.bj(),M=a.bj();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*u),a.bd(m,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const O=this.centerOffset;m[8]=2*-O.x/this._helper._width,m[9]=2*O.y/this._helper._height,this._projectionMatrix=a.be(m),this._globeProjMatrixInverted=a.bj(),a.aA(this._globeProjMatrixInverted,m),a.O(m,m,[0,0,-this.cameraToCenterDistance]),a.bf(m,m,this.rollInRadians),a.bg(m,m,-this.pitchInRadians),a.bf(m,m,this.bearingInRadians),a.O(m,m,[0,0,-u]);const D=a.by();D[0]=u,D[1]=u,D[2]=u,a.bg(M,m,this.center.lat*Math.PI/180),a.bI(M,M,-this.center.lng*Math.PI/180),a.Q(M,M,D),this._globeViewProjMatrixNoCorrection=M,a.bg(m,m,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.bI(m,m,-this.center.lng*Math.PI/180),a.Q(m,m,D),this._globeViewProjMatrix32f=new Float32Array(m),this._globeViewProjMatrixNoCorrectionInverted=a.bj(),a.aA(this._globeViewProjMatrixNoCorrectionInverted,M);const U=a.by();this._cameraPosition=a.by(),this._cameraPosition[2]=this.cameraToCenterDistance/u,a.bF(this._cameraPosition,this._cameraPosition,U,-this.rollInRadians),a.bG(this._cameraPosition,this._cameraPosition,U,this.pitchInRadians),a.bF(this._cameraPosition,this._cameraPosition,U,-this.bearingInRadians),a.a$(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bG(this._cameraPosition,this._cameraPosition,U,-this.center.lat*Math.PI/180),a.bH(this._cameraPosition,this._cameraPosition,U,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(u);const G=a.be(this._globeViewProjMatrixNoCorrectionInverted);a.Q(G,G,[1,1,-1]),this._cachedFrustum=Us.fromInvProjectionMatrix(G,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(u){a.w("calculateFogMatrix is not supported on globe projection.");const m=a.bj();return a.ar(m),m}getVisibleUnwrappedCoordinates(u){return[new a.bb(0,u)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(u){u&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(u,m){if(!this._globeViewProjMatrixNoCorrection)return 1;const M=Uo(u);a.a_(M,M,1+m/a.bD);const O=a.bE();return a.aG(O,[M[0],M[1],M[2],1],this._globeViewProjMatrixNoCorrection),O[2]/O[3]}populateCache(u){}getBounds(){const u=.5*this.width,m=.5*this.height,M=[new a.P(0,0),new a.P(u,0),new a.P(this.width,0),new a.P(this.width,m),new a.P(this.width,this.height),new a.P(u,this.height),new a.P(0,this.height),new a.P(0,m)],O=[];for(const me of M)O.push(this.unprojectScreenPoint(me));let D=0,U=0,G=0,q=0;const oe=this.center;for(const me of O){const pe=a.bJ(oe.lng,me.lng),xe=a.bJ(oe.lat,me.lat);pe<U&&(U=pe),pe>D&&(D=pe),xe<q&&(q=xe),xe>G&&(G=xe)}const le=[oe.lng+U,oe.lat+q,oe.lng+D,oe.lat+G];return this.isSurfacePointOnScreen([0,1,0])&&(le[3]=90,le[0]=-180,le[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(le[1]=-90,le[0]=-180,le[2]=180),new Zt(le)}calculateCenterFromCameraLngLatAlt(u,m,M,O){return this._helper.calculateCenterFromCameraLngLatAlt(u,m,M,O)}setLocationAtPoint(u,m){const M=Uo(this.unprojectScreenPoint(m)),O=Uo(u),D=a.by();a.bK(D);const U=a.by();a.bH(U,M,D,-this.center.lng*Math.PI/180),a.bG(U,U,D,this.center.lat*Math.PI/180);const G=O[0]*O[0]+O[2]*O[2],q=U[0]*U[0];if(G<q)return;const oe=Math.sqrt(G-q),le=-oe,me=a.bL(O[0],O[2],U[0],oe),pe=a.bL(O[0],O[2],U[0],le),xe=a.by();a.bH(xe,O,D,-me);const Le=a.bL(xe[1],xe[2],U[1],U[2]),Ve=a.by();a.bH(Ve,O,D,-pe);const He=a.bL(Ve[1],Ve[2],U[1],U[2]),Ze=.5*Math.PI,et=Le>=-Ze&&Le<=Ze,lt=He>=-Ze&&He<=Ze;let Je,At;if(et&&lt){const Nt=this.center.lng*Math.PI/180,Kt=this.center.lat*Math.PI/180;a.bM(me,Nt)+a.bM(Le,Kt)<a.bM(pe,Nt)+a.bM(He,Kt)?(Je=me,At=Le):(Je=pe,At=He)}else if(et)Je=me,At=Le;else{if(!lt)return;Je=pe,At=He}const pt=Je/Math.PI*180,it=At/Math.PI*180,Ct=this.center.lat;this.setCenter(new a.V(pt,a.an(it,-90,90))),this.setZoom(this.zoom+ya(Ct,this.center.lat))}locationToScreenPoint(u,m){const M=Uo(u);if(m){const O=m.getElevationForLngLatZoom(u,this._helper._tileZoom);a.a_(M,M,1+O/a.bD)}return this._projectSurfacePointToScreen(M)}_projectSurfacePointToScreen(u){const m=a.bE();return a.aG(m,[...u,1],this._globeViewProjMatrixNoCorrection),m[0]/=m[3],m[1]/=m[3],new a.P((.5*m[0]+.5)*this.width,(.5*-m[1]+.5)*this.height)}screenPointToMercatorCoordinate(u,m){if(m){const M=m.pointCoordinate(u);if(M)return M}return a.aa.fromLngLat(this.unprojectScreenPoint(u))}screenPointToLocation(u,m){var M;return(M=this.screenPointToMercatorCoordinate(u,m))===null||M===void 0?void 0:M.toLngLat()}isPointOnMapSurface(u,m){const M=this._cameraPosition,O=this.getRayDirectionFromPixel(u);return!!this.rayPlanetIntersection(M,O)}getRayDirectionFromPixel(u){const m=a.bE();m[0]=u.x/this.width*2-1,m[1]=-1*(u.y/this.height*2-1),m[2]=1,m[3]=1,a.aG(m,m,this._globeViewProjMatrixNoCorrectionInverted),m[0]/=m[3],m[1]/=m[3],m[2]/=m[3];const M=a.by();M[0]=m[0]-this._cameraPosition[0],M[1]=m[1]-this._cameraPosition[1],M[2]=m[2]-this._cameraPosition[2];const O=a.by();return a.b2(O,M),O}isSurfacePointVisible(u){const m=this._cachedClippingPlane;return m[0]*u[0]+m[1]*u[1]+m[2]*u[2]+m[3]>=0}isSurfacePointOnScreen(u){if(!this.isSurfacePointVisible(u))return!1;const m=a.bE();return a.aG(m,[...u,1],this._globeViewProjMatrixNoCorrection),m[0]/=m[3],m[1]/=m[3],m[2]/=m[3],m[0]>-1&&m[0]<1&&m[1]>-1&&m[1]<1&&m[2]>-1&&m[2]<1}rayPlanetIntersection(u,m){const M=a.b4(u,m),O=a.by(),D=a.by();a.a_(D,m,M),a.b1(O,u,D);const U=1-a.b4(O,O);if(U<0)return null;const G=a.b4(u,u)-1,q=-M+(M<0?1:-1)*Math.sqrt(U),oe=G/q,le=q;return{tMin:Math.min(oe,le),tMax:Math.max(oe,le)}}unprojectScreenPoint(u){const m=this._cameraPosition,M=this.getRayDirectionFromPixel(u),O=this.rayPlanetIntersection(m,M);if(O){const le=a.by();a.a$(le,m,[M[0]*O.tMin,M[1]*O.tMin,M[2]*O.tMin]);const me=a.by();return a.b2(me,le),q1(me)}const D=this._cachedClippingPlane,U=D[0]*M[0]+D[1]*M[1]+D[2]*M[2],G=-a.ba(D,m)/U,q=a.by();if(G>0)a.a$(q,m,[M[0]*G,M[1]*G,M[2]*G]);else{const le=a.by();a.a$(le,m,[2*M[0],2*M[1],2*M[2]]);const me=a.ba(this._cachedClippingPlane,le);a.b1(q,le,[this._cachedClippingPlane[0]*me,this._cachedClippingPlane[1]*me,this._cachedClippingPlane[2]*me])}const oe=(function(le){const me=a.by();return me[0]=le[0]*-le[3],me[1]=le[1]*-le[3],me[2]=le[2]*-le[3],{center:me,radius:Math.sqrt(1-le[3]*le[3])}})(D);return q1((function(le,me,pe){const xe=a.by();a.b1(xe,pe,le);const Le=a.by();return a.bz(Le,le,xe,me/a.b8(xe)),Le})(oe.center,oe.radius,q))}getMatrixForModel(u,m){const M=a.V.convert(u),O=1/a.bD,D=a.bi();return a.bI(D,D,M.lng/180*Math.PI),a.bg(D,D,-M.lat/180*Math.PI),a.O(D,D,[0,0,1+m/a.bD]),a.bg(D,D,.5*Math.PI),a.Q(D,D,[O,O,O]),D}getProjectionDataForCustomLayer(u=!0){const m=this.getProjectionData({overscaledTileID:new a.a1(0,0,0,0,0),applyGlobeMatrix:u});return m.tileMercatorCoords=[0,0,1,1],m}getFastPathSimpleProjectionMatrix(u){}}class Xm{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(u){this._helper.setMinZoom(u)}setMaxZoom(u){this._helper.setMaxZoom(u)}setMinPitch(u){this._helper.setMinPitch(u)}setMaxPitch(u){this._helper.setMaxPitch(u)}setRenderWorldCopies(u){this._helper.setRenderWorldCopies(u)}setBearing(u){this._helper.setBearing(u)}setPitch(u){this._helper.setPitch(u)}setRoll(u){this._helper.setRoll(u)}setFov(u){this._helper.setFov(u)}setZoom(u){this._helper.setZoom(u)}setCenter(u){this._helper.setCenter(u)}setElevation(u){this._helper.setElevation(u)}setMinElevationForCurrentTile(u){this._helper.setMinElevationForCurrentTile(u)}setPadding(u){this._helper.setPadding(u)}interpolatePadding(u,m,M){return this._helper.interpolatePadding(u,m,M)}isPaddingEqual(u){return this._helper.isPaddingEqual(u)}resize(u,m,M=!0){this._helper.resize(u,m,M)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(u){this._helper.setMaxBounds(u)}setConstrainOverride(u){this._helper.setConstrainOverride(u)}overrideNearFarZ(u,m){this._helper.overrideNearFarZ(u,m)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(u){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),u)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(u,m){this._globeness=u,this._globeLatitudeErrorCorrectionRadians=m,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(u){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(m,M)=>this.currentTransform.defaultConstrain(m,M),this.applyConstrain=(m,M)=>this._helper.applyConstrain(m,M),this._helper=new po({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(m,M)=>this.defaultConstrain(m,M)},u),this._globeness=1,this._mercatorTransform=new Rr,this._verticalPerspectiveTransform=new Zm}clone(){const u=new Xm;return u._globeness=this._globeness,u._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,u.apply(this),u}apply(u){this._helper.apply(u),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(u){const m=this._mercatorTransform.getProjectionData(u),M=this._verticalPerspectiveTransform.getProjectionData(u);return{mainMatrix:this.isGlobeRendering?M.mainMatrix:m.mainMatrix,clippingPlane:M.clippingPlane,tileMercatorCoords:M.tileMercatorCoords,projectionTransition:u.applyGlobeMatrix?this._globeness:0,fallbackMatrix:m.fallbackMatrix}}isLocationOccluded(u){return this.currentTransform.isLocationOccluded(u)}transformLightDirection(u){return this.currentTransform.transformLightDirection(u)}getPixelScale(){return a.bt(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bt(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(u,m,M){const O=this._mercatorTransform.getPitchedTextCorrection(u,m,M),D=this._verticalPerspectiveTransform.getPitchedTextCorrection(u,m,M);return a.bt(O,D,this._globeness)}projectTileCoordinates(u,m,M,O){return this.currentTransform.projectTileCoordinates(u,m,M,O)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(u){return this.currentTransform.calculateFogMatrix(u)}getVisibleUnwrappedCoordinates(u){return this.currentTransform.getVisibleUnwrappedCoordinates(u)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(u){this._mercatorTransform.recalculateZoomAndCenter(u),this._verticalPerspectiveTransform.recalculateZoomAndCenter(u)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(u,m){return this.currentTransform.lngLatToCameraDepth(u,m)}populateCache(u){this._mercatorTransform.populateCache(u),this._verticalPerspectiveTransform.populateCache(u)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(u,m,M,O){return this._helper.calculateCenterFromCameraLngLatAlt(u,m,M,O)}setLocationAtPoint(u,m){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(u,m),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(u,m),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(u,m){return this.currentTransform.locationToScreenPoint(u,m)}screenPointToMercatorCoordinate(u,m){return this.currentTransform.screenPointToMercatorCoordinate(u,m)}screenPointToLocation(u,m){return this.currentTransform.screenPointToLocation(u,m)}isPointOnMapSurface(u,m){return this.currentTransform.isPointOnMapSurface(u,m)}getRayDirectionFromPixel(u){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(u)}getMatrixForModel(u,m){return this.currentTransform.getMatrixForModel(u,m)}getProjectionDataForCustomLayer(u=!0){const m=this._mercatorTransform.getProjectionDataForCustomLayer(u);if(!this.isGlobeRendering)return m;const M=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(u);return M.fallbackMatrix=m.mainMatrix,M}getFastPathSimpleProjectionMatrix(u){return this.currentTransform.getFastPathSimpleProjectionMatrix(u)}}class nu{get useGlobeControls(){return!0}handlePanInertia(u,m){const M=Xu(u,m);return Math.abs(M.lng-m.center.lng)>180&&(M.lng=m.center.lng+179.5*Math.sign(M.lng-m.center.lng)),{easingCenter:M,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(u,m){const M=u.around,O=m.screenPointToLocation(M);u.bearingDelta&&m.setBearing(m.bearing+u.bearingDelta),u.pitchDelta&&m.setPitch(m.pitch+u.pitchDelta),u.rollDelta&&m.setRoll(m.roll+u.rollDelta);const D=m.zoom;u.zoomDelta&&m.setZoom(m.zoom+u.zoomDelta);const U=m.zoom-D;if(U===0)return;const G=a.bJ(m.center.lng,O.lng),q=G/(Math.abs(G/180)+1),oe=a.bJ(m.center.lat,O.lat),le=m.getRayDirectionFromPixel(M),me=m.cameraPosition,pe=-1*a.b4(me,le),xe=a.by();a.a$(xe,me,[le[0]*pe,le[1]*pe,le[2]*pe]);const Le=a.b6(xe)-1,Ve=Math.exp(.5*-Math.max(Le-.3,0)),He=ts(m.worldSize,m.center.lat)/Math.min(m.width,m.height),Ze=a.bw(He,.9,.5,1,.25),et=(1-a.aq(-U))*Math.min(Ve,Ze),lt=m.center.lat,Je=m.zoom,At=new a.V(m.center.lng+q*et,a.an(m.center.lat+oe*et,-a.ao,a.ao));m.setLocationAtPoint(O,M);const pt=m.center,it=a.bw(Math.abs(G),45,85,0,1),Ct=a.bw(He,.75,.35,0,1),Nt=Math.pow(Math.max(it,Ct),.25),Kt=a.bJ(pt.lng,At.lng),Ft=a.bJ(pt.lat,At.lat);m.setCenter(new a.V(pt.lng+Kt*Nt,pt.lat+Ft*Nt).wrap()),m.setZoom(Je+ya(lt,m.center.lat))}handleMapControlsPan(u,m,M){if(!u.panDelta)return;const O=m.center.lat,D=m.zoom;m.setCenter(Xu(u.panDelta,m).wrap()),m.setZoom(D+ya(O,m.center.lat))}cameraForBoxAndBearing(u,m,M,O,D){const U=J(u,m,M,O,D),G=m.left/D.width*2-1,q=(D.width-m.right)/D.width*2-1,oe=m.top/D.height*-2+1,le=(D.height-m.bottom)/D.height*-2+1,me=a.bJ(M.getWest(),M.getEast())<0,pe=me?M.getEast():M.getWest(),xe=me?M.getWest():M.getEast(),Le=Math.max(M.getNorth(),M.getSouth()),Ve=Math.min(M.getNorth(),M.getSouth()),He=pe+.5*a.bJ(pe,xe),Ze=Le+.5*a.bJ(Le,Ve),et=D.clone();et.setCenter(U.center),et.setBearing(U.bearing),et.setPitch(0),et.setRoll(0),et.setZoom(U.zoom);const lt=et.modelViewProjectionMatrix,Je=[Uo(M.getNorthWest()),Uo(M.getNorthEast()),Uo(M.getSouthWest()),Uo(M.getSouthEast()),Uo(new a.V(xe,Ze)),Uo(new a.V(pe,Ze)),Uo(new a.V(He,Le)),Uo(new a.V(He,Ve))],At=Uo(U.center);let pt=Number.POSITIVE_INFINITY;for(const it of Je)G<0&&(pt=nu.getLesserNonNegativeNonNull(pt,nu.solveVectorScale(it,At,lt,"x",G))),q>0&&(pt=nu.getLesserNonNegativeNonNull(pt,nu.solveVectorScale(it,At,lt,"x",q))),oe>0&&(pt=nu.getLesserNonNegativeNonNull(pt,nu.solveVectorScale(it,At,lt,"y",oe))),le<0&&(pt=nu.getLesserNonNegativeNonNull(pt,nu.solveVectorScale(it,At,lt,"y",le)));if(Number.isFinite(pt)&&pt!==0)return U.zoom=et.zoom+a.at(pt),U;_r()}handleJumpToCenterZoom(u,m){const M=u.center.lat,O=u.applyConstrain(m.center?a.V.convert(m.center):u.center,u.zoom).center;u.setCenter(O.wrap());const D=m.zoom!==void 0?+m.zoom:u.zoom+ya(M,O.lat);u.zoom!==D&&u.setZoom(D)}handleEaseTo(u,m){const M=u.zoom,O=u.center,D=u.padding,U={roll:u.roll,pitch:u.pitch,bearing:u.bearing},G={roll:m.roll===void 0?u.roll:m.roll,pitch:m.pitch===void 0?u.pitch:m.pitch,bearing:m.bearing===void 0?u.bearing:m.bearing},q=m.zoom!==void 0,oe=!u.isPaddingEqual(m.padding);let le=!1;const me=m.center?a.V.convert(m.center):O,pe=u.applyConstrain(me,M).center;Ic(u,pe);const xe=u.clone();xe.setCenter(pe),xe.setZoom(q?+m.zoom:M+ya(O.lat,me.lat)),xe.setBearing(m.bearing);const Le=new a.P(a.an(u.centerPoint.x+m.offsetAsPoint.x,0,u.width),a.an(u.centerPoint.y+m.offsetAsPoint.y,0,u.height));xe.setLocationAtPoint(pe,Le);const Ve=(m.offset&&m.offsetAsPoint.mag())>0?xe.center:pe,He=q?+m.zoom:M+ya(O.lat,Ve.lat),Ze=M+ya(O.lat,0),et=He+ya(Ve.lat,0),lt=a.bJ(O.lng,Ve.lng),Je=a.bJ(O.lat,Ve.lat),At=a.aq(et-Ze);return le=He!==M,{easeFunc:pt=>{if(a.bn(U,G)||yr({startEulerAngles:U,endEulerAngles:G,tr:u,k:pt,useSlerp:U.roll!=G.roll}),oe&&u.interpolatePadding(D,m.padding,pt),m.around)a.w("Easing around a point is not supported under globe projection."),u.setLocationAtPoint(m.around,m.aroundPoint);else{const it=et>Ze?Math.min(2,At):Math.max(.5,At),Ct=Math.pow(it,1-pt),Nt=Cf(O,lt,Je,pt*Ct);u.setCenter(Nt.wrap())}if(le){const it=a.G.number(Ze,et,pt)+ya(0,u.center.lat);u.setZoom(it)}},isZooming:le,elevationCenter:Ve}}handleFlyTo(u,m){const M=m.zoom!==void 0,O=u.center,D=u.zoom,U=u.padding,G=!u.isPaddingEqual(m.padding),q=u.applyConstrain(a.V.convert(m.center||m.locationAtOffset),D).center,oe=M?+m.zoom:u.zoom+ya(u.center.lat,q.lat),le=u.clone();le.setCenter(q),le.setZoom(oe),le.setBearing(m.bearing);const me=new a.P(a.an(u.centerPoint.x+m.offsetAsPoint.x,0,u.width),a.an(u.centerPoint.y+m.offsetAsPoint.y,0,u.height));le.setLocationAtPoint(q,me);const pe=le.center;Ic(u,pe);const xe=(function(Je,At,pt){const it=Uo(At),Ct=Uo(pt),Nt=a.b4(it,Ct),Kt=Math.acos(Nt),Ft=Oa(Je);return Kt/(2*Math.PI)*Ft})(u,O,pe),Le=D+ya(O.lat,0),Ve=oe+ya(pe.lat,0),He=a.aq(Ve-Le);let Ze;if(typeof m.minZoom=="number"){const Je=+m.minZoom+ya(pe.lat,0),At=Math.min(Je,Le,Ve)+ya(0,pe.lat),pt=u.applyConstrain(pe,At).zoom+ya(pe.lat,0);Ze=a.aq(pt-Le)}const et=a.bJ(O.lng,pe.lng),lt=a.bJ(O.lat,pe.lat);return{easeFunc:(Je,At,pt,it)=>{const Ct=Cf(O,et,lt,pt);G&&u.interpolatePadding(U,m.padding,Je);const Nt=Je===1?pe:Ct;u.setCenter(Nt.wrap());const Kt=Le+a.at(At);u.setZoom(Je===1?oe:Kt+ya(0,Nt.lat))},scaleOfZoom:He,targetCenter:pe,scaleOfMinZoom:Ze,pixelPathLength:xe}}static solveVectorScale(u,m,M,O,D){const U=O==="x"?[M[0],M[4],M[8],M[12]]:[M[1],M[5],M[9],M[13]],G=[M[3],M[7],M[11],M[15]],q=u[0]*U[0]+u[1]*U[1]+u[2]*U[2],oe=u[0]*G[0]+u[1]*G[1]+u[2]*G[2],le=m[0]*U[0]+m[1]*U[1]+m[2]*U[2],me=m[0]*G[0]+m[1]*G[1]+m[2]*G[2];return le+D*oe===q+D*me||G[3]*(q-le)+U[3]*(me-oe)+q*me==le*oe?null:(le+U[3]-D*me-D*G[3])/(le-q-D*me+D*oe)}static getLesserNonNegativeNonNull(u,m){return m!==null&&m>=0&&m<u?m:u}}class Bp{constructor(u){this._globe=u,this._mercatorCameraHelper=new ge,this._verticalPerspectiveCameraHelper=new nu}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(u,m){return this.currentHelper.handlePanInertia(u,m)}handleMapControlsRollPitchBearingZoom(u,m){return this.currentHelper.handleMapControlsRollPitchBearingZoom(u,m)}handleMapControlsPan(u,m,M){this.currentHelper.handleMapControlsPan(u,m,M)}cameraForBoxAndBearing(u,m,M,O,D){return this.currentHelper.cameraForBoxAndBearing(u,m,M,O,D)}handleJumpToCenterZoom(u,m){this.currentHelper.handleJumpToCenterZoom(u,m)}handleEaseTo(u,m){return this.currentHelper.handleEaseTo(u,m)}handleFlyTo(u,m){return this.currentHelper.handleFlyTo(u,m)}}const rA=(T,u)=>a.B(T,u&&u.filter((m=>m.identifier!=="source.canvas"))),Sh=a.bN();class Op extends a.E{constructor(u,m={}){var M,O;super(),this._rtlPluginLoaded=()=>{for(const U in this.tileManagers){const G=this.tileManagers[U].getSource().type;G!=="vector"&&G!=="geojson"||this.tileManagers[U].reload()}},this.map=u,this.dispatcher=new we(Oe(),u._getMapId()),this.dispatcher.registerMessageHandler("GG",((U,G)=>this.getGlyphs(U,G))),this.dispatcher.registerMessageHandler("GI",((U,G)=>this.getImages(U,G))),this.dispatcher.registerMessageHandler("GDA",((U,G)=>this.getDashes(U,G))),this.imageManager=new Ee,this.imageManager.setEventedParent(this);const D=((M=u._container)===null||M===void 0?void 0:M.lang)||typeof document<"u"&&((O=document.documentElement)===null||O===void 0?void 0:O.lang)||void 0;this.glyphManager=new qe(u._requestManager,m.localIdeographFontFamily,D),this.lineAtlas=new Te(256,512),this.crossTileSymbolIndex=new tu,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",a.bO()),It().on(Pe,this._rtlPluginLoaded),this.on("data",(U=>{if(U.dataType!=="source"||U.sourceDataType!=="metadata")return;const G=this.tileManagers[U.sourceId];if(!G)return;const q=G.getSource();if(q&&q.vectorLayerIds)for(const oe in this._layers){const le=this._layers[oe];le.source===q.id&&this._validateLayer(le)}}))}_setInitialValues(){var u;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new a.bP,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((u=this.crossTileSymbolIndex)===null||u===void 0?void 0:u.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(u,m){var M,O,D;this._checkLoaded();const U=m===null?(D=(O=(M=this.stylesheet.state)===null||M===void 0?void 0:M[u])===null||O===void 0?void 0:O.default)!==null&&D!==void 0?D:null:m;if(a.bQ(U,this._globalState[u]))return this;this._globalState[u]=U,this._applyGlobalStateChanges([u])}getGlobalState(){return this._globalState}setGlobalState(u){this._checkLoaded();const m=[];for(const M in u)!a.bQ(this._globalState[M],u[M].default)&&(m.push(M),this._globalState[M]=u[M].default);this._applyGlobalStateChanges(m)}_applyGlobalStateChanges(u){if(u.length===0)return;const m=new Set,M={};for(const O of u){M[O]=this._globalState[O];for(const D in this._layers){const U=this._layers[D],G=U.getLayoutAffectingGlobalStateRefs(),q=U.getPaintAffectingGlobalStateRefs();if(G.has(O)&&m.add(U.source),q.has(O))for(const{name:oe,value:le}of q.get(O))this._updatePaintProperty(U,oe,le)}}this.dispatcher.broadcast("UGS",M);for(const O in this.tileManagers)m.has(O)&&(this._reloadSource(O),this._changed=!0)}loadURL(u,m={},M){this.fire(new a.l("dataloading",{dataType:"style"})),m.validate=typeof m.validate!="boolean"||m.validate;const O=this.map._requestManager.transformRequest(u,"Style");this._loadStyleRequest=new AbortController;const D=this._loadStyleRequest;a.j(O,this._loadStyleRequest).then((U=>{this._loadStyleRequest=null,this._load(U.data,m,M)})).catch((U=>{this._loadStyleRequest=null,U&&!D.signal.aborted&&this.fire(new a.k(U))}))}loadJSON(u,m={},M){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,I.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,m.validate=m.validate!==!1,this._load(u,m,M)})).catch((()=>{}))}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(Sh,{validate:!1})}_load(u,m,M){var O,D;let U=m.transformStyle?m.transformStyle(M,u):u;if(!m.validate||!rA(this,a.C(U))){U=Object.assign({},U),this._loaded=!0,this.stylesheet=U;for(const G in U.sources)this.addSource(G,U.sources[G],{validate:!1});U.sprite?this._loadSprite(U.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(U.glyphs),this._createLayers(),this.light=new De(this.stylesheet.light),this._setProjectionInternal(((O=this.stylesheet.projection)===null||O===void 0?void 0:O.type)||"mercator"),this.sky=new ze(this.stylesheet.sky),this.map.setTerrain((D=this.stylesheet.terrain)!==null&&D!==void 0?D:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){var u,m,M;const O=a.bR(this.stylesheet.layers);this.setGlobalState((u=this.stylesheet.state)!==null&&u!==void 0?u:null),this.dispatcher.broadcast("SL",O),this._order=O.map((D=>D.id)),this._layers={},this._serializedLayers=null;for(const D of O){const U=a.bS(D,this._globalState);if(U.setEventedParent(this,{layer:{id:D.id}}),this._layers[D.id]=U,a.bT(U)&&this.tileManagers[U.source]){const G=(M=(m=D.paint)===null||m===void 0?void 0:m["raster-fade-duration"])!==null&&M!==void 0?M:U.paint.get("raster-fade-duration");this.tileManagers[U.source].setRasterFadeDuration(G)}}}_loadSprite(u,m=!1,M=void 0){let O;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,(function(D,U,G,q){return a._(this,void 0,void 0,(function*(){const oe=ue(D),le=G>1?"@2x":"",me={},pe={};for(const{id:xe,url:Le}of oe){const Ve=U.transformRequest(ve(Le,le,".json"),"SpriteJSON");me[xe]=a.j(Ve,q);const He=U.transformRequest(ve(Le,le,".png"),"SpriteImage");pe[xe]=W.getImage(He,q)}return yield Promise.all([...Object.values(me),...Object.values(pe)]),(function(xe,Le){return a._(this,void 0,void 0,(function*(){const Ve={};for(const He in xe){Ve[He]={};const Ze=I.getImageCanvasContext((yield Le[He]).data),et=(yield xe[He]).data;for(const lt in et){const{width:Je,height:At,x:pt,y:it,sdf:Ct,pixelRatio:Nt,stretchX:Kt,stretchY:Ft,content:jt,textFitWidth:pn,textFitHeight:Sn}=et[lt];Ve[He][lt]={data:null,pixelRatio:Nt,sdf:Ct,stretchX:Kt,stretchY:Ft,content:jt,textFitWidth:pn,textFitHeight:Sn,spriteData:{width:Je,height:At,x:pt,y:it,context:Ze}}}}return Ve}))})(me,pe)}))})(u,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((D=>{if(this._spriteRequest=null,D)for(const U in D){this._spritesImagesIds[U]=[];const G=this._spritesImagesIds[U]?this._spritesImagesIds[U].filter((q=>!(q in D))):[];for(const q of G)this.imageManager.removeImage(q),this._changedImages[q]=!0;for(const q in D[U]){const oe=U==="default"?q:`${U}:${q}`;this._spritesImagesIds[U].push(oe),oe in this.imageManager.images?this.imageManager.updateImage(oe,D[U][q],!1):this.imageManager.addImage(oe,D[U][q]),m&&(this._changedImages[oe]=!0)}}})).catch((D=>{this._spriteRequest=null,O=D,this.fire(new a.k(O))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),m&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),M&&M(O)}))}_unloadSprite(){for(const u of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(u),this._changedImages[u]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(u){const m=this.tileManagers[u.source];if(!m)return;const M=u.sourceLayer;if(!M)return;const O=m.getSource();(O.type==="geojson"||O.vectorLayerIds&&O.vectorLayerIds.indexOf(M)===-1)&&this.fire(new a.k(new Error(`Source layer "${M}" does not exist on source "${O.id}" as specified by style layer "${u.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const u in this.tileManagers)if(!this.tileManagers[u].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(u,m=!1){const M=this._serializedAllLayers();if(!u||u.length===0)return Object.values(m?a.bU(M):M);const O=[];for(const D of u)if(M[D]){const U=m?a.bU(M[D]):M[D];O.push(U)}return O}_serializedAllLayers(){let u=this._serializedLayers;if(u)return u;u=this._serializedLayers={};const m=Object.keys(this._layers);for(const M of m){const O=this._layers[M];O.type!=="custom"&&(u[M]=O.serialize())}return u}hasTransitions(){var u,m,M;if(!((u=this.light)===null||u===void 0)&&u.hasTransition()||!((m=this.sky)===null||m===void 0)&&m.hasTransition()||!((M=this.projection)===null||M===void 0)&&M.hasTransition())return!0;for(const O in this.tileManagers)if(this.tileManagers[O].hasTransition())return!0;for(const O in this._layers)if(this._layers[O].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(u){if(!this._loaded)return;const m=this._changed;if(m){const O=Object.keys(this._updatedLayers),D=Object.keys(this._removedLayers);(O.length||D.length)&&this._updateWorkerLayers(O,D);for(const U in this._updatedSources){const G=this._updatedSources[U];if(G==="reload")this._reloadSource(U);else{if(G!=="clear")throw new Error(`Invalid action ${G}`);this._clearSource(U)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const U in this._updatedPaintProps)this._layers[U].updateTransitions(u);this.light.updateTransitions(u),this.sky.updateTransitions(u),this._resetUpdates()}const M={};for(const O in this.tileManagers){const D=this.tileManagers[O];M[O]=D.used,D.used=!1}for(const O of this._order){const D=this._layers[O];D.recalculate(u,this._availableImages),!D.isHidden(u.zoom)&&D.source&&(this.tileManagers[D.source].used=!0)}for(const O in M){const D=this.tileManagers[O];!!M[O]!=!!D.used&&D.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:O}))}this.light.recalculate(u),this.sky.recalculate(u),this.projection.recalculate(u),this.z=u.zoom,m&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const u=Object.keys(this._changedImages);if(u.length){for(const m in this.tileManagers)this.tileManagers[m].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const u in this.tileManagers)this.tileManagers[u].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(u,m){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(u,!1),removedIds:m})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(u,m={}){var M;this._checkLoaded();const O=this.serialize();if(u=m.transformStyle?m.transformStyle(O,u):u,((M=m.validate)===null||M===void 0||M)&&rA(this,a.C(u)))return!1;(u=a.bU(u)).layers=a.bR(u.layers);const D=a.bV(O,u),U=this._getOperationsToPerform(D);if(U.unimplemented.length>0)throw new Error(`Unimplemented: ${U.unimplemented.join(", ")}.`);if(U.operations.length===0)return!1;for(const G of U.operations)G();return this.stylesheet=u,this._serializedLayers=null,!0}_getOperationsToPerform(u){const m=[],M=[];for(const O of u)switch(O.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":m.push((()=>this.addLayer.apply(this,O.args)));break;case"removeLayer":m.push((()=>this.removeLayer.apply(this,O.args)));break;case"setPaintProperty":m.push((()=>this.setPaintProperty.apply(this,O.args)));break;case"setLayoutProperty":m.push((()=>this.setLayoutProperty.apply(this,O.args)));break;case"setFilter":m.push((()=>this.setFilter.apply(this,O.args)));break;case"addSource":m.push((()=>this.addSource.apply(this,O.args)));break;case"removeSource":m.push((()=>this.removeSource.apply(this,O.args)));break;case"setLayerZoomRange":m.push((()=>this.setLayerZoomRange.apply(this,O.args)));break;case"setLight":m.push((()=>this.setLight.apply(this,O.args)));break;case"setGeoJSONSourceData":m.push((()=>this.setGeoJSONSourceData.apply(this,O.args)));break;case"setGlyphs":m.push((()=>this.setGlyphs.apply(this,O.args)));break;case"setSprite":m.push((()=>this.setSprite.apply(this,O.args)));break;case"setTerrain":m.push((()=>this.map.setTerrain.apply(this,O.args)));break;case"setSky":m.push((()=>this.setSky.apply(this,O.args)));break;case"setProjection":this.setProjection.apply(this,O.args);break;case"setGlobalState":m.push((()=>this.setGlobalState.apply(this,O.args)));break;case"setTransition":m.push((()=>{}));break;default:M.push(O.command)}return{operations:m,unimplemented:M}}addImage(u,m){if(this.getImage(u))return this.fire(new a.k(new Error(`An image named "${u}" already exists.`)));this.imageManager.addImage(u,m),this._afterImageUpdated(u)}updateImage(u,m){this.imageManager.updateImage(u,m)}getImage(u){return this.imageManager.getImage(u)}removeImage(u){if(!this.getImage(u))return this.fire(new a.k(new Error(`An image named "${u}" does not exist.`)));this.imageManager.removeImage(u),this._afterImageUpdated(u)}_afterImageUpdated(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(u,m,M={}){if(this._checkLoaded(),this.tileManagers[u]!==void 0)throw new Error(`Source "${u}" already exists.`);if(!m.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(m).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(m.type)>=0&&this._validate(a.C.source,`sources.${u}`,m,null,M))return;this.map&&this.map._collectResourceTiming&&(m.collectResourceTiming=!0);const O=this.tileManagers[u]=new ui(u,m,this.dispatcher);O.style=this,O.setEventedParent(this,(()=>({isSourceLoaded:O.loaded(),source:O.serialize(),sourceId:u}))),O.onAdd(this.map),this._changed=!0}removeSource(u){if(this._checkLoaded(),this.tileManagers[u]===void 0)throw new Error("There is no source with this ID");for(const M in this._layers)if(this._layers[M].source===u)return this.fire(new a.k(new Error(`Source "${u}" cannot be removed while layer "${M}" is using it.`)));const m=this.tileManagers[u];delete this.tileManagers[u],delete this._updatedSources[u],m.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:u})),m.setEventedParent(null),m.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(u,m){if(this._checkLoaded(),this.tileManagers[u]===void 0)throw new Error(`There is no source with this ID=${u}`);const M=this.tileManagers[u].getSource();if(M.type!=="geojson")throw new Error(`geojsonSource.type is ${M.type}, which is !== 'geojson`);M.setData(m),this._changed=!0}getSource(u){return this.tileManagers[u]&&this.tileManagers[u].getSource()}addLayer(u,m,M={}){this._checkLoaded();const O=u.id;if(this.getLayer(O))return void this.fire(new a.k(new Error(`Layer "${O}" already exists on this map.`)));let D;if(u.type==="custom"){if(rA(this,a.bW(u)))return;D=a.bS(u,this._globalState)}else{if("source"in u&&typeof u.source=="object"&&(this.addSource(O,u.source),u=a.bU(u),u=a.e(u,{source:O})),this._validate(a.C.layer,`layers.${O}`,u,{arrayIndex:-1},M))return;D=a.bS(u,this._globalState),this._validateLayer(D),D.setEventedParent(this,{layer:{id:O}})}const U=m?this._order.indexOf(m):this._order.length;if(m&&U===-1)this.fire(new a.k(new Error(`Cannot add layer "${O}" before non-existing layer "${m}".`)));else{if(this._order.splice(U,0,O),this._layerOrderChanged=!0,this._layers[O]=D,this._removedLayers[O]&&D.source&&D.type!=="custom"){const G=this._removedLayers[O];delete this._removedLayers[O],G.type!==D.type?this._updatedSources[D.source]="clear":(this._updatedSources[D.source]="reload",this.tileManagers[D.source].pause())}this._updateLayer(D),D.onAdd&&D.onAdd(this.map)}}moveLayer(u,m){if(this._checkLoaded(),this._changed=!0,!this._layers[u])return void this.fire(new a.k(new Error(`The layer '${u}' does not exist in the map's style and cannot be moved.`)));if(u===m)return;const M=this._order.indexOf(u);this._order.splice(M,1);const O=m?this._order.indexOf(m):this._order.length;m&&O===-1?this.fire(new a.k(new Error(`Cannot move layer "${u}" before non-existing layer "${m}".`))):(this._order.splice(O,0,u),this._layerOrderChanged=!0)}removeLayer(u){this._checkLoaded();const m=this._layers[u];if(!m)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${u}".`)));m.setEventedParent(null);const M=this._order.indexOf(u);this._order.splice(M,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=m,delete this._layers[u],this._serializedLayers&&delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],m.onRemove&&m.onRemove(this.map)}getLayer(u){return this._layers[u]}getLayersOrder(){return[...this._order]}hasLayer(u){return u in this._layers}setLayerZoomRange(u,m,M){this._checkLoaded();const O=this.getLayer(u);O?O.minzoom===m&&O.maxzoom===M||(m!=null&&(O.minzoom=m),M!=null&&(O.maxzoom=M),this._updateLayer(O)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${u}".`)))}setFilter(u,m,M={}){this._checkLoaded();const O=this.getLayer(u);if(O){if(!a.bQ(O.filter,m))return m==null?(O.setFilter(void 0),void this._updateLayer(O)):void(this._validate(a.C.filter,`layers.${O.id}.filter`,m,null,M)||(O.setFilter(a.bU(m)),this._updateLayer(O)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${u}".`)))}getFilter(u){return a.bU(this.getLayer(u).filter)}setLayoutProperty(u,m,M,O={}){this._checkLoaded();const D=this.getLayer(u);D?a.bQ(D.getLayoutProperty(m),M)||(D.setLayoutProperty(m,M,O),this._updateLayer(D)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${u}".`)))}getLayoutProperty(u,m){const M=this.getLayer(u);if(M)return M.getLayoutProperty(m);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${u}".`)))}setPaintProperty(u,m,M,O={}){this._checkLoaded();const D=this.getLayer(u);D?a.bQ(D.getPaintProperty(m),M)||this._updatePaintProperty(D,m,M,O):this.fire(new a.k(new Error(`Cannot style non-existing layer "${u}".`)))}_updatePaintProperty(u,m,M,O={}){u.setPaintProperty(m,M,O)&&this._updateLayer(u),a.bT(u)&&m==="raster-fade-duration"&&this.tileManagers[u.source].setRasterFadeDuration(M),this._changed=!0,this._updatedPaintProps[u.id]=!0,this._serializedLayers=null}getPaintProperty(u,m){return this.getLayer(u).getPaintProperty(m)}setFeatureState(u,m){this._checkLoaded();const M=u.source,O=u.sourceLayer,D=this.tileManagers[M];if(D===void 0)return void this.fire(new a.k(new Error(`The source '${M}' does not exist in the map's style.`)));const U=D.getSource().type;U==="geojson"&&O?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):U!=="vector"||O?(u.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),D.setFeatureState(O,u.id,m)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(u,m){this._checkLoaded();const M=u.source,O=this.tileManagers[M];if(O===void 0)return void this.fire(new a.k(new Error(`The source '${M}' does not exist in the map's style.`)));const D=O.getSource().type,U=D==="vector"?u.sourceLayer:void 0;D!=="vector"||U?m&&typeof u.id!="string"&&typeof u.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):O.removeFeatureState(U,u.id,m):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(u){this._checkLoaded();const m=u.source,M=u.sourceLayer,O=this.tileManagers[m];if(O!==void 0)return O.getSource().type!=="vector"||M?(u.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),O.getFeatureState(M,u.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${m}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const u=a.bX(this.tileManagers,(D=>D.serialize())),m=this._serializeByIds(this._order,!0),M=this.map.getTerrain()||void 0,O=this.stylesheet;return a.bY({version:O.version,name:O.name,metadata:O.metadata,light:O.light,sky:O.sky,center:O.center,zoom:O.zoom,bearing:O.bearing,pitch:O.pitch,sprite:O.sprite,glyphs:O.glyphs,transition:O.transition,projection:O.projection,sources:u,layers:m,terrain:M},(D=>D!==void 0))}_updateLayer(u){this._updatedLayers[u.id]=!0,u.source&&!this._updatedSources[u.source]&&this.tileManagers[u.source].getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",this.tileManagers[u.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(u){const m=U=>this._layers[U].type==="fill-extrusion",M={},O=[];for(let U=this._order.length-1;U>=0;U--){const G=this._order[U];if(m(G)){M[G]=U;for(const q of u){const oe=q[G];if(oe)for(const le of oe)O.push(le)}}}O.sort(((U,G)=>G.intersectionZ-U.intersectionZ));const D=[];for(let U=this._order.length-1;U>=0;U--){const G=this._order[U];if(m(G))for(let q=O.length-1;q>=0;q--){const oe=O[q].feature;if(M[oe.layer.id]<U)break;D.push(oe),O.pop()}else for(const q of u){const oe=q[G];if(oe)for(const le of oe)D.push(le.feature)}}return D}queryRenderedFeatures(u,m,M){m&&m.filter&&this._validate(a.C.filter,"queryRenderedFeatures.filter",m.filter,null,m);const O={};if(m&&m.layers){if(!(Array.isArray(m.layers)||m.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const oe of m.layers){const le=this._layers[oe];if(!le)return this.fire(new a.k(new Error(`The layer '${oe}' does not exist in the map's style and cannot be queried for features.`))),[];O[le.source]=!0}}const D=[];m.availableImages=this._availableImages;const U=this._serializedAllLayers(),G=m.layers instanceof Set?m.layers:Array.isArray(m.layers)?new Set(m.layers):null,q=Object.assign(Object.assign({},m),{layers:G,globalState:this._globalState});for(const oe in this.tileManagers)m.layers&&!O[oe]||D.push(dt(this.tileManagers[oe],this._layers,U,u,q,M,this.map.terrain?(le,me,pe)=>this.map.terrain.getElevation(le,me,pe):void 0));return this.placement&&D.push((function(oe,le,me,pe,xe,Le,Ve){const He={},Ze=Le.queryRenderedSymbols(pe),et=[];for(const lt of Object.keys(Ze).map(Number))et.push(Ve[lt]);et.sort(gt);for(const lt of et){const Je=lt.featureIndex.lookupSymbolFeatures(Ze[lt.bucketInstanceId],le,lt.bucketIndex,lt.sourceLayerIndex,{filterSpec:xe.filter,globalState:xe.globalState},xe.layers,xe.availableImages,oe);for(const At in Je){const pt=He[At]=He[At]||[],it=Je[At];it.sort(((Ct,Nt)=>{const Kt=lt.featureSortOrder;if(Kt){const Ft=Kt.indexOf(Ct.featureIndex);return Kt.indexOf(Nt.featureIndex)-Ft}return Nt.featureIndex-Ct.featureIndex}));for(const Ct of it)pt.push(Ct)}}return(function(lt,Je,At){for(const pt in lt)for(const it of lt[pt])Lt(it,At[Je[pt].source]);return lt})(He,oe,me)})(this._layers,U,this.tileManagers,u,q,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(D)}querySourceFeatures(u,m){m?.filter&&this._validate(a.C.filter,"querySourceFeatures.filter",m.filter,null,m);const M=this.tileManagers[u];return M?(function(O,D){const U=O.getRenderableIds().map((oe=>O.getTileByID(oe))),G=[],q={};for(let oe=0;oe<U.length;oe++){const le=U[oe],me=le.tileID.canonical.key;q[me]||(q[me]=!0,le.querySourceFeatures(G,D))}return G})(M,m?Object.assign(Object.assign({},m),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(u,m={}){this._checkLoaded();const M=this.light.getLight();let O=!1;for(const U in u)if(!a.bQ(u[U],M[U])){O=!0;break}if(!O)return;const D={now:K(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(u,m),this.light.updateTransitions(D)}getProjection(){var u;return(u=this.stylesheet)===null||u===void 0?void 0:u.projection}setProjection(u){if(this._checkLoaded(),this.projection){if(this.projection.name===u.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=u,this._setProjectionInternal(u.type)}getSky(){var u;return(u=this.stylesheet)===null||u===void 0?void 0:u.sky}setSky(u,m={}){this._checkLoaded();const M=this.getSky();let O=!1;if(!u&&!M)return;if(u&&!M)O=!0;else if(!u&&M)O=!0;else for(const U in u)if(!a.bQ(u[U],M[U])){O=!0;break}if(!O)return;const D={now:K(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=u,this.sky.setSky(u,m),this.sky.updateTransitions(D)}_setProjectionInternal(u){const m=(function(M,O){const D={constrainOverride:O};if(Array.isArray(M)){const U=new Oo({type:M});return{projection:U,transform:new Xm(D),cameraHelper:new Bp(U)}}switch(M){case"mercator":return{projection:new Lo,transform:new Rr(D),cameraHelper:new ge};case"globe":{const U=new Oo({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:U,transform:new Xm(D),cameraHelper:new Bp(U)}}case"vertical-perspective":return{projection:new Or,transform:new Zm(D),cameraHelper:new nu};default:return a.w(`Unknown projection name: ${M}. Falling back to mercator projection.`),{projection:new Lo,transform:new Rr(D),cameraHelper:new ge}}})(u,this.map.transformConstrain);this.projection=m.projection,this.map.migrateProjection(m.transform,m.cameraHelper);for(const M in this.tileManagers)this.tileManagers[M].reload()}_validate(u,m,M,O,D={}){return(!D||D.validate!==!1)&&rA(this,u.call(a.C,a.e({key:m,style:this.serialize(),value:M,styleSpec:a.u},O)))}_remove(u=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),It().off(Pe,this._rtlPluginLoaded);for(const m in this._layers)this._layers[m].setEventedParent(null);for(const m in this.tileManagers){const M=this.tileManagers[m];M.setEventedParent(null),M.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),u&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(u)}_clearSource(u){this.tileManagers[u].clearTiles()}_reloadSource(u){this.tileManagers[u].resume(),this.tileManagers[u].reload()}_updateSources(u){for(const m in this.tileManagers)this.tileManagers[m].update(u,this.map.terrain)}_generateCollisionBoxes(){for(const u in this.tileManagers)this._reloadSource(u)}_updatePlacement(u,m,M,O,D=!1){let U=!1,G=!1;const q={};for(const oe of this._order){const le=this._layers[oe];if(le.type!=="symbol")continue;if(!q[le.source]){const pe=this.tileManagers[le.source];q[le.source]=pe.getRenderableIds(!0).map((xe=>pe.getTileByID(xe))).sort(((xe,Le)=>Le.tileID.overscaledZ-xe.tileID.overscaledZ||(xe.tileID.isLessThan(Le.tileID)?-1:1)))}const me=this.crossTileSymbolIndex.addLayer(le,q[le.source],u.center.lng);U=U||me}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((D=D||this._layerOrderChanged||M===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(K(),u.zoom))&&(this.pauseablePlacement=new So(u,this.map.terrain,this._order,D,m,M,O,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,q),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(K()),G=!0),U&&this.pauseablePlacement.placement.setStale()),G||U)for(const oe of this._order){const le=this._layers[oe];le.type==="symbol"&&this.placement.updateLayerOpacities(le,q[le.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(K())}_releaseSymbolFadeTiles(){for(const u in this.tileManagers)this.tileManagers[u].releaseSymbolFadeTiles()}getImages(u,m){return a._(this,void 0,void 0,(function*(){const M=yield this.imageManager.getImages(m.icons);this._updateTilesForChangedImages();const O=this.tileManagers[m.source];return O&&O.setDependencies(m.tileID.key,m.type,m.icons),M}))}getGlyphs(u,m){return a._(this,void 0,void 0,(function*(){const M=yield this.glyphManager.getGlyphs(m.stacks),O=this.tileManagers[m.source];return O&&O.setDependencies(m.tileID.key,m.type,[""]),M}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(u,m={}){this._checkLoaded(),u&&this._validate(a.C.glyphs,"glyphs",u,null,m)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=u,this.glyphManager.entries={},this.glyphManager.setURL(u))}getDashes(u,m){return a._(this,void 0,void 0,(function*(){const M={};for(const[O,D]of Object.entries(m.dashes))M[O]=this.lineAtlas.getDash(D.dasharray,D.round);return M}))}addSprite(u,m,M={},O){this._checkLoaded();const D=[{id:u,url:m}],U=[...ue(this.stylesheet.sprite),...D];this._validate(a.C.sprite,"sprite",U,null,M)||(this.stylesheet.sprite=U,this._loadSprite(D,!0,O))}removeSprite(u){this._checkLoaded();const m=ue(this.stylesheet.sprite);if(m.find((M=>M.id===u))){if(this._spritesImagesIds[u])for(const M of this._spritesImagesIds[u])this.imageManager.removeImage(M),this._changedImages[M]=!0;m.splice(m.findIndex((M=>M.id===u)),1),this.stylesheet.sprite=m.length>0?m:void 0,delete this._spritesImagesIds[u],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${u}" doesn't exists on this map.`)))}getSprite(){return ue(this.stylesheet.sprite)}setSprite(u,m={},M){this._checkLoaded(),u&&this._validate(a.C.sprite,"sprite",u,null,m)||(this.stylesheet.sprite=u,u?this._loadSprite(u,!0,M):(this._unloadSprite(),M&&M(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const u in this.tileManagers){const m=this.tileManagers[u];if(m.setEventedParent(null),m._tiles){for(const M in m._tiles)m._tiles[M].unloadVectorData();m._tiles={}}m._cache.reset(),m.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const u in this._layers){const m=this._layers[u];m.setEventedParent(null),m.onRemove&&m.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var kc=a.aT([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Jm{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(u,m,M,O,D,U,G,q,oe){this.context=u;let le=this.boundPaintVertexBuffers.length!==O.length;for(let me=0;!le&&me<O.length;me++)this.boundPaintVertexBuffers[me]!==O[me]&&(le=!0);!this.vao||this.boundProgram!==m||this.boundLayoutVertexBuffer!==M||le||this.boundIndexBuffer!==D||this.boundVertexOffset!==U||this.boundDynamicVertexBuffer!==G||this.boundDynamicVertexBuffer2!==q||this.boundDynamicVertexBuffer3!==oe?this.freshBind(m,M,O,D,U,G,q,oe):(u.bindVertexArray.set(this.vao),G&&G.bind(),D&&D.dynamicDraw&&D.bind(),q&&q.bind(),oe&&oe.bind())}freshBind(u,m,M,O,D,U,G,q){const oe=u.numAttributes,le=this.context,me=le.gl;this.vao&&this.destroy(),this.vao=le.createVertexArray(),le.bindVertexArray.set(this.vao),this.boundProgram=u,this.boundLayoutVertexBuffer=m,this.boundPaintVertexBuffers=M,this.boundIndexBuffer=O,this.boundVertexOffset=D,this.boundDynamicVertexBuffer=U,this.boundDynamicVertexBuffer2=G,this.boundDynamicVertexBuffer3=q,m.enableAttributes(me,u);for(const pe of M)pe.enableAttributes(me,u);U&&U.enableAttributes(me,u),G&&G.enableAttributes(me,u),q&&q.enableAttributes(me,u),m.bind(),m.setVertexAttribPointers(me,u,D);for(const pe of M)pe.bind(),pe.setVertexAttribPointers(me,u,D);U&&(U.bind(),U.setVertexAttribPointers(me,u,D)),O&&O.bind(),G&&(G.bind(),G.setVertexAttribPointers(me,u,D)),q&&(q.bind(),q.setVertexAttribPointers(me,u,D)),le.currentNumAttributes=oe}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const $A=(T,u,m,M,O)=>({u_texture:0,u_ele_delta:T,u_fog_matrix:u,u_fog_color:m?m.properties.get("fog-color"):a.bo.white,u_fog_ground_blend:m?m.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:O?0:m?m.calculateFogBlendOpacity(M):0,u_horizon_color:m?m.properties.get("horizon-color"):a.bo.white,u_horizon_fog_blend:m?m.properties.get("horizon-fog-blend"):1,u_is_globe_mode:O?1:0}),Cd={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function oA(T){const u=[];for(let m=0;m<T.length;m++){if(T[m]===null)continue;const M=T[m].split(" ");u.push(M.pop())}return u}class V1{constructor(u,m,M,O,D,U,G,q,oe=[]){const le=u.gl;this.program=le.createProgram();const me=oA(m.staticAttributes),pe=M?M.getBinderAttributes():[],xe=me.concat(pe),Le=Qs.prelude.staticUniforms?oA(Qs.prelude.staticUniforms):[],Ve=G.staticUniforms?oA(G.staticUniforms):[],He=m.staticUniforms?oA(m.staticUniforms):[],Ze=M?M.getBinderUniforms():[],et=Le.concat(Ve).concat(He).concat(Ze),lt=[];for(const Kt of et)lt.indexOf(Kt)<0&&lt.push(Kt);const Je=M?M.defines():[];ni(le)&&Je.unshift("#version 300 es"),D&&Je.push("#define OVERDRAW_INSPECTOR;"),U&&Je.push("#define TERRAIN3D;"),q&&Je.push(q),oe&&Je.push(...oe);let At=Je.concat(Qs.prelude.fragmentSource,G.fragmentSource,m.fragmentSource).join(`
`),pt=Je.concat(Qs.prelude.vertexSource,G.vertexSource,m.vertexSource).join(`
`);ni(le)||(At=(function(Kt){return Kt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(At),pt=(function(Kt){return Kt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(pt));const it=le.createShader(le.FRAGMENT_SHADER);if(le.isContextLost())return void(this.failedToCreate=!0);if(le.shaderSource(it,At),le.compileShader(it),!le.getShaderParameter(it,le.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${le.getShaderInfoLog(it)}`);le.attachShader(this.program,it);const Ct=le.createShader(le.VERTEX_SHADER);if(le.isContextLost())return void(this.failedToCreate=!0);if(le.shaderSource(Ct,pt),le.compileShader(Ct),!le.getShaderParameter(Ct,le.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${le.getShaderInfoLog(Ct)}`);le.attachShader(this.program,Ct),this.attributes={};const Nt={};this.numAttributes=xe.length;for(let Kt=0;Kt<this.numAttributes;Kt++)xe[Kt]&&(le.bindAttribLocation(this.program,Kt,xe[Kt]),this.attributes[xe[Kt]]=Kt);if(le.linkProgram(this.program),!le.getProgramParameter(this.program,le.LINK_STATUS))throw new Error(`Program failed to link: ${le.getProgramInfoLog(this.program)}`);le.deleteShader(Ct),le.deleteShader(it);for(let Kt=0;Kt<lt.length;Kt++){const Ft=lt[Kt];if(Ft&&!Nt[Ft]){const jt=le.getUniformLocation(this.program,Ft);jt&&(Nt[Ft]=jt)}}this.fixedUniforms=O(u,Nt),this.terrainUniforms=((Kt,Ft)=>({u_depth:new a.bZ(Kt,Ft.u_depth),u_terrain:new a.bZ(Kt,Ft.u_terrain),u_terrain_dim:new a.bp(Kt,Ft.u_terrain_dim),u_terrain_matrix:new a.b$(Kt,Ft.u_terrain_matrix),u_terrain_unpack:new a.c0(Kt,Ft.u_terrain_unpack),u_terrain_exaggeration:new a.bp(Kt,Ft.u_terrain_exaggeration)}))(u,Nt),this.projectionUniforms=((Kt,Ft)=>({u_projection_matrix:new a.b$(Kt,Ft.u_projection_matrix),u_projection_tile_mercator_coords:new a.c0(Kt,Ft.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.c0(Kt,Ft.u_projection_clipping_plane),u_projection_transition:new a.bp(Kt,Ft.u_projection_transition),u_projection_fallback_matrix:new a.b$(Kt,Ft.u_projection_fallback_matrix)}))(u,Nt),this.binderUniforms=M?M.getUniforms(u,Nt):[]}draw(u,m,M,O,D,U,G,q,oe,le,me,pe,xe,Le,Ve,He,Ze,et,lt){const Je=u.gl;if(this.failedToCreate)return;if(u.program.set(this.program),u.setDepthMode(M),u.setStencilMode(O),u.setColorMode(D),u.setCullFace(U),q){u.activeTexture.set(Je.TEXTURE2),Je.bindTexture(Je.TEXTURE_2D,q.depthTexture),u.activeTexture.set(Je.TEXTURE3),Je.bindTexture(Je.TEXTURE_2D,q.texture);for(const pt in this.terrainUniforms)this.terrainUniforms[pt].set(q[pt])}if(oe)for(const pt in oe)this.projectionUniforms[Cd[pt]].set(oe[pt]);if(G)for(const pt in this.fixedUniforms)this.fixedUniforms[pt].set(G[pt]);He&&He.setUniforms(u,this.binderUniforms,Le,{zoom:Ve});let At=0;switch(m){case Je.LINES:At=2;break;case Je.TRIANGLES:At=3;break;case Je.LINE_STRIP:At=1}for(const pt of xe.get()){const it=pt.vaos||(pt.vaos={});(it[le]||(it[le]=new Jm)).bind(u,this,me,He?He.getPaintVertexBuffers():[],pe,pt.vertexOffset,Ze,et,lt),Je.drawElements(m,pt.primitiveLength*At,Je.UNSIGNED_SHORT,pt.primitiveOffset*At*2)}}}function Eh(T,u,m){const M=1/a.aM(m,1,u.transform.tileZoom),O=Math.pow(2,m.tileID.overscaledZ),D=m.tileSize*Math.pow(2,u.transform.tileZoom)/O,U=D*(m.tileID.canonical.x+m.tileID.wrap*O),G=D*m.tileID.canonical.y;return{u_image:0,u_texsize:m.imageAtlasTexture.size,u_scale:[M,T.fromScale,T.toScale],u_fade:T.t,u_pixel_coord_upper:[U>>16,G>>16],u_pixel_coord_lower:[65535&U,65535&G]}}const Ip=(T,u,m,M)=>{const O=T.style.light,D=O.properties.get("position"),U=[D.x,D.y,D.z],G=a.c3();O.properties.get("anchor")==="viewport"&&a.c4(G,T.transform.bearingInRadians),a.c5(U,U,G);const q=T.transform.transformLightDirection(U),oe=O.properties.get("color");return{u_lightpos:U,u_lightpos_globe:q,u_lightintensity:O.properties.get("intensity"),u_lightcolor:[oe.r,oe.g,oe.b],u_vertical_gradient:+u,u_opacity:m,u_fill_translate:M}},_d=(T,u,m,M,O,D,U)=>a.e(Ip(T,u,m,M),Eh(D,T,U),{u_height_factor:-Math.pow(2,O.overscaledZ)/U.tileSize/8}),Bh=(T,u,m,M)=>a.e(Eh(u,T,m),{u_fill_translate:M}),iu=(T,u)=>({u_world:T,u_fill_translate:u}),w0=(T,u,m,M,O)=>a.e(Bh(T,u,m,O),{u_world:M}),xf=(T,u,m,M,O)=>{const D=T.transform;let U,G,q=0;if(m.paint.get("circle-pitch-alignment")==="map"){const oe=a.aM(u,1,D.zoom);U=!0,G=[oe,oe],q=oe/(a.a4*Math.pow(2,u.tileID.overscaledZ))*2*Math.PI*O}else U=!1,G=D.pixelsToGLUnits;return{u_camera_to_center_distance:D.cameraToCenterDistance,u_scale_with_map:+(m.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+U,u_device_pixel_ratio:T.pixelRatio,u_extrude_scale:G,u_globe_extrude_scale:q,u_translate:M}},Tp=T=>({u_pixel_extrude_scale:[1/T.width,1/T.height]}),eg=T=>({u_viewport_size:[T.width,T.height]}),xd=(T,u=1)=>({u_color:T,u_overlay:0,u_overlay_scale:u}),Md=(T,u,m,M)=>{const O=a.aM(T,1,u)/(a.a4*Math.pow(2,T.tileID.overscaledZ))*2*Math.PI*M;return{u_extrude_scale:a.aM(T,1,u),u_intensity:m,u_globe_extrude_scale:O}},S0=(T,u,m,M)=>{const O=a.N();a.c6(O,0,T.width,T.height,0,0,1);const D=T.context.gl;return{u_matrix:O,u_world:[D.drawingBufferWidth,D.drawingBufferHeight],u_image:m,u_color_ramp:M,u_opacity:u.paint.get("heatmap-opacity")}},sA=(T,u,m)=>{const M=m.paint.get("hillshade-accent-color");let O;switch(m.paint.get("hillshade-method")){case"basic":O=4;break;case"combined":O=1;break;case"igor":O=2;break;case"multidirectional":O=3;break;default:O=0}const D=m.getIlluminationProperties();for(let U=0;U<D.directionRadians.length;U++)m.paint.get("hillshade-illumination-anchor")==="viewport"&&(D.directionRadians[U]+=T.transform.bearingInRadians);return{u_image:0,u_latrange:Oh(0,u.tileID),u_exaggeration:m.paint.get("hillshade-exaggeration"),u_altitudes:D.altitudeRadians,u_azimuths:D.directionRadians,u_accent:M,u_method:O,u_highlights:D.highlightColor,u_shadows:D.shadowColor}},E0=(T,u)=>{const m=u.stride,M=a.N();return a.c6(M,0,a.a4,-a.a4,0,0,1),a.O(M,M,[0,-a.a4,0]),{u_matrix:M,u_image:1,u_dimension:[m,m],u_zoom:T.overscaledZ,u_unpack:u.getUnpackVector()}};function Oh(T,u){const m=Math.pow(2,u.canonical.z),M=u.canonical.y;return[new a.aa(0,M/m).toLngLat().lat,new a.aa(0,(M+1)/m).toLngLat().lat]}const wd=(T,u,m=0)=>({u_image:0,u_unpack:u.getUnpackVector(),u_dimension:[u.stride,u.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:m,u_opacity:T.paint.get("color-relief-opacity")}),Mf=(T,u,m,M)=>{const O=T.transform;return{u_translation:O0(T,u,m),u_ratio:M/a.aM(u,1,O.zoom),u_device_pixel_ratio:T.pixelRatio,u_units_to_pixels:[1/O.pixelsToGLUnits[0],1/O.pixelsToGLUnits[1]]}},Ih=(T,u,m,M,O)=>a.e(Mf(T,u,m,M),{u_image:0,u_image_height:O}),B0=(T,u,m,M,O)=>{const D=T.transform,U=tg(u,D);return{u_translation:O0(T,u,m),u_texsize:u.imageAtlasTexture.size,u_ratio:M/a.aM(u,1,D.zoom),u_device_pixel_ratio:T.pixelRatio,u_image:0,u_scale:[U,O.fromScale,O.toScale],u_fade:O.t,u_units_to_pixels:[1/D.pixelsToGLUnits[0],1/D.pixelsToGLUnits[1]]}},HA=(T,u,m,M,O)=>{const D=tg(u,T.transform);return a.e(Mf(T,u,m,M),{u_tileratio:D,u_crossfade_from:O.fromScale,u_crossfade_to:O.toScale,u_image:0,u_mix:O.t,u_lineatlas_width:T.lineAtlas.width,u_lineatlas_height:T.lineAtlas.height})},kp=(T,u,m,M,O,D)=>{const U=tg(u,T.transform);return a.e(Mf(T,u,m,M),{u_image:0,u_image_height:D,u_tileratio:U,u_crossfade_from:O.fromScale,u_crossfade_to:O.toScale,u_image_dash:1,u_mix:O.t,u_lineatlas_width:T.lineAtlas.width,u_lineatlas_height:T.lineAtlas.height})};function tg(T,u){return 1/a.aM(T,1,u.tileZoom)}function O0(T,u,m){return a.aN(T.transform,u,m.paint.get("line-translate"),m.paint.get("line-translate-anchor"))}const I0=(T,u,m,M,O)=>{return{u_tl_parent:T,u_scale_parent:u,u_buffer_scale:1,u_fade_t:m.mix,u_opacity:m.opacity*M.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:M.paint.get("raster-brightness-min"),u_brightness_high:M.paint.get("raster-brightness-max"),u_saturation_factor:(U=M.paint.get("raster-saturation"),U>0?1-1/(1.001-U):-U),u_contrast_factor:(D=M.paint.get("raster-contrast"),D>0?1/(1-D):1+D),u_spin_weights:Sd(M.paint.get("raster-hue-rotate")),u_coords_top:[O[0].x,O[0].y,O[1].x,O[1].y],u_coords_bottom:[O[3].x,O[3].y,O[2].x,O[2].y]};var D,U};function Sd(T){T*=Math.PI/180;const u=Math.sin(T),m=Math.cos(T);return[(2*m+1)/3,(-Math.sqrt(3)*u-m+1)/3,(Math.sqrt(3)*u-m+1)/3]}const Wo=(T,u,m,M,O,D,U,G,q,oe,le,me,pe)=>{const xe=U.transform;return{u_is_size_zoom_constant:+(T==="constant"||T==="source"),u_is_size_feature_constant:+(T==="constant"||T==="camera"),u_size_t:u?u.uSizeT:0,u_size:u?u.uSize:0,u_camera_to_center_distance:xe.cameraToCenterDistance,u_pitch:xe.pitch/360*2*Math.PI,u_rotate_symbol:+m,u_aspect_ratio:xe.width/xe.height,u_fade_change:U.options.fadeDuration?U.symbolFadeChange:1,u_label_plane_matrix:G,u_coord_matrix:q,u_is_text:+le,u_pitch_with_map:+M,u_is_along_line:O,u_is_variable_anchor:D,u_texsize:me,u_texture:0,u_translation:oe,u_pitched_scale:pe}},Tl=(T,u,m,M,O,D,U,G,q,oe,le,me,pe,xe)=>{const Le=U.transform;return a.e(Wo(T,u,m,M,O,D,U,G,q,oe,le,me,xe),{u_gamma_scale:M?Math.cos(Le.pitch*Math.PI/180)*Le.cameraToCenterDistance:1,u_device_pixel_ratio:U.pixelRatio,u_is_halo:1})},ng=(T,u,m,M,O,D,U,G,q,oe,le,me,pe)=>a.e(Tl(T,u,m,M,O,D,U,G,q,oe,!0,le,0,pe),{u_texsize_icon:me,u_texture_icon:1}),ig=(T,u)=>({u_opacity:T,u_color:u}),rg=(T,u,m,M,O)=>a.e((function(D,U,G,q){const oe=G.imageManager.getPattern(D.from.toString()),le=G.imageManager.getPattern(D.to.toString()),{width:me,height:pe}=G.imageManager.getPixelSize(),xe=Math.pow(2,q.tileID.overscaledZ),Le=q.tileSize*Math.pow(2,G.transform.tileZoom)/xe,Ve=Le*(q.tileID.canonical.x+q.tileID.wrap*xe),He=Le*q.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:oe.tl,u_pattern_br_a:oe.br,u_pattern_tl_b:le.tl,u_pattern_br_b:le.br,u_texsize:[me,pe],u_mix:U.t,u_pattern_size_a:oe.displaySize,u_pattern_size_b:le.displaySize,u_scale_a:U.fromScale,u_scale_b:U.toScale,u_tile_units_to_pixels:1/a.aM(q,1,G.transform.tileZoom),u_pixel_coord_upper:[Ve>>16,He>>16],u_pixel_coord_lower:[65535&Ve,65535&He]}})(m,O,u,M),{u_opacity:T}),og=(T,u)=>{},Dp={fillExtrusion:(T,u)=>({u_lightpos:new a.c1(T,u.u_lightpos),u_lightpos_globe:new a.c1(T,u.u_lightpos_globe),u_lightintensity:new a.bp(T,u.u_lightintensity),u_lightcolor:new a.c1(T,u.u_lightcolor),u_vertical_gradient:new a.bp(T,u.u_vertical_gradient),u_opacity:new a.bp(T,u.u_opacity),u_fill_translate:new a.c2(T,u.u_fill_translate)}),fillExtrusionPattern:(T,u)=>({u_lightpos:new a.c1(T,u.u_lightpos),u_lightpos_globe:new a.c1(T,u.u_lightpos_globe),u_lightintensity:new a.bp(T,u.u_lightintensity),u_lightcolor:new a.c1(T,u.u_lightcolor),u_vertical_gradient:new a.bp(T,u.u_vertical_gradient),u_height_factor:new a.bp(T,u.u_height_factor),u_opacity:new a.bp(T,u.u_opacity),u_fill_translate:new a.c2(T,u.u_fill_translate),u_image:new a.bZ(T,u.u_image),u_texsize:new a.c2(T,u.u_texsize),u_pixel_coord_upper:new a.c2(T,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.c2(T,u.u_pixel_coord_lower),u_scale:new a.c1(T,u.u_scale),u_fade:new a.bp(T,u.u_fade)}),fill:(T,u)=>({u_fill_translate:new a.c2(T,u.u_fill_translate)}),fillPattern:(T,u)=>({u_image:new a.bZ(T,u.u_image),u_texsize:new a.c2(T,u.u_texsize),u_pixel_coord_upper:new a.c2(T,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.c2(T,u.u_pixel_coord_lower),u_scale:new a.c1(T,u.u_scale),u_fade:new a.bp(T,u.u_fade),u_fill_translate:new a.c2(T,u.u_fill_translate)}),fillOutline:(T,u)=>({u_world:new a.c2(T,u.u_world),u_fill_translate:new a.c2(T,u.u_fill_translate)}),fillOutlinePattern:(T,u)=>({u_world:new a.c2(T,u.u_world),u_image:new a.bZ(T,u.u_image),u_texsize:new a.c2(T,u.u_texsize),u_pixel_coord_upper:new a.c2(T,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.c2(T,u.u_pixel_coord_lower),u_scale:new a.c1(T,u.u_scale),u_fade:new a.bp(T,u.u_fade),u_fill_translate:new a.c2(T,u.u_fill_translate)}),circle:(T,u)=>({u_camera_to_center_distance:new a.bp(T,u.u_camera_to_center_distance),u_scale_with_map:new a.bZ(T,u.u_scale_with_map),u_pitch_with_map:new a.bZ(T,u.u_pitch_with_map),u_extrude_scale:new a.c2(T,u.u_extrude_scale),u_device_pixel_ratio:new a.bp(T,u.u_device_pixel_ratio),u_globe_extrude_scale:new a.bp(T,u.u_globe_extrude_scale),u_translate:new a.c2(T,u.u_translate)}),collisionBox:(T,u)=>({u_pixel_extrude_scale:new a.c2(T,u.u_pixel_extrude_scale)}),collisionCircle:(T,u)=>({u_viewport_size:new a.c2(T,u.u_viewport_size)}),debug:(T,u)=>({u_color:new a.b_(T,u.u_color),u_overlay:new a.bZ(T,u.u_overlay),u_overlay_scale:new a.bp(T,u.u_overlay_scale)}),depth:og,clippingMask:og,heatmap:(T,u)=>({u_extrude_scale:new a.bp(T,u.u_extrude_scale),u_intensity:new a.bp(T,u.u_intensity),u_globe_extrude_scale:new a.bp(T,u.u_globe_extrude_scale)}),heatmapTexture:(T,u)=>({u_matrix:new a.b$(T,u.u_matrix),u_world:new a.c2(T,u.u_world),u_image:new a.bZ(T,u.u_image),u_color_ramp:new a.bZ(T,u.u_color_ramp),u_opacity:new a.bp(T,u.u_opacity)}),hillshade:(T,u)=>({u_image:new a.bZ(T,u.u_image),u_latrange:new a.c2(T,u.u_latrange),u_exaggeration:new a.bp(T,u.u_exaggeration),u_altitudes:new a.c8(T,u.u_altitudes),u_azimuths:new a.c8(T,u.u_azimuths),u_accent:new a.b_(T,u.u_accent),u_method:new a.bZ(T,u.u_method),u_shadows:new a.c7(T,u.u_shadows),u_highlights:new a.c7(T,u.u_highlights)}),hillshadePrepare:(T,u)=>({u_matrix:new a.b$(T,u.u_matrix),u_image:new a.bZ(T,u.u_image),u_dimension:new a.c2(T,u.u_dimension),u_zoom:new a.bp(T,u.u_zoom),u_unpack:new a.c0(T,u.u_unpack)}),colorRelief:(T,u)=>({u_image:new a.bZ(T,u.u_image),u_unpack:new a.c0(T,u.u_unpack),u_dimension:new a.c2(T,u.u_dimension),u_elevation_stops:new a.bZ(T,u.u_elevation_stops),u_color_stops:new a.bZ(T,u.u_color_stops),u_color_ramp_size:new a.bZ(T,u.u_color_ramp_size),u_opacity:new a.bp(T,u.u_opacity)}),line:(T,u)=>({u_translation:new a.c2(T,u.u_translation),u_ratio:new a.bp(T,u.u_ratio),u_device_pixel_ratio:new a.bp(T,u.u_device_pixel_ratio),u_units_to_pixels:new a.c2(T,u.u_units_to_pixels)}),lineGradient:(T,u)=>({u_translation:new a.c2(T,u.u_translation),u_ratio:new a.bp(T,u.u_ratio),u_device_pixel_ratio:new a.bp(T,u.u_device_pixel_ratio),u_units_to_pixels:new a.c2(T,u.u_units_to_pixels),u_image:new a.bZ(T,u.u_image),u_image_height:new a.bp(T,u.u_image_height)}),linePattern:(T,u)=>({u_translation:new a.c2(T,u.u_translation),u_texsize:new a.c2(T,u.u_texsize),u_ratio:new a.bp(T,u.u_ratio),u_device_pixel_ratio:new a.bp(T,u.u_device_pixel_ratio),u_image:new a.bZ(T,u.u_image),u_units_to_pixels:new a.c2(T,u.u_units_to_pixels),u_scale:new a.c1(T,u.u_scale),u_fade:new a.bp(T,u.u_fade)}),lineSDF:(T,u)=>({u_translation:new a.c2(T,u.u_translation),u_ratio:new a.bp(T,u.u_ratio),u_device_pixel_ratio:new a.bp(T,u.u_device_pixel_ratio),u_units_to_pixels:new a.c2(T,u.u_units_to_pixels),u_image:new a.bZ(T,u.u_image),u_mix:new a.bp(T,u.u_mix),u_tileratio:new a.bp(T,u.u_tileratio),u_crossfade_from:new a.bp(T,u.u_crossfade_from),u_crossfade_to:new a.bp(T,u.u_crossfade_to),u_lineatlas_width:new a.bp(T,u.u_lineatlas_width),u_lineatlas_height:new a.bp(T,u.u_lineatlas_height)}),lineGradientSDF:(T,u)=>({u_translation:new a.c2(T,u.u_translation),u_ratio:new a.bp(T,u.u_ratio),u_device_pixel_ratio:new a.bp(T,u.u_device_pixel_ratio),u_units_to_pixels:new a.c2(T,u.u_units_to_pixels),u_image:new a.bZ(T,u.u_image),u_image_height:new a.bp(T,u.u_image_height),u_tileratio:new a.bp(T,u.u_tileratio),u_crossfade_from:new a.bp(T,u.u_crossfade_from),u_crossfade_to:new a.bp(T,u.u_crossfade_to),u_image_dash:new a.bZ(T,u.u_image_dash),u_mix:new a.bp(T,u.u_mix),u_lineatlas_width:new a.bp(T,u.u_lineatlas_width),u_lineatlas_height:new a.bp(T,u.u_lineatlas_height)}),raster:(T,u)=>({u_tl_parent:new a.c2(T,u.u_tl_parent),u_scale_parent:new a.bp(T,u.u_scale_parent),u_buffer_scale:new a.bp(T,u.u_buffer_scale),u_fade_t:new a.bp(T,u.u_fade_t),u_opacity:new a.bp(T,u.u_opacity),u_image0:new a.bZ(T,u.u_image0),u_image1:new a.bZ(T,u.u_image1),u_brightness_low:new a.bp(T,u.u_brightness_low),u_brightness_high:new a.bp(T,u.u_brightness_high),u_saturation_factor:new a.bp(T,u.u_saturation_factor),u_contrast_factor:new a.bp(T,u.u_contrast_factor),u_spin_weights:new a.c1(T,u.u_spin_weights),u_coords_top:new a.c0(T,u.u_coords_top),u_coords_bottom:new a.c0(T,u.u_coords_bottom)}),symbolIcon:(T,u)=>({u_is_size_zoom_constant:new a.bZ(T,u.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bZ(T,u.u_is_size_feature_constant),u_size_t:new a.bp(T,u.u_size_t),u_size:new a.bp(T,u.u_size),u_camera_to_center_distance:new a.bp(T,u.u_camera_to_center_distance),u_pitch:new a.bp(T,u.u_pitch),u_rotate_symbol:new a.bZ(T,u.u_rotate_symbol),u_aspect_ratio:new a.bp(T,u.u_aspect_ratio),u_fade_change:new a.bp(T,u.u_fade_change),u_label_plane_matrix:new a.b$(T,u.u_label_plane_matrix),u_coord_matrix:new a.b$(T,u.u_coord_matrix),u_is_text:new a.bZ(T,u.u_is_text),u_pitch_with_map:new a.bZ(T,u.u_pitch_with_map),u_is_along_line:new a.bZ(T,u.u_is_along_line),u_is_variable_anchor:new a.bZ(T,u.u_is_variable_anchor),u_texsize:new a.c2(T,u.u_texsize),u_texture:new a.bZ(T,u.u_texture),u_translation:new a.c2(T,u.u_translation),u_pitched_scale:new a.bp(T,u.u_pitched_scale)}),symbolSDF:(T,u)=>({u_is_size_zoom_constant:new a.bZ(T,u.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bZ(T,u.u_is_size_feature_constant),u_size_t:new a.bp(T,u.u_size_t),u_size:new a.bp(T,u.u_size),u_camera_to_center_distance:new a.bp(T,u.u_camera_to_center_distance),u_pitch:new a.bp(T,u.u_pitch),u_rotate_symbol:new a.bZ(T,u.u_rotate_symbol),u_aspect_ratio:new a.bp(T,u.u_aspect_ratio),u_fade_change:new a.bp(T,u.u_fade_change),u_label_plane_matrix:new a.b$(T,u.u_label_plane_matrix),u_coord_matrix:new a.b$(T,u.u_coord_matrix),u_is_text:new a.bZ(T,u.u_is_text),u_pitch_with_map:new a.bZ(T,u.u_pitch_with_map),u_is_along_line:new a.bZ(T,u.u_is_along_line),u_is_variable_anchor:new a.bZ(T,u.u_is_variable_anchor),u_texsize:new a.c2(T,u.u_texsize),u_texture:new a.bZ(T,u.u_texture),u_gamma_scale:new a.bp(T,u.u_gamma_scale),u_device_pixel_ratio:new a.bp(T,u.u_device_pixel_ratio),u_is_halo:new a.bZ(T,u.u_is_halo),u_translation:new a.c2(T,u.u_translation),u_pitched_scale:new a.bp(T,u.u_pitched_scale)}),symbolTextAndIcon:(T,u)=>({u_is_size_zoom_constant:new a.bZ(T,u.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bZ(T,u.u_is_size_feature_constant),u_size_t:new a.bp(T,u.u_size_t),u_size:new a.bp(T,u.u_size),u_camera_to_center_distance:new a.bp(T,u.u_camera_to_center_distance),u_pitch:new a.bp(T,u.u_pitch),u_rotate_symbol:new a.bZ(T,u.u_rotate_symbol),u_aspect_ratio:new a.bp(T,u.u_aspect_ratio),u_fade_change:new a.bp(T,u.u_fade_change),u_label_plane_matrix:new a.b$(T,u.u_label_plane_matrix),u_coord_matrix:new a.b$(T,u.u_coord_matrix),u_is_text:new a.bZ(T,u.u_is_text),u_pitch_with_map:new a.bZ(T,u.u_pitch_with_map),u_is_along_line:new a.bZ(T,u.u_is_along_line),u_is_variable_anchor:new a.bZ(T,u.u_is_variable_anchor),u_texsize:new a.c2(T,u.u_texsize),u_texsize_icon:new a.c2(T,u.u_texsize_icon),u_texture:new a.bZ(T,u.u_texture),u_texture_icon:new a.bZ(T,u.u_texture_icon),u_gamma_scale:new a.bp(T,u.u_gamma_scale),u_device_pixel_ratio:new a.bp(T,u.u_device_pixel_ratio),u_is_halo:new a.bZ(T,u.u_is_halo),u_translation:new a.c2(T,u.u_translation),u_pitched_scale:new a.bp(T,u.u_pitched_scale)}),background:(T,u)=>({u_opacity:new a.bp(T,u.u_opacity),u_color:new a.b_(T,u.u_color)}),backgroundPattern:(T,u)=>({u_opacity:new a.bp(T,u.u_opacity),u_image:new a.bZ(T,u.u_image),u_pattern_tl_a:new a.c2(T,u.u_pattern_tl_a),u_pattern_br_a:new a.c2(T,u.u_pattern_br_a),u_pattern_tl_b:new a.c2(T,u.u_pattern_tl_b),u_pattern_br_b:new a.c2(T,u.u_pattern_br_b),u_texsize:new a.c2(T,u.u_texsize),u_mix:new a.bp(T,u.u_mix),u_pattern_size_a:new a.c2(T,u.u_pattern_size_a),u_pattern_size_b:new a.c2(T,u.u_pattern_size_b),u_scale_a:new a.bp(T,u.u_scale_a),u_scale_b:new a.bp(T,u.u_scale_b),u_pixel_coord_upper:new a.c2(T,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.c2(T,u.u_pixel_coord_lower),u_tile_units_to_pixels:new a.bp(T,u.u_tile_units_to_pixels)}),terrain:(T,u)=>({u_texture:new a.bZ(T,u.u_texture),u_ele_delta:new a.bp(T,u.u_ele_delta),u_fog_matrix:new a.b$(T,u.u_fog_matrix),u_fog_color:new a.b_(T,u.u_fog_color),u_fog_ground_blend:new a.bp(T,u.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.bp(T,u.u_fog_ground_blend_opacity),u_horizon_color:new a.b_(T,u.u_horizon_color),u_horizon_fog_blend:new a.bp(T,u.u_horizon_fog_blend),u_is_globe_mode:new a.bp(T,u.u_is_globe_mode)}),terrainDepth:(T,u)=>({u_ele_delta:new a.bp(T,u.u_ele_delta)}),terrainCoords:(T,u)=>({u_texture:new a.bZ(T,u.u_texture),u_terrain_coords_id:new a.bp(T,u.u_terrain_coords_id),u_ele_delta:new a.bp(T,u.u_ele_delta)}),projectionErrorMeasurement:(T,u)=>({u_input:new a.bp(T,u.u_input),u_output_expected:new a.bp(T,u.u_output_expected)}),atmosphere:(T,u)=>({u_sun_pos:new a.c1(T,u.u_sun_pos),u_atmosphere_blend:new a.bp(T,u.u_atmosphere_blend),u_globe_position:new a.c1(T,u.u_globe_position),u_globe_radius:new a.bp(T,u.u_globe_radius),u_inv_proj_matrix:new a.b$(T,u.u_inv_proj_matrix)}),sky:(T,u)=>({u_sky_color:new a.b_(T,u.u_sky_color),u_horizon_color:new a.b_(T,u.u_horizon_color),u_horizon:new a.c2(T,u.u_horizon),u_horizon_normal:new a.c2(T,u.u_horizon_normal),u_sky_horizon_blend:new a.bp(T,u.u_sky_horizon_blend),u_sky_blend:new a.bp(T,u.u_sky_blend)})};class Ju{constructor(u,m,M){this.context=u;const O=u.gl;this.buffer=O.createBuffer(),this.dynamicDraw=!!M,this.context.unbindVAO(),u.bindElementBuffer.set(this.buffer),O.bufferData(O.ELEMENT_ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?O.DYNAMIC_DRAW:O.STATIC_DRAW),this.dynamicDraw||delete m.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(u){const m=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),m.bufferSubData(m.ELEMENT_ARRAY_BUFFER,0,u.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ot={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ln{constructor(u,m,M,O){this.length=m.length,this.attributes=M,this.itemSize=m.bytesPerElement,this.dynamicDraw=O,this.context=u;const D=u.gl;this.buffer=D.createBuffer(),u.bindVertexBuffer.set(this.buffer),D.bufferData(D.ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?D.DYNAMIC_DRAW:D.STATIC_DRAW),this.dynamicDraw||delete m.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(u){if(u.length!==this.length)throw new Error(`Length of new data is ${u.length}, which doesn't match current length of ${this.length}`);const m=this.context.gl;this.bind(),m.bufferSubData(m.ARRAY_BUFFER,0,u.arrayBuffer)}enableAttributes(u,m){for(let M=0;M<this.attributes.length;M++){const O=m.attributes[this.attributes[M].name];O!==void 0&&u.enableVertexAttribArray(O)}}setVertexAttribPointers(u,m,M){for(let O=0;O<this.attributes.length;O++){const D=this.attributes[O],U=m.attributes[D.name];U!==void 0&&u.vertexAttribPointer(U,D.components,u[Ot[D.type]],!1,this.itemSize,D.offset+this.itemSize*(M||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Rt{constructor(u){this.gl=u.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(u){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ri extends Rt{getDefault(){return a.bo.transparent}set(u){const m=this.current;(u.r!==m.r||u.g!==m.g||u.b!==m.b||u.a!==m.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class er extends Rt{getDefault(){return 1}set(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)}}class Mr extends Rt{getDefault(){return 0}set(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)}}class Ss extends Rt{getDefault(){return[!0,!0,!0,!0]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||u[3]!==m[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class vo extends Rt{getDefault(){return!0}set(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)}}class Ed extends Rt{getDefault(){return 255}set(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)}}class aA extends Rt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(u){const m=this.current;(u.func!==m.func||u.ref!==m.ref||u.mask!==m.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)}}class hl extends Rt{getDefault(){const u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)}}class Bd extends Rt{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.STENCIL_TEST):m.disable(m.STENCIL_TEST),this.current=u,this.dirty=!1}}class Th extends Rt{getDefault(){return[0,1]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)}}class lA extends Rt{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST),this.current=u,this.dirty=!1}}class ZA extends Rt{getDefault(){return this.gl.LESS}set(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)}}class kl extends Rt{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.BLEND):m.disable(m.BLEND),this.current=u,this.dirty=!1}}class mo extends Rt{getDefault(){const u=this.gl;return[u.ONE,u.ZERO]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)}}class T0 extends Rt{getDefault(){return a.bo.transparent}set(u){const m=this.current;(u.r!==m.r||u.g!==m.g||u.b!==m.b||u.a!==m.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class wf extends Rt{getDefault(){return this.gl.FUNC_ADD}set(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)}}class va extends Rt{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.CULL_FACE):m.disable(m.CULL_FACE),this.current=u,this.dirty=!1}}class Od extends Rt{getDefault(){return this.gl.BACK}set(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)}}class Dl extends Rt{getDefault(){return this.gl.CCW}set(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)}}class uA extends Rt{getDefault(){return null}set(u){(u!==this.current||this.dirty)&&(this.gl.useProgram(u),this.current=u,this.dirty=!1)}}class XA extends Rt{getDefault(){return this.gl.TEXTURE0}set(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)}}class ec extends Rt{getDefault(){const u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||u[3]!==m[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class tc extends Rt{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindFramebuffer(m.FRAMEBUFFER,u),this.current=u,this.dirty=!1}}class JA extends Rt{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindRenderbuffer(m.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class Dc extends Rt{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindTexture(m.TEXTURE_2D,u),this.current=u,this.dirty=!1}}class Rp extends Rt{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindBuffer(m.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class rr extends Rt{getDefault(){return null}set(u){const m=this.gl;m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class nc extends Rt{getDefault(){return null}set(u){var m;if(u===this.current&&!this.dirty)return;const M=this.gl;ni(M)?M.bindVertexArray(u):(m=M.getExtension("OES_vertex_array_object"))===null||m===void 0||m.bindVertexArrayOES(u),this.current=u,this.dirty=!1}}class $1 extends Rt{getDefault(){return 4}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}}class Ga extends Rt{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}}class Tu extends Rt{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}}class ru extends Rt{constructor(u,m){super(u),this.context=u,this.parent=m}getDefault(){return null}}class H1 extends ru{setDirty(){this.dirty=!0}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}}class Pp extends ru{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_ATTACHMENT,m.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class Id extends ru{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_STENCIL_ATTACHMENT,m.RENDERBUFFER,u),this.current=u,this.dirty=!1}}const eh="Framebuffer is not complete";class kh{constructor(u,m,M,O,D){this.context=u,this.width=m,this.height=M;const U=u.gl,G=this.framebuffer=U.createFramebuffer();if(this.colorAttachment=new H1(u,G),O)this.depthAttachment=D?new Id(u,G):new Pp(u,G);else if(D)throw new Error("Stencil cannot be set without depth");if(U.checkFramebufferStatus(U.FRAMEBUFFER)!==U.FRAMEBUFFER_COMPLETE)throw new Error(eh)}destroy(){const u=this.context.gl,m=this.colorAttachment.get();if(m&&u.deleteTexture(m),this.depthAttachment){const M=this.depthAttachment.get();M&&u.deleteRenderbuffer(M)}u.deleteFramebuffer(this.framebuffer)}}class Dh{constructor(u){var m,M;if(this.gl=u,this.clearColor=new ri(this),this.clearDepth=new er(this),this.clearStencil=new Mr(this),this.colorMask=new Ss(this),this.depthMask=new vo(this),this.stencilMask=new Ed(this),this.stencilFunc=new aA(this),this.stencilOp=new hl(this),this.stencilTest=new Bd(this),this.depthRange=new Th(this),this.depthTest=new lA(this),this.depthFunc=new ZA(this),this.blend=new kl(this),this.blendFunc=new mo(this),this.blendColor=new T0(this),this.blendEquation=new wf(this),this.cullFace=new va(this),this.cullFaceSide=new Od(this),this.frontFace=new Dl(this),this.program=new uA(this),this.activeTexture=new XA(this),this.viewport=new ec(this),this.bindFramebuffer=new tc(this),this.bindRenderbuffer=new JA(this),this.bindTexture=new Dc(this),this.bindVertexBuffer=new Rp(this),this.bindElementBuffer=new rr(this),this.bindVertexArray=new nc(this),this.pixelStoreUnpack=new $1(this),this.pixelStoreUnpackPremultiplyAlpha=new Ga(this),this.pixelStoreUnpackFlipY=new Tu(this),this.extTextureFilterAnisotropic=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=u.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE),ni(u)){this.HALF_FLOAT=u.HALF_FLOAT;const O=u.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(m=u.RGBA16F)!==null&&m!==void 0?m:O?.RGBA16F_EXT,this.RGB16F=(M=u.RGB16F)!==null&&M!==void 0?M:O?.RGB16F_EXT,u.getExtension("EXT_color_buffer_float")}else{u.getExtension("EXT_color_buffer_half_float"),u.getExtension("OES_texture_half_float_linear");const O=u.getExtension("OES_texture_half_float");this.HALF_FLOAT=O?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(u,m){return new Ju(this,u,m)}createVertexBuffer(u,m,M){return new ln(this,u,m,M)}createRenderbuffer(u,m,M){const O=this.gl,D=O.createRenderbuffer();return this.bindRenderbuffer.set(D),O.renderbufferStorage(O.RENDERBUFFER,u,m,M),this.bindRenderbuffer.set(null),D}createFramebuffer(u,m,M,O){return new kh(this,u,m,M,O)}clear({color:u,depth:m,stencil:M}){const O=this.gl;let D=0;u&&(D|=O.COLOR_BUFFER_BIT,this.clearColor.set(u),this.colorMask.set([!0,!0,!0,!0])),m!==void 0&&(D|=O.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(m),this.depthMask.set(!0)),M!==void 0&&(D|=O.STENCIL_BUFFER_BIT,this.clearStencil.set(M),this.stencilMask.set(255)),O.clear(D)}setCullFace(u){u.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(u.mode),this.frontFace.set(u.frontFace))}setDepthMode(u){u.func!==this.gl.ALWAYS||u.mask?(this.depthTest.set(!0),this.depthFunc.set(u.func),this.depthMask.set(u.mask),this.depthRange.set(u.range)):this.depthTest.set(!1)}setStencilMode(u){u.test.func!==this.gl.ALWAYS||u.mask?(this.stencilTest.set(!0),this.stencilMask.set(u.mask),this.stencilOp.set([u.fail,u.depthFail,u.pass]),this.stencilFunc.set({func:u.test.func,ref:u.ref,mask:u.test.mask})):this.stencilTest.set(!1)}setColorMode(u){a.bQ(u.blendFunction,Ge.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(u.blendFunction),this.blendColor.set(u.blendColor)),this.colorMask.set(u.mask)}createVertexArray(){var u;return ni(this.gl)?this.gl.createVertexArray():(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.createVertexArrayOES()}deleteVertexArray(u){var m;return ni(this.gl)?this.gl.deleteVertexArray(u):(m=this.gl.getExtension("OES_vertex_array_object"))===null||m===void 0?void 0:m.deleteVertexArrayOES(u)}unbindVAO(){this.bindVertexArray.set(null)}}let Rh;function dl(T,u,m,M,O){const D=T.context,U=T.transform,G=D.gl,q=T.useProgram("collisionBox"),oe=[];let le=0,me=0;for(let Ze=0;Ze<M.length;Ze++){const et=M[Ze],lt=u.getTile(et).getBucket(m);if(!lt)continue;const Je=O?lt.textCollisionBox:lt.iconCollisionBox,At=lt.collisionCircleArray;At.length>0&&(oe.push({circleArray:At,circleOffset:me,coord:et}),le+=At.length/4,me=le),Je&&q.draw(D,G.LINES,Xt.disabled,Pn.disabled,T.colorModeForRenderPass(),bn.disabled,Tp(T.transform),T.style.map.terrain&&T.style.map.terrain.getTerrainData(et),U.getProjectionData({overscaledTileID:et,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),m.id,Je.layoutVertexBuffer,Je.indexBuffer,Je.segments,null,T.transform.zoom,null,null,Je.collisionVertexBuffer)}if(!O||!oe.length)return;const pe=T.useProgram("collisionCircle"),xe=new a.c9;xe.resize(4*le),xe._trim();let Le=0;for(const Ze of oe)for(let et=0;et<Ze.circleArray.length/4;et++){const lt=4*et,Je=Ze.circleArray[lt+0],At=Ze.circleArray[lt+1],pt=Ze.circleArray[lt+2],it=Ze.circleArray[lt+3];xe.emplace(Le++,Je,At,pt,it,0),xe.emplace(Le++,Je,At,pt,it,1),xe.emplace(Le++,Je,At,pt,it,2),xe.emplace(Le++,Je,At,pt,it,3)}(!Rh||Rh.length<2*le)&&(Rh=(function(Ze){const et=2*Ze,lt=new a.cb;lt.resize(et),lt._trim();for(let Je=0;Je<et;Je++){const At=6*Je;lt.uint16[At+0]=4*Je+0,lt.uint16[At+1]=4*Je+1,lt.uint16[At+2]=4*Je+2,lt.uint16[At+3]=4*Je+2,lt.uint16[At+4]=4*Je+3,lt.uint16[At+5]=4*Je+0}return lt})(le));const Ve=D.createIndexBuffer(Rh,!0),He=D.createVertexBuffer(xe,a.ca.members,!0);for(const Ze of oe){const et=eg(T.transform);pe.draw(D,G.TRIANGLES,Xt.disabled,Pn.disabled,T.colorModeForRenderPass(),bn.disabled,et,T.style.map.terrain&&T.style.map.terrain.getTerrainData(Ze.coord),null,m.id,He,Ve,a.aW.simpleSegment(0,2*Ze.circleOffset,Ze.circleArray.length,Ze.circleArray.length/2),null,T.transform.zoom,null,null,null)}He.destroy(),Ve.destroy()}const Td=a.ar(new Float32Array(16));function th(T,u,m,M,O,D){const{horizontalAlign:U,verticalAlign:G}=a.aR(T);return new a.P((-(U-.5)*u/O+M[0])*D,(-(G-.5)*m/O+M[1])*D)}function cs(T,u,m,M,O,D){const U=u.tileAnchorPoint.add(new a.P(u.translation[0],u.translation[1]));if(u.pitchWithMap){let G=M.mult(D);m||(G=G.rotate(-O));const q=U.add(G);return Kn(q.x,q.y,u.pitchedLabelPlaneMatrix,u.getElevation).point}if(m){const G=ls(u.tileAnchorPoint.x+1,u.tileAnchorPoint.y,u).point.sub(T),q=Math.atan(G.y/G.x)+(G.x<0?Math.PI:0);return T.add(M.rotate(q))}return T.add(M)}function Fs(T,u,m,M,O,D,U,G,q,oe,le,me){const pe=T.text.placedSymbolArray,xe=T.text.dynamicLayoutVertexArray,Le=T.icon.dynamicLayoutVertexArray,Ve={};xe.clear();for(let He=0;He<pe.length;He++){const Ze=pe.get(He),et=Ze.hidden||!Ze.crossTileID||T.allowVerticalPlacement&&!Ze.placedOrientation?null:M[Ze.crossTileID];if(et){const lt=new a.P(Ze.anchorX,Ze.anchorY),Je={getElevation:me,width:O.width,height:O.height,pitchedLabelPlaneMatrix:D,pitchWithMap:m,transform:O,tileAnchorPoint:lt,translation:oe,unwrappedTileID:le},At=m?ma(lt.x,lt.y,Je):ls(lt.x,lt.y,Je),pt=ii(O.cameraToCenterDistance,At.signedDistanceFromCamera);let it=a.az(T.textSizeData,G,Ze)*pt/a.aL;m&&(it*=T.tilePixelRatio/U);const{width:Ct,height:Nt,anchor:Kt,textOffset:Ft,textBoxScale:jt}=et,pn=th(Kt,Ct,Nt,Ft,jt,it),Sn=O.getPitchedTextCorrection(lt.x+oe[0],lt.y+oe[1],le),rn=cs(At.point,Je,u,pn,-O.bearingInRadians,Sn),$n=T.allowVerticalPlacement&&Ze.placedOrientation===a.ay.vertical?Math.PI/2:0;for(let Ni=0;Ni<Ze.numGlyphs;Ni++)a.aF(xe,rn,$n);q&&Ze.associatedIconIndex>=0&&(Ve[Ze.associatedIconIndex]={shiftedAnchor:rn,angle:$n})}else us(Ze.numGlyphs,xe)}if(q){Le.clear();const He=T.icon.placedSymbolArray;for(let Ze=0;Ze<He.length;Ze++){const et=He.get(Ze);if(et.hidden)us(et.numGlyphs,Le);else{const lt=Ve[Ze];if(lt)for(let Je=0;Je<et.numGlyphs;Je++)a.aF(Le,lt.shiftedAnchor,lt.angle);else us(et.numGlyphs,Le)}}T.icon.dynamicLayoutVertexBuffer.updateData(Le)}T.text.dynamicLayoutVertexBuffer.updateData(xe)}function Xa(T,u,m){return m.iconsInText&&u?"symbolTextAndIcon":T?"symbolSDF":"symbolIcon"}function Rl(T,u,m,M,O,D,U,G,q,oe,le,me,pe){const xe=T.context,Le=xe.gl,Ve=T.transform,He=G==="map",Ze=q==="map",et=G!=="viewport"&&m.layout.get("symbol-placement")!=="point",lt=He&&!Ze&&!et,Je=!m.layout.get("symbol-sort-key").isConstant();let At=!1;const pt=T.getDepthModeForSublayer(0,Xt.ReadOnly),it=m._unevaluatedLayout.hasValue("text-variable-anchor")||m._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ct=[],Nt=Ve.getCircleRadiusCorrection();for(const Kt of M){const Ft=u.getTile(Kt),jt=Ft.getBucket(m);if(!jt)continue;const pn=O?jt.text:jt.icon;if(!pn||!pn.segments.get().length||!pn.hasVisibleVertices)continue;const Sn=pn.programConfigurations.get(m.id),rn=O||jt.sdfIcons,$n=O?jt.textSizeData:jt.iconSizeData,Ni=Ze||Ve.pitch!==0,Fi=T.useProgram(Xa(rn,O,jt),Sn),qo=a.ax($n,Ve.zoom),Ko=T.style.map.terrain&&T.style.map.terrain.getTerrainData(Kt);let ds,bo,Ys,rs,Es=[0,0],Bs=null;if(O)bo=Ft.glyphAtlasTexture,Ys=Le.LINEAR,ds=Ft.glyphAtlasTexture.size,jt.iconsInText&&(Es=Ft.imageAtlasTexture.size,Bs=Ft.imageAtlasTexture,rs=Ni||T.options.rotating||T.options.zooming||$n.kind==="composite"||$n.kind==="camera"?Le.LINEAR:Le.NEAREST);else{const ps=m.layout.get("icon-size").constantOr(0)!==1||jt.iconsNeedLinear;bo=Ft.imageAtlasTexture,Ys=rn||T.options.rotating||T.options.zooming||ps||Ni?Le.LINEAR:Le.NEAREST,ds=Ft.imageAtlasTexture.size}const Gr=a.aM(Ft,1,T.transform.zoom),fs=to(He,T.transform,Gr),xA=a.N();a.aA(xA,fs);const zc=tr(Ze,He,T.transform,Gr),jc=a.aN(Ve,Ft,D,U),jl=Ve.getProjectionData({overscaledTileID:Kt,applyGlobeMatrix:!pe,applyTerrainMatrix:!0}),uh=it&&jt.hasTextData(),uu=m.layout.get("icon-text-fit")!=="none"&&uh&&jt.hasIconData();if(et){const ps=T.style.map.terrain?(ms,co)=>T.style.map.terrain.getElevation(Kt,ms,co):null,To=m.layout.get("text-rotation-alignment")==="map";Su(jt,T,O,fs,xA,Ze,oe,To,Kt.toUnwrapped(),Ve.width,Ve.height,jc,ps)}const Nc=O&&it||uu,Nl=et||Nc?Td:Ze?fs:T.transform.clipSpaceToPixelsMatrix,Gl=rn&&m.paint.get(O?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Gc;Gc=rn?jt.iconsInText?ng($n.kind,qo,lt,Ze,et,Nc,T,Nl,zc,jc,ds,Es,Nt):Tl($n.kind,qo,lt,Ze,et,Nc,T,Nl,zc,jc,O,ds,0,Nt):Wo($n.kind,qo,lt,Ze,et,Nc,T,Nl,zc,jc,O,ds,Nt);const zd={program:Fi,buffers:pn,uniformValues:Gc,projectionData:jl,atlasTexture:bo,atlasTextureIcon:Bs,atlasInterpolation:Ys,atlasInterpolationIcon:rs,isSDF:rn,hasHalo:Gl};if(Je&&jt.canOverlap){At=!0;const ps=pn.segments.get();for(const To of ps)Ct.push({segments:new a.aW([To]),sortKey:To.sortKey,state:zd,terrainData:Ko})}else Ct.push({segments:pn.segments,sortKey:0,state:zd,terrainData:Ko})}At&&Ct.sort(((Kt,Ft)=>Kt.sortKey-Ft.sortKey));for(const Kt of Ct){const Ft=Kt.state;if(xe.activeTexture.set(Le.TEXTURE0),Ft.atlasTexture.bind(Ft.atlasInterpolation,Le.CLAMP_TO_EDGE),Ft.atlasTextureIcon&&(xe.activeTexture.set(Le.TEXTURE1),Ft.atlasTextureIcon&&Ft.atlasTextureIcon.bind(Ft.atlasInterpolationIcon,Le.CLAMP_TO_EDGE)),Ft.isSDF){const jt=Ft.uniformValues;Ft.hasHalo&&(jt.u_is_halo=1,cA(Ft.buffers,Kt.segments,m,T,Ft.program,pt,le,me,jt,Ft.projectionData,Kt.terrainData)),jt.u_is_halo=0}cA(Ft.buffers,Kt.segments,m,T,Ft.program,pt,le,me,Ft.uniformValues,Ft.projectionData,Kt.terrainData)}}function cA(T,u,m,M,O,D,U,G,q,oe,le){const me=M.context;O.draw(me,me.gl.TRIANGLES,D,U,G,bn.backCCW,q,le,oe,m.id,T.layoutVertexBuffer,T.indexBuffer,u,m.paint,M.transform.zoom,T.programConfigurations.get(m.id),T.dynamicLayoutVertexBuffer,T.opacityVertexBuffer)}function ou(T,u,m,M,O){const D=T.context,U=D.gl,G=Pn.disabled,q=new Ge([U.ONE,U.ONE],a.bo.transparent,[!0,!0,!0,!0]),oe=u.getBucket(m);if(!oe)return;const le=M.key;let me=m.heatmapFbos.get(le);me||(me=Pl(D,u.tileSize,u.tileSize),m.heatmapFbos.set(le,me)),D.bindFramebuffer.set(me.framebuffer),D.viewport.set([0,0,u.tileSize,u.tileSize]),D.clear({color:a.bo.transparent});const pe=oe.programConfigurations.get(m.id),xe=T.useProgram("heatmap",pe,!O),Le=T.transform.getProjectionData({overscaledTileID:u.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ve=T.style.map.terrain.getTerrainData(M);xe.draw(D,U.TRIANGLES,Xt.disabled,G,q,bn.disabled,Md(u,T.transform.zoom,m.paint.get("heatmap-intensity"),1),Ve,Le,m.id,oe.layoutVertexBuffer,oe.indexBuffer,oe.segments,m.paint,T.transform.zoom,pe)}function ic(T,u,m,M,O){const D=T.context,U=D.gl,G=T.transform;D.setColorMode(T.colorModeForRenderPass());const q=Ph(D,u),oe=m.key,le=u.heatmapFbos.get(oe);if(!le)return;D.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,le.colorAttachment.get()),D.activeTexture.set(U.TEXTURE1),q.bind(U.LINEAR,U.CLAMP_TO_EDGE);const me=G.getProjectionData({overscaledTileID:m,applyTerrainMatrix:O,applyGlobeMatrix:!M});T.useProgram("heatmapTexture").draw(D,U.TRIANGLES,Xt.disabled,Pn.disabled,T.colorModeForRenderPass(),bn.disabled,S0(T,u,0,1),null,me,u.id,T.rasterBoundsBuffer,T.quadTriangleIndexBuffer,T.rasterBoundsSegments,u.paint,G.zoom),le.destroy(),u.heatmapFbos.delete(oe)}function Pl(T,u,m){var M,O;const D=T.gl,U=D.createTexture();D.bindTexture(D.TEXTURE_2D,U),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_S,D.CLAMP_TO_EDGE),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_T,D.CLAMP_TO_EDGE),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MIN_FILTER,D.LINEAR),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MAG_FILTER,D.LINEAR);const G=(M=T.HALF_FLOAT)!==null&&M!==void 0?M:D.UNSIGNED_BYTE,q=(O=T.RGBA16F)!==null&&O!==void 0?O:D.RGBA;D.texImage2D(D.TEXTURE_2D,0,q,u,m,0,D.RGBA,G,null);const oe=T.createFramebuffer(u,m,!1,!1);return oe.colorAttachment.set(U),oe}function Ph(T,u){return u.colorRampTexture||(u.colorRampTexture=new a.T(T,u.colorRamp,T.gl.RGBA)),u.colorRampTexture}function Rc(T,u,m,M,O,D,U,G){let q=256;if(O.stepInterpolant){const oe=u.getSource().maxzoom,le=U.canonical.z===oe?Math.ceil(1<<T.transform.maxZoom-U.canonical.z):1;q=a.an(a.cd(D.maxLineLength/a.a4*1024*le),256,m.maxTextureSize)}return G.gradient=a.ce({expression:O.gradientExpression(),evaluationKey:"lineProgress",resolution:q,image:G.gradient||void 0,clips:D.lineClipsArray}),G.texture?G.texture.update(G.gradient):G.texture=new a.T(m,G.gradient,M.RGBA),G.version=O.gradientVersion,G.texture}function Lh(T,u,m,M,O){T.activeTexture.set(u.TEXTURE0),m.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),M.updatePaintBuffers(O)}function kd(T,u,m,M,O,D){(O||T.lineAtlas.dirty)&&(u.activeTexture.set(m.TEXTURE0),T.lineAtlas.bind(u)),M.updatePaintBuffers(D)}function zs(T,u,m,M,O,D,U){const G=D.gradients[O.id];let q=G.texture;O.gradientVersion!==G.version&&(q=Rc(T,u,m,M,O,D,U,G)),m.activeTexture.set(M.TEXTURE0),q.bind(O.stepInterpolant?M.NEAREST:M.LINEAR,M.CLAMP_TO_EDGE)}function so(T,u,m,M,O,D,U,G,q){const oe=D.gradients[O.id];let le=oe.texture;O.gradientVersion!==oe.version&&(le=Rc(T,u,m,M,O,D,U,oe)),m.activeTexture.set(M.TEXTURE0),le.bind(O.stepInterpolant?M.NEAREST:M.LINEAR,M.CLAMP_TO_EDGE),m.activeTexture.set(M.TEXTURE1),T.lineAtlas.bind(m),G.updatePaintBuffers(q)}function Pr(T,u,m,M,O){if(!m||!M||!M.imageAtlas)return;const D=M.imageAtlas.patternPositions;let U=D[m.to.toString()],G=D[m.from.toString()];if(!U&&G&&(U=G),!G&&U&&(G=U),!U||!G){const q=O.getPaintProperty(u);U=D[q],G=D[q]}U&&G&&T.setConstantPatternPositions(U,G)}function AA(T,u,m,M,O,D,U,G){const q=T.context.gl,oe="fill-pattern",le=m.paint.get(oe),me=le&&le.constantOr(1),pe=m.getCrossfadeParameters();let xe,Le,Ve,He,Ze;const et=T.transform,lt=m.paint.get("fill-translate"),Je=m.paint.get("fill-translate-anchor");U?(Le=me&&!m.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",xe=q.LINES):(Le=me?"fillPattern":"fill",xe=q.TRIANGLES);const At=le.constantOr(null);for(const pt of M){const it=u.getTile(pt);if(me&&!it.patternsLoaded())continue;const Ct=it.getBucket(m);if(!Ct)continue;const Nt=Ct.programConfigurations.get(m.id),Kt=T.useProgram(Le,Nt),Ft=T.style.map.terrain&&T.style.map.terrain.getTerrainData(pt);me&&(T.context.activeTexture.set(q.TEXTURE0),it.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),Nt.updatePaintBuffers(pe)),Pr(Nt,oe,At,it,m);const jt=et.getProjectionData({overscaledTileID:pt,applyGlobeMatrix:!G,applyTerrainMatrix:!0}),pn=a.aN(et,it,lt,Je);if(U){He=Ct.indexBuffer2,Ze=Ct.segments2;const rn=[q.drawingBufferWidth,q.drawingBufferHeight];Ve=Le==="fillOutlinePattern"&&me?w0(T,pe,it,rn,pn):iu(rn,pn)}else He=Ct.indexBuffer,Ze=Ct.segments,Ve=me?Bh(T,pe,it,pn):{u_fill_translate:pn};const Sn=T.stencilModeForClipping(pt);Kt.draw(T.context,xe,O,Sn,D,bn.backCCW,Ve,Ft,jt,m.id,Ct.layoutVertexBuffer,He,Ze,m.paint,T.transform.zoom,Nt)}}function Nr(T,u,m,M,O,D,U,G){const q=T.context,oe=q.gl,le="fill-extrusion-pattern",me=m.paint.get(le),pe=me.constantOr(1),xe=m.getCrossfadeParameters(),Le=m.paint.get("fill-extrusion-opacity"),Ve=me.constantOr(null),He=T.transform;for(const Ze of M){const et=u.getTile(Ze),lt=et.getBucket(m);if(!lt)continue;const Je=T.style.map.terrain&&T.style.map.terrain.getTerrainData(Ze),At=lt.programConfigurations.get(m.id),pt=T.useProgram(pe?"fillExtrusionPattern":"fillExtrusion",At);pe&&(T.context.activeTexture.set(oe.TEXTURE0),et.imageAtlasTexture.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),At.updatePaintBuffers(xe));const it=He.getProjectionData({overscaledTileID:Ze,applyGlobeMatrix:!G,applyTerrainMatrix:!0});Pr(At,le,Ve,et,m);const Ct=a.aN(He,et,m.paint.get("fill-extrusion-translate"),m.paint.get("fill-extrusion-translate-anchor")),Nt=m.paint.get("fill-extrusion-vertical-gradient"),Kt=pe?_d(T,Nt,Le,Ct,Ze,xe,et):Ip(T,Nt,Le,Ct);pt.draw(q,q.gl.TRIANGLES,O,D,U,bn.backCCW,Kt,Je,it,m.id,lt.layoutVertexBuffer,lt.indexBuffer,lt.segments,m.paint,T.transform.zoom,At,T.style.map.terrain&&lt.centroidVertexBuffer)}}function Pc(T,u,m,M,O,D,U,G,q){var oe;const le=T.style.projection,me=T.context,pe=T.transform,xe=me.gl,Le=[`#define NUM_ILLUMINATION_SOURCES ${m.paint.get("hillshade-highlight-color").values.length}`],Ve=T.useProgram("hillshade",null,!1,Le),He=!T.options.moving;for(const Ze of M){const et=u.getTile(Ze),lt=et.fbo;if(!lt)continue;const Je=le.getMeshFromTileID(me,Ze.canonical,G,!0,"raster"),At=(oe=T.style.map.terrain)===null||oe===void 0?void 0:oe.getTerrainData(Ze);me.activeTexture.set(xe.TEXTURE0),xe.bindTexture(xe.TEXTURE_2D,lt.colorAttachment.get());const pt=pe.getProjectionData({overscaledTileID:Ze,aligned:He,applyGlobeMatrix:!q,applyTerrainMatrix:!0});Ve.draw(me,xe.TRIANGLES,D,O[Ze.overscaledZ],U,bn.backCCW,sA(T,et,m),At,pt,m.id,Je.vertexBuffer,Je.indexBuffer,Je.segments)}}function ra(T,u,m,M,O,D,U,G,q){var oe;const le=T.style.projection,me=T.context,pe=T.transform,xe=me.gl,Le=T.useProgram("colorRelief"),Ve=!T.options.moving;let He=!0,Ze=0;for(const et of M){const lt=u.getTile(et),Je=lt.dem;if(He){const Kt=xe.getParameter(xe.MAX_TEXTURE_SIZE),{elevationTexture:Ft,colorTexture:jt}=m.getColorRampTextures(me,Kt,Je.getUnpackVector());me.activeTexture.set(xe.TEXTURE1),Ft.bind(xe.NEAREST,xe.CLAMP_TO_EDGE),me.activeTexture.set(xe.TEXTURE4),jt.bind(xe.LINEAR,xe.CLAMP_TO_EDGE),He=!1,Ze=Ft.size[0]}if(!Je||!Je.data)continue;const At=Je.stride,pt=Je.getPixels();if(me.activeTexture.set(xe.TEXTURE0),me.pixelStoreUnpackPremultiplyAlpha.set(!1),lt.demTexture=lt.demTexture||T.getTileTexture(At),lt.demTexture){const Kt=lt.demTexture;Kt.update(pt,{premultiply:!1}),Kt.bind(xe.LINEAR,xe.CLAMP_TO_EDGE)}else lt.demTexture=new a.T(me,pt,xe.RGBA,{premultiply:!1}),lt.demTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE);const it=le.getMeshFromTileID(me,et.canonical,G,!0,"raster"),Ct=(oe=T.style.map.terrain)===null||oe===void 0?void 0:oe.getTerrainData(et),Nt=pe.getProjectionData({overscaledTileID:et,aligned:Ve,applyGlobeMatrix:!q,applyTerrainMatrix:!0});Le.draw(me,xe.TRIANGLES,D,O[et.overscaledZ],U,bn.backCCW,wd(m,lt.dem,Ze),Ct,Nt,m.id,it.vertexBuffer,it.indexBuffer,it.segments)}}const nh=[new a.P(0,0),new a.P(a.a4,0),new a.P(a.a4,a.a4),new a.P(0,a.a4)];function rc(T,u,m,M,O,D,U,G,q=!1,oe=!1){const le=M[M.length-1].overscaledZ,me=T.context,pe=me.gl,xe=T.useProgram("raster"),Le=T.transform,Ve=T.style.projection,He=T.colorModeForRenderPass(),Ze=!T.options.moving,et=m.paint.get("raster-opacity"),lt=m.paint.get("raster-resampling"),Je=m.paint.get("raster-fade-duration"),At=!!T.style.map.terrain;for(const pt of M){const it=T.getDepthModeForSublayer(pt.overscaledZ-le,et===1?Xt.ReadWrite:Xt.ReadOnly,pe.LESS),Ct=u.getTile(pt),Nt=lt==="nearest"?pe.NEAREST:pe.LINEAR;me.activeTexture.set(pe.TEXTURE0),Ct.texture.bind(Nt,pe.CLAMP_TO_EDGE,pe.LINEAR_MIPMAP_NEAREST),me.activeTexture.set(pe.TEXTURE1);const{parentTile:Kt,parentScaleBy:Ft,parentTopLeft:jt,fadeValues:pn}=Uh(Ct,u,Je,At);Ct.fadeOpacity=pn.tileOpacity,Kt?(Kt.fadeOpacity=pn.parentTileOpacity,Kt.texture.bind(Nt,pe.CLAMP_TO_EDGE,pe.LINEAR_MIPMAP_NEAREST)):Ct.texture.bind(Nt,pe.CLAMP_TO_EDGE,pe.LINEAR_MIPMAP_NEAREST),Ct.texture.useMipmap&&me.extTextureFilterAnisotropic&&T.transform.pitch>20&&pe.texParameterf(pe.TEXTURE_2D,me.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,me.extTextureFilterAnisotropicMax);const Sn=T.style.map.terrain&&T.style.map.terrain.getTerrainData(pt),rn=Le.getProjectionData({overscaledTileID:pt,aligned:Ze,applyGlobeMatrix:!oe,applyTerrainMatrix:!0}),$n=I0(jt,Ft,pn.fadeMix,m,G),Ni=Ve.getMeshFromTileID(me,pt.canonical,D,U,"raster");xe.draw(me,pe.TRIANGLES,it,O?O[pt.overscaledZ]:Pn.disabled,He,q?bn.frontCCW:bn.backCCW,$n,Sn,rn,m.id,Ni.vertexBuffer,Ni.indexBuffer,Ni.segments)}}function Uh(T,u,m,M){const O={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(m===0||M)return O;if(T.fadingParentID){const D=u.getLoadedTile(T.fadingParentID);if(!D)return O;const U=Math.pow(2,D.tileID.overscaledZ-T.tileID.overscaledZ),G=[T.tileID.canonical.x*U%1,T.tileID.canonical.y*U%1],q=(function(oe,le,me){const pe=K(),xe=(pe-le.timeAdded)/me,Le=oe.fadingDirection===Xe.Incoming,Ve=a.an((pe-oe.timeAdded)/me,0,1),He=a.an(1-xe,0,1),Ze=Le?Ve:He;return{tileOpacity:Ze,parentTileOpacity:Le?He:Ve,fadeMix:{opacity:1,mix:1-Ze}}})(T,D,m);return{parentTile:D,parentScaleBy:U,parentTopLeft:G,fadeValues:q}}if(T.selfFading){const D=(function(U,G){const q=(K()-U.timeAdded)/G,oe=a.an(q,0,1);return{tileOpacity:oe,fadeMix:{opacity:oe,mix:0}}})(T,m);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:D}}return O}const Ne=new a.bo(1,0,0,1),hA=new a.bo(0,1,0,1),oc=new a.bo(0,0,1,1),fl=new a.bo(1,0,1,1),sr=new a.bo(0,1,1,1);function Lc(T,u,m,M){ku(T,0,u+m/2,T.transform.width,m,M)}function dA(T,u,m,M){ku(T,u-m/2,0,m,T.transform.height,M)}function ku(T,u,m,M,O,D){const U=T.context,G=U.gl;G.enable(G.SCISSOR_TEST),G.scissor(u*T.pixelRatio,m*T.pixelRatio,M*T.pixelRatio,O*T.pixelRatio),U.clear({color:D}),G.disable(G.SCISSOR_TEST)}function fA(T,u,m){const M=T.context,O=M.gl,D=T.useProgram("debug"),U=Xt.disabled,G=Pn.disabled,q=T.colorModeForRenderPass(),oe="$debug",le=T.style.map.terrain&&T.style.map.terrain.getTerrainData(m);M.activeTexture.set(O.TEXTURE0);const me=u.getTileByID(m.key).latestRawTileData,pe=Math.floor((me&&me.byteLength||0)/1024),xe=u.getTile(m).tileSize,Le=512/Math.min(xe,512)*(m.overscaledZ/T.transform.zoom)*.5;let Ve=m.canonical.toString();m.overscaledZ!==m.canonical.z&&(Ve+=` => ${m.overscaledZ}`),(function(Ze,et){Ze.initDebugOverlayCanvas();const lt=Ze.debugOverlayCanvas,Je=Ze.context.gl,At=Ze.debugOverlayCanvas.getContext("2d");At.clearRect(0,0,lt.width,lt.height),At.shadowColor="white",At.shadowBlur=2,At.lineWidth=1.5,At.strokeStyle="white",At.textBaseline="top",At.font="bold 36px Open Sans, sans-serif",At.fillText(et,5,5),At.strokeText(et,5,5),Ze.debugOverlayTexture.update(lt),Ze.debugOverlayTexture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE)})(T,`${Ve} ${pe}kB`);const He=T.transform.getProjectionData({overscaledTileID:m,applyGlobeMatrix:!0,applyTerrainMatrix:!0});D.draw(M,O.TRIANGLES,U,G,Ge.alphaBlended,bn.disabled,xd(a.bo.transparent,Le),null,He,oe,T.debugBuffer,T.quadTriangleIndexBuffer,T.debugSegments),D.draw(M,O.LINE_STRIP,U,G,q,bn.disabled,xd(a.bo.red),le,He,oe,T.debugBuffer,T.tileBorderIndexBuffer,T.debugSegments)}function pA(T,u,m,M){const{isRenderingGlobe:O}=M,D=T.context,U=D.gl,G=T.transform,q=T.colorModeForRenderPass(),oe=T.getDepthModeFor3D(),le=T.useProgram("terrain");D.bindFramebuffer.set(null),D.viewport.set([0,0,T.width,T.height]);for(const me of m){const pe=u.getTerrainMesh(me.tileID),xe=T.renderToTexture.getTexture(me),Le=u.getTerrainData(me.tileID);D.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,xe.texture);const Ve=u.getMeshFrameDelta(G.zoom),He=G.calculateFogMatrix(me.tileID.toUnwrapped()),Ze=$A(Ve,He,T.style.sky,G.pitch,O),et=G.getProjectionData({overscaledTileID:me.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});le.draw(D,U.TRIANGLES,oe,Pn.disabled,q,bn.backCCW,Ze,Le,et,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments)}}function Kh(T,u){if(!u.mesh){const m=new a.aV;m.emplaceBack(-1,-1),m.emplaceBack(1,-1),m.emplaceBack(1,1),m.emplaceBack(-1,1);const M=new a.aX;M.emplaceBack(0,1,2),M.emplaceBack(0,2,3),u.mesh=new Vr(T.createVertexBuffer(m,yo.members),T.createIndexBuffer(M),a.aW.simpleSegment(0,0,m.length,M.length))}return u.mesh}class Lp{constructor(u,m){this.context=new Dh(u),this.transform=m,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.ar(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=ui.maxOverzooming+ui.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new tu}resize(u,m,M){if(this.width=Math.floor(u*M),this.height=Math.floor(m*M),this.pixelRatio=M,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const O of this.style._order)this.style._layers[O].resize()}setup(){const u=this.context,m=new a.aV;m.emplaceBack(0,0),m.emplaceBack(a.a4,0),m.emplaceBack(0,a.a4),m.emplaceBack(a.a4,a.a4),this.tileExtentBuffer=u.createVertexBuffer(m,yo.members),this.tileExtentSegments=a.aW.simpleSegment(0,0,4,2);const M=new a.aV;M.emplaceBack(0,0),M.emplaceBack(a.a4,0),M.emplaceBack(0,a.a4),M.emplaceBack(a.a4,a.a4),this.debugBuffer=u.createVertexBuffer(M,yo.members),this.debugSegments=a.aW.simpleSegment(0,0,4,5);const O=new a.cg;O.emplaceBack(0,0,0,0),O.emplaceBack(a.a4,0,a.a4,0),O.emplaceBack(0,a.a4,0,a.a4),O.emplaceBack(a.a4,a.a4,a.a4,a.a4),this.rasterBoundsBuffer=u.createVertexBuffer(O,kc.members),this.rasterBoundsSegments=a.aW.simpleSegment(0,0,4,2);const D=new a.aV;D.emplaceBack(0,0),D.emplaceBack(a.a4,0),D.emplaceBack(0,a.a4),D.emplaceBack(a.a4,a.a4),this.rasterBoundsBufferPosOnly=u.createVertexBuffer(D,yo.members),this.rasterBoundsSegmentsPosOnly=a.aW.simpleSegment(0,0,4,5);const U=new a.aV;U.emplaceBack(0,0),U.emplaceBack(1,0),U.emplaceBack(0,1),U.emplaceBack(1,1),this.viewportBuffer=u.createVertexBuffer(U,yo.members),this.viewportSegments=a.aW.simpleSegment(0,0,4,2);const G=new a.ch;G.emplaceBack(0),G.emplaceBack(1),G.emplaceBack(3),G.emplaceBack(2),G.emplaceBack(0),this.tileBorderIndexBuffer=u.createIndexBuffer(G);const q=new a.aX;q.emplaceBack(1,0,2),q.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=u.createIndexBuffer(q);const oe=this.context.gl;this.stencilClearMode=new Pn({func:oe.ALWAYS,mask:0},0,255,oe.ZERO,oe.ZERO,oe.ZERO),this.tileExtentMesh=new Vr(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const u=this.context,m=u.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const M=a.N();a.c6(M,0,this.width,this.height,0,0,1),a.Q(M,M,[m.drawingBufferWidth,m.drawingBufferHeight,0]);const O={mainMatrix:M,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:M};this.useProgram("clippingMask",null,!0).draw(u,m.TRIANGLES,Xt.disabled,this.stencilClearMode,Ge.disabled,bn.disabled,null,null,O,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(u,m,M){if(this.currentStencilSource===u.source||!u.isTileClipped()||!m||!m.length)return;this.currentStencilSource=u.source,this.nextStencilID+m.length>256&&this.clearStencil();const O=this.context;O.setColorMode(Ge.disabled),O.setDepthMode(Xt.disabled);const D={};for(const U of m)D[U.key]=this.nextStencilID++;this._renderTileMasks(D,m,M,!0),this._renderTileMasks(D,m,M,!1),this._tileClippingMaskIDs=D}_renderTileMasks(u,m,M,O){const D=this.context,U=D.gl,G=this.style.projection,q=this.transform,oe=this.useProgram("clippingMask");for(const le of m){const me=u[le.key],pe=this.style.map.terrain&&this.style.map.terrain.getTerrainData(le),xe=G.getMeshFromTileID(this.context,le.canonical,O,!0,"stencil"),Le=q.getProjectionData({overscaledTileID:le,applyGlobeMatrix:!M,applyTerrainMatrix:!0});oe.draw(D,U.TRIANGLES,Xt.disabled,new Pn({func:U.ALWAYS,mask:0},me,255,U.KEEP,U.KEEP,U.REPLACE),Ge.disabled,M?bn.disabled:bn.backCCW,null,pe,Le,"$clipping",xe.vertexBuffer,xe.indexBuffer,xe.segments)}}_renderTilesDepthBuffer(){const u=this.context,m=u.gl,M=this.style.projection,O=this.transform,D=this.useProgram("depth"),U=this.getDepthModeFor3D(),G=Yn(O,{tileSize:O.tileSize});for(const q of G){const oe=this.style.map.terrain&&this.style.map.terrain.getTerrainData(q),le=M.getMeshFromTileID(this.context,q.canonical,!0,!0,"raster"),me=O.getProjectionData({overscaledTileID:q,applyGlobeMatrix:!0,applyTerrainMatrix:!0});D.draw(u,m.TRIANGLES,U,Pn.disabled,Ge.disabled,bn.backCCW,null,oe,me,"$clipping",le.vertexBuffer,le.indexBuffer,le.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const u=this.nextStencilID++,m=this.context.gl;return new Pn({func:m.NOTEQUAL,mask:255},u,255,m.KEEP,m.KEEP,m.REPLACE)}stencilModeForClipping(u){const m=this.context.gl;return new Pn({func:m.EQUAL,mask:255},this._tileClippingMaskIDs[u.key],0,m.KEEP,m.KEEP,m.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(u){const m=this.context.gl,M=u.sort(((U,G)=>G.overscaledZ-U.overscaledZ)),O=M[M.length-1].overscaledZ,D=M[0].overscaledZ-O+1;if(D>1){this.currentStencilSource=void 0,this.nextStencilID+D>256&&this.clearStencil();const U={};for(let G=0;G<D;G++)U[G+O]=new Pn({func:m.GEQUAL,mask:255},G+this.nextStencilID,255,m.KEEP,m.KEEP,m.REPLACE);return this.nextStencilID+=D,[U,M]}return[{[O]:Pn.disabled},M]}stencilConfigForOverlapTwoPass(u){const m=this.context.gl,M=u.sort(((U,G)=>G.overscaledZ-U.overscaledZ)),O=M[M.length-1].overscaledZ,D=M[0].overscaledZ-O+1;if(this.clearStencil(),D>1){const U={},G={};for(let q=0;q<D;q++)U[q+O]=new Pn({func:m.GREATER,mask:255},D+1+q,255,m.KEEP,m.KEEP,m.REPLACE),G[q+O]=new Pn({func:m.GREATER,mask:255},1+q,255,m.KEEP,m.KEEP,m.REPLACE);return this.nextStencilID=2*D+1,[U,G,M]}return this.nextStencilID=3,[{[O]:new Pn({func:m.GREATER,mask:255},2,255,m.KEEP,m.KEEP,m.REPLACE)},{[O]:new Pn({func:m.GREATER,mask:255},1,255,m.KEEP,m.KEEP,m.REPLACE)},M]}colorModeForRenderPass(){const u=this.context.gl;return this._showOverdrawInspector?new Ge([u.CONSTANT_COLOR,u.ONE],new a.bo(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ge.unblended:Ge.alphaBlended}getDepthModeForSublayer(u,m,M){if(!this.opaquePassEnabledForLayer())return Xt.disabled;const O=1-((1+this.currentLayer)*this.numSublayers+u)*this.depthEpsilon;return new Xt(M||this.context.gl.LEQUAL,m,[O,O])}getDepthModeFor3D(){return new Xt(this.context.gl.LEQUAL,Xt.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(u,m){var M,O;this.style=u,this.options=m,this.lineAtlas=u.lineAtlas,this.imageManager=u.imageManager,this.glyphManager=u.glyphManager,this.symbolFadeChange=u.placement.symbolFadeChange(K()),this.imageManager.beginFrame();const D=this.style._order,U=this.style.tileManagers,G={},q={},oe={},le={isRenderingToTexture:!1,isRenderingGlobe:((M=u.projection)===null||M===void 0?void 0:M.transitionState)>0};for(const pe in U){const xe=U[pe];xe.used&&xe.prepare(this.context),G[pe]=xe.getVisibleCoordinates(!1),q[pe]=G[pe].slice().reverse(),oe[pe]=xe.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let pe=0;pe<D.length;pe++)if(this.style._layers[D[pe]].is3D()){this.opaquePassCutoff=pe;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const pe of D){const xe=this.style._layers[pe];if(!xe.hasOffscreenPass()||xe.isHidden(this.transform.zoom))continue;const Le=q[xe.source];(xe.type==="custom"||Le.length)&&this.renderLayer(this,U[xe.source],xe,Le,le)}if((O=this.style.projection)===null||O===void 0||O.updateGPUdependent({context:this.context,useProgram:pe=>this.useProgram(pe)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:m.showOverdrawInspector?a.bo.black:a.bo.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(pe,xe){const Le=pe.context,Ve=Le.gl,He=((pt,it,Ct)=>{const Nt=Math.cos(it.rollInRadians),Kt=Math.sin(it.rollInRadians),Ft=rt(it),jt=it.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:pt.properties.get("sky-color"),u_horizon_color:pt.properties.get("horizon-color"),u_horizon:[(it.width/2-Ft*Kt)*Ct,(it.height/2+Ft*Nt)*Ct],u_horizon_normal:[-Kt,Nt],u_sky_horizon_blend:pt.properties.get("sky-horizon-blend")*it.height/2*Ct,u_sky_blend:jt}})(xe,pe.style.map.transform,pe.pixelRatio),Ze=new Xt(Ve.LEQUAL,Xt.ReadWrite,[0,1]),et=Pn.disabled,lt=pe.colorModeForRenderPass(),Je=pe.useProgram("sky"),At=Kh(Le,xe);Je.draw(Le,Ve.TRIANGLES,Ze,et,lt,bn.disabled,He,null,void 0,"sky",At.vertexBuffer,At.indexBuffer,At.segments)})(this,this.style.sky),this._showOverdrawInspector=m.showOverdrawInspector,this.depthRangeFor3D=[0,1-(u._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=D.length-1;this.currentLayer>=0;this.currentLayer--){const pe=this.style._layers[D[this.currentLayer]],xe=U[pe.source],Le=G[pe.source];this._renderTileClippingMasks(pe,Le,!1),this.renderLayer(this,xe,pe,Le,le)}this.renderPass="translucent";let me=!1;for(this.currentLayer=0;this.currentLayer<D.length;this.currentLayer++){const pe=this.style._layers[D[this.currentLayer]],xe=U[pe.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(pe,le))continue;this.opaquePassEnabledForLayer()||me||(me=!0,le.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const Le=(pe.type==="symbol"?oe:q)[pe.source];this._renderTileClippingMasks(pe,G[pe.source],!!this.renderToTexture),this.renderLayer(this,xe,pe,Le,le)}if(le.isRenderingGlobe&&(function(pe,xe,Le){const Ve=pe.context,He=Ve.gl,Ze=pe.useProgram("atmosphere"),et=new Xt(He.LEQUAL,Xt.ReadOnly,[0,1]),lt=pe.transform,Je=(function(jt,pn){const Sn=jt.properties.get("position"),rn=[-Sn.x,-Sn.y,-Sn.z],$n=a.ar(new Float64Array(16));return jt.properties.get("anchor")==="map"&&(a.bf($n,$n,pn.rollInRadians),a.bg($n,$n,-pn.pitchInRadians),a.bf($n,$n,pn.bearingInRadians),a.bg($n,$n,pn.center.lat*Math.PI/180),a.bI($n,$n,-pn.center.lng*Math.PI/180)),a.cf(rn,rn,$n),rn})(Le,pe.transform),At=lt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),pt=xe.properties.get("atmosphere-blend")*At.projectionTransition;if(pt===0)return;const it=ts(lt.worldSize,lt.center.lat),Ct=lt.inverseProjectionMatrix,Nt=new Float64Array(4);Nt[3]=1,a.aG(Nt,Nt,lt.modelViewProjectionMatrix),Nt[0]/=Nt[3],Nt[1]/=Nt[3],Nt[2]/=Nt[3],Nt[3]=1,a.aG(Nt,Nt,Ct),Nt[0]/=Nt[3],Nt[1]/=Nt[3],Nt[2]/=Nt[3],Nt[3]=1;const Kt=((jt,pn,Sn,rn,$n)=>({u_sun_pos:jt,u_atmosphere_blend:pn,u_globe_position:Sn,u_globe_radius:rn,u_inv_proj_matrix:$n}))(Je,pt,[Nt[0],Nt[1],Nt[2]],it,Ct),Ft=Kh(Ve,xe);Ze.draw(Ve,He.TRIANGLES,et,Pn.disabled,Ge.alphaBlended,bn.disabled,Kt,null,null,"atmosphere",Ft.vertexBuffer,Ft.indexBuffer,Ft.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const pe=(function(xe,Le){let Ve=null;const He=Object.values(xe._layers).flatMap((Je=>Je.source&&!Je.isHidden(Le)?[xe.tileManagers[Je.source]]:[])),Ze=He.filter((Je=>Je.getSource().type==="vector")),et=He.filter((Je=>Je.getSource().type!=="vector")),lt=Je=>{(!Ve||Ve.getSource().maxzoom<Je.getSource().maxzoom)&&(Ve=Je)};return Ze.forEach((Je=>lt(Je))),Ve||et.forEach((Je=>lt(Je))),Ve})(this.style,this.transform.zoom);pe&&(function(xe,Le,Ve){for(let He=0;He<Ve.length;He++)fA(xe,Le,Ve[He])})(this,pe,pe.getVisibleCoordinates())}this.options.showPadding&&(function(pe){const xe=pe.transform.padding;Lc(pe,pe.transform.height-(xe.top||0),3,Ne),Lc(pe,xe.bottom||0,3,hA),dA(pe,xe.left||0,3,oc),dA(pe,pe.transform.width-(xe.right||0),3,fl);const Le=pe.transform.centerPoint;(function(Ve,He,Ze,et){ku(Ve,He-1,Ze-10,2,20,et),ku(Ve,He-10,Ze-1,20,2,et)})(pe,Le.x,pe.transform.height-Le.y,sr)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(u){if(!this.style||!this.style.map||!this.style.map.terrain)return;const m=this.terrainFacilitator.matrix,M=this.transform.modelViewProjectionMatrix;let O=this.terrainFacilitator.dirty;O||(O=u?!a.ci(m,M):!a.cj(m,M)),O||(O=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),O&&(a.ck(m,M),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(D,U){const G=D.context,q=G.gl,oe=D.transform,le=Ge.unblended,me=new Xt(q.LEQUAL,Xt.ReadWrite,[0,1]),pe=U.tileManager.getRenderableTiles(),xe=D.useProgram("terrainDepth");G.bindFramebuffer.set(U.getFramebuffer("depth").framebuffer),G.viewport.set([0,0,D.width/devicePixelRatio,D.height/devicePixelRatio]),G.clear({color:a.bo.transparent,depth:1});for(const Le of pe){const Ve=U.getTerrainMesh(Le.tileID),He=U.getTerrainData(Le.tileID),Ze=oe.getProjectionData({overscaledTileID:Le.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),et={u_ele_delta:U.getMeshFrameDelta(oe.zoom)};xe.draw(G,q.TRIANGLES,me,Pn.disabled,le,bn.backCCW,et,He,Ze,"terrain",Ve.vertexBuffer,Ve.indexBuffer,Ve.segments)}G.bindFramebuffer.set(null),G.viewport.set([0,0,D.width,D.height])})(this,this.style.map.terrain),(function(D,U){const G=D.context,q=G.gl,oe=D.transform,le=Ge.unblended,me=new Xt(q.LEQUAL,Xt.ReadWrite,[0,1]),pe=U.getCoordsTexture(),xe=U.tileManager.getRenderableTiles(),Le=D.useProgram("terrainCoords");G.bindFramebuffer.set(U.getFramebuffer("coords").framebuffer),G.viewport.set([0,0,D.width/devicePixelRatio,D.height/devicePixelRatio]),G.clear({color:a.bo.transparent,depth:1}),U.coordsIndex=[];for(const Ve of xe){const He=U.getTerrainMesh(Ve.tileID),Ze=U.getTerrainData(Ve.tileID);G.activeTexture.set(q.TEXTURE0),q.bindTexture(q.TEXTURE_2D,pe.texture);const et={u_terrain_coords_id:(255-U.coordsIndex.length)/255,u_texture:0,u_ele_delta:U.getMeshFrameDelta(oe.zoom)},lt=oe.getProjectionData({overscaledTileID:Ve.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Le.draw(G,q.TRIANGLES,me,Pn.disabled,le,bn.backCCW,et,Ze,lt,"terrain",He.vertexBuffer,He.indexBuffer,He.segments),U.coordsIndex.push(Ve.tileID.key)}G.bindFramebuffer.set(null),G.viewport.set([0,0,D.width,D.height])})(this,this.style.map.terrain))}renderLayer(u,m,M,O,D){M.isHidden(this.transform.zoom)||(M.type==="background"||M.type==="custom"||(O||[]).length)&&(this.id=M.id,a.cl(M)?(function(U,G,q,oe,le,me){if(U.renderPass!=="translucent")return;const{isRenderingToTexture:pe}=me,xe=Pn.disabled,Le=U.colorModeForRenderPass();(q._unevaluatedLayout.hasValue("text-variable-anchor")||q._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(Ve,He,Ze,et,lt,Je,At,pt,it){const Ct=He.transform,Nt=He.style.map.terrain,Kt=lt==="map",Ft=Je==="map";for(const jt of Ve){const pn=et.getTile(jt),Sn=pn.getBucket(Ze);if(!Sn||!Sn.text||!Sn.text.segments.get().length)continue;const rn=a.ax(Sn.textSizeData,Ct.zoom),$n=a.aM(pn,1,He.transform.zoom),Ni=to(Kt,He.transform,$n),Fi=Ze.layout.get("icon-text-fit")!=="none"&&Sn.hasIconData();if(rn){const qo=Math.pow(2,Ct.zoom-pn.tileID.overscaledZ),Ko=Nt?(ds,bo)=>Nt.getElevation(jt,ds,bo):null;Fs(Sn,Kt,Ft,it,Ct,Ni,qo,rn,Fi,a.aN(Ct,pn,At,pt),jt.toUnwrapped(),Ko)}}})(oe,U,q,G,q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),le),q.paint.get("icon-opacity").constantOr(1)!==0&&Rl(U,G,q,oe,!1,q.paint.get("icon-translate"),q.paint.get("icon-translate-anchor"),q.layout.get("icon-rotation-alignment"),q.layout.get("icon-pitch-alignment"),q.layout.get("icon-keep-upright"),xe,Le,pe),q.paint.get("text-opacity").constantOr(1)!==0&&Rl(U,G,q,oe,!0,q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),q.layout.get("text-keep-upright"),xe,Le,pe),G.map.showCollisionBoxes&&(dl(U,G,q,oe,!0),dl(U,G,q,oe,!1))})(u,m,M,O,this.style.placement.variableOffsets,D):a.cm(M)?(function(U,G,q,oe,le){if(U.renderPass!=="translucent")return;const{isRenderingToTexture:me}=le,pe=q.paint.get("circle-opacity"),xe=q.paint.get("circle-stroke-width"),Le=q.paint.get("circle-stroke-opacity"),Ve=!q.layout.get("circle-sort-key").isConstant();if(pe.constantOr(1)===0&&(xe.constantOr(1)===0||Le.constantOr(1)===0))return;const He=U.context,Ze=He.gl,et=U.transform,lt=U.getDepthModeForSublayer(0,Xt.ReadOnly),Je=Pn.disabled,At=U.colorModeForRenderPass(),pt=[],it=et.getCircleRadiusCorrection();for(let Ct=0;Ct<oe.length;Ct++){const Nt=oe[Ct],Kt=G.getTile(Nt),Ft=Kt.getBucket(q);if(!Ft)continue;const jt=q.paint.get("circle-translate"),pn=q.paint.get("circle-translate-anchor"),Sn=a.aN(et,Kt,jt,pn),rn=Ft.programConfigurations.get(q.id),$n=U.useProgram("circle",rn),Ni=Ft.layoutVertexBuffer,Fi=Ft.indexBuffer,qo=U.style.map.terrain&&U.style.map.terrain.getTerrainData(Nt),Ko={programConfiguration:rn,program:$n,layoutVertexBuffer:Ni,indexBuffer:Fi,uniformValues:xf(U,Kt,q,Sn,it),terrainData:qo,projectionData:et.getProjectionData({overscaledTileID:Nt,applyGlobeMatrix:!me,applyTerrainMatrix:!0})};if(Ve){const ds=Ft.segments.get();for(const bo of ds)pt.push({segments:new a.aW([bo]),sortKey:bo.sortKey,state:Ko})}else pt.push({segments:Ft.segments,sortKey:0,state:Ko})}Ve&&pt.sort(((Ct,Nt)=>Ct.sortKey-Nt.sortKey));for(const Ct of pt){const{programConfiguration:Nt,program:Kt,layoutVertexBuffer:Ft,indexBuffer:jt,uniformValues:pn,terrainData:Sn,projectionData:rn}=Ct.state;Kt.draw(He,Ze.TRIANGLES,lt,Je,At,bn.backCCW,pn,Sn,rn,q.id,Ft,jt,Ct.segments,q.paint,U.transform.zoom,Nt)}})(u,m,M,O,D):a.cn(M)?(function(U,G,q,oe,le){if(q.paint.get("heatmap-opacity")===0)return;const me=U.context,{isRenderingToTexture:pe,isRenderingGlobe:xe}=le;if(U.style.map.terrain){for(const Le of oe){const Ve=G.getTile(Le);G.hasRenderableParent(Le)||(U.renderPass==="offscreen"?ou(U,Ve,q,Le,xe):U.renderPass==="translucent"&&ic(U,q,Le,pe,xe))}me.viewport.set([0,0,U.width,U.height])}else U.renderPass==="offscreen"?(function(Le,Ve,He,Ze){const et=Le.context,lt=et.gl,Je=Le.transform,At=Pn.disabled,pt=new Ge([lt.ONE,lt.ONE],a.bo.transparent,[!0,!0,!0,!0]);(function(it,Ct,Nt){const Kt=it.gl;it.activeTexture.set(Kt.TEXTURE1),it.viewport.set([0,0,Ct.width/4,Ct.height/4]);let Ft=Nt.heatmapFbos.get(a.cc);Ft?(Kt.bindTexture(Kt.TEXTURE_2D,Ft.colorAttachment.get()),it.bindFramebuffer.set(Ft.framebuffer)):(Ft=Pl(it,Ct.width/4,Ct.height/4),Nt.heatmapFbos.set(a.cc,Ft))})(et,Le,He),et.clear({color:a.bo.transparent});for(let it=0;it<Ze.length;it++){const Ct=Ze[it];if(Ve.hasRenderableParent(Ct))continue;const Nt=Ve.getTile(Ct),Kt=Nt.getBucket(He);if(!Kt)continue;const Ft=Kt.programConfigurations.get(He.id),jt=Le.useProgram("heatmap",Ft),pn=Je.getProjectionData({overscaledTileID:Ct,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Sn=Je.getCircleRadiusCorrection();jt.draw(et,lt.TRIANGLES,Xt.disabled,At,pt,bn.backCCW,Md(Nt,Je.zoom,He.paint.get("heatmap-intensity"),Sn),null,pn,He.id,Kt.layoutVertexBuffer,Kt.indexBuffer,Kt.segments,He.paint,Je.zoom,Ft)}et.viewport.set([0,0,Le.width,Le.height])})(U,G,q,oe):U.renderPass==="translucent"&&(function(Le,Ve){const He=Le.context,Ze=He.gl;He.setColorMode(Le.colorModeForRenderPass());const et=Ve.heatmapFbos.get(a.cc);et&&(He.activeTexture.set(Ze.TEXTURE0),Ze.bindTexture(Ze.TEXTURE_2D,et.colorAttachment.get()),He.activeTexture.set(Ze.TEXTURE1),Ph(He,Ve).bind(Ze.LINEAR,Ze.CLAMP_TO_EDGE),Le.useProgram("heatmapTexture").draw(He,Ze.TRIANGLES,Xt.disabled,Pn.disabled,Le.colorModeForRenderPass(),bn.disabled,S0(Le,Ve,0,1),null,null,Ve.id,Le.viewportBuffer,Le.quadTriangleIndexBuffer,Le.viewportSegments,Ve.paint,Le.transform.zoom))})(U,q)})(u,m,M,O,D):a.co(M)?(function(U,G,q,oe,le){if(U.renderPass!=="translucent")return;const{isRenderingToTexture:me}=le,pe=q.paint.get("line-opacity"),xe=q.paint.get("line-width");if(pe.constantOr(1)===0||xe.constantOr(1)===0)return;const Le=U.getDepthModeForSublayer(0,Xt.ReadOnly),Ve=U.colorModeForRenderPass(),He=q.paint.get("line-dasharray"),Ze=He.constantOr(1),et=q.paint.get("line-pattern"),lt=et.constantOr(1),Je=q.paint.get("line-gradient"),At=q.getCrossfadeParameters();let pt;pt=lt?"linePattern":Ze&&Je?"lineGradientSDF":Ze?"lineSDF":Je?"lineGradient":"line";const it=U.context,Ct=it.gl,Nt=U.transform;let Kt=!0;for(const Ft of oe){const jt=G.getTile(Ft);if(lt&&!jt.patternsLoaded())continue;const pn=jt.getBucket(q);if(!pn)continue;const Sn=pn.programConfigurations.get(q.id),rn=U.context.program.get(),$n=U.useProgram(pt,Sn),Ni=Kt||$n.program!==rn,Fi=U.style.map.terrain&&U.style.map.terrain.getTerrainData(Ft),qo=et.constantOr(null),Ko=He&&He.constantOr(null);if(qo&&jt.imageAtlas){const Es=jt.imageAtlas,Bs=Es.patternPositions[qo.to.toString()],Gr=Es.patternPositions[qo.from.toString()];Bs&&Gr&&Sn.setConstantPatternPositions(Bs,Gr)}else if(Ko){const Es=q.layout.get("line-cap")==="round",Bs=U.lineAtlas.getDash(Ko.to,Es),Gr=U.lineAtlas.getDash(Ko.from,Es);Sn.setConstantDashPositions(Bs,Gr)}const ds=Nt.getProjectionData({overscaledTileID:Ft,applyGlobeMatrix:!me,applyTerrainMatrix:!0}),bo=Nt.getPixelScale();let Ys;lt?(Ys=B0(U,jt,q,bo,At),Lh(it,Ct,jt,Sn,At)):Ze&&Je?(Ys=kp(U,jt,q,bo,At,pn.lineClipsArray.length),so(U,G,it,Ct,q,pn,Ft,Sn,At)):Ze?(Ys=HA(U,jt,q,bo,At),kd(U,it,Ct,Sn,Ni,At)):Je?(Ys=Ih(U,jt,q,bo,pn.lineClipsArray.length),zs(U,G,it,Ct,q,pn,Ft)):Ys=Mf(U,jt,q,bo);const rs=U.stencilModeForClipping(Ft);$n.draw(it,Ct.TRIANGLES,Le,rs,Ve,bn.disabled,Ys,Fi,ds,q.id,pn.layoutVertexBuffer,pn.indexBuffer,pn.segments,q.paint,U.transform.zoom,Sn,pn.layoutVertexBuffer2),Kt=!1}})(u,m,M,O,D):a.cp(M)?(function(U,G,q,oe,le){const me=q.paint.get("fill-color"),pe=q.paint.get("fill-opacity");if(pe.constantOr(1)===0)return;const{isRenderingToTexture:xe}=le,Le=U.colorModeForRenderPass(),Ve=q.paint.get("fill-pattern"),He=U.opaquePassEnabledForLayer()&&!Ve.constantOr(1)&&me.constantOr(a.bo.transparent).a===1&&pe.constantOr(0)===1?"opaque":"translucent";if(U.renderPass===He){const Ze=U.getDepthModeForSublayer(1,U.renderPass==="opaque"?Xt.ReadWrite:Xt.ReadOnly);AA(U,G,q,oe,Ze,Le,!1,xe)}if(U.renderPass==="translucent"&&q.paint.get("fill-antialias")){const Ze=U.getDepthModeForSublayer(q.getPaintProperty("fill-outline-color")?2:0,Xt.ReadOnly);AA(U,G,q,oe,Ze,Le,!0,xe)}})(u,m,M,O,D):a.cq(M)?(function(U,G,q,oe,le){const me=q.paint.get("fill-extrusion-opacity");if(me===0)return;const{isRenderingToTexture:pe}=le;if(U.renderPass==="translucent"){const xe=new Xt(U.context.gl.LEQUAL,Xt.ReadWrite,U.depthRangeFor3D);if(me!==1||q.paint.get("fill-extrusion-pattern").constantOr(1))Nr(U,G,q,oe,xe,Pn.disabled,Ge.disabled,pe),Nr(U,G,q,oe,xe,U.stencilModeFor3D(),U.colorModeForRenderPass(),pe);else{const Le=U.colorModeForRenderPass();Nr(U,G,q,oe,xe,Pn.disabled,Le,pe)}}})(u,m,M,O,D):a.cr(M)?(function(U,G,q,oe,le){if(U.renderPass!=="offscreen"&&U.renderPass!=="translucent")return;const{isRenderingToTexture:me}=le,pe=U.context,xe=U.style.projection.useSubdivision,Le=U.getDepthModeForSublayer(0,Xt.ReadOnly),Ve=U.colorModeForRenderPass();if(U.renderPass==="offscreen")(function(He,Ze,et,lt,Je,At,pt){const it=He.context,Ct=it.gl;for(const Nt of et){const Kt=Ze.getTile(Nt),Ft=Kt.dem;if(!Ft||!Ft.data||!Kt.needsHillshadePrepare)continue;const jt=Ft.dim,pn=Ft.stride,Sn=Ft.getPixels();if(it.activeTexture.set(Ct.TEXTURE1),it.pixelStoreUnpackPremultiplyAlpha.set(!1),Kt.demTexture=Kt.demTexture||He.getTileTexture(pn),Kt.demTexture){const $n=Kt.demTexture;$n.update(Sn,{premultiply:!1}),$n.bind(Ct.NEAREST,Ct.CLAMP_TO_EDGE)}else Kt.demTexture=new a.T(it,Sn,Ct.RGBA,{premultiply:!1}),Kt.demTexture.bind(Ct.NEAREST,Ct.CLAMP_TO_EDGE);it.activeTexture.set(Ct.TEXTURE0);let rn=Kt.fbo;if(!rn){const $n=new a.T(it,{width:jt,height:jt,data:null},Ct.RGBA);$n.bind(Ct.LINEAR,Ct.CLAMP_TO_EDGE),rn=Kt.fbo=it.createFramebuffer(jt,jt,!0,!1),rn.colorAttachment.set($n.texture)}it.bindFramebuffer.set(rn.framebuffer),it.viewport.set([0,0,jt,jt]),He.useProgram("hillshadePrepare").draw(it,Ct.TRIANGLES,Je,At,pt,bn.disabled,E0(Kt.tileID,Ft),null,null,lt.id,He.rasterBoundsBuffer,He.quadTriangleIndexBuffer,He.rasterBoundsSegments),Kt.needsHillshadePrepare=!1}})(U,G,oe,q,Le,Pn.disabled,Ve),pe.viewport.set([0,0,U.width,U.height]);else if(U.renderPass==="translucent")if(xe){const[He,Ze,et]=U.stencilConfigForOverlapTwoPass(oe);Pc(U,G,q,et,He,Le,Ve,!1,me),Pc(U,G,q,et,Ze,Le,Ve,!0,me)}else{const[He,Ze]=U.getStencilConfigForOverlapAndUpdateStencilID(oe);Pc(U,G,q,Ze,He,Le,Ve,!1,me)}})(u,m,M,O,D):a.cs(M)?(function(U,G,q,oe,le){if(U.renderPass!=="translucent"||!oe.length)return;const{isRenderingToTexture:me}=le,pe=U.style.projection.useSubdivision,xe=U.getDepthModeForSublayer(0,Xt.ReadOnly),Le=U.colorModeForRenderPass();if(pe){const[Ve,He,Ze]=U.stencilConfigForOverlapTwoPass(oe);ra(U,G,q,Ze,Ve,xe,Le,!1,me),ra(U,G,q,Ze,He,xe,Le,!0,me)}else{const[Ve,He]=U.getStencilConfigForOverlapAndUpdateStencilID(oe);ra(U,G,q,He,Ve,xe,Le,!1,me)}})(u,m,M,O,D):a.bT(M)?(function(U,G,q,oe,le){if(U.renderPass!=="translucent"||q.paint.get("raster-opacity")===0||!oe.length)return;const{isRenderingToTexture:me}=le,pe=G.getSource(),xe=U.style.projection.useSubdivision;if(pe instanceof En)rc(U,G,q,oe,null,!1,!1,pe.tileCoords,pe.flippedWindingOrder,me);else if(xe){const[Le,Ve,He]=U.stencilConfigForOverlapTwoPass(oe);rc(U,G,q,He,Le,!1,!0,nh,!1,me),rc(U,G,q,He,Ve,!0,!0,nh,!1,me)}else{const[Le,Ve]=U.getStencilConfigForOverlapAndUpdateStencilID(oe);rc(U,G,q,Ve,Le,!1,!0,nh,!1,me)}})(u,m,M,O,D):a.ct(M)?(function(U,G,q,oe,le){const me=q.paint.get("background-color"),pe=q.paint.get("background-opacity");if(pe===0)return;const{isRenderingToTexture:xe}=le,Le=U.context,Ve=Le.gl,He=U.style.projection,Ze=U.transform,et=Ze.tileSize,lt=q.paint.get("background-pattern");if(U.isPatternMissing(lt))return;const Je=!lt&&me.a===1&&pe===1&&U.opaquePassEnabledForLayer()?"opaque":"translucent";if(U.renderPass!==Je)return;const At=Pn.disabled,pt=U.getDepthModeForSublayer(0,Je==="opaque"?Xt.ReadWrite:Xt.ReadOnly),it=U.colorModeForRenderPass(),Ct=U.useProgram(lt?"backgroundPattern":"background"),Nt=oe||Yn(Ze,{tileSize:et,terrain:U.style.map.terrain});lt&&(Le.activeTexture.set(Ve.TEXTURE0),U.imageManager.bind(U.context));const Kt=q.getCrossfadeParameters();for(const Ft of Nt){const jt=Ze.getProjectionData({overscaledTileID:Ft,applyGlobeMatrix:!xe,applyTerrainMatrix:!0}),pn=lt?rg(pe,U,lt,{tileID:Ft,tileSize:et},Kt):ig(pe,me),Sn=U.style.map.terrain&&U.style.map.terrain.getTerrainData(Ft),rn=He.getMeshFromTileID(Le,Ft.canonical,!1,!0,"raster");Ct.draw(Le,Ve.TRIANGLES,pt,At,it,bn.backCCW,pn,Sn,jt,q.id,rn.vertexBuffer,rn.indexBuffer,rn.segments)}})(u,0,M,O,D):a.cu(M)&&(function(U,G,q,oe){const{isRenderingGlobe:le}=oe,me=U.context,pe=q.implementation,xe=U.style.projection,Le=U.transform,Ve=Le.getProjectionDataForCustomLayer(le),He={farZ:Le.farZ,nearZ:Le.nearZ,fov:Le.fov*Math.PI/180,modelViewProjectionMatrix:Le.modelViewProjectionMatrix,projectionMatrix:Le.projectionMatrix,shaderData:{variantName:xe.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${xe.shaderPreludeCode.vertexSource}`,define:xe.shaderDefine},defaultProjectionData:Ve},Ze=pe.renderingMode?pe.renderingMode:"2d";if(U.renderPass==="offscreen"){const et=pe.prerender;et&&(U.setCustomLayerDefaults(),me.setColorMode(U.colorModeForRenderPass()),et.call(pe,me.gl,He),me.setDirty(),U.setBaseState())}else if(U.renderPass==="translucent"){U.setCustomLayerDefaults(),me.setColorMode(U.colorModeForRenderPass()),me.setStencilMode(Pn.disabled);const et=Ze==="3d"?U.getDepthModeFor3D():U.getDepthModeForSublayer(0,Xt.ReadOnly);me.setDepthMode(et),pe.render(me.gl,He),me.setDirty(),U.setBaseState(),me.bindFramebuffer.set(null)}})(u,0,M,D))}saveTileTexture(u){const m=this._tileTextures[u.size[0]];m?m.push(u):this._tileTextures[u.size[0]]=[u]}getTileTexture(u){const m=this._tileTextures[u];return m&&m.length>0?m.pop():null}isPatternMissing(u){if(!u)return!1;if(!u.from||!u.to)return!0;const m=this.imageManager.getPattern(u.from.toString()),M=this.imageManager.getPattern(u.to.toString());return!m||!M}useProgram(u,m,M=!1,O=[]){this.cache=this.cache||{};const D=!!this.style.map.terrain,U=this.style.projection,G=M?Qs.projectionMercator:U.shaderPreludeCode,q=M?Eo:U.shaderDefine,oe=u+(m?m.cacheKey:"")+`/${M?io:U.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(D?"/terrain":"")+(O?`/${O.join("/")}`:"");return this.cache[oe]||(this.cache[oe]=new V1(this.context,Qs[u],m,Dp[u],this._showOverdrawInspector,D,G,q,O)),this.cache[oe]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const u=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(u.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var u,m;if(this._tileTextures){for(const M in this._tileTextures){const O=this._tileTextures[M];if(O)for(const D of O)D.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((u=this.tileExtentMesh.vertexBuffer)===null||u===void 0||u.destroy()),this.tileExtentMesh&&((m=this.tileExtentMesh.indexBuffer)===null||m===void 0||m.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const M in this.cache){const O=this.cache[M];O&&O.program&&this.context.gl.deleteProgram(O.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:u,drawingBufferHeight:m}=this.context.gl;return this.width!==u||this.height!==m}}function ih(T,u){let m,M=!1,O=null,D=null;const U=()=>{O=null,M&&(T.apply(D,m),O=setTimeout(U,u),M=!1)};return(...G)=>(M=!0,D=this,m=G,O||U(),O)}class Ia{constructor(u){this._getCurrentHash=()=>{const m=window.location.hash.replace("#","");if(this._hashName){let M;return m.split("&").map((O=>O.split("="))).forEach((O=>{O[0]===this._hashName&&(M=O)})),(M&&M[1]||"").split("/")}return m.split("/")},this._onHashChange=()=>{const m=this._getCurrentHash();if(!this._isValidHash(m))return!1;const M=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(m[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+m[2],+m[1]],zoom:+m[0],bearing:M,pitch:+(m[4]||0)}),!0},this._updateHashUnthrottled=()=>{const m=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,m)},this._removeHash=()=>{const m=this._getCurrentHash();if(m.length===0)return;const M=m.join("/");let O=M;O.split("&").length>0&&(O=O.split("&")[0]),this._hashName&&(O=`${this._hashName}=${M}`);let D=window.location.hash.replace(O,"");D.startsWith("#&")?D=D.slice(0,1)+D.slice(2):D==="#"&&(D="");let U=window.location.href.replace(/(#.+)?$/,D);U=U.replace("&&","&"),window.history.replaceState(window.history.state,null,U)},this._updateHash=ih(this._updateHashUnthrottled,300),this._hashName=u&&encodeURIComponent(u)}addTo(u){return this._map=u,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(u){const m=this._map.getCenter(),M=Math.round(100*this._map.getZoom())/100,O=Math.ceil((M*Math.LN2+Math.log(512/360/.5))/Math.LN10),D=Math.pow(10,O),U=Math.round(m.lng*D)/D,G=Math.round(m.lat*D)/D,q=this._map.getBearing(),oe=this._map.getPitch();let le="";if(le+=u?`/${U}/${G}/${M}`:`${M}/${G}/${U}`,(q||oe)&&(le+="/"+Math.round(10*q)/10),oe&&(le+=`/${Math.round(oe)}`),this._hashName){const me=this._hashName;let pe=!1;const xe=window.location.hash.slice(1).split("&").map((Le=>{const Ve=Le.split("=")[0];return Ve===me?(pe=!0,`${Ve}=${le}`):Le})).filter((Le=>Le));return pe||xe.push(`${me}=${le}`),`#${xe.join("&")}`}return`#${le}`}_isValidHash(u){if(u.length<3||u.some(isNaN))return!1;try{new a.V(+u[2],+u[1])}catch{return!1}const m=+u[0],M=+(u[3]||0),O=+(u[4]||0);return m>=this._map.getMinZoom()&&m<=this._map.getMaxZoom()&&M>=-180&&M<=180&&O>=this._map.getMinPitch()&&O<=this._map.getMaxPitch()}}const Ja={linearity:.3,easing:a.cv(0,0,.3,1)},k0=a.e({deceleration:2500,maxSpeed:1400},Ja),Z1=a.e({deceleration:20,maxSpeed:1400},Ja),X1=a.e({deceleration:1e3,maxSpeed:360},Ja),sg=a.e({deceleration:1e3,maxSpeed:90},Ja),oa=a.e({deceleration:1e3,maxSpeed:360},Ja);class qs{constructor(u){this._map=u,this.clear()}clear(){this._inertiaBuffer=[]}record(u){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:K(),settings:u})}_drainInertiaBuffer(){const u=this._inertiaBuffer,m=K();for(;u.length>0&&m-u[0].time>160;)u.shift()}_onMoveEnd(u){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const m={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:D}of this._inertiaBuffer)m.zoom+=D.zoomDelta||0,m.bearing+=D.bearingDelta||0,m.pitch+=D.pitchDelta||0,m.roll+=D.rollDelta||0,D.panDelta&&m.pan._add(D.panDelta),D.around&&(m.around=D.around),D.pinchAround&&(m.pinchAround=D.pinchAround);const M=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,O={};if(m.pan.mag()){const D=mA(m.pan.mag(),M,a.e({},k0,u||{})),U=m.pan.mult(D.amount/m.pan.mag()),G=this._map.cameraHelper.handlePanInertia(U,this._map.transform);O.center=G.easingCenter,O.offset=G.easingOffset,Ta(O,D)}if(m.zoom){const D=mA(m.zoom,M,Z1);O.zoom=this._map.transform.zoom+D.amount,Ta(O,D)}if(m.bearing){const D=mA(m.bearing,M,X1);O.bearing=this._map.transform.bearing+a.an(D.amount,-179,179),Ta(O,D)}if(m.pitch){const D=mA(m.pitch,M,sg);O.pitch=this._map.transform.pitch+D.amount,Ta(O,D)}if(m.roll){const D=mA(m.roll,M,oa);O.roll=this._map.transform.roll+a.an(D.amount,-179,179),Ta(O,D)}if(O.zoom||O.bearing){const D=m.pinchAround===void 0?m.around:m.pinchAround;O.around=D?this._map.unproject(D):this._map.getCenter()}return this.clear(),a.e(O,{noMoveStart:!0})}}function Ta(T,u){(!T.duration||T.duration<u.duration)&&(T.duration=u.duration,T.easing=u.easing)}function mA(T,u,m){const{maxSpeed:M,linearity:O,deceleration:D}=m,U=a.an(T*O/(u/1e3),-M,M),G=Math.abs(U)/(D*O);return{easing:m.easing,duration:1e3*G,amount:U*(G/2)}}class As extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,M,O={}){M=M instanceof MouseEvent?M:new MouseEvent(u,M);const D=z.mousePos(m.getCanvas(),M),U=m.unproject(D);super(u,a.e({point:D,lngLat:U,originalEvent:M},O)),this._defaultPrevented=!1,this.target=m}}class gA extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,M){const O=u==="touchend"?M.changedTouches:M.touches,D=z.touchPos(m.getCanvasContainer(),O),U=D.map((q=>m.unproject(q))),G=D.reduce(((q,oe,le,me)=>q.add(oe.div(me.length))),new a.P(0,0));super(u,{points:D,point:G,lngLats:U,lngLat:m.unproject(G),originalEvent:M}),this._defaultPrevented=!1}}class sc extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,M){super(u,{originalEvent:M}),this._defaultPrevented=!1}}class Dd{constructor(u,m){this._map=u,this._clickTolerance=m.clickTolerance}reset(){delete this._mousedownPos}wheel(u){return this._firePreventable(new sc(u.type,this._map,u))}mousedown(u,m){return this._mousedownPos=m,this._firePreventable(new As(u.type,this._map,u))}mouseup(u){this._map.fire(new As(u.type,this._map,u))}click(u,m){this._mousedownPos&&this._mousedownPos.dist(m)>=this._clickTolerance||this._map.fire(new As(u.type,this._map,u))}dblclick(u){return this._firePreventable(new As(u.type,this._map,u))}mouseover(u){this._map.fire(new As(u.type,this._map,u))}mouseout(u){this._map.fire(new As(u.type,this._map,u))}touchstart(u){return this._firePreventable(new gA(u.type,this._map,u))}touchmove(u){this._map.fire(new gA(u.type,this._map,u))}touchend(u){this._map.fire(new gA(u.type,this._map,u))}touchcancel(u){this._map.fire(new gA(u.type,this._map,u))}_firePreventable(u){if(this._map.fire(u),u.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class J1{constructor(u){this._map=u}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(u){this._map.fire(new As(u.type,this._map,u))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new As("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(u){this._delayContextMenu?this._contextMenuEvent=u:this._ignoreContextMenu||this._map.fire(new As(u.type,this._map,u)),this._map.listens("contextmenu")&&u.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Up{constructor(u){this._map=u}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(u){return this.transform.screenPointToLocation(a.P.convert(u),this._map.terrain)}}class Du{constructor(u,m){this._map=u,this._tr=new Up(u),this._el=u.getCanvasContainer(),this._container=u.getContainer(),this._clickTolerance=m.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(u,m){this.isEnabled()&&u.shiftKey&&u.button===0&&(z.disableDrag(),this._startPos=this._lastPos=m,this._active=!0)}mousemoveWindow(u,m){if(!this._active)return;const M=m;if(this._lastPos.equals(M)||!this._box&&M.dist(this._startPos)<this._clickTolerance)return;const O=this._startPos;this._lastPos=M,this._box||(this._box=z.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",u));const D=Math.min(O.x,M.x),U=Math.max(O.x,M.x),G=Math.min(O.y,M.y),q=Math.max(O.y,M.y);z.setTransform(this._box,`translate(${D}px,${G}px)`),this._box.style.width=U-D+"px",this._box.style.height=q-G+"px"}mouseupWindow(u,m){if(!this._active||u.button!==0)return;const M=this._startPos,O=m;if(this.reset(),z.suppressClick(),M.x!==O.x||M.y!==O.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:u})),{cameraAnimation:D=>D.fitScreenCoordinates(M,O,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",u)}keydown(u){this._active&&u.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",u))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(z.remove(this._box),this._box=null),z.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(u,m){return this._map.fire(new a.l(u,{originalEvent:m}))}}function yA(T,u){if(T.length!==u.length)throw new Error(`The number of touches and points are not equal - touches ${T.length}, points ${u.length}`);const m={};for(let M=0;M<T.length;M++)m[T[M].identifier]=u[M];return m}class Rd{constructor(u){this.reset(),this.numTouches=u.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(u,m,M){(this.centroid||M.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=u.timeStamp),M.length===this.numTouches&&(this.centroid=(function(O){const D=new a.P(0,0);for(const U of O)D._add(U);return D.div(O.length)})(m),this.touches=yA(M,m)))}touchmove(u,m,M){if(this.aborted||!this.centroid)return;const O=yA(M,m);for(const D in this.touches){const U=O[D];(!U||U.dist(this.touches[D])>30)&&(this.aborted=!0)}}touchend(u,m,M){if((!this.centroid||u.timeStamp-this.startTime>500)&&(this.aborted=!0),M.length===0){const O=!this.aborted&&this.centroid;if(this.reset(),O)return O}}}class su{constructor(u){this.singleTap=new Rd(u),this.numTaps=u.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(u,m,M){this.singleTap.touchstart(u,m,M)}touchmove(u,m,M){this.singleTap.touchmove(u,m,M)}touchend(u,m,M){const O=this.singleTap.touchend(u,m,M);if(O){const D=u.timeStamp-this.lastTime<500,U=!this.lastTap||this.lastTap.dist(O)<30;if(D&&U||this.reset(),this.count++,this.lastTime=u.timeStamp,this.lastTap=O,this.count===this.numTaps)return this.reset(),O}}}class Gn{constructor(u){this._tr=new Up(u),this._zoomIn=new su({numTouches:1,numTaps:2}),this._zoomOut=new su({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(u,m,M){this._zoomIn.touchstart(u,m,M),this._zoomOut.touchstart(u,m,M)}touchmove(u,m,M){this._zoomIn.touchmove(u,m,M),this._zoomOut.touchmove(u,m,M)}touchend(u,m,M){const O=this._zoomIn.touchend(u,m,M),D=this._zoomOut.touchend(u,m,M),U=this._tr;return O?(this._active=!0,u.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:G=>G.easeTo({duration:300,zoom:U.zoom+1,around:U.unproject(O)},{originalEvent:u})}):D?(this._active=!0,u.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:G=>G.easeTo({duration:300,zoom:U.zoom-1,around:U.unproject(D)},{originalEvent:u})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Uc{constructor(u){this._enabled=!!u.enable,this._moveStateManager=u.moveStateManager,this._clickTolerance=u.clickTolerance||1,this._moveFunction=u.move,this._activateOnStart=!!u.activateOnStart,u.assignEvents(this),this.reset()}reset(u){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(u)}_move(...u){const m=this._moveFunction(...u);if(m.bearingDelta||m.pitchDelta||m.rollDelta||m.around||m.panDelta)return this._active=!0,m}dragStart(u,m){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(u)&&(this._moveStateManager.startMove(u),this._lastPoint=Array.isArray(m)?m[0]:m,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(u,m){if(!this.isEnabled())return;const M=this._lastPoint;if(!M)return;if(u.preventDefault(),!this._moveStateManager.isValidMoveEvent(u))return void this.reset(u);const O=Array.isArray(m)?m[0]:m;return!this._moved&&O.dist(M)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=O,this._move(M,O))}dragEnd(u){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(u)&&(this._moved&&z.suppressClick(),this.reset(u))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Sf=0,Ef=2,Fh={[Sf]:1,[Ef]:2};class vA{constructor(u){this._correctEvent=u.checkCorrectEvent}startMove(u){const m=z.mouseButton(u);this._eventButton=m}endMove(u){delete this._eventButton}isValidStartEvent(u){return this._correctEvent(u)}isValidMoveEvent(u){return!(function(m,M){const O=Fh[M];return m.buttons===void 0||(m.buttons&O)!==O})(u,this._eventButton)}isValidEndEvent(u){return z.mouseButton(u)===this._eventButton}}class Bf{constructor(){this._firstTouch=void 0}_isOneFingerTouch(u){return u.targetTouches.length===1}_isSameTouchEvent(u){return u.targetTouches[0].identifier===this._firstTouch}startMove(u){this._firstTouch=u.targetTouches[0].identifier}endMove(u){delete this._firstTouch}isValidStartEvent(u){return this._isOneFingerTouch(u)}isValidMoveEvent(u){return this._isOneFingerTouch(u)&&this._isSameTouchEvent(u)}isValidEndEvent(u){return this._isOneFingerTouch(u)&&this._isSameTouchEvent(u)}}class Kc{constructor(u=new vA({checkCorrectEvent:()=>!0}),m=new Bf){this.mouseMoveStateManager=u,this.oneFingerTouchMoveStateManager=m}_executeRelevantHandler(u,m,M){return u instanceof MouseEvent?m(u):typeof TouchEvent<"u"&&u instanceof TouchEvent?M(u):void 0}startMove(u){this._executeRelevantHandler(u,(m=>this.mouseMoveStateManager.startMove(m)),(m=>this.oneFingerTouchMoveStateManager.startMove(m)))}endMove(u){this._executeRelevantHandler(u,(m=>this.mouseMoveStateManager.endMove(m)),(m=>this.oneFingerTouchMoveStateManager.endMove(m)))}isValidStartEvent(u){return this._executeRelevantHandler(u,(m=>this.mouseMoveStateManager.isValidStartEvent(m)),(m=>this.oneFingerTouchMoveStateManager.isValidStartEvent(m)))}isValidMoveEvent(u){return this._executeRelevantHandler(u,(m=>this.mouseMoveStateManager.isValidMoveEvent(m)),(m=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(m)))}isValidEndEvent(u){return this._executeRelevantHandler(u,(m=>this.mouseMoveStateManager.isValidEndEvent(m)),(m=>this.oneFingerTouchMoveStateManager.isValidEndEvent(m)))}}const Ll=T=>{T.mousedown=T.dragStart,T.mousemoveWindow=T.dragMove,T.mouseup=T.dragEnd,T.contextmenu=u=>{u.preventDefault()}};class D0{constructor(u,m){this._clickTolerance=u.clickTolerance||1,this._map=m,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(u){return u<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(u,m,M){return this._calculateTransform(u,m,M)}touchmove(u,m,M){if(this._active){if(!this._shouldBePrevented(M.length))return u.preventDefault(),this._calculateTransform(u,m,M);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",u)}}touchend(u,m,M){this._calculateTransform(u,m,M),this._active&&this._shouldBePrevented(M.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(u,m,M){M.length>0&&(this._active=!0);const O=yA(M,m),D=new a.P(0,0),U=new a.P(0,0);let G=0;for(const oe in O){const le=O[oe],me=this._touches[oe];me&&(D._add(le),U._add(le.sub(me)),G++,O[oe]=le)}if(this._touches=O,this._shouldBePrevented(G)||!U.mag())return;const q=U.div(G);return this._sum._add(q),this._sum.mag()<this._clickTolerance?void 0:{around:D.div(G),panDelta:q}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Pd{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(u,m,M){this._firstTwoTouches||M.length<2||(this._firstTwoTouches=[M[0].identifier,M[1].identifier],this._start([m[0],m[1]]))}touchmove(u,m,M){if(!this._firstTwoTouches)return;u.preventDefault();const[O,D]=this._firstTwoTouches,U=rh(M,m,O),G=rh(M,m,D);if(!U||!G)return;const q=this._aroundCenter?null:U.add(G).div(2);return this._move([U,G],q,u)}touchend(u,m,M){if(!this._firstTwoTouches)return;const[O,D]=this._firstTwoTouches,U=rh(M,m,O),G=rh(M,m,D);U&&G||(this._active&&z.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(u){this._enabled=!0,this._aroundCenter=!!u&&u.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function rh(T,u,m){for(let M=0;M<T.length;M++)if(T[M].identifier===m)return u[M]}function Ul(T,u){return Math.log(T/u)/Math.LN2}class Ld extends Pd{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(u){this._startDistance=this._distance=u[0].dist(u[1])}_move(u,m){const M=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs(Ul(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ul(this._distance,M),pinchAround:m}}}function ac(T,u){return 180*T.angleWith(u)/Math.PI}class el extends Pd{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])}_move(u,m,M){const O=this._vector;if(this._vector=u[0].sub(u[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ac(this._vector,O),pinchAround:m}}_isBelowThreshold(u){this._minDiameter=Math.min(this._minDiameter,u.mag());const m=25/(Math.PI*this._minDiameter)*360,M=ac(u,this._startVector);return Math.abs(M)<m}}function ag(T){return Math.abs(T.y)>Math.abs(T.x)}class bA extends Pd{constructor(u){super(),this._currentTouchCount=0,this._map=u}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(u,m,M){super.touchstart(u,m,M),this._currentTouchCount=M.length}_start(u){this._lastPoints=u,ag(u[0].sub(u[1]))&&(this._valid=!1)}_move(u,m,M){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const O=u[0].sub(this._lastPoints[0]),D=u[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(O,D,M.timeStamp),this._valid?(this._lastPoints=u,this._active=!0,{pitchDelta:(O.y+D.y)/2*-.5}):void 0}gestureBeginsVertically(u,m,M){if(this._valid!==void 0)return this._valid;const O=u.mag()>=2,D=m.mag()>=2;if(!O&&!D)return;if(!O||!D)return this._firstMove===void 0&&(this._firstMove=M),M-this._firstMove<100&&void 0;const U=u.y>0==m.y>0;return ag(u)&&ag(m)&&U}}const R0={panStep:100,bearingStep:15,pitchStep:10};class Ru{constructor(u){this._tr=new Up(u);const m=R0;this._panStep=m.panStep,this._bearingStep=m.bearingStep,this._pitchStep=m.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(u){if(u.altKey||u.ctrlKey||u.metaKey)return;let m=0,M=0,O=0,D=0,U=0;switch(u.keyCode){case 61:case 107:case 171:case 187:m=1;break;case 189:case 109:case 173:m=-1;break;case 37:u.shiftKey?M=-1:(u.preventDefault(),D=-1);break;case 39:u.shiftKey?M=1:(u.preventDefault(),D=1);break;case 38:u.shiftKey?O=1:(u.preventDefault(),U=-1);break;case 40:u.shiftKey?O=-1:(u.preventDefault(),U=1);break;default:return}return this._rotationDisabled&&(M=0,O=0),{cameraAnimation:G=>{const q=this._tr;G.easeTo({duration:300,easeId:"keyboardHandler",easing:tl,zoom:m?Math.round(q.zoom)+m*(u.shiftKey?2:1):q.zoom,bearing:q.bearing+M*this._bearingStep,pitch:q.pitch+O*this._pitchStep,offset:[-D*this._panStep,-U*this._panStep],center:q.center},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function tl(T){return T*(2-T)}const ao=4.000244140625,zh=1/450;class Kl{constructor(u,m){this._onTimeout=M=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(M)},this._map=u,this._tr=new Up(u),this._triggerRenderFrame=m,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=zh}setZoomRate(u){this._defaultZoomRate=u}setWheelZoomRate(u){this._wheelZoomRate=u}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(u){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!u&&u.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(u){return!!this._map.cooperativeGestures.isEnabled()&&!(u.ctrlKey||this._map.cooperativeGestures.isBypassed(u))}wheel(u){if(!this.isEnabled())return;if(this._shouldBePrevented(u))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",u);let m=u.deltaMode===WheelEvent.DOM_DELTA_LINE?40*u.deltaY:u.deltaY;const M=K(),O=M-(this._lastWheelEventTime||0);this._lastWheelEventTime=M,m!==0&&m%ao==0?this._type="wheel":m!==0&&Math.abs(m)<4?this._type="trackpad":O>400?(this._type=null,this._lastValue=m,this._timeout=setTimeout(this._onTimeout,40,u)):this._type||(this._type=Math.abs(O*m)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,m+=this._lastValue)),u.shiftKey&&m&&(m/=4),this._type&&(this._lastWheelEvent=u,this._delta-=m,this._active||this._start(u)),u.preventDefault()}_start(u){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const m=z.mousePos(this._map.getCanvas(),u),M=this._tr;this._aroundPoint=this._aroundCenter?M.transform.locationToScreenPoint(a.V.convert(M.center)):m,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const u=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const G=u.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=G),typeof this._targetZoom=="number"&&(this._targetZoom+=G)}if(this._delta!==0){const G=this._type==="wheel"&&Math.abs(this._delta)>ao?this._wheelZoomRate:this._defaultZoomRate;let q=2/(1+Math.exp(-Math.abs(this._delta*G)));this._delta<0&&q!==0&&(q=1/q);const oe=typeof this._targetZoom!="number"?u.scale:a.aq(this._targetZoom);this._targetZoom=u.applyConstrain(u.getCameraLngLat(),a.at(oe*q)).zoom,this._type==="wheel"&&(this._startZoom=u.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const m=typeof this._targetZoom!="number"?u.zoom:this._targetZoom,M=this._startZoom,O=this._easing;let D,U=!1;if(this._type==="wheel"&&M&&O){const G=K()-this._lastWheelEventTime,q=Math.min((G+5)/200,1),oe=O(q);D=a.G.number(M,m,oe),q<1?this._frameId||(this._frameId=!0):U=!0}else D=m,U=!0;return this._active=!0,U&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=D,{noInertia:!0,needsRenderFrame:!U,zoomDelta:D-u.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(u){let m=a.cx;if(this._prevEase){const M=this._prevEase,O=(K()-M.start)/M.duration,D=M.easing(O+.01)-M.easing(O),U=.27/Math.sqrt(D*D+1e-4)*.01,G=Math.sqrt(.0729-U*U);m=a.cv(U,G,.25,1)}return this._prevEase={start:K(),duration:u,easing:m},m}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class oh{constructor(u,m){this._clickZoom=u,this._tapZoom=m}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Of{constructor(u){this._tr=new Up(u),this.reset()}reset(){this._active=!1}dblclick(u,m){return u.preventDefault(),{cameraAnimation:M=>{M.easeTo({duration:300,zoom:this._tr.zoom+(u.shiftKey?-1:1),around:this._tr.unproject(m)},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ba{constructor(){this._tap=new su({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(u,m,M){if(!this._swipePoint)if(this._tapTime){const O=m[0],D=u.timeStamp-this._tapTime<500,U=this._tapPoint.dist(O)<30;D&&U?M.length>0&&(this._swipePoint=O,this._swipeTouch=M[0].identifier):this.reset()}else this._tap.touchstart(u,m,M)}touchmove(u,m,M){if(this._tapTime){if(this._swipePoint){if(M[0].identifier!==this._swipeTouch)return;const O=m[0],D=O.y-this._swipePoint.y;return this._swipePoint=O,u.preventDefault(),this._active=!0,{zoomDelta:D/128}}}else this._tap.touchmove(u,m,M)}touchend(u,m,M){if(this._tapTime)this._swipePoint&&M.length===0&&this.reset();else{const O=this._tap.touchend(u,m,M);O&&(this._tapTime=u.timeStamp,this._tapPoint=O)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class sh{constructor(u,m,M){this._el=u,this._mousePan=m,this._touchPan=M}enable(u){this._inertiaOptions=u||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class jh{constructor(u,m,M,O){this._pitchWithRotate=u.pitchWithRotate,this._rollEnabled=u.rollEnabled,this._mouseRotate=m,this._mousePitch=M,this._mouseRoll=O}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class lc{constructor(u,m,M,O){this._el=u,this._touchZoom=m,this._touchRotate=M,this._tapDragZoom=O,this._rotationDisabled=!1,this._enabled=!0}enable(u){this._touchZoom.enable(u),this._rotationDisabled||this._touchRotate.enable(u),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class au{constructor(u,m){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=u,this._options=m,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const u=this._map.getCanvasContainer();u.classList.add("maplibregl-cooperative-gestures"),this._container=z.create("div","maplibregl-cooperative-gesture-screen",u);let m=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(m=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const M=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),O=document.createElement("div");O.className="maplibregl-desktop-message",O.textContent=m,this._container.appendChild(O);const D=document.createElement("div");D.className="maplibregl-mobile-message",D.textContent=M,this._container.appendChild(D),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(z.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(u){return u[this._bypassKey]}notifyGestureBlocked(u,m){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:u,originalEvent:m})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const Fl=T=>T.zoom||T.drag||T.roll||T.pitch||T.rotate;class Vn extends a.l{}function wi(T){return T.panDelta&&T.panDelta.mag()||T.zoomDelta||T.bearingDelta||T.pitchDelta||T.rollDelta}class sa{constructor(u,m){this.handleWindowEvent=O=>{this.handleEvent(O,`${O.type}Window`)},this.handleEvent=(O,D)=>{if(O.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const U=O.type==="renderFrame"?void 0:O,G={needsRenderFrame:!1},q={},oe={};for(const{handlerName:pe,handler:xe,allowed:Le}of this._handlers){if(!xe.isEnabled())continue;let Ve;if(this._blockedByActive(oe,Le,pe))xe.reset();else if(xe[D||O.type]){if(a.cy(O,D||O.type)){const He=z.mousePos(this._map.getCanvas(),O);Ve=xe[D||O.type](O,He)}else if(a.cz(O,D||O.type)){const He=this._getMapTouches(O.touches),Ze=z.touchPos(this._map.getCanvas(),He);Ve=xe[D||O.type](O,Ze,He)}else a.cA(D||O.type)||(Ve=xe[D||O.type](O));this.mergeHandlerResult(G,q,Ve,pe,U),Ve&&Ve.needsRenderFrame&&this._triggerRenderFrame()}(Ve||xe.isActive())&&(oe[pe]=xe)}const le={};for(const pe in this._previousActiveHandlers)oe[pe]||(le[pe]=U);this._previousActiveHandlers=oe,(Object.keys(le).length||wi(G))&&(this._changes.push([G,q,le]),this._triggerRenderFrame()),(Object.keys(oe).length||wi(G))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:me}=G;me&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],me(this._map))},this._map=u,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new qs(u),this._bearingSnap=m.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(m);const M=this._el;this._listeners=[[M,"touchstart",{passive:!0}],[M,"touchmove",{passive:!1}],[M,"touchend",void 0],[M,"touchcancel",void 0],[M,"mousedown",void 0],[M,"mousemove",void 0],[M,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[M,"mouseover",void 0],[M,"mouseout",void 0],[M,"dblclick",void 0],[M,"click",void 0],[M,"keydown",{capture:!1}],[M,"keyup",void 0],[M,"wheel",{passive:!1}],[M,"contextmenu",void 0],[window,"blur",void 0]];for(const[O,D,U]of this._listeners)z.addEventListener(O,D,O===document?this.handleWindowEvent:this.handleEvent,U)}destroy(){for(const[u,m,M]of this._listeners)z.removeEventListener(u,m,u===document?this.handleWindowEvent:this.handleEvent,M)}_addDefaultHandlers(u){const m=this._map,M=m.getCanvasContainer();this._add("mapEvent",new Dd(m,u));const O=m.boxZoom=new Du(m,u);this._add("boxZoom",O),u.interactive&&u.boxZoom&&O.enable();const D=m.cooperativeGestures=new au(m,u.cooperativeGestures);this._add("cooperativeGestures",D),u.cooperativeGestures&&D.enable();const U=new Gn(m),G=new Of(m);m.doubleClickZoom=new oh(G,U),this._add("tapZoom",U),this._add("clickZoom",G),u.interactive&&u.doubleClickZoom&&m.doubleClickZoom.enable();const q=new ba;this._add("tapDragZoom",q);const oe=m.touchPitch=new bA(m);this._add("touchPitch",oe),u.interactive&&u.touchPitch&&m.touchPitch.enable(u.touchPitch);const le=()=>m.project(m.getCenter()),me=(function({enable:Je,clickTolerance:At,aroundCenter:pt=!0,minPixelCenterThreshold:it=100,rotateDegreesPerPixelMoved:Ct=.8},Nt){const Kt=new vA({checkCorrectEvent:Ft=>z.mouseButton(Ft)===0&&Ft.ctrlKey||z.mouseButton(Ft)===2&&!Ft.ctrlKey});return new Uc({clickTolerance:At,move:(Ft,jt)=>{const pn=Nt();if(pt&&Math.abs(pn.y-Ft.y)>it)return{bearingDelta:a.cw(new a.P(Ft.x,jt.y),jt,pn)};let Sn=(jt.x-Ft.x)*Ct;return pt&&jt.y<pn.y&&(Sn=-Sn),{bearingDelta:Sn}},moveStateManager:Kt,enable:Je,assignEvents:Ll})})(u,le),pe=(function({enable:Je,clickTolerance:At,pitchDegreesPerPixelMoved:pt=-.5}){const it=new vA({checkCorrectEvent:Ct=>z.mouseButton(Ct)===0&&Ct.ctrlKey||z.mouseButton(Ct)===2});return new Uc({clickTolerance:At,move:(Ct,Nt)=>({pitchDelta:(Nt.y-Ct.y)*pt}),moveStateManager:it,enable:Je,assignEvents:Ll})})(u),xe=(function({enable:Je,clickTolerance:At,rollDegreesPerPixelMoved:pt=.3},it){const Ct=new vA({checkCorrectEvent:Nt=>z.mouseButton(Nt)===2&&Nt.ctrlKey});return new Uc({clickTolerance:At,move:(Nt,Kt)=>{const Ft=it();let jt=(Kt.x-Nt.x)*pt;return Kt.y<Ft.y&&(jt=-jt),{rollDelta:jt}},moveStateManager:Ct,enable:Je,assignEvents:Ll})})(u,le);m.dragRotate=new jh(u,me,pe,xe),this._add("mouseRotate",me,["mousePitch"]),this._add("mousePitch",pe,["mouseRotate","mouseRoll"]),this._add("mouseRoll",xe,["mousePitch"]),u.interactive&&u.dragRotate&&m.dragRotate.enable();const Le=(function({enable:Je,clickTolerance:At}){const pt=new vA({checkCorrectEvent:it=>z.mouseButton(it)===0&&!it.ctrlKey});return new Uc({clickTolerance:At,move:(it,Ct)=>({around:Ct,panDelta:Ct.sub(it)}),activateOnStart:!0,moveStateManager:pt,enable:Je,assignEvents:Ll})})(u),Ve=new D0(u,m);m.dragPan=new sh(M,Le,Ve),this._add("mousePan",Le),this._add("touchPan",Ve,["touchZoom","touchRotate"]),u.interactive&&u.dragPan&&m.dragPan.enable(u.dragPan);const He=new el,Ze=new Ld;m.touchZoomRotate=new lc(M,Ze,He,q),this._add("touchRotate",He,["touchPan","touchZoom"]),this._add("touchZoom",Ze,["touchPan","touchRotate"]),u.interactive&&u.touchZoomRotate&&m.touchZoomRotate.enable(u.touchZoomRotate),this._add("blockableMapEvent",new J1(m));const et=m.scrollZoom=new Kl(m,(()=>this._triggerRenderFrame()));this._add("scrollZoom",et,["mousePan"]),u.interactive&&u.scrollZoom&&m.scrollZoom.enable(u.scrollZoom);const lt=m.keyboard=new Ru(m);this._add("keyboard",lt),u.interactive&&u.keyboard&&m.keyboard.enable()}_add(u,m,M){this._handlers.push({handlerName:u,handler:m,allowed:M}),this._handlersById[u]=m}stop(u){if(!this._updatingCamera){for(const{handler:m}of this._handlers)m.reset();this._inertia.clear(),this._fireEvents({},{},u),this._changes=[]}}isActive(){for(const{handler:u}of this._handlers)if(u.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Fl(this._eventsInProgress)||this.isZooming()}_blockedByActive(u,m,M){for(const O in u)if(O!==M&&(!m||m.indexOf(O)<0))return!0;return!1}_getMapTouches(u){const m=[];for(const M of u)this._el.contains(M.target)&&m.push(M);return m}mergeHandlerResult(u,m,M,O,D){if(!M)return;a.e(u,M);const U={handlerName:O,originalEvent:M.originalEvent||D};M.zoomDelta!==void 0&&(m.zoom=U),M.panDelta!==void 0&&(m.drag=U),M.rollDelta!==void 0&&(m.roll=U),M.pitchDelta!==void 0&&(m.pitch=U),M.bearingDelta!==void 0&&(m.rotate=U)}_applyChanges(){const u={},m={},M={};for(const[O,D,U]of this._changes)O.panDelta&&(u.panDelta=(u.panDelta||new a.P(0,0))._add(O.panDelta)),O.zoomDelta&&(u.zoomDelta=(u.zoomDelta||0)+O.zoomDelta),O.bearingDelta&&(u.bearingDelta=(u.bearingDelta||0)+O.bearingDelta),O.pitchDelta&&(u.pitchDelta=(u.pitchDelta||0)+O.pitchDelta),O.rollDelta&&(u.rollDelta=(u.rollDelta||0)+O.rollDelta),O.around!==void 0&&(u.around=O.around),O.pinchAround!==void 0&&(u.pinchAround=O.pinchAround),O.noInertia&&(u.noInertia=O.noInertia),a.e(m,D),a.e(M,U);this._updateMapTransform(u,m,M),this._changes=[]}_updateMapTransform(u,m,M){const O=this._map,D=O._getTransformForUpdate(),U=O.terrain;if(!(wi(u)||U&&this._terrainMovement))return this._fireEvents(m,M,!0);O._stop(!0);let{panDelta:G,zoomDelta:q,bearingDelta:oe,pitchDelta:le,rollDelta:me,around:pe,pinchAround:xe}=u;xe!==void 0&&(pe=xe),pe=pe||O.transform.centerPoint,U&&!D.isPointOnMapSurface(pe)&&(pe=D.centerPoint);const Le={panDelta:G,zoomDelta:q,rollDelta:me,pitchDelta:le,bearingDelta:oe,around:pe};this._map.cameraHelper.useGlobeControls&&!D.isPointOnMapSurface(pe)&&(pe=D.centerPoint);const Ve=pe.distSqr(D.centerPoint)<.01?D.center:D.screenPointToLocation(G?pe.sub(G):pe);this._handleMapControls({terrain:U,tr:D,deltasForHelper:Le,preZoomAroundLoc:Ve,combinedEventsInProgress:m,panDelta:G}),O._applyUpdatedTransform(D),this._map._update(),u.noInertia||this._inertia.record(u),this._fireEvents(m,M,!0)}_handleMapControls({terrain:u,tr:m,deltasForHelper:M,preZoomAroundLoc:O,combinedEventsInProgress:D,panDelta:U}){const G=this._map.cameraHelper;if(G.handleMapControlsRollPitchBearingZoom(M,m),u)return G.useGlobeControls?(this._terrainMovement||!D.drag&&!D.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void G.handleMapControlsPan(M,m,O)):this._terrainMovement||!D.drag&&!D.zoom?void(D.drag&&this._terrainMovement&&U?m.setCenter(m.screenPointToLocation(m.centerPoint.sub(U))):G.handleMapControlsPan(M,m,O)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void G.handleMapControlsPan(M,m,O));G.handleMapControlsPan(M,m,O)}_fireEvents(u,m,M){const O=Fl(this._eventsInProgress),D=Fl(u),U={};for(const me in u){const{originalEvent:pe}=u[me];this._eventsInProgress[me]||(U[`${me}start`]=pe),this._eventsInProgress[me]=u[me]}!O&&D&&this._fireEvent("movestart",D.originalEvent);for(const me in U)this._fireEvent(me,U[me]);D&&this._fireEvent("move",D.originalEvent);for(const me in u){const{originalEvent:pe}=u[me];this._fireEvent(me,pe)}const G={};let q;for(const me in this._eventsInProgress){const{handlerName:pe,originalEvent:xe}=this._eventsInProgress[me];this._handlersById[pe].isActive()||(delete this._eventsInProgress[me],q=m[pe]||xe,G[`${me}end`]=q)}for(const me in G)this._fireEvent(me,G[me]);const oe=Fl(this._eventsInProgress),le=(O||D)&&!oe;if(le&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const me=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&me.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(me)}if(M&&le){this._updatingCamera=!0;const me=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),pe=xe=>xe!==0&&-this._bearingSnap<xe&&xe<this._bearingSnap;!me||!me.essential&&I.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:q})),pe(this._map.getBearing())&&this._map.resetNorth()):(pe(me.bearing||this._map.getBearing())&&(me.bearing=0),me.freezeElevation=!0,this._map.easeTo(me,{originalEvent:q})),this._updatingCamera=!1}}_fireEvent(u,m){this._map.fire(new a.l(u,m?{originalEvent:m}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((u=>{delete this._frameId,this.handleEvent(new Vn("renderFrame",{timeStamp:u})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class If extends a.E{constructor(u,m,M){super(),this._renderFrameCallback=()=>{const O=Math.min((K()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(O)),O<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=M.bearingSnap,this.cameraHelper=m,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(u,m){u.apply(this.transform),this.transform=u,this.cameraHelper=m}getCenter(){return new a.V(this.transform.center.lng,this.transform.center.lat)}setCenter(u,m){return this.jumpTo({center:u},m)}getCenterElevation(){return this.transform.elevation}setCenterElevation(u,m){return this.jumpTo({elevation:u},m),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(u){this._centerClampedToGround=u}panBy(u,m,M){return u=a.P.convert(u).mult(-1),this.panTo(this.transform.center,a.e({offset:u},m),M)}panTo(u,m,M){return this.easeTo(a.e({center:u},m),M)}getZoom(){return this.transform.zoom}setZoom(u,m){return this.jumpTo({zoom:u},m),this}zoomTo(u,m,M){return this.easeTo(a.e({zoom:u},m),M)}zoomIn(u,m){return this.zoomTo(this.getZoom()+1,u,m),this}zoomOut(u,m){return this.zoomTo(this.getZoom()-1,u,m),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(u,m){return u!=this.transform.fov&&(this.transform.setFov(u),this.fire(new a.l("movestart",m)).fire(new a.l("move",m)).fire(new a.l("moveend",m))),this}getBearing(){return this.transform.bearing}setBearing(u,m){return this.jumpTo({bearing:u},m),this}getPadding(){return this.transform.padding}setPadding(u,m){return this.jumpTo({padding:u},m),this}rotateTo(u,m,M){return this.easeTo(a.e({bearing:u},m),M)}resetNorth(u,m){return this.rotateTo(0,a.e({duration:1e3},u),m),this}resetNorthPitch(u,m){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},u),m),this}snapToNorth(u,m){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,m):this}getPitch(){return this.transform.pitch}setPitch(u,m){return this.jumpTo({pitch:u},m),this}getRoll(){return this.transform.roll}setRoll(u,m){return this.jumpTo({roll:u},m),this}cameraForBounds(u,m){u=Zt.convert(u).adjustAntiMeridian();const M=m&&m.bearing||0;return this._cameraForBoxAndBearing(u.getNorthWest(),u.getSouthEast(),M,m)}_cameraForBoxAndBearing(u,m,M,O){const D={top:0,bottom:0,right:0,left:0};if(typeof(O=a.e({padding:D,offset:[0,0],maxZoom:this.transform.maxZoom},O)).padding=="number"){const oe=O.padding;O.padding={top:oe,bottom:oe,right:oe,left:oe}}const U=a.e(D,O.padding);O.padding=U;const G=this.transform,q=new Zt(u,m);return this.cameraHelper.cameraForBoxAndBearing(O,U,q,M,G)}fitBounds(u,m,M){return this._fitInternal(this.cameraForBounds(u,m),m,M)}fitScreenCoordinates(u,m,M,O,D){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(u)),this.transform.screenPointToLocation(a.P.convert(m)),M,O),O,D)}_fitInternal(u,m,M){return u?(delete(m=a.e(u,m)).padding,m.linear?this.easeTo(m,M):this.flyTo(m,M)):this}jumpTo(u,m){this.stop();const M=this._getTransformForUpdate();let O=!1,D=!1,U=!1;const G=M.zoom;this.cameraHelper.handleJumpToCenterZoom(M,u);const q=M.zoom!==G;return"elevation"in u&&M.elevation!==+u.elevation&&M.setElevation(+u.elevation),"bearing"in u&&M.bearing!==+u.bearing&&(O=!0,M.setBearing(+u.bearing)),"pitch"in u&&M.pitch!==+u.pitch&&(D=!0,M.setPitch(+u.pitch)),"roll"in u&&M.roll!==+u.roll&&(U=!0,M.setRoll(+u.roll)),u.padding==null||M.isPaddingEqual(u.padding)||M.setPadding(u.padding),this._applyUpdatedTransform(M),this.fire(new a.l("movestart",m)).fire(new a.l("move",m)),q&&this.fire(new a.l("zoomstart",m)).fire(new a.l("zoom",m)).fire(new a.l("zoomend",m)),O&&this.fire(new a.l("rotatestart",m)).fire(new a.l("rotate",m)).fire(new a.l("rotateend",m)),D&&this.fire(new a.l("pitchstart",m)).fire(new a.l("pitch",m)).fire(new a.l("pitchend",m)),U&&this.fire(new a.l("rollstart",m)).fire(new a.l("roll",m)).fire(new a.l("rollend",m)),this.fire(new a.l("moveend",m))}calculateCameraOptionsFromTo(u,m,M,O=0){const D=a.aa.fromLngLat(u,m),U=a.aa.fromLngLat(M,O),G=U.x-D.x,q=U.y-D.y,oe=U.z-D.z,le=Math.hypot(G,q,oe);if(le===0)throw new Error("Can't calculate camera options with same From and To");const me=Math.hypot(G,q),pe=a.at(this.transform.cameraToCenterDistance/le/this.transform.tileSize),xe=180*Math.atan2(G,-q)/Math.PI;let Le=180*Math.acos(me/le)/Math.PI;return Le=oe<0?90-Le:90+Le,{center:U.toLngLat(),elevation:O,zoom:pe,pitch:Le,bearing:xe}}calculateCameraOptionsFromCameraLngLatAltRotation(u,m,M,O,D){const U=this.transform.calculateCenterFromCameraLngLatAlt(u,m,M,O);return{center:U.center,elevation:U.elevation,zoom:U.zoom,bearing:M,pitch:O,roll:D}}easeTo(u,m){this._stop(!1,u.easeId),((u=a.e({offset:[0,0],duration:500,easing:a.cx},u)).animate===!1||!u.essential&&I.prefersReducedMotion)&&(u.duration=0);const M=this._getTransformForUpdate(),O=this.getBearing(),D=M.pitch,U=M.roll,G="bearing"in u?this._normalizeBearing(u.bearing,O):O,q="pitch"in u?+u.pitch:D,oe="roll"in u?this._normalizeBearing(u.roll,U):U,le="padding"in u?u.padding:M.padding,me=a.P.convert(u.offset);let pe,xe;u.around&&(pe=a.V.convert(u.around),xe=M.locationToScreenPoint(pe));const Le={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Ve=this.cameraHelper.handleEaseTo(M,{bearing:G,pitch:q,roll:oe,padding:le,around:pe,aroundPoint:xe,offsetAsPoint:me,offset:u.offset,zoom:u.zoom,center:u.center});return this._rotating=this._rotating||O!==G,this._pitching=this._pitching||q!==D,this._rolling=this._rolling||oe!==U,this._padding=!M.isPaddingEqual(le),this._zooming=this._zooming||Ve.isZooming,this._easeId=u.easeId,this._prepareEase(m,u.noMoveStart,Le),this.terrain&&this._prepareElevation(Ve.elevationCenter),this._ease((He=>{Ve.easeFunc(He),this.terrain&&!u.freezeElevation&&this._updateElevation(He),this._applyUpdatedTransform(M),this._fireMoveEvents(m)}),(He=>{this.terrain&&u.freezeElevation&&this._finalizeElevation(),this._afterEase(m,He)}),u),this}_prepareEase(u,m,M={}){this._moving=!0,m||M.moving||this.fire(new a.l("movestart",u)),this._zooming&&!M.zooming&&this.fire(new a.l("zoomstart",u)),this._rotating&&!M.rotating&&this.fire(new a.l("rotatestart",u)),this._pitching&&!M.pitching&&this.fire(new a.l("pitchstart",u)),this._rolling&&!M.rolling&&this.fire(new a.l("rollstart",u))}_prepareElevation(u){this._elevationCenter=u,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(u){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const m=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(u<1&&m!==this._elevationTarget){const M=this._elevationTarget-this._elevationStart;this._elevationStart+=u*(M-(m-(M*u+this._elevationStart))/(1-u)),this._elevationTarget=m}this.transform.setElevation(a.G.number(this._elevationStart,this._elevationTarget,u))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(u){if(!this.terrain&&u.elevation>=0&&u.pitch<=90)return{};const m=u.getCameraLngLat(),M=u.getCameraAltitude(),O=this.terrain?this.terrain.getElevationForLngLatZoom(m,u.zoom):0;if(M<O){const D=this.calculateCameraOptionsFromTo(m,O,u.center,u.elevation);return{pitch:D.pitch,zoom:D.zoom}}return{}}_applyUpdatedTransform(u){const m=[];if(m.push((O=>this._elevateCameraIfInsideTerrain(O))),this.transformCameraUpdate&&m.push((O=>this.transformCameraUpdate(O))),!m.length)return;const M=u.clone();for(const O of m){const D=M.clone(),{center:U,zoom:G,roll:q,pitch:oe,bearing:le,elevation:me}=O(D);U&&D.setCenter(U),me!==void 0&&D.setElevation(me),G!==void 0&&D.setZoom(G),q!==void 0&&D.setRoll(q),oe!==void 0&&D.setPitch(oe),le!==void 0&&D.setBearing(le),M.apply(D)}this.transform.apply(M)}_fireMoveEvents(u){this.fire(new a.l("move",u)),this._zooming&&this.fire(new a.l("zoom",u)),this._rotating&&this.fire(new a.l("rotate",u)),this._pitching&&this.fire(new a.l("pitch",u)),this._rolling&&this.fire(new a.l("roll",u))}_afterEase(u,m){if(this._easeId&&m&&this._easeId===m)return;delete this._easeId;const M=this._zooming,O=this._rotating,D=this._pitching,U=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,M&&this.fire(new a.l("zoomend",u)),O&&this.fire(new a.l("rotateend",u)),D&&this.fire(new a.l("pitchend",u)),U&&this.fire(new a.l("rollend",u)),this.fire(new a.l("moveend",u))}flyTo(u,m){if(!u.essential&&I.prefersReducedMotion){const jt=a.U(u,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(jt,m)}this.stop(),u=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.cx},u);const M=this._getTransformForUpdate(),O=M.bearing,D=M.pitch,U=M.roll,G=M.padding,q="bearing"in u?this._normalizeBearing(u.bearing,O):O,oe="pitch"in u?+u.pitch:D,le="roll"in u?this._normalizeBearing(u.roll,U):U,me="padding"in u?u.padding:M.padding,pe=a.P.convert(u.offset);let xe=M.centerPoint.add(pe);const Le=M.screenPointToLocation(xe),Ve=this.cameraHelper.handleFlyTo(M,{bearing:q,pitch:oe,roll:le,padding:me,locationAtOffset:Le,offsetAsPoint:pe,center:u.center,minZoom:u.minZoom,zoom:u.zoom});let He=u.curve;const Ze=Math.max(M.width,M.height),et=Ze/Ve.scaleOfZoom,lt=Ve.pixelPathLength;typeof Ve.scaleOfMinZoom=="number"&&(He=Math.sqrt(Ze/Ve.scaleOfMinZoom/lt*2));const Je=He*He;function At(jt){const pn=(et*et-Ze*Ze+(jt?-1:1)*Je*Je*lt*lt)/(2*(jt?et:Ze)*Je*lt);return Math.log(Math.sqrt(pn*pn+1)-pn)}function pt(jt){return(Math.exp(jt)-Math.exp(-jt))/2}function it(jt){return(Math.exp(jt)+Math.exp(-jt))/2}const Ct=At(!1);let Nt=function(jt){return it(Ct)/it(Ct+He*jt)},Kt=function(jt){return Ze*((it(Ct)*(pt(pn=Ct+He*jt)/it(pn))-pt(Ct))/Je)/lt;var pn},Ft=(At(!0)-Ct)/He;if(Math.abs(lt)<2e-6||!isFinite(Ft)){if(Math.abs(Ze-et)<1e-6)return this.easeTo(u,m);const jt=et<Ze?-1:1;Ft=Math.abs(Math.log(et/Ze))/He,Kt=()=>0,Nt=pn=>Math.exp(jt*He*pn)}return u.duration="duration"in u?+u.duration:1e3*Ft/("screenSpeed"in u?+u.screenSpeed/He:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0),this._zooming=!0,this._rotating=O!==q,this._pitching=oe!==D,this._rolling=le!==U,this._padding=!M.isPaddingEqual(me),this._prepareEase(m,!1),this.terrain&&this._prepareElevation(Ve.targetCenter),this._ease((jt=>{const pn=jt*Ft,Sn=1/Nt(pn),rn=Kt(pn);this._rotating&&M.setBearing(a.G.number(O,q,jt)),this._pitching&&M.setPitch(a.G.number(D,oe,jt)),this._rolling&&M.setRoll(a.G.number(U,le,jt)),this._padding&&(M.interpolatePadding(G,me,jt),xe=M.centerPoint.add(pe)),Ve.easeFunc(jt,Sn,rn,xe),this.terrain&&!u.freezeElevation&&this._updateElevation(jt),this._applyUpdatedTransform(M),this._fireMoveEvents(m)}),(()=>{this.terrain&&u.freezeElevation&&this._finalizeElevation(),this._afterEase(m)}),u),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(u,m){var M;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const O=this._onEaseEnd;delete this._onEaseEnd,O.call(this,m)}return u||(M=this.handlers)===null||M===void 0||M.stop(!1),this}_ease(u,m,M){M.animate===!1||M.duration===0?(u(1),m()):(this._easeStart=K(),this._easeOptions=M,this._onEaseFrame=u,this._onEaseEnd=m,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(u,m){u=a.W(u,-180,180);const M=Math.abs(u-m);return Math.abs(u-360-m)<M&&(u-=360),Math.abs(u+360-m)<M&&(u+=360),u}queryTerrainElevation(u){return this.terrain?this.terrain.getElevationForLngLatZoom(a.V.convert(u),this.transform.tileZoom):null}}const nl={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Qo{constructor(u=nl){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=m=>{!m||m.sourceDataType!=="metadata"&&m.sourceDataType!=="visibility"&&m.dataType!=="style"&&m.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=u}getDefaultPosition(){return"bottom-right"}onAdd(u){return this._map=u,this._compact=this.options.compact,this._container=z.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=z.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=z.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){z.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(u,m){const M=this._map._getUIString(`AttributionControl.${m}`);u.title=M,u.setAttribute("aria-label",M)}_updateAttributions(){if(!this._map.style)return;let u=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?u=u.concat(this.options.customAttribution.map((O=>typeof O!="string"?"":O))):typeof this.options.customAttribution=="string"&&u.push(this.options.customAttribution)),this._map.style.stylesheet){const O=this._map.style.stylesheet;this.styleOwner=O.owner,this.styleId=O.id}const m=this._map.style.tileManagers;for(const O in m){const D=m[O];if(D.used||D.usedForTerrain){const U=D.getSource();U.attribution&&u.indexOf(U.attribution)<0&&u.push(U.attribution)}}u=u.filter((O=>String(O).trim())),u.sort(((O,D)=>O.length-D.length)),u=u.filter(((O,D)=>{for(let U=D+1;U<u.length;U++)if(u[U].indexOf(O)>=0)return!1;return!0}));const M=u.join(" | ");M!==this._attribHTML&&(this._attribHTML=M,u.length?(this._innerContainer.innerHTML=z.sanitize(M),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class ka{constructor(u={}){this._updateCompact=()=>{const m=this._container.children;if(m.length){const M=m[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&M.classList.add("maplibregl-compact"):M.classList.remove("maplibregl-compact")}},this.options=u}getDefaultPosition(){return"bottom-left"}onAdd(u){this._map=u,this._compact=this.options&&this.options.compact,this._container=z.create("div","maplibregl-ctrl");const m=z.create("a","maplibregl-ctrl-logo");return m.target="_blank",m.rel="noopener nofollow",m.href="https://maplibre.org/",m.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),m.setAttribute("rel","noopener nofollow"),this._container.appendChild(m),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){z.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Tf{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(u){const m=++this._id;return this._queue.push({callback:u,id:m,cancelled:!1}),m}remove(u){const m=this._currentlyRunning,M=m?this._queue.concat(m):this._queue;for(const O of M)if(O.id===u)return void(O.cancelled=!0)}run(u=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const m=this._currentlyRunning=this._queue;this._queue=[];for(const M of m)if(!M.cancelled&&(M.callback(u),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var ey=a.aT([{name:"a_pos3d",type:"Int16",components:3}]);class uc extends a.E{constructor(u){super(),this._lastTilesetChange=K(),this.tileManager=u,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=u._source.tileSize*2**this.deltaZoom,u.usedForTerrain=!0,u.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(u,m){this.tileManager.update(u,m),this._renderableTilesKeys=[];const M={};for(const O of Yn(u,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:m,calculateTileZoom:this.tileManager._source.calculateTileZoom}))M[O.key]=!0,this._renderableTilesKeys.push(O.key),this._tiles[O.key]||(O.terrainRttPosMatrix32f=new Float64Array(16),a.c6(O.terrainRttPosMatrix32f,0,a.a4,a.a4,0,0,1),this._tiles[O.key]=new ae(O,this.tileSize),this._lastTilesetChange=K());for(const O in this._tiles)M[O]||delete this._tiles[O]}freeRtt(u){for(const m in this._tiles){const M=this._tiles[m];(!u||M.tileID.equals(u)||M.tileID.isChildOf(u)||u.isChildOf(M.tileID))&&(M.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((u=>this.getTileByID(u)))}getTileByID(u){return this._tiles[u]}getTerrainCoords(u,m){return m?this._getTerrainCoordsForTileRanges(u,m):this._getTerrainCoordsForRegularTile(u)}_getTerrainCoordsForRegularTile(u){const m={};for(const M of this._renderableTilesKeys){const O=this._tiles[M].tileID,D=u.clone(),U=a.bj();if(O.canonical.equals(u.canonical))a.c6(U,0,a.a4,a.a4,0,0,1);else if(O.canonical.isChildOf(u.canonical)){const G=O.canonical.z-u.canonical.z,q=O.canonical.x-(O.canonical.x>>G<<G),oe=O.canonical.y-(O.canonical.y>>G<<G),le=a.a4>>G;a.c6(U,0,le,le,0,0,1),a.O(U,U,[-q*le,-oe*le,0])}else{if(!u.canonical.isChildOf(O.canonical))continue;{const G=u.canonical.z-O.canonical.z,q=u.canonical.x-(u.canonical.x>>G<<G),oe=u.canonical.y-(u.canonical.y>>G<<G),le=a.a4>>G;a.c6(U,0,a.a4,a.a4,0,0,1),a.O(U,U,[q*le,oe*le,0]),a.Q(U,U,[1/2**G,1/2**G,0])}}D.terrainRttPosMatrix32f=new Float32Array(U),m[M]=D}return m}_getTerrainCoordsForTileRanges(u,m){const M={};for(const O of this._renderableTilesKeys){const D=this._tiles[O].tileID;if(!this._isWithinTileRanges(D,m))continue;const U=u.clone(),G=a.bj();if(D.canonical.z===u.canonical.z){const q=u.canonical.x-D.canonical.x,oe=u.canonical.y-D.canonical.y;a.c6(G,0,a.a4,a.a4,0,0,1),a.O(G,G,[q*a.a4,oe*a.a4,0])}else if(D.canonical.z>u.canonical.z){const q=D.canonical.z-u.canonical.z,oe=D.canonical.x-(D.canonical.x>>q<<q),le=D.canonical.y-(D.canonical.y>>q<<q),me=u.canonical.x-(D.canonical.x>>q),pe=u.canonical.y-(D.canonical.y>>q),xe=a.a4>>q;a.c6(G,0,xe,xe,0,0,1),a.O(G,G,[-oe*xe+me*a.a4,-le*xe+pe*a.a4,0])}else{const q=u.canonical.z-D.canonical.z,oe=u.canonical.x-(u.canonical.x>>q<<q),le=u.canonical.y-(u.canonical.y>>q<<q),me=(u.canonical.x>>q)-D.canonical.x,pe=(u.canonical.y>>q)-D.canonical.y,xe=a.a4<<q;a.c6(G,0,xe,xe,0,0,1),a.O(G,G,[oe*a.a4+me*xe,le*a.a4+pe*xe,0])}U.terrainRttPosMatrix32f=new Float32Array(G),M[O]=U}return M}getSourceTile(u,m){const M=this.tileManager._source;let O=u.overscaledZ-this.deltaZoom;if(O>M.maxzoom&&(O=M.maxzoom),O<M.minzoom)return null;this._sourceTileCache[u.key]||(this._sourceTileCache[u.key]=u.scaledTo(O).key);let D=this.tileManager.getTileByID(this._sourceTileCache[u.key]);if((!D||!D.dem)&&m)for(;O>=M.minzoom&&(!D||!D.dem);)D=this.tileManager.getTileByID(u.scaledTo(O--).key);return D}anyTilesAfterTime(u=Date.now()){return this._lastTilesetChange>=u}_isWithinTileRanges(u,m){return m[u.canonical.z]&&u.canonical.x>=m[u.canonical.z].minTileX&&u.canonical.x<=m[u.canonical.z].maxTileX&&u.canonical.y>=m[u.canonical.z].minTileY&&u.canonical.y<=m[u.canonical.z].maxTileY}}class lu{constructor(u,m,M){this._meshCache={},this.painter=u,this.tileManager=new uc(m),this.options=M,this.exaggeration=typeof M.exaggeration=="number"?M.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(u,m,M,O=a.a4){var D;if(!(m>=0&&m<O&&M>=0&&M<O))return 0;const U=this.getTerrainData(u),G=(D=U.tile)===null||D===void 0?void 0:D.dem;if(!G)return 0;const q=a.cB([],[m/O*a.a4,M/O*a.a4],U.u_terrain_matrix),oe=[q[0]*G.dim,q[1]*G.dim],le=Math.floor(oe[0]),me=Math.floor(oe[1]),pe=oe[0]-le,xe=oe[1]-me;return G.get(le,me)*(1-pe)*(1-xe)+G.get(le+1,me)*pe*(1-xe)+G.get(le,me+1)*(1-pe)*xe+G.get(le+1,me+1)*pe*xe}getElevationForLngLatZoom(u,m){if(!a.cC(m,u.wrap()))return 0;const{tileID:M,mercatorX:O,mercatorY:D}=this._getOverscaledTileIDFromLngLatZoom(u,m);return this.getElevation(M,O%a.a4,D%a.a4,a.a4)}getElevation(u,m,M,O=a.a4){return this.getDEMElevation(u,m,M,O)*this.exaggeration}getTerrainData(u){if(!this._emptyDemTexture){const O=this.painter.context,D=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new a.T(O,D,O.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new a.T(O,new a.R({width:1,height:1}),O.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(O.gl.NEAREST,O.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.ar([])}const m=this.tileManager.getSourceTile(u,!0);if(m&&m.dem&&(!m.demTexture||m.needsTerrainPrepare)){const O=this.painter.context;m.demTexture=this.painter.getTileTexture(m.dem.stride),m.demTexture?m.demTexture.update(m.dem.getPixels(),{premultiply:!1}):m.demTexture=new a.T(O,m.dem.getPixels(),O.gl.RGBA,{premultiply:!1}),m.demTexture.bind(O.gl.NEAREST,O.gl.CLAMP_TO_EDGE),m.needsTerrainPrepare=!1}const M=m&&m+m.tileID.key+u.key;if(M&&!this._demMatrixCache[M]){const O=this.tileManager.getSource().maxzoom;let D=u.canonical.z-m.tileID.canonical.z;u.overscaledZ>u.canonical.z&&(u.canonical.z>=O?D=u.canonical.z-O:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const U=u.canonical.x-(u.canonical.x>>D<<D),G=u.canonical.y-(u.canonical.y>>D<<D),q=a.cD(new Float64Array(16),[1/(a.a4<<D),1/(a.a4<<D),0]);a.O(q,q,[U*a.a4,G*a.a4,0]),this._demMatrixCache[u.key]={matrix:q,coord:u}}return{u_depth:2,u_terrain:3,u_terrain_dim:m&&m.dem&&m.dem.dim||1,u_terrain_matrix:M?this._demMatrixCache[u.key].matrix:this._emptyDemMatrix,u_terrain_unpack:m&&m.dem&&m.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(m&&m.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:m}}getFramebuffer(u){const m=this.painter,M=m.width/devicePixelRatio,O=m.height/devicePixelRatio;return!this._fbo||this._fbo.width===M&&this._fbo.height===O||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new a.T(m.context,{width:M,height:O,data:null},m.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(m.context.gl.NEAREST,m.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new a.T(m.context,{width:M,height:O,data:null},m.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(m.context.gl.NEAREST,m.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=m.context.createFramebuffer(M,O,!0,!1),this._fbo.depthAttachment.set(m.context.createRenderbuffer(m.context.gl.DEPTH_COMPONENT16,M,O))),this._fbo.colorAttachment.set(u==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const u=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const m=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let D=0,U=0;D<this._coordsTextureSize;D++)for(let G=0;G<this._coordsTextureSize;G++,U+=4)m[U+0]=255&G,m[U+1]=255&D,m[U+2]=G>>8<<4|D>>8,m[U+3]=0;const M=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(m.buffer)),O=new a.T(u,M,u.gl.RGBA,{premultiply:!1});return O.bind(u.gl.NEAREST,u.gl.CLAMP_TO_EDGE),this._coordsTexture=O,O}pointCoordinate(u){this.painter.maybeDrawDepthAndCoords(!0);const m=new Uint8Array(4),M=this.painter.context,O=M.gl,D=Math.round(u.x*this.painter.pixelRatio/devicePixelRatio),U=Math.round(u.y*this.painter.pixelRatio/devicePixelRatio),G=Math.round(this.painter.height/devicePixelRatio);M.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),O.readPixels(D,G-U-1,1,1,O.RGBA,O.UNSIGNED_BYTE,m),M.bindFramebuffer.set(null);const q=m[0]+(m[2]>>4<<8),oe=m[1]+((15&m[2])<<8),le=this.coordsIndex[255-m[3]],me=le&&this.tileManager.getTileByID(le);if(!me)return null;const pe=this._coordsTextureSize,xe=(1<<me.tileID.canonical.z)*pe;return new a.aa((me.tileID.canonical.x*pe+q)/xe+me.tileID.wrap,(me.tileID.canonical.y*pe+oe)/xe,this.getElevation(me.tileID,q,oe,pe))}depthAtPoint(u){const m=new Uint8Array(4),M=this.painter.context,O=M.gl;return M.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),O.readPixels(u.x,this.painter.height/devicePixelRatio-u.y-1,1,1,O.RGBA,O.UNSIGNED_BYTE,m),M.bindFramebuffer.set(null),(m[0]/16777216+m[1]/65536+m[2]/256+m[3])/256}getTerrainMesh(u){var m;const M=((m=this.painter.style.projection)===null||m===void 0?void 0:m.transitionState)>0,O=M&&u.canonical.y===0,D=M&&u.canonical.y===(1<<u.canonical.z)-1,U=`m_${O?"n":""}_${D?"s":""}`;if(this._meshCache[U])return this._meshCache[U];const G=this.painter.context,q=new a.cE,oe=new a.aX,le=this.meshSize,me=a.a4/le,pe=le*le;for(let it=0;it<=le;it++)for(let Ct=0;Ct<=le;Ct++)q.emplaceBack(Ct*me,it*me,0);for(let it=0;it<pe;it+=le+1)for(let Ct=0;Ct<le;Ct++)oe.emplaceBack(Ct+it,le+Ct+it+1,le+Ct+it+2),oe.emplaceBack(Ct+it,le+Ct+it+2,Ct+it+1);const xe=q.length,Le=xe+(le+1),Ve=(le+1)*le,He=O?a.bq:0,Ze=O?0:1,et=D?a.br:a.a4,lt=D?0:1;for(let it=0;it<=le;it++)q.emplaceBack(it*me,He,Ze);for(let it=0;it<=le;it++)q.emplaceBack(it*me,et,lt);for(let it=0;it<le;it++)oe.emplaceBack(Ve+it,Le+it,Le+it+1),oe.emplaceBack(Ve+it,Le+it+1,Ve+it+1),oe.emplaceBack(0+it,xe+it+1,xe+it),oe.emplaceBack(0+it,0+it+1,xe+it+1);const Je=q.length,At=Je+2*(le+1);for(const it of[0,1])for(let Ct=0;Ct<=le;Ct++)for(const Nt of[0,1])q.emplaceBack(it*a.a4,Ct*me,Nt);for(let it=0;it<2*le;it+=2)oe.emplaceBack(Je+it,Je+it+1,Je+it+3),oe.emplaceBack(Je+it,Je+it+3,Je+it+2),oe.emplaceBack(At+it,At+it+3,At+it+1),oe.emplaceBack(At+it,At+it+2,At+it+3);const pt=new Vr(G.createVertexBuffer(q,ey.members),G.createIndexBuffer(oe),a.aW.simpleSegment(0,0,q.length,oe.length));return this._meshCache[U]=pt,pt}getMeshFrameDelta(u){return 2*Math.PI*a.bD/Math.pow(2,Math.max(u,0))/5}getMinTileElevationForLngLatZoom(u,m){var M;const{tileID:O}=this._getOverscaledTileIDFromLngLatZoom(u,m);return(M=this.getMinMaxElevation(O).minElevation)!==null&&M!==void 0?M:0}getMinMaxElevation(u){const m=this.getTerrainData(u).tile,M={minElevation:null,maxElevation:null};return m&&m.dem&&(M.minElevation=m.dem.min*this.exaggeration,M.maxElevation=m.dem.max*this.exaggeration),M}_getOverscaledTileIDFromLngLatZoom(u,m){const M=a.aa.fromLngLat(u.wrap()),O=(1<<m)*a.a4,D=M.x*O,U=M.y*O,G=Math.floor(D/a.a4),q=Math.floor(U/a.a4);return{tileID:new a.a1(m,0,m,G,q),mercatorX:D,mercatorY:U}}}class hs{constructor(u,m,M){this._context=u,this._size=m,this._tileSize=M,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const u of this._objects)u.texture.destroy(),u.fbo.destroy()}_createObject(u){const m=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),M=new a.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return M.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),m.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),m.colorAttachment.set(M.texture),{id:u,fbo:m,texture:M,stamp:-1,inUse:!1}}getObjectForId(u){return this._objects[u]}useObject(u){u.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((m=>u.id!==m)),this._recentlyUsed.push(u.id)}stampObject(u){u.stamp=++this._stamp}getOrCreateFreeObject(){for(const m of this._recentlyUsed)if(!this._objects[m].inUse)return this._objects[m];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const u=this._createObject(this._objects.length);return this._objects.push(u),u}freeObject(u){u.inUse=!1}freeAllObjects(){for(const u of this._objects)this.freeObject(u)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((u=>!u.inUse))===!1}}const lo={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Hr{constructor(u,m){this.painter=u,this.terrain=m,this.pool=new hs(u.context,30,m.tileManager.tileSize*m.qualityFactor)}destruct(){this.pool.destruct()}getTexture(u){return this.pool.getObjectForId(u.rtt[this._stacks.length-1].id).texture}prepareForRender(u,m){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=u._order.filter((M=>!u._layers[M].isHidden(m))),this._coordsAscending={};for(const M in u.tileManagers){this._coordsAscending[M]={};const O=u.tileManagers[M].getVisibleCoordinates(),D=u.tileManagers[M].getSource(),U=D instanceof En?D.terrainTileRanges:null;for(const G of O){const q=this.terrain.tileManager.getTerrainCoords(G,U);for(const oe in q)this._coordsAscending[M][oe]||(this._coordsAscending[M][oe]=[]),this._coordsAscending[M][oe].push(q[oe])}}this._coordsAscendingStr={};for(const M of u._order){const O=u._layers[M],D=O.source;if(lo[O.type]&&!this._coordsAscendingStr[D]){this._coordsAscendingStr[D]={};for(const U in this._coordsAscending[D])this._coordsAscendingStr[D][U]=this._coordsAscending[D][U].map((G=>G.key)).sort().join()}}for(const M of this._renderableTiles)for(const O in this._coordsAscendingStr){const D=this._coordsAscendingStr[O][M.tileID.key];D&&D!==M.rttCoords[O]&&(M.rtt=[])}}renderLayer(u,m){if(u.isHidden(this.painter.transform.zoom))return!1;const M=Object.assign(Object.assign({},m),{isRenderingToTexture:!0}),O=u.type,D=this.painter,U=this._renderableLayerIds[this._renderableLayerIds.length-1]===u.id;if(lo[O]&&(this._prevType&&lo[this._prevType]||this._stacks.push([]),this._prevType=O,this._stacks[this._stacks.length-1].push(u.id),!U))return!0;if(lo[this._prevType]||lo[O]&&U){this._prevType=O;const G=this._stacks.length-1,q=this._stacks[G]||[];for(const oe of this._renderableTiles){if(this.pool.isFull()&&(pA(this.painter,this.terrain,this._rttTiles,M),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(oe),oe.rtt[G]){const me=this.pool.getObjectForId(oe.rtt[G].id);if(me.stamp===oe.rtt[G].stamp){this.pool.useObject(me);continue}}const le=this.pool.getOrCreateFreeObject();this.pool.useObject(le),this.pool.stampObject(le),oe.rtt[G]={id:le.id,stamp:le.stamp},D.context.bindFramebuffer.set(le.fbo.framebuffer),D.context.clear({color:a.bo.transparent,stencil:0}),D.currentStencilSource=void 0;for(let me=0;me<q.length;me++){const pe=D.style._layers[q[me]],xe=pe.source?this._coordsAscending[pe.source][oe.tileID.key]:[oe.tileID];D.context.viewport.set([0,0,le.fbo.width,le.fbo.height]),D._renderTileClippingMasks(pe,xe,!0),D.renderLayer(D,D.style.tileManagers[pe.source],pe,xe,M),pe.source&&(oe.rttCoords[pe.source]=this._coordsAscendingStr[pe.source][oe.tileID.key])}}return pA(this.painter,this.terrain,this._rttTiles,M),this._rttTiles=[],this.pool.freeAllObjects(),lo[O]}return!1}}const ar={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},uo=c,ns={hash:!1,interactive:!0,bearingSnap:7,attributionControl:nl,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},Ud={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Nh{constructor(u,m,M=!1){this.mousedown=D=>{this.startMove(D,z.mousePos(this.element,D)),z.addEventListener(window,"mousemove",this.mousemove),z.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=D=>{this.move(D,z.mousePos(this.element,D))},this.mouseup=D=>{this._rotatePitchHandler.dragEnd(D),this.offTemp()},this.touchstart=D=>{D.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=z.touchPos(this.element,D.targetTouches)[0],this.startMove(D,this._startPos),z.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),z.addEventListener(window,"touchend",this.touchend))},this.touchmove=D=>{D.targetTouches.length!==1?this.reset():(this._lastPos=z.touchPos(this.element,D.targetTouches)[0],this.move(D,this._lastPos))},this.touchend=D=>{D.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=m;const O=new Kc;this._rotatePitchHandler=new Uc({clickTolerance:3,move:(D,U)=>{const G=m.getBoundingClientRect(),q=new a.P((G.bottom-G.top)/2,(G.right-G.left)/2);return{bearingDelta:a.cw(new a.P(D.x,U.y),U,q),pitchDelta:M?-.5*(U.y-D.y):void 0}},moveStateManager:O,enable:!0,assignEvents:()=>{}}),this.map=u,z.addEventListener(m,"mousedown",this.mousedown),z.addEventListener(m,"touchstart",this.touchstart,{passive:!1}),z.addEventListener(m,"touchcancel",this.reset)}startMove(u,m){this._rotatePitchHandler.dragStart(u,m),z.disableDrag()}move(u,m){const M=this.map,{bearingDelta:O,pitchDelta:D}=this._rotatePitchHandler.dragMove(u,m)||{};O&&M.setBearing(M.getBearing()+O),D&&M.setPitch(M.getPitch()+D)}off(){const u=this.element;z.removeEventListener(u,"mousedown",this.mousedown),z.removeEventListener(u,"touchstart",this.touchstart,{passive:!1}),z.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),z.removeEventListener(window,"touchend",this.touchend),z.removeEventListener(u,"touchcancel",this.reset),this.offTemp()}offTemp(){z.enableDrag(),z.removeEventListener(window,"mousemove",this.mousemove),z.removeEventListener(window,"mouseup",this.mouseup),z.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),z.removeEventListener(window,"touchend",this.touchend)}}let zl;function ah(T,u,m,M=!1){if(M||!m.getCoveringTilesDetailsProvider().allowWorldCopies())return T?.wrap();const O=new a.V(T.lng,T.lat);if(T=new a.V(T.lng,T.lat),u){const D=new a.V(T.lng-360,T.lat),U=new a.V(T.lng+360,T.lat),G=m.locationToScreenPoint(T).distSqr(u);m.locationToScreenPoint(D).distSqr(u)<G?T=D:m.locationToScreenPoint(U).distSqr(u)<G&&(T=U)}for(;Math.abs(T.lng-m.center.lng)>180;){const D=m.locationToScreenPoint(T);if(D.x>=0&&D.y>=0&&D.x<=m.width&&D.y<=m.height)break;T.lng>m.center.lng?T.lng-=360:T.lng+=360}return T.lng!==O.lng&&m.isPointOnMapSurface(m.locationToScreenPoint(T))?T:O}const CA={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Fc(T,u,m){const M=T.classList;for(const O in CA)M.remove(`maplibregl-${m}-anchor-${O}`);M.add(`maplibregl-${m}-anchor-${u}`)}class Kp extends a.E{constructor(u){if(super(),this._onKeyPress=m=>{const M=m.code,O=m.charCode||m.keyCode;M!=="Space"&&M!=="Enter"&&O!==32&&O!==13||this.togglePopup()},this._onMapClick=m=>{const M=m.originalEvent.target,O=this._element;this._popup&&(M===O||O.contains(M))&&this.togglePopup()},this._update=m=>{if(!this._map)return;const M=this._map.loaded()&&!this._map.isMoving();(m?.type==="terrain"||m?.type==="render"&&!M)&&this._map.once("render",this._update),this._lngLat=ah(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let O="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?O=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(O=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let D="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?D="rotateX(0deg)":this._pitchAlignment==="map"&&(D=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||m&&m.type!=="moveend"||(this._pos=this._pos.round()),z.setTransform(this._element,`${CA[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${D} ${O}`),I.frameAsync(new AbortController).then((()=>{this._updateOpacity(m&&m.type==="moveend")})).catch((()=>{}))},this._onMove=m=>{if(!this._isDragging){const M=this._clickTolerance||this._map._clickTolerance;this._isDragging=m.point.dist(this._pointerdownPos)>=M}this._isDragging&&(this._pos=m.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=m=>{this._element.contains(m.originalEvent.target)&&(m.preventDefault(),this._positionDelta=m.point.sub(this._pos).add(this._offset),this._pointerdownPos=m.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._subpixelPositioning=u&&u.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment!=="auto"?u.pitchAlignment:this._rotationAlignment,this.setOpacity(u?.opacity,u?.opacityWhenCovered),u&&u.element)this._element=u.element,this._offset=a.P.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=z.create("div");const m=z.createNS("http://www.w3.org/2000/svg","svg"),M=41,O=27;m.setAttributeNS(null,"display","block"),m.setAttributeNS(null,"height",`${M}px`),m.setAttributeNS(null,"width",`${O}px`),m.setAttributeNS(null,"viewBox",`0 0 ${O} ${M}`);const D=z.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"stroke","none"),D.setAttributeNS(null,"stroke-width","1"),D.setAttributeNS(null,"fill","none"),D.setAttributeNS(null,"fill-rule","evenodd");const U=z.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"fill-rule","nonzero");const G=z.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"transform","translate(3.0, 29.0)"),G.setAttributeNS(null,"fill","#000000");const q=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ze of q){const et=z.createNS("http://www.w3.org/2000/svg","ellipse");et.setAttributeNS(null,"opacity","0.04"),et.setAttributeNS(null,"cx","10.5"),et.setAttributeNS(null,"cy","5.80029008"),et.setAttributeNS(null,"rx",Ze.rx),et.setAttributeNS(null,"ry",Ze.ry),G.appendChild(et)}const oe=z.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"fill",this._color);const le=z.createNS("http://www.w3.org/2000/svg","path");le.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),oe.appendChild(le);const me=z.createNS("http://www.w3.org/2000/svg","g");me.setAttributeNS(null,"opacity","0.25"),me.setAttributeNS(null,"fill","#000000");const pe=z.createNS("http://www.w3.org/2000/svg","path");pe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),me.appendChild(pe);const xe=z.createNS("http://www.w3.org/2000/svg","g");xe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),xe.setAttributeNS(null,"fill","#FFFFFF");const Le=z.createNS("http://www.w3.org/2000/svg","g");Le.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ve=z.createNS("http://www.w3.org/2000/svg","circle");Ve.setAttributeNS(null,"fill","#000000"),Ve.setAttributeNS(null,"opacity","0.25"),Ve.setAttributeNS(null,"cx","5.5"),Ve.setAttributeNS(null,"cy","5.5"),Ve.setAttributeNS(null,"r","5.4999962");const He=z.createNS("http://www.w3.org/2000/svg","circle");He.setAttributeNS(null,"fill","#FFFFFF"),He.setAttributeNS(null,"cx","5.5"),He.setAttributeNS(null,"cy","5.5"),He.setAttributeNS(null,"r","5.4999962"),Le.appendChild(Ve),Le.appendChild(He),U.appendChild(G),U.appendChild(oe),U.appendChild(me),U.appendChild(xe),U.appendChild(Le),m.appendChild(U),m.setAttributeNS(null,"height",M*this._scale+"px"),m.setAttributeNS(null,"width",O*this._scale+"px"),this._element.appendChild(m),this._offset=a.P.convert(u&&u.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(m=>{m.preventDefault()})),this._element.addEventListener("mousedown",(m=>{m.preventDefault()})),Fc(this._element,this._anchor,"marker"),u&&u.className)for(const m of u.className.split(" "))this._element.classList.add(m);this._popup=null}addTo(u){return this.remove(),this._map=u,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",u._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),u.getCanvasContainer().appendChild(this._element),u.on("move",this._update),u.on("moveend",this._update),u.on("terrain",this._update),u.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),z.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(u){return this._lngLat=a.V.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){const O=Math.abs(13.5)/Math.SQRT2;u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[O,-1*(38.1-13.5+O)],"bottom-right":[-O,-1*(38.1-13.5+O)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=u,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(u){return this._subpixelPositioning=u,this}getPopup(){return this._popup}togglePopup(){const u=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:u?(u.isOpen()?u.remove():(u.setLngLat(this._lngLat),u.addTo(this._map)),this):this}_updateOpacity(u=!1){var m,M;const O=(m=this._map)===null||m===void 0?void 0:m.terrain,D=this._map.transform.isLocationOccluded(this._lngLat);if(!O||D){const xe=D?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==xe&&(this._element.style.opacity=xe))}if(u)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const U=this._map,G=U.terrain.depthAtPoint(this._pos),q=U.terrain.getElevationForLngLatZoom(this._lngLat,U.transform.tileZoom);if(U.transform.lngLatToCameraDepth(this._lngLat,q)-G<.006)return void(this._element.style.opacity=this._opacity);const oe=-this._offset.y/U.transform.pixelsPerMeter,le=Math.sin(U.getPitch()*Math.PI/180)*oe,me=U.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),pe=U.transform.lngLatToCameraDepth(this._lngLat,q+le)-me>.006;!((M=this._popup)===null||M===void 0)&&M.isOpen()&&pe&&this._popup.remove(),this._element.style.opacity=pe?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(u){return this._offset=a.P.convert(u),this._update(),this}addClassName(u){this._element.classList.add(u)}removeClassName(u){this._element.classList.remove(u)}toggleClassName(u){return this._element.classList.toggle(u)}setDraggable(u){return this._draggable=!!u,this._map&&(u?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(u){return this._rotation=u||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(u){return this._rotationAlignment=u||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(u){return this._pitchAlignment=u&&u!=="auto"?u:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(u,m){return(this._opacity===void 0||u===void 0&&m===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),u!==void 0&&(this._opacity=u),m!==void 0&&(this._opacityWhenCovered=m),this._map&&this._updateOpacity(!0),this}}const is={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let lh=0,_A=!1;const Fp={maxWidth:100,unit:"metric"};function Gh(T,u,m){const M=m&&m.maxWidth||100,O=T._container.clientHeight/2,D=T._container.clientWidth/2,U=T.unproject([D-M/2,O]),G=T.unproject([D+M/2,O]),q=Math.round(T.project(G).x-T.project(U).x),oe=Math.min(M,q,T._container.clientWidth),le=U.distanceTo(G);if(m&&m.unit==="imperial"){const me=3.2808*le;me>5280?Kd(u,oe,me/5280,T._getUIString("ScaleControl.Miles")):Kd(u,oe,me,T._getUIString("ScaleControl.Feet"))}else m&&m.unit==="nautical"?Kd(u,oe,le/1852,T._getUIString("ScaleControl.NauticalMiles")):le>=1e3?Kd(u,oe,le/1e3,T._getUIString("ScaleControl.Kilometers")):Kd(u,oe,le,T._getUIString("ScaleControl.Meters"))}function Kd(T,u,m,M){const O=(function(D){const U=Math.pow(10,`${Math.floor(D)}`.length-1);let G=D/U;return G=G>=10?10:G>=5?5:G>=3?3:G>=2?2:G>=1?1:(function(q){const oe=Math.pow(10,Math.ceil(-Math.log(q)/Math.LN10));return Math.round(q*oe)/oe})(G),U*G})(m);T.style.width=u*(O/m)+"px",T.innerHTML=`${O}&nbsp;${M}`}const Fd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},kf=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Df(T){if(T){if(typeof T=="number"){const u=Math.round(Math.abs(T)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,T),"top-left":new a.P(u,u),"top-right":new a.P(-u,u),bottom:new a.P(0,-T),"bottom-left":new a.P(u,-u),"bottom-right":new a.P(-u,-u),left:new a.P(T,0),right:new a.P(-T,0)}}if(T instanceof a.P||Array.isArray(T)){const u=a.P.convert(T);return{center:u,top:u,"top-left":u,"top-right":u,bottom:u,"bottom-left":u,"bottom-right":u,left:u,right:u}}return{center:a.P.convert(T.center||[0,0]),top:a.P.convert(T.top||[0,0]),"top-left":a.P.convert(T["top-left"]||[0,0]),"top-right":a.P.convert(T["top-right"]||[0,0]),bottom:a.P.convert(T.bottom||[0,0]),"bottom-left":a.P.convert(T["bottom-left"]||[0,0]),"bottom-right":a.P.convert(T["bottom-right"]||[0,0]),left:a.P.convert(T.left||[0,0]),right:a.P.convert(T.right||[0,0])}}return Df(new a.P(0,0))}const Da=c;s.AJAXError=a.cI,s.Event=a.l,s.Evented=a.E,s.LngLat=a.V,s.MercatorCoordinate=a.aa,s.Point=a.P,s.addProtocol=a.cJ,s.config=a.a,s.removeProtocol=a.cK,s.AttributionControl=Qo,s.BoxZoomHandler=Du,s.CanvasSource=be,s.CooperativeGesturesHandler=au,s.DoubleClickZoomHandler=oh,s.DragPanHandler=sh,s.DragRotateHandler=jh,s.EdgeInsets=gr,s.FullscreenControl=class extends a.E{constructor(T={}){super(),this._onFullscreenChange=()=>{var u;let m=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((u=m?.shadowRoot)===null||u===void 0)&&u.fullscreenElement;)m=m.shadowRoot.fullscreenElement;m===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,T&&T.container&&(T.container instanceof HTMLElement?this._container=T.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(T){return this._map=T,this._container||(this._container=this._map.getContainer()),this._controlContainer=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){z.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const T=this._fullscreenButton=z.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);z.create("span","maplibregl-ctrl-icon",T).setAttribute("aria-hidden","true"),T.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const T=this._getTitle();this._fullscreenButton.setAttribute("aria-label",T),this._fullscreenButton.title=T}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},s.GeoJSONSource=qn,s.GeolocateControl=class extends a.E{constructor(T){super(),this._onSuccess=u=>{if(this._map){if(this._isOutOfMapMaxBounds(u))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",u)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=u,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(u),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(u),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",u)),this._finish()}},this._updateCamera=u=>{const m=new a.V(u.coords.longitude,u.coords.latitude),M=u.coords.accuracy,O=this._map.getBearing(),D=a.e({bearing:O},this.options.fitBoundsOptions),U=Zt.fromLngLat(m,M);this._map.fitBounds(U,D,{geolocateSource:!0})},this._updateMarker=u=>{if(u){const m=new a.V(u.coords.longitude,u.coords.latitude);this._accuracyCircleMarker.setLngLat(m).addTo(this._map),this._userLocationDotMarker.setLngLat(m).addTo(this._map),this._accuracy=u.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=u=>{if(this._map){if(u.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(u.code===3&&_A)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",u)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(u=>u.preventDefault())),this._geolocateButton=z.create("button","maplibregl-ctrl-geolocate",this._container),z.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=u=>{if(this._map){if(u===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}else{const m=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=z.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Kp({element:this._dotElement}),this._circleElement=z.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Kp({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(m=>{const M=m?.[0]instanceof ResizeObserverEntry;m.geolocateSource||this._watchState!=="ACTIVE_LOCK"||M||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))}))}},this.options=a.e({},is,T)}onAdd(T){return this._map=T,this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return a._(this,arguments,void 0,(function*(u=!1){if(zl!==void 0&&!u)return zl;if(window.navigator.permissions===void 0)return zl=!!window.navigator.geolocation,zl;try{zl=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{zl=!!window.navigator.geolocation}return zl}))})().then((u=>this._finishSetupUI(u))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),z.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,lh=0,_A=!1}_isOutOfMapMaxBounds(T){const u=this._map.getMaxBounds(),m=T.coords;return u&&(m.longitude<u.getWest()||m.longitude>u.getEast()||m.latitude<u.getSouth()||m.latitude>u.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const T=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&T))return;const u=this._map.project(T),m=this._map.unproject([u.x+100,u.y]),M=T.distanceTo(m)/100,O=2*this._accuracy/M;this._circleElement.style.width=`${O.toFixed(2)}px`,this._circleElement.style.height=`${O.toFixed(2)}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":lh--,_A=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let T;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),lh++,lh>1?(T={maximumAge:6e5,timeout:0},_A=!0):(T=this.options.positionOptions,_A=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,T)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},s.GlobeControl=class{constructor(){this._toggleProjection=()=>{var T;const u=(T=this._map.getProjection())===null||T===void 0?void 0:T.type;this._map.setProjection(u!=="mercator"&&u?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var T;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((T=this._map.getProjection())===null||T===void 0?void 0:T.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(T){return this._map=T,this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=z.create("button","maplibregl-ctrl-globe",this._container),z.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){z.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},s.Hash=Ia,s.ImageSource=En,s.KeyboardHandler=Ru,s.LngLatBounds=Zt,s.LogoControl=ka,s.Map=class extends If{constructor(T){var u,m;a.cF.mark(a.cG.create);const M=Object.assign(Object.assign(Object.assign({},ns),T),{canvasContextAttributes:Object.assign(Object.assign({},ns.canvasContextAttributes),T.canvasContextAttributes)});if(M.minZoom!=null&&M.maxZoom!=null&&M.minZoom>M.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(M.minPitch!=null&&M.maxPitch!=null&&M.minPitch>M.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(M.minPitch!=null&&M.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(M.maxPitch!=null&&M.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const O=new Rr,D=new ge;if(M.minZoom!==void 0&&O.setMinZoom(M.minZoom),M.maxZoom!==void 0&&O.setMaxZoom(M.maxZoom),M.minPitch!==void 0&&O.setMinPitch(M.minPitch),M.maxPitch!==void 0&&O.setMaxPitch(M.maxPitch),M.renderWorldCopies!==void 0&&O.setRenderWorldCopies(M.renderWorldCopies),M.transformConstrain!==null&&O.setConstrainOverride(M.transformConstrain),super(O,D,{bearingSnap:M.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Tf,this._controls=[],this._mapId=a.ag(),this._lostContextStyle={style:null,images:null},this._contextLost=G=>{G.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy();for(const q of Object.values(this.style._layers))if(q.type==="custom"&&console.warn(`Custom layer with id '${q.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),q._listeners)for(const[oe]of Object.entries(q._listeners))console.warn(`Custom layer with id '${q.id}' had event listeners for event '${oe}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this._lostContextStyle=this._getStyleAndImages(),this.style.destroy(),this.style=null,this.fire(new a.l("webglcontextlost",{originalEvent:G}))},this._contextRestored=G=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:G}))},this._onMapScroll=G=>{if(G.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=M.interactive,this._maxTileCacheSize=M.maxTileCacheSize,this._maxTileCacheZoomLevels=M.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},M.canvasContextAttributes),this._trackResize=M.trackResize===!0,this._bearingSnap=M.bearingSnap,this._centerClampedToGround=M.centerClampedToGround,this._refreshExpiredTiles=M.refreshExpiredTiles===!0,this._fadeDuration=M.fadeDuration,this._crossSourceCollisions=M.crossSourceCollisions===!0,this._collectResourceTiming=M.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},ar),M.locale),this._clickTolerance=M.clickTolerance,this._overridePixelRatio=M.pixelRatio,this._maxCanvasSize=M.maxCanvasSize,this._zoomLevelsToOverscale=M.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=M.transformCameraUpdate,this.transformConstrain=M.transformConstrain,this.cancelPendingTileRequestsWhileZooming=M.cancelPendingTileRequestsWhileZooming===!0,M.reduceMotion!==void 0&&(I.prefersReducedMotion=M.reduceMotion),this._imageQueueHandle=W.addThrottleControl((()=>this.isMoving())),this._requestManager=new se(M.transformRequest),typeof M.container=="string"){if(this._container=document.getElementById(M.container),!this._container)throw new Error(`Container '${M.container}' not found.`)}else{if(!(M.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=M.container}if(M.maxBounds&&this.setMaxBounds(M.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let G=!1;const q=ih((oe=>{this._trackResize&&!this._removed&&(this.resize(oe),this.redraw())}),50);this._resizeObserver=new ResizeObserver((oe=>{G?q(oe):G=!0})),this._resizeObserver.observe(this._container)}this.handlers=new sa(this,M),this._hash=M.hash&&new Ia(typeof M.hash=="string"&&M.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:M.center,elevation:M.elevation,zoom:M.zoom,bearing:M.bearing,pitch:M.pitch,roll:M.roll}),M.bounds&&(this.resize(),this.fitBounds(M.bounds,a.e({},M.fitBoundsOptions,{duration:0}))));const U=typeof M.style=="string"||((m=(u=M.style)===null||u===void 0?void 0:u.projection)===null||m===void 0?void 0:m.type)!=="globe";this.resize(null,U),this._localIdeographFontFamily=M.localIdeographFontFamily,this._validateStyle=M.validateStyle,M.style&&this.setStyle(M.style,{localIdeographFontFamily:M.localIdeographFontFamily}),M.attributionControl&&this.addControl(new Qo(typeof M.attributionControl=="boolean"?void 0:M.attributionControl)),M.maplibreLogo&&this.addControl(new ka,M.logoPosition),this.on("style.load",(()=>{if(U||this._resizeTransform(),this.transform.unmodified){const G=a.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(G)}})),this.on("data",(G=>{this._update(G.dataType==="style"),this.fire(new a.l(`${G.dataType}data`,G))})),this.on("dataloading",(G=>{this.fire(new a.l(`${G.dataType}dataloading`,G))})),this.on("dataabort",(G=>{this.fire(new a.l("sourcedataabort",G))}))}_getMapId(){return this._mapId}setGlobalStateProperty(T,u){return this.style.setGlobalStateProperty(T,u),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(T,u){if(u===void 0&&(u=T.getDefaultPosition?T.getDefaultPosition():"top-right"),!T||!T.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const m=T.onAdd(this);this._controls.push(T);const M=this._controlPositions[u];return u.indexOf("bottom")!==-1?M.insertBefore(m,M.firstChild):M.appendChild(m),this}removeControl(T){if(!T||!T.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const u=this._controls.indexOf(T);return u>-1&&this._controls.splice(u,1),T.onRemove(this),this}hasControl(T){return this._controls.indexOf(T)>-1}coveringTiles(T){return Yn(this.transform,T)}calculateCameraOptionsFromTo(T,u,m,M){return M==null&&this.terrain&&(M=this.terrain.getElevationForLngLatZoom(m,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(T,u,m,M)}resize(T,u=!0){const[m,M]=this._containerDimensions(),O=this._getClampedPixelRatio(m,M);if(this._resizeCanvas(m,M,O),this.painter.resize(m,M,O),this.painter.overLimit()){const U=this.painter.context.gl;this._maxCanvasSize=[U.drawingBufferWidth,U.drawingBufferHeight];const G=this._getClampedPixelRatio(m,M);this._resizeCanvas(m,M,G),this.painter.resize(m,M,G)}this._resizeTransform(u);const D=!this._moving;return D&&(this.stop(),this.fire(new a.l("movestart",T)).fire(new a.l("move",T))),this.fire(new a.l("resize",T)),D&&this.fire(new a.l("moveend",T)),this}_resizeTransform(T=!0){var u;const[m,M]=this._containerDimensions();this.transform.resize(m,M,T),(u=this._requestedCameraState)===null||u===void 0||u.resize(m,M,T)}_getClampedPixelRatio(T,u){const{0:m,1:M}=this._maxCanvasSize,O=this.getPixelRatio(),D=T*O,U=u*O;return Math.min(D>m?m/D:1,U>M?M/U:1)*O}getPixelRatio(){var T;return(T=this._overridePixelRatio)!==null&&T!==void 0?T:devicePixelRatio}setPixelRatio(T){this._overridePixelRatio=T,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(T){return this.transform.setMaxBounds(Zt.convert(T)),this._update()}setMinZoom(T){if((T=T??-2)>=-2&&T<=this.transform.maxZoom)return this.transform.setMinZoom(T),this._update(),this.getZoom()<T&&this.setZoom(T),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(T){if((T=T??22)>=this.transform.minZoom)return this.transform.setMaxZoom(T),this._update(),this.getZoom()>T&&this.setZoom(T),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(T){if((T=T??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(T>=0&&T<=this.transform.maxPitch)return this.transform.setMinPitch(T),this._update(),this.getPitch()<T&&this.setPitch(T),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(T){if((T=T??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(T>=this.transform.minPitch)return this.transform.setMaxPitch(T),this._update(),this.getPitch()>T&&this.setPitch(T),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(T){return this.transform.setRenderWorldCopies(T),this._update()}setTransformConstrain(T){return this.transform.setConstrainOverride(T),this._update()}project(T){return this.transform.locationToScreenPoint(a.V.convert(T),this.style&&this.terrain)}unproject(T){return this.transform.screenPointToLocation(a.P.convert(T),this.terrain)}isMoving(){var T;return this._moving||((T=this.handlers)===null||T===void 0?void 0:T.isMoving())}isZooming(){var T;return this._zooming||((T=this.handlers)===null||T===void 0?void 0:T.isZooming())}isRotating(){var T;return this._rotating||((T=this.handlers)===null||T===void 0?void 0:T.isRotating())}_createDelegatedListener(T,u,m){if(T==="mouseenter"||T==="mouseover"){let M=!1;return{layers:u,listener:m,delegates:{mousemove:D=>{const U=u.filter((q=>this.getLayer(q))),G=U.length!==0?this.queryRenderedFeatures(D.point,{layers:U}):[];G.length?M||(M=!0,m.call(this,new As(T,this,D.originalEvent,{features:G}))):M=!1},mouseout:()=>{M=!1}}}}if(T==="mouseleave"||T==="mouseout"){let M=!1;return{layers:u,listener:m,delegates:{mousemove:U=>{const G=u.filter((q=>this.getLayer(q)));(G.length!==0?this.queryRenderedFeatures(U.point,{layers:G}):[]).length?M=!0:M&&(M=!1,m.call(this,new As(T,this,U.originalEvent)))},mouseout:U=>{M&&(M=!1,m.call(this,new As(T,this,U.originalEvent)))}}}}{const M=O=>{const D=u.filter((G=>this.getLayer(G))),U=D.length!==0?this.queryRenderedFeatures(O.point,{layers:D}):[];U.length&&(O.features=U,m.call(this,O),delete O.features)};return{layers:u,listener:m,delegates:{[T]:M}}}}_saveDelegatedListener(T,u){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[T]=this._delegatedListeners[T]||[],this._delegatedListeners[T].push(u)}_removeDelegatedListener(T,u,m){if(!this._delegatedListeners||!this._delegatedListeners[T])return;const M=this._delegatedListeners[T];for(let O=0;O<M.length;O++){const D=M[O];if(D.listener===m&&D.layers.length===u.length&&D.layers.every((U=>u.includes(U)))){for(const U in D.delegates)this.off(U,D.delegates[U]);return void M.splice(O,1)}}}on(T,u,m){if(m===void 0)return super.on(T,u);const M=typeof u=="string"?[u]:u,O=this._createDelegatedListener(T,M,m);this._saveDelegatedListener(T,O);for(const D in O.delegates)this.on(D,O.delegates[D]);return{unsubscribe:()=>{this._removeDelegatedListener(T,M,m)}}}once(T,u,m){if(m===void 0)return super.once(T,u);const M=typeof u=="string"?[u]:u,O=this._createDelegatedListener(T,M,m);for(const D in O.delegates){const U=O.delegates[D];O.delegates[D]=(...G)=>{this._removeDelegatedListener(T,M,m),U(...G)}}this._saveDelegatedListener(T,O);for(const D in O.delegates)this.once(D,O.delegates[D]);return this}off(T,u,m){return m===void 0?super.off(T,u):(this._removeDelegatedListener(T,typeof u=="string"?[u]:u,m),this)}queryRenderedFeatures(T,u){if(!this.style)return[];let m;const M=T instanceof a.P||Array.isArray(T),O=M?T:[[0,0],[this.transform.width,this.transform.height]];if(u=u||(M?{}:T)||{},O instanceof a.P||typeof O[0]=="number")m=[a.P.convert(O)];else{const D=a.P.convert(O[0]),U=a.P.convert(O[1]);m=[D,new a.P(U.x,D.y),U,new a.P(D.x,U.y),D]}return this.style.queryRenderedFeatures(m,u,this.transform)}querySourceFeatures(T,u){return this.style.querySourceFeatures(T,u)}setStyle(T,u){return(u=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},u)).diff!==!1&&u.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&T?(this._diffStyle(T,u),this):(this._localIdeographFontFamily=u.localIdeographFontFamily,this._updateStyle(T,u))}setTransformRequest(T){return this._requestManager.setTransformRequest(T),this}_getUIString(T){const u=this._locale[T];if(u==null)throw new Error(`Missing UI string '${T}'`);return u}_updateStyle(T,u){var m,M;if(u.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(T,u)));const O=this.style&&u.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!T)),T?(this.style=new Op(this,u||{}),this.style.setEventedParent(this,{style:this.style}),typeof T=="string"?this.style.loadURL(T,u,O):this.style.loadJSON(T,u,O),this):((M=(m=this.style)===null||m===void 0?void 0:m.projection)===null||M===void 0||M.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Op(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(T,u){if(typeof T=="string"){const m=this._requestManager.transformRequest(T,"Style");a.j(m,new AbortController).then((M=>{this._updateDiff(M.data,u)})).catch((M=>{M&&this.fire(new a.k(M))}))}else typeof T=="object"&&this._updateDiff(T,u)}_updateDiff(T,u){try{this.style.setState(T,u)&&this._update(!0)}catch(m){a.w(`Unable to perform style diff: ${m.message||m.error||m}.  Rebuilding the style from scratch.`),this._updateStyle(T,u)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(T,u){return this._lazyInitEmptyStyle(),this.style.addSource(T,u),this._update(!0)}isSourceLoaded(T){const u=this.style&&this.style.tileManagers[T];if(u!==void 0)return u.loaded();this.fire(new a.k(new Error(`There is no tile manager with ID '${T}'`)))}setTerrain(T){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),T){const u=this.style.tileManagers[T.source];if(!u)throw new Error(`cannot load terrain, because there exists no source with ID: ${T.source}`);this.terrain===null&&u.reload();for(const m in this.style._layers){const M=this.style._layers[m];M.type==="hillshade"&&M.source===T.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),M.type==="color-relief"&&M.source===T.source&&a.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new lu(this.painter,u,T),this.painter.renderToTexture=new Hr(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=m=>{var M;m.dataType==="style"?this.terrain.tileManager.freeRtt():m.dataType==="source"&&m.tile&&(m.sourceId!==T.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((M=m.source)===null||M===void 0?void 0:M.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(m.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:T})),this}getTerrain(){var T,u;return(u=(T=this.terrain)===null||T===void 0?void 0:T.options)!==null&&u!==void 0?u:null}areTilesLoaded(){const T=this.style&&this.style.tileManagers;for(const u in T){const m=T[u]._tiles;for(const M in m){const O=m[M];if(O.state!=="loaded"&&O.state!=="errored")return!1}}return!0}removeSource(T){return this.style.removeSource(T),this._update(!0)}getSource(T){return this.style.getSource(T)}setSourceTileLodParams(T,u,m){if(m){const M=this.getSource(m);if(!M)throw new Error(`There is no source with ID "${m}", cannot set LOD parameters`);M.calculateTileZoom=kt(Math.max(1,T),Math.max(1,u))}else for(const M in this.style.tileManagers)this.style.tileManagers[M].getSource().calculateTileZoom=kt(Math.max(1,T),Math.max(1,u));return this._update(!0),this}refreshTiles(T,u){const m=this.style.tileManagers[T];if(!m)throw new Error(`There is no tile manager with ID "${T}", cannot refresh tile`);u===void 0?m.reload(!0):m.refreshTiles(u.map((M=>new a.ad(M.z,M.x,M.y))))}addImage(T,u,m={}){const{pixelRatio:M=1,sdf:O=!1,stretchX:D,stretchY:U,content:G,textFitWidth:q,textFitHeight:oe}=m;if(this._lazyInitEmptyStyle(),!(u instanceof HTMLImageElement||a.b(u))){if(u.width===void 0||u.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:le,height:me,data:pe}=u,xe=u;return this.style.addImage(T,{data:new a.R({width:le,height:me},new Uint8Array(pe)),pixelRatio:M,stretchX:D,stretchY:U,content:G,textFitWidth:q,textFitHeight:oe,sdf:O,version:0,userImage:xe}),xe.onAdd&&xe.onAdd(this,T),this}}{const{width:le,height:me,data:pe}=I.getImageData(u);this.style.addImage(T,{data:new a.R({width:le,height:me},pe),pixelRatio:M,stretchX:D,stretchY:U,content:G,textFitWidth:q,textFitHeight:oe,sdf:O,version:0})}}updateImage(T,u){const m=this.style.getImage(T);if(!m)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const M=u instanceof HTMLImageElement||a.b(u)?I.getImageData(u):u,{width:O,height:D,data:U}=M;if(O===void 0||D===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(O!==m.data.width||D!==m.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const G=!(u instanceof HTMLImageElement||a.b(u));return m.data.replace(U,G),this.style.updateImage(T,m),this}getImage(T){return this.style.getImage(T)}hasImage(T){return T?!!this.style.getImage(T):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(T){this.style.removeImage(T)}loadImage(T){return W.getImage(this._requestManager.transformRequest(T,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(T,u){return this._lazyInitEmptyStyle(),this.style.addLayer(T,u),this._update(!0)}moveLayer(T,u){return this.style.moveLayer(T,u),this._update(!0)}removeLayer(T){return this.style.removeLayer(T),this._update(!0)}getLayer(T){return this.style.getLayer(T)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(T,u,m){return this.style.setLayerZoomRange(T,u,m),this._update(!0)}setFilter(T,u,m={}){return this.style.setFilter(T,u,m),this._update(!0)}getFilter(T){return this.style.getFilter(T)}setPaintProperty(T,u,m,M={}){return this.style.setPaintProperty(T,u,m,M),this._update(!0)}getPaintProperty(T,u){return this.style.getPaintProperty(T,u)}setLayoutProperty(T,u,m,M={}){return this.style.setLayoutProperty(T,u,m,M),this._update(!0)}getLayoutProperty(T,u){return this.style.getLayoutProperty(T,u)}setGlyphs(T,u={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(T,u),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(T,u,m={}){return this._lazyInitEmptyStyle(),this.style.addSprite(T,u,m,(M=>{M||this._update(!0)})),this}removeSprite(T){return this._lazyInitEmptyStyle(),this.style.removeSprite(T),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(T,u={}){return this._lazyInitEmptyStyle(),this.style.setSprite(T,u,(m=>{m||this._update(!0)})),this}setLight(T,u={}){return this._lazyInitEmptyStyle(),this.style.setLight(T,u),this._update(!0)}getLight(){return this.style.getLight()}setSky(T,u={}){return this._lazyInitEmptyStyle(),this.style.setSky(T,u),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(T,u){return this.style.setFeatureState(T,u),this._update()}removeFeatureState(T,u){return this.style.removeFeatureState(T,u),this._update()}getFeatureState(T){return this.style.getFeatureState(T)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let T=0,u=0;return this._container&&(T=this._container.clientWidth||400,u=this._container.clientHeight||300),[T,u]}_setupContainer(){const T=this._container;T.classList.add("maplibregl-map");const u=this._canvasContainer=z.create("div","maplibregl-canvas-container",T);this._interactive&&u.classList.add("maplibregl-interactive"),this._canvas=z.create("canvas","maplibregl-canvas",u),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const m=this._containerDimensions(),M=this._getClampedPixelRatio(m[0],m[1]);this._resizeCanvas(m[0],m[1],M);const O=this._controlContainer=z.create("div","maplibregl-control-container",T),D=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((U=>{D[U]=z.create("div",`maplibregl-ctrl-${U} `,O)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(T,u,m){this._canvas.width=Math.floor(m*T),this._canvas.height=Math.floor(m*u),this._canvas.style.width=`${T}px`,this._canvas.style.height=`${u}px`}_setupPainter(){const T=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let u=null;this._canvas.addEventListener("webglcontextcreationerror",(M=>{u={requestedAttributes:T},M&&(u.statusMessage=M.statusMessage,u.type=M.type)}),{once:!0});let m=null;if(m=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,T):this._canvas.getContext("webgl2",T)||this._canvas.getContext("webgl",T),!m){const M="Failed to initialize WebGL";throw u?(u.message=M,new Error(JSON.stringify(u))):new Error(M)}this.painter=new Lp(m,this.transform),Q.testSupport(m)}migrateProjection(T,u){super.migrateProjection(T,u),this.painter.transform=T,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(T){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||T,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(T){return this._update(),this._renderTaskQueue.add(T)}_cancelRenderFrame(T){this._renderTaskQueue.remove(T)}_render(T){var u,m,M,O,D;const U=this._idleTriggered?this._fadeDuration:0,G=((u=this.style.projection)===null||u===void 0?void 0:u.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(T),this._removed)return;let q=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const me=this.transform.zoom,pe=K();this.style.zoomHistory.update(me,pe);const xe=new a.H(me,{now:pe,fadeDuration:U,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Le=xe.crossFadingFactor();Le===1&&Le===this._crossFadingFactor||(q=!0,this._crossFadingFactor=Le),this.style.update(xe)}const oe=((m=this.style.projection)===null||m===void 0?void 0:m.transitionState)>0!==G;(M=this.style.projection)===null||M===void 0||M.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((O=this.style.projection)===null||O===void 0?void 0:O.transitionState,(D=this.style.projection)===null||D===void 0?void 0:D.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||oe)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,U,this._crossSourceCollisions,oe),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:U,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cF.mark(a.cG.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||q)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const le=this._sourcesDirty||this._styleDirty||this._placementDirty;return le||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||le||(this._fullyLoaded=!0,a.cF.mark(a.cG.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var T;this._hash&&this._hash.remove();for(const m of this._controls)m.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),W.removeThrottleControl(this._imageQueueHandle),(T=this._resizeObserver)===null||T===void 0||T.disconnect();const u=this.painter.context.gl.getExtension("WEBGL_lose_context");u?.loseContext&&u.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),z.remove(this._canvasContainer),z.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cF.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,I.frame(this._frameRequest,(T=>{a.cF.frame(T),this._frameRequest=null;try{this._render(T)}catch(u){if(!a.cH(u)&&!(function(m){return m.message===eh})(u))throw u}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(T){this._showTileBoundaries!==T&&(this._showTileBoundaries=T,this._update())}get showPadding(){return!!this._showPadding}set showPadding(T){this._showPadding!==T&&(this._showPadding=T,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(T){this._showCollisionBoxes!==T&&(this._showCollisionBoxes=T,T?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(T){this._showOverdrawInspector!==T&&(this._showOverdrawInspector=T,this._update())}get repaint(){return!!this._repaint}set repaint(T){this._repaint!==T&&(this._repaint=T,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(T){this._vertices=T,this._update()}get version(){return uo}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(T){return this._lazyInitEmptyStyle(),this.style.setProjection(T),this._update(!0)}},s.MapMouseEvent=As,s.MapTouchEvent=gA,s.MapWheelEvent=sc,s.Marker=Kp,s.NavigationControl=class{constructor(T){this._updateZoomButtons=()=>{const u=this._map.getZoom(),m=u===this._map.getMaxZoom(),M=u===this._map.getMinZoom();this._zoomInButton.disabled=m,this._zoomOutButton.disabled=M,this._zoomInButton.setAttribute("aria-disabled",m.toString()),this._zoomOutButton.setAttribute("aria-disabled",M.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(u,m)=>{const M=this._map._getUIString(`NavigationControl.${m}`);u.title=M,u.setAttribute("aria-label",M)},this.options=a.e({},Ud,T),this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(u=>u.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(u=>this._map.zoomIn({},{originalEvent:u}))),z.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(u=>this._map.zoomOut({},{originalEvent:u}))),z.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(u=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:u}):this._map.resetNorth({},{originalEvent:u})})),this._compassIcon=z.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(T){return this._map=T,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Nh(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){z.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(T,u){const m=z.create("button",T,this._container);return m.type="button",m.addEventListener("click",u),m}},s.Popup=class extends a.E{constructor(T){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&z.remove(this._content),this._container&&(z.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=u=>{this._update(u.point)},this._onMouseMove=u=>{this._update(u.point)},this._onDrag=u=>{this._update(u.point)},this._update=u=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=z.create("div","maplibregl-popup",this._map.getContainer()),this._tip=z.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const U of this.options.className.split(" "))this._container.classList.add(U);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=ah(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!u)return;const m=this._flatPos=this._pos=this._trackPointer&&u?u:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&u?u:this._map.transform.locationToScreenPoint(this._lngLat));let M=this.options.anchor;const O=Df(this.options.offset);if(!M){const U=this._container.offsetWidth,G=this._container.offsetHeight;let q;q=m.y+O.bottom.y<G?["top"]:m.y>this._map.transform.height-G?["bottom"]:[],m.x<U/2?q.push("left"):m.x>this._map.transform.width-U/2&&q.push("right"),M=q.length===0?"bottom":q.join("-")}let D=m.add(O[M]);this.options.subpixelPositioning||(D=D.round()),z.setTransform(this._container,`${CA[M]} translate(${D.x}px,${D.y}px)`),Fc(this._container,M,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(Fd),T)}addTo(T){return this._map&&this.remove(),this._map=T,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(T){return this._lngLat=a.V.convert(T),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(T){return this.setDOMContent(document.createTextNode(T))}setHTML(T){const u=document.createDocumentFragment(),m=document.createElement("body");let M;for(m.innerHTML=T;M=m.firstChild,M;)u.appendChild(M);return this.setDOMContent(u)}getMaxWidth(){var T;return(T=this._container)===null||T===void 0?void 0:T.style.maxWidth}setMaxWidth(T){return this.options.maxWidth=T,this._update(),this}setDOMContent(T){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=z.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(T),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(T){return this._container&&this._container.classList.add(T),this}removeClassName(T){return this._container&&this._container.classList.remove(T),this}setOffset(T){return this.options.offset=T,this._update(),this}toggleClassName(T){if(this._container)return this._container.classList.toggle(T)}setSubpixelPositioning(T){this.options.subpixelPositioning=T}_createCloseButton(){this.options.closeButton&&(this._closeButton=z.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const T=this._container.querySelector(kf);T&&T.focus()}},s.RasterDEMTileSource=Rn,s.RasterTileSource=fi,s.ScaleControl=class{constructor(T){this._onMove=()=>{Gh(this._map,this._container,this.options)},this.setUnit=u=>{this.options.unit=u,Gh(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Fp),T)}getDefaultPosition(){return"bottom-left"}onAdd(T){return this._map=T,this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-scale",T.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){z.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},s.ScrollZoomHandler=Kl,s.Style=Op,s.TerrainControl=class{constructor(T){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=T}onAdd(T){return this._map=T,this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=z.create("button","maplibregl-ctrl-terrain",this._container),z.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){z.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},s.TwoFingersTouchPitchHandler=bA,s.TwoFingersTouchRotateHandler=el,s.TwoFingersTouchZoomHandler=Ld,s.TwoFingersTouchZoomRotateHandler=lc,s.VectorTileSource=Ln,s.VideoSource=wt,s.addSourceType=(T,u)=>a._(void 0,void 0,void 0,(function*(){if(ce(T))throw new Error(`A source type called "${T}" already exists.`);((m,M)=>{re[m]=M})(T,u)})),s.clearPrewarmedResources=function(){const T=Pt;T&&(T.isPreloaded()&&T.numActive()===1?(T.release(vt),Pt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},s.createTileMesh=ir,s.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},s.getRTLTextPluginStatus=function(){return It().getRTLTextPluginStatus()},s.getVersion=function(){return Da},s.getWorkerCount=function(){return st.workerCount},s.getWorkerUrl=function(){return a.a.WORKER_URL},s.importScriptInWorkers=function(T){return Ye().broadcast("IS",T)},s.isTimeFrozen=function(){return P.isFrozen()},s.now=K,s.prewarm=function(){Oe().acquire(vt)},s.restoreNow=function(){P.restoreNow()},s.setMaxParallelImageRequests=function(T){a.a.MAX_PARALLEL_IMAGE_REQUESTS=T},s.setNow=function(T){P.setNow(T)},s.setRTLTextPlugin=function(T,u){return It().setRTLTextPlugin(T,u)},s.setWorkerCount=function(T){st.workerCount=T},s.setWorkerUrl=function(T){a.a.WORKER_URL=T}}));var o=t;return o}))})(tS)),tS.exports}var Sde=wde();const cx=Zl(Sde);function Az(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(y){try{f(i.next(y))}catch(_){s(_)}}function c(y){try{f(i.throw(y))}catch(_){s(_)}}function f(y){y.done?o(y.value):r(y.value).then(a,c)}f((i=i.apply(n,[])).next())})}var L5=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function dX(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var I3={exports:{}};I3.exports;var hz;function Ede(){return hz||(hz=1,(function(n,e){var t=200,i="__lodash_hash_undefined__",r=1,o=2,s=9007199254740991,a="[object Arguments]",c="[object Array]",f="[object AsyncFunction]",y="[object Boolean]",_="[object Date]",E="[object Error]",I="[object Function]",P="[object GeneratorFunction]",K="[object Map]",z="[object Number]",Q="[object Null]",V="[object Object]",$="[object Promise]",Z="[object Proxy]",ee="[object RegExp]",X="[object Set]",W="[object String]",se="[object Symbol]",ue="[object Undefined]",ve="[object WeakMap]",ye="[object ArrayBuffer]",Ee="[object DataView]",_e="[object Float32Array]",Be="[object Float64Array]",Fe="[object Int8Array]",Se="[object Int16Array]",qe="[object Int32Array]",ut="[object Uint8Array]",ht="[object Uint8ClampedArray]",De="[object Uint16Array]",Ie="[object Uint32Array]",ze=/[\\^$.*+?()[\]{}|]/g,Te=/^\[object .+?Constructor\]$/,vt=/^(?:0|[1-9]\d*)$/,st={};st[_e]=st[Be]=st[Fe]=st[Se]=st[qe]=st[ut]=st[ht]=st[De]=st[Ie]=!0,st[a]=st[c]=st[ye]=st[y]=st[Ee]=st[_]=st[E]=st[I]=st[K]=st[z]=st[V]=st[ee]=st[X]=st[W]=st[ve]=!1;var Et=typeof L5=="object"&&L5&&L5.Object===Object&&L5,Pt=typeof self=="object"&&self&&self.Object===Object&&self,ke=Et||Pt||Function("return this")(),Oe=e&&!e.nodeType&&e,we=Oe&&!0&&n&&!n.nodeType&&n,Ye=we&&we.exports===Oe,ft=Ye&&Et.process,dt=(function(){try{return ft&&ft.binding&&ft.binding("util")}catch{}})(),gt=dt&&dt.isTypedArray;function Lt(J,ge){for(var Ge=-1,bt=J==null?0:J.length,bn=0,Xt=[];++Ge<bt;){var hi=J[Ge];ge(hi,Ge,J)&&(Xt[bn++]=hi)}return Xt}function Tt(J,ge){for(var Ge=-1,bt=ge.length,bn=J.length;++Ge<bt;)J[bn+Ge]=ge[Ge];return J}function Zt(J,ge){for(var Ge=-1,bt=J==null?0:J.length;++Ge<bt;)if(ge(J[Ge],Ge,J))return!0;return!1}function Fn(J,ge){for(var Ge=-1,bt=Array(J);++Ge<J;)bt[Ge]=ge(Ge);return bt}function Ln(J){return function(ge){return J(ge)}}function fi(J,ge){return J.has(ge)}function Rn(J,ge){return J?.[ge]}function Dn(J){var ge=-1,Ge=Array(J.size);return J.forEach(function(bt,bn){Ge[++ge]=[bn,bt]}),Ge}function wn(J,ge){return function(Ge){return J(ge(Ge))}}function qn(J){var ge=-1,Ge=Array(J.size);return J.forEach(function(bt){Ge[++ge]=bt}),Ge}var En=Array.prototype,wt=Function.prototype,be=Object.prototype,re=ke["__core-js_shared__"],ce=wt.toString,Pe=be.hasOwnProperty,tt=(function(){var J=/[^.]+$/.exec(re&&re.keys&&re.keys.IE_PROTO||"");return J?"Symbol(src)_1."+J:""})(),xt=be.toString,It=RegExp("^"+ce.call(Pe).replace(ze,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_n=Ye?ke.Buffer:void 0,Xe=ke.Symbol,ae=ke.Uint8Array,he=be.propertyIsEnumerable,C=En.splice,Ke=Xe?Xe.toStringTag:void 0,$e=Object.getOwnPropertySymbols,rt=_n?_n.isBuffer:void 0,Re=wn(Object.keys,Object),at=So(ke,"DataView"),St=So(ke,"Map"),Bt=So(ke,"Promise"),kt=So(ke,"Set"),sn=So(ke,"WeakMap"),Tn=So(Object,"create"),Yn=Vr(at),vi=Vr(St),ui=Vr(Bt),Zn=Vr(kt),Mi=Vr(sn),nn=Xe?Xe.prototype:void 0,$i=nn?nn.valueOf:void 0;function bi(J){var ge=-1,Ge=J==null?0:J.length;for(this.clear();++ge<Ge;){var bt=J[ge];this.set(bt[0],bt[1])}}function to(){this.__data__=Tn?Tn(null):{},this.size=0}function tr(J){var ge=this.has(J)&&delete this.__data__[J];return this.size-=ge?1:0,ge}function an(J){var ge=this.__data__;if(Tn){var Ge=ge[J];return Ge===i?void 0:Ge}return Pe.call(ge,J)?ge[J]:void 0}function Kn(J){var ge=this.__data__;return Tn?ge[J]!==void 0:Pe.call(ge,J)}function ii(J,ge){var Ge=this.__data__;return this.size+=this.has(J)?0:1,Ge[J]=Tn&&ge===void 0?i:ge,this}bi.prototype.clear=to,bi.prototype.delete=tr,bi.prototype.get=an,bi.prototype.has=Kn,bi.prototype.set=ii;function nr(J){var ge=-1,Ge=J==null?0:J.length;for(this.clear();++ge<Ge;){var bt=J[ge];this.set(bt[0],bt[1])}}function Su(){this.__data__=[],this.size=0}function Ms(J){var ge=this.__data__,Ge=Jo(ge,J);if(Ge<0)return!1;var bt=ge.length-1;return Ge==bt?ge.pop():C.call(ge,Ge,1),--this.size,!0}function Si(J){var ge=this.__data__,Ge=Jo(ge,J);return Ge<0?void 0:ge[Ge][1]}function Ba(J){return Jo(this.__data__,J)>-1}function Xl(J,ge){var Ge=this.__data__,bt=Jo(Ge,J);return bt<0?(++this.size,Ge.push([J,ge])):Ge[bt][1]=ge,this}nr.prototype.clear=Su,nr.prototype.delete=Ms,nr.prototype.get=Si,nr.prototype.has=Ba,nr.prototype.set=Xl;function Yr(J){var ge=-1,Ge=J==null?0:J.length;for(this.clear();++ge<Ge;){var bt=J[ge];this.set(bt[0],bt[1])}}function ls(){this.size=0,this.__data__={hash:new bi,map:new(St||nr),string:new bi}}function $a(J){var ge=ws(this,J).delete(J);return this.size-=ge?1:0,ge}function ma(J){return ws(this,J).get(J)}function wo(J){return ws(this,J).has(J)}function ga(J,ge){var Ge=ws(this,J),bt=Ge.size;return Ge.set(J,ge),this.size+=Ge.size==bt?0:1,this}Yr.prototype.clear=ls,Yr.prototype.delete=$a,Yr.prototype.get=ma,Yr.prototype.has=wo,Yr.prototype.set=ga;function mr(J){var ge=-1,Ge=J==null?0:J.length;for(this.__data__=new Yr;++ge<Ge;)this.add(J[ge])}function Sl(J){return this.__data__.set(J,i),this}function us(J){return this.__data__.has(J)}mr.prototype.add=mr.prototype.push=Sl,mr.prototype.has=us;function Xo(J){var ge=this.__data__=new nr(J);this.size=ge.size}function no(){this.__data__=new nr,this.size=0}function El(J){var ge=this.__data__,Ge=ge.delete(J);return this.size=ge.size,Ge}function YA(J){return this.__data__.get(J)}function Bl(J){return this.__data__.has(J)}function Eu(J,ge){var Ge=this.__data__;if(Ge instanceof nr){var bt=Ge.__data__;if(!St||bt.length<t-1)return bt.push([J,ge]),this.size=++Ge.size,this;Ge=this.__data__=new Yr(bt)}return Ge.set(J,ge),this.size=Ge.size,this}Xo.prototype.clear=no,Xo.prototype.delete=El,Xo.prototype.get=YA,Xo.prototype.has=Bl,Xo.prototype.set=Eu;function na(J,ge){var Ge=io(J),bt=!Ge&&Eo(J),bn=!Ge&&!bt&&gr(J),Xt=!Ge&&!bt&&!bn&&Us(J),hi=Ge||bt||bn||Xt,Pn=hi?Fn(J.length,String):[],Ci=Pn.length;for(var ni in J)Pe.call(J,ni)&&!(hi&&(ni=="length"||bn&&(ni=="offset"||ni=="parent")||Xt&&(ni=="buffer"||ni=="byteLength"||ni=="byteOffset")||Ha(ni,Ci)))&&Pn.push(ni);return Pn}function Jo(J,ge){for(var Ge=J.length;Ge--;)if(yo(J[Ge][0],ge))return Ge;return-1}function Bu(J,ge,Ge){var bt=ge(J);return io(J)?bt:Tt(bt,Ge(J))}function Ol(J){return J==null?J===void 0?ue:Q:Ke&&Ke in Object(J)?Ps(J):zi(J)}function Ou(J){return Ls(J)&&Ol(J)==a}function Jl(J,ge,Ge,bt,bn){return J===ge?!0:J==null||ge==null||!Ls(J)&&!Ls(ge)?J!==J&&ge!==ge:Zu(J,ge,Ge,bt,Jl,bn)}function Zu(J,ge,Ge,bt,bn,Xt){var hi=io(J),Pn=io(ge),Ci=hi?c:Ws(J),ni=Pn?c:Ws(ge);Ci=Ci==a?V:Ci,ni=ni==a?V:ni;var Hi=Ci==V,xr=ni==V,ir=Ci==ni;if(ir&&gr(J)){if(!gr(ge))return!1;hi=!0,Hi=!1}if(ir&&!Hi)return Xt||(Xt=new Xo),hi||Us(J)?Il(J,ge,Ge,bt,bn,Xt):Oc(J,ge,Ci,Ge,bt,bn,Xt);if(!(Ge&r)){var Zi=Hi&&Pe.call(J,"__wrapped__"),Or=xr&&Pe.call(ge,"__wrapped__");if(Zi||Or){var Ks=Zi?J.value():J,Oo=Or?ge.value():ge;return Xt||(Xt=new Xo),bn(Ks,Oo,Ge,bt,Xt)}}return ir?(Xt||(Xt=new Xo),eu(J,ge,Ge,bt,bn,Xt)):!1}function VA(J){if(!es(J)||Yi(J))return!1;var ge=Bo(J)?It:Te;return ge.test(Vr(J))}function ia(J){return Ls(J)&&po(J.length)&&!!st[Ol(J)]}function Bc(J){if(!Qs(J))return Re(J);var ge=[];for(var Ge in Object(J))Pe.call(J,Ge)&&Ge!="constructor"&&ge.push(Ge);return ge}function Il(J,ge,Ge,bt,bn,Xt){var hi=Ge&r,Pn=J.length,Ci=ge.length;if(Pn!=Ci&&!(hi&&Ci>Pn))return!1;var ni=Xt.get(J);if(ni&&Xt.get(ge))return ni==ge;var Hi=-1,xr=!0,ir=Ge&o?new mr:void 0;for(Xt.set(J,ge),Xt.set(ge,J);++Hi<Pn;){var Zi=J[Hi],Or=ge[Hi];if(bt)var Ks=hi?bt(Or,Zi,Hi,ge,J,Xt):bt(Zi,Or,Hi,J,ge,Xt);if(Ks!==void 0){if(Ks)continue;xr=!1;break}if(ir){if(!Zt(ge,function(Oo,Oa){if(!fi(ir,Oa)&&(Zi===Oo||bn(Zi,Oo,Ge,bt,Xt)))return ir.push(Oa)})){xr=!1;break}}else if(!(Zi===Or||bn(Zi,Or,Ge,bt,Xt))){xr=!1;break}}return Xt.delete(J),Xt.delete(ge),xr}function Oc(J,ge,Ge,bt,bn,Xt,hi){switch(Ge){case Ee:if(J.byteLength!=ge.byteLength||J.byteOffset!=ge.byteOffset)return!1;J=J.buffer,ge=ge.buffer;case ye:return!(J.byteLength!=ge.byteLength||!Xt(new ae(J),new ae(ge)));case y:case _:case z:return yo(+J,+ge);case E:return J.name==ge.name&&J.message==ge.message;case ee:case W:return J==ge+"";case K:var Pn=Dn;case X:var Ci=bt&r;if(Pn||(Pn=qn),J.size!=ge.size&&!Ci)return!1;var ni=hi.get(J);if(ni)return ni==ge;bt|=o,hi.set(J,ge);var Hi=Il(Pn(J),Pn(ge),bt,bn,Xt,hi);return hi.delete(J),Hi;case se:if($i)return $i.call(J)==$i.call(ge)}return!1}function eu(J,ge,Ge,bt,bn,Xt){var hi=Ge&r,Pn=Rs(J),Ci=Pn.length,ni=Rs(ge),Hi=ni.length;if(Ci!=Hi&&!hi)return!1;for(var xr=Ci;xr--;){var ir=Pn[xr];if(!(hi?ir in ge:Pe.call(ge,ir)))return!1}var Zi=Xt.get(J);if(Zi&&Xt.get(ge))return Zi==ge;var Or=!0;Xt.set(J,ge),Xt.set(ge,J);for(var Ks=hi;++xr<Ci;){ir=Pn[xr];var Oo=J[ir],Oa=ge[ir];if(bt)var Za=hi?bt(Oa,Oo,ir,ge,J,Xt):bt(Oo,Oa,ir,J,ge,Xt);if(!(Za===void 0?Oo===Oa||bn(Oo,Oa,Ge,bt,Xt):Za)){Or=!1;break}Ks||(Ks=ir=="constructor")}if(Or&&!Ks){var Uo=J.constructor,ts=ge.constructor;Uo!=ts&&"constructor"in J&&"constructor"in ge&&!(typeof Uo=="function"&&Uo instanceof Uo&&typeof ts=="function"&&ts instanceof ts)&&(Or=!1)}return Xt.delete(J),Xt.delete(ge),Or}function Rs(J){return Bu(J,Rr,iA)}function ws(J,ge){var Ge=J.__data__;return tu(ge)?Ge[typeof ge=="string"?"string":"hash"]:Ge.map}function So(J,ge){var Ge=Rn(J,ge);return VA(Ge)?Ge:void 0}function Ps(J){var ge=Pe.call(J,Ke),Ge=J[Ke];try{J[Ke]=void 0;var bt=!0}catch{}var bn=xt.call(J);return bt&&(ge?J[Ke]=Ge:delete J[Ke]),bn}var iA=$e?function(J){return J==null?[]:(J=Object(J),Lt($e(J),function(ge){return he.call(J,ge)}))}:_r,Ws=Ol;(at&&Ws(new at(new ArrayBuffer(1)))!=Ee||St&&Ws(new St)!=K||Bt&&Ws(Bt.resolve())!=$||kt&&Ws(new kt)!=X||sn&&Ws(new sn)!=ve)&&(Ws=function(J){var ge=Ol(J),Ge=ge==V?J.constructor:void 0,bt=Ge?Vr(Ge):"";if(bt)switch(bt){case Yn:return Ee;case vi:return K;case ui:return $;case Zn:return X;case Mi:return ve}return ge});function Ha(J,ge){return ge=ge??s,!!ge&&(typeof J=="number"||vt.test(J))&&J>-1&&J%1==0&&J<ge}function tu(J){var ge=typeof J;return ge=="string"||ge=="number"||ge=="symbol"||ge=="boolean"?J!=="__proto__":J===null}function Yi(J){return!!tt&&tt in J}function Qs(J){var ge=J&&J.constructor,Ge=typeof ge=="function"&&ge.prototype||be;return J===Ge}function zi(J){return xt.call(J)}function Vr(J){if(J!=null){try{return ce.call(J)}catch{}try{return J+""}catch{}}return""}function yo(J,ge){return J===ge||J!==J&&ge!==ge}var Eo=Ou((function(){return arguments})())?Ou:function(J){return Ls(J)&&Pe.call(J,"callee")&&!he.call(J,"callee")},io=Array.isArray;function Lo(J){return J!=null&&po(J.length)&&!Bo(J)}var gr=rt||yr;function Ic(J,ge){return Jl(J,ge)}function Bo(J){if(!es(J))return!1;var ge=Ol(J);return ge==I||ge==P||ge==f||ge==Z}function po(J){return typeof J=="number"&&J>-1&&J%1==0&&J<=s}function es(J){var ge=typeof J;return J!=null&&(ge=="object"||ge=="function")}function Ls(J){return J!=null&&typeof J=="object"}var Us=gt?Ln(gt):ia;function Rr(J){return Lo(J)?na(J):Bc(J)}function _r(){return[]}function yr(){return!1}n.exports=Ic})(I3,I3.exports)),I3.exports}var Bde=Ede(),Ode=dX(Bde);function T9(n,e,t){const i={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(i["source-layer"]=t),i}function k9(n,e,t,i){const r={id:[t,i,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return i&&(r["source-layer"]=i),r}function D9(n,e,t){const i={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(i["source-layer"]=t),i}function dz(n,e){return{circle:e(n,.8),line:e(n,.6),polygon:e(n,.3),polygonOutline:e(n,.6),default:e(n,1)}}function Ide(n,e){const t=[],i=[],r=[];for(const o of Object.keys(n)){const s=n[o];if(!s||s.length===0){const a=dz(o,e);i.push(T9(a.circle,o)),r.push(D9(a.line,o)),t.push(k9(a.polygon,a.polygonOutline,o))}else for(const a of s){const c=dz(a,e);i.push(T9(c.circle,o,a)),r.push(D9(c.line,o,a)),t.push(k9(c.polygon,c.polygonOutline,o,a))}}return t.concat(r).concat(i)}function Tde(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const i={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},r={};for(const o of Object.keys(n.sources)){const s=n.sources[o];(s.type==="vector"||s.type==="geojson")&&(r[o]=s)}return Object.assign(n,{layers:[i].concat(e),sources:r})}var fz={polygonLayer:k9,lineLayer:D9,circleLayer:T9,generateInspectStyle:Tde,generateColoredLayers:Ide};class kde{constructor(e){e=Object.assign({show:!0,onToggle(){}},e),this._btn=this.createButton(),this._btn.onclick=e.onToggle,this.elem=this.createContainer(this._btn,e.show)}createButton(){const e=document.createElement("button");return e.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect",e.type="button",e.title="Toggle Inspect",e.setAttribute("aria-label","Toggle Inspect"),e}createContainer(e,t){const i=document.createElement("div");return i.className="maplibregl-ctrl maplibregl-ctrl-group",i.appendChild(e),t||(i.style.display="none"),i}setInspectIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect"}setMapIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-map"}}function Dde(n){return typeof n>"u"||n===null?n:n instanceof Date?n.toLocaleString():typeof n=="object"||typeof n=="number"||typeof n=="string"?n.toString():n}function SO(n,e){return`<div class="maplibregl-inspect_property"><div class="maplibregl-inspect_property-name">${n}</div><div class="maplibregl-inspect_property-value">${Dde(e)}</div></div>`}function Rde(n){return`<div class="maplibregl-inspect_layer">${n}</div>`}function Pde(n){const e=Rde(n.layer["source-layer"]||n.layer.source),t=SO("$id",n.id),i=SO("$type",n.geometry.type),r=Object.keys(n.properties).map(o=>SO(o,n.properties[o]));return[e,t,i].concat(r).join("")}function Lde(n){return n.map(e=>`<div class="maplibregl-inspect_feature">${Pde(e)}</div>`).join("")}function Ude(n){return`<div class="maplibregl-inspect_popup">${Lde(n)}</div>`}var T3={exports:{}},Kde=T3.exports,pz;function Fde(){return pz||(pz=1,(function(n,e){(function(t,i){{var r=i();n&&n.exports&&(e=n.exports=r),e.randomColor=r}})(Kde,function(){var t=null,i={};Q();var r=[],o=function(W){if(W=W||{},W.seed!==void 0&&W.seed!==null&&W.seed===parseInt(W.seed,10))t=W.seed;else if(typeof W.seed=="string")t=ee(W.seed);else{if(W.seed!==void 0&&W.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var se,ue,ve;if(W.count!==null&&W.count!==void 0){for(var ye=W.count,Ee=[],_e=0;_e<W.count;_e++)r.push(!1);for(W.count=null;ye>Ee.length;){var Be=o(W);t!==null&&(W.seed=t),Ee.push(Be)}return W.count=ye,Ee}return se=s(W),ue=a(se,W),ve=c(se,ue,W),f([se,ue,ve],W)};function s(W){if(r.length>0){var se=X(W.hue),ue=P(se),ve=(se[1]-se[0])/r.length,ye=parseInt((ue-se[0])/ve);r[ye]===!0?ye=(ye+2)%r.length:r[ye]=!0;var Ee=(se[0]+ye*ve)%359,_e=(se[0]+(ye+1)*ve)%359;return se=[Ee,_e],ue=P(se),ue<0&&(ue=360+ue),ue}else{var se=_(W.hue);return ue=P(se),ue<0&&(ue=360+ue),ue}}function a(W,se){if(se.hue==="monochrome")return 0;if(se.luminosity==="random")return P([0,100]);var ue=E(W),ve=ue[0],ye=ue[1];switch(se.luminosity){case"bright":ve=55;break;case"dark":ve=ye-10;break;case"light":ye=55;break}return P([ve,ye])}function c(W,se,ue){var ve=y(W,se),ye=100;switch(ue.luminosity){case"dark":ye=ve+20;break;case"light":ve=(ye+ve)/2;break;case"random":ve=0,ye=100;break}return P([ve,ye])}function f(W,se){switch(se.format){case"hsvArray":return W;case"hslArray":return Z(W);case"hsl":var ue=Z(W);return"hsl("+ue[0]+", "+ue[1]+"%, "+ue[2]+"%)";case"hsla":var ve=Z(W),_e=se.alpha||Math.random();return"hsla("+ve[0]+", "+ve[1]+"%, "+ve[2]+"%, "+_e+")";case"rgbArray":return V(W);case"rgb":var ye=V(W);return"rgb("+ye.join(", ")+")";case"rgba":var Ee=V(W),_e=se.alpha||Math.random();return"rgba("+Ee.join(", ")+", "+_e+")";default:return K(W)}}function y(W,se){for(var ue=I(W).lowerBounds,ve=0;ve<ue.length-1;ve++){var ye=ue[ve][0],Ee=ue[ve][1],_e=ue[ve+1][0],Be=ue[ve+1][1];if(se>=ye&&se<=_e){var Fe=(Be-Ee)/(_e-ye),Se=Ee-Fe*ye;return Fe*se+Se}}return 0}function _(W){if(typeof parseInt(W)=="number"){var se=parseInt(W);if(se<360&&se>0)return[se,se]}if(typeof W=="string"){if(i[W]){var ue=i[W];if(ue.hueRange)return ue.hueRange}else if(W.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ve=$(W)[0];return[ve,ve]}}return[0,360]}function E(W){return I(W).saturationRange}function I(W){W>=334&&W<=360&&(W-=360);for(var se in i){var ue=i[se];if(ue.hueRange&&W>=ue.hueRange[0]&&W<=ue.hueRange[1])return i[se]}return"Color not found"}function P(W){if(t===null){var se=.618033988749895,ue=Math.random();return ue+=se,ue%=1,Math.floor(W[0]+ue*(W[1]+1-W[0]))}else{var ve=W[1]||1,ye=W[0]||0;t=(t*9301+49297)%233280;var Ee=t/233280;return Math.floor(ye+Ee*(ve-ye))}}function K(W){var se=V(W);function ue(ye){var Ee=ye.toString(16);return Ee.length==1?"0"+Ee:Ee}var ve="#"+ue(se[0])+ue(se[1])+ue(se[2]);return ve}function z(W,se,ue){var ve=ue[0][0],ye=ue[ue.length-1][0],Ee=ue[ue.length-1][1],_e=ue[0][1];i[W]={hueRange:se,lowerBounds:ue,saturationRange:[ve,ye],brightnessRange:[Ee,_e]}}function Q(){z("monochrome",null,[[0,0],[100,0]]),z("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),z("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),z("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),z("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),z("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),z("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),z("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function V(W){var se=W[0];se===0&&(se=1),se===360&&(se=359),se=se/360;var ue=W[1]/100,ve=W[2]/100,ye=Math.floor(se*6),Ee=se*6-ye,_e=ve*(1-ue),Be=ve*(1-Ee*ue),Fe=ve*(1-(1-Ee)*ue),Se=256,qe=256,ut=256;switch(ye){case 0:Se=ve,qe=Fe,ut=_e;break;case 1:Se=Be,qe=ve,ut=_e;break;case 2:Se=_e,qe=ve,ut=Fe;break;case 3:Se=_e,qe=Be,ut=ve;break;case 4:Se=Fe,qe=_e,ut=ve;break;case 5:Se=ve,qe=_e,ut=Be;break}var ht=[Math.floor(Se*255),Math.floor(qe*255),Math.floor(ut*255)];return ht}function $(W){W=W.replace(/^#/,""),W=W.length===3?W.replace(/(.)/g,"$1$1"):W;var se=parseInt(W.substr(0,2),16)/255,ue=parseInt(W.substr(2,2),16)/255,ve=parseInt(W.substr(4,2),16)/255,ye=Math.max(se,ue,ve),Ee=ye-Math.min(se,ue,ve),_e=ye?Ee/ye:0;switch(ye){case se:return[60*((ue-ve)/Ee%6)||0,_e,ye];case ue:return[60*((ve-se)/Ee+2)||0,_e,ye];case ve:return[60*((se-ue)/Ee+4)||0,_e,ye]}}function Z(W){var se=W[0],ue=W[1]/100,ve=W[2]/100,ye=(2-ue)*ve;return[se,Math.round(ue*ve/(ye<1?ye:2-ye)*1e4)/100,ye/2*100]}function ee(W){for(var se=0,ue=0;ue!==W.length&&!(se>=Number.MAX_SAFE_INTEGER);ue++)se+=W.charCodeAt(ue);return se}function X(W){if(isNaN(W)){if(typeof W=="string"){if(i[W]){var ue=i[W];if(ue.hueRange)return ue.hueRange}else if(W.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ve=$(W)[0];return I(ve).hueRange}}}else{var se=parseInt(W);if(se<360&&se>0)return I(W).hueRange}return[0,360]}return o})})(T3,T3.exports)),T3.exports}var zde=Fde(),jde=dX(zde);function Nde(n,e){let t="bright",i;return/water|ocean|lake|sea|river/.test(n)&&(i="blue"),/state|country|place/.test(n)&&(i="pink"),/road|highway|transport|streets/.test(n)&&(i="orange"),/contour|building|earth/.test(n)&&(i="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(i="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(i="green"),`rgba(${jde({luminosity:t,hue:i,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}var Gde={brightColor:Nde};function Wde(n){return n.metadata&&n.metadata["maplibregl-inspect:inspect"]}function Qde(n){return Object.assign(n,{metadata:Object.assign({},n.metadata,{"maplibregl-inspect:inspect":!0})})}class BP{constructor(e){if(this._onSourceChange=i=>Az(this,void 0,void 0,function*(){if(i.sourceDataType==="visibility"||!i.isSourceLoaded)return;const r=Object.assign({},this.sources);yield this._setSourcesFromMap(),!Ode(r,this.sources)&&Object.keys(this.sources).length>0&&setTimeout(()=>this.render(),1e3)}),this._onStyleChange=()=>{const i=this._map.getStyle();Wde(i)||(this._originalStyle=i)},this._onRightClick=()=>{!this.options.showMapPopupOnHover&&!this.options.showInspectMapPopupOnHover&&!this.options.blockHoverPopupOnClick&&this._popup&&this._popup.remove()},this._onMousemove=i=>{if(this._showInspectMap){if(!this.options.showInspectMapPopup||i.type==="mousemove"&&!this.options.showInspectMapPopupOnHover)return;i.type==="click"&&this.options.showInspectMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}else{if(!this.options.showMapPopup||i.type==="mousemove"&&!this.options.showMapPopupOnHover)return;i.type==="click"&&this.options.showMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}if(!this._popupBlocked&&this._popup){let r;this.options.selectThreshold===0?r=i.point:r=[[i.point.x-this.options.selectThreshold,i.point.y+this.options.selectThreshold],[i.point.x+this.options.selectThreshold,i.point.y-this.options.selectThreshold]];const o=this._map.queryRenderedFeatures(r,this.options.queryParameters)||[];if(this._map.getCanvas().style.cursor=o.length?"pointer":"",!o.length)this._popup.remove();else{this._popup.setLngLat(i.lngLat);const s=this.options.renderPopup(o);typeof s=="string"?this._popup.setHTML(s):this._popup.setDOMContent(s),this._popup.addTo(this._map)}}},!(this instanceof BP))throw new Error("MaplibreInspect needs to be called with the new keyword");let t=null;window.maplibregl?t=new window.maplibregl.Popup({closeButton:!1,closeOnClick:!1}):e.popup||console.error("Maplibre GL JS can not be found. Make sure to include it or pass an initialized MaplibreGL Popup to MaplibreInspect if you are using moduleis."),this.options=Object.assign({showInspectMap:!1,showInspectButton:!0,showInspectMapPopup:!0,showMapPopup:!1,showMapPopupOnHover:!0,showInspectMapPopupOnHover:!0,blockHoverPopupOnClick:!1,backgroundColor:"#fff",assignLayerColor:Gde.brightColor,buildInspectStyle:fz.generateInspectStyle,renderPopup:Ude,popup:t,selectThreshold:5,useInspectStyle:!0,queryParameters:{},sources:{},toggleCallback(){},manageStyleOutside:!1},e),this.sources=this.options.sources,this.assignLayerColor=this.options.assignLayerColor,this._popup=this.options.popup,this._popupBlocked=!1,this._showInspectMap=this.options.showInspectMap,this._toggle=new kde({show:this.options.showInspectButton,onToggle:()=>this.toggleInspector()})}toggleInspector(){this._showInspectMap=!this._showInspectMap,this._popupBlocked=!1,this.options.toggleCallback(this._showInspectMap),this.render()}_inspectStyle(){const e=fz.generateColoredLayers(this.sources,this.assignLayerColor);return this.options.buildInspectStyle(this._map.getStyle(),e,{backgroundColor:this.options.backgroundColor})}render(){this._showInspectMap?(this.options.useInspectStyle&&this._map.setStyle(Qde(this._inspectStyle())),this._toggle.setMapIcon()):this._originalStyle&&(this._popup&&this._popup.remove(),this.options.useInspectStyle&&this._map.setStyle(this._originalStyle),this._toggle.setInspectIcon())}_setSourcesFromMap(){return Az(this,void 0,void 0,function*(){var e;const t=this._map.getStyle(),i=Object.keys(t.sources);for(const r of i)if(t.sources[r].type==="geojson")this.sources[r]=[];else if(t.sources[r].type==="vector"&&t.sources[r].url)try{const s=yield(yield fetch(t.sources[r].url)).json(),a=(e=s?.vector_layers)===null||e===void 0?void 0:e.map(c=>c.id);if(a)this.sources[r]=a;else throw new Error("Missing vectorlayersIds in source"+r)}catch{console.warn("Unable to retrieve tileJSON from "+t.sources[r].url+" using style's layers");for(const s of t.layers)if("source-layer"in s&&s["source-layer"]){const a=s["source-layer"];this.sources[a]||(this.sources[a]=[]),this.sources[a].push(s.id)}}for(const r of Object.keys(this.sources))i.indexOf(r)===-1&&delete this.sources[r]})}setOriginalStyle(e){this._originalStyle=e,this._setSourcesFromMap()}onAdd(e){return this._map=e,Object.keys(this.sources).length===0&&(e.on("tiledata",this._onSourceChange),e.on("sourcedata",this._onSourceChange)),e.on("styledata",this._onStyleChange),e.on("load",this._onStyleChange),e.on("mousemove",this._onMousemove),e.on("click",this._onMousemove),e.on("contextmenu",this._onRightClick),this._toggle.elem}onRemove(){this._map.off("styledata",this._onStyleChange),this._map.off("load",this._onStyleChange),this._map.off("tiledata",this._onSourceChange),this._map.off("sourcedata",this._onSourceChange),this._map.off("mousemove",this._onMousemove),this._map.off("click",this._onMousemove),this._map.off("contextmenu",this._onRightClick);const e=this._toggle.elem;e.parentNode.removeChild(e),this._map=void 0}}var k3={exports:{}},qde=k3.exports,mz;function Yde(){return mz||(mz=1,(function(n,e){(function(t,i){{var r=i();n&&n.exports&&(e=n.exports=r),e.randomColor=r}})(qde,function(){var t=null,i={};Q();var r=[],o=function(W){if(W=W||{},W.seed!==void 0&&W.seed!==null&&W.seed===parseInt(W.seed,10))t=W.seed;else if(typeof W.seed=="string")t=ee(W.seed);else{if(W.seed!==void 0&&W.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var se,ue,ve;if(W.count!==null&&W.count!==void 0){for(var ye=W.count,Ee=[],_e=0;_e<W.count;_e++)r.push(!1);for(W.count=null;ye>Ee.length;){var Be=o(W);t!==null&&(W.seed=t),Ee.push(Be)}return W.count=ye,Ee}return se=s(W),ue=a(se,W),ve=c(se,ue,W),f([se,ue,ve],W)};function s(W){if(r.length>0){var se=X(W.hue),ue=P(se),ve=(se[1]-se[0])/r.length,ye=parseInt((ue-se[0])/ve);r[ye]===!0?ye=(ye+2)%r.length:r[ye]=!0;var Ee=(se[0]+ye*ve)%359,_e=(se[0]+(ye+1)*ve)%359;return se=[Ee,_e],ue=P(se),ue<0&&(ue=360+ue),ue}else{var se=_(W.hue);return ue=P(se),ue<0&&(ue=360+ue),ue}}function a(W,se){if(se.hue==="monochrome")return 0;if(se.luminosity==="random")return P([0,100]);var ue=E(W),ve=ue[0],ye=ue[1];switch(se.luminosity){case"bright":ve=55;break;case"dark":ve=ye-10;break;case"light":ye=55;break}return P([ve,ye])}function c(W,se,ue){var ve=y(W,se),ye=100;switch(ue.luminosity){case"dark":ye=ve+20;break;case"light":ve=(ye+ve)/2;break;case"random":ve=0,ye=100;break}return P([ve,ye])}function f(W,se){switch(se.format){case"hsvArray":return W;case"hslArray":return Z(W);case"hsl":var ue=Z(W);return"hsl("+ue[0]+", "+ue[1]+"%, "+ue[2]+"%)";case"hsla":var ve=Z(W),_e=se.alpha||Math.random();return"hsla("+ve[0]+", "+ve[1]+"%, "+ve[2]+"%, "+_e+")";case"rgbArray":return V(W);case"rgb":var ye=V(W);return"rgb("+ye.join(", ")+")";case"rgba":var Ee=V(W),_e=se.alpha||Math.random();return"rgba("+Ee.join(", ")+", "+_e+")";default:return K(W)}}function y(W,se){for(var ue=I(W).lowerBounds,ve=0;ve<ue.length-1;ve++){var ye=ue[ve][0],Ee=ue[ve][1],_e=ue[ve+1][0],Be=ue[ve+1][1];if(se>=ye&&se<=_e){var Fe=(Be-Ee)/(_e-ye),Se=Ee-Fe*ye;return Fe*se+Se}}return 0}function _(W){if(typeof parseInt(W)=="number"){var se=parseInt(W);if(se<360&&se>0)return[se,se]}if(typeof W=="string"){if(i[W]){var ue=i[W];if(ue.hueRange)return ue.hueRange}else if(W.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ve=$(W)[0];return[ve,ve]}}return[0,360]}function E(W){return I(W).saturationRange}function I(W){W>=334&&W<=360&&(W-=360);for(var se in i){var ue=i[se];if(ue.hueRange&&W>=ue.hueRange[0]&&W<=ue.hueRange[1])return i[se]}return"Color not found"}function P(W){if(t===null){var se=.618033988749895,ue=Math.random();return ue+=se,ue%=1,Math.floor(W[0]+ue*(W[1]+1-W[0]))}else{var ve=W[1]||1,ye=W[0]||0;t=(t*9301+49297)%233280;var Ee=t/233280;return Math.floor(ye+Ee*(ve-ye))}}function K(W){var se=V(W);function ue(ye){var Ee=ye.toString(16);return Ee.length==1?"0"+Ee:Ee}var ve="#"+ue(se[0])+ue(se[1])+ue(se[2]);return ve}function z(W,se,ue){var ve=ue[0][0],ye=ue[ue.length-1][0],Ee=ue[ue.length-1][1],_e=ue[0][1];i[W]={hueRange:se,lowerBounds:ue,saturationRange:[ve,ye],brightnessRange:[Ee,_e]}}function Q(){z("monochrome",null,[[0,0],[100,0]]),z("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),z("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),z("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),z("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),z("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),z("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),z("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function V(W){var se=W[0];se===0&&(se=1),se===360&&(se=359),se=se/360;var ue=W[1]/100,ve=W[2]/100,ye=Math.floor(se*6),Ee=se*6-ye,_e=ve*(1-ue),Be=ve*(1-Ee*ue),Fe=ve*(1-(1-Ee)*ue),Se=256,qe=256,ut=256;switch(ye){case 0:Se=ve,qe=Fe,ut=_e;break;case 1:Se=Be,qe=ve,ut=_e;break;case 2:Se=_e,qe=ve,ut=Fe;break;case 3:Se=_e,qe=Be,ut=ve;break;case 4:Se=Fe,qe=_e,ut=ve;break;case 5:Se=ve,qe=_e,ut=Be;break}var ht=[Math.floor(Se*255),Math.floor(qe*255),Math.floor(ut*255)];return ht}function $(W){W=W.replace(/^#/,""),W=W.length===3?W.replace(/(.)/g,"$1$1"):W;var se=parseInt(W.substr(0,2),16)/255,ue=parseInt(W.substr(2,2),16)/255,ve=parseInt(W.substr(4,2),16)/255,ye=Math.max(se,ue,ve),Ee=ye-Math.min(se,ue,ve),_e=ye?Ee/ye:0;switch(ye){case se:return[60*((ue-ve)/Ee%6)||0,_e,ye];case ue:return[60*((ve-se)/Ee+2)||0,_e,ye];case ve:return[60*((se-ue)/Ee+4)||0,_e,ye]}}function Z(W){var se=W[0],ue=W[1]/100,ve=W[2]/100,ye=(2-ue)*ve;return[se,Math.round(ue*ve/(ye<1?ye:2-ye)*1e4)/100,ye/2*100]}function ee(W){for(var se=0,ue=0;ue!==W.length&&!(se>=Number.MAX_SAFE_INTEGER);ue++)se+=W.charCodeAt(ue);return se}function X(W){if(isNaN(W)){if(typeof W=="string"){if(i[W]){var ue=i[W];if(ue.hueRange)return ue.hueRange}else if(W.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ve=$(W)[0];return I(ve).hueRange}}}else{var se=parseInt(W);if(se<360&&se>0)return I(W).hueRange}return[0,360]}return o})})(k3,k3.exports)),k3.exports}var Vde=Yde();const $de=Zl(Vde);function Hde(n,e){let t="bright",i;return/water|ocean|lake|sea|river/.test(n)&&(i="blue"),/state|country|place/.test(n)&&(i="pink"),/road|highway|transport|streets/.test(n)&&(i="orange"),/contour|building|earth/.test(n)&&(i="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(i="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(i="green"),`rgba(${$de({luminosity:t,hue:i,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}const fX={brightColor:Hde};function Zde(n){return fo({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M0 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1z"},child:[]}]})(n)}function Xde(n){return fo({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6.95.435c.58-.58 1.52-.58 2.1 0l6.515 6.516c.58.58.58 1.519 0 2.098L9.05 15.565c-.58.58-1.519.58-2.098 0L.435 9.05a1.48 1.48 0 0 1 0-2.098z"},child:[]}]})(n)}function Jde(n){return fo({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708"},child:[]}]})(n)}function efe(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(n)}function TC(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(n)}function tfe(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"},child:[]}]})(n)}function nfe(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"},child:[]}]})(n)}function ife(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function rfe(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 7h2v2h-2V7zm0 4h2v6h-2v-6zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function ofe(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(n)}function sfe(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 4H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6a2 2 0 0 0-2-2zm-7 6-4 4h3v6h2v-6h3l-4-4z"},child:[]}]})(n)}function afe(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(n)}function lfe(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 0 0 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"},child:[]}]})(n)}function ufe(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"},child:[]}]})(n)}function pX(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function cfe(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(n)}function R9(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"},child:[]}]})(n)}function Afe(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(n)}function hfe(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"7.2",cy:"14.4",r:"3.2"},child:[]},{tag:"circle",attr:{cx:"14.8",cy:"18",r:"2"},child:[]},{tag:"circle",attr:{cx:"15.2",cy:"8.8",r:"4.8"},child:[]}]})(n)}function gz(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7z"},child:[]}]})(n)}function dfe(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"},child:[]}]})(n)}function yz(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"},child:[]}]})(n)}function ffe(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2z"},child:[]}]})(n)}function pfe(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"},child:[]}]})(n)}function mfe(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z"},child:[]}]})(n)}function gfe(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C8.13 2 5 5.13 5 9c0 1.74.5 3.37 1.41 4.84.95 1.54 2.2 2.86 3.16 4.4.47.75.81 1.45 1.17 2.26.26.55.47 1.5 1.26 1.5s1-.95 1.25-1.5c.37-.81.7-1.51 1.17-2.26.96-1.53 2.21-2.85 3.16-4.4C18.5 12.37 19 10.74 19 9c0-3.87-3.13-7-7-7zm0 9.75a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z"},child:[]}]})(n)}function yfe(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"},child:[]}]})(n)}function mX(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(n)}function gX(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 14 5-5 5 5z"},child:[]}]})(n)}function vfe(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(n)}function bfe(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(n)}function Cfe(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"2"},child:[]},{tag:"path",attr:{d:"M10 3h4v12h-4z"},child:[]}]})(n)}function _fe(n){return fo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"},child:[]}]})(n)}function xfe(n){return fo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m344 280 88-88m-200 24 64 64M80 320l104-104"},child:[]},{tag:"circle",attr:{cx:"456",cy:"168",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"320",cy:"304",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"208",cy:"192",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"56",cy:"344",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]}]})(n)}function Mfe(n){return fo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M467.3 168.1c-1.8 0-3.5.3-5.1 1l-177.6 92.1h-.1c-7.6 4.7-12.5 12.5-12.5 21.4v185.9c0 6.4 5.6 11.5 12.7 11.5 2.2 0 4.3-.5 6.1-1.4.2-.1.4-.2.5-.3L466 385.6l.3-.1c8.2-4.5 13.7-12.7 13.7-22.1V179.6c0-6.4-5.7-11.5-12.7-11.5zM454.3 118.5L272.6 36.8S261.9 32 256 32c-5.9 0-16.5 4.8-16.5 4.8L57.6 118.5s-8 3.3-8 9.5c0 6.6 8.3 11.5 8.3 11.5l185.5 97.8c3.8 1.7 8.1 2.6 12.6 2.6 4.6 0 8.9-1 12.7-2.7l185.4-97.9s7.5-4 7.5-11.5c.1-6.3-7.3-9.3-7.3-9.3zM227.5 261.2L49.8 169c-1.5-.6-3.3-1-5.1-1-7 0-12.7 5.1-12.7 11.5v183.8c0 9.4 5.5 17.6 13.7 22.1l.2.1 174.7 92.7c1.9 1.1 4.2 1.7 6.6 1.7 7 0 12.7-5.2 12.7-11.5V282.6c.1-8.9-4.9-16.8-12.4-21.4z"},child:[]}]})(n)}function wfe(n){return fo({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M634.92 462.7l-288-448C341.03 5.54 330.89 0 320 0s-21.03 5.54-26.92 14.7l-288 448a32.001 32.001 0 0 0-1.17 32.64A32.004 32.004 0 0 0 32 512h576c11.71 0 22.48-6.39 28.09-16.67a31.983 31.983 0 0 0-1.17-32.63zM320 91.18L405.39 224H320l-64 64-38.06-38.06L320 91.18z"},child:[]}]})(n)}function Zs(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",e="0b6460c942a48f834d2809c818afa5c72625023a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",statementMap:{0:{start:{line:7,column:18},end:{line:33,column:1}},1:{start:{line:8,column:20},end:{line:8,column:42}},2:{start:{line:9,column:2},end:{line:32,column:3}},3:{start:{line:11,column:6},end:{line:11,column:61}},4:{start:{line:13,column:6},end:{line:13,column:60}},5:{start:{line:15,column:6},end:{line:15,column:62}},6:{start:{line:17,column:6},end:{line:17,column:63}},7:{start:{line:19,column:6},end:{line:19,column:66}},8:{start:{line:21,column:6},end:{line:21,column:66}},9:{start:{line:23,column:6},end:{line:23,column:59}},10:{start:{line:25,column:6},end:{line:25,column:71}},11:{start:{line:27,column:6},end:{line:27,column:66}},12:{start:{line:29,column:6},end:{line:29,column:61}},13:{start:{line:31,column:6},end:{line:31,column:67}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:29},end:{line:33,column:1}},line:7}},branchMap:{0:{loc:{start:{line:9,column:2},end:{line:32,column:3}},type:"switch",locations:[{start:{line:10,column:4},end:{line:11,column:61}},{start:{line:12,column:4},end:{line:13,column:60}},{start:{line:14,column:4},end:{line:15,column:62}},{start:{line:16,column:4},end:{line:17,column:63}},{start:{line:18,column:4},end:{line:19,column:66}},{start:{line:20,column:4},end:{line:21,column:66}},{start:{line:22,column:4},end:{line:23,column:59}},{start:{line:24,column:4},end:{line:25,column:71}},{start:{line:26,column:4},end:{line:27,column:66}},{start:{line:28,column:4},end:{line:29,column:61}},{start:{line:30,column:4},end:{line:31,column:67}}],line:9}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0},b:{0:[0,0,0,0,0,0,0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx"],names:[],mappings:"AAkBkC;AAflC,SAAS,QAAQ,eAAe,iBAAiB;AACjD,SAAS,eAAe,UAAU,eAAe,SAAS,sBAAsB;AAChF,SAAS,0BAA0B;AACnC,SAAS,gBAAgB;AACzB,SAAS,kBAAkB;AAQ3B,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,YAAY,EAAE,OAAO,MAAM,MAAM;AACvC,UAAO,MAAM,MAAM;AAAA,IACjB,KAAK;AAAkB,aAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,IACvD,KAAK;AAAU,aAAO,oBAAC,WAAS,GAAG,WAAW;AAAA,IAC9C,KAAK;AAAa,aAAO,oBAAC,aAAW,GAAG,WAAW;AAAA,IACnD,KAAK;AAAgB,aAAO,oBAAC,cAAY,GAAG,WAAW;AAAA,IACvD,KAAK;AAAW,aAAO,oBAAC,iBAAe,GAAG,WAAW;AAAA,IACrD,KAAK;AAAQ,aAAO,oBAAC,iBAAe,GAAG,WAAW;AAAA,IAClD,KAAK;AAAc,aAAO,oBAAC,UAAQ,GAAG,WAAW;AAAA,IACjD,KAAK;AAAQ,aAAO,oBAAC,sBAAoB,GAAG,WAAW;AAAA,IACvD,KAAK;AAAU,aAAO,oBAAC,iBAAe,GAAG,WAAW;AAAA,IACpD,KAAK;AAAU,aAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,IAC/C;AAAS,aAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,EACjD;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0b6460c942a48f834d2809c818afa5c72625023a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Zs=function(){return s},s}Zs();Zs().s[0]++;const yX=n=>{Zs().f[0]++;const e=(Zs().s[1]++,{style:n.style});switch(Zs().s[2]++,n.type){case"fill-extrusion":return Zs().b[0][0]++,Zs().s[3]++,te.jsx(Mfe,{...e});case"raster":return Zs().b[0][1]++,Zs().s[4]++,te.jsx(pfe,{...e});case"hillshade":return Zs().b[0][2]++,Zs().s[5]++,te.jsx(Jde,{...e});case"color-relief":return Zs().b[0][3]++,Zs().s[6]++,te.jsx(wfe,{...e});case"heatmap":return Zs().b[0][4]++,Zs().s[7]++,te.jsx(hfe,{...e});case"fill":return Zs().b[0][5]++,Zs().s[8]++,te.jsx(Xde,{...e});case"background":return Zs().b[0][6]++,Zs().s[9]++,te.jsx(Zde,{...e});case"line":return Zs().b[0][7]++,Zs().s[10]++,te.jsx(xfe,{...e});case"symbol":return Zs().b[0][8]++,Zs().s[11]++,te.jsx(gfe,{...e});case"circle":return Zs().b[0][9]++,Zs().s[12]++,te.jsx(ffe,{...e});default:return Zs().b[0][10]++,Zs().s[13]++,te.jsx(Cfe,{...e})}};function di(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",e="6d83428b3c695d7740365dc3cc3e42bdf4d49028",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:20}},1:{start:{line:6,column:27},end:{line:6,column:29}},2:{start:{line:7,column:2},end:{line:18,column:5}},3:{start:{line:8,column:22},end:{line:8,column:51}},4:{start:{line:9,column:4},end:{line:17,column:5}},5:{start:{line:10,column:6},end:{line:10,column:43}},6:{start:{line:11,column:28},end:{line:11,column:91}},7:{start:{line:11,column:59},end:{line:11,column:90}},8:{start:{line:12,column:6},end:{line:12,column:65}},9:{start:{line:14,column:6},end:{line:14,column:52}},10:{start:{line:15,column:6},end:{line:15,column:39}},11:{start:{line:16,column:6},end:{line:16,column:45}},12:{start:{line:19,column:2},end:{line:19,column:17}},13:{start:{line:23,column:4},end:{line:25,column:5}},14:{start:{line:24,column:6},end:{line:24,column:13}},15:{start:{line:26,column:4},end:{line:44,column:5}},16:{start:{line:27,column:25},end:{line:27,column:44}},17:{start:{line:28,column:6},end:{line:30,column:7}},18:{start:{line:29,column:8},end:{line:29,column:48}},19:{start:{line:31,column:6},end:{line:33,column:7}},20:{start:{line:32,column:8},end:{line:32,column:48}},21:{start:{line:34,column:6},end:{line:36,column:7}},22:{start:{line:35,column:8},end:{line:35,column:48}},23:{start:{line:37,column:6},end:{line:39,column:7}},24:{start:{line:38,column:8},end:{line:38,column:58}},25:{start:{line:40,column:6},end:{line:40,column:21}},26:{start:{line:42,column:6},end:{line:42,column:63}},27:{start:{line:43,column:6},end:{line:43,column:21}},28:{start:{line:47,column:20},end:{line:47,column:67}},29:{start:{line:48,column:18},end:{line:93,column:6}},30:{start:{line:49,column:21},end:{line:88,column:8}},31:{start:{line:50,column:29},end:{line:50,column:76}},32:{start:{line:51,column:8},end:{line:87,column:10}},33:{start:{line:68,column:20},end:{line:68,column:63}},34:{start:{line:89,column:6},end:{line:92,column:26}},35:{start:{line:94,column:4},end:{line:94,column:152}}},fnMap:{0:{name:"groupFeaturesBySourceLayer",decl:{start:{line:4,column:9},end:{line:4,column:35}},loc:{start:{line:4,column:46},end:{line:20,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:32},end:{line:18,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:11,column:52},end:{line:11,column:53}},loc:{start:{line:11,column:59},end:{line:11,column:90}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:35},end:{line:45,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:11},end:{line:95,column:3}},line:46},5:{name:"(anonymous_5)",decl:{start:{line:48,column:43},end:{line:48,column:44}},loc:{start:{line:48,column:62},end:{line:93,column:5}},line:48},6:{name:"(anonymous_6)",decl:{start:{line:49,column:48},end:{line:49,column:49}},loc:{start:{line:49,column:66},end:{line:88,column:7}},line:49},7:{name:"(anonymous_7)",decl:{start:{line:67,column:27},end:{line:67,column:28}},loc:{start:{line:67,column:33},end:{line:69,column:19}},line:67}},branchMap:{0:{loc:{start:{line:9,column:4},end:{line:17,column:5}},type:"if",locations:[{start:{line:9,column:4},end:{line:17,column:5}},{start:{line:13,column:11},end:{line:17,column:5}}],line:9},1:{loc:{start:{line:14,column:27},end:{line:14,column:51}},type:"binary-expr",locations:[{start:{line:14,column:27},end:{line:14,column:45}},{start:{line:14,column:49},end:{line:14,column:51}}],line:14},2:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:28,column:6},end:{line:30,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:30,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:28},4:{loc:{start:{line:28,column:10},end:{line:28,column:64}},type:"binary-expr",locations:[{start:{line:28,column:10},end:{line:28,column:36}},{start:{line:28,column:40},end:{line:28,column:64}}],line:28},5:{loc:{start:{line:31,column:6},end:{line:33,column:7}},type:"if",locations:[{start:{line:31,column:6},end:{line:33,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},6:{loc:{start:{line:31,column:10},end:{line:31,column:64}},type:"binary-expr",locations:[{start:{line:31,column:10},end:{line:31,column:36}},{start:{line:31,column:40},end:{line:31,column:64}}],line:31},7:{loc:{start:{line:34,column:6},end:{line:36,column:7}},type:"if",locations:[{start:{line:34,column:6},end:{line:36,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},8:{loc:{start:{line:34,column:10},end:{line:34,column:64}},type:"binary-expr",locations:[{start:{line:34,column:10},end:{line:34,column:36}},{start:{line:34,column:40},end:{line:34,column:64}}],line:34},9:{loc:{start:{line:37,column:6},end:{line:39,column:7}},type:"if",locations:[{start:{line:37,column:6},end:{line:39,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},10:{loc:{start:{line:37,column:10},end:{line:37,column:84}},type:"binary-expr",locations:[{start:{line:37,column:10},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:84}}],line:37},11:{loc:{start:{line:71,column:20},end:{line:75,column:24}},type:"binary-expr",locations:[{start:{line:71,column:20},end:{line:71,column:38}},{start:{line:71,column:58},end:{line:75,column:24}}],line:71},12:{loc:{start:{line:77,column:20},end:{line:80,column:24}},type:"binary-expr",locations:[{start:{line:77,column:20},end:{line:77,column:35}},{start:{line:77,column:55},end:{line:80,column:24}}],line:77}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx"],names:[],mappings:"AA8EU,cAkBsB,YAlBtB;AA9EV,OAAO,WAAW;AAClB,OAAO,eAAe;AAGtB,SAAS,2BAA2B,UAA4B;AAC9D,QAAM,UAA6C,CAAC;AAEpD,QAAM,mBAA4C,CAAC;AAEnD,WAAS,QAAQ,aAAW;AAC1B,UAAM,YAAY,QAAQ,MAAM,cAAc;AAC9C,QAAG,OAAO,UAAU,eAAe,KAAK,kBAAkB,QAAQ,MAAM,EAAE,GAAG;AAC3E,uBAAiB,QAAQ,MAAM,EAAE;AAEjC,YAAM,gBAAgB,QAAQ,SAAS,EAAE,KAAK,CAAC,MAAsB,EAAE,MAAM,OAAO,QAAQ,MAAM,EAAE;AAEpG,oBAAe,UAAU,iBAAiB,QAAQ,MAAM,EAAE;AAAA,IAC5D,OAAO;AACL,cAAQ,SAAS,IAAI,QAAQ,SAAS,KAAK,CAAC;AAC5C,cAAQ,SAAS,EAAE,KAAK,OAAO;AAE/B,uBAAiB,QAAQ,MAAM,EAAE,IAAI;AAAA,IACvC;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAQA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,iBAAiB,SAAyB,OAAgB;AAExD,QAAI,CAAC,QAAQ,MAAM,OAAO;AACxB;AAAA,IACF;AAEA,QAAI;AACF,YAAM,aAAa,QAAQ,MAAM;AAEjC,UAAG,gBAAgB,cAAc,WAAW,YAAY,GAAG;AACzD,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,0BAA0B,cAAc,WAAW,sBAAsB,GAAG;AAC9E,eAAO,OAAO,WAAW,sBAAsB,CAAC;AAAA,MAClD;AAEA,aAAO;AAAA,IACT,SAGO,KAAK;AACV,cAAQ,KAAK,uCAAuC,GAAG;AACvD,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,UAAU,2BAA2B,KAAK,MAAM,QAAQ;AAE9D,UAAM,QAAQ,OAAO,KAAK,OAAO,EAAE,IAAI,mBAAiB;AACtD,YAAM,SAAS,QAAQ,aAAa,EAAE,IAAI,CAAC,SAAyB,QAAgB;AAClF,cAAM,eAAe,KAAK,iBAAiB,SAAS,KAAK,MAAM,IAAI;AAEnE,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,WAAU;AAAA,YAEV;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,OAAO,EAAC,YAAY,aAAY;AAAA;AAAA,cACjC;AAAA,cACD;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,MAAM;AACb,yBAAK,MAAM,cAAc,QAAQ,MAAM,EAAE;AAAA,kBAC3C;AAAA,kBAEC;AAAA,4BAAQ,MAAM,QACb,oBAAC,aAAU,MAAM,QAAQ,MAAM,MAAM,OAAO;AAAA,sBAC1C,OAAO;AAAA,sBACP,QAAQ;AAAA,sBACR,cAAc;AAAA,oBAChB,GAAE;AAAA,oBAEH,QAAQ,MAAM;AAAA,oBACd,QAAQ,WAAW,qBAAC,UAAK;AAAA;AAAA,sBAAI,QAAQ;AAAA,uBAAQ;AAAA;AAAA;AAAA,cAChD;AAAA;AAAA;AAAA,UAtBK;AAAA,QAuBP;AAAA,MACF,CAAC;AACD,aAAO,qBAAC,SACN;AAAA,4BAAC,SAAI,WAAU,2BAA2B,yBAAc;AAAA,QACvD;AAAA,WAFc,aAGjB;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,gCAA+B,eAAY,uBAAsB,KAAI,OACxF,iBACH;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6d83428b3c695d7740365dc3cc3e42bdf4d49028"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return di=function(){return s},s}di();function Sfe(n){di().f[0]++;const e=(di().s[0]++,{}),t=(di().s[1]++,{});return di().s[2]++,n.forEach(i=>{di().f[1]++;const r=(di().s[3]++,i.layer["source-layer"]);if(di().s[4]++,Object.prototype.hasOwnProperty.call(t,i.layer.id)){di().b[0][0]++,di().s[5]++,t[i.layer.id]++;const o=(di().s[6]++,e[r].find(s=>(di().f[2]++,di().s[7]++,s.layer.id===i.layer.id)));di().s[8]++,o.counter=t[i.layer.id]}else di().b[0][1]++,di().s[9]++,e[r]=(di().b[1][0]++,e[r]||(di().b[1][1]++,[])),di().s[10]++,e[r].push(i),di().s[11]++,t[i.layer.id]=1}),di().s[12]++,e}class vX extends On.Component{_getFeatureColor(e,t){if(di().f[3]++,di().s[13]++,e.layer.paint)di().b[2][1]++;else{di().b[2][0]++,di().s[14]++;return}di().s[15]++;try{const i=(di().s[16]++,e.layer.paint);return di().s[17]++,di().b[4][0]++,"text-color"in i&&(di().b[4][1]++,i["text-color"])?(di().b[3][0]++,di().s[18]++,String(i["text-color"])):(di().b[3][1]++,di().s[19]++,di().b[6][0]++,"fill-color"in i&&(di().b[6][1]++,i["fill-color"])?(di().b[5][0]++,di().s[20]++,String(i["fill-color"])):(di().b[5][1]++,di().s[21]++,di().b[8][0]++,"line-color"in i&&(di().b[8][1]++,i["line-color"])?(di().b[7][0]++,di().s[22]++,String(i["line-color"])):(di().b[7][1]++,di().s[23]++,di().b[10][0]++,"fill-extrusion-color"in i&&(di().b[10][1]++,i["fill-extrusion-color"])?(di().b[9][0]++,di().s[24]++,String(i["fill-extrusion-color"])):(di().b[9][1]++,di().s[25]++,"black"))))}catch(i){return di().s[26]++,console.warn("Unable to get feature color, error:",i),di().s[27]++,"black"}}render(){di().f[4]++;const e=(di().s[28]++,Sfe(this.props.features)),t=(di().s[29]++,Object.keys(e).map(i=>{di().f[5]++;const r=(di().s[30]++,e[i].map((o,s)=>{di().f[6]++;const a=(di().s[31]++,this._getFeatureColor(o,this.props.zoom));return di().s[32]++,te.jsxs("div",{className:"maputnik-popup-layer",children:[te.jsx("div",{className:"maputnik-popup-layer__swatch",style:{background:a}}),te.jsxs("label",{className:"maputnik-popup-layer__label",onClick:()=>{di().f[7]++,di().s[33]++,this.props.onLayerSelect(o.layer.id)},children:[(di().b[11][0]++,o.layer.type&&(di().b[11][1]++,te.jsx(yX,{type:o.layer.type,style:{width:14,height:14,paddingRight:3}}))),o.layer.id,(di().b[12][0]++,o.counter&&(di().b[12][1]++,te.jsxs("span",{children:["  ",o.counter]})))]})]},s)}));return di().s[34]++,te.jsxs("div",{children:[te.jsx("div",{className:"maputnik-popup-layer-id",children:i}),r]},i)}));return di().s[35]++,te.jsx("div",{className:"maputnik-feature-layer-popup","data-wd-key":"feature-layer-popup",dir:"ltr",children:t})}}function Ji(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",e="1e4c480681bcaba84c2c41960b73ded2066b54bc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",statementMap:{0:{start:{line:4,column:2},end:{line:4,column:67}},1:{start:{line:4,column:54},end:{line:4,column:67}},2:{start:{line:5,column:2},end:{line:5,column:59}},3:{start:{line:5,column:29},end:{line:5,column:59}},4:{start:{line:6,column:2},end:{line:6,column:115}},5:{start:{line:6,column:91},end:{line:6,column:115}},6:{start:{line:7,column:2},end:{line:7,column:15}},7:{start:{line:10,column:2},end:{line:13,column:12}},8:{start:{line:16,column:2},end:{line:32,column:12}},9:{start:{line:29,column:23},end:{line:29,column:55}},10:{start:{line:30,column:6},end:{line:30,column:74}},11:{start:{line:35,column:25},end:{line:35,column:27}},12:{start:{line:36,column:2},end:{line:49,column:5}},13:{start:{line:37,column:25},end:{line:39,column:6}},14:{start:{line:38,column:6},end:{line:38,column:156}},15:{start:{line:40,column:4},end:{line:48,column:5}},16:{start:{line:41,column:6},end:{line:41,column:35}},17:{start:{line:43,column:6},end:{line:47,column:7}},18:{start:{line:44,column:8},end:{line:44,column:58}},19:{start:{line:46,column:8},end:{line:46,column:60}},20:{start:{line:50,column:2},end:{line:50,column:24}},21:{start:{line:54,column:21},end:{line:54,column:66}},22:{start:{line:55,column:4},end:{line:55,column:303}}},fnMap:{0:{name:"displayValue",decl:{start:{line:3,column:9},end:{line:3,column:21}},loc:{start:{line:3,column:29},end:{line:8,column:1}},line:3},1:{name:"renderKeyValueTableRow",decl:{start:{line:9,column:9},end:{line:9,column:31}},loc:{start:{line:9,column:44},end:{line:14,column:1}},line:9},2:{name:"renderFeature",decl:{start:{line:15,column:9},end:{line:15,column:22}},loc:{start:{line:15,column:37},end:{line:33,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:28,column:40},end:{line:28,column:41}},loc:{start:{line:28,column:58},end:{line:31,column:5}},line:28},4:{name:"removeDuplicatedFeatures",decl:{start:{line:34,column:9},end:{line:34,column:33}},loc:{start:{line:34,column:44},end:{line:51,column:1}},line:34},5:{name:"(anonymous_5)",decl:{start:{line:36,column:19},end:{line:36,column:20}},loc:{start:{line:36,column:32},end:{line:49,column:3}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:50},end:{line:37,column:51}},loc:{start:{line:37,column:64},end:{line:39,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:56,column:3}},line:53}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:4,column:67}},type:"if",locations:[{start:{line:4,column:2},end:{line:4,column:67}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:4},1:{loc:{start:{line:4,column:6},end:{line:4,column:52}},type:"binary-expr",locations:[{start:{line:4,column:6},end:{line:4,column:34}},{start:{line:4,column:38},end:{line:4,column:52}}],line:4},2:{loc:{start:{line:5,column:2},end:{line:5,column:59}},type:"if",locations:[{start:{line:5,column:2},end:{line:5,column:59}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},3:{loc:{start:{line:6,column:2},end:{line:6,column:115}},type:"if",locations:[{start:{line:6,column:2},end:{line:6,column:115}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},4:{loc:{start:{line:6,column:6},end:{line:6,column:89}},type:"binary-expr",locations:[{start:{line:6,column:6},end:{line:6,column:31}},{start:{line:6,column:35},end:{line:6,column:60}},{start:{line:6,column:64},end:{line:6,column:89}}],line:6},5:{loc:{start:{line:21,column:6},end:{line:24,column:10}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:32}},{start:{line:21,column:52},end:{line:24,column:10}}],line:21},6:{loc:{start:{line:38,column:13},end:{line:38,column:155}},type:"binary-expr",locations:[{start:{line:38,column:13},end:{line:38,column:77}},{start:{line:38,column:81},end:{line:38,column:155}}],line:38},7:{loc:{start:{line:40,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:48,column:5}},{start:{line:42,column:11},end:{line:48,column:5}}],line:40},8:{loc:{start:{line:43,column:6},end:{line:47,column:7}},type:"if",locations:[{start:{line:43,column:6},end:{line:47,column:7}},{start:{line:45,column:13},end:{line:47,column:7}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx"],names:[],mappings:"AAkBS,SACL,KADK;AAlBT,OAAO,WAAW;AAQlB,SAAS,aAAa,OAAoD;AACxE,MAAI,OAAO,UAAU,eAAe,UAAU,KAAM,QAAO;AAC3D,MAAI,iBAAiB,KAAM,QAAO,MAAM,eAAe;AACvD,MAAI,OAAO,UAAU,YACb,OAAO,UAAU,YACjB,OAAO,UAAU,SAAU,QAAO,MAAM,SAAS;AACzD,SAAO;AACT;AAEA,SAAS,uBAAuB,KAAa,OAA2B;AACtE,SAAO,qBAAC,QACN;AAAA,wBAAC,QAAG,WAAU,6BAA6B,eAAI;AAAA,IAC/C,oBAAC,QAAG,WAAU,6BAA6B,iBAAM;AAAA,OAFnC,GAGhB;AACF;AAEA,SAAS,cAAc,SAAyB,KAAa;AAC3D,SAAO,qBAAC,MAAM,UAAN,EACN;AAAA,wBAAC,QACC,+BAAC,QAAG,SAAS,GAAG,WAAU,2BAA2B;AAAA,cAAQ,MAAM,QAAQ;AAAA,MAAE;AAAA,MAAG,QAAQ,MAAM,cAAc;AAAA,MAAG,QAAQ,sBAAsB,qBAAC,UAAK;AAAA;AAAA,QAAI,QAAQ;AAAA,SAAmB;AAAA,OAAQ,GAC5L;AAAA,IACC,uBAAuB,SAAS,QAAQ,SAAS,IAAI;AAAA,IACrD,uBAAuB,OAAO,aAAa,QAAQ,EAAE,CAAC;AAAA,IACtD,OAAO,KAAK,QAAQ,UAAU,EAAE,IAAI,kBAAgB;AACnD,YAAM,WAAW,QAAQ,WAAW,YAAY;AAChD,aAAO,uBAAuB,cAAc,aAAa,QAAQ,CAAC;AAAA,IACpE,CAAC;AAAA,OATyB,GAU5B;AACF;AAEA,SAAS,yBAAyB,UAA4B;AAC5D,QAAM,iBAAmC,CAAC;AAE1C,WAAS,QAAQ,aAAW;AAC1B,UAAM,eAAe,eAAe,UAAU,cAAY;AACxD,aAAO,QAAQ,MAAM,cAAc,MAAM,SAAS,MAAM,cAAc,KACjE,KAAK,UAAU,QAAQ,UAAU,MAAM,KAAK,UAAU,SAAS,UAAU;AAAA,IAChF,CAAC;AAED,QAAG,iBAAiB,IAAI;AACtB,qBAAe,KAAK,OAAO;AAAA,IAC7B,OAAO;AACL,UAAG,wBAAwB,eAAe,YAAY,GAAG;AACvD,uBAAe,YAAY,EAAE;AAAA,MAC/B,OAAO;AACL,uBAAe,YAAY,EAAE,qBAAqB;AAAA,MACpD;AAAA,IACF;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAMA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,WAAW,yBAAyB,KAAK,MAAM,QAAQ;AAC7D,WAAO,oBAAC,SAAI,WAAU,mCAAkC,KAAI,OAAM,eAAY,0BAC5E,8BAAC,WAAM,WAAU,wBACf,8BAAC,WACE,mBAAS,IAAI,aAAa,GAC7B,GACF,GACF;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1e4c480681bcaba84c2c41960b73ded2066b54bc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ji=function(){return s},s}Ji();function vz(n){return Ji().f[0]++,Ji().s[0]++,Ji().b[1][0]++,typeof n>"u"||(Ji().b[1][1]++,n===null)?(Ji().b[0][0]++,Ji().s[1]++,n):(Ji().b[0][1]++,Ji().s[2]++,n instanceof Date?(Ji().b[2][0]++,Ji().s[3]++,n.toLocaleString()):(Ji().b[2][1]++,Ji().s[4]++,Ji().b[4][0]++,typeof n=="object"||(Ji().b[4][1]++,typeof n=="number")||(Ji().b[4][2]++,typeof n=="string")?(Ji().b[3][0]++,Ji().s[5]++,n.toString()):(Ji().b[3][1]++,Ji().s[6]++,n)))}function EO(n,e){return Ji().f[1]++,Ji().s[7]++,te.jsxs("tr",{children:[te.jsx("td",{className:"maputnik-popup-table-cell",children:n}),te.jsx("td",{className:"maputnik-popup-table-cell",children:e})]},n)}function Efe(n,e){return Ji().f[2]++,Ji().s[8]++,te.jsxs(On.Fragment,{children:[te.jsx("tr",{children:te.jsxs("td",{colSpan:2,className:"maputnik-popup-layer-id",children:[n.layer.source,": ",n.layer["source-layer"],(Ji().b[5][0]++,n.inspectModeCounter&&(Ji().b[5][1]++,te.jsxs("span",{children:["  ",n.inspectModeCounter]})))]})}),EO("$type",n.geometry.type),EO("$id",vz(n.id)),Object.keys(n.properties).map(t=>{Ji().f[3]++;const i=(Ji().s[9]++,n.properties[t]);return Ji().s[10]++,EO(t,vz(i))})]},e)}function Bfe(n){Ji().f[4]++;const e=(Ji().s[11]++,[]);return Ji().s[12]++,n.forEach(t=>{Ji().f[5]++;const i=(Ji().s[13]++,e.findIndex(r=>(Ji().f[6]++,Ji().s[14]++,Ji().b[6][0]++,t.layer["source-layer"]===r.layer["source-layer"]&&(Ji().b[6][1]++,JSON.stringify(t.properties)===JSON.stringify(r.properties)))));Ji().s[15]++,i===-1?(Ji().b[7][0]++,Ji().s[16]++,e.push(t)):(Ji().b[7][1]++,Ji().s[17]++,"inspectModeCounter"in e[i]?(Ji().b[8][0]++,Ji().s[18]++,e[i].inspectModeCounter++):(Ji().b[8][1]++,Ji().s[19]++,e[i].inspectModeCounter=2))}),Ji().s[20]++,e}class Ofe extends On.Component{render(){Ji().f[7]++;const e=(Ji().s[21]++,Bfe(this.props.features));return Ji().s[22]++,te.jsx("div",{className:"maputnik-feature-property-popup",dir:"ltr","data-wd-key":"feature-property-popup",children:te.jsx("table",{className:"maputnik-popup-table",children:te.jsx("tbody",{children:e.map(Efe)})})})}}const P9={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};for(const n in P9)Object.freeze(P9[n]);const i4=Object.freeze(P9),bX=Object.create(null);for(const n in i4)Object.hasOwn(i4,n)&&(bX[i4[n]]=n);const Vu={to:{},get:{}};Vu.get=function(n){const e=n.slice(0,3).toLowerCase();let t,i;switch(e){case"hsl":{t=Vu.get.hsl(n),i="hsl";break}case"hwb":{t=Vu.get.hwb(n),i="hwb";break}default:{t=Vu.get.rgb(n),i="rgb";break}}return t?{model:i,value:t}:null};Vu.get.rgb=function(n){if(!n)return null;const e=/^#([a-f\d]{3,4})$/i,t=/^#([a-f\d]{6})([a-f\d]{2})?$/i,i=/^rgba?\(\s*([+-]?(?:\d*\.)?\d+(?:e\d+)?)(?=[\s,])\s*(?:,\s*)?([+-]?(?:\d*\.)?\d+(?:e\d+)?)(?=[\s,])\s*(?:,\s*)?([+-]?(?:\d*\.)?\d+(?:e\d+)?)\s*(?:[\s,|/]\s*([+-]?(?:\d*\.)?\d+(?:e\d+)?)(%?)\s*)?\)$/i,r=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/i,o=/^(\w+)$/;let s=[0,0,0,1],a,c,f;if(a=n.match(t)){for(f=a[2],a=a[1],c=0;c<3;c++){const y=c*2;s[c]=Number.parseInt(a.slice(y,y+2),16)}f&&(s[3]=Number.parseInt(f,16)/255)}else if(a=n.match(e)){for(a=a[1],f=a[3],c=0;c<3;c++)s[c]=Number.parseInt(a[c]+a[c],16);f&&(s[3]=Number.parseInt(f+f,16)/255)}else if(a=n.match(i)){for(c=0;c<3;c++)s[c]=Number.parseFloat(a[c+1]);a[4]&&(s[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else if(a=n.match(r)){for(c=0;c<3;c++)s[c]=Math.round(Number.parseFloat(a[c+1])*2.55);a[4]&&(s[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else return(a=n.toLowerCase().match(o))?a[1]==="transparent"?[0,0,0,0]:Object.hasOwn(i4,a[1])?(s=i4[a[1]].slice(),s[3]=1,s):null:null;for(c=0;c<3;c++)s[c]=mv(s[c],0,255);return s[3]=mv(s[3],0,1),s};Vu.get.hsl=function(n){if(!n)return null;const e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:e[+-]?\d+)?)\s*)?\)$/i,t=n.match(e);if(t){const i=Number.parseFloat(t[4]),r=(Number.parseFloat(t[1])%360+360)%360,o=mv(Number.parseFloat(t[2]),0,100),s=mv(Number.parseFloat(t[3]),0,100),a=mv(Number.isNaN(i)?1:i,0,1);return[r,o,s,a]}return null};Vu.get.hwb=function(n){if(!n)return null;const e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*[\s,]\s*([+-]?[\d.]+)%\s*[\s,]\s*([+-]?[\d.]+)%\s*(?:[\s,]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:e[+-]?\d+)?)\s*)?\)$/i,t=n.match(e);if(t){const i=Number.parseFloat(t[4]),r=(Number.parseFloat(t[1])%360+360)%360,o=mv(Number.parseFloat(t[2]),0,100),s=mv(Number.parseFloat(t[3]),0,100),a=mv(Number.isNaN(i)?1:i,0,1);return[r,o,s,a]}return null};Vu.to.hex=function(...n){return"#"+U5(n[0])+U5(n[1])+U5(n[2])+(n[3]<1?U5(Math.round(n[3]*255)):"")};Vu.to.rgb=function(...n){return n.length<4||n[3]===1?"rgb("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+")":"rgba("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+", "+n[3]+")"};Vu.to.rgb.percent=function(...n){const e=Math.round(n[0]/255*100),t=Math.round(n[1]/255*100),i=Math.round(n[2]/255*100);return n.length<4||n[3]===1?"rgb("+e+"%, "+t+"%, "+i+"%)":"rgba("+e+"%, "+t+"%, "+i+"%, "+n[3]+")"};Vu.to.hsl=function(...n){return n.length<4||n[3]===1?"hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)":"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+n[3]+")"};Vu.to.hwb=function(...n){let e="";return n.length>=4&&n[3]!==1&&(e=", "+n[3]),"hwb("+n[0]+", "+n[1]+"%, "+n[2]+"%"+e+")"};Vu.to.keyword=function(...n){return bX[n.slice(0,3)]};function mv(n,e,t){return Math.min(Math.max(e,n),t)}function U5(n){const e=Math.round(n).toString(16).toUpperCase();return e.length<2?"0"+e:e}const L9={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};for(const n in L9)Object.freeze(L9[n]);const D4=Object.freeze(L9),CX={};for(const n of Object.keys(D4))CX[D4[n]]=n;const li={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},B1=(6/29)**3;function kx(n){const e=n>.0031308?1.055*n**.4166666666666667-.055:n*12.92;return Math.min(Math.max(0,e),1)}function Dx(n){return n>.04045?((n+.055)/1.055)**2.4:n/12.92}for(const n of Object.keys(li)){if(!("channels"in li[n]))throw new Error("missing channels property: "+n);if(!("labels"in li[n]))throw new Error("missing channel labels property: "+n);if(li[n].labels.length!==li[n].channels)throw new Error("channel and label counts mismatch: "+n);const{channels:e,labels:t}=li[n];delete li[n].channels,delete li[n].labels,Object.defineProperty(li[n],"channels",{value:e}),Object.defineProperty(li[n],"labels",{value:t})}li.rgb.hsl=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.min(e,t,i),o=Math.max(e,t,i),s=o-r;let a,c;switch(o){case r:{a=0;break}case e:{a=(t-i)/s;break}case t:{a=2+(i-e)/s;break}case i:{a=4+(e-t)/s;break}}a=Math.min(a*60,360),a<0&&(a+=360);const f=(r+o)/2;return o===r?c=0:f<=.5?c=s/(o+r):c=s/(2-o-r),[a,c*100,f*100]};li.rgb.hsv=function(n){let e,t,i,r,o;const s=n[0]/255,a=n[1]/255,c=n[2]/255,f=Math.max(s,a,c),y=f-Math.min(s,a,c),_=function(E){return(f-E)/6/y+1/2};if(y===0)r=0,o=0;else{switch(o=y/f,e=_(s),t=_(a),i=_(c),f){case s:{r=i-t;break}case a:{r=1/3+e-i;break}case c:{r=2/3+t-e;break}}r<0?r+=1:r>1&&(r-=1)}return[r*360,o*100,f*100]};li.rgb.hwb=function(n){const e=n[0],t=n[1];let i=n[2];const r=li.rgb.hsl(n)[0],o=1/255*Math.min(e,Math.min(t,i));return i=1-1/255*Math.max(e,Math.max(t,i)),[r,o*100,i*100]};li.rgb.oklab=function(n){const e=Dx(n[0]/255),t=Dx(n[1]/255),i=Dx(n[2]/255),r=Math.cbrt(.4122214708*e+.5363325363*t+.0514459929*i),o=Math.cbrt(.2119034982*e+.6806995451*t+.1073969566*i),s=Math.cbrt(.0883024619*e+.2817188376*t+.6299787005*i),a=.2104542553*r+.793617785*o-.0040720468*s,c=1.9779984951*r-2.428592205*o+.4505937099*s,f=.0259040371*r+.7827717662*o-.808675766*s;return[a*100,c*100,f*100]};li.rgb.cmyk=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.min(1-e,1-t,1-i),o=(1-e-r)/(1-r)||0,s=(1-t-r)/(1-r)||0,a=(1-i-r)/(1-r)||0;return[o*100,s*100,a*100,r*100]};function Ife(n,e){return(n[0]-e[0])**2+(n[1]-e[1])**2+(n[2]-e[2])**2}li.rgb.keyword=function(n){const e=CX[n];if(e)return e;let t=Number.POSITIVE_INFINITY,i;for(const r of Object.keys(D4)){const o=D4[r],s=Ife(n,o);s<t&&(t=s,i=r)}return i};li.keyword.rgb=function(n){return[...D4[n]]};li.rgb.xyz=function(n){const e=Dx(n[0]/255),t=Dx(n[1]/255),i=Dx(n[2]/255),r=e*.4124564+t*.3575761+i*.1804375,o=e*.2126729+t*.7151522+i*.072175,s=e*.0193339+t*.119192+i*.9503041;return[r*100,o*100,s*100]};li.rgb.lab=function(n){const e=li.rgb.xyz(n);let t=e[0],i=e[1],r=e[2];t/=95.047,i/=100,r/=108.883,t=t>B1?t**(1/3):7.787*t+16/116,i=i>B1?i**(1/3):7.787*i+16/116,r=r>B1?r**(1/3):7.787*r+16/116;const o=116*i-16,s=500*(t-i),a=200*(i-r);return[o,s,a]};li.hsl.rgb=function(n){const e=n[0]/360,t=n[1]/100,i=n[2]/100;let r,o;if(t===0)return o=i*255,[o,o,o];const s=i<.5?i*(1+t):i+t-i*t,a=2*i-s,c=[0,0,0];for(let f=0;f<3;f++)r=e+1/3*-(f-1),r<0&&r++,r>1&&r--,6*r<1?o=a+(s-a)*6*r:2*r<1?o=s:3*r<2?o=a+(s-a)*(2/3-r)*6:o=a,c[f]=o*255;return c};li.hsl.hsv=function(n){const e=n[0];let t=n[1]/100,i=n[2]/100,r=t;const o=Math.max(i,.01);i*=2,t*=i<=1?i:2-i,r*=o<=1?o:2-o;const s=(i+t)/2,a=i===0?2*r/(o+r):2*t/(i+t);return[e,a*100,s*100]};li.hsv.rgb=function(n){const e=n[0]/60,t=n[1]/100;let i=n[2]/100;const r=Math.floor(e)%6,o=e-Math.floor(e),s=255*i*(1-t),a=255*i*(1-t*o),c=255*i*(1-t*(1-o));switch(i*=255,r){case 0:return[i,c,s];case 1:return[a,i,s];case 2:return[s,i,c];case 3:return[s,a,i];case 4:return[c,s,i];case 5:return[i,s,a]}};li.hsv.hsl=function(n){const e=n[0],t=n[1]/100,i=n[2]/100,r=Math.max(i,.01);let o,s;s=(2-t)*i;const a=(2-t)*r;return o=t*r,o/=a<=1?a:2-a,o=o||0,s/=2,[e,o*100,s*100]};li.hwb.rgb=function(n){const e=n[0]/360;let t=n[1]/100,i=n[2]/100;const r=t+i;let o;r>1&&(t/=r,i/=r);const s=Math.floor(6*e),a=1-i;o=6*e-s,(s&1)!==0&&(o=1-o);const c=t+o*(a-t);let f,y,_;switch(s){default:case 6:case 0:{f=a,y=c,_=t;break}case 1:{f=c,y=a,_=t;break}case 2:{f=t,y=a,_=c;break}case 3:{f=t,y=c,_=a;break}case 4:{f=c,y=t,_=a;break}case 5:{f=a,y=t,_=c;break}}return[f*255,y*255,_*255]};li.cmyk.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=n[3]/100,o=1-Math.min(1,e*(1-r)+r),s=1-Math.min(1,t*(1-r)+r),a=1-Math.min(1,i*(1-r)+r);return[o*255,s*255,a*255]};li.xyz.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100;let r,o,s;return r=e*3.2404542+t*-1.5371385+i*-.4985314,o=e*-.969266+t*1.8760108+i*.041556,s=e*.0556434+t*-.2040259+i*1.0572252,r=kx(r),o=kx(o),s=kx(s),[r*255,o*255,s*255]};li.xyz.lab=function(n){let e=n[0],t=n[1],i=n[2];e/=95.047,t/=100,i/=108.883,e=e>B1?e**(1/3):7.787*e+16/116,t=t>B1?t**(1/3):7.787*t+16/116,i=i>B1?i**(1/3):7.787*i+16/116;const r=116*t-16,o=500*(e-t),s=200*(t-i);return[r,o,s]};li.xyz.oklab=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=Math.cbrt(.8189330101*e+.3618667424*t-.1288597137*i),o=Math.cbrt(.0329845436*e+.9293118715*t+.0361456387*i),s=Math.cbrt(.0482003018*e+.2643662691*t+.633851707*i),a=.2104542553*r+.793617785*o-.0040720468*s,c=1.9779984951*r-2.428592205*o+.4505937099*s,f=.0259040371*r+.7827717662*o-.808675766*s;return[a*100,c*100,f*100]};li.oklab.oklch=function(n){return li.lab.lch(n)};li.oklab.xyz=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=(.999999998*e+.396337792*t+.215803758*i)**3,o=(1.000000008*e-.105561342*t-.063854175*i)**3,s=(1.000000055*e-.089484182*t-1.291485538*i)**3,a=1.227013851*r-.55779998*o+.281256149*s,c=-.040580178*r+1.11225687*o-.071676679*s,f=-.076381285*r-.421481978*o+1.58616322*s;return[a*100,c*100,f*100]};li.oklab.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=(e+.3963377774*t+.2158037573*i)**3,o=(e-.1055613458*t-.0638541728*i)**3,s=(e-.0894841775*t-1.291485548*i)**3,a=kx(4.0767416621*r-3.3077115913*o+.2309699292*s),c=kx(-1.2684380046*r+2.6097574011*o-.3413193965*s),f=kx(-.0041960863*r-.7034186147*o+1.707614701*s);return[a*255,c*255,f*255]};li.oklch.oklab=function(n){return li.lch.lab(n)};li.lab.xyz=function(n){const e=n[0],t=n[1],i=n[2];let r,o,s;o=(e+16)/116,r=t/500+o,s=o-i/200;const a=o**3,c=r**3,f=s**3;return o=a>B1?a:(o-16/116)/7.787,r=c>B1?c:(r-16/116)/7.787,s=f>B1?f:(s-16/116)/7.787,r*=95.047,o*=100,s*=108.883,[r,o,s]};li.lab.lch=function(n){const e=n[0],t=n[1],i=n[2];let r;r=Math.atan2(i,t)*360/2/Math.PI,r<0&&(r+=360);const s=Math.sqrt(t*t+i*i);return[e,s,r]};li.lch.lab=function(n){const e=n[0],t=n[1],r=n[2]/360*2*Math.PI,o=t*Math.cos(r),s=t*Math.sin(r);return[e,o,s]};li.rgb.ansi16=function(n,e=null){const[t,i,r]=n;let o=e===null?li.rgb.hsv(n)[2]:e;if(o=Math.round(o/50),o===0)return 30;let s=30+(Math.round(r/255)<<2|Math.round(i/255)<<1|Math.round(t/255));return o===2&&(s+=60),s};li.hsv.ansi16=function(n){return li.rgb.ansi16(li.hsv.rgb(n),n[2])};li.rgb.ansi256=function(n){const e=n[0],t=n[1],i=n[2];return e>>4===t>>4&&t>>4===i>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(i/255*5)};li.ansi16.rgb=function(n){n=n[0];let e=n%10;if(e===0||e===7)return n>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const t=(Math.trunc(n>50)+1)*.5,i=(e&1)*t*255,r=(e>>1&1)*t*255,o=(e>>2&1)*t*255;return[i,r,o]};li.ansi256.rgb=function(n){if(n=n[0],n>=232){const o=(n-232)*10+8;return[o,o,o]}n-=16;let e;const t=Math.floor(n/36)/5*255,i=Math.floor((e=n%36)/6)/5*255,r=e%6/5*255;return[t,i,r]};li.rgb.hex=function(n){const t=(((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255)).toString(16).toUpperCase();return"000000".slice(t.length)+t};li.hex.rgb=function(n){const e=n.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=[...t].map(a=>a+a).join(""));const i=Number.parseInt(t,16),r=i>>16&255,o=i>>8&255,s=i&255;return[r,o,s]};li.rgb.hcg=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.max(Math.max(e,t),i),o=Math.min(Math.min(e,t),i),s=r-o;let a;const c=s<1?o/(1-s):0;return s<=0?a=0:r===e?a=(t-i)/s%6:r===t?a=2+(i-e)/s:a=4+(e-t)/s,a/=6,a%=1,[a*360,s*100,c*100]};li.hsl.hcg=function(n){const e=n[1]/100,t=n[2]/100,i=t<.5?2*e*t:2*e*(1-t);let r=0;return i<1&&(r=(t-.5*i)/(1-i)),[n[0],i*100,r*100]};li.hsv.hcg=function(n){const e=n[1]/100,t=n[2]/100,i=e*t;let r=0;return i<1&&(r=(t-i)/(1-i)),[n[0],i*100,r*100]};li.hcg.rgb=function(n){const e=n[0]/360,t=n[1]/100,i=n[2]/100;if(t===0)return[i*255,i*255,i*255];const r=[0,0,0],o=e%1*6,s=o%1,a=1-s;let c=0;switch(Math.floor(o)){case 0:{r[0]=1,r[1]=s,r[2]=0;break}case 1:{r[0]=a,r[1]=1,r[2]=0;break}case 2:{r[0]=0,r[1]=1,r[2]=s;break}case 3:{r[0]=0,r[1]=a,r[2]=1;break}case 4:{r[0]=s,r[1]=0,r[2]=1;break}default:r[0]=1,r[1]=0,r[2]=a}return c=(1-t)*i,[(t*r[0]+c)*255,(t*r[1]+c)*255,(t*r[2]+c)*255]};li.hcg.hsv=function(n){const e=n[1]/100,t=n[2]/100,i=e+t*(1-e);let r=0;return i>0&&(r=e/i),[n[0],r*100,i*100]};li.hcg.hsl=function(n){const e=n[1]/100,i=n[2]/100*(1-e)+.5*e;let r=0;return i>0&&i<.5?r=e/(2*i):i>=.5&&i<1&&(r=e/(2*(1-i))),[n[0],r*100,i*100]};li.hcg.hwb=function(n){const e=n[1]/100,t=n[2]/100,i=e+t*(1-e);return[n[0],(i-e)*100,(1-i)*100]};li.hwb.hcg=function(n){const e=n[1]/100,i=1-n[2]/100,r=i-e;let o=0;return r<1&&(o=(i-r)/(1-r)),[n[0],r*100,o*100]};li.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]};li.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]};li.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]};li.gray.hsl=function(n){return[0,0,n[0]]};li.gray.hsv=li.gray.hsl;li.gray.hwb=function(n){return[0,100,n[0]]};li.gray.cmyk=function(n){return[0,0,0,n[0]]};li.gray.lab=function(n){return[n[0],0,0]};li.gray.hex=function(n){const e=Math.round(n[0]/100*255)&255,i=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(i.length)+i};li.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]};function Tfe(){const n={},e=Object.keys(li);for(let{length:t}=e,i=0;i<t;i++)n[e[i]]={distance:-1,parent:null};return n}function kfe(n){const e=Tfe(),t=[n];for(e[n].distance=0;t.length>0;){const i=t.pop(),r=Object.keys(li[i]);for(let{length:o}=r,s=0;s<o;s++){const a=r[s],c=e[a];c.distance===-1&&(c.distance=e[i].distance+1,c.parent=i,t.unshift(a))}}return e}function Dfe(n,e){return function(t){return e(n(t))}}function Rfe(n,e){const t=[e[n].parent,n];let i=li[e[n].parent][n],r=e[n].parent;for(;e[r].parent;)t.unshift(e[r].parent),i=Dfe(li[e[r].parent][r],i),r=e[r].parent;return i.conversion=t,i}function Pfe(n){const e=kfe(n),t={},i=Object.keys(e);for(let{length:r}=i,o=0;o<r;o++){const s=i[o];e[s].parent!==null&&(t[s]=Rfe(s,e))}return t}const Sc={},Lfe=Object.keys(li);function Ufe(n){const e=function(...t){const i=t[0];return i==null?i:(i.length>1&&(t=i),n(t))};return"conversion"in n&&(e.conversion=n.conversion),e}function Kfe(n){const e=function(...t){const i=t[0];if(i==null)return i;i.length>1&&(t=i);const r=n(t);if(typeof r=="object")for(let{length:o}=r,s=0;s<o;s++)r[s]=Math.round(r[s]);return r};return"conversion"in n&&(e.conversion=n.conversion),e}for(const n of Lfe){Sc[n]={},Object.defineProperty(Sc[n],"channels",{value:li[n].channels}),Object.defineProperty(Sc[n],"labels",{value:li[n].labels});const e=Pfe(n),t=Object.keys(e);for(const i of t){const r=e[i];Sc[n][i]=Kfe(r),Sc[n][i].raw=Ufe(r)}}const _X=["keyword","gray","hex"],U9={};for(const n of Object.keys(Sc))U9[[...Sc[n].labels].sort().join("")]=n;const K9={};function bu(n,e){if(!(this instanceof bu))return new bu(n,e);if(e&&e in _X&&(e=null),e&&!(e in Sc))throw new Error("Unknown model: "+e);let t,i;if(n==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(n instanceof bu)this.model=n.model,this.color=[...n.color],this.valpha=n.valpha;else if(typeof n=="string"){const r=Vu.get(n);if(r===null)throw new Error("Unable to parse color from string: "+n);this.model=r.model,i=Sc[this.model].channels,this.color=r.value.slice(0,i),this.valpha=typeof r.value[i]=="number"?r.value[i]:1}else if(n.length>0){this.model=e||"rgb",i=Sc[this.model].channels;const r=Array.prototype.slice.call(n,0,i);this.color=F9(r,i),this.valpha=typeof n[i]=="number"?n[i]:1}else if(typeof n=="number")this.model="rgb",this.color=[n>>16&255,n>>8&255,n&255],this.valpha=1;else{this.valpha=1;const r=Object.keys(n);"alpha"in n&&(r.splice(r.indexOf("alpha"),1),this.valpha=typeof n.alpha=="number"?n.alpha:0);const o=r.sort().join("");if(!(o in U9))throw new Error("Unable to parse color from object: "+JSON.stringify(n));this.model=U9[o];const{labels:s}=Sc[this.model],a=[];for(t=0;t<s.length;t++)a.push(n[s[t]]);this.color=F9(a)}if(K9[this.model])for(i=Sc[this.model].channels,t=0;t<i;t++){const r=K9[this.model][t];r&&(this.color[t]=r(this.color[t]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}bu.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(n){let e=this.model in Vu.to?this:this.rgb();e=e.round(typeof n=="number"?n:1);const t=e.valpha===1?e.color:[...e.color,this.valpha];return Vu.to[e.model](...t)},percentString(n){const e=this.rgb().round(typeof n=="number"?n:1),t=e.valpha===1?e.color:[...e.color,this.valpha];return Vu.to.rgb.percent(...t)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const n={},{channels:e}=Sc[this.model],{labels:t}=Sc[this.model];for(let i=0;i<e;i++)n[t[i]]=this.color[i];return this.valpha!==1&&(n.alpha=this.valpha),n},unitArray(){const n=this.rgb().color;return n[0]/=255,n[1]/=255,n[2]/=255,this.valpha!==1&&n.push(this.valpha),n},unitObject(){const n=this.rgb().object();return n.r/=255,n.g/=255,n.b/=255,this.valpha!==1&&(n.alpha=this.valpha),n},round(n){return n=Math.max(n||0,0),new bu([...this.color.map(zfe(n)),this.valpha],this.model)},alpha(n){return n!==void 0?new bu([...this.color,Math.max(0,Math.min(1,n))],this.model):this.valpha},red:_l("rgb",0,Wu(255)),green:_l("rgb",1,Wu(255)),blue:_l("rgb",2,Wu(255)),hue:_l(["hsl","hsv","hsl","hwb","hcg"],0,n=>(n%360+360)%360),saturationl:_l("hsl",1,Wu(100)),lightness:_l("hsl",2,Wu(100)),saturationv:_l("hsv",1,Wu(100)),value:_l("hsv",2,Wu(100)),chroma:_l("hcg",1,Wu(100)),gray:_l("hcg",2,Wu(100)),white:_l("hwb",1,Wu(100)),wblack:_l("hwb",2,Wu(100)),cyan:_l("cmyk",0,Wu(100)),magenta:_l("cmyk",1,Wu(100)),yellow:_l("cmyk",2,Wu(100)),black:_l("cmyk",3,Wu(100)),x:_l("xyz",0,Wu(95.047)),y:_l("xyz",1,Wu(100)),z:_l("xyz",2,Wu(108.833)),l:_l("lab",0,Wu(100)),a:_l("lab",1),b:_l("lab",2),keyword(n){return n!==void 0?new bu(n):Sc[this.model].keyword(this.color)},hex(n){return n!==void 0?new bu(n):Vu.to.hex(...this.rgb().round().color)},hexa(n){if(n!==void 0)return new bu(n);const e=this.rgb().round().color;let t=Math.round(this.valpha*255).toString(16).toUpperCase();return t.length===1&&(t="0"+t),Vu.to.hex(...e)+t},rgbNumber(){const n=this.rgb().color;return(n[0]&255)<<16|(n[1]&255)<<8|n[2]&255},luminosity(){const n=this.rgb().color,e=[];for(const[t,i]of n.entries()){const r=i/255;e[t]=r<=.04045?r/12.92:((r+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(n){const e=this.luminosity(),t=n.luminosity();return e>t?(e+.05)/(t+.05):(t+.05)/(e+.05)},level(n){const e=this.contrast(n);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const n=this.rgb().color;return(n[0]*2126+n[1]*7152+n[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const n=this.rgb();for(let e=0;e<3;e++)n.color[e]=255-n.color[e];return n},lighten(n){const e=this.hsl();return e.color[2]+=e.color[2]*n,e},darken(n){const e=this.hsl();return e.color[2]-=e.color[2]*n,e},saturate(n){const e=this.hsl();return e.color[1]+=e.color[1]*n,e},desaturate(n){const e=this.hsl();return e.color[1]-=e.color[1]*n,e},whiten(n){const e=this.hwb();return e.color[1]+=e.color[1]*n,e},blacken(n){const e=this.hwb();return e.color[2]+=e.color[2]*n,e},grayscale(){const n=this.rgb().color,e=n[0]*.3+n[1]*.59+n[2]*.11;return bu.rgb(e,e,e)},fade(n){return this.alpha(this.valpha-this.valpha*n)},opaquer(n){return this.alpha(this.valpha+this.valpha*n)},rotate(n){const e=this.hsl();let t=e.color[0];return t=(t+n)%360,t=t<0?360+t:t,e.color[0]=t,e},mix(n,e){if(!n||!n.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof n);const t=n.rgb(),i=this.rgb(),r=e===void 0?.5:e,o=2*r-1,s=t.alpha()-i.alpha(),a=((o*s===-1?o:(o+s)/(1+o*s))+1)/2,c=1-a;return bu.rgb(a*t.red()+c*i.red(),a*t.green()+c*i.green(),a*t.blue()+c*i.blue(),t.alpha()*r+i.alpha()*(1-r))}};for(const n of Object.keys(Sc)){if(_X.includes(n))continue;const{channels:e}=Sc[n];bu.prototype[n]=function(...t){return this.model===n?new bu(this):t.length>0?new bu(t,n):new bu([...jfe(Sc[this.model][n].raw(this.color)),this.valpha],n)},bu[n]=function(...t){let i=t[0];return typeof i=="number"&&(i=F9(t,e)),new bu(i,n)}}function Ffe(n,e){return Number(n.toFixed(e))}function zfe(n){return function(e){return Ffe(e,n)}}function _l(n,e,t){n=Array.isArray(n)?n:[n];for(const i of n)(K9[i]||=[])[e]=t;return n=n[0],function(i){let r;return i!==void 0?(t&&(i=t(i)),r=this[n](),r.color[e]=i,r):(r=this[n]().color[e],t&&(r=t(r)),r)}}function Wu(n){return function(e){return Math.max(0,Math.min(n,e))}}function jfe(n){return Array.isArray(n)?n:[n]}function F9(n,e){for(let t=0;t<e;t++)typeof n[t]!="number"&&(n[t]=0);return n}function Vo(){var n="/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",e="9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",statementMap:{0:{start:{line:2,column:9},end:{line:2,column:15}},1:{start:{line:3,column:15},end:{line:3,column:21}},2:{start:{line:4,column:12},end:{line:4,column:16}},3:{start:{line:8,column:4},end:{line:8,column:20}},4:{start:{line:9,column:4},end:{line:9,column:52}},5:{start:{line:10,column:4},end:{line:10,column:93}},6:{start:{line:11,column:4},end:{line:11,column:70}},7:{start:{line:12,column:4},end:{line:12,column:27}},8:{start:{line:13,column:4},end:{line:13,column:29}},9:{start:{line:14,column:4},end:{line:14,column:27}},10:{start:{line:17,column:4},end:{line:17,column:60}},11:{start:{line:20,column:4},end:{line:22,column:6}},12:{start:{line:23,column:4},end:{line:23,column:57}},13:{start:{line:24,column:4},end:{line:24,column:27}},14:{start:{line:27,column:4},end:{line:27,column:57}},15:{start:{line:27,column:33},end:{line:27,column:55}},16:{start:{line:28,column:4},end:{line:28,column:57}},17:{start:{line:28,column:33},end:{line:28,column:55}},18:{start:{line:29,column:4},end:{line:29,column:58}},19:{start:{line:29,column:34},end:{line:29,column:56}},20:{start:{line:32,column:4},end:{line:32,column:60}},21:{start:{line:33,column:4},end:{line:33,column:23}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:16},end:{line:6,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:13},end:{line:15,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:20},end:{line:18,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:18},end:{line:25,column:3}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:22},end:{line:30,column:3}},line:26},5:{name:"(anonymous_5)",decl:{start:{line:27,column:27},end:{line:27,column:28}},loc:{start:{line:27,column:33},end:{line:27,column:55}},line:27},6:{name:"(anonymous_6)",decl:{start:{line:28,column:27},end:{line:28,column:28}},loc:{start:{line:28,column:33},end:{line:28,column:55}},line:28},7:{name:"(anonymous_7)",decl:{start:{line:29,column:28},end:{line:29,column:29}},loc:{start:{line:29,column:34},end:{line:29,column:56}},line:29},8:{name:"(anonymous_8)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:13},end:{line:34,column:3}},line:31}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts"],names:[],mappings:"AAEA,qBAAqB,YAAY;AAAA,EAC/B,OAAuB;AAAA,EACvB,aAAyC;AAAA,EACzC,UAAkC;AAAA,EAElC,cAAc;AAAA,EAAC;AAAA,EAEf,MAAM,KAAU;AACd,SAAK,OAAO;AACZ,SAAK,aAAa,SAAS,cAAc,KAAK;AAC9C,SAAK,WAAW,YAAY;AAC5B,SAAK,WAAW,aAAa,eAAe,oBAAoB;AAChE,SAAK,SAAS,OAAO;AACrB,SAAK,kBAAkB;AAEvB,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,kBAAkB;AAChB,SAAK,QAAS,YAAY,KAAK,KAAM,QAAQ,EAAE,QAAQ,CAAC;AAAA,EAC1D;AAAA,EAEA,SAAS,OAAe;AACtB,SAAK,WAAY,YAAY;AAAA,QACzB,KAAK;AAAA;AAET,SAAK,UAAU,KAAK,WAAY,cAAc,MAAM;AACpD,SAAK,gBAAgB;AAAA,EACvB;AAAA,EAEA,oBAAoB;AAClB,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,WAAW,MAAM,KAAK,gBAAgB,CAAC;AAAA,EACvD;AAAA,EAEA,WAAW;AACT,SAAK,WAAY,WAAY,YAAY,KAAK,UAAW;AACzD,SAAK,OAAO;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Vo=function(){return s},s}Vo();class Nfe{_map=(Vo().s[0]++,void 0);_container=(Vo().s[1]++,void 0);_textEl=(Vo().s[2]++,null);constructor(){Vo().f[0]++}onAdd(e){return Vo().f[1]++,Vo().s[3]++,this._map=e,Vo().s[4]++,this._container=document.createElement("div"),Vo().s[5]++,this._container.className="maplibregl-ctrl maplibregl-ctrl-group maplibregl-ctrl-zoom",Vo().s[6]++,this._container.setAttribute("data-wd-key","maplibre:ctrl-zoom"),Vo().s[7]++,this.setLabel("Zoom:"),Vo().s[8]++,this.addEventListeners(),Vo().s[9]++,this._container}updateZoomLevel(){Vo().f[2]++,Vo().s[10]++,this._textEl.innerHTML=this._map.getZoom().toFixed(2)}setLabel(e){Vo().f[3]++,Vo().s[11]++,this._container.innerHTML=`
      ${e} <span></span>
    `,Vo().s[12]++,this._textEl=this._container.querySelector("span"),Vo().s[13]++,this.updateZoomLevel()}addEventListeners(){Vo().f[4]++,Vo().s[14]++,this._map.on("render",()=>(Vo().f[5]++,Vo().s[15]++,this.updateZoomLevel())),Vo().s[16]++,this._map.on("zoomIn",()=>(Vo().f[6]++,Vo().s[17]++,this.updateZoomLevel())),Vo().s[18]++,this._map.on("zoomOut",()=>(Vo().f[7]++,Vo().s[19]++,this.updateZoomLevel()))}onRemove(){Vo().f[8]++,Vo().s[20]++,this._container.parentNode.removeChild(this._container),Vo().s[21]++,this._map=void 0}}function z9(n,e,t){const i={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(i["source-layer"]=t),i}function j9(n,e,t,i){const r={id:[t,i,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return i&&(r["source-layer"]=i),r}function N9(n,e,t){const i={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(i["source-layer"]=t),i}function bz(n,e){return{circle:e(n,.8),line:e(n,.6),polygon:e(n,.3),polygonOutline:e(n,.6),default:e(n,1)}}function Gfe(n,e){const t=[],i=[],r=[];for(const o of Object.keys(n)){const s=n[o];if(!s||s.length===0){const a=bz(o,e);i.push(z9(a.circle,o)),r.push(N9(a.line,o)),t.push(j9(a.polygon,a.polygonOutline,o))}else for(const a of s){const c=bz(a,e);i.push(z9(c.circle,o,a)),r.push(N9(c.line,o,a)),t.push(j9(c.polygon,c.polygonOutline,o,a))}}return t.concat(r).concat(i)}function Wfe(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const i={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},r={};for(const o of Object.keys(n.sources)){const s=n.sources[o];(s.type==="vector"||s.type==="geojson")&&(r[o]=s)}return Object.assign(n,{layers:[i].concat(e),sources:r})}const BO={polygonLayer:j9,lineLayer:N9,circleLayer:z9,generateInspectStyle:Wfe,generateColoredLayers:Gfe};function dr(){var n="/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",e="aec0f701e803624fae461cc89b5fc887ff556587",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",statementMap:{0:{start:{line:4,column:2},end:{line:8,column:3}},1:{start:{line:5,column:4},end:{line:5,column:33}},2:{start:{line:6,column:9},end:{line:8,column:3}},3:{start:{line:7,column:4},end:{line:7,column:30}},4:{start:{line:9,column:2},end:{line:13,column:3}},5:{start:{line:10,column:4},end:{line:10,column:28}},6:{start:{line:12,column:4},end:{line:12,column:23}},7:{start:{line:14,column:2},end:{line:14,column:29}},8:{start:{line:15,column:2},end:{line:15,column:11}},9:{start:{line:18,column:2},end:{line:18,column:84}},10:{start:{line:18,column:72},end:{line:18,column:84}},11:{start:{line:19,column:24},end:{line:19,column:51}},12:{start:{line:20,column:16},end:{line:20,column:52}},13:{start:{line:21,column:2},end:{line:23,column:3}},14:{start:{line:22,column:4},end:{line:22,column:104}},15:{start:{line:24,column:2},end:{line:26,column:3}},16:{start:{line:25,column:4},end:{line:25,column:96}},17:{start:{line:27,column:2},end:{line:29,column:3}},18:{start:{line:28,column:4},end:{line:28,column:94}},19:{start:{line:30,column:2},end:{line:30,column:14}}},fnMap:{0:{name:"changeLayer",decl:{start:{line:3,column:9},end:{line:3,column:20}},loc:{start:{line:3,column:31},end:{line:16,column:1}},line:3},1:{name:"colorHighlightedLayer",decl:{start:{line:17,column:16},end:{line:17,column:37}},loc:{start:{line:17,column:45},end:{line:31,column:1}},line:17}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:8,column:3}},{start:{line:6,column:9},end:{line:8,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:8,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},2:{loc:{start:{line:9,column:2},end:{line:13,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:13,column:3}},{start:{line:11,column:9},end:{line:13,column:3}}],line:9},3:{loc:{start:{line:18,column:2},end:{line:18,column:84}},type:"if",locations:[{start:{line:18,column:2},end:{line:18,column:84}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},4:{loc:{start:{line:18,column:6},end:{line:18,column:70}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:12}},{start:{line:18,column:16},end:{line:18,column:43}},{start:{line:18,column:47},end:{line:18,column:70}}],line:18},5:{loc:{start:{line:19,column:24},end:{line:19,column:51}},type:"binary-expr",locations:[{start:{line:19,column:24},end:{line:19,column:45}},{start:{line:19,column:49},end:{line:19,column:51}}],line:19},6:{loc:{start:{line:21,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:23,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},7:{loc:{start:{line:21,column:6},end:{line:21,column:62}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:27}},{start:{line:21,column:31},end:{line:21,column:62}}],line:21},8:{loc:{start:{line:24,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},9:{loc:{start:{line:24,column:6},end:{line:24,column:56}},type:"binary-expr",locations:[{start:{line:24,column:6},end:{line:24,column:29}},{start:{line:24,column:33},end:{line:24,column:56}}],line:24},10:{loc:{start:{line:27,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:27,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:27}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/highlight.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,YAAY;AAKnB,SAAS,YAAY,GAAqB,OAA2B;AACnE,MAAG,EAAE,SAAS,UAAU;AACtB,MAAE,MAAO,eAAe,IAAI;AAAA,EAC9B,WAAU,EAAE,SAAS,QAAQ;AAC3B,MAAE,MAAO,YAAY,IAAI;AAAA,EAC3B;AAEA,MAAG,YAAY,OAAO;AACpB,MAAE,SAAS,MAAM;AAAA,EACnB,OAAO;AACL,WAAO,EAAE,QAAQ;AAAA,EACnB;AACA,IAAE,KAAK,EAAE,KAAK;AACd,SAAO;AACT;AAEO,gBAAS,sBAAsB,OAAqD;AACzF,MAAG,CAAC,SAAS,MAAM,SAAS,gBAAgB,MAAM,SAAS,SAAU,QAAO;AAE5E,QAAM,gBAAgB,MAAM,cAAc,KAAK;AAC/C,QAAM,QAAQ,OAAO,YAAY,eAAe,CAAC;AAEjD,MAAG,MAAM,SAAS,UAAU,MAAM,SAAS,kBAAkB;AAC3D,WAAO,YAAY,SAAS,aAAa,OAAO,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EACpG;AAEA,MAAG,MAAM,SAAS,YAAY,MAAM,SAAS,UAAU;AACrD,WAAO,YAAY,SAAS,YAAY,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC5F;AAEA,MAAG,MAAM,SAAS,QAAQ;AACxB,WAAO,YAAY,SAAS,UAAU,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC1F;AAEA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"aec0f701e803624fae461cc89b5fc887ff556587"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return dr=function(){return s},s}dr();function OO(n,e){return dr().f[0]++,dr().s[0]++,n.type==="circle"?(dr().b[0][0]++,dr().s[1]++,n.paint["circle-radius"]=3):(dr().b[0][1]++,dr().s[2]++,n.type==="line"?(dr().b[1][0]++,dr().s[3]++,n.paint["line-width"]=2):dr().b[1][1]++),dr().s[4]++,"filter"in e?(dr().b[2][0]++,dr().s[5]++,n.filter=e.filter):(dr().b[2][1]++,dr().s[6]++,delete n.filter),dr().s[7]++,n.id=n.id+"_highlight",dr().s[8]++,n}function Qfe(n){if(dr().f[1]++,dr().s[9]++,dr().b[4][0]++,!n||(dr().b[4][1]++,n.type==="background")||(dr().b[4][2]++,n.type==="raster"))return dr().b[3][0]++,dr().s[10]++,null;dr().b[3][1]++;const e=(dr().s[11]++,dr().b[5][0]++,n["source-layer"]||(dr().b[5][1]++,"")),t=(dr().s[12]++,fX.brightColor(e,1));return dr().s[13]++,dr().b[7][0]++,n.type==="fill"||(dr().b[7][1]++,n.type==="fill-extrusion")?(dr().b[6][0]++,dr().s[14]++,OO(BO.polygonLayer(t,t,n.source,n["source-layer"]),n)):(dr().b[6][1]++,dr().s[15]++,dr().b[9][0]++,n.type==="symbol"||(dr().b[9][1]++,n.type==="circle")?(dr().b[8][0]++,dr().s[16]++,OO(BO.circleLayer(t,n.source,n["source-layer"]),n)):(dr().b[8][1]++,dr().s[17]++,n.type==="line"?(dr().b[10][0]++,dr().s[18]++,OO(BO.lineLayer(t,n.source,n["source-layer"]),n)):(dr().b[10][1]++,dr().s[19]++,null)))}function OP(){var n="/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",e="a9dc98f82c73787713de0672aff7a601bfeb069d",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:115}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,WAAW,iBAAiB,gFAAgF,KAAK;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a9dc98f82c73787713de0672aff7a601bfeb069d"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return OP=function(){return s},s}OP();OP().s[0]++;cx.setRTLTextPlugin("https://unpkg.com/@mapbox/mapbox-gl-rtl-text@0.2.3/mapbox-gl-rtl-text.min.js",!1);function IO(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(y){try{f(i.next(y))}catch(_){s(_)}}function c(y){try{f(i.throw(y))}catch(_){s(_)}}function f(y){y.done?o(y.value):r(y.value).then(a,c)}f((i=i.apply(n,e||[])).next())})}var K5=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function C6(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var TO,Cz;function xX(){if(Cz)return TO;Cz=1,TO=e;var n=Object.prototype.hasOwnProperty;function e(){for(var t={},i=0;i<arguments.length;i++){var r=arguments[i];for(var o in r)n.call(r,o)&&(t[o]=r[o])}return t}return TO}var kO={exports:{}},_z;function qfe(){return _z||(_z=1,(function(n,e){(function(){var t={};n.exports=t,t.simpleFilter=function(i,r){return r.filter(function(o){return t.test(i,o)})},t.test=function(i,r){return t.match(i,r)!==null},t.match=function(i,r,o){o=o||{};var s=0,a=[],c=r.length,f=0,y=0,_=o.pre||"",E=o.post||"",I=o.caseSensitive&&r||r.toLowerCase(),P;i=o.caseSensitive&&i||i.toLowerCase();for(var K=0;K<c;K++)P=r[K],I[K]===i[s]?(P=_+P+E,s+=1,y+=1+y):y=0,f+=y,a[a.length]=P;return s===i.length?(f=I===i?1/0:f,{rendered:a.join(""),score:f}):null},t.filter=function(i,r,o){return!r||r.length===0?[]:typeof i!="string"?r:(o=o||{},r.reduce(function(s,a,c,f){var y=a;o.extract&&(y=o.extract(a));var _=t.match(i,y,o);return _!=null&&(s[s.length]={string:_.rendered,score:_.score,index:c,original:a}),s},[]).sort(function(s,a){var c=a.score-s.score;return c||s.index-a.index}))}})()})(kO)),kO.exports}var DO,xz;function Yfe(){if(xz)return DO;xz=1;var n=function(e){return this.component=e,this.items=[],this.active=e.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};return n.prototype.show=function(){this.element.style.display="block"},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.add=function(e){this.items.push(e)},n.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0},n.prototype.isEmpty=function(){return!this.items.length},n.prototype.isVisible=function(){return this.element.style.display==="block"},n.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()},n.prototype.drawItem=function(e,t){var i=document.createElement("li"),r=document.createElement("a");t&&(i.className+=" active"),r.innerHTML=e.string,i.appendChild(r),this.element.appendChild(i),i.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),i.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,e)}).bind(this))},n.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()},n.prototype.move=function(e){this.active=e,this.draw()},n.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)},n.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)},n.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()},DO=n,DO}var RO,Mz;function Vfe(){if(Mz)return RO;Mz=1;var n=xX(),e=qfe(),t=Yfe(),i=function(r,o,s){return s=s||{},this.options=n({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},s),this.el=r,this.data=o||[],this.list=new t(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(a){this.handleKeyUp(a.keyCode,a)}).bind(this),!1),this.el.addEventListener("keydown",(function(a){this.handleKeyDown(a)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(a){this.handlePaste(a)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};return i.prototype.handleKeyUp=function(r,o){if(!(r===40||r===38||r===27||r===9)){if(r===13){this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),o.stopPropagation());return}this.handleInputChange(this.el.value)}},i.prototype.handleKeyDown=function(r){switch(r.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&r.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}},i.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},i.prototype.handlePaste=function(r){if(r.clipboardData)this.handleInputChange(r.clipboardData.getData("Text"));else{var o=this;setTimeout(function(){o.handleInputChange(r.target.value)},100)}},i.prototype.handleInputChange=function(r){if(this.query=this.normalize(r),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(o){for(var s=0;s<o.length&&(this.list.add(o[s]),s!==this.options.limit-1);s++);this.list.draw()}).bind(this))},i.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},i.prototype.update=function(r){this.data=r,this.handleKeyUp()},i.prototype.clear=function(){this.data=[],this.list.clear()},i.prototype.normalize=function(r){return r=r.toLowerCase(),r},i.prototype.match=function(r,o){return r.indexOf(o)>-1},i.prototype.value=function(r){if(this.selected=r,this.el.value=this.getItemValue(r||{place_name:this.query}),document.createEvent){var o=document.createEvent("HTMLEvents");o.initEvent("change",!0,!1),this.el.dispatchEvent(o)}else this.el.fireEvent("onchange")},i.prototype.getCandidates=function(r){var o={pre:"<strong>",post:"</strong>",extract:(function(a){return this.getItemValue(a)}).bind(this)},s;this.options.filter?(s=e.filter(this.query,this.data,o),s=s.map((function(a){return{original:a.original,string:this.render(a.original,a.string)}}).bind(this))):s=this.data.map((function(a){var c=this.render(a);return{original:a,string:c}}).bind(this)),r(s)},i.prototype.getItemValue=function(r){return r},i.prototype.render=function(r,o){if(o)return o;for(var s=r.original?this.getItemValue(r.original):this.getItemValue(r),a=this.normalize(s),c=a.lastIndexOf(this.query);c>-1;){var f=c+this.query.length;s=s.slice(0,c)+"<strong>"+s.slice(c,f)+"</strong>"+s.slice(f),c=a.slice(0,c).lastIndexOf(this.query)}return s},i.prototype.renderError=function(r){this.list.drawError(r)},RO=i,RO}var PO,wz;function $fe(){if(wz)return PO;wz=1;var n=Vfe();return PO=n,typeof window<"u"&&(window.Suggestions=n),PO}var Hfe=$fe(),Zfe=C6(Hfe),nS={exports:{}},Xfe=nS.exports,Sz;function Jfe(){return Sz||(Sz=1,(function(n){(function(e,t,i){n.exports?n.exports=i():e[t]=i()})(Xfe,"subtag",function(){var e="",t=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function i(c){return c.match(t)||[]}function r(c){return i(c).filter(function(f,y){return f&&y})}function o(c){return c=i(c),{language:c[1]||e,extlang:c[2]||e,script:c[3]||e,region:c[4]||e}}function s(c,f,y){Object.defineProperty(c,f,{value:y,enumerable:!0})}function a(c,f,y){function _(E){return i(E)[c]||e}s(_,"pattern",f),s(o,y,_)}return a(1,/^[a-zA-Z]{2,3}$/,"language"),a(2,/^[a-zA-Z]{3}$/,"extlang"),a(3,/^[a-zA-Z]{4}$/,"script"),a(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),s(o,"split",r),o})})(nS)),nS.exports}var epe=Jfe(),tpe=C6(epe),LO,Ez;function npe(){if(Ez)return LO;Ez=1;var n="Expected a function",e=NaN,t="[object Symbol]",i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,c=typeof K5=="object"&&K5&&K5.Object===Object&&K5,f=typeof self=="object"&&self&&self.Object===Object&&self,y=c||f||Function("return this")(),_=Object.prototype,E=_.toString,I=Math.max,P=Math.min,K=function(){return y.Date.now()};function z(ee,X,W){var se,ue,ve,ye,Ee,_e,Be=0,Fe=!1,Se=!1,qe=!0;if(typeof ee!="function")throw new TypeError(n);X=Z(X)||0,Q(W)&&(Fe=!!W.leading,Se="maxWait"in W,ve=Se?I(Z(W.maxWait)||0,X):ve,qe="trailing"in W?!!W.trailing:qe);function ut(Pt){var ke=se,Oe=ue;return se=ue=void 0,Be=Pt,ye=ee.apply(Oe,ke),ye}function ht(Pt){return Be=Pt,Ee=setTimeout(ze,X),Fe?ut(Pt):ye}function De(Pt){var ke=Pt-_e,Oe=Pt-Be,we=X-ke;return Se?P(we,ve-Oe):we}function Ie(Pt){var ke=Pt-_e,Oe=Pt-Be;return _e===void 0||ke>=X||ke<0||Se&&Oe>=ve}function ze(){var Pt=K();if(Ie(Pt))return Te(Pt);Ee=setTimeout(ze,De(Pt))}function Te(Pt){return Ee=void 0,qe&&se?ut(Pt):(se=ue=void 0,ye)}function vt(){Ee!==void 0&&clearTimeout(Ee),Be=0,se=_e=ue=Ee=void 0}function st(){return Ee===void 0?ye:Te(K())}function Et(){var Pt=K(),ke=Ie(Pt);if(se=arguments,ue=this,_e=Pt,ke){if(Ee===void 0)return ht(_e);if(Se)return Ee=setTimeout(ze,X),ut(_e)}return Ee===void 0&&(Ee=setTimeout(ze,X)),ye}return Et.cancel=vt,Et.flush=st,Et}function Q(ee){var X=typeof ee;return!!ee&&(X=="object"||X=="function")}function V(ee){return!!ee&&typeof ee=="object"}function $(ee){return typeof ee=="symbol"||V(ee)&&E.call(ee)==t}function Z(ee){if(typeof ee=="number")return ee;if($(ee))return e;if(Q(ee)){var X=typeof ee.valueOf=="function"?ee.valueOf():ee;ee=Q(X)?X+"":X}if(typeof ee!="string")return ee===0?ee:+ee;ee=ee.replace(i,"");var W=o.test(ee);return W||s.test(ee)?a(ee.slice(2),W?2:8):r.test(ee)?e:+ee}return LO=z,LO}var ipe=npe(),rpe=C6(ipe),ope=xX(),vm=C6(ope),F5={exports:{}},Bz;function spe(){if(Bz)return F5.exports;Bz=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(ee,X,W){return Function.prototype.apply.call(ee,X,W)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(ee){return Object.getOwnPropertyNames(ee).concat(Object.getOwnPropertySymbols(ee))}:t=function(ee){return Object.getOwnPropertyNames(ee)};function i(Z){console&&console.warn&&console.warn(Z)}var r=Number.isNaN||function(ee){return ee!==ee};function o(){o.init.call(this)}F5.exports=o,F5.exports.once=Q,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(Z){if(typeof Z!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Z)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(Z){if(typeof Z!="number"||Z<0||r(Z))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Z+".");s=Z}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(ee){if(typeof ee!="number"||ee<0||r(ee))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+ee+".");return this._maxListeners=ee,this};function c(Z){return Z._maxListeners===void 0?o.defaultMaxListeners:Z._maxListeners}o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(ee){for(var X=[],W=1;W<arguments.length;W++)X.push(arguments[W]);var se=ee==="error",ue=this._events;if(ue!==void 0)se=se&&ue.error===void 0;else if(!se)return!1;if(se){var ve;if(X.length>0&&(ve=X[0]),ve instanceof Error)throw ve;var ye=new Error("Unhandled error."+(ve?" ("+ve.message+")":""));throw ye.context=ve,ye}var Ee=ue[ee];if(Ee===void 0)return!1;if(typeof Ee=="function")e(Ee,this,X);else for(var _e=Ee.length,Be=P(Ee,_e),W=0;W<_e;++W)e(Be[W],this,X);return!0};function f(Z,ee,X,W){var se,ue,ve;if(a(X),ue=Z._events,ue===void 0?(ue=Z._events=Object.create(null),Z._eventsCount=0):(ue.newListener!==void 0&&(Z.emit("newListener",ee,X.listener?X.listener:X),ue=Z._events),ve=ue[ee]),ve===void 0)ve=ue[ee]=X,++Z._eventsCount;else if(typeof ve=="function"?ve=ue[ee]=W?[X,ve]:[ve,X]:W?ve.unshift(X):ve.push(X),se=c(Z),se>0&&ve.length>se&&!ve.warned){ve.warned=!0;var ye=new Error("Possible EventEmitter memory leak detected. "+ve.length+" "+String(ee)+" listeners added. Use emitter.setMaxListeners() to increase limit");ye.name="MaxListenersExceededWarning",ye.emitter=Z,ye.type=ee,ye.count=ve.length,i(ye)}return Z}o.prototype.addListener=function(ee,X){return f(this,ee,X,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(ee,X){return f(this,ee,X,!0)};function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _(Z,ee,X){var W={fired:!1,wrapFn:void 0,target:Z,type:ee,listener:X},se=y.bind(W);return se.listener=X,W.wrapFn=se,se}o.prototype.once=function(ee,X){return a(X),this.on(ee,_(this,ee,X)),this},o.prototype.prependOnceListener=function(ee,X){return a(X),this.prependListener(ee,_(this,ee,X)),this},o.prototype.removeListener=function(ee,X){var W,se,ue,ve,ye;if(a(X),se=this._events,se===void 0)return this;if(W=se[ee],W===void 0)return this;if(W===X||W.listener===X)--this._eventsCount===0?this._events=Object.create(null):(delete se[ee],se.removeListener&&this.emit("removeListener",ee,W.listener||X));else if(typeof W!="function"){for(ue=-1,ve=W.length-1;ve>=0;ve--)if(W[ve]===X||W[ve].listener===X){ye=W[ve].listener,ue=ve;break}if(ue<0)return this;ue===0?W.shift():K(W,ue),W.length===1&&(se[ee]=W[0]),se.removeListener!==void 0&&this.emit("removeListener",ee,ye||X)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(ee){var X,W,se;if(W=this._events,W===void 0)return this;if(W.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):W[ee]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete W[ee]),this;if(arguments.length===0){var ue=Object.keys(W),ve;for(se=0;se<ue.length;++se)ve=ue[se],ve!=="removeListener"&&this.removeAllListeners(ve);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(X=W[ee],typeof X=="function")this.removeListener(ee,X);else if(X!==void 0)for(se=X.length-1;se>=0;se--)this.removeListener(ee,X[se]);return this};function E(Z,ee,X){var W=Z._events;if(W===void 0)return[];var se=W[ee];return se===void 0?[]:typeof se=="function"?X?[se.listener||se]:[se]:X?z(se):P(se,se.length)}o.prototype.listeners=function(ee){return E(this,ee,!0)},o.prototype.rawListeners=function(ee){return E(this,ee,!1)},o.listenerCount=function(Z,ee){return typeof Z.listenerCount=="function"?Z.listenerCount(ee):I.call(Z,ee)},o.prototype.listenerCount=I;function I(Z){var ee=this._events;if(ee!==void 0){var X=ee[Z];if(typeof X=="function")return 1;if(X!==void 0)return X.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function P(Z,ee){for(var X=new Array(ee),W=0;W<ee;++W)X[W]=Z[W];return X}function K(Z,ee){for(;ee+1<Z.length;ee++)Z[ee]=Z[ee+1];Z.pop()}function z(Z){for(var ee=new Array(Z.length),X=0;X<ee.length;++X)ee[X]=Z[X].listener||Z[X];return ee}function Q(Z,ee){return new Promise(function(X,W){function se(ve){Z.removeListener(ee,ue),W(ve)}function ue(){typeof Z.removeListener=="function"&&Z.removeListener("error",se),X([].slice.call(arguments))}$(Z,ee,ue,{once:!0}),ee!=="error"&&V(Z,se,{once:!0})})}function V(Z,ee,X){typeof Z.on=="function"&&$(Z,"error",ee,X)}function $(Z,ee,X,W){if(typeof Z.on=="function")W.once?Z.once(ee,X):Z.on(ee,X);else if(typeof Z.addEventListener=="function")Z.addEventListener(ee,function se(ue){W.once&&Z.removeEventListener(ee,se),X(ue)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof Z)}return F5.exports}var ape=spe();const Oz={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}},lpe={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:"",es:"Buscar"},upe={en:"No results found",de:"Keine Ergebnisse gefunden",es:"No hay resultados",fr:"Aucun rsultat trouv"},cpe={en:"There was an error reaching the server",de:"Verbindung fehlgeschlagen",es:"Error al conectarse al servidor",fr:"Une erreur est survenue lors de la connexion au serveur"};var r3={placeholder:lpe,errorNoResults:upe,errorConnectionFailed:cpe};const Ape=/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/;class hpe{constructor(e,t){this.options={zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:void 0,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,proximityMinZoom:9,getItemValue:i=>i.text!==void 0?i.text:i.place_name,render:function(i){if(!i.geometry){const o=i.text,s=o.toLowerCase().indexOf(this.query.toLowerCase()),a=this.query.length,c=o.substring(0,s),f=o.substring(s,s+a),y=o.substring(s+a);return'<div class="maplibregl-ctrl-geocoder--suggestion"><svg class="maplibregl-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="maplibregl-ctrl-geocoder--suggestion-info"><div class="maplibregl-ctrl-geocoder--suggestion-title">'+c+'<span class="maplibregl-ctrl-geocoder--suggestion-match">'+f+"</span>"+y+"</div></div></div>"}const r=i.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--result"><svg class="maplibregl-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="maplibregl-ctrl-geocoder--result-title">'+r[0]+'</div><div class="maplibregl-ctrl-geocoder--result-address">'+r.splice(1,r.length).join(",")+"</div></div></div>"},popupRender:i=>{const r=i.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--suggestion popup-suggestion"><div class="maplibregl-ctrl-geocoder--suggestion-title popup-suggestion-title">'+r[0]+'</div><div class="maplibregl-ctrl-geocoder--suggestion-address popup-suggestion-address">'+r.splice(1,r.length).join(",")+"</div></div>"},showResultMarkers:!0,debounceSearch:200},this._eventEmitter=new ape.EventEmitter,this.options=vm({},this.options,t),this.fresh=!0,this.lastSelected=null,this.geocoderApi=e}addTo(e){function t(i,r){if(!document.body.contains(r))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const o=i.onAdd();r.appendChild(o)}if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const i=document.querySelectorAll(e);if(i.length===0)throw new Error("Element "+e+"not found.");if(i.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,i[0])}else if("addControl"in e)e.addControl(this);else throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element")}onAdd(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);const t=this.container=document.createElement("div");t.className="maplibregl-ctrl-geocoder maplibregl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";const i=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="search",this._inputEl.className="maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",rpe(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);const r=document.createElement("div");r.classList.add("maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("type","button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="maplibregl-ctrl-geocoder--button";const o=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(o),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),r.appendChild(this._clearEl),r.appendChild(this._loadingEl),t.appendChild(i),t.appendChild(this._inputEl),t.appendChild(r),this._typeahead=new Zfe(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.container.addEventListener("click",()=>{this._typeahead.update(this._typeahead.data)}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),t}createIcon(e,t){const i=document.createElementNS("http://www.w3.org/2000/svg","svg");if(i.setAttribute("class","maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+e),i.setAttribute("viewBox","0 0 18 18"),i.setAttribute("xml:space","preserve"),i.setAttribute("width","18"),i.setAttribute("height","18"),"innerHTML"in i)i.innerHTML=t;else{const r=document.createElement("div");r.innerHTML="<svg>"+t.valueOf().toString()+"</svg>";const o=r.firstChild,s=o.firstChild;i.appendChild(s)}return i}onRemove(){return this.container.remove(),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this}_onPaste(e){const t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(t)}_onKeyDown(e){if(e.keyCode===27&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();const o=this._inputEl.value;if(!o)return this.fresh=!0,e.keyCode!==9&&this.clear(e),this._clearEl.style.display="none";if(!(e.metaKey||[9,27,37,39,38,40].indexOf(e.keyCode)!==-1)){if(e.keyCode===13)if(!this.options.showResultsWhileTyping)this._typeahead.selected||this._geocode(o);else{this._typeahead.selected==null&&this.geocoderApi.getSuggestions?this._geocode(o,!0):this._typeahead.selected==null&&this.options.showResultMarkers&&this._fitBoundsForMarkers();return}o.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(o)}}_showButton(){this._inputEl.value.length>0&&(this._clearEl.style.display="block")}_hideButton(){this._typeahead.selected&&(this._clearEl.style.display="none")}_onBlur(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()}_onChange(){const e=this._typeahead.selected;if(e&&!e.geometry)e.placeId?this._geocode(e.placeId,!0,!0):this._geocode(e.text,!0);else if(e&&JSON.stringify(e)!==this.lastSelected){if(this._clearEl.style.display="none",this.options.flyTo){let t;if(this._removeResultMarkers(),e.properties&&Oz[e.properties.short_code])t=vm({},this.options.flyTo),this._map&&this._map.fitBounds(Oz[e.properties.short_code].bbox,t);else if(e.bbox){const i=e.bbox;t=vm({},this.options.flyTo),this._map&&this._map.fitBounds([[i[0],i[1]],[i[2],i[3]]],t)}else{const i={zoom:this.options.zoom};t=vm({},i,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}}this.options.marker&&this._maplibregl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._typeahead.selected=null,this._eventEmitter.emit("result",{result:e})}}_getConfigForRequest(){return["bbox","limit","proximity","countries","types","language","reverseMode"].reduce((i,r)=>(this.options[r]&&(["countries","types","language"].indexOf(r)>-1?i[r]=this.options[r].split(/[\s,]+/):i[r]=this.options[r],r==="proximity"&&this.options[r]&&typeof this.options[r].longitude=="number"&&typeof this.options[r].latitude=="number"&&(i[r]=[this.options[r].longitude,this.options[r].latitude])),i),{})}_geocode(e){return IO(this,arguments,void 0,function*(t,i=!1,r=!1){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t});const o=this._getConfigForRequest(),s=this._createGeocodeRequest(o,t,i,r),a=this.options.localGeocoder?this.options.localGeocoder(t)||[]:[];try{const c=yield s;yield this._handleGeocodeResponse(c,o,t,i,a)}catch(c){this._handleGeocodeErrorResponse(c,a)}return s})}_createGeocodeRequest(e,t,i,r){return this.options.localGeocoderOnly?Promise.resolve({}):this.options.reverseGeocode&&Ape.test(t)?this._createReverseGeocodeRequest(t,e):(e.query=t,this.geocoderApi.getSuggestions?i?this.geocoderApi.searchByPlaceId&&r?this.geocoderApi.searchByPlaceId(e):this.geocoderApi.forwardGeocode(e):this.geocoderApi.getSuggestions(e):this.geocoderApi.forwardGeocode(e))}_createReverseGeocodeRequest(e,t){const i=e.split(/[\s(,)?]+/).map(r=>parseFloat(r)).reverse();return t.query=i,t.limit=1,"proximity"in t&&delete t.proximity,this.geocoderApi.reverseGeocode(t)}_handleGeocodeResponse(e,t,i,r,o){return IO(this,void 0,void 0,function*(){this._loadingEl.style.display="none";let s={};e?s=e:s={type:"FeatureCollection",features:[]},s.config=t,this.fresh&&(this.fresh=!1),s.features=s.features?o.concat(s.features):o;const a=this.options.externalGeocoder?this.options.externalGeocoder(i,s.features,t)||Promise.resolve([]):Promise.resolve([]);try{const f=yield a;s.features=s.features?f.concat(s.features):f}catch{}this.options.filter&&s.features.length&&(s.features=s.features.filter(this.options.filter));let c=[];"suggestions"in s?c=s.suggestions:"place"in s?c=[s.place]:c=s.features,c.length?(this._clearEl.style.display="block",this._typeahead.update(c),(!this.options.showResultsWhileTyping||r)&&this.options.showResultMarkers&&(s.features.length>0||"place"in s)&&this._fitBoundsForMarkers(),this._eventEmitter.emit("results",s)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",s))})}_handleGeocodeErrorResponse(e,t){this._loadingEl.style.display="none",t.length&&this.options.localGeocoder?(this._clearEl.style.display="block",this._typeahead.update(t)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:t}),this._eventEmitter.emit("error",{error:e})}_clear(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0}clear(e){this._clear(e),this._inputEl.focus()}_clearOnBlur(e){e.relatedTarget&&this._clear(e)}_onQueryResult(e){if(!("features"in e)||!e.features.length)return;const t=e.features[0];this._typeahead.selected=t,this._inputEl.value=t.place_name,this._onChange()}_updateProximity(){if(this._map)if(this._map.getZoom()>this.options.proximityMinZoom){const e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat})}else this.setProximity(null)}_collapse(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("maplibregl-ctrl-geocoder--collapsed")}_unCollapse(){this.container.classList.remove("maplibregl-ctrl-geocoder--collapsed")}query(e){return IO(this,void 0,void 0,function*(){const t=yield this._geocode(e);this._onQueryResult(t)})}_renderError(){const e=`<div class='maplibre-gl-geocoder--error'>${this._localize("errorConnectionFailed")}</div>`;this._renderMessage(e)}_renderNoResults(){const e=`<div class='maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>
        ${this._localize("errorNoResults")}</div>`;this._renderMessage(e)}_renderMessage(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)}_localize(e){const t=tpe.language(this.options.language.split(",")[0]);return this.options.language&&r3?.[e][t]?r3[e][t]:r3[e].en}_fitBoundsForMarkers(){if(this._typeahead.data.length<1)return;const e=this._typeahead.data.filter(t=>typeof t!="string").slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){const i=vm({},{padding:100},this.options.flyTo),r=new this._maplibregl.LngLatBounds;for(const o of e)r.extend(o.geometry.coordinates);this._map.fitBounds(r,i)}return e.length>0&&this._maplibregl&&this._handleResultMarkers(e),this}setInput(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(e),this}setProximity(e){return this.options.proximity=e,this}getProximity(){return this.options.proximity}setRenderFunction(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this}getRenderFunction(){return this._typeahead.render}setLanguage(e){return this.options.language=e||this.options.language||navigator.language,this}getLanguage(){return this.options.language}getZoom(){return this.options.zoom}setZoom(e){return this.options.zoom=e,this}getFlyTo(){return this.options.flyTo}setFlyTo(e){return this.options.flyTo=e,this}getPlaceholder(){return this.options.placeholder}setPlaceholder(e){return this.placeholder=e||this.options.placeholder||this._localize("placeholder"),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this}getBbox(){return this.options.bbox}setBbox(e){return this.options.bbox=e,this}getCountries(){return this.options.countries}setCountries(e){return this.options.countries=e,this}getTypes(){return this.options.types}setTypes(e){return this.options.types=e,this}getMinLength(){return this.options.minLength}setMinLength(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this}getLimit(){return this.options.limit}setLimit(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this}getFilter(){return this.options.filter}setFilter(e){return this.options.filter=e,this}setGeocoderApi(e){return this.geocoderApi=e,this}getGeocoderApi(){return this.geocoderApi}_handleMarker(e){if(!this._map)return;this._removeMarker();const i=vm({},{color:"#4668F2"},this.options.marker);this.mapMarker=new this._maplibregl.Marker(i);let r;if(this.options.popup){const s=vm({},{},this.options.popup);r=new this._maplibregl.Popup(s).setHTML(this.options.popupRender(e))}return e.center?(this.mapMarker.setLngLat(e.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(r)):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(r)),this}_removeMarker(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)}_handleResultMarkers(e){if(!this._map)return;this._removeResultMarkers();let i=vm({},{color:"#4668F2"},this.options.showResultMarkers);for(const r of e){let o;if(this.options.showResultMarkers){this.options.showResultMarkers&&this.options.showResultMarkers.element&&(o=this.options.showResultMarkers.element.cloneNode(!0),i=vm(i,{element:o}));const s=new this._maplibregl.Marker(vm({},i,{element:o}));let a;if(this.options.popup){const f=vm({},{},this.options.popup);a=new this._maplibregl.Popup(f).setHTML(this.options.popupRender(r))}r.center?(s.setLngLat(r.center).addTo(this._map),this.options.popup&&s.setPopup(a)):r.geometry&&r.geometry.type&&r.geometry.type==="Point"&&r.geometry.coordinates&&(s.setLngLat(r.geometry.coordinates).addTo(this._map),this.options.popup&&s.setPopup(a)),this.resultMarkers.push(s)}}return this}_removeResultMarkers(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach(function(e){e.remove()}),this.resultMarkers=[])}on(e,t){return this._eventEmitter.on(e,t),this}once(e){return new Promise(t=>{this._eventEmitter.once(e,t)})}off(e,t){return this._eventEmitter.removeListener(e,t),this}}function Ht(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",e="1655c5d10102378b1e2627d777374c6f3c3f21a7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",statementMap:{0:{start:{line:21,column:26},end:{line:27,column:3}},1:{start:{line:28,column:16},end:{line:28,column:55}},2:{start:{line:29,column:2},end:{line:31,column:3}},3:{start:{line:30,column:4},end:{line:30,column:30}},4:{start:{line:32,column:18},end:{line:32,column:20}},5:{start:{line:33,column:2},end:{line:38,column:5}},6:{start:{line:34,column:19},end:{line:34,column:53}},7:{start:{line:35,column:4},end:{line:37,column:5}},8:{start:{line:36,column:6},end:{line:36,column:33}},9:{start:{line:39,column:23},end:{line:43,column:3}},10:{start:{line:44,column:2},end:{line:44,column:22}},11:{start:{line:47,column:24},end:{line:57,column:3}},12:{start:{line:58,column:14},end:{line:58,column:18}},13:{start:{line:60,column:4},end:{line:60,column:17}},14:{start:{line:61,column:4},end:{line:66,column:6}},15:{start:{line:67,column:4},end:{line:69,column:7}},16:{start:{line:68,column:6},end:{line:68,column:25}},17:{start:{line:72,column:17},end:{line:72,column:22}},18:{start:{line:73,column:4},end:{line:76,column:5}},19:{start:{line:74,column:6},end:{line:74,column:132}},20:{start:{line:77,column:4},end:{line:77,column:18}},21:{start:{line:80,column:16},end:{line:80,column:30}},22:{start:{line:81,column:28},end:{line:81,column:79}},23:{start:{line:82,column:4},end:{line:87,column:5}},24:{start:{line:83,column:6},end:{line:83,column:52}},25:{start:{line:84,column:6},end:{line:84,column:70}},26:{start:{line:85,column:6},end:{line:85,column:70}},27:{start:{line:86,column:6},end:{line:86,column:76}},28:{start:{line:88,column:4},end:{line:90,column:5}},29:{start:{line:89,column:6},end:{line:89,column:43}},30:{start:{line:91,column:4},end:{line:96,column:5}},31:{start:{line:92,column:6},end:{line:92,column:59}},32:{start:{line:93,column:6},end:{line:95,column:14}},33:{start:{line:94,column:8},end:{line:94,column:36}},34:{start:{line:99,column:20},end:{line:108,column:5}},35:{start:{line:109,column:21},end:{line:109,column:53}},36:{start:{line:110,column:4},end:{line:110,column:53}},37:{start:{line:111,column:16},end:{line:111,column:43}},38:{start:{line:112,column:26},end:{line:116,column:5}},39:{start:{line:113,column:21},end:{line:113,column:36}},40:{start:{line:114,column:19},end:{line:114,column:32}},41:{start:{line:115,column:6},end:{line:115,column:44}},42:{start:{line:117,column:4},end:{line:117,column:20}},43:{start:{line:118,column:4},end:{line:118,column:56}},44:{start:{line:119,column:4},end:{line:119,column:56}},45:{start:{line:120,column:4},end:{line:120,column:62}},46:{start:{line:121,column:21},end:{line:121,column:43}},47:{start:{line:122,column:24},end:{line:122,column:41}},48:{start:{line:123,column:4},end:{line:123,column:45}},49:{start:{line:124,column:16},end:{line:124,column:74}},50:{start:{line:125,column:4},end:{line:125,column:37}},51:{start:{line:126,column:20},end:{line:126,column:49}},52:{start:{line:127,column:17},end:{line:127,column:36}},53:{start:{line:128,column:25},end:{line:130,column:6}},54:{start:{line:131,column:20},end:{line:162,column:6}},55:{start:{line:139,column:8},end:{line:139,column:82}},56:{start:{line:141,column:62},end:{line:141,column:141}},57:{start:{line:143,column:8},end:{line:160,column:9}},58:{start:{line:144,column:10},end:{line:146,column:13}},59:{start:{line:145,column:12},end:{line:145,column:94}},60:{start:{line:147,column:10},end:{line:147,column:25}},61:{start:{line:149,column:10},end:{line:158,column:13}},62:{start:{line:150,column:12},end:{line:157,column:15}},63:{start:{line:159,column:10},end:{line:159,column:25}},64:{start:{line:163,column:4},end:{line:163,column:28}},65:{start:{line:164,column:4},end:{line:172,column:7}},66:{start:{line:165,column:6},end:{line:171,column:9}},67:{start:{line:173,column:4},end:{line:178,column:7}},68:{start:{line:174,column:6},end:{line:174,column:40}},69:{start:{line:174,column:33},end:{line:174,column:40}},70:{start:{line:175,column:6},end:{line:177,column:9}},71:{start:{line:179,column:4},end:{line:181,column:7}},72:{start:{line:180,column:6},end:{line:180,column:30}},73:{start:{line:182,column:4},end:{line:186,column:7}},74:{start:{line:183,column:6},end:{line:185,column:9}},75:{start:{line:187,column:4},end:{line:187,column:37}},76:{start:{line:188,column:4},end:{line:188,column:37}},77:{start:{line:190,column:22},end:{line:193,column:3}},78:{start:{line:191,column:18},end:{line:191,column:82}},79:{start:{line:191,column:66},end:{line:191,column:81}},80:{start:{line:192,column:4},end:{line:192,column:36}},81:{start:{line:195,column:27},end:{line:228,column:5}},82:{start:{line:197,column:25},end:{line:197,column:27}},83:{start:{line:198,column:8},end:{line:223,column:9}},84:{start:{line:199,column:26},end:{line:199,column:138}},85:{start:{line:200,column:27},end:{line:200,column:47}},86:{start:{line:201,column:26},end:{line:201,column:47}},87:{start:{line:202,column:10},end:{line:220,column:11}},88:{start:{line:203,column:27},end:{line:206,column:13}},89:{start:{line:207,column:26},end:{line:218,column:13}},90:{start:{line:219,column:12},end:{line:219,column:33}},91:{start:{line:222,column:10},end:{line:222,column:69}},92:{start:{line:224,column:8},end:{line:226,column:10}},93:{start:{line:229,column:21},end:{line:232,column:6}},94:{start:{line:233,column:4},end:{line:233,column:41}},95:{start:{line:234,column:4},end:{line:234,column:20}},96:{start:{line:237,column:14},end:{line:237,column:26}},97:{start:{line:238,column:4},end:{line:238,column:53}},98:{start:{line:239,column:4},end:{line:239,column:49}},99:{start:{line:240,column:4},end:{line:251,column:6}},100:{start:{line:247,column:10},end:{line:247,column:29}},101:{start:{line:254,column:22},end:{line:254,column:62}}},fnMap:{0:{name:"buildInspectStyle",decl:{start:{line:20,column:9},end:{line:20,column:26}},loc:{start:{line:20,column:78},end:{line:45,column:1}},line:20},1:{name:"(anonymous_1)",decl:{start:{line:33,column:48},end:{line:33,column:49}},loc:{start:{line:33,column:62},end:{line:38,column:3}},line:33},2:{name:"(anonymous_2)",decl:{start:{line:48,column:17},end:{line:48,column:18}},loc:{start:{line:48,column:23},end:{line:49,column:5}},line:48},3:{name:"(anonymous_3)",decl:{start:{line:50,column:18},end:{line:50,column:19}},loc:{start:{line:50,column:24},end:{line:51,column:5}},line:50},4:{name:"(anonymous_4)",decl:{start:{line:52,column:19},end:{line:52,column:20}},loc:{start:{line:52,column:25},end:{line:53,column:5}},line:52},5:{name:"(anonymous_5)",decl:{start:{line:54,column:14},end:{line:54,column:15}},loc:{start:{line:54,column:20},end:{line:55,column:5}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:59,column:2},end:{line:59,column:3}},loc:{start:{line:59,column:21},end:{line:70,column:3}},line:59},7:{name:"(anonymous_7)",decl:{start:{line:67,column:34},end:{line:67,column:35}},loc:{start:{line:67,column:40},end:{line:69,column:5}},line:67},8:{name:"(anonymous_8)",decl:{start:{line:71,column:2},end:{line:71,column:3}},loc:{start:{line:71,column:46},end:{line:78,column:3}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:79,column:2},end:{line:79,column:3}},loc:{start:{line:79,column:23},end:{line:97,column:3}},line:79},10:{name:"(anonymous_10)",decl:{start:{line:93,column:17},end:{line:93,column:18}},loc:{start:{line:93,column:23},end:{line:95,column:7}},line:93},11:{name:"(anonymous_11)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:22},end:{line:189,column:3}},line:98},12:{name:"(anonymous_12)",decl:{start:{line:112,column:26},end:{line:112,column:27}},loc:{start:{line:112,column:32},end:{line:116,column:5}},line:112},13:{name:"(anonymous_13)",decl:{start:{line:138,column:24},end:{line:138,column:25}},loc:{start:{line:138,column:44},end:{line:140,column:7}},line:138},14:{name:"(anonymous_14)",decl:{start:{line:141,column:25},end:{line:141,column:26}},loc:{start:{line:141,column:62},end:{line:141,column:141}},line:141},15:{name:"(anonymous_15)",decl:{start:{line:142,column:19},end:{line:142,column:20}},loc:{start:{line:142,column:33},end:{line:161,column:7}},line:142},16:{name:"(anonymous_16)",decl:{start:{line:144,column:36},end:{line:144,column:37}},loc:{start:{line:144,column:42},end:{line:146,column:11}},line:144},17:{name:"(anonymous_17)",decl:{start:{line:149,column:36},end:{line:149,column:37}},loc:{start:{line:149,column:42},end:{line:158,column:11}},line:149},18:{name:"(anonymous_18)",decl:{start:{line:164,column:25},end:{line:164,column:26}},loc:{start:{line:164,column:31},end:{line:172,column:5}},line:164},19:{name:"(anonymous_19)",decl:{start:{line:173,column:19},end:{line:173,column:20}},loc:{start:{line:173,column:26},end:{line:178,column:5}},line:173},20:{name:"(anonymous_20)",decl:{start:{line:179,column:20},end:{line:179,column:21}},loc:{start:{line:179,column:27},end:{line:181,column:5}},line:179},21:{name:"(anonymous_21)",decl:{start:{line:182,column:19},end:{line:182,column:20}},loc:{start:{line:182,column:27},end:{line:186,column:5}},line:182},22:{name:"(anonymous_22)",decl:{start:{line:190,column:22},end:{line:190,column:23}},loc:{start:{line:190,column:30},end:{line:193,column:3}},line:190},23:{name:"(anonymous_23)",decl:{start:{line:191,column:55},end:{line:191,column:56}},loc:{start:{line:191,column:66},end:{line:191,column:81}},line:191},24:{name:"(anonymous_24)",decl:{start:{line:194,column:2},end:{line:194,column:3}},loc:{start:{line:194,column:20},end:{line:235,column:3}},line:194},25:{name:"(anonymous_25)",decl:{start:{line:196,column:22},end:{line:196,column:23}},loc:{start:{line:196,column:40},end:{line:227,column:7}},line:196},26:{name:"(anonymous_26)",decl:{start:{line:236,column:2},end:{line:236,column:3}},loc:{start:{line:236,column:11},end:{line:252,column:3}},line:236},27:{name:"(anonymous_27)",decl:{start:{line:246,column:13},end:{line:246,column:14}},loc:{start:{line:246,column:20},end:{line:248,column:9}},line:246}},branchMap:{0:{loc:{start:{line:29,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:2},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29},1:{loc:{start:{line:35,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:37,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},2:{loc:{start:{line:35,column:8},end:{line:35,column:64}},type:"binary-expr",locations:[{start:{line:35,column:8},end:{line:35,column:32}},{start:{line:35,column:36},end:{line:35,column:64}}],line:35},3:{loc:{start:{line:74,column:15},end:{line:74,column:131}},type:"binary-expr",locations:[{start:{line:74,column:15},end:{line:74,column:71}},{start:{line:74,column:75},end:{line:74,column:131}}],line:74},4:{loc:{start:{line:82,column:4},end:{line:87,column:5}},type:"if",locations:[{start:{line:82,column:4},end:{line:87,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:82},5:{loc:{start:{line:88,column:4},end:{line:90,column:5}},type:"if",locations:[{start:{line:88,column:4},end:{line:90,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:88},6:{loc:{start:{line:88,column:8},end:{line:88,column:98}},type:"binary-expr",locations:[{start:{line:88,column:8},end:{line:88,column:26}},{start:{line:88,column:30},end:{line:88,column:98}}],line:88},7:{loc:{start:{line:91,column:4},end:{line:96,column:5}},type:"if",locations:[{start:{line:91,column:4},end:{line:96,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:91},8:{loc:{start:{line:91,column:8},end:{line:91,column:59}},type:"binary-expr",locations:[{start:{line:91,column:8},end:{line:91,column:26}},{start:{line:91,column:30},end:{line:91,column:59}}],line:91},9:{loc:{start:{line:143,column:8},end:{line:160,column:9}},type:"if",locations:[{start:{line:143,column:8},end:{line:160,column:9}},{start:{line:148,column:15},end:{line:160,column:9}}],line:143},10:{loc:{start:{line:174,column:6},end:{line:174,column:40}},type:"if",locations:[{start:{line:174,column:6},end:{line:174,column:40}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:174}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx"],names:[],mappings:"AA8LwB;AA9LxB,OAAO,WAAW;AAClB,SAAQ,kBAAiB;AACzB,OAAO,gBAAsI;AAC7I,OAAO,qBAAqB;AAC5B,OAAO,YAAY;AACnB,OAAO,6BAA6B;AACpC,OAAO,uCAAgE;AACvE,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAAgC,6BAA6B;AAC7D,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,sBAAoF;AAC3F,OAAO;AACP,SAAS,uBAA6C;AACtD,OAAO,aAAa;AACpB,SAAS,gBAAgB;AAEzB,SAAS,kBAAkB,kBAAsC,eAAmC,kBAAqC;AACvI,QAAM,kBAAkB;AAAA,IACtB,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,SAAS;AAAA,MACP,oBAAoB;AAAA,IACtB;AAAA,EACF;AAEA,QAAM,QAAQ,sBAAsB,gBAAgB;AACpD,MAAG,OAAO;AACR,kBAAc,KAAK,KAAK;AAAA,EAC1B;AAEA,QAAM,UAA+C,CAAC;AAEtD,SAAO,KAAK,iBAAiB,OAAO,EAAE,QAAQ,cAAY;AACxD,UAAM,SAAS,iBAAiB,QAAQ,QAAQ;AAChD,QAAG,OAAO,SAAS,YAAY,OAAO,SAAS,cAAc;AAC3D,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAAA,EACF,CAAC;AAED,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH;AAAA,IACA,QAAQ,CAAC,eAAe,EAAE,OAAO,aAAqC;AAAA,EACxE;AACA,SAAO;AACT;AAyBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,SAAS,CAAC;AAAA,EACZ;AAAA,EACA,YAAmC;AAAA,EAEnC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,MACV,aAAa;AAAA,IACf;AACA,YAAQ,GAAG,mBAAmB,MAAM;AAClC,WAAK,YAAY;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAGA,sBAAsB,WAAuC,WAA+B;AAC1F,QAAI,SAAS;AACb,QAAI;AACF,eAAS,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS;AAAA,IAC9H,SAAQ,IAAI;AAAA,IAEZ;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB;AACnB,UAAM,MAAM,KAAK,MAAM;AAEvB,UAAM,kBAAkB,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAC1E,QAAI,KAAK;AAIP,UAAI,SAAS,iBAAiB,EAAC,MAAM,KAAI,CAAC;AAC1C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,wBAAwB,KAAK,MAAM,SAAS;AAAA,IAClD;AAEA,QAAG,KAAK,MAAM,WAAW,KAAK,MAAM,uBAAuB,KAAK,MAAM,QAAQ,iBAAiB;AAC7F,WAAK,MAAM,QAAQ,gBAAgB;AAAA,IACrC;AACA,QAAI,KAAK,MAAM,WAAW,KAAK,MAAM,oBAAoB;AACvD,WAAK,MAAM,QAAQ,iBAAiB,eAAe;AAEnD,iBAAW,MAAM;AACf,aAAK,MAAM,QAAS,OAAO;AAAA,MAC7B,GAAG,GAAG;AAAA,IACR;AAAA,EAEF;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM;AAAA,MACd,WAAW,KAAK;AAAA,MAChB,OAAO,KAAK,MAAM;AAAA,MAClB,MAAM;AAAA,MACN,SAAS;AAAA;AAAA;AAAA,MAGT,0BAA0B;AAAA,IAC5B;AAEA,UAAM,WAAW,IAAI,SAAS,EAAC,UAAU,KAAI,CAAC;AAC9C,eAAW,YAAY,WAAU,SAAS,IAAI;AAC9C,UAAM,MAAM,IAAI,WAAW,IAAI,OAAO;AAEtC,UAAM,gBAAgB,MAAM;AAC1B,YAAM,SAAS,IAAI,UAAU;AAC7B,YAAM,OAAO,IAAI,QAAQ;AACzB,WAAK,MAAM,SAAS,EAAC,QAAQ,KAAI,CAAC;AAAA,IACpC;AACA,kBAAc;AAEd,QAAI,qBAAqB,QAAQ;AACjC,QAAI,qBAAqB,QAAQ;AACjC,QAAI,wBAAwB,QAAQ;AAEpC,UAAM,WAAW,KAAK,aAAa,GAAG;AAEtC,UAAM,cAAc,IAAI,YAAY;AACpC,QAAI,WAAW,aAAa,WAAW;AAEvC,UAAM,MAAM,IAAI,WAAW,kBAAkB,EAAC,gBAAe,KAAI,CAAC;AAClE,QAAI,WAAW,KAAK,WAAW;AAE/B,UAAM,UAAU,SAAS,cAAc,KAAK;AAC5C,UAAM,OAAO,WAAW,OAAO;AAE/B,UAAM,eAAe,IAAI,WAAW,MAAM;AAAA,MACxC,cAAc;AAAA,IAChB,CAAC;AAED,UAAM,UAAU,IAAI,gBAAgB;AAAA,MAClC,OAAO;AAAA,MACP,cAAc;AAAA,MACd,qBAAqB;AAAA,MACrB,4BAA4B;AAAA,MAC5B,mBAAmB;AAAA,MACnB,wBAAwB;AAAA,MACxB,kBAAkB,CAAC,SAAiB,UAAkB;AACpD,eAAO,MAAM,OAAO,YAAY,SAAS,KAAK,CAAC,EAAE,WAAW,GAAG,EAAE,OAAO;AAAA,MAC1E;AAAA,MACA,mBAAmB,CAAC,kBAAsC,kBAAsC,kBAAkB,kBAAkB,eAAe,KAAK,MAAM,gBAAgB;AAAA,MAC9K,aAAa,CAAC,aAA+B;AAC3C,YAAG,KAAK,MAAM,oBAAoB;AAChC,uBAAa,KAAK,QAAQ,MAAM;AAC9B,iBAAK,OAAO,oBAAC,qCAAkC,UAAoB,CAAE;AAAA,UACvE,CAAC;AACD,iBAAO;AAAA,QACT,OAAO;AACL,uBAAa,KAAK,QAAQ,MAAM;AAC9B,iBAAK,OAAO;AAAA,cAAC;AAAA;AAAA,gBACX;AAAA,gBACA,eAAe,KAAK;AAAA,gBACpB,MAAM,KAAK,MAAM;AAAA;AAAA,YACnB,CAAG;AAAA,UACL,CAAC;AACD,iBAAO;AAAA,QACT;AAAA,MACF;AAAA,IACF,CAAC;AACD,QAAI,WAAW,OAAO;AAEtB,QAAI,GAAG,cAAc,MAAM;AACzB,WAAK,SAAS;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,QAAQ,OAAK;AAClB,UAAG,EAAE,aAAa,OAAQ;AAC1B,WAAK,MAAM,aAAc;AAAA,QACvB,KAAK,KAAK,MAAM;AAAA,MAClB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,SAAS,OAAK;AACnB,cAAQ,IAAI,SAAS,CAAC;AAAA,IACxB,CAAC;AAED,QAAI,GAAG,QAAQ,QAAM;AACnB,WAAK,SAAS;AAAA,QACZ,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,WAAW,aAAa;AAC/B,QAAI,GAAG,WAAW,aAAa;AAAA,EACjC;AAAA,EAEA,oBAAoB,CAAC,OAAe;AAClC,UAAM,QAAQ,KAAK,MAAM,SAAS,OAAO,UAAU,WAAS,MAAM,OAAO,EAAE;AAC3E,SAAK,MAAM,cAAc,KAAK;AAAA,EAChC;AAAA,EAEA,aAAa,KAAU;AACrB,UAAM,iBAAiB;AAAA,MACrB,gBAAgB,OAAO,WAAsC;AAC3D,cAAM,WAAW,CAAC;AAClB,YAAI;AACF,gBAAM,UAAU,gDAAgD,OAAO,KAAK;AAC5E,gBAAM,WAAW,MAAM,MAAM,OAAO;AACpC,gBAAM,UAAU,MAAM,SAAS,KAAK;AACpC,qBAAW,WAAW,QAAQ,UAAU;AACtC,kBAAM,SAAS;AAAA,cACb,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,cAC1C,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,YAC5C;AACA,kBAAM,QAAQ;AAAA,cACZ,MAAM;AAAA,cACN,UAAU;AAAA,gBACR,MAAM;AAAA,gBACN,aAAa;AAAA,cACf;AAAA,cACA,YAAY,QAAQ,WAAW;AAAA,cAC/B,YAAY,QAAQ;AAAA,cACpB,MAAM,QAAQ,WAAW;AAAA,cACzB,YAAY,CAAC,OAAO;AAAA,cACpB;AAAA,YACF;AACA,qBAAS,KAAK,KAAK;AAAA,UACrB;AAAA,QACF,SAAS,GAAG;AACV,kBAAQ,MAAM,wCAAwC,CAAC,EAAE;AAAA,QAC3D;AACA,eAAO;AAAA,UACL;AAAA,QACF;AAAA,MACF;AAAA,IACF;AACA,UAAM,WAAW,IAAI,iBAAiB,gBAAgB;AAAA,MACpD,aAAa,KAAK,MAAM,EAAE,QAAQ;AAAA,MAClC,YAAY;AAAA,IACd,CAAC;AACD,QAAI,WAAW,UAAU,UAAU;AACnC,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,SAAK,MAAM,UAAU,eAAe,EAAE,QAAQ,CAAC;AAC/C,SAAK,MAAM,aAAa,SAAS,EAAE,OAAO,CAAC;AAC3C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,UAAU;AAAA,QACxB,KAAK,OAAK;AAAC,eAAK,YAAY;AAAA,QAAE;AAAA,QAC9B,eAAY;AAAA;AAAA,IACb;AAAA,EACH;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1655c5d10102378b1e2627d777374c6f3c3f21a7"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ht=function(){return s},s}Ht();function dpe(n,e,t){Ht().f[0]++;const i=(Ht().s[0]++,{id:"background",type:"background",paint:{"background-color":"#1c1f24"}}),r=(Ht().s[1]++,Qfe(t));Ht().s[2]++,r?(Ht().b[0][0]++,Ht().s[3]++,e.push(r)):Ht().b[0][1]++;const o=(Ht().s[4]++,{});Ht().s[5]++,Object.keys(n.sources).forEach(a=>{Ht().f[1]++;const c=(Ht().s[6]++,n.sources[a]);Ht().s[7]++,Ht().b[2][0]++,c.type!=="raster"&&(Ht().b[2][1]++,c.type!=="raster-dem")?(Ht().b[1][0]++,Ht().s[8]++,o[a]=c):Ht().b[1][1]++});const s=(Ht().s[9]++,{...n,sources:o,layers:[i].concat(e)});return Ht().s[10]++,s}class fpe extends On.Component{static defaultProps=(Ht().s[11]++,{onMapLoaded:()=>{Ht().f[2]++},onDataChange:()=>{Ht().f[3]++},onLayerSelect:()=>{Ht().f[4]++},onChange:()=>{Ht().f[5]++},options:{}});container=(Ht().s[12]++,null);constructor(e){Ht().f[6]++,Ht().s[13]++,super(e),Ht().s[14]++,this.state={map:null,inspect:null,geocoder:null,zoomControl:null},Ht().s[15]++,WA.on("languageChanged",()=>{Ht().f[7]++,Ht().s[16]++,this.forceUpdate()})}shouldComponentUpdate(e,t){Ht().f[8]++;let i=(Ht().s[17]++,!1);Ht().s[18]++;try{Ht().s[19]++,i=(Ht().b[3][0]++,JSON.stringify(this.props)!==JSON.stringify(e)||(Ht().b[3][1]++,JSON.stringify(this.state)!==JSON.stringify(t)))}catch{}return Ht().s[20]++,i}componentDidUpdate(){Ht().f[9]++;const e=(Ht().s[21]++,this.state.map),t=(Ht().s[22]++,this.props.replaceAccessTokens(this.props.mapStyle));Ht().s[23]++,e?(Ht().b[4][0]++,Ht().s[24]++,e.setStyle(t,{diff:!0}),Ht().s[25]++,e.showTileBoundaries=this.props.options?.showTileBoundaries,Ht().s[26]++,e.showCollisionBoxes=this.props.options?.showCollisionBoxes,Ht().s[27]++,e.showOverdrawInspector=this.props.options?.showOverdrawInspector):Ht().b[4][1]++,Ht().s[28]++,Ht().b[6][0]++,this.state.inspect&&(Ht().b[6][1]++,this.props.inspectModeEnabled!==this.state.inspect._showInspectMap)?(Ht().b[5][0]++,Ht().s[29]++,this.state.inspect.toggleInspector()):Ht().b[5][1]++,Ht().s[30]++,Ht().b[8][0]++,this.state.inspect&&(Ht().b[8][1]++,this.props.inspectModeEnabled)?(Ht().b[7][0]++,Ht().s[31]++,this.state.inspect.setOriginalStyle(t),Ht().s[32]++,setTimeout(()=>{Ht().f[10]++,Ht().s[33]++,this.state.inspect.render()},500)):Ht().b[7][1]++}componentDidMount(){Ht().f[11]++;const e=(Ht().s[34]++,{...this.props.options,container:this.container,style:this.props.mapStyle,hash:!0,maxZoom:24,localIdeographFontFamily:!1}),t=(Ht().s[35]++,new _ue({metadata:!0}));Ht().s[36]++,cx.addProtocol("pmtiles",t.tile);const i=(Ht().s[37]++,new cx.Map(e));Ht().s[38]++;const r=()=>{Ht().f[12]++;const E=(Ht().s[39]++,i.getCenter()),I=(Ht().s[40]++,i.getZoom());Ht().s[41]++,this.props.onChange({center:E,zoom:I})};Ht().s[42]++,r(),Ht().s[43]++,i.showTileBoundaries=e.showTileBoundaries,Ht().s[44]++,i.showCollisionBoxes=e.showCollisionBoxes,Ht().s[45]++,i.showOverdrawInspector=e.showOverdrawInspector;const o=(Ht().s[46]++,this.initGeocoder(i)),s=(Ht().s[47]++,new Nfe);Ht().s[48]++,i.addControl(s,"top-right");const a=(Ht().s[49]++,new cx.NavigationControl({visualizePitch:!0}));Ht().s[50]++,i.addControl(a,"top-right");const c=(Ht().s[51]++,document.createElement("div")),f=(Ht().s[52]++,xH.createRoot(c)),y=(Ht().s[53]++,new cx.Popup({closeOnClick:!1})),_=(Ht().s[54]++,new BP({popup:y,showMapPopup:!0,showMapPopupOnHover:!1,showInspectMapPopupOnHover:!0,showInspectButton:!1,blockHoverPopupOnClick:!0,assignLayerColor:(E,I)=>(Ht().f[13]++,Ht().s[55]++,bu(fX.brightColor(E,I)).desaturate(.5).string()),buildInspectStyle:(E,I)=>(Ht().f[14]++,Ht().s[56]++,dpe(E,I,this.props.highlightedLayer)),renderPopup:E=>(Ht().f[15]++,Ht().s[57]++,this.props.inspectModeEnabled?(Ht().b[9][0]++,Ht().s[58]++,y.once("open",()=>{Ht().f[16]++,Ht().s[59]++,f.render(te.jsx(Ofe,{features:E}))}),Ht().s[60]++,c):(Ht().b[9][1]++,Ht().s[61]++,y.once("open",()=>{Ht().f[17]++,Ht().s[62]++,f.render(te.jsx(vX,{features:E,onLayerSelect:this.onLayerSelectById,zoom:this.state.zoom}))}),Ht().s[63]++,c))}));Ht().s[64]++,i.addControl(_),Ht().s[65]++,i.on("style.load",()=>{Ht().f[18]++,Ht().s[66]++,this.setState({map:i,inspect:_,geocoder:o,zoomControl:s,zoom:i.getZoom()})}),Ht().s[67]++,i.on("data",E=>{if(Ht().f[19]++,Ht().s[68]++,E.dataType!=="tile"){Ht().b[10][0]++,Ht().s[69]++;return}else Ht().b[10][1]++;Ht().s[70]++,this.props.onDataChange({map:this.state.map})}),Ht().s[71]++,i.on("error",E=>{Ht().f[20]++,Ht().s[72]++,console.log("ERROR",E)}),Ht().s[73]++,i.on("zoom",E=>{Ht().f[21]++,Ht().s[74]++,this.setState({zoom:i.getZoom()})}),Ht().s[75]++,i.on("dragend",r),Ht().s[76]++,i.on("zoomend",r)}onLayerSelectById=(Ht().s[77]++,e=>{Ht().f[22]++;const t=(Ht().s[78]++,this.props.mapStyle.layers.findIndex(i=>(Ht().f[23]++,Ht().s[79]++,i.id===e)));Ht().s[80]++,this.props.onLayerSelect(t)});initGeocoder(e){Ht().f[24]++;const t=(Ht().s[81]++,{forwardGeocode:async r=>{Ht().f[25]++;const o=(Ht().s[82]++,[]);Ht().s[83]++;try{const s=(Ht().s[84]++,`https://nominatim.openstreetmap.org/search?q=${r.query}&format=geojson&polygon_geojson=1&addressdetails=1`),a=(Ht().s[85]++,await fetch(s)),c=(Ht().s[86]++,await a.json());Ht().s[87]++;for(const f of c.features){const y=(Ht().s[88]++,[f.bbox[0]+(f.bbox[2]-f.bbox[0])/2,f.bbox[1]+(f.bbox[3]-f.bbox[1])/2]),_=(Ht().s[89]++,{type:"Feature",geometry:{type:"Point",coordinates:y},place_name:f.properties.display_name,properties:f.properties,text:f.properties.display_name,place_type:["place"],center:y});Ht().s[90]++,o.push(_)}}catch(s){Ht().s[91]++,console.error(`Failed to forwardGeocode with error: ${s}`)}return Ht().s[92]++,{features:o}}}),i=(Ht().s[93]++,new hpe(t,{placeholder:this.props.t("Search"),maplibregl:cx}));return Ht().s[94]++,e.addControl(i,"top-left"),Ht().s[95]++,i}render(){Ht().f[26]++;const e=(Ht().s[96]++,this.props.t);return Ht().s[97]++,this.state.geocoder?.setPlaceholder(e("Search")),Ht().s[98]++,this.state.zoomControl?.setLabel(e("Zoom:")),Ht().s[99]++,te.jsx("div",{className:"maputnik-map__map",role:"region","aria-label":e("Map view"),ref:t=>{Ht().f[27]++,Ht().s[100]++,this.container=t},"data-wd-key":"maplibre:map"})}}const ppe=(Ht().s[101]++,Mo()(fpe));var mpe=8,gpe={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},ype={"*":{type:"source"}},vpe=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],bpe={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Cpe={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},_pe={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},xpe={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},Mpe={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},wpe={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Spe={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Epe=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],Bpe={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ope={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ipe={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Tpe={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},kpe={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Dpe={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Rpe={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ppe={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Lpe={type:"array",value:"*"},Upe={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},Kpe={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},Fpe={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},zpe={type:"array",value:"*",minimum:1},jpe={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Npe={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Gpe={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},Wpe={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},Qpe=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],qpe={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},Ype={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Vpe={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},$pe={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Hpe={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Zpe={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Xpe={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Jpe={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},eme={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},tme={"*":{type:"string"}},nme={$version:mpe,$root:gpe,sources:ype,source:vpe,source_vector:bpe,source_raster:Cpe,source_raster_dem:_pe,source_geojson:xpe,source_video:Mpe,source_image:wpe,layer:Spe,layout:Epe,layout_background:Bpe,layout_fill:Ope,layout_circle:Ipe,layout_heatmap:Tpe,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:kpe,layout_symbol:Dpe,layout_raster:Rpe,layout_hillshade:Ppe,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:Lpe,filter_operator:Upe,geometry_type:Kpe,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:Fpe,expression:zpe,light:jpe,sky:Npe,terrain:Gpe,projection:Wpe,paint:Qpe,paint_fill:qpe,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:Ype,paint_circle:Vpe,paint_heatmap:$pe,paint_symbol:Hpe,paint_raster:Zpe,paint_hillshade:Xpe,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:Jpe,transition:eme,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:tme};const ime=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function rme(n,e){const t={};for(const i in n)i!=="ref"&&(t[i]=n[i]);return ime.forEach(i=>{i in e&&(t[i]=e[i])}),t}function MX(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=rme(n[t],e[n[t].ref]));return n}class qg extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class IP{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[i,r]of t)this.bindings[i]=r}concat(e){return new IP(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}const _6={kind:"null"},Qn={kind:"number"},Jr={kind:"string"},zr={kind:"boolean"},a0={kind:"color"},x6={kind:"projectionDefinition"},rC={kind:"object"},Dr={kind:"value"},ome={kind:"error"},M6={kind:"collator"},w6={kind:"formatted"},S6={kind:"padding"},R4={kind:"colorArray"},E6={kind:"numberArray"},WM={kind:"resolvedImage"},B6={kind:"variableAnchorOffsetCollection"};function Af(n,e){return{kind:"array",itemType:n,N:e}}function Ya(n){if(n.kind==="array"){const e=Ya(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const sme=[_6,Qn,Jr,zr,a0,x6,w6,rC,Af(Dr),S6,E6,R4,WM,B6];function P4(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!P4(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of sme)if(!P4(t,e))return null}}return`Expected ${Ya(n)} but found ${Ya(e)} instead.`}function TP(n,e){return e.some(t=>t.kind===n.kind)}function oC(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function Fy(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const wX=.96422,SX=1,EX=.82521,BX=4/29,Rx=6/29,OX=3*Rx*Rx,ame=Rx*Rx*Rx,lme=Math.PI/180,ume=180/Math.PI;function IX(n){return n=n%360,n<0&&(n+=360),n}function TX([n,e,t,i]){n=UO(n),e=UO(e),t=UO(t);let r,o;const s=KO((.2225045*n+.7168786*e+.0606169*t)/SX);n===e&&e===t?r=o=s:(r=KO((.4360747*n+.3850649*e+.1430804*t)/wX),o=KO((.0139322*n+.0971045*e+.7141733*t)/EX));const a=116*s-16;return[a<0?0:a,500*(r-s),200*(s-o),i]}function UO(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function KO(n){return n>ame?Math.pow(n,1/3):n/OX+BX}function kX([n,e,t,i]){let r=(n+16)/116,o=isNaN(e)?r:r+e/500,s=isNaN(t)?r:r-t/200;return r=SX*zO(r),o=wX*zO(o),s=EX*zO(s),[FO(3.1338561*o-1.6168667*r-.4906146*s),FO(-.9787684*o+1.9161415*r+.033454*s),FO(.0719453*o-.2289914*r+1.4052427*s),i]}function FO(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function zO(n){return n>Rx?n*n*n:OX*(n-BX)}function cme(n){const[e,t,i,r]=TX(n),o=Math.sqrt(t*t+i*i);return[Math.round(o*1e4)?IX(Math.atan2(i,t)*ume):NaN,o,e,r]}function Ame([n,e,t,i]){return n=isNaN(n)?0:n*lme,kX([t,Math.cos(n)*e,Math.sin(n)*e,i])}function hme([n,e,t,i]){n=IX(n),e/=100,t/=100;function r(o){const s=(o+n/30)%12,a=e*Math.min(t,1-t);return t-a*Math.max(-1,Math.min(s-3,9-s,1))}return[r(0),r(8),r(4),i]}const dme=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function DX(n,e){return dme(n,e)?n[e]:void 0}function fme(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=DX(pme,n);if(e){const[r,o,s]=e;return[r/255,o/255,s/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const o=n.length<6?1:2;let s=1;return[z5(n.slice(s,s+=o)),z5(n.slice(s,s+=o)),z5(n.slice(s,s+=o)),z5(n.slice(s,s+o)||"ff")]}if(n.startsWith("rgb")){const r=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,o=n.match(r);if(o){const[s,a,c,f,y,_,E,I,P,K,z,Q]=o,V=[f||" ",E||" ",K].join("");if(V==="  "||V==="  /"||V===",,"||V===",,,"){const $=[c,_,P].join(""),Z=$==="%%%"?100:$===""?255:0;if(Z){const ee=[Ax(+a/Z,0,1),Ax(+y/Z,0,1),Ax(+I/Z,0,1),z?Iz(+z,Q):1];if(Tz(ee))return ee}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,i=n.match(t);if(i){const[r,o,s,a,c,f,y,_,E]=i,I=[s||" ",c||" ",y].join("");if(I==="  "||I==="  /"||I===",,"||I===",,,"){const P=[+o,Ax(+a,0,100),Ax(+f,0,100),_?Iz(+_,E):1];if(Tz(P))return hme(P)}}}function z5(n){return parseInt(n.padEnd(2,n),16)/255}function Iz(n,e){return Ax(e?n/100:n,0,1)}function Ax(n,e,t){return Math.min(Math.max(e,n),t)}function Tz(n){return!n.some(Number.isNaN)}const pme={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function sC(n,e,t){return n+t*(e-n)}function L4(n,e,t){return n.map((i,r)=>sC(i,e[r],t))}class Ts{constructor(e,t,i,r=1,o=!0){this.r=e,this.g=t,this.b=i,this.a=r,o||(this.r*=r,this.g*=r,this.b*=r,r||this.overwriteGetter("rgb",[e,t,i,r]))}static parse(e){if(e instanceof Ts)return e;if(typeof e!="string")return;const t=fme(e);if(t)return new Ts(...t,!1)}get rgb(){const{r:e,g:t,b:i,a:r}=this,o=r||1/0;return this.overwriteGetter("rgb",[e/o,t/o,i/o,r])}get hcl(){return this.overwriteGetter("hcl",cme(this.rgb))}get lab(){return this.overwriteGetter("lab",TX(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,i,r]=this.rgb;return`rgba(${[e,t,i].map(o=>Math.round(o*255)).join(",")},${r})`}static interpolate(e,t,i,r="rgb"){switch(r){case"rgb":{const[o,s,a,c]=L4(e.rgb,t.rgb,i);return new Ts(o,s,a,c,!1)}case"hcl":{const[o,s,a,c]=e.hcl,[f,y,_,E]=t.hcl;let I,P;if(!isNaN(o)&&!isNaN(f)){let $=f-o;f>o&&$>180?$-=360:f<o&&o-f>180&&($+=360),I=o+i*$}else isNaN(o)?isNaN(f)?I=NaN:(I=f,(a===1||a===0)&&(P=y)):(I=o,(_===1||_===0)&&(P=s));const[K,z,Q,V]=Ame([I,P??sC(s,y,i),sC(a,_,i),sC(c,E,i)]);return new Ts(K,z,Q,V,!1)}case"lab":{const[o,s,a,c]=kX(L4(e.lab,t.lab,i));return new Ts(o,s,a,c,!1)}}}}Ts.black=new Ts(0,0,0,1);Ts.white=new Ts(1,1,1,1);Ts.transparent=new Ts(0,0,0,0);Ts.red=new Ts(1,0,0,1);class kP{constructor(e,t,i){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const mme=["bottom","center","top"];class G9{constructor(e,t,i,r,o,s){this.text=e,this.image=t,this.scale=i,this.fontStack=r,this.textColor=o,this.verticalAlign=s}}class O1{constructor(e){this.sections=e}static fromString(e){return new O1([new G9(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof O1?e:O1.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class Tm{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Tm)return e;if(typeof e=="number")return new Tm([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new Tm(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new Tm(L4(e.values,t.values,i))}}class km{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof km)return e;if(typeof e=="number")return new km([e]);if(Array.isArray(e)){for(const t of e)if(typeof t!="number")return;return new km(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new km(L4(e.values,t.values,i))}}class df{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof df)return e;if(typeof e=="string"){const i=Ts.parse(e);return i?new df([i]):void 0}if(!Array.isArray(e))return;const t=[];for(const i of e){if(typeof i!="string")return;const r=Ts.parse(i);if(!r)return;t.push(r)}return new df(t)}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i,r="rgb"){const o=[];if(e.values.length!=t.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${t.values.length}), cannot interpolate.`);for(let s=0;s<e.values.length;s++)o.push(Ts.interpolate(e.values[s],t.values[s],i,r));return new df(o)}}class ul extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const gme=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class l0{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof l0)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const i=e[t],r=e[t+1];if(typeof i!="string"||!gme.has(i)||!Array.isArray(r)||r.length!==2||typeof r[0]!="number"||typeof r[1]!="number")return}return new l0(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){const r=e.values,o=t.values;if(r.length!==o.length)throw new ul(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const s=[];for(let a=0;a<r.length;a+=2){if(r[a]!==o[a])throw new ul(`Cannot interpolate values containing mismatched anchors. from[${a}]: ${r[a]}, to[${a}]: ${o[a]}`);s.push(r[a]);const[c,f]=r[a+1],[y,_]=o[a+1];s.push([sC(c,y,i),sC(f,_,i)])}return new l0(s)}}class Iv{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Iv({name:e,available:!1}):null}}class Sm{constructor(e,t,i){this.from=e,this.to=t,this.transition=i}static interpolate(e,t,i){return new Sm(e,t,i)}static parse(e){if(e instanceof Sm)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new Sm(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new Sm(e.from,e.to,e.transition);if(typeof e=="string")return new Sm(e,e,1)}}function RX(n,e,t,i){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof i>"u"||typeof i=="number"&&i>=0&&i<=1?null:`Invalid rgba value [${[n,e,t,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof i=="number"?[n,e,t,i]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function U4(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof Sm||n instanceof Ts||n instanceof kP||n instanceof O1||n instanceof Tm||n instanceof km||n instanceof df||n instanceof l0||n instanceof Iv)return!0;if(Array.isArray(n)){for(const e of n)if(!U4(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!U4(n[e]))return!1;return!0}else return!1}function xu(n){if(n===null)return _6;if(typeof n=="string")return Jr;if(typeof n=="boolean")return zr;if(typeof n=="number")return Qn;if(n instanceof Ts)return a0;if(n instanceof Sm)return x6;if(n instanceof kP)return M6;if(n instanceof O1)return w6;if(n instanceof Tm)return S6;if(n instanceof km)return E6;if(n instanceof df)return R4;if(n instanceof l0)return B6;if(n instanceof Iv)return WM;if(Array.isArray(n)){const e=n.length;let t;for(const i of n){const r=xu(i);if(!t)t=r;else{if(t===r)continue;t=Dr;break}}return Af(t||Dr,e)}else return rC}function r4(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof Ts||n instanceof Sm||n instanceof O1||n instanceof Tm||n instanceof km||n instanceof df||n instanceof l0||n instanceof Iv?n.toString():JSON.stringify(n)}class i2{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!U4(e[1]))return t.error("invalid value");const i=e[1];let r=xu(i);const o=t.expectedType;return r.kind==="array"&&r.N===0&&o&&o.kind==="array"&&(typeof o.N!="number"||o.N===0)&&(r=o),new i2(r,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const j5={string:Jr,number:Qn,boolean:zr,object:rC};class Em{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=1,r;const o=e[0];if(o==="array"){let a;if(e.length>2){const f=e[1];if(typeof f!="string"||!(f in j5)||f==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);a=j5[f],i++}else a=Dr;let c;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);c=e[2],i++}r=Af(a,c)}else{if(!j5[o])throw new Error(`Types doesn't contain name = ${o}`);r=j5[o]}const s=[];for(;i<e.length;i++){const a=t.parse(e[i],i,Dr);if(!a)return null;s.push(a)}return new Em(r,s)}evaluate(e){for(let t=0;t<this.args.length;t++){const i=this.args[t].evaluate(e);if(P4(this.type,xu(i))){if(t===this.args.length-1)throw new ul(`Expected value to be of type ${Ya(this.type)}, but found ${Ya(xu(i))} instead.`)}else return i}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const kz={"to-boolean":zr,"to-color":a0,"to-number":Qn,"to-string":Jr};class rv{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[0];if(!kz[i])throw new Error(`Can't parse ${i} as it is not part of the known types`);if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");const r=kz[i],o=[];for(let s=1;s<e.length;s++){const a=t.parse(e[s],s,Dr);if(!a)return null;o.push(a)}return new rv(r,o)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,i;for(const r of this.args){if(t=r.evaluate(e),i=null,t instanceof Ts)return t;if(typeof t=="string"){const o=e.parseColor(t);if(o)return o}else if(Array.isArray(t)&&(t.length<3||t.length>4?i=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:i=RX(t[0],t[1],t[2],t[3]),!i))return new Ts(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new ul(i||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const i of this.args){t=i.evaluate(e);const r=Tm.parse(t);if(r)return r}throw new ul(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"numberArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=km.parse(t);if(r)return r}throw new ul(`Could not parse numberArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"colorArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=df.parse(t);if(r)return r}throw new ul(`Could not parse colorArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const i of this.args){t=i.evaluate(e);const r=l0.parse(t);if(r)return r}throw new ul(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const i of this.args){if(t=i.evaluate(e),t===null)return 0;const r=Number(t);if(!isNaN(r))return r}throw new ul(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return O1.fromString(r4(this.args[0].evaluate(e)));case"resolvedImage":return Iv.fromString(r4(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return r4(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const yme=["Unknown","Point","LineString","Polygon"];class PX{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?yme[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache.get(e);return t||(t=Ts.parse(e),this._parseColorCache.set(e,t)),t}}class O6{constructor(e,t,i=[],r,o=new IP,s=[]){this.registry=e,this.path=i,this.key=i.map(a=>`[${a}]`).join(""),this.scope=o,this.errors=s,this.expectedType=r,this._isConstant=t}parse(e,t,i,r,o={}){return t?this.concat(t,i,r)._parse(e,o):this._parse(e,o)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function i(r,o,s){return s==="assert"?new Em(o,[r]):s==="coerce"?new rv(o,[r]):r}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if(typeof r!="string")return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const o=this.registry[r];if(o){let s=o.parse(e,this);if(!s)return null;if(this.expectedType){const a=this.expectedType,c=s.type;if((a.kind==="string"||a.kind==="number"||a.kind==="boolean"||a.kind==="object"||a.kind==="array")&&c.kind==="value")s=i(s,a,t.typeAnnotation||"assert");else if(a.kind==="projectionDefinition"&&["string","array"].includes(c.kind)||["color","formatted","resolvedImage"].includes(a.kind)&&["value","string"].includes(c.kind)||["padding","numberArray"].includes(a.kind)&&["value","number","array"].includes(c.kind)||a.kind==="colorArray"&&["value","string","array"].includes(c.kind)||a.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(c.kind))s=i(s,a,t.typeAnnotation||"coerce");else if(this.checkSubtype(a,c))return null}if(!(s instanceof i2)&&s.type.kind!=="resolvedImage"&&this._isConstant(s)){const a=new PX;try{s=new i2(s.type,s.evaluate(a))}catch(c){return this.error(c.message),null}}return s}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,i){const r=typeof e=="number"?this.path.concat(e):this.path,o=i?this.scope.concat(i):this.scope;return new O6(this.registry,this._isConstant,r,t||null,o,this.errors)}error(e,...t){const i=`${this.key}${t.map(r=>`[${r}]`).join("")}`;this.errors.push(new qg(i,e))}checkSubtype(e,t){const i=P4(e,t);return i&&this.error(i),i}}class I6{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const i=[];for(let o=1;o<e.length-1;o+=2){const s=e[o];if(typeof s!="string")return t.error(`Expected string, but found ${typeof s} instead.`,o);if(/[^a-zA-Z0-9_]/.test(s))return t.error("Variable names must contain only alphanumeric characters or '_'.",o);const a=t.parse(e[o+1],o+1);if(!a)return null;i.push([s,a])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return r?new I6(i,r):null}outputDefined(){return this.result.outputDefined()}}class T6{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const i=e[1];return t.scope.has(i)?new T6(i,t.scope.get(i)):t.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class DP{constructor(e,t,i){this.type=e,this.index=t,this.input=i}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Qn),r=t.parse(e[2],2,Af(t.expectedType||Dr));if(!i||!r)return null;const o=r.type;return new DP(o.itemType,i,r)}evaluate(e){const t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new ul(`Array index out of bounds: ${t} < 0.`);if(t>=i.length)throw new ul(`Array index out of bounds: ${t} > ${i.length-1}.`);if(t!==Math.floor(t))throw new ul(`Array index must be an integer, but found ${t} instead.`);return i[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class RP{constructor(e,t){this.type=zr,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Dr),r=t.parse(e[2],2,Dr);return!i||!r?null:TP(i.type,[zr,Jr,Qn,_6,Dr])?new RP(i,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ya(i.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!oC(t,["boolean","string","number","null"]))throw new ul(`Expected first argument to be of type boolean, string, number or null, but found ${Ya(xu(t))} instead.`);if(!oC(i,["string","array"]))throw new ul(`Expected second argument to be of type array or string, but found ${Ya(xu(i))} instead.`);return i.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class GS{constructor(e,t,i){this.type=Qn,this.needle=e,this.haystack=t,this.fromIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Dr),r=t.parse(e[2],2,Dr);if(!i||!r)return null;if(!TP(i.type,[zr,Jr,Qn,_6,Dr]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ya(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,Qn);return o?new GS(i,r,o):null}else return new GS(i,r)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!oC(t,["boolean","string","number","null"]))throw new ul(`Expected first argument to be of type boolean, string, number or null, but found ${Ya(xu(t))} instead.`);let r;if(this.fromIndex&&(r=this.fromIndex.evaluate(e)),oC(i,["string"])){const o=i.indexOf(t,r);return o===-1?-1:[...i.slice(0,o)].length}else{if(oC(i,["array"]))return i.indexOf(t,r);throw new ul(`Expected second argument to be of type array or string, but found ${Ya(xu(i))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class PP{constructor(e,t,i,r,o,s){this.inputType=e,this.type=t,this.input=i,this.cases=r,this.outputs=o,this.otherwise=s}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let i,r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const o={},s=[];for(let f=2;f<e.length-1;f+=2){let y=e[f];const _=e[f+1];Array.isArray(y)||(y=[y]);const E=t.concat(f);if(y.length===0)return E.error("Expected at least one branch label.");for(const P of y){if(typeof P!="number"&&typeof P!="string")return E.error("Branch labels must be numbers or strings.");if(typeof P=="number"&&Math.abs(P)>Number.MAX_SAFE_INTEGER)return E.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof P=="number"&&Math.floor(P)!==P)return E.error("Numeric branch labels must be integer values.");if(!i)i=xu(P);else if(E.checkSubtype(i,xu(P)))return null;if(typeof o[String(P)]<"u")return E.error("Branch labels must be unique.");o[String(P)]=s.length}const I=t.parse(_,f,r);if(!I)return null;r=r||I.type,s.push(I)}const a=t.parse(e[1],1,Dr);if(!a)return null;const c=t.parse(e[e.length-1],e.length-1,r);return!c||a.type.kind!=="value"&&t.concat(1).checkSubtype(i,a.type)?null:new PP(i,r,a,o,s,c)}evaluate(e){const t=this.input.evaluate(e);return(xu(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class LP{constructor(e,t,i){this.type=e,this.branches=t,this.otherwise=i}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const r=[];for(let s=1;s<e.length-1;s+=2){const a=t.parse(e[s],s,zr);if(!a)return null;const c=t.parse(e[s+1],s+1,i);if(!c)return null;r.push([a,c]),i=i||c.type}const o=t.parse(e[e.length-1],e.length-1,i);if(!o)return null;if(!i)throw new Error("Can't infer output type");return new LP(i,r,o)}evaluate(e){for(const[t,i]of this.branches)if(t.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,i]of this.branches)e(t),e(i);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}}class WS{constructor(e,t,i,r){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Dr),r=t.parse(e[2],2,Qn);if(!i||!r)return null;if(!TP(i.type,[Af(Dr),Jr,Dr]))return t.error(`Expected first argument to be of type array or string, but found ${Ya(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,Qn);return o?new WS(i.type,i,r,o):null}else return new WS(i.type,i,r)}evaluate(e){const t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);let r;if(this.endIndex&&(r=this.endIndex.evaluate(e)),oC(t,["string"]))return[...t].slice(i,r).join("");if(oC(t,["array"]))return t.slice(i,r);throw new ul(`Expected first argument to be of type array or string, but found ${Ya(xu(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function LX(n,e){const t=n.length-1;let i=0,r=t,o=0,s,a;for(;i<=r;)if(o=Math.floor((i+r)/2),s=n[o],a=n[o+1],s<=e){if(o===t||e<a)return o;i=o+1}else if(s>e)r=o-1;else throw new ul("Input is not a number.");return 0}class k6{constructor(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,o]of i)this.labels.push(r),this.outputs.push(o)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const i=t.parse(e[1],1,Qn);if(!i)return null;const r=[];let o=null;t.expectedType&&t.expectedType.kind!=="value"&&(o=t.expectedType);for(let s=1;s<e.length;s+=2){const a=s===1?-1/0:e[s],c=e[s+1],f=s,y=s+1;if(typeof a!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',f);if(r.length&&r[r.length-1][0]>=a)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',f);const _=t.parse(c,y,o);if(!_)return null;o=o||_.type,r.push([a,_])}return new k6(o,i,r)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=LX(t,r);return i[s].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function vme(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var jO,Dz;function bme(){if(Dz)return jO;Dz=1,jO=n;function n(e,t,i,r){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=i,this.p2y=r}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var i=e,r=0;r<8;r++){var o=this.sampleCurveX(i)-e;if(Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i=i-o/s}var a=0,c=1;for(i=e,r=0;r<20&&(o=this.sampleCurveX(i),!(Math.abs(o-e)<t));r++)e>o?a=i:c=i,i=(c-a)*.5+a;return i},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},jO}var Cme=bme(),_me=vme(Cme);class u0{constructor(e,t,i,r,o){this.type=e,this.operator=t,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(const[s,a]of o)this.labels.push(s),this.outputs.push(a)}static interpolationFactor(e,t,i,r){let o=0;if(e.name==="exponential")o=NO(t,e.base,i,r);else if(e.name==="linear")o=NO(t,1,i,r);else if(e.name==="cubic-bezier"){const s=e.controlPoints;o=new _me(s[0],s[1],s[2],s[3]).solve(NO(t,1,i,r))}return o}static parse(e,t){let[i,r,o,...s]=e;if(!Array.isArray(r)||r.length===0)return t.error("Expected an interpolation type expression.",1);if(r[0]==="linear")r={name:"linear"};else if(r[0]==="exponential"){const f=r[1];if(typeof f!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:f}}else if(r[0]==="cubic-bezier"){const f=r.slice(1);if(f.length!==4||f.some(y=>typeof y!="number"||y<0||y>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:f}}else return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(o=t.parse(o,2,Qn),!o)return null;const a=[];let c=null;(i==="interpolate-hcl"||i==="interpolate-lab")&&t.expectedType!=R4?c=a0:t.expectedType&&t.expectedType.kind!=="value"&&(c=t.expectedType);for(let f=0;f<s.length;f+=2){const y=s[f],_=s[f+1],E=f+3,I=f+4;if(typeof y!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',E);if(a.length&&a[a.length-1][0]>=y)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',E);const P=t.parse(_,I,c);if(!P)return null;c=c||P.type,a.push([y,P])}return!Fy(c,Qn)&&!Fy(c,x6)&&!Fy(c,a0)&&!Fy(c,S6)&&!Fy(c,E6)&&!Fy(c,R4)&&!Fy(c,B6)&&!Fy(c,Af(Qn))?t.error(`Type ${Ya(c)} is not interpolatable.`):new u0(c,i,r,o,a)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=LX(t,r),a=t[s],c=t[s+1],f=u0.interpolationFactor(this.interpolation,r,a,c),y=i[s].evaluate(e),_=i[s+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return sC(y,_,f);case"color":return Ts.interpolate(y,_,f);case"padding":return Tm.interpolate(y,_,f);case"colorArray":return df.interpolate(y,_,f);case"numberArray":return km.interpolate(y,_,f);case"variableAnchorOffsetCollection":return l0.interpolate(y,_,f);case"array":return L4(y,_,f);case"projectionDefinition":return Sm.interpolate(y,_,f)}case"interpolate-hcl":switch(this.type.kind){case"color":return Ts.interpolate(y,_,f,"hcl");case"colorArray":return df.interpolate(y,_,f,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Ts.interpolate(y,_,f,"lab");case"colorArray":return df.interpolate(y,_,f,"lab")}}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function NO(n,e,t,i){const r=i-t,o=n-t;return r===0?0:e===1?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}class K4{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=null;const r=t.expectedType;r&&r.kind!=="value"&&(i=r);const o=[];for(const a of e.slice(1)){const c=t.parse(a,1+o.length,i,void 0,{typeAnnotation:"omit"});if(!c)return null;i=i||c.type,o.push(c)}if(!i)throw new Error("No output type");return r&&o.some(a=>P4(r,a.type))?new K4(Dr,o):new K4(i,o)}evaluate(e){let t=null,i=0,r;for(const o of this.args)if(i++,t=o.evaluate(e),t&&t instanceof Iv&&!t.available&&(r||(r=t.name),t=null,i===this.args.length&&(t=r)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function Rz(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function xme(n,e,t){return e===t}function Mme(n,e,t){return e!==t}function wme(n,e,t){return e<t}function Sme(n,e,t){return e>t}function Eme(n,e,t){return e<=t}function Bme(n,e,t){return e>=t}function UX(n,e,t,i){return i.compare(e,t)===0}function Ome(n,e,t,i){return!UX(n,e,t,i)}function Ime(n,e,t,i){return i.compare(e,t)<0}function Tme(n,e,t,i){return i.compare(e,t)>0}function kme(n,e,t,i){return i.compare(e,t)<=0}function Dme(n,e,t,i){return i.compare(e,t)>=0}function E2(n,e,t){const i=n!=="=="&&n!=="!=";return class KX{constructor(o,s,a){this.type=zr,this.lhs=o,this.rhs=s,this.collator=a,this.hasUntypedArgument=o.type.kind==="value"||s.type.kind==="value"}static parse(o,s){if(o.length!==3&&o.length!==4)return s.error("Expected two or three arguments.");const a=o[0];let c=s.parse(o[1],1,Dr);if(!c)return null;if(!Rz(a,c.type))return s.concat(1).error(`"${a}" comparisons are not supported for type '${Ya(c.type)}'.`);let f=s.parse(o[2],2,Dr);if(!f)return null;if(!Rz(a,f.type))return s.concat(2).error(`"${a}" comparisons are not supported for type '${Ya(f.type)}'.`);if(c.type.kind!==f.type.kind&&c.type.kind!=="value"&&f.type.kind!=="value")return s.error(`Cannot compare types '${Ya(c.type)}' and '${Ya(f.type)}'.`);i&&(c.type.kind==="value"&&f.type.kind!=="value"?c=new Em(f.type,[c]):c.type.kind!=="value"&&f.type.kind==="value"&&(f=new Em(c.type,[f])));let y=null;if(o.length===4){if(c.type.kind!=="string"&&f.type.kind!=="string"&&c.type.kind!=="value"&&f.type.kind!=="value")return s.error("Cannot use collator to compare non-string types.");if(y=s.parse(o[3],3,M6),!y)return null}return new KX(c,f,y)}evaluate(o){const s=this.lhs.evaluate(o),a=this.rhs.evaluate(o);if(i&&this.hasUntypedArgument){const c=xu(s),f=xu(a);if(c.kind!==f.kind||!(c.kind==="string"||c.kind==="number"))throw new ul(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${c.kind}, ${f.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const c=xu(s),f=xu(a);if(c.kind!=="string"||f.kind!=="string")return e(o,s,a)}return this.collator?t(o,s,a,this.collator.evaluate(o)):e(o,s,a)}eachChild(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)}outputDefined(){return!0}}}const Rme=E2("==",xme,UX),Pme=E2("!=",Mme,Ome),Lme=E2("<",wme,Ime),Ume=E2(">",Sme,Tme),Kme=E2("<=",Eme,kme),Fme=E2(">=",Bme,Dme);class D6{constructor(e,t,i){this.type=M6,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");const r=t.parse(i["case-sensitive"]===void 0?!1:i["case-sensitive"],1,zr);if(!r)return null;const o=t.parse(i["diacritic-sensitive"]===void 0?!1:i["diacritic-sensitive"],1,zr);if(!o)return null;let s=null;return i.locale&&(s=t.parse(i.locale,1,Jr),!s)?null:new D6(r,o,s)}evaluate(e){return new kP(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class UP{constructor(e,t,i,r,o){this.type=Jr,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=o}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const i=t.parse(e[1],1,Qn);if(!i)return null;const r=e[2];if(typeof r!="object"||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let o=null;if(r.locale&&(o=t.parse(r.locale,1,Jr),!o))return null;let s=null;if(r.currency&&(s=t.parse(r.currency,1,Jr),!s))return null;let a=null;if(r["min-fraction-digits"]&&(a=t.parse(r["min-fraction-digits"],1,Qn),!a))return null;let c=null;return r["max-fraction-digits"]&&(c=t.parse(r["max-fraction-digits"],1,Qn),!c)?null:new UP(i,o,s,a,c)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class KP{constructor(e){this.type=w6,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");const r=[];let o=!1;for(let s=1;s<=e.length-1;++s){const a=e[s];if(o&&typeof a=="object"&&!Array.isArray(a)){o=!1;let c=null;if(a["font-scale"]&&(c=t.parse(a["font-scale"],1,Qn),!c))return null;let f=null;if(a["text-font"]&&(f=t.parse(a["text-font"],1,Af(Jr)),!f))return null;let y=null;if(a["text-color"]&&(y=t.parse(a["text-color"],1,a0),!y))return null;let _=null;if(a["vertical-align"]){if(typeof a["vertical-align"]=="string"&&!mme.includes(a["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${a["vertical-align"]}' instead.`);if(_=t.parse(a["vertical-align"],1,Jr),!_)return null}const E=r[r.length-1];E.scale=c,E.font=f,E.textColor=y,E.verticalAlign=_}else{const c=t.parse(e[s],1,Dr);if(!c)return null;const f=c.type.kind;if(f!=="string"&&f!=="value"&&f!=="null"&&f!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,r.push({content:c,scale:null,font:null,textColor:null,verticalAlign:null})}}return new KP(r)}evaluate(e){const t=i=>{const r=i.content.evaluate(e);return xu(r)===WM?new G9("",r,null,null,null,i.verticalAlign?i.verticalAlign.evaluate(e):null):new G9(r4(r),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null,i.verticalAlign?i.verticalAlign.evaluate(e):null)};return new O1(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}}class FP{constructor(e){this.type=WM,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const i=t.parse(e[1],1,Jr);return i?new FP(i):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),i=Iv.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i}eachChild(e){e(this.input)}outputDefined(){return!1}}class zP{constructor(e){this.type=Qn,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${Ya(i.type)} instead.`):new zP(i):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new ul(`Expected value to be of type string or array, but found ${Ya(xu(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const c0=8192;function zme(n,e){const t=jme(n[0]),i=Gme(n[1]),r=Math.pow(2,e.z);return[Math.round(t*r*c0),Math.round(i*r*c0)]}function jP(n,e){const t=Math.pow(2,e.z),i=(n[0]/c0+e.x)/t,r=(n[1]/c0+e.y)/t;return[Nme(i),Wme(r)]}function jme(n){return(180+n)/360}function Nme(n){return n*360-180}function Gme(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function Wme(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function QM(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function F4(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function Qme(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function qme(n,e,t){const i=n[0]-e[0],r=n[1]-e[1],o=n[0]-t[0],s=n[1]-t[1];return i*s-o*r===0&&i*o<=0&&r*s<=0}function R6(n,e,t,i){const r=[e[0]-n[0],e[1]-n[1]],o=[i[0]-t[0],i[1]-t[1]];return Hme(o,r)===0?!1:!!(Pz(n,e,t,i)&&Pz(t,i,n,e))}function Yme(n,e,t){for(const i of t)for(let r=0;r<i.length-1;++r)if(R6(n,e,i[r],i[r+1]))return!0;return!1}function B2(n,e,t=!1){let i=!1;for(const r of e)for(let o=0;o<r.length-1;o++){if(qme(n,r[o],r[o+1]))return t;Qme(n,r[o],r[o+1])&&(i=!i)}return i}function Vme(n,e){for(const t of e)if(B2(n,t))return!0;return!1}function FX(n,e){for(const t of n)if(!B2(t,e))return!1;for(let t=0;t<n.length-1;++t)if(Yme(n[t],n[t+1],e))return!1;return!0}function $me(n,e){for(const t of e)if(FX(n,t))return!0;return!1}function Hme(n,e){return n[0]*e[1]-n[1]*e[0]}function Pz(n,e,t,i){const r=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1],c=i[0]-t[0],f=i[1]-t[1],y=r*f-c*o,_=s*f-c*a;return y>0&&_<0||y<0&&_>0}function NP(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=[];for(let s=0;s<n[r].length;s++){const a=zme(n[r][s],t);QM(e,a),o.push(a)}i.push(o)}return i}function zX(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=NP(n[r],e,t);i.push(o)}return i}function jX(n,e,t,i){if(n[0]<t[0]||n[0]>t[2]){const r=i*.5;let o=n[0]-t[0]>r?-i:t[0]-n[0]>r?i:0;o===0&&(o=n[0]-t[2]>r?-i:t[2]-n[0]>r?i:0),n[0]+=o}QM(e,n)}function Zme(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function Lz(n,e,t,i){const r=Math.pow(2,i.z)*c0,o=[i.x*c0,i.y*c0],s=[];for(const a of n)for(const c of a){const f=[c.x+o[0],c.y+o[1]];jX(f,e,t,r),s.push(f)}return s}function Uz(n,e,t,i){const r=Math.pow(2,i.z)*c0,o=[i.x*c0,i.y*c0],s=[];for(const a of n){const c=[];for(const f of a){const y=[f.x+o[0],f.y+o[1]];QM(e,y),c.push(y)}s.push(c)}if(e[2]-e[0]<=r/2){Zme(e);for(const a of s)for(const c of a)jX(c,e,t,r)}return s}function Xme(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=NP(e.coordinates,i,r),s=Lz(n.geometry(),t,i,r);if(!F4(t,i))return!1;for(const a of s)if(!B2(a,o))return!1}if(e.type==="MultiPolygon"){const o=zX(e.coordinates,i,r),s=Lz(n.geometry(),t,i,r);if(!F4(t,i))return!1;for(const a of s)if(!Vme(a,o))return!1}return!0}function Jme(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=NP(e.coordinates,i,r),s=Uz(n.geometry(),t,i,r);if(!F4(t,i))return!1;for(const a of s)if(!FX(a,o))return!1}if(e.type==="MultiPolygon"){const o=zX(e.coordinates,i,r),s=Uz(n.geometry(),t,i,r);if(!F4(t,i))return!1;for(const a of s)if(!$me(a,o))return!1}return!0}class aC{constructor(e,t){this.type=zr,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(U4(e[1])){const i=e[1];if(i.type==="FeatureCollection"){const r=[];for(const o of i.features){const{type:s,coordinates:a}=o.geometry;s==="Polygon"&&r.push(a),s==="MultiPolygon"&&r.push(...a)}if(r.length){const o={type:"MultiPolygon",coordinates:r};return new aC(i,o)}}else if(i.type==="Feature"){const r=i.geometry.type;if(r==="Polygon"||r==="MultiPolygon")return new aC(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new aC(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return Xme(e,this.geometries);if(e.geometryType()==="LineString")return Jme(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class NX{constructor(e=[],t=(i,r)=>i<r?-1:i>r?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:i}=this,r=t[e];for(;e>0;){const o=e-1>>1,s=t[o];if(i(r,s)>=0)break;t[e]=s,e=o}t[e]=r}_down(e){const{data:t,compare:i}=this,r=this.length>>1,o=t[e];for(;e<r;){let s=(e<<1)+1;const a=s+1;if(a<this.length&&i(t[a],t[s])<0&&(s=a),i(t[s],o)>=0)break;t[e]=t[s],e=s}t[e]=o}}function ege(n,e){if(n.length<=1)return[n];const i=[];let r,o;for(const s of n){const a=tge(s);a!==0&&(s.area=Math.abs(a),o===void 0&&(o=a<0),o===a<0?(r&&i.push(r),r=[s]):r.push(s))}return r&&i.push(r),i}function tge(n){let e=0;for(let t=0,i=n.length,r=i-1,o,s;t<i;r=t++)o=n[t],s=n[r],e+=(s.x-o.x)*(o.y+s.y);return e}const nge=6378.137,Kz=1/298.257223563,Fz=Kz*(2-Kz),zz=Math.PI/180;class GP{constructor(e){const t=zz*nge*1e3,i=Math.cos(e*zz),r=1/(1-Fz*(1-i*i)),o=Math.sqrt(r);this.kx=t*o*i,this.ky=t*o*r*(1-Fz)}distance(e,t){const i=this.wrap(e[0]-t[0])*this.kx,r=(e[1]-t[1])*this.ky;return Math.sqrt(i*i+r*r)}pointOnLine(e,t){let i=1/0,r,o,s,a;for(let c=0;c<e.length-1;c++){let f=e[c][0],y=e[c][1],_=this.wrap(e[c+1][0]-f)*this.kx,E=(e[c+1][1]-y)*this.ky,I=0;(_!==0||E!==0)&&(I=(this.wrap(t[0]-f)*this.kx*_+(t[1]-y)*this.ky*E)/(_*_+E*E),I>1?(f=e[c+1][0],y=e[c+1][1]):I>0&&(f+=_/this.kx*I,y+=E/this.ky*I)),_=this.wrap(t[0]-f)*this.kx,E=(t[1]-y)*this.ky;const P=_*_+E*E;P<i&&(i=P,r=f,o=y,s=c,a=I)}return{point:[r,o],index:s,t:Math.max(0,Math.min(1,a))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const W9=100,Q9=50;function GX(n,e){return e[0]-n[0]}function QS(n){return n[1]-n[0]+1}function R1(n,e){return n[1]>=n[0]&&n[1]<e}function q9(n,e){if(n[0]>n[1])return[null,null];const t=QS(n);if(e){if(t===2)return[n,null];const r=Math.floor(t/2);return[[n[0],n[0]+r],[n[0]+r,n[1]]]}if(t===1)return[n,null];const i=Math.floor(t/2)-1;return[[n[0],n[0]+i],[n[0]+i+1,n[1]]]}function Y9(n,e){if(!R1(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let i=e[0];i<=e[1];++i)QM(t,n[i]);return t}function V9(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const i of t)QM(e,i);return e}function jz(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function WP(n,e,t){if(!jz(n)||!jz(e))return NaN;let i=0,r=0;return n[2]<e[0]&&(i=e[0]-n[2]),n[0]>e[2]&&(i=n[0]-e[2]),n[1]>e[3]&&(r=n[1]-e[3]),n[3]<e[1]&&(r=e[1]-n[3]),t.distance([0,0],[i,r])}function Yb(n,e,t){const i=t.pointOnLine(e,n);return t.distance(n,i.point)}function QP(n,e,t,i,r){const o=Math.min(Yb(n,[t,i],r),Yb(e,[t,i],r)),s=Math.min(Yb(t,[n,e],r),Yb(i,[n,e],r));return Math.min(o,s)}function ige(n,e,t,i,r){if(!(R1(e,n.length)&&R1(i,t.length)))return 1/0;let s=1/0;for(let a=e[0];a<e[1];++a){const c=n[a],f=n[a+1];for(let y=i[0];y<i[1];++y){const _=t[y],E=t[y+1];if(R6(c,f,_,E))return 0;s=Math.min(s,QP(c,f,_,E,r))}}return s}function rge(n,e,t,i,r){if(!(R1(e,n.length)&&R1(i,t.length)))return NaN;let s=1/0;for(let a=e[0];a<=e[1];++a)for(let c=i[0];c<=i[1];++c)if(s=Math.min(s,r.distance(n[a],t[c])),s===0)return s;return s}function oge(n,e,t){if(B2(n,e,!0))return 0;let i=1/0;for(const r of e){const o=r[0],s=r[r.length-1];if(o!==s&&(i=Math.min(i,Yb(n,[s,o],t)),i===0))return i;const a=t.pointOnLine(r,n);if(i=Math.min(i,t.distance(n,a.point)),i===0)return i}return i}function sge(n,e,t,i){if(!R1(e,n.length))return NaN;for(let o=e[0];o<=e[1];++o)if(B2(n[o],t,!0))return 0;let r=1/0;for(let o=e[0];o<e[1];++o){const s=n[o],a=n[o+1];for(const c of t)for(let f=0,y=c.length,_=y-1;f<y;_=f++){const E=c[_],I=c[f];if(R6(s,a,E,I))return 0;r=Math.min(r,QP(s,a,E,I,i))}}return r}function Nz(n,e){for(const t of n)for(const i of t)if(B2(i,e,!0))return!0;return!1}function age(n,e,t,i=1/0){const r=V9(n),o=V9(e);if(i!==1/0&&WP(r,o,t)>=i)return i;if(F4(r,o)){if(Nz(n,e))return 0}else if(Nz(e,n))return 0;let s=1/0;for(const a of n)for(let c=0,f=a.length,y=f-1;c<f;y=c++){const _=a[y],E=a[c];for(const I of e)for(let P=0,K=I.length,z=K-1;P<K;z=P++){const Q=I[z],V=I[P];if(R6(_,E,Q,V))return 0;s=Math.min(s,QP(_,E,Q,V,t))}}return s}function Gz(n,e,t,i,r,o){if(!o)return;const s=WP(Y9(i,o),r,t);s<e&&n.push([s,o,[0,0]])}function N5(n,e,t,i,r,o,s){if(!o||!s)return;const a=WP(Y9(i,o),Y9(r,s),t);a<e&&n.push([a,o,s])}function qS(n,e,t,i,r=1/0){let o=Math.min(i.distance(n[0],t[0][0]),r);if(o===0)return o;const s=new NX([[0,[0,n.length-1],[0,0]]],GX),a=V9(t);for(;s.length>0;){const c=s.pop();if(c[0]>=o)continue;const f=c[1],y=e?Q9:W9;if(QS(f)<=y){if(!R1(f,n.length))return NaN;if(e){const _=sge(n,f,t,i);if(isNaN(_)||_===0)return _;o=Math.min(o,_)}else for(let _=f[0];_<=f[1];++_){const E=oge(n[_],t,i);if(o=Math.min(o,E),o===0)return 0}}else{const _=q9(f,e);Gz(s,o,i,n,a,_[0]),Gz(s,o,i,n,a,_[1])}}return o}function YS(n,e,t,i,r,o=1/0){let s=Math.min(o,r.distance(n[0],t[0]));if(s===0)return s;const a=new NX([[0,[0,n.length-1],[0,t.length-1]]],GX);for(;a.length>0;){const c=a.pop();if(c[0]>=s)continue;const f=c[1],y=c[2],_=e?Q9:W9,E=i?Q9:W9;if(QS(f)<=_&&QS(y)<=E){if(!R1(f,n.length)&&R1(y,t.length))return NaN;let I;if(e&&i)I=ige(n,f,t,y,r),s=Math.min(s,I);else if(e&&!i){const P=n.slice(f[0],f[1]+1);for(let K=y[0];K<=y[1];++K)if(I=Yb(t[K],P,r),s=Math.min(s,I),s===0)return s}else if(!e&&i){const P=t.slice(y[0],y[1]+1);for(let K=f[0];K<=f[1];++K)if(I=Yb(n[K],P,r),s=Math.min(s,I),s===0)return s}else I=rge(n,f,t,y,r),s=Math.min(s,I)}else{const I=q9(f,e),P=q9(y,i);N5(a,s,r,n,t,I[0],P[0]),N5(a,s,r,n,t,I[0],P[1]),N5(a,s,r,n,t,I[1],P[0]),N5(a,s,r,n,t,I[1],P[1])}}return s}function lge(n,e){const t=n.geometry(),i=t.flat().map(s=>jP([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new GP(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,YS(i,!1,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,YS(i,!1,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,qS(i,!1,s.coordinates,r,o));break}if(o===0)return o}return o}function uge(n,e){const t=n.geometry(),i=t.flat().map(s=>jP([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new GP(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,YS(i,!0,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,YS(i,!0,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,qS(i,!0,s.coordinates,r,o));break}if(o===0)return o}return o}function cge(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const i=ege(t).map(s=>s.map(a=>a.map(c=>jP([c.x,c.y],n.canonical)))),r=new GP(i[0][0][0][1]);let o=1/0;for(const s of e)for(const a of i){switch(s.type){case"Point":o=Math.min(o,qS([s.coordinates],!1,a,r,o));break;case"LineString":o=Math.min(o,qS(s.coordinates,!0,a,r,o));break;case"Polygon":o=Math.min(o,age(a,s.coordinates,r,o));break}if(o===0)return o}return o}function GO(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}class lC{constructor(e,t){this.type=Qn,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(U4(e[1])){const i=e[1];if(i.type==="FeatureCollection")return new lC(i,i.features.map(r=>GO(r.geometry)).flat());if(i.type==="Feature")return new lC(i,GO(i.geometry));if("type"in i&&"coordinates"in i)return new lC(i,GO(i))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return lge(e,this.geometries);if(e.geometryType()==="LineString")return uge(e,this.geometries);if(e.geometryType()==="Polygon")return cge(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class qM{constructor(e){this.type=Dr,this.key=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=e[1];return i==null?t.error("Global state property must be defined."):typeof i!="string"?t.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new qM(i)}evaluate(e){var t;const i=(t=e.globals)===null||t===void 0?void 0:t.globalState;return!i||Object.keys(i).length===0?null:DX(i,this.key)}eachChild(){}outputDefined(){return!1}}const P6={"==":Rme,"!=":Pme,">":Ume,"<":Lme,">=":Fme,"<=":Kme,array:Em,at:DP,boolean:Em,case:LP,coalesce:K4,collator:D6,format:KP,image:FP,in:RP,"index-of":GS,interpolate:u0,"interpolate-hcl":u0,"interpolate-lab":u0,length:zP,let:I6,literal:i2,match:PP,number:Em,"number-format":UP,object:Em,slice:WS,step:k6,string:Em,"to-boolean":rv,"to-color":rv,"to-number":rv,"to-string":rv,var:T6,within:aC,distance:lC,"global-state":qM};class ff{constructor(e,t,i,r){this.name=e,this.type=t,this._evaluate=i,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const i=e[0],r=ff.definitions[i];if(!r)return t.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const o=Array.isArray(r)?r[0]:r.type,s=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=s.filter(([f])=>!Array.isArray(f)||f.length===e.length-1);let c=null;for(const[f,y]of a){c=new O6(t.registry,VS,t.path,null,t.scope);const _=[];let E=!1;for(let I=1;I<e.length;I++){const P=e[I],K=Array.isArray(f)?f[I-1]:f.type,z=c.parse(P,1+_.length,K);if(!z){E=!0;break}_.push(z)}if(!E){if(Array.isArray(f)&&f.length!==_.length){c.error(`Expected ${f.length} arguments, but found ${_.length} instead.`);continue}for(let I=0;I<_.length;I++){const P=Array.isArray(f)?f[I]:f.type,K=_[I];c.concat(I+1).checkSubtype(P,K.type)}if(c.errors.length===0)return new ff(i,o,y,_)}}if(a.length===1)t.errors.push(...c.errors);else{const y=(a.length?a:s).map(([E])=>hge(E)).join(" | "),_=[];for(let E=1;E<e.length;E++){const I=t.parse(e[E],1+_.length);if(!I)return null;_.push(Ya(I.type))}t.error(`Expected arguments of type ${y}, but found (${_.join(", ")}) instead.`)}return null}static register(e,t){ff.definitions=t;for(const i in t)e[i]=ff}}function Wz(n,[e,t,i,r]){e=e.evaluate(n),t=t.evaluate(n),i=i.evaluate(n);const o=r?r.evaluate(n):1,s=RX(e,t,i,o);if(s)throw new ul(s);return new Ts(e/255,t/255,i/255,o,!1)}function Qz(n,e){return n in e}function WO(n,e){const t=e[n];return typeof t>"u"?null:t}function Age(n,e,t,i){for(;t<=i;){const r=t+i>>1;if(e[r]===n)return!0;e[r]>n?i=r-1:t=r+1}return!1}function Tb(n){return{type:n}}ff.register(P6,{error:[ome,[Jr],(n,[e])=>{throw new ul(e.evaluate(n))}],typeof:[Jr,[Dr],(n,[e])=>Ya(xu(e.evaluate(n)))],"to-rgba":[Af(Qn,4),[a0],(n,[e])=>{const[t,i,r,o]=e.evaluate(n).rgb;return[t*255,i*255,r*255,o]}],rgb:[a0,[Qn,Qn,Qn],Wz],rgba:[a0,[Qn,Qn,Qn,Qn],Wz],has:{type:zr,overloads:[[[Jr],(n,[e])=>Qz(e.evaluate(n),n.properties())],[[Jr,rC],(n,[e,t])=>Qz(e.evaluate(n),t.evaluate(n))]]},get:{type:Dr,overloads:[[[Jr],(n,[e])=>WO(e.evaluate(n),n.properties())],[[Jr,rC],(n,[e,t])=>WO(e.evaluate(n),t.evaluate(n))]]},"feature-state":[Dr,[Jr],(n,[e])=>WO(e.evaluate(n),n.featureState||{})],properties:[rC,[],n=>n.properties()],"geometry-type":[Jr,[],n=>n.geometryType()],id:[Dr,[],n=>n.id()],zoom:[Qn,[],n=>n.globals.zoom],"heatmap-density":[Qn,[],n=>n.globals.heatmapDensity||0],elevation:[Qn,[],n=>n.globals.elevation||0],"line-progress":[Qn,[],n=>n.globals.lineProgress||0],accumulated:[Dr,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[Qn,Tb(Qn),(n,e)=>{let t=0;for(const i of e)t+=i.evaluate(n);return t}],"*":[Qn,Tb(Qn),(n,e)=>{let t=1;for(const i of e)t*=i.evaluate(n);return t}],"-":{type:Qn,overloads:[[[Qn,Qn],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[Qn],(n,[e])=>-e.evaluate(n)]]},"/":[Qn,[Qn,Qn],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[Qn,[Qn,Qn],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[Qn,[],()=>Math.LN2],pi:[Qn,[],()=>Math.PI],e:[Qn,[],()=>Math.E],"^":[Qn,[Qn,Qn],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[Qn,[Qn],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[Qn,[Qn],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[Qn,[Qn],(n,[e])=>Math.log(e.evaluate(n))],log2:[Qn,[Qn],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[Qn,[Qn],(n,[e])=>Math.sin(e.evaluate(n))],cos:[Qn,[Qn],(n,[e])=>Math.cos(e.evaluate(n))],tan:[Qn,[Qn],(n,[e])=>Math.tan(e.evaluate(n))],asin:[Qn,[Qn],(n,[e])=>Math.asin(e.evaluate(n))],acos:[Qn,[Qn],(n,[e])=>Math.acos(e.evaluate(n))],atan:[Qn,[Qn],(n,[e])=>Math.atan(e.evaluate(n))],min:[Qn,Tb(Qn),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[Qn,Tb(Qn),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[Qn,[Qn],(n,[e])=>Math.abs(e.evaluate(n))],round:[Qn,[Qn],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[Qn,[Qn],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[Qn,[Qn],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[zr,[Jr,Dr],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[zr,[Dr],(n,[e])=>n.id()===e.value],"filter-type-==":[zr,[Jr],(n,[e])=>n.geometryType()===e.value],"filter-<":[zr,[Jr,Dr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<r}],"filter-id-<":[zr,[Dr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<i}],"filter->":[zr,[Jr,Dr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>r}],"filter-id->":[zr,[Dr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>i}],"filter-<=":[zr,[Jr,Dr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<=r}],"filter-id-<=":[zr,[Dr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<=i}],"filter->=":[zr,[Jr,Dr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>=r}],"filter-id->=":[zr,[Dr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>=i}],"filter-has":[zr,[Dr],(n,[e])=>e.value in n.properties()],"filter-has-id":[zr,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[zr,[Af(Jr)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[zr,[Af(Dr)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[zr,[Jr,Af(Dr)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[zr,[Jr,Af(Dr)],(n,[e,t])=>Age(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:zr,overloads:[[[zr,zr],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[Tb(zr),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:zr,overloads:[[[zr,zr],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[Tb(zr),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[zr,[zr],(n,[e])=>!e.evaluate(n)],"is-supported-script":[zr,[Jr],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[Jr,[Jr],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[Jr,[Jr],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[Jr,Tb(Dr),(n,e)=>e.map(t=>r4(t.evaluate(n))).join("")],"resolved-locale":[Jr,[M6],(n,[e])=>e.evaluate(n).resolvedLocale()]});function hge(n){return Array.isArray(n)?`(${n.map(Ya).join(", ")})`:`(${Ya(n.type)}...)`}function VS(n){if(n instanceof T6)return VS(n.boundExpression);if(n instanceof ff&&n.name==="error")return!1;if(n instanceof D6)return!1;if(n instanceof aC)return!1;if(n instanceof lC)return!1;if(n instanceof qM)return!1;const e=n instanceof rv||n instanceof Em;let t=!0;return n.eachChild(i=>{e?t=t&&VS(i):t=t&&i instanceof i2}),t?qP(n)&&VP(n,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function qP(n){if(n instanceof ff){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof aC||n instanceof lC)return!1;let e=!0;return n.eachChild(t=>{e&&!qP(t)&&(e=!1)}),e}function YP(n){if(n instanceof ff&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!YP(t)&&(e=!1)}),e}function VP(n,e){if(n instanceof ff&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(i=>{t&&!VP(i,e)&&(t=!1)}),t}function $9(n){return{result:"success",value:n}}function hx(n){return{result:"error",value:n}}function dge(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function fge(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function pge(n){return!!n.expression&&n.expression.interpolated}function WX(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&xu(n)===rC}class mge{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new PX,this._defaultValue=t?bge(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s,this.expression.evaluate(this._evaluator)}evaluate(e,t,i,r,o,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s||null;try{const a=this.expression.evaluate(this._evaluator);if(a==null||typeof a=="number"&&a!==a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new ul(`Expected value to be one of ${Object.keys(this._enumValues).map(c=>JSON.stringify(c)).join(", ")}, but found ${JSON.stringify(a)} instead.`);return a}catch(a){return this._warningHistory[a.message]||(this._warningHistory[a.message]=!0,typeof console<"u"&&console.warn(a.message)),this._defaultValue}}}function gge(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in P6}function QX(n,e){const t=new O6(P6,VS,[],e?vge(e):void 0),i=t.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return i?$9(new mge(i,e)):hx(t.errors)}class qz{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!YP(t.expression),this.globalStateRefs=L6(t.expression)}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._styleExpression.evaluate(e,t,i,r,o,s)}}class Yz{constructor(e,t,i,r){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!YP(t.expression),this.globalStateRefs=L6(t.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._styleExpression.evaluate(e,t,i,r,o,s)}interpolationFactor(e,t,i){return this.interpolationType?u0.interpolationFactor(this.interpolationType,e,t,i):0}}function yge(n,e){const t=QX(n,e);if(t.result==="error")return t;const i=t.value.expression,r=qP(i);if(!r&&!dge(e))return hx([new qg("","data expressions not supported")]);const o=VP(i,["zoom"]);if(!o&&!fge(e))return hx([new qg("","zoom expressions not supported")]);const s=iS(i);if(!s&&!o)return hx([new qg("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(s instanceof qg)return hx([s]);if(s instanceof u0&&!pge(e))return hx([new qg("",'"interpolate" expressions cannot be used with this property')]);if(!s)return $9(r?new qz("constant",t.value):new qz("source",t.value));const a=s instanceof u0?s.interpolation:void 0;return $9(r?new Yz("camera",t.value,s.labels,a):new Yz("composite",t.value,s.labels,a))}function iS(n){let e=null;if(n instanceof I6)e=iS(n.result);else if(n instanceof K4){for(const t of n.args)if(e=iS(t),e)break}else(n instanceof k6||n instanceof u0)&&n.input instanceof ff&&n.input.name==="zoom"&&(e=n);return e instanceof qg||n.eachChild(t=>{const i=iS(t);i instanceof qg?e=i:!e&&i?e=new qg("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new qg("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function L6(n,e=new Set){return n instanceof qM&&e.add(n.key),n.eachChild(t=>{L6(t,e)}),e}function vge(n){const e={color:a0,string:Jr,number:Qn,enum:Jr,boolean:zr,formatted:w6,padding:S6,numberArray:E6,colorArray:R4,projectionDefinition:x6,resolvedImage:WM,variableAnchorOffsetCollection:B6};return n.type==="array"?Af(e[n.value]||Dr,n.length):e[n.type]}function bge(n){if(n.type==="color"&&WX(n.default))return new Ts(0,0,0,0);switch(n.type){case"color":return Ts.parse(n.default)||null;case"padding":return Tm.parse(n.default)||null;case"numberArray":return km.parse(n.default)||null;case"colorArray":return df.parse(n.default)||null;case"variableAnchorOffsetCollection":return l0.parse(n.default)||null;case"projectionDefinition":return Sm.parse(n.default)||null;default:return n.default===void 0?null:n.default}}function qX(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!qX(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const Cge={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function _ge(n){if(n==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};qX(n)||(n=$S(n));const e=QX(n,Cge);if(e.result==="error")throw new Error(e.value.map(t=>`${t.key}: ${t.message}`).join(", "));{const t=YX(n);return{filter:(i,r,o)=>e.value.evaluate(i,r,{},o),needGeometry:t,getGlobalStateRefs:()=>L6(e.value.expression)}}}function xge(n,e){return n<e?-1:n>e?1:0}function YX(n){if(!Array.isArray(n))return!1;if(n[0]==="within"||n[0]==="distance")return!0;for(let e=1;e<n.length;e++)if(YX(n[e]))return!0;return!1}function $S(n){if(!n)return!0;const e=n[0];return n.length<=1?e!=="any":e==="=="?QO(n[1],n[2],"=="):e==="!="?G5(QO(n[1],n[2],"==")):e==="<"||e===">"||e==="<="||e===">="?QO(n[1],n[2],e):e==="any"?Mge(n.slice(1)):e==="all"?["all"].concat(n.slice(1).map($S)):e==="none"?["all"].concat(n.slice(1).map($S).map(G5)):e==="in"?Vz(n[1],n.slice(2)):e==="!in"?G5(Vz(n[1],n.slice(2))):e==="has"?$z(n[1]):e==="!has"?G5($z(n[1])):!0}function QO(n,e,t){switch(n){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,n,e]}}function Mge(n){return["any"].concat(n.map($S))}function Vz(n,e){if(e.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",n,["literal",e.sort(xge)]]:["filter-in-small",n,["literal",e]]}}function $z(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function G5(n){return["!",n]}function z4(n){return typeof n=="object"?["literal",n]:n}function wge(n,e){let t=n.stops;if(!t)return Sge(n,e);const i=t&&typeof t[0][0]=="object",r=i||n.property!==void 0,o=i||!r;return t=t.map(s=>!r&&e.tokens&&typeof s[1]=="string"?[s[0],Ige(s[1])]:[s[0],z4(s[1])]),i?Ege(n,e,t):o?Oge(n,e,t):H9(n,e,t)}function Sge(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const i=[e.type==="color"?"to-color":e.type,t,z4(n.default)];return e.type==="array"&&i.splice(1,0,e.value,e.length||null),i}}function $P(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Ege(n,e,t){const i={},r={},o=[];for(let a=0;a<t.length;a++){const c=t[a],f=c[0].zoom;i[f]===void 0&&(i[f]={zoom:f,type:n.type,property:n.property,default:n.default},r[f]=[],o.push(f)),r[f].push([c[0].value,c[1]])}if(ZP({},e)==="exponential"){const a=[$P(n),["linear"],["zoom"]];for(const c of o){const f=H9(i[c],e,r[c]);Px(a,c,f,!1)}return a}else{const a=["step",["zoom"]];for(const c of o){const f=H9(i[c],e,r[c]);Px(a,c,f,!0)}return HP(a),a}}function Bge(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function Hz(n,e){const t=z4(Bge(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function H9(n,e,t){const i=ZP(n,e),r=["get",n.property];if(i==="categorical"&&typeof t[0][0]=="boolean"){const o=["case"];for(const s of t)o.push(["==",r,s[0]],s[1]);return o.push(Hz(n,e)),o}else if(i==="categorical"){const o=["match",r];for(const s of t)Px(o,s[0],s[1],!1);return o.push(Hz(n,e)),o}else if(i==="interval"){const o=["step",["number",r]];for(const s of t)Px(o,s[0],s[1],!0);return HP(o),n.default===void 0?o:["case",["==",["typeof",r],"number"],o,z4(n.default)]}else if(i==="exponential"){const o=n.base!==void 0?n.base:1,s=[$P(n),o===1?["linear"]:["exponential",o],["number",r]];for(const a of t)Px(s,a[0],a[1],!1);return n.default===void 0?s:["case",["==",["typeof",r],"number"],s,z4(n.default)]}else throw new Error(`Unknown property function type ${i}`)}function Oge(n,e,t,i=["zoom"]){const r=ZP(n,e);let o,s=!1;if(r==="interval")o=["step",i],s=!0;else if(r==="exponential"){const a=n.base!==void 0?n.base:1;o=[$P(n),a===1?["linear"]:["exponential",a],i]}else throw new Error(`Unknown zoom function type "${r}"`);for(const a of t)Px(o,a[0],a[1],s);return HP(o),o}function HP(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function Px(n,e,t,i){n.length>3&&e===n[n.length-2]||(i&&n.length===2||n.push(e),n.push(t))}function ZP(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function Ige(n){const e=["concat"],t=/{([^{}]+)}/g;let i=0;for(let r=t.exec(n);r!==null;r=t.exec(n)){const o=n.slice(i,t.lastIndex-r[0].length);i=t.lastIndex,o.length>0&&e.push(o),e.push(["get",r[1]])}if(e.length===1)return n;if(i<n.length)e.push(n.slice(i));else if(e.length===2)return["to-string",e[1]];return e}const Tge=nme;var Zz={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},o3=" ",Xz=/(italic|oblique)$/i,Jz={};function Z9(n,e,t){var i=Jz[n];if(!i){Array.isArray(n)||(n=[n]);for(var r=400,o="normal",s=[],a,c,f=0,y=n.length;f<y;++f){var _=n[f],E=_.split(" "),I=E[E.length-1].toLowerCase();I=="normal"||I=="italic"||I=="oblique"?(o=c?o:I,c=!0,E.pop(),I=E[E.length-1].toLowerCase()):Xz.test(I)&&(I=I.replace(Xz,""),o=c?o:E[E.length-1].replace(I,""),c=!0);for(var P in Zz){var K=E.length>1?E[E.length-2].toLowerCase():"";if(I==P||I==P.replace("-","")||K+"-"+I==P){r=a?r:Zz[P],E.pop(),K&&P.startsWith(K)&&E.pop();break}}!a&&typeof I=="number"&&(r=I,a=!0);var z=E.join(o3).replace("Klokantech Noto Sans","Noto Sans").replace("DIN Pro","Barlow").replace("Arial Unicode MS","Arial");z.indexOf(o3)!==-1&&(z='"'+z+'"'),s.push(z)}i=Jz[n]=[o,r,s]}return i[0]+o3+i[1]+o3+e+"px"+(t?"/"+t:"")+o3+i[2]}const ad={ADD:"add",REMOVE:"remove"},r2={PROPERTYCHANGE:"propertychange"},cr={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class YM{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function kge(n,e,t){let i,r;t=t||A0;let o=0,s=n.length,a=!1;for(;o<s;)i=o+(s-o>>1),r=+t(n[i],e),r<0?o=i+1:(s=i,a=!r);return a?o:~o}function A0(n,e){return n>e?1:n<e?-1:0}function Dge(n,e){return n<e?1:n>e?-1:0}function U6(n,e,t){if(n[0]<=e)return 0;const i=n.length;if(e<=n[i-1])return i-1;if(typeof t=="function"){for(let r=1;r<i;++r){const o=n[r];if(o===e)return r;if(o<e)return t(e,n[r-1],o)>0?r-1:r}return i-1}if(t>0){for(let r=1;r<i;++r)if(n[r]<e)return r-1;return i-1}if(t<0){for(let r=1;r<i;++r)if(n[r]<=e)return r;return i-1}for(let r=1;r<i;++r){if(n[r]==e)return r;if(n[r]<e)return n[r-1]-e<e-n[r]?r-1:r}return i-1}function Rge(n,e,t){for(;e<t;){const i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function h0(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let r=0;r<i;r++)n[n.length]=t[r]}function Tv(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function Pge(n,e,t){const i=e||A0;return n.every(function(r,o){if(o===0)return!0;const s=i(n[o-1],r);return!(s>0||s===0)})}function j4(){return!0}function K6(){return!1}function N4(){}function VX(n){let e,t,i;return function(){const r=Array.prototype.slice.call(arguments);return(!t||this!==i||!Tv(r,t))&&(i=this,t=r,e=n.apply(this,arguments)),e}}function o2(n){function e(){let t;try{t=n()}catch(i){return Promise.reject(i)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function VM(n){for(const e in n)delete n[e]}function _v(n){let e;for(e in n)return!1;return!e}class Gm{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class $M extends YM{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t=typeof e=="string",i=t?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const o=t?new Gm(e):e;o.target||(o.target=this.eventTarget_||this);const s=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in s||(s[i]=0,a[i]=0),++s[i];let c;for(let f=0,y=r.length;f<y;++f)if("handleEvent"in r[f]?c=r[f].handleEvent(o):c=r[f].call(this,o),c===!1||o.propagationStopped){c=!1;break}if(--s[i]===0){let f=a[i];for(delete a[i];f--;)this.removeEventListener(i,N4);delete s[i]}return c}disposeInternal(){this.listeners_&&VM(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const r=i.indexOf(t);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=N4,++this.pendingRemovals_[e]):(i.splice(r,1),i.length===0&&delete this.listeners_[e]))}}function Ro(n,e,t,i,r){if(r){const s=t;t=function(a){return n.removeEventListener(e,t),s.call(i??this,a)}}else i&&i!==n&&(t=t.bind(i));const o={target:n,type:e,listener:t};return n.addEventListener(e,t),o}function HS(n,e,t,i){return Ro(n,e,t,i,!0)}function fa(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),VM(n))}class HM extends $M{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(cr.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=Ro(this,e[o],t);return r}return Ro(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let o=0;o<r;++o)i[o]=HS(this,e[o],t)}else i=HS(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)Lge(i);else if(Array.isArray(e))for(let r=0,o=e.length;r<o;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}}HM.prototype.on;HM.prototype.once;HM.prototype.un;function Lge(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)fa(n[e]);else fa(n)}function fr(){throw new Error("Unimplemented abstract method.")}let Uge=0;function Br(n){return n.ol_uid||(n.ol_uid=String(++Uge))}class ej extends Gm{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class Wm extends HM{constructor(e){super(),this.on,this.once,this.un,Br(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new ej(i,e,t)),i=r2.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new ej(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const r=this.values_||(this.values_={});if(i)r[e]=t;else{const o=r[e];r[e]=t,o!==t&&this.notify(e,o)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],_v(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}const tj={LENGTH:"length"};class W5 extends Gm{constructor(e,t,i){super(e),this.element=t,this.index=i}}class fp extends Wm{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e??[],this.unique_)for(let i=1,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(tj.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new W5(ad.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new W5(ad.REMOVE,t,e)),t}setAt(e,t){const i=this.getLength();if(e>=i){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new W5(ad.REMOVE,r,e)),this.dispatchEvent(new W5(ad.ADD,t,e))}updateLength_(){this.set(tj.LENGTH,this.array_.length)}assertUnique_(e,t){const i=this.array_;for(let r=0,o=i.length;r<o;++r)if(i[r]===e&&r!==t)throw new Error("Duplicate item added to a unique collection")}}class dx extends Gm{constructor(e,t,i){super(e),this.map=t,this.frameState=i!==void 0?i:null}}class Vy extends dx{constructor(e,t,i,r,o,s){super(e,t,o),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=s}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const xl={SINGLECLICK:"singleclick",CLICK:cr.CLICK,DBLCLICK:cr.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},yC=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Kge=yC.includes("safari")&&!yC.includes("chrom");Kge&&(yC.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(yC));const Fge=yC.includes("webkit")&&!yC.includes("edge"),$X=yC.includes("macintosh"),zge=typeof devicePixelRatio<"u"?devicePixelRatio:1,jA=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,HX=typeof Image<"u"&&Image.prototype.decode,jge=typeof createImageBitmap=="function",ZX=(function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n})(),X9={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class Nge extends $M{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=Ro(i,X9.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Ro(i,X9.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(cr.TOUCHMOVE,this.boundHandleTouchMove_,ZX?{passive:!1}:!1)}emulateClick_(e){let t=new Vy(xl.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Vy(xl.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new Vy(xl.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==xl.POINTERUP||t.type==xl.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==xl.POINTERDOWN||t.type==xl.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Vy(xl.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(fa),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new Vy(xl.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Ro(i,xl.POINTERMOVE,this.handlePointerMove_,this),Ro(i,xl.POINTERUP,this.handlePointerUp_,this),Ro(this.element_,xl.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(Ro(this.element_.getRootNode(),xl.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Vy(xl.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Vy(xl.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(fa(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(cr.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(fa(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(fa),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const C1={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},PA={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Hn={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function xs(n,e){if(!n)throw new Error(e)}const ZS=1/0;class Gge{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,VM(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){xs(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=ZS?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,r=t.length,o=t[e],s=i[e],a=e;for(;e<r>>1;){const c=this.getLeftChildIndex_(e),f=this.getRightChildIndex_(e),y=f<r&&i[f]<i[c]?f:c;t[e]=t[y],i[e]=i[y],e=y}t[e]=o,i[e]=s,this.siftDown_(a,e)}siftDown_(e,t){const i=this.elements_,r=this.priorities_,o=i[t],s=r[t];for(;t>e;){const a=this.getParentIndex_(t);if(r[a]>s)i[t]=i[a],r[t]=r[a],t=a;else break}i[t]=o,r[t]=s}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let r=0;const o=t.length;let s,a,c;for(a=0;a<o;++a)s=t[a],c=e(s),c==ZS?delete this.queuedElements_[this.keyFunction_(s)]:(i[r]=c,t[r++]=s);t.length=r,i.length=r,this.heapify_()}}class XX extends Gge{constructor(e,t){super(i=>e.apply(null,i),i=>i[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(cr.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(i===Hn.LOADED||i===Hn.ERROR||i===Hn.EMPTY){i!==Hn.ERROR&&t.removeEventListener(cr.CHANGE,this.boundHandleTileChange_);const r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;){const r=this.dequeue()[0],o=r.getKey();r.getState()===Hn.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,r.load())}}}function Wge(n,e,t,i,r){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return ZS;const o=n.viewState.center,s=i[0]-o[0],a=i[1]-o[1];return 65536*Math.log(r)+Math.sqrt(s*s+a*a)/r}const Qa={ANIMATING:0,INTERACTING:1},bm={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function cl(n,e,t){return Math.min(Math.max(n,e),t)}function Qge(n,e,t,i,r,o){const s=r-t,a=o-i;if(s!==0||a!==0){const c=((n-t)*s+(e-i)*a)/(s*s+a*a);c>1?(t=r,i=o):c>0&&(t+=s*c,i+=a*c)}return uC(n,e,t,i)}function uC(n,e,t,i){const r=t-n,o=i-e;return r*r+o*o}function qge(n){const e=n.length;for(let i=0;i<e;i++){let r=i,o=Math.abs(n[i][i]);for(let a=i+1;a<e;a++){const c=Math.abs(n[a][i]);c>o&&(o=c,r=a)}if(o===0)return null;const s=n[r];n[r]=n[i],n[i]=s;for(let a=i+1;a<e;a++){const c=-n[a][i]/n[i][i];for(let f=i;f<e+1;f++)i==f?n[a][f]=0:n[a][f]+=c*n[i][f]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let r=i-1;r>=0;r--)n[r][e]-=n[r][i]*t[i]}return t}function nj(n){return n*180/Math.PI}function gv(n){return n*Math.PI/180}function cC(n,e){const t=n%e;return t*e<0?t+e:t}function af(n,e,t){return n+t*(e-n)}function F6(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function Q5(n,e){return Math.floor(F6(n,e))}function ov(n,e){return Math.ceil(F6(n,e))}function J9(n,e,t){if(n>=e&&n<t)return n;const i=t-e;return((n-e)%i+i)%i+e}function ij(n,e,t){return(function(i,r,o,s,a){if(!i)return;if(!r&&!e)return i;const c=e?0:o[0]*r,f=e?0:o[1]*r,y=a?a[0]:0,_=a?a[1]:0;let E=n[0]+c/2+y,I=n[2]-c/2+y,P=n[1]+f/2+_,K=n[3]-f/2+_;E>I&&(E=(I+E)/2,I=E),P>K&&(P=(K+P)/2,K=P);let z=cl(i[0],E,I),Q=cl(i[1],P,K);if(s&&t&&r){const V=30*r;z+=-V*Math.log(1+Math.max(0,E-i[0])/V)+V*Math.log(1+Math.max(0,i[0]-I)/V),Q+=-V*Math.log(1+Math.max(0,P-i[1])/V)+V*Math.log(1+Math.max(0,i[1]-K)/V)}return[z,Q]})}function Yge(n){return n}const _c={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function eD(n){const e=xp();for(let t=0,i=n.length;t<i;++t)o4(e,n[t]);return e}function Vge(n,e,t){const i=Math.min.apply(null,n),r=Math.min.apply(null,e),o=Math.max.apply(null,n),s=Math.max.apply(null,e);return P1(i,r,o,s,t)}function yv(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function JX(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function kC(n,e,t){let i,r;return e<n[0]?i=n[0]-e:n[2]<e?i=e-n[2]:i=0,t<n[1]?r=n[1]-t:n[3]<t?r=t-n[3]:r=0,i*i+r*r}function vC(n,e){return XP(n,e[0],e[1])}function Xg(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function XP(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function tD(n,e){const t=n[0],i=n[1],r=n[2],o=n[3],s=e[0],a=e[1];let c=_c.UNKNOWN;return s<t?c=c|_c.LEFT:s>r&&(c=c|_c.RIGHT),a<i?c=c|_c.BELOW:a>o&&(c=c|_c.ABOVE),c===_c.UNKNOWN&&(c=_c.INTERSECTING),c}function xp(){return[1/0,1/0,-1/0,-1/0]}function P1(n,e,t,i,r){return r?(r[0]=n,r[1]=e,r[2]=t,r[3]=i,r):[n,e,t,i]}function O2(n){return P1(1/0,1/0,-1/0,-1/0,n)}function eJ(n,e){const t=n[0],i=n[1];return P1(t,i,t,i,e)}function JP(n,e,t,i,r){const o=O2(r);return nJ(o,n,e,t,i)}function L1(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function tJ(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function o4(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function nJ(n,e,t,i,r){for(;t<i;t+=r)$ge(n,e[t],e[t+1]);return n}function $ge(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function iJ(n,e){let t;return t=e(z6(n)),t||(t=e(j6(n)),t)||(t=e(N6(n)),t)||(t=e(j1(n)),t)?t:!1}function nD(n){let e=0;return DC(n)||(e=Go(n)*Mu(n)),e}function z6(n){return[n[0],n[1]]}function j6(n){return[n[2],n[1]]}function vf(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function Hge(n,e){let t;if(e==="bottom-left")t=z6(n);else if(e==="bottom-right")t=j6(n);else if(e==="top-left")t=j1(n);else if(e==="top-right")t=N6(n);else throw new Error("Invalid corner");return t}function XS(n,e,t,i,r){const[o,s,a,c,f,y,_,E]=rJ(n,e,t,i);return P1(Math.min(o,a,f,_),Math.min(s,c,y,E),Math.max(o,a,f,_),Math.max(s,c,y,E),r)}function rJ(n,e,t,i){const r=e*i[0]/2,o=e*i[1]/2,s=Math.cos(t),a=Math.sin(t),c=r*s,f=r*a,y=o*s,_=o*a,E=n[0],I=n[1];return[E-c+_,I-f-y,E-c-_,I-f+y,E+c-_,I+f+y,E+c+_,I+f-y,E-c+_,I-f-y]}function Mu(n){return n[3]-n[1]}function Pm(n,e,t){const i=t||xp();return wl(n,e)?(n[0]>e[0]?i[0]=n[0]:i[0]=e[0],n[1]>e[1]?i[1]=n[1]:i[1]=e[1],n[2]<e[2]?i[2]=n[2]:i[2]=e[2],n[3]<e[3]?i[3]=n[3]:i[3]=e[3]):O2(i),i}function j1(n){return[n[0],n[3]]}function N6(n){return[n[2],n[3]]}function Go(n){return n[2]-n[0]}function wl(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function DC(n){return n[2]<n[0]||n[3]<n[1]}function Zge(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function Xge(n,e,t){let i=!1;const r=tD(n,e),o=tD(n,t);if(r===_c.INTERSECTING||o===_c.INTERSECTING)i=!0;else{const s=n[0],a=n[1],c=n[2],f=n[3],y=e[0],_=e[1],E=t[0],I=t[1],P=(I-_)/(E-y);let K,z;o&_c.ABOVE&&!(r&_c.ABOVE)&&(K=E-(I-f)/P,i=K>=s&&K<=c),!i&&o&_c.RIGHT&&!(r&_c.RIGHT)&&(z=I-(E-c)*P,i=z>=a&&z<=f),!i&&o&_c.BELOW&&!(r&_c.BELOW)&&(K=E-(I-a)/P,i=K>=s&&K<=c),!i&&o&_c.LEFT&&!(r&_c.LEFT)&&(z=I-(E-s)*P,i=z>=a&&z<=f)}return i}function oJ(n,e,t,i){if(DC(n))return O2(t);let r=[];if(i>1){const a=n[2]-n[0],c=n[3]-n[1];for(let f=0;f<i;++f)r.push(n[0]+a*f/i,n[1],n[2],n[1]+c*f/i,n[2]-a*f/i,n[3],n[0],n[3]-c*f/i)}else r=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]];e(r,r,2);const o=[],s=[];for(let a=0,c=r.length;a<c;a+=2)o.push(r[a]),s.push(r[a+1]);return Vge(o,s,t)}function sJ(n,e){const t=e.getExtent(),i=vf(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const r=Go(t),s=Math.floor((i[0]-t[0])/r)*r;n[0]-=s,n[2]-=s}return n}function aJ(n,e,t){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[i[0],n[1],i[2],n[3]]];sJ(n,e);const r=Go(i);if(Go(n)>r&&!t)return[[i[0],n[1],i[2],n[3]]];if(n[0]<i[0])return[[n[0]+r,n[1],i[2],n[3]],[i[0],n[1],n[2],n[3]]];if(n[2]>i[2])return[[n[0],n[1],i[2],n[3]],[i[0],n[1],n[2]-r,n[3]]]}return[n]}function Jge(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function JS(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function eL(n,e){const t=Math.cos(e),i=Math.sin(e),r=n[0]*t-n[1]*i,o=n[1]*t+n[0]*i;return n[0]=r,n[1]=o,n}function e0e(n,e){return n[0]*=e,n[1]*=e,n}function t0e(n,e){const t=n[0]-e[0],i=n[1]-e[1];return t*t+i*i}function n0e(n,e){return Math.sqrt(t0e(n,e))}function tL(n,e){if(e.canWrapX()){const t=Go(e.getExtent()),i=i0e(n,e,t);i&&(n[0]-=i*t)}return n}function i0e(n,e,t){const i=e.getExtent();let r=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||Go(i),r=Math.floor((n[0]-i[0])/t)),r}function lJ(n){return Math.pow(n,3)}function I2(n){return 1-lJ(1-n)}function r0e(n){return 3*n*n-2*n*n*n}function o0e(n){return n}const s0e=63710088e-1;function rj(n,e,t){t=t||s0e;const i=gv(n[1]),r=gv(e[1]),o=(r-i)/2,s=gv(e[0]-n[0])/2,a=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(i)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function uJ(...n){console.warn(...n)}const xv={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class G6{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||xv[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const ZM=6378137,Cx=Math.PI*ZM,a0e=[-Cx,-Cx,Cx,Cx],l0e=[-180,-85,180,85],q5=ZM*Math.log(Math.tan(Math.PI/2));class I_ extends G6{constructor(e){super({code:e,units:"m",extent:a0e,global:!0,worldExtent:l0e,getPointResolution:function(t,i){return t/Math.cosh(i[1]/ZM)}})}}const oj=[new I_("EPSG:3857"),new I_("EPSG:102100"),new I_("EPSG:102113"),new I_("EPSG:900913"),new I_("http://www.opengis.net/def/crs/EPSG/0/3857"),new I_("http://www.opengis.net/gml/srs/epsg.xml#3857")];function u0e(n,e,t,i){const r=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let o=0;o<r;o+=i){e[o]=Cx*n[o]/180;let s=ZM*Math.log(Math.tan(Math.PI*(+n[o+1]+90)/360));s>q5?s=q5:s<-q5&&(s=-q5),e[o+1]=s}return e}function c0e(n,e,t,i){const r=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let o=0;o<r;o+=i)e[o]=180*n[o]/Cx,e[o+1]=360*Math.atan(Math.exp(n[o+1]/ZM))/Math.PI-90;return e}const A0e=6378137,sj=[-180,-90,180,90],h0e=Math.PI*A0e/180;class kb extends G6{constructor(e,t){super({code:e,units:"degrees",extent:sj,axisOrientation:t,global:!0,metersPerUnit:h0e,worldExtent:sj})}}const aj=[new kb("CRS:84"),new kb("EPSG:4326","neu"),new kb("urn:ogc:def:crs:OGC:1.3:CRS84"),new kb("urn:ogc:def:crs:OGC:2:84"),new kb("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new kb("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new kb("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let iD={};function d0e(n){return iD[n]||iD[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function f0e(n,e){iD[n]=e}let Lx={};function G4(n,e,t){const i=n.getCode(),r=e.getCode();i in Lx||(Lx[i]={}),Lx[i][r]=t}function qO(n,e){return n in Lx&&e in Lx[n]?Lx[n][e]:null}const eE=.9996,bp=.00669438,W6=bp*bp,Q6=W6*bp,Vb=bp/(1-bp),lj=Math.sqrt(1-bp),s2=(1-lj)/(1+lj),cJ=s2*s2,nL=cJ*s2,iL=nL*s2,AJ=iL*s2,hJ=1-bp/4-3*W6/64-5*Q6/256,p0e=3*bp/8+3*W6/32+45*Q6/1024,m0e=15*W6/256+45*Q6/1024,g0e=35*Q6/3072,y0e=3/2*s2-27/32*nL+269/512*AJ,v0e=21/16*cJ-55/32*iL,b0e=151/96*nL-417/128*AJ,C0e=1097/512*iL,tE=6378137;function _0e(n,e,t){const i=n-5e5,s=(t.north?e:e-1e7)/eE/(tE*hJ),a=s+y0e*Math.sin(2*s)+v0e*Math.sin(4*s)+b0e*Math.sin(6*s)+C0e*Math.sin(8*s),c=Math.sin(a),f=c*c,y=Math.cos(a),_=c/y,E=_*_,I=E*E,P=1-bp*f,K=Math.sqrt(1-bp*f),z=tE/K,Q=(1-bp)/P,V=Vb*y**2,$=V*V,Z=i/(z*eE),ee=Z*Z,X=ee*Z,W=X*Z,se=W*Z,ue=se*Z,ve=a-_/Q*(ee/2-W/24*(5+3*E+10*V-4*$-9*Vb))+ue/720*(61+90*E+298*V+45*I-252*Vb-3*$);let ye=(Z-X/6*(1+2*E+V)+se/120*(5-2*V+28*E-3*$+8*Vb+24*I))/y;return ye=J9(ye+gv(dJ(t.number)),-Math.PI,Math.PI),[nj(ye),nj(ve)]}const uj=-80,cj=84,x0e=-180,M0e=180;function w0e(n,e,t){n=J9(n,x0e,M0e),e<uj?e=uj:e>cj&&(e=cj);const i=gv(e),r=Math.sin(i),o=Math.cos(i),s=r/o,a=s*s,c=a*a,f=gv(n),y=dJ(t.number),_=gv(y),E=tE/Math.sqrt(1-bp*r**2),I=Vb*o**2,P=o*J9(f-_,-Math.PI,Math.PI),K=P*P,z=K*P,Q=z*P,V=Q*P,$=V*P,Z=tE*(hJ*i-p0e*Math.sin(2*i)+m0e*Math.sin(4*i)-g0e*Math.sin(6*i)),ee=eE*E*(P+z/6*(1-a+I)+V/120*(5-18*a+c+72*I-58*Vb))+5e5;let X=eE*(Z+E*s*(K/2+Q/24*(5-a+9*I+4*I**2)+$/720*(61-58*a+c+600*I-330*Vb)));return t.north||(X+=1e7),[ee,X]}function dJ(n){return(n-1)*6-180+3}const S0e=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function fJ(n){let e=0;for(const r of S0e){const o=n.match(r);if(o){e=parseInt(o[1]);break}}if(!e)return null;let t=0,i=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(i=!0,t=e-32600),t?{number:t,north:i}:null}function Aj(n,e){return function(t,i,r,o){const s=t.length;r=r>1?r:2,o=o??r,i||(r>2?i=t.slice():i=new Array(s));for(let a=0;a<s;a+=o){const c=t[a],f=t[a+1],y=n(c,f,e);i[a]=y[0],i[a+1]=y[1]}return i}}function E0e(n){return fJ(n)?new G6({code:n,units:"m"}):null}function B0e(n){const e=fJ(n.getCode());return e?{forward:Aj(w0e,e),inverse:Aj(_0e,e)}:null}const O0e=[B0e],I0e=[E0e];let rD=!0;function pJ(n){rD=!1}function rL(n,e){if(e!==void 0){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];e=e}else e=n.slice();return e}function oD(n){f0e(n.getCode(),n),G4(n,n,rL)}function T0e(n){n.forEach(oD)}function ks(n){if(typeof n!="string")return n;const e=d0e(n);if(e)return e;for(const t of I0e){const i=t(n);if(i)return i}return null}function sD(n,e,t,i){n=ks(n);let r;const o=n.getPointResolutionFunc();if(o){if(r=o(e,t),i&&i!==n.getUnits()){const s=n.getMetersPerUnit();s&&(r=r*s/xv[i])}}else{const s=n.getUnits();if(s=="degrees"&&!i||i=="degrees")r=e;else{const a=XM(n,ks("EPSG:4326"));if(!a&&s!=="degrees")r=e*n.getMetersPerUnit();else{let f=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];f=a(f,f,2);const y=rj(f.slice(0,2),f.slice(2,4)),_=rj(f.slice(4,6),f.slice(6,8));r=(y+_)/2}const c=i?xv[i]:n.getMetersPerUnit();c!==void 0&&(r/=c)}}return r}function hj(n){T0e(n),n.forEach(function(e){n.forEach(function(t){e!==t&&G4(e,t,rL)})})}function k0e(n,e,t,i){n.forEach(function(r){e.forEach(function(o){G4(r,o,t),G4(o,r,i)})})}function oL(n,e){return n?typeof n=="string"?ks(n):n:ks(e)}function D0e(n){return(function(e,t,i,r){const o=e.length;i=i!==void 0?i:2,r=r??i,t=t!==void 0?t:new Array(o);for(let s=0;s<o;s+=r){const a=n(e.slice(s,s+i)),c=a.length;for(let f=0,y=r;f<y;++f)t[s+f]=f>=c?e[s+f]:a[f]}return t})}function aD(n,e){return pJ(),q6(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function YO(n,e){const t=q6(n,"EPSG:3857","EPSG:4326"),i=t[0];return(i<-180||i>180)&&(t[0]=cC(i+180,360)-180),t}function KA(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||XM(n,e)===rL)&&t}function XM(n,e){const t=n.getCode(),i=e.getCode();let r=qO(t,i);if(r)return r;let o=null,s=null;for(const c of O0e)o||(o=c(n)),s||(s=c(e));if(!o&&!s)return null;const a="EPSG:4326";if(s)if(o)r=VO(o.inverse,s.forward);else{const c=qO(t,a);c&&(r=VO(c,s.forward))}else{const c=qO(a,i);c&&(r=VO(o.inverse,c))}return r&&(oD(n),oD(e),G4(n,e,r)),r}function VO(n,e){return function(t,i,r,o){return i=n(t,i,r,o),e(i,i,r,o)}}function bC(n,e){const t=ks(n),i=ks(e);return XM(t,i)}function q6(n,e,t){const i=bC(e,t);if(!i){const r=ks(e).getCode(),o=ks(t).getCode();throw new Error(`No transform available between ${r} and ${o}`)}return i(n,void 0,n.length)}function rS(n,e,t,i){const r=bC(e,t);return oJ(n,r,void 0,i)}let R0e=null;function P0e(){return R0e}function lD(n,e){return n}function b1(n,e){return rD&&!JS(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(rD=!1,uJ("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function sL(n,e){return n}function Jg(n,e){return n}function L0e(){hj(oj),hj(aj),k0e(aj,oj,u0e,c0e)}L0e();const mJ=new Array(6);function fd(){return[1,0,0,1,0,0]}function dj(n){return lL(n,1,0,0,1,0,0)}function aL(n,e){const t=n[0],i=n[1],r=n[2],o=n[3],s=n[4],a=n[5],c=e[0],f=e[1],y=e[2],_=e[3],E=e[4],I=e[5];return n[0]=t*c+r*f,n[1]=i*c+o*f,n[2]=t*y+r*_,n[3]=i*y+o*_,n[4]=t*E+r*I+s,n[5]=i*E+o*I+a,n}function lL(n,e,t,i,r,o,s){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n[4]=o,n[5]=s,n}function U0e(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function Cu(n,e){const t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function $O(n,e,t){return aL(n,lL(mJ,e,0,0,t,0,0))}function K0e(n,e,t){return aL(n,lL(mJ,1,0,0,1,e,t))}function p0(n,e,t,i,r,o,s,a){const c=Math.sin(o),f=Math.cos(o);return n[0]=i*f,n[1]=r*c,n[2]=-i*c,n[3]=r*f,n[4]=s*i*f-a*i*c+e,n[5]=s*r*c+a*r*f+t,n}function gJ(n,e){const t=F0e(e);xs(t!==0,"Transformation matrix cannot be inverted");const i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5];return n[0]=s/t,n[1]=-r/t,n[2]=-o/t,n[3]=i/t,n[4]=(o*c-s*a)/t,n[5]=-(i*c-r*a)/t,n}function F0e(n){return n[0]*n[3]-n[1]*n[2]}const z0e=[1e5,1e5,1e5,1e5,2,2];function j0e(n){return"matrix("+n.join(", ")+")"}function uD(n){return n.substring(7,n.length-1).split(",").map(parseFloat)}function N0e(n,e){const t=uD(n),i=uD(e);for(let r=0;r<6;++r)if(Math.round((t[r]-i[r])*z0e[r])!==0)return!1;return!0}function vv(n,e,t,i,r,o,s){o=o||[],s=s||2;let a=0;for(let c=e;c<t;c+=i){const f=n[c],y=n[c+1];o[a++]=r[0]*f+r[2]*y+r[4],o[a++]=r[1]*f+r[3]*y+r[5];for(let _=2;_<s;_++)o[a++]=n[c+_]}return o&&o.length!=a&&(o.length=a),o}function yJ(n,e,t,i,r,o,s){s=s||[];const a=Math.cos(r),c=Math.sin(r),f=o[0],y=o[1];let _=0;for(let E=e;E<t;E+=i){const I=n[E]-f,P=n[E+1]-y;s[_++]=f+I*a-P*c,s[_++]=y+I*c+P*a;for(let K=E+2;K<E+i;++K)s[_++]=n[K]}return s&&s.length!=_&&(s.length=_),s}function G0e(n,e,t,i,r,o,s,a){a=a||[];const c=s[0],f=s[1];let y=0;for(let _=e;_<t;_+=i){const E=n[_]-c,I=n[_+1]-f;a[y++]=c+r*E,a[y++]=f+o*I;for(let P=_+2;P<_+i;++P)a[y++]=n[P]}return a&&a.length!=y&&(a.length=y),a}function W0e(n,e,t,i,r,o,s){s=s||[];let a=0;for(let c=e;c<t;c+=i){s[a++]=n[c]+r,s[a++]=n[c+1]+o;for(let f=c+2;f<c+i;++f)s[a++]=n[f]}return s&&s.length!=a&&(s.length=a),s}const fj=fd(),Q0e=[NaN,NaN];class vJ extends Wm{constructor(){super(),this.extent_=xp(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=VX((e,t,i)=>{if(!i)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return fr()}closestPointXY(e,t,i,r){return fr()}containsXY(e,t){return this.closestPointXY(e,t,Q0e,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return fr()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&O2(t),this.extentRevision_=this.getRevision()}return Zge(this.extent_,e)}rotate(e,t){fr()}scale(e,t,i){fr()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return fr()}getType(){return fr()}applyTransform(e){fr()}intersectsExtent(e){return fr()}translate(e,t){fr()}transform(e,t){const i=ks(e),r=i.getUnits()=="tile-pixels"?function(o,s,a){const c=i.getExtent(),f=i.getWorldExtent(),y=Mu(f)/Mu(c);p0(fj,f[0],f[3],y,-y,0,0,0);const _=vv(o,0,o.length,a,fj,s),E=bC(i,t);return E?E(_,_,a):_}:bC(i,t);return this.applyTransform(r),this}}class RC extends vJ{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return JP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return fr()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=pj(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){fr()}setLayout(e,t,i){let r;if(e)r=pj(e);else{for(let o=0;o<i;++o){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}r=t.length,e=PC(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();yJ(i,0,i.length,r,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=vf(this.getExtent()));const r=this.getFlatCoordinates();if(r){const o=this.getStride();G0e(r,0,r.length,o,e,t,i,r),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();W0e(i,0,i.length,r,e,t,i),this.changed()}}}function PC(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function pj(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function q0e(n,e,t){const i=n.getFlatCoordinates();if(!i)return null;const r=n.getStride();return vv(i,0,i.length,r,e,t)}function bJ(n,e,t,i){let r=0;const o=n[t-i],s=n[t-i+1];let a=0,c=0;for(;e<t;e+=i){const f=n[e]-o,y=n[e+1]-s;r+=c*f-a*y,a=f,c=y}return r/2}function CJ(n,e,t,i){let r=0;for(let o=0,s=t.length;o<s;++o){const a=t[o];r+=bJ(n,e,a,i),e=a}return r}function Y0e(n,e,t,i){let r=0;for(let o=0,s=t.length;o<s;++o){const a=t[o];r+=CJ(n,e,a,i),e=a[a.length-1]}return r}function mj(n,e,t,i,r,o,s){const a=n[e],c=n[e+1],f=n[t]-a,y=n[t+1]-c;let _;if(f===0&&y===0)_=e;else{const E=((r-a)*f+(o-c)*y)/(f*f+y*y);if(E>1)_=t;else if(E>0){for(let I=0;I<i;++I)s[I]=af(n[e+I],n[t+I],E);s.length=i;return}else _=e}for(let E=0;E<i;++E)s[E]=n[_+E];s.length=i}function uL(n,e,t,i,r){let o=n[e],s=n[e+1];for(e+=i;e<t;e+=i){const a=n[e],c=n[e+1],f=uC(o,s,a,c);f>r&&(r=f),o=a,s=c}return r}function cL(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];r=uL(n,e,a,i,r),e=a}return r}function V0e(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];r=cL(n,e,a,i,r),e=a[a.length-1]}return r}function AL(n,e,t,i,r,o,s,a,c,f,y){if(e==t)return f;let _,E;if(r===0){if(E=uC(s,a,n[e],n[e+1]),E<f){for(_=0;_<i;++_)c[_]=n[e+_];return c.length=i,E}return f}y=y||[NaN,NaN];let I=e+i;for(;I<t;)if(mj(n,I-i,I,i,s,a,y),E=uC(s,a,y[0],y[1]),E<f){for(f=E,_=0;_<i;++_)c[_]=y[_];c.length=i,I+=i}else I+=i*Math.max((Math.sqrt(E)-Math.sqrt(f))/r|0,1);if(o&&(mj(n,t-i,e,i,s,a,y),E=uC(s,a,y[0],y[1]),E<f)){for(f=E,_=0;_<i;++_)c[_]=y[_];c.length=i}return f}function hL(n,e,t,i,r,o,s,a,c,f,y){y=y||[NaN,NaN];for(let _=0,E=t.length;_<E;++_){const I=t[_];f=AL(n,e,I,i,r,o,s,a,c,f,y),e=I}return f}function $0e(n,e,t,i,r,o,s,a,c,f,y){y=y||[NaN,NaN];for(let _=0,E=t.length;_<E;++_){const I=t[_];f=hL(n,e,I,i,r,o,s,a,c,f,y),e=I[I.length-1]}return f}function H0e(n,e,t,i){for(let r=0,o=t.length;r<o;++r)n[e++]=t[r];return e}function Y6(n,e,t,i){for(let r=0,o=t.length;r<o;++r){const s=t[r];for(let a=0;a<i;++a)n[e++]=s[a]}return e}function JM(n,e,t,i,r){r=r||[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=Y6(n,e,t[s],i);r[o++]=c,e=c}return r.length=o,r}function _J(n,e,t,i,r){r=r||[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=JM(n,e,t[s],i,r[o]);c.length===0&&(c[0]=e),r[o++]=c,e=c[c.length-1]}return r.length=o,r}function sv(n,e,t,i,r){r=r!==void 0?r:[];let o=0;for(let s=e;s<t;s+=i)r[o++]=n.slice(s,s+i);return r.length=o,r}function W4(n,e,t,i,r){r=r!==void 0?r:[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=t[s];r[o++]=sv(n,e,c,i,r[o]),e=c}return r.length=o,r}function cD(n,e,t,i,r){r=r!==void 0?r:[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=t[s];r[o++]=c.length===1&&c[0]===e?[]:W4(n,e,c,i,r[o]),e=c[c.length-1]}return r.length=o,r}function V6(n,e,t,i,r,o,s){const a=(t-e)/i;if(a<3){for(;e<t;e+=i)o[s++]=n[e],o[s++]=n[e+1];return s}const c=new Array(a);c[0]=1,c[a-1]=1;const f=[e,t-i];let y=0;for(;f.length>0;){const _=f.pop(),E=f.pop();let I=0;const P=n[E],K=n[E+1],z=n[_],Q=n[_+1];for(let V=E+i;V<_;V+=i){const $=n[V],Z=n[V+1],ee=Qge($,Z,P,K,z,Q);ee>I&&(y=V,I=ee)}I>r&&(c[(y-e)/i]=1,E+i<y&&f.push(E,y),y+i<_&&f.push(y,_))}for(let _=0;_<a;++_)c[_]&&(o[s++]=n[e+_*i],o[s++]=n[e+_*i+1]);return s}function xJ(n,e,t,i,r,o,s,a){for(let c=0,f=t.length;c<f;++c){const y=t[c];s=V6(n,e,y,i,r,o,s),a.push(s),e=y}return s}function Kb(n,e){return e*Math.round(n/e)}function Z0e(n,e,t,i,r,o,s){if(e==t)return s;let a=Kb(n[e],r),c=Kb(n[e+1],r);e+=i,o[s++]=a,o[s++]=c;let f,y;do if(f=Kb(n[e],r),y=Kb(n[e+1],r),e+=i,e==t)return o[s++]=f,o[s++]=y,s;while(f==a&&y==c);for(;e<t;){const _=Kb(n[e],r),E=Kb(n[e+1],r);if(e+=i,_==f&&E==y)continue;const I=f-a,P=y-c,K=_-a,z=E-c;if(I*z==P*K&&(I<0&&K<I||I==K||I>0&&K>I)&&(P<0&&z<P||P==z||P>0&&z>P)){f=_,y=E;continue}o[s++]=f,o[s++]=y,a=f,c=y,f=_,y=E}return o[s++]=f,o[s++]=y,s}function dL(n,e,t,i,r,o,s,a){for(let c=0,f=t.length;c<f;++c){const y=t[c];s=Z0e(n,e,y,i,r,o,s),a.push(s),e=y}return s}function X0e(n,e,t,i,r,o,s,a){for(let c=0,f=t.length;c<f;++c){const y=t[c],_=[];s=dL(n,e,y,i,r,o,s,_),a.push(_),e=y[y.length-1]}return s}class Q4 extends RC{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new Q4(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,r){return r<kC(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(uL(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),AL(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,r))}getArea(){return bJ(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return sv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=V6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Q4(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Y6(this.flatCoordinates,0,e,this.stride),this.changed()}}class CC extends RC{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new CC(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const o=this.flatCoordinates,s=uC(e,t,o[0],o[1]);if(s<r){const a=this.stride;for(let c=0;c<a;++c)i[c]=o[c];return i.length=a,s}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return eJ(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return XP(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=H0e(this.flatCoordinates,0,e,this.stride),this.changed()}}function J0e(n,e,t,i,r){return!iJ(r,function(s){return!$b(n,e,t,i,s[0],s[1])})}function $b(n,e,t,i,r,o){let s=0,a=n[t-i],c=n[t-i+1];for(;e<t;e+=i){const f=n[e],y=n[e+1];c<=o?y>o&&(f-a)*(o-c)-(r-a)*(y-c)>0&&s++:y<=o&&(f-a)*(o-c)-(r-a)*(y-c)<0&&s--,a=f,c=y}return s!==0}function fL(n,e,t,i,r,o){if(t.length===0||!$b(n,e,t[0],i,r,o))return!1;for(let s=1,a=t.length;s<a;++s)if($b(n,t[s-1],t[s],i,r,o))return!1;return!0}function e1e(n,e,t,i,r,o){if(t.length===0)return!1;for(let s=0,a=t.length;s<a;++s){const c=t[s];if(fL(n,e,c,i,r,o))return!0;e=c[c.length-1]}return!1}function pL(n,e,t,i,r,o,s){let a,c,f,y,_,E,I;const P=r[o+1],K=[];for(let V=0,$=t.length;V<$;++V){const Z=t[V];for(y=n[Z-i],E=n[Z-i+1],a=e;a<Z;a+=i)_=n[a],I=n[a+1],(P<=E&&I<=P||E<=P&&P<=I)&&(f=(P-E)/(I-E)*(_-y)+y,K.push(f)),y=_,E=I}let z=NaN,Q=-1/0;for(K.sort(A0),y=K[0],a=1,c=K.length;a<c;++a){_=K[a];const V=Math.abs(_-y);V>Q&&(f=(y+_)/2,fL(n,e,t,i,f,P)&&(z=f,Q=V)),y=_}return isNaN(z)&&(z=r[o]),s?(s.push(z,P,Q),s):[z,P,Q]}function MJ(n,e,t,i,r){let o=[];for(let s=0,a=t.length;s<a;++s){const c=t[s];o=pL(n,e,c,i,r,2*s,o),e=c[c.length-1]}return o}function wJ(n,e,t,i,r){let o;for(e+=i;e<t;e+=i)if(o=r(n.slice(e-i,e),n.slice(e,e+i)),o)return o;return!1}function $6(n,e,t,i,r,o){return o=o??nJ(xp(),n,e,t,i),wl(r,o)?o[0]>=r[0]&&o[2]<=r[2]||o[1]>=r[1]&&o[3]<=r[3]?!0:wJ(n,e,t,i,function(s,a){return Xge(r,s,a)}):!1}function t1e(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){if($6(n,e,t[o],i,r))return!0;e=t[o]}return!1}function SJ(n,e,t,i,r){return!!($6(n,e,t,i,r)||$b(n,e,t,i,r[0],r[1])||$b(n,e,t,i,r[0],r[3])||$b(n,e,t,i,r[2],r[1])||$b(n,e,t,i,r[2],r[3]))}function EJ(n,e,t,i,r){if(!SJ(n,e,t[0],i,r))return!1;if(t.length===1)return!0;for(let o=1,s=t.length;o<s;++o)if(J0e(n,t[o-1],t[o],i,r)&&!$6(n,t[o-1],t[o],i,r))return!1;return!0}function n1e(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];if(EJ(n,e,a,i,r))return!0;e=a[a.length-1]}return!1}function i1e(n,e,t,i){for(;e<t-i;){for(let r=0;r<i;++r){const o=n[e+r];n[e+r]=n[t-i+r],n[t-i+r]=o}e+=i,t-=i}}function mL(n,e,t,i){let r=0,o=n[t-i],s=n[t-i+1];for(;e<t;e+=i){const a=n[e],c=n[e+1];r+=(a-o)*(c+s),o=a,s=c}return r===0?void 0:r>0}function gL(n,e,t,i,r){r=r!==void 0?r:!1;for(let o=0,s=t.length;o<s;++o){const a=t[o],c=mL(n,e,a,i);if(o===0){if(r&&c||!r&&!c)return!1}else if(r&&!c||!r&&c)return!1;e=a}return!0}function BJ(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];if(!gL(n,e,a,i,r))return!1;a.length&&(e=a[a.length-1])}return!0}function nE(n,e,t,i,r){r=r!==void 0?r:!1;for(let o=0,s=t.length;o<s;++o){const a=t[o],c=mL(n,e,a,i);(o===0?r&&c||!r&&!c:r&&!c||!r&&c)&&i1e(n,e,a,i),e=a}return e}function AD(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o)e=nE(n,e,t[o],i,r);return e}function OJ(n,e){const t=[];let i=0,r=0,o;for(let s=0,a=e.length;s<a;++s){const c=e[s],f=mL(n,i,c,2);if(o===void 0&&(o=f),f===o)t.push(e.slice(r,s+1));else{if(t.length===0)continue;t[t.length-1].push(e[r])}r=s+1,i=c}return t}class U1 extends RC{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?h0(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new U1(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<kC(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(cL(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),hL(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return fL(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return CJ(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),nE(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,W4(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=vf(this.getExtent());this.flatInteriorPoint_=pL(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new CC(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Q4(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,r=[];let o=0;for(let s=0,a=i.length;s<a;++s){const c=i[s],f=new Q4(t.slice(o,c),e);r.push(f),o=c}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;gL(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=nE(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=dL(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new U1(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return EJ(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=JM(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function gj(n){if(DC(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],i=n[2],r=n[3],o=[e,t,e,r,i,r,i,t,e,t];return new U1(o,"XY",[o.length])}function yL(n,e,t,i){const r=Go(e)/t[0],o=Mu(e)/t[1];return i?Math.min(n,Math.max(r,o)):Math.min(n,Math.min(r,o))}function vL(n,e,t){let i=Math.min(n,e);const r=50;return i*=Math.log(1+r*Math.max(0,n/e-1))/r+1,t&&(i=Math.max(i,t),i/=Math.log(1+r*Math.max(0,t/n-1))/r+1),cl(i,t/2,e*2)}function r1e(n,e,t,i){return e=e!==void 0?e:!0,(function(r,o,s,a){if(r!==void 0){const c=n[0],f=n[n.length-1],y=t?yL(c,t,s,i):c;if(a)return e?vL(r,y,f):cl(r,f,y);const _=Math.min(y,r),E=Math.floor(U6(n,_,o));return n[E]>y&&E<n.length-1?n[E+1]:n[E]}})}function o1e(n,e,t,i,r,o){return i=i!==void 0?i:!0,t=t!==void 0?t:0,(function(s,a,c,f){if(s!==void 0){const y=r?yL(e,r,c,o):e;if(f)return i?vL(s,y,t):cl(s,t,y);const _=1e-9,E=Math.ceil(Math.log(e/y)/Math.log(n)-_),I=-a*(.5-_)+.5,P=Math.min(y,s),K=Math.floor(Math.log(e/P)/Math.log(n)+I),z=Math.max(E,K),Q=e/Math.pow(n,z);return cl(Q,t,y)}})}function yj(n,e,t,i,r){return t=t!==void 0?t:!0,(function(o,s,a,c){if(o!==void 0){const f=i?yL(n,i,a,r):n;return!t||!c?cl(o,e,f):vL(o,f,e)}})}function bL(n){if(n!==void 0)return 0}function vj(n){if(n!==void 0)return n}function s1e(n){const e=2*Math.PI/n;return(function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t})}function a1e(n){const e=gv(5);return(function(t,i){return i||t===void 0?t:Math.abs(t)<=e?0:t})}const IJ=42,CL=256,HO=0;class Bm extends Wm{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=oL(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&pJ(),e.center&&(e.center=b1(e.center,this.projection_)),e.extent&&(e.extent=Jg(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in bm)delete t[a];this.setProperties(t,!0);const i=u1e(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const r=l1e(e),o=i.constraint,s=c1e(e);this.constraints_={center:r,resolution:o,rotation:s},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const r=e||[0,0,0,0];t=t||[0,0,0,0];const o=this.getResolution(),s=o/2*(r[3]-t[3]+t[1]-r[1]),a=o/2*(r[0]-t[0]+t[2]-r[2]);this.setCenterInternal([i[0]+s,i[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=b1(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=b1(r.anchor,this.getProjection())),t[i]=r}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,i;t>1&&typeof arguments[t-1]=="function"&&(i=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const y=arguments[r];y.center&&this.setCenterInternal(y.center),y.zoom!==void 0?this.setZoom(y.zoom):y.resolution&&this.setResolution(y.resolution),y.rotation!==void 0&&this.setRotation(y.rotation)}if(r===t){i&&Y5(i,!0);return}let o=Date.now(),s=this.targetCenter_.slice(),a=this.targetResolution_,c=this.targetRotation_;const f=[];for(;r<t;++r){const y=arguments[r],_={start:o,complete:!1,anchor:y.anchor,duration:y.duration!==void 0?y.duration:1e3,easing:y.easing||r0e,callback:i};if(y.center&&(_.sourceCenter=s,_.targetCenter=y.center.slice(),s=_.targetCenter),y.zoom!==void 0?(_.sourceResolution=a,_.targetResolution=this.getResolutionForZoom(y.zoom),a=_.targetResolution):y.resolution&&(_.sourceResolution=a,_.targetResolution=y.resolution,a=_.targetResolution),y.rotation!==void 0){_.sourceRotation=c;const E=cC(y.rotation-c+Math.PI,2*Math.PI)-Math.PI;_.targetRotation=c+E,c=_.targetRotation}A1e(_)?_.complete=!0:o+=_.duration,f.push(_)}this.animations_.push(f),this.setHint(Qa.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Qa.ANIMATING]>0}getInteracting(){return this.hints_[Qa.INTERACTING]>0}cancelAnimations(){this.setHint(Qa.ANIMATING,-this.hints_[Qa.ANIMATING]);let e;for(let t=0,i=this.animations_.length;t<i;++t){const r=this.animations_[t];if(r[0].callback&&Y5(r[0].callback,!1),!e)for(let o=0,s=r.length;o<s;++o){const a=r[o];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let o=!0;for(let s=0,a=r.length;s<a;++s){const c=r[s];if(c.complete)continue;const f=e-c.start;let y=c.duration>0?f/c.duration:1;y>=1?(c.complete=!0,y=1):o=!1;const _=c.easing(y);if(c.sourceCenter){const E=c.sourceCenter[0],I=c.sourceCenter[1],P=c.targetCenter[0],K=c.targetCenter[1];this.nextCenter_=c.targetCenter;const z=E+_*(P-E),Q=I+_*(K-I);this.targetCenter_=[z,Q]}if(c.sourceResolution&&c.targetResolution){const E=_===1?c.targetResolution:c.sourceResolution+_*(c.targetResolution-c.sourceResolution);if(c.anchor){const I=this.getViewportSize_(this.getRotation()),P=this.constraints_.resolution(E,0,I,!0);this.targetCenter_=this.calculateCenterZoom(P,c.anchor)}this.nextResolution_=c.targetResolution,this.targetResolution_=E,this.applyTargetState_(!0)}if(c.sourceRotation!==void 0&&c.targetRotation!==void 0){const E=_===1?cC(c.targetRotation+Math.PI,2*Math.PI)-Math.PI:c.sourceRotation+_*(c.targetRotation-c.sourceRotation);if(c.anchor){const I=this.constraints_.rotation(E,!0);this.targetCenter_=this.calculateCenterRotate(I,c.anchor)}this.nextRotation_=c.targetRotation,this.targetRotation_=E}if(this.applyTargetState_(!0),t=!0,!c.complete)break}if(o){this.animations_[i]=null,this.setHint(Qa.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const s=r[0].callback;s&&Y5(s,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-t[0],r[1]-t[1]],eL(i,e-this.getRotation()),Jge(i,t)),i}calculateCenterZoom(e,t){let i;const r=this.getCenterInternal(),o=this.getResolution();if(r!==void 0&&o!==void 0){const s=t[0]-e*(t[0]-r[0])/o,a=t[1]-e*(t[1]-r[1])/o;i=[s,a]}return i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],r=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&lD(e,this.getProjection())}getCenterInternal(){return this.get(bm.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return sL(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();xs(t,"The view center is not defined");const i=this.getResolution();xs(i!==void 0,"The view resolution is not defined");const r=this.getRotation();return xs(r!==void 0,"The view rotation is not defined"),XS(t,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(bm.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Jg(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=Go(e)/t[0],r=Mu(e)/t[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(t/i)/Math.log(e);return(function(o){return t/Math.pow(e,o*r)})}getRotation(){return this.get(bm.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,o=Math.log(i/r)/t;return(function(s){return Math.log(i/s)/t/o})}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const o=this.padding_;if(o){const s=this.getViewportSizeMinusPadding_();r=ZO(r,this.getViewportSize_(),[s[0]/2+o[3],s[1]/2+o[0]],t,i)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,i,r;if(this.resolutions_){const o=U6(this.resolutions_,e,1);t=o,i=this.resolutions_[o],o==this.resolutions_.length-1?r=2:r=i/this.resolutions_[o+1]}else i=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const t=cl(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(i,cl(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(xs(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){xs(!DC(e),"Cannot fit empty extent provided as `geometry`");const r=Jg(e,this.getProjection());i=gj(r)}else if(e.getType()==="Circle"){const r=Jg(e.getExtent(),this.getProjection());i=gj(r),i.rotate(this.getRotation(),vf(r))}else i=e;this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),r=Math.sin(-t),o=e.getFlatCoordinates(),s=e.getStride();let a=1/0,c=1/0,f=-1/0,y=-1/0;for(let _=0,E=o.length;_<E;_+=s){const I=o[_]*i-o[_+1]*r,P=o[_]*r+o[_+1]*i;a=Math.min(a,I),c=Math.min(c,P),f=Math.max(f,I),y=Math.max(y,P)}return[a,c,f,y]}fitInternal(e,t){t=t||{};let i=t.size;i||(i=this.getViewportSizeMinusPadding_());const r=t.padding!==void 0?t.padding:[0,0,0,0],o=t.nearest!==void 0?t.nearest:!1;let s;t.minResolution!==void 0?s=t.minResolution:t.maxZoom!==void 0?s=this.getResolutionForZoom(t.maxZoom):s=0;const a=this.rotatedExtentForGeometry(e);let c=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);c=isNaN(c)?s:Math.max(c,s),c=this.getConstrainedResolution(c,o?0:1);const f=this.getRotation(),y=Math.sin(f),_=Math.cos(f),E=vf(a);E[0]+=(r[1]-r[3])/2*c,E[1]+=(r[0]-r[2])/2*c;const I=E[0]*_-E[1]*y,P=E[1]*_+E[0]*y,K=this.getConstrainedCenter([I,P],c),z=t.callback?t.callback:N4;t.duration!==void 0?this.animateInternal({resolution:c,center:K,duration:t.duration,easing:t.easing},z):(this.targetResolution_=c,this.targetCenter_=K,this.applyTargetState_(!1,!0),Y5(z,!0))}centerOn(e,t,i){this.centerOnInternal(b1(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(ZO(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,r){let o;const s=this.padding_;if(s&&e){const a=this.getViewportSizeMinusPadding_(-i),c=ZO(e,r,[a[0]/2+s[3],a[1]/2+s[0]],t,i);o=[e[0]-c[0],e[1]-c[1]]}return o}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=lD(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&b1(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*e,0,r,i);t&&(this.targetCenter_=this.calculateCenterZoom(o,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=b1(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&b1(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,i),o=this.getViewportSize_(r),s=this.constraints_.resolution(this.targetResolution_,0,o,i),a=this.constraints_.center(this.targetCenter_,s,o,i,this.calculateCenterShift(this.targetCenter_,s,r,o));this.get(bm.ROTATION)!==r&&this.set(bm.ROTATION,r),this.get(bm.RESOLUTION)!==s&&(this.set(bm.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(bm.CENTER)||!JS(this.get(bm.CENTER),a))&&this.set(bm.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=e!==void 0?e:200;const r=t||0,o=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(o),a=this.constraints_.resolution(this.targetResolution_,r,s),c=this.constraints_.center(this.targetCenter_,a,s,!1,this.calculateCenterShift(this.targetCenter_,a,o,s));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=o,this.targetCenter_=c,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==o||!this.getCenterInternal()||!JS(this.getCenterInternal(),c))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:c,resolution:a,duration:e,easing:I2,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Qa.INTERACTING,1)}endInteraction(e,t,i){i=i&&b1(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.getInteracting()&&(this.setHint(Qa.INTERACTING,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}}function Y5(n,e){setTimeout(function(){n(e)},0)}function l1e(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return ij(n.extent,n.constrainOnlyCenter,t)}const e=oL(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,ij(t,!1,!1)}return Yge}function u1e(n){let e,t,i,s=n.minZoom!==void 0?n.minZoom:HO,a=n.maxZoom!==void 0?n.maxZoom:28;const c=n.zoomFactor!==void 0?n.zoomFactor:2,f=n.multiWorld!==void 0?n.multiWorld:!1,y=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,_=n.showFullExtent!==void 0?n.showFullExtent:!1,E=oL(n.projection,"EPSG:3857"),I=E.getExtent();let P=n.constrainOnlyCenter,K=n.extent;if(!f&&!K&&E.isGlobal()&&(P=!1,K=I),n.resolutions!==void 0){const z=n.resolutions;t=z[s],i=z[a]!==void 0?z[a]:z[z.length-1],n.constrainResolution?e=r1e(z,y,!P&&K,_):e=yj(t,i,y,!P&&K,_)}else{const Q=(I?Math.max(Go(I),Mu(I)):360*xv.degrees/E.getMetersPerUnit())/CL/Math.pow(2,HO),V=Q/Math.pow(2,28-HO);t=n.maxResolution,t!==void 0?s=0:t=Q/Math.pow(c,s),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=t/Math.pow(c,a):i=Q/Math.pow(c,a):i=V),a=s+Math.floor(Math.log(t/i)/Math.log(c)),i=t/Math.pow(c,a-s),n.constrainResolution?e=o1e(c,t,i,y,!P&&K,_):e=yj(t,i,y,!P&&K,_)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:s,zoomFactor:c}}function c1e(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?a1e():t===!1?vj:typeof t=="number"?s1e(t):vj}return bL}function A1e(n){return!(n.sourceCenter&&n.targetCenter&&!JS(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function ZO(n,e,t,i,r){const o=Math.cos(-r);let s=Math.sin(-r),a=n[0]*o-n[1]*s,c=n[1]*o+n[0]*s;a+=(e[0]/2-t[0])*i,c+=(t[1]-e[1]/2)*i,s=-s;const f=a*o-c*s,y=c*o+a*s;return[f,y]}const V5="ol-hidden",h1e="ol-selectable",H6="ol-unselectable",_L="ol-control",bj="ol-collapsed",d1e=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),Cj=["style","variant","weight","size","lineHeight","family"],hD={normal:400,bold:700},dD=function(n){const e=n.match(d1e);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let i=0,r=Cj.length;i<r;++i){const o=e[i+1];o!==void 0&&(t[Cj[i]]=typeof o=="string"?o.trim():o)}return isNaN(Number(t.weight))&&t.weight in hD&&(t.weight=hD[t.weight]),t.families=t.family.split(/,\s?/).map(i=>i.trim().replace(/^['"]|['"]$/g,"")),t};function Al(n,e,t,i){let r;return t&&t.length?r=t.shift():jA?r=new class extends OffscreenCanvas{style={}}(n??300,e??150):r=document.createElement("canvas"),n&&(r.width=n),e&&(r.height=e),r.getContext("2d",i)}let XO;function iE(){return XO||(XO=Al(1,1)),XO}function e5(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function f1e(n){let e=n.offsetWidth;const t=getComputedStyle(n);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function p1e(n){let e=n.offsetHeight;const t=getComputedStyle(n);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function _j(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function TJ(n){for(;n.lastChild;)n.lastChild.remove()}function m1e(n,e){const t=n.childNodes;for(let i=0;;++i){const r=t[i],o=e[i];if(!r&&!o)break;if(r!==o){if(!r){n.appendChild(o);continue}if(!o){n.removeChild(r),--i;continue}n.insertBefore(o,r)}}}function kJ(){return new Proxy({childNodes:[],appendChild:function(e){return this.childNodes.push(e),e},remove:function(){},removeChild:function(e){const t=this.childNodes.indexOf(e);if(t===-1)throw new Error("Node to remove was not found");return this.childNodes.splice(t,1),e},insertBefore:function(e,t){const i=this.childNodes.indexOf(t);if(i===-1)throw new Error("Reference node not found");return this.childNodes.splice(i,0,e),e},style:{}},{get(e,t,i){return t==="firstElementChild"?e.childNodes.length>0?e.childNodes[0]:null:Reflect.get(e,t,i)}})}function av(n){return typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas}class xL extends Wm{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,i=this.listenerKeys.length;t<i;++t)fa(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){const t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==N4&&this.listenerKeys.push(Ro(e,C1.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class g1e extends xL{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:t+"-expand",o=e.collapseLabel!==void 0?e.collapseLabel:"",s=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof o=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o,this.collapseLabel_.className=s):this.collapseLabel_=o;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const c=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(c),this.toggleButton_.addEventListener(cr.CLICK,this.handleClick_.bind(this),!1);const f=t+" "+H6+" "+_L+(this.collapsed_&&this.collapsible_?" "+bj:"")+(this.collapsible_?"":" ol-uncollapsible"),y=this.element;y.className=f,y.appendChild(this.toggleButton_),y.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),i=new Set(t.flatMap(r=>r.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(r=>i.add(r)):i.add(this.attributions_)),!this.overrideCollapsible_){const r=!t.some(o=>o.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(r)}return Array.from(i)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(r=>o2(()=>r))),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Tv(t,this.renderedAttributions_)){TJ(this.ulElement_);for(let r=0,o=t.length;r<o;++r){const s=document.createElement("li");s.innerHTML=t[r],this.ulElement_.appendChild(s)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(bj),this.collapsed_?_j(this.collapseLabel_,this.label_):_j(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class y1e extends xL{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const o=e.tipLabel?e.tipLabel:"Reset rotation",s=document.createElement("button");s.className=t+"-reset",s.setAttribute("type","button"),s.title=o,s.appendChild(this.label_),s.addEventListener(cr.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+H6+" "+_L,c=this.element;c.className=a,c.appendChild(s),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(V5)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:I2}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const o=this.element.classList.contains(V5);!o&&i===0?this.element.classList.add(V5):o&&i!==0&&this.element.classList.remove(V5)}this.label_.style.transform=r}this.rotation_=i}}class v1e extends xL{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",o=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",s=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",c=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",f=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",y=document.createElement("button");y.className=r,y.setAttribute("type","button"),y.title=c,y.appendChild(typeof s=="string"?document.createTextNode(s):s),y.addEventListener(cr.CLICK,this.handleClick_.bind(this,i),!1);const _=document.createElement("button");_.className=o,_.setAttribute("type","button"),_.title=f,_.appendChild(typeof a=="string"?document.createTextNode(a):a),_.addEventListener(cr.CLICK,this.handleClick_.bind(this,-i),!1);const E=t+" "+H6+" "+_L,I=this.element;I.className=E,I.appendChild(y),I.appendChild(_),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const o=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:o,duration:this.duration_,easing:I2})):i.setZoom(o)}}}function b1e(n){n=n||{};const e=new fp;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new v1e(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new y1e(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new g1e(n.attributionOptions)),e}class C1e{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const r=this.points_[t+2]-this.points_[i+2];if(r<1e3/60)return!1;const o=this.points_[t]-this.points_[i],s=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(s,o),this.initialVelocity_=Math.sqrt(o*o+s*s)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const xj={ACTIVE:"active"};class t5 extends Wm{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(xj.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(xj.ACTIVE,e)}setMap(e){this.map_=e}}function _1e(n,e,t){const i=n.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:o0e,center:n.getConstrainedCenter(r)})}}function ML(n,e,t,i){const r=n.getZoom();if(r===void 0)return;const o=n.getConstrainedZoom(r+e),s=n.getResolutionForZoom(o);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:s,anchor:t,duration:i!==void 0?i:250,easing:I2})}class x1e extends t5{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==xl.DBLCLICK){const i=e.originalEvent,r=e.map,o=e.coordinate,s=i.shiftKey?-this.delta_:this.delta_,a=r.getView();ML(a,s,o,this.duration_),i.preventDefault(),t=!0}return!t}}function fD(n){const e=arguments;return function(t){let i=!0;for(let r=0,o=e.length;r<o&&(i=i&&e[r](t),!!i);++r);return i}}const M1e=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},w1e=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),i=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(i):e.contains(i)},DJ=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?w1e(n):!0},S1e=j4,RJ=function(n){const e=n.originalEvent;return"pointerId"in e&&e.button==0&&!(Fge&&$X&&e.ctrlKey)},PJ=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},E1e=function(n){const e=n.originalEvent;return $X?e.metaKey:e.ctrlKey},B1e=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},LJ=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},JO=function(n){const e=n.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},O1e=function(n){const e=n.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class n5 extends t5{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==xl.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==xl.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==xl.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==xl.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function wL(n){const e=n.length;let t=0,i=0;for(let r=0;r<e;r++)t+=n[r].clientX,i+=n[r].clientY;return{clientX:t/e,clientY:i/e}}class I1e extends n5{constructor(e){super({stopDown:K6}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:fD(PJ,O1e);this.condition_=e.onFocusOnly?fD(DJ,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,r=t.getEventPixel(wL(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const o=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map.getView();e0e(o,a.getResolution()),eL(o,a.getRotation()),a.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),s=i.getCenterInternal(),a=t.getPixelFromCoordinateInternal(s),c=t.getCoordinateFromPixelInternal([a[0]-r*Math.cos(o),a[1]-r*Math.sin(o)]);i.animateInternal({center:i.getConstrainedCenter(c),duration:500,easing:I2})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class T1e extends n5{constructor(e){e=e||{},super({stopDown:K6}),this.condition_=e.condition?e.condition:M1e,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!JO(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===bL)return;const r=t.getSize(),o=e.pixel,s=Math.atan2(r[1]/2-o[1],o[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=s-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=s}handleUpEvent(e){return JO(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return JO(e)&&RJ(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class k1e extends YM{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+i,r.top=Math.min(e[1],t[1])+i,r.width=Math.abs(t[0]-e[0])+i,r.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new U1([r])}getGeometry(){return this.geometry_}}const T_={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class s3 extends Gm{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}class D1e extends n5{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new k1e(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??RJ,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const r=i[0]-t[0],o=i[1]-t[1];return r*r+o*o>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new s3(T_.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new s3(t?T_.BOXEND:T_.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new s3(T_.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new s3(T_.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new s3(T_.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class R1e extends D1e{constructor(e){e=e||{};const t=e.condition?e.condition:B1e;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const o=i.rotatedExtentForGeometry(r),s=i.getResolutionForExtentInternal(o),a=i.getResolution()/s;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:I2})}}const Db={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class P1e extends t5{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return PJ(t)&&LJ(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==cr.KEYDOWN){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==Db.DOWN||r==Db.LEFT||r==Db.RIGHT||r==Db.UP)){const s=e.map.getView(),a=s.getResolution()*this.pixelDelta_;let c=0,f=0;r==Db.DOWN?f=-a:r==Db.LEFT?c=-a:r==Db.RIGHT?c=a:f=a;const y=[c,f];eL(y,s.getRotation()),_1e(s,y,this.duration_),i.preventDefault(),t=!0}}return!t}}class L1e extends t5{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!E1e(t)&&LJ(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==cr.KEYDOWN||e.type==cr.KEYPRESS){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==="+"||r==="-")){const o=e.map,s=r==="+"?this.delta_:-this.delta_,a=o.getView();ML(a,s,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}const U1e=40,K1e=300;class F1e extends t5{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:S1e;this.condition_=e.onFocusOnly?fD(DJ,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==cr.WHEEL)return!0;const i=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let o=r.deltaY;switch(r.deltaMode){case WheelEvent.DOM_DELTA_LINE:o*=U1e;break;case WheelEvent.DOM_DELTA_PAGE:o*=K1e;break}if(o===0)return!1;this.lastDelta_=o;const s=Date.now();this.startTime_===void 0&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-o/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=s,!1;this.totalDelta_+=o;const c=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),c),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-cl(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),ML(t,i,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class z1e extends n5{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=K6),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],r=this.targetPointers[1],o=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const c=o-this.lastAngle_;this.rotationDelta_+=c,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=c}this.lastAngle_=o;const s=e.map,a=s.getView();a.getConstraints().rotation!==bL&&(this.anchor_=s.getCoordinateFromPixelInternal(s.getEventPixel(wL(this.targetPointers))),this.rotating_&&(s.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class j1e extends n5{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=K6),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],r=this.targetPointers[1],o=i.clientX-r.clientX,s=i.clientY-r.clientY,a=Math.sqrt(o*o+s*s);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const c=e.map,f=c.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=c.getCoordinateFromPixelInternal(c.getEventPixel(wL(this.targetPointers))),c.render(),f.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function N1e(n){n=n||{};const e=new fp,t=new C1e(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new T1e),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new x1e({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new I1e({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new z1e),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new j1e({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new P1e),e.push(new L1e({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new F1e({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new R1e({duration:n.zoomDuration})),e}const Gs={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class UJ extends Wm{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Gs.OPACITY]=e.opacity!==void 0?e.opacity:1,xs(typeof t[Gs.OPACITY]=="number","Layer opacity must be a number"),t[Gs.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Gs.Z_INDEX]=e.zIndex,t[Gs.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Gs.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Gs.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Gs.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return t.opacity=cl(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=i===void 0&&!t.managed?1/0:i,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return fr()}getLayerStatesArray(e){return fr()}getExtent(){return this.get(Gs.EXTENT)}getMaxResolution(){return this.get(Gs.MAX_RESOLUTION)}getMinResolution(){return this.get(Gs.MIN_RESOLUTION)}getMinZoom(){return this.get(Gs.MIN_ZOOM)}getMaxZoom(){return this.get(Gs.MAX_ZOOM)}getOpacity(){return this.get(Gs.OPACITY)}getSourceState(){return fr()}getVisible(){return this.get(Gs.VISIBLE)}getZIndex(){return this.get(Gs.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Gs.EXTENT,e)}setMaxResolution(e){this.set(Gs.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Gs.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Gs.MAX_ZOOM,e)}setMinZoom(e){this.set(Gs.MIN_ZOOM,e)}setOpacity(e){xs(typeof e=="number","Layer opacity must be a number"),this.set(Gs.OPACITY,e)}setVisible(e){this.set(Gs.VISIBLE,e)}setZIndex(e){this.set(Gs.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const zy={ADDLAYER:"addlayer",REMOVELAYER:"removelayer"};class Hy extends Gm{constructor(e,t){super(e),this.layer=t}}const e8={LAYERS:"layers"};class LC extends UJ{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(e8.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new fp(i.slice(),{unique:!0}):xs(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new fp(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(fa),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Ro(e,ad.ADD,this.handleLayersAdd_,this),Ro(e,ad.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(fa);VM(this.listenerKeys_);const t=e.getArray();for(let i=0,r=t.length;i<r;i++){const o=t[i];this.registerLayerListeners_(o),this.dispatchEvent(new Hy(zy.ADDLAYER,o))}this.changed()}registerLayerListeners_(e){const t=[Ro(e,r2.PROPERTYCHANGE,this.handleLayerChange_,this),Ro(e,cr.CHANGE,this.handleLayerChange_,this)];e instanceof LC&&t.push(Ro(e,zy.ADDLAYER,this.handleLayerGroupAdd_,this),Ro(e,zy.REMOVELAYER,this.handleLayerGroupRemove_,this)),this.listenerKeys_[Br(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Hy(zy.ADDLAYER,e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Hy(zy.REMOVELAYER,e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Hy(zy.ADDLAYER,t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=Br(t);this.listenerKeys_[i].forEach(fa),delete this.listenerKeys_[i],this.dispatchEvent(new Hy(zy.REMOVELAYER,t)),this.changed()}getLayers(){return this.get(e8.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let r=0,o=i.length;r<o;++r)this.dispatchEvent(new Hy(zy.REMOVELAYER,i[r]))}this.set(e8.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],i=t.length;this.getLayers().forEach(function(s){s.getLayerStatesArray(t)});const r=this.getLayerState();let o=r.zIndex;!e&&r.zIndex===void 0&&(o=0);for(let s=i,a=t.length;s<a;s++){const c=t[s];c.opacity*=r.opacity,c.visible=c.visible&&r.visible,c.maxResolution=Math.min(c.maxResolution,r.maxResolution),c.minResolution=Math.max(c.minResolution,r.minResolution),c.minZoom=Math.max(c.minZoom,r.minZoom),c.maxZoom=Math.min(c.maxZoom,r.maxZoom),r.extent!==void 0&&(c.extent!==void 0?c.extent=Pm(c.extent,r.extent):c.extent=r.extent),c.zIndex===void 0&&(c.zIndex=o)}return t}getSourceState(){return"ready"}}const pp={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class T2 extends UJ{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Gs.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Gs.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(fa(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Ro(e,cr.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof Bm?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let r;if(t.layerStatesArray){if(r=t.layerStatesArray.find(s=>s.layer===this),!r)return!1}else r=this.getLayerState();const o=this.getExtent();return SL(r,t.viewState)&&(!o||wl(o,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];const t=this.getSource()?.getAttributions();if(!t)return[];const i=e instanceof Bm?e.getViewStateAndExtent():e;let r=t(i);return Array.isArray(r)||(r=[r]),r}render(e,t){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Gs.MAP,e)}getMapInternal(){return this.get(Gs.MAP)}setMap(e){this.mapPrecomposeKey_&&(fa(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(fa(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Ro(e,pp.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Ro(this,cr.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,i=this.getLayerState(!1);xs(!t.some(r=>r.layer===i.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(i)}setSource(e){this.set(Gs.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function SL(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}function KJ(n,e,t=0,i=n.length-1,r=G1e){for(;i>t;){if(i-t>600){const c=i-t+1,f=e-t+1,y=Math.log(c),_=.5*Math.exp(2*y/3),E=.5*Math.sqrt(y*_*(c-_)/c)*(f-c/2<0?-1:1),I=Math.max(t,Math.floor(e-f*_/c+E)),P=Math.min(i,Math.floor(e+(c-f)*_/c+E));KJ(n,e,I,P,r)}const o=n[e];let s=t,a=i;for(a3(n,t,e),r(n[i],o)>0&&a3(n,t,i);s<a;){for(a3(n,s,a),s++,a--;r(n[s],o)<0;)s++;for(;r(n[a],o)>0;)a--}r(n[t],o)===0?a3(n,t,a):(a++,a3(n,a,i)),a<=e&&(t=a+1),e<=a&&(i=a-1)}}function a3(n,e,t){const i=n[e];n[e]=n[t],n[t]=i}function G1e(n,e){return n<e?-1:n>e?1:0}let FJ=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!H5(e,t))return i;const r=this.toBBox,o=[];for(;t;){for(let s=0;s<t.children.length;s++){const a=t.children[s],c=t.leaf?r(a):a;H5(e,c)&&(t.leaf?i.push(a):n8(e,c)?this._all(a,i):o.push(a))}t=o.pop()}return i}collides(e){let t=this.data;if(!H5(e,t))return!1;const i=[];for(;t;){for(let r=0;r<t.children.length;r++){const o=t.children[r],s=t.leaf?this.toBBox(o):o;if(H5(e,s)){if(t.leaf||n8(e,s))return!0;i.push(o)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=fx([]),this}remove(e,t){if(!e)return this;let i=this.data;const r=this.toBBox(e),o=[],s=[];let a,c,f;for(;i||o.length;){if(i||(i=o.pop(),c=o[o.length-1],a=s.pop(),f=!0),i.leaf){const y=W1e(e,i.children,t);if(y!==-1)return i.children.splice(y,1),o.push(i),this._condense(o),this}!f&&!i.leaf&&n8(i,r)?(o.push(i),s.push(a),a=0,c=i,i=i.children[0]):c?(a++,i=c.children[a],f=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,r){const o=i-t+1;let s=this._maxEntries,a;if(o<=s)return a=fx(e.slice(t,i+1)),k_(a,this.toBBox),a;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),a=fx([]),a.leaf=!1,a.height=r;const c=Math.ceil(o/s),f=c*Math.ceil(Math.sqrt(s));Mj(e,t,i,f,this.compareMinX);for(let y=t;y<=i;y+=f){const _=Math.min(y+f-1,i);Mj(e,y,_,c,this.compareMinY);for(let E=y;E<=_;E+=c){const I=Math.min(E+c-1,_);a.children.push(this._build(e,E,I,r-1))}}return k_(a,this.toBBox),a}_chooseSubtree(e,t,i,r){for(;r.push(t),!(t.leaf||r.length-1===i);){let o=1/0,s=1/0,a;for(let c=0;c<t.children.length;c++){const f=t.children[c],y=t8(f),_=Y1e(e,f)-y;_<s?(s=_,o=y<o?y:o,a=f):_===s&&y<o&&(o=y,a=f)}t=a||t.children[0]}return t}_insert(e,t,i){const r=i?e:this.toBBox(e),o=[],s=this._chooseSubtree(r,this.data,t,o);for(s.children.push(e),R3(s,r);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(r,o,t)}_split(e,t){const i=e[t],r=i.children.length,o=this._minEntries;this._chooseSplitAxis(i,o,r);const s=this._chooseSplitIndex(i,o,r),a=fx(i.children.splice(s,i.children.length-s));a.height=i.height,a.leaf=i.leaf,k_(i,this.toBBox),k_(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(i,a)}_splitRoot(e,t){this.data=fx([e,t]),this.data.height=e.height+1,this.data.leaf=!1,k_(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let r,o=1/0,s=1/0;for(let a=t;a<=i-t;a++){const c=D3(e,0,a,this.toBBox),f=D3(e,a,i,this.toBBox),y=V1e(c,f),_=t8(c)+t8(f);y<o?(o=y,r=a,s=_<s?_:s):y===o&&_<s&&(s=_,r=a)}return r||i-t}_chooseSplitAxis(e,t,i){const r=e.leaf?this.compareMinX:Q1e,o=e.leaf?this.compareMinY:q1e,s=this._allDistMargin(e,t,i,r),a=this._allDistMargin(e,t,i,o);s<a&&e.children.sort(r)}_allDistMargin(e,t,i,r){e.children.sort(r);const o=this.toBBox,s=D3(e,0,t,o),a=D3(e,i-t,i,o);let c=$5(s)+$5(a);for(let f=t;f<i-t;f++){const y=e.children[f];R3(s,e.leaf?o(y):y),c+=$5(s)}for(let f=i-t-1;f>=t;f--){const y=e.children[f];R3(a,e.leaf?o(y):y),c+=$5(a)}return c}_adjustParentBBoxes(e,t,i){for(let r=i;r>=0;r--)R3(t[r],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():k_(e[t],this.toBBox)}};function W1e(n,e,t){if(!t)return e.indexOf(n);for(let i=0;i<e.length;i++)if(t(n,e[i]))return i;return-1}function k_(n,e){D3(n,0,n.children.length,e,n)}function D3(n,e,t,i,r){r||(r=fx(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let o=e;o<t;o++){const s=n.children[o];R3(r,n.leaf?i(s):s)}return r}function R3(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function Q1e(n,e){return n.minX-e.minX}function q1e(n,e){return n.minY-e.minY}function t8(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function $5(n){return n.maxX-n.minX+(n.maxY-n.minY)}function Y1e(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function V1e(n,e){const t=Math.max(n.minX,e.minX),i=Math.max(n.minY,e.minY),r=Math.min(n.maxX,e.maxX),o=Math.min(n.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,o-i)}function n8(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function H5(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function fx(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Mj(n,e,t,i,r){const o=[e,t];for(;o.length;){if(t=o.pop(),e=o.pop(),t-e<=i)continue;const s=e+Math.ceil((t-e)/i/2)*i;KJ(n,s,e,t,r),o.push(e,s,s,t)}}const EL=[NaN,NaN,NaN,0];let i8;function $1e(){return i8||(i8=Al(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),i8}const H1e=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Z1e=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,X1e=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,J1e=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function Z5(n,e){return n.endsWith("%")?Number(n.substring(0,n.length-1))/e:Number(n)}function s4(n){throw new Error('failed to parse "'+n+'" as color')}function zJ(n){if(n.toLowerCase().startsWith("rgb")){const o=n.match(Z1e)||n.match(H1e)||n.match(X1e);if(o){const s=o[4],a=100/255;return[cl(Z5(o[1],a)+.5|0,0,255),cl(Z5(o[2],a)+.5|0,0,255),cl(Z5(o[3],a)+.5|0,0,255),s!==void 0?cl(Z5(s,100),0,1):1]}s4(n)}if(n.startsWith("#")){if(J1e.test(n)){const o=n.substring(1),s=o.length<=4?1:2,a=[0,0,0,255];for(let c=0,f=o.length;c<f;c+=s){let y=parseInt(o.substring(c,c+s),16);s===1&&(y+=y<<4),a[c/s]=y}return a[3]=a[3]/255,a}s4(n)}const e=$1e();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=n,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=n,e.fillStyle===t&&s4(n));const i=e.fillStyle;if(i.startsWith("#")||i.startsWith("rgba"))return zJ(i);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const r=Array.from(e.getImageData(0,0,1,1).data);return r[3]=F6(r[3]/255,3),r}function eye(n){return typeof n=="string"?n:OL(n)}const tye=1024,l3={};let r8=0;function nye(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function o8(n){return n>.0031308?Math.pow(n,1/2.4)*269.025-14.025:n*3294.6}function s8(n){return n>.2068965?Math.pow(n,3):(n-4/29)*(108/841)}function a8(n){return n>10.314724?Math.pow((n+14.025)/269.025,2.4):n/3294.6}function l8(n){return n>.0088564?Math.pow(n,1/3):n/(108/841)+4/29}function wj(n){const e=a8(n[0]),t=a8(n[1]),i=a8(n[2]),r=l8(e*.222488403+t*.716873169+i*.06060791),o=500*(l8(e*.452247074+t*.399439023+i*.148375274)-r),s=200*(r-l8(e*.016863605+t*.117638439+i*.865350722)),a=Math.atan2(s,o)*(180/Math.PI);return[116*r-16,Math.sqrt(o*o+s*s),a<0?a+360:a,n[3]]}function iye(n){const e=(n[0]+16)/116,t=n[1],i=n[2]*Math.PI/180,r=s8(e),o=s8(e+t/500*Math.cos(i)),s=s8(e-t/200*Math.sin(i)),a=o8(o*3.021973625-r*1.617392459-s*.404875592),c=o8(o*-.943766287+r*1.916279586+s*.027607165),f=o8(o*.069407491-r*.22898585+s*1.159737864);return[cl(a+.5|0,0,255),cl(c+.5|0,0,255),cl(f+.5|0,0,255),n[3]]}function BL(n){if(n==="none")return EL;if(l3.hasOwnProperty(n))return l3[n];if(r8>=tye){let t=0;for(const i in l3)(t++&3)===0&&(delete l3[i],--r8)}const e=zJ(n);e.length!==4&&s4(n);for(const t of e)isNaN(t)&&s4(n);return l3[n]=e,++r8,e}function a2(n){return Array.isArray(n)?n:BL(n)}function OL(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);const r=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+i+","+r+")"}function Sj(n){return n[0]>0&&n[1]>0}function rye(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function NA(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}let UC=0;const bh=1<<UC++,ko=1<<UC++,ld=1<<UC++,Om=1<<UC++,_C=1<<UC++,P3=1<<UC++,X5=Math.pow(2,UC)-1,IL={[bh]:"boolean",[ko]:"number",[ld]:"string",[Om]:"color",[_C]:"number[]",[P3]:"size"},oye=Object.keys(IL).map(Number).sort(A0);function sye(n){return n in IL}function L3(n){const e=[];for(const t of oye)U3(n,t)&&e.push(IL[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function U3(n,e){return(n&e)===e}function jy(n,e){return n===e}class Qu{constructor(e,t){if(!sye(e))throw new Error(`literal expressions must have a specific type, got ${L3(e)}`);this.type=e,this.value=t}}class aye{constructor(e,t,...i){this.type=e,this.operator=t,this.args=i}}function jJ(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function tA(n,e,t){switch(typeof n){case"boolean":{if(jy(e,ld))return new Qu(ld,n?"true":"false");if(!U3(e,bh))throw new Error(`got a boolean, but expected ${L3(e)}`);return new Qu(bh,n)}case"number":{if(jy(e,P3))return new Qu(P3,NA(n));if(jy(e,bh))return new Qu(bh,!!n);if(jy(e,ld))return new Qu(ld,n.toString());if(!U3(e,ko))throw new Error(`got a number, but expected ${L3(e)}`);return new Qu(ko,n)}case"string":{if(jy(e,Om))return new Qu(Om,BL(n));if(jy(e,bh))return new Qu(bh,!!n);if(!U3(e,ld))throw new Error(`got a string, but expected ${L3(e)}`);return new Qu(ld,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return yye(n,e,t);for(const i of n)if(typeof i!="number")throw new Error("expected an array of numbers");if(jy(e,P3)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new Qu(P3,n)}if(jy(e,Om)){if(n.length===3)return new Qu(Om,[...n,1]);if(n.length===4)return new Qu(Om,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!U3(e,_C))throw new Error(`got an array of numbers, but expected ${L3(e)}`);return new Qu(_C,n)}const mn={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},lye={[mn.Get]:hr(Qr(1,1/0),Ej),[mn.Var]:hr(Qr(1,1),uye),[mn.Has]:hr(Qr(1,1/0),Ej),[mn.Id]:hr(cye,D_),[mn.Concat]:hr(Qr(2,1/0),gs(ld)),[mn.GeometryType]:hr(Aye,D_),[mn.LineMetric]:hr(D_),[mn.Resolution]:hr(u8,D_),[mn.Zoom]:hr(u8,D_),[mn.Time]:hr(u8,D_),[mn.Any]:hr(Qr(2,1/0),gs(bh)),[mn.All]:hr(Qr(2,1/0),gs(bh)),[mn.Not]:hr(Qr(1,1),gs(bh)),[mn.Equal]:hr(Qr(2,2),gs(X5)),[mn.NotEqual]:hr(Qr(2,2),gs(X5)),[mn.GreaterThan]:hr(Qr(2,2),gs(ko)),[mn.GreaterThanOrEqualTo]:hr(Qr(2,2),gs(ko)),[mn.LessThan]:hr(Qr(2,2),gs(ko)),[mn.LessThanOrEqualTo]:hr(Qr(2,2),gs(ko)),[mn.Multiply]:hr(Qr(2,1/0),Bj),[mn.Coalesce]:hr(Qr(2,1/0),Bj),[mn.Divide]:hr(Qr(2,2),gs(ko)),[mn.Add]:hr(Qr(2,1/0),gs(ko)),[mn.Subtract]:hr(Qr(2,2),gs(ko)),[mn.Clamp]:hr(Qr(3,3),gs(ko)),[mn.Mod]:hr(Qr(2,2),gs(ko)),[mn.Pow]:hr(Qr(2,2),gs(ko)),[mn.Abs]:hr(Qr(1,1),gs(ko)),[mn.Floor]:hr(Qr(1,1),gs(ko)),[mn.Ceil]:hr(Qr(1,1),gs(ko)),[mn.Round]:hr(Qr(1,1),gs(ko)),[mn.Sin]:hr(Qr(1,1),gs(ko)),[mn.Cos]:hr(Qr(1,1),gs(ko)),[mn.Atan]:hr(Qr(1,2),gs(ko)),[mn.Sqrt]:hr(Qr(1,1),gs(ko)),[mn.Match]:hr(Qr(4,1/0),Oj,dye),[mn.Between]:hr(Qr(3,3),gs(ko)),[mn.Interpolate]:hr(Qr(6,1/0),Oj,fye),[mn.Case]:hr(Qr(3,1/0),hye,pye),[mn.In]:hr(Qr(2,2),mye),[mn.Number]:hr(Qr(1,1/0),gs(X5)),[mn.String]:hr(Qr(1,1/0),gs(X5)),[mn.Array]:hr(Qr(1,1/0),gs(ko)),[mn.Color]:hr(Qr(1,4),gs(ko)),[mn.Band]:hr(Qr(1,3),gs(ko)),[mn.Palette]:hr(Qr(2,2),gye),[mn.ToString]:hr(Qr(1,1),gs(bh|ko|ld|Om))};function Ej(n,e,t){const i=n.length-1,r=new Array(i);for(let o=0;o<i;++o){const s=n[o+1];switch(typeof s){case"number":{r[o]=new Qu(ko,s);break}case"string":{r[o]=new Qu(ld,s);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${s}`)}o===0&&t.properties.add(String(s))}return r}function uye(n,e,t){const i=n[1];if(typeof i!="string")throw new Error("expected a string argument for var operation");return t.variables.add(i),[new Qu(ld,i)]}function cye(n,e,t){t.featureId=!0}function Aye(n,e,t){t.geometryType=!0}function u8(n,e,t){t.mapState=!0}function D_(n,e,t){const i=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${i} operation`);return[]}function Qr(n,e){return function(t,i,r){const o=t[0],s=t.length-1;if(n===e){if(s!==n){const a=n===1?"":"s";throw new Error(`expected ${n} argument${a} for ${o}, got ${s}`)}}else if(s<n||s>e){const a=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${a} arguments for ${o}, got ${s}`)}}}function Bj(n,e,t){const i=n.length-1,r=new Array(i);for(let o=0;o<i;++o){const s=tA(n[o+1],e,t);r[o]=s}return r}function gs(n){return function(e,t,i){const r=e.length-1,o=new Array(r);for(let s=0;s<r;++s){const a=tA(e[s+1],n,i);o[s]=a}return o}}function hye(n,e,t){const i=n[0],r=n.length-1;if(r%2===0)throw new Error(`expected an odd number of arguments for ${i}, got ${r} instead`)}function Oj(n,e,t){const i=n[0],r=n.length-1;if(r%2===1)throw new Error(`expected an even number of arguments for operation ${i}, got ${r} instead`)}function dye(n,e,t){const i=n.length-1,r=ld|ko|bh,o=tA(n[1],r,t),s=tA(n[n.length-1],e,t),a=new Array(i-2);for(let c=0;c<i-2;c+=2){try{const f=tA(n[c+2],o.type,t);a[c]=f}catch(f){throw new Error(`failed to parse argument ${c+1} of match expression: ${f.message}`)}try{const f=tA(n[c+3],s.type,t);a[c+1]=f}catch(f){throw new Error(`failed to parse argument ${c+2} of match expression: ${f.message}`)}}return[o,...a,s]}function fye(n,e,t){const i=n[1];let r;switch(i[0]){case"linear":r=1;break;case"exponential":const c=i[1];if(typeof c!="number"||c<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(c)} instead`);r=c;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}const o=new Qu(ko,r);let s;try{s=tA(n[2],ko,t)}catch(c){throw new Error(`failed to parse argument 1 in interpolate expression: ${c.message}`)}const a=new Array(n.length-3);for(let c=0;c<a.length;c+=2){try{const f=tA(n[c+3],ko,t);a[c]=f}catch(f){throw new Error(`failed to parse argument ${c+2} for interpolate expression: ${f.message}`)}try{const f=tA(n[c+4],e,t);a[c+1]=f}catch(f){throw new Error(`failed to parse argument ${c+3} for interpolate expression: ${f.message}`)}}return[o,s,...a]}function pye(n,e,t){const i=tA(n[n.length-1],e,t),r=new Array(n.length-1);for(let o=0;o<r.length-1;o+=2){try{const s=tA(n[o+1],bh,t);r[o]=s}catch(s){throw new Error(`failed to parse argument ${o} of case expression: ${s.message}`)}try{const s=tA(n[o+2],i.type,t);r[o+1]=s}catch(s){throw new Error(`failed to parse argument ${o+1} of case expression: ${s.message}`)}}return r[r.length-1]=i,r}function mye(n,e,t){let i=n[2];if(!Array.isArray(i))throw new Error('the second argument for the "in" operator must be an array');let r;if(typeof i[0]=="string"){if(i[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(i[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');i=i[1],r=ld}else r=ko;const o=new Array(i.length);for(let a=0;a<o.length;a++)try{const c=tA(i[a],r,t);o[a]=c}catch(c){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${c.message}`)}return[tA(n[1],r,t),...o]}function gye(n,e,t){let i;try{i=tA(n[1],ko,t)}catch(s){throw new Error(`failed to parse first argument in palette expression: ${s.message}`)}const r=n[2];if(!Array.isArray(r))throw new Error("the second argument of palette must be an array");const o=new Array(r.length);for(let s=0;s<o.length;s++){let a;try{a=tA(r[s],Om,t)}catch(c){throw new Error(`failed to parse color at index ${s} in palette expression: ${c.message}`)}if(!(a instanceof Qu))throw new Error(`the palette color at index ${s} must be a literal value`);o[s]=a}return[i,...o]}function hr(...n){return function(e,t,i){const r=e[0];let o;for(let s=0;s<n.length;s++){const a=n[s](e,t,i);if(s==n.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");o=a}}return new aye(t,r,...o)}}function yye(n,e,t){const i=n[0],r=lye[i];if(!r)throw new Error(`unknown operator: ${i}`);return r(n,e,t)}function NJ(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return NJ(n.getGeometries()[0]);default:return""}}function GJ(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function N1(n,e,t){const i=tA(n,e,t);return Lm(i)}function Lm(n,e){if(n instanceof Qu){if(n.type===Om&&typeof n.value=="string"){const i=BL(n.value);return function(){return i}}return function(){return n.value}}const t=n.operator;switch(t){case mn.Number:case mn.String:case mn.Coalesce:return vye(n);case mn.Get:case mn.Var:case mn.Has:return bye(n);case mn.Id:return i=>i.featureId;case mn.GeometryType:return i=>i.geometryType;case mn.Concat:{const i=n.args.map(r=>Lm(r));return r=>"".concat(...i.map(o=>o(r).toString()))}case mn.Resolution:return i=>i.resolution;case mn.Any:case mn.All:case mn.Between:case mn.In:case mn.Not:return _ye(n);case mn.Equal:case mn.NotEqual:case mn.LessThan:case mn.LessThanOrEqualTo:case mn.GreaterThan:case mn.GreaterThanOrEqualTo:return Cye(n);case mn.Multiply:case mn.Divide:case mn.Add:case mn.Subtract:case mn.Clamp:case mn.Mod:case mn.Pow:case mn.Abs:case mn.Floor:case mn.Ceil:case mn.Round:case mn.Sin:case mn.Cos:case mn.Atan:case mn.Sqrt:return xye(n);case mn.Case:return Mye(n);case mn.Match:return wye(n);case mn.Interpolate:return Sye(n);case mn.ToString:return Eye(n);default:throw new Error(`Unsupported operator ${t}`)}}function vye(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=Lm(n.args[o]);switch(t){case mn.Coalesce:return o=>{for(let s=0;s<i;++s){const a=r[s](o);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case mn.Number:case mn.String:return o=>{for(let s=0;s<i;++s){const a=r[s](o);if(typeof a===t)return a}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function bye(n,e){const i=n.args[0].value;switch(n.operator){case mn.Get:return r=>{const o=n.args;let s=r.properties[i];for(let a=1,c=o.length;a<c;++a){const y=o[a].value;s=s[y]}return s};case mn.Var:return r=>r.variables[i];case mn.Has:return r=>{const o=n.args;if(!(i in r.properties))return!1;let s=r.properties[i];for(let a=1,c=o.length;a<c;++a){const y=o[a].value;if(!s||!Object.hasOwn(s,y))return!1;s=s[y]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function Cye(n,e){const t=n.operator,i=Lm(n.args[0]),r=Lm(n.args[1]);switch(t){case mn.Equal:return o=>i(o)===r(o);case mn.NotEqual:return o=>i(o)!==r(o);case mn.LessThan:return o=>i(o)<r(o);case mn.LessThanOrEqualTo:return o=>i(o)<=r(o);case mn.GreaterThan:return o=>i(o)>r(o);case mn.GreaterThanOrEqualTo:return o=>i(o)>=r(o);default:throw new Error(`Unsupported comparison operator ${t}`)}}function _ye(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=Lm(n.args[o]);switch(t){case mn.Any:return o=>{for(let s=0;s<i;++s)if(r[s](o))return!0;return!1};case mn.All:return o=>{for(let s=0;s<i;++s)if(!r[s](o))return!1;return!0};case mn.Between:return o=>{const s=r[0](o),a=r[1](o),c=r[2](o);return s>=a&&s<=c};case mn.In:return o=>{const s=r[0](o);for(let a=1;a<i;++a)if(s===r[a](o))return!0;return!1};case mn.Not:return o=>!r[0](o);default:throw new Error(`Unsupported logical operator ${t}`)}}function xye(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=Lm(n.args[o]);switch(t){case mn.Multiply:return o=>{let s=1;for(let a=0;a<i;++a)s*=r[a](o);return s};case mn.Divide:return o=>r[0](o)/r[1](o);case mn.Add:return o=>{let s=0;for(let a=0;a<i;++a)s+=r[a](o);return s};case mn.Subtract:return o=>r[0](o)-r[1](o);case mn.Clamp:return o=>{const s=r[0](o),a=r[1](o);if(s<a)return a;const c=r[2](o);return s>c?c:s};case mn.Mod:return o=>r[0](o)%r[1](o);case mn.Pow:return o=>Math.pow(r[0](o),r[1](o));case mn.Abs:return o=>Math.abs(r[0](o));case mn.Floor:return o=>Math.floor(r[0](o));case mn.Ceil:return o=>Math.ceil(r[0](o));case mn.Round:return o=>Math.round(r[0](o));case mn.Sin:return o=>Math.sin(r[0](o));case mn.Cos:return o=>Math.cos(r[0](o));case mn.Atan:return i===2?o=>Math.atan2(r[0](o),r[1](o)):o=>Math.atan(r[0](o));case mn.Sqrt:return o=>Math.sqrt(r[0](o));default:throw new Error(`Unsupported numeric operator ${t}`)}}function Mye(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=Lm(n.args[r]);return r=>{for(let o=0;o<t-1;o+=2)if(i[o](r))return i[o+1](r);return i[t-1](r)}}function wye(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=Lm(n.args[r]);return r=>{const o=i[0](r);for(let s=1;s<t-1;s+=2)if(o===i[s](r))return i[s+1](r);return i[t-1](r)}}function Sye(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=Lm(n.args[r]);return r=>{const o=i[0](r),s=i[1](r);let a,c;for(let f=2;f<t;f+=2){const y=i[f](r);let _=i[f+1](r);const E=Array.isArray(_);if(E&&(_=nye(_)),y>=s)return f===2?_:E?Bye(o,s,a,c,y,_):K3(o,s,a,c,y,_);a=y,c=_}return c}}function Eye(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=Lm(n.args[o]);switch(t){case mn.ToString:return o=>{const s=r[0](o);return n.args[0].type===Om?OL(s):s.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function K3(n,e,t,i,r,o){const s=r-t;if(s===0)return i;const a=e-t,c=n===1?a/s:(Math.pow(n,a)-1)/(Math.pow(n,s)-1);return i+c*(o-i)}function Bye(n,e,t,i,r,o){if(r-t===0)return i;const a=wj(i),c=wj(o);let f=c[2]-a[2];f>180?f-=360:f<-180&&(f+=360);const y=[K3(n,e,t,a[0],r,c[0]),K3(n,e,t,a[1],r,c[1]),a[2]+K3(n,e,t,0,r,f),K3(n,e,t,i[3],r,o[3])];return iye(y)}const Bi={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class TL extends $M{constructor(e,t,i,r){super(),this.extent=e,this.pixelRatio_=i,this.resolution=t,this.state=typeof r=="function"?Bi.IDLE:r,this.image_=null,this.loader=typeof r=="function"?r:null}changed(){this.dispatchEvent(cr.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==Bi.IDLE&&this.loader){this.state=Bi.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;o2(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(i=>{"image"in i&&(this.image_=i.image),"extent"in i&&(this.extent=i.extent),"resolution"in i&&(this.resolution=i.resolution),"pixelRatio"in i&&(this.pixelRatio_=i.pixelRatio),(i instanceof HTMLImageElement||jge&&i instanceof ImageBitmap||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement)&&(this.image_=i),this.state=Bi.LOADED}).catch(i=>{this.state=Bi.ERROR,console.error(i)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function Oye(n,e,t){const i=n;let r=!0,o=!1,s=!1;const a=[HS(i,cr.LOAD,function(){s=!0,o||e()})];return i.src&&HX?(o=!0,i.decode().then(function(){r&&e()}).catch(function(c){r&&(s?e():t())})):a.push(HS(i,cr.ERROR,t)),function(){r=!1,a.forEach(fa)}}function Iye(n,e){return new Promise((t,i)=>{function r(){s(),t(n)}function o(){s(),i(new Error("Image load error"))}function s(){n.removeEventListener("load",r),n.removeEventListener("error",o)}n.addEventListener("load",r),n.addEventListener("error",o)})}function Tye(n,e){return e&&(n.src=e),n.src&&HX?new Promise((t,i)=>n.decode().then(()=>t(n)).catch(r=>n.complete&&n.width?t(n):i(r))):Iye(n)}class kye{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];(e++&3)===0&&!i.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,i){const r=c8(e,t,i);return r in this.cache_?this.cache_[r]:null}getPattern(e,t,i){const r=c8(e,t,i);return r in this.patternCache_?this.patternCache_[r]:null}set(e,t,i,r,o){const s=c8(e,t,i),a=s in this.cache_;this.cache_[s]=r,o&&(r.getImageState()===Bi.IDLE&&r.load(),r.getImageState()===Bi.LOADING?r.ready().then(()=>{this.patternCache_[s]=iE().createPattern(r.getImage(1),"repeat")}):this.patternCache_[s]=iE().createPattern(r.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function c8(n,e,t){const i=t?a2(t):"null";return e+":"+n+":"+i}const mp=new kye;let u3=null;class WJ extends $M{constructor(e,t,i,r,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=o,this.imageState_=r===void 0?Bi.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Bi.LOADED){u3||(u3=Al(1,1,void 0,{willReadFrequently:!0})),u3.drawImage(this.image_,0,0);try{u3.getImageData(0,0,1,1),this.tainted_=!1}catch{u3=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(cr.CHANGE)}handleImageError_(){this.imageState_=Bi.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Bi.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=Al(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Bi.IDLE){this.image_||this.initializeImage_(),this.imageState_=Bi.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&Tye(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Bi.LOADED)return;const t=this.image_,i=Al(Math.ceil(t.width*e),Math.ceil(t.height*e)),r=i.canvas;i.scale(e,e),i.drawImage(t,0,0),i.globalCompositeOperation="multiply",i.fillStyle=eye(this.color_),i.fillRect(0,0,r.width/e,r.height/e),i.globalCompositeOperation="destination-in",i.drawImage(t,0,0),this.canvas_[e]=r}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===Bi.LOADED||this.imageState_===Bi.ERROR)e();else{const t=()=>{(this.imageState_===Bi.LOADED||this.imageState_===Bi.ERROR)&&(this.removeEventListener(cr.CHANGE,t),e())};this.addEventListener(cr.CHANGE,t)}})),this.ready_}}function rE(n,e,t,i,r,o){let s=e===void 0?void 0:mp.get(e,t,r);return s||(s=new WJ(n,n&&"src"in n?n.src||void 0:e,t,i,r),mp.set(e,t,r,s,o)),o&&s&&!mp.getPattern(e,t,r)&&mp.set(e,t,r,s,o),s}function e0(n){return n?Array.isArray(n)?OL(n):typeof n=="object"&&"src"in n?Dye(n):n:null}function Dye(n){if(!n.offset||!n.size)return mp.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=mp.getPattern(e,void 0,n.color);if(t)return t;const i=mp.get(n.src,"anonymous",null);if(i.getImageState()!==Bi.LOADED)return null;const r=Al(n.size[0],n.size[1]);return r.drawImage(i.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),rE(r.canvas,e,void 0,Bi.LOADED,n.color,!0),mp.getPattern(e,void 0,n.color)}const QJ="10px sans-serif",ud="#000",l2="round",I1=[],T1=0,u2="round",q4=10,Y4="#000",V4="center",oE="middle",Hb=[0,0,0,0],$4=1,jb=new Wm;let c3=null,Ij;const pD={},Rye=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function Pye(n,e,t){return`${n} ${e} 16px "${t}"`}const Lye=(function(){let e,t;async function i(o){await t.ready;const s=await t.load(o);if(s.length===0)return!1;const a=dD(o),c=a.families[0].toLowerCase(),f=a.weight;return s.some(y=>{const _=y.family.replace(/^['"]|['"]$/g,"").toLowerCase(),E=hD[y.weight]||y.weight;return _===c&&y.style===a.style&&E==f})}async function r(){await t.ready;let o=!0;const s=jb.getProperties(),a=Object.keys(s).filter(c=>s[c]<100);for(let c=a.length-1;c>=0;--c){const f=a[c];let y=s[f];y<100&&(await i(f)?(VM(pD),jb.set(f,100)):(y+=10,jb.set(f,y,!0),y<100&&(o=!1)))}e=void 0,o||(e=setTimeout(r,100))}return async function(o){t||(t=jA?self.fonts:document.fonts);const s=dD(o);if(!s)return;const a=s.families;let c=!1;for(const f of a){if(Rye.has(f))continue;const y=Pye(s.style,s.weight,f);jb.get(y)===void 0&&(jb.set(y,0,!0),c=!0)}c&&(clearTimeout(e),e=setTimeout(r,100))}})(),Uye=(function(){let n;return function(e){let t=pD[e];if(t==null){if(jA){const i=dD(e),r=qJ(e,"g");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);pD[e]=t}return t}})();function qJ(n,e){return c3||(c3=Al(1,1)),n!=Ij&&(c3.font=n,Ij=c3.font),c3.measureText(e)}function YJ(n,e){return qJ(n,e).width}function Tj(n,e,t){if(e in t)return t[e];const i=e.split(`
`).reduce((r,o)=>Math.max(r,YJ(n,o)),0);return t[e]=i,i}function Kye(n,e){const t=[],i=[],r=[];let o=0,s=0,a=0,c=0;for(let f=0,y=e.length;f<=y;f+=2){const _=e[f];if(_===`
`||f===y){o=Math.max(o,s),r.push(s),s=0,a+=c,c=0;continue}const E=e[f+1]||n.font,I=YJ(E,_);t.push(I),s+=I;const P=Uye(E);i.push(P),c=Math.max(c,P)}return{width:o,height:a,widths:t,heights:i,lineWidths:r}}function Fye(n,e,t,i,r,o,s,a,c,f,y){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=_=>_.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),i.contextInstructions?(n.translate(c,f),n.scale(y[0],y[1]),zye(i,n)):y[0]<0||y[1]<0?(n.translate(c,f),n.scale(y[0],y[1]),n.drawImage(i,r,o,s,a,0,0,s,a)):n.drawImage(i,r,o,s,a,c,f,s*y[0],a*y[1]),n.restore()}function zye(n,e){const t=n.contextInstructions;for(let i=0,r=t.length;i<r;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}class Z6{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=NA(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Z6({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return fr()}getImage(e){return fr()}getHitDetectionImage(){return fr()}getPixelRatio(e){return 1}getImageState(){return fr()}getImageSize(){return fr()}getOrigin(){return fr()}getSize(){return fr()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=NA(e)}listenImageChange(e){fr()}load(){fr()}unlistenImageChange(e){fr()}ready(){return Promise.resolve()}}class X6 extends Z6{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Bi.LOADING:Bi.LOADED,this.imageState_===Bi.LOADING&&this.ready().then(()=>this.imageState_=Bi.LOADED),this.render()}clone(){const e=this.getScale(),t=new X6({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const t=this.fill_?.getKey(),i=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let r=mp.get(i,null,null)?.getImage(1);if(!r){const o=this.renderOptions_,s=Math.ceil(o.size*e),a=Al(s,s);this.draw_(o,a,e),r=a.canvas,mp.set(i,null,null,new WJ(r,void 0,null,Bi.LOADED,null))}return r}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let r=this.radius,o=this.radius2_===void 0?r:this.radius2_;if(r<o){const X=r;r=o,o=X}const s=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/s,c=o*Math.sin(a),f=Math.sqrt(o*o-c*c),y=r-f,_=Math.sqrt(c*c+y*y),E=_/c;if(e==="miter"&&E<=i)return E*t;const I=t/2/E,P=t/2*(y/_),z=Math.sqrt((r+I)*(r+I)+P*P)-r;if(this.radius2_===void 0||e==="bevel")return z*2;const Q=r*Math.sin(a),V=Math.sqrt(r*r-Q*Q),$=o-V,ee=Math.sqrt(Q*Q+$*$)/Q;if(ee<=i){const X=ee*t/2-o-r;return 2*Math.max(z,X)}return z*2}createRenderOptions(){let e=l2,t=u2,i=0,r=null,o=0,s,a=0;this.stroke_&&(s=e0(this.stroke_.getColor()??Y4),a=this.stroke_.getWidth()??$4,r=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??u2,e=this.stroke_.getLineCap()??l2,i=this.stroke_.getMiterLimit()??q4);const c=this.calculateLineJoinSize_(t,a,i),f=Math.max(this.radius,this.radius2_||0),y=Math.ceil(2*f+c);return{strokeStyle:s,strokeWidth:a,size:y,lineCap:e,lineDash:r,lineDashOffset:o,lineJoin:t,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();r===null&&(r=ud),t.fillStyle=e0(r),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let i=this.fill_.getColor(),r=0;typeof i=="string"&&(i=a2(i)),i===null?r=1:Array.isArray(i)&&(r=i.length===4?i[3]:1),r===0&&(t=Al(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const i=this.radius;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(t*=2);const o=this.angle_-Math.PI/2,s=2*Math.PI/t;for(let a=0;a<t;a++){const c=o+a*s,f=a%2===0?i:r;e.lineTo(f*Math.cos(c),f*Math.sin(c))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=ud,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class i5 extends X6{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new i5({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class t0{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new t0({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=rE(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===Bi.IDLE&&t.load(),t.getImageState()===Bi.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Br(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:a2(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function kj(n,e,t,i){return t!==void 0&&i!==void 0?[t/n,i/e]:t!==void 0?t/n:i!==void 0?i/e:1}class c2 extends Z6{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,o=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:i,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:o,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const s=e.img!==void 0?e.img:null;let a=e.src;xs(!(a!==void 0&&s),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&s&&(a=s.src||Br(s)),xs(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),xs(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let c;if(e.src!==void 0?c=Bi.IDLE:s!==void 0&&("complete"in s?s.complete?c=s.src?Bi.LOADED:Bi.IDLE:c=Bi.LOADING:c=Bi.LOADED),this.color_=e.color!==void 0?a2(e.color):null,this.iconImage_=rE(s,a,this.crossOrigin_,c,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let f,y;if(e.size)[f,y]=e.size;else{const _=this.getImage(1);if(_.width&&_.height)f=_.width,y=_.height;else if(_ instanceof HTMLImageElement){this.initialOptions_=e;const E=()=>{if(this.unlistenImageChange(E),!this.initialOptions_)return;const I=this.iconImage_.getSize();this.setScale(kj(I[0],I[1],e.width,e.height))};this.listenImageChange(E);return}}f!==void 0&&this.setScale(kj(f,y,e.width,e.height))}}clone(){let e,t,i;return this.initialOptions_?(t=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new c2({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(e){this.iconImage_=rE(null,e,this.crossOrigin_,Bi.IDLE,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==Bi.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==Bi.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(cr.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(cr.CHANGE,e)}ready(){return this.iconImage_.ready()}}class lv{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new lv({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class lf{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=Dj,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new lf({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=Dj,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function jye(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(xs(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let A8=null;function VJ(n,e){if(!A8){const t=new t0({color:"rgba(255,255,255,0.4)"}),i=new lv({color:"#3399CC",width:1.25});A8=[new lf({image:new i5({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return A8}function Dj(n){return n.getGeometry()}const Nye="#333";let $J=class HJ{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=NA(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new t0({color:Nye}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new HJ({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof t0?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=NA(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}};function Gye(n){return!0}function Wye(n){const e=jJ(),t=Qye(n,e),i=GJ();return function(r,o){if(i.properties=r.getPropertiesInternal(),i.resolution=o,e.featureId){const s=r.getId();s!==void 0?i.featureId=s:i.featureId=null}return e.geometryType&&(i.geometryType=NJ(r.getGeometry())),t(i)}}function Rj(n){const e=jJ(),t=n.length,i=new Array(t);for(let s=0;s<t;++s)i[s]=mD(n[s],e);const r=GJ(),o=new Array(t);return function(s,a){if(r.properties=s.getPropertiesInternal(),r.resolution=a,e.featureId){const f=s.getId();f!==void 0?r.featureId=f:r.featureId=null}let c=0;for(let f=0;f<t;++f){const y=i[f](r);y&&(o[c]=y,c+=1)}return o.length=c,o}}function Qye(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r){const o=n[r],s="filter"in o?N1(o.filter,bh,e):Gye;let a;if(Array.isArray(o.style)){const c=o.style.length;a=new Array(c);for(let f=0;f<c;++f)a[f]=mD(o.style[f],e)}else a=[mD(o.style,e)];i[r]={filter:s,styles:a}}return function(r){const o=[];let s=!1;for(let a=0;a<t;++a){const c=i[a].filter;if(c(r)&&!(n[a].else&&s)){s=!0;for(const f of i[a].styles){const y=f(r);y&&o.push(y)}}}return o}}function mD(n,e){const t=H4(n,"",e),i=Z4(n,"",e),r=qye(n,e),o=Yye(n,e),s=hd(n,"z-index",e);if(!t&&!i&&!r&&!o&&!_v(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const a=new lf;return function(c){let f=!0;if(t){const y=t(c);y&&(f=!1),a.setFill(y)}if(i){const y=i(c);y&&(f=!1),a.setStroke(y)}if(r){const y=r(c);y&&(f=!1),a.setText(y)}if(o){const y=o(c);y&&(f=!1),a.setImage(y)}return s&&a.setZIndex(s(c)),f?null:a}}function H4(n,e,t){let i;if(e+"fill-pattern-src"in n)i=Zye(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return o=>null;i=kL(n,e+"fill-color",t)}if(!i)return null;const r=new t0;return function(o){const s=i(o);return s===EL?null:(r.setColor(s),r)}}function Z4(n,e,t){const i=hd(n,e+"stroke-width",t),r=kL(n,e+"stroke-color",t);if(!i&&!r)return null;const o=_1(n,e+"stroke-line-cap",t),s=_1(n,e+"stroke-line-join",t),a=ZJ(n,e+"stroke-line-dash",t),c=hd(n,e+"stroke-line-dash-offset",t),f=hd(n,e+"stroke-miter-limit",t),y=new lv;return function(_){if(r){const E=r(_);if(E===EL)return null;y.setColor(E)}if(i&&y.setWidth(i(_)),o){const E=o(_);if(E!=="butt"&&E!=="round"&&E!=="square")throw new Error("Expected butt, round, or square line cap");y.setLineCap(E)}if(s){const E=s(_);if(E!=="bevel"&&E!=="round"&&E!=="miter")throw new Error("Expected bevel, round, or miter line join");y.setLineJoin(E)}return a&&y.setLineDash(a(_)),c&&y.setLineDashOffset(c(_)),f&&y.setMiterLimit(f(_)),y}}function qye(n,e){const t="text-",i=_1(n,t+"value",e);if(!i)return null;const r=H4(n,t,e),o=H4(n,t+"background-",e),s=Z4(n,t,e),a=Z4(n,t+"background-",e),c=_1(n,t+"font",e),f=hd(n,t+"max-angle",e),y=hd(n,t+"offset-x",e),_=hd(n,t+"offset-y",e),E=Ux(n,t+"overflow",e),I=_1(n,t+"placement",e),P=hd(n,t+"repeat",e),K=J6(n,t+"scale",e),z=Ux(n,t+"rotate-with-view",e),Q=hd(n,t+"rotation",e),V=_1(n,t+"align",e),$=_1(n,t+"justify",e),Z=_1(n,t+"baseline",e),ee=Ux(n,t+"keep-upright",e),X=ZJ(n,t+"padding",e),W=eB(n,t+"declutter-mode"),se=new $J({declutterMode:W});return function(ue){if(se.setText(i(ue)),r&&se.setFill(r(ue)),o&&se.setBackgroundFill(o(ue)),s&&se.setStroke(s(ue)),a&&se.setBackgroundStroke(a(ue)),c&&se.setFont(c(ue)),f&&se.setMaxAngle(f(ue)),y&&se.setOffsetX(y(ue)),_&&se.setOffsetY(_(ue)),E&&se.setOverflow(E(ue)),I){const ve=I(ue);if(ve!=="point"&&ve!=="line")throw new Error("Expected point or line for text-placement");se.setPlacement(ve)}if(P&&se.setRepeat(P(ue)),K&&se.setScale(K(ue)),z&&se.setRotateWithView(z(ue)),Q&&se.setRotation(Q(ue)),V){const ve=V(ue);if(ve!=="left"&&ve!=="center"&&ve!=="right"&&ve!=="end"&&ve!=="start")throw new Error("Expected left, right, center, start, or end for text-align");se.setTextAlign(ve)}if($){const ve=$(ue);if(ve!=="left"&&ve!=="right"&&ve!=="center")throw new Error("Expected left, right, or center for text-justify");se.setJustify(ve)}if(Z){const ve=Z(ue);if(ve!=="bottom"&&ve!=="top"&&ve!=="middle"&&ve!=="alphabetic"&&ve!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");se.setTextBaseline(ve)}return X&&se.setPadding(X(ue)),ee&&se.setKeepUpright(ee(ue)),se}}function Yye(n,e){return"icon-src"in n?Vye(n,e):"shape-points"in n?$ye(n,e):"circle-radius"in n?Hye(n,e):null}function Vye(n,e){const t="icon-",i=t+"src",r=XJ(n[i],i),o=sE(n,t+"anchor",e),s=J6(n,t+"scale",e),a=hd(n,t+"opacity",e),c=sE(n,t+"displacement",e),f=hd(n,t+"rotation",e),y=Ux(n,t+"rotate-with-view",e),_=Lj(n,t+"anchor-origin"),E=Uj(n,t+"anchor-x-units"),I=Uj(n,t+"anchor-y-units"),P=tve(n,t+"color"),K=Jye(n,t+"cross-origin"),z=eve(n,t+"offset"),Q=Lj(n,t+"offset-origin"),V=aE(n,t+"width"),$=aE(n,t+"height"),Z=Xye(n,t+"size"),ee=eB(n,t+"declutter-mode"),X=new c2({src:r,anchorOrigin:_,anchorXUnits:E,anchorYUnits:I,color:P,crossOrigin:K,offset:z,offsetOrigin:Q,height:$,width:V,size:Z,declutterMode:ee});return function(W){return a&&X.setOpacity(a(W)),c&&X.setDisplacement(c(W)),f&&X.setRotation(f(W)),y&&X.setRotateWithView(y(W)),s&&X.setScale(s(W)),o&&X.setAnchor(o(W)),X}}function $ye(n,e){const t="shape-",i=t+"points",r=t+"radius",o=gD(n[i],i),s=gD(n[r],r),a=H4(n,t,e),c=Z4(n,t,e),f=J6(n,t+"scale",e),y=sE(n,t+"displacement",e),_=hd(n,t+"rotation",e),E=Ux(n,t+"rotate-with-view",e),I=aE(n,t+"radius2"),P=aE(n,t+"angle"),K=eB(n,t+"declutter-mode"),z=new X6({points:o,radius:s,radius2:I,angle:P,declutterMode:K});return function(Q){return a&&z.setFill(a(Q)),c&&z.setStroke(c(Q)),y&&z.setDisplacement(y(Q)),_&&z.setRotation(_(Q)),E&&z.setRotateWithView(E(Q)),f&&z.setScale(f(Q)),z}}function Hye(n,e){const t="circle-",i=H4(n,t,e),r=Z4(n,t,e),o=hd(n,t+"radius",e),s=J6(n,t+"scale",e),a=sE(n,t+"displacement",e),c=hd(n,t+"rotation",e),f=Ux(n,t+"rotate-with-view",e),y=eB(n,t+"declutter-mode"),_=new i5({radius:5,declutterMode:y});return function(E){return o&&_.setRadius(o(E)),i&&_.setFill(i(E)),r&&_.setStroke(r(E)),a&&_.setDisplacement(a(E)),c&&_.setRotation(c(E)),f&&_.setRotateWithView(f(E)),s&&_.setScale(s(E)),_}}function hd(n,e,t){if(!(e in n))return;const i=N1(n[e],ko,t);return function(r){return gD(i(r),e)}}function _1(n,e,t){if(!(e in n))return null;const i=N1(n[e],ld,t);return function(r){return XJ(i(r),e)}}function Zye(n,e,t){const i=_1(n,e+"pattern-src",t),r=Pj(n,e+"pattern-offset",t),o=Pj(n,e+"pattern-size",t),s=kL(n,e+"color",t);return function(a){return{src:i(a),offset:r&&r(a),size:o&&o(a),color:s&&s(a)}}}function Ux(n,e,t){if(!(e in n))return null;const i=N1(n[e],bh,t);return function(r){const o=i(r);if(typeof o!="boolean")throw new Error(`Expected a boolean for ${e}`);return o}}function kL(n,e,t){if(!(e in n))return null;const i=N1(n[e],Om,t);return function(r){return JJ(i(r),e)}}function ZJ(n,e,t){if(!(e in n))return null;const i=N1(n[e],_C,t);return function(r){return r5(i(r),e)}}function sE(n,e,t){if(!(e in n))return null;const i=N1(n[e],_C,t);return function(r){const o=r5(i(r),e);if(o.length!==2)throw new Error(`Expected two numbers for ${e}`);return o}}function Pj(n,e,t){if(!(e in n))return null;const i=N1(n[e],_C,t);return function(r){return eee(i(r),e)}}function J6(n,e,t){if(!(e in n))return null;const i=N1(n[e],_C|ko,t);return function(r){return nve(i(r),e)}}function aE(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function Xye(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return NA(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function Jye(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function Lj(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function Uj(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function eve(n,e){const t=n[e];if(t!==void 0)return r5(t,e)}function eB(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function tve(n,e){const t=n[e];if(t!==void 0)return JJ(t,e)}function r5(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let i=0;i<t;++i)if(typeof n[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function XJ(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function gD(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function JJ(n,e){if(typeof n=="string")return n;const t=r5(n,e),i=t.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function eee(n,e){const t=r5(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function nve(n,e){return typeof n=="number"?n:eee(n,e)}const Kj={RENDER_ORDER:"renderOrder"};class DL extends T2{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Kj.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const i=this.getDeclutter();i in e.declutter||(e.declutter[i]=new FJ(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(Kj.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?VJ:e;const t=ive(e);this.styleFunction_=e===null?void 0:jye(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function ive(n){if(n===void 0)return VJ;if(!n)return null;if(typeof n=="function"||n instanceof lf)return n;if(!Array.isArray(n))return Rj([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof lf){const r=new Array(e);for(let o=0;o<e;++o){const s=n[o];if(!(s instanceof lf))throw new Error("Expected a list of style instances");r[o]=s}return r}if("style"in t){const r=new Array(e);for(let o=0;o<e;++o){const s=n[o];if(!("style"in s))throw new Error("Expected a list of rules with a style property");r[o]=s}return Wye(r)}return Rj(n)}class tee extends Gm{constructor(e,t,i,r){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=r}}class rve extends YM{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){fr()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;p0(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),gJ(r,i)}forEachFeatureAtCoordinate(e,t,i,r,o,s,a,c){let f;const y=t.viewState;function _(Z,ee,X,W){return o.call(s,ee,Z?X:null,W)}const E=y.projection,I=tL(e.slice(),E),P=[[0,0]];if(E.canWrapX()&&r){const Z=E.getExtent(),ee=Go(Z);P.push([-ee,0],[ee,0])}const K=t.layerStatesArray,z=K.length,Q=[],V=[];for(let Z=0;Z<P.length;Z++)for(let ee=z-1;ee>=0;--ee){const X=K[ee],W=X.layer;if(W.hasRenderer()&&SL(X,y)&&a.call(c,W)){const se=W.getRenderer(),ue=W.getSource();if(se&&ue){const ve=ue.getWrapX()?I:e,ye=_.bind(null,X.managed);V[0]=ve[0]+P[Z][0],V[1]=ve[1]+P[Z][1],f=se.forEachFeatureAtCoordinate(V,t,i,ye,Q)}if(f)return f}}if(Q.length===0)return;const $=1/Q.length;return Q.forEach((Z,ee)=>Z.distanceSq+=ee*$),Q.sort((Z,ee)=>Z.distanceSq-ee.distanceSq),Q.some(Z=>f=Z.callback(Z.feature,Z.layer,Z.geometry)),f}hasFeatureAtCoordinate(e,t,i,r,o,s){return this.forEachFeatureAtCoordinate(e,t,i,r,j4,this,o,s)!==void 0}getMap(){return this.map_}renderFrame(e){fr()}scheduleExpireIconCache(e){mp.canExpireCache()&&e.postRenderFunctions.push(ove)}}function ove(n,e){mp.expire()}class sve extends rve{constructor(e){super(e),this.fontChangeListenerKey_=Ro(jb,r2.PROPERTYCHANGE,e.redrawText,e),this.element_=jA?kJ():document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=H6+" ol-layers";const i=e.getViewport();i&&i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const r=new tee(e,void 0,t);i.dispatchEvent(r)}}disposeInternal(){fa(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(pp.PRECOMPOSE,e);const t=e.layerStatesArray.sort((f,y)=>f.zIndex-y.zIndex);t.some(f=>f.layer instanceof DL&&f.layer.getDeclutter())&&(e.declutter={});const r=e.viewState;this.children_.length=0;const o=[];let s=null;for(let f=0,y=t.length;f<y;++f){const _=t[f];e.layerIndex=f;const E=_.layer,I=E.getSourceState();if(!SL(_,r)||I!="ready"&&I!="undefined"){E.unrender();continue}const P=E.render(e,s);P&&(P!==s&&(this.children_.push(P),s=P),o.push(_))}this.declutter(e,o),m1e(this.element_,this.children_);const c=this.getMap().getTargetElement();if(av(c)){const f=c.getContext("2d");for(const y of this.children_){const _=y.firstElementChild||y,E=y.style.backgroundColor;if(E&&(!av(_)||_.width>0)&&(f.fillStyle=E,f.fillRect(0,0,c.width,c.height)),av(_)&&_.width>0){const I=y.style.opacity||_.style.opacity;f.globalAlpha=I===""?1:Number(I);const P=_.style.transform;if(P)f.setTransform(...uD(P));else{const K=parseFloat(_.style.width)/_.width,z=parseFloat(_.style.height)/_.height;f.setTransform(K,0,0,z,0,0)}f.drawImage(_,0,0)}}f.globalAlpha=1,f.setTransform(1,0,0,1,0,0)}this.dispatchRenderEvent(pp.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let i=t.length-1;i>=0;--i){const r=t[i],o=r.layer;o.getDeclutter()&&o.renderDeclutter(e,r)}t.forEach(i=>i.layer.renderDeferred(e))}}}function nee(n){if(n instanceof T2){n.setMapInternal(null);return}n instanceof LC&&n.getLayers().forEach(nee)}function iee(n,e){if(n instanceof T2){n.setMapInternal(e);return}if(n instanceof LC){const t=n.getLayers().getArray();for(let i=0,r=t.length;i<r;++i)iee(t[i],e)}}let X4=class extends Wm{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=ave(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:zge,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=fd(),this.pixelToCoordinateTransform_=fd(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,jA||(this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_)),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,jA||(this.resizeObserver_=new ResizeObserver(()=>this.updateSize())),this.controls=t.controls||(jA?new fp:b1e()),this.interactions=t.interactions||(jA?new fp:N1e({onFocusOnly:!0})),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new XX(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(PA.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(PA.VIEW,this.handleViewChanged_),this.addChangeListener(PA.SIZE,this.handleSizeChanged_),this.addChangeListener(PA.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof Bm)&&e.view.then(function(r){i.setView(new Bm(r))}),this.controls.addEventListener(ad.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(ad.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(ad.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(ad.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(ad.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(ad.REMOVE,r=>{const o=r.element.getId();o!==void 0&&delete this.overlayIdIndex_[o.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){iee(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_?.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const o=i.hitTolerance!==void 0?i.hitTolerance:0,s=i.layerFilter!==void 0?i.layerFilter:j4,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,o,a,t,null,s,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},t),i}getAllLayers(){const e=[];function t(i){i.forEach(function(r){r instanceof LC?t(r.getLayers()):e.push(r)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const r=t.layerFilter!==void 0?t.layerFilter:j4,o=t.hitTolerance!==void 0?t.hitTolerance:0,s=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,o,s,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),o=i.width/r[0],s=i.height/r[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-i.left)/o,(a.clientY-i.top)/s]}getTarget(){return this.get(PA.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return lD(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Cu(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(PA.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof fp){t.setLayers(e);return}const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t];if(!r.visible)continue;const o=r.layer.getRenderer();if(o&&!o.ready)return!0;const s=r.layer.getSource();if(s&&s.loading)return!0}return!1}getPixelFromCoordinate(e){const t=b1(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Cu(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(PA.SIZE)}getView(){return this.get(PA.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,r){return Wge(this.frameState_,e,t,i,r)}handleBrowserEvent(e,t){t=t||e.type;const i=new Vy(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===X9.POINTERDOWN||i===cr.WHEEL||i===cr.KEYDOWN){const r=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():r,s=t.target,a=o instanceof ShadowRoot?o.host===s?o.host.ownerDocument:o:o===r?r.documentElement:o;if(this.overlayContainerStopEvent_.contains(s)||!a.contains(s))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const r=this.getInteractions().getArray().slice();for(let o=r.length-1;o>=0;o--){const s=r[o];if(s.getMap()!==this||!s.getActive()||!this.getTargetElement())continue;if(!s.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,o=r;if(e){const s=e.viewHints;if(s[Qa.ANIMATING]||s[Qa.INTERACTING]){const a=Date.now()-e.time>8;r=a?0:8,o=a?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,o))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(pp.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(pp.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new dx(C1.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new dx(C1.LOADSTART,this,e))));const i=this.postRenderFunctions_;if(e)for(let r=0,o=i.length;r<o;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)fa(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(cr.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(cr.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_&&!av(this.targetElement_)){this.resizeObserver_?.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{if(av(t)||t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new sve(this)),!av(t)){this.mapBrowserEventHandler_=new Nge(this,this.moveTolerance_);for(const r in xl)this.mapBrowserEventHandler_.addEventListener(xl[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(cr.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(cr.WHEEL,this.boundHandleBrowserEvent_,ZX?{passive:!1}:!1);let i;if(this.keyboardEventTarget_)i=this.keyboardEventTarget_;else{const r=t.getRootNode();i=r instanceof ShadowRoot?r.host:t}if(this.targetChangeHandlerKeys_=[Ro(i,cr.KEYDOWN,this.handleBrowserEvent,this),Ro(i,cr.KEYPRESS,this.handleBrowserEvent,this)],t instanceof HTMLElement){const r=t.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_?.observe(t)}}this.updateSize()}}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(fa(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(fa(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Ro(e,r2.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Ro(e,cr.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(fa),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Hy("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Ro(e,r2.PROPERTYCHANGE,this.render,this),Ro(e,cr.CHANGE,this.render,this),Ro(e,"addlayer",this.handleLayerAdd_,this),Ro(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,i=e.length;t<i;++t){const r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){nee(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),r=this.frameState_;let o=null;if(t!==void 0&&Sj(t)&&i&&i.isDef()){const s=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:XS(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:s,wantedTiles:{},mapId:Br(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const c=isNaN(a.nextRotation)?a.rotation:a.nextRotation;o.nextExtent=XS(a.nextCenter,a.nextResolution,c,t)}}this.frameState_=o,this.renderer_.renderFrame(o),o&&(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),r&&(!this.previousExtent_||!DC(this.previousExtent_)&&!L1(o.extent,this.previousExtent_))&&(this.dispatchEvent(new dx(C1.MOVESTART,this,r)),this.previousExtent_=O2(this.previousExtent_)),this.previousExtent_&&!o.viewHints[Qa.ANIMATING]&&!o.viewHints[Qa.INTERACTING]&&!L1(o.extent,this.previousExtent_)&&(this.dispatchEvent(new dx(C1.MOVEEND,this,o)),JX(o.extent,this.previousExtent_))),this.dispatchEvent(new dx(C1.POSTRENDER,this,o)),this.renderComplete_=(this.hasListener(C1.LOADSTART)||this.hasListener(C1.LOADEND)||this.hasListener(pp.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Hy("removelayer",t)),this.set(PA.LAYERGROUP,e)}setSize(e){this.set(PA.SIZE,e)}setTarget(e){this.set(PA.TARGET,e)}setView(e){if(!e||e instanceof Bm){this.set(PA.VIEW,e);return}this.set(PA.VIEW,new Bm);const t=this;e.then(function(i){t.setView(new Bm(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){let r,o;if(av(e))r=e.width,o=e.height;else{const s=getComputedStyle(e);r=e.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),o=e.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth)}!isNaN(r)&&!isNaN(o)&&(t=[Math.max(0,r),Math.max(0,o)],!Sj(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&uJ("No map visible because the map container's width or height are 0."))}const i=this.getSize();t&&(!i||!Tv(t,i))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function ave(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new LC({layers:n.layers});t[PA.LAYERGROUP]=i,t[PA.TARGET]=n.target,t[PA.VIEW]=n.view instanceof Bm?n.view:new Bm;let r;n.controls!==void 0&&(Array.isArray(n.controls)?r=new fp(n.controls.slice()):(xs(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=n.controls));let o;n.interactions!==void 0&&(Array.isArray(n.interactions)?o=new fp(n.interactions.slice()):(xs(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),o=n.interactions));let s;return n.overlays!==void 0?Array.isArray(n.overlays)?s=new fp(n.overlays.slice()):(xs(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),s=n.overlays):s=new fp,{controls:r,interactions:o,keyboardEventTarget:e,overlays:s,values:t}}class tB extends Wm{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new tB(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(fa(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Ro(e,cr.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?lve(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function lve(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(xs(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}function ree(n,e,t,i){const r=[];let o=xp();for(let s=0,a=t.length;s<a;++s){const c=t[s];o=JP(n,e,c[0],i),r.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=c[c.length-1]}return r}function lE(n,e,t,i,r,o,s){let a,c;const f=(t-e)/i;if(f===1)a=e;else if(f===2)a=e,c=r;else if(f!==0){let y=n[e],_=n[e+1],E=0;const I=[0];for(let z=e+i;z<t;z+=i){const Q=n[z],V=n[z+1];E+=Math.sqrt((Q-y)*(Q-y)+(V-_)*(V-_)),I.push(E),y=Q,_=V}const P=r*E,K=kge(I,P);K<0?(c=(P-I[-K-2])/(I[-K-1]-I[-K-2]),a=e+(-K-2)*i):a=e+K*i}s=s>1?s:2,o=o||new Array(s);for(let y=0;y<s;++y)o[y]=a===void 0?NaN:c===void 0?n[a+y]:af(n[a+y],n[a+i+y],c);return o}function yD(n,e,t,i,r,o){if(t==e)return null;let s;if(r<n[e+i-1])return o?(s=n.slice(e,e+i),s[i-1]=r,s):null;if(n[t-1]<r)return o?(s=n.slice(t-i,t),s[i-1]=r,s):null;if(r==n[e+i-1])return n.slice(e,e+i);let a=e/i,c=t/i;for(;a<c;){const E=a+c>>1;r<n[(E+1)*i-1]?c=E:a=E+1}const f=n[a*i-1];if(r==f)return n.slice((a-1)*i,(a-1)*i+i);const y=n[(a+1)*i-1],_=(r-f)/(y-f);s=[];for(let E=0;E<i-1;++E)s.push(af(n[(a-1)*i+E],n[a*i+E],_));return s.push(r),s}function uve(n,e,t,i,r,o,s){if(s)return yD(n,e,t[t.length-1],i,r,o);let a;if(r<n[i-1])return o?(a=n.slice(0,i),a[i-1]=r,a):null;if(n[n.length-1]<r)return o?(a=n.slice(n.length-i),a[i-1]=r,a):null;for(let c=0,f=t.length;c<f;++c){const y=t[c];if(e!=y){if(r<n[e+i-1])return null;if(r<=n[y-1])return yD(n,e,y,i,r,!1);e=y}}return null}class uE extends vJ{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(fa),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,i=e.length;t<i;++t)this.changeEventsKeys_.push(Ro(e[t],cr.CHANGE,this.changed,this))}clone(){const e=new uE(h8(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<kC(this.getExtent(),e,t))return r;const o=this.geometries_;for(let s=0,a=o.length;s<a;++s)r=o[s].closestPointXY(e,t,i,r);return r}containsXY(e,t){const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)if(i[r].containsXY(e,t))return!0;return!1}computeExtent(e){O2(e);const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)tJ(e,t[i].getExtent());return e}getGeometries(){return h8(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].getType()===this.getType()?e=e.concat(t[i].getGeometriesArrayRecursive()):e.push(t[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],i=this.geometries_;let r=!1;for(let o=0,s=i.length;o<s;++o){const a=i[o],c=a.getSimplifiedGeometry(e);t.push(c),c!==a&&(r=!0)}return r?new uE(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)if(t[i].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)i[r].rotate(e,t);this.changed()}scale(e,t,i){i||(i=vf(this.getExtent()));const r=this.geometries_;for(let o=0,s=r.length;o<s;++o)r[o].scale(e,t,i);this.changed()}setGeometries(e){this.setGeometriesArray(h8(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].applyTransform(e);this.changed()}translate(e,t){const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)i[r].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function h8(n){return n.map(e=>e.clone())}function RL(n,e,t,i){let r=n[e],o=n[e+1],s=0;for(let a=e+i;a<t;a+=i){const c=n[a],f=n[a+1];s+=Math.sqrt((c-r)*(c-r)+(f-o)*(f-o)),r=c,o=f}return s}class xC extends RC{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){h0(this.flatCoordinates,e),this.changed()}clone(){const e=new xC(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<kC(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(uL(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),AL(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,r))}forEachSegment(e){return wJ(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,yD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return sv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return lE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return RL(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=V6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new xC(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return $6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Y6(this.flatCoordinates,0,e,this.stride),this.changed()}}class J4 extends RC{constructor(e,t,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&i)this.setFlatCoordinates(t,e),this.ends_=i;else{const r=e,o=[],s=[];for(let c=0,f=r.length;c<f;++c){const y=r[c];h0(o,y.getFlatCoordinates()),s.push(o.length)}const a=r.length===0?this.getLayout():r[0].getLayout();this.setFlatCoordinates(a,o),this.ends_=s}}appendLineString(e){h0(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new J4(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<kC(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(cL(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),hL(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,r))}getCoordinateAtM(e,t,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,i=i!==void 0?i:!1,uve(this.flatCoordinates,0,this.ends_,this.stride,e,t,i))}getCoordinates(){return W4(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new xC(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,i=this.layout,r=[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=t[s],f=new xC(e.slice(o,c),i);r.push(f),o=c}return r}getLength(){const e=this.ends_;let t=0,i=0;for(let r=0,o=e.length;r<o;++r)i+=RL(this.flatCoordinates,t,e[r],this.stride),t=e[r];return i}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let i=0;const r=this.ends_,o=this.stride;for(let s=0,a=r.length;s<a;++s){const c=r[s],f=lE(t,i,c,o,.5);h0(e,f),i=c}return e}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=xJ(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i),new J4(t,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return t1e(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=JM(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}class o5 extends RC{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){h0(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new o5(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<kC(this.getExtent(),e,t))return r;const o=this.flatCoordinates,s=this.stride;for(let a=0,c=o.length;a<c;a+=s){const f=uC(e,t,o[a],o[a+1]);if(f<r){r=f;for(let y=0;y<s;++y)i[y]=o[a+y];i.length=s}}return r}getCoordinates(){return sv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new CC(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,i=this.stride,r=[];for(let o=0,s=e.length;o<s;o+=i){const a=new CC(e.slice(o,o+i),t);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,i=this.stride;for(let r=0,o=t.length;r<o;r+=i){const s=t[r],a=t[r+1];if(XP(e,s,a))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Y6(this.flatCoordinates,0,e,this.stride),this.changed()}}class eM extends RC{constructor(e,t,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){const r=e,o=[],s=[];for(let a=0,c=r.length;a<c;++a){const f=r[a],y=o.length,_=f.getEnds();for(let E=0,I=_.length;E<I;++E)_[E]+=y;h0(o,f.getFlatCoordinates()),s.push(_)}t=r.length===0?this.getLayout():r[0].getLayout(),e=o,i=s}t!==void 0&&i?(this.setFlatCoordinates(t,e),this.endss_=i):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;h0(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let r=0,o=t.length;r<o;++r)t[r]+=i}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=this.endss_[r].slice();const i=new eM(this.flatCoordinates.slice(),this.layout,t);return i.applyProperties(this),i}closestPointXY(e,t,i,r){return r<kC(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(V0e(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$0e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return e1e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return Y0e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),AD(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,cD(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=ree(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=MJ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new o5(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;BJ(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=AD(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=X0e(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i),new eM(t,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const o=this.endss_[e-1];t=o[o.length-1]}const i=this.endss_[e].slice(),r=i[i.length-1];if(t!==0)for(let o=0,s=i.length;o<s;++o)i[o]-=t;return new U1(this.flatCoordinates.slice(t,r),this.layout,i)}getPolygons(){const e=this.layout,t=this.flatCoordinates,i=this.endss_,r=[];let o=0;for(let s=0,a=i.length;s<a;++s){const c=i[s].slice(),f=c[c.length-1];if(o!==0)for(let _=0,E=c.length;_<E;++_)c[_]-=o;const y=new U1(t.slice(o,f),e,c);r.push(y),o=f}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return n1e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=_J(this.flatCoordinates,0,e,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const Fj=fd();class FA{constructor(e,t,i,r,o,s){this.styleFunction,this.extent_,this.id_=s,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=o,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?eJ(this.flatCoordinates_):JP(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=vf(this.getExtent());this.flatInteriorPoints_=pL(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=OJ(this.flatCoordinates_,this.ends_),t=ree(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=MJ(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=lE(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const i=this.ends_;for(let r=0,o=i.length;r<o;++r){const s=i[r],a=lE(e,t,s,2,.5);h0(this.flatMidpoints_,a),t=s}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=ks(e);const t=e.getExtent(),i=e.getWorldExtent();if(t&&i){const r=Mu(i)/Mu(t);p0(Fj,i[0],i[3],r,-r,0,0,0),vv(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Fj,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new FA(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=VX((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const i=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":i.length=V6(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),r=[i.length];break;case"MultiLineString":r=[],i.length=xJ(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,r);break;case"Polygon":r=[],i.length=dL(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,r);break}return r&&(this.simplifiedGeometry_=new FA(this.type_,i,r,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}FA.prototype.getFlatCoordinates=FA.prototype.getOrientedFlatCoordinates;class oee{drawCustom(e,t,i,r,o){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,i){}drawFeature(e,t,i){}drawGeometryCollection(e,t,i){}drawLineString(e,t,i){}drawMultiLineString(e,t,i){}drawMultiPoint(e,t,i){}drawMultiPolygon(e,t,i){}drawPoint(e,t,i){}drawPolygon(e,t,i){}drawText(e,t,i){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class cve extends oee{constructor(e,t,i,r,o,s,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=r,this.transformRotation_=r?F6(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=o,this.squaredTolerance_=s,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=fd()}drawImages_(e,t,i,r){if(!this.image_)return;const o=vv(e,t,i,r,this.transform_,this.pixelCoordinates_),s=this.context_,a=this.tmpLocalTransform_,c=s.globalAlpha;this.imageOpacity_!=1&&(s.globalAlpha=c*this.imageOpacity_);let f=this.imageRotation_;this.transformRotation_===0&&(f-=this.viewRotation_),this.imageRotateWithView_&&(f+=this.viewRotation_);for(let y=0,_=o.length;y<_;y+=2){const E=o[y]-this.imageAnchorX_,I=o[y+1]-this.imageAnchorY_;if(f!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const P=E+this.imageAnchorX_,K=I+this.imageAnchorY_;p0(a,P,K,1,1,f,-P,-K),s.save(),s.transform.apply(s,a),s.translate(P,K),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.restore()}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,E,I,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(s.globalAlpha=c)}drawText_(e,t,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const o=vv(e,t,i,r,this.transform_,this.pixelCoordinates_),s=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<i;t+=r){const c=o[t]+this.textOffsetX_,f=o[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(s.save(),s.translate(c-this.textOffsetX_,f-this.textOffsetY_),s.rotate(a),s.translate(this.textOffsetX_,this.textOffsetY_),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.restore()):(this.textStrokeState_&&s.strokeText(this.text_,c,f),this.textFillState_&&s.fillText(this.text_,c,f))}}moveToLineTo_(e,t,i,r,o){const s=this.context_,a=vv(e,t,i,r,this.transform_,this.pixelCoordinates_);s.moveTo(a[0],a[1]);let c=a.length;o&&(c-=2);for(let f=2;f<c;f+=2)s.lineTo(a[f],a[f+1]);return o&&s.closePath(),i}drawRings_(e,t,i,r){for(let o=0,s=i.length;o<s;++o)t=this.moveToLineTo_(e,t,i[o],r,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!wl(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=q0e(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],r=t[3]-t[1],o=Math.sqrt(i*i+r*r),s=this.context_;s.beginPath(),s.arc(t[0],t[1],o,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const i=t.getGeometryFunction()(e);i&&(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,r=t.length;i<r;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!wl(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(wl(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getFlatCoordinates();let o=0;const s=e.getEnds(),a=e.getStride();i.beginPath();for(let c=0,f=s.length;c<f;++c)o=this.moveToLineTo_(r,o,s[c],a,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!wl(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!wl(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let r=0;const o=e.getEndss(),s=e.getStride();t.beginPath();for(let a=0,c=o.length;a<c;++a){const f=o[a];r=this.drawRings_(i,r,f,s)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),Tv(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,r=e.textAlign?e.textAlign:V4;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=r&&(i.textAlign=r,t.textAlign=r),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:e0(i||ud)}}if(!t)this.strokeState_=null;else{const i=t.getColor(),r=t.getLineCap(),o=t.getLineDash(),s=t.getLineDashOffset(),a=t.getLineJoin(),c=t.getWidth(),f=t.getMiterLimit(),y=o||I1;this.strokeState_={lineCap:r!==void 0?r:l2,lineDash:this.pixelRatio_===1?y:y.map(_=>_*this.pixelRatio_),lineDashOffset:(s||T1)*this.pixelRatio_,lineJoin:a!==void 0?a:u2,lineWidth:(c!==void 0?c:$4)*this.pixelRatio_,miterLimit:f!==void 0?f:q4,strokeStyle:e0(i||Y4)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),o=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const s=e.getScaleArray();this.imageScale_=[s[0]*this.pixelRatio_/i,s[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const I=t.getColor();this.textFillState_={fillStyle:e0(I||ud)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const I=i.getColor(),P=i.getLineCap(),K=i.getLineDash(),z=i.getLineDashOffset(),Q=i.getLineJoin(),V=i.getWidth(),$=i.getMiterLimit();this.textStrokeState_={lineCap:P!==void 0?P:l2,lineDash:K||I1,lineDashOffset:z||T1,lineJoin:Q!==void 0?Q:u2,lineWidth:V!==void 0?V:$4,miterLimit:$!==void 0?$:q4,strokeStyle:e0(I||Y4)}}const r=e.getFont(),o=e.getOffsetX(),s=e.getOffsetY(),a=e.getRotateWithView(),c=e.getRotation(),f=e.getScaleArray(),y=e.getText(),_=e.getTextAlign(),E=e.getTextBaseline();this.textState_={font:r!==void 0?r:QJ,textAlign:_!==void 0?_:V4,textBaseline:E!==void 0?E:oE},this.text_=y!==void 0?Array.isArray(y)?y.reduce((I,P,K)=>I+=K%2?" ":P,""):y:"",this.textOffsetX_=o!==void 0?this.pixelRatio_*o:0,this.textOffsetY_=s!==void 0?this.pixelRatio_*s:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=c!==void 0?c:0,this.textScale_=[this.pixelRatio_*f[0],this.pixelRatio_*f[1]]}}}const Ave=.5,see={Point:vve,LineString:mve,Polygon:Cve,MultiPoint:bve,MultiLineString:gve,MultiPolygon:yve,GeometryCollection:pve,Circle:dve};function hve(n,e){return parseInt(Br(n),10)-parseInt(Br(e),10)}function vD(n,e){const t=aee(n,e);return t*t}function aee(n,e){return Ave*n/e}function dve(n,e,t,i,r){const o=t.getFill(),s=t.getStroke();if(o||s){const c=n.getBuilder(t.getZIndex(),"Circle");c.setFillStrokeStyle(o,s),c.drawCircle(e,i,r)}const a=t.getText();if(a&&a.getText()){const c=n.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i)}}function cE(n,e,t,i,r,o,s,a){const c=[],f=t.getImage();if(f){let E=!0;const I=f.getImageState();I==Bi.LOADED||I==Bi.ERROR?E=!1:I==Bi.IDLE&&f.load(),E&&c.push(f.ready())}const y=t.getFill();y&&y.loading()&&c.push(y.ready());const _=c.length>0;return _&&Promise.all(c).then(()=>r(null)),fve(n,e,t,i,o,s,a),_}function fve(n,e,t,i,r,o,s){const a=t.getGeometryFunction()(e);if(!a)return;const c=a.simplifyTransformed(i,r);if(t.getRenderer())lee(n,c,t,e,s);else{const y=see[c.getType()];y(n,c,t,e,s,o)}}function lee(n,e,t,i,r){if(e.getType()=="GeometryCollection"){const s=e.getGeometries();for(let a=0,c=s.length;a<c;++a)lee(n,s[a],t,i,r);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer(),r)}function pve(n,e,t,i,r,o){const s=e.getGeometriesArray();let a,c;for(a=0,c=s.length;a<c;++a){const f=see[s[a].getType()];f(n,s[a],t,i,r,o)}}function mve(n,e,t,i,r){const o=t.getStroke();if(o){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawLineString(e,i,r)}const s=t.getText();if(s&&s.getText()){const a=n.getBuilder(t.getZIndex(),"Text");a.setTextStyle(s),a.drawText(e,i,r)}}function gve(n,e,t,i,r){const o=t.getStroke();if(o){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawMultiLineString(e,i,r)}const s=t.getText();if(s&&s.getText()){const a=n.getBuilder(t.getZIndex(),"Text");a.setTextStyle(s),a.drawText(e,i,r)}}function yve(n,e,t,i,r){const o=t.getFill(),s=t.getStroke();if(s||o){const c=n.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(o,s),c.drawMultiPolygon(e,i,r)}const a=t.getText();if(a&&a.getText()){const c=n.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i,r)}}function vve(n,e,t,i,r,o){const s=t.getImage(),a=t.getText(),c=a&&a.getText(),f=o&&s&&c?{}:void 0;if(s){if(s.getImageState()!=Bi.LOADED)return;const y=n.getBuilder(t.getZIndex(),"Image");y.setImageStyle(s,f),y.drawPoint(e,i,r)}if(c){const y=n.getBuilder(t.getZIndex(),"Text");y.setTextStyle(a,f),y.drawText(e,i,r)}}function bve(n,e,t,i,r,o){const s=t.getImage(),a=s&&s.getOpacity()!==0,c=t.getText(),f=c&&c.getText(),y=o&&a&&f?{}:void 0;if(a){if(s.getImageState()!=Bi.LOADED)return;const _=n.getBuilder(t.getZIndex(),"Image");_.setImageStyle(s,y),_.drawMultiPoint(e,i,r)}if(f){const _=n.getBuilder(t.getZIndex(),"Text");_.setTextStyle(c,y),_.drawText(e,i,r)}}function Cve(n,e,t,i,r){const o=t.getFill(),s=t.getStroke();if(o||s){const c=n.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(o,s),c.drawPolygon(e,i,r)}const a=t.getText();if(a&&a.getText()){const c=n.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i,r)}}let _ve=!1;function uee(n,e,t,i,r,o,s){const a=new XMLHttpRequest;a.open("GET",typeof n=="function"?n(t,i,r):n,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=_ve,a.onload=function(c){if(!a.status||a.status>=200&&a.status<300){const f=e.getType();try{let y;f=="text"||f=="json"?y=a.responseText:f=="xml"?y=a.responseXML||a.responseText:f=="arraybuffer"&&(y=a.response),y?o(e.readFeatures(y,{extent:t,featureProjection:r}),e.readProjection(y)):s()}catch{s()}}else s()},a.onerror=s,a.send()}function zj(n,e){return function(t,i,r,o,s){uee(n,e,t,i,r,(a,c)=>{this.addFeatures(a),o!==void 0&&o(a)},()=>{this.changed(),s!==void 0&&s()})}}function xve(n,e){return[[-1/0,-1/0,1/0,1/0]]}function Mve(n,e){return[n]}class jj{constructor(e){this.rbush_=new FJ(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[Br(t)]=i}load(e,t){const i=new Array(t.length);for(let r=0,o=t.length;r<o;r++){const s=e[r],a=t[r],c={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:a};i[r]=c,this.items_[Br(a)]=c}this.rbush_.load(i)}remove(e){const t=Br(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null}update(e,t){const i=this.items_[Br(t)],r=[i.minX,i.minY,i.maxX,i.maxY];L1(r,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let r=0,o=e.length;r<o;r++)if(i=t(e[r]),i)return i;return i}isEmpty(){return _v(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return P1(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class k2 extends Wm{constructor(e){super(),this.projection=ks(e.projection),this.attributions_=Nj(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,r){t.viewResolver=i,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Nj(e),this.changed()}setState(e){this.state_=e,this.changed()}}function Nj(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const ip={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class Ny extends Gm{constructor(e,t,i){super(e),this.feature=t,this.features=i}}class oS extends k2{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=N4,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(xs(this.format_,"`format` must be set when `url` is set"),this.loader_=zj(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:xve;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new jj:null,this.loadedExtentsRtree_=new jj,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(e.features)?r=e.features:e.features&&(i=e.features,r=i.getArray()),!t&&i===void 0&&(i=new fp(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Br(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Ny(ip.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof FA||(this.featureChangeKeys_[e]=[Ro(t,cr.CHANGE,this.handleFeatureChange_,this),Ro(t,r2.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let i=!0;if(t.getId()!==void 0){const r=String(t.getId());if(!(r in this.idIndex_))this.idIndex_[r]=t;else if(t instanceof FA){const o=this.idIndex_[r];o instanceof FA?Array.isArray(o)?o.push(t):this.idIndex_[r]=[o,t]:i=!1}else i=!1}return i&&(xs(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],r=[];for(let o=0,s=e.length;o<s;o++){const a=e[o],c=Br(a);this.addToIndex_(c,a)&&i.push(a)}for(let o=0,s=i.length;o<s;o++){const a=i[o],c=Br(a);this.setupChangeEvents_(c,a);const f=a.getGeometry();if(f){const y=f.getExtent();t.push(y),r.push(a)}else this.nullGeometryFeatures_[c]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener(ip.ADDFEATURE))for(let o=0,s=i.length;o<s;o++)this.dispatchEvent(new Ny(ip.ADDFEATURE,i[o]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(ip.ADDFEATURE,function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener(ip.REMOVEFEATURE,function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener(ad.ADD,i=>{t||(t=!0,this.addFeature(i.element),t=!1)}),e.addEventListener(ad.REMOVE,i=>{t||(t=!0,this.removeFeature(i.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(fa);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(i=>{this.removeFeatureInternal(i)});for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new Ny(ip.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(r){const o=r.getGeometry();if(o instanceof FA||o.intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){const r=i.getGeometry();if(r instanceof FA||r.intersectsExtent(e)){const o=t(i);if(o)return o}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),_v(this.nullGeometryFeatures_)||h0(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=aJ(e,t);return[].concat(...r.map(o=>this.featuresRtree_.getInExtent(o)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],r=e[1];let o=null;const s=[NaN,NaN];let a=1/0;const c=[-1/0,-1/0,1/0,1/0];return t=t||j4,this.featuresRtree_.forEachInExtent(c,function(f){if(t(f)){const y=f.getGeometry(),_=a;if(a=y instanceof FA?0:y.closestPointXY(i,r,s,a),a<_){o=f;const E=Math.sqrt(a);c[0]=i-E,c[1]=r-E,c[2]=i+E,c[3]=r+E}}}),o}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=Br(t),r=t.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);else{const s=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(s,t)):this.featuresRtree_&&this.featuresRtree_.update(s,t)}const o=t.getId();if(o!==void 0){const s=o.toString();this.idIndex_[s]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[s]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new Ny(ip.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Br(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&_v(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,i){const r=this.loadedExtentsRtree_,o=this.strategy_(e,t,i);for(let s=0,a=o.length;s<a;++s){const c=o[s];r.forEachInExtent(c,function(y){return Xg(y.extent,c)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Ny(ip.FEATURESLOADSTART)),this.loader_.call(this,c,t,i,y=>{--this.loadingExtentsCount_,this.dispatchEvent(new Ny(ip.FEATURESLOADEND,void 0,y))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Ny(ip.FEATURESLOADERROR))}),r.insert(c,{extent:c.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,i=t.forEachInExtent(e,function(r){if(L1(r.extent,e))return r});i&&t.remove(i)}removeFeatures(e){let t=!1;for(let i=0,r=e.length;i<r;++i)t=this.removeFeatureInternal(e[i])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Br(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(fa),delete this.featureChangeKeys_[t];const r=e.getId();if(r!==void 0){const o=r.toString(),s=this.idIndex_[o];s===e?delete this.idIndex_[o]:Array.isArray(s)&&(s.splice(s.indexOf(e),1),s.length===1&&(this.idIndex_[o]=s[0]))}return delete this.uidIndex_[t],this.hasListener(ip.REMOVEFEATURE)&&this.dispatchEvent(new Ny(ip.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){xs(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(zj(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const Vi={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},J5=[Vi.FILL],uv=[Vi.STROKE],Zb=[Vi.BEGIN_PATH],Gj=[Vi.CLOSE_PATH];class s5 extends oee{constructor(e,t,i,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,o=this.coordinates;let s=o.length;for(let a=0,c=e.length;a<c;a+=t)r[0]=e[a],r[1]=e[a+1],vC(i,r)&&(o[s++]=r[0],o[s++]=r[1]);return s}appendFlatLineCoordinates(e,t,i,r,o,s){const a=this.coordinates;let c=a.length;const f=this.getBufferedMaxExtent();s&&(t+=r);let y=e[t],_=e[t+1];const E=this.tmpCoordinate_;let I=!0,P,K,z;for(P=t+r;P<i;P+=r)E[0]=e[P],E[1]=e[P+1],z=tD(f,E),z!==K?(I&&(a[c++]=y,a[c++]=_,I=!1),a[c++]=E[0],a[c++]=E[1]):z===_c.INTERSECTING?(a[c++]=E[0],a[c++]=E[1],I=!1):I=!0,y=E[0],_=E[1],K=z;return(o&&I||P===t+r)&&(a[c++]=y,a[c++]=_),c}drawCustomCoordinates_(e,t,i,r,o){for(let s=0,a=i.length;s<a;++s){const c=i[s],f=this.appendFlatLineCoordinates(e,t,c,r,!1,!1);o.push(f),t=c}return t}drawCustom(e,t,i,r,o){this.beginGeometry(e,t,o);const s=e.getType(),a=e.getStride(),c=this.coordinates.length;let f,y,_,E,I;switch(s){case"MultiPolygon":f=e.getOrientedFlatCoordinates(),E=[];const P=e.getEndss();I=0;for(let K=0,z=P.length;K<z;++K){const Q=[];I=this.drawCustomCoordinates_(f,I,P[K],a,Q),E.push(Q)}this.instructions.push([Vi.CUSTOM,c,E,e,i,cD,o]),this.hitDetectionInstructions.push([Vi.CUSTOM,c,E,e,r||i,cD,o]);break;case"Polygon":case"MultiLineString":_=[],f=s=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),I=this.drawCustomCoordinates_(f,0,e.getEnds(),a,_),this.instructions.push([Vi.CUSTOM,c,_,e,i,W4,o]),this.hitDetectionInstructions.push([Vi.CUSTOM,c,_,e,r||i,W4,o]);break;case"LineString":case"Circle":f=e.getFlatCoordinates(),y=this.appendFlatLineCoordinates(f,0,f.length,a,!1,!1),this.instructions.push([Vi.CUSTOM,c,y,e,i,sv,o]),this.hitDetectionInstructions.push([Vi.CUSTOM,c,y,e,r||i,sv,o]);break;case"MultiPoint":f=e.getFlatCoordinates(),y=this.appendFlatPointCoordinates(f,a),y>c&&(this.instructions.push([Vi.CUSTOM,c,y,e,i,sv,o]),this.hitDetectionInstructions.push([Vi.CUSTOM,c,y,e,r||i,sv,o]));break;case"Point":f=e.getFlatCoordinates(),this.coordinates.push(f[0],f[1]),y=this.coordinates.length,this.instructions.push([Vi.CUSTOM,c,y,e,i,void 0,o]),this.hitDetectionInstructions.push([Vi.CUSTOM,c,y,e,r||i,void 0,o]);break}this.endGeometry(t)}beginGeometry(e,t,i){this.beginGeometryInstruction1_=[Vi.BEGIN_GEOMETRY,t,0,e,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Vi.BEGIN_GEOMETRY,t,0,e,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const i=e.length;let r,o,s=-1;for(t=0;t<i;++t)r=e[t],o=r[0],o==Vi.END_GEOMETRY?s=t:o==Vi.BEGIN_GEOMETRY&&(r[2]=t,Rge(this.hitDetectionInstructions,s,t),s=-1)}fillStyleToState(e,t={}){if(e){const i=e.getColor();t.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,t.fillStyle=e0(i||ud)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const i=e.getColor();t.strokeStyle=e0(i||Y4);const r=e.getLineCap();t.lineCap=r!==void 0?r:l2;const o=e.getLineDash();t.lineDash=o?o.slice():I1;const s=e.getLineDashOffset();t.lineDashOffset=s||T1;const a=e.getLineJoin();t.lineJoin=a!==void 0?a:u2;const c=e.getWidth();t.lineWidth=c!==void 0?c:$4;const f=e.getMiterLimit();t.miterLimit=f!==void 0?f:q4,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const i=this.state;this.fillStyleToState(e,i),this.strokeStyleToState(t,i)}createFill(e){const t=e.fillStyle,i=[Vi.SET_FILL_STYLE,t];return typeof t!="string"&&i.push(e.fillPatternScale),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Vi.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,r=e.lineCap,o=e.lineDash,s=e.lineDashOffset,a=e.lineJoin,c=e.lineWidth,f=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=r||o!=e.currentLineDash&&!Tv(e.currentLineDash,o)||e.currentLineDashOffset!=s||e.currentLineJoin!=a||e.currentLineWidth!=c||e.currentMiterLimit!=f)&&(t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=r,e.currentLineDash=o,e.currentLineDashOffset=s,e.currentLineJoin=a,e.currentLineWidth=c,e.currentMiterLimit=f)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Vi.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=JX(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;yv(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class wve extends s5{constructor(e,t,i,r){super(e,t,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,i){if(!this.image_||this.maxExtent&&!vC(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,i);const r=e.getFlatCoordinates(),o=e.getStride(),s=this.coordinates.length,a=this.appendFlatPointCoordinates(r,o);this.instructions.push([Vi.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Vi.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,i){if(!this.image_)return;this.beginGeometry(e,t,i);const r=e.getFlatCoordinates(),o=[];for(let c=0,f=r.length;c<f;c+=e.getStride())(!this.maxExtent||vC(this.maxExtent,r.slice(c,c+2)))&&o.push(r[c],r[c+1]);const s=this.coordinates.length,a=this.appendFlatPointCoordinates(o,2);this.instructions.push([Vi.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Vi.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),r=e.getSize(),o=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=o[0],this.originY_=o[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class Sve extends s5{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinates_(e,t,i,r){const o=this.coordinates.length,s=this.appendFlatLineCoordinates(e,t,i,r,!1,!1),a=[Vi.MOVE_TO_LINE_TO,o,s];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,t,i){const r=this.state,o=r.strokeStyle,s=r.lineWidth;if(o===void 0||s===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([Vi.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,I1,T1],Zb);const a=e.getFlatCoordinates(),c=e.getStride();this.drawFlatCoordinates_(a,0,a.length,c),this.hitDetectionInstructions.push(uv),this.endGeometry(t)}drawMultiLineString(e,t,i){const r=this.state,o=r.strokeStyle,s=r.lineWidth;if(o===void 0||s===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([Vi.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,I1,T1],Zb);const a=e.getEnds(),c=e.getFlatCoordinates(),f=e.getStride();let y=0;for(let _=0,E=a.length;_<E;++_)y=this.drawFlatCoordinates_(c,y,a[_],f);this.hitDetectionInstructions.push(uv),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(uv),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(uv),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Zb)}}class Wj extends s5{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinatess_(e,t,i,r){const o=this.state,s=o.fillStyle!==void 0,a=o.strokeStyle!==void 0,c=i.length;this.instructions.push(Zb),this.hitDetectionInstructions.push(Zb);for(let f=0;f<c;++f){const y=i[f],_=this.coordinates.length,E=this.appendFlatLineCoordinates(e,t,y,r,!0,!a),I=[Vi.MOVE_TO_LINE_TO,_,E];this.instructions.push(I),this.hitDetectionInstructions.push(I),a&&(this.instructions.push(Gj),this.hitDetectionInstructions.push(Gj)),t=y}return s&&(this.instructions.push(J5),this.hitDetectionInstructions.push(J5)),a&&(this.instructions.push(uv),this.hitDetectionInstructions.push(uv)),t}drawCircle(e,t,i){const r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Vi.SET_FILL_STYLE,ud]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Vi.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,I1,T1]);const a=e.getFlatCoordinates(),c=e.getStride(),f=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,c,!1,!1);const y=[Vi.CIRCLE,f];this.instructions.push(Zb,y),this.hitDetectionInstructions.push(Zb,y),r.fillStyle!==void 0&&(this.instructions.push(J5),this.hitDetectionInstructions.push(J5)),r.strokeStyle!==void 0&&(this.instructions.push(uv),this.hitDetectionInstructions.push(uv)),this.endGeometry(t)}drawPolygon(e,t,i){const r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Vi.SET_FILL_STYLE,ud]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Vi.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,I1,T1]);const a=e.getEnds(),c=e.getOrientedFlatCoordinates(),f=e.getStride();this.drawFlatCoordinatess_(c,0,a,f),this.endGeometry(t)}drawMultiPolygon(e,t,i){const r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Vi.SET_FILL_STYLE,ud]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Vi.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,I1,T1]);const a=e.getEndss(),c=e.getOrientedFlatCoordinates(),f=e.getStride();let y=0;for(let _=0,E=a.length;_<E;++_)y=this.drawFlatCoordinatess_(c,y,a[_],f);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let i=0,r=t.length;i<r;++i)t[i]=Kb(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function Eve(n,e,t,i,r){const o=[];let s=t,a=0,c=e.slice(t,2);for(;a<n&&s+r<i;){const[f,y]=c.slice(-2),_=e[s+r],E=e[s+r+1],I=Math.sqrt((_-f)*(_-f)+(E-y)*(E-y));if(a+=I,a>=n){const P=(n-a+I)/I,K=af(f,_,P),z=af(y,E,P);c.push(K,z),o.push(c),c=[K,z],a==n&&(s+=r),a=0}else if(a<n)c.push(e[s+r],e[s+r+1]),s+=r;else{const P=I-a,K=af(f,_,P/I),z=af(y,E,P/I);c.push(K,z),o.push(c),c=[K,z],a=0,s+=r}}return a>0&&o.push(c),o}function Bve(n,e,t,i,r){let o=t,s=t,a=0,c=0,f=t,y,_,E,I,P,K,z,Q,V,$;for(_=t;_<i;_+=r){const Z=e[_],ee=e[_+1];P!==void 0&&(V=Z-P,$=ee-K,I=Math.sqrt(V*V+$*$),z!==void 0&&(c+=E,y=Math.acos((z*V+Q*$)/(E*I)),y>n&&(c>a&&(a=c,o=f,s=_),c=0,f=_-r)),E=I,z=V,Q=$),P=Z,K=ee}return c+=I,c>a?[f,_]:[o,s]}const AE={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Ove extends s5{constructor(e,t,i,r){super(e,t,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[ud]={fillStyle:ud},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,i){const r=this.textFillState_,o=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!r&&!o)return;const a=this.coordinates;let c=a.length;const f=e.getType();let y=null,_=e.getStride();if(s.placement==="line"&&(f=="LineString"||f=="MultiLineString"||f=="Polygon"||f=="MultiPolygon")){if(!wl(this.maxExtent,e.getExtent()))return;let E;if(y=e.getFlatCoordinates(),f=="LineString")E=[y.length];else if(f=="MultiLineString")E=e.getEnds();else if(f=="Polygon")E=e.getEnds().slice(0,1);else if(f=="MultiPolygon"){const z=e.getEndss();E=[];for(let Q=0,V=z.length;Q<V;++Q)E.push(z[Q][0])}this.beginGeometry(e,t,i);const I=s.repeat,P=I?void 0:s.textAlign;let K=0;for(let z=0,Q=E.length;z<Q;++z){let V;I?V=Eve(I*this.resolution,y,K,E[z],_):V=[y.slice(K,E[z])];for(let $=0,Z=V.length;$<Z;++$){const ee=V[$];let X=0,W=ee.length;if(P==null){const ue=Bve(s.maxAngle,ee,0,ee.length,2);X=ue[0],W=ue[1]}for(let ue=X;ue<W;ue+=_)a.push(ee[ue],ee[ue+1]);const se=a.length;K=E[z],this.drawChars_(c,se),c=se}}this.endGeometry(t)}else{let E=s.overflow?null:[];switch(f){case"Point":case"MultiPoint":y=e.getFlatCoordinates();break;case"LineString":y=e.getFlatMidpoint();break;case"Circle":y=e.getCenter();break;case"MultiLineString":y=e.getFlatMidpoints(),_=2;break;case"Polygon":y=e.getFlatInteriorPoint(),s.overflow||E.push(y[2]/this.resolution),_=3;break;case"MultiPolygon":const Z=e.getFlatInteriorPoints();y=[];for(let ee=0,X=Z.length;ee<X;ee+=3)s.overflow||E.push(Z[ee+2]/this.resolution),y.push(Z[ee],Z[ee+1]);if(y.length===0)return;_=2;break}const I=this.appendFlatPointCoordinates(y,_);if(I===c)return;if(E&&(I-c)/2!==y.length/_){let Z=c/2;E=E.filter((ee,X)=>{const W=a[(Z+X)*2]===y[X*_]&&a[(Z+X)*2+1]===y[X*_+1];return W||--Z,W})}this.saveTextStates_();const P=s.backgroundFill?this.createFill(this.fillStyleToState(s.backgroundFill)):null,K=s.backgroundStroke?this.createStroke(this.strokeStyleToState(s.backgroundStroke)):null;this.beginGeometry(e,t,i);let z=s.padding;if(z!=Hb&&(s.scale[0]<0||s.scale[1]<0)){let Z=s.padding[0],ee=s.padding[1],X=s.padding[2],W=s.padding[3];s.scale[0]<0&&(ee=-ee,W=-W),s.scale[1]<0&&(Z=-Z,X=-X),z=[Z,ee,X,W]}const Q=this.pixelRatio;this.instructions.push([Vi.DRAW_IMAGE,c,I,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,z==Hb?Hb:z.map(function(Z){return Z*Q}),P,K,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,E]);const V=1/Q,$=P?P.slice(0):null;$&&($[1]=ud),this.hitDetectionInstructions.push([Vi.DRAW_IMAGE,c,I,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[V,V],NaN,this.declutterMode_,this.declutterImageWithText_,z,$,K,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?ud:this.fillKey_,this.textOffsetX_,this.textOffsetY_,E]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const o=this.textKey_;o in this.textStates||(this.textStates[o]={font:t.font,textAlign:t.textAlign||V4,justify:t.justify,textBaseline:t.textBaseline||oE,scale:t.scale});const s=this.fillKey_;i&&(s in this.fillStates||(this.fillStates[s]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,r=this.textState_,o=this.strokeKey_,s=this.textKey_,a=this.fillKey_;this.saveTextStates_();const c=this.pixelRatio,f=AE[r.textBaseline],y=this.textOffsetY_*c,_=this.text_,E=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([Vi.DRAW_CHARS,e,t,f,r.overflow,a,r.maxAngle,c,y,o,E*c,_,s,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([Vi.DRAW_CHARS,e,t,f,r.overflow,a&&ud,r.maxAngle,c,y,o,E*c,_,s,1/c,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let i,r,o;if(!e)this.text_="";else{const s=e.getFill();s?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=e0(s.getColor()||ud)):(r=null,this.textFillState_=r);const a=e.getStroke();if(!a)o=null,this.textStrokeState_=o;else{o=this.textStrokeState_,o||(o={},this.textStrokeState_=o);const K=a.getLineDash(),z=a.getLineDashOffset(),Q=a.getWidth(),V=a.getMiterLimit();o.lineCap=a.getLineCap()||l2,o.lineDash=K?K.slice():I1,o.lineDashOffset=z===void 0?T1:z,o.lineJoin=a.getLineJoin()||u2,o.lineWidth=Q===void 0?$4:Q,o.miterLimit=V===void 0?q4:V,o.strokeStyle=e0(a.getColor()||Y4)}i=this.textState_;const c=e.getFont()||QJ;Lye(c);const f=e.getScaleArray();i.overflow=e.getOverflow(),i.font=c,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||oE,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||Hb,i.scale=f===void 0?[1,1]:f;const y=e.getOffsetX(),_=e.getOffsetY(),E=e.getRotateWithView(),I=e.getKeepUpright(),P=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=y===void 0?0:y,this.textOffsetY_=_===void 0?0:_,this.textRotateWithView_=E===void 0?!1:E,this.textKeepUpright_=I===void 0?!0:I,this.textRotation_=P===void 0?0:P,this.strokeKey_=o?(typeof o.strokeStyle=="string"?o.strokeStyle:Br(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r&&r.fillStyle?typeof r.fillStyle=="string"?r.fillStyle:"|"+Br(r.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const Ive={Circle:Wj,Default:s5,Image:wve,LineString:Sve,Polygon:Wj,Text:Ove};class cee{constructor(e,t,i,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const r in i){const o=i[r].finish();e[t][r]=o}}return e}getBuilder(e,t){const i=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let o=r[t];if(o===void 0){const s=Ive[t];o=new s(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=o}return o}}function Tve(n,e,t,i,r,o,s,a,c,f,y,_,E=!0){let I=n[e],P=n[e+1],K=0,z=0,Q=0,V=0;function $(){K=I,z=P,e+=i,I=n[e],P=n[e+1],V+=Q,Q=Math.sqrt((I-K)*(I-K)+(P-z)*(P-z))}do $();while(e<t-i&&V+Q<o);let Z=Q===0?0:(o-V)/Q;const ee=af(K,I,Z),X=af(z,P,Z),W=e-i,se=V,ue=o+a*c(f,r,y);for(;e<t-i&&V+Q<ue;)$();Z=Q===0?0:(ue-V)/Q;const ve=af(K,I,Z),ye=af(z,P,Z);let Ee=!1;if(E)if(_){const qe=[ee,X,ve,ye];yJ(qe,0,4,2,_,qe,qe),Ee=qe[0]>qe[2]}else Ee=ee>ve;const _e=Math.PI,Be=[],Fe=W+i===e;e=W,Q=0,V=se,I=n[e],P=n[e+1];let Se;if(Fe){$(),Se=Math.atan2(P-z,I-K),Ee&&(Se+=Se>0?-_e:_e);const qe=(ve+ee)/2,ut=(ye+X)/2;return Be[0]=[qe,ut,(ue-o)/2,Se,r],Be}r=r.replace(/\n/g," ");for(let qe=0,ut=r.length;qe<ut;){$();let ht=Math.atan2(P-z,I-K);if(Ee&&(ht+=ht>0?-_e:_e),Se!==void 0){let st=ht-Se;if(st+=st>_e?-2*_e:st<-_e?2*_e:0,Math.abs(st)>s)return null}Se=ht;const De=qe;let Ie=0;for(;qe<ut;++qe){const st=Ee?ut-qe-1:qe,Et=a*c(f,r[st],y);if(e+i<t&&V+Q<o+Ie+Et/2)break;Ie+=Et}if(qe===De)continue;const ze=Ee?r.substring(ut-De,ut-qe):r.substring(De,qe);Z=Q===0?0:(o+Ie/2-V)/Q;const Te=af(K,I,Z),vt=af(z,P,Z);Be.push([Te,vt,Ie/2,ht,ze]),o+=Ie}return Be}class PL{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(iE(),{get:(e,t)=>{if(typeof iE()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,i)=>(this.push_(t,i),!0)})}push_(...e){const t=this.instructions_,i=this.zIndex+this.offset_;t[i]||(t[i]=[]),t[i].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let i=0,r=t.length;i<r;++i){const o=t[i];if(typeof o=="function"){o(e);continue}const s=t[++i];if(typeof e[o]=="function")e[o](...s);else{if(typeof s=="function"){e[o]=s(e);continue}e[o]=s}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const R_=xp(),Gy=[],p1=[],m1=[],Wy=[];function Qj(n){return n[3].declutterBox}const qj=new RegExp("[-----]");function d8(n,e){return e==="start"?e=qj.test(n)?"right":"left":e==="end"&&(e=qj.test(n)?"left":"right"),AE[e]}function kve(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}function Dve(n,e,t){return t%2===0&&(n+=e),n}class Rve{constructor(e,t,i,r,o){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=fd(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=o?new PL:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,i,r){const o=e+t+i+r;if(this.labels_[o])return this.labels_[o];const s=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,c=this.textStates[t],f=this.pixelRatio,y=[c.scale[0]*f,c.scale[1]*f],_=c.justify?AE[c.justify]:d8(Array.isArray(e)?e[0]:e,c.textAlign||V4),E=r&&s.lineWidth?s.lineWidth:0,I=Array.isArray(e)?e:String(e).split(`
`).reduce(kve,[]),{width:P,height:K,widths:z,heights:Q,lineWidths:V}=Kye(c,I),$=P+E,Z=[],ee=($+2)*y[0],X=(K+E)*y[1],W={width:ee<0?Math.floor(ee):Math.ceil(ee),height:X<0?Math.floor(X):Math.ceil(X),contextInstructions:Z};(y[0]!=1||y[1]!=1)&&Z.push("scale",y),r&&(Z.push("strokeStyle",s.strokeStyle),Z.push("lineWidth",E),Z.push("lineCap",s.lineCap),Z.push("lineJoin",s.lineJoin),Z.push("miterLimit",s.miterLimit),Z.push("setLineDash",[s.lineDash]),Z.push("lineDashOffset",s.lineDashOffset)),i&&Z.push("fillStyle",a.fillStyle),Z.push("textBaseline","middle"),Z.push("textAlign","center");const se=.5-_;let ue=_*$+se*E;const ve=[],ye=[];let Ee=0,_e=0,Be=0,Fe=0,Se;for(let qe=0,ut=I.length;qe<ut;qe+=2){const ht=I[qe];if(ht===`
`){_e+=Ee,Ee=0,ue=_*$+se*E,++Fe;continue}const De=I[qe+1]||c.font;De!==Se&&(r&&ve.push("font",De),i&&ye.push("font",De),Se=De),Ee=Math.max(Ee,Q[Be]);const Ie=[ht,ue+se*z[Be]+_*(z[Be]-V[Fe]),.5*(E+Ee)+_e];ue+=z[Be],r&&ve.push("strokeText",Ie),i&&ye.push("fillText",Ie),++Be}return Array.prototype.push.apply(Z,ve),Array.prototype.push.apply(Z,ye),this.labels_[o]=W,W}replayTextBackground_(e,t,i,r,o,s,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,o),e.lineTo.apply(e,t),s&&(this.alignAndScaleFill_=s[2],e.fillStyle=s[1],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,r,o,s,a,c,f,y,_,E,I,P,K,z){a*=E[0],c*=E[1];let Q=i-a,V=r-c;const $=o+f>e?e-f:o,Z=s+y>t?t-y:s,ee=P[3]+$*E[0]+P[1],X=P[0]+Z*E[1]+P[2],W=Q-P[3],se=V-P[0];(K||_!==0)&&(Gy[0]=W,Wy[0]=W,Gy[1]=se,p1[1]=se,p1[0]=W+ee,m1[0]=p1[0],m1[1]=se+X,Wy[1]=m1[1]);let ue;return _!==0?(ue=p0(fd(),i,r,1,1,_,-i,-r),Cu(ue,Gy),Cu(ue,p1),Cu(ue,m1),Cu(ue,Wy),P1(Math.min(Gy[0],p1[0],m1[0],Wy[0]),Math.min(Gy[1],p1[1],m1[1],Wy[1]),Math.max(Gy[0],p1[0],m1[0],Wy[0]),Math.max(Gy[1],p1[1],m1[1],Wy[1]),R_)):P1(Math.min(W,W+ee),Math.min(se,se+X),Math.max(W,W+ee),Math.max(se,se+X),R_),I&&(Q=Math.round(Q),V=Math.round(V)),{drawImageX:Q,drawImageY:V,drawImageW:$,drawImageH:Z,originX:f,originY:y,declutterBox:{minX:R_[0],minY:R_[1],maxX:R_[2],maxY:R_[3],value:z},canvasTransform:ue,scale:E}}replayImageOrLabel_(e,t,i,r,o,s,a){const c=!!(s||a),f=r.declutterBox,y=a?a[2]*r.scale[0]/2:0;return f.minX-y<=t[0]&&f.maxX+y>=0&&f.minY-y<=t[1]&&f.maxY+y>=0&&(c&&this.replayTextBackground_(e,Gy,p1,m1,Wy,s,a),Fye(e,r.canvasTransform,o,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const i=Cu(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;e.save(),e.translate(i[0]%r,i[1]%r),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,i,r){const o=this.textStates[t],s=this.createLabel(e,t,r,i),a=this.strokeStates[i],c=this.pixelRatio,f=d8(Array.isArray(e)?e[0]:e,o.textAlign||V4),y=AE[o.textBaseline||oE],_=a&&a.lineWidth?a.lineWidth:0,E=s.width/c-2*o.scale[0],I=f*E+2*(.5-f)*_,P=y*s.height/c+2*(.5-y)*_;return{label:s,anchorX:I,anchorY:P}}execute_(e,t,i,r,o,s,a,c){const f=this.zIndexContext_;let y;this.pixelCoordinates_&&Tv(i,this.renderedTransform_)?y=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),y=vv(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),U0e(this.renderedTransform_,i));let _=0;const E=r.length;let I=0,P,K,z,Q,V,$,Z,ee,X,W,se,ue,ve,ye=0,Ee=0;const _e=this.coordinateCache_,Be=this.viewRotation_,Fe=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,Se={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Be},qe=this.instructions!=r||this.overlaps?0:200;let ut,ht,De,Ie;for(;_<E;){const ze=r[_];switch(ze[0]){case Vi.BEGIN_GEOMETRY:ut=ze[1],Ie=ze[3],ut.getGeometry()?a!==void 0&&!wl(a,Ie.getExtent())?_=ze[2]+1:++_:_=ze[2],f&&(f.zIndex=ze[4]);break;case Vi.BEGIN_PATH:ye>qe&&(this.fill_(e),ye=0),Ee>qe&&(e.stroke(),Ee=0),!ye&&!Ee&&(e.beginPath(),V=NaN,$=NaN),++_;break;case Vi.CIRCLE:I=ze[1];const vt=y[I],st=y[I+1],Et=y[I+2],Pt=y[I+3],ke=Et-vt,Oe=Pt-st,we=Math.sqrt(ke*ke+Oe*Oe);e.moveTo(vt+we,st),e.arc(vt,st,we,0,2*Math.PI,!0),++_;break;case Vi.CLOSE_PATH:e.closePath(),++_;break;case Vi.CUSTOM:I=ze[1],P=ze[2];const Ye=ze[3],ft=ze[4],dt=ze[5];Se.geometry=Ye,Se.feature=ut,_ in _e||(_e[_]=[]);const gt=_e[_];dt?dt(y,I,P,2,gt):(gt[0]=y[I],gt[1]=y[I+1],gt.length=2),f&&(f.zIndex=ze[6]),ft(gt,Se),++_;break;case Vi.DRAW_IMAGE:I=ze[1],P=ze[2],X=ze[3],K=ze[4],z=ze[5];let Lt=ze[6];const Tt=ze[7],Zt=ze[8],Fn=ze[9],Ln=ze[10];let fi=ze[11];const Rn=ze[12];let Dn=ze[13];Q=ze[14]||"declutter";const wn=ze[15];if(!X&&ze.length>=20){W=ze[19],se=ze[20],ue=ze[21],ve=ze[22];const Bt=this.drawLabelWithPointPlacement_(W,se,ue,ve);X=Bt.label,ze[3]=X;const kt=ze[23];K=(Bt.anchorX-kt)*this.pixelRatio,ze[4]=K;const sn=ze[24];z=(Bt.anchorY-sn)*this.pixelRatio,ze[5]=z,Lt=X.height,ze[6]=Lt,Dn=X.width,ze[13]=Dn}let qn;ze.length>25&&(qn=ze[25]);let En,wt,be;ze.length>17?(En=ze[16],wt=ze[17],be=ze[18]):(En=Hb,wt=null,be=null),Ln&&Fe?fi+=Be:!Ln&&!Fe&&(fi-=Be);let re=0;for(;I<P;I+=2){if(qn&&qn[re++]<Dn/this.pixelRatio)continue;const Bt=this.calculateImageOrLabelDimensions_(X.width,X.height,y[I],y[I+1],Dn,Lt,K,z,Zt,Fn,fi,Rn,o,En,!!wt||!!be,ut),kt=[e,t,X,Bt,Tt,wt,be];if(c){let sn,Tn,Yn;if(wn){const Zn=P-I;if(!wn[Zn]){wn[Zn]={args:kt,declutterMode:Q};continue}const Mi=wn[Zn];sn=Mi.args,Tn=Mi.declutterMode,delete wn[Zn],Yn=Qj(sn)}let vi,ui;if(sn&&(Tn!=="declutter"||!c.collides(Yn))&&(vi=!0),(Q!=="declutter"||!c.collides(Bt.declutterBox))&&(ui=!0),Tn==="declutter"&&Q==="declutter"){const Zn=vi&&ui;vi=Zn,ui=Zn}vi&&(Tn!=="none"&&c.insert(Yn),this.replayImageOrLabel_.apply(this,sn)),ui&&(Q!=="none"&&c.insert(Bt.declutterBox),this.replayImageOrLabel_.apply(this,kt))}else this.replayImageOrLabel_.apply(this,kt)}++_;break;case Vi.DRAW_CHARS:const ce=ze[1],Pe=ze[2],tt=ze[3],xt=ze[4];ve=ze[5];const It=ze[6],_n=ze[7],Xe=ze[8];ue=ze[9];const ae=ze[10];W=ze[11],Array.isArray(W)&&(W=W.reduce(Dve,"")),se=ze[12];const he=[ze[13],ze[13]];Q=ze[14]||"declutter";const C=ze[15],Ke=this.textStates[se],$e=Ke.font,rt=[Ke.scale[0]*_n,Ke.scale[1]*_n];let Re;$e in this.widths_?Re=this.widths_[$e]:(Re={},this.widths_[$e]=Re);const at=RL(y,ce,Pe,2),St=Math.abs(rt[0])*Tj($e,W,Re);if(xt||St<=at){const Bt=this.textStates[se].textAlign,kt=(at-St)*d8(W,Bt),sn=Tve(y,ce,Pe,2,W,kt,It,Math.abs(rt[0]),Tj,$e,Re,Fe?0:this.viewRotation_,C);e:if(sn){const Tn=[];let Yn,vi,ui,Zn,Mi;if(ue)for(Yn=0,vi=sn.length;Yn<vi;++Yn){Mi=sn[Yn],ui=Mi[4],Zn=this.createLabel(ui,se,"",ue),K=Mi[2]+(rt[0]<0?-ae:ae),z=tt*Zn.height+(.5-tt)*2*ae*rt[1]/rt[0]-Xe;const nn=this.calculateImageOrLabelDimensions_(Zn.width,Zn.height,Mi[0],Mi[1],Zn.width,Zn.height,K,z,0,0,Mi[3],he,!1,Hb,!1,ut);if(c&&Q==="declutter"&&c.collides(nn.declutterBox))break e;Tn.push([e,t,Zn,nn,1,null,null])}if(ve)for(Yn=0,vi=sn.length;Yn<vi;++Yn){Mi=sn[Yn],ui=Mi[4],Zn=this.createLabel(ui,se,ve,""),K=Mi[2],z=tt*Zn.height-Xe;const nn=this.calculateImageOrLabelDimensions_(Zn.width,Zn.height,Mi[0],Mi[1],Zn.width,Zn.height,K,z,0,0,Mi[3],he,!1,Hb,!1,ut);if(c&&Q==="declutter"&&c.collides(nn.declutterBox))break e;Tn.push([e,t,Zn,nn,1,null,null])}c&&Q!=="none"&&c.load(Tn.map(Qj));for(let nn=0,$i=Tn.length;nn<$i;++nn)this.replayImageOrLabel_.apply(this,Tn[nn])}}++_;break;case Vi.END_GEOMETRY:if(s!==void 0){ut=ze[1];const Bt=s(ut,Ie,Q);if(Bt)return Bt}++_;break;case Vi.FILL:qe?ye++:this.fill_(e),++_;break;case Vi.MOVE_TO_LINE_TO:for(I=ze[1],P=ze[2],ht=y[I],De=y[I+1],e.moveTo(ht,De),V=ht+.5|0,$=De+.5|0,I+=2;I<P;I+=2)ht=y[I],De=y[I+1],Z=ht+.5|0,ee=De+.5|0,(I==P-2||Z!==V||ee!==$)&&(e.lineTo(ht,De),V=Z,$=ee);++_;break;case Vi.SET_FILL_STYLE:this.alignAndScaleFill_=ze[2],ye&&(this.fill_(e),ye=0,Ee&&(e.stroke(),Ee=0)),e.fillStyle=ze[1],++_;break;case Vi.SET_STROKE_STYLE:Ee&&(e.stroke(),Ee=0),this.setStrokeStyle_(e,ze),++_;break;case Vi.STROKE:qe?Ee++:e.stroke(),++_;break;default:++_;break}}ye&&this.fill_(e),Ee&&e.stroke()}execute(e,t,i,r,o,s){this.viewRotation_=r,this.execute_(e,t,i,this.instructions,o,void 0,void 0,s)}executeHitDetection(e,t,i,r,o){return this.viewRotation_=i,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,r,o)}}const Nb=["Polygon","Circle","LineString","Image","Text","Default"],hE=["Image","Text"],Pve=Nb.filter(n=>!hE.includes(n));class Aee{constructor(e,t,i,r,o,s,a){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=fd(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(o,a)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e,t){for(const i in e){let r=this.executorsByZIndex_[i];r===void 0&&(r={},this.executorsByZIndex_[i]=r);const o=e[i];for(const s in o){const a=o[s];r[s]=new Rve(this.resolution_,this.pixelRatio_,this.overlaps_,a,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let r=0,o=e.length;r<o;++r)if(e[r]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,r,o,s){r=Math.round(r);const a=r*2+1,c=p0(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-i,-e[0],-e[1]),f=!this.hitDetectionContext_;f&&(this.hitDetectionContext_=Al(a,a));const y=this.hitDetectionContext_;y.canvas.width!==a||y.canvas.height!==a?(y.canvas.width=a,y.canvas.height=a):f||y.clearRect(0,0,a,a);let _;this.renderBuffer_!==void 0&&(_=xp(),o4(_,e),yv(_,t*(this.renderBuffer_+r),_));const E=Lve(r);let I;function P(ee,X,W){const se=y.getImageData(0,0,a,a).data;for(let ue=0,ve=E.length;ue<ve;ue++)if(se[E[ue]]>0){if(!s||W==="none"||I!=="Image"&&I!=="Text"||s.includes(ee)){const ye=(E[ue]-3)/4,Ee=r-ye%a,_e=r-(ye/a|0),Be=o(ee,X,Ee*Ee+_e*_e);if(Be)return Be}y.clearRect(0,0,a,a);break}}const K=Object.keys(this.executorsByZIndex_).map(Number);K.sort(A0);let z,Q,V,$,Z;for(z=K.length-1;z>=0;--z){const ee=K[z].toString();for(V=this.executorsByZIndex_[ee],Q=Nb.length-1;Q>=0;--Q)if(I=Nb[Q],$=V[I],$!==void 0&&(Z=$.executeHitDetection(y,c,i,P,_),Z))return Z}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],r=t[1],o=t[2],s=t[3],a=[i,r,i,s,o,s,o,r];return vv(a,0,8,2,e,a),a}isEmpty(){return _v(this.executorsByZIndex_)}execute(e,t,i,r,o,s,a){const c=Object.keys(this.executorsByZIndex_).map(Number);c.sort(a?Dge:A0),s=s||Nb;const f=Nb.length;for(let y=0,_=c.length;y<_;++y){const E=c[y].toString(),I=this.executorsByZIndex_[E];for(let P=0,K=s.length;P<K;++P){const z=s[P],Q=I[z];if(Q!==void 0){const V=a===null?void 0:Q.getZIndexContext(),$=V?V.getContext():e,Z=this.maxExtent_&&z!=="Image"&&z!=="Text";if(Z&&($.save(),this.clip($,i)),!V||z==="Text"||z==="Image"?Q.execute($,t,i,r,o,a):V.pushFunction(ee=>Q.execute(ee,t,i,r,o,a)),Z&&$.restore(),V){V.offset();const ee=c[y]*f+Nb.indexOf(z);this.deferredZIndexContexts_[ee]||(this.deferredZIndexContexts_[ee]=[]),this.deferredZIndexContexts_[ee].push(V)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(A0);for(let i=0,r=t.length;i<r;++i)e[t[i]].forEach(o=>{o.draw(this.renderedContext_),o.clear()}),e[t[i]].length=0}}const f8={};function Lve(n){if(f8[n]!==void 0)return f8[n];const e=n*2+1,t=n*n,i=new Array(t+1);for(let o=0;o<=n;++o)for(let s=0;s<=n;++s){const a=o*o+s*s;if(a>t)break;let c=i[a];c||(c=[],i[a]=c),c.push(((n+o)*e+(n+s))*4+3),o>0&&c.push(((n-o)*e+(n+s))*4+3),s>0&&(c.push(((n+o)*e+(n-s))*4+3),o>0&&c.push(((n-o)*e+(n-s))*4+3))}const r=[];for(let o=0,s=i.length;o<s;++o)i[o]&&r.push(...i[o]);return f8[n]=r,r}const hf=.5;function hee(n,e,t,i,r,o,s,a,c){const f=c?sL(r):r,y=n[0]*hf,_=n[1]*hf,E=Al(y,_);E.imageSmoothingEnabled=!1;const I=E.canvas,P=new cve(E,hf,r,null,s,a,c?XM(P0e(),c):null),K=t.length,z=Math.floor((256*256*256-1)/K),Q={};for(let $=1;$<=K;++$){const Z=t[$-1],ee=Z.getStyleFunction()||i;if(!ee)continue;let X=ee(Z,o);if(!X)continue;Array.isArray(X)||(X=[X]);const se=($*z).toString(16).padStart(7,"#00000");for(let ue=0,ve=X.length;ue<ve;++ue){const ye=X[ue],Ee=ye.getGeometryFunction()(Z);if(!Ee||!wl(f,Ee.getExtent()))continue;const _e=ye.clone(),Be=_e.getFill();Be&&Be.setColor(se);const Fe=_e.getStroke();Fe&&(Fe.setColor(se),Fe.setLineDash(null)),_e.setText(void 0);const Se=ye.getImage();if(Se){const De=Se.getImageSize();if(!De)continue;const Ie=Al(De[0],De[1],void 0,{alpha:!1}),ze=Ie.canvas;Ie.fillStyle=se,Ie.fillRect(0,0,ze.width,ze.height),_e.setImage(new c2({img:ze,anchor:Se.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Se.getOrigin(),opacity:1,size:Se.getSize(),scale:Se.getScale(),rotation:Se.getRotation(),rotateWithView:Se.getRotateWithView()}))}const qe=_e.getZIndex()||0;let ut=Q[qe];ut||(ut={},Q[qe]=ut,ut.Polygon=[],ut.Circle=[],ut.LineString=[],ut.Point=[]);const ht=Ee.getType();if(ht==="GeometryCollection"){const De=Ee.getGeometriesArrayRecursive();for(let Ie=0,ze=De.length;Ie<ze;++Ie){const Te=De[Ie];ut[Te.getType().replace("Multi","")].push(Te,_e)}}else ut[ht.replace("Multi","")].push(Ee,_e)}}const V=Object.keys(Q).map(Number).sort(A0);for(let $=0,Z=V.length;$<Z;++$){const ee=Q[V[$]];for(const X in ee){const W=ee[X];for(let se=0,ue=W.length;se<ue;se+=2){P.setStyle(W[se+1]);for(let ve=0,ye=e.length;ve<ye;++ve)P.setTransform(e[ve]),P.drawGeometry(W[se])}}}return E.getImageData(0,0,I.width,I.height)}function dee(n,e,t){const i=[];if(t){const r=Math.floor(Math.round(n[0])*hf),o=Math.floor(Math.round(n[1])*hf),s=(cl(r,0,t.width-1)+cl(o,0,t.height-1)*t.width)*4,a=t.data[s],c=t.data[s+1],y=t.data[s+2]+256*(c+256*a),_=Math.floor((256*256*256-1)/e.length);y&&y%_===0&&i.push(e[y/_-1])}return i}const Uve=5;class Kve extends HM{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=Uve}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return fr()}getData(e){return null}prepareFrame(e){return fr()}renderFrame(e,t){return fr()}forEachFeatureAtCoordinate(e,t,i,r,o){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===Bi.LOADED||t.getState()===Bi.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=Bi.LOADED&&t!=Bi.ERROR&&e.addEventListener(cr.CHANGE,this.boundHandleImageChange_),t==Bi.IDLE&&(e.load(),t=e.getState()),t==Bi.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const Yj=[];let px=null;function Fve(){px=Al(1,1,void 0,{willReadFrequently:!0})}class LL extends Kve{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=fd(),this.pixelTransform=fd(),this.inversePixelTransform=fd(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,i){px||Fve(),px.clearRect(0,0,1,1);let r;try{px.drawImage(e,t,i,1,1,0,0,1,1),r=px.getImageData(0,0,1,1).data}catch{return px=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const r=this.getLayer().getClassName();let o,s;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&Tv(a2(e.style.backgroundColor),a2(i)))){const a=e.firstElementChild;av(a)&&(s=a.getContext("2d"))}if(s&&N0e(s.canvas.style.transform,t)?(this.container=e,this.context=s,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){o=jA?kJ():document.createElement("div"),o.className=r;let a=o.style;a.position="absolute",a.width="100%",a.height="100%",s=Al();const c=s.canvas;o.appendChild(c),a=c.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=o,this.context=s}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const r=j1(i),o=N6(i),s=j6(i),a=z6(i);Cu(t.coordinateToPixelTransform,r),Cu(t.coordinateToPixelTransform,o),Cu(t.coordinateToPixelTransform,s),Cu(t.coordinateToPixelTransform,a);const c=this.inversePixelTransform;Cu(c,r),Cu(c,o),Cu(c,s),Cu(c,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,t){const i=e.extent,r=e.viewState.resolution,o=e.viewState.rotation,s=e.pixelRatio,a=Math.round(Go(i)/r*s),c=Math.round(Mu(i)/r*s);p0(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/s,1/s,o,-a/2,-c/2),gJ(this.inversePixelTransform,this.pixelTransform);const f=j0e(this.pixelTransform);if(this.useContainer(t,f,this.getBackground(e)),!this.containerReused){const y=this.context.canvas;y.width!=a||y.height!=c?(y.width=a,y.height=c):this.context.clearRect(0,0,a,c),f!==y.style.transform&&(y.style.transform=f)}}dispatchRenderEvent_(e,t,i){const r=this.getLayer();if(r.hasListener(e)){const o=new tee(e,this.inversePixelTransform,i,t);r.dispatchEvent(o)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(pp.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(pp.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new PL),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(pp.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(pp.POSTRENDER,this.context,e))}getRenderTransform(e,t,i,r,o,s,a){const c=o/2,f=s/2,y=r/t,_=-y,E=-e[0]+a,I=-e[1];return p0(this.tempTransform,c,f,y,_,-i,E,I)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class zve extends LL{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=xp(),this.wrappedRenderedExtent_=xp(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,i){const r=t.extent,o=t.viewState,s=o.center,a=o.resolution,c=o.projection,f=o.rotation,y=c.getExtent(),_=this.getLayer().getSource(),E=this.getLayer().getDeclutter(),I=t.pixelRatio,P=t.viewHints,K=!(P[Qa.ANIMATING]||P[Qa.INTERACTING]),z=this.context,Q=Math.round(Go(r)/a*I),V=Math.round(Mu(r)/a*I),$=_.getWrapX()&&c.canWrapX(),Z=$?Go(y):null,ee=$?Math.ceil((r[2]-y[2])/Z)+1:1;let X=$?Math.floor((r[0]-y[0])/Z):0;do{let W=this.getRenderTransform(s,a,0,I,Q,V,X*Z);t.declutter&&(W=W.slice(0)),e.execute(z,[z.canvas.width,z.canvas.height],W,f,K,i===void 0?Nb:i?hE:Pve,i?E&&t.declutter[E]:void 0)}while(++X<ee)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Al(this.context.canvas.width,this.context.canvas.height,Yj))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,e5(this.context),Yj.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex];this.opacity_=i.opacity;const r=e.viewState;this.prepareContainer(e,t);const o=this.context,s=this.replayGroup_;let a=s&&!s.isEmpty();if(!a&&!(this.getLayer().hasListener(pp.PRERENDER)||this.getLayer().hasListener(pp.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(o,e),r.projection,this.clipped_=!1,a&&i.extent&&this.clipping){const c=Jg(i.extent);a=wl(c,e.extent),this.clipped_=a&&!Xg(c,e.extent),this.clipped_&&this.clipUnrotated(o,e,c)}return a&&this.renderWorlds(s,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&o.restore(),this.postRender(o,e),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=this.frameState.size.slice(),r=this.renderedCenter_,o=this.renderedResolution_,s=this.renderedRotation_,a=this.renderedProjection_,c=this.wrappedRenderedExtent_,f=this.getLayer(),y=[],_=i[0]*hf,E=i[1]*hf;y.push(this.getRenderTransform(r,o,s,hf,_,E,0).slice());const I=f.getSource(),P=a.getExtent();if(I.getWrapX()&&a.canWrapX()&&!Xg(P,c)){let K=c[0];const z=Go(P);let Q=0,V;for(;K<P[0];)--Q,V=z*Q,y.push(this.getRenderTransform(r,o,s,hf,_,E,V).slice()),K+=z;for(Q=0,K=c[2];K>P[2];)++Q,V=z*Q,y.push(this.getRenderTransform(r,o,s,hf,_,E,V).slice()),K-=z}this.hitDetectionImageData_=hee(i,y,this.renderedFeatures_,f.getStyleFunction(),c,o,s,vD(o,this.renderedPixelRatio_),null)}t(dee(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,i,r,o){if(!this.replayGroup_)return;const s=t.viewState.resolution,a=t.viewState.rotation,c=this.getLayer(),f={},y=function(E,I,P){const K=Br(E),z=f[K];if(z){if(z!==!0&&P<z.distanceSq){if(P===0)return f[K]=!0,o.splice(o.lastIndexOf(z),1),r(E,c,I);z.geometry=I,z.distanceSq=P}}else{if(P===0)return f[K]=!0,r(E,c,I);o.push(f[K]={feature:E,layer:c,geometry:I,distanceSq:P,callback:r})}},_=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,s,a,i,y,_?t.declutter?.[_]?.all().map(E=>E.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const r=e.viewHints[Qa.ANIMATING],o=e.viewHints[Qa.INTERACTING],s=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!s&&r||!a&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const c=e.extent,f=e.viewState,y=f.projection,_=f.resolution,E=e.pixelRatio,I=t.getRevision(),P=t.getRenderBuffer();let K=t.getRenderOrder();K===void 0&&(K=hve);const z=f.center.slice(),Q=yv(c,P*_),V=Q.slice(),$=[Q.slice()],Z=y.getExtent();if(i.getWrapX()&&y.canWrapX()&&!Xg(Z,e.extent)){const Be=Go(Z),Fe=Math.max(Go(Q)/2,Be);Q[0]=Z[0]-Fe,Q[2]=Z[2]+Fe,tL(z,y);const Se=sJ($[0],y);Se[0]<Z[0]&&Se[2]<Z[2]?$.push([Se[0]+Be,Se[1],Se[2]+Be,Se[3]]):Se[0]>Z[0]&&Se[2]>Z[2]&&$.push([Se[0]-Be,Se[1],Se[2]-Be,Se[3]])}if(this.ready&&this.renderedResolution_==_&&this.renderedRevision_==I&&this.renderedRenderOrder_==K&&this.renderedFrameDeclutter_===!!e.declutter&&Xg(this.wrappedRenderedExtent_,Q))return Tv(this.renderedExtent_,V)||(this.hitDetectionImageData_=null,this.renderedExtent_=V),this.renderedCenter_=z,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const ee=new cee(aee(_,E),Q,_,E);let X;for(let Be=0,Fe=$.length;Be<Fe;++Be)i.loadFeatures($[Be],_,y);const W=vD(_,E);let se=!0;const ue=((Be,Fe)=>{let Se;const qe=Be.getStyleFunction()||t.getStyleFunction();if(qe&&(Se=qe(Be,_)),Se){const ut=this.renderFeature(Be,W,Se,ee,X,this.getLayer().getDeclutter(),Fe);se=se&&!ut}}),ve=sL(Q),ye=i.getFeaturesInExtent(ve);K&&ye.sort(K);for(let Be=0,Fe=ye.length;Be<Fe;++Be)ue(ye[Be],Be);this.renderedFeatures_=ye,this.ready=se;const Ee=ee.finish(),_e=new Aee(Q,_,E,i.getOverlaps(),Ee,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=_,this.renderedRevision_=I,this.renderedRenderOrder_=K,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=V,this.wrappedRenderedExtent_=Q,this.renderedCenter_=z,this.renderedProjection_=y,this.renderedPixelRatio_=E,this.replayGroup_=_e,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,r,o,s,a){if(!i)return!1;let c=!1;if(Array.isArray(i))for(let f=0,y=i.length;f<y;++f)c=cE(r,e,i[f],t,this.boundHandleStyleImageChange_,o,s,a)||c;else c=cE(r,e,i,t,this.boundHandleStyleImageChange_,o,s,a);return c}}class UL extends DL{constructor(e){super(e)}createRenderer(){return new zve(this)}}class jve extends TL{constructor(e,t,i,r,o){const s=o!==void 0?Bi.IDLE:Bi.LOADED;super(e,t,i,s),this.loader_=o!==void 0?o:null,this.canvas_=r,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=Bi.ERROR):this.state=Bi.LOADED,this.changed()}load(){this.state==Bi.IDLE&&(this.state=Bi.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}class a5 extends $M{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(cr.CHANGE)}release(){this.setState(Hn.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==Hn.EMPTY){if(this.state!==Hn.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){fr()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const r=t-i+1e3/60;return r>=this.transition_?1:lJ(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class fee extends a5{constructor(e,t,i,r,o,s){super(e,t,s),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_,jA?this.image_=new OffscreenCanvas(1,1):(this.image_=new Image,r!==null&&(this.image_.crossOrigin=r)),this.unlisten_=null,this.tileLoadFunction_=o}getImage(){return this.image_}setImage(e){this.image_=e,this.state=Hn.LOADED,this.unlistenImage_(),this.changed()}getCrossOrigin(){return this.crossOrigin_}handleImageError_(){this.state=Hn.ERROR,this.unlistenImage_(),this.image_=Nve(),this.changed()}handleImageLoad_(){if(jA)this.state=Hn.LOADED;else{const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=Hn.LOADED:this.state=Hn.EMPTY}this.unlistenImage_(),this.changed()}load(){this.state==Hn.ERROR&&(this.state=Hn.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Hn.IDLE&&(this.state=Hn.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Oye(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function Nve(){const n=Al(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}const RA={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Gve extends Wm{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+h1e,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(RA.ELEMENT,this.handleElementChanged),this.addChangeListener(RA.MAP,this.handleMapChanged),this.addChangeListener(RA.OFFSET,this.handleOffsetChanged),this.addChangeListener(RA.POSITION,this.handlePositionChanged),this.addChangeListener(RA.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(RA.ELEMENT)}getId(){return this.id}getMap(){return this.get(RA.MAP)||null}getOffset(){return this.get(RA.OFFSET)}getPosition(){return this.get(RA.POSITION)}getPositioning(){return this.get(RA.POSITIONING)}handleElementChanged(){TJ(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),fa(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=Ro(e,C1.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(RA.ELEMENT,e)}setMap(e){this.set(RA.MAP,e)}setOffset(e){this.set(RA.OFFSET,e)}setPosition(e){this.set(RA.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(RA.POSITION))return;const i=this.getRect(t.getTargetElement(),t.getSize()),r=this.getElement(),o=this.getRect(r,[f1e(r),p1e(r)]);e=e||{};const s=e.margin===void 0?20:e.margin;if(!Xg(i,o)){const a=o[0]-i[0],c=i[2]-o[2],f=o[1]-i[1],y=i[3]-o[3],_=[0,0];if(a<0?_[0]=a-s:c<0&&(_[0]=Math.abs(c)+s),f<0?_[1]=f-s:y<0&&(_[1]=Math.abs(y)+s),_[0]!==0||_[1]!==0){const E=t.getView().getCenterInternal(),I=t.getPixelFromCoordinateInternal(E);if(!I)return;const P=[I[0]+_[0],I[1]+_[1]],K=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(P),duration:K.duration,easing:K.easing})}}}getRect(e,t){const i=e.getBoundingClientRect(),r=i.left+window.pageXOffset,o=i.top+window.pageYOffset;return[r,o,r+t[0],o+t[1]]}setPositioning(e){this.set(RA.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const i=e.getPixelFromCoordinate(t),r=e.getSize();this.updateRenderedPosition(i,r)}updateRenderedPosition(e,t){const i=this.element.style,r=this.getOffset(),o=this.getPositioning();this.setVisible(!0);const s=`${e[0]+r[0]}px`,a=`${e[1]+r[1]}px`;let c="0%",f="0%";o=="bottom-right"||o=="center-right"||o=="top-right"?c="-100%":(o=="bottom-center"||o=="center-center"||o=="top-center")&&(c="-50%"),o=="bottom-left"||o=="bottom-center"||o=="bottom-right"?f="-100%":(o=="center-left"||o=="center-center"||o=="center-right")&&(f="-50%");const y=`translate(${c}, ${f}) translate(${s}, ${a})`;this.rendered.transform_!=y&&(this.rendered.transform_=y,i.transform=y)}getOptions(){return this.options}}class KL{constructor(e,t,i,r){this.minX=e,this.maxX=t,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function P_(n,e,t,i,r){return r!==void 0?(r.minX=n,r.maxX=e,r.minY=t,r.maxY=i,r):new KL(n,e,t,i)}const Vj=[];class Wve extends a5{constructor(e,t,i,r,o){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=r.bind(void 0,this),this.removeSourceTiles_=o,this.wrappedTileCoord=i}getContext(){return this.context_||(this.context_=Al(1,1,Vj)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=Br(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(e5(this.context_),Vj.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let pee=class extends a5{constructor(e,t,i,r,o,s){super(e,t,s),this.extent=null,this.format_=r,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=o,this.url_=i,this.key=i}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==Hn.IDLE&&(this.setState(Hn.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(Hn.ERROR)}setFeatures(e){this.features_=e,this.setState(Hn.LOADED)}setLoader(e){this.loader_=e}};const mee="https://api.mapbox.com";function FL(n){const e="mapbox://";return n.indexOf(e)!==0?"":n.slice(e.length)}function Qve(n,e,t){if(typeof n=="string")return[{id:"default",url:$j(n,e,t)}];for(const i of n)i.url=$j(i.url,e,t);return n}function $j(n,e,t){const i=FL(n);if(!i)return decodeURI(new URL(n,t).href);const r="sprites/";if(i.indexOf(r)!==0)throw new Error(`unexpected sprites url: ${n}`);const o=i.slice(r.length);return`${mee}/styles/v1/${o}/sprite?access_token=${e}`}function dE(n,e){const t=FL(n);if(!t)return decodeURI(new URL(n,location.href).href);const i="styles/";if(t.indexOf(i)!==0)throw new Error(`unexpected style url: ${n}`);const r=t.slice(i.length);return`${mee}/styles/v1/${r}?&access_token=${e}`}const qve=["a","b","c","d"];function sS(n,e,t,i){const r=new URL(n,i||location.href),o=FL(n);if(!o)return e?(r.searchParams.has(t)||r.searchParams.set(t,e),[decodeURI(r.href)]):[decodeURI(r.href)];if(o==="mapbox.satellite"){const s=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${o}/{z}/{x}/{y}${s}.webp?access_token=${e}`]}return qve.map(s=>`https://${s}.tiles.mapbox.com/v4/${o}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const Im=Object.freeze({}),Hj={},Zj={};let Yve=0;function zL(n){return n.id||(n.id=Yve++),n.id}function Vve(n,e){return zL(n)+"."+Br(e)}function gee(n){let e=Hj[n.id];return e||(e={},Hj[zL(n)]=e),e}function $ve(n){let e=Zj[n.id];return e||(e={},Zj[zL(n)]=e),e}function p8(n){return n*Math.PI/180}const d0=(function(){const n=[];for(let e=78271.51696402048;n.length<=24;e/=2)n.push(e);return n})();function nB(n,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(n,e);const t=document.createElement("canvas");return t.width=n,t.height=e,t}function jL(n,e){let t=0;const i=e.length;for(;t<i;++t)if(e[t]<n&&t+1<i){const o=e[t]/e[t+1];return t+Math.log(e[t]/n)/Math.log(o)}return i-1}function F3(n,e){const t=Math.floor(n),i=Math.pow(2,n-t);return e[t]/i}const L_={};function A2(n,e,t={},i){if(e in L_)return i&&(i.url=L_[e][0].url),L_[e][1];const r=t.transformRequest&&t.transformRequest(e,n)||e,o=function(c){return delete L_[e],Promise.reject(new Error("Error fetching source "+e))},s=function(c){return delete L_[e],c.ok?c.json():Promise.reject(new Error("Error fetching source "+e))},a=o2(()=>r).then(c=>c instanceof Response?(i&&(i.url=c.url),s(c)):(c instanceof Request||(c=new Request(c)),c.headers.get("Accept")||c.headers.set("Accept","application/json"),i&&(i.url=c.url),fetch(c).then(s).catch(o))).catch(o);return L_[e]=[r,a],a}function yee(n,e){if(typeof n=="string")if(n.trim().startsWith("{"))try{const t=JSON.parse(n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return n=dE(n,e.accessToken),A2("Style",n,e);else return Promise.resolve(n)}const Xj={};function vee(n,e,t={}){const i=[e,JSON.stringify(n)].toString();let r=Xj[i];if(!r||t.transformRequest){let o;t.transformRequest&&(o=(a,c)=>{const f=t.transformRequest&&t.transformRequest(c,"Tiles")||c;if(a instanceof pee)a.setLoader((y,_,E)=>{const I=function(P){P.arrayBuffer().then(K=>{const Q=a.getFormat().readFeatures(K,{extent:y,featureProjection:E});a.setFeatures(Q)})};o2(()=>f).then(P=>{if(P instanceof Response)return I(P);fetch(P).then(I).catch(K=>a.setState(Hn.ERROR))}).catch(P=>a.setState(Hn.ERROR))});else{const y=a.getImage();o2(()=>f).then(_=>{if(typeof _=="string"){y.src=_;return}const E=I=>I.blob().then(P=>{const K=URL.createObjectURL(P);y.addEventListener("load",()=>URL.revokeObjectURL(K)),y.addEventListener("error",()=>URL.revokeObjectURL(K)),y.src=K});if(_ instanceof Response)return E(_);fetch(_).then(E).catch(I=>a.setState(Hn.ERROR))}).catch(_=>a.setState(Hn.ERROR))}});const s=n.url;if(s&&!n.tiles){const a=sS(s,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(s.startsWith("mapbox://"))r=Promise.resolve({tileJson:Object.assign({},n,{url:void 0,tiles:a}),tileLoadFunction:o});else{const c={};r=A2("Source",a[0],t,c).then(function(f){return f.tiles=f.tiles.map(function(y){return f.scheme==="tms"&&(y=y.replace("{y}","{-y}")),sS(y,t.accessToken,t.accessTokenParam||"access_token",c.url)[0]}),Promise.resolve({tileJson:f,tileLoadFunction:o})})}}else n.tiles?(n=Object.assign({},n,{tiles:n.tiles.map(function(a){return n.scheme==="tms"&&(a=a.replace("{y}","{-y}")),sS(a,t.accessToken,t.accessTokenParam||"access_token",e||location.href)[0]})}),r=Promise.resolve({tileJson:Object.assign({},n),tileLoadFunction:o})):r=Promise.reject(new Error("source has no `tiles` nor `url`"));Xj[i]=r}return r}function Jj(n,e,t,i){const r=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],o=nB(r[0],r[1]),s=o.getContext("2d");s.drawImage(n,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const a=s.getImageData(0,0,r[0],r[1]);s.globalCompositeOperation="destination-over",s.fillStyle=`rgba(${i.r*255},${i.g*255},${i.b*255},${i.a})`;const c=a.data;for(let f=0,y=a.width;f<y;++f)for(let _=0,E=a.height;_<E;++_){const I=(_*y+f)*4;c[I+3]>0&&s.arc(f,_,t*e.pixelRatio,0,2*Math.PI)}return s.fill(),o}function Hve(n,e,t){const i=Math.max(0,Math.min(1,(t-n)/(e-n)));return i*i*(3-2*i)}function eN(n,e,t){const i=nB(e.width,e.height),r=i.getContext("2d");r.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const o=r.getImageData(0,0,e.width,e.height),s=o.data;for(let a=0,c=o.width;a<c;++a)for(let f=0,y=o.height;f<y;++f){const _=(f*c+a)*4,E=s[_+3]/255,I=.75,P=.1,K=Hve(I-P,I+P,E);K>0?(s[_+0]=Math.round(255*t.r*K),s[_+1]=Math.round(255*t.g*K),s[_+2]=Math.round(255*t.b*K),s[_+3]=Math.round(255*K)):s[_+3]=0}return r.putImageData(o,0,0),i}const Zve=Array(256).join("");function bD(n,e){if(e>=.05){let t="";const i=n.split(`
`),r=Zve.slice(0,Math.round(e/.1));for(let o=0,s=i.length;o<s;++o)o>0&&(t+=`
`),t+=i[o].split("").join(r);return t}return n}let m8;function bee(){return m8||(m8=nB(1,1).getContext("2d")),m8}function Rb(n,e){return bee().measureText(n).width+(n.length-1)*e}const fE={};jb.on("propertychange",()=>{for(const n in fE)delete fE[n]});function CD(n,e,t,i){if(n.indexOf(`
`)!==-1){const s=n.split(`
`),a=[];for(let c=0,f=s.length;c<f;++c)a.push(CD(s[c],e,t,i));return a.join(`
`)}const r=t+","+e+","+n+","+i;let o=fE[r];if(!o){const s=n.split(" ");if(s.length>1){const a=bee();a.font=e;const f=a.measureText("M").width*t;let y="";const _=[];for(let E=0,I=s.length;E<I;++E){const P=s[E],K=y+(y?" ":"")+P;Rb(K,i)<=f?y=K:(y&&_.push(y),y=P)}y&&_.push(y);for(let E=0,I=_.length;E<I&&I>1;++E){const P=_[E];if(Rb(P,i)<f*.35){const K=E>0?Rb(_[E-1],i):1/0,z=E<I-1?Rb(_[E+1],i):1/0;_.splice(E,1),I-=1,K<z?(_[E-1]+=" "+P,E-=1):_[E]=P+" "+_[E]}}for(let E=0,I=_.length-1;E<I;++E){const P=_[E],K=_[E+1];if(Rb(P,i)>f*.7&&Rb(K,i)<f*.6){const z=P.split(" "),Q=z.pop();Rb(Q,i)<f*.2&&(_[E]=z.join(" "),_[E+1]=Q+" "+K),I-=1}}o=_.join(`
`)}else o=n;o=bD(o,i),fE[r]=o}return o}const Xve=["Arial","Courier New","Times New Roman","Verdana","sans-serif","serif","monospace","cursive","fantasy"],tN={};function Jve(n,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){if(jA)return n;let t;for(let i=0,r=n.length;i<r;++i){const o=n[i];if(o in tN)continue;tN[o]=!0;const a=Z9(o,16).split(" ");t||(t=[]),t.push([a.slice(3).join(" ").replace(/"/g,""),a[1],a[0]])}return t&&(async()=>{await document.fonts.ready;for(let i=0,r=t.length;i<r;++i){const o=t[i],s=o[0];if(Xve.includes(s))continue;const a=o[1],c=o[2];if(!(await document.fonts.load(`${c} ${a} 16px "${s}"`)).some(y=>y.family.replace(/^['"]|['"]$/g,"").toLowerCase()===s.toLowerCase()&&y.weight==a&&y.style===c)){const y=e.replace("{font-family}",s.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",s.replace(/ /g,"+")).replace("{fontweight}",a).replace("{-fontstyle}",c.replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",c);if(!document.querySelector('link[href="'+y+'"]')){const _=document.createElement("link");_.href=y,_.rel="stylesheet",document.head.appendChild(_)}}}})(),n}const ebe={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},tbe={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},nbe=function(n,e){const t=yge(n,e);if(t.result==="error")throw new Error(t.value.map(i=>`${i.key}: ${i.message}`).join(", "));return t.value},gf={zoom:0,distanceFromCenter:0};ff.register(P6,{...ff.definitions,pitch:[{kind:"number"},[],n=>gf.pitch||90],"distance-from-center":[{kind:"number"},[],n=>gf.distanceFromCenter||0]});let ew,g8;function Li(n,e,t,i,r,o){const s=n.id;r||(r={},console.warn("No functionCache provided to getValue()")),r[s]||(r[s]={});const a=r[s];if(!a[t]){let c=(n[e]||Im)[t];const f=Tge[`${e}_${n.type}`][t];c===void 0&&(c=f.default);let y=gge(c);if(!y&&WX(c)&&(c=wge(c,f),y=!0),y){const _=nbe(c,f);a[t]=_.evaluate.bind(_)}else f.type=="color"&&(c=Ts.parse(c)),a[t]=function(){return c}}return a[t](gf,i,o)}function nN(n,e,t,i){return Li(n,"layout",`${t}-allow-overlap`,e,i)?Li(n,"layout",`${t}-ignore-placement`,e,i)?"none":"obstacle":"declutter"}function ibe(n,e,t,i){if(i||console.warn("No filterCache provided to evaluateFilter()"),!(n in i))try{i[n]=_ge(e).filter}catch(r){console.warn("Filter will evaluate to false: "+r.message),i[n]=function(){return!1}}return i[n](gf,t)}function $y(n,e){if(n){if(n.a===0||e===0)return;const t=n.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(n.r*255/t)+","+Math.round(n.g*255/t)+","+Math.round(n.b*255/t)+","+t*e+")"}return n}const rbe=/\{[^{}}]*\}/g;function y8(n,e){return n.replace(rbe,function(t){return e[t.slice(1,-1)]||""})}function iN(n,e){let t=n.split(":")[0];return t===n&&(t="default"),e[t]}const obe={};function sbe(n,e,t,i=d0,r=void 0,o=void 0,s=void 0,a=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");obe[Vve(e,n)]=Array.from(arguments);const c={};(typeof o=="string"||o instanceof Request||o instanceof Response||o instanceof Promise)&&(o={default:o});for(const ee in o){const X=o[ee];o2(()=>X).then(async W=>{let se;if(typeof Image<"u"){const ue=new Image;if(typeof W=="string")ue.crossOrigin="anonymous",ue.src=W;else{let ve;W instanceof Request?ve=await fetch(W):W instanceof Response&&(ve=W);const ye=await ve.blob();se=URL.createObjectURL(ye),ue.src=se}ue.addEventListener("load",function ve(){ue.removeEventListener("load",ve),c[ee]={image:ue,size:[ue.width,ue.height]},n.changed(),se&&URL.revokeObjectURL(se)}),ue.addEventListener("error",function ve(){URL.revokeObjectURL(se),ue.removeEventListener("error",ve)})}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const ue=self;ue.postMessage({action:"loadImage",src:W}),ue.addEventListener("message",function(ye){ye.data.action==="imageLoaded"&&ye.data.src===W&&(c[ee]={image:ye.data.image,size:[ye.data.image.width,ye.data.image.height]})})}})}const f=MX(e.layers),y={},_=[],E={},I={},P=gee(e),K=$ve(e);let z;for(let ee=0,X=f.length;ee<X;++ee){const W=f[ee],se=W.id;if(typeof t=="string"&&W.source==t||Array.isArray(t)&&t.indexOf(se)!==-1){const ue=W["source-layer"];if(z){if(W.source!==z)throw new Error(`Layer "${se}" does not use source "${z}`)}else{z=W.source;const ye=e.sources[z];if(!ye)throw new Error(`Source "${z}" is not defined`);const Ee=ye.type;if(Ee!=="vector"&&Ee!=="geojson")throw new Error(`Source "${z}" is not of type "vector" or "geojson", but "${Ee}"`)}let ve=y[ue];ve||(ve=[],y[ue]=ve),ve.push({layer:W,index:ee}),_.push(se)}}const Q=new lv,V=new t0,$=[],Z=function(ee,X,W){const se=n.getSource?.()?.format_?.layerName_??"mvt:layer",ue=ee.getProperties(),ve=y[ue[se]];if(!ve)return;let ye=i.indexOf(X);ye==-1&&(ye=jL(X,i)),gf.zoom=ye,gf.distanceFromCenter=0;const Ee=ee.getGeometry(),_e=ebe[Ee.getType()],Be=n.get("map");if(Be&&Be instanceof X4&&_e===1){const ut=Be.getSize();if(ut){const ht=Be.getView().getCenter(),De=vf(Ee.getExtent());gf.distanceFromCenter=n0e(ht,De)/X/ut[1]}}const Fe={id:ee.getId(),properties:ue,type:_e},Se=n.get("mapbox-featurestate")[ee.getId()];let qe=-1;for(let ut=0,ht=ve.length;ut<ht;++ut){const De=ve[ut],Ie=De.layer,ze=Ie.id;if(W!==void 0&&W!==ze)continue;const Te=Ie.layout||Im,vt=Ie.paint||Im;if(Te.visibility==="none"||"minzoom"in Ie&&ye<Ie.minzoom||"maxzoom"in Ie&&ye>=Ie.maxzoom)continue;const st=Ie.filter;if(!st||ibe(ze,st,Fe,K)){let Et,Pt,ke,Oe,we,Ye;const ft=De.index;if(_e==3&&(Ie.type=="fill"||Ie.type=="fill-extrusion"))if(Pt=Li(Ie,"paint",Ie.type+"-opacity",Fe,P,Se),Ie.type+"-pattern"in vt){const En=Li(Ie,"paint",Ie.type+"-pattern",Fe,P,Se);if(En){const wt=typeof En=="string"?y8(En,ue):En.toString(),be=iN(wt,c);if(r&&r[wt]&&be){++qe,Ye=$[qe],(!Ye||!Ye.getFill()||Ye.getStroke()||Ye.getText())&&(Ye=new lf({fill:new t0}),$[qe]=Ye),ke=Ye.getFill(),Ye.setZIndex(ft);const re=wt+"."+Pt;let ce=I[re];if(!ce){const Pe=r[wt],tt=nB(Pe.width,Pe.height),xt=tt.getContext("2d");xt.globalAlpha=Pt,xt.drawImage(be.image,Pe.x,Pe.y,Pe.width,Pe.height,0,0,Pe.width,Pe.height),ce=xt.createPattern(tt,"repeat"),I[re]=ce}ke.setColor(ce)}}}else Et=$y(Li(Ie,"paint",Ie.type+"-color",Fe,P,Se),Pt),Ie.type+"-outline-color"in vt&&(we=$y(Li(Ie,"paint",Ie.type+"-outline-color",Fe,P,Se),Pt)),we||(we=Et),(Et||we)&&(++qe,Ye=$[qe],(!Ye||Et&&!Ye.getFill()||!Et&&Ye.getFill()||we&&!Ye.getStroke()||!we&&Ye.getStroke()||Ye.getText())&&(Ye=new lf({fill:Et?new t0:void 0,stroke:we?new lv:void 0}),$[qe]=Ye),Et&&(ke=Ye.getFill(),ke.setColor(Et)),we&&(Oe=Ye.getStroke(),Oe.setColor(we),Oe.setWidth(.5)),Ye.setZIndex(ft));if(_e!=1&&Ie.type=="line"){"line-pattern"in vt?Et=void 0:Et=$y(Li(Ie,"paint","line-color",Fe,P,Se),Li(Ie,"paint","line-opacity",Fe,P,Se));const En=Li(Ie,"paint","line-width",Fe,P,Se);Et&&En>0&&(++qe,Ye=$[qe],(!Ye||!Ye.getStroke()||Ye.getFill()||Ye.getText())&&(Ye=new lf({stroke:new lv}),$[qe]=Ye),Oe=Ye.getStroke(),Oe.setLineCap(Li(Ie,"layout","line-cap",Fe,P,Se)),Oe.setLineJoin(Li(Ie,"layout","line-join",Fe,P,Se)),Oe.setMiterLimit(Li(Ie,"layout","line-miter-limit",Fe,P,Se)),Oe.setColor(Et),Oe.setWidth(En),Oe.setLineDash(vt["line-dasharray"]?Li(Ie,"paint","line-dasharray",Fe,P,Se).map(function(wt){return wt*En}):null),Ye.setZIndex(ft))}let dt=!1,gt=null,Lt=0,Tt,Zt,Fn;if((_e==1||_e==2)&&"icon-image"in Te){const En=Li(Ie,"layout","icon-image",Fe,P,Se);if(En){Tt=typeof En=="string"?y8(En,ue):En.toString();let wt;const be=a?a(n,Tt):void 0,re=iN(Tt,c);if(r&&r[Tt]&&re||be){const ce=Li(Ie,"layout","icon-rotation-alignment",Fe,P,Se);if(_e==2){const Pe=ee.getGeometry();if(Pe.getFlatMidpoint||Pe.getFlatMidpoints){const tt=Pe.getExtent();if(Math.sqrt(Math.max(Math.pow((tt[2]-tt[0])/X,2),Math.pow((tt[3]-tt[1])/X,2)))>150){const It=Pe.getType()==="MultiLineString"?Pe.getFlatMidpoints():Pe.getFlatMidpoint();if(g8||(ew=[NaN,NaN],g8=new FA("Point",ew,[],2,{},void 0)),wt=g8,ew[0]=It[0],ew[1]=It[1],Li(Ie,"layout","symbol-placement",Fe,P,Se)==="line"&&ce==="map"){const Xe=Pe.getStride(),ae=Pe.getFlatCoordinates();for(let he=0,C=ae.length-Xe;he<C;he+=Xe){const Ke=ae[he],$e=ae[he+1],rt=ae[he+Xe],Re=ae[he+Xe+1],at=Math.min(Ke,rt),St=Math.max(Ke,rt),Bt=It[0],kt=It[1],sn=(Re-$e)*(Bt-Ke)-(rt-Ke)*(kt-$e);if(Math.abs(sn)<.001&&Bt<=St&&Bt>=at){Lt=Math.atan2($e-Re,rt-Ke);break}}}}}}if(_e!==2||wt){const Pe=Li(Ie,"layout","icon-size",Fe,P,Se),tt=vt["icon-color"]!==void 0?Li(Ie,"paint","icon-color",Fe,P,Se):null;if(!tt||tt.a!==0){const xt=Li(Ie,"paint","icon-halo-color",Fe,P,Se),It=Li(Ie,"paint","icon-halo-width",Fe,P,Se);let _n=`${Tt}.${Pe}.${It}.${xt}`;if(tt!==null&&(_n+=`.${tt}`),Zt=E[_n],!Zt){const Xe=nN(Ie,Fe,"icon",P);let ae;"icon-offset"in Te&&(ae=Li(Ie,"layout","icon-offset",Fe,P,Se).slice(0),ae[0]*=Pe,ae[1]*=-Pe);let he=tt?[tt.r*255,tt.g*255,tt.b*255,tt.a]:void 0;if(be){const C={color:he,rotateWithView:ce==="map",displacement:ae,declutterMode:Xe,scale:Pe};typeof be=="string"?C.src=be:(C.img=be,C.imgSize=[be.width,be.height]),Zt=new c2(C)}else{const C=r[Tt];let Ke,$e,rt;if(It)C.sdf?(Ke=Jj(eN(re.image,C,tt||[0,0,0,1]),{x:0,y:0,width:C.width,height:C.height,pixelRatio:C.pixelRatio},It,xt),he=void 0):Ke=Jj(re.image,C,It,xt);else{if(C.sdf&&!re.unSDFed){const Re=eN(re.image,{x:0,y:0,width:re.size[0],height:re.size[1]},{r:1,g:1,b:1});re.image=Re,re.unSDFed=!0}Ke=re.image,$e=[C.width,C.height],rt=[C.x,C.y]}Zt=new c2({color:he,img:Ke,imgSize:re.size,size:$e,offset:rt,rotateWithView:ce==="map",scale:Pe/C.pixelRatio,displacement:ae,declutterMode:Xe})}E[_n]=Zt}}Zt&&(++qe,Ye=$[qe],(!Ye||!Ye.getImage()||Ye.getFill()||Ye.getStroke())&&(Ye=new lf,$[qe]=Ye),Ye.setGeometry(wt),Zt.setRotation(Lt+p8(Li(Ie,"layout","icon-rotate",Fe,P,Se))),Zt.setOpacity(Li(Ie,"paint","icon-opacity",Fe,P,Se)),Zt.setAnchor(tbe[Li(Ie,"layout","icon-anchor",Fe,P,Se)]),Ye.setImage(Zt),gt=Ye.getText(),Ye.setText(void 0),Ye.setZIndex(ft),dt=!0,Fn=!1)}else Fn=!0}}}if(_e==1&&Ie.type==="circle"){++qe,Ye=$[qe],(!Ye||!Ye.getImage()||Ye.getFill()||Ye.getStroke())&&(Ye=new lf,$[qe]=Ye);const En="circle-radius"in vt?Li(Ie,"paint","circle-radius",Fe,P,Se):5,wt=$y(Li(Ie,"paint","circle-stroke-color",Fe,P,Se),Li(Ie,"paint","circle-stroke-opacity",Fe,P,Se)),be=Li(Ie,"paint","circle-translate",Fe,P,Se),re=$y(Li(Ie,"paint","circle-color",Fe,P,Se),Li(Ie,"paint","circle-opacity",Fe,P,Se)),ce=Li(Ie,"paint","circle-stroke-width",Fe,P,Se),Pe=En+"."+wt+"."+re+"."+ce+"."+be[0]+"."+be[1];Zt=E[Pe],Zt||(Zt=new i5({radius:En,displacement:[be[0],-be[1]],stroke:wt&&ce>0?new lv({width:ce,color:wt}):void 0,fill:re?new t0({color:re}):void 0,declutterMode:"none"}),E[Pe]=Zt),Ye.setImage(Zt),gt=Ye.getText(),Ye.setText(void 0),Ye.setGeometry(void 0),Ye.setZIndex(ft),dt=!0}let Ln,fi,Rn,Dn,wn,qn;if("text-field"in Te){Dn=Math.round(Li(Ie,"layout","text-size",Fe,P,Se));const En=Li(Ie,"layout","text-font",Fe,P,Se);Rn=Li(Ie,"layout","text-line-height",Fe,P,Se),fi=Z9(s?s(En,e.metadata?e.metadata["ol:webfonts"]:void 0):En,Dn,Rn),fi.includes("sans-serif")||(fi+=",sans-serif"),wn=Li(Ie,"layout","text-letter-spacing",Fe,P,Se),qn=Li(Ie,"layout","text-max-width",Fe,P,Se);const wt=Li(Ie,"layout","text-field",Fe,P,Se);typeof wt=="object"&&wt.sections?wt.sections.length===1?Ln=wt.toString():Ln=wt.sections.reduce((be,re,ce)=>{const Pe=re.fontStack?re.fontStack.split(","):En,tt=Z9(s?s(Pe):Pe,Dn*(re.scale||1),Rn);let xt=re.text;if(xt===`
`)return be.push(`
`,""),be;if(_e==2)return be.push(bD(xt,wn),tt),be;xt=CD(xt,tt,qn,wn).split(`
`);for(let It=0,_n=xt.length;It<_n;++It)It>0&&be.push(`
`,""),be.push(xt[It],tt);return be},[]):Ln=y8(wt,ue).trim(),Pt=Li(Ie,"paint","text-opacity",Fe,P,Se)}if(Ln&&Pt&&!Fn){dt||(++qe,Ye=$[qe],(!Ye||!Ye.getText()||Ye.getFill()||Ye.getStroke())&&(Ye=new lf,$[qe]=Ye),Ye.setImage(void 0),Ye.setGeometry(void 0));const En=nN(Ie,Fe,"text",P);Ye.getText()||Ye.setText(gt),gt=Ye.getText(),(!gt||"getDeclutterMode"in gt&&gt.getDeclutterMode()!==En)&&(gt=new $J({padding:[2,2,2,2],declutterMode:En}),Ye.setText(gt));const wt=Li(Ie,"layout","text-transform",Fe,P,Se);wt=="uppercase"?Ln=Array.isArray(Ln)?Ln.map((rt,Re)=>Re%2?rt:rt.toUpperCase()):Ln.toUpperCase():wt=="lowercase"&&(Ln=Array.isArray(Ln)?Ln.map((rt,Re)=>Re%2?rt:rt.toLowerCase()):Ln.toLowerCase());const be=Array.isArray(Ln)?Ln:_e==2?bD(Ln,wn):CD(Ln,fi,qn,wn);if(gt.setText(be),gt.setFont(fi),gt.setRotation(p8(Li(Ie,"layout","text-rotate",Fe,P,Se))),typeof gt.setKeepUpright=="function"){const rt=Li(Ie,"layout","text-keep-upright",Fe,P,Se);gt.setKeepUpright(rt)}const re=Li(Ie,"layout","text-anchor",Fe,P,Se),ce=dt||_e==1?"point":Li(Ie,"layout","symbol-placement",Fe,P,Se);let Pe;if(ce==="line-center"?(gt.setPlacement("line"),Pe="center"):gt.setPlacement(ce),ce==="line"&&typeof gt.setRepeat=="function"){const rt=Li(Ie,"layout","symbol-spacing",Fe,P,Se);gt.setRepeat(rt*2)}gt.setOverflow(ce==="point");let tt=Li(Ie,"paint","text-halo-width",Fe,P,Se);const xt=Li(Ie,"layout","text-offset",Fe,P,Se),It=Li(Ie,"paint","text-translate",Fe,P,Se);let _n=0,Xe=0;if(ce=="point"){Pe="center",re.indexOf("left")!==-1?(Pe="left",Xe=tt):re.indexOf("right")!==-1&&(Pe="right",Xe=-tt);const rt=Li(Ie,"layout","text-rotation-alignment",Fe,P,Se);gt.setRotateWithView(rt=="map")}else gt.setMaxAngle(p8(Li(Ie,"layout","text-max-angle",Fe,P,Se))*Ln.length/be.length),gt.setRotateWithView(!1);gt.setTextAlign(Pe);let ae="middle";re.indexOf("bottom")==0?(ae="bottom",_n=-tt-.5*(Rn-1)*Dn):re.indexOf("top")==0&&(ae="top",_n=tt+.5*(Rn-1)*Dn),gt.setTextBaseline(ae);const he=Li(Ie,"layout","text-justify",Fe,P,Se);gt.setJustify(he==="auto"?void 0:he),gt.setOffsetX(xt[0]*Dn+Xe+It[0]),gt.setOffsetY(xt[1]*Dn+_n+It[1]),V.setColor($y(Li(Ie,"paint","text-color",Fe,P,Se),Pt)),gt.setFill(V);const C=$y(Li(Ie,"paint","text-halo-color",Fe,P,Se),Pt);if(C&&tt>0){Q.setColor(C),tt*=2;const rt=.5*Dn;Q.setWidth(tt<=rt?tt:rt),gt.setStroke(Q)}else gt.setStroke(void 0);const Ke=Li(Ie,"layout","text-padding",Fe,P,Se),$e=gt.getPadding();Ke!==$e[0]&&($e[0]=Ke,$e[1]=Ke,$e[2]=Ke,$e[3]=Ke),Ye.setZIndex(ft)}}}if(qe>-1)return $.length=qe+1,$};return n.setStyle(Z),n.set("mapbox-layers",_),n.set("mapbox-source",z),n.set("mapbox-featurestate",n.get("mapbox-featurestate")||{}),Z}class Cee{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=tB,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let i=t.dataProjection?ks(t.dataProjection):this.readProjection(e);t.extent&&i&&i.getUnits()==="tile-pixels"&&(i=ks(i),i.setWorldExtent(t.extent)),t={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return fr()}readFeature(e,t){return fr()}readFeatures(e,t){return fr()}readGeometry(e,t){return fr()}readProjection(e){return fr()}writeFeature(e,t){return fr()}writeFeatures(e,t){return fr()}writeGeometry(e,t){return fr()}}function iB(n,e,t){const i=t?ks(t.featureProjection):null,r=t?ks(t.dataProjection):null;let o=n;if(i&&r&&!KA(i,r)){e&&(o=n.clone());const s=e?i:r,a=e?r:i;s.getUnits()==="tile-pixels"?o.transform(s,a):o.applyTransform(bC(s,a))}if(e&&t&&t.decimals!==void 0){const s=Math.pow(10,t.decimals),a=function(c){for(let f=0,y=c.length;f<y;++f)c[f]=Math.round(c[f]*s)/s;return c};o===n&&(o=n.clone()),o.applyTransform(a)}return o}const abe={Point:CC,LineString:xC,Polygon:U1,MultiPoint:o5,MultiLineString:J4,MultiPolygon:eM};function lbe(n,e,t){return Array.isArray(e[0])?(BJ(n,0,e,t)||(n=n.slice(),AD(n,0,e,t)),n):(gL(n,0,e,t)||(n=n.slice(),nE(n,0,e,t)),n)}function _ee(n,e){const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(o=>_ee({...n,geometry:o})).flat();const i=t.type==="MultiPolygon"?"Polygon":t.type;if(i==="GeometryCollection"||i==="Circle")throw new Error("Unsupported geometry type: "+i);const r=t.layout.length;return iB(new FA(i,i==="Polygon"?lbe(t.flatCoordinates,t.ends,r):t.flatCoordinates,t.ends?.flat(),r,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function NL(n,e){if(!n)return null;if(Array.isArray(n)){const i=n.map(r=>NL(r,e));return new uE(i)}const t=abe[n.type];return iB(new t(n.flatCoordinates,n.layout||"XY",n.ends),!1,e)}class ube extends Cee{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(tw(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(tw(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return fr()}readFeaturesFromObject(e,t){return fr()}readGeometry(e,t){return this.readGeometryFromObject(tw(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return fr()}readProjection(e){return this.readProjectionFromObject(tw(e))}readProjectionFromObject(e){return fr()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return fr()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return fr()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return fr()}}function tw(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class rN extends ube{constructor(e){e=e||{},super(),this.dataProjection=ks(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=ks(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let i=null;e.type==="Feature"?i=e:i={type:"Feature",geometry:e,properties:null};const r=GL(i.geometry);if(this.featureClass===FA)return _ee({geometry:r,id:i.id,properties:i.properties},t);const o=new tB;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&i.geometry_name&&o.setGeometryName(i.geometry_name),o.setGeometry(NL(r,t)),"id"in i&&o.setId(i.id),i.properties&&o.setProperties(i.properties,!0),o}readFeaturesFromObject(e,t){const i=e;let r=null;if(i.type==="FeatureCollection"){const o=e;r=[];const s=o.features;for(let a=0,c=s.length;a<c;++a){const f=this.readFeatureFromObject(s[a],t);f&&r.push(f)}}else r=[this.readFeatureFromObject(e,t)];return r.flat()}readGeometryFromObject(e,t){return cbe(e,t)}readProjectionFromObject(e){const t=e.crs;let i;if(t)if(t.type=="name")i=ks(t.properties.name);else if(t.type==="EPSG")i=ks("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(e,t){t=this.adaptOptions(t);const i={type:"Feature",geometry:null,properties:null},r=e.getId();if(r!==void 0&&(i.id=r),!e.hasProperties())return i;const o=e.getProperties(),s=e.getGeometry();return s&&(i.geometry=_D(s,t),delete o[e.getGeometryName()]),_v(o)||(i.properties=o),i}writeFeaturesObject(e,t){t=this.adaptOptions(t);const i=[];for(let r=0,o=e.length;r<o;++r)i.push(this.writeFeatureObject(e[r],t));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,t){return _D(e,this.adaptOptions(t))}}function GL(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=hbe(n);break}case"LineString":{t=dbe(n);break}case"Polygon":{t=gbe(n);break}case"MultiPoint":{t=pbe(n);break}case"MultiLineString":{t=fbe(n);break}case"MultiPolygon":{t=mbe(n);break}case"GeometryCollection":{t=Abe(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function cbe(n,e){const t=GL(n);return NL(t,e)}function Abe(n,e){return n.geometries.map(function(i){return GL(i)})}function hbe(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:PC(e.length)}}function dbe(n){const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:PC(e[0]?.length||2)}}function fbe(n){const e=n.coordinates,t=e[0]?.[0]?.length||2,i=[],r=JM(i,0,e,t);return{type:"MultiLineString",flatCoordinates:i,ends:r,layout:PC(t)}}function pbe(n){const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:PC(e[0]?.length||2)}}function mbe(n){const e=n.coordinates,t=[],i=e[0]?.[0]?.[0].length||2,r=_J(t,0,e,i);return{type:"MultiPolygon",flatCoordinates:t,ends:r,layout:PC(i)}}function gbe(n){const e=n.coordinates,t=[],i=e[0]?.[0]?.length,r=JM(t,0,e,i);return{type:"Polygon",flatCoordinates:t,ends:r,layout:PC(i)}}function _D(n,e){n=iB(n,!0,e);const t=n.getType();let i;switch(t){case"Point":{i=xbe(n);break}case"LineString":{i=vbe(n);break}case"Polygon":{i=Mbe(n,e);break}case"MultiPoint":{i=Cbe(n);break}case"MultiLineString":{i=bbe(n);break}case"MultiPolygon":{i=_be(n,e);break}case"GeometryCollection":{i=ybe(n,e);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return i}function ybe(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(i){return _D(i,e)})}}function vbe(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function bbe(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function Cbe(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function _be(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function xbe(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function Mbe(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}const xD=65536*65536,oN=1/xD,wbe=12,sN=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),v8=0,nw=1,A3=2,iw=5;class Sbe{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,i=this.length){for(;this.pos<i;){const r=this.readVarint(),o=r>>3,s=this.pos;this.type=r&7,e(o,t,this),this.pos===s&&this.skip(r)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*xD;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*xD;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let i,r;return r=t[this.pos++],i=r&127,r<128||(r=t[this.pos++],i|=(r&127)<<7,r<128)||(r=t[this.pos++],i|=(r&127)<<14,r<128)||(r=t[this.pos++],i|=(r&127)<<21,r<128)?i:(r=t[this.pos],i|=(r&15)<<28,Ebe(i,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=wbe&&sN?sN.decode(this.buf.subarray(t,e)):zbe(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===A3?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===v8)for(;this.buf[this.pos++]>127;);else if(t===A3)this.pos=this.readVarint()+this.pos;else if(t===iw)this.pos+=4;else if(t===nw)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.dataView=new DataView(i.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*oN),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*oN),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){Bbe(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=jbe(this.buf,e,this.pos);const i=this.pos-t;i>=128&&aN(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let i=0;i<t;i++)this.buf[this.pos++]=e[i]}writeRawMessage(e,t){this.pos++;const i=this.pos;e(t,this);const r=this.pos-i;r>=128&&aN(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r}writeMessage(e,t,i){this.writeTag(e,A3),this.writeRawMessage(t,i)}writePackedVarint(e,t){t.length&&this.writeMessage(e,Tbe,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,kbe,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,Pbe,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,Dbe,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,Rbe,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,Lbe,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,Ube,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,Kbe,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,Fbe,t)}writeBytesField(e,t){this.writeTag(e,A3),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,iw),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,iw),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,nw),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,nw),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,v8),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,v8),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,A3),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,iw),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,nw),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function Ebe(n,e,t){const i=t.buf;let r,o;if(o=i[t.pos++],r=(o&112)>>4,o<128||(o=i[t.pos++],r|=(o&127)<<3,o<128)||(o=i[t.pos++],r|=(o&127)<<10,o<128)||(o=i[t.pos++],r|=(o&127)<<17,o<128)||(o=i[t.pos++],r|=(o&127)<<24,o<128)||(o=i[t.pos++],r|=(o&1)<<31,o<128))return U_(n,r,e);throw new Error("Expected varint not more than 10 bytes")}function U_(n,e,t){return t?e*4294967296+(n>>>0):(e>>>0)*4294967296+(n>>>0)}function Bbe(n,e){let t,i;if(n>=0?(t=n%4294967296|0,i=n/4294967296|0):(t=~(-n%4294967296),i=~(-n/4294967296),t^4294967295?t=t+1|0:(t=0,i=i+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),Obe(t,i,e),Ibe(i,e)}function Obe(n,e,t){t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos]=n&127}function Ibe(n,e){const t=(n&7)<<4;e.buf[e.pos++]|=t|((n>>>=3)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127)))))}function aN(n,e,t){const i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(i);for(let r=t.pos-1;r>=n;r--)t.buf[r+i]=t.buf[r]}function Tbe(n,e){for(let t=0;t<n.length;t++)e.writeVarint(n[t])}function kbe(n,e){for(let t=0;t<n.length;t++)e.writeSVarint(n[t])}function Dbe(n,e){for(let t=0;t<n.length;t++)e.writeFloat(n[t])}function Rbe(n,e){for(let t=0;t<n.length;t++)e.writeDouble(n[t])}function Pbe(n,e){for(let t=0;t<n.length;t++)e.writeBoolean(n[t])}function Lbe(n,e){for(let t=0;t<n.length;t++)e.writeFixed32(n[t])}function Ube(n,e){for(let t=0;t<n.length;t++)e.writeSFixed32(n[t])}function Kbe(n,e){for(let t=0;t<n.length;t++)e.writeFixed64(n[t])}function Fbe(n,e){for(let t=0;t<n.length;t++)e.writeSFixed64(n[t])}function zbe(n,e,t){let i="",r=e;for(;r<t;){const o=n[r];let s=null,a=o>239?4:o>223?3:o>191?2:1;if(r+a>t)break;let c,f,y;a===1?o<128&&(s=o):a===2?(c=n[r+1],(c&192)===128&&(s=(o&31)<<6|c&63,s<=127&&(s=null))):a===3?(c=n[r+1],f=n[r+2],(c&192)===128&&(f&192)===128&&(s=(o&15)<<12|(c&63)<<6|f&63,(s<=2047||s>=55296&&s<=57343)&&(s=null))):a===4&&(c=n[r+1],f=n[r+2],y=n[r+3],(c&192)===128&&(f&192)===128&&(y&192)===128&&(s=(o&15)<<18|(c&63)<<12|(f&63)<<6|y&63,(s<=65535||s>=1114112)&&(s=null))),s===null?(s=65533,a=1):s>65535&&(s-=65536,i+=String.fromCharCode(s>>>10&1023|55296),s=56320|s&1023),i+=String.fromCharCode(s),r+=a}return i}function jbe(n,e,t){for(let i=0,r,o;i<e.length;i++){if(r=e.charCodeAt(i),r>55295&&r<57344)if(o)if(r<56320){n[t++]=239,n[t++]=191,n[t++]=189,o=r;continue}else r=o-55296<<10|r-56320|65536,o=null;else{r>56319||i+1===e.length?(n[t++]=239,n[t++]=191,n[t++]=189):o=r;continue}else o&&(n[t++]=239,n[t++]=191,n[t++]=189,o=null);r<128?n[t++]=r:(r<2048?n[t++]=r>>6|192:(r<65536?n[t++]=r>>12|224:(n[t++]=r>>18|240,n[t++]=r>>12&63|128),n[t++]=r>>6&63|128),n[t++]=r&63|128)}return t}class xee extends Cee{constructor(e){super(),e=e||{},this.dataProjection=new G6({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:FA,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,i,r){e.pos=t.geometry;const o=e.readVarint()+e.pos;let s=1,a=0,c=0,f=0,y=0,_=0;for(;e.pos<o;){if(!a){const E=e.readVarint();s=E&7,a=E>>3}if(a--,s===1||s===2)c+=e.readSVarint(),f+=e.readSVarint(),s===1&&y>_&&(r.push(y),_=y),i.push(c,f),y+=2;else if(s===7)y>_&&(i.push(i[_],i[_+1]),y+=2);else throw new Error("Invalid command found in the PBF")}y>_&&(r.push(y),_=y)}createFeature_(e,t,i){const r=t.type;if(r===0)return null;let o;const s=t.properties;let a;this.idProperty_?(a=s[this.idProperty_],delete s[this.idProperty_]):a=t.id,s[this.layerName_]=t.layer.name;const c=[],f=[];this.readRawGeometry_(e,t,c,f);const y=qbe(r,f.length);if(this.featureClass===FA)o=new this.featureClass(y,c,f,2,s,a),o.transform(i.dataProjection);else{let _;if(y=="Polygon"){const P=OJ(c,f);_=P.length>1?new eM(c,"XY",P):new U1(c,"XY",f)}else _=y==="Point"?new CC(c,"XY"):y==="LineString"?new xC(c,"XY"):y==="MultiPoint"?new o5(c,"XY"):y==="MultiLineString"?new J4(c,"XY",f):null;const E=this.featureClass;o=new E,this.geometryName_&&o.setGeometryName(this.geometryName_);const I=iB(_,!1,i);o.setGeometry(I),a!==void 0&&o.setId(a),o.setProperties(s,!0)}return o}getType(){return"arraybuffer"}readFeatures(e,t){const i=this.layers_;t=this.adaptOptions(t);const r=ks(t.dataProjection);r.setWorldExtent(t.extent),t.dataProjection=r;const o=new Sbe(e),s=o.readFields(Nbe,{}),a=[];for(const c in s){if(i&&!i.includes(c))continue;const f=s[c],y=f?[0,0,f.extent,f.extent]:null;r.setExtent(y);for(let _=0,E=f.length;_<E;++_){const I=Qbe(o,f,_),P=this.createFeature_(o,I,t);P!==null&&a.push(P)}}return a}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function Nbe(n,e,t){if(n===3){const i={keys:[],values:[],features:[]},r=t.readVarint()+t.pos;t.readFields(Gbe,i,r),i.length=i.features.length,i.length&&(e[i.name]=i)}}function Gbe(n,e,t){if(n===15)e.version=t.readVarint();else if(n===1)e.name=t.readString();else if(n===5)e.extent=t.readVarint();else if(n===2)e.features.push(t.pos);else if(n===3)e.keys.push(t.readString());else if(n===4){let i=null;const r=t.readVarint()+t.pos;for(;t.pos<r;)n=t.readVarint()>>3,i=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null;e.values.push(i)}}function Wbe(n,e,t){if(n==1)e.id=t.readVarint();else if(n==2){const i=t.readVarint()+t.pos;for(;t.pos<i;){const r=e.layer.keys[t.readVarint()],o=e.layer.values[t.readVarint()];e.properties[r]=o}}else n==3?e.type=t.readVarint():n==4&&(e.geometry=t.pos)}function Qbe(n,e,t){n.pos=e.features[t];const i=n.readVarint()+n.pos,r={layer:e,type:0,properties:{}};return n.readFields(Wbe,r,i),r}function qbe(n,e){let t;return n===1?t=e===1?"Point":"MultiPoint":n===2?t=e===1?"LineString":"MultiLineString":n===3&&(t="Polygon"),t}class Ybe extends LL{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],i=e.pixelRatio,r=e.viewState,o=r.resolution,s=this.getLayer().getSource(),a=e.viewHints;let c=e.extent;if(t.extent!==void 0&&(c=Pm(c,Jg(t.extent,r.projection))),!a[Qa.ANIMATING]&&!a[Qa.INTERACTING]&&!DC(c))if(s){const f=r.projection,y=s.getImage(c,o,i,f);y&&(this.loadImage(y)?this.image=y:y.getState()===Bi.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=Cu(t.pixelToCoordinateTransform,e.slice()),o=i.getExtent();if(o&&!vC(o,r))return null;const s=this.image.getExtent(),a=this.image.getImage(),c=Go(s),f=Math.floor(a.width*((r[0]-s[0])/c));if(f<0||f>=a.width)return null;const y=Mu(s),_=Math.floor(a.height*((s[3]-r[1])/y));return _<0||_>=a.height?null:this.getImageData(a,f,_)}renderFrame(e,t){const i=this.image,r=i.getExtent(),o=i.getResolution(),[s,a]=Array.isArray(o)?o:[o,o],c=i.getPixelRatio(),f=e.layerStatesArray[e.layerIndex],y=e.pixelRatio,_=e.viewState,E=_.center,I=_.resolution,P=y*s/(I*c),K=y*a/(I*c);this.prepareContainer(e,t);const z=this.context.canvas.width,Q=this.context.canvas.height,V=this.getRenderContext(e);let $=!1,Z=!0;if(f.extent){const ue=Jg(f.extent,_.projection);Z=wl(ue,e.extent),$=Z&&!Xg(ue,e.extent),$&&this.clipUnrotated(V,e,ue)}const ee=i.getImage(),X=p0(this.tempTransform,z/2,Q/2,P,K,0,c*(r[0]-E[0])/s,c*(E[1]-r[3])/a);this.renderedResolution=a*y/c;const W=ee.width*X[0],se=ee.height*X[3];if(this.getLayer().getSource().getInterpolate()||(V.imageSmoothingEnabled=!1),this.preRender(V,e),Z&&W>=.5&&se>=.5){const ue=X[4],ve=X[5],ye=f.opacity;ye!==1&&(V.save(),V.globalAlpha=ye),V.drawImage(ee,0,0,+ee.width,+ee.height,ue,ve,W,se),ye!==1&&V.restore()}return this.postRender(this.context,e),$&&V.restore(),V.imageSmoothingEnabled=!0,this.container}}class Vbe extends T2{constructor(e){e=e||{},super(e)}}class Mee extends Vbe{constructor(e){super(e)}createRenderer(){return new Ybe(this)}getData(e){return super.getData(e)}}function MD(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}const $be=new Error("disposed"),Hbe=[256,256];class lN extends a5{constructor(e){const t=Hn.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=MD(this.data_);return e?[e.width,e.height]:Hbe}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==Hn.IDLE&&this.state!==Hn.ERROR)return;this.state=Hn.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=Hn.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=Hn.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort($be),this.controller_=null),super.disposeInternal()}}let b8;const Kx=[];function uN(n,e,t,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,r)),n.restore()}function C8(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function Zbe(){if(b8===void 0){const n=Al(6,6,Kx);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",uN(n,4,5,4,0),uN(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;b8=C8(e,0)||C8(e,4)||C8(e,8),e5(n),Kx.push(n.canvas)}return b8}function wD(n,e,t,i){const r=q6(t,e,n);let o=sD(e,i,t);const s=e.getMetersPerUnit();s!==void 0&&(o*=s);const a=n.getMetersPerUnit();a!==void 0&&(o/=a);const c=n.getExtent();if(!c||vC(c,r)){const f=sD(n,o,r)/o;isFinite(f)&&f>0&&(o/=f)}return o}function Xbe(n,e,t,i){const r=vf(t);let o=wD(n,e,r,i);return(!isFinite(o)||o<=0)&&iJ(t,function(s){return o=wD(n,e,s,i),isFinite(o)&&o>0}),o}function wee(n,e,t,i,r,o,s,a,c,f,y,_,E,I){const P=Al(Math.round(t*n),Math.round(t*e),Kx);if(_||(P.imageSmoothingEnabled=!1),c.length===0)return P.canvas;P.scale(t,t);function K(ee){return Math.round(ee*t)/t}P.globalCompositeOperation="lighter";const z=xp();c.forEach(function(ee,X,W){tJ(z,ee.extent)});let Q;const V=t/i,$=(_?1:1+Math.pow(2,-24))/V;(!E||c.length!==1||f!==0)&&(Q=Al(Math.round(Go(z)*V),Math.round(Mu(z)*V),Kx),_||(Q.imageSmoothingEnabled=!1),c.forEach(function(ee,X,W){if(ee.image.width>0&&ee.image.height>0){if(ee.clipExtent){Q.save();const Ee=(ee.clipExtent[0]-z[0])*V,_e=-(ee.clipExtent[3]-z[3])*V,Be=Go(ee.clipExtent)*V,Fe=Mu(ee.clipExtent)*V;Q.rect(_?Ee:Math.round(Ee),_?_e:Math.round(_e),_?Be:Math.round(Ee+Be)-Math.round(Ee),_?Fe:Math.round(_e+Fe)-Math.round(_e)),Q.clip()}const se=(ee.extent[0]-z[0])*V,ue=-(ee.extent[3]-z[3])*V,ve=Go(ee.extent)*V,ye=Mu(ee.extent)*V;Q.drawImage(ee.image,f,f,ee.image.width-2*f,ee.image.height-2*f,_?se:Math.round(se),_?ue:Math.round(ue),_?ve:Math.round(se+ve)-Math.round(se),_?ye:Math.round(ue+ye)-Math.round(ue)),ee.clipExtent&&Q.restore()}}));const Z=j1(s);return a.getTriangles().forEach(function(ee,X,W){const se=ee.source,ue=ee.target;let ve=se[0][0],ye=se[0][1],Ee=se[1][0],_e=se[1][1],Be=se[2][0],Fe=se[2][1];const Se=K((ue[0][0]-Z[0])/o),qe=K(-(ue[0][1]-Z[1])/o),ut=K((ue[1][0]-Z[0])/o),ht=K(-(ue[1][1]-Z[1])/o),De=K((ue[2][0]-Z[0])/o),Ie=K(-(ue[2][1]-Z[1])/o),ze=ve,Te=ye;ve=0,ye=0,Ee-=ze,_e-=Te,Be-=ze,Fe-=Te;const vt=[[Ee,_e,0,0,ut-Se],[Be,Fe,0,0,De-Se],[0,0,Ee,_e,ht-qe],[0,0,Be,Fe,Ie-qe]],st=qge(vt);if(!st)return;if(P.save(),P.beginPath(),Zbe()||!_){P.moveTo(ut,ht);const Pt=4,ke=Se-ut,Oe=qe-ht;for(let we=0;we<Pt;we++)P.lineTo(ut+K((we+1)*ke/Pt),ht+K(we*Oe/(Pt-1))),we!=Pt-1&&P.lineTo(ut+K((we+1)*ke/Pt),ht+K((we+1)*Oe/(Pt-1)));P.lineTo(De,Ie)}else P.moveTo(ut,ht),P.lineTo(Se,qe),P.lineTo(De,Ie);P.clip(),P.transform(st[0],st[2],st[1],st[3],Se,qe),P.translate(z[0]-ze,z[3]-Te);let Et;if(Q)Et=Q.canvas,P.scale($,-$);else{const Pt=c[0],ke=Pt.extent;Et=Pt.image,P.scale(Go(ke)/Et.width,-Mu(ke)/Et.height)}P.drawImage(Et,0,0),P.restore()}),Q&&(e5(Q),Kx.push(Q.canvas)),y&&(P.save(),P.globalCompositeOperation="source-over",P.strokeStyle="black",P.lineWidth=1,a.getTriangles().forEach(function(ee,X,W){const se=ee.target,ue=(se[0][0]-Z[0])/o,ve=-(se[0][1]-Z[1])/o,ye=(se[1][0]-Z[0])/o,Ee=-(se[1][1]-Z[1])/o,_e=(se[2][0]-Z[0])/o,Be=-(se[2][1]-Z[1])/o;P.beginPath(),P.moveTo(ye,Ee),P.lineTo(ue,ve),P.lineTo(_e,Be),P.closePath(),P.stroke()}),P.restore()),P.canvas}const Jbe=10,cN=.25;class See{constructor(e,t,i,r,o,s,a){this.sourceProj_=e,this.targetProj_=t;let c={};const f=a?D0e($=>Cu(a,q6($,this.targetProj_,this.sourceProj_))):bC(this.targetProj_,this.sourceProj_);this.transformInv_=function($){const Z=$[0]+"/"+$[1];return c[Z]||(c[Z]=f($)),c[Z]},this.maxSourceExtent_=r,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&Go(r)>=Go(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Go(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Go(this.targetProj_.getExtent()):null;const y=j1(i),_=N6(i),E=j6(i),I=z6(i),P=this.transformInv_(y),K=this.transformInv_(_),z=this.transformInv_(E),Q=this.transformInv_(I),V=Jbe+(s?Math.max(0,Math.ceil(Math.log2(nD(i)/(s*s*256*256)))):0);if(this.addQuad_(y,_,E,I,P,K,z,Q,V),this.wrapsXInSource_){let $=1/0;this.triangles_.forEach(function(Z,ee,X){$=Math.min($,Z.source[0][0],Z.source[1][0],Z.source[2][0])}),this.triangles_.forEach(Z=>{if(Math.max(Z.source[0][0],Z.source[1][0],Z.source[2][0])-$>this.sourceWorldWidth_/2){const ee=[[Z.source[0][0],Z.source[0][1]],[Z.source[1][0],Z.source[1][1]],[Z.source[2][0],Z.source[2][1]]];ee[0][0]-$>this.sourceWorldWidth_/2&&(ee[0][0]-=this.sourceWorldWidth_),ee[1][0]-$>this.sourceWorldWidth_/2&&(ee[1][0]-=this.sourceWorldWidth_),ee[2][0]-$>this.sourceWorldWidth_/2&&(ee[2][0]-=this.sourceWorldWidth_);const X=Math.min(ee[0][0],ee[1][0],ee[2][0]);Math.max(ee[0][0],ee[1][0],ee[2][0])-X<this.sourceWorldWidth_/2&&(Z.source=ee)}})}c={}}addTriangle_(e,t,i,r,o,s){this.triangles_.push({source:[r,o,s],target:[e,t,i]})}addQuad_(e,t,i,r,o,s,a,c,f){const y=eD([o,s,a,c]),_=this.sourceWorldWidth_?Go(y)/this.sourceWorldWidth_:null,E=this.sourceWorldWidth_,I=this.sourceProj_.canWrapX()&&_>.5&&_<1;let P=!1;if(f>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const z=eD([e,t,i,r]);P=Go(z)/this.targetWorldWidth_>cN||P}!I&&this.sourceProj_.isGlobal()&&_&&(P=_>cN||P)}if(!P&&this.maxSourceExtent_&&isFinite(y[0])&&isFinite(y[1])&&isFinite(y[2])&&isFinite(y[3])&&!wl(y,this.maxSourceExtent_))return;let K=0;if(!P&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(c[0])||!isFinite(c[1]))){if(f>0)P=!0;else if(K=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(s[0])||!isFinite(s[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(c[0])||!isFinite(c[1])?1:0),K!=1&&K!=2&&K!=4&&K!=8)return}if(f>0){if(!P){const z=[(e[0]+i[0])/2,(e[1]+i[1])/2],Q=this.transformInv_(z);let V;I?V=(cC(o[0],E)+cC(a[0],E))/2-cC(Q[0],E):V=(o[0]+a[0])/2-Q[0];const $=(o[1]+a[1])/2-Q[1];P=V*V+$*$>this.errorThresholdSquared_}if(P){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const z=[(t[0]+i[0])/2,(t[1]+i[1])/2],Q=this.transformInv_(z),V=[(r[0]+e[0])/2,(r[1]+e[1])/2],$=this.transformInv_(V);this.addQuad_(e,t,z,V,o,s,Q,$,f-1),this.addQuad_(V,z,i,r,$,Q,a,c,f-1)}else{const z=[(e[0]+t[0])/2,(e[1]+t[1])/2],Q=this.transformInv_(z),V=[(i[0]+r[0])/2,(i[1]+r[1])/2],$=this.transformInv_(V);this.addQuad_(e,z,V,r,o,Q,$,c,f-1),this.addQuad_(z,t,i,V,Q,s,a,$,f-1)}return}}if(I){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(K&11)==0&&this.addTriangle_(e,i,r,o,a,c),(K&14)==0&&this.addTriangle_(e,i,t,o,a,s),K&&((K&13)==0&&this.addTriangle_(t,r,e,s,c,o),(K&7)==0&&this.addTriangle_(t,r,i,s,c,a))}calculateSourceExtent(){const e=xp();return this.triangles_.forEach(function(t,i,r){const o=t.source;o4(e,o[0]),o4(e,o[1]),o4(e,o[2])}),e}getTriangles(){return this.triangles_}}const Eee=.5;class Bee extends a5{constructor(e,t,i,r,o,s,a,c,f,y,_,E){super(o,Hn.IDLE,E),this.renderEdges_=_!==void 0?_:!1,this.pixelRatio_=a,this.gutter_=c,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=s||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const I=r.getTileCoordExtent(this.wrappedTileCoord_),P=this.targetTileGrid_.getExtent();let K=this.sourceTileGrid_.getExtent();const z=P?Pm(I,P):I;if(nD(z)===0){this.state=Hn.EMPTY;return}const Q=e.getExtent();Q&&(K?K=Pm(K,Q):K=Q);const V=r.getResolution(this.wrappedTileCoord_[0]),$=Xbe(e,i,z,V);if(!isFinite($)||$<=0){this.state=Hn.EMPTY;return}const Z=y!==void 0?y:Eee;if(this.triangulation_=new See(e,i,z,K,$*Z,V),this.triangulation_.getTriangles().length===0){this.state=Hn.EMPTY;return}this.sourceZ_=t.getZForResolution($);let ee=this.triangulation_.calculateSourceExtent();if(K&&(e.canWrapX()?(ee[1]=cl(ee[1],K[1],K[3]),ee[3]=cl(ee[3],K[1],K[3])):ee=Pm(ee,K)),!nD(ee))this.state=Hn.EMPTY;else{let X=0,W=0;e.canWrapX()&&(X=Go(Q),W=Math.floor((ee[0]-Q[0])/X)),aJ(ee.slice(),e,!0).forEach(ue=>{const ve=t.getTileRangeForExtentAndZ(ue,this.sourceZ_);for(let ye=ve.minX;ye<=ve.maxX;ye++)for(let Ee=ve.minY;Ee<=ve.maxY;Ee++){const _e=f(this.sourceZ_,ye,Ee,a);if(_e){const Be=W*X;this.sourceTiles_.push({tile:_e,offset:Be})}}++W}),this.sourceTiles_.length===0&&(this.state=Hn.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{const i=t.tile;if(i&&i.getState()==Hn.LOADED){const r=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);r[0]+=t.offset,r[2]+=t.offset;const o=this.clipExtent_?.slice();o&&(o[0]+=t.offset,o[2]+=t.offset),e.push({extent:r,clipExtent:o,image:i.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=Hn.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),r=typeof i=="number"?i:i[0],o=typeof i=="number"?i:i[1],s=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=wee(r,o,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),s,c,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Hn.LOADED}this.changed()}load(){if(this.state==Hn.IDLE){this.state=Hn.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const i=t.getState();if(i==Hn.IDLE||i==Hn.LOADING){e++;const r=Ro(t,cr.CHANGE,o=>{const s=t.getState();(s==Hn.LOADED||s==Hn.ERROR||s==Hn.EMPTY)&&(fa(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},i,r){t.getState()==Hn.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(fa),this.sourcesListenerKeys_=null}release(){this.canvas_&&(e5(this.canvas_.getContext("2d")),Kx.push(this.canvas_),this.canvas_=null),super.release()}}class AN{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof YM&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return xs(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return xs(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){xs(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}function pE(n,e,t,i){return i!==void 0?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function eCe(n,e,t){return n+"/"+e+"/"+t}function aS(n,e,t,i,r){return`${Br(n)},${e},${eCe(t,i,r)}`}function tCe(n){return nCe(n[0],n[1],n[2])}function nCe(n,e,t){return(e<<n)+t}function iCe(n,e){const t=n[0],i=n[1],r=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const o=e.getFullTileRange(t);return o?o.containsXY(i,r):!0}function _8(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const i=n[t],r=i.has(e);return r||i.add(e),!r}function rCe(n,e,t){const i=n[t];return i?i.delete(e):!1}function hN(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=Pm(e,Jg(t.extent,n.viewState.projection)));const i=t.layer.getRenderSource();if(!i.getWrapX()){const r=i.getTileGridForProjection(n.viewState.projection).getExtent();r&&(e=Pm(e,r))}return e}class Oee extends LL{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=xp(),this.tempTileRange_=new KL(0,0,0,0),this.tempTileCoord_=pE(0,0,0);const i=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new AN(i),this.sourceTileCache_=null,this.maxStaleKeys=i*.5}getTileCache(){return this.tileCache_}getSourceTileCache(){return this.sourceTileCache_||(this.sourceTileCache_=new AN(512)),this.sourceTileCache_}getOrCreateTile(e,t,i,r){const o=this.tileCache_,a=this.getLayer().getSource(),c=aS(a,a.getKey(),e,t,i);let f;if(o.containsKey(c))f=o.get(c);else{const y=r.viewState.projection,_=a.getProjection();if(f=a.getTile(e,t,i,r.pixelRatio,y,!_||KA(_,y)?void 0:this.getSourceTileCache()),!f)return null;o.set(c,f)}return f}getTile(e,t,i,r){const o=this.getOrCreateTile(e,t,i,r);return o||null}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=Cu(t.pixelToCoordinateTransform,e.slice()),o=i.getExtent();if(o&&!vC(o,r))return null;const s=t.viewState,a=i.getRenderSource(),c=a.getTileGridForProjection(s.projection),f=a.getTilePixelRatio(t.pixelRatio);for(let y=c.getZForResolution(s.resolution);y>=c.getMinZoom();--y){const _=c.getTileCoordForCoordAndZ(r,y),E=this.getTile(y,_[1],_[2],t);if(!E||E.getState()!==Hn.LOADED)continue;const I=c.getOrigin(y),P=NA(c.getTileSize(y)),K=c.getResolution(y);let z;if(E instanceof fee||E instanceof Bee)z=E.getImage();else if(E instanceof lN){if(z=MD(E.getData()),!z)continue}else continue;const Q=Math.floor(f*((r[0]-I[0])/K-_[1]*P[0])),V=Math.floor(f*((I[1]-r[1])/K-_[2]*P[1])),$=Math.round(f*a.getGutterForProjection(s.projection));return this.getImageData(z,Q+$,V+$)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const i=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==i&&(this.renderedSourceRevision_=i,this.renderedSourceKey_===t.getKey()&&(this.tileCache_.clear(),this.sourceTileCache_?.clear())):this.renderedSourceRevision_=i,!0}enqueueTilesForNextExtent(){return!0}enqueueTiles(e,t,i,r,o){const s=e.viewState,a=this.getLayer(),c=a.getRenderSource(),f=c.getTileGridForProjection(s.projection),y=Br(c);y in e.wantedTiles||(e.wantedTiles[y]={});const _=e.wantedTiles[y],E=a.getMapInternal(),I=Math.max(i-o,f.getMinZoom(),f.getZForResolution(Math.min(a.getMaxResolution(),E?E.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):f.getResolution(0)),c.zDirection)),P=s.rotation,K=P?rJ(s.center,s.resolution,P,e.size):void 0;for(let z=i;z>=I;--z){const Q=f.getTileRangeForExtentAndZ(t,z,this.tempTileRange_),V=f.getResolution(z);for(let $=Q.minX;$<=Q.maxX;++$)for(let Z=Q.minY;Z<=Q.maxY;++Z){if(P&&!f.tileCoordIntersectsViewport([z,$,Z],K))continue;const ee=this.getTile(z,$,Z,e);if(!ee||!_8(r,ee,z))continue;const W=ee.getKey();if(_[W]=!0,ee.getState()===Hn.IDLE&&!e.tileQueue.isKeyQueued(W)){const se=pE(z,$,Z,this.tempTileCoord_);e.tileQueue.enqueue([ee,y,f.getTileCoordCenter(se),V])}}}}findStaleTile_(e,t){const i=this.tileCache_,r=e[0],o=e[1],s=e[2],a=this.getStaleKeys();for(let c=0;c<a.length;++c){const f=aS(this.getLayer().getSource(),a[c],r,o,s);if(i.containsKey(f)){const y=i.peek(f);if(y.getState()===Hn.LOADED)return y.endTransition(Br(this)),_8(t,y,r),!0}}return!1}findAltTiles_(e,t,i,r){const o=e.getTileRangeForTileCoordAndZ(t,i,this.tempTileRange_);if(!o)return!1;let s=!0;const a=this.tileCache_,c=this.getLayer().getRenderSource(),f=c.getKey();for(let y=o.minX;y<=o.maxX;++y)for(let _=o.minY;_<=o.maxY;++_){const E=aS(c,f,i,y,_);let I=!1;if(a.containsKey(E)){const P=a.peek(E);P.getState()===Hn.LOADED&&(_8(r,P,i),I=!0)}I||(s=!1)}return s}renderFrame(e,t){this.renderComplete=!0;const i=e.layerStatesArray[e.layerIndex],r=e.viewState,o=r.projection,s=r.resolution,a=r.center,c=e.pixelRatio,f=this.getLayer(),y=f.getSource(),_=y.getTileGridForProjection(o),E=_.getZForResolution(s,y.zDirection),I=_.getResolution(E),P=y.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==P&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=P):this.renderedSourceKey_=P;let K=e.extent;const z=y.getTilePixelRatio(c);this.prepareContainer(e,t);const Q=this.context.canvas.width,V=this.context.canvas.height,$=i.extent&&Jg(i.extent);$&&(K=Pm(K,Jg(i.extent)));const Z=I*Q/2/z,ee=I*V/2/z,X=[a[0]-Z,a[1]-ee,a[0]+Z,a[1]+ee],W={};this.renderedTiles.length=0;const se=f.getPreload();if(e.nextExtent&&this.enqueueTilesForNextExtent()){const ut=_.getZForResolution(r.nextResolution,y.zDirection),ht=hN(e,e.nextExtent);this.enqueueTiles(e,ht,ut,W,se)}const ue=hN(e,K);if(this.enqueueTiles(e,ue,E,W,0),se>0&&setTimeout(()=>{this.enqueueTiles(e,ue,E-1,W,se-1)},0),!(E in W))return this.container;const ve=Br(this),ye=e.time;for(const ut of W[E]){const ht=ut.getState();if(ht===Hn.EMPTY)continue;const De=ut.tileCoord;if(ht===Hn.LOADED&&ut.getAlpha(ve,ye)===1){ut.endTransition(ve);continue}if(ht!==Hn.ERROR&&(this.renderComplete=!1),this.findStaleTile_(De,W)){rCe(W,ut,E),e.animate=!0;continue}if(this.findAltTiles_(_,De,E+1,W))continue;const Te=_.getMinZoom();for(let vt=E-1;vt>=Te&&!this.findAltTiles_(_,De,vt,W);--vt);}const Ee=I/s*c/z,_e=this.getRenderContext(e);p0(this.tempTransform,Q/2,V/2,Ee,Ee,0,-Q/2,-V/2),i.extent&&this.clipUnrotated(_e,e,$),y.getInterpolate()||(_e.imageSmoothingEnabled=!1),this.preRender(_e,e);const Be=Object.keys(W).map(Number);Be.sort(A0);let Fe;const Se=[],qe=[];for(let ut=Be.length-1;ut>=0;--ut){const ht=Be[ut],De=y.getTilePixelSize(ht,c,o),ze=_.getResolution(ht)/I,Te=De[0]*ze*Ee,vt=De[1]*ze*Ee,st=_.getTileCoordForCoordAndZ(j1(X),ht),Et=_.getTileCoordExtent(st),Pt=Cu(this.tempTransform,[z*(Et[0]-X[0])/I,z*(X[3]-Et[3])/I]),ke=z*y.getGutterForProjection(o);for(const Oe of W[ht]){if(Oe.getState()!==Hn.LOADED)continue;const we=Oe.tileCoord,Ye=st[1]-we[1],ft=Math.round(Pt[0]-(Ye-1)*Te),dt=st[2]-we[2],gt=Math.round(Pt[1]-(dt-1)*vt),Lt=Math.round(Pt[0]-Ye*Te),Tt=Math.round(Pt[1]-dt*vt),Zt=ft-Lt,Fn=gt-Tt,Ln=Be.length===1;let fi=!1;Fe=[Lt,Tt,Lt+Zt,Tt,Lt+Zt,Tt+Fn,Lt,Tt+Fn];for(let Rn=0,Dn=Se.length;Rn<Dn;++Rn)if(!Ln&&ht<qe[Rn]){const wn=Se[Rn];wl([Lt,Tt,Lt+Zt,Tt+Fn],[wn[0],wn[3],wn[4],wn[7]])&&(fi||(_e.save(),fi=!0),_e.beginPath(),_e.moveTo(Fe[0],Fe[1]),_e.lineTo(Fe[2],Fe[3]),_e.lineTo(Fe[4],Fe[5]),_e.lineTo(Fe[6],Fe[7]),_e.moveTo(wn[6],wn[7]),_e.lineTo(wn[4],wn[5]),_e.lineTo(wn[2],wn[3]),_e.lineTo(wn[0],wn[1]),_e.clip())}Se.push(Fe),qe.push(ht),this.drawTile(Oe,e,Lt,Tt,Zt,Fn,ke,Ln),fi&&_e.restore(),this.renderedTiles.unshift(Oe),this.updateUsedTiles(e.usedTiles,y,Oe)}}if(this.renderedResolution=I,this.extentChanged=!this.renderedExtent_||!L1(this.renderedExtent_,X),this.renderedExtent_=X,this.renderedPixelRatio=c,this.postRender(this.context,e),i.extent&&_e.restore(),_e.imageSmoothingEnabled=!0,this.renderComplete){const ut=(ht,De)=>{const Ie=Br(y),ze=De.wantedTiles[Ie],Te=ze?Object.keys(ze).length:0;this.updateCacheSize(Te),this.tileCache_.expireCache(),this.sourceTileCache_?.expireCache()};e.postRenderFunctions.push(ut)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,i,r,o,s,a,c){let f;if(e instanceof lN){if(f=MD(e.getData()),!f)throw new Error("Rendering array data is not yet supported")}else f=this.getTileImage(e);if(!f)return;const y=this.getRenderContext(t),_=Br(this),E=t.layerStatesArray[t.layerIndex],I=E.opacity*(c?e.getAlpha(_,t.time):1),P=I!==y.globalAlpha;P&&(y.save(),y.globalAlpha=I),y.drawImage(f,a,a,f.width-2*a,f.height-2*a,i,r,o,s),P&&y.restore(),I!==E.opacity?t.animate=!0:c&&e.endTransition(_)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,i){const r=Br(t);r in e||(e[r]={}),e[r][i.getKey()]=!0}}const cv={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class oCe extends T2{constructor(e){e=e||{};const t=Object.assign({},e),i=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(cv.PRELOAD)}setPreload(e){this.set(cv.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(cv.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(cv.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class Iee extends oCe{constructor(e){super(e)}createRenderer(){return new Oee(this,{cacheSize:this.getCacheSize()})}}const sCe={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},dN={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class aCe extends Oee{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=fd(),this.tileClipContexts_=null}enqueueTilesForNextExtent(){return this.getLayer().getRenderMode()!=="vector"}drawTile(e,t,i,r,o,s,a,c){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,i,r,o,s,a,c)}getTile(e,t,i,r){const o=this.getOrCreateTile(e,t,i,r);if(!o)return null;const s=r.viewState,a=s.resolution,c=r.viewHints,f=this.getLayer().getSource(),y=f.getTileGridForProjection(s.projection),_=!(c[Qa.ANIMATING]||c[Qa.INTERACTING]),E=y.getZForResolution(a,f.zDirection)===e;return _&&E?o.wantedResolution=a:o.wantedResolution||(o.wantedResolution=y.getResolution(e)),o}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,i){const r=this.getLayer(),o=r.getRevision(),s=r.getRenderOrder()||null,a=e.wantedResolution,c=e.getReplayState(r);if(!c.dirty&&c.renderedResolution===a&&c.renderedRevision==o&&c.renderedRenderOrder==s)return;const f=r.getSource(),y=!!r.getDeclutter(),_=f.getTileGrid(),I=f.getTileGridForProjection(i).getTileCoordExtent(e.wrappedTileCoord),P=f.getSourceTiles(t,i,e),K=Br(r);delete e.hitDetectionImageData[K],e.executorGroups[K]=[],c.dirty=!1;for(let z=0,Q=P.length;z<Q;++z){const V=P[z];if(V.getState()!=Hn.LOADED)continue;const $=f.getProjection(),Z=V.tileCoord;let ee=_.getTileCoordExtent(Z);i&&$&&!KA(i,$)&&(ee=rS(ee,$,i,32));const X=Pm(I,ee),W=yv(X,r.getRenderBuffer()*a,this.tempExtent),se=L1(ee,X)?null:W,ue=new cee(0,X,a,t),ve=vD(a,t),ye=function(Se,qe){let ut;const ht=Se.getStyleFunction()||r.getStyleFunction();if(ht&&(ut=ht(Se,a)),ut){const De=this.renderFeature(Se,ve,ut,ue,y,qe);c.dirty=c.dirty||De}},Ee=V.getFeatures();s&&s!==c.renderedRenderOrder&&Ee.sort(s);for(let Se=0,qe=Ee.length;Se<qe;++Se){let ut=Ee[Se];i&&V.projection&&!KA(i,V.projection)&&(ut=ut.clone(),ut.getGeometry().applyTransform(bC(V.projection,i))),(!se||wl(se,ut.getGeometry().getExtent()))&&ye.call(this,ut,Se)}const _e=ue.finish(),Be=r.getRenderMode()!=="vector"&&y&&P.length===1?null:X,Fe=new Aee(Be,a,t,f.getOverlaps(),_e,r.getRenderBuffer(),!0);e.executorGroups[K].push(Fe)}c.renderedRevision=o,c.renderedRenderOrder=s,c.renderedResolution=a}forEachFeatureAtCoordinate(e,t,i,r,o){const s=t.viewState.resolution,a=t.viewState.rotation;i=i??0;const c=this.getLayer(),y=c.getSource().getTileGridForProjection(t.viewState.projection),_=eD([e]);yv(_,s*i,_);const E={},I=function($,Z,ee){let X=$.getId();X===void 0&&(X=Br($));const W=E[X];if(W){if(W!==!0&&ee<W.distanceSq){if(ee===0)return E[X]=!0,o.splice(o.lastIndexOf(W),1),r($,c,Z);W.geometry=Z,W.distanceSq=ee}}else{if(ee===0)return E[X]=!0,r($,c,Z);o.push(E[X]={feature:$,layer:c,geometry:Z,distanceSq:ee,callback:r})}},P=this.renderedTiles,K=Br(c),z=c.getDeclutter(),Q=z?t.declutter?.[z]?.all().map($=>$.value):null;let V;e:for(let $=0,Z=P.length;$<Z;++$){const ee=P[$],X=y.getTileCoordExtent(ee.wrappedTileCoord);if(!wl(X,_))continue;const W=ee.executorGroups[K];for(let se=0,ue=W.length;se<ue;++se)if(V=W[se].forEachFeatureAtCoordinate(e,s,a,i,I,Q),V)break e}return V}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,i)=>{const r=this.getLayer(),o=r.getSource(),s=this.renderedProjection,a=s.getExtent(),c=this.renderedResolution,f=o.getTileGridForProjection(s),y=Cu(this.renderedPixelToCoordinateTransform_,e.slice()),_=f.getTileCoordForCoordAndResolution(y,c).toString(),E=this.renderedTiles.find($=>$.tileCoord.toString()===_&&$.getState()===Hn.LOADED);if(!E||E.loadingSourceTiles>0){t([]);return}o.getWrapX()&&s.canWrapX()&&!Xg(a,f.getTileCoordExtent(E.tileCoord))&&tL(y,s);const I=Br(r),P=f.getTileCoordExtent(E.wrappedTileCoord),K=j1(P),z=[(y[0]-K[0])/c,(K[1]-y[1])/c],Q=E.getSourceTiles().reduce(($,Z)=>$.concat(Z.getFeatures()),[]);let V=E.hitDetectionImageData[I];if(!V){const $=NA(f.getTileSize(f.getZForResolution(c,o.zDirection))),Z=this.renderedRotation_,ee=[this.getRenderTransform(f.getTileCoordCenter(E.wrappedTileCoord),c,0,hf,$[0]*hf,$[1]*hf,0)];V=hee($,ee,Q,r.getStyleFunction(),f.getTileCoordExtent(E.wrappedTileCoord),E.getReplayState(r).renderedResolution,Z),E.hitDetectionImageData[I]=V}t(dee(z,Q,V))})}getFeaturesInExtent(e){const t=[],i=this.getTileCache();if(i.getCount()===0)return t;const o=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),s=o.getZForResolution(this.renderedResolution),a={};return i.forEach(c=>{if(c.tileCoord[0]!==s||c.getState()!==Hn.LOADED)return;const f=c.getSourceTiles();for(let y=0,_=f.length;y<_;++y){const E=f[y],I=E.getKey();if(I in a)continue;a[I]=!0;const P=E.tileCoord;if(wl(e,o.getTileCoordExtent(P))){const K=E.getFeatures();if(K)for(let z=0,Q=K.length;z<Q;++z){const V=K[z],$=V.getGeometry();wl(e,$.getExtent())&&t.push(V)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){const i=this.context,r=i.globalAlpha;i.globalAlpha=t.opacity;const o=e.viewHints,s=!(o[Qa.ANIMATING]||o[Qa.INTERACTING]),a=[this.context.canvas.width,this.context.canvas.height],c=this.getLayer().getDeclutter(),f=c?e.declutter?.[c]:void 0,y=Br(this.getLayer()),_=this.renderedTiles;for(let E=0,I=_.length;E<I;++E){const P=_[E],K=P.executorGroups[y];if(K)for(let z=K.length-1;z>=0;--z)K[z].execute(this.context,a,this.getTileRenderTransform(P,e),e.viewState.rotation,s,hE,f)}i.globalAlpha=r}renderDeferredInternal(e){const t=this.renderedTiles,i=Br(this.getLayer()),r=t.reduce((c,f,y)=>(f.executorGroups[i].forEach(_=>c.push({executorGroup:_,index:y})),c),[]),o=r.map(({executorGroup:c})=>c.getDeferredZIndexContexts()),s={};for(let c=0,f=r.length;c<f;++c){const y=r[c].executorGroup.getDeferredZIndexContexts();for(const _ in y)s[_]=!0}Object.keys(s).map(Number).sort(A0).forEach(c=>{o.forEach((f,y)=>{f[c]&&(f[c].forEach(_=>{const{executorGroup:E,index:I}=r[y],P=E.getRenderedContext(),K=P.globalAlpha;P.globalAlpha=this.renderedOpacity_;const z=this.tileClipContexts_[I];z&&z.draw(P),_.draw(P),z&&P.restore(),P.globalAlpha=K,_.clear()}),f[c].length=0)})})}getTileRenderTransform(e,t){const i=t.pixelRatio,r=t.viewState,o=r.center,s=r.resolution,a=r.rotation,c=t.size,f=Math.round(c[0]*i),y=Math.round(c[1]*i),E=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),I=e.tileCoord,P=E.getTileCoordExtent(e.wrappedTileCoord),K=E.getTileCoordExtent(I,this.tempExtent)[0]-P[0];return aL($O(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(o,s,a,i,f,y,K))}postRender(e,t){const i=t.viewHints,r=!(i[Qa.ANIMATING]||i[Qa.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const o=this.getLayer(),s=o.getRenderMode(),a=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const c=o.getDeclutter(),f=c?dN[s].filter(ee=>!hE.includes(ee)):dN[s],y=t.viewState,_=y.rotation,E=o.getSource(),P=E.getTileGridForProjection(y.projection).getZForResolution(y.resolution,E.zDirection),K=this.renderedTiles,z=[],Q=[],V=[],$=Br(o);let Z=!0;for(let ee=K.length-1;ee>=0;--ee){const X=K[ee];Z=Z&&!X.getReplayState(o).dirty;const W=X.executorGroups[$].filter(Be=>Be.hasExecutors(f));if(W.length===0)continue;const se=this.getTileRenderTransform(X,t),ue=X.tileCoord[0];let ve=!1;const ye=W[0].getClipCoords(se);let Ee=e,_e;if(ye){_e=new PL,Ee=_e.getContext();for(let Be=0,Fe=z.length;Be<Fe;++Be)if(P!==ue&&ue<Q[Be]){const Se=z[Be];wl([ye[0],ye[3],ye[4],ye[7]],[Se[0],Se[3],Se[4],Se[7]])&&(ve||(Ee.save(),ve=!0),Ee.beginPath(),Ee.moveTo(ye[0],ye[1]),Ee.lineTo(ye[2],ye[3]),Ee.lineTo(ye[4],ye[5]),Ee.lineTo(ye[6],ye[7]),Ee.moveTo(Se[6],Se[7]),Ee.lineTo(Se[4],Se[5]),Ee.lineTo(Se[2],Se[3]),Ee.lineTo(Se[0],Se[1]),Ee.clip())}z.push(ye),Q.push(ue)}for(let Be=0,Fe=W.length;Be<Fe;++Be)W[Be].execute(e,[e.canvas.width,e.canvas.height],se,_,r,f,t.declutter?.[c]);ve&&(Ee===e?Ee.restore():V[ee]=_e)}e.globalAlpha=a,this.ready=Z,this.tileClipContexts_=V,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,i,r,o,s){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let c=0,f=i.length;c<f;++c)a=cE(r,e,i[c],t,this.boundHandleStyleImageChange_,void 0,o,s)||a;else a=cE(r,e,i,t,this.boundHandleStyleImageChange_,void 0,o,s);return a}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const i=e.getReplayState(t),r=t.getRevision(),o=e.wantedResolution;return i.renderedTileResolution!==o||i.renderedTileRevision!==r}renderTileImage_(e,t){const i=this.getLayer(),r=e.getReplayState(i),o=i.getRevision(),s=e.executorGroups[Br(i)];r.renderedTileRevision=o;const a=e.wrappedTileCoord,c=a[0],f=i.getSource();let y=t.pixelRatio;const E=t.viewState.projection,I=f.getTileGridForProjection(E),P=I.getResolution(e.tileCoord[0]),K=t.pixelRatio/e.wantedResolution*P,z=I.getResolution(c),Q=e.getContext();y=Math.round(Math.max(y,K/y));const V=f.getTilePixelSize(c,y,E);Q.canvas.width=V[0],Q.canvas.height=V[1];const $=y/K;if($!==1){const W=dj(this.tmpTransform_);$O(W,$,$),Q.setTransform.apply(Q,W)}const Z=I.getTileCoordExtent(a,this.tempExtent),ee=K/z,X=dj(this.tmpTransform_);$O(X,ee,-ee),K0e(X,-Z[0],-Z[3]);for(let W=0,se=s.length;W<se;++W)s[W].execute(Q,[Q.canvas.width*$,Q.canvas.height*$],X,0,!0,sCe[i.getRenderMode()],null);r.renderedTileResolution=e.wantedResolution}}class a4 extends DL{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const i=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i;const r=e.renderMode||"hybrid";xs(r=="hybrid"||r=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=r,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new aCe(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(cv.PRELOAD)}getUseInterimTilesOnError(){return this.get(cv.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(cv.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(cv.USE_INTERIM_TILES_ON_ERROR,e)}}function SD(n){return Array.isArray(n)?Math.min(...n):n}class lCe extends TL{constructor(e,t,i,r,o,s,a){let c=e.getExtent();c&&e.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);let f=t.getExtent();f&&t.canWrapX()&&(f=f.slice(),f[0]=-1/0,f[2]=1/0);const y=f?Pm(i,f):i,_=vf(y),E=wD(e,t,_,r),I=Eee,P=new See(e,t,y,c,E*I,r),K=P.calculateSourceExtent(),z=DC(K)?null:s(K,E,o),Q=z?Bi.IDLE:Bi.EMPTY,V=z?z.getPixelRatio():1;super(i,r,V,Q),this.targetProj_=t,this.maxSourceExtent_=c,this.triangulation_=P,this.targetResolution_=r,this.targetExtent_=i,this.sourceImage_=z,this.sourcePixelRatio_=V,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==Bi.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==Bi.LOADED){const t=Go(this.targetExtent_)/this.targetResolution_,i=Mu(this.targetExtent_)/this.targetResolution_;this.canvas_=wee(t,i,this.sourcePixelRatio_,SD(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==Bi.IDLE){this.state=Bi.LOADING,this.changed();const e=this.sourceImage_.getState();e==Bi.LOADED||e==Bi.ERROR?this.reproject_():(this.sourceListenerKey_=Ro(this.sourceImage_,cr.CHANGE,t=>{const i=this.sourceImage_.getState();(i==Bi.LOADED||i==Bi.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){fa(this.sourceListenerKey_),this.sourceListenerKey_=null}}const rw=4,x8={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class uCe extends Gm{constructor(e,t){super(e),this.image=t}}class Tee extends k2{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const i=U6(t,e,0);e=t[i]}return e}getImage(e,t,i,r){const o=this.getProjection();if(!o||!r||KA(o,r))return o&&(r=o),this.getImageInternal(e,t,i,r);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&KA(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==t&&L1(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new lCe(o,r,e,t,i,(s,a,c)=>this.getImageInternal(s,a,c,o),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,i,r){if(this.loader){const o=cCe(e,t,i,1),s=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===r&&(this.wantedExtent_&&Xg(this.wantedExtent_,o)||Xg(this.image.getExtent(),o))&&(this.wantedResolution_&&SD(this.wantedResolution_)===s||SD(this.image.getResolution())===s)))return this.image;this.wantedProjection_=r,this.wantedExtent_=o,this.wantedResolution_=s,this.image=new TL(o,s,i,this.loader),this.image.addEventListener(cr.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let i;switch(t.getState()){case Bi.LOADING:this.loading=!0,i=x8.IMAGELOADSTART;break;case Bi.LOADED:this.loading=!1,i=x8.IMAGELOADEND;break;case Bi.ERROR:this.loading=!1,i=x8.IMAGELOADERROR;break;default:return}this.hasListener(i)&&this.dispatchEvent(new uCe(i,t))}}function cCe(n,e,t,i){const r=e/t,o=vf(n),s=ov(Go(n)/r,rw),a=ov(Mu(n)/r,rw),c=ov((i-1)*s/2,rw),f=s+2*c,y=ov((i-1)*a/2,rw),_=a+2*y;return XS(o,r,0,[f,_])}const K_=[0,0,0],Qy=5;class rB{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,xs(Pge(this.resolutions_,(r,o)=>o-r),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let r=0,o=this.resolutions_.length-1;r<o;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,xs(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=j1(i)),xs(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,xs(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:CL,xs(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,o)=>{const s=new KL(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,o);s.minX=Math.max(a.minX,s.minX),s.maxX=Math.min(a.maxX,s.maxX),s.minY=Math.max(a.minY,s.minY),s.maxY=Math.min(a.maxY,s.maxY)}return s}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const r=this.getTileRangeForExtentAndZ(e,t);for(let o=r.minX,s=r.maxX;o<=s;++o)for(let a=r.minY,c=r.maxY;a<=c;++a)i([t,o,a])}forEachTileCoordParentTileRange(e,t,i,r){let o,s,a,c=null,f=e[0]-1;for(this.zoomFactor_===2?(s=e[1],a=e[2]):c=this.getTileCoordExtent(e,r);f>=this.minZoom;){if(s!==void 0&&a!==void 0?(s=Math.floor(s/2),a=Math.floor(a/2),o=P_(s,s,a,a,i)):o=this.getTileRangeForExtentAndZ(c,f,i),t(f,o))return!0;--f}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const o=e[1]*2,s=e[2]*2;return P_(o,o+1,s,s+1,t)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],o=e[1],s=e[2];if(t===r)return P_(o,s,o,s,i);if(this.zoomFactor_){const c=Math.pow(this.zoomFactor_,t-r),f=Math.floor(o*c),y=Math.floor(s*c);if(t<r)return P_(f,f,y,y,i);const _=Math.floor(c*(o+1))-1,E=Math.floor(c*(s+1))-1;return P_(f,_,y,E,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,K_);const r=K_[1],o=K_[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,K_);const s=K_[1],a=K_[2];return P_(r,s,o,a,i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=NA(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),o=NA(this.getTileSize(e[0]),this.tmpSize_),s=i[0]+e[1]*o[0]*r,a=i[1]-(e[2]+1)*o[1]*r,c=s+o[0]*r,f=a+o[1]*r;return P1(s,a,c,f,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,r,o){const s=this.getZForResolution(i),a=i/this.getResolution(s),c=this.getOrigin(s),f=NA(this.getTileSize(s),this.tmpSize_);let y=a*(e-c[0])/i/f[0],_=a*(c[1]-t)/i/f[1];return r?(y=ov(y,Qy)-1,_=ov(_,Qy)-1):(y=Q5(y,Qy),_=Q5(_,Qy)),pE(s,y,_,o)}getTileCoordForXYAndZ_(e,t,i,r,o){const s=this.getOrigin(i),a=this.getResolution(i),c=NA(this.getTileSize(i),this.tmpSize_);let f=(e-s[0])/a/c[0],y=(s[1]-t)/a/c[1];return r?(f=ov(f,Qy)-1,y=ov(y,Qy)-1):(f=Q5(f,Qy),y=Q5(y,Qy)),pE(i,f,y,o)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=U6(this.resolutions_,e,t||0);return cl(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return SJ(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}}function WL(n){let e=n.getDefaultTileGrid();return e||(e=dCe(n),n.setDefaultTileGrid(e)),e}function ACe(n,e,t){const i=e[0],r=n.getTileCoordCenter(e),o=oB(t);if(!vC(o,r)){const s=Go(o),a=Math.ceil((o[0]-r[0])/s);return r[0]+=s*a,n.getTileCoordForCoordAndZ(r,i)}return e}function hCe(n,e,t,i){i=i!==void 0?i:"top-left";const r=kee(n,e,t);return new rB({extent:n,origin:Hge(n,i),resolutions:r,tileSize:t})}function QL(n){const e=n||{},t=e.extent||ks("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:kee(t,e.maxZoom,e.tileSize,e.maxResolution)};return new rB(i)}function kee(n,e,t,i){e=e!==void 0?e:IJ,t=NA(t!==void 0?t:CL);const r=Mu(n),o=Go(n);i=i>0?i:Math.max(o/t[0],r/t[1]);const s=e+1,a=new Array(s);for(let c=0;c<s;++c)a[c]=i/Math.pow(2,c);return a}function dCe(n,e,t,i){const r=oB(n);return hCe(r,e,t,i)}function oB(n){n=ks(n);let e=n.getExtent();if(!e){const t=180*xv.degrees/n.getMetersPerUnit();e=P1(-t,-t,t,t)}return e}class Dee extends k2{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&NA(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Br(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,r,o,s){return fr()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:WL(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),o=this.getTilePixelRatio(t),s=NA(r.getTileSize(e),this.tmpSize);return o==1?s:rye(s,o,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const i=t!==void 0?t:this.getProjection(),r=t!==void 0?this.getTileGridForProjection(i):this.tileGrid||this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(e=ACe(r,e,i)),iCe(e,r)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class fCe extends Gm{constructor(e,t){super(e),this.tile=t}}function Ree(n){return function(e){const t=e.buffers,i=e.meta,r=e.imageOps,o=e.width,s=e.height,a=t.length,c=t[0].byteLength;if(r){const E=new Array(a);for(let P=0;P<a;++P)E[P]=new ImageData(new Uint8ClampedArray(t[P]),o,s);return n(E,i).data.buffer}const f=new Uint8ClampedArray(c),y=new Array(a),_=new Array(a);for(let E=0;E<a;++E)y[E]=new Uint8ClampedArray(t[E]),_[E]=[0,0,0,0];for(let E=0;E<c;E+=4){for(let P=0;P<a;++P){const K=y[P];_[P][0]=K[E],_[P][1]=K[E+1],_[P][2]=K[E+2],_[P][3]=K[E+3]}const I=n(_,i);f[E]=I[0],f[E+1]=I[1],f[E+2]=I[2],f[E+3]=I[3]}return f.buffer}}function pCe(n,e){const i=Object.keys(n.lib||{}).map(function(o){return"const "+o+" = "+n.lib[o].toString()+";"}).concat(["const __minion__ = ("+Ree.toString()+")(",n.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(i.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(i,{type:"text/javascript"})));return r.addEventListener("message",e),r}function mCe(n,e){const t=Ree(n.operation);let i=!1;return{postMessage:function(r){setTimeout(function(){i||e({data:{buffer:t(r),meta:r.meta}})},0)},terminate:function(){i=!0}}}let gCe=class extends YM{constructor(e){super(),this.imageOps_=!!e.imageOps;let t;e.threads===0?t=0:this.imageOps_?t=1:t=e.threads||1;const i=new Array(t);if(t)for(let r=0;r<t;++r)i[r]=pCe(e,this.onWorkerMessage_.bind(this,r));else i[0]=mCe(e,this.onWorkerMessage_.bind(this,0));this.workers_=i,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,t,i){this.enqueue_({inputs:e,meta:t,callback:i}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const e=this.queue_.shift();this.job_=e;const t=e.inputs[0].width,i=e.inputs[0].height,r=e.inputs.map(function(c){return c.data.buffer}),o=this.workers_.length;if(this.running_=o,o===1){this.workers_[0].postMessage({buffers:r,meta:e.meta,imageOps:this.imageOps_,width:t,height:i},r);return}const s=e.inputs[0].data.length,a=4*Math.ceil(s/4/o);for(let c=0;c<o;++c){const f=c*a,y=[];for(let _=0,E=r.length;_<E;++_)y.push(r[_].slice(f,f+a));this.workers_[c].postMessage({buffers:y,meta:e.meta,imageOps:this.imageOps_,width:t,height:i},y)}}onWorkerMessage_(e,t){this.disposed||(this.dataLookup_[e]=t.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const e=this.job_,t=this.workers_.length;let i,r;if(t===1)i=new Uint8ClampedArray(this.dataLookup_[0].buffer),r=this.dataLookup_[0].meta;else{const o=e.inputs[0].data.length;i=new Uint8ClampedArray(o),r=new Array(t);const s=4*Math.ceil(o/4/t);for(let a=0;a<t;++a){const c=this.dataLookup_[a].buffer,f=a*s;i.set(new Uint8ClampedArray(c),f),r[a]=this.dataLookup_[a].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(i,e.inputs[0].width,e.inputs[0].height),r),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}};const fN={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class pN extends Gm{constructor(e,t,i){super(e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=i}}class Pee extends Tee{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=bCe(e.sources);const t=this.changed.bind(this);for(let i=0,r=this.layers_.length;i<r;++i)this.layers_[i].addEventListener(cr.CHANGE,t);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new XX(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:fd(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:vCe(this.layers_),pixelRatio:1,pixelToCoordinateTransform:fd(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Br(this),renderTargets:{}},this.setAttributions(function(i){const r=[];for(let o=0,s=e.sources.length;o<s;++o){const a=e.sources[o],c=a instanceof k2?a:a.getSource();if(!c)continue;const f=c.getAttributions()?.(i);typeof f=="string"?r.push(f):f!==void 0&&r.push(...f)}return r}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new gCe({operation:e,imageOps:this.operationType_==="image",queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,i){const r=Object.assign({},this.frameState_);r.viewState=Object.assign({},r.viewState);const o=vf(e);r.size[0]=Math.ceil(Go(e)/t),r.size[1]=Math.ceil(Mu(e)/t),r.extent=[o[0]-r.size[0]*t/2,o[1]-r.size[1]*t/2,o[0]+r.size[0]*t/2,o[1]+r.size[1]*t/2],r.time=Date.now();const s=r.viewState;return s.center=o,s.projection=i,s.resolution=t,r}allSourcesReady_(){let e=!0,t;for(let i=0,r=this.layers_.length;i<r;++i)if(t=this.layers_[i].getSource(),!t||t.getState()!=="ready"){e=!1;break}return e}getImage(e,t,i,r){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);const o=this.updateFrameState_(e,t,r);if(this.requestedFrameState_=o,this.renderedImageCanvas_){const s=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();(t!==s||!L1(o.extent,a))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),o.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,i=new Array(t);for(let o=0;o<t;++o){e.layerIndex=o,e.renderTargets={};const s=yCe(this.layers_[o],e);if(s)i[o]=s;else return}const r={};this.dispatchEvent(new pN(fN.BEFOREOPERATIONS,e,r)),this.processor_.process(i,r,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,i,r){if(t||!i)return;const o=e.extent,s=e.viewState.resolution;if(s!==this.requestedFrameState_.viewState.resolution||!L1(o,this.requestedFrameState_.extent))return;let a;if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d");else{const c=Math.round(Go(o)/s),f=Math.round(Mu(o)/s);a=Al(c,f),this.renderedImageCanvas_=new jve(o,s,1,a.canvas)}a.putImageData(i,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new pN(fN.AFTEROPERATIONS,e,r))}getResolutions(e){if(!this.useResolutions_)return null;let t=super.getResolutions();if(!t)for(let i=0,r=this.layers_.length;i<r&&(t=this.layers_[i].getSource().getResolutions(e),!t);++i);return t}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}Pee.prototype.dispose;let Pb=null;function yCe(n,e){const t=n.getRenderer();if(!t)throw new Error("Unsupported layer type: "+n);if(!t.prepareFrame(e))return null;const i=e.size[0],r=e.size[1];if(i===0||r===0)return null;const o=t.renderFrame(e,null);let s;if(o instanceof HTMLCanvasElement)s=o;else{if(o&&(s=o.firstElementChild),!(s instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+s);if(s.width===i&&s.height===r)return s.getContext("2d").getImageData(0,0,i,r)}if(!Pb)Pb=Al(i,r,void 0,{willReadFrequently:!0});else{const a=Pb.canvas;a.width!==i||a.height!==r?Pb=Al(i,r,void 0,{willReadFrequently:!0}):Pb.clearRect(0,0,i,r)}return Pb.drawImage(s,0,0,i,r),Pb.getImageData(0,0,i,r)}function vCe(n){return n.map(function(e){return e.getLayerState()})}function bCe(n){const e=n.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=CCe(n[i]);return t}function CCe(n){let e;return n instanceof k2?n instanceof Dee?e=new Iee({source:n}):n instanceof Tee&&(e=new Mee({source:n})):e=n,e}function _Ce(n,e,t,i){const r=document.createElement("script"),o="olc_"+Br(e);function s(){delete window[o],r.parentNode.removeChild(r)}r.async=!0,r.src=n+(n.includes("?")?"&":"?")+"callback="+o;const a=setTimeout(function(){s(),t&&t()},1e4);window[o]=function(c){clearTimeout(a),s(),e(c)},document.head.appendChild(r)}const xCe=/\{z\}/g,MCe=/\{x\}/g,wCe=/\{y\}/g,SCe=/\{-y\}/g;function ECe(n,e,t,i,r){return n.replace(xCe,e.toString()).replace(MCe,t.toString()).replace(wCe,i.toString()).replace(SCe,function(){if(r===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(r-i).toString()})}function BCe(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let o;for(o=i;o<=r;++o)e.push(n.replace(t[0],String.fromCharCode(o)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=i;r++)e.push(n.replace(t[0],r.toString()));return e}return e.push(n),e}function OCe(n,e){return(function(t,i,r){if(!t)return;let o;const s=t[0];if(e){const a=e.getFullTileRange(s);a&&(o=a.getHeight()-1)}return ECe(n,s,t[1],t[2],o)})}function Lee(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=OCe(n[r],e);return ICe(i)}function ICe(n){return n.length===1?n[0]:(function(e,t,i){if(!e)return;const r=tCe(e),o=cC(r,n.length);return n[o](e,t,i)})}const M8={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class sB extends Dee{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===sB.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=Br(t),r=t.getState();let o;r==Hn.LOADING?(this.tileLoadingKeys_[i]=!0,o=M8.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],o=r==Hn.ERROR?M8.TILELOADERROR:r==Hn.LOADED?M8.TILELOADEND:void 0),o!=null&&this.dispatchEvent(new fCe(o,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=BCe(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Lee(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}}class TCe extends sB{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:kCe,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:fee,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!KA(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||KA(t,e)))return this.tileGrid;const i=Br(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=WL(e)),this.tileGridForProjection[i]}createTile_(e,t,i,r,o,s){const a=[e,t,i],c=this.getTileCoordForTileUrlFunction(a,o),f=c?this.tileUrlFunction(c,r,o):void 0,y=new this.tileClass(a,f!==void 0?Hn.IDLE:Hn.EMPTY,f!==void 0?f:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return y.key=s,y.addEventListener(cr.CHANGE,this.handleTileChange.bind(this)),y}getTile(e,t,i,r,o,s){const a=this.getProjection();if(!a||!o||KA(a,o))return this.getTileInternal(e,t,i,r,a||o);const c=[e,t,i],f=this.getKey(),y=this.getTileGridForProjection(a),_=this.getTileGridForProjection(o),E=this.getTileCoordForTileUrlFunction(c,o),I=new Bee(a,y,o,_,c,E,this.getTilePixelRatio(r),this.getGutter(),(P,K,z,Q)=>this.getTileInternal(P,K,z,Q,a,s),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return I.key=f,I}getTileInternal(e,t,i,r,o,s){const a=this.getKey(),c=aS(this,a,e,t,i);if(s&&s.containsKey(c))return s.get(c);const f=this.createTile_(e,t,i,r,o,a);return s?.set(c,f),f}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const i=ks(e);if(i){const r=Br(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}}function kCe(n,e){if(jA){const t=n.getCrossOrigin();let i="same-origin",r="same-origin";t==="anonymous"||t===""?(i="cors",r="omit"):t==="use-credentials"&&(i="cors",r="include"),fetch(e,{mode:i,credentials:r}).then(o=>{if(!o.ok)throw new Error(`HTTP ${o.status}`);return o.blob()}).then(o=>createImageBitmap(o)).then(o=>{const s=n.getImage();s.width=o.width,s.height=o.height,s.getContext("2d").drawImage(o,0,0),o.close?.(),s.dispatchEvent(new Event("load"))}).catch(()=>{n.getImage().dispatchEvent(new Event("error"))});return}n.getImage().src=e}class Uee extends TCe{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:ks("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)_Ce(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let i;try{i=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(i)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=ks("EPSG:4326"),i=this.getProjection();let r;if(e.bounds!==void 0){const f=XM(t,i);r=oJ(e.bounds,f)}const o=oB(i),s=e.minzoom||0,a=e.maxzoom||22,c=QL({extent:o,maxZoom:a,minZoom:s,tileSize:this.tileSize_});if(this.tileGrid=c,this.tileUrlFunction=Lee(e.tiles,c),e.attribution&&!this.getAttributions()){const f=r!==void 0?r:o;this.setAttributions(function(y){return wl(f,y.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class qL extends sB{constructor(e){const t=e.projection||"EPSG:3857",i=e.extent||oB(t),r=e.tileGrid||QL({extent:i,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:r,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Kee,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:pee,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,i){if(i.getState()===Hn.IDLE){i.setState(Hn.LOADING);const r=i.wrappedTileCoord,o=this.getTileGridForProjection(t);let s=o.getTileCoordExtent(r);const a=r[0],c=o.getResolution(a);yv(s,-c,s);const f=this.projection;t&&this.projection&&!KA(t,f)&&(s=rS(s,t,f));const y=this.tileGrid,_=y.getExtent();_&&Pm(s,_,s);let E=c;t&&f&&!KA(t,f)&&(E=c/f.getMetersPerUnit()/t.getMetersPerUnit());const I=y.getZForResolution(E,this.zDirection);y.forEachTileCoord(s,I,P=>{const K=this.tileUrlFunction(P,e,t);this.sourceTiles_[K]||(this.sourceTiles_[K]=new this.tileClass(P,K?Hn.IDLE:Hn.EMPTY,K,this.format_,this.tileLoadFunction));const z=this.sourceTiles_[K];i.sourceTiles.push(z),this.tileKeysBySourceTileUrl_[K]||(this.tileKeysBySourceTileUrl_[K]=[]),this.tileKeysBySourceTileUrl_[K].push(i.getKey());const Q=z.getState();if(Q<Hn.LOADED){const V=$=>{this.handleTileChange($);const Z=z.getState();if(Z===Hn.LOADED||Z===Hn.ERROR){const ee=z.getKey();ee in i.errorTileKeys?z.getState()===Hn.LOADED&&delete i.errorTileKeys[ee]:i.loadingSourceTiles--,Z===Hn.ERROR?i.errorTileKeys[ee]=!0:z.removeEventListener(cr.CHANGE,V),i.loadingSourceTiles===0&&i.setState(_v(i.errorTileKeys)?Hn.LOADED:Hn.ERROR)}};z.addEventListener(cr.CHANGE,V),i.loadingSourceTiles++}Q===Hn.IDLE&&(z.extent=y.getTileCoordExtent(P),z.projection=this.projection,z.resolution=y.getResolution(P[0]),z.load())}),i.loadingSourceTiles||i.setState(i.sourceTiles.some(P=>P.getState()===Hn.ERROR)?Hn.ERROR:Hn.LOADED)}return i.sourceTiles}removeSourceTiles(e){const t=e.getKey(),i=e.sourceTiles;for(let r=0,o=i.length;r<o;++r){const s=i[r].getTileUrl();if(!this.tileKeysBySourceTileUrl_[s])return;const a=this.tileKeysBySourceTileUrl_[s].indexOf(t);a!==-1&&(this.tileKeysBySourceTileUrl_[s].splice(a,1),this.tileKeysBySourceTileUrl_[s].length===0&&(delete this.tileKeysBySourceTileUrl_[s],delete this.sourceTiles_[s]))}}getTile(e,t,i,r,o){const s=[e,t,i];let a=this.getTileCoordForTileUrlFunction(s,o);const c=this.getTileGrid().getExtent(),f=this.projection,y=this.getTileGridForProjection(o);if(a&&c){const I=y.getTileCoordExtent(a);yv(I,-y.getResolution(e),I),wl(c,!o||!f||KA(o,f)?I:rS(I,o,f))||(a=null)}let _=!0;if(a!==null){const I=this.tileGrid,P=y.getResolution(e);let K=P;o&&f&&!KA(o,f)&&(K=P/f.getMetersPerUnit()/o.getMetersPerUnit());const z=I.getZForResolution(K,1),Q=y.getTileCoordExtent(a);yv(Q,-P,Q),I.forEachTileCoord(!o||!f||KA(o,f)?Q:rS(Q,o,f),z,V=>{_=_&&!this.tileUrlFunction(V,r,f)})}const E=new Wve(s,_?Hn.EMPTY:Hn.IDLE,a,this.getSourceTiles.bind(this,r,o),this.removeSourceTiles.bind(this));return E.key=this.getKey(),E}getTileGridForProjection(e){const t=e.getCode();let i=this.tileGrids_[t];if(!i){const r=this.projection;if(r!==null&&!KA(r,e))return WL(e);const o=this.tileGrid,s=o.getResolutions().slice(),a=s.map(function(y,_){return o.getOrigin(_)}),c=s.map(function(y,_){return o.getTileSize(_)}),f=IJ+1;for(let y=s.length;y<f;++y)s.push(s[y-1]/2),a.push(a[y-1]),c.push(c[y-1]);i=new rB({extent:o.getExtent(),origins:a,resolutions:s,tileSizes:c}),this.tileGrids_[t]=i}return i}getTilePixelRatio(e){return e}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),o=NA(r.getTileSize(e),this.tmpSize);return[Math.round(o[0]*t),Math.round(o[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function Kee(n,e){n.setLoader(function(t,i,r){uee(e,n.getFormat(),t,i,r,n.onLoad.bind(n),n.onError.bind(n))})}function DCe(n,e){const t=n[0],i=t.width,r=t.height,o=t.data,s=new Uint8ClampedArray(o.length),a=e.resolution*2,c=i-1,f=r-1,y=[0,0,0,0],_=2*Math.PI,E=Math.PI/2,I=Math.PI*e.sunEl/180,P=Math.PI*e.sunAz/180,K=Math.cos(I),z=Math.sin(I),Q=e.highlightColor,V=e.shadowColor,$=e.accentColor,Z=e.encoding;let ee,X,W,se,ue,ve,ye,Ee,_e,Be,Fe,Se,qe,ut,ht,De,Ie,ze,Te,vt,st,Et;function Pt(ke,Oe="mapbox"){if(Oe==="mapbox")return(ke[0]*256*256+ke[1]*256+ke[2])*.1-1e4;if(Oe==="terrarium")return ke[0]*256+ke[1]+ke[2]/256-32768}for(X=0;X<=f;++X)for(ue=X===0?0:X-1,ve=X===f?f:X+1,ee=0;ee<=c;++ee)W=ee===0?0:ee-1,se=ee===c?c:ee+1,ye=(X*i+W)*4,y[0]=o[ye],y[1]=o[ye+1],y[2]=o[ye+2],y[3]=o[ye+3],Ee=e.vert*Pt(y,Z),ye=(X*i+se)*4,y[0]=o[ye],y[1]=o[ye+1],y[2]=o[ye+2],y[3]=o[ye+3],_e=e.vert*Pt(y,Z),Be=(_e-Ee)/a,ye=(ue*i+ee)*4,y[0]=o[ye],y[1]=o[ye+1],y[2]=o[ye+2],y[3]=o[ye+3],Ee=e.vert*Pt(y,Z),ye=(ve*i+ee)*4,y[0]=o[ye],y[1]=o[ye+1],y[2]=o[ye+2],y[3]=o[ye+3],_e=e.vert*Pt(y,Z),Fe=(_e-Ee)/a,qe=Math.atan2(Fe,-Be),qe<0?qe=E-qe:qe>E?qe=_-qe+E:qe=E-qe,Se=Math.atan(Math.sqrt(Be*Be+Fe*Fe)),Et=z*Math.cos(Se)+K*Math.sin(Se)*Math.cos(P-qe),ut=Math.cos(Se),ht=255*Et,Te=Math.min(Math.max(2*e.sunEl,0),1),vt=1.875-e.opacity*1.75,st=e.opacity!==.5?E*((Math.pow(vt,Se)-1)/(Math.pow(vt,E)-1)):Se,Ie={r:(1-ut)*$.r*Te*255,g:(1-ut)*$.g*Te*255,b:(1-ut)*$.b*Te*255,a:(1-ut)*$.a*Te*255},De=Math.abs(((qe+P)/Math.PI+.5)%2-1),ze={r:(Q.r*(1-De)+V.r*De)*ht,g:(Q.g*(1-De)+V.g*De)*ht,b:(Q.b*(1-De)+V.b*De)*ht,a:(Q.a*(1-De)+V.a*De)*ht},ye=(X*i+ee)*4,s[ye]=Ie.r*(1-De)+ze.r,s[ye+1]=Ie.g*(1-De)+ze.g,s[ye+2]=Ie.b*(1-De)+ze.b,s[ye+3]=o[ye+3]*e.opacity*Te*Math.sin(st);return new ImageData(s,i,r)}function RCe(n,e=512){return n.getExtent()?QL({extent:n.getExtent(),tileSize:e,maxZoom:22}).getResolutions():d0}function Fee(n,e){return e.accessToken||(e=Object.assign({},e),new URL(n).searchParams.forEach((i,r)=>{e.accessToken=i,e.accessTokenParam=r})),e}function PCe(n,e,t="",i={},r=void 0){let o,s,a,c,f=!0;return typeof t!="string"&&!Array.isArray(t)?(a=t,c=a.source||a.layers,i=a):c=t,typeof i=="string"?(o=i,a={}):(o=i.styleUrl,a=i),a.updateSource===!1&&(f=!1),r||(r=a.resolutions),!o&&typeof e=="string"&&!e.trim().startsWith("{")&&(o=e),o&&(o=o.startsWith("data:")?location.href:dE(o,a.accessToken),a=Fee(o,a)),new Promise(function(y,_){yee(e,a).then(function(E){if(E.version!=8)return _(new Error("glStyle version 8 required."));if(!(n instanceof UL||n instanceof a4))return _(new Error("Can only apply to VectorLayer or VectorTileLayer"));const I=n instanceof a4?"vector":"geojson";if(c?Array.isArray(c)?s=E.layers.find(function(Z){return Z.id===c[0]}).source:s=c:(s=E.layers.find(function(Z){return Z.source&&E.sources[Z.source].type===I}).source,c=s),!s)return _(new Error(`No ${I} source found in the glStyle.`));function P(){if(!f)return Promise.resolve();if(n instanceof a4)return Nee(E.sources[s],o,a).then(function(W){const se=n.getSource();se?W!==se&&(se.setTileUrlFunction(W.getTileUrlFunction()),typeof se.setUrls=="function"&&typeof W.getUrls=="function"&&se.setUrls(W.getUrls()),se.format_||(se.format_=W.format_),se.getAttributions()||se.setAttributions(W.getAttributions()),se.getTileLoadFunction()===Kee&&se.setTileLoadFunction(W.getTileLoadFunction()),KA(se.getProjection(),W.getProjection())&&(se.tileGrid=W.getTileGrid())):n.setSource(W);const ue=n.getSource().getTileGrid();!isFinite(n.getMaxResolution())&&!isFinite(n.getMinZoom())&&ue.getMinZoom()>0&&n.setMaxResolution(F3(Math.max(0,ue.getMinZoom()-1e-12),ue.getResolutions()))});const Z=E.sources[s];let ee=n.getSource();(!ee||ee.get("mapbox-source")!==Z)&&(ee=Qee(Z,o,a));const X=n.getSource();return X?ee!==X&&(X.getAttributions()||X.setAttributions(ee.getAttributions()),X.format_||(X.format_=ee.getFormat()),X.url_=ee.getUrl()):n.setSource(ee),Promise.resolve()}let K,z;const Q={},V={};function $(){if(!z&&(!E.sprite||Q)){if(a.projection&&!r){const W=ks(a.projection).getUnits();W!=="m"&&(r=d0.map(se=>se/xv[W]))}let Z;const ee=n.getSource();ee instanceof qL&&ee.format_ instanceof xee&&(Z=ee.format_.layerName_),z=sbe(n,E,c,r,Q,V,(X,W=a.webfonts)=>Jve(X,W),a.getImage,Z),n.getStyle()?P().then(y).catch(_):_(new Error(`Nothing to show for source [${s}]`))}else z?(n.setStyle(z),P().then(y).catch(_)):_(new Error("Something went wrong trying to apply style."))}if(E.sprite){const Z=Qve(E.sprite,a.accessToken,o||location.href);K=jA?1:window.devicePixelRatio>=1.5?.5:1;const ee=K==.5?"@2x":"";Promise.all(Z.map(function(X){const W=new URL(X.url);let se=W.origin+W.pathname+ee+".json"+W.search;return new Promise(function(ue,ve){A2("Sprite",se,a).then(ue).catch(function(ye){se=W.origin+W.pathname+".json"+W.search,A2("Sprite",se,a).then(ue).catch(ve)})}).then(function(ue){ue===void 0&&_(new Error("No sprites found."));let ve;if(ve=W.origin+W.pathname+ee+".png"+W.search,a.transformRequest){const ye=a.transformRequest(ve,"SpriteImage")||ve;(ye instanceof Request||ye instanceof Promise)&&(ve=ye)}V[X.id]=ve;for(const ye in ue){const Ee=X.id=="default"?ye:`${X.id}:${ye}`;Q[Ee]=ue[ye]}}).catch(function(ue){_(new Error(`Sprites cannot be loaded: ${se}: ${ue.message}`))})})).then($).catch(_)}else $()}).catch(_)})}function zee(n,e){let t;return n.some(function(i){if(i.id==e)return t=i.source,!0}),t}function LCe(n,e){const t=n.bounds;if(t){const i=aD([t[0],t[1]],e),r=aD([t[2],t[3]],e);return[i[0],i[1],r[0],r[1]]}return ks(e).getExtent()}function jee(n,e,t){const i=new Uee({tileJSON:e,tileSize:n.tileSize||e.tileSize||512}),r=i.getTileJSON(),o=i.getTileGrid(),s=ks(t.projection||"EPSG:3857"),a=LCe(r,s),c=s.getExtent(),f=r.minzoom||0,y=r.maxzoom||22,_={attributions:i.getAttributions(),projection:s,tileGrid:new rB({origin:c?j1(c):o.getOrigin(0),extent:a||o.getExtent(),minZoom:f,resolutions:RCe(s,e.tileSize).slice(0,y+1),tileSize:o.getTileSize(0)})};return Array.isArray(r.tiles)?_.urls=r.tiles:_.url=r.tiles,_}function UCe(n,e,t,i){const r={id:n.id,type:n.type},o=n.layout||{},s=n.paint||{};r.paint=s,gf.zoom=jL(e,t.resolutions||d0),gf.distanceFromCenter=0;let a;const c=Li(r,"paint","background-color",Im,i);return s["background-opacity"]!==void 0&&(a=Li(r,"paint","background-opacity",Im,i)),o.visibility=="none"?void 0:$y(c,a)}function KCe(n,e,t){const i=jA?{style:{}}:document.createElement("div");return i.className="ol-mapbox-style-background",i.style.position="absolute",i.style.width="100%",i.style.height="100%",new T2({source:new k2({}),render(r){const o=UCe(n,r.viewState.resolution,e,t);return i.style.backgroundColor=o,i}})}function Nee(n,e,t){return new Promise(function(i,r){vee(n,e,t).then(function({tileJson:o,tileLoadFunction:s}){const a=jee(n,o,t);a.tileLoadFunction=s,a.format=new xee({layerName:"mvt:layer"});const c=new qL(a);c.set("mapbox-source",n),i(c)}).catch(r)})}function FCe(n,e,t){const i=new a4({declutter:!0,visible:!1});return Nee(n,e,t).then(function(r){i.setSource(r)}).catch(function(r){i.setSource(void 0)}),i}function Gee(n){return`{bbox-${(n?n.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function zCe(n,e,t){return new Promise(function(i,r){vee(n,e,t).then(function({tileJson:o,tileLoadFunction:s}){const a=new Uee({interpolate:t.interpolate===void 0?!0:t.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:o});a.tileGrid=jee(n,o,t).tileGrid,t.projection&&(a.projection=ks(t.projection));const c=a.getTileUrlFunction();s&&a.setTileLoadFunction(s),a.setTileUrlFunction(function(f,y,_){const E=Gee(_);let I=c(f,y,_);if(I.indexOf(E)!=-1){const P=a.getTileGrid().getTileCoordExtent(f);I=I.replace(E,P.toString())}return I}),a.set("mapbox-source",n),i(a)}).catch(function(o){r(o)})})}function Wee(n,e,t){const i=new Iee;return zCe(n,e,t).then(function(r){i.setSource(r)}).catch(function(){i.setSource(void 0)}),i}function jCe(n,e,t){const i=Wee(n,e,t);return new Mee({source:new Pee({operationType:"image",operation:DCe,sources:[i]})})}function Qee(n,e,t){const i=t.projection?new rN({dataProjection:t.projection}):new rN,r=n.data,o={};if(typeof r=="string"){const[a]=sS(r,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(a)){const f=(_,E,I)=>{const P=Gee(I);return a.replace(P,`${_.join(",")}`)},y=new oS({attributions:n.attribution,format:i,loader:(_,E,I,P,K)=>{const z=typeof f=="function"?f(_,E,I):f;A2("GeoJSON",z,t).then(Q=>{const V=y.getFormat().readFeatures(Q,{featureProjection:I});y.addFeatures(V),P(V)}).catch(Q=>{y.removeLoadedExtent(_),K()})},strategy:Mve});return y.set("mapbox-source",n),y}const c=new oS({attributions:n.attribution,format:i,url:a,loader:(f,y,_,E,I)=>{A2("GeoJSON",a,t).then(P=>{const K=c.getFormat().readFeatures(P,{featureProjection:_});c.addFeatures(K),E(K)}).catch(P=>{c.removeLoadedExtent(f),I()})}});return c}o.features=i.readFeatures(r,{featureProjection:"EPSG:3857"});const s=new oS(Object.assign({attributions:n.attribution,format:i},o));return s.set("mapbox-source",n),s}function NCe(n,e,t){return new UL({declutter:!0,source:Qee(n,e,t),visible:!1})}function GCe(n,e,t){let i=null;return function(r){n.paint&&"raster-opacity"in n.paint&&r.frameState.viewState.zoom!==i&&(i=r.frameState.viewState.zoom,delete t[n.id],WCe(n,e,i,t))}}function WCe(n,e,t,i){gf.zoom=t,gf.distanceFromCenter=0;const r=Li(n,"paint","raster-opacity",Im,i);e.setOpacity(r)}function QCe(n,e){function t(){const i=e.get("mapbox-style");if(!i)return;const r=MX(i.layers),o=n.get("mapbox-layers"),s=r.filter(function(a){return o.includes(a.id)}).some(function(a){return!a.layout||!a.layout.visibility||a.layout.visibility==="visible"});n.get("visible")!==s&&n.setVisible(s)}n.on("change",t),t()}function qCe(n,e,t,i){const r=gee(n),o=n.layers,s=t.type,a=t.source||zee(o,t.ref),c=n.sources[a];let f;if(s=="background")f=KCe(t,i,r);else if(c.type=="vector")f=FCe(c,e,i);else if(c.type=="raster")f=Wee(c,e,i),f.setVisible(t.layout?t.layout.visibility!=="none":!0),f.on("prerender",GCe(t,f,r));else if(c.type=="geojson")f=NCe(c,e,i);else if(c.type=="raster-dem"&&t.type=="hillshade"){const _=jCe(c,e,i);f=_,_.getSource().on("beforeoperations",function(E){const I=E.data;I.resolution=sD(i.projection||"EPSG:3857",E.resolution,vf(E.extent),"m"),gf.zoom=jL(E.resolution,i.resolutions||d0),gf.distanceFromCenter=0,I.encoding=c.encoding,I.vert=5*Li(t,"paint","hillshade-exaggeration",Im,r),I.sunAz=Li(t,"paint","hillshade-illumination-direction",Im,r),I.sunEl=35,I.opacity=.3,I.highlightColor=Li(t,"paint","hillshade-highlight-color",Im,r),I.shadowColor=Li(t,"paint","hillshade-shadow-color",Im,r),I.accentColor=Li(t,"paint","hillshade-accent-color",Im,r)}),f.setVisible(t.layout?t.layout.visibility!=="none":!0)}const y=a;return f&&f.set("mapbox-source",y),f}function mN(n,e,t,i){const r=[];let o=null;if(e instanceof X4){if(o=e.getView(),!o.isDef()&&!o.getRotation()&&!o.getResolutions()){const _=i.projection?ks(i.projection):o.getProjection();o=new Bm(Object.assign(o.getProperties(),{maxResolution:d0[0]/xv[_.getUnits()],projection:i.projection||o.getProjection()})),e.setView(o)}"center"in n&&!o.getCenter()&&o.setCenter(aD(n.center,o.getProjection())),"zoom"in n&&o.getZoom()===void 0&&o.setResolution(d0[0]/xv[o.getProjection().getUnits()]/Math.pow(2,n.zoom)),(!o.getCenter()||o.getZoom()===void 0)&&o.fit(o.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}e.set("mapbox-style",n),e.set("mapbox-metadata",{styleUrl:t,options:i});const s=n.layers;let a=[],c,f,y;for(let _=0,E=s.length;_<E;++_){const I=s[_],P=I.type;if(P=="heatmap"){console.debug(`layers[${_}].type "${P}" not supported`);continue}else y=I.source||zee(s,I.ref),(!y||y!=f)&&(a.length&&(r.push(gN(c,a,n,t,e,i)),a=[]),c=qCe(n,t,I,i),c instanceof UL||c instanceof a4||(a=[]),f=c.get("mapbox-source")),a.push(I.id)}return r.push(gN(c,a,n,t,e,i)),Promise.all(r)}function YCe(n,e,t={}){let i,r;if(jA){if(!(n instanceof X4)&&!(n instanceof LC))throw new Error("ol-mapbox-style in a web worker requires a Map or a LayerGroup as first argument");r=n}else typeof n=="string"||n instanceof HTMLElement?r=new X4({target:n}):r=n;if(typeof e=="string"){const o=e.startsWith("data:")?location.href:dE(e,t.accessToken);t=Fee(o,t),i=new Promise(function(s,a){yee(e,t).then(function(c){mN(c,r,o,t).then(function(){s(r)}).catch(a)}).catch(function(c){a(new Error(`Could not load ${e}: ${c.message}`))})})}else i=new Promise(function(o,s){mN(e,r,!t.styleUrl||t.styleUrl.startsWith("data:")?location.href:dE(t.styleUrl,t.accessToken),t).then(function(){o(r)}).catch(s)});return i}function gN(n,e,t,i,r,o={}){let s=24,a=0;const c=t.layers;for(let f=0,y=c.length;f<y;++f){const _=c[f];e.indexOf(_.id)!==-1&&(s=Math.min("minzoom"in _?_.minzoom:0,s),a=Math.max("maxzoom"in _?_.maxzoom:24,a))}return new Promise(function(f,y){const _=function(){const I=n.getSource();if(!I||I.getState()==="error"){y(new Error("Error accessing data for source "+n.get("mapbox-source")));return}if("getTileGrid"in I){const P=I.getTileGrid();if(P){const K=P.getMinZoom();(s>0||K>0)&&n.setMaxResolution(Math.min(F3(Math.max(0,s-1e-12),d0),F3(Math.max(0,K-1e-12),P.getResolutions()))),a<24&&n.setMinResolution(F3(a,d0))}}else s>0&&n.setMaxResolution(F3(Math.max(0,s-1e-12),d0));I instanceof oS||I instanceof qL?PCe(n,t,e,Object.assign({styleUrl:i},o)).then(function(){QCe(n,r),f()}).catch(y):f()};n.set("mapbox-layers",e);const E=r.getLayers();E.getArray().indexOf(n)===-1&&E.push(n),n.getSource()?_():n.once("change:source",_)})}function gi(){var n="/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",e="5f4719fc476214e7aff32d9043337b9c97544cf9",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",statementMap:{0:{start:{line:11,column:2},end:{line:15,column:3}},1:{start:{line:12,column:4},end:{line:12,column:16}},2:{start:{line:14,column:4},end:{line:14,column:149}},3:{start:{line:14,column:103},end:{line:14,column:133}},4:{start:{line:18,column:24},end:{line:25,column:3}},5:{start:{line:28,column:14},end:{line:28,column:18}},6:{start:{line:30,column:19},end:{line:30,column:23}},7:{start:{line:32,column:4},end:{line:32,column:17}},8:{start:{line:33,column:4},end:{line:38,column:6}},9:{start:{line:39,column:4},end:{line:39,column:67}},10:{start:{line:42,column:4},end:{line:42,column:26}},11:{start:{line:42,column:19},end:{line:42,column:26}},12:{start:{line:43,column:4},end:{line:43,column:33}},13:{start:{line:44,column:4},end:{line:44,column:33}},14:{start:{line:47,column:4},end:{line:51,column:5}},15:{start:{line:48,column:6},end:{line:50,column:8}},16:{start:{line:54,column:4},end:{line:61,column:7}},17:{start:{line:62,column:16},end:{line:69,column:6}},18:{start:{line:70,column:4},end:{line:78,column:7}},19:{start:{line:71,column:21},end:{line:71,column:45}},20:{start:{line:72,column:6},end:{line:77,column:9}},21:{start:{line:79,column:22},end:{line:89,column:5}},22:{start:{line:80,column:19},end:{line:80,column:42}},23:{start:{line:81,column:21},end:{line:81,column:56}},24:{start:{line:82,column:6},end:{line:88,column:9}},25:{start:{line:90,column:4},end:{line:90,column:16}},26:{start:{line:91,column:4},end:{line:91,column:33}},27:{start:{line:92,column:4},end:{line:102,column:7}},28:{start:{line:93,column:21},end:{line:93,column:56}},29:{start:{line:94,column:6},end:{line:101,column:9}},30:{start:{line:103,column:4},end:{line:103,column:19}},31:{start:{line:104,column:4},end:{line:106,column:6}},32:{start:{line:108,column:17},end:{line:111,column:3}},33:{start:{line:109,column:4},end:{line:109,column:20}},34:{start:{line:110,column:4},end:{line:110,column:37}},35:{start:{line:113,column:14},end:{line:113,column:26}},36:{start:{line:114,column:4},end:{line:185,column:9}},37:{start:{line:119,column:12},end:{line:119,column:36}},38:{start:{line:176,column:12},end:{line:176,column:31}},39:{start:{line:188,column:22},end:{line:188,column:62}}},fnMap:{0:{name:"renderCoords",decl:{start:{line:10,column:9},end:{line:10,column:21}},loc:{start:{line:10,column:30},end:{line:16,column:1}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:14,column:92},end:{line:14,column:93}},loc:{start:{line:14,column:103},end:{line:14,column:133}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:19,column:17},end:{line:19,column:18}},loc:{start:{line:19,column:23},end:{line:20,column:5}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:21,column:18},end:{line:21,column:19}},loc:{start:{line:21,column:24},end:{line:22,column:5}},line:21},4:{name:"(anonymous_4)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:24,column:5}},line:23},5:{name:"(anonymous_5)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:21},end:{line:40,column:3}},line:31},6:{name:"(anonymous_6)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:28},end:{line:45,column:3}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:32},end:{line:52,column:3}},line:46},8:{name:"(anonymous_8)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:22},end:{line:107,column:3}},line:53},9:{name:"(anonymous_9)",decl:{start:{line:70,column:26},end:{line:70,column:27}},loc:{start:{line:70,column:35},end:{line:78,column:5}},line:70},10:{name:"(anonymous_10)",decl:{start:{line:79,column:22},end:{line:79,column:23}},loc:{start:{line:79,column:28},end:{line:89,column:5}},line:79},11:{name:"(anonymous_11)",decl:{start:{line:92,column:25},end:{line:92,column:26}},loc:{start:{line:92,column:33},end:{line:102,column:5}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:108,column:17},end:{line:108,column:18}},loc:{start:{line:108,column:24},end:{line:111,column:3}},line:108},13:{name:"(anonymous_13)",decl:{start:{line:112,column:2},end:{line:112,column:3}},loc:{start:{line:112,column:11},end:{line:186,column:3}},line:112},14:{name:"(anonymous_14)",decl:{start:{line:118,column:15},end:{line:118,column:16}},loc:{start:{line:118,column:22},end:{line:120,column:11}},line:118},15:{name:"(anonymous_15)",decl:{start:{line:175,column:15},end:{line:175,column:16}},loc:{start:{line:175,column:22},end:{line:177,column:11}},line:175}},branchMap:{0:{loc:{start:{line:11,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:11,column:2},end:{line:15,column:3}},{start:{line:13,column:9},end:{line:15,column:3}}],line:11},1:{loc:{start:{line:11,column:6},end:{line:11,column:34}},type:"binary-expr",locations:[{start:{line:11,column:6},end:{line:11,column:13}},{start:{line:11,column:17},end:{line:11,column:34}}],line:11},2:{loc:{start:{line:42,column:4},end:{line:42,column:26}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},3:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},4:{loc:{start:{line:136,column:26},end:{line:136,column:59}},type:"binary-expr",locations:[{start:{line:136,column:26},end:{line:136,column:53}},{start:{line:136,column:57},end:{line:136,column:59}}],line:136},5:{loc:{start:{line:148,column:6},end:{line:170,column:10}},type:"binary-expr",locations:[{start:{line:148,column:6},end:{line:148,column:29}},{start:{line:148,column:49},end:{line:170,column:10}}],line:148}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx"],names:[],mappings:"AAoBW,cAyIL,YAzIK;AApBX,OAAO,WAAW;AAClB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAEtD,OAAO,6BAA6B;AAEpC,OAAO;AAEP,SAAQ,aAAY;AACpB,SAAQ,KAAK,MAAM,eAAc;AAEjC,SAAQ,gBAAe;AAIvB,SAAS,aAAc,QAAkB;AACvC,MAAI,CAAC,UAAU,OAAO,SAAS,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO,oBAAC,UAAK,WAAU,mBACpB,iBAAO,IAAI,CAAC,UAAU,OAAO,KAAK,EAAE,SAAS,GAAG,GAAQ,CAAC,EAAE,KAAK,IAAI,GACvE;AAAA,EACF;AACF;AAqBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAmC;AAAA,EACnC;AAAA,EACA,iBAAqC;AAAA,EAErC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU;AAAA,MACV,QAAQ,CAAC;AAAA,MACT,QAAQ,CAAC;AAAA,IACX;AACA,SAAK,cAAc,SAAS,KAAK,aAAa,KAAK,IAAI,GAAG,GAAG;AAAA,EAC/D;AAAA,EAEA,aAAa,aAAiC;AAC5C,QAAG,CAAC,KAAK,IAAK;AAGd,SAAK,IAAI,UAAU,EAAE,MAAM;AAC3B,UAAM,KAAK,KAAK,WAAW;AAAA,EAC7B;AAAA,EAEA,mBAAmB,WAAuC;AACxD,QAAI,KAAK,MAAM,aAAa,UAAU,UAAU;AAC9C,WAAK;AAAA,QACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MACpD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,SAAK,UAAU,IAAI,QAAQ;AAAA,MACzB,SAAS,KAAK;AAAA,MACd,SAAS;AAAA,QACP,WAAW;AAAA,UACT,UAAU;AAAA,QACZ;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,MAAM,IAAI,IAAI;AAAA,MAClB,QAAQ,KAAK;AAAA,MACb,UAAU,CAAC,KAAK,OAAO;AAAA,MACvB,MAAM,IAAI,KAAK;AAAA,QACb,MAAM;AAAA,QACN,QAAQ,CAAC,KAAK,GAAG;AAAA,MACnB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,eAAe,CAAC,QAAQ;AAC7B,YAAM,SAAS,SAAS,IAAI,UAAU;AACtC,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAED,UAAM,YAAY,MAAM;AACtB,YAAM,OAAO,IAAI,QAAQ,EAAE,QAAQ;AACnC,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAElD,WAAK,MAAM,SAAS;AAAA,QAClB;AAAA,QACA,QAAQ;AAAA,UACN,KAAK,OAAO,CAAC;AAAA,UACb,KAAK,OAAO,CAAC;AAAA,QACf;AAAA,MACF,CAAC;AAAA,IACH;AAEA,cAAU;AACV,QAAI,GAAG,WAAW,SAAS;AAE3B,QAAI,GAAG,cAAc,CAAC,OAAO;AAC3B,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAClD,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,QACA,UAAU,IAAI,QAAQ,EAAE,YAAY,EAAE,QAAQ,CAAC;AAAA,QAC/C,MAAM,IAAI,QAAQ,EAAE,QAAQ,EAAG,QAAQ,CAAC;AAAA,MAC1C,CAAC;AAAA,IACH,CAAC;AAID,SAAK,MAAM;AACX,SAAK;AAAA,MACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,IACpD;AAAA,EACF;AAAA,EAEA,eAAe,CAAC,MAAW;AACzB,MAAE,OAAO,KAAK;AACd,SAAK,QAAS,YAAY,MAAS;AAAA,EACrC;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,yBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,KAAK,OAAK;AAAC,iBAAK,iBAAiB;AAAA,UAAE;AAAA,UACnC,OAAO,EAAC,YAAY,QAAO;AAAA,UAC3B,WAAU;AAAA,UAEV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,cAAY,EAAE,aAAa;AAAA,gBAC5B;AAAA;AAAA,YAED;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,UAAU,KAAK,MAAM,oBAAoB,CAAC;AAAA,gBAC1C,eAAe,KAAK,MAAM;AAAA;AAAA,YAC5B;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,oBACZ;AAAA,UAAE,OAAO;AAAA,QAAE;AAAA,QAAE,KAAK,MAAM;AAAA,SAC3B;AAAA,MACC,KAAK,MAAM,gBACV,qBAAC,SAAI,WAAU,qBACb;AAAA,6BAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,WAAW;AAAA,YAAE;AAAA,aAAC;AAAA,UACxB,oBAAC,UAAM,eAAK,MAAM,UAAS;AAAA,WAC7B;AAAA,SACF;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,KAAK,OAAK;AAAC,iBAAK,YAAY;AAAA,UAAE;AAAA,UAC9B,MAAK;AAAA,UACL,cAAY,EAAE,UAAU;AAAA,UACxB,OAAO;AAAA,YACL,GAAG,KAAK,MAAM;AAAA,UAChB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5f4719fc476214e7aff32d9043337b9c97544cf9"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return gi=function(){return s},s}gi();function yN(n){return gi().f[0]++,gi().s[0]++,gi().b[1][0]++,!n||(gi().b[1][1]++,n.length<2)?(gi().b[0][0]++,gi().s[1]++,null):(gi().b[0][1]++,gi().s[2]++,te.jsx("span",{className:"maputnik-coords",children:n.map(e=>(gi().f[1]++,gi().s[3]++,String(e).padStart(7,""))).join(", ")}))}class VCe extends On.Component{static defaultProps=(gi().s[4]++,{onMapLoaded:()=>{gi().f[2]++},onDataChange:()=>{gi().f[3]++},onLayerSelect:()=>{gi().f[4]++}});updateStyle;map;container=(gi().s[5]++,null);overlay;popupContainer=(gi().s[6]++,null);constructor(e){gi().f[5]++,gi().s[7]++,super(e),gi().s[8]++,this.state={zoom:"0",rotation:"0",cursor:[],center:[]},gi().s[9]++,this.updateStyle=UM.throttle(this._updateStyle.bind(this),200)}_updateStyle(e){if(gi().f[6]++,gi().s[10]++,this.map)gi().b[2][1]++;else{gi().b[2][0]++,gi().s[11]++;return}gi().s[12]++,this.map.getLayers().clear(),gi().s[13]++,YCe(this.map,e)}componentDidUpdate(e){gi().f[7]++,gi().s[14]++,this.props.mapStyle!==e.mapStyle?(gi().b[3][0]++,gi().s[15]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))):gi().b[3][1]++}componentDidMount(){gi().f[8]++,gi().s[16]++,this.overlay=new Gve({element:this.popupContainer,autoPan:{animation:{duration:250}}});const e=(gi().s[17]++,new X4({target:this.container,overlays:[this.overlay],view:new Bm({zoom:1,center:[180,-90]})}));gi().s[18]++,e.on("pointermove",i=>{gi().f[9]++;const r=(gi().s[19]++,YO(i.coordinate));gi().s[20]++,this.setState({cursor:[r[0].toFixed(2),r[1].toFixed(2)]})}),gi().s[21]++;const t=()=>{gi().f[10]++;const i=(gi().s[22]++,e.getView().getZoom()),r=(gi().s[23]++,YO(e.getView().getCenter()));gi().s[24]++,this.props.onChange({zoom:i,center:{lng:r[0],lat:r[1]}})};gi().s[25]++,t(),gi().s[26]++,e.on("moveend",t),gi().s[27]++,e.on("postrender",i=>{gi().f[11]++;const r=(gi().s[28]++,YO(e.getView().getCenter()));gi().s[29]++,this.setState({center:[r[0].toFixed(2),r[1].toFixed(2)],rotation:e.getView().getRotation().toFixed(2),zoom:e.getView().getZoom().toFixed(2)})}),gi().s[30]++,this.map=e,gi().s[31]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))}closeOverlay=(gi().s[32]++,e=>{gi().f[12]++,gi().s[33]++,e.target.blur(),gi().s[34]++,this.overlay.setPosition(void 0)});render(){gi().f[13]++;const e=(gi().s[35]++,this.props.t);return gi().s[36]++,te.jsxs("div",{className:"maputnik-ol-container",children:[te.jsxs("div",{ref:t=>{gi().f[14]++,gi().s[37]++,this.popupContainer=t},style:{background:"black"},className:"maputnik-popup",children:[te.jsx("button",{className:"maplibregl-popup-close-button",onClick:this.closeOverlay,"aria-label":e("Close popup"),children:""}),te.jsx(vX,{features:(gi().b[4][0]++,this.state.selectedFeatures||(gi().b[4][1]++,[])),onLayerSelect:this.props.onLayerSelect})]}),te.jsxs("div",{className:"maputnik-ol-zoom",children:[e("Zoom:")," ",this.state.zoom]}),(gi().b[5][0]++,this.props.debugToolbox&&(gi().b[5][1]++,te.jsxs("div",{className:"maputnik-ol-debug",children:[te.jsxs("div",{children:[te.jsxs("label",{children:[e("cursor:")," "]}),te.jsx("span",{children:yN(this.state.cursor)})]}),te.jsxs("div",{children:[te.jsxs("label",{children:[e("center:")," "]}),te.jsx("span",{children:yN(this.state.center)})]}),te.jsxs("div",{children:[te.jsxs("label",{children:[e("rotation:")," "]}),te.jsx("span",{children:this.state.rotation})]})]}))),te.jsx("div",{className:"maputnik-ol",ref:t=>{gi().f[15]++,gi().s[38]++,this.container=t},role:"region","aria-label":e("Map view"),style:{...this.props.style}})]})}}const $Ce=(gi().s[39]++,Mo()(VCe));var w8={exports:{}};var vN;function HCe(){return vN||(vN=1,(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var o="",s=0;s<arguments.length;s++){var a=arguments[s];a&&(o=r(o,i(a)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var s="";for(var a in o)e.call(o,a)&&o[a]&&(s=r(s,a));return s}function r(o,s){return s?o?o+" "+s:o+s:o}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(w8)),w8.exports}var ZCe=HCe();const x0=Zl(ZCe),XCe=/("(?:[^\\"]|\\.)*")|[:,]/g;function JCe(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),i=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:r}=e;return(function o(s,a,c){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const f=JSON.stringify(s,r);if(f===void 0)return f;const y=i-a.length-c;if(f.length<=y){const _=f.replace(XCe,(E,I)=>I||`${E} `);if(_.length<=y)return _}if(r!=null&&(s=JSON.parse(f),r=void 0),typeof s=="object"&&s!==null){const _=a+t,E=[];let I=0,P,K;if(Array.isArray(s)){P="[",K="]";const{length:z}=s;for(;I<z;I++)E.push(o(s[I],_,I===z-1?0:1)||"null")}else{P="{",K="}";const z=Object.keys(s),{length:Q}=z;for(;I<Q;I++){const V=z[I],$=`${JSON.stringify(V)}: `,Z=o(s[V],_,$.length+(I===Q-1?0:1));Z!==void 0&&E.push($+Z)}}if(E.length>0)return[P,t+E.join(`,
${_}`),K].join(`
${a}`)}return f})(n,"",0)}let ED=[],qee=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?qee:ED).push(t=t+n[e])})();function e_e(n){if(n<768)return!1;for(let e=0,t=ED.length;;){let i=e+t>>1;if(n<ED[i])t=i;else if(n>=qee[i])e=i+1;else return!0;if(e==t)return!1}}function bN(n){return n>=127462&&n<=127487}const CN=8205;function t_e(n,e,t=!0,i=!0){return(t?Yee:n_e)(n,e,i)}function Yee(n,e,t){if(e==n.length)return e;e&&Vee(n.charCodeAt(e))&&$ee(n.charCodeAt(e-1))&&e--;let i=S8(n,e);for(e+=_N(i);e<n.length;){let r=S8(n,e);if(i==CN||r==CN||t&&e_e(r))e+=_N(r),i=r;else if(bN(r)){let o=0,s=e-2;for(;s>=0&&bN(S8(n,s));)o++,s-=2;if(o%2==0)break;e+=2}else break}return e}function n_e(n,e,t){for(;e>0;){let i=Yee(n,e-2,t);if(i<e)return i;e--}return 0}function S8(n,e){let t=n.charCodeAt(e);if(!$ee(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return Vee(i)?(t-55296<<10)+(i-56320)+65536:t}function Vee(n){return n>=56320&&n<57344}function $ee(n){return n>=55296&&n<56320}function _N(n){return n<65536?1:2}class Zo{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=h2(this,e,t);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(t,this.length,r,1),Yg.from(r,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=h2(this,e,t);let i=[];return this.decompose(e,t,i,0),Yg.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new l4(this),o=new l4(e);for(let s=t,a=t;;){if(r.next(s),o.next(s),s=0,r.lineBreak!=o.lineBreak||r.done!=o.done||r.value!=o.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new l4(this,e)}iterRange(e,t=this.length){return new Hee(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Zee(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Zo.empty:e.length<=32?new $l(e):Yg.from($l.split(e,[]))}}class $l extends Zo{constructor(e,t=i_e(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,r){for(let o=0;;o++){let s=this.text[o],a=r+s.length;if((t?i:a)>=e)return new r_e(r,a,i,s);r=a+1,i++}}decompose(e,t,i,r){let o=e<=0&&t>=this.length?this:new $l(xN(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(r&1){let s=i.pop(),a=lS(o.text,s.text.slice(),0,o.length);if(a.length<=32)i.push(new $l(a,s.length+o.length));else{let c=a.length>>1;i.push(new $l(a.slice(0,c)),new $l(a.slice(c)))}}else i.push(o)}replace(e,t,i){if(!(i instanceof $l))return super.replace(e,t,i);[e,t]=h2(this,e,t);let r=lS(this.text,lS(i.text,xN(this.text,0,e)),t),o=this.length+i.length-(t-e);return r.length<=32?new $l(r,o):Yg.from($l.split(r,[]),o)}sliceString(e,t=this.length,i=`
`){[e,t]=h2(this,e,t);let r="";for(let o=0,s=0;o<=t&&s<this.text.length;s++){let a=this.text[s],c=o+a.length;o>e&&s&&(r+=i),e<c&&t>o&&(r+=a.slice(Math.max(0,e-o),t-o)),o=c+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],r=-1;for(let o of e)i.push(o),r+=o.length+1,i.length==32&&(t.push(new $l(i,r)),i=[],r=-1);return r>-1&&t.push(new $l(i,r)),t}}class Yg extends Zo{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,r){for(let o=0;;o++){let s=this.children[o],a=r+s.length,c=i+s.lines-1;if((t?c:a)>=e)return s.lineInner(e,t,i,r);r=a+1,i=c+1}}decompose(e,t,i,r){for(let o=0,s=0;s<=t&&o<this.children.length;o++){let a=this.children[o],c=s+a.length;if(e<=c&&t>=s){let f=r&((s<=e?1:0)|(c>=t?2:0));s>=e&&c<=t&&!f?i.push(a):a.decompose(e-s,t-s,i,f)}s=c+1}}replace(e,t,i){if([e,t]=h2(this,e,t),i.lines<this.lines)for(let r=0,o=0;r<this.children.length;r++){let s=this.children[r],a=o+s.length;if(e>=o&&t<=a){let c=s.replace(e-o,t-o,i),f=this.lines-s.lines+c.lines;if(c.lines<f>>4&&c.lines>f>>6){let y=this.children.slice();return y[r]=c,new Yg(y,this.length-(t-e)+i.length)}return super.replace(o,a,c)}o=a+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=h2(this,e,t);let r="";for(let o=0,s=0;o<this.children.length&&s<=t;o++){let a=this.children[o],c=s+a.length;s>e&&o&&(r+=i),e<c&&t>s&&(r+=a.sliceString(e-s,t-s,i)),s=c+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Yg))return 0;let i=0,[r,o,s,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,o+=t){if(r==s||o==a)return i;let c=this.children[r],f=e.children[o];if(c!=f)return i+c.scanIdentical(f,t);i+=c.length+1}}static from(e,t=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let I of e)i+=I.lines;if(i<32){let I=[];for(let P of e)P.flatten(I);return new $l(I,t)}let r=Math.max(32,i>>5),o=r<<1,s=r>>1,a=[],c=0,f=-1,y=[];function _(I){let P;if(I.lines>o&&I instanceof Yg)for(let K of I.children)_(K);else I.lines>s&&(c>s||!c)?(E(),a.push(I)):I instanceof $l&&c&&(P=y[y.length-1])instanceof $l&&I.lines+P.lines<=32?(c+=I.lines,f+=I.length+1,y[y.length-1]=new $l(P.text.concat(I.text),P.length+1+I.length)):(c+I.lines>r&&E(),c+=I.lines,f+=I.length+1,y.push(I))}function E(){c!=0&&(a.push(y.length==1?y[0]:Yg.from(y,f)),f=-1,c=y.length=0)}for(let I of e)_(I);return E(),a.length==1?a[0]:new Yg(a,t)}}Zo.empty=new $l([""],0);function i_e(n){let e=-1;for(let t of n)e+=t.length+1;return e}function lS(n,e,t=0,i=1e9){for(let r=0,o=0,s=!0;o<n.length&&r<=i;o++){let a=n[o],c=r+a.length;c>=t&&(c>i&&(a=a.slice(0,i-r)),r<t&&(a=a.slice(t-r)),s?(e[e.length-1]+=a,s=!1):e.push(a)),r=c+1}return e}function xN(n,e,t){return lS(n,[""],e,t)}class l4{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof $l?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],o=this.offsets[i],s=o>>1,a=r instanceof $l?r.text.length:r.children.length;if(s==(t>0?a:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof $l){let c=r.text[s+(t<0?-1:0)];if(this.offsets[i]+=t,c.length>Math.max(0,e))return this.value=e==0?c:t>0?c.slice(e):c.slice(0,c.length-e),this;e-=c.length}else{let c=r.children[s+(t<0?-1:0)];e>c.length?(e-=c.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(c),this.offsets.push(t>0?1:(c instanceof $l?c.text.length:c.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Hee{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new l4(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=i?r:t<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Zee{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:r}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Zo.prototype[Symbol.iterator]=function(){return this.iter()},l4.prototype[Symbol.iterator]=Hee.prototype[Symbol.iterator]=Zee.prototype[Symbol.iterator]=function(){return this});class r_e{constructor(e,t,i,r){this.from=e,this.to=t,this.number=i,this.text=r}get length(){return this.to-this.from}}function h2(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function nA(n,e,t=!0,i=!0){return t_e(n,e,t,i)}function o_e(n){return n>=56320&&n<57344}function s_e(n){return n>=55296&&n<56320}function cd(n,e){let t=n.charCodeAt(e);if(!s_e(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return o_e(i)?(t-55296<<10)+(i-56320)+65536:t}function YL(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function Vg(n){return n<65536?1:2}const BD=/\r\n?|\n/;var Ch=(function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n})(Ch||(Ch={}));class f0{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,r=0;t<this.sections.length;){let o=this.sections[t++],s=this.sections[t++];s<0?(e(i,r,o),r+=o):r+=s,i+=o}}iterChangedRanges(e,t=!1){OD(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];r<0?e.push(i,r):e.push(r,i)}return new f0(e)}composeDesc(e){return this.empty?e:e.empty?this:Xee(this,e)}mapDesc(e,t=!1){return e.empty?this:ID(this,e,t)}mapPos(e,t=-1,i=Ch.Simple){let r=0,o=0;for(let s=0;s<this.sections.length;){let a=this.sections[s++],c=this.sections[s++],f=r+a;if(c<0){if(f>e)return o+(e-r);o+=a}else{if(i!=Ch.Simple&&f>=e&&(i==Ch.TrackDel&&r<e&&f>e||i==Ch.TrackBefore&&r<e||i==Ch.TrackAfter&&f>e))return null;if(f>e||f==e&&t<0&&!a)return e==r||t<0?o:o+c;o+=c}r=f}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return o}touchesRange(e,t=e){for(let i=0,r=0;i<this.sections.length&&r<=t;){let o=this.sections[i++],s=this.sections[i++],a=r+o;if(s>=0&&r<=t&&a>=e)return r<e&&a>t?"cover":!0;r=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new f0(e)}static create(e){return new f0(e)}}class qu extends f0{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return OD(this,(t,i,r,o,s)=>e=e.replace(r,r+(i-t),s),!1),e}mapDesc(e,t=!1){return ID(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let r=0,o=0;r<t.length;r+=2){let s=t[r],a=t[r+1];if(a>=0){t[r]=a,t[r+1]=s;let c=r>>1;for(;i.length<c;)i.push(Zo.empty);i.push(s?e.slice(o,o+s):Zo.empty)}o+=s}return new qu(t,i)}compose(e){return this.empty?e:e.empty?this:Xee(this,e,!0)}map(e,t=!1){return e.empty?this:ID(this,e,t,!0)}iterChanges(e,t=!1){OD(this,e,t)}get desc(){return f0.create(this.sections)}filter(e){let t=[],i=[],r=[],o=new tM(this);e:for(let s=0,a=0;;){let c=s==e.length?1e9:e[s++];for(;a<c||a==c&&o.len==0;){if(o.done)break e;let y=Math.min(o.len,c-a);UA(r,y,-1);let _=o.ins==-1?-1:o.off==0?o.ins:0;UA(t,y,_),_>0&&Av(i,t,o.text),o.forward(y),a+=y}let f=e[s++];for(;a<f;){if(o.done)break e;let y=Math.min(o.len,f-a);UA(t,y,-1),UA(r,y,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(y),a+=y}}return{changes:new qu(t,i),filtered:f0.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],r=this.sections[t+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let r=[],o=[],s=0,a=null;function c(y=!1){if(!y&&!r.length)return;s<t&&UA(r,t-s,-1);let _=new qu(r,o);a=a?a.compose(_.map(a)):_,r=[],o=[],s=0}function f(y){if(Array.isArray(y))for(let _ of y)f(_);else if(y instanceof qu){if(y.length!=t)throw new RangeError(`Mismatched change set length (got ${y.length}, expected ${t})`);c(),a=a?a.compose(y.map(a)):y}else{let{from:_,to:E=_,insert:I}=y;if(_>E||_<0||E>t)throw new RangeError(`Invalid change range ${_} to ${E} (in doc of length ${t})`);let P=I?typeof I=="string"?Zo.of(I.split(i||BD)):I:Zo.empty,K=P.length;if(_==E&&K==0)return;_<s&&c(),_>s&&UA(r,_-s,-1),UA(r,E-_,K),Av(o,r,P),s=E}}return f(e),c(!a),a}static empty(e){return new qu(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let r=0;r<e.length;r++){let o=e[r];if(typeof o=="number")t.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((s,a)=>a&&typeof s!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)t.push(o[0],0);else{for(;i.length<r;)i.push(Zo.empty);i[r]=Zo.of(o.slice(1)),t.push(o[0],i[r].length)}}}return new qu(t,i)}static createSet(e,t){return new qu(e,t)}}function UA(n,e,t,i=!1){if(e==0&&t<=0)return;let r=n.length-2;r>=0&&t<=0&&t==n[r+1]?n[r]+=e:r>=0&&e==0&&n[r]==0?n[r+1]+=t:i?(n[r]+=e,n[r+1]+=t):n.push(e,t)}function Av(n,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<i;)n.push(Zo.empty);n.push(t)}}function OD(n,e,t){let i=n.inserted;for(let r=0,o=0,s=0;s<n.sections.length;){let a=n.sections[s++],c=n.sections[s++];if(c<0)r+=a,o+=a;else{let f=r,y=o,_=Zo.empty;for(;f+=a,y+=c,c&&i&&(_=_.append(i[s-2>>1])),!(t||s==n.sections.length||n.sections[s+1]<0);)a=n.sections[s++],c=n.sections[s++];e(r,f,o,y,_),r=f,o=y}}}function ID(n,e,t,i=!1){let r=[],o=i?[]:null,s=new tM(n),a=new tM(e);for(let c=-1;;){if(s.done&&a.len||a.done&&s.len)throw new Error("Mismatched change set lengths");if(s.ins==-1&&a.ins==-1){let f=Math.min(s.len,a.len);UA(r,f,-1),s.forward(f),a.forward(f)}else if(a.ins>=0&&(s.ins<0||c==s.i||s.off==0&&(a.len<s.len||a.len==s.len&&!t))){let f=a.len;for(UA(r,a.ins,-1);f;){let y=Math.min(s.len,f);s.ins>=0&&c<s.i&&s.len<=y&&(UA(r,0,s.ins),o&&Av(o,r,s.text),c=s.i),s.forward(y),f-=y}a.next()}else if(s.ins>=0){let f=0,y=s.len;for(;y;)if(a.ins==-1){let _=Math.min(y,a.len);f+=_,y-=_,a.forward(_)}else if(a.ins==0&&a.len<y)y-=a.len,a.next();else break;UA(r,f,c<s.i?s.ins:0),o&&c<s.i&&Av(o,r,s.text),c=s.i,s.forward(s.len-y)}else{if(s.done&&a.done)return o?qu.createSet(r,o):f0.create(r);throw new Error("Mismatched change set lengths")}}}function Xee(n,e,t=!1){let i=[],r=t?[]:null,o=new tM(n),s=new tM(e);for(let a=!1;;){if(o.done&&s.done)return r?qu.createSet(i,r):f0.create(i);if(o.ins==0)UA(i,o.len,0,a),o.next();else if(s.len==0&&!s.done)UA(i,0,s.ins,a),r&&Av(r,i,s.text),s.next();else{if(o.done||s.done)throw new Error("Mismatched change set lengths");{let c=Math.min(o.len2,s.len),f=i.length;if(o.ins==-1){let y=s.ins==-1?-1:s.off?0:s.ins;UA(i,c,y,a),r&&y&&Av(r,i,s.text)}else s.ins==-1?(UA(i,o.off?0:o.len,c,a),r&&Av(r,i,o.textBit(c))):(UA(i,o.off?0:o.len,s.off?0:s.ins,a),r&&!s.off&&Av(r,i,s.text));a=(o.ins>c||s.ins>=0&&s.len>c)&&(a||i.length>f),o.forward2(c),s.forward(c)}}}}class tM{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Zo.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?Zo.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Xb{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new Xb(i,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return Mn.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Mn.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Mn.range(e.anchor,e.head)}static create(e,t,i){return new Xb(e,t,i)}}class Mn{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:Mn.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Mn([this.main],0)}addRange(e,t=!0){return Mn.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,Mn.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Mn(e.ranges.map(t=>Xb.fromJSON(t)),e.main)}static single(e,t=e){return new Mn([Mn.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let o=e[r];if(o.empty?o.from<=i:o.from<i)return Mn.normalized(e.slice(),t);i=o.to}return new Mn(e,t)}static cursor(e,t=0,i,r){return Xb.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,t,i,r){let o=(i??16777215)<<6|(r==null?7:Math.min(6,r));return t<e?Xb.create(t,e,48|o):Xb.create(e,t,(t>e?8:0)|o)}static normalized(e,t=0){let i=e[t];e.sort((r,o)=>r.from-o.from),t=e.indexOf(i);for(let r=1;r<e.length;r++){let o=e[r],s=e[r-1];if(o.empty?o.from<=s.to:o.from<s.to){let a=s.from,c=Math.max(o.to,s.to);r<=t&&t--,e.splice(--r,2,o.anchor>o.head?Mn.range(c,a):Mn.range(a,c))}}return new Mn(e,t)}}function Jee(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let VL=0;class yi{constructor(e,t,i,r,o){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=r,this.id=VL++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new yi(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:$L),!!e.static,e.enables)}of(e){return new uS([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new uS(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new uS(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function $L(n,e){return n==e||n.length==e.length&&n.every((t,i)=>t===e[i])}class uS{constructor(e,t,i,r){this.dependencies=e,this.facet=t,this.type=i,this.value=r,this.id=VL++}dynamicSlot(e){var t;let i=this.value,r=this.facet.compareInput,o=this.id,s=e[o]>>1,a=this.type==2,c=!1,f=!1,y=[];for(let _ of this.dependencies)_=="doc"?c=!0:_=="selection"?f=!0:(((t=e[_.id])!==null&&t!==void 0?t:1)&1)==0&&y.push(e[_.id]);return{create(_){return _.values[s]=i(_),1},update(_,E){if(c&&E.docChanged||f&&(E.docChanged||E.selection)||TD(_,y)){let I=i(_);if(a?!MN(I,_.values[s],r):!r(I,_.values[s]))return _.values[s]=I,1}return 0},reconfigure:(_,E)=>{let I,P=E.config.address[o];if(P!=null){let K=gE(E,P);if(this.dependencies.every(z=>z instanceof yi?E.facet(z)===_.facet(z):z instanceof Hu?E.field(z,!1)==_.field(z,!1):!0)||(a?MN(I=i(_),K,r):r(I=i(_),K)))return _.values[s]=K,0}else I=i(_);return _.values[s]=I,1}}}}function MN(n,e,t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!t(n[i],e[i]))return!1;return!0}function TD(n,e){let t=!1;for(let i of e)u4(n,i)&1&&(t=!0);return t}function a_e(n,e,t){let i=t.map(c=>n[c.id]),r=t.map(c=>c.type),o=i.filter(c=>!(c&1)),s=n[e.id]>>1;function a(c){let f=[];for(let y=0;y<i.length;y++){let _=gE(c,i[y]);if(r[y]==2)for(let E of _)f.push(E);else f.push(_)}return e.combine(f)}return{create(c){for(let f of i)u4(c,f);return c.values[s]=a(c),1},update(c,f){if(!TD(c,o))return 0;let y=a(c);return e.compare(y,c.values[s])?0:(c.values[s]=y,1)},reconfigure(c,f){let y=TD(c,i),_=f.config.facets[e.id],E=f.facet(e);if(_&&!y&&$L(t,_))return c.values[s]=E,0;let I=a(c);return e.compare(I,E)?(c.values[s]=E,0):(c.values[s]=I,1)}}}const ow=yi.define({static:!0});class Hu{constructor(e,t,i,r,o){this.id=e,this.createF=t,this.updateF=i,this.compareF=r,this.spec=o,this.provides=void 0}static define(e){let t=new Hu(VL++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(ow).find(i=>i.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,r)=>{let o=i.values[t],s=this.updateF(o,r);return this.compareF(o,s)?0:(i.values[t]=s,1)},reconfigure:(i,r)=>{let o=i.facet(ow),s=r.facet(ow),a;return(a=o.find(c=>c.field==this))&&a!=s.find(c=>c.field==this)?(i.values[t]=a.create(i),1):r.config.address[this.id]!=null?(i.values[t]=r.field(this),0):(i.values[t]=this.create(i),1)}}}init(e){return[this,ow.of({field:this,create:e})]}get extension(){return this}}const Gb={lowest:4,low:3,default:2,high:1,highest:0};function h3(n){return e=>new ete(e,n)}const KC={highest:h3(Gb.highest),high:h3(Gb.high),default:h3(Gb.default),low:h3(Gb.low),lowest:h3(Gb.lowest)};class ete{constructor(e,t){this.inner=e,this.prec=t}}class l5{of(e){return new kD(this,e)}reconfigure(e){return l5.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class kD{constructor(e,t){this.compartment=e,this.inner=t}}class mE{constructor(e,t,i,r,o,s){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=r,this.staticValues=o,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let r=[],o=Object.create(null),s=new Map;for(let E of l_e(e,t,s))E instanceof Hu?r.push(E):(o[E.facet.id]||(o[E.facet.id]=[])).push(E);let a=Object.create(null),c=[],f=[];for(let E of r)a[E.id]=f.length<<1,f.push(I=>E.slot(I));let y=i?.config.facets;for(let E in o){let I=o[E],P=I[0].facet,K=y&&y[E]||[];if(I.every(z=>z.type==0))if(a[P.id]=c.length<<1|1,$L(K,I))c.push(i.facet(P));else{let z=P.combine(I.map(Q=>Q.value));c.push(i&&P.compare(z,i.facet(P))?i.facet(P):z)}else{for(let z of I)z.type==0?(a[z.id]=c.length<<1|1,c.push(z.value)):(a[z.id]=f.length<<1,f.push(Q=>z.dynamicSlot(Q)));a[P.id]=f.length<<1,f.push(z=>a_e(z,P,I))}}let _=f.map(E=>E(a));return new mE(e,s,_,a,c,o)}}function l_e(n,e,t){let i=[[],[],[],[],[]],r=new Map;function o(s,a){let c=r.get(s);if(c!=null){if(c<=a)return;let f=i[c].indexOf(s);f>-1&&i[c].splice(f,1),s instanceof kD&&t.delete(s.compartment)}if(r.set(s,a),Array.isArray(s))for(let f of s)o(f,a);else if(s instanceof kD){if(t.has(s.compartment))throw new RangeError("Duplicate use of compartment in extensions");let f=e.get(s.compartment)||s.inner;t.set(s.compartment,f),o(f,a)}else if(s instanceof ete)o(s.inner,s.prec);else if(s instanceof Hu)i[a].push(s),s.provides&&o(s.provides,a);else if(s instanceof uS)i[a].push(s),s.facet.extensions&&o(s.facet.extensions,Gb.default);else{let f=s.extension;if(!f)throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(f,a)}}return o(n,Gb.default),i.reduce((s,a)=>s.concat(a))}function u4(n,e){if(e&1)return 2;let t=e>>1,i=n.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[t]=4;let r=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|r}function gE(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const tte=yi.define(),DD=yi.define({combine:n=>n.some(e=>e),static:!0}),nte=yi.define({combine:n=>n.length?n[0]:void 0,static:!0}),ite=yi.define(),rte=yi.define(),ote=yi.define(),ste=yi.define({combine:n=>n.length?n[0]:!1});class G1{constructor(e,t){this.type=e,this.value=t}static define(){return new u_e}}class u_e{of(e){return new G1(this,e)}}class c_e{constructor(e){this.map=e}of(e){return new jr(this,e)}}class jr{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new jr(this.type,t)}is(e){return this.type==e}static define(e={}){return new c_e(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let r of e){let o=r.map(t);o&&i.push(o)}return i}}jr.reconfigure=jr.define();jr.appendConfig=jr.define();class $u{constructor(e,t,i,r,o,s){this.startState=e,this.changes=t,this.selection=i,this.effects=r,this.annotations=o,this.scrollIntoView=s,this._doc=null,this._state=null,i&&Jee(i,t.newLength),o.some(a=>a.type==$u.time)||(this.annotations=o.concat($u.time.of(Date.now())))}static create(e,t,i,r,o,s){return new $u(e,t,i,r,o,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation($u.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}$u.time=G1.define();$u.userEvent=G1.define();$u.addToHistory=G1.define();$u.remote=G1.define();function A_e(n,e){let t=[];for(let i=0,r=0;;){let o,s;if(i<n.length&&(r==e.length||e[r]>=n[i]))o=n[i++],s=n[i++];else if(r<e.length)o=e[r++],s=e[r++];else return t;!t.length||t[t.length-1]<o?t.push(o,s):t[t.length-1]<s&&(t[t.length-1]=s)}}function ate(n,e,t){var i;let r,o,s;return t?(r=e.changes,o=qu.empty(e.changes.length),s=n.changes.compose(e.changes)):(r=e.changes.map(n.changes),o=n.changes.mapDesc(e.changes,!0),s=n.changes.compose(r)),{changes:s,selection:e.selection?e.selection.map(o):(i=n.selection)===null||i===void 0?void 0:i.map(r),effects:jr.mapEffects(n.effects,r).concat(jr.mapEffects(e.effects,o)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function RD(n,e,t){let i=e.selection,r=Fx(e.annotations);return e.userEvent&&(r=r.concat($u.userEvent.of(e.userEvent))),{changes:e.changes instanceof qu?e.changes:qu.of(e.changes||[],t,n.facet(nte)),selection:i&&(i instanceof Mn?i:Mn.single(i.anchor,i.head)),effects:Fx(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function lte(n,e,t){let i=RD(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(t=!1);let s=!!e[o].sequential;i=ate(i,RD(n,e[o],s?i.changes.newLength:n.doc.length),s)}let r=$u.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return d_e(t?h_e(r):r)}function h_e(n){let e=n.startState,t=!0;for(let r of e.facet(ite)){let o=r(n);if(o===!1){t=!1;break}Array.isArray(o)&&(t=t===!0?o:A_e(t,o))}if(t!==!0){let r,o;if(t===!1)o=n.changes.invertedDesc,r=qu.empty(e.doc.length);else{let s=n.changes.filter(t);r=s.changes,o=s.filtered.mapDesc(s.changes).invertedDesc}n=$u.create(e,r,n.selection&&n.selection.map(o),jr.mapEffects(n.effects,o),n.annotations,n.scrollIntoView)}let i=e.facet(rte);for(let r=i.length-1;r>=0;r--){let o=i[r](n);o instanceof $u?n=o:Array.isArray(o)&&o.length==1&&o[0]instanceof $u?n=o[0]:n=lte(e,Fx(o),!1)}return n}function d_e(n){let e=n.startState,t=e.facet(ote),i=n;for(let r=t.length-1;r>=0;r--){let o=t[r](n);o&&Object.keys(o).length&&(i=ate(i,RD(e,o,n.changes.newLength),!0))}return i==n?n:$u.create(e,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const f_e=[];function Fx(n){return n==null?f_e:Array.isArray(n)?n:[n]}var Va=(function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n})(Va||(Va={}));const p_e=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let PD;try{PD=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function m_e(n){if(PD)return PD.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||p_e.test(t)))return!0}return!1}function g_e(n){return e=>{if(!/\S/.test(e))return Va.Space;if(m_e(e))return Va.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return Va.Word;return Va.Other}}class Ho{constructor(e,t,i,r,o,s){this.config=e,this.doc=t,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=o,s&&(s._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)u4(this,a<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return u4(this,i),gE(this,i)}update(...e){return lte(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:r}=t;for(let a of e.effects)a.is(l5.reconfigure)?(t&&(r=new Map,t.compartments.forEach((c,f)=>r.set(f,c)),t=null),r.set(a.value.compartment,a.value.extension)):a.is(jr.reconfigure)?(t=null,i=a.value):a.is(jr.appendConfig)&&(t=null,i=Fx(i).concat(a.value));let o;t?o=e.startState.values.slice():(t=mE.resolve(i,r,this),o=new Ho(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(c,f)=>f.reconfigure(c,this),null).values);let s=e.startState.facet(DD)?e.newSelection:e.newSelection.asSingle();new Ho(t,e.newDoc,s,o,(a,c)=>c.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:Mn.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),r=this.changes(i.changes),o=[i.range],s=Fx(i.effects);for(let a=1;a<t.ranges.length;a++){let c=e(t.ranges[a]),f=this.changes(c.changes),y=f.map(r);for(let E=0;E<a;E++)o[E]=o[E].map(y);let _=r.mapDesc(f,!0);o.push(c.range.map(_)),r=r.compose(y),s=jr.mapEffects(s,y).concat(jr.mapEffects(Fx(c.effects),_))}return{changes:r,selection:Mn.create(o,t.mainIndex),effects:s}}changes(e=[]){return e instanceof qu?e:qu.of(e,this.doc.length,this.facet(Ho.lineSeparator))}toText(e){return Zo.of(e.split(this.facet(Ho.lineSeparator)||BD))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(u4(this,t),gE(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof Hu&&this.config.address[r.id]!=null&&(t[i]=r.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let o in i)if(Object.prototype.hasOwnProperty.call(e,o)){let s=i[o],a=e[o];r.push(s.init(c=>s.spec.fromJSON(a,c)))}}return Ho.create({doc:e.doc,selection:Mn.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=mE.resolve(e.extensions||[],new Map),i=e.doc instanceof Zo?e.doc:Zo.of((e.doc||"").split(t.staticFacet(Ho.lineSeparator)||BD)),r=e.selection?e.selection instanceof Mn?e.selection:Mn.single(e.selection.anchor,e.selection.head):Mn.single(0);return Jee(r,i.length),t.staticFacet(DD)||(r=r.asSingle()),new Ho(t,i,r,t.dynamicSlots.map(()=>null),(o,s)=>s.create(o),null)}get tabSize(){return this.facet(Ho.tabSize)}get lineBreak(){return this.facet(Ho.lineSeparator)||`
`}get readOnly(){return this.facet(ste)}phrase(e,...t){for(let i of this.facet(Ho.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let o=+(r||1);return!o||o>t.length?i:t[o-1]})),e}languageDataAt(e,t,i=-1){let r=[];for(let o of this.facet(tte))for(let s of o(this,t,i))Object.prototype.hasOwnProperty.call(s,e)&&r.push(s[e]);return r}charCategorizer(e){return g_e(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:r}=this.doc.lineAt(e),o=this.charCategorizer(e),s=e-i,a=e-i;for(;s>0;){let c=nA(t,s,!1);if(o(t.slice(c,s))!=Va.Word)break;s=c}for(;a<r;){let c=nA(t,a);if(o(t.slice(a,c))!=Va.Word)break;a=c}return s==a?null:Mn.range(s+i,a+i)}}Ho.allowMultipleSelections=DD;Ho.tabSize=yi.define({combine:n=>n.length?n[0]:4});Ho.lineSeparator=nte;Ho.readOnly=ste;Ho.phrases=yi.define({compare(n,e){let t=Object.keys(n),i=Object.keys(e);return t.length==i.length&&t.every(r=>n[r]==e[r])}});Ho.languageData=tte;Ho.changeFilter=ite;Ho.transactionFilter=rte;Ho.transactionExtender=ote;l5.reconfigure=jr.define();function Qm(n,e,t={}){let i={};for(let r of n)for(let o of Object.keys(r)){let s=r[o],a=i[o];if(a===void 0)i[o]=s;else if(!(a===s||s===void 0))if(Object.hasOwnProperty.call(t,o))i[o]=t[o](a,s);else throw new Error("Config merge conflict for field "+o)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class MC{eq(e){return this==e}range(e,t=e){return LD.create(e,t,this)}}MC.prototype.startSide=MC.prototype.endSide=0;MC.prototype.point=!1;MC.prototype.mapMode=Ch.TrackDel;let LD=class ute{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new ute(e,t,i)}};function UD(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class HL{constructor(e,t,i,r){this.from=e,this.to=t,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,r=0){let o=i?this.to:this.from;for(let s=r,a=o.length;;){if(s==a)return s;let c=s+a>>1,f=o[c]-e||(i?this.value[c].endSide:this.value[c].startSide)-t;if(c==s)return f>=0?s:a;f>=0?a=c:s=c+1}}between(e,t,i,r){for(let o=this.findIndex(t,-1e9,!0),s=this.findIndex(i,1e9,!1,o);o<s;o++)if(r(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,t){let i=[],r=[],o=[],s=-1,a=-1;for(let c=0;c<this.value.length;c++){let f=this.value[c],y=this.from[c]+e,_=this.to[c]+e,E,I;if(y==_){let P=t.mapPos(y,f.startSide,f.mapMode);if(P==null||(E=I=P,f.startSide!=f.endSide&&(I=t.mapPos(y,f.endSide),I<E)))continue}else if(E=t.mapPos(y,f.startSide),I=t.mapPos(_,f.endSide),E>I||E==I&&f.startSide>0&&f.endSide<=0)continue;(I-E||f.endSide-f.startSide)<0||(s<0&&(s=E),f.point&&(a=Math.max(a,I-E)),i.push(f),r.push(E-s),o.push(I-s))}return{mapped:i.length?new HL(r,o,i,a):null,pos:s}}}class Po{constructor(e,t,i,r){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=r}static create(e,t,i,r){return new Po(e,t,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:r=0,filterTo:o=this.length}=e,s=e.filter;if(t.length==0&&!s)return this;if(i&&(t=t.slice().sort(UD)),this.isEmpty)return t.length?Po.of(t):this;let a=new cte(this,null,-1).goto(0),c=0,f=[],y=new K1;for(;a.value||c<t.length;)if(c<t.length&&(a.from-t[c].from||a.startSide-t[c].value.startSide)>=0){let _=t[c++];y.addInner(_.from,_.to,_.value)||f.push(_)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(c==t.length||this.chunkEnd(a.chunkIndex)<t[c].from)&&(!s||r>this.chunkEnd(a.chunkIndex)||o<this.chunkPos[a.chunkIndex])&&y.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!s||r>a.to||o<a.from||s(a.from,a.to,a.value))&&(y.addInner(a.from,a.to,a.value)||f.push(LD.create(a.from,a.to,a.value))),a.next());return y.finishInner(this.nextLayer.isEmpty&&!f.length?Po.empty:this.nextLayer.update({add:f,filter:s,filterFrom:r,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],r=-1;for(let s=0;s<this.chunk.length;s++){let a=this.chunkPos[s],c=this.chunk[s],f=e.touchesRange(a,a+c.length);if(f===!1)r=Math.max(r,c.maxPoint),t.push(c),i.push(e.mapPos(a));else if(f===!0){let{mapped:y,pos:_}=c.map(a,e);y&&(r=Math.max(r,y.maxPoint),t.push(y),i.push(_))}}let o=this.nextLayer.map(e);return t.length==0?o:new Po(i,t,o||Po.empty,r)}between(e,t,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let o=this.chunkPos[r],s=this.chunk[r];if(t>=o&&e<=o+s.length&&s.between(o,e-o,t-o,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return nM.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return nM.from(e).goto(t)}static compare(e,t,i,r,o=-1){let s=e.filter(_=>_.maxPoint>0||!_.isEmpty&&_.maxPoint>=o),a=t.filter(_=>_.maxPoint>0||!_.isEmpty&&_.maxPoint>=o),c=wN(s,a,i),f=new d3(s,c,o),y=new d3(a,c,o);i.iterGaps((_,E,I)=>SN(f,_,y,E,I,r)),i.empty&&i.length==0&&SN(f,0,y,0,0,r)}static eq(e,t,i=0,r){r==null&&(r=999999999);let o=e.filter(y=>!y.isEmpty&&t.indexOf(y)<0),s=t.filter(y=>!y.isEmpty&&e.indexOf(y)<0);if(o.length!=s.length)return!1;if(!o.length)return!0;let a=wN(o,s),c=new d3(o,a,0).goto(i),f=new d3(s,a,0).goto(i);for(;;){if(c.to!=f.to||!KD(c.active,f.active)||c.point&&(!f.point||!c.point.eq(f.point)))return!1;if(c.to>r)return!0;c.next(),f.next()}}static spans(e,t,i,r,o=-1){let s=new d3(e,null,o).goto(t),a=t,c=s.openStart;for(;;){let f=Math.min(s.to,i);if(s.point){let y=s.activeForPoint(s.to),_=s.pointFrom<t?y.length+1:s.point.startSide<0?y.length:Math.min(y.length,c);r.point(a,f,s.point,y,_,s.pointRank),c=Math.min(s.openEnd(f),y.length)}else f>a&&(r.span(a,f,s.active,c),c=s.openEnd(f));if(s.to>i)return c+(s.point&&s.to>i?1:0);a=s.to,s.next()}}static of(e,t=!1){let i=new K1;for(let r of e instanceof LD?[e]:t?y_e(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return Po.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=Po.empty;r=r.nextLayer)t=new Po(r.chunkPos,r.chunk,t,Math.max(r.maxPoint,t.maxPoint));return t}}Po.empty=new Po([],[],null,-1);function y_e(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let i=n[t];if(UD(e,i)>0)return n.slice().sort(UD);e=i}return n}Po.empty.nextLayer=Po.empty;class K1{finishChunk(e){this.chunks.push(new HL(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new K1)).add(e,t,i)}addInner(e,t,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(Po.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Po.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function wN(n,e,t){let i=new Map;for(let o of n)for(let s=0;s<o.chunk.length;s++)o.chunk[s].maxPoint<=0&&i.set(o.chunk[s],o.chunkPos[s]);let r=new Set;for(let o of e)for(let s=0;s<o.chunk.length;s++){let a=i.get(o.chunk[s]);a!=null&&(t?t.mapPos(a):a)==o.chunkPos[s]&&!t?.touchesRange(a,a+o.chunk[s].length)&&r.add(o.chunk[s])}return r}class cte{constructor(e,t,i,r=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class nM{constructor(e){this.heap=e}static from(e,t=null,i=-1){let r=[];for(let o=0;o<e.length;o++)for(let s=e[o];!s.isEmpty;s=s.nextLayer)s.maxPoint>=i&&r.push(new cte(s,t,i,o));return r.length==1?r[0]:new nM(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)E8(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)E8(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),E8(this.heap,0)}}}function E8(n,e){for(let t=n[e];;){let i=(e<<1)+1;if(i>=n.length)break;let r=n[i];if(i+1<n.length&&r.compare(n[i+1])>=0&&(r=n[i+1],i++),t.compare(r)<0)break;n[i]=t,n[e]=r,e=i}}class d3{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=nM.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){sw(this.active,e),sw(this.activeTo,e),sw(this.activeRank,e),this.minActive=EN(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:r,rank:o}=this.cursor;for(;t<this.activeRank.length&&(o-this.activeRank[t]||r-this.activeTo[t])>0;)t++;aw(this.active,t,i),aw(this.activeTo,t,r),aw(this.activeRank,t,o),e&&aw(e,t,this.cursor.from),this.minActive=EN(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&sw(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function SN(n,e,t,i,r,o){n.goto(e),t.goto(i);let s=i+r,a=i,c=i-e;for(;;){let f=n.to+c-t.to,y=f||n.endSide-t.endSide,_=y<0?n.to+c:t.to,E=Math.min(_,s);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&KD(n.activeForPoint(n.to),t.activeForPoint(t.to))||o.comparePoint(a,E,n.point,t.point):E>a&&!KD(n.active,t.active)&&o.compareRange(a,E,n.active,t.active),_>s)break;(f||n.openEnd!=t.openEnd)&&o.boundChange&&o.boundChange(_),a=_,y<=0&&n.next(),y>=0&&t.next()}}function KD(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function sw(n,e){for(let t=e,i=n.length-1;t<i;t++)n[t]=n[t+1];n.pop()}function aw(n,e,t){for(let i=n.length-1;i>=e;i--)n[i+1]=n[i];n[e]=t}function EN(n,e){let t=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||n[r].endSide-n[t].endSide)<0&&(t=r,i=e[r]);return t}function D2(n,e,t=n.length){let i=0;for(let r=0;r<t&&r<n.length;)n.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=nA(n,r));return i}function FD(n,e,t,i){for(let r=0,o=0;;){if(o>=e)return r;if(r==n.length)break;o+=n.charCodeAt(r)==9?t-o%t:1,r=nA(n,r)}return i===!0?-1:n.length}const zD="",BN=typeof Symbol>"u"?"__"+zD:Symbol.for(zD),jD=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),ON=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Mv{constructor(e,t){this.rules=[];let{finish:i}=t||{};function r(s){return/^@/.test(s)?[s]:s.split(/,\s*/)}function o(s,a,c,f){let y=[],_=/^@(\w+)\b/.exec(s[0]),E=_&&_[1]=="keyframes";if(_&&a==null)return c.push(s[0]+";");for(let I in a){let P=a[I];if(/&/.test(I))o(I.split(/,\s*/).map(K=>s.map(z=>K.replace(/&/,z))).reduce((K,z)=>K.concat(z)),P,c);else if(P&&typeof P=="object"){if(!_)throw new RangeError("The value of a property ("+I+") should be a primitive value.");o(r(I),P,y,E)}else P!=null&&y.push(I.replace(/_.*/,"").replace(/[A-Z]/g,K=>"-"+K.toLowerCase())+": "+P+";")}(y.length||E)&&c.push((i&&!_&&!f?s.map(i):s).join(", ")+" {"+y.join(" ")+"}")}for(let s in e)o(r(s),e[s],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=ON[BN]||1;return ON[BN]=e+1,zD+e.toString(36)}static mount(e,t,i){let r=e[jD],o=i&&i.nonce;r?o&&r.setNonce(o):r=new v_e(e,o),r.mount(Array.isArray(t)?t:[t],e)}}let IN=new Map;class v_e{constructor(e,t){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let o=IN.get(i);if(o)return e[jD]=o;this.sheet=new r.CSSStyleSheet,IN.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[jD]=this}mount(e,t){let i=this.sheet,r=0,o=0;for(let s=0;s<e.length;s++){let a=e[s],c=this.modules.indexOf(a);if(c<o&&c>-1&&(this.modules.splice(c,1),o--,c=-1),c==-1){if(this.modules.splice(o++,0,a),i)for(let f=0;f<a.rules.length;f++)i.insertRule(a.rules[f],r++)}else{for(;o<c;)r+=this.modules[o++].rules.length;r+=a.rules.length,o++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let s="";for(let c=0;c<this.modules.length;c++)s+=this.modules[c].getRules()+`
`;this.styleTag.textContent=s;let a=t.head||t;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var wv={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},iM={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},b_e=typeof navigator<"u"&&/Mac/.test(navigator.platform),C_e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var eA=0;eA<10;eA++)wv[48+eA]=wv[96+eA]=String(eA);for(var eA=1;eA<=24;eA++)wv[eA+111]="F"+eA;for(var eA=65;eA<=90;eA++)wv[eA]=String.fromCharCode(eA+32),iM[eA]=String.fromCharCode(eA);for(var B8 in wv)iM.hasOwnProperty(B8)||(iM[B8]=wv[B8]);function __e(n){var e=b_e&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||C_e&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?iM:wv)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function ha(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var r=t[i];typeof r=="string"?n.setAttribute(i,r):r!=null&&(n[i]=r)}e++}for(;e<arguments.length;e++)Ate(n,arguments[e]);return n}function Ate(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)Ate(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}let vh=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},ND=typeof document<"u"?document:{documentElement:{style:{}}};const GD=/Edge\/(\d+)/.exec(vh.userAgent),hte=/MSIE \d/.test(vh.userAgent),WD=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(vh.userAgent),aB=!!(hte||WD||GD),TN=!aB&&/gecko\/(\d+)/i.test(vh.userAgent),O8=!aB&&/Chrome\/(\d+)/.exec(vh.userAgent),x_e="webkitFontSmoothing"in ND.documentElement.style,QD=!aB&&/Apple Computer/.test(vh.vendor),kN=QD&&(/Mobile\/\w+/.test(vh.userAgent)||vh.maxTouchPoints>2);var Ai={mac:kN||/Mac/.test(vh.platform),windows:/Win/.test(vh.platform),linux:/Linux|X11/.test(vh.platform),ie:aB,ie_version:hte?ND.documentMode||6:WD?+WD[1]:GD?+GD[1]:0,gecko:TN,gecko_version:TN?+(/Firefox\/(\d+)/.exec(vh.userAgent)||[0,0])[1]:0,chrome:!!O8,chrome_version:O8?+O8[1]:0,ios:kN,android:/Android\b/.test(vh.userAgent),webkit_version:x_e?+(/\bAppleWebKit\/(\d+)/.exec(vh.userAgent)||[0,0])[1]:0,safari:QD,safari_version:QD?+(/\bVersion\/(\d+(\.\d+)?)/.exec(vh.userAgent)||[0,0])[1]:0,tabSize:ND.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function rM(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function qD(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function cS(n,e){if(!e.anchorNode)return!1;try{return qD(n,e.anchorNode)}catch{return!1}}function oM(n){return n.nodeType==3?SC(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function c4(n,e,t,i){return t?DN(n,e,t,i,-1)||DN(n,e,t,i,1):!1}function wC(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function yE(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function DN(n,e,t,i,r){for(;;){if(n==t&&e==i)return!0;if(e==(r<0?0:m0(n))){if(n.nodeName=="DIV")return!1;let o=n.parentNode;if(!o||o.nodeType!=1)return!1;e=wC(n)+(r<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(r<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=r<0?m0(n):0}else return!1}}function m0(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function lB(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function M_e(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function dte(n,e){let t=e.width/n.offsetWidth,i=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-n.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}function w_e(n,e,t,i,r,o,s,a){let c=n.ownerDocument,f=c.defaultView||window;for(let y=n,_=!1;y&&!_;)if(y.nodeType==1){let E,I=y==c.body,P=1,K=1;if(I)E=M_e(f);else{if(/^(fixed|sticky)$/.test(getComputedStyle(y).position)&&(_=!0),y.scrollHeight<=y.clientHeight&&y.scrollWidth<=y.clientWidth){y=y.assignedSlot||y.parentNode;continue}let V=y.getBoundingClientRect();({scaleX:P,scaleY:K}=dte(y,V)),E={left:V.left,right:V.left+y.clientWidth*P,top:V.top,bottom:V.top+y.clientHeight*K}}let z=0,Q=0;if(r=="nearest")e.top<E.top?(Q=e.top-(E.top+s),t>0&&e.bottom>E.bottom+Q&&(Q=e.bottom-E.bottom+s)):e.bottom>E.bottom&&(Q=e.bottom-E.bottom+s,t<0&&e.top-Q<E.top&&(Q=e.top-(E.top+s)));else{let V=e.bottom-e.top,$=E.bottom-E.top;Q=(r=="center"&&V<=$?e.top+V/2-$/2:r=="start"||r=="center"&&t<0?e.top-s:e.bottom-$+s)-E.top}if(i=="nearest"?e.left<E.left?(z=e.left-(E.left+o),t>0&&e.right>E.right+z&&(z=e.right-E.right+o)):e.right>E.right&&(z=e.right-E.right+o,t<0&&e.left<E.left+z&&(z=e.left-(E.left+o))):z=(i=="center"?e.left+(e.right-e.left)/2-(E.right-E.left)/2:i=="start"==a?e.left-o:e.right-(E.right-E.left)+o)-E.left,z||Q)if(I)f.scrollBy(z,Q);else{let V=0,$=0;if(Q){let Z=y.scrollTop;y.scrollTop+=Q/K,$=(y.scrollTop-Z)*K}if(z){let Z=y.scrollLeft;y.scrollLeft+=z/P,V=(y.scrollLeft-Z)*P}e={left:e.left-V,top:e.top-$,right:e.right-V,bottom:e.bottom-$},V&&Math.abs(V-z)<1&&(i="nearest"),$&&Math.abs($-Q)<1&&(r="nearest")}if(I)break;(e.top<E.top||e.bottom>E.bottom||e.left<E.left||e.right>E.right)&&(e={left:Math.max(e.left,E.left),right:Math.min(e.right,E.right),top:Math.max(e.top,E.top),bottom:Math.min(e.bottom,E.bottom)}),y=y.assignedSlot||y.parentNode}else if(y.nodeType==11)y=y.host;else break}function S_e(n){let e=n.ownerDocument,t,i;for(let r=n.parentNode;r&&!(r==e.body||t&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!t&&r.scrollWidth>r.clientWidth&&(t=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:t,y:i}}class E_e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?m0(t):0),i,Math.min(e.focusOffset,i?m0(i):0))}set(e,t,i,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=r}}let Fb=null;Ai.safari&&Ai.safari_version>=26&&(Fb=!1);function fte(n){if(n.setActive)return n.setActive();if(Fb)return n.focus(Fb);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(Fb==null?{get preventScroll(){return Fb={preventScroll:!0},!0}}:void 0),!Fb){Fb=!1;for(let t=0;t<e.length;){let i=e[t++],r=e[t++],o=e[t++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=o&&(i.scrollLeft=o)}}}let RN;function SC(n,e,t=e){let i=RN||(RN=document.createRange());return i.setEnd(n,t),i.setStart(n,e),i}function zx(n,e,t,i){let r={key:e,code:e,keyCode:t,which:t,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let o=new KeyboardEvent("keydown",r);o.synthetic=!0,n.dispatchEvent(o);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,n.dispatchEvent(s),o.defaultPrevented||s.defaultPrevented}function B_e(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function pte(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function O_e(n,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,m0(t));;)if(i){if(t.nodeType!=1)return!1;let r=t.childNodes[i-1];r.contentEditable=="false"?i--:(t=r,i=m0(t))}else{if(t==n)return!0;i=wC(t),t=t.parentNode}}function mte(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function gte(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i>0)return{node:t,offset:i};if(t.nodeType==1&&i>0){if(t.contentEditable=="false")return null;t=t.childNodes[i-1],i=m0(t)}else if(t.parentNode&&!yE(t))i=wC(t),t=t.parentNode;else return null}}function yte(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i<t.nodeValue.length)return{node:t,offset:i};if(t.nodeType==1&&i<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[i],i=0}else if(t.parentNode&&!yE(t))i=wC(t)+1,t=t.parentNode;else return null}}class zA{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new zA(e.parentNode,wC(e),t)}static after(e,t){return new zA(e.parentNode,wC(e)+1,t)}}const ZL=[];class Js{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let i=this.dom,r=null,o;for(let s of this.children){if(s.flags&7){if(!s.dom&&(o=r?r.nextSibling:i.firstChild)){let a=Js.get(o);(!a||!a.parent&&a.canReuseDOM(s))&&s.reuseDOM(o)}s.sync(e,t),s.flags&=-8}if(o=r?r.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&o!=s.dom&&(t.written=!0),s.dom.parentNode==i)for(;o&&o!=s.dom;)o=PN(o);else i.insertBefore(s.dom,o);r=s.dom}for(o=r?r.nextSibling:i.firstChild,o&&t&&t.node==i&&(t.written=!0);o;)o=PN(o)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let r=m0(e)==0?0:t==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;r==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?r=-1:r=1),e=o}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Js.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,o=0;;r++){let s=this.children[r];if(s.dom==i)return o;o+=s.length+s.breakAfter}}domBoundsAround(e,t,i=0){let r=-1,o=-1,s=-1,a=-1;for(let c=0,f=i,y=i;c<this.children.length;c++){let _=this.children[c],E=f+_.length;if(f<e&&E>t)return _.domBoundsAround(e,t,f);if(E>=e&&r==-1&&(r=c,o=f),f>t&&_.dom.parentNode==this.dom){s=c,a=y;break}y=E,f=E+_.breakAfter}return{from:o,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=ZL){this.markDirty();for(let r=e;r<t;r++){let o=this.children[r];o.parent==this&&i.indexOf(o)<0&&o.destroy()}i.length<250?this.children.splice(e,t-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(t));for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new vte(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,r,o,s){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Js.prototype.breakAfter=0;function PN(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class vte{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function bte(n,e,t,i,r,o,s,a,c){let{children:f}=n,y=f.length?f[e]:null,_=o.length?o[o.length-1]:null,E=_?_.breakAfter:s;if(!(e==i&&y&&!s&&!E&&o.length<2&&y.merge(t,r,o.length?_:null,t==0,a,c))){if(i<f.length){let I=f[i];I&&(r<I.length||I.breakAfter&&_?.breakAfter)?(e==i&&(I=I.split(r),r=0),!E&&_&&I.merge(0,r,_,!0,0,c)?o[o.length-1]=I:((r||I.children.length&&!I.children[0].length)&&I.merge(0,r,null,!1,0,c),o.push(I))):I?.breakAfter&&(_?_.breakAfter=1:s=1),i++}for(y&&(y.breakAfter=s,t>0&&(!s&&o.length&&y.merge(t,y.length,o[0],!1,a,0)?y.breakAfter=o.shift().breakAfter:(t<y.length||y.children.length&&y.children[y.children.length-1].length==0)&&y.merge(t,y.length,null,!1,a,0),e++));e<i&&o.length;)if(f[i-1].become(o[o.length-1]))i--,o.pop(),c=o.length?0:a;else if(f[e].become(o[0]))e++,o.shift(),a=o.length?0:c;else break;!o.length&&e&&i<f.length&&!f[e-1].breakAfter&&f[i].merge(0,0,f[e-1],!1,a,c)&&e--,(e<i||o.length)&&n.replaceChildren(e,i,o)}}function Cte(n,e,t,i,r,o){let s=n.childCursor(),{i:a,off:c}=s.findPos(t,1),{i:f,off:y}=s.findPos(e,-1),_=e-t;for(let E of i)_+=E.length;n.length+=_,bte(n,f,y,a,c,i,0,r,o)}const I_e=256;class Um extends Js{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return this.flags&8||i&&(!(i instanceof Um)||this.length-(t-e)+i.length>I_e||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Um(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new zA(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return T_e(this.dom,e,t)}}class F1 extends Js{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let r of t)r.setParent(this)}setAttrs(e){if(pte(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,r,o,s){return i&&(!(i instanceof F1&&i.mark.eq(this.mark))||e&&o<=0||t<this.length&&s<=0)?!1:(Cte(this,e,t,i?i.children.slice():[],o-1,s-1),this.markDirty(),!0)}split(e){let t=[],i=0,r=-1,o=0;for(let a of this.children){let c=i+a.length;c>e&&t.push(i<e?a.split(e-i):a),r<0&&i>=e&&(r=o),i=c,o++}let s=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new F1(this.mark,t,s)}domAtPos(e){return _te(this,e)}coordsAt(e,t){return Mte(this,e,t)}}function T_e(n,e,t){let i=n.nodeValue.length;e>i&&(e=i);let r=e,o=e,s=0;e==0&&t<0||e==i&&t>=0?Ai.chrome||Ai.gecko||(e?(r--,s=1):o<i&&(o++,s=-1)):t<0?r--:o<i&&o++;let a=SC(n,r,o).getClientRects();if(!a.length)return null;let c=a[(s?s<0:t>=0)?0:a.length-1];return Ai.safari&&!s&&c.width==0&&(c=Array.prototype.find.call(a,f=>f.width)||c),s?lB(c,s<0):c||null}class S1 extends Js{static create(e,t,i){return new S1(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=S1.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,r,o,s){return i&&(!(i instanceof S1)||!this.widget.compare(i.widget)||e>0&&o<=0||t<this.length&&s<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof S1&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Zo.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):Zo.empty}domAtPos(e){return(this.length?e==0:this.side>0)?zA.before(this.dom):zA.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let r=this.dom.getClientRects(),o=null;if(!r.length)return null;let s=this.side?this.side<0:e>0;for(let a=s?r.length-1:0;o=r[a],!(e>0?a==0:a==r.length-1||o.top<o.bottom);a+=s?-1:1);return lB(o,!s)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class d2 extends Js{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof d2&&e.side==this.side}split(){return new d2(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?zA.before(this.dom):zA.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Zo.empty}get isHidden(){return!0}}Um.prototype.children=S1.prototype.children=d2.prototype.children=ZL;function _te(n,e){let t=n.dom,{children:i}=n,r=0;for(let o=0;r<i.length;r++){let s=i[r],a=o+s.length;if(!(a==o&&s.getSide()<=0)){if(e>o&&e<a&&s.dom.parentNode==t)return s.domAtPos(e-o);if(e<=o)break;o=a}}for(let o=r;o>0;o--){let s=i[o-1];if(s.dom.parentNode==t)return s.domAtPos(s.length)}for(let o=r;o<i.length;o++){let s=i[o];if(s.dom.parentNode==t)return s.domAtPos(0)}return new zA(t,0)}function xte(n,e,t){let i,{children:r}=n;t>0&&e instanceof F1&&r.length&&(i=r[r.length-1])instanceof F1&&i.mark.eq(e.mark)?xte(i,e.children[0],t-1):(r.push(e),e.setParent(n)),n.length+=e.length}function Mte(n,e,t){let i=null,r=-1,o=null,s=-1;function a(f,y){for(let _=0,E=0;_<f.children.length&&E<=y;_++){let I=f.children[_],P=E+I.length;P>=y&&(I.children.length?a(I,y-E):(!o||o.isHidden&&(t>0||D_e(o,I)))&&(P>y||E==P&&I.getSide()>0)?(o=I,s=y-E):(E<y||E==P&&I.getSide()<0&&!I.isHidden)&&(i=I,r=y-E)),E=P}}a(n,e);let c=(t<0?i:o)||i||o;return c?c.coordsAt(Math.max(0,c==i?r:s),t):k_e(n)}function k_e(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=oM(e);return t[t.length-1]||null}function D_e(n,e){let t=n.coordsAt(0,1),i=e.coordsAt(0,1);return t&&i&&i.top<t.bottom}function YD(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const LN=Object.create(null);function vE(n,e,t){if(n==e)return!0;n||(n=LN),e||(e=LN);let i=Object.keys(n),r=Object.keys(e);if(i.length-(t&&i.indexOf(t)>-1?1:0)!=r.length-(t&&r.indexOf(t)>-1?1:0))return!1;for(let o of i)if(o!=t&&(r.indexOf(o)==-1||n[o]!==e[o]))return!1;return!0}function VD(n,e,t){let i=!1;if(e)for(let r in e)t&&r in t||(i=!0,r=="style"?n.style.cssText="":n.removeAttribute(r));if(t)for(let r in t)e&&e[r]==t[r]||(i=!0,r=="style"?n.style.cssText=t[r]:n.setAttribute(r,t[r]));return i}function R_e(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let i=n.attributes[t];e[i.name]=i.value}return e}class kv{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Mh=(function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n})(Mh||(Mh={}));class ur extends MC{constructor(e,t,i,r){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new u5(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Sv(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:o,end:s}=wte(e,t);i=(o?t?-3e8:-1:5e8)-1,r=(s?t?2e8:1:-6e8)+1}return new Sv(e,i,r,t,e.widget||null,!0)}static line(e){return new c5(e)}static set(e,t=!1){return Po.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}ur.none=Po.empty;class u5 extends ur{constructor(e){let{start:t,end:i}=wte(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof u5&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&vE(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}u5.prototype.point=!1;class c5 extends ur{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof c5&&this.spec.class==e.spec.class&&vE(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}c5.prototype.mapMode=Ch.TrackBefore;c5.prototype.point=!0;class Sv extends ur{constructor(e,t,i,r,o,s){super(t,i,o,e),this.block=r,this.isReplace=s,this.mapMode=r?t<=0?Ch.TrackBefore:Ch.TrackAfter:Ch.TrackDel}get type(){return this.startSide!=this.endSide?Mh.WidgetRange:this.startSide<=0?Mh.WidgetBefore:Mh.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Sv&&P_e(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Sv.prototype.point=!0;function wte(n,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=n;return t==null&&(t=n.inclusive),i==null&&(i=n.inclusive),{start:t??e,end:i??e}}function P_e(n,e){return n==e||!!(n&&e&&n.compare(e))}function AS(n,e,t,i=0){let r=t.length-1;r>=0&&t[r]+i>=n?t[r]=Math.max(t[r],e):t.push(n,e)}class vu extends Js{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,r,o,s){if(i){if(!(i instanceof vu))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),Cte(this,e,t,i?i.children.slice():[],o,s),!0}split(e){let t=new vu;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:r}=this.childPos(e);r&&(t.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let o=i;o<this.children.length;o++)t.append(this.children[o],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){vE(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){xte(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=YD(t,this.attrs||{})),i&&(this.attrs=YD({class:i},this.attrs||{}))}domAtPos(e){return _te(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?this.flags&4&&(pte(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(VD(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let r=this.dom.lastChild;for(;r&&Js.get(r)instanceof F1;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=Js.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!Ai.ios||!this.children.some(o=>o instanceof Um))){let o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof Um)||/[^ -~]/.test(i.text))return null;let r=oM(i.dom);if(r.length!=1)return null;e+=r[0].width,t=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=Mte(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,o=i.bottom-i.top;if(Math.abs(o-r.lineHeight)<2&&r.textHeight<o){let s=(o-r.textHeight)/2;return{top:i.top+s,bottom:i.bottom-s,left:i.left,right:i.left}}}return i}become(e){return e instanceof vu&&this.children.length==0&&e.children.length==0&&vE(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let i=0,r=0;i<e.children.length;i++){let o=e.children[i],s=r+o.length;if(s>=t){if(o instanceof vu)return o;if(s>t)break}r=s+o.breakAfter}return null}}class k1 extends Js{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,r,o,s){return i&&(!(i instanceof k1)||!this.widget.compare(i.widget)||e>0&&o<=0||t<this.length&&s<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?zA.before(this.dom):zA.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new k1(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return ZL}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Zo.empty}domBoundsAround(){return null}become(e){return e instanceof k1&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);return i||(this.widget instanceof $D?null:lB(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t==i?!1:e<0?t<0:i>0}}class $D extends kv{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class A4{constructor(e,t,i,r){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof k1&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new vu),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(lw(new d2(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof k1)&&this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:a,done:c}=this.cursor.next(this.skip);if(this.skip=0,c)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e),o=Math.min(r,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(lw(new Um(this.text.slice(this.textOff,this.textOff+o)),t),i),this.atCursorPos=!0,this.textOff+=o,e-=o,i=r<=o?0:t.length}}span(e,t,i,r){this.buildText(t-e,i,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,i,r,o,s){if(this.disallowBlockEffectsFor[s]&&i instanceof Sv){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(i instanceof Sv)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new k1(i.widget||f2.block,a,i));else{let c=S1.create(i.widget||f2.inline,a,a?0:i.startSide),f=this.atCursorPos&&!c.isEditable&&o<=r.length&&(e<t||i.startSide>0),y=!c.isEditable&&(e<t||o>r.length||i.startSide<=0),_=this.getLine();this.pendingBuffer==2&&!f&&!c.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),f&&(_.append(lw(new d2(1),r),o),o=r.length+Math.max(0,o-r.length)),_.append(lw(c,r),o),this.atCursorPos=y,this.pendingBuffer=y?e<t||o>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=o)}static build(e,t,i,r,o){let s=new A4(e,t,i,o);return s.openEnd=Po.spans(r,t,i,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}}function lw(n,e){for(let t of e)n=new F1(t,[n],n.length);return n}class f2 extends kv{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}f2.inline=new f2("span");f2.block=new f2("div");var Na=(function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n})(Na||(Na={}));const EC=Na.LTR,XL=Na.RTL;function Ste(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const L_e=Ste("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),U_e=Ste("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),HD=Object.create(null),Lg=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);HD[e]=t,HD[t]=-e}function Ete(n){return n<=247?L_e[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?U_e[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const K_e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class hv{get dir(){return this.level%2?XL:EC}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,r){let o=-1;for(let s=0;s<e.length;s++){let a=e[s];if(a.from<=t&&a.to>=t){if(a.level==i)return s;(o<0||(r!=0?r<0?a.from<t:a.to>t:e[o].level>a.level))&&(o=s)}}if(o<0)throw new RangeError("Index out of range");return o}}function Bte(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let i=n[t],r=e[t];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!Bte(i.inner,r.inner))return!1}return!0}const da=[];function F_e(n,e,t,i,r){for(let o=0;o<=i.length;o++){let s=o?i[o-1].to:e,a=o<i.length?i[o].from:t,c=o?256:r;for(let f=s,y=c,_=c;f<a;f++){let E=Ete(n.charCodeAt(f));E==512?E=y:E==8&&_==4&&(E=16),da[f]=E==4?2:E,E&7&&(_=E),y=E}for(let f=s,y=c,_=c;f<a;f++){let E=da[f];if(E==128)f<a-1&&y==da[f+1]&&y&24?E=da[f]=y:da[f]=256;else if(E==64){let I=f+1;for(;I<a&&da[I]==64;)I++;let P=f&&y==8||I<t&&da[I]==8?_==1?1:8:256;for(let K=f;K<I;K++)da[K]=P;f=I-1}else E==8&&_==1&&(da[f]=1);y=E,E&7&&(_=E)}}}function z_e(n,e,t,i,r){let o=r==1?2:1;for(let s=0,a=0,c=0;s<=i.length;s++){let f=s?i[s-1].to:e,y=s<i.length?i[s].from:t;for(let _=f,E,I,P;_<y;_++)if(I=HD[E=n.charCodeAt(_)])if(I<0){for(let K=a-3;K>=0;K-=3)if(Lg[K+1]==-I){let z=Lg[K+2],Q=z&2?r:z&4?z&1?o:r:0;Q&&(da[_]=da[Lg[K]]=Q),a=K;break}}else{if(Lg.length==189)break;Lg[a++]=_,Lg[a++]=E,Lg[a++]=c}else if((P=da[_])==2||P==1){let K=P==r;c=K?0:1;for(let z=a-3;z>=0;z-=3){let Q=Lg[z+2];if(Q&2)break;if(K)Lg[z+2]|=2;else{if(Q&4)break;Lg[z+2]|=4}}}}}function j_e(n,e,t,i){for(let r=0,o=i;r<=t.length;r++){let s=r?t[r-1].to:n,a=r<t.length?t[r].from:e;for(let c=s;c<a;){let f=da[c];if(f==256){let y=c+1;for(;;)if(y==a){if(r==t.length)break;y=t[r++].to,a=r<t.length?t[r].from:e}else if(da[y]==256)y++;else break;let _=o==1,E=(y<e?da[y]:i)==1,I=_==E?_?1:2:i;for(let P=y,K=r,z=K?t[K-1].to:n;P>c;)P==z&&(P=t[--K].from,z=K?t[K-1].to:n),da[--P]=I;c=y}else o=f,c++}}}function ZD(n,e,t,i,r,o,s){let a=i%2?2:1;if(i%2==r%2)for(let c=e,f=0;c<t;){let y=!0,_=!1;if(f==o.length||c<o[f].from){let K=da[c];K!=a&&(y=!1,_=K==16)}let E=!y&&a==1?[]:null,I=y?i:i+1,P=c;e:for(;;)if(f<o.length&&P==o[f].from){if(_)break e;let K=o[f];if(!y)for(let z=K.to,Q=f+1;;){if(z==t)break e;if(Q<o.length&&o[Q].from==z)z=o[Q++].to;else{if(da[z]==a)break e;break}}if(f++,E)E.push(K);else{K.from>c&&s.push(new hv(c,K.from,I));let z=K.direction==EC!=!(I%2);XD(n,z?i+1:i,r,K.inner,K.from,K.to,s),c=K.to}P=K.to}else{if(P==t||(y?da[P]!=a:da[P]==a))break;P++}E?ZD(n,c,P,i+1,r,E,s):c<P&&s.push(new hv(c,P,I)),c=P}else for(let c=t,f=o.length;c>e;){let y=!0,_=!1;if(!f||c>o[f-1].to){let K=da[c-1];K!=a&&(y=!1,_=K==16)}let E=!y&&a==1?[]:null,I=y?i:i+1,P=c;e:for(;;)if(f&&P==o[f-1].to){if(_)break e;let K=o[--f];if(!y)for(let z=K.from,Q=f;;){if(z==e)break e;if(Q&&o[Q-1].to==z)z=o[--Q].from;else{if(da[z-1]==a)break e;break}}if(E)E.push(K);else{K.to<c&&s.push(new hv(K.to,c,I));let z=K.direction==EC!=!(I%2);XD(n,z?i+1:i,r,K.inner,K.from,K.to,s),c=K.from}P=K.from}else{if(P==e||(y?da[P-1]!=a:da[P-1]==a))break;P--}E?ZD(n,P,c,i+1,r,E,s):P<c&&s.push(new hv(P,c,I)),c=P}}function XD(n,e,t,i,r,o,s){let a=e%2?2:1;F_e(n,r,o,i,a),z_e(n,r,o,i,a),j_e(r,o,i,a),ZD(n,r,o,e,t,i,s)}function N_e(n,e,t){if(!n)return[new hv(0,0,e==XL?1:0)];if(e==EC&&!t.length&&!K_e.test(n))return Ote(n.length);if(t.length)for(;n.length>da.length;)da[da.length]=256;let i=[],r=e==EC?0:1;return XD(n,r,r,t,0,n.length,i),i}function Ote(n){return[new hv(0,n,0)]}let Ite="";function G_e(n,e,t,i,r){var o;let s=i.head-n.from,a=hv.find(e,s,(o=i.bidiLevel)!==null&&o!==void 0?o:-1,i.assoc),c=e[a],f=c.side(r,t);if(s==f){let E=a+=r?1:-1;if(E<0||E>=e.length)return null;c=e[a=E],s=c.side(!r,t),f=c.side(r,t)}let y=nA(n.text,s,c.forward(r,t));(y<c.from||y>c.to)&&(y=f),Ite=n.text.slice(Math.min(s,y),Math.max(s,y));let _=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return _&&y==f&&_.level+(r?0:1)<c.level?Mn.cursor(_.side(!r,t)+n.from,_.forward(r,t)?1:-1,_.level):Mn.cursor(y+n.from,c.forward(r,t)?-1:1,c.level)}function W_e(n,e,t){for(let i=e;i<t;i++){let r=Ete(n.charCodeAt(i));if(r==1)return EC;if(r==2||r==4)return XL}return EC}const Tte=yi.define(),kte=yi.define(),Dte=yi.define(),Rte=yi.define(),JD=yi.define(),Pte=yi.define(),Lte=yi.define(),JL=yi.define(),eU=yi.define(),Ute=yi.define({combine:n=>n.some(e=>e)}),Kte=yi.define({combine:n=>n.some(e=>e)}),Fte=yi.define();class jx{constructor(e,t="nearest",i="nearest",r=5,o=5,s=!1){this.range=e,this.y=t,this.x=i,this.yMargin=r,this.xMargin=o,this.isSnapshot=s}map(e){return e.empty?this:new jx(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new jx(Mn.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const uw=jr.define({map:(n,e)=>n.map(e)}),zte=jr.define();function xh(n,e,t){let i=n.facet(Rte);i.length?i[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const w1=yi.define({combine:n=>n.length?n[0]:!0});let Q_e=0;const _x=yi.define({combine(n){return n.filter((e,t)=>{for(let i=0;i<t;i++)if(n[i].plugin==e.plugin)return!1;return!0})}});class Hl{constructor(e,t,i,r,o){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=r,this.baseExtensions=o(this),this.extension=this.baseExtensions.concat(_x.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(_x.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:i,eventObservers:r,provide:o,decorations:s}=t||{};return new Hl(Q_e++,e,i,r,a=>{let c=[];return s&&c.push(sM.of(f=>{let y=f.plugin(a);return y?s(y):ur.none})),o&&c.push(o(a)),c})}static fromClass(e,t){return Hl.define((i,r)=>new e(i,r),t)}}class I8{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(xh(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){xh(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){xh(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const jte=yi.define(),tU=yi.define(),sM=yi.define(),Nte=yi.define(),A5=yi.define(),Gte=yi.define();function UN(n,e){let t=n.state.facet(Gte);if(!t.length)return t;let i=t.map(o=>o instanceof Function?o(n):o),r=[];return Po.spans(i,e.from,e.to,{point(){},span(o,s,a,c){let f=o-e.from,y=s-e.from,_=r;for(let E=a.length-1;E>=0;E--,c--){let I=a[E].spec.bidiIsolate,P;if(I==null&&(I=W_e(e.text,f,y)),c>0&&_.length&&(P=_[_.length-1]).to==f&&P.direction==I)P.to=y,_=P.inner;else{let K={from:f,to:y,direction:I,inner:[]};_.push(K),_=K.inner}}}}),r}const Wte=yi.define();function nU(n){let e=0,t=0,i=0,r=0;for(let o of n.state.facet(Wte)){let s=o(n);s&&(s.left!=null&&(e=Math.max(e,s.left)),s.right!=null&&(t=Math.max(t,s.right)),s.top!=null&&(i=Math.max(i,s.top)),s.bottom!=null&&(r=Math.max(r,s.bottom)))}return{left:e,right:t,top:i,bottom:r}}const z3=yi.define();class Cp{constructor(e,t,i,r){this.fromA=e,this.toA=t,this.fromB=i,this.toB=r}join(e){return new Cp(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let r=0,o=0,s=0,a=0;;r++){let c=r==e.length?null:e[r],f=s-a,y=c?c.fromB:1e9;for(;o<t.length&&t[o]<y;){let _=t[o],E=t[o+1],I=Math.max(a,_),P=Math.min(y,E);if(I<=P&&new Cp(I+f,P+f,I,P).addToSet(i),E>y)break;o+=2}if(!c)return i;new Cp(c.fromA,c.toA,c.fromB,c.toB).addToSet(i),s=c.toA,a=c.toB}}}class bE{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=qu.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let r=[];this.changes.iterChangedRanges((o,s,a,c)=>r.push(new Cp(o,s,a,c))),this.changedRanges=r}static create(e,t,i){return new bE(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class KN extends Js{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=ur.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new vu],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Cp(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:f,toA:y})=>y<this.minWidthFrom||f>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?r=this.domChanged.newSel.head:!X_e(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let o=r>-1?Y_e(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:f,to:y}=this.hasComposition;i=new Cp(f,y,e.changes.mapPos(f,-1),e.changes.mapPos(y,1)).addToSet(i.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(Ai.ie||Ai.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let s=this.decorations,a=this.updateDeco(),c=H_e(s,a,e.changes);return i=Cp.extendWithRanges(i,c),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=Ai.chrome||Ai.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,s),this.flags&=-8,s&&(s.written||r.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(s=>s.flags&=-9);let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof k1&&s.widget instanceof $D&&o.push(s.dom);r.updateGaps(o)}updateChildren(e,t,i){let r=i?i.range.addToSet(e.slice()):e,o=this.childCursor(t);for(let s=r.length-1;;s--){let a=s>=0?r[s]:null;if(!a)break;let{fromA:c,toA:f,fromB:y,toB:_}=a,E,I,P,K;if(i&&i.range.fromB<_&&i.range.toB>y){let Z=A4.build(this.view.state.doc,y,i.range.fromB,this.decorations,this.dynamicDecorationMap),ee=A4.build(this.view.state.doc,i.range.toB,_,this.decorations,this.dynamicDecorationMap);I=Z.breakAtStart,P=Z.openStart,K=ee.openEnd;let X=this.compositionView(i);ee.breakAtStart?X.breakAfter=1:ee.content.length&&X.merge(X.length,X.length,ee.content[0],!1,ee.openStart,0)&&(X.breakAfter=ee.content[0].breakAfter,ee.content.shift()),Z.content.length&&X.merge(0,0,Z.content[Z.content.length-1],!0,0,Z.openEnd)&&Z.content.pop(),E=Z.content.concat(X).concat(ee.content)}else({content:E,breakAtStart:I,openStart:P,openEnd:K}=A4.build(this.view.state.doc,y,_,this.decorations,this.dynamicDecorationMap));let{i:z,off:Q}=o.findPos(f,1),{i:V,off:$}=o.findPos(c,-1);bte(this,V,$,z,Q,E,I,P,K)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let i of t.effects)i.is(zte)&&(this.editContextFormatting=i.value)}compositionView(e){let t=new Um(e.text.nodeValue);t.flags|=8;for(let{deco:r}of e.marks)t=new F1(r,[t],t.length);let i=new vu;return i.append(t,0),i}fixCompositionDOM(e){let t=(o,s)=>{s.flags|=8|(s.children.some(c=>c.flags&7)?1:0),this.markedForComposition.add(s);let a=Js.get(o);a&&a!=s&&(a.dom=null),s.setDOM(o)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];t(e.line,r);for(let o=e.marks.length-1;o>=-1;o--)i=r.childPos(i.off,1),r=r.children[i.i],t(o>=0?e.marks[o].node:e.text,r)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,o=!r&&!(this.view.state.facet(w1)||this.dom.tabIndex>-1)&&cS(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||t||o))return;let s=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,c=this.moveToLine(this.domAtPos(a.anchor)),f=a.empty?c:this.moveToLine(this.domAtPos(a.head));if(Ai.gecko&&a.empty&&!this.hasComposition&&q_e(c)){let _=document.createTextNode("");this.view.observer.ignore(()=>c.node.insertBefore(_,c.node.childNodes[c.offset]||null)),c=f=new zA(_,0),s=!0}let y=this.view.observer.selectionRange;(s||!y.focusNode||(!c4(c.node,c.offset,y.anchorNode,y.anchorOffset)||!c4(f.node,f.offset,y.focusNode,y.focusOffset))&&!this.suppressWidgetCursorChange(y,a))&&(this.view.observer.ignore(()=>{Ai.android&&Ai.chrome&&this.dom.contains(y.focusNode)&&Z_e(y.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let _=rM(this.view.root);if(_)if(a.empty){if(Ai.gecko){let E=V_e(c.node,c.offset);if(E&&E!=3){let I=(E==1?gte:yte)(c.node,c.offset);I&&(c=new zA(I.node,I.offset))}}_.collapse(c.node,c.offset),a.bidiLevel!=null&&_.caretBidiLevel!==void 0&&(_.caretBidiLevel=a.bidiLevel)}else if(_.extend){_.collapse(c.node,c.offset);try{_.extend(f.node,f.offset)}catch{}}else{let E=document.createRange();a.anchor>a.head&&([c,f]=[f,c]),E.setEnd(f.node,f.offset),E.setStart(c.node,c.offset),_.removeAllRanges(),_.addRange(E)}o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(c,f)),this.impreciseAnchor=c.precise?null:new zA(y.anchorNode,y.anchorOffset),this.impreciseHead=f.precise?null:new zA(y.focusNode,y.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&c4(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=rM(e.root),{anchorNode:r,anchorOffset:o}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let s=vu.find(this,t.head);if(!s)return;let a=s.posAtStart;if(t.head==a||t.head==a+s.length)return;let c=this.coordsAt(t.head,-1),f=this.coordsAt(t.head,1);if(!c||!f||c.bottom>f.top)return;let y=this.domAtPos(t.head+t.assoc);i.collapse(y.node,y.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let _=e.observer.selectionRange;e.docView.posFromDOM(_.anchorNode,_.anchorOffset)!=t.from&&i.collapse(r,o)}moveToLine(e){let t=this.dom,i;if(e.node!=t)return e;for(let r=e.offset;!i&&r<t.childNodes.length;r++){let o=Js.get(t.childNodes[r]);o instanceof vu&&(i=o.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let o=Js.get(t.childNodes[r]);o instanceof vu&&(i=o.domAtPos(o.length))}return i?new zA(i.node,i.offset,!0):e}nearest(e){for(let t=e;t;){let i=Js.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let r=this.children[t];if(i<r.length||r instanceof vu)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,r=0;for(let o=this.length,s=this.children.length-1;s>=0;s--){let a=this.children[s],c=o-a.breakAfter,f=c-a.length;if(c<e)break;if(f<=e&&(f<e||a.covers(-1))&&(c>e||a.covers(1))&&(!i||a instanceof vu&&!(i instanceof vu&&t>=0)))i=a,r=f;else if(i&&f==e&&c==e&&a instanceof k1&&Math.abs(t)<2){if(a.deco.startSide<0)break;s&&(i=null)}o=f}return i?i.coordsAt(e-r,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),r=this.children[t];if(!(r instanceof vu))return null;for(;r.children.length;){let{i:a,off:c}=r.childPos(i,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=c}if(!(r instanceof Um))return null;let o=nA(r.text,i);if(o==i)return null;let s=SC(r.dom,i,o).getClientRects();for(let a=0;a<s.length;a++){let c=s[a];if(a==s.length-1||c.top<c.bottom&&c.left<c.right)return c}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:r}=e,o=this.view.contentDOM.clientWidth,s=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,c=this.view.textDirection==Na.LTR;for(let f=0,y=0;y<this.children.length;y++){let _=this.children[y],E=f+_.length;if(E>r)break;if(f>=i){let I=_.dom.getBoundingClientRect();if(t.push(I.height),s){let P=_.dom.lastChild,K=P?oM(P):[];if(K.length){let z=K[K.length-1],Q=c?z.right-I.left:I.right-z.left;Q>a&&(a=Q,this.minWidth=o,this.minWidthFrom=f,this.minWidthTo=E)}}}f=E+_.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Na.RTL:Na.LTR}measureTextSize(){for(let o of this.children)if(o instanceof vu){let s=o.measureTextSize();if(s)return s}let e=document.createElement("div"),t,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let o=oM(e.firstChild)[0];t=e.getBoundingClientRect().height,i=o?o.width/27:7,r=o?o.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:r}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new vte(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,r=0;;r++){let o=r==t.viewports.length?null:t.viewports[r],s=o?o.from-1:this.length;if(s>i){let a=(t.lineBlockAt(s).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(ur.replace({widget:new $D(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,s))}if(!o)break;i=o.to+1}return ur.set(e)}updateDeco(){let e=1,t=this.view.state.facet(sM).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),i=!1,r=this.view.state.facet(Nte).map((o,s)=>{let a=typeof o=="function";return a&&(i=!0),a?o(this.view):o});for(r.length&&(this.dynamicDecorationMap[e++]=i,t.push(Po.join(r))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let f=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=f.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let f of this.view.state.facet(Fte))try{if(f(this.view,e.range,e))return!0}catch(y){xh(this.view.state,y,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),r;if(!i)return;!t.empty&&(r=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let o=nU(this.view),s={left:i.left-o.left,top:i.top-o.top,right:i.right+o.right,bottom:i.bottom+o.bottom},{offsetWidth:a,offsetHeight:c}=this.view.scrollDOM;w_e(this.view.scrollDOM,s,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,c),-c),this.view.textDirection==Na.LTR)}lineHasWidget(e){let{i:t}=this.childCursor().findPos(e);if(t==this.children.length)return!1;let i=r=>r instanceof S1||r.children.some(i);return i(this.children[t])}}function q_e(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function Qte(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let i=gte(t.focusNode,t.focusOffset),r=yte(t.focusNode,t.focusOffset),o=i||r;if(r&&i&&r.node!=i.node){let a=Js.get(r.node);if(!a||a instanceof Um&&a.text!=r.node.nodeValue)o=r;else if(n.docView.lastCompositionAfterCursor){let c=Js.get(i.node);!c||c instanceof Um&&c.text!=i.node.nodeValue||(o=r)}}if(n.docView.lastCompositionAfterCursor=o!=i,!o)return null;let s=e-o.offset;return{from:s,to:s+o.node.nodeValue.length,node:o.node}}function Y_e(n,e,t){let i=Qte(n,t);if(!i)return null;let{node:r,from:o,to:s}=i,a=r.nodeValue;if(/[\n\r]/.test(a)||n.state.doc.sliceString(i.from,i.to)!=a)return null;let c=e.invertedDesc,f=new Cp(c.mapPos(o),c.mapPos(s),o,s),y=[];for(let _=r.parentNode;;_=_.parentNode){let E=Js.get(_);if(E instanceof F1)y.push({node:_,deco:E.mark});else{if(E instanceof vu||_.nodeName=="DIV"&&_.parentNode==n.contentDOM)return{range:f,text:r,marks:y,line:_};if(_!=n.contentDOM)y.push({node:_,deco:new u5({inclusive:!0,attributes:R_e(_),tagName:_.tagName.toLowerCase()})});else return null}}}function V_e(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let $_e=class{constructor(){this.changes=[]}compareRange(e,t){AS(e,t,this.changes)}comparePoint(e,t){AS(e,t,this.changes)}boundChange(e){AS(e,e,this.changes)}};function H_e(n,e,t){let i=new $_e;return Po.compare(n,e,t,i),i.changes}function Z_e(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function X_e(n,e){let t=!1;return e&&n.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(t=!0)}),t}function J_e(n,e,t=1){let i=n.charCategorizer(e),r=n.doc.lineAt(e),o=e-r.from;if(r.length==0)return Mn.cursor(e);o==0?t=1:o==r.length&&(t=-1);let s=o,a=o;t<0?s=nA(r.text,o,!1):a=nA(r.text,o);let c=i(r.text.slice(s,a));for(;s>0;){let f=nA(r.text,s,!1);if(i(r.text.slice(f,s))!=c)break;s=f}for(;a<r.length;){let f=nA(r.text,a);if(i(r.text.slice(a,f))!=c)break;a=f}return Mn.range(s+r.from,a+r.from)}function exe(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function txe(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function T8(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function FN(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function zN(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function eR(n,e,t){let i,r,o,s,a=!1,c,f,y,_;for(let P=n.firstChild;P;P=P.nextSibling){let K=oM(P);for(let z=0;z<K.length;z++){let Q=K[z];r&&T8(r,Q)&&(Q=FN(zN(Q,r.bottom),r.top));let V=exe(e,Q),$=txe(t,Q);if(V==0&&$==0)return P.nodeType==3?jN(P,e,t):eR(P,e,t);(!i||s>$||s==$&&o>V)&&(i=P,r=Q,o=V,s=$,a=V?e<Q.left?z>0:z<K.length-1:!0),V==0?t>Q.bottom&&(!y||y.bottom<Q.bottom)?(c=P,y=Q):t<Q.top&&(!_||_.top>Q.top)&&(f=P,_=Q):y&&T8(y,Q)?y=zN(y,Q.bottom):_&&T8(_,Q)&&(_=FN(_,Q.top))}}if(y&&y.bottom>=t?(i=c,r=y):_&&_.top<=t&&(i=f,r=_),!i)return{node:n,offset:0};let E=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return jN(i,E,t);if(a&&i.contentEditable!="false")return eR(i,E,t);let I=Array.prototype.indexOf.call(n.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:n,offset:I}}function jN(n,e,t){let i=n.nodeValue.length,r=-1,o=1e9,s=0;for(let a=0;a<i;a++){let c=SC(n,a,a+1).getClientRects();for(let f=0;f<c.length;f++){let y=c[f];if(y.top==y.bottom)continue;s||(s=e-y.left);let _=(y.top>t?y.top-t:t-y.bottom)-1;if(y.left-1<=e&&y.right+1>=e&&_<o){let E=e>=(y.left+y.right)/2,I=E;if((Ai.chrome||Ai.gecko)&&SC(n,a).getBoundingClientRect().left==y.right&&(I=!E),_<=0)return{node:n,offset:a+(I?1:0)};r=a+(I?1:0),o=_}}}return{node:n,offset:r>-1?r:s>0?n.nodeValue.length:0}}function qte(n,e,t,i=-1){var r,o;let s=n.contentDOM.getBoundingClientRect(),a=s.top+n.viewState.paddingTop,c,{docHeight:f}=n.viewState,{x:y,y:_}=e,E=_-a;if(E<0)return 0;if(E>f)return n.state.doc.length;for(let Z=n.viewState.heightOracle.textHeight/2,ee=!1;c=n.elementAtHeight(E),c.type!=Mh.Text;)for(;E=i>0?c.bottom+Z:c.top-Z,!(E>=0&&E<=f);){if(ee)return t?null:0;ee=!0,i=-i}_=a+E;let I=c.from;if(I<n.viewport.from)return n.viewport.from==0?0:t?null:NN(n,s,c,y,_);if(I>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:NN(n,s,c,y,_);let P=n.dom.ownerDocument,K=n.root.elementFromPoint?n.root:P,z=K.elementFromPoint(y,_);z&&!n.contentDOM.contains(z)&&(z=null),z||(y=Math.max(s.left+1,Math.min(s.right-1,y)),z=K.elementFromPoint(y,_),z&&!n.contentDOM.contains(z)&&(z=null));let Q,V=-1;if(z&&((r=n.docView.nearest(z))===null||r===void 0?void 0:r.isEditable)!=!1){if(P.caretPositionFromPoint){let Z=P.caretPositionFromPoint(y,_);Z&&({offsetNode:Q,offset:V}=Z)}else if(P.caretRangeFromPoint){let Z=P.caretRangeFromPoint(y,_);Z&&({startContainer:Q,startOffset:V}=Z)}Q&&(!n.contentDOM.contains(Q)||Ai.safari&&nxe(Q,V,y)||Ai.chrome&&ixe(Q,V,y))&&(Q=void 0),Q&&(V=Math.min(m0(Q),V))}if(!Q||!n.docView.dom.contains(Q)){let Z=vu.find(n.docView,I);if(!Z)return E>c.top+c.height/2?c.to:c.from;({node:Q,offset:V}=eR(Z.dom,y,_))}let $=n.docView.nearest(Q);if(!$)return null;if($.isWidget&&((o=$.dom)===null||o===void 0?void 0:o.nodeType)==1){let Z=$.dom.getBoundingClientRect();return e.y<Z.top||e.y<=Z.bottom&&e.x<=(Z.left+Z.right)/2?$.posAtStart:$.posAtEnd}else return $.localPosFromDOM(Q,V)+$.posAtStart}function NN(n,e,t,i,r){let o=Math.round((i-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let a=n.viewState.heightOracle.textHeight,c=Math.floor((r-t.top-(n.defaultLineHeight-a)*.5)/a);o+=c*n.viewState.heightOracle.lineLength}let s=n.state.sliceDoc(t.from,t.to);return t.from+FD(s,o,n.state.tabSize)}function Yte(n,e,t){let i,r=n;if(n.nodeType!=3||e!=(i=n.nodeValue.length))return!1;for(;;){let o=r.nextSibling;if(o){if(o.nodeName=="BR")break;return!1}else{let s=r.parentNode;if(!s||s.nodeName=="DIV")break;r=s}}return SC(n,i-1,i).getBoundingClientRect().right>t}function nxe(n,e,t){return Yte(n,e,t)}function ixe(n,e,t){if(e!=0)return Yte(n,e,t);for(let r=n;;){let o=r.parentNode;if(!o||o.nodeType!=1||o.firstChild!=r)return!1;if(o.classList.contains("cm-line"))break;r=o}let i=n.nodeType==1?n.getBoundingClientRect():SC(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function tR(n,e,t){let i=n.lineBlockAt(e);if(Array.isArray(i.type)){let r;for(let o of i.type){if(o.from>e)break;if(!(o.to<e)){if(o.from<e&&o.to>e)return o;(!r||o.type==Mh.Text&&(r.type!=o.type||(t<0?o.from<e:o.to>e)))&&(r=o)}}return r||i}return i}function rxe(n,e,t,i){let r=tR(n,e.head,e.assoc||-1),o=!i||r.type!=Mh.Text||!(n.lineWrapping||r.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(o){let s=n.dom.getBoundingClientRect(),a=n.textDirectionAt(r.from),c=n.posAtCoords({x:t==(a==Na.LTR)?s.right-1:s.left+1,y:(o.top+o.bottom)/2});if(c!=null)return Mn.cursor(c,t?-1:1)}return Mn.cursor(t?r.to:r.from,t?-1:1)}function GN(n,e,t,i){let r=n.state.doc.lineAt(e.head),o=n.bidiSpans(r),s=n.textDirectionAt(r.from);for(let a=e,c=null;;){let f=G_e(r,o,s,a,t),y=Ite;if(!f){if(r.number==(t?n.state.doc.lines:1))return a;y=`
`,r=n.state.doc.line(r.number+(t?1:-1)),o=n.bidiSpans(r),f=n.visualLineSide(r,!t)}if(c){if(!c(y))return a}else{if(!i)return f;c=i(y)}a=f}}function oxe(n,e,t){let i=n.state.charCategorizer(e),r=i(t);return o=>{let s=i(o);return r==Va.Space&&(r=s),r==s}}function sxe(n,e,t,i){let r=e.head,o=t?1:-1;if(r==(t?n.state.doc.length:0))return Mn.cursor(r,e.assoc);let s=e.goalColumn,a,c=n.contentDOM.getBoundingClientRect(),f=n.coordsAtPos(r,e.assoc||-1),y=n.documentTop;if(f)s==null&&(s=f.left-c.left),a=o<0?f.top:f.bottom;else{let I=n.viewState.lineBlockAt(r);s==null&&(s=Math.min(c.right-c.left,n.defaultCharacterWidth*(r-I.from))),a=(o<0?I.top:I.bottom)+y}let _=c.left+s,E=i??n.viewState.heightOracle.textHeight>>1;for(let I=0;;I+=10){let P=a+(E+I)*o,K=qte(n,{x:_,y:P},!1,o);if(P<c.top||P>c.bottom||(o<0?K<r:K>r)){let z=n.docView.coordsForChar(K),Q=!z||P<z.top?-1:1;return Mn.cursor(K,Q,void 0,s)}}}function h4(n,e,t){for(;;){let i=0;for(let r of n)r.between(e-1,e+1,(o,s,a)=>{if(e>o&&e<s){let c=i||t||(e-o<s-e?-1:1);e=c<0?o:s,i=c}});if(!i)return e}}function Vte(n,e){let t=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],o=null;if(r.empty){let s=h4(n,r.from,0);s!=r.from&&(o=Mn.cursor(s,-1))}else{let s=h4(n,r.from,-1),a=h4(n,r.to,1);(s!=r.from||a!=r.to)&&(o=Mn.range(r.from==r.anchor?s:a,r.from==r.head?s:a))}o&&(t||(t=e.ranges.slice()),t[i]=o)}return t?Mn.create(t,e.mainIndex):e}function k8(n,e,t){let i=h4(n.state.facet(A5).map(r=>r(n)),t.from,e.head>t.from?-1:1);return i==t.from?t:Mn.cursor(i,i<t.from?1:-1)}const j3="";class axe{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Ho.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=j3}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let o=this.text.length;this.readNode(r);let s=r.nextSibling;if(s==t)break;let a=Js.get(r),c=Js.get(s);(a&&c?a.breakAfter:(a?a.breakAfter:yE(r))||yE(s)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>o)&&!uxe(s,t)&&this.lineBreak(),r=s}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,s=1,a;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,i),s=this.lineSeparator.length):(a=r.exec(t))&&(o=a.index,s=a[0].length),this.append(t.slice(i,o<0?t.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let c of this.points)c.node==e&&c.pos>this.text.length&&(c.pos-=s-1);i=o+s}}readNode(e){if(e.cmIgnore)return;let t=Js.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(lxe(e,i.node,i.offset)?t:0))}}function lxe(n,e,t){for(;;){if(!e||t<m0(e))return!1;if(e==n)return!0;t=wC(e)+1,e=e.parentNode}}function uxe(n,e){let t;for(;!(n==e||!n);n=n.nextSibling){let i=Js.get(n);if(!(i?.isWidget||n.cmIgnore))return!1;i&&(t||(t=[])).push(i)}if(t)for(let i of t){let r=i.overrideDOMText;if(r?.length)return!1}return!0}class WN{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class cxe{constructor(e,t,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:o,impreciseAnchor:s}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let a=o||s?[]:hxe(e),c=new axe(a,e.state);c.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=c.text,this.newSel=dxe(a,this.bounds.from)}else{let a=e.observer.selectionRange,c=o&&o.node==a.focusNode&&o.offset==a.focusOffset||!qD(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),f=s&&s.node==a.anchorNode&&s.offset==a.anchorOffset||!qD(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),y=e.viewport;if((Ai.ios||Ai.chrome)&&e.state.selection.main.empty&&c!=f&&(y.from>0||y.to<e.state.doc.length)){let _=Math.min(c,f),E=Math.max(c,f),I=y.from-_,P=y.to-E;(I==0||I==1||_==0)&&(P==0||P==-1||E==e.state.doc.length)&&(c=0,f=e.state.doc.length)}this.newSel=Mn.single(f,c)}}}function $te(n,e){let t,{newSel:i}=e,r=n.state.selection.main,o=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:s,to:a}=e.bounds,c=r.from,f=null;(o===8||Ai.android&&e.text.length<a-s)&&(c=r.to,f="end");let y=Hte(n.state.doc.sliceString(s,a,j3),e.text,c-s,f);y&&(Ai.chrome&&o==13&&y.toB==y.from+2&&e.text.slice(y.from,y.toB)==j3+j3&&y.toB--,t={from:s+y.from,to:s+y.toA,insert:Zo.of(e.text.slice(y.from,y.toB).split(j3))})}else i&&(!n.hasFocus&&n.state.facet(w1)||i.main.eq(r))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!r.empty&&i&&i.main.empty?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,r.to)}:(Ai.mac||Ai.android)&&t&&t.from==t.to&&t.from==r.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=Mn.single(i.main.anchor-1,i.main.head-1)),t={from:t.from,to:t.to,insert:Zo.of([t.insert.toString().replace("."," ")])}):t&&t.from>=r.from&&t.to<=r.to&&(t.from!=r.from||t.to!=r.to)&&r.to-r.from-(t.to-t.from)<=4?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,r.to))}:n.state.doc.lineAt(r.from).to<r.to&&n.docView.lineHasWidget(r.to)&&n.inputState.insertingTextAt>Date.now()-50?t={from:r.from,to:r.to,insert:n.state.toText(n.inputState.insertingText)}:Ai.chrome&&t&&t.from==t.to&&t.from==r.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=Mn.single(i.main.anchor-1,i.main.head-1)),t={from:r.from,to:r.to,insert:Zo.of([" "])}),t)return iU(n,t,i,o);if(i&&!i.main.eq(r)){let s=!1,a="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(s=!0),a=n.inputState.lastSelectionOrigin,a=="select.pointer"&&(i=Vte(n.state.facet(A5).map(c=>c(n)),i))),n.dispatch({selection:i,scrollIntoView:s,userEvent:a}),!0}else return!1}function iU(n,e,t,i=-1){if(Ai.ios&&n.inputState.flushIOSKey(e))return!0;let r=n.state.selection.main;if(Ai.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&n.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&zx(n.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&zx(n.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&zx(n.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let s,a=()=>s||(s=Axe(n,e,t));return n.state.facet(Pte).some(c=>c(n,e.from,e.to,o,a))||n.dispatch(a()),!0}function Axe(n,e,t){let i,r=n.state,o=r.selection.main,s=-1;if(e.from==e.to&&e.from<o.from||e.from>o.to){let c=e.from<o.from?-1:1,f=c<0?o.from:o.to,y=h4(r.facet(A5).map(_=>_(n)),f,c);e.from==y&&(s=y)}if(s>-1)i={changes:e,selection:Mn.cursor(e.from+e.insert.length,-1)};else if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let c=o.from<e.from?r.sliceDoc(o.from,e.from):"",f=o.to>e.to?r.sliceDoc(e.to,o.to):"";i=r.replaceSelection(n.state.toText(c+e.insert.sliceString(0,void 0,n.state.lineBreak)+f))}else{let c=r.changes(e),f=t&&t.main.to<=c.newLength?t.main:void 0;if(r.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=o.to+10&&e.to>=o.to-10){let y=n.state.sliceDoc(e.from,e.to),_,E=t&&Qte(n,t.main.head);if(E){let K=e.insert.length-(e.to-e.from);_={from:E.from,to:E.to-K}}else _=n.state.doc.lineAt(o.head);let I=o.to-e.to,P=o.to-o.from;i=r.changeByRange(K=>{if(K.from==o.from&&K.to==o.to)return{changes:c,range:f||K.map(c)};let z=K.to-I,Q=z-y.length;if(K.to-K.from!=P||n.state.sliceDoc(Q,z)!=y||K.to>=_.from&&K.from<=_.to)return{range:K};let V=r.changes({from:Q,to:z,insert:e.insert}),$=K.to-o.to;return{changes:V,range:f?Mn.range(Math.max(0,f.anchor+$),Math.max(0,f.head+$)):K.map(V)}})}else i={changes:c,selection:f&&r.selection.replaceRange(f)}}let a="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,a+=".compose",n.inputState.compositionFirstChange&&(a+=".start",n.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:a,scrollIntoView:!0})}function Hte(n,e,t,i){let r=Math.min(n.length,e.length),o=0;for(;o<r&&n.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==r&&n.length==e.length)return null;let s=n.length,a=e.length;for(;s>0&&a>0&&n.charCodeAt(s-1)==e.charCodeAt(a-1);)s--,a--;if(i=="end"){let c=Math.max(0,o-Math.min(s,a));t-=s+c-o}if(s<o&&n.length<e.length){let c=t<=o&&t>=s?o-t:0;o-=c,a=o+(a-s),s=o}else if(a<o){let c=t<=o&&t>=a?o-t:0;o-=c,s=o+(s-a),a=o}return{from:o,toA:s,toB:a}}function hxe(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:o}=n.observer.selectionRange;return t&&(e.push(new WN(t,i)),(r!=t||o!=i)&&e.push(new WN(r,o))),e}function dxe(n,e){if(n.length==0)return null;let t=n[0].pos,i=n.length==2?n[1].pos:t;return t>-1&&i>-1?Mn.single(t+e,i+e):null}class fxe{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Ai.safari&&e.contentDOM.addEventListener("input",()=>null),Ai.gecko&&Ixe(e.contentDOM.ownerDocument)}handleEvent(e){!_xe(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,t);for(let r of i.handlers){if(t.defaultPrevented)break;if(r(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=pxe(e),i=this.handlers,r=this.view.contentDOM;for(let o in t)if(o!="scroll"){let s=!t[o].handlers.length,a=i[o];a&&s!=!a.handlers.length&&(r.removeEventListener(o,this.handleEvent),a=null),a||r.addEventListener(o,this.handleEvent,{passive:s})}for(let o in i)o!="scroll"&&!t[o]&&r.removeEventListener(o,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Xte.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Ai.android&&Ai.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return Ai.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=Zte.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||mxe.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,zx(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:Ai.safari&&!Ai.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function QN(n,e){return(t,i)=>{try{return e.call(n,i,t)}catch(r){xh(t.state,r)}}}function pxe(n){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of n){let r=i.spec,o=r&&r.plugin.domEventHandlers,s=r&&r.plugin.domEventObservers;if(o)for(let a in o){let c=o[a];c&&t(a).handlers.push(QN(i.value,c))}if(s)for(let a in s){let c=s[a];c&&t(a).observers.push(QN(i.value,c))}}for(let i in Km)t(i).handlers.push(Km[i]);for(let i in Mp)t(i).observers.push(Mp[i]);return e}const Zte=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],mxe="dthko",Xte=[16,17,18,20,91,92,224,225],cw=6;function Aw(n){return Math.max(0,n)*.7+8}function gxe(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class yxe{constructor(e,t,i,r){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=S_e(e.contentDOM),this.atoms=e.state.facet(A5).map(s=>s(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Ho.allowMultipleSelections)&&vxe(e,t),this.dragging=Cxe(e,t)&&tne(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&gxe(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,i=0,r=0,o=0,s=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:s}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:a}=this.scrollParents.y.getBoundingClientRect());let c=nU(this.view);e.clientX-c.left<=r+cw?t=-Aw(r-e.clientX):e.clientX+c.right>=s-cw&&(t=Aw(e.clientX-s)),e.clientY-c.top<=o+cw?i=-Aw(o-e.clientY):e.clientY+c.bottom>=a-cw&&(i=Aw(e.clientY-a)),this.setScrollSpeed(t,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,i=Vte(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function vxe(n,e){let t=n.state.facet(Tte);return t.length?t[0](e):Ai.mac?e.metaKey:e.ctrlKey}function bxe(n,e){let t=n.state.facet(kte);return t.length?t[0](e):Ai.mac?!e.altKey:!e.ctrlKey}function Cxe(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let i=rM(n.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let o=0;o<r.length;o++){let s=r[o];if(s.left<=e.clientX&&s.right>=e.clientX&&s.top<=e.clientY&&s.bottom>=e.clientY)return!0}return!1}function _xe(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=Js.get(t))&&i.ignoreEvent(e))return!1;return!0}const Km=Object.create(null),Mp=Object.create(null),Jte=Ai.ie&&Ai.ie_version<15||Ai.ios&&Ai.webkit_version<604;function xxe(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),ene(n,t.value)},50)}function uB(n,e,t){for(let i of n.facet(e))t=i(t,n);return t}function ene(n,e){e=uB(n.state,JL,e);let{state:t}=n,i,r=1,o=t.toText(e),s=o.lines==t.selection.ranges.length;if(nR!=null&&t.selection.ranges.every(c=>c.empty)&&nR==o.toString()){let c=-1;i=t.changeByRange(f=>{let y=t.doc.lineAt(f.from);if(y.from==c)return{range:f};c=y.from;let _=t.toText((s?o.line(r++).text:e)+t.lineBreak);return{changes:{from:y.from,insert:_},range:Mn.cursor(f.from+_.length)}})}else s?i=t.changeByRange(c=>{let f=o.line(r++);return{changes:{from:c.from,to:c.to,insert:f.text},range:Mn.cursor(c.from+f.length)}}):i=t.replaceSelection(o);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Mp.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Km.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);Mp.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};Mp.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Km.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of n.state.facet(Dte))if(t=i(n,e),t)break;if(!t&&e.button==0&&(t=Sxe(n,e)),t){let i=!n.hasFocus;n.inputState.startMouseSelection(new yxe(n,e,t,i)),i&&n.observer.ignore(()=>{fte(n.contentDOM);let o=n.root.activeElement;o&&!o.contains(n.contentDOM)&&o.blur()});let r=n.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}else n.inputState.setSelectionOrigin("select.pointer");return!1};function qN(n,e,t,i){if(i==1)return Mn.cursor(e,t);if(i==2)return J_e(n.state,e,t);{let r=vu.find(n.docView,e),o=n.state.doc.lineAt(r?r.posAtEnd:e),s=r?r.posAtStart:o.from,a=r?r.posAtEnd:o.to;return a<n.state.doc.length&&a==o.to&&a++,Mn.range(s,a)}}let YN=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function Mxe(n,e,t,i){let r=vu.find(n.docView,e);if(!r)return 1;let o=e-r.posAtStart;if(o==0)return 1;if(o==r.length)return-1;let s=r.coordsAt(o,-1);if(s&&YN(t,i,s))return-1;let a=r.coordsAt(o,1);return a&&YN(t,i,a)?1:s&&s.bottom>=i?-1:1}function VN(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:Mxe(n,t,e.clientX,e.clientY)}}const wxe=Ai.ie&&Ai.ie_version<=11;let $N=null,HN=0,ZN=0;function tne(n){if(!wxe)return n.detail;let e=$N,t=ZN;return $N=n,ZN=Date.now(),HN=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(HN+1)%3:1}function Sxe(n,e){let t=VN(n,e),i=tne(e),r=n.state.selection;return{update(o){o.docChanged&&(t.pos=o.changes.mapPos(t.pos),r=r.map(o.changes))},get(o,s,a){let c=VN(n,o),f,y=qN(n,c.pos,c.bias,i);if(t.pos!=c.pos&&!s){let _=qN(n,t.pos,t.bias,i),E=Math.min(_.from,y.from),I=Math.max(_.to,y.to);y=E<y.from?Mn.range(E,I):Mn.range(I,E)}return s?r.replaceRange(r.main.extend(y.from,y.to)):a&&i==1&&r.ranges.length>1&&(f=Exe(r,c.pos))?f:a?r.addRange(y):Mn.create([y])}}}function Exe(n,e){for(let t=0;t<n.ranges.length;t++){let{from:i,to:r}=n.ranges[t];if(i<=e&&r>=e)return Mn.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}Km.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let r=n.docView.nearest(e.target);if(r&&r.isWidget){let o=r.posAtStart,s=o+r.length;(o>=t.to||s<=t.from)&&(t=Mn.range(o,s))}}let{inputState:i}=n;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",uB(n.state,eU,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Km.dragend=n=>(n.inputState.draggedContent=null,!1);function XN(n,e,t,i){if(t=uB(n.state,JL,t),!t)return;let r=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=n.inputState,s=i&&o&&bxe(n,e)?{from:o.from,to:o.to}:null,a={from:r,insert:t},c=n.state.changes(s?[s,a]:a);n.focus(),n.dispatch({changes:c,selection:{anchor:c.mapPos(r,-1),head:c.mapPos(r,1)},userEvent:s?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Km.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),r=0,o=()=>{++r==t.length&&XN(n,e,i.filter(s=>s!=null).join(n.state.lineBreak),!1)};for(let s=0;s<t.length;s++){let a=new FileReader;a.onerror=o,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[s]=a.result),o()},a.readAsText(t[s])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return XN(n,e,i,!0),!0}return!1};Km.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=Jte?null:e.clipboardData;return t?(ene(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(xxe(n),!1)};function Bxe(n,e){let t=n.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function Oxe(n){let e=[],t=[],i=!1;for(let r of n.selection.ranges)r.empty||(e.push(n.sliceDoc(r.from,r.to)),t.push(r));if(!e.length){let r=-1;for(let{from:o}of n.selection.ranges){let s=n.doc.lineAt(o);s.number>r&&(e.push(s.text),t.push({from:s.from,to:Math.min(n.doc.length,s.to+1)})),r=s.number}i=!0}return{text:uB(n,eU,e.join(n.lineBreak)),ranges:t,linewise:i}}let nR=null;Km.copy=Km.cut=(n,e)=>{let{text:t,ranges:i,linewise:r}=Oxe(n.state);if(!t&&!r)return!1;nR=r?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=Jte?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",t),!0):(Bxe(n,t),!1)};const nne=G1.define();function ine(n,e){let t=[];for(let i of n.facet(Lte)){let r=i(n,e);r&&t.push(r)}return t.length?n.update({effects:t,annotations:nne.of(!0)}):null}function rne(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=ine(n.state,e);t?n.dispatch(t):n.update([])}},10)}Mp.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),rne(n)};Mp.blur=n=>{n.observer.clearSelectionRange(),rne(n)};Mp.compositionstart=Mp.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};Mp.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,Ai.chrome&&Ai.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};Mp.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Km.beforeinput=(n,e)=>{var t,i;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(n.inputState.insertingText=e.data,n.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&n.observer.editContext){let o=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),s=e.getTargetRanges();if(o&&s.length){let a=s[0],c=n.posAtDOM(a.startContainer,a.startOffset),f=n.posAtDOM(a.endContainer,a.endOffset);return iU(n,{from:c,to:f,insert:n.state.toText(o)},null),!0}}let r;if(Ai.chrome&&Ai.android&&(r=Zte.find(o=>o.inputType==e.inputType))&&(n.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let o=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>o+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return Ai.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),Ai.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>Mp.compositionend(n,e),20),!1};const JN=new Set;function Ixe(n){JN.has(n)||(JN.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const eG=["pre-wrap","normal","pre-line","break-spaces"];let p2=!1;function tG(){p2=!1}class Txe{constructor(e){this.lineWrapping=e,this.doc=Zo.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return eG.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(t=!0,this.heightSamples[Math.floor(r*10)]=!0)}return t}refresh(e,t,i,r,o,s){let a=eG.indexOf(e)>-1,c=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=i,this.textHeight=r,this.lineLength=o,c){this.heightSamples={};for(let f=0;f<s.length;f++){let y=s[f];y<0?f++:this.heightSamples[Math.floor(y*10)]=!0}}return c}}class kxe{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class $g{constructor(e,t,i,r,o){this.from=e,this.length=t,this.top=i,this.height=r,this._content=o}get type(){return typeof this._content=="number"?Mh.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Sv?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new $g(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var za=(function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n})(za||(za={}));const hS=.001;class wh{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>hS&&(p2=!0),this.height=e)}replace(e,t,i){return wh.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,r){let o=this,s=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:c,toA:f,fromB:y,toB:_}=r[a],E=o.lineAt(c,za.ByPosNoHeight,i.setDoc(t),0,0),I=E.to>=f?E:o.lineAt(f,za.ByPosNoHeight,i,0,0);for(_+=I.to-f,f=I.to;a>0&&E.from<=r[a-1].toA;)c=r[a-1].fromA,y=r[a-1].fromB,a--,c<E.from&&(E=o.lineAt(c,za.ByPosNoHeight,i,0,0));y+=E.from-c,c=E.from;let P=rU.build(i.setDoc(s),e,y,_);o=CE(o,o.replace(c,f,P))}return o.updateHeight(i,0)}static empty(){return new sf(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,r=0,o=0;for(;;)if(t==i)if(r>o*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(o>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,o-=a.size}else break;else if(r<o){let a=e[t++];a&&(r+=a.size)}else{let a=e[--i];a&&(o+=a.size)}let s=0;return e[t-1]==null?(s=1,t--):e[t]==null&&(s=1,i++),new Dxe(wh.of(e.slice(0,t)),s,wh.of(e.slice(i)))}}function CE(n,e){return n==e?n:(n.constructor!=e.constructor&&(p2=!0),e)}wh.prototype.size=1;class one extends wh{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,r){return new $g(r,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,r,o){return this.blockAt(0,i,r,o)}forEachLine(e,t,i,r,o,s){e<=o+this.length&&t>=o&&s(this.blockAt(0,i,r,o))}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class sf extends one{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,r){return new $g(r,this.length,i,this.height,this.breaks)}replace(e,t,i){let r=i[0];return i.length==1&&(r instanceof sf||r instanceof Jc&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Jc?r=new sf(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):wh.of(i)}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more?this.setHeight(r.heights[r.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Jc extends wh{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,o=r-i+1,s,a=0;if(e.lineWrapping){let c=Math.min(this.height,e.lineHeight*o);s=c/o,this.length>o+1&&(a=(this.height-c)/(this.length-o-1))}else s=this.height/o;return{firstLine:i,lastLine:r,perLine:s,perChar:a}}blockAt(e,t,i,r){let{firstLine:o,lastLine:s,perLine:a,perChar:c}=this.heightMetrics(t,r);if(t.lineWrapping){let f=r+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),y=t.doc.lineAt(f),_=a+y.length*c,E=Math.max(i,e-_/2);return new $g(y.from,y.length,E,_,0)}else{let f=Math.max(0,Math.min(s-o,Math.floor((e-i)/a))),{from:y,length:_}=t.doc.line(o+f);return new $g(y,_,i+a*f,a,0)}}lineAt(e,t,i,r,o){if(t==za.ByHeight)return this.blockAt(e,i,r,o);if(t==za.ByPosNoHeight){let{from:I,to:P}=i.doc.lineAt(e);return new $g(I,P-I,0,0,0)}let{firstLine:s,perLine:a,perChar:c}=this.heightMetrics(i,o),f=i.doc.lineAt(e),y=a+f.length*c,_=f.number-s,E=r+a*_+c*(f.from-o-_);return new $g(f.from,f.length,Math.max(r,Math.min(E,r+this.height-y)),y,0)}forEachLine(e,t,i,r,o,s){e=Math.max(e,o),t=Math.min(t,o+this.length);let{firstLine:a,perLine:c,perChar:f}=this.heightMetrics(i,o);for(let y=e,_=r;y<=t;){let E=i.doc.lineAt(y);if(y==e){let P=E.number-a;_+=c*P+f*(e-o-P)}let I=c+f*E.length;s(new $g(E.from,E.length,_,I,0)),_+=I,y=E.to+1}}replace(e,t,i){let r=this.length-t;if(r>0){let o=i[i.length-1];o instanceof Jc?i[i.length-1]=new Jc(o.length+r):i.push(null,new Jc(r-1))}if(e>0){let o=i[0];o instanceof Jc?i[0]=new Jc(e+o.length):i.unshift(new Jc(e-1),null)}return wh.of(i)}decomposeLeft(e,t){t.push(new Jc(e-1),null)}decomposeRight(e,t){t.push(null,new Jc(this.length-e-1))}updateHeight(e,t=0,i=!1,r){let o=t+this.length;if(r&&r.from<=t+this.length&&r.more){let s=[],a=Math.max(t,r.from),c=-1;for(r.from>t&&s.push(new Jc(r.from-t-1).updateHeight(e,t));a<=o&&r.more;){let y=e.doc.lineAt(a).length;s.length&&s.push(null);let _=r.heights[r.index++];c==-1?c=_:Math.abs(_-c)>=hS&&(c=-2);let E=new sf(y,_);E.outdated=!1,s.push(E),a+=y+1}a<=o&&s.push(null,new Jc(o-a).updateHeight(e,a));let f=wh.of(s);return(c<0||Math.abs(f.height-this.height)>=hS||Math.abs(c-this.heightMetrics(e,t).perLine)>=hS)&&(p2=!0),CE(this,f)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Dxe extends wh{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,r){let o=i+this.left.height;return e<o?this.left.blockAt(e,t,i,r):this.right.blockAt(e,t,o,r+this.left.length+this.break)}lineAt(e,t,i,r,o){let s=r+this.left.height,a=o+this.left.length+this.break,c=t==za.ByHeight?e<s:e<a,f=c?this.left.lineAt(e,t,i,r,o):this.right.lineAt(e,t,i,s,a);if(this.break||(c?f.to<a:f.from>a))return f;let y=t==za.ByPosNoHeight?za.ByPosNoHeight:za.ByPos;return c?f.join(this.right.lineAt(a,y,i,s,a)):this.left.lineAt(a,y,i,r,o).join(f)}forEachLine(e,t,i,r,o,s){let a=r+this.left.height,c=o+this.left.length+this.break;if(this.break)e<c&&this.left.forEachLine(e,t,i,r,o,s),t>=c&&this.right.forEachLine(e,t,i,a,c,s);else{let f=this.lineAt(c,za.ByPos,i,r,o);e<f.from&&this.left.forEachLine(e,f.from-1,i,r,o,s),f.to>=e&&f.from<=t&&s(f),t>f.to&&this.right.forEachLine(f.to+1,t,i,a,c,s)}}replace(e,t,i){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,i));let o=[];e>0&&this.decomposeLeft(e,o);let s=o.length;for(let a of i)o.push(a);if(e>0&&nG(o,s-1),t<this.length){let a=o.length;this.decomposeRight(t,o),nG(o,a)}return wh.of(o)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?wh.of(this.break?[e,null,t]:[e,t]):(this.left=CE(this.left,e),this.right=CE(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,r){let{left:o,right:s}=this,a=t+o.length+this.break,c=null;return r&&r.from<=t+o.length&&r.more?c=o=o.updateHeight(e,t,i,r):o.updateHeight(e,t,i),r&&r.from<=a+s.length&&r.more?c=s=s.updateHeight(e,a,i,r):s.updateHeight(e,a,i),c?this.balanced(o,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function nG(n,e){let t,i;n[e]==null&&(t=n[e-1])instanceof Jc&&(i=n[e+1])instanceof Jc&&n.splice(e-1,3,new Jc(t.length+1+i.length))}const Rxe=5;class rU{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof sf?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new sf(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,o=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let s=t-e;i.block?this.addBlock(new one(s,r,i)):(s||o||r>=Rxe)&&this.addLineDeco(r,o,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new sf(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new Jc(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof sf)return e;let t=new sf(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof sf)&&!this.isCovered?this.nodes.push(new sf(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof sf&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,t,i,r){let o=new rU(i,e);return Po.spans(t,i,r,o,0),o.finish(i)}}function Pxe(n,e,t){let i=new Lxe;return Po.compare(n,e,t,i,0),i.changes}class Lxe{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,r){(e<t||i&&i.heightRelevant||r&&r.heightRelevant)&&AS(e,t,this.changes,5)}}function Uxe(n,e){let t=n.getBoundingClientRect(),i=n.ownerDocument,r=i.defaultView||window,o=Math.max(0,t.left),s=Math.min(r.innerWidth,t.right),a=Math.max(0,t.top),c=Math.min(r.innerHeight,t.bottom);for(let f=n.parentNode;f&&f!=i.body;)if(f.nodeType==1){let y=f,_=window.getComputedStyle(y);if((y.scrollHeight>y.clientHeight||y.scrollWidth>y.clientWidth)&&_.overflow!="visible"){let E=y.getBoundingClientRect();o=Math.max(o,E.left),s=Math.min(s,E.right),a=Math.max(a,E.top),c=Math.min(f==n.parentNode?r.innerHeight:c,E.bottom)}f=_.position=="absolute"||_.position=="fixed"?y.offsetParent:y.parentNode}else if(f.nodeType==11)f=f.host;else break;return{left:o-t.left,right:Math.max(o,s)-t.left,top:a-(t.top+e),bottom:Math.max(a,c)-(t.top+e)}}function Kxe(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function Fxe(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class D8{constructor(e,t,i,r){this.from=e,this.to=t,this.size=i,this.displaySize=r}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],o=t[i];if(r.from!=o.from||r.to!=o.to||r.size!=o.size)return!1}return!0}draw(e,t){return ur.replace({widget:new zxe(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class zxe extends kv{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class iG{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=rG,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Na.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(tU).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new Txe(t),this.stateDeco=e.facet(sM).filter(i=>typeof i!="function"),this.heightMap=wh.empty().applyChanges(this.stateDeco,Zo.empty,this.heightOracle.setDoc(e.doc),[new Cp(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=ur.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let r=i?t.head:t.anchor;if(!e.some(({from:o,to:s})=>r>=o&&r<=s)){let{from:o,to:s}=this.lineBlockAt(r);e.push(new hw(o,s))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?rG:new oU(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(N3(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(sM).filter(y=>typeof y!="function");let r=e.changedRanges,o=Cp.extendWithRanges(r,Pxe(i,this.stateDeco,e?e.changes:qu.empty(this.state.doc.length))),s=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);tG(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=s||p2)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=s);let c=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<c.from||t.range.head>c.to)||!this.viewportIsAppropriate(c))&&(c=this.getViewport(0,t));let f=c.from!=this.viewport.from||c.to!=this.viewport.to;this.viewport=c,e.flags|=this.updateForViewport(),(f||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Kte)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),r=this.heightOracle,o=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Na.RTL:Na.LTR;let s=this.heightOracle.mustRefreshForWrapping(o),a=t.getBoundingClientRect(),c=s||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let f=0,y=0;if(a.width&&a.height){let{scaleX:Z,scaleY:ee}=dte(t,a);(Z>.005&&Math.abs(this.scaleX-Z)>.005||ee>.005&&Math.abs(this.scaleY-ee)>.005)&&(this.scaleX=Z,this.scaleY=ee,f|=16,s=c=!0)}let _=(parseInt(i.paddingTop)||0)*this.scaleY,E=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=_||this.paddingBottom!=E)&&(this.paddingTop=_,this.paddingBottom=E,f|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(c=!0),this.editorWidth=e.scrollDOM.clientWidth,f|=16);let I=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=I&&(this.scrollAnchorHeight=-1,this.scrollTop=I),this.scrolledToBottom=mte(e.scrollDOM);let P=(this.printing?Fxe:Uxe)(t,this.paddingTop),K=P.top-this.pixelViewport.top,z=P.bottom-this.pixelViewport.bottom;this.pixelViewport=P;let Q=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(Q!=this.inView&&(this.inView=Q,Q&&(c=!0)),!this.inView&&!this.scrollTarget&&!Kxe(e.dom))return 0;let V=a.width;if((this.contentDOMWidth!=V||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,f|=16),c){let Z=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(Z)&&(s=!0),s||r.lineWrapping&&Math.abs(V-this.contentDOMWidth)>r.charWidth){let{lineHeight:ee,charWidth:X,textHeight:W}=e.docView.measureTextSize();s=ee>0&&r.refresh(o,ee,X,W,Math.max(5,V/X),Z),s&&(e.docView.minWidth=0,f|=16)}K>0&&z>0?y=Math.max(K,z):K<0&&z<0&&(y=Math.min(K,z)),tG();for(let ee of this.viewports){let X=ee.from==this.viewport.from?Z:e.docView.measureVisibleLineHeights(ee);this.heightMap=(s?wh.empty().applyChanges(this.stateDeco,Zo.empty,this.heightOracle,[new Cp(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,s,new kxe(ee.from,X))}p2&&(f|=2)}let $=!this.viewportIsAppropriate(this.viewport,y)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return $&&(f&2&&(f|=this.updateScaler()),this.viewport=this.getViewport(y,this.scrollTarget),f|=this.updateForViewport()),(f&2||$)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps,e)),f|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),f}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,o=this.heightOracle,{visibleTop:s,visibleBottom:a}=this,c=new hw(r.lineAt(s-i*1e3,za.ByHeight,o,0,0).from,r.lineAt(a+(1-i)*1e3,za.ByHeight,o,0,0).to);if(t){let{head:f}=t.range;if(f<c.from||f>c.to){let y=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),_=r.lineAt(f,za.ByPos,o,0,0),E;t.y=="center"?E=(_.top+_.bottom)/2-y/2:t.y=="start"||t.y=="nearest"&&f<c.from?E=_.top:E=_.bottom-y,c=new hw(r.lineAt(E-1e3/2,za.ByHeight,o,0,0).from,r.lineAt(E+y+1e3/2,za.ByHeight,o,0,0).to)}}return c}mapViewport(e,t){let i=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new hw(this.heightMap.lineAt(i,za.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,za.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,za.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(t,za.ByPos,this.heightOracle,0,0),{visibleTop:s,visibleBottom:a}=this;return(e==0||r<=s-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||o>=a+Math.max(10,Math.min(i,250)))&&r>s-2*1e3&&o<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let r of e)t.touchesRange(r.from,r.to)||i.push(new D8(t.mapPos(r.from),t.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,o=r>>1,s=r<<1;if(this.defaultTextDirection!=Na.LTR&&!i)return[];let a=[],c=(y,_,E,I)=>{if(_-y<o)return;let P=this.state.selection.main,K=[P.from];P.empty||K.push(P.to);for(let Q of K)if(Q>y&&Q<_){c(y,Q-10,E,I),c(Q+10,_,E,I);return}let z=Nxe(e,Q=>Q.from>=E.from&&Q.to<=E.to&&Math.abs(Q.from-y)<o&&Math.abs(Q.to-_)<o&&!K.some(V=>Q.from<V&&Q.to>V));if(!z){if(_<E.to&&t&&i&&t.visibleRanges.some($=>$.from<=_&&$.to>=_)){let $=t.moveToLineBoundary(Mn.cursor(_),!1,!0).head;$>y&&(_=$)}let Q=this.gapSize(E,y,_,I),V=i||Q<2e6?Q:2e6;z=new D8(y,_,Q,V)}a.push(z)},f=y=>{if(y.length<s||y.type!=Mh.Text)return;let _=jxe(y.from,y.to,this.stateDeco);if(_.total<s)return;let E=this.scrollTarget?this.scrollTarget.range.head:null,I,P;if(i){let K=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,z,Q;if(E!=null){let V=fw(_,E),$=((this.visibleBottom-this.visibleTop)/2+K)/y.height;z=V-$,Q=V+$}else z=(this.visibleTop-y.top-K)/y.height,Q=(this.visibleBottom-y.top+K)/y.height;I=dw(_,z),P=dw(_,Q)}else{let K=_.total*this.heightOracle.charWidth,z=r*this.heightOracle.charWidth,Q=0;if(K>2e6)for(let X of e)X.from>=y.from&&X.from<y.to&&X.size!=X.displaySize&&X.from*this.heightOracle.charWidth+Q<this.pixelViewport.left&&(Q=X.size-X.displaySize);let V=this.pixelViewport.left+Q,$=this.pixelViewport.right+Q,Z,ee;if(E!=null){let X=fw(_,E),W=(($-V)/2+z)/K;Z=X-W,ee=X+W}else Z=(V-z)/K,ee=($+z)/K;I=dw(_,Z),P=dw(_,ee)}I>y.from&&c(y.from,I,y,_),P<y.to&&c(P,y.to,y,_)};for(let y of this.viewportLines)Array.isArray(y.type)?y.type.forEach(f):f(y);return a}gapSize(e,t,i,r){let o=fw(r,i)-fw(r,t);return this.heightOracle.lineWrapping?e.height*o:r.total*this.heightOracle.charWidth*o}updateLineGaps(e){D8.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=ur.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let i=[];Po.spans(t,this.viewport.from,this.viewport.to,{span(o,s){i.push({from:o,to:s})},point(){}},20);let r=0;if(i.length!=this.visibleRanges.length)r=12;else for(let o=0;o<i.length&&!(r&8);o++){let s=this.visibleRanges[o],a=i[o];(s.from!=a.from||s.to!=a.to)&&(r|=4,e&&e.mapPos(s.from,-1)==a.from&&e.mapPos(s.to,1)==a.to||(r|=8))}return this.visibleRanges=i,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||N3(this.heightMap.lineAt(e,za.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||N3(this.heightMap.lineAt(this.scaler.fromDOM(e),za.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return N3(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class hw{constructor(e,t){this.from=e,this.to=t}}function jxe(n,e,t){let i=[],r=n,o=0;return Po.spans(t,n,e,{span(){},point(s,a){s>r&&(i.push({from:r,to:s}),o+=s-r),r=a}},20),r<e&&(i.push({from:r,to:e}),o+=e-r),{total:o,ranges:i}}function dw({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(n*t);for(let r=0;;r++){let{from:o,to:s}=e[r],a=s-o;if(i<=a)return o+i;i-=a}}function fw(n,e){let t=0;for(let{from:i,to:r}of n.ranges){if(e<=r){t+=e-i;break}t+=r-i}return t/n.total}function Nxe(n,e){for(let t of n)if(e(t))return t}const rG={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class oU{constructor(e,t,i){let r=0,o=0,s=0;this.viewports=i.map(({from:a,to:c})=>{let f=t.lineAt(a,za.ByPos,e,0,0).top,y=t.lineAt(c,za.ByPos,e,0,0).bottom;return r+=y-f,{from:a,to:c,top:f,bottom:y,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let a of this.viewports)a.domTop=s+(a.top-o)*this.scale,s=a.domBottom=a.domTop+(a.bottom-a.top),o=a.bottom}toDOM(e){for(let t=0,i=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return r+(e-i)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);i=o.bottom,r=o.domBottom}}fromDOM(e){for(let t=0,i=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return i+(e-r)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);i=o.bottom,r=o.domBottom}}eq(e){return e instanceof oU?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to):!1}}function N3(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),i=e.toDOM(n.bottom);return new $g(n.from,n.length,t,i-t,Array.isArray(n._content)?n._content.map(r=>N3(r,e)):n._content)}const pw=yi.define({combine:n=>n.join(" ")}),iR=yi.define({combine:n=>n.indexOf(!0)>-1}),rR=Mv.newName(),sne=Mv.newName(),ane=Mv.newName(),lne={"&light":"."+sne,"&dark":"."+ane};function oR(n,e,t){return new Mv(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return n;if(!t||!t[r])throw new RangeError(`Unsupported selector: ${r}`);return t[r]}):n+" "+i}})}const Gxe=oR("."+rR,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lne),Wxe={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},R8=Ai.ie&&Ai.ie_version<=11;class Qxe{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new E_e,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(Ai.ie&&Ai.ie_version<=11||Ai.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Ai.android&&e.constructor.EDIT_CONTEXT!==!1&&!(Ai.chrome&&Ai.chrome_version<126)&&(this.editContext=new Yxe(e),e.state.facet(w1)&&(e.contentDOM.editContext=this.editContext.editContext)),R8&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(w1)?i.root.activeElement!=this.dom:!cS(this.dom,r))return;let o=r.anchorNode&&i.docView.nearest(r.anchorNode);if(o&&o.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Ai.ie&&Ai.ie_version<=11||Ai.android&&Ai.chrome)&&!i.state.selection.main.empty&&r.focusNode&&c4(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=rM(e.root);if(!t)return!1;let i=Ai.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&qxe(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let r=cS(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&O_e(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Wxe),R8&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),R8&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let r=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&zx(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,r=!1;for(let o of e){let s=this.readMutation(o);s&&(s.typeOver&&(r=!0),t==-1?{from:t,to:i}=s:(t=Math.min(s.from,t),i=Math.max(s.to,i)))}return{from:t,to:i,typeOver:r}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),r=this.selectionChanged&&cS(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new cxe(this.view,e,t,i);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,r=$te(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let i=oG(t,e.previousSibling||e.target.previousSibling,-1),r=oG(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(w1)!=e.state.facet(w1)&&(e.view.contentDOM.editContext=e.state.facet(w1)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function oG(n,e,t){for(;e;){let i=Js.get(e);if(i&&i.parent==n)return i;let r=e.parentNode;e=r!=n.dom?r:t>0?e.nextSibling:e.previousSibling}return null}function sG(n,e){let t=e.startContainer,i=e.startOffset,r=e.endContainer,o=e.endOffset,s=n.docView.domAtPos(n.state.selection.main.anchor);return c4(s.node,s.offset,r,o)&&([t,i,r,o]=[r,o,t,i]),{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:o}}function qxe(n,e){if(e.getComposedRanges){let r=e.getComposedRanges(n.root)[0];if(r)return sG(n,r)}let t=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),t=r.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",i,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",i,!0),t?sG(n,t):null}class Yxe{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let r=e.state.selection.main,{anchor:o,head:s}=r,a=this.toEditorPos(i.updateRangeStart),c=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:a,drifted:!1});let f=c-a>i.text.length;a==this.from&&o<this.from?a=o:c==this.to&&o>this.to&&(c=o);let y=Hte(e.state.sliceDoc(a,c),i.text,(f?r.from:r.to)-a,f?"end":null);if(!y){let E=Mn.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));E.main.eq(r)||e.dispatch({selection:E,userEvent:"select"});return}let _={from:y.from+a,to:y.toA+a,insert:Zo.of(i.text.slice(y.from,y.toB).split(`
`))};if((Ai.mac||Ai.android)&&_.from==s-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(_={from:a,to:c,insert:Zo.of([i.text.replace("."," ")])}),this.pendingContextChange=_,!e.state.readOnly){let E=this.to-this.from+(_.to-_.from+_.insert.length);iU(e,_,Mn.single(this.toEditorPos(i.selectionStart,E),this.toEditorPos(i.selectionEnd,E)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),_.from<_.to&&!_.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(t.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let r=[],o=null;for(let s=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);s<a;s++){let c=e.coordsForChar(s);o=c&&new DOMRect(c.left,c.top,c.right-c.left,c.bottom-c.top)||o||new DOMRect,r.push(o)}t.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let o of i.getTextFormats()){let s=o.underlineStyle,a=o.underlineThickness;if(!/none/i.test(s)&&!/none/i.test(a)){let c=this.toEditorPos(o.rangeStart),f=this.toEditorPos(o.rangeEnd);if(c<f){let y=`text-decoration: underline ${/^[a-z]/.test(s)?s+" ":s=="Dashed"?"dashed ":s=="Squiggle"?"wavy ":""}${/thin/i.test(a)?1:2}px`;r.push(ur.mark({attributes:{style:y}}).range(c,f))}}}e.dispatch({effects:zte.of(ur.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=rM(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((o,s,a,c,f)=>{if(i)return;let y=f.length-(s-o);if(r&&s>=r.to)if(r.from==o&&r.to==s&&r.insert.eq(f)){r=this.pendingContextChange=null,t+=y,this.to+=y;return}else r=null,this.revertPending(e.state);if(o+=t,s+=t,s<=this.from)this.from+=y,this.to+=y;else if(o<this.to){if(o<this.from||s>this.to||this.to-this.from+f.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(s),f.toString()),this.to+=y}t+=y}),r&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),r=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class pi{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(o=>i(o,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||B_e(e.parent)||document,this.viewState=new iG(e.state||Ho.create(e)),e.scrollTo&&e.scrollTo.is(uw)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(_x).map(r=>new I8(r));for(let r of this.plugins)r.update(this);this.observer=new Qxe(this),this.inputState=new fxe(this),this.inputState.ensureHandlers(this.plugins),this.docView=new KN(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof $u?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,r,o=this.state;for(let E of e){if(E.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=E.state}if(this.destroyed){this.viewState.state=o;return}let s=this.hasFocus,a=0,c=null;e.some(E=>E.annotation(nne))?(this.inputState.notifiedFocused=s,a=1):s!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=s,c=ine(o,s),c||(a=1));let f=this.observer.delayedAndroidKey,y=null;if(f?(this.observer.clearDelayedAndroidKey(),y=this.observer.readChange(),(y&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(y=null)):this.observer.clear(),o.facet(Ho.phrases)!=this.state.facet(Ho.phrases))return this.setState(o);r=bE.create(this,o,e),r.flags|=a;let _=this.viewState.scrollTarget;try{this.updateState=2;for(let E of e){if(_&&(_=_.map(E.changes)),E.scrollIntoView){let{main:I}=E.state.selection;_=new jx(I.empty?I:Mn.cursor(I.head,I.head>I.anchor?-1:1))}for(let I of E.effects)I.is(uw)&&(_=I.value.clip(this.state))}this.viewState.update(r,_),this.bidiCache=_E.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),t=this.docView.update(r),this.state.facet(z3)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(E=>E.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(pw)!=r.state.facet(pw)&&(this.viewState.mustMeasureContent=!0),(t||i||_||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!r.empty)for(let E of this.state.facet(JD))try{E(r)}catch(I){xh(this.state,I,"update listener")}(c||y)&&Promise.resolve().then(()=>{c&&this.state==c.startState&&this.dispatch(c),y&&!$te(this,y)&&f.force&&zx(this.contentDOM,f.key,f.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new iG(e),this.plugins=e.facet(_x).map(i=>new I8(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new KN(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(_x),i=e.state.facet(_x);if(t!=i){let r=[];for(let o of i){let s=t.indexOf(o);if(s<0)r.push(new I8(o));else{let a=this.plugins[s];a.mustUpdate=e,r.push(a)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(i){xh(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:s}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(s=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(s<0)if(mte(i))o=-1,s=this.viewState.heightMap.height;else{let I=this.viewState.scrollAnchorAt(r);o=I.from,s=I.top}this.updateState=1;let c=this.viewState.measure(this);if(!c&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let f=[];c&4||([this.measureRequests,f]=[f,this.measureRequests]);let y=f.map(I=>{try{return I.read(this)}catch(P){return xh(this.state,P),aG}}),_=bE.create(this,this.state,[]),E=!1;_.flags|=c,t?t.flags|=c:t=_,this.updateState=2,_.empty||(this.updatePlugins(_),this.inputState.update(_),this.updateAttrs(),E=this.docView.update(_),E&&this.docViewUpdate());for(let I=0;I<f.length;I++)if(y[I]!=aG)try{let P=f[I];P.write&&P.write(y[I],this)}catch(P){xh(this.state,P)}if(E&&this.docView.updateSelection(!0),!_.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,s=-1;continue}else{let P=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-s;if(P>1||P<-1){r=r+P,i.scrollTop=r/this.scaleY,s=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(JD))a(t)}get themeClasses(){return rR+" "+(this.state.facet(iR)?ane:sne)+" "+this.state.facet(pw)}updateAttrs(){let e=lG(this,jte,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(w1)?"true":"false",class:"cm-content",style:`${Ai.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),lG(this,tU,t);let i=this.observer.ignore(()=>{let r=VD(this.contentDOM,this.contentAttrs,t),o=VD(this.dom,this.editorAttrs,e);return r||o});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let r of i.effects)if(r.is(pi.announce)){t&&(this.announceDOM.textContent=""),t=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(z3);let e=this.state.facet(pi.cspNonce);Mv.mount(this.root,this.styleModules.concat(Gxe).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return k8(this,e,GN(this,e,t,i))}moveByGroup(e,t){return k8(this,e,GN(this,e,t,i=>oxe(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),o=i[t?i.length-1:0];return Mn.cursor(o.side(t,r)+e.from,o.forward(!t,r)?1:-1)}moveToLineBoundary(e,t,i=!0){return rxe(this,e,t,i)}moveVertically(e,t,i){return k8(this,e,sxe(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),qte(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),o=this.bidiSpans(r),s=o[hv.find(o,e-r.from,-1,t)];return lB(i,s.dir==Na.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Ute)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Vxe)return Ote(e.length);let t=this.textDirectionAt(e.from),i;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==t&&(o.fresh||Bte(o.isolates,i=UN(this,e))))return o.order;i||(i=UN(this,e));let r=N_e(e.text,t,i);return this.bidiCache.push(new _E(e.from,e.to,t,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Ai.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{fte(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return uw.of(new jx(typeof e=="number"?Mn.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return uw.of(new jx(Mn.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Hl.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Hl.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=Mv.newName(),r=[pw.of(i),z3.of(oR(`.${i}`,e))];return t&&t.dark&&r.push(iR.of(!0)),r}static baseTheme(e){return KC.lowest(z3.of(oR("."+rR,e,lne)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),r=i&&Js.get(i)||Js.get(e);return((t=r?.rootView)===null||t===void 0?void 0:t.view)||null}}pi.styleModule=z3;pi.inputHandler=Pte;pi.clipboardInputFilter=JL;pi.clipboardOutputFilter=eU;pi.scrollHandler=Fte;pi.focusChangeEffect=Lte;pi.perLineTextDirection=Ute;pi.exceptionSink=Rte;pi.updateListener=JD;pi.editable=w1;pi.mouseSelectionStyle=Dte;pi.dragMovesSelection=kte;pi.clickAddsSelectionRange=Tte;pi.decorations=sM;pi.outerDecorations=Nte;pi.atomicRanges=A5;pi.bidiIsolatedRanges=Gte;pi.scrollMargins=Wte;pi.darkTheme=iR;pi.cspNonce=yi.define({combine:n=>n.length?n[0]:""});pi.contentAttributes=tU;pi.editorAttributes=jte;pi.lineWrapping=pi.contentAttributes.of({class:"cm-lineWrapping"});pi.announce=jr.define();const Vxe=4096,aG={};class _E{constructor(e,t,i,r,o,s){this.from=e,this.to=t,this.dir=i,this.isolates=r,this.fresh=o,this.order=s}static update(e,t){if(t.empty&&!e.some(o=>o.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:Na.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let s=e[o];s.dir==r&&!t.touchesRange(s.from,s.to)&&i.push(new _E(t.mapPos(s.from,1),t.mapPos(s.to,-1),s.dir,s.isolates,!1,s.order))}return i}}function lG(n,e,t){for(let i=n.state.facet(e),r=i.length-1;r>=0;r--){let o=i[r],s=typeof o=="function"?o(n):o;s&&YD(s,t)}return t}const $xe=Ai.mac?"mac":Ai.windows?"win":Ai.linux?"linux":"key";function Hxe(n,e){const t=n.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let r,o,s,a;for(let c=0;c<t.length-1;++c){const f=t[c];if(/^(cmd|meta|m)$/i.test(f))a=!0;else if(/^a(lt)?$/i.test(f))r=!0;else if(/^(c|ctrl|control)$/i.test(f))o=!0;else if(/^s(hift)?$/i.test(f))s=!0;else if(/^mod$/i.test(f))e=="mac"?a=!0:o=!0;else throw new Error("Unrecognized modifier name: "+f)}return r&&(i="Alt-"+i),o&&(i="Ctrl-"+i),a&&(i="Meta-"+i),s&&(i="Shift-"+i),i}function mw(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const Zxe=KC.default(pi.domEventHandlers({keydown(n,e){return cne(une(e.state),n,e,"editor")}})),sU=yi.define({enables:Zxe}),uG=new WeakMap;function une(n){let e=n.facet(sU),t=uG.get(e);return t||uG.set(e,t=e2e(e.reduce((i,r)=>i.concat(r),[]))),t}function Xxe(n,e,t){return cne(une(n.state),e,n,t)}let ev=null;const Jxe=4e3;function e2e(n,e=$xe){let t=Object.create(null),i=Object.create(null),r=(s,a)=>{let c=i[s];if(c==null)i[s]=a;else if(c!=a)throw new Error("Key binding "+s+" is used both as a regular binding and as a multi-stroke prefix")},o=(s,a,c,f,y)=>{var _,E;let I=t[s]||(t[s]=Object.create(null)),P=a.split(/ (?!$)/).map(Q=>Hxe(Q,e));for(let Q=1;Q<P.length;Q++){let V=P.slice(0,Q).join(" ");r(V,!0),I[V]||(I[V]={preventDefault:!0,stopPropagation:!1,run:[$=>{let Z=ev={view:$,prefix:V,scope:s};return setTimeout(()=>{ev==Z&&(ev=null)},Jxe),!0}]})}let K=P.join(" ");r(K,!1);let z=I[K]||(I[K]={preventDefault:!1,stopPropagation:!1,run:((E=(_=I._any)===null||_===void 0?void 0:_.run)===null||E===void 0?void 0:E.slice())||[]});c&&z.run.push(c),f&&(z.preventDefault=!0),y&&(z.stopPropagation=!0)};for(let s of n){let a=s.scope?s.scope.split(" "):["editor"];if(s.any)for(let f of a){let y=t[f]||(t[f]=Object.create(null));y._any||(y._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:_}=s;for(let E in y)y[E].run.push(I=>_(I,sR))}let c=s[e]||s.key;if(c)for(let f of a)o(f,c,s.run,s.preventDefault,s.stopPropagation),s.shift&&o(f,"Shift-"+c,s.shift,s.preventDefault,s.stopPropagation)}return t}let sR=null;function cne(n,e,t,i){sR=e;let r=__e(e),o=cd(r,0),s=Vg(o)==r.length&&r!=" ",a="",c=!1,f=!1,y=!1;ev&&ev.view==t&&ev.scope==i&&(a=ev.prefix+" ",Xte.indexOf(e.keyCode)<0&&(f=!0,ev=null));let _=new Set,E=z=>{if(z){for(let Q of z.run)if(!_.has(Q)&&(_.add(Q),Q(t)))return z.stopPropagation&&(y=!0),!0;z.preventDefault&&(z.stopPropagation&&(y=!0),f=!0)}return!1},I=n[i],P,K;return I&&(E(I[a+mw(r,e,!s)])?c=!0:s&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Ai.windows&&e.ctrlKey&&e.altKey)&&!(Ai.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(P=wv[e.keyCode])&&P!=r?(E(I[a+mw(P,e,!0)])||e.shiftKey&&(K=iM[e.keyCode])!=r&&K!=P&&E(I[a+mw(K,e,!1)]))&&(c=!0):s&&e.shiftKey&&E(I[a+mw(r,e,!0)])&&(c=!0),!c&&E(I._any)&&(c=!0)),f&&(c=!0),c&&y&&e.stopPropagation(),sR=null,c}class h5{constructor(e,t,i,r,o){this.className=e,this.left=t,this.top=i,this.width=r,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let o=Ane(e);return[new h5(t,r.left-o.left,r.top-o.top,null,r.bottom-r.top)]}else return t2e(e,t,i)}}function Ane(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==Na.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function cG(n,e,t,i){let r=n.coordsAtPos(e,t*2);if(!r)return i;let o=n.dom.getBoundingClientRect(),s=(r.top+r.bottom)/2,a=n.posAtCoords({x:o.left+1,y:s}),c=n.posAtCoords({x:o.right-1,y:s});return a==null||c==null?i:{from:Math.max(i.from,Math.min(a,c)),to:Math.min(i.to,Math.max(a,c))}}function t2e(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let i=Math.max(t.from,n.viewport.from),r=Math.min(t.to,n.viewport.to),o=n.textDirection==Na.LTR,s=n.contentDOM,a=s.getBoundingClientRect(),c=Ane(n),f=s.querySelector(".cm-line"),y=f&&window.getComputedStyle(f),_=a.left+(y?parseInt(y.paddingLeft)+Math.min(0,parseInt(y.textIndent)):0),E=a.right-(y?parseInt(y.paddingRight):0),I=tR(n,i,1),P=tR(n,r,-1),K=I.type==Mh.Text?I:null,z=P.type==Mh.Text?P:null;if(K&&(n.lineWrapping||I.widgetLineBreaks)&&(K=cG(n,i,1,K)),z&&(n.lineWrapping||P.widgetLineBreaks)&&(z=cG(n,r,-1,z)),K&&z&&K.from==z.from&&K.to==z.to)return V($(t.from,t.to,K));{let ee=K?$(t.from,null,K):Z(I,!1),X=z?$(null,t.to,z):Z(P,!0),W=[];return(K||I).to<(z||P).from-(K&&z?1:0)||I.widgetLineBreaks>1&&ee.bottom+n.defaultLineHeight/2<X.top?W.push(Q(_,ee.bottom,E,X.top)):ee.bottom<X.top&&n.elementAtHeight((ee.bottom+X.top)/2).type==Mh.Text&&(ee.bottom=X.top=(ee.bottom+X.top)/2),V(ee).concat(W).concat(V(X))}function Q(ee,X,W,se){return new h5(e,ee-c.left,X-c.top,W-ee,se-X)}function V({top:ee,bottom:X,horizontal:W}){let se=[];for(let ue=0;ue<W.length;ue+=2)se.push(Q(W[ue],ee,W[ue+1],X));return se}function $(ee,X,W){let se=1e9,ue=-1e9,ve=[];function ye(Be,Fe,Se,qe,ut){let ht=n.coordsAtPos(Be,Be==W.to?-2:2),De=n.coordsAtPos(Se,Se==W.from?2:-2);!ht||!De||(se=Math.min(ht.top,De.top,se),ue=Math.max(ht.bottom,De.bottom,ue),ut==Na.LTR?ve.push(o&&Fe?_:ht.left,o&&qe?E:De.right):ve.push(!o&&qe?_:De.left,!o&&Fe?E:ht.right))}let Ee=ee??W.from,_e=X??W.to;for(let Be of n.visibleRanges)if(Be.to>Ee&&Be.from<_e)for(let Fe=Math.max(Be.from,Ee),Se=Math.min(Be.to,_e);;){let qe=n.state.doc.lineAt(Fe);for(let ut of n.bidiSpans(qe)){let ht=ut.from+qe.from,De=ut.to+qe.from;if(ht>=Se)break;De>Fe&&ye(Math.max(ht,Fe),ee==null&&ht<=Ee,Math.min(De,Se),X==null&&De>=_e,ut.dir)}if(Fe=qe.to+1,Fe>=Se)break}return ve.length==0&&ye(Ee,ee==null,_e,X==null,n.textDirection),{top:se,bottom:ue,horizontal:ve}}function Z(ee,X){let W=a.top+(X?ee.top:ee.bottom);return{top:W,bottom:W,horizontal:[]}}}function n2e(n,e){return n.constructor==e.constructor&&n.eq(e)}class i2e{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(dS)!=e.state.facet(dS)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(dS);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!n2e(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[i].constructor&&r.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(r.draw(),t);for(;t;){let r=t.nextSibling;t.remove(),t=r}this.drawn=e,Ai.safari&&Ai.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const dS=yi.define();function hne(n){return[Hl.define(e=>new i2e(e,n)),dS.of(n)]}const aM=yi.define({combine(n){return Qm(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function r2e(n={}){return[aM.of(n),o2e,s2e,a2e,Kte.of(!0)]}function dne(n){return n.startState.facet(aM)!=n.state.facet(aM)}const o2e=hne({above:!0,markers(n){let{state:e}=n,t=e.facet(aM),i=[];for(let r of e.selection.ranges){let o=r==e.selection.main;if(r.empty||t.drawRangeCursor){let s=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:Mn.cursor(r.head,r.head>r.anchor?-1:1);for(let c of h5.forRange(n,s,a))i.push(c)}}return i},update(n,e){n.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=dne(n);return t&&AG(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){AG(e.state,n)},class:"cm-cursorLayer"});function AG(n,e){e.style.animationDuration=n.facet(aM).cursorBlinkRate+"ms"}const s2e=hne({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:h5.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||dne(n)},class:"cm-selectionLayer"}),a2e=KC.highest(pi.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),fne=jr.define({map(n,e){return n==null?null:e.mapPos(n)}}),G3=Hu.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,i)=>i.is(fne)?i.value:t,n)}}),l2e=Hl.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(G3);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(G3)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(G3),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let i=n.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-i.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(G3)!=n&&this.view.dispatch({effects:fne.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function u2e(){return[G3,l2e]}function hG(n,e,t,i,r){e.lastIndex=0;for(let o=n.iterRange(t,i),s=t,a;!o.next().done;s+=o.value.length)if(!o.lineBreak)for(;a=e.exec(o.value);)r(s+a.index,a)}function c2e(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let i=[];for(let{from:r,to:o}of t)r=Math.max(n.state.doc.lineAt(r).from,r-e),o=Math.min(n.state.doc.lineAt(o).to,o+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=o:i.push({from:r,to:o});return i}class A2e{constructor(e){const{regexp:t,decoration:i,decorate:r,boundary:o,maxLength:s=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(a,c,f,y)=>r(y,f,f+a[0].length,a,c);else if(typeof i=="function")this.addMatch=(a,c,f,y)=>{let _=i(a,c,f);_&&y(f,f+a[0].length,_)};else if(i)this.addMatch=(a,c,f,y)=>y(f,f+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=s}createDeco(e){let t=new K1,i=t.add.bind(t);for(let{from:r,to:o}of c2e(e,this.maxLength))hG(e.state.doc,this.regexp,r,o,(s,a)=>this.addMatch(a,e,s,i));return t.finish()}updateDeco(e,t){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((o,s,a,c)=>{c>=e.view.viewport.from&&a<=e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(c,r))}),e.viewportMoved||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),i,r):t}updateRange(e,t,i,r){for(let o of e.visibleRanges){let s=Math.max(o.from,i),a=Math.min(o.to,r);if(a>=s){let c=e.state.doc.lineAt(s),f=c.to<a?e.state.doc.lineAt(a):c,y=Math.max(o.from,c.from),_=Math.min(o.to,f.to);if(this.boundary){for(;s>c.from;s--)if(this.boundary.test(c.text[s-1-c.from])){y=s;break}for(;a<f.to;a++)if(this.boundary.test(f.text[a-f.from])){_=a;break}}let E=[],I,P=(K,z,Q)=>E.push(Q.range(K,z));if(c==f)for(this.regexp.lastIndex=y-c.from;(I=this.regexp.exec(c.text))&&I.index<_-c.from;)this.addMatch(I,e,I.index+c.from,P);else hG(e.state.doc,this.regexp,y,_,(K,z)=>this.addMatch(z,e,K,P));t=t.update({filterFrom:y,filterTo:_,filter:(K,z)=>K<y||z>_,add:E})}}return t}}const aR=/x/.unicode!=null?"gu":"g",h2e=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,aR),d2e={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let P8=null;function f2e(){var n;if(P8==null&&typeof document<"u"&&document.body){let e=document.body.style;P8=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return P8||!1}const fS=yi.define({combine(n){let e=Qm(n,{render:null,specialChars:h2e,addSpecialChars:null});return(e.replaceTabs=!f2e())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,aR)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,aR)),e}});function p2e(n={}){return[fS.of(n),m2e()]}let dG=null;function m2e(){return dG||(dG=Hl.fromClass(class{constructor(n){this.view=n,this.decorations=ur.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(fS)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new A2e({regexp:n.specialChars,decoration:(e,t,i)=>{let{doc:r}=t.state,o=cd(e[0],0);if(o==9){let s=r.lineAt(i),a=t.state.tabSize,c=D2(s.text,a,i-s.from);return ur.replace({widget:new b2e((a-c%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=ur.replace({widget:new v2e(n,o)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(fS);n.startState.facet(fS)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const g2e="";function y2e(n){return n>=32?g2e:n==10?"":String.fromCharCode(9216+n)}class v2e extends kv{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=y2e(this.code),i=e.state.phrase("Control character")+" "+(d2e[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,t);if(r)return r;let o=document.createElement("span");return o.textContent=t,o.title=i,o.setAttribute("aria-label",i),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class b2e extends kv{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function C2e(){return x2e}const _2e=ur.line({class:"cm-activeLine"}),x2e=Hl.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let i of n.state.selection.ranges){let r=n.lineBlockAt(i.head);r.from>e&&(t.push(_2e.range(r.from)),e=r.from)}return ur.set(t)}},{decorations:n=>n.decorations}),lR=2e3;function M2e(n,e,t){let i=Math.min(e.line,t.line),r=Math.max(e.line,t.line),o=[];if(e.off>lR||t.off>lR||e.col<0||t.col<0){let s=Math.min(e.off,t.off),a=Math.max(e.off,t.off);for(let c=i;c<=r;c++){let f=n.doc.line(c);f.length<=a&&o.push(Mn.range(f.from+s,f.to+a))}}else{let s=Math.min(e.col,t.col),a=Math.max(e.col,t.col);for(let c=i;c<=r;c++){let f=n.doc.line(c),y=FD(f.text,s,n.tabSize,!0);if(y<0)o.push(Mn.cursor(f.to));else{let _=FD(f.text,a,n.tabSize);o.push(Mn.range(f.from+y,f.from+_))}}}return o}function w2e(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function fG(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),i=n.state.doc.lineAt(t),r=t-i.from,o=r>lR?-1:r==i.length?w2e(n,e.clientX):D2(i.text,n.state.tabSize,t-i.from);return{line:i.number,col:o,off:r}}function S2e(n,e){let t=fG(n,e),i=n.state.selection;return t?{update(r){if(r.docChanged){let o=r.changes.mapPos(r.startState.doc.line(t.line).from),s=r.state.doc.lineAt(o);t={line:s.number,col:t.col,off:Math.min(t.off,s.length)},i=i.map(r.changes)}},get(r,o,s){let a=fG(n,r);if(!a)return i;let c=M2e(n.state,t,a);return c.length?s?Mn.create(c.concat(i.ranges)):Mn.create(c):i}}:null}function E2e(n){let e=(t=>t.altKey&&t.button==0);return pi.mouseSelectionStyle.of((t,i)=>e(i)?S2e(t,i):null)}const B2e={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},O2e={style:"cursor: crosshair"};function I2e(n={}){let[e,t]=B2e[n.key||"Alt"],i=Hl.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventObservers:{keydown(r){this.set(r.keyCode==e||t(r))},keyup(r){(r.keyCode==e||!t(r))&&this.set(!1)},mousemove(r){this.set(t(r))}}});return[i,pi.contentAttributes.of(r=>{var o;return!((o=r.plugin(i))===null||o===void 0)&&o.isDown?O2e:null})]}const gw="-10000px";class pne{constructor(e,t,i,r){this.facet=t,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(s=>s);let o=null;this.tooltipViews=this.tooltips.map(s=>o=i(s,o))}update(e,t){var i;let r=e.state.facet(this.facet),o=r.filter(c=>c);if(r===this.input){for(let c of this.tooltipViews)c.update&&c.update(e);return!1}let s=[],a=t?[]:null;for(let c=0;c<o.length;c++){let f=o[c],y=-1;if(f){for(let _=0;_<this.tooltips.length;_++){let E=this.tooltips[_];E&&E.create==f.create&&(y=_)}if(y<0)s[c]=this.createTooltipView(f,c?s[c-1]:null),a&&(a[c]=!!f.above);else{let _=s[c]=this.tooltipViews[y];a&&(a[c]=t[y]),_.update&&_.update(e)}}}for(let c of this.tooltipViews)s.indexOf(c)<0&&(this.removeTooltipView(c),(i=c.destroy)===null||i===void 0||i.call(c));return t&&(a.forEach((c,f)=>t[f]=c),t.length=a.length),this.input=r,this.tooltips=o,this.tooltipViews=s,!0}}function T2e(n){let e=n.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const L8=yi.define({combine:n=>{var e,t,i;return{position:Ai.ios?"absolute":((e=n.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(r=>r.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=n.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||T2e}}}),pG=new WeakMap,aU=Hl.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(L8);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new pne(n,cB,(t,i)=>this.createTooltip(t,i),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,i=n.state.facet(L8);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),i=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",t.dom.appendChild(r)}return t.dom.style.position=this.position,t.dom.style.top=gw,t.dom.style.left="0px",this.container.insertBefore(t.dom,i),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(n=i.destroy)===null||n===void 0||n.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:o}=this.manager.tooltipViews[0];if(Ai.safari){let s=o.getBoundingClientRect();t=Math.abs(s.top+1e4)>1||Math.abs(s.left)>1}else t=!!o.offsetParent&&o.offsetParent!=this.container.ownerDocument.body}if(t||this.position=="absolute")if(this.parent){let o=this.parent.getBoundingClientRect();o.width&&o.height&&(n=o.width/this.parent.offsetWidth,e=o.height/this.parent.offsetHeight)}else({scaleX:n,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=nU(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((o,s)=>{let a=this.manager.tooltipViews[s];return a.getCoords?a.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(L8).tooltipSpace(this.view),scaleX:n,scaleY:e,makeAbsolute:t}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:t,space:i,scaleX:r,scaleY:o}=n,s=[];for(let a=0;a<this.manager.tooltips.length;a++){let c=this.manager.tooltips[a],f=this.manager.tooltipViews[a],{dom:y}=f,_=n.pos[a],E=n.size[a];if(!_||c.clip!==!1&&(_.bottom<=Math.max(t.top,i.top)||_.top>=Math.min(t.bottom,i.bottom)||_.right<Math.max(t.left,i.left)-.1||_.left>Math.min(t.right,i.right)+.1)){y.style.top=gw;continue}let I=c.arrow?f.dom.querySelector(".cm-tooltip-arrow"):null,P=I?7:0,K=E.right-E.left,z=(e=pG.get(f))!==null&&e!==void 0?e:E.bottom-E.top,Q=f.offset||D2e,V=this.view.textDirection==Na.LTR,$=E.width>i.right-i.left?V?i.left:i.right-E.width:V?Math.max(i.left,Math.min(_.left-(I?14:0)+Q.x,i.right-K)):Math.min(Math.max(i.left,_.left-K+(I?14:0)-Q.x),i.right-K),Z=this.above[a];!c.strictSide&&(Z?_.top-z-P-Q.y<i.top:_.bottom+z+P+Q.y>i.bottom)&&Z==i.bottom-_.bottom>_.top-i.top&&(Z=this.above[a]=!Z);let ee=(Z?_.top-i.top:i.bottom-_.bottom)-P;if(ee<z&&f.resize!==!1){if(ee<this.view.defaultLineHeight){y.style.top=gw;continue}pG.set(f,z),y.style.height=(z=ee)/o+"px"}else y.style.height&&(y.style.height="");let X=Z?_.top-z-P-Q.y:_.bottom+P+Q.y,W=$+K;if(f.overlap!==!0)for(let se of s)se.left<W&&se.right>$&&se.top<X+z&&se.bottom>X&&(X=Z?se.top-z-2-P:se.bottom+P+2);if(this.position=="absolute"?(y.style.top=(X-n.parent.top)/o+"px",mG(y,($-n.parent.left)/r)):(y.style.top=X/o+"px",mG(y,$/r)),I){let se=_.left+(V?Q.x:-Q.x)-($+14-7);I.style.left=se/r+"px"}f.overlap!==!0&&s.push({left:$,top:X,right:W,bottom:X+z}),y.classList.toggle("cm-tooltip-above",Z),y.classList.toggle("cm-tooltip-below",!Z),f.positioned&&f.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=gw}},{eventObservers:{scroll(){this.maybeMeasure()}}});function mG(n,e){let t=parseInt(n.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(n.style.left=e+"px")}const k2e=pi.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),D2e={x:0,y:0},cB=yi.define({enables:[aU,k2e]}),xE=yi.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class AB{static create(e){return new AB(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new pne(e,xE,(t,i)=>this.createHostedView(t,i),t=>t.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(t===void 0)t=r;else if(t!==r)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const R2e=cB.compute([xE],n=>{let e=n.facet(xE);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var i;return(i=t.end)!==null&&i!==void 0?i:t.pos})),create:AB.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class P2e{constructor(e,t,i,r,o){this.view=e,this.source=t,this.field=i,this.setHover=r,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.nearest(t.target);if(!i)return;let r,o=1;if(i instanceof S1)r=i.posAtStart;else{if(r=e.posAtCoords(t),r==null)return;let a=e.coordsAtPos(r);if(!a||t.y<a.top||t.y>a.bottom||t.x<a.left-e.defaultCharacterWidth||t.x>a.right+e.defaultCharacterWidth)return;let c=e.bidiSpans(e.state.doc.lineAt(r)).find(y=>y.from<=r&&y.to>=r),f=c&&c.dir==Na.RTL?-1:1;o=t.x<a.left?-f:f}let s=this.source(e,r,o);if(s?.then){let a=this.pending={pos:r};s.then(c=>{this.pending==a&&(this.pending=null,c&&!(Array.isArray(c)&&!c.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(c)?c:[c])}))},c=>xh(e.state,c,"hover tooltip"))}else s&&!(Array.isArray(s)&&!s.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(s)?s:[s])})}get tooltip(){let e=this.view.plugin(aU),t=e?e.manager.tooltips.findIndex(i=>i.create==AB.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:o}=this;if(r.length&&o&&!L2e(o.dom,e)||this.pending){let{pos:s}=r[0]||this.pending,a=(i=(t=r[0])===null||t===void 0?void 0:t.end)!==null&&i!==void 0?i:s;(s==a?this.view.posAtCoords(this.lastMove)!=s:!U2e(this.view,s,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const yw=4;function L2e(n,e){let{left:t,right:i,top:r,bottom:o}=n.getBoundingClientRect(),s;if(s=n.querySelector(".cm-tooltip-arrow")){let a=s.getBoundingClientRect();r=Math.min(a.top,r),o=Math.max(a.bottom,o)}return e.clientX>=t-yw&&e.clientX<=i+yw&&e.clientY>=r-yw&&e.clientY<=o+yw}function U2e(n,e,t,i,r,o){let s=n.scrollDOM.getBoundingClientRect(),a=n.documentTop+n.documentPadding.top+n.contentHeight;if(s.left>i||s.right<i||s.top>r||Math.min(s.bottom,a)<r)return!1;let c=n.posAtCoords({x:i,y:r},!1);return c>=e&&c<=t}function K2e(n,e={}){let t=jr.define(),i=Hu.define({create(){return[]},update(r,o){if(r.length&&(e.hideOnChange&&(o.docChanged||o.selection)?r=[]:e.hideOn&&(r=r.filter(s=>!e.hideOn(o,s))),o.docChanged)){let s=[];for(let a of r){let c=o.changes.mapPos(a.pos,-1,Ch.TrackDel);if(c!=null){let f=Object.assign(Object.create(null),a);f.pos=c,f.end!=null&&(f.end=o.changes.mapPos(f.end)),s.push(f)}}r=s}for(let s of o.effects)s.is(t)&&(r=s.value),s.is(F2e)&&(r=[]);return r},provide:r=>xE.from(r)});return{active:i,extension:[i,Hl.define(r=>new P2e(r,n,i,t,e.hoverTime||300)),R2e]}}function mne(n,e){let t=n.plugin(aU);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const F2e=jr.define(),gG=yi.define({combine(n){let e,t;for(let i of n)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function lM(n,e){let t=n.plugin(gne),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const gne=Hl.fromClass(class{constructor(n){this.input=n.state.facet(uM),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(gG);this.top=new vw(n,!0,e.topContainer),this.bottom=new vw(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(gG);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new vw(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new vw(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(uM);if(t!=this.input){let i=t.filter(c=>c),r=[],o=[],s=[],a=[];for(let c of i){let f=this.specs.indexOf(c),y;f<0?(y=c(n.view),a.push(y)):(y=this.panels[f],y.update&&y.update(n)),r.push(y),(y.top?o:s).push(y)}this.specs=i,this.panels=r,this.top.sync(o),this.bottom.sync(s);for(let c of a)c.dom.classList.add("cm-panel"),c.mount&&c.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>pi.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class vw{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=yG(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=yG(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function yG(n){let e=n.nextSibling;return n.remove(),e}const uM=yi.define({enables:gne});class g0 extends MC{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}g0.prototype.elementClass="";g0.prototype.toDOM=void 0;g0.prototype.mapMode=Ch.TrackBefore;g0.prototype.startSide=g0.prototype.endSide=-1;g0.prototype.point=!0;const pS=yi.define(),z2e=yi.define(),j2e={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Po.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},d4=yi.define();function yne(n){return[vne(),d4.of({...j2e,...n})]}const vG=yi.define({combine:n=>n.some(e=>e)});function vne(n){return[N2e]}const N2e=Hl.fromClass(class{constructor(n){this.view=n,this.domAfter=null,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(d4).map(e=>new CG(n,e)),this.fixed=!n.state.facet(vG);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}if(n.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(vG)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=Po.iter(this.view.state.facet(pS),this.view.viewport.from),i=[],r=this.gutters.map(o=>new G2e(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(o.type)){let s=!0;for(let a of o.type)if(a.type==Mh.Text&&s){uR(t,i,a.from);for(let c of r)c.line(this.view,a,i);s=!1}else if(a.widget)for(let c of r)c.widget(this.view,a)}else if(o.type==Mh.Text){uR(t,i,o.from);for(let s of r)s.line(this.view,o,i)}else if(o.widget)for(let s of r)s.widget(this.view,o);for(let o of r)o.finish();n&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(n){let e=n.startState.facet(d4),t=n.state.facet(d4),i=n.docChanged||n.heightChanged||n.viewportChanged||!Po.eq(n.startState.facet(pS),n.state.facet(pS),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let r of this.gutters)r.update(n)&&(i=!0);else{i=!0;let r=[];for(let o of t){let s=e.indexOf(o);s<0?r.push(new CG(this.view,o)):(this.gutters[s].update(n),r.push(this.gutters[s]))}for(let o of this.gutters)o.dom.remove(),r.indexOf(o)<0&&o.destroy();for(let o of r)o.config.side=="after"?this.getDOMAfter().appendChild(o.dom):this.dom.appendChild(o.dom);this.gutters=r}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:n=>pi.scrollMargins.of(e=>{let t=e.plugin(n);if(!t||t.gutters.length==0||!t.fixed)return null;let i=t.dom.offsetWidth*e.scaleX,r=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Na.LTR?{left:i,right:r}:{right:i,left:r}})});function bG(n){return Array.isArray(n)?n:[n]}function uR(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class G2e{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=Po.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:r}=this,o=(t.top-this.height)/e.scaleY,s=t.height/e.scaleY;if(this.i==r.elements.length){let a=new bne(e,s,o,i);r.elements.push(a),r.dom.appendChild(a.dom)}else r.elements[this.i].update(e,s,o,i);this.height=t.bottom,this.i++}line(e,t,i){let r=[];uR(this.cursor,r,t.from),i.length&&(r=r.concat(i));let o=this.gutter.config.lineMarker(e,t,r);o&&r.unshift(o);let s=this.gutter;r.length==0&&!s.config.renderEmptyElements||this.addElement(e,t,r)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),r=i?[i]:null;for(let o of e.state.facet(z2e)){let s=o(e,t.widget,t);s&&(r||(r=[])).push(s)}r&&this.addElement(e,t,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class CG{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,r=>{let o=r.target,s;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let c=o.getBoundingClientRect();s=(c.top+c.bottom)/2}else s=r.clientY;let a=e.lineBlockAtHeight(s-e.documentTop);t.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=bG(t.markers(e)),t.initialSpacer&&(this.spacer=new bne(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=bG(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!Po.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class bne{constructor(e,t,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,r)}update(e,t,i,r){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),W2e(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let i="cm-gutterElement",r=this.dom.firstChild;for(let o=0,s=0;;){let a=s,c=o<t.length?t[o++]:null,f=!1;if(c){let y=c.elementClass;y&&(i+=" "+y);for(let _=s;_<this.markers.length;_++)if(this.markers[_].compare(c)){a=_,f=!0;break}}else a=this.markers.length;for(;s<a;){let y=this.markers[s++];if(y.toDOM){y.destroy(r);let _=r.nextSibling;r.remove(),r=_}}if(!c)break;c.toDOM&&(f?r=r.nextSibling:this.dom.insertBefore(c.toDOM(e),r)),f&&s++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function W2e(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const Q2e=yi.define(),q2e=yi.define(),xx=yi.define({combine(n){return Qm(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let r in t){let o=i[r],s=t[r];i[r]=o?(a,c,f)=>o(a,c,f)||s(a,c,f):s}return i}})}});class U8 extends g0{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function K8(n,e){return n.state.facet(xx).formatNumber(e,n.state)}const Y2e=d4.compute([xx],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(Q2e)},lineMarker(e,t,i){return i.some(r=>r.toDOM)?null:new U8(K8(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,i)=>{for(let r of e.state.facet(q2e)){let o=r(e,t,i);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(xx)!=e.state.facet(xx),initialSpacer(e){return new U8(K8(e,_G(e.state.doc.lines)))},updateSpacer(e,t){let i=K8(t.view,_G(t.view.state.doc.lines));return i==e.number?e:new U8(i)},domEventHandlers:n.facet(xx).domEventHandlers,side:"before"}));function V2e(n={}){return[xx.of(n),vne(),Y2e]}function _G(n){let e=9;for(;e<n;)e=e*10+9;return e}const $2e=new class extends g0{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},H2e=pS.compute(["selection"],n=>{let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.head).from;r>t&&(t=r,e.push($2e.range(r)))}return Po.of(e)});function Z2e(){return H2e}const Cne=1024;let X2e=0;class F8{constructor(e,t){this.from=e,this.to=t}}class ho{constructor(e={}){this.id=X2e++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=gd.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}ho.closedBy=new ho({deserialize:n=>n.split(" ")});ho.openedBy=new ho({deserialize:n=>n.split(" ")});ho.group=new ho({deserialize:n=>n.split(" ")});ho.isolate=new ho({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});ho.contextHash=new ho({perNode:!0});ho.lookAhead=new ho({perNode:!0});ho.mounted=new ho({perNode:!0});class ME{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[ho.mounted.id]}}const J2e=Object.create(null);class gd{constructor(e,t,i,r=0){this.name=e,this.props=t,this.id=i,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):J2e,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new gd(e.name||"",t,e.id,i);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(r)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[o[0].id]=o[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(ho.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let r of i.split(" "))t[r]=e[i];return i=>{for(let r=i.prop(ho.group),o=-1;o<(r?r.length:0);o++){let s=t[o<0?i.name:r[o]];if(s)return s}}}}gd.none=new gd("",Object.create(null),0,8);class lU{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let r=null;for(let o of e){let s=o(i);if(s){r||(r=Object.assign({},i.props));let a=s[1],c=s[0];c.combine&&c.id in r&&(a=c.combine(r[c.id],a)),r[c.id]=a}}t.push(r?new gd(i.name,r,i.id,i.flags):i)}return new lU(t)}}const bw=new WeakMap,xG=new WeakMap;var wc;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(wc||(wc={}));class wu{constructor(e,t,i,r,o){if(this.type=e,this.children=t,this.positions=i,this.length=r,this.props=null,o&&o.length){this.props=Object.create(null);for(let[s,a]of o)this.props[typeof s=="number"?s:s.id]=a}}toString(){let e=ME.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let r=i.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new AR(this.topNode,e)}cursorAt(e,t=0,i=0){let r=bw.get(this)||this.topNode,o=new AR(r);return o.moveTo(e,t),bw.set(this,o._tree),o}get topNode(){return new _p(this,0,0,null)}resolve(e,t=0){let i=cM(bw.get(this)||this.topNode,e,t,!1);return bw.set(this,i),i}resolveInner(e,t=0){let i=cM(xG.get(this)||this.topNode,e,t,!0);return xG.set(this,i),i}resolveStack(e,t=0){return n3e(this,e,t)}iterate(e){let{enter:t,leave:i,from:r=0,to:o=this.length}=e,s=e.mode||0,a=(s&wc.IncludeAnonymous)>0;for(let c=this.cursor(s|wc.IncludeAnonymous);;){let f=!1;if(c.from<=o&&c.to>=r&&(!a&&c.type.isAnonymous||t(c)!==!1)){if(c.firstChild())continue;f=!0}for(;f&&i&&(a||!c.type.isAnonymous)&&i(c),!c.nextSibling();){if(!c.parent())return;f=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:AU(gd.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,r)=>new wu(this.type,t,i,r,this.propValues),e.makeTree||((t,i,r)=>new wu(gd.none,t,i,r)))}static build(e){return i3e(e)}}wu.empty=new wu(gd.none,[],[],0);class uU{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new uU(this.buffer,this.index)}}class Ev{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return gd.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],r=this.set.types[t],o=r.name;if(/\W/.test(o)&&!r.isError&&(o=JSON.stringify(o)),e+=4,i==e)return o;let s=[];for(;e<i;)s.push(this.childString(e)),e=this.buffer[e+3];return o+"("+s.join(",")+")"}findChild(e,t,i,r,o){let{buffer:s}=this,a=-1;for(let c=e;c!=t&&!(_ne(o,r,s[c+1],s[c+2])&&(a=c,i>0));c=s[c+3]);return a}slice(e,t,i){let r=this.buffer,o=new Uint16Array(t-e),s=0;for(let a=e,c=0;a<t;){o[c++]=r[a++],o[c++]=r[a++]-i;let f=o[c++]=r[a++]-i;o[c++]=r[a++]-e,s=Math.max(s,f)}return new Ev(o,s,this.set)}}function _ne(n,e,t,i){switch(n){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function cM(n,e,t,i){for(var r;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let s=!i&&n instanceof _p&&n.index<0?null:n.parent;if(!s)return n;n=s}let o=i?0:wc.IgnoreOverlays;if(i)for(let s=n,a=s.parent;a;s=a,a=s.parent)s instanceof _p&&s.index<0&&((r=a.enter(e,t,o))===null||r===void 0?void 0:r.from)!=s.from&&(n=a);for(;;){let s=n.enter(e,t,o);if(!s)return n;n=s}}class xne{cursor(e=0){return new AR(this,e)}getChild(e,t=null,i=null){let r=MG(this,e,t,i);return r.length?r[0]:null}getChildren(e,t=null,i=null){return MG(this,e,t,i)}resolve(e,t=0){return cM(this,e,t,!1)}resolveInner(e,t=0){return cM(this,e,t,!0)}matchContext(e){return cR(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(i=t,t=r.prevSibling):t=r}return i}get node(){return this}get next(){return this.parent}}class _p extends xne{constructor(e,t,i,r){super(),this._tree=e,this.from=t,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,r,o=0){for(let s=this;;){for(let{children:a,positions:c}=s._tree,f=t>0?a.length:-1;e!=f;e+=t){let y=a[e],_=c[e]+s.from;if(_ne(r,i,_,_+y.length)){if(y instanceof Ev){if(o&wc.ExcludeBuffers)continue;let E=y.findChild(0,y.buffer.length,t,i-_,r);if(E>-1)return new dv(new e3e(s,y,e,_),null,E)}else if(o&wc.IncludeAnonymous||!y.type.isAnonymous||cU(y)){let E;if(!(o&wc.IgnoreMounts)&&(E=ME.get(y))&&!E.overlay)return new _p(E.tree,_,e,s);let I=new _p(y,_,e,s);return o&wc.IncludeAnonymous||!I.type.isAnonymous?I:I.nextChild(t<0?y.children.length-1:0,t,i,r)}}}if(o&wc.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?e=s.index+t:e=t<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let r;if(!(i&wc.IgnoreOverlays)&&(r=ME.get(this._tree))&&r.overlay){let o=e-this.from;for(let{from:s,to:a}of r.overlay)if((t>0?s<=o:s<o)&&(t<0?a>=o:a>o))return new _p(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function MG(n,e,t,i){let r=n.cursor(),o=[];if(!r.firstChild())return o;if(t!=null){for(let s=!1;!s;)if(s=r.type.is(t),!r.nextSibling())return o}for(;;){if(i!=null&&r.type.is(i))return o;if(r.type.is(e)&&o.push(r.node),!r.nextSibling())return i==null?o:[]}}function cR(n,e,t=e.length-1){for(let i=n;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class e3e{constructor(e,t,i,r){this.parent=e,this.buffer=t,this.index=i,this.start=r}}class dv extends xne{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,i);return o<0?null:new dv(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&wc.ExcludeBuffers)return null;let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new dv(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new dv(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new dv(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,r=this.index+4,o=i.buffer[this.index+3];if(o>r){let s=i.buffer[this.index+1];e.push(i.slice(r,o,s)),t.push(0)}return new wu(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Mne(n){if(!n.length)return null;let e=0,t=n[0];for(let o=1;o<n.length;o++){let s=n[o];(s.from>t.from||s.to<t.to)&&(t=s,e=o)}let i=t instanceof _p&&t.index<0?null:t.parent,r=n.slice();return i?r[e]=i:r.splice(e,1),new t3e(r,t)}class t3e{constructor(e,t){this.heads=e,this.node=t}get next(){return Mne(this.heads)}}function n3e(n,e,t){let i=n.resolveInner(e,t),r=null;for(let o=i instanceof _p?i:i.context.parent;o;o=o.parent)if(o.index<0){let s=o.parent;(r||(r=[i])).push(s.resolve(e,t)),o=s}else{let s=ME.get(o.tree);if(s&&s.overlay&&s.overlay[0].from<=e&&s.overlay[s.overlay.length-1].to>=e){let a=new _p(s.tree,s.overlay[0].from+o.from,-1,o);(r||(r=[i])).push(cM(a,e,t,!1))}}return r?Mne(r):i}class AR{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof _p)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof _p?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:r}=this.buffer,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,i);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&wc.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&wc.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&wc.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(r.buffer.buffer[o+3]<this.index)return!1;({index:t,parent:i}=r)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let o=t+e,s=e<0?-1:i._tree.children.length;o!=s;o+=e){let a=i._tree.children[o];if(this.mode&wc.IncludeAnonymous||a instanceof Ev||!a.type.isAnonymous||cU(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,o=this.stack.length;o>=0;){for(let s=e;s;s=s._parent)if(s.index==r){if(r==this.index)return s;t=s,i=o+1;break e}r=this.stack[--o]}for(let r=i;r<this.stack.length;r++)t=new dv(this.buffer,t,this.stack[r]);return this.bufferNode=new dv(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&t&&t(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return cR(this.node.parent,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let r=e.length-1,o=this.stack.length-1;r>=0;o--){if(o<0)return cR(this._tree,e,r);let s=i[t.buffer[this.stack[o]]];if(!s.isAnonymous){if(e[r]&&e[r]!=s.name)return!1;r--}}return!0}}function cU(n){return n.children.some(e=>e instanceof Ev||!e.type.isAnonymous||cU(e))}function i3e(n){var e;let{buffer:t,nodeSet:i,maxBufferLength:r=Cne,reused:o=[],minRepeatType:s=i.types.length}=n,a=Array.isArray(t)?new uU(t,t.length):t,c=i.types,f=0,y=0;function _(ee,X,W,se,ue,ve){let{id:ye,start:Ee,end:_e,size:Be}=a,Fe=y,Se=f;if(Be<0)if(a.next(),Be==-1){let Ie=o[ye];W.push(Ie),se.push(Ee-ee);return}else if(Be==-3){f=ye;return}else if(Be==-4){y=ye;return}else throw new RangeError(`Unrecognized record size: ${Be}`);let qe=c[ye],ut,ht,De=Ee-ee;if(_e-Ee<=r&&(ht=z(a.pos-X,ue))){let Ie=new Uint16Array(ht.size-ht.skip),ze=a.pos-ht.size,Te=Ie.length;for(;a.pos>ze;)Te=Q(ht.start,Ie,Te);ut=new Ev(Ie,_e-ht.start,i),De=ht.start-ee}else{let Ie=a.pos-Be;a.next();let ze=[],Te=[],vt=ye>=s?ye:-1,st=0,Et=_e;for(;a.pos>Ie;)vt>=0&&a.id==vt&&a.size>=0?(a.end<=Et-r&&(P(ze,Te,Ee,st,a.end,Et,vt,Fe,Se),st=ze.length,Et=a.end),a.next()):ve>2500?E(Ee,Ie,ze,Te):_(Ee,Ie,ze,Te,vt,ve+1);if(vt>=0&&st>0&&st<ze.length&&P(ze,Te,Ee,st,Ee,Et,vt,Fe,Se),ze.reverse(),Te.reverse(),vt>-1&&st>0){let Pt=I(qe,Se);ut=AU(qe,ze,Te,0,ze.length,0,_e-Ee,Pt,Pt)}else ut=K(qe,ze,Te,_e-Ee,Fe-_e,Se)}W.push(ut),se.push(De)}function E(ee,X,W,se){let ue=[],ve=0,ye=-1;for(;a.pos>X;){let{id:Ee,start:_e,end:Be,size:Fe}=a;if(Fe>4)a.next();else{if(ye>-1&&_e<ye)break;ye<0&&(ye=Be-r),ue.push(Ee,_e,Be),ve++,a.next()}}if(ve){let Ee=new Uint16Array(ve*4),_e=ue[ue.length-2];for(let Be=ue.length-3,Fe=0;Be>=0;Be-=3)Ee[Fe++]=ue[Be],Ee[Fe++]=ue[Be+1]-_e,Ee[Fe++]=ue[Be+2]-_e,Ee[Fe++]=Fe;W.push(new Ev(Ee,ue[2]-_e,i)),se.push(_e-ee)}}function I(ee,X){return(W,se,ue)=>{let ve=0,ye=W.length-1,Ee,_e;if(ye>=0&&(Ee=W[ye])instanceof wu){if(!ye&&Ee.type==ee&&Ee.length==ue)return Ee;(_e=Ee.prop(ho.lookAhead))&&(ve=se[ye]+Ee.length+_e)}return K(ee,W,se,ue,ve,X)}}function P(ee,X,W,se,ue,ve,ye,Ee,_e){let Be=[],Fe=[];for(;ee.length>se;)Be.push(ee.pop()),Fe.push(X.pop()+W-ue);ee.push(K(i.types[ye],Be,Fe,ve-ue,Ee-ve,_e)),X.push(ue-W)}function K(ee,X,W,se,ue,ve,ye){if(ve){let Ee=[ho.contextHash,ve];ye=ye?[Ee].concat(ye):[Ee]}if(ue>25){let Ee=[ho.lookAhead,ue];ye=ye?[Ee].concat(ye):[Ee]}return new wu(ee,X,W,se,ye)}function z(ee,X){let W=a.fork(),se=0,ue=0,ve=0,ye=W.end-r,Ee={size:0,start:0,skip:0};e:for(let _e=W.pos-ee;W.pos>_e;){let Be=W.size;if(W.id==X&&Be>=0){Ee.size=se,Ee.start=ue,Ee.skip=ve,ve+=4,se+=4,W.next();continue}let Fe=W.pos-Be;if(Be<0||Fe<_e||W.start<ye)break;let Se=W.id>=s?4:0,qe=W.start;for(W.next();W.pos>Fe;){if(W.size<0)if(W.size==-3)Se+=4;else break e;else W.id>=s&&(Se+=4);W.next()}ue=qe,se+=Be,ve+=Se}return(X<0||se==ee)&&(Ee.size=se,Ee.start=ue,Ee.skip=ve),Ee.size>4?Ee:void 0}function Q(ee,X,W){let{id:se,start:ue,end:ve,size:ye}=a;if(a.next(),ye>=0&&se<s){let Ee=W;if(ye>4){let _e=a.pos-(ye-4);for(;a.pos>_e;)W=Q(ee,X,W)}X[--W]=Ee,X[--W]=ve-ee,X[--W]=ue-ee,X[--W]=se}else ye==-3?f=se:ye==-4&&(y=se);return W}let V=[],$=[];for(;a.pos>0;)_(n.start||0,n.bufferStart||0,V,$,-1,0);let Z=(e=n.length)!==null&&e!==void 0?e:V.length?$[0]+V[0].length:0;return new wu(c[n.topID],V.reverse(),$.reverse(),Z)}const wG=new WeakMap;function mS(n,e){if(!n.isAnonymous||e instanceof Ev||e.type!=n)return 1;let t=wG.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=n||!(i instanceof wu)){t=1;break}t+=mS(n,i)}wG.set(e,t)}return t}function AU(n,e,t,i,r,o,s,a,c){let f=0;for(let P=i;P<r;P++)f+=mS(n,e[P]);let y=Math.ceil(f*1.5/8),_=[],E=[];function I(P,K,z,Q,V){for(let $=z;$<Q;){let Z=$,ee=K[$],X=mS(n,P[$]);for($++;$<Q;$++){let W=mS(n,P[$]);if(X+W>=y)break;X+=W}if($==Z+1){if(X>y){let W=P[Z];I(W.children,W.positions,0,W.children.length,K[Z]+V);continue}_.push(P[Z])}else{let W=K[$-1]+P[$-1].length-ee;_.push(AU(n,P,K,Z,$,ee,W,null,c))}E.push(ee+V-o)}}return I(e,t,i,r,0),(a||c)(_,E,s)}class AC{constructor(e,t,i,r,o=!1,s=!1){this.from=e,this.to=t,this.tree=i,this.offset=r,this.open=(o?1:0)|(s?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let r=[new AC(0,e.length,e,0,!1,i)];for(let o of t)o.to>e.length&&r.push(o);return r}static applyChanges(e,t,i=128){if(!t.length)return e;let r=[],o=1,s=e.length?e[0]:null;for(let a=0,c=0,f=0;;a++){let y=a<t.length?t[a]:null,_=y?y.fromA:1e9;if(_-c>=i)for(;s&&s.from<_;){let E=s;if(c>=E.from||_<=E.to||f){let I=Math.max(E.from,c)-f,P=Math.min(E.to,_)-f;E=I>=P?null:new AC(I,P,E.tree,E.offset+f,a>0,!!y)}if(E&&r.push(E),s.to>_)break;s=o<e.length?e[o++]:null}if(!y)break;c=y.toA,f=y.toA-y.toB}return r}}class wne{startParse(e,t,i){return typeof e=="string"&&(e=new r3e(e)),i=i?i.length?i.map(r=>new F8(r.from,r.to)):[new F8(0,0)]:[new F8(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let r=this.startParse(e,t,i);for(;;){let o=r.advance();if(o)return o}}}class r3e{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new ho({perNode:!0});let o3e=0;class cp{constructor(e,t,i,r){this.name=e,this.set=t,this.base=i,this.modified=r,this.id=o3e++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i=typeof e=="string"?e:"?";if(e instanceof cp&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let r=new cp(i,[],null,[]);if(r.set.push(r),t)for(let o of t.set)r.set.push(o);return r}static defineModifier(e){let t=new wE(e);return i=>i.modified.indexOf(t)>-1?i:wE.get(i.base||i,i.modified.concat(t).sort((r,o)=>r.id-o.id))}}let s3e=0;class wE{constructor(e){this.name=e,this.instances=[],this.id=s3e++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(a=>a.base==e&&a3e(t,a.modified));if(i)return i;let r=[],o=new cp(e.name,r,e,t);for(let a of t)a.instances.push(o);let s=l3e(t);for(let a of e.set)if(!a.modified.length)for(let c of s)r.push(wE.get(a,c));return o}}function a3e(n,e){return n.length==e.length&&n.every((t,i)=>t==e[i])}function l3e(n){let e=[[]];for(let t=0;t<n.length;t++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(n[t]));return e.sort((t,i)=>i.length-t.length)}function Sne(n){let e=Object.create(null);for(let t in n){let i=n[t];Array.isArray(i)||(i=[i]);for(let r of t.split(" "))if(r){let o=[],s=2,a=r;for(let _=0;;){if(a=="..."&&_>0&&_+3==r.length){s=1;break}let E=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!E)throw new RangeError("Invalid path: "+r);if(o.push(E[0]=="*"?"":E[0][0]=='"'?JSON.parse(E[0]):E[0]),_+=E[0].length,_==r.length)break;let I=r[_++];if(_==r.length&&I=="!"){s=0;break}if(I!="/")throw new RangeError("Invalid path: "+r);a=r.slice(_)}let c=o.length-1,f=o[c];if(!f)throw new RangeError("Invalid path: "+r);let y=new AM(i,s,c>0?o.slice(0,c):null);e[f]=y.sort(e[f])}}return Ene.add(e)}const Ene=new ho({combine(n,e){let t,i,r;for(;n||e;){if(!n||e&&n.depth>=e.depth?(r=e,e=e.next):(r=n,n=n.next),t&&t.mode==r.mode&&!r.context&&!t.context)continue;let o=new AM(r.tags,r.mode,r.context);t?t.next=o:i=o,t=o}return i}});class AM{constructor(e,t,i,r){this.tags=e,this.mode=t,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}AM.empty=new AM([],2,null);function Bne(n,e){let t=Object.create(null);for(let o of n)if(!Array.isArray(o.tag))t[o.tag.id]=o.class;else for(let s of o.tag)t[s.id]=o.class;let{scope:i,all:r=null}=e||{};return{style:o=>{let s=r;for(let a of o)for(let c of a.set){let f=t[c.id];if(f){s=s?s+" "+f:f;break}}return s},scope:i}}function u3e(n,e){let t=null;for(let i of n){let r=i.style(e);r&&(t=t?t+" "+r:r)}return t}function c3e(n,e,t,i=0,r=n.length){let o=new A3e(i,Array.isArray(e)?e:[e],t);o.highlightRange(n.cursor(),i,r,"",o.highlighters),o.flush(r)}class A3e{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,r,o){let{type:s,from:a,to:c}=e;if(a>=i||c<=t)return;s.isTop&&(o=this.highlighters.filter(I=>!I.scope||I.scope(s)));let f=r,y=h3e(e)||AM.empty,_=u3e(o,y.tags);if(_&&(f&&(f+=" "),f+=_,y.mode==1&&(r+=(r?" ":"")+_)),this.startSpan(Math.max(t,a),f),y.opaque)return;let E=e.tree&&e.tree.prop(ho.mounted);if(E&&E.overlay){let I=e.node.enter(E.overlay[0].from+a,1),P=this.highlighters.filter(z=>!z.scope||z.scope(E.tree.type)),K=e.firstChild();for(let z=0,Q=a;;z++){let V=z<E.overlay.length?E.overlay[z]:null,$=V?V.from+a:c,Z=Math.max(t,Q),ee=Math.min(i,$);if(Z<ee&&K)for(;e.from<ee&&(this.highlightRange(e,Z,ee,r,o),this.startSpan(Math.min(ee,e.to),f),!(e.to>=$||!e.nextSibling())););if(!V||$>i)break;Q=V.to+a,Q>t&&(this.highlightRange(I.cursor(),Math.max(t,V.from+a),Math.min(i,Q),"",P),this.startSpan(Math.min(i,Q),f))}K&&e.parent()}else if(e.firstChild()){E&&(r="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,r,o),this.startSpan(Math.min(i,e.to),f)}while(e.nextSibling());e.parent()}}}function h3e(n){let e=n.type.prop(Ene);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const Jn=cp.define,Cw=Jn(),Zy=Jn(),SG=Jn(Zy),EG=Jn(Zy),Xy=Jn(),_w=Jn(Xy),z8=Jn(Xy),Fg=Jn(),Lb=Jn(Fg),Ug=Jn(),Kg=Jn(),hR=Jn(),f3=Jn(hR),xw=Jn(),cn={comment:Cw,lineComment:Jn(Cw),blockComment:Jn(Cw),docComment:Jn(Cw),name:Zy,variableName:Jn(Zy),typeName:SG,tagName:Jn(SG),propertyName:EG,attributeName:Jn(EG),className:Jn(Zy),labelName:Jn(Zy),namespace:Jn(Zy),macroName:Jn(Zy),literal:Xy,string:_w,docString:Jn(_w),character:Jn(_w),attributeValue:Jn(_w),number:z8,integer:Jn(z8),float:Jn(z8),bool:Jn(Xy),regexp:Jn(Xy),escape:Jn(Xy),color:Jn(Xy),url:Jn(Xy),keyword:Ug,self:Jn(Ug),null:Jn(Ug),atom:Jn(Ug),unit:Jn(Ug),modifier:Jn(Ug),operatorKeyword:Jn(Ug),controlKeyword:Jn(Ug),definitionKeyword:Jn(Ug),moduleKeyword:Jn(Ug),operator:Kg,derefOperator:Jn(Kg),arithmeticOperator:Jn(Kg),logicOperator:Jn(Kg),bitwiseOperator:Jn(Kg),compareOperator:Jn(Kg),updateOperator:Jn(Kg),definitionOperator:Jn(Kg),typeOperator:Jn(Kg),controlOperator:Jn(Kg),punctuation:hR,separator:Jn(hR),bracket:f3,angleBracket:Jn(f3),squareBracket:Jn(f3),paren:Jn(f3),brace:Jn(f3),content:Fg,heading:Lb,heading1:Jn(Lb),heading2:Jn(Lb),heading3:Jn(Lb),heading4:Jn(Lb),heading5:Jn(Lb),heading6:Jn(Lb),contentSeparator:Jn(Fg),list:Jn(Fg),quote:Jn(Fg),emphasis:Jn(Fg),strong:Jn(Fg),link:Jn(Fg),monospace:Jn(Fg),strikethrough:Jn(Fg),inserted:Jn(),deleted:Jn(),changed:Jn(),invalid:Jn(),meta:xw,documentMeta:Jn(xw),annotation:Jn(xw),processingInstruction:Jn(xw),definition:cp.defineModifier("definition"),constant:cp.defineModifier("constant"),function:cp.defineModifier("function"),standard:cp.defineModifier("standard"),local:cp.defineModifier("local"),special:cp.defineModifier("special")};for(let n in cn){let e=cn[n];e instanceof cp&&(e.name=n)}Bne([{tag:cn.link,class:"tok-link"},{tag:cn.heading,class:"tok-heading"},{tag:cn.emphasis,class:"tok-emphasis"},{tag:cn.strong,class:"tok-strong"},{tag:cn.keyword,class:"tok-keyword"},{tag:cn.atom,class:"tok-atom"},{tag:cn.bool,class:"tok-bool"},{tag:cn.url,class:"tok-url"},{tag:cn.labelName,class:"tok-labelName"},{tag:cn.inserted,class:"tok-inserted"},{tag:cn.deleted,class:"tok-deleted"},{tag:cn.literal,class:"tok-literal"},{tag:cn.string,class:"tok-string"},{tag:cn.number,class:"tok-number"},{tag:[cn.regexp,cn.escape,cn.special(cn.string)],class:"tok-string2"},{tag:cn.variableName,class:"tok-variableName"},{tag:cn.local(cn.variableName),class:"tok-variableName tok-local"},{tag:cn.definition(cn.variableName),class:"tok-variableName tok-definition"},{tag:cn.special(cn.variableName),class:"tok-variableName2"},{tag:cn.definition(cn.propertyName),class:"tok-propertyName tok-definition"},{tag:cn.typeName,class:"tok-typeName"},{tag:cn.namespace,class:"tok-namespace"},{tag:cn.className,class:"tok-className"},{tag:cn.macroName,class:"tok-macroName"},{tag:cn.propertyName,class:"tok-propertyName"},{tag:cn.operator,class:"tok-operator"},{tag:cn.comment,class:"tok-comment"},{tag:cn.meta,class:"tok-meta"},{tag:cn.invalid,class:"tok-invalid"},{tag:cn.punctuation,class:"tok-punctuation"}]);var j8;const Mx=new ho;function d3e(n){return yi.define({combine:n?e=>e.concat(n):void 0})}const f3e=new ho;class Dm{constructor(e,t,i=[],r=""){this.data=e,this.name=r,Ho.prototype.hasOwnProperty("tree")||Object.defineProperty(Ho.prototype,"tree",{get(){return GA(this)}}),this.parser=t,this.extension=[Bv.of(this),Ho.languageData.of((o,s,a)=>{let c=BG(o,s,a),f=c.type.prop(Mx);if(!f)return[];let y=o.facet(f),_=c.type.prop(f3e);if(_){let E=c.resolve(s-c.from,a);for(let I of _)if(I.test(E,o)){let P=o.facet(I.facet);return I.type=="replace"?P:P.concat(y)}}return y})].concat(i)}isActiveAt(e,t,i=-1){return BG(e,t,i).type.prop(Mx)==this.data}findRegions(e){let t=e.facet(Bv);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],r=(o,s)=>{if(o.prop(Mx)==this.data){i.push({from:s,to:s+o.length});return}let a=o.prop(ho.mounted);if(a){if(a.tree.prop(Mx)==this.data){if(a.overlay)for(let c of a.overlay)i.push({from:c.from+s,to:c.to+s});else i.push({from:s,to:s+o.length});return}else if(a.overlay){let c=i.length;if(r(a.tree,a.overlay[0].from+s),i.length>c)return}}for(let c=0;c<o.children.length;c++){let f=o.children[c];f instanceof wu&&r(f,o.positions[c]+s)}};return r(GA(e),0),i}get allowsNesting(){return!0}}Dm.setState=jr.define();function BG(n,e,t){let i=n.facet(Bv),r=GA(n).topNode;if(!i||i.allowsNesting)for(let o=r;o;o=o.enter(e,t,wc.ExcludeBuffers))o.type.isTop&&(r=o);return r}class SE extends Dm{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=d3e(e.languageData);return new SE(t,e.parser.configure({props:[Mx.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new SE(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function GA(n){let e=n.field(Dm.state,!1);return e?e.tree:wu.empty}class p3e{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let p3=null;class EE{constructor(e,t,i=[],r,o,s,a,c){this.parser=e,this.state=t,this.fragments=i,this.tree=r,this.treeLen=o,this.viewport=s,this.skipped=a,this.scheduleOn=c,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new EE(e,t,[],wu.empty,0,i,[],null)}startParse(){return this.parser.startParse(new p3e(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=wu.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(AC.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(AC.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=p3;p3=this;try{return e()}finally{p3=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=OG(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:r,treeLen:o,viewport:s,skipped:a}=this;if(this.takeTree(),!e.empty){let c=[];if(e.iterChangedRanges((f,y,_,E)=>c.push({fromA:f,toA:y,fromB:_,toB:E})),i=AC.applyChanges(i,c),r=wu.empty,o=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){a=[];for(let f of this.skipped){let y=e.mapPos(f.from,1),_=e.mapPos(f.to,-1);y<_&&a.push({from:y,to:_})}}}return new EE(this.parser,t,i,r,o,s,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:o}=this.skipped[i];r<e.to&&o>e.from&&(this.fragments=OG(this.fragments,r,o),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends wne{createParse(t,i,r){let o=r[0].from,s=r[r.length-1].to;return{parsedPos:o,advance(){let c=p3;if(c){for(let f of r)c.tempSkipped.push(f);e&&(c.scheduleOn=c.scheduleOn?Promise.all([c.scheduleOn,e]):e)}return this.parsedPos=s,new wu(gd.none,[],[],s-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return p3}}function OG(n,e,t){return AC.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class m2{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new m2(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=EE.create(e.facet(Bv).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new m2(i)}}Dm.state=Hu.define({create:m2.init,update(n,e){for(let t of e.effects)if(t.is(Dm.setState))return t.value;return e.startState.facet(Bv)!=e.state.facet(Bv)?m2.init(e.state):n.apply(e)}});let One=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(One=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const N8=typeof navigator<"u"&&(!((j8=navigator.scheduling)===null||j8===void 0)&&j8.isInputPending)?()=>navigator.scheduling.isInputPending():null,m3e=Hl.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Dm.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Dm.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=One(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,o=i.field(Dm.state);if(o.tree==o.context.tree&&o.context.isDone(r+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!N8?Math.max(25,e.timeRemaining()-5):1e9),a=o.context.treeLen<r&&i.doc.length>r+1e3,c=o.context.work(()=>N8&&N8()||Date.now()>s,r+(a?0:1e5));this.chunkBudget-=Date.now()-t,(c||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:Dm.setState.of(new m2(o.context))})),this.chunkBudget>0&&!(c&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>xh(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Bv=yi.define({combine(n){return n.length?n[0]:null},enables:n=>[Dm.state,m3e,pi.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class g3e{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const y3e=yi.define(),hU=yi.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function BE(n){let e=n.facet(hU);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function hM(n,e){let t="",i=n.tabSize,r=n.facet(hU)[0];if(r=="	"){for(;e>=i;)t+="	",e-=i;r=" "}for(let o=0;o<e;o++)t+=r;return t}function dU(n,e){n instanceof Ho&&(n=new hB(n));for(let i of n.state.facet(y3e)){let r=i(n,e);if(r!==void 0)return r}let t=GA(n.state);return t.length>=e?v3e(n,t,e):null}class hB{constructor(e,t={}){this.state=e,this.options=t,this.unit=BE(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:o}=this.options;return r!=null&&r>=i.from&&r<=i.to?o&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,t);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,t=1){let{text:i,from:r}=this.lineAt(e,t),o=this.countColumn(i,e-r),s=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return s>-1&&(o+=s-this.countColumn(i,i.search(/\S|$/))),o}countColumn(e,t=e.length){return D2(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:r}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let s=o(r);if(s>-1)return s}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Ine=new ho;function v3e(n,e,t){let i=e.resolveStack(t),r=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(r!=i.node){let o=[];for(let s=r;s&&!(s.from<i.node.from||s.to>i.node.to||s.from==i.node.from&&s.type==i.node.type);s=s.parent)o.push(s);for(let s=o.length-1;s>=0;s--)i={node:o[s],next:i}}return Tne(i,n,t)}function Tne(n,e,t){for(let i=n;i;i=i.next){let r=C3e(i.node);if(r)return r(fU.create(e,t,i))}return 0}function b3e(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function C3e(n){let e=n.type.prop(Ine);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(ho.closedBy))){let r=n.lastChild,o=r&&i.indexOf(r.name)>-1;return s=>w3e(s,!0,1,void 0,o&&!b3e(s)?r.from:void 0)}return n.parent==null?_3e:null}function _3e(){return 0}class fU extends hB{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new fU(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(x3e(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return Tne(this.context.next,this.base,this.pos)}}function x3e(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function M3e(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let r=n.options.simulateBreak,o=n.state.doc.lineAt(t.from),s=r==null||r<=o.from?o.to:Math.min(o.to,r);for(let a=t.to;;){let c=e.childAfter(a);if(!c||c==i)return null;if(!c.type.isSkipped){if(c.from>=s)return null;let f=/^ */.exec(o.text.slice(t.to-o.from))[0].length;return{from:t.from,to:t.to+f}}a=c.to}}function w3e(n,e,t,i,r){let o=n.textAfter,s=o.match(/^\s*/)[0].length,a=i&&o.slice(s,s+i.length)==i||r==n.pos+s,c=M3e(n);return c?a?n.column(c.from):n.column(c.to):n.baseIndent+(a?0:n.unit*t)}function IG({except:n,units:e=1}={}){return t=>{let i=n&&n.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const S3e=200;function E3e(){return Ho.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:i}=n.newSelection.main,r=t.lineAt(i);if(i>r.from+S3e)return n;let o=t.sliceString(r.from,i);if(!e.some(f=>f.test(o)))return n;let{state:s}=n,a=-1,c=[];for(let{head:f}of s.selection.ranges){let y=s.doc.lineAt(f);if(y.from==a)continue;a=y.from;let _=dU(s,y.from);if(_==null)continue;let E=/^\s*/.exec(y.text)[0],I=hM(s,_);E!=I&&c.push({from:y.from,to:y.from+E.length,insert:I})}return c.length?[n,{changes:c,sequential:!0}]:n})}const B3e=yi.define(),kne=new ho;function O3e(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function I3e(n,e,t){let i=GA(n);if(i.length<t)return null;let r=i.resolveStack(t,1),o=null;for(let s=r;s;s=s.next){let a=s.node;if(a.to<=t||a.from>t)continue;if(o&&a.from<e)break;let c=a.type.prop(kne);if(c&&(a.to<i.length-50||i.length==n.doc.length||!T3e(a))){let f=c(a,n);f&&f.from<=t&&f.from>=e&&f.to>t&&(o=f)}}return o}function T3e(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function OE(n,e,t){for(let i of n.facet(B3e)){let r=i(n,e,t);if(r)return r}return I3e(n,e,t)}function Dne(n,e){let t=e.mapPos(n.from,1),i=e.mapPos(n.to,-1);return t>=i?void 0:{from:t,to:i}}const dB=jr.define({map:Dne}),d5=jr.define({map:Dne});function Rne(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(n.lineBlockAt(t));return e}const BC=Hu.define({create(){return ur.none},update(n,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((t,i)=>n=TG(n,t,i)),n=n.map(e.changes);for(let t of e.effects)if(t.is(dB)&&!k3e(n,t.value.from,t.value.to)){let{preparePlaceholder:i}=e.state.facet(Une),r=i?ur.replace({widget:new F3e(i(e.state,t.value))}):kG;n=n.update({add:[r.range(t.value.from,t.value.to)]})}else t.is(d5)&&(n=n.update({filter:(i,r)=>t.value.from!=i||t.value.to!=r,filterFrom:t.value.from,filterTo:t.value.to}));return e.selection&&(n=TG(n,e.selection.main.head)),n},provide:n=>pi.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(i,r)=>{t.push(i,r)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let i=n[t++],r=n[t++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(kG.range(i,r))}return ur.set(e,!0)}});function TG(n,e,t=e){let i=!1;return n.between(e,t,(r,o)=>{r<t&&o>e&&(i=!0)}),i?n.update({filterFrom:e,filterTo:t,filter:(r,o)=>r>=t||o<=e}):n}function IE(n,e,t){var i;let r=null;return(i=n.field(BC,!1))===null||i===void 0||i.between(e,t,(o,s)=>{(!r||r.from>o)&&(r={from:o,to:s})}),r}function k3e(n,e,t){let i=!1;return n.between(e,e,(r,o)=>{r==e&&o==t&&(i=!0)}),i}function Pne(n,e){return n.field(BC,!1)?e:e.concat(jr.appendConfig.of(Kne()))}const D3e=n=>{for(let e of Rne(n)){let t=OE(n.state,e.from,e.to);if(t)return n.dispatch({effects:Pne(n.state,[dB.of(t),Lne(n,t)])}),!0}return!1},R3e=n=>{if(!n.state.field(BC,!1))return!1;let e=[];for(let t of Rne(n)){let i=IE(n.state,t.from,t.to);i&&e.push(d5.of(i),Lne(n,i,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function Lne(n,e,t=!0){let i=n.state.doc.lineAt(e.from).number,r=n.state.doc.lineAt(e.to).number;return pi.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${r}.`)}const P3e=n=>{let{state:e}=n,t=[];for(let i=0;i<e.doc.length;){let r=n.lineBlockAt(i),o=OE(e,r.from,r.to);o&&t.push(dB.of(o)),i=(o?n.lineBlockAt(o.to):r).to+1}return t.length&&n.dispatch({effects:Pne(n.state,t)}),!!t.length},L3e=n=>{let e=n.state.field(BC,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(i,r)=>{t.push(d5.of({from:i,to:r}))}),n.dispatch({effects:t}),!0},U3e=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:D3e},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:R3e},{key:"Ctrl-Alt-[",run:P3e},{key:"Ctrl-Alt-]",run:L3e}],K3e={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Une=yi.define({combine(n){return Qm(n,K3e)}});function Kne(n){return[BC,N3e]}function Fne(n,e){let{state:t}=n,i=t.facet(Une),r=s=>{let a=n.lineBlockAt(n.posAtDOM(s.target)),c=IE(n.state,a.from,a.to);c&&n.dispatch({effects:d5.of(c)}),s.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(n,r,e);let o=document.createElement("span");return o.textContent=i.placeholderText,o.setAttribute("aria-label",t.phrase("folded code")),o.title=t.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=r,o}const kG=ur.replace({widget:new class extends kv{toDOM(n){return Fne(n,null)}}});class F3e extends kv{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Fne(e,this.value)}}const z3e={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class G8 extends g0{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function j3e(n={}){let e={...z3e,...n},t=new G8(e,!0),i=new G8(e,!1),r=Hl.fromClass(class{constructor(s){this.from=s.viewport.from,this.markers=this.buildMarkers(s)}update(s){(s.docChanged||s.viewportChanged||s.startState.facet(Bv)!=s.state.facet(Bv)||s.startState.field(BC,!1)!=s.state.field(BC,!1)||GA(s.startState)!=GA(s.state)||e.foldingChanged(s))&&(this.markers=this.buildMarkers(s.view))}buildMarkers(s){let a=new K1;for(let c of s.viewportLineBlocks){let f=IE(s.state,c.from,c.to)?i:OE(s.state,c.from,c.to)?t:null;f&&a.add(c.from,c.from,f)}return a.finish()}}),{domEventHandlers:o}=e;return[r,yne({class:"cm-foldGutter",markers(s){var a;return((a=s.plugin(r))===null||a===void 0?void 0:a.markers)||Po.empty},initialSpacer(){return new G8(e,!1)},domEventHandlers:{...o,click:(s,a,c)=>{if(o.click&&o.click(s,a,c))return!0;let f=IE(s.state,a.from,a.to);if(f)return s.dispatch({effects:d5.of(f)}),!0;let y=OE(s.state,a.from,a.to);return y?(s.dispatch({effects:dB.of(y)}),!0):!1}}}),Kne()]}const N3e=pi.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class f5{constructor(e,t){this.specs=e;let i;function r(a){let c=Mv.newName();return(i||(i=Object.create(null)))["."+c]=a,c}const o=typeof t.all=="string"?t.all:t.all?r(t.all):void 0,s=t.scope;this.scope=s instanceof Dm?a=>a.prop(Mx)==s.data:s?a=>a==s:void 0,this.style=Bne(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:o}).style,this.module=i?new Mv(i):null,this.themeType=t.themeType}static define(e,t){return new f5(e,t||{})}}const dR=yi.define(),zne=yi.define({combine(n){return n.length?[n[0]]:null}});function W8(n){let e=n.facet(dR);return e.length?e:n.facet(zne)}function jne(n,e){let t=[W3e],i;return n instanceof f5&&(n.module&&t.push(pi.styleModule.of(n.module)),i=n.themeType),e?.fallback?t.push(zne.of(n)):i?t.push(dR.computeN([pi.darkTheme],r=>r.facet(pi.darkTheme)==(i=="dark")?[n]:[])):t.push(dR.of(n)),t}class G3e{constructor(e){this.markCache=Object.create(null),this.tree=GA(e.state),this.decorations=this.buildDeco(e,W8(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=GA(e.state),i=W8(e.state),r=i!=W8(e.startState),{viewport:o}=e.view,s=e.changes.mapPos(this.decoratedTo,1);t.length<o.to&&!r&&t.type==this.tree.type&&s>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=s):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=o.to)}buildDeco(e,t){if(!t||!this.tree.length)return ur.none;let i=new K1;for(let{from:r,to:o}of e.visibleRanges)c3e(this.tree,t,(s,a,c)=>{i.add(s,a,this.markCache[c]||(this.markCache[c]=ur.mark({class:c})))},r,o);return i.finish()}}const W3e=KC.high(Hl.fromClass(G3e,{decorations:n=>n.decorations})),Q3e=f5.define([{tag:cn.meta,color:"#404740"},{tag:cn.link,textDecoration:"underline"},{tag:cn.heading,textDecoration:"underline",fontWeight:"bold"},{tag:cn.emphasis,fontStyle:"italic"},{tag:cn.strong,fontWeight:"bold"},{tag:cn.strikethrough,textDecoration:"line-through"},{tag:cn.keyword,color:"#708"},{tag:[cn.atom,cn.bool,cn.url,cn.contentSeparator,cn.labelName],color:"#219"},{tag:[cn.literal,cn.inserted],color:"#164"},{tag:[cn.string,cn.deleted],color:"#a11"},{tag:[cn.regexp,cn.escape,cn.special(cn.string)],color:"#e40"},{tag:cn.definition(cn.variableName),color:"#00f"},{tag:cn.local(cn.variableName),color:"#30a"},{tag:[cn.typeName,cn.namespace],color:"#085"},{tag:cn.className,color:"#167"},{tag:[cn.special(cn.variableName),cn.macroName],color:"#256"},{tag:cn.definition(cn.propertyName),color:"#00c"},{tag:cn.comment,color:"#940"},{tag:cn.invalid,color:"#f00"}]),q3e=pi.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Nne=1e4,Gne="()[]{}",Wne=yi.define({combine(n){return Qm(n,{afterCursor:!0,brackets:Gne,maxScanDistance:Nne,renderMatch:$3e})}}),Y3e=ur.mark({class:"cm-matchingBracket"}),V3e=ur.mark({class:"cm-nonmatchingBracket"});function $3e(n){let e=[],t=n.matched?Y3e:V3e;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const H3e=Hu.define({create(){return ur.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],i=e.state.facet(Wne);for(let r of e.state.selection.ranges){if(!r.empty)continue;let o=n0(e.state,r.head,-1,i)||r.head>0&&n0(e.state,r.head-1,1,i)||i.afterCursor&&(n0(e.state,r.head,1,i)||r.head<e.state.doc.length&&n0(e.state,r.head+1,-1,i));o&&(t=t.concat(i.renderMatch(o,e.state)))}return ur.set(t,!0)},provide:n=>pi.decorations.from(n)}),Z3e=[H3e,q3e];function X3e(n={}){return[Wne.of(n),Z3e]}const J3e=new ho;function fR(n,e,t){let i=n.prop(e<0?ho.openedBy:ho.closedBy);if(i)return i;if(n.name.length==1){let r=t.indexOf(n.name);if(r>-1&&r%2==(e<0?1:0))return[t[r+e]]}return null}function pR(n){let e=n.type.prop(J3e);return e?e(n.node):n}function n0(n,e,t,i={}){let r=i.maxScanDistance||Nne,o=i.brackets||Gne,s=GA(n),a=s.resolveInner(e,t);for(let c=a;c;c=c.parent){let f=fR(c.type,t,o);if(f&&c.from<c.to){let y=pR(c);if(y&&(t>0?e>=y.from&&e<y.to:e>y.from&&e<=y.to))return e4e(n,e,t,c,y,f,o)}}return t4e(n,e,t,s,a.type,r,o)}function e4e(n,e,t,i,r,o,s){let a=i.parent,c={from:r.from,to:r.to},f=0,y=a?.cursor();if(y&&(t<0?y.childBefore(i.from):y.childAfter(i.to)))do if(t<0?y.to<=i.from:y.from>=i.to){if(f==0&&o.indexOf(y.type.name)>-1&&y.from<y.to){let _=pR(y);return{start:c,end:_?{from:_.from,to:_.to}:void 0,matched:!0}}else if(fR(y.type,t,s))f++;else if(fR(y.type,-t,s)){if(f==0){let _=pR(y);return{start:c,end:_&&_.from<_.to?{from:_.from,to:_.to}:void 0,matched:!1}}f--}}while(t<0?y.prevSibling():y.nextSibling());return{start:c,matched:!1}}function t4e(n,e,t,i,r,o,s){let a=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),c=s.indexOf(a);if(c<0||c%2==0!=t>0)return null;let f={from:t<0?e-1:e,to:t>0?e+1:e},y=n.doc.iterRange(e,t>0?n.doc.length:0),_=0;for(let E=0;!y.next().done&&E<=o;){let I=y.value;t<0&&(E+=I.length);let P=e+E*t;for(let K=t>0?0:I.length-1,z=t>0?I.length:-1;K!=z;K+=t){let Q=s.indexOf(I[K]);if(!(Q<0||i.resolveInner(P+K,1).type!=r))if(Q%2==0==t>0)_++;else{if(_==1)return{start:f,end:{from:P+K,to:P+K+1},matched:Q>>1==c>>1};_--}}t>0&&(E+=I.length)}return y.done?{start:f,matched:!1}:null}const n4e=Object.create(null),DG=[gd.none],RG=[],PG=Object.create(null),i4e=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])i4e[n]=r4e(n4e,e);function Q8(n,e){RG.indexOf(n)>-1||(RG.push(n),console.warn(e))}function r4e(n,e){let t=[];for(let a of e.split(" ")){let c=[];for(let f of a.split(".")){let y=n[f]||cn[f];y?typeof y=="function"?c.length?c=c.map(y):Q8(f,`Modifier ${f} used at start of tag`):c.length?Q8(f,`Tag ${f} used as modifier`):c=Array.isArray(y)?y:[y]:Q8(f,`Unknown highlighting tag ${f}`)}for(let f of c)t.push(f)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+t.map(a=>a.id),o=PG[r];if(o)return o.id;let s=PG[r]=gd.define({id:DG.length,name:i,props:[Sne({[i]:t})]});return DG.push(s),s.id}Na.RTL,Na.LTR;const o4e=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),i=mU(n.state,t.from);return i.line?s4e(n):i.block?l4e(n):!1};function pU(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let r=n(e,t);return r?(i(t.update(r)),!0):!1}}const s4e=pU(A4e,0),a4e=pU(Qne,0),l4e=pU((n,e)=>Qne(n,e,c4e(e)),0);function mU(n,e){let t=n.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const m3=50;function u4e(n,{open:e,close:t},i,r){let o=n.sliceDoc(i-m3,i),s=n.sliceDoc(r,r+m3),a=/\s*$/.exec(o)[0].length,c=/^\s*/.exec(s)[0].length,f=o.length-a;if(o.slice(f-e.length,f)==e&&s.slice(c,c+t.length)==t)return{open:{pos:i-a,margin:a&&1},close:{pos:r+c,margin:c&&1}};let y,_;r-i<=2*m3?y=_=n.sliceDoc(i,r):(y=n.sliceDoc(i,i+m3),_=n.sliceDoc(r-m3,r));let E=/^\s*/.exec(y)[0].length,I=/\s*$/.exec(_)[0].length,P=_.length-I-t.length;return y.slice(E,E+e.length)==e&&_.slice(P,P+t.length)==t?{open:{pos:i+E+e.length,margin:/\s/.test(y.charAt(E+e.length))?1:0},close:{pos:r-I-t.length,margin:/\s/.test(_.charAt(P-1))?1:0}}:null}function c4e(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),r=t.to<=i.to?i:n.doc.lineAt(t.to);r.from>i.from&&r.from==t.to&&(r=t.to==i.to+1?i:n.doc.lineAt(t.to-1));let o=e.length-1;o>=0&&e[o].to>i.from?e[o].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function Qne(n,e,t=e.selection.ranges){let i=t.map(o=>mU(e,o.from).block);if(!i.every(o=>o))return null;let r=t.map((o,s)=>u4e(e,i[s],o.from,o.to));if(n!=2&&!r.every(o=>o))return{changes:e.changes(t.map((o,s)=>r[s]?[]:[{from:o.from,insert:i[s].open+" "},{from:o.to,insert:" "+i[s].close}]))};if(n!=1&&r.some(o=>o)){let o=[];for(let s=0,a;s<r.length;s++)if(a=r[s]){let c=i[s],{open:f,close:y}=a;o.push({from:f.pos-c.open.length,to:f.pos+f.margin},{from:y.pos-y.margin,to:y.pos+c.close.length})}return{changes:o}}return null}function A4e(n,e,t=e.selection.ranges){let i=[],r=-1;for(let{from:o,to:s}of t){let a=i.length,c=1e9,f=mU(e,o).line;if(f){for(let y=o;y<=s;){let _=e.doc.lineAt(y);if(_.from>r&&(o==s||s>_.from)){r=_.from;let E=/^\s*/.exec(_.text)[0].length,I=E==_.length,P=_.text.slice(E,E+f.length)==f?E:-1;E<_.text.length&&E<c&&(c=E),i.push({line:_,comment:P,token:f,indent:E,empty:I,single:!1})}y=_.to+1}if(c<1e9)for(let y=a;y<i.length;y++)i[y].indent<i[y].line.text.length&&(i[y].indent=c);i.length==a+1&&(i[a].single=!0)}}if(n!=2&&i.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:a,token:c,indent:f,empty:y,single:_}of i)(_||!y)&&o.push({from:a.from+f,insert:c+" "});let s=e.changes(o);return{changes:s,selection:e.selection.map(s,1)}}else if(n!=1&&i.some(o=>o.comment>=0)){let o=[];for(let{line:s,comment:a,token:c}of i)if(a>=0){let f=s.from+a,y=f+c.length;s.text[y-s.from]==" "&&y++,o.push({from:f,to:y})}return{changes:o}}return null}const mR=G1.define(),h4e=G1.define(),d4e=yi.define(),qne=yi.define({combine(n){return Qm(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,r)=>e(i,r)||t(i,r)})}}),Yne=Hu.define({create(){return i0.empty},update(n,e){let t=e.state.facet(qne),i=e.annotation(mR);if(i){let c=dd.fromTransaction(e,i.selection),f=i.side,y=f==0?n.undone:n.done;return c?y=TE(y,y.length,t.minDepth,c):y=Hne(y,e.startState.selection),new i0(f==0?i.rest:y,f==0?y:i.rest)}let r=e.annotation(h4e);if((r=="full"||r=="before")&&(n=n.isolate()),e.annotation($u.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let o=dd.fromTransaction(e),s=e.annotation($u.time),a=e.annotation($u.userEvent);return o?n=n.addChanges(o,s,a,t,e):e.selection&&(n=n.addSelection(e.startState.selection,s,a,t.newGroupDelay)),(r=="full"||r=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new i0(n.done.map(dd.fromJSON),n.undone.map(dd.fromJSON))}});function f4e(n={}){return[Yne,qne.of(n),pi.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?Vne:e.inputType=="historyRedo"?gR:null;return i?(e.preventDefault(),i(t)):!1}})]}function fB(n,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let r=t.field(Yne,!1);if(!r)return!1;let o=r.pop(n,t,e);return o?(i(o),!0):!1}}const Vne=fB(0,!1),gR=fB(1,!1),p4e=fB(0,!0),m4e=fB(1,!0);class dd{constructor(e,t,i,r,o){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=r,this.selectionsAfter=o}setSelAfter(e){return new dd(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new dd(e.changes&&qu.fromJSON(e.changes),[],e.mapped&&f0.fromJSON(e.mapped),e.startSelection&&Mn.fromJSON(e.startSelection),e.selectionsAfter.map(Mn.fromJSON))}static fromTransaction(e,t){let i=gp;for(let r of e.startState.facet(d4e)){let o=r(e);o.length&&(i=i.concat(o))}return!i.length&&e.changes.empty?null:new dd(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,gp)}static selection(e){return new dd(void 0,gp,void 0,void 0,e)}}function TE(n,e,t,i){let r=e+1>t+20?e-t-1:0,o=n.slice(r,e);return o.push(i),o}function g4e(n,e){let t=[],i=!1;return n.iterChangedRanges((r,o)=>t.push(r,o)),e.iterChangedRanges((r,o,s,a)=>{for(let c=0;c<t.length;){let f=t[c++],y=t[c++];a>=f&&s<=y&&(i=!0)}}),i}function y4e(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function $ne(n,e){return n.length?e.length?n.concat(e):n:e}const gp=[],v4e=200;function Hne(n,e){if(n.length){let t=n[n.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-v4e));return i.length&&i[i.length-1].eq(e)?n:(i.push(e),TE(n,n.length-1,1e9,t.setSelAfter(i)))}else return[dd.selection([e])]}function b4e(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function q8(n,e){if(!n.length)return n;let t=n.length,i=gp;for(;t;){let r=C4e(n[t-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let o=n.slice(0,t);return o[t-1]=r,o}else e=r.mapped,t--,i=r.selectionsAfter}return i.length?[dd.selection(i)]:gp}function C4e(n,e,t){let i=$ne(n.selectionsAfter.length?n.selectionsAfter.map(a=>a.map(e)):gp,t);if(!n.changes)return dd.selection(i);let r=n.changes.map(e),o=e.mapDesc(n.changes,!0),s=n.mapped?n.mapped.composeDesc(o):o;return new dd(r,jr.mapEffects(n.effects,e),s,n.startSelection.map(o),i)}const _4e=/^(input\.type|delete)($|\.)/;class i0{constructor(e,t,i=0,r=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new i0(this.done,this.undone):this}addChanges(e,t,i,r,o){let s=this.done,a=s[s.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||_4e.test(i))&&(!a.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(o,g4e(a.changes,e.changes))||i=="input.type.compose")?s=TE(s,s.length-1,r.minDepth,new dd(e.changes.compose(a.changes),$ne(jr.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,gp)):s=TE(s,s.length,r.minDepth,e),new i0(s,gp,t,i)}addSelection(e,t,i,r){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:gp;return o.length>0&&t-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&y4e(o[o.length-1],e)?this:new i0(Hne(this.done,e),this.undone,t,i)}addMapping(e){return new i0(q8(this.done,e),q8(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let o=r[r.length-1],s=o.selectionsAfter[0]||t.selection;if(i&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:mR.of({side:e,rest:b4e(r),selection:s}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let a=r.length==1?gp:r.slice(0,r.length-1);return o.mapped&&(a=q8(a,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:mR.of({side:e,rest:a,selection:s}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}i0.empty=new i0(gp,gp);const x4e=[{key:"Mod-z",run:Vne,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:gR,preventDefault:!0},{linux:"Ctrl-Shift-z",run:gR,preventDefault:!0},{key:"Mod-u",run:p4e,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:m4e,preventDefault:!0}];function R2(n,e){return Mn.create(n.ranges.map(e),n.mainIndex)}function qm(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Ym({state:n,dispatch:e},t){let i=R2(n.selection,t);return i.eq(n.selection,!0)?!1:(e(qm(n,i)),!0)}function pB(n,e){return Mn.cursor(e?n.to:n.from)}function Zne(n,e){return Ym(n,t=>t.empty?n.moveByChar(t,e):pB(t,e))}function QA(n){return n.textDirectionAt(n.state.selection.main.head)==Na.LTR}const Xne=n=>Zne(n,!QA(n)),Jne=n=>Zne(n,QA(n));function eie(n,e){return Ym(n,t=>t.empty?n.moveByGroup(t,e):pB(t,e))}const M4e=n=>eie(n,!QA(n)),w4e=n=>eie(n,QA(n));function S4e(n,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function mB(n,e,t){let i=GA(n).resolveInner(e.head),r=t?ho.closedBy:ho.openedBy;for(let c=e.head;;){let f=t?i.childAfter(c):i.childBefore(c);if(!f)break;S4e(n,f,r)?i=f:c=t?f.to:f.from}let o=i.type.prop(r),s,a;return o&&(s=t?n0(n,i.from,1):n0(n,i.to,-1))&&s.matched?a=t?s.end.to:s.end.from:a=t?i.to:i.from,Mn.cursor(a,t?-1:1)}const E4e=n=>Ym(n,e=>mB(n.state,e,!QA(n))),B4e=n=>Ym(n,e=>mB(n.state,e,QA(n)));function tie(n,e){return Ym(n,t=>{if(!t.empty)return pB(t,e);let i=n.moveVertically(t,e);return i.head!=t.head?i:n.moveToLineBoundary(t,e)})}const nie=n=>tie(n,!1),iie=n=>tie(n,!0);function rie(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,i=0,r;if(e){for(let o of n.state.facet(pi.scrollMargins)){let s=o(n);s?.top&&(t=Math.max(s?.top,t)),s?.bottom&&(i=Math.max(s?.bottom,i))}r=n.scrollDOM.clientHeight-t-i}else r=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(n.defaultLineHeight,r-5)}}function oie(n,e){let t=rie(n),{state:i}=n,r=R2(i.selection,s=>s.empty?n.moveVertically(s,e,t.height):pB(s,e));if(r.eq(i.selection))return!1;let o;if(t.selfScroll){let s=n.coordsAtPos(i.selection.main.head),a=n.scrollDOM.getBoundingClientRect(),c=a.top+t.marginTop,f=a.bottom-t.marginBottom;s&&s.top>c&&s.bottom<f&&(o=pi.scrollIntoView(r.main.head,{y:"start",yMargin:s.top-c}))}return n.dispatch(qm(i,r),{effects:o}),!0}const LG=n=>oie(n,!1),yR=n=>oie(n,!0);function Dv(n,e,t){let i=n.lineBlockAt(e.head),r=n.moveToLineBoundary(e,t);if(r.head==e.head&&r.head!=(t?i.to:i.from)&&(r=n.moveToLineBoundary(e,t,!1)),!t&&r.head==i.from&&i.length){let o=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;o&&e.head!=i.from+o&&(r=Mn.cursor(i.from+o))}return r}const O4e=n=>Ym(n,e=>Dv(n,e,!0)),I4e=n=>Ym(n,e=>Dv(n,e,!1)),T4e=n=>Ym(n,e=>Dv(n,e,!QA(n))),k4e=n=>Ym(n,e=>Dv(n,e,QA(n))),D4e=n=>Ym(n,e=>Mn.cursor(n.lineBlockAt(e.head).from,1)),R4e=n=>Ym(n,e=>Mn.cursor(n.lineBlockAt(e.head).to,-1));function P4e(n,e,t){let i=!1,r=R2(n.selection,o=>{let s=n0(n,o.head,-1)||n0(n,o.head,1)||o.head>0&&n0(n,o.head-1,1)||o.head<n.doc.length&&n0(n,o.head+1,-1);if(!s||!s.end)return o;i=!0;let a=s.start.from==o.head?s.end.to:s.end.from;return Mn.cursor(a)});return i?(e(qm(n,r)),!0):!1}const L4e=({state:n,dispatch:e})=>P4e(n,e);function wp(n,e){let t=R2(n.state.selection,i=>{let r=e(i);return Mn.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(qm(n.state,t)),!0)}function sie(n,e){return wp(n,t=>n.moveByChar(t,e))}const aie=n=>sie(n,!QA(n)),lie=n=>sie(n,QA(n));function uie(n,e){return wp(n,t=>n.moveByGroup(t,e))}const U4e=n=>uie(n,!QA(n)),K4e=n=>uie(n,QA(n)),F4e=n=>wp(n,e=>mB(n.state,e,!QA(n))),z4e=n=>wp(n,e=>mB(n.state,e,QA(n)));function cie(n,e){return wp(n,t=>n.moveVertically(t,e))}const Aie=n=>cie(n,!1),hie=n=>cie(n,!0);function die(n,e){return wp(n,t=>n.moveVertically(t,e,rie(n).height))}const UG=n=>die(n,!1),KG=n=>die(n,!0),j4e=n=>wp(n,e=>Dv(n,e,!0)),N4e=n=>wp(n,e=>Dv(n,e,!1)),G4e=n=>wp(n,e=>Dv(n,e,!QA(n))),W4e=n=>wp(n,e=>Dv(n,e,QA(n))),Q4e=n=>wp(n,e=>Mn.cursor(n.lineBlockAt(e.head).from)),q4e=n=>wp(n,e=>Mn.cursor(n.lineBlockAt(e.head).to)),FG=({state:n,dispatch:e})=>(e(qm(n,{anchor:0})),!0),zG=({state:n,dispatch:e})=>(e(qm(n,{anchor:n.doc.length})),!0),jG=({state:n,dispatch:e})=>(e(qm(n,{anchor:n.selection.main.anchor,head:0})),!0),NG=({state:n,dispatch:e})=>(e(qm(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),Y4e=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),V4e=({state:n,dispatch:e})=>{let t=gB(n).map(({from:i,to:r})=>Mn.range(i,Math.min(r+1,n.doc.length)));return e(n.update({selection:Mn.create(t),userEvent:"select"})),!0},$4e=({state:n,dispatch:e})=>{let t=R2(n.selection,i=>{let r=GA(n),o=r.resolveStack(i.from,1);if(i.empty){let s=r.resolveStack(i.from,-1);s.node.from>=o.node.from&&s.node.to<=o.node.to&&(o=s)}for(let s=o;s;s=s.next){let{node:a}=s;if((a.from<i.from&&a.to>=i.to||a.to>i.to&&a.from<=i.from)&&s.next)return Mn.range(a.to,a.from)}return i});return t.eq(n.selection)?!1:(e(qm(n,t)),!0)};function fie(n,e){let{state:t}=n,i=t.selection,r=t.selection.ranges.slice();for(let o of t.selection.ranges){let s=t.doc.lineAt(o.head);if(e?s.to<n.state.doc.length:s.from>0)for(let a=o;;){let c=n.moveVertically(a,e);if(c.head<s.from||c.head>s.to){r.some(f=>f.head==c.head)||r.push(c);break}else{if(c.head==a.head)break;a=c}}}return r.length==i.ranges.length?!1:(n.dispatch(qm(t,Mn.create(r,r.length-1))),!0)}const H4e=n=>fie(n,!1),Z4e=n=>fie(n,!0),X4e=({state:n,dispatch:e})=>{let t=n.selection,i=null;return t.ranges.length>1?i=Mn.create([t.main]):t.main.empty||(i=Mn.create([Mn.cursor(t.main.head)])),i?(e(qm(n,i)),!0):!1};function p5(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:i}=n,r=i.changeByRange(o=>{let{from:s,to:a}=o;if(s==a){let c=e(o);c<s?(t="delete.backward",c=Mw(n,c,!1)):c>s&&(t="delete.forward",c=Mw(n,c,!0)),s=Math.min(s,c),a=Math.max(a,c)}else s=Mw(n,s,!1),a=Mw(n,a,!0);return s==a?{range:o}:{changes:{from:s,to:a},range:Mn.cursor(s,s<o.head?-1:1)}});return r.changes.empty?!1:(n.dispatch(i.update(r,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?pi.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Mw(n,e,t){if(n instanceof pi)for(let i of n.state.facet(pi.atomicRanges).map(r=>r(n)))i.between(e,e,(r,o)=>{r<e&&o>e&&(e=t?o:r)});return e}const pie=(n,e,t)=>p5(n,i=>{let r=i.from,{state:o}=n,s=o.doc.lineAt(r),a,c;if(t&&!e&&r>s.from&&r<s.from+200&&!/[^ \t]/.test(a=s.text.slice(0,r-s.from))){if(a[a.length-1]=="	")return r-1;let f=D2(a,o.tabSize),y=f%BE(o)||BE(o);for(let _=0;_<y&&a[a.length-1-_]==" ";_++)r--;c=r}else c=nA(s.text,r-s.from,e,e)+s.from,c==r&&s.number!=(e?o.doc.lines:1)?c+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(s.text.slice(c-s.from,r-s.from))&&(c=nA(s.text,c-s.from,!1,!1)+s.from);return c}),vR=n=>pie(n,!1,!0),mie=n=>pie(n,!0,!1),gie=(n,e)=>p5(n,t=>{let i=t.head,{state:r}=n,o=r.doc.lineAt(i),s=r.charCategorizer(i);for(let a=null;;){if(i==(e?o.to:o.from)){i==t.head&&o.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let c=nA(o.text,i-o.from,e)+o.from,f=o.text.slice(Math.min(i,c)-o.from,Math.max(i,c)-o.from),y=s(f);if(a!=null&&y!=a)break;(f!=" "||i!=t.head)&&(a=y),i=c}return i}),yie=n=>gie(n,!1),J4e=n=>gie(n,!0),eMe=n=>p5(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),tMe=n=>p5(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),nMe=n=>p5(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),iMe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Zo.of(["",""])},range:Mn.cursor(i.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},rMe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let r=i.from,o=n.doc.lineAt(r),s=r==o.from?r-1:nA(o.text,r-o.from,!1)+o.from,a=r==o.to?r+1:nA(o.text,r-o.from,!0)+o.from;return{changes:{from:s,to:a,insert:n.doc.slice(r,a).append(n.doc.slice(s,r))},range:Mn.cursor(a)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function gB(n){let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.from),o=n.doc.lineAt(i.to);if(!i.empty&&i.to==o.from&&(o=n.doc.lineAt(i.to-1)),t>=r.number){let s=e[e.length-1];s.to=o.to,s.ranges.push(i)}else e.push({from:r.from,to:o.to,ranges:[i]});t=o.number+1}return e}function vie(n,e,t){if(n.readOnly)return!1;let i=[],r=[];for(let o of gB(n)){if(t?o.to==n.doc.length:o.from==0)continue;let s=n.doc.lineAt(t?o.to+1:o.from-1),a=s.length+1;if(t){i.push({from:o.to,to:s.to},{from:o.from,insert:s.text+n.lineBreak});for(let c of o.ranges)r.push(Mn.range(Math.min(n.doc.length,c.anchor+a),Math.min(n.doc.length,c.head+a)))}else{i.push({from:s.from,to:o.from},{from:o.to,insert:n.lineBreak+s.text});for(let c of o.ranges)r.push(Mn.range(c.anchor-a,c.head-a))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:Mn.create(r,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const oMe=({state:n,dispatch:e})=>vie(n,e,!1),sMe=({state:n,dispatch:e})=>vie(n,e,!0);function bie(n,e,t){if(n.readOnly)return!1;let i=[];for(let r of gB(n))t?i.push({from:r.from,insert:n.doc.slice(r.from,r.to)+n.lineBreak}):i.push({from:r.to,insert:n.lineBreak+n.doc.slice(r.from,r.to)});return e(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const aMe=({state:n,dispatch:e})=>bie(n,e,!1),lMe=({state:n,dispatch:e})=>bie(n,e,!0),uMe=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(gB(e).map(({from:r,to:o})=>(r>0?r--:o<e.doc.length&&o++,{from:r,to:o}))),i=R2(e.selection,r=>{let o;if(n.lineWrapping){let s=n.lineBlockAt(r.head),a=n.coordsAtPos(r.head,r.assoc||1);a&&(o=s.bottom+n.documentTop-a.bottom+n.defaultLineHeight/2)}return n.moveVertically(r,!0,o)}).map(t);return n.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function cMe(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=GA(n).resolveInner(e),i=t.childBefore(e),r=t.childAfter(e),o;return i&&r&&i.to<=e&&r.from>=e&&(o=i.type.prop(ho.closedBy))&&o.indexOf(r.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(r.from).from&&!/\S/.test(n.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const GG=Cie(!1),AMe=Cie(!0);function Cie(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:o,to:s}=r,a=e.doc.lineAt(o),c=!n&&o==s&&cMe(e,o);n&&(o=s=(s<=a.to?a:e.doc.lineAt(s)).to);let f=new hB(e,{simulateBreak:o,simulateDoubleBreak:!!c}),y=dU(f,o);for(y==null&&(y=D2(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));s<a.to&&/\s/.test(a.text[s-a.from]);)s++;c?{from:o,to:s}=c:o>a.from&&o<a.from+100&&!/\S/.test(a.text.slice(0,o))&&(o=a.from);let _=["",hM(e,y)];return c&&_.push(hM(e,f.lineIndent(a.from,-1))),{changes:{from:o,to:s,insert:Zo.of(_)},range:Mn.cursor(o+1+_[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function gU(n,e){let t=-1;return n.changeByRange(i=>{let r=[];for(let s=i.from;s<=i.to;){let a=n.doc.lineAt(s);a.number>t&&(i.empty||i.to>a.from)&&(e(a,r,i),t=a.number),s=a.to+1}let o=n.changes(r);return{changes:r,range:Mn.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}})}const hMe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),i=new hB(n,{overrideIndentation:o=>{let s=t[o];return s??-1}}),r=gU(n,(o,s,a)=>{let c=dU(i,o.from);if(c==null)return;/\S/.test(o.text)||(c=0);let f=/^\s*/.exec(o.text)[0],y=hM(n,c);(f!=y||a.from<o.from+f.length)&&(t[o.from]=c,s.push({from:o.from,to:o.from+f.length,insert:y}))});return r.changes.empty||e(n.update(r,{userEvent:"indent"})),!0},dMe=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(gU(n,(t,i)=>{i.push({from:t.from,insert:n.facet(hU)})}),{userEvent:"input.indent"})),!0),fMe=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(gU(n,(t,i)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let o=D2(r,n.tabSize),s=0,a=hM(n,Math.max(0,o-BE(n)));for(;s<r.length&&s<a.length&&r.charCodeAt(s)==a.charCodeAt(s);)s++;i.push({from:t.from+s,to:t.from+r.length,insert:a.slice(s)})}),{userEvent:"delete.dedent"})),!0),pMe=n=>(n.setTabFocusMode(),!0),mMe=[{key:"Ctrl-b",run:Xne,shift:aie,preventDefault:!0},{key:"Ctrl-f",run:Jne,shift:lie},{key:"Ctrl-p",run:nie,shift:Aie},{key:"Ctrl-n",run:iie,shift:hie},{key:"Ctrl-a",run:D4e,shift:Q4e},{key:"Ctrl-e",run:R4e,shift:q4e},{key:"Ctrl-d",run:mie},{key:"Ctrl-h",run:vR},{key:"Ctrl-k",run:eMe},{key:"Ctrl-Alt-h",run:yie},{key:"Ctrl-o",run:iMe},{key:"Ctrl-t",run:rMe},{key:"Ctrl-v",run:yR}],gMe=[{key:"ArrowLeft",run:Xne,shift:aie,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:M4e,shift:U4e,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:T4e,shift:G4e,preventDefault:!0},{key:"ArrowRight",run:Jne,shift:lie,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:w4e,shift:K4e,preventDefault:!0},{mac:"Cmd-ArrowRight",run:k4e,shift:W4e,preventDefault:!0},{key:"ArrowUp",run:nie,shift:Aie,preventDefault:!0},{mac:"Cmd-ArrowUp",run:FG,shift:jG},{mac:"Ctrl-ArrowUp",run:LG,shift:UG},{key:"ArrowDown",run:iie,shift:hie,preventDefault:!0},{mac:"Cmd-ArrowDown",run:zG,shift:NG},{mac:"Ctrl-ArrowDown",run:yR,shift:KG},{key:"PageUp",run:LG,shift:UG},{key:"PageDown",run:yR,shift:KG},{key:"Home",run:I4e,shift:N4e,preventDefault:!0},{key:"Mod-Home",run:FG,shift:jG},{key:"End",run:O4e,shift:j4e,preventDefault:!0},{key:"Mod-End",run:zG,shift:NG},{key:"Enter",run:GG,shift:GG},{key:"Mod-a",run:Y4e},{key:"Backspace",run:vR,shift:vR,preventDefault:!0},{key:"Delete",run:mie,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:yie,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:J4e,preventDefault:!0},{mac:"Mod-Backspace",run:tMe,preventDefault:!0},{mac:"Mod-Delete",run:nMe,preventDefault:!0}].concat(mMe.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),yMe=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:E4e,shift:F4e},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:B4e,shift:z4e},{key:"Alt-ArrowUp",run:oMe},{key:"Shift-Alt-ArrowUp",run:aMe},{key:"Alt-ArrowDown",run:sMe},{key:"Shift-Alt-ArrowDown",run:lMe},{key:"Mod-Alt-ArrowUp",run:H4e},{key:"Mod-Alt-ArrowDown",run:Z4e},{key:"Escape",run:X4e},{key:"Mod-Enter",run:AMe},{key:"Alt-l",mac:"Ctrl-l",run:V4e},{key:"Mod-i",run:$4e,preventDefault:!0},{key:"Mod-[",run:fMe},{key:"Mod-]",run:dMe},{key:"Mod-Alt-\\",run:hMe},{key:"Shift-Mod-k",run:uMe},{key:"Shift-Mod-\\",run:L4e},{key:"Mod-/",run:o4e},{key:"Alt-A",run:a4e},{key:"Ctrl-m",mac:"Shift-Alt-m",run:pMe}].concat(gMe),WG=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class g2{constructor(e,t,i=0,r=e.length,o,s){this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=o?a=>o(WG(a)):WG,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return cd(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=YL(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Vg(e);let r=this.normalize(t);if(r.length)for(let o=0,s=i;;o++){let a=r.charCodeAt(o),c=this.match(a,s,this.bufferPos+this.bufferStart);if(o==r.length-1){if(c)return this.value=c,this;break}s==i&&o<t.length&&t.charCodeAt(o)==a&&s++}}}match(e,t,i){let r=null;for(let o=0;o<this.matches.length;o+=2){let s=this.matches[o],a=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?r={from:this.matches[o+1],to:i}:(this.matches[o]++,a=!0)),a||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:t,to:i}:this.matches.push(1,t)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(g2.prototype[Symbol.iterator]=function(){return this});const _ie={from:-1,to:-1,match:/.*/.exec("")},yU="gm"+(/x/.unicode==null?"":"u");class xie{constructor(e,t,i,r=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=_ie,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new Mie(e,t,i,r,o);this.re=new RegExp(t,yU+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=e.iter();let s=e.lineAt(r);this.curLineStart=s.from,this.matchPos=kE(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,r=i+t[0].length;if(this.matchPos=kE(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Y8=new WeakMap;class Nx{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let r=Y8.get(e);if(!r||r.from>=i||r.to<=t){let a=new Nx(t,e.sliceString(t,i));return Y8.set(e,a),a}if(r.from==t&&r.to==i)return r;let{text:o,from:s}=r;return s>t&&(o=e.sliceString(t,s)+o,s=t),r.to<i&&(o+=e.sliceString(r.to,i)),Y8.set(e,new Nx(s,o)),new Nx(t,o.slice(t-s,i-s))}}class Mie{constructor(e,t,i,r,o){this.text=e,this.to=o,this.done=!1,this.value=_ie,this.matchPos=kE(e,r),this.re=new RegExp(t,yU+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=Nx.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,r=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this.matchPos=kE(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Nx.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(xie.prototype[Symbol.iterator]=Mie.prototype[Symbol.iterator]=function(){return this});function vMe(n){try{return new RegExp(n,yU),!0}catch{return!1}}function kE(n,e){if(e>=n.length)return e;let t=n.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function bR(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=ha("input",{class:"cm-textfield",name:"line",value:e}),i=ha("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),n.dispatch({effects:f4.of(!1)}),n.focus()):o.keyCode==13&&(o.preventDefault(),r())},onsubmit:o=>{o.preventDefault(),r()}},ha("label",n.state.phrase("Go to line"),": ",t)," ",ha("button",{class:"cm-button",type:"submit"},n.state.phrase("go")),ha("button",{name:"close",onclick:()=>{n.dispatch({effects:f4.of(!1)}),n.focus()},"aria-label":n.state.phrase("close"),type:"button"},[""]));function r(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!o)return;let{state:s}=n,a=s.doc.lineAt(s.selection.main.head),[,c,f,y,_]=o,E=y?+y.slice(1):0,I=f?+f:a.number;if(f&&_){let z=I/100;c&&(z=z*(c=="-"?-1:1)+a.number/s.doc.lines),I=Math.round(s.doc.lines*z)}else f&&c&&(I=I*(c=="-"?-1:1)+a.number);let P=s.doc.line(Math.max(1,Math.min(s.doc.lines,I))),K=Mn.cursor(P.from+Math.max(0,Math.min(E,P.length)));n.dispatch({effects:[f4.of(!1),pi.scrollIntoView(K.from,{y:"center"})],selection:K}),n.focus()}return{dom:i}}const f4=jr.define(),QG=Hu.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(f4)&&(n=t.value);return n},provide:n=>uM.from(n,e=>e?bR:null)}),bMe=n=>{let e=lM(n,bR);if(!e){let t=[f4.of(!0)];n.state.field(QG,!1)==null&&t.push(jr.appendConfig.of([QG,CMe])),n.dispatch({effects:t}),e=lM(n,bR)}return e&&e.dom.querySelector("input").select(),!0},CMe=pi.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),_Me={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},xMe=yi.define({combine(n){return Qm(n,_Me,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function MMe(n){return[OMe,BMe]}const wMe=ur.mark({class:"cm-selectionMatch"}),SMe=ur.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function qG(n,e,t,i){return(t==0||n(e.sliceDoc(t-1,t))!=Va.Word)&&(i==e.doc.length||n(e.sliceDoc(i,i+1))!=Va.Word)}function EMe(n,e,t,i){return n(e.sliceDoc(t,t+1))==Va.Word&&n(e.sliceDoc(i-1,i))==Va.Word}const BMe=Hl.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(xMe),{state:t}=n,i=t.selection;if(i.ranges.length>1)return ur.none;let r=i.main,o,s=null;if(r.empty){if(!e.highlightWordAroundCursor)return ur.none;let c=t.wordAt(r.head);if(!c)return ur.none;s=t.charCategorizer(r.head),o=t.sliceDoc(c.from,c.to)}else{let c=r.to-r.from;if(c<e.minSelectionLength||c>200)return ur.none;if(e.wholeWords){if(o=t.sliceDoc(r.from,r.to),s=t.charCategorizer(r.head),!(qG(s,t,r.from,r.to)&&EMe(s,t,r.from,r.to)))return ur.none}else if(o=t.sliceDoc(r.from,r.to),!o)return ur.none}let a=[];for(let c of n.visibleRanges){let f=new g2(t.doc,o,c.from,c.to);for(;!f.next().done;){let{from:y,to:_}=f.value;if((!s||qG(s,t,y,_))&&(r.empty&&y<=r.from&&_>=r.to?a.push(SMe.range(y,_)):(y>=r.to||_<=r.from)&&a.push(wMe.range(y,_)),a.length>e.maxMatches))return ur.none}}return ur.set(a)}},{decorations:n=>n.decorations}),OMe=pi.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),IMe=({state:n,dispatch:e})=>{let{selection:t}=n,i=Mn.create(t.ranges.map(r=>n.wordAt(r.head)||Mn.cursor(r.head)),t.mainIndex);return i.eq(t)?!1:(e(n.update({selection:i})),!0)};function TMe(n,e){let{main:t,ranges:i}=n.selection,r=n.wordAt(t.head),o=r&&r.from==t.from&&r.to==t.to;for(let s=!1,a=new g2(n.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(s)return null;a=new g2(n.doc,e,0,Math.max(0,i[i.length-1].from-1)),s=!0}else{if(s&&i.some(c=>c.from==a.value.from))continue;if(o){let c=n.wordAt(a.value.from);if(!c||c.from!=a.value.from||c.to!=a.value.to)continue}return a.value}}const kMe=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(o=>o.from===o.to))return IMe({state:n,dispatch:e});let i=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(o=>n.sliceDoc(o.from,o.to)!=i))return!1;let r=TMe(n,i);return r?(e(n.update({selection:n.selection.addRange(Mn.range(r.from,r.to),!1),effects:pi.scrollIntoView(r.to)})),!0):!1},P2=yi.define({combine(n){return Qm(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new WMe(e),scrollToMatch:e=>pi.scrollIntoView(e)})}});class wie{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||vMe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new LMe(this):new RMe(this)}getCursor(e,t=0,i){let r=e.doc?e:Ho.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?gx(this,r,t,i):mx(this,r,t,i)}}class Sie{constructor(e){this.spec=e}}function mx(n,e,t,i){return new g2(e.doc,n.unquoted,t,i,n.caseSensitive?void 0:r=>r.toLowerCase(),n.wholeWord?DMe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function DMe(n,e){return(t,i,r,o)=>((o>t||o+r.length<i)&&(o=Math.max(0,t-2),r=n.sliceString(o,Math.min(n.length,i+2))),(e(DE(r,t-o))!=Va.Word||e(RE(r,t-o))!=Va.Word)&&(e(RE(r,i-o))!=Va.Word||e(DE(r,i-o))!=Va.Word))}class RMe extends Sie{constructor(e){super(e)}nextMatch(e,t,i){let r=mx(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let o=Math.min(e.doc.length,t+this.spec.unquoted.length);r=mx(this.spec,e,0,o).nextOverlapping()}return r.done||r.value.from==t&&r.value.to==i?null:r.value}prevMatchInRange(e,t,i){for(let r=i;;){let o=Math.max(t,r-1e4-this.spec.unquoted.length),s=mx(this.spec,e,o,r),a=null;for(;!s.nextOverlapping().done;)a=s.value;if(a)return a;if(o==t)return null;r-=1e4}}prevMatch(e,t,i){let r=this.prevMatchInRange(e,0,t);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=t||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=mx(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let o=mx(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}function gx(n,e,t,i){return new xie(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?PMe(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function DE(n,e){return n.slice(nA(n,e,!1),e)}function RE(n,e){return n.slice(e,nA(n,e))}function PMe(n){return(e,t,i)=>!i[0].length||(n(DE(i.input,i.index))!=Va.Word||n(RE(i.input,i.index))!=Va.Word)&&(n(RE(i.input,i.index+i[0].length))!=Va.Word||n(DE(i.input,i.index+i[0].length))!=Va.Word)}class LMe extends Sie{nextMatch(e,t,i){let r=gx(this.spec,e,i,e.doc.length).next();return r.done&&(r=gx(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,i){for(let r=1;;r++){let o=Math.max(t,i-r*1e4),s=gx(this.spec,e,o,i),a=null;for(;!s.next().done;)a=s.value;if(a&&(o==t||a.from>o+10))return a;if(o==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let r=i.length;r>0;r--){let o=+i.slice(0,r);if(o>0&&o<e.match.length)return e.match[o]+i.slice(r)}return t})}matchAll(e,t){let i=gx(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let o=gx(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}const dM=jr.define(),vU=jr.define(),bv=Hu.define({create(n){return new V8(CR(n).create(),null)},update(n,e){for(let t of e.effects)t.is(dM)?n=new V8(t.value.create(),n.panel):t.is(vU)&&(n=new V8(n.query,t.value?bU:null));return n},provide:n=>uM.from(n,e=>e.panel)});class V8{constructor(e,t){this.query=e,this.panel=t}}const UMe=ur.mark({class:"cm-searchMatch"}),KMe=ur.mark({class:"cm-searchMatch cm-searchMatch-selected"}),FMe=Hl.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(bv))}update(n){let e=n.state.field(bv);(e!=n.startState.field(bv)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return ur.none;let{view:t}=this,i=new K1;for(let r=0,o=t.visibleRanges,s=o.length;r<s;r++){let{from:a,to:c}=o[r];for(;r<s-1&&c>o[r+1].from-500;)c=o[++r].to;n.highlight(t.state,a,c,(f,y)=>{let _=t.state.selection.ranges.some(E=>E.from==f&&E.to==y);i.add(f,y,_?KMe:UMe)})}return i.finish()}},{decorations:n=>n.decorations});function m5(n){return e=>{let t=e.state.field(bv,!1);return t&&t.query.spec.valid?n(e,t):Oie(e)}}const PE=m5((n,{query:e})=>{let{to:t}=n.state.selection.main,i=e.nextMatch(n.state,t,t);if(!i)return!1;let r=Mn.single(i.from,i.to),o=n.state.facet(P2);return n.dispatch({selection:r,effects:[CU(n,i),o.scrollToMatch(r.main,n)],userEvent:"select.search"}),Bie(n),!0}),LE=m5((n,{query:e})=>{let{state:t}=n,{from:i}=t.selection.main,r=e.prevMatch(t,i,i);if(!r)return!1;let o=Mn.single(r.from,r.to),s=n.state.facet(P2);return n.dispatch({selection:o,effects:[CU(n,r),s.scrollToMatch(o.main,n)],userEvent:"select.search"}),Bie(n),!0}),zMe=m5((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:Mn.create(t.map(i=>Mn.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),jMe=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:r}=t.main,o=[],s=0;for(let a=new g2(n.doc,n.sliceDoc(i,r));!a.next().done;){if(o.length>1e3)return!1;a.value.from==i&&(s=o.length),o.push(Mn.range(a.value.from,a.value.to))}return e(n.update({selection:Mn.create(o,s),userEvent:"select.search.matches"})),!0},YG=m5((n,{query:e})=>{let{state:t}=n,{from:i,to:r}=t.selection.main;if(t.readOnly)return!1;let o=e.nextMatch(t,i,i);if(!o)return!1;let s=o,a=[],c,f,y=[];s.from==i&&s.to==r&&(f=t.toText(e.getReplacement(s)),a.push({from:s.from,to:s.to,insert:f}),s=e.nextMatch(t,s.from,s.to),y.push(pi.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+".")));let _=n.state.changes(a);return s&&(c=Mn.single(s.from,s.to).map(_),y.push(CU(n,s)),y.push(t.facet(P2).scrollToMatch(c.main,n))),n.dispatch({changes:_,selection:c,effects:y,userEvent:"input.replace"}),!0}),NMe=m5((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(r=>{let{from:o,to:s}=r;return{from:o,to:s,insert:e.getReplacement(r)}});if(!t.length)return!1;let i=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:pi.announce.of(i),userEvent:"input.replace.all"}),!0});function bU(n){return n.state.facet(P2).createPanel(n)}function CR(n,e){var t,i,r,o,s;let a=n.selection.main,c=a.empty||a.to>a.from+100?"":n.sliceDoc(a.from,a.to);if(e&&!c)return e;let f=n.facet(P2);return new wie({search:((t=e?.literal)!==null&&t!==void 0?t:f.literal)?c:c.replace(/\n/g,"\\n"),caseSensitive:(i=e?.caseSensitive)!==null&&i!==void 0?i:f.caseSensitive,literal:(r=e?.literal)!==null&&r!==void 0?r:f.literal,regexp:(o=e?.regexp)!==null&&o!==void 0?o:f.regexp,wholeWord:(s=e?.wholeWord)!==null&&s!==void 0?s:f.wholeWord})}function Eie(n){let e=lM(n,bU);return e&&e.dom.querySelector("[main-field]")}function Bie(n){let e=Eie(n);e&&e==n.root.activeElement&&e.select()}const Oie=n=>{let e=n.state.field(bv,!1);if(e&&e.panel){let t=Eie(n);if(t&&t!=n.root.activeElement){let i=CR(n.state,e.query.spec);i.valid&&n.dispatch({effects:dM.of(i)}),t.focus(),t.select()}}else n.dispatch({effects:[vU.of(!0),e?dM.of(CR(n.state,e.query.spec)):jr.appendConfig.of(qMe)]});return!0},Iie=n=>{let e=n.state.field(bv,!1);if(!e||!e.panel)return!1;let t=lM(n,bU);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:vU.of(!1)}),!0},GMe=[{key:"Mod-f",run:Oie,scope:"editor search-panel"},{key:"F3",run:PE,shift:LE,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:PE,shift:LE,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Iie,scope:"editor search-panel"},{key:"Mod-Shift-l",run:jMe},{key:"Mod-Alt-g",run:bMe},{key:"Mod-d",run:kMe,preventDefault:!0}];class WMe{constructor(e){this.view=e;let t=this.query=e.state.field(bv).query.spec;this.commit=this.commit.bind(this),this.searchField=ha("input",{value:t.search,placeholder:tf(e,"Find"),"aria-label":tf(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=ha("input",{value:t.replace,placeholder:tf(e,"Replace"),"aria-label":tf(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=ha("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=ha("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=ha("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(r,o,s){return ha("button",{class:"cm-button",name:r,onclick:o,type:"button"},s)}this.dom=ha("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>PE(e),[tf(e,"next")]),i("prev",()=>LE(e),[tf(e,"previous")]),i("select",()=>zMe(e),[tf(e,"all")]),ha("label",null,[this.caseField,tf(e,"match case")]),ha("label",null,[this.reField,tf(e,"regexp")]),ha("label",null,[this.wordField,tf(e,"by word")]),...e.state.readOnly?[]:[ha("br"),this.replaceField,i("replace",()=>YG(e),[tf(e,"replace")]),i("replaceAll",()=>NMe(e),[tf(e,"replace all")])],ha("button",{name:"close",onclick:()=>Iie(e),"aria-label":tf(e,"close"),type:"button"},[""])])}commit(){let e=new wie({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:dM.of(e)}))}keydown(e){Xxe(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?LE:PE)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),YG(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(dM)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(P2).top}}function tf(n,e){return n.state.phrase(e)}const ww=30,Sw=/[\s\.,:;?!]/;function CU(n,{from:e,to:t}){let i=n.state.doc.lineAt(e),r=n.state.doc.lineAt(t).to,o=Math.max(i.from,e-ww),s=Math.min(r,t+ww),a=n.state.sliceDoc(o,s);if(o!=i.from){for(let c=0;c<ww;c++)if(!Sw.test(a[c+1])&&Sw.test(a[c])){a=a.slice(c);break}}if(s!=r){for(let c=a.length-1;c>a.length-ww;c--)if(!Sw.test(a[c-1])&&Sw.test(a[c])){a=a.slice(0,c);break}}return pi.announce.of(`${n.state.phrase("current match")}. ${a} ${n.state.phrase("on line")} ${i.number}.`)}const QMe=pi.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),qMe=[bv,KC.low(FMe),QMe];class Tie{constructor(e,t,i,r){this.state=e,this.pos=t,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=GA(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),r=t.text.slice(i-t.from,this.pos-t.from),o=r.search(kie(e,!1));return o<0?null:{from:i+o,to:this.pos,text:r.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function VG(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function YMe(n){let e=Object.create(null),t=Object.create(null);for(let{label:r}of n){e[r[0]]=!0;for(let o=1;o<r.length;o++)t[r[o]]=!0}let i=VG(e)+VG(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function VMe(n){let e=n.map(r=>typeof r=="string"?{label:r}:r),[t,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:YMe(e);return r=>{let o=r.matchBefore(i);return o||r.explicit?{from:o?o.from:r.pos,options:e,validFor:t}:null}}class $G{constructor(e,t,i,r){this.completion=e,this.source=t,this.match=i,this.score=r}}function hC(n){return n.selection.main.from}function kie(n,e){var t;let{source:i}=n,r=e&&i[0]!="^",o=i[i.length-1]!="$";return!r&&!o?n:new RegExp(`${r?"^":""}(?:${i})${o?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const Die=G1.define();function $Me(n,e,t,i){let{main:r}=n.selection,o=t-r.from,s=i-r.from;return{...n.changeByRange(a=>{if(a!=r&&t!=i&&n.sliceDoc(a.from+o,a.from+s)!=n.sliceDoc(t,i))return{range:a};let c=n.toText(e);return{changes:{from:a.from+o,to:i==r.from?a.to:a.from+s,insert:c},range:Mn.cursor(a.from+o+c.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const HG=new WeakMap;function HMe(n){if(!Array.isArray(n))return n;let e=HG.get(n);return e||HG.set(n,e=VMe(n)),e}const UE=jr.define(),fM=jr.define();class ZMe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=cd(e,t),r=Vg(i);this.chars.push(i);let o=e.slice(t,t+r),s=o.toUpperCase();this.folded.push(cd(s==o?o.toLowerCase():s,0)),t+=r}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:r,precise:o,byWord:s}=this;if(t.length==1){let V=cd(e,0),$=Vg(V),Z=$==e.length?0:-100;if(V!=t[0])if(V==i[0])Z+=-200;else return null;return this.ret(Z,[0,$])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let c=t.length,f=0;if(a<0){for(let V=0,$=Math.min(e.length,200);V<$&&f<c;){let Z=cd(e,V);(Z==t[f]||Z==i[f])&&(r[f++]=V),V+=Vg(Z)}if(f<c)return null}let y=0,_=0,E=!1,I=0,P=-1,K=-1,z=/[a-z]/.test(e),Q=!0;for(let V=0,$=Math.min(e.length,200),Z=0;V<$&&_<c;){let ee=cd(e,V);a<0&&(y<c&&ee==t[y]&&(o[y++]=V),I<c&&(ee==t[I]||ee==i[I]?(I==0&&(P=V),K=V+1,I++):I=0));let X,W=ee<255?ee>=48&&ee<=57||ee>=97&&ee<=122?2:ee>=65&&ee<=90?1:0:(X=YL(ee))!=X.toLowerCase()?1:X!=X.toUpperCase()?2:0;(!V||W==1&&z||Z==0&&W!=0)&&(t[_]==ee||i[_]==ee&&(E=!0)?s[_++]=V:s.length&&(Q=!1)),Z=W,V+=Vg(ee)}return _==c&&s[0]==0&&Q?this.result(-100+(E?-200:0),s,e):I==c&&P==0?this.ret(-200-e.length+(K==e.length?0:-100),[0,K]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):I==c?this.ret(-900-e.length,[P,K]):_==c?this.result(-100+(E?-200:0)+-700+(Q?0:-1100),s,e):t.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,t,i){let r=[],o=0;for(let s of t){let a=s+(this.astral?Vg(cd(i,s)):1);o&&r[o-1]==s?r[o-1]=a:(r[o++]=s,r[o++]=a)}return this.ret(e-i.length,r)}}class XMe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Ec=yi.define({combine(n){return Qm(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:JMe,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>ZG(e(i),t(i)),optionClass:(e,t)=>i=>ZG(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function ZG(n,e){return n?e?n+" "+e:n:e}function JMe(n,e,t,i,r,o){let s=n.textDirection==Na.RTL,a=s,c=!1,f="top",y,_,E=e.left-r.left,I=r.right-e.right,P=i.right-i.left,K=i.bottom-i.top;if(a&&E<Math.min(P,I)?a=!1:!a&&I<Math.min(P,E)&&(a=!0),P<=(a?E:I))y=Math.max(r.top,Math.min(t.top,r.bottom-K))-e.top,_=Math.min(400,a?E:I);else{c=!0,_=Math.min(400,(s?e.right:r.right-e.left)-30);let V=r.bottom-e.bottom;V>=K||V>e.top?y=t.bottom-e.top:(f="bottom",y=e.bottom-t.top)}let z=(e.bottom-e.top)/o.offsetHeight,Q=(e.right-e.left)/o.offsetWidth;return{style:`${f}: ${y/z}px; max-width: ${_/Q}px`,class:"cm-completionInfo-"+(c?s?"left-narrow":"right-narrow":a?"left":"right")}}function e5e(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,r,o){let s=document.createElement("span");s.className="cm-completionLabel";let a=t.displayLabel||t.label,c=0;for(let f=0;f<o.length;){let y=o[f++],_=o[f++];y>c&&s.appendChild(document.createTextNode(a.slice(c,y)));let E=s.appendChild(document.createElement("span"));E.appendChild(document.createTextNode(a.slice(y,_))),E.className="cm-completionMatchedText",c=_}return c<a.length&&s.appendChild(document.createTextNode(a.slice(c))),s},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function $8(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let r=Math.floor(e/t);return{from:r*t,to:(r+1)*t}}let i=Math.floor((n-e)/t);return{from:n-(i+1)*t,to:n-i*t}}class t5e{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:c=>this.placeInfo(c),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:o,selected:s}=r.open,a=e.state.facet(Ec);this.optionContent=e5e(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=$8(o.length,s,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",c=>{let{options:f}=e.state.field(t).open;for(let y=c.target,_;y&&y!=this.dom;y=y.parentNode)if(y.nodeName=="LI"&&(_=/-(\d+)$/.exec(y.id))&&+_[1]<f.length){this.applyCompletion(e,f[+_[1]]),c.preventDefault();return}}),this.dom.addEventListener("focusout",c=>{let f=e.state.field(this.stateField,!1);f&&f.tooltip&&e.state.facet(Ec).closeOnBlur&&c.relatedTarget!=e.contentDOM&&e.dispatch({effects:fM.of(null)})}),this.showOptions(o,r.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:o,selected:s,disabled:a}=i.open;(!r.open||r.open.options!=o)&&(this.range=$8(o.length,s,e.state.facet(Ec).maxRenderedOptions),this.showOptions(o,i.id)),this.updateSel(),a!=((t=r.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;(t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=$8(t.options.length,t.selected,this.view.state.facet(Ec).maxRenderedOptions),this.showOptions(t.options,e.id));let i=this.updateSelectedOption(t.selected);if(i){this.destroyInfo();let{completion:r}=t.options[t.selected],{info:o}=r;if(!o)return;let s=typeof o=="string"?document.createTextNode(o):o(r);if(!s)return;"then"in s?s.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a,r)}).catch(a=>xh(this.view.state,a,"completion info")):(this.addInfoPane(s,r),i.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",i.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:o}=e;i.appendChild(r),this.infoDestroy=o||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&(i.removeAttribute("aria-selected"),i.removeAttribute("aria-describedby"));return t&&i5e(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),o=this.space;if(!o){let s=this.dom.ownerDocument.documentElement;o={left:0,top:0,right:s.clientWidth,bottom:s.clientHeight}}return r.top>Math.min(o.bottom,t.bottom)-10||r.bottom<Math.max(o.top,t.top)+10?null:this.view.state.facet(Ec).positionInfo(this.view,t,r,i,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",s=>{s.target==r&&s.preventDefault()});let o=null;for(let s=i.from;s<i.to;s++){let{completion:a,match:c}=e[s],{section:f}=a;if(f){let E=typeof f=="string"?f:f.name;if(E!=o&&(s>i.from||i.from==0))if(o=E,typeof f!="string"&&f.header)r.appendChild(f.header(f));else{let I=r.appendChild(document.createElement("completion-section"));I.textContent=E}}const y=r.appendChild(document.createElement("li"));y.id=t+"-"+s,y.setAttribute("role","option");let _=this.optionClass(a);_&&(y.className=_);for(let E of this.optionContent){let I=E(a,this.view.state,this.view,c);I&&y.appendChild(I)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function n5e(n,e){return t=>new t5e(t,n,e)}function i5e(n,e){let t=n.getBoundingClientRect(),i=e.getBoundingClientRect(),r=t.height/n.offsetHeight;i.top<t.top?n.scrollTop-=(t.top-i.top)/r:i.bottom>t.bottom&&(n.scrollTop+=(i.bottom-t.bottom)/r)}function XG(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function r5e(n,e){let t=[],i=null,r=null,o=y=>{t.push(y);let{section:_}=y.completion;if(_){i||(i=[]);let E=typeof _=="string"?_:_.name;i.some(I=>I.name==E)||i.push(typeof _=="string"?{name:E}:_)}},s=e.facet(Ec);for(let y of n)if(y.hasResult()){let _=y.result.getMatch;if(y.result.filter===!1)for(let E of y.result.options)o(new $G(E,y.source,_?_(E):[],1e9-t.length));else{let E=e.sliceDoc(y.from,y.to),I,P=s.filterStrict?new XMe(E):new ZMe(E);for(let K of y.result.options)if(I=P.match(K.label)){let z=K.displayLabel?_?_(K,I.matched):[]:I.matched,Q=I.score+(K.boost||0);if(o(new $G(K,y.source,z,Q)),typeof K.section=="object"&&K.section.rank==="dynamic"){let{name:V}=K.section;r||(r=Object.create(null)),r[V]=Math.max(Q,r[V]||-1e9)}}}}if(i){let y=Object.create(null),_=0,E=(I,P)=>(I.rank==="dynamic"&&P.rank==="dynamic"?r[P.name]-r[I.name]:0)||(typeof I.rank=="number"?I.rank:1e9)-(typeof P.rank=="number"?P.rank:1e9)||(I.name<P.name?-1:1);for(let I of i.sort(E))_-=1e5,y[I.name]=_;for(let I of t){let{section:P}=I.completion;P&&(I.score+=y[typeof P=="string"?P:P.name])}}let a=[],c=null,f=s.compareCompletions;for(let y of t.sort((_,E)=>E.score-_.score||f(_.completion,E.completion))){let _=y.completion;!c||c.label!=_.label||c.detail!=_.detail||c.type!=null&&_.type!=null&&c.type!=_.type||c.apply!=_.apply||c.boost!=_.boost?a.push(y):XG(y.completion)>XG(c)&&(a[a.length-1]=y),c=y.completion}return a}class wx{constructor(e,t,i,r,o,s){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=r,this.selected=o,this.disabled=s}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new wx(this.options,JG(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,r,o,s){if(r&&!s&&e.some(f=>f.isPending))return r.setDisabled();let a=r5e(e,t);if(!a.length)return r&&e.some(f=>f.isPending)?r.setDisabled():null;let c=t.facet(Ec).selectOnOpen?0:-1;if(r&&r.selected!=c&&r.selected!=-1){let f=r.options[r.selected].completion;for(let y=0;y<a.length;y++)if(a[y].completion==f){c=y;break}}return new wx(a,JG(i,c),{pos:e.reduce((f,y)=>y.hasResult()?Math.min(f,y.from):f,1e8),create:c5e,above:o.aboveCursor},r?r.timestamp:Date.now(),c,!1)}map(e){return new wx(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new wx(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class KE{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new KE(l5e,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(Ec),o=(i.override||t.languageDataAt("autocomplete",hC(t)).map(HMe)).map(c=>(this.active.find(y=>y.source==c)||new yp(c,this.active.some(y=>y.state!=0)?1:0)).update(e,i));o.length==this.active.length&&o.every((c,f)=>c==this.active[f])&&(o=this.active);let s=this.open,a=e.effects.some(c=>c.is(_U));s&&e.docChanged&&(s=s.map(e.changes)),e.selection||o.some(c=>c.hasResult()&&e.changes.touchesRange(c.from,c.to))||!o5e(o,this.active)||a?s=wx.build(o,t,this.id,s,i,a):s&&s.disabled&&!o.some(c=>c.isPending)&&(s=null),!s&&o.every(c=>!c.isPending)&&o.some(c=>c.hasResult())&&(o=o.map(c=>c.hasResult()?new yp(c.source,0):c));for(let c of e.effects)c.is(Pie)&&(s=s&&s.setSelected(c.value,this.id));return o==this.active&&s==this.open?this:new KE(o,this.id,s)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?s5e:a5e}}function o5e(n,e){if(n==e)return!0;for(let t=0,i=0;;){for(;t<n.length&&!n[t].hasResult();)t++;for(;i<e.length&&!e[i].hasResult();)i++;let r=t==n.length,o=i==e.length;if(r||o)return r==o;if(n[t++].result!=e[i++].result)return!1}}const s5e={"aria-autocomplete":"list"},a5e={};function JG(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const l5e=[];function Rie(n,e){if(n.isUserEvent("input.complete")){let i=n.annotation(Die);if(i&&e.activateOnCompletion(i))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class yp{constructor(e,t,i=!1){this.source=e,this.state=t,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let i=Rie(e,t),r=this;(i&8||i&16&&this.touches(e))&&(r=new yp(r.source,0)),i&4&&r.state==0&&(r=new yp(this.source,1)),r=r.updateFor(e,i);for(let o of e.effects)if(o.is(UE))r=new yp(r.source,1,o.value);else if(o.is(fM))r=new yp(r.source,0);else if(o.is(_U))for(let s of o.value)s.source==r.source&&(r=s);return r}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(hC(e.state))}}class Gx extends yp{constructor(e,t,i,r,o,s){super(e,3,t),this.limit=i,this.result=r,this.from=o,this.to=s}hasResult(){return!0}updateFor(e,t){var i;if(!(t&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let o=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),a=hC(e.state);if(a>s||!r||t&2&&(hC(e.startState)==this.from||a<this.limit))return new yp(this.source,t&4?1:0);let c=e.changes.mapPos(this.limit);return u5e(r.validFor,e.state,o,s)?new Gx(this.source,this.explicit,c,r,o,s):r.update&&(r=r.update(r,o,s,new Tie(e.state,a,!1)))?new Gx(this.source,this.explicit,c,r,r.from,(i=r.to)!==null&&i!==void 0?i:hC(e.state)):new yp(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Gx(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new yp(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function u5e(n,e,t,i){if(!n)return!1;let r=e.sliceDoc(t,i);return typeof n=="function"?n(r,t,i,e):kie(n,!0).test(r)}const _U=jr.define({map(n,e){return n.map(t=>t.map(e))}}),Pie=jr.define(),Ad=Hu.define({create(){return KE.start()},update(n,e){return n.update(e)},provide:n=>[cB.from(n,e=>e.tooltip),pi.contentAttributes.from(n,e=>e.attrs)]});function xU(n,e){const t=e.completion.apply||e.completion.label;let i=n.state.field(Ad).active.find(r=>r.source==e.source);return i instanceof Gx?(typeof t=="string"?n.dispatch({...$Me(n.state,t,i.from,i.to),annotations:Die.of(e.completion)}):t(n,e.completion,i.from,i.to),!0):!1}const c5e=n5e(Ad,xU);function Ew(n,e="option"){return t=>{let i=t.state.field(Ad,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(Ec).interactionDelay)return!1;let r=1,o;e=="page"&&(o=mne(t,i.open.tooltip))&&(r=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:s}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(n?1:-1):n?0:s-1;return a<0?a=e=="page"?0:s-1:a>=s&&(a=e=="page"?s-1:0),t.dispatch({effects:Pie.of(a)}),!0}}const A5e=n=>{let e=n.state.field(Ad,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(Ec).interactionDelay?!1:xU(n,e.open.options[e.open.selected])},H8=n=>n.state.field(Ad,!1)?(n.dispatch({effects:UE.of(!0)}),!0):!1,h5e=n=>{let e=n.state.field(Ad,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:fM.of(null)}),!0)};class d5e{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const f5e=50,p5e=1e3,m5e=Hl.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(Ad).active)e.isPending&&this.startQuery(e)}update(n){let e=n.state.field(Ad),t=n.state.facet(Ec);if(!n.selectionSet&&!n.docChanged&&n.startState.field(Ad)==e)return;let i=n.transactions.some(o=>{let s=Rie(o,t);return s&8||(o.selection||o.docChanged)&&!(s&3)});for(let o=0;o<this.running.length;o++){let s=this.running[o];if(i||s.context.abortOnDocChange&&n.docChanged||s.updates.length+n.transactions.length>f5e&&Date.now()-s.time>p5e){for(let a of s.context.abortListeners)try{a()}catch(c){xh(this.view.state,c)}s.context.abortListeners=null,this.running.splice(o--,1)}else s.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(o=>o.effects.some(s=>s.is(UE)))&&(this.pendingStart=!0);let r=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(o=>o.isPending&&!this.running.some(s=>s.active.source==o.source))?setTimeout(()=>this.startUpdate(),r):-1,this.composing!=0)for(let o of n.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(Ad);for(let t of e.active)t.isPending&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ec).updateSyncTime))}startQuery(n){let{state:e}=this.view,t=hC(e),i=new Tie(e,t,n.explicit,this.view),r=new d5e(n,i);this.running.push(r),Promise.resolve(n.source(i)).then(o=>{r.context.aborted||(r.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:fM.of(null)}),xh(this.view.state,o)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ec).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Ec),i=this.view.state.field(Ad);for(let r=0;r<this.running.length;r++){let o=this.running[r];if(o.done===void 0)continue;if(this.running.splice(r--,1),o.done){let a=hC(o.updates.length?o.updates[0].startState:this.view.state),c=Math.min(a,o.done.from+(o.active.explicit?0:1)),f=new Gx(o.active.source,o.active.explicit,c,o.done,o.done.from,(n=o.done.to)!==null&&n!==void 0?n:a);for(let y of o.updates)f=f.update(y,t);if(f.hasResult()){e.push(f);continue}}let s=i.active.find(a=>a.source==o.active.source);if(s&&s.isPending)if(o.done==null){let a=new yp(o.active.source,0);for(let c of o.updates)a=a.update(c,t);a.isPending||e.push(a)}else this.startQuery(s)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:_U.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(Ad,!1);if(e&&e.tooltip&&this.view.state.facet(Ec).closeOnBlur){let t=e.open&&mne(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:fM.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:UE.of(!1)}),20),this.composing=0}}}),g5e=typeof navigator=="object"&&/Win/.test(navigator.platform),y5e=KC.highest(pi.domEventHandlers({keydown(n,e){let t=e.state.field(Ad,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(g5e&&n.altKey)||n.metaKey)return!1;let i=t.open.options[t.open.selected],r=t.active.find(s=>s.source==i.source),o=i.completion.commitCharacters||r.result.commitCharacters;return o&&o.indexOf(n.key)>-1&&xU(e,i),!1}})),v5e=pi.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),pM={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Jb=jr.define({map(n,e){let t=e.mapPos(n,-1,Ch.TrackAfter);return t??void 0}}),MU=new class extends MC{};MU.startSide=1;MU.endSide=-1;const Lie=Hu.define({create(){return Po.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:i=>i>=t.from&&i<=t.to})}for(let t of e.effects)t.is(Jb)&&(n=n.update({add:[MU.range(t.value,t.value+1)]}));return n}});function b5e(){return[_5e,Lie]}const Z8="()[]{}<>";function Uie(n){for(let e=0;e<Z8.length;e+=2)if(Z8.charCodeAt(e)==n)return Z8.charAt(e+1);return YL(n<128?n:n+1)}function Kie(n,e){return n.languageDataAt("closeBrackets",e)[0]||pM}const C5e=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),_5e=pi.inputHandler.of((n,e,t,i)=>{if((C5e?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let r=n.state.selection.main;if(i.length>2||i.length==2&&Vg(cd(i,0))==1||e!=r.from||t!=r.to)return!1;let o=w5e(n.state,i);return o?(n.dispatch(o),!0):!1}),x5e=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=Kie(n,n.selection.main.head).brackets||pM.brackets,r=null,o=n.changeByRange(s=>{if(s.empty){let a=S5e(n.doc,s.head);for(let c of i)if(c==a&&yB(n.doc,s.head)==Uie(cd(c,0)))return{changes:{from:s.head-c.length,to:s.head+c.length},range:Mn.cursor(s.head-c.length)}}return{range:r=s}});return r||e(n.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},M5e=[{key:"Backspace",run:x5e}];function w5e(n,e){let t=Kie(n,n.selection.main.head),i=t.brackets||pM.brackets;for(let r of i){let o=Uie(cd(r,0));if(e==r)return o==r?O5e(n,r,i.indexOf(r+r+r)>-1,t):E5e(n,r,o,t.before||pM.before);if(e==o&&Fie(n,n.selection.main.from))return B5e(n,r,o)}return null}function Fie(n,e){let t=!1;return n.field(Lie).between(0,n.doc.length,i=>{i==e&&(t=!0)}),t}function yB(n,e){let t=n.sliceString(e,e+2);return t.slice(0,Vg(cd(t,0)))}function S5e(n,e){let t=n.sliceString(e-2,e);return Vg(cd(t,0))==t.length?t:t.slice(1)}function E5e(n,e,t,i){let r=null,o=n.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:t,from:s.to}],effects:Jb.of(s.to+e.length),range:Mn.range(s.anchor+e.length,s.head+e.length)};let a=yB(n.doc,s.head);return!a||/\s/.test(a)||i.indexOf(a)>-1?{changes:{insert:e+t,from:s.head},effects:Jb.of(s.head+e.length),range:Mn.cursor(s.head+e.length)}:{range:r=s}});return r?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function B5e(n,e,t){let i=null,r=n.changeByRange(o=>o.empty&&yB(n.doc,o.head)==t?{changes:{from:o.head,to:o.head+t.length,insert:t},range:Mn.cursor(o.head+t.length)}:i={range:o});return i?null:n.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function O5e(n,e,t,i){let r=i.stringPrefixes||pM.stringPrefixes,o=null,s=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:Jb.of(a.to+e.length),range:Mn.range(a.anchor+e.length,a.head+e.length)};let c=a.head,f=yB(n.doc,c),y;if(f==e){if(eW(n,c))return{changes:{insert:e+e,from:c},effects:Jb.of(c+e.length),range:Mn.cursor(c+e.length)};if(Fie(n,c)){let E=t&&n.sliceDoc(c,c+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:c,to:c+E.length,insert:E},range:Mn.cursor(c+E.length)}}}else{if(t&&n.sliceDoc(c-2*e.length,c)==e+e&&(y=tW(n,c-2*e.length,r))>-1&&eW(n,y))return{changes:{insert:e+e+e+e,from:c},effects:Jb.of(c+e.length),range:Mn.cursor(c+e.length)};if(n.charCategorizer(c)(f)!=Va.Word&&tW(n,c,r)>-1&&!I5e(n,c,e,r))return{changes:{insert:e+e,from:c},effects:Jb.of(c+e.length),range:Mn.cursor(c+e.length)}}return{range:o=a}});return o?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function eW(n,e){let t=GA(n).resolveInner(e+1);return t.parent&&t.from==e}function I5e(n,e,t,i){let r=GA(n).resolveInner(e,-1),o=i.reduce((s,a)=>Math.max(s,a.length),0);for(let s=0;s<5;s++){let a=n.sliceDoc(r.from,Math.min(r.to,r.from+t.length+o)),c=a.indexOf(t);if(!c||c>-1&&i.indexOf(a.slice(0,c))>-1){let y=r.firstChild;for(;y&&y.from==r.from&&y.to-y.from>t.length+c;){if(n.sliceDoc(y.to-t.length,y.to)==t)return!1;y=y.firstChild}return!0}let f=r.to==e&&r.parent;if(!f)break;r=f}return!1}function tW(n,e,t){let i=n.charCategorizer(e);if(i(n.sliceDoc(e-1,e))!=Va.Word)return e;for(let r of t){let o=e-r.length;if(n.sliceDoc(o,e)==r&&i(n.sliceDoc(o-1,o))!=Va.Word)return o}return-1}function T5e(n={}){return[y5e,Ad,Ec.of(n),m5e,k5e,v5e]}const zie=[{key:"Ctrl-Space",run:H8},{mac:"Alt-`",run:H8},{mac:"Alt-i",run:H8},{key:"Escape",run:h5e},{key:"ArrowDown",run:Ew(!0)},{key:"ArrowUp",run:Ew(!1)},{key:"PageDown",run:Ew(!0,"page")},{key:"PageUp",run:Ew(!1,"page")},{key:"Enter",run:A5e}],k5e=KC.highest(sU.computeN([Ec],n=>n.facet(Ec).defaultKeymap?[zie]:[]));class nW{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class Wb{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let r=i.facet(r0).markerFilter;r&&(e=r(e,i));let o=e.slice().sort((I,P)=>I.from-P.from||I.to-P.to),s=new K1,a=[],c=0,f=i.doc.iter(),y=0,_=i.doc.length;for(let I=0;;){let P=I==o.length?null:o[I];if(!P&&!a.length)break;let K,z;if(a.length)K=c,z=a.reduce(($,Z)=>Math.min($,Z.to),P&&P.from>K?P.from:1e8);else{if(K=P.from,K>_)break;z=P.to,a.push(P),I++}for(;I<o.length;){let $=o[I];if($.from==K&&($.to>$.from||$.to==K))a.push($),I++,z=Math.min($.to,z);else{z=Math.min($.from,z);break}}z=Math.min(z,_);let Q=!1;if(a.some($=>$.from==K&&($.to==z||z==_))&&(Q=K==z,!Q&&z-K<10)){let $=K-(y+f.value.length);$>0&&(f.next($),y=K);for(let Z=K;;){if(Z>=z){Q=!0;break}if(!f.lineBreak&&y+f.value.length>Z)break;Z=y+f.value.length,y+=f.value.length,f.next()}}let V=Yie(a);if(Q)s.add(K,K,ur.widget({widget:new N5e(V),diagnostics:a.slice()}));else{let $=a.reduce((Z,ee)=>ee.markClass?Z+" "+ee.markClass:Z,"");s.add(K,z,ur.mark({class:"cm-lintRange cm-lintRange-"+V+$,diagnostics:a.slice(),inclusiveEnd:a.some(Z=>Z.to>z)}))}if(c=z,c==_)break;for(let $=0;$<a.length;$++)a[$].to<=c&&a.splice($--,1)}let E=s.finish();return new Wb(E,t,y2(E))}}function y2(n,e=null,t=0){let i=null;return n.between(t,1e9,(r,o,{spec:s})=>{if(!(e&&s.diagnostics.indexOf(e)<0))if(!i)i=new nW(r,o,e||s.diagnostics[0]);else{if(s.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new nW(i.from,o,i.diagnostic)}}),i}function jie(n,e){let t=e.pos,i=e.end||t,r=n.state.facet(r0).hideOn(n,t,i);if(r!=null)return r;let o=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(s=>s.is(vB))||n.changes.touchesRange(o.from,Math.max(o.to,i)))}function Nie(n,e){return n.field(pf,!1)?e:e.concat(jr.appendConfig.of(Hie))}function D5e(n,e){return{effects:Nie(n,[vB.of(e)])}}const vB=jr.define(),wU=jr.define(),Gie=jr.define(),pf=Hu.define({create(){return new Wb(ur.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),i=null,r=n.panel;if(n.selected){let o=e.changes.mapPos(n.selected.from,1);i=y2(t,n.selected.diagnostic,o)||y2(t,null,o)}!t.size&&r&&e.state.facet(r0).autoPanel&&(r=null),n=new Wb(t,r,i)}for(let t of e.effects)if(t.is(vB)){let i=e.state.facet(r0).autoPanel?t.value.length?mM.open:null:n.panel;n=Wb.init(t.value,i,e.state)}else t.is(wU)?n=new Wb(n.diagnostics,t.value?mM.open:null,n.selected):t.is(Gie)&&(n=new Wb(n.diagnostics,n.panel,t.value));return n},provide:n=>[uM.from(n,e=>e.panel),pi.decorations.from(n,e=>e.diagnostics)]}),R5e=ur.mark({class:"cm-lintRange cm-lintRange-active"});function P5e(n,e,t){let{diagnostics:i}=n.state.field(pf),r,o=-1,s=-1;i.between(e-(t<0?1:0),e+(t>0?1:0),(c,f,{spec:y})=>{if(e>=c&&e<=f&&(c==f||(e>c||t>0)&&(e<f||t<0)))return r=y.diagnostics,o=c,s=f,!1});let a=n.state.facet(r0).tooltipFilter;return r&&a&&(r=a(r,n.state)),r?{pos:o,end:s,above:n.state.doc.lineAt(o).to<s,create(){return{dom:Wie(n,r)}}}:null}function Wie(n,e){return ha("ul",{class:"cm-tooltip-lint"},e.map(t=>qie(n,t,!1)))}const L5e=n=>{let e=n.state.field(pf,!1);(!e||!e.panel)&&n.dispatch({effects:Nie(n.state,[wU.of(!0)])});let t=lM(n,mM.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},iW=n=>{let e=n.state.field(pf,!1);return!e||!e.panel?!1:(n.dispatch({effects:wU.of(!1)}),!0)},U5e=n=>{let e=n.state.field(pf,!1);if(!e)return!1;let t=n.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},K5e=[{key:"Mod-Shift-m",run:L5e,preventDefault:!0},{key:"F8",run:U5e}],F5e=Hl.fromClass(class{constructor(n){this.view=n,this.timeout=-1,this.set=!0;let{delay:e}=n.state.facet(r0);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let n=Date.now();if(n<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-n);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(r0);t.length&&z5e(t.map(i=>Promise.resolve(i(this.view))),i=>{this.view.state.doc==e.doc&&this.view.dispatch(D5e(this.view.state,i.reduce((r,o)=>r.concat(o))))},i=>{xh(this.view.state,i)})}}update(n){let e=n.state.facet(r0);(n.docChanged||e!=n.startState.facet(r0)||e.needsRefresh&&e.needsRefresh(n))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function z5e(n,e,t){let i=[],r=-1;for(let o of n)o.then(s=>{i.push(s),clearTimeout(r),i.length==n.length?e(i):r=setTimeout(()=>e(i),200)},t)}const r0=yi.define({combine(n){return{sources:n.map(e=>e.source).filter(e=>e!=null),...Qm(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:rW,tooltipFilter:rW,needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t,hideOn:(e,t)=>e?t?(i,r,o)=>e(i,r,o)||t(i,r,o):e:t,autoPanel:(e,t)=>e||t})}}});function rW(n,e){return n?e?(t,i)=>e(n(t,i),i):n:e}function j5e(n,e={}){return[r0.of({source:n,config:e}),F5e,Hie]}function Qie(n){let e=[];if(n)e:for(let{name:t}of n){for(let i=0;i<t.length;i++){let r=t[i];if(/[a-zA-Z]/.test(r)&&!e.some(o=>o.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function qie(n,e,t){var i;let r=t?Qie(e.actions):[];return ha("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},ha("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((o,s)=>{let a=!1,c=I=>{if(I.preventDefault(),a)return;a=!0;let P=y2(n.state.field(pf).diagnostics,e);P&&o.apply(n,P.from,P.to)},{name:f}=o,y=r[s]?f.indexOf(r[s]):-1,_=y<0?f:[f.slice(0,y),ha("u",f.slice(y,y+1)),f.slice(y+1)],E=o.markClass?" "+o.markClass:"";return ha("button",{type:"button",class:"cm-diagnosticAction"+E,onclick:c,onmousedown:c,"aria-label":` Action: ${f}${y<0?"":` (access key "${r[s]})"`}.`},_)}),e.source&&ha("div",{class:"cm-diagnosticSource"},e.source))}class N5e extends kv{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return ha("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class oW{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=qie(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class mM{constructor(e){this.view=e,this.items=[];let t=r=>{if(r.keyCode==27)iW(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],s=Qie(o.actions);for(let a=0;a<s.length;a++)if(s[a].toUpperCase().charCodeAt(0)==r.keyCode){let c=y2(this.view.state.field(pf).diagnostics,o);c&&o.actions[a].apply(e,c.from,c.to)}}else return;r.preventDefault()},i=r=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(r.target)&&this.moveSelection(o)};this.list=ha("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=ha("div",{class:"cm-panel-lint"},this.list,ha("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>iW(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(pf).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(pf),i=0,r=!1,o=null,s=new Set;for(e.between(0,this.view.state.doc.length,(a,c,{spec:f})=>{for(let y of f.diagnostics){if(s.has(y))continue;s.add(y);let _=-1,E;for(let I=i;I<this.items.length;I++)if(this.items[I].diagnostic==y){_=I;break}_<0?(E=new oW(this.view,y),this.items.splice(i,0,E),r=!0):(E=this.items[_],_>i&&(this.items.splice(i,_-i),r=!0)),t&&E.diagnostic==t.diagnostic?E.dom.hasAttribute("aria-selected")||(E.dom.setAttribute("aria-selected","true"),o=E):E.dom.hasAttribute("aria-selected")&&E.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new oW(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:c})=>{let f=c.height/this.list.offsetHeight;a.top<c.top?this.list.scrollTop-=(c.top-a.top)/f:a.bottom>c.bottom&&(this.list.scrollTop+=(a.bottom-c.bottom)/f)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(pf),i=y2(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Gie.of(i)})}static open(e){return new mM(e)}}function gS(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function Bw(n){return gS(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const G5e=pi.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Bw("#d11")},".cm-lintRange-warning":{backgroundImage:Bw("orange")},".cm-lintRange-info":{backgroundImage:Bw("#999")},".cm-lintRange-hint":{backgroundImage:Bw("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function W5e(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}function Yie(n){let e="hint",t=1;for(let i of n){let r=W5e(i.severity);r>t&&(t=r,e=i.severity)}return e}class Vie extends g0{constructor(e){super(),this.diagnostics=e,this.severity=Yie(e)}toDOM(e){let t=document.createElement("div");t.className="cm-lint-marker cm-lint-marker-"+this.severity;let i=this.diagnostics,r=e.state.facet(bB).tooltipFilter;return r&&(i=r(i,e.state)),i.length&&(t.onmouseover=()=>q5e(e,t,i)),t}}function Q5e(n,e){let t=i=>{let r=e.getBoundingClientRect();if(!(i.clientX>r.left-10&&i.clientX<r.right+10&&i.clientY>r.top-10&&i.clientY<r.bottom+10)){for(let o=i.target;o;o=o.parentNode)if(o.nodeType==1&&o.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",t),n.state.field($ie)&&n.dispatch({effects:SU.of(null)})}};window.addEventListener("mousemove",t)}function q5e(n,e,t){function i(){let s=n.elementAtHeight(e.getBoundingClientRect().top+5-n.documentTop);n.coordsAtPos(s.from)&&n.dispatch({effects:SU.of({pos:s.from,above:!1,clip:!1,create(){return{dom:Wie(n,t),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,Q5e(n,e)}let{hoverTime:r}=n.state.facet(bB),o=setTimeout(i,r);e.onmouseout=()=>{clearTimeout(o),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(o),o=setTimeout(i,r)}}function Y5e(n,e){let t=Object.create(null);for(let r of e){let o=n.lineAt(r.from);(t[o.from]||(t[o.from]=[])).push(r)}let i=[];for(let r in t)i.push(new Vie(t[r]).range(+r));return Po.of(i,!0)}const V5e=yne({class:"cm-gutter-lint",markers:n=>n.state.field(_R),widgetMarker:(n,e,t)=>{let i=[];return n.state.field(_R).between(t.from,t.to,(r,o,s)=>{r>t.from&&r<t.to&&i.push(...s.diagnostics)}),i.length?new Vie(i):null}}),_R=Hu.define({create(){return Po.empty},update(n,e){n=n.map(e.changes);let t=e.state.facet(bB).markerFilter;for(let i of e.effects)if(i.is(vB)){let r=i.value;t&&(r=t(r||[],e.state)),n=Y5e(e.state.doc,r.slice(0))}return n}}),SU=jr.define(),$ie=Hu.define({create(){return null},update(n,e){return n&&e.docChanged&&(n=jie(e,n)?null:{...n,pos:e.changes.mapPos(n.pos)}),e.effects.reduce((t,i)=>i.is(SU)?i.value:t,n)},provide:n=>cB.from(n)}),$5e=pi.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:gS('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:gS('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:gS('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),Hie=[pf,pi.decorations.compute([pf],n=>{let{selected:e,panel:t}=n.field(pf);return!e||!t||e.from==e.to?ur.none:ur.set([R5e.range(e.from,e.to)])}),K2e(P5e,{hideOn:jie}),G5e],bB=yi.define({combine(n){return Qm(n,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function H5e(n={}){return[bB.of(n),_R,V5e,$5e,$ie]}const Z5e=[V2e(),Z2e(),p2e(),f4e(),j3e(),r2e(),u2e(),Ho.allowMultipleSelections.of(!0),E3e(),jne(Q3e,{fallback:!0}),X3e(),b5e(),T5e(),E2e(),I2e(),C2e(),MMe(),sU.of([...M5e,...yMe,...GMe,...x4e,...U3e,...zie,...K5e])];var sW={};class FE{constructor(e,t,i,r,o,s,a,c,f,y=0,_){this.p=e,this.stack=t,this.state=i,this.reducePos=r,this.pos=o,this.score=s,this.buffer=a,this.bufferBase=c,this.curContext=f,this.lookAhead=y,this.parent=_}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let r=e.parser.context;return new FE(e,[],t,i,i,0,[],0,r?new aW(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,r=e&65535,{parser:o}=this.p,s=this.reducePos<this.pos-25;s&&this.setLookAhead(this.pos);let a=o.dynamicPrecedence(r);if(a&&(this.score+=a),i==0){this.pushState(o.getGoto(this.state,r,!0),this.reducePos),r<o.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,s?8:4,!0),this.reduceContext(r,this.reducePos);return}let c=this.stack.length-(i-1)*3-(e&262144?6:0),f=c?this.stack[c-2]:this.p.ranges[0].from,y=this.reducePos-f;y>=2e3&&!(!((t=this.p.parser.nodeSet.types[r])===null||t===void 0)&&t.isAnonymous)&&(f==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=y):this.p.lastBigReductionSize<y&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=f,this.p.lastBigReductionSize=y));let _=c?this.stack[c-1]:0,E=this.bufferBase+this.buffer.length-_;if(r<o.minRepeatTerm||e&131072){let I=o.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,f,I,E+4,!0)}if(e&262144)this.state=this.stack[c];else{let I=this.stack[c-3];this.state=o.getGoto(I,r,!0)}for(;this.stack.length>c;)this.stack.pop();this.reduceContext(r,f)}storeNode(e,t,i,r=4,o=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let s=this,a=this.buffer.length;if(a==0&&s.parent&&(a=s.bufferBase-s.parent.bufferBase,s=s.parent),a>0&&s.buffer[a-4]==0&&s.buffer[a-1]>-1){if(t==i)return;if(s.buffer[a-2]>=t){s.buffer[a-2]=i;return}}}if(!o||this.pos==i)this.buffer.push(e,t,i,r);else{let s=this.buffer.length;if(s>0&&this.buffer[s-4]!=0){let a=!1;for(let c=s;c>0&&this.buffer[c-2]>i;c-=4)if(this.buffer[c-1]>=0){a=!0;break}if(a)for(;s>0&&this.buffer[s-2]>i;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,r>4&&(r-=4)}this.buffer[s]=e,this.buffer[s+1]=t,this.buffer[s+2]=i,this.buffer[s+3]=r}}shift(e,t,i,r){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let o=e,{parser:s}=this.p;(r>this.pos||t<=s.maxNode)&&(this.pos=r,s.stateFlag(o,1)||(this.reducePos=r)),this.pushState(o,i),this.shiftContext(t,i),t<=s.maxNode&&this.buffer.push(t,i,r,4)}else this.pos=r,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,r,4)}apply(e,t,i,r){e&65536?this.reduce(e):this.shift(e,t,i,r)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(i,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new FE(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new X5e(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if((i&65536)==0)return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let r=[];for(let o=0,s;o<t.length;o+=2)(s=t[o+1])!=this.state&&this.p.parser.hasAction(s,e)&&r.push(t[o],s);if(this.stack.length<120)for(let o=0;r.length<8&&o<t.length;o+=2){let s=t[o+1];r.some((a,c)=>c&1&&a==s)||r.push(t[o],s)}t=r}let i=[];for(let r=0;r<t.length&&i.length<4;r+=2){let o=t[r+1];if(o==this.state)continue;let s=this.split();s.pushState(o,this.pos),s.storeNode(0,s.pos,s.pos,4,!0),s.shiftContext(t[r],this.pos),s.reducePos=this.pos,s.score-=200,i.push(s)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((t&65536)==0)return!1;if(!e.validAction(this.state,t)){let i=t>>19,r=t&65535,o=this.stack.length-i*3;if(o<0||e.getGoto(this.stack[o],r,!1)<0){let s=this.findForcedReduction();if(s==null)return!1;t=s}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(r,o)=>{if(!t.includes(r))return t.push(r),e.allActions(r,s=>{if(!(s&393216))if(s&65536){let a=(s>>19)-o;if(a>1){let c=s&65535,f=this.stack.length-a*3;if(f>=0&&e.getGoto(this.stack[f],c,!1)>=0)return a<<19|65536|c}}else{let a=i(s,o+1);if(a!=null)return a}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new aW(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class aW{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class X5e{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class zE{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new zE(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new zE(this.stack,this.pos,this.index)}}function Ow(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let i=0,r=0;i<n.length;){let o=0;for(;;){let s=n.charCodeAt(i++),a=!1;if(s==126){o=65535;break}s>=92&&s--,s>=34&&s--;let c=s-32;if(c>=46&&(c-=46,a=!0),o+=c,a)break;o*=46}t?t[r++]=o:t=new e(o)}return t}class yS{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const lW=new yS;class J5e{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=lW,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,r=this.rangeIndex,o=this.pos+e;for(;o<i.from;){if(!r)return null;let s=this.ranges[--r];o-=i.from-s.to,i=s}for(;t<0?o>i.to:o>=i.to;){if(r==this.ranges.length-1)return null;let s=this.ranges[++r];o+=s.from-i.to,i=s}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,r;if(t>=0&&t<this.chunk.length)i=this.pos+e,r=this.chunk.charCodeAt(t);else{let o=this.resolveOffset(e,1);if(o==null)return-1;if(i=o,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let s=this.rangeIndex,a=this.range;for(;a.to<=i;)a=this.ranges[++s];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-i)),r=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),r}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=lW,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(i+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return i}}class Wx{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;ewe(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}Wx.prototype.contextual=Wx.prototype.fallback=Wx.prototype.extend=!1;Wx.prototype.fallback=Wx.prototype.extend=!1;function ewe(n,e,t,i,r,o){let s=0,a=1<<i,{dialect:c}=t.p.parser;e:for(;(a&n[s])!=0;){let f=n[s+1];for(let I=s+3;I<f;I+=2)if((n[I+1]&a)>0){let P=n[I];if(c.allows(P)&&(e.token.value==-1||e.token.value==P||twe(P,e.token.value,r,o))){e.acceptToken(P);break}}let y=e.next,_=0,E=n[s+2];if(e.next<0&&E>_&&n[f+E*3-3]==65535){s=n[f+E*3-1];continue e}for(;_<E;){let I=_+E>>1,P=f+I+(I<<1),K=n[P],z=n[P+1]||65536;if(y<K)E=I;else if(y>=z)_=I+1;else{s=n[P+2],e.advance();continue e}}break}}function uW(n,e,t){for(let i=e,r;(r=n[i])!=65535;i++)if(r==t)return i-e;return-1}function twe(n,e,t,i){let r=uW(t,i,e);return r<0||uW(t,i,n)<r}const nf=typeof process<"u"&&sW&&/\bparse\b/.test(sW.LOG);let X8=null;function cW(n,e,t){let i=n.cursor(wc.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(n.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:n.length}}class nwe{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?cW(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?cW(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],r=this.index[t];if(r==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=i.children[r],s=this.start[t]+i.positions[r];if(s>e)return this.nextStart=s,null;if(o instanceof wu){if(s==e){if(s<this.safeFrom)return null;let a=s+o.length;if(a<=this.safeTo){let c=o.prop(ho.lookAhead);if(!c||a+c<this.fragment.to)return o}}this.index[t]++,s+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(s),this.index.push(0))}else this.index[t]++,this.nextStart=s+o.length}}}class iwe{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new yS)}getActions(e){let t=0,i=null,{parser:r}=e.p,{tokenizers:o}=r,s=r.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,c=0;for(let f=0;f<o.length;f++){if((1<<f&s)==0)continue;let y=o[f],_=this.tokens[f];if(!(i&&!y.fallback)&&((y.contextual||_.start!=e.pos||_.mask!=s||_.context!=a)&&(this.updateCachedToken(_,y,e),_.mask=s,_.context=a),_.lookAhead>_.end+25&&(c=Math.max(_.lookAhead,c)),_.value!=0)){let E=t;if(_.extended>-1&&(t=this.addActions(e,_.extended,_.end,t)),t=this.addActions(e,_.value,_.end,t),!y.extend&&(i=_,t>E))break}}for(;this.actions.length>t;)this.actions.pop();return c&&e.setLookAhead(c),!i&&e.pos==this.stream.end&&(i=new yS,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new yS,{pos:i,p:r}=e;return t.start=i,t.end=Math.min(i+1,r.stream.end),t.value=i==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,i){let r=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(r,e),i),e.value>-1){let{parser:o}=i.p;for(let s=0;s<o.specialized.length;s++)if(o.specialized[s]==e.value){let a=o.specializers[s](this.stream.read(e.start,e.end),i);if(a>=0&&i.p.parser.dialect.allows(a>>1)){(a&1)==0?e.value=a>>1:e.extended=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,t,i,r){for(let o=0;o<r;o+=3)if(this.actions[o]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=i,r}addActions(e,t,i,r){let{state:o}=e,{parser:s}=e.p,{data:a}=s;for(let c=0;c<2;c++)for(let f=s.stateSlot(o,c?2:1);;f+=3){if(a[f]==65535)if(a[f+1]==1)f=x1(a,f+2);else{r==0&&a[f+1]==2&&(r=this.putAction(x1(a,f+2),t,i,r));break}a[f]==t&&(r=this.putAction(x1(a,f+1),t,i,r))}return r}}class rwe{constructor(e,t,i,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new J5e(t,r),this.tokens=new iwe(e,this.stream),this.topTerm=e.top[1];let{from:o}=r[0];this.stacks=[FE.start(this,e.top[0],o)],this.fragments=i.length&&this.stream.end-o>e.bufferLength*4?new nwe(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],r,o;if(this.bigReductionCount>300&&e.length==1){let[s]=e;for(;s.forceReduce()&&s.stack.length&&s.stack[s.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let s=0;s<e.length;s++){let a=e[s];for(;;){if(this.tokens.mainToken=null,a.pos>t)i.push(a);else{if(this.advanceStack(a,i,e))continue;{r||(r=[],o=[]),r.push(a);let c=this.tokens.getMainToken(a);o.push(c.value,c.end)}}break}}if(!i.length){let s=r&&swe(r);if(s)return nf&&console.log("Finish with "+this.stackID(s)),this.stackToTree(s);if(this.parser.strict)throw nf&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&r){let s=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,o,i);if(s)return nf&&console.log("Force-finish "+this.stackID(s)),this.stackToTree(s.forceAll())}if(this.recovering){let s=this.recovering==1?1:this.recovering*3;if(i.length>s)for(i.sort((a,c)=>c.score-a.score);i.length>s;)i.pop();i.some(a=>a.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let s=0;s<i.length-1;s++){let a=i[s];for(let c=s+1;c<i.length;c++){let f=i[c];if(a.sameState(f)||a.buffer.length>500&&f.buffer.length>500)if((a.score-f.score||a.buffer.length-f.buffer.length)>0)i.splice(c--,1);else{i.splice(s--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let s=1;s<i.length;s++)i[s].pos<this.minStackPos&&(this.minStackPos=i[s].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let r=e.pos,{parser:o}=this,s=nf?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let f=e.curContext&&e.curContext.tracker.strict,y=f?e.curContext.hash:0;for(let _=this.fragments.nodeAt(r);_;){let E=this.parser.nodeSet.types[_.type.id]==_.type?o.getGoto(e.state,_.type.id):-1;if(E>-1&&_.length&&(!f||(_.prop(ho.contextHash)||0)==y))return e.useNode(_,E),nf&&console.log(s+this.stackID(e)+` (via reuse of ${o.getName(_.type.id)})`),!0;if(!(_ instanceof wu)||_.children.length==0||_.positions[0]>0)break;let I=_.children[0];if(I instanceof wu&&_.positions[0]==0)_=I;else break}}let a=o.stateSlot(e.state,4);if(a>0)return e.reduce(a),nf&&console.log(s+this.stackID(e)+` (via always-reduce ${o.getName(a&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let c=this.tokens.getActions(e);for(let f=0;f<c.length;){let y=c[f++],_=c[f++],E=c[f++],I=f==c.length||!i,P=I?e:e.split(),K=this.tokens.mainToken;if(P.apply(y,_,K?K.start:P.pos,E),nf&&console.log(s+this.stackID(P)+` (via ${(y&65536)==0?"shift":`reduce of ${o.getName(y&65535)}`} for ${o.getName(_)} @ ${r}${P==e?"":", split"})`),I)return!0;P.pos>r?t.push(P):i.push(P)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return AW(e,t),!0}}runRecovery(e,t,i){let r=null,o=!1;for(let s=0;s<e.length;s++){let a=e[s],c=t[s<<1],f=t[(s<<1)+1],y=nf?this.stackID(a)+" -> ":"";if(a.deadEnd&&(o||(o=!0,a.restart(),nf&&console.log(y+this.stackID(a)+" (restarted)"),this.advanceFully(a,i))))continue;let _=a.split(),E=y;for(let I=0;_.forceReduce()&&I<10&&(nf&&console.log(E+this.stackID(_)+" (via force-reduce)"),!this.advanceFully(_,i));I++)nf&&(E=this.stackID(_)+" -> ");for(let I of a.recoverByInsert(c))nf&&console.log(y+this.stackID(I)+" (via recover-insert)"),this.advanceFully(I,i);this.stream.end>a.pos?(f==a.pos&&(f++,c=0),a.recoverByDelete(c,f),nf&&console.log(y+this.stackID(a)+` (via recover-delete ${this.parser.getName(c)})`),AW(a,i)):(!r||r.score<a.score)&&(r=a)}return r}stackToTree(e){return e.close(),wu.build({buffer:zE.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(X8||(X8=new WeakMap)).get(e);return t||X8.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function AW(n,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==n.pos&&i.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class owe{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class jE extends wne{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let a=0;a<e.repeatNodeCount;a++)t.push("");let i=Object.keys(e.topRules).map(a=>e.topRules[a][1]),r=[];for(let a=0;a<t.length;a++)r.push([]);function o(a,c,f){r[a].push([c,c.deserialize(String(f))])}if(e.nodeProps)for(let a of e.nodeProps){let c=a[0];typeof c=="string"&&(c=ho[c]);for(let f=1;f<a.length;){let y=a[f++];if(y>=0)o(y,c,a[f++]);else{let _=a[f+-y];for(let E=-y;E>0;E--)o(a[f++],c,_);f++}}}this.nodeSet=new lU(t.map((a,c)=>gd.define({name:c>=this.minRepeatTerm?void 0:a,id:c,props:r[c],top:i.indexOf(c)>-1,error:c==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(c)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=Cne;let s=Ow(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(hW),this.states=Ow(e.states,Uint32Array),this.data=Ow(e.stateData),this.goto=Ow(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new Wx(s,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let r=new rwe(this,e,t,i);for(let o of this.wrappers)r=o(r,e,t,i);return r}getGoto(e,t,i=!1){let r=this.goto;if(t>=r[0])return-1;for(let o=r[t+1];;){let s=r[o++],a=s&1,c=r[o++];if(a&&i)return c;for(let f=o+(s>>1);o<f;o++)if(r[o]==e)return c;if(a)return-1}}hasAction(e,t){let i=this.data;for(let r=0;r<2;r++)for(let o=this.stateSlot(e,r?2:1),s;;o+=3){if((s=i[o])==65535)if(i[o+1]==1)s=i[o=x1(i,o+2)];else{if(i[o+1]==2)return x1(i,o+2);break}if(s==t||s==0)return x1(i,o+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,i=>i==t?!0:null)}allActions(e,t){let i=this.stateSlot(e,4),r=i?t(i):void 0;for(let o=this.stateSlot(e,1);r==null;o+=3){if(this.data[o]==65535)if(this.data[o+1]==1)o=x1(this.data,o+2);else break;r=t(x1(this.data,o+1))}return r}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=x1(this.data,i+2);else break;if((this.data[i+2]&1)==0){let r=this.data[i+1];t.some((o,s)=>s&1&&o==r)||t.push(this.data[i],r)}}return t}configure(e){let t=Object.assign(Object.create(jE.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let r=e.tokenizers.find(o=>o.from==i);return r?r.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,r)=>{let o=e.specializers.find(a=>a.from==i.external);if(!o)return i;let s=Object.assign(Object.assign({},i),{external:o.to});return t.specializers[r]=hW(s),s})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let o of e.split(" ")){let s=t.indexOf(o);s>=0&&(i[s]=!0)}let r=null;for(let o=0;o<t.length;o++)if(!i[o])for(let s=this.dialects[t[o]],a;(a=this.data[s++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[a]=1;return new owe(e,i,r)}static deserialize(e){return new jE(e)}}function x1(n,e){return n[e]|n[e+1]<<16}function swe(n){let e=null;for(let t of n){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function hW(n){if(n.external){let e=n.extend?1:0;return(t,i)=>n.external(t,i)<<1|e}return n.get}const awe=Sne({String:cn.string,Number:cn.number,"True False":cn.bool,PropertyName:cn.propertyName,Null:cn.null,", :":cn.separator,"[ ]":cn.squareBracket,"{ }":cn.brace}),lwe=jE.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#ClOOQO'#Cr'#CrQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CtOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59W,59WO!iQPO,59WOVQPO,59QOqQPO'#CmO!nQPO,59`OOQO1G.k1G.kOVQPO'#CnO!vQPO,59aOOQO1G.r1G.rOOQO1G.l1G.lOOQO,59X,59XOOQO-E6k-E6kOOQO,59Y,59YOOQO-E6l-E6l",stateData:"#O~OeOS~OQSORSOSSOTSOWQO_ROgPO~OVXOgUO~O^[O~PVO[^O~O]_OVhX~OVaO~O]bO^iX~O^dO~O]_OVha~O]bO^ia~O",goto:"!kjPPPPPPkPPkqwPPPPk{!RPPP!XP!e!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:" JsonText True False Null Number String } { Object Property PropertyName : , ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",14,"["],["closedBy",8,"}",15,"]"]],propSources:[awe],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oe~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Og~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zO]~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yO[~~'OO_~~'TO^~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),uwe=()=>n=>{try{JSON.parse(n.state.doc.toString())}catch(e){if(!(e instanceof SyntaxError))throw e;const t=cwe(e,n.state.doc);return[{from:t,message:e.message,severity:"error",to:t}]}return[]};function cwe(n,e){let t;return(t=n.message.match(/at position (\d+)/))?Math.min(+t[1],e.length):(t=n.message.match(/at line (\d+) column (\d+)/))?Math.min(e.line(+t[1]).from+ +t[2]-1,e.length):0}const Awe=SE.define({name:"json",parser:lwe.configure({props:[Ine.add({Object:IG({except:/^\s*\}/}),Array:IG({except:/^\s*\]/})}),kne.add({"Object Array":O3e})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function hwe(){return new g3e(Awe)}const dwe="#e5c07b",dW="#e06c75",fwe="#56b6c2",pwe="#ffffff",vS="#abb2bf",xR="#7d8799",mwe="#61afef",gwe="#98c379",fW="#d19a66",ywe="#c678dd",vwe="#21252b",pW="#2c313a",mW="#282c34",J8="#353a42",bwe="#3E4451",gW="#528bff",Cwe=pi.theme({"&":{color:vS,backgroundColor:mW},".cm-content":{caretColor:gW},".cm-cursor, .cm-dropCursor":{borderLeftColor:gW},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:bwe},".cm-panels":{backgroundColor:vwe,color:vS},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:mW,color:xR,border:"none"},".cm-activeLineGutter":{backgroundColor:pW},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:J8},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:J8,borderBottomColor:J8},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:pW,color:vS}}},{dark:!0}),_we=f5.define([{tag:cn.keyword,color:ywe},{tag:[cn.name,cn.deleted,cn.character,cn.propertyName,cn.macroName],color:dW},{tag:[cn.function(cn.variableName),cn.labelName],color:mwe},{tag:[cn.color,cn.constant(cn.name),cn.standard(cn.name)],color:fW},{tag:[cn.definition(cn.name),cn.separator],color:vS},{tag:[cn.typeName,cn.className,cn.number,cn.changed,cn.annotation,cn.modifier,cn.self,cn.namespace],color:dwe},{tag:[cn.operator,cn.operatorKeyword,cn.url,cn.escape,cn.regexp,cn.link,cn.special(cn.string)],color:fwe},{tag:[cn.meta,cn.comment],color:xR},{tag:cn.strong,fontWeight:"bold"},{tag:cn.emphasis,fontStyle:"italic"},{tag:cn.strikethrough,textDecoration:"line-through"},{tag:cn.link,color:xR,textDecoration:"underline"},{tag:cn.heading,fontWeight:"bold",color:dW},{tag:[cn.atom,cn.bool,cn.special(cn.variableName)],color:fW},{tag:[cn.processingInstruction,cn.string,cn.inserted],color:gwe},{tag:cn.invalid,color:pwe}]),xwe=[Cwe,jne(_we)];var bS={exports:{}},Mwe=bS.exports,yW;function wwe(){return yW||(yW=1,(function(n,e){(function(t,i){n.exports=i()})(Mwe,(function(){var t=typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function i(Oe,we){return we={exports:{}},Oe(we,we.exports),we.exports}var r=i(function(Oe){function we(){var Ye=0,ft=1,dt=2,gt=3,Lt=4,Tt=5,Zt=6,Fn=7,Ln=8,fi=9,Rn=10,Dn=11,wn=12,qn=13,En=14,wt=15,be=16,re=17,ce=0,Pe=1,tt=2,xt=3,It=4;function _n(C,Ke){return 55296<=C.charCodeAt(Ke)&&C.charCodeAt(Ke)<=56319&&56320<=C.charCodeAt(Ke+1)&&C.charCodeAt(Ke+1)<=57343}function Xe(C,Ke){Ke===void 0&&(Ke=0);var $e=C.charCodeAt(Ke);if(55296<=$e&&$e<=56319&&Ke<C.length-1){var rt=$e,Re=C.charCodeAt(Ke+1);return 56320<=Re&&Re<=57343?(rt-55296)*1024+(Re-56320)+65536:rt}if(56320<=$e&&$e<=57343&&Ke>=1){var rt=C.charCodeAt(Ke-1),Re=$e;return 55296<=rt&&rt<=56319?(rt-55296)*1024+(Re-56320)+65536:Re}return $e}function ae(C,Ke,$e){var rt=[C].concat(Ke).concat([$e]),Re=rt[rt.length-2],at=$e,St=rt.lastIndexOf(En);if(St>1&&rt.slice(1,St).every(function(sn){return sn==gt})&&[gt,qn,re].indexOf(C)==-1)return tt;var Bt=rt.lastIndexOf(Lt);if(Bt>0&&rt.slice(1,Bt).every(function(sn){return sn==Lt})&&[wn,Lt].indexOf(Re)==-1)return rt.filter(function(sn){return sn==Lt}).length%2==1?xt:It;if(Re==Ye&&at==ft)return ce;if(Re==dt||Re==Ye||Re==ft)return at==En&&Ke.every(function(sn){return sn==gt})?tt:Pe;if(at==dt||at==Ye||at==ft)return Pe;if(Re==Zt&&(at==Zt||at==Fn||at==fi||at==Rn))return ce;if((Re==fi||Re==Fn)&&(at==Fn||at==Ln))return ce;if((Re==Rn||Re==Ln)&&at==Ln)return ce;if(at==gt||at==wt)return ce;if(at==Tt)return ce;if(Re==wn)return ce;var kt=rt.indexOf(gt)!=-1?rt.lastIndexOf(gt)-1:rt.length-2;return[qn,re].indexOf(rt[kt])!=-1&&rt.slice(kt+1,-1).every(function(sn){return sn==gt})&&at==En||Re==wt&&[be,re].indexOf(at)!=-1?ce:Ke.indexOf(Lt)!=-1?tt:Re==Lt&&at==Lt?ce:Pe}this.nextBreak=function(C,Ke){if(Ke===void 0&&(Ke=0),Ke<0)return 0;if(Ke>=C.length-1)return C.length;for(var $e=he(Xe(C,Ke)),rt=[],Re=Ke+1;Re<C.length;Re++)if(!_n(C,Re-1)){var at=he(Xe(C,Re));if(ae($e,rt,at))return Re;rt.push(at)}return C.length},this.splitGraphemes=function(C){for(var Ke=[],$e=0,rt;(rt=this.nextBreak(C,$e))<C.length;)Ke.push(C.slice($e,rt)),$e=rt;return $e<C.length&&Ke.push(C.slice($e)),Ke},this.iterateGraphemes=function(C){var Ke=0,$e={next:(function(){var rt,Re;return(Re=this.nextBreak(C,Ke))<C.length?(rt=C.slice(Ke,Re),Ke=Re,{value:rt,done:!1}):Ke<C.length?(rt=C.slice(Ke),Ke=C.length,{value:rt,done:!1}):{value:void 0,done:!0}}).bind(this)};return typeof Symbol<"u"&&Symbol.iterator&&($e[Symbol.iterator]=function(){return $e}),$e},this.countGraphemes=function(C){for(var Ke=0,$e=0,rt;(rt=this.nextBreak(C,$e))<C.length;)$e=rt,Ke++;return $e<C.length&&Ke++,Ke};function he(C){return 1536<=C&&C<=1541||C==1757||C==1807||C==2274||C==3406||C==69821||70082<=C&&C<=70083||C==72250||72326<=C&&C<=72329||C==73030?wn:C==13?Ye:C==10?ft:0<=C&&C<=9||11<=C&&C<=12||14<=C&&C<=31||127<=C&&C<=159||C==173||C==1564||C==6158||C==8203||8206<=C&&C<=8207||C==8232||C==8233||8234<=C&&C<=8238||8288<=C&&C<=8292||C==8293||8294<=C&&C<=8303||55296<=C&&C<=57343||C==65279||65520<=C&&C<=65528||65529<=C&&C<=65531||113824<=C&&C<=113827||119155<=C&&C<=119162||C==917504||C==917505||917506<=C&&C<=917535||917632<=C&&C<=917759||918e3<=C&&C<=921599?dt:768<=C&&C<=879||1155<=C&&C<=1159||1160<=C&&C<=1161||1425<=C&&C<=1469||C==1471||1473<=C&&C<=1474||1476<=C&&C<=1477||C==1479||1552<=C&&C<=1562||1611<=C&&C<=1631||C==1648||1750<=C&&C<=1756||1759<=C&&C<=1764||1767<=C&&C<=1768||1770<=C&&C<=1773||C==1809||1840<=C&&C<=1866||1958<=C&&C<=1968||2027<=C&&C<=2035||2070<=C&&C<=2073||2075<=C&&C<=2083||2085<=C&&C<=2087||2089<=C&&C<=2093||2137<=C&&C<=2139||2260<=C&&C<=2273||2275<=C&&C<=2306||C==2362||C==2364||2369<=C&&C<=2376||C==2381||2385<=C&&C<=2391||2402<=C&&C<=2403||C==2433||C==2492||C==2494||2497<=C&&C<=2500||C==2509||C==2519||2530<=C&&C<=2531||2561<=C&&C<=2562||C==2620||2625<=C&&C<=2626||2631<=C&&C<=2632||2635<=C&&C<=2637||C==2641||2672<=C&&C<=2673||C==2677||2689<=C&&C<=2690||C==2748||2753<=C&&C<=2757||2759<=C&&C<=2760||C==2765||2786<=C&&C<=2787||2810<=C&&C<=2815||C==2817||C==2876||C==2878||C==2879||2881<=C&&C<=2884||C==2893||C==2902||C==2903||2914<=C&&C<=2915||C==2946||C==3006||C==3008||C==3021||C==3031||C==3072||3134<=C&&C<=3136||3142<=C&&C<=3144||3146<=C&&C<=3149||3157<=C&&C<=3158||3170<=C&&C<=3171||C==3201||C==3260||C==3263||C==3266||C==3270||3276<=C&&C<=3277||3285<=C&&C<=3286||3298<=C&&C<=3299||3328<=C&&C<=3329||3387<=C&&C<=3388||C==3390||3393<=C&&C<=3396||C==3405||C==3415||3426<=C&&C<=3427||C==3530||C==3535||3538<=C&&C<=3540||C==3542||C==3551||C==3633||3636<=C&&C<=3642||3655<=C&&C<=3662||C==3761||3764<=C&&C<=3769||3771<=C&&C<=3772||3784<=C&&C<=3789||3864<=C&&C<=3865||C==3893||C==3895||C==3897||3953<=C&&C<=3966||3968<=C&&C<=3972||3974<=C&&C<=3975||3981<=C&&C<=3991||3993<=C&&C<=4028||C==4038||4141<=C&&C<=4144||4146<=C&&C<=4151||4153<=C&&C<=4154||4157<=C&&C<=4158||4184<=C&&C<=4185||4190<=C&&C<=4192||4209<=C&&C<=4212||C==4226||4229<=C&&C<=4230||C==4237||C==4253||4957<=C&&C<=4959||5906<=C&&C<=5908||5938<=C&&C<=5940||5970<=C&&C<=5971||6002<=C&&C<=6003||6068<=C&&C<=6069||6071<=C&&C<=6077||C==6086||6089<=C&&C<=6099||C==6109||6155<=C&&C<=6157||6277<=C&&C<=6278||C==6313||6432<=C&&C<=6434||6439<=C&&C<=6440||C==6450||6457<=C&&C<=6459||6679<=C&&C<=6680||C==6683||C==6742||6744<=C&&C<=6750||C==6752||C==6754||6757<=C&&C<=6764||6771<=C&&C<=6780||C==6783||6832<=C&&C<=6845||C==6846||6912<=C&&C<=6915||C==6964||6966<=C&&C<=6970||C==6972||C==6978||7019<=C&&C<=7027||7040<=C&&C<=7041||7074<=C&&C<=7077||7080<=C&&C<=7081||7083<=C&&C<=7085||C==7142||7144<=C&&C<=7145||C==7149||7151<=C&&C<=7153||7212<=C&&C<=7219||7222<=C&&C<=7223||7376<=C&&C<=7378||7380<=C&&C<=7392||7394<=C&&C<=7400||C==7405||C==7412||7416<=C&&C<=7417||7616<=C&&C<=7673||7675<=C&&C<=7679||C==8204||8400<=C&&C<=8412||8413<=C&&C<=8416||C==8417||8418<=C&&C<=8420||8421<=C&&C<=8432||11503<=C&&C<=11505||C==11647||11744<=C&&C<=11775||12330<=C&&C<=12333||12334<=C&&C<=12335||12441<=C&&C<=12442||C==42607||42608<=C&&C<=42610||42612<=C&&C<=42621||42654<=C&&C<=42655||42736<=C&&C<=42737||C==43010||C==43014||C==43019||43045<=C&&C<=43046||43204<=C&&C<=43205||43232<=C&&C<=43249||43302<=C&&C<=43309||43335<=C&&C<=43345||43392<=C&&C<=43394||C==43443||43446<=C&&C<=43449||C==43452||C==43493||43561<=C&&C<=43566||43569<=C&&C<=43570||43573<=C&&C<=43574||C==43587||C==43596||C==43644||C==43696||43698<=C&&C<=43700||43703<=C&&C<=43704||43710<=C&&C<=43711||C==43713||43756<=C&&C<=43757||C==43766||C==44005||C==44008||C==44013||C==64286||65024<=C&&C<=65039||65056<=C&&C<=65071||65438<=C&&C<=65439||C==66045||C==66272||66422<=C&&C<=66426||68097<=C&&C<=68099||68101<=C&&C<=68102||68108<=C&&C<=68111||68152<=C&&C<=68154||C==68159||68325<=C&&C<=68326||C==69633||69688<=C&&C<=69702||69759<=C&&C<=69761||69811<=C&&C<=69814||69817<=C&&C<=69818||69888<=C&&C<=69890||69927<=C&&C<=69931||69933<=C&&C<=69940||C==70003||70016<=C&&C<=70017||70070<=C&&C<=70078||70090<=C&&C<=70092||70191<=C&&C<=70193||C==70196||70198<=C&&C<=70199||C==70206||C==70367||70371<=C&&C<=70378||70400<=C&&C<=70401||C==70460||C==70462||C==70464||C==70487||70502<=C&&C<=70508||70512<=C&&C<=70516||70712<=C&&C<=70719||70722<=C&&C<=70724||C==70726||C==70832||70835<=C&&C<=70840||C==70842||C==70845||70847<=C&&C<=70848||70850<=C&&C<=70851||C==71087||71090<=C&&C<=71093||71100<=C&&C<=71101||71103<=C&&C<=71104||71132<=C&&C<=71133||71219<=C&&C<=71226||C==71229||71231<=C&&C<=71232||C==71339||C==71341||71344<=C&&C<=71349||C==71351||71453<=C&&C<=71455||71458<=C&&C<=71461||71463<=C&&C<=71467||72193<=C&&C<=72198||72201<=C&&C<=72202||72243<=C&&C<=72248||72251<=C&&C<=72254||C==72263||72273<=C&&C<=72278||72281<=C&&C<=72283||72330<=C&&C<=72342||72344<=C&&C<=72345||72752<=C&&C<=72758||72760<=C&&C<=72765||C==72767||72850<=C&&C<=72871||72874<=C&&C<=72880||72882<=C&&C<=72883||72885<=C&&C<=72886||73009<=C&&C<=73014||C==73018||73020<=C&&C<=73021||73023<=C&&C<=73029||C==73031||92912<=C&&C<=92916||92976<=C&&C<=92982||94095<=C&&C<=94098||113821<=C&&C<=113822||C==119141||119143<=C&&C<=119145||119150<=C&&C<=119154||119163<=C&&C<=119170||119173<=C&&C<=119179||119210<=C&&C<=119213||119362<=C&&C<=119364||121344<=C&&C<=121398||121403<=C&&C<=121452||C==121461||C==121476||121499<=C&&C<=121503||121505<=C&&C<=121519||122880<=C&&C<=122886||122888<=C&&C<=122904||122907<=C&&C<=122913||122915<=C&&C<=122916||122918<=C&&C<=122922||125136<=C&&C<=125142||125252<=C&&C<=125258||917536<=C&&C<=917631||917760<=C&&C<=917999?gt:127462<=C&&C<=127487?Lt:C==2307||C==2363||2366<=C&&C<=2368||2377<=C&&C<=2380||2382<=C&&C<=2383||2434<=C&&C<=2435||2495<=C&&C<=2496||2503<=C&&C<=2504||2507<=C&&C<=2508||C==2563||2622<=C&&C<=2624||C==2691||2750<=C&&C<=2752||C==2761||2763<=C&&C<=2764||2818<=C&&C<=2819||C==2880||2887<=C&&C<=2888||2891<=C&&C<=2892||C==3007||3009<=C&&C<=3010||3014<=C&&C<=3016||3018<=C&&C<=3020||3073<=C&&C<=3075||3137<=C&&C<=3140||3202<=C&&C<=3203||C==3262||3264<=C&&C<=3265||3267<=C&&C<=3268||3271<=C&&C<=3272||3274<=C&&C<=3275||3330<=C&&C<=3331||3391<=C&&C<=3392||3398<=C&&C<=3400||3402<=C&&C<=3404||3458<=C&&C<=3459||3536<=C&&C<=3537||3544<=C&&C<=3550||3570<=C&&C<=3571||C==3635||C==3763||3902<=C&&C<=3903||C==3967||C==4145||4155<=C&&C<=4156||4182<=C&&C<=4183||C==4228||C==6070||6078<=C&&C<=6085||6087<=C&&C<=6088||6435<=C&&C<=6438||6441<=C&&C<=6443||6448<=C&&C<=6449||6451<=C&&C<=6456||6681<=C&&C<=6682||C==6741||C==6743||6765<=C&&C<=6770||C==6916||C==6965||C==6971||6973<=C&&C<=6977||6979<=C&&C<=6980||C==7042||C==7073||7078<=C&&C<=7079||C==7082||C==7143||7146<=C&&C<=7148||C==7150||7154<=C&&C<=7155||7204<=C&&C<=7211||7220<=C&&C<=7221||C==7393||7410<=C&&C<=7411||C==7415||43043<=C&&C<=43044||C==43047||43136<=C&&C<=43137||43188<=C&&C<=43203||43346<=C&&C<=43347||C==43395||43444<=C&&C<=43445||43450<=C&&C<=43451||43453<=C&&C<=43456||43567<=C&&C<=43568||43571<=C&&C<=43572||C==43597||C==43755||43758<=C&&C<=43759||C==43765||44003<=C&&C<=44004||44006<=C&&C<=44007||44009<=C&&C<=44010||C==44012||C==69632||C==69634||C==69762||69808<=C&&C<=69810||69815<=C&&C<=69816||C==69932||C==70018||70067<=C&&C<=70069||70079<=C&&C<=70080||70188<=C&&C<=70190||70194<=C&&C<=70195||C==70197||70368<=C&&C<=70370||70402<=C&&C<=70403||C==70463||70465<=C&&C<=70468||70471<=C&&C<=70472||70475<=C&&C<=70477||70498<=C&&C<=70499||70709<=C&&C<=70711||70720<=C&&C<=70721||C==70725||70833<=C&&C<=70834||C==70841||70843<=C&&C<=70844||C==70846||C==70849||71088<=C&&C<=71089||71096<=C&&C<=71099||C==71102||71216<=C&&C<=71218||71227<=C&&C<=71228||C==71230||C==71340||71342<=C&&C<=71343||C==71350||71456<=C&&C<=71457||C==71462||72199<=C&&C<=72200||C==72249||72279<=C&&C<=72280||C==72343||C==72751||C==72766||C==72873||C==72881||C==72884||94033<=C&&C<=94078||C==119142||C==119149?Tt:4352<=C&&C<=4447||43360<=C&&C<=43388?Zt:4448<=C&&C<=4519||55216<=C&&C<=55238?Fn:4520<=C&&C<=4607||55243<=C&&C<=55291?Ln:C==44032||C==44060||C==44088||C==44116||C==44144||C==44172||C==44200||C==44228||C==44256||C==44284||C==44312||C==44340||C==44368||C==44396||C==44424||C==44452||C==44480||C==44508||C==44536||C==44564||C==44592||C==44620||C==44648||C==44676||C==44704||C==44732||C==44760||C==44788||C==44816||C==44844||C==44872||C==44900||C==44928||C==44956||C==44984||C==45012||C==45040||C==45068||C==45096||C==45124||C==45152||C==45180||C==45208||C==45236||C==45264||C==45292||C==45320||C==45348||C==45376||C==45404||C==45432||C==45460||C==45488||C==45516||C==45544||C==45572||C==45600||C==45628||C==45656||C==45684||C==45712||C==45740||C==45768||C==45796||C==45824||C==45852||C==45880||C==45908||C==45936||C==45964||C==45992||C==46020||C==46048||C==46076||C==46104||C==46132||C==46160||C==46188||C==46216||C==46244||C==46272||C==46300||C==46328||C==46356||C==46384||C==46412||C==46440||C==46468||C==46496||C==46524||C==46552||C==46580||C==46608||C==46636||C==46664||C==46692||C==46720||C==46748||C==46776||C==46804||C==46832||C==46860||C==46888||C==46916||C==46944||C==46972||C==47e3||C==47028||C==47056||C==47084||C==47112||C==47140||C==47168||C==47196||C==47224||C==47252||C==47280||C==47308||C==47336||C==47364||C==47392||C==47420||C==47448||C==47476||C==47504||C==47532||C==47560||C==47588||C==47616||C==47644||C==47672||C==47700||C==47728||C==47756||C==47784||C==47812||C==47840||C==47868||C==47896||C==47924||C==47952||C==47980||C==48008||C==48036||C==48064||C==48092||C==48120||C==48148||C==48176||C==48204||C==48232||C==48260||C==48288||C==48316||C==48344||C==48372||C==48400||C==48428||C==48456||C==48484||C==48512||C==48540||C==48568||C==48596||C==48624||C==48652||C==48680||C==48708||C==48736||C==48764||C==48792||C==48820||C==48848||C==48876||C==48904||C==48932||C==48960||C==48988||C==49016||C==49044||C==49072||C==49100||C==49128||C==49156||C==49184||C==49212||C==49240||C==49268||C==49296||C==49324||C==49352||C==49380||C==49408||C==49436||C==49464||C==49492||C==49520||C==49548||C==49576||C==49604||C==49632||C==49660||C==49688||C==49716||C==49744||C==49772||C==49800||C==49828||C==49856||C==49884||C==49912||C==49940||C==49968||C==49996||C==50024||C==50052||C==50080||C==50108||C==50136||C==50164||C==50192||C==50220||C==50248||C==50276||C==50304||C==50332||C==50360||C==50388||C==50416||C==50444||C==50472||C==50500||C==50528||C==50556||C==50584||C==50612||C==50640||C==50668||C==50696||C==50724||C==50752||C==50780||C==50808||C==50836||C==50864||C==50892||C==50920||C==50948||C==50976||C==51004||C==51032||C==51060||C==51088||C==51116||C==51144||C==51172||C==51200||C==51228||C==51256||C==51284||C==51312||C==51340||C==51368||C==51396||C==51424||C==51452||C==51480||C==51508||C==51536||C==51564||C==51592||C==51620||C==51648||C==51676||C==51704||C==51732||C==51760||C==51788||C==51816||C==51844||C==51872||C==51900||C==51928||C==51956||C==51984||C==52012||C==52040||C==52068||C==52096||C==52124||C==52152||C==52180||C==52208||C==52236||C==52264||C==52292||C==52320||C==52348||C==52376||C==52404||C==52432||C==52460||C==52488||C==52516||C==52544||C==52572||C==52600||C==52628||C==52656||C==52684||C==52712||C==52740||C==52768||C==52796||C==52824||C==52852||C==52880||C==52908||C==52936||C==52964||C==52992||C==53020||C==53048||C==53076||C==53104||C==53132||C==53160||C==53188||C==53216||C==53244||C==53272||C==53300||C==53328||C==53356||C==53384||C==53412||C==53440||C==53468||C==53496||C==53524||C==53552||C==53580||C==53608||C==53636||C==53664||C==53692||C==53720||C==53748||C==53776||C==53804||C==53832||C==53860||C==53888||C==53916||C==53944||C==53972||C==54e3||C==54028||C==54056||C==54084||C==54112||C==54140||C==54168||C==54196||C==54224||C==54252||C==54280||C==54308||C==54336||C==54364||C==54392||C==54420||C==54448||C==54476||C==54504||C==54532||C==54560||C==54588||C==54616||C==54644||C==54672||C==54700||C==54728||C==54756||C==54784||C==54812||C==54840||C==54868||C==54896||C==54924||C==54952||C==54980||C==55008||C==55036||C==55064||C==55092||C==55120||C==55148||C==55176?fi:44033<=C&&C<=44059||44061<=C&&C<=44087||44089<=C&&C<=44115||44117<=C&&C<=44143||44145<=C&&C<=44171||44173<=C&&C<=44199||44201<=C&&C<=44227||44229<=C&&C<=44255||44257<=C&&C<=44283||44285<=C&&C<=44311||44313<=C&&C<=44339||44341<=C&&C<=44367||44369<=C&&C<=44395||44397<=C&&C<=44423||44425<=C&&C<=44451||44453<=C&&C<=44479||44481<=C&&C<=44507||44509<=C&&C<=44535||44537<=C&&C<=44563||44565<=C&&C<=44591||44593<=C&&C<=44619||44621<=C&&C<=44647||44649<=C&&C<=44675||44677<=C&&C<=44703||44705<=C&&C<=44731||44733<=C&&C<=44759||44761<=C&&C<=44787||44789<=C&&C<=44815||44817<=C&&C<=44843||44845<=C&&C<=44871||44873<=C&&C<=44899||44901<=C&&C<=44927||44929<=C&&C<=44955||44957<=C&&C<=44983||44985<=C&&C<=45011||45013<=C&&C<=45039||45041<=C&&C<=45067||45069<=C&&C<=45095||45097<=C&&C<=45123||45125<=C&&C<=45151||45153<=C&&C<=45179||45181<=C&&C<=45207||45209<=C&&C<=45235||45237<=C&&C<=45263||45265<=C&&C<=45291||45293<=C&&C<=45319||45321<=C&&C<=45347||45349<=C&&C<=45375||45377<=C&&C<=45403||45405<=C&&C<=45431||45433<=C&&C<=45459||45461<=C&&C<=45487||45489<=C&&C<=45515||45517<=C&&C<=45543||45545<=C&&C<=45571||45573<=C&&C<=45599||45601<=C&&C<=45627||45629<=C&&C<=45655||45657<=C&&C<=45683||45685<=C&&C<=45711||45713<=C&&C<=45739||45741<=C&&C<=45767||45769<=C&&C<=45795||45797<=C&&C<=45823||45825<=C&&C<=45851||45853<=C&&C<=45879||45881<=C&&C<=45907||45909<=C&&C<=45935||45937<=C&&C<=45963||45965<=C&&C<=45991||45993<=C&&C<=46019||46021<=C&&C<=46047||46049<=C&&C<=46075||46077<=C&&C<=46103||46105<=C&&C<=46131||46133<=C&&C<=46159||46161<=C&&C<=46187||46189<=C&&C<=46215||46217<=C&&C<=46243||46245<=C&&C<=46271||46273<=C&&C<=46299||46301<=C&&C<=46327||46329<=C&&C<=46355||46357<=C&&C<=46383||46385<=C&&C<=46411||46413<=C&&C<=46439||46441<=C&&C<=46467||46469<=C&&C<=46495||46497<=C&&C<=46523||46525<=C&&C<=46551||46553<=C&&C<=46579||46581<=C&&C<=46607||46609<=C&&C<=46635||46637<=C&&C<=46663||46665<=C&&C<=46691||46693<=C&&C<=46719||46721<=C&&C<=46747||46749<=C&&C<=46775||46777<=C&&C<=46803||46805<=C&&C<=46831||46833<=C&&C<=46859||46861<=C&&C<=46887||46889<=C&&C<=46915||46917<=C&&C<=46943||46945<=C&&C<=46971||46973<=C&&C<=46999||47001<=C&&C<=47027||47029<=C&&C<=47055||47057<=C&&C<=47083||47085<=C&&C<=47111||47113<=C&&C<=47139||47141<=C&&C<=47167||47169<=C&&C<=47195||47197<=C&&C<=47223||47225<=C&&C<=47251||47253<=C&&C<=47279||47281<=C&&C<=47307||47309<=C&&C<=47335||47337<=C&&C<=47363||47365<=C&&C<=47391||47393<=C&&C<=47419||47421<=C&&C<=47447||47449<=C&&C<=47475||47477<=C&&C<=47503||47505<=C&&C<=47531||47533<=C&&C<=47559||47561<=C&&C<=47587||47589<=C&&C<=47615||47617<=C&&C<=47643||47645<=C&&C<=47671||47673<=C&&C<=47699||47701<=C&&C<=47727||47729<=C&&C<=47755||47757<=C&&C<=47783||47785<=C&&C<=47811||47813<=C&&C<=47839||47841<=C&&C<=47867||47869<=C&&C<=47895||47897<=C&&C<=47923||47925<=C&&C<=47951||47953<=C&&C<=47979||47981<=C&&C<=48007||48009<=C&&C<=48035||48037<=C&&C<=48063||48065<=C&&C<=48091||48093<=C&&C<=48119||48121<=C&&C<=48147||48149<=C&&C<=48175||48177<=C&&C<=48203||48205<=C&&C<=48231||48233<=C&&C<=48259||48261<=C&&C<=48287||48289<=C&&C<=48315||48317<=C&&C<=48343||48345<=C&&C<=48371||48373<=C&&C<=48399||48401<=C&&C<=48427||48429<=C&&C<=48455||48457<=C&&C<=48483||48485<=C&&C<=48511||48513<=C&&C<=48539||48541<=C&&C<=48567||48569<=C&&C<=48595||48597<=C&&C<=48623||48625<=C&&C<=48651||48653<=C&&C<=48679||48681<=C&&C<=48707||48709<=C&&C<=48735||48737<=C&&C<=48763||48765<=C&&C<=48791||48793<=C&&C<=48819||48821<=C&&C<=48847||48849<=C&&C<=48875||48877<=C&&C<=48903||48905<=C&&C<=48931||48933<=C&&C<=48959||48961<=C&&C<=48987||48989<=C&&C<=49015||49017<=C&&C<=49043||49045<=C&&C<=49071||49073<=C&&C<=49099||49101<=C&&C<=49127||49129<=C&&C<=49155||49157<=C&&C<=49183||49185<=C&&C<=49211||49213<=C&&C<=49239||49241<=C&&C<=49267||49269<=C&&C<=49295||49297<=C&&C<=49323||49325<=C&&C<=49351||49353<=C&&C<=49379||49381<=C&&C<=49407||49409<=C&&C<=49435||49437<=C&&C<=49463||49465<=C&&C<=49491||49493<=C&&C<=49519||49521<=C&&C<=49547||49549<=C&&C<=49575||49577<=C&&C<=49603||49605<=C&&C<=49631||49633<=C&&C<=49659||49661<=C&&C<=49687||49689<=C&&C<=49715||49717<=C&&C<=49743||49745<=C&&C<=49771||49773<=C&&C<=49799||49801<=C&&C<=49827||49829<=C&&C<=49855||49857<=C&&C<=49883||49885<=C&&C<=49911||49913<=C&&C<=49939||49941<=C&&C<=49967||49969<=C&&C<=49995||49997<=C&&C<=50023||50025<=C&&C<=50051||50053<=C&&C<=50079||50081<=C&&C<=50107||50109<=C&&C<=50135||50137<=C&&C<=50163||50165<=C&&C<=50191||50193<=C&&C<=50219||50221<=C&&C<=50247||50249<=C&&C<=50275||50277<=C&&C<=50303||50305<=C&&C<=50331||50333<=C&&C<=50359||50361<=C&&C<=50387||50389<=C&&C<=50415||50417<=C&&C<=50443||50445<=C&&C<=50471||50473<=C&&C<=50499||50501<=C&&C<=50527||50529<=C&&C<=50555||50557<=C&&C<=50583||50585<=C&&C<=50611||50613<=C&&C<=50639||50641<=C&&C<=50667||50669<=C&&C<=50695||50697<=C&&C<=50723||50725<=C&&C<=50751||50753<=C&&C<=50779||50781<=C&&C<=50807||50809<=C&&C<=50835||50837<=C&&C<=50863||50865<=C&&C<=50891||50893<=C&&C<=50919||50921<=C&&C<=50947||50949<=C&&C<=50975||50977<=C&&C<=51003||51005<=C&&C<=51031||51033<=C&&C<=51059||51061<=C&&C<=51087||51089<=C&&C<=51115||51117<=C&&C<=51143||51145<=C&&C<=51171||51173<=C&&C<=51199||51201<=C&&C<=51227||51229<=C&&C<=51255||51257<=C&&C<=51283||51285<=C&&C<=51311||51313<=C&&C<=51339||51341<=C&&C<=51367||51369<=C&&C<=51395||51397<=C&&C<=51423||51425<=C&&C<=51451||51453<=C&&C<=51479||51481<=C&&C<=51507||51509<=C&&C<=51535||51537<=C&&C<=51563||51565<=C&&C<=51591||51593<=C&&C<=51619||51621<=C&&C<=51647||51649<=C&&C<=51675||51677<=C&&C<=51703||51705<=C&&C<=51731||51733<=C&&C<=51759||51761<=C&&C<=51787||51789<=C&&C<=51815||51817<=C&&C<=51843||51845<=C&&C<=51871||51873<=C&&C<=51899||51901<=C&&C<=51927||51929<=C&&C<=51955||51957<=C&&C<=51983||51985<=C&&C<=52011||52013<=C&&C<=52039||52041<=C&&C<=52067||52069<=C&&C<=52095||52097<=C&&C<=52123||52125<=C&&C<=52151||52153<=C&&C<=52179||52181<=C&&C<=52207||52209<=C&&C<=52235||52237<=C&&C<=52263||52265<=C&&C<=52291||52293<=C&&C<=52319||52321<=C&&C<=52347||52349<=C&&C<=52375||52377<=C&&C<=52403||52405<=C&&C<=52431||52433<=C&&C<=52459||52461<=C&&C<=52487||52489<=C&&C<=52515||52517<=C&&C<=52543||52545<=C&&C<=52571||52573<=C&&C<=52599||52601<=C&&C<=52627||52629<=C&&C<=52655||52657<=C&&C<=52683||52685<=C&&C<=52711||52713<=C&&C<=52739||52741<=C&&C<=52767||52769<=C&&C<=52795||52797<=C&&C<=52823||52825<=C&&C<=52851||52853<=C&&C<=52879||52881<=C&&C<=52907||52909<=C&&C<=52935||52937<=C&&C<=52963||52965<=C&&C<=52991||52993<=C&&C<=53019||53021<=C&&C<=53047||53049<=C&&C<=53075||53077<=C&&C<=53103||53105<=C&&C<=53131||53133<=C&&C<=53159||53161<=C&&C<=53187||53189<=C&&C<=53215||53217<=C&&C<=53243||53245<=C&&C<=53271||53273<=C&&C<=53299||53301<=C&&C<=53327||53329<=C&&C<=53355||53357<=C&&C<=53383||53385<=C&&C<=53411||53413<=C&&C<=53439||53441<=C&&C<=53467||53469<=C&&C<=53495||53497<=C&&C<=53523||53525<=C&&C<=53551||53553<=C&&C<=53579||53581<=C&&C<=53607||53609<=C&&C<=53635||53637<=C&&C<=53663||53665<=C&&C<=53691||53693<=C&&C<=53719||53721<=C&&C<=53747||53749<=C&&C<=53775||53777<=C&&C<=53803||53805<=C&&C<=53831||53833<=C&&C<=53859||53861<=C&&C<=53887||53889<=C&&C<=53915||53917<=C&&C<=53943||53945<=C&&C<=53971||53973<=C&&C<=53999||54001<=C&&C<=54027||54029<=C&&C<=54055||54057<=C&&C<=54083||54085<=C&&C<=54111||54113<=C&&C<=54139||54141<=C&&C<=54167||54169<=C&&C<=54195||54197<=C&&C<=54223||54225<=C&&C<=54251||54253<=C&&C<=54279||54281<=C&&C<=54307||54309<=C&&C<=54335||54337<=C&&C<=54363||54365<=C&&C<=54391||54393<=C&&C<=54419||54421<=C&&C<=54447||54449<=C&&C<=54475||54477<=C&&C<=54503||54505<=C&&C<=54531||54533<=C&&C<=54559||54561<=C&&C<=54587||54589<=C&&C<=54615||54617<=C&&C<=54643||54645<=C&&C<=54671||54673<=C&&C<=54699||54701<=C&&C<=54727||54729<=C&&C<=54755||54757<=C&&C<=54783||54785<=C&&C<=54811||54813<=C&&C<=54839||54841<=C&&C<=54867||54869<=C&&C<=54895||54897<=C&&C<=54923||54925<=C&&C<=54951||54953<=C&&C<=54979||54981<=C&&C<=55007||55009<=C&&C<=55035||55037<=C&&C<=55063||55065<=C&&C<=55091||55093<=C&&C<=55119||55121<=C&&C<=55147||55149<=C&&C<=55175||55177<=C&&C<=55203?Rn:C==9757||C==9977||9994<=C&&C<=9997||C==127877||127938<=C&&C<=127940||C==127943||127946<=C&&C<=127948||128066<=C&&C<=128067||128070<=C&&C<=128080||C==128110||128112<=C&&C<=128120||C==128124||128129<=C&&C<=128131||128133<=C&&C<=128135||C==128170||128372<=C&&C<=128373||C==128378||C==128400||128405<=C&&C<=128406||128581<=C&&C<=128583||128587<=C&&C<=128591||C==128675||128692<=C&&C<=128694||C==128704||C==128716||129304<=C&&C<=129308||129310<=C&&C<=129311||C==129318||129328<=C&&C<=129337||129341<=C&&C<=129342||129489<=C&&C<=129501?qn:127995<=C&&C<=127999?En:C==8205?wt:C==9792||C==9794||9877<=C&&C<=9878||C==9992||C==10084||C==127752||C==127806||C==127859||C==127891||C==127908||C==127912||C==127979||C==127981||C==128139||128187<=C&&C<=128188||C==128295||C==128300||C==128488||C==128640||C==128658?be:128102<=C&&C<=128105?re:Dn}return this}Oe.exports&&(Oe.exports=we)}),o=new r,s=function(we,Ye,ft){for(var dt=o.iterateGraphemes(we.substring(Ye)),gt="",Lt=0;Lt<ft-Ye;Lt++){var Tt=dt.next();if(gt+=Tt.value,Tt.done)break}return gt},a=(function(Oe,we,Ye,ft,dt,gt,Lt){return{start:{line:Oe,column:we,offset:Ye},end:{line:ft,column:dt,offset:gt},source:Lt||null}}),c=i(function(Oe,we){(function(Ye,ft){Oe.exports=ft()})(t,function(){var Ye="",ft,dt=gt;function gt(Rn,Dn){if(typeof Rn!="string")throw new TypeError("expected a string");if(Dn===1)return Rn;if(Dn===2)return Rn+Rn;var wn=Rn.length*Dn;if(ft!==Rn||typeof ft>"u")ft=Rn,Ye="";else if(Ye.length>=wn)return Ye.substr(0,wn);for(;wn>Ye.length&&Dn>1;)Dn&1&&(Ye+=Rn),Dn>>=1,Rn+=Rn;return Ye+=Rn,Ye=Ye.substr(0,wn),Ye}var Lt=function(Dn,wn,qn){if(Dn==null||wn==null)return Dn;var En=String(Dn),wt=typeof wn=="number"?wn:parseInt(wn,10);if(isNaN(wt)||!isFinite(wt))return En;var be=En.length;if(be>=wt)return En;var re=String(qn);re===""&&(re=" ");for(var ce=wt-be;re.length<ce;)re+=re;var Pe=re.length>ce?re.substr(0,ce):re;return Pe+En},Tt=Object.assign||function(Rn){for(var Dn=1;Dn<arguments.length;Dn++){var wn=arguments[Dn];for(var qn in wn)Object.prototype.hasOwnProperty.call(wn,qn)&&(Rn[qn]=wn[qn])}return Rn};function Zt(Rn,Dn,wn,qn){var En=String(Dn),wt=Lt(En,wn," "),be=dt(" ",qn.tabSize);return wt+" | "+Rn.replace(/\t/g,be)}function Fn(Rn,Dn,wn,qn,En){return Rn.slice(Dn,wn).map(function(wt,be){return Zt(wt,Dn+be+1,qn,En)}).join(`
`)}var Ln={extraLines:2,tabSize:4},fi=function(Dn,wn,qn,En){En=Tt({},Ln,En);var wt=Dn.split(/\r\n?|\n|\f/),be=Math.max(1,wn-En.extraLines)-1,re=Math.min(wn+En.extraLines,wt.length),ce=String(re).length,Pe=Fn(wt,be,wn,ce,En),tt=Zt(wt[wn-1].substring(0,qn-1),wn,ce,En),xt=dt(" ",tt.length)+"^",It=Fn(wt,wn,re,ce,En);return[Pe,xt,It].filter(Boolean).join(`
`)};return fi})}),f=new Error().stack,y=(function(Oe){var we=Object.create(SyntaxError.prototype);return Object.assign(we,Oe,{name:"SyntaxError"}),Object.defineProperty(we,"stack",{get:function(){return f?f.replace(/^(.+\n){1,3}/,String(we)+`
`):""}}),we}),_=(function(Oe,we,Ye,ft,dt){throw y({message:ft?Oe+`
`+c(we,ft,dt):Oe,rawMessage:Oe,source:Ye,line:ft,column:dt})}),E={unexpectedEnd:function(){return"Unexpected end of input"},unexpectedToken:function(we){for(var Ye=arguments.length,ft=Array(Ye>1?Ye-1:0),dt=1;dt<Ye;dt++)ft[dt-1]=arguments[dt];return"Unexpected token <"+we+"> at "+ft.filter(Boolean).join(":")}},I={unexpectedSymbol:function(we){for(var Ye=arguments.length,ft=Array(Ye>1?Ye-1:0),dt=1;dt<Ye;dt++)ft[dt-1]=arguments[dt];return"Unexpected symbol <"+we+"> at "+ft.filter(Boolean).join(":")}},P={LEFT_BRACE:0,RIGHT_BRACE:1,LEFT_BRACKET:2,RIGHT_BRACKET:3,COLON:4,COMMA:5,STRING:6,NUMBER:7,TRUE:8,FALSE:9,NULL:10},K={"{":P.LEFT_BRACE,"}":P.RIGHT_BRACE,"[":P.LEFT_BRACKET,"]":P.RIGHT_BRACKET,":":P.COLON,",":P.COMMA},z={true:P.TRUE,false:P.FALSE,null:P.NULL},Q={_START_:0,START_QUOTE_OR_CHAR:1,ESCAPE:2},V={'"':0,"\\":1,"/":2,b:3,f:4,n:5,r:6,t:7,u:8},$={_START_:0,MINUS:1,ZERO:2,DIGIT:3,POINT:4,DIGIT_FRACTION:5,EXP:6,EXP_DIGIT_OR_SIGN:7};function Z(Oe){return Oe>="1"&&Oe<="9"}function ee(Oe){return Oe>="0"&&Oe<="9"}function X(Oe){return ee(Oe)||Oe>="a"&&Oe<="f"||Oe>="A"&&Oe<="F"}function W(Oe){return Oe==="e"||Oe==="E"}function se(Oe,we,Ye,ft){var dt=Oe.charAt(we);if(dt==="\r")we++,Ye++,ft=1,Oe.charAt(we)===`
`&&we++;else if(dt===`
`)we++,Ye++,ft=1;else if(dt==="	"||dt===" ")we++,ft++;else return null;return{index:we,line:Ye,column:ft}}function ue(Oe,we,Ye,ft){var dt=Oe.charAt(we);return dt in K?{type:K[dt],line:Ye,column:ft+1,index:we+1,value:null}:null}function ve(Oe,we,Ye,ft){for(var dt in z)if(z.hasOwnProperty(dt)&&Oe.substr(we,dt.length)===dt)return{type:z[dt],line:Ye,column:ft+dt.length,index:we+dt.length,value:dt};return null}function ye(Oe,we,Ye,ft){for(var dt=we,gt=Q._START_;we<Oe.length;){var Lt=Oe.charAt(we);switch(gt){case Q._START_:{if(Lt==='"')we++,gt=Q.START_QUOTE_OR_CHAR;else return null;break}case Q.START_QUOTE_OR_CHAR:{if(Lt==="\\")we++,gt=Q.ESCAPE;else{if(Lt==='"')return we++,{type:P.STRING,line:Ye,column:ft+we-dt,index:we,value:Oe.slice(dt,we)};we++}break}case Q.ESCAPE:{if(Lt in V){if(we++,Lt==="u")for(var Tt=0;Tt<4;Tt++){var Zt=Oe.charAt(we);if(Zt&&X(Zt))we++;else return null}gt=Q.START_QUOTE_OR_CHAR}else return null;break}}}}function Ee(Oe,we,Ye,ft){var dt=we,gt=we,Lt=$._START_;e:for(;we<Oe.length;){var Tt=Oe.charAt(we);switch(Lt){case $._START_:{if(Tt==="-")Lt=$.MINUS;else if(Tt==="0")gt=we+1,Lt=$.ZERO;else if(Z(Tt))gt=we+1,Lt=$.DIGIT;else return null;break}case $.MINUS:{if(Tt==="0")gt=we+1,Lt=$.ZERO;else if(Z(Tt))gt=we+1,Lt=$.DIGIT;else return null;break}case $.ZERO:{if(Tt===".")Lt=$.POINT;else if(W(Tt))Lt=$.EXP;else break e;break}case $.DIGIT:{if(ee(Tt))gt=we+1;else if(Tt===".")Lt=$.POINT;else if(W(Tt))Lt=$.EXP;else break e;break}case $.POINT:{if(ee(Tt))gt=we+1,Lt=$.DIGIT_FRACTION;else break e;break}case $.DIGIT_FRACTION:{if(ee(Tt))gt=we+1;else if(W(Tt))Lt=$.EXP;else break e;break}case $.EXP:{if(Tt==="+"||Tt==="-")Lt=$.EXP_DIGIT_OR_SIGN;else if(ee(Tt))gt=we+1,Lt=$.EXP_DIGIT_OR_SIGN;else break e;break}case $.EXP_DIGIT_OR_SIGN:{if(ee(Tt))gt=we+1;else break e;break}}we++}return gt>0?{type:P.NUMBER,line:Ye,column:ft+gt-dt,index:gt,value:Oe.slice(dt,gt)}:null}var _e=function(we,Ye){for(var ft=1,dt=1,gt=0,Lt=[];gt<we.length;){var Tt=[we,gt,ft,dt],Zt=se.apply(void 0,Tt);if(Zt){gt=Zt.index,ft=Zt.line,dt=Zt.column;continue}var Fn=ue.apply(void 0,Tt)||ve.apply(void 0,Tt)||ye.apply(void 0,Tt)||Ee.apply(void 0,Tt);if(Fn){var Ln={type:Fn.type,value:Fn.value,loc:a(ft,dt,gt,Fn.line,Fn.column,Fn.index,Ye.source)};Lt.push(Ln),gt=Fn.index,ft=Fn.line,dt=Fn.column}else _(I.unexpectedSymbol(s(we,gt,gt+1),Ye.source,ft,dt),we,Ye.source,ft,dt)}return Lt},Be={_START_:0,OPEN_OBJECT:1,PROPERTY:2,COMMA:3},Fe={_START_:0,KEY:1,COLON:2},Se={_START_:0,OPEN_ARRAY:1,VALUE:2,COMMA:3},qe={loc:!0,source:null};function ut(Oe,we,Ye){var ft=we.length>0?we[we.length-1].loc.end:{line:1,column:1};_(E.unexpectedEnd(),Oe,Ye.source,ft.line,ft.column)}function ht(Oe){for(var we=0,Ye=0;Ye<4;Ye++)we=we*16+parseInt(Oe[Ye],16);return String.fromCharCode(we)}var De={b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},Ie=['"',"\\","/"];function ze(Oe){for(var we="",Ye=0;Ye<Oe.length;Ye++){var ft=Oe.charAt(Ye);if(ft==="\\"){Ye++;var dt=Oe.charAt(Ye);if(dt==="u")we+=ht(Oe.substr(Ye+1,4)),Ye+=4;else if(Ie.indexOf(dt)!==-1)we+=dt;else if(dt in De)we+=De[dt];else break}else we+=ft}return we}function Te(Oe,we,Ye,ft){for(var dt=void 0,gt={type:"Object",children:[]},Lt=Be._START_;Ye<we.length;){var Tt=we[Ye];switch(Lt){case Be._START_:{if(Tt.type===P.LEFT_BRACE)dt=Tt,Lt=Be.OPEN_OBJECT,Ye++;else return null;break}case Be.OPEN_OBJECT:{if(Tt.type===P.RIGHT_BRACE)return ft.loc&&(gt.loc=a(dt.loc.start.line,dt.loc.start.column,dt.loc.start.offset,Tt.loc.end.line,Tt.loc.end.column,Tt.loc.end.offset,ft.source)),{value:gt,index:Ye+1};var Zt=vt(Oe,we,Ye,ft);gt.children.push(Zt.value),Lt=Be.PROPERTY,Ye=Zt.index;break}case Be.PROPERTY:{if(Tt.type===P.RIGHT_BRACE)return ft.loc&&(gt.loc=a(dt.loc.start.line,dt.loc.start.column,dt.loc.start.offset,Tt.loc.end.line,Tt.loc.end.column,Tt.loc.end.offset,ft.source)),{value:gt,index:Ye+1};Tt.type===P.COMMA?(Lt=Be.COMMA,Ye++):_(E.unexpectedToken(s(Oe,Tt.loc.start.offset,Tt.loc.end.offset),ft.source,Tt.loc.start.line,Tt.loc.start.column),Oe,ft.source,Tt.loc.start.line,Tt.loc.start.column);break}case Be.COMMA:{var Fn=vt(Oe,we,Ye,ft);Fn?(Ye=Fn.index,gt.children.push(Fn.value),Lt=Be.PROPERTY):_(E.unexpectedToken(s(Oe,Tt.loc.start.offset,Tt.loc.end.offset),ft.source,Tt.loc.start.line,Tt.loc.start.column),Oe,ft.source,Tt.loc.start.line,Tt.loc.start.column);break}}}ut(Oe,we,ft)}function vt(Oe,we,Ye,ft){for(var dt=void 0,gt={type:"Property",key:null,value:null},Lt=Fe._START_;Ye<we.length;){var Tt=we[Ye];switch(Lt){case Fe._START_:{if(Tt.type===P.STRING){var Zt={type:"Identifier",value:ze(Oe.slice(Tt.loc.start.offset+1,Tt.loc.end.offset-1)),raw:Tt.value};ft.loc&&(Zt.loc=Tt.loc),dt=Tt,gt.key=Zt,Lt=Fe.KEY,Ye++}else return null;break}case Fe.KEY:{Tt.type===P.COLON?(Lt=Fe.COLON,Ye++):_(E.unexpectedToken(s(Oe,Tt.loc.start.offset,Tt.loc.end.offset),ft.source,Tt.loc.start.line,Tt.loc.start.column),Oe,ft.source,Tt.loc.start.line,Tt.loc.start.column);break}case Fe.COLON:{var Fn=Pt(Oe,we,Ye,ft);return gt.value=Fn.value,ft.loc&&(gt.loc=a(dt.loc.start.line,dt.loc.start.column,dt.loc.start.offset,Fn.value.loc.end.line,Fn.value.loc.end.column,Fn.value.loc.end.offset,ft.source)),{value:gt,index:Fn.index}}}}}function st(Oe,we,Ye,ft){for(var dt=void 0,gt={type:"Array",children:[]},Lt=Se._START_,Tt=void 0;Ye<we.length;)switch(Tt=we[Ye],Lt){case Se._START_:{if(Tt.type===P.LEFT_BRACKET)dt=Tt,Lt=Se.OPEN_ARRAY,Ye++;else return null;break}case Se.OPEN_ARRAY:{if(Tt.type===P.RIGHT_BRACKET)return ft.loc&&(gt.loc=a(dt.loc.start.line,dt.loc.start.column,dt.loc.start.offset,Tt.loc.end.line,Tt.loc.end.column,Tt.loc.end.offset,ft.source)),{value:gt,index:Ye+1};var Zt=Pt(Oe,we,Ye,ft);Ye=Zt.index,gt.children.push(Zt.value),Lt=Se.VALUE;break}case Se.VALUE:{if(Tt.type===P.RIGHT_BRACKET)return ft.loc&&(gt.loc=a(dt.loc.start.line,dt.loc.start.column,dt.loc.start.offset,Tt.loc.end.line,Tt.loc.end.column,Tt.loc.end.offset,ft.source)),{value:gt,index:Ye+1};Tt.type===P.COMMA?(Lt=Se.COMMA,Ye++):_(E.unexpectedToken(s(Oe,Tt.loc.start.offset,Tt.loc.end.offset),ft.source,Tt.loc.start.line,Tt.loc.start.column),Oe,ft.source,Tt.loc.start.line,Tt.loc.start.column);break}case Se.COMMA:{var Fn=Pt(Oe,we,Ye,ft);Ye=Fn.index,gt.children.push(Fn.value),Lt=Se.VALUE;break}}ut(Oe,we,ft)}function Et(Oe,we,Ye,ft){var dt=we[Ye],gt=null;switch(dt.type){case P.STRING:{gt=ze(Oe.slice(dt.loc.start.offset+1,dt.loc.end.offset-1));break}case P.NUMBER:{gt=Number(dt.value);break}case P.TRUE:{gt=!0;break}case P.FALSE:{gt=!1;break}case P.NULL:{gt=null;break}default:return null}var Lt={type:"Literal",value:gt,raw:dt.value};return ft.loc&&(Lt.loc=dt.loc),{value:Lt,index:Ye+1}}function Pt(Oe,we,Ye,ft){var dt=we[Ye],gt=Et.apply(void 0,arguments)||Te.apply(void 0,arguments)||st.apply(void 0,arguments);if(gt)return gt;_(E.unexpectedToken(s(Oe,dt.loc.start.offset,dt.loc.end.offset),ft.source,dt.loc.start.line,dt.loc.start.column),Oe,ft.source,dt.loc.start.line,dt.loc.start.column)}var ke=(function(Oe,we){we=Object.assign({},qe,we);var Ye=_e(Oe,we);Ye.length===0&&ut(Oe,Ye,we);var ft=Pt(Oe,Ye,0,we);if(ft.index===Ye.length)return ft.value;var dt=Ye[ft.index];_(E.unexpectedToken(s(Oe,dt.loc.start.offset,dt.loc.end.offset),we.source,dt.loc.start.line,dt.loc.start.column),Oe,we.source,dt.loc.start.line,dt.loc.start.column)});return ke}))})(bS)),bS.exports}var Swe=wwe();const EU=Zl(Swe);function ca(){var n="/home/runner/work/maputnik/maputnik/src/libs/json-path-to-position.ts",e="68bf9a3bcb07bd54be36702e0c3494ce552968d6",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/json-path-to-position.ts",statementMap:{0:{start:{line:2,column:2},end:{line:4,column:3}},1:{start:{line:3,column:4},end:{line:3,column:18}},2:{start:{line:5,column:2},end:{line:7,column:3}},3:{start:{line:6,column:4},end:{line:6,column:16}},4:{start:{line:8,column:2},end:{line:10,column:3}},5:{start:{line:9,column:4},end:{line:9,column:18}},6:{start:{line:11,column:14},end:{line:11,column:21}},7:{start:{line:12,column:2},end:{line:14,column:3}},8:{start:{line:13,column:4},end:{line:13,column:70}},9:{start:{line:15,column:18},end:{line:17,column:4}},10:{start:{line:16,column:4},end:{line:16,column:100}},11:{start:{line:18,column:2},end:{line:18,column:59}}},fnMap:{0:{name:"jsonPathToPosition",decl:{start:{line:1,column:16},end:{line:1,column:34}},loc:{start:{line:1,column:47},end:{line:19,column:1}},line:1},1:{name:"(anonymous_1)",decl:{start:{line:15,column:37},end:{line:15,column:38}},loc:{start:{line:15,column:52},end:{line:17,column:3}},line:15}},branchMap:{0:{loc:{start:{line:2,column:2},end:{line:4,column:3}},type:"if",locations:[{start:{line:2,column:2},end:{line:4,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:2},1:{loc:{start:{line:5,column:2},end:{line:7,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:7,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},2:{loc:{start:{line:8,column:2},end:{line:10,column:3}},type:"if",locations:[{start:{line:8,column:2},end:{line:10,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},3:{loc:{start:{line:12,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},4:{loc:{start:{line:16,column:11},end:{line:16,column:99}},type:"binary-expr",locations:[{start:{line:16,column:11},end:{line:16,column:29}},{start:{line:16,column:33},end:{line:16,column:68}},{start:{line:16,column:72},end:{line:16,column:99}}],line:16}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/json-path-to-position.ts"],names:[],mappings:"AAEO,gBAAS,mBAAmB,MAAgB,MAA6C;AAC9F,MAAI,CAAC,MAAM;AACT,WAAO;AAAA,EACT;AACA,MAAI,KAAK,SAAS,GAAG;AACnB,WAAO;AAAA,EACT;AACA,MAAI,EAAE,cAAc,OAAO;AACzB,WAAO;AAAA,EACT;AACA,QAAM,MAAM,KAAK,CAAC;AAClB,MAAI,IAAI,MAAM,UAAU,GAAG;AACzB,WAAO,mBAAmB,KAAK,MAAM,CAAC,GAAG,KAAK,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;AAAA,EAClE;AACA,QAAM,UAAU,KAAK,SAAS,KAAK,CAAC,cAAc;AAChD,WACE,SAAS,aACT,UAAU,IAAI,SAAS,gBACvB,UAAU,IAAI,UAAU;AAAA,EAE5B,CAAC;AACD,SAAO,mBAAmB,KAAK,MAAM,CAAC,GAAG,SAAS,KAAK;AACzD;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"68bf9a3bcb07bd54be36702e0c3494ce552968d6"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ca=function(){return s},s}ca();function MR(n,e){if(ca().f[0]++,ca().s[0]++,e)ca().b[0][1]++;else{ca().b[0][0]++,ca().s[1]++;return}if(ca().s[2]++,n.length<1)return ca().b[1][0]++,ca().s[3]++,e;if(ca().b[1][1]++,ca().s[4]++,"children"in e)ca().b[2][1]++;else{ca().b[2][0]++,ca().s[5]++;return}const t=(ca().s[6]++,n[0]);if(ca().s[7]++,t.match(/^[0-9]+$/))return ca().b[3][0]++,ca().s[8]++,MR(n.slice(1),e.children[+n[0]]);ca().b[3][1]++;const i=(ca().s[9]++,e.children.find(r=>(ca().f[1]++,ca().s[10]++,ca().b[4][0]++,"key"in r&&(ca().b[4][1]++,r.key.type==="Identifier")&&(ca().b[4][2]++,r.key.value===t))));return ca().s[11]++,MR(n.slice(1),i?.value)}function In(){var n="/home/runner/work/maputnik/maputnik/src/libs/codemirror-editor-factory.ts",e="fed5a4f9200b6a5cf90f61b2c7f89f45308868c6",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/codemirror-editor-factory.ts",statementMap:{0:{start:{line:11,column:22},end:{line:11,column:24}},1:{start:{line:12,column:2},end:{line:37,column:3}},2:{start:{line:13,column:29},end:{line:13,column:34}},3:{start:{line:14,column:4},end:{line:36,column:5}},4:{start:{line:15,column:6},end:{line:20,column:9}},5:{start:{line:22,column:19},end:{line:22,column:81}},6:{start:{line:23,column:19},end:{line:23,column:48}},7:{start:{line:24,column:6},end:{line:27,column:7}},8:{start:{line:25,column:8},end:{line:25,column:67}},9:{start:{line:26,column:8},end:{line:26,column:17}},10:{start:{line:28,column:6},end:{line:35,column:7}},11:{start:{line:29,column:8},end:{line:34,column:11}},12:{start:{line:38,column:2},end:{line:38,column:21}},13:{start:{line:41,column:2},end:{line:70,column:4}},14:{start:{line:42,column:17},end:{line:42,column:42}},15:{start:{line:43,column:4},end:{line:68,column:5}},16:{start:{line:44,column:25},end:{line:44,column:41}},17:{start:{line:45,column:18},end:{line:45,column:33}},18:{start:{line:46,column:31},end:{line:56,column:8}},19:{start:{line:57,column:27},end:{line:65,column:8}},20:{start:{line:58,column:8},end:{line:58,column:74}},21:{start:{line:60,column:32},end:{line:60,column:83}},22:{start:{line:61,column:8},end:{line:64,column:10}},23:{start:{line:66,column:6},end:{line:66,column:67}},24:{start:{line:69,column:4},end:{line:69,column:14}},25:{start:{line:73,column:2},end:{line:89,column:4}},26:{start:{line:74,column:17},end:{line:74,column:42}},27:{start:{line:75,column:4},end:{line:87,column:5}},28:{start:{line:76,column:25},end:{line:76,column:41}},29:{start:{line:77,column:18},end:{line:77,column:33}},30:{start:{line:78,column:31},end:{line:78,column:59}},31:{start:{line:79,column:27},end:{line:84,column:8}},32:{start:{line:80,column:8},end:{line:83,column:10}},33:{start:{line:85,column:6},end:{line:85,column:67}},34:{start:{line:88,column:4},end:{line:88,column:14}},35:{start:{line:92,column:2},end:{line:102,column:4}},36:{start:{line:93,column:17},end:{line:93,column:42}},37:{start:{line:94,column:23},end:{line:94,column:39}},38:{start:{line:95,column:16},end:{line:95,column:31}},39:{start:{line:96,column:16},end:{line:96,column:61}},40:{start:{line:97,column:4},end:{line:99,column:5}},41:{start:{line:98,column:6},end:{line:98,column:16}},42:{start:{line:100,column:19},end:{line:100,column:28}},43:{start:{line:101,column:4},end:{line:101,column:59}},44:{start:{line:105,column:23},end:{line:105,column:31}},45:{start:{line:105,column:29},end:{line:105,column:31}},46:{start:{line:106,column:2},end:{line:119,column:3}},47:{start:{line:108,column:6},end:{line:108,column:51}},48:{start:{line:109,column:6},end:{line:109,column:12}},49:{start:{line:111,column:6},end:{line:111,column:51}},50:{start:{line:112,column:6},end:{line:112,column:12}},51:{start:{line:114,column:6},end:{line:114,column:66}},52:{start:{line:115,column:6},end:{line:115,column:12}},53:{start:{line:117,column:6},end:{line:117,column:32}},54:{start:{line:117,column:29},end:{line:117,column:31}},55:{start:{line:118,column:6},end:{line:118,column:12}},56:{start:{line:120,column:2},end:{line:156,column:5}},57:{start:{line:133,column:8},end:{line:137,column:9}},58:{start:{line:134,column:22},end:{line:134,column:38}},59:{start:{line:135,column:24},end:{line:135,column:38}},60:{start:{line:136,column:10},end:{line:136,column:32}},61:{start:{line:138,column:8},end:{line:144,column:9}},62:{start:{line:139,column:10},end:{line:143,column:11}},63:{start:{line:140,column:12},end:{line:140,column:28}},64:{start:{line:142,column:12},end:{line:142,column:27}},65:{start:{line:148,column:27},end:{line:148,column:50}},66:{start:{line:149,column:8},end:{line:151,column:9}},67:{start:{line:150,column:10},end:{line:150,column:28}},68:{start:{line:152,column:8},end:{line:152,column:36}}},fnMap:{0:{name:"getDiagnosticsFromExpressionErrors",decl:{start:{line:10,column:9},end:{line:10,column:43}},loc:{start:{line:10,column:57},end:{line:39,column:1}},line:10},1:{name:"createMaplibreLayerLinter",decl:{start:{line:40,column:9},end:{line:40,column:34}},loc:{start:{line:40,column:37},end:{line:71,column:1}},line:40},2:{name:"(anonymous_2)",decl:{start:{line:41,column:9},end:{line:41,column:10}},loc:{start:{line:41,column:19},end:{line:70,column:3}},line:41},3:{name:"(anonymous_3)",decl:{start:{line:57,column:51},end:{line:57,column:52}},loc:{start:{line:57,column:60},end:{line:59,column:7}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:59,column:13},end:{line:59,column:14}},loc:{start:{line:59,column:22},end:{line:65,column:7}},line:59},5:{name:"createMaplibreStyleLinter",decl:{start:{line:72,column:9},end:{line:72,column:34}},loc:{start:{line:72,column:37},end:{line:90,column:1}},line:72},6:{name:"(anonymous_6)",decl:{start:{line:73,column:9},end:{line:73,column:10}},loc:{start:{line:73,column:19},end:{line:89,column:3}},line:73},7:{name:"(anonymous_7)",decl:{start:{line:79,column:48},end:{line:79,column:49}},loc:{start:{line:79,column:57},end:{line:84,column:7}},line:79},8:{name:"createMaplibreExpressionLinter",decl:{start:{line:91,column:9},end:{line:91,column:39}},loc:{start:{line:91,column:46},end:{line:103,column:1}},line:91},9:{name:"(anonymous_9)",decl:{start:{line:92,column:9},end:{line:92,column:10}},loc:{start:{line:92,column:19},end:{line:102,column:3}},line:92},10:{name:"createEditor",decl:{start:{line:104,column:16},end:{line:104,column:28}},loc:{start:{line:104,column:36},end:{line:157,column:1}},line:104},11:{name:"(anonymous_11)",decl:{start:{line:105,column:23},end:{line:105,column:24}},loc:{start:{line:105,column:29},end:{line:105,column:31}},line:105},12:{name:"(anonymous_12)",decl:{start:{line:117,column:23},end:{line:117,column:24}},loc:{start:{line:117,column:29},end:{line:117,column:31}},line:117},13:{name:"(anonymous_13)",decl:{start:{line:132,column:35},end:{line:132,column:36}},loc:{start:{line:132,column:47},end:{line:145,column:7}},line:132},14:{name:"(anonymous_14)",decl:{start:{line:147,column:13},end:{line:147,column:14}},loc:{start:{line:147,column:23},end:{line:153,column:7}},line:147}},branchMap:{0:{loc:{start:{line:14,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:14,column:4},end:{line:36,column:5}},{start:{line:21,column:11},end:{line:36,column:5}}],line:14},1:{loc:{start:{line:17,column:12},end:{line:17,column:44}},type:"cond-expr",locations:[{start:{line:17,column:22},end:{line:17,column:40}},{start:{line:17,column:43},end:{line:17,column:44}}],line:17},2:{loc:{start:{line:24,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:24,column:6},end:{line:27,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},3:{loc:{start:{line:28,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:35,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:28},4:{loc:{start:{line:97,column:4},end:{line:99,column:5}},type:"if",locations:[{start:{line:97,column:4},end:{line:99,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:97},5:{loc:{start:{line:106,column:2},end:{line:119,column:3}},type:"switch",locations:[{start:{line:107,column:4},end:{line:109,column:12}},{start:{line:110,column:4},end:{line:112,column:12}},{start:{line:113,column:4},end:{line:115,column:12}},{start:{line:116,column:4},end:{line:118,column:12}}],line:106},6:{loc:{start:{line:133,column:8},end:{line:137,column:9}},type:"if",locations:[{start:{line:133,column:8},end:{line:137,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:133},7:{loc:{start:{line:138,column:8},end:{line:144,column:9}},type:"if",locations:[{start:{line:138,column:8},end:{line:144,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:138},8:{loc:{start:{line:139,column:10},end:{line:143,column:11}},type:"if",locations:[{start:{line:139,column:10},end:{line:143,column:11}},{start:{line:141,column:17},end:{line:143,column:11}}],line:139},9:{loc:{start:{line:149,column:8},end:{line:151,column:9}},type:"if",locations:[{start:{line:149,column:8},end:{line:151,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:149}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/codemirror-editor-factory.ts"],names:[],mappings:"AAAA,SAAS,kBAAkB;AAC3B,SAAS,kBAAkB;AAC3B,SAAS,aAAa,mBAAmB;AACzC,SAAS,MAAM,uBAAuB;AACtC,SAAS,QAAQ,kBAAmC;AACpD,SAAS,eAAe;AACxB,SAAS,YAA6C,wBAAwB;AAC9E,OAAO,eAAsD;AAC7D,SAAS,0BAA0B;AASnC,SAAS,mCAAmC,QAAuB,KAA+B;AAChG,QAAM,cAA4B,CAAC;AACnC,aAAW,SAAS,QAAQ;AAC1B,UAAM,EAAC,KAAK,QAAO,IAAI;AACvB,QAAI,CAAC,KAAK;AACR,kBAAY,KAAK;AAAA,QACf,MAAM;AAAA,QACN,IAAI,IAAI,MAAM,IAAI,IAAI,IAAI,SAAS;AAAA,QACnC,UAAU;AAAA,QACV;AAAA,MACF,CAAC;AAAA,IACH,OAAO;AACL,YAAM,OAAO,IAAI,QAAQ,YAAY,EAAE,EAAE,MAAM,WAAW,EAAE,OAAO,OAAO;AAC1E,YAAM,OAAO,mBAAmB,MAAM,GAAG;AACzC,UAAI,CAAC,MAAM;AACT,gBAAQ,KAAK,uCAAuC,KAAK;AACzD;AAAA,MACF;AACA,UAAI,KAAK,KAAK;AACZ,oBAAY,KAAK;AAAA,UACf,MAAM,KAAK,IAAI,MAAM;AAAA,UACrB,IAAI,KAAK,IAAI,IAAI;AAAA,UACjB,UAAU;AAAA,UACV;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,4BAA4B;AACnC,SAAO,CAAC,SAAqB;AAC3B,UAAM,OAAO,KAAK,MAAM,IAAI,SAAS;AAErC,QAAI;AAEF,YAAM,aAAa,KAAK,MAAM,IAAI;AAClC,YAAM,MAAM,UAAU,IAAI;AAG1B,YAAM,mBAAmB,iBAAiB;AAAA,QACxC,WAAW;AAAA,QACX,QAAQ;AAAA,QACR,YAAY,CAAC;AAAA,QACb,WAAW,CAAC;AAAA,QACZ,UAAU;AAAA,QACV,UAAU;AAAA,QACV,UAAU;AAAA,UACR;AAAA,QACF;AAAA,MACF,CAAC;AAED,YAAM,eAAe,iBAClB,OAAO,SAAO;AAEb,eAAO,CAAC,IAAI,QAAQ,MAAM,sCAAsC;AAAA,MAClE,CAAC,EACA,IAAI,SAAO;AAEV,cAAM,kBAAkB,IAAI,QAAQ,QAAQ,iBAAiB,EAAE,EAAE,MAAM,GAAG;AAC1E,eAAO;AAAA,UACL,KAAK,gBAAgB,CAAC;AAAA,UACtB,SAAS,gBAAgB,CAAC;AAAA,QAC5B;AAAA,MACF,CAAC;AACH,aAAO,mCAAmC,cAAc,GAAG;AAAA,IAC7D,QAAQ;AAAA,IAER;AACA,WAAO,CAAC;AAAA,EACV;AACF;AAEA,SAAS,4BAA4B;AACnC,SAAO,CAAC,SAAqB;AAC3B,UAAM,OAAO,KAAK,MAAM,IAAI,SAAS;AAErC,QAAI;AAEF,YAAM,aAAa,KAAK,MAAM,IAAI;AAClC,YAAM,MAAM,UAAU,IAAI;AAG1B,YAAM,mBAAmB,iBAAiB,UAAU;AACpD,YAAM,eAAe,iBAAiB,IAAI,SAAO;AAC/C,eAAO;AAAA,UACL,KAAK,IAAI,QAAQ,MAAM,GAAG,EAAE,CAAC;AAAA,UAC7B,SAAS,IAAI;AAAA,QACf;AAAA,MACF,CAAC;AACD,aAAO,mCAAmC,cAAc,GAAG;AAAA,IAC7D,QAAQ;AAAA,IAER;AACA,WAAO,CAAC;AAAA,EACV;AACF;AAEA,SAAS,+BAA+B,MAAmC;AACzE,SAAO,CAAC,SAAqB;AAC3B,UAAM,OAAO,KAAK,MAAM,IAAI,SAAS;AACrC,UAAM,aAAa,KAAK,MAAM,IAAI;AAClC,UAAM,MAAM,UAAU,IAAI;AAC1B,UAAM,MAAM,WAAW,iBAAiB,YAAY,IAAI;AACxD,QAAI,KAAK,WAAW,SAAS;AAC3B,aAAO,CAAC;AAAA,IACV;AACA,UAAM,SAAS,IAAI;AACnB,WAAO,mCAAmC,QAAQ,GAAG;AAAA,EACvD;AACF;AAEO,gBAAS,aAAa,OAQd;AACb,MAAI,iBAAqD,MAAM,CAAC;AAChE,UAAQ,MAAM,UAAU;AAAA,IACtB,KAAK;AACH,uBAAiB,0BAA0B;AAC3C;AAAA,IACF,KAAK;AACH,uBAAiB,0BAA0B;AAC3C;AAAA,IACF,KAAK;AACH,uBAAiB,+BAA+B,MAAM,IAAI;AAC1D;AAAA,IACF,KAAK;AACH,uBAAiB,MAAM,CAAC;AACxB;AAAA,EACJ;AAEA,SAAO,IAAI,WAAW;AAAA,IACpB,KAAK,MAAM;AAAA,IACX,YAAY;AAAA,MACV;AAAA,MACA,KAAK;AAAA,MACL;AAAA,MACA,IAAI,YAAY,EAAE,GAAG,YAAY,QAAQ,GAAG,CAAC,CAAC;AAAA,MAC9C,WAAW,MAAM;AAAA,QACf,KAAK;AAAA,UACH,UAAU;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,MACD,WAAW,eAAe,GAAG,CAAC,WAAW;AACvC,YAAI,OAAO,YAAY;AACrB,gBAAM,MAAM,OAAO,MAAM;AACzB,gBAAM,QAAQ,IAAI,SAAS;AAC3B,gBAAM,SAAS,KAAK;AAAA,QACtB;AACA,YAAI,OAAO,cAAc;AACvB,cAAI,OAAO,KAAK,UAAU;AACxB,kBAAM,QAAQ;AAAA,UAChB,OAAO;AACL,kBAAM,OAAO;AAAA,UACf;AAAA,QACF;AAAA,MACF,CAAC;AAAA,MACD,WAAW;AAAA,MACX,OAAO,CAAC,SAAqB;AAC3B,cAAM,aAAa,gBAAgB,EAAE,IAAI;AACzC,YAAI,WAAW,SAAS,GAAG;AACzB,iBAAO;AAAA,QACT;AACA,eAAO,eAAe,IAAI;AAAA,MAC5B,CAAC;AAAA,IACH;AAAA,IACA,QAAQ,MAAM;AAAA,EAChB,CAAC;AACH;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fed5a4f9200b6a5cf90f61b2c7f89f45308868c6"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return In=function(){return s},s}In();function BU(n,e){In().f[0]++;const t=(In().s[0]++,[]);In().s[1]++;for(const i of n){const{key:r,message:o}=(In().s[2]++,i);if(In().s[3]++,!r)In().b[0][0]++,In().s[4]++,t.push({from:0,to:e.loc?(In().b[1][0]++,e.loc.end.offset):(In().b[1][1]++,0),severity:"error",message:o});else{In().b[0][1]++;const s=(In().s[5]++,r.replace(/^\[|\]$/g,"").split(/\.|[[\]]+/).filter(Boolean)),a=(In().s[6]++,MR(s,e));if(In().s[7]++,a)In().b[2][1]++;else{In().b[2][0]++,In().s[8]++,console.warn("Something went wrong parsing error:",i),In().s[9]++;continue}In().s[10]++,a.loc?(In().b[3][0]++,In().s[11]++,t.push({from:a.loc.start.offset,to:a.loc.end.offset,severity:"error",message:o})):In().b[3][1]++}}return In().s[12]++,t}function Ewe(){return In().f[1]++,In().s[13]++,n=>{In().f[2]++;const e=(In().s[14]++,n.state.doc.toString());In().s[15]++;try{const t=(In().s[16]++,JSON.parse(e)),i=(In().s[17]++,EU(e)),r=(In().s[18]++,yd({version:8,name:"Empty Style",metadata:{},sources:{},sprite:"",glyphs:"https://example.com/glyphs/{fontstack}/{range}.pbf",layers:[t]})),o=(In().s[19]++,r.filter(s=>(In().f[3]++,In().s[20]++,!s.message.match(/^layers\[0\]: source ".*" not found$/))).map(s=>{In().f[4]++;const a=(In().s[21]++,s.message.replace(/^layers\[0\]./,"").split(":"));return In().s[22]++,{key:a[0],message:a[1]}}));return In().s[23]++,BU(o,i)}catch{}return In().s[24]++,[]}}function Bwe(){return In().f[5]++,In().s[25]++,n=>{In().f[6]++;const e=(In().s[26]++,n.state.doc.toString());In().s[27]++;try{const t=(In().s[28]++,JSON.parse(e)),i=(In().s[29]++,EU(e)),r=(In().s[30]++,yd(t)),o=(In().s[31]++,r.map(s=>(In().f[7]++,In().s[32]++,{key:s.message.split(":")[0],message:s.message})));return In().s[33]++,BU(o,i)}catch{}return In().s[34]++,[]}}function Owe(n){return In().f[8]++,In().s[35]++,e=>{In().f[9]++;const t=(In().s[36]++,e.state.doc.toString()),i=(In().s[37]++,JSON.parse(t)),r=(In().s[38]++,EU(t)),o=(In().s[39]++,Phe.createExpression(i,n));if(In().s[40]++,o?.result!=="error")return In().b[4][0]++,In().s[41]++,[];In().b[4][1]++;const s=(In().s[42]++,o.value);return In().s[43]++,BU(s,r)}}function Iwe(n){In().f[10]++,In().s[44]++;let e=()=>(In().f[11]++,In().s[45]++,[]);switch(In().s[46]++,n.lintType){case"style":In().b[5][0]++,In().s[47]++,e=Bwe(),In().s[48]++;break;case"layer":In().b[5][1]++,In().s[49]++,e=Ewe(),In().s[50]++;break;case"expression":In().b[5][2]++,In().s[51]++,e=Owe(n.spec),In().s[52]++;break;case"json":In().b[5][3]++,In().s[53]++,e=()=>(In().f[12]++,In().s[54]++,[]),In().s[55]++;break}return In().s[56]++,new pi({doc:n.value,extensions:[Z5e,hwe(),xwe,new l5().of(Ho.tabSize.of(2)),pi.theme({"&":{fontSize:"9pt"}}),pi.updateListener.of(t=>{if(In().f[13]++,In().s[57]++,t.docChanged){In().b[6][0]++;const i=(In().s[58]++,t.state.doc),r=(In().s[59]++,i.toString());In().s[60]++,n.onChange(r)}else In().b[6][1]++;In().s[61]++,t.focusChanged?(In().b[7][0]++,In().s[62]++,t.view.hasFocus?(In().b[8][0]++,In().s[63]++,n.onFocus()):(In().b[8][1]++,In().s[64]++,n.onBlur())):In().b[7][1]++}),H5e(),j5e(t=>{In().f[14]++;const i=(In().s[65]++,uwe()(t));return In().s[66]++,i.length>0?(In().b[9][0]++,In().s[67]++,i):(In().b[9][1]++,In().s[68]++,e(t))})],parent:n.parent})}function ci(){var n="/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",e="cf24112519e06488e6bd4c982a8e685ac2a0e6cd",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:13,column:3}},1:{start:{line:15,column:8},end:{line:15,column:12}},2:{start:{line:16,column:22},end:{line:16,column:27}},3:{start:{line:18,column:4},end:{line:18,column:17}},4:{start:{line:19,column:4},end:{line:22,column:6}},5:{start:{line:25,column:4},end:{line:25,column:63}},6:{start:{line:28,column:4},end:{line:36,column:7}},7:{start:{line:32,column:27},end:{line:32,column:47}},8:{start:{line:33,column:21},end:{line:33,column:35}},9:{start:{line:34,column:20},end:{line:34,column:33}},10:{start:{line:38,column:12},end:{line:43,column:3}},11:{start:{line:39,column:4},end:{line:39,column:49}},12:{start:{line:39,column:28},end:{line:39,column:49}},13:{start:{line:40,column:4},end:{line:42,column:7}},14:{start:{line:44,column:11},end:{line:49,column:3}},15:{start:{line:45,column:4},end:{line:45,column:47}},16:{start:{line:45,column:27},end:{line:45,column:47}},17:{start:{line:46,column:4},end:{line:48,column:7}},18:{start:{line:51,column:4},end:{line:63,column:5}},19:{start:{line:52,column:6},end:{line:52,column:36}},20:{start:{line:53,column:31},end:{line:53,column:57}},21:{start:{line:54,column:6},end:{line:62,column:9}},22:{start:{line:65,column:13},end:{line:89,column:3}},23:{start:{line:66,column:4},end:{line:72,column:5}},24:{start:{line:67,column:6},end:{line:67,column:37}},25:{start:{line:68,column:6},end:{line:70,column:9}},26:{start:{line:71,column:6},end:{line:71,column:13}},27:{start:{line:73,column:20},end:{line:73,column:51}},28:{start:{line:74,column:4},end:{line:85,column:5}},29:{start:{line:76,column:6},end:{line:81,column:7}},30:{start:{line:77,column:8},end:{line:77,column:42}},31:{start:{line:79,column:8},end:{line:79,column:19}},32:{start:{line:80,column:8},end:{line:80,column:27}},33:{start:{line:82,column:6},end:{line:84,column:7}},34:{start:{line:83,column:8},end:{line:83,column:66}},35:{start:{line:83,column:33},end:{line:83,column:66}},36:{start:{line:86,column:4},end:{line:88,column:7}},37:{start:{line:91,column:4},end:{line:99,column:9}},38:{start:{line:96,column:10},end:{line:96,column:24}},39:{start:{line:102,column:18},end:{line:102,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:13},end:{line:9,column:14}},loc:{start:{line:9,column:19},end:{line:10,column:5}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:11,column:12},end:{line:11,column:13}},loc:{start:{line:11,column:18},end:{line:12,column:5}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:21},end:{line:23,column:3}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:22},end:{line:26,column:3}},line:24},4:{name:"(anonymous_4)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:22},end:{line:37,column:3}},line:27},5:{name:"(anonymous_5)",decl:{start:{line:32,column:16},end:{line:32,column:17}},loc:{start:{line:32,column:27},end:{line:32,column:47}},line:32},6:{name:"(anonymous_6)",decl:{start:{line:33,column:15},end:{line:33,column:16}},loc:{start:{line:33,column:21},end:{line:33,column:35}},line:33},7:{name:"(anonymous_7)",decl:{start:{line:34,column:14},end:{line:34,column:15}},loc:{start:{line:34,column:20},end:{line:34,column:33}},line:34},8:{name:"(anonymous_8)",decl:{start:{line:38,column:12},end:{line:38,column:13}},loc:{start:{line:38,column:18},end:{line:43,column:3}},line:38},9:{name:"(anonymous_9)",decl:{start:{line:44,column:11},end:{line:44,column:12}},loc:{start:{line:44,column:17},end:{line:49,column:3}},line:44},10:{name:"(anonymous_10)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:32},end:{line:64,column:3}},line:50},11:{name:"(anonymous_11)",decl:{start:{line:65,column:13},end:{line:65,column:14}},loc:{start:{line:65,column:21},end:{line:89,column:3}},line:65},12:{name:"(anonymous_12)",decl:{start:{line:90,column:2},end:{line:90,column:3}},loc:{start:{line:90,column:11},end:{line:100,column:3}},line:90},13:{name:"(anonymous_13)",decl:{start:{line:95,column:13},end:{line:95,column:14}},loc:{start:{line:95,column:21},end:{line:97,column:9}},line:95}},branchMap:{0:{loc:{start:{line:31,column:16},end:{line:31,column:46}},type:"binary-expr",locations:[{start:{line:31,column:16},end:{line:31,column:35}},{start:{line:31,column:39},end:{line:31,column:46}}],line:31},1:{loc:{start:{line:39,column:4},end:{line:39,column:49}},type:"if",locations:[{start:{line:39,column:4},end:{line:39,column:49}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:45,column:4},end:{line:45,column:47}},type:"if",locations:[{start:{line:45,column:4},end:{line:45,column:47}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},3:{loc:{start:{line:51,column:4},end:{line:63,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:63,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:51},4:{loc:{start:{line:51,column:8},end:{line:51,column:69}},type:"binary-expr",locations:[{start:{line:51,column:8},end:{line:51,column:29}},{start:{line:51,column:33},end:{line:51,column:69}}],line:51},5:{loc:{start:{line:66,column:4},end:{line:72,column:5}},type:"if",locations:[{start:{line:66,column:4},end:{line:72,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:66},6:{loc:{start:{line:74,column:4},end:{line:85,column:5}},type:"if",locations:[{start:{line:74,column:4},end:{line:85,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:74},7:{loc:{start:{line:82,column:6},end:{line:84,column:7}},type:"if",locations:[{start:{line:82,column:6},end:{line:84,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:82},8:{loc:{start:{line:83,column:8},end:{line:83,column:66}},type:"if",locations:[{start:{line:83,column:8},end:{line:83,column:66}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:83}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx"],names:[],mappings:"AAwHM;AAxHN,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAA+B,uBAAuB;AAGtD,OAAO,qBAAqB;AAE5B,SAAQ,oBAAmB;AAmB3B,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,EACjB;AAAA,EACA;AAAA,EACA,MAA6B;AAAA,EAC7B,oBAA6B;AAAA,EAE7B,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,MACX,WAAW,KAAK,cAAc,KAAK,MAAM,KAAK;AAAA,IAChD;AAAA,EACF;AAAA,EAEA,cAAc,MAAW;AACvB,WAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,EACzD;AAAA,EAEA,oBAAqB;AACnB,SAAK,QAAQ,aAAa;AAAA,MACxB,QAAQ,KAAK;AAAA,MACb,OAAO,KAAK,cAAc,KAAK,MAAM,KAAK;AAAA,MAC1C,UAAU,KAAK,MAAM,YAAY;AAAA,MACjC,UAAU,CAAC,UAAiB,KAAK,SAAS,KAAK;AAAA,MAC/C,SAAS,MAAM,KAAK,QAAQ;AAAA,MAC5B,QAAQ,MAAM,KAAK,OAAO;AAAA,MAC1B,MAAM,KAAK,MAAM;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAEA,UAAU,MAAM;AACd,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ;AAC3C,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,QAAI,KAAK,MAAM,OAAQ,MAAK,MAAM,OAAO;AACzC,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,mBAAmB,WAA2B;AAC5C,QAAI,CAAC,KAAK,MAAM,aAAa,UAAU,UAAU,KAAK,MAAM,OAAO;AACjE,WAAK,oBAAoB;AACzB,YAAM,mBAAmB,KAAK,MAAO,MAAM;AAC3C,WAAK,MAAO,SAAS;AAAA,QACnB,SAAS;AAAA,UACP,MAAM;AAAA,UACN,IAAI,KAAK,MAAO,MAAM,IAAI;AAAA,UAC1B,QAAQ,KAAK,cAAc,KAAK,MAAM,KAAK;AAAA,QAC7C;AAAA,QACA,WAAW;AAAA,QACX,gBAAgB;AAAA,MAClB,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,WAAW,CAAC,OAAgB;AAC1B,QAAI,KAAK,mBAAmB;AAC1B,WAAK,oBAAoB;AACzB,WAAK,SAAS;AAAA,QACZ,WAAW,KAAK,MAAO,MAAM,IAAI,SAAS;AAAA,MAC5C,CAAC;AACD;AAAA,IACF;AACA,UAAM,UAAU,KAAK,MAAO,MAAM,IAAI,SAAS;AAE/C,QAAI,KAAK,MAAM,cAAc,SAAS;AACpC,UAAI,aAAa;AACjB,UAAI;AACF,sBAAc,KAAK,MAAM,OAAO;AAAA,MAClC,SAAQ,MAAM;AACZ,cAAM;AACN,gBAAQ,KAAK,IAAI;AAAA,MACnB;AAEA,UAAI,CAAC,KAAK;AACR,YAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,WAAW;AAAA,MAC1D;AAAA,IACF;AAEA,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,eAAc,eAAY,eAAc,eAAY,QAAO,OAAO,EAAC,QAAQ,OAAM,GACrG;AAAA,MAAC;AAAA;AAAA,QACC,WAAW,WAAW,wBAAwB,KAAK,MAAM,SAAS;AAAA,QAClE,KAAK,CAAC,OAAO;AAAC,eAAK,MAAM;AAAA,QAAG;AAAA;AAAA,IAC9B,GACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cf24112519e06488e6bd4c982a8e685ac2a0e6cd"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ci=function(){return s},s}ci();class Twe extends On.Component{static defaultProps=(ci().s[0]++,{onFocus:()=>{ci().f[0]++},onBlur:()=>{ci().f[1]++}});_view;_el=(ci().s[1]++,null);_cancelNextChange=(ci().s[2]++,!1);constructor(e){ci().f[2]++,ci().s[3]++,super(e),ci().s[4]++,this.state={isEditing:!1,prevValue:this.getPrettyJson(this.props.value)}}getPrettyJson(e){return ci().f[3]++,ci().s[5]++,JCe(e,{indent:2,maxLength:40})}componentDidMount(){ci().f[4]++,ci().s[6]++,this._view=Iwe({parent:this._el,value:this.getPrettyJson(this.props.value),lintType:(ci().b[0][0]++,this.props.lintType||(ci().b[0][1]++,"layer")),onChange:e=>(ci().f[5]++,ci().s[7]++,this.onChange(e)),onFocus:()=>(ci().f[6]++,ci().s[8]++,this.onFocus()),onBlur:()=>(ci().f[7]++,ci().s[9]++,this.onBlur()),spec:this.props.spec})}onFocus=(ci().s[10]++,()=>{ci().f[8]++,ci().s[11]++,this.props.onFocus?(ci().b[1][0]++,ci().s[12]++,this.props.onFocus()):ci().b[1][1]++,ci().s[13]++,this.setState({isEditing:!0})});onBlur=(ci().s[14]++,()=>{ci().f[9]++,ci().s[15]++,this.props.onBlur?(ci().b[2][0]++,ci().s[16]++,this.props.onBlur()):ci().b[2][1]++,ci().s[17]++,this.setState({isEditing:!1})});componentDidUpdate(e){if(ci().f[10]++,ci().s[18]++,ci().b[4][0]++,!this.state.isEditing&&(ci().b[4][1]++,e.value!==this.props.value)){ci().b[3][0]++,ci().s[19]++,this._cancelNextChange=!0;const t=(ci().s[20]++,this._view.state.selection);ci().s[21]++,this._view.dispatch({changes:{from:0,to:this._view.state.doc.length,insert:this.getPrettyJson(this.props.value)},selection:t,scrollIntoView:!0})}else ci().b[3][1]++}onChange=(ci().s[22]++,e=>{if(ci().f[11]++,ci().s[23]++,this._cancelNextChange){ci().b[5][0]++,ci().s[24]++,this._cancelNextChange=!1,ci().s[25]++,this.setState({prevValue:this._view.state.doc.toString()}),ci().s[26]++;return}else ci().b[5][1]++;const t=(ci().s[27]++,this._view.state.doc.toString());if(ci().s[28]++,this.state.prevValue!==t){ci().b[6][0]++;let i,r;ci().s[29]++;try{ci().s[30]++,i=JSON.parse(t)}catch(o){ci().s[31]++,r=o,ci().s[32]++,console.warn(o)}ci().s[33]++,r?ci().b[7][1]++:(ci().b[7][0]++,ci().s[34]++,this.props.onChange?(ci().b[8][0]++,ci().s[35]++,this.props.onChange(i)):ci().b[8][1]++)}else ci().b[6][1]++;ci().s[36]++,this.setState({prevValue:t})});render(){return ci().f[12]++,ci().s[37]++,te.jsx("div",{className:"json-editor","data-wd-key":"json-editor","aria-hidden":"true",style:{cursor:"text"},children:te.jsx("div",{className:x0("codemirror-container",this.props.className),ref:e=>{ci().f[13]++,ci().s[38]++,this._el=e}})})}}const Zie=(ci().s[39]++,Mo()(Twe));function v2(){var n="/home/runner/work/maputnik/maputnik/src/components/CodeEditor.tsx",e="f03c466cea7ee39fb10a8d84cec1e620e7e892a5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/CodeEditor.tsx",statementMap:{0:{start:{line:4,column:27},end:{line:18,column:1}},1:{start:{line:5,column:2},end:{line:17,column:7}},2:{start:{line:19,column:19},end:{line:19,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:27},end:{line:4,column:28}},loc:{start:{line:4,column:38},end:{line:18,column:1}},line:4}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/CodeEditor.tsx"],names:[],mappings:"AAcS,mBACL,KADK;AAdT,OAAO,eAAe;AAEtB,SAAS,uBAA6C;AAUtD,MAAM,qBAAgD,CAAC,UAAU;AAE/D,SAAO,iCACL;AAAA,wBAAC,YAAO,WAAU,mBAAkB,SAAS,MAAM,SAAS,cAAY,MAAM,EAAE,OAAO,GAAG,OAAO,EAAE,UAAU,UAAU,KAAK,KAAK,QAAQ,EAAE,GAAI,gBAAM,EAAE,2BAA2B,GAAE;AAAA,IACpL;AAAA,MAAC;AAAA;AAAA,QACC,UAAS;AAAA,QACT,OAAO,MAAM;AAAA,QACb,UAAU,MAAM;AAAA,QAChB,WAAW;AAAA;AAAA,IACb;AAAA,IAAE;AAAA,KACJ;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AAEvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f03c466cea7ee39fb10a8d84cec1e620e7e892a5"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return v2=function(){return s},s}v2();v2().s[0]++;const kwe=n=>(v2().f[0]++,v2().s[1]++,te.jsxs(te.Fragment,{children:[te.jsx("button",{className:"maputnik-button",onClick:n.onClose,"aria-label":n.t("Close"),style:{position:"sticky",top:"0",zIndex:1},children:n.t("Click to close the editor")}),te.jsx(Zie,{lintType:"style",value:n.value,onChange:n.onChange,className:"maputnik-code-editor"}),";"]})),Dwe=(v2().s[2]++,Mo()(kwe));var W3=JR();function Rwe(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return yt.useMemo(()=>i=>{e.forEach(r=>r(i))},e)}const CB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function L2(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function OU(n){return"nodeType"in n}function vd(n){var e,t;return n?L2(n)?n:OU(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function IU(n){const{Document:e}=vd(n);return n instanceof e}function g5(n){return L2(n)?!1:n instanceof vd(n).HTMLElement}function Xie(n){return n instanceof vd(n).SVGElement}function U2(n){return n?L2(n)?n.document:OU(n)?IU(n)?n:g5(n)||Xie(n)?n.ownerDocument:document:document:document}const y0=CB?yt.useLayoutEffect:yt.useEffect;function TU(n){const e=yt.useRef(n);return y0(()=>{e.current=n}),yt.useCallback(function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.current==null?void 0:e.current(...i)},[])}function Pwe(){const n=yt.useRef(null),e=yt.useCallback((i,r)=>{n.current=setInterval(i,r)},[]),t=yt.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,t]}function gM(n,e){e===void 0&&(e=[n]);const t=yt.useRef(n);return y0(()=>{t.current!==n&&(t.current=n)},e),t}function y5(n,e){const t=yt.useRef();return yt.useMemo(()=>{const i=n(t.current);return t.current=i,i},[...e])}function NE(n){const e=TU(n),t=yt.useRef(null),i=yt.useCallback(r=>{r!==t.current&&e?.(r,t.current),t.current=r},[]);return[t,i]}function wR(n){const e=yt.useRef();return yt.useEffect(()=>{e.current=n},[n]),e.current}let eI={};function v5(n,e){return yt.useMemo(()=>{if(e)return e;const t=eI[n]==null?0:eI[n]+1;return eI[n]=t,n+"-"+t},[n,e])}function Jie(n){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return i.reduce((o,s)=>{const a=Object.entries(s);for(const[c,f]of a){const y=o[c];y!=null&&(o[c]=y+n*f)}return o},{...e})}}const Qx=Jie(1),GE=Jie(-1);function Lwe(n){return"clientX"in n&&"clientY"in n}function kU(n){if(!n)return!1;const{KeyboardEvent:e}=vd(n.target);return e&&n instanceof e}function Uwe(n){if(!n)return!1;const{TouchEvent:e}=vd(n.target);return e&&n instanceof e}function SR(n){if(Uwe(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return Lwe(n)?{x:n.clientX,y:n.clientY}:null}const yM=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[yM.Translate.toString(n),yM.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:i}=n;return e+" "+t+"ms "+i}}}),vW="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Kwe(n){return n.matches(vW)?n:n.querySelector(vW)}const Fwe={display:"none"};function zwe(n){let{id:e,value:t}=n;return On.createElement("div",{id:e,style:Fwe},t)}function jwe(n){let{id:e,announcement:t,ariaLiveType:i="assertive"}=n;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return On.createElement("div",{id:e,style:r,role:"status","aria-live":i,"aria-atomic":!0},t)}function Nwe(){const[n,e]=yt.useState("");return{announce:yt.useCallback(i=>{i!=null&&e(i)},[]),announcement:n}}const ere=yt.createContext(null);function Gwe(n){const e=yt.useContext(ere);yt.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function Wwe(){const[n]=yt.useState(()=>new Set),e=yt.useCallback(i=>(n.add(i),()=>n.delete(i)),[n]);return[yt.useCallback(i=>{let{type:r,event:o}=i;n.forEach(s=>{var a;return(a=s[r])==null?void 0:a.call(s,o)})},[n]),e]}const Qwe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},qwe={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Ywe(n){let{announcements:e=qwe,container:t,hiddenTextDescribedById:i,screenReaderInstructions:r=Qwe}=n;const{announce:o,announcement:s}=Nwe(),a=v5("DndLiveRegion"),[c,f]=yt.useState(!1);if(yt.useEffect(()=>{f(!0)},[]),Gwe(yt.useMemo(()=>({onDragStart(_){let{active:E}=_;o(e.onDragStart({active:E}))},onDragMove(_){let{active:E,over:I}=_;e.onDragMove&&o(e.onDragMove({active:E,over:I}))},onDragOver(_){let{active:E,over:I}=_;o(e.onDragOver({active:E,over:I}))},onDragEnd(_){let{active:E,over:I}=_;o(e.onDragEnd({active:E,over:I}))},onDragCancel(_){let{active:E,over:I}=_;o(e.onDragCancel({active:E,over:I}))}}),[o,e])),!c)return null;const y=On.createElement(On.Fragment,null,On.createElement(zwe,{id:i,value:r.draggable}),On.createElement(jwe,{id:a,announcement:s}));return t?W3.createPortal(y,t):y}var Yu;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(Yu||(Yu={}));function WE(){}function Vwe(n,e){return yt.useMemo(()=>({sensor:n,options:e??{}}),[n,e])}function $we(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return yt.useMemo(()=>[...e].filter(i=>i!=null),[...e])}const Fm=Object.freeze({x:0,y:0});function Hwe(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function Zwe(n,e){let{data:{value:t}}=n,{data:{value:i}}=e;return t-i}function Xwe(n,e){let{data:{value:t}}=n,{data:{value:i}}=e;return i-t}function Jwe(n,e){if(!n||n.length===0)return null;const[t]=n;return t[e]}function bW(n,e,t){return e===void 0&&(e=n.left),t===void 0&&(t=n.top),{x:e+n.width*.5,y:t+n.height*.5}}const eSe=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=n;const r=bW(e,e.left,e.top),o=[];for(const s of i){const{id:a}=s,c=t.get(a);if(c){const f=Hwe(bW(c),r);o.push({id:a,data:{droppableContainer:s,value:f}})}}return o.sort(Zwe)};function tSe(n,e){const t=Math.max(e.top,n.top),i=Math.max(e.left,n.left),r=Math.min(e.left+e.width,n.left+n.width),o=Math.min(e.top+e.height,n.top+n.height),s=r-i,a=o-t;if(i<r&&t<o){const c=e.width*e.height,f=n.width*n.height,y=s*a,_=y/(c+f-y);return Number(_.toFixed(4))}return 0}const nSe=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=n;const r=[];for(const o of i){const{id:s}=o,a=t.get(s);if(a){const c=tSe(a,e);c>0&&r.push({id:s,data:{droppableContainer:o,value:c}})}}return r.sort(Xwe)};function iSe(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function tre(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:Fm}function rSe(n){return function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return r.reduce((s,a)=>({...s,top:s.top+n*a.y,bottom:s.bottom+n*a.y,left:s.left+n*a.x,right:s.right+n*a.x}),{...t})}}const oSe=rSe(1);function sSe(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function aSe(n,e,t){const i=sSe(e);if(!i)return n;const{scaleX:r,scaleY:o,x:s,y:a}=i,c=n.left-s-(1-r)*parseFloat(t),f=n.top-a-(1-o)*parseFloat(t.slice(t.indexOf(" ")+1)),y=r?n.width/r:n.width,_=o?n.height/o:n.height;return{width:y,height:_,top:f,right:c+y,bottom:f+_,left:c}}const lSe={ignoreTransform:!1};function K2(n,e){e===void 0&&(e=lSe);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:f,transformOrigin:y}=vd(n).getComputedStyle(n);f&&(t=aSe(t,f,y))}const{top:i,left:r,width:o,height:s,bottom:a,right:c}=t;return{top:i,left:r,width:o,height:s,bottom:a,right:c}}function CW(n){return K2(n,{ignoreTransform:!0})}function uSe(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function cSe(n,e){return e===void 0&&(e=vd(n).getComputedStyle(n)),e.position==="fixed"}function ASe(n,e){e===void 0&&(e=vd(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const o=e[r];return typeof o=="string"?t.test(o):!1})}function DU(n,e){const t=[];function i(r){if(e!=null&&t.length>=e||!r)return t;if(IU(r)&&r.scrollingElement!=null&&!t.includes(r.scrollingElement))return t.push(r.scrollingElement),t;if(!g5(r)||Xie(r)||t.includes(r))return t;const o=vd(n).getComputedStyle(r);return r!==n&&ASe(r,o)&&t.push(r),cSe(r,o)?t:i(r.parentNode)}return n?i(n):t}function nre(n){const[e]=DU(n,1);return e??null}function tI(n){return!CB||!n?null:L2(n)?n:OU(n)?IU(n)||n===U2(n).scrollingElement?window:g5(n)?n:null:null}function ire(n){return L2(n)?n.scrollX:n.scrollLeft}function rre(n){return L2(n)?n.scrollY:n.scrollTop}function ER(n){return{x:ire(n),y:rre(n)}}var xc;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(xc||(xc={}));function ore(n){return!CB||!n?!1:n===document.scrollingElement}function sre(n){const e={x:0,y:0},t=ore(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},i={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height},r=n.scrollTop<=e.y,o=n.scrollLeft<=e.x,s=n.scrollTop>=i.y,a=n.scrollLeft>=i.x;return{isTop:r,isLeft:o,isBottom:s,isRight:a,maxScroll:i,minScroll:e}}const hSe={x:.2,y:.2};function dSe(n,e,t,i,r){let{top:o,left:s,right:a,bottom:c}=t;i===void 0&&(i=10),r===void 0&&(r=hSe);const{isTop:f,isBottom:y,isLeft:_,isRight:E}=sre(n),I={x:0,y:0},P={x:0,y:0},K={height:e.height*r.y,width:e.width*r.x};return!f&&o<=e.top+K.height?(I.y=xc.Backward,P.y=i*Math.abs((e.top+K.height-o)/K.height)):!y&&c>=e.bottom-K.height&&(I.y=xc.Forward,P.y=i*Math.abs((e.bottom-K.height-c)/K.height)),!E&&a>=e.right-K.width?(I.x=xc.Forward,P.x=i*Math.abs((e.right-K.width-a)/K.width)):!_&&s<=e.left+K.width&&(I.x=xc.Backward,P.x=i*Math.abs((e.left+K.width-s)/K.width)),{direction:I,speed:P}}function fSe(n){if(n===document.scrollingElement){const{innerWidth:o,innerHeight:s}=window;return{top:0,left:0,right:o,bottom:s,width:o,height:s}}const{top:e,left:t,right:i,bottom:r}=n.getBoundingClientRect();return{top:e,left:t,right:i,bottom:r,width:n.clientWidth,height:n.clientHeight}}function are(n){return n.reduce((e,t)=>Qx(e,ER(t)),Fm)}function pSe(n){return n.reduce((e,t)=>e+ire(t),0)}function mSe(n){return n.reduce((e,t)=>e+rre(t),0)}function gSe(n,e){if(e===void 0&&(e=K2),!n)return;const{top:t,left:i,bottom:r,right:o}=e(n);nre(n)&&(r<=0||o<=0||t>=window.innerHeight||i>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const ySe=[["x",["left","right"],pSe],["y",["top","bottom"],mSe]];class RU{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=DU(t),r=are(i);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,s,a]of ySe)for(const c of s)Object.defineProperty(this,c,{get:()=>{const f=a(i),y=r[o]-f;return this.rect[c]+y},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class p4{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...t)})},this.target=e}add(e,t,i){var r;(r=this.target)==null||r.addEventListener(e,t,i),this.listeners.push([e,t,i])}}function vSe(n){const{EventTarget:e}=vd(n);return n instanceof e?n:U2(n)}function nI(n,e){const t=Math.abs(n.x),i=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+i**2)>e:"x"in e&&"y"in e?t>e.x&&i>e.y:"x"in e?t>e.x:"y"in e?i>e.y:!1}var up;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(up||(up={}));function _W(n){n.preventDefault()}function bSe(n){n.stopPropagation()}var Cs;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(Cs||(Cs={}));const lre={start:[Cs.Space,Cs.Enter],cancel:[Cs.Esc],end:[Cs.Space,Cs.Enter,Cs.Tab]},CSe=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case Cs.Right:return{...t,x:t.x+25};case Cs.Left:return{...t,x:t.x-25};case Cs.Down:return{...t,y:t.y+25};case Cs.Up:return{...t,y:t.y-25}}};class ure{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new p4(U2(t)),this.windowListeners=new p4(vd(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(up.Resize,this.handleCancel),this.windowListeners.add(up.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(up.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,i=e.node.current;i&&gSe(i),t(Fm)}handleKeyDown(e){if(kU(e)){const{active:t,context:i,options:r}=this.props,{keyboardCodes:o=lre,coordinateGetter:s=CSe,scrollBehavior:a="smooth"}=r,{code:c}=e;if(o.end.includes(c)){this.handleEnd(e);return}if(o.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:f}=i.current,y=f?{x:f.left,y:f.top}:Fm;this.referenceCoordinates||(this.referenceCoordinates=y);const _=s(e,{active:t,context:i.current,currentCoordinates:y});if(_){const E=GE(_,y),I={x:0,y:0},{scrollableAncestors:P}=i.current;for(const K of P){const z=e.code,{isTop:Q,isRight:V,isLeft:$,isBottom:Z,maxScroll:ee,minScroll:X}=sre(K),W=fSe(K),se={x:Math.min(z===Cs.Right?W.right-W.width/2:W.right,Math.max(z===Cs.Right?W.left:W.left+W.width/2,_.x)),y:Math.min(z===Cs.Down?W.bottom-W.height/2:W.bottom,Math.max(z===Cs.Down?W.top:W.top+W.height/2,_.y))},ue=z===Cs.Right&&!V||z===Cs.Left&&!$,ve=z===Cs.Down&&!Z||z===Cs.Up&&!Q;if(ue&&se.x!==_.x){const ye=K.scrollLeft+E.x,Ee=z===Cs.Right&&ye<=ee.x||z===Cs.Left&&ye>=X.x;if(Ee&&!E.y){K.scrollTo({left:ye,behavior:a});return}Ee?I.x=K.scrollLeft-ye:I.x=z===Cs.Right?K.scrollLeft-ee.x:K.scrollLeft-X.x,I.x&&K.scrollBy({left:-I.x,behavior:a});break}else if(ve&&se.y!==_.y){const ye=K.scrollTop+E.y,Ee=z===Cs.Down&&ye<=ee.y||z===Cs.Up&&ye>=X.y;if(Ee&&!E.x){K.scrollTo({top:ye,behavior:a});return}Ee?I.y=K.scrollTop-ye:I.y=z===Cs.Down?K.scrollTop-ee.y:K.scrollTop-X.y,I.y&&K.scrollBy({top:-I.y,behavior:a});break}}this.handleMove(e,Qx(GE(_,this.referenceCoordinates),I))}}}handleMove(e,t){const{onMove:i}=this.props;e.preventDefault(),i(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ure.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:i=lre,onActivation:r}=e,{active:o}=t;const{code:s}=n.nativeEvent;if(i.start.includes(s)){const a=o.activatorNode.current;return a&&n.target!==a?!1:(n.preventDefault(),r?.({event:n.nativeEvent}),!0)}return!1}}];function xW(n){return!!(n&&"distance"in n)}function MW(n){return!!(n&&"delay"in n)}class PU{constructor(e,t,i){var r;i===void 0&&(i=vSe(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:o}=e,{target:s}=o;this.props=e,this.events=t,this.document=U2(s),this.documentListeners=new p4(this.document),this.listeners=new p4(i),this.windowListeners=new p4(vd(s)),this.initialCoordinates=(r=SR(o))!=null?r:Fm,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:i}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(up.Resize,this.handleCancel),this.windowListeners.add(up.DragStart,_W),this.windowListeners.add(up.VisibilityChange,this.handleCancel),this.windowListeners.add(up.ContextMenu,_W),this.documentListeners.add(up.Keydown,this.handleKeydown),t){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(MW(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(xW(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:i,onPending:r}=this.props;r(i,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(up.Click,bSe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(up.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:i,initialCoordinates:r,props:o}=this,{onMove:s,options:{activationConstraint:a}}=o;if(!r)return;const c=(t=SR(e))!=null?t:Fm,f=GE(r,c);if(!i&&a){if(xW(a)){if(a.tolerance!=null&&nI(f,a.tolerance))return this.handleCancel();if(nI(f,a.distance))return this.handleStart()}if(MW(a)&&nI(f,a.tolerance))return this.handleCancel();this.handlePending(a,f);return}e.cancelable&&e.preventDefault(),s(c)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Cs.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const _Se={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class LU extends PU{constructor(e){const{event:t}=e,i=U2(t.target);super(e,_Se,i)}}LU.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;return!t.isPrimary||t.button!==0?!1:(i?.({event:t}),!0)}}];const xSe={move:{name:"mousemove"},end:{name:"mouseup"}};var BR;(function(n){n[n.RightClick=2]="RightClick"})(BR||(BR={}));class MSe extends PU{constructor(e){super(e,xSe,U2(e.event.target))}}MSe.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;return t.button===BR.RightClick?!1:(i?.({event:t}),!0)}}];const iI={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class wSe extends PU{constructor(e){super(e,iI)}static setup(){return window.addEventListener(iI.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(iI.move.name,e)};function e(){}}}wSe.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;const{touches:r}=t;return r.length>1?!1:(i?.({event:t}),!0)}}];var m4;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(m4||(m4={}));var QE;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(QE||(QE={}));function SSe(n){let{acceleration:e,activator:t=m4.Pointer,canScroll:i,draggingRect:r,enabled:o,interval:s=5,order:a=QE.TreeOrder,pointerCoordinates:c,scrollableAncestors:f,scrollableAncestorRects:y,delta:_,threshold:E}=n;const I=BSe({delta:_,disabled:!o}),[P,K]=Pwe(),z=yt.useRef({x:0,y:0}),Q=yt.useRef({x:0,y:0}),V=yt.useMemo(()=>{switch(t){case m4.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case m4.DraggableRect:return r}},[t,r,c]),$=yt.useRef(null),Z=yt.useCallback(()=>{const X=$.current;if(!X)return;const W=z.current.x*Q.current.x,se=z.current.y*Q.current.y;X.scrollBy(W,se)},[]),ee=yt.useMemo(()=>a===QE.TreeOrder?[...f].reverse():f,[a,f]);yt.useEffect(()=>{if(!o||!f.length||!V){K();return}for(const X of ee){if(i?.(X)===!1)continue;const W=f.indexOf(X),se=y[W];if(!se)continue;const{direction:ue,speed:ve}=dSe(X,se,V,e,E);for(const ye of["x","y"])I[ye][ue[ye]]||(ve[ye]=0,ue[ye]=0);if(ve.x>0||ve.y>0){K(),$.current=X,P(Z,s),z.current=ve,Q.current=ue;return}}z.current={x:0,y:0},Q.current={x:0,y:0},K()},[e,Z,i,K,o,s,JSON.stringify(V),JSON.stringify(I),P,f,ee,y,JSON.stringify(E)])}const ESe={x:{[xc.Backward]:!1,[xc.Forward]:!1},y:{[xc.Backward]:!1,[xc.Forward]:!1}};function BSe(n){let{delta:e,disabled:t}=n;const i=wR(e);return y5(r=>{if(t||!i||!r)return ESe;const o={x:Math.sign(e.x-i.x),y:Math.sign(e.y-i.y)};return{x:{[xc.Backward]:r.x[xc.Backward]||o.x===-1,[xc.Forward]:r.x[xc.Forward]||o.x===1},y:{[xc.Backward]:r.y[xc.Backward]||o.y===-1,[xc.Forward]:r.y[xc.Forward]||o.y===1}}},[t,e,i])}function OSe(n,e){const t=e!=null?n.get(e):void 0,i=t?t.node.current:null;return y5(r=>{var o;return e==null?null:(o=i??r)!=null?o:null},[i,e])}function ISe(n,e){return yt.useMemo(()=>n.reduce((t,i)=>{const{sensor:r}=i,o=r.activators.map(s=>({eventName:s.eventName,handler:e(s.handler,i)}));return[...t,...o]},[]),[n,e])}var vM;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(vM||(vM={}));var OR;(function(n){n.Optimized="optimized"})(OR||(OR={}));const wW=new Map;function TSe(n,e){let{dragging:t,dependencies:i,config:r}=e;const[o,s]=yt.useState(null),{frequency:a,measure:c,strategy:f}=r,y=yt.useRef(n),_=z(),E=gM(_),I=yt.useCallback(function(Q){Q===void 0&&(Q=[]),!E.current&&s(V=>V===null?Q:V.concat(Q.filter($=>!V.includes($))))},[E]),P=yt.useRef(null),K=y5(Q=>{if(_&&!t)return wW;if(!Q||Q===wW||y.current!==n||o!=null){const V=new Map;for(let $ of n){if(!$)continue;if(o&&o.length>0&&!o.includes($.id)&&$.rect.current){V.set($.id,$.rect.current);continue}const Z=$.node.current,ee=Z?new RU(c(Z),Z):null;$.rect.current=ee,ee&&V.set($.id,ee)}return V}return Q},[n,o,t,_,c]);return yt.useEffect(()=>{y.current=n},[n]),yt.useEffect(()=>{_||I()},[t,_]),yt.useEffect(()=>{o&&o.length>0&&s(null)},[JSON.stringify(o)]),yt.useEffect(()=>{_||typeof a!="number"||P.current!==null||(P.current=setTimeout(()=>{I(),P.current=null},a))},[a,_,I,...i]),{droppableRects:K,measureDroppableContainers:I,measuringScheduled:o!=null};function z(){switch(f){case vM.Always:return!1;case vM.BeforeDragging:return t;default:return!t}}}function cre(n,e){return y5(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function kSe(n,e){return cre(n,e)}function DSe(n){let{callback:e,disabled:t}=n;const i=TU(e),r=yt.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(i)},[i,t]);return yt.useEffect(()=>()=>r?.disconnect(),[r]),r}function _B(n){let{callback:e,disabled:t}=n;const i=TU(e),r=yt.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(i)},[t]);return yt.useEffect(()=>()=>r?.disconnect(),[r]),r}function RSe(n){return new RU(K2(n),n)}function SW(n,e,t){e===void 0&&(e=RSe);const[i,r]=yt.useState(null);function o(){r(c=>{if(!n)return null;if(n.isConnected===!1){var f;return(f=c??t)!=null?f:null}const y=e(n);return JSON.stringify(c)===JSON.stringify(y)?c:y})}const s=DSe({callback(c){if(n)for(const f of c){const{type:y,target:_}=f;if(y==="childList"&&_ instanceof HTMLElement&&_.contains(n)){o();break}}}}),a=_B({callback:o});return y0(()=>{o(),n?(a?.observe(n),s?.observe(document.body,{childList:!0,subtree:!0})):(a?.disconnect(),s?.disconnect())},[n]),i}function PSe(n){const e=cre(n);return tre(n,e)}const EW=[];function LSe(n){const e=yt.useRef(n),t=y5(i=>n?i&&i!==EW&&n&&e.current&&n.parentNode===e.current.parentNode?i:DU(n):EW,[n]);return yt.useEffect(()=>{e.current=n},[n]),t}function USe(n){const[e,t]=yt.useState(null),i=yt.useRef(n),r=yt.useCallback(o=>{const s=tI(o.target);s&&t(a=>a?(a.set(s,ER(s)),new Map(a)):null)},[]);return yt.useEffect(()=>{const o=i.current;if(n!==o){s(o);const a=n.map(c=>{const f=tI(c);return f?(f.addEventListener("scroll",r,{passive:!0}),[f,ER(f)]):null}).filter(c=>c!=null);t(a.length?new Map(a):null),i.current=n}return()=>{s(n),s(o)};function s(a){a.forEach(c=>{const f=tI(c);f?.removeEventListener("scroll",r)})}},[r,n]),yt.useMemo(()=>n.length?e?Array.from(e.values()).reduce((o,s)=>Qx(o,s),Fm):are(n):Fm,[n,e])}function BW(n,e){e===void 0&&(e=[]);const t=yt.useRef(null);return yt.useEffect(()=>{t.current=null},e),yt.useEffect(()=>{const i=n!==Fm;i&&!t.current&&(t.current=n),!i&&t.current&&(t.current=null)},[n]),t.current?GE(n,t.current):Fm}function KSe(n){yt.useEffect(()=>{if(!CB)return;const e=n.map(t=>{let{sensor:i}=t;return i.setup==null?void 0:i.setup()});return()=>{for(const t of e)t?.()}},n.map(e=>{let{sensor:t}=e;return t}))}function FSe(n,e){return yt.useMemo(()=>n.reduce((t,i)=>{let{eventName:r,handler:o}=i;return t[r]=s=>{o(s,e)},t},{}),[n,e])}function Are(n){return yt.useMemo(()=>n?uSe(n):null,[n])}const OW=[];function zSe(n,e){e===void 0&&(e=K2);const[t]=n,i=Are(t?vd(t):null),[r,o]=yt.useState(OW);function s(){o(()=>n.length?n.map(c=>ore(c)?i:new RU(e(c),c)):OW)}const a=_B({callback:s});return y0(()=>{a?.disconnect(),s(),n.forEach(c=>a?.observe(c))},[n]),r}function jSe(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return g5(e)?e:n}function NSe(n){let{measure:e}=n;const[t,i]=yt.useState(null),r=yt.useCallback(f=>{for(const{target:y}of f)if(g5(y)){i(_=>{const E=e(y);return _?{..._,width:E.width,height:E.height}:E});break}},[e]),o=_B({callback:r}),s=yt.useCallback(f=>{const y=jSe(f);o?.disconnect(),y&&o?.observe(y),i(y?e(y):null)},[e,o]),[a,c]=NE(s);return yt.useMemo(()=>({nodeRef:a,rect:t,setRef:c}),[t,a,c])}const GSe=[{sensor:LU,options:{}},{sensor:ure,options:{}}],WSe={current:{}},CS={draggable:{measure:CW},droppable:{measure:CW,strategy:vM.WhileDragging,frequency:OR.Optimized},dragOverlay:{measure:K2}};class g4 extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,i;return(t=(i=this.get(e))==null?void 0:i.node.current)!=null?t:void 0}}const QSe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new g4,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:WE},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:CS,measureDroppableContainers:WE,windowRect:null,measuringScheduled:!1},qSe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:WE,draggableNodes:new Map,over:null,measureDroppableContainers:WE},xB=yt.createContext(qSe),hre=yt.createContext(QSe);function YSe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new g4}}}function VSe(n,e){switch(e.type){case Yu.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Yu.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case Yu.DragEnd:case Yu.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Yu.RegisterDroppable:{const{element:t}=e,{id:i}=t,r=new g4(n.droppable.containers);return r.set(i,t),{...n,droppable:{...n.droppable,containers:r}}}case Yu.SetDroppableDisabled:{const{id:t,key:i,disabled:r}=e,o=n.droppable.containers.get(t);if(!o||i!==o.key)return n;const s=new g4(n.droppable.containers);return s.set(t,{...o,disabled:r}),{...n,droppable:{...n.droppable,containers:s}}}case Yu.UnregisterDroppable:{const{id:t,key:i}=e,r=n.droppable.containers.get(t);if(!r||i!==r.key)return n;const o=new g4(n.droppable.containers);return o.delete(t),{...n,droppable:{...n.droppable,containers:o}}}default:return n}}function $Se(n){let{disabled:e}=n;const{active:t,activatorEvent:i,draggableNodes:r}=yt.useContext(xB),o=wR(i),s=wR(t?.id);return yt.useEffect(()=>{if(!e&&!i&&o&&s!=null){if(!kU(o)||document.activeElement===o.target)return;const a=r.get(s);if(!a)return;const{activatorNode:c,node:f}=a;if(!c.current&&!f.current)return;requestAnimationFrame(()=>{for(const y of[c.current,f.current]){if(!y)continue;const _=Kwe(y);if(_){_.focus();break}}})}},[i,e,r,s,o]),null}function HSe(n,e){let{transform:t,...i}=e;return n!=null&&n.length?n.reduce((r,o)=>o({transform:r,...i}),t):t}function ZSe(n){return yt.useMemo(()=>({draggable:{...CS.draggable,...n?.draggable},droppable:{...CS.droppable,...n?.droppable},dragOverlay:{...CS.dragOverlay,...n?.dragOverlay}}),[n?.draggable,n?.droppable,n?.dragOverlay])}function XSe(n){let{activeNode:e,measure:t,initialRect:i,config:r=!0}=n;const o=yt.useRef(!1),{x:s,y:a}=typeof r=="boolean"?{x:r,y:r}:r;y0(()=>{if(!s&&!a||!e){o.current=!1;return}if(o.current||!i)return;const f=e?.node.current;if(!f||f.isConnected===!1)return;const y=t(f),_=tre(y,i);if(s||(_.x=0),a||(_.y=0),o.current=!0,Math.abs(_.x)>0||Math.abs(_.y)>0){const E=nre(f);E&&E.scrollBy({top:_.y,left:_.x})}},[e,s,a,i,t])}const dre=yt.createContext({...Fm,scaleX:1,scaleY:1});var Jy;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(Jy||(Jy={}));const JSe=yt.memo(function(e){var t,i,r,o;let{id:s,accessibility:a,autoScroll:c=!0,children:f,sensors:y=GSe,collisionDetection:_=nSe,measuring:E,modifiers:I,...P}=e;const K=yt.useReducer(VSe,void 0,YSe),[z,Q]=K,[V,$]=Wwe(),[Z,ee]=yt.useState(Jy.Uninitialized),X=Z===Jy.Initialized,{draggable:{active:W,nodes:se,translate:ue},droppable:{containers:ve}}=z,ye=W!=null?se.get(W):null,Ee=yt.useRef({initial:null,translated:null}),_e=yt.useMemo(()=>{var Re;return W!=null?{id:W,data:(Re=ye?.data)!=null?Re:WSe,rect:Ee}:null},[W,ye]),Be=yt.useRef(null),[Fe,Se]=yt.useState(null),[qe,ut]=yt.useState(null),ht=gM(P,Object.values(P)),De=v5("DndDescribedBy",s),Ie=yt.useMemo(()=>ve.getEnabled(),[ve]),ze=ZSe(E),{droppableRects:Te,measureDroppableContainers:vt,measuringScheduled:st}=TSe(Ie,{dragging:X,dependencies:[ue.x,ue.y],config:ze.droppable}),Et=OSe(se,W),Pt=yt.useMemo(()=>qe?SR(qe):null,[qe]),ke=rt(),Oe=kSe(Et,ze.draggable.measure);XSe({activeNode:W!=null?se.get(W):null,config:ke.layoutShiftCompensation,initialRect:Oe,measure:ze.draggable.measure});const we=SW(Et,ze.draggable.measure,Oe),Ye=SW(Et?Et.parentElement:null),ft=yt.useRef({activatorEvent:null,active:null,activeNode:Et,collisionRect:null,collisions:null,droppableRects:Te,draggableNodes:se,draggingNode:null,draggingNodeRect:null,droppableContainers:ve,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),dt=ve.getNodeFor((t=ft.current.over)==null?void 0:t.id),gt=NSe({measure:ze.dragOverlay.measure}),Lt=(i=gt.nodeRef.current)!=null?i:Et,Tt=X?(r=gt.rect)!=null?r:we:null,Zt=!!(gt.nodeRef.current&&gt.rect),Fn=PSe(Zt?null:we),Ln=Are(Lt?vd(Lt):null),fi=LSe(X?dt??Et:null),Rn=zSe(fi),Dn=HSe(I,{transform:{x:ue.x-Fn.x,y:ue.y-Fn.y,scaleX:1,scaleY:1},activatorEvent:qe,active:_e,activeNodeRect:we,containerNodeRect:Ye,draggingNodeRect:Tt,over:ft.current.over,overlayNodeRect:gt.rect,scrollableAncestors:fi,scrollableAncestorRects:Rn,windowRect:Ln}),wn=Pt?Qx(Pt,ue):null,qn=USe(fi),En=BW(qn),wt=BW(qn,[we]),be=Qx(Dn,En),re=Tt?oSe(Tt,Dn):null,ce=_e&&re?_({active:_e,collisionRect:re,droppableRects:Te,droppableContainers:Ie,pointerCoordinates:wn}):null,Pe=Jwe(ce,"id"),[tt,xt]=yt.useState(null),It=Zt?Dn:Qx(Dn,wt),_n=iSe(It,(o=tt?.rect)!=null?o:null,we),Xe=yt.useRef(null),ae=yt.useCallback((Re,at)=>{let{sensor:St,options:Bt}=at;if(Be.current==null)return;const kt=se.get(Be.current);if(!kt)return;const sn=Re.nativeEvent,Tn=new St({active:Be.current,activeNode:kt,event:sn,options:Bt,context:ft,onAbort(vi){if(!se.get(vi))return;const{onDragAbort:Zn}=ht.current,Mi={id:vi};Zn?.(Mi),V({type:"onDragAbort",event:Mi})},onPending(vi,ui,Zn,Mi){if(!se.get(vi))return;const{onDragPending:$i}=ht.current,bi={id:vi,constraint:ui,initialCoordinates:Zn,offset:Mi};$i?.(bi),V({type:"onDragPending",event:bi})},onStart(vi){const ui=Be.current;if(ui==null)return;const Zn=se.get(ui);if(!Zn)return;const{onDragStart:Mi}=ht.current,nn={activatorEvent:sn,active:{id:ui,data:Zn.data,rect:Ee}};W3.unstable_batchedUpdates(()=>{Mi?.(nn),ee(Jy.Initializing),Q({type:Yu.DragStart,initialCoordinates:vi,active:ui}),V({type:"onDragStart",event:nn}),Se(Xe.current),ut(sn)})},onMove(vi){Q({type:Yu.DragMove,coordinates:vi})},onEnd:Yn(Yu.DragEnd),onCancel:Yn(Yu.DragCancel)});Xe.current=Tn;function Yn(vi){return async function(){const{active:Zn,collisions:Mi,over:nn,scrollAdjustedTranslate:$i}=ft.current;let bi=null;if(Zn&&$i){const{cancelDrop:to}=ht.current;bi={activatorEvent:sn,active:Zn,collisions:Mi,delta:$i,over:nn},vi===Yu.DragEnd&&typeof to=="function"&&await Promise.resolve(to(bi))&&(vi=Yu.DragCancel)}Be.current=null,W3.unstable_batchedUpdates(()=>{Q({type:vi}),ee(Jy.Uninitialized),xt(null),Se(null),ut(null),Xe.current=null;const to=vi===Yu.DragEnd?"onDragEnd":"onDragCancel";if(bi){const tr=ht.current[to];tr?.(bi),V({type:to,event:bi})}})}}},[se]),he=yt.useCallback((Re,at)=>(St,Bt)=>{const kt=St.nativeEvent,sn=se.get(Bt);if(Be.current!==null||!sn||kt.dndKit||kt.defaultPrevented)return;const Tn={active:sn};Re(St,at.options,Tn)===!0&&(kt.dndKit={capturedBy:at.sensor},Be.current=Bt,ae(St,at))},[se,ae]),C=ISe(y,he);KSe(y),y0(()=>{we&&Z===Jy.Initializing&&ee(Jy.Initialized)},[we,Z]),yt.useEffect(()=>{const{onDragMove:Re}=ht.current,{active:at,activatorEvent:St,collisions:Bt,over:kt}=ft.current;if(!at||!St)return;const sn={active:at,activatorEvent:St,collisions:Bt,delta:{x:be.x,y:be.y},over:kt};W3.unstable_batchedUpdates(()=>{Re?.(sn),V({type:"onDragMove",event:sn})})},[be.x,be.y]),yt.useEffect(()=>{const{active:Re,activatorEvent:at,collisions:St,droppableContainers:Bt,scrollAdjustedTranslate:kt}=ft.current;if(!Re||Be.current==null||!at||!kt)return;const{onDragOver:sn}=ht.current,Tn=Bt.get(Pe),Yn=Tn&&Tn.rect.current?{id:Tn.id,rect:Tn.rect.current,data:Tn.data,disabled:Tn.disabled}:null,vi={active:Re,activatorEvent:at,collisions:St,delta:{x:kt.x,y:kt.y},over:Yn};W3.unstable_batchedUpdates(()=>{xt(Yn),sn?.(vi),V({type:"onDragOver",event:vi})})},[Pe]),y0(()=>{ft.current={activatorEvent:qe,active:_e,activeNode:Et,collisionRect:re,collisions:ce,droppableRects:Te,draggableNodes:se,draggingNode:Lt,draggingNodeRect:Tt,droppableContainers:ve,over:tt,scrollableAncestors:fi,scrollAdjustedTranslate:be},Ee.current={initial:Tt,translated:re}},[_e,Et,ce,re,se,Lt,Tt,Te,ve,tt,fi,be]),SSe({...ke,delta:ue,draggingRect:re,pointerCoordinates:wn,scrollableAncestors:fi,scrollableAncestorRects:Rn});const Ke=yt.useMemo(()=>({active:_e,activeNode:Et,activeNodeRect:we,activatorEvent:qe,collisions:ce,containerNodeRect:Ye,dragOverlay:gt,draggableNodes:se,droppableContainers:ve,droppableRects:Te,over:tt,measureDroppableContainers:vt,scrollableAncestors:fi,scrollableAncestorRects:Rn,measuringConfiguration:ze,measuringScheduled:st,windowRect:Ln}),[_e,Et,we,qe,ce,Ye,gt,se,ve,Te,tt,vt,fi,Rn,ze,st,Ln]),$e=yt.useMemo(()=>({activatorEvent:qe,activators:C,active:_e,activeNodeRect:we,ariaDescribedById:{draggable:De},dispatch:Q,draggableNodes:se,over:tt,measureDroppableContainers:vt}),[qe,C,_e,we,Q,De,se,tt,vt]);return On.createElement(ere.Provider,{value:$},On.createElement(xB.Provider,{value:$e},On.createElement(hre.Provider,{value:Ke},On.createElement(dre.Provider,{value:_n},f)),On.createElement($Se,{disabled:a?.restoreFocus===!1})),On.createElement(Ywe,{...a,hiddenTextDescribedById:De}));function rt(){const Re=Fe?.autoScrollEnabled===!1,at=typeof c=="object"?c.enabled===!1:c===!1,St=X&&!Re&&!at;return typeof c=="object"?{...c,enabled:St}:{enabled:St}}}),eEe=yt.createContext(null),IW="button",tEe="Draggable";function nEe(n){let{id:e,data:t,disabled:i=!1,attributes:r}=n;const o=v5(tEe),{activators:s,activatorEvent:a,active:c,activeNodeRect:f,ariaDescribedById:y,draggableNodes:_,over:E}=yt.useContext(xB),{role:I=IW,roleDescription:P="draggable",tabIndex:K=0}=r??{},z=c?.id===e,Q=yt.useContext(z?dre:eEe),[V,$]=NE(),[Z,ee]=NE(),X=FSe(s,e),W=gM(t);y0(()=>(_.set(e,{id:e,key:o,node:V,activatorNode:Z,data:W}),()=>{const ue=_.get(e);ue&&ue.key===o&&_.delete(e)}),[_,e]);const se=yt.useMemo(()=>({role:I,tabIndex:K,"aria-disabled":i,"aria-pressed":z&&I===IW?!0:void 0,"aria-roledescription":P,"aria-describedby":y.draggable}),[i,I,K,z,P,y.draggable]);return{active:c,activatorEvent:a,activeNodeRect:f,attributes:se,isDragging:z,listeners:i?void 0:X,node:V,over:E,setNodeRef:$,setActivatorNodeRef:ee,transform:Q}}function iEe(){return yt.useContext(hre)}const rEe="Droppable",oEe={timeout:25};function sEe(n){let{data:e,disabled:t=!1,id:i,resizeObserverConfig:r}=n;const o=v5(rEe),{active:s,dispatch:a,over:c,measureDroppableContainers:f}=yt.useContext(xB),y=yt.useRef({disabled:t}),_=yt.useRef(!1),E=yt.useRef(null),I=yt.useRef(null),{disabled:P,updateMeasurementsFor:K,timeout:z}={...oEe,...r},Q=gM(K??i),V=yt.useCallback(()=>{if(!_.current){_.current=!0;return}I.current!=null&&clearTimeout(I.current),I.current=setTimeout(()=>{f(Array.isArray(Q.current)?Q.current:[Q.current]),I.current=null},z)},[z]),$=_B({callback:V,disabled:P||!s}),Z=yt.useCallback((se,ue)=>{$&&(ue&&($.unobserve(ue),_.current=!1),se&&$.observe(se))},[$]),[ee,X]=NE(Z),W=gM(e);return yt.useEffect(()=>{!$||!ee.current||($.disconnect(),_.current=!1,$.observe(ee.current))},[ee,$]),yt.useEffect(()=>(a({type:Yu.RegisterDroppable,element:{id:i,key:o,disabled:t,node:ee,rect:E,data:W}}),()=>a({type:Yu.UnregisterDroppable,key:o,id:i})),[i]),yt.useEffect(()=>{t!==y.current.disabled&&(a({type:Yu.SetDroppableDisabled,id:i,key:o,disabled:t}),y.current.disabled=t)},[i,o,t,a]),{active:s,rect:E,isOver:c?.id===i,node:ee,over:c,setNodeRef:X}}function fre(n,e,t){const i=n.slice();return i.splice(t<0?i.length+t:t,0,i.splice(e,1)[0]),i}function aEe(n,e){return n.reduce((t,i,r)=>{const o=e.get(i);return o&&(t[r]=o),t},Array(n.length))}function Iw(n){return n!==null&&n>=0}function lEe(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function uEe(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const pre=n=>{let{rects:e,activeIndex:t,overIndex:i,index:r}=n;const o=fre(e,i,t),s=e[r],a=o[r];return!a||!s?null:{x:a.left-s.left,y:a.top-s.top,scaleX:a.width/s.width,scaleY:a.height/s.height}},Tw={scaleX:1,scaleY:1},cEe=n=>{var e;let{activeIndex:t,activeNodeRect:i,index:r,rects:o,overIndex:s}=n;const a=(e=o[t])!=null?e:i;if(!a)return null;if(r===t){const f=o[s];return f?{x:0,y:t<s?f.top+f.height-(a.top+a.height):f.top-a.top,...Tw}:null}const c=AEe(o,r,t);return r>t&&r<=s?{x:0,y:-a.height-c,...Tw}:r<t&&r>=s?{x:0,y:a.height+c,...Tw}:{x:0,y:0,...Tw}};function AEe(n,e,t){const i=n[e],r=n[e-1],o=n[e+1];return i?t<e?r?i.top-(r.top+r.height):o?o.top-(i.top+i.height):0:o?o.top-(i.top+i.height):r?i.top-(r.top+r.height):0:0}const mre="Sortable",gre=On.createContext({activeIndex:-1,containerId:mre,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:pre,disabled:{draggable:!1,droppable:!1}});function hEe(n){let{children:e,id:t,items:i,strategy:r=pre,disabled:o=!1}=n;const{active:s,dragOverlay:a,droppableRects:c,over:f,measureDroppableContainers:y}=iEe(),_=v5(mre,t),E=a.rect!==null,I=yt.useMemo(()=>i.map(X=>typeof X=="object"&&"id"in X?X.id:X),[i]),P=s!=null,K=s?I.indexOf(s.id):-1,z=f?I.indexOf(f.id):-1,Q=yt.useRef(I),V=!lEe(I,Q.current),$=z!==-1&&K===-1||V,Z=uEe(o);y0(()=>{V&&P&&y(I)},[V,I,P,y]),yt.useEffect(()=>{Q.current=I},[I]);const ee=yt.useMemo(()=>({activeIndex:K,containerId:_,disabled:Z,disableTransforms:$,items:I,overIndex:z,useDragOverlay:E,sortedRects:aEe(I,c),strategy:r}),[K,_,Z.draggable,Z.droppable,$,I,z,c,E,r]);return On.createElement(gre.Provider,{value:ee},e)}const dEe=n=>{let{id:e,items:t,activeIndex:i,overIndex:r}=n;return fre(t,i,r).indexOf(e)},fEe=n=>{let{containerId:e,isSorting:t,wasDragging:i,index:r,items:o,newIndex:s,previousItems:a,previousContainerId:c,transition:f}=n;return!f||!i||a!==o&&r===s?!1:t?!0:s!==r&&e===c},pEe={duration:200,easing:"ease"},yre="transform",mEe=yM.Transition.toString({property:yre,duration:0,easing:"linear"}),gEe={roleDescription:"sortable"};function yEe(n){let{disabled:e,index:t,node:i,rect:r}=n;const[o,s]=yt.useState(null),a=yt.useRef(t);return y0(()=>{if(!e&&t!==a.current&&i.current){const c=r.current;if(c){const f=K2(i.current,{ignoreTransform:!0}),y={x:c.left-f.left,y:c.top-f.top,scaleX:c.width/f.width,scaleY:c.height/f.height};(y.x||y.y)&&s(y)}}t!==a.current&&(a.current=t)},[e,t,i,r]),yt.useEffect(()=>{o&&s(null)},[o]),o}function vEe(n){let{animateLayoutChanges:e=fEe,attributes:t,disabled:i,data:r,getNewIndex:o=dEe,id:s,strategy:a,resizeObserverConfig:c,transition:f=pEe}=n;const{items:y,containerId:_,activeIndex:E,disabled:I,disableTransforms:P,sortedRects:K,overIndex:z,useDragOverlay:Q,strategy:V}=yt.useContext(gre),$=bEe(i,I),Z=y.indexOf(s),ee=yt.useMemo(()=>({sortable:{containerId:_,index:Z,items:y},...r}),[_,r,Z,y]),X=yt.useMemo(()=>y.slice(y.indexOf(s)),[y,s]),{rect:W,node:se,isOver:ue,setNodeRef:ve}=sEe({id:s,data:ee,disabled:$.droppable,resizeObserverConfig:{updateMeasurementsFor:X,...c}}),{active:ye,activatorEvent:Ee,activeNodeRect:_e,attributes:Be,setNodeRef:Fe,listeners:Se,isDragging:qe,over:ut,setActivatorNodeRef:ht,transform:De}=nEe({id:s,data:ee,attributes:{...gEe,...t},disabled:$.draggable}),Ie=Rwe(ve,Fe),ze=!!ye,Te=ze&&!P&&Iw(E)&&Iw(z),vt=!Q&&qe,st=vt&&Te?De:null,Pt=Te?st??(a??V)({rects:K,activeNodeRect:_e,activeIndex:E,overIndex:z,index:Z}):null,ke=Iw(E)&&Iw(z)?o({id:s,items:y,activeIndex:E,overIndex:z}):Z,Oe=ye?.id,we=yt.useRef({activeId:Oe,items:y,newIndex:ke,containerId:_}),Ye=y!==we.current.items,ft=e({active:ye,containerId:_,isDragging:qe,isSorting:ze,id:s,index:Z,items:y,newIndex:we.current.newIndex,previousItems:we.current.items,previousContainerId:we.current.containerId,transition:f,wasDragging:we.current.activeId!=null}),dt=yEe({disabled:!ft,index:Z,node:se,rect:W});return yt.useEffect(()=>{ze&&we.current.newIndex!==ke&&(we.current.newIndex=ke),_!==we.current.containerId&&(we.current.containerId=_),y!==we.current.items&&(we.current.items=y)},[ze,ke,_,y]),yt.useEffect(()=>{if(Oe===we.current.activeId)return;if(Oe!=null&&we.current.activeId==null){we.current.activeId=Oe;return}const Lt=setTimeout(()=>{we.current.activeId=Oe},50);return()=>clearTimeout(Lt)},[Oe]),{active:ye,activeIndex:E,attributes:Be,data:ee,rect:W,index:Z,newIndex:ke,items:y,isOver:ue,isSorting:ze,isDragging:qe,listeners:Se,node:se,overIndex:z,over:ut,setNodeRef:Ie,setActivatorNodeRef:ht,setDroppableNodeRef:ve,setDraggableNodeRef:Fe,transform:dt??Pt,transition:gt()};function gt(){if(dt||Ye&&we.current.newIndex===Z)return mEe;if(!(vt&&!kU(Ee)||!f)&&(ze||ft))return yM.Transition.toString({...f,property:yre})}}function bEe(n,e){var t,i;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(t=n?.draggable)!=null?t:e.draggable,droppable:(i=n?.droppable)!=null?i:e.droppable}}Cs.Down,Cs.Right,Cs.Up,Cs.Left;function Qb(){var n="/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",e="e73e8fb606fcd7318a8222b2e50c576ed3ad8702",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",statementMap:{0:{start:{line:6,column:22},end:{line:10,column:5}},1:{start:{line:11,column:4},end:{line:11,column:154}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:12,column:3}},line:5}},branchMap:{0:{loc:{start:{line:11,column:11},end:{line:11,column:153}},type:"cond-expr",locations:[{start:{line:11,column:52},end:{line:11,column:92}},{start:{line:11,column:111},end:{line:11,column:153}}],line:11}},s:{0:0,1:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx"],names:[],mappings:"AAeoC;AAfpC,OAAO,WAAW;AAClB,SAAQ,iBAAiB,qBAAoB;AAO7C,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY;AAAA,MAChB,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,GAAG,KAAK,MAAM;AAAA,IAChB;AACA,WAAO,KAAK,MAAM,cAAc,oBAAC,iBAAc,OAAO,WAAU,IAAK,oBAAC,mBAAgB,OAAO,WAAW;AAAA,EAC1G;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e73e8fb606fcd7318a8222b2e50c576ed3ad8702"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Qb=function(){return s},s}Qb();class CEe extends On.Component{render(){Qb().f[0]++;const e=(Qb().s[0]++,{width:20,height:20,...this.props.style});return Qb().s[1]++,this.props.isCollapsed?(Qb().b[0][0]++,te.jsx(gX,{style:e})):(Qb().b[0][1]++,te.jsx(mX,{style:e}))}}function Sx(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",e="b04bfec534013c327fd210571832bbd2813a944a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:32,column:9}},1:{start:{line:11,column:25},end:{line:11,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:33,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:25},end:{line:11,column:72}},line:11}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx"],names:[],mappings:"AAcM,SAIE,KAJF;AAdN,OAAO,WAAW;AAClB,OAAO,eAAe;AAUtB,qBAAqB,uBAAuB,MAAM,UAA+B;AAAA,EAC/E,SAAS;AACP,WAAO,oBAAC,QAAG,WAAU,6BACnB;AAAA,MAAC;AAAA;AAAA,QAAI,WAAU;AAAA,QACb,eAAa,sBAAoB,KAAK,MAAM,aAAa;AAAA,QACzD,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,QAE7D;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,iBAAe,KAAK,MAAM,eAAe;AAAA,cACzC,iBAAe,KAAK,MAAM;AAAA,cAEzB,eAAK,MAAM;AAAA;AAAA,UACd;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ,IAAI,OAAO,GAAG;AAAA,cAC/B,aAAa,KAAK,MAAM;AAAA;AAAA,UAC1B;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b04bfec534013c327fd210571832bbd2813a944a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Sx=function(){return s},s}Sx();class _Ee extends On.Component{render(){return Sx().f[0]++,Sx().s[0]++,te.jsx("li",{className:"maputnik-layer-list-group",children:te.jsxs("div",{className:"maputnik-layer-list-group-header","data-wd-key":"layer-list-group:"+this.props["data-wd-key"],onClick:e=>(Sx().f[1]++,Sx().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:[te.jsx("button",{className:"maputnik-layer-list-group-title","aria-controls":this.props["aria-controls"],"aria-expanded":this.props.isActive,children:this.props.title}),te.jsx("span",{className:"maputnik-space"}),te.jsx(CEe,{style:{height:14,width:14},isCollapsed:this.props.isActive})]})})}}function Ti(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",e="65a9cb0d1a08cfab21a14c1632991e31e3063aa8",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",statementMap:{0:{start:{line:9,column:23},end:{line:22,column:1}},1:{start:{line:10,column:44},end:{line:10,column:49}},2:{start:{line:11,column:2},end:{line:21,column:7}},3:{start:{line:25,column:4},end:{line:34,column:5}},4:{start:{line:27,column:8},end:{line:27,column:54}},5:{start:{line:29,column:8},end:{line:29,column:53}},6:{start:{line:31,column:8},end:{line:31,column:56}},7:{start:{line:33,column:8},end:{line:33,column:49}},8:{start:{line:37,column:51},end:{line:37,column:61}},9:{start:{line:38,column:25},end:{line:38,column:27}},10:{start:{line:39,column:4},end:{line:44,column:5}},11:{start:{line:40,column:6},end:{line:40,column:76}},12:{start:{line:41,column:6},end:{line:43,column:7}},13:{start:{line:42,column:8},end:{line:42,column:103}},14:{start:{line:45,column:4},end:{line:56,column:6}},15:{start:{line:59,column:22},end:{line:145,column:2}},16:{start:{line:69,column:6},end:{line:69,column:11}},17:{start:{line:77,column:6},end:{line:77,column:40}},18:{start:{line:78,column:16},end:{line:82,column:3}},19:{start:{line:83,column:27},end:{line:83,column:69}},20:{start:{line:84,column:20},end:{line:84,column:23}},21:{start:{line:85,column:2},end:{line:144,column:7}},22:{start:{line:89,column:8},end:{line:89,column:25}},23:{start:{line:90,column:8},end:{line:92,column:9}},24:{start:{line:91,column:10},end:{line:91,column:35}},25:{start:{line:96,column:23},end:{line:96,column:60}},26:{start:{line:120,column:29},end:{line:120,column:61}},27:{start:{line:129,column:29},end:{line:129,column:58}},28:{start:{line:139,column:29},end:{line:139,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:23},end:{line:9,column:24}},loc:{start:{line:9,column:34},end:{line:22,column:1}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:35,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:11},end:{line:57,column:3}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:59,column:39},end:{line:59,column:40}},loc:{start:{line:59,column:55},end:{line:145,column:1}},line:59},4:{name:"(anonymous_4)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:24},end:{line:64,column:5}},line:63},5:{name:"(anonymous_5)",decl:{start:{line:65,column:21},end:{line:65,column:22}},loc:{start:{line:65,column:27},end:{line:66,column:5}},line:65},6:{name:"(anonymous_6)",decl:{start:{line:67,column:30},end:{line:67,column:31}},loc:{start:{line:67,column:36},end:{line:68,column:5}},line:67},7:{name:"(anonymous_7)",decl:{start:{line:88,column:11},end:{line:88,column:12}},loc:{start:{line:88,column:21},end:{line:93,column:7}},line:88},8:{name:"(anonymous_8)",decl:{start:{line:96,column:15},end:{line:96,column:16}},loc:{start:{line:96,column:23},end:{line:96,column:60}},line:96},9:{name:"(anonymous_9)",decl:{start:{line:120,column:21},end:{line:120,column:22}},loc:{start:{line:120,column:29},end:{line:120,column:61}},line:120},10:{name:"(anonymous_10)",decl:{start:{line:129,column:21},end:{line:129,column:22}},loc:{start:{line:129,column:29},end:{line:129,column:58}},line:129},11:{name:"(anonymous_11)",decl:{start:{line:139,column:21},end:{line:139,column:22}},loc:{start:{line:139,column:29},end:{line:139,column:70}},line:139}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:34,column:5}},type:"switch",locations:[{start:{line:26,column:6},end:{line:27,column:54}},{start:{line:28,column:6},end:{line:29,column:53}},{start:{line:30,column:6},end:{line:31,column:56}},{start:{line:32,column:6},end:{line:33,column:49}}],line:25},1:{loc:{start:{line:39,column:4},end:{line:44,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:44,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:41,column:6},end:{line:43,column:7}},type:"if",locations:[{start:{line:41,column:6},end:{line:43,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:61,column:4},end:{line:61,column:22}},type:"default-arg",locations:[{start:{line:61,column:17},end:{line:61,column:22}}],line:61},4:{loc:{start:{line:62,column:4},end:{line:62,column:26}},type:"default-arg",locations:[{start:{line:62,column:17},end:{line:62,column:26}}],line:62},5:{loc:{start:{line:63,column:4},end:{line:64,column:5}},type:"default-arg",locations:[{start:{line:63,column:18},end:{line:64,column:5}}],line:63},6:{loc:{start:{line:65,column:4},end:{line:66,column:5}},type:"default-arg",locations:[{start:{line:65,column:21},end:{line:66,column:5}}],line:65},7:{loc:{start:{line:67,column:4},end:{line:68,column:5}},type:"default-arg",locations:[{start:{line:67,column:30},end:{line:68,column:5}}],line:67},8:{loc:{start:{line:81,column:13},end:{line:81,column:33}},type:"cond-expr",locations:[{start:{line:81,column:26},end:{line:81,column:29}},{start:{line:81,column:32},end:{line:81,column:33}}],line:81},9:{loc:{start:{line:83,column:27},end:{line:83,column:69}},type:"cond-expr",locations:[{start:{line:83,column:54},end:{line:83,column:60}},{start:{line:83,column:63},end:{line:83,column:69}}],line:83},10:{loc:{start:{line:90,column:8},end:{line:92,column:9}},type:"if",locations:[{start:{line:90,column:8},end:{line:92,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0,0,0],1:[0,0],2:[0,0],3:[0],4:[0],5:[0],6:[0],7:[0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx"],names:[],mappings:"AAmBS,SACL,KADK;AAnBT,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,eAAe,cAAc,iBAAiB,gBAAe;AACrE,SAAS,mBAAmB;AAC5B,SAAQ,mBAAkB;AAC1B,SAAQ,WAAU;AAElB,OAAO,eAAe;AAUtB,MAAM,iBAAgD,CAAC,UAAU;AAC/D,QAAM,EAAC,gBAAgB,cAAa,IAAI;AACxC,SAAO,qBAAC,SAAI,WAAU,mCAAmC,GAAG,gBAAiB,GAAG,eAC9E;AAAA;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,MAAM,MAAM;AAAA,QACZ,OAAO,EAAE,OAAO,OAAO,QAAQ,OAAO,eAAe,SAAS;AAAA;AAAA,IAChE;AAAA,IACA,oBAAC,YAAO,WAAU,+BACf,gBAAM,SACT;AAAA,KACF;AACF;AAUA,MAAM,mBAAmB,MAAM,UAA2B;AAAA,EACxD,aAAa;AACX,YAAO,KAAK,MAAM,QAAQ;AAAA,MACxB,KAAK;AAAa,eAAO,oBAAC,iBAAc;AAAA,MACxC,KAAK;AAAQ,eAAO,oBAAC,gBAAa;AAAA,MAClC,KAAK;AAAQ,eAAO,oBAAC,mBAAgB;AAAA,MACrC,KAAK;AAAU,eAAO,oBAAC,YAAS;AAAA,IAClC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,gBAAgB,mBAAkB,IAAI,KAAK;AAElD,QAAI,iBAAiB;AACrB,QAAI,gBAAgB;AAClB,uBAAiB,oCAAoC,cAAc;AAEnE,UAAI,oBAAoB;AACtB,0BAAkB,qCAAqC,cAAc,KAAK,kBAAkB;AAAA,MAC9F;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,UAAU;AAAA,QACV,OAAO,KAAK,MAAM;AAAA,QAClB,WAAW,mCAAmC,cAAc;AAAA,QAC5D,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QACpB,eAAY;AAAA,QAEX,eAAK,WAAW;AAAA;AAAA,IACnB;AAAA,EACF;AACF;AAgBA,MAAM,gBAAgB,MAAM,WAA8C,CAAC,OAAO,QAAQ;AACxF,QAAM;AAAA,IACJ,aAAa;AAAA,IACb,aAAa;AAAA,IACb,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,0BAA0B,MAAM;AAAA,IAAC;AAAA,EACnC,IAAI;AAEJ,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI,YAAY,EAAC,IAAI,MAAM,QAAO,CAAC;AAEnC,QAAM,QAAQ;AAAA,IACZ,WAAW,IAAI,UAAU,SAAS,SAAS;AAAA,IAC3C;AAAA,IACA,SAAS,aAAa,MAAM;AAAA,EAC9B;AAEA,QAAM,mBAAmB,eAAe,YAAY,SAAS;AAG7D,QAAM,YAAY;AAElB,SAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,OAAM,GAC/C;AAAA,IAAC;AAAA;AAAA,MACC,KAAK,CAAC,SAAS;AACb,mBAAW,IAAI;AACf,YAAI,WAAW;AACb,oBAAU,UAAU;AAAA,QACtB;AAAA,MACF;AAAA,MACA;AAAA,MACA,IAAI,MAAM;AAAA,MACV,SAAS,QAAM,MAAM,cAAc,MAAM,UAAU;AAAA,MACnD,eAAa,qBAAqB,MAAM;AAAA,MACxC,WAAW,WAAW;AAAA,QACpB,4BAA4B;AAAA,QAC5B,qCAAqC;AAAA,QACrC,CAAC,MAAM,SAAU,GAAG;AAAA,MACtB,CAAC;AAAA,MACD;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,MAAM;AAAA,YACf,WAAW,MAAM;AAAA,YACjB,gBAAgB;AAAA,YAChB,eAAe;AAAA;AAAA,QACjB;AAAA,QACA,oBAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAG;AAAA,QAC5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAqB,MAAM,UAAQ;AAAA,YAC1C,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,SAAS,QAAM,eAAgB,MAAM,UAAU;AAAA;AAAA,QACjD;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAqB,MAAM,UAAQ;AAAA,YAC1C,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,SAAS,QAAM,YAAa,MAAM,UAAU;AAAA;AAAA,QAC9C;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAmB,MAAM,UAAQ;AAAA,YACxC,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,oBAAoB;AAAA,YACpB,SAAS,QAAM,wBAAyB,MAAM,UAAU;AAAA;AAAA,QAC1D;AAAA;AAAA;AAAA,EACF,GACF;AACF,CAAC;AAED,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"65a9cb0d1a08cfab21a14c1632991e31e3063aa8"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ti=function(){return s},s}Ti();Ti().s[0]++;const xEe=n=>{Ti().f[0]++;const{dragAttributes:e,dragListeners:t}=(Ti().s[1]++,n);return Ti().s[2]++,te.jsxs("div",{className:"maputnik-layer-list-item-handle",...e,...t,children:[te.jsx(yX,{className:"layer-handle__icon",type:n.layerType,style:{width:"1em",height:"1em",verticalAlign:"middle"}}),te.jsx("button",{className:"maputnik-layer-list-item-id",children:n.layerId})]})};class rI extends On.Component{renderIcon(){switch(Ti().f[1]++,Ti().s[3]++,this.props.action){case"duplicate":return Ti().b[0][0]++,Ti().s[4]++,te.jsx(cfe,{});case"show":return Ti().b[0][1]++,Ti().s[5]++,te.jsx(ufe,{});case"hide":return Ti().b[0][2]++,Ti().s[6]++,te.jsx(lfe,{});case"delete":return Ti().b[0][3]++,Ti().s[7]++,te.jsx(TC,{})}}render(){Ti().f[2]++;const{classBlockName:e,classBlockModifier:t}=(Ti().s[8]++,this.props);let i=(Ti().s[9]++,"");return Ti().s[10]++,e?(Ti().b[1][0]++,Ti().s[11]++,i=`maputnik-layer-list-icon-action__${e}`,Ti().s[12]++,t?(Ti().b[2][0]++,Ti().s[13]++,i+=` maputnik-layer-list-icon-action__${e}--${t}`):Ti().b[2][1]++):Ti().b[1][1]++,Ti().s[14]++,te.jsx("button",{tabIndex:-1,title:this.props.action,className:`maputnik-layer-list-icon-action ${i}`,"data-wd-key":this.props.wdKey,onClick:this.props.onClick,"aria-hidden":"true",children:this.renderIcon()})}}const MEe=(Ti().s[15]++,On.forwardRef((n,e)=>{Ti().f[3]++;const{isSelected:t=(Ti().b[3][0]++,!1),visibility:i=(Ti().b[4][0]++,"visible"),onLayerCopy:r=(Ti().b[5][0]++,()=>{Ti().f[4]++}),onLayerDestroy:o=(Ti().b[6][0]++,()=>{Ti().f[5]++}),onLayerVisibilityToggle:s=(Ti().b[7][0]++,()=>{Ti().f[6]++})}=(Ti().s[16]++,n),{attributes:a,listeners:c,setNodeRef:f,transform:y,transition:_,isDragging:E}=(Ti().s[17]++,vEe({id:n.layerId})),I=(Ti().s[18]++,{transform:yM.Transform.toString(y),transition:_,opacity:E?(Ti().b[8][0]++,.5):(Ti().b[8][1]++,1)}),P=(Ti().s[19]++,i==="visible"?(Ti().b[9][0]++,"show"):(Ti().b[9][1]++,"hide")),K=(Ti().s[20]++,e);return Ti().s[21]++,te.jsx(Xx.Provider,{value:{size:"14px"},children:te.jsxs("li",{ref:z=>{Ti().f[7]++,Ti().s[22]++,f(z),Ti().s[23]++,K?(Ti().b[10][0]++,Ti().s[24]++,K.current=z):Ti().b[10][1]++},style:I,id:n.id,onClick:z=>(Ti().f[8]++,Ti().s[25]++,n.onLayerSelect(n.layerIndex)),"data-wd-key":"layer-list-item:"+n.layerId,className:x0({"maputnik-layer-list-item":!0,"maputnik-layer-list-item-selected":t,[n.className]:!0}),children:[te.jsx(xEe,{layerId:n.layerId,layerType:n.layerType,dragAttributes:a,dragListeners:c}),te.jsx("span",{style:{flexGrow:1}}),te.jsx(rI,{wdKey:"layer-list-item:"+n.layerId+":delete",action:"delete",classBlockName:"delete",onClick:z=>(Ti().f[9]++,Ti().s[26]++,o(n.layerIndex))}),te.jsx(rI,{wdKey:"layer-list-item:"+n.layerId+":copy",action:"duplicate",classBlockName:"duplicate",onClick:z=>(Ti().f[10]++,Ti().s[27]++,r(n.layerIndex))}),te.jsx(rI,{wdKey:"layer-list-item:"+n.layerId+":toggle-visibility",action:P,classBlockName:"visibility",classBlockModifier:P,onClick:z=>(Ti().f[11]++,Ti().s[28]++,s(n.layerIndex))})]})})}));function qE(){var n="/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",e="522bfc6b8aacbfd03b55d947af2897dc69beb570",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:20,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:21,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx"],names:[],mappings:"AAkBW;AAlBX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAevB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,IAAI,KAAK,MAAM;AAAA,QACf,OAAO,KAAK,MAAM;AAAA,QAClB,MAAM,KAAK,MAAM;AAAA,QACjB,SAAS,KAAK,MAAM;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,cAAY,KAAK,MAAM,YAAY;AAAA,QACnC,WAAW,WAAW,mBAAmB,KAAK,MAAM,SAAS;AAAA,QAC7D,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAEjB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"522bfc6b8aacbfd03b55d947af2897dc69beb570"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return qE=function(){return s},s}qE();class Ds extends On.Component{render(){return qE().f[0]++,qE().s[0]++,te.jsx("button",{id:this.props.id,title:this.props.title,type:this.props.type,onClick:this.props.onClick,disabled:this.props.disabled,"aria-label":this.props["aria-label"],className:x0("maputnik-button",this.props.className),"data-wd-key":this.props["data-wd-key"],style:this.props.style,children:this.props.children})}}var oI={exports:{}},sI,TW;function wEe(){if(TW)return sI;TW=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return sI=n,sI}var aI,kW;function SEe(){if(kW)return aI;kW=1;var n=wEe();function e(){}function t(){}return t.resetWarningCache=e,aI=function(){function i(s,a,c,f,y,_){if(_!==n){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}i.isRequired=i;function r(){return i}var o={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},aI}var DW;function W1(){return DW||(DW=1,oI.exports=SEe()()),oI.exports}var vre=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],YE=vre.join(","),bre=typeof Element>"u",OC=bre?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,VE=!bre&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n?.ownerDocument},bM=function(e,t){var i;t===void 0&&(t=!0);var r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"inert"),o=r===""||r==="true",s=o||t&&e&&bM(e.parentNode);return s},EEe=function(e){var t,i=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return i===""||i==="true"},Cre=function(e,t,i){if(bM(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(YE));return t&&OC.call(e,YE)&&r.unshift(e),r=r.filter(i),r},$E=function(e,t,i){for(var r=[],o=Array.from(e);o.length;){var s=o.shift();if(!bM(s,!1))if(s.tagName==="SLOT"){var a=s.assignedElements(),c=a.length?a:s.children,f=$E(c,!0,i);i.flatten?r.push.apply(r,f):r.push({scopeParent:s,candidates:f})}else{var y=OC.call(s,YE);y&&i.filter(s)&&(t||!e.includes(s))&&r.push(s);var _=s.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(s),E=!bM(_,!1)&&(!i.shadowRootFilter||i.shadowRootFilter(s));if(_&&E){var I=$E(_===!0?s.children:_.children,!0,i);i.flatten?r.push.apply(r,I):r.push({scopeParent:s,candidates:I})}else o.unshift.apply(o,s.children)}}return r},_re=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},tv=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||EEe(e))&&!_re(e)?0:e.tabIndex},BEe=function(e,t){var i=tv(e);return i<0&&t&&!_re(e)?0:i},OEe=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},xre=function(e){return e.tagName==="INPUT"},IEe=function(e){return xre(e)&&e.type==="hidden"},TEe=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(i){return i.tagName==="SUMMARY"});return t},kEe=function(e,t){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===t)return e[i]},DEe=function(e){if(!e.name)return!0;var t=e.form||VE(e),i=function(a){return t.querySelectorAll('input[type="radio"][name="'+a+'"]')},r;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")r=i(window.CSS.escape(e.name));else try{r=i(e.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var o=kEe(r,e.form);return!o||o===e},REe=function(e){return xre(e)&&e.type==="radio"},PEe=function(e){return REe(e)&&!DEe(e)},LEe=function(e){var t,i=e&&VE(e),r=(t=i)===null||t===void 0?void 0:t.host,o=!1;if(i&&i!==e){var s,a,c;for(o=!!((s=r)!==null&&s!==void 0&&(a=s.ownerDocument)!==null&&a!==void 0&&a.contains(r)||e!=null&&(c=e.ownerDocument)!==null&&c!==void 0&&c.contains(e));!o&&r;){var f,y,_;i=VE(r),r=(f=i)===null||f===void 0?void 0:f.host,o=!!((y=r)!==null&&y!==void 0&&(_=y.ownerDocument)!==null&&_!==void 0&&_.contains(r))}}return o},RW=function(e){var t=e.getBoundingClientRect(),i=t.width,r=t.height;return i===0&&r===0},UEe=function(e,t){var i=t.displayCheck,r=t.getShadowRoot;if(i==="full-native"&&"checkVisibility"in e){var o=e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!o}if(getComputedStyle(e).visibility==="hidden")return!0;var s=OC.call(e,"details>summary:first-of-type"),a=s?e.parentElement:e;if(OC.call(a,"details:not([open]) *"))return!0;if(!i||i==="full"||i==="full-native"||i==="legacy-full"){if(typeof r=="function"){for(var c=e;e;){var f=e.parentElement,y=VE(e);if(f&&!f.shadowRoot&&r(f)===!0)return RW(e);e.assignedSlot?e=e.assignedSlot:!f&&y!==e.ownerDocument?e=y.host:e=f}e=c}if(LEe(e))return!e.getClientRects().length;if(i!=="legacy-full")return!0}else if(i==="non-zero-area")return RW(e);return!1},KEe=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var i=0;i<t.children.length;i++){var r=t.children.item(i);if(r.tagName==="LEGEND")return OC.call(t,"fieldset[disabled] *")?!0:!r.contains(e)}return!0}t=t.parentElement}return!1},HE=function(e,t){return!(t.disabled||bM(t)||IEe(t)||UEe(t,e)||TEe(t)||KEe(t))},IR=function(e,t){return!(PEe(t)||tv(t)<0||!HE(e,t))},FEe=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},Mre=function(e){var t=[],i=[];return e.forEach(function(r,o){var s=!!r.scopeParent,a=s?r.scopeParent:r,c=BEe(a,s),f=s?Mre(r.candidates):a;c===0?s?t.push.apply(t,f):t.push(a):i.push({documentOrder:o,tabIndex:c,item:r,isScope:s,content:f})}),i.sort(OEe).reduce(function(r,o){return o.isScope?r.push.apply(r,o.content):r.push(o.content),r},[]).concat(t)},wre=function(e,t){t=t||{};var i;return t.getShadowRoot?i=$E([e],t.includeContainer,{filter:IR.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:FEe}):i=Cre(e,t.includeContainer,IR.bind(null,t)),Mre(i)},Sre=function(e,t){t=t||{};var i;return t.getShadowRoot?i=$E([e],t.includeContainer,{filter:HE.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):i=Cre(e,t.includeContainer,HE.bind(null,t)),i},zb=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return OC.call(e,YE)===!1?!1:IR(t,e)},zEe=vre.concat("iframe").join(","),_S=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return OC.call(e,zEe)===!1?!1:HE(t,e)};const jEe=Object.freeze(Object.defineProperty({__proto__:null,focusable:Sre,getTabIndex:tv,isFocusable:_S,isTabbable:zb,tabbable:wre},Symbol.toStringTag,{value:"Module"}));function TR(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=Array(e);t<e;t++)i[t]=n[t];return i}function NEe(n){if(Array.isArray(n))return TR(n)}function GEe(n,e,t){return(e=VEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function WEe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function QEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PW(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function LW(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?PW(Object(t),!0).forEach(function(i){GEe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):PW(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function qEe(n){return NEe(n)||WEe(n)||$Ee(n)||QEe()}function YEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function VEe(n){var e=YEe(n,"string");return typeof e=="symbol"?e:e+""}function $Ee(n,e){if(n){if(typeof n=="string")return TR(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?TR(n,e):void 0}}var UW={activateTrap:function(e,t){if(e.length>0){var i=e[e.length-1];i!==t&&i._setPausedState(!0)}var r=e.indexOf(t);r===-1||e.splice(r,1),e.push(t)},deactivateTrap:function(e,t){var i=e.indexOf(t);i!==-1&&e.splice(i,1),e.length>0&&!e[e.length-1]._isManuallyPaused()&&e[e.length-1]._setPausedState(!1)}},HEe=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},ZEe=function(e){return e?.key==="Escape"||e?.key==="Esc"||e?.keyCode===27},y4=function(e){return e?.key==="Tab"||e?.keyCode===9},XEe=function(e){return y4(e)&&!e.shiftKey},JEe=function(e){return y4(e)&&e.shiftKey},KW=function(e){return setTimeout(e,0)},g3=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return typeof e=="function"?e.apply(void 0,i):e},kw=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},e6e=[],t6e=function(e,t){var i=t?.document||document,r=t?.trapStack||e6e,o=LW({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:XEe,isKeyBackward:JEe},t),s={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,c=function(_e,Be,Fe){return _e&&_e[Be]!==void 0?_e[Be]:o[Fe||Be]},f=function(_e,Be){var Fe=typeof Be?.composedPath=="function"?Be.composedPath():void 0;return s.containerGroups.findIndex(function(Se){var qe=Se.container,ut=Se.tabbableNodes;return qe.contains(_e)||Fe?.includes(qe)||ut.find(function(ht){return ht===_e})})},y=function(_e){var Be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Fe=Be.hasFallback,Se=Fe===void 0?!1:Fe,qe=Be.params,ut=qe===void 0?[]:qe,ht=o[_e];if(typeof ht=="function"&&(ht=ht.apply(void 0,qEe(ut))),ht===!0&&(ht=void 0),!ht){if(ht===void 0||ht===!1)return ht;throw new Error("`".concat(_e,"` was specified but was not a node, or did not return a node"))}var De=ht;if(typeof ht=="string"){try{De=i.querySelector(ht)}catch(Ie){throw new Error("`".concat(_e,'` appears to be an invalid selector; error="').concat(Ie.message,'"'))}if(!De&&!Se)throw new Error("`".concat(_e,"` as selector refers to no known node"))}return De},_=function(){var _e=y("initialFocus",{hasFallback:!0});if(_e===!1)return!1;if(_e===void 0||_e&&!_S(_e,o.tabbableOptions))if(f(i.activeElement)>=0)_e=i.activeElement;else{var Be=s.tabbableGroups[0],Fe=Be&&Be.firstTabbableNode;_e=Fe||y("fallbackFocus")}else _e===null&&(_e=y("fallbackFocus"));if(!_e)throw new Error("Your focus-trap needs to have at least one focusable element");return _e},E=function(){if(s.containerGroups=s.containers.map(function(_e){var Be=wre(_e,o.tabbableOptions),Fe=Sre(_e,o.tabbableOptions),Se=Be.length>0?Be[0]:void 0,qe=Be.length>0?Be[Be.length-1]:void 0,ut=Fe.find(function(Ie){return zb(Ie)}),ht=Fe.slice().reverse().find(function(Ie){return zb(Ie)}),De=!!Be.find(function(Ie){return tv(Ie)>0});return{container:_e,tabbableNodes:Be,focusableNodes:Fe,posTabIndexesFound:De,firstTabbableNode:Se,lastTabbableNode:qe,firstDomTabbableNode:ut,lastDomTabbableNode:ht,nextTabbableNode:function(ze){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,vt=Be.indexOf(ze);return vt<0?Te?Fe.slice(Fe.indexOf(ze)+1).find(function(st){return zb(st)}):Fe.slice(0,Fe.indexOf(ze)).reverse().find(function(st){return zb(st)}):Be[vt+(Te?1:-1)]}}}),s.tabbableGroups=s.containerGroups.filter(function(_e){return _e.tabbableNodes.length>0}),s.tabbableGroups.length<=0&&!y("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(s.containerGroups.find(function(_e){return _e.posTabIndexesFound})&&s.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},I=function(_e){var Be=_e.activeElement;if(Be)return Be.shadowRoot&&Be.shadowRoot.activeElement!==null?I(Be.shadowRoot):Be},P=function(_e){if(_e!==!1&&_e!==I(document)){if(!_e||!_e.focus){P(_());return}_e.focus({preventScroll:!!o.preventScroll}),s.mostRecentlyFocusedNode=_e,HEe(_e)&&_e.select()}},K=function(_e){var Be=y("setReturnFocus",{params:[_e]});return Be||(Be===!1?!1:_e)},z=function(_e){var Be=_e.target,Fe=_e.event,Se=_e.isBackward,qe=Se===void 0?!1:Se;Be=Be||kw(Fe),E();var ut=null;if(s.tabbableGroups.length>0){var ht=f(Be,Fe),De=ht>=0?s.containerGroups[ht]:void 0;if(ht<0)qe?ut=s.tabbableGroups[s.tabbableGroups.length-1].lastTabbableNode:ut=s.tabbableGroups[0].firstTabbableNode;else if(qe){var Ie=s.tabbableGroups.findIndex(function(Pt){var ke=Pt.firstTabbableNode;return Be===ke});if(Ie<0&&(De.container===Be||_S(Be,o.tabbableOptions)&&!zb(Be,o.tabbableOptions)&&!De.nextTabbableNode(Be,!1))&&(Ie=ht),Ie>=0){var ze=Ie===0?s.tabbableGroups.length-1:Ie-1,Te=s.tabbableGroups[ze];ut=tv(Be)>=0?Te.lastTabbableNode:Te.lastDomTabbableNode}else y4(Fe)||(ut=De.nextTabbableNode(Be,!1))}else{var vt=s.tabbableGroups.findIndex(function(Pt){var ke=Pt.lastTabbableNode;return Be===ke});if(vt<0&&(De.container===Be||_S(Be,o.tabbableOptions)&&!zb(Be,o.tabbableOptions)&&!De.nextTabbableNode(Be))&&(vt=ht),vt>=0){var st=vt===s.tabbableGroups.length-1?0:vt+1,Et=s.tabbableGroups[st];ut=tv(Be)>=0?Et.firstTabbableNode:Et.firstDomTabbableNode}else y4(Fe)||(ut=De.nextTabbableNode(Be))}}else ut=y("fallbackFocus");return ut},Q=function(_e){var Be=kw(_e);if(!(f(Be,_e)>=0)){if(g3(o.clickOutsideDeactivates,_e)){a.deactivate({returnFocus:o.returnFocusOnDeactivate});return}g3(o.allowOutsideClick,_e)||_e.preventDefault()}},V=function(_e){var Be=kw(_e),Fe=f(Be,_e)>=0;if(Fe||Be instanceof Document)Fe&&(s.mostRecentlyFocusedNode=Be);else{_e.stopImmediatePropagation();var Se,qe=!0;if(s.mostRecentlyFocusedNode)if(tv(s.mostRecentlyFocusedNode)>0){var ut=f(s.mostRecentlyFocusedNode),ht=s.containerGroups[ut].tabbableNodes;if(ht.length>0){var De=ht.findIndex(function(Ie){return Ie===s.mostRecentlyFocusedNode});De>=0&&(o.isKeyForward(s.recentNavEvent)?De+1<ht.length&&(Se=ht[De+1],qe=!1):De-1>=0&&(Se=ht[De-1],qe=!1))}}else s.containerGroups.some(function(Ie){return Ie.tabbableNodes.some(function(ze){return tv(ze)>0})})||(qe=!1);else qe=!1;qe&&(Se=z({target:s.mostRecentlyFocusedNode,isBackward:o.isKeyBackward(s.recentNavEvent)})),P(Se||s.mostRecentlyFocusedNode||_())}s.recentNavEvent=void 0},$=function(_e){var Be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;s.recentNavEvent=_e;var Fe=z({event:_e,isBackward:Be});Fe&&(y4(_e)&&_e.preventDefault(),P(Fe))},Z=function(_e){(o.isKeyForward(_e)||o.isKeyBackward(_e))&&$(_e,o.isKeyBackward(_e))},ee=function(_e){ZEe(_e)&&g3(o.escapeDeactivates,_e)!==!1&&(_e.preventDefault(),a.deactivate())},X=function(_e){var Be=kw(_e);f(Be,_e)>=0||g3(o.clickOutsideDeactivates,_e)||g3(o.allowOutsideClick,_e)||(_e.preventDefault(),_e.stopImmediatePropagation())},W=function(){if(s.active)return UW.activateTrap(r,a),s.delayInitialFocusTimer=o.delayInitialFocus?KW(function(){P(_())}):P(_()),i.addEventListener("focusin",V,!0),i.addEventListener("mousedown",Q,{capture:!0,passive:!1}),i.addEventListener("touchstart",Q,{capture:!0,passive:!1}),i.addEventListener("click",X,{capture:!0,passive:!1}),i.addEventListener("keydown",Z,{capture:!0,passive:!1}),i.addEventListener("keydown",ee),a},se=function(){if(s.active)return i.removeEventListener("focusin",V,!0),i.removeEventListener("mousedown",Q,!0),i.removeEventListener("touchstart",Q,!0),i.removeEventListener("click",X,!0),i.removeEventListener("keydown",Z,!0),i.removeEventListener("keydown",ee),a},ue=function(_e){var Be=_e.some(function(Fe){var Se=Array.from(Fe.removedNodes);return Se.some(function(qe){return qe===s.mostRecentlyFocusedNode})});Be&&P(_())},ve=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(ue):void 0,ye=function(){ve&&(ve.disconnect(),s.active&&!s.paused&&s.containers.map(function(_e){ve.observe(_e,{subtree:!0,childList:!0})}))};return a={get active(){return s.active},get paused(){return s.paused},activate:function(_e){if(s.active)return this;var Be=c(_e,"onActivate"),Fe=c(_e,"onPostActivate"),Se=c(_e,"checkCanFocusTrap");Se||E(),s.active=!0,s.paused=!1,s.nodeFocusedBeforeActivation=I(i),Be?.();var qe=function(){Se&&E(),W(),ye(),Fe?.()};return Se?(Se(s.containers.concat()).then(qe,qe),this):(qe(),this)},deactivate:function(_e){if(!s.active)return this;var Be=LW({onDeactivate:o.onDeactivate,onPostDeactivate:o.onPostDeactivate,checkCanReturnFocus:o.checkCanReturnFocus},_e);clearTimeout(s.delayInitialFocusTimer),s.delayInitialFocusTimer=void 0,se(),s.active=!1,s.paused=!1,ye(),UW.deactivateTrap(r,a);var Fe=c(Be,"onDeactivate"),Se=c(Be,"onPostDeactivate"),qe=c(Be,"checkCanReturnFocus"),ut=c(Be,"returnFocus","returnFocusOnDeactivate");Fe?.();var ht=function(){KW(function(){ut&&P(K(s.nodeFocusedBeforeActivation)),Se?.()})};return ut&&qe?(qe(K(s.nodeFocusedBeforeActivation)).then(ht,ht),this):(ht(),this)},pause:function(_e){return s.active?(s.manuallyPaused=!0,this._setPausedState(!0,_e)):this},unpause:function(_e){return s.active?(s.manuallyPaused=!1,r[r.length-1]!==this?this:this._setPausedState(!1,_e)):this},updateContainerElements:function(_e){var Be=[].concat(_e).filter(Boolean);return s.containers=Be.map(function(Fe){return typeof Fe=="string"?i.querySelector(Fe):Fe}),s.active&&E(),ye(),this}},Object.defineProperties(a,{_isManuallyPaused:{value:function(){return s.manuallyPaused}},_setPausedState:{value:function(_e,Be){if(s.paused===_e)return this;if(s.paused=_e,_e){var Fe=c(Be,"onPause"),Se=c(Be,"onPostPause");Fe?.(),se(),ye(),Se?.()}else{var qe=c(Be,"onUnpause"),ut=c(Be,"onPostUnpause");qe?.(),E(),W(),ye(),ut?.()}return this}}}),a.updateContainerElements(e),a};const n6e=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:t6e},Symbol.toStringTag,{value:"Module"})),i6e=bH(n6e),r6e=bH(jEe);var lI,FW;function o6e(){if(FW)return lI;FW=1;function n(X){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},n(X)}function e(X,W){if(!(X instanceof W))throw new TypeError("Cannot call a class as a function")}function t(X,W){for(var se=0;se<W.length;se++){var ue=W[se];ue.enumerable=ue.enumerable||!1,ue.configurable=!0,"value"in ue&&(ue.writable=!0),Object.defineProperty(X,E(ue.key),ue)}}function i(X,W,se){return W&&t(X.prototype,W),Object.defineProperty(X,"prototype",{writable:!1}),X}function r(X,W,se){return W=c(W),o(X,a()?Reflect.construct(W,se||[],c(X).constructor):W.apply(X,se))}function o(X,W){if(W&&(n(W)=="object"||typeof W=="function"))return W;if(W!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s(X)}function s(X){if(X===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X}function a(){try{var X=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a=function(){return!!X})()}function c(X){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(W){return W.__proto__||Object.getPrototypeOf(W)},c(X)}function f(X,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function");X.prototype=Object.create(W&&W.prototype,{constructor:{value:X,writable:!0,configurable:!0}}),Object.defineProperty(X,"prototype",{writable:!1}),W&&y(X,W)}function y(X,W){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(se,ue){return se.__proto__=ue,se},y(X,W)}function _(X,W,se){return(W=E(W))in X?Object.defineProperty(X,W,{value:se,enumerable:!0,configurable:!0,writable:!0}):X[W]=se,X}function E(X){var W=I(X,"string");return n(W)=="symbol"?W:W+""}function I(X,W){if(n(X)!="object"||!X)return X;var se=X[Symbol.toPrimitive];if(se!==void 0){var ue=se.call(X,W);if(n(ue)!="object")return ue;throw new TypeError("@@toPrimitive must return a primitive value.")}return(W==="string"?String:Number)(X)}var P=pa(),K=W1(),z=i6e,Q=z.createFocusTrap,V=r6e,$=V.isFocusable,Z=(function(X){function W(se){var ue;e(this,W),ue=r(this,W,[se]),_(ue,"getNodeForOption",function(Ee){var _e,Be=(_e=this.internalOptions[Ee])!==null&&_e!==void 0?_e:this.originalOptions[Ee];if(typeof Be=="function"){for(var Fe=arguments.length,Se=new Array(Fe>1?Fe-1:0),qe=1;qe<Fe;qe++)Se[qe-1]=arguments[qe];Be=Be.apply(void 0,Se)}if(Be===!0&&(Be=void 0),!Be){if(Be===void 0||Be===!1)return Be;throw new Error("`".concat(Ee,"` was specified but was not a node, or did not return a node"))}var ut=Be;if(typeof Be=="string"){var ht;if(ut=(ht=this.getDocument())===null||ht===void 0?void 0:ht.querySelector(Be),!ut)throw new Error("`".concat(Ee,"` as selector refers to no known node"))}return ut}),ue.handleDeactivate=ue.handleDeactivate.bind(ue),ue.handlePostDeactivate=ue.handlePostDeactivate.bind(ue),ue.handleClickOutsideDeactivates=ue.handleClickOutsideDeactivates.bind(ue),ue.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:ue.handleDeactivate,onPostDeactivate:ue.handlePostDeactivate,clickOutsideDeactivates:ue.handleClickOutsideDeactivates},ue.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var ve=se.focusTrapOptions;for(var ye in ve)if(Object.prototype.hasOwnProperty.call(ve,ye)){if(ye==="returnFocusOnDeactivate"||ye==="onDeactivate"||ye==="onPostDeactivate"||ye==="checkCanReturnFocus"||ye==="clickOutsideDeactivates"){ue.originalOptions[ye]=ve[ye];continue}ue.internalOptions[ye]=ve[ye]}return ue.outsideClick=null,ue.focusTrapElements=se.containerElements||[],ue.updatePreviousElement(),ue}return f(W,X),i(W,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var ue=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return ue||(ue===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var ue=this.getDocument();ue&&(this.previouslyFocusedElement=ue.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(ue){var ve=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,ue):this.originalOptions.clickOutsideDeactivates;return ve&&(this.outsideClick={target:ue.target,allowDeactivation:ve}),ve}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var ue=this,ve=function(){var Ee=ue.getReturnFocusNode(),_e=!!(ue.originalOptions.returnFocusOnDeactivate&&Ee!==null&&Ee!==void 0&&Ee.focus&&(!ue.outsideClick||ue.outsideClick.allowDeactivation&&!$(ue.outsideClick.target,ue.internalOptions.tabbableOptions))),Be=ue.internalOptions.preventScroll,Fe=Be===void 0?!1:Be;_e&&Ee.focus({preventScroll:Fe}),ue.originalOptions.onPostDeactivate&&ue.originalOptions.onPostDeactivate.call(null),ue.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(ve,ve):ve()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var ue=this.focusTrapElements.some(Boolean);ue&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(ue){if(this.focusTrap){ue.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var ve=!ue.active&&this.props.active,ye=ue.active&&!this.props.active,Ee=!ue.paused&&this.props.paused,_e=ue.paused&&!this.props.paused;if(ve&&(this.updatePreviousElement(),this.focusTrap.activate()),ye){this.deactivateTrap();return}Ee&&this.focusTrap.pause(),_e&&this.focusTrap.unpause()}else ue.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var ue=this,ve=this.props.children?P.Children.only(this.props.children):void 0;if(ve){if(ve.type&&ve.type===P.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var ye=function(Be){var Fe=ue.props.containerElements;ve&&(typeof ve.ref=="function"?ve.ref(Be):ve.ref&&(ve.ref.current=Be)),ue.focusTrapElements=Fe||[Be]},Ee=P.cloneElement(ve,{ref:ye});return Ee}return null}}])})(P.Component),ee=typeof Element>"u"?Function:Element;return Z.propTypes={active:K.bool,paused:K.bool,focusTrapOptions:K.shape({document:K.object,onActivate:K.func,onPostActivate:K.func,checkCanFocusTrap:K.func,onPause:K.func,onPostPause:K.func,onUnpause:K.func,onPostUnpause:K.func,onDeactivate:K.func,onPostDeactivate:K.func,checkCanReturnFocus:K.func,initialFocus:K.oneOfType([K.instanceOf(ee),K.string,K.bool,K.func]),fallbackFocus:K.oneOfType([K.instanceOf(ee),K.string,K.func]),escapeDeactivates:K.oneOfType([K.bool,K.func]),clickOutsideDeactivates:K.oneOfType([K.bool,K.func]),returnFocusOnDeactivate:K.bool,setReturnFocus:K.oneOfType([K.instanceOf(ee),K.string,K.bool,K.func]),allowOutsideClick:K.oneOfType([K.bool,K.func]),preventScroll:K.bool,tabbableOptions:K.shape({displayCheck:K.oneOf(["full","legacy-full","non-zero-area","none"]),getShadowRoot:K.oneOfType([K.bool,K.func])}),trapStack:K.array,isKeyForward:K.func,isKeyBackward:K.func}),containerElements:K.arrayOf(K.instanceOf(ee)),children:K.oneOfType([K.element,K.instanceOf(ee)])},Z.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:Q},lI=Z,lI}var uI={exports:{}},zW;function s6e(){return zW||(zW=1,(function(n){(function(e){var t=!1,i,r;function o(){if(typeof i<"u")return i;var _=document.documentElement,E=document.createElement("div");return E.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),_.appendChild(E),i=E.offsetWidth-E.clientWidth,_.removeChild(E),i}function s(){return document.documentElement.scrollHeight>window.innerHeight}function a(_){if(!(typeof document>"u"||t)){var E=document.documentElement;r=window.pageYOffset,s()?E.style.width="calc(100% - "+o()+"px)":E.style.width="100%",E.style.position="fixed",E.style.top=-r+"px",E.style.overflow="hidden",t=!0}}function c(){if(!(typeof document>"u"||!t)){var _=document.documentElement;_.style.width="",_.style.position="",_.style.top="",_.style.overflow="",window.scroll(0,r),t=!1}}function f(){if(t){c();return}a()}var y={on:a,off:c,toggle:f};n.exports=y})()})(uI)),uI.exports}var cI,jW;function a6e(){if(jW)return cI;jW=1;function n($){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},n($)}function e($,Z){if(!($ instanceof Z))throw new TypeError("Cannot call a class as a function")}function t($,Z){for(var ee=0;ee<Z.length;ee++){var X=Z[ee];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty($,X.key,X)}}function i($,Z,ee){return Z&&t($.prototype,Z),Object.defineProperty($,"prototype",{writable:!1}),$}function r($,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(Z&&Z.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),Object.defineProperty($,"prototype",{writable:!1}),Z&&o($,Z)}function o($,Z){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(X,W){return X.__proto__=W,X},o($,Z)}function s($){var Z=f();return function(){var X=y($),W;if(Z){var se=y(this).constructor;W=Reflect.construct(X,arguments,se)}else W=X.apply(this,arguments);return a(this,W)}}function a($,Z){if(Z&&(n(Z)==="object"||typeof Z=="function"))return Z;if(Z!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c($)}function c($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function f(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function y($){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ee){return ee.__proto__||Object.getPrototypeOf(ee)},y($)}function _($,Z,ee){return Z in $?Object.defineProperty($,Z,{value:ee,enumerable:!0,configurable:!0,writable:!0}):$[Z]=ee,$}var E=pa(),I=JR(),P=o6e(),K=s6e(),z=(function($){r(ee,$);var Z=s(ee);function ee(X){var W;if(e(this,ee),W=Z.call(this,X),_(c(W),"getApplicationNode",function(){return W.props.getApplicationNode?W.props.getApplicationNode():W.props.applicationNode}),_(c(W),"checkUnderlayClick",function(se){W.dialogNode&&W.dialogNode.contains(se.target)||se.pageX>se.target.ownerDocument.documentElement.offsetWidth||se.pageY>se.target.ownerDocument.documentElement.offsetHeight||W.exit(se)}),_(c(W),"checkDocumentKeyDown",function(se){W.props.escapeExits&&(se.key==="Escape"||se.key==="Esc"||se.keyCode===27)&&W.exit(se)}),_(c(W),"exit",function(se){W.props.onExit&&W.props.onExit(se)}),!X.titleText&&!X.titleId)throw new Error("react-aria-modal instances should have a `titleText` or `titleId`");return W}return i(ee,[{key:"componentDidMount",value:function(){this.props.onEnter&&this.props.onEnter();var W=this.getApplicationNode();setTimeout(function(){W&&W.setAttribute("aria-hidden","true")},0),this.props.escapeExits&&this.addKeyDownListener(),this.props.scrollDisabled&&K.on()}},{key:"componentDidUpdate",value:function(W){W.scrollDisabled&&!this.props.scrollDisabled?K.off():!W.scrollDisabled&&this.props.scrollDisabled&&K.on(),this.props.escapeExits&&!W.escapeExits?this.addKeyDownListener():!this.props.escapeExits&&W.escapeExits&&this.removeKeyDownListener()}},{key:"componentWillUnmount",value:function(){this.props.scrollDisabled&&K.off();var W=this.getApplicationNode();W&&W.setAttribute("aria-hidden","false"),this.removeKeyDownListener()}},{key:"addKeyDownListener",value:function(){var W=this;setTimeout(function(){document.addEventListener("keydown",W.checkDocumentKeyDown)})}},{key:"removeKeyDownListener",value:function(){var W=this;setTimeout(function(){document.removeEventListener("keydown",W.checkDocumentKeyDown)})}},{key:"render",value:function(){var W=this.props,se={};if(W.includeDefaultStyles&&(se={position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1050,overflowX:"hidden",overflowY:"auto",WebkitOverflowScrolling:"touch",textAlign:"center"},W.underlayColor&&(se.background=W.underlayColor),W.underlayClickExits&&(se.cursor="pointer")),W.underlayStyle)for(var ue in W.underlayStyle)W.underlayStyle.hasOwnProperty(ue)&&(se[ue]=W.underlayStyle[ue]);var ve={className:W.underlayClass,style:se};W.underlayClickExits&&(ve.onMouseDown=this.checkUnderlayClick);for(var ye in this.props.underlayProps)ve[ye]=this.props.underlayProps[ye];var Ee={};W.includeDefaultStyles&&(Ee={display:"inline-block",height:"100%",verticalAlign:"middle"});var _e={key:"a",style:Ee},Be={};if(W.includeDefaultStyles&&(Be={display:"inline-block",textAlign:"left",top:0,maxWidth:"100%",cursor:"auto",outline:W.focusDialog?0:null},W.verticallyCenter&&(Be.verticalAlign="middle",Be.top=0)),W.dialogStyle)for(var Fe in W.dialogStyle)W.dialogStyle.hasOwnProperty(Fe)&&(Be[Fe]=W.dialogStyle[Fe]);var Se={key:"b",ref:(function(De){this.dialogNode=De}).bind(this),role:W.alert?"alertdialog":"dialog",id:W.dialogId,className:W.dialogClass,style:Be};W.titleId?Se["aria-labelledby"]=W.titleId:W.titleText&&(Se["aria-label"]=W.titleText),W.focusDialog&&(Se.tabIndex="-1");for(var qe in W)/^(data-|aria-)/.test(qe)&&(Se[qe]=W[qe]);var ut=[E.createElement("div",Se,W.children)];W.verticallyCenter&&ut.unshift(E.createElement("div",_e));var ht=W.focusTrapOptions||{};return(W.focusDialog||W.initialFocus)&&(ht.initialFocus=W.focusDialog?"#".concat(this.props.dialogId):W.initialFocus),ht.escapeDeactivates=W.escapeExits,E.createElement(P,{focusTrapOptions:ht,paused:W.focusTrapPaused},E.createElement("div",ve,ut))}}]),ee})(E.Component);_(z,"defaultProps",{underlayProps:{},dialogId:"react-aria-modal-dialog",underlayClickExits:!0,escapeExits:!0,underlayColor:"rgba(0,0,0,0.5)",includeDefaultStyles:!0,focusTrapPaused:!1,scrollDisabled:!0});function Q($,Z){if(!window.document)return function(){return null};Z=Z||{};var ee=(function(X){r(se,X);var W=s(se);function se(){var ue;e(this,se);for(var ve=arguments.length,ye=new Array(ve),Ee=0;Ee<ve;Ee++)ye[Ee]=arguments[Ee];return ue=W.call.apply(W,[this].concat(ye)),_(c(ue),"container",null),ue}return i(se,[{key:"componentDidMount",value:function(){Z.renderTo?this.container=typeof Z.renderTo=="string"?document.querySelector(Z.renderTo):Z.renderTo:(this.container=document.createElement("div"),document.body.appendChild(this.container)),this.forceUpdate()}},{key:"componentWillUnmount",value:function(){Z.renderTo||this.container.parentNode.removeChild(this.container)}},{key:"render",value:function(){return this.container===null||!this.props.mounted?null:I.createPortal(E.createElement($,this.props,this.props.children),this.container)}}]),se})(E.Component);return _(ee,"defaultProps",{mounted:!0}),ee}var V=Q(z);return V.renderTo=function($){return Q(z,{renderTo:$})},cI=V,cI}var l6e=a6e();const u6e=Zl(l6e);function gu(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx",e="b56a3b702e6eec99855202d1cfe05d2ba4d6a2ce",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:10,column:3}},1:{start:{line:12,column:12},end:{line:19,column:3}},2:{start:{line:13,column:4},end:{line:15,column:5}},3:{start:{line:14,column:6},end:{line:14,column:36}},4:{start:{line:16,column:4},end:{line:18,column:10}},5:{start:{line:17,column:6},end:{line:17,column:32}},6:{start:{line:21,column:14},end:{line:21,column:26}},7:{start:{line:22,column:4},end:{line:60,column:5}},8:{start:{line:23,column:6},end:{line:57,column:8}},9:{start:{line:59,column:6},end:{line:59,column:19}},10:{start:{line:63,column:14},end:{line:63,column:46}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:12},end:{line:12,column:13}},loc:{start:{line:12,column:18},end:{line:19,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:16,column:15},end:{line:16,column:16}},loc:{start:{line:16,column:21},end:{line:18,column:5}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:61,column:3}},line:20}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:15,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:15,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:60,column:5}},{start:{line:58,column:11},end:{line:60,column:5}}],line:22}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx"],names:[],mappings:"AA8CU,SACE,KADF;AA9CV,OAAO,WAAuC;AAC9C,SAAQ,eAAc;AACtB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,SAA+B,uBAAuB;AAYtD,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,OAAO,eAAe;AAAA,IACpB,oBAAoB;AAAA,EACtB;AAAA;AAAA,EAGA,UAAU,MAAM;AACd,QAAI,SAAS,eAAe;AAC1B,MAAC,SAAS,cAA8B,KAAK;AAAA,IAC/C;AAEA,eAAW,MAAM;AACf,WAAK,MAAM,aAAa;AAAA,IAC1B,GAAG,CAAC;AAAA,EACN;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAG,KAAK,MAAM,QAAQ;AACpB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,WAAW,KAAK,MAAM;AAAA,UACtB,oBAAoB,KAAK,MAAM;AAAA,UAC/B,eAAa,KAAK,MAAM,aAAa;AAAA,UACrC,kBAAkB;AAAA,UAClB,QAAQ,KAAK;AAAA,UACb,aAAY;AAAA,UAEZ;AAAA,YAAC;AAAA;AAAA,cAAI,WAAW,WAAW,kBAAkB,KAAK,MAAM,SAAS;AAAA,cAC/D,eAAa,KAAK,MAAM,aAAa;AAAA,cAErC;AAAA,qCAAC,YAAO,WAAU,yBAChB;AAAA,sCAAC,QAAG,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,kBAC9D,oBAAC,UAAK,WAAU,kBAAiB;AAAA,kBACjC;AAAA,oBAAC;AAAA;AAAA,sBAAO,WAAU;AAAA,sBAChB,OAAO,EAAE,aAAa;AAAA,sBACtB,SAAS,KAAK;AAAA,sBACd,eAAa,KAAK,MAAM,aAAa,IAAE;AAAA,sBAEvC,8BAAC,WAAQ;AAAA;AAAA,kBACX;AAAA,mBACF;AAAA,gBACA,oBAAC,SAAI,WAAU,2BACb,8BAAC,SAAI,WAAU,0BAA0B,eAAK,MAAM,UAAS,GAC/D;AAAA;AAAA;AAAA,UACF;AAAA;AAAA,MACF;AAAA,IACF,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACF;AAEA,MAAM,QAAQ,gBAAgB,EAAE,aAAa;AAC7C,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b56a3b702e6eec99855202d1cfe05d2ba4d6a2ce"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return gu=function(){return s},s}gu();class c6e extends On.Component{static defaultProps=(gu().s[0]++,{underlayClickExits:!0});onClose=(gu().s[1]++,()=>{gu().f[0]++,gu().s[2]++,document.activeElement?(gu().b[0][0]++,gu().s[3]++,document.activeElement.blur()):gu().b[0][1]++,gu().s[4]++,setTimeout(()=>{gu().f[1]++,gu().s[5]++,this.props.onOpenToggle()},0)});render(){gu().f[2]++;const e=(gu().s[6]++,this.props.t);return gu().s[7]++,this.props.isOpen?(gu().b[1][0]++,gu().s[8]++,te.jsx(u6e,{titleText:this.props.title,underlayClickExits:this.props.underlayClickExits,"data-wd-key":this.props["data-wd-key"],verticallyCenter:!0,onExit:this.onClose,dialogClass:"maputnik-modal-container",children:te.jsxs("div",{className:x0("maputnik-modal",this.props.className),"data-wd-key":this.props["data-wd-key"],children:[te.jsxs("header",{className:"maputnik-modal-header",children:[te.jsx("h1",{className:"maputnik-modal-header-title",children:this.props.title}),te.jsx("span",{className:"maputnik-space"}),te.jsx("button",{className:"maputnik-modal-header-toggle",title:e("Close modal"),onClick:this.onClose,"data-wd-key":this.props["data-wd-key"]+".close-modal",children:te.jsx(vfe,{})})]}),te.jsx("div",{className:"maputnik-modal-scroller",children:te.jsx("div",{className:"maputnik-modal-content",children:this.props.children})})]})})):(gu().b[1][1]++,gu().s[9]++,!1)}}const Q1=(gu().s[10]++,Mo()(c6e));function $o(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",e="227136badbf4464e3a73e0852e3bc3d4b9112a08",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",statementMap:{0:{start:{line:4,column:22},end:{line:33,column:1}},1:{start:{line:5,column:26},end:{line:5,column:47}},2:{start:{line:6,column:22},end:{line:11,column:3}},3:{start:{line:7,column:4},end:{line:7,column:19}},4:{start:{line:8,column:4},end:{line:10,column:5}},5:{start:{line:9,column:6},end:{line:9,column:31}},6:{start:{line:12,column:31},end:{line:12,column:36}},7:{start:{line:13,column:18},end:{line:13,column:33}},8:{start:{line:14,column:2},end:{line:31,column:3}},9:{start:{line:15,column:4},end:{line:28,column:12}},10:{start:{line:23,column:25},end:{line:23,column:43}},11:{start:{line:29,column:9},end:{line:31,column:3}},12:{start:{line:30,column:4},end:{line:30,column:172}},13:{start:{line:32,column:2},end:{line:32,column:40}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:22},end:{line:4,column:23}},loc:{start:{line:4,column:33},end:{line:33,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:6,column:22},end:{line:6,column:23}},loc:{start:{line:6,column:33},end:{line:11,column:3}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:23,column:43}},line:23}},branchMap:{0:{loc:{start:{line:8,column:4},end:{line:10,column:5}},type:"if",locations:[{start:{line:8,column:4},end:{line:10,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:13,column:18},end:{line:13,column:33}},type:"binary-expr",locations:[{start:{line:13,column:18},end:{line:13,column:27}},{start:{line:13,column:31},end:{line:13,column:33}}],line:13},2:{loc:{start:{line:14,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:31,column:3}},{start:{line:29,column:9},end:{line:31,column:3}}],line:14},3:{loc:{start:{line:21,column:24},end:{line:21,column:93}},type:"cond-expr",locations:[{start:{line:21,column:31},end:{line:21,column:61}},{start:{line:21,column:64},end:{line:21,column:93}}],line:21},4:{loc:{start:{line:22,column:65},end:{line:22,column:89}},type:"cond-expr",locations:[{start:{line:22,column:72},end:{line:22,column:78}},{start:{line:22,column:81},end:{line:22,column:89}}],line:22},5:{loc:{start:{line:25,column:20},end:{line:25,column:107}},type:"cond-expr",locations:[{start:{line:25,column:43},end:{line:25,column:66}},{start:{line:25,column:85},end:{line:25,column:107}}],line:25},6:{loc:{start:{line:29,column:9},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:9},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx"],names:[],mappings:"AA4BQ,SASY,KATZ;AA5BR,OAAO,WAAyB;AAChC,SAAQ,eAAe,sBAAqB;AAW5C,MAAM,gBAA8C,CAAC,UAAU;AAC7D,QAAM,CAAC,MAAM,OAAO,IAAI,MAAM,SAAS,KAAK;AAE5C,QAAM,cAAc,CAAC,UAAmB;AACtC,YAAQ,KAAK;AACb,QAAI,MAAM,aAAa;AACrB,YAAM,YAAY,KAAK;AAAA,IACzB;AAAA,EACF;AAEA,QAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,QAAM,EAAE,IAAI,IAAI,aAAa,CAAC;AAE9B,MAAI,KAAK;AACP,WACE,oBAAC,WAAM,WAAU,wBACf,+BAAC,SAAI,WAAU,uBACZ;AAAA;AAAA,MACA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,OAAO,iCAAiC;AAAA,UACpD,WAAW,4CAA4C,OAAO,SAAS,QAAQ;AAAA,UAC/E,SAAS,MAAM,YAAY,CAAC,IAAI;AAAA,UAChC,eAAa,sBAAsB;AAAA,UAElC,iBAAO,oBAAC,kBAAe,IAAK,oBAAC,iBAAc;AAAA;AAAA,MAC9C;AAAA,OACF,GACF;AAAA,EAEJ,WAAW,OAAO;AAChB,WACE,oBAAC,WAAM,WAAU,wBACf,8BAAC,SAAI,WAAU,uBAAuB,iBAAM,GAC9C;AAAA,EAEJ;AACA,SAAO,oBAAC,SAAI;AACd;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"227136badbf4464e3a73e0852e3bc3d4b9112a08"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return $o=function(){return s},s}$o();$o().s[0]++;const UU=n=>{$o().f[0]++;const[e,t]=($o().s[1]++,On.useState(!1));$o().s[2]++;const i=a=>{$o().f[1]++,$o().s[3]++,t(a),$o().s[4]++,n.onToggleDoc?($o().b[0][0]++,$o().s[5]++,n.onToggleDoc(a)):$o().b[0][1]++},{label:r,fieldSpec:o}=($o().s[6]++,n),{doc:s}=($o().s[7]++,$o().b[1][0]++,o||($o().b[1][1]++,{}));return $o().s[8]++,s?($o().b[2][0]++,$o().s[9]++,te.jsx("label",{className:"maputnik-doc-wrapper",children:te.jsxs("div",{className:"maputnik-doc-target",children:[r,"",te.jsx("button",{"aria-label":e?($o().b[3][0]++,"close property documentation"):($o().b[3][1]++,"open property documentation"),className:`maputnik-doc-button maputnik-doc-button--${e?($o().b[4][0]++,"open"):($o().b[4][1]++,"closed")}`,onClick:()=>($o().f[2]++,$o().s[10]++,i(!e)),"data-wd-key":"field-doc-button-"+r,children:e?($o().b[5][0]++,te.jsx(ife,{})):($o().b[5][1]++,te.jsx(rfe,{}))})]})})):($o().b[2][1]++,$o().s[11]++,r?($o().b[6][0]++,$o().s[12]++,te.jsx("label",{className:"maputnik-doc-wrapper",children:te.jsx("div",{className:"maputnik-doc-target",children:r})})):($o().b[6][1]++,$o().s[13]++,te.jsx("div",{})))};function A6e(n,e){const t={};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const h6e=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,d6e=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,f6e={};function NW(n,e){return(f6e.jsx?d6e:h6e).test(n)}const p6e=/[ \t\n\f\r]/g;function m6e(n){return typeof n=="object"?n.type==="text"?GW(n.value):!1:GW(n)}function GW(n){return n.replace(p6e,"")===""}class b5{constructor(e,t,i){this.normal=t,this.property=e,i&&(this.space=i)}}b5.prototype.normal={};b5.prototype.property={};b5.prototype.space=void 0;function Ere(n,e){const t={},i={};for(const r of n)Object.assign(t,r.property),Object.assign(i,r.normal);return new b5(t,i,e)}function kR(n){return n.toLowerCase()}class bd{constructor(e,t){this.attribute=t,this.property=e}}bd.prototype.attribute="";bd.prototype.booleanish=!1;bd.prototype.boolean=!1;bd.prototype.commaOrSpaceSeparated=!1;bd.prototype.commaSeparated=!1;bd.prototype.defined=!1;bd.prototype.mustUseProperty=!1;bd.prototype.number=!1;bd.prototype.overloadedBoolean=!1;bd.prototype.property="";bd.prototype.spaceSeparated=!1;bd.prototype.space=void 0;let g6e=0;const qr=FC(),yu=FC(),DR=FC(),Nn=FC(),Sa=FC(),qx=FC(),rf=FC();function FC(){return 2**++g6e}const RR=Object.freeze(Object.defineProperty({__proto__:null,boolean:qr,booleanish:yu,commaOrSpaceSeparated:rf,commaSeparated:qx,number:Nn,overloadedBoolean:DR,spaceSeparated:Sa},Symbol.toStringTag,{value:"Module"})),AI=Object.keys(RR);class KU extends bd{constructor(e,t,i,r){let o=-1;if(super(e,t),WW(this,"space",r),typeof i=="number")for(;++o<AI.length;){const s=AI[o];WW(this,AI[o],(i&RR[s])===RR[s])}}}KU.prototype.defined=!0;function WW(n,e,t){t&&(n[e]=t)}function F2(n){const e={},t={};for(const[i,r]of Object.entries(n.properties)){const o=new KU(i,n.transform(n.attributes||{},i),r,n.space);n.mustUseProperty&&n.mustUseProperty.includes(i)&&(o.mustUseProperty=!0),e[i]=o,t[kR(i)]=i,t[kR(o.attribute)]=i}return new b5(e,t,n.space)}const Bre=F2({properties:{ariaActiveDescendant:null,ariaAtomic:yu,ariaAutoComplete:null,ariaBusy:yu,ariaChecked:yu,ariaColCount:Nn,ariaColIndex:Nn,ariaColSpan:Nn,ariaControls:Sa,ariaCurrent:null,ariaDescribedBy:Sa,ariaDetails:null,ariaDisabled:yu,ariaDropEffect:Sa,ariaErrorMessage:null,ariaExpanded:yu,ariaFlowTo:Sa,ariaGrabbed:yu,ariaHasPopup:null,ariaHidden:yu,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Sa,ariaLevel:Nn,ariaLive:null,ariaModal:yu,ariaMultiLine:yu,ariaMultiSelectable:yu,ariaOrientation:null,ariaOwns:Sa,ariaPlaceholder:null,ariaPosInSet:Nn,ariaPressed:yu,ariaReadOnly:yu,ariaRelevant:null,ariaRequired:yu,ariaRoleDescription:Sa,ariaRowCount:Nn,ariaRowIndex:Nn,ariaRowSpan:Nn,ariaSelected:yu,ariaSetSize:Nn,ariaSort:null,ariaValueMax:Nn,ariaValueMin:Nn,ariaValueNow:Nn,ariaValueText:null,role:null},transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Ore(n,e){return e in n?n[e]:e}function Ire(n,e){return Ore(n,e.toLowerCase())}const y6e=F2({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:qx,acceptCharset:Sa,accessKey:Sa,action:null,allow:null,allowFullScreen:qr,allowPaymentRequest:qr,allowUserMedia:qr,alt:null,as:null,async:qr,autoCapitalize:null,autoComplete:Sa,autoFocus:qr,autoPlay:qr,blocking:Sa,capture:null,charSet:null,checked:qr,cite:null,className:Sa,cols:Nn,colSpan:null,content:null,contentEditable:yu,controls:qr,controlsList:Sa,coords:Nn|qx,crossOrigin:null,data:null,dateTime:null,decoding:null,default:qr,defer:qr,dir:null,dirName:null,disabled:qr,download:DR,draggable:yu,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:qr,formTarget:null,headers:Sa,height:Nn,hidden:DR,high:Nn,href:null,hrefLang:null,htmlFor:Sa,httpEquiv:Sa,id:null,imageSizes:null,imageSrcSet:null,inert:qr,inputMode:null,integrity:null,is:null,isMap:qr,itemId:null,itemProp:Sa,itemRef:Sa,itemScope:qr,itemType:Sa,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:qr,low:Nn,manifest:null,max:null,maxLength:Nn,media:null,method:null,min:null,minLength:Nn,multiple:qr,muted:qr,name:null,nonce:null,noModule:qr,noValidate:qr,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:qr,optimum:Nn,pattern:null,ping:Sa,placeholder:null,playsInline:qr,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:qr,referrerPolicy:null,rel:Sa,required:qr,reversed:qr,rows:Nn,rowSpan:Nn,sandbox:Sa,scope:null,scoped:qr,seamless:qr,selected:qr,shadowRootClonable:qr,shadowRootDelegatesFocus:qr,shadowRootMode:null,shape:null,size:Nn,sizes:null,slot:null,span:Nn,spellCheck:yu,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Nn,step:null,style:null,tabIndex:Nn,target:null,title:null,translate:null,type:null,typeMustMatch:qr,useMap:null,value:yu,width:Nn,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Sa,axis:null,background:null,bgColor:null,border:Nn,borderColor:null,bottomMargin:Nn,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:qr,declare:qr,event:null,face:null,frame:null,frameBorder:null,hSpace:Nn,leftMargin:Nn,link:null,longDesc:null,lowSrc:null,marginHeight:Nn,marginWidth:Nn,noResize:qr,noHref:qr,noShade:qr,noWrap:qr,object:null,profile:null,prompt:null,rev:null,rightMargin:Nn,rules:null,scheme:null,scrolling:yu,standby:null,summary:null,text:null,topMargin:Nn,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Nn,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:qr,disableRemotePlayback:qr,prefix:null,property:null,results:Nn,security:null,unselectable:null},space:"html",transform:Ire}),v6e=F2({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:rf,accentHeight:Nn,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Nn,amplitude:Nn,arabicForm:null,ascent:Nn,attributeName:null,attributeType:null,azimuth:Nn,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Nn,by:null,calcMode:null,capHeight:Nn,className:Sa,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Nn,diffuseConstant:Nn,direction:null,display:null,dur:null,divisor:Nn,dominantBaseline:null,download:qr,dx:null,dy:null,edgeMode:null,editable:null,elevation:Nn,enableBackground:null,end:null,event:null,exponent:Nn,externalResourcesRequired:null,fill:null,fillOpacity:Nn,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:qx,g2:qx,glyphName:qx,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Nn,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Nn,horizOriginX:Nn,horizOriginY:Nn,id:null,ideographic:Nn,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Nn,k:Nn,k1:Nn,k2:Nn,k3:Nn,k4:Nn,kernelMatrix:rf,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Nn,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Nn,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Nn,overlineThickness:Nn,paintOrder:null,panose1:null,path:null,pathLength:Nn,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Sa,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Nn,pointsAtY:Nn,pointsAtZ:Nn,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:rf,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:rf,rev:rf,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:rf,requiredFeatures:rf,requiredFonts:rf,requiredFormats:rf,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Nn,specularExponent:Nn,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Nn,strikethroughThickness:Nn,string:null,stroke:null,strokeDashArray:rf,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Nn,strokeOpacity:Nn,strokeWidth:null,style:null,surfaceScale:Nn,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:rf,tabIndex:Nn,tableValues:null,target:null,targetX:Nn,targetY:Nn,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:rf,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Nn,underlineThickness:Nn,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Nn,values:null,vAlphabetic:Nn,vMathematical:Nn,vectorEffect:null,vHanging:Nn,vIdeographic:Nn,version:null,vertAdvY:Nn,vertOriginX:Nn,vertOriginY:Nn,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Nn,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Ore}),Tre=F2({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()}}),kre=F2({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Ire}),Dre=F2({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()}}),b6e={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},C6e=/[A-Z]/g,QW=/-[a-z]/g,_6e=/^data[-\w.:]+$/i;function x6e(n,e){const t=kR(e);let i=e,r=bd;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&_6e.test(e)){if(e.charAt(4)==="-"){const o=e.slice(5).replace(QW,w6e);i="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=e.slice(4);if(!QW.test(o)){let s=o.replace(C6e,M6e);s.charAt(0)!=="-"&&(s="-"+s),e="data"+s}}r=KU}return new r(i,e)}function M6e(n){return"-"+n.toLowerCase()}function w6e(n){return n.charAt(1).toUpperCase()}const S6e=Ere([Bre,y6e,Tre,kre,Dre],"html"),FU=Ere([Bre,v6e,Tre,kre,Dre],"svg");function E6e(n){return n.join(" ").trim()}var F_={},hI,qW;function B6e(){if(qW)return hI;qW=1;var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,a=/^\s+|\s+$/g,c=`
`,f="/",y="*",_="",E="comment",I="declaration";hI=function(K,z){if(typeof K!="string")throw new TypeError("First argument must be a string");if(!K)return[];z=z||{};var Q=1,V=1;function $(_e){var Be=_e.match(e);Be&&(Q+=Be.length);var Fe=_e.lastIndexOf(c);V=~Fe?_e.length-Fe:V+_e.length}function Z(){var _e={line:Q,column:V};return function(Be){return Be.position=new ee(_e),se(),Be}}function ee(_e){this.start=_e,this.end={line:Q,column:V},this.source=z.source}ee.prototype.content=K;function X(_e){var Be=new Error(z.source+":"+Q+":"+V+": "+_e);if(Be.reason=_e,Be.filename=z.source,Be.line=Q,Be.column=V,Be.source=K,!z.silent)throw Be}function W(_e){var Be=_e.exec(K);if(Be){var Fe=Be[0];return $(Fe),K=K.slice(Fe.length),Be}}function se(){W(t)}function ue(_e){var Be;for(_e=_e||[];Be=ve();)Be!==!1&&_e.push(Be);return _e}function ve(){var _e=Z();if(!(f!=K.charAt(0)||y!=K.charAt(1))){for(var Be=2;_!=K.charAt(Be)&&(y!=K.charAt(Be)||f!=K.charAt(Be+1));)++Be;if(Be+=2,_===K.charAt(Be-1))return X("End of comment missing");var Fe=K.slice(2,Be-2);return V+=2,$(Fe),K=K.slice(Be),V+=2,_e({type:E,comment:Fe})}}function ye(){var _e=Z(),Be=W(i);if(Be){if(ve(),!W(r))return X("property missing ':'");var Fe=W(o),Se=_e({type:I,property:P(Be[0].replace(n,_)),value:Fe?P(Fe[0].replace(n,_)):_});return W(s),Se}}function Ee(){var _e=[];ue(_e);for(var Be;Be=ye();)Be!==!1&&(_e.push(Be),ue(_e));return _e}return se(),Ee()};function P(K){return K?K.replace(a,_):_}return hI}var YW;function O6e(){if(YW)return F_;YW=1;var n=F_&&F_.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(F_,"__esModule",{value:!0}),F_.default=t;const e=n(B6e());function t(i,r){let o=null;if(!i||typeof i!="string")return o;const s=(0,e.default)(i),a=typeof r=="function";return s.forEach(c=>{if(c.type!=="declaration")return;const{property:f,value:y}=c;a?r(f,y,c):y&&(o=o||{},o[f]=y)}),o}return F_}var y3={},VW;function I6e(){if(VW)return y3;VW=1,Object.defineProperty(y3,"__esModule",{value:!0}),y3.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,r=/^-(ms)-/,o=function(f){return!f||t.test(f)||n.test(f)},s=function(f,y){return y.toUpperCase()},a=function(f,y){return"".concat(y,"-")},c=function(f,y){return y===void 0&&(y={}),o(f)?f:(f=f.toLowerCase(),y.reactCompat?f=f.replace(r,a):f=f.replace(i,a),f.replace(e,s))};return y3.camelCase=c,y3}var v3,$W;function T6e(){if($W)return v3;$W=1;var n=v3&&v3.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},e=n(O6e()),t=I6e();function i(r,o){var s={};return!r||typeof r!="string"||(0,e.default)(r,function(a,c){a&&c&&(s[(0,t.camelCase)(a,o)]=c)}),s}return i.default=i,v3=i,v3}var k6e=T6e();const D6e=Zl(k6e),Rre=Pre("end"),zU=Pre("start");function Pre(n){return e;function e(t){const i=t&&t.position&&t.position[n]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function R6e(n){const e=zU(n),t=Rre(n);if(e&&t)return{start:e,end:t}}function v4(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?HW(n.position):"start"in n||"end"in n?HW(n):"line"in n||"column"in n?PR(n):""}function PR(n){return ZW(n&&n.line)+":"+ZW(n&&n.column)}function HW(n){return PR(n&&n.start)+"-"+PR(n&&n.end)}function ZW(n){return n&&typeof n=="number"?n:1}class qA extends Error{constructor(e,t,i){super(),typeof t=="string"&&(i=t,t=void 0);let r="",o={},s=!1;if(t&&("line"in t&&"column"in t?o={place:t}:"start"in t&&"end"in t?o={place:t}:"type"in t?o={ancestors:[t],place:t.position}:o={...t}),typeof e=="string"?r=e:!o.cause&&e&&(s=!0,r=e.message,o.cause=e),!o.ruleId&&!o.source&&typeof i=="string"){const c=i.indexOf(":");c===-1?o.ruleId=i:(o.source=i.slice(0,c),o.ruleId=i.slice(c+1))}if(!o.place&&o.ancestors&&o.ancestors){const c=o.ancestors[o.ancestors.length-1];c&&(o.place=c.position)}const a=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=a?a.line:void 0,this.name=v4(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=s&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}qA.prototype.file="";qA.prototype.name="";qA.prototype.reason="";qA.prototype.message="";qA.prototype.stack="";qA.prototype.column=void 0;qA.prototype.line=void 0;qA.prototype.ancestors=void 0;qA.prototype.cause=void 0;qA.prototype.fatal=void 0;qA.prototype.place=void 0;qA.prototype.ruleId=void 0;qA.prototype.source=void 0;const jU={}.hasOwnProperty,P6e=new Map,L6e=/[A-Z]/g,U6e=new Set(["table","tbody","thead","tfoot","tr"]),K6e=new Set(["td","th"]),Lre="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function F6e(n,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=e.filePath||void 0;let i;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=Y6e(t,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=q6e(t,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:i,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?FU:S6e,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},o=Ure(r,n,void 0);return o&&typeof o!="string"?o:r.create(n,r.Fragment,{children:o||void 0},void 0)}function Ure(n,e,t){if(e.type==="element")return z6e(n,e,t);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return j6e(n,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return G6e(n,e,t);if(e.type==="mdxjsEsm")return N6e(n,e);if(e.type==="root")return W6e(n,e,t);if(e.type==="text")return Q6e(n,e)}function z6e(n,e,t){const i=n.schema;let r=i;e.tagName.toLowerCase()==="svg"&&i.space==="html"&&(r=FU,n.schema=r),n.ancestors.push(e);const o=Fre(n,e.tagName,!1),s=V6e(n,e);let a=GU(n,e);return U6e.has(e.tagName)&&(a=a.filter(function(c){return typeof c=="string"?!m6e(c):!0})),Kre(n,s,o,e),NU(s,a),n.ancestors.pop(),n.schema=i,n.create(e,o,s,t)}function j6e(n,e){if(e.data&&e.data.estree&&n.evaluater){const i=e.data.estree.body[0];return i.type,n.evaluater.evaluateExpression(i.expression)}CM(n,e.position)}function N6e(n,e){if(e.data&&e.data.estree&&n.evaluater)return n.evaluater.evaluateProgram(e.data.estree);CM(n,e.position)}function G6e(n,e,t){const i=n.schema;let r=i;e.name==="svg"&&i.space==="html"&&(r=FU,n.schema=r),n.ancestors.push(e);const o=e.name===null?n.Fragment:Fre(n,e.name,!0),s=$6e(n,e),a=GU(n,e);return Kre(n,s,o,e),NU(s,a),n.ancestors.pop(),n.schema=i,n.create(e,o,s,t)}function W6e(n,e,t){const i={};return NU(i,GU(n,e)),n.create(e,n.Fragment,i,t)}function Q6e(n,e){return e.value}function Kre(n,e,t,i){typeof t!="string"&&t!==n.Fragment&&n.passNode&&(e.node=i)}function NU(n,e){if(e.length>0){const t=e.length>1?e:e[0];t&&(n.children=t)}}function q6e(n,e,t){return i;function i(r,o,s,a){const f=Array.isArray(s.children)?t:e;return a?f(o,s,a):f(o,s)}}function Y6e(n,e){return t;function t(i,r,o,s){const a=Array.isArray(o.children),c=zU(i);return e(r,o,s,a,{columnNumber:c?c.column-1:void 0,fileName:n,lineNumber:c?c.line:void 0},void 0)}}function V6e(n,e){const t={};let i,r;for(r in e.properties)if(r!=="children"&&jU.call(e.properties,r)){const o=H6e(n,r,e.properties[r]);if(o){const[s,a]=o;n.tableCellAlignToStyle&&s==="align"&&typeof a=="string"&&K6e.has(e.tagName)?i=a:t[s]=a}}if(i){const o=t.style||(t.style={});o[n.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return t}function $6e(n,e){const t={};for(const i of e.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&n.evaluater){const o=i.data.estree.body[0];o.type;const s=o.expression;s.type;const a=s.properties[0];a.type,Object.assign(t,n.evaluater.evaluateExpression(a.argument))}else CM(n,e.position);else{const r=i.name;let o;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&n.evaluater){const a=i.value.data.estree.body[0];a.type,o=n.evaluater.evaluateExpression(a.expression)}else CM(n,e.position);else o=i.value===null?!0:i.value;t[r]=o}return t}function GU(n,e){const t=[];let i=-1;const r=n.passKeys?new Map:P6e;for(;++i<e.children.length;){const o=e.children[i];let s;if(n.passKeys){const c=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(c){const f=r.get(c)||0;s=c+"-"+f,r.set(c,f+1)}}const a=Ure(n,o,s);a!==void 0&&t.push(a)}return t}function H6e(n,e,t){const i=x6e(n.schema,e);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=i.commaSeparated?A6e(t):E6e(t)),i.property==="style"){let r=typeof t=="object"?t:Z6e(n,String(t));return n.stylePropertyNameCase==="css"&&(r=X6e(r)),["style",r]}return[n.elementAttributeNameCase==="react"&&i.space?b6e[i.property]||i.property:i.attribute,t]}}function Z6e(n,e){try{return D6e(e,{reactCompat:!0})}catch(t){if(n.ignoreInvalidStyle)return{};const i=t,r=new qA("Cannot parse `style` attribute",{ancestors:n.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=n.filePath||void 0,r.url=Lre+"#cannot-parse-style-attribute",r}}function Fre(n,e,t){let i;if(!t)i={type:"Literal",value:e};else if(e.includes(".")){const r=e.split(".");let o=-1,s;for(;++o<r.length;){const a=NW(r[o])?{type:"Identifier",name:r[o]}:{type:"Literal",value:r[o]};s=s?{type:"MemberExpression",object:s,property:a,computed:!!(o&&a.type==="Literal"),optional:!1}:a}i=s}else i=NW(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(i.type==="Literal"){const r=i.value;return jU.call(n.components,r)?n.components[r]:r}if(n.evaluater)return n.evaluater.evaluateExpression(i);CM(n)}function CM(n,e){const t=new qA("Cannot handle MDX estrees without `createEvaluater`",{ancestors:n.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=n.filePath||void 0,t.url=Lre+"#cannot-handle-mdx-estrees-without-createevaluater",t}function X6e(n){const e={};let t;for(t in n)jU.call(n,t)&&(e[J6e(t)]=n[t]);return e}function J6e(n){let e=n.replace(L6e,eBe);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function eBe(n){return"-"+n.toLowerCase()}const dI={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},tBe={};function nBe(n,e){const t=tBe,i=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,r=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return zre(n,i,r)}function zre(n,e,t){if(iBe(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return XW(n.children,e,t)}return Array.isArray(n)?XW(n,e,t):""}function XW(n,e,t){const i=[];let r=-1;for(;++r<n.length;)i[r]=zre(n[r],e,t);return i.join("")}function iBe(n){return!!(n&&typeof n=="object")}const JW=document.createElement("i");function WU(n){const e="&"+n+";";JW.innerHTML=e;const t=JW.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}function v0(n,e,t,i){const r=n.length;let o=0,s;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,t=t>0?t:0,i.length<1e4)s=Array.from(i),s.unshift(e,t),n.splice(...s);else for(t&&n.splice(e,t);o<i.length;)s=i.slice(o,o+1e4),s.unshift(e,0),n.splice(...s),o+=1e4,e+=1e4}function Ap(n,e){return n.length>0?(v0(n,n.length,0,e),n):e}const eQ={}.hasOwnProperty;function rBe(n){const e={};let t=-1;for(;++t<n.length;)oBe(e,n[t]);return e}function oBe(n,e){let t;for(t in e){const r=(eQ.call(n,t)?n[t]:void 0)||(n[t]={}),o=e[t];let s;if(o)for(s in o){eQ.call(r,s)||(r[s]=[]);const a=o[s];sBe(r[s],Array.isArray(a)?a:a?[a]:[])}}}function sBe(n,e){let t=-1;const i=[];for(;++t<e.length;)(e[t].add==="after"?n:i).push(e[t]);v0(n,0,0,i)}function jre(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCodePoint(t)}function Yx(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Hg=Rv(/[A-Za-z]/),mf=Rv(/[\dA-Za-z]/),aBe=Rv(/[#-'*+\--9=?A-Z^-~]/);function LR(n){return n!==null&&(n<32||n===127)}const UR=Rv(/\d/),lBe=Rv(/[\dA-Fa-f]/),uBe=Rv(/[!-/:-@[-`{-~]/);function pr(n){return n!==null&&n<-2}function pd(n){return n!==null&&(n<0||n===32)}function _s(n){return n===-2||n===-1||n===32}const cBe=Rv(new RegExp("\\p{P}|\\p{S}","u")),ABe=Rv(/\s/);function Rv(n){return e;function e(t){return t!==null&&t>-1&&n.test(String.fromCharCode(t))}}function z2(n){const e=[];let t=-1,i=0,r=0;for(;++t<n.length;){const o=n.charCodeAt(t);let s="";if(o===37&&mf(n.charCodeAt(t+1))&&mf(n.charCodeAt(t+2)))r=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(s=String.fromCharCode(o));else if(o>55295&&o<57344){const a=n.charCodeAt(t+1);o<56320&&a>56319&&a<57344?(s=String.fromCharCode(o,a),r=1):s=""}else s=String.fromCharCode(o);s&&(e.push(n.slice(i,t),encodeURIComponent(s)),i=t+r+1,s=""),r&&(t+=r,r=0)}return e.join("")+n.slice(i)}function Ea(n,e,t,i){const r=i?i-1:Number.POSITIVE_INFINITY;let o=0;return s;function s(c){return _s(c)?(n.enter(t),a(c)):e(c)}function a(c){return _s(c)&&o++<r?(n.consume(c),a):(n.exit(t),e(c))}}const hBe={tokenize:dBe};function dBe(n){const e=n.attempt(this.parser.constructs.contentInitial,i,r);let t;return e;function i(a){if(a===null){n.consume(a);return}return n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),Ea(n,e,"linePrefix")}function r(a){return n.enter("paragraph"),o(a)}function o(a){const c=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=c),t=c,s(a)}function s(a){if(a===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(a);return}return pr(a)?(n.consume(a),n.exit("chunkText"),o):(n.consume(a),s)}}const fBe={tokenize:pBe},tQ={tokenize:mBe};function pBe(n){const e=this,t=[];let i=0,r,o,s;return a;function a($){if(i<t.length){const Z=t[i];return e.containerState=Z[1],n.attempt(Z[0].continuation,c,f)($)}return f($)}function c($){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&V();const Z=e.events.length;let ee=Z,X;for(;ee--;)if(e.events[ee][0]==="exit"&&e.events[ee][1].type==="chunkFlow"){X=e.events[ee][1].end;break}Q(i);let W=Z;for(;W<e.events.length;)e.events[W][1].end={...X},W++;return v0(e.events,ee+1,0,e.events.slice(Z)),e.events.length=W,f($)}return a($)}function f($){if(i===t.length){if(!r)return E($);if(r.currentConstruct&&r.currentConstruct.concrete)return P($);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(tQ,y,_)($)}function y($){return r&&V(),Q(i),E($)}function _($){return e.parser.lazy[e.now().line]=i!==t.length,s=e.now().offset,P($)}function E($){return e.containerState={},n.attempt(tQ,I,P)($)}function I($){return i++,t.push([e.currentConstruct,e.containerState]),E($)}function P($){if($===null){r&&V(),Q(0),n.consume($);return}return r=r||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:o}),K($)}function K($){if($===null){z(n.exit("chunkFlow"),!0),Q(0),n.consume($);return}return pr($)?(n.consume($),z(n.exit("chunkFlow")),i=0,e.interrupt=void 0,a):(n.consume($),K)}function z($,Z){const ee=e.sliceStream($);if(Z&&ee.push(null),$.previous=o,o&&(o.next=$),o=$,r.defineSkip($.start),r.write(ee),e.parser.lazy[$.start.line]){let X=r.events.length;for(;X--;)if(r.events[X][1].start.offset<s&&(!r.events[X][1].end||r.events[X][1].end.offset>s))return;const W=e.events.length;let se=W,ue,ve;for(;se--;)if(e.events[se][0]==="exit"&&e.events[se][1].type==="chunkFlow"){if(ue){ve=e.events[se][1].end;break}ue=!0}for(Q(i),X=W;X<e.events.length;)e.events[X][1].end={...ve},X++;v0(e.events,se+1,0,e.events.slice(W)),e.events.length=X}}function Q($){let Z=t.length;for(;Z-- >$;){const ee=t[Z];e.containerState=ee[1],ee[0].exit.call(e,n)}t.length=$}function V(){r.write([null]),o=void 0,r=void 0,e.containerState._closeFlow=void 0}}function mBe(n,e,t){return Ea(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function nQ(n){if(n===null||pd(n)||ABe(n))return 1;if(cBe(n))return 2}function QU(n,e,t){const i=[];let r=-1;for(;++r<n.length;){const o=n[r].resolveAll;o&&!i.includes(o)&&(e=o(e,t),i.push(o))}return e}const KR={name:"attention",resolveAll:gBe,tokenize:yBe};function gBe(n,e){let t=-1,i,r,o,s,a,c,f,y;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(i=t;i--;)if(n[i][0]==="exit"&&n[i][1].type==="attentionSequence"&&n[i][1]._open&&e.sliceSerialize(n[i][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[i][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[i][1].end.offset-n[i][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;c=n[i][1].end.offset-n[i][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const _={...n[i][1].end},E={...n[t][1].start};iQ(_,-c),iQ(E,c),s={type:c>1?"strongSequence":"emphasisSequence",start:_,end:{...n[i][1].end}},a={type:c>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:E},o={type:c>1?"strongText":"emphasisText",start:{...n[i][1].end},end:{...n[t][1].start}},r={type:c>1?"strong":"emphasis",start:{...s.start},end:{...a.end}},n[i][1].end={...s.start},n[t][1].start={...a.end},f=[],n[i][1].end.offset-n[i][1].start.offset&&(f=Ap(f,[["enter",n[i][1],e],["exit",n[i][1],e]])),f=Ap(f,[["enter",r,e],["enter",s,e],["exit",s,e],["enter",o,e]]),f=Ap(f,QU(e.parser.constructs.insideSpan.null,n.slice(i+1,t),e)),f=Ap(f,[["exit",o,e],["enter",a,e],["exit",a,e],["exit",r,e]]),n[t][1].end.offset-n[t][1].start.offset?(y=2,f=Ap(f,[["enter",n[t][1],e],["exit",n[t][1],e]])):y=0,v0(n,i-1,t-i+3,f),t=i+f.length-y-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function yBe(n,e){const t=this.parser.constructs.attentionMarkers.null,i=this.previous,r=nQ(i);let o;return s;function s(c){return o=c,n.enter("attentionSequence"),a(c)}function a(c){if(c===o)return n.consume(c),a;const f=n.exit("attentionSequence"),y=nQ(c),_=!y||y===2&&r||t.includes(c),E=!r||r===2&&y||t.includes(i);return f._open=!!(o===42?_:_&&(r||!E)),f._close=!!(o===42?E:E&&(y||!_)),e(c)}}function iQ(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const vBe={name:"autolink",tokenize:bBe};function bBe(n,e,t){let i=0;return r;function r(I){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(I),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),o}function o(I){return Hg(I)?(n.consume(I),s):I===64?t(I):f(I)}function s(I){return I===43||I===45||I===46||mf(I)?(i=1,a(I)):f(I)}function a(I){return I===58?(n.consume(I),i=0,c):(I===43||I===45||I===46||mf(I))&&i++<32?(n.consume(I),a):(i=0,f(I))}function c(I){return I===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(I),n.exit("autolinkMarker"),n.exit("autolink"),e):I===null||I===32||I===60||LR(I)?t(I):(n.consume(I),c)}function f(I){return I===64?(n.consume(I),y):aBe(I)?(n.consume(I),f):t(I)}function y(I){return mf(I)?_(I):t(I)}function _(I){return I===46?(n.consume(I),i=0,y):I===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(I),n.exit("autolinkMarker"),n.exit("autolink"),e):E(I)}function E(I){if((I===45||mf(I))&&i++<63){const P=I===45?E:_;return n.consume(I),P}return t(I)}}const MB={partial:!0,tokenize:CBe};function CBe(n,e,t){return i;function i(o){return _s(o)?Ea(n,r,"linePrefix")(o):r(o)}function r(o){return o===null||pr(o)?e(o):t(o)}}const Nre={continuation:{tokenize:xBe},exit:MBe,name:"blockQuote",tokenize:_Be};function _Be(n,e,t){const i=this;return r;function r(s){if(s===62){const a=i.containerState;return a.open||(n.enter("blockQuote",{_container:!0}),a.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(s),n.exit("blockQuoteMarker"),o}return t(s)}function o(s){return _s(s)?(n.enter("blockQuotePrefixWhitespace"),n.consume(s),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(s))}}function xBe(n,e,t){const i=this;return r;function r(s){return _s(s)?Ea(n,o,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):o(s)}function o(s){return n.attempt(Nre,e,t)(s)}}function MBe(n){n.exit("blockQuote")}const Gre={name:"characterEscape",tokenize:wBe};function wBe(n,e,t){return i;function i(o){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(o),n.exit("escapeMarker"),r}function r(o){return uBe(o)?(n.enter("characterEscapeValue"),n.consume(o),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(o)}}const Wre={name:"characterReference",tokenize:SBe};function SBe(n,e,t){const i=this;let r=0,o,s;return a;function a(_){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(_),n.exit("characterReferenceMarker"),c}function c(_){return _===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(_),n.exit("characterReferenceMarkerNumeric"),f):(n.enter("characterReferenceValue"),o=31,s=mf,y(_))}function f(_){return _===88||_===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(_),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),o=6,s=lBe,y):(n.enter("characterReferenceValue"),o=7,s=UR,y(_))}function y(_){if(_===59&&r){const E=n.exit("characterReferenceValue");return s===mf&&!WU(i.sliceSerialize(E))?t(_):(n.enter("characterReferenceMarker"),n.consume(_),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return s(_)&&r++<o?(n.consume(_),y):t(_)}}const rQ={partial:!0,tokenize:BBe},oQ={concrete:!0,name:"codeFenced",tokenize:EBe};function EBe(n,e,t){const i=this,r={partial:!0,tokenize:ee};let o=0,s=0,a;return c;function c(X){return f(X)}function f(X){const W=i.events[i.events.length-1];return o=W&&W[1].type==="linePrefix"?W[2].sliceSerialize(W[1],!0).length:0,a=X,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),y(X)}function y(X){return X===a?(s++,n.consume(X),y):s<3?t(X):(n.exit("codeFencedFenceSequence"),_s(X)?Ea(n,_,"whitespace")(X):_(X))}function _(X){return X===null||pr(X)?(n.exit("codeFencedFence"),i.interrupt?e(X):n.check(rQ,K,Z)(X)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),E(X))}function E(X){return X===null||pr(X)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),_(X)):_s(X)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),Ea(n,I,"whitespace")(X)):X===96&&X===a?t(X):(n.consume(X),E)}function I(X){return X===null||pr(X)?_(X):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),P(X))}function P(X){return X===null||pr(X)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),_(X)):X===96&&X===a?t(X):(n.consume(X),P)}function K(X){return n.attempt(r,Z,z)(X)}function z(X){return n.enter("lineEnding"),n.consume(X),n.exit("lineEnding"),Q}function Q(X){return o>0&&_s(X)?Ea(n,V,"linePrefix",o+1)(X):V(X)}function V(X){return X===null||pr(X)?n.check(rQ,K,Z)(X):(n.enter("codeFlowValue"),$(X))}function $(X){return X===null||pr(X)?(n.exit("codeFlowValue"),V(X)):(n.consume(X),$)}function Z(X){return n.exit("codeFenced"),e(X)}function ee(X,W,se){let ue=0;return ve;function ve(Fe){return X.enter("lineEnding"),X.consume(Fe),X.exit("lineEnding"),ye}function ye(Fe){return X.enter("codeFencedFence"),_s(Fe)?Ea(X,Ee,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Fe):Ee(Fe)}function Ee(Fe){return Fe===a?(X.enter("codeFencedFenceSequence"),_e(Fe)):se(Fe)}function _e(Fe){return Fe===a?(ue++,X.consume(Fe),_e):ue>=s?(X.exit("codeFencedFenceSequence"),_s(Fe)?Ea(X,Be,"whitespace")(Fe):Be(Fe)):se(Fe)}function Be(Fe){return Fe===null||pr(Fe)?(X.exit("codeFencedFence"),W(Fe)):se(Fe)}}}function BBe(n,e,t){const i=this;return r;function r(s){return s===null?t(s):(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),o)}function o(s){return i.parser.lazy[i.now().line]?t(s):e(s)}}const fI={name:"codeIndented",tokenize:IBe},OBe={partial:!0,tokenize:TBe};function IBe(n,e,t){const i=this;return r;function r(f){return n.enter("codeIndented"),Ea(n,o,"linePrefix",5)(f)}function o(f){const y=i.events[i.events.length-1];return y&&y[1].type==="linePrefix"&&y[2].sliceSerialize(y[1],!0).length>=4?s(f):t(f)}function s(f){return f===null?c(f):pr(f)?n.attempt(OBe,s,c)(f):(n.enter("codeFlowValue"),a(f))}function a(f){return f===null||pr(f)?(n.exit("codeFlowValue"),s(f)):(n.consume(f),a)}function c(f){return n.exit("codeIndented"),e(f)}}function TBe(n,e,t){const i=this;return r;function r(s){return i.parser.lazy[i.now().line]?t(s):pr(s)?(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),r):Ea(n,o,"linePrefix",5)(s)}function o(s){const a=i.events[i.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(s):pr(s)?r(s):t(s)}}const kBe={name:"codeText",previous:RBe,resolve:DBe,tokenize:PBe};function DBe(n){let e=n.length-4,t=3,i,r;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(i=t;++i<e;)if(n[i][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(i=t-1,e++;++i<=e;)r===void 0?i!==e&&n[i][1].type!=="lineEnding"&&(r=i):(i===e||n[i][1].type==="lineEnding")&&(n[r][1].type="codeTextData",i!==r+2&&(n[r][1].end=n[i-1][1].end,n.splice(r+2,i-r-2),e-=i-r-2,i=r+2),r=void 0);return n}function RBe(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function PBe(n,e,t){let i=0,r,o;return s;function s(_){return n.enter("codeText"),n.enter("codeTextSequence"),a(_)}function a(_){return _===96?(n.consume(_),i++,a):(n.exit("codeTextSequence"),c(_))}function c(_){return _===null?t(_):_===32?(n.enter("space"),n.consume(_),n.exit("space"),c):_===96?(o=n.enter("codeTextSequence"),r=0,y(_)):pr(_)?(n.enter("lineEnding"),n.consume(_),n.exit("lineEnding"),c):(n.enter("codeTextData"),f(_))}function f(_){return _===null||_===32||_===96||pr(_)?(n.exit("codeTextData"),c(_)):(n.consume(_),f)}function y(_){return _===96?(n.consume(_),r++,y):r===i?(n.exit("codeTextSequence"),n.exit("codeText"),e(_)):(o.type="codeTextData",f(_))}}class LBe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const i=t??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,t,i){const r=t||0;this.setCursor(Math.trunc(e));const o=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return i&&b3(this.left,i),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),b3(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),b3(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);b3(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);b3(this.left,t.reverse())}}}function b3(n,e){let t=0;if(e.length<1e4)n.push(...e);else for(;t<e.length;)n.push(...e.slice(t,t+1e4)),t+=1e4}function Qre(n){const e={};let t=-1,i,r,o,s,a,c,f;const y=new LBe(n);for(;++t<y.length;){for(;t in e;)t=e[t];if(i=y.get(t),t&&i[1].type==="chunkFlow"&&y.get(t-1)[1].type==="listItemPrefix"&&(c=i[1]._tokenizer.events,o=0,o<c.length&&c[o][1].type==="lineEndingBlank"&&(o+=2),o<c.length&&c[o][1].type==="content"))for(;++o<c.length&&c[o][1].type!=="content";)c[o][1].type==="chunkText"&&(c[o][1]._isInFirstContentOfListItem=!0,o++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,UBe(y,t)),t=e[t],f=!0);else if(i[1]._container){for(o=t,r=void 0;o--;)if(s=y.get(o),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(r&&(y.get(r)[1].type="lineEndingBlank"),s[1].type="lineEnding",r=o);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;r&&(i[1].end={...y.get(r)[1].start},a=y.slice(r,t),a.unshift(i),y.splice(r,t-r+1,a))}}return v0(n,0,Number.POSITIVE_INFINITY,y.slice(0)),!f}function UBe(n,e){const t=n.get(e)[1],i=n.get(e)[2];let r=e-1;const o=[];let s=t._tokenizer;s||(s=i.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const a=s.events,c=[],f={};let y,_,E=-1,I=t,P=0,K=0;const z=[K];for(;I;){for(;n.get(++r)[1]!==I;);o.push(r),I._tokenizer||(y=i.sliceStream(I),I.next||y.push(null),_&&s.defineSkip(I.start),I._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(y),I._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),_=I,I=I.next}for(I=t;++E<a.length;)a[E][0]==="exit"&&a[E-1][0]==="enter"&&a[E][1].type===a[E-1][1].type&&a[E][1].start.line!==a[E][1].end.line&&(K=E+1,z.push(K),I._tokenizer=void 0,I.previous=void 0,I=I.next);for(s.events=[],I?(I._tokenizer=void 0,I.previous=void 0):z.pop(),E=z.length;E--;){const Q=a.slice(z[E],z[E+1]),V=o.pop();c.push([V,V+Q.length-1]),n.splice(V,2,Q)}for(c.reverse(),E=-1;++E<c.length;)f[P+c[E][0]]=P+c[E][1],P+=c[E][1]-c[E][0]-1;return f}const KBe={resolve:zBe,tokenize:jBe},FBe={partial:!0,tokenize:NBe};function zBe(n){return Qre(n),n}function jBe(n,e){let t;return i;function i(a){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),r(a)}function r(a){return a===null?o(a):pr(a)?n.check(FBe,s,o)(a):(n.consume(a),r)}function o(a){return n.exit("chunkContent"),n.exit("content"),e(a)}function s(a){return n.consume(a),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,r}}function NBe(n,e,t){const i=this;return r;function r(s){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),Ea(n,o,"linePrefix")}function o(s){if(s===null||pr(s))return t(s);const a=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(s):n.interrupt(i.parser.constructs.flow,t,e)(s)}}function qre(n,e,t,i,r,o,s,a,c){const f=c||Number.POSITIVE_INFINITY;let y=0;return _;function _(Q){return Q===60?(n.enter(i),n.enter(r),n.enter(o),n.consume(Q),n.exit(o),E):Q===null||Q===32||Q===41||LR(Q)?t(Q):(n.enter(i),n.enter(s),n.enter(a),n.enter("chunkString",{contentType:"string"}),K(Q))}function E(Q){return Q===62?(n.enter(o),n.consume(Q),n.exit(o),n.exit(r),n.exit(i),e):(n.enter(a),n.enter("chunkString",{contentType:"string"}),I(Q))}function I(Q){return Q===62?(n.exit("chunkString"),n.exit(a),E(Q)):Q===null||Q===60||pr(Q)?t(Q):(n.consume(Q),Q===92?P:I)}function P(Q){return Q===60||Q===62||Q===92?(n.consume(Q),I):I(Q)}function K(Q){return!y&&(Q===null||Q===41||pd(Q))?(n.exit("chunkString"),n.exit(a),n.exit(s),n.exit(i),e(Q)):y<f&&Q===40?(n.consume(Q),y++,K):Q===41?(n.consume(Q),y--,K):Q===null||Q===32||Q===40||LR(Q)?t(Q):(n.consume(Q),Q===92?z:K)}function z(Q){return Q===40||Q===41||Q===92?(n.consume(Q),K):K(Q)}}function Yre(n,e,t,i,r,o){const s=this;let a=0,c;return f;function f(I){return n.enter(i),n.enter(r),n.consume(I),n.exit(r),n.enter(o),y}function y(I){return a>999||I===null||I===91||I===93&&!c||I===94&&!a&&"_hiddenFootnoteSupport"in s.parser.constructs?t(I):I===93?(n.exit(o),n.enter(r),n.consume(I),n.exit(r),n.exit(i),e):pr(I)?(n.enter("lineEnding"),n.consume(I),n.exit("lineEnding"),y):(n.enter("chunkString",{contentType:"string"}),_(I))}function _(I){return I===null||I===91||I===93||pr(I)||a++>999?(n.exit("chunkString"),y(I)):(n.consume(I),c||(c=!_s(I)),I===92?E:_)}function E(I){return I===91||I===92||I===93?(n.consume(I),a++,_):_(I)}}function Vre(n,e,t,i,r,o){let s;return a;function a(E){return E===34||E===39||E===40?(n.enter(i),n.enter(r),n.consume(E),n.exit(r),s=E===40?41:E,c):t(E)}function c(E){return E===s?(n.enter(r),n.consume(E),n.exit(r),n.exit(i),e):(n.enter(o),f(E))}function f(E){return E===s?(n.exit(o),c(s)):E===null?t(E):pr(E)?(n.enter("lineEnding"),n.consume(E),n.exit("lineEnding"),Ea(n,f,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),y(E))}function y(E){return E===s||E===null||pr(E)?(n.exit("chunkString"),f(E)):(n.consume(E),E===92?_:y)}function _(E){return E===s||E===92?(n.consume(E),y):y(E)}}function b4(n,e){let t;return i;function i(r){return pr(r)?(n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),t=!0,i):_s(r)?Ea(n,i,t?"linePrefix":"lineSuffix")(r):e(r)}}const GBe={name:"definition",tokenize:QBe},WBe={partial:!0,tokenize:qBe};function QBe(n,e,t){const i=this;let r;return o;function o(I){return n.enter("definition"),s(I)}function s(I){return Yre.call(i,n,a,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(I)}function a(I){return r=Yx(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),I===58?(n.enter("definitionMarker"),n.consume(I),n.exit("definitionMarker"),c):t(I)}function c(I){return pd(I)?b4(n,f)(I):f(I)}function f(I){return qre(n,y,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(I)}function y(I){return n.attempt(WBe,_,_)(I)}function _(I){return _s(I)?Ea(n,E,"whitespace")(I):E(I)}function E(I){return I===null||pr(I)?(n.exit("definition"),i.parser.defined.push(r),e(I)):t(I)}}function qBe(n,e,t){return i;function i(a){return pd(a)?b4(n,r)(a):t(a)}function r(a){return Vre(n,o,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function o(a){return _s(a)?Ea(n,s,"whitespace")(a):s(a)}function s(a){return a===null||pr(a)?e(a):t(a)}}const YBe={name:"hardBreakEscape",tokenize:VBe};function VBe(n,e,t){return i;function i(o){return n.enter("hardBreakEscape"),n.consume(o),r}function r(o){return pr(o)?(n.exit("hardBreakEscape"),e(o)):t(o)}}const $Be={name:"headingAtx",resolve:HBe,tokenize:ZBe};function HBe(n,e){let t=n.length-2,i=3,r,o;return n[i][1].type==="whitespace"&&(i+=2),t-2>i&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(i===t-1||t-4>i&&n[t-2][1].type==="whitespace")&&(t-=i+1===t?2:4),t>i&&(r={type:"atxHeadingText",start:n[i][1].start,end:n[t][1].end},o={type:"chunkText",start:n[i][1].start,end:n[t][1].end,contentType:"text"},v0(n,i,t-i+1,[["enter",r,e],["enter",o,e],["exit",o,e],["exit",r,e]])),n}function ZBe(n,e,t){let i=0;return r;function r(y){return n.enter("atxHeading"),o(y)}function o(y){return n.enter("atxHeadingSequence"),s(y)}function s(y){return y===35&&i++<6?(n.consume(y),s):y===null||pd(y)?(n.exit("atxHeadingSequence"),a(y)):t(y)}function a(y){return y===35?(n.enter("atxHeadingSequence"),c(y)):y===null||pr(y)?(n.exit("atxHeading"),e(y)):_s(y)?Ea(n,a,"whitespace")(y):(n.enter("atxHeadingText"),f(y))}function c(y){return y===35?(n.consume(y),c):(n.exit("atxHeadingSequence"),a(y))}function f(y){return y===null||y===35||pd(y)?(n.exit("atxHeadingText"),a(y)):(n.consume(y),f)}}const XBe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],sQ=["pre","script","style","textarea"],JBe={concrete:!0,name:"htmlFlow",resolveTo:nOe,tokenize:iOe},eOe={partial:!0,tokenize:oOe},tOe={partial:!0,tokenize:rOe};function nOe(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function iOe(n,e,t){const i=this;let r,o,s,a,c;return f;function f(Te){return y(Te)}function y(Te){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(Te),_}function _(Te){return Te===33?(n.consume(Te),E):Te===47?(n.consume(Te),o=!0,K):Te===63?(n.consume(Te),r=3,i.interrupt?e:De):Hg(Te)?(n.consume(Te),s=String.fromCharCode(Te),z):t(Te)}function E(Te){return Te===45?(n.consume(Te),r=2,I):Te===91?(n.consume(Te),r=5,a=0,P):Hg(Te)?(n.consume(Te),r=4,i.interrupt?e:De):t(Te)}function I(Te){return Te===45?(n.consume(Te),i.interrupt?e:De):t(Te)}function P(Te){const vt="CDATA[";return Te===vt.charCodeAt(a++)?(n.consume(Te),a===vt.length?i.interrupt?e:Ee:P):t(Te)}function K(Te){return Hg(Te)?(n.consume(Te),s=String.fromCharCode(Te),z):t(Te)}function z(Te){if(Te===null||Te===47||Te===62||pd(Te)){const vt=Te===47,st=s.toLowerCase();return!vt&&!o&&sQ.includes(st)?(r=1,i.interrupt?e(Te):Ee(Te)):XBe.includes(s.toLowerCase())?(r=6,vt?(n.consume(Te),Q):i.interrupt?e(Te):Ee(Te)):(r=7,i.interrupt&&!i.parser.lazy[i.now().line]?t(Te):o?V(Te):$(Te))}return Te===45||mf(Te)?(n.consume(Te),s+=String.fromCharCode(Te),z):t(Te)}function Q(Te){return Te===62?(n.consume(Te),i.interrupt?e:Ee):t(Te)}function V(Te){return _s(Te)?(n.consume(Te),V):ve(Te)}function $(Te){return Te===47?(n.consume(Te),ve):Te===58||Te===95||Hg(Te)?(n.consume(Te),Z):_s(Te)?(n.consume(Te),$):ve(Te)}function Z(Te){return Te===45||Te===46||Te===58||Te===95||mf(Te)?(n.consume(Te),Z):ee(Te)}function ee(Te){return Te===61?(n.consume(Te),X):_s(Te)?(n.consume(Te),ee):$(Te)}function X(Te){return Te===null||Te===60||Te===61||Te===62||Te===96?t(Te):Te===34||Te===39?(n.consume(Te),c=Te,W):_s(Te)?(n.consume(Te),X):se(Te)}function W(Te){return Te===c?(n.consume(Te),c=null,ue):Te===null||pr(Te)?t(Te):(n.consume(Te),W)}function se(Te){return Te===null||Te===34||Te===39||Te===47||Te===60||Te===61||Te===62||Te===96||pd(Te)?ee(Te):(n.consume(Te),se)}function ue(Te){return Te===47||Te===62||_s(Te)?$(Te):t(Te)}function ve(Te){return Te===62?(n.consume(Te),ye):t(Te)}function ye(Te){return Te===null||pr(Te)?Ee(Te):_s(Te)?(n.consume(Te),ye):t(Te)}function Ee(Te){return Te===45&&r===2?(n.consume(Te),Se):Te===60&&r===1?(n.consume(Te),qe):Te===62&&r===4?(n.consume(Te),Ie):Te===63&&r===3?(n.consume(Te),De):Te===93&&r===5?(n.consume(Te),ht):pr(Te)&&(r===6||r===7)?(n.exit("htmlFlowData"),n.check(eOe,ze,_e)(Te)):Te===null||pr(Te)?(n.exit("htmlFlowData"),_e(Te)):(n.consume(Te),Ee)}function _e(Te){return n.check(tOe,Be,ze)(Te)}function Be(Te){return n.enter("lineEnding"),n.consume(Te),n.exit("lineEnding"),Fe}function Fe(Te){return Te===null||pr(Te)?_e(Te):(n.enter("htmlFlowData"),Ee(Te))}function Se(Te){return Te===45?(n.consume(Te),De):Ee(Te)}function qe(Te){return Te===47?(n.consume(Te),s="",ut):Ee(Te)}function ut(Te){if(Te===62){const vt=s.toLowerCase();return sQ.includes(vt)?(n.consume(Te),Ie):Ee(Te)}return Hg(Te)&&s.length<8?(n.consume(Te),s+=String.fromCharCode(Te),ut):Ee(Te)}function ht(Te){return Te===93?(n.consume(Te),De):Ee(Te)}function De(Te){return Te===62?(n.consume(Te),Ie):Te===45&&r===2?(n.consume(Te),De):Ee(Te)}function Ie(Te){return Te===null||pr(Te)?(n.exit("htmlFlowData"),ze(Te)):(n.consume(Te),Ie)}function ze(Te){return n.exit("htmlFlow"),e(Te)}}function rOe(n,e,t){const i=this;return r;function r(s){return pr(s)?(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),o):t(s)}function o(s){return i.parser.lazy[i.now().line]?t(s):e(s)}}function oOe(n,e,t){return i;function i(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),n.attempt(MB,e,t)}}const sOe={name:"htmlText",tokenize:aOe};function aOe(n,e,t){const i=this;let r,o,s;return a;function a(De){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(De),c}function c(De){return De===33?(n.consume(De),f):De===47?(n.consume(De),ee):De===63?(n.consume(De),$):Hg(De)?(n.consume(De),se):t(De)}function f(De){return De===45?(n.consume(De),y):De===91?(n.consume(De),o=0,P):Hg(De)?(n.consume(De),V):t(De)}function y(De){return De===45?(n.consume(De),I):t(De)}function _(De){return De===null?t(De):De===45?(n.consume(De),E):pr(De)?(s=_,qe(De)):(n.consume(De),_)}function E(De){return De===45?(n.consume(De),I):_(De)}function I(De){return De===62?Se(De):De===45?E(De):_(De)}function P(De){const Ie="CDATA[";return De===Ie.charCodeAt(o++)?(n.consume(De),o===Ie.length?K:P):t(De)}function K(De){return De===null?t(De):De===93?(n.consume(De),z):pr(De)?(s=K,qe(De)):(n.consume(De),K)}function z(De){return De===93?(n.consume(De),Q):K(De)}function Q(De){return De===62?Se(De):De===93?(n.consume(De),Q):K(De)}function V(De){return De===null||De===62?Se(De):pr(De)?(s=V,qe(De)):(n.consume(De),V)}function $(De){return De===null?t(De):De===63?(n.consume(De),Z):pr(De)?(s=$,qe(De)):(n.consume(De),$)}function Z(De){return De===62?Se(De):$(De)}function ee(De){return Hg(De)?(n.consume(De),X):t(De)}function X(De){return De===45||mf(De)?(n.consume(De),X):W(De)}function W(De){return pr(De)?(s=W,qe(De)):_s(De)?(n.consume(De),W):Se(De)}function se(De){return De===45||mf(De)?(n.consume(De),se):De===47||De===62||pd(De)?ue(De):t(De)}function ue(De){return De===47?(n.consume(De),Se):De===58||De===95||Hg(De)?(n.consume(De),ve):pr(De)?(s=ue,qe(De)):_s(De)?(n.consume(De),ue):Se(De)}function ve(De){return De===45||De===46||De===58||De===95||mf(De)?(n.consume(De),ve):ye(De)}function ye(De){return De===61?(n.consume(De),Ee):pr(De)?(s=ye,qe(De)):_s(De)?(n.consume(De),ye):ue(De)}function Ee(De){return De===null||De===60||De===61||De===62||De===96?t(De):De===34||De===39?(n.consume(De),r=De,_e):pr(De)?(s=Ee,qe(De)):_s(De)?(n.consume(De),Ee):(n.consume(De),Be)}function _e(De){return De===r?(n.consume(De),r=void 0,Fe):De===null?t(De):pr(De)?(s=_e,qe(De)):(n.consume(De),_e)}function Be(De){return De===null||De===34||De===39||De===60||De===61||De===96?t(De):De===47||De===62||pd(De)?ue(De):(n.consume(De),Be)}function Fe(De){return De===47||De===62||pd(De)?ue(De):t(De)}function Se(De){return De===62?(n.consume(De),n.exit("htmlTextData"),n.exit("htmlText"),e):t(De)}function qe(De){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(De),n.exit("lineEnding"),ut}function ut(De){return _s(De)?Ea(n,ht,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(De):ht(De)}function ht(De){return n.enter("htmlTextData"),s(De)}}const qU={name:"labelEnd",resolveAll:AOe,resolveTo:hOe,tokenize:dOe},lOe={tokenize:fOe},uOe={tokenize:pOe},cOe={tokenize:mOe};function AOe(n){let e=-1;const t=[];for(;++e<n.length;){const i=n[e][1];if(t.push(n[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const r=i.type==="labelImage"?4:2;i.type="data",e+=r}}return n.length!==t.length&&v0(n,0,n.length,t),n}function hOe(n,e){let t=n.length,i=0,r,o,s,a;for(;t--;)if(r=n[t][1],o){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;n[t][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(s){if(n[t][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(o=t,r.type!=="labelLink")){i=2;break}}else r.type==="labelEnd"&&(s=t);const c={type:n[o][1].type==="labelLink"?"link":"image",start:{...n[o][1].start},end:{...n[n.length-1][1].end}},f={type:"label",start:{...n[o][1].start},end:{...n[s][1].end}},y={type:"labelText",start:{...n[o+i+2][1].end},end:{...n[s-2][1].start}};return a=[["enter",c,e],["enter",f,e]],a=Ap(a,n.slice(o+1,o+i+3)),a=Ap(a,[["enter",y,e]]),a=Ap(a,QU(e.parser.constructs.insideSpan.null,n.slice(o+i+4,s-3),e)),a=Ap(a,[["exit",y,e],n[s-2],n[s-1],["exit",f,e]]),a=Ap(a,n.slice(s+1)),a=Ap(a,[["exit",c,e]]),v0(n,o,n.length,a),n}function dOe(n,e,t){const i=this;let r=i.events.length,o,s;for(;r--;)if((i.events[r][1].type==="labelImage"||i.events[r][1].type==="labelLink")&&!i.events[r][1]._balanced){o=i.events[r][1];break}return a;function a(E){return o?o._inactive?_(E):(s=i.parser.defined.includes(Yx(i.sliceSerialize({start:o.end,end:i.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(E),n.exit("labelMarker"),n.exit("labelEnd"),c):t(E)}function c(E){return E===40?n.attempt(lOe,y,s?y:_)(E):E===91?n.attempt(uOe,y,s?f:_)(E):s?y(E):_(E)}function f(E){return n.attempt(cOe,y,_)(E)}function y(E){return e(E)}function _(E){return o._balanced=!0,t(E)}}function fOe(n,e,t){return i;function i(_){return n.enter("resource"),n.enter("resourceMarker"),n.consume(_),n.exit("resourceMarker"),r}function r(_){return pd(_)?b4(n,o)(_):o(_)}function o(_){return _===41?y(_):qre(n,s,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(_)}function s(_){return pd(_)?b4(n,c)(_):y(_)}function a(_){return t(_)}function c(_){return _===34||_===39||_===40?Vre(n,f,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(_):y(_)}function f(_){return pd(_)?b4(n,y)(_):y(_)}function y(_){return _===41?(n.enter("resourceMarker"),n.consume(_),n.exit("resourceMarker"),n.exit("resource"),e):t(_)}}function pOe(n,e,t){const i=this;return r;function r(a){return Yre.call(i,n,o,s,"reference","referenceMarker","referenceString")(a)}function o(a){return i.parser.defined.includes(Yx(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(a):t(a)}function s(a){return t(a)}}function mOe(n,e,t){return i;function i(o){return n.enter("reference"),n.enter("referenceMarker"),n.consume(o),n.exit("referenceMarker"),r}function r(o){return o===93?(n.enter("referenceMarker"),n.consume(o),n.exit("referenceMarker"),n.exit("reference"),e):t(o)}}const gOe={name:"labelStartImage",resolveAll:qU.resolveAll,tokenize:yOe};function yOe(n,e,t){const i=this;return r;function r(a){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(a),n.exit("labelImageMarker"),o}function o(a){return a===91?(n.enter("labelMarker"),n.consume(a),n.exit("labelMarker"),n.exit("labelImage"),s):t(a)}function s(a){return a===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(a):e(a)}}const vOe={name:"labelStartLink",resolveAll:qU.resolveAll,tokenize:bOe};function bOe(n,e,t){const i=this;return r;function r(s){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(s),n.exit("labelMarker"),n.exit("labelLink"),o}function o(s){return s===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(s):e(s)}}const pI={name:"lineEnding",tokenize:COe};function COe(n,e){return t;function t(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),Ea(n,e,"linePrefix")}}const xS={name:"thematicBreak",tokenize:_Oe};function _Oe(n,e,t){let i=0,r;return o;function o(f){return n.enter("thematicBreak"),s(f)}function s(f){return r=f,a(f)}function a(f){return f===r?(n.enter("thematicBreakSequence"),c(f)):i>=3&&(f===null||pr(f))?(n.exit("thematicBreak"),e(f)):t(f)}function c(f){return f===r?(n.consume(f),i++,c):(n.exit("thematicBreakSequence"),_s(f)?Ea(n,a,"whitespace")(f):a(f))}}const rd={continuation:{tokenize:SOe},exit:BOe,name:"list",tokenize:wOe},xOe={partial:!0,tokenize:OOe},MOe={partial:!0,tokenize:EOe};function wOe(n,e,t){const i=this,r=i.events[i.events.length-1];let o=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,s=0;return a;function a(I){const P=i.containerState.type||(I===42||I===43||I===45?"listUnordered":"listOrdered");if(P==="listUnordered"?!i.containerState.marker||I===i.containerState.marker:UR(I)){if(i.containerState.type||(i.containerState.type=P,n.enter(P,{_container:!0})),P==="listUnordered")return n.enter("listItemPrefix"),I===42||I===45?n.check(xS,t,f)(I):f(I);if(!i.interrupt||I===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),c(I)}return t(I)}function c(I){return UR(I)&&++s<10?(n.consume(I),c):(!i.interrupt||s<2)&&(i.containerState.marker?I===i.containerState.marker:I===41||I===46)?(n.exit("listItemValue"),f(I)):t(I)}function f(I){return n.enter("listItemMarker"),n.consume(I),n.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||I,n.check(MB,i.interrupt?t:y,n.attempt(xOe,E,_))}function y(I){return i.containerState.initialBlankLine=!0,o++,E(I)}function _(I){return _s(I)?(n.enter("listItemPrefixWhitespace"),n.consume(I),n.exit("listItemPrefixWhitespace"),E):t(I)}function E(I){return i.containerState.size=o+i.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(I)}}function SOe(n,e,t){const i=this;return i.containerState._closeFlow=void 0,n.check(MB,r,o);function r(a){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,Ea(n,e,"listItemIndent",i.containerState.size+1)(a)}function o(a){return i.containerState.furtherBlankLines||!_s(a)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,s(a)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,n.attempt(MOe,e,s)(a))}function s(a){return i.containerState._closeFlow=!0,i.interrupt=void 0,Ea(n,n.attempt(rd,e,t),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function EOe(n,e,t){const i=this;return Ea(n,r,"listItemIndent",i.containerState.size+1);function r(o){const s=i.events[i.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===i.containerState.size?e(o):t(o)}}function BOe(n){n.exit(this.containerState.type)}function OOe(n,e,t){const i=this;return Ea(n,r,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(o){const s=i.events[i.events.length-1];return!_s(o)&&s&&s[1].type==="listItemPrefixWhitespace"?e(o):t(o)}}const aQ={name:"setextUnderline",resolveTo:IOe,tokenize:TOe};function IOe(n,e){let t=n.length,i,r,o;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){i=t;break}n[t][1].type==="paragraph"&&(r=t)}else n[t][1].type==="content"&&n.splice(t,1),!o&&n[t][1].type==="definition"&&(o=t);const s={type:"setextHeading",start:{...n[i][1].start},end:{...n[n.length-1][1].end}};return n[r][1].type="setextHeadingText",o?(n.splice(r,0,["enter",s,e]),n.splice(o+1,0,["exit",n[i][1],e]),n[i][1].end={...n[o][1].end}):n[i][1]=s,n.push(["exit",s,e]),n}function TOe(n,e,t){const i=this;let r;return o;function o(f){let y=i.events.length,_;for(;y--;)if(i.events[y][1].type!=="lineEnding"&&i.events[y][1].type!=="linePrefix"&&i.events[y][1].type!=="content"){_=i.events[y][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||_)?(n.enter("setextHeadingLine"),r=f,s(f)):t(f)}function s(f){return n.enter("setextHeadingLineSequence"),a(f)}function a(f){return f===r?(n.consume(f),a):(n.exit("setextHeadingLineSequence"),_s(f)?Ea(n,c,"lineSuffix")(f):c(f))}function c(f){return f===null||pr(f)?(n.exit("setextHeadingLine"),e(f)):t(f)}}const kOe={tokenize:DOe};function DOe(n){const e=this,t=n.attempt(MB,i,n.attempt(this.parser.constructs.flowInitial,r,Ea(n,n.attempt(this.parser.constructs.flow,r,n.attempt(KBe,r)),"linePrefix")));return t;function i(o){if(o===null){n.consume(o);return}return n.enter("lineEndingBlank"),n.consume(o),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function r(o){if(o===null){n.consume(o);return}return n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const ROe={resolveAll:Hre()},POe=$re("string"),LOe=$re("text");function $re(n){return{resolveAll:Hre(n==="text"?UOe:void 0),tokenize:e};function e(t){const i=this,r=this.parser.constructs[n],o=t.attempt(r,s,a);return s;function s(y){return f(y)?o(y):a(y)}function a(y){if(y===null){t.consume(y);return}return t.enter("data"),t.consume(y),c}function c(y){return f(y)?(t.exit("data"),o(y)):(t.consume(y),c)}function f(y){if(y===null)return!0;const _=r[y];let E=-1;if(_)for(;++E<_.length;){const I=_[E];if(!I.previous||I.previous.call(i,i.previous))return!0}return!1}}}function Hre(n){return e;function e(t,i){let r=-1,o;for(;++r<=t.length;)o===void 0?t[r]&&t[r][1].type==="data"&&(o=r,r++):(!t[r]||t[r][1].type!=="data")&&(r!==o+2&&(t[o][1].end=t[r-1][1].end,t.splice(o+2,r-o-2),r=o+2),o=void 0);return n?n(t,i):t}}function UOe(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const i=n[t-1][1],r=e.sliceStream(i);let o=r.length,s=-1,a=0,c;for(;o--;){const f=r[o];if(typeof f=="string"){for(s=f.length;f.charCodeAt(s-1)===32;)a++,s--;if(s)break;s=-1}else if(f===-2)c=!0,a++;else if(f!==-1){o++;break}}if(e._contentTypeTextTrailing&&t===n.length&&(a=0),a){const f={type:t===n.length||c||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?s:i.start._bufferIndex+s,_index:i.start._index+o,line:i.end.line,column:i.end.column-a,offset:i.end.offset-a},end:{...i.end}};i.end={...f.start},i.start.offset===i.end.offset?Object.assign(i,f):(n.splice(t,0,["enter",f,e],["exit",f,e]),t+=2)}t++}return n}const KOe={42:rd,43:rd,45:rd,48:rd,49:rd,50:rd,51:rd,52:rd,53:rd,54:rd,55:rd,56:rd,57:rd,62:Nre},FOe={91:GBe},zOe={[-2]:fI,[-1]:fI,32:fI},jOe={35:$Be,42:xS,45:[aQ,xS],60:JBe,61:aQ,95:xS,96:oQ,126:oQ},NOe={38:Wre,92:Gre},GOe={[-5]:pI,[-4]:pI,[-3]:pI,33:gOe,38:Wre,42:KR,60:[vBe,sOe],91:vOe,92:[YBe,Gre],93:qU,95:KR,96:kBe},WOe={null:[KR,ROe]},QOe={null:[42,95]},qOe={null:[]},YOe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:QOe,contentInitial:FOe,disable:qOe,document:KOe,flow:jOe,flowInitial:zOe,insideSpan:WOe,string:NOe,text:GOe},Symbol.toStringTag,{value:"Module"}));function VOe(n,e,t){let i={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const r={},o=[];let s=[],a=[];const c={attempt:W(ee),check:W(X),consume:V,enter:$,exit:Z,interrupt:W(X,{interrupt:!0})},f={code:null,containerState:{},defineSkip:K,events:[],now:P,parser:n,previous:null,sliceSerialize:E,sliceStream:I,write:_};let y=e.tokenize.call(f,c);return e.resolveAll&&o.push(e),f;function _(ye){return s=Ap(s,ye),z(),s[s.length-1]!==null?[]:(se(e,0),f.events=QU(o,f.events,f),f.events)}function E(ye,Ee){return HOe(I(ye),Ee)}function I(ye){return $Oe(s,ye)}function P(){const{_bufferIndex:ye,_index:Ee,line:_e,column:Be,offset:Fe}=i;return{_bufferIndex:ye,_index:Ee,line:_e,column:Be,offset:Fe}}function K(ye){r[ye.line]=ye.column,ve()}function z(){let ye;for(;i._index<s.length;){const Ee=s[i._index];if(typeof Ee=="string")for(ye=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===ye&&i._bufferIndex<Ee.length;)Q(Ee.charCodeAt(i._bufferIndex));else Q(Ee)}}function Q(ye){y=y(ye)}function V(ye){pr(ye)?(i.line++,i.column=1,i.offset+=ye===-3?2:1,ve()):ye!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===s[i._index].length&&(i._bufferIndex=-1,i._index++)),f.previous=ye}function $(ye,Ee){const _e=Ee||{};return _e.type=ye,_e.start=P(),f.events.push(["enter",_e,f]),a.push(_e),_e}function Z(ye){const Ee=a.pop();return Ee.end=P(),f.events.push(["exit",Ee,f]),Ee}function ee(ye,Ee){se(ye,Ee.from)}function X(ye,Ee){Ee.restore()}function W(ye,Ee){return _e;function _e(Be,Fe,Se){let qe,ut,ht,De;return Array.isArray(Be)?ze(Be):"tokenize"in Be?ze([Be]):Ie(Be);function Ie(Et){return Pt;function Pt(ke){const Oe=ke!==null&&Et[ke],we=ke!==null&&Et.null,Ye=[...Array.isArray(Oe)?Oe:Oe?[Oe]:[],...Array.isArray(we)?we:we?[we]:[]];return ze(Ye)(ke)}}function ze(Et){return qe=Et,ut=0,Et.length===0?Se:Te(Et[ut])}function Te(Et){return Pt;function Pt(ke){return De=ue(),ht=Et,Et.partial||(f.currentConstruct=Et),Et.name&&f.parser.constructs.disable.null.includes(Et.name)?st():Et.tokenize.call(Ee?Object.assign(Object.create(f),Ee):f,c,vt,st)(ke)}}function vt(Et){return ye(ht,De),Fe}function st(Et){return De.restore(),++ut<qe.length?Te(qe[ut]):Se}}}function se(ye,Ee){ye.resolveAll&&!o.includes(ye)&&o.push(ye),ye.resolve&&v0(f.events,Ee,f.events.length-Ee,ye.resolve(f.events.slice(Ee),f)),ye.resolveTo&&(f.events=ye.resolveTo(f.events,f))}function ue(){const ye=P(),Ee=f.previous,_e=f.currentConstruct,Be=f.events.length,Fe=Array.from(a);return{from:Be,restore:Se};function Se(){i=ye,f.previous=Ee,f.currentConstruct=_e,f.events.length=Be,a=Fe,ve()}}function ve(){i.line in r&&i.column<2&&(i.column=r[i.line],i.offset+=r[i.line]-1)}}function $Oe(n,e){const t=e.start._index,i=e.start._bufferIndex,r=e.end._index,o=e.end._bufferIndex;let s;if(t===r)s=[n[t].slice(i,o)];else{if(s=n.slice(t,r),i>-1){const a=s[0];typeof a=="string"?s[0]=a.slice(i):s.shift()}o>0&&s.push(n[r].slice(0,o))}return s}function HOe(n,e){let t=-1;const i=[];let r;for(;++t<n.length;){const o=n[t];let s;if(typeof o=="string")s=o;else switch(o){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=e?" ":"	";break}case-1:{if(!e&&r)continue;s=" ";break}default:s=String.fromCharCode(o)}r=o===-2,i.push(s)}return i.join("")}function ZOe(n){const i={constructs:rBe([YOe,...(n||{}).extensions||[]]),content:r(hBe),defined:[],document:r(fBe),flow:r(kOe),lazy:{},string:r(POe),text:r(LOe)};return i;function r(o){return s;function s(a){return VOe(i,o,a)}}}function XOe(n){for(;!Qre(n););return n}const lQ=/[\0\t\n\r]/g;function JOe(){let n=1,e="",t=!0,i;return r;function r(o,s,a){const c=[];let f,y,_,E,I;for(o=e+(typeof o=="string"?o.toString():new TextDecoder(s||void 0).decode(o)),_=0,e="",t&&(o.charCodeAt(0)===65279&&_++,t=void 0);_<o.length;){if(lQ.lastIndex=_,f=lQ.exec(o),E=f&&f.index!==void 0?f.index:o.length,I=o.charCodeAt(E),!f){e=o.slice(_);break}if(I===10&&_===E&&i)c.push(-3),i=void 0;else switch(i&&(c.push(-5),i=void 0),_<E&&(c.push(o.slice(_,E)),n+=E-_),I){case 0:{c.push(65533),n++;break}case 9:{for(y=Math.ceil(n/4)*4,c.push(-2);n++<y;)c.push(-1);break}case 10:{c.push(-4),n=1;break}default:i=!0,n=1}_=E+1}return a&&(i&&c.push(-5),e&&c.push(e),c.push(null)),c}}const e8e=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function t8e(n){return n.replace(e8e,n8e)}function n8e(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const r=t.charCodeAt(1),o=r===120||r===88;return jre(t.slice(o?2:1),o?16:10)}return WU(t)||n}const Zre={}.hasOwnProperty;function i8e(n,e,t){return typeof e!="string"&&(t=e,e=void 0),r8e(t)(XOe(ZOe(t).document().write(JOe()(n,e,!0))))}function r8e(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Ln),autolinkProtocol:ue,autolinkEmail:ue,atxHeading:o(Lt),blockQuote:o(we),characterEscape:ue,characterReference:ue,codeFenced:o(Ye),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:o(Ye,s),codeText:o(ft,s),codeTextData:ue,data:ue,codeFlowValue:ue,definition:o(dt),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:o(gt),hardBreakEscape:o(Tt),hardBreakTrailing:o(Tt),htmlFlow:o(Zt,s),htmlFlowData:ue,htmlText:o(Zt,s),htmlTextData:ue,image:o(Fn),label:s,link:o(Ln),listItem:o(Rn),listItemValue:E,listOrdered:o(fi,_),listUnordered:o(fi),paragraph:o(Dn),reference:Te,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:o(Lt),strong:o(wn),thematicBreak:o(En)},exit:{atxHeading:c(),atxHeadingSequence:ee,autolink:c(),autolinkEmail:Oe,autolinkProtocol:ke,blockQuote:c(),characterEscapeValue:ve,characterReferenceMarkerHexadecimal:st,characterReferenceMarkerNumeric:st,characterReferenceValue:Et,characterReference:Pt,codeFenced:c(z),codeFencedFence:K,codeFencedFenceInfo:I,codeFencedFenceMeta:P,codeFlowValue:ve,codeIndented:c(Q),codeText:c(Fe),codeTextData:ve,data:ve,definition:c(),definitionDestinationString:Z,definitionLabelString:V,definitionTitleString:$,emphasis:c(),hardBreakEscape:c(Ee),hardBreakTrailing:c(Ee),htmlFlow:c(_e),htmlFlowData:ve,htmlText:c(Be),htmlTextData:ve,image:c(qe),label:ht,labelText:ut,lineEnding:ye,link:c(Se),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:vt,resourceDestinationString:De,resourceTitleString:Ie,resource:ze,setextHeading:c(se),setextHeadingLineSequence:W,setextHeadingText:X,strong:c(),thematicBreak:c()}};Xre(e,(n||{}).mdastExtensions||[]);const t={};return i;function i(wt){let be={type:"root",children:[]};const re={stack:[be],tokenStack:[],config:e,enter:a,exit:f,buffer:s,resume:y,data:t},ce=[];let Pe=-1;for(;++Pe<wt.length;)if(wt[Pe][1].type==="listOrdered"||wt[Pe][1].type==="listUnordered")if(wt[Pe][0]==="enter")ce.push(Pe);else{const tt=ce.pop();Pe=r(wt,tt,Pe)}for(Pe=-1;++Pe<wt.length;){const tt=e[wt[Pe][0]];Zre.call(tt,wt[Pe][1].type)&&tt[wt[Pe][1].type].call(Object.assign({sliceSerialize:wt[Pe][2].sliceSerialize},re),wt[Pe][1])}if(re.tokenStack.length>0){const tt=re.tokenStack[re.tokenStack.length-1];(tt[1]||uQ).call(re,void 0,tt[0])}for(be.position={start:qy(wt.length>0?wt[0][1].start:{line:1,column:1,offset:0}),end:qy(wt.length>0?wt[wt.length-2][1].end:{line:1,column:1,offset:0})},Pe=-1;++Pe<e.transforms.length;)be=e.transforms[Pe](be)||be;return be}function r(wt,be,re){let ce=be-1,Pe=-1,tt=!1,xt,It,_n,Xe;for(;++ce<=re;){const ae=wt[ce];switch(ae[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ae[0]==="enter"?Pe++:Pe--,Xe=void 0;break}case"lineEndingBlank":{ae[0]==="enter"&&(xt&&!Xe&&!Pe&&!_n&&(_n=ce),Xe=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Xe=void 0}if(!Pe&&ae[0]==="enter"&&ae[1].type==="listItemPrefix"||Pe===-1&&ae[0]==="exit"&&(ae[1].type==="listUnordered"||ae[1].type==="listOrdered")){if(xt){let he=ce;for(It=void 0;he--;){const C=wt[he];if(C[1].type==="lineEnding"||C[1].type==="lineEndingBlank"){if(C[0]==="exit")continue;It&&(wt[It][1].type="lineEndingBlank",tt=!0),C[1].type="lineEnding",It=he}else if(!(C[1].type==="linePrefix"||C[1].type==="blockQuotePrefix"||C[1].type==="blockQuotePrefixWhitespace"||C[1].type==="blockQuoteMarker"||C[1].type==="listItemIndent"))break}_n&&(!It||_n<It)&&(xt._spread=!0),xt.end=Object.assign({},It?wt[It][1].start:ae[1].end),wt.splice(It||ce,0,["exit",xt,ae[2]]),ce++,re++}if(ae[1].type==="listItemPrefix"){const he={type:"listItem",_spread:!1,start:Object.assign({},ae[1].start),end:void 0};xt=he,wt.splice(ce,0,["enter",he,ae[2]]),ce++,re++,_n=void 0,Xe=!0}}}return wt[be][1]._spread=tt,re}function o(wt,be){return re;function re(ce){a.call(this,wt(ce),ce),be&&be.call(this,ce)}}function s(){this.stack.push({type:"fragment",children:[]})}function a(wt,be,re){this.stack[this.stack.length-1].children.push(wt),this.stack.push(wt),this.tokenStack.push([be,re||void 0]),wt.position={start:qy(be.start),end:void 0}}function c(wt){return be;function be(re){wt&&wt.call(this,re),f.call(this,re)}}function f(wt,be){const re=this.stack.pop(),ce=this.tokenStack.pop();if(ce)ce[0].type!==wt.type&&(be?be.call(this,wt,ce[0]):(ce[1]||uQ).call(this,wt,ce[0]));else throw new Error("Cannot close `"+wt.type+"` ("+v4({start:wt.start,end:wt.end})+"): its not open");re.position.end=qy(wt.end)}function y(){return nBe(this.stack.pop())}function _(){this.data.expectingFirstListItemValue=!0}function E(wt){if(this.data.expectingFirstListItemValue){const be=this.stack[this.stack.length-2];be.start=Number.parseInt(this.sliceSerialize(wt),10),this.data.expectingFirstListItemValue=void 0}}function I(){const wt=this.resume(),be=this.stack[this.stack.length-1];be.lang=wt}function P(){const wt=this.resume(),be=this.stack[this.stack.length-1];be.meta=wt}function K(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function z(){const wt=this.resume(),be=this.stack[this.stack.length-1];be.value=wt.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function Q(){const wt=this.resume(),be=this.stack[this.stack.length-1];be.value=wt.replace(/(\r?\n|\r)$/g,"")}function V(wt){const be=this.resume(),re=this.stack[this.stack.length-1];re.label=be,re.identifier=Yx(this.sliceSerialize(wt)).toLowerCase()}function $(){const wt=this.resume(),be=this.stack[this.stack.length-1];be.title=wt}function Z(){const wt=this.resume(),be=this.stack[this.stack.length-1];be.url=wt}function ee(wt){const be=this.stack[this.stack.length-1];if(!be.depth){const re=this.sliceSerialize(wt).length;be.depth=re}}function X(){this.data.setextHeadingSlurpLineEnding=!0}function W(wt){const be=this.stack[this.stack.length-1];be.depth=this.sliceSerialize(wt).codePointAt(0)===61?1:2}function se(){this.data.setextHeadingSlurpLineEnding=void 0}function ue(wt){const re=this.stack[this.stack.length-1].children;let ce=re[re.length-1];(!ce||ce.type!=="text")&&(ce=qn(),ce.position={start:qy(wt.start),end:void 0},re.push(ce)),this.stack.push(ce)}function ve(wt){const be=this.stack.pop();be.value+=this.sliceSerialize(wt),be.position.end=qy(wt.end)}function ye(wt){const be=this.stack[this.stack.length-1];if(this.data.atHardBreak){const re=be.children[be.children.length-1];re.position.end=qy(wt.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(be.type)&&(ue.call(this,wt),ve.call(this,wt))}function Ee(){this.data.atHardBreak=!0}function _e(){const wt=this.resume(),be=this.stack[this.stack.length-1];be.value=wt}function Be(){const wt=this.resume(),be=this.stack[this.stack.length-1];be.value=wt}function Fe(){const wt=this.resume(),be=this.stack[this.stack.length-1];be.value=wt}function Se(){const wt=this.stack[this.stack.length-1];if(this.data.inReference){const be=this.data.referenceType||"shortcut";wt.type+="Reference",wt.referenceType=be,delete wt.url,delete wt.title}else delete wt.identifier,delete wt.label;this.data.referenceType=void 0}function qe(){const wt=this.stack[this.stack.length-1];if(this.data.inReference){const be=this.data.referenceType||"shortcut";wt.type+="Reference",wt.referenceType=be,delete wt.url,delete wt.title}else delete wt.identifier,delete wt.label;this.data.referenceType=void 0}function ut(wt){const be=this.sliceSerialize(wt),re=this.stack[this.stack.length-2];re.label=t8e(be),re.identifier=Yx(be).toLowerCase()}function ht(){const wt=this.stack[this.stack.length-1],be=this.resume(),re=this.stack[this.stack.length-1];if(this.data.inReference=!0,re.type==="link"){const ce=wt.children;re.children=ce}else re.alt=be}function De(){const wt=this.resume(),be=this.stack[this.stack.length-1];be.url=wt}function Ie(){const wt=this.resume(),be=this.stack[this.stack.length-1];be.title=wt}function ze(){this.data.inReference=void 0}function Te(){this.data.referenceType="collapsed"}function vt(wt){const be=this.resume(),re=this.stack[this.stack.length-1];re.label=be,re.identifier=Yx(this.sliceSerialize(wt)).toLowerCase(),this.data.referenceType="full"}function st(wt){this.data.characterReferenceType=wt.type}function Et(wt){const be=this.sliceSerialize(wt),re=this.data.characterReferenceType;let ce;re?(ce=jre(be,re==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ce=WU(be);const Pe=this.stack[this.stack.length-1];Pe.value+=ce}function Pt(wt){const be=this.stack.pop();be.position.end=qy(wt.end)}function ke(wt){ve.call(this,wt);const be=this.stack[this.stack.length-1];be.url=this.sliceSerialize(wt)}function Oe(wt){ve.call(this,wt);const be=this.stack[this.stack.length-1];be.url="mailto:"+this.sliceSerialize(wt)}function we(){return{type:"blockquote",children:[]}}function Ye(){return{type:"code",lang:null,meta:null,value:""}}function ft(){return{type:"inlineCode",value:""}}function dt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function gt(){return{type:"emphasis",children:[]}}function Lt(){return{type:"heading",depth:0,children:[]}}function Tt(){return{type:"break"}}function Zt(){return{type:"html",value:""}}function Fn(){return{type:"image",title:null,url:"",alt:null}}function Ln(){return{type:"link",title:null,url:"",children:[]}}function fi(wt){return{type:"list",ordered:wt.type==="listOrdered",start:null,spread:wt._spread,children:[]}}function Rn(wt){return{type:"listItem",spread:wt._spread,checked:null,children:[]}}function Dn(){return{type:"paragraph",children:[]}}function wn(){return{type:"strong",children:[]}}function qn(){return{type:"text",value:""}}function En(){return{type:"thematicBreak"}}}function qy(n){return{line:n.line,column:n.column,offset:n.offset}}function Xre(n,e){let t=-1;for(;++t<e.length;){const i=e[t];Array.isArray(i)?Xre(n,i):o8e(n,i)}}function o8e(n,e){let t;for(t in e)if(Zre.call(e,t))switch(t){case"canContainEols":{const i=e[t];i&&n[t].push(...i);break}case"transforms":{const i=e[t];i&&n[t].push(...i);break}case"enter":case"exit":{const i=e[t];i&&Object.assign(n[t],i);break}}}function uQ(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+v4({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+v4({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+v4({start:e.start,end:e.end})+") is still open")}function s8e(n){const e=this;e.parser=t;function t(i){return i8e(i,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function a8e(n,e){const t={type:"element",tagName:"blockquote",properties:{},children:n.wrap(n.all(e),!0)};return n.patch(e,t),n.applyData(e,t)}function l8e(n,e){const t={type:"element",tagName:"br",properties:{},children:[]};return n.patch(e,t),[n.applyData(e,t),{type:"text",value:`
`}]}function u8e(n,e){const t=e.value?e.value+`
`:"",i={};e.lang&&(i.className=["language-"+e.lang]);let r={type:"element",tagName:"code",properties:i,children:[{type:"text",value:t}]};return e.meta&&(r.data={meta:e.meta}),n.patch(e,r),r=n.applyData(e,r),r={type:"element",tagName:"pre",properties:{},children:[r]},n.patch(e,r),r}function c8e(n,e){const t={type:"element",tagName:"del",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function A8e(n,e){const t={type:"element",tagName:"em",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function h8e(n,e){const t=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),r=z2(i.toLowerCase()),o=n.footnoteOrder.indexOf(i);let s,a=n.footnoteCounts.get(i);a===void 0?(a=0,n.footnoteOrder.push(i),s=n.footnoteOrder.length):s=o+1,a+=1,n.footnoteCounts.set(i,a);const c={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+r,id:t+"fnref-"+r+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};n.patch(e,c);const f={type:"element",tagName:"sup",properties:{},children:[c]};return n.patch(e,f),n.applyData(e,f)}function d8e(n,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function f8e(n,e){if(n.options.allowDangerousHtml){const t={type:"raw",value:e.value};return n.patch(e,t),n.applyData(e,t)}}function Jre(n,e){const t=e.referenceType;let i="]";if(t==="collapsed"?i+="[]":t==="full"&&(i+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+i}];const r=n.all(e),o=r[0];o&&o.type==="text"?o.value="["+o.value:r.unshift({type:"text",value:"["});const s=r[r.length-1];return s&&s.type==="text"?s.value+=i:r.push({type:"text",value:i}),r}function p8e(n,e){const t=String(e.identifier).toUpperCase(),i=n.definitionById.get(t);if(!i)return Jre(n,e);const r={src:z2(i.url||""),alt:e.alt};i.title!==null&&i.title!==void 0&&(r.title=i.title);const o={type:"element",tagName:"img",properties:r,children:[]};return n.patch(e,o),n.applyData(e,o)}function m8e(n,e){const t={src:z2(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const i={type:"element",tagName:"img",properties:t,children:[]};return n.patch(e,i),n.applyData(e,i)}function g8e(n,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};n.patch(e,t);const i={type:"element",tagName:"code",properties:{},children:[t]};return n.patch(e,i),n.applyData(e,i)}function y8e(n,e){const t=String(e.identifier).toUpperCase(),i=n.definitionById.get(t);if(!i)return Jre(n,e);const r={href:z2(i.url||"")};i.title!==null&&i.title!==void 0&&(r.title=i.title);const o={type:"element",tagName:"a",properties:r,children:n.all(e)};return n.patch(e,o),n.applyData(e,o)}function v8e(n,e){const t={href:z2(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const i={type:"element",tagName:"a",properties:t,children:n.all(e)};return n.patch(e,i),n.applyData(e,i)}function b8e(n,e,t){const i=n.all(e),r=t?C8e(t):eoe(e),o={},s=[];if(typeof e.checked=="boolean"){const y=i[0];let _;y&&y.type==="element"&&y.tagName==="p"?_=y:(_={type:"element",tagName:"p",properties:{},children:[]},i.unshift(_)),_.children.length>0&&_.children.unshift({type:"text",value:" "}),_.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let a=-1;for(;++a<i.length;){const y=i[a];(r||a!==0||y.type!=="element"||y.tagName!=="p")&&s.push({type:"text",value:`
`}),y.type==="element"&&y.tagName==="p"&&!r?s.push(...y.children):s.push(y)}const c=i[i.length-1];c&&(r||c.type!=="element"||c.tagName!=="p")&&s.push({type:"text",value:`
`});const f={type:"element",tagName:"li",properties:o,children:s};return n.patch(e,f),n.applyData(e,f)}function C8e(n){let e=!1;if(n.type==="list"){e=n.spread||!1;const t=n.children;let i=-1;for(;!e&&++i<t.length;)e=eoe(t[i])}return e}function eoe(n){const e=n.spread;return e??n.children.length>1}function _8e(n,e){const t={},i=n.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++r<i.length;){const s=i[r];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const o={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:n.wrap(i,!0)};return n.patch(e,o),n.applyData(e,o)}function x8e(n,e){const t={type:"element",tagName:"p",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function M8e(n,e){const t={type:"root",children:n.wrap(n.all(e))};return n.patch(e,t),n.applyData(e,t)}function w8e(n,e){const t={type:"element",tagName:"strong",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function S8e(n,e){const t=n.all(e),i=t.shift(),r=[];if(i){const s={type:"element",tagName:"thead",properties:{},children:n.wrap([i],!0)};n.patch(e.children[0],s),r.push(s)}if(t.length>0){const s={type:"element",tagName:"tbody",properties:{},children:n.wrap(t,!0)},a=zU(e.children[1]),c=Rre(e.children[e.children.length-1]);a&&c&&(s.position={start:a,end:c}),r.push(s)}const o={type:"element",tagName:"table",properties:{},children:n.wrap(r,!0)};return n.patch(e,o),n.applyData(e,o)}function E8e(n,e,t){const i=t?t.children:void 0,o=(i?i.indexOf(e):1)===0?"th":"td",s=t&&t.type==="table"?t.align:void 0,a=s?s.length:e.children.length;let c=-1;const f=[];for(;++c<a;){const _=e.children[c],E={},I=s?s[c]:void 0;I&&(E.align=I);let P={type:"element",tagName:o,properties:E,children:[]};_&&(P.children=n.all(_),n.patch(_,P),P=n.applyData(_,P)),f.push(P)}const y={type:"element",tagName:"tr",properties:{},children:n.wrap(f,!0)};return n.patch(e,y),n.applyData(e,y)}function B8e(n,e){const t={type:"element",tagName:"td",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}const cQ=9,AQ=32;function O8e(n){const e=String(n),t=/\r?\n|\r/g;let i=t.exec(e),r=0;const o=[];for(;i;)o.push(hQ(e.slice(r,i.index),r>0,!0),i[0]),r=i.index+i[0].length,i=t.exec(e);return o.push(hQ(e.slice(r),r>0,!1)),o.join("")}function hQ(n,e,t){let i=0,r=n.length;if(e){let o=n.codePointAt(i);for(;o===cQ||o===AQ;)i++,o=n.codePointAt(i)}if(t){let o=n.codePointAt(r-1);for(;o===cQ||o===AQ;)r--,o=n.codePointAt(r-1)}return r>i?n.slice(i,r):""}function I8e(n,e){const t={type:"text",value:O8e(String(e.value))};return n.patch(e,t),n.applyData(e,t)}function T8e(n,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return n.patch(e,t),n.applyData(e,t)}const k8e={blockquote:a8e,break:l8e,code:u8e,delete:c8e,emphasis:A8e,footnoteReference:h8e,heading:d8e,html:f8e,imageReference:p8e,image:m8e,inlineCode:g8e,linkReference:y8e,link:v8e,listItem:b8e,list:_8e,paragraph:x8e,root:M8e,strong:w8e,table:S8e,tableCell:B8e,tableRow:E8e,text:I8e,thematicBreak:T8e,toml:Dw,yaml:Dw,definition:Dw,footnoteDefinition:Dw};function Dw(){}const toe=-1,wB=0,C4=1,ZE=2,YU=3,VU=4,$U=5,HU=6,noe=7,ioe=8,dQ=typeof self=="object"?self:globalThis,D8e=(n,e)=>{const t=(r,o)=>(n.set(o,r),r),i=r=>{if(n.has(r))return n.get(r);const[o,s]=e[r];switch(o){case wB:case toe:return t(s,r);case C4:{const a=t([],r);for(const c of s)a.push(i(c));return a}case ZE:{const a=t({},r);for(const[c,f]of s)a[i(c)]=i(f);return a}case YU:return t(new Date(s),r);case VU:{const{source:a,flags:c}=s;return t(new RegExp(a,c),r)}case $U:{const a=t(new Map,r);for(const[c,f]of s)a.set(i(c),i(f));return a}case HU:{const a=t(new Set,r);for(const c of s)a.add(i(c));return a}case noe:{const{name:a,message:c}=s;return t(new dQ[a](c),r)}case ioe:return t(BigInt(s),r);case"BigInt":return t(Object(BigInt(s)),r);case"ArrayBuffer":return t(new Uint8Array(s).buffer,s);case"DataView":{const{buffer:a}=new Uint8Array(s);return t(new DataView(a),s)}}return t(new dQ[o](s),r)};return i},fQ=n=>D8e(new Map,n)(0),z_="",{toString:R8e}={},{keys:P8e}=Object,C3=n=>{const e=typeof n;if(e!=="object"||!n)return[wB,e];const t=R8e.call(n).slice(8,-1);switch(t){case"Array":return[C4,z_];case"Object":return[ZE,z_];case"Date":return[YU,z_];case"RegExp":return[VU,z_];case"Map":return[$U,z_];case"Set":return[HU,z_];case"DataView":return[C4,t]}return t.includes("Array")?[C4,t]:t.includes("Error")?[noe,t]:[ZE,t]},Rw=([n,e])=>n===wB&&(e==="function"||e==="symbol"),L8e=(n,e,t,i)=>{const r=(s,a)=>{const c=i.push(s)-1;return t.set(a,c),c},o=s=>{if(t.has(s))return t.get(s);let[a,c]=C3(s);switch(a){case wB:{let y=s;switch(c){case"bigint":a=ioe,y=s.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+c);y=null;break;case"undefined":return r([toe],s)}return r([a,y],s)}case C4:{if(c){let E=s;return c==="DataView"?E=new Uint8Array(s.buffer):c==="ArrayBuffer"&&(E=new Uint8Array(s)),r([c,[...E]],s)}const y=[],_=r([a,y],s);for(const E of s)y.push(o(E));return _}case ZE:{if(c)switch(c){case"BigInt":return r([c,s.toString()],s);case"Boolean":case"Number":case"String":return r([c,s.valueOf()],s)}if(e&&"toJSON"in s)return o(s.toJSON());const y=[],_=r([a,y],s);for(const E of P8e(s))(n||!Rw(C3(s[E])))&&y.push([o(E),o(s[E])]);return _}case YU:return r([a,s.toISOString()],s);case VU:{const{source:y,flags:_}=s;return r([a,{source:y,flags:_}],s)}case $U:{const y=[],_=r([a,y],s);for(const[E,I]of s)(n||!(Rw(C3(E))||Rw(C3(I))))&&y.push([o(E),o(I)]);return _}case HU:{const y=[],_=r([a,y],s);for(const E of s)(n||!Rw(C3(E)))&&y.push(o(E));return _}}const{message:f}=s;return r([a,{name:c,message:f}],s)};return o},pQ=(n,{json:e,lossy:t}={})=>{const i=[];return L8e(!(e||t),!!e,new Map,i)(n),i},XE=typeof structuredClone=="function"?(n,e)=>e&&("json"in e||"lossy"in e)?fQ(pQ(n,e)):structuredClone(n):(n,e)=>fQ(pQ(n,e));function U8e(n,e){const t=[{type:"text",value:""}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function K8e(n,e){return"Back to reference "+(n+1)+(e>1?"-"+e:"")}function F8e(n){const e=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",t=n.options.footnoteBackContent||U8e,i=n.options.footnoteBackLabel||K8e,r=n.options.footnoteLabel||"Footnotes",o=n.options.footnoteLabelTagName||"h2",s=n.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let c=-1;for(;++c<n.footnoteOrder.length;){const f=n.footnoteById.get(n.footnoteOrder[c]);if(!f)continue;const y=n.all(f),_=String(f.identifier).toUpperCase(),E=z2(_.toLowerCase());let I=0;const P=[],K=n.footnoteCounts.get(_);for(;K!==void 0&&++I<=K;){P.length>0&&P.push({type:"text",value:" "});let V=typeof t=="string"?t:t(c,I);typeof V=="string"&&(V={type:"text",value:V}),P.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+E+(I>1?"-"+I:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(c,I),className:["data-footnote-backref"]},children:Array.isArray(V)?V:[V]})}const z=y[y.length-1];if(z&&z.type==="element"&&z.tagName==="p"){const V=z.children[z.children.length-1];V&&V.type==="text"?V.value+=" ":z.children.push({type:"text",value:" "}),z.children.push(...P)}else y.push(...P);const Q={type:"element",tagName:"li",properties:{id:e+"fn-"+E},children:n.wrap(y,!0)};n.patch(f,Q),a.push(Q)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...XE(s),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:n.wrap(a,!0)},{type:"text",value:`
`}]}}const roe=(function(n){if(n==null)return G8e;if(typeof n=="function")return SB(n);if(typeof n=="object")return Array.isArray(n)?z8e(n):j8e(n);if(typeof n=="string")return N8e(n);throw new Error("Expected function, string, or object as test")});function z8e(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=roe(n[t]);return SB(i);function i(...r){let o=-1;for(;++o<e.length;)if(e[o].apply(this,r))return!0;return!1}}function j8e(n){const e=n;return SB(t);function t(i){const r=i;let o;for(o in n)if(r[o]!==e[o])return!1;return!0}}function N8e(n){return SB(e);function e(t){return t&&t.type===n}}function SB(n){return e;function e(t,i,r){return!!(W8e(t)&&n.call(this,t,typeof i=="number"?i:void 0,r||void 0))}}function G8e(){return!0}function W8e(n){return n!==null&&typeof n=="object"&&"type"in n}const ooe=[],Q8e=!0,mQ=!1,q8e="skip";function Y8e(n,e,t,i){let r;typeof e=="function"&&typeof t!="function"?(i=t,t=e):r=e;const o=roe(r),s=i?-1:1;a(n,void 0,[])();function a(c,f,y){const _=c&&typeof c=="object"?c:{};if(typeof _.type=="string"){const I=typeof _.tagName=="string"?_.tagName:typeof _.name=="string"?_.name:void 0;Object.defineProperty(E,"name",{value:"node ("+(c.type+(I?"<"+I+">":""))+")"})}return E;function E(){let I=ooe,P,K,z;if((!e||o(c,f,y[y.length-1]||void 0))&&(I=V8e(t(c,y)),I[0]===mQ))return I;if("children"in c&&c.children){const Q=c;if(Q.children&&I[0]!==q8e)for(K=(i?Q.children.length:-1)+s,z=y.concat(Q);K>-1&&K<Q.children.length;){const V=Q.children[K];if(P=a(V,K,z)(),P[0]===mQ)return P;K=typeof P[1]=="number"?P[1]:K+s}}return I}}}function V8e(n){return Array.isArray(n)?n:typeof n=="number"?[Q8e,n]:n==null?ooe:[n]}function soe(n,e,t,i){let r,o,s;typeof e=="function"&&typeof t!="function"?(o=void 0,s=e,r=t):(o=e,s=t,r=i),Y8e(n,o,a,r);function a(c,f){const y=f[f.length-1],_=y?y.children.indexOf(c):void 0;return s(c,_,y)}}const FR={}.hasOwnProperty,$8e={};function H8e(n,e){const t=e||$8e,i=new Map,r=new Map,o=new Map,s={...k8e,...t.handlers},a={all:f,applyData:X8e,definitionById:i,footnoteById:r,footnoteCounts:o,footnoteOrder:[],handlers:s,one:c,options:t,patch:Z8e,wrap:eIe};return soe(n,function(y){if(y.type==="definition"||y.type==="footnoteDefinition"){const _=y.type==="definition"?i:r,E=String(y.identifier).toUpperCase();_.has(E)||_.set(E,y)}}),a;function c(y,_){const E=y.type,I=a.handlers[E];if(FR.call(a.handlers,E)&&I)return I(a,y,_);if(a.options.passThrough&&a.options.passThrough.includes(E)){if("children"in y){const{children:K,...z}=y,Q=XE(z);return Q.children=a.all(y),Q}return XE(y)}return(a.options.unknownHandler||J8e)(a,y,_)}function f(y){const _=[];if("children"in y){const E=y.children;let I=-1;for(;++I<E.length;){const P=a.one(E[I],y);if(P){if(I&&E[I-1].type==="break"&&(!Array.isArray(P)&&P.type==="text"&&(P.value=gQ(P.value)),!Array.isArray(P)&&P.type==="element")){const K=P.children[0];K&&K.type==="text"&&(K.value=gQ(K.value))}Array.isArray(P)?_.push(...P):_.push(P)}}}return _}}function Z8e(n,e){n.position&&(e.position=R6e(n))}function X8e(n,e){let t=e;if(n&&n.data){const i=n.data.hName,r=n.data.hChildren,o=n.data.hProperties;if(typeof i=="string")if(t.type==="element")t.tagName=i;else{const s="children"in t?t.children:[t];t={type:"element",tagName:i,properties:{},children:s}}t.type==="element"&&o&&Object.assign(t.properties,XE(o)),"children"in t&&t.children&&r!==null&&r!==void 0&&(t.children=r)}return t}function J8e(n,e){const t=e.data||{},i="value"in e&&!(FR.call(t,"hProperties")||FR.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:n.all(e)};return n.patch(e,i),n.applyData(e,i)}function eIe(n,e){const t=[];let i=-1;for(e&&t.push({type:"text",value:`
`});++i<n.length;)i&&t.push({type:"text",value:`
`}),t.push(n[i]);return e&&n.length>0&&t.push({type:"text",value:`
`}),t}function gQ(n){let e=0,t=n.charCodeAt(e);for(;t===9||t===32;)e++,t=n.charCodeAt(e);return n.slice(e)}function yQ(n,e){const t=H8e(n,e),i=t.one(n,void 0),r=F8e(t),o=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return r&&o.children.push({type:"text",value:`
`},r),o}function tIe(n,e){return n&&"run"in n?async function(t,i){const r=yQ(t,{file:i,...e});await n.run(r,i)}:function(t,i){return yQ(t,{file:i,...n||e})}}function vQ(n){if(n)throw n}var mI,bQ;function nIe(){if(bQ)return mI;bQ=1;var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(f){return typeof Array.isArray=="function"?Array.isArray(f):e.call(f)==="[object Array]"},o=function(f){if(!f||e.call(f)!=="[object Object]")return!1;var y=n.call(f,"constructor"),_=f.constructor&&f.constructor.prototype&&n.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!y&&!_)return!1;var E;for(E in f);return typeof E>"u"||n.call(f,E)},s=function(f,y){t&&y.name==="__proto__"?t(f,y.name,{enumerable:!0,configurable:!0,value:y.newValue,writable:!0}):f[y.name]=y.newValue},a=function(f,y){if(y==="__proto__")if(n.call(f,y)){if(i)return i(f,y).value}else return;return f[y]};return mI=function c(){var f,y,_,E,I,P,K=arguments[0],z=1,Q=arguments.length,V=!1;for(typeof K=="boolean"&&(V=K,K=arguments[1]||{},z=2),(K==null||typeof K!="object"&&typeof K!="function")&&(K={});z<Q;++z)if(f=arguments[z],f!=null)for(y in f)_=a(K,y),E=a(f,y),K!==E&&(V&&E&&(o(E)||(I=r(E)))?(I?(I=!1,P=_&&r(_)?_:[]):P=_&&o(_)?_:{},s(K,{name:y,newValue:c(V,P,E)})):typeof E<"u"&&s(K,{name:y,newValue:E}));return K},mI}var iIe=nIe();const gI=Zl(iIe);function zR(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function rIe(){const n=[],e={run:t,use:i};return e;function t(...r){let o=-1;const s=r.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);a(null,...r);function a(c,...f){const y=n[++o];let _=-1;if(c){s(c);return}for(;++_<r.length;)(f[_]===null||f[_]===void 0)&&(f[_]=r[_]);r=f,y?oIe(y,a)(...f):s(null,...f)}}function i(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return n.push(r),e}}function oIe(n,e){let t;return i;function i(...s){const a=n.length>s.length;let c;a&&s.push(r);try{c=n.apply(this,s)}catch(f){const y=f;if(a&&t)throw y;return r(y)}a||(c&&c.then&&typeof c.then=="function"?c.then(o,r):c instanceof Error?r(c):o(c))}function r(s,...a){t||(t=!0,e(s,...a))}function o(s){r(null,s)}}const zg={basename:sIe,dirname:aIe,extname:lIe,join:uIe,sep:"/"};function sIe(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');C5(n);let t=0,i=-1,r=n.length,o;if(e===void 0||e.length===0||e.length>n.length){for(;r--;)if(n.codePointAt(r)===47){if(o){t=r+1;break}}else i<0&&(o=!0,i=r+1);return i<0?"":n.slice(t,i)}if(e===n)return"";let s=-1,a=e.length-1;for(;r--;)if(n.codePointAt(r)===47){if(o){t=r+1;break}}else s<0&&(o=!0,s=r+1),a>-1&&(n.codePointAt(r)===e.codePointAt(a--)?a<0&&(i=r):(a=-1,i=s));return t===i?i=s:i<0&&(i=n.length),n.slice(t,i)}function aIe(n){if(C5(n),n.length===0)return".";let e=-1,t=n.length,i;for(;--t;)if(n.codePointAt(t)===47){if(i){e=t;break}}else i||(i=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function lIe(n){C5(n);let e=n.length,t=-1,i=0,r=-1,o=0,s;for(;e--;){const a=n.codePointAt(e);if(a===47){if(s){i=e+1;break}continue}t<0&&(s=!0,t=e+1),a===46?r<0?r=e:o!==1&&(o=1):r>-1&&(o=-1)}return r<0||t<0||o===0||o===1&&r===t-1&&r===i+1?"":n.slice(r,t)}function uIe(...n){let e=-1,t;for(;++e<n.length;)C5(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":cIe(t)}function cIe(n){C5(n);const e=n.codePointAt(0)===47;let t=AIe(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.codePointAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function AIe(n,e){let t="",i=0,r=-1,o=0,s=-1,a,c;for(;++s<=n.length;){if(s<n.length)a=n.codePointAt(s);else{if(a===47)break;a=47}if(a===47){if(!(r===s-1||o===1))if(r!==s-1&&o===2){if(t.length<2||i!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(c=t.lastIndexOf("/"),c!==t.length-1){c<0?(t="",i=0):(t=t.slice(0,c),i=t.length-1-t.lastIndexOf("/")),r=s,o=0;continue}}else if(t.length>0){t="",i=0,r=s,o=0;continue}}e&&(t=t.length>0?t+"/..":"..",i=2)}else t.length>0?t+="/"+n.slice(r+1,s):t=n.slice(r+1,s),i=s-r-1;r=s,o=0}else a===46&&o>-1?o++:o=-1}return t}function C5(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const hIe={cwd:dIe};function dIe(){return"/"}function jR(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function fIe(n){if(typeof n=="string")n=new URL(n);else if(!jR(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return pIe(n)}function pIe(n){if(n.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const i=e.codePointAt(t+2);if(i===70||i===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const yI=["history","path","basename","stem","extname","dirname"];class aoe{constructor(e){let t;e?jR(e)?t={path:e}:typeof e=="string"||mIe(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":hIe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<yI.length;){const o=yI[i];o in t&&t[o]!==void 0&&t[o]!==null&&(this[o]=o==="history"?[...t[o]]:t[o])}let r;for(r in t)yI.includes(r)||(this[r]=t[r])}get basename(){return typeof this.path=="string"?zg.basename(this.path):void 0}set basename(e){bI(e,"basename"),vI(e,"basename"),this.path=zg.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?zg.dirname(this.path):void 0}set dirname(e){CQ(this.basename,"dirname"),this.path=zg.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?zg.extname(this.path):void 0}set extname(e){if(vI(e,"extname"),CQ(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=zg.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){jR(e)&&(e=fIe(e)),bI(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?zg.basename(this.path,this.extname):void 0}set stem(e){bI(e,"stem"),vI(e,"stem"),this.path=zg.join(this.dirname||"",e+(this.extname||""))}fail(e,t,i){const r=this.message(e,t,i);throw r.fatal=!0,r}info(e,t,i){const r=this.message(e,t,i);return r.fatal=void 0,r}message(e,t,i){const r=new qA(e,t,i);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function vI(n,e){if(n&&n.includes(zg.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+zg.sep+"`")}function bI(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function CQ(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function mIe(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const gIe=(function(n){const i=this.constructor.prototype,r=i[n],o=function(){return r.apply(o,arguments)};return Object.setPrototypeOf(o,i),o}),yIe={}.hasOwnProperty;class ZU extends gIe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=rIe()}copy(){const e=new ZU;let t=-1;for(;++t<this.attachers.length;){const i=this.attachers[t];e.use(...i)}return e.data(gI(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(xI("data",this.frozen),this.namespace[e]=t,this):yIe.call(this.namespace,e)&&this.namespace[e]||void 0:e?(xI("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const r=t.call(e,...i);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=Pw(e),i=this.parser||this.Parser;return CI("parse",i),i(String(t),t)}process(e,t){const i=this;return this.freeze(),CI("process",this.parser||this.Parser),_I("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(o,s){const a=Pw(e),c=i.parse(a);i.run(c,a,function(y,_,E){if(y||!_||!E)return f(y);const I=_,P=i.stringify(I,E);CIe(P)?E.value=P:E.result=P,f(y,E)});function f(y,_){y||!_?s(y):o?o(_):t(void 0,_)}}}processSync(e){let t=!1,i;return this.freeze(),CI("processSync",this.parser||this.Parser),_I("processSync",this.compiler||this.Compiler),this.process(e,r),xQ("processSync","process",t),i;function r(o,s){t=!0,vQ(o),i=s}}run(e,t,i){_Q(e),this.freeze();const r=this.transformers;return!i&&typeof t=="function"&&(i=t,t=void 0),i?o(void 0,i):new Promise(o);function o(s,a){const c=Pw(t);r.run(e,c,f);function f(y,_,E){const I=_||e;y?a(y):s?s(I):i(void 0,I,E)}}}runSync(e,t){let i=!1,r;return this.run(e,t,o),xQ("runSync","run",i),r;function o(s,a){vQ(s),r=a,i=!0}}stringify(e,t){this.freeze();const i=Pw(t),r=this.compiler||this.Compiler;return _I("stringify",r),_Q(e),r(e,i)}use(e,...t){const i=this.attachers,r=this.namespace;if(xI("use",this.frozen),e!=null)if(typeof e=="function")c(e,t);else if(typeof e=="object")Array.isArray(e)?a(e):s(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function o(f){if(typeof f=="function")c(f,[]);else if(typeof f=="object")if(Array.isArray(f)){const[y,..._]=f;c(y,_)}else s(f);else throw new TypeError("Expected usable value, not `"+f+"`")}function s(f){if(!("plugins"in f)&&!("settings"in f))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(f.plugins),f.settings&&(r.settings=gI(!0,r.settings,f.settings))}function a(f){let y=-1;if(f!=null)if(Array.isArray(f))for(;++y<f.length;){const _=f[y];o(_)}else throw new TypeError("Expected a list of plugins, not `"+f+"`")}function c(f,y){let _=-1,E=-1;for(;++_<i.length;)if(i[_][0]===f){E=_;break}if(E===-1)i.push([f,...y]);else if(y.length>0){let[I,...P]=y;const K=i[E][1];zR(K)&&zR(I)&&(I=gI(!0,K,I)),i[E]=[f,I,...P]}}}}const vIe=new ZU().freeze();function CI(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function _I(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function xI(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function _Q(n){if(!zR(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function xQ(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function Pw(n){return bIe(n)?n:new aoe(n)}function bIe(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function CIe(n){return typeof n=="string"||_Ie(n)}function _Ie(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const xIe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",MQ=[],wQ={allowDangerousHtml:!0},MIe=/^(https?|ircs?|mailto|xmpp)$/i,wIe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function SIe(n){const e=EIe(n),t=BIe(n);return OIe(e.runSync(e.parse(t),t),n)}function EIe(n){const e=n.rehypePlugins||MQ,t=n.remarkPlugins||MQ,i=n.remarkRehypeOptions?{...n.remarkRehypeOptions,...wQ}:wQ;return vIe().use(s8e).use(t).use(tIe,i).use(e)}function BIe(n){const e=n.children||"",t=new aoe;return typeof e=="string"&&(t.value=e),t}function OIe(n,e){const t=e.allowedElements,i=e.allowElement,r=e.components,o=e.disallowedElements,s=e.skipHtml,a=e.unwrapDisallowed,c=e.urlTransform||IIe;for(const y of wIe)Object.hasOwn(e,y.from)&&(""+y.from+(y.to?"use `"+y.to+"` instead":"remove it")+xIe+y.id,void 0);return soe(n,f),F6e(n,{Fragment:te.Fragment,components:r,ignoreInvalidStyle:!0,jsx:te.jsx,jsxs:te.jsxs,passKeys:!0,passNode:!0});function f(y,_,E){if(y.type==="raw"&&E&&typeof _=="number")return s?E.children.splice(_,1):E.children[_]={type:"text",value:y.value},_;if(y.type==="element"){let I;for(I in dI)if(Object.hasOwn(dI,I)&&Object.hasOwn(y.properties,I)){const P=y.properties[I],K=dI[I];(K===null||K.includes(y.tagName))&&(y.properties[I]=c(String(P||""),I,y))}}if(y.type==="element"){let I=t?!t.includes(y.tagName):o?o.includes(y.tagName):!1;if(!I&&i&&typeof _=="number"&&(I=!i(y,_,E)),I&&E&&typeof _=="number")return a&&y.children?E.children.splice(_,1,...y.children):E.children.splice(_,1),_}}}function IIe(n){const e=n.indexOf(":"),t=n.indexOf("?"),i=n.indexOf("#"),r=n.indexOf("/");return e===-1||r!==-1&&e>r||t!==-1&&e>t||i!==-1&&e>i||MIe.test(n.slice(0,e))?n:""}function Kr(){var n="/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",e="a7edc49bc306eb20f0cc16abd4c84f78b7cc6807",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",statementMap:{0:{start:{line:4,column:16},end:{line:8,column:1}},1:{start:{line:11,column:26},end:{line:11,column:36}},2:{start:{line:12,column:52},end:{line:12,column:61}},3:{start:{line:13,column:23},end:{line:13,column:47}},4:{start:{line:14,column:25},end:{line:16,column:26}},5:{start:{line:17,column:28},end:{line:23,column:5}},6:{start:{line:18,column:27},end:{line:18,column:46}},7:{start:{line:19,column:6},end:{line:21,column:7}},8:{start:{line:20,column:8},end:{line:20,column:148}},9:{start:{line:22,column:6},end:{line:22,column:19}},10:{start:{line:24,column:4},end:{line:57,column:9}},11:{start:{line:27,column:76},end:{line:27,column:132}},12:{start:{line:30,column:10},end:{line:33,column:20}},13:{start:{line:40,column:12},end:{line:40,column:75}},14:{start:{line:44,column:10},end:{line:53,column:20}},15:{start:{line:47,column:14},end:{line:51,column:15}},16:{start:{line:48,column:16},end:{line:48,column:98}},17:{start:{line:50,column:16},end:{line:50,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:58,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:17,column:28},end:{line:17,column:29}},loc:{start:{line:17,column:39},end:{line:23,column:5}},line:17},2:{name:"(anonymous_2)",decl:{start:{line:27,column:13},end:{line:27,column:14}},loc:{start:{line:27,column:76},end:{line:27,column:132}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:29,column:119},end:{line:29,column:120}},loc:{start:{line:29,column:137},end:{line:34,column:9}},line:29},4:{name:"(anonymous_4)",decl:{start:{line:39,column:37},end:{line:39,column:38}},loc:{start:{line:39,column:49},end:{line:41,column:11}},line:39},5:{name:"(anonymous_5)",decl:{start:{line:43,column:80},end:{line:43,column:81}},loc:{start:{line:43,column:103},end:{line:54,column:9}},line:43},6:{name:"(anonymous_6)",decl:{start:{line:46,column:37},end:{line:46,column:38}},loc:{start:{line:46,column:44},end:{line:52,column:13}},line:46}},branchMap:{0:{loc:{start:{line:14,column:25},end:{line:16,column:26}},type:"binary-expr",locations:[{start:{line:14,column:25},end:{line:14,column:33}},{start:{line:16,column:4},end:{line:16,column:26}}],line:14},1:{loc:{start:{line:19,column:6},end:{line:21,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:21,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:25,column:6},end:{line:35,column:10}},type:"binary-expr",locations:[{start:{line:25,column:6},end:{line:25,column:9}},{start:{line:25,column:29},end:{line:35,column:10}}],line:25},3:{loc:{start:{line:29,column:8},end:{line:34,column:13}},type:"binary-expr",locations:[{start:{line:29,column:8},end:{line:29,column:20}},{start:{line:29,column:40},end:{line:34,column:13}}],line:29},4:{loc:{start:{line:36,column:6},end:{line:55,column:13}},type:"binary-expr",locations:[{start:{line:36,column:6},end:{line:36,column:16}},{start:{line:36,column:36},end:{line:55,column:13}}],line:36},5:{loc:{start:{line:47,column:14},end:{line:51,column:15}},type:"if",locations:[{start:{line:47,column:14},end:{line:51,column:15}},{start:{line:49,column:21},end:{line:51,column:15}}],line:47},6:{loc:{start:{line:56,column:6},end:{line:56,column:215}},type:"binary-expr",locations:[{start:{line:56,column:6},end:{line:56,column:12}},{start:{line:56,column:16},end:{line:56,column:30}},{start:{line:56,column:50},end:{line:56,column:215}}],line:56}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Doc.tsx"],names:[],mappings:"AA0Ce,SAMT,UANS,KAkBK,YAlBL;AA1Cf,OAAO,WAAW;AAClB,OAAO,cAAc;AAErB,MAAM,UAAU;AAAA,EACd,IAAI;AAAA,EACJ,SAAS;AAAA,EACT,KAAK;AACP;AAkBA,qBAAqB,YAAY,MAAM,UAAoB;AAAA,EACzD,SAAU;AACR,UAAM,EAAC,UAAS,IAAI,KAAK;AAEzB,UAAM,EAAC,KAAK,QAAQ,QAAQ,eAAc,IAAI;AAC9C,UAAM,aAAa,UAAU,aAAa;AAE1C,UAAM,eACJ,CAAC,CAAC;AAAA;AAAA,IAGF,CAAC,MAAM,QAAQ,MAAM;AAGvB,UAAM,kBAAkB,CAAC,UAAkB;AACzC,YAAM,eAAe,MAAM,YAAY;AACvC,UAAI,aAAa,WAAW,UAAU,GAAG;AACvC,eAAO,oBAAC,OAAE,MAAM,cAAc,QAAO,UAAS,KAAI,cAAc,gBAAM,aAAa,MAAM,GAAG,EAAE,IAAI,GAAE;AAAA,MACtG;AACA,aAAO;AAAA,IACT;AAEA,WACE,iCACG;AAAA,aACC,qBAAC,SAAI,WAAU,WACb;AAAA,4BAAC,SAAI,WAAU,gBAAe,eAAY,kBACxC,8BAAC,YAAS,YAAY;AAAA,UACpB,GAAG,CAAC,EAAC,MAAM,OAAO,MAAM,UAAU,GAAG,MAAK,MAAM,oBAAC,OAAE,MAAY,QAAO,UAAU,GAAG,OAAQ,UAAS;AAAA,QACtG,GAAI,eAAI,GACV;AAAA,QACC,gBACC,oBAAC,QAAG,WAAU,mBACX,iBAAO,QAAQ,MAAM,EAAE,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM;AAC5C,iBACE,qBAAC,QACC;AAAA,gCAAC,UAAM,eAAK,UAAU,GAAG,GAAE;AAAA,YAC3B,oBAAC,SAAK,gBAAM,KAAI;AAAA,eAFT,GAGT;AAAA,QAEJ,CAAC,GACH;AAAA,SAEJ;AAAA,MAED,cACC,oBAAC,SAAI,WAAU,wBACb,+BAAC,WAAM,WAAU,+BACf;AAAA,4BAAC,WACC,+BAAC,QACC;AAAA,8BAAC,QAAG;AAAA,UACH,OAAO,OAAO,OAAO,EAAE,IAAI,YAAU;AACpC,mBAAO,oBAAC,QAAiB,oBAAT,MAAgB;AAAA,UAClC,CAAC;AAAA,WACH,GACF;AAAA,QACA,oBAAC,WACE,iBAAO,QAAQ,UAAU,EAAE,IAAI,CAAC,CAAC,KAAK,UAAU,MAAM;AACrD,iBACE,qBAAC,QACC;AAAA,gCAAC,QAAI,eAAI;AAAA,YACR,OAAO,KAAK,OAAO,EAAE,IAAI,CAAC,MAAM;AAC/B,kBAAI,OAAO,UAAU,eAAe,KAAK,YAAY,CAAC,GAAG;AACvD,uBAAO,oBAAC,QAAY,0BAAgB,WAAW,CAAyB,CAAC,KAAzD,CAA2D;AAAA,cAC7E,OACK;AACH,uBAAO,oBAAC,QAAW,kBAAH,CAAK;AAAA,cACvB;AAAA,YACF,CAAC;AAAA,eATM,GAUT;AAAA,QAEJ,CAAC,GACH;AAAA,SACF,GACF;AAAA,MAED,UAAU,kBACT,oBAAC,SAAI,WAAU,uBACb,8BAAC,OAAE,MAAM,QAAS,QAAO,UAAS,KAAI,cAAc,0BAAe,GACrE;AAAA,OAEJ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a7edc49bc306eb20f0cc16abd4c84f78b7cc6807"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Kr=function(){return s},s}Kr();const SQ=(Kr().s[0]++,{js:"JS",android:"Android",ios:"iOS"});class EB extends On.Component{render(){Kr().f[0]++;const{fieldSpec:e}=(Kr().s[1]++,this.props),{doc:t,values:i,docUrl:r,docUrlLinkText:o}=(Kr().s[2]++,e),s=(Kr().s[3]++,e["sdk-support"]),a=(Kr().s[4]++,Kr().b[0][0]++,!!i&&(Kr().b[0][1]++,!Array.isArray(i)));Kr().s[5]++;const c=f=>{Kr().f[1]++;const y=(Kr().s[6]++,f.toLowerCase());return Kr().s[7]++,y.startsWith("https://")?(Kr().b[1][0]++,Kr().s[8]++,te.jsx("a",{href:y,target:"_blank",rel:"noreferrer",children:"#"+y.split("/").pop()})):(Kr().b[1][1]++,Kr().s[9]++,f)};return Kr().s[10]++,te.jsxs(te.Fragment,{children:[(Kr().b[2][0]++,t&&(Kr().b[2][1]++,te.jsxs("div",{className:"SpecDoc",children:[te.jsx("div",{className:"SpecDoc__doc","data-wd-key":"spec-field-doc",children:te.jsx(SIe,{components:{a:({node:f,href:y,children:_,...E})=>(Kr().f[2]++,Kr().s[11]++,te.jsx("a",{href:y,target:"_blank",...E,children:_}))},children:t})}),(Kr().b[3][0]++,a&&(Kr().b[3][1]++,te.jsx("ul",{className:"SpecDoc__values",children:Object.entries(i).map(([f,y])=>(Kr().f[3]++,Kr().s[12]++,te.jsxs("li",{children:[te.jsx("code",{children:JSON.stringify(f)}),te.jsx("div",{children:y.doc})]},f)))})))]}))),(Kr().b[4][0]++,s&&(Kr().b[4][1]++,te.jsx("div",{className:"SpecDoc__sdk-support",children:te.jsxs("table",{className:"SpecDoc__sdk-support__table",children:[te.jsx("thead",{children:te.jsxs("tr",{children:[te.jsx("th",{}),Object.values(SQ).map(f=>(Kr().f[4]++,Kr().s[13]++,te.jsx("th",{children:f},f)))]})}),te.jsx("tbody",{children:Object.entries(s).map(([f,y])=>(Kr().f[5]++,Kr().s[14]++,te.jsxs("tr",{children:[te.jsx("td",{children:f}),Object.keys(SQ).map(_=>(Kr().f[6]++,Kr().s[15]++,Object.prototype.hasOwnProperty.call(y,_)?(Kr().b[5][0]++,Kr().s[16]++,te.jsx("td",{children:c(y[_])},_)):(Kr().b[5][1]++,Kr().s[17]++,te.jsx("td",{children:"no"},_))))]},f)))})]})}))),(Kr().b[6][0]++,r&&(Kr().b[6][1]++,o)&&(Kr().b[6][2]++,te.jsx("div",{className:"SpecDoc__learn-more",children:te.jsx("a",{href:r,target:"_blank",rel:"noreferrer",children:o})})))]})}}function Ir(){var n="/home/runner/work/maputnik/maputnik/src/components/Block.tsx",e="a026f5c10cd11169be04acaaf924d5e996792a37",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Block.tsx",statementMap:{0:{start:{line:7,column:13},end:{line:7,column:17}},1:{start:{line:9,column:4},end:{line:9,column:17}},2:{start:{line:10,column:4},end:{line:12,column:6}},3:{start:{line:15,column:18},end:{line:15,column:32}},4:{start:{line:16,column:4},end:{line:18,column:5}},5:{start:{line:17,column:6},end:{line:17,column:64}},6:{start:{line:20,column:16},end:{line:24,column:3}},7:{start:{line:21,column:4},end:{line:23,column:7}},8:{start:{line:31,column:17},end:{line:40,column:3}},9:{start:{line:32,column:15},end:{line:32,column:39}},10:{start:{line:33,column:21},end:{line:33,column:48}},11:{start:{line:34,column:4},end:{line:36,column:5}},12:{start:{line:35,column:6},end:{line:35,column:30}},13:{start:{line:37,column:4},end:{line:39,column:5}},14:{start:{line:38,column:6},end:{line:38,column:29}},15:{start:{line:42,column:4},end:{line:78,column:6}},16:{start:{line:66,column:12},end:{line:66,column:31}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:21},end:{line:13,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:14},end:{line:19,column:3}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:20,column:16},end:{line:20,column:17}},loc:{start:{line:20,column:25},end:{line:24,column:3}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:31,column:17},end:{line:31,column:18}},loc:{start:{line:31,column:28},end:{line:40,column:3}},line:31},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:79,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:65,column:87},end:{line:65,column:88}},loc:{start:{line:65,column:95},end:{line:67,column:11}},line:65}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:17,column:33},end:{line:17,column:62}},type:"cond-expr",locations:[{start:{line:17,column:48},end:{line:17,column:54}},{start:{line:17,column:57},end:{line:17,column:62}}],line:17},2:{loc:{start:{line:34,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:34,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},3:{loc:{start:{line:34,column:8},end:{line:34,column:66}},type:"binary-expr",locations:[{start:{line:34,column:8},end:{line:34,column:53}},{start:{line:34,column:57},end:{line:34,column:66}}],line:34},4:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:55,column:10},end:{line:62,column:14}},type:"binary-expr",locations:[{start:{line:55,column:10},end:{line:55,column:30}},{start:{line:55,column:50},end:{line:62,column:14}}],line:55},6:{loc:{start:{line:63,column:10},end:{line:63,column:134}},type:"binary-expr",locations:[{start:{line:63,column:10},end:{line:63,column:31}},{start:{line:63,column:51},end:{line:63,column:134}}],line:63},7:{loc:{start:{line:68,column:10},end:{line:75,column:11}},type:"binary-expr",locations:[{start:{line:68,column:10},end:{line:68,column:30}},{start:{line:68,column:50},end:{line:75,column:11}}],line:68},8:{loc:{start:{line:72,column:32},end:{line:72,column:64}},type:"cond-expr",locations:[{start:{line:72,column:53},end:{line:72,column:55}},{start:{line:72,column:58},end:{line:72,column:64}}],line:72}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Block.tsx"],names:[],mappings:"AA+DW,SAYD,KAZC;AA/DX,OAAO,WAA8E;AACrF,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAkBhB,qBAAqB,cAAc,MAAM,UAAkC;AAAA,EACzE,WAAkC;AAAA,EAElC,YAAa,OAAmB;AAC9B,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS,GAAwE;AAC/E,UAAM,QAAQ,EAAE,OAAO;AACvB,QAAI,KAAK,MAAM,UAAU;AACvB,aAAO,KAAK,MAAM,SAAS,UAAU,KAAK,SAAY,KAAK;AAAA,IAC7D;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,eAAe,CAAC,UAAoC;AAClD,UAAM,KAAK,MAAM,YAAY;AAC7B,UAAM,WAAW,KAAK,UAAU,SAAS,EAAE;AAE3C,QAAI,MAAM,YAAY,OAAO,aAAa,WAAW,CAAC,UAAU;AAC9D,YAAM,gBAAgB;AAAA,IACxB;AACA,QAAI,MAAM,YAAY,OAAO,aAAa,KAAK;AAC7C,YAAM,eAAe;AAAA,IACvB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,KAAK,MAAM;AAAA,QAC9B,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,WAAW,WAAW;AAAA,UACpB,wBAAwB;AAAA,UACxB,8BAA8B,KAAK,MAAM;AAAA,UACzC,yBAAyB,KAAK,MAAM;AAAA,UACpC,+BAA+B,KAAK,MAAM;AAAA,QAC5C,CAAC;AAAA,QACD,SAAS,KAAK;AAAA,QAEb;AAAA,eAAK,MAAM,aACV,oBAAC,SAAI,WAAU,8BACb;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,aAAa,KAAK;AAAA,cAClB,WAAW,KAAK,MAAM;AAAA;AAAA,UACxB,GACF;AAAA,UAED,CAAC,KAAK,MAAM,aACX,oBAAC,SAAI,WAAU,8BACZ,eAAK,MAAM,OACd;AAAA,UAEF,oBAAC,SAAI,WAAU,+BACZ,eAAK,MAAM,QACd;AAAA,UACA,oBAAC,SAAI,WAAU,gCAA+B,KAAK,QAAM;AAAC,iBAAK,WAAW;AAAA,UAAG,GAC1E,eAAK,MAAM,UACd;AAAA,UACC,KAAK,MAAM,aACV;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,cAEjD,8BAAC,OAAI,WAAW,KAAK,MAAM,WAAW;AAAA;AAAA,UACxC;AAAA;AAAA;AAAA,IAEJ;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a026f5c10cd11169be04acaaf924d5e996792a37"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ir=function(){return s},s}Ir();class as extends On.Component{_blockEl=(Ir().s[0]++,null);constructor(e){Ir().f[0]++,Ir().s[1]++,super(e),Ir().s[2]++,this.state={showDoc:!1}}onChange(e){Ir().f[1]++;const t=(Ir().s[3]++,e.target.value);if(Ir().s[4]++,this.props.onChange)return Ir().b[0][0]++,Ir().s[5]++,this.props.onChange(t===""?(Ir().b[1][0]++,void 0):(Ir().b[1][1]++,t));Ir().b[0][1]++}onToggleDoc=(Ir().s[6]++,e=>{Ir().f[2]++,Ir().s[7]++,this.setState({showDoc:e})});onLabelClick=(Ir().s[8]++,e=>{Ir().f[3]++;const t=(Ir().s[9]++,e.nativeEvent.target),i=(Ir().s[10]++,this._blockEl?.contains(t));Ir().s[11]++,Ir().b[3][0]++,e.nativeEvent.target.nodeName!=="INPUT"&&(Ir().b[3][1]++,!i)?(Ir().b[2][0]++,Ir().s[12]++,e.stopPropagation()):Ir().b[2][1]++,Ir().s[13]++,e.nativeEvent.target.nodeName!=="A"?(Ir().b[4][0]++,Ir().s[14]++,e.preventDefault()):Ir().b[4][1]++});render(){return Ir().f[4]++,Ir().s[15]++,te.jsxs("label",{style:this.props.style,"data-wd-key":this.props["data-wd-key"],className:x0({"maputnik-input-block":!0,"maputnik-input-block--wide":this.props.wideMode,"maputnik-action-block":this.props.action,"maputnik-input-block--error":this.props.error}),onClick:this.onLabelClick,children:[(Ir().b[5][0]++,this.props.fieldSpec&&(Ir().b[5][1]++,te.jsx("div",{className:"maputnik-input-block-label",children:te.jsx(UU,{label:this.props.label,onToggleDoc:this.onToggleDoc,fieldSpec:this.props.fieldSpec})}))),(Ir().b[6][0]++,!this.props.fieldSpec&&(Ir().b[6][1]++,te.jsx("div",{className:"maputnik-input-block-label",children:this.props.label}))),te.jsx("div",{className:"maputnik-input-block-action",children:this.props.action}),te.jsx("div",{className:"maputnik-input-block-content",ref:e=>{Ir().f[5]++,Ir().s[16]++,this._blockEl=e},children:this.props.children}),(Ir().b[7][0]++,this.props.fieldSpec&&(Ir().b[7][1]++,te.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(Ir().b[8][0]++,""):(Ir().b[8][1]++,"none")},children:te.jsx(EB,{fieldSpec:this.props.fieldSpec})})))]})}}function Xc(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",e="1b99a181d4a9dd7b629113889cbb71c3a4bb4d42",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:36}},1:{start:{line:6,column:4},end:{line:8,column:5}},2:{start:{line:7,column:6},end:{line:7,column:43}},3:{start:{line:7,column:35},end:{line:7,column:41}},4:{start:{line:9,column:4},end:{line:21,column:6}},5:{start:{line:17,column:25},end:{line:17,column:60}},6:{start:{line:19,column:64},end:{line:19,column:115}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:22,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:28},end:{line:7,column:29}},loc:{start:{line:7,column:35},end:{line:7,column:41}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:17,column:18},end:{line:17,column:19}},loc:{start:{line:17,column:25},end:{line:17,column:60}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:64},end:{line:19,column:115}},line:19}},branchMap:{0:{loc:{start:{line:6,column:4},end:{line:8,column:5}},type:"if",locations:[{start:{line:6,column:4},end:{line:8,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},1:{loc:{start:{line:6,column:8},end:{line:6,column:56}},type:"binary-expr",locations:[{start:{line:6,column:8},end:{line:6,column:26}},{start:{line:6,column:30},end:{line:6,column:56}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx"],names:[],mappings:"AA4BsC;AA5BtC,OAAO,WAAW;AAYlB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA,IACrC;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,UAAU,OAAK,KAAK,MAAM,SAAS,EAAE,OAAO,KAAK;AAAA,QACjD,cAAY,KAAK,MAAM,YAAY;AAAA,QAEjC,kBAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM,oBAAC,YAAiB,OAAO,KAAM,mBAAlB,GAAwB,CAAS;AAAA;AAAA,IAChF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1b99a181d4a9dd7b629113889cbb71c3a4bb4d42"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Xc=function(){return s},s}Xc();class zC extends On.Component{render(){Xc().f[0]++;let e=(Xc().s[0]++,this.props.options);return Xc().s[1]++,Xc().b[1][0]++,e.length>0&&(Xc().b[1][1]++,!Array.isArray(e[0]))?(Xc().b[0][0]++,Xc().s[2]++,e=e.map(t=>(Xc().f[1]++,Xc().s[3]++,[t,t]))):Xc().b[0][1]++,Xc().s[4]++,te.jsx("select",{className:"maputnik-select","data-wd-key":this.props["data-wd-key"],style:this.props.style,title:this.props.title,value:this.props.value,onChange:t=>(Xc().f[2]++,Xc().s[5]++,this.props.onChange(t.target.value)),"aria-label":this.props["aria-label"],children:e.map(([t,i])=>(Xc().f[3]++,Xc().s[6]++,te.jsx("option",{value:t,children:i},t)))})}}function Wi(){var n="/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",e="ffe977722e3215b5f6718c464b93680839810a41",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",statementMap:{0:{start:{line:3,column:24},end:{line:6,column:3}},1:{start:{line:8,column:4},end:{line:8,column:17}},2:{start:{line:9,column:4},end:{line:12,column:6}},3:{start:{line:15,column:4},end:{line:19,column:5}},4:{start:{line:16,column:6},end:{line:18,column:8}},5:{start:{line:20,column:4},end:{line:20,column:14}},6:{start:{line:25,column:4},end:{line:36,column:5}},7:{start:{line:26,column:6},end:{line:26,column:23}},8:{start:{line:27,column:6},end:{line:30,column:8}},9:{start:{line:32,column:6},end:{line:32,column:20}},10:{start:{line:33,column:6},end:{line:35,column:8}},11:{start:{line:37,column:4},end:{line:39,column:5}},12:{start:{line:38,column:6},end:{line:38,column:48}},13:{start:{line:40,column:4},end:{line:70,column:7}},14:{start:{line:51,column:8},end:{line:56,column:11}},15:{start:{line:55,column:10},end:{line:55,column:71}},16:{start:{line:55,column:34},end:{line:55,column:71}},17:{start:{line:59,column:8},end:{line:62,column:9}},18:{start:{line:60,column:10},end:{line:60,column:44}},19:{start:{line:61,column:10},end:{line:61,column:73}},20:{start:{line:61,column:35},end:{line:61,column:73}},21:{start:{line:65,column:8},end:{line:67,column:9}},22:{start:{line:66,column:10},end:{line:66,column:48}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:13},end:{line:4,column:14}},loc:{start:{line:4,column:19},end:{line:5,column:5}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:13,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:48},end:{line:21,column:3}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:71,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:50,column:16},end:{line:50,column:17}},loc:{start:{line:50,column:23},end:{line:57,column:7}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:54,column:11},end:{line:54,column:12}},loc:{start:{line:54,column:17},end:{line:56,column:9}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:58,column:14},end:{line:58,column:15}},loc:{start:{line:58,column:20},end:{line:63,column:7}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:64,column:17},end:{line:64,column:18}},loc:{start:{line:64,column:24},end:{line:68,column:7}},line:64}},branchMap:{0:{loc:{start:{line:11,column:13},end:{line:11,column:30}},type:"binary-expr",locations:[{start:{line:11,column:13},end:{line:11,column:24}},{start:{line:11,column:28},end:{line:11,column:30}}],line:11},1:{loc:{start:{line:15,column:4},end:{line:19,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:19,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:25,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:36,column:5}},{start:{line:31,column:11},end:{line:36,column:5}}],line:25},3:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},4:{loc:{start:{line:43,column:18},end:{line:43,column:125}},type:"cond-expr",locations:[{start:{line:43,column:83},end:{line:43,column:104}},{start:{line:43,column:107},end:{line:43,column:125}}],line:43},5:{loc:{start:{line:47,column:13},end:{line:47,column:64}},type:"cond-expr",locations:[{start:{line:47,column:43},end:{line:47,column:45}},{start:{line:47,column:48},end:{line:47,column:64}}],line:47},6:{loc:{start:{line:55,column:10},end:{line:55,column:71}},type:"if",locations:[{start:{line:55,column:10},end:{line:55,column:71}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},7:{loc:{start:{line:59,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:59,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59},8:{loc:{start:{line:61,column:10},end:{line:61,column:73}},type:"if",locations:[{start:{line:61,column:10},end:{line:61,column:73}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},9:{loc:{start:{line:65,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:65,column:8},end:{line:67,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},10:{loc:{start:{line:65,column:12},end:{line:65,column:51}},type:"binary-expr",locations:[{start:{line:65,column:12},end:{line:65,column:28}},{start:{line:65,column:32},end:{line:65,column:51}}],line:65}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputString.tsx"],names:[],mappings:"AAAA,OAAO,WAAW;AAsBlB,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,OAAO,MAAM,SAAS;AAAA,IACxB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,SAAS;AAClB,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,MACf;AAAA,IACF;AACA,WAAO,CAAC;AAAA,EACV;AAAA,EAEA,SAAS;AACP,QAAI;AACJ,QAAI;AAEJ,QAAG,KAAK,MAAM,OAAO;AACnB,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,QACA;AAAA,MACF;AAAA,IACF,OACK;AACH,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAEA,QAAG,KAAK,MAAM,UAAU;AACtB,cAAQ,KAAK,2BAA2B;AAAA,IAC1C;AAEA,WAAO,MAAM,cAAc,KAAK;AAAA,MAC9B,cAAc,KAAK,MAAM,YAAY;AAAA,MACrC,eAAe,KAAK,MAAM,aAAa;AAAA,MACvC,YAAY,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,YAAY,IAAI,KAAK,MAAM,aAAa,EAAE,QAAQ;AAAA,MAC/G,UAAU,KAAK,MAAM;AAAA,MACrB,WAAW,QAAQ,KAAK,GAAG;AAAA,MAC3B,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM,UAAU,SAAY,KAAK,KAAK,MAAM;AAAA,MACxD,aAAa,KAAK,MAAM;AAAA,MACxB,OAAO,KAAK,MAAM;AAAA,MAClB,UAAU,CAAC,MAA2E;AACpF,aAAK,SAAS;AAAA,UACZ,SAAS;AAAA,UACT,OAAO,EAAE,OAAO;AAAA,QAClB,GAAG,MAAM;AACP,cAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,KAAK,MAAM,KAAK;AAAA,QAC7D,CAAC;AAAA,MACH;AAAA,MACA,QAAQ,MAAM;AACZ,YAAG,KAAK,MAAM,UAAQ,KAAK,MAAM,OAAO;AACtC,eAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,cAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QAC/D;AAAA,MACF;AAAA,MACA,WAAW,CAAC,MAAM;AAChB,YAAI,EAAE,YAAY,MAAM,KAAK,MAAM,UAAU;AAC3C,eAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QACtC;AAAA,MACF;AAAA,MACA,UAAU,KAAK,MAAM;AAAA,IACvB,CAAC;AAAA,EACH;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ffe977722e3215b5f6718c464b93680839810a41"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Wi=function(){return s},s}Wi();class zm extends On.Component{static defaultProps=(Wi().s[0]++,{onInput:()=>{Wi().f[0]++}});constructor(e){Wi().f[1]++,Wi().s[1]++,super(e),Wi().s[2]++,this.state={editing:!1,value:(Wi().b[0][0]++,e.value||(Wi().b[0][1]++,""))}}static getDerivedStateFromProps(e,t){if(Wi().f[2]++,Wi().s[3]++,t.editing)Wi().b[1][1]++;else return Wi().b[1][0]++,Wi().s[4]++,{value:e.value};return Wi().s[5]++,{}}render(){Wi().f[3]++;let e,t;return Wi().s[6]++,this.props.multi?(Wi().b[2][0]++,Wi().s[7]++,e="textarea",Wi().s[8]++,t=["maputnik-string","maputnik-string--multi"]):(Wi().b[2][1]++,Wi().s[9]++,e="input",Wi().s[10]++,t=["maputnik-string"]),Wi().s[11]++,this.props.disabled?(Wi().b[3][0]++,Wi().s[12]++,t.push("maputnik-string--disabled")):Wi().b[3][1]++,Wi().s[13]++,On.createElement(e,{"aria-label":this.props["aria-label"],"data-wd-key":this.props["data-wd-key"],spellCheck:Object.prototype.hasOwnProperty.call(this.props,"spellCheck")?(Wi().b[4][0]++,this.props.spellCheck):(Wi().b[4][1]++,e!=="input"),disabled:this.props.disabled,className:t.join(" "),style:this.props.style,value:this.state.value===void 0?(Wi().b[5][0]++,""):(Wi().b[5][1]++,this.state.value),placeholder:this.props.default,title:this.props.title,onChange:i=>{Wi().f[4]++,Wi().s[14]++,this.setState({editing:!0,value:i.target.value},()=>{Wi().f[5]++,Wi().s[15]++,this.props.onInput?(Wi().b[6][0]++,Wi().s[16]++,this.props.onInput(this.state.value)):Wi().b[6][1]++})},onBlur:()=>{Wi().f[6]++,Wi().s[17]++,this.state.value!==this.props.value?(Wi().b[7][0]++,Wi().s[18]++,this.setState({editing:!1}),Wi().s[19]++,this.props.onChange?(Wi().b[8][0]++,Wi().s[20]++,this.props.onChange(this.state.value)):Wi().b[8][1]++):Wi().b[7][1]++},onKeyDown:i=>{Wi().f[7]++,Wi().s[21]++,Wi().b[10][0]++,i.keyCode===13&&(Wi().b[10][1]++,this.props.onChange)?(Wi().b[9][0]++,Wi().s[22]++,this.props.onChange(this.state.value)):Wi().b[9][1]++},required:this.props.required})}}function LA(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",e="599a12b14a1057b6bb554b629d0d81238d4af16c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",statementMap:{0:{start:{line:8,column:26},end:{line:38,column:1}},1:{start:{line:16,column:22},end:{line:16,column:110}},2:{start:{line:16,column:73},end:{line:16,column:109}},3:{start:{line:17,column:2},end:{line:37,column:4}},4:{start:{line:39,column:18},end:{line:39,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:26},end:{line:8,column:27}},loc:{start:{line:15,column:6},end:{line:38,column:1}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:16,column:66},end:{line:16,column:67}},loc:{start:{line:16,column:73},end:{line:16,column:109}},line:16}},branchMap:{0:{loc:{start:{line:14,column:2},end:{line:14,column:18}},type:"default-arg",locations:[{start:{line:14,column:13},end:{line:14,column:18}}],line:14},1:{loc:{start:{line:16,column:34},end:{line:16,column:60}},type:"binary-expr",locations:[{start:{line:16,column:34},end:{line:16,column:54}},{start:{line:16,column:58},end:{line:16,column:60}}],line:16},2:{loc:{start:{line:25,column:8},end:{line:25,column:79}},type:"binary-expr",locations:[{start:{line:25,column:8},end:{line:25,column:16}},{start:{line:25,column:36},end:{line:25,column:79}}],line:25},3:{loc:{start:{line:26,column:8},end:{line:34,column:9}},type:"binary-expr",locations:[{start:{line:26,column:8},end:{line:26,column:17}},{start:{line:26,column:37},end:{line:34,column:9}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx"],names:[],mappings:"AA0BI,SAKI,KALJ;AAzBJ,SAAQ,UAAS;AACjB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AACtD,SAAS,iBAAiB;AAU1B,MAAM,oBAAsD,CAAC;AAAA,EAC3D;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,WAAW;AACb,MAAM;AACJ,QAAM,cAAkC,OAAO,KAAK,GAAG,MAAM,KAAK,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,UAAU,EAAE,QAAQ,MAAM,GAAG,CAAC,CAAC,CAAC;AAC7H,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,MAAM;AAAA,MAAG,WAAW,GAAG,MAAM;AAAA,MAC3C,eAAa;AAAA,MACb;AAAA,MAEC;AAAA,oBACC,oBAAC,eAAY,OAAc,UAAU,MAAM;AAAA,QAE5C,CAAC,YACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS;AAAA,YACT;AAAA,YACA;AAAA,YACA,eAAa,QAAQ;AAAA;AAAA,QACvB;AAAA;AAAA;AAAA,EAEJ;AAEJ;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"599a12b14a1057b6bb554b629d0d81238d4af16c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return LA=function(){return s},s}LA();LA().s[0]++;const TIe=({t:n,value:e,wdKey:t,onChange:i,error:r,disabled:o=(LA().b[0][0]++,!1)})=>{LA().f[0]++;const s=(LA().s[1]++,Object.keys((LA().b[1][0]++,hp.layer.type.values||(LA().b[1][1]++,{}))).map(a=>(LA().f[1]++,LA().s[2]++,[a,UM.startCase(a.replace(/-/g," "))])));return LA().s[3]++,te.jsxs(as,{label:n("Type"),fieldSpec:hp.layer.type,"data-wd-key":t,error:r,children:[(LA().b[2][0]++,o&&(LA().b[2][1]++,te.jsx(zm,{value:e,disabled:!0}))),(LA().b[3][0]++,!o&&(LA().b[3][1]++,te.jsx(zC,{options:s,onChange:i,value:e,"data-wd-key":t+".select"})))]})},loe=(LA().s[4]++,Mo()(TIe));function _M(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",e="faa51332e301a2db02ecf3d9679788ae744c6d26",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",statementMap:{0:{start:{line:5,column:16},end:{line:23,column:1}},1:{start:{line:6,column:2},end:{line:22,column:4}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:16},end:{line:5,column:17}},loc:{start:{line:5,column:27},end:{line:23,column:1}},line:5}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx"],names:[],mappings:"AAkBM;AAjBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AASxB,MAAM,UAAkC,CAAC,UAAU;AACjD,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAM;AAAA,MAAK,WAAW,OAAO,MAAM;AAAA,MACxC,eAAa,MAAM;AAAA,MACnB,OAAO,MAAM;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,MAAM;AAAA,UACb,SAAS,MAAM;AAAA,UACf,eAAa,MAAM,QAAQ;AAAA;AAAA,MAC7B;AAAA;AAAA,EACF;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"faa51332e301a2db02ecf3d9679788ae744c6d26"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return _M=function(){return s},s}_M();_M().s[0]++;const uoe=n=>(_M().f[0]++,_M().s[1]++,te.jsx(as,{label:"ID",fieldSpec:Tr.layer.id,"data-wd-key":n.wdKey,error:n.error,children:te.jsx(zm,{value:n.value,onInput:n.onChange,"data-wd-key":n.wdKey+".input"})}));function Lw(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function al(){return al=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},al.apply(null,arguments)}var kIe=W1();const Xi=Zl(kIe);var MI={exports:{}},Is={};var EQ;function DIe(){if(EQ)return Is;EQ=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),I=Symbol.for("react.offscreen"),P;P=Symbol.for("react.module.reference");function K(z){if(typeof z=="object"&&z!==null){var Q=z.$$typeof;switch(Q){case n:switch(z=z.type,z){case t:case r:case i:case f:case y:return z;default:switch(z=z&&z.$$typeof,z){case a:case s:case c:case E:case _:case o:return z;default:return Q}}case e:return Q}}}return Is.ContextConsumer=s,Is.ContextProvider=o,Is.Element=n,Is.ForwardRef=c,Is.Fragment=t,Is.Lazy=E,Is.Memo=_,Is.Portal=e,Is.Profiler=r,Is.StrictMode=i,Is.Suspense=f,Is.SuspenseList=y,Is.isAsyncMode=function(){return!1},Is.isConcurrentMode=function(){return!1},Is.isContextConsumer=function(z){return K(z)===s},Is.isContextProvider=function(z){return K(z)===o},Is.isElement=function(z){return typeof z=="object"&&z!==null&&z.$$typeof===n},Is.isForwardRef=function(z){return K(z)===c},Is.isFragment=function(z){return K(z)===t},Is.isLazy=function(z){return K(z)===E},Is.isMemo=function(z){return K(z)===_},Is.isPortal=function(z){return K(z)===e},Is.isProfiler=function(z){return K(z)===r},Is.isStrictMode=function(z){return K(z)===i},Is.isSuspense=function(z){return K(z)===f},Is.isSuspenseList=function(z){return K(z)===y},Is.isValidElementType=function(z){return typeof z=="string"||typeof z=="function"||z===t||z===r||z===i||z===f||z===y||z===I||typeof z=="object"&&z!==null&&(z.$$typeof===E||z.$$typeof===_||z.$$typeof===o||z.$$typeof===s||z.$$typeof===c||z.$$typeof===P||z.getModuleId!==void 0)},Is.typeOf=K,Is}var BQ;function RIe(){return BQ||(BQ=1,MI.exports=DIe()),MI.exports}RIe();const OQ=n=>typeof n=="object"&&n!=null&&n.nodeType===1,IQ=(n,e)=>(!e||n!=="hidden")&&n!=="visible"&&n!=="clip",Uw=(n,e)=>{if(n.clientHeight<n.scrollHeight||n.clientWidth<n.scrollWidth){const t=getComputedStyle(n,null);return IQ(t.overflowY,e)||IQ(t.overflowX,e)||(i=>{const r=(o=>{if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch{return null}})(i);return!!r&&(r.clientHeight<i.scrollHeight||r.clientWidth<i.scrollWidth)})(n)}return!1},Kw=(n,e,t,i,r,o,s,a)=>o<n&&s>e||o>n&&s<e?0:o<=n&&a<=t||s>=e&&a>=t?o-n-i:s>e&&a<t||o<n&&a>t?s-e+r:0,PIe=n=>{const e=n.parentElement;return e??(n.getRootNode().host||null)},LIe=(n,e)=>{var t,i,r,o;if(typeof document>"u")return[];const{inline:s,boundary:a,skipOverflowHiddenElements:c}=e,f=typeof a=="function"?a:_e=>_e!==a;if(!OQ(n))throw new TypeError("Invalid target");const y=document.scrollingElement||document.documentElement,_=[];let E=n;for(;OQ(E)&&f(E);){if(E=PIe(E),E===y){_.push(E);break}E!=null&&E===document.body&&Uw(E)&&!Uw(document.documentElement)||E!=null&&Uw(E,c)&&_.push(E)}const I=(i=(t=window.visualViewport)==null?void 0:t.width)!=null?i:innerWidth,P=(o=(r=window.visualViewport)==null?void 0:r.height)!=null?o:innerHeight,{scrollX:K,scrollY:z}=window,{height:Q,width:V,top:$,right:Z,bottom:ee,left:X}=n.getBoundingClientRect(),{top:W,right:se,left:ue}=(_e=>{const Be=window.getComputedStyle(_e);return{top:parseFloat(Be.scrollMarginTop)||0,right:parseFloat(Be.scrollMarginRight)||0,bottom:parseFloat(Be.scrollMarginBottom)||0,left:parseFloat(Be.scrollMarginLeft)||0}})(n);let ve=$-W,ye=s==="center"?X+V/2-ue+se:s==="end"?Z+se:X-ue;const Ee=[];for(let _e=0;_e<_.length;_e++){const Be=_[_e],{height:Fe,width:Se,top:qe,right:ut,bottom:ht,left:De}=Be.getBoundingClientRect();if($>=0&&X>=0&&ee<=P&&Z<=I&&(Be===y&&!Uw(Be)||$>=qe&&ee<=ht&&X>=De&&Z<=ut))return Ee;const Ie=getComputedStyle(Be),ze=parseInt(Ie.borderLeftWidth,10),Te=parseInt(Ie.borderTopWidth,10),vt=parseInt(Ie.borderRightWidth,10),st=parseInt(Ie.borderBottomWidth,10);let Et=0,Pt=0;const ke="offsetWidth"in Be?Be.offsetWidth-Be.clientWidth-ze-vt:0,Oe="offsetHeight"in Be?Be.offsetHeight-Be.clientHeight-Te-st:0,we="offsetWidth"in Be?Be.offsetWidth===0?0:Se/Be.offsetWidth:0,Ye="offsetHeight"in Be?Be.offsetHeight===0?0:Fe/Be.offsetHeight:0;if(y===Be)Et=Kw(z,z+P,P,Te,st,z+ve,z+ve+Q,Q),Pt=s==="start"?ye:s==="center"?ye-I/2:s==="end"?ye-I:Kw(K,K+I,I,ze,vt,K+ye,K+ye+V,V),Et=Math.max(0,Et+z),Pt=Math.max(0,Pt+K);else{Et=Kw(qe,ht,Fe,Te,st+Oe,ve,ve+Q,Q),Pt=s==="start"?ye-De-ze:s==="center"?ye-(De+Se/2)+ke/2:s==="end"?ye-ut+vt+ke:Kw(De,ut,Se,ze,vt+ke,ye,ye+V,V);const{scrollLeft:ft,scrollTop:dt}=Be;Et=Ye===0?0:Math.max(0,Math.min(dt+Et/Ye,Be.scrollHeight-Fe/Ye+Oe)),Pt=we===0?0:Math.max(0,Math.min(ft+Pt/we,Be.scrollWidth-Se/we+ke)),ve+=dt-Et,ye+=ft-Pt}Ee.push({el:Be,top:Et,left:Pt})}return Ee};var b2=function(){return b2=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},b2.apply(this,arguments)};var UIe=0;function coe(){}function KIe(n,e){if(n){var t=LIe(n,{boundary:e});t.forEach(function(i){var r=i.el,o=i.top,s=i.left;r.scrollTop=o,r.scrollLeft=s})}}function TQ(n,e,t){var i=n===e||e instanceof t.Node&&n.contains&&n.contains(e);return i}function Aoe(n,e){var t;function i(){t&&clearTimeout(t)}function r(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];i(),t=setTimeout(function(){t=null,n.apply(void 0,s)},e)}return r.cancel=i,r}function g1(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return e.some(function(a){return a&&a.apply(void 0,[i].concat(o)),i.preventDownshiftDefault||i.hasOwnProperty("nativeEvent")&&i.nativeEvent.preventDownshiftDefault})}}function Fw(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){e.forEach(function(r){typeof r=="function"?r(i):r&&(r.current=i)})}}function FIe(){return String(UIe++)}function NR(n,e){return!n||!e?n:Object.keys(n).reduce(function(t,i){return t[i]=hoe(e,i)?e[i]:n[i],t},{})}function hoe(n,e){return n[e]!==void 0}function zIe(n){var e=n.key,t=n.keyCode;return t>=37&&t<=40&&e.indexOf("Arrow")!==0?"Arrow"+e:e}function zw(n,e,t,i,r){var o=t.length;if(o===0)return-1;var s=o-1;(typeof n!="number"||n<0||n>s)&&(n=e>0?-1:s+1);var a=n+e;a<0?a=s:a>s&&(a=0);var c=JE(a,e<0,t,i,r);return c===-1?n>=o?-1:n:c}function JE(n,e,t,i,r){r===void 0&&(r=!1);var o=t.length;if(e){for(var s=n;s>=0;s--)if(!i(t[s],s))return s}else for(var a=n;a<o;a++)if(!i(t[a],a))return a;return r?JE(e?o-1:0,e,t,i):-1}function kQ(n,e,t,i){return i===void 0&&(i=!0),t&&e.some(function(r){return r&&(TQ(r,n,t)||i&&TQ(r,t.document.activeElement,t))})}var jIe=Aoe(function(n){doe(n).textContent=""},500);function doe(n){var e=n.getElementById("a11y-status-message");return e||(e=n.createElement("div"),e.setAttribute("id","a11y-status-message"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-relevant","additions text"),Object.assign(e.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),n.body.appendChild(e),e)}function NIe(n,e){if(!(!n||!e)){var t=doe(e);t.textContent=n,jIe(e)}}function GIe(n){var e=n?.getElementById("a11y-status-message");e&&e.remove()}var foe={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function WIe(n,e,t){var i=n.props,r=n.type,o={};Object.keys(e).forEach(function(s){QIe(s,n,e,t),t[s]!==e[s]&&(o[s]=t[s])}),i.onStateChange&&Object.keys(o).length&&i.onStateChange(al({type:r},o))}function QIe(n,e,t,i){var r=e.props,o=e.type,s="on"+XU(n)+"Change";r[s]&&i[n]!==void 0&&i[n]!==t[n]&&r[s](al({type:o},i))}function qIe(n,e){return e.changes}var DQ=Aoe(function(n,e){NIe(n,e)},200),YIe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?yt.useLayoutEffect:yt.useEffect,VIe="useId"in On?function(e){var t=e.id,i=e.labelId,r=e.menuId,o=e.getItemId,s=e.toggleButtonId,a=e.inputId,c="downshift-"+On.useId();t||(t=c);var f=yt.useRef({labelId:i||t+"-label",menuId:r||t+"-menu",getItemId:o||function(y){return t+"-item-"+y},toggleButtonId:s||t+"-toggle-button",inputId:a||t+"-input"});return f.current}:function(e){var t=e.id,i=t===void 0?"downshift-"+FIe():t,r=e.labelId,o=e.menuId,s=e.getItemId,a=e.toggleButtonId,c=e.inputId,f=yt.useRef({labelId:r||i+"-label",menuId:o||i+"-menu",getItemId:s||function(y){return i+"-item-"+y},toggleButtonId:a||i+"-toggle-button",inputId:c||i+"-input"});return f.current};function $Ie(n,e,t,i){var r,o;if(n===void 0){if(e===void 0)throw new Error(i);r=t[e],o=e}else o=e===void 0?t.indexOf(n):e,r=n;return[r,o]}function XU(n){return""+n.slice(0,1).toUpperCase()+n.slice(1)}function poe(n){var e=yt.useRef(n);return e.current=n,e}function HIe(n,e,t,i){var r=yt.useRef(),o=yt.useRef(),s=yt.useCallback(function(I,P){o.current=P,I=NR(I,P.props);var K=n(I,P),z=P.props.stateReducer(I,al({},P,{changes:K}));return z},[n]),a=yt.useReducer(s,e,t),c=a[0],f=a[1],y=poe(e),_=yt.useCallback(function(I){return f(al({props:y.current},I))},[y]),E=o.current;return yt.useEffect(function(){var I=NR(r.current,E?.props),P=E&&r.current&&!i(I,c);P&&WIe(E,I,c),r.current=c},[c,E,i]),[c,_]}var _4={itemToString:function(e){return e?String(e):""},itemToKey:function(e){return e},stateReducer:qIe,scrollIntoView:KIe,environment:typeof window>"u"?void 0:window};function Cv(n,e,t){t===void 0&&(t=foe);var i=n["default"+XU(e)];return i!==void 0?i:t[e]}function x4(n,e,t){t===void 0&&(t=foe);var i=n[e];if(i!==void 0)return i;var r=n["initial"+XU(e)];return r!==void 0?r:Cv(n,e,t)}function ZIe(n){var e=x4(n,"selectedItem"),t=x4(n,"isOpen"),i=i7e(n),r=x4(n,"inputValue");return{highlightedIndex:i<0&&e&&t?n.items.findIndex(function(o){return n.itemToKey(o)===n.itemToKey(e)}):i,isOpen:t,selectedItem:e,inputValue:r}}function M4(n,e,t){var i=n.items,r=n.initialHighlightedIndex,o=n.defaultHighlightedIndex,s=n.isItemDisabled,a=n.itemToKey,c=e.selectedItem,f=e.highlightedIndex;return i.length===0?-1:r!==void 0&&f===r&&!s(i[r],r)?r:o!==void 0&&!s(i[o],o)?o:c?i.findIndex(function(y){return a(c)===a(y)}):t<0&&!s(i[i.length-1],i.length-1)?i.length-1:t>0&&!s(i[0],0)?0:-1}function XIe(n,e,t){var i=yt.useRef({isMouseDown:!1,isTouchMove:!1,isTouchEnd:!1});return yt.useEffect(function(){if(!n)return coe;var r=t.map(function(y){return y.current});function o(){i.current.isTouchEnd=!1,i.current.isMouseDown=!0}function s(y){i.current.isMouseDown=!1,kQ(y.target,r,n)||e()}function a(){i.current.isTouchEnd=!1,i.current.isTouchMove=!1}function c(){i.current.isTouchMove=!0}function f(y){i.current.isTouchEnd=!0,!i.current.isTouchMove&&!kQ(y.target,r,n,!1)&&e()}return n.addEventListener("mousedown",o),n.addEventListener("mouseup",s),n.addEventListener("touchstart",a),n.addEventListener("touchmove",c),n.addEventListener("touchend",f),function(){n.removeEventListener("mousedown",o),n.removeEventListener("mouseup",s),n.removeEventListener("touchstart",a),n.removeEventListener("touchmove",c),n.removeEventListener("touchend",f)}},[t,n,e]),i.current}var JIe=function(){return coe};function e7e(n,e,t,i){i===void 0&&(i={});var r=i.document,o=JU();yt.useEffect(function(){if(!(!n||o||!r)){var s=n(e);DQ(s,r)}},t),yt.useEffect(function(){return function(){DQ.cancel(),GIe(r)}},[r])}function t7e(n){var e=n.highlightedIndex,t=n.isOpen,i=n.itemRefs,r=n.getItemNodeFromIndex,o=n.menuElement,s=n.scrollIntoView,a=yt.useRef(!0);return YIe(function(){e<0||!t||!Object.keys(i.current).length||(a.current===!1?a.current=!0:s(r(e),o))},[e]),a}function RQ(n,e,t){var i;t===void 0&&(t=!0);var r=((i=n.items)==null?void 0:i.length)&&e>=0;return al({isOpen:!1,highlightedIndex:-1},r&&al({selectedItem:n.items[e],isOpen:Cv(n,"isOpen"),highlightedIndex:Cv(n,"highlightedIndex")},t&&{inputValue:n.itemToString(n.items[e])}))}function n7e(n,e){return n.isOpen===e.isOpen&&n.inputValue===e.inputValue&&n.highlightedIndex===e.highlightedIndex&&n.selectedItem===e.selectedItem}function JU(){var n=On.useRef(!0);return On.useEffect(function(){return n.current=!1,function(){n.current=!0}},[]),n.current}function GR(n){var e=Cv(n,"highlightedIndex");return e>-1&&n.isItemDisabled(n.items[e],e)?-1:e}function i7e(n){var e=x4(n,"highlightedIndex");return e>-1&&n.isItemDisabled(n.items[e],e)?-1:e}var MS={environment:Xi.shape({addEventListener:Xi.func.isRequired,removeEventListener:Xi.func.isRequired,document:Xi.shape({createElement:Xi.func.isRequired,getElementById:Xi.func.isRequired,activeElement:Xi.any.isRequired,body:Xi.any.isRequired}).isRequired,Node:Xi.func.isRequired}),itemToString:Xi.func,itemToKey:Xi.func,stateReducer:Xi.func},moe=al({},MS,{getA11yStatusMessage:Xi.func,highlightedIndex:Xi.number,defaultHighlightedIndex:Xi.number,initialHighlightedIndex:Xi.number,isOpen:Xi.bool,defaultIsOpen:Xi.bool,initialIsOpen:Xi.bool,selectedItem:Xi.any,initialSelectedItem:Xi.any,defaultSelectedItem:Xi.any,id:Xi.string,labelId:Xi.string,menuId:Xi.string,getItemId:Xi.func,toggleButtonId:Xi.string,onSelectedItemChange:Xi.func,onHighlightedIndexChange:Xi.func,onStateChange:Xi.func,onIsOpenChange:Xi.func,scrollIntoView:Xi.func});function r7e(n,e,t){var i=e.type,r=e.props,o;switch(i){case t.ItemMouseMove:o={highlightedIndex:e.disabled?-1:e.index};break;case t.MenuMouseLeave:o={highlightedIndex:-1};break;case t.ToggleButtonClick:case t.FunctionToggleMenu:o={isOpen:!n.isOpen,highlightedIndex:n.isOpen?-1:M4(r,n,0)};break;case t.FunctionOpenMenu:o={isOpen:!0,highlightedIndex:M4(r,n,0)};break;case t.FunctionCloseMenu:o={isOpen:!1};break;case t.FunctionSetHighlightedIndex:o={highlightedIndex:r.isItemDisabled(r.items[e.highlightedIndex],e.highlightedIndex)?-1:e.highlightedIndex};break;case t.FunctionSetInputValue:o={inputValue:e.inputValue};break;case t.FunctionReset:o={highlightedIndex:GR(r),isOpen:Cv(r,"isOpen"),selectedItem:Cv(r,"selectedItem"),inputValue:Cv(r,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return al({},n,o)}b2(b2({},moe),{items:Xi.array.isRequired,isItemDisabled:Xi.func});b2(b2({},_4),{isItemDisabled:function(){return!1}});var eK=0,tK=1,nK=2,iK=3,rK=4,oK=5,sK=6,aK=7,lK=8,e6=9,uK=10,goe=11,yoe=12,cK=13,voe=14,boe=15,Coe=16,_oe=17,xoe=18,AK=19,Moe=20,woe=21,hK=22,Soe=Object.freeze({__proto__:null,ControlledPropUpdatedSelectedItem:hK,FunctionCloseMenu:_oe,FunctionOpenMenu:Coe,FunctionReset:woe,FunctionSelectItem:AK,FunctionSetHighlightedIndex:xoe,FunctionSetInputValue:Moe,FunctionToggleMenu:boe,InputBlur:e6,InputChange:lK,InputClick:uK,InputKeyDownArrowDown:eK,InputKeyDownArrowUp:tK,InputKeyDownEnd:rK,InputKeyDownEnter:aK,InputKeyDownEscape:nK,InputKeyDownHome:iK,InputKeyDownPageDown:sK,InputKeyDownPageUp:oK,ItemClick:cK,ItemMouseMove:yoe,MenuMouseLeave:goe,ToggleButtonClick:voe});function o7e(n){var e=ZIe(n),t=e.selectedItem,i=e.inputValue;return i===""&&t&&n.defaultInputValue===void 0&&n.initialInputValue===void 0&&n.inputValue===void 0&&(i=n.itemToString(t)),al({},e,{inputValue:i})}al({},moe,{items:Xi.array.isRequired,isItemDisabled:Xi.func,inputValue:Xi.string,defaultInputValue:Xi.string,initialInputValue:Xi.string,inputId:Xi.string,onInputValueChange:Xi.func});function s7e(n,e,t,i){var r=yt.useRef(),o=HIe(n,e,t,i),s=o[0],a=o[1],c=JU();return yt.useEffect(function(){if(hoe(e,"selectedItem")){if(!c){var f=e.itemToKey(e.selectedItem)!==e.itemToKey(r.current);f&&a({type:hK,inputValue:e.itemToString(e.selectedItem)})}r.current=s.selectedItem===r.current?e.selectedItem:s.selectedItem}},[s.selectedItem,e.selectedItem]),[NR(s,e),a]}var a7e=al({},_4,{isItemDisabled:function(){return!1}});function l7e(n,e){var t,i=e.type,r=e.props,o=e.altKey,s;switch(i){case cK:s={isOpen:Cv(r,"isOpen"),highlightedIndex:GR(r),selectedItem:r.items[e.index],inputValue:r.itemToString(r.items[e.index])};break;case eK:n.isOpen?s={highlightedIndex:zw(n.highlightedIndex,1,r.items,r.isItemDisabled,!0)}:s={highlightedIndex:o&&n.selectedItem==null?-1:M4(r,n,1),isOpen:r.items.length>=0};break;case tK:n.isOpen?o?s=RQ(r,n.highlightedIndex):s={highlightedIndex:zw(n.highlightedIndex,-1,r.items,r.isItemDisabled,!0)}:s={highlightedIndex:M4(r,n,-1),isOpen:r.items.length>=0};break;case aK:s=RQ(r,n.highlightedIndex);break;case nK:s=al({isOpen:!1,highlightedIndex:-1},!n.isOpen&&{selectedItem:null,inputValue:""});break;case oK:s={highlightedIndex:zw(n.highlightedIndex,-10,r.items,r.isItemDisabled,!0)};break;case sK:s={highlightedIndex:zw(n.highlightedIndex,10,r.items,r.isItemDisabled,!0)};break;case iK:s={highlightedIndex:JE(0,!1,r.items,r.isItemDisabled)};break;case rK:s={highlightedIndex:JE(r.items.length-1,!0,r.items,r.isItemDisabled)};break;case e6:s=al({isOpen:!1,highlightedIndex:-1},n.highlightedIndex>=0&&((t=r.items)==null?void 0:t.length)&&e.selectItem&&{selectedItem:r.items[n.highlightedIndex],inputValue:r.itemToString(r.items[n.highlightedIndex])});break;case lK:s={isOpen:!0,highlightedIndex:GR(r),inputValue:e.inputValue};break;case uK:s={isOpen:!n.isOpen,highlightedIndex:n.isOpen?-1:M4(r,n,0)};break;case AK:s={selectedItem:e.selectedItem,inputValue:r.itemToString(e.selectedItem)};break;case hK:s={inputValue:e.inputValue};break;default:return r7e(n,e,Soe)}return al({},n,s)}var u7e=["onMouseLeave","refKey","ref"],c7e=["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"],A7e=["onClick","onPress","refKey","ref"],h7e=["onKeyDown","onChange","onInput","onBlur","onChangeText","onClick","refKey","ref"];WR.stateChangeTypes=Soe;function WR(n){n===void 0&&(n={});var e=al({},a7e,n),t=e.items,i=e.scrollIntoView,r=e.environment,o=e.getA11yStatusMessage,s=s7e(l7e,e,o7e,n7e),a=s[0],c=s[1],f=a.isOpen,y=a.highlightedIndex,_=a.selectedItem,E=a.inputValue,I=yt.useRef(null),P=yt.useRef({}),K=yt.useRef(null),z=yt.useRef(null),Q=JU(),V=VIe(e),$=yt.useRef(),Z=poe({state:a,props:e}),ee=yt.useCallback(function(ze){return P.current[V.getItemId(ze)]},[V]);e7e(o,a,[f,y,_,E],r);var X=t7e({menuElement:I.current,highlightedIndex:y,isOpen:f,itemRefs:P,scrollIntoView:i,getItemNodeFromIndex:ee});yt.useEffect(function(){var ze=x4(e,"isOpen");ze&&K.current&&K.current.focus()},[]),yt.useEffect(function(){Q||($.current=t.length)});var W=XIe(r,yt.useCallback(function(){Z.current.state.isOpen&&c({type:e6,selectItem:!1})},[c,Z]),yt.useMemo(function(){return[I,z,K]},[I.current,z.current,K.current])),se=JIe();yt.useEffect(function(){f||(P.current={})},[f]),yt.useEffect(function(){var ze;!f||!(r!=null&&r.document)||!(K!=null&&(ze=K.current)!=null&&ze.focus)||r.document.activeElement!==K.current&&K.current.focus()},[f,r]);var ue=yt.useMemo(function(){return{ArrowDown:function(Te){Te.preventDefault(),c({type:eK,altKey:Te.altKey})},ArrowUp:function(Te){Te.preventDefault(),c({type:tK,altKey:Te.altKey})},Home:function(Te){Z.current.state.isOpen&&(Te.preventDefault(),c({type:iK}))},End:function(Te){Z.current.state.isOpen&&(Te.preventDefault(),c({type:rK}))},Escape:function(Te){var vt=Z.current.state;(vt.isOpen||vt.inputValue||vt.selectedItem||vt.highlightedIndex>-1)&&(Te.preventDefault(),c({type:nK}))},Enter:function(Te){var vt=Z.current.state;!vt.isOpen||Te.which===229||(Te.preventDefault(),c({type:aK}))},PageUp:function(Te){Z.current.state.isOpen&&(Te.preventDefault(),c({type:oK}))},PageDown:function(Te){Z.current.state.isOpen&&(Te.preventDefault(),c({type:sK}))}}},[c,Z]),ve=yt.useCallback(function(ze){return al({id:V.labelId,htmlFor:V.inputId},ze)},[V]),ye=yt.useCallback(function(ze,Te){var vt,st=ze===void 0?{}:ze,Et=st.onMouseLeave,Pt=st.refKey,ke=Pt===void 0?"ref":Pt,Oe=st.ref,we=Lw(st,u7e),Ye=Te===void 0?{}:Te;return Ye.suppressRefError,al((vt={},vt[ke]=Fw(Oe,function(ft){I.current=ft}),vt.id=V.menuId,vt.role="listbox",vt["aria-labelledby"]=we&&we["aria-label"]?void 0:""+V.labelId,vt.onMouseLeave=g1(Et,function(){c({type:goe})}),vt),we)},[c,se,V]),Ee=yt.useCallback(function(ze){var Te,vt,st=ze===void 0?{}:ze,Et=st.item,Pt=st.index,ke=st.refKey,Oe=ke===void 0?"ref":ke,we=st.ref,Ye=st.onMouseMove,ft=st.onMouseDown,dt=st.onClick;st.onPress;var gt=st.disabled,Lt=Lw(st,c7e);gt!==void 0&&console.warn('Passing "disabled" as an argument to getItemProps is not supported anymore. Please use the isItemDisabled prop from useCombobox.');var Tt=Z.current,Zt=Tt.props,Fn=Tt.state,Ln=$Ie(Et,Pt,Zt.items,"Pass either item or index to getItemProps!"),fi=Ln[0],Rn=Ln[1],Dn=Zt.isItemDisabled(fi,Rn),wn="onClick",qn=dt,En=function(){W.isTouchEnd||Rn===Fn.highlightedIndex||(X.current=!1,c({type:yoe,index:Rn,disabled:Dn}))},wt=function(){c({type:cK,index:Rn})},be=function(ce){return ce.preventDefault()};return al((Te={},Te[Oe]=Fw(we,function(re){re&&(P.current[V.getItemId(Rn)]=re)}),Te["aria-disabled"]=Dn,Te["aria-selected"]=Rn===Fn.highlightedIndex,Te.id=V.getItemId(Rn),Te.role="option",Te),!Dn&&(vt={},vt[wn]=g1(qn,wt),vt),{onMouseMove:g1(Ye,En),onMouseDown:g1(ft,be)},Lt)},[c,V,Z,W,X]),_e=yt.useCallback(function(ze){var Te,vt=ze===void 0?{}:ze,st=vt.onClick;vt.onPress;var Et=vt.refKey,Pt=Et===void 0?"ref":Et,ke=vt.ref,Oe=Lw(vt,A7e),we=Z.current.state,Ye=function(){c({type:voe})};return al((Te={},Te[Pt]=Fw(ke,function(ft){z.current=ft}),Te["aria-controls"]=V.menuId,Te["aria-expanded"]=we.isOpen,Te.id=V.toggleButtonId,Te.tabIndex=-1,Te),!Oe.disabled&&al({},{onClick:g1(st,Ye)}),Oe)},[c,Z,V]),Be=yt.useCallback(function(ze,Te){var vt,st=ze===void 0?{}:ze,Et=st.onKeyDown,Pt=st.onChange,ke=st.onInput,Oe=st.onBlur;st.onChangeText;var we=st.onClick,Ye=st.refKey,ft=Ye===void 0?"ref":Ye,dt=st.ref,gt=Lw(st,h7e),Lt=Te===void 0?{}:Te;Lt.suppressRefError;var Tt=Z.current.state,Zt=function(En){var wt=zIe(En);wt&&ue[wt]&&ue[wt](En)},Fn=function(En){c({type:lK,inputValue:En.target.value})},Ln=function(En){if(r!=null&&r.document&&Tt.isOpen&&!W.isMouseDown){var wt=En.relatedTarget===null&&r.document.activeElement!==r.document.body;c({type:e6,selectItem:!wt})}},fi=function(){c({type:uK})},Rn="onChange",Dn={};if(!gt.disabled){var wn;Dn=(wn={},wn[Rn]=g1(Pt,ke,Fn),wn.onKeyDown=g1(Et,Zt),wn.onBlur=g1(Oe,Ln),wn.onClick=g1(we,fi),wn)}return al((vt={},vt[ft]=Fw(dt,function(qn){K.current=qn}),vt["aria-activedescendant"]=Tt.isOpen&&Tt.highlightedIndex>-1?V.getItemId(Tt.highlightedIndex):"",vt["aria-autocomplete"]="list",vt["aria-controls"]=V.menuId,vt["aria-expanded"]=Tt.isOpen,vt["aria-labelledby"]=gt&&gt["aria-label"]?void 0:V.labelId,vt.autoComplete="off",vt.id=V.inputId,vt.role="combobox",vt.value=Tt.inputValue,vt),Dn,gt)},[c,V,r,ue,Z,W,se]),Fe=yt.useCallback(function(){c({type:boe})},[c]),Se=yt.useCallback(function(){c({type:_oe})},[c]),qe=yt.useCallback(function(){c({type:Coe})},[c]),ut=yt.useCallback(function(ze){c({type:xoe,highlightedIndex:ze})},[c]),ht=yt.useCallback(function(ze){c({type:AK,selectedItem:ze})},[c]),De=yt.useCallback(function(ze){c({type:Moe,inputValue:ze})},[c]),Ie=yt.useCallback(function(){c({type:woe})},[c]);return{getItemProps:Ee,getLabelProps:ve,getMenuProps:ye,getInputProps:Be,getToggleButtonProps:_e,toggleMenu:Fe,openMenu:qe,closeMenu:Se,setHighlightedIndex:ut,setInputValue:De,selectItem:ht,reset:Ie,highlightedIndex:y,isOpen:f,selectedItem:_,inputValue:E}}MS.stateReducer,MS.itemToKey,MS.environment,Xi.array,Xi.array,Xi.array,Xi.func,Xi.number,Xi.number,Xi.number,Xi.func,Xi.func,Xi.string,Xi.string;_4.itemToKey,_4.stateReducer,_4.environment;function ei(){var n="/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",e="73020a5a2032027cc342d42db613082f6da43a81",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:22}},1:{start:{line:13,column:28},end:{line:13,column:55}},2:{start:{line:14,column:18},end:{line:14,column:36}},3:{start:{line:15,column:36},end:{line:15,column:62}},4:{start:{line:16,column:24},end:{line:19,column:22}},5:{start:{line:17,column:15},end:{line:17,column:34}},6:{start:{line:18,column:4},end:{line:18,column:72}},7:{start:{line:18,column:36},end:{line:18,column:70}},8:{start:{line:20,column:24},end:{line:25,column:8}},9:{start:{line:21,column:4},end:{line:24,column:5}},10:{start:{line:22,column:20},end:{line:22,column:84}},11:{start:{line:23,column:6},end:{line:23,column:48}},12:{start:{line:33,column:6},end:{line:55,column:4}},13:{start:{line:36,column:28},end:{line:36,column:47}},14:{start:{line:38,column:6},end:{line:40,column:7}},15:{start:{line:39,column:8},end:{line:39,column:51}},16:{start:{line:41,column:6},end:{line:41,column:28}},17:{start:{line:44,column:16},end:{line:44,column:51}},18:{start:{line:45,column:6},end:{line:45,column:18}},19:{start:{line:46,column:6},end:{line:46,column:56}},20:{start:{line:49,column:6},end:{line:53,column:7}},21:{start:{line:50,column:8},end:{line:50,column:20}},22:{start:{line:51,column:8},end:{line:51,column:40}},23:{start:{line:52,column:8},end:{line:52,column:19}},24:{start:{line:56,column:2},end:{line:60,column:30}},25:{start:{line:57,column:4},end:{line:59,column:5}},26:{start:{line:58,column:6},end:{line:58,column:22}},27:{start:{line:61,column:2},end:{line:64,column:22}},28:{start:{line:62,column:4},end:{line:62,column:53}},29:{start:{line:63,column:4},end:{line:63,column:69}},30:{start:{line:63,column:17},end:{line:63,column:68}},31:{start:{line:65,column:2},end:{line:67,column:14}},32:{start:{line:66,column:4},end:{line:66,column:26}},33:{start:{line:68,column:2},end:{line:103,column:7}},34:{start:{line:76,column:25},end:{line:76,column:35}},35:{start:{line:87,column:79},end:{line:100,column:9}}},fnMap:{0:{name:"InputAutocomplete",decl:{start:{line:6,column:24},end:{line:6,column:41}},loc:{start:{line:12,column:3},end:{line:104,column:1}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:9,column:13},end:{line:9,column:14}},loc:{start:{line:9,column:19},end:{line:10,column:3}},line:9},2:{name:"(anonymous_2)",decl:{start:{line:16,column:38},end:{line:16,column:39}},loc:{start:{line:16,column:44},end:{line:19,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:18,column:26},end:{line:18,column:27}},loc:{start:{line:18,column:36},end:{line:18,column:70}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:20,column:42},end:{line:20,column:43}},loc:{start:{line:20,column:48},end:{line:25,column:3}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:36,column:18},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:36,column:47}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:18},end:{line:37,column:19}},loc:{start:{line:37,column:38},end:{line:42,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:43,column:26},end:{line:43,column:27}},loc:{start:{line:43,column:48},end:{line:47,column:5}},line:43},8:{name:"(anonymous_8)",decl:{start:{line:48,column:24},end:{line:48,column:25}},loc:{start:{line:48,column:47},end:{line:54,column:5}},line:48},9:{name:"(anonymous_9)",decl:{start:{line:56,column:18},end:{line:56,column:19}},loc:{start:{line:56,column:24},end:{line:60,column:3}},line:56},10:{name:"(anonymous_10)",decl:{start:{line:61,column:18},end:{line:61,column:19}},loc:{start:{line:61,column:24},end:{line:64,column:3}},line:61},11:{name:"(anonymous_11)",decl:{start:{line:63,column:11},end:{line:63,column:12}},loc:{start:{line:63,column:17},end:{line:63,column:68}},line:63},12:{name:"(anonymous_12)",decl:{start:{line:65,column:18},end:{line:65,column:19}},loc:{start:{line:65,column:24},end:{line:67,column:3}},line:65},13:{name:"(anonymous_13)",decl:{start:{line:76,column:19},end:{line:76,column:20}},loc:{start:{line:76,column:25},end:{line:76,column:35}},line:76},14:{name:"(anonymous_14)",decl:{start:{line:87,column:46},end:{line:87,column:47}},loc:{start:{line:87,column:79},end:{line:100,column:9}},line:87}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:14}},type:"default-arg",locations:[{start:{line:8,column:12},end:{line:8,column:14}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:10,column:3}},type:"default-arg",locations:[{start:{line:9,column:13},end:{line:10,column:3}}],line:9},2:{loc:{start:{line:13,column:43},end:{line:13,column:54}},type:"binary-expr",locations:[{start:{line:13,column:43},end:{line:13,column:48}},{start:{line:13,column:52},end:{line:13,column:54}}],line:13},3:{loc:{start:{line:21,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:21,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},4:{loc:{start:{line:36,column:28},end:{line:36,column:47}},type:"cond-expr",locations:[{start:{line:36,column:35},end:{line:36,column:42}},{start:{line:36,column:45},end:{line:36,column:47}}],line:36},5:{loc:{start:{line:38,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:38,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},6:{loc:{start:{line:44,column:16},end:{line:44,column:51}},type:"cond-expr",locations:[{start:{line:44,column:31},end:{line:44,column:46}},{start:{line:44,column:49},end:{line:44,column:51}}],line:44},7:{loc:{start:{line:46,column:15},end:{line:46,column:54}},type:"cond-expr",locations:[{start:{line:46,column:30},end:{line:46,column:45}},{start:{line:46,column:48},end:{line:46,column:54}}],line:46},8:{loc:{start:{line:49,column:6},end:{line:53,column:7}},type:"if",locations:[{start:{line:49,column:6},end:{line:53,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},9:{loc:{start:{line:51,column:17},end:{line:51,column:38}},type:"cond-expr",locations:[{start:{line:51,column:28},end:{line:51,column:34}},{start:{line:51,column:37},end:{line:51,column:38}}],line:51},10:{loc:{start:{line:57,column:4},end:{line:59,column:5}},type:"if",locations:[{start:{line:57,column:4},end:{line:59,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:66,column:13},end:{line:66,column:24}},type:"binary-expr",locations:[{start:{line:66,column:13},end:{line:66,column:18}},{start:{line:66,column:22},end:{line:66,column:24}}],line:66},12:{loc:{start:{line:87,column:18},end:{line:100,column:10}},type:"binary-expr",locations:[{start:{line:87,column:18},end:{line:87,column:24}},{start:{line:87,column:28},end:{line:100,column:10}}],line:87}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0],1:[0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx"],names:[],mappings:"AAkFI,SACE,KADF;AAlFJ,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,mBAAkB;AAE1B,MAAM,aAAa;AASnB,wBAAwB,kBAAkB;AAAA,EACxC;AAAA,EACA,UAAU,CAAC;AAAA,EACX,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,cAAc;AAChB,GAA2B;AACzB,QAAM,CAAC,OAAO,QAAQ,IAAI,MAAM,SAAS,SAAS,EAAE;AACpD,QAAM,UAAU,MAAM,OAAuB,IAAI;AACjD,QAAM,CAAC,WAAW,YAAY,IAAI,MAAM,SAAS,UAAU;AAE3D,QAAM,gBAAgB,MAAM,QAAQ,MAAM;AACxC,UAAM,KAAK,MAAM,YAAY;AAC7B,WAAO,QAAQ,OAAO,CAAC,SAAS,KAAK,CAAC,EAAE,YAAY,EAAE,SAAS,EAAE,CAAC;AAAA,EACpE,GAAG,CAAC,SAAS,KAAK,CAAC;AAEnB,QAAM,gBAAgB,MAAM,YAAY,MAAM;AAC5C,QAAI,QAAQ,SAAS;AACnB,YAAM,QAAQ,OAAO,cAAc,QAAQ,QAAQ,sBAAsB,EAAE;AAC3E,mBAAa,KAAK,IAAI,OAAO,UAAU,CAAC;AAAA,IAC1C;AAAA,EACF,GAAG,CAAC,CAAC;AAEL,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI,YAAY;AAAA,IACd,OAAO;AAAA,IACP,YAAY;AAAA,IACZ,cAAc,CAAC,SAAU,OAAO,KAAK,CAAC,IAAI;AAAA,IAC1C,cAAc,CAAC,QAAQ,WAAW;AAChC,UAAI,OAAO,SAAS,YAAY,iBAAiB,YAAY;AAC3D,eAAO,EAAC,GAAG,OAAO,SAAS,QAAQ,KAAI;AAAA,MACzC;AACA,aAAO,OAAO;AAAA,IAChB;AAAA,IACA,sBAAsB,CAAC,EAAC,aAAY,MAAM;AACxC,YAAM,IAAI,eAAe,aAAa,CAAC,IAAI;AAC3C,eAAS,CAAC;AACV,eAAS,eAAe,aAAa,CAAC,IAAI,MAAS;AAAA,IACrD;AAAA,IACA,oBAAoB,CAAC,EAAC,YAAY,EAAC,MAAM;AACvC,UAAI,OAAO,MAAM,UAAU;AACzB,iBAAS,CAAC;AACV,iBAAS,MAAM,KAAK,SAAY,CAAC;AACjC,iBAAS;AAAA,MACX;AAAA,IACF;AAAA,EACF,CAAC;AAED,QAAM,UAAU,MAAM;AACpB,QAAI,QAAQ;AACV,oBAAc;AAAA,IAChB;AAAA,EACF,GAAG,CAAC,QAAQ,aAAa,CAAC;AAE1B,QAAM,UAAU,MAAM;AACpB,WAAO,iBAAiB,UAAU,aAAa;AAC/C,WAAO,MAAM,OAAO,oBAAoB,UAAU,aAAa;AAAA,EACjE,GAAG,CAAC,aAAa,CAAC;AAElB,QAAM,UAAU,MAAM;AACpB,aAAS,SAAS,EAAE;AAAA,EACtB,GAAG,CAAC,KAAK,CAAC;AAEV,SACE,qBAAC,SAAI,WAAU,yBACb;AAAA;AAAA,MAAC;AAAA;AAAA,QACE,GAAG,cAAc;AAAA,UAChB,cAAc;AAAA,UACd,WAAW;AAAA,UACX,YAAY;AAAA,UACZ,SAAS,MAAM,SAAS;AAAA,QAC1B,CAAC;AAAA;AAAA,IACH;AAAA,IACA;AAAA,MAAC;AAAA;AAAA,QACE,GAAG,aAAa,CAAC,GAAG,EAAC,kBAAkB,KAAI,CAAC;AAAA,QAC7C,KAAK;AAAA,QACL,OAAO,EAAC,UAAU,SAAS,UAAU,QAAQ,WAAW,QAAQ,IAAG;AAAA,QACnE,WAAU;AAAA,QAET,oBACC,cAAc,IAAI,CAAC,MAAM,UACvB;AAAA,UAAC;AAAA;AAAA,YAEE,GAAG,aAAa;AAAA,cACf;AAAA,cACA;AAAA,cACA,WAAW,WAAW,mCAAmC;AAAA,gBACvD,4CAA4C,qBAAqB;AAAA,cACnE,CAAC;AAAA,YACH,CAAC;AAAA,YAEA,eAAK,CAAC;AAAA;AAAA,UATF,KAAK,CAAC;AAAA,QAUb,CACD;AAAA;AAAA,IACL;AAAA,KACF;AAEJ;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"73020a5a2032027cc342d42db613082f6da43a81"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ei=function(){return s},s}ei();const PQ=(ei().s[0]++,140);function _5({value:n,options:e=(ei().b[0][0]++,[]),onChange:t=(ei().b[1][0]++,()=>{ei().f[1]++}),"aria-label":i}){ei().f[0]++;const[r,o]=(ei().s[1]++,On.useState((ei().b[2][0]++,n||(ei().b[2][1]++,"")))),s=(ei().s[2]++,On.useRef(null)),[a,c]=(ei().s[3]++,On.useState(PQ)),f=(ei().s[4]++,On.useMemo(()=>{ei().f[2]++;const Q=(ei().s[5]++,r.toLowerCase());return ei().s[6]++,e.filter(V=>(ei().f[3]++,ei().s[7]++,V[0].toLowerCase().includes(Q)))},[e,r])),y=(ei().s[8]++,On.useCallback(()=>{if(ei().f[4]++,ei().s[9]++,s.current){ei().b[3][0]++;const Q=(ei().s[10]++,window.innerHeight-s.current.getBoundingClientRect().top);ei().s[11]++,c(Math.min(Q,PQ))}else ei().b[3][1]++},[])),{isOpen:_,getMenuProps:E,getInputProps:I,getItemProps:P,highlightedIndex:K,openMenu:z}=(ei().s[12]++,WR({items:f,inputValue:r,itemToString:Q=>(ei().f[5]++,ei().s[13]++,Q?(ei().b[4][0]++,Q[0]):(ei().b[4][1]++,"")),stateReducer:(Q,V)=>(ei().f[6]++,ei().s[14]++,V.type===WR.stateChangeTypes.InputClick?(ei().b[5][0]++,ei().s[15]++,{...V.changes,isOpen:!0}):(ei().b[5][1]++,ei().s[16]++,V.changes)),onSelectedItemChange:({selectedItem:Q})=>{ei().f[7]++;const V=(ei().s[17]++,Q?(ei().b[6][0]++,Q[0]):(ei().b[6][1]++,""));ei().s[18]++,o(V),ei().s[19]++,t(Q?(ei().b[7][0]++,Q[0]):(ei().b[7][1]++,void 0))},onInputValueChange:({inputValue:Q})=>{ei().f[8]++,ei().s[20]++,typeof Q=="string"?(ei().b[8][0]++,ei().s[21]++,o(Q),ei().s[22]++,t(Q===""?(ei().b[9][0]++,void 0):(ei().b[9][1]++,Q)),ei().s[23]++,z()):ei().b[8][1]++}}));return ei().s[24]++,On.useEffect(()=>{ei().f[9]++,ei().s[25]++,_?(ei().b[10][0]++,ei().s[26]++,y()):ei().b[10][1]++},[_,y]),ei().s[27]++,On.useEffect(()=>(ei().f[10]++,ei().s[28]++,window.addEventListener("resize",y),ei().s[29]++,()=>(ei().f[11]++,ei().s[30]++,window.removeEventListener("resize",y))),[y]),ei().s[31]++,On.useEffect(()=>{ei().f[12]++,ei().s[32]++,o((ei().b[11][0]++,n||(ei().b[11][1]++,"")))},[n]),ei().s[33]++,te.jsxs("div",{className:"maputnik-autocomplete",children:[te.jsx("input",{...I({"aria-label":i,className:"maputnik-string",spellCheck:!1,onFocus:()=>(ei().f[13]++,ei().s[34]++,z())})}),te.jsx("div",{...E({},{suppressRefError:!0}),ref:s,style:{position:"fixed",overflow:"auto",maxHeight:a,zIndex:998},className:"maputnik-autocomplete-menu",children:(ei().b[12][0]++,_&&(ei().b[12][1]++,f.map((Q,V)=>(ei().f[14]++,ei().s[35]++,te.jsx("div",{...P({item:Q,index:V,className:x0("maputnik-autocomplete-menu-item",{"maputnik-autocomplete-menu-item-selected":K===V})}),children:Q[1]},Q[0])))))})]})}function _m(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",e="787db584cc9becf4089365283e16f9ba747f4840",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",statementMap:{0:{start:{line:6,column:28},end:{line:32,column:1}},1:{start:{line:15,column:2},end:{line:31,column:4}},2:{start:{line:27,column:43},end:{line:27,column:53}},3:{start:{line:33,column:20},end:{line:33,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:28},end:{line:6,column:29}},loc:{start:{line:14,column:6},end:{line:32,column:1}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:8,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:27,column:34},end:{line:27,column:35}},loc:{start:{line:27,column:43},end:{line:27,column:53}},line:27}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:8,column:3}},type:"default-arg",locations:[{start:{line:7,column:13},end:{line:8,column:3}}],line:7},1:{loc:{start:{line:9,column:2},end:{line:9,column:16}},type:"default-arg",locations:[{start:{line:9,column:14},end:{line:9,column:16}}],line:9}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0,2:0},b:{0:[0],1:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx"],names:[],mappings:"AA8BM;AA5BN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA+B,uBAAuB;AAUtD,MAAM,sBAA0D,CAAC;AAAA,EAC/D,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,YAAY,CAAC;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,QAAQ;AAAA,MACjB,WAAW,OAAO,MAAM;AAAA,MACxB;AAAA,MACA,eAAa;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC;AAAA,UACA;AAAA,UACA,SAAS,WAAW,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC;AAAA;AAAA,MAC7C;AAAA;AAAA,EACF;AAEJ;AAGA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"787db584cc9becf4089365283e16f9ba747f4840"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return _m=function(){return s},s}_m();_m().s[0]++;const d7e=({onChange:n=(_m().b[0][0]++,()=>{_m().f[1]++}),sourceIds:e=(_m().b[1][0]++,[]),wdKey:t,value:i,error:r,t:o})=>(_m().f[0]++,_m().s[1]++,te.jsx(as,{label:o("Source"),fieldSpec:Tr.layer.source,error:r,"data-wd-key":t,children:te.jsx(_5,{value:i,onChange:n,options:e?.map(s=>(_m().f[2]++,_m().s[2]++,[s,s]))})})),Eoe=(_m().s[3]++,Mo()(d7e));function xm(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",e="61cb059654b456e27f782356448ebd0362f3cb6a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",statementMap:{0:{start:{line:6,column:33},end:{line:31,column:1}},1:{start:{line:14,column:2},end:{line:30,column:4}},2:{start:{line:26,column:46},end:{line:26,column:52}},3:{start:{line:32,column:25},end:{line:32,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:33},end:{line:6,column:34}},loc:{start:{line:13,column:6},end:{line:31,column:1}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:8,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:26,column:39},end:{line:26,column:40}},loc:{start:{line:26,column:46},end:{line:26,column:52}},line:26}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:8,column:3}},type:"default-arg",locations:[{start:{line:7,column:13},end:{line:8,column:3}}],line:7},1:{loc:{start:{line:9,column:2},end:{line:9,column:21}},type:"default-arg",locations:[{start:{line:9,column:19},end:{line:9,column:21}}],line:9}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0,2:0},b:{0:[0],1:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx"],names:[],mappings:"AA4BM;AA1BN,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA+B,uBAAuB;AAStD,MAAM,2BAAoE,CAAC;AAAA,EACzE,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,iBAAiB,CAAC;AAAA,EAClB;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,cAAc;AAAA,MACvB,WAAW,OAAO,MAAM,cAAc;AAAA,MACtC,eAAY;AAAA,MACZ;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC;AAAA,UACA;AAAA,UACA,SAAS,gBAAgB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,MAC5C;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"61cb059654b456e27f782356448ebd0362f3cb6a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return xm=function(){return s},s}xm();xm().s[0]++;const f7e=({onChange:n=(xm().b[0][0]++,()=>{xm().f[1]++}),sourceLayerIds:e=(xm().b[1][0]++,[]),value:t,error:i,t:r})=>(xm().f[0]++,xm().s[1]++,te.jsx(as,{label:r("Source Layer"),fieldSpec:No.layer["source-layer"],"data-wd-key":"layer-source-layer",error:i,children:te.jsx(_5,{value:t,onChange:n,options:e?.map(o=>(xm().f[2]++,xm().s[2]++,[o,o]))})})),Boe=(xm().s[3]++,Mo()(f7e));function dK(){var n="/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts",e="674dcf7f1706a4f312a810bdf5e5997ddaf065e0",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts",statementMap:{0:{start:{line:1,column:33},end:{line:1,column:97}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts"],names:[],mappings:"AAAO,aAAM,oBAAoB,CAAC,cAAc,UAAU,aAAa,WAAW,cAAc;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"674dcf7f1706a4f312a810bdf5e5997ddaf065e0"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return dK=function(){return s},s}dK();const QR=(dK().s[0]++,["background","raster","hillshade","heatmap","color-relief"]);function gn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx",e="90da8e5ee6bdbe488a5f45bfae015ac94b0d70a9",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx",statementMap:{0:{start:{line:12,column:13},end:{line:33,column:3}},1:{start:{line:13,column:4},end:{line:16,column:5}},2:{start:{line:13,column:38},end:{line:13,column:60}},3:{start:{line:14,column:6},end:{line:14,column:72}},4:{start:{line:15,column:6},end:{line:15,column:13}},5:{start:{line:17,column:26},end:{line:17,column:52}},6:{start:{line:18,column:18},end:{line:21,column:5}},7:{start:{line:22,column:4},end:{line:27,column:5}},8:{start:{line:23,column:6},end:{line:23,column:39}},9:{start:{line:24,column:6},end:{line:26,column:7}},10:{start:{line:25,column:8},end:{line:25,column:59}},11:{start:{line:28,column:4},end:{line:28,column:30}},12:{start:{line:29,column:4},end:{line:32,column:7}},13:{start:{line:30,column:6},end:{line:30,column:47}},14:{start:{line:31,column:6},end:{line:31,column:32}},15:{start:{line:35,column:4},end:{line:35,column:17}},16:{start:{line:36,column:18},end:{line:40,column:5}},17:{start:{line:41,column:4},end:{line:47,column:5}},18:{start:{line:42,column:6},end:{line:42,column:56}},19:{start:{line:43,column:27},end:{line:43,column:72}},20:{start:{line:44,column:6},end:{line:46,column:7}},21:{start:{line:45,column:8},end:{line:45,column:48}},22:{start:{line:48,column:4},end:{line:48,column:23}},23:{start:{line:51,column:20},end:{line:51,column:34}},24:{start:{line:52,column:20},end:{line:52,column:35}},25:{start:{line:53,column:32},end:{line:53,column:56}},26:{start:{line:54,column:32},end:{line:54,column:56}},27:{start:{line:55,column:4},end:{line:62,column:5}},28:{start:{line:59,column:6},end:{line:61,column:9}},29:{start:{line:65,column:22},end:{line:65,column:54}},30:{start:{line:66,column:4},end:{line:66,column:34}},31:{start:{line:69,column:4},end:{line:86,column:5}},32:{start:{line:71,column:8},end:{line:71,column:18}},33:{start:{line:74,column:8},end:{line:74,column:113}},34:{start:{line:74,column:69},end:{line:74,column:92}},35:{start:{line:74,column:110},end:{line:74,column:111}},36:{start:{line:76,column:8},end:{line:76,column:109}},37:{start:{line:76,column:69},end:{line:76,column:88}},38:{start:{line:76,column:106},end:{line:76,column:107}},39:{start:{line:83,column:8},end:{line:83,column:133}},40:{start:{line:83,column:69},end:{line:83,column:112}},41:{start:{line:83,column:130},end:{line:83,column:131}},42:{start:{line:85,column:8},end:{line:85,column:18}},43:{start:{line:89,column:14},end:{line:89,column:26}},44:{start:{line:90,column:20},end:{line:90,column:52}},45:{start:{line:91,column:19},end:{line:91,column:61}},46:{start:{line:93,column:4},end:{line:106,column:5}},47:{start:{line:94,column:6},end:{line:105,column:11}},48:{start:{line:100,column:27},end:{line:100,column:57}},49:{start:{line:107,column:4},end:{line:165,column:6}},50:{start:{line:124,column:18},end:{line:124,column:56}},51:{start:{line:133,column:33},end:{line:133,column:59}},52:{start:{line:142,column:33},end:{line:142,column:61}},53:{start:{line:150,column:33},end:{line:150,column:69}},54:{start:{line:168,column:17},end:{line:168,column:52}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:13},end:{line:12,column:14}},loc:{start:{line:12,column:19},end:{line:33,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:13,column:31},end:{line:13,column:32}},loc:{start:{line:13,column:38},end:{line:13,column:60}},line:13},2:{name:"(anonymous_2)",decl:{start:{line:29,column:35},end:{line:29,column:36}},loc:{start:{line:29,column:41},end:{line:32,column:5}},line:29},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:21},end:{line:49,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:44},end:{line:63,column:3}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:29},end:{line:67,column:3}},line:64},6:{name:"(anonymous_6)",decl:{start:{line:68,column:2},end:{line:68,column:3}},loc:{start:{line:68,column:19},end:{line:87,column:3}},line:68},7:{name:"(anonymous_7)",decl:{start:{line:74,column:57},end:{line:74,column:58}},loc:{start:{line:74,column:69},end:{line:74,column:92}},line:74},8:{name:"(anonymous_8)",decl:{start:{line:74,column:98},end:{line:74,column:99}},loc:{start:{line:74,column:110},end:{line:74,column:111}},line:74},9:{name:"(anonymous_9)",decl:{start:{line:76,column:57},end:{line:76,column:58}},loc:{start:{line:76,column:69},end:{line:76,column:88}},line:76},10:{name:"(anonymous_10)",decl:{start:{line:76,column:94},end:{line:76,column:95}},loc:{start:{line:76,column:106},end:{line:76,column:107}},line:76},11:{name:"(anonymous_11)",decl:{start:{line:83,column:57},end:{line:83,column:58}},loc:{start:{line:83,column:69},end:{line:83,column:112}},line:83},12:{name:"(anonymous_12)",decl:{start:{line:83,column:118},end:{line:83,column:119}},loc:{start:{line:83,column:130},end:{line:83,column:131}},line:83},13:{name:"(anonymous_13)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:11},end:{line:166,column:3}},line:88},14:{name:"(anonymous_14)",decl:{start:{line:100,column:21},end:{line:100,column:22}},loc:{start:{line:100,column:27},end:{line:100,column:57}},line:100},15:{name:"(anonymous_15)",decl:{start:{line:123,column:26},end:{line:123,column:27}},loc:{start:{line:123,column:33},end:{line:125,column:17}},line:123},16:{name:"(anonymous_16)",decl:{start:{line:133,column:26},end:{line:133,column:27}},loc:{start:{line:133,column:33},end:{line:133,column:59}},line:133},17:{name:"(anonymous_17)",decl:{start:{line:142,column:26},end:{line:142,column:27}},loc:{start:{line:142,column:33},end:{line:142,column:61}},line:142},18:{name:"(anonymous_18)",decl:{start:{line:150,column:26},end:{line:150,column:27}},loc:{start:{line:150,column:33},end:{line:150,column:69}},line:150}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:16,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:16,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:27,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:27,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},2:{loc:{start:{line:24,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:24,column:6},end:{line:26,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},3:{loc:{start:{line:24,column:10},end:{line:24,column:84}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:54}},{start:{line:24,column:58},end:{line:24,column:84}}],line:24},4:{loc:{start:{line:41,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},5:{loc:{start:{line:43,column:27},end:{line:43,column:72}},type:"binary-expr",locations:[{start:{line:43,column:27},end:{line:43,column:66}},{start:{line:43,column:70},end:{line:43,column:72}}],line:43},6:{loc:{start:{line:44,column:6},end:{line:46,column:7}},type:"if",locations:[{start:{line:44,column:6},end:{line:46,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},7:{loc:{start:{line:55,column:4},end:{line:62,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:62,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},8:{loc:{start:{line:57,column:6},end:{line:57,column:160}},type:"binary-expr",locations:[{start:{line:57,column:6},end:{line:57,column:25}},{start:{line:57,column:29},end:{line:57,column:52}},{start:{line:57,column:56},end:{line:57,column:106}},{start:{line:57,column:110},end:{line:57,column:160}}],line:57},9:{loc:{start:{line:65,column:22},end:{line:65,column:54}},type:"binary-expr",locations:[{start:{line:65,column:22},end:{line:65,column:48}},{start:{line:65,column:52},end:{line:65,column:54}}],line:65},10:{loc:{start:{line:66,column:11},end:{line:66,column:33}},type:"binary-expr",locations:[{start:{line:66,column:11},end:{line:66,column:27}},{start:{line:66,column:31},end:{line:66,column:33}}],line:66},11:{loc:{start:{line:69,column:4},end:{line:86,column:5}},type:"switch",locations:[{start:{line:70,column:6},end:{line:71,column:18}},{start:{line:72,column:6},end:{line:72,column:23}},{start:{line:73,column:6},end:{line:74,column:113}},{start:{line:75,column:6},end:{line:76,column:109}},{start:{line:77,column:6},end:{line:77,column:21}},{start:{line:78,column:6},end:{line:78,column:20}},{start:{line:79,column:6},end:{line:79,column:18}},{start:{line:80,column:6},end:{line:80,column:28}},{start:{line:81,column:6},end:{line:81,column:18}},{start:{line:82,column:6},end:{line:83,column:133}},{start:{line:84,column:6},end:{line:85,column:18}}],line:69},12:{loc:{start:{line:83,column:69},end:{line:83,column:112}},type:"binary-expr",locations:[{start:{line:83,column:69},end:{line:83,column:88}},{start:{line:83,column:92},end:{line:83,column:112}}],line:83},13:{loc:{start:{line:93,column:4},end:{line:106,column:5}},type:"if",locations:[{start:{line:93,column:4},end:{line:106,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},14:{loc:{start:{line:136,column:12},end:{line:144,column:13}},type:"binary-expr",locations:[{start:{line:136,column:12},end:{line:136,column:44}},{start:{line:136,column:64},end:{line:144,column:13}}],line:136},15:{loc:{start:{line:145,column:12},end:{line:152,column:13}},type:"binary-expr",locations:[{start:{line:145,column:12},end:{line:145,column:56}},{start:{line:145,column:76},end:{line:152,column:13}}],line:145}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0,0,0],9:[0,0],10:[0,0],11:[0,0,0,0,0,0,0,0,0,0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx"],names:[],mappings:"AAqIQ,SAEE,KAFF;AArIR,OAAO,WAAW;AAClB,SAA+B,uBAAuB;AAGtD,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB;AAmBlC,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,WAAW,MAAM;AACf,QAAI,KAAK,MAAM,OAAO,KAAK,OAAK,EAAE,OAAO,KAAK,MAAM,EAAE,GAAG;AACvD,WAAK,SAAS,EAAE,OAAO,KAAK,MAAM,EAAE,yBAAyB,EAAE,CAAC;AAChE;AAAA,IACF;AAEA,UAAM,gBAAgB,KAAK,MAAM,OAAO,MAAM,CAAC;AAC/C,UAAM,QAAuB;AAAA,MAC3B,IAAI,KAAK,MAAM;AAAA,MACf,MAAM,KAAK,MAAM;AAAA,IACnB;AAEA,QAAG,KAAK,MAAM,SAAS,cAAc;AACnC,YAAM,SAAS,KAAK,MAAM;AAC1B,UAAG,CAAC,kBAAkB,SAAS,KAAK,MAAM,IAAI,KAAK,KAAK,MAAM,cAAc,GAAG;AAC7E,cAAM,cAAc,IAAI,KAAK,MAAM,cAAc;AAAA,MACnD;AAAA,IACF;AAEA,kBAAc,KAAK,KAA2B;AAC9C,SAAK,SAAS,EAAE,OAAO,KAAK,GAAG,MAAM;AACnC,WAAK,MAAM,eAAe,aAAa;AACvC,WAAK,MAAM,aAAa;AAAA,IAC1B,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,OAA8B;AACxC,UAAM,KAAK;AACX,UAAM,QAAuB;AAAA,MAC3B,MAAM;AAAA,MACN,IAAI;AAAA,MACJ,OAAO;AAAA,IACT;AAEA,QAAG,OAAO,KAAK,MAAM,OAAO,EAAE,SAAS,GAAG;AACxC,YAAM,SAAS,OAAO,KAAK,KAAK,MAAM,OAAO,EAAE,CAAC;AAChD,YAAM,eAAe,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAE,UAAU,CAAC;AACjE,UAAI,aAAa,SAAS,GAAG;AAC3B,cAAM,cAAc,IAAI,aAAa,CAAC;AAAA,MACxC;AAAA,IACF;AACA,SAAK,QAAQ;AAAA,EACf;AAAA,EAEA,mBAAmB,YAAmC,WAA0B;AAE9E,UAAM,UAAU,UAAU;AAC1B,UAAM,UAAU,KAAK,MAAM;AAE3B,UAAM,sBAAsB,KAAK,WAAW,OAAO;AACnD,UAAM,sBAAsB,KAAK,WAAW,OAAO;AAEnD;AAAA;AAAA,MAEE,YAAY,WACT,UAAU,WAAW,MAErB,oBAAoB,QAAQ,UAAU,MAAO,IAAI,MAEjD,oBAAoB,QAAQ,KAAK,MAAM,MAAO,IAAI;AAAA,MACrD;AAEA,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,MACV,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,QAAgB;AACjC,UAAM,YAAY,KAAK,MAAM,QAAQ,MAAM,KAAK,CAAC;AACjD,WAAO,UAAU,UAAU,CAAC;AAAA,EAC9B;AAAA,EAEA,WAAW,MAAkC;AAE3C,YAAO,MAAM;AAAA,MACX,KAAK;AACH,eAAO,CAAC;AAAA,MACV,KAAK;AAAA,MACL,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,YAAY,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MACzG,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,QAAQ,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MACrG,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,YAAY,EAAE,SAAS,SAAS,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MAC7H;AACE,eAAO,CAAC;AAAA,IACZ;AAAA,EACF;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,UAAU,KAAK,WAAW,KAAK,MAAM,IAAI;AAC/C,UAAM,SAAS,KAAK,mBAAmB,KAAK,MAAM,MAAO;AACzD,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO;AACpB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ;AAAA,UAAC;AAAA;AAAA,YACC,MAAK;AAAA,YACL,SAAS,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK,CAAC;AAAA,YAC5C,WAAU;AAAA,YACX;AAAA;AAAA,QAED;AAAA,SACF;AAAA,IAEJ;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QACpB,eAAY;AAAA,QACZ,WAAU;AAAA,QAET;AAAA;AAAA,UACD,qBAAC,SAAI,WAAU,sBACb;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM;AAAA,gBAClB,OAAM;AAAA,gBACN,UAAU,CAAC,MAAc;AACvB,uBAAK,SAAS,EAAE,IAAI,GAAG,OAAO,KAAK,CAAC;AAAA,gBACtC;AAAA;AAAA,YACF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM;AAAA,gBAClB,OAAM;AAAA,gBACN,UAAU,CAAC,MAAkC,KAAK,SAAS,EAAE,MAAM,EAAE,CAAC;AAAA;AAAA,YACxE;AAAA,YACC,KAAK,MAAM,SAAS,gBACvB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,OAAM;AAAA,gBACN,OAAO,KAAK,MAAM;AAAA,gBAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,QAAQ,EAAE,CAAC;AAAA;AAAA,YACtD;AAAA,YAEG,CAAC,kBAAkB,SAAS,KAAK,MAAM,IAAI,KAC9C;AAAA,cAAC;AAAA;AAAA,gBACC,gBAAgB;AAAA,gBAChB,OAAO,KAAK,MAAM,cAAc;AAAA,gBAChC,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,gBAAgB,EAAE,CAAC;AAAA;AAAA,YAC9D;AAAA,YAEE;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,eAAY;AAAA,gBAEX,YAAE,WAAW;AAAA;AAAA,YAChB;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"90da8e5ee6bdbe488a5f45bfae015ac94b0d70a9"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return gn=function(){return s},s}gn();class p7e extends On.Component{addLayer=(gn().s[0]++,()=>{if(gn().f[0]++,gn().s[1]++,this.props.layers.some(i=>(gn().f[1]++,gn().s[2]++,i.id===this.state.id))){gn().b[0][0]++,gn().s[3]++,this.setState({error:this.props.t("Layer ID already exists")}),gn().s[4]++;return}else gn().b[0][1]++;const e=(gn().s[5]++,this.props.layers.slice(0)),t=(gn().s[6]++,{id:this.state.id,type:this.state.type});gn().s[7]++,this.state.type!=="background"?(gn().b[1][0]++,gn().s[8]++,t.source=this.state.source,gn().s[9]++,gn().b[3][0]++,!QR.includes(this.state.type)&&(gn().b[3][1]++,this.state["source-layer"])?(gn().b[2][0]++,gn().s[10]++,t["source-layer"]=this.state["source-layer"]):gn().b[2][1]++):gn().b[1][1]++,gn().s[11]++,e.push(t),gn().s[12]++,this.setState({error:null},()=>{gn().f[2]++,gn().s[13]++,this.props.onLayersChange(e),gn().s[14]++,this.props.onOpenToggle()})});constructor(e){gn().f[3]++,gn().s[15]++,super(e);const t=(gn().s[16]++,{type:"fill",id:"",error:null});if(gn().s[17]++,Object.keys(e.sources).length>0){gn().b[4][0]++,gn().s[18]++,t.source=Object.keys(this.props.sources)[0];const i=(gn().s[19]++,gn().b[5][0]++,this.props.sources[t.source].layers||(gn().b[5][1]++,[]));gn().s[20]++,i.length>0?(gn().b[6][0]++,gn().s[21]++,t["source-layer"]=i[0]):gn().b[6][1]++}else gn().b[4][1]++;gn().s[22]++,this.state=t}componentDidUpdate(e,t){gn().f[4]++;const i=(gn().s[23]++,t.type),r=(gn().s[24]++,this.state.type),o=(gn().s[25]++,this.getSources(i)),s=(gn().s[26]++,this.getSources(r));gn().s[27]++,gn().b[8][0]++,i!==r&&(gn().b[8][1]++,t.source!=="")&&(gn().b[8][2]++,o.indexOf(t.source)>-1)&&(gn().b[8][3]++,s.indexOf(this.state.source)<0)?(gn().b[7][0]++,gn().s[28]++,this.setState({source:""})):gn().b[7][1]++}getLayersForSource(e){gn().f[5]++;const t=(gn().s[29]++,gn().b[9][0]++,this.props.sources[e]||(gn().b[9][1]++,{}));return gn().s[30]++,gn().b[10][0]++,t.layers||(gn().b[10][1]++,[])}getSources(e){switch(gn().f[6]++,gn().s[31]++,e){case"background":return gn().b[11][0]++,gn().s[32]++,[];case"hillshade":gn().b[11][1]++;case"color-relief":return gn().b[11][2]++,gn().s[33]++,Object.entries(this.props.sources).filter(([t,i])=>(gn().f[7]++,gn().s[34]++,i.type==="raster-dem")).map(([t,i])=>(gn().f[8]++,gn().s[35]++,t));case"raster":return gn().b[11][3]++,gn().s[36]++,Object.entries(this.props.sources).filter(([t,i])=>(gn().f[9]++,gn().s[37]++,i.type==="raster")).map(([t,i])=>(gn().f[10]++,gn().s[38]++,t));case"heatmap":gn().b[11][4]++;case"circle":gn().b[11][5]++;case"fill":gn().b[11][6]++;case"fill-extrusion":gn().b[11][7]++;case"line":gn().b[11][8]++;case"symbol":return gn().b[11][9]++,gn().s[39]++,Object.entries(this.props.sources).filter(([t,i])=>(gn().f[11]++,gn().s[40]++,gn().b[12][0]++,i.type==="vector"||(gn().b[12][1]++,i.type==="geojson"))).map(([t,i])=>(gn().f[12]++,gn().s[41]++,t));default:return gn().b[11][10]++,gn().s[42]++,[]}}render(){gn().f[13]++;const e=(gn().s[43]++,this.props.t),t=(gn().s[44]++,this.getSources(this.state.type)),i=(gn().s[45]++,this.getLayersForSource(this.state.source));let r;return gn().s[46]++,this.state.error?(gn().b[13][0]++,gn().s[47]++,r=te.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,te.jsx("a",{href:"#",onClick:()=>(gn().f[14]++,gn().s[48]++,this.setState({error:null})),className:"maputnik-modal-error-close",children:""})]})):gn().b[13][1]++,gn().s[49]++,te.jsxs(Q1,{isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Add Layer"),"data-wd-key":"modal:add-layer",className:"maputnik-add-modal",children:[r,te.jsxs("div",{className:"maputnik-add-layer",children:[te.jsx(uoe,{value:this.state.id,wdKey:"add-layer.layer-id",onChange:o=>{gn().f[15]++,gn().s[50]++,this.setState({id:o,error:null})}}),te.jsx(loe,{value:this.state.type,wdKey:"add-layer.layer-type",onChange:o=>(gn().f[16]++,gn().s[51]++,this.setState({type:o}))}),(gn().b[14][0]++,this.state.type!=="background"&&(gn().b[14][1]++,te.jsx(Eoe,{sourceIds:t,wdKey:"add-layer.layer-source-block",value:this.state.source,onChange:o=>(gn().f[17]++,gn().s[52]++,this.setState({source:o}))}))),(gn().b[15][0]++,!QR.includes(this.state.type)&&(gn().b[15][1]++,te.jsx(Boe,{sourceLayerIds:i,value:this.state["source-layer"],onChange:o=>(gn().f[18]++,gn().s[53]++,this.setState({"source-layer":o}))}))),te.jsx(Ds,{className:"maputnik-add-layer-button",onClick:this.addLayer,"data-wd-key":"add-layer",children:e("Add Layer")})]})]})}}const m7e=(gn().s[54]++,Mo()(p7e));function eC(){var n="/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",e="a991ed6da2a27b46f1adbb88a645aa2ee0df375e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",statementMap:{0:{start:{line:1,column:10},end:{line:1,column:11}},1:{start:{line:3,column:2},end:{line:3,column:8}},2:{start:{line:4,column:2},end:{line:4,column:22}}},fnMap:{0:{name:"generateUniqueId",decl:{start:{line:2,column:24},end:{line:2,column:40}},loc:{start:{line:2,column:54},end:{line:5,column:1}},line:2}},branchMap:{0:{loc:{start:{line:2,column:41},end:{line:2,column:52}},type:"default-arg",locations:[{start:{line:2,column:50},end:{line:2,column:52}}],line:2}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts"],names:[],mappings:"AAGA,IAAI,MAAM;AAEV,wBAAwB,iBAAiB,SAAO,IAAI;AAClD;AACA,SAAO,SAAO;AAChB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a991ed6da2a27b46f1adbb88a645aa2ee0df375e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return eC=function(){return s},s}eC();let LQ=(eC().s[0]++,0);function C2(n=(eC().b[0][0]++,"")){return eC().f[0]++,eC().s[1]++,LQ++,eC().s[2]++,n+LQ}function qi(){var n="/home/runner/work/maputnik/maputnik/src/libs/layer.ts",e="6a81b3c8ffc06f88598225aa1f9b90e3bb6da08e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/layer.ts",statementMap:{0:{start:{line:3,column:28},end:{line:3,column:46}},1:{start:{line:4,column:2},end:{line:8,column:5}},2:{start:{line:5,column:4},end:{line:7,column:5}},3:{start:{line:6,column:6},end:{line:6,column:45}},4:{start:{line:9,column:29},end:{line:9,column:48}},5:{start:{line:10,column:2},end:{line:14,column:5}},6:{start:{line:11,column:4},end:{line:13,column:5}},7:{start:{line:12,column:6},end:{line:12,column:46}},8:{start:{line:15,column:2},end:{line:20,column:4}},9:{start:{line:23,column:2},end:{line:59,column:3}},10:{start:{line:24,column:4},end:{line:43,column:5}},11:{start:{line:25,column:23},end:{line:31,column:7}},12:{start:{line:32,column:6},end:{line:32,column:39}},13:{start:{line:33,column:6},end:{line:35,column:7}},14:{start:{line:34,column:8},end:{line:34,column:31}},15:{start:{line:36,column:6},end:{line:36,column:22}},16:{start:{line:38,column:23},end:{line:40,column:7}},17:{start:{line:41,column:6},end:{line:41,column:32}},18:{start:{line:42,column:6},end:{line:42,column:22}},19:{start:{line:45,column:4},end:{line:58,column:5}},20:{start:{line:46,column:6},end:{line:52,column:8}},21:{start:{line:54,column:6},end:{line:57,column:8}},22:{start:{line:62,column:2},end:{line:62,column:64}},23:{start:{line:65,column:29},end:{line:65,column:56}},24:{start:{line:66,column:19},end:{line:66,column:22}},25:{start:{line:67,column:2},end:{line:74,column:3}},26:{start:{line:67,column:15},end:{line:67,column:18}},27:{start:{line:68,column:32},end:{line:68,column:61}},28:{start:{line:69,column:4},end:{line:73,column:5}},29:{start:{line:70,column:6},end:{line:70,column:25}},30:{start:{line:72,column:6},end:{line:72,column:24}},31:{start:{line:75,column:2},end:{line:75,column:20}}},fnMap:{0:{name:"changeType",decl:{start:{line:2,column:16},end:{line:2,column:26}},loc:{start:{line:2,column:43},end:{line:21,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:41},end:{line:4,column:42}},loc:{start:{line:4,column:59},end:{line:8,column:3}},line:4},2:{name:"(anonymous_2)",decl:{start:{line:10,column:42},end:{line:10,column:43}},loc:{start:{line:10,column:60},end:{line:14,column:3}},line:10},3:{name:"changeProperty",decl:{start:{line:22,column:16},end:{line:22,column:30}},loc:{start:{line:22,column:65},end:{line:60,column:1}},line:22},4:{name:"layerPrefix",decl:{start:{line:61,column:16},end:{line:61,column:27}},loc:{start:{line:61,column:34},end:{line:63,column:1}},line:61},5:{name:"findClosestCommonPrefix",decl:{start:{line:64,column:16},end:{line:64,column:39}},loc:{start:{line:64,column:53},end:{line:76,column:1}},line:64}},branchMap:{0:{loc:{start:{line:5,column:4},end:{line:7,column:5}},type:"if",locations:[{start:{line:5,column:4},end:{line:7,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},1:{loc:{start:{line:11,column:4},end:{line:13,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:13,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:11},2:{loc:{start:{line:23,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:59,column:3}},{start:{line:44,column:9},end:{line:59,column:3}}],line:23},3:{loc:{start:{line:24,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:43,column:5}},{start:{line:37,column:11},end:{line:43,column:5}}],line:24},4:{loc:{start:{line:33,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:33,column:6},end:{line:35,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},5:{loc:{start:{line:45,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:58,column:5}},{start:{line:53,column:11},end:{line:58,column:5}}],line:45},6:{loc:{start:{line:69,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:73,column:5}},{start:{line:71,column:11},end:{line:73,column:5}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layer.ts"],names:[],mappings:"AAAA,SAAQ,cAAa;AAId,gBAAS,WAAW,OAA2B,SAAqC;AACzF,QAAM,oBAAiD,EAAE,GAAG,MAAM,MAAM;AACxE,SAAO,KAAK,iBAAiB,EAAE,QAAQ,kBAAgB;AACrD,QAAG,EAAE,gBAAgB,OAAO,WAAW,OAAO,IAAI;AAChD,aAAO,kBAAkB,YAAiD;AAAA,IAC5E;AAAA,EACF,CAAC;AAED,QAAM,qBAAmD,EAAE,GAAG,MAAM,OAAO;AAC3E,SAAO,KAAK,kBAAkB,EAAE,QAAQ,kBAAgB;AACtD,QAAG,EAAE,gBAAgB,OAAO,YAAY,OAAO,IAAI;AACjD,aAAO,mBAAmB,YAAkD;AAAA,IAC9E;AAAA,EACF,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACR;AACF;AAKO,gBAAS,eAAe,OAA2B,OAAwC,UAAkB,UAAe;AAEjI,MAAG,aAAa,QAAW;AACzB,QAAG,OAAO;AACR,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA;AAAA,QAEH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,QAChB;AAAA,MACF;AACA,aAAO,SAAS,KAAK,EAAE,QAAQ;AAG/B,UAAG,OAAO,KAAK,SAAS,KAAK,CAAC,EAAE,SAAS,GAAG;AAC1C,eAAO,SAAS,KAAK;AAAA,MACvB;AACA,aAAO;AAAA,IACT,OAAO;AACL,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA,MACL;AACA,aAAO,SAAS,QAAQ;AACxB,aAAO;AAAA,IACT;AAAA,EACF,OACK;AACH,QAAG,OAAO;AACR,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,UACd,CAAC,QAAQ,GAAG;AAAA,QACd;AAAA,MACF;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAAA,EACF;AACF;AAEO,gBAAS,YAAY,MAAc;AACxC,SAAO,KAAK,QAAQ,KAAK,GAAG,EAAE,QAAQ,KAAK,GAAG,EAAE,MAAM,GAAG,EAAE,CAAC;AAC9D;AAEO,gBAAS,wBAAwB,QAA8B,KAAa;AACjF,QAAM,qBAAqB,YAAY,OAAO,GAAG,EAAE,EAAE;AACrD,MAAI,aAAa;AACjB,WAAS,IAAI,KAAK,IAAI,GAAG,KAAK;AAC5B,UAAM,sBAAsB,YAAY,OAAO,IAAE,CAAC,EAAE,EAAE;AACtD,QAAG,wBAAwB,oBAAoB;AAC7C,mBAAa,IAAI;AAAA,IACnB,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6a81b3c8ffc06f88598225aa1f9b90e3bb6da08e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return qi=function(){return s},s}qi();function g7e(n,e){qi().f[0]++;const t=(qi().s[0]++,{...n.paint});qi().s[1]++,Object.keys(t).forEach(r=>{qi().f[1]++,qi().s[2]++,r in No["paint_"+e]?qi().b[0][1]++:(qi().b[0][0]++,qi().s[3]++,delete t[r])});const i=(qi().s[4]++,{...n.layout});return qi().s[5]++,Object.keys(i).forEach(r=>{qi().f[2]++,qi().s[6]++,r in No["layout_"+e]?qi().b[1][1]++:(qi().b[1][0]++,qi().s[7]++,delete i[r])}),qi().s[8]++,{...n,paint:t,layout:i,type:e}}function y7e(n,e,t,i){if(qi().f[3]++,qi().s[9]++,i===void 0)if(qi().b[2][0]++,qi().s[10]++,e){qi().b[3][0]++;const r=(qi().s[11]++,{...n,[e]:{...n[e]}});return qi().s[12]++,delete r[e][t],qi().s[13]++,Object.keys(r[e]).length<1?(qi().b[4][0]++,qi().s[14]++,delete r[e]):qi().b[4][1]++,qi().s[15]++,r}else{qi().b[3][1]++;const r=(qi().s[16]++,{...n});return qi().s[17]++,delete r[t],qi().s[18]++,r}else return qi().b[2][1]++,qi().s[19]++,e?(qi().b[5][0]++,qi().s[20]++,{...n,[e]:{...n[e],[t]:i}}):(qi().b[5][1]++,qi().s[21]++,{...n,[t]:i})}function Ex(n){return qi().f[4]++,qi().s[22]++,n.replace(" ","-").replace("_","-").split("-")[0]}function v7e(n,e){qi().f[5]++;const t=(qi().s[23]++,Ex(n[e].id));let i=(qi().s[24]++,e);qi().s[25]++;for(let r=(qi().s[26]++,e);r>0;r--){const o=(qi().s[27]++,Ex(n[r-1].id));if(qi().s[28]++,o===t)qi().b[6][0]++,qi().s[29]++,i=r-1;else return qi().b[6][1]++,qi().s[30]++,i}return qi().s[31]++,i}function Ut(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",e="3031fd34f43c8d651f443f714d2dfaaa5f809423",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",statementMap:{0:{start:{line:23,column:24},end:{line:26,column:3}},1:{start:{line:30,column:4},end:{line:30,column:17}},2:{start:{line:31,column:4},end:{line:31,column:45}},3:{start:{line:32,column:4},end:{line:32,column:48}},4:{start:{line:33,column:4},end:{line:42,column:6}},5:{start:{line:45,column:4},end:{line:54,column:7}},6:{start:{line:56,column:17},end:{line:73,column:3}},7:{start:{line:57,column:14},end:{line:57,column:15}},8:{start:{line:58,column:22},end:{line:58,column:24}},9:{start:{line:59,column:4},end:{line:68,column:7}},10:{start:{line:60,column:26},end:{line:60,column:51}},11:{start:{line:61,column:24},end:{line:61,column:52}},12:{start:{line:62,column:6},end:{line:64,column:7}},13:{start:{line:63,column:8},end:{line:63,column:63}},14:{start:{line:65,column:6},end:{line:67,column:9}},15:{start:{line:66,column:8},end:{line:66,column:17}},16:{start:{line:69,column:4},end:{line:72,column:7}},17:{start:{line:75,column:19},end:{line:75,column:21}},18:{start:{line:76,column:41},end:{line:76,column:50}},19:{start:{line:77,column:4},end:{line:94,column:5}},20:{start:{line:77,column:17},end:{line:77,column:18}},21:{start:{line:78,column:24},end:{line:78,column:44}},22:{start:{line:79,column:28},end:{line:79,column:52}},23:{start:{line:80,column:6},end:{line:83,column:8}},24:{start:{line:84,column:20},end:{line:87,column:7}},25:{start:{line:88,column:6},end:{line:93,column:7}},26:{start:{line:89,column:26},end:{line:89,column:51}},27:{start:{line:90,column:8},end:{line:90,column:30}},28:{start:{line:92,column:8},end:{line:92,column:29}},29:{start:{line:95,column:4},end:{line:95,column:18}},30:{start:{line:98,column:22},end:{line:98,column:50}},31:{start:{line:99,column:22},end:{line:99,column:55}},32:{start:{line:100,column:4},end:{line:104,column:5}},33:{start:{line:101,column:6},end:{line:101,column:68}},34:{start:{line:103,column:6},end:{line:103,column:35}},35:{start:{line:105,column:4},end:{line:107,column:7}},36:{start:{line:110,column:22},end:{line:110,column:78}},37:{start:{line:111,column:4},end:{line:111,column:51}},38:{start:{line:114,column:4},end:{line:116,column:5}},39:{start:{line:115,column:6},end:{line:115,column:18}},40:{start:{line:118,column:18},end:{line:120,column:7}},41:{start:{line:121,column:6},end:{line:125,column:7}},42:{start:{line:122,column:8},end:{line:124,column:10}},43:{start:{line:126,column:6},end:{line:126,column:17}},44:{start:{line:128,column:24},end:{line:131,column:5}},45:{start:{line:133,column:18},end:{line:135,column:7}},46:{start:{line:136,column:6},end:{line:136,column:27}},47:{start:{line:137,column:6},end:{line:137,column:17}},48:{start:{line:139,column:23},end:{line:142,column:5}},49:{start:{line:143,column:25},end:{line:143,column:53}},50:{start:{line:144,column:4},end:{line:144,column:24}},51:{start:{line:147,column:4},end:{line:163,column:5}},52:{start:{line:148,column:31},end:{line:148,column:59}},53:{start:{line:149,column:6},end:{line:162,column:7}},54:{start:{line:150,column:23},end:{line:150,column:44}},55:{start:{line:151,column:24},end:{line:154,column:9}},56:{start:{line:155,column:25},end:{line:160,column:19}},57:{start:{line:156,column:10},end:{line:156,column:37}},58:{start:{line:157,column:10},end:{line:159,column:11}},59:{start:{line:158,column:12},end:{line:158,column:36}},60:{start:{line:161,column:8},end:{line:161,column:33}},61:{start:{line:166,column:22},end:{line:166,column:24}},62:{start:{line:167,column:14},end:{line:167,column:15}},63:{start:{line:168,column:26},end:{line:168,column:46}},64:{start:{line:169,column:4},end:{line:219,column:7}},65:{start:{line:170,column:26},end:{line:170,column:51}},66:{start:{line:171,column:6},end:{line:184,column:7}},67:{start:{line:172,column:36},end:{line:182,column:9}},68:{start:{line:176,column:47},end:{line:176,column:52}},69:{start:{line:183,column:8},end:{line:183,column:28}},70:{start:{line:185,column:6},end:{line:218,column:9}},71:{start:{line:186,column:25},end:{line:186,column:72}},72:{start:{line:187,column:27},end:{line:189,column:10}},73:{start:{line:188,column:10},end:{line:188,column:97}},74:{start:{line:190,column:32},end:{line:190,column:34}},75:{start:{line:191,column:8},end:{line:193,column:9}},76:{start:{line:192,column:10},end:{line:192,column:53}},77:{start:{line:194,column:41},end:{line:215,column:9}},78:{start:{line:216,column:8},end:{line:216,column:33}},79:{start:{line:217,column:8},end:{line:217,column:17}},80:{start:{line:220,column:14},end:{line:220,column:26}},81:{start:{line:221,column:4},end:{line:274,column:6}},82:{start:{line:277,column:27},end:{line:277,column:72}},83:{start:{line:278,column:18},end:{line:291,column:1}},84:{start:{line:279,column:18},end:{line:279,column:97}},85:{start:{line:280,column:24},end:{line:288,column:3}},86:{start:{line:281,column:29},end:{line:281,column:34}},87:{start:{line:282,column:4},end:{line:282,column:22}},88:{start:{line:282,column:15},end:{line:282,column:22}},89:{start:{line:283,column:21},end:{line:283,column:78}},90:{start:{line:283,column:55},end:{line:283,column:77}},91:{start:{line:284,column:21},end:{line:284,column:76}},92:{start:{line:284,column:55},end:{line:284,column:75}},93:{start:{line:285,column:4},end:{line:287,column:5}},94:{start:{line:286,column:6},end:{line:286,column:48}},95:{start:{line:289,column:19},end:{line:289,column:56}},96:{start:{line:289,column:47},end:{line:289,column:55}},97:{start:{line:290,column:2},end:{line:290,column:288}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:24,column:19},end:{line:24,column:20}},loc:{start:{line:24,column:25},end:{line:25,column:5}},line:24},1:{name:"(anonymous_1)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:21},end:{line:43,column:3}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:25},end:{line:55,column:3}},line:44},3:{name:"(anonymous_3)",decl:{start:{line:56,column:17},end:{line:56,column:18}},loc:{start:{line:56,column:23},end:{line:73,column:3}},line:56},4:{name:"(anonymous_4)",decl:{start:{line:59,column:33},end:{line:59,column:34}},loc:{start:{line:59,column:45},end:{line:68,column:5}},line:59},5:{name:"(anonymous_5)",decl:{start:{line:65,column:21},end:{line:65,column:22}},loc:{start:{line:65,column:33},end:{line:67,column:7}},line:65},6:{name:"(anonymous_6)",decl:{start:{line:74,column:2},end:{line:74,column:3}},loc:{start:{line:74,column:18},end:{line:96,column:3}},line:74},7:{name:"(anonymous_7)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:37},end:{line:108,column:3}},line:97},8:{name:"(anonymous_8)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:32},end:{line:112,column:3}},line:109},9:{name:"(anonymous_9)",decl:{start:{line:113,column:2},end:{line:113,column:3}},loc:{start:{line:113,column:46},end:{line:145,column:3}},line:113},10:{name:"getRequiredProps",decl:{start:{line:117,column:13},end:{line:117,column:29}},loc:{start:{line:117,column:37},end:{line:127,column:5}},line:117},11:{name:"withoutLayers",decl:{start:{line:132,column:13},end:{line:132,column:26}},loc:{start:{line:132,column:34},end:{line:138,column:5}},line:132},12:{name:"(anonymous_12)",decl:{start:{line:146,column:2},end:{line:146,column:3}},loc:{start:{line:146,column:32},end:{line:164,column:3}},line:146},13:{name:"(anonymous_13)",decl:{start:{line:155,column:50},end:{line:155,column:51}},loc:{start:{line:155,column:63},end:{line:160,column:9}},line:155},14:{name:"(anonymous_14)",decl:{start:{line:165,column:2},end:{line:165,column:3}},loc:{start:{line:165,column:11},end:{line:275,column:3}},line:165},15:{name:"(anonymous_15)",decl:{start:{line:169,column:26},end:{line:169,column:27}},loc:{start:{line:169,column:38},end:{line:219,column:5}},line:169},16:{name:"(anonymous_16)",decl:{start:{line:176,column:40},end:{line:176,column:41}},loc:{start:{line:176,column:47},end:{line:176,column:52}},line:176},17:{name:"(anonymous_17)",decl:{start:{line:185,column:21},end:{line:185,column:22}},loc:{start:{line:185,column:44},end:{line:218,column:7}},line:185},18:{name:"(anonymous_18)",decl:{start:{line:187,column:50},end:{line:187,column:51}},loc:{start:{line:187,column:61},end:{line:189,column:9}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:278,column:18},end:{line:278,column:19}},loc:{start:{line:278,column:29},end:{line:291,column:1}},line:278},20:{name:"(anonymous_20)",decl:{start:{line:280,column:24},end:{line:280,column:25}},loc:{start:{line:280,column:35},end:{line:288,column:3}},line:280},21:{name:"(anonymous_21)",decl:{start:{line:283,column:44},end:{line:283,column:45}},loc:{start:{line:283,column:55},end:{line:283,column:77}},line:283},22:{name:"(anonymous_22)",decl:{start:{line:284,column:44},end:{line:284,column:45}},loc:{start:{line:284,column:55},end:{line:284,column:75}},line:284},23:{name:"(anonymous_23)",decl:{start:{line:289,column:36},end:{line:289,column:37}},loc:{start:{line:289,column:47},end:{line:289,column:55}},line:289}},branchMap:{0:{loc:{start:{line:62,column:6},end:{line:64,column:7}},type:"if",locations:[{start:{line:62,column:6},end:{line:64,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},1:{loc:{start:{line:82,column:8},end:{line:82,column:79}},type:"cond-expr",locations:[{start:{line:82,column:41},end:{line:82,column:75}},{start:{line:82,column:78},end:{line:82,column:79}}],line:82},2:{loc:{start:{line:88,column:6},end:{line:93,column:7}},type:"if",locations:[{start:{line:88,column:6},end:{line:93,column:7}},{start:{line:91,column:13},end:{line:93,column:7}}],line:88},3:{loc:{start:{line:88,column:10},end:{line:88,column:81}},type:"binary-expr",locations:[{start:{line:88,column:10},end:{line:88,column:23}},{start:{line:88,column:27},end:{line:88,column:81}}],line:88},4:{loc:{start:{line:100,column:4},end:{line:104,column:5}},type:"if",locations:[{start:{line:100,column:4},end:{line:104,column:5}},{start:{line:102,column:11},end:{line:104,column:5}}],line:100},5:{loc:{start:{line:111,column:11},end:{line:111,column:50}},type:"cond-expr",locations:[{start:{line:111,column:34},end:{line:111,column:38}},{start:{line:111,column:41},end:{line:111,column:50}}],line:111},6:{loc:{start:{line:114,column:4},end:{line:116,column:5}},type:"if",locations:[{start:{line:114,column:4},end:{line:116,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:114},7:{loc:{start:{line:121,column:6},end:{line:125,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:125,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:121},8:{loc:{start:{line:143,column:27},end:{line:143,column:52}},type:"binary-expr",locations:[{start:{line:143,column:27},end:{line:143,column:38}},{start:{line:143,column:42},end:{line:143,column:52}}],line:143},9:{loc:{start:{line:147,column:4},end:{line:163,column:5}},type:"if",locations:[{start:{line:147,column:4},end:{line:163,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:147},10:{loc:{start:{line:149,column:6},end:{line:162,column:7}},type:"if",locations:[{start:{line:149,column:6},end:{line:162,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:149},11:{loc:{start:{line:149,column:10},end:{line:149,column:51}},type:"binary-expr",locations:[{start:{line:149,column:10},end:{line:149,column:26}},{start:{line:149,column:30},end:{line:149,column:51}}],line:149},12:{loc:{start:{line:157,column:10},end:{line:159,column:11}},type:"if",locations:[{start:{line:157,column:10},end:{line:159,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:157},13:{loc:{start:{line:157,column:14},end:{line:157,column:68}},type:"binary-expr",locations:[{start:{line:157,column:14},end:{line:157,column:32}},{start:{line:157,column:36},end:{line:157,column:68}}],line:157},14:{loc:{start:{line:171,column:6},end:{line:184,column:7}},type:"if",locations:[{start:{line:171,column:6},end:{line:184,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:171},15:{loc:{start:{line:178,column:22},end:{line:178,column:98}},type:"binary-expr",locations:[{start:{line:178,column:22},end:{line:178,column:57}},{start:{line:178,column:61},end:{line:178,column:98}}],line:178},16:{loc:{start:{line:188,column:17},end:{line:188,column:96}},type:"binary-expr",locations:[{start:{line:188,column:17},end:{line:188,column:29}},{start:{line:188,column:33},end:{line:188,column:62}},{start:{line:188,column:66},end:{line:188,column:96}}],line:188},17:{loc:{start:{line:191,column:8},end:{line:193,column:9}},type:"if",locations:[{start:{line:191,column:8},end:{line:193,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:191},18:{loc:{start:{line:198,column:52},end:{line:198,column:153}},type:"binary-expr",locations:[{start:{line:198,column:52},end:{line:198,column:69}},{start:{line:198,column:73},end:{line:198,column:112}},{start:{line:198,column:116},end:{line:198,column:153}}],line:198},19:{loc:{start:{line:199,column:53},end:{line:199,column:105}},type:"binary-expr",locations:[{start:{line:199,column:53},end:{line:199,column:84}},{start:{line:199,column:88},end:{line:199,column:105}}],line:199},20:{loc:{start:{line:206,column:25},end:{line:206,column:43}},type:"binary-expr",locations:[{start:{line:206,column:25},end:{line:206,column:37}},{start:{line:206,column:41},end:{line:206,column:43}}],line:206},21:{loc:{start:{line:251,column:26},end:{line:251,column:96}},type:"cond-expr",locations:[{start:{line:251,column:69},end:{line:251,column:82}},{start:{line:251,column:85},end:{line:251,column:96}}],line:251},22:{loc:{start:{line:282,column:4},end:{line:282,column:22}},type:"if",locations:[{start:{line:282,column:4},end:{line:282,column:22}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:282},23:{loc:{start:{line:285,column:4},end:{line:287,column:5}},type:"if",locations:[{start:{line:285,column:4},end:{line:287,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:285},24:{loc:{start:{line:285,column:8},end:{line:285,column:67}},type:"binary-expr",locations:[{start:{line:285,column:8},end:{line:285,column:23}},{start:{line:285,column:27},end:{line:285,column:42}},{start:{line:285,column:46},end:{line:285,column:67}}],line:285}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0,0],17:[0,0],18:[0,0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx"],names:[],mappings:"AA+NoB,cAoEd,YApEc;AA/NpB,OAAO,WAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,YAAY;AACnB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OAEK;AACP;AAAA,EACE;AAAA,EACA;AAAA,OACK;AAEP,OAAO,oBAAoB;AAC3B,OAAO,mBAAmB;AAC1B,OAAO,cAAc;AAGrB,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB,mBAAmB;AACrD,SAA+B,uBAAuB;AAwBtD,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,kBAAkB,MAAM,UAAU;AACvC,SAAK,qBAAqB,MAAM,UAAU;AAC1C,SAAK,QAAQ;AAAA,MACX,iBAAiB,CAAC;AAAA,MAClB,sBAAsB;AAAA,MACtB,MAAM;AAAA,QACJ,KAAK,CAAC,iBAAiB;AAAA,MACzB;AAAA,MACA,QAAQ;AAAA,QACN,KAAK;AAAA,MACP;AAAA,IACF;AAAA,EACF;AAAA,EAEA,YAAY,WAAmB;AAC7B,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,QACJ,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,iBAAiB;AAAA,MACjC;AAAA,MACA,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,KAAK,MAAM,OAAO,SAAS;AAAA,MAC3C;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,eAAe,MAAM;AACnB,QAAI,MAAM;AAEV,UAAM,YAAqC,CAAC;AAE5C,SAAK,cAAc,EAAE,QAAQ,YAAU;AACrC,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,YAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAG7C,UAAI,OAAO,SAAS,GAAG;AACrB,kBAAU,SAAS,IAAI,KAAK,MAAM;AAAA,MACpC;AAEA,aAAO,QAAQ,CAAC,WAAW;AACzB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,MACjB,sBAAsB,CAAC,KAAK,MAAM;AAAA,IACpC,CAAC;AAAA,EACH;AAAA,EAEA,gBAA0D;AACxD,UAAM,SAAS,CAAC;AAChB,UAAM,eAAe,oBAAI,IAAI;AAE7B,aAAS,IAAI,GAAG,IAAI,KAAK,MAAM,OAAO,QAAQ,KAAK;AACjD,YAAM,YAAY,KAAK,MAAM,OAAO,CAAC;AACrC,YAAM,gBAAgB,KAAK,MAAM,OAAO,IAAE,CAAC;AAC3C,mBAAa;AAAA,QAAI,UAAU;AAAA,QACzB,aAAa,IAAI,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,IAAI,IAAI;AAAA,MACxE;AACA,YAAM,QAAQ;AAAA,QACZ,GAAG;AAAA,QACH,KAAK,eAAe,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,CAAC;AAAA,MACpE;AACA,UAAG,iBAAiB,YAAY,cAAc,EAAE,KAAK,YAAY,MAAM,EAAE,GAAG;AAC1E,cAAM,YAAY,OAAO,OAAO,SAAS,CAAC;AAC1C,kBAAU,KAAK,KAAK;AAAA,MACtB,OAAO;AACL,eAAO,KAAK,CAAC,KAAK,CAAC;AAAA,MACrB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,iBAAiB,aAAqB,KAAa;AACjD,UAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAC7C,UAAM,YAAY,EAAE,GAAG,KAAK,MAAM,gBAAgB;AAClD,QAAG,aAAa,KAAK,MAAM,iBAAiB;AAC1C,gBAAU,SAAS,IAAI,CAAC,KAAK,MAAM,gBAAgB,SAAS;AAAA,IAC9D,OAAO;AACL,gBAAU,SAAS,IAAI;AAAA,IACzB;AACA,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,aAAqB,KAAa;AAC5C,UAAM,YAAY,KAAK,MAAM,gBAAgB,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG,CAAC;AACzE,WAAO,cAAc,SAAY,OAAO;AAAA,EAC1C;AAAA,EAEA,sBAAuB,WAAoC,WAAoC;AAE7F,QAAI,KAAK,UAAU,WAAW;AAC5B,aAAO;AAAA,IACT;AAIA,aAAS,iBAAiB,OAA2B;AACnD,YAAM,MAAiD;AAAA,QACrD,IAAI,MAAM;AAAA,MACZ;AAEA,UAAI,MAAM,QAAQ;AAChB,YAAI,SAAS;AAAA,UACX,YAAY,MAAM,OAAO;AAAA,QAC3B;AAAA,MACF;AACA,aAAO;AAAA,IACT;AACA,UAAM,cAAc,OAAO;AAAA,MACzB,UAAU,OAAO,IAAI,gBAAgB;AAAA,MACrC,KAAK,MAAM,OAAO,IAAI,gBAAgB;AAAA,IACxC;AAEA,aAAS,cAAc,OAAgC;AACrD,YAAM,MAAM;AAAA,QACV,GAAG;AAAA,MACL;AACA,aAAO,IAAI,QAAQ;AACnB,aAAO;AAAA,IACT;AAIA,UAAM,aAAa,OAAO;AAAA,MACxB,cAAc,KAAK,KAAK;AAAA,MACxB,cAAc,SAAS;AAAA,IACzB;AAEA,UAAM,eAAe,EAAE,eAAe;AACtC,WAAO;AAAA,EACT;AAAA,EAEA,mBAAoB,WAAoC;AACtD,QAAI,UAAU,uBAAuB,KAAK,MAAM,oBAAoB;AAClE,YAAM,mBAAmB,KAAK,gBAAgB;AAC9C,UAAI,oBAAoB,iBAAiB,MAAM;AAC7C,cAAM,SAAS,iBAAiB;AAChC,cAAM,UAAU;AAAA,UACd,MAAM,KAAK,mBAAmB;AAAA,UAC9B,WAAW;AAAA,QACb;AACA,cAAM,WAAW,IAAI,qBAAqB,aAAW;AACnD,mBAAS,UAAU,MAAM;AACzB,cAAI,QAAQ,SAAS,KAAK,QAAQ,CAAC,EAAE,oBAAoB,GAAG;AAC1D,mBAAO,eAAe;AAAA,UACxB;AAAA,QACF,GAAG,OAAO;AAEV,iBAAS,QAAQ,MAAM;AAAA,MACzB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AAEP,UAAM,YAA2B,CAAC;AAClC,QAAI,MAAM;AACV,UAAM,gBAAgB,KAAK,cAAc;AACzC,kBAAc,QAAQ,YAAU;AAC9B,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,UAAG,OAAO,SAAS,GAAG;AACpB,cAAM,MAAM;AAAA,UAAC;AAAA;AAAA,YACX,eAAa,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAAA,YACxC,iBAAe,OAAO,IAAI,OAAK,EAAE,GAAG,EAAE,KAAK,GAAG;AAAA,YAE9C,OAAO;AAAA,YACP,UAAU,CAAC,KAAK,YAAY,aAAa,GAAG,KAAK,QAAQ,KAAK,MAAM;AAAA,YACpE,gBAAgB,KAAK,iBAAiB,KAAK,MAAM,aAAa,GAAG;AAAA;AAAA,UAH5D,SAAS,WAAW,IAAI,GAAG;AAAA,QAIlC;AACA,kBAAU,KAAK,GAAG;AAAA,MACpB;AAEA,aAAO,QAAQ,CAAC,OAAO,eAAe;AACpC,cAAM,WAAW,wBAAwB,KAAK,MAAM,QAAQ,GAAG;AAE/D,cAAM,aAAa,KAAK,MAAM,OAAO,KAAK,WAAS;AACjD,iBACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS;AAAA,QAE/B,CAAC;AAED,cAAM,kBAAgD,CAAC;AACvD,YAAI,QAAQ,KAAK,MAAM,oBAAoB;AACzC,0BAAgB,MAAM,KAAK;AAAA,QAC7B;AAEA,cAAM,WAAW;AAAA,UAAC;AAAA;AAAA,YAChB,WAAW,WAAW;AAAA,cACpB,sCAAsC,OAAO,SAAS,KAAK,KAAK,YAAY,aAAa,QAAQ,KAAK,QAAQ,KAAK,MAAM;AAAA,cACzH,uCAAuC,cAAc,OAAO,SAAS,KAAK,OAAO,SAAS;AAAA,cAC1F,mCAAmC,CAAC,CAAC;AAAA,YACvC,CAAC;AAAA,YAED,IAAI,MAAM;AAAA,YACV,SAAS,MAAM;AAAA,YACf,YAAY;AAAA,YACZ,WAAW,MAAM;AAAA,YACjB,aAAa,MAAM,UAAU,CAAC,GAAG;AAAA,YACjC,YAAY,QAAQ,KAAK,MAAM;AAAA,YAC/B,eAAe,KAAK,MAAM;AAAA,YAC1B,gBAAgB,KAAK,MAAM,gBAAgB,KAAK,IAAI;AAAA,YACpD,aAAa,KAAK,MAAM,YAAY,KAAK,IAAI;AAAA,YAC7C,yBAAyB,KAAK,MAAM,wBAAwB,KAAK,IAAI;AAAA,YACpE,GAAG;AAAA;AAAA,UAXC,MAAM;AAAA,QAYb;AACA,kBAAU,KAAK,QAAQ;AACvB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,UAAM,IAAI,KAAK,MAAM;AAErB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAY;AAAA,QACZ,MAAK;AAAA,QACL,cAAY,EAAE,aAAa;AAAA,QAC3B,KAAK,KAAK;AAAA,QAEV;AAAA;AAAA,YAAC;AAAA;AAAA,cAEC,QAAQ,KAAK,MAAM;AAAA,cACnB,SAAS,KAAK,MAAM;AAAA,cACpB,QAAQ,KAAK,MAAM,OAAO;AAAA,cAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,cAC/C,gBAAgB,KAAK,MAAM;AAAA;AAAA,YALtB,KAAK,MAAM,KAAK;AAAA,UAMvB;AAAA,UACA,qBAAC,YAAO,WAAU,8BAA6B,eAAY,qBACzD;AAAA,gCAAC,UAAK,WAAU,oCAAoC,YAAE,QAAQ,GAAE;AAAA,YAChE,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,IAAG;AAAA,gBACH,eAAY;AAAA,gBACZ,SAAS,KAAK;AAAA,gBACd,WAAU;AAAA,gBACT,eAAK,MAAM,yBAAyB,OACnC,EAAE,UAAU,IAEZ,EAAE,QAAQ;AAAA;AAAA,YAEd,GACF,GACF;AAAA,YACA,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,SAAS,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,gBAC1C,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACT,YAAE,WAAW;AAAA;AAAA,YAChB,GACF,GACF;AAAA,aACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,MAAK;AAAA,cACL,cAAY,EAAE,aAAa;AAAA,cAE3B,8BAAC,QAAG,WAAU,iCACX,qBACH;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AAMvE,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,UAAU,WAAW,UAAU,eAAe,EAAE,sBAAsB,EAAE,UAAU,EAAE,EAAE,CAAC,CAAC;AAE9F,QAAM,gBAAgB,CAAC,UAAwB;AAC7C,UAAM,EAAC,QAAQ,KAAI,IAAI;AACvB,QAAI,CAAC,KAAM;AAEX,UAAM,WAAW,MAAM,OAAO,UAAU,WAAS,MAAM,OAAO,OAAO,EAAE;AACvE,UAAM,WAAW,MAAM,OAAO,UAAU,WAAS,MAAM,OAAO,KAAK,EAAE;AAErE,QAAI,aAAa,MAAM,aAAa,MAAM,aAAa,UAAU;AAC/D,YAAM,YAAY,EAAC,UAAU,SAAQ,CAAC;AAAA,IACxC;AAAA,EACF;AAEA,QAAM,WAAW,MAAM,OAAO,IAAI,WAAS,MAAM,EAAE;AAEnD,SACE,oBAAC,cAAW,SAAkB,oBAAoB,eAAe,WAAW,eAC1E,8BAAC,mBAAgB,OAAO,UAAU,UAAU,6BAC1C,8BAAC,sBAAoB,GAAG,OAAO,GACjC,GACF;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3031fd34f43c8d651f443f714d2dfaaa5f809423"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ut=function(){return s},s}Ut();class b7e extends On.Component{static defaultProps=(Ut().s[0]++,{onLayerSelect:()=>{Ut().f[0]++}});selectedItemRef;scrollContainerRef;constructor(e){Ut().f[1]++,Ut().s[1]++,super(e),Ut().s[2]++,this.selectedItemRef=On.createRef(),Ut().s[3]++,this.scrollContainerRef=On.createRef(),Ut().s[4]++,this.state={collapsedGroups:{},areAllGroupsExpanded:!1,keys:{add:+C2()},isOpen:{add:!1}}}toggleModal(e){Ut().f[2]++,Ut().s[5]++,this.setState({keys:{...this.state.keys,[e]:+C2()},isOpen:{...this.state.isOpen,[e]:!this.state.isOpen[e]}})}toggleLayers=(Ut().s[6]++,()=>{Ut().f[3]++;let e=(Ut().s[7]++,0);const t=(Ut().s[8]++,{});Ut().s[9]++,this.groupedLayers().forEach(i=>{Ut().f[4]++;const r=(Ut().s[10]++,Ex(i[0].id)),o=(Ut().s[11]++,[r,e].join("-"));Ut().s[12]++,i.length>1?(Ut().b[0][0]++,Ut().s[13]++,t[o]=this.state.areAllGroupsExpanded):Ut().b[0][1]++,Ut().s[14]++,i.forEach(s=>{Ut().f[5]++,Ut().s[15]++,e+=1})}),Ut().s[16]++,this.setState({collapsedGroups:t,areAllGroupsExpanded:!this.state.areAllGroupsExpanded})});groupedLayers(){Ut().f[6]++;const e=(Ut().s[17]++,[]),t=(Ut().s[18]++,new Map);Ut().s[19]++;for(let i=(Ut().s[20]++,0);i<this.props.layers.length;i++){const r=(Ut().s[21]++,this.props.layers[i]),o=(Ut().s[22]++,this.props.layers[i-1]);Ut().s[23]++,t.set(r.id,t.has(r.id)?(Ut().b[1][0]++,t.get(r.id)+1):(Ut().b[1][1]++,0));const s=(Ut().s[24]++,{...r,key:`layers-list-${r.id}-${t.get(r.id)}`});if(Ut().s[25]++,Ut().b[3][0]++,o&&(Ut().b[3][1]++,Ex(o.id)==Ex(s.id))){Ut().b[2][0]++;const a=(Ut().s[26]++,e[e.length-1]);Ut().s[27]++,a.push(s)}else Ut().b[2][1]++,Ut().s[28]++,e.push([s])}return Ut().s[29]++,e}toggleLayerGroup(e,t){Ut().f[7]++;const i=(Ut().s[30]++,[e,t].join("-")),r=(Ut().s[31]++,{...this.state.collapsedGroups});Ut().s[32]++,i in this.state.collapsedGroups?(Ut().b[4][0]++,Ut().s[33]++,r[i]=!this.state.collapsedGroups[i]):(Ut().b[4][1]++,Ut().s[34]++,r[i]=!1),Ut().s[35]++,this.setState({collapsedGroups:r})}isCollapsed(e,t){Ut().f[8]++;const i=(Ut().s[36]++,this.state.collapsedGroups[[e,t].join("-")]);return Ut().s[37]++,i===void 0?(Ut().b[5][0]++,!0):(Ut().b[5][1]++,i)}shouldComponentUpdate(e,t){if(Ut().f[9]++,Ut().s[38]++,this.state!==t)return Ut().b[6][0]++,Ut().s[39]++,!0;Ut().b[6][1]++;function i(c){Ut().f[10]++;const f=(Ut().s[40]++,{id:c.id});return Ut().s[41]++,c.layout?(Ut().b[7][0]++,Ut().s[42]++,f.layout={visibility:c.layout.visibility}):Ut().b[7][1]++,Ut().s[43]++,f}const r=(Ut().s[44]++,A9.isEqual(e.layers.map(i),this.props.layers.map(i)));function o(c){Ut().f[11]++;const f=(Ut().s[45]++,{...c});return Ut().s[46]++,delete f.layers,Ut().s[47]++,f}const s=(Ut().s[48]++,A9.isEqual(o(this.props),o(e))),a=(Ut().s[49]++,Ut().b[8][0]++,!(r&&(Ut().b[8][1]++,s)));return Ut().s[50]++,a}componentDidUpdate(e){if(Ut().f[12]++,Ut().s[51]++,e.selectedLayerIndex!==this.props.selectedLayerIndex){Ut().b[9][0]++;const t=(Ut().s[52]++,this.selectedItemRef.current);if(Ut().s[53]++,Ut().b[11][0]++,t&&(Ut().b[11][1]++,t.node)){Ut().b[10][0]++;const i=(Ut().s[54]++,t.node),r=(Ut().s[55]++,{root:this.scrollContainerRef.current,threshold:1}),o=(Ut().s[56]++,new IntersectionObserver(s=>{Ut().f[13]++,Ut().s[57]++,o.unobserve(i),Ut().s[58]++,Ut().b[13][0]++,s.length>0&&(Ut().b[13][1]++,s[0].intersectionRatio<1)?(Ut().b[12][0]++,Ut().s[59]++,i.scrollIntoView()):Ut().b[12][1]++},r));Ut().s[60]++,o.observe(i)}else Ut().b[10][1]++}else Ut().b[9][1]++}render(){Ut().f[14]++;const e=(Ut().s[61]++,[]);let t=(Ut().s[62]++,0);const i=(Ut().s[63]++,this.groupedLayers());Ut().s[64]++,i.forEach(o=>{Ut().f[15]++;const s=(Ut().s[65]++,Ex(o[0].id));if(Ut().s[66]++,o.length>1){Ut().b[14][0]++;const a=(Ut().s[67]++,te.jsx(_Ee,{"data-wd-key":[s,t].join("-"),"aria-controls":o.map(c=>(Ut().f[16]++,Ut().s[68]++,c.key)).join(" "),title:s,isActive:(Ut().b[15][0]++,!this.isCollapsed(s,t)||(Ut().b[15][1]++,t===this.props.selectedLayerIndex)),onActiveToggle:this.toggleLayerGroup.bind(this,s,t)},`group-${s}-${t}`));Ut().s[69]++,e.push(a)}else Ut().b[14][1]++;Ut().s[70]++,o.forEach((a,c)=>{Ut().f[17]++;const f=(Ut().s[71]++,v7e(this.props.layers,t)),y=(Ut().s[72]++,this.props.errors.find(I=>(Ut().f[18]++,Ut().s[73]++,Ut().b[16][0]++,I.parsed&&(Ut().b[16][1]++,I.parsed.type==="layer")&&(Ut().b[16][2]++,I.parsed.data.index==t)))),_=(Ut().s[74]++,{});Ut().s[75]++,t===this.props.selectedLayerIndex?(Ut().b[17][0]++,Ut().s[76]++,_.ref=this.selectedItemRef):Ut().b[17][1]++;const E=(Ut().s[77]++,te.jsx(MEe,{className:x0({"maputnik-layer-list-item-collapsed":(Ut().b[18][0]++,o.length>1&&(Ut().b[18][1]++,this.isCollapsed(s,f))&&(Ut().b[18][2]++,t!==this.props.selectedLayerIndex)),"maputnik-layer-list-item-group-last":(Ut().b[19][0]++,c==o.length-1&&(Ut().b[19][1]++,o.length>1)),"maputnik-layer-list-item--error":!!y}),id:a.key,layerId:a.id,layerIndex:t,layerType:a.type,visibility:(Ut().b[20][0]++,a.layout||(Ut().b[20][1]++,{})).visibility,isSelected:t===this.props.selectedLayerIndex,onLayerSelect:this.props.onLayerSelect,onLayerDestroy:this.props.onLayerDestroy?.bind(this),onLayerCopy:this.props.onLayerCopy.bind(this),onLayerVisibilityToggle:this.props.onLayerVisibilityToggle.bind(this),..._},a.key));Ut().s[78]++,e.push(E),Ut().s[79]++,t+=1})});const r=(Ut().s[80]++,this.props.t);return Ut().s[81]++,te.jsxs("section",{className:"maputnik-layer-list","data-wd-key":"layer-list",role:"complementary","aria-label":r("Layers list"),ref:this.scrollContainerRef,children:[te.jsx(m7e,{layers:this.props.layers,sources:this.props.sources,isOpen:this.state.isOpen.add,onOpenToggle:this.toggleModal.bind(this,"add"),onLayersChange:this.props.onLayersChange},this.state.keys.add),te.jsxs("header",{className:"maputnik-layer-list-header","data-wd-key":"layer-list.header",children:[te.jsx("span",{className:"maputnik-layer-list-header-title",children:r("Layers")}),te.jsx("span",{className:"maputnik-space"}),te.jsx("div",{className:"maputnik-default-property",children:te.jsx("div",{className:"maputnik-multibutton",children:te.jsx("button",{id:"skip-target-layer-list","data-wd-key":"skip-target-layer-list",onClick:this.toggleLayers,className:"maputnik-button",children:this.state.areAllGroupsExpanded===!0?(Ut().b[21][0]++,r("Collapse")):(Ut().b[21][1]++,r("Expand"))})})}),te.jsx("div",{className:"maputnik-default-property",children:te.jsx("div",{className:"maputnik-multibutton",children:te.jsx("button",{onClick:this.toggleModal.bind(this,"add"),"data-wd-key":"layer-list:add-layer",className:"maputnik-button maputnik-button-selected",children:r("Add Layer")})})})]}),te.jsx("div",{role:"navigation","aria-label":r("Layers list"),children:te.jsx("ul",{className:"maputnik-layer-list-container",children:e})})]})}}const C7e=(Ut().s[82]++,Mo()(b7e));Ut().s[83]++;const _7e=n=>{Ut().f[19]++;const e=(Ut().s[84]++,$we(Vwe(LU,{activationConstraint:{distance:5}})));Ut().s[85]++;const t=r=>{Ut().f[20]++;const{active:o,over:s}=(Ut().s[86]++,r);if(Ut().s[87]++,s)Ut().b[22][1]++;else{Ut().b[22][0]++,Ut().s[88]++;return}const a=(Ut().s[89]++,n.layers.findIndex(f=>(Ut().f[21]++,Ut().s[90]++,f.id===o.id))),c=(Ut().s[91]++,n.layers.findIndex(f=>(Ut().f[22]++,Ut().s[92]++,f.id===s.id)));Ut().s[93]++,Ut().b[24][0]++,a!==-1&&(Ut().b[24][1]++,c!==-1)&&(Ut().b[24][2]++,a!==c)?(Ut().b[23][0]++,Ut().s[94]++,n.onMoveLayer({oldIndex:a,newIndex:c})):Ut().b[23][1]++},i=(Ut().s[95]++,n.layers.map(r=>(Ut().f[23]++,Ut().s[96]++,r.id)));return Ut().s[97]++,te.jsx(JSe,{sensors:e,collisionDetection:eSe,onDragEnd:t,children:te.jsx(hEe,{items:i,strategy:cEe,children:te.jsx(C7e,{...n})})})};var wI,UQ;function Ooe(){if(UQ)return wI;UQ=1;var n={},e="a menu outside a mounted Wrapper with an id, or a menu that does not exist";function t(s,a){n[s]=a}function i(s){delete n[s]}function r(s,a){var c=n[s];if(!c)throw new Error("Cannot open "+e);c.openMenu(a)}function o(s,a){var c=n[s];if(!c)throw new Error("Cannot close "+e);c.closeMenu(a)}return wI={registerManager:t,unregisterManager:i,openMenu:r,closeMenu:o},wI}var SI,KQ;function x7e(){if(KQ)return SI;KQ=1;function n(r){r=r||{};var o=r.keybindings||{};this._settings={keybindings:{next:o.next||{keyCode:40},prev:o.prev||{keyCode:38},first:o.first,last:o.last},wrap:r.wrap,stringSearch:r.stringSearch,stringSearchDelay:800},this._keybindingsLookup=[];var s,a;for(s in this._settings.keybindings)a=this._settings.keybindings[s],a&&[].concat(a).forEach((function(c){c.metaKey=c.metaKey||!1,c.ctrlKey=c.ctrlKey||!1,c.altKey=c.altKey||!1,c.shiftKey=c.shiftKey||!1,this._keybindingsLookup.push({action:s,eventMatcher:c})}).bind(this));this._searchString="",this._members=[],r.members&&this.setMembers(r.members),this._boundHandleKeydownEvent=this._handleKeydownEvent.bind(this)}n.prototype.activate=function(){return document.addEventListener("keydown",this._boundHandleKeydownEvent,!0),this},n.prototype.deactivate=function(){return document.removeEventListener("keydown",this._boundHandleKeydownEvent,!0),this._clearSearchStringRefreshTimer(),this},n.prototype._handleKeydownEvent=function(r){var o=this._getActiveElementIndex();if(o!==-1){var s=!1;this._keybindingsLookup.forEach((function(a){if(e(a.eventMatcher,r))switch(s=!0,r.preventDefault(),a.action){case"next":this.moveFocusForward();break;case"prev":this.moveFocusBack();break;case"first":this.moveFocusToFirst();break;case"last":this.moveFocusToLast();break;default:return}}).bind(this)),s||this._handleUnboundKey(r)}},n.prototype.moveFocusForward=function(){var r=this._getActiveElementIndex(),o;return r<this._members.length-1?o=r+1:this._settings.wrap?o=0:o=r,this.focusNodeAtIndex(o),o},n.prototype.moveFocusBack=function(){var r=this._getActiveElementIndex(),o;return r>0?o=r-1:this._settings.wrap?o=this._members.length-1:o=r,this.focusNodeAtIndex(o),o},n.prototype.moveFocusToFirst=function(){this.focusNodeAtIndex(0)},n.prototype.moveFocusToLast=function(){this.focusNodeAtIndex(this._members.length-1)},n.prototype._handleUnboundKey=function(r){if(this._settings.stringSearch){if(this._searchString!==""&&(r.key===" "||r.keyCode===32))return r.preventDefault(),-1;if(!t(r.keyCode)||r.ctrlKey||r.metaKey||r.altKey)return-1;r.preventDefault(),this._addToSearchString(String.fromCharCode(r.keyCode)),this._runStringSearch()}},n.prototype._clearSearchString=function(){this._searchString=""},n.prototype._addToSearchString=function(r){this._searchString+=r.toLowerCase()},n.prototype._startSearchStringRefreshTimer=function(){var r=this;this._clearSearchStringRefreshTimer(),this._stringSearchTimer=setTimeout(function(){r._clearSearchString()},this._settings.stringSearchDelay)},n.prototype._clearSearchStringRefreshTimer=function(){clearTimeout(this._stringSearchTimer)},n.prototype._runStringSearch=function(){this._startSearchStringRefreshTimer(),this.moveFocusByString(this._searchString)},n.prototype.moveFocusByString=function(r){for(var o,s=0,a=this._members.length;s<a;s++)if(o=this._members[s],!!o.text&&o.text.indexOf(r)===0)return i(o.node)},n.prototype._findIndexOfNode=function(r){for(var o=0,s=this._members.length;o<s;o++)if(this._members[o].node===r)return o;return-1},n.prototype._getActiveElementIndex=function(){return this._findIndexOfNode(document.activeElement)},n.prototype.focusNodeAtIndex=function(r){var o=this._members[r];return o&&i(o.node),this},n.prototype.addMember=function(r,o){var s=r.node||r,a=r.text||s.getAttribute("data-focus-group-text")||s.textContent||"";this._checkNode(s);var c=a.replace(/[\W_]/g,"").toLowerCase(),f={node:s,text:c};return o!=null?this._members.splice(o,0,f):this._members.push(f),this},n.prototype.removeMember=function(r){var o=typeof r=="number"?r:this._findIndexOfNode(r);if(o!==-1)return this._members.splice(o,1),this},n.prototype.clearMembers=function(){return this._members=[],this},n.prototype.setMembers=function(r){this.clearMembers();for(var o=0,s=r.length;o<s;o++)this.addMember(r[o]);return this},n.prototype.getMembers=function(){return this._members},n.prototype._checkNode=function(r){if(!r.nodeType||r.nodeType!==window.Node.ELEMENT_NODE)throw new Error("focus-group: only DOM nodes allowed");return r};function e(r,o){for(var s in r)if(o[s]!==void 0&&r[s]!==o[s])return!1;return!0}function t(r){return r>=65&&r<=90}function i(r){!r||!r.focus||(r.focus(),r.tagName.toLowerCase()==="input"&&r.select())}return SI=function(o){return new n(o)},SI}var EI,FQ;function M7e(){if(FQ)return EI;FQ=1;var n=x7e(),e=Ooe(),t={wrap:!0,stringSearch:!0},i={init:function(c){this.updateOptions(c),this.handleBlur=r.bind(this),this.handleSelection=o.bind(this),this.handleMenuKey=s.bind(this),this.focusGroup=n(t),this.button=null,this.menu=null,this.isOpen=!1},updateOptions:function(c){var f=this.options;this.options=c||this.options||{},typeof this.options.closeOnSelection>"u"&&(this.options.closeOnSelection=!0),typeof this.options.closeOnBlur>"u"&&(this.options.closeOnBlur=!0),this.options.id&&e.registerManager(this.options.id,this),f&&f.id&&f.id!==this.options.id&&e.unregisterManager(this.options.id,this)},focusItem:function(c){this.focusGroup.focusNodeAtIndex(c)},addItem:function(c){this.focusGroup.addMember(c)},clearItems:function(){this.focusGroup.clearMembers()},handleButtonNonArrowKey:function(c){this.focusGroup._handleUnboundKey(c)},destroy:function(){this.button=null,this.menu=null,this.focusGroup.deactivate(),clearTimeout(this.blurTimer),clearTimeout(this.moveFocusTimer)},update:function(){this.menu.setState({isOpen:this.isOpen}),this.button.setState({menuOpen:this.isOpen}),this.options.onMenuToggle&&this.options.onMenuToggle({isOpen:this.isOpen})},openMenu:function(c){if(!this.isOpen&&(c=c||{},c.focusMenu===void 0&&(c.focusMenu=!0),this.isOpen=!0,this.update(),this.focusGroup.activate(),c.focusMenu)){var f=this;this.moveFocusTimer=setTimeout(function(){f.focusItem(0)},0)}},closeMenu:function(c){this.isOpen&&(c=c||{},this.isOpen=!1,this.update(),c.focusButton&&this.button.ref.current.focus())},toggleMenu:function(c,f){c=c||{},f=f||{},this.isOpen?this.closeMenu(c):this.openMenu(f)}};function r(){var a=this;a.blurTimer=setTimeout(function(){if(a.button){var c=a.button.ref.current;if(c){var f=c.ownerDocument.activeElement;if(!(c&&f===c)){var y=a.menu.ref.current;if(y===f){a.focusItem(0);return}y&&y.contains(f)||a.isOpen&&a.closeMenu({focusButton:!1})}}}},0)}function o(a,c){this.options.closeOnSelection&&this.closeMenu({focusButton:!0}),this.options.onSelection&&this.options.onSelection(a,c)}function s(a){if(this.isOpen)switch(a.key){case"Escape":a.preventDefault(),this.closeMenu({focusButton:!0});break;case"Home":a.preventDefault(),this.focusGroup.moveFocusToFirst();break;case"End":a.preventDefault(),this.focusGroup.moveFocusToLast();break}}return EI=function(a){var c=Object.create(i);return c.init(a),c},EI}var BI,zQ;function BB(){if(zQ)return BI;zQ=1;var n=pa(),e=n.createContext();return BI=e,BI}var OI,jQ;function OB(){if(jQ)return OI;jQ=1;var n=W1();return OI={refType:n.oneOfType([n.func,n.shape({current:n.elementType})])},OI}var II,NQ;function IB(){return NQ||(NQ=1,II=function(n,e,t){t=t||{};for(var i in e)e.hasOwnProperty(i)&&(t[i]||(n[i]=e[i]))}),II}var TI,GQ;function w7e(){if(GQ)return TI;GQ=1;function n(I,P){if(!(I instanceof P))throw new TypeError("Cannot call a class as a function")}function e(I,P){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:I}function t(I,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);I.prototype=Object.create(P&&P.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(I,P):I.__proto__=P)}var i=pa(),r=W1(),o=M7e(),s=BB(),a=OB(),c=a.refType,f=IB(),y={children:r.node.isRequired,forwardedRef:c,onMenuToggle:r.func,onSelection:r.func,closeOnSelection:r.bool,closeOnBlur:r.bool,tag:r.string},_=function(P){return{onMenuToggle:P.onMenuToggle,onSelection:P.onSelection,closeOnSelection:P.closeOnSelection,closeOnBlur:P.closeOnBlur,id:P.id}},E=(function(I){t(P,I);function P(K){n(this,P);var z=e(this,I.call(this,K));return z.manager=o(_(K)),z}return P.prototype.componentDidUpdate=function(){this.manager.updateOptions(_(this.props))},P.prototype.render=function(){var z={};return f(z,this.props,y),i.createElement(s.Provider,{value:this.manager},i.createElement(this.props.tag,z,this.props.children))},P})(i.Component);return E.propTypes=y,E.defaultProps={tag:"div"},TI=i.forwardRef(function(I,P){var K={forwardedRef:P};return f(K,I,{children:y.children,forwardedRef:y.forwardedRef}),f(K,{forwardedRef:P}),i.createElement(E,K,I.children)}),TI}var kI,WQ;function S7e(){if(WQ)return kI;WQ=1;function n(E,I){if(!(E instanceof I))throw new TypeError("Cannot call a class as a function")}function e(E,I){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:E}function t(E,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);E.prototype=Object.create(I&&I.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(E,I):E.__proto__=I)}var i=pa(),r=W1(),o=BB(),s=OB(),a=s.refType,c=IB(),f={ambManager:r.object.isRequired,children:r.node.isRequired,disabled:r.bool,forwardedRef:a,tag:r.string},y=function(){return["button","fieldset","input","optgroup","option","select","textarea"]},_=(function(E){t(I,E);function I(){var P,K,z;n(this,I);for(var Q=arguments.length,V=Array(Q),$=0;$<Q;$++)V[$]=arguments[$];return z=(P=(K=e(this,E.call.apply(E,[this].concat(V))),K),K.ref=i.createRef(),K.handleKeyDown=function(Z){if(!K.props.disabled){var ee=K.props.ambManager;switch(Z.key){case"ArrowDown":Z.preventDefault(),ee.isOpen?ee.focusItem(0):ee.openMenu();break;case"Enter":case" ":Z.preventDefault(),ee.toggleMenu();break;case"Escape":ee.handleMenuKey(Z);break;default:ee.handleButtonNonArrowKey(Z)}}},K.handleClick=function(){K.props.disabled||K.props.ambManager.toggleMenu({},{focusMenu:!1})},K.setRef=function(Z){K.ref.current=Z,typeof K.props.forwardedRef=="function"?K.props.forwardedRef(Z):K.props.forwardedRef&&(K.props.forwardedRef.current=Z)},P),e(K,z)}return I.prototype.componentDidMount=function(){this.props.ambManager.button=this},I.prototype.componentWillUnmount=function(){this.props.ambManager.destroy()},I.prototype.render=function(){var K=this.props,z=this.props.ambManager,Q={role:"button",tabIndex:K.disabled?"":"0","aria-haspopup":!0,"aria-expanded":z.isOpen,"aria-disabled":K.disabled,onKeyDown:this.handleKeyDown,onClick:this.handleClick},V={};return c(V,f),y().indexOf(K.tag)>=0&&delete V.disabled,z.options.closeOnBlur&&(Q.onBlur=z.handleBlur),c(Q,K,V),c(Q,{ref:this.setRef}),i.createElement(K.tag,Q,K.children)},I})(i.Component);return _.propTypes=f,_.defaultProps={tag:"span"},kI=i.forwardRef(function(E,I){return i.createElement(o.Consumer,null,function(P){var K={ambManager:P,forwardedRef:I};return c(K,E,{ambManager:f.ambManager,children:f.children,forwardedRef:f.forwardedRef}),i.createElement(_,K,E.children)})}),kI}var DI,QQ;function E7e(){return QQ||(QQ=1,DI=function(e,t,i){var r=0,o=0,s=!1,a=!1,c=!1;e.addEventListener("click",f,i),e.addEventListener("touchstart",y,i);function f(z){c||t(z)}function y(z){c=!0,!s&&(s=!0,e.addEventListener("touchmove",_,i),e.addEventListener("touchend",E,i),e.addEventListener("touchcancel",I,i),a=!1,r=z.touches[0].clientX,o=z.touches[0].clientY)}function _(z){a||Math.abs(z.touches[0].clientX-r)<=10&&Math.abs(z.touches[0].clientY-o)<=10||(a=!0)}function E(z){s=!1,P(),a||t(z)}function I(){s=!1,a=!1,r=0,o=0}function P(){e.removeEventListener("touchmove",_,i),e.removeEventListener("touchend",E,i),e.removeEventListener("touchcancel",I,i)}function K(){e.removeEventListener("click",f,i),e.removeEventListener("touchstart",y,i),P()}return{remove:K}}),DI}var RI,qQ;function B7e(){if(qQ)return RI;qQ=1;function n(E,I){if(!(E instanceof I))throw new TypeError("Cannot call a class as a function")}function e(E,I){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:E}function t(E,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);E.prototype=Object.create(I&&I.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(E,I):E.__proto__=I)}var i=pa(),r=W1(),o=E7e(),s=BB(),a=OB(),c=a.refType,f=IB(),y={ambManager:r.object.isRequired,children:r.oneOfType([r.func,r.node]).isRequired,forwardedRef:c,tag:r.string},_=(function(E){t(I,E);function I(){var P,K,z;n(this,I);for(var Q=arguments.length,V=Array(Q),$=0;$<Q;$++)V[$]=arguments[$];return z=(P=(K=e(this,E.call.apply(E,[this].concat(V))),K),K.ref=i.createRef(),K.addTapListener=function(){var Z=K.ref.current;if(Z){var ee=Z.ownerDocument;ee&&(K.tapListener=o(ee.documentElement,K.handleTap))}},K.handleTap=function(Z){K.ref.current.contains(Z.target)||K.props.ambManager.button.ref.current.contains(Z.target)||K.props.ambManager.closeMenu()},K.setRef=function(Z){K.ref.current=Z,typeof K.props.forwardedRef=="function"?K.props.forwardedRef(Z):K.props.forwardedRef&&(K.props.forwardedRef.current=Z)},P),e(K,z)}return I.prototype.componentDidMount=function(){this.props.ambManager.menu=this},I.prototype.componentDidUpdate=function(){var K=this.props.ambManager;K.options.closeOnBlur&&(K.isOpen&&!this.tapListener?this.addTapListener():!K.isOpen&&this.tapListener&&(this.tapListener.remove(),delete this.tapListener),K.isOpen||K.clearItems())},I.prototype.componentWillUnmount=function(){this.tapListener&&this.tapListener.remove(),this.props.ambManager.destroy()},I.prototype.render=function(){var K=this.props,z=this.props.ambManager,Q=(function(){return typeof K.children=="function"?K.children({isOpen:z.isOpen}):z.isOpen?K.children:!1})();if(!Q)return!1;var V={onKeyDown:z.handleMenuKey,role:"menu",tabIndex:-1};return z.options.closeOnBlur&&(V.onBlur=z.handleBlur),f(V,K,y),f(V,{ref:this.setRef}),i.createElement(K.tag,V,Q)},I})(i.Component);return _.propTypes=y,_.defaultProps={tag:"div"},RI=i.forwardRef(function(E,I){return i.createElement(s.Consumer,null,function(P){var K={ambManager:P,forwardedRef:I};return f(K,E,{ambManager:y.ambManager,children:y.children,forwardedRef:y.forwardedRef}),i.createElement(_,K,E.children)})}),RI}var PI,YQ;function O7e(){if(YQ)return PI;YQ=1;function n(_,E){if(!(_ instanceof E))throw new TypeError("Cannot call a class as a function")}function e(_,E){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:_}function t(_,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);_.prototype=Object.create(E&&E.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(_,E):_.__proto__=E)}var i=pa(),r=W1(),o=BB(),s=OB(),a=s.refType,c=IB(),f={ambManager:r.object.isRequired,children:r.node.isRequired,forwardedRef:a,tag:r.string,text:r.string,value:r.any},y=(function(_){t(E,_);function E(){var I,P,K;n(this,E);for(var z=arguments.length,Q=Array(z),V=0;V<z;V++)Q[V]=arguments[V];return K=(I=(P=e(this,_.call.apply(_,[this].concat(Q))),P),P.ref=i.createRef(),P.handleKeyDown=function($){$.key!=="Enter"&&$.key!==" "||P.props.tag==="a"&&P.props.href||($.preventDefault(),P.selectItem($))},P.selectItem=function($){var Z=typeof P.props.value<"u"?P.props.value:P.props.children;P.props.ambManager.handleSelection(Z,$)},P.setRef=function($){P.ref.current=$,typeof P.props.forwardedRef=="function"?P.props.forwardedRef($):P.props.forwardedRef&&(P.props.forwardedRef.current=$)},I),e(P,K)}return E.prototype.componentDidMount=function(){this.props.ambManager.addItem({node:this.ref.current,text:this.props.text})},E.prototype.render=function(){var P={onClick:this.selectItem,onKeyDown:this.handleKeyDown,role:"menuitem",tabIndex:"-1",ref:this.setRef};return c(P,this.props,f),i.createElement(this.props.tag,P,this.props.children)},E})(i.Component);return y.propTypes=f,y.defaultProps={tag:"div"},PI=i.forwardRef(function(_,E){return i.createElement(o.Consumer,null,function(I){var P={ambManager:I,forwardedRef:E};return c(P,_,{ambManager:f.ambManager,children:f.children,forwardedRef:f.forwardedRef}),i.createElement(y,P,_.children)})}),PI}var LI,VQ;function I7e(){if(VQ)return LI;VQ=1;var n=Ooe();return LI={Wrapper:w7e(),Button:S7e(),Menu:B7e(),MenuItem:O7e(),openMenu:n.openMenu,closeMenu:n.closeMenu},LI}var jw=I7e();function $Q(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function qR(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$Q(Object(t),!0).forEach(function(i){Fa(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):$Q(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function TB(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function HQ(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function kB(n,e,t){return e&&HQ(n.prototype,e),t&&HQ(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Fa(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function b0(){return b0=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},b0.apply(this,arguments)}function fK(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&YR(n,e)}function t6(n){return t6=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t6(n)}function YR(n,e){return YR=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},YR(n,e)}function T7e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function k7e(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function DB(n,e){if(n==null)return{};var t=k7e(n,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function Mm(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function D7e(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mm(n)}function pK(n){var e=T7e();return function(){var i=t6(n),r;if(e){var o=t6(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return D7e(this,r)}}function R7e(n,e){return U7e(n)||F7e(n,e)||Ioe(n,e)||j7e()}function P7e(n){return L7e(n)||K7e(n)||Ioe(n)||z7e()}function L7e(n){if(Array.isArray(n))return VR(n)}function U7e(n){if(Array.isArray(n))return n}function K7e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function F7e(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,o=!1,s,a;try{for(t=t.call(n);!(r=(s=t.next()).done)&&(i.push(s.value),!(e&&i.length===e));r=!0);}catch(c){o=!0,a=c}finally{try{!r&&t.return!=null&&t.return()}finally{if(o)throw a}}return i}}function Ioe(n,e){if(n){if(typeof n=="string")return VR(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return VR(n,e)}}function VR(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function z7e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j7e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var N7e=kB(function n(e){var t=this,i=e.expanded,r=i===void 0?[]:i,o=e.allowMultipleExpanded,s=o===void 0?!1:o,a=e.allowZeroExpanded,c=a===void 0?!1:a;TB(this,n),Fa(this,"expanded",void 0),Fa(this,"allowMultipleExpanded",void 0),Fa(this,"allowZeroExpanded",void 0),Fa(this,"toggleExpanded",function(f){if(t.isItemDisabled(f))return t;var y=t.isItemExpanded(f);return y?t.augment({expanded:t.expanded.filter(function(_){return _!==f})}):t.augment({expanded:t.allowMultipleExpanded?[].concat(P7e(t.expanded),[f]):[f]})}),Fa(this,"isItemDisabled",function(f){var y=t.isItemExpanded(f),_=t.expanded.length===1;return!!(y&&!t.allowZeroExpanded&&_)}),Fa(this,"isItemExpanded",function(f){return t.expanded.indexOf(f)!==-1}),Fa(this,"getPanelAttributes",function(f,y){var _=y??t.isItemExpanded(f);return{role:t.allowMultipleExpanded?void 0:"region","aria-hidden":t.allowMultipleExpanded?!_:void 0,"aria-labelledby":t.getButtonId(f),id:t.getPanelId(f),hidden:_?void 0:!0}}),Fa(this,"getHeadingAttributes",function(){return{role:"heading"}}),Fa(this,"getButtonAttributes",function(f,y){var _=y??t.isItemExpanded(f),E=t.isItemDisabled(f);return{id:t.getButtonId(f),"aria-disabled":E,"aria-expanded":_,"aria-controls":t.getPanelId(f),role:"button",tabIndex:0}}),Fa(this,"getPanelId",function(f){return"accordion__panel-".concat(f)}),Fa(this,"getButtonId",function(f){return"accordion__heading-".concat(f)}),Fa(this,"augment",function(f){return new n(qR({expanded:t.expanded,allowMultipleExpanded:t.allowMultipleExpanded,allowZeroExpanded:t.allowZeroExpanded},f))}),this.expanded=r,this.allowMultipleExpanded=s,this.allowZeroExpanded=c}),Toe=yt.createContext(null),koe=(function(n){fK(t,n);var e=pK(t);function t(){var i;TB(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o)),Fa(Mm(i),"state",new N7e({expanded:i.props.preExpanded,allowMultipleExpanded:i.props.allowMultipleExpanded,allowZeroExpanded:i.props.allowZeroExpanded})),Fa(Mm(i),"toggleExpanded",function(a){i.setState(function(c){return c.toggleExpanded(a)},function(){i.props.onChange&&i.props.onChange(i.state.expanded)})}),Fa(Mm(i),"isItemDisabled",function(a){return i.state.isItemDisabled(a)}),Fa(Mm(i),"isItemExpanded",function(a){return i.state.isItemExpanded(a)}),Fa(Mm(i),"getPanelAttributes",function(a,c){return i.state.getPanelAttributes(a,c)}),Fa(Mm(i),"getHeadingAttributes",function(){return i.state.getHeadingAttributes()}),Fa(Mm(i),"getButtonAttributes",function(a,c){return i.state.getButtonAttributes(a,c)}),i}return kB(t,[{key:"render",value:function(){var r=this.state,o=r.allowZeroExpanded,s=r.allowMultipleExpanded;return yt.createElement(Toe.Provider,{value:{allowMultipleExpanded:s,allowZeroExpanded:o,toggleExpanded:this.toggleExpanded,isItemDisabled:this.isItemDisabled,isItemExpanded:this.isItemExpanded,getPanelAttributes:this.getPanelAttributes,getHeadingAttributes:this.getHeadingAttributes,getButtonAttributes:this.getButtonAttributes}},this.props.children||null)}}]),t})(yt.PureComponent);Fa(koe,"defaultProps",{allowMultipleExpanded:!1,allowZeroExpanded:!1});var Doe=(function(n){fK(t,n);var e=pK(t);function t(){var i;TB(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o)),Fa(Mm(i),"renderChildren",function(a){return a?i.props.children(a):null}),i}return kB(t,[{key:"render",value:function(){return yt.createElement(Toe.Consumer,null,this.renderChildren)}}]),t})(yt.PureComponent),G7e=["className","allowMultipleExpanded","allowZeroExpanded","onChange","preExpanded"],W7e=function(e){var t=e.className,i=t===void 0?"accordion":t,r=e.allowMultipleExpanded,o=e.allowZeroExpanded,s=e.onChange,a=e.preExpanded,c=DB(e,G7e);return yt.createElement(koe,{preExpanded:a,allowMultipleExpanded:r,allowZeroExpanded:o,onChange:s},yt.createElement("div",b0({"data-accordion-component":"Accordion",className:i},c)))},$R;(function(n){n.Accordion="Accordion",n.AccordionItem="AccordionItem",n.AccordionItemButton="AccordionItemButton",n.AccordionItemHeading="AccordionItemHeading",n.AccordionItemPanel="AccordionItemPanel"})($R||($R={}));var Roe=$R,UI=0;function Q7e(){var n=UI;return UI=UI+1,"raa-".concat(n)}var q7e=yt.useId||Q7e,Y7e=/[\u0009\u000a\u000c\u000d\u0020]/g;function xM(n){return n===""||Y7e.test(n)?(console.error('uuid must be a valid HTML5 id but was given "'.concat(n,'", ASCII whitespaces are forbidden')),!1):!0}var Poe=yt.createContext(null),V7e=function(e){var t=e.children,i=e.uuid,r=e.accordionContext,o=e.dangerouslySetExpanded,s=function(){r.toggleExpanded(i)},a=function(f){var y=o??f.isItemExpanded(i),_=f.isItemDisabled(i),E=f.getPanelAttributes(i,o),I=f.getHeadingAttributes(i),P=f.getButtonAttributes(i,o);return yt.createElement(Poe.Provider,{value:{uuid:i,expanded:y,disabled:_,toggleExpanded:s,panelAttributes:E,headingAttributes:I,buttonAttributes:P}},t)};return yt.createElement(Doe,null,a)},$7e=function(e){return yt.createElement(Doe,null,function(t){return yt.createElement(V7e,b0({},e,{accordionContext:t}))})},RB=function(e){var t=e.children,i=function(o){return o?t(o):null};return yt.createElement(Poe.Consumer,null,i)},H7e=["uuid","dangerouslySetExpanded","className","activeClassName"],Loe=function(e){var t=e.uuid,i=e.dangerouslySetExpanded,r=e.className,o=r===void 0?"accordion__item":r,s=e.activeClassName,a=DB(e,H7e),c=yt.useState(q7e()),f=R7e(c,1),y=f[0],_=t??y,E=function(P){var K=P.expanded,z=K&&s?s:o;return yt.createElement("div",b0({"data-accordion-component":"AccordionItem",className:z},a))};return xM(_.toString()),a.id&&xM(a.id),yt.createElement($7e,{uuid:_,dangerouslySetExpanded:i},yt.createElement(RB,null,E))};Loe.displayName=Roe.AccordionItem;function Uoe(n){return n&&(n.matches('[data-accordion-component="Accordion"]')?n:Uoe(n.parentElement))}function PB(n){var e=Uoe(n);return e&&Array.from(e.querySelectorAll('[data-accordion-component="AccordionItemButton"]'))}function Z7e(n){var e=PB(n)||[],t=e[0];t&&t.focus()}function X7e(n){var e=PB(n)||[],t=e[e.length-1];t&&t.focus()}function J7e(n){var e=PB(n)||[],t=e.indexOf(n);if(t!==-1){var i=e[t+1];i&&i.focus()}}function eTe(n){var e=PB(n)||[],t=e.indexOf(n);if(t!==-1){var i=e[t-1];i&&i.focus()}}var y1={END:"End",ENTER:"Enter",HOME:"Home",SPACE:" ",SPACE_DEPRECATED:"Spacebar",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight"},tTe=["toggleExpanded","className"],nTe=function(e){var t=e.toggleExpanded,i=e.className,r=i===void 0?"accordion__button":i,o=DB(e,tTe),s=function(c){var f=c.key;if((f===y1.ENTER||f===y1.SPACE||f===y1.SPACE_DEPRECATED)&&(c.preventDefault(),t()),c.target instanceof HTMLElement)switch(f){case y1.HOME:{c.preventDefault(),Z7e(c.target);break}case y1.END:{c.preventDefault(),X7e(c.target);break}case y1.LEFT:case y1.UP:{c.preventDefault(),eTe(c.target);break}case y1.RIGHT:case y1.DOWN:{c.preventDefault(),J7e(c.target);break}}};return o.id&&xM(o.id),yt.createElement("div",b0({className:r},o,{role:"button",tabIndex:0,onClick:t,onKeyDown:s,"data-accordion-component":"AccordionItemButton"}))},iTe=function(e){return yt.createElement(RB,null,function(t){var i=t.toggleExpanded,r=t.buttonAttributes;return yt.createElement(nTe,b0({toggleExpanded:i},e,r))})},rTe={className:"accordion__heading","aria-level":3},oTe=`AccordionItemButton may contain only one child element, which must be an instance of AccordionItemButton.

From the WAI-ARIA spec (https://www.w3.org/TR/wai-aria-practices-1.1/#accordion):

The button element is the only element inside the heading element. That is, if there are other visually persistent elements, they are not included inside the heading element.

`,Koe=(function(n){fK(t,n);var e=pK(t);function t(){var i;TB(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o)),Fa(Mm(i),"ref",void 0),Fa(Mm(i),"setRef",function(a){i.ref=a}),i}return kB(t,[{key:"componentDidUpdate",value:function(){t.VALIDATE(this.ref)}},{key:"componentDidMount",value:function(){t.VALIDATE(this.ref)}},{key:"render",value:function(){return yt.createElement("div",b0({"data-accordion-component":"AccordionItemHeading"},this.props,{ref:this.setRef}))}}],[{key:"VALIDATE",value:function(r){if(r===void 0)throw new Error("ref is undefined");if(!(r.childElementCount===1&&r.firstElementChild&&r.firstElementChild.getAttribute("data-accordion-component")==="AccordionItemButton"))throw new Error(oTe)}}]),t})(yt.PureComponent);Fa(Koe,"defaultProps",rTe);var Foe=function(e){return yt.createElement(RB,null,function(t){var i=t.headingAttributes;return e.id&&xM(e.id),yt.createElement(Koe,b0({},e,i))})};Foe.displayName=Roe.AccordionItemHeading;var sTe=["className","region","id"],aTe=function(e){var t=e.className,i=t===void 0?"accordion__panel":t,r=e.region,o=e.id,s=DB(e,sTe),a=function(f){var y=f.panelAttributes;o&&xM(o);var _=qR(qR({},y),{},{"aria-labelledby":r?y["aria-labelledby"]:void 0});return yt.createElement("div",b0({"data-accordion-component":"AccordionItemPanel",className:i},s,_,{role:r?"region":void 0}))};return yt.createElement(RB,null,a)};function MM(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",e="ee4be309accf3b6f15b0a988cbdadd67c7132608",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",statementMap:{0:{start:{line:3,column:18},end:{line:5,column:1}},1:{start:{line:4,column:2},end:{line:4,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:3,column:18},end:{line:3,column:19}},loc:{start:{line:3,column:29},end:{line:5,column:1}},line:3}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx"],names:[],mappings:"AAOS;AAPT,OAAO,eAAsC;AAM7C,MAAM,YAAsC,CAAC,UAAU;AACrD,SAAO,oBAAC,aAAW,GAAG,OAAO;AAC/B;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ee4be309accf3b6f15b0a988cbdadd67c7132608"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return MM=function(){return s},s}MM();MM().s[0]++;const LB=n=>(MM().f[0]++,MM().s[1]++,te.jsx(Zie,{...n}));function wM(n){return fo({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 19a2 2 0 0 0 2 2c2 0 2 -4 3 -9s1 -9 3 -9a2 2 0 0 1 2 2"},child:[]},{tag:"path",attr:{d:"M5 12h6"},child:[]},{tag:"path",attr:{d:"M15 12l6 6"},child:[]},{tag:"path",attr:{d:"M15 18l6 -6"},child:[]}]})(n)}function UB(n){return fo({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M28,64A12,12,0,0,1,40,52H216a12,12,0,0,1,0,24H40A12,12,0,0,1,28,64Zm12,76H216a12,12,0,0,0,0-24H40a12,12,0,0,0,0,24Zm104,40H40a12,12,0,0,0,0,24H144a12,12,0,0,0,0-24Zm88,0H220V168a12,12,0,0,0-24,0v12H184a12,12,0,0,0,0,24h12v12a12,12,0,0,0,24,0V204h12a12,12,0,0,0,0-24Z"},child:[]}]})(n)}function dC(){var n="/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",e="99dad9631fbee5fc23be2dafaf7c7eea92c38eac",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",statementMap:{0:{start:{line:2,column:34},end:{line:2,column:56}},1:{start:{line:3,column:28},end:{line:3,column:41}},2:{start:{line:4,column:30},end:{line:4,column:123}},3:{start:{line:4,column:88},end:{line:4,column:122}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:80},end:{line:4,column:81}},loc:{start:{line:4,column:88},end:{line:4,column:122}},line:4}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/filterops.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEZ,aAAM,qBAAqB,CAAC,OAAO,OAAO,MAAM;AAChD,aAAM,eAAe,CAAC,MAAM,KAAK;AACjC,aAAM,iBAAiB,OAC3B,KAAK,OAAO,gBAAgB,MAAM,EAClC,OAAO,QAAM,mBAAmB,QAAQ,EAAE,IAAI,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"99dad9631fbee5fc23be2dafaf7c7eea92c38eac"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return dC=function(){return s},s}dC();const mK=(dC().s[0]++,["all","any","none"]);dC().s[1]++;const lTe=(dC().s[2]++,Object.keys(Tr.filter_operator.values).filter(n=>(dC().f[0]++,dC().s[3]++,mK.indexOf(n)<0)));function Ui(){var n="/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",e="d18e3b448d830733ac17bcacd45f7c08e364baa2",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",statementMap:{0:{start:{line:8,column:2},end:{line:8,column:25}},1:{start:{line:8,column:16},end:{line:8,column:25}},2:{start:{line:9,column:2},end:{line:9,column:25}},3:{start:{line:9,column:16},end:{line:9,column:25}},4:{start:{line:10,column:2},end:{line:10,column:23}},5:{start:{line:13,column:19},end:{line:13,column:40}},6:{start:{line:14,column:2},end:{line:16,column:3}},7:{start:{line:15,column:4},end:{line:15,column:13}},8:{start:{line:17,column:2},end:{line:23,column:3}},9:{start:{line:18,column:4},end:{line:18,column:16}},10:{start:{line:19,column:9},end:{line:23,column:3}},11:{start:{line:20,column:4},end:{line:20,column:17}},12:{start:{line:22,column:4},end:{line:22,column:13}},13:{start:{line:26,column:2},end:{line:26,column:21}},14:{start:{line:27,column:2},end:{line:27,column:22}},15:{start:{line:28,column:2},end:{line:28,column:11}},16:{start:{line:31,column:24},end:{line:33,column:3}},17:{start:{line:35,column:20},end:{line:35,column:76}},18:{start:{line:36,column:4},end:{line:40,column:5}},19:{start:{line:37,column:6},end:{line:37,column:43}},20:{start:{line:38,column:11},end:{line:40,column:5}},21:{start:{line:39,column:6},end:{line:39,column:47}},22:{start:{line:41,column:4},end:{line:41,column:35}},23:{start:{line:44,column:14},end:{line:44,column:31}},24:{start:{line:45,column:21},end:{line:45,column:25}},25:{start:{line:46,column:25},end:{line:46,column:29}},26:{start:{line:47,column:23},end:{line:47,column:33}},27:{start:{line:48,column:4},end:{line:75,column:9}},28:{start:{line:54,column:72},end:{line:54,column:92}},29:{start:{line:55,column:41},end:{line:55,column:104}},30:{start:{line:63,column:37},end:{line:63,column:100}},31:{start:{line:72,column:27},end:{line:72,column:89}}},fnMap:{0:{name:"tryParseInt",decl:{start:{line:7,column:9},end:{line:7,column:20}},loc:{start:{line:7,column:24},end:{line:11,column:1}},line:7},1:{name:"tryParseBool",decl:{start:{line:12,column:9},end:{line:12,column:21}},loc:{start:{line:12,column:25},end:{line:24,column:1}},line:12},2:{name:"parseFilter",decl:{start:{line:25,column:9},end:{line:25,column:20}},loc:{start:{line:25,column:24},end:{line:29,column:1}},line:25},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:58},end:{line:42,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:11},end:{line:76,column:3}},line:43},5:{name:"(anonymous_5)",decl:{start:{line:54,column:58},end:{line:54,column:59}},loc:{start:{line:54,column:72},end:{line:54,column:92}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:55,column:20},end:{line:55,column:21}},loc:{start:{line:55,column:41},end:{line:55,column:104}},line:55},7:{name:"(anonymous_7)",decl:{start:{line:63,column:20},end:{line:63,column:21}},loc:{start:{line:63,column:37},end:{line:63,column:100}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:72,column:20},end:{line:72,column:21}},loc:{start:{line:72,column:27},end:{line:72,column:89}},line:72}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:25}},type:"if",locations:[{start:{line:8,column:2},end:{line:8,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:9,column:25}},type:"if",locations:[{start:{line:9,column:2},end:{line:9,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},2:{loc:{start:{line:14,column:2},end:{line:16,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:16,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:14},3:{loc:{start:{line:17,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:23,column:3}},{start:{line:19,column:9},end:{line:23,column:3}}],line:17},4:{loc:{start:{line:19,column:9},end:{line:23,column:3}},type:"if",locations:[{start:{line:19,column:9},end:{line:23,column:3}},{start:{line:21,column:9},end:{line:23,column:3}}],line:19},5:{loc:{start:{line:36,column:4},end:{line:40,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:40,column:5}},{start:{line:38,column:11},end:{line:40,column:5}}],line:36},6:{loc:{start:{line:36,column:8},end:{line:36,column:49}},type:"binary-expr",locations:[{start:{line:36,column:8},end:{line:36,column:26}},{start:{line:36,column:30},end:{line:36,column:49}}],line:36},7:{loc:{start:{line:38,column:11},end:{line:40,column:5}},type:"if",locations:[{start:{line:38,column:11},end:{line:40,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},8:{loc:{start:{line:67,column:6},end:{line:74,column:10}},type:"binary-expr",locations:[{start:{line:67,column:6},end:{line:67,column:27}},{start:{line:67,column:47},end:{line:74,column:10}}],line:67}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx"],names:[],mappings:"AA+DW,SAEH,KAFG;AA/DX,OAAO,WAAW;AAElB,SAAQ,sBAAqB;AAC7B,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AAExB,SAAS,YAAY,GAAoB;AACvC,MAAI,MAAM,GAAI,QAAO;AACrB,MAAI,MAAM,CAAW,EAAG,QAAO;AAC/B,SAAO,WAAW,CAAW;AAC/B;AAEA,SAAS,aAAa,GAAqB;AACzC,QAAM,WAAY,OAAO,MAAO;AAChC,MAAG,CAAC,UAAU;AACZ,WAAO;AAAA,EACT;AAEA,MAAG,EAAE,MAAM,cAAc,GAAG;AAC1B,WAAO;AAAA,EACT,WACQ,EAAE,MAAM,eAAe,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,YAAY,GAA8B;AACjD,MAAI,YAAY,CAAQ;AACxB,MAAI,aAAa,CAAQ;AACzB,SAAO;AACT;AAQA,qBAAqB,2BAA2B,MAAM,UAAmC;AAAA,EACvF,OAAO,eAAe;AAAA,IACpB,YAAY,CAAC;AAAA,EACf;AAAA,EAEA,oBAAoB,UAAkB,cAAsB,YAAsB;AAChF,QAAI,YAAY,CAAC,UAAU,cAAc,GAAG,WAAW,IAAI,WAAW,CAAC;AACvE,QAAG,aAAa,SAAS,aAAa,QAAQ;AAC5C,kBAAY,CAAC,UAAU,YAAY;AAAA,IACrC,WAAU,WAAW,WAAW,GAAG;AACjC,kBAAY,CAAC,UAAU,cAAc,EAAE;AAAA,IACzC;AACA,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,WAAW,EAAE,CAAC;AACpB,UAAM,eAAe,EAAE,CAAC;AACxB,UAAM,aAAa,EAAE,MAAM,CAAC;AAE5B,WAAO,qBAAC,SAAI,WAAU,iCACpB;AAAA,0BAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS,OAAO,KAAK,KAAK,MAAM,UAAW,EAAE,IAAI,cAAY,CAAC,UAAU,QAAQ,CAAC;AAAA,UACjF,UAAU,CAAC,oBAA4B,KAAK,oBAAoB,UAAU,iBAAiB,UAAU;AAAA;AAAA,MACvG,GACF;AAAA,MACA,oBAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,UAAU,CAAC,gBAAwB,KAAK,oBAAoB,aAAa,cAAc,UAAU;AAAA,UACjG,SAAS;AAAA;AAAA,MACX,GACF;AAAA,MACC,WAAW,SAAS,KACrB,oBAAC,SAAI,WAAU,+BACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO,WAAW,KAAK,GAAG;AAAA,UAC1B,UAAU,CAAC,MAAc,KAAK,oBAAoB,UAAU,cAAc,EAAE,MAAM,GAAG,CAAC;AAAA;AAAA,MACxF,GACF;AAAA,OAEF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d18e3b448d830733ac17bcacd45f7c08e364baa2"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ui=function(){return s},s}Ui();function uTe(n){return Ui().f[0]++,Ui().s[0]++,n===""?(Ui().b[0][0]++,Ui().s[1]++,n):(Ui().b[0][1]++,Ui().s[2]++,isNaN(n)?(Ui().b[1][0]++,Ui().s[3]++,n):(Ui().b[1][1]++,Ui().s[4]++,parseFloat(n)))}function cTe(n){Ui().f[1]++;const e=(Ui().s[5]++,typeof n=="string");if(Ui().s[6]++,e)Ui().b[2][1]++;else return Ui().b[2][0]++,Ui().s[7]++,n;return Ui().s[8]++,n.match(/^\s*true\s*$/)?(Ui().b[3][0]++,Ui().s[9]++,!0):(Ui().b[3][1]++,Ui().s[10]++,n.match(/^\s*false\s*$/)?(Ui().b[4][0]++,Ui().s[11]++,!1):(Ui().b[4][1]++,Ui().s[12]++,n))}function ATe(n){return Ui().f[2]++,Ui().s[13]++,n=uTe(n),Ui().s[14]++,n=cTe(n),Ui().s[15]++,n}class hTe extends On.Component{static defaultProps=(Ui().s[16]++,{properties:{}});onFilterPartChanged(e,t,i){Ui().f[3]++;let r=(Ui().s[17]++,[e,t,...i.map(ATe)]);Ui().s[18]++,Ui().b[6][0]++,e==="has"||(Ui().b[6][1]++,e==="!has")?(Ui().b[5][0]++,Ui().s[19]++,r=[e,t]):(Ui().b[5][1]++,Ui().s[20]++,i.length===0?(Ui().b[7][0]++,Ui().s[21]++,r=[e,t,""]):Ui().b[7][1]++),Ui().s[22]++,this.props.onChange(r)}render(){Ui().f[4]++;const e=(Ui().s[23]++,this.props.filter),t=(Ui().s[24]++,e[0]),i=(Ui().s[25]++,e[1]),r=(Ui().s[26]++,e.slice(2));return Ui().s[27]++,te.jsxs("div",{className:"maputnik-filter-editor-single",children:[te.jsx("div",{className:"maputnik-filter-editor-property",children:te.jsx(_5,{"aria-label":"key",value:i,options:Object.keys(this.props.properties).map(o=>(Ui().f[5]++,Ui().s[28]++,[o,o])),onChange:o=>(Ui().f[6]++,Ui().s[29]++,this.onFilterPartChanged(t,o,r))})}),te.jsx("div",{className:"maputnik-filter-editor-operator",children:te.jsx(zC,{"aria-label":"function",value:t,onChange:o=>(Ui().f[7]++,Ui().s[30]++,this.onFilterPartChanged(o,i,r)),options:lTe})}),(Ui().b[8][0]++,r.length>0&&(Ui().b[8][1]++,te.jsx("div",{className:"maputnik-filter-editor-args",children:te.jsx(zm,{"aria-label":"value",value:r.join(","),onChange:o=>(Ui().f[8]++,Ui().s[31]++,this.onFilterPartChanged(t,i,o.split(",")))})})))]})}}function Vx(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",e="1beba484bbe354357d7ce4f43a423306cbd22032",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:20,column:9}},2:{start:{line:23,column:26},end:{line:23,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:21,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx"],names:[],mappings:"AAYW,SACL,KADK;AAZX,OAAO,WAAuC;AAC9C,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAMtD,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,gCACpB;AAAA,0BAAC,SAAI,WAAU,wCACZ,eAAK,MAAM,UACd;AAAA,MACA,oBAAC,SAAI,WAAU,uCACb;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,qBAAqB;AAAA,UAE9B,8BAAC,YAAS;AAAA;AAAA,MACZ,GACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1beba484bbe354357d7ce4f43a423306cbd22032"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Vx=function(){return s},s}Vx();class dTe extends On.Component{render(){Vx().f[0]++;const e=(Vx().s[0]++,this.props.t);return Vx().s[1]++,te.jsxs("div",{className:"maputnik-filter-editor-block",children:[te.jsx("div",{className:"maputnik-filter-editor-block-content",children:this.props.children}),te.jsx("div",{className:"maputnik-filter-editor-block-action",children:te.jsx(Ds,{className:"maputnik-icon-button",onClick:this.props.onDelete,title:e("Delete filter block"),children:te.jsx(TC,{})})})]})}}const fTe=(Vx().s[2]++,Mo()(dTe));var KI,ZQ;function pTe(){if(ZQ)return KI;ZQ=1;var n="[object Symbol]",e="\\ud800-\\udfff",t="\\u0300-\\u036f\\ufe20-\\ufe23",i="\\u20d0-\\u20f0",r="\\ufe0e\\ufe0f",o="["+e+"]",s="["+t+i+"]",a="\\ud83c[\\udffb-\\udfff]",c="(?:"+s+"|"+a+")",f="[^"+e+"]",y="(?:\\ud83c[\\udde6-\\uddff]){2}",_="[\\ud800-\\udbff][\\udc00-\\udfff]",E="\\u200d",I=c+"?",P="["+r+"]?",K="(?:"+E+"(?:"+[f,y,_].join("|")+")"+P+I+")*",z=P+I+K,Q="(?:"+[f+s+"?",s,y,_,o].join("|")+")",V=RegExp(a+"(?="+a+")|"+Q+z,"g"),$=RegExp("["+E+e+t+i+r+"]"),Z=typeof window=="object"&&window&&window.Object===Object&&window,ee=typeof self=="object"&&self&&self.Object===Object&&self,X=Z||ee||Function("return this")();function W(st){return st.split("")}function se(st){return $.test(st)}function ue(st){return se(st)?ve(st):W(st)}function ve(st){return st.match(V)||[]}var ye=Object.prototype,Ee=ye.toString,_e=X.Symbol,Be=_e?_e.prototype:void 0,Fe=Be?Be.toString:void 0;function Se(st,Et,Pt){var ke=-1,Oe=st.length;Et<0&&(Et=-Et>Oe?0:Oe+Et),Pt=Pt>Oe?Oe:Pt,Pt<0&&(Pt+=Oe),Oe=Et>Pt?0:Pt-Et>>>0,Et>>>=0;for(var we=Array(Oe);++ke<Oe;)we[ke]=st[ke+Et];return we}function qe(st){if(typeof st=="string")return st;if(Ie(st))return Fe?Fe.call(st):"";var Et=st+"";return Et=="0"&&1/st==-1/0?"-0":Et}function ut(st,Et,Pt){var ke=st.length;return Pt=Pt===void 0?ke:Pt,!Et&&Pt>=ke?st:Se(st,Et,Pt)}function ht(st){return function(Et){Et=ze(Et);var Pt=se(Et)?ue(Et):void 0,ke=Pt?Pt[0]:Et.charAt(0),Oe=Pt?ut(Pt,1).join(""):Et.slice(1);return ke[st]()+Oe}}function De(st){return!!st&&typeof st=="object"}function Ie(st){return typeof st=="symbol"||De(st)&&Ee.call(st)==n}function ze(st){return st==null?"":qe(st)}function Te(st){return vt(ze(st).toLowerCase())}var vt=ht("toUpperCase");return KI=Te,KI}var mTe=pTe();const gK=Zl(mTe);function jg(){var n="/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",e="8b86d889d32efa9a6cc667b2fa3579002dfb58fc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",statementMap:{0:{start:{line:4,column:16},end:{line:4,column:36}},1:{start:{line:5,column:2},end:{line:9,column:3}},2:{start:{line:6,column:4},end:{line:6,column:52}},3:{start:{line:8,column:4},end:{line:8,column:22}},4:{start:{line:10,column:2},end:{line:10,column:27}}},fnMap:{0:{name:"labelFromFieldName",decl:{start:{line:2,column:24},end:{line:2,column:42}},loc:{start:{line:2,column:54},end:{line:11,column:1}},line:2}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:9,column:3}},{start:{line:7,column:9},end:{line:9,column:3}}],line:5}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,wBAAwB,mBAAmB,WAAmB;AAC5D,MAAI;AACJ,QAAM,QAAQ,UAAU,MAAM,GAAG;AACjC,MAAI,MAAM,SAAS,GAAG;AACpB,YAAQ,UAAU,MAAM,GAAG,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG;AAAA,EAChD,OACK;AACH,YAAQ;AAAA,EACV;AACA,SAAO,WAAW,KAAK;AACzB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b86d889d32efa9a6cc667b2fa3579002dfb58fc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return jg=function(){return s},s}jg();function KB(n){jg().f[0]++;let e;const t=(jg().s[0]++,n.split("-"));return jg().s[1]++,t.length>1?(jg().b[0][0]++,jg().s[2]++,e=n.split("-").slice(1).join(" ")):(jg().b[0][1]++,jg().s[3]++,e=n),jg().s[4]++,gK(e)}function wa(){var n="/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",e="421a194a894795caa98e9aaeb6be503f0178c030",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",statementMap:{0:{start:{line:10,column:24},end:{line:16,column:3}},1:{start:{line:18,column:4},end:{line:18,column:17}},2:{start:{line:19,column:4},end:{line:21,column:6}},3:{start:{line:24,column:34},end:{line:24,column:44}},4:{start:{line:25,column:25},end:{line:25,column:52}},5:{start:{line:26,column:42},end:{line:48,column:8}},6:{start:{line:49,column:16},end:{line:49,column:22}},7:{start:{line:50,column:4},end:{line:53,column:5}},8:{start:{line:51,column:23},end:{line:51,column:118}},9:{start:{line:52,column:6},end:{line:52,column:42}},10:{start:{line:54,column:4},end:{line:75,column:6}},11:{start:{line:78,column:27},end:{line:78,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:13},end:{line:12,column:14}},loc:{start:{line:12,column:19},end:{line:13,column:5}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:14,column:12},end:{line:14,column:13}},loc:{start:{line:14,column:18},end:{line:15,column:5}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:21},end:{line:22,column:3}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:23,column:2},end:{line:23,column:3}},loc:{start:{line:23,column:11},end:{line:76,column:3}},line:23}},branchMap:{0:{loc:{start:{line:25,column:25},end:{line:25,column:52}},type:"cond-expr",locations:[{start:{line:25,column:35},end:{line:25,column:45}},{start:{line:25,column:48},end:{line:25,column:52}}],line:25},1:{loc:{start:{line:27,column:6},end:{line:37,column:7}},type:"binary-expr",locations:[{start:{line:27,column:6},end:{line:27,column:23}},{start:{line:27,column:43},end:{line:37,column:7}}],line:27},2:{loc:{start:{line:50,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:50,column:4},end:{line:53,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:50},3:{loc:{start:{line:51,column:23},end:{line:51,column:118}},type:"cond-expr",locations:[{start:{line:51,column:46},end:{line:51,column:95}},{start:{line:51,column:98},end:{line:51,column:118}}],line:51}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx"],names:[],mappings:"AA6CM,mBASM,KATN;AA7CN,OAAO,WAAW;AAClB,SAAQ,UAAU,cAAa;AAC/B,SAA+B,uBAAuB;AAEtD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,wBAAwB;AAC/B,OAAO,eAAe;AAmBtB,MAAM,mCAAmC,MAAM,UAA2C;AAAA,EACxF,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,IACT,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,EACjB;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,OAAO,QAAO,IAAI,KAAK;AACjC,UAAM,eAAe,UAAU,CAAC,QAAQ,IAAI;AAE5C,UAAM,gBACJ,iCACG;AAAA,WAAK,MAAM,UACV;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,UAAU;AAAA,UACV,WAAU;AAAA,UACV,OAAO,EAAE,wBAAwB;AAAA,UAEjC,8BAAC,UAAO;AAAA;AAAA,QANJ;AAAA,MAON;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,WAAU;AAAA,UACV,OAAO,EAAE,mBAAmB;AAAA,UAE5B,8BAAC,YAAS;AAAA;AAAA,QALN;AAAA,MAMN;AAAA,OACF;AAEF,QAAI,QAAQ;AACZ,QAAI,KAAK,MAAM,QAAQ;AACrB,YAAM,WAAW,KAAK,MAAM,YAAY,KAAK,MAAM,YAAY,MAAM,KAAK,MAAM,YAAY,KAAK,MAAM;AACvG,cAAQ,KAAK,MAAM,OAAO,QAAQ;AAAA,IACpC;AACA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,EAAE,mBAAmB,KAAK,MAAM,SAAS,CAAC;AAAA,QACjD,QAAQ;AAAA,QACR,UAAU;AAAA,QACV;AAAA,QAEA;AAAA,UAAC;AAAA;AAAA,YACC,UAAS;AAAA,YACT,MAAM,KAAK,MAAM;AAAA,YACjB,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,QAAQ,KAAK,MAAM;AAAA,YACnB;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AACvE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"421a194a894795caa98e9aaeb6be503f0178c030"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return wa=function(){return s},s}wa();class gTe extends On.Component{static defaultProps=(wa().s[0]++,{errors:{},onFocus:()=>{wa().f[0]++},onBlur:()=>{wa().f[1]++}});constructor(e){wa().f[2]++,wa().s[1]++,super(e),wa().s[2]++,this.state={jsonError:!1}}render(){wa().f[3]++;const{t:e,value:t,canUndo:i}=(wa().s[3]++,this.props),r=(wa().s[4]++,i?(wa().b[0][0]++,!i()):(wa().b[0][1]++,!0)),o=(wa().s[5]++,te.jsxs(te.Fragment,{children:[(wa().b[1][0]++,this.props.onUndo&&(wa().b[1][1]++,te.jsx(Ds,{onClick:this.props.onUndo,disabled:r,className:"maputnik-delete-stop",title:e("Revert from expression"),children:te.jsx(Afe,{})},"undo_action"))),te.jsx(Ds,{onClick:this.props.onDelete,className:"maputnik-delete-stop",title:e("Delete expression"),children:te.jsx(TC,{})},"delete_action")]}));let s=(wa().s[6]++,void 0);if(wa().s[7]++,this.props.errors){wa().b[2][0]++;const a=(wa().s[8]++,this.props.fieldType?(wa().b[3][0]++,this.props.fieldType+"."+this.props.fieldName):(wa().b[3][1]++,this.props.fieldName));wa().s[9]++,s=this.props.errors[a]}else wa().b[2][1]++;return wa().s[10]++,te.jsx(as,{fieldSpec:this.props.fieldSpec,label:e(KB(this.props.fieldName)),action:o,wideMode:!0,error:s,children:te.jsx(LB,{lintType:"expression",spec:this.props.fieldSpec,className:"maputnik-expression-editor",onFocus:this.props.onFocus,onBlur:this.props.onBlur,value:t,onChange:this.props.onChange})})}}const zoe=(wa().s[11]++,Mo()(gTe));function hn(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",e="e47fcaaf47a881c798f8d8c8b2982ffb5ed75681",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",statementMap:{0:{start:{line:18,column:17},end:{line:18,column:40}},1:{start:{line:19,column:2},end:{line:21,column:3}},2:{start:{line:20,column:4},end:{line:20,column:18}},3:{start:{line:22,column:20},end:{line:22,column:29}},4:{start:{line:23,column:16},end:{line:23,column:31}},5:{start:{line:24,column:2},end:{line:27,column:3}},6:{start:{line:25,column:4},end:{line:25,column:24}},7:{start:{line:26,column:4},end:{line:26,column:32}},8:{start:{line:28,column:2},end:{line:28,column:35}},9:{start:{line:31,column:2},end:{line:31,column:65}},10:{start:{line:34,column:2},end:{line:55,column:4}},11:{start:{line:57,column:19},end:{line:61,column:1}},12:{start:{line:63,column:2},end:{line:65,column:3}},13:{start:{line:64,column:4},end:{line:64,column:16}},14:{start:{line:66,column:21},end:{line:66,column:42}},15:{start:{line:67,column:2},end:{line:67,column:38}},16:{start:{line:70,column:2},end:{line:70,column:52}},17:{start:{line:73,column:2},end:{line:75,column:3}},18:{start:{line:74,column:4},end:{line:74,column:97}},19:{start:{line:74,column:38},end:{line:74,column:59}},20:{start:{line:74,column:75},end:{line:74,column:84}},21:{start:{line:76,column:2},end:{line:76,column:15}},22:{start:{line:79,column:24},end:{line:81,column:3}},23:{start:{line:83,column:4},end:{line:83,column:17}},24:{start:{line:84,column:4},end:{line:87,column:6}},25:{start:{line:91,column:22},end:{line:91,column:58}},26:{start:{line:92,column:4},end:{line:92,column:35}},27:{start:{line:93,column:4},end:{line:93,column:35}},28:{start:{line:96,column:22},end:{line:96,column:58}},29:{start:{line:97,column:4},end:{line:97,column:39}},30:{start:{line:98,column:4},end:{line:98,column:35}},31:{start:{line:100,column:18},end:{line:104,column:3}},32:{start:{line:101,column:26},end:{line:101,column:62}},33:{start:{line:102,column:4},end:{line:102,column:43}},34:{start:{line:103,column:4},end:{line:103,column:39}},35:{start:{line:105,column:16},end:{line:109,column:3}},36:{start:{line:106,column:4},end:{line:108,column:7}},37:{start:{line:110,column:15},end:{line:114,column:3}},38:{start:{line:111,column:4},end:{line:113,column:7}},39:{start:{line:115,column:19},end:{line:121,column:3}},40:{start:{line:116,column:19},end:{line:116,column:46}},41:{start:{line:117,column:4},end:{line:117,column:47}},42:{start:{line:118,column:4},end:{line:120,column:7}},43:{start:{line:123,column:32},end:{line:123,column:75}},44:{start:{line:124,column:4},end:{line:137,column:5}},45:{start:{line:125,column:6},end:{line:128,column:8}},46:{start:{line:129,column:11},end:{line:137,column:5}},47:{start:{line:130,column:6},end:{line:132,column:8}},48:{start:{line:134,column:6},end:{line:136,column:8}},49:{start:{line:140,column:26},end:{line:140,column:36}},50:{start:{line:141,column:36},end:{line:141,column:46}},51:{start:{line:142,column:22},end:{line:144,column:5}},52:{start:{line:145,column:26},end:{line:145,column:33}},53:{start:{line:146,column:36},end:{line:146,column:112}},54:{start:{line:147,column:4},end:{line:270,column:5}},55:{start:{line:148,column:6},end:{line:161,column:11}},56:{start:{line:162,column:11},end:{line:270,column:5}},57:{start:{line:163,column:21},end:{line:163,column:48}},58:{start:{line:164,column:26},end:{line:164,column:35}},59:{start:{line:165,column:22},end:{line:165,column:37}},60:{start:{line:166,column:38},end:{line:174,column:10}},61:{start:{line:175,column:27},end:{line:188,column:8}},62:{start:{line:176,column:22},end:{line:176,column:50}},63:{start:{line:177,column:8},end:{line:187,column:29}},64:{start:{line:189,column:6},end:{line:240,column:11}},65:{start:{line:200,column:33},end:{line:200,column:63}},66:{start:{line:242,column:25},end:{line:242,column:35}},67:{start:{line:243,column:6},end:{line:269,column:11}},68:{start:{line:248,column:14},end:{line:248,column:59}},69:{start:{line:249,column:14},end:{line:249,column:49}},70:{start:{line:273,column:21},end:{line:273,column:60}}},fnMap:{0:{name:"combiningFilter",decl:{start:{line:17,column:9},end:{line:17,column:24}},loc:{start:{line:17,column:32},end:{line:29,column:1}},line:17},1:{name:"migrateFilter",decl:{start:{line:30,column:9},end:{line:30,column:22}},loc:{start:{line:30,column:31},end:{line:32,column:1}},line:30},2:{name:"createStyleFromFilter",decl:{start:{line:33,column:9},end:{line:33,column:30}},loc:{start:{line:33,column:39},end:{line:56,column:1}},line:33},3:{name:"checkIfSimpleFilter",decl:{start:{line:62,column:9},end:{line:62,column:28}},loc:{start:{line:62,column:37},end:{line:68,column:1}},line:62},4:{name:"hasCombiningFilter",decl:{start:{line:69,column:9},end:{line:69,column:27}},loc:{start:{line:69,column:36},end:{line:71,column:1}},line:69},5:{name:"hasNestedCombiningFilter",decl:{start:{line:72,column:9},end:{line:72,column:33}},loc:{start:{line:72,column:42},end:{line:77,column:1}},line:72},6:{name:"(anonymous_6)",decl:{start:{line:74,column:31},end:{line:74,column:32}},loc:{start:{line:74,column:38},end:{line:74,column:59}},line:74},7:{name:"(anonymous_7)",decl:{start:{line:74,column:68},end:{line:74,column:69}},loc:{start:{line:74,column:75},end:{line:74,column:84}},line:74},8:{name:"(anonymous_8)",decl:{start:{line:82,column:2},end:{line:82,column:3}},loc:{start:{line:82,column:21},end:{line:88,column:3}},line:82},9:{name:"(anonymous_9)",decl:{start:{line:90,column:2},end:{line:90,column:3}},loc:{start:{line:90,column:42},end:{line:94,column:3}},line:90},10:{name:"(anonymous_10)",decl:{start:{line:95,column:2},end:{line:95,column:3}},loc:{start:{line:95,column:30},end:{line:99,column:3}},line:95},11:{name:"(anonymous_11)",decl:{start:{line:100,column:18},end:{line:100,column:19}},loc:{start:{line:100,column:24},end:{line:104,column:3}},line:100},12:{name:"(anonymous_12)",decl:{start:{line:105,column:16},end:{line:105,column:17}},loc:{start:{line:105,column:25},end:{line:109,column:3}},line:105},13:{name:"(anonymous_13)",decl:{start:{line:110,column:15},end:{line:110,column:16}},loc:{start:{line:110,column:21},end:{line:114,column:3}},line:110},14:{name:"(anonymous_14)",decl:{start:{line:115,column:19},end:{line:115,column:20}},loc:{start:{line:115,column:25},end:{line:121,column:3}},line:115},15:{name:"(anonymous_15)",decl:{start:{line:122,column:2},end:{line:122,column:3}},loc:{start:{line:122,column:48},end:{line:138,column:3}},line:122},16:{name:"(anonymous_16)",decl:{start:{line:139,column:2},end:{line:139,column:3}},loc:{start:{line:139,column:11},end:{line:271,column:3}},line:139},17:{name:"(anonymous_17)",decl:{start:{line:175,column:39},end:{line:175,column:40}},loc:{start:{line:175,column:51},end:{line:188,column:7}},line:175},18:{name:"(anonymous_18)",decl:{start:{line:200,column:26},end:{line:200,column:27}},loc:{start:{line:200,column:33},end:{line:200,column:63}},line:200},19:{name:"(anonymous_19)",decl:{start:{line:247,column:22},end:{line:247,column:23}},loc:{start:{line:247,column:28},end:{line:250,column:13}},line:247}},branchMap:{0:{loc:{start:{line:18,column:17},end:{line:18,column:40}},type:"binary-expr",locations:[{start:{line:18,column:17},end:{line:18,column:29}},{start:{line:18,column:33},end:{line:18,column:40}}],line:18},1:{loc:{start:{line:19,column:2},end:{line:21,column:3}},type:"if",locations:[{start:{line:19,column:2},end:{line:21,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:24,column:2},end:{line:27,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:27,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},3:{loc:{start:{line:63,column:2},end:{line:65,column:3}},type:"if",locations:[{start:{line:63,column:2},end:{line:65,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:63},4:{loc:{start:{line:63,column:6},end:{line:63,column:59}},type:"binary-expr",locations:[{start:{line:63,column:6},end:{line:63,column:25}},{start:{line:63,column:29},end:{line:63,column:59}}],line:63},5:{loc:{start:{line:73,column:2},end:{line:75,column:3}},type:"if",locations:[{start:{line:73,column:2},end:{line:75,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:73},6:{loc:{start:{line:124,column:4},end:{line:137,column:5}},type:"if",locations:[{start:{line:124,column:4},end:{line:137,column:5}},{start:{line:129,column:11},end:{line:137,column:5}}],line:124},7:{loc:{start:{line:124,column:8},end:{line:124,column:66}},type:"binary-expr",locations:[{start:{line:124,column:8},end:{line:124,column:28}},{start:{line:124,column:32},end:{line:124,column:66}}],line:124},8:{loc:{start:{line:129,column:11},end:{line:137,column:5}},type:"if",locations:[{start:{line:129,column:11},end:{line:137,column:5}},{start:{line:133,column:11},end:{line:137,column:5}}],line:129},9:{loc:{start:{line:129,column:15},end:{line:129,column:73}},type:"binary-expr",locations:[{start:{line:129,column:15},end:{line:129,column:34}},{start:{line:129,column:38},end:{line:129,column:73}}],line:129},10:{loc:{start:{line:146,column:36},end:{line:146,column:112}},type:"binary-expr",locations:[{start:{line:146,column:36},end:{line:146,column:55}},{start:{line:146,column:59},end:{line:146,column:112}}],line:146},11:{loc:{start:{line:147,column:4},end:{line:270,column:5}},type:"if",locations:[{start:{line:147,column:4},end:{line:270,column:5}},{start:{line:162,column:11},end:{line:270,column:5}}],line:147},12:{loc:{start:{line:162,column:11},end:{line:270,column:5}},type:"if",locations:[{start:{line:162,column:11},end:{line:270,column:5}},{start:{line:241,column:11},end:{line:270,column:5}}],line:162},13:{loc:{start:{line:186,column:10},end:{line:186,column:119}},type:"binary-expr",locations:[{start:{line:186,column:10},end:{line:186,column:15}},{start:{line:186,column:35},end:{line:186,column:119}}],line:186},14:{loc:{start:{line:235,column:30},end:{line:235,column:62}},type:"cond-expr",locations:[{start:{line:235,column:51},end:{line:235,column:53}},{start:{line:235,column:56},end:{line:235,column:62}}],line:235},15:{loc:{start:{line:257,column:8},end:{line:268,column:12}},type:"binary-expr",locations:[{start:{line:257,column:8},end:{line:257,column:38}},{start:{line:257,column:58},end:{line:268,column:12}}],line:257}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx"],names:[],mappings:"AAkMQ,SAkDA,UAlDA,KAGA,YAHA;AAlMR,OAAO,WAAW;AAClB,SAAS,sBAAsB;AAC/B,SAAS,sBAAsB;AAC/B,SAAQ,eAAc;AAEtB,SAAQ,SAAS,qBAAoB;AACrC,OAAO,YAAY;AAEnB,SAAQ,0BAAyB;AACjC,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,wBAAwB;AAC/B,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AACxB,OAAO,SAAS;AAChB,OAAO,wBAAwB;AAC/B,SAA+B,uBAAuB;AAItD,SAAS,gBAAgB,OAAuF;AAC9G,QAAM,SAAS,MAAM,UAAU,CAAC,KAAK;AAErC,MAAI,CAAC,MAAM,QAAQ,MAAM,GAAG;AAC1B,WAAO;AAAA,EACT;AAEA,MAAI,cAAc,OAAO,CAAC;AAC1B,MAAI,UAAU,OAAO,MAAM,CAAC;AAE5B,MAAG,mBAAmB,QAAQ,WAAW,IAAI,GAAG;AAC9C,kBAAc;AACd,cAAU,CAAC,OAAO,MAAM,CAAC,CAAC;AAAA,EAC5B;AAEA,SAAO,CAAC,aAAa,GAAG,OAAO;AACjC;AAEA,SAAS,cAAc,QAA6D;AAElF,SAAQ,QAAQ,sBAAsB,MAAM,CAAQ,EAAE,OAAO,CAAC,EAAU;AAC1E;AAEA,SAAS,sBAAsB,QAAuF;AACpH,SAAO;AAAA,IACL,MAAM;AAAA,IACN,WAAW;AAAA,IACX,QAAQ;AAAA,IACR,YAAY,EAAC,qBAAqB,SAAQ;AAAA,IAC1C,WAAW;AAAA,MACT,OAAO;AAAA,QACL,QAAQ;AAAA,QACR,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,IACA,UAAU;AAAA,IACV,UAAU;AAAA,IACV,UAAU;AAAA,MACR;AAAA,QACE,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,QAAQ;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa;AAAA,EACjB;AAAA,EACA;AAAA,EACA;AACF;AAGA,SAAS,oBAAqB,QAA6D;AACzF,MAAI,OAAO,WAAW,KAAK,WAAW,SAAS,OAAO,CAAC,CAAC,GAAG;AACzD,WAAO;AAAA,EACT;AACA,QAAM,aAAa,cAAc,MAAM;AACvC,SAAO,CAAC,QAAQ,YAAY,MAAM;AACpC;AAEA,SAAS,mBAAmB,QAA6D;AACvF,SAAO,mBAAmB,QAAQ,OAAO,CAAC,CAAC,KAAK;AAClD;AAEA,SAAS,yBAAyB,QAA6D;AAC7F,MAAG,mBAAmB,MAAM,GAAG;AAC7B,WAAO,OAAO,MAAM,CAAC,EAAE,IAAI,OAAK,mBAAmB,CAAQ,CAAC,EAAE,OAAO,OAAK,KAAK,IAAI,EAAE,SAAS;AAAA,EAChG;AACA,SAAO;AACT;AAgBA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC,KAAK;AAAA,EAChB;AAAA,EAEA,YAAa,OAAkC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,qBAAqB,oBAAoB,gBAAgB,KAAK,CAAC;AAAA,IACjE;AAAA,EACF;AAAA;AAAA,EAGA,oBAAoB,WAAmB,SAAgB;AACrD,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,SAAS,IAAI;AACvB,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,iBAAiB,WAAmB;AAClC,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,OAAO,YAAY,GAAG,CAAC;AACjC,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,gBAAgB,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACzD,IAAC,cAAwB,KAAK,CAAC,MAAM,QAAQ,EAAE,CAAC;AAChD,SAAK,MAAM,SAAS,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,SAAK,MAAM,SAAS,cAAc,MAAM,CAAC;AACzC,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,sBAAsB,oBAAoB,gBAAgB,KAAK,CAAC;AAGtE,QAAI,CAAC,uBAAuB,MAAM,wBAAwB,MAAM;AAC9D,aAAO;AAAA,QACL,qBAAqB;AAAA,QACrB,qBAAqB;AAAA,MACvB;AAAA,IACF,WACS,uBAAuB,MAAM,wBAAwB,OAAO;AACnE,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF,OACK;AACH,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,EAAC,IAAI,KAAK;AACzB,UAAM,EAAC,oBAAmB,IAAI,KAAK;AACnC,UAAM,YAAU;AAAA,MACd,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,IACjC;AACA,UAAM,gBAAgB,CAAC,KAAK;AAE5B,UAAM,0BAA0B,uBAAuB,yBAAyB,gBAAgB,KAAK,KAAK,CAAC;AAE3G,QAAI,yBAAyB;AAC3B,aAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,4BAAC,OACE,YAAE,mCAAmC,GACxC;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,KAAK;AAAA,YACd,OAAO,EAAE,uBAAuB;AAAA,YAEhC;AAAA,kCAAC,kBAAe;AAAA,cACf,EAAE,uBAAuB;AAAA;AAAA;AAAA,QAC5B;AAAA,SACF;AAAA,IACF,WACS,qBAAqB;AAC5B,YAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,YAAM,cAAc,OAAO,CAAC;AAC5B,YAAM,UAAU,OAAO,MAAM,CAAC;AAE9B,YAAM,UACJ,oBAAC,SACC;AAAA,QAAC;AAAA;AAAA,UACC,SAAS,KAAK;AAAA,UACd,OAAO,EAAE,uBAAuB;AAAA,UAChC,WAAU;AAAA,UAEV,8BAAC,kBAAe;AAAA;AAAA,MAClB,GACF;AAGF,YAAM,eAAe,QAAQ,IAAI,CAAC,GAAG,QAAQ;AAC3C,cAAM,QAAQ,OAAQ,UAAU,MAAI,CAAC,GAAG;AAExC,eACE,qBAAC,SACC;AAAA,8BAAC,qBAA4B,UAAU,KAAK,iBAAiB,KAAK,MAAM,GAAG,GACzE;AAAA,YAAC;AAAA;AAAA,cACC,YAAY,KAAK,MAAM;AAAA,cACvB,QAAQ;AAAA,cACR,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM,CAAC;AAAA;AAAA,UACvD,KALsB,GAMxB;AAAA,UACC,SACC,oBAAC,SAAgB,WAAU,yBAAyB,gBAAM,WAAjD,OAAyD;AAAA,aAT5D,SAAS,GAAG,EAWtB;AAAA,MAEJ,CAAC;AAGD,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YAEC;AAAA,YACA,OAAO,EAAE,QAAQ;AAAA,YACjB,QAAQ;AAAA,YAER;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,MAAqB,KAAK,oBAAoB,GAAG,CAAC;AAAA,gBAC7D,SAAS;AAAA,kBACP,CAAC,OAAO,EAAE,sBAAsB,CAAC;AAAA,kBACjC,CAAC,QAAQ,EAAE,mBAAmB,CAAC;AAAA,kBAC/B,CAAC,OAAO,EAAE,oBAAoB,CAAC;AAAA,gBACjC;AAAA;AAAA,YACF;AAAA;AAAA,UAbI;AAAA,QAcN;AAAA,QACC;AAAA,QACD;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YAEV;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBAEd;AAAA,sCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,kBACxD,EAAE,YAAY;AAAA;AAAA;AAAA,YACjB;AAAA;AAAA,UAVI;AAAA,QAWN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,YAEjD,8BAAC,OAAI,WAAsB;AAAA;AAAA,UAJvB;AAAA,QAKN;AAAA,SACF;AAAA,IAEJ,OACK;AACH,YAAM,EAAC,OAAM,IAAI,KAAK;AAEtB,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,UAAU,MAAM;AACd,mBAAK,SAAS,EAAC,qBAAqB,KAAI,CAAC;AACzC,mBAAK,MAAM,SAAS,aAAa;AAAA,YACnC;AAAA,YACA,WAAU;AAAA,YACV,OAAO;AAAA,YACP;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA,QACC,KAAK,MAAM,uBACV,qBAAC,SAAI,WAAU,yBACZ;AAAA,YAAE,qCAAqC;AAAA,UACvC;AAAA,UACD;AAAA,YAAC;AAAA;AAAA,cACC,SAAS,KAAK;AAAA,cACd,WAAU;AAAA,cAET,YAAE,0BAA0B;AAAA;AAAA,UAC/B;AAAA,WACF;AAAA,SAEJ;AAAA,IAEJ;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e47fcaaf47a881c798f8d8c8b2982ffb5ed75681"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return hn=function(){return s},s}hn();function Yy(n){hn().f[0]++;const e=(hn().s[0]++,hn().b[0][0]++,n.filter||(hn().b[0][1]++,["all"]));if(hn().s[1]++,Array.isArray(e))hn().b[1][1]++;else return hn().b[1][0]++,hn().s[2]++,e;let t=(hn().s[3]++,e[0]),i=(hn().s[4]++,e.slice(1));return hn().s[5]++,mK.indexOf(t)<0?(hn().b[2][0]++,hn().s[6]++,t="all",hn().s[7]++,i=[e.slice(0)]):hn().b[2][1]++,hn().s[8]++,[t,...i]}function yTe(n){return hn().f[1]++,hn().s[9]++,Rhe(vTe(n)).layers[0].filter}function vTe(n){return hn().f[2]++,hn().s[10]++,{id:"tmp",version:8,name:"Empty Style",metadata:{"maputnik:renderer":"mlgljs"},sources:{tmp:{type:"geojson",data:""}},sprite:"",glyphs:"https://orangemug.github.io/font-glyphs/glyphs/{fontstack}/{range}.pbf",layers:[{id:"tmp",type:"fill",source:"tmp",filter:n}]}}const bTe=(hn().s[11]++,["all","any","none"]);function XQ(n){if(hn().f[3]++,hn().s[12]++,hn().b[4][0]++,n.length===1&&(hn().b[4][1]++,bTe.includes(n[0])))return hn().b[3][0]++,hn().s[13]++,!0;hn().b[3][1]++;const e=(hn().s[14]++,t4(n));return hn().s[15]++,!UM.isEqual(e,n)}function JQ(n){return hn().f[4]++,hn().s[16]++,mK.indexOf(n[0])>=0}function CTe(n){return hn().f[5]++,hn().s[17]++,JQ(n)?(hn().b[5][0]++,hn().s[18]++,n.slice(1).map(e=>(hn().f[6]++,hn().s[19]++,JQ(e))).filter(e=>(hn().f[7]++,hn().s[20]++,e==!0)).length>0):(hn().b[5][1]++,hn().s[21]++,!1)}class _Te extends On.Component{static defaultProps=(hn().s[22]++,{filter:["all"]});constructor(e){hn().f[8]++,hn().s[23]++,super(e),hn().s[24]++,this.state={showDoc:!1,displaySimpleFilter:XQ(Yy(e))}}onFilterPartChanged(e,t){hn().f[9]++;const i=(hn().s[25]++,Yy(this.props).slice(0));hn().s[26]++,i[e]=t,hn().s[27]++,this.props.onChange(i)}deleteFilterItem(e){hn().f[10]++;const t=(hn().s[28]++,Yy(this.props).slice(0));hn().s[29]++,t.splice(e+1,1),hn().s[30]++,this.props.onChange(t)}addFilterItem=(hn().s[31]++,()=>{hn().f[11]++;const e=(hn().s[32]++,Yy(this.props).slice(0));hn().s[33]++,e.push(["==","name",""]),hn().s[34]++,this.props.onChange(e)});onToggleDoc=(hn().s[35]++,e=>{hn().f[12]++,hn().s[36]++,this.setState({showDoc:e})});makeFilter=(hn().s[37]++,()=>{hn().f[13]++,hn().s[38]++,this.setState({displaySimpleFilter:!0})});makeExpression=(hn().s[39]++,()=>{hn().f[14]++;const e=(hn().s[40]++,Yy(this.props));hn().s[41]++,this.props.onChange(yTe(e)),hn().s[42]++,this.setState({displaySimpleFilter:!1})});static getDerivedStateFromProps(e,t){hn().f[15]++;const i=(hn().s[43]++,XQ(Yy(e)));return hn().s[44]++,hn().b[7][0]++,!i&&(hn().b[7][1]++,t.displaySimpleFilter===!0)?(hn().b[6][0]++,hn().s[45]++,{displaySimpleFilter:!1,valueIsSimpleFilter:!1}):(hn().b[6][1]++,hn().s[46]++,hn().b[9][0]++,i&&(hn().b[9][1]++,t.displaySimpleFilter===!1)?(hn().b[8][0]++,hn().s[47]++,{valueIsSimpleFilter:!0}):(hn().b[8][1]++,hn().s[48]++,{valueIsSimpleFilter:!1}))}render(){hn().f[16]++;const{errors:e,t}=(hn().s[49]++,this.props),{displaySimpleFilter:i}=(hn().s[50]++,this.state),r=(hn().s[51]++,{doc:Tr.layer.filter.doc+" Combine multiple filters together by using a compound filter."}),o=(hn().s[52]++,["all"]),s=(hn().s[53]++,hn().b[10][0]++,i&&(hn().b[10][1]++,CTe(Yy(this.props))));if(hn().s[54]++,s)return hn().b[11][0]++,hn().s[55]++,te.jsxs("div",{className:"maputnik-filter-editor-unsupported",children:[te.jsx("p",{children:t("Nested filters are not supported.")}),te.jsxs(Ds,{onClick:this.makeExpression,title:t("Convert to expression"),children:[te.jsx(wM,{}),t("Upgrade to expression")]})]});if(hn().b[11][1]++,hn().s[56]++,i){hn().b[12][0]++;const a=(hn().s[57]++,Yy(this.props)),c=(hn().s[58]++,a[0]),f=(hn().s[59]++,a.slice(1)),y=(hn().s[60]++,te.jsx("div",{children:te.jsx(Ds,{onClick:this.makeExpression,title:t("Convert to expression"),className:"maputnik-make-zoom-function",children:te.jsx(wM,{})})})),_=(hn().s[61]++,f.map((E,I)=>{hn().f[17]++;const P=(hn().s[62]++,e[`filter[${I+1}]`]);return hn().s[63]++,te.jsxs("div",{children:[te.jsx(fTe,{onDelete:this.deleteFilterItem.bind(this,I),children:te.jsx(hTe,{properties:this.props.properties,filter:E,onChange:this.onFilterPartChanged.bind(this,I+1)})},I),(hn().b[13][0]++,P&&(hn().b[13][1]++,te.jsx("div",{className:"maputnik-inline-error",children:P.message},"error")))]},`block-${I}`)}));return hn().s[64]++,te.jsxs(te.Fragment,{children:[te.jsx(as,{fieldSpec:r,label:t("Filter"),action:y,children:te.jsx(zC,{value:c,onChange:E=>(hn().f[18]++,hn().s[65]++,this.onFilterPartChanged(0,E)),options:[["all",t("every filter matches")],["none",t("no filter matches")],["any",t("any filter matches")]]})},"top"),_,te.jsx("div",{className:"maputnik-filter-editor-add-wrapper",children:te.jsxs(Ds,{"data-wd-key":"layer-filter-button",className:"maputnik-add-filter",onClick:this.addFilterItem,children:[te.jsx(UB,{style:{verticalAlign:"text-bottom"}}),t("Add filter")]})},"buttons"),te.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(hn().b[14][0]++,""):(hn().b[14][1]++,"none")},children:te.jsx(EB,{fieldSpec:r})},"doc")]})}else{hn().b[12][1]++;const{filter:a}=(hn().s[66]++,this.props);return hn().s[67]++,te.jsxs(te.Fragment,{children:[te.jsx(zoe,{onDelete:()=>{hn().f[19]++,hn().s[68]++,this.setState({displaySimpleFilter:!0}),hn().s[69]++,this.props.onChange(o)},fieldName:"filter",value:a,errors:e,onChange:this.props.onChange}),(hn().b[15][0]++,this.state.valueIsSimpleFilter&&(hn().b[15][1]++,te.jsxs("div",{className:"maputnik-expr-infobox",children:[t("You've entered an old style filter.")," ",te.jsx("button",{onClick:this.makeFilter,className:"maputnik-expr-infobox__button",children:t("Switch to filter editor.")})]})))]})}}}const xTe=(hn().s[70]++,Mo()(_Te));var j_={},id={},N_={},FI,eq;function joe(){if(eq)return FI;eq=1;var n=typeof window=="object"&&window&&window.Object===Object&&window;return FI=n,FI}var zI,tq;function Vm(){if(tq)return zI;tq=1;var n=joe(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return zI=t,zI}var jI,nq;function x5(){if(nq)return jI;nq=1;var n=Vm(),e=n.Symbol;return jI=e,jI}var NI,iq;function MTe(){if(iq)return NI;iq=1;var n=x5(),e=Object.prototype,t=e.hasOwnProperty,i=e.toString,r=n?n.toStringTag:void 0;function o(s){var a=t.call(s,r),c=s[r];try{s[r]=void 0;var f=!0}catch{}var y=i.call(s);return f&&(a?s[r]=c:delete s[r]),y}return NI=o,NI}var GI,rq;function wTe(){if(rq)return GI;rq=1;var n=Object.prototype,e=n.toString;function t(i){return e.call(i)}return GI=t,GI}var WI,oq;function jC(){if(oq)return WI;oq=1;var n=x5(),e=MTe(),t=wTe(),i="[object Null]",r="[object Undefined]",o=n?n.toStringTag:void 0;function s(a){return a==null?a===void 0?r:i:o&&o in Object(a)?e(a):t(a)}return WI=s,WI}var QI,sq;function bf(){if(sq)return QI;sq=1;var n=Array.isArray;return QI=n,QI}var qI,aq;function M0(){if(aq)return qI;aq=1;function n(e){return e!=null&&typeof e=="object"}return qI=n,qI}var YI,lq;function STe(){if(lq)return YI;lq=1;var n=jC(),e=bf(),t=M0(),i="[object String]";function r(o){return typeof o=="string"||!e(o)&&t(o)&&n(o)==i}return YI=r,YI}var VI,uq;function ETe(){if(uq)return VI;uq=1;function n(e){return function(t,i,r){for(var o=-1,s=Object(t),a=r(t),c=a.length;c--;){var f=a[e?c:++o];if(i(s[f],f,s)===!1)break}return t}}return VI=n,VI}var $I,cq;function Noe(){if(cq)return $I;cq=1;var n=ETe(),e=n();return $I=e,$I}var HI,Aq;function BTe(){if(Aq)return HI;Aq=1;function n(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}return HI=n,HI}var ZI,hq;function OTe(){if(hq)return ZI;hq=1;var n=jC(),e=M0(),t="[object Arguments]";function i(r){return e(r)&&n(r)==t}return ZI=i,ZI}var XI,dq;function yK(){if(dq)return XI;dq=1;var n=OTe(),e=M0(),t=Object.prototype,i=t.hasOwnProperty,r=t.propertyIsEnumerable,o=n((function(){return arguments})())?n:function(s){return e(s)&&i.call(s,"callee")&&!r.call(s,"callee")};return XI=o,XI}var Q3={exports:{}},JI,fq;function ITe(){if(fq)return JI;fq=1;function n(){return!1}return JI=n,JI}Q3.exports;var pq;function FB(){return pq||(pq=1,(function(n,e){var t=Vm(),i=ITe(),r=e&&!e.nodeType&&e,o=r&&!0&&n&&!n.nodeType&&n,s=o&&o.exports===r,a=s?t.Buffer:void 0,c=a?a.isBuffer:void 0,f=c||i;n.exports=f})(Q3,Q3.exports)),Q3.exports}var e7,mq;function vK(){if(mq)return e7;mq=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(i,r){var o=typeof i;return r=r??n,!!r&&(o=="number"||o!="symbol"&&e.test(i))&&i>-1&&i%1==0&&i<r}return e7=t,e7}var t7,gq;function bK(){if(gq)return t7;gq=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return t7=e,t7}var n7,yq;function TTe(){if(yq)return n7;yq=1;var n=jC(),e=bK(),t=M0(),i="[object Arguments]",r="[object Array]",o="[object Boolean]",s="[object Date]",a="[object Error]",c="[object Function]",f="[object Map]",y="[object Number]",_="[object Object]",E="[object RegExp]",I="[object Set]",P="[object String]",K="[object WeakMap]",z="[object ArrayBuffer]",Q="[object DataView]",V="[object Float32Array]",$="[object Float64Array]",Z="[object Int8Array]",ee="[object Int16Array]",X="[object Int32Array]",W="[object Uint8Array]",se="[object Uint8ClampedArray]",ue="[object Uint16Array]",ve="[object Uint32Array]",ye={};ye[V]=ye[$]=ye[Z]=ye[ee]=ye[X]=ye[W]=ye[se]=ye[ue]=ye[ve]=!0,ye[i]=ye[r]=ye[z]=ye[o]=ye[Q]=ye[s]=ye[a]=ye[c]=ye[f]=ye[y]=ye[_]=ye[E]=ye[I]=ye[P]=ye[K]=!1;function Ee(_e){return t(_e)&&e(_e.length)&&!!ye[n(_e)]}return n7=Ee,n7}var i7,vq;function CK(){if(vq)return i7;vq=1;function n(e){return function(t){return e(t)}}return i7=n,i7}var q3={exports:{}};q3.exports;var bq;function _K(){return bq||(bq=1,(function(n,e){var t=joe(),i=e&&!e.nodeType&&e,r=i&&!0&&n&&!n.nodeType&&n,o=r&&r.exports===i,s=o&&t.process,a=(function(){try{var c=r&&r.require&&r.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}})();n.exports=a})(q3,q3.exports)),q3.exports}var r7,Cq;function xK(){if(Cq)return r7;Cq=1;var n=TTe(),e=CK(),t=_K(),i=t&&t.isTypedArray,r=i?e(i):n;return r7=r,r7}var o7,_q;function Goe(){if(_q)return o7;_q=1;var n=BTe(),e=yK(),t=bf(),i=FB(),r=vK(),o=xK(),s=Object.prototype,a=s.hasOwnProperty;function c(f,y){var _=t(f),E=!_&&e(f),I=!_&&!E&&i(f),P=!_&&!E&&!I&&o(f),K=_||E||I||P,z=K?n(f.length,String):[],Q=z.length;for(var V in f)(y||a.call(f,V))&&!(K&&(V=="length"||I&&(V=="offset"||V=="parent")||P&&(V=="buffer"||V=="byteLength"||V=="byteOffset")||r(V,Q)))&&z.push(V);return z}return o7=c,o7}var s7,xq;function MK(){if(xq)return s7;xq=1;var n=Object.prototype;function e(t){var i=t&&t.constructor,r=typeof i=="function"&&i.prototype||n;return t===r}return s7=e,s7}var a7,Mq;function Woe(){if(Mq)return a7;Mq=1;function n(e,t){return function(i){return e(t(i))}}return a7=n,a7}var l7,wq;function kTe(){if(wq)return l7;wq=1;var n=Woe(),e=n(Object.keys,Object);return l7=e,l7}var u7,Sq;function DTe(){if(Sq)return u7;Sq=1;var n=MK(),e=kTe(),t=Object.prototype,i=t.hasOwnProperty;function r(o){if(!n(o))return e(o);var s=[];for(var a in Object(o))i.call(o,a)&&a!="constructor"&&s.push(a);return s}return u7=r,u7}var c7,Eq;function Sp(){if(Eq)return c7;Eq=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return c7=n,c7}var A7,Bq;function wK(){if(Bq)return A7;Bq=1;var n=jC(),e=Sp(),t="[object AsyncFunction]",i="[object Function]",r="[object GeneratorFunction]",o="[object Proxy]";function s(a){if(!e(a))return!1;var c=n(a);return c==i||c==r||c==t||c==o}return A7=s,A7}var h7,Oq;function j2(){if(Oq)return h7;Oq=1;var n=wK(),e=bK();function t(i){return i!=null&&e(i.length)&&!n(i)}return h7=t,h7}var d7,Iq;function M5(){if(Iq)return d7;Iq=1;var n=Goe(),e=DTe(),t=j2();function i(r){return t(r)?n(r):e(r)}return d7=i,d7}var f7,Tq;function Qoe(){if(Tq)return f7;Tq=1;var n=Noe(),e=M5();function t(i,r){return i&&n(i,r,e)}return f7=t,f7}var p7,kq;function zB(){if(kq)return p7;kq=1;function n(e){return e}return p7=n,p7}var m7,Dq;function qoe(){if(Dq)return m7;Dq=1;var n=zB();function e(t){return typeof t=="function"?t:n}return m7=e,m7}var g7,Rq;function SK(){if(Rq)return g7;Rq=1;var n=Qoe(),e=qoe();function t(i,r){return i&&n(i,e(r))}return g7=t,g7}var y7,Pq;function EK(){if(Pq)return y7;Pq=1;var n=Woe(),e=n(Object.getPrototypeOf,Object);return y7=e,y7}var v7,Lq;function Yoe(){if(Lq)return v7;Lq=1;var n=jC(),e=EK(),t=M0(),i="[object Object]",r=Function.prototype,o=Object.prototype,s=r.toString,a=o.hasOwnProperty,c=s.call(Object);function f(y){if(!t(y)||n(y)!=i)return!1;var _=e(y);if(_===null)return!0;var E=a.call(_,"constructor")&&_.constructor;return typeof E=="function"&&E instanceof E&&s.call(E)==c}return v7=f,v7}var b7,Uq;function Voe(){if(Uq)return b7;Uq=1;function n(e,t){for(var i=-1,r=e==null?0:e.length,o=Array(r);++i<r;)o[i]=t(e[i],i,e);return o}return b7=n,b7}var C7,Kq;function RTe(){if(Kq)return C7;Kq=1;function n(){this.__data__=[],this.size=0}return C7=n,C7}var _7,Fq;function w5(){if(Fq)return _7;Fq=1;function n(e,t){return e===t||e!==e&&t!==t}return _7=n,_7}var x7,zq;function jB(){if(zq)return x7;zq=1;var n=w5();function e(t,i){for(var r=t.length;r--;)if(n(t[r][0],i))return r;return-1}return x7=e,x7}var M7,jq;function PTe(){if(jq)return M7;jq=1;var n=jB(),e=Array.prototype,t=e.splice;function i(r){var o=this.__data__,s=n(o,r);if(s<0)return!1;var a=o.length-1;return s==a?o.pop():t.call(o,s,1),--this.size,!0}return M7=i,M7}var w7,Nq;function LTe(){if(Nq)return w7;Nq=1;var n=jB();function e(t){var i=this.__data__,r=n(i,t);return r<0?void 0:i[r][1]}return w7=e,w7}var S7,Gq;function UTe(){if(Gq)return S7;Gq=1;var n=jB();function e(t){return n(this.__data__,t)>-1}return S7=e,S7}var E7,Wq;function KTe(){if(Wq)return E7;Wq=1;var n=jB();function e(t,i){var r=this.__data__,o=n(r,t);return o<0?(++this.size,r.push([t,i])):r[o][1]=i,this}return E7=e,E7}var B7,Qq;function NB(){if(Qq)return B7;Qq=1;var n=RTe(),e=PTe(),t=LTe(),i=UTe(),r=KTe();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var f=s[a];this.set(f[0],f[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=i,o.prototype.set=r,B7=o,B7}var O7,qq;function FTe(){if(qq)return O7;qq=1;var n=NB();function e(){this.__data__=new n,this.size=0}return O7=e,O7}var I7,Yq;function zTe(){if(Yq)return I7;Yq=1;function n(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}return I7=n,I7}var T7,Vq;function jTe(){if(Vq)return T7;Vq=1;function n(e){return this.__data__.get(e)}return T7=n,T7}var k7,$q;function NTe(){if($q)return k7;$q=1;function n(e){return this.__data__.has(e)}return k7=n,k7}var D7,Hq;function GTe(){if(Hq)return D7;Hq=1;var n=Vm(),e=n["__core-js_shared__"];return D7=e,D7}var R7,Zq;function WTe(){if(Zq)return R7;Zq=1;var n=GTe(),e=(function(){var i=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""})();function t(i){return!!e&&e in i}return R7=t,R7}var P7,Xq;function $oe(){if(Xq)return P7;Xq=1;var n=Function.prototype,e=n.toString;function t(i){if(i!=null){try{return e.call(i)}catch{}try{return i+""}catch{}}return""}return P7=t,P7}var L7,Jq;function QTe(){if(Jq)return L7;Jq=1;var n=wK(),e=WTe(),t=Sp(),i=$oe(),r=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,s=Function.prototype,a=Object.prototype,c=s.toString,f=a.hasOwnProperty,y=RegExp("^"+c.call(f).replace(r,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function _(E){if(!t(E)||e(E))return!1;var I=n(E)?y:o;return I.test(i(E))}return L7=_,L7}var U7,eY;function qTe(){if(eY)return U7;eY=1;function n(e,t){return e?.[t]}return U7=n,U7}var K7,tY;function NC(){if(tY)return K7;tY=1;var n=QTe(),e=qTe();function t(i,r){var o=e(i,r);return n(o)?o:void 0}return K7=t,K7}var F7,nY;function BK(){if(nY)return F7;nY=1;var n=NC(),e=Vm(),t=n(e,"Map");return F7=t,F7}var z7,iY;function GB(){if(iY)return z7;iY=1;var n=NC(),e=n(Object,"create");return z7=e,z7}var j7,rY;function YTe(){if(rY)return j7;rY=1;var n=GB();function e(){this.__data__=n?n(null):{},this.size=0}return j7=e,j7}var N7,oY;function VTe(){if(oY)return N7;oY=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return N7=n,N7}var G7,sY;function $Te(){if(sY)return G7;sY=1;var n=GB(),e="__lodash_hash_undefined__",t=Object.prototype,i=t.hasOwnProperty;function r(o){var s=this.__data__;if(n){var a=s[o];return a===e?void 0:a}return i.call(s,o)?s[o]:void 0}return G7=r,G7}var W7,aY;function HTe(){if(aY)return W7;aY=1;var n=GB(),e=Object.prototype,t=e.hasOwnProperty;function i(r){var o=this.__data__;return n?o[r]!==void 0:t.call(o,r)}return W7=i,W7}var Q7,lY;function ZTe(){if(lY)return Q7;lY=1;var n=GB(),e="__lodash_hash_undefined__";function t(i,r){var o=this.__data__;return this.size+=this.has(i)?0:1,o[i]=n&&r===void 0?e:r,this}return Q7=t,Q7}var q7,uY;function XTe(){if(uY)return q7;uY=1;var n=YTe(),e=VTe(),t=$Te(),i=HTe(),r=ZTe();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var f=s[a];this.set(f[0],f[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=i,o.prototype.set=r,q7=o,q7}var Y7,cY;function JTe(){if(cY)return Y7;cY=1;var n=XTe(),e=NB(),t=BK();function i(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return Y7=i,Y7}var V7,AY;function eke(){if(AY)return V7;AY=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return V7=n,V7}var $7,hY;function WB(){if(hY)return $7;hY=1;var n=eke();function e(t,i){var r=t.__data__;return n(i)?r[typeof i=="string"?"string":"hash"]:r.map}return $7=e,$7}var H7,dY;function tke(){if(dY)return H7;dY=1;var n=WB();function e(t){var i=n(this,t).delete(t);return this.size-=i?1:0,i}return H7=e,H7}var Z7,fY;function nke(){if(fY)return Z7;fY=1;var n=WB();function e(t){return n(this,t).get(t)}return Z7=e,Z7}var X7,pY;function ike(){if(pY)return X7;pY=1;var n=WB();function e(t){return n(this,t).has(t)}return X7=e,X7}var J7,mY;function rke(){if(mY)return J7;mY=1;var n=WB();function e(t,i){var r=n(this,t),o=r.size;return r.set(t,i),this.size+=r.size==o?0:1,this}return J7=e,J7}var eT,gY;function OK(){if(gY)return eT;gY=1;var n=JTe(),e=tke(),t=nke(),i=ike(),r=rke();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var f=s[a];this.set(f[0],f[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=i,o.prototype.set=r,eT=o,eT}var tT,yY;function oke(){if(yY)return tT;yY=1;var n=NB(),e=BK(),t=OK(),i=200;function r(o,s){var a=this.__data__;if(a instanceof n){var c=a.__data__;if(!e||c.length<i-1)return c.push([o,s]),this.size=++a.size,this;a=this.__data__=new t(c)}return a.set(o,s),this.size=a.size,this}return tT=r,tT}var nT,vY;function QB(){if(vY)return nT;vY=1;var n=NB(),e=FTe(),t=zTe(),i=jTe(),r=NTe(),o=oke();function s(a){var c=this.__data__=new n(a);this.size=c.size}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=i,s.prototype.has=r,s.prototype.set=o,nT=s,nT}var iT,bY;function ske(){if(bY)return iT;bY=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return iT=e,iT}var rT,CY;function ake(){if(CY)return rT;CY=1;function n(e){return this.__data__.has(e)}return rT=n,rT}var oT,_Y;function lke(){if(_Y)return oT;_Y=1;var n=OK(),e=ske(),t=ake();function i(r){var o=-1,s=r==null?0:r.length;for(this.__data__=new n;++o<s;)this.add(r[o])}return i.prototype.add=i.prototype.push=e,i.prototype.has=t,oT=i,oT}var sT,xY;function uke(){if(xY)return sT;xY=1;function n(e,t){for(var i=-1,r=e==null?0:e.length;++i<r;)if(t(e[i],i,e))return!0;return!1}return sT=n,sT}var aT,MY;function cke(){if(MY)return aT;MY=1;function n(e,t){return e.has(t)}return aT=n,aT}var lT,wY;function Hoe(){if(wY)return lT;wY=1;var n=lke(),e=uke(),t=cke(),i=1,r=2;function o(s,a,c,f,y,_){var E=c&i,I=s.length,P=a.length;if(I!=P&&!(E&&P>I))return!1;var K=_.get(s),z=_.get(a);if(K&&z)return K==a&&z==s;var Q=-1,V=!0,$=c&r?new n:void 0;for(_.set(s,a),_.set(a,s);++Q<I;){var Z=s[Q],ee=a[Q];if(f)var X=E?f(ee,Z,Q,a,s,_):f(Z,ee,Q,s,a,_);if(X!==void 0){if(X)continue;V=!1;break}if($){if(!e(a,function(W,se){if(!t($,se)&&(Z===W||y(Z,W,c,f,_)))return $.push(se)})){V=!1;break}}else if(!(Z===ee||y(Z,ee,c,f,_))){V=!1;break}}return _.delete(s),_.delete(a),V}return lT=o,lT}var uT,SY;function Zoe(){if(SY)return uT;SY=1;var n=Vm(),e=n.Uint8Array;return uT=e,uT}var cT,EY;function Ake(){if(EY)return cT;EY=1;function n(e){var t=-1,i=Array(e.size);return e.forEach(function(r,o){i[++t]=[o,r]}),i}return cT=n,cT}var AT,BY;function hke(){if(BY)return AT;BY=1;function n(e){var t=-1,i=Array(e.size);return e.forEach(function(r){i[++t]=r}),i}return AT=n,AT}var hT,OY;function dke(){if(OY)return hT;OY=1;var n=x5(),e=Zoe(),t=w5(),i=Hoe(),r=Ake(),o=hke(),s=1,a=2,c="[object Boolean]",f="[object Date]",y="[object Error]",_="[object Map]",E="[object Number]",I="[object RegExp]",P="[object Set]",K="[object String]",z="[object Symbol]",Q="[object ArrayBuffer]",V="[object DataView]",$=n?n.prototype:void 0,Z=$?$.valueOf:void 0;function ee(X,W,se,ue,ve,ye,Ee){switch(se){case V:if(X.byteLength!=W.byteLength||X.byteOffset!=W.byteOffset)return!1;X=X.buffer,W=W.buffer;case Q:return!(X.byteLength!=W.byteLength||!ye(new e(X),new e(W)));case c:case f:case E:return t(+X,+W);case y:return X.name==W.name&&X.message==W.message;case I:case K:return X==W+"";case _:var _e=r;case P:var Be=ue&s;if(_e||(_e=o),X.size!=W.size&&!Be)return!1;var Fe=Ee.get(X);if(Fe)return Fe==W;ue|=a,Ee.set(X,W);var Se=i(_e(X),_e(W),ue,ve,ye,Ee);return Ee.delete(X),Se;case z:if(Z)return Z.call(X)==Z.call(W)}return!1}return hT=ee,hT}var dT,IY;function Xoe(){if(IY)return dT;IY=1;function n(e,t){for(var i=-1,r=t.length,o=e.length;++i<r;)e[o+i]=t[i];return e}return dT=n,dT}var fT,TY;function Joe(){if(TY)return fT;TY=1;var n=Xoe(),e=bf();function t(i,r,o){var s=r(i);return e(i)?s:n(s,o(i))}return fT=t,fT}var pT,kY;function fke(){if(kY)return pT;kY=1;function n(e,t){for(var i=-1,r=e==null?0:e.length,o=0,s=[];++i<r;){var a=e[i];t(a,i,e)&&(s[o++]=a)}return s}return pT=n,pT}var mT,DY;function ese(){if(DY)return mT;DY=1;function n(){return[]}return mT=n,mT}var gT,RY;function IK(){if(RY)return gT;RY=1;var n=fke(),e=ese(),t=Object.prototype,i=t.propertyIsEnumerable,r=Object.getOwnPropertySymbols,o=r?function(s){return s==null?[]:(s=Object(s),n(r(s),function(a){return i.call(s,a)}))}:e;return gT=o,gT}var yT,PY;function tse(){if(PY)return yT;PY=1;var n=Joe(),e=IK(),t=M5();function i(r){return n(r,t,e)}return yT=i,yT}var vT,LY;function pke(){if(LY)return vT;LY=1;var n=tse(),e=1,t=Object.prototype,i=t.hasOwnProperty;function r(o,s,a,c,f,y){var _=a&e,E=n(o),I=E.length,P=n(s),K=P.length;if(I!=K&&!_)return!1;for(var z=I;z--;){var Q=E[z];if(!(_?Q in s:i.call(s,Q)))return!1}var V=y.get(o),$=y.get(s);if(V&&$)return V==s&&$==o;var Z=!0;y.set(o,s),y.set(s,o);for(var ee=_;++z<I;){Q=E[z];var X=o[Q],W=s[Q];if(c)var se=_?c(W,X,Q,s,o,y):c(X,W,Q,o,s,y);if(!(se===void 0?X===W||f(X,W,a,c,y):se)){Z=!1;break}ee||(ee=Q=="constructor")}if(Z&&!ee){var ue=o.constructor,ve=s.constructor;ue!=ve&&"constructor"in o&&"constructor"in s&&!(typeof ue=="function"&&ue instanceof ue&&typeof ve=="function"&&ve instanceof ve)&&(Z=!1)}return y.delete(o),y.delete(s),Z}return vT=r,vT}var bT,UY;function mke(){if(UY)return bT;UY=1;var n=NC(),e=Vm(),t=n(e,"DataView");return bT=t,bT}var CT,KY;function gke(){if(KY)return CT;KY=1;var n=NC(),e=Vm(),t=n(e,"Promise");return CT=t,CT}var _T,FY;function yke(){if(FY)return _T;FY=1;var n=NC(),e=Vm(),t=n(e,"Set");return _T=t,_T}var xT,zY;function vke(){if(zY)return xT;zY=1;var n=NC(),e=Vm(),t=n(e,"WeakMap");return xT=t,xT}var MT,jY;function qB(){if(jY)return MT;jY=1;var n=mke(),e=BK(),t=gke(),i=yke(),r=vke(),o=jC(),s=$oe(),a="[object Map]",c="[object Object]",f="[object Promise]",y="[object Set]",_="[object WeakMap]",E="[object DataView]",I=s(n),P=s(e),K=s(t),z=s(i),Q=s(r),V=o;return(n&&V(new n(new ArrayBuffer(1)))!=E||e&&V(new e)!=a||t&&V(t.resolve())!=f||i&&V(new i)!=y||r&&V(new r)!=_)&&(V=function($){var Z=o($),ee=Z==c?$.constructor:void 0,X=ee?s(ee):"";if(X)switch(X){case I:return E;case P:return a;case K:return f;case z:return y;case Q:return _}return Z}),MT=V,MT}var wT,NY;function bke(){if(NY)return wT;NY=1;var n=QB(),e=Hoe(),t=dke(),i=pke(),r=qB(),o=bf(),s=FB(),a=xK(),c=1,f="[object Arguments]",y="[object Array]",_="[object Object]",E=Object.prototype,I=E.hasOwnProperty;function P(K,z,Q,V,$,Z){var ee=o(K),X=o(z),W=ee?y:r(K),se=X?y:r(z);W=W==f?_:W,se=se==f?_:se;var ue=W==_,ve=se==_,ye=W==se;if(ye&&s(K)){if(!s(z))return!1;ee=!0,ue=!1}if(ye&&!ue)return Z||(Z=new n),ee||a(K)?e(K,z,Q,V,$,Z):t(K,z,W,Q,V,$,Z);if(!(Q&c)){var Ee=ue&&I.call(K,"__wrapped__"),_e=ve&&I.call(z,"__wrapped__");if(Ee||_e){var Be=Ee?K.value():K,Fe=_e?z.value():z;return Z||(Z=new n),$(Be,Fe,Q,V,Z)}}return ye?(Z||(Z=new n),i(K,z,Q,V,$,Z)):!1}return wT=P,wT}var ST,GY;function nse(){if(GY)return ST;GY=1;var n=bke(),e=M0();function t(i,r,o,s,a){return i===r?!0:i==null||r==null||!e(i)&&!e(r)?i!==i&&r!==r:n(i,r,o,s,t,a)}return ST=t,ST}var ET,WY;function Cke(){if(WY)return ET;WY=1;var n=QB(),e=nse(),t=1,i=2;function r(o,s,a,c){var f=a.length,y=f,_=!c;if(o==null)return!y;for(o=Object(o);f--;){var E=a[f];if(_&&E[2]?E[1]!==o[E[0]]:!(E[0]in o))return!1}for(;++f<y;){E=a[f];var I=E[0],P=o[I],K=E[1];if(_&&E[2]){if(P===void 0&&!(I in o))return!1}else{var z=new n;if(c)var Q=c(P,K,I,o,s,z);if(!(Q===void 0?e(K,P,t|i,c,z):Q))return!1}}return!0}return ET=r,ET}var BT,QY;function ise(){if(QY)return BT;QY=1;var n=Sp();function e(t){return t===t&&!n(t)}return BT=e,BT}var OT,qY;function _ke(){if(qY)return OT;qY=1;var n=ise(),e=M5();function t(i){for(var r=e(i),o=r.length;o--;){var s=r[o],a=i[s];r[o]=[s,a,n(a)]}return r}return OT=t,OT}var IT,YY;function rse(){if(YY)return IT;YY=1;function n(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==void 0||e in Object(i))}}return IT=n,IT}var TT,VY;function xke(){if(VY)return TT;VY=1;var n=Cke(),e=_ke(),t=rse();function i(r){var o=e(r);return o.length==1&&o[0][2]?t(o[0][0],o[0][1]):function(s){return s===r||n(s,r,o)}}return TT=i,TT}var kT,$Y;function YB(){if($Y)return kT;$Y=1;var n=jC(),e=M0(),t="[object Symbol]";function i(r){return typeof r=="symbol"||e(r)&&n(r)==t}return kT=i,kT}var DT,HY;function TK(){if(HY)return DT;HY=1;var n=bf(),e=YB(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function r(o,s){if(n(o))return!1;var a=typeof o;return a=="number"||a=="symbol"||a=="boolean"||o==null||e(o)?!0:i.test(o)||!t.test(o)||s!=null&&o in Object(s)}return DT=r,DT}var RT,ZY;function Mke(){if(ZY)return RT;ZY=1;var n=OK(),e="Expected a function";function t(i,r){if(typeof i!="function"||r!=null&&typeof r!="function")throw new TypeError(e);var o=function(){var s=arguments,a=r?r.apply(this,s):s[0],c=o.cache;if(c.has(a))return c.get(a);var f=i.apply(this,s);return o.cache=c.set(a,f)||c,f};return o.cache=new(t.Cache||n),o}return t.Cache=n,RT=t,RT}var PT,XY;function wke(){if(XY)return PT;XY=1;var n=Mke(),e=500;function t(i){var r=n(i,function(s){return o.size===e&&o.clear(),s}),o=r.cache;return r}return PT=t,PT}var LT,JY;function Ske(){if(JY)return LT;JY=1;var n=wke(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,i=n(function(r){var o=[];return r.charCodeAt(0)===46&&o.push(""),r.replace(e,function(s,a,c,f){o.push(c?f.replace(t,"$1"):a||s)}),o});return LT=i,LT}var UT,eV;function Eke(){if(eV)return UT;eV=1;var n=x5(),e=Voe(),t=bf(),i=YB(),r=n?n.prototype:void 0,o=r?r.toString:void 0;function s(a){if(typeof a=="string")return a;if(t(a))return e(a,s)+"";if(i(a))return o?o.call(a):"";var c=a+"";return c=="0"&&1/a==-1/0?"-0":c}return UT=s,UT}var KT,tV;function Bke(){if(tV)return KT;tV=1;var n=Eke();function e(t){return t==null?"":n(t)}return KT=e,KT}var FT,nV;function ose(){if(nV)return FT;nV=1;var n=bf(),e=TK(),t=Ske(),i=Bke();function r(o,s){return n(o)?o:e(o,s)?[o]:t(i(o))}return FT=r,FT}var zT,iV;function VB(){if(iV)return zT;iV=1;var n=YB();function e(t){if(typeof t=="string"||n(t))return t;var i=t+"";return i=="0"&&1/t==-1/0?"-0":i}return zT=e,zT}var jT,rV;function sse(){if(rV)return jT;rV=1;var n=ose(),e=VB();function t(i,r){r=n(r,i);for(var o=0,s=r.length;i!=null&&o<s;)i=i[e(r[o++])];return o&&o==s?i:void 0}return jT=t,jT}var NT,oV;function Oke(){if(oV)return NT;oV=1;var n=sse();function e(t,i,r){var o=t==null?void 0:n(t,i);return o===void 0?r:o}return NT=e,NT}var GT,sV;function Ike(){if(sV)return GT;sV=1;function n(e,t){return e!=null&&t in Object(e)}return GT=n,GT}var WT,aV;function Tke(){if(aV)return WT;aV=1;var n=ose(),e=yK(),t=bf(),i=vK(),r=bK(),o=VB();function s(a,c,f){c=n(c,a);for(var y=-1,_=c.length,E=!1;++y<_;){var I=o(c[y]);if(!(E=a!=null&&f(a,I)))break;a=a[I]}return E||++y!=_?E:(_=a==null?0:a.length,!!_&&r(_)&&i(I,_)&&(t(a)||e(a)))}return WT=s,WT}var QT,lV;function kke(){if(lV)return QT;lV=1;var n=Ike(),e=Tke();function t(i,r){return i!=null&&e(i,r,n)}return QT=t,QT}var qT,uV;function Dke(){if(uV)return qT;uV=1;var n=nse(),e=Oke(),t=kke(),i=TK(),r=ise(),o=rse(),s=VB(),a=1,c=2;function f(y,_){return i(y)&&r(_)?o(s(y),_):function(E){var I=e(E,y);return I===void 0&&I===_?t(E,y):n(_,I,a|c)}}return qT=f,qT}var YT,cV;function Rke(){if(cV)return YT;cV=1;function n(e){return function(t){return t?.[e]}}return YT=n,YT}var VT,AV;function Pke(){if(AV)return VT;AV=1;var n=sse();function e(t){return function(i){return n(i,t)}}return VT=e,VT}var $T,hV;function Lke(){if(hV)return $T;hV=1;var n=Rke(),e=Pke(),t=TK(),i=VB();function r(o){return t(o)?n(i(o)):e(o)}return $T=r,$T}var HT,dV;function Uke(){if(dV)return HT;dV=1;var n=xke(),e=Dke(),t=zB(),i=bf(),r=Lke();function o(s){return typeof s=="function"?s:s==null?t:typeof s=="object"?i(s)?e(s[0],s[1]):n(s):r(s)}return HT=o,HT}var ZT,fV;function Kke(){if(fV)return ZT;fV=1;var n=j2();function e(t,i){return function(r,o){if(r==null)return r;if(!n(r))return t(r,o);for(var s=r.length,a=i?s:-1,c=Object(r);(i?a--:++a<s)&&o(c[a],a,c)!==!1;);return r}}return ZT=e,ZT}var XT,pV;function ase(){if(pV)return XT;pV=1;var n=Qoe(),e=Kke(),t=e(n);return XT=t,XT}var JT,mV;function Fke(){if(mV)return JT;mV=1;var n=ase(),e=j2();function t(i,r){var o=-1,s=e(i)?Array(i.length):[];return n(i,function(a,c,f){s[++o]=r(a,c,f)}),s}return JT=t,JT}var ek,gV;function zke(){if(gV)return ek;gV=1;var n=Voe(),e=Uke(),t=Fke(),i=bf();function r(o,s){var a=i(o)?n:t;return a(o,e(s,3))}return ek=r,ek}var yV;function jke(){if(yV)return N_;yV=1,Object.defineProperty(N_,"__esModule",{value:!0}),N_.flattenNames=void 0;var n=STe(),e=c(n),t=SK(),i=c(t),r=Yoe(),o=c(r),s=zke(),a=c(s);function c(y){return y&&y.__esModule?y:{default:y}}var f=N_.flattenNames=function y(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],E=[];return(0,a.default)(_,function(I){Array.isArray(I)?y(I).map(function(P){return E.push(P)}):(0,o.default)(I)?(0,i.default)(I,function(P,K){P===!0&&E.push(K),E.push(K+"-"+P)}):(0,e.default)(I)&&E.push(I)}),E};return N_.default=f,N_}var G_={},tk,vV;function lse(){if(vV)return tk;vV=1;function n(e,t){for(var i=-1,r=e==null?0:e.length;++i<r&&t(e[i],i,e)!==!1;);return e}return tk=n,tk}var nk,bV;function use(){if(bV)return nk;bV=1;var n=NC(),e=(function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}})();return nk=e,nk}var ik,CV;function kK(){if(CV)return ik;CV=1;var n=use();function e(t,i,r){i=="__proto__"&&n?n(t,i,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[i]=r}return ik=e,ik}var rk,_V;function cse(){if(_V)return rk;_V=1;var n=kK(),e=w5(),t=Object.prototype,i=t.hasOwnProperty;function r(o,s,a){var c=o[s];(!(i.call(o,s)&&e(c,a))||a===void 0&&!(s in o))&&n(o,s,a)}return rk=r,rk}var ok,xV;function S5(){if(xV)return ok;xV=1;var n=cse(),e=kK();function t(i,r,o,s){var a=!o;o||(o={});for(var c=-1,f=r.length;++c<f;){var y=r[c],_=s?s(o[y],i[y],y,o,i):void 0;_===void 0&&(_=i[y]),a?e(o,y,_):n(o,y,_)}return o}return ok=t,ok}var sk,MV;function Nke(){if(MV)return sk;MV=1;var n=S5(),e=M5();function t(i,r){return i&&n(r,e(r),i)}return sk=t,sk}var ak,wV;function Gke(){if(wV)return ak;wV=1;function n(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}return ak=n,ak}var lk,SV;function Wke(){if(SV)return lk;SV=1;var n=Sp(),e=MK(),t=Gke(),i=Object.prototype,r=i.hasOwnProperty;function o(s){if(!n(s))return t(s);var a=e(s),c=[];for(var f in s)f=="constructor"&&(a||!r.call(s,f))||c.push(f);return c}return lk=o,lk}var uk,EV;function E5(){if(EV)return uk;EV=1;var n=Goe(),e=Wke(),t=j2();function i(r){return t(r)?n(r,!0):e(r)}return uk=i,uk}var ck,BV;function Qke(){if(BV)return ck;BV=1;var n=S5(),e=E5();function t(i,r){return i&&n(r,e(r),i)}return ck=t,ck}var Y3={exports:{}};Y3.exports;var OV;function Ase(){return OV||(OV=1,(function(n,e){var t=Vm(),i=e&&!e.nodeType&&e,r=i&&!0&&n&&!n.nodeType&&n,o=r&&r.exports===i,s=o?t.Buffer:void 0,a=s?s.allocUnsafe:void 0;function c(f,y){if(y)return f.slice();var _=f.length,E=a?a(_):new f.constructor(_);return f.copy(E),E}n.exports=c})(Y3,Y3.exports)),Y3.exports}var Ak,IV;function hse(){if(IV)return Ak;IV=1;function n(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}return Ak=n,Ak}var hk,TV;function qke(){if(TV)return hk;TV=1;var n=S5(),e=IK();function t(i,r){return n(i,e(i),r)}return hk=t,hk}var dk,kV;function dse(){if(kV)return dk;kV=1;var n=Xoe(),e=EK(),t=IK(),i=ese(),r=Object.getOwnPropertySymbols,o=r?function(s){for(var a=[];s;)n(a,t(s)),s=e(s);return a}:i;return dk=o,dk}var fk,DV;function Yke(){if(DV)return fk;DV=1;var n=S5(),e=dse();function t(i,r){return n(i,e(i),r)}return fk=t,fk}var pk,RV;function Vke(){if(RV)return pk;RV=1;var n=Joe(),e=dse(),t=E5();function i(r){return n(r,t,e)}return pk=i,pk}var mk,PV;function $ke(){if(PV)return mk;PV=1;var n=Object.prototype,e=n.hasOwnProperty;function t(i){var r=i.length,o=new i.constructor(r);return r&&typeof i[0]=="string"&&e.call(i,"index")&&(o.index=i.index,o.input=i.input),o}return mk=t,mk}var gk,LV;function DK(){if(LV)return gk;LV=1;var n=Zoe();function e(t){var i=new t.constructor(t.byteLength);return new n(i).set(new n(t)),i}return gk=e,gk}var yk,UV;function Hke(){if(UV)return yk;UV=1;var n=DK();function e(t,i){var r=i?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}return yk=e,yk}var vk,KV;function Zke(){if(KV)return vk;KV=1;var n=/\w*$/;function e(t){var i=new t.constructor(t.source,n.exec(t));return i.lastIndex=t.lastIndex,i}return vk=e,vk}var bk,FV;function Xke(){if(FV)return bk;FV=1;var n=x5(),e=n?n.prototype:void 0,t=e?e.valueOf:void 0;function i(r){return t?Object(t.call(r)):{}}return bk=i,bk}var Ck,zV;function fse(){if(zV)return Ck;zV=1;var n=DK();function e(t,i){var r=i?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}return Ck=e,Ck}var _k,jV;function Jke(){if(jV)return _k;jV=1;var n=DK(),e=Hke(),t=Zke(),i=Xke(),r=fse(),o="[object Boolean]",s="[object Date]",a="[object Map]",c="[object Number]",f="[object RegExp]",y="[object Set]",_="[object String]",E="[object Symbol]",I="[object ArrayBuffer]",P="[object DataView]",K="[object Float32Array]",z="[object Float64Array]",Q="[object Int8Array]",V="[object Int16Array]",$="[object Int32Array]",Z="[object Uint8Array]",ee="[object Uint8ClampedArray]",X="[object Uint16Array]",W="[object Uint32Array]";function se(ue,ve,ye){var Ee=ue.constructor;switch(ve){case I:return n(ue);case o:case s:return new Ee(+ue);case P:return e(ue,ye);case K:case z:case Q:case V:case $:case Z:case ee:case X:case W:return r(ue,ye);case a:return new Ee;case c:case _:return new Ee(ue);case f:return t(ue);case y:return new Ee;case E:return i(ue)}}return _k=se,_k}var xk,NV;function e9e(){if(NV)return xk;NV=1;var n=Sp(),e=Object.create,t=(function(){function i(){}return function(r){if(!n(r))return{};if(e)return e(r);i.prototype=r;var o=new i;return i.prototype=void 0,o}})();return xk=t,xk}var Mk,GV;function pse(){if(GV)return Mk;GV=1;var n=e9e(),e=EK(),t=MK();function i(r){return typeof r.constructor=="function"&&!t(r)?n(e(r)):{}}return Mk=i,Mk}var wk,WV;function t9e(){if(WV)return wk;WV=1;var n=qB(),e=M0(),t="[object Map]";function i(r){return e(r)&&n(r)==t}return wk=i,wk}var Sk,QV;function n9e(){if(QV)return Sk;QV=1;var n=t9e(),e=CK(),t=_K(),i=t&&t.isMap,r=i?e(i):n;return Sk=r,Sk}var Ek,qV;function i9e(){if(qV)return Ek;qV=1;var n=qB(),e=M0(),t="[object Set]";function i(r){return e(r)&&n(r)==t}return Ek=i,Ek}var Bk,YV;function r9e(){if(YV)return Bk;YV=1;var n=i9e(),e=CK(),t=_K(),i=t&&t.isSet,r=i?e(i):n;return Bk=r,Bk}var Ok,VV;function o9e(){if(VV)return Ok;VV=1;var n=QB(),e=lse(),t=cse(),i=Nke(),r=Qke(),o=Ase(),s=hse(),a=qke(),c=Yke(),f=tse(),y=Vke(),_=qB(),E=$ke(),I=Jke(),P=pse(),K=bf(),z=FB(),Q=n9e(),V=Sp(),$=r9e(),Z=M5(),ee=E5(),X=1,W=2,se=4,ue="[object Arguments]",ve="[object Array]",ye="[object Boolean]",Ee="[object Date]",_e="[object Error]",Be="[object Function]",Fe="[object GeneratorFunction]",Se="[object Map]",qe="[object Number]",ut="[object Object]",ht="[object RegExp]",De="[object Set]",Ie="[object String]",ze="[object Symbol]",Te="[object WeakMap]",vt="[object ArrayBuffer]",st="[object DataView]",Et="[object Float32Array]",Pt="[object Float64Array]",ke="[object Int8Array]",Oe="[object Int16Array]",we="[object Int32Array]",Ye="[object Uint8Array]",ft="[object Uint8ClampedArray]",dt="[object Uint16Array]",gt="[object Uint32Array]",Lt={};Lt[ue]=Lt[ve]=Lt[vt]=Lt[st]=Lt[ye]=Lt[Ee]=Lt[Et]=Lt[Pt]=Lt[ke]=Lt[Oe]=Lt[we]=Lt[Se]=Lt[qe]=Lt[ut]=Lt[ht]=Lt[De]=Lt[Ie]=Lt[ze]=Lt[Ye]=Lt[ft]=Lt[dt]=Lt[gt]=!0,Lt[_e]=Lt[Be]=Lt[Te]=!1;function Tt(Zt,Fn,Ln,fi,Rn,Dn){var wn,qn=Fn&X,En=Fn&W,wt=Fn&se;if(Ln&&(wn=Rn?Ln(Zt,fi,Rn,Dn):Ln(Zt)),wn!==void 0)return wn;if(!V(Zt))return Zt;var be=K(Zt);if(be){if(wn=E(Zt),!qn)return s(Zt,wn)}else{var re=_(Zt),ce=re==Be||re==Fe;if(z(Zt))return o(Zt,qn);if(re==ut||re==ue||ce&&!Rn){if(wn=En||ce?{}:P(Zt),!qn)return En?c(Zt,r(wn,Zt)):a(Zt,i(wn,Zt))}else{if(!Lt[re])return Rn?Zt:{};wn=I(Zt,re,qn)}}Dn||(Dn=new n);var Pe=Dn.get(Zt);if(Pe)return Pe;Dn.set(Zt,wn),$(Zt)?Zt.forEach(function(It){wn.add(Tt(It,Fn,Ln,It,Zt,Dn))}):Q(Zt)&&Zt.forEach(function(It,_n){wn.set(_n,Tt(It,Fn,Ln,_n,Zt,Dn))});var tt=wt?En?y:f:En?ee:Z,xt=be?void 0:tt(Zt);return e(xt||Zt,function(It,_n){xt&&(_n=It,It=Zt[_n]),t(wn,_n,Tt(It,Fn,Ln,_n,Zt,Dn))}),wn}return Ok=Tt,Ok}var Ik,$V;function s9e(){if($V)return Ik;$V=1;var n=o9e(),e=1,t=4;function i(r){return n(r,e|t)}return Ik=i,Ik}var HV;function a9e(){if(HV)return G_;HV=1,Object.defineProperty(G_,"__esModule",{value:!0}),G_.mergeClasses=void 0;var n=SK(),e=o(n),t=s9e(),i=o(t),r=Object.assign||function(a){for(var c=1;c<arguments.length;c++){var f=arguments[c];for(var y in f)Object.prototype.hasOwnProperty.call(f,y)&&(a[y]=f[y])}return a};function o(a){return a&&a.__esModule?a:{default:a}}var s=G_.mergeClasses=function(c){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],y=c.default&&(0,i.default)(c.default)||{};return f.map(function(_){var E=c[_];return E&&(0,e.default)(E,function(I,P){y[P]||(y[P]={}),y[P]=r({},y[P],E[P])}),_}),y};return G_.default=s,G_}var W_={},ZV;function l9e(){if(ZV)return W_;ZV=1,Object.defineProperty(W_,"__esModule",{value:!0}),W_.autoprefix=void 0;var n=SK(),e=i(n),t=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var c=arguments[a];for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(s[f]=c[f])}return s};function i(s){return s&&s.__esModule?s:{default:s}}var r={borderRadius:function(a){return{msBorderRadius:a,MozBorderRadius:a,OBorderRadius:a,WebkitBorderRadius:a,borderRadius:a}},boxShadow:function(a){return{msBoxShadow:a,MozBoxShadow:a,OBoxShadow:a,WebkitBoxShadow:a,boxShadow:a}},userSelect:function(a){return{WebkitTouchCallout:a,KhtmlUserSelect:a,MozUserSelect:a,msUserSelect:a,WebkitUserSelect:a,userSelect:a}},flex:function(a){return{WebkitBoxFlex:a,MozBoxFlex:a,WebkitFlex:a,msFlex:a,flex:a}},flexBasis:function(a){return{WebkitFlexBasis:a,flexBasis:a}},justifyContent:function(a){return{WebkitJustifyContent:a,justifyContent:a}},transition:function(a){return{msTransition:a,MozTransition:a,OTransition:a,WebkitTransition:a,transition:a}},transform:function(a){return{msTransform:a,MozTransform:a,OTransform:a,WebkitTransform:a,transform:a}},absolute:function(a){var c=a&&a.split(" ");return{position:"absolute",top:c&&c[0],right:c&&c[1],bottom:c&&c[2],left:c&&c[3]}},extend:function(a,c){var f=c[a];return f||{extend:a}}},o=W_.autoprefix=function(a){var c={};return(0,e.default)(a,function(f,y){var _={};(0,e.default)(f,function(E,I){var P=r[I];P?_=t({},_,P(E)):_[I]=E}),c[y]=_}),c};return W_.default=o,W_}var Q_={},XV;function u9e(){if(XV)return Q_;XV=1,Object.defineProperty(Q_,"__esModule",{value:!0}),Q_.hover=void 0;var n=Object.assign||function(c){for(var f=1;f<arguments.length;f++){var y=arguments[f];for(var _ in y)Object.prototype.hasOwnProperty.call(y,_)&&(c[_]=y[_])}return c},e=pa(),t=i(e);function i(c){return c&&c.__esModule?c:{default:c}}function r(c,f){if(!(c instanceof f))throw new TypeError("Cannot call a class as a function")}function o(c,f){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:c}function s(c,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);c.prototype=Object.create(f&&f.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(c,f):c.__proto__=f)}var a=Q_.hover=function(f){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(_){s(E,_);function E(){var I,P,K,z;r(this,E);for(var Q=arguments.length,V=Array(Q),$=0;$<Q;$++)V[$]=arguments[$];return z=(P=(K=o(this,(I=E.__proto__||Object.getPrototypeOf(E)).call.apply(I,[this].concat(V))),K),K.state={hover:!1},K.handleMouseOver=function(){return K.setState({hover:!0})},K.handleMouseOut=function(){return K.setState({hover:!1})},K.render=function(){return t.default.createElement(y,{onMouseOver:K.handleMouseOver,onMouseOut:K.handleMouseOut},t.default.createElement(f,n({},K.props,K.state)))},P),o(K,z)}return E})(t.default.Component)};return Q_.default=a,Q_}var q_={},JV;function c9e(){if(JV)return q_;JV=1,Object.defineProperty(q_,"__esModule",{value:!0}),q_.active=void 0;var n=Object.assign||function(c){for(var f=1;f<arguments.length;f++){var y=arguments[f];for(var _ in y)Object.prototype.hasOwnProperty.call(y,_)&&(c[_]=y[_])}return c},e=pa(),t=i(e);function i(c){return c&&c.__esModule?c:{default:c}}function r(c,f){if(!(c instanceof f))throw new TypeError("Cannot call a class as a function")}function o(c,f){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:c}function s(c,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);c.prototype=Object.create(f&&f.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(c,f):c.__proto__=f)}var a=q_.active=function(f){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(_){s(E,_);function E(){var I,P,K,z;r(this,E);for(var Q=arguments.length,V=Array(Q),$=0;$<Q;$++)V[$]=arguments[$];return z=(P=(K=o(this,(I=E.__proto__||Object.getPrototypeOf(E)).call.apply(I,[this].concat(V))),K),K.state={active:!1},K.handleMouseDown=function(){return K.setState({active:!0})},K.handleMouseUp=function(){return K.setState({active:!1})},K.render=function(){return t.default.createElement(y,{onMouseDown:K.handleMouseDown,onMouseUp:K.handleMouseUp},t.default.createElement(f,n({},K.props,K.state)))},P),o(K,z)}return E})(t.default.Component)};return q_.default=a,q_}var Nw={},e$;function A9e(){if(e$)return Nw;e$=1,Object.defineProperty(Nw,"__esModule",{value:!0});var n=function(t,i){var r={},o=function(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r[a]=c};return t===0&&o("first-child"),t===i-1&&o("last-child"),(t===0||t%2===0)&&o("even"),Math.abs(t%2)===1&&o("odd"),o("nth-child",t),r};return Nw.default=n,Nw}var t$;function $m(){if(t$)return id;t$=1,Object.defineProperty(id,"__esModule",{value:!0}),id.ReactCSS=id.loop=id.handleActive=id.handleHover=id.hover=void 0;var n=jke(),e=E(n),t=a9e(),i=E(t),r=l9e(),o=E(r),s=u9e(),a=E(s),c=c9e(),f=E(c),y=A9e(),_=E(y);function E(P){return P&&P.__esModule?P:{default:P}}id.hover=a.default,id.handleHover=a.default,id.handleActive=f.default,id.loop=_.default;var I=id.ReactCSS=function(K){for(var z=arguments.length,Q=Array(z>1?z-1:0),V=1;V<z;V++)Q[V-1]=arguments[V];var $=(0,e.default)(Q),Z=(0,i.default)(K,$);return(0,o.default)(Z)};return id.default=I,id}var Tk,n$;function mse(){if(n$)return Tk;n$=1;var n=kK(),e=w5();function t(i,r,o){(o!==void 0&&!e(i[r],o)||o===void 0&&!(r in i))&&n(i,r,o)}return Tk=t,Tk}var kk,i$;function h9e(){if(i$)return kk;i$=1;var n=j2(),e=M0();function t(i){return e(i)&&n(i)}return kk=t,kk}var Dk,r$;function gse(){if(r$)return Dk;r$=1;function n(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}return Dk=n,Dk}var Rk,o$;function d9e(){if(o$)return Rk;o$=1;var n=S5(),e=E5();function t(i){return n(i,e(i))}return Rk=t,Rk}var Pk,s$;function f9e(){if(s$)return Pk;s$=1;var n=mse(),e=Ase(),t=fse(),i=hse(),r=pse(),o=yK(),s=bf(),a=h9e(),c=FB(),f=wK(),y=Sp(),_=Yoe(),E=xK(),I=gse(),P=d9e();function K(z,Q,V,$,Z,ee,X){var W=I(z,V),se=I(Q,V),ue=X.get(se);if(ue){n(z,V,ue);return}var ve=ee?ee(W,se,V+"",z,Q,X):void 0,ye=ve===void 0;if(ye){var Ee=s(se),_e=!Ee&&c(se),Be=!Ee&&!_e&&E(se);ve=se,Ee||_e||Be?s(W)?ve=W:a(W)?ve=i(W):_e?(ye=!1,ve=e(se,!0)):Be?(ye=!1,ve=t(se,!0)):ve=[]:_(se)||o(se)?(ve=W,o(W)?ve=P(W):(!y(W)||f(W))&&(ve=r(se))):ye=!1}ye&&(X.set(se,ve),Z(ve,se,$,ee,X),X.delete(se)),n(z,V,ve)}return Pk=K,Pk}var Lk,a$;function p9e(){if(a$)return Lk;a$=1;var n=QB(),e=mse(),t=Noe(),i=f9e(),r=Sp(),o=E5(),s=gse();function a(c,f,y,_,E){c!==f&&t(f,function(I,P){if(E||(E=new n),r(I))i(c,f,P,y,a,_,E);else{var K=_?_(s(c,P),I,P+"",c,f,E):void 0;K===void 0&&(K=I),e(c,P,K)}},o)}return Lk=a,Lk}var Uk,l$;function m9e(){if(l$)return Uk;l$=1;function n(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}return Uk=n,Uk}var Kk,u$;function g9e(){if(u$)return Kk;u$=1;var n=m9e(),e=Math.max;function t(i,r,o){return r=e(r===void 0?i.length-1:r,0),function(){for(var s=arguments,a=-1,c=e(s.length-r,0),f=Array(c);++a<c;)f[a]=s[r+a];a=-1;for(var y=Array(r+1);++a<r;)y[a]=s[a];return y[r]=o(f),n(i,this,y)}}return Kk=t,Kk}var Fk,c$;function y9e(){if(c$)return Fk;c$=1;function n(e){return function(){return e}}return Fk=n,Fk}var zk,A$;function v9e(){if(A$)return zk;A$=1;var n=y9e(),e=use(),t=zB(),i=e?function(r,o){return e(r,"toString",{configurable:!0,enumerable:!1,value:n(o),writable:!0})}:t;return zk=i,zk}var jk,h$;function b9e(){if(h$)return jk;h$=1;var n=800,e=16,t=Date.now;function i(r){var o=0,s=0;return function(){var a=t(),c=e-(a-s);if(s=a,c>0){if(++o>=n)return arguments[0]}else o=0;return r.apply(void 0,arguments)}}return jk=i,jk}var Nk,d$;function C9e(){if(d$)return Nk;d$=1;var n=v9e(),e=b9e(),t=e(n);return Nk=t,Nk}var Gk,f$;function _9e(){if(f$)return Gk;f$=1;var n=zB(),e=g9e(),t=C9e();function i(r,o){return t(e(r,o,n),r+"")}return Gk=i,Gk}var Wk,p$;function x9e(){if(p$)return Wk;p$=1;var n=w5(),e=j2(),t=vK(),i=Sp();function r(o,s,a){if(!i(a))return!1;var c=typeof s;return(c=="number"?e(a)&&t(s,a.length):c=="string"&&s in a)?n(a[s],o):!1}return Wk=r,Wk}var Qk,m$;function M9e(){if(m$)return Qk;m$=1;var n=_9e(),e=x9e();function t(i){return n(function(r,o){var s=-1,a=o.length,c=a>1?o[a-1]:void 0,f=a>2?o[2]:void 0;for(c=i.length>3&&typeof c=="function"?(a--,c):void 0,f&&e(o[0],o[1],f)&&(c=a<3?void 0:c,a=1),r=Object(r);++s<a;){var y=o[s];y&&i(r,y,s,c)}return r})}return Qk=t,Qk}var qk,g$;function yse(){if(g$)return qk;g$=1;var n=p9e(),e=M9e(),t=e(function(i,r,o){n(i,r,o)});return qk=t,qk}var Yk={},Y_={},Gw={},y$;function w9e(){return y$||(y$=1,Object.defineProperty(Gw,"__esModule",{value:!0}),Gw.calculateChange=function(e,t,i,r,o){var s=o.clientWidth,a=o.clientHeight,c=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,f=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,y=c-(o.getBoundingClientRect().left+window.pageXOffset),_=f-(o.getBoundingClientRect().top+window.pageYOffset);if(i==="vertical"){var E=void 0;if(_<0?E=0:_>a?E=1:E=Math.round(_*100/a)/100,t.a!==E)return{h:t.h,s:t.s,l:t.l,a:E,source:"rgb"}}else{var I=void 0;if(y<0?I=0:y>s?I=1:I=Math.round(y*100/s)/100,r!==I)return{h:t.h,s:t.s,l:t.l,a:I,source:"rgb"}}return null}),Gw}var V_={},_3={},v$;function S9e(){if(v$)return _3;v$=1,Object.defineProperty(_3,"__esModule",{value:!0});var n={},e=_3.render=function(i,r,o,s){if(typeof document>"u"&&!s)return null;var a=s?new s:document.createElement("canvas");a.width=o*2,a.height=o*2;var c=a.getContext("2d");return c?(c.fillStyle=i,c.fillRect(0,0,a.width,a.height),c.fillStyle=r,c.fillRect(0,0,o,o),c.translate(o,o),c.fillRect(0,0,o,o),a.toDataURL()):null};return _3.get=function(i,r,o,s){var a=i+"-"+r+"-"+o+(s?"-server":"");if(n[a])return n[a];var c=e(i,r,o,s);return n[a]=c,c},_3}var b$;function RK(){if(b$)return V_;b$=1,Object.defineProperty(V_,"__esModule",{value:!0}),V_.Checkboard=void 0;var n=Object.assign||function(y){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var I in E)Object.prototype.hasOwnProperty.call(E,I)&&(y[I]=E[I])}return y},e=pa(),t=c(e),i=$m(),r=c(i),o=S9e(),s=a(o);function a(y){if(y&&y.__esModule)return y;var _={};if(y!=null)for(var E in y)Object.prototype.hasOwnProperty.call(y,E)&&(_[E]=y[E]);return _.default=y,_}function c(y){return y&&y.__esModule?y:{default:y}}var f=V_.Checkboard=function(_){var E=_.white,I=_.grey,P=_.size,K=_.renderers,z=_.borderRadius,Q=_.boxShadow,V=_.children,$=(0,r.default)({default:{grid:{borderRadius:z,boxShadow:Q,absolute:"0px 0px 0px 0px",background:"url("+s.get(E,I,P,K.canvas)+") center left"}}});return(0,e.isValidElement)(V)?t.default.cloneElement(V,n({},V.props,{style:n({},V.props.style,$.grid)})):t.default.createElement("div",{style:$.grid})};return f.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},V_.default=f,V_}var C$;function E9e(){if(C$)return Y_;C$=1,Object.defineProperty(Y_,"__esModule",{value:!0}),Y_.Alpha=void 0;var n=Object.assign||function(z){for(var Q=1;Q<arguments.length;Q++){var V=arguments[Q];for(var $ in V)Object.prototype.hasOwnProperty.call(V,$)&&(z[$]=V[$])}return z},e=(function(){function z(Q,V){for(var $=0;$<V.length;$++){var Z=V[$];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(Q,Z.key,Z)}}return function(Q,V,$){return V&&z(Q.prototype,V),$&&z(Q,$),Q}})(),t=pa(),i=_(t),r=$m(),o=_(r),s=w9e(),a=y(s),c=RK(),f=_(c);function y(z){if(z&&z.__esModule)return z;var Q={};if(z!=null)for(var V in z)Object.prototype.hasOwnProperty.call(z,V)&&(Q[V]=z[V]);return Q.default=z,Q}function _(z){return z&&z.__esModule?z:{default:z}}function E(z,Q){if(!(z instanceof Q))throw new TypeError("Cannot call a class as a function")}function I(z,Q){if(!z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Q&&(typeof Q=="object"||typeof Q=="function")?Q:z}function P(z,Q){if(typeof Q!="function"&&Q!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Q);z.prototype=Object.create(Q&&Q.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}),Q&&(Object.setPrototypeOf?Object.setPrototypeOf(z,Q):z.__proto__=Q)}var K=Y_.Alpha=(function(z){P(Q,z);function Q(){var V,$,Z,ee;E(this,Q);for(var X=arguments.length,W=Array(X),se=0;se<X;se++)W[se]=arguments[se];return ee=($=(Z=I(this,(V=Q.__proto__||Object.getPrototypeOf(Q)).call.apply(V,[this].concat(W))),Z),Z.handleChange=function(ue){var ve=a.calculateChange(ue,Z.props.hsl,Z.props.direction,Z.props.a,Z.container);ve&&typeof Z.props.onChange=="function"&&Z.props.onChange(ve,ue)},Z.handleMouseDown=function(ue){Z.handleChange(ue),window.addEventListener("mousemove",Z.handleChange),window.addEventListener("mouseup",Z.handleMouseUp)},Z.handleMouseUp=function(){Z.unbindEventListeners()},Z.unbindEventListeners=function(){window.removeEventListener("mousemove",Z.handleChange),window.removeEventListener("mouseup",Z.handleMouseUp)},$),I(Z,ee)}return e(Q,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var $=this,Z=this.props.rgb,ee=(0,o.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+Z.r+","+Z.g+","+Z.b+`, 0) 0%,
           rgba(`+Z.r+","+Z.g+","+Z.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:Z.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+Z.r+","+Z.g+","+Z.b+`, 0) 0%,
           rgba(`+Z.r+","+Z.g+","+Z.b+", 1) 100%)"},pointer:{left:0,top:Z.a*100+"%"}},overwrite:n({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return i.default.createElement("div",{style:ee.alpha},i.default.createElement("div",{style:ee.checkboard},i.default.createElement(f.default,{renderers:this.props.renderers})),i.default.createElement("div",{style:ee.gradient}),i.default.createElement("div",{style:ee.container,ref:function(W){return $.container=W},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},i.default.createElement("div",{style:ee.pointer},this.props.pointer?i.default.createElement(this.props.pointer,this.props):i.default.createElement("div",{style:ee.slider}))))}}]),Q})(t.PureComponent||t.Component);return Y_.default=K,Y_}var $_={},_$;function B9e(){if(_$)return $_;_$=1,Object.defineProperty($_,"__esModule",{value:!0}),$_.EditableInput=void 0;var n=(function(){function V($,Z){for(var ee=0;ee<Z.length;ee++){var X=Z[ee];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty($,X.key,X)}}return function($,Z,ee){return Z&&V($.prototype,Z),ee&&V($,ee),$}})(),e=pa(),t=o(e),i=$m(),r=o(i);function o(V){return V&&V.__esModule?V:{default:V}}function s(V,$,Z){return $ in V?Object.defineProperty(V,$,{value:Z,enumerable:!0,configurable:!0,writable:!0}):V[$]=Z,V}function a(V,$){if(!(V instanceof $))throw new TypeError("Cannot call a class as a function")}function c(V,$){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $&&(typeof $=="object"||typeof $=="function")?$:V}function f(V,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $);V.prototype=Object.create($&&$.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),$&&(Object.setPrototypeOf?Object.setPrototypeOf(V,$):V.__proto__=$)}var y=1,_=38,E=40,I=[_,E],P=function($){return I.indexOf($)>-1},K=function($){return Number(String($).replace(/%/g,""))},z=1,Q=$_.EditableInput=(function(V){f($,V);function $(Z){a(this,$);var ee=c(this,($.__proto__||Object.getPrototypeOf($)).call(this));return ee.handleBlur=function(){ee.state.blurValue&&ee.setState({value:ee.state.blurValue,blurValue:null})},ee.handleChange=function(X){ee.setUpdatedValue(X.target.value,X)},ee.handleKeyDown=function(X){var W=K(X.target.value);if(!isNaN(W)&&P(X.keyCode)){var se=ee.getArrowOffset(),ue=X.keyCode===_?W+se:W-se;ee.setUpdatedValue(ue,X)}},ee.handleDrag=function(X){if(ee.props.dragLabel){var W=Math.round(ee.props.value+X.movementX);W>=0&&W<=ee.props.dragMax&&ee.props.onChange&&ee.props.onChange(ee.getValueObjectWithLabel(W),X)}},ee.handleMouseDown=function(X){ee.props.dragLabel&&(X.preventDefault(),ee.handleDrag(X),window.addEventListener("mousemove",ee.handleDrag),window.addEventListener("mouseup",ee.handleMouseUp))},ee.handleMouseUp=function(){ee.unbindEventListeners()},ee.unbindEventListeners=function(){window.removeEventListener("mousemove",ee.handleDrag),window.removeEventListener("mouseup",ee.handleMouseUp)},ee.state={value:String(Z.value).toUpperCase(),blurValue:String(Z.value).toUpperCase()},ee.inputId="rc-editable-input-"+z++,ee}return n($,[{key:"componentDidUpdate",value:function(ee,X){this.props.value!==this.state.value&&(ee.value!==this.props.value||X.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(ee){return s({},this.props.label,ee)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||y}},{key:"setUpdatedValue",value:function(ee,X){var W=this.props.label?this.getValueObjectWithLabel(ee):ee;this.props.onChange&&this.props.onChange(W,X),this.setState({value:ee})}},{key:"render",value:function(){var ee=this,X=(0,r.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return t.default.createElement("div",{style:X.wrap},t.default.createElement("input",{id:this.inputId,style:X.input,ref:function(se){return ee.input=se},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?t.default.createElement("label",{htmlFor:this.inputId,style:X.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),$})(e.PureComponent||e.Component);return $_.default=Q,$_}var H_={},Ww={},x$;function O9e(){return x$||(x$=1,Object.defineProperty(Ww,"__esModule",{value:!0}),Ww.calculateChange=function(e,t,i,r){var o=r.clientWidth,s=r.clientHeight,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,c=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,f=a-(r.getBoundingClientRect().left+window.pageXOffset),y=c-(r.getBoundingClientRect().top+window.pageYOffset);if(t==="vertical"){var _=void 0;if(y<0)_=359;else if(y>s)_=0;else{var E=-(y*100/s)+100;_=360*E/100}if(i.h!==_)return{h:_,s:i.s,l:i.l,a:i.a,source:"hsl"}}else{var I=void 0;if(f<0)I=0;else if(f>o)I=359;else{var P=f*100/o;I=360*P/100}if(i.h!==I)return{h:I,s:i.s,l:i.l,a:i.a,source:"hsl"}}return null}),Ww}var M$;function I9e(){if(M$)return H_;M$=1,Object.defineProperty(H_,"__esModule",{value:!0}),H_.Hue=void 0;var n=(function(){function I(P,K){for(var z=0;z<K.length;z++){var Q=K[z];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(P,Q.key,Q)}}return function(P,K,z){return K&&I(P.prototype,K),z&&I(P,z),P}})(),e=pa(),t=c(e),i=$m(),r=c(i),o=O9e(),s=a(o);function a(I){if(I&&I.__esModule)return I;var P={};if(I!=null)for(var K in I)Object.prototype.hasOwnProperty.call(I,K)&&(P[K]=I[K]);return P.default=I,P}function c(I){return I&&I.__esModule?I:{default:I}}function f(I,P){if(!(I instanceof P))throw new TypeError("Cannot call a class as a function")}function y(I,P){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:I}function _(I,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);I.prototype=Object.create(P&&P.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(I,P):I.__proto__=P)}var E=H_.Hue=(function(I){_(P,I);function P(){var K,z,Q,V;f(this,P);for(var $=arguments.length,Z=Array($),ee=0;ee<$;ee++)Z[ee]=arguments[ee];return V=(z=(Q=y(this,(K=P.__proto__||Object.getPrototypeOf(P)).call.apply(K,[this].concat(Z))),Q),Q.handleChange=function(X){var W=s.calculateChange(X,Q.props.direction,Q.props.hsl,Q.container);W&&typeof Q.props.onChange=="function"&&Q.props.onChange(W,X)},Q.handleMouseDown=function(X){Q.handleChange(X),window.addEventListener("mousemove",Q.handleChange),window.addEventListener("mouseup",Q.handleMouseUp)},Q.handleMouseUp=function(){Q.unbindEventListeners()},z),y(Q,V)}return n(P,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var z=this,Q=this.props.direction,V=Q===void 0?"horizontal":Q,$=(0,r.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:V==="vertical"});return t.default.createElement("div",{style:$.hue},t.default.createElement("div",{className:"hue-"+V,style:$.container,ref:function(ee){return z.container=ee},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),t.default.createElement("div",{style:$.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:$.slider}))))}}]),P})(e.PureComponent||e.Component);return H_.default=E,H_}var Z_={},w$;function T9e(){if(w$)return Z_;w$=1,Object.defineProperty(Z_,"__esModule",{value:!0}),Z_.Raised=void 0;var n=pa(),e=c(n),t=W1(),i=c(t),r=$m(),o=c(r),s=yse(),a=c(s);function c(y){return y&&y.__esModule?y:{default:y}}var f=Z_.Raised=function(_){var E=_.zDepth,I=_.radius,P=_.background,K=_.children,z=_.styles,Q=z===void 0?{}:z,V=(0,o.default)((0,a.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+E+"px "+E*4+"px rgba(0,0,0,.24)",borderRadius:I,background:P}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},Q),{"zDepth-1":E===1});return e.default.createElement("div",{style:V.wrap},e.default.createElement("div",{style:V.bg}),e.default.createElement("div",{style:V.content},K))};return f.propTypes={background:i.default.string,zDepth:i.default.oneOf([0,1,2,3,4,5]),radius:i.default.number,styles:i.default.object},f.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},Z_.default=f,Z_}var X_={},Vk,S$;function k9e(){if(S$)return Vk;S$=1;var n=Vm(),e=function(){return n.Date.now()};return Vk=e,Vk}var $k,E$;function D9e(){if(E$)return $k;E$=1;var n=/\s/;function e(t){for(var i=t.length;i--&&n.test(t.charAt(i)););return i}return $k=e,$k}var Hk,B$;function R9e(){if(B$)return Hk;B$=1;var n=D9e(),e=/^\s+/;function t(i){return i&&i.slice(0,n(i)+1).replace(e,"")}return Hk=t,Hk}var Zk,O$;function P9e(){if(O$)return Zk;O$=1;var n=R9e(),e=Sp(),t=YB(),i=NaN,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt;function c(f){if(typeof f=="number")return f;if(t(f))return i;if(e(f)){var y=typeof f.valueOf=="function"?f.valueOf():f;f=e(y)?y+"":y}if(typeof f!="string")return f===0?f:+f;f=n(f);var _=o.test(f);return _||s.test(f)?a(f.slice(2),_?2:8):r.test(f)?i:+f}return Zk=c,Zk}var Xk,I$;function vse(){if(I$)return Xk;I$=1;var n=Sp(),e=k9e(),t=P9e(),i="Expected a function",r=Math.max,o=Math.min;function s(a,c,f){var y,_,E,I,P,K,z=0,Q=!1,V=!1,$=!0;if(typeof a!="function")throw new TypeError(i);c=t(c)||0,n(f)&&(Q=!!f.leading,V="maxWait"in f,E=V?r(t(f.maxWait)||0,c):E,$="trailing"in f?!!f.trailing:$);function Z(_e){var Be=y,Fe=_;return y=_=void 0,z=_e,I=a.apply(Fe,Be),I}function ee(_e){return z=_e,P=setTimeout(se,c),Q?Z(_e):I}function X(_e){var Be=_e-K,Fe=_e-z,Se=c-Be;return V?o(Se,E-Fe):Se}function W(_e){var Be=_e-K,Fe=_e-z;return K===void 0||Be>=c||Be<0||V&&Fe>=E}function se(){var _e=e();if(W(_e))return ue(_e);P=setTimeout(se,X(_e))}function ue(_e){return P=void 0,$&&y?Z(_e):(y=_=void 0,I)}function ve(){P!==void 0&&clearTimeout(P),z=0,y=K=_=P=void 0}function ye(){return P===void 0?I:ue(e())}function Ee(){var _e=e(),Be=W(_e);if(y=arguments,_=this,K=_e,Be){if(P===void 0)return ee(K);if(V)return clearTimeout(P),P=setTimeout(se,c),Z(K)}return P===void 0&&(P=setTimeout(se,c)),I}return Ee.cancel=ve,Ee.flush=ye,Ee}return Xk=s,Xk}var Jk,T$;function L9e(){if(T$)return Jk;T$=1;var n=vse(),e=Sp(),t="Expected a function";function i(r,o,s){var a=!0,c=!0;if(typeof r!="function")throw new TypeError(t);return e(s)&&(a="leading"in s?!!s.leading:a,c="trailing"in s?!!s.trailing:c),n(r,o,{leading:a,maxWait:o,trailing:c})}return Jk=i,Jk}var Qw={},k$;function U9e(){return k$||(k$=1,Object.defineProperty(Qw,"__esModule",{value:!0}),Qw.calculateChange=function(e,t,i){var r=i.getBoundingClientRect(),o=r.width,s=r.height,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,c=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,f=a-(i.getBoundingClientRect().left+window.pageXOffset),y=c-(i.getBoundingClientRect().top+window.pageYOffset);f<0?f=0:f>o&&(f=o),y<0?y=0:y>s&&(y=s);var _=f/o,E=1-y/s;return{h:t.h,s:_,v:E,a:t.a,source:"hsv"}}),Qw}var D$;function K9e(){if(D$)return X_;D$=1,Object.defineProperty(X_,"__esModule",{value:!0}),X_.Saturation=void 0;var n=(function(){function K(z,Q){for(var V=0;V<Q.length;V++){var $=Q[V];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(z,$.key,$)}}return function(z,Q,V){return Q&&K(z.prototype,Q),V&&K(z,V),z}})(),e=pa(),t=y(e),i=$m(),r=y(i),o=L9e(),s=y(o),a=U9e(),c=f(a);function f(K){if(K&&K.__esModule)return K;var z={};if(K!=null)for(var Q in K)Object.prototype.hasOwnProperty.call(K,Q)&&(z[Q]=K[Q]);return z.default=K,z}function y(K){return K&&K.__esModule?K:{default:K}}function _(K,z){if(!(K instanceof z))throw new TypeError("Cannot call a class as a function")}function E(K,z){if(!K)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:K}function I(K,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);K.prototype=Object.create(z&&z.prototype,{constructor:{value:K,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(K,z):K.__proto__=z)}var P=X_.Saturation=(function(K){I(z,K);function z(Q){_(this,z);var V=E(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,Q));return V.handleChange=function($){typeof V.props.onChange=="function"&&V.throttle(V.props.onChange,c.calculateChange($,V.props.hsl,V.container),$)},V.handleMouseDown=function($){V.handleChange($);var Z=V.getContainerRenderWindow();Z.addEventListener("mousemove",V.handleChange),Z.addEventListener("mouseup",V.handleMouseUp)},V.handleMouseUp=function(){V.unbindEventListeners()},V.throttle=(0,s.default)(function($,Z,ee){$(Z,ee)},50),V}return n(z,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var V=this.container,$=window;!$.document.contains(V)&&$.parent!==$;)$=$.parent;return $}},{key:"unbindEventListeners",value:function(){var V=this.getContainerRenderWindow();V.removeEventListener("mousemove",this.handleChange),V.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var V=this,$=this.props.style||{},Z=$.color,ee=$.white,X=$.black,W=$.pointer,se=$.circle,ue=(0,r.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:Z,white:ee,black:X,pointer:W,circle:se}},{custom:!!this.props.style});return t.default.createElement("div",{style:ue.color,ref:function(ye){return V.container=ye},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),t.default.createElement("div",{style:ue.white,className:"saturation-white"},t.default.createElement("div",{style:ue.black,className:"saturation-black"}),t.default.createElement("div",{style:ue.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:ue.circle}))))}}]),z})(e.PureComponent||e.Component);return X_.default=P,X_}var J_={},gh={},e9,R$;function F9e(){if(R$)return e9;R$=1;var n=lse(),e=ase(),t=qoe(),i=bf();function r(o,s){var a=i(o)?n:e;return a(o,t(s))}return e9=r,e9}var t9,P$;function z9e(){return P$||(P$=1,t9=F9e()),t9}var wS={exports:{}},j9e=wS.exports,L$;function N9e(){return L$||(L$=1,(function(n,e){(function(t,i){n.exports=i()})(j9e,(function(){function t(ke){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Oe){return typeof Oe}:function(Oe){return Oe&&typeof Symbol=="function"&&Oe.constructor===Symbol&&Oe!==Symbol.prototype?"symbol":typeof Oe},t(ke)}var i=/^\s+/,r=/\s+$/;function o(ke,Oe){if(ke=ke||"",Oe=Oe||{},ke instanceof o)return ke;if(!(this instanceof o))return new o(ke,Oe);var we=s(ke);this._originalInput=ke,this._r=we.r,this._g=we.g,this._b=we.b,this._a=we.a,this._roundA=Math.round(100*this._a)/100,this._format=Oe.format||we.format,this._gradientType=Oe.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=we.ok}o.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Oe=this.toRgb();return(Oe.r*299+Oe.g*587+Oe.b*114)/1e3},getLuminance:function(){var Oe=this.toRgb(),we,Ye,ft,dt,gt,Lt;return we=Oe.r/255,Ye=Oe.g/255,ft=Oe.b/255,we<=.03928?dt=we/12.92:dt=Math.pow((we+.055)/1.055,2.4),Ye<=.03928?gt=Ye/12.92:gt=Math.pow((Ye+.055)/1.055,2.4),ft<=.03928?Lt=ft/12.92:Lt=Math.pow((ft+.055)/1.055,2.4),.2126*dt+.7152*gt+.0722*Lt},setAlpha:function(Oe){return this._a=Be(Oe),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var Oe=y(this._r,this._g,this._b);return{h:Oe.h*360,s:Oe.s,v:Oe.v,a:this._a}},toHsvString:function(){var Oe=y(this._r,this._g,this._b),we=Math.round(Oe.h*360),Ye=Math.round(Oe.s*100),ft=Math.round(Oe.v*100);return this._a==1?"hsv("+we+", "+Ye+"%, "+ft+"%)":"hsva("+we+", "+Ye+"%, "+ft+"%, "+this._roundA+")"},toHsl:function(){var Oe=c(this._r,this._g,this._b);return{h:Oe.h*360,s:Oe.s,l:Oe.l,a:this._a}},toHslString:function(){var Oe=c(this._r,this._g,this._b),we=Math.round(Oe.h*360),Ye=Math.round(Oe.s*100),ft=Math.round(Oe.l*100);return this._a==1?"hsl("+we+", "+Ye+"%, "+ft+"%)":"hsla("+we+", "+Ye+"%, "+ft+"%, "+this._roundA+")"},toHex:function(Oe){return E(this._r,this._g,this._b,Oe)},toHexString:function(Oe){return"#"+this.toHex(Oe)},toHex8:function(Oe){return I(this._r,this._g,this._b,this._a,Oe)},toHex8String:function(Oe){return"#"+this.toHex8(Oe)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Fe(this._r,255)*100)+"%",g:Math.round(Fe(this._g,255)*100)+"%",b:Math.round(Fe(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Fe(this._r,255)*100)+"%, "+Math.round(Fe(this._g,255)*100)+"%, "+Math.round(Fe(this._b,255)*100)+"%)":"rgba("+Math.round(Fe(this._r,255)*100)+"%, "+Math.round(Fe(this._g,255)*100)+"%, "+Math.round(Fe(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Ee[E(this._r,this._g,this._b,!0)]||!1},toFilter:function(Oe){var we="#"+P(this._r,this._g,this._b,this._a),Ye=we,ft=this._gradientType?"GradientType = 1, ":"";if(Oe){var dt=o(Oe);Ye="#"+P(dt._r,dt._g,dt._b,dt._a)}return"progid:DXImageTransform.Microsoft.gradient("+ft+"startColorstr="+we+",endColorstr="+Ye+")"},toString:function(Oe){var we=!!Oe;Oe=Oe||this._format;var Ye=!1,ft=this._a<1&&this._a>=0,dt=!we&&ft&&(Oe==="hex"||Oe==="hex6"||Oe==="hex3"||Oe==="hex4"||Oe==="hex8"||Oe==="name");return dt?Oe==="name"&&this._a===0?this.toName():this.toRgbString():(Oe==="rgb"&&(Ye=this.toRgbString()),Oe==="prgb"&&(Ye=this.toPercentageRgbString()),(Oe==="hex"||Oe==="hex6")&&(Ye=this.toHexString()),Oe==="hex3"&&(Ye=this.toHexString(!0)),Oe==="hex4"&&(Ye=this.toHex8String(!0)),Oe==="hex8"&&(Ye=this.toHex8String()),Oe==="name"&&(Ye=this.toName()),Oe==="hsl"&&(Ye=this.toHslString()),Oe==="hsv"&&(Ye=this.toHsvString()),Ye||this.toHexString())},clone:function(){return o(this.toString())},_applyModification:function(Oe,we){var Ye=Oe.apply(null,[this].concat([].slice.call(we)));return this._r=Ye._r,this._g=Ye._g,this._b=Ye._b,this.setAlpha(Ye._a),this},lighten:function(){return this._applyModification(V,arguments)},brighten:function(){return this._applyModification($,arguments)},darken:function(){return this._applyModification(Z,arguments)},desaturate:function(){return this._applyModification(K,arguments)},saturate:function(){return this._applyModification(z,arguments)},greyscale:function(){return this._applyModification(Q,arguments)},spin:function(){return this._applyModification(ee,arguments)},_applyCombination:function(Oe,we){return Oe.apply(null,[this].concat([].slice.call(we)))},analogous:function(){return this._applyCombination(ue,arguments)},complement:function(){return this._applyCombination(X,arguments)},monochromatic:function(){return this._applyCombination(ve,arguments)},splitcomplement:function(){return this._applyCombination(se,arguments)},triad:function(){return this._applyCombination(W,[3])},tetrad:function(){return this._applyCombination(W,[4])}},o.fromRatio=function(ke,Oe){if(t(ke)=="object"){var we={};for(var Ye in ke)ke.hasOwnProperty(Ye)&&(Ye==="a"?we[Ye]=ke[Ye]:we[Ye]=Ie(ke[Ye]));ke=we}return o(ke,Oe)};function s(ke){var Oe={r:0,g:0,b:0},we=1,Ye=null,ft=null,dt=null,gt=!1,Lt=!1;return typeof ke=="string"&&(ke=Et(ke)),t(ke)=="object"&&(st(ke.r)&&st(ke.g)&&st(ke.b)?(Oe=a(ke.r,ke.g,ke.b),gt=!0,Lt=String(ke.r).substr(-1)==="%"?"prgb":"rgb"):st(ke.h)&&st(ke.s)&&st(ke.v)?(Ye=Ie(ke.s),ft=Ie(ke.v),Oe=_(ke.h,Ye,ft),gt=!0,Lt="hsv"):st(ke.h)&&st(ke.s)&&st(ke.l)&&(Ye=Ie(ke.s),dt=Ie(ke.l),Oe=f(ke.h,Ye,dt),gt=!0,Lt="hsl"),ke.hasOwnProperty("a")&&(we=ke.a)),we=Be(we),{ok:gt,format:ke.format||Lt,r:Math.min(255,Math.max(Oe.r,0)),g:Math.min(255,Math.max(Oe.g,0)),b:Math.min(255,Math.max(Oe.b,0)),a:we}}function a(ke,Oe,we){return{r:Fe(ke,255)*255,g:Fe(Oe,255)*255,b:Fe(we,255)*255}}function c(ke,Oe,we){ke=Fe(ke,255),Oe=Fe(Oe,255),we=Fe(we,255);var Ye=Math.max(ke,Oe,we),ft=Math.min(ke,Oe,we),dt,gt,Lt=(Ye+ft)/2;if(Ye==ft)dt=gt=0;else{var Tt=Ye-ft;switch(gt=Lt>.5?Tt/(2-Ye-ft):Tt/(Ye+ft),Ye){case ke:dt=(Oe-we)/Tt+(Oe<we?6:0);break;case Oe:dt=(we-ke)/Tt+2;break;case we:dt=(ke-Oe)/Tt+4;break}dt/=6}return{h:dt,s:gt,l:Lt}}function f(ke,Oe,we){var Ye,ft,dt;ke=Fe(ke,360),Oe=Fe(Oe,100),we=Fe(we,100);function gt(Zt,Fn,Ln){return Ln<0&&(Ln+=1),Ln>1&&(Ln-=1),Ln<1/6?Zt+(Fn-Zt)*6*Ln:Ln<1/2?Fn:Ln<2/3?Zt+(Fn-Zt)*(2/3-Ln)*6:Zt}if(Oe===0)Ye=ft=dt=we;else{var Lt=we<.5?we*(1+Oe):we+Oe-we*Oe,Tt=2*we-Lt;Ye=gt(Tt,Lt,ke+1/3),ft=gt(Tt,Lt,ke),dt=gt(Tt,Lt,ke-1/3)}return{r:Ye*255,g:ft*255,b:dt*255}}function y(ke,Oe,we){ke=Fe(ke,255),Oe=Fe(Oe,255),we=Fe(we,255);var Ye=Math.max(ke,Oe,we),ft=Math.min(ke,Oe,we),dt,gt,Lt=Ye,Tt=Ye-ft;if(gt=Ye===0?0:Tt/Ye,Ye==ft)dt=0;else{switch(Ye){case ke:dt=(Oe-we)/Tt+(Oe<we?6:0);break;case Oe:dt=(we-ke)/Tt+2;break;case we:dt=(ke-Oe)/Tt+4;break}dt/=6}return{h:dt,s:gt,v:Lt}}function _(ke,Oe,we){ke=Fe(ke,360)*6,Oe=Fe(Oe,100),we=Fe(we,100);var Ye=Math.floor(ke),ft=ke-Ye,dt=we*(1-Oe),gt=we*(1-ft*Oe),Lt=we*(1-(1-ft)*Oe),Tt=Ye%6,Zt=[we,gt,dt,dt,Lt,we][Tt],Fn=[Lt,we,we,gt,dt,dt][Tt],Ln=[dt,dt,Lt,we,we,gt][Tt];return{r:Zt*255,g:Fn*255,b:Ln*255}}function E(ke,Oe,we,Ye){var ft=[De(Math.round(ke).toString(16)),De(Math.round(Oe).toString(16)),De(Math.round(we).toString(16))];return Ye&&ft[0].charAt(0)==ft[0].charAt(1)&&ft[1].charAt(0)==ft[1].charAt(1)&&ft[2].charAt(0)==ft[2].charAt(1)?ft[0].charAt(0)+ft[1].charAt(0)+ft[2].charAt(0):ft.join("")}function I(ke,Oe,we,Ye,ft){var dt=[De(Math.round(ke).toString(16)),De(Math.round(Oe).toString(16)),De(Math.round(we).toString(16)),De(ze(Ye))];return ft&&dt[0].charAt(0)==dt[0].charAt(1)&&dt[1].charAt(0)==dt[1].charAt(1)&&dt[2].charAt(0)==dt[2].charAt(1)&&dt[3].charAt(0)==dt[3].charAt(1)?dt[0].charAt(0)+dt[1].charAt(0)+dt[2].charAt(0)+dt[3].charAt(0):dt.join("")}function P(ke,Oe,we,Ye){var ft=[De(ze(Ye)),De(Math.round(ke).toString(16)),De(Math.round(Oe).toString(16)),De(Math.round(we).toString(16))];return ft.join("")}o.equals=function(ke,Oe){return!ke||!Oe?!1:o(ke).toRgbString()==o(Oe).toRgbString()},o.random=function(){return o.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function K(ke,Oe){Oe=Oe===0?0:Oe||10;var we=o(ke).toHsl();return we.s-=Oe/100,we.s=Se(we.s),o(we)}function z(ke,Oe){Oe=Oe===0?0:Oe||10;var we=o(ke).toHsl();return we.s+=Oe/100,we.s=Se(we.s),o(we)}function Q(ke){return o(ke).desaturate(100)}function V(ke,Oe){Oe=Oe===0?0:Oe||10;var we=o(ke).toHsl();return we.l+=Oe/100,we.l=Se(we.l),o(we)}function $(ke,Oe){Oe=Oe===0?0:Oe||10;var we=o(ke).toRgb();return we.r=Math.max(0,Math.min(255,we.r-Math.round(255*-(Oe/100)))),we.g=Math.max(0,Math.min(255,we.g-Math.round(255*-(Oe/100)))),we.b=Math.max(0,Math.min(255,we.b-Math.round(255*-(Oe/100)))),o(we)}function Z(ke,Oe){Oe=Oe===0?0:Oe||10;var we=o(ke).toHsl();return we.l-=Oe/100,we.l=Se(we.l),o(we)}function ee(ke,Oe){var we=o(ke).toHsl(),Ye=(we.h+Oe)%360;return we.h=Ye<0?360+Ye:Ye,o(we)}function X(ke){var Oe=o(ke).toHsl();return Oe.h=(Oe.h+180)%360,o(Oe)}function W(ke,Oe){if(isNaN(Oe)||Oe<=0)throw new Error("Argument to polyad must be a positive number");for(var we=o(ke).toHsl(),Ye=[o(ke)],ft=360/Oe,dt=1;dt<Oe;dt++)Ye.push(o({h:(we.h+dt*ft)%360,s:we.s,l:we.l}));return Ye}function se(ke){var Oe=o(ke).toHsl(),we=Oe.h;return[o(ke),o({h:(we+72)%360,s:Oe.s,l:Oe.l}),o({h:(we+216)%360,s:Oe.s,l:Oe.l})]}function ue(ke,Oe,we){Oe=Oe||6,we=we||30;var Ye=o(ke).toHsl(),ft=360/we,dt=[o(ke)];for(Ye.h=(Ye.h-(ft*Oe>>1)+720)%360;--Oe;)Ye.h=(Ye.h+ft)%360,dt.push(o(Ye));return dt}function ve(ke,Oe){Oe=Oe||6;for(var we=o(ke).toHsv(),Ye=we.h,ft=we.s,dt=we.v,gt=[],Lt=1/Oe;Oe--;)gt.push(o({h:Ye,s:ft,v:dt})),dt=(dt+Lt)%1;return gt}o.mix=function(ke,Oe,we){we=we===0?0:we||50;var Ye=o(ke).toRgb(),ft=o(Oe).toRgb(),dt=we/100,gt={r:(ft.r-Ye.r)*dt+Ye.r,g:(ft.g-Ye.g)*dt+Ye.g,b:(ft.b-Ye.b)*dt+Ye.b,a:(ft.a-Ye.a)*dt+Ye.a};return o(gt)},o.readability=function(ke,Oe){var we=o(ke),Ye=o(Oe);return(Math.max(we.getLuminance(),Ye.getLuminance())+.05)/(Math.min(we.getLuminance(),Ye.getLuminance())+.05)},o.isReadable=function(ke,Oe,we){var Ye=o.readability(ke,Oe),ft,dt;switch(dt=!1,ft=Pt(we),ft.level+ft.size){case"AAsmall":case"AAAlarge":dt=Ye>=4.5;break;case"AAlarge":dt=Ye>=3;break;case"AAAsmall":dt=Ye>=7;break}return dt},o.mostReadable=function(ke,Oe,we){var Ye=null,ft=0,dt,gt,Lt,Tt;we=we||{},gt=we.includeFallbackColors,Lt=we.level,Tt=we.size;for(var Zt=0;Zt<Oe.length;Zt++)dt=o.readability(ke,Oe[Zt]),dt>ft&&(ft=dt,Ye=o(Oe[Zt]));return o.isReadable(ke,Ye,{level:Lt,size:Tt})||!gt?Ye:(we.includeFallbackColors=!1,o.mostReadable(ke,["#fff","#000"],we))};var ye=o.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Ee=o.hexNames=_e(ye);function _e(ke){var Oe={};for(var we in ke)ke.hasOwnProperty(we)&&(Oe[ke[we]]=we);return Oe}function Be(ke){return ke=parseFloat(ke),(isNaN(ke)||ke<0||ke>1)&&(ke=1),ke}function Fe(ke,Oe){ut(ke)&&(ke="100%");var we=ht(ke);return ke=Math.min(Oe,Math.max(0,parseFloat(ke))),we&&(ke=parseInt(ke*Oe,10)/100),Math.abs(ke-Oe)<1e-6?1:ke%Oe/parseFloat(Oe)}function Se(ke){return Math.min(1,Math.max(0,ke))}function qe(ke){return parseInt(ke,16)}function ut(ke){return typeof ke=="string"&&ke.indexOf(".")!=-1&&parseFloat(ke)===1}function ht(ke){return typeof ke=="string"&&ke.indexOf("%")!=-1}function De(ke){return ke.length==1?"0"+ke:""+ke}function Ie(ke){return ke<=1&&(ke=ke*100+"%"),ke}function ze(ke){return Math.round(parseFloat(ke)*255).toString(16)}function Te(ke){return qe(ke)/255}var vt=(function(){var ke="[-\\+]?\\d+%?",Oe="[-\\+]?\\d*\\.\\d+%?",we="(?:"+Oe+")|(?:"+ke+")",Ye="[\\s|\\(]+("+we+")[,|\\s]+("+we+")[,|\\s]+("+we+")\\s*\\)?",ft="[\\s|\\(]+("+we+")[,|\\s]+("+we+")[,|\\s]+("+we+")[,|\\s]+("+we+")\\s*\\)?";return{CSS_UNIT:new RegExp(we),rgb:new RegExp("rgb"+Ye),rgba:new RegExp("rgba"+ft),hsl:new RegExp("hsl"+Ye),hsla:new RegExp("hsla"+ft),hsv:new RegExp("hsv"+Ye),hsva:new RegExp("hsva"+ft),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function st(ke){return!!vt.CSS_UNIT.exec(ke)}function Et(ke){ke=ke.replace(i,"").replace(r,"").toLowerCase();var Oe=!1;if(ye[ke])ke=ye[ke],Oe=!0;else if(ke=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var we;return(we=vt.rgb.exec(ke))?{r:we[1],g:we[2],b:we[3]}:(we=vt.rgba.exec(ke))?{r:we[1],g:we[2],b:we[3],a:we[4]}:(we=vt.hsl.exec(ke))?{h:we[1],s:we[2],l:we[3]}:(we=vt.hsla.exec(ke))?{h:we[1],s:we[2],l:we[3],a:we[4]}:(we=vt.hsv.exec(ke))?{h:we[1],s:we[2],v:we[3]}:(we=vt.hsva.exec(ke))?{h:we[1],s:we[2],v:we[3],a:we[4]}:(we=vt.hex8.exec(ke))?{r:qe(we[1]),g:qe(we[2]),b:qe(we[3]),a:Te(we[4]),format:Oe?"name":"hex8"}:(we=vt.hex6.exec(ke))?{r:qe(we[1]),g:qe(we[2]),b:qe(we[3]),format:Oe?"name":"hex"}:(we=vt.hex4.exec(ke))?{r:qe(we[1]+""+we[1]),g:qe(we[2]+""+we[2]),b:qe(we[3]+""+we[3]),a:Te(we[4]+""+we[4]),format:Oe?"name":"hex8"}:(we=vt.hex3.exec(ke))?{r:qe(we[1]+""+we[1]),g:qe(we[2]+""+we[2]),b:qe(we[3]+""+we[3]),format:Oe?"name":"hex"}:!1}function Pt(ke){var Oe,we;return ke=ke||{level:"AA",size:"small"},Oe=(ke.level||"AA").toUpperCase(),we=(ke.size||"small").toLowerCase(),Oe!=="AA"&&Oe!=="AAA"&&(Oe="AA"),we!=="small"&&we!=="large"&&(we="small"),{level:Oe,size:we}}return o}))})(wS)),wS.exports}var U$;function bse(){if(U$)return gh;U$=1,Object.defineProperty(gh,"__esModule",{value:!0}),gh.isvalidColorString=gh.red=gh.getContrastingColor=gh.isValidHex=gh.toState=gh.simpleCheckForValidColor=void 0;var n=z9e(),e=r(n),t=N9e(),i=r(t);function r(s){return s&&s.__esModule?s:{default:s}}gh.simpleCheckForValidColor=function(a){var c=["r","g","b","a","h","s","l","v"],f=0,y=0;return(0,e.default)(c,function(_){if(a[_]&&(f+=1,isNaN(a[_])||(y+=1),_==="s"||_==="l")){var E=/^\d+%$/;E.test(a[_])&&(y+=1)}}),f===y?a:!1};var o=gh.toState=function(a,c){var f=a.hex?(0,i.default)(a.hex):(0,i.default)(a),y=f.toHsl(),_=f.toHsv(),E=f.toRgb(),I=f.toHex();y.s===0&&(y.h=c||0,_.h=c||0);var P=I==="000000"&&E.a===0;return{hsl:y,hex:P?"transparent":"#"+I,rgb:E,hsv:_,oldHue:a.h||c||y.h,source:a.source}};return gh.isValidHex=function(a){if(a==="transparent")return!0;var c=String(a).charAt(0)==="#"?1:0;return a.length!==4+c&&a.length<7+c&&(0,i.default)(a).isValid()},gh.getContrastingColor=function(a){if(!a)return"#fff";var c=o(a);if(c.hex==="transparent")return"rgba(0,0,0,0.4)";var f=(c.rgb.r*299+c.rgb.g*587+c.rgb.b*114)/1e3;return f>=128?"#000":"#fff"},gh.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}},gh.isvalidColorString=function(a,c){var f=a.replace("","");return(0,i.default)(c+" ("+f+")")._ok},gh}var K$;function G9e(){if(K$)return J_;K$=1,Object.defineProperty(J_,"__esModule",{value:!0}),J_.ColorWrap=void 0;var n=Object.assign||function(P){for(var K=1;K<arguments.length;K++){var z=arguments[K];for(var Q in z)Object.prototype.hasOwnProperty.call(z,Q)&&(P[Q]=z[Q])}return P},e=(function(){function P(K,z){for(var Q=0;Q<z.length;Q++){var V=z[Q];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(K,V.key,V)}}return function(K,z,Q){return z&&P(K.prototype,z),Q&&P(K,Q),K}})(),t=pa(),i=f(t),r=vse(),o=f(r),s=bse(),a=c(s);function c(P){if(P&&P.__esModule)return P;var K={};if(P!=null)for(var z in P)Object.prototype.hasOwnProperty.call(P,z)&&(K[z]=P[z]);return K.default=P,K}function f(P){return P&&P.__esModule?P:{default:P}}function y(P,K){if(!(P instanceof K))throw new TypeError("Cannot call a class as a function")}function _(P,K){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return K&&(typeof K=="object"||typeof K=="function")?K:P}function E(P,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof K);P.prototype=Object.create(K&&K.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),K&&(Object.setPrototypeOf?Object.setPrototypeOf(P,K):P.__proto__=K)}var I=J_.ColorWrap=function(K){var z=(function(Q){E(V,Q);function V($){y(this,V);var Z=_(this,(V.__proto__||Object.getPrototypeOf(V)).call(this));return Z.handleChange=function(ee,X){var W=a.simpleCheckForValidColor(ee);if(W){var se=a.toState(ee,ee.h||Z.state.oldHue);Z.setState(se),Z.props.onChangeComplete&&Z.debounce(Z.props.onChangeComplete,se,X),Z.props.onChange&&Z.props.onChange(se,X)}},Z.handleSwatchHover=function(ee,X){var W=a.simpleCheckForValidColor(ee);if(W){var se=a.toState(ee,ee.h||Z.state.oldHue);Z.props.onSwatchHover&&Z.props.onSwatchHover(se,X)}},Z.state=n({},a.toState($.color,0)),Z.debounce=(0,o.default)(function(ee,X,W){ee(X,W)},100),Z}return e(V,[{key:"render",value:function(){var Z={};return this.props.onSwatchHover&&(Z.onSwatchHover=this.handleSwatchHover),i.default.createElement(K,n({},this.props,this.state,{onChange:this.handleChange},Z))}}],[{key:"getDerivedStateFromProps",value:function(Z,ee){return n({},a.toState(Z.color,ee.oldHue))}}]),V})(t.PureComponent||t.Component);return z.propTypes=n({},K.propTypes),z.defaultProps=n({},K.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),z};return J_.default=I,J_}var ex={},x3={},F$;function W9e(){if(F$)return x3;F$=1,Object.defineProperty(x3,"__esModule",{value:!0}),x3.handleFocus=void 0;var n=Object.assign||function(c){for(var f=1;f<arguments.length;f++){var y=arguments[f];for(var _ in y)Object.prototype.hasOwnProperty.call(y,_)&&(c[_]=y[_])}return c},e=(function(){function c(f,y){for(var _=0;_<y.length;_++){var E=y[_];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(f,E.key,E)}}return function(f,y,_){return y&&c(f.prototype,y),_&&c(f,_),f}})(),t=pa(),i=r(t);function r(c){return c&&c.__esModule?c:{default:c}}function o(c,f){if(!(c instanceof f))throw new TypeError("Cannot call a class as a function")}function s(c,f){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:c}function a(c,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);c.prototype=Object.create(f&&f.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(c,f):c.__proto__=f)}return x3.handleFocus=function(f){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(_){a(E,_);function E(){var I,P,K,z;o(this,E);for(var Q=arguments.length,V=Array(Q),$=0;$<Q;$++)V[$]=arguments[$];return z=(P=(K=s(this,(I=E.__proto__||Object.getPrototypeOf(E)).call.apply(I,[this].concat(V))),K),K.state={focus:!1},K.handleFocus=function(){return K.setState({focus:!0})},K.handleBlur=function(){return K.setState({focus:!1})},P),s(K,z)}return e(E,[{key:"render",value:function(){return i.default.createElement(y,{onFocus:this.handleFocus,onBlur:this.handleBlur},i.default.createElement(f,n({},this.props,this.state)))}}]),E})(i.default.Component)},x3}var z$;function Q9e(){if(z$)return ex;z$=1,Object.defineProperty(ex,"__esModule",{value:!0}),ex.Swatch=void 0;var n=Object.assign||function(_){for(var E=1;E<arguments.length;E++){var I=arguments[E];for(var P in I)Object.prototype.hasOwnProperty.call(I,P)&&(_[P]=I[P])}return _},e=pa(),t=c(e),i=$m(),r=c(i),o=W9e(),s=RK(),a=c(s);function c(_){return _&&_.__esModule?_:{default:_}}var f=13,y=ex.Swatch=function(E){var I=E.color,P=E.style,K=E.onClick,z=K===void 0?function(){}:K,Q=E.onHover,V=E.title,$=V===void 0?I:V,Z=E.children,ee=E.focus,X=E.focusStyle,W=X===void 0?{}:X,se=I==="transparent",ue=(0,r.default)({default:{swatch:n({background:I,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},P,ee?W:{})}}),ve=function(Fe){return z(I,Fe)},ye=function(Fe){return Fe.keyCode===f&&z(I,Fe)},Ee=function(Fe){return Q(I,Fe)},_e={};return Q&&(_e.onMouseOver=Ee),t.default.createElement("div",n({style:ue.swatch,onClick:ve,title:$,tabIndex:0,onKeyDown:ye},_e),Z,se&&t.default.createElement(a.default,{borderRadius:ue.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};return ex.default=(0,o.handleFocus)(y),ex}var j$;function Cse(){return j$||(j$=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=E9e();Object.defineProperty(n,"Alpha",{enumerable:!0,get:function(){return f(e).default}});var t=RK();Object.defineProperty(n,"Checkboard",{enumerable:!0,get:function(){return f(t).default}});var i=B9e();Object.defineProperty(n,"EditableInput",{enumerable:!0,get:function(){return f(i).default}});var r=I9e();Object.defineProperty(n,"Hue",{enumerable:!0,get:function(){return f(r).default}});var o=T9e();Object.defineProperty(n,"Raised",{enumerable:!0,get:function(){return f(o).default}});var s=K9e();Object.defineProperty(n,"Saturation",{enumerable:!0,get:function(){return f(s).default}});var a=G9e();Object.defineProperty(n,"ColorWrap",{enumerable:!0,get:function(){return f(a).default}});var c=Q9e();Object.defineProperty(n,"Swatch",{enumerable:!0,get:function(){return f(c).default}});function f(y){return y&&y.__esModule?y:{default:y}}})(Yk)),Yk}var tx={},n9,N$;function q9e(){if(N$)return n9;N$=1;function n(e){return e===void 0}return n9=n,n9}var qw={},G$;function Y9e(){if(G$)return qw;G$=1,Object.defineProperty(qw,"__esModule",{value:!0});var n=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var c=arguments[a];for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(s[f]=c[f])}return s},e=pa(),t=i(e);function i(s){return s&&s.__esModule?s:{default:s}}function r(s,a){var c={};for(var f in s)a.indexOf(f)>=0||Object.prototype.hasOwnProperty.call(s,f)&&(c[f]=s[f]);return c}var o=24;return qw.default=function(s){var a=s.fill,c=a===void 0?"currentColor":a,f=s.width,y=f===void 0?o:f,_=s.height,E=_===void 0?o:_,I=s.style,P=I===void 0?{}:I,K=r(s,["fill","width","height","style"]);return t.default.createElement("svg",n({viewBox:"0 0 "+o+" "+o,style:n({fill:c,width:y,height:E},P)},K),t.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},qw}var W$;function V9e(){if(W$)return tx;W$=1,Object.defineProperty(tx,"__esModule",{value:!0}),tx.ChromeFields=void 0;var n=(function(){function V($,Z){for(var ee=0;ee<Z.length;ee++){var X=Z[ee];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty($,X.key,X)}}return function($,Z,ee){return Z&&V($.prototype,Z),ee&&V($,ee),$}})(),e=pa(),t=I(e),i=$m(),r=I(i),o=bse(),s=E(o),a=q9e(),c=I(a),f=Cse(),y=Y9e(),_=I(y);function E(V){if(V&&V.__esModule)return V;var $={};if(V!=null)for(var Z in V)Object.prototype.hasOwnProperty.call(V,Z)&&($[Z]=V[Z]);return $.default=V,$}function I(V){return V&&V.__esModule?V:{default:V}}function P(V,$){if(!(V instanceof $))throw new TypeError("Cannot call a class as a function")}function K(V,$){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $&&(typeof $=="object"||typeof $=="function")?$:V}function z(V,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $);V.prototype=Object.create($&&$.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),$&&(Object.setPrototypeOf?Object.setPrototypeOf(V,$):V.__proto__=$)}var Q=tx.ChromeFields=(function(V){z($,V);function $(Z){P(this,$);var ee=K(this,($.__proto__||Object.getPrototypeOf($)).call(this));return ee.toggleViews=function(){ee.state.view==="hex"?ee.setState({view:"rgb"}):ee.state.view==="rgb"?ee.setState({view:"hsl"}):ee.state.view==="hsl"&&(ee.props.hsl.a===1?ee.setState({view:"hex"}):ee.setState({view:"rgb"}))},ee.handleChange=function(X,W){X.hex?s.isValidHex(X.hex)&&ee.props.onChange({hex:X.hex,source:"hex"},W):X.r||X.g||X.b?ee.props.onChange({r:X.r||ee.props.rgb.r,g:X.g||ee.props.rgb.g,b:X.b||ee.props.rgb.b,source:"rgb"},W):X.a?(X.a<0?X.a=0:X.a>1&&(X.a=1),ee.props.onChange({h:ee.props.hsl.h,s:ee.props.hsl.s,l:ee.props.hsl.l,a:Math.round(X.a*100)/100,source:"rgb"},W)):(X.h||X.s||X.l)&&(typeof X.s=="string"&&X.s.includes("%")&&(X.s=X.s.replace("%","")),typeof X.l=="string"&&X.l.includes("%")&&(X.l=X.l.replace("%","")),X.s==1?X.s=.01:X.l==1&&(X.l=.01),ee.props.onChange({h:X.h||ee.props.hsl.h,s:Number((0,c.default)(X.s)?ee.props.hsl.s:X.s),l:Number((0,c.default)(X.l)?ee.props.hsl.l:X.l),source:"hsl"},W))},ee.showHighlight=function(X){X.currentTarget.style.background="#eee"},ee.hideHighlight=function(X){X.currentTarget.style.background="transparent"},Z.hsl.a!==1&&Z.view==="hex"?ee.state={view:"rgb"}:ee.state={view:Z.view},ee}return n($,[{key:"render",value:function(){var ee=this,X=(0,r.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),W=void 0;return this.state.view==="hex"?W=t.default.createElement("div",{style:X.fields,className:"flexbox-fix"},t.default.createElement("div",{style:X.field},t.default.createElement(f.EditableInput,{style:{input:X.input,label:X.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?W=t.default.createElement("div",{style:X.fields,className:"flexbox-fix"},t.default.createElement("div",{style:X.field},t.default.createElement(f.EditableInput,{style:{input:X.input,label:X.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),t.default.createElement("div",{style:X.field},t.default.createElement(f.EditableInput,{style:{input:X.input,label:X.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),t.default.createElement("div",{style:X.field},t.default.createElement(f.EditableInput,{style:{input:X.input,label:X.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),t.default.createElement("div",{style:X.alpha},t.default.createElement(f.EditableInput,{style:{input:X.input,label:X.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(W=t.default.createElement("div",{style:X.fields,className:"flexbox-fix"},t.default.createElement("div",{style:X.field},t.default.createElement(f.EditableInput,{style:{input:X.input,label:X.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),t.default.createElement("div",{style:X.field},t.default.createElement(f.EditableInput,{style:{input:X.input,label:X.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:X.field},t.default.createElement(f.EditableInput,{style:{input:X.input,label:X.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:X.alpha},t.default.createElement(f.EditableInput,{style:{input:X.input,label:X.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),t.default.createElement("div",{style:X.wrap,className:"flexbox-fix"},W,t.default.createElement("div",{style:X.toggle},t.default.createElement("div",{style:X.icon,onClick:this.toggleViews,ref:function(ue){return ee.icon=ue}},t.default.createElement(_.default,{style:X.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(ee,X){return ee.hsl.a!==1&&X.view==="hex"?{view:"rgb"}:null}}]),$})(t.default.Component);return Q.defaultProps={view:"hex"},tx.default=Q,tx}var nx={},Q$;function $9e(){if(Q$)return nx;Q$=1,Object.defineProperty(nx,"__esModule",{value:!0}),nx.ChromePointer=void 0;var n=pa(),e=r(n),t=$m(),i=r(t);function r(s){return s&&s.__esModule?s:{default:s}}var o=nx.ChromePointer=function(){var a=(0,i.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return e.default.createElement("div",{style:a.picker})};return nx.default=o,nx}var ix={},q$;function H9e(){if(q$)return ix;q$=1,Object.defineProperty(ix,"__esModule",{value:!0}),ix.ChromePointerCircle=void 0;var n=pa(),e=r(n),t=$m(),i=r(t);function r(s){return s&&s.__esModule?s:{default:s}}var o=ix.ChromePointerCircle=function(){var a=(0,i.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return e.default.createElement("div",{style:a.picker})};return ix.default=o,ix}var Y$;function Z9e(){if(Y$)return j_;Y$=1,Object.defineProperty(j_,"__esModule",{value:!0}),j_.Chrome=void 0;var n=pa(),e=K(n),t=W1(),i=K(t),r=$m(),o=K(r),s=yse(),a=K(s),c=Cse(),f=V9e(),y=K(f),_=$9e(),E=K(_),I=H9e(),P=K(I);function K(Q){return Q&&Q.__esModule?Q:{default:Q}}var z=j_.Chrome=function(V){var $=V.width,Z=V.onChange,ee=V.disableAlpha,X=V.rgb,W=V.hsl,se=V.hsv,ue=V.hex,ve=V.renderers,ye=V.styles,Ee=ye===void 0?{}:ye,_e=V.className,Be=_e===void 0?"":_e,Fe=V.defaultView,Se=(0,o.default)((0,a.default)({default:{picker:{width:$,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+X.r+", "+X.g+", "+X.b+", "+X.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},Ee),{disableAlpha:ee});return e.default.createElement("div",{style:Se.picker,className:"chrome-picker "+Be},e.default.createElement("div",{style:Se.saturation},e.default.createElement(c.Saturation,{style:Se.Saturation,hsl:W,hsv:se,pointer:P.default,onChange:Z})),e.default.createElement("div",{style:Se.body},e.default.createElement("div",{style:Se.controls,className:"flexbox-fix"},e.default.createElement("div",{style:Se.color},e.default.createElement("div",{style:Se.swatch},e.default.createElement("div",{style:Se.active}),e.default.createElement(c.Checkboard,{renderers:ve}))),e.default.createElement("div",{style:Se.toggles},e.default.createElement("div",{style:Se.hue},e.default.createElement(c.Hue,{style:Se.Hue,hsl:W,pointer:E.default,onChange:Z})),e.default.createElement("div",{style:Se.alpha},e.default.createElement(c.Alpha,{style:Se.Alpha,rgb:X,hsl:W,pointer:E.default,renderers:ve,onChange:Z})))),e.default.createElement(y.default,{rgb:X,hsl:W,hex:ue,view:Fe,onChange:Z,disableAlpha:ee})))};return z.propTypes={width:i.default.oneOfType([i.default.string,i.default.number]),disableAlpha:i.default.bool,styles:i.default.object,defaultView:i.default.oneOf(["hex","rgb","hsl"])},z.defaultProps={width:225,disableAlpha:!1,styles:{}},j_.default=(0,c.ColorWrap)(z),j_}var X9e=Z9e();const J9e=Zl(X9e);function or(){var n="/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",e="04cff10f573f4461c1718b34a830d9c914f6fa95",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:23}},1:{start:{line:8,column:2},end:{line:8,column:56}},2:{start:{line:11,column:10},end:{line:13,column:3}},3:{start:{line:14,column:15},end:{line:14,column:19}},4:{start:{line:16,column:4},end:{line:16,column:17}},5:{start:{line:17,column:4},end:{line:17,column:75}},6:{start:{line:20,column:4},end:{line:20,column:27}},7:{start:{line:25,column:21},end:{line:39,column:3}},8:{start:{line:26,column:17},end:{line:26,column:32}},9:{start:{line:27,column:4},end:{line:38,column:5}},10:{start:{line:28,column:18},end:{line:28,column:46}},11:{start:{line:29,column:6},end:{line:32,column:8}},12:{start:{line:34,column:6},end:{line:37,column:8}},13:{start:{line:40,column:17},end:{line:42,column:3}},14:{start:{line:41,column:4},end:{line:41,column:62}},15:{start:{line:44,column:4},end:{line:49,column:5}},16:{start:{line:45,column:6},end:{line:45,column:43}},17:{start:{line:47,column:6},end:{line:47,column:49}},18:{start:{line:48,column:6},end:{line:48,column:39}},19:{start:{line:52,column:4},end:{line:52,column:47}},20:{start:{line:55,column:19},end:{line:55,column:42}},21:{start:{line:56,column:25},end:{line:56,column:44}},22:{start:{line:57,column:31},end:{line:63,column:5}},23:{start:{line:64,column:35},end:{line:99,column:5}},24:{start:{line:79,column:31},end:{line:79,column:67}},25:{start:{line:100,column:24},end:{line:102,column:5}},26:{start:{line:103,column:4},end:{line:124,column:9}},27:{start:{line:114,column:12},end:{line:114,column:36}},28:{start:{line:121,column:27},end:{line:121,column:56}}},fnMap:{0:{name:"formatColor",decl:{start:{line:6,column:9},end:{line:6,column:20}},loc:{start:{line:6,column:28},end:{line:9,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:21},end:{line:18,column:3}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:21},end:{line:21,column:3}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:25,column:21},end:{line:25,column:22}},loc:{start:{line:25,column:27},end:{line:39,column:3}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:40,column:17},end:{line:40,column:18}},loc:{start:{line:40,column:23},end:{line:42,column:3}},line:40},5:{name:"(anonymous_5)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:14},end:{line:50,column:3}},line:43},6:{name:"(anonymous_6)",decl:{start:{line:51,column:2},end:{line:51,column:3}},loc:{start:{line:51,column:14},end:{line:53,column:3}},line:51},7:{name:"(anonymous_7)",decl:{start:{line:54,column:2},end:{line:54,column:3}},loc:{start:{line:54,column:11},end:{line:125,column:3}},line:54},8:{name:"(anonymous_8)",decl:{start:{line:79,column:24},end:{line:79,column:25}},loc:{start:{line:79,column:31},end:{line:79,column:67}},line:79},9:{name:"(anonymous_9)",decl:{start:{line:113,column:15},end:{line:113,column:16}},loc:{start:{line:113,column:26},end:{line:115,column:11}},line:113},10:{name:"(anonymous_10)",decl:{start:{line:121,column:20},end:{line:121,column:21}},loc:{start:{line:121,column:27},end:{line:121,column:56}},line:121}},branchMap:{0:{loc:{start:{line:27,column:4},end:{line:38,column:5}},type:"if",locations:[{start:{line:27,column:4},end:{line:38,column:5}},{start:{line:33,column:11},end:{line:38,column:5}}],line:27},1:{loc:{start:{line:52,column:24},end:{line:52,column:45}},type:"cond-expr",locations:[{start:{line:52,column:35},end:{line:52,column:41}},{start:{line:52,column:44},end:{line:52,column:45}}],line:52},2:{loc:{start:{line:104,column:6},end:{line:104,column:39}},type:"binary-expr",locations:[{start:{line:104,column:6},end:{line:104,column:29}},{start:{line:104,column:33},end:{line:104,column:39}}],line:104},3:{loc:{start:{line:120,column:17},end:{line:120,column:57}},type:"cond-expr",locations:[{start:{line:120,column:36},end:{line:120,column:52}},{start:{line:120,column:55},end:{line:120,column:57}}],line:120}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx"],names:[],mappings:"AAsFmB,SAQb,KARa;AAtFnB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AAEzB,OAAO,YAAY;AAEnB,SAAS,YAAY,OAA4B;AAC/C,QAAM,MAAM,MAAM;AAClB,SAAO,QAAQ,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC;AACpD;AAaA,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,QAAQ;AAAA,IACN,cAAc;AAAA,EAChB;AAAA,EACA,aAAsC;AAAA,EAEtC,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,kBAAkB,OAAO,SAAS,KAAK,iBAAiB,MAAK,EAAE;AAAA,EACtE;AAAA,EAEA,gBAAgB,GAAW;AACzB,SAAK,MAAM,SAAS,CAAC;AAAA,EACvB;AAAA;AAAA;AAAA;AAAA,EAKA,mBAAmB,MAAM;AACvB,UAAM,OAAO,KAAK;AAClB,QAAG,MAAM;AACP,YAAM,MAAM,KAAK,sBAAsB;AACvC,aAAO;AAAA,QACL,KAAK,IAAI;AAAA,QACT,MAAM,IAAI,OAAO;AAAA,MACnB;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,KAAK;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AAAA,EACF;AAAA,EAEA,eAAe,MAAM;AACnB,SAAK,SAAS,EAAE,cAAc,CAAC,KAAK,MAAM,aAAa,CAAC;AAAA,EAC1D;AAAA,EAEA,IAAI,QAAQ;AAEV,QAAI;AACF,aAAO,MAAM,KAAK,MAAM,KAAK,EAAE,IAAI;AAAA,IACrC,SACM,KAAK;AACT,cAAQ,KAAK,yBAAyB,GAAG;AACzC,aAAO,MAAM,kBAAkB;AAAA,IACjC;AAAA,EACF;AAAA,EAEA,SAAU,GAAW;AACnB,SAAK,MAAM,SAAS,MAAM,KAAK,SAAY,CAAC;AAAA,EAC9C;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,iBAAiB;AACrC,UAAM,eAAe,KAAK,MAAM,OAAO;AACvC,UAAM,qBAAqB;AAAA,MACzB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA;AAAA,MAEhB,GAAG,aAAa;AAAA,IAClB;AAEA,UAAM,SAAS;AAAA,MAAC;AAAA;AAAA,QACd,WAAU;AAAA,QACV,OAAO;AAAA,UACL,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,MAAM,OAAO;AAAA,UACb,KAAK,OAAO;AAAA,QACd;AAAA,QACA;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,gBAAgB,YAAY,CAAC,CAAC;AAAA;AAAA,UACpD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK;AAAA,cACd,OAAO;AAAA,gBACL,QAAQ;AAAA,gBACR,UAAU;AAAA,gBACV,KAAK;AAAA,gBACL,OAAO;AAAA,gBACP,QAAQ;AAAA,gBACR,MAAM;AAAA,cACR;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAEA,UAAM,cAAc;AAAA,MAClB,iBAAiB,KAAK,MAAM;AAAA,IAC9B;AAEA,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA,WAAK,MAAM,gBAAgB;AAAA,MAC5B,oBAAC,SAAI,WAAU,yBAAwB,OAAO,aAAa;AAAA,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,cAAa;AAAA,UACb,WAAU;AAAA,UACV,KAAK,CAAC,UAAU;AAAC,iBAAK,aAAa;AAAA,UAAM;AAAA,UACzC,SAAS,KAAK;AAAA,UACd,OAAO,KAAK,MAAM;AAAA,UAClB,MAAM,KAAK,MAAM;AAAA,UACjB,aAAa,KAAK,MAAM;AAAA,UACxB,OAAO,KAAK,MAAM,QAAQ,KAAK,MAAM,QAAQ;AAAA,UAC7C,UAAU,CAAC,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK;AAAA;AAAA,MAC/C;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"04cff10f573f4461c1718b34a830d9c914f6fa95"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return or=function(){return s},s}or();function eDe(n){or().f[0]++;const e=(or().s[0]++,n.rgb);return or().s[1]++,`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`}class PK extends On.Component{state=(or().s[2]++,{pickerOpened:!1});colorInput=(or().s[3]++,null);constructor(e){or().f[1]++,or().s[4]++,super(e),or().s[5]++,this.onChangeNoCheck=A9.throttle(this.onChangeNoCheck,1e3/30)}onChangeNoCheck(e){or().f[2]++,or().s[6]++,this.props.onChange(e)}calcPickerOffset=(or().s[7]++,()=>{or().f[3]++;const e=(or().s[8]++,this.colorInput);if(or().s[9]++,e){or().b[0][0]++;const t=(or().s[10]++,e.getBoundingClientRect());return or().s[11]++,{top:t.top,left:t.left+196}}else return or().b[0][1]++,or().s[12]++,{top:160,left:555}});togglePicker=(or().s[13]++,()=>{or().f[4]++,or().s[14]++,this.setState({pickerOpened:!this.state.pickerOpened})});get color(){or().f[5]++,or().s[15]++;try{return or().s[16]++,bu(this.props.value).rgb()}catch(e){return or().s[17]++,console.warn("Error parsing color: ",e),or().s[18]++,bu("rgb(255,255,255)")}}onChange(e){or().f[6]++,or().s[19]++,this.props.onChange(e===""?(or().b[1][0]++,void 0):(or().b[1][1]++,e))}render(){or().f[7]++;const e=(or().s[20]++,this.calcPickerOffset()),t=(or().s[21]++,this.color.object()),i=(or().s[22]++,{r:t.r,g:t.g,b:t.b,a:t.alpha}),r=(or().s[23]++,te.jsxs("div",{className:"maputnik-color-picker-offset",style:{position:"fixed",zIndex:1,left:e.left,top:e.top},children:[te.jsx(J9e,{color:i,onChange:s=>(or().f[8]++,or().s[24]++,this.onChangeNoCheck(eDe(s)))}),te.jsx("div",{className:"maputnik-color-picker-offset",onClick:this.togglePicker,style:{zIndex:-1,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}})]})),o=(or().s[25]++,{backgroundColor:this.props.value});return or().s[26]++,te.jsxs("div",{className:"maputnik-color-wrapper",children:[(or().b[2][0]++,this.state.pickerOpened&&(or().b[2][1]++,r)),te.jsx("div",{className:"maputnik-color-swatch",style:o}),te.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",autoComplete:"off",className:"maputnik-color",ref:s=>{or().f[9]++,or().s[27]++,this.colorInput=s},onClick:this.togglePicker,style:this.props.style,name:this.props.name,placeholder:this.props.default,value:this.props.value?(or().b[3][0]++,this.props.value):(or().b[3][1]++,""),onChange:s=>(or().f[10]++,or().s[28]++,this.onChange(s.target.value))})]})}}function Yt(){var n="/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",e="4f1ef08718bb93faa62aae09b5e3576a9aa3bb04",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:8,column:19},end:{line:8,column:24}},2:{start:{line:10,column:4},end:{line:10,column:17}},3:{start:{line:11,column:4},end:{line:16,column:6}},4:{start:{line:19,column:4},end:{line:24,column:5}},5:{start:{line:20,column:6},end:{line:23,column:8}},6:{start:{line:25,column:4},end:{line:25,column:16}},7:{start:{line:28,column:18},end:{line:28,column:77}},8:{start:{line:29,column:23},end:{line:29,column:49}},9:{start:{line:30,column:4},end:{line:39,column:5}},10:{start:{line:31,column:6},end:{line:31,column:58}},11:{start:{line:31,column:31},end:{line:31,column:58}},12:{start:{line:32,column:6},end:{line:34,column:9}},13:{start:{line:35,column:11},end:{line:39,column:5}},14:{start:{line:36,column:6},end:{line:38,column:9}},15:{start:{line:40,column:4},end:{line:42,column:7}},16:{start:{line:45,column:4},end:{line:47,column:5}},17:{start:{line:46,column:6},end:{line:46,column:18}},18:{start:{line:48,column:18},end:{line:48,column:20}},19:{start:{line:49,column:4},end:{line:51,column:5}},20:{start:{line:50,column:6},end:{line:50,column:19}},21:{start:{line:52,column:4},end:{line:54,column:5}},22:{start:{line:53,column:6},end:{line:53,column:19}},23:{start:{line:55,column:4},end:{line:57,column:5}},24:{start:{line:56,column:6},end:{line:56,column:19}},25:{start:{line:58,column:4},end:{line:58,column:16}},26:{start:{line:60,column:15},end:{line:74,column:3}},27:{start:{line:61,column:4},end:{line:61,column:38}},28:{start:{line:62,column:4},end:{line:64,column:5}},29:{start:{line:63,column:6},end:{line:63,column:13}},30:{start:{line:65,column:4},end:{line:73,column:5}},31:{start:{line:66,column:6},end:{line:72,column:7}},32:{start:{line:67,column:8},end:{line:67,column:43}},33:{start:{line:68,column:8},end:{line:68,column:56}},34:{start:{line:70,column:8},end:{line:70,column:33}},35:{start:{line:71,column:8},end:{line:71,column:46}},36:{start:{line:75,column:18},end:{line:100,column:3}},37:{start:{line:76,column:16},end:{line:76,column:42}},38:{start:{line:77,column:17},end:{line:77,column:37}},39:{start:{line:78,column:21},end:{line:78,column:26}},40:{start:{line:79,column:4},end:{line:95,column:5}},41:{start:{line:80,column:19},end:{line:80,column:31}},42:{start:{line:81,column:6},end:{line:94,column:7}},43:{start:{line:82,column:8},end:{line:86,column:9}},44:{start:{line:83,column:10},end:{line:83,column:42}},45:{start:{line:85,column:10},end:{line:85,column:42}},46:{start:{line:87,column:8},end:{line:87,column:27}},47:{start:{line:89,column:8},end:{line:93,column:9}},48:{start:{line:90,column:10},end:{line:90,column:31}},49:{start:{line:92,column:10},end:{line:92,column:40}},50:{start:{line:96,column:4},end:{line:96,column:32}},51:{start:{line:97,column:4},end:{line:97,column:70}},52:{start:{line:98,column:4},end:{line:98,column:41}},53:{start:{line:99,column:4},end:{line:99,column:56}},54:{start:{line:99,column:29},end:{line:99,column:56}},55:{start:{line:102,column:4},end:{line:185,column:5}},56:{start:{line:103,column:20},end:{line:103,column:81}},57:{start:{line:104,column:27},end:{line:104,column:82}},58:{start:{line:106,column:6},end:{line:110,column:7}},59:{start:{line:107,column:8},end:{line:107,column:38}},60:{start:{line:109,column:8},end:{line:109,column:27}},61:{start:{line:111,column:6},end:{line:165,column:11}},62:{start:{line:124,column:14},end:{line:124,column:41}},63:{start:{line:127,column:14},end:{line:127,column:67}},64:{start:{line:130,column:14},end:{line:130,column:69}},65:{start:{line:133,column:14},end:{line:137,column:17}},66:{start:{line:152,column:14},end:{line:152,column:47}},67:{start:{line:155,column:14},end:{line:155,column:47}},68:{start:{line:158,column:14},end:{line:158,column:48}},69:{start:{line:159,column:14},end:{line:159,column:32}},70:{start:{line:167,column:20},end:{line:167,column:81}},71:{start:{line:168,column:6},end:{line:184,column:8}},72:{start:{line:176,column:27},end:{line:176,column:59}},73:{start:{line:178,column:12},end:{line:178,column:45}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:21},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:26,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:24},end:{line:43,column:3}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:13},end:{line:59,column:3}},line:44},4:{name:"(anonymous_4)",decl:{start:{line:60,column:15},end:{line:60,column:16}},loc:{start:{line:60,column:21},end:{line:74,column:3}},line:60},5:{name:"(anonymous_5)",decl:{start:{line:75,column:18},end:{line:75,column:19}},loc:{start:{line:75,column:25},end:{line:100,column:3}},line:75},6:{name:"(anonymous_6)",decl:{start:{line:101,column:2},end:{line:101,column:3}},loc:{start:{line:101,column:11},end:{line:186,column:3}},line:101},7:{name:"(anonymous_7)",decl:{start:{line:123,column:23},end:{line:123,column:24}},loc:{start:{line:123,column:29},end:{line:125,column:13}},line:123},8:{name:"(anonymous_8)",decl:{start:{line:126,column:27},end:{line:126,column:28}},loc:{start:{line:126,column:33},end:{line:128,column:13}},line:126},9:{name:"(anonymous_9)",decl:{start:{line:129,column:25},end:{line:129,column:26}},loc:{start:{line:129,column:31},end:{line:131,column:13}},line:129},10:{name:"(anonymous_10)",decl:{start:{line:132,column:20},end:{line:132,column:21}},loc:{start:{line:132,column:26},end:{line:138,column:13}},line:132},11:{name:"(anonymous_11)",decl:{start:{line:151,column:21},end:{line:151,column:22}},loc:{start:{line:151,column:29},end:{line:153,column:13}},line:151},12:{name:"(anonymous_12)",decl:{start:{line:154,column:22},end:{line:154,column:23}},loc:{start:{line:154,column:29},end:{line:156,column:13}},line:154},13:{name:"(anonymous_13)",decl:{start:{line:157,column:20},end:{line:157,column:21}},loc:{start:{line:157,column:28},end:{line:160,column:13}},line:157},14:{name:"(anonymous_14)",decl:{start:{line:176,column:20},end:{line:176,column:21}},loc:{start:{line:176,column:27},end:{line:176,column:59}},line:176},15:{name:"(anonymous_15)",decl:{start:{line:177,column:19},end:{line:177,column:20}},loc:{start:{line:177,column:25},end:{line:179,column:11}},line:177}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:8},end:{line:19,column:53}},type:"binary-expr",locations:[{start:{line:19,column:8},end:{line:19,column:22}},{start:{line:19,column:26},end:{line:19,column:53}}],line:19},2:{loc:{start:{line:28,column:18},end:{line:28,column:77}},type:"cond-expr",locations:[{start:{line:28,column:59},end:{line:28,column:65}},{start:{line:28,column:68},end:{line:28,column:77}}],line:28},3:{loc:{start:{line:28,column:18},end:{line:28,column:56}},type:"binary-expr",locations:[{start:{line:28,column:18},end:{line:28,column:33}},{start:{line:28,column:37},end:{line:28,column:56}}],line:28},4:{loc:{start:{line:30,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:39,column:5}},{start:{line:35,column:11},end:{line:39,column:5}}],line:30},5:{loc:{start:{line:30,column:8},end:{line:30,column:41}},type:"binary-expr",locations:[{start:{line:30,column:8},end:{line:30,column:27}},{start:{line:30,column:31},end:{line:30,column:41}}],line:30},6:{loc:{start:{line:31,column:6},end:{line:31,column:58}},type:"if",locations:[{start:{line:31,column:6},end:{line:31,column:58}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},7:{loc:{start:{line:35,column:11},end:{line:39,column:5}},type:"if",locations:[{start:{line:35,column:11},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},8:{loc:{start:{line:35,column:15},end:{line:35,column:49}},type:"binary-expr",locations:[{start:{line:35,column:15},end:{line:35,column:35}},{start:{line:35,column:39},end:{line:35,column:49}}],line:35},9:{loc:{start:{line:41,column:18},end:{line:41,column:53}},type:"cond-expr",locations:[{start:{line:41,column:36},end:{line:41,column:42}},{start:{line:41,column:45},end:{line:41,column:53}}],line:41},10:{loc:{start:{line:45,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},11:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},12:{loc:{start:{line:52,column:4},end:{line:54,column:5}},type:"if",locations:[{start:{line:52,column:4},end:{line:54,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},13:{loc:{start:{line:52,column:8},end:{line:52,column:56}},type:"binary-expr",locations:[{start:{line:52,column:8},end:{line:52,column:30}},{start:{line:52,column:34},end:{line:52,column:56}}],line:52},14:{loc:{start:{line:55,column:4},end:{line:57,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:57,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},15:{loc:{start:{line:55,column:8},end:{line:55,column:56}},type:"binary-expr",locations:[{start:{line:55,column:8},end:{line:55,column:30}},{start:{line:55,column:34},end:{line:55,column:56}}],line:55},16:{loc:{start:{line:62,column:4},end:{line:64,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:64,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},17:{loc:{start:{line:65,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:73,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},18:{loc:{start:{line:66,column:6},end:{line:72,column:7}},type:"if",locations:[{start:{line:66,column:6},end:{line:72,column:7}},{start:{line:69,column:13},end:{line:72,column:7}}],line:66},19:{loc:{start:{line:79,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:79,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},20:{loc:{start:{line:81,column:6},end:{line:94,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:94,column:7}},{start:{line:88,column:13},end:{line:94,column:7}}],line:81},21:{loc:{start:{line:82,column:8},end:{line:86,column:9}},type:"if",locations:[{start:{line:82,column:8},end:{line:86,column:9}},{start:{line:84,column:15},end:{line:86,column:9}}],line:82},22:{loc:{start:{line:89,column:8},end:{line:93,column:9}},type:"if",locations:[{start:{line:89,column:8},end:{line:93,column:9}},{start:{line:91,column:15},end:{line:93,column:9}}],line:89},23:{loc:{start:{line:99,column:4},end:{line:99,column:56}},type:"if",locations:[{start:{line:99,column:4},end:{line:99,column:56}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:99},24:{loc:{start:{line:102,column:4},end:{line:185,column:5}},type:"if",locations:[{start:{line:102,column:4},end:{line:185,column:5}},{start:{line:166,column:11},end:{line:185,column:5}}],line:102},25:{loc:{start:{line:102,column:8},end:{line:102,column:205}},type:"binary-expr",locations:[{start:{line:102,column:8},end:{line:102,column:63}},{start:{line:102,column:67},end:{line:102,column:122}},{start:{line:102,column:126},end:{line:102,column:151}},{start:{line:102,column:155},end:{line:102,column:180}},{start:{line:102,column:184},end:{line:102,column:205}}],line:102},26:{loc:{start:{line:103,column:20},end:{line:103,column:81}},type:"cond-expr",locations:[{start:{line:103,column:41},end:{line:103,column:62}},{start:{line:103,column:65},end:{line:103,column:81}}],line:103},27:{loc:{start:{line:104,column:27},end:{line:104,column:82}},type:"cond-expr",locations:[{start:{line:104,column:59},end:{line:104,column:61}},{start:{line:104,column:64},end:{line:104,column:82}}],line:104},28:{loc:{start:{line:106,column:6},end:{line:110,column:7}},type:"if",locations:[{start:{line:106,column:6},end:{line:110,column:7}},{start:{line:108,column:13},end:{line:110,column:7}}],line:106},29:{loc:{start:{line:121,column:19},end:{line:121,column:58}},type:"cond-expr",locations:[{start:{line:121,column:38},end:{line:121,column:50}},{start:{line:121,column:53},end:{line:121,column:58}}],line:121},30:{loc:{start:{line:150,column:19},end:{line:150,column:58}},type:"cond-expr",locations:[{start:{line:150,column:43},end:{line:150,column:45}},{start:{line:150,column:48},end:{line:150,column:58}}],line:150},31:{loc:{start:{line:167,column:20},end:{line:167,column:81}},type:"cond-expr",locations:[{start:{line:167,column:41},end:{line:167,column:62}},{start:{line:167,column:65},end:{line:167,column:81}}],line:167},32:{loc:{start:{line:175,column:17},end:{line:175,column:46}},type:"cond-expr",locations:[{start:{line:175,column:36},end:{line:175,column:38}},{start:{line:175,column:41},end:{line:175,column:46}}],line:175}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0,0,0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx"],names:[],mappings:"AA8Ka,SACL,KADK;AA9Kb,OAAO,WAAwC;AAC/C,OAAO,sBAAsB;AA0B7B,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,WAAW;AAAA,EACb;AAAA,EACA,iBAA0B;AAAA,EAE1B,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM,CAAC,iBAAiB;AAAA,MACxB,SAAS;AAAA,MACT,OAAO,MAAM;AAAA,MACb,YAAY,MAAM;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,WAAW,MAAM,UAAU,MAAM,OAAO;AACjD,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,QACb,YAAY,MAAM;AAAA,MACpB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,YAAY,UAAuC;AACjD,UAAM,QAAS,aAAa,MAAM,aAAa,SAC7C,SAAY,CAAC;AAEf,UAAM,aAAa,KAAK,MAAM,UAAU;AACxC,QAAG,KAAK,QAAQ,KAAK,KAAK,YAAY;AACpC,UAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAClD,WAAK,SAAS;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,IACH,WACS,CAAC,KAAK,QAAQ,KAAK,KAAK,YAAY;AAC3C,WAAK,SAAS;AAAA,QACZ,OAAO;AAAA,MACT,CAAC;AAAA,IACH;AAEA,SAAK,SAAS;AAAA,MACZ,YAAY,aAAa,KAAK,SAAY;AAAA,IAC5C,CAAC;AAAA,EACH;AAAA,EAEA,QAAQ,GAAgC;AACtC,QAAI,MAAM,QAAW;AACnB,aAAO;AAAA,IACT;AAEA,UAAM,QAAQ,CAAC;AACf,QAAG,MAAM,KAAK,GAAG;AACf,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAE9B,QAAG,CAAC,KAAK,MAAM,OAAO;AACpB;AAAA,IACF;AAGA,QAAI,CAAC,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACnC,UAAG,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACjC,aAAK,YAAY,KAAK,MAAM,KAAK;AACjC,aAAK,SAAS,EAAC,YAAY,KAAK,MAAM,MAAK,CAAC;AAAA,MAC9C,OAAO;AACL,aAAK,YAAY,MAAS;AAC1B,aAAK,SAAS,EAAC,YAAY,OAAS,CAAC;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,MAAqE;AACpF,QAAI,QAAQ,WAAW,EAAE,OAAO,KAAK;AACrC,UAAM,OAAO,KAAK,MAAM;AACxB,QAAI,aAAa;AAEjB,QAAG,MAAM;AAEP,YAAM,OAAO,QAAQ;AAGrB,UAAI,KAAK,gBAAgB;AAKvB,YAAI,QAAQ,CAAC,KAAK,MAAM,YAAa;AACnC,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B,OACK;AACH,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B;AACA,qBAAa;AAAA,MACf,OACK;AACH,YAAI,OAAO,OAAK,GAAG;AACjB,kBAAQ,QAAQ;AAAA,QAClB,OACK;AACH,kBAAQ,SAAS,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,SAAK,iBAAiB;AAGtB,YAAQ,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,CAAC;AAElE,SAAK,SAAS,EAAC,OAAO,WAAU,CAAC;AACjC,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAAA,EACpD;AAAA,EAEA,SAAS;AACP,QACE,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,KAAK,MAAM,QAAQ,UAAa,KAAK,MAAM,QAAQ,UACnD,KAAK,MAAM,YACX;AACA,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AACtE,YAAM,eAAe,KAAK,MAAM,YAAY,SAAY,KAAK,KAAK,MAAM;AACxE,UAAI;AACJ,UAAI,KAAK,MAAM,cAAc;AAC3B,qBAAa,KAAK,MAAM;AAAA,MAC1B,OACK;AACH,qBAAa;AAAA,MACf;AAEA,aAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,WAAU;AAAA,YAEV,MAAK;AAAA,YACL,KAAK,KAAK,MAAM;AAAA,YAChB,KAAK,KAAK,MAAM;AAAA,YAChB,MAAK;AAAA,YACL,YAAW;AAAA,YACX,OAAO,UAAU,SAAY,eAAe;AAAA,YAC5C,UAAU,KAAK;AAAA,YACf,WAAW,MAAM;AACf,mBAAK,iBAAiB;AAAA,YACxB;AAAA,YACA,eAAe,MAAM;AACnB,mBAAK,SAAS,EAAC,SAAS,MAAM,cAAc,KAAI,CAAC;AAAA,YACnD;AAAA,YACA,aAAa,MAAM;AAEjB,mBAAK,SAAS,EAAC,SAAS,OAAO,cAAc,MAAK,CAAC;AAAA,YACrD;AAAA,YACA,QAAQ,MAAM;AACZ,mBAAK,SAAS;AAAA,gBACZ,SAAS;AAAA,gBACT,cAAc;AAAA,gBACd,YAAY,KAAK,MAAM;AAAA,cACzB,CAAC;AAAA,YACH;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAzBrC;AAAA,QA0BN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,MAAK;AAAA,YACL,YAAW;AAAA,YACX,WAAU;AAAA,YACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,YAC1C,OAAO,eAAe,SAAY,KAAK;AAAA,YACvC,SAAS,QAAM;AACb,mBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,YAC/B;AAAA,YACA,UAAU,OAAK;AACb,mBAAK,YAAY,EAAE,OAAO,KAAK;AAAA,YACjC;AAAA,YACA,QAAQ,QAAM;AACZ,mBAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,mBAAK,WAAW;AAAA,YAClB;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAhBrC;AAAA,QAkBN;AAAA,SACF;AAAA,IACF,OACK;AACH,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AAEtE,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,WAAU;AAAA,UACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,UAC1C,OAAO,UAAU,SAAY,KAAK;AAAA,UAClC,UAAU,OAAK,KAAK,YAAY,EAAE,OAAO,KAAK;AAAA,UAC9C,SAAS,MAAM;AACb,iBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,UAC/B;AAAA,UACA,QAAQ,KAAK;AAAA,UACb,UAAU,KAAK,MAAM;AAAA,UACrB,eAAa,KAAK,MAAM,aAAa;AAAA;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4f1ef08718bb93faa62aae09b5e3576a9aa3bb04"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Yt=function(){return s},s}Yt();class z1 extends On.Component{static defaultProps=(Yt().s[0]++,{rangeStep:1});_keyboardEvent=(Yt().s[1]++,!1);constructor(e){Yt().f[0]++,Yt().s[2]++,super(e),Yt().s[3]++,this.state={uuid:+C2(),editing:!1,value:e.value,dirtyValue:e.value}}static getDerivedStateFromProps(e,t){return Yt().f[1]++,Yt().s[4]++,Yt().b[1][0]++,!t.editing&&(Yt().b[1][1]++,e.value!==t.value)?(Yt().b[0][0]++,Yt().s[5]++,{value:e.value,dirtyValue:e.value}):(Yt().b[0][1]++,Yt().s[6]++,null)}changeValue(e){Yt().f[2]++;const t=(Yt().s[7]++,Yt().b[3][0]++,e===""||(Yt().b[3][1]++,e===void 0)?(Yt().b[2][0]++,void 0):(Yt().b[2][1]++,+e)),i=(Yt().s[8]++,this.props.value!==t);Yt().s[9]++,Yt().b[5][0]++,this.isValid(t)&&(Yt().b[5][1]++,i)?(Yt().b[4][0]++,Yt().s[10]++,this.props.onChange?(Yt().b[6][0]++,Yt().s[11]++,this.props.onChange(t)):Yt().b[6][1]++,Yt().s[12]++,this.setState({value:t})):(Yt().b[4][1]++,Yt().s[13]++,Yt().b[8][0]++,!this.isValid(t)&&(Yt().b[8][1]++,i)?(Yt().b[7][0]++,Yt().s[14]++,this.setState({value:void 0})):Yt().b[7][1]++),Yt().s[15]++,this.setState({dirtyValue:e===""?(Yt().b[9][0]++,void 0):(Yt().b[9][1]++,e)})}isValid(e){if(Yt().f[3]++,Yt().s[16]++,e===void 0)return Yt().b[10][0]++,Yt().s[17]++,!0;Yt().b[10][1]++;const t=(Yt().s[18]++,+e);return Yt().s[19]++,isNaN(t)?(Yt().b[11][0]++,Yt().s[20]++,!1):(Yt().b[11][1]++,Yt().s[21]++,Yt().b[13][0]++,!isNaN(this.props.min)&&(Yt().b[13][1]++,t<this.props.min)?(Yt().b[12][0]++,Yt().s[22]++,!1):(Yt().b[12][1]++,Yt().s[23]++,Yt().b[15][0]++,!isNaN(this.props.max)&&(Yt().b[15][1]++,t>this.props.max)?(Yt().b[14][0]++,Yt().s[24]++,!1):(Yt().b[14][1]++,Yt().s[25]++,!0)))}resetValue=(Yt().s[26]++,()=>{if(Yt().f[4]++,Yt().s[27]++,this.setState({editing:!1}),Yt().s[28]++,this.state.value)Yt().b[16][1]++;else{Yt().b[16][0]++,Yt().s[29]++;return}Yt().s[30]++,this.isValid(this.state.value)?Yt().b[17][1]++:(Yt().b[17][0]++,Yt().s[31]++,this.isValid(this.props.value)?(Yt().b[18][0]++,Yt().s[32]++,this.changeValue(this.props.value),Yt().s[33]++,this.setState({dirtyValue:this.props.value})):(Yt().b[18][1]++,Yt().s[34]++,this.changeValue(void 0),Yt().s[35]++,this.setState({dirtyValue:void 0})))});onChangeRange=(Yt().s[36]++,e=>{Yt().f[5]++;let t=(Yt().s[37]++,parseFloat(e.target.value));const i=(Yt().s[38]++,this.props.rangeStep);let r=(Yt().s[39]++,t);if(Yt().s[40]++,i){Yt().b[19][0]++;const o=(Yt().s[41]++,t%i);Yt().s[42]++,this._keyboardEvent?(Yt().b[20][0]++,Yt().s[43]++,t<+this.state.dirtyValue?(Yt().b[21][0]++,Yt().s[44]++,t=this.state.value-i):(Yt().b[21][1]++,Yt().s[45]++,t=this.state.value+i),Yt().s[46]++,r=t):(Yt().b[20][1]++,Yt().s[47]++,o<i/2?(Yt().b[22][0]++,Yt().s[48]++,t=t-o):(Yt().b[22][1]++,Yt().s[49]++,t=t+(i-o)))}else Yt().b[19][1]++;Yt().s[50]++,this._keyboardEvent=!1,Yt().s[51]++,t=Math.max(this.props.min,Math.min(this.props.max,t)),Yt().s[52]++,this.setState({value:t,dirtyValue:r}),Yt().s[53]++,this.props.onChange?(Yt().b[23][0]++,Yt().s[54]++,this.props.onChange(t)):Yt().b[23][1]++});render(){if(Yt().f[6]++,Yt().s[55]++,Yt().b[25][0]++,Object.prototype.hasOwnProperty.call(this.props,"min")&&(Yt().b[25][1]++,Object.prototype.hasOwnProperty.call(this.props,"max"))&&(Yt().b[25][2]++,this.props.min!==void 0)&&(Yt().b[25][3]++,this.props.max!==void 0)&&(Yt().b[25][4]++,this.props.allowRange)){Yt().b[24][0]++;const e=(Yt().s[56]++,this.state.editing?(Yt().b[26][0]++,this.state.dirtyValue):(Yt().b[26][1]++,this.state.value)),t=(Yt().s[57]++,this.props.default===void 0?(Yt().b[27][0]++,""):(Yt().b[27][1]++,this.props.default));let i;return Yt().s[58]++,this.state.editingRange?(Yt().b[28][0]++,Yt().s[59]++,i=this.state.value):(Yt().b[28][1]++,Yt().s[60]++,i=e),Yt().s[61]++,te.jsxs("div",{className:"maputnik-number-container",children:[te.jsx("input",{className:"maputnik-number-range",type:"range",max:this.props.max,min:this.props.min,step:"any",spellCheck:"false",value:e===void 0?(Yt().b[29][0]++,t):(Yt().b[29][1]++,e),onChange:this.onChangeRange,onKeyDown:()=>{Yt().f[7]++,Yt().s[62]++,this._keyboardEvent=!0},onPointerDown:()=>{Yt().f[8]++,Yt().s[63]++,this.setState({editing:!0,editingRange:!0})},onPointerUp:()=>{Yt().f[9]++,Yt().s[64]++,this.setState({editing:!1,editingRange:!1})},onBlur:()=>{Yt().f[10]++,Yt().s[65]++,this.setState({editing:!1,editingRange:!1,dirtyValue:this.state.value})},"data-wd-key":this.props["data-wd-key"]+"-range"},"range"),te.jsx("input",{type:"text",spellCheck:"false",className:"maputnik-number",placeholder:this.props.default?.toString(),value:i===void 0?(Yt().b[30][0]++,""):(Yt().b[30][1]++,i),onFocus:r=>{Yt().f[11]++,Yt().s[66]++,this.setState({editing:!0})},onChange:r=>{Yt().f[12]++,Yt().s[67]++,this.changeValue(r.target.value)},onBlur:r=>{Yt().f[13]++,Yt().s[68]++,this.setState({editing:!1}),Yt().s[69]++,this.resetValue()},"data-wd-key":this.props["data-wd-key"]+"-text"},"text")]})}else{Yt().b[24][1]++;const e=(Yt().s[70]++,this.state.editing?(Yt().b[31][0]++,this.state.dirtyValue):(Yt().b[31][1]++,this.state.value));return Yt().s[71]++,te.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",className:"maputnik-number",placeholder:this.props.default?.toString(),value:e===void 0?(Yt().b[32][0]++,""):(Yt().b[32][1]++,e),onChange:t=>(Yt().f[14]++,Yt().s[72]++,this.changeValue(t.target.value)),onFocus:()=>{Yt().f[15]++,Yt().s[73]++,this.setState({editing:!0})},onBlur:this.resetValue,required:this.props.required,"data-wd-key":this.props["data-wd-key"]})}}}function Ng(){var n="/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",e="e85f7924976070cbab7795bce9cf0e191e4a6b5e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",statementMap:{0:{start:{line:4,column:24},end:{line:6,column:3}},1:{start:{line:7,column:13},end:{line:9,column:3}},2:{start:{line:8,column:4},end:{line:8,column:43}},3:{start:{line:11,column:4},end:{line:26,column:9}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:27,column:3}},line:10}},branchMap:{0:{loc:{start:{line:24,column:17},end:{line:24,column:53}},type:"cond-expr",locations:[{start:{line:24,column:36},end:{line:24,column:44}},{start:{line:24,column:47},end:{line:24,column:53}}],line:24}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx"],names:[],mappings:"AAkBW,SACL,KADK;AAlBX,OAAO,WAAW;AAQlB,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,OAAO,eAAe;AAAA,IACpB,OAAO;AAAA,EACT;AAAA,EAEA,WAAW,MAAM;AACf,SAAK,MAAM,SAAS,CAAC,KAAK,MAAM,KAAK;AAAA,EACvC;AAAA,EAEA,SAAS;AACP,WAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,MAAK;AAAA,UACL,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,KAAK;AAAA,UACf,SAAS,KAAK;AAAA,UACd,SAAS,KAAK,MAAM;AAAA;AAAA,MACtB;AAAA,MACA,oBAAC,SAAI,WAAU,yBACb,8BAAC,SAAI,OAAO;AAAA,QACV,SAAS,KAAK,MAAM,QAAQ,WAAW;AAAA,MACzC,GAAG,WAAU,0BAAyB,SAAQ,aAC5C,8BAAC,UAAK,GAAE,2CAA0C,GACpD,GACF;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e85f7924976070cbab7795bce9cf0e191e4a6b5e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ng=function(){return s},s}Ng();class _se extends On.Component{static defaultProps=(Ng().s[0]++,{value:!1});onChange=(Ng().s[1]++,()=>{Ng().f[0]++,Ng().s[2]++,this.props.onChange(!this.props.value)});render(){return Ng().f[1]++,Ng().s[3]++,te.jsxs("div",{className:"maputnik-checkbox-wrapper",children:[te.jsx("input",{className:"maputnik-checkbox",type:"checkbox",style:this.props.style,onChange:this.onChange,onClick:this.onChange,checked:this.props.value}),te.jsx("div",{className:"maputnik-checkbox-box",children:te.jsx("svg",{style:{display:this.props.value?(Ng().b[0][0]++,"inline"):(Ng().b[0][1]++,"none")},className:"maputnik-checkbox-icon",viewBox:"0 0 32 32",children:te.jsx("path",{d:"M1 14 L5 10 L13 18 L27 4 L31 8 L13 26 z"})})})]})}}function si(){var n="/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",e="9ed81d69001830f70ea45ac1502cde5125167d89",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:4},end:{line:11,column:17}},2:{start:{line:12,column:4},end:{line:16,column:6}},3:{start:{line:19,column:18},end:{line:19,column:20}},4:{start:{line:20,column:30},end:{line:20,column:62}},5:{start:{line:21,column:4},end:{line:28,column:7}},6:{start:{line:22,column:6},end:{line:27,column:7}},7:{start:{line:23,column:8},end:{line:23,column:34}},8:{start:{line:25,column:8},end:{line:25,column:34}},9:{start:{line:26,column:8},end:{line:26,column:46}},10:{start:{line:29,column:4},end:{line:32,column:6}},11:{start:{line:35,column:4},end:{line:38,column:7}},12:{start:{line:36,column:18},end:{line:36,column:26}},13:{start:{line:37,column:6},end:{line:37,column:45}},14:{start:{line:41,column:18},end:{line:41,column:43}},15:{start:{line:42,column:4},end:{line:42,column:26}},16:{start:{line:43,column:4},end:{line:51,column:7}},17:{start:{line:46,column:6},end:{line:50,column:7}},18:{start:{line:47,column:8},end:{line:47,column:35}},19:{start:{line:48,column:13},end:{line:50,column:7}},20:{start:{line:49,column:8},end:{line:49,column:36}},21:{start:{line:54,column:22},end:{line:54,column:32}},22:{start:{line:55,column:27},end:{line:57,column:6}},23:{start:{line:56,column:6},end:{line:56,column:42}},24:{start:{line:58,column:19},end:{line:84,column:6}},25:{start:{line:59,column:6},end:{line:83,column:7}},26:{start:{line:60,column:8},end:{line:70,column:10}},27:{start:{line:66,column:29},end:{line:66,column:51}},28:{start:{line:72,column:8},end:{line:82,column:10}},29:{start:{line:85,column:4},end:{line:85,column:89}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:21},end:{line:17,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:33,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:39},end:{line:21,column:40}},loc:{start:{line:21,column:49},end:{line:28,column:5}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:20},end:{line:39,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:35,column:53},end:{line:35,column:54}},loc:{start:{line:35,column:63},end:{line:38,column:5}},line:35},5:{name:"(anonymous_5)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:29},end:{line:52,column:3}},line:40},6:{name:"(anonymous_6)",decl:{start:{line:45,column:7},end:{line:45,column:8}},loc:{start:{line:45,column:13},end:{line:51,column:5}},line:45},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:86,column:3}},line:53},8:{name:"(anonymous_8)",decl:{start:{line:55,column:60},end:{line:55,column:61}},loc:{start:{line:55,column:69},end:{line:57,column:5}},line:55},9:{name:"(anonymous_9)",decl:{start:{line:58,column:59},end:{line:58,column:60}},loc:{start:{line:58,column:69},end:{line:84,column:5}},line:58},10:{name:"(anonymous_10)",decl:{start:{line:66,column:22},end:{line:66,column:23}},loc:{start:{line:66,column:29},end:{line:66,column:51}},line:66}},branchMap:{0:{loc:{start:{line:22,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:22,column:6},end:{line:27,column:7}},{start:{line:24,column:13},end:{line:27,column:7}}],line:22},1:{loc:{start:{line:37,column:15},end:{line:37,column:43}},type:"binary-expr",locations:[{start:{line:37,column:15},end:{line:37,column:29}},{start:{line:37,column:33},end:{line:37,column:43}}],line:37},2:{loc:{start:{line:46,column:6},end:{line:50,column:7}},type:"if",locations:[{start:{line:46,column:6},end:{line:50,column:7}},{start:{line:48,column:13},end:{line:50,column:7}}],line:46},3:{loc:{start:{line:46,column:10},end:{line:46,column:55}},type:"binary-expr",locations:[{start:{line:46,column:10},end:{line:46,column:32}},{start:{line:46,column:36},end:{line:46,column:55}}],line:46},4:{loc:{start:{line:48,column:13},end:{line:50,column:7}},type:"if",locations:[{start:{line:48,column:13},end:{line:50,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:55,column:27},end:{line:57,column:6}},type:"binary-expr",locations:[{start:{line:55,column:27},end:{line:55,column:43}},{start:{line:55,column:47},end:{line:57,column:6}}],line:55},6:{loc:{start:{line:56,column:13},end:{line:56,column:41}},type:"binary-expr",locations:[{start:{line:56,column:13},end:{line:56,column:23}},{start:{line:56,column:27},end:{line:56,column:41}}],line:56},7:{loc:{start:{line:59,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:59,column:6},end:{line:83,column:7}},{start:{line:71,column:13},end:{line:83,column:7}}],line:59},8:{loc:{start:{line:63,column:21},end:{line:63,column:91}},type:"cond-expr",locations:[{start:{line:63,column:61},end:{line:63,column:67}},{start:{line:63,column:70},end:{line:63,column:91}}],line:63},9:{loc:{start:{line:63,column:21},end:{line:63,column:58}},type:"binary-expr",locations:[{start:{line:63,column:21},end:{line:63,column:35}},{start:{line:63,column:39},end:{line:63,column:58}}],line:63},10:{loc:{start:{line:65,column:22},end:{line:65,column:51}},type:"cond-expr",locations:[{start:{line:65,column:39},end:{line:65,column:43}},{start:{line:65,column:46},end:{line:65,column:51}}],line:65},11:{loc:{start:{line:67,column:26},end:{line:67,column:70}},type:"binary-expr",locations:[{start:{line:67,column:26},end:{line:67,column:50}},{start:{line:67,column:54},end:{line:67,column:70}}],line:67},12:{loc:{start:{line:75,column:21},end:{line:75,column:91}},type:"cond-expr",locations:[{start:{line:75,column:61},end:{line:75,column:67}},{start:{line:75,column:70},end:{line:75,column:91}}],line:75},13:{loc:{start:{line:75,column:21},end:{line:75,column:58}},type:"binary-expr",locations:[{start:{line:75,column:21},end:{line:75,column:35}},{start:{line:75,column:39},end:{line:75,column:58}}],line:75},14:{loc:{start:{line:77,column:22},end:{line:77,column:51}},type:"cond-expr",locations:[{start:{line:77,column:39},end:{line:77,column:43}},{start:{line:77,column:46},end:{line:77,column:51}}],line:77},15:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx"],names:[],mappings:"AA0Fe;AA1Ff,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AAiBxB,qBAAqB,mBAAmB,MAAM,UAA4C;AAAA,EACxF,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,IACR,SAAS,CAAC;AAAA,EACZ;AAAA,EAEA,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA;AAAA,MAE/B,mBAAmB,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA,IAC7C;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAkC,OAAwB;AACxF,UAAM,QAAe,CAAC;AACtB,UAAM,oBAAoB,MAAM,kBAAkB,MAAM,CAAC;AAEzD,UAAM,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC3C,UAAI,MAAM,MAAM,CAAC,MAAM,MAAM,kBAAkB,CAAC,GAAG;AACjD,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MAC1B,OACK;AACH,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AACxB,0BAAkB,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MACtC;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL;AAAA,MACA;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,OAAkB;AAC3B,WAAO,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,MAAM,CAAC,GAAG,MAAM;AACzD,YAAM,MAAM,MAAM,CAAC;AACnB,aAAO,EAAE,QAAQ,UAAa,QAAQ;AAAA,IACxC,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,KAAa,UAAuC;AAC9D,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,CAAC;AACtC,UAAM,GAAG,IAAI;AAEb,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,GAAG,MAAM;AACP,UAAI,KAAK,WAAW,KAAK,KAAK,KAAK,MAAM,UAAU;AACjD,aAAK,MAAM,SAAS,KAAK;AAAA,MAC3B,WACS,KAAK,MAAM,UAAS;AAE3B,aAAK,MAAM,SAAS,MAAS;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,MAAK,IAAI,KAAK;AAErB,UAAM,iBACJ,MAAM,SAAS,KACf,CAAC,MAAM,MAAM,SAAO;AAClB,aAAQ,QAAQ,MAAM,QAAQ;AAAA,IAChC,CAAC;AAGH,UAAM,SAAS,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC/D,UAAG,KAAK,MAAM,SAAS,UAAU;AAC/B,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,CAAC,MAAM,KAAK,YAAY,GAAG,CAAC;AAAA,YACtC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF,OAAO;AACL,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF;AAAA,IACF,CAAC;AAED,WACE,oBAAC,SAAI,WAAU,kBACZ,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9ed81d69001830f70ea45ac1502cde5125167d89"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return si=function(){return s},s}si();class HR extends On.Component{static defaultProps=(si().s[0]++,{value:[],default:[]});constructor(e){si().f[0]++,si().s[1]++,super(e),si().s[2]++,this.state={value:this.props.value.slice(0),initialPropsValue:this.props.value.slice(0)}}static getDerivedStateFromProps(e,t){si().f[1]++;const i=(si().s[3]++,[]),r=(si().s[4]++,t.initialPropsValue.slice(0));return si().s[5]++,Array(e.length).fill(null).map((o,s)=>{si().f[2]++,si().s[6]++,e.value[s]===t.initialPropsValue[s]?(si().b[0][0]++,si().s[7]++,i[s]=t.value[s]):(si().b[0][1]++,si().s[8]++,i[s]=t.value[s],si().s[9]++,r[s]=t.value[s])}),si().s[10]++,{value:i,initialPropsValue:r}}isComplete(e){return si().f[3]++,si().s[11]++,Array(this.props.length).fill(null).every((t,i)=>{si().f[4]++;const r=(si().s[12]++,e[i]);return si().s[13]++,si().b[1][0]++,!(r===void 0||(si().b[1][1]++,r===""))})}changeValue(e,t){si().f[5]++;const i=(si().s[14]++,this.state.value.slice(0));si().s[15]++,i[e]=t,si().s[16]++,this.setState({value:i},()=>{si().f[6]++,si().s[17]++,si().b[3][0]++,this.isComplete(i)&&(si().b[3][1]++,this.props.onChange)?(si().b[2][0]++,si().s[18]++,this.props.onChange(i)):(si().b[2][1]++,si().s[19]++,this.props.onChange?(si().b[4][0]++,si().s[20]++,this.props.onChange(void 0)):si().b[4][1]++)})}render(){si().f[7]++;const{value:e}=(si().s[21]++,this.state),t=(si().s[22]++,si().b[5][0]++,e.length>0&&(si().b[5][1]++,!e.every(r=>(si().f[8]++,si().s[23]++,si().b[6][0]++,r===""||(si().b[6][1]++,r===void 0))))),i=(si().s[24]++,Array(this.props.length).fill(null).map((r,o)=>(si().f[9]++,si().s[25]++,this.props.type==="number"?(si().b[7][0]++,si().s[26]++,te.jsx(z1,{default:(si().b[9][0]++,t||(si().b[9][1]++,!this.props.default)?(si().b[8][0]++,void 0):(si().b[8][1]++,this.props.default[o])),value:e[o],required:t?(si().b[10][0]++,!0):(si().b[10][1]++,!1),onChange:s=>(si().f[10]++,si().s[27]++,this.changeValue(o,s)),"aria-label":(si().b[11][0]++,this.props["aria-label"]||(si().b[11][1]++,this.props.label))},o)):(si().b[7][1]++,si().s[28]++,te.jsx(zm,{default:(si().b[13][0]++,t||(si().b[13][1]++,!this.props.default)?(si().b[12][0]++,void 0):(si().b[12][1]++,this.props.default[o])),value:e[o],required:t?(si().b[14][0]++,!0):(si().b[14][1]++,!1),onChange:this.changeValue.bind(this,o),"aria-label":(si().b[15][0]++,this.props["aria-label"]||(si().b[15][1]++,this.props.label))},o)))));return si().s[29]++,te.jsx("div",{className:"maputnik-array",children:i})}}function ql(){var n="/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",e="bdd7d8430a2c43402b1b125b74a343e39aea6a6c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",statementMap:{0:{start:{line:6,column:18},end:{line:6,column:36}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:43}},3:{start:{line:8,column:35},end:{line:8,column:41}},4:{start:{line:10,column:26},end:{line:10,column:59}},5:{start:{line:11,column:19},end:{line:32,column:6}},6:{start:{line:12,column:6},end:{line:31,column:8}},7:{start:{line:22,column:34},end:{line:22,column:58}},8:{start:{line:33,column:4},end:{line:33,column:140}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:34,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:8,column:28},end:{line:8,column:29}},loc:{start:{line:8,column:35},end:{line:8,column:41}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:31},end:{line:11,column:32}},loc:{start:{line:11,column:49},end:{line:32,column:5}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:26},end:{line:22,column:27}},loc:{start:{line:22,column:34},end:{line:22,column:58}},line:22}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:7,column:8},end:{line:7,column:56}},type:"binary-expr",locations:[{start:{line:7,column:8},end:{line:7,column:26}},{start:{line:7,column:30},end:{line:7,column:56}}],line:7},2:{loc:{start:{line:10,column:26},end:{line:10,column:59}},type:"binary-expr",locations:[{start:{line:10,column:26},end:{line:10,column:42}},{start:{line:10,column:46},end:{line:10,column:59}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx"],names:[],mappings:"AAoBa,SAIL,KAJK;AApBb,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAUvB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,IACnC;AAEA,UAAM,gBAAgB,KAAK,MAAM,SAAS,QAAQ,CAAC,EAAE,CAAC;AACtD,UAAM,SAAS,QAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAK;AAC1C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,WAAW,WAAW,mBAAmB,4BAA4B,EAAC,4BAA4B,QAAQ,cAAa,CAAC;AAAA,UAExH;AAAA;AAAA,cAAC;AAAA;AAAA,gBAAM,MAAK;AAAA,gBACV,MAAM,KAAK,MAAM;AAAA,gBACjB,UAAU,QAAM,KAAK,MAAM,SAAS,GAAG;AAAA,gBACvC,OAAO;AAAA,gBACP,SAAS,QAAQ;AAAA;AAAA,YACnB;AAAA,YACC;AAAA;AAAA;AAAA,QATI;AAAA,MAUP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,cAAS,WAAU,wBAAuB,cAAY,KAAK,MAAM,YAAY,GAClF,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bdd7d8430a2c43402b1b125b74a343e39aea6a6c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ql=function(){return s},s}ql();class tDe extends On.Component{render(){ql().f[0]++;let e=(ql().s[0]++,this.props.options);ql().s[1]++,ql().b[1][0]++,e.length>0&&(ql().b[1][1]++,!Array.isArray(e[0]))?(ql().b[0][0]++,ql().s[2]++,e=e.map(r=>(ql().f[1]++,ql().s[3]++,[r,r]))):ql().b[0][1]++;const t=(ql().s[4]++,ql().b[2][0]++,this.props.value||(ql().b[2][1]++,e[0][0])),i=(ql().s[5]++,e.map(([r,o])=>(ql().f[2]++,ql().s[6]++,te.jsxs("label",{className:x0("maputnik-button","maputnik-radio-as-button",{"maputnik-button-selected":r===t}),children:[te.jsx("input",{type:"radio",name:this.props.name,onChange:s=>(ql().f[3]++,ql().s[7]++,this.props.onChange(r)),value:r,checked:r===t}),o]},r))));return ql().s[8]++,te.jsx("fieldset",{className:"maputnik-multibutton","aria-label":this.props["aria-label"],children:i})}}function Ka(){var n="/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",e="d905b5da4422f2b84d44f87b04fda3de421542f5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",statementMap:{0:{start:{line:6,column:12},end:{line:6,column:13}},1:{start:{line:7,column:2},end:{line:9,column:5}},2:{start:{line:8,column:4},end:{line:8,column:24}},3:{start:{line:10,column:2},end:{line:10,column:13}},4:{start:{line:14,column:54},end:{line:14,column:64}},5:{start:{line:15,column:4},end:{line:36,column:5}},6:{start:{line:16,column:6},end:{line:25,column:8}},7:{start:{line:27,column:6},end:{line:35,column:8}}},fnMap:{0:{name:"optionsLabelLength",decl:{start:{line:5,column:9},end:{line:5,column:27}},loc:{start:{line:5,column:37},end:{line:11,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:34},end:{line:9,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:37,column:3}},line:13}},branchMap:{0:{loc:{start:{line:15,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:36,column:5}},{start:{line:26,column:11},end:{line:36,column:5}}],line:15},1:{loc:{start:{line:15,column:8},end:{line:15,column:64}},type:"binary-expr",locations:[{start:{line:15,column:8},end:{line:15,column:27}},{start:{line:15,column:31},end:{line:15,column:64}}],line:15},2:{loc:{start:{line:21,column:17},end:{line:21,column:44}},type:"binary-expr",locations:[{start:{line:21,column:17},end:{line:21,column:22}},{start:{line:21,column:26},end:{line:21,column:44}}],line:21},3:{loc:{start:{line:23,column:24},end:{line:23,column:57}},type:"binary-expr",locations:[{start:{line:23,column:24},end:{line:23,column:48}},{start:{line:23,column:52},end:{line:23,column:57}}],line:23},4:{loc:{start:{line:31,column:17},end:{line:31,column:44}},type:"binary-expr",locations:[{start:{line:31,column:17},end:{line:31,column:22}},{start:{line:31,column:26},end:{line:31,column:44}}],line:31},5:{loc:{start:{line:33,column:24},end:{line:33,column:57}},type:"binary-expr",locations:[{start:{line:33,column:24},end:{line:33,column:48}},{start:{line:33,column:52},end:{line:33,column:57}}],line:33}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx"],names:[],mappings:"AAgCa;AAhCb,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,qBAAqB;AAG5B,SAAS,mBAAmB,SAAgB;AAC1C,MAAI,MAAM;AACV,UAAQ,QAAQ,CAAC,CAAC,GAAG,KAAK,MAAM;AAC9B,WAAO,MAAM;AAAA,EACf,CAAC;AACD,SAAO;AACT;AAgBA,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,EAAC,SAAS,OAAO,UAAU,MAAM,MAAK,IAAI,KAAK;AAErD,QAAG,QAAQ,UAAU,KAAK,mBAAmB,OAAO,KAAK,IAAI;AAC3D,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d905b5da4422f2b84d44f87b04fda3de421542f5"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ka=function(){return s},s}Ka();function nDe(n){Ka().f[0]++;let e=(Ka().s[0]++,0);return Ka().s[1]++,n.forEach(([t,i])=>{Ka().f[1]++,Ka().s[2]++,e+=i.length}),Ka().s[3]++,e}class LK extends On.Component{render(){Ka().f[2]++;const{options:e,value:t,onChange:i,name:r,label:o}=(Ka().s[4]++,this.props);return Ka().s[5]++,Ka().b[1][0]++,e.length<=3&&(Ka().b[1][1]++,nDe(e)<=20)?(Ka().b[0][0]++,Ka().s[6]++,te.jsx(tDe,{name:r,options:e,value:(Ka().b[2][0]++,t||(Ka().b[2][1]++,this.props.default)),onChange:i,"aria-label":(Ka().b[3][0]++,this.props["aria-label"]||(Ka().b[3][1]++,o))})):(Ka().b[0][1]++,Ka().s[7]++,te.jsx(zC,{options:e,value:(Ka().b[4][0]++,t||(Ka().b[4][1]++,this.props.default)),onChange:i,"aria-label":(Ka().b[5][0]++,this.props["aria-label"]||(Ka().b[5][1]++,o))}))}}function $x(){var n="/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",e="f693e5bbe9d7e0de15b6fd90f13b77a5ebfddf0e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:4},end:{line:12,column:9}},2:{start:{line:15,column:19},end:{line:15,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:13,column:3}},line:6}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,WAAW;AAClB,SAA+B,uBAAuB;AACtD,OAAO;AAOP,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAU;AACR,UAAM,IAAI,KAAK,MAAM;AACrB,WACE,qBAAC,SAAI,WAAU,cACZ;AAAA,QAAE,QAAQ;AAAA,MAAE;AAAA,MAAE,KAAK,MAAM;AAAA,OAC5B;AAAA,EAEJ;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f693e5bbe9d7e0de15b6fd90f13b77a5ebfddf0e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return $x=function(){return s},s}$x();class iDe extends On.Component{render(){$x().f[0]++;const e=($x().s[0]++,this.props.t);return $x().s[1]++,te.jsxs("div",{className:"SmallError",children:[e("Error:")," ",this.props.children]})}}const i9=($x().s[2]++,Mo()(iDe)),rDe="get_your_own_OpIi9ZULNHzrESv6T2vL",oDe="b71f7f0ba4064f5eb9e903859a9cf5c6",sDe="pk.put_your_api_key_here7bb23dffeb4",xse={openmaptiles:rDe,thunderforest:oDe,locationiq:sDe};function xn(){var n="/home/runner/work/maputnik/maputnik/src/libs/style.ts",e="16e079a55cdd4175ffeada8708d6c49d219f1229",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/style.ts",statementMap:{0:{start:{line:3,column:19},end:{line:7,column:2}},1:{start:{line:9,column:2},end:{line:9,column:52}},2:{start:{line:12,column:2},end:{line:14,column:3}},3:{start:{line:13,column:4},end:{line:13,column:28}},4:{start:{line:15,column:2},end:{line:15,column:15}},5:{start:{line:18,column:24},end:{line:22,column:4}},6:{start:{line:19,column:25},end:{line:19,column:37}},7:{start:{line:20,column:4},end:{line:20,column:36}},8:{start:{line:21,column:4},end:{line:21,column:24}},9:{start:{line:23,column:2},end:{line:26,column:4}},10:{start:{line:29,column:2},end:{line:32,column:4}},11:{start:{line:35,column:2},end:{line:35,column:69}},12:{start:{line:38,column:2},end:{line:42,column:3}},13:{start:{line:38,column:15},end:{line:38,column:16}},14:{start:{line:39,column:4},end:{line:41,column:5}},15:{start:{line:40,column:6},end:{line:40,column:15}},16:{start:{line:43,column:2},end:{line:43,column:14}},17:{start:{line:46,column:19},end:{line:46,column:42}},18:{start:{line:47,column:20},end:{line:47,column:67}},19:{start:{line:48,column:2},end:{line:50,column:3}},20:{start:{line:49,column:4},end:{line:49,column:37}},21:{start:{line:51,column:2},end:{line:51,column:21}},22:{start:{line:54,column:17},end:{line:54,column:45}},23:{start:{line:55,column:2},end:{line:55,column:31}},24:{start:{line:55,column:15},end:{line:55,column:31}},25:{start:{line:56,column:2},end:{line:56,column:57}},26:{start:{line:56,column:41},end:{line:56,column:57}},27:{start:{line:57,column:23},end:{line:57,column:33}},28:{start:{line:58,column:2},end:{line:64,column:3}},29:{start:{line:59,column:4},end:{line:59,column:37}},30:{start:{line:60,column:9},end:{line:64,column:3}},31:{start:{line:61,column:4},end:{line:61,column:30}},32:{start:{line:62,column:9},end:{line:64,column:3}},33:{start:{line:63,column:4},end:{line:63,column:34}},34:{start:{line:65,column:22},end:{line:65,column:68}},35:{start:{line:66,column:2},end:{line:68,column:3}},36:{start:{line:67,column:4},end:{line:67,column:20}},37:{start:{line:70,column:2},end:{line:74,column:3}},38:{start:{line:71,column:4},end:{line:71,column:55}},39:{start:{line:73,column:4},end:{line:73,column:57}},40:{start:{line:75,column:25},end:{line:81,column:3}},41:{start:{line:82,column:23},end:{line:85,column:3}},42:{start:{line:86,column:2},end:{line:86,column:22}},43:{start:{line:89,column:21},end:{line:89,column:29}},44:{start:{line:90,column:2},end:{line:92,column:5}},45:{start:{line:91,column:4},end:{line:91,column:76}},46:{start:{line:93,column:2},end:{line:101,column:3}},47:{start:{line:94,column:27},end:{line:94,column:73}},48:{start:{line:95,column:4},end:{line:100,column:5}},49:{start:{line:96,column:6},end:{line:99,column:8}},50:{start:{line:102,column:2},end:{line:102,column:22}},51:{start:{line:105,column:26},end:{line:107,column:3}},52:{start:{line:108,column:2},end:{line:108,column:63}},53:{start:{line:109,column:2},end:{line:109,column:64}},54:{start:{line:110,column:2},end:{line:110,column:57}},55:{start:{line:111,column:2},end:{line:111,column:61}},56:{start:{line:112,column:2},end:{line:115,column:4}}},fnMap:{0:{name:"generateId",decl:{start:{line:8,column:9},end:{line:8,column:19}},loc:{start:{line:8,column:22},end:{line:10,column:1}},line:8},1:{name:"ensureHasId",decl:{start:{line:11,column:9},end:{line:11,column:20}},loc:{start:{line:11,column:28},end:{line:16,column:1}},line:11},2:{name:"ensureHasNoInteractive",decl:{start:{line:17,column:9},end:{line:17,column:31}},loc:{start:{line:17,column:39},end:{line:27,column:1}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:18,column:41},end:{line:18,column:42}},loc:{start:{line:18,column:52},end:{line:22,column:3}},line:18},4:{name:"ensureHasNoRefs",decl:{start:{line:28,column:9},end:{line:28,column:24}},loc:{start:{line:28,column:32},end:{line:33,column:1}},line:28},5:{name:"ensureStyleValidity",decl:{start:{line:34,column:9},end:{line:34,column:28}},loc:{start:{line:34,column:36},end:{line:36,column:1}},line:34},6:{name:"indexOfLayer",decl:{start:{line:37,column:9},end:{line:37,column:21}},loc:{start:{line:37,column:39},end:{line:44,column:1}},line:37},7:{name:"getAccessToken",decl:{start:{line:45,column:9},end:{line:45,column:23}},loc:{start:{line:45,column:52},end:{line:52,column:1}},line:45},8:{name:"replaceSourceAccessToken",decl:{start:{line:53,column:9},end:{line:53,column:33}},loc:{start:{line:53,column:67},end:{line:87,column:1}},line:53},9:{name:"replaceAccessTokens",decl:{start:{line:88,column:9},end:{line:88,column:28}},loc:{start:{line:88,column:50},end:{line:103,column:1}},line:88},10:{name:"(anonymous_10)",decl:{start:{line:90,column:40},end:{line:90,column:41}},loc:{start:{line:90,column:56},end:{line:92,column:3}},line:90},11:{name:"stripAccessTokens",decl:{start:{line:104,column:9},end:{line:104,column:26}},loc:{start:{line:104,column:37},end:{line:116,column:1}},line:104}},branchMap:{0:{loc:{start:{line:12,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},1:{loc:{start:{line:12,column:6},end:{line:12,column:35}},type:"binary-expr",locations:[{start:{line:12,column:6},end:{line:12,column:22}},{start:{line:12,column:26},end:{line:12,column:35}}],line:12},2:{loc:{start:{line:39,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},3:{loc:{start:{line:46,column:19},end:{line:46,column:42}},type:"binary-expr",locations:[{start:{line:46,column:19},end:{line:46,column:36}},{start:{line:46,column:40},end:{line:46,column:42}}],line:46},4:{loc:{start:{line:48,column:2},end:{line:50,column:3}},type:"if",locations:[{start:{line:48,column:2},end:{line:50,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:48,column:6},end:{line:48,column:40}},type:"binary-expr",locations:[{start:{line:48,column:6},end:{line:48,column:24}},{start:{line:48,column:28},end:{line:48,column:40}}],line:48},6:{loc:{start:{line:53,column:56},end:{line:53,column:65}},type:"default-arg",locations:[{start:{line:53,column:63},end:{line:53,column:65}}],line:53},7:{loc:{start:{line:55,column:2},end:{line:55,column:31}},type:"if",locations:[{start:{line:55,column:2},end:{line:55,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},8:{loc:{start:{line:56,column:2},end:{line:56,column:57}},type:"if",locations:[{start:{line:56,column:2},end:{line:56,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},9:{loc:{start:{line:56,column:6},end:{line:56,column:39}},type:"binary-expr",locations:[{start:{line:56,column:6},end:{line:56,column:24}},{start:{line:56,column:28},end:{line:56,column:39}}],line:56},10:{loc:{start:{line:58,column:2},end:{line:64,column:3}},type:"if",locations:[{start:{line:58,column:2},end:{line:64,column:3}},{start:{line:60,column:9},end:{line:64,column:3}}],line:58},11:{loc:{start:{line:58,column:6},end:{line:58,column:89}},type:"binary-expr",locations:[{start:{line:58,column:6},end:{line:58,column:46}},{start:{line:58,column:50},end:{line:58,column:89}}],line:58},12:{loc:{start:{line:60,column:9},end:{line:64,column:3}},type:"if",locations:[{start:{line:60,column:9},end:{line:64,column:3}},{start:{line:62,column:9},end:{line:64,column:3}}],line:60},13:{loc:{start:{line:60,column:13},end:{line:60,column:70}},type:"binary-expr",locations:[{start:{line:60,column:13},end:{line:60,column:28}},{start:{line:60,column:32},end:{line:60,column:70}}],line:60},14:{loc:{start:{line:62,column:9},end:{line:64,column:3}},type:"if",locations:[{start:{line:62,column:9},end:{line:64,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},15:{loc:{start:{line:62,column:13},end:{line:62,column:70}},type:"binary-expr",locations:[{start:{line:62,column:13},end:{line:62,column:28}},{start:{line:62,column:32},end:{line:62,column:70}}],line:62},16:{loc:{start:{line:66,column:2},end:{line:68,column:3}},type:"if",locations:[{start:{line:66,column:2},end:{line:68,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:66},17:{loc:{start:{line:70,column:2},end:{line:74,column:3}},type:"if",locations:[{start:{line:70,column:2},end:{line:74,column:3}},{start:{line:72,column:9},end:{line:74,column:3}}],line:70},18:{loc:{start:{line:88,column:39},end:{line:88,column:48}},type:"default-arg",locations:[{start:{line:88,column:46},end:{line:88,column:48}}],line:88},19:{loc:{start:{line:93,column:2},end:{line:101,column:3}},type:"if",locations:[{start:{line:93,column:2},end:{line:101,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},20:{loc:{start:{line:93,column:6},end:{line:93,column:114}},type:"binary-expr",locations:[{start:{line:93,column:6},end:{line:93,column:21}},{start:{line:93,column:26},end:{line:93,column:69}},{start:{line:93,column:73},end:{line:93,column:113}}],line:93},21:{loc:{start:{line:95,column:4},end:{line:100,column:5}},type:"if",locations:[{start:{line:95,column:4},end:{line:100,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:95}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0],19:[0,0],20:[0,0,0],21:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/style.ts"],names:[],mappings:"AAAA,SAAQ,mBAAkB;AAE1B,OAAO,YAAY;AAInB,MAAM,aAAa,oBAAoB;AAAA,EACrC,SAAS;AAAA,EACT,SAAS,CAAC;AAAA,EACV,QAAQ,CAAC;AACX,CAAC;AAED,SAAS,aAAa;AACpB,SAAO,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,UAAU,GAAG,CAAC;AAClD;AAEA,SAAS,YAAY,OAAuE;AAC1F,MAAG,EAAE,QAAQ,UAAU,CAAC,MAAM,IAAI;AAChC,UAAM,KAAK,WAAW;AAAA,EACxB;AACA,SAAO;AACT;AAEA,SAAS,uBAAuB,OAAiC;AAC/D,QAAM,gBAAgB,MAAM,OAAO,IAAI,WAAS;AAC9C,UAAM,eAA2D,EAAE,GAAG,MAAM;AAC5E,WAAO,aAAa;AACpB,WAAO;AAAA,EACT,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ;AAAA,EACV;AACF;AAEA,SAAS,gBAAgB,OAAiC;AACxD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ,YAAY,MAAM,MAAM;AAAA,EAClC;AACF;AAEA,SAAS,oBAAoB,OAAqD;AAChF,SAAO,uBAAuB,gBAAgB,YAAY,KAAK,CAAC,CAAC;AACnE;AAEA,SAAS,aAAa,QAA8B,SAAiB;AACnE,WAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,QAAG,OAAO,CAAC,EAAE,OAAO,SAAS;AAC3B,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,eAAe,YAAoB,UAA8B,MAAiC;AACzG,QAAM,WAAW,SAAS,YAAY,CAAC;AACvC,MAAI,cAAc,SAAS,YAAY,UAAU,eAAe;AAEhE,MAAG,KAAK,iBAAiB,CAAC,aAAa;AACrC,kBAAc,OAAO,UAAiC;AAAA,EACxD;AAEA,SAAO;AACT;AAEA,SAAS,yBAAyB,UAA8B,YAAoB,OAAK,CAAC,GAAG;AAC3F,QAAM,SAAS,SAAS,QAAQ,UAAU;AAC1C,MAAG,CAAC,OAAQ,QAAO;AACnB,MAAG,EAAE,SAAS,WAAW,CAAC,OAAO,IAAK,QAAO;AAE7C,MAAI,iBAAiB;AACrB,MAAG,eAAe,6BAA6B,eAAe,0BAA0B;AACtF,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AAGpE,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AACpE,qBAAiB;AAAA,EACnB;AAEA,QAAM,cAAc,eAAe,gBAAgB,UAAU,IAAI;AAEjE,MAAG,CAAC,aAAa;AAEf,WAAO;AAAA,EACT;AAEA,MAAI;AACJ,MAAI,kBAAkB,UAAU;AAI9B,gBAAY,GAAG,OAAO,GAAG,YAAY,WAAW;AAAA,EAClD,OAAO;AACL,gBAAY,OAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,EACrD;AAEA,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,UAAU,GAAG;AAAA,MACZ,GAAG;AAAA,MACH,KAAK;AAAA,IACP;AAAA,EACF;AACA,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACA,SAAO;AACT;AAEA,SAAS,oBAAoB,UAA8B,OAAK,CAAC,GAAG;AAClE,MAAI,eAAe;AAEnB,SAAO,KAAK,SAAS,OAAO,EAAE,QAAQ,CAAC,eAAe;AACpD,mBAAe,yBAAyB,cAAc,YAAY,IAAI;AAAA,EACxE,CAAC;AAED,MAAI,SAAS,WAAW,SAAS,OAAO,MAAM,oBAAoB,KAAK,SAAS,OAAO,MAAM,iBAAiB,IAAI;AAChH,UAAM,iBAAiB,eAAe,gBAAgB,UAAU,IAAI;AACpE,QAAI,gBAAgB;AAClB,qBAAe;AAAA,QACb,GAAG;AAAA,QACH,QAAQ,SAAS,OAAO,QAAQ,SAAS,cAAc;AAAA,MACzD;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,kBAAkB,UAA8B;AACvD,QAAM,kBAAkB;AAAA,IACtB,GAAG,SAAS;AAAA,EACd;AACA,SAAO,gBAAgB,oCAAoC;AAC3D,SAAO,gBAAgB,qCAAqC;AAC5D,SAAO,gBAAgB,8BAA8B;AACrD,SAAO,gBAAgB,kCAAkC;AACzD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,UAAU;AAAA,EACZ;AACF;AAEA,eAAe;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"16e079a55cdd4175ffeada8708d6c49d219f1229"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return xn=function(){return s},s}xn();const aDe=(xn().s[0]++,wse({version:8,sources:{},layers:[]}));function Mse(){return xn().f[0]++,xn().s[1]++,Math.random().toString(36).substring(2,9)}function lDe(n){return xn().f[1]++,xn().s[2]++,xn().b[1][0]++,!("id"in n)||(xn().b[1][1]++,!n.id)?(xn().b[0][0]++,xn().s[3]++,n.id=Mse()):xn().b[0][1]++,xn().s[4]++,n}function uDe(n){xn().f[2]++;const e=(xn().s[5]++,n.layers.map(t=>{xn().f[3]++;const i=(xn().s[6]++,{...t});return xn().s[7]++,delete i.interactive,xn().s[8]++,i}));return xn().s[9]++,{...n,layers:e}}function cDe(n){return xn().f[4]++,xn().s[10]++,{...n,layers:bce(n.layers)}}function wse(n){return xn().f[5]++,xn().s[11]++,uDe(cDe(lDe(n)))}function ADe(n,e){xn().f[6]++,xn().s[12]++;for(let t=(xn().s[13]++,0);t<n.length;t++){if(xn().s[14]++,n[t].id===e)return xn().b[2][0]++,xn().s[15]++,t;xn().b[2][1]++}return xn().s[16]++,null}function UK(n,e,t){xn().f[7]++;const i=(xn().s[17]++,xn().b[3][0]++,e.metadata||(xn().b[3][1]++,{}));let r=(xn().s[18]++,i[`maputnik:${n}_access_token`]);return xn().s[19]++,xn().b[5][0]++,t.allowFallback&&(xn().b[5][1]++,!r)?(xn().b[4][0]++,xn().s[20]++,r=xse[n]):xn().b[4][1]++,xn().s[21]++,r}function hDe(n,e,t=(xn().b[6][0]++,{})){xn().f[8]++;const i=(xn().s[22]++,n.sources[e]);if(xn().s[23]++,i)xn().b[7][1]++;else return xn().b[7][0]++,xn().s[24]++,n;if(xn().s[25]++,xn().b[9][0]++,!("url"in i)||(xn().b[9][1]++,!i.url))return xn().b[8][0]++,xn().s[26]++,n;xn().b[8][1]++;let r=(xn().s[27]++,e);xn().s[28]++,xn().b[11][0]++,e==="thunderforest_transport"||(xn().b[11][1]++,e==="thunderforest_outdoors")?(xn().b[10][0]++,xn().s[29]++,r="thunderforest"):(xn().b[10][1]++,xn().s[30]++,xn().b[13][0]++,"url"in i&&(xn().b[13][1]++,i.url?.match(/\.stadiamaps\.com/))?(xn().b[12][0]++,xn().s[31]++,r="stadia"):(xn().b[12][1]++,xn().s[32]++,xn().b[15][0]++,"url"in i&&(xn().b[15][1]++,i.url?.match(/\.locationiq\.com/))?(xn().b[14][0]++,xn().s[33]++,r="locationiq"):xn().b[14][1]++));const o=(xn().s[34]++,UK(r,n,t));if(xn().s[35]++,o)xn().b[16][1]++;else return xn().b[16][0]++,xn().s[36]++,n;let s;xn().s[37]++,r=="stadia"?(xn().b[17][0]++,xn().s[38]++,s=`${i.url}?api_key=${o}`):(xn().b[17][1]++,xn().s[39]++,s=i.url.replace("{key}",o));const a=(xn().s[40]++,{...n.sources,[e]:{...i,url:s}}),c=(xn().s[41]++,{...n,sources:a});return xn().s[42]++,c}function dDe(n,e=(xn().b[18][0]++,{})){xn().f[9]++;let t=(xn().s[43]++,n);if(xn().s[44]++,Object.keys(n.sources).forEach(i=>{xn().f[10]++,xn().s[45]++,t=hDe(t,i,e)}),xn().s[46]++,xn().b[20][0]++,n.glyphs&&(xn().b[20][1]++,n.glyphs.match(/\.tilehosting\.com/)||(xn().b[20][2]++,n.glyphs.match(/\.maptiler\.com/)))){xn().b[19][0]++;const i=(xn().s[47]++,UK("openmaptiles",n,e));xn().s[48]++,i?(xn().b[21][0]++,xn().s[49]++,t={...t,glyphs:n.glyphs.replace("{key}",i)}):xn().b[21][1]++}else xn().b[19][1]++;return xn().s[50]++,t}function fDe(n){xn().f[11]++;const e=(xn().s[51]++,{...n.metadata});return xn().s[52]++,delete e["maputnik:openmaptiles_access_token"],xn().s[53]++,delete e["maputnik:thunderforest_access_token"],xn().s[54]++,delete e["maputnik:stadia_access_token"],xn().s[55]++,delete e["maputnik:locationiq_access_token"],xn().s[56]++,{...n,metadata:e}}const md={ensureStyleValidity:wse,emptyStyle:aDe,indexOfLayer:ADe,generateId:Mse,getAccessToken:UK,replaceAccessTokens:dDe,stripAccessTokens:fDe};function Ki(){var n="/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",e="37d6ae4983072a9b5167c8b858bf366d34c8f00a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",statementMap:{0:{start:{line:3,column:21},end:{line:3,column:50}},1:{start:{line:4,column:19},end:{line:4,column:55}},2:{start:{line:5,column:2},end:{line:8,column:3}},3:{start:{line:6,column:4},end:{line:6,column:44}},4:{start:{line:7,column:4},end:{line:7,column:75}},5:{start:{line:9,column:2},end:{line:9,column:18}},6:{start:{line:12,column:2},end:{line:12,column:41}},7:{start:{line:13,column:2},end:{line:23,column:3}},8:{start:{line:14,column:21},end:{line:17,column:6}},9:{start:{line:18,column:17},end:{line:18,column:38}},10:{start:{line:19,column:4},end:{line:19,column:43}},11:{start:{line:21,column:4},end:{line:21,column:63}},12:{start:{line:22,column:4},end:{line:22,column:28}},13:{start:{line:25,column:39},end:{line:31,column:19}},14:{start:{line:26,column:2},end:{line:26,column:46}},15:{start:{line:27,column:2},end:{line:27,column:74}},16:{start:{line:28,column:2},end:{line:28,column:86}},17:{start:{line:29,column:2},end:{line:29,column:56}},18:{start:{line:30,column:2},end:{line:30,column:20}},19:{start:{line:33,column:2},end:{line:40,column:3}},20:{start:{line:34,column:19},end:{line:34,column:31}},21:{start:{line:35,column:35},end:{line:35,column:41}},22:{start:{line:36,column:20},end:{line:36,column:78}},23:{start:{line:37,column:4},end:{line:37,column:33}},24:{start:{line:39,column:4},end:{line:39,column:14}},25:{start:{line:44,column:2},end:{line:46,column:3}},26:{start:{line:45,column:4},end:{line:45,column:24}},27:{start:{line:47,column:32},end:{line:47,column:52}},28:{start:{line:48,column:16},end:{line:48,column:53}},29:{start:{line:49,column:2},end:{line:51,column:3}},30:{start:{line:50,column:4},end:{line:50,column:38}},31:{start:{line:52,column:2},end:{line:54,column:3}},32:{start:{line:53,column:4},end:{line:53,column:44}},33:{start:{line:55,column:2},end:{line:57,column:3}},34:{start:{line:56,column:4},end:{line:56,column:29}},35:{start:{line:58,column:2},end:{line:58,column:22}}},fnMap:{0:{name:"getStyleUrlFromAddressbarAndRemoveItIfNeeded",decl:{start:{line:2,column:16},end:{line:2,column:60}},loc:{start:{line:2,column:63},end:{line:10,column:1}},line:2},1:{name:"loadStyleUrl",decl:{start:{line:11,column:22},end:{line:11,column:34}},loc:{start:{line:11,column:45},end:{line:24,column:1}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:25,column:40},end:{line:25,column:41}},loc:{start:{line:25,column:56},end:{line:31,column:1}},line:25},3:{name:"getProtocolSafe",decl:{start:{line:32,column:9},end:{line:32,column:24}},loc:{start:{line:32,column:30},end:{line:41,column:1}},line:32},4:{name:"validate",decl:{start:{line:43,column:16},end:{line:43,column:24}},loc:{start:{line:43,column:30},end:{line:59,column:1}},line:43}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},1:{loc:{start:{line:31,column:3},end:{line:31,column:18}},type:"binary-expr",locations:[{start:{line:31,column:3},end:{line:31,column:12}},{start:{line:31,column:16},end:{line:31,column:18}}],line:31},2:{loc:{start:{line:44,column:2},end:{line:46,column:3}},type:"if",locations:[{start:{line:44,column:2},end:{line:46,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},3:{loc:{start:{line:49,column:2},end:{line:51,column:3}},type:"if",locations:[{start:{line:49,column:2},end:{line:51,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},4:{loc:{start:{line:49,column:6},end:{line:49,column:24}},type:"binary-expr",locations:[{start:{line:49,column:6},end:{line:49,column:15}},{start:{line:49,column:19},end:{line:49,column:24}}],line:49},5:{loc:{start:{line:52,column:2},end:{line:54,column:3}},type:"if",locations:[{start:{line:52,column:2},end:{line:54,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},6:{loc:{start:{line:55,column:2},end:{line:57,column:3}},type:"if",locations:[{start:{line:55,column:2},end:{line:57,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},7:{loc:{start:{line:55,column:6},end:{line:55,column:91}},type:"binary-expr",locations:[{start:{line:55,column:6},end:{line:55,column:14}},{start:{line:55,column:18},end:{line:55,column:38}},{start:{line:55,column:42},end:{line:55,column:79}},{start:{line:55,column:83},end:{line:55,column:91}}],line:55}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts"],names:["ErrorType"],mappings:"AAAA,OAAO,WAAW;AAGX,gBAAS,+CAA8D;AAC5E,QAAM,aAAa,IAAI,IAAI,OAAO,SAAS,IAAI;AAC/C,QAAM,WAAW,WAAW,aAAa,IAAI,OAAO;AACpD,MAAI,UAAU;AACZ,eAAW,aAAa,OAAO,OAAO;AACtC,WAAO,QAAQ,aAAa,CAAC,GAAG,SAAS,OAAO,WAAW,SAAS,CAAC;AAAA,EACvE;AACA,SAAO;AACT;AAEA,sBAAsB,aAAa,UAAqD;AACtF,UAAQ,IAAI,iBAAiB,QAAQ;AACrC,MAAI;AACF,UAAM,WAAW,MAAM,MAAM,UAAU;AAAA,MACrC,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC;AACD,UAAM,OAAO,MAAM,SAAS,KAAK;AACjC,WAAO,MAAM,oBAAoB,IAAI;AAAA,EACvC,QAAQ;AACN,YAAQ,KAAK,oCAAoC,QAAQ;AACzD,WAAO,MAAM;AAAA,EACf;AACF;AAEO,WAAW,YAAX,kBAAWA,eAAX;AACL,EAAAA,sBAAA;AACA,EAAAA,sBAAA;AACA,EAAAA,sBAAA;AACA,EAAAA,sBAAA;AAJgB,SAAAA;AAAA,GAAA;AAOlB,SAAS,gBAAgB,KAAuD;AAC9E,MAAI;AACF,UAAM,SAAS,IAAI,IAAI,GAAG;AAC1B,UAAM,EAAE,UAAU,SAAS,IAAI;AAC/B,UAAM,UAAU,4CAA4C,KAAK,QAAQ;AACzE,WAAO,EAAE,UAAU,QAAQ;AAAA,EAC7B,SACO,MAAM;AACX,WAAO,CAAC;AAAA,EACV;AACF;AAAC;AAEM,gBAAS,SAAS,KAAwB;AAC/C,MAAI,QAAQ,IAAI;AACd,WAAO;AAAA,EACT;AAEA,QAAM,EAAE,UAAU,QAAQ,IAAI,gBAAgB,GAAG;AACjD,QAAM,QAAQ,OAAO,SAAS,aAAa;AAE3C,MAAI,CAAC,YAAY,OAAO;AACtB,WAAO;AAAA,EACT;AACA,MAAI,CAAC,UAAU;AACb,WAAO;AAAA,EACT;AACA,MAAI,YACF,aAAa,WACb,OAAO,SAAS,aAAa,YAC7B,CAAC,SAAS;AACV,WAAO;AAAA,EACT;AACA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"37d6ae4983072a9b5167c8b858bf366d34c8f00a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ki=function(){return s},s}Ki();function pDe(){Ki().f[0]++;const n=(Ki().s[0]++,new URL(window.location.href)),e=(Ki().s[1]++,n.searchParams.get("style"));return Ki().s[2]++,e?(Ki().b[0][0]++,Ki().s[3]++,n.searchParams.delete("style"),Ki().s[4]++,window.history.replaceState({},document.title,n.toString())):Ki().b[0][1]++,Ki().s[5]++,e}async function Sse(n){Ki().f[1]++,Ki().s[6]++,console.log("Loading style",n),Ki().s[7]++;try{const e=(Ki().s[8]++,await fetch(n,{mode:"cors",credentials:"same-origin"})),t=(Ki().s[9]++,await e.json());return Ki().s[10]++,md.ensureStyleValidity(t)}catch{return Ki().s[11]++,console.warn("Could not fetch default style: "+n),Ki().s[12]++,md.emptyStyle}}var SS=(Ki().s[13]++,(n=>(Ki().f[2]++,Ki().s[14]++,n[n.None=0]="None",Ki().s[15]++,n[n.EmptyHttpsProtocol=1]="EmptyHttpsProtocol",Ki().s[16]++,n[n.EmptyHttpOrHttpsProtocol=2]="EmptyHttpOrHttpsProtocol",Ki().s[17]++,n[n.CorsError=3]="CorsError",Ki().s[18]++,n))((Ki().b[1][0]++,SS||(Ki().b[1][1]++,{}))));function mDe(n){Ki().f[3]++,Ki().s[19]++;try{const e=(Ki().s[20]++,new URL(n)),{protocol:t,hostname:i}=(Ki().s[21]++,e),r=(Ki().s[22]++,/^(localhost|\[::1\]|127(.[0-9]{1,3}){3})/i.test(i));return Ki().s[23]++,{protocol:t,isLocal:r}}catch{return Ki().s[24]++,{}}}function r9(n){if(Ki().f[4]++,Ki().s[25]++,n==="")return Ki().b[2][0]++,Ki().s[26]++,0;Ki().b[2][1]++;const{protocol:e,isLocal:t}=(Ki().s[27]++,mDe(n)),i=(Ki().s[28]++,window.location.protocol==="https:");if(Ki().s[29]++,Ki().b[4][0]++,!e&&(Ki().b[4][1]++,i))return Ki().b[3][0]++,Ki().s[30]++,1;if(Ki().b[3][1]++,Ki().s[31]++,e)Ki().b[5][1]++;else return Ki().b[5][0]++,Ki().s[32]++,2;return Ki().s[33]++,Ki().b[7][0]++,e&&(Ki().b[7][1]++,e==="http:")&&(Ki().b[7][2]++,window.location.protocol==="https:")&&(Ki().b[7][3]++,!t)?(Ki().b[6][0]++,Ki().s[34]++,3):(Ki().b[6][1]++,Ki().s[35]++,0)}function vs(){var n="/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",e="10bb41cd0b7b737b3850572eca04f957b2d429f2",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",statementMap:{0:{start:{line:8,column:2},end:{line:29,column:3}},1:{start:{line:10,column:6},end:{line:13,column:14}},2:{start:{line:15,column:6},end:{line:20,column:14}},3:{start:{line:22,column:6},end:{line:26,column:14}},4:{start:{line:28,column:6},end:{line:28,column:20}},5:{start:{line:32,column:24},end:{line:35,column:3}},6:{start:{line:37,column:4},end:{line:37,column:17}},7:{start:{line:38,column:4},end:{line:40,column:6}},8:{start:{line:42,column:12},end:{line:47,column:3}},9:{start:{line:43,column:4},end:{line:45,column:7}},10:{start:{line:46,column:4},end:{line:46,column:52}},11:{start:{line:46,column:28},end:{line:46,column:52}},12:{start:{line:48,column:13},end:{line:53,column:3}},13:{start:{line:49,column:4},end:{line:51,column:7}},14:{start:{line:52,column:4},end:{line:52,column:29}},15:{start:{line:55,column:4},end:{line:66,column:9}},16:{start:{line:69,column:17},end:{line:69,column:52}}},fnMap:{0:{name:"errorTypeToJsx",decl:{start:{line:7,column:9},end:{line:7,column:23}},loc:{start:{line:7,column:38},end:{line:30,column:1}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:33,column:13},end:{line:33,column:14}},loc:{start:{line:33,column:19},end:{line:34,column:5}},line:33},2:{name:"(anonymous_2)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:21},end:{line:41,column:3}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:42,column:12},end:{line:42,column:13}},loc:{start:{line:42,column:21},end:{line:47,column:3}},line:42},4:{name:"(anonymous_4)",decl:{start:{line:48,column:13},end:{line:48,column:14}},loc:{start:{line:48,column:22},end:{line:53,column:3}},line:48},5:{name:"(anonymous_5)",decl:{start:{line:54,column:2},end:{line:54,column:3}},loc:{start:{line:54,column:11},end:{line:67,column:3}},line:54}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:29,column:3}},type:"switch",locations:[{start:{line:9,column:4},end:{line:13,column:14}},{start:{line:14,column:4},end:{line:20,column:14}},{start:{line:21,column:4},end:{line:26,column:14}},{start:{line:27,column:4},end:{line:28,column:20}}],line:8},1:{loc:{start:{line:46,column:4},end:{line:46,column:52}},type:"if",locations:[{start:{line:46,column:4},end:{line:46,column:52}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0,0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx"],names:[],mappings:"AAYU,SAAoC,KAApC;AAZV,OAAO,WAAyB;AAChC,OAAO,iBAAiB;AACxB,OAAO,gBAAgB;AACvB,SAAS,OAA6B,uBAAuB;AAE7D,SAAS,WAAW,gBAAgB;AAEpC,SAAS,eAAe,WAAkC,GAAuC;AAC/F,UAAQ,WAAW;AAAA,IACjB,KAAK,UAAU;AACb,aACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GAC3D;AAAA,IAEJ,KAAK,UAAU;AACb,aACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,qBAAO;AAAA,QAAO;AAAA,QAAI,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GACnF;AAAA,IAEJ,KAAK,UAAU;AACb,aACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAmF,oBAAC,UAAK,sBAAQ;AAAA,QAAO;AAAA,SAAO,GAC9H;AAAA,IAEJ;AACE,aAAO;AAAA,EACX;AACF;AAsBA,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAa,OAA8B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,SAAS,MAAM,KAAK;AAAA,IAC7B;AAAA,EACF;AAAA,EAEA,UAAU,CAAC,QAAgB;AACzB,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,GAAG;AAAA,IACrB,CAAC;AACD,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,GAAG;AAAA,EAChD;AAAA,EAEA,WAAW,CAAC,QAAgB;AAC1B,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,GAAG;AAAA,IACrB,CAAC;AACD,SAAK,MAAM,SAAS,GAAG;AAAA,EACzB;AAAA,EAEA,SAAU;AACR,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACE,GAAG,KAAK;AAAA,UACT,SAAS,KAAK;AAAA,UACd,UAAU,KAAK;AAAA,UACf,cAAY,KAAK,MAAM,YAAY;AAAA;AAAA,MACrC;AAAA,MACC,eAAe,KAAK,MAAM,OAAO,KAAK,MAAM,CAAC;AAAA,OAChD;AAAA,EAEJ;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"10bb41cd0b7b737b3850572eca04f957b2d429f2"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return vs=function(){return s},s}vs();function gDe(n,e){switch(vs().f[0]++,vs().s[0]++,n){case SS.EmptyHttpsProtocol:return vs().b[0][0]++,vs().s[1]++,te.jsx(i9,{children:te.jsxs(tC,{t:e,children:["Must provide protocol: ",te.jsx("code",{children:"https://"})]})});case SS.EmptyHttpOrHttpsProtocol:return vs().b[0][1]++,vs().s[2]++,te.jsx(i9,{children:te.jsxs(tC,{t:e,children:["Must provide protocol: ",te.jsx("code",{children:"http://"})," or ",te.jsx("code",{children:"https://"})]})});case SS.CorsError:return vs().b[0][2]++,vs().s[3]++,te.jsx(i9,{children:te.jsxs(tC,{t:e,children:["CORS policy won't allow fetching resources served over http from https, use a ",te.jsx("code",{children:"https://"})," domain"]})});default:vs().b[0][3]++,vs().s[4]++;return}}class yDe extends On.Component{static defaultProps=(vs().s[5]++,{onInput:()=>{vs().f[1]++}});constructor(e){vs().f[2]++,vs().s[6]++,super(e),vs().s[7]++,this.state={error:r9(e.value)}}onInput=(vs().s[8]++,e=>{vs().f[3]++,vs().s[9]++,this.setState({error:r9(e)}),vs().s[10]++,this.props.onInput?(vs().b[1][0]++,vs().s[11]++,this.props.onInput(e)):vs().b[1][1]++});onChange=(vs().s[12]++,e=>{vs().f[4]++,vs().s[13]++,this.setState({error:r9(e)}),vs().s[14]++,this.props.onChange(e)});render(){return vs().f[5]++,vs().s[15]++,te.jsxs("div",{children:[te.jsx(zm,{...this.props,onInput:this.onInput,onChange:this.onChange,"aria-label":this.props["aria-label"]}),gDe(this.state.error,this.props.t)]})}}const KK=(vs().s[16]++,Mo()(yDe));function jn(){var n="/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",e="705ac9c8c3dcb0aff320a53fac9b80bc280b1cbf",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",statementMap:{0:{start:{line:15,column:19},end:{line:15,column:39}},1:{start:{line:16,column:4},end:{line:16,column:27}},2:{start:{line:17,column:4},end:{line:17,column:57}},3:{start:{line:17,column:29},end:{line:17,column:57}},4:{start:{line:20,column:4},end:{line:20,column:56}},5:{start:{line:22,column:13},end:{line:38,column:3}},6:{start:{line:23,column:19},end:{line:23,column:39}},7:{start:{line:24,column:4},end:{line:36,column:5}},8:{start:{line:25,column:6},end:{line:25,column:21}},9:{start:{line:26,column:11},end:{line:36,column:5}},10:{start:{line:27,column:6},end:{line:27,column:22}},11:{start:{line:28,column:11},end:{line:36,column:5}},12:{start:{line:29,column:28},end:{line:29,column:38}},13:{start:{line:30,column:27},end:{line:30,column:59}},14:{start:{line:31,column:6},end:{line:31,column:32}},15:{start:{line:32,column:11},end:{line:36,column:5}},16:{start:{line:33,column:6},end:{line:33,column:29}},17:{start:{line:35,column:6},end:{line:35,column:22}},18:{start:{line:37,column:4},end:{line:37,column:57}},19:{start:{line:37,column:29},end:{line:37,column:57}},20:{start:{line:40,column:19},end:{line:40,column:39}},21:{start:{line:41,column:4},end:{line:41,column:31}},22:{start:{line:42,column:4},end:{line:42,column:86}},23:{start:{line:42,column:29},end:{line:42,column:86}},24:{start:{line:45,column:14},end:{line:45,column:26}},25:{start:{line:46,column:22},end:{line:46,column:77}},26:{start:{line:47,column:19},end:{line:116,column:6}},27:{start:{line:48,column:45},end:{line:54,column:7}},28:{start:{line:56,column:6},end:{line:103,column:7}},29:{start:{line:57,column:8},end:{line:64,column:10}},30:{start:{line:65,column:13},end:{line:103,column:7}},31:{start:{line:66,column:8},end:{line:73,column:10}},32:{start:{line:74,column:13},end:{line:103,column:7}},33:{start:{line:75,column:24},end:{line:75,column:99}},34:{start:{line:75,column:78},end:{line:75,column:98}},35:{start:{line:76,column:8},end:{line:84,column:10}},36:{start:{line:85,column:13},end:{line:103,column:7}},37:{start:{line:86,column:8},end:{line:93,column:10}},38:{start:{line:95,column:8},end:{line:102,column:10}},39:{start:{line:104,column:6},end:{line:115,column:8}},40:{start:{line:117,column:4},end:{line:127,column:9}},41:{start:{line:130,column:26},end:{line:130,column:70}},42:{start:{line:134,column:14},end:{line:134,column:26}},43:{start:{line:135,column:4},end:{line:148,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:29},end:{line:18,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:15},end:{line:21,column:3}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:22,column:13},end:{line:22,column:14}},loc:{start:{line:22,column:19},end:{line:38,column:3}},line:22},3:{name:"(anonymous_3)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:24},end:{line:43,column:3}},line:39},4:{name:"(anonymous_4)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:11},end:{line:128,column:3}},line:44},5:{name:"(anonymous_5)",decl:{start:{line:47,column:35},end:{line:47,column:36}},loc:{start:{line:47,column:45},end:{line:116,column:5}},line:47},6:{name:"(anonymous_6)",decl:{start:{line:75,column:70},end:{line:75,column:71}},loc:{start:{line:75,column:78},end:{line:75,column:98}},line:75},7:{name:"(anonymous_7)",decl:{start:{line:133,column:2},end:{line:133,column:3}},loc:{start:{line:133,column:11},end:{line:149,column:3}},line:133}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:17,column:57}},type:"if",locations:[{start:{line:17,column:4},end:{line:17,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:20,column:11},end:{line:20,column:55}},type:"binary-expr",locations:[{start:{line:20,column:11},end:{line:20,column:27}},{start:{line:20,column:31},end:{line:20,column:49}},{start:{line:20,column:53},end:{line:20,column:55}}],line:20},2:{loc:{start:{line:24,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:36,column:5}},{start:{line:26,column:11},end:{line:36,column:5}}],line:24},3:{loc:{start:{line:26,column:11},end:{line:36,column:5}},type:"if",locations:[{start:{line:26,column:11},end:{line:36,column:5}},{start:{line:28,column:11},end:{line:36,column:5}}],line:26},4:{loc:{start:{line:28,column:11},end:{line:36,column:5}},type:"if",locations:[{start:{line:28,column:11},end:{line:36,column:5}},{start:{line:32,column:11},end:{line:36,column:5}}],line:28},5:{loc:{start:{line:32,column:11},end:{line:36,column:5}},type:"if",locations:[{start:{line:32,column:11},end:{line:36,column:5}},{start:{line:34,column:11},end:{line:36,column:5}}],line:32},6:{loc:{start:{line:37,column:4},end:{line:37,column:57}},type:"if",locations:[{start:{line:37,column:4},end:{line:37,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},7:{loc:{start:{line:42,column:4},end:{line:42,column:86}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:86}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},8:{loc:{start:{line:42,column:49},end:{line:42,column:84}},type:"cond-expr",locations:[{start:{line:42,column:69},end:{line:42,column:75}},{start:{line:42,column:78},end:{line:42,column:84}}],line:42},9:{loc:{start:{line:56,column:6},end:{line:103,column:7}},type:"if",locations:[{start:{line:56,column:6},end:{line:103,column:7}},{start:{line:65,column:13},end:{line:103,column:7}}],line:56},10:{loc:{start:{line:62,column:26},end:{line:62,column:70}},type:"binary-expr",locations:[{start:{line:62,column:26},end:{line:62,column:50}},{start:{line:62,column:54},end:{line:62,column:70}}],line:62},11:{loc:{start:{line:65,column:13},end:{line:103,column:7}},type:"if",locations:[{start:{line:65,column:13},end:{line:103,column:7}},{start:{line:74,column:13},end:{line:103,column:7}}],line:65},12:{loc:{start:{line:71,column:26},end:{line:71,column:70}},type:"binary-expr",locations:[{start:{line:71,column:26},end:{line:71,column:50}},{start:{line:71,column:54},end:{line:71,column:70}}],line:71},13:{loc:{start:{line:74,column:13},end:{line:103,column:7}},type:"if",locations:[{start:{line:74,column:13},end:{line:103,column:7}},{start:{line:85,column:13},end:{line:103,column:7}}],line:74},14:{loc:{start:{line:82,column:26},end:{line:82,column:70}},type:"binary-expr",locations:[{start:{line:82,column:26},end:{line:82,column:50}},{start:{line:82,column:54},end:{line:82,column:70}}],line:82},15:{loc:{start:{line:85,column:13},end:{line:103,column:7}},type:"if",locations:[{start:{line:85,column:13},end:{line:103,column:7}},{start:{line:94,column:13},end:{line:103,column:7}}],line:85},16:{loc:{start:{line:91,column:26},end:{line:91,column:70}},type:"binary-expr",locations:[{start:{line:91,column:26},end:{line:91,column:50}},{start:{line:91,column:54},end:{line:91,column:70}}],line:91},17:{loc:{start:{line:100,column:26},end:{line:100,column:70}},type:"binary-expr",locations:[{start:{line:100,column:26},end:{line:100,column:50}},{start:{line:100,column:54},end:{line:100,column:70}}],line:100}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx"],names:["v"],mappings:"AAwE4B,cA2Cf,YA3Ce;AAxE5B,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAEtD,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,cAAc;AACrB,OAAO,gBAAgB;AAkBvB,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,YAAY,KAAa,UAAuC;AAC9D,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,GAAG,IAAI;AACd,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAAA,EACpD;AAAA,EAEA,WAAW,MAAM;AACf,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,QAAI,KAAK,MAAM,SAAS,UAAU;AAChC,aAAO,KAAK,CAAC;AAAA,IACf,WACS,KAAK,MAAM,SAAS,OAAO;AAClC,aAAO,KAAK,EAAE;AAAA,IAChB,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,YAAM,EAAC,UAAS,IAAI,KAAK;AACzB,YAAM,eAAe,OAAO,KAAK,UAAW,MAAM,EAAE,CAAC;AACrD,aAAO,KAAK,YAAY;AAAA,IAC1B,WAAW,KAAK,MAAM,SAAS,SAAS;AACtC,aAAO,KAAK,SAAS;AAAA,IACvB,OAAO;AACL,aAAO,KAAK,EAAE;AAAA,IAChB;AAEA,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,YAAY,UAAkB;AAC5B,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,OAAO,UAAU,CAAC;AAEzB,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,OAAO,SAAS,IAAI,SAAS,MAAS;AAAA,EACrF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,YAAY,EAAE,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAO;AACxE,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,GAAG,MAAM;AACvC,YAAM,iBAAgB;AAAA,QAAC;AAAA;AAAA,UACrB,SAAS,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,UACrC,GAAG;AAAA;AAAA,MACN;AACA,UAAI;AACJ,UAAG,KAAK,MAAM,SAAS,OAAO;AAC5B,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,UAAU;AACrC,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,WAAW,MAAM,EAAE,IAAI,CAAAA,OAAK,CAACA,IAAG,WAAWA,EAAC,CAAC,CAAC;AACrF,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP;AAAA,YACA,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,SAAS;AACpC,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,OACK;AACH,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF;AAEA,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,OAAO,KAAK,MAAM;AAAA,UAElB,WAAU;AAAA,UAEV;AAAA,gCAAC,SAAI,WAAU,+BACZ,0BACH;AAAA,YACA,oBAAC,SAAI,WAAU,gCACZ,iBACH;AAAA;AAAA;AAAA,QARK;AAAA,MASP;AAAA,IACF,CAAC;AAED,WACE,qBAAC,SAAI,WAAU,kBACZ;AAAA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UAEb,YAAE,WAAW;AAAA;AAAA,MAChB;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;AAMf,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,mBAAmB;AAAA,QAE5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,oBAAC,YAAS;AAAA;AAAA,QACnB;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"705ac9c8c3dcb0aff320a53fac9b80bc280b1cbf"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return jn=function(){return s},s}jn();class vDe extends On.Component{changeValue(e,t){jn().f[0]++;const i=(jn().s[0]++,this.values.slice(0));jn().s[1]++,i[e]=t,jn().s[2]++,this.props.onChange?(jn().b[0][0]++,jn().s[3]++,this.props.onChange(i)):jn().b[0][1]++}get values(){return jn().f[1]++,jn().s[4]++,jn().b[1][0]++,this.props.value||(jn().b[1][1]++,this.props.default)||(jn().b[1][2]++,[])}addValue=(jn().s[5]++,()=>{jn().f[2]++;const e=(jn().s[6]++,this.values.slice(0));if(jn().s[7]++,this.props.type==="number")jn().b[2][0]++,jn().s[8]++,e.push(0);else if(jn().b[2][1]++,jn().s[9]++,this.props.type==="url")jn().b[3][0]++,jn().s[10]++,e.push("");else if(jn().b[3][1]++,jn().s[11]++,this.props.type==="enum"){jn().b[4][0]++;const{fieldSpec:t}=(jn().s[12]++,this.props),i=(jn().s[13]++,Object.keys(t.values)[0]);jn().s[14]++,e.push(i)}else jn().b[4][1]++,jn().s[15]++,this.props.type==="color"?(jn().b[5][0]++,jn().s[16]++,e.push("#000000")):(jn().b[5][1]++,jn().s[17]++,e.push(""));jn().s[18]++,this.props.onChange?(jn().b[6][0]++,jn().s[19]++,this.props.onChange(e)):jn().b[6][1]++});deleteValue(e){jn().f[3]++;const t=(jn().s[20]++,this.values.slice(0));jn().s[21]++,t.splice(e,1),jn().s[22]++,this.props.onChange?(jn().b[7][0]++,jn().s[23]++,this.props.onChange(t.length>0?(jn().b[8][0]++,t):(jn().b[8][1]++,void 0))):jn().b[7][1]++}render(){jn().f[4]++;const e=(jn().s[24]++,this.props.t),t=(jn().s[25]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),i=(jn().s[26]++,this.values.map((r,o)=>{jn().f[5]++;const s=(jn().s[27]++,te.jsx(bDe,{onClick:this.deleteValue.bind(this,o),...t}));let a;if(jn().s[28]++,this.props.type==="url")jn().b[9][0]++,jn().s[29]++,a=te.jsx(KK,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":(jn().b[10][0]++,this.props["aria-label"]||(jn().b[10][1]++,this.props.label))});else if(jn().b[9][1]++,jn().s[30]++,this.props.type==="number")jn().b[11][0]++,jn().s[31]++,a=te.jsx(z1,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":(jn().b[12][0]++,this.props["aria-label"]||(jn().b[12][1]++,this.props.label))});else if(jn().b[11][1]++,jn().s[32]++,this.props.type==="enum"){jn().b[13][0]++;const c=(jn().s[33]++,Object.keys(this.props.fieldSpec?.values).map(f=>(jn().f[6]++,jn().s[34]++,[f,gK(f)])));jn().s[35]++,a=te.jsx(LK,{options:c,value:r,onChange:this.changeValue.bind(this,o),"aria-label":(jn().b[14][0]++,this.props["aria-label"]||(jn().b[14][1]++,this.props.label))})}else jn().b[13][1]++,jn().s[36]++,this.props.type==="color"?(jn().b[15][0]++,jn().s[37]++,a=te.jsx(PK,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":(jn().b[16][0]++,this.props["aria-label"]||(jn().b[16][1]++,this.props.label))})):(jn().b[15][1]++,jn().s[38]++,a=te.jsx(zm,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":(jn().b[17][0]++,this.props["aria-label"]||(jn().b[17][1]++,this.props.label))}));return jn().s[39]++,te.jsxs("div",{style:this.props.style,className:"maputnik-array-block",children:[te.jsx("div",{className:"maputnik-array-block-action",children:s}),te.jsx("div",{className:"maputnik-array-block-content",children:a})]},o)}));return jn().s[40]++,te.jsxs("div",{className:"maputnik-array",children:[i,te.jsx(Ds,{className:"maputnik-array-add-value",onClick:this.addValue,children:e("Add value")})]})}}const ES=(jn().s[41]++,Mo()(vDe));class bDe extends On.Component{render(){jn().f[7]++;const e=(jn().s[42]++,this.props.t);return jn().s[43]++,te.jsx(Ds,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove array item"),children:te.jsx(UU,{label:te.jsx(TC,{})})})}}function ys(){var n="/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",e="cd16dc68fc42c219caf080518fd74984d4f8d81e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:9,column:16},end:{line:9,column:60}},2:{start:{line:10,column:4},end:{line:14,column:5}},3:{start:{line:11,column:6},end:{line:11,column:28}},4:{start:{line:13,column:6},end:{line:13,column:17}},5:{start:{line:17,column:26},end:{line:17,column:46}},6:{start:{line:18,column:4},end:{line:18,column:34}},7:{start:{line:19,column:27},end:{line:19,column:92}},8:{start:{line:19,column:55},end:{line:19,column:67}},9:{start:{line:19,column:83},end:{line:19,column:91}},10:{start:{line:20,column:4},end:{line:20,column:40}},11:{start:{line:23,column:19},end:{line:39,column:6}},12:{start:{line:24,column:6},end:{line:38,column:8}},13:{start:{line:32,column:52},end:{line:32,column:58}},14:{start:{line:40,column:4},end:{line:40,column:87}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:15,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:28},end:{line:21,column:3}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:48},end:{line:19,column:49}},loc:{start:{line:19,column:55},end:{line:19,column:67}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:76},end:{line:19,column:77}},loc:{start:{line:19,column:83},end:{line:19,column:91}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:41,column:3}},line:22},5:{name:"(anonymous_5)",decl:{start:{line:23,column:35},end:{line:23,column:36}},loc:{start:{line:23,column:49},end:{line:39,column:5}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:32,column:45},end:{line:32,column:46}},loc:{start:{line:32,column:52},end:{line:32,column:58}},line:32}},branchMap:{0:{loc:{start:{line:9,column:16},end:{line:9,column:60}},type:"binary-expr",locations:[{start:{line:9,column:16},end:{line:9,column:32}},{start:{line:9,column:36},end:{line:9,column:54}},{start:{line:9,column:58},end:{line:9,column:60}}],line:9},1:{loc:{start:{line:10,column:4},end:{line:14,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:14,column:5}},{start:{line:12,column:11},end:{line:14,column:5}}],line:10},2:{loc:{start:{line:30,column:28},end:{line:30,column:71}},type:"binary-expr",locations:[{start:{line:30,column:28},end:{line:30,column:52}},{start:{line:30,column:56},end:{line:30,column:71}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx"],names:[],mappings:"AA6CQ;AA7CR,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAY9B,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,EACV;AAAA,EAEA,IAAI,SAAS;AACX,UAAM,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAGvD,QAAI,IAAI,IAAI,SAAO,CAAC,MAAM,IAAG;AAC3B,aAAO,IAAI,OAAO,EAAE;AAAA,IACtB,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,WAAW,KAAa,UAAkB;AACxC,UAAM,gBAAgB,KAAK,OAAO,MAAM,CAAC;AACzC,kBAAc,GAAG,IAAI;AACrB,UAAM,iBAAiB,cACpB,OAAO,OAAK,MAAM,MAAS,EAC3B,OAAO,OAAK,MAAM,EAAE;AAEvB,SAAK,MAAM,SAAS,cAAc;AAAA,EACpC;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,OAAO,MAAM;AAC3C,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA,cACnD;AAAA,cACA,SAAS,KAAK,MAAM,OAAO,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,cAC1C,UAAU,KAAK,WAAW,KAAK,MAAM,CAAC;AAAA;AAAA,UACxC;AAAA;AAAA,QAPK;AAAA,MAQP;AAAA,IACF,CAAC;AAED,WACE,oBAAC,QAAG,WAAU,iBACX,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cd16dc68fc42c219caf080518fd74984d4f8d81e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ys=function(){return s},s}ys();class CDe extends On.Component{static defaultProps=(ys().s[0]++,{fonts:[]});get values(){ys().f[0]++;const e=(ys().s[1]++,ys().b[0][0]++,this.props.value||(ys().b[0][1]++,this.props.default)||(ys().b[0][2]++,[]));return ys().s[2]++,e[e.length-1]!==""?(ys().b[1][0]++,ys().s[3]++,e.concat("")):(ys().b[1][1]++,ys().s[4]++,e)}changeFont(e,t){ys().f[1]++;const i=(ys().s[5]++,this.values.slice(0));ys().s[6]++,i[e]=t;const r=(ys().s[7]++,i.filter(o=>(ys().f[2]++,ys().s[8]++,o!==void 0)).filter(o=>(ys().f[3]++,ys().s[9]++,o!=="")));ys().s[10]++,this.props.onChange(r)}render(){ys().f[4]++;const e=(ys().s[11]++,this.values.map((t,i)=>(ys().f[5]++,ys().s[12]++,te.jsx("li",{children:te.jsx(_5,{"aria-label":(ys().b[2][0]++,this.props["aria-label"]||(ys().b[2][1]++,this.props.name)),value:t,options:this.props.fonts?.map(r=>(ys().f[6]++,ys().s[13]++,[r,r])),onChange:this.changeFont.bind(this,i)})},i))));return ys().s[14]++,te.jsx("ul",{className:"maputnik-font",children:e})}}function Pi(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",e="123acbe81166b3a98d021f01f94ef258a8456edf",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",statementMap:{0:{start:{line:13,column:23},end:{line:13,column:117}},1:{start:{line:16,column:24},end:{line:27,column:5}},2:{start:{line:25,column:30},end:{line:25,column:81}},3:{start:{line:28,column:4},end:{line:145,column:5}},4:{start:{line:30,column:8},end:{line:37,column:10}},5:{start:{line:39,column:24},end:{line:39,column:101}},6:{start:{line:39,column:82},end:{line:39,column:100}},7:{start:{line:40,column:8},end:{line:46,column:10}},8:{start:{line:51,column:8},end:{line:67,column:9}},9:{start:{line:52,column:26},end:{line:52,column:59}},10:{start:{line:53,column:10},end:{line:59,column:12}},11:{start:{line:57,column:42},end:{line:57,column:48}},12:{start:{line:61,column:10},end:{line:66,column:12}},13:{start:{line:69,column:8},end:{line:74,column:10}},14:{start:{line:76,column:8},end:{line:81,column:10}},15:{start:{line:83,column:8},end:{line:111,column:9}},16:{start:{line:84,column:10},end:{line:90,column:12}},17:{start:{line:92,column:10},end:{line:110,column:11}},18:{start:{line:93,column:12},end:{line:100,column:14}},19:{start:{line:102,column:12},end:{line:109,column:14}},20:{start:{line:113,column:8},end:{line:121,column:10}},21:{start:{line:123,column:8},end:{line:131,column:10}},22:{start:{line:133,column:8},end:{line:141,column:10}},23:{start:{line:143,column:8},end:{line:143,column:110}},24:{start:{line:144,column:8},end:{line:144,column:20}},25:{start:{line:148,column:4},end:{line:148,column:124}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:15},end:{line:146,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:25,column:16},end:{line:25,column:17}},loc:{start:{line:25,column:30},end:{line:25,column:81}},line:25},2:{name:"(anonymous_2)",decl:{start:{line:39,column:75},end:{line:39,column:76}},loc:{start:{line:39,column:82},end:{line:39,column:100}},line:39},3:{name:"(anonymous_3)",decl:{start:{line:57,column:35},end:{line:57,column:36}},loc:{start:{line:57,column:42},end:{line:57,column:48}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:147,column:2},end:{line:147,column:3}},loc:{start:{line:147,column:11},end:{line:149,column:3}},line:147}},branchMap:{0:{loc:{start:{line:28,column:4},end:{line:145,column:5}},type:"switch",locations:[{start:{line:29,column:6},end:{line:37,column:10}},{start:{line:38,column:6},end:{line:47,column:7}},{start:{line:48,column:6},end:{line:48,column:27}},{start:{line:49,column:6},end:{line:49,column:23}},{start:{line:50,column:6},end:{line:67,column:9}},{start:{line:68,column:6},end:{line:74,column:10}},{start:{line:75,column:6},end:{line:81,column:10}},{start:{line:82,column:6},end:{line:111,column:9}},{start:{line:112,column:6},end:{line:121,column:10}},{start:{line:122,column:6},end:{line:131,column:10}},{start:{line:132,column:6},end:{line:141,column:10}},{start:{line:142,column:6},end:{line:144,column:20}}],line:28},1:{loc:{start:{line:39,column:36},end:{line:39,column:69}},type:"binary-expr",locations:[{start:{line:39,column:36},end:{line:39,column:63}},{start:{line:39,column:67},end:{line:39,column:69}}],line:39},2:{loc:{start:{line:51,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:51,column:8},end:{line:67,column:9}},{start:{line:60,column:15},end:{line:67,column:9}}],line:51},3:{loc:{start:{line:52,column:26},end:{line:52,column:59}},type:"binary-expr",locations:[{start:{line:52,column:26},end:{line:52,column:53}},{start:{line:52,column:57},end:{line:52,column:59}}],line:52},4:{loc:{start:{line:83,column:8},end:{line:111,column:9}},type:"if",locations:[{start:{line:83,column:8},end:{line:111,column:9}},{start:{line:91,column:15},end:{line:111,column:9}}],line:83},5:{loc:{start:{line:92,column:10},end:{line:110,column:11}},type:"if",locations:[{start:{line:92,column:10},end:{line:110,column:11}},{start:{line:101,column:17},end:{line:110,column:11}}],line:92},6:{loc:{start:{line:119,column:19},end:{line:119,column:90}},type:"cond-expr",locations:[{start:{line:119,column:53},end:{line:119,column:69}},{start:{line:119,column:72},end:{line:119,column:90}}],line:119},7:{loc:{start:{line:129,column:19},end:{line:129,column:90}},type:"cond-expr",locations:[{start:{line:129,column:53},end:{line:129,column:69}},{start:{line:129,column:72},end:{line:129,column:90}}],line:129},8:{loc:{start:{line:138,column:19},end:{line:138,column:90}},type:"cond-expr",locations:[{start:{line:138,column:53},end:{line:138,column:69}},{start:{line:138,column:72},end:{line:138,column:90}}],line:138}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0,0,0,0,0,0,0,0,0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx"],names:[],mappings:"AAyDQ;AAzDR,OAAO,WAAkC;AAEzC,OAAO,gBAA0C;AACjD,OAAO,iBAA4C;AACnD,OAAO,mBAAgD;AACvD,OAAO,iBAA4C;AACnD,OAAO,gBAA0C;AACjD,OAAO,uBAAwD;AAC/D,OAAO,eAAwC;AAC/C,OAAO,uBAAwD;AAC/D,OAAO,eAAwC;AAC/C,OAAO,gBAAgB;AAEvB,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AA2BpH,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EAErE,aAAa;AACX,UAAM,cAAc;AAAA,MAClB,WAAW,KAAK,MAAM;AAAA,MACtB,OAAO,KAAK,MAAM;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,SAAS,KAAK,MAAM,WAAW;AAAA,MAC/B,MAAM,KAAK,MAAM;AAAA,MACjB,eAAe,sBAAsB,KAAK,MAAM;AAAA,MAChD,UAAU,CAAC,aAAmE,KAAK,MAAM,SAAU,KAAK,MAAM,WAAW,QAAQ;AAAA,MACjI,cAAc,KAAK,MAAM,YAAY;AAAA,IACvC;AACA,YAAO,KAAK,MAAM,WAAW,MAAM;AAAA,MACjC,KAAK;AAAU,eACb;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,KAAK,KAAK,MAAM,UAAU;AAAA,YAC1B,KAAK,KAAK,MAAM,UAAU;AAAA;AAAA,QAC5B;AAAA,MAEF,KAAK,QAAQ;AACX,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,UAAU,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAE1F,eAAO;AAAA,UAAC;AAAA;AAAA,YACL,GAAG;AAAA,YACJ;AAAA;AAAA,QACF;AAAA,MACF;AAAA,MACA,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,YAAI,eAAe,QAAQ,KAAK,MAAM,SAAU,KAAK,GAAG;AACtD,gBAAM,UAAU,KAAK,MAAM,UAAU,UAAU,CAAC;AAChD,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,SAAS,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,UAClC;AAAA,QACF,OAAO;AACL,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA;AAAA,UACN;AAAA,QACF;AAAA,MACF,KAAK;AAAS,eACZ;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AAAW,eACd;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AACH,YAAG,KAAK,MAAM,cAAc,aAAa;AACvC,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,OAAO,KAAK,MAAM,UAAU;AAAA;AAAA,UAC9B;AAAA,QACF,OAAO;AACL,cAAI,KAAK,MAAM,UAAU,QAAQ;AAC/B,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,MAAM,KAAK,MAAM,UAAU;AAAA,gBAC3B,QAAQ,KAAK,MAAM,UAAU;AAAA;AAAA,YAC/B;AAAA,UACF,OAAO;AACL,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,WAAW,KAAK,MAAM;AAAA,gBACtB,MAAM,KAAK,MAAM,UAAU;AAAA;AAAA,YAC7B;AAAA,UACF;AAAA,QACF;AAAA,MACF,KAAK;AAAe,eAClB;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,WAAW,KAAK,MAAM;AAAA,YACtB,MAAK;AAAA,YACL,OAAQ,MAAM,QAAQ,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,QAAQ,CAAC,KAAK,MAAM,KAAK;AAAA;AAAA,QAChF;AAAA,MAEF,KAAK;AAAc,eACjB;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,WAAW,KAAK,MAAM;AAAA,YACtB,MAAK;AAAA,YACL,OAAQ,MAAM,QAAQ,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,QAAQ,CAAC,KAAK,MAAM,KAAK;AAAA;AAAA,QAChF;AAAA,MAEF,KAAK;AAAW,eACd;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,MAAK;AAAA,YACL,OAAQ,MAAM,QAAQ,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,QAAQ,CAAC,KAAK,MAAM,KAAK;AAAA,YAC9E,QAAQ;AAAA;AAAA,QACV;AAAA,MAEF;AACE,gBAAQ,KAAK,6BAA6B,KAAK,MAAM,SAAS,UAAU,KAAK,MAAM,WAAW,IAAI,EAAE;AACpG,eAAO;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WACE,oBAAC,SAAI,eAAa,gBAAc,KAAK,MAAM,WACxC,eAAK,WAAW,GACnB;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"123acbe81166b3a98d021f01f94ef258a8456edf"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Pi=function(){return s},s}Pi();const _De=(Pi().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);class Hx extends On.Component{childNodes(){Pi().f[0]++;const e=(Pi().s[1]++,{fieldSpec:this.props.fieldSpec,label:this.props.label,action:this.props.action,style:this.props.style,value:this.props.value,default:this.props.fieldSpec?.default,name:this.props.fieldName,"data-wd-key":"spec-field-input:"+this.props.fieldName,onChange:t=>(Pi().f[1]++,Pi().s[2]++,this.props.onChange(this.props.fieldName,t)),"aria-label":this.props["aria-label"]});switch(Pi().s[3]++,this.props.fieldSpec?.type){case"number":return Pi().b[0][0]++,Pi().s[4]++,te.jsx(z1,{...e,min:this.props.fieldSpec.minimum,max:this.props.fieldSpec.maximum});case"enum":Pi().b[0][1]++;{const t=(Pi().s[5]++,Object.keys((Pi().b[1][0]++,this.props.fieldSpec.values||(Pi().b[1][1]++,[]))).map(i=>(Pi().f[2]++,Pi().s[6]++,[i,gK(i)])));return Pi().s[7]++,te.jsx(LK,{...e,options:t})}case"resolvedImage":Pi().b[0][2]++;case"formatted":Pi().b[0][3]++;case"string":if(Pi().b[0][4]++,Pi().s[8]++,_De.indexOf(this.props.fieldName)>=0){Pi().b[2][0]++;const t=(Pi().s[9]++,Pi().b[3][0]++,this.props.fieldSpec.values||(Pi().b[3][1]++,[]));return Pi().s[10]++,te.jsx(_5,{...e,options:t.map(i=>(Pi().f[3]++,Pi().s[11]++,[i,i]))})}else return Pi().b[2][1]++,Pi().s[12]++,te.jsx(zm,{...e});case"color":return Pi().b[0][5]++,Pi().s[13]++,te.jsx(PK,{...e});case"boolean":return Pi().b[0][6]++,Pi().s[14]++,te.jsx(_se,{...e});case"array":return Pi().b[0][7]++,Pi().s[15]++,this.props.fieldName==="text-font"?(Pi().b[4][0]++,Pi().s[16]++,te.jsx(CDe,{...e,fonts:this.props.fieldSpec.values})):(Pi().b[4][1]++,Pi().s[17]++,this.props.fieldSpec.length?(Pi().b[5][0]++,Pi().s[18]++,te.jsx(HR,{...e,type:this.props.fieldSpec.value,length:this.props.fieldSpec.length})):(Pi().b[5][1]++,Pi().s[19]++,te.jsx(ES,{...e,fieldSpec:this.props.fieldSpec,type:this.props.fieldSpec.value})));case"numberArray":return Pi().b[0][8]++,Pi().s[20]++,te.jsx(ES,{...e,fieldSpec:this.props.fieldSpec,type:"number",value:Array.isArray(this.props.value)?(Pi().b[6][0]++,this.props.value):(Pi().b[6][1]++,[this.props.value])});case"colorArray":return Pi().b[0][9]++,Pi().s[21]++,te.jsx(ES,{...e,fieldSpec:this.props.fieldSpec,type:"color",value:Array.isArray(this.props.value)?(Pi().b[7][0]++,this.props.value):(Pi().b[7][1]++,[this.props.value])});case"padding":return Pi().b[0][10]++,Pi().s[22]++,te.jsx(HR,{...e,type:"number",value:Array.isArray(this.props.value)?(Pi().b[8][0]++,this.props.value):(Pi().b[8][1]++,[this.props.value]),length:4});default:return Pi().b[0][11]++,Pi().s[23]++,console.warn(`No proper field input for ${this.props.fieldName} type: ${this.props.fieldSpec?.type}`),Pi().s[24]++,null}}render(){return Pi().f[4]++,Pi().s[25]++,te.jsx("div",{"data-wd-key":"spec-field:"+this.props.fieldName,children:this.childNodes()})}}function Cc(){var n="/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",e="92ea2bb9889070368abe40f809481200c126aae8",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",statementMap:{0:{start:{line:7,column:17},end:{line:30,column:1}},1:{start:{line:8,column:32},end:{line:8,column:53}},2:{start:{line:9,column:18},end:{line:9,column:67}},3:{start:{line:10,column:22},end:{line:12,column:3}},4:{start:{line:11,column:4},end:{line:11,column:20}},5:{start:{line:13,column:2},end:{line:29,column:7}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:17},end:{line:7,column:18}},loc:{start:{line:7,column:28},end:{line:30,column:1}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:22},end:{line:10,column:23}},loc:{start:{line:10,column:31},end:{line:12,column:3}},line:10}},branchMap:{0:{loc:{start:{line:14,column:4},end:{line:21,column:8}},type:"binary-expr",locations:[{start:{line:14,column:4},end:{line:14,column:19}},{start:{line:14,column:39},end:{line:21,column:8}}],line:14},1:{loc:{start:{line:22,column:4},end:{line:25,column:32}},type:"binary-expr",locations:[{start:{line:22,column:4},end:{line:22,column:20}},{start:{line:22,column:40},end:{line:25,column:32}}],line:22},2:{loc:{start:{line:28,column:4},end:{line:28,column:198}},type:"binary-expr",locations:[{start:{line:28,column:4},end:{line:28,column:19}},{start:{line:28,column:39},end:{line:28,column:198}}],line:28},3:{loc:{start:{line:28,column:104},end:{line:28,column:125}},type:"cond-expr",locations:[{start:{line:28,column:114},end:{line:28,column:116}},{start:{line:28,column:119},end:{line:28,column:125}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx"],names:[],mappings:"AAuBI,SAGM,KAHN;AAvBJ,OAAO,WAA0D;AACjE,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAChB,OAAO,sBAAsB;AAU7B,MAAM,WAAoC,CAAC,UAAU;AACnD,QAAM,CAAC,SAAS,UAAU,IAAI,MAAM,SAAS,KAAK;AAClD,QAAM,UAAU,MAAM,OAAO,iBAAiB,iBAAiB,CAAC;AAEhE,QAAM,cAAc,CAAC,QAAiB;AACpC,eAAW,GAAG;AAAA,EAChB;AAEA,SACE,qBAAC,SAAI,WAAU,wBAAuB,MAAK,SAAQ,mBAAiB,QAAQ,SACzE;AAAA,UAAM,aACL,oBAAC,SAAI,WAAU,8BACb;AAAA,MAAC;AAAA;AAAA,QACC,OAAO,MAAM;AAAA,QACb;AAAA,QACA,WAAW,MAAM;AAAA;AAAA,IACnB,GACF;AAAA,IAED,CAAC,MAAM,aACN,oBAAC,SAAI,WAAW,WAAW;AAAA,MACzB,8BAA8B;AAAA,MAC9B,+BAA+B,MAAM;AAAA,IACvC,CAAC,GACE,gBAAM,OACT;AAAA,IAEF,oBAAC,SAAI,WAAU,+BAA+B,gBAAM,QAAO;AAAA,IAC3D,oBAAC,SAAI,WAAU,gCAAgC,gBAAM,UAAS;AAAA,IAC7D,MAAM,aACL,oBAAC,SAAI,WAAU,uBAAsB,OAAO,EAAE,SAAS,UAAU,KAAK,OAAO,GAC3E,8BAAC,OAAI,WAAW,MAAM,WAAW,GACnC;AAAA,KAEJ;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"92ea2bb9889070368abe40f809481200c126aae8"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Cc=function(){return s},s}Cc();Cc().s[0]++;const nv=n=>{Cc().f[0]++;const[e,t]=(Cc().s[1]++,On.useState(!1)),i=(Cc().s[2]++,On.useRef(C2("fieldset_label_")));Cc().s[3]++;const r=o=>{Cc().f[1]++,Cc().s[4]++,t(o)};return Cc().s[5]++,te.jsxs("div",{className:"maputnik-input-block",role:"group","aria-labelledby":i.current,children:[(Cc().b[0][0]++,n.fieldSpec&&(Cc().b[0][1]++,te.jsx("div",{className:"maputnik-input-block-label",children:te.jsx(UU,{label:n.label,onToggleDoc:r,fieldSpec:n.fieldSpec})}))),(Cc().b[1][0]++,!n.fieldSpec&&(Cc().b[1][1]++,te.jsx("div",{className:x0({"maputnik-input-block-label":!0,"maputnik-input-block--error":n.error}),children:n.label}))),te.jsx("div",{className:"maputnik-input-block-action",children:n.action}),te.jsx("div",{className:"maputnik-input-block-content",children:n.children}),(Cc().b[2][0]++,n.fieldSpec&&(Cc().b[2][1]++,te.jsx("div",{className:"maputnik-doc-inline",style:{display:e?(Cc().b[3][0]++,""):(Cc().b[3][1]++,"none")},children:te.jsx(EB,{fieldSpec:n.fieldSpec})})))]})};function go(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx",e="93d4690989e2b2b09b13eab9ee3382c32a103823",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx",statementMap:{0:{start:{line:6,column:2},end:{line:34,column:3}},1:{start:{line:8,column:6},end:{line:8,column:19}},2:{start:{line:10,column:6},end:{line:10,column:74}},3:{start:{line:12,column:6},end:{line:12,column:19}},4:{start:{line:14,column:6},end:{line:14,column:22}},5:{start:{line:16,column:6},end:{line:16,column:19}},6:{start:{line:18,column:6},end:{line:18,column:19}},7:{start:{line:20,column:6},end:{line:20,column:19}},8:{start:{line:22,column:6},end:{line:22,column:19}},9:{start:{line:24,column:6},end:{line:24,column:19}},10:{start:{line:26,column:6},end:{line:26,column:22}},11:{start:{line:28,column:6},end:{line:28,column:22}},12:{start:{line:30,column:6},end:{line:30,column:22}},13:{start:{line:32,column:6},end:{line:32,column:58}},14:{start:{line:33,column:6},end:{line:33,column:19}},15:{start:{line:36,column:18},end:{line:39,column:1}},16:{start:{line:37,column:20},end:{line:37,column:55}},17:{start:{line:38,column:2},end:{line:38,column:190}}},fnMap:{0:{name:"getElementFromType",decl:{start:{line:5,column:9},end:{line:5,column:27}},loc:{start:{line:5,column:39},end:{line:35,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:36,column:18},end:{line:36,column:19}},loc:{start:{line:36,column:29},end:{line:39,column:1}},line:36}},branchMap:{0:{loc:{start:{line:6,column:2},end:{line:34,column:3}},type:"switch",locations:[{start:{line:7,column:4},end:{line:8,column:19}},{start:{line:9,column:4},end:{line:10,column:74}},{start:{line:11,column:4},end:{line:12,column:19}},{start:{line:13,column:4},end:{line:14,column:22}},{start:{line:15,column:4},end:{line:16,column:19}},{start:{line:17,column:4},end:{line:18,column:19}},{start:{line:19,column:4},end:{line:20,column:19}},{start:{line:21,column:4},end:{line:22,column:19}},{start:{line:23,column:4},end:{line:24,column:19}},{start:{line:25,column:4},end:{line:26,column:22}},{start:{line:27,column:4},end:{line:28,column:22}},{start:{line:29,column:4},end:{line:30,column:22}},{start:{line:31,column:4},end:{line:33,column:19}}],line:6},1:{loc:{start:{line:10,column:13},end:{line:10,column:73}},type:"cond-expr",locations:[{start:{line:10,column:57},end:{line:10,column:65}},{start:{line:10,column:68},end:{line:10,column:73}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0},f:{0:0,1:0},b:{0:[0,0,0,0,0,0,0,0,0,0,0,0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx"],names:[],mappings:"AA2CM;AA3CN,OAAO,WAAgC;AACvC,OAAO,eAA4D;AACnE,OAAO,cAAsC;AAE7C,SAAS,mBAAmB,WAAyF;AACnH,UAAO,UAAU,MAAM;AAAA,IACrB,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAQ,OAAO,KAAK,UAAU,MAAO,EAAE,UAAU,IAAI,WAAW;AAAA,IAClE,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT;AACE,cAAQ,KAAK,uBAAuB,UAAU,IAAI;AAClD,aAAO;AAAA,EACX;AACF;AAIA,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,YAAY,mBAAmB,MAAM,SAAU;AAErD,SACE,oBAAC,aAAU,OAAO,MAAM,OAAO,QAAQ,MAAM,QAAQ,WAAW,MAAM,WAAW,OAAO,MAAM,OAC5F,8BAAC,aAAW,GAAG,OAAO,GACxB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"93d4690989e2b2b09b13eab9ee3382c32a103823"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return go=function(){return s},s}go();function xDe(n){switch(go().f[0]++,go().s[0]++,n.type){case"color":return go().b[0][0]++,go().s[1]++,as;case"enum":return go().b[0][1]++,go().s[2]++,Object.keys(n.values).length<=3?(go().b[1][0]++,nv):(go().b[1][1]++,as);case"boolean":return go().b[0][2]++,go().s[3]++,as;case"array":return go().b[0][3]++,go().s[4]++,nv;case"resolvedImage":return go().b[0][4]++,go().s[5]++,as;case"number":return go().b[0][5]++,go().s[6]++,as;case"string":return go().b[0][6]++,go().s[7]++,as;case"formatted":return go().b[0][7]++,go().s[8]++,as;case"padding":return go().b[0][8]++,go().s[9]++,as;case"numberArray":return go().b[0][9]++,go().s[10]++,nv;case"colorArray":return go().b[0][10]++,go().s[11]++,nv;case"variableAnchorOffsetCollection":return go().b[0][11]++,go().s[12]++,nv;default:return go().b[0][12]++,go().s[13]++,console.warn("No such type for: "+n.type),go().s[14]++,as}}go().s[15]++;const MDe=n=>{go().f[1]++;const e=(go().s[16]++,xDe(n.fieldSpec));return go().s[17]++,te.jsx(e,{label:n.label,action:n.action,fieldSpec:n.fieldSpec,error:n.error,children:te.jsx(Hx,{...n})})};function Yl(){var n="/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",e="8e77c8fbe0fbc5796ba925837fc7526418b4854b",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:10,column:4},end:{line:60,column:5}},2:{start:{line:11,column:52},end:{line:19,column:7}},3:{start:{line:20,column:50},end:{line:28,column:7}},4:{start:{line:30,column:6},end:{line:40,column:7}},5:{start:{line:31,column:8},end:{line:39,column:10}},6:{start:{line:41,column:6},end:{line:45,column:11}},7:{start:{line:46,column:11},end:{line:60,column:5}},8:{start:{line:47,column:51},end:{line:56,column:7}},9:{start:{line:57,column:6},end:{line:57,column:76}},10:{start:{line:59,column:6},end:{line:59,column:44}},11:{start:{line:63,column:29},end:{line:63,column:76}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:61,column:3}},line:8}},branchMap:{0:{loc:{start:{line:10,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:60,column:5}},{start:{line:46,column:11},end:{line:60,column:5}}],line:10},1:{loc:{start:{line:30,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:30,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:30},2:{loc:{start:{line:46,column:11},end:{line:60,column:5}},type:"if",locations:[{start:{line:46,column:11},end:{line:60,column:5}},{start:{line:58,column:11},end:{line:60,column:5}}],line:46}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx"],names:[],mappings:"AA0BU,cAsBG,YAtBH;AA1BV,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,aAAa,qBAAoB;AACzC,SAAS,sBAAsB;AAC/B,SAA+B,uBAAuB;AAUtD,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,QAAI,KAAK,MAAM,UAAU,YAAY,WAAW,SAAS,MAAM,GAAG;AAChE,YAAM,wBACJ;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uBAAuB;AAAA,UAEhC,8BAAC,kBAAe;AAAA;AAAA,MAClB;AAGF,YAAM,sBAAsB;AAAA,QAAC;AAAA;AAAA,UAC3B,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uCAAuC;AAAA,UAEhD,8BAAC,eAAY;AAAA;AAAA,MACf;AAEA,UAAI;AACJ,UAAI,KAAK,MAAM,UAAU,eAAe,MAAM,eAAe;AAC3D,8BAAsB;AAAA,UAAC;AAAA;AAAA,YACrB,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,OAAO,EAAE,mCAAmC;AAAA,YAE5C,8BAAC,iBAAc;AAAA;AAAA,QACjB;AAAA,MACF;AACA,aAAO,qBAAC,SACL;AAAA;AAAA,QACA;AAAA,QACA;AAAA,SACH;AAAA,IACF,WAAW,KAAK,MAAM,UAAU,YAAY,WAAW,SAAS,WAAW,GAAG;AAC5E,YAAM,uBAAuB;AAAA,QAAC;AAAA;AAAA,UAC5B,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,4CAA4C;AAAA,UACrD,eAAY;AAAA,UAEZ,8BAAC,eAAY;AAAA;AAAA,MACf;AACA,aAAO,oBAAC,SAAK,gCAAqB;AAAA,IACpC,OAAO;AACL,aAAO,oBAAC,SAAI;AAAA,IACd;AAAA,EACF;AACF;AAEA,MAAM,uBAAuB,gBAAgB,EAAE,4BAA4B;AAC3E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8e77c8fbe0fbc5796ba925837fc7526418b4854b"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Yl=function(){return s},s}Yl();class wDe extends On.Component{render(){Yl().f[0]++;const e=(Yl().s[0]++,this.props.t);if(Yl().s[1]++,this.props.fieldSpec.expression?.parameters.includes("zoom")){Yl().b[0][0]++;const t=(Yl().s[2]++,te.jsx(Ds,{className:"maputnik-make-zoom-function",onClick:this.props.onExpressionClick,title:e("Convert to expression"),children:te.jsx(wM,{})})),i=(Yl().s[3]++,te.jsx(Ds,{className:"maputnik-make-zoom-function",onClick:this.props.onZoomClick,title:e("Convert property into a zoom function"),children:te.jsx(gz,{})}));let r;return Yl().s[4]++,this.props.fieldSpec["property-type"]==="data-driven"?(Yl().b[1][0]++,Yl().s[5]++,r=te.jsx(Ds,{className:"maputnik-make-data-function",onClick:this.props.onDataClick,title:e("Convert property to data function"),children:te.jsx(dfe,{})})):Yl().b[1][1]++,Yl().s[6]++,te.jsxs("div",{children:[t,r,i]})}else if(Yl().b[0][1]++,Yl().s[7]++,this.props.fieldSpec.expression?.parameters.includes("elevation")){Yl().b[2][0]++;const t=(Yl().s[8]++,te.jsx(Ds,{className:"maputnik-make-elevation-function",onClick:this.props.onElevationClick,title:e("Convert property into a elevation function"),"data-wd-key":"make-elevation-function",children:te.jsx(gz,{})}));return Yl().s[9]++,te.jsx("div",{children:t})}else return Yl().b[2][1]++,Yl().s[10]++,te.jsx("div",{})}}const SDe=(Yl().s[11]++,Mo()(wDe));function Gg(){var n="/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",e="3e6c7200aa37e60f3f49ecaa91bce3a63befeb7e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",statementMap:{0:{start:{line:7,column:24},end:{line:9,column:3}},1:{start:{line:11,column:45},end:{line:11,column:55}},2:{start:{line:12,column:40},end:{line:21,column:5}},3:{start:{line:22,column:18},end:{line:22,column:53}},4:{start:{line:23,column:4},end:{line:32,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:33,column:3}},line:10}},branchMap:{0:{loc:{start:{line:29,column:34},end:{line:29,column:60}},type:"binary-expr",locations:[{start:{line:29,column:34},end:{line:29,column:54}},{start:{line:29,column:58},end:{line:29,column:60}}],line:29}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx"],names:[],mappings:"AA6BwB;AA7BxB,OAAO,WAAW;AAElB,OAAO,eAAsC;AAC7C,OAAO,qBAAqB;AAE5B,OAAO,wBAAwB;AAgB/B,qBAAqB,qBAAqB,MAAM,UAA6B;AAAA,EAC3E,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,WAAW,UAAS,IAAI,KAAK;AAE5C,UAAM,cAAc;AAAA,MAAC;AAAA;AAAA,QACnB,WAAW,KAAK,MAAM;AAAA,QACtB,aAAa,KAAK,MAAM;AAAA,QACxB,aAAa,KAAK,MAAM;AAAA,QACxB,mBAAmB,KAAK,MAAM;AAAA,QAC9B,kBAAkB,KAAK,MAAM;AAAA;AAAA,IAC/B;AAEA,UAAM,QAAQ,OAAQ,YAAU,MAAI,SAAgB;AAEpD,WAAO;AAAA,MAAC;AAAA;AAAA,QACL,GAAG,KAAK;AAAA,QACT;AAAA,QACA,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,mBAAmB,KAAK,MAAM,aAAa,EAAE;AAAA,QACpD,QAAQ;AAAA;AAAA,IACV;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3e6c7200aa37e60f3f49ecaa91bce3a63befeb7e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Gg=function(){return s},s}Gg();class EDe extends On.Component{static defaultProps=(Gg().s[0]++,{errors:{}});render(){Gg().f[0]++;const{errors:e,fieldName:t,fieldType:i}=(Gg().s[1]++,this.props),r=(Gg().s[2]++,te.jsx(SDe,{fieldSpec:this.props.fieldSpec,onZoomClick:this.props.onZoomClick,onDataClick:this.props.onDataClick,onExpressionClick:this.props.onExpressionClick,onElevationClick:this.props.onElevationClick})),o=(Gg().s[3]++,e[i+"."+t]);return Gg().s[4]++,te.jsx(MDe,{...this.props,error:o,fieldSpec:this.props.fieldSpec,label:KB((Gg().b[0][0]++,this.props.fieldName||(Gg().b[0][1]++,""))),action:r})}}function od(){var n="/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",e="e8906f642b33ab7d7a780fc0db870f7e4872d29c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",statementMap:{0:{start:{line:2,column:12},end:{line:2,column:17}},1:{start:{line:3,column:12},end:{line:3,column:17}},2:{start:{line:4,column:2},end:{line:10,column:3}},3:{start:{line:5,column:4},end:{line:5,column:14}},4:{start:{line:6,column:9},end:{line:10,column:3}},5:{start:{line:7,column:4},end:{line:7,column:13}},6:{start:{line:9,column:4},end:{line:9,column:13}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:15},end:{line:1,column:16}},loc:{start:{line:1,column:36},end:{line:11,column:1}},line:1}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:10,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:10,column:3}},{start:{line:6,column:9},end:{line:10,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:10,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:10,column:3}},{start:{line:8,column:9},end:{line:10,column:3}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts"],names:[],mappings:"AAAA,wBAAwB,MAAuB,MAAsB;AACnE,QAAM,IAAI,CAAC;AACX,QAAM,IAAI,CAAC;AAEX,MAAG,IAAI,GAAG;AACR,WAAO;AAAA,EACT,WACQ,IAAI,GAAG;AACb,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e8906f642b33ab7d7a780fc0db870f7e4872d29c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return od=function(){return s},s}od();function Ese(n,e){od().f[0]++;const t=(od().s[0]++,+n),i=(od().s[1]++,+e);return od().s[2]++,t<i?(od().b[0][0]++,od().s[3]++,-1):(od().b[0][1]++,od().s[4]++,t>i?(od().b[1][0]++,od().s[5]++,1):(od().b[1][1]++,od().s[6]++,0))}function Cm(){var n="/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",e="2f98128f0f990b67a049c58486c1fab4310fbcfa",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",statementMap:{0:{start:{line:2,column:2},end:{line:4,column:3}},1:{start:{line:3,column:4},end:{line:3,column:24}},2:{start:{line:5,column:19},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:12,column:35}}},fnMap:{0:{name:"findDefaultFromSpec",decl:{start:{line:1,column:16},end:{line:1,column:35}},loc:{start:{line:1,column:42},end:{line:13,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:2},end:{line:4,column:3}},type:"if",locations:[{start:{line:2,column:2},end:{line:4,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:2},1:{loc:{start:{line:12,column:9},end:{line:12,column:34}},type:"binary-expr",locations:[{start:{line:12,column:9},end:{line:12,column:28}},{start:{line:12,column:32},end:{line:12,column:34}}],line:12}},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts"],names:[],mappings:"AAGO,gBAAS,oBAAoB,MAAyE;AAC3G,MAAI,OAAO,UAAU,eAAe,KAAK,MAAM,SAAS,GAAG;AACzD,WAAO,KAAK;AAAA,EACd;AAEA,QAAM,WAAW;AAAA,IACf,SAAS;AAAA,IACT,UAAU;AAAA,IACV,WAAW;AAAA,IACX,UAAU;AAAA,IACV,SAAS,CAAC;AAAA,EACZ;AAEA,SAAO,SAAS,KAAK,IAAI,KAAK;AAChC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f98128f0f990b67a049c58486c1fab4310fbcfa"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Cm=function(){return s},s}Cm();function op(n){if(Cm().f[0]++,Cm().s[0]++,Object.prototype.hasOwnProperty.call(n,"default"))return Cm().b[0][0]++,Cm().s[1]++,n.default;Cm().b[0][1]++;const e=(Cm().s[2]++,{color:"#000000",string:"",boolean:!1,number:0,array:[]});return Cm().s[3]++,Cm().b[1][0]++,e[n.type]||(Cm().b[1][1]++,"")}function Zx(){var n="/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",e="03de18cded5f486201afd886787bbdda710eafe3",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:17,column:6}},2:{start:{line:20,column:25},end:{line:20,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:18,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAQtD,MAAM,iCAAiC,MAAM,UAAyC;AAAA,EACpF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,6BAA6B;AAAA,QAEtC,8BAAC,YAAS;AAAA;AAAA,IACZ;AAAA,EACF;AACF;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"03de18cded5f486201afd886787bbdda710eafe3"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Zx=function(){return s},s}Zx();class BDe extends On.Component{render(){Zx().f[0]++;const e=(Zx().s[0]++,this.props.t);return Zx().s[1]++,te.jsx(Ds,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove zoom level from stop"),children:te.jsx(TC,{})})}}const Bse=(Zx().s[2]++,Mo()(BDe));function qt(){var n="/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",e="a1f2034e8330e69a4f4de946d81cea8ff55472f7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",statementMap:{0:{start:{line:20,column:2},end:{line:29,column:3}},1:{start:{line:21,column:4},end:{line:28,column:7}},2:{start:{line:22,column:6},end:{line:27,column:7}},3:{start:{line:23,column:8},end:{line:25,column:9}},4:{start:{line:24,column:10},end:{line:24,column:33}},5:{start:{line:26,column:8},end:{line:26,column:39}},6:{start:{line:30,column:2},end:{line:30,column:17}},7:{start:{line:33,column:10},end:{line:35,column:3}},8:{start:{line:37,column:20},end:{line:37,column:55}},9:{start:{line:38,column:4},end:{line:42,column:5}},10:{start:{line:39,column:6},end:{line:41,column:9}},11:{start:{line:45,column:20},end:{line:45,column:45}},12:{start:{line:46,column:4},end:{line:50,column:5}},13:{start:{line:47,column:6},end:{line:49,column:8}},14:{start:{line:51,column:4},end:{line:51,column:16}},15:{start:{line:54,column:4},end:{line:56,column:5}},16:{start:{line:55,column:6},end:{line:55,column:27}},17:{start:{line:57,column:4},end:{line:59,column:5}},18:{start:{line:58,column:6},end:{line:58,column:24}},19:{start:{line:60,column:4},end:{line:60,column:25}},20:{start:{line:63,column:4},end:{line:67,column:5}},21:{start:{line:64,column:6},end:{line:64,column:83}},22:{start:{line:66,column:6},end:{line:66,column:53}},23:{start:{line:71,column:26},end:{line:76,column:70}},24:{start:{line:72,column:6},end:{line:75,column:8}},25:{start:{line:76,column:22},end:{line:76,column:69}},26:{start:{line:77,column:20},end:{line:77,column:22}},27:{start:{line:78,column:4},end:{line:80,column:7}},28:{start:{line:79,column:6},end:{line:79,column:30}},29:{start:{line:81,column:4},end:{line:83,column:7}},30:{start:{line:84,column:4},end:{line:84,column:50}},31:{start:{line:84,column:39},end:{line:84,column:48}},32:{start:{line:86,column:13},end:{line:106,column:3}},33:{start:{line:87,column:4},end:{line:104,column:5}},34:{start:{line:88,column:6},end:{line:91,column:8}},35:{start:{line:93,column:24},end:{line:93,column:61}},36:{start:{line:94,column:6},end:{line:103,column:8}},37:{start:{line:105,column:4},end:{line:105,column:42}},38:{start:{line:108,column:18},end:{line:108,column:56}},39:{start:{line:109,column:4},end:{line:115,column:6}},40:{start:{line:116,column:25},end:{line:116,column:53}},41:{start:{line:117,column:25},end:{line:120,column:5}},42:{start:{line:121,column:4},end:{line:121,column:54}},43:{start:{line:124,column:25},end:{line:127,column:5}},44:{start:{line:128,column:4},end:{line:130,column:5}},45:{start:{line:129,column:6},end:{line:129,column:34}},46:{start:{line:131,column:4},end:{line:131,column:60}},47:{start:{line:134,column:4},end:{line:141,column:5}},48:{start:{line:135,column:6},end:{line:135,column:42}},49:{start:{line:137,column:6},end:{line:140,column:9}},50:{start:{line:144,column:4},end:{line:148,column:5}},51:{start:{line:145,column:6},end:{line:145,column:43}},52:{start:{line:147,column:6},end:{line:147,column:40}},53:{start:{line:149,column:4},end:{line:149,column:58}},54:{start:{line:152,column:14},end:{line:152,column:26}},55:{start:{line:153,column:4},end:{line:155,column:5}},56:{start:{line:154,column:6},end:{line:154,column:78}},57:{start:{line:157,column:4},end:{line:205,column:5}},58:{start:{line:158,column:6},end:{line:204,column:9}},59:{start:{line:159,column:26},end:{line:159,column:77}},60:{start:{line:160,column:20},end:{line:160,column:40}},61:{start:{line:161,column:26},end:{line:161,column:79}},62:{start:{line:162,column:22},end:{line:162,column:29}},63:{start:{line:163,column:46},end:{line:163,column:122}},64:{start:{line:164,column:26},end:{line:169,column:9}},65:{start:{line:168,column:33},end:{line:168,column:97}},66:{start:{line:171,column:8},end:{line:175,column:9}},67:{start:{line:172,column:10},end:{line:172,column:73}},68:{start:{line:174,column:10},end:{line:174,column:73}},69:{start:{line:176,column:24},end:{line:176,column:28}},70:{start:{line:177,column:8},end:{line:188,column:9}},71:{start:{line:178,column:10},end:{line:187,column:15}},72:{start:{line:183,column:37},end:{line:183,column:101}},73:{start:{line:189,column:8},end:{line:203,column:18}},74:{start:{line:199,column:41},end:{line:199,column:110}},75:{start:{line:206,column:4},end:{line:306,column:12}},76:{start:{line:217,column:39},end:{line:217,column:67}},77:{start:{line:235,column:43},end:{line:235,column:68}},78:{start:{line:250,column:39},end:{line:250,column:83}},79:{start:{line:266,column:42},end:{line:266,column:85}},80:{start:{line:309,column:21},end:{line:309,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:18,column:9},end:{line:18,column:20}},loc:{start:{line:18,column:35},end:{line:31,column:1}},line:18},1:{name:"(anonymous_1)",decl:{start:{line:21,column:30},end:{line:21,column:31}},loc:{start:{line:21,column:45},end:{line:28,column:5}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:22},end:{line:43,column:3}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:48},end:{line:52,column:3}},line:44},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:34},end:{line:61,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:62,column:2},end:{line:62,column:3}},loc:{start:{line:62,column:34},end:{line:68,column:3}},line:62},6:{name:"(anonymous_6)",decl:{start:{line:70,column:2},end:{line:70,column:3}},loc:{start:{line:70,column:26},end:{line:85,column:3}},line:70},7:{name:"(anonymous_7)",decl:{start:{line:71,column:36},end:{line:71,column:37}},loc:{start:{line:71,column:51},end:{line:76,column:5}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:76,column:12},end:{line:76,column:13}},loc:{start:{line:76,column:22},end:{line:76,column:69}},line:76},9:{name:"(anonymous_9)",decl:{start:{line:78,column:26},end:{line:78,column:27}},loc:{start:{line:78,column:41},end:{line:80,column:5}},line:78},10:{name:"(anonymous_10)",decl:{start:{line:84,column:29},end:{line:84,column:30}},loc:{start:{line:84,column:39},end:{line:84,column:48}},line:84},11:{name:"(anonymous_11)",decl:{start:{line:86,column:13},end:{line:86,column:14}},loc:{start:{line:86,column:35},end:{line:106,column:3}},line:86},12:{name:"(anonymous_12)",decl:{start:{line:107,column:2},end:{line:107,column:3}},loc:{start:{line:107,column:41},end:{line:122,column:3}},line:107},13:{name:"(anonymous_13)",decl:{start:{line:123,column:2},end:{line:123,column:3}},loc:{start:{line:123,column:23},end:{line:132,column:3}},line:123},14:{name:"(anonymous_14)",decl:{start:{line:133,column:2},end:{line:133,column:3}},loc:{start:{line:133,column:26},end:{line:142,column:3}},line:133},15:{name:"(anonymous_15)",decl:{start:{line:143,column:2},end:{line:143,column:3}},loc:{start:{line:143,column:40},end:{line:150,column:3}},line:143},16:{name:"(anonymous_16)",decl:{start:{line:151,column:2},end:{line:151,column:3}},loc:{start:{line:151,column:11},end:{line:307,column:3}},line:151},17:{name:"(anonymous_17)",decl:{start:{line:158,column:46},end:{line:158,column:47}},loc:{start:{line:158,column:61},end:{line:204,column:7}},line:158},18:{name:"(anonymous_18)",decl:{start:{line:168,column:20},end:{line:168,column:21}},loc:{start:{line:168,column:33},end:{line:168,column:97}},line:168},19:{name:"(anonymous_19)",decl:{start:{line:183,column:24},end:{line:183,column:25}},loc:{start:{line:183,column:37},end:{line:183,column:101}},line:183},20:{name:"(anonymous_20)",decl:{start:{line:199,column:24},end:{line:199,column:25}},loc:{start:{line:199,column:41},end:{line:199,column:110}},line:199},21:{name:"(anonymous_21)",decl:{start:{line:217,column:26},end:{line:217,column:27}},loc:{start:{line:217,column:39},end:{line:217,column:67}},line:217},22:{name:"(anonymous_22)",decl:{start:{line:235,column:26},end:{line:235,column:27}},loc:{start:{line:235,column:43},end:{line:235,column:68}},line:235},23:{name:"(anonymous_23)",decl:{start:{line:250,column:26},end:{line:250,column:27}},loc:{start:{line:250,column:39},end:{line:250,column:83}},line:250},24:{name:"(anonymous_24)",decl:{start:{line:266,column:26},end:{line:266,column:27}},loc:{start:{line:266,column:42},end:{line:266,column:85}},line:266}},branchMap:{0:{loc:{start:{line:20,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:20,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},1:{loc:{start:{line:20,column:6},end:{line:20,column:38}},type:"binary-expr",locations:[{start:{line:20,column:6},end:{line:20,column:17}},{start:{line:20,column:21},end:{line:20,column:38}}],line:20},2:{loc:{start:{line:22,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:22,column:6},end:{line:27,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},3:{loc:{start:{line:23,column:8},end:{line:25,column:9}},type:"if",locations:[{start:{line:23,column:8},end:{line:25,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},4:{loc:{start:{line:38,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:38,column:4},end:{line:42,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},5:{loc:{start:{line:46,column:4},end:{line:50,column:5}},type:"if",locations:[{start:{line:46,column:4},end:{line:50,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},6:{loc:{start:{line:54,column:4},end:{line:56,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:56,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},7:{loc:{start:{line:57,column:4},end:{line:59,column:5}},type:"if",locations:[{start:{line:57,column:4},end:{line:59,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},8:{loc:{start:{line:63,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:63,column:4},end:{line:67,column:5}},{start:{line:65,column:11},end:{line:67,column:5}}],line:63},9:{loc:{start:{line:87,column:4},end:{line:104,column:5}},type:"if",locations:[{start:{line:87,column:4},end:{line:104,column:5}},{start:{line:92,column:11},end:{line:104,column:5}}],line:87},10:{loc:{start:{line:93,column:24},end:{line:93,column:61}},type:"cond-expr",locations:[{start:{line:93,column:55},end:{line:93,column:57}},{start:{line:93,column:60},end:{line:93,column:61}}],line:93},11:{loc:{start:{line:108,column:18},end:{line:108,column:56}},type:"binary-expr",locations:[{start:{line:108,column:18},end:{line:108,column:50}},{start:{line:108,column:54},end:{line:108,column:56}}],line:108},12:{loc:{start:{line:112,column:14},end:{line:112,column:58}},type:"cond-expr",locations:[{start:{line:112,column:41},end:{line:112,column:42}},{start:{line:112,column:45},end:{line:112,column:58}}],line:112},13:{loc:{start:{line:128,column:4},end:{line:130,column:5}},type:"if",locations:[{start:{line:128,column:4},end:{line:130,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:128},14:{loc:{start:{line:134,column:4},end:{line:141,column:5}},type:"if",locations:[{start:{line:134,column:4},end:{line:141,column:5}},{start:{line:136,column:11},end:{line:141,column:5}}],line:134},15:{loc:{start:{line:134,column:8},end:{line:134,column:70}},type:"binary-expr",locations:[{start:{line:134,column:8},end:{line:134,column:33}},{start:{line:134,column:37},end:{line:134,column:70}}],line:134},16:{loc:{start:{line:144,column:4},end:{line:148,column:5}},type:"if",locations:[{start:{line:144,column:4},end:{line:148,column:5}},{start:{line:146,column:11},end:{line:148,column:5}}],line:144},17:{loc:{start:{line:153,column:4},end:{line:155,column:5}},type:"if",locations:[{start:{line:153,column:4},end:{line:155,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:153},18:{loc:{start:{line:157,column:4},end:{line:205,column:5}},type:"if",locations:[{start:{line:157,column:4},end:{line:205,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:157},19:{loc:{start:{line:159,column:26},end:{line:159,column:77}},type:"cond-expr",locations:[{start:{line:159,column:56},end:{line:159,column:68}},{start:{line:159,column:71},end:{line:159,column:77}}],line:159},20:{loc:{start:{line:161,column:26},end:{line:161,column:79}},type:"cond-expr",locations:[{start:{line:161,column:56},end:{line:161,column:69}},{start:{line:161,column:72},end:{line:161,column:79}}],line:161},21:{loc:{start:{line:171,column:8},end:{line:175,column:9}},type:"if",locations:[{start:{line:171,column:8},end:{line:175,column:9}},{start:{line:173,column:15},end:{line:175,column:9}}],line:171},22:{loc:{start:{line:177,column:8},end:{line:188,column:9}},type:"if",locations:[{start:{line:177,column:8},end:{line:188,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:177},23:{loc:{start:{line:225,column:8},end:{line:240,column:9}},type:"binary-expr",locations:[{start:{line:225,column:8},end:{line:225,column:45}},{start:{line:225,column:65},end:{line:240,column:9}}],line:225},24:{loc:{start:{line:256,column:8},end:{line:271,column:9}},type:"binary-expr",locations:[{start:{line:256,column:8},end:{line:256,column:18}},{start:{line:256,column:38},end:{line:271,column:9}}],line:256},25:{loc:{start:{line:272,column:8},end:{line:280,column:15}},type:"binary-expr",locations:[{start:{line:272,column:8},end:{line:272,column:18}},{start:{line:272,column:38},end:{line:280,column:15}}],line:272},26:{loc:{start:{line:282,column:10},end:{line:292,column:11}},type:"binary-expr",locations:[{start:{line:282,column:10},end:{line:282,column:20}},{start:{line:282,column:40},end:{line:292,column:11}}],line:282}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx"],names:[],mappings:"AAuO8B,cA8Bf,YA9Be;AAvO9B,OAAO,WAAW;AAClB,SAAQ,sBAAqB;AAC7B,SAAQ,sBAAqB;AAC7B,OAAO,YAAY;AAEnB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAC5B,SAAQ,2BAA0B;AAClC,SAA+B,uBAAuB;AAEtD,OAAO,wBAAwB;AAC/B,OAAO,sBAAsB;AAK7B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI;AAEJ,MAAG,MAAM,SAAS,MAAM,MAAM,OAAO;AACnC,UAAM,MAAM,MAAM,QAAQ,CAAC,MAAM,QAAQ;AACvC,UAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAgCA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,eAAe,YAAY,UAAU;AAAA,IAC/C;AAAA,EACF;AAAA;AAAA,EAGA,iBAAiB,OAAe;AAC9B,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,EAAE,IAAI,CAAC;AAGjE,UAAM,UAAU,CAAC;AACjB,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,WAAW,CAAC,WAAmB,UAAe;AAC5C,QAAI,MAAM,SAAS,YAAY;AAC7B,cAAQ;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,UAAU,MAAM;AAAA,MAClB;AAAA,IACF,OACK;AACH,YAAM,YAAY,MAAM,SAAS,gBAAgB,KAAK;AACtD,cAAQ;AAAA,QACN,UAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,QAEZ,OAAO;AAAA,UACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,UAC9E,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,QACjF;AAAA,QACA,GAAG;AAAA,MACL;AAAA,IACF;AACA,SAAK,MAAM,SAAU,WAAW,KAAK;AAAA,EACvC;AAAA,EAEA,WAAW,WAAmB,UAAuD,OAAe;AAClG,UAAM,QAAQ,KAAK,MAAM,OAAO,MAAM,MAAM,CAAC,KAAK,CAAC;AAEnD,UAAM,SAAS,IAAI;AAAA,MACjB;AAAA,QACE,OAAO,SAAS;AAAA,QAChB,MAAO,SAAS,SAAS,SAAa,IAAI,SAAS;AAAA,MACrD;AAAA,MACA;AAAA,IACF;AAEA,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EAClD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,eAAe,SAAiB;AAC9B,QAAI,YAAY,iBAAiB,KAAK,MAAM,wBAAwB;AAClE,WAAK,MAAM,uBAAuB;AAAA,IACpC,OACK;AACH,WAAK,SAAS,KAAK,MAAM,WAAW;AAAA,QAClC,GAAG,KAAK,MAAM;AAAA,QACd,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,UAAkC,SAAc;AACjE,QAAI,SAAS;AACX,WAAK,MAAM,MAAO,QAAQ,IAAI;AAAA,IAChC,OACK;AACH,aAAO,KAAK,MAAM,MAAO,QAAQ;AAAA,IACnC;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,KAAK,MAAM,KAAK;AAAA,EACtD;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,QAAI,OAAO,KAAK,MAAM,OAAO,SAAS,aAAa;AACjD,WAAK,MAAM,MAAO,OAAO,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA,IACzE;AAEA,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO,OAAO;AAC3B,mBAAa,KAAK,MAAM,MAAM,MAAM,IAAI,CAAC,MAAM,QAAQ;AACrD,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,OAAO;AAC/D,cAAM,MAAO,KAAK,MAAM,KAAK,GAAG;AAChC,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,QAAQ,KAAK,CAAC;AACtE,cAAM,QAAQ,KAAK,CAAC;AACpB,cAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAE3F,cAAM,YAAY;AAAA,UAChB,cAAc,EAAE,aAAa;AAAA,UAC7B,OAAO,EAAE,YAAY;AAAA,UACrB,OAAO;AAAA,UACP,UAAU,CAAC,YAAyC,KAAK,WAAW,KAAK,EAAE,MAAM,WAAW,OAAO,QAAkB,GAAG,KAAK;AAAA,QAC/H;AAEA,YAAI;AACJ,YAAG,KAAK,MAAM,OAAO,SAAS,eAAe;AAC3C,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C,OACK;AACH,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C;AAEA,YAAI,YAAY;AAChB,YAAG,cAAc,QAAW;AAC1B,sBAAY,oBAAC,SACX;AAAA,YAAC;AAAA;AAAA,cACC,cAAW;AAAA,cACX,OAAO;AAAA,cACP,UAAU,aAAW,KAAK,WAAW,KAAK,EAAC,MAAM,SAAS,OAAO,UAAS,GAAG,KAAK;AAAA,cAClF,KAAK;AAAA,cACL,KAAK;AAAA;AAAA,UACP,GACF;AAAA,QACF;AAEA,eAAO,qBAAC,QACN;AAAA,8BAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACC;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,EAAE,cAAc;AAAA,cAC5B,WAAW,KAAK,MAAM;AAAA,cACtB,WAAW,KAAK,MAAM;AAAA,cACtB;AAAA,cACA,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,KAAK,EAAC,MAAM,WAAW,OAAO,UAAS,GAAG,QAAkB;AAAA;AAAA,UACzG,GACF;AAAA,UACA,oBAAC,QACE,yBACH;AAAA,aAlBc,GAmBhB;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAGnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,MAAO;AAAA,gBACzB,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA;AAAA,YACzD,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QACC,KAAK,MAAM,OAAO,SAAS,cAC1B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAGf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAAkB;AAAA;AAAA,YAC/D,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QAEF;AAAA,UAAC;AAAA;AAAA,YACC,OAAO;AAAA,YAGP,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,OAAO,EAAE,8CAA8C;AAAA,gBACvD,UAAU,aAAW,KAAK,mBAAmB,YAAY,OAAO;AAAA;AAAA,YAClE,GACF;AAAA;AAAA,UARI;AAAA,QASN;AAAA,QACC,cACC;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,SAAS;AAAA,YAGlB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,YAAY,KAAK,mBAAmB,WAAW,OAAO;AAAA;AAAA,YACtE;AAAA;AAAA,UAPI;AAAA,QAQN;AAAA,QAED,cACC,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,gCACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAI,YAAE,aAAa,GAAE;AAAA,YACtB,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QAEF,qBAAC,SAAI,WAAU,oBACZ;AAAA,wBACC;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,UAAU;AAAA;AAAA;AAAA,UACf;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,uBAAuB;AAAA;AAAA;AAAA,UAC5B;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a1f2034e8330e69a4f4de946d81cea8ff55472f7"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return qt=function(){return s},s}qt();function V$(n,e){qt().f[0]++;let t;return qt().s[0]++,qt().b[1][0]++,n.value&&(qt().b[1][1]++,n.value.stops)?(qt().b[0][0]++,qt().s[1]++,n.value.stops.forEach((i,r)=>{qt().f[1]++,qt().s[2]++,Object.prototype.hasOwnProperty.call(e.refs,r)?qt().b[2][1]++:(qt().b[2][0]++,qt().s[3]++,t?qt().b[3][1]++:(qt().b[3][0]++,qt().s[4]++,t={...e}),qt().s[5]++,t[r]=C2("stop-"))})):qt().b[0][1]++,qt().s[6]++,t}class ODe extends On.Component{state=(qt().s[7]++,{refs:{}});componentDidMount(){qt().f[2]++;const e=(qt().s[8]++,V$(this.props,this.state));qt().s[9]++,e?(qt().b[4][0]++,qt().s[10]++,this.setState({refs:e})):qt().b[4][1]++}static getDerivedStateFromProps(e,t){qt().f[3]++;const i=(qt().s[11]++,V$(e,t));return qt().s[12]++,i?(qt().b[5][0]++,qt().s[13]++,{refs:i}):(qt().b[5][1]++,qt().s[14]++,null)}getFieldFunctionType(e){return qt().f[4]++,qt().s[15]++,e.expression.interpolated?(qt().b[6][0]++,qt().s[16]++,"exponential"):(qt().b[6][1]++,qt().s[17]++,e.type==="number"?(qt().b[7][0]++,qt().s[18]++,"interval"):(qt().b[7][1]++,qt().s[19]++,"categorical"))}getDataFunctionTypes(e){return qt().f[5]++,qt().s[20]++,e.expression.interpolated?(qt().b[8][0]++,qt().s[21]++,["interpolate","categorical","interval","exponential","identity"]):(qt().b[8][1]++,qt().s[22]++,["categorical","interval","identity"])}orderStopsByZoom(e){qt().f[6]++;const t=(qt().s[23]++,e.map((r,o)=>(qt().f[7]++,qt().s[24]++,{ref:this.state.refs[o],data:r})).sort((r,o)=>(qt().f[8]++,qt().s[25]++,Ese(r.data[0].zoom,o.data[0].zoom)))),i=(qt().s[26]++,{});return qt().s[27]++,t.forEach((r,o)=>{qt().f[9]++,qt().s[28]++,i[o]=r.ref}),qt().s[29]++,this.setState({refs:i}),qt().s[30]++,t.map(r=>(qt().f[10]++,qt().s[31]++,r.data))}onChange=(qt().s[32]++,(e,t)=>{if(qt().f[11]++,qt().s[33]++,t.type==="identity")qt().b[9][0]++,qt().s[34]++,t={type:t.type,property:t.property};else{qt().b[9][1]++;const i=(qt().s[35]++,t.type==="categorical"?(qt().b[10][0]++,""):(qt().b[10][1]++,0));qt().s[36]++,t={property:"",type:t.type,stops:[[{zoom:6,value:i},op(this.props.fieldSpec)],[{zoom:10,value:i},op(this.props.fieldSpec)]],...t}}qt().s[37]++,this.props.onChange(e,t)});changeStop(e,t,i){qt().f[12]++;const r=(qt().s[38]++,qt().b[11][0]++,this.props.value?.stops.slice(0)||(qt().b[11][1]++,[]));qt().s[39]++,r[e]=[{value:t.value,zoom:t.zoom===void 0?(qt().b[12][0]++,0):(qt().b[12][1]++,t.zoom)},i];const o=(qt().s[40]++,this.orderStopsByZoom(r)),s=(qt().s[41]++,{...this.props.value,stops:o});qt().s[42]++,this.onChange(this.props.fieldName,s)}changeBase(e){qt().f[13]++;const t=(qt().s[43]++,{...this.props.value,base:e});qt().s[44]++,t.base===void 0?(qt().b[13][0]++,qt().s[45]++,delete t.base):qt().b[13][1]++,qt().s[46]++,this.props.onChange(this.props.fieldName,t)}changeDataType(e){qt().f[14]++,qt().s[47]++,qt().b[15][0]++,e==="interpolate"&&(qt().b[15][1]++,this.props.onChangeToZoomFunction)?(qt().b[14][0]++,qt().s[48]++,this.props.onChangeToZoomFunction()):(qt().b[14][1]++,qt().s[49]++,this.onChange(this.props.fieldName,{...this.props.value,type:e}))}changeDataProperty(e,t){qt().f[15]++,qt().s[50]++,t?(qt().b[16][0]++,qt().s[51]++,this.props.value[e]=t):(qt().b[16][1]++,qt().s[52]++,delete this.props.value[e]),qt().s[53]++,this.onChange(this.props.fieldName,this.props.value)}render(){qt().f[16]++;const e=(qt().s[54]++,this.props.t);qt().s[55]++,typeof this.props.value?.type>"u"?(qt().b[17][0]++,qt().s[56]++,this.props.value.type=this.getFieldFunctionType(this.props.fieldSpec)):qt().b[17][1]++;let t;return qt().s[57]++,this.props.value?.stops?(qt().b[18][0]++,qt().s[58]++,t=this.props.value.stops.map((i,r)=>{qt().f[17]++;const o=(qt().s[59]++,typeof i[0]=="object"?(qt().b[19][0]++,i[0].zoom):(qt().b[19][1]++,void 0)),s=(qt().s[60]++,this.state.refs[r]),a=(qt().s[61]++,typeof i[0]=="object"?(qt().b[20][0]++,i[0].value):(qt().b[20][1]++,i[0])),c=(qt().s[62]++,i[1]),f=(qt().s[63]++,te.jsx(Bse,{onClick:this.props.onDeleteStop?.bind(this,r)})),y=(qt().s[64]++,{"aria-label":e("Input value"),label:e("Data value"),value:a,onChange:I=>(qt().f[18]++,qt().s[65]++,this.changeStop(r,{zoom:o,value:I},c))});let _;qt().s[66]++,this.props.value?.type==="categorical"?(qt().b[21][0]++,qt().s[67]++,_=te.jsx(zm,{...y})):(qt().b[21][1]++,qt().s[68]++,_=te.jsx(z1,{...y}));let E=(qt().s[69]++,null);return qt().s[70]++,o!==void 0?(qt().b[22][0]++,qt().s[71]++,E=te.jsx("div",{children:te.jsx(z1,{"aria-label":"Zoom",value:o,onChange:I=>(qt().f[19]++,qt().s[72]++,this.changeStop(r,{zoom:I,value:a},c)),min:0,max:22})})):qt().b[22][1]++,qt().s[73]++,te.jsxs("tr",{children:[te.jsx("td",{children:E}),te.jsx("td",{children:_}),te.jsx("td",{children:te.jsx(Hx,{"aria-label":e("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:c,onChange:(I,P)=>(qt().f[20]++,qt().s[74]++,this.changeStop(r,{zoom:o,value:a},P))})}),te.jsx("td",{children:f})]},s)})):qt().b[18][1]++,qt().s[75]++,te.jsx("div",{className:"maputnik-data-spec-block",children:te.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[te.jsx("legend",{children:KB(this.props.fieldName)}),te.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[te.jsx(as,{label:e("Function"),children:te.jsx("div",{className:"maputnik-data-spec-property-input",children:te.jsx(zC,{value:this.props.value.type,onChange:i=>(qt().f[21]++,qt().s[76]++,this.changeDataType(i)),title:e("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})},"function"),(qt().b[23][0]++,this.props.value?.type!=="identity"&&(qt().b[23][1]++,te.jsx(as,{label:e("Base"),children:te.jsx("div",{className:"maputnik-data-spec-property-input",children:te.jsx(Hx,{fieldName:"base",fieldSpec:Tr.function.base,value:this.props.value?.base,onChange:(i,r)=>(qt().f[22]++,qt().s[77]++,this.changeBase(r))})})},"base"))),te.jsx(as,{label:"Property",children:te.jsx("div",{className:"maputnik-data-spec-property-input",children:te.jsx(zm,{value:this.props.value?.property,title:e("Input a data property to base styles off of."),onChange:i=>(qt().f[23]++,qt().s[78]++,this.changeDataProperty("property",i))})})},"property"),(qt().b[24][0]++,t&&(qt().b[24][1]++,te.jsx(as,{label:e("Default"),children:te.jsx(Hx,{fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value?.default,onChange:(i,r)=>(qt().f[24]++,qt().s[79]++,this.changeDataProperty("default",r))})},"default"))),(qt().b[25][0]++,t&&(qt().b[25][1]++,te.jsx("div",{className:"maputnik-function-stop",children:te.jsxs("table",{className:"maputnik-function-stop-table",children:[te.jsx("caption",{children:e("Stops")}),te.jsx("thead",{children:te.jsxs("tr",{children:[te.jsx("th",{children:e("Zoom")}),te.jsx("th",{children:e("Input value")}),te.jsx("th",{rowSpan:2,children:e("Output value")})]})}),te.jsx("tbody",{children:t})]})}))),te.jsxs("div",{className:"maputnik-toolbox",children:[(qt().b[26][0]++,t&&(qt().b[26][1]++,te.jsxs(Ds,{className:"maputnik-add-stop",onClick:this.props.onAddStop?.bind(this),children:[te.jsx(UB,{style:{verticalAlign:"text-bottom"}}),e("Add stop")]}))),te.jsxs(Ds,{className:"maputnik-add-stop",onClick:this.props.onExpressionClick?.bind(this),children:[te.jsx(wM,{style:{verticalAlign:"text-bottom"}}),e("Convert to expression")]})]})]})]})})}}const IDe=(qt().s[80]++,Mo()(ODe));function Un(){var n="/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",e="374899057a1493811ae396622fb1b276448ec163",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",statementMap:{0:{start:{line:17,column:16},end:{line:17,column:18}},1:{start:{line:18,column:2},end:{line:29,column:3}},2:{start:{line:19,column:4},end:{line:28,column:7}},3:{start:{line:20,column:6},end:{line:27,column:7}},4:{start:{line:21,column:8},end:{line:23,column:9}},5:{start:{line:22,column:10},end:{line:22,column:33}},6:{start:{line:24,column:8},end:{line:24,column:39}},7:{start:{line:26,column:8},end:{line:26,column:39}},8:{start:{line:30,column:2},end:{line:30,column:17}},9:{start:{line:33,column:24},end:{line:35,column:3}},10:{start:{line:36,column:10},end:{line:38,column:3}},11:{start:{line:40,column:20},end:{line:40,column:55}},12:{start:{line:41,column:4},end:{line:45,column:5}},13:{start:{line:42,column:6},end:{line:44,column:9}},14:{start:{line:48,column:20},end:{line:48,column:45}},15:{start:{line:49,column:4},end:{line:53,column:5}},16:{start:{line:50,column:6},end:{line:52,column:8}},17:{start:{line:54,column:4},end:{line:54,column:16}},18:{start:{line:58,column:26},end:{line:63,column:60}},19:{start:{line:59,column:6},end:{line:62,column:8}},20:{start:{line:63,column:22},end:{line:63,column:59}},21:{start:{line:64,column:20},end:{line:64,column:22}},22:{start:{line:65,column:4},end:{line:67,column:7}},23:{start:{line:66,column:6},end:{line:66,column:30}},24:{start:{line:68,column:4},end:{line:70,column:7}},25:{start:{line:71,column:4},end:{line:71,column:50}},26:{start:{line:71,column:39},end:{line:71,column:48}},27:{start:{line:74,column:18},end:{line:74,column:49}},28:{start:{line:75,column:4},end:{line:75,column:41}},29:{start:{line:76,column:25},end:{line:76,column:53}},30:{start:{line:77,column:25},end:{line:80,column:5}},31:{start:{line:81,column:4},end:{line:81,column:60}},32:{start:{line:84,column:25},end:{line:87,column:5}},33:{start:{line:88,column:4},end:{line:90,column:5}},34:{start:{line:89,column:6},end:{line:89,column:34}},35:{start:{line:91,column:4},end:{line:91,column:60}},36:{start:{line:93,column:19},end:{line:97,column:3}},37:{start:{line:94,column:4},end:{line:96,column:5}},38:{start:{line:95,column:6},end:{line:95,column:46}},39:{start:{line:99,column:14},end:{line:99,column:26}},40:{start:{line:100,column:23},end:{line:133,column:6}},41:{start:{line:101,column:24},end:{line:101,column:31}},42:{start:{line:102,column:20},end:{line:102,column:27}},43:{start:{line:103,column:44},end:{line:103,column:120}},44:{start:{line:104,column:6},end:{line:132,column:8}},45:{start:{line:113,column:43},end:{line:113,column:87}},46:{start:{line:125,column:43},end:{line:125,column:88}},47:{start:{line:134,column:4},end:{line:200,column:12}},48:{start:{line:145,column:39},end:{line:145,column:67}},49:{start:{line:162,column:43},end:{line:162,column:68}},50:{start:{line:203,column:4},end:{line:207,column:5}},51:{start:{line:204,column:6},end:{line:204,column:83}},52:{start:{line:206,column:6},end:{line:206,column:29}},53:{start:{line:210,column:21},end:{line:210,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:16,column:9},end:{line:16,column:20}},loc:{start:{line:16,column:35},end:{line:31,column:1}},line:16},1:{name:"(anonymous_1)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:45},end:{line:28,column:5}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:22},end:{line:46,column:3}},line:39},3:{name:"(anonymous_3)",decl:{start:{line:47,column:2},end:{line:47,column:3}},loc:{start:{line:47,column:48},end:{line:55,column:3}},line:47},4:{name:"(anonymous_4)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:26},end:{line:72,column:3}},line:57},5:{name:"(anonymous_5)",decl:{start:{line:58,column:36},end:{line:58,column:37}},loc:{start:{line:58,column:51},end:{line:63,column:5}},line:58},6:{name:"(anonymous_6)",decl:{start:{line:63,column:12},end:{line:63,column:13}},loc:{start:{line:63,column:22},end:{line:63,column:59}},line:63},7:{name:"(anonymous_7)",decl:{start:{line:65,column:26},end:{line:65,column:27}},loc:{start:{line:65,column:41},end:{line:67,column:5}},line:65},8:{name:"(anonymous_8)",decl:{start:{line:71,column:29},end:{line:71,column:30}},loc:{start:{line:71,column:39},end:{line:71,column:48}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:73,column:2},end:{line:73,column:3}},loc:{start:{line:73,column:45},end:{line:82,column:3}},line:73},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:23},end:{line:92,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:93,column:19},end:{line:93,column:20}},loc:{start:{line:93,column:29},end:{line:97,column:3}},line:93},12:{name:"(anonymous_12)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:11},end:{line:201,column:3}},line:98},13:{name:"(anonymous_13)",decl:{start:{line:100,column:51},end:{line:100,column:52}},loc:{start:{line:100,column:66},end:{line:133,column:5}},line:100},14:{name:"(anonymous_14)",decl:{start:{line:113,column:26},end:{line:113,column:27}},loc:{start:{line:113,column:43},end:{line:113,column:87}},line:113},15:{name:"(anonymous_15)",decl:{start:{line:125,column:26},end:{line:125,column:27}},loc:{start:{line:125,column:43},end:{line:125,column:88}},line:125},16:{name:"(anonymous_16)",decl:{start:{line:145,column:26},end:{line:145,column:27}},loc:{start:{line:145,column:39},end:{line:145,column:67}},line:145},17:{name:"(anonymous_17)",decl:{start:{line:162,column:26},end:{line:162,column:27}},loc:{start:{line:162,column:43},end:{line:162,column:68}},line:162},18:{name:"(anonymous_18)",decl:{start:{line:202,column:2},end:{line:202,column:3}},loc:{start:{line:202,column:34},end:{line:208,column:3}},line:202}},branchMap:{0:{loc:{start:{line:18,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:18,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},1:{loc:{start:{line:18,column:6},end:{line:18,column:38}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:17}},{start:{line:18,column:21},end:{line:18,column:38}}],line:18},2:{loc:{start:{line:20,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:20,column:6},end:{line:27,column:7}},{start:{line:25,column:13},end:{line:27,column:7}}],line:20},3:{loc:{start:{line:21,column:8},end:{line:23,column:9}},type:"if",locations:[{start:{line:21,column:8},end:{line:23,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},4:{loc:{start:{line:41,column:4},end:{line:45,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:45,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},5:{loc:{start:{line:49,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:53,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},6:{loc:{start:{line:88,column:4},end:{line:90,column:5}},type:"if",locations:[{start:{line:88,column:4},end:{line:90,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:88},7:{loc:{start:{line:94,column:4},end:{line:96,column:5}},type:"if",locations:[{start:{line:94,column:4},end:{line:96,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:94},8:{loc:{start:{line:94,column:8},end:{line:94,column:67}},type:"binary-expr",locations:[{start:{line:94,column:8},end:{line:94,column:30}},{start:{line:94,column:34},end:{line:94,column:67}}],line:94},9:{loc:{start:{line:203,column:4},end:{line:207,column:5}},type:"if",locations:[{start:{line:203,column:4},end:{line:207,column:5}},{start:{line:205,column:11},end:{line:207,column:5}}],line:203}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx"],names:[],mappings:"AAiK4B,cACf,YADe;AAjK5B,OAAO,WAAW;AAClB,SAAS,sBAAsB;AAC/B,SAAS,sBAAsB;AAC/B,OAAO,YAAY;AACnB,SAA+B,uBAAuB;AAEtD,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAElB,OAAO,sBAAsB;AAC7B,OAAO,wBAAwB;AAE/B,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAS5B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI,UAAmC,CAAC;AAExC,MAAG,MAAM,SAAU,MAAM,MAAwB,OAAO;AACtD,IAAC,MAAM,MAAwB,MAAM,QAAQ,CAAC,MAAM,QAAgB;AAClE,UAAG,OAAO,UAAU,eAAe,KAAK,CAAC,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B,OAAO;AACL,gBAAQ,GAAG,IAAI,MAAM,KAAK,GAAG;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AACA,SAAO;AACT;AA4BA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA;AAAA,EAGA,iBAAiB,OAA+B;AAC9C,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,GAAI,EAAE,KAAK,CAAC,CAAE,CAAC;AAGzD,UAAM,UAAkC,CAAC;AACzC,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,eAAe,WAAmB,UAA8B,OAAe;AAC7E,UAAM,QAAS,KAAK,MAAM,MAAwB,MAAM,MAAM,CAAC;AAC/D,UAAM,SAAS,IAAI,CAAC,UAAU,KAAK;AAEnC,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,iBAAiB,CAAC,SAAiB;AACjC,QAAI,SAAS,iBAAiB,KAAK,MAAM,wBAAwB;AAC/D,WAAK,MAAM,uBAAuB,IAAI;AAAA,IACxC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,aAAa,KAAK,MAAM,OAAO,MAAM,IAAI,CAAC,MAAM,QAAQ;AAC5D,YAAM,YAAY,KAAK,CAAC;AACxB,YAAM,QAAQ,KAAK,CAAC;AACpB,YAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAC3F,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,gCAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,MAAM;AAAA,gBACpB,OAAO;AAAA,gBACP,UAAU,iBAAe,KAAK,eAAe,KAAK,aAAa,KAAK;AAAA,gBACpE,KAAK;AAAA,gBACL,KAAK;AAAA;AAAA,YACP,GACF;AAAA,YACA,oBAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,cAAc;AAAA,gBAC5B,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB;AAAA,gBACA,UAAU,CAAC,GAAG,aAAa,KAAK,eAAe,KAAK,WAAW,QAAkB;AAAA;AAAA,YACnF,GACF;AAAA,YACA,oBAAC,QACE,yBACH;AAAA;AAAA;AAAA,QAtBK,GAAG,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC;AAAA,MAuB5B;AAAA,IACF,CAAC;AAGD,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAEnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAU;AAAA;AAAA,YAC1D,GACF;AAAA;AAAA,QACF;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAEf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAA8B;AAAA;AAAA,YAC3E,GACF;AAAA;AAAA,QACF;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,mEACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QACA,qBAAC,SAAI,WAAU,oBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,UAAU;AAAA;AAAA;AAAA,UACf;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,uBAAuB;AAAA;AAAA;AAAA,UAC5B;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AAAA,EAEA,qBAAqB,WAGlB;AACD,QAAI,UAAU,eAAe,MAAM,eAAe;AAChD,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,aAAa;AAAA,IACvB;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"374899057a1493811ae396622fb1b276448ec163"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Un=function(){return s},s}Un();function $$(n,e){Un().f[0]++;let t=(Un().s[0]++,{});return Un().s[1]++,Un().b[1][0]++,n.value&&(Un().b[1][1]++,n.value.stops)?(Un().b[0][0]++,Un().s[2]++,n.value.stops.forEach((i,r)=>{Un().f[1]++,Un().s[3]++,Object.prototype.hasOwnProperty.call(!e.refs,r)?(Un().b[2][0]++,Un().s[4]++,t?Un().b[3][1]++:(Un().b[3][0]++,Un().s[5]++,t={...e}),Un().s[6]++,t[r]=C2("stop-")):(Un().b[2][1]++,Un().s[7]++,t[r]=e.refs[r])})):Un().b[0][1]++,Un().s[8]++,t}class TDe extends On.Component{static defaultProps=(Un().s[9]++,{errors:{}});state=(Un().s[10]++,{refs:{}});componentDidMount(){Un().f[2]++;const e=(Un().s[11]++,$$(this.props,this.state));Un().s[12]++,e?(Un().b[4][0]++,Un().s[13]++,this.setState({refs:e})):Un().b[4][1]++}static getDerivedStateFromProps(e,t){Un().f[3]++;const i=(Un().s[14]++,$$(e,t));return Un().s[15]++,i?(Un().b[5][0]++,Un().s[16]++,{refs:i}):(Un().b[5][1]++,Un().s[17]++,null)}orderStopsByZoom(e){Un().f[4]++;const t=(Un().s[18]++,e.map((r,o)=>(Un().f[5]++,Un().s[19]++,{ref:this.state.refs[o],data:r})).sort((r,o)=>(Un().f[6]++,Un().s[20]++,Ese(r.data[0],o.data[0])))),i=(Un().s[21]++,{});return Un().s[22]++,t.forEach((r,o)=>{Un().f[7]++,Un().s[23]++,i[o]=r.ref}),Un().s[24]++,this.setState({refs:i}),Un().s[25]++,t.map(r=>(Un().f[8]++,Un().s[26]++,r.data))}changeZoomStop(e,t,i){Un().f[9]++;const r=(Un().s[27]++,this.props.value.stops.slice(0));Un().s[28]++,r[e]=[t,i];const o=(Un().s[29]++,this.orderStopsByZoom(r)),s=(Un().s[30]++,{...this.props.value,stops:o});Un().s[31]++,this.props.onChange(this.props.fieldName,s)}changeBase(e){Un().f[10]++;const t=(Un().s[32]++,{...this.props.value,base:e});Un().s[33]++,t.base===void 0?(Un().b[6][0]++,Un().s[34]++,delete t.base):Un().b[6][1]++,Un().s[35]++,this.props.onChange(this.props.fieldName,t)}changeDataType=(Un().s[36]++,e=>{Un().f[11]++,Un().s[37]++,Un().b[8][0]++,e!=="interpolate"&&(Un().b[8][1]++,this.props.onChangeToDataFunction)?(Un().b[7][0]++,Un().s[38]++,this.props.onChangeToDataFunction(e)):Un().b[7][1]++});render(){Un().f[12]++;const e=(Un().s[39]++,this.props.t),t=(Un().s[40]++,this.props.value?.stops.map((i,r)=>{Un().f[13]++;const o=(Un().s[41]++,i[0]),s=(Un().s[42]++,i[1]),a=(Un().s[43]++,te.jsx(Bse,{onClick:this.props.onDeleteStop?.bind(this,r)}));return Un().s[44]++,te.jsxs("tr",{children:[te.jsx("td",{children:te.jsx(z1,{"aria-label":e("Zoom"),value:o,onChange:c=>(Un().f[14]++,Un().s[45]++,this.changeZoomStop(r,c,s)),min:0,max:22})}),te.jsx("td",{children:te.jsx(Hx,{"aria-label":e("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:s,onChange:(c,f)=>(Un().f[15]++,Un().s[46]++,this.changeZoomStop(r,o,f))})}),te.jsx("td",{children:a})]},`${i[0]}-${i[1]}`)}));return Un().s[47]++,te.jsx("div",{className:"maputnik-data-spec-block",children:te.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[te.jsx("legend",{children:KB(this.props.fieldName)}),te.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[te.jsx(as,{label:e("Function"),children:te.jsx("div",{className:"maputnik-data-spec-property-input",children:te.jsx(zC,{value:"interpolate",onChange:i=>(Un().f[16]++,Un().s[48]++,this.changeDataType(i)),title:e("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})}),te.jsx(as,{label:e("Base"),children:te.jsx("div",{className:"maputnik-data-spec-property-input",children:te.jsx(Hx,{fieldName:"base",fieldSpec:Tr.function.base,value:this.props.value?.base,onChange:(i,r)=>(Un().f[17]++,Un().s[49]++,this.changeBase(r))})})}),te.jsx("div",{className:"maputnik-function-stop",children:te.jsxs("table",{className:"maputnik-function-stop-table maputnik-function-stop-table--zoom",children:[te.jsx("caption",{children:e("Stops")}),te.jsx("thead",{children:te.jsxs("tr",{children:[te.jsx("th",{children:e("Zoom")}),te.jsx("th",{rowSpan:2,children:e("Output value")})]})}),te.jsx("tbody",{children:t})]})}),te.jsxs("div",{className:"maputnik-toolbox",children:[te.jsxs(Ds,{className:"maputnik-add-stop",onClick:this.props.onAddStop?.bind(this),children:[te.jsx(UB,{style:{verticalAlign:"text-bottom"}}),e("Add stop")]}),te.jsxs(Ds,{className:"maputnik-add-stop",onClick:this.props.onExpressionClick?.bind(this),children:[te.jsx(wM,{style:{verticalAlign:"text-bottom"}}),e("Convert to expression")]})]})]})]})})}getDataFunctionTypes(e){return Un().f[18]++,Un().s[50]++,e["property-type"]==="data-driven"?(Un().b[9][0]++,Un().s[51]++,["interpolate","categorical","interval","exponential","identity"]):(Un().b[9][1]++,Un().s[52]++,["interpolate"])}}const kDe=(Un().s[53]++,Mo()(TDe));function ct(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",e="cec93a709e0799aecc929100cb853febe363652d",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",statementMap:{0:{start:{line:10,column:2},end:{line:10,column:78}},1:{start:{line:13,column:2},end:{line:13,column:74}},2:{start:{line:16,column:2},end:{line:18,column:5}},3:{start:{line:17,column:4},end:{line:17,column:52}},4:{start:{line:21,column:2},end:{line:21,column:123}},5:{start:{line:24,column:2},end:{line:26,column:5}},6:{start:{line:25,column:4},end:{line:25,column:83}},7:{start:{line:29,column:2},end:{line:29,column:64}},8:{start:{line:32,column:16},end:{line:32,column:47}},9:{start:{line:33,column:2},end:{line:33,column:38}},10:{start:{line:36,column:2},end:{line:38,column:3}},11:{start:{line:37,column:4},end:{line:37,column:37}},12:{start:{line:39,column:2},end:{line:39,column:15}},13:{start:{line:42,column:2},end:{line:62,column:3}},14:{start:{line:43,column:4},end:{line:43,column:19}},15:{start:{line:44,column:9},end:{line:62,column:3}},16:{start:{line:45,column:4},end:{line:45,column:19}},17:{start:{line:46,column:9},end:{line:62,column:3}},18:{start:{line:47,column:4},end:{line:47,column:19}},19:{start:{line:48,column:9},end:{line:62,column:3}},20:{start:{line:49,column:4},end:{line:49,column:19}},21:{start:{line:50,column:9},end:{line:62,column:3}},22:{start:{line:51,column:4},end:{line:51,column:19}},23:{start:{line:52,column:9},end:{line:62,column:3}},24:{start:{line:53,column:4},end:{line:53,column:19}},25:{start:{line:54,column:9},end:{line:62,column:3}},26:{start:{line:55,column:4},end:{line:55,column:19}},27:{start:{line:56,column:9},end:{line:62,column:3}},28:{start:{line:57,column:4},end:{line:57,column:27}},29:{start:{line:58,column:9},end:{line:62,column:3}},30:{start:{line:59,column:4},end:{line:59,column:27}},31:{start:{line:61,column:4},end:{line:61,column:24}},32:{start:{line:64,column:22},end:{line:302,column:1}},33:{start:{line:65,column:34},end:{line:67,column:3}},34:{start:{line:68,column:36},end:{line:68,column:57}},35:{start:{line:69,column:2},end:{line:73,column:48}},36:{start:{line:70,column:4},end:{line:72,column:5}},37:{start:{line:71,column:6},end:{line:71,column:61}},38:{start:{line:74,column:31},end:{line:82,column:3}},39:{start:{line:75,column:4},end:{line:77,column:5}},40:{start:{line:76,column:6},end:{line:76,column:27}},41:{start:{line:78,column:4},end:{line:80,column:5}},42:{start:{line:79,column:6},end:{line:79,column:24}},43:{start:{line:81,column:4},end:{line:81,column:25}},44:{start:{line:83,column:18},end:{line:99,column:3}},45:{start:{line:84,column:18},end:{line:84,column:44}},46:{start:{line:85,column:21},end:{line:85,column:44}},47:{start:{line:86,column:4},end:{line:93,column:5}},48:{start:{line:87,column:6},end:{line:90,column:9}},49:{start:{line:92,column:6},end:{line:92,column:49}},50:{start:{line:94,column:25},end:{line:97,column:5}},51:{start:{line:98,column:4},end:{line:98,column:50}},52:{start:{line:100,column:27},end:{line:104,column:3}},53:{start:{line:101,column:37},end:{line:101,column:42}},54:{start:{line:102,column:4},end:{line:102,column:49}},55:{start:{line:103,column:4},end:{line:103,column:25}},56:{start:{line:105,column:21},end:{line:116,column:3}},57:{start:{line:106,column:18},end:{line:106,column:44}},58:{start:{line:107,column:4},end:{line:107,column:29}},59:{start:{line:108,column:23},end:{line:111,column:5}},60:{start:{line:112,column:4},end:{line:114,column:5}},61:{start:{line:113,column:6},end:{line:113,column:33}},62:{start:{line:115,column:4},end:{line:115,column:50}},63:{start:{line:117,column:27},end:{line:146,column:3}},64:{start:{line:118,column:22},end:{line:118,column:27}},65:{start:{line:120,column:4},end:{line:144,column:5}},66:{start:{line:121,column:6},end:{line:136,column:7}},67:{start:{line:122,column:8},end:{line:127,column:10}},68:{start:{line:125,column:12},end:{line:125,column:83}},69:{start:{line:129,column:8},end:{line:135,column:10}},70:{start:{line:138,column:6},end:{line:143,column:8}},71:{start:{line:145,column:4},end:{line:145,column:46}},72:{start:{line:147,column:25},end:{line:159,column:3}},73:{start:{line:148,column:33},end:{line:148,column:38}},74:{start:{line:149,column:4},end:{line:158,column:5}},75:{start:{line:150,column:6},end:{line:153,column:9}},76:{start:{line:154,column:6},end:{line:154,column:27}},77:{start:{line:155,column:11},end:{line:158,column:5}},78:{start:{line:156,column:6},end:{line:156,column:42}},79:{start:{line:157,column:6},end:{line:157,column:27}},80:{start:{line:160,column:18},end:{line:163,column:3}},81:{start:{line:161,column:33},end:{line:161,column:38}},82:{start:{line:162,column:4},end:{line:162,column:140}},83:{start:{line:164,column:25},end:{line:175,column:3}},84:{start:{line:165,column:33},end:{line:165,column:38}},85:{start:{line:167,column:4},end:{line:173,column:5}},86:{start:{line:168,column:6},end:{line:168,column:67}},87:{start:{line:169,column:11},end:{line:173,column:5}},88:{start:{line:170,column:6},end:{line:170,column:43}},89:{start:{line:172,column:6},end:{line:172,column:65}},90:{start:{line:174,column:4},end:{line:174,column:48}},91:{start:{line:176,column:27},end:{line:214,column:3}},92:{start:{line:177,column:25},end:{line:177,column:62}},93:{start:{line:178,column:22},end:{line:178,column:61}},94:{start:{line:179,column:22},end:{line:179,column:27}},95:{start:{line:181,column:4},end:{line:212,column:5}},96:{start:{line:182,column:6},end:{line:201,column:7}},97:{start:{line:183,column:8},end:{line:190,column:10}},98:{start:{line:188,column:12},end:{line:188,column:106}},99:{start:{line:192,column:8},end:{line:200,column:10}},100:{start:{line:203,column:6},end:{line:211,column:8}},101:{start:{line:213,column:4},end:{line:213,column:46}},102:{start:{line:215,column:32},end:{line:226,column:3}},103:{start:{line:216,column:23},end:{line:224,column:5}},104:{start:{line:225,column:4},end:{line:225,column:48}},105:{start:{line:227,column:24},end:{line:229,column:3}},106:{start:{line:228,column:4},end:{line:228,column:23}},107:{start:{line:230,column:26},end:{line:232,column:3}},108:{start:{line:231,column:4},end:{line:231,column:24}},109:{start:{line:233,column:20},end:{line:233,column:120}},110:{start:{line:235,column:2},end:{line:300,column:3}},111:{start:{line:236,column:4},end:{line:251,column:6}},112:{start:{line:252,column:9},end:{line:300,column:3}},113:{start:{line:253,column:4},end:{line:267,column:6}},114:{start:{line:268,column:9},end:{line:300,column:3}},115:{start:{line:269,column:4},end:{line:283,column:6}},116:{start:{line:285,column:4},end:{line:299,column:6}},117:{start:{line:301,column:2},end:{line:301,column:141}}},fnMap:{0:{name:"isLiteralExpression",decl:{start:{line:9,column:9},end:{line:9,column:28}},loc:{start:{line:9,column:36},end:{line:11,column:1}},line:9},1:{name:"isGetExpression",decl:{start:{line:12,column:9},end:{line:12,column:24}},loc:{start:{line:12,column:32},end:{line:14,column:1}},line:12},2:{name:"isZoomField",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:28},end:{line:19,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:16,column:168},end:{line:16,column:169}},loc:{start:{line:16,column:178},end:{line:18,column:3}},line:16},4:{name:"isIdentityProperty",decl:{start:{line:20,column:9},end:{line:20,column:27}},loc:{start:{line:20,column:35},end:{line:22,column:1}},line:20},5:{name:"isDataStopProperty",decl:{start:{line:23,column:9},end:{line:23,column:27}},loc:{start:{line:23,column:35},end:{line:27,column:1}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:24,column:168},end:{line:24,column:169}},loc:{start:{line:24,column:178},end:{line:26,column:3}},line:24},7:{name:"isDataField",decl:{start:{line:28,column:9},end:{line:28,column:20}},loc:{start:{line:28,column:28},end:{line:30,column:1}},line:28},8:{name:"isPrimative",decl:{start:{line:31,column:9},end:{line:31,column:20}},loc:{start:{line:31,column:28},end:{line:34,column:1}},line:31},9:{name:"isArrayOfPrimatives",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:37},end:{line:40,column:1}},line:35},10:{name:"getDataType",decl:{start:{line:41,column:9},end:{line:41,column:20}},loc:{start:{line:41,column:44},end:{line:63,column:1}},line:41},11:{name:"(anonymous_11)",decl:{start:{line:64,column:22},end:{line:64,column:23}},loc:{start:{line:64,column:33},end:{line:302,column:1}},line:64},12:{name:"(anonymous_12)",decl:{start:{line:69,column:18},end:{line:69,column:19}},loc:{start:{line:69,column:24},end:{line:73,column:3}},line:69},13:{name:"(anonymous_13)",decl:{start:{line:74,column:31},end:{line:74,column:32}},loc:{start:{line:74,column:46},end:{line:82,column:3}},line:74},14:{name:"(anonymous_14)",decl:{start:{line:83,column:18},end:{line:83,column:19}},loc:{start:{line:83,column:24},end:{line:99,column:3}},line:83},15:{name:"(anonymous_15)",decl:{start:{line:100,column:27},end:{line:100,column:28}},loc:{start:{line:100,column:33},end:{line:104,column:3}},line:100},16:{name:"(anonymous_16)",decl:{start:{line:105,column:21},end:{line:105,column:22}},loc:{start:{line:105,column:34},end:{line:116,column:3}},line:105},17:{name:"(anonymous_17)",decl:{start:{line:117,column:27},end:{line:117,column:28}},loc:{start:{line:117,column:33},end:{line:146,column:3}},line:117},18:{name:"(anonymous_18)",decl:{start:{line:124,column:33},end:{line:124,column:34}},loc:{start:{line:124,column:43},end:{line:126,column:11}},line:124},19:{name:"(anonymous_19)",decl:{start:{line:147,column:25},end:{line:147,column:26}},loc:{start:{line:147,column:31},end:{line:159,column:3}},line:147},20:{name:"(anonymous_20)",decl:{start:{line:160,column:18},end:{line:160,column:19}},loc:{start:{line:160,column:24},end:{line:163,column:3}},line:160},21:{name:"(anonymous_21)",decl:{start:{line:164,column:25},end:{line:164,column:26}},loc:{start:{line:164,column:31},end:{line:175,column:3}},line:164},22:{name:"(anonymous_22)",decl:{start:{line:176,column:27},end:{line:176,column:28}},loc:{start:{line:176,column:33},end:{line:214,column:3}},line:176},23:{name:"(anonymous_23)",decl:{start:{line:187,column:33},end:{line:187,column:34}},loc:{start:{line:187,column:43},end:{line:189,column:11}},line:187},24:{name:"(anonymous_24)",decl:{start:{line:215,column:32},end:{line:215,column:33}},loc:{start:{line:215,column:38},end:{line:226,column:3}},line:215},25:{name:"(anonymous_25)",decl:{start:{line:227,column:24},end:{line:227,column:25}},loc:{start:{line:227,column:30},end:{line:229,column:3}},line:227},26:{name:"(anonymous_26)",decl:{start:{line:230,column:26},end:{line:230,column:27}},loc:{start:{line:230,column:32},end:{line:232,column:3}},line:230}},branchMap:{0:{loc:{start:{line:10,column:9},end:{line:10,column:77}},type:"binary-expr",locations:[{start:{line:10,column:9},end:{line:10,column:29}},{start:{line:10,column:33},end:{line:10,column:51}},{start:{line:10,column:55},end:{line:10,column:77}}],line:10},1:{loc:{start:{line:13,column:9},end:{line:13,column:73}},type:"binary-expr",locations:[{start:{line:13,column:9},end:{line:13,column:29}},{start:{line:13,column:33},end:{line:13,column:51}},{start:{line:13,column:55},end:{line:13,column:73}}],line:13},2:{loc:{start:{line:16,column:9},end:{line:18,column:4}},type:"binary-expr",locations:[{start:{line:16,column:9},end:{line:16,column:34}},{start:{line:16,column:38},end:{line:16,column:49}},{start:{line:16,column:53},end:{line:16,column:90}},{start:{line:16,column:94},end:{line:16,column:120}},{start:{line:16,column:124},end:{line:16,column:146}},{start:{line:16,column:150},end:{line:18,column:4}}],line:16},3:{loc:{start:{line:17,column:11},end:{line:17,column:51}},type:"binary-expr",locations:[{start:{line:17,column:11},end:{line:17,column:30}},{start:{line:17,column:34},end:{line:17,column:51}}],line:17},4:{loc:{start:{line:21,column:9},end:{line:21,column:122}},type:"binary-expr",locations:[{start:{line:21,column:9},end:{line:21,column:34}},{start:{line:21,column:38},end:{line:21,column:63}},{start:{line:21,column:67},end:{line:21,column:122}}],line:21},5:{loc:{start:{line:24,column:9},end:{line:26,column:4}},type:"binary-expr",locations:[{start:{line:24,column:9},end:{line:24,column:34}},{start:{line:24,column:38},end:{line:24,column:49}},{start:{line:24,column:53},end:{line:24,column:90}},{start:{line:24,column:94},end:{line:24,column:116}},{start:{line:24,column:120},end:{line:24,column:146}},{start:{line:24,column:150},end:{line:26,column:4}}],line:24},6:{loc:{start:{line:25,column:11},end:{line:25,column:82}},type:"binary-expr",locations:[{start:{line:25,column:11},end:{line:25,column:30}},{start:{line:25,column:34},end:{line:25,column:51}},{start:{line:25,column:55},end:{line:25,column:82}}],line:25},7:{loc:{start:{line:29,column:9},end:{line:29,column:63}},type:"binary-expr",locations:[{start:{line:29,column:9},end:{line:29,column:34}},{start:{line:29,column:38},end:{line:29,column:63}}],line:29},8:{loc:{start:{line:36,column:2},end:{line:38,column:3}},type:"if",locations:[{start:{line:36,column:2},end:{line:38,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},9:{loc:{start:{line:41,column:28},end:{line:41,column:42}},type:"default-arg",locations:[{start:{line:41,column:40},end:{line:41,column:42}}],line:41},10:{loc:{start:{line:42,column:2},end:{line:62,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:62,column:3}},{start:{line:44,column:9},end:{line:62,column:3}}],line:42},11:{loc:{start:{line:44,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:44,column:9},end:{line:62,column:3}},{start:{line:46,column:9},end:{line:62,column:3}}],line:44},12:{loc:{start:{line:46,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:46,column:9},end:{line:62,column:3}},{start:{line:48,column:9},end:{line:62,column:3}}],line:46},13:{loc:{start:{line:46,column:13},end:{line:46,column:69}},type:"binary-expr",locations:[{start:{line:46,column:13},end:{line:46,column:39}},{start:{line:46,column:43},end:{line:46,column:69}}],line:46},14:{loc:{start:{line:48,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:48,column:9},end:{line:62,column:3}},{start:{line:50,column:9},end:{line:62,column:3}}],line:48},15:{loc:{start:{line:48,column:13},end:{line:48,column:75}},type:"binary-expr",locations:[{start:{line:48,column:13},end:{line:48,column:45}},{start:{line:48,column:49},end:{line:48,column:75}}],line:48},16:{loc:{start:{line:50,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:50,column:9},end:{line:62,column:3}},{start:{line:52,column:9},end:{line:62,column:3}}],line:50},17:{loc:{start:{line:52,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:52,column:9},end:{line:62,column:3}},{start:{line:54,column:9},end:{line:62,column:3}}],line:52},18:{loc:{start:{line:54,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:54,column:9},end:{line:62,column:3}},{start:{line:56,column:9},end:{line:62,column:3}}],line:54},19:{loc:{start:{line:56,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:56,column:9},end:{line:62,column:3}},{start:{line:58,column:9},end:{line:62,column:3}}],line:56},20:{loc:{start:{line:58,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:58,column:9},end:{line:62,column:3}},{start:{line:60,column:9},end:{line:62,column:3}}],line:58},21:{loc:{start:{line:70,column:4},end:{line:72,column:5}},type:"if",locations:[{start:{line:70,column:4},end:{line:72,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:70},22:{loc:{start:{line:75,column:4},end:{line:77,column:5}},type:"if",locations:[{start:{line:75,column:4},end:{line:77,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:75},23:{loc:{start:{line:78,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:78},24:{loc:{start:{line:86,column:4},end:{line:93,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:93,column:5}},{start:{line:91,column:11},end:{line:93,column:5}}],line:86},25:{loc:{start:{line:112,column:4},end:{line:114,column:5}},type:"if",locations:[{start:{line:112,column:4},end:{line:114,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:112},26:{loc:{start:{line:120,column:4},end:{line:144,column:5}},type:"if",locations:[{start:{line:120,column:4},end:{line:144,column:5}},{start:{line:137,column:11},end:{line:144,column:5}}],line:120},27:{loc:{start:{line:121,column:6},end:{line:136,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:136,column:7}},{start:{line:128,column:13},end:{line:136,column:7}}],line:121},28:{loc:{start:{line:125,column:34},end:{line:125,column:81}},type:"binary-expr",locations:[{start:{line:125,column:34},end:{line:125,column:41}},{start:{line:125,column:45},end:{line:125,column:81}}],line:125},29:{loc:{start:{line:140,column:14},end:{line:140,column:59}},type:"binary-expr",locations:[{start:{line:140,column:14},end:{line:140,column:19}},{start:{line:140,column:23},end:{line:140,column:59}}],line:140},30:{loc:{start:{line:141,column:15},end:{line:141,column:60}},type:"binary-expr",locations:[{start:{line:141,column:15},end:{line:141,column:20}},{start:{line:141,column:24},end:{line:141,column:60}}],line:141},31:{loc:{start:{line:149,column:4},end:{line:158,column:5}},type:"if",locations:[{start:{line:149,column:4},end:{line:158,column:5}},{start:{line:155,column:11},end:{line:158,column:5}}],line:149},32:{loc:{start:{line:155,column:11},end:{line:158,column:5}},type:"if",locations:[{start:{line:155,column:11},end:{line:158,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:155},33:{loc:{start:{line:162,column:11},end:{line:162,column:139}},type:"binary-expr",locations:[{start:{line:162,column:11},end:{line:162,column:33}},{start:{line:162,column:37},end:{line:162,column:63}},{start:{line:162,column:67},end:{line:162,column:85}},{start:{line:162,column:89},end:{line:162,column:109}},{start:{line:162,column:113},end:{line:162,column:139}}],line:162},34:{loc:{start:{line:167,column:4},end:{line:173,column:5}},type:"if",locations:[{start:{line:167,column:4},end:{line:173,column:5}},{start:{line:169,column:11},end:{line:173,column:5}}],line:167},35:{loc:{start:{line:167,column:8},end:{line:167,column:53}},type:"binary-expr",locations:[{start:{line:167,column:8},end:{line:167,column:33}},{start:{line:167,column:37},end:{line:167,column:53}}],line:167},36:{loc:{start:{line:169,column:11},end:{line:173,column:5}},type:"if",locations:[{start:{line:169,column:11},end:{line:173,column:5}},{start:{line:171,column:11},end:{line:173,column:5}}],line:169},37:{loc:{start:{line:172,column:31},end:{line:172,column:63}},type:"binary-expr",locations:[{start:{line:172,column:31},end:{line:172,column:36}},{start:{line:172,column:40},end:{line:172,column:63}}],line:172},38:{loc:{start:{line:178,column:22},end:{line:178,column:61}},type:"cond-expr",locations:[{start:{line:178,column:55},end:{line:178,column:57}},{start:{line:178,column:60},end:{line:178,column:61}}],line:178},39:{loc:{start:{line:181,column:4},end:{line:212,column:5}},type:"if",locations:[{start:{line:181,column:4},end:{line:212,column:5}},{start:{line:202,column:11},end:{line:212,column:5}}],line:181},40:{loc:{start:{line:182,column:6},end:{line:201,column:7}},type:"if",locations:[{start:{line:182,column:6},end:{line:201,column:7}},{start:{line:191,column:13},end:{line:201,column:7}}],line:182},41:{loc:{start:{line:188,column:57},end:{line:188,column:104}},type:"binary-expr",locations:[{start:{line:188,column:57},end:{line:188,column:64}},{start:{line:188,column:68},end:{line:188,column:104}}],line:188},42:{loc:{start:{line:208,column:42},end:{line:208,column:93}},type:"binary-expr",locations:[{start:{line:208,column:42},end:{line:208,column:53}},{start:{line:208,column:57},end:{line:208,column:93}}],line:208},43:{loc:{start:{line:209,column:43},end:{line:209,column:94}},type:"binary-expr",locations:[{start:{line:209,column:43},end:{line:209,column:54}},{start:{line:209,column:58},end:{line:209,column:94}}],line:209},44:{loc:{start:{line:233,column:20},end:{line:233,column:120}},type:"cond-expr",locations:[{start:{line:233,column:62},end:{line:233,column:89}},{start:{line:233,column:92},end:{line:233,column:120}}],line:233},45:{loc:{start:{line:235,column:2},end:{line:300,column:3}},type:"if",locations:[{start:{line:235,column:2},end:{line:300,column:3}},{start:{line:252,column:9},end:{line:300,column:3}}],line:235},46:{loc:{start:{line:252,column:9},end:{line:300,column:3}},type:"if",locations:[{start:{line:252,column:9},end:{line:300,column:3}},{start:{line:268,column:9},end:{line:300,column:3}}],line:252},47:{loc:{start:{line:268,column:9},end:{line:300,column:3}},type:"if",locations:[{start:{line:268,column:9},end:{line:300,column:3}},{start:{line:284,column:9},end:{line:300,column:3}}],line:268}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0},b:{0:[0,0,0],1:[0,0,0],2:[0,0,0,0,0,0],3:[0,0],4:[0,0,0],5:[0,0,0,0,0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0],33:[0,0,0,0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx"],names:[],mappings:"AAiVM;AAjVN,OAAO,WAAW;AAElB,OAAO,kBAAkB;AACzB,OAAO,kBAAiC;AACxC,OAAO,kBAAkB;AACzB,OAAO,wBAAwB;AAC/B,SAAQ,YAAY,qBAAoB;AACxC,SAAQ,2BAA0B;AAIlC,SAAS,oBAAoB,OAAY;AACvC,SAAQ,MAAM,QAAQ,KAAK,KAAK,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM;AACrE;AAEA,SAAS,gBAAgB,OAAY;AACnC,SACE,MAAM,QAAQ,KAAK,KACnB,MAAM,WAAW,KACjB,MAAM,CAAC,MAAM;AAEjB;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,SAAS,KACrB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW;AAAA,EAEpB,CAAC;AAEL;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SAAS,cACf,OAAO,UAAU,eAAe,KAAK,OAAO,UAAU;AAE1D;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,MAAM,SAAS,KACrB,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW,KAChB,OAAO,KAAK,CAAC,MAAO;AAAA,EAExB,CAAC;AAEL;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,mBAAmB,KAAK,KACxB,mBAAmB,KAAK;AAE5B;AAEA,SAAS,YAAY,OAAgD;AACnE,QAAM,QAAQ,CAAC,UAAU,WAAW,QAAQ;AAC5C,SAAO,MAAM,SAAS,OAAO,KAAM;AACrC;AAEA,SAAS,oBAAoB,QAAyD;AACpF,MAAI,MAAM,QAAQ,MAAM,GAAG;AACzB,WAAO,OAAO,MAAM,WAAW;AAAA,EACjC;AACA,SAAO;AACT;AAEA,SAAS,YAAY,OAAY,YAAU,CAAC,GAAU;AACpD,MAAI,UAAU,QAAW;AACvB,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,UAAU,SAAS,WAAW,oBAAoB,KAAK,GAAG;AACjE,WAAO;AAAA,EACT,WACS,UAAU,SAAS,iBAAiB,oBAAoB,KAAK,GAAG;AACvE,WAAO;AAAA,EACT,WACS,UAAU,SAAS,cAAc;AACxC,WAAO;AAAA,EACT,WACS,UAAU,SAAS,WAAW;AACrC,WAAO;AAAA,EACT,WACS,UAAU,SAAS,kCAAkC;AAC5D,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAgBA,MAAM,gBAA8C,CAAC,UAAU;AAC7D,QAAM,CAAC,UAAU,WAAW,IAAI,MAAM;AAAA,IACpC,YAAY,MAAM,OAAO,MAAM,SAAS;AAAA,EAC1C;AACA,QAAM,CAAC,WAAW,YAAY,IAAI,MAAM,SAAS,KAAK;AAEtD,QAAM,UAAU,MAAM;AACpB,QAAI,CAAC,WAAW;AACd,kBAAY,YAAY,MAAM,OAAO,MAAM,SAAS,CAAC;AAAA,IACvD;AAAA,EACF,GAAG,CAAC,MAAM,OAAO,MAAM,WAAW,SAAS,CAAC;AAE5C,QAAM,uBAAuB,CAAC,cAAmB;AAC/C,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAEA,QAAM,UAAU,MAAM;AACpB,UAAM,QAAQ,MAAM,MAAM,MAAM,MAAM,CAAC;AACvC,UAAM,WAAW,MAAM,MAAM,SAAS,CAAC;AACvC,QAAI,OAAO,SAAS,CAAC,MAAM,UAAU;AACnC,YAAM,KAAK;AAAA,QACT,EAAE,MAAM,SAAS,CAAC,EAAE,OAAO,GAAG,OAAO,SAAS,CAAC,EAAE,MAAM;AAAA,QACvD,SAAS,CAAC;AAAA,MACZ,CAAC;AAAA,IACH,OAAO;AACL,YAAM,KAAK,CAAC,SAAS,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC;AAAA,IAC3C;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,MAAM;AAAA,MACT;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,YAAY;AAAA,EAC9C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,EAAE,WAAW,UAAU,IAAI;AACjC,UAAM,SAAS,WAAW,UAAU,OAAO;AAC3C,gBAAY,OAAO;AAAA,EACrB;AAEA,QAAM,aAAa,CAAC,YAAoB;AACtC,UAAM,QAAQ,MAAM,MAAM,MAAM,MAAM,CAAC;AACvC,UAAM,OAAO,SAAS,CAAC;AAEvB,QAAI,eAAoB;AAAA,MACtB,GAAG,MAAM;AAAA,MACT;AAAA,IACF;AAEA,QAAI,MAAM,WAAW,GAAG;AACtB,qBAAe,MAAM,CAAC,EAAE,CAAC;AAAA,IAC3B;AAEA,UAAM,SAAS,MAAM,WAAW,YAAY;AAAA,EAC9C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,EAAE,MAAM,IAAI;AAElB,QAAI;AACJ,QAAI,OAAO,UAAU,UAAU;AAC7B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,KAAK,CAAC,EAAE,MAAM,KAAK,CAAC,KAAK,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACvE,CAAC;AAAA,QACH;AAAA,MACF,OAAO;AACL,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,YACxC,CAAC,IAAI,oBAAoB,MAAM,SAAS,CAAC;AAAA,UAC3C;AAAA,QACF;AAAA,MACF;AAAA,IACF,OAAO;AACL,iBAAW;AAAA,QACT,OAAO;AAAA,UACL,CAAC,GAAG,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACjD,CAAC,IAAI,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,QACpD;AAAA,MACF;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,QAAQ;AAAA,EAC1C;AAEA,QAAM,iBAAiB,MAAM;AAC3B,UAAM,EAAE,OAAO,UAAU,IAAI;AAE7B,QAAI,gBAAgB,KAAK,GAAG;AAC1B,YAAM,SAAS,WAAW;AAAA,QACxB,MAAM;AAAA,QACN,UAAU,MAAM,CAAC;AAAA,MACnB,CAAC;AACD,kBAAY,OAAO;AAAA,IACrB,WAAW,oBAAoB,KAAK,GAAG;AACrC,YAAM,SAAS,WAAW,MAAM,CAAC,CAAC;AAClC,kBAAY,OAAO;AAAA,IACrB;AAAA,EACF;AAEA,QAAM,UAAU,MAAM;AACpB,UAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,WACE,gBAAgB,KAAK,KACrB,oBAAoB,KAAK,KACzB,YAAY,KAAK,KAChB,MAAM,QAAQ,KAAK,KAAK,UAAU,SAAS;AAAA,EAEhD;AAEA,QAAM,iBAAiB,MAAM;AAC3B,UAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,QAAI;AAEJ,QAAI,OAAO,UAAU,YAAY,WAAW,OAAO;AACjD,mBAAa,cAAc,gBAAgB,OAAO,SAAS;AAAA,IAC7D,WAAW,mBAAmB,KAAK,GAAG;AACpC,mBAAa,CAAC,OAAO,MAAM,QAAQ;AAAA,IACrC,OAAO;AACL,mBAAa,CAAC,WAAW,SAAS,MAAM,UAAU,OAAO;AAAA,IAC3D;AACA,UAAM,SAAS,MAAM,WAAW,UAAU;AAAA,EAC5C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,eAAe,qBAAqB,MAAM,SAAS;AACzD,UAAM,YAAY,iBAAiB,gBAAgB,KAAK;AACxD,UAAM,EAAE,MAAM,IAAI;AAClB,QAAI;AAEJ,QAAI,OAAO,UAAU,UAAU;AAC7B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,EAAE,MAAM,KAAK,CAAC,GAAG,OAAO,UAAU,GAAG,KAAK,CAAC,KAAK,oBAAoB,MAAM,SAAS,CAAC;AAAA,UAC9F,CAAC;AAAA,QACH;AAAA,MACF,OAAO;AACL,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,EAAE,MAAM,GAAG,OAAO,UAAU,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,YACpE,CAAC,EAAE,MAAM,IAAI,OAAO,UAAU,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACvE;AAAA,QACF;AAAA,MACF;AAAA,IACF,OAAO;AACL,iBAAW;AAAA,QACT,UAAU;AAAA,QACV,MAAM;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,OAAO;AAAA,UACL,CAAC,EAAE,MAAM,GAAG,OAAO,UAAU,GAAG,MAAM,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACnF,CAAC,EAAE,MAAM,IAAI,OAAO,UAAU,GAAG,MAAM,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,QACtF;AAAA,MACF;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,QAAQ;AAAA,EAC1C;AAEA,QAAM,wBAAwB,MAAM;AAClC,UAAM,aAAa;AAAA,MACjB;AAAA,MACA,CAAC,QAAQ;AAAA,MACT,CAAC,WAAW;AAAA,MACZ;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,UAAU;AAAA,EAC5C;AAEA,QAAM,gBAAgB,MAAM;AAC1B,iBAAa,IAAI;AAAA,EACnB;AAEA,QAAM,kBAAkB,MAAM;AAC5B,iBAAa,KAAK;AAAA,EACpB;AAEA,QAAM,YACJ,MAAM,UAAU,YAAY,MAAM,QAAQ,8BAA8B;AAE1E,MAAI;AAEJ,MAAI,aAAa,cAAc;AAC7B,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,MAAM,MAAM,SAAS;AAAA,QACnD;AAAA,QACA,QAAQ;AAAA,QACR,UAAU;AAAA,QACV,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,SAAS;AAAA,QACT,QAAQ;AAAA;AAAA,IACV;AAAA,EAEJ,WAAW,aAAa,iBAAiB;AACvC,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,cAAc;AAAA,QACd,WAAW;AAAA,QACX,wBAAwB;AAAA,QACxB,mBAAmB;AAAA;AAAA,IACrB;AAAA,EAEJ,WAAW,aAAa,iBAAiB;AACvC,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,cAAc;AAAA,QACd,WAAW;AAAA,QACX,wBAAwB;AAAA,QACxB,mBAAmB;AAAA;AAAA,IACrB;AAAA,EAEJ,OAAO;AACL,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,aAAa;AAAA,QACb,aAAa;AAAA,QACb,mBAAmB;AAAA,QACnB,kBAAkB;AAAA;AAAA,IACpB;AAAA,EAEJ;AAEA,SACE,oBAAC,SAAI,WAAW,WAAW,eAAa,0BAA0B,MAAM,WACrE,qBACH;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cec93a709e0799aecc929100cb853febe363652d"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ct=function(){return s},s}ct();function H$(n){return ct().f[0]++,ct().s[0]++,ct().b[0][0]++,Array.isArray(n)&&(ct().b[0][1]++,n.length===2)&&(ct().b[0][2]++,n[0]==="literal")}function Z$(n){return ct().f[1]++,ct().s[1]++,ct().b[1][0]++,Array.isArray(n)&&(ct().b[1][1]++,n.length===2)&&(ct().b[1][2]++,n[0]==="get")}function DDe(n){return ct().f[2]++,ct().s[2]++,ct().b[2][0]++,typeof n=="object"&&(ct().b[2][1]++,n.stops)&&(ct().b[2][2]++,typeof n.property>"u")&&(ct().b[2][3]++,Array.isArray(n.stops))&&(ct().b[2][4]++,n.stops.length>1)&&(ct().b[2][5]++,n.stops.every(e=>(ct().f[3]++,ct().s[3]++,ct().b[3][0]++,Array.isArray(e)&&(ct().b[3][1]++,e.length===2))))}function Ose(n){return ct().f[4]++,ct().s[4]++,ct().b[4][0]++,typeof n=="object"&&(ct().b[4][1]++,n.type==="identity")&&(ct().b[4][2]++,Object.prototype.hasOwnProperty.call(n,"property"))}function RDe(n){return ct().f[5]++,ct().s[5]++,ct().b[5][0]++,typeof n=="object"&&(ct().b[5][1]++,n.stops)&&(ct().b[5][2]++,typeof n.property<"u")&&(ct().b[5][3]++,n.stops.length>1)&&(ct().b[5][4]++,Array.isArray(n.stops))&&(ct().b[5][5]++,n.stops.every(e=>(ct().f[6]++,ct().s[6]++,ct().b[6][0]++,Array.isArray(e)&&(ct().b[6][1]++,e.length===2)&&(ct().b[6][2]++,typeof e[0]=="object"))))}function PDe(n){return ct().f[7]++,ct().s[7]++,ct().b[7][0]++,Ose(n)||(ct().b[7][1]++,RDe(n))}function FK(n){ct().f[8]++;const e=(ct().s[8]++,["string","boolean","number"]);return ct().s[9]++,e.includes(typeof n)}function X$(n){return ct().f[9]++,ct().s[10]++,Array.isArray(n)?(ct().b[8][0]++,ct().s[11]++,n.every(FK)):(ct().b[8][1]++,ct().s[12]++,!1)}function J$(n,e=(ct().b[9][0]++,{})){return ct().f[10]++,ct().s[13]++,n===void 0?(ct().b[10][0]++,ct().s[14]++,"value"):(ct().b[10][1]++,ct().s[15]++,FK(n)?(ct().b[11][0]++,ct().s[16]++,"value"):(ct().b[11][1]++,ct().s[17]++,ct().b[13][0]++,e.type==="array"&&(ct().b[13][1]++,X$(n))?(ct().b[12][0]++,ct().s[18]++,"value"):(ct().b[12][1]++,ct().s[19]++,ct().b[15][0]++,e.type==="numberArray"&&(ct().b[15][1]++,X$(n))?(ct().b[14][0]++,ct().s[20]++,"value"):(ct().b[14][1]++,ct().s[21]++,e.type==="colorArray"?(ct().b[16][0]++,ct().s[22]++,"value"):(ct().b[16][1]++,ct().s[23]++,e.type==="padding"?(ct().b[17][0]++,ct().s[24]++,"value"):(ct().b[17][1]++,ct().s[25]++,e.type==="variableAnchorOffsetCollection"?(ct().b[18][0]++,ct().s[26]++,"value"):(ct().b[18][1]++,ct().s[27]++,DDe(n)?(ct().b[19][0]++,ct().s[28]++,"zoom_function"):(ct().b[19][1]++,ct().s[29]++,PDe(n)?(ct().b[20][0]++,ct().s[30]++,"data_function"):(ct().b[20][1]++,ct().s[31]++,"expression")))))))))}ct().s[32]++;const LDe=n=>{ct().f[11]++;const[e,t]=(ct().s[33]++,On.useState(J$(n.value,n.fieldSpec))),[i,r]=(ct().s[34]++,On.useState(!1));ct().s[35]++,On.useEffect(()=>{ct().f[12]++,ct().s[36]++,i?ct().b[21][1]++:(ct().b[21][0]++,ct().s[37]++,t(J$(n.value,n.fieldSpec)))},[n.value,n.fieldSpec,i]),ct().s[38]++;const o=$=>(ct().f[13]++,ct().s[39]++,$.expression.interpolated?(ct().b[22][0]++,ct().s[40]++,"exponential"):(ct().b[22][1]++,ct().s[41]++,$.type==="number"?(ct().b[23][0]++,ct().s[42]++,"interval"):(ct().b[23][1]++,ct().s[43]++,"categorical")));ct().s[44]++;const s=()=>{ct().f[14]++;const $=(ct().s[45]++,n.value.stops.slice(0)),Z=(ct().s[46]++,$[$.length-1]);ct().s[47]++,typeof Z[0]=="object"?(ct().b[24][0]++,ct().s[48]++,$.push([{zoom:Z[0].zoom+1,value:Z[0].value},Z[1]])):(ct().b[24][1]++,ct().s[49]++,$.push([Z[0]+1,Z[1]]));const ee=(ct().s[50]++,{...n.value,stops:$});ct().s[51]++,n.onChange(n.fieldName,ee)};ct().s[52]++;const a=()=>{ct().f[15]++;const{fieldSpec:$,fieldName:Z}=(ct().s[53]++,n);ct().s[54]++,n.onChange(Z,$.default),ct().s[55]++,t("value")};ct().s[56]++;const c=$=>{ct().f[16]++;const Z=(ct().s[57]++,n.value.stops.slice(0));ct().s[58]++,Z.splice($,1);let ee=(ct().s[59]++,{...n.value,stops:Z});ct().s[60]++,Z.length===1?(ct().b[25][0]++,ct().s[61]++,ee=Z[0][1]):ct().b[25][1]++,ct().s[62]++,n.onChange(n.fieldName,ee)};ct().s[63]++;const f=()=>{ct().f[17]++;const{value:$}=(ct().s[64]++,n);let Z;ct().s[65]++,typeof $=="object"?(ct().b[26][0]++,ct().s[66]++,$.stops?(ct().b[27][0]++,ct().s[67]++,Z={base:$.base,stops:$.stops.map(ee=>(ct().f[18]++,ct().s[68]++,[ee[0].zoom,(ct().b[28][0]++,ee[1]||(ct().b[28][1]++,op(n.fieldSpec)))]))}):(ct().b[27][1]++,ct().s[69]++,Z={base:$.base,stops:[[6,op(n.fieldSpec)],[10,op(n.fieldSpec)]]})):(ct().b[26][1]++,ct().s[70]++,Z={stops:[[6,(ct().b[29][0]++,$||(ct().b[29][1]++,op(n.fieldSpec)))],[10,(ct().b[30][0]++,$||(ct().b[30][1]++,op(n.fieldSpec)))]]}),ct().s[71]++,n.onChange(n.fieldName,Z)};ct().s[72]++;const y=()=>{ct().f[19]++;const{value:$,fieldName:Z}=(ct().s[73]++,n);ct().s[74]++,Z$($)?(ct().b[31][0]++,ct().s[75]++,n.onChange(Z,{type:"identity",property:$[1]}),ct().s[76]++,t("value")):(ct().b[31][1]++,ct().s[77]++,H$($)?(ct().b[32][0]++,ct().s[78]++,n.onChange(Z,$[1]),ct().s[79]++,t("value")):ct().b[32][1]++)};ct().s[80]++;const _=()=>{ct().f[20]++;const{value:$,fieldSpec:Z}=(ct().s[81]++,n);return ct().s[82]++,ct().b[33][0]++,Z$($)||(ct().b[33][1]++,H$($))||(ct().b[33][2]++,FK($))||(ct().b[33][3]++,Array.isArray($)&&(ct().b[33][4]++,Z.type==="array"))};ct().s[83]++;const E=()=>{ct().f[21]++;const{value:$,fieldSpec:Z}=(ct().s[84]++,n);let ee;ct().s[85]++,ct().b[35][0]++,typeof $=="object"&&(ct().b[35][1]++,"stops"in $)?(ct().b[34][0]++,ct().s[86]++,ee=Lhe.convertFunction($,Z)):(ct().b[34][1]++,ct().s[87]++,Ose($)?(ct().b[36][0]++,ct().s[88]++,ee=["get",$.property]):(ct().b[36][1]++,ct().s[89]++,ee=["literal",(ct().b[37][0]++,$||(ct().b[37][1]++,n.fieldSpec.default))])),ct().s[90]++,n.onChange(n.fieldName,ee)};ct().s[91]++;const I=()=>{ct().f[22]++;const $=(ct().s[92]++,o(n.fieldSpec)),Z=(ct().s[93]++,$==="categorical"?(ct().b[38][0]++,""):(ct().b[38][1]++,0)),{value:ee}=(ct().s[94]++,n);let X;ct().s[95]++,typeof ee=="object"?(ct().b[39][0]++,ct().s[96]++,ee.stops?(ct().b[40][0]++,ct().s[97]++,X={property:"",type:$,base:ee.base,stops:ee.stops.map(W=>(ct().f[23]++,ct().s[98]++,[{zoom:W[0],value:Z},(ct().b[41][0]++,W[1]||(ct().b[41][1]++,op(n.fieldSpec)))]))}):(ct().b[40][1]++,ct().s[99]++,X={property:"",type:$,base:ee.base,stops:[[{zoom:6,value:Z},op(n.fieldSpec)],[{zoom:10,value:Z},op(n.fieldSpec)]]})):(ct().b[39][1]++,ct().s[100]++,X={property:"",type:$,base:ee.base,stops:[[{zoom:6,value:Z},(ct().b[42][0]++,n.value||(ct().b[42][1]++,op(n.fieldSpec)))],[{zoom:10,value:Z},(ct().b[43][0]++,n.value||(ct().b[43][1]++,op(n.fieldSpec)))]]}),ct().s[101]++,n.onChange(n.fieldName,X)};ct().s[102]++;const P=()=>{ct().f[24]++;const $=(ct().s[103]++,["interpolate",["linear"],["elevation"],0,"black",2e3,"white"]);ct().s[104]++,n.onChange(n.fieldName,$)};ct().s[105]++;const K=()=>{ct().f[25]++,ct().s[106]++,r(!0)};ct().s[107]++;const z=()=>{ct().f[26]++,ct().s[108]++,r(!1)},Q=(ct().s[109]++,n.fieldSpec.default===n.value?(ct().b[44][0]++,"maputnik-default-property"):(ct().b[44][1]++,"maputnik-modified-property"));let V;return ct().s[110]++,e==="expression"?(ct().b[45][0]++,ct().s[111]++,V=te.jsx(zoe,{errors:n.errors,onChange:n.onChange.bind(null,n.fieldName),canUndo:_,onUndo:y,onDelete:a,fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onFocus:K,onBlur:z})):(ct().b[45][1]++,ct().s[112]++,e==="zoom_function"?(ct().b[46][0]++,ct().s[113]++,V=te.jsx(kDe,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onDeleteStop:c,onAddStop:s,onChangeToDataFunction:I,onExpressionClick:E})):(ct().b[46][1]++,ct().s[114]++,e==="data_function"?(ct().b[47][0]++,ct().s[115]++,V=te.jsx(IDe,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onDeleteStop:c,onAddStop:s,onChangeToZoomFunction:f,onExpressionClick:E})):(ct().b[47][1]++,ct().s[116]++,V=te.jsx(EDe,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onZoomClick:f,onDataClick:I,onExpressionClick:E,onElevationClick:P})))),ct().s[117]++,te.jsx("div",{className:Q,"data-wd-key":"spec-field-container:"+n.fieldName,children:V})};function br(){var n="/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",e="2b5da791871b9b38760c659b15188ae0aee85eaa",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",statementMap:{0:{start:{line:4,column:23},end:{line:4,column:117}},1:{start:{line:6,column:20},end:{line:6,column:60}},2:{start:{line:7,column:16},end:{line:7,column:49}},3:{start:{line:8,column:20},end:{line:8,column:36}},4:{start:{line:9,column:2},end:{line:14,column:3}},5:{start:{line:10,column:4},end:{line:13,column:6}},6:{start:{line:15,column:2},end:{line:20,column:3}},7:{start:{line:16,column:4},end:{line:19,column:6}},8:{start:{line:21,column:2},end:{line:21,column:19}},9:{start:{line:24,column:16},end:{line:24,column:48}},10:{start:{line:25,column:2},end:{line:25,column:49}},11:{start:{line:28,column:21},end:{line:31,column:3}},12:{start:{line:29,column:18},end:{line:29,column:80}},13:{start:{line:30,column:4},end:{line:30,column:51}},14:{start:{line:33,column:23},end:{line:33,column:33}},15:{start:{line:34,column:19},end:{line:52,column:6}},16:{start:{line:35,column:24},end:{line:35,column:87}},17:{start:{line:36,column:20},end:{line:36,column:48}},18:{start:{line:37,column:21},end:{line:37,column:50}},19:{start:{line:38,column:25},end:{line:38,column:82}},20:{start:{line:39,column:24},end:{line:39,column:63}},21:{start:{line:40,column:6},end:{line:51,column:8}},22:{start:{line:53,column:4},end:{line:53,column:98}}},fnMap:{0:{name:"getFieldSpec",decl:{start:{line:5,column:9},end:{line:5,column:21}},loc:{start:{line:5,column:50},end:{line:22,column:1}},line:5},1:{name:"getGroupName",decl:{start:{line:23,column:9},end:{line:23,column:21}},loc:{start:{line:23,column:50},end:{line:26,column:1}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:28,column:21},end:{line:28,column:22}},loc:{start:{line:28,column:45},end:{line:31,column:3}},line:28},3:{name:"(anonymous_3)",decl:{start:{line:32,column:2},end:{line:32,column:3}},loc:{start:{line:32,column:11},end:{line:54,column:3}},line:32},4:{name:"(anonymous_4)",decl:{start:{line:34,column:46},end:{line:34,column:47}},loc:{start:{line:34,column:61},end:{line:52,column:5}},line:34}},branchMap:{0:{loc:{start:{line:9,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},1:{loc:{start:{line:15,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:15,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:24,column:16},end:{line:24,column:48}},type:"binary-expr",locations:[{start:{line:24,column:16},end:{line:24,column:42}},{start:{line:24,column:46},end:{line:24,column:48}}],line:24},3:{loc:{start:{line:25,column:9},end:{line:25,column:48}},type:"cond-expr",locations:[{start:{line:25,column:30},end:{line:25,column:37}},{start:{line:25,column:40},end:{line:25,column:48}}],line:25},4:{loc:{start:{line:36,column:20},end:{line:36,column:48}},type:"binary-expr",locations:[{start:{line:36,column:20},end:{line:36,column:42}},{start:{line:36,column:46},end:{line:36,column:48}}],line:36},5:{loc:{start:{line:37,column:21},end:{line:37,column:50}},type:"binary-expr",locations:[{start:{line:37,column:21},end:{line:37,column:44}},{start:{line:37,column:48},end:{line:37,column:50}}],line:37},6:{loc:{start:{line:38,column:25},end:{line:38,column:82}},type:"cond-expr",locations:[{start:{line:38,column:46},end:{line:38,column:62}},{start:{line:38,column:65},end:{line:38,column:82}}],line:38},7:{loc:{start:{line:39,column:24},end:{line:39,column:63}},type:"cond-expr",locations:[{start:{line:39,column:45},end:{line:39,column:52}},{start:{line:39,column:55},end:{line:39,column:63}}],line:39}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx"],names:[],mappings:"AA4Da;AA5Db,OAAO,WAAW;AAElB,OAAO,mBAAmB;AAI1B,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AAIpH,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,YAAY,aAAa,MAAM,WAAW,SAAS;AACzD,QAAM,QAAQ,KAAK,YAAY,MAAM,SAAS;AAC9C,QAAM,YAAY,MAAM,SAAS;AACjC,MAAG,eAAe,QAAQ,SAAS,KAAK,GAAG;AACzC,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,MAAG,cAAc,aAAa;AAC5B,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,aAAa,MAAW,WAAuC,WAAuC;AAC7G,QAAM,QAAQ,KAAK,WAAW,SAAS,KAAK,CAAC;AAC7C,SAAQ,aAAa,QAAS,UAAU;AAC1C;AAUA,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,mBAAmB,CAAC,UAAkB,aAAkB;AACtD,UAAM,QAAQ,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,QAAQ;AAC3E,SAAK,MAAM,SAAS,OAAO,UAAU,QAAQ;AAAA,EAC/C;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,OAAM,IAAI,KAAK;AACtB,UAAM,SAAS,KAAK,MAAM,YAAY,IAAI,eAAa;AACrD,YAAM,YAAY,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,SAAS;AAEhF,YAAM,QAAQ,KAAK,MAAM,MAAM,SAAS,CAAC;AACzC,YAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAC3C,YAAM,aAAa,aAAa,QAC5B,MAAM,SAA+B,IACrC,OAAO,SAAgC;AAC3C,YAAM,YAAY,aAAa,QAAQ,UAAU;AAEjD,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,UAAU,KAAK;AAAA,UAEf;AAAA,UACA,OAAO;AAAA,UACP;AAAA,UACA;AAAA;AAAA,QAJK;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,2BACnB,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2b5da791871b9b38760c659b15188ae0aee85eaa"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return br=function(){return s},s}br();const UDe=(br().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);function KDe(n,e,t){br().f[0]++;const i=(br().s[1]++,Ise(n,e,t)),r=(br().s[2]++,n[i+"_"+e]),o=(br().s[3]++,r[t]);return br().s[4]++,UDe.indexOf(t)>=0?(br().b[0][0]++,br().s[5]++,{...o,values:n.$root.sprite.values}):(br().b[0][1]++,br().s[6]++,t==="text-font"?(br().b[1][0]++,br().s[7]++,{...o,values:n.$root.glyphs.values}):(br().b[1][1]++,br().s[8]++,o))}function Ise(n,e,t){br().f[1]++;const i=(br().s[9]++,br().b[2][0]++,n["paint_"+e]||(br().b[2][1]++,{}));return br().s[10]++,t in i?(br().b[3][0]++,"paint"):(br().b[3][1]++,"layout")}class FDe extends On.Component{onPropertyChange=(br().s[11]++,(e,t)=>{br().f[2]++;const i=(br().s[12]++,Ise(this.props.spec,this.props.layer.type,e));br().s[13]++,this.props.onChange(i,e,t)});render(){br().f[3]++;const{errors:e}=(br().s[14]++,this.props),t=(br().s[15]++,this.props.groupFields.map(i=>{br().f[4]++;const r=(br().s[16]++,KDe(this.props.spec,this.props.layer.type,i)),o=(br().s[17]++,br().b[4][0]++,this.props.layer.paint||(br().b[4][1]++,{})),s=(br().s[18]++,br().b[5][0]++,this.props.layer.layout||(br().b[5][1]++,{})),a=(br().s[19]++,i in o?(br().b[6][0]++,o[i]):(br().b[6][1]++,s[i])),c=(br().s[20]++,i in o?(br().b[7][0]++,"paint"):(br().b[7][1]++,"layout"));return br().s[21]++,te.jsx(LDe,{errors:e,onChange:this.onPropertyChange,fieldName:i,value:a,fieldType:c,fieldSpec:r},i)}));return br().s[22]++,te.jsx("div",{className:"maputnik-property-group",children:t})}}function Bx(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",e="6c9e07ebeb2e5c7112c0b70e483a0c61cf0ea981",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",statementMap:{0:{start:{line:12,column:4},end:{line:27,column:9}},1:{start:{line:18,column:27},end:{line:18,column:74}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:11},end:{line:28,column:3}},line:11},1:{name:"(anonymous_1)",decl:{start:{line:18,column:19},end:{line:18,column:20}},loc:{start:{line:18,column:27},end:{line:18,column:74}},line:18}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx"],names:[],mappings:"AA2BQ,SACE,KADF;AA3BR,OAAO,WAAW;AAClB,SAAQ,iBAAiB,qBAAoB;AAC7C;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AAaP,qBAAqB,yBAAyB,MAAM,UAAiC;AAAA,EACnF,SAAS;AACP,WAAO,qBAAC,iBAAc,MAAM,KAAK,MAAM,IACrC;AAAA;AAAA,QAAC;AAAA;AAAA,UAAqB,WAAU;AAAA,UAC9B,eAAa,wBAAsB,KAAK,MAAM,aAAa;AAAA,UAC3D,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,UAE7D,+BAAC,uBAAoB,WAAU,uCAC7B;AAAA,gCAAC,UAAK,OAAO,EAAC,UAAU,GAAG,cAAc,SAAQ,GAAI,eAAK,MAAM,OAAM;AAAA,YACtE,oBAAC,iBAAc,MAAM,OAAO,WAAU,2FAA0F;AAAA,YAChI,oBAAC,mBAAgB,MAAM,OAAO,WAAU,6FAA4F;AAAA,aACtI;AAAA;AAAA,MACF;AAAA,MACA,oBAAC,sBACE,eAAK,MAAM,UACd;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6c9e07ebeb2e5c7112c0b70e483a0c61cf0ea981"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Bx=function(){return s},s}Bx();class zDe extends On.Component{render(){return Bx().f[0]++,Bx().s[0]++,te.jsxs(Loe,{uuid:this.props.id,children:[te.jsx(Foe,{className:"maputnik-layer-editor-group","data-wd-key":"layer-editor-group:"+this.props["data-wd-key"],onClick:e=>(Bx().f[1]++,Bx().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:te.jsxs(iTe,{className:"maputnik-layer-editor-group__button",children:[te.jsx("span",{style:{flexGrow:1,alignContent:"center"},children:this.props.title}),te.jsx(gX,{size:"2em",className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--up"}),te.jsx(mX,{size:"2em",className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--down"})]})}),te.jsx(aTe,{children:this.props.children})]})}}function fC(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",e="331998a9ac6b18663bcbca1301c32952f465e1af",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",statementMap:{0:{start:{line:6,column:29},end:{line:29,column:1}},1:{start:{line:7,column:12},end:{line:7,column:19}},2:{start:{line:8,column:2},end:{line:28,column:4}},3:{start:{line:30,column:21},end:{line:30,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:29},end:{line:6,column:30}},loc:{start:{line:6,column:40},end:{line:29,column:1}},line:6}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx"],names:[],mappings:"AAoBM;AAlBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AAQtD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,UAAU;AAAA,MAAG,WAAW,OAAO,MAAM;AAAA,MACnD,OAAO,MAAM;AAAA,MACb,eAAY;AAAA,MAEZ;AAAA,QAAC;AAAA;AAAA,UACC,YAAY;AAAA,UACZ,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,UAC9B,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"331998a9ac6b18663bcbca1301c32952f465e1af"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return fC=function(){return s},s}fC();fC().s[0]++;const jDe=n=>{fC().f[0]++;const e=(fC().s[1]++,n.t);return fC().s[2]++,te.jsx(as,{label:e("Min Zoom"),fieldSpec:Tr.layer.minzoom,error:n.error,"data-wd-key":"min-zoom",children:te.jsx(z1,{allowRange:!0,value:n.value,onChange:n.onChange,min:Tr.layer.minzoom.minimum,max:Tr.layer.minzoom.maximum,default:Tr.layer.minzoom.minimum,"data-wd-key":"min-zoom.input"})})},NDe=(fC().s[3]++,Mo()(jDe));function pC(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",e="030101242d82e9c9c34c00cb0f1ee3a368ba29e3",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",statementMap:{0:{start:{line:6,column:29},end:{line:29,column:1}},1:{start:{line:7,column:12},end:{line:7,column:19}},2:{start:{line:8,column:2},end:{line:28,column:4}},3:{start:{line:30,column:21},end:{line:30,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:29},end:{line:6,column:30}},loc:{start:{line:6,column:40},end:{line:29,column:1}},line:6}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx"],names:[],mappings:"AAoBM;AAlBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AAQtD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,UAAU;AAAA,MAAG,WAAW,OAAO,MAAM;AAAA,MACnD,OAAO,MAAM;AAAA,MACb,eAAY;AAAA,MAEZ;AAAA,QAAC;AAAA;AAAA,UACC,YAAY;AAAA,UACZ,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,UAC9B,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"030101242d82e9c9c34c00cb0f1ee3a368ba29e3"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return pC=function(){return s},s}pC();pC().s[0]++;const GDe=n=>{pC().f[0]++;const e=(pC().s[1]++,n.t);return pC().s[2]++,te.jsx(as,{label:e("Max Zoom"),fieldSpec:Tr.layer.maxzoom,error:n.error,"data-wd-key":"max-zoom",children:te.jsx(z1,{allowRange:!0,value:n.value,onChange:n.onChange,min:Tr.layer.maxzoom.minimum,max:Tr.layer.maxzoom.maximum,default:Tr.layer.maxzoom.maximum,"data-wd-key":"max-zoom.input"})})},WDe=(pC().s[3]++,Mo()(GDe));function fv(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",e="bbd273b6557a5df907fed987aa83b7e8030607a2",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",statementMap:{0:{start:{line:5,column:29},end:{line:31,column:1}},1:{start:{line:6,column:12},end:{line:6,column:19}},2:{start:{line:7,column:20},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:30,column:4}},4:{start:{line:32,column:21},end:{line:32,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:29},end:{line:5,column:30}},loc:{start:{line:5,column:40},end:{line:31,column:1}},line:5}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx"],names:[],mappings:"AA2BM;AAzBN,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AAQtD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,QAAM,YAAY;AAAA,IAChB,KAAK;AAAA,MACH;AAAA,IACF;AAAA,EACF;AAEA,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,UAAU;AAAA,MACnB;AAAA,MACA,eAAY;AAAA,MACZ,OAAO,MAAM;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO;AAAA,UACP,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,SAAS,EAAE,YAAY;AAAA,UACvB,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bbd273b6557a5df907fed987aa83b7e8030607a2"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return fv=function(){return s},s}fv();fv().s[0]++;const QDe=n=>{fv().f[0]++;const e=(fv().s[1]++,n.t),t=(fv().s[2]++,{doc:e("Comments for the current layer. This is non-standard and not in the spec.")});return fv().s[3]++,te.jsx(as,{label:e("Comments"),fieldSpec:t,"data-wd-key":"layer-comment",error:n.error,children:te.jsx(zm,{multi:!0,value:n.value,onChange:n.onChange,default:e("Comment..."),"data-wd-key":"layer-comment.input"})})},qDe=(fv().s[4]++,Mo()(QDe));function Ox(){var n="/home/runner/work/maputnik/maputnik/src/libs/format.ts",e="c45fbfac66e994b59070a295e5a7f219cd5d66ac",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/format.ts",statementMap:{0:{start:{line:2,column:2},end:{line:2,column:50}}},fnMap:{0:{name:"formatLayerId",decl:{start:{line:1,column:16},end:{line:1,column:29}},loc:{start:{line:1,column:34},end:{line:3,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:9},end:{line:2,column:49}},type:"cond-expr",locations:[{start:{line:2,column:21},end:{line:2,column:37}},{start:{line:2,column:40},end:{line:2,column:49}}],line:2}},s:{0:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/format.ts"],names:[],mappings:"AAAO,gBAAS,cAAe,IAAwB;AACrD,SAAO,OAAO,KAAK,mBAAmB,IAAI,EAAE;AAC9C;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c45fbfac66e994b59070a295e5a7f219cd5d66ac"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ox=function(){return s},s}Ox();function Tse(n){return Ox().f[0]++,Ox().s[0]++,n===""?(Ox().b[0][0]++,"[empty_string]"):(Ox().b[0][1]++,`'${n}'`)}function Qt(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",e="838074c1cccc813ecacd0208f5f23e782debdabc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",statementMap:{0:{start:{line:24,column:17},end:{line:24,column:19}},1:{start:{line:25,column:2},end:{line:30,column:5}},2:{start:{line:29,column:59},end:{line:29,column:82}},3:{start:{line:31,column:2},end:{line:36,column:5}},4:{start:{line:35,column:59},end:{line:35,column:80}},5:{start:{line:37,column:2},end:{line:42,column:5}},6:{start:{line:41,column:59},end:{line:41,column:80}},7:{start:{line:43,column:2},end:{line:48,column:5}},8:{start:{line:47,column:58},end:{line:47,column:79}},9:{start:{line:49,column:2},end:{line:54,column:5}},10:{start:{line:53,column:58},end:{line:53,column:79}},11:{start:{line:55,column:2},end:{line:55,column:16}},12:{start:{line:58,column:2},end:{line:60,column:3}},13:{start:{line:59,column:4},end:{line:59,column:14}},14:{start:{line:61,column:2},end:{line:63,column:3}},15:{start:{line:62,column:4},end:{line:62,column:37}},16:{start:{line:64,column:17},end:{line:64,column:19}},17:{start:{line:65,column:2},end:{line:72,column:3}},18:{start:{line:66,column:4},end:{line:71,column:7}},19:{start:{line:73,column:2},end:{line:80,column:3}},20:{start:{line:74,column:4},end:{line:79,column:7}},21:{start:{line:81,column:2},end:{line:81,column:16}},22:{start:{line:84,column:21},end:{line:88,column:3}},23:{start:{line:89,column:22},end:{line:93,column:3}},24:{start:{line:94,column:22},end:{line:98,column:3}},25:{start:{line:99,column:2},end:{line:99,column:96}},26:{start:{line:102,column:24},end:{line:109,column:3}},27:{start:{line:111,column:4},end:{line:111,column:17}},28:{start:{line:112,column:25},end:{line:112,column:27}},29:{start:{line:113,column:4},end:{line:115,column:5}},30:{start:{line:114,column:6},end:{line:114,column:39}},31:{start:{line:116,column:4},end:{line:116,column:34}},32:{start:{line:119,column:29},end:{line:119,column:54}},33:{start:{line:120,column:4},end:{line:124,column:5}},34:{start:{line:121,column:6},end:{line:123,column:7}},35:{start:{line:122,column:8},end:{line:122,column:45}},36:{start:{line:125,column:4},end:{line:127,column:6}},37:{start:{line:130,column:4},end:{line:133,column:6}},38:{start:{line:136,column:32},end:{line:139,column:5}},39:{start:{line:140,column:4},end:{line:142,column:7}},40:{start:{line:145,column:18},end:{line:145,column:20}},41:{start:{line:146,column:4},end:{line:148,column:5}},42:{start:{line:147,column:6},end:{line:147,column:62}},43:{start:{line:149,column:35},end:{line:149,column:45}},44:{start:{line:150,column:22},end:{line:150,column:24}},45:{start:{line:151,column:4},end:{line:157,column:7}},46:{start:{line:152,column:6},end:{line:156,column:7}},47:{start:{line:153,column:8},end:{line:155,column:10}},48:{start:{line:159,column:18},end:{line:159,column:34}},49:{start:{line:160,column:4},end:{line:162,column:5}},50:{start:{line:161,column:6},end:{line:161,column:63}},51:{start:{line:163,column:4},end:{line:267,column:5}},52:{start:{line:165,column:8},end:{line:229,column:13}},53:{start:{line:172,column:35},end:{line:172,column:112}},54:{start:{line:181,column:37},end:{line:184,column:15}},55:{start:{line:193,column:31},end:{line:193,column:69}},56:{start:{line:202,column:31},end:{line:202,column:75}},57:{start:{line:210,column:31},end:{line:210,column:70}},58:{start:{line:218,column:31},end:{line:218,column:70}},59:{start:{line:226,column:31},end:{line:226,column:104}},60:{start:{line:231,column:8},end:{line:239,column:16}},61:{start:{line:237,column:29},end:{line:237,column:67}},62:{start:{line:241,column:8},end:{line:250,column:10}},63:{start:{line:252,column:8},end:{line:264,column:10}},64:{start:{line:258,column:14},end:{line:261,column:16}},65:{start:{line:266,column:8},end:{line:266,column:49}},66:{start:{line:270,column:4},end:{line:273,column:7}},67:{start:{line:276,column:14},end:{line:276,column:26}},68:{start:{line:277,column:21},end:{line:277,column:23}},69:{start:{line:278,column:22},end:{line:278,column:43}},70:{start:{line:279,column:19},end:{line:296,column:6}},71:{start:{line:280,column:6},end:{line:280,column:70}},72:{start:{line:282,column:22},end:{line:282,column:30}},73:{start:{line:283,column:6},end:{line:283,column:29}},74:{start:{line:284,column:6},end:{line:295,column:8}},75:{start:{line:297,column:19},end:{line:297,column:48}},76:{start:{line:298,column:18},end:{line:326,column:5}},77:{start:{line:301,column:23},end:{line:301,column:71}},78:{start:{line:306,column:23},end:{line:306,column:68}},79:{start:{line:311,column:23},end:{line:311,column:80}},80:{start:{line:317,column:23},end:{line:317,column:41}},81:{start:{line:323,column:23},end:{line:323,column:40}},82:{start:{line:328,column:6},end:{line:328,column:30}},83:{start:{line:329,column:6},end:{line:329,column:26}},84:{start:{line:331,column:4},end:{line:377,column:9}},85:{start:{line:359,column:33},end:{line:359,column:42}},86:{start:{line:360,column:20},end:{line:360,column:201}},87:{start:{line:380,column:20},end:{line:380,column:58}}},fnMap:{0:{name:"getLayoutForSymbolType",decl:{start:{line:23,column:9},end:{line:23,column:31}},loc:{start:{line:23,column:35},end:{line:56,column:1}},line:23},1:{name:"(anonymous_1)",decl:{start:{line:29,column:52},end:{line:29,column:53}},loc:{start:{line:29,column:59},end:{line:29,column:82}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:35,column:52},end:{line:35,column:53}},loc:{start:{line:35,column:59},end:{line:35,column:80}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:41,column:52},end:{line:41,column:53}},loc:{start:{line:41,column:59},end:{line:41,column:80}},line:41},4:{name:"(anonymous_4)",decl:{start:{line:47,column:51},end:{line:47,column:52}},loc:{start:{line:47,column:58},end:{line:47,column:79}},line:47},5:{name:"(anonymous_5)",decl:{start:{line:53,column:51},end:{line:53,column:52}},loc:{start:{line:53,column:58},end:{line:53,column:79}},line:53},6:{name:"getLayoutForType",decl:{start:{line:57,column:9},end:{line:57,column:25}},loc:{start:{line:57,column:35},end:{line:82,column:1}},line:57},7:{name:"layoutGroups",decl:{start:{line:83,column:9},end:{line:83,column:21}},loc:{start:{line:83,column:36},end:{line:100,column:1}},line:83},8:{name:"(anonymous_8)",decl:{start:{line:103,column:20},end:{line:103,column:21}},loc:{start:{line:103,column:26},end:{line:104,column:5}},line:103},9:{name:"(anonymous_9)",decl:{start:{line:105,column:21},end:{line:105,column:22}},loc:{start:{line:105,column:27},end:{line:106,column:5}},line:105},10:{name:"(anonymous_10)",decl:{start:{line:107,column:22},end:{line:107,column:23}},loc:{start:{line:107,column:28},end:{line:108,column:5}},line:107},11:{name:"(anonymous_11)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:21},end:{line:117,column:3}},line:110},12:{name:"(anonymous_12)",decl:{start:{line:118,column:2},end:{line:118,column:3}},loc:{start:{line:118,column:48},end:{line:128,column:3}},line:118},13:{name:"(anonymous_13)",decl:{start:{line:129,column:2},end:{line:129,column:3}},loc:{start:{line:129,column:44},end:{line:134,column:3}},line:129},14:{name:"(anonymous_14)",decl:{start:{line:135,column:2},end:{line:135,column:3}},loc:{start:{line:135,column:36},end:{line:143,column:3}},line:135},15:{name:"(anonymous_15)",decl:{start:{line:144,column:2},end:{line:144,column:3}},loc:{start:{line:144,column:32},end:{line:268,column:3}},line:144},16:{name:"(anonymous_16)",decl:{start:{line:151,column:19},end:{line:151,column:20}},loc:{start:{line:151,column:30},end:{line:157,column:5}},line:151},17:{name:"(anonymous_17)",decl:{start:{line:172,column:24},end:{line:172,column:25}},loc:{start:{line:172,column:35},end:{line:172,column:112}},line:172},18:{name:"(anonymous_18)",decl:{start:{line:181,column:24},end:{line:181,column:25}},loc:{start:{line:181,column:37},end:{line:184,column:15}},line:181},19:{name:"(anonymous_19)",decl:{start:{line:193,column:24},end:{line:193,column:25}},loc:{start:{line:193,column:31},end:{line:193,column:69}},line:193},20:{name:"(anonymous_20)",decl:{start:{line:202,column:24},end:{line:202,column:25}},loc:{start:{line:202,column:31},end:{line:202,column:75}},line:202},21:{name:"(anonymous_21)",decl:{start:{line:210,column:24},end:{line:210,column:25}},loc:{start:{line:210,column:31},end:{line:210,column:70}},line:210},22:{name:"(anonymous_22)",decl:{start:{line:218,column:24},end:{line:218,column:25}},loc:{start:{line:218,column:31},end:{line:218,column:70}},line:218},23:{name:"(anonymous_23)",decl:{start:{line:226,column:24},end:{line:226,column:25}},loc:{start:{line:226,column:31},end:{line:226,column:104}},line:226},24:{name:"(anonymous_24)",decl:{start:{line:237,column:22},end:{line:237,column:23}},loc:{start:{line:237,column:29},end:{line:237,column:67}},line:237},25:{name:"(anonymous_25)",decl:{start:{line:257,column:22},end:{line:257,column:23}},loc:{start:{line:257,column:34},end:{line:262,column:13}},line:257},26:{name:"(anonymous_26)",decl:{start:{line:269,column:2},end:{line:269,column:3}},loc:{start:{line:269,column:20},end:{line:274,column:3}},line:269},27:{name:"(anonymous_27)",decl:{start:{line:275,column:2},end:{line:275,column:3}},loc:{start:{line:275,column:11},end:{line:378,column:3}},line:275},28:{name:"(anonymous_28)",decl:{start:{line:279,column:53},end:{line:279,column:54}},loc:{start:{line:279,column:64},end:{line:281,column:5}},line:279},29:{name:"(anonymous_29)",decl:{start:{line:281,column:11},end:{line:281,column:12}},loc:{start:{line:281,column:22},end:{line:296,column:5}},line:281},30:{name:"(anonymous_30)",decl:{start:{line:301,column:17},end:{line:301,column:18}},loc:{start:{line:301,column:23},end:{line:301,column:71}},line:301},31:{name:"(anonymous_31)",decl:{start:{line:306,column:17},end:{line:306,column:18}},loc:{start:{line:306,column:23},end:{line:306,column:68}},line:306},32:{name:"(anonymous_32)",decl:{start:{line:311,column:17},end:{line:311,column:18}},loc:{start:{line:311,column:23},end:{line:311,column:80}},line:311},33:{name:"(anonymous_33)",decl:{start:{line:317,column:17},end:{line:317,column:18}},loc:{start:{line:317,column:23},end:{line:317,column:41}},line:317},34:{name:"(anonymous_34)",decl:{start:{line:323,column:17},end:{line:323,column:18}},loc:{start:{line:323,column:23},end:{line:323,column:40}},line:323},35:{name:"handleSelection",decl:{start:{line:327,column:13},end:{line:327,column:28}},loc:{start:{line:327,column:40},end:{line:330,column:5}},line:327},36:{name:"(anonymous_36)",decl:{start:{line:358,column:147},end:{line:358,column:148}},loc:{start:{line:358,column:155},end:{line:361,column:19}},line:358}},branchMap:{0:{loc:{start:{line:58,column:2},end:{line:60,column:3}},type:"if",locations:[{start:{line:58,column:2},end:{line:60,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:58},1:{loc:{start:{line:61,column:2},end:{line:63,column:3}},type:"if",locations:[{start:{line:61,column:2},end:{line:63,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},2:{loc:{start:{line:65,column:2},end:{line:72,column:3}},type:"if",locations:[{start:{line:65,column:2},end:{line:72,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},3:{loc:{start:{line:73,column:2},end:{line:80,column:3}},type:"if",locations:[{start:{line:73,column:2},end:{line:80,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:73},4:{loc:{start:{line:121,column:6},end:{line:123,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:123,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:121},5:{loc:{start:{line:146,column:4},end:{line:148,column:5}},type:"if",locations:[{start:{line:146,column:4},end:{line:148,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:146},6:{loc:{start:{line:152,column:6},end:{line:156,column:7}},type:"if",locations:[{start:{line:152,column:6},end:{line:156,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:152},7:{loc:{start:{line:152,column:10},end:{line:152,column:96}},type:"binary-expr",locations:[{start:{line:152,column:10},end:{line:152,column:22}},{start:{line:152,column:26},end:{line:152,column:55}},{start:{line:152,column:59},end:{line:152,column:96}}],line:152},8:{loc:{start:{line:160,column:4},end:{line:162,column:5}},type:"if",locations:[{start:{line:160,column:4},end:{line:162,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:160},9:{loc:{start:{line:163,column:4},end:{line:267,column:5}},type:"switch",locations:[{start:{line:164,column:6},end:{line:229,column:13}},{start:{line:230,column:6},end:{line:239,column:16}},{start:{line:240,column:6},end:{line:250,column:10}},{start:{line:251,column:6},end:{line:264,column:10}},{start:{line:265,column:6},end:{line:266,column:49}}],line:163},10:{loc:{start:{line:187,column:10},end:{line:195,column:11}},type:"binary-expr",locations:[{start:{line:187,column:10},end:{line:187,column:48}},{start:{line:187,column:68},end:{line:195,column:11}}],line:187},11:{loc:{start:{line:196,column:10},end:{line:204,column:11}},type:"binary-expr",locations:[{start:{line:196,column:10},end:{line:196,column:60}},{start:{line:196,column:80},end:{line:204,column:11}}],line:196},12:{loc:{start:{line:226,column:83},end:{line:226,column:103}},type:"cond-expr",locations:[{start:{line:226,column:93},end:{line:226,column:99}},{start:{line:226,column:102},end:{line:226,column:103}}],line:226},13:{loc:{start:{line:280,column:15},end:{line:280,column:68}},type:"binary-expr",locations:[{start:{line:280,column:15},end:{line:280,column:41}},{start:{line:280,column:45},end:{line:280,column:68}}],line:280},14:{loc:{start:{line:297,column:19},end:{line:297,column:48}},type:"binary-expr",locations:[{start:{line:297,column:19},end:{line:297,column:42}},{start:{line:297,column:46},end:{line:297,column:48}}],line:297},15:{loc:{start:{line:310,column:14},end:{line:310,column:66}},type:"cond-expr",locations:[{start:{line:310,column:45},end:{line:310,column:54}},{start:{line:310,column:57},end:{line:310,column:66}}],line:310}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0,0],8:[0,0],9:[0,0,0,0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx"],names:["layer"],mappings:"AAuN2B,SA4EL,UA3Ed,KADmB;AAvN3B,OAAO,WAAuB;AAC9B,SAAS,SAAS,QAAQ,MAAM,gBAAgB;AAChD,SAAQ,iBAAgB;AACxB,SAAQ,kBAAiB;AACzB,SAAS,mBAAmB;AAE5B,SAAQ,UAAS;AAEjB,OAAO,eAAe;AACtB,OAAO,kBAAkB;AACzB,OAAO,mBAAmB;AAC1B,OAAO,sBAAsB;AAC7B,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,YAAY,sBAAsB;AAC3C,SAAQ,qBAAoB;AAC5B,SAA+B,uBAAuB;AAEtD,SAAS,yBAAyB;AAUlC,SAAS,uBAAuB,GAAqC;AACnE,QAAM,SAAgC,CAAC;AACvC,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,2BAA2B;AAAA,IACpC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,SAAS,CAAC;AAAA,EAC9E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,wBAAwB;AAAA,IACjC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC5E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,wBAAwB;AAAA,IACjC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC5E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,uBAAuB;AAAA,IAChC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,cAAc,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC3E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,uBAAuB;AAAA,IAChC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,cAAc,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC3E,CAAC;AACD,SAAO;AACT;AAEA,SAAS,iBAAiB,MAAkC,GAAqC;AAC/F,MAAI,OAAO,KAAK,GAAG,MAAM,KAAK,MAAM,EAAE,QAAQ,IAAI,IAAI,GAAG;AACvD,WAAO,CAAC;AAAA,EACV;AACA,MAAI,SAAS,UAAU;AACrB,WAAO,uBAAuB,CAAC;AAAA,EACjC;AACA,QAAM,SAAgC,CAAC;AACvC,MAAI,OAAO,KAAK,GAAG,WAAW,IAAI,CAAC,EAAE,SAAS,GAAG;AAC/C,WAAO,KAAK;AAAA,MACV,OAAO,EAAE,kBAAkB;AAAA,MAC3B,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,QAAQ,OAAO,KAAK,GAAG,WAAW,IAAI,CAAC;AAAA,IACzC,CAAC;AAAA,EACH;AACA,MAAI,OAAO,KAAK,GAAG,YAAY,IAAI,CAAC,EAAE,SAAS,GAAG;AAChD,WAAO,KAAK;AAAA,MACV,OAAO,EAAE,mBAAmB;AAAA,MAC5B,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,QAAQ,OAAO,KAAK,GAAG,YAAY,IAAI,CAAC;AAAA,IAC1C,CAAC;AAAA,EACH;AACA,SAAO;AACT;AAEA,SAAS,aAAa,WAAuC,GAA8E;AACzI,QAAM,aAAa;AAAA,IACjB,IAAI;AAAA,IACJ,OAAO,EAAE,OAAO;AAAA,IAChB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,QAAQ;AAAA,IACjB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,aAAa;AAAA,IACtB,MAAM;AAAA,EACR;AACA,SAAO,CAAC,YAAY,WAAW,EAC5B,OAAO,iBAAiB,WAAW,CAAC,CAAC,EACrC,OAAO,CAAC,WAAW,CAAC;AACzB;AAwBA,MAAM,4BAA4B,MAAM,UAAsD;AAAA,EAC5F,OAAO,eAAe;AAAA,IACpB,gBAAgB,MAAM;AAAA,IAAC;AAAA,IACvB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,kBAAkB,MAAM;AAAA,IAAC;AAAA,EAC3B;AAAA,EAEA,YAAY,OAAiC;AAC3C,UAAM,KAAK;AAEX,UAAM,eAAyC,CAAC;AAChD,eAAW,SAAS,aAAa,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC,GAAG;AAChE,mBAAa,MAAM,KAAK,IAAI;AAAA,IAC9B;AAEA,SAAK,QAAQ,EAAE,aAAa;AAAA,EAC9B;AAAA,EAEA,OAAO,yBAAyB,OAA2C,OAAyB;AAClG,UAAM,mBAAmB,EAAE,GAAG,MAAM,aAAa;AAEjD,eAAW,SAAS,iBAAiB,MAAM,MAAM,MAAM,MAAM,CAAC,GAAG;AAC/D,UAAG,EAAE,MAAM,SAAS,mBAAmB;AACrC,yBAAiB,MAAM,KAAK,IAAI;AAAA,MAClC;AAAA,IACF;AAEA,WAAO;AAAA,MACL,cAAc;AAAA,IAChB;AAAA,EACF;AAAA,EAGA,eAAe,OAAwC,UAAkB,UAAe;AACtF,SAAK,MAAM;AAAA,MACT,KAAK,MAAM;AAAA,MACX,eAAe,KAAK,MAAM,OAAO,OAAO,UAAU,QAAQ;AAAA,IAC5D;AAAA,EACF;AAAA,EAEA,cAAc,YAAoB,QAAiB;AACjD,UAAM,sBAAsB;AAAA,MAC1B,GAAG,KAAK,MAAM;AAAA,MACd,CAAC,UAAU,GAAG;AAAA,IAChB;AACA,SAAK,SAAS;AAAA,MACZ,cAAc;AAAA,IAChB,CAAC;AAAA,EACH;AAAA,EAEA,gBAAgB,MAAc,QAAgC;AAC5D,QAAI,UAAU;AACd,QAAG,KAAK,MAAM,MAAM,UAAU;AAC5B,gBAAW,KAAK,MAAM,MAAM,SAAiB,kBAAkB;AAAA,IACjE;AACA,UAAM,EAAC,QAAQ,WAAU,IAAI,KAAK;AAElC,UAAM,YAA+B,CAAC;AACtC,WAAQ,QAAQ,WAAS;AACvB,UACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS,YAC3B;AACA,kBAAU,MAAM,OAAO,KAAK,GAAG,IAAI;AAAA,UACjC,SAAS,MAAM,OAAO,KAAK;AAAA,QAC7B;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI;AACJ,UAAM,QAAQ,KAAK,MAAM;AACzB,QAAG,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,SAAS,MAAM,MAAM,GAAG;AACzE,uBAAiB,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAE;AAAA,IACpD;AAEA,YAAO,MAAM;AAAA,MACX,KAAK;AAAS,eAAO,qBAAC,SACpB;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,OAAM;AAAA,cACN,OAAO,UAAU;AAAA,cACjB,UAAU,WAAS,KAAK,MAAM,gBAAgB,KAAK,MAAM,YAAY,KAAK,MAAM,MAAM,IAAI,KAAK;AAAA;AAAA,UACjG;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,UAAU;AAAA,cACV,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,aAAW,KAAK,MAAM;AAAA,gBAC9B,KAAK,MAAM;AAAA,gBACX,WAAW,KAAK,MAAM,OAAO,OAAO;AAAA,cACtC;AAAA;AAAA,UACF;AAAA,UACC,KAAK,MAAM,MAAM,SAAS,gBAAgB;AAAA,YAAC;AAAA;AAAA,cAC1C,OAAO,UAAU;AAAA,cACjB,WAAW,OAAO,KAAK,KAAK,MAAM,OAAQ;AAAA,cAC1C,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,UACtD;AAAA,UAEC,CAAC,kBAAkB,SAAS,KAAK,MAAM,MAAM,IAAI,KAClD;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU,cAAc;AAAA,cAC/B;AAAA,cACA,OAAQ,KAAK,MAAM,MAAc,cAAc;AAAA,cAC/C,UAAU,OAAK,KAAK,eAAe,MAAM,gBAAgB,CAAC;AAAA;AAAA,UAC5D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,eAAe,YAAY,oBAAoB,KAAK,KAAM,SAAY,CAAC;AAAA;AAAA,UAC7F;AAAA,WACF;AAAA,MACA,KAAK;AAAU,eAAO,oBAAC,SACrB,8BAAC,SAAI,WAAU,kCACb;AAAA,UAAC;AAAA;AAAA,YACC,QAAQ;AAAA,YACR,QAAS,KAAK,MAAM,MAAc;AAAA,YAClC,YAAY,KAAK,MAAM,aAAc,KAAK,MAAM,MAAc,cAAc,CAAC;AAAA,YAC7E,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,QACtD,GACF,GACF;AAAA,MACA,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,QAAQ;AAAA,YACR,OAAO,KAAK,MAAM;AAAA,YAClB,aAAa;AAAA,YACb,MAAM,KAAK,MAAM;AAAA,YACjB,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,QACzC;AAAA,MACF,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,UAAS;AAAA,YACT,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,CAACA,WAA8B;AACvC,mBAAK,MAAM;AAAA,gBACT,KAAK,MAAM;AAAA,gBACXA;AAAA,cACF;AAAA,YACF;AAAA;AAAA,QACF;AAAA,MACF;AAAS,eAAO,gCAAE;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,UAAU,QAAgB;AACxB,SAAK,MAAM,YAAY;AAAA,MACrB,UAAU,KAAK,MAAM;AAAA,MACrB,UAAU,KAAK,MAAM,aAAW;AAAA,IAClC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,UAAM,WAAqB,CAAC;AAC5B,UAAM,YAAY,KAAK,MAAM,MAAM;AACnC,UAAM,SAAS,aAAa,WAAW,CAAC,EAAE,OAAO,WAAS;AACxD,aAAO,EAAE,cAAc,gBAAgB,MAAM,SAAS;AAAA,IACxD,CAAC,EAAE,IAAI,WAAS;AACd,YAAM,UAAU,MAAM;AACtB,eAAS,KAAK,OAAO;AACrB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,eAAa,MAAM;AAAA,UACnB,IAAI;AAAA,UAEJ,OAAO,MAAM;AAAA,UACb,UAAU,KAAK,MAAM,aAAa,MAAM,KAAK;AAAA,UAC7C,gBAAgB,KAAK,cAAc,KAAK,MAAM,MAAM,KAAK;AAAA,UAExD,eAAK,gBAAgB,MAAM,MAAM,MAAM,MAAM;AAAA;AAAA,QALzC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAE3C,UAAM,QAKD;AAAA,MACH,QAAQ;AAAA,QACN,MAAM,EAAE,QAAQ;AAAA,QAChB,SAAS,MAAM,KAAK,MAAM,eAAe,KAAK,MAAM,UAAU;AAAA,QAC9D,OAAO;AAAA,MACT;AAAA,MACA,WAAW;AAAA,QACT,MAAM,EAAE,WAAW;AAAA,QACnB,SAAS,MAAM,KAAK,MAAM,YAAY,KAAK,MAAM,UAAU;AAAA,QAC3D,OAAO;AAAA,MACT;AAAA,MACA,MAAM;AAAA,QACJ,MAAO,OAAO,eAAe,SAAU,EAAE,MAAM,IAAI,EAAE,MAAM;AAAA,QAC3D,SAAS,MAAM,KAAK,MAAM,wBAAwB,KAAK,MAAM,UAAU;AAAA,QACvE,OAAO;AAAA,MACT;AAAA,MACA,aAAa;AAAA,QACX,MAAM,EAAE,eAAe;AAAA,QACvB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,EAAE;AAAA,QAChC,OAAO;AAAA,MACT;AAAA,MACA,eAAe;AAAA,QACb,MAAM,EAAE,iBAAiB;AAAA,QACzB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,CAAE;AAAA,QAChC,OAAO;AAAA,MACT;AAAA,IACF;AAEA,aAAS,gBAAgB,IAAY,OAA6B;AAChE,YAAM,gBAAgB;AACtB,YAAM,EAAE,EAAE,QAAQ;AAAA,IACpB;AAEA,WAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,QAAQ,OAAO,UAAS,GACjE;AAAA,MAAC;AAAA;AAAA,QAAQ,WAAU;AAAA,QACjB,MAAK;AAAA,QACL,cAAY,EAAE,cAAc;AAAA,QAC5B,eAAY;AAAA,QAEZ;AAAA,8BAAC,YAAO,eAAY,uBAClB,+BAAC,SAAI,WAAU,gBACb;AAAA,gCAAC,QAAG,WAAU,uBACX,YAAE,sBAAsB,EAAE,SAAS,cAAc,KAAK,MAAM,MAAM,EAAE,EAAE,CAAC,GAC1E;AAAA,YACA,oBAAC,SAAI,WAAU,sBACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,aAAa;AAAA,gBACb,kBAAkB;AAAA,gBAElB;AAAA;AAAA,oBAAC;AAAA;AAAA,sBACC,IAAG;AAAA,sBACH,eAAY;AAAA,sBACZ,WAAU;AAAA,sBACV,OAAO;AAAA,sBACP,8BAAC,cAAW,WAAU,0BAAyB;AAAA;AAAA,kBACjD;AAAA,kBACA,oBAAC,QACC,8BAAC,QAAG,WAAU,mBACX,iBAAO,KAAK,KAAK,EAAE,IAAI,CAAC,OAAO;AAC9B,0BAAM,OAAO,MAAM,EAAE;AACrB,2BAAO,oBAAC,QACN,8BAAC,YAAS,OAAO,IAAI,WAAU,yBAAwB,eAAa,KAAK,OACtE,eAAK,MACR,KAHc,EAIhB;AAAA,kBACF,CAAC,GACH,GACF;AAAA;AAAA;AAAA,YACF,GACF;AAAA,aACF,GAEF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,uBAAuB;AAAA,cACvB,mBAAmB;AAAA,cACnB,aAAa;AAAA,cAEZ;AAAA;AAAA,UACH;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"838074c1cccc813ecacd0208f5f23e782debdabc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Qt=function(){return s},s}Qt();function YDe(n){Qt().f[0]++;const e=(Qt().s[0]++,[]);return Qt().s[1]++,e.push({title:n("General layout properties"),id:"General_layout_properties",type:"properties",fields:Object.keys(hp.layout_symbol).filter(t=>(Qt().f[1]++,Qt().s[2]++,t.startsWith("symbol-")))}),Qt().s[3]++,e.push({title:n("Text layout properties"),id:"Text_layout_properties",type:"properties",fields:Object.keys(hp.layout_symbol).filter(t=>(Qt().f[2]++,Qt().s[4]++,t.startsWith("text-")))}),Qt().s[5]++,e.push({title:n("Icon layout properties"),id:"Icon_layout_properties",type:"properties",fields:Object.keys(hp.layout_symbol).filter(t=>(Qt().f[3]++,Qt().s[6]++,t.startsWith("icon-")))}),Qt().s[7]++,e.push({title:n("Text paint properties"),id:"Text_paint_properties",type:"properties",fields:Object.keys(hp.paint_symbol).filter(t=>(Qt().f[4]++,Qt().s[8]++,t.startsWith("text-")))}),Qt().s[9]++,e.push({title:n("Icon paint properties"),id:"Icon_paint_properties",type:"properties",fields:Object.keys(hp.paint_symbol).filter(t=>(Qt().f[5]++,Qt().s[10]++,t.startsWith("icon-")))}),Qt().s[11]++,e}function kse(n,e){if(Qt().f[6]++,Qt().s[12]++,Object.keys(hp.layer.type.values).indexOf(n)<0)return Qt().b[0][0]++,Qt().s[13]++,[];if(Qt().b[0][1]++,Qt().s[14]++,n==="symbol")return Qt().b[1][0]++,Qt().s[15]++,YDe(e);Qt().b[1][1]++;const t=(Qt().s[16]++,[]);return Qt().s[17]++,Object.keys(hp["paint_"+n]).length>0?(Qt().b[2][0]++,Qt().s[18]++,t.push({title:e("Paint properties"),id:"Paint_properties",type:"properties",fields:Object.keys(hp["paint_"+n])})):Qt().b[2][1]++,Qt().s[19]++,Object.keys(hp["layout_"+n]).length>0?(Qt().b[3][0]++,Qt().s[20]++,t.push({title:e("Layout properties"),id:"Layout_properties",type:"properties",fields:Object.keys(hp["layout_"+n])})):Qt().b[3][1]++,Qt().s[21]++,t}function eH(n,e){Qt().f[7]++;const t=(Qt().s[22]++,{id:"layer",title:e("Layer"),type:"layer"}),i=(Qt().s[23]++,{id:"filter",title:e("Filter"),type:"filter"}),r=(Qt().s[24]++,{id:"jsoneditor",title:e("JSON Editor"),type:"jsoneditor"});return Qt().s[25]++,[t,i].concat(kse(n,e)).concat([r])}class VDe extends On.Component{static defaultProps=(Qt().s[26]++,{onLayerChanged:()=>{Qt().f[8]++},onLayerIdChange:()=>{Qt().f[9]++},onLayerDestroyed:()=>{Qt().f[10]++}});constructor(e){Qt().f[11]++,Qt().s[27]++,super(e);const t=(Qt().s[28]++,{});Qt().s[29]++;for(const i of eH(this.props.layer.type,e.t))Qt().s[30]++,t[i.title]=!0;Qt().s[31]++,this.state={editorGroups:t}}static getDerivedStateFromProps(e,t){Qt().f[12]++;const i=(Qt().s[32]++,{...t.editorGroups});Qt().s[33]++;for(const r of kse(e.layer.type,e.t))Qt().s[34]++,r.title in i?Qt().b[4][1]++:(Qt().b[4][0]++,Qt().s[35]++,i[r.title]=!0);return Qt().s[36]++,{editorGroups:i}}changeProperty(e,t,i){Qt().f[13]++,Qt().s[37]++,this.props.onLayerChanged(this.props.layerIndex,y7e(this.props.layer,e,t,i))}onGroupToggle(e,t){Qt().f[14]++;const i=(Qt().s[38]++,{...this.state.editorGroups,[e]:t});Qt().s[39]++,this.setState({editorGroups:i})}renderGroupType(e,t){Qt().f[15]++;let i=(Qt().s[40]++,"");Qt().s[41]++,this.props.layer.metadata?(Qt().b[5][0]++,Qt().s[42]++,i=this.props.layer.metadata["maputnik:comment"]):Qt().b[5][1]++;const{errors:r,layerIndex:o}=(Qt().s[43]++,this.props),s=(Qt().s[44]++,{});Qt().s[45]++,r.forEach(f=>{Qt().f[16]++,Qt().s[46]++,Qt().b[7][0]++,f.parsed&&(Qt().b[7][1]++,f.parsed.type==="layer")&&(Qt().b[7][2]++,f.parsed.data.index==o)?(Qt().b[6][0]++,Qt().s[47]++,s[f.parsed.data.key]={message:f.parsed.data.message}):Qt().b[6][1]++});let a;const c=(Qt().s[48]++,this.props.layer);switch(Qt().s[49]++,Object.prototype.hasOwnProperty.call(this.props.sources,c.source)?(Qt().b[8][0]++,Qt().s[50]++,a=this.props.sources[c.source].layers):Qt().b[8][1]++,Qt().s[51]++,e){case"layer":return Qt().b[9][0]++,Qt().s[52]++,te.jsxs("div",{children:[te.jsx(uoe,{value:this.props.layer.id,wdKey:"layer-editor.layer-id",error:s.id,onChange:f=>(Qt().f[17]++,Qt().s[53]++,this.props.onLayerIdChange(this.props.layerIndex,this.props.layer.id,f))}),te.jsx(loe,{disabled:!0,error:s.type,value:this.props.layer.type,onChange:f=>(Qt().f[18]++,Qt().s[54]++,this.props.onLayerChanged(this.props.layerIndex,g7e(this.props.layer,f)))}),(Qt().b[10][0]++,this.props.layer.type!=="background"&&(Qt().b[10][1]++,te.jsx(Eoe,{error:s.source,sourceIds:Object.keys(this.props.sources),value:this.props.layer.source,onChange:f=>(Qt().f[19]++,Qt().s[55]++,this.changeProperty(null,"source",f))}))),(Qt().b[11][0]++,!QR.includes(this.props.layer.type)&&(Qt().b[11][1]++,te.jsx(Boe,{error:s["source-layer"],sourceLayerIds:a,value:this.props.layer["source-layer"],onChange:f=>(Qt().f[20]++,Qt().s[56]++,this.changeProperty(null,"source-layer",f))}))),te.jsx(NDe,{error:s.minzoom,value:this.props.layer.minzoom,onChange:f=>(Qt().f[21]++,Qt().s[57]++,this.changeProperty(null,"minzoom",f))}),te.jsx(WDe,{error:s.maxzoom,value:this.props.layer.maxzoom,onChange:f=>(Qt().f[22]++,Qt().s[58]++,this.changeProperty(null,"maxzoom",f))}),te.jsx(qDe,{error:s.comment,value:i,onChange:f=>(Qt().f[23]++,Qt().s[59]++,this.changeProperty("metadata","maputnik:comment",f==""?(Qt().b[12][0]++,void 0):(Qt().b[12][1]++,f)))})]});case"filter":return Qt().b[9][1]++,Qt().s[60]++,te.jsx("div",{children:te.jsx("div",{className:"maputnik-filter-editor-wrapper",children:te.jsx(xTe,{errors:s,filter:this.props.layer.filter,properties:this.props.vectorLayers[this.props.layer["source-layer"]],onChange:f=>(Qt().f[24]++,Qt().s[61]++,this.changeProperty(null,"filter",f))})})});case"properties":return Qt().b[9][2]++,Qt().s[62]++,te.jsx(FDe,{errors:s,layer:this.props.layer,groupFields:t,spec:this.props.spec,onChange:this.changeProperty.bind(this)});case"jsoneditor":return Qt().b[9][3]++,Qt().s[63]++,te.jsx(LB,{lintType:"layer",value:this.props.layer,onChange:f=>{Qt().f[25]++,Qt().s[64]++,this.props.onLayerChanged(this.props.layerIndex,f)}});default:return Qt().b[9][4]++,Qt().s[65]++,te.jsx(te.Fragment,{})}}moveLayer(e){Qt().f[26]++,Qt().s[66]++,this.props.onMoveLayer({oldIndex:this.props.layerIndex,newIndex:this.props.layerIndex+e})}render(){Qt().f[27]++;const e=(Qt().s[67]++,this.props.t),t=(Qt().s[68]++,[]),i=(Qt().s[69]++,this.props.layer.type),r=(Qt().s[70]++,eH(i,e).filter(c=>(Qt().f[28]++,Qt().s[71]++,Qt().b[13][0]++,!(i==="background"&&(Qt().b[13][1]++,c.type==="source")))).map(c=>{Qt().f[29]++;const f=(Qt().s[72]++,c.id);return Qt().s[73]++,t.push(f),Qt().s[74]++,te.jsx(zDe,{"data-wd-key":c.title,id:f,title:c.title,isActive:this.state.editorGroups[c.title],onActiveToggle:this.onGroupToggle.bind(this,c.title),children:this.renderGroupType(c.type,c.fields)},f)})),o=(Qt().s[75]++,Qt().b[14][0]++,this.props.layer.layout||(Qt().b[14][1]++,{})),s=(Qt().s[76]++,{delete:{text:e("Delete"),handler:()=>(Qt().f[30]++,Qt().s[77]++,this.props.onLayerDestroy(this.props.layerIndex)),wdKey:"menu-delete-layer"},duplicate:{text:e("Duplicate"),handler:()=>(Qt().f[31]++,Qt().s[78]++,this.props.onLayerCopy(this.props.layerIndex)),wdKey:"menu-duplicate-layer"},hide:{text:o.visibility==="none"?(Qt().b[15][0]++,e("Show")):(Qt().b[15][1]++,e("Hide")),handler:()=>(Qt().f[32]++,Qt().s[79]++,this.props.onLayerVisibilityToggle(this.props.layerIndex)),wdKey:"menu-hide-layer"},moveLayerUp:{text:e("Move layer up"),disabled:this.props.isFirstLayer,handler:()=>(Qt().f[33]++,Qt().s[80]++,this.moveLayer(-1)),wdKey:"menu-move-layer-up"},moveLayerDown:{text:e("Move layer down"),disabled:this.props.isLastLayer,handler:()=>(Qt().f[34]++,Qt().s[81]++,this.moveLayer(1)),wdKey:"menu-move-layer-down"}});function a(c,f){Qt().f[35]++,Qt().s[82]++,f.stopPropagation(),Qt().s[83]++,s[c].handler()}return Qt().s[84]++,te.jsx(Xx.Provider,{value:{size:"14px",color:"#8e8e8e"},children:te.jsxs("section",{className:"maputnik-layer-editor",role:"main","aria-label":e("Layer editor"),"data-wd-key":"layer-editor",children:[te.jsx("header",{"data-wd-key":"layer-editor.header",children:te.jsxs("div",{className:"layer-header",children:[te.jsx("h2",{className:"layer-header__title",children:e("Layer: {{layerId}}",{layerId:Tse(this.props.layer.id)})}),te.jsx("div",{className:"layer-header__info",children:te.jsxs(jw.Wrapper,{className:"more-menu",onSelection:a,closeOnSelection:!1,children:[te.jsx(jw.Button,{id:"skip-target-layer-editor","data-wd-key":"skip-target-layer-editor",className:"more-menu__button",title:"Layer options",children:te.jsx(bfe,{className:"more-menu__button__svg"})}),te.jsx(jw.Menu,{children:te.jsx("ul",{className:"more-menu__menu",children:Object.keys(s).map(c=>{Qt().f[36]++;const f=(Qt().s[85]++,s[c]);return Qt().s[86]++,te.jsx("li",{children:te.jsx(jw.MenuItem,{value:c,className:"more-menu__menu__item","data-wd-key":f.wdKey,children:f.text})},c)})})})]})})]})}),te.jsx(W7e,{allowMultipleExpanded:!0,allowZeroExpanded:!0,preExpanded:t,children:r})]})})}}const $De=(Qt().s[87]++,Mo()(VDe));var tH=function(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return n.concat(o||Array.prototype.slice.call(e))},HDe=(function(){function n(e,t,i){this.name=e,this.version=t,this.os=i,this.type="browser"}return n})(),ZDe=(function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n})(),XDe=(function(){function n(e,t,i,r){this.name=e,this.version=t,this.os=i,this.bot=r,this.type="bot-device"}return n})(),JDe=(function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n})(),eRe=(function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n})(),tRe=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,nRe=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,nH=3,iRe=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",tRe]],iH=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function rRe(n){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new eRe:typeof navigator<"u"?sRe(navigator.userAgent):lRe()}function oRe(n){return n!==""&&iRe.reduce(function(e,t){var i=t[0],r=t[1];if(e)return e;var o=r.exec(n);return!!o&&[i,o]},!1)}function sRe(n){var e=oRe(n);if(!e)return null;var t=e[0],i=e[1];if(t==="searchbot")return new JDe;var r=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);r?r.length<nH&&(r=tH(tH([],r,!0),uRe(nH-r.length),!0)):r=[];var o=r.join("."),s=aRe(n),a=nRe.exec(n);return a&&a[1]?new XDe(t,o,s,a[1]):new HDe(t,o,s)}function aRe(n){for(var e=0,t=iH.length;e<t;e++){var i=iH[e],r=i[0],o=i[1],s=o.exec(n);if(s)return r}return null}function lRe(){var n=typeof process<"u"&&process.version;return n?new ZDe(process.version.slice(1)):null}function uRe(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}const cRe="maputnik",ARe="3.0.0",rH={name:cRe,version:ARe},hRe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='1200'%20height='1200'%20viewBox='0%200%20100%20100'%3e%3cg%20class='map'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--map__main'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line1'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line2'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line3'%20fill='none'%3e%3c/use%3e%3c/g%3e%3cg%20class='palette'%3e%3cuse%20xlink:href='%23ref-1--palette__main'%20fill='%23fff'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__inner'%20fill='none'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle5'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle4'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle3'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle2'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle1'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle0'%20fill='%234eba6f'%3e%3c/use%3e%3c/g%3e%3cg%20class='brush'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--brush__bottom'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--brush__top'%20fill='%23fff'%3e%3c/use%3e%3c/g%3e%3cdefs%3e%3cpath%20id='ref-1--map__main'%20stroke-width='2.366'%20stroke-linejoin='round'%20d='M18.84%207.717l15.44%207.542%2015.75-7.762%2015.7%207.857L81.005%207.67%2096.31%2054.052%2073.598%2062.12%2050.93%2053.872l-25.1%208.066-22.668-8.066z'%3e%3c/path%3e%3cpath%20id='ref-1--map__line1'%20d='M65.556%2015.07l7.647%2046.838'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line2'%20d='M50.261%207.422l.717%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line3'%20d='M34.011%2015.07l-8.603%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--palette__main'%20stroke-width='2.3'%20d='M47.352%2030.887c7.993.226%2016.934%209.725%2017.954%2015.25%201.02%205.527-.743%2011.125-4.298%2013.875-3.554%202.75-8.6%202.905-8.723%208.302-.097%204.237%208.457%208.5%208.088%2015.653-.406%207.857-15.508%2013.15-30.943%206.102-8.556-3.906-14.249-13.653-13.385-26.238C16.833%2052.334%2022.32%2043.658%2027.382%2039c5.977-5.503%2011.977-8.337%2019.97-8.112z'%3e%3c/path%3e%3ccircle%20id='ref-1--palette__inner'%20stroke-width='2.3'%20cx='41.873'%20cy='61.901'%20r='6.389'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle5'%20cy='44.56'%20cx='54.347'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle4'%20cx='40.443'%20cy='41.555'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle3'%20r='4.336'%20cy='51.102'%20cx='29.651'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle2'%20cx='25.293'%20cy='65.836'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle1'%20r='4.336'%20cy='79.326'%20cx='32.764'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle0'%20cx='46.669'%20cy='80.571'%20r='4.336'%3e%3c/circle%3e%3cpath%20id='ref-1--brush__bottom'%20d='M76.333%2089.333c-1.645-9.794-4.375-35.26-4.32-37.887.056-2.627%202.52-4.34%205.36-4.317%202.842.022%205.098%201.87%205.314%204.27.107%201.2-1.576%2028.06-2.318%2037.844-.332%204.374-3.31%204.413-4.036.09z'%20stroke-width='2.3'%20stroke-linejoin='round'%3e%3c/path%3e%3cpath%20id='ref-1--brush__top'%20stroke-linejoin='round'%20stroke-width='2.3'%20d='M77.184%2026.428s-5.621%207.02-5.621%2011.978c0%204.957%202.206%206.878%205.81%206.878%203.606%200%205.148-1.708%205.29-6.736.142-5.028-5.479-12.12-5.479-12.12z'%3e%3c/path%3e%3c/defs%3e%3c/svg%3e";function Ii(){var n="/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",e="d581519332bdff74d3cb5001df8051c24d7c7191",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",statementMap:{0:{start:{line:20,column:16},end:{line:20,column:24}},1:{start:{line:21,column:41},end:{line:21,column:89}},2:{start:{line:24,column:4},end:{line:24,column:107}},3:{start:{line:29,column:4},end:{line:39,column:6}},4:{start:{line:44,column:4},end:{line:51,column:6}},5:{start:{line:56,column:4},end:{line:64,column:6}},6:{start:{line:68,column:10},end:{line:76,column:3}},7:{start:{line:78,column:4},end:{line:78,column:34}},8:{start:{line:81,column:4},end:{line:81,column:40}},9:{start:{line:83,column:11},end:{line:90,column:3}},10:{start:{line:84,column:4},end:{line:89,column:5}},11:{start:{line:85,column:6},end:{line:85,column:59}},12:{start:{line:87,column:17},end:{line:87,column:65}},13:{start:{line:88,column:6},end:{line:88,column:17}},14:{start:{line:92,column:14},end:{line:92,column:26}},15:{start:{line:93,column:18},end:{line:129,column:5}},16:{start:{line:130,column:24},end:{line:132,column:6}},17:{start:{line:131,column:6},end:{line:131,column:45}},18:{start:{line:133,column:4},end:{line:259,column:12}},19:{start:{line:144,column:33},end:{line:144,column:58}},20:{start:{line:153,column:33},end:{line:153,column:60}},21:{start:{line:162,column:33},end:{line:162,column:51}},22:{start:{line:189,column:80},end:{line:189,column:112}},23:{start:{line:193,column:82},end:{line:193,column:116}},24:{start:{line:197,column:87},end:{line:197,column:125}},25:{start:{line:201,column:83},end:{line:201,column:118}},26:{start:{line:205,column:84},end:{line:205,column:120}},27:{start:{line:209,column:88},end:{line:209,column:127}},28:{start:{line:222,column:33},end:{line:222,column:69}},29:{start:{line:225,column:38},end:{line:225,column:59}},30:{start:{line:226,column:20},end:{line:226,column:157}},31:{start:{line:228,column:115},end:{line:228,column:148}},32:{start:{line:229,column:20},end:{line:229,column:133}},33:{start:{line:245,column:33},end:{line:245,column:74}},34:{start:{line:248,column:18},end:{line:248,column:94}},35:{start:{line:262,column:19},end:{line:262,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:23,column:2},end:{line:23,column:3}},loc:{start:{line:23,column:11},end:{line:25,column:3}},line:23},1:{name:"(anonymous_1)",decl:{start:{line:28,column:2},end:{line:28,column:3}},loc:{start:{line:28,column:11},end:{line:40,column:3}},line:28},2:{name:"(anonymous_2)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:11},end:{line:52,column:3}},line:43},3:{name:"(anonymous_3)",decl:{start:{line:55,column:2},end:{line:55,column:3}},loc:{start:{line:55,column:11},end:{line:65,column:3}},line:55},4:{name:"(anonymous_4)",decl:{start:{line:77,column:2},end:{line:77,column:3}},loc:{start:{line:77,column:23},end:{line:79,column:3}},line:77},5:{name:"(anonymous_5)",decl:{start:{line:80,column:2},end:{line:80,column:3}},loc:{start:{line:80,column:28},end:{line:82,column:3}},line:80},6:{name:"(anonymous_6)",decl:{start:{line:83,column:11},end:{line:83,column:12}},loc:{start:{line:83,column:23},end:{line:90,column:3}},line:83},7:{name:"(anonymous_7)",decl:{start:{line:91,column:2},end:{line:91,column:3}},loc:{start:{line:91,column:11},end:{line:260,column:3}},line:91},8:{name:"(anonymous_8)",decl:{start:{line:130,column:35},end:{line:130,column:36}},loc:{start:{line:130,column:45},end:{line:132,column:5}},line:130},9:{name:"(anonymous_9)",decl:{start:{line:144,column:25},end:{line:144,column:26}},loc:{start:{line:144,column:33},end:{line:144,column:58}},line:144},10:{name:"(anonymous_10)",decl:{start:{line:153,column:25},end:{line:153,column:26}},loc:{start:{line:153,column:33},end:{line:153,column:60}},line:153},11:{name:"(anonymous_11)",decl:{start:{line:162,column:25},end:{line:162,column:26}},loc:{start:{line:162,column:33},end:{line:162,column:51}},line:162},12:{name:"(anonymous_12)",decl:{start:{line:189,column:74},end:{line:189,column:75}},loc:{start:{line:189,column:80},end:{line:189,column:112}},line:189},13:{name:"(anonymous_13)",decl:{start:{line:193,column:76},end:{line:193,column:77}},loc:{start:{line:193,column:82},end:{line:193,column:116}},line:193},14:{name:"(anonymous_14)",decl:{start:{line:197,column:81},end:{line:197,column:82}},loc:{start:{line:197,column:87},end:{line:197,column:125}},line:197},15:{name:"(anonymous_15)",decl:{start:{line:201,column:77},end:{line:201,column:78}},loc:{start:{line:201,column:83},end:{line:201,column:118}},line:201},16:{name:"(anonymous_16)",decl:{start:{line:205,column:78},end:{line:205,column:79}},loc:{start:{line:205,column:84},end:{line:205,column:120}},line:205},17:{name:"(anonymous_17)",decl:{start:{line:209,column:82},end:{line:209,column:83}},loc:{start:{line:209,column:88},end:{line:209,column:127}},line:209},18:{name:"(anonymous_18)",decl:{start:{line:222,column:26},end:{line:222,column:27}},loc:{start:{line:222,column:33},end:{line:222,column:69}},line:222},19:{name:"(anonymous_19)",decl:{start:{line:225,column:31},end:{line:225,column:32}},loc:{start:{line:225,column:38},end:{line:225,column:59}},line:225},20:{name:"(anonymous_20)",decl:{start:{line:225,column:65},end:{line:225,column:66}},loc:{start:{line:225,column:75},end:{line:227,column:19}},line:225},21:{name:"(anonymous_21)",decl:{start:{line:228,column:108},end:{line:228,column:109}},loc:{start:{line:228,column:115},end:{line:228,column:148}},line:228},22:{name:"(anonymous_22)",decl:{start:{line:228,column:154},end:{line:228,column:155}},loc:{start:{line:228,column:164},end:{line:230,column:19}},line:228},23:{name:"(anonymous_23)",decl:{start:{line:245,column:26},end:{line:245,column:27}},loc:{start:{line:245,column:33},end:{line:245,column:74}},line:245},24:{name:"(anonymous_24)",decl:{start:{line:247,column:65},end:{line:247,column:66}},loc:{start:{line:247,column:83},end:{line:249,column:17}},line:247}},branchMap:{0:{loc:{start:{line:84,column:4},end:{line:89,column:5}},type:"if",locations:[{start:{line:84,column:4},end:{line:89,column:5}},{start:{line:86,column:11},end:{line:89,column:5}}],line:84}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx"],names:[],mappings:"AAmCW,SAAA,KAwLG,YAxLH;AAnCX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,cAAa;AAErB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AACP,OAAO,aAAa;AAEpB,OAAO,kBAAkB;AACzB,SAAS,uBAA6C;AACtD,SAAS,0BAA0B;AAInC,MAAM,UAAU,OAAO;AACvB,MAAM,mCAAmC,CAAC,UAAU,SAAS,EAAE,QAAQ,QAAS,IAAI,IAAI;AASxF,MAAM,iBAAiB,MAAM,UAAyB;AAAA,EACpD,SAAS;AACP,+BAAQ,QAAA,EAAK,WAAU,sBAAsB,UAAA,KAAK,MAAM,SAAA,CAAS;AAAA,EACnE;AACF;AAQA,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN,WAAW,WAAW,yBAAyB,KAAK,MAAM,SAAS;AAAA,QACnE,MAAM,KAAK,MAAM;AAAA,QACjB,KAAI;AAAA,QACJ,QAAO;AAAA,QACP,eAAY;AAAA,QAEX,eAAK,MAAM;AAAA,MAAA;AAAA,IACd;AAAA,EACF;AACF;AAOA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QAEvB,eAAK,MAAM;AAAA,MAAA;AAAA,IACd;AAAA,EACF;AACF;AAQA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QAEnB,eAAK,MAAM;AAAA,MAAA;AAAA,IACd;AAAA,EACF;AACF;AAmBA,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,QAAQ;AAAA,IACN,QAAQ;AAAA,MACN,UAAU;AAAA,MACV,SAAS;AAAA,MACT,MAAM;AAAA,MACN,KAAK;AAAA,MACL,QAAQ;AAAA,IACV;AAAA,EACF;AAAA,EAEA,gBAAgB,KAAe;AAC7B,SAAK,MAAM,cAAc,GAAG;AAAA,EAC9B;AAAA,EAEA,qBAAqB,KAAa;AAChC,SAAK,MAAM,KAAK,eAAe,GAAG;AAAA,EACpC;AAAA,EAEA,SAAS,CAAC,WAAmB;AAC3B,QAAI,WAAW,OAAO;AACnB,eAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,IAC5E,OACK;AACH,YAAM,KAAK,SAAS,cAAc,kBAAgB,MAAM;AACxD,SAAG,MAAM;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,QAAQ;AAAA,MACZ;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,KAAK;AAAA,MAChB;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,SAAS;AAAA,QAClB,UAAU,KAAK,MAAM,aAAa;AAAA,MACpC;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,qBAAqB;AAAA,QAC9B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,sBAAsB;AAAA,QAC/B,UAAU,CAAC;AAAA,MACb;AAAA,IACF;AAEA,UAAM,cAAc,MAAM,KAAK,CAAC,SAAS;AACvC,aAAO,KAAK,OAAO,KAAK,MAAM;AAAA,IAChC,CAAC;AAED,+BAAQ,OAAA,EAAI,WAAU,oBACpB,UAAA,qBAAC,OAAA,EAAI,WAAU,2BACb,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,WAAU;AAAA,UAGV,UAAA;AAAA,YAAA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,CAAA,OAAM,KAAK,OAAO,YAAY;AAAA,gBAEtC,YAAE,aAAa;AAAA,cAAA;AAAA,YAClB;AAAA,YACA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,CAAA,OAAM,KAAK,OAAO,cAAc;AAAA,gBAExC,YAAE,cAAc;AAAA,cAAA;AAAA,YACnB;AAAA,YACA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,CAAA,OAAM,KAAK,OAAO,KAAK;AAAA,gBAE/B,YAAE,UAAU;AAAA,cAAA;AAAA,YACf;AAAA,YACA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,WAAU;AAAA,gBACV,QAAO;AAAA,gBACP,KAAI;AAAA,gBACJ,MAAK;AAAA,gBAEL,UAAA;AAAA,kBAAA,oBAAC,SAAI,KAAK,cAAc,KAAK,EAAE,oBAAoB,EAAA,CAAG;AAAA,uCACrD,MAAA,EACC,UAAA;AAAA,oBAAA,oBAAC,QAAA,EAAK,WAAU,yBAAyB,UAAA,QAAQ,KAAA,CAAK;AAAA,oBACtD,qBAAC,QAAA,EAAK,WAAU,4BAA2B,UAAA;AAAA,sBAAA;AAAA,sBAAE,QAAQ;AAAA,oBAAA,EAAA,CAAQ;AAAA,kBAAA,EAAA,CAC/D;AAAA,gBAAA;AAAA,cAAA;AAAA,YACF;AAAA,UAAA;AAAA,QAAA;AAAA,MACF;AAAA,2BACC,OAAA,EAAI,WAAU,6BAA4B,MAAK,cAAa,cAAW,WACtE,UAAA;AAAA,QAAA,qBAAC,eAAA,EAAc,OAAM,YAAW,SAAS,MAAM,KAAK,MAAM,cAAc,MAAM,GAC5E,UAAA;AAAA,UAAA,oBAAC,iBAAA,CAAA,CAAgB;AAAA,UACjB,oBAAC,UAAA,EAAU,UAAA,EAAE,MAAM,EAAA,CAAE;AAAA,QAAA,EAAA,CACvB;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,cAAa,SAAS,MAAM,KAAK,MAAM,cAAc,QAAQ,GAChF,UAAA;AAAA,UAAA,oBAAC,QAAA,CAAA,CAAO;AAAA,UACR,oBAAC,UAAA,EAAU,UAAA,EAAE,MAAM,EAAA,CAAE;AAAA,QAAA,EAAA,CACvB;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,mBAAkB,SAAS,MAAM,KAAK,MAAM,cAAc,YAAY,GACzF,UAAA;AAAA,UAAA,oBAAC,QAAA,CAAA,CAAO;AAAA,UACR,oBAAC,UAAA,EAAU,UAAA,EAAE,aAAa,EAAA,CAAE;AAAA,QAAA,EAAA,CAC9B;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,eAAc,SAAS,MAAM,KAAK,MAAM,cAAc,SAAS,GAClF,UAAA;AAAA,UAAA,oBAAC,UAAA,CAAA,CAAS;AAAA,UACV,oBAAC,UAAA,EAAU,UAAA,EAAE,cAAc,EAAA,CAAE;AAAA,QAAA,EAAA,CAC/B;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,gBAAe,SAAS,MAAM,KAAK,MAAM,cAAc,UAAU,GACpF,UAAA;AAAA,UAAA,oBAAC,YAAA,CAAA,CAAW;AAAA,UACZ,oBAAC,UAAA,EAAU,UAAA,EAAE,gBAAgB,EAAA,CAAE;AAAA,QAAA,EAAA,CACjC;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,oBAAmB,SAAS,MAAM,KAAK,MAAM,cAAc,aAAa,GAC3F,UAAA;AAAA,UAAA,oBAAC,UAAA,CAAA,CAAS;AAAA,UACV,oBAAC,UAAA,EAAU,UAAA,EAAE,cAAc,EAAA,CAAE;AAAA,QAAA,EAAA,CAC/B;AAAA,QAEA,qBAAC,eAAA,EAAc,OAAM,eACnB,UAAA;AAAA,UAAA,oBAAC,cAAA,CAAA,CAAa;AAAA,+BACb,UAAA,EAAU,UAAA;AAAA,YAAA,EAAE,MAAM;AAAA,YACjB;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,gBAAgB,EAAE,OAAO,KAAiB;AAAA,gBAChE,OAAO,aAAa;AAAA,gBAEnB,UAAA;AAAA,kBAAA,MAAM,OAAO,OAAK,EAAE,UAAU,SAAS,EAAE,IAAI,CAAC,SAAS;AACtD,2BACE,oBAAC,UAAA,EAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAAU,eAAa,KAAK,IAC9E,UAAA,KAAK,MAAA,GADK,KAAK,EAElB;AAAA,kBAEJ,CAAC;AAAA,kBACD,oBAAC,YAAA,EAAS,OAAO,EAAE,qBAAqB,GACrC,UAAA,MAAM,OAAO,CAAA,MAAK,EAAE,UAAU,qBAAqB,EAAE,IAAI,CAAC,SAAS;AAClE,2BACE,oBAAC,UAAA,EAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAClD,UAAA,KAAK,MAAA,GADK,KAAK,EAElB;AAAA,kBAEJ,CAAC,EAAA,CACH;AAAA,gBAAA;AAAA,cAAA;AAAA,YACF;AAAA,UAAA,EAAA,CACF;AAAA,QAAA,EAAA,CACF;AAAA,QAEA,qBAAC,eAAA,EAAc,OAAM,gBACnB,UAAA;AAAA,UAAA,oBAAC,YAAA,CAAA,CAAW;AAAA,+BACX,UAAA,EAAS,UAAA;AAAA,YAAA;AAAA,YACR;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,qBAAqB,EAAE,OAAO,KAAK;AAAA,gBACzD,OAAO,KAAK,MAAM,KAAK;AAAA,gBAEtB,UAAA,OAAO,QAAQ,kBAAkB,EAAE,IAAI,CAAC,CAAC,MAAM,IAAI,MAAM;AACxD,yBACE,oBAAC,UAAA,EAAkB,OAAO,MACvB,kBADU,IAEb;AAAA,gBAEJ,CAAC;AAAA,cAAA;AAAA,YACH;AAAA,UAAA,EAAA,CACF;AAAA,QAAA,EAAA,CACF;AAAA,QAEA,qBAAC,aAAA,EAAY,MAAM,6CACjB,UAAA;AAAA,UAAA,oBAAC,eAAA,CAAA,CAAc;AAAA,UACf,oBAAC,UAAA,EAAU,UAAA,EAAE,MAAM,EAAA,CAAE;AAAA,QAAA,EAAA,CACvB;AAAA,MAAA,EAAA,CACF;AAAA,IAAA,EAAA,CACF,EAAA,CACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d581519332bdff74d3cb5001df8051c24d7c7191"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ii=function(){return s},s}Ii();const dRe=(Ii().s[0]++,rRe()),Yw=(Ii().s[1]++,["chrome","firefox"].indexOf(dRe.name)>-1);class v1 extends On.Component{render(){return Ii().f[0]++,Ii().s[2]++,te.jsx("span",{className:"maputnik-icon-text",children:this.props.children})}}class fRe extends On.Component{render(){return Ii().f[1]++,Ii().s[3]++,te.jsx("a",{className:x0("maputnik-toolbar-link",this.props.className),href:this.props.href,rel:"noopener noreferrer",target:"_blank","data-wd-key":"toolbar:link",children:this.props.children})}}class oH extends On.Component{render(){return Ii().f[2]++,Ii().s[4]++,te.jsx("div",{className:"maputnik-toolbar-select","data-wd-key":this.props.wdKey,children:this.props.children})}}class rx extends On.Component{render(){return Ii().f[3]++,Ii().s[5]++,te.jsx("button",{className:"maputnik-toolbar-action","data-wd-key":this.props.wdKey,onClick:this.props.onClick,children:this.props.children})}}class pRe extends On.Component{state=(Ii().s[6]++,{isOpen:{settings:!1,sources:!1,open:!1,add:!1,export:!1}});handleSelection(e){Ii().f[4]++,Ii().s[7]++,this.props.onSetMapState(e)}handleLanguageChange(e){Ii().f[5]++,Ii().s[8]++,this.props.i18n.changeLanguage(e)}onSkip=(Ii().s[9]++,e=>{if(Ii().f[6]++,Ii().s[10]++,e==="map")Ii().b[0][0]++,Ii().s[11]++,document.querySelector(".maplibregl-canvas").focus();else{Ii().b[0][1]++;const t=(Ii().s[12]++,document.querySelector("#skip-target-"+e));Ii().s[13]++,t.focus()}});render(){Ii().f[7]++;const e=(Ii().s[14]++,this.props.t),t=(Ii().s[15]++,[{id:"map",group:"general",title:e("Map")},{id:"inspect",group:"general",title:e("Inspect"),disabled:this.props.renderer==="ol"},{id:"filter-deuteranopia",group:"color-accessibility",title:e("Deuteranopia filter"),disabled:!Yw},{id:"filter-protanopia",group:"color-accessibility",title:e("Protanopia filter"),disabled:!Yw},{id:"filter-tritanopia",group:"color-accessibility",title:e("Tritanopia filter"),disabled:!Yw},{id:"filter-achromatopsia",group:"color-accessibility",title:e("Achromatopsia filter"),disabled:!Yw}]),i=(Ii().s[16]++,t.find(r=>(Ii().f[8]++,Ii().s[17]++,r.id===this.props.mapState)));return Ii().s[18]++,te.jsx("nav",{className:"maputnik-toolbar",children:te.jsxs("div",{className:"maputnik-toolbar__inner",children:[te.jsxs("div",{className:"maputnik-toolbar-logo-container",children:[te.jsx("button",{"data-wd-key":"root:skip:layer-list",className:"maputnik-toolbar-skip",onClick:r=>(Ii().f[9]++,Ii().s[19]++,this.onSkip("layer-list")),children:e("Layers list")}),te.jsx("button",{"data-wd-key":"root:skip:layer-editor",className:"maputnik-toolbar-skip",onClick:r=>(Ii().f[10]++,Ii().s[20]++,this.onSkip("layer-editor")),children:e("Layer editor")}),te.jsx("button",{"data-wd-key":"root:skip:map-view",className:"maputnik-toolbar-skip",onClick:r=>(Ii().f[11]++,Ii().s[21]++,this.onSkip("map")),children:e("Map view")}),te.jsxs("a",{className:"maputnik-toolbar-logo",target:"blank",rel:"noreferrer noopener",href:"https://github.com/maplibre/maputnik",children:[te.jsx("img",{src:hRe,alt:e("Maputnik on GitHub")}),te.jsxs("h1",{children:[te.jsx("span",{className:"maputnik-toolbar-name",children:rH.name}),te.jsxs("span",{className:"maputnik-toolbar-version",children:["v",rH.version]})]})]})]}),te.jsxs("div",{className:"maputnik-toolbar__actions",role:"navigation","aria-label":"Toolbar",children:[te.jsxs(rx,{wdKey:"nav:open",onClick:()=>(Ii().f[12]++,Ii().s[22]++,this.props.onToggleModal("open")),children:[te.jsx(sfe,{}),te.jsx(v1,{children:e("Open")})]}),te.jsxs(rx,{wdKey:"nav:export",onClick:()=>(Ii().f[13]++,Ii().s[23]++,this.props.onToggleModal("export")),children:[te.jsx(R9,{}),te.jsx(v1,{children:e("Save")})]}),te.jsxs(rx,{wdKey:"nav:code-editor",onClick:()=>(Ii().f[14]++,Ii().s[24]++,this.props.onToggleModal("codeEditor")),children:[te.jsx(efe,{}),te.jsx(v1,{children:e("Code Editor")})]}),te.jsxs(rx,{wdKey:"nav:sources",onClick:()=>(Ii().f[15]++,Ii().s[25]++,this.props.onToggleModal("sources")),children:[te.jsx(mfe,{}),te.jsx(v1,{children:e("Data Sources")})]}),te.jsxs(rx,{wdKey:"nav:settings",onClick:()=>(Ii().f[16]++,Ii().s[26]++,this.props.onToggleModal("settings")),children:[te.jsx(afe,{}),te.jsx(v1,{children:e("Style Settings")})]}),te.jsxs(rx,{wdKey:"nav:global-state",onClick:()=>(Ii().f[17]++,Ii().s[27]++,this.props.onToggleModal("globalState")),children:[te.jsx(_fe,{}),te.jsx(v1,{children:e("Global State")})]}),te.jsxs(oH,{wdKey:"nav:inspect",children:[te.jsx(tfe,{}),te.jsxs(v1,{children:[e("View"),te.jsxs("select",{className:"maputnik-select","data-wd-key":"maputnik-select",onChange:r=>(Ii().f[18]++,Ii().s[28]++,this.handleSelection(r.target.value)),value:i?.id,children:[t.filter(r=>(Ii().f[19]++,Ii().s[29]++,r.group==="general")).map(r=>(Ii().f[20]++,Ii().s[30]++,te.jsx("option",{value:r.id,disabled:r.disabled,"data-wd-key":r.id,children:r.title},r.id))),te.jsx("optgroup",{label:e("Color accessibility"),children:t.filter(r=>(Ii().f[21]++,Ii().s[31]++,r.group==="color-accessibility")).map(r=>(Ii().f[22]++,Ii().s[32]++,te.jsx("option",{value:r.id,disabled:r.disabled,children:r.title},r.id)))})]})]})]}),te.jsxs(oH,{wdKey:"nav:language",children:[te.jsx(ofe,{}),te.jsxs(v1,{children:["Language",te.jsx("select",{className:"maputnik-select","data-wd-key":"maputnik-lang-select",onChange:r=>(Ii().f[23]++,Ii().s[33]++,this.handleLanguageChange(r.target.value)),value:this.props.i18n.language,children:Object.entries(UH).map(([r,o])=>(Ii().f[24]++,Ii().s[34]++,te.jsx("option",{value:r,children:o},r)))})]})]}),te.jsxs(fRe,{href:"https://github.com/maplibre/maputnik/wiki",children:[te.jsx(nfe,{}),te.jsx(v1,{children:e("Help")})]})]})]})})}}const mRe=(Ii().s[35]++,Mo()(pRe));function n6(){var n="/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",e="d17a642b15310eb6111b086bd920c67ec86a8271",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:6,column:3}},line:4}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx"],names:[],mappings:"AAQW;AARX,OAAO,WAAW;AAMlB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,6BACnB,eAAK,MAAM,UACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d17a642b15310eb6111b086bd920c67ec86a8271"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return n6=function(){return s},s}n6();class sH extends On.Component{render(){return n6().f[0]++,n6().s[0]++,te.jsx("div",{className:"maputnik-scroll-container",children:this.props.children})}}function ap(){var n="/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",e="d10f2b4393c64530a7dc27936dc2b0d9d69d1ee7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:8,column:46}},1:{start:{line:9,column:4},end:{line:21,column:12}},2:{start:{line:24,column:18},end:{line:24,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:22,column:3}},line:7}},branchMap:{0:{loc:{start:{line:12,column:8},end:{line:12,column:190}},type:"binary-expr",locations:[{start:{line:12,column:8},end:{line:12,column:29}},{start:{line:12,column:49},end:{line:12,column:190}}],line:12},1:{loc:{start:{line:13,column:8},end:{line:16,column:12}},type:"binary-expr",locations:[{start:{line:13,column:8},end:{line:13,column:30}},{start:{line:13,column:50},end:{line:16,column:12}}],line:13},2:{loc:{start:{line:19,column:6},end:{line:19,column:123}},type:"binary-expr",locations:[{start:{line:19,column:6},end:{line:19,column:23}},{start:{line:19,column:43},end:{line:19,column:123}}],line:19}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx"],names:[],mappings:"AAyBY,SAKyB,UALzB,KAKyB,YALzB;AAzBZ,OAAO,WAAW;AAClB,OAAO,qBAAqB;AAC5B,SAA+B,uBAAuB;AACtD,SAAS,mBAAmB;AAY5B,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EAEtE,SAAS;AACP,aAAS,KAAK,MAAM,KAAK,MAAM,KAAK,IAAI;AAExC,WAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,OAAM,GAC/C,+BAAC,SAAI,WAAU,mBACZ;AAAA,WAAK,MAAM;AAAA,MACZ,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM,cAAc,oBAAC,SAAI,WAAU,+BACvC,8BAAC,mBACE,eAAK,MAAM,YACd,GACF;AAAA,QAEC,CAAC,KAAK,MAAM,cAAc,iCACzB;AAAA,8BAAC,SAAI,WAAU,wBACZ,eAAK,MAAM,WACd;AAAA,UACA,oBAAC,SAAI,WAAU,0BACb,8BAAC,mBACE,eAAK,MAAM,aACd,GACF;AAAA,WACF;AAAA,QACC,KAAK,MAAM;AAAA,SACd;AAAA,MACC,KAAK,MAAM,UAAU,oBAAC,SAAI,WAAU,0BAClC,eAAK,MAAM,QACd;AAAA,MAEC,KAAK,MAAM;AAAA,OACd,GACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d10f2b4393c64530a7dc27936dc2b0d9d69d1ee7"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ap=function(){return s},s}ap();class gRe extends On.Component{render(){return ap().f[0]++,ap().s[0]++,document.body.dir=this.props.i18n.dir(),ap().s[1]++,te.jsx(Xx.Provider,{value:{size:"14px"},children:te.jsxs("div",{className:"maputnik-layout",children:[this.props.toolbar,te.jsxs("div",{className:"maputnik-layout-main",children:[(ap().b[0][0]++,this.props.codeEditor&&(ap().b[0][1]++,te.jsx("div",{className:"maputnik-layout-code-editor",children:te.jsx(sH,{children:this.props.codeEditor})}))),(ap().b[1][0]++,!this.props.codeEditor&&(ap().b[1][1]++,te.jsxs(te.Fragment,{children:[te.jsx("div",{className:"maputnik-layout-list",children:this.props.layerList}),te.jsx("div",{className:"maputnik-layout-drawer",children:te.jsx(sH,{children:this.props.layerEditor})})]}))),this.props.map]}),(ap().b[2][0]++,this.props.bottom&&(ap().b[2][1]++,te.jsx("div",{className:"maputnik-layout-bottom",children:this.props.bottom}))),this.props.modals]})})}}const yRe=(ap().s[2]++,Mo()(gRe));function Aa(){var n="/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",e="35d9aec71cb86113da5d8ac4f197fbf609a8818e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:38},end:{line:11,column:48}},2:{start:{line:12,column:19},end:{line:40,column:6}},3:{start:{line:14,column:6},end:{line:38,column:7}},4:{start:{line:15,column:27},end:{line:15,column:32}},5:{start:{line:16,column:24},end:{line:16,column:73}},6:{start:{line:17,column:8},end:{line:35,column:13}},7:{start:{line:30,column:31},end:{line:30,column:74}},8:{start:{line:37,column:8},end:{line:37,column:32}},9:{start:{line:39,column:6},end:{line:39,column:120}},10:{start:{line:41,column:18},end:{line:43,column:6}},11:{start:{line:42,column:6},end:{line:42,column:68}},12:{start:{line:44,column:4},end:{line:47,column:9}},13:{start:{line:50,column:24},end:{line:50,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:25},end:{line:8,column:5}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:48,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:42},end:{line:12,column:43}},loc:{start:{line:12,column:58},end:{line:40,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:30,column:25},end:{line:30,column:26}},loc:{start:{line:30,column:31},end:{line:30,column:74}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:41,column:40},end:{line:41,column:41}},loc:{start:{line:41,column:50},end:{line:43,column:5}},line:41}},branchMap:{0:{loc:{start:{line:14,column:6},end:{line:38,column:7}},type:"if",locations:[{start:{line:14,column:6},end:{line:38,column:7}},{start:{line:36,column:13},end:{line:38,column:7}}],line:14},1:{loc:{start:{line:14,column:10},end:{line:14,column:55}},type:"binary-expr",locations:[{start:{line:14,column:10},end:{line:14,column:22}},{start:{line:14,column:26},end:{line:14,column:55}}],line:14},2:{loc:{start:{line:24,column:10},end:{line:34,column:14}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:50}},{start:{line:24,column:70},end:{line:34,column:14}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx"],names:[],mappings:"AA6BY,SAIE,UAHM,KADR;AA7BZ,OAAO,WAAW;AAClB,SAAQ,qBAAoB;AAE5B,SAAS,OAA6B,uBAAuB;AAY7D,MAAM,gCAAgC,MAAM,UAAwC;AAAA,EAClF,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,mBAAkB,IAAI,KAAK;AACrC,UAAM,SAAS,KAAK,MAAM,QAAQ,IAAI,CAAC,OAAO,QAAQ;AACpD,UAAI;AACJ,UAAI,MAAM,UAAU,MAAM,OAAO,SAAS,SAAS;AACjD,cAAM,EAAC,OAAM,IAAI;AACjB,cAAM,UAAU,KAAK,MAAM,UAAU,OAAO,OAAO,KAAK,KAAK,EAAE;AAC/D,kBACE,iCACE;AAAA,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAM,wBAAc,OAAO,GAAE;AAAA,YAAO;AAAA,YAAG,OAAO,KAAK;AAAA,aAC5D;AAAA,UACC,uBAAuB,OAAO,KAAK,SAClC,iCAAE;AAAA;AAAA,YAEA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,MAAM,KAAK,MAAM,cAAe,OAAO,KAAK,KAAK;AAAA,gBAEzD,YAAE,iBAAiB;AAAA;AAAA,YACtB;AAAA,aACF;AAAA,WAEJ;AAAA,MAEJ,OACK;AACH,kBAAU,MAAM;AAAA,MAClB;AACA,aAAO,oBAAC,OAAqB,WAAU,gCACpC,qBADY,WAAS,GAExB;AAAA,IACF,CAAC;AAED,UAAM,QAAQ,KAAK,MAAM,OAAO,IAAI,CAAC,GAAG,MAAM;AAC5C,aAAO,oBAAC,OAAmB,eAAZ,UAAQ,CAAM;AAAA,IAC/B,CAAC;AAED,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA;AAAA,MACA;AAAA,OACH;AAAA,EACF;AACF;AAEA,MAAM,kBAAkB,gBAAgB,EAAE,uBAAuB;AACjE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"35d9aec71cb86113da5d8ac4f197fbf609a8818e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Aa=function(){return s},s}Aa();class vRe extends On.Component{static defaultProps=(Aa().s[0]++,{onLayerSelect:()=>{Aa().f[0]++}});render(){Aa().f[1]++;const{t:e,selectedLayerIndex:t}=(Aa().s[1]++,this.props),i=(Aa().s[2]++,this.props.errors?.map((o,s)=>{Aa().f[2]++;let a;if(Aa().s[3]++,Aa().b[1][0]++,o.parsed&&(Aa().b[1][1]++,o.parsed.type==="layer")){Aa().b[0][0]++;const{parsed:c}=(Aa().s[4]++,o),f=(Aa().s[5]++,this.props.mapStyle?.layers[c.data.index].id);Aa().s[6]++,a=te.jsxs(te.Fragment,{children:[te.jsxs(tC,{t:e,children:["Layer ",te.jsx("span",{children:Tse(f)}),": ",c.data.message]}),(Aa().b[2][0]++,t!==c.data.index&&(Aa().b[2][1]++,te.jsxs(te.Fragment,{children:["",te.jsx("button",{className:"maputnik-message-panel__switch-button",onClick:()=>(Aa().f[3]++,Aa().s[7]++,this.props.onLayerSelect(c.data.index)),children:e("switch to layer")})]})))]})}else Aa().b[0][1]++,Aa().s[8]++,a=o.message;return Aa().s[9]++,te.jsx("p",{className:"maputnik-message-panel-error",children:a},"error-"+s)})),r=(Aa().s[10]++,this.props.infos?.map((o,s)=>(Aa().f[4]++,Aa().s[11]++,te.jsx("p",{children:o},"info-"+s))));return Aa().s[12]++,te.jsxs("div",{className:"maputnik-message-panel",children:[i,r]})}}const bRe=(Aa().s[13]++,Mo()(vRe));function SM(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",e="6904abccc922d01222214bca1ee3bdee75077020",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",statementMap:{0:{start:{line:4,column:19},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:148}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:19},end:{line:4,column:20}},loc:{start:{line:4,column:30},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,gBAA0C;AACjD,OAAO,cAAc;AASrB,MAAM,aAAwC,CAAC,UAAU;AACvD,SACE,oBAAC,YAAS,OAAO,MAAM,OAAO,WAAW,MAAM,WAC7C,8BAAC,cAAY,GAAG,OAAO,GACzB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6904abccc922d01222214bca1ee3bdee75077020"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return SM=function(){return s},s}SM();SM().s[0]++;const i6=n=>(SM().f[0]++,SM().s[1]++,te.jsx(nv,{label:n.label,fieldSpec:n.fieldSpec,children:te.jsx(HR,{...n})}));function EM(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",e="4d2523cd21b202fb5e80e08624becdbab30e967f",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,iBAA0C;AACjD,OAAO,WAAW;AAWlB,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4d2523cd21b202fb5e80e08624becdbab30e967f"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return EM=function(){return s},s}EM();EM().s[0]++;const wm=n=>(EM().f[0]++,EM().s[1]++,te.jsx(as,{label:n.label,fieldSpec:n.fieldSpec,children:te.jsx(z1,{...n})}));function BM(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",e="5d41bf44c48c380a773c8c6219651c4348518afa",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx"],names:[],mappings:"AAcM;AAdN,OAAO,WAAW;AAClB,OAAO,iBAA0C;AAUjD,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5d41bf44c48c380a773c8c6219651c4348518afa"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return BM=function(){return s},s}BM();BM().s[0]++;const sd=n=>(BM().f[0]++,BM().s[1]++,te.jsx(as,{label:n.label,fieldSpec:n.fieldSpec,children:te.jsx(zm,{...n})}));function OM(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",e="6e4f23f735ab05a9622545421c68df85e4603d43",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",statementMap:{0:{start:{line:4,column:17},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:143}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:17},end:{line:4,column:18}},loc:{start:{line:4,column:28},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,cAAqD;AAC5D,OAAO,WAAW;AAWlB,MAAM,WAAoC,CAAC,UAAU;AACnD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,YAAU,GAAG,OAAO,GACvB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6e4f23f735ab05a9622545421c68df85e4603d43"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return OM=function(){return s},s}OM();OM().s[0]++;const B5=n=>(OM().f[0]++,OM().s[1]++,te.jsx(as,{label:n.label,fieldSpec:n.fieldSpec,children:te.jsx(KK,{...n})}));function IM(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",e="245ef066962174fcd1012332d28af93e7b97872c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,iBAA0C;AAWjD,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"245ef066962174fcd1012332d28af93e7b97872c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return IM=function(){return s},s}IM();IM().s[0]++;const TM=n=>(IM().f[0]++,IM().s[1]++,te.jsx(as,{label:n.label,fieldSpec:n.fieldSpec,children:te.jsx(zC,{...n})}));function kM(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",e="c3637509a0af6618b52e814bed4254c2e3fa3b7a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",statementMap:{0:{start:{line:4,column:18},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:147}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:18},end:{line:4,column:19}},loc:{start:{line:4,column:29},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,eAAsC;AAC7C,OAAO,cAAc;AAWrB,MAAM,YAAsC,CAAC,UAAU;AACrD,SACE,oBAAC,YAAS,OAAO,MAAM,OAAO,WAAW,MAAM,WAC7C,8BAAC,aAAW,GAAG,OAAO,GACxB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c3637509a0af6618b52e814bed4254c2e3fa3b7a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return kM=function(){return s},s}kM();kM().s[0]++;const CRe=n=>(kM().f[0]++,kM().s[1]++,te.jsx(nv,{label:n.label,fieldSpec:n.fieldSpec,children:te.jsx(LK,{...n})}));function DM(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",e="81b03af9ad032d255df7823d843b73e8fa5e3f61",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",statementMap:{0:{start:{line:4,column:19},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:145}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:19},end:{line:4,column:20}},loc:{start:{line:4,column:30},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,gBAAwC;AAW/C,MAAM,aAAwC,CAAC,UAAU;AACvD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,cAAY,GAAG,OAAO,GACzB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"81b03af9ad032d255df7823d843b73e8fa5e3f61"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return DM=function(){return s},s}DM();DM().s[0]++;const _Re=n=>(DM().f[0]++,DM().s[1]++,te.jsx(as,{label:n.label,fieldSpec:n.fieldSpec,children:te.jsx(PK,{...n})}));function RM(){var n="/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",e="3fd72cd1ec4be346f0d6d854a97e371e1b9c2997",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",statementMap:{0:{start:{line:1,column:13},end:{line:32,column:2}},1:{start:{line:1,column:21},end:{line:32,column:1}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:13},end:{line:1,column:14}},loc:{start:{line:1,column:21},end:{line:32,column:1}},line:1}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts"],names:[],mappings:"AAEA,MAAM,OAAO,CAAC,OAAkB;AAAA,EAC9B,UAAU;AAAA,IACR,uBAAuB;AAAA,MACrB,OAAO,EAAE,uBAAuB;AAAA,MAChC,KAAK,EAAE,yCAAyC;AAAA,MAChD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,4BAA4B;AAAA,MAC1B,OAAO,EAAE,4BAA4B;AAAA,MACrC,KAAK,EAAE,iDAAiD;AAAA,MACxD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,qBAAqB;AAAA,MACnB,OAAO,EAAE,qBAAqB;AAAA,MAC9B,KAAK,EAAE,0BAA0B;AAAA,MACjC,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,yBAAyB;AAAA,MACvB,OAAO,EAAE,yBAAyB;AAAA,MAClC,KAAK,EAAE,8CAA8C;AAAA,MACrD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,gBAAgB;AAAA,MACd,OAAO,EAAE,gBAAgB;AAAA,MACzB,KAAK,EAAE,sDAAsD;AAAA,IAC/D;AAAA,EACF;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3fd72cd1ec4be346f0d6d854a97e371e1b9c2997"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return RM=function(){return s},s}RM();RM().s[0]++;const Dse=n=>(RM().f[0]++,RM().s[1]++,{maputnik:{maptiler_access_token:{label:n("MapTiler Access Token"),doc:n("Public access token for MapTiler Cloud."),docUrl:"https://docs.maptiler.com/cloud/api/authentication-key/",docUrlLinkText:n("Learn More")},thunderforest_access_token:{label:n("Thunderforest Access Token"),doc:n("Public access token for Thunderforest services."),docUrl:"https://www.thunderforest.com/docs/apikeys/",docUrlLinkText:n("Learn More")},stadia_access_token:{label:n("Stadia Maps API Key"),doc:n("API key for Stadia Maps."),docUrl:"https://docs.stadiamaps.com/authentication/",docUrlLinkText:n("Learn More")},locationiq_access_token:{label:n("LocationIQ Access Token"),doc:n("Public access token for LocationIQ services."),docUrl:"https://docs.locationiq.com/docs/maps",docUrlLinkText:n("Learn More")},style_renderer:{label:n("Style Renderer"),doc:n("Choose the default Maputnik renderer for this style.")}}});function Bn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx",e="88fb94a6f90f9fea29b8036f99aee1df40b81df7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx",statementMap:{0:{start:{line:18,column:23},end:{line:20,column:5}},1:{start:{line:21,column:4},end:{line:25,column:5}},2:{start:{line:22,column:6},end:{line:22,column:34}},3:{start:{line:24,column:6},end:{line:24,column:35}},4:{start:{line:26,column:4},end:{line:29,column:7}},5:{start:{line:32,column:18},end:{line:34,column:5}},6:{start:{line:35,column:4},end:{line:39,column:5}},7:{start:{line:36,column:6},end:{line:36,column:29}},8:{start:{line:38,column:6},end:{line:38,column:30}},9:{start:{line:40,column:4},end:{line:43,column:7}},10:{start:{line:46,column:20},end:{line:48,column:5}},11:{start:{line:49,column:4},end:{line:53,column:5}},12:{start:{line:50,column:6},end:{line:50,column:31}},13:{start:{line:52,column:6},end:{line:52,column:32}},14:{start:{line:54,column:4},end:{line:57,column:7}},15:{start:{line:60,column:23},end:{line:62,column:5}},16:{start:{line:63,column:4},end:{line:67,column:5}},17:{start:{line:64,column:6},end:{line:64,column:29}},18:{start:{line:66,column:6},end:{line:66,column:30}},19:{start:{line:68,column:4},end:{line:71,column:7}},20:{start:{line:74,column:25},end:{line:76,column:5}},21:{start:{line:77,column:4},end:{line:81,column:5}},22:{start:{line:78,column:6},end:{line:78,column:36}},23:{start:{line:80,column:6},end:{line:80,column:37}},24:{start:{line:82,column:4},end:{line:82,column:44}},25:{start:{line:85,column:21},end:{line:85,column:55}},26:{start:{line:86,column:54},end:{line:86,column:64}},27:{start:{line:87,column:16},end:{line:87,column:38}},28:{start:{line:88,column:18},end:{line:88,column:49}},29:{start:{line:89,column:23},end:{line:89,column:59}},30:{start:{line:90,column:20},end:{line:90,column:53}},31:{start:{line:91,column:23},end:{line:91,column:59}},32:{start:{line:92,column:4},end:{line:335,column:6}},33:{start:{line:107,column:35},end:{line:107,column:74}},34:{start:{line:117,column:35},end:{line:117,column:75}},35:{start:{line:125,column:35},end:{line:125,column:76}},36:{start:{line:135,column:35},end:{line:135,column:76}},37:{start:{line:145,column:35},end:{line:145,column:104}},38:{start:{line:155,column:35},end:{line:155,column:105}},39:{start:{line:165,column:35},end:{line:165,column:98}},40:{start:{line:175,column:35},end:{line:175,column:102}},41:{start:{line:187,column:35},end:{line:187,column:76}},42:{start:{line:197,column:35},end:{line:197,column:74}},43:{start:{line:207,column:35},end:{line:207,column:77}},44:{start:{line:217,column:35},end:{line:217,column:75}},45:{start:{line:229,column:35},end:{line:229,column:76}},46:{start:{line:239,column:35},end:{line:239,column:75}},47:{start:{line:249,column:35},end:{line:249,column:79}},48:{start:{line:261,column:35},end:{line:261,column:78}},49:{start:{line:271,column:35},end:{line:271,column:78}},50:{start:{line:281,column:35},end:{line:281,column:84}},51:{start:{line:291,column:35},end:{line:291,column:80}},52:{start:{line:301,column:35},end:{line:301,column:83}},53:{start:{line:316,column:35},end:{line:316,column:67}},54:{start:{line:330,column:35},end:{line:330,column:87}},55:{start:{line:338,column:22},end:{line:338,column:62}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:44},end:{line:30,column:3}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:39},end:{line:44,column:3}},line:31},2:{name:"(anonymous_2)",decl:{start:{line:45,column:2},end:{line:45,column:3}},loc:{start:{line:45,column:41},end:{line:58,column:3}},line:45},3:{name:"(anonymous_3)",decl:{start:{line:59,column:2},end:{line:59,column:3}},loc:{start:{line:59,column:30},end:{line:72,column:3}},line:59},4:{name:"(anonymous_4)",decl:{start:{line:73,column:2},end:{line:73,column:3}},loc:{start:{line:73,column:39},end:{line:83,column:3}},line:73},5:{name:"(anonymous_5)",decl:{start:{line:84,column:2},end:{line:84,column:3}},loc:{start:{line:84,column:11},end:{line:336,column:3}},line:84},6:{name:"(anonymous_6)",decl:{start:{line:107,column:24},end:{line:107,column:25}},loc:{start:{line:107,column:35},end:{line:107,column:74}},line:107},7:{name:"(anonymous_7)",decl:{start:{line:117,column:24},end:{line:117,column:25}},loc:{start:{line:117,column:35},end:{line:117,column:75}},line:117},8:{name:"(anonymous_8)",decl:{start:{line:125,column:24},end:{line:125,column:25}},loc:{start:{line:125,column:35},end:{line:125,column:76}},line:125},9:{name:"(anonymous_9)",decl:{start:{line:135,column:24},end:{line:135,column:25}},loc:{start:{line:135,column:35},end:{line:135,column:76}},line:135},10:{name:"(anonymous_10)",decl:{start:{line:145,column:24},end:{line:145,column:25}},loc:{start:{line:145,column:35},end:{line:145,column:104}},line:145},11:{name:"(anonymous_11)",decl:{start:{line:155,column:24},end:{line:155,column:25}},loc:{start:{line:155,column:35},end:{line:155,column:105}},line:155},12:{name:"(anonymous_12)",decl:{start:{line:165,column:24},end:{line:165,column:25}},loc:{start:{line:165,column:35},end:{line:165,column:98}},line:165},13:{name:"(anonymous_13)",decl:{start:{line:175,column:24},end:{line:175,column:25}},loc:{start:{line:175,column:35},end:{line:175,column:102}},line:175},14:{name:"(anonymous_14)",decl:{start:{line:187,column:24},end:{line:187,column:25}},loc:{start:{line:187,column:35},end:{line:187,column:76}},line:187},15:{name:"(anonymous_15)",decl:{start:{line:197,column:24},end:{line:197,column:25}},loc:{start:{line:197,column:35},end:{line:197,column:74}},line:197},16:{name:"(anonymous_16)",decl:{start:{line:207,column:24},end:{line:207,column:25}},loc:{start:{line:207,column:35},end:{line:207,column:77}},line:207},17:{name:"(anonymous_17)",decl:{start:{line:217,column:24},end:{line:217,column:25}},loc:{start:{line:217,column:35},end:{line:217,column:75}},line:217},18:{name:"(anonymous_18)",decl:{start:{line:229,column:24},end:{line:229,column:25}},loc:{start:{line:229,column:35},end:{line:229,column:76}},line:229},19:{name:"(anonymous_19)",decl:{start:{line:239,column:24},end:{line:239,column:25}},loc:{start:{line:239,column:35},end:{line:239,column:75}},line:239},20:{name:"(anonymous_20)",decl:{start:{line:249,column:24},end:{line:249,column:25}},loc:{start:{line:249,column:35},end:{line:249,column:79}},line:249},21:{name:"(anonymous_21)",decl:{start:{line:261,column:24},end:{line:261,column:25}},loc:{start:{line:261,column:35},end:{line:261,column:78}},line:261},22:{name:"(anonymous_22)",decl:{start:{line:271,column:24},end:{line:271,column:25}},loc:{start:{line:271,column:35},end:{line:271,column:78}},line:271},23:{name:"(anonymous_23)",decl:{start:{line:281,column:24},end:{line:281,column:25}},loc:{start:{line:281,column:35},end:{line:281,column:84}},line:281},24:{name:"(anonymous_24)",decl:{start:{line:291,column:24},end:{line:291,column:25}},loc:{start:{line:291,column:35},end:{line:291,column:80}},line:291},25:{name:"(anonymous_25)",decl:{start:{line:301,column:24},end:{line:301,column:25}},loc:{start:{line:301,column:35},end:{line:301,column:83}},line:301},26:{name:"(anonymous_26)",decl:{start:{line:316,column:24},end:{line:316,column:25}},loc:{start:{line:316,column:35},end:{line:316,column:67}},line:316},27:{name:"(anonymous_27)",decl:{start:{line:330,column:24},end:{line:330,column:25}},loc:{start:{line:330,column:35},end:{line:330,column:87}},line:330}},branchMap:{0:{loc:{start:{line:21,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:21,column:4},end:{line:25,column:5}},{start:{line:23,column:11},end:{line:25,column:5}}],line:21},1:{loc:{start:{line:35,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:39,column:5}},{start:{line:37,column:11},end:{line:39,column:5}}],line:35},2:{loc:{start:{line:49,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:53,column:5}},{start:{line:51,column:11},end:{line:53,column:5}}],line:49},3:{loc:{start:{line:63,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:63,column:4},end:{line:67,column:5}},{start:{line:65,column:11},end:{line:67,column:5}}],line:63},4:{loc:{start:{line:77,column:4},end:{line:81,column:5}},type:"if",locations:[{start:{line:77,column:4},end:{line:81,column:5}},{start:{line:79,column:11},end:{line:81,column:5}}],line:77},5:{loc:{start:{line:85,column:21},end:{line:85,column:55}},type:"binary-expr",locations:[{start:{line:85,column:21},end:{line:85,column:49}},{start:{line:85,column:53},end:{line:85,column:55}}],line:85},6:{loc:{start:{line:88,column:18},end:{line:88,column:49}},type:"binary-expr",locations:[{start:{line:88,column:18},end:{line:88,column:43}},{start:{line:88,column:47},end:{line:88,column:49}}],line:88},7:{loc:{start:{line:89,column:23},end:{line:89,column:59}},type:"binary-expr",locations:[{start:{line:89,column:23},end:{line:89,column:53}},{start:{line:89,column:57},end:{line:89,column:59}}],line:89},8:{loc:{start:{line:90,column:20},end:{line:90,column:53}},type:"binary-expr",locations:[{start:{line:90,column:20},end:{line:90,column:47}},{start:{line:90,column:51},end:{line:90,column:53}}],line:90},9:{loc:{start:{line:91,column:23},end:{line:91,column:59}},type:"binary-expr",locations:[{start:{line:91,column:23},end:{line:91,column:53}},{start:{line:91,column:57},end:{line:91,column:59}}],line:91},10:{loc:{start:{line:185,column:21},end:{line:185,column:42}},type:"binary-expr",locations:[{start:{line:185,column:21},end:{line:185,column:36}},{start:{line:185,column:40},end:{line:185,column:42}}],line:185},11:{loc:{start:{line:315,column:21},end:{line:315,column:55}},type:"binary-expr",locations:[{start:{line:315,column:21},end:{line:315,column:49}},{start:{line:315,column:53},end:{line:315,column:55}}],line:315},12:{loc:{start:{line:329,column:21},end:{line:329,column:62}},type:"binary-expr",locations:[{start:{line:329,column:21},end:{line:329,column:50}},{start:{line:329,column:54},end:{line:329,column:62}}],line:329}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx"],names:[],mappings:"AAqIM,SACE,KADF;AArIN,OAAO,WAAW;AAClB,OAAO,YAAY;AAEnB,SAA+B,uBAAuB;AAEtD,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAWhC,MAAM,8BAA8B,MAAM,UAAsC;AAAA,EAC9E,yBAAyB,UAAyC,OAA2B;AAC3F,UAAM,aAAa;AAAA,MACjB,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,WAAW,QAAQ;AAAA,IAC5B,OACK;AACH,iBAAW,QAAQ,IAAI;AAAA,IACzB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAAoC,OAAY;AAClE,UAAM,QAAQ;AAAA,MACZ,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,MAAM,QAAQ;AAAA,IACvB,OACK;AAEH,YAAM,QAAQ,IAAI;AAAA,IACpB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,UAAsC,OAAY;AACtE,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,QAAQ,QAAQ;AAAA,IACzB,OACK;AAEH,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,qBAAqB,OAAY;AAC/B,UAAM,aAAa;AAAA,MACjB,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,WAAW;AAAA,IACpB,OACK;AACH,iBAAW,OAAO;AAAA,IACpB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAA8C,OAAY;AAC5E,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,IAChB;AAEA,QAAI,UAAU,QAAW;AAEvB,aAAO,aAAa,QAAQ;AAAA,IAC9B,OACK;AAEH,mBAAa,QAAQ,IAAI;AAAA,IAC3B;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAEA,SAAS;AACP,UAAM,WAAW,KAAK,MAAM,SAAS,YAAY,CAAC;AAClD,UAAM,EAAC,GAAG,0BAA0B,SAAQ,IAAI,KAAK;AACrD,UAAM,MAAM,oBAAoB,CAAC;AAEjC,UAAM,QAAQ,KAAK,MAAM,SAAS,SAAS,CAAC;AAC5C,UAAM,aAAa,KAAK,MAAM,SAAS,cAAc,CAAC;AACtD,UAAM,UAAU,KAAK,MAAM,SAAS,WAAW,CAAC;AAChD,UAAM,aAAa,KAAK,MAAM,SAAS,cAAc,CAAC;AAEtD,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,gBAAgB;AAAA,QAEzB,+BAAC,SAAI,WAAU,kBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,CAAC,UAAU,KAAK,oBAAoB,QAAQ,KAAK;AAAA;AAAA,UAC7D;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,EAAC,KAAK,EAAE,6DAA6D,EAAC;AAAA,cACjF,eAAY;AAAA,cACZ,OAAQ,KAAK,MAAM,SAAiB;AAAA,cACpC,UAAU,CAAC,UAAU,KAAK,oBAAoB,SAAS,KAAK;AAAA;AAAA,UAC9D;AAAA,UACA,oBAAC,SAAM,OAAO,EAAE,YAAY,GAAG,WAAW,OAAO,MAAM,QAAQ,eAAY,yBACzE;AAAA,YAAC;AAAA;AAAA,cACC,UAAS;AAAA,cACT,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D,GACF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,YAAY;AAAA,cACrB,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,cAC1C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,oCAAoC;AAAA,cACpD,UAAU,CAAC,UAAU,yBAAyB,sCAAsC,KAAK;AAAA;AAAA,UAC3F;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,cAC/C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,qCAAqC;AAAA,cACrD,UAAU,CAAC,UAAU,yBAAyB,uCAAuC,KAAK;AAAA;AAAA,UAC5F;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,cACxC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,8BAA8B;AAAA,cAC9C,UAAU,CAAC,UAAU,yBAAyB,gCAAgC,KAAK;AAAA;AAAA,UACrF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,wBAAwB;AAAA,cAC5C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,kCAAkC;AAAA,cAClD,UAAU,CAAC,UAAU,yBAAyB,oCAAoC,KAAK;AAAA;AAAA,UACzF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ;AAAA,cACjB,WAAW,OAAO,MAAM;AAAA,cACxB,QAAQ;AAAA,cACR,MAAK;AAAA,cACL,OAAO,SAAS,UAAU,CAAC;AAAA,cAC3B,SAAS,CAAC,GAAG,CAAC;AAAA,cACd,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS;AAAA,cACT,UAAU,CAAC,UAAU,KAAK,oBAAoB,QAAQ,KAAK;AAAA;AAAA,UAC7D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,SAAS;AAAA,cAClB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,QAAQ;AAAA,cAC9B,UAAU,CAAC,UAAU,KAAK,oBAAoB,WAAW,KAAK;AAAA;AAAA,UAChE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,CAAC,UAAU,KAAK,oBAAoB,SAAS,KAAK;AAAA;AAAA,UAC9D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,cAAc;AAAA,cACvB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,cAC/C,SAAS,OAAO,MAAM,OAAO;AAAA,cAC7B,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,aAAa;AAAA,cACtB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,CAAC,UAAU,KAAK,oBAAoB,SAAS,KAAK;AAAA;AAAA,UAC9D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,iBAAiB;AAAA,cAC1B,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,UAAU;AAAA,cAChC,UAAU,CAAC,UAAU,KAAK,oBAAoB,aAAa,KAAK;AAAA;AAAA,UAClE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,QAAQ,OAAO,MAAM,SAAS;AAAA,cAC9B,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,SAAS;AAAA,cAC/B,UAAU,CAAC,UAAU,KAAK,oBAAoB,YAAY,KAAK;AAAA;AAAA,UACjE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,QAAQ;AAAA,cAC1B,eAAY;AAAA,cACZ,OAAO,QAAQ;AAAA,cACf,UAAU,CAAC,UAAU,KAAK,sBAAsB,UAAU,KAAK;AAAA;AAAA,UACjE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,sBAAsB;AAAA,cAC/B,WAAW,OAAO,QAAQ;AAAA,cAC1B,OAAO,QAAQ;AAAA,cACf,SAAS,OAAO,QAAQ,aAAa;AAAA,cACrC,UAAU,CAAC,UAAU,KAAK,sBAAsB,gBAAgB,KAAK;AAAA;AAAA,UACvE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,kBAAkB;AAAA,cAC3B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,MAAM;AAAA,cACjC,UAAU,CAAC,UAAU,KAAK,yBAAyB,SAAS,KAAK;AAAA;AAAA,UACnE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,qBAAqB;AAAA,cAC9B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,SAAS;AAAA,cACpC,UAAU,CAAC,UAAU,KAAK,yBAAyB,YAAY,KAAK;AAAA;AAAA,UACtE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,YAAY;AAAA,cACrB,eAAY;AAAA,cACZ,SAAS;AAAA,gBACP,CAAC,IAAI,WAAW;AAAA,gBAChB,CAAC,YAAY,UAAU;AAAA,gBACvB,CAAC,SAAS,OAAO;AAAA,gBACjB,CAAC,wBAAwB,sBAAsB;AAAA,cACjD;AAAA,cACA,OAAO,YAAY,MAAM,SAAS,KAAK;AAAA,cACvC,UAAU,CAAC,UAAU,KAAK,qBAAqB,KAAK;AAAA;AAAA,UACtD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,eAAe;AAAA,cACnC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,SAAS;AAAA,gBACP,CAAC,UAAU,eAAe;AAAA,gBAC1B,CAAC,MAAM,EAAE,4BAA4B,CAAC;AAAA,cACxC;AAAA,cACA,OAAO,SAAS,mBAAmB,KAAK;AAAA,cACxC,UAAU,CAAC,UAAU,yBAAyB,qBAAqB,KAAK;AAAA;AAAA,UAC1E;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"88fb94a6f90f9fea29b8036f99aee1df40b81df7"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Bn=function(){return s},s}Bn();class xRe extends On.Component{changeTransitionProperty(e,t){Bn().f[0]++;const i=(Bn().s[0]++,{...this.props.mapStyle.transition});Bn().s[1]++,t===void 0?(Bn().b[0][0]++,Bn().s[2]++,delete i[e]):(Bn().b[0][1]++,Bn().s[3]++,i[e]=t),Bn().s[4]++,this.props.onStyleChanged({...this.props.mapStyle,transition:i})}changeLightProperty(e,t){Bn().f[1]++;const i=(Bn().s[5]++,{...this.props.mapStyle.light});Bn().s[6]++,t===void 0?(Bn().b[1][0]++,Bn().s[7]++,delete i[e]):(Bn().b[1][1]++,Bn().s[8]++,i[e]=t),Bn().s[9]++,this.props.onStyleChanged({...this.props.mapStyle,light:i})}changeTerrainProperty(e,t){Bn().f[2]++;const i=(Bn().s[10]++,{...this.props.mapStyle.terrain});Bn().s[11]++,t===void 0?(Bn().b[2][0]++,Bn().s[12]++,delete i[e]):(Bn().b[2][1]++,Bn().s[13]++,i[e]=t),Bn().s[14]++,this.props.onStyleChanged({...this.props.mapStyle,terrain:i})}changeProjectionType(e){Bn().f[3]++;const t=(Bn().s[15]++,{...this.props.mapStyle.projection});Bn().s[16]++,e===void 0?(Bn().b[3][0]++,Bn().s[17]++,delete t.type):(Bn().b[3][1]++,Bn().s[18]++,t.type=e),Bn().s[19]++,this.props.onStyleChanged({...this.props.mapStyle,projection:t})}changeStyleProperty(e,t){Bn().f[4]++;const i=(Bn().s[20]++,{...this.props.mapStyle});Bn().s[21]++,t===void 0?(Bn().b[4][0]++,Bn().s[22]++,delete i[e]):(Bn().b[4][1]++,Bn().s[23]++,i[e]=t),Bn().s[24]++,this.props.onStyleChanged(i)}render(){Bn().f[5]++;const e=(Bn().s[25]++,Bn().b[5][0]++,this.props.mapStyle.metadata||(Bn().b[5][1]++,{})),{t,onChangeMetadataProperty:i,mapStyle:r}=(Bn().s[26]++,this.props),o=(Bn().s[27]++,Dse(t)),s=(Bn().s[28]++,Bn().b[6][0]++,this.props.mapStyle.light||(Bn().b[6][1]++,{})),a=(Bn().s[29]++,Bn().b[7][0]++,this.props.mapStyle.transition||(Bn().b[7][1]++,{})),c=(Bn().s[30]++,Bn().b[8][0]++,this.props.mapStyle.terrain||(Bn().b[8][1]++,{})),f=(Bn().s[31]++,Bn().b[9][0]++,this.props.mapStyle.projection||(Bn().b[9][1]++,{}));return Bn().s[32]++,te.jsx(Q1,{"data-wd-key":"modal:settings",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:t("Style Settings"),children:te.jsxs("div",{className:"modal:settings",children:[te.jsx(sd,{label:t("Name"),fieldSpec:Tr.$root.name,"data-wd-key":"modal:settings.name",value:this.props.mapStyle.name,onChange:y=>(Bn().f[6]++,Bn().s[33]++,this.changeStyleProperty("name",y))}),te.jsx(sd,{label:t("Owner"),fieldSpec:{doc:t("Owner ID of the style. Used by Mapbox or future style APIs.")},"data-wd-key":"modal:settings.owner",value:this.props.mapStyle.owner,onChange:y=>(Bn().f[7]++,Bn().s[34]++,this.changeStyleProperty("owner",y))}),te.jsx(as,{label:t("Sprite URL"),fieldSpec:Tr.$root.sprite,"data-wd-key":"modal:settings.sprite",children:te.jsx(LB,{lintType:"json",value:this.props.mapStyle.sprite,onChange:y=>(Bn().f[8]++,Bn().s[35]++,this.changeStyleProperty("sprite",y))})}),te.jsx(B5,{label:t("Glyphs URL"),fieldSpec:Tr.$root.glyphs,"data-wd-key":"modal:settings.glyphs",value:this.props.mapStyle.glyphs,onChange:y=>(Bn().f[9]++,Bn().s[36]++,this.changeStyleProperty("glyphs",y))}),te.jsx(sd,{label:o.maputnik.maptiler_access_token.label,fieldSpec:o.maputnik.maptiler_access_token,"data-wd-key":"modal:settings.maputnik:openmaptiles_access_token",value:e["maputnik:openmaptiles_access_token"],onChange:y=>(Bn().f[10]++,Bn().s[37]++,i("maputnik:openmaptiles_access_token",y))}),te.jsx(sd,{label:o.maputnik.thunderforest_access_token.label,fieldSpec:o.maputnik.thunderforest_access_token,"data-wd-key":"modal:settings.maputnik:thunderforest_access_token",value:e["maputnik:thunderforest_access_token"],onChange:y=>(Bn().f[11]++,Bn().s[38]++,i("maputnik:thunderforest_access_token",y))}),te.jsx(sd,{label:o.maputnik.stadia_access_token.label,fieldSpec:o.maputnik.stadia_access_token,"data-wd-key":"modal:settings.maputnik:stadia_access_token",value:e["maputnik:stadia_access_token"],onChange:y=>(Bn().f[12]++,Bn().s[39]++,i("maputnik:stadia_access_token",y))}),te.jsx(sd,{label:o.maputnik.locationiq_access_token.label,fieldSpec:o.maputnik.locationiq_access_token,"data-wd-key":"modal:settings.maputnik:locationiq_access_token",value:e["maputnik:locationiq_access_token"],onChange:y=>(Bn().f[13]++,Bn().s[40]++,i("maputnik:locationiq_access_token",y))}),te.jsx(i6,{label:t("Center"),fieldSpec:Tr.$root.center,length:2,type:"number",value:(Bn().b[10][0]++,r.center||(Bn().b[10][1]++,[])),default:[0,0],onChange:y=>(Bn().f[14]++,Bn().s[41]++,this.changeStyleProperty("center",y))}),te.jsx(wm,{label:t("Zoom"),fieldSpec:Tr.$root.zoom,value:r.zoom,default:0,onChange:y=>(Bn().f[15]++,Bn().s[42]++,this.changeStyleProperty("zoom",y))}),te.jsx(wm,{label:t("Bearing"),fieldSpec:Tr.$root.bearing,value:r.bearing,default:Tr.$root.bearing.default,onChange:y=>(Bn().f[16]++,Bn().s[43]++,this.changeStyleProperty("bearing",y))}),te.jsx(wm,{label:t("Pitch"),fieldSpec:Tr.$root.pitch,value:r.pitch,default:Tr.$root.pitch.default,onChange:y=>(Bn().f[17]++,Bn().s[44]++,this.changeStyleProperty("pitch",y))}),te.jsx(CRe,{label:t("Light anchor"),fieldSpec:Tr.light.anchor,name:"light-anchor",value:s.anchor,options:Object.keys(Tr.light.anchor.values),default:Tr.light.anchor.default,onChange:y=>(Bn().f[18]++,Bn().s[45]++,this.changeLightProperty("anchor",y))}),te.jsx(_Re,{label:t("Light color"),fieldSpec:Tr.light.color,value:s.color,default:Tr.light.color.default,onChange:y=>(Bn().f[19]++,Bn().s[46]++,this.changeLightProperty("color",y))}),te.jsx(wm,{label:t("Light intensity"),fieldSpec:Tr.light.intensity,value:s.intensity,default:Tr.light.intensity.default,onChange:y=>(Bn().f[20]++,Bn().s[47]++,this.changeLightProperty("intensity",y))}),te.jsx(i6,{label:t("Light position"),fieldSpec:Tr.light.position,type:"number",length:Tr.light.position.length,value:s.position,default:Tr.light.position.default,onChange:y=>(Bn().f[21]++,Bn().s[48]++,this.changeLightProperty("position",y))}),te.jsx(sd,{label:t("Terrain source"),fieldSpec:Tr.terrain.source,"data-wd-key":"modal:settings.maputnik:terrain_source",value:c.source,onChange:y=>(Bn().f[22]++,Bn().s[49]++,this.changeTerrainProperty("source",y))}),te.jsx(wm,{label:t("Terrain exaggeration"),fieldSpec:Tr.terrain.exaggeration,value:c.exaggeration,default:Tr.terrain.exaggeration.default,onChange:y=>(Bn().f[23]++,Bn().s[50]++,this.changeTerrainProperty("exaggeration",y))}),te.jsx(wm,{label:t("Transition delay"),fieldSpec:Tr.transition.delay,value:a.delay,default:Tr.transition.delay.default,onChange:y=>(Bn().f[24]++,Bn().s[51]++,this.changeTransitionProperty("delay",y))}),te.jsx(wm,{label:t("Transition duration"),fieldSpec:Tr.transition.duration,value:a.duration,default:Tr.transition.duration.default,onChange:y=>(Bn().f[25]++,Bn().s[52]++,this.changeTransitionProperty("duration",y))}),te.jsx(TM,{label:t("Projection"),"data-wd-key":"modal:settings.projection",options:[["","Undefined"],["mercator","Mercator"],["globe","Globe"],["vertical-perspective","Vertical Perspective"]],value:(Bn().b[11][0]++,f?.type?.toString()||(Bn().b[11][1]++,"")),onChange:y=>(Bn().f[26]++,Bn().s[53]++,this.changeProjectionType(y))}),te.jsx(TM,{label:o.maputnik.style_renderer.label,fieldSpec:o.maputnik.style_renderer,"data-wd-key":"modal:settings.maputnik:renderer",options:[["mlgljs","MapLibreGL JS"],["ol",t("Open Layers (experimental)")]],value:(Bn().b[12][0]++,e["maputnik:renderer"]||(Bn().b[12][1]++,"mlgljs")),onChange:y=>(Bn().f[27]++,Bn().s[54]++,i("maputnik:renderer",y))})]})})}}const MRe=(Bn().s[55]++,Mo()(xRe));var BS={exports:{}},wRe=BS.exports,aH;function SRe(){return aH||(aH=1,(function(n,e){(function(t,i,r){n.exports=r(),n.exports.default=r()})("slugify",wRe,function(){var t=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","":"cent","":"pound","":"currency","":"yen","":"(c)","":"a","":"(r)","":"o","":"A","":"A","":"A","":"A","":"A","":"A","":"AE","":"C","":"E","":"E","":"E","":"E","":"I","":"I","":"I","":"I","":"D","":"N","":"O","":"O","":"O","":"O","":"O","":"O","":"U","":"U","":"U","":"U","":"Y","":"TH","":"ss","":"a","":"a","":"a","":"a","":"a","":"a","":"ae","":"c","":"e","":"e","":"e","":"e","":"i","":"i","":"i","":"i","":"d","":"n","":"o","":"o","":"o","":"o","":"o","":"o","":"u","":"u","":"u","":"u","":"y","":"th","":"y","":"A","":"a","":"A","":"a","":"A","":"a","":"C","":"c","":"C","":"c","":"D","":"d","":"DJ","":"dj","":"E","":"e","":"E","":"e","":"e","":"e","":"E","":"e","":"G","":"g","":"G","":"g","":"I","":"i","":"i","":"i","":"I","":"i","":"I","":"i","":"k","":"k","":"L","":"l","":"L","":"l","":"L","":"l","":"N","":"n","":"N","":"n","":"N","":"n","":"O","":"o","":"O","":"o","":"OE","":"oe","":"R","":"r","":"R","":"r","":"S","":"s","":"S","":"s","":"S","":"s","":"T","":"t","":"T","":"t","":"U","":"u","":"u","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"z","":"Z","":"z","":"Z","":"z","":"E","":"f","":"O","":"o","":"U","":"u","":"LJ","":"lj","":"NJ","":"nj","":"S","":"s","":"T","":"t","":"e","":"o","":"A","":"E","":"H","":"I","":"O","":"Y","":"W","":"i","":"A","":"B","":"G","":"D","":"E","":"Z","":"H","":"8","":"I","":"K","":"L","":"M","":"N","":"3","":"O","":"P","":"R","":"S","":"T","":"Y","":"F","":"X","":"PS","":"W","":"I","":"Y","":"a","":"e","":"h","":"i","":"y","":"a","":"b","":"g","":"d","":"e","":"z","":"h","":"8","":"i","":"k","":"l","":"m","":"n","":"3","":"o","":"p","":"r","":"s","":"s","":"t","":"y","":"f","":"x","":"ps","":"w","":"i","":"y","":"o","":"y","":"w","":"Yo","":"DJ","":"Ye","":"I","":"Yi","":"J","":"LJ","":"NJ","":"C","":"DZ","":"A","":"B","":"V","":"G","":"D","":"E","":"Zh","":"Z","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"S","":"T","":"U","":"F","":"H","":"C","":"Ch","":"Sh","":"Sh","":"U","":"Y","":"","":"E","":"Yu","":"Ya","":"a","":"b","":"v","":"g","":"d","":"e","":"zh","":"z","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"f","":"h","":"c","":"ch","":"sh","":"sh","":"u","":"y","":"","":"e","":"yu","":"ya","":"yo","":"dj","":"ye","":"i","":"yi","":"j","":"lj","":"nj","":"c","":"u","":"dz","":"G","":"g","":"GH","":"gh","":"KH","":"kh","":"NG","":"ng","":"UE","":"ue","":"U","":"u","":"H","":"h","":"AE","":"ae","":"OE","":"oe","":"A","":"B","":"G","":"D","":"E","":"Z","":"E'","":"Y'","":"T'","":"JH","":"I","":"L","":"X","":"C'","":"K","":"H","":"D'","":"GH","":"TW","":"M","":"Y","":"N","":"SH","":"CH","":"P","":"J","":"R'","":"S","":"V","":"T","":"R","":"C","":"P'","":"Q'","":"O''","":"F","":"EV","":"a","":"aa","":"a","":"u","":"i","":"e","":"a","":"b","":"h","":"t","":"th","":"j","":"h","":"kh","":"d","":"th","":"r","":"z","":"s","":"sh","":"s","":"dh","":"t","":"z","":"a","":"gh","":"f","":"q","":"k","":"l","":"m","":"n","":"h","":"w","":"a","":"y","":"an","":"on","":"en","":"a","":"u","":"e","":"","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"p","":"ch","":"zh","":"k","":"g","":"y","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"baht","":"a","":"b","":"g","":"d","":"e","":"v","":"z","":"t","":"i","":"k","":"l","":"m","":"n","":"o","":"p","":"zh","":"r","":"s","":"t","":"u","":"f","":"k","":"gh","":"q","":"sh","":"ch","":"ts","":"dz","":"ts","":"ch","":"kh","":"j","":"h","":"S","":"s","":"W","":"w","":"W","":"w","":"W","":"w","":"SS","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"I","":"i","":"I","":"i","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"-","":"'","":"'","":"\\"","":"\\"","":"\\"","":"+","":"*","":"...","":"ecu","":"cruzeiro","":"french franc","":"lira","":"mill","":"naira","":"peseta","":"rupee","":"won","":"new shequel","":"dong","":"euro","":"kip","":"tugrik","":"drachma","":"penny","":"peso","":"guarani","":"austral","":"hryvnia","":"cedi","":"kazakhstani tenge","":"indian rupee","":"turkish lira","":"russian ruble","":"bitcoin","":"sm","":"tm","":"d","":"delta","":"sum","":"infinity","":"love","":"yuan","":"yen","":"rial","":"laa","":"laa","":"lai","":"la"}`),i=JSON.parse('{"bg":{"":"Y","":"Ts","":"Sht","":"A","":"Y","":"y","":"ts","":"sht","":"a","":"y"},"de":{"":"AE","":"ae","":"OE","":"oe","":"UE","":"ue","":"ss","%":"prozent","&":"und","|":"oder","":"summe","":"unendlich","":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","":"centavos","":"libras","":"moneda","":"francos","":"suma","":"infinito","":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","":"centime","":"livre","":"devise","":"franc","":"somme","":"infini","":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","":"centavo","":"soma","":"libra","":"infinito","":"amor"},"uk":{"":"Y","":"y","":"Y","":"y","":"Ts","":"ts","":"Kh","":"kh","":"Shch","":"shch","":"H","":"h"},"vi":{"":"D","":"d"},"da":{"":"OE","":"oe","":"AA","":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"strre end"},"nb":{"&":"og","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"}}');function r(o,s){if(typeof o!="string")throw new Error("slugify: string argument expected");s=typeof s=="string"?{replacement:s}:s||{};var a=i[s.locale]||{},c=s.replacement===void 0?"-":s.replacement,f=s.trim===void 0?!0:s.trim,y=o.normalize().split("").reduce(function(_,E){var I=a[E];return I===void 0&&(I=t[E]),I===void 0&&(I=E),I===c&&(I=" "),_+I.replace(s.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return s.strict&&(y=y.replace(/[^A-Za-z0-9\s]/g,"")),f&&(y=y.trim()),y=y.replace(/\s+/g,c),s.lower&&(y=y.toLowerCase()),y}return r.extend=function(o){Object.assign(t,o)},r})})(BS)),BS.exports}var ERe=SRe();const BRe=Zl(ERe);var OS={exports:{}},ORe=OS.exports,lH;function IRe(){return lH||(lH=1,(function(n,e){(function(t,i){i()})(ORe,function(){function t(f,y){return typeof y>"u"?y={autoBom:!1}:typeof y!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),y={autoBom:!y}),y.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\uFEFF",f],{type:f.type}):f}function i(f,y,_){var E=new XMLHttpRequest;E.open("GET",f),E.responseType="blob",E.onload=function(){c(E.response,y,_)},E.onerror=function(){console.error("could not download file")},E.send()}function r(f){var y=new XMLHttpRequest;y.open("HEAD",f,!1);try{y.send()}catch{}return 200<=y.status&&299>=y.status}function o(f){try{f.dispatchEvent(new MouseEvent("click"))}catch{var y=document.createEvent("MouseEvents");y.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(y)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof window=="object"&&window.global===window?window:void 0,a=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(f,y,_){var E=s.URL||s.webkitURL,I=document.createElement("a");y=y||f.name||"download",I.download=y,I.rel="noopener",typeof f=="string"?(I.href=f,I.origin===location.origin?o(I):r(I.href)?i(f,y,_):o(I,I.target="_blank")):(I.href=E.createObjectURL(f),setTimeout(function(){E.revokeObjectURL(I.href)},4e4),setTimeout(function(){o(I)},0))}:"msSaveOrOpenBlob"in navigator?function(f,y,_){if(y=y||f.name||"download",typeof f!="string")navigator.msSaveOrOpenBlob(t(f,_),y);else if(r(f))i(f,y,_);else{var E=document.createElement("a");E.href=f,E.target="_blank",setTimeout(function(){o(E)})}}:function(f,y,_,E){if(E=E||open("","_blank"),E&&(E.document.title=E.document.body.innerText="downloading..."),typeof f=="string")return i(f,y,_);var I=f.type==="application/octet-stream",P=/constructor/i.test(s.HTMLElement)||s.safari,K=/CriOS\/[\d]+/.test(navigator.userAgent);if((K||I&&P||a)&&typeof FileReader<"u"){var z=new FileReader;z.onloadend=function(){var $=z.result;$=K?$:$.replace(/^data:[^;]*;/,"data:attachment/file;"),E?E.location.href=$:location=$,E=null},z.readAsDataURL(f)}else{var Q=s.URL||s.webkitURL,V=Q.createObjectURL(f);E?E.location=V:location.href=V,E=null,setTimeout(function(){Q.revokeObjectURL(V)},4e4)}});s.saveAs=c.saveAs=c,n.exports=c})})(OS)),OS.exports}var uH=IRe();const TRe="5.13.0";function Xn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx",e="0479ae849bf143a83f826f9fdcad7b323ec1b109",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx",statementMap:{0:{start:{line:14,column:28},end:{line:14,column:35}},1:{start:{line:15,column:36},end:{line:15,column:83}},2:{start:{line:18,column:4},end:{line:22,column:6}},3:{start:{line:25,column:4},end:{line:33,column:5}},4:{start:{line:26,column:6},end:{line:30,column:9}},5:{start:{line:32,column:6},end:{line:32,column:36}},6:{start:{line:36,column:23},end:{line:36,column:44}},7:{start:{line:37,column:22},end:{line:37,column:69}},8:{start:{line:38,column:17},end:{line:62,column:1}},9:{start:{line:63,column:17},end:{line:63,column:70}},10:{start:{line:64,column:23},end:{line:64,column:40}},11:{start:{line:65,column:4},end:{line:65,column:39}},12:{start:{line:68,column:23},end:{line:68,column:44}},13:{start:{line:69,column:4},end:{line:74,column:5}},14:{start:{line:70,column:19},end:{line:70,column:85}},15:{start:{line:71,column:25},end:{line:71,column:42}},16:{start:{line:72,column:6},end:{line:72,column:41}},17:{start:{line:73,column:6},end:{line:73,column:13}},18:{start:{line:75,column:21},end:{line:75,column:42}},19:{start:{line:76,column:4},end:{line:80,column:5}},20:{start:{line:77,column:6},end:{line:77,column:49}},21:{start:{line:78,column:6},end:{line:78,column:45}},22:{start:{line:79,column:6},end:{line:79,column:37}},23:{start:{line:79,column:30},end:{line:79,column:37}},24:{start:{line:81,column:21},end:{line:81,column:54}},25:{start:{line:82,column:4},end:{line:82,column:37}},26:{start:{line:83,column:4},end:{line:83,column:27}},27:{start:{line:84,column:4},end:{line:84,column:30}},28:{start:{line:87,column:23},end:{line:87,column:44}},29:{start:{line:88,column:23},end:{line:88,column:52}},30:{start:{line:89,column:4},end:{line:89,column:43}},31:{start:{line:90,column:4},end:{line:90,column:35}},32:{start:{line:90,column:28},end:{line:90,column:35}},33:{start:{line:91,column:21},end:{line:91,column:54}},34:{start:{line:92,column:4},end:{line:92,column:37}},35:{start:{line:93,column:4},end:{line:93,column:27}},36:{start:{line:94,column:4},end:{line:94,column:30}},37:{start:{line:97,column:23},end:{line:105,column:5}},38:{start:{line:106,column:23},end:{line:106,column:66}},39:{start:{line:107,column:4},end:{line:107,column:43}},40:{start:{line:108,column:4},end:{line:108,column:22}},41:{start:{line:111,column:25},end:{line:117,column:5}},42:{start:{line:118,column:4},end:{line:118,column:44}},43:{start:{line:121,column:14},end:{line:121,column:26}},44:{start:{line:122,column:16},end:{line:122,column:38}},45:{start:{line:123,column:4},end:{line:188,column:6}},46:{start:{line:191,column:20},end:{line:191,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:19},end:{line:23,column:3}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:34,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:15},end:{line:66,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:20},end:{line:85,column:3}},line:67},4:{name:"(anonymous_4)",decl:{start:{line:86,column:2},end:{line:86,column:3}},loc:{start:{line:86,column:22},end:{line:95,column:3}},line:86},5:{name:"(anonymous_5)",decl:{start:{line:96,column:2},end:{line:96,column:3}},loc:{start:{line:96,column:27},end:{line:109,column:3}},line:96},6:{name:"(anonymous_6)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:42},end:{line:119,column:3}},line:110},7:{name:"(anonymous_7)",decl:{start:{line:120,column:2},end:{line:120,column:3}},loc:{start:{line:120,column:11},end:{line:189,column:3}},line:120}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:25},1:{loc:{start:{line:37,column:22},end:{line:37,column:69}},type:"binary-expr",locations:[{start:{line:37,column:22},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:69}}],line:37},2:{loc:{start:{line:69,column:4},end:{line:74,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:74,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:76,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:76,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76},4:{loc:{start:{line:79,column:6},end:{line:79,column:37}},type:"if",locations:[{start:{line:79,column:6},end:{line:79,column:37}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},5:{loc:{start:{line:90,column:4},end:{line:90,column:35}},type:"if",locations:[{start:{line:90,column:4},end:{line:90,column:35}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90},6:{loc:{start:{line:140,column:24},end:{line:140,column:58}},type:"binary-expr",locations:[{start:{line:140,column:24},end:{line:140,column:52}},{start:{line:140,column:56},end:{line:140,column:58}}],line:140},7:{loc:{start:{line:149,column:24},end:{line:149,column:58}},type:"binary-expr",locations:[{start:{line:149,column:24},end:{line:149,column:52}},{start:{line:149,column:56},end:{line:149,column:58}}],line:149},8:{loc:{start:{line:158,column:24},end:{line:158,column:58}},type:"binary-expr",locations:[{start:{line:158,column:24},end:{line:158,column:52}},{start:{line:158,column:56},end:{line:158,column:58}}],line:158},9:{loc:{start:{line:167,column:24},end:{line:167,column:58}},type:"binary-expr",locations:[{start:{line:167,column:24},end:{line:167,column:52}},{start:{line:167,column:56},end:{line:167,column:58}}],line:167},10:{loc:{start:{line:177,column:12},end:{line:180,column:16}},type:"binary-expr",locations:[{start:{line:177,column:12},end:{line:177,column:39}},{start:{line:177,column:59},end:{line:180,column:16}}],line:177}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx"],names:[],mappings:"AAoKQ,cAKA,YALA;AApKR,OAAO,WAAW;AAClB,OAAO,aAAa;AACpB,SAAQ,cAAa;AACrB,SAAQ,eAAc;AACtB,SAAQ,cAAa;AACrB,SAAQ,OAAO,cAAa;AAC5B,SAA8B,uBAAsB;AAEpD,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAIhC,MAAM,sBAAsB;AAC5B,MAAM,8BAA8B,OAAO,OAAO,uBAAuB;AAazE,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAE1E,iBAAiB;AACf,WAAO;AAAA,MACL,MAAM;AAAA,QACJ,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MAC/C;AAAA,IACF;AAAA,EACF;AAAA,EAEA,aAAa;AACX,QAAI,KAAK,MAAM,SAAS,MAAM;AAC5B,aAAO,QAAQ,KAAK,MAAM,SAAS,MAAM;AAAA,QACvC,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,OAAO;AAAA,MACT,CAAC;AAAA,IACH,OAAO;AACL,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AAAA,EACF;AAAA,EAEA,aAAa;AACX,UAAM,aAAa,KAAK,eAAe;AACvC,UAAM,YAAY,KAAK,MAAM,SAAS,QAAQ,KAAK,MAAM,EAAE,KAAK;AAChE,UAAM,OAAO;AAAA;AAAA;AAAA;AAAA,WAIN,SAAS;AAAA;AAAA,+CAE2B,mBAAmB;AAAA,8CACpB,mBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAW/C,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQxB,UAAM,OAAO,IAAI,KAAK,CAAC,IAAI,GAAG,EAAC,MAAM,0BAAyB,CAAC;AAC/D,UAAM,aAAa,KAAK,WAAW;AACnC,WAAO,MAAM,aAAa,OAAO;AAAA,EACnC;AAAA,EAEA,MAAM,YAAY;AAChB,UAAM,aAAa,KAAK,eAAe;AAIvC,QAAI,CAAC,6BAA6B;AAChC,YAAM,OAAO,IAAI,KAAK,CAAC,UAAU,GAAG,EAAC,MAAM,iCAAgC,CAAC;AAC5E,YAAM,aAAa,KAAK,WAAW;AACnC,aAAO,MAAM,aAAa,OAAO;AACjC;AAAA,IACF;AAEA,QAAI,aAAa,KAAK,MAAM;AAC5B,QAAI,cAAc,MAAM;AACtB,mBAAa,MAAM,KAAK,iBAAiB;AACzC,WAAK,MAAM,gBAAgB,UAAU;AACrC,UAAI,cAAc,KAAM;AAAA,IAC1B;AAEA,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,cAAc;AAClB,UAAM,aAAa,KAAK,eAAe;AAEvC,UAAM,aAAa,MAAM,KAAK,iBAAiB;AAC/C,SAAK,MAAM,gBAAgB,UAAU;AACrC,QAAI,cAAc,KAAM;AAExB,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,mBAAyD;AAC7D,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAC,oBAAoB,CAAC,OAAO,EAAC;AAAA,QACxC;AAAA,MACF;AAAA,MACA,eAAe,KAAK,WAAW;AAAA,IACjC;AAEA,UAAM,aAAa,MAAM,OAAO,mBAAmB,UAAU;AAC7D,SAAK,MAAM,gBAAgB,UAAU;AACrC,WAAO;AAAA,EACT;AAAA,EAEA,uBAAuB,UAAkB,OAAY;AACnD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,MAAM,oBAAoB,CAAC;AACjC,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,YAAY;AAAA,QACrB,WAAU;AAAA,QAGV,+BAAC,aAAQ,WAAU,0BACjB;AAAA,8BAAC,QAAI,YAAE,YAAY,GAAE;AAAA,UACrB,oBAAC,OACE,YAAE,uCAAuC,GAC5C;AAAA,UAEA,qBAAC,SACC;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,gBAC1C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,oCAAoC;AAAA,gBACvF,UAAU,KAAK,uBAAuB,KAAK,MAAM,oCAAoC;AAAA;AAAA,YACvF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,gBAC/C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,qCAAqC;AAAA,gBACxF,UAAU,KAAK,uBAAuB,KAAK,MAAM,qCAAqC;AAAA;AAAA,YACxF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,gBACxC,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,8BAA8B;AAAA,gBACjF,UAAU,KAAK,uBAAuB,KAAK,MAAM,8BAA8B;AAAA;AAAA,YACjF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,wBAAwB;AAAA,gBAC5C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,kCAAkC;AAAA,gBACrF,UAAU,KAAK,uBAAuB,KAAK,MAAM,kCAAkC;AAAA;AAAA,YACrF;AAAA,aACF;AAAA,UAEA,qBAAC,SAAI,WAAU,iCACb;AAAA,iCAAC,eAAY,SAAS,KAAK,UAAU,KAAK,IAAI,GAC5C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,MAAM;AAAA,eACX;AAAA,YACC,+BACC,qBAAC,eAAY,SAAS,KAAK,YAAY,KAAK,IAAI,GAC9C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,SAAS;AAAA,eACd;AAAA,YAGF,qBAAC,eAAY,SAAS,KAAK,WAAW,KAAK,IAAI,GAC7C;AAAA,kCAAC,SAAK;AAAA,cACL,EAAE,aAAa;AAAA,eAClB;AAAA,aACF;AAAA,WACF;AAAA;AAAA,IAEF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0479ae849bf143a83f826f9fdcad7b323ec1b109"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Xn=function(){return s},s}Xn();const cH=(Xn().s[0]++,TRe),AH=(Xn().s[1]++,typeof window.showSaveFilePicker=="function");class kRe extends On.Component{tokenizedStyle(){return Xn().f[0]++,Xn().s[2]++,Bhe(md.stripAccessTokens(md.replaceAccessTokens(this.props.mapStyle)))}exportName(){return Xn().f[1]++,Xn().s[3]++,this.props.mapStyle.name?(Xn().b[0][0]++,Xn().s[4]++,BRe(this.props.mapStyle.name,{replacement:"_",remove:/[*\-+~.()'"!:]/g,lower:!0})):(Xn().b[0][1]++,Xn().s[5]++,this.props.mapStyle.id)}createHtml(){Xn().f[2]++;const e=(Xn().s[6]++,this.tokenizedStyle()),t=(Xn().s[7]++,Xn().b[1][0]++,this.props.mapStyle.name||(Xn().b[1][1]++,this.props.t("Map"))),i=(Xn().s[8]++,`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>${t}</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <script src="https://unpkg.com/maplibre-gl@${cH}/dist/maplibre-gl.js"><\/script>
  <link href="https://unpkg.com/maplibre-gl@${cH}/dist/maplibre-gl.css" rel="stylesheet" />
  <style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
      const map = new maplibregl.Map({
         container: 'map',
         style: ${e},
      });
      map.addControl(new maplibregl.NavigationControl());
  <\/script>
</body>
</html>
`),r=(Xn().s[9]++,new Blob([i],{type:"text/html;charset=utf-8"})),o=(Xn().s[10]++,this.exportName());Xn().s[11]++,uH.saveAs(r,o+".html")}async saveStyle(){Xn().f[3]++;const e=(Xn().s[12]++,this.tokenizedStyle());if(Xn().s[13]++,AH)Xn().b[2][1]++;else{Xn().b[2][0]++;const r=(Xn().s[14]++,new Blob([e],{type:"application/json;charset=utf-8"})),o=(Xn().s[15]++,this.exportName());Xn().s[16]++,uH.saveAs(r,o+".json"),Xn().s[17]++;return}let t=(Xn().s[18]++,this.props.fileHandle);if(Xn().s[19]++,t==null)if(Xn().b[3][0]++,Xn().s[20]++,t=await this.createFileHandle(),Xn().s[21]++,this.props.onSetFileHandle(t),Xn().s[22]++,t==null){Xn().b[4][0]++,Xn().s[23]++;return}else Xn().b[4][1]++;else Xn().b[3][1]++;const i=(Xn().s[24]++,await t.createWritable());Xn().s[25]++,await i.write(e),Xn().s[26]++,await i.close(),Xn().s[27]++,this.props.onOpenToggle()}async saveStyleAs(){Xn().f[4]++;const e=(Xn().s[28]++,this.tokenizedStyle()),t=(Xn().s[29]++,await this.createFileHandle());if(Xn().s[30]++,this.props.onSetFileHandle(t),Xn().s[31]++,t==null){Xn().b[5][0]++,Xn().s[32]++;return}else Xn().b[5][1]++;const i=(Xn().s[33]++,await t.createWritable());Xn().s[34]++,await i.write(e),Xn().s[35]++,await i.close(),Xn().s[36]++,this.props.onOpenToggle()}async createFileHandle(){Xn().f[5]++;const e=(Xn().s[37]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],suggestedName:this.exportName()}),t=(Xn().s[38]++,await window.showSaveFilePicker(e));return Xn().s[39]++,this.props.onSetFileHandle(t),Xn().s[40]++,t}changeMetadataProperty(e,t){Xn().f[6]++;const i=(Xn().s[41]++,{...this.props.mapStyle,metadata:{...this.props.mapStyle.metadata,[e]:t}});Xn().s[42]++,this.props.onStyleChanged(i)}render(){Xn().f[7]++;const e=(Xn().s[43]++,this.props.t),t=(Xn().s[44]++,Dse(e));return Xn().s[45]++,te.jsx(Q1,{"data-wd-key":"modal:export",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Save Style"),className:"maputnik-export-modal",children:te.jsxs("section",{className:"maputnik-modal-section",children:[te.jsx("h1",{children:e("Save Style")}),te.jsx("p",{children:e("Save the JSON style to your computer.")}),te.jsxs("div",{children:[te.jsx(sd,{label:t.maputnik.maptiler_access_token.label,fieldSpec:t.maputnik.maptiler_access_token,value:(Xn().b[6][0]++,this.props.mapStyle.metadata||(Xn().b[6][1]++,{}))["maputnik:openmaptiles_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:openmaptiles_access_token")}),te.jsx(sd,{label:t.maputnik.thunderforest_access_token.label,fieldSpec:t.maputnik.thunderforest_access_token,value:(Xn().b[7][0]++,this.props.mapStyle.metadata||(Xn().b[7][1]++,{}))["maputnik:thunderforest_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:thunderforest_access_token")}),te.jsx(sd,{label:t.maputnik.stadia_access_token.label,fieldSpec:t.maputnik.stadia_access_token,value:(Xn().b[8][0]++,this.props.mapStyle.metadata||(Xn().b[8][1]++,{}))["maputnik:stadia_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:stadia_access_token")}),te.jsx(sd,{label:t.maputnik.locationiq_access_token.label,fieldSpec:t.maputnik.locationiq_access_token,value:(Xn().b[9][0]++,this.props.mapStyle.metadata||(Xn().b[9][1]++,{}))["maputnik:locationiq_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:locationiq_access_token")})]}),te.jsxs("div",{className:"maputnik-modal-export-buttons",children:[te.jsxs(Ds,{onClick:this.saveStyle.bind(this),children:[te.jsx(R9,{}),e("Save")]}),(Xn().b[10][0]++,AH&&(Xn().b[10][1]++,te.jsxs(Ds,{onClick:this.saveStyleAs.bind(this),children:[te.jsx(R9,{}),e("Save as")]}))),te.jsxs(Ds,{onClick:this.createHtml.bind(this),children:[te.jsx(yfe,{}),e("Create HTML")]})]})]})})}}const DRe=(Xn().s[46]++,Mo()(kRe));function PM(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",e="d4204cb1114c57682afd09034f9cc8268e27db52",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",statementMap:{0:{start:{line:4,column:26},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:127}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:26},end:{line:4,column:27}},loc:{start:{line:4,column:37},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx"],names:[],mappings:"AAUM;AAVN,OAAO,uBAAsD;AAC7D,OAAO,cAAc;AAMrB,MAAM,oBAAsD,CAAC,UAAU;AACrE,SACE,oBAAC,YAAS,OAAO,MAAM,OACrB,8BAAC,qBAAmB,GAAG,OAAO,GAChC;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d4204cb1114c57682afd09034f9cc8268e27db52"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return PM=function(){return s},s}PM();PM().s[0]++;const Rse=n=>(PM().f[0]++,PM().s[1]++,te.jsx(nv,{label:n.label,children:te.jsx(ES,{...n})}));function LM(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",e="10be4a5b6db1d1fa2555f9b6247244050c0b65b8",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",statementMap:{0:{start:{line:4,column:22},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:120}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:22},end:{line:4,column:23}},loc:{start:{line:4,column:33},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx"],names:[],mappings:"AAYM;AAZN,OAAO,WAAW;AAClB,OAAO,mBAA8C;AAQrD,MAAM,gBAA8C,CAAC,UAAU;AAC7D,SACE,oBAAC,SAAM,OAAO,MAAM,OAClB,8BAAC,iBAAe,GAAG,OAAO,GAC5B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"10be4a5b6db1d1fa2555f9b6247244050c0b65b8"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return LM=function(){return s},s}LM();LM().s[0]++;const RRe=n=>(LM().f[0]++,LM().s[1]++,te.jsx(as,{label:n.label,children:te.jsx(_se,{...n})}));function yn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx",e="18323b845fc84e69550b153f838c0967a64d83cc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx",statementMap:{0:{start:{line:15,column:14},end:{line:15,column:26}},1:{start:{line:16,column:4},end:{line:30,column:9}},2:{start:{line:23,column:29},end:{line:26,column:12}},3:{start:{line:35,column:4},end:{line:38,column:7}},4:{start:{line:41,column:18},end:{line:41,column:47}},5:{start:{line:42,column:4},end:{line:51,column:6}},6:{start:{line:54,column:14},end:{line:54,column:26}},7:{start:{line:55,column:4},end:{line:99,column:9}},8:{start:{line:66,column:32},end:{line:69,column:12}},9:{start:{line:80,column:33},end:{line:83,column:12}},10:{start:{line:92,column:33},end:{line:95,column:12}},11:{start:{line:102,column:27},end:{line:107,column:1}},12:{start:{line:102,column:34},end:{line:107,column:1}},13:{start:{line:110,column:14},end:{line:110,column:26}},14:{start:{line:111,column:24},end:{line:118,column:5}},15:{start:{line:112,column:26},end:{line:112,column:64}},16:{start:{line:113,column:6},end:{line:113,column:29}},17:{start:{line:114,column:6},end:{line:117,column:9}},18:{start:{line:119,column:4},end:{line:146,column:9}},19:{start:{line:126,column:29},end:{line:129,column:12}},20:{start:{line:133,column:8},end:{line:144,column:10}},21:{start:{line:141,column:31},end:{line:141,column:52}},22:{start:{line:151,column:14},end:{line:151,column:26}},23:{start:{line:152,column:24},end:{line:159,column:5}},24:{start:{line:153,column:26},end:{line:153,column:64}},25:{start:{line:154,column:6},end:{line:154,column:29}},26:{start:{line:155,column:6},end:{line:158,column:9}},27:{start:{line:160,column:23},end:{line:165,column:5}},28:{start:{line:161,column:6},end:{line:164,column:9}},29:{start:{line:166,column:4},end:{line:192,column:9}},30:{start:{line:179,column:8},end:{line:190,column:10}},31:{start:{line:187,column:31},end:{line:187,column:52}},32:{start:{line:197,column:14},end:{line:197,column:26}},33:{start:{line:198,column:4},end:{line:209,column:6}},34:{start:{line:204,column:28},end:{line:207,column:10}},35:{start:{line:214,column:14},end:{line:214,column:26}},36:{start:{line:215,column:4},end:{line:242,column:9}},37:{start:{line:222,column:12},end:{line:225,column:15}},38:{start:{line:235,column:12},end:{line:238,column:15}},39:{start:{line:247,column:14},end:{line:247,column:26}},40:{start:{line:248,column:4},end:{line:263,column:9}},41:{start:{line:256,column:29},end:{line:259,column:12}},42:{start:{line:268,column:14},end:{line:268,column:26}},43:{start:{line:269,column:24},end:{line:275,column:5}},44:{start:{line:276,column:4},end:{line:340,column:5}},45:{start:{line:278,column:8},end:{line:278,column:79}},46:{start:{line:280,column:8},end:{line:280,column:85}},47:{start:{line:282,column:8},end:{line:282,column:77}},48:{start:{line:284,column:8},end:{line:284,column:76}},49:{start:{line:286,column:8},end:{line:286,column:77}},50:{start:{line:288,column:8},end:{line:300,column:13}},51:{start:{line:293,column:36},end:{line:296,column:14}},52:{start:{line:302,column:8},end:{line:302,column:77}},53:{start:{line:304,column:8},end:{line:331,column:13}},54:{start:{line:310,column:38},end:{line:313,column:16}},55:{start:{line:324,column:38},end:{line:327,column:16}},56:{start:{line:333,column:8},end:{line:333,column:76}},57:{start:{line:335,column:8},end:{line:335,column:74}},58:{start:{line:337,column:8},end:{line:337,column:74}},59:{start:{line:339,column:8},end:{line:339,column:20}},60:{start:{line:343,column:31},end:{line:343,column:80}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:31,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:23,column:20},end:{line:23,column:21}},loc:{start:{line:23,column:29},end:{line:26,column:12}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:24},end:{line:39,column:3}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:19},end:{line:52,column:3}},line:40},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:100,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:66,column:20},end:{line:66,column:21}},loc:{start:{line:66,column:32},end:{line:69,column:12}},line:66},6:{name:"(anonymous_6)",decl:{start:{line:80,column:20},end:{line:80,column:21}},loc:{start:{line:80,column:33},end:{line:83,column:12}},line:80},7:{name:"(anonymous_7)",decl:{start:{line:92,column:20},end:{line:92,column:21}},loc:{start:{line:92,column:33},end:{line:95,column:12}},line:92},8:{name:"(anonymous_8)",decl:{start:{line:102,column:27},end:{line:102,column:28}},loc:{start:{line:102,column:34},end:{line:107,column:1}},line:102},9:{name:"(anonymous_9)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:11},end:{line:147,column:3}},line:109},10:{name:"(anonymous_10)",decl:{start:{line:111,column:24},end:{line:111,column:25}},loc:{start:{line:111,column:38},end:{line:118,column:5}},line:111},11:{name:"(anonymous_11)",decl:{start:{line:126,column:20},end:{line:126,column:21}},loc:{start:{line:126,column:29},end:{line:129,column:12}},line:126},12:{name:"(anonymous_12)",decl:{start:{line:132,column:32},end:{line:132,column:33}},loc:{start:{line:132,column:57},end:{line:145,column:7}},line:132},13:{name:"(anonymous_13)",decl:{start:{line:141,column:22},end:{line:141,column:23}},loc:{start:{line:141,column:31},end:{line:141,column:52}},line:141},14:{name:"(anonymous_14)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:193,column:3}},line:150},15:{name:"(anonymous_15)",decl:{start:{line:152,column:24},end:{line:152,column:25}},loc:{start:{line:152,column:38},end:{line:159,column:5}},line:152},16:{name:"(anonymous_16)",decl:{start:{line:160,column:23},end:{line:160,column:24}},loc:{start:{line:160,column:33},end:{line:165,column:5}},line:160},17:{name:"(anonymous_17)",decl:{start:{line:178,column:32},end:{line:178,column:33}},loc:{start:{line:178,column:57},end:{line:191,column:7}},line:178},18:{name:"(anonymous_18)",decl:{start:{line:187,column:22},end:{line:187,column:23}},loc:{start:{line:187,column:31},end:{line:187,column:52}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:196,column:2},end:{line:196,column:3}},loc:{start:{line:196,column:11},end:{line:210,column:3}},line:196},20:{name:"(anonymous_20)",decl:{start:{line:204,column:18},end:{line:204,column:19}},loc:{start:{line:204,column:28},end:{line:207,column:10}},line:204},21:{name:"(anonymous_21)",decl:{start:{line:213,column:2},end:{line:213,column:3}},loc:{start:{line:213,column:11},end:{line:243,column:3}},line:213},22:{name:"(anonymous_22)",decl:{start:{line:221,column:20},end:{line:221,column:21}},loc:{start:{line:221,column:30},end:{line:226,column:11}},line:221},23:{name:"(anonymous_23)",decl:{start:{line:234,column:20},end:{line:234,column:21}},loc:{start:{line:234,column:33},end:{line:239,column:11}},line:234},24:{name:"(anonymous_24)",decl:{start:{line:246,column:2},end:{line:246,column:3}},loc:{start:{line:246,column:11},end:{line:264,column:3}},line:246},25:{name:"(anonymous_25)",decl:{start:{line:256,column:20},end:{line:256,column:21}},loc:{start:{line:256,column:29},end:{line:259,column:12}},line:256},26:{name:"(anonymous_26)",decl:{start:{line:267,column:2},end:{line:267,column:3}},loc:{start:{line:267,column:11},end:{line:341,column:3}},line:267},27:{name:"(anonymous_27)",decl:{start:{line:293,column:22},end:{line:293,column:23}},loc:{start:{line:293,column:36},end:{line:296,column:14}},line:293},28:{name:"(anonymous_28)",decl:{start:{line:310,column:24},end:{line:310,column:25}},loc:{start:{line:310,column:38},end:{line:313,column:16}},line:310},29:{name:"(anonymous_29)",decl:{start:{line:324,column:24},end:{line:324,column:25}},loc:{start:{line:324,column:38},end:{line:327,column:16}},line:324}},branchMap:{0:{loc:{start:{line:41,column:18},end:{line:41,column:47}},type:"binary-expr",locations:[{start:{line:41,column:18},end:{line:41,column:41}},{start:{line:41,column:45},end:{line:41,column:47}}],line:41},1:{loc:{start:{line:79,column:17},end:{line:79,column:47}},type:"binary-expr",locations:[{start:{line:79,column:17},end:{line:79,column:42}},{start:{line:79,column:46},end:{line:79,column:47}}],line:79},2:{loc:{start:{line:91,column:17},end:{line:91,column:48}},type:"binary-expr",locations:[{start:{line:91,column:17},end:{line:91,column:42}},{start:{line:91,column:46},end:{line:91,column:48}}],line:91},3:{loc:{start:{line:258,column:17},end:{line:258,column:72}},type:"cond-expr",locations:[{start:{line:258,column:48},end:{line:258,column:51}},{start:{line:258,column:54},end:{line:258,column:72}}],line:258},4:{loc:{start:{line:276,column:4},end:{line:340,column:5}},type:"switch",locations:[{start:{line:277,column:6},end:{line:278,column:79}},{start:{line:279,column:6},end:{line:280,column:85}},{start:{line:281,column:6},end:{line:282,column:77}},{start:{line:283,column:6},end:{line:284,column:76}},{start:{line:285,column:6},end:{line:286,column:77}},{start:{line:287,column:6},end:{line:300,column:13}},{start:{line:301,column:6},end:{line:302,column:77}},{start:{line:303,column:6},end:{line:331,column:13}},{start:{line:332,column:6},end:{line:333,column:76}},{start:{line:334,column:6},end:{line:335,column:74}},{start:{line:336,column:6},end:{line:337,column:74}},{start:{line:338,column:6},end:{line:339,column:20}}],line:276},5:{loc:{start:{line:297,column:19},end:{line:297,column:86}},type:"binary-expr",locations:[{start:{line:297,column:19},end:{line:297,column:45}},{start:{line:297,column:49},end:{line:297,column:86}}],line:297},6:{loc:{start:{line:314,column:21},end:{line:314,column:92}},type:"binary-expr",locations:[{start:{line:314,column:21},end:{line:314,column:47}},{start:{line:314,column:51},end:{line:314,column:92}}],line:314},7:{loc:{start:{line:328,column:21},end:{line:328,column:92}},type:"binary-expr",locations:[{start:{line:328,column:21},end:{line:328,column:47}},{start:{line:328,column:51},end:{line:328,column:92}}],line:328}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx"],names:[],mappings:"AA6BW,SACL,KADK;AA7BX,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,SAA+B,uBAAuB;AAGtD,OAAO,WAAW;AAClB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,eAAe;AACtB,OAAO,mBAAmB;AAc1B,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,cAAc;AAAA,UACvB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAaA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,eAAe,OAAiB;AAC9B,SAAK,MAAM,SAAS;AAAA,MAClB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB;AACf,UAAM,QAAQ,KAAK,MAAM,OAAO,SAAS,CAAC;AAC1C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,KAAK,MAAM,EAAE,UAAU;AAAA,QAC9B,WAAW,OAAO,cAAc;AAAA,QAChC,MAAK;AAAA,QACL,OAAO;AAAA,QACP,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,IACzC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACL;AAAA,WAAK,eAAe;AAAA,MACrB;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,SAAS;AAAA,YACP,CAAC,OAAO,mCAAmC;AAAA,YAC3C,CAAC,OAAO,yBAAyB;AAAA,UACnC;AAAA,UACA,UAAU,YAAU,KAAK,MAAM,SAAS;AAAA,YACtC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA,UACD,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEF;AACF;AAEA,MAAM,qBAAyE,CAAC,MAAO;AAAA,EACrF,EAAE,OAAO,EAAE,gBAAgB,GAAG,KAAK,WAAW;AAAA,EAC9C,EAAE,OAAO,EAAE,iBAAiB,GAAG,KAAK,YAAY;AAAA,EAChD,EAAE,OAAO,EAAE,oBAAoB,GAAG,KAAK,eAAe;AAAA,EACtD,EAAE,OAAO,EAAE,mBAAmB,GAAG,KAAK,cAAc;AACtD;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,aAAa,CAAC,SAAmB;AACrC,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,MAAK;AAAA,UACL,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,SAAS,CAAC;AAAA,UACV,UAAU;AAAA;AAAA,MACZ;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AASA,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,aAAa;AAAA,QACtB,WAAW,OAAO,eAAe;AAAA,QACjC,OAAO,KAAK,MAAM,OAAO;AAAA,QACzB,UAAU,UAAQ,KAAK,MAAM,SAAS;AAAA,UACpC,GAAG,KAAK,MAAM;AAAA,UACd;AAAA,QACF,CAAC;AAAA;AAAA,IACH;AAAA,EACF;AACF;AAUA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA,0BAAC,SAAM,OAAO,EAAE,SAAS,GAAG,WAAW,OAAO,eAAe,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAS;AAAA,UACT,UAAU,UAAQ;AAChB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,SAAS;AAAA,UAClB,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,aAAW;AACnB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAUA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA,UACZ,UAAU,CAAC,QAAgB,KAAK,MAAM,SAAS;AAAA,YAC7C,GAAG,KAAK,MAAM;AAAA,YACd,KAAK,IAAI,WAAW,YAAY,IAAI,MAAM,aAAa,GAAG;AAAA,UAC5D,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAQA,MAAM,uCAAuC,MAAM,UAA+C;AAAA,EAChG,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,UAAU,KAAK,MAAM;AAAA,MACrB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM,KAAK,MAAM;AAAA,MACjB,QAAQ,KAAK,MAAM;AAAA,IACrB;AACA,YAAO,KAAK,MAAM,MAAM;AAAA,MACtB,KAAK;AAAe,eAAO,oBAAC,0BAAwB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAgB,eAAO,oBAAC,gCAA8B,GAAG,aAAa;AAAA,MAC3E,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACjE,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAClD;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,WAAW;AAAA,YACpB,WAAW,OAAO,cAAc;AAAA,YAChC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,cACxC,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,YACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,cAAc,SAAS;AAAA,YACnE,eAAY;AAAA;AAAA,QACd,GACF;AAAA,MACA,KAAK;AAAuB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MAC1E,KAAK;AAAsB,eAAO,qBAAC,uBAAqB,GAAG,aACzD;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,WAAW;AAAA,cACpB,WAAW,OAAO,kBAAkB;AAAA,cACpC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA,cACvE,eAAY;AAAA;AAAA,UACd;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,UAAU;AAAA,cACnB,WAAW,OAAO,kBAAkB;AAAA,cACpC,SAAS,OAAO,KAAK,OAAO,kBAAkB,SAAS,MAAM;AAAA,cAC7D,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA;AAAA,UACzE;AAAA,WACF;AAAA,MACA,KAAK;AAAkB,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD;AAAS,eAAO;AAAA,IAClB;AAAA,EACF;AACF;AAEA,MAAM,yBAAyB,gBAAgB,EAAE,8BAA8B;AAC/E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"18323b845fc84e69550b153f838c0967a64d83cc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return yn=function(){return s},s}yn();class o9 extends On.Component{render(){yn().f[0]++;const e=(yn().s[0]++,this.props.t);return yn().s[1]++,te.jsxs("div",{children:[te.jsx(B5,{label:e("TileJSON URL"),fieldSpec:No.source_vector.url,value:this.props.source.url,onChange:t=>(yn().f[1]++,yn().s[2]++,this.props.onChange({...this.props.source,url:t}))}),this.props.children]})}}class s9 extends On.Component{changeTileUrls(e){yn().f[2]++,yn().s[3]++,this.props.onChange({...this.props.source,tiles:e})}renderTileUrls(){yn().f[3]++;const e=(yn().s[4]++,yn().b[0][0]++,this.props.source.tiles||(yn().b[0][1]++,[]));return yn().s[5]++,te.jsx(Rse,{label:this.props.t("Tile URL"),fieldSpec:No.source_vector.tiles,type:"url",value:e,onChange:this.changeTileUrls.bind(this)})}render(){yn().f[4]++;const e=(yn().s[6]++,this.props.t);return yn().s[7]++,te.jsxs("div",{children:[this.renderTileUrls(),te.jsx(TM,{label:e("Scheme Type"),fieldSpec:No.source_vector.scheme,options:[["xyz","xyz (Slippy map tilenames scheme)"],["tms","tms (OSGeo spec scheme)"]],onChange:t=>(yn().f[5]++,yn().s[8]++,this.props.onChange({...this.props.source,scheme:t})),value:this.props.source.scheme,"data-wd-key":"modal:sources.add.scheme_type"}),te.jsx(wm,{label:e("Min Zoom"),fieldSpec:No.source_vector.minzoom,value:(yn().b[1][0]++,this.props.source.minzoom||(yn().b[1][1]++,0)),onChange:t=>(yn().f[6]++,yn().s[9]++,this.props.onChange({...this.props.source,minzoom:t}))}),te.jsx(wm,{label:e("Max Zoom"),fieldSpec:No.source_vector.maxzoom,value:(yn().b[2][0]++,this.props.source.maxzoom||(yn().b[2][1]++,22)),onChange:t=>(yn().f[7]++,yn().s[10]++,this.props.onChange({...this.props.source,maxzoom:t}))}),this.props.children]})}}yn().s[11]++;const Pse=n=>(yn().f[8]++,yn().s[12]++,[{label:n("Coord top left"),key:"top left"},{label:n("Coord top right"),key:"top right"},{label:n("Coord bottom right"),key:"bottom right"},{label:n("Coord bottom left"),key:"bottom left"}]);class PRe extends On.Component{render(){yn().f[9]++;const e=(yn().s[13]++,this.props.t);yn().s[14]++;const t=(i,r)=>{yn().f[10]++;const o=(yn().s[15]++,this.props.source.coordinates.slice(0));yn().s[16]++,o[i]=r,yn().s[17]++,this.props.onChange({...this.props.source,coordinates:o})};return yn().s[18]++,te.jsxs("div",{children:[te.jsx(B5,{label:e("Image URL"),fieldSpec:No.source_image.url,value:this.props.source.url,onChange:i=>(yn().f[11]++,yn().s[19]++,this.props.onChange({...this.props.source,url:i}))}),Pse(e).map(({label:i,key:r},o)=>(yn().f[12]++,yn().s[20]++,te.jsx(i6,{label:i,length:2,type:"number",value:this.props.source.coordinates[o],default:[0,0],onChange:s=>(yn().f[13]++,yn().s[21]++,t(o,s))},r)))]})}}class LRe extends On.Component{render(){yn().f[14]++;const e=(yn().s[22]++,this.props.t);yn().s[23]++;const t=(r,o)=>{yn().f[15]++;const s=(yn().s[24]++,this.props.source.coordinates.slice(0));yn().s[25]++,s[r]=o,yn().s[26]++,this.props.onChange({...this.props.source,coordinates:s})};yn().s[27]++;const i=r=>{yn().f[16]++,yn().s[28]++,this.props.onChange({...this.props.source,urls:r})};return yn().s[29]++,te.jsxs("div",{children:[te.jsx(Rse,{label:e("Video URL"),fieldSpec:No.source_video.urls,type:"string",value:this.props.source.urls,default:[],onChange:i}),Pse(e).map(({label:r,key:o},s)=>(yn().f[17]++,yn().s[30]++,te.jsx(i6,{label:r,length:2,type:"number",value:this.props.source.coordinates[s],default:[0,0],onChange:a=>(yn().f[18]++,yn().s[31]++,t(s,a))},o)))]})}}class URe extends On.Component{render(){yn().f[19]++;const e=(yn().s[32]++,this.props.t);return yn().s[33]++,te.jsx(B5,{label:e("GeoJSON URL"),fieldSpec:No.source_geojson.data,value:this.props.source.data,onChange:t=>(yn().f[20]++,yn().s[34]++,this.props.onChange({...this.props.source,data:t}))})}}class KRe extends On.Component{render(){yn().f[21]++;const e=(yn().s[35]++,this.props.t);return yn().s[36]++,te.jsxs("div",{children:[te.jsx(as,{label:e("GeoJSON"),fieldSpec:No.source_geojson.data,children:te.jsx(LB,{value:this.props.source.data,lintType:"json",onChange:t=>{yn().f[22]++,yn().s[37]++,this.props.onChange({...this.props.source,data:t})}})}),te.jsx(RRe,{label:e("Cluster"),value:this.props.source.cluster,onChange:t=>{yn().f[23]++,yn().s[38]++,this.props.onChange({...this.props.source,cluster:t})}})]})}}class FRe extends On.Component{render(){yn().f[24]++;const e=(yn().s[39]++,this.props.t);return yn().s[40]++,te.jsxs("div",{children:[te.jsx(B5,{label:e("PMTiles URL"),fieldSpec:No.source_vector.url,value:this.props.source.url,"data-wd-key":"modal:sources.add.source_url",onChange:t=>(yn().f[25]++,yn().s[41]++,this.props.onChange({...this.props.source,url:t.startsWith("pmtiles://")?(yn().b[3][0]++,t):(yn().b[3][1]++,`pmtiles://${t}`)}))}),this.props.children]})}}class zRe extends On.Component{render(){yn().f[26]++;const e=(yn().s[42]++,this.props.t),t=(yn().s[43]++,{source:this.props.source,onChange:this.props.onChange,t:this.props.t,i18n:this.props.i18n,tReady:this.props.tReady});switch(yn().s[44]++,this.props.mode){case"geojson_url":return yn().b[4][0]++,yn().s[45]++,te.jsx(URe,{...t});case"geojson_json":return yn().b[4][1]++,yn().s[46]++,te.jsx(KRe,{...t});case"tilejson_vector":return yn().b[4][2]++,yn().s[47]++,te.jsx(o9,{...t});case"tile_vector":return yn().b[4][3]++,yn().s[48]++,te.jsx(s9,{...t});case"tilejson_raster":return yn().b[4][4]++,yn().s[49]++,te.jsx(o9,{...t});case"tile_raster":return yn().b[4][5]++,yn().s[50]++,te.jsx(s9,{...t,children:te.jsx(wm,{label:e("Tile Size"),fieldSpec:No.source_raster.tileSize,onChange:i=>(yn().f[27]++,yn().s[51]++,this.props.onChange({...this.props.source,tileSize:i})),value:(yn().b[5][0]++,this.props.source.tileSize||(yn().b[5][1]++,No.source_raster.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"})});case"tilejson_raster-dem":return yn().b[4][6]++,yn().s[52]++,te.jsx(o9,{...t});case"tilexyz_raster-dem":return yn().b[4][7]++,yn().s[53]++,te.jsxs(s9,{...t,children:[te.jsx(wm,{label:e("Tile Size"),fieldSpec:No.source_raster_dem.tileSize,onChange:i=>(yn().f[28]++,yn().s[54]++,this.props.onChange({...this.props.source,tileSize:i})),value:(yn().b[6][0]++,this.props.source.tileSize||(yn().b[6][1]++,No.source_raster_dem.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"}),te.jsx(TM,{label:e("Encoding"),fieldSpec:No.source_raster_dem.encoding,options:Object.keys(No.source_raster_dem.encoding.values),onChange:i=>(yn().f[29]++,yn().s[55]++,this.props.onChange({...this.props.source,encoding:i})),value:(yn().b[7][0]++,this.props.source.encoding||(yn().b[7][1]++,No.source_raster_dem.encoding.default))})]});case"pmtiles_vector":return yn().b[4][8]++,yn().s[56]++,te.jsx(FRe,{...t});case"image":return yn().b[4][9]++,yn().s[57]++,te.jsx(PRe,{...t});case"video":return yn().b[4][10]++,yn().s[58]++,te.jsx(LRe,{...t});default:return yn().b[4][11]++,yn().s[59]++,null}}}const Lse=(yn().s[60]++,Mo()(zRe));function Rm(){var n="/home/runner/work/maputnik/maputnik/src/libs/source.ts",e="871503159abbdc3b3ae7b24cdaefb6478172c58b",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/source.ts",statementMap:{0:{start:{line:2,column:27},end:{line:2,column:50}},1:{start:{line:3,column:2},end:{line:3,column:36}},2:{start:{line:4,column:2},end:{line:7,column:4}},3:{start:{line:10,column:2},end:{line:10,column:50}},4:{start:{line:13,column:25},end:{line:16,column:3}},5:{start:{line:17,column:2},end:{line:20,column:4}}},fnMap:{0:{name:"deleteSource",decl:{start:{line:1,column:16},end:{line:1,column:28}},loc:{start:{line:1,column:49},end:{line:8,column:1}},line:1},1:{name:"addSource",decl:{start:{line:9,column:16},end:{line:9,column:25}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},2:{name:"changeSource",decl:{start:{line:12,column:16},end:{line:12,column:28}},loc:{start:{line:12,column:57},end:{line:21,column:1}},line:12}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/source.ts"],names:[],mappings:"AAGO,gBAAS,aAAa,UAAoC,UAAkB;AACjF,QAAM,mBAAmB,EAAE,GAAG,SAAS,QAAO;AAC9C,SAAO,iBAAiB,QAAQ;AAChC,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;AAGO,gBAAS,UAAU,UAAoC,UAAkB,QAA6B;AAC3G,SAAO,aAAa,UAAU,UAAU,MAAM;AAChD;AAEO,gBAAS,aAAa,UAAoC,UAAkB,QAA6B;AAC9G,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,QAAQ,GAAG;AAAA,EACd;AACA,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"871503159abbdc3b3ae7b24cdaefb6478172c58b"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Rm=function(){return s},s}Rm();function jRe(n,e){Rm().f[0]++;const t=(Rm().s[0]++,{...n.sources});return Rm().s[1]++,delete t[e],Rm().s[2]++,{...n,sources:t}}function hH(n,e,t){return Rm().f[1]++,Rm().s[3]++,Use(n,e,t)}function Use(n,e,t){Rm().f[2]++;const i=(Rm().s[4]++,{...n.sources,[e]:t});return Rm().s[5]++,{...n,sources:i}}const NRe={type:"vector",url:"https://api.maptiler.com/tiles/v3-openmaptiles/tiles.json?key={key}",title:"OpenMapTiles v3"},GRe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.transport-v2.json?apikey={key}",title:"Thunderforest Transport v2"},WRe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.outdoors-v2.json?apikey={key}",title:"Thunderforest Outdoors v2"},QRe={type:"vector",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/data/vector/open-zoomstack/config.json",title:"OS Open Zoomstack v2"},qRe={type:"vector",url:"https://tiles.locationiq.com/v3/pbf/tiles.json?key={key}",title:"LocationIQ"},dH={openmaptiles:NRe,thunderforest_transport:GRe,thunderforest_outdoors:WRe,open_zoomstack:QRe,locationiq:qRe};function zt(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx",e="30dc2f79b5d8eab063b35a7a783386d299d39465",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:33,column:9}},1:{start:{line:20,column:23},end:{line:20,column:57}},2:{start:{line:37,column:2},end:{line:40,column:3}},3:{start:{line:38,column:4},end:{line:38,column:43}},4:{start:{line:38,column:22},end:{line:38,column:43}},5:{start:{line:39,column:4},end:{line:39,column:29}},6:{start:{line:41,column:2},end:{line:44,column:3}},7:{start:{line:42,column:4},end:{line:42,column:50}},8:{start:{line:42,column:22},end:{line:42,column:50}},9:{start:{line:43,column:4},end:{line:43,column:33}},10:{start:{line:45,column:2},end:{line:49,column:3}},11:{start:{line:46,column:4},end:{line:46,column:43}},12:{start:{line:46,column:22},end:{line:46,column:43}},13:{start:{line:47,column:4},end:{line:47,column:83}},14:{start:{line:47,column:59},end:{line:47,column:83}},15:{start:{line:48,column:4},end:{line:48,column:29}},16:{start:{line:50,column:2},end:{line:56,column:3}},17:{start:{line:51,column:4},end:{line:55,column:5}},18:{start:{line:52,column:6},end:{line:52,column:27}},19:{start:{line:54,column:6},end:{line:54,column:28}},20:{start:{line:57,column:2},end:{line:59,column:3}},21:{start:{line:58,column:4},end:{line:58,column:19}},22:{start:{line:60,column:2},end:{line:62,column:3}},23:{start:{line:61,column:4},end:{line:61,column:19}},24:{start:{line:63,column:2},end:{line:63,column:14}},25:{start:{line:67,column:14},end:{line:67,column:26}},26:{start:{line:68,column:4},end:{line:94,column:9}},27:{start:{line:80,column:27},end:{line:80,column:67}},28:{start:{line:99,column:4},end:{line:99,column:17}},29:{start:{line:100,column:4},end:{line:104,column:6}},30:{start:{line:107,column:19},end:{line:107,column:50}},31:{start:{line:108,column:25},end:{line:108,column:40}},32:{start:{line:109,column:4},end:{line:192,column:5}},33:{start:{line:111,column:8},end:{line:114,column:10}},34:{start:{line:116,column:8},end:{line:119,column:10}},35:{start:{line:121,column:8},end:{line:125,column:10}},36:{start:{line:127,column:8},end:{line:130,column:10}},37:{start:{line:132,column:8},end:{line:138,column:10}},38:{start:{line:140,column:8},end:{line:143,column:10}},39:{start:{line:145,column:8},end:{line:152,column:10}},40:{start:{line:154,column:8},end:{line:157,column:10}},41:{start:{line:159,column:8},end:{line:165,column:10}},42:{start:{line:167,column:8},end:{line:176,column:10}},43:{start:{line:178,column:8},end:{line:189,column:10}},44:{start:{line:191,column:8},end:{line:191,column:18}},45:{start:{line:194,column:10},end:{line:197,column:3}},46:{start:{line:195,column:33},end:{line:195,column:43}},47:{start:{line:196,column:4},end:{line:196,column:39}},48:{start:{line:198,column:19},end:{line:200,column:3}},49:{start:{line:199,column:4},end:{line:199,column:30}},50:{start:{line:202,column:14},end:{line:202,column:26}},51:{start:{line:203,column:32},end:{line:205,column:5}},52:{start:{line:206,column:4},end:{line:257,column:9}},53:{start:{line:213,column:27},end:{line:213,column:57}},54:{start:{line:235,column:30},end:{line:235,column:87}},55:{start:{line:262,column:27},end:{line:262,column:40}},56:{start:{line:263,column:4},end:{line:263,column:35}},57:{start:{line:264,column:4},end:{line:264,column:26}},58:{start:{line:267,column:28},end:{line:267,column:38}},59:{start:{line:268,column:22},end:{line:268,column:77}},60:{start:{line:269,column:26},end:{line:282,column:6}},61:{start:{line:270,column:21},end:{line:270,column:47}},62:{start:{line:271,column:6},end:{line:281,column:8}},63:{start:{line:276,column:29},end:{line:276,column:93}},64:{start:{line:277,column:26},end:{line:277,column:85}},65:{start:{line:283,column:27},end:{line:295,column:6}},66:{start:{line:283,column:75},end:{line:283,column:106}},67:{start:{line:284,column:21},end:{line:284,column:44}},68:{start:{line:285,column:6},end:{line:294,column:8}},69:{start:{line:291,column:26},end:{line:291,column:107}},70:{start:{line:296,column:4},end:{line:326,column:6}},71:{start:{line:319,column:45},end:{line:319,column:109}},72:{start:{line:329,column:21},end:{line:329,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:34,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:57}},line:20},2:{name:"editorMode",decl:{start:{line:36,column:9},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:64,column:1}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:66,column:2},end:{line:66,column:3}},loc:{start:{line:66,column:11},end:{line:95,column:3}},line:66},4:{name:"(anonymous_4)",decl:{start:{line:80,column:21},end:{line:80,column:22}},loc:{start:{line:80,column:27},end:{line:80,column:67}},line:80},5:{name:"(anonymous_5)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:21},end:{line:105,column:3}},line:98},6:{name:"(anonymous_6)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:22},end:{line:193,column:3}},line:106},7:{name:"(anonymous_7)",decl:{start:{line:194,column:10},end:{line:194,column:11}},loc:{start:{line:194,column:16},end:{line:197,column:3}},line:194},8:{name:"(anonymous_8)",decl:{start:{line:198,column:19},end:{line:198,column:20}},loc:{start:{line:198,column:31},end:{line:200,column:3}},line:198},9:{name:"(anonymous_9)",decl:{start:{line:201,column:2},end:{line:201,column:3}},loc:{start:{line:201,column:11},end:{line:258,column:3}},line:201},10:{name:"(anonymous_10)",decl:{start:{line:213,column:20},end:{line:213,column:21}},loc:{start:{line:213,column:27},end:{line:213,column:57}},line:213},11:{name:"(anonymous_11)",decl:{start:{line:235,column:20},end:{line:235,column:21}},loc:{start:{line:235,column:30},end:{line:235,column:87}},line:235},12:{name:"(anonymous_12)",decl:{start:{line:261,column:2},end:{line:261,column:3}},loc:{start:{line:261,column:21},end:{line:265,column:3}},line:261},13:{name:"(anonymous_13)",decl:{start:{line:266,column:2},end:{line:266,column:3}},loc:{start:{line:266,column:11},end:{line:327,column:3}},line:266},14:{name:"(anonymous_14)",decl:{start:{line:269,column:60},end:{line:269,column:61}},loc:{start:{line:269,column:74},end:{line:282,column:5}},line:269},15:{name:"(anonymous_15)",decl:{start:{line:276,column:20},end:{line:276,column:21}},loc:{start:{line:276,column:29},end:{line:276,column:93}},line:276},16:{name:"(anonymous_16)",decl:{start:{line:277,column:20},end:{line:277,column:21}},loc:{start:{line:277,column:26},end:{line:277,column:85}},line:277},17:{name:"(anonymous_17)",decl:{start:{line:283,column:61},end:{line:283,column:62}},loc:{start:{line:283,column:75},end:{line:283,column:106}},line:283},18:{name:"(anonymous_18)",decl:{start:{line:283,column:112},end:{line:283,column:113}},loc:{start:{line:283,column:126},end:{line:295,column:5}},line:283},19:{name:"(anonymous_19)",decl:{start:{line:291,column:20},end:{line:291,column:21}},loc:{start:{line:291,column:26},end:{line:291,column:107}},line:291},20:{name:"(anonymous_20)",decl:{start:{line:319,column:23},end:{line:319,column:24}},loc:{start:{line:319,column:45},end:{line:319,column:109}},line:319}},branchMap:{0:{loc:{start:{line:37,column:2},end:{line:40,column:3}},type:"if",locations:[{start:{line:37,column:2},end:{line:40,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},1:{loc:{start:{line:38,column:4},end:{line:38,column:43}},type:"if",locations:[{start:{line:38,column:4},end:{line:38,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},2:{loc:{start:{line:41,column:2},end:{line:44,column:3}},type:"if",locations:[{start:{line:41,column:2},end:{line:44,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:42,column:4},end:{line:42,column:50}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:50}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},4:{loc:{start:{line:45,column:2},end:{line:49,column:3}},type:"if",locations:[{start:{line:45,column:2},end:{line:49,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},5:{loc:{start:{line:46,column:4},end:{line:46,column:43}},type:"if",locations:[{start:{line:46,column:4},end:{line:46,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},6:{loc:{start:{line:47,column:4},end:{line:47,column:83}},type:"if",locations:[{start:{line:47,column:4},end:{line:47,column:83}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},7:{loc:{start:{line:47,column:8},end:{line:47,column:57}},type:"binary-expr",locations:[{start:{line:47,column:8},end:{line:47,column:18}},{start:{line:47,column:22},end:{line:47,column:57}}],line:47},8:{loc:{start:{line:50,column:2},end:{line:56,column:3}},type:"if",locations:[{start:{line:50,column:2},end:{line:56,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:50},9:{loc:{start:{line:51,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:55,column:5}},{start:{line:53,column:11},end:{line:55,column:5}}],line:51},10:{loc:{start:{line:57,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:57,column:2},end:{line:59,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:60,column:2},end:{line:62,column:3}},type:"if",locations:[{start:{line:60,column:2},end:{line:62,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},12:{loc:{start:{line:107,column:19},end:{line:107,column:50}},type:"binary-expr",locations:[{start:{line:107,column:19},end:{line:107,column:44}},{start:{line:107,column:48},end:{line:107,column:50}}],line:107},13:{loc:{start:{line:107,column:20},end:{line:107,column:36}},type:"binary-expr",locations:[{start:{line:107,column:20},end:{line:107,column:30}},{start:{line:107,column:34},end:{line:107,column:36}}],line:107},14:{loc:{start:{line:109,column:4},end:{line:192,column:5}},type:"switch",locations:[{start:{line:110,column:6},end:{line:114,column:10}},{start:{line:115,column:6},end:{line:119,column:10}},{start:{line:120,column:6},end:{line:125,column:10}},{start:{line:126,column:6},end:{line:130,column:10}},{start:{line:131,column:6},end:{line:138,column:10}},{start:{line:139,column:6},end:{line:143,column:10}},{start:{line:144,column:6},end:{line:152,column:10}},{start:{line:153,column:6},end:{line:157,column:10}},{start:{line:158,column:6},end:{line:165,column:10}},{start:{line:166,column:6},end:{line:176,column:10}},{start:{line:177,column:6},end:{line:189,column:10}},{start:{line:190,column:6},end:{line:191,column:18}}],line:109},15:{loc:{start:{line:123,column:19},end:{line:123,column:42}},type:"binary-expr",locations:[{start:{line:123,column:19},end:{line:123,column:33}},{start:{line:123,column:37},end:{line:123,column:42}}],line:123},16:{loc:{start:{line:129,column:15},end:{line:129,column:72}},type:"binary-expr",locations:[{start:{line:129,column:15},end:{line:129,column:25}},{start:{line:129,column:29},end:{line:129,column:72}}],line:129},17:{loc:{start:{line:134,column:17},end:{line:134,column:80}},type:"binary-expr",locations:[{start:{line:134,column:17},end:{line:134,column:29}},{start:{line:134,column:33},end:{line:134,column:80}}],line:134},18:{loc:{start:{line:135,column:19},end:{line:135,column:38}},type:"binary-expr",locations:[{start:{line:135,column:19},end:{line:135,column:33}},{start:{line:135,column:37},end:{line:135,column:38}}],line:135},19:{loc:{start:{line:136,column:19},end:{line:136,column:39}},type:"binary-expr",locations:[{start:{line:136,column:19},end:{line:136,column:33}},{start:{line:136,column:37},end:{line:136,column:39}}],line:136},20:{loc:{start:{line:137,column:18},end:{line:137,column:40}},type:"binary-expr",locations:[{start:{line:137,column:18},end:{line:137,column:31}},{start:{line:137,column:35},end:{line:137,column:40}}],line:137},21:{loc:{start:{line:142,column:15},end:{line:142,column:72}},type:"binary-expr",locations:[{start:{line:142,column:15},end:{line:142,column:25}},{start:{line:142,column:29},end:{line:142,column:72}}],line:142},22:{loc:{start:{line:147,column:17},end:{line:147,column:80}},type:"binary-expr",locations:[{start:{line:147,column:17},end:{line:147,column:29}},{start:{line:147,column:33},end:{line:147,column:80}}],line:147},23:{loc:{start:{line:148,column:19},end:{line:148,column:38}},type:"binary-expr",locations:[{start:{line:148,column:19},end:{line:148,column:33}},{start:{line:148,column:37},end:{line:148,column:38}}],line:148},24:{loc:{start:{line:149,column:19},end:{line:149,column:39}},type:"binary-expr",locations:[{start:{line:149,column:19},end:{line:149,column:33}},{start:{line:149,column:37},end:{line:149,column:39}}],line:149},25:{loc:{start:{line:150,column:18},end:{line:150,column:40}},type:"binary-expr",locations:[{start:{line:150,column:18},end:{line:150,column:31}},{start:{line:150,column:35},end:{line:150,column:40}}],line:150},26:{loc:{start:{line:151,column:20},end:{line:151,column:42}},type:"binary-expr",locations:[{start:{line:151,column:20},end:{line:151,column:35}},{start:{line:151,column:39},end:{line:151,column:42}}],line:151},27:{loc:{start:{line:156,column:15},end:{line:156,column:72}},type:"binary-expr",locations:[{start:{line:156,column:15},end:{line:156,column:25}},{start:{line:156,column:29},end:{line:156,column:72}}],line:156},28:{loc:{start:{line:161,column:17},end:{line:161,column:80}},type:"binary-expr",locations:[{start:{line:161,column:17},end:{line:161,column:29}},{start:{line:161,column:33},end:{line:161,column:80}}],line:161},29:{loc:{start:{line:162,column:19},end:{line:162,column:38}},type:"binary-expr",locations:[{start:{line:162,column:19},end:{line:162,column:33}},{start:{line:162,column:37},end:{line:162,column:38}}],line:162},30:{loc:{start:{line:163,column:19},end:{line:163,column:39}},type:"binary-expr",locations:[{start:{line:163,column:19},end:{line:163,column:33}},{start:{line:163,column:37},end:{line:163,column:39}}],line:163},31:{loc:{start:{line:164,column:20},end:{line:164,column:42}},type:"binary-expr",locations:[{start:{line:164,column:20},end:{line:164,column:35}},{start:{line:164,column:39},end:{line:164,column:42}}],line:164}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0,0,0,0,0,0,0,0,0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx"],names:[],mappings:"AAiCU,cACA,YADA;AAjCV,OAAO,WAAW;AAClB,SAAQ,oBAAoB,gBAAe;AAC3C,OAAO,YAAY;AAEnB,SAA+B,uBAAuB;AAEtD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,4BAAiD;AAExD,OAAO,WAAW;AAClB,SAAS,cAAc,WAAW,oBAAoB;AACtD,OAAO,mBAAmB;AAW1B,MAAM,qBAAqB,MAAM,UAA6B;AAAA,EAC5D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,0BACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,EAAE;AAAA,QAEhD;AAAA,+BAAC,SAAI,WAAU,+BACb;AAAA,gCAAC,OAAE,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,YAC7D,qBAAC,OAAE,WAAU,6BAA4B;AAAA;AAAA,cAAE,KAAK,MAAM;AAAA,eAAG;AAAA,aAC3D;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC,oBAAC,sBAAmB;AAAA;AAAA;AAAA,IACtB,GACF;AAAA,EACF;AACF;AAEA,SAAS,WAAW,QAA6B;AAC/C,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,cAAc;AAC/B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,QAAG,OAAO,OAAO,OAAO,IAAI,WAAW,YAAY,EAAG,QAAO;AAC7D,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,WAAW;AAC5B,QAAI,OAAO,OAAO,SAAU,UAAU;AACpC,aAAO;AAAA,IACT,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,SAAO;AACT;AASA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,2BAAC,SAAI,WAAU,6CACb;AAAA,6BAAC,UAAK,WAAU,gDAA+C;AAAA;AAAA,UAAE,KAAK,MAAM;AAAA,WAAS;AAAA,QACrF,oBAAC,UAAK,WAAU,kBAAiB;AAAA,QACjC;AAAA,UAAC;AAAA;AAAA,YACC,cAAY,EAAE,gCAAgC,EAAC,UAAU,KAAK,MAAM,SAAQ,CAAC;AAAA,YAC7E,WAAU;AAAA,YACV,SAAS,MAAK,KAAK,MAAM,SAAS,KAAK,MAAM,QAAQ;AAAA,YACrD,OAAO,EAAC,iBAAiB,cAAa;AAAA,YAEtC,8BAAC,YAAS;AAAA;AAAA,QACZ;AAAA,SACF;AAAA,MACA,oBAAC,SAAI,WAAU,8CACb;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,MAAM,WAAW,KAAK,MAAM,MAAM;AAAA,UAClC,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB,GACF;AAAA,OACF;AAAA,EACF;AACF;AAYA,MAAM,kBAAkB,MAAM,UAA0C;AAAA,EACtE,YAAY,OAAuB;AACjC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU,MAAM,WAAW;AAAA,MAC3B,QAAQ,KAAK,cAAc,iBAAiB;AAAA,IAC9C;AAAA,EACF;AAAA,EAEA,cAAc,MAAuC;AACnD,UAAM,UAAU,KAAK,SAAS,CAAC,GAAG,UAAU,CAAC;AAC7C,UAAM,EAAC,SAAQ,IAAI,OAAO;AAE1B,YAAO,MAAM;AAAA,MACX,KAAK;AAAkB,eAAO;AAAA,UAC5B,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,QAClB;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,MAAM,GAAG,QAAQ;AAAA,QACnB;AAAA,MACA,KAAK;AAAgB,eAAO;AAAA,UAC1B,MAAM;AAAA,UACN,SAAU,OAAsC,WAAW;AAAA,UAC3D,MAAM;AAAA,QACR;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,QAC1D;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,UACxD,UAAW,OAAqC,YAAY;AAAA,QAC9D;AAAA,MACA,KAAK;AAAuB,eAAO;AAAA,UACjC,MAAM;AAAA,UACN,KAAM,OAAwC,OAAO,GAAG,QAAQ;AAAA,QAClE;AAAA,MACA,KAAK;AAAsB,eAAO;AAAA,UAChC,MAAM;AAAA,UACN,OAAQ,OAAwC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACvG,SAAU,OAAwC,WAAW;AAAA,UAC7D,SAAU,OAAwC,WAAW;AAAA,UAC7D,UAAW,OAAwC,YAAY;AAAA,QACjE;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,UAChB,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,MAAM;AAAA,YACJ,GAAG,QAAQ;AAAA,UACb;AAAA,UACA,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA;AAAS,eAAO,CAAC;AAAA,IACnB;AAAA,EACF;AAAA,EAEA,QAAQ,MAAM;AACZ,UAAM,EAAC,QAAQ,SAAQ,IAAI,KAAK;AAChC,SAAK,MAAM,MAAM,UAAU,MAAM;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,WAAgC;AAChD,SAAK,SAAS,EAAC,OAAM,CAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAQrB,UAAM,sBAAsB;AAAA,MAC1B,KAAK,OAAO,cAAc,KAAK;AAAA,IACjC;AAEA,WAAO,qBAAC,SAAI,WAAU,uBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,EAAC,KAAK,EAAE,wFAAwF,EAAC;AAAA,UAC5G,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,UAAU,EAAC,CAAC;AAAA,UACrD,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW;AAAA,UACX,SAAS;AAAA,YACP,CAAC,gBAAgB,EAAE,gBAAgB,CAAC;AAAA,YACpC,CAAC,eAAe,EAAE,eAAe,CAAC;AAAA,YAClC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,uBAAuB,EAAE,2BAA2B,CAAC;AAAA,YACtD,CAAC,sBAAsB,EAAE,uBAAuB,CAAC;AAAA,YACjD,CAAC,kBAAkB,EAAE,kBAAkB,CAAC;AAAA,YACxC,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,YACpB,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,UACtB;AAAA,UACA,UAAU,UAAQ,KAAK,SAAS,EAAC,MAA0B,QAAQ,KAAK,cAAc,IAAkB,EAAC,CAAC;AAAA,UAC1G,OAAO,KAAK,MAAM;AAAA,UAClB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK;AAAA,UACf,MAAM,KAAK,MAAM;AAAA,UACjB,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UACd,eAAY;AAAA,UAEX,YAAE,YAAY;AAAA;AAAA,MACjB;AAAA,OACF;AAAA,EACF;AACF;AASA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,WAAW,QAAqE;AAC9E,UAAM,iBAAiB,EAAC,GAAG,OAAM;AACjC,WAAO,eAAe,OAAO;AAC7B,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,SAAQ,IAAI,KAAK;AAC3B,UAAM,YAAY,EAAC,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAM;AACtE,UAAM,gBAAgB,OAAO,KAAK,SAAS,OAAO,EAAE,IAAI,cAAY;AAClE,YAAM,SAAS,SAAS,QAAQ,QAAQ;AACxC,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN;AAAA,UACA;AAAA,UACA,UAAU,CAAC,QAA6B,KAAK,MAAM,eAAe,aAAa,UAAU,UAAU,GAAG,CAAC;AAAA,UACvG,UAAU,MAAM,KAAK,MAAM,eAAe,aAAa,UAAU,QAAQ,CAAC;AAAA,UACzE,GAAG;AAAA;AAAA,QALC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,iBAAiB,OAAO,KAAK,aAAa,EAAE,OAAO,CAAC,aAAqB,EAAE,YAAY,SAAS,QAAQ,EAAE,IAAI,CAAC,aAAqB;AACxI,YAAM,SAAS,cAAc,QAAsC;AACnE,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,IAAI;AAAA,UACJ,MAAM,OAAO;AAAA,UACb,OAAO,OAAO;AAAA,UACd,UAAU,MAAM,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,KAAK,WAAW,MAAM,CAAC,CAAC;AAAA;AAAA,QAJ3F;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,SAAS;AAAA,QAElB;AAAA,+BAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACxB;AAAA,aACH;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,sBAAsB,GAAE;AAAA,YAC/B,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,YACA,oBAAC,SAAI,WAAU,2BAA0B,OAAO,EAAC,UAAU,IAAG,GAC3D,0BACH;AAAA,aACF;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACzB,oBAAC,OAAG,YAAE,8FAA8F,GAAE;AAAA,YACtG;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,CAAC,UAAkB,WAAgC,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,MAAM,CAAC;AAAA,gBACxH,GAAG;AAAA;AAAA,YACN;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"30dc2f79b5d8eab063b35a7a783386d299d39465"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return zt=function(){return s},s}zt();class YRe extends On.Component{render(){return zt().f[0]++,zt().s[0]++,te.jsx("div",{className:"maputnik-public-source",children:te.jsxs(Ds,{className:"maputnik-public-source-select",onClick:()=>(zt().f[1]++,zt().s[1]++,this.props.onSelect(this.props.id)),children:[te.jsxs("div",{className:"maputnik-public-source-info",children:[te.jsx("p",{className:"maputnik-public-source-name",children:this.props.title}),te.jsxs("p",{className:"maputnik-public-source-id",children:["#",this.props.id]})]}),te.jsx("span",{className:"maputnik-space"}),te.jsx(pX,{})]})})}}function VRe(n){return zt().f[2]++,zt().s[2]++,n.type==="raster"?(zt().b[0][0]++,zt().s[3]++,n.tiles?(zt().b[1][0]++,zt().s[4]++,"tile_raster"):(zt().b[1][1]++,zt().s[5]++,"tilejson_raster")):(zt().b[0][1]++,zt().s[6]++,n.type==="raster-dem"?(zt().b[2][0]++,zt().s[7]++,n.tiles?(zt().b[3][0]++,zt().s[8]++,"tilexyz_raster-dem"):(zt().b[3][1]++,zt().s[9]++,"tilejson_raster-dem")):(zt().b[2][1]++,zt().s[10]++,n.type==="vector"?(zt().b[4][0]++,zt().s[11]++,n.tiles?(zt().b[5][0]++,zt().s[12]++,"tile_vector"):(zt().b[5][1]++,zt().s[13]++,zt().b[7][0]++,n.url&&(zt().b[7][1]++,n.url.startsWith("pmtiles://"))?(zt().b[6][0]++,zt().s[14]++,"pmtiles_vector"):(zt().b[6][1]++,zt().s[15]++,"tilejson_vector"))):(zt().b[4][1]++,zt().s[16]++,n.type==="geojson"?(zt().b[8][0]++,zt().s[17]++,typeof n.data=="string"?(zt().b[9][0]++,zt().s[18]++,"geojson_url"):(zt().b[9][1]++,zt().s[19]++,"geojson_json")):(zt().b[8][1]++,zt().s[20]++,n.type==="image"?(zt().b[10][0]++,zt().s[21]++,"image"):(zt().b[10][1]++,zt().s[22]++,n.type==="video"?(zt().b[11][0]++,zt().s[23]++,"video"):(zt().b[11][1]++,zt().s[24]++,null))))))}class $Re extends On.Component{render(){zt().f[3]++;const e=(zt().s[25]++,this.props.t);return zt().s[26]++,te.jsxs("div",{className:"maputnik-active-source-type-editor",children:[te.jsxs("div",{className:"maputnik-active-source-type-editor-header",children:[te.jsxs("span",{className:"maputnik-active-source-type-editor-header-id",children:["#",this.props.sourceId]}),te.jsx("span",{className:"maputnik-space"}),te.jsx(Ds,{"aria-label":e("Remove '{{sourceId}}' source",{sourceId:this.props.sourceId}),className:"maputnik-active-source-type-editor-header-delete",onClick:()=>(zt().f[4]++,zt().s[27]++,this.props.onDelete(this.props.sourceId)),style:{backgroundColor:"transparent"},children:te.jsx(TC,{})})]}),te.jsx("div",{className:"maputnik-active-source-type-editor-content",children:te.jsx(Lse,{onChange:this.props.onChange,mode:VRe(this.props.source),source:this.props.source})})]})}}class HRe extends On.Component{constructor(e){zt().f[5]++,zt().s[28]++,super(e),zt().s[29]++,this.state={mode:"tilejson_vector",sourceId:md.generateId(),source:this.defaultSource("tilejson_vector")}}defaultSource(e){zt().f[6]++;const t=(zt().s[30]++,zt().b[12][0]++,(zt().b[13][0]++,this.state||(zt().b[13][1]++,{})).source||(zt().b[12][1]++,{})),{protocol:i}=(zt().s[31]++,window.location);switch(zt().s[32]++,e){case"pmtiles_vector":return zt().b[14][0]++,zt().s[33]++,{type:"vector",url:`${i}//localhost:3000/file.pmtiles`};case"geojson_url":return zt().b[14][1]++,zt().s[34]++,{type:"geojson",data:`${i}//localhost:3000/geojson.json`};case"geojson_json":return zt().b[14][2]++,zt().s[35]++,{type:"geojson",cluster:(zt().b[15][0]++,t.cluster||(zt().b[15][1]++,!1)),data:""};case"tilejson_vector":return zt().b[14][3]++,zt().s[36]++,{type:"vector",url:(zt().b[16][0]++,t.url||(zt().b[16][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_vector":return zt().b[14][4]++,zt().s[37]++,{type:"vector",tiles:(zt().b[17][0]++,t.tiles||(zt().b[17][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.pbf`])),minzoom:(zt().b[18][0]++,t.minzoom||(zt().b[18][1]++,0)),maxzoom:(zt().b[19][0]++,t.maxzoom||(zt().b[19][1]++,14)),scheme:(zt().b[20][0]++,t.scheme||(zt().b[20][1]++,"xyz"))};case"tilejson_raster":return zt().b[14][5]++,zt().s[38]++,{type:"raster",url:(zt().b[21][0]++,t.url||(zt().b[21][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_raster":return zt().b[14][6]++,zt().s[39]++,{type:"raster",tiles:(zt().b[22][0]++,t.tiles||(zt().b[22][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(zt().b[23][0]++,t.minzoom||(zt().b[23][1]++,0)),maxzoom:(zt().b[24][0]++,t.maxzoom||(zt().b[24][1]++,14)),scheme:(zt().b[25][0]++,t.scheme||(zt().b[25][1]++,"xyz")),tileSize:(zt().b[26][0]++,t.tileSize||(zt().b[26][1]++,512))};case"tilejson_raster-dem":return zt().b[14][7]++,zt().s[40]++,{type:"raster-dem",url:(zt().b[27][0]++,t.url||(zt().b[27][1]++,`${i}//localhost:3000/tilejson.json`))};case"tilexyz_raster-dem":return zt().b[14][8]++,zt().s[41]++,{type:"raster-dem",tiles:(zt().b[28][0]++,t.tiles||(zt().b[28][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(zt().b[29][0]++,t.minzoom||(zt().b[29][1]++,0)),maxzoom:(zt().b[30][0]++,t.maxzoom||(zt().b[30][1]++,14)),tileSize:(zt().b[31][0]++,t.tileSize||(zt().b[31][1]++,512))};case"image":return zt().b[14][9]++,zt().s[42]++,{type:"image",url:`${i}//localhost:3000/image.png`,coordinates:[[0,0],[0,0],[0,0],[0,0]]};case"video":return zt().b[14][10]++,zt().s[43]++,{type:"video",urls:[`${i}//localhost:3000/movie.mp4`],coordinates:[[0,0],[0,0],[0,0],[0,0]]};default:return zt().b[14][11]++,zt().s[44]++,{}}}onAdd=(zt().s[45]++,()=>{zt().f[7]++;const{source:e,sourceId:t}=(zt().s[46]++,this.state);zt().s[47]++,this.props.onAdd(t,e)});onChangeSource=(zt().s[48]++,e=>{zt().f[8]++,zt().s[49]++,this.setState({source:e})});render(){zt().f[9]++;const e=(zt().s[50]++,this.props.t),t=(zt().s[51]++,{doc:Tr.source_vector.type.doc});return zt().s[52]++,te.jsxs("div",{className:"maputnik-add-source",children:[te.jsx(sd,{label:e("Source ID"),fieldSpec:{doc:e("Unique ID that identifies the source and is used in the layer to reference the source.")},value:this.state.sourceId,onChange:i=>(zt().f[10]++,zt().s[53]++,this.setState({sourceId:i})),"data-wd-key":"modal:sources.add.source_id"}),te.jsx(TM,{label:e("Source Type"),fieldSpec:t,options:[["geojson_json",e("GeoJSON (JSON)")],["geojson_url",e("GeoJSON (URL)")],["tilejson_vector",e("Vector (TileJSON URL)")],["tile_vector",e("Vector (Tile URLs)")],["tilejson_raster",e("Raster (TileJSON URL)")],["tile_raster",e("Raster (Tile URLs)")],["tilejson_raster-dem",e("Raster DEM (TileJSON URL)")],["tilexyz_raster-dem",e("Raster DEM (XYZ URLs)")],["pmtiles_vector",e("Vector (PMTiles)")],["image",e("Image")],["video",e("Video")]],onChange:i=>(zt().f[11]++,zt().s[54]++,this.setState({mode:i,source:this.defaultSource(i)})),value:this.state.mode,"data-wd-key":"modal:sources.add.source_type"}),te.jsx(Lse,{onChange:this.onChangeSource,mode:this.state.mode,source:this.state.source}),te.jsx(Ds,{className:"maputnik-add-source-button",onClick:this.onAdd,"data-wd-key":"modal:sources.add.add_source",children:e("Add Source")})]})}}class ZRe extends On.Component{stripTitle(e){zt().f[12]++;const t=(zt().s[55]++,{...e});return zt().s[56]++,delete t.title,zt().s[57]++,t}render(){zt().f[13]++;const{t:e,mapStyle:t}=(zt().s[58]++,this.props),i=(zt().s[59]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),r=(zt().s[60]++,Object.keys(t.sources).map(s=>{zt().f[14]++;const a=(zt().s[61]++,t.sources[s]);return zt().s[62]++,te.jsx($Re,{sourceId:s,source:a,onChange:c=>(zt().f[15]++,zt().s[63]++,this.props.onStyleChanged(Use(t,s,c))),onDelete:()=>(zt().f[16]++,zt().s[64]++,this.props.onStyleChanged(jRe(t,s))),...i},s)})),o=(zt().s[65]++,Object.keys(dH).filter(s=>(zt().f[17]++,zt().s[66]++,!(s in t.sources))).map(s=>{zt().f[18]++;const a=(zt().s[67]++,dH[s]);return zt().s[68]++,te.jsx(YRe,{id:s,type:a.type,title:a.title,onSelect:()=>(zt().f[19]++,zt().s[69]++,this.props.onStyleChanged(hH(t,s,this.stripTitle(a))))},s)}));return zt().s[70]++,te.jsxs(Q1,{"data-wd-key":"modal:sources",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Sources"),children:[te.jsxs("section",{className:"maputnik-modal-section",children:[te.jsx("h1",{children:e("Active Sources")}),r]}),te.jsxs("section",{className:"maputnik-modal-section",children:[te.jsx("h1",{children:e("Choose Public Source")}),te.jsx("p",{children:e("Add one of the publicly available sources to your style.")}),te.jsx("div",{className:"maputnik-public-sources",style:{maxWidth:500},children:o})]}),te.jsxs("section",{className:"maputnik-modal-section",children:[te.jsx("h1",{children:e("Add New Source")}),te.jsx("p",{children:e("Add a new source to your style. You can only choose the source type and id at creation time!")}),te.jsx(HRe,{onAdd:(s,a)=>(zt().f[20]++,zt().s[71]++,this.props.onStyleChanged(hH(t,s,a))),...i})]})]})}}const XRe=(zt().s[72]++,Mo()(ZRe));function Wg(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx",e="14882741b03cd24dba8e21fe7c0f0c38039a7560",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:22,column:6}},2:{start:{line:16,column:28},end:{line:16,column:49}},3:{start:{line:19,column:137},end:{line:19,column:159}},4:{start:{line:25,column:21},end:{line:25,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:23,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:16,column:22},end:{line:16,column:23}},loc:{start:{line:16,column:28},end:{line:16,column:49}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:130},end:{line:19,column:131}},loc:{start:{line:19,column:137},end:{line:19,column:159}},line:19}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx"],names:[],mappings:"AAkBW,SAOL,KAPK;AAlBX,OAAO,WAAW;AAClB,SAA+B,uBAAuB;AAEtD,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAWlB,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,oBAAoB;AAAA,QACpB,OAAO,KAAK,MAAM;AAAA,QAClB,cAAc,MAAM,KAAK,MAAM,SAAS;AAAA,QAExC;AAAA,8BAAC,OACE,eAAK,MAAM,SACd;AAAA,UACA,oBAAC,OAAE,WAAU,4BACX,8BAAC,eAAY,SAAS,CAAC,MAAM,KAAK,MAAM,SAAS,CAAC,GAC/C,YAAE,QAAQ,GACb,GACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"14882741b03cd24dba8e21fe7c0f0c38039a7560"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Wg=function(){return s},s}Wg();class JRe extends On.Component{render(){Wg().f[0]++;const e=(Wg().s[0]++,this.props.t);return Wg().s[1]++,te.jsxs(Q1,{"data-wd-key":"modal:loading",isOpen:this.props.isOpen,underlayClickExits:!1,title:this.props.title,onOpenToggle:()=>(Wg().f[1]++,Wg().s[2]++,this.props.onCancel()),children:[te.jsx("p",{children:this.props.message}),te.jsx("p",{className:"maputnik-dialog__buttons",children:te.jsx(Ds,{onClick:t=>(Wg().f[2]++,Wg().s[3]++,this.props.onCancel(t)),children:e("Cancel")})})]})}}const ePe=(Wg().s[4]++,Mo()(JRe)),Kse=[{id:"0-empty-style",title:"Empty Style",url:"https://cdn.jsdelivr.net/gh/maputnik/editor@9cf74ca405d2be0608b57db8109cf3a6af5b9f49/src/config/empty-style.json",thumbnail:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAQAAAAHDYbIAAAAEUlEQVR42mP8/58BDhiJ4wAA974H/U5Xe1oAAAAASUVORK5CYII="},{id:"americana",title:"Americana",url:"https://americanamap.org/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/23fa75ad-63e6-43f5-8837-03cdb0428bac"},{id:"aws-hybrid",title:"AWS Hybrid",url:"https://maps.geo.eu-west-1.amazonaws.com/v2/styles/Hybrid/descriptor?key=v1.public.eyJqdGkiOiJiOTNkYjBlZi04OWUzLTQxMGUtODFhMC0zYjZjZjVmZWZmMDgifYtukap0NBaJpcrS6Vit9j03GJgK9Bn-RSu5UCe3jkdSql2kKp3IEgLPtyLssbmKUdVO11sXddjK3ZOZy8V6QG0olv0K_1tOxyMIe4DAO3IV6H4VzHWiaXlbSakGiEgFLuHBdcfLDeMotye7N6rSRxuZb0CN9ytH9VjLly6-NEBRZezO_qPQyvdTFdeZsARIpL0f9YVpxPxPVvUcAWYCk5LpaPseRCDPrY5SlCdA1ZKqUA4F9RzxSTxB73Fel_SoNDkCNaux1VposBu791-uUpDzUpr7leKckrPXrpZ2hwnFbafVxFV9vq4fLTpB5KoBksuLfGNIwAx1RLLxWuMhE4c.ZGQzZDY2OGQtMWQxMy00ZTEwLWIyZGUtOGVjYzUzMjU3OGE4&color-scheme=Light",thumbnail:"https://maputnik.s3.eu-west-1.amazonaws.com/thumbnails/aws-hybrid.jpg"},{id:"aws-standard",title:"AWS Standard",url:"https://maps.geo.eu-west-1.amazonaws.com/v2/styles/Standard/descriptor?key=v1.public.eyJqdGkiOiJiOTNkYjBlZi04OWUzLTQxMGUtODFhMC0zYjZjZjVmZWZmMDgifYtukap0NBaJpcrS6Vit9j03GJgK9Bn-RSu5UCe3jkdSql2kKp3IEgLPtyLssbmKUdVO11sXddjK3ZOZy8V6QG0olv0K_1tOxyMIe4DAO3IV6H4VzHWiaXlbSakGiEgFLuHBdcfLDeMotye7N6rSRxuZb0CN9ytH9VjLly6-NEBRZezO_qPQyvdTFdeZsARIpL0f9YVpxPxPVvUcAWYCk5LpaPseRCDPrY5SlCdA1ZKqUA4F9RzxSTxB73Fel_SoNDkCNaux1VposBu791-uUpDzUpr7leKckrPXrpZ2hwnFbafVxFV9vq4fLTpB5KoBksuLfGNIwAx1RLLxWuMhE4c.ZGQzZDY2OGQtMWQxMy00ZTEwLWIyZGUtOGVjYzUzMjU3OGE4&color-scheme=Light",thumbnail:"https://maputnik.s3.eu-west-1.amazonaws.com/thumbnails/aws-standard.jpg"},{id:"dark-matter",title:"Dark Matter",url:"https://cdn.jsdelivr.net/gh/openmaptiles/dark-matter-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/dark-matter.png"},{id:"locationiq-streets",title:"LocationIQ Streets",url:"https://tiles.locationiq.com/v3/streets/vector.json?key={key}",thumbnail:"https://static-assets.locationiq.com/maputnik/locationiq-streets.png"},{id:"maptiler-basic-gl-style",title:"MapTiler Basic",url:"https://cdn.jsdelivr.net/gh/openmaptiles/klokantech-basic-gl-style@v1.10/style.json",thumbnail:"https://maputnik.github.io/thumbnails/klokantech-basic.png"},{id:"maptiler-toner-gl-style",title:"Toner",url:"https://cdn.jsdelivr.net/gh/openmaptiles/toner-gl-style@v1.0/style.json",thumbnail:"https://maputnik.github.io/thumbnails/toner.png"},{id:"osm-bright",title:"OSM Bright",url:"https://cdn.jsdelivr.net/gh/openmaptiles/osm-bright-gl-style@v1.11/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-bright.png"},{id:"osm-liberty",title:"OSM Liberty",url:"https://maputnik.github.io/osm-liberty/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-liberty.png"},{id:"osm-openmaptiles",title:"OSM OpenMapTiles",url:"https://api.maptiler.com/maps/openstreetmap/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL",thumbnail:"https://openmaptiles.org/img/styles/openmaptiles.png"},{id:"positron",title:"Positron",url:"https://cdn.jsdelivr.net/gh/openmaptiles/positron-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/positron.png"},{id:"protomaps-light",title:"Protomaps Light",url:"https://api.protomaps.com/styles/v4/light/en.json?key=d828297496b11844",thumbnail:"https://github.com/user-attachments/assets/911f9765-4a7d-4736-9ec0-f2d4c90ae587"},{id:"stadia-outdoors",title:"Stadia Outdoors",url:"https://tiles.stadiamaps.com/styles/outdoors.json",thumbnail:"https://tiles.stadiamaps.com/static/outdoors.png?size=480x320&center=47.350259,8.49035&zoom=16"},{id:"versatiles-colorful",title:"Versatiles Colorful",url:"https://tiles.versatiles.org/assets/styles/colorful/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/6cd69818-c541-46e4-a920-65fb4f654931"}];function vn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx",e="f3a6249e96d42fc8e59bc18fb123f3ec8de2b220",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx",statementMap:{0:{start:{line:14,column:4},end:{line:37,column:9}},1:{start:{line:19,column:23},end:{line:19,column:58}},2:{start:{line:42,column:4},end:{line:42,column:17}},3:{start:{line:43,column:4},end:{line:45,column:6}},4:{start:{line:48,column:4},end:{line:50,column:7}},5:{start:{line:53,column:4},end:{line:53,column:31}},6:{start:{line:53,column:11},end:{line:53,column:31}},7:{start:{line:54,column:4},end:{line:60,column:5}},8:{start:{line:55,column:6},end:{line:55,column:39}},9:{start:{line:56,column:6},end:{line:59,column:9}},10:{start:{line:62,column:18},end:{line:99,column:3}},11:{start:{line:63,column:4},end:{line:63,column:22}},12:{start:{line:64,column:19},end:{line:64,column:24}},13:{start:{line:65,column:4},end:{line:90,column:7}},14:{start:{line:69,column:6},end:{line:69,column:29}},15:{start:{line:71,column:6},end:{line:73,column:7}},16:{start:{line:72,column:8},end:{line:72,column:15}},17:{start:{line:74,column:6},end:{line:77,column:9}},18:{start:{line:78,column:23},end:{line:78,column:54}},19:{start:{line:79,column:6},end:{line:79,column:48}},20:{start:{line:80,column:6},end:{line:80,column:39}},21:{start:{line:81,column:6},end:{line:81,column:26}},22:{start:{line:83,column:6},end:{line:87,column:9}},23:{start:{line:88,column:6},end:{line:88,column:25}},24:{start:{line:89,column:6},end:{line:89,column:61}},25:{start:{line:91,column:4},end:{line:98,column:7}},26:{start:{line:94,column:10},end:{line:94,column:26}},27:{start:{line:100,column:16},end:{line:103,column:3}},28:{start:{line:101,column:4},end:{line:101,column:23}},29:{start:{line:102,column:4},end:{line:102,column:44}},30:{start:{line:104,column:15},end:{line:131,column:3}},31:{start:{line:105,column:4},end:{line:105,column:22}},32:{start:{line:106,column:23},end:{line:114,column:5}},33:{start:{line:115,column:25},end:{line:115,column:68}},34:{start:{line:116,column:17},end:{line:116,column:43}},35:{start:{line:117,column:20},end:{line:117,column:37}},36:{start:{line:119,column:4},end:{line:126,column:5}},37:{start:{line:120,column:6},end:{line:120,column:37}},38:{start:{line:122,column:6},end:{line:124,column:9}},39:{start:{line:125,column:6},end:{line:125,column:13}},40:{start:{line:127,column:4},end:{line:127,column:51}},41:{start:{line:128,column:4},end:{line:128,column:49}},42:{start:{line:129,column:4},end:{line:129,column:24}},43:{start:{line:130,column:4},end:{line:130,column:16}},44:{start:{line:134,column:18},end:{line:156,column:3}},45:{start:{line:135,column:4},end:{line:135,column:23}},46:{start:{line:135,column:16},end:{line:135,column:23}},47:{start:{line:136,column:4},end:{line:136,column:35}},48:{start:{line:136,column:28},end:{line:136,column:35}},49:{start:{line:137,column:17},end:{line:137,column:25}},50:{start:{line:138,column:19},end:{line:138,column:35}},51:{start:{line:139,column:4},end:{line:139,column:22}},52:{start:{line:140,column:4},end:{line:140,column:37}},53:{start:{line:141,column:4},end:{line:154,column:6}},54:{start:{line:143,column:6},end:{line:150,column:7}},55:{start:{line:144,column:8},end:{line:144,column:48}},56:{start:{line:146,column:8},end:{line:148,column:11}},57:{start:{line:149,column:8},end:{line:149,column:15}},58:{start:{line:151,column:6},end:{line:151,column:53}},59:{start:{line:152,column:6},end:{line:152,column:39}},60:{start:{line:153,column:6},end:{line:153,column:26}},61:{start:{line:155,column:4},end:{line:155,column:50}},62:{start:{line:155,column:28},end:{line:155,column:49}},63:{start:{line:158,column:4},end:{line:160,column:7}},64:{start:{line:161,column:4},end:{line:161,column:22}},65:{start:{line:162,column:4},end:{line:162,column:30}},66:{start:{line:164,column:16},end:{line:168,column:3}},67:{start:{line:165,column:4},end:{line:167,column:7}},68:{start:{line:170,column:14},end:{line:170,column:26}},69:{start:{line:171,column:25},end:{line:182,column:6}},70:{start:{line:172,column:6},end:{line:181,column:8}},71:{start:{line:184,column:4},end:{line:189,column:5}},72:{start:{line:185,column:6},end:{line:188,column:11}},73:{start:{line:187,column:61},end:{line:187,column:78}},74:{start:{line:190,column:4},end:{line:272,column:9}},75:{start:{line:196,column:30},end:{line:196,column:49}},76:{start:{line:221,column:146},end:{line:221,column:180}},77:{start:{line:268,column:27},end:{line:268,column:56}},78:{start:{line:275,column:18},end:{line:275,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:38,column:3}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:19,column:17},end:{line:19,column:18}},loc:{start:{line:19,column:23},end:{line:19,column:58}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:21},end:{line:46,column:3}},line:41},3:{name:"(anonymous_3)",decl:{start:{line:47,column:2},end:{line:47,column:3}},loc:{start:{line:47,column:15},end:{line:51,column:3}},line:47},4:{name:"(anonymous_4)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:27},end:{line:61,column:3}},line:52},5:{name:"(anonymous_5)",decl:{start:{line:62,column:18},end:{line:62,column:19}},loc:{start:{line:62,column:32},end:{line:99,column:3}},line:62},6:{name:"(anonymous_6)",decl:{start:{line:68,column:12},end:{line:68,column:13}},loc:{start:{line:68,column:31},end:{line:70,column:5}},line:68},7:{name:"(anonymous_7)",decl:{start:{line:70,column:12},end:{line:70,column:13}},loc:{start:{line:70,column:22},end:{line:82,column:5}},line:70},8:{name:"(anonymous_8)",decl:{start:{line:82,column:13},end:{line:82,column:14}},loc:{start:{line:82,column:22},end:{line:90,column:5}},line:82},9:{name:"(anonymous_9)",decl:{start:{line:93,column:15},end:{line:93,column:16}},loc:{start:{line:93,column:26},end:{line:95,column:9}},line:93},10:{name:"(anonymous_10)",decl:{start:{line:100,column:16},end:{line:100,column:17}},loc:{start:{line:100,column:23},end:{line:103,column:3}},line:100},11:{name:"(anonymous_11)",decl:{start:{line:104,column:15},end:{line:104,column:16}},loc:{start:{line:104,column:27},end:{line:131,column:3}},line:104},12:{name:"(anonymous_12)",decl:{start:{line:134,column:18},end:{line:134,column:19}},loc:{start:{line:134,column:29},end:{line:156,column:3}},line:134},13:{name:"(anonymous_13)",decl:{start:{line:141,column:20},end:{line:141,column:21}},loc:{start:{line:141,column:27},end:{line:154,column:5}},line:141},14:{name:"(anonymous_14)",decl:{start:{line:155,column:21},end:{line:155,column:22}},loc:{start:{line:155,column:28},end:{line:155,column:49}},line:155},15:{name:"(anonymous_15)",decl:{start:{line:157,column:2},end:{line:157,column:3}},loc:{start:{line:157,column:17},end:{line:163,column:3}},line:157},16:{name:"(anonymous_16)",decl:{start:{line:164,column:16},end:{line:164,column:17}},loc:{start:{line:164,column:25},end:{line:168,column:3}},line:164},17:{name:"(anonymous_17)",decl:{start:{line:169,column:2},end:{line:169,column:3}},loc:{start:{line:169,column:11},end:{line:273,column:3}},line:169},18:{name:"(anonymous_18)",decl:{start:{line:171,column:42},end:{line:171,column:43}},loc:{start:{line:171,column:54},end:{line:182,column:5}},line:171},19:{name:"(anonymous_19)",decl:{start:{line:187,column:55},end:{line:187,column:56}},loc:{start:{line:187,column:61},end:{line:187,column:78}},line:187},20:{name:"(anonymous_20)",decl:{start:{line:196,column:24},end:{line:196,column:25}},loc:{start:{line:196,column:30},end:{line:196,column:49}},line:196},21:{name:"(anonymous_21)",decl:{start:{line:221,column:139},end:{line:221,column:140}},loc:{start:{line:221,column:146},end:{line:221,column:180}},line:221},22:{name:"(anonymous_22)",decl:{start:{line:268,column:20},end:{line:268,column:21}},loc:{start:{line:268,column:27},end:{line:268,column:56}},line:268}},branchMap:{0:{loc:{start:{line:53,column:4},end:{line:53,column:31}},type:"if",locations:[{start:{line:53,column:4},end:{line:53,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},1:{loc:{start:{line:54,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:60,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},2:{loc:{start:{line:71,column:6},end:{line:73,column:7}},type:"if",locations:[{start:{line:71,column:6},end:{line:73,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:71},3:{loc:{start:{line:135,column:4},end:{line:135,column:23}},type:"if",locations:[{start:{line:135,column:4},end:{line:135,column:23}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:135},4:{loc:{start:{line:136,column:4},end:{line:136,column:35}},type:"if",locations:[{start:{line:136,column:4},end:{line:136,column:35}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:136},5:{loc:{start:{line:184,column:4},end:{line:189,column:5}},type:"if",locations:[{start:{line:184,column:4},end:{line:189,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:184},6:{loc:{start:{line:203,column:53},end:{line:222,column:18}},type:"cond-expr",locations:[{start:{line:203,column:119},end:{line:215,column:15}},{start:{line:215,column:34},end:{line:222,column:18}}],line:203}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx"],names:["style"],mappings:"AA4BQ,SACE,KADF;AA5BR,OAAO,WAA+B;AACtC,SAAQ,oBAAmB;AAC3B,SAAQ,0BAAyB;AACjC,SAAS,OAA6B,uBAAuB;AAE7D,OAAO,kBAAkB;AACzB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AAErB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AASzB,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,yBACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,cAAY,KAAK,MAAM;AAAA,QACvB,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,GAAG;AAAA,QAEjD;AAAA,+BAAC,SAAI,WAAU,gCACb;AAAA,gCAAC,SAAK,eAAK,MAAM,OAAM;AAAA,YACvB,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,sBAAmB;AAAA,aACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO;AAAA,gBACL,iBAAiB,OAAO,KAAK,MAAM,YAAY;AAAA,cACjD;AAAA;AAAA,UACD;AAAA;AAAA;AAAA,IACH,GACF;AAAA,EACF;AACF;AAgBA,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,UAAU;AAAA,IACZ;AAAA,EACF;AAAA,EAEA,aAAa;AACX,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,GAAU;AAE9B,QAAG,EAAG,GAAE,gBAAgB;AAExB,QAAG,KAAK,MAAM,eAAe;AAC3B,WAAK,MAAM,cAAc,MAAM;AAC/B,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,aAAqB;AACpC,SAAK,WAAW;AAEhB,QAAI,WAAoB;AAExB,UAAM,UAAU;AAAA,MACd,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,UAAG,UAAU;AACX;AAAA,MACF;AAEA,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAED,YAAM,WAAW,MAAM,oBAAoB,IAAI;AAC/C,cAAQ,IAAI,iBAAiB,SAAS,EAAE;AACxC,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB,CAAC,EACA,MAAM,CAAC,QAAQ;AACd,WAAK,SAAS;AAAA,QACZ,OAAO,oBAAoB,QAAQ;AAAA,QACnC,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AACD,cAAQ,MAAM,GAAG;AACjB,cAAQ,KAAK,gCAAgC,QAAQ;AAAA,IACvD,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,eAAe;AAAA,QACb,OAAO,WAAW;AAChB,qBAAW;AAAA,QACb;AAAA,MACF;AAAA,MACA,kBAAkB;AAAA,IACpB,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,MAAkC;AAC/C,MAAE,eAAe;AACjB,SAAK,cAAc,KAAK,MAAM,QAAQ;AAAA,EACxC;AAAA,EAEA,aAAa,YAAY;AACvB,SAAK,WAAW;AAEhB,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAE,oBAAoB,CAAC,OAAO,EAAE;AAAA,QAC1C;AAAA,MACF;AAAA,MACA,UAAU;AAAA,IACZ;AAEA,UAAM,CAAC,UAAU,IAAI,MAAM,OAAO,mBAAmB,UAAU;AAC/D,UAAM,OAAO,MAAM,WAAW,QAAQ;AACtC,UAAM,UAAU,MAAM,KAAK,KAAK;AAEhC,QAAI;AACJ,QAAI;AACF,iBAAW,KAAK,MAAM,OAAO;AAAA,IAC/B,SAAS,KAAK;AACZ,WAAK,SAAS;AAAA,QACZ,OAAQ,IAAc,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,eAAW,MAAM,oBAAoB,QAAQ;AAE7C,SAAK,MAAM,YAAY,UAAU,UAAU;AAC3C,SAAK,aAAa;AAClB,WAAO;AAAA,EACT;AAAA;AAAA;AAAA,EAIA,gBAAgB,CAAC,UAA2B;AAC1C,QAAI,CAAC,MAAO;AACZ,QAAI,MAAM,WAAW,EAAG;AACxB,UAAM,OAAO,MAAM,CAAC;AACpB,UAAM,SAAS,IAAI,WAAW;AAC9B,SAAK,WAAW;AAEhB,WAAO,WAAW,MAAM,OAAO;AAC/B,WAAO,SAAS,OAAK;AACnB,UAAI;AACJ,UAAI;AACF,mBAAW,KAAK,MAAM,EAAE,QAAQ,MAAgB;AAAA,MAClD,SACM,KAAK;AACT,aAAK,SAAS;AAAA,UACZ,OAAQ,IAAc,SAAS;AAAA,QACjC,CAAC;AACD;AAAA,MACF;AACA,iBAAW,MAAM,oBAAoB,QAAQ;AAC7C,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB;AACA,WAAO,UAAU,OAAK,QAAQ,IAAI,EAAE,MAAM;AAAA,EAC5C;AAAA,EAEA,eAAe;AACb,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AACD,SAAK,WAAW;AAChB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,cAAc,CAAC,QAAgB;AAC7B,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,eAAe,aAAa,IAAI,CAAAA,WAAS;AAC7C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,KAAKA,OAAM;AAAA,UACX,OAAOA,OAAM;AAAA,UACb,cAAcA,OAAM;AAAA,UACpB,UAAU,KAAK;AAAA;AAAA,QAJVA,OAAM;AAAA,MAKb;AAAA,IACF,CAAC;AAED,QAAI;AACJ,QAAG,KAAK,MAAM,OAAO;AACnB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ,oBAAC,OAAE,MAAK,KAAI,SAAS,MAAM,KAAK,WAAW,GAAG,WAAU,8BAA6B,eAAC;AAAA,SACxF;AAAA,IAEJ;AAEA,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,eAAY;AAAA,UACZ,QAAQ,KAAK,MAAM;AAAA,UACnB,cAAc,MAAM,KAAK,aAAa;AAAA,UACtC,OAAO,EAAE,YAAY;AAAA,UAEpB;AAAA;AAAA,YACD,qBAAC,aAAQ,WAAU,0BACjB;AAAA,kCAAC,QAAI,YAAE,kBAAkB,GAAE;AAAA,cAC3B,oBAAC,OAAG,YAAE,6CAA6C,GAAE;AAAA,cACrD,oBAAC,SACE,iBAAO,OAAO,uBAAuB,aACpC;AAAA,gBAAC;AAAA;AAAA,kBACC,eAAY;AAAA,kBACZ,WAAU;AAAA,kBACV,SAAS,KAAK;AAAA,kBAAY;AAAA,wCAAC,gBAAY;AAAA,oBAAE;AAAA,oBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,cAC3D,IAEA,qBAAC,WACC;AAAA,qCAAC,OAAE,WAAU,0CAAyC,cAAY,EAAE,YAAY,GAAG;AAAA,sCAAC,gBAAa;AAAA,kBAAE;AAAA,kBAAE,EAAE,YAAY;AAAA,mBAAE;AAAA,gBACrH,oBAAC,WAAM,eAAY,yBAAwB,MAAK,QAAO,OAAO,EAAE,SAAS,OAAO,GAAG,UAAU,CAAC,MAAM,KAAK,cAAc,EAAE,OAAO,KAAK,GAAG;AAAA,iBAC1I,GAEJ;AAAA,eACF;AAAA,YAEA,oBAAC,aAAQ,WAAU,0BACjB,+BAAC,UAAK,UAAU,KAAK,aACnB;AAAA,kCAAC,QAAI,YAAE,eAAe,GAAE;AAAA,cACxB,oBAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,gBACkC,oBAAC,OAAE,MAAK,2BAA0B,QAAO,UAAS,KAAI,uBAAsB,0BAAY;AAAA,gBAAI;AAAA,iBAC3I,GACF;AAAA,cACA;AAAA,gBAAC;AAAA;AAAA,kBACC,cAAY,EAAE,WAAW;AAAA,kBACzB,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,SAAS,EAAE,cAAc;AAAA,kBACzB,OAAO,KAAK,MAAM;AAAA,kBAClB,SAAS,KAAK;AAAA,kBACd,UAAU,KAAK;AAAA;AAAA,cACjB;AAAA,cACA,oBAAC,SACC;AAAA,gBAAC;AAAA;AAAA,kBACC,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,UAAU,KAAK,MAAM,SAAS,SAAS;AAAA,kBACxC;AAAA;AAAA,cAAa,GAChB;AAAA,eACF,GACF;AAAA,YAEA,qBAAC,aAAQ,WAAU,yDACjB;AAAA,kCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,cACzB,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,cACA,oBAAC,SAAI,WAAU,oCACZ,wBACH;AAAA,eACF;AAAA;AAAA;AAAA,MACF;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,CAAC,CAAC,KAAK,MAAM;AAAA,UACrB,OAAO,EAAE,eAAe;AAAA,UACxB,UAAU,CAAC,MAAa,KAAK,sBAAsB,CAAC;AAAA,UACpD,SAAS,EAAE,2BAA2B,EAAE,YAAY,KAAK,MAAM,iBAAiB,CAAC;AAAA;AAAA,MACnF;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f3a6249e96d42fc8e59bc18fb123f3ec8de2b220"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return vn=function(){return s},s}vn();class tPe extends On.Component{render(){return vn().f[0]++,vn().s[0]++,te.jsx("div",{className:"maputnik-public-style",children:te.jsxs(Ds,{className:"maputnik-public-style-button","aria-label":this.props.title,onClick:()=>(vn().f[1]++,vn().s[1]++,this.props.onSelect(this.props.url)),children:[te.jsxs("div",{className:"maputnik-public-style-header",children:[te.jsx("div",{children:this.props.title}),te.jsx("span",{className:"maputnik-space"}),te.jsx(pX,{})]}),te.jsx("div",{className:"maputnik-public-style-thumbnail",style:{backgroundImage:`url(${this.props.thumbnailUrl})`}})]})})}}class nPe extends On.Component{constructor(e){vn().f[2]++,vn().s[2]++,super(e),vn().s[3]++,this.state={styleUrl:""}}clearError(){vn().f[3]++,vn().s[4]++,this.setState({error:null})}onCancelActiveRequest(e){vn().f[4]++,vn().s[5]++,e?(vn().b[0][0]++,vn().s[6]++,e.stopPropagation()):vn().b[0][1]++,vn().s[7]++,this.state.activeRequest?(vn().b[1][0]++,vn().s[8]++,this.state.activeRequest.abort(),vn().s[9]++,this.setState({activeRequest:null,activeRequestUrl:null})):vn().b[1][1]++}onStyleSelect=(vn().s[10]++,e=>{vn().f[5]++,vn().s[11]++,this.clearError();let t=(vn().s[12]++,!1);vn().s[13]++,fetch(e,{mode:"cors",credentials:"same-origin"}).then(function(i){return vn().f[6]++,vn().s[14]++,i.json()}).then(i=>{if(vn().f[7]++,vn().s[15]++,t){vn().b[2][0]++,vn().s[16]++;return}else vn().b[2][1]++;vn().s[17]++,this.setState({activeRequest:null,activeRequestUrl:null});const r=(vn().s[18]++,md.ensureStyleValidity(i));vn().s[19]++,console.log("Loaded style ",r.id),vn().s[20]++,this.props.onStyleOpen(r),vn().s[21]++,this.onOpenToggle()}).catch(i=>{vn().f[8]++,vn().s[22]++,this.setState({error:`Failed to load: '${e}'`,activeRequest:null,activeRequestUrl:null}),vn().s[23]++,console.error(i),vn().s[24]++,console.warn("Could not open the style URL",e)}),vn().s[25]++,this.setState({activeRequest:{abort:function(){vn().f[9]++,vn().s[26]++,t=!0}},activeRequestUrl:e})});onSubmitUrl=(vn().s[27]++,e=>{vn().f[10]++,vn().s[28]++,e.preventDefault(),vn().s[29]++,this.onStyleSelect(this.state.styleUrl)});onOpenFile=(vn().s[30]++,async()=>{vn().f[11]++,vn().s[31]++,this.clearError();const e=(vn().s[32]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],multiple:!1}),[t]=(vn().s[33]++,await window.showOpenFilePicker(e)),i=(vn().s[34]++,await t.getFile()),r=(vn().s[35]++,await i.text());let o;vn().s[36]++;try{vn().s[37]++,o=JSON.parse(r)}catch(s){vn().s[38]++,this.setState({error:s.toString()}),vn().s[39]++;return}return vn().s[40]++,o=md.ensureStyleValidity(o),vn().s[41]++,this.props.onStyleOpen(o,t),vn().s[42]++,this.onOpenToggle(),vn().s[43]++,i});onFileChanged=(vn().s[44]++,e=>{if(vn().f[12]++,vn().s[45]++,e)vn().b[3][1]++;else{vn().b[3][0]++,vn().s[46]++;return}if(vn().s[47]++,e.length===0){vn().b[4][0]++,vn().s[48]++;return}else vn().b[4][1]++;const t=(vn().s[49]++,e[0]),i=(vn().s[50]++,new FileReader);vn().s[51]++,this.clearError(),vn().s[52]++,i.readAsText(t,"UTF-8"),vn().s[53]++,i.onload=r=>{vn().f[13]++;let o;vn().s[54]++;try{vn().s[55]++,o=JSON.parse(r.target?.result)}catch(s){vn().s[56]++,this.setState({error:s.toString()}),vn().s[57]++;return}vn().s[58]++,o=md.ensureStyleValidity(o),vn().s[59]++,this.props.onStyleOpen(o),vn().s[60]++,this.onOpenToggle()},vn().s[61]++,i.onerror=r=>(vn().f[14]++,vn().s[62]++,console.log(r.target))});onOpenToggle(){vn().f[15]++,vn().s[63]++,this.setState({styleUrl:""}),vn().s[64]++,this.clearError(),vn().s[65]++,this.props.onOpenToggle()}onChangeUrl=(vn().s[66]++,e=>{vn().f[16]++,vn().s[67]++,this.setState({styleUrl:e})});render(){vn().f[17]++;const e=(vn().s[68]++,this.props.t),t=(vn().s[69]++,Kse.map(r=>(vn().f[18]++,vn().s[70]++,te.jsx(tPe,{url:r.url,title:r.title,thumbnailUrl:r.thumbnail,onSelect:this.onStyleSelect},r.id))));let i;return vn().s[71]++,this.state.error?(vn().b[5][0]++,vn().s[72]++,i=te.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,te.jsx("a",{href:"#",onClick:()=>(vn().f[19]++,vn().s[73]++,this.clearError()),className:"maputnik-modal-error-close",children:""})]})):vn().b[5][1]++,vn().s[74]++,te.jsxs("div",{children:[te.jsxs(Q1,{"data-wd-key":"modal:open",isOpen:this.props.isOpen,onOpenToggle:()=>(vn().f[20]++,vn().s[75]++,this.onOpenToggle()),title:e("Open Style"),children:[i,te.jsxs("section",{className:"maputnik-modal-section",children:[te.jsx("h1",{children:e("Open local Style")}),te.jsx("p",{children:e("Open a local JSON style from your computer.")}),te.jsx("div",{children:typeof window.showOpenFilePicker=="function"?(vn().b[6][0]++,te.jsxs(Ds,{"data-wd-key":"modal:open.file.button",className:"maputnik-big-button",onClick:this.onOpenFile,children:[te.jsx(yz,{})," ",e("Open Style")]})):(vn().b[6][1]++,te.jsxs("label",{children:[te.jsxs("a",{className:"maputnik-button maputnik-upload-button","aria-label":e("Open Style"),children:[te.jsx(yz,{})," ",e("Open Style")]}),te.jsx("input",{"data-wd-key":"modal:open.file.input",type:"file",style:{display:"none"},onChange:r=>(vn().f[21]++,vn().s[76]++,this.onFileChanged(r.target.files))})]}))})]}),te.jsx("section",{className:"maputnik-modal-section",children:te.jsxs("form",{onSubmit:this.onSubmitUrl,children:[te.jsx("h1",{children:e("Load from URL")}),te.jsx("p",{children:te.jsxs(tC,{t:e,children:["Load from a URL. Note that the URL must have ",te.jsx("a",{href:"https://enable-cors.org",target:"_blank",rel:"noopener noreferrer",children:"CORS enabled"}),"."]})}),te.jsx(KK,{"aria-label":e("Style URL"),"data-wd-key":"modal:open.url.input",type:"text",className:"maputnik-input",default:e("Enter URL..."),value:this.state.styleUrl,onInput:this.onChangeUrl,onChange:this.onChangeUrl}),te.jsx("div",{children:te.jsx(Ds,{"data-wd-key":"modal:open.url.button",type:"submit",className:"maputnik-big-button",disabled:this.state.styleUrl.length<1,children:"Load from URL"})})]})}),te.jsxs("section",{className:"maputnik-modal-section maputnik-modal-section--shrink",children:[te.jsx("h1",{children:e("Gallery Styles")}),te.jsx("p",{children:e("Open one of the publicly available styles to start from.")}),te.jsx("div",{className:"maputnik-style-gallery-container",children:t})]})]}),te.jsx(ePe,{isOpen:!!this.state.activeRequest,title:e("Loading style"),onCancel:r=>(vn().f[22]++,vn().s[77]++,this.onCancelActiveRequest(r)),message:e("Loading: {{requestUrl}}",{requestUrl:this.state.activeRequestUrl})})]})}}const iPe=(vn().s[78]++,Mo()(nPe));function lp(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx",e="56c3984d0ef3534e088a574117d91f5af2db0afb",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:17},end:{line:41,column:5}},2:{start:{line:42,column:25},end:{line:115,column:5}},3:{start:{line:116,column:4},end:{line:145,column:6}},4:{start:{line:130,column:12},end:{line:133,column:22}},5:{start:{line:137,column:12},end:{line:141,column:22}},6:{start:{line:148,column:23},end:{line:148,column:64}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:146,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:129,column:57},end:{line:129,column:58}},loc:{start:{line:129,column:72},end:{line:134,column:11}},line:129},2:{name:"(anonymous_2)",decl:{start:{line:136,column:65},end:{line:136,column:66}},loc:{start:{line:136,column:80},end:{line:142,column:11}},line:136}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx"],names:[],mappings:"AAiBa,SAwCA,UAxCA,KAwCA,YAxCA;AAjBb,OAAO,WAAW;AAClB,SAAS,OAA6B,uBAAuB;AAE7D,OAAO,WAAW;AASlB,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,OAAO;AAAA,MACX;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,YAAY;AAAA,MACtB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,cAAc;AAAA,MACxB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,oBAAoB;AAAA,MAC9B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,sBAAsB;AAAA,MAChC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,WAAW;AAAA,MACrB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,aAAa;AAAA,MACvB;AAAA,IACF;AAGA,UAAM,eAAe;AAAA,MACnB;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,gBAAE;AAAA,QACZ,MAAM,EAAE,uBAAwB;AAAA,MAClC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,mBAAK;AAAA,QACf,MAAM,EAAE,0BAA2B;AAAA,MACrC;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,mBAAK;AAAA,WAAM;AAAA,QAC1C,MAAM,EAAE,sCAAuC;AAAA,MACjD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,sCAAsC;AAAA,MAChD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,gBAAE;AAAA,WAAM;AAAA,QACvC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,IACF;AAGA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QAEpB,+BAAC,aAAQ,WAAU,mDACjB;AAAA,8BAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAK,iBAAG;AAAA,YAAO;AAAA,aACxB,GACF;AAAA,UACA,oBAAC,QACE,eAAK,IAAI,CAAC,MAAM,QAAQ;AACvB,mBAAO,qBAAC,SAAc,WAAU,sCAC9B;AAAA,kCAAC,QAAmB,eAAK,OAAhB,OAAK,GAAe;AAAA,cAC7B,oBAAC,QAAmB,eAAK,QAAhB,OAAK,GAAgB;AAAA,iBAFf,GAGjB;AAAA,UACF,CAAC,GACH;AAAA,UACA,oBAAC,OAAG,YAAE,8DAA8D,GAAE;AAAA,UACtE,oBAAC,QACE,uBAAa,IAAI,CAAC,MAAM,QAAQ;AAC/B,mBAAO,qBAAC,QACN;AAAA,kCAAC,UAAM,eAAK,KAAI;AAAA,cAAO;AAAA,cAAE,KAAK;AAAA,iBADhB,GAEhB;AAAA,UACF,CAAC,GACH;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,iBAAiB,gBAAgB,EAAE,sBAAsB;AAC/D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"56c3984d0ef3534e088a574117d91f5af2db0afb"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return lp=function(){return s},s}lp();class rPe extends On.Component{render(){lp().f[0]++;const e=(lp().s[0]++,this.props.t),t=(lp().s[1]++,[{key:te.jsx("kbd",{children:"?"}),text:e("Shortcuts menu")},{key:te.jsx("kbd",{children:"o"}),text:e("Open modal")},{key:te.jsx("kbd",{children:"e"}),text:e("Export modal")},{key:te.jsx("kbd",{children:"d"}),text:e("Data Sources modal")},{key:te.jsx("kbd",{children:"s"}),text:e("Style Settings modal")},{key:te.jsx("kbd",{children:"i"}),text:e("Toggle inspect")},{key:te.jsx("kbd",{children:"m"}),text:e("Focus map")},{key:te.jsx("kbd",{children:"!"}),text:e("Debug modal")}]),i=(lp().s[2]++,[{key:te.jsx("kbd",{children:"+"}),text:e("Increase the zoom level by 1.")},{key:te.jsxs(te.Fragment,{children:[te.jsx("kbd",{children:"Shift"})," + ",te.jsx("kbd",{children:"+"})]}),text:e("Increase the zoom level by 2.")},{key:te.jsx("kbd",{children:"-"}),text:e("Decrease the zoom level by 1.")},{key:te.jsxs(te.Fragment,{children:[te.jsx("kbd",{children:"Shift"})," + ",te.jsx("kbd",{children:"-"})]}),text:e("Decrease the zoom level by 2.")},{key:te.jsx("kbd",{children:"Up"}),text:e("Pan up by 100 pixels.")},{key:te.jsx("kbd",{children:"Down"}),text:e("Pan down by 100 pixels.")},{key:te.jsx("kbd",{children:"Left"}),text:e("Pan left by 100 pixels.")},{key:te.jsx("kbd",{children:"Right"}),text:e("Pan right by 100 pixels.")},{key:te.jsxs(te.Fragment,{children:[te.jsx("kbd",{children:"Shift"})," + ",te.jsx("kbd",{children:"Right"})]}),text:e("Increase the rotation by 15 degrees.")},{key:te.jsxs(te.Fragment,{children:[te.jsx("kbd",{children:"Shift"})," + ",te.jsx("kbd",{children:"Left"})]}),text:e("Decrease the rotation by 15 degrees.")},{key:te.jsxs(te.Fragment,{children:[te.jsx("kbd",{children:"Shift"})," + ",te.jsx("kbd",{children:"Up"})]}),text:e("Increase the pitch by 10 degrees.")},{key:te.jsxs(te.Fragment,{children:[te.jsx("kbd",{children:"Shift"})," + ",te.jsx("kbd",{children:"Down"})]}),text:e("Decrease the pitch by 10 degrees.")}]);return lp().s[3]++,te.jsx(Q1,{"data-wd-key":"modal:shortcuts",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Shortcuts"),children:te.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[te.jsx("p",{children:te.jsxs(tC,{t:e,children:["Press ",te.jsx("code",{children:"ESC"})," to lose focus of any active elements, then press one of:"]})}),te.jsx("dl",{children:t.map((r,o)=>(lp().f[1]++,lp().s[4]++,te.jsxs("div",{className:"maputnik-modal-shortcuts__shortcut",children:[te.jsx("dt",{children:r.key},"dt"+o),te.jsx("dd",{children:r.text},"dd"+o)]},o)))}),te.jsx("p",{children:e("If the Map is in focused you can use the following shortcuts")}),te.jsx("ul",{children:i.map((r,o)=>(lp().f[2]++,lp().s[5]++,te.jsxs("li",{children:[te.jsx("span",{children:r.key})," ",r.text]},o)))})]})})}}const oPe=(lp().s[6]++,Mo()(rPe));function Vl(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx",e="c09f0bfde95742e69af0d091b2de9baefbfef43a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx",statementMap:{0:{start:{line:7,column:27},end:{line:7,column:37}},1:{start:{line:8,column:20},end:{line:8,column:48}},2:{start:{line:9,column:19},end:{line:9,column:49}},3:{start:{line:10,column:19},end:{line:10,column:49}},4:{start:{line:11,column:4},end:{line:53,column:6}},5:{start:{line:22,column:14},end:{line:26,column:27}},6:{start:{line:23,column:96},end:{line:23,column:153}},7:{start:{line:29,column:14},end:{line:33,column:27}},8:{start:{line:30,column:96},end:{line:30,column:153}},9:{start:{line:56,column:19},end:{line:56,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:54,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:21,column:140},end:{line:21,column:141}},loc:{start:{line:21,column:156},end:{line:27,column:13}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:89},end:{line:23,column:90}},loc:{start:{line:23,column:96},end:{line:23,column:153}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:28,column:136},end:{line:28,column:137}},loc:{start:{line:28,column:152},end:{line:34,column:13}},line:28},4:{name:"(anonymous_4)",decl:{start:{line:30,column:89},end:{line:30,column:90}},loc:{start:{line:30,column:96},end:{line:30,column:153}},line:30}},branchMap:{0:{loc:{start:{line:21,column:12},end:{line:27,column:17}},type:"binary-expr",locations:[{start:{line:21,column:12},end:{line:21,column:44}},{start:{line:21,column:64},end:{line:27,column:17}}],line:21},1:{loc:{start:{line:28,column:12},end:{line:34,column:17}},type:"binary-expr",locations:[{start:{line:28,column:12},end:{line:28,column:40}},{start:{line:28,column:60},end:{line:34,column:17}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx"],names:[],mappings:"AAuCQ,cAKQ,YALR;AAvCR,OAAO,WAAW;AAClB,SAAS,OAA6B,uBAAuB;AAE7D,OAAO,WAAW;AAqBlB,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAS;AACP,UAAM,EAAC,GAAG,QAAO,IAAI,KAAK;AAE1B,UAAM,UAAU,KAAK,MAAM,QAAQ,IAAI,IAAE;AACzC,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAC9C,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAE9C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,OAAO;AAAA,QAEhB;AAAA,+BAAC,aAAQ,WAAU,mDACjB;AAAA,gCAAC,QAAI,YAAE,SAAS,GAAE;AAAA,YACjB,KAAK,MAAM,aAAa,YACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,YAED,KAAK,MAAM,aAAa,QACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,aAEJ;AAAA,UACA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,OAAO,GAAE;AAAA,YAChB,oBAAC,OACC,+BAAC,SAAM,GACL;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,QAAO;AAAA,kBACP,KAAI;AAAA,kBACJ,MAAM,sCAAsC,OAAO,IAAI,MAAM,IAAI,MAAM;AAAA,kBACxE;AAAA;AAAA,cAED;AAAA,cAAI;AAAA,eACN,GACF;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c09f0bfde95742e69af0d091b2de9baefbfef43a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Vl=function(){return s},s}Vl();class sPe extends On.Component{render(){Vl().f[0]++;const{t:e,mapView:t}=(Vl().s[0]++,this.props),i=(Vl().s[1]++,Math.round(t.zoom)+1),r=(Vl().s[2]++,+t.center.lng.toFixed(5)),o=(Vl().s[3]++,+t.center.lat.toFixed(5));return Vl().s[4]++,te.jsxs(Q1,{"data-wd-key":"modal:debug",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Debug"),children:[te.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[te.jsx("h1",{children:e("Options")}),(Vl().b[0][0]++,this.props.renderer==="mlgljs"&&(Vl().b[0][1]++,te.jsx("ul",{children:Object.entries(this.props.maplibreGlDebugOptions).map(([s,a])=>(Vl().f[1]++,Vl().s[5]++,te.jsx("li",{children:te.jsxs("label",{children:[te.jsx("input",{type:"checkbox",checked:a,onChange:c=>(Vl().f[2]++,Vl().s[6]++,this.props.onChangeMaplibreGlDebug(s,c.target.checked))})," ",s]})},s)))}))),(Vl().b[1][0]++,this.props.renderer==="ol"&&(Vl().b[1][1]++,te.jsx("ul",{children:Object.entries(this.props.openlayersDebugOptions).map(([s,a])=>(Vl().f[3]++,Vl().s[7]++,te.jsx("li",{children:te.jsxs("label",{children:[te.jsx("input",{type:"checkbox",checked:a,onChange:c=>(Vl().f[4]++,Vl().s[8]++,this.props.onChangeOpenlayersDebug(s,c.target.checked))})," ",s]})},s)))})))]}),te.jsxs("section",{className:"maputnik-modal-section",children:[te.jsx("h1",{children:e("Links")}),te.jsx("p",{children:te.jsxs(tC,{t:e,children:[te.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:`https://www.openstreetmap.org/#map=${i}/${o}/${r}`,children:"Open in OSM"}),". Opens the current view on openstreetmap.org"]})})]})]})}}const aPe=(Vl().s[9]++,Mo()(sPe));function ai(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalGlobalState.tsx",e="681e0b3080d4effb89e735abebd0878f77572d27",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalGlobalState.tsx",statementMap:{0:{start:{line:10,column:33},end:{line:116,column:1}},1:{start:{line:11,column:34},end:{line:18,column:3}},2:{start:{line:12,column:18},end:{line:12,column:32}},3:{start:{line:13,column:24},end:{line:13,column:41}},4:{start:{line:14,column:4},end:{line:17,column:8}},5:{start:{line:14,column:62},end:{line:17,column:5}},6:{start:{line:19,column:34},end:{line:31,column:3}},7:{start:{line:20,column:18},end:{line:20,column:39}},8:{start:{line:21,column:24},end:{line:21,column:26}},9:{start:{line:22,column:4},end:{line:28,column:5}},10:{start:{line:23,column:6},end:{line:27,column:7}},11:{start:{line:24,column:8},end:{line:26,column:10}},12:{start:{line:29,column:4},end:{line:29,column:77}},13:{start:{line:30,column:4},end:{line:30,column:32}},14:{start:{line:32,column:24},end:{line:40,column:3}},15:{start:{line:33,column:23},end:{line:33,column:48}},16:{start:{line:34,column:16},end:{line:34,column:17}},17:{start:{line:35,column:4},end:{line:37,column:5}},18:{start:{line:35,column:34},end:{line:35,column:57}},19:{start:{line:36,column:6},end:{line:36,column:14}},20:{start:{line:38,column:4},end:{line:38,column:60}},21:{start:{line:39,column:4},end:{line:39,column:40}},22:{start:{line:41,column:27},end:{line:45,column:3}},23:{start:{line:42,column:23},end:{line:42,column:48}},24:{start:{line:43,column:4},end:{line:43,column:32}},25:{start:{line:44,column:4},end:{line:44,column:40}},26:{start:{line:46,column:30},end:{line:50,column:3}},27:{start:{line:47,column:23},end:{line:47,column:48}},28:{start:{line:48,column:4},end:{line:48,column:41}},29:{start:{line:49,column:4},end:{line:49,column:40}},30:{start:{line:51,column:32},end:{line:55,column:3}},31:{start:{line:52,column:23},end:{line:52,column:48}},32:{start:{line:53,column:4},end:{line:53,column:45}},33:{start:{line:54,column:4},end:{line:54,column:40}},34:{start:{line:56,column:20},end:{line:56,column:45}},35:{start:{line:57,column:25},end:{line:85,column:14}},36:{start:{line:57,column:76},end:{line:85,column:13}},37:{start:{line:63,column:29},end:{line:63,column:68}},38:{start:{line:72,column:29},end:{line:72,column:70}},39:{start:{line:79,column:23},end:{line:79,column:46}},40:{start:{line:86,column:2},end:{line:115,column:4}},41:{start:{line:117,column:25},end:{line:117,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:33},end:{line:10,column:34}},loc:{start:{line:10,column:44},end:{line:116,column:1}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:11,column:34},end:{line:11,column:35}},loc:{start:{line:11,column:40},end:{line:18,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:14,column:43},end:{line:14,column:44}},loc:{start:{line:14,column:62},end:{line:17,column:5}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:19,column:34},end:{line:19,column:35}},loc:{start:{line:19,column:50},end:{line:31,column:3}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:32,column:24},end:{line:32,column:25}},loc:{start:{line:32,column:30},end:{line:40,column:3}},line:32},5:{name:"(anonymous_5)",decl:{start:{line:35,column:27},end:{line:35,column:28}},loc:{start:{line:35,column:34},end:{line:35,column:57}},line:35},6:{name:"(anonymous_6)",decl:{start:{line:41,column:27},end:{line:41,column:28}},loc:{start:{line:41,column:38},end:{line:45,column:3}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:46,column:30},end:{line:46,column:31}},loc:{start:{line:46,column:49},end:{line:50,column:3}},line:46},8:{name:"(anonymous_8)",decl:{start:{line:51,column:32},end:{line:51,column:33}},loc:{start:{line:51,column:53},end:{line:55,column:3}},line:51},9:{name:"(anonymous_9)",decl:{start:{line:57,column:39},end:{line:57,column:40}},loc:{start:{line:57,column:76},end:{line:85,column:13}},line:57},10:{name:"(anonymous_10)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:29},end:{line:63,column:68}},line:63},11:{name:"(anonymous_11)",decl:{start:{line:72,column:18},end:{line:72,column:19}},loc:{start:{line:72,column:29},end:{line:72,column:70}},line:72},12:{name:"(anonymous_12)",decl:{start:{line:79,column:17},end:{line:79,column:18}},loc:{start:{line:79,column:23},end:{line:79,column:46}},line:79}},branchMap:{0:{loc:{start:{line:13,column:24},end:{line:13,column:41}},type:"binary-expr",locations:[{start:{line:13,column:24},end:{line:13,column:35}},{start:{line:13,column:39},end:{line:13,column:41}}],line:13},1:{loc:{start:{line:23,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:23,column:6},end:{line:27,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},2:{loc:{start:{line:29,column:18},end:{line:29,column:76}},type:"cond-expr",locations:[{start:{line:29,column:56},end:{line:29,column:67}},{start:{line:29,column:70},end:{line:29,column:76}}],line:29},3:{loc:{start:{line:48,column:28},end:{line:48,column:40}},type:"binary-expr",locations:[{start:{line:48,column:28},end:{line:48,column:34}},{start:{line:48,column:38},end:{line:48,column:40}}],line:48},4:{loc:{start:{line:53,column:30},end:{line:53,column:44}},type:"binary-expr",locations:[{start:{line:53,column:30},end:{line:53,column:38}},{start:{line:53,column:42},end:{line:53,column:44}}],line:53},5:{loc:{start:{line:63,column:56},end:{line:63,column:67}},type:"binary-expr",locations:[{start:{line:63,column:56},end:{line:63,column:61}},{start:{line:63,column:65},end:{line:63,column:67}}],line:63},6:{loc:{start:{line:72,column:58},end:{line:72,column:69}},type:"binary-expr",locations:[{start:{line:72,column:58},end:{line:72,column:63}},{start:{line:72,column:67},end:{line:72,column:69}}],line:72},7:{loc:{start:{line:94,column:8},end:{line:97,column:12}},type:"binary-expr",locations:[{start:{line:94,column:8},end:{line:94,column:30}},{start:{line:94,column:50},end:{line:97,column:12}}],line:94},8:{loc:{start:{line:98,column:8},end:{line:101,column:12}},type:"binary-expr",locations:[{start:{line:98,column:8},end:{line:98,column:28}},{start:{line:98,column:48},end:{line:101,column:12}}],line:98}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalGlobalState.tsx"],names:["variables"],mappings:"AAsFI,SAEI,KAFJ,YAAA;AArFJ,SAAS,uBAA6C;AACtD,SAAS,gBAAgB;AACzB,OAAO,YAAY;AAEnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,SAAS,sBAAsB;AAG/B,OAAO,SAAS;AAchB,MAAM,2BAAoE,CAAC,UAAU;AACnF,QAAM,0BAA0B,MAA6B;AAC3D,UAAM,QAAQ,MAAM;AACpB,UAAM,cAAc,MAAM,SAAS,CAAC;AAEpC,WAAO,OAAO,QAAQ,WAAW,EAAE,IAAI,CAAC,CAAC,KAAK,KAAK,OAAO;AAAA,MACxD;AAAA,MACA,OAAO,MAAM;AAAA,IACf,EAAE;AAAA,EACJ;AAEA,QAAM,0BAA0B,CAACA,eAAqC;AACpE,UAAM,QAAQ,EAAE,GAAG,MAAM,SAAS;AAGlC,UAAM,cAAmD,CAAC;AAC1D,eAAW,YAAYA,YAAW;AAChC,UAAI,SAAS,IAAI,KAAK,MAAM,IAAI;AAC9B,oBAAY,SAAS,GAAG,IAAI;AAAA,UAC1B,SAAS,SAAS;AAAA,QACpB;AAAA,MACF;AAAA,IACF;AAEA,UAAM,QAAQ,OAAO,KAAK,WAAW,EAAE,SAAS,IAAI,cAAc;AAElE,UAAM,eAAe,KAAK;AAAA,EAC5B;AAEA,QAAM,gBAAgB,MAAM;AAC1B,UAAMA,aAAY,wBAAwB;AAC1C,QAAI,QAAQ;AACZ,WAAOA,WAAU,KAAK,CAAA,MAAK,EAAE,QAAQ,MAAM,KAAK,EAAE,GAAG;AACnD;AAAA,IACF;AACAA,eAAU,KAAK,EAAE,KAAK,MAAM,KAAK,IAAI,OAAO,QAAQ,CAAC;AACrD,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,mBAAmB,CAAC,UAAkB;AAC1C,UAAMA,aAAY,wBAAwB;AAC1CA,eAAU,OAAO,OAAO,CAAC;AACzB,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,sBAAsB,CAAC,OAAe,WAAmB;AAC7D,UAAMA,aAAY,wBAAwB;AAC1CA,eAAU,KAAK,EAAE,MAAM,UAAU;AACjC,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,wBAAwB,CAAC,OAAe,aAAqB;AACjE,UAAMA,aAAY,wBAAwB;AAE1CA,eAAU,KAAK,EAAE,QAAQ,YAAY;AACrC,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,YAAY,wBAAwB;AAE1C,QAAM,iBAAiB,UAAU,IAAI,CAAC,UAAU,+BAC7C,MAAA,EACC,UAAA;AAAA,IAAA,oBAAC,MAAA,EACC,UAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,OAAO,MAAM,EAAE,KAAK;AAAA,QACpB,OAAO,SAAS;AAAA,QAChB,UAAU,CAAC,UAAU,oBAAoB,OAAO,SAAS,EAAE;AAAA,QAC3D,eAAa,+BAA+B;AAAA,MAAA;AAAA,IAC9C,EAAA,CACF;AAAA,wBACC,MAAA,EACC,UAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,OAAO,MAAM,EAAE,OAAO;AAAA,QACtB,OAAO,SAAS;AAAA,QAChB,UAAU,CAAC,UAAU,sBAAsB,OAAO,SAAS,EAAE;AAAA,QAC7D,eAAa,iCAAiC;AAAA,MAAA;AAAA,IAChD,EAAA,CACF;AAAA,wBACC,MAAA,EAAG,OAAO,EAAE,eAAe,SAAQ,GAClC,UAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,SAAS,MAAM,iBAAiB,KAAK;AAAA,QACrC,OAAO,MAAM,EAAE,iBAAiB;AAAA,QAChC,eAAY;AAAA,QAEZ,8BAAC,UAAA,CAAA,CAAS;AAAA,MAAA;AAAA,IACZ,EAAA,CACF;AAAA,EAAA,EAAA,GAzBO,KA0BT,CACD;AAED,SACE;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,eAAY;AAAA,MACZ,QAAQ,MAAM;AAAA,MACd,cAAc,MAAM;AAAA,MACpB,OAAO,MAAM,EAAE,wBAAwB;AAAA,MAGtC,UAAA;AAAA,QAAA,UAAU,WAAW,KAChB,qBAAC,OAAA,EACC,UAAA;AAAA,UAAA,oBAAC,KAAA,EAAG,UAAA,MAAM,EAAE,2FAA2F,EAAA,CAAE;AAAA,UACzG,oBAAC,OAAA,EAAc,WAAU,uBACvB,UAAA,oBAAC,KAAA,EAAI,WAAW,OAAO,MAAM,MAAA,CAAO,EAAA,GAD7B,KAET;AAAA,QAAA,EAAA,CACF;AAAA,QAEL,UAAU,SAAS,KACpB,qBAAC,SAAA,EACC,UAAA;AAAA,UAAA,oBAAC,SAAA,CAAA,CACD;AAAA,UACA,oBAAC,WACE,UAAA,eAAA,CACH;AAAA,QAAA,EAAA,CACF;AAAA,4BAEC,OAAA,EACC,UAAA;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,SAAS;AAAA,YACT,eAAY;AAAA,YAEZ,UAAA;AAAA,cAAA,oBAAC,gBAAA,CAAA,CAAe;AAAA,cACf,MAAM,EAAE,cAAc;AAAA,YAAA;AAAA,UAAA;AAAA,QACzB,EAAA,CACF;AAAA,MAAA;AAAA,IAAA;AAAA,EACF;AAEJ;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"681e0b3080d4effb89e735abebd0878f77572d27"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ai=function(){return s},s}ai();ai().s[0]++;const lPe=n=>{ai().f[0]++,ai().s[1]++;const e=()=>{ai().f[1]++;const f=(ai().s[2]++,n.mapStyle),y=(ai().s[3]++,ai().b[0][0]++,f.state||(ai().b[0][1]++,{}));return ai().s[4]++,Object.entries(y).map(([_,E])=>(ai().f[2]++,ai().s[5]++,{key:_,value:E.default}))};ai().s[6]++;const t=f=>{ai().f[3]++;const y=(ai().s[7]++,{...n.mapStyle}),_=(ai().s[8]++,{});ai().s[9]++;for(const E of f)ai().s[10]++,E.key.trim()!==""?(ai().b[1][0]++,ai().s[11]++,_[E.key]={default:E.value}):ai().b[1][1]++;ai().s[12]++,y.state=Object.keys(_).length>0?(ai().b[2][0]++,_):(ai().b[2][1]++,void 0),ai().s[13]++,n.onStyleChanged(y)};ai().s[14]++;const i=()=>{ai().f[4]++;const f=(ai().s[15]++,e());let y=(ai().s[16]++,1);for(ai().s[17]++;f.find(_=>(ai().f[5]++,ai().s[18]++,_.key===`key${y}`));)ai().s[19]++,y++;ai().s[20]++,f.push({key:`key${y}`,value:"value"}),ai().s[21]++,t(f)};ai().s[22]++;const r=f=>{ai().f[6]++;const y=(ai().s[23]++,e());ai().s[24]++,y.splice(f,1),ai().s[25]++,t(y)};ai().s[26]++;const o=(f,y)=>{ai().f[7]++;const _=(ai().s[27]++,e());ai().s[28]++,_[f].key=(ai().b[3][0]++,y||(ai().b[3][1]++,"")),ai().s[29]++,t(_)};ai().s[30]++;const s=(f,y)=>{ai().f[8]++;const _=(ai().s[31]++,e());ai().s[32]++,_[f].value=(ai().b[4][0]++,y||(ai().b[4][1]++,"")),ai().s[33]++,t(_)},a=(ai().s[34]++,e()),c=(ai().s[35]++,a.map((f,y)=>(ai().f[9]++,ai().s[36]++,te.jsxs("tr",{children:[te.jsx("td",{children:te.jsx(sd,{label:n.t("Key"),value:f.key,onChange:_=>(ai().f[10]++,ai().s[37]++,o(y,(ai().b[5][0]++,_||(ai().b[5][1]++,"")))),"data-wd-key":"global-state-variable-key:"+y})}),te.jsx("td",{children:te.jsx(sd,{label:n.t("Value"),value:f.value,onChange:_=>(ai().f[11]++,ai().s[38]++,s(y,(ai().b[6][0]++,_||(ai().b[6][1]++,"")))),"data-wd-key":"global-state-variable-value:"+y})}),te.jsx("td",{style:{verticalAlign:"middle"},children:te.jsx(Ds,{onClick:()=>(ai().f[12]++,ai().s[39]++,r(y)),title:n.t("Remove variable"),"data-wd-key":"global-state-remove-variable",children:te.jsx(TC,{})})})]},y))));return ai().s[40]++,te.jsxs(Q1,{"data-wd-key":"modal:global-state",isOpen:n.isOpen,onOpenToggle:n.onOpenToggle,title:n.t("Global State Variables"),children:[(ai().b[7][0]++,a.length===0&&(ai().b[7][1]++,te.jsxs("div",{children:[te.jsx("p",{children:n.t("No global state variables defined. Add variables to create reusable values in your style.")}),te.jsx("div",{className:"maputnik-doc-inline",children:te.jsx(EB,{fieldSpec:Tr.$root.state})},"doc")]}))),(ai().b[8][0]++,a.length>0&&(ai().b[8][1]++,te.jsxs("table",{children:[te.jsx("thead",{}),te.jsx("tbody",{children:c})]}))),te.jsx("div",{children:te.jsxs(Ds,{onClick:i,"data-wd-key":"global-state-add-variable",children:[te.jsx(UB,{}),n.t("Add Variable")]})})]})},uPe=(ai().s[41]++,Mo()(lPe));function Do(){var n="/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",e="5a9c2665b160f40983faeb4cc69ad8e0d0d449de",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",statementMap:{0:{start:{line:2,column:2},end:{line:14,column:3}},1:{start:{line:3,column:21},end:{line:6,column:6}},2:{start:{line:7,column:4},end:{line:9,column:5}},3:{start:{line:8,column:6},end:{line:8,column:60}},4:{start:{line:10,column:4},end:{line:10,column:33}},5:{start:{line:12,column:4},end:{line:12,column:95}},6:{start:{line:13,column:4},end:{line:13,column:24}},7:{start:{line:17,column:2},end:{line:17,column:30}},8:{start:{line:17,column:20},end:{line:17,column:30}},9:{start:{line:18,column:17},end:{line:18,column:37}},10:{start:{line:19,column:23},end:{line:19,column:109}},11:{start:{line:20,column:2},end:{line:24,column:3}},12:{start:{line:21,column:4},end:{line:21,column:41}},13:{start:{line:23,column:4},end:{line:23,column:69}},14:{start:{line:25,column:14},end:{line:25,column:31}},15:{start:{line:26,column:16},end:{line:26,column:39}},16:{start:{line:27,column:2},end:{line:27,column:29}},17:{start:{line:30,column:2},end:{line:30,column:26}},18:{start:{line:30,column:16},end:{line:30,column:26}},19:{start:{line:31,column:14},end:{line:31,column:31}},20:{start:{line:32,column:17},end:{line:32,column:40}},21:{start:{line:33,column:2},end:{line:33,column:29}}},fnMap:{0:{name:"loadJSON",decl:{start:{line:1,column:15},end:{line:1,column:23}},loc:{start:{line:1,column:43},end:{line:15,column:1}},line:1},1:{name:"downloadGlyphsMetadata",decl:{start:{line:16,column:22},end:{line:16,column:44}},loc:{start:{line:16,column:58},end:{line:28,column:1}},line:16},2:{name:"downloadSpriteMetadata",decl:{start:{line:29,column:22},end:{line:29,column:44}},loc:{start:{line:29,column:54},end:{line:34,column:1}},line:29}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:17,column:2},end:{line:17,column:30}},type:"if",locations:[{start:{line:17,column:2},end:{line:17,column:30}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},2:{loc:{start:{line:20,column:2},end:{line:24,column:3}},type:"if",locations:[{start:{line:20,column:2},end:{line:24,column:3}},{start:{line:22,column:9},end:{line:24,column:3}}],line:20},3:{loc:{start:{line:30,column:2},end:{line:30,column:26}},type:"if",locations:[{start:{line:30,column:2},end:{line:30,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/metadata.ts"],names:[],mappings:"AAAA,eAAe,SAAY,KAAa,cAA6B;AACnE,MAAI;AACF,UAAM,WAAW,MAAM,MAAM,KAAK;AAAA,MAChC,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC;AACD,QAAI,CAAC,SAAS,IAAI;AAChB,YAAM,IAAI,MAAM,iCAAiC,GAAG;AAAA,IACtD;AACA,WAAO,MAAM,SAAS,KAAK;AAAA,EAC7B,QAAQ;AACN,YAAQ,KAAK,+BAA+B,MAAM,2BAA2B,YAAY;AACzF,WAAO;AAAA,EACT;AACF;AAEA,sBAAsB,uBAAuB,aAAwC;AACnF,MAAG,CAAC,YAAa,QAAO,CAAC;AAIzB,QAAM,SAAS,IAAI,IAAI,WAAW;AAClC,QAAM,eAAe,MAAM,mBAAmB,aAAa,IAAI,MAAM,mBAAmB,SAAS,IAAI;AACrG,MAAG,OAAO,aAAa,cAAc;AACnC,WAAO,WAAW;AAAA,EACpB,OAAO;AACL,WAAO,WAAW,OAAO,SAAU,QAAQ,cAAc,OAAO;AAAA,EAClE;AACA,QAAM,MAAM,OAAO,SAAS;AAC5B,QAAM,QAAQ,MAAM,SAAS,KAAK,CAAC,CAAa;AAChD,SAAO,CAAC,GAAG,IAAI,IAAI,KAAK,CAAC;AAC3B;AAEA,sBAAsB,uBAAuB,SAAoC;AAC/E,MAAG,CAAC,QAAS,QAAO,CAAC;AACrB,QAAM,MAAM,UAAU;AACtB,QAAM,SAAS,MAAM,SAAS,KAAK,CAAC,CAA2B;AAC/D,SAAO,OAAO,KAAK,MAAM;AAC3B;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5a9c2665b160f40983faeb4cc69ad8e0d0d449de"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Do=function(){return s},s}Do();async function Fse(n,e){Do().f[0]++,Do().s[0]++;try{const t=(Do().s[1]++,await fetch(n,{mode:"cors",credentials:"same-origin"}));if(Do().s[2]++,t.ok)Do().b[0][1]++;else throw Do().b[0][0]++,Do().s[3]++,new Error("Failed to load metadata for "+n);return Do().s[4]++,await t.json()}catch{return Do().s[5]++,console.warn("Can not load metadata for "+n+", using default value "+e),Do().s[6]++,e}}async function cPe(n){if(Do().f[1]++,Do().s[7]++,n)Do().b[1][1]++;else return Do().b[1][0]++,Do().s[8]++,[];const e=(Do().s[9]++,new URL(n)),t=(Do().s[10]++,"/"+encodeURIComponent("{fontstack}")+"/"+encodeURIComponent("{range}")+".pbf");Do().s[11]++,e.pathname===t?(Do().b[2][0]++,Do().s[12]++,e.pathname="/fontstacks.json"):(Do().b[2][1]++,Do().s[13]++,e.pathname=e.pathname.replace(t,".json"));const i=(Do().s[14]++,e.toString()),r=(Do().s[15]++,await Fse(i,[]));return Do().s[16]++,[...new Set(r)]}async function APe(n){if(Do().f[2]++,Do().s[17]++,n)Do().b[3][1]++;else return Do().b[3][0]++,Do().s[18]++,[];const e=(Do().s[19]++,n+".json"),t=(Do().s[20]++,await Fse(e,{}));return Do().s[21]++,Object.keys(t)}function _h(){var n="/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",e="f92fa2abb31199d99fd3ae02d967dc6702faf862",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",statementMap:{0:{start:{line:3,column:18},end:{line:3,column:47}},1:{start:{line:4,column:2},end:{line:4,column:70}},2:{start:{line:4,column:30},end:{line:4,column:68}},3:{start:{line:7,column:2},end:{line:7,column:71}},4:{start:{line:7,column:58},end:{line:7,column:69}},5:{start:{line:10,column:2},end:{line:10,column:71}},6:{start:{line:10,column:58},end:{line:10,column:69}}},fnMap:{0:{name:"diffMessages",decl:{start:{line:2,column:9},end:{line:2,column:21}},loc:{start:{line:2,column:47},end:{line:5,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:21},end:{line:4,column:22}},loc:{start:{line:4,column:30},end:{line:4,column:68}},line:4},2:{name:"undoMessages",decl:{start:{line:6,column:16},end:{line:6,column:28}},loc:{start:{line:6,column:54},end:{line:8,column:1}},line:6},3:{name:"(anonymous_3)",decl:{start:{line:7,column:51},end:{line:7,column:52}},loc:{start:{line:7,column:58},end:{line:7,column:69}},line:7},4:{name:"redoMessages",decl:{start:{line:9,column:16},end:{line:9,column:28}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},5:{name:"(anonymous_5)",decl:{start:{line:10,column:51},end:{line:10,column:52}},loc:{start:{line:10,column:58},end:{line:10,column:69}},line:10}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts"],names:[],mappings:"AAAA,SAAQ,YAAW;AAGnB,SAAS,aAAa,aAAiC,YAAgC;AACrF,QAAM,UAAU,KAAK,aAAa,UAAU;AAC5C,SAAO,QAAQ,IAAI,SAAO,IAAI,UAAU,MAAM,IAAI,KAAK,KAAK,GAAG,CAAC;AAClE;AAEO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;AACO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f92fa2abb31199d99fd3ae02d967dc6702faf862"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return _h=function(){return s},s}_h();function zse(n,e){_h().f[0]++;const t=(_h().s[0]++,wce(n,e));return _h().s[1]++,t.map(i=>(_h().f[1]++,_h().s[2]++,i.command+" "+i.args.join(" ")))}function hPe(n,e){return _h().f[2]++,_h().s[3]++,zse(n,e).map(t=>(_h().f[3]++,_h().s[4]++,"Undo "+t))}function dPe(n,e){return _h().f[4]++,_h().s[5]++,zse(n,e).map(t=>(_h().f[5]++,_h().s[6]++,"Redo "+t))}var ZR=function(n,e){return ZR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])},ZR(n,e)};function jse(n,e){ZR(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function fPe(n){var e=typeof Symbol=="function"&&n[Symbol.iterator],t=0;return e?e.call(n):{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}}}function pPe(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,o=[],s;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(a){s={error:a}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(s)throw s.error}}return o}function mPe(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(pPe(arguments[e]));return n}var Nse=(function(){function n(e,t){this.target=t,this.type=e}return n})(),gPe=(function(n){jse(e,n);function e(t,i){var r=n.call(this,"error",i)||this;return r.message=t.message,r.error=t,r}return e})(Nse),yPe=(function(n){jse(e,n);function e(t,i,r){t===void 0&&(t=1e3),i===void 0&&(i="");var o=n.call(this,"close",r)||this;return o.wasClean=!0,o.code=t,o.reason=i,o}return e})(Nse);var vPe=function(){if(typeof WebSocket<"u")return WebSocket},bPe=function(n){return typeof n<"u"&&!!n&&n.CLOSING===2},Ub={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0};(function(){function n(e,t,i){var r=this;i===void 0&&(i={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(o){r._debug("open event");var s=r._options.minUptime,a=s===void 0?Ub.minUptime:s;clearTimeout(r._connectTimeout),r._uptimeTimeout=setTimeout(function(){return r._acceptOpen()},a),r._ws.binaryType=r._binaryType,r._messageQueue.forEach(function(c){return r._ws.send(c)}),r._messageQueue=[],r.onopen&&r.onopen(o),r._listeners.open.forEach(function(c){return r._callEventListener(o,c)})},this._handleMessage=function(o){r._debug("message event"),r.onmessage&&r.onmessage(o),r._listeners.message.forEach(function(s){return r._callEventListener(o,s)})},this._handleError=function(o){r._debug("error event",o.message),r._disconnect(void 0,o.message==="TIMEOUT"?"timeout":void 0),r.onerror&&r.onerror(o),r._debug("exec error listeners"),r._listeners.error.forEach(function(s){return r._callEventListener(o,s)}),r._connect()},this._handleClose=function(o){r._debug("close event"),r._clearTimeouts(),r._shouldReconnect&&r._connect(),r.onclose&&r.onclose(o),r._listeners.close.forEach(function(s){return r._callEventListener(o,s)})},this._url=e,this._protocols=t,this._options=i,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(n,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CONNECTING",{get:function(){return n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"OPEN",{get:function(){return n.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSING",{get:function(){return n.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSED",{get:function(){return n.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bufferedAmount",{get:function(){var e=this._messageQueue.reduce(function(t,i){return typeof i=="string"?t+=i.length:i instanceof Blob?t+=i.size:t+=i.byteLength,t},0);return e+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?n.CLOSED:n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),n.prototype.close=function(e,t){if(e===void 0&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(e,t)},n.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(e,t),this._connect())},n.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,i=t===void 0?Ub.maxEnqueuedMessages:t;this._messageQueue.length<i&&(this._debug("enqueue",e),this._messageQueue.push(e))}},n.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},n.prototype.dispatchEvent=function(e){var t,i,r=this._listeners[e.type];if(r)try{for(var o=fPe(r),s=o.next();!s.done;s=o.next()){var a=s.value;this._callEventListener(e,a)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return!0},n.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(function(i){return i!==t}))},n.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,mPe(["RWS>"],e))},n.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,i=t===void 0?Ub.reconnectionDelayGrowFactor:t,r=e.minReconnectionDelay,o=r===void 0?Ub.minReconnectionDelay:r,s=e.maxReconnectionDelay,a=s===void 0?Ub.maxReconnectionDelay:s,c=0;return this._retryCount>0&&(c=o*Math.pow(i,this._retryCount-1),c>a&&(c=a)),this._debug("next delay",c),c},n.prototype._wait=function(){var e=this;return new Promise(function(t){setTimeout(t,e._getNextDelay())})},n.prototype._getNextUrl=function(e){if(typeof e=="string")return Promise.resolve(e);if(typeof e=="function"){var t=e();if(typeof t=="string")return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},n.prototype._connect=function(){var e=this;if(!(this._connectLock||!this._shouldReconnect)){this._connectLock=!0;var t=this._options,i=t.maxRetries,r=i===void 0?Ub.maxRetries:i,o=t.connectionTimeout,s=o===void 0?Ub.connectionTimeout:o,a=t.WebSocket,c=a===void 0?vPe():a;if(this._retryCount>=r){this._debug("max retries reached",this._retryCount,">=",r);return}if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!bPe(c))throw Error("No valid WebSocket class provided");this._wait().then(function(){return e._getNextUrl(e._url)}).then(function(f){e._closeCalled||(e._debug("connect",{url:f,protocols:e._protocols}),e._ws=e._protocols?new c(f,e._protocols):new c(f),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout(function(){return e._handleTimeout()},s))})}},n.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new gPe(Error("TIMEOUT"),this))},n.prototype._disconnect=function(e,t){if(e===void 0&&(e=1e3),this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new yPe(e,t,this))}catch{}}},n.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},n.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},n.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},n.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},n.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},n})();function Gse(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts",e="511b7cd31edca7d05c4852901896ddb82085d1f5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts",statementMap:{0:{start:{line:7,column:18},end:{line:7,column:24}},1:{start:{line:10,column:4},end:{line:11,column:7}},2:{start:{line:12,column:17},end:{line:12,column:37}},3:{start:{line:13,column:17},end:{line:13,column:28}},4:{start:{line:14,column:4},end:{line:14,column:45}},5:{start:{line:15,column:4},end:{line:15,column:50}},6:{start:{line:16,column:4},end:{line:16,column:37}},7:{start:{line:19,column:4},end:{line:27,column:5}},8:{start:{line:20,column:23},end:{line:20,column:79}},9:{start:{line:21,column:19},end:{line:21,column:40}},10:{start:{line:22,column:23},end:{line:22,column:27}},11:{start:{line:23,column:6},end:{line:23,column:39}},12:{start:{line:24,column:6},end:{line:24,column:32}},13:{start:{line:26,column:6},end:{line:26,column:54}},14:{start:{line:30,column:23},end:{line:30,column:67}},15:{start:{line:31,column:4},end:{line:42,column:6}},16:{start:{line:32,column:6},end:{line:32,column:26}},17:{start:{line:32,column:19},end:{line:32,column:26}},18:{start:{line:33,column:6},end:{line:33,column:52}},19:{start:{line:34,column:24},end:{line:34,column:40}},20:{start:{line:35,column:6},end:{line:39,column:7}},21:{start:{line:36,column:8},end:{line:36,column:41}},22:{start:{line:38,column:8},end:{line:38,column:27}},23:{start:{line:40,column:27},end:{line:40,column:65}},24:{start:{line:41,column:6},end:{line:41,column:44}},25:{start:{line:45,column:4},end:{line:53,column:5}},26:{start:{line:46,column:23},end:{line:48,column:8}},27:{start:{line:49,column:19},end:{line:49,column:40}},28:{start:{line:50,column:6},end:{line:50,column:45}},29:{start:{line:52,column:6},end:{line:52,column:92}},30:{start:{line:57,column:22},end:{line:61,column:5}},31:{start:{line:62,column:15},end:{line:62,column:26}},32:{start:{line:63,column:4},end:{line:72,column:7}},33:{start:{line:71,column:6},end:{line:71,column:38}},34:{start:{line:71,column:17},end:{line:71,column:38}},35:{start:{line:73,column:4},end:{line:73,column:20}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:20},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:58},end:{line:10,column:59}},loc:{start:{line:10,column:64},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:15},end:{line:28,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:23},end:{line:43,column:3}},line:29},4:{name:"(anonymous_4)",decl:{start:{line:31,column:27},end:{line:31,column:28}},loc:{start:{line:31,column:34},end:{line:42,column:5}},line:31},5:{name:"(anonymous_5)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:25},end:{line:54,column:3}},line:44},6:{name:"(anonymous_6)",decl:{start:{line:56,column:2},end:{line:56,column:3}},loc:{start:{line:56,column:17},end:{line:74,column:3}},line:56},7:{name:"(anonymous_7)",decl:{start:{line:70,column:13},end:{line:70,column:14}},loc:{start:{line:70,column:29},end:{line:72,column:5}},line:70}},branchMap:{0:{loc:{start:{line:10,column:30},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:30},end:{line:10,column:53}},{start:{line:10,column:58},end:{line:11,column:5}}],line:10},1:{loc:{start:{line:32,column:6},end:{line:32,column:26}},type:"if",locations:[{start:{line:32,column:6},end:{line:32,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:32},2:{loc:{start:{line:45,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:53,column:5}},{start:{line:51,column:11},end:{line:53,column:5}}],line:45},3:{loc:{start:{line:71,column:6},end:{line:71,column:38}},type:"if",locations:[{start:{line:71,column:6},end:{line:71,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:71}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,OAAO,2BAA2B;AAO3B,aAAM,cAAqC;AAAA,EAEhD;AAAA,EACA;AAAA,EACA,gBAAoC;AAAA,EACpC;AAAA,EAEA,YAAY,MAA4B;AACtC,SAAK,qBAAqB,KAAK,uBAAuB,MAAM;AAAA,IAAC;AAC7D,UAAM,OAAO,OAAO,SAAS;AAC7B,UAAM,OAAO;AACb,SAAK,WAAW,UAAU,IAAI,IAAI,IAAI;AACtC,SAAK,eAAe,QAAQ,IAAI,IAAI,IAAI;AACxC,SAAK,OAAO,KAAK,KAAK,KAAK,IAAI;AAAA,EACjC;AAAA,EAEA,MAAM,OAAsB;AAC1B,QAAI;AACF,YAAM,WAAW,MAAM,MAAM,KAAK,WAAW,WAAW,EAAC,MAAM,OAAM,CAAC;AACtE,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,YAAM,WAAW;AACjB,WAAK,gBAAgB,SAAS,CAAC;AAC/B,WAAK,mBAAmB;AAAA,IAC1B,QAAQ;AACN,YAAM,IAAI,MAAM,8BAA8B;AAAA,IAChD;AAAA,EACF;AAAA,EAEA,qBAAqB;AACnB,UAAM,aAAa,IAAI,sBAAsB,KAAK,YAAY;AAC9D,eAAW,YAAY,OAAK;AAC1B,UAAG,CAAC,EAAE,KAAM;AACZ,cAAQ,IAAI,gCAAgC;AAC5C,UAAI,cAAc,MAAM;AACxB,UAAI;AACF,sBAAc,KAAK,MAAM,EAAE,IAAI;AAAA,MACjC,SAAQ,KAAK;AACX,gBAAQ,MAAM,GAAG;AAAA,MACnB;AACA,YAAM,eAAe,MAAM,oBAAoB,WAAW;AAC1D,WAAK,mBAAmB,YAAY;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,MAAM,iBAAoD;AACxD,QAAG,KAAK,eAAe;AACrB,YAAM,WAAW,MAAM,MAAM,KAAK,WAAW,aAAa,KAAK,eAAe;AAAA,QAC5E,MAAM;AAAA,MACR,CAAC;AACD,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,aAAO,MAAM,oBAAoB,IAAI;AAAA,IACvC,OAAO;AACL,YAAM,IAAI,MAAM,oEAAoE;AAAA,IACtF;AAAA,EACF;AAAA;AAAA,EAGA,KAAK,UAAoC;AACvC,UAAM,YAAY;AAAA,MAChB,MAAM;AAAA,QACJ,MAAM,oBAAoB,QAAQ;AAAA,MACpC;AAAA,IACF;AAEA,UAAM,KAAK,SAAS;AACpB,UAAM,KAAK,WAAW,aAAa,IAAI;AAAA,MACrC,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,QACP,gBAAgB;AAAA,MAClB;AAAA,MACA,MAAM;AAAA,IACR,CAAC,EACE,MAAM,SAAS,OAAO;AACrB,UAAG,MAAO,SAAQ,MAAM,KAAK;AAAA,IAC/B,CAAC;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"511b7cd31edca7d05c4852901896ddb82085d1f5"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Gse=function(){return s},s}Gse();function ti(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts",e="1506dd6f3469e4801b7fd940c02682bf4ad7b098",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts",statementMap:{0:{start:{line:4,column:22},end:{line:4,column:32}},1:{start:{line:5,column:20},end:{line:5,column:27}},2:{start:{line:6,column:20},end:{line:9,column:1}},3:{start:{line:10,column:24},end:{line:10,column:44}},4:{start:{line:12,column:2},end:{line:12,column:39}},5:{start:{line:15,column:17},end:{line:15,column:19}},6:{start:{line:16,column:2},end:{line:21,column:3}},7:{start:{line:16,column:15},end:{line:16,column:16}},8:{start:{line:17,column:16},end:{line:17,column:42}},9:{start:{line:18,column:4},end:{line:20,column:5}},10:{start:{line:19,column:6},end:{line:19,column:32}},11:{start:{line:22,column:2},end:{line:22,column:16}},12:{start:{line:25,column:16},end:{line:25,column:30}},13:{start:{line:26,column:2},end:{line:26,column:86}},14:{start:{line:29,column:2},end:{line:31,column:3}},15:{start:{line:30,column:4},end:{line:30,column:41}},16:{start:{line:32,column:16},end:{line:32,column:30}},17:{start:{line:33,column:18},end:{line:33,column:26}},18:{start:{line:34,column:2},end:{line:34,column:17}},19:{start:{line:37,column:2},end:{line:37,column:57}},20:{start:{line:47,column:4},end:{line:47,column:40}},21:{start:{line:51,column:4},end:{line:56,column:5}},22:{start:{line:51,column:17},end:{line:51,column:18}},23:{start:{line:52,column:18},end:{line:52,column:44}},24:{start:{line:53,column:6},end:{line:55,column:7}},25:{start:{line:54,column:8},end:{line:54,column:44}},26:{start:{line:60,column:4},end:{line:62,column:5}},27:{start:{line:61,column:6},end:{line:61,column:32}},28:{start:{line:63,column:20},end:{line:63,column:67}},29:{start:{line:64,column:22},end:{line:64,column:68}},30:{start:{line:65,column:4},end:{line:67,column:5}},31:{start:{line:66,column:6},end:{line:66,column:35}},32:{start:{line:68,column:4},end:{line:68,column:30}},33:{start:{line:72,column:4},end:{line:72,column:51}},34:{start:{line:73,column:16},end:{line:73,column:37}},35:{start:{line:74,column:19},end:{line:77,column:5}},36:{start:{line:75,column:6},end:{line:75,column:65}},37:{start:{line:76,column:6},end:{line:76,column:67}},38:{start:{line:78,column:4},end:{line:89,column:5}},39:{start:{line:79,column:6},end:{line:79,column:15}},40:{start:{line:81,column:6},end:{line:88,column:7}},41:{start:{line:84,column:8},end:{line:84,column:21}},42:{start:{line:85,column:8},end:{line:85,column:17}},43:{start:{line:87,column:8},end:{line:87,column:16}},44:{start:{line:90,column:4},end:{line:90,column:20}}},fnMap:{0:{name:"loadDefaultStyle",decl:{start:{line:11,column:16},end:{line:11,column:32}},loc:{start:{line:11,column:35},end:{line:13,column:1}},line:11},1:{name:"loadStoredStyles",decl:{start:{line:14,column:9},end:{line:14,column:25}},loc:{start:{line:14,column:28},end:{line:23,column:1}},line:14},2:{name:"isStyleKey",decl:{start:{line:24,column:9},end:{line:24,column:19}},loc:{start:{line:24,column:25},end:{line:27,column:1}},line:24},3:{name:"fromKey",decl:{start:{line:28,column:9},end:{line:28,column:16}},loc:{start:{line:28,column:22},end:{line:35,column:1}},line:28},4:{name:"styleKey",decl:{start:{line:36,column:9},end:{line:36,column:17}},loc:{start:{line:36,column:27},end:{line:38,column:1}},line:36},5:{name:"(anonymous_5)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:16},end:{line:48,column:3}},line:46},6:{name:"(anonymous_6)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:10},end:{line:57,column:3}},line:50},7:{name:"(anonymous_7)",decl:{start:{line:59,column:2},end:{line:59,column:3}},loc:{start:{line:59,column:25},end:{line:69,column:3}},line:59},8:{name:"(anonymous_8)",decl:{start:{line:71,column:2},end:{line:71,column:3}},loc:{start:{line:71,column:17},end:{line:91,column:3}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:74,column:19},end:{line:74,column:20}},loc:{start:{line:74,column:25},end:{line:77,column:5}},line:74}},branchMap:{0:{loc:{start:{line:18,column:4},end:{line:20,column:5}},type:"if",locations:[{start:{line:18,column:4},end:{line:20,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},1:{loc:{start:{line:26,column:9},end:{line:26,column:85}},type:"binary-expr",locations:[{start:{line:26,column:9},end:{line:26,column:27}},{start:{line:26,column:31},end:{line:26,column:57}},{start:{line:26,column:61},end:{line:26,column:85}}],line:26},2:{loc:{start:{line:29,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:2},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29},3:{loc:{start:{line:53,column:6},end:{line:55,column:7}},type:"if",locations:[{start:{line:53,column:6},end:{line:55,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},4:{loc:{start:{line:60,column:4},end:{line:62,column:5}},type:"if",locations:[{start:{line:60,column:4},end:{line:62,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},5:{loc:{start:{line:65,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:67,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},6:{loc:{start:{line:81,column:6},end:{line:88,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:88,column:7}},{start:{line:86,column:13},end:{line:88,column:7}}],line:81},7:{loc:{start:{line:81,column:10},end:{line:83,column:81}},type:"binary-expr",locations:[{start:{line:81,column:10},end:{line:81,column:35}},{start:{line:81,column:40},end:{line:81,column:53}},{start:{line:82,column:6},end:{line:82,column:21}},{start:{line:83,column:6},end:{line:83,column:37}},{start:{line:83,column:41},end:{line:83,column:80}}],line:81}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,oBAAmB;AAC3B,OAAO,mBAAmB;AAG1B,MAAM,gBAAgB;AACtB,MAAM,cAAc;AACpB,MAAM,cAAc;AAAA,EAClB,QAAQ,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AAAA,EAChD,aAAa,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AACvD;AAEA,MAAM,kBAAkB,cAAc,CAAC,EAAE;AAGlC,gBAAS,mBAAsD;AACpE,SAAO,aAAa,eAAe;AACrC;AAGA,SAAS,mBAAmB;AAC1B,QAAM,SAAS,CAAC;AAChB,WAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,UAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,QAAG,WAAW,GAAI,GAAG;AACnB,aAAO,KAAK,QAAQ,GAAI,CAAC;AAAA,IAC3B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,WAAW,KAAa;AAC/B,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,SAAO,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM,iBAAiB,MAAM,CAAC,MAAM;AAC1E;AAGA,SAAS,QAAQ,KAAa;AAC5B,MAAG,CAAC,WAAW,GAAG,GAAG;AACnB,UAAM;AAAA,EACR;AAEA,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,QAAM,UAAU,MAAM,CAAC;AACvB,SAAO;AACT;AAGA,SAAS,SAAS,SAAiB;AACjC,SAAO,CAAC,eAAe,aAAa,OAAO,EAAE,KAAK,GAAG;AACvD;AAGO,aAAM,WAAkC;AAAA;AAAA;AAAA;AAAA,EAI7C;AAAA;AAAA;AAAA,EAIA,cAAc;AACZ,SAAK,YAAY,iBAAiB;AAAA,EACpC;AAAA;AAAA,EAGA,QAAQ;AACN,aAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,YAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,UAAG,IAAI,WAAW,aAAa,GAAG;AAChC,eAAO,aAAa,WAAW,GAAG;AAAA,MACpC;AAAA,IACF;AAAA,EACF;AAAA;AAAA,EAGA,MAAM,iBAAoD;AACxD,QAAG,KAAK,UAAU,WAAW,GAAG;AAC9B,aAAO,iBAAiB;AAAA,IAC1B;AACA,UAAM,UAAU,OAAO,aAAa,QAAQ,YAAY,MAAM;AAC9D,UAAM,YAAY,OAAO,aAAa,QAAQ,SAAS,OAAO,CAAC;AAE/D,QAAI,WAAW;AACb,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AACA,WAAO,iBAAiB;AAAA,EAC1B;AAAA;AAAA,EAGA,KAAK,UAAoC;AACvC,eAAW,MAAM,oBAAoB,QAAQ;AAC7C,UAAM,MAAM,SAAS,SAAS,EAAE;AAEhC,UAAM,SAAS,MAAM;AACnB,aAAO,aAAa,QAAQ,KAAK,KAAK,UAAU,QAAQ,CAAC;AACzD,aAAO,aAAa,QAAQ,YAAY,QAAQ,SAAS,EAAE;AAAA,IAC7D;AAEA,QAAI;AACF,aAAO;AAAA,IACT,SAAS,GAAG;AAEV,UAAI,aAAa,iBACf,EAAE,SAAS;AAAA,MACX,EAAE,SAAS;AAAA,MACX,EAAE,SAAS,wBACX,EAAE,SAAS,+BACV;AACD,aAAK,MAAM;AACX,eAAO;AAAA,MACT,OAAO;AACL,cAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1506dd6f3469e4801b7fd940c02682bf4ad7b098"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ti=function(){return s},s}ti();const $B=(ti().s[0]++,"maputnik"),Wse=(ti().s[1]++,"style"),fH=(ti().s[2]++,{latest:[$B,"latest_style"].join(":")}),CPe=(ti().s[3]++,Kse[0].url);function pH(){return ti().f[0]++,ti().s[4]++,Sse(CPe)}function _Pe(){ti().f[1]++;const n=(ti().s[5]++,[]);ti().s[6]++;for(let e=(ti().s[7]++,0);e<window.localStorage.length;e++){const t=(ti().s[8]++,window.localStorage.key(e));ti().s[9]++,Qse(t)?(ti().b[0][0]++,ti().s[10]++,n.push(xPe(t))):ti().b[0][1]++}return ti().s[11]++,n}function Qse(n){ti().f[2]++;const e=(ti().s[12]++,n.split(":"));return ti().s[13]++,ti().b[1][0]++,e.length===3&&(ti().b[1][1]++,e[0]===$B)&&(ti().b[1][2]++,e[1]===Wse)}function xPe(n){if(ti().f[3]++,ti().s[14]++,Qse(n))ti().b[2][1]++;else throw ti().b[2][0]++,ti().s[15]++,"Key is not a valid style key";const e=(ti().s[16]++,n.split(":")),t=(ti().s[17]++,e[2]);return ti().s[18]++,t}function mH(n){return ti().f[4]++,ti().s[19]++,[$B,Wse,n].join(":")}class MPe{mapStyles;constructor(){ti().f[5]++,ti().s[20]++,this.mapStyles=_Pe()}purge(){ti().f[6]++,ti().s[21]++;for(let e=(ti().s[22]++,0);e<window.localStorage.length;e++){const t=(ti().s[23]++,window.localStorage.key(e));ti().s[24]++,t.startsWith($B)?(ti().b[3][0]++,ti().s[25]++,window.localStorage.removeItem(t)):ti().b[3][1]++}}async getLatestStyle(){if(ti().f[7]++,ti().s[26]++,this.mapStyles.length===0)return ti().b[4][0]++,ti().s[27]++,pH();ti().b[4][1]++;const e=(ti().s[28]++,window.localStorage.getItem(fH.latest)),t=(ti().s[29]++,window.localStorage.getItem(mH(e)));return ti().s[30]++,t?(ti().b[5][0]++,ti().s[31]++,JSON.parse(t)):(ti().b[5][1]++,ti().s[32]++,pH())}save(e){ti().f[8]++,ti().s[33]++,e=md.ensureStyleValidity(e);const t=(ti().s[34]++,mH(e.id));ti().s[35]++;const i=()=>{ti().f[9]++,ti().s[36]++,window.localStorage.setItem(t,JSON.stringify(e)),ti().s[37]++,window.localStorage.setItem(fH.latest,e.id)};ti().s[38]++;try{ti().s[39]++,i()}catch(r){if(ti().s[40]++,ti().b[7][0]++,r instanceof DOMException&&(ti().b[7][1]++,r.code===22||(ti().b[7][2]++,r.code===1014)||(ti().b[7][3]++,r.name==="QuotaExceededError")||(ti().b[7][4]++,r.name==="NS_ERROR_DOM_QUOTA_REACHED")))ti().b[6][0]++,ti().s[41]++,this.purge(),ti().s[42]++,i();else throw ti().b[6][1]++,ti().s[43]++,r}return ti().s[44]++,e}}function yh(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts",e="2de8d55bfe17551e08818e39ce7b23b7139f970e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:65}},1:{start:{line:6,column:22},end:{line:6,column:118}},2:{start:{line:8,column:2},end:{line:20,column:3}},3:{start:{line:9,column:26},end:{line:11,column:6}},4:{start:{line:10,column:40},end:{line:10,column:81}},5:{start:{line:12,column:4},end:{line:17,column:5}},6:{start:{line:13,column:6},end:{line:13,column:33}},7:{start:{line:14,column:6},end:{line:14,column:33}},8:{start:{line:16,column:6},end:{line:16,column:36}},9:{start:{line:19,column:4},end:{line:19,column:34}},10:{start:{line:21,column:22},end:{line:21,column:100}},11:{start:{line:22,column:2},end:{line:22,column:66}},12:{start:{line:23,column:2},end:{line:23,column:20}}},fnMap:{0:{name:"createStyleStore",decl:{start:{line:4,column:22},end:{line:4,column:38}},loc:{start:{line:4,column:55},end:{line:24,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:10,column:26},end:{line:10,column:27}},loc:{start:{line:10,column:40},end:{line:10,column:81}},line:10}},branchMap:{0:{loc:{start:{line:6,column:22},end:{line:6,column:118}},type:"binary-expr",locations:[{start:{line:6,column:22},end:{line:6,column:30}},{start:{line:6,column:34},end:{line:6,column:118}}],line:6},1:{loc:{start:{line:8,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:8,column:2},end:{line:20,column:3}},{start:{line:18,column:9},end:{line:20,column:3}}],line:8},2:{loc:{start:{line:21,column:22},end:{line:21,column:100}},type:"cond-expr",locations:[{start:{line:21,column:36},end:{line:21,column:64}},{start:{line:21,column:67},end:{line:21,column:100}}],line:21}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts"],names:[],mappings:"AAEA,SAAS,8CAA8C,oBAAoB;AAC3E,SAAS,qBAAqB;AAC9B,SAAS,kBAAkB;AAE3B,sBAAsB,iBAAiB,gBAA8D;AACnG,QAAM,WAAW,6CAA6C;AAC9D,QAAM,cAAc,YAAY,OAAO,QAAQ,0BAA0B,WAAW,+BAA+B;AACnH,MAAI;AACJ,MAAI,OAAoD;AACtD,UAAM,gBAAgB,IAAI,cAAc;AAAA,MACtC,oBAAoB,CAAA,aAAY,eAAe,UAAU,EAAC,MAAM,MAAK,CAAC;AAAA,IACxE,CAAC;AACD,QAAI;AACF,YAAM,cAAc,KAAK;AACzB,mBAAa;AAAA,IACf,QAAQ;AACN,mBAAa,IAAI,WAAW;AAAA,IAC9B;AAAA,EACF,OAAO;AACL,iBAAa,IAAI,WAAW;AAAA,EAC9B;AACA,QAAM,cAAc,cAAc,MAAM,aAAa,QAAQ,IAAI,MAAM,WAAW,eAAe;AACjG,iBAAe,aAAa,EAAC,aAAa,MAAM,MAAM,MAAK,CAAC;AAC5D,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2de8d55bfe17551e08818e39ce7b23b7139f970e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return yh=function(){return s},s}yh();async function wPe(n){yh().f[0]++;const e=(yh().s[0]++,pDe()),t=(yh().s[1]++,yh().b[0][0]++,e&&(yh().b[0][1]++,window.confirm("Load style from URL: "+e+" and discard current changes?")));let i;yh().s[2]++,yh().b[1][1]++,yh().s[9]++,i=new MPe;const r=(yh().s[10]++,t?(yh().b[2][0]++,await Sse(e)):(yh().b[2][1]++,await i.getLatestStyle()));return yh().s[11]++,n(r,{initialLoad:!0,save:!1}),yh().s[12]++,i}function Ma(){var n="/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",e="2443d70bd38cc3b176918d5f84a8a7d35a1ef2fe",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:38}},1:{start:{line:6,column:4},end:{line:6,column:50}},2:{start:{line:9,column:4},end:{line:9,column:53}},3:{start:{line:12,column:4},end:{line:12,column:43}},4:{start:{line:15,column:4},end:{line:15,column:66}},5:{start:{line:16,column:4},end:{line:16,column:34}},6:{start:{line:17,column:4},end:{line:17,column:22}},7:{start:{line:20,column:4},end:{line:22,column:5}},8:{start:{line:21,column:6},end:{line:21,column:24}},9:{start:{line:23,column:4},end:{line:23,column:24}},10:{start:{line:26,column:4},end:{line:28,column:5}},11:{start:{line:27,column:6},end:{line:27,column:24}},12:{start:{line:29,column:4},end:{line:29,column:24}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:37},end:{line:7,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:10,column:3}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:16},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:24},end:{line:18,column:3}},line:14},4:{name:"(anonymous_4)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:9},end:{line:24,column:3}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:25,column:2},end:{line:25,column:3}},loc:{start:{line:25,column:9},end:{line:30,column:3}},line:25}},branchMap:{0:{loc:{start:{line:4,column:14},end:{line:4,column:35}},type:"default-arg",locations:[{start:{line:4,column:33},end:{line:4,column:35}}],line:4},1:{loc:{start:{line:20,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:20,column:4},end:{line:22,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},2:{loc:{start:{line:26,column:4},end:{line:28,column:5}},type:"if",locations:[{start:{line:26,column:4},end:{line:28,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/revisions.ts"],names:[],mappings:"AAEO,aAAM,cAAc;AAAA,EACzB;AAAA,EACA;AAAA,EAGA,YAAY,mBAAiB,CAAC,GAAG;AAC/B,SAAK,YAAY;AACjB,SAAK,aAAa,iBAAiB,SAAS;AAAA,EAC9C;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,UAAU,KAAK,UAAU,SAAS,CAAC;AAAA,EACjD;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,UAAU,KAAK,UAAU;AAAA,EACvC;AAAA,EAEA,YAAY,UAAoC;AAG9C,SAAK,YAAY,KAAK,UAAU,MAAM,GAAG,KAAK,aAAa,CAAC;AAE5D,SAAK,UAAU,KAAK,QAAQ;AAC5B,SAAK;AAAA,EAEP;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,GAAG;AACtB,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,KAAK,UAAU,SAAS,GAAG;AAC9C,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2443d70bd38cc3b176918d5f84a8a7d35a1ef2fe"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ma=function(){return s},s}Ma();class SPe{revisions;currentIdx;constructor(e=(Ma().b[0][0]++,[])){Ma().f[0]++,Ma().s[0]++,this.revisions=e,Ma().s[1]++,this.currentIdx=e.length-1}get latest(){return Ma().f[1]++,Ma().s[2]++,this.revisions[this.revisions.length-1]}get current(){return Ma().f[2]++,Ma().s[3]++,this.revisions[this.currentIdx]}addRevision(e){Ma().f[3]++,Ma().s[4]++,this.revisions=this.revisions.slice(0,this.currentIdx+1),Ma().s[5]++,this.revisions.push(e),Ma().s[6]++,this.currentIdx++}undo(){return Ma().f[4]++,Ma().s[7]++,this.currentIdx>0?(Ma().b[1][0]++,Ma().s[8]++,this.currentIdx--):Ma().b[1][1]++,Ma().s[9]++,this.current}redo(){return Ma().f[5]++,Ma().s[10]++,this.currentIdx<this.revisions.length-1?(Ma().b[2][0]++,Ma().s[11]++,this.currentIdx++):Ma().b[2][1]++,Ma().s[12]++,this.current}}var a9,gH;function EPe(){if(gH)return a9;gH=1;var n="Expected a function",e=NaN,t="[object Symbol]",i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,c=typeof window=="object"&&window&&window.Object===Object&&window,f=typeof self=="object"&&self&&self.Object===Object&&self,y=c||f||Function("return this")(),_=Object.prototype,E=_.toString,I=Math.max,P=Math.min,K=function(){return y.Date.now()};function z(X,W,se){var ue,ve,ye,Ee,_e,Be,Fe=0,Se=!1,qe=!1,ut=!0;if(typeof X!="function")throw new TypeError(n);W=ee(W)||0,V(se)&&(Se=!!se.leading,qe="maxWait"in se,ye=qe?I(ee(se.maxWait)||0,W):ye,ut="trailing"in se?!!se.trailing:ut);function ht(ke){var Oe=ue,we=ve;return ue=ve=void 0,Fe=ke,Ee=X.apply(we,Oe),Ee}function De(ke){return Fe=ke,_e=setTimeout(Te,W),Se?ht(ke):Ee}function Ie(ke){var Oe=ke-Be,we=ke-Fe,Ye=W-Oe;return qe?P(Ye,ye-we):Ye}function ze(ke){var Oe=ke-Be,we=ke-Fe;return Be===void 0||Oe>=W||Oe<0||qe&&we>=ye}function Te(){var ke=K();if(ze(ke))return vt(ke);_e=setTimeout(Te,Ie(ke))}function vt(ke){return _e=void 0,ut&&ue?ht(ke):(ue=ve=void 0,Ee)}function st(){_e!==void 0&&clearTimeout(_e),Fe=0,ue=Be=ve=_e=void 0}function Et(){return _e===void 0?Ee:vt(K())}function Pt(){var ke=K(),Oe=ze(ke);if(ue=arguments,ve=this,Be=ke,Oe){if(_e===void 0)return De(Be);if(qe)return _e=setTimeout(Te,W),ht(Be)}return _e===void 0&&(_e=setTimeout(Te,W)),Ee}return Pt.cancel=st,Pt.flush=Et,Pt}function Q(X,W,se){var ue=!0,ve=!0;if(typeof X!="function")throw new TypeError(n);return V(se)&&(ue="leading"in se?!!se.leading:ue,ve="trailing"in se?!!se.trailing:ve),z(X,W,{leading:ue,maxWait:W,trailing:ve})}function V(X){var W=typeof X;return!!X&&(W=="object"||W=="function")}function $(X){return!!X&&typeof X=="object"}function Z(X){return typeof X=="symbol"||$(X)&&E.call(X)==t}function ee(X){if(typeof X=="number")return X;if(Z(X))return e;if(V(X)){var W=typeof X.valueOf=="function"?X.valueOf():X;X=V(W)?W+"":W}if(typeof X!="string")return X===0?X:+X;X=X.replace(i,"");var se=o.test(X);return se||s.test(X)?a(X.slice(2),se?2:8):r.test(X)?e:+X}return a9=Q,a9}var BPe=EPe();const OPe=Zl(BPe);var V3={exports:{}};V3.exports;var yH;function IPe(){return yH||(yH=1,(function(n,e){var t=200,i="__lodash_hash_undefined__",r=1,o=2,s=9007199254740991,a="[object Arguments]",c="[object Array]",f="[object AsyncFunction]",y="[object Boolean]",_="[object Date]",E="[object Error]",I="[object Function]",P="[object GeneratorFunction]",K="[object Map]",z="[object Number]",Q="[object Null]",V="[object Object]",$="[object Promise]",Z="[object Proxy]",ee="[object RegExp]",X="[object Set]",W="[object String]",se="[object Symbol]",ue="[object Undefined]",ve="[object WeakMap]",ye="[object ArrayBuffer]",Ee="[object DataView]",_e="[object Float32Array]",Be="[object Float64Array]",Fe="[object Int8Array]",Se="[object Int16Array]",qe="[object Int32Array]",ut="[object Uint8Array]",ht="[object Uint8ClampedArray]",De="[object Uint16Array]",Ie="[object Uint32Array]",ze=/[\\^$.*+?()[\]{}|]/g,Te=/^\[object .+?Constructor\]$/,vt=/^(?:0|[1-9]\d*)$/,st={};st[_e]=st[Be]=st[Fe]=st[Se]=st[qe]=st[ut]=st[ht]=st[De]=st[Ie]=!0,st[a]=st[c]=st[ye]=st[y]=st[Ee]=st[_]=st[E]=st[I]=st[K]=st[z]=st[V]=st[ee]=st[X]=st[W]=st[ve]=!1;var Et=typeof window=="object"&&window&&window.Object===Object&&window,Pt=typeof self=="object"&&self&&self.Object===Object&&self,ke=Et||Pt||Function("return this")(),Oe=e&&!e.nodeType&&e,we=Oe&&!0&&n&&!n.nodeType&&n,Ye=we&&we.exports===Oe,ft=Ye&&Et.process,dt=(function(){try{return ft&&ft.binding&&ft.binding("util")}catch{}})(),gt=dt&&dt.isTypedArray;function Lt(J,ge){for(var Ge=-1,bt=J==null?0:J.length,bn=0,Xt=[];++Ge<bt;){var hi=J[Ge];ge(hi,Ge,J)&&(Xt[bn++]=hi)}return Xt}function Tt(J,ge){for(var Ge=-1,bt=ge.length,bn=J.length;++Ge<bt;)J[bn+Ge]=ge[Ge];return J}function Zt(J,ge){for(var Ge=-1,bt=J==null?0:J.length;++Ge<bt;)if(ge(J[Ge],Ge,J))return!0;return!1}function Fn(J,ge){for(var Ge=-1,bt=Array(J);++Ge<J;)bt[Ge]=ge(Ge);return bt}function Ln(J){return function(ge){return J(ge)}}function fi(J,ge){return J.has(ge)}function Rn(J,ge){return J?.[ge]}function Dn(J){var ge=-1,Ge=Array(J.size);return J.forEach(function(bt,bn){Ge[++ge]=[bn,bt]}),Ge}function wn(J,ge){return function(Ge){return J(ge(Ge))}}function qn(J){var ge=-1,Ge=Array(J.size);return J.forEach(function(bt){Ge[++ge]=bt}),Ge}var En=Array.prototype,wt=Function.prototype,be=Object.prototype,re=ke["__core-js_shared__"],ce=wt.toString,Pe=be.hasOwnProperty,tt=(function(){var J=/[^.]+$/.exec(re&&re.keys&&re.keys.IE_PROTO||"");return J?"Symbol(src)_1."+J:""})(),xt=be.toString,It=RegExp("^"+ce.call(Pe).replace(ze,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_n=Ye?ke.Buffer:void 0,Xe=ke.Symbol,ae=ke.Uint8Array,he=be.propertyIsEnumerable,C=En.splice,Ke=Xe?Xe.toStringTag:void 0,$e=Object.getOwnPropertySymbols,rt=_n?_n.isBuffer:void 0,Re=wn(Object.keys,Object),at=So(ke,"DataView"),St=So(ke,"Map"),Bt=So(ke,"Promise"),kt=So(ke,"Set"),sn=So(ke,"WeakMap"),Tn=So(Object,"create"),Yn=Vr(at),vi=Vr(St),ui=Vr(Bt),Zn=Vr(kt),Mi=Vr(sn),nn=Xe?Xe.prototype:void 0,$i=nn?nn.valueOf:void 0;function bi(J){var ge=-1,Ge=J==null?0:J.length;for(this.clear();++ge<Ge;){var bt=J[ge];this.set(bt[0],bt[1])}}function to(){this.__data__=Tn?Tn(null):{},this.size=0}function tr(J){var ge=this.has(J)&&delete this.__data__[J];return this.size-=ge?1:0,ge}function an(J){var ge=this.__data__;if(Tn){var Ge=ge[J];return Ge===i?void 0:Ge}return Pe.call(ge,J)?ge[J]:void 0}function Kn(J){var ge=this.__data__;return Tn?ge[J]!==void 0:Pe.call(ge,J)}function ii(J,ge){var Ge=this.__data__;return this.size+=this.has(J)?0:1,Ge[J]=Tn&&ge===void 0?i:ge,this}bi.prototype.clear=to,bi.prototype.delete=tr,bi.prototype.get=an,bi.prototype.has=Kn,bi.prototype.set=ii;function nr(J){var ge=-1,Ge=J==null?0:J.length;for(this.clear();++ge<Ge;){var bt=J[ge];this.set(bt[0],bt[1])}}function Su(){this.__data__=[],this.size=0}function Ms(J){var ge=this.__data__,Ge=Jo(ge,J);if(Ge<0)return!1;var bt=ge.length-1;return Ge==bt?ge.pop():C.call(ge,Ge,1),--this.size,!0}function Si(J){var ge=this.__data__,Ge=Jo(ge,J);return Ge<0?void 0:ge[Ge][1]}function Ba(J){return Jo(this.__data__,J)>-1}function Xl(J,ge){var Ge=this.__data__,bt=Jo(Ge,J);return bt<0?(++this.size,Ge.push([J,ge])):Ge[bt][1]=ge,this}nr.prototype.clear=Su,nr.prototype.delete=Ms,nr.prototype.get=Si,nr.prototype.has=Ba,nr.prototype.set=Xl;function Yr(J){var ge=-1,Ge=J==null?0:J.length;for(this.clear();++ge<Ge;){var bt=J[ge];this.set(bt[0],bt[1])}}function ls(){this.size=0,this.__data__={hash:new bi,map:new(St||nr),string:new bi}}function $a(J){var ge=ws(this,J).delete(J);return this.size-=ge?1:0,ge}function ma(J){return ws(this,J).get(J)}function wo(J){return ws(this,J).has(J)}function ga(J,ge){var Ge=ws(this,J),bt=Ge.size;return Ge.set(J,ge),this.size+=Ge.size==bt?0:1,this}Yr.prototype.clear=ls,Yr.prototype.delete=$a,Yr.prototype.get=ma,Yr.prototype.has=wo,Yr.prototype.set=ga;function mr(J){var ge=-1,Ge=J==null?0:J.length;for(this.__data__=new Yr;++ge<Ge;)this.add(J[ge])}function Sl(J){return this.__data__.set(J,i),this}function us(J){return this.__data__.has(J)}mr.prototype.add=mr.prototype.push=Sl,mr.prototype.has=us;function Xo(J){var ge=this.__data__=new nr(J);this.size=ge.size}function no(){this.__data__=new nr,this.size=0}function El(J){var ge=this.__data__,Ge=ge.delete(J);return this.size=ge.size,Ge}function YA(J){return this.__data__.get(J)}function Bl(J){return this.__data__.has(J)}function Eu(J,ge){var Ge=this.__data__;if(Ge instanceof nr){var bt=Ge.__data__;if(!St||bt.length<t-1)return bt.push([J,ge]),this.size=++Ge.size,this;Ge=this.__data__=new Yr(bt)}return Ge.set(J,ge),this.size=Ge.size,this}Xo.prototype.clear=no,Xo.prototype.delete=El,Xo.prototype.get=YA,Xo.prototype.has=Bl,Xo.prototype.set=Eu;function na(J,ge){var Ge=io(J),bt=!Ge&&Eo(J),bn=!Ge&&!bt&&gr(J),Xt=!Ge&&!bt&&!bn&&Us(J),hi=Ge||bt||bn||Xt,Pn=hi?Fn(J.length,String):[],Ci=Pn.length;for(var ni in J)Pe.call(J,ni)&&!(hi&&(ni=="length"||bn&&(ni=="offset"||ni=="parent")||Xt&&(ni=="buffer"||ni=="byteLength"||ni=="byteOffset")||Ha(ni,Ci)))&&Pn.push(ni);return Pn}function Jo(J,ge){for(var Ge=J.length;Ge--;)if(yo(J[Ge][0],ge))return Ge;return-1}function Bu(J,ge,Ge){var bt=ge(J);return io(J)?bt:Tt(bt,Ge(J))}function Ol(J){return J==null?J===void 0?ue:Q:Ke&&Ke in Object(J)?Ps(J):zi(J)}function Ou(J){return Ls(J)&&Ol(J)==a}function Jl(J,ge,Ge,bt,bn){return J===ge?!0:J==null||ge==null||!Ls(J)&&!Ls(ge)?J!==J&&ge!==ge:Zu(J,ge,Ge,bt,Jl,bn)}function Zu(J,ge,Ge,bt,bn,Xt){var hi=io(J),Pn=io(ge),Ci=hi?c:Ws(J),ni=Pn?c:Ws(ge);Ci=Ci==a?V:Ci,ni=ni==a?V:ni;var Hi=Ci==V,xr=ni==V,ir=Ci==ni;if(ir&&gr(J)){if(!gr(ge))return!1;hi=!0,Hi=!1}if(ir&&!Hi)return Xt||(Xt=new Xo),hi||Us(J)?Il(J,ge,Ge,bt,bn,Xt):Oc(J,ge,Ci,Ge,bt,bn,Xt);if(!(Ge&r)){var Zi=Hi&&Pe.call(J,"__wrapped__"),Or=xr&&Pe.call(ge,"__wrapped__");if(Zi||Or){var Ks=Zi?J.value():J,Oo=Or?ge.value():ge;return Xt||(Xt=new Xo),bn(Ks,Oo,Ge,bt,Xt)}}return ir?(Xt||(Xt=new Xo),eu(J,ge,Ge,bt,bn,Xt)):!1}function VA(J){if(!es(J)||Yi(J))return!1;var ge=Bo(J)?It:Te;return ge.test(Vr(J))}function ia(J){return Ls(J)&&po(J.length)&&!!st[Ol(J)]}function Bc(J){if(!Qs(J))return Re(J);var ge=[];for(var Ge in Object(J))Pe.call(J,Ge)&&Ge!="constructor"&&ge.push(Ge);return ge}function Il(J,ge,Ge,bt,bn,Xt){var hi=Ge&r,Pn=J.length,Ci=ge.length;if(Pn!=Ci&&!(hi&&Ci>Pn))return!1;var ni=Xt.get(J);if(ni&&Xt.get(ge))return ni==ge;var Hi=-1,xr=!0,ir=Ge&o?new mr:void 0;for(Xt.set(J,ge),Xt.set(ge,J);++Hi<Pn;){var Zi=J[Hi],Or=ge[Hi];if(bt)var Ks=hi?bt(Or,Zi,Hi,ge,J,Xt):bt(Zi,Or,Hi,J,ge,Xt);if(Ks!==void 0){if(Ks)continue;xr=!1;break}if(ir){if(!Zt(ge,function(Oo,Oa){if(!fi(ir,Oa)&&(Zi===Oo||bn(Zi,Oo,Ge,bt,Xt)))return ir.push(Oa)})){xr=!1;break}}else if(!(Zi===Or||bn(Zi,Or,Ge,bt,Xt))){xr=!1;break}}return Xt.delete(J),Xt.delete(ge),xr}function Oc(J,ge,Ge,bt,bn,Xt,hi){switch(Ge){case Ee:if(J.byteLength!=ge.byteLength||J.byteOffset!=ge.byteOffset)return!1;J=J.buffer,ge=ge.buffer;case ye:return!(J.byteLength!=ge.byteLength||!Xt(new ae(J),new ae(ge)));case y:case _:case z:return yo(+J,+ge);case E:return J.name==ge.name&&J.message==ge.message;case ee:case W:return J==ge+"";case K:var Pn=Dn;case X:var Ci=bt&r;if(Pn||(Pn=qn),J.size!=ge.size&&!Ci)return!1;var ni=hi.get(J);if(ni)return ni==ge;bt|=o,hi.set(J,ge);var Hi=Il(Pn(J),Pn(ge),bt,bn,Xt,hi);return hi.delete(J),Hi;case se:if($i)return $i.call(J)==$i.call(ge)}return!1}function eu(J,ge,Ge,bt,bn,Xt){var hi=Ge&r,Pn=Rs(J),Ci=Pn.length,ni=Rs(ge),Hi=ni.length;if(Ci!=Hi&&!hi)return!1;for(var xr=Ci;xr--;){var ir=Pn[xr];if(!(hi?ir in ge:Pe.call(ge,ir)))return!1}var Zi=Xt.get(J);if(Zi&&Xt.get(ge))return Zi==ge;var Or=!0;Xt.set(J,ge),Xt.set(ge,J);for(var Ks=hi;++xr<Ci;){ir=Pn[xr];var Oo=J[ir],Oa=ge[ir];if(bt)var Za=hi?bt(Oa,Oo,ir,ge,J,Xt):bt(Oo,Oa,ir,J,ge,Xt);if(!(Za===void 0?Oo===Oa||bn(Oo,Oa,Ge,bt,Xt):Za)){Or=!1;break}Ks||(Ks=ir=="constructor")}if(Or&&!Ks){var Uo=J.constructor,ts=ge.constructor;Uo!=ts&&"constructor"in J&&"constructor"in ge&&!(typeof Uo=="function"&&Uo instanceof Uo&&typeof ts=="function"&&ts instanceof ts)&&(Or=!1)}return Xt.delete(J),Xt.delete(ge),Or}function Rs(J){return Bu(J,Rr,iA)}function ws(J,ge){var Ge=J.__data__;return tu(ge)?Ge[typeof ge=="string"?"string":"hash"]:Ge.map}function So(J,ge){var Ge=Rn(J,ge);return VA(Ge)?Ge:void 0}function Ps(J){var ge=Pe.call(J,Ke),Ge=J[Ke];try{J[Ke]=void 0;var bt=!0}catch{}var bn=xt.call(J);return bt&&(ge?J[Ke]=Ge:delete J[Ke]),bn}var iA=$e?function(J){return J==null?[]:(J=Object(J),Lt($e(J),function(ge){return he.call(J,ge)}))}:_r,Ws=Ol;(at&&Ws(new at(new ArrayBuffer(1)))!=Ee||St&&Ws(new St)!=K||Bt&&Ws(Bt.resolve())!=$||kt&&Ws(new kt)!=X||sn&&Ws(new sn)!=ve)&&(Ws=function(J){var ge=Ol(J),Ge=ge==V?J.constructor:void 0,bt=Ge?Vr(Ge):"";if(bt)switch(bt){case Yn:return Ee;case vi:return K;case ui:return $;case Zn:return X;case Mi:return ve}return ge});function Ha(J,ge){return ge=ge??s,!!ge&&(typeof J=="number"||vt.test(J))&&J>-1&&J%1==0&&J<ge}function tu(J){var ge=typeof J;return ge=="string"||ge=="number"||ge=="symbol"||ge=="boolean"?J!=="__proto__":J===null}function Yi(J){return!!tt&&tt in J}function Qs(J){var ge=J&&J.constructor,Ge=typeof ge=="function"&&ge.prototype||be;return J===Ge}function zi(J){return xt.call(J)}function Vr(J){if(J!=null){try{return ce.call(J)}catch{}try{return J+""}catch{}}return""}function yo(J,ge){return J===ge||J!==J&&ge!==ge}var Eo=Ou((function(){return arguments})())?Ou:function(J){return Ls(J)&&Pe.call(J,"callee")&&!he.call(J,"callee")},io=Array.isArray;function Lo(J){return J!=null&&po(J.length)&&!Bo(J)}var gr=rt||yr;function Ic(J,ge){return Jl(J,ge)}function Bo(J){if(!es(J))return!1;var ge=Ol(J);return ge==I||ge==P||ge==f||ge==Z}function po(J){return typeof J=="number"&&J>-1&&J%1==0&&J<=s}function es(J){var ge=typeof J;return J!=null&&(ge=="object"||ge=="function")}function Ls(J){return J!=null&&typeof J=="object"}var Us=gt?Ln(gt):ia;function Rr(J){return Lo(J)?na(J):Bc(J)}function _r(){return[]}function yr(){return!1}n.exports=Ic})(V3,V3.exports)),V3.exports}var TPe=IPe();const XR=Zl(TPe);function Qi(){var n="/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",e="f697c030ede0efa960b33f85ca9652efe882c805",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",statementMap:{0:{start:{line:10,column:4},end:{line:11,column:7}},1:{start:{line:12,column:4},end:{line:13,column:7}},2:{start:{line:14,column:4},end:{line:14,column:23}},3:{start:{line:15,column:4},end:{line:15,column:28}},4:{start:{line:16,column:4},end:{line:16,column:90}},5:{start:{line:19,column:28},end:{line:19,column:48}},6:{start:{line:20,column:4},end:{line:22,column:5}},7:{start:{line:21,column:6},end:{line:21,column:88}},8:{start:{line:24,column:4},end:{line:26,column:5}},9:{start:{line:25,column:6},end:{line:25,column:42}},10:{start:{line:27,column:4},end:{line:27,column:48}},11:{start:{line:30,column:33},end:{line:30,column:58}},12:{start:{line:31,column:4},end:{line:44,column:7}},13:{start:{line:32,column:6},end:{line:43,column:9}},14:{start:{line:33,column:32},end:{line:33,column:71}},15:{start:{line:34,column:23},end:{line:34,column:53}},16:{start:{line:35,column:8},end:{line:41,column:11}},17:{start:{line:36,column:10},end:{line:40,column:13}},18:{start:{line:37,column:40},end:{line:37,column:75}},19:{start:{line:38,column:12},end:{line:38,column:71}},20:{start:{line:39,column:12},end:{line:39,column:64}},21:{start:{line:42,column:8},end:{line:42,column:60}},22:{start:{line:45,column:4},end:{line:47,column:5}},23:{start:{line:46,column:6},end:{line:46,column:52}},24:{start:{line:51,column:4},end:{line:51,column:25}},25:{start:{line:54,column:4},end:{line:54,column:30}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:25},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:52},end:{line:10,column:53}},loc:{start:{line:10,column:58},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:62},end:{line:12,column:63}},loc:{start:{line:12,column:68},end:{line:13,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:18},end:{line:28,column:3}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:32},end:{line:48,column:3}},line:29},5:{name:"(anonymous_5)",decl:{start:{line:31,column:39},end:{line:31,column:40}},loc:{start:{line:31,column:53},end:{line:44,column:5}},line:31},6:{name:"(anonymous_6)",decl:{start:{line:32,column:46},end:{line:32,column:47}},loc:{start:{line:32,column:65},end:{line:43,column:7}},line:32},7:{name:"(anonymous_7)",decl:{start:{line:35,column:58},end:{line:35,column:59}},loc:{start:{line:35,column:71},end:{line:41,column:9}},line:35},8:{name:"(anonymous_8)",decl:{start:{line:36,column:50},end:{line:36,column:51}},loc:{start:{line:36,column:68},end:{line:40,column:11}},line:36},9:{name:"(anonymous_9)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:16},end:{line:52,column:3}},line:50},10:{name:"(anonymous_10)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:21},end:{line:55,column:3}},line:53}},branchMap:{0:{loc:{start:{line:9,column:14},end:{line:9,column:23}},type:"default-arg",locations:[{start:{line:9,column:21},end:{line:9,column:23}}],line:9},1:{loc:{start:{line:10,column:27},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:27},end:{line:10,column:47}},{start:{line:10,column:52},end:{line:11,column:5}}],line:10},2:{loc:{start:{line:12,column:32},end:{line:13,column:6}},type:"binary-expr",locations:[{start:{line:12,column:32},end:{line:12,column:57}},{start:{line:12,column:62},end:{line:13,column:5}}],line:12},3:{loc:{start:{line:24,column:4},end:{line:26,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:26,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},4:{loc:{start:{line:32,column:7},end:{line:32,column:36}},type:"binary-expr",locations:[{start:{line:32,column:7},end:{line:32,column:30}},{start:{line:32,column:34},end:{line:32,column:36}}],line:32},5:{loc:{start:{line:33,column:32},end:{line:33,column:71}},type:"binary-expr",locations:[{start:{line:33,column:32},end:{line:33,column:65}},{start:{line:33,column:69},end:{line:33,column:71}}],line:33},6:{loc:{start:{line:37,column:40},end:{line:37,column:75}},type:"binary-expr",locations:[{start:{line:37,column:40},end:{line:37,column:69}},{start:{line:37,column:73},end:{line:37,column:75}}],line:37},7:{loc:{start:{line:45,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,aAAa;AAUpB,qBAAqB,aAAa;AAAA,EAChC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAA4B,CAAC,GAAG;AAC1C,SAAK,kBAAkB,KAAK,oBAAoB,MAAM;AAAA,IAAC;AACvD,SAAK,uBAAuB,KAAK,yBAAyB,MAAM;AAAA,IAAC;AAEjE,SAAK,WAAW,CAAC;AACjB,SAAK,gBAAgB,CAAC;AAKtB,SAAK,oCAAoC,SAAS,KAAK,0BAA0B,GAAI;AAAA,EACvF;AAAA,EAEA,WAAW,KAAU;AACnB,UAAM,kBAAkB,EAAE,GAAG,KAAK,SAAS;AAE3C,eAAW,YAAY,OAAO,KAAK,IAAI,MAAM,YAAY,GAAG;AAG1D,WAAK,SAAS,QAAQ,IAAI,IAAI,MAAM,aAAa,QAAQ,EAAE,QAAQ;AAAA,IACrE;AAAC;AAED,QAAG,CAAC,QAAQ,iBAAiB,KAAK,QAAQ,GAAG;AAC3C,WAAK,gBAAgB,KAAK,QAAQ;AAAA,IACpC;AAEA,SAAK,kCAAkC,GAAG;AAAA,EAC5C;AAAA,EAEA,yBAAyB,KAAU;AACjC,UAAM,uBAAuB,EAAE,GAAG,KAAK,cAAc;AAErD,WAAO,KAAK,KAAK,QAAQ,EAAE,QAAQ,cAAY;AAC7C,OAAC,KAAK,SAAS,QAAQ,KAAK,CAAC,GAAG,QAAQ,mBAAiB;AACvD,cAAM,kBAAkB,KAAK,cAAc,aAAa,KAAK,CAAC;AAC9D,cAAM,SAAS,EAAE,aAAa,cAAc;AAC5C,YAAI,oBAAoB,UAAU,MAAa,EAAE,QAAQ,aAAW;AAClE,iBAAO,KAAK,QAAQ,UAAU,EAAE,QAAQ,kBAAgB;AACtD,kBAAM,sBAAsB,gBAAgB,YAAY,KAAK,CAAC;AAC9D,gCAAoB,QAAQ,WAAW,YAAY,CAAC,IAAI,CAAC;AACzD,4BAAgB,YAAY,IAAI;AAAA,UAClC,CAAC;AAAA,QACH,CAAC;AAED,aAAK,cAAc,aAAa,IAAI;AAAA,MACtC,CAAC;AAAA,IACH,CAAC;AAED,QAAG,CAAC,QAAQ,sBAAsB,KAAK,aAAa,GAAG;AACrD,WAAK,qBAAqB,KAAK,aAAa;AAAA,IAC9C;AAAA,EAEF;AAAA;AAAA,EAGA,IAAI,UAAU;AACZ,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,eAAe;AACjB,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f697c030ede0efa960b33f85ca9652efe882c805"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Qi=function(){return s},s}Qi();class kPe{onSourcesChange;onVectorLayersChange;throttledAnalyzeVectorLayerFields;_sources;_vectorLayers;constructor(e=(Qi().b[0][0]++,{})){Qi().f[0]++,Qi().s[0]++,this.onSourcesChange=(Qi().b[1][0]++,e.onSourcesChange||(Qi().b[1][1]++,()=>{Qi().f[1]++})),Qi().s[1]++,this.onVectorLayersChange=(Qi().b[2][0]++,e.onVectorLayersChange||(Qi().b[2][1]++,()=>{Qi().f[2]++})),Qi().s[2]++,this._sources={},Qi().s[3]++,this._vectorLayers={},Qi().s[4]++,this.throttledAnalyzeVectorLayerFields=OPe(this.analyzeVectorLayerFields,5e3)}analyzeMap(e){Qi().f[3]++;const t=(Qi().s[5]++,{...this._sources});Qi().s[6]++;for(const i of Object.keys(e.style.tileManagers))Qi().s[7]++,this._sources[i]=e.style.tileManagers[i]._source.vectorLayerIds;Qi().s[8]++,XR(t,this._sources)?Qi().b[3][1]++:(Qi().b[3][0]++,Qi().s[9]++,this.onSourcesChange(this._sources)),Qi().s[10]++,this.throttledAnalyzeVectorLayerFields(e)}analyzeVectorLayerFields(e){Qi().f[4]++;const t=(Qi().s[11]++,{...this._vectorLayers});Qi().s[12]++,Object.keys(this._sources).forEach(i=>{Qi().f[5]++,Qi().s[13]++,(Qi().b[4][0]++,this._sources[i]||(Qi().b[4][1]++,[])).forEach(r=>{Qi().f[6]++;const o=(Qi().s[14]++,Qi().b[5][0]++,this._vectorLayers[r]||(Qi().b[5][1]++,{})),s=(Qi().s[15]++,{sourceLayer:r});Qi().s[16]++,e.querySourceFeatures(i,s).forEach(a=>{Qi().f[7]++,Qi().s[17]++,Object.keys(a.properties).forEach(c=>{Qi().f[8]++;const f=(Qi().s[18]++,Qi().b[6][0]++,o[c]||(Qi().b[6][1]++,{}));Qi().s[19]++,f[a.properties[c]]={},Qi().s[20]++,o[c]=f})}),Qi().s[21]++,this._vectorLayers[r]=o})}),Qi().s[22]++,XR(t,this._vectorLayers)?Qi().b[7][1]++:(Qi().b[7][0]++,Qi().s[23]++,this.onVectorLayersChange(this._vectorLayers))}get sources(){return Qi().f[9]++,Qi().s[24]++,this._sources}get vectorLayers(){return Qi().f[10]++,Qi().s[25]++,this._vectorLayers}}function fe(){var n="/home/runner/work/maputnik/maputnik/src/components/App.tsx",e="8a07c2afbabbb0ad6515959638246d740e8d9d6d",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/App.tsx",statementMap:{0:{start:{line:36,column:0},end:{line:36,column:30}},1:{start:{line:38,column:29},end:{line:38,column:60}},2:{start:{line:39,column:26},end:{line:39,column:54}},3:{start:{line:40,column:31},end:{line:40,column:64}},4:{start:{line:41,column:28},end:{line:41,column:58}},5:{start:{line:42,column:2},end:{line:59,column:3}},6:{start:{line:43,column:24},end:{line:43,column:95}},7:{start:{line:44,column:4},end:{line:46,column:5}},8:{start:{line:45,column:6},end:{line:45,column:47}},9:{start:{line:47,column:9},end:{line:59,column:3}},10:{start:{line:48,column:24},end:{line:48,column:96}},11:{start:{line:49,column:4},end:{line:51,column:5}},12:{start:{line:50,column:6},end:{line:50,column:47}},13:{start:{line:52,column:9},end:{line:59,column:3}},14:{start:{line:53,column:24},end:{line:53,column:93}},15:{start:{line:54,column:4},end:{line:56,column:5}},16:{start:{line:55,column:6},end:{line:55,column:47}},17:{start:{line:58,column:4},end:{line:58,column:15}},18:{start:{line:62,column:2},end:{line:71,column:4}},19:{start:{line:75,column:15},end:{line:75,column:19}},20:{start:{line:78,column:4},end:{line:78,column:17}},21:{start:{line:79,column:4},end:{line:79,column:45}},22:{start:{line:80,column:4},end:{line:80,column:38}},23:{start:{line:81,column:4},end:{line:116,column:6}},24:{start:{line:117,column:4},end:{line:119,column:7}},25:{start:{line:118,column:35},end:{line:118,column:69}},26:{start:{line:121,column:31},end:{line:194,column:3}},27:{start:{line:122,column:22},end:{line:179,column:5}},28:{start:{line:126,column:10},end:{line:126,column:40}},29:{start:{line:132,column:10},end:{line:132,column:35}},30:{start:{line:138,column:10},end:{line:138,column:37}},31:{start:{line:144,column:10},end:{line:144,column:38}},32:{start:{line:150,column:10},end:{line:150,column:39}},33:{start:{line:156,column:10},end:{line:156,column:42}},34:{start:{line:162,column:10},end:{line:164,column:12}},35:{start:{line:170,column:10},end:{line:170,column:63}},36:{start:{line:176,column:10},end:{line:176,column:36}},37:{start:{line:180,column:4},end:{line:193,column:7}},38:{start:{line:181,column:6},end:{line:192,column:7}},39:{start:{line:182,column:8},end:{line:182,column:24}},40:{start:{line:183,column:8},end:{line:183,column:30}},41:{start:{line:184,column:13},end:{line:192,column:7}},42:{start:{line:185,column:25},end:{line:187,column:10}},43:{start:{line:186,column:10},end:{line:186,column:41}},44:{start:{line:188,column:8},end:{line:191,column:9}},45:{start:{line:189,column:10},end:{line:189,column:44}},46:{start:{line:190,column:10},end:{line:190,column:29}},47:{start:{line:195,column:19},end:{line:213,column:3}},48:{start:{line:196,column:4},end:{line:212,column:5}},49:{start:{line:197,column:6},end:{line:203,column:7}},50:{start:{line:198,column:8},end:{line:198,column:27}},51:{start:{line:199,column:8},end:{line:199,column:22}},52:{start:{line:200,column:13},end:{line:203,column:7}},53:{start:{line:201,column:8},end:{line:201,column:27}},54:{start:{line:202,column:8},end:{line:202,column:22}},55:{start:{line:205,column:6},end:{line:211,column:7}},56:{start:{line:206,column:8},end:{line:206,column:27}},57:{start:{line:207,column:8},end:{line:207,column:22}},58:{start:{line:208,column:13},end:{line:211,column:7}},59:{start:{line:209,column:8},end:{line:209,column:27}},60:{start:{line:210,column:8},end:{line:210,column:22}},61:{start:{line:215,column:4},end:{line:215,column:102}},62:{start:{line:215,column:65},end:{line:215,column:100}},63:{start:{line:216,column:4},end:{line:216,column:60}},64:{start:{line:219,column:4},end:{line:219,column:63}},65:{start:{line:222,column:4},end:{line:222,column:41}},66:{start:{line:225,column:21},end:{line:225,column:55}},67:{start:{line:226,column:24},end:{line:226,column:93}},68:{start:{line:227,column:21},end:{line:227,column:110}},69:{start:{line:228,column:4},end:{line:230,column:7}},70:{start:{line:229,column:6},end:{line:229,column:80}},71:{start:{line:233,column:4},end:{line:235,column:7}},72:{start:{line:234,column:6},end:{line:234,column:80}},73:{start:{line:237,column:29},end:{line:251,column:3}},74:{start:{line:238,column:4},end:{line:242,column:5}},75:{start:{line:239,column:6},end:{line:241,column:9}},76:{start:{line:243,column:25},end:{line:249,column:5}},77:{start:{line:250,column:4},end:{line:250,column:38}},78:{start:{line:252,column:19},end:{line:375,column:3}},79:{start:{line:253,column:4},end:{line:258,column:6}},80:{start:{line:259,column:4},end:{line:261,column:5}},81:{start:{line:260,column:6},end:{line:260,column:71}},82:{start:{line:262,column:4},end:{line:264,column:5}},83:{start:{line:263,column:6},end:{line:263,column:71}},84:{start:{line:265,column:4},end:{line:269,column:5}},85:{start:{line:266,column:6},end:{line:268,column:7}},86:{start:{line:267,column:8},end:{line:267,column:63}},87:{start:{line:270,column:4},end:{line:272,column:5}},88:{start:{line:271,column:6},end:{line:271,column:44}},89:{start:{line:273,column:19},end:{line:273,column:51}},90:{start:{line:274,column:24},end:{line:274,column:26}},91:{start:{line:275,column:4},end:{line:286,column:5}},92:{start:{line:276,column:26},end:{line:276,column:42}},93:{start:{line:277,column:6},end:{line:285,column:9}},94:{start:{line:278,column:8},end:{line:283,column:9}},95:{start:{line:279,column:24},end:{line:281,column:11}},96:{start:{line:282,column:10},end:{line:282,column:34}},97:{start:{line:284,column:8},end:{line:284,column:40}},98:{start:{line:287,column:25},end:{line:338,column:6}},99:{start:{line:288,column:23},end:{line:288,column:109}},100:{start:{line:289,column:6},end:{line:302,column:7}},101:{start:{line:290,column:35},end:{line:290,column:43}},102:{start:{line:291,column:8},end:{line:301,column:10}},103:{start:{line:303,column:33},end:{line:303,column:100}},104:{start:{line:304,column:6},end:{line:317,column:7}},105:{start:{line:305,column:35},end:{line:305,column:53}},106:{start:{line:306,column:8},end:{line:316,column:10}},107:{start:{line:318,column:25},end:{line:318,column:88}},108:{start:{line:319,column:6},end:{line:337,column:7}},109:{start:{line:320,column:52},end:{line:320,column:62}},110:{start:{line:321,column:20},end:{line:321,column:78}},111:{start:{line:322,column:8},end:{line:332,column:10}},112:{start:{line:334,column:8},end:{line:336,column:10}},113:{start:{line:339,column:24},end:{line:339,column:30}},114:{start:{line:340,column:4},end:{line:354,column:5}},115:{start:{line:341,column:6},end:{line:341,column:42}},116:{start:{line:342,column:6},end:{line:353,column:7}},117:{start:{line:343,column:28},end:{line:343,column:33}},118:{start:{line:344,column:8},end:{line:352,column:9}},119:{start:{line:345,column:10},end:{line:351,column:11}},120:{start:{line:346,column:28},end:{line:346,column:49}},121:{start:{line:347,column:30},end:{line:347,column:69}},122:{start:{line:348,column:12},end:{line:348,column:44}},123:{start:{line:350,column:12},end:{line:350,column:46}},124:{start:{line:355,column:4},end:{line:357,column:5}},125:{start:{line:356,column:6},end:{line:356,column:40}},126:{start:{line:358,column:4},end:{line:360,column:5}},127:{start:{line:359,column:6},end:{line:359,column:40}},128:{start:{line:361,column:4},end:{line:363,column:5}},129:{start:{line:362,column:6},end:{line:362,column:47}},130:{start:{line:364,column:4},end:{line:366,column:5}},131:{start:{line:365,column:6},end:{line:365,column:31}},132:{start:{line:367,column:4},end:{line:374,column:7}},133:{start:{line:372,column:6},end:{line:372,column:26}},134:{start:{line:373,column:6},end:{line:373,column:27}},135:{start:{line:376,column:11},end:{line:383,column:3}},136:{start:{line:377,column:24},end:{line:377,column:49}},137:{start:{line:378,column:21},end:{line:378,column:67}},138:{start:{line:379,column:4},end:{line:379,column:61}},139:{start:{line:380,column:4},end:{line:382,column:7}},140:{start:{line:384,column:11},end:{line:391,column:3}},141:{start:{line:385,column:24},end:{line:385,column:49}},142:{start:{line:386,column:21},end:{line:386,column:67}},143:{start:{line:387,column:4},end:{line:387,column:61}},144:{start:{line:388,column:4},end:{line:390,column:7}},145:{start:{line:392,column:16},end:{line:406,column:3}},146:{start:{line:393,column:33},end:{line:393,column:37}},147:{start:{line:394,column:17},end:{line:394,column:43}},148:{start:{line:395,column:4},end:{line:395,column:53}},149:{start:{line:396,column:4},end:{line:396,column:53}},150:{start:{line:397,column:4},end:{line:397,column:38}},151:{start:{line:397,column:31},end:{line:397,column:38}},152:{start:{line:398,column:4},end:{line:402,column:5}},153:{start:{line:399,column:6},end:{line:401,column:9}},154:{start:{line:403,column:4},end:{line:403,column:29}},155:{start:{line:404,column:4},end:{line:404,column:49}},156:{start:{line:405,column:4},end:{line:405,column:32}},157:{start:{line:407,column:19},end:{line:413,column:3}},158:{start:{line:408,column:25},end:{line:411,column:5}},159:{start:{line:412,column:4},end:{line:412,column:38}},160:{start:{line:414,column:19},end:{line:419,column:3}},161:{start:{line:415,column:19},end:{line:415,column:45}},162:{start:{line:416,column:28},end:{line:416,column:43}},163:{start:{line:417,column:4},end:{line:417,column:37}},164:{start:{line:418,column:4},end:{line:418,column:41}},165:{start:{line:420,column:16},end:{line:427,column:3}},166:{start:{line:421,column:19},end:{line:421,column:45}},167:{start:{line:422,column:26},end:{line:422,column:41}},168:{start:{line:423,column:24},end:{line:423,column:55}},169:{start:{line:424,column:4},end:{line:424,column:46}},170:{start:{line:425,column:4},end:{line:425,column:48}},171:{start:{line:426,column:4},end:{line:426,column:39}},172:{start:{line:428,column:28},end:{line:437,column:3}},173:{start:{line:429,column:19},end:{line:429,column:45}},174:{start:{line:430,column:26},end:{line:430,column:41}},175:{start:{line:431,column:18},end:{line:431,column:45}},176:{start:{line:432,column:26},end:{line:432,column:70}},177:{start:{line:433,column:4},end:{line:433,column:88}},178:{start:{line:434,column:4},end:{line:434,column:33}},179:{start:{line:435,column:4},end:{line:435,column:33}},180:{start:{line:436,column:4},end:{line:436,column:39}},181:{start:{line:438,column:20},end:{line:445,column:3}},182:{start:{line:439,column:26},end:{line:439,column:61}},183:{start:{line:440,column:4},end:{line:443,column:6}},184:{start:{line:444,column:4},end:{line:444,column:39}},185:{start:{line:446,column:19},end:{line:450,column:3}},186:{start:{line:447,column:26},end:{line:447,column:61}},187:{start:{line:448,column:4},end:{line:448,column:33}},188:{start:{line:449,column:4},end:{line:449,column:39}},189:{start:{line:451,column:16},end:{line:455,column:3}},190:{start:{line:452,column:4},end:{line:454,column:27}},191:{start:{line:456,column:21},end:{line:470,column:3}},192:{start:{line:457,column:21},end:{line:457,column:44}},193:{start:{line:458,column:4},end:{line:469,column:5}},194:{start:{line:459,column:27},end:{line:465,column:7}},195:{start:{line:466,column:6},end:{line:466,column:26}},196:{start:{line:468,column:6},end:{line:468,column:22}},197:{start:{line:471,column:14},end:{line:475,column:3}},198:{start:{line:472,column:4},end:{line:472,column:34}},199:{start:{line:473,column:4},end:{line:473,column:47}},200:{start:{line:474,column:4},end:{line:474,column:34}},201:{start:{line:477,column:23},end:{line:477,column:25}},202:{start:{line:478,column:4},end:{line:517,column:5}},203:{start:{line:479,column:21},end:{line:479,column:53}},204:{start:{line:480,column:6},end:{line:516,column:7}},205:{start:{line:481,column:8},end:{line:481,column:93}},206:{start:{line:482,column:8},end:{line:484,column:9}},207:{start:{line:483,column:10},end:{line:483,column:38}},208:{start:{line:486,column:8},end:{line:489,column:10}},209:{start:{line:490,column:18},end:{line:490,column:28}},210:{start:{line:491,column:8},end:{line:495,column:9}},211:{start:{line:492,column:10},end:{line:492,column:62}},212:{start:{line:494,column:10},end:{line:494,column:63}},213:{start:{line:496,column:32},end:{line:503,column:9}},214:{start:{line:497,column:10},end:{line:499,column:11}},215:{start:{line:498,column:12},end:{line:498,column:19}},216:{start:{line:500,column:10},end:{line:502,column:11}},217:{start:{line:501,column:12},end:{line:501,column:50}},218:{start:{line:504,column:8},end:{line:515,column:9}},219:{start:{line:505,column:10},end:{line:512,column:11}},220:{start:{line:506,column:25},end:{line:506,column:77}},221:{start:{line:507,column:12},end:{line:507,column:34}},222:{start:{line:509,column:29},end:{line:509,column:63}},223:{start:{line:510,column:25},end:{line:510,column:46}},224:{start:{line:511,column:12},end:{line:511,column:34}},225:{start:{line:514,column:10},end:{line:514,column:78}},226:{start:{line:518,column:4},end:{line:523,column:5}},227:{start:{line:519,column:6},end:{line:519,column:51}},228:{start:{line:520,column:6},end:{line:522,column:9}},229:{start:{line:526,column:21},end:{line:526,column:55}},230:{start:{line:527,column:4},end:{line:527,column:53}},231:{start:{line:529,column:16},end:{line:533,column:3}},232:{start:{line:530,column:4},end:{line:532,column:7}},233:{start:{line:535,column:40},end:{line:535,column:50}},234:{start:{line:536,column:21},end:{line:547,column:5}},235:{start:{line:539,column:8},end:{line:541,column:11}},236:{start:{line:544,column:8},end:{line:544,column:44}},237:{start:{line:545,column:8},end:{line:545,column:28}},238:{start:{line:548,column:21},end:{line:548,column:40}},239:{start:{line:550,column:4},end:{line:572,column:5}},240:{start:{line:551,column:6},end:{line:559,column:8}},241:{start:{line:557,column:38},end:{line:557,column:66}},242:{start:{line:561,column:6},end:{line:571,column:8}},243:{start:{line:574,column:4},end:{line:576,column:5}},244:{start:{line:575,column:6},end:{line:575,column:63}},245:{start:{line:577,column:25},end:{line:577,column:27}},246:{start:{line:578,column:4},end:{line:580,column:5}},247:{start:{line:579,column:6},end:{line:579,column:52}},248:{start:{line:581,column:4},end:{line:581,column:160}},249:{start:{line:583,column:18},end:{line:601,column:3}},250:{start:{line:584,column:43},end:{line:584,column:53}},251:{start:{line:585,column:35},end:{line:585,column:45}},252:{start:{line:586,column:16},end:{line:586,column:38}},253:{start:{line:587,column:20},end:{line:587,column:50}},254:{start:{line:588,column:4},end:{line:588,column:70}},255:{start:{line:589,column:23},end:{line:589,column:122}},256:{start:{line:589,column:66},end:{line:589,column:91}},257:{start:{line:589,column:109},end:{line:589,column:121}},258:{start:{line:590,column:4},end:{line:594,column:5}},259:{start:{line:591,column:6},end:{line:591,column:58}},260:{start:{line:593,column:6},end:{line:593,column:39}},261:{start:{line:595,column:4},end:{line:599,column:5}},262:{start:{line:596,column:6},end:{line:596,column:38}},263:{start:{line:597,column:11},end:{line:599,column:5}},264:{start:{line:598,column:6},end:{line:598,column:46}},265:{start:{line:600,column:4},end:{line:600,column:71}},266:{start:{line:602,column:27},end:{line:647,column:3}},267:{start:{line:603,column:16},end:{line:603,column:38}},268:{start:{line:604,column:23},end:{line:604,column:52}},269:{start:{line:605,column:4},end:{line:617,column:5}},270:{start:{line:606,column:21},end:{line:606,column:42}},271:{start:{line:607,column:23},end:{line:607,column:25}},272:{start:{line:608,column:6},end:{line:610,column:9}},273:{start:{line:609,column:8},end:{line:609,column:35}},274:{start:{line:611,column:6},end:{line:616,column:9}},275:{start:{line:618,column:17},end:{line:618,column:45}},276:{start:{line:619,column:4},end:{line:621,column:5}},277:{start:{line:620,column:6},end:{line:620,column:29}},278:{start:{line:622,column:17},end:{line:622,column:46}},279:{start:{line:623,column:4},end:{line:646,column:5}},280:{start:{line:624,column:6},end:{line:645,column:7}},281:{start:{line:625,column:22},end:{line:625,column:37}},282:{start:{line:626,column:46},end:{line:629,column:9}},283:{start:{line:630,column:20},end:{line:630,column:24}},284:{start:{line:631,column:8},end:{line:636,column:9}},285:{start:{line:632,column:33},end:{line:632,column:63}},286:{start:{line:633,column:10},end:{line:635,column:11}},287:{start:{line:634,column:12},end:{line:634,column:26}},288:{start:{line:637,column:8},end:{line:642,column:9}},289:{start:{line:638,column:10},end:{line:641,column:13}},290:{start:{line:644,column:8},end:{line:644,column:26}},291:{start:{line:648,column:18},end:{line:653,column:3}},292:{start:{line:649,column:4},end:{line:652,column:27}},293:{start:{line:655,column:4},end:{line:660,column:27}},294:{start:{line:663,column:4},end:{line:663,column:60}},295:{start:{line:665,column:20},end:{line:667,column:3}},296:{start:{line:666,column:4},end:{line:666,column:34}},297:{start:{line:668,column:28},end:{line:675,column:3}},298:{start:{line:669,column:4},end:{line:674,column:7}},299:{start:{line:676,column:28},end:{line:683,column:3}},300:{start:{line:677,column:4},end:{line:682,column:7}},301:{start:{line:685,column:19},end:{line:685,column:51}},302:{start:{line:686,column:26},end:{line:686,column:92}},303:{start:{line:687,column:36},end:{line:700,column:5}},304:{start:{line:698,column:34},end:{line:698,column:57}},305:{start:{line:701,column:23},end:{line:708,column:14}},306:{start:{line:705,column:30},end:{line:705,column:57}},307:{start:{line:706,column:23},end:{line:706,column:57}},308:{start:{line:709,column:38},end:{line:723,column:5}},309:{start:{line:724,column:24},end:{line:743,column:14}},310:{start:{line:744,column:24},end:{line:754,column:14}},311:{start:{line:755,column:35},end:{line:824,column:8}},312:{start:{line:765,column:30},end:{line:765,column:55}},313:{start:{line:773,column:30},end:{line:773,column:59}},314:{start:{line:783,column:30},end:{line:783,column:58}},315:{start:{line:792,column:30},end:{line:792,column:56}},316:{start:{line:802,column:30},end:{line:802,column:54}},317:{start:{line:812,column:30},end:{line:812,column:57}},318:{start:{line:821,column:30},end:{line:821,column:61}},319:{start:{line:825,column:4},end:{line:836,column:6}}},fnMap:{0:{name:"setFetchAccessToken",decl:{start:{line:37,column:9},end:{line:37,column:28}},loc:{start:{line:37,column:44},end:{line:60,column:1}},line:37},1:{name:"updateRootSpec",decl:{start:{line:61,column:9},end:{line:61,column:23}},loc:{start:{line:61,column:52},end:{line:72,column:1}},line:61},2:{name:"(anonymous_2)",decl:{start:{line:77,column:2},end:{line:77,column:3}},loc:{start:{line:77,column:21},end:{line:120,column:3}},line:77},3:{name:"(anonymous_3)",decl:{start:{line:118,column:28},end:{line:118,column:29}},loc:{start:{line:118,column:35},end:{line:118,column:69}},line:118},4:{name:"(anonymous_4)",decl:{start:{line:121,column:31},end:{line:121,column:32}},loc:{start:{line:121,column:37},end:{line:194,column:3}},line:121},5:{name:"(anonymous_5)",decl:{start:{line:125,column:17},end:{line:125,column:18}},loc:{start:{line:125,column:23},end:{line:127,column:9}},line:125},6:{name:"(anonymous_6)",decl:{start:{line:131,column:17},end:{line:131,column:18}},loc:{start:{line:131,column:23},end:{line:133,column:9}},line:131},7:{name:"(anonymous_7)",decl:{start:{line:137,column:17},end:{line:137,column:18}},loc:{start:{line:137,column:23},end:{line:139,column:9}},line:137},8:{name:"(anonymous_8)",decl:{start:{line:143,column:17},end:{line:143,column:18}},loc:{start:{line:143,column:23},end:{line:145,column:9}},line:143},9:{name:"(anonymous_9)",decl:{start:{line:149,column:17},end:{line:149,column:18}},loc:{start:{line:149,column:23},end:{line:151,column:9}},line:149},10:{name:"(anonymous_10)",decl:{start:{line:155,column:17},end:{line:155,column:18}},loc:{start:{line:155,column:23},end:{line:157,column:9}},line:155},11:{name:"(anonymous_11)",decl:{start:{line:161,column:17},end:{line:161,column:18}},loc:{start:{line:161,column:23},end:{line:165,column:9}},line:161},12:{name:"(anonymous_12)",decl:{start:{line:169,column:17},end:{line:169,column:18}},loc:{start:{line:169,column:23},end:{line:171,column:9}},line:169},13:{name:"(anonymous_13)",decl:{start:{line:175,column:17},end:{line:175,column:18}},loc:{start:{line:175,column:23},end:{line:177,column:9}},line:175},14:{name:"(anonymous_14)",decl:{start:{line:180,column:44},end:{line:180,column:45}},loc:{start:{line:180,column:51},end:{line:193,column:5}},line:180},15:{name:"(anonymous_15)",decl:{start:{line:185,column:40},end:{line:185,column:41}},loc:{start:{line:185,column:55},end:{line:187,column:9}},line:185},16:{name:"(anonymous_16)",decl:{start:{line:195,column:19},end:{line:195,column:20}},loc:{start:{line:195,column:26},end:{line:213,column:3}},line:195},17:{name:"(anonymous_17)",decl:{start:{line:214,column:2},end:{line:214,column:3}},loc:{start:{line:214,column:28},end:{line:217,column:3}},line:214},18:{name:"(anonymous_18)",decl:{start:{line:215,column:45},end:{line:215,column:46}},loc:{start:{line:215,column:65},end:{line:215,column:100}},line:215},19:{name:"(anonymous_19)",decl:{start:{line:218,column:2},end:{line:218,column:3}},loc:{start:{line:218,column:25},end:{line:220,column:3}},line:218},20:{name:"(anonymous_20)",decl:{start:{line:221,column:2},end:{line:221,column:3}},loc:{start:{line:221,column:27},end:{line:223,column:3}},line:221},21:{name:"(anonymous_21)",decl:{start:{line:224,column:2},end:{line:224,column:3}},loc:{start:{line:224,column:27},end:{line:231,column:3}},line:224},22:{name:"(anonymous_22)",decl:{start:{line:228,column:42},end:{line:228,column:43}},loc:{start:{line:228,column:53},end:{line:230,column:5}},line:228},23:{name:"(anonymous_23)",decl:{start:{line:232,column:2},end:{line:232,column:3}},loc:{start:{line:232,column:23},end:{line:236,column:3}},line:232},24:{name:"(anonymous_24)",decl:{start:{line:233,column:41},end:{line:233,column:42}},loc:{start:{line:233,column:52},end:{line:235,column:5}},line:233},25:{name:"(anonymous_25)",decl:{start:{line:237,column:29},end:{line:237,column:30}},loc:{start:{line:237,column:50},end:{line:251,column:3}},line:237},26:{name:"(anonymous_26)",decl:{start:{line:252,column:19},end:{line:252,column:20}},loc:{start:{line:252,column:44},end:{line:375,column:3}},line:252},27:{name:"(anonymous_27)",decl:{start:{line:277,column:30},end:{line:277,column:31}},loc:{start:{line:277,column:48},end:{line:285,column:7}},line:277},28:{name:"(anonymous_28)",decl:{start:{line:287,column:56},end:{line:287,column:57}},loc:{start:{line:287,column:67},end:{line:338,column:5}},line:287},29:{name:"(anonymous_29)",decl:{start:{line:371,column:7},end:{line:371,column:8}},loc:{start:{line:371,column:13},end:{line:374,column:5}},line:371},30:{name:"(anonymous_30)",decl:{start:{line:376,column:11},end:{line:376,column:12}},loc:{start:{line:376,column:17},end:{line:383,column:3}},line:376},31:{name:"(anonymous_31)",decl:{start:{line:384,column:11},end:{line:384,column:12}},loc:{start:{line:384,column:17},end:{line:391,column:3}},line:384},32:{name:"(anonymous_32)",decl:{start:{line:392,column:16},end:{line:392,column:17}},loc:{start:{line:392,column:26},end:{line:406,column:3}},line:392},33:{name:"(anonymous_33)",decl:{start:{line:407,column:19},end:{line:407,column:20}},loc:{start:{line:407,column:38},end:{line:413,column:3}},line:407},34:{name:"(anonymous_34)",decl:{start:{line:414,column:19},end:{line:414,column:20}},loc:{start:{line:414,column:30},end:{line:419,column:3}},line:414},35:{name:"(anonymous_35)",decl:{start:{line:420,column:16},end:{line:420,column:17}},loc:{start:{line:420,column:27},end:{line:427,column:3}},line:420},36:{name:"(anonymous_36)",decl:{start:{line:428,column:28},end:{line:428,column:29}},loc:{start:{line:428,column:39},end:{line:437,column:3}},line:428},37:{name:"(anonymous_37)",decl:{start:{line:438,column:20},end:{line:438,column:21}},loc:{start:{line:438,column:46},end:{line:445,column:3}},line:438},38:{name:"(anonymous_38)",decl:{start:{line:446,column:19},end:{line:446,column:20}},loc:{start:{line:446,column:37},end:{line:450,column:3}},line:446},39:{name:"(anonymous_39)",decl:{start:{line:451,column:16},end:{line:451,column:17}},loc:{start:{line:451,column:30},end:{line:455,column:3}},line:451},40:{name:"(anonymous_40)",decl:{start:{line:456,column:21},end:{line:456,column:22}},loc:{start:{line:456,column:35},end:{line:470,column:3}},line:456},41:{name:"(anonymous_41)",decl:{start:{line:471,column:14},end:{line:471,column:15}},loc:{start:{line:471,column:40},end:{line:475,column:3}},line:471},42:{name:"(anonymous_42)",decl:{start:{line:476,column:2},end:{line:476,column:3}},loc:{start:{line:476,column:23},end:{line:524,column:3}},line:476},43:{name:"(anonymous_43)",decl:{start:{line:496,column:32},end:{line:496,column:33}},loc:{start:{line:496,column:42},end:{line:503,column:9}},line:496},44:{name:"(anonymous_44)",decl:{start:{line:525,column:2},end:{line:525,column:3}},loc:{start:{line:525,column:17},end:{line:528,column:3}},line:525},45:{name:"(anonymous_45)",decl:{start:{line:529,column:16},end:{line:529,column:17}},loc:{start:{line:529,column:29},end:{line:533,column:3}},line:529},46:{name:"(anonymous_46)",decl:{start:{line:534,column:2},end:{line:534,column:3}},loc:{start:{line:534,column:16},end:{line:582,column:3}},line:534},47:{name:"(anonymous_47)",decl:{start:{line:538,column:27},end:{line:538,column:28}},loc:{start:{line:538,column:42},end:{line:542,column:7}},line:538},48:{name:"(anonymous_48)",decl:{start:{line:543,column:20},end:{line:543,column:21}},loc:{start:{line:543,column:27},end:{line:546,column:7}},line:543},49:{name:"(anonymous_49)",decl:{start:{line:557,column:25},end:{line:557,column:26}},loc:{start:{line:557,column:38},end:{line:557,column:66}},line:557},50:{name:"(anonymous_50)",decl:{start:{line:583,column:18},end:{line:583,column:19}},loc:{start:{line:583,column:24},end:{line:601,column:3}},line:583},51:{name:"(anonymous_51)",decl:{start:{line:589,column:50},end:{line:589,column:51}},loc:{start:{line:589,column:66},end:{line:589,column:91}},line:589},52:{name:"(anonymous_52)",decl:{start:{line:589,column:100},end:{line:589,column:101}},loc:{start:{line:589,column:109},end:{line:589,column:121}},line:589},53:{name:"(anonymous_53)",decl:{start:{line:602,column:27},end:{line:602,column:28}},loc:{start:{line:602,column:41},end:{line:647,column:3}},line:602},54:{name:"(anonymous_54)",decl:{start:{line:608,column:21},end:{line:608,column:22}},loc:{start:{line:608,column:36},end:{line:610,column:7}},line:608},55:{name:"(anonymous_55)",decl:{start:{line:648,column:18},end:{line:648,column:19}},loc:{start:{line:648,column:29},end:{line:653,column:3}},line:648},56:{name:"(anonymous_56)",decl:{start:{line:654,column:2},end:{line:654,column:3}},loc:{start:{line:654,column:29},end:{line:661,column:3}},line:654},57:{name:"(anonymous_57)",decl:{start:{line:662,column:2},end:{line:662,column:3}},loc:{start:{line:662,column:25},end:{line:664,column:3}},line:662},58:{name:"(anonymous_58)",decl:{start:{line:665,column:20},end:{line:665,column:21}},loc:{start:{line:665,column:36},end:{line:667,column:3}},line:665},59:{name:"(anonymous_59)",decl:{start:{line:668,column:28},end:{line:668,column:29}},loc:{start:{line:668,column:44},end:{line:675,column:3}},line:668},60:{name:"(anonymous_60)",decl:{start:{line:676,column:28},end:{line:676,column:29}},loc:{start:{line:676,column:44},end:{line:683,column:3}},line:676},61:{name:"(anonymous_61)",decl:{start:{line:684,column:2},end:{line:684,column:3}},loc:{start:{line:684,column:11},end:{line:837,column:3}},line:684},62:{name:"(anonymous_62)",decl:{start:{line:698,column:23},end:{line:698,column:24}},loc:{start:{line:698,column:34},end:{line:698,column:57}},line:698},63:{name:"(anonymous_63)",decl:{start:{line:705,column:18},end:{line:705,column:19}},loc:{start:{line:705,column:30},end:{line:705,column:57}},line:705},64:{name:"(anonymous_64)",decl:{start:{line:706,column:17},end:{line:706,column:18}},loc:{start:{line:706,column:23},end:{line:706,column:57}},line:706},65:{name:"(anonymous_65)",decl:{start:{line:765,column:24},end:{line:765,column:25}},loc:{start:{line:765,column:30},end:{line:765,column:55}},line:765},66:{name:"(anonymous_66)",decl:{start:{line:773,column:24},end:{line:773,column:25}},loc:{start:{line:773,column:30},end:{line:773,column:59}},line:773},67:{name:"(anonymous_67)",decl:{start:{line:783,column:24},end:{line:783,column:25}},loc:{start:{line:783,column:30},end:{line:783,column:58}},line:783},68:{name:"(anonymous_68)",decl:{start:{line:792,column:24},end:{line:792,column:25}},loc:{start:{line:792,column:30},end:{line:792,column:56}},line:792},69:{name:"(anonymous_69)",decl:{start:{line:802,column:24},end:{line:802,column:25}},loc:{start:{line:802,column:30},end:{line:802,column:54}},line:802},70:{name:"(anonymous_70)",decl:{start:{line:812,column:24},end:{line:812,column:25}},loc:{start:{line:812,column:30},end:{line:812,column:57}},line:812},71:{name:"(anonymous_71)",decl:{start:{line:821,column:24},end:{line:821,column:25}},loc:{start:{line:821,column:30},end:{line:821,column:61}},line:821}},branchMap:{0:{loc:{start:{line:42,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:59,column:3}},{start:{line:47,column:9},end:{line:59,column:3}}],line:42},1:{loc:{start:{line:42,column:6},end:{line:42,column:43}},type:"binary-expr",locations:[{start:{line:42,column:6},end:{line:42,column:24}},{start:{line:42,column:28},end:{line:42,column:43}}],line:42},2:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},3:{loc:{start:{line:47,column:9},end:{line:59,column:3}},type:"if",locations:[{start:{line:47,column:9},end:{line:59,column:3}},{start:{line:52,column:9},end:{line:59,column:3}}],line:47},4:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},5:{loc:{start:{line:52,column:9},end:{line:59,column:3}},type:"if",locations:[{start:{line:52,column:9},end:{line:59,column:3}},{start:{line:57,column:9},end:{line:59,column:3}}],line:52},6:{loc:{start:{line:54,column:4},end:{line:56,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:56,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},7:{loc:{start:{line:163,column:12},end:{line:163,column:61}},type:"cond-expr",locations:[{start:{line:163,column:44},end:{line:163,column:53}},{start:{line:163,column:56},end:{line:163,column:61}}],line:163},8:{loc:{start:{line:181,column:6},end:{line:192,column:7}},type:"if",locations:[{start:{line:181,column:6},end:{line:192,column:7}},{start:{line:184,column:13},end:{line:192,column:7}}],line:181},9:{loc:{start:{line:184,column:13},end:{line:192,column:7}},type:"if",locations:[{start:{line:184,column:13},end:{line:192,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:184},10:{loc:{start:{line:184,column:17},end:{line:184,column:88}},type:"binary-expr",locations:[{start:{line:184,column:17},end:{line:184,column:44}},{start:{line:184,column:48},end:{line:184,column:88}}],line:184},11:{loc:{start:{line:188,column:8},end:{line:191,column:9}},type:"if",locations:[{start:{line:188,column:8},end:{line:191,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:188},12:{loc:{start:{line:196,column:4},end:{line:212,column:5}},type:"if",locations:[{start:{line:196,column:4},end:{line:212,column:5}},{start:{line:204,column:11},end:{line:212,column:5}}],line:196},13:{loc:{start:{line:197,column:6},end:{line:203,column:7}},type:"if",locations:[{start:{line:197,column:6},end:{line:203,column:7}},{start:{line:200,column:13},end:{line:203,column:7}}],line:197},14:{loc:{start:{line:197,column:10},end:{line:197,column:53}},type:"binary-expr",locations:[{start:{line:197,column:10},end:{line:197,column:19}},{start:{line:197,column:23},end:{line:197,column:33}},{start:{line:197,column:37},end:{line:197,column:53}}],line:197},15:{loc:{start:{line:200,column:13},end:{line:203,column:7}},type:"if",locations:[{start:{line:200,column:13},end:{line:203,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:200},16:{loc:{start:{line:200,column:17},end:{line:200,column:46}},type:"binary-expr",locations:[{start:{line:200,column:17},end:{line:200,column:26}},{start:{line:200,column:30},end:{line:200,column:46}}],line:200},17:{loc:{start:{line:205,column:6},end:{line:211,column:7}},type:"if",locations:[{start:{line:205,column:6},end:{line:211,column:7}},{start:{line:208,column:13},end:{line:211,column:7}}],line:205},18:{loc:{start:{line:205,column:10},end:{line:205,column:39}},type:"binary-expr",locations:[{start:{line:205,column:10},end:{line:205,column:19}},{start:{line:205,column:23},end:{line:205,column:39}}],line:205},19:{loc:{start:{line:208,column:13},end:{line:211,column:7}},type:"if",locations:[{start:{line:208,column:13},end:{line:211,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:208},20:{loc:{start:{line:208,column:17},end:{line:208,column:46}},type:"binary-expr",locations:[{start:{line:208,column:17},end:{line:208,column:26}},{start:{line:208,column:30},end:{line:208,column:46}}],line:208},21:{loc:{start:{line:225,column:21},end:{line:225,column:55}},type:"binary-expr",locations:[{start:{line:225,column:21},end:{line:225,column:49}},{start:{line:225,column:53},end:{line:225,column:55}}],line:225},22:{loc:{start:{line:226,column:24},end:{line:226,column:93}},type:"binary-expr",locations:[{start:{line:226,column:24},end:{line:226,column:70}},{start:{line:226,column:74},end:{line:226,column:93}}],line:226},23:{loc:{start:{line:227,column:21},end:{line:227,column:110}},type:"cond-expr",locations:[{start:{line:227,column:55},end:{line:227,column:96}},{start:{line:227,column:99},end:{line:227,column:110}}],line:227},24:{loc:{start:{line:238,column:4},end:{line:242,column:5}},type:"if",locations:[{start:{line:238,column:4},end:{line:242,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:238},25:{loc:{start:{line:238,column:8},end:{line:238,column:123}},type:"binary-expr",locations:[{start:{line:238,column:8},end:{line:238,column:40}},{start:{line:238,column:44},end:{line:238,column:123}}],line:238},26:{loc:{start:{line:252,column:30},end:{line:252,column:39}},type:"default-arg",locations:[{start:{line:252,column:37},end:{line:252,column:39}}],line:252},27:{loc:{start:{line:259,column:4},end:{line:261,column:5}},type:"if",locations:[{start:{line:259,column:4},end:{line:261,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:259},28:{loc:{start:{line:259,column:8},end:{line:259,column:62}},type:"binary-expr",locations:[{start:{line:259,column:8},end:{line:259,column:23}},{start:{line:259,column:27},end:{line:259,column:62}}],line:259},29:{loc:{start:{line:262,column:4},end:{line:264,column:5}},type:"if",locations:[{start:{line:262,column:4},end:{line:264,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:262},30:{loc:{start:{line:262,column:8},end:{line:262,column:62}},type:"binary-expr",locations:[{start:{line:262,column:8},end:{line:262,column:23}},{start:{line:262,column:27},end:{line:262,column:62}}],line:262},31:{loc:{start:{line:266,column:6},end:{line:268,column:7}},type:"if",locations:[{start:{line:266,column:6},end:{line:268,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:266},32:{loc:{start:{line:266,column:10},end:{line:266,column:69}},type:"binary-expr",locations:[{start:{line:266,column:10},end:{line:266,column:16}},{start:{line:266,column:20},end:{line:266,column:35}},{start:{line:266,column:39},end:{line:266,column:69}}],line:266},33:{loc:{start:{line:270,column:4},end:{line:272,column:5}},type:"if",locations:[{start:{line:270,column:4},end:{line:272,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:270},34:{loc:{start:{line:273,column:19},end:{line:273,column:51}},type:"binary-expr",locations:[{start:{line:273,column:19},end:{line:273,column:45}},{start:{line:273,column:49},end:{line:273,column:51}}],line:273},35:{loc:{start:{line:275,column:4},end:{line:286,column:5}},type:"if",locations:[{start:{line:275,column:4},end:{line:286,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:275},36:{loc:{start:{line:275,column:8},end:{line:275,column:35}},type:"binary-expr",locations:[{start:{line:275,column:8},end:{line:275,column:16}},{start:{line:275,column:20},end:{line:275,column:35}}],line:275},37:{loc:{start:{line:278,column:8},end:{line:283,column:9}},type:"if",locations:[{start:{line:278,column:8},end:{line:283,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:278},38:{loc:{start:{line:278,column:12},end:{line:278,column:56}},type:"binary-expr",locations:[{start:{line:278,column:12},end:{line:278,column:27}},{start:{line:278,column:31},end:{line:278,column:56}}],line:278},39:{loc:{start:{line:289,column:6},end:{line:302,column:7}},type:"if",locations:[{start:{line:289,column:6},end:{line:302,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:289},40:{loc:{start:{line:304,column:6},end:{line:317,column:7}},type:"if",locations:[{start:{line:304,column:6},end:{line:317,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:304},41:{loc:{start:{line:319,column:6},end:{line:337,column:7}},type:"if",locations:[{start:{line:319,column:6},end:{line:337,column:7}},{start:{line:333,column:13},end:{line:337,column:7}}],line:319},42:{loc:{start:{line:321,column:20},end:{line:321,column:78}},type:"cond-expr",locations:[{start:{line:321,column:40},end:{line:321,column:67}},{start:{line:321,column:70},end:{line:321,column:78}}],line:321},43:{loc:{start:{line:321,column:20},end:{line:321,column:37}},type:"binary-expr",locations:[{start:{line:321,column:20},end:{line:321,column:25}},{start:{line:321,column:29},end:{line:321,column:37}}],line:321},44:{loc:{start:{line:340,column:4},end:{line:354,column:5}},type:"if",locations:[{start:{line:340,column:4},end:{line:354,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:340},45:{loc:{start:{line:344,column:8},end:{line:352,column:9}},type:"if",locations:[{start:{line:344,column:8},end:{line:352,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:344},46:{loc:{start:{line:355,column:4},end:{line:357,column:5}},type:"if",locations:[{start:{line:355,column:4},end:{line:357,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:355},47:{loc:{start:{line:358,column:4},end:{line:360,column:5}},type:"if",locations:[{start:{line:358,column:4},end:{line:360,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:358},48:{loc:{start:{line:361,column:4},end:{line:363,column:5}},type:"if",locations:[{start:{line:361,column:4},end:{line:363,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:361},49:{loc:{start:{line:364,column:4},end:{line:366,column:5}},type:"if",locations:[{start:{line:364,column:4},end:{line:366,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:364},50:{loc:{start:{line:397,column:4},end:{line:397,column:38}},type:"if",locations:[{start:{line:397,column:4},end:{line:397,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:397},51:{loc:{start:{line:398,column:4},end:{line:402,column:5}},type:"if",locations:[{start:{line:398,column:4},end:{line:402,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:398},52:{loc:{start:{line:432,column:26},end:{line:432,column:70}},type:"cond-expr",locations:[{start:{line:432,column:46},end:{line:432,column:65}},{start:{line:432,column:68},end:{line:432,column:70}}],line:432},53:{loc:{start:{line:433,column:31},end:{line:433,column:87}},type:"cond-expr",locations:[{start:{line:433,column:69},end:{line:433,column:78}},{start:{line:433,column:81},end:{line:433,column:87}}],line:433},54:{loc:{start:{line:457,column:21},end:{line:457,column:44}},type:"binary-expr",locations:[{start:{line:457,column:21},end:{line:457,column:38}},{start:{line:457,column:42},end:{line:457,column:44}}],line:457},55:{loc:{start:{line:458,column:4},end:{line:469,column:5}},type:"if",locations:[{start:{line:458,column:4},end:{line:469,column:5}},{start:{line:467,column:11},end:{line:469,column:5}}],line:458},56:{loc:{start:{line:480,column:6},end:{line:516,column:7}},type:"if",locations:[{start:{line:480,column:6},end:{line:516,column:7}},{start:{line:485,column:13},end:{line:516,column:7}}],line:480},57:{loc:{start:{line:480,column:10},end:{line:480,column:56}},type:"binary-expr",locations:[{start:{line:480,column:10},end:{line:480,column:34}},{start:{line:480,column:38},end:{line:480,column:56}}],line:480},58:{loc:{start:{line:481,column:26},end:{line:481,column:92}},type:"binary-expr",locations:[{start:{line:481,column:26},end:{line:481,column:49}},{start:{line:481,column:53},end:{line:481,column:92}}],line:481},59:{loc:{start:{line:482,column:8},end:{line:484,column:9}},type:"if",locations:[{start:{line:482,column:8},end:{line:484,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:482},60:{loc:{start:{line:497,column:10},end:{line:499,column:11}},type:"if",locations:[{start:{line:497,column:10},end:{line:499,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:497},61:{loc:{start:{line:505,column:10},end:{line:512,column:11}},type:"if",locations:[{start:{line:505,column:10},end:{line:512,column:11}},{start:{line:508,column:17},end:{line:512,column:11}}],line:505},62:{loc:{start:{line:518,column:4},end:{line:523,column:5}},type:"if",locations:[{start:{line:518,column:4},end:{line:523,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:518},63:{loc:{start:{line:526,column:21},end:{line:526,column:55}},type:"binary-expr",locations:[{start:{line:526,column:21},end:{line:526,column:49}},{start:{line:526,column:53},end:{line:526,column:55}}],line:526},64:{loc:{start:{line:527,column:11},end:{line:527,column:52}},type:"binary-expr",locations:[{start:{line:527,column:11},end:{line:527,column:40}},{start:{line:527,column:44},end:{line:527,column:52}}],line:527},65:{loc:{start:{line:537,column:16},end:{line:537,column:41}},type:"binary-expr",locations:[{start:{line:537,column:16},end:{line:537,column:29}},{start:{line:537,column:33},end:{line:537,column:41}}],line:537},66:{loc:{start:{line:550,column:4},end:{line:572,column:5}},type:"if",locations:[{start:{line:550,column:4},end:{line:572,column:5}},{start:{line:560,column:11},end:{line:572,column:5}}],line:550},67:{loc:{start:{line:574,column:4},end:{line:576,column:5}},type:"if",locations:[{start:{line:574,column:4},end:{line:576,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:574},68:{loc:{start:{line:578,column:4},end:{line:580,column:5}},type:"if",locations:[{start:{line:578,column:4},end:{line:580,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:578},69:{loc:{start:{line:589,column:66},end:{line:589,column:91}},type:"cond-expr",locations:[{start:{line:589,column:81},end:{line:589,column:84}},{start:{line:589,column:87},end:{line:589,column:91}}],line:589},70:{loc:{start:{line:590,column:4},end:{line:594,column:5}},type:"if",locations:[{start:{line:590,column:4},end:{line:594,column:5}},{start:{line:592,column:11},end:{line:594,column:5}}],line:590},71:{loc:{start:{line:595,column:4},end:{line:599,column:5}},type:"if",locations:[{start:{line:595,column:4},end:{line:599,column:5}},{start:{line:597,column:11},end:{line:599,column:5}}],line:595},72:{loc:{start:{line:597,column:11},end:{line:599,column:5}},type:"if",locations:[{start:{line:597,column:11},end:{line:599,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:597},73:{loc:{start:{line:605,column:4},end:{line:617,column:5}},type:"if",locations:[{start:{line:605,column:4},end:{line:617,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:605},74:{loc:{start:{line:605,column:8},end:{line:605,column:39}},type:"binary-expr",locations:[{start:{line:605,column:8},end:{line:605,column:18}},{start:{line:605,column:22},end:{line:605,column:39}}],line:605},75:{loc:{start:{line:619,column:4},end:{line:621,column:5}},type:"if",locations:[{start:{line:619,column:4},end:{line:621,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:619},76:{loc:{start:{line:619,column:8},end:{line:619,column:27}},type:"binary-expr",locations:[{start:{line:619,column:8},end:{line:619,column:12}},{start:{line:619,column:16},end:{line:619,column:27}}],line:619},77:{loc:{start:{line:623,column:4},end:{line:646,column:5}},type:"if",locations:[{start:{line:623,column:4},end:{line:646,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:623},78:{loc:{start:{line:631,column:8},end:{line:636,column:9}},type:"if",locations:[{start:{line:631,column:8},end:{line:636,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:631},79:{loc:{start:{line:633,column:10},end:{line:635,column:11}},type:"if",locations:[{start:{line:633,column:10},end:{line:635,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:633},80:{loc:{start:{line:637,column:8},end:{line:642,column:9}},type:"if",locations:[{start:{line:637,column:8},end:{line:642,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:637},81:{loc:{start:{line:685,column:19},end:{line:685,column:51}},type:"binary-expr",locations:[{start:{line:685,column:19},end:{line:685,column:45}},{start:{line:685,column:49},end:{line:685,column:51}}],line:685},82:{loc:{start:{line:686,column:26},end:{line:686,column:92}},type:"cond-expr",locations:[{start:{line:686,column:46},end:{line:686,column:83}},{start:{line:686,column:86},end:{line:686,column:92}}],line:686},83:{loc:{start:{line:701,column:23},end:{line:708,column:14}},type:"cond-expr",locations:[{start:{line:701,column:70},end:{line:708,column:5}},{start:{line:708,column:8},end:{line:708,column:14}}],line:701},84:{loc:{start:{line:724,column:24},end:{line:743,column:14}},type:"cond-expr",locations:[{start:{line:724,column:56},end:{line:743,column:5}},{start:{line:743,column:8},end:{line:743,column:14}}],line:724},85:{loc:{start:{line:744,column:24},end:{line:754,column:14}},type:"cond-expr",locations:[{start:{line:744,column:97},end:{line:754,column:5}},{start:{line:754,column:8},end:{line:754,column:14}}],line:744}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0,118:0,119:0,120:0,121:0,122:0,123:0,124:0,125:0,126:0,127:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:0,136:0,137:0,138:0,139:0,140:0,141:0,142:0,143:0,144:0,145:0,146:0,147:0,148:0,149:0,150:0,151:0,152:0,153:0,154:0,155:0,156:0,157:0,158:0,159:0,160:0,161:0,162:0,163:0,164:0,165:0,166:0,167:0,168:0,169:0,170:0,171:0,172:0,173:0,174:0,175:0,176:0,177:0,178:0,179:0,180:0,181:0,182:0,183:0,184:0,185:0,186:0,187:0,188:0,189:0,190:0,191:0,192:0,193:0,194:0,195:0,196:0,197:0,198:0,199:0,200:0,201:0,202:0,203:0,204:0,205:0,206:0,207:0,208:0,209:0,210:0,211:0,212:0,213:0,214:0,215:0,216:0,217:0,218:0,219:0,220:0,221:0,222:0,223:0,224:0,225:0,226:0,227:0,228:0,229:0,230:0,231:0,232:0,233:0,234:0,235:0,236:0,237:0,238:0,239:0,240:0,241:0,242:0,243:0,244:0,245:0,246:0,247:0,248:0,249:0,250:0,251:0,252:0,253:0,254:0,255:0,256:0,257:0,258:0,259:0,260:0,261:0,262:0,263:0,264:0,265:0,266:0,267:0,268:0,269:0,270:0,271:0,272:0,273:0,274:0,275:0,276:0,277:0,278:0,279:0,280:0,281:0,282:0,283:0,284:0,285:0,286:0,287:0,288:0,289:0,290:0,291:0,292:0,293:0,294:0,295:0,296:0,297:0,298:0,299:0,300:0,301:0,302:0,303:0,304:0,305:0,306:0,307:0,308:0,309:0,310:0,311:0,312:0,313:0,314:0,315:0,316:0,317:0,318:0,319:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0,0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0],48:[0,0],49:[0,0],50:[0,0],51:[0,0],52:[0,0],53:[0,0],54:[0,0],55:[0,0],56:[0,0],57:[0,0],58:[0,0],59:[0,0],60:[0,0],61:[0,0],62:[0,0],63:[0,0],64:[0,0],65:[0,0],66:[0,0],67:[0,0],68:[0,0],69:[0,0],70:[0,0],71:[0,0],72:[0,0],73:[0,0],74:[0,0],75:[0,0],76:[0,0],77:[0,0],78:[0,0],79:[0,0],80:[0,0],81:[0,0],82:[0,0],83:[0,0],84:[0,0],85:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/App.tsx"],names:["shortcut","mapStyle","style"],mappings:"AAurBmB,SAAA,KAwNA,YAxNA;AAvrBnB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,SAAS;AAChB,SAAQ,aAAY;AACpB,SAAQ,wBAAuB;AAC/B,OAAO,UAAU;AACjB,SAAS,eAAe;AAExB,SAAQ,wBAAuB;AAC/B,OAAO,YAAY;AAEnB,OAAO,mBAAmB;AAC1B,OAAO,mBAAmB;AAC1B,OAAO,gBAAgB;AACvB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,gBAAmC;AAC1C,OAAO,eAAe;AACtB,OAAO,kBAAkB;AAEzB,OAAO,mBAAmB;AAC1B,OAAO,iBAAiB;AACxB,OAAO,kBAAkB;AACzB,OAAO,eAAe;AACtB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AACvB,OAAO,sBAAsB;AAE7B,SAAQ,wBAAwB,8BAA6B;AAC7D,OAAO,WAAW;AAClB,SAAS,cAAc,oBAAoB;AAC3C,SAAS,wBAA0C;AACnD,SAAS,qBAAqB;AAC9B,OAAO,kBAAkB;AACzB,OAAO,YAAY;AACnB,OAAO,aAAa;AAKpB,OAAO,SAAS,OAAO;AAEvB,SAAS,oBAAoB,KAAa,UAA8B;AACtE,QAAM,qBAAqB,IAAI,MAAM,oBAAoB;AACzD,QAAM,kBAAkB,IAAI,MAAM,iBAAiB;AACnD,QAAM,uBAAuB,IAAI,MAAM,sBAAsB;AAC7D,QAAM,oBAAoB,IAAI,MAAM,mBAAmB;AACvD,MAAI,sBAAsB,iBAAiB;AACzC,UAAM,cAAc,MAAM,eAAe,gBAAgB,UAAU,EAAC,eAAe,KAAI,CAAC;AACxF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,sBAAsB;AAC7B,UAAM,cAAc,MAAM,eAAe,iBAAiB,UAAU,EAAC,eAAe,KAAI,CAAC;AACzF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,mBAAmB;AAC1B,UAAM,cAAc,MAAM,eAAe,cAAc,UAAU,EAAC,eAAe,KAAI,CAAC;AACtF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,eAAe,MAAW,WAAmB,WAAgB;AACpE,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,MACL,GAAG,KAAK;AAAA,MACR,CAAC,SAAS,GAAG;AAAA,QACX,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,EACF;AACF;AAyCA,qBAAqB,YAAY,MAAM,UAAyB;AAAA,EAC9D;AAAA,EACA,aAAiC;AAAA,EACjC;AAAA,EAEA,YAAY,OAAY;AACtB,UAAM,KAAK;AAEX,SAAK,gBAAgB,IAAI,cAAc;AACvC,SAAK,2BAA2B;AAEhC,SAAK,QAAQ;AAAA,MACX,QAAQ,CAAC;AAAA,MACT,OAAO,CAAC;AAAA,MACR,UAAU,MAAM;AAAA,MAChB,oBAAoB;AAAA,MACpB,SAAS,CAAC;AAAA,MACV,cAAc,CAAC;AAAA,MACf,UAAU;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,QACP,MAAM;AAAA,QACN,QAAQ;AAAA,UACN,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN,UAAU;AAAA,QACV,SAAS;AAAA,QACT,MAAM;AAAA,QACN,WAAW;AAAA,QACX,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,aAAa;AAAA,QACb,YAAY;AAAA,MACd;AAAA,MACA,wBAAwB;AAAA,QACtB,oBAAoB;AAAA,QACpB,oBAAoB;AAAA,QACpB,uBAAuB;AAAA,MACzB;AAAA,MACA,wBAAwB;AAAA,QACtB,cAAc;AAAA,MAChB;AAAA,MACA,YAAY;AAAA,IACd;AAEA,SAAK,eAAe,IAAI,aAAa;AAAA,MACnC,sBAAsB,CAAA,MAAK,KAAK,SAAS,EAAE,cAAc,EAAE,CAAC;AAAA,IAC9D,CAAC;AAAA,EACH;AAAA,EAEA,6BAA6B,MAAM;AACjC,UAAM,YAAY;AAAA,MAChB;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,WAAW;AAAA,QAC9B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,MAAM;AAAA,QACzB;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,QAAQ;AAAA,QAC3B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,SAAS;AAAA,QAC5B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,UAAU;AAAA,QAC7B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,aAAa;AAAA,QAChC;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK;AAAA,YACH,KAAK,MAAM,aAAa,QAAQ,YAAY;AAAA,UAC9C;AAAA,QACF;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACZ,mBAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,QAC5E;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,aAAS,KAAK,iBAAiB,SAAS,CAAC,MAAM;AAC7C,UAAG,EAAE,QAAQ,UAAU;AACpB,UAAE,OAAuB,KAAK;AAC/B,iBAAS,KAAK,MAAM;AAAA,MACtB,WACQ,KAAK,MAAM,OAAO,aAAa,SAAS,kBAAkB,SAAS,MAAM;AAC/E,cAAM,WAAW,UAAU,KAAK,CAACA,cAAa;AAC5C,iBAAQA,UAAS,QAAQ,EAAE;AAAA,QAC7B,CAAC;AAED,YAAG,UAAU;AACX,eAAK,SAAS,aAAa,KAAK;AAChC,mBAAS,QAAQ;AAAA,QACnB;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,CAAC,MAAqB;AACrC,QAAG,UAAU,SAAS,YAAY,EAAE,QAAQ,KAAK,KAAK,GAAG;AACvD,UAAG,EAAE,WAAW,EAAE,YAAY,EAAE,YAAY,IAAI;AAC9C,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF,OACK;AACH,UAAG,EAAE,WAAW,EAAE,YAAY,IAAI;AAChC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF;AAAA,EACF;AAAA,EAEA,MAAM,oBAAoB;AACxB,SAAK,aAAa,MAAM,iBAAiB,CAAC,UAAU,SAAS,KAAK,eAAe,UAAU,IAAI,CAAC;AAChG,WAAO,iBAAiB,WAAW,KAAK,cAAc;AAAA,EACxD;AAAA,EAEA,uBAAuB;AACrB,WAAO,oBAAoB,WAAW,KAAK,cAAc;AAAA,EAC3D;AAAA,EAEA,UAAU,eAAyC;AACjD,SAAK,YAAY,KAAK,aAAa;AAAA,EACrC;AAAA,EAEA,YAAY,aAAqB;AAC/B,UAAM,WAAoC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC3E,UAAM,cAAc,SAAS,oCAAoC,KAAK,OAAO;AAE7E,UAAM,WAAY,OAAO,gBAAgB,WAAW,YAAY,QAAQ,SAAS,WAAW,IAAG;AAC/F,2BAAuB,QAAQ,EAAE,KAAK,CAAA,UAAS;AAC7C,WAAK,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,SAAiB;AAC3B,2BAAuB,OAAO,EAAE,KAAK,CAAA,UAAS;AAC5C,WAAK,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,2BAA2B,CAAC,UAAkB,UAAe;AAE3D,QACE,aAAa,uBACb,UAAU,IAAI,KAAK,MAAM,UAAU,CAAC,YAAY,mBAAmB,GAAG,QAAQ,GAC9E;AACA,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAI,KAAK,MAAM,SAAiB;AAAA,QAChC,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAEA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAoC,OAAyB,CAAC,MAAY;AAC1F,WAAO;AAAA,MACL,MAAM;AAAA,MACN,aAAa;AAAA,MACb,aAAa;AAAA,MACb,GAAG;AAAA,IACL;AAKA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEA,eAAW,CAAC,WAAW,MAAM,KAAK,OAAO,QAAQ,SAAS,OAAO,GAAG;AAClE,UAAI,UAAU,SAAS,UAAU,OAAO,OAAO,QAAQ,UAAU;AAC/D,eAAO,MAAM,oBAAoB,OAAO,KAAK,QAAQ;AAAA,MACvD;AAAA,IACF;AAGA,QAAI,KAAK,aAAa;AACpB,WAAK,uBAAuB,QAAQ;AAAA,IACtC;AAEA,UAAM,SAA4B,iBAAiB,QAAQ,KAAK,CAAC;AAGjE,UAAM,cAA2C,CAAC;AAClD,QAAI,YAAY,SAAS,QAAQ;AAC/B,YAAM,cAAc,IAAI,OAAO,IAAI;AACnC,eAAS,OAAO,QAAQ,CAAC,OAAO,UAAU;AACxC,YAAI,MAAM,OAAO,MAAM,YAAY,IAAI,MAAM,EAAE,GAAG;AAChD,gBAAM,QAAQ,IAAI;AAAA,YAChB,UAAU,KAAK;AAAA,UACjB;AACA,sBAAY,KAAK,KAAK;AAAA,QACxB;AACA,oBAAY,IAAI,MAAM,IAAI,IAAI;AAAA,MAChC,CAAC;AAAA,IACH;AAEA,UAAM,eAA8B,YAAY,OAAO,MAAM,EAAE,IAAI,CAAA,UAAS;AAE1E,YAAM,WAAW,MAAM,QAAQ,MAAM,iEAAiE;AACtG,UAAI,UAAU;AACZ,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AAC3B,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAGA,YAAM,qBAAqB,MAAM,QAAQ,MAAM,8CAA8C;AAC7F,UAAI,oBAAoB;AACtB,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AAC3B,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAEA,YAAM,aAAa,MAAM,QAAQ,MAAM,0CAA0C;AACjF,UAAI,YAAY;AACd,cAAM,CAAC,EAAE,OAAO,OAAO,UAAU,OAAO,IAAI;AAC5C,cAAM,MAAO,SAAS,WAAY,CAAC,OAAO,QAAQ,EAAE,KAAK,GAAG,IAAI;AAChE,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB;AAAA,cACA;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF,OACK;AACH,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,QACjB;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,gBAAgD;AACpD,QAAI,OAAO,SAAS,GAAG;AACrB,sBAAgB,UAAU,QAAQ;AAElC,iBAAW,SAAS,QAAQ;AAC1B,cAAM,EAAC,QAAO,IAAI;AAClB,YAAI,SAAS;AACX,cAAI;AACF,kBAAM,UAAU,QAAQ,MAAM,GAAG,EAAE,CAAC;AAEpC,kBAAM,YAAY,QAAQ,MAAM,qBAAqB,EAAG,CAAC;AACzD,kBAAM,eAAe,SAAS;AAAA,UAChC,SACO,KAAK;AACV,oBAAQ,KAAK,UAAU,MAAM,GAAG;AAAA,UAClC;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAEA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AACjD,WAAK,YAAY,SAAS,MAAgB;AAAA,IAC5C;AACA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AACjD,WAAK,YAAY,SAAS,MAAgB;AAAA,IAC5C;AAEA,QAAI,KAAK,aAAa;AACpB,WAAK,cAAc,YAAY,QAAQ;AAAA,IACzC;AACA,QAAI,KAAK,MAAM;AACb,WAAK,UAAU,QAAQ;AAAA,IACzB;AAEA,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,MACV;AAAA,MACA,QAAQ;AAAA,IACV,GAAG,MAAM;AACP,WAAK,aAAa;AAClB,WAAK,cAAc;AAAA,IACrB,CAAC;AAAA,EAEH;AAAA,EAEA,SAAS,MAAM;AACb,UAAM,cAAc,KAAK,cAAc,KAAK;AAE5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,UAAM,cAAc,KAAK,cAAc,KAAK;AAC5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,SAA+C;AAC5D,QAAI,EAAE,UAAU,SAAS,IAAI;AAC7B,QAAI,SAAS,KAAK,MAAM,SAAS;AACjC,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,QAAG,aAAa,SAAU;AAE1B,QAAI,aAAa,KAAK,MAAM,oBAAoB;AAC9C,WAAK,SAAS;AAAA,QACZ,oBAAoB;AAAA,MACtB,CAAC;AAAA,IACH;AAEA,aAAS,OAAO,MAAM,CAAC;AACvB,qBAAiB,QAAQ,UAAU,QAAQ;AAC3C,SAAK,eAAe,MAAM;AAAA,EAC5B;AAAA,EAEA,iBAAiB,CAAC,kBAAwC;AACxD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,QAAQ;AAAA,IACV;AACA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAkB;AAClC,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,kBAAkB,OAAO,MAAM,CAAC;AACtC,oBAAgB,OAAO,OAAO,CAAC;AAC/B,SAAK,eAAe,eAAe;AAAA,EACrC;AAAA,EAEA,cAAc,CAAC,UAAkB;AAC/B,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,cAAc,UAAU,cAAc,KAAK,CAAC;AAClD,gBAAY,KAAK,YAAY,KAAK;AAClC,kBAAc,OAAO,OAAO,GAAG,WAAW;AAC1C,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,0BAA0B,CAAC,UAAkB;AAC3C,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,QAAQ,EAAE,GAAG,cAAc,KAAK,EAAE;AACxC,UAAM,gBAAgB,YAAY,QAAQ,EAAC,GAAG,MAAM,OAAM,IAAI,CAAC;AAC/D,kBAAc,aAAa,cAAc,eAAe,SAAS,YAAY;AAE7E,UAAM,SAAS;AACf,kBAAc,KAAK,IAAI;AACvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAGA,kBAAkB,CAAC,OAAe,QAAgB,UAAkB;AAClE,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAAA,MACrB,GAAG,cAAc,KAAK;AAAA,MACtB,IAAI;AAAA,IACN;AAEA,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,OAAe,UAA8B;AAC7D,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAEvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,aAAuB;AACpC,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,mBAAmB,CAAC,aAAuC;AACzD,UAAM,WAAoC,SAAS,YAAY,CAAC;AAChE,QAAG,SAAS,mBAAmB,MAAM,QAAW;AAC9C,YAAM,eAAe;AAAA,QACnB,GAAG;AAAA,QACH,UAAU;AAAA,UACR,GAAG,SAAS;AAAA,UACZ,qBAAqB;AAAA,QACvB;AAAA,MACF;AACA,aAAO;AAAA,IACT,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,YAAY,CAAC,UAAoC,eAA4C;AAC3F,SAAK,SAAS,EAAC,WAAsB,CAAC;AACtC,eAAW,KAAK,iBAAiB,QAAQ;AACzC,SAAK,eAAe,QAAQ;AAAA,EAC9B;AAAA,EAEA,MAAM,eAAe;AACnB,UAAM,aAAwE,CAAC;AAC/E,eAAU,OAAO,OAAO,KAAK,KAAK,MAAM,SAAS,OAAO,GAAG;AACzD,YAAM,SAAS,KAAK,MAAM,SAAS,QAAQ,GAAG;AAC9C,UAAG,OAAO,SAAS,YAAY,EAAE,SAAS,SAAS;AACjD,mBAAW,GAAG,IAAI,KAAK,MAAM,QAAQ,GAAG,KAAK,EAAC,GAAG,KAAK,MAAM,SAAS,QAAQ,GAAG,EAAC;AACjF,YAAI,WAAW,GAAG,EAAE,WAAW,QAAW;AACxC,qBAAW,GAAG,EAAE,SAAS,CAAC;AAAA,QAC5B;AAAA,MACF,OAAO;AACL,mBAAW,GAAG,IAAI;AAAA,UAChB,MAAM,OAAO;AAAA,UACb,QAAQ,CAAC;AAAA,QACX;AAEA,YAAI,MAAM,OAAO;AAEjB,YAAI;AACF,gBAAM,oBAAoB,KAAM,KAAK,MAAM,QAAQ;AAAA,QACrD,SAAQ,KAAK;AACX,kBAAQ,KAAK,mCAAmC,GAAG;AAAA,QACrD;AAEA,cAAM,kBAAkB,CAAC,SAAa;AACpC,cAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,eAAe,GAAG;AAC/D;AAAA,UACF;AAEA,qBAAU,SAAS,KAAK,eAAe;AACrC,uBAAW,GAAG,EAAE,OAAO,KAAK,MAAM,EAAE;AAAA,UACtC;AAAA,QACF;AAEA,YAAI;AACF,cAAI,IAAK,WAAW,YAAY,GAAG;AACjC,kBAAM,OAAO,MAAO,IAAI,QAAQ,IAAK,UAAU,EAAE,CAAC,EAAG,YAAY,EAAE;AACnE,4BAAgB,IAAI;AAAA,UACtB,OAAO;AACL,kBAAM,WAAW,MAAM,MAAM,KAAM,EAAE,MAAM,OAAO,CAAC;AACnD,kBAAM,OAAO,MAAM,SAAS,KAAK;AACjC,4BAAgB,IAAI;AAAA,UACtB;AAAA,QACF,SAAQ,KAAK;AACX,kBAAQ,MAAM,sCAAsC,GAAG,MAAM,GAAG,EAAE;AAAA,QACpE;AAAA,MACF;AAAA,IACF;AAEA,QAAG,CAAC,QAAQ,KAAK,MAAM,SAAS,UAAU,GAAG;AAC3C,cAAQ,MAAM,mBAAmB,UAAU;AAC3C,WAAK,SAAS;AAAA,QACZ,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,eAAgB;AACd,UAAM,WAAmC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC1E,WAAO,SAAS,mBAAmB,KAAK;AAAA,EAC1C;AAAA,EAEA,cAAc,CAAC,YAMT;AACJ,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,cAAc;AACZ,UAAM,EAAC,UAAU,cAAa,IAAI,KAAK;AAEvC,UAAM,WAAW;AAAA,MACf,UAAW,iBAAiB;AAAA,MAC5B,qBAAqB,CAACC,cAAiC;AACrD,eAAO,MAAM,oBAAoBA,WAAU;AAAA,UACzC,eAAe;AAAA,QACjB,CAAC;AAAA,MACH;AAAA,MACA,cAAc,CAAC,MAAkB;AAC/B,aAAK,aAAa,WAAW,EAAE,GAAG;AAClC,aAAK,aAAa;AAAA,MACpB;AAAA,IACF;AAEA,UAAM,WAAW,KAAK,aAAa;AAEnC,QAAI;AAGJ,QAAG,aAAa,MAAM;AACpB,mBAAa;AAAA,QAAC;AAAA,QAAA;AAAA,UACX,GAAG;AAAA,UACJ,UAAU,KAAK;AAAA,UACf,cAAc,KAAK,MAAM,uBAAuB;AAAA,UAChD,eAAe,CAAC,YAAY,KAAK,cAAc,CAAC,OAAO;AAAA,QAAA;AAAA,MACzD;AAAA,IACF,OAAO;AAEL,mBAAa;AAAA,QAAC;AAAA,QAAA;AAAA,UAAe,GAAG;AAAA,UAC9B,UAAU,KAAK;AAAA,UACf,SAAS,KAAK,MAAM;AAAA,UACpB,oBAAoB,KAAK,MAAM,aAAa;AAAA,UAC5C,kBAAkB,KAAK,MAAM,SAAS,OAAO,KAAK,MAAM,kBAAkB;AAAA,UAC1E,eAAe,KAAK;AAAA,QAAA;AAAA,MAAe;AAAA,IACvC;AAEA,QAAI;AACJ,QAAG,KAAK,MAAM,SAAS,MAAM,UAAU,GAAG;AACxC,mBAAa,KAAK,MAAM,SAAS,QAAQ,YAAY,EAAE;AAAA,IACzD;AACA,UAAM,eAAkC,CAAC;AACzC,QAAI,YAAY;AACd,mBAAa,SAAS,SAAS,UAAU;AAAA,IAC3C;AAEA,WAAO,oBAAC,SAAI,OAAO,cAAc,WAAU,2BAA0B,eAAY,sBAC9E,UAAA,WAAA,CACH;AAAA,EACF;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,EAAC,UAAU,UAAU,OAAM,IAAI,KAAK;AAC1C,UAAM,EAAC,mBAAkB,IAAI,KAAK;AAClC,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,UAAU,KAAK,KAAK,UAAU,QAAQ,CAAC;AAC7C,QAAI,aAAa,IAAI,SAAS,GAAG,OAAO,IAAI,kBAAkB,EAAE;AAEhE,UAAM,aAAa,OAAO,QAAQ,MAAM,EACrC,IAAI,CAAC,CAAC,KAAK,GAAG,MAAO,QAAQ,OAAO,MAAM,IAAK,EAC/C,OAAO,CAAA,QAAO,QAAQ,IAAI;AAE7B,QAAI,WAAW,SAAS,GAAG;AACzB,UAAI,aAAa,IAAI,SAAS,WAAW,KAAK,GAAG,CAAC;AAAA,IACpD,OACK;AACH,UAAI,aAAa,OAAO,OAAO;AAAA,IACjC;AAEA,QAAI,aAAa,OAAO;AACtB,UAAI,aAAa,OAAO,MAAM;AAAA,IAChC,WACS,aAAa,WAAW;AAC/B,UAAI,aAAa,IAAI,QAAQ,SAAS;AAAA,IACxC;AAEA,YAAQ,aAAa,EAAC,mBAAkB,GAAG,YAAY,IAAI,IAAI;AAAA,EACjE;AAAA,EAEA,yBAAyB,CAAC,aAAiC;AACzD,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,aAAa,IAAI,aAAa,IAAI,OAAO;AAE/C,QAAI,cAAc,eAAe,IAAI;AACnC,YAAM,SAAS,WAAW,MAAM,GAAG;AACnC,YAAM,WAAqC,CAAC;AAC5C,aAAO,QAAQ,CAAA,cAAa;AAC1B,iBAAS,SAAS,IAAI;AAAA,MACxB,CAAC;AAED,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,GAAG,KAAK,MAAM;AAAA,UACd,GAAG;AAAA,QACL;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,MAAM;AACxC,QAAI,QAAQ,SAAS,IAAI;AACvB,WAAK,YAAY,IAAgB;AAAA,IACnC;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,OAAO;AACzC,QAAI,MAAM;AACR,UAAI;AACF,cAAM,QAAQ,KAAK,MAAM,GAAG;AAC5B,cAAM,CAAC,SAAS,kBAAkB,IAAI;AAAA,UACpC,MAAM,CAAC;AAAA,UACP,SAAS,MAAM,CAAC,GAAG,EAAE;AAAA,QACvB;AAEA,YAAI,QAAQ;AACZ,YAAI,YAAY,KAAK;AACnB,gBAAM,iBAAiB,KAAK,KAAK,UAAU,QAAQ,CAAC;AACpD,cAAI,mBAAmB,SAAS,SAAS,EAAE,GAAG;AAC5C,oBAAQ;AAAA,UACV;AAAA,QACF;AACA,YAAI,OAAO;AACT,eAAK,SAAS;AAAA,YACZ;AAAA,YACA,yBAAyB,SAAS,OAAO,kBAAkB,EAAE;AAAA,UAC/D,CAAC;AAAA,QACH;AAAA,MACF,SACO,KAAK;AACV,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,UAAkB;AACjC,SAAK,SAAS;AAAA,MACZ,oBAAoB;AAAA,MACpB,yBAAyB,KAAK,MAAM,SAAS,OAAO,KAAK,EAAE;AAAA,IAC7D,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,SAAS,WAAqC,OAAgB;AAC5D,SAAK,SAAS;AAAA,MACZ,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG;AAAA,MACf;AAAA,IACF,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,YAAY,WAAqC;AAC/C,SAAK,SAAS,WAAW,CAAC,KAAK,MAAM,OAAO,SAAS,CAAC;AAAA,EACxD;AAAA,EAEA,kBAAkB,CAAC,eAA4C;AAC7D,SAAK,SAAS,EAAE,WAAW,CAAC;AAAA,EAC9B;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAmB;AAC3F,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAe;AACvF,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,MAAM,SAAS,UAAU,CAAC;AAC9C,UAAM,gBAAgB,OAAO,SAAS,IAAI,OAAO,KAAK,MAAM,kBAAkB,IAAI;AAElF,UAAM,UAAU;AAAA,MAAC;AAAA,MAAA;AAAA,QACf,UAAU,KAAK,aAAa;AAAA,QAC5B,UAAU,KAAK,MAAM;AAAA,QACrB,UAAU,KAAK,MAAM;AAAA,QACrB,oBAAoB,KAAK,MAAM,aAAa;AAAA,QAC5C,SAAS,KAAK,MAAM;AAAA,QACpB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,eAAe,KAAK;AAAA,QACpB,eAAe,CAAC,UAAoC,KAAK,YAAY,KAAK;AAAA,MAAA;AAAA,IAC5E;AAEA,UAAM,aAAa,KAAK,MAAM,OAAO,aAAa;AAAA,MAAC;AAAA,MAAA;AAAA,QACjD,OAAO,KAAK,MAAM;AAAA,QAClB,UAAU,CAACC,WAAU,KAAK,eAAeA,MAAK;AAAA,QAC9C,SAAS,MAAM,KAAK,SAAS,cAAc,KAAK;AAAA,MAAA;AAAA,IAClD,IAAK;AAEL,UAAM,YAAY;AAAA,MAAC;AAAA,MAAA;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,gBAAgB,KAAK;AAAA,QACrB,eAAe,KAAK;AAAA,QACpB,oBAAoB,KAAK,MAAM;AAAA,QAC/B;AAAA,QACA,SAAS,KAAK,MAAM;AAAA,QACpB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,IACrB;AAEA,UAAM,cAAc,gBAAgB;AAAA,MAAC;AAAA,MAAA;AAAA,QAEnC,OAAO;AAAA,QACP,YAAY,KAAK,MAAM;AAAA,QACvB,cAAc,KAAK,MAAM,qBAAqB;AAAA,QAC9C,aAAa,KAAK,MAAM,uBAAuB,KAAK,MAAM,SAAS,OAAO,SAAO;AAAA,QACjF,SAAS,KAAK,MAAM;AAAA,QACpB,cAAc,KAAK,MAAM;AAAA,QACzB,MAAM,KAAK,MAAM;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,iBAAiB,KAAK;AAAA,QACtB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,MAdd,KAAK,MAAM;AAAA,IAelB,IAAK;AAEL,UAAM,cAAe,KAAK,MAAM,OAAO,SAAS,KAAK,MAAM,MAAM,SAAU,IAAI;AAAA,MAAC;AAAA,MAAA;AAAA,QAC9E,cAAc;AAAA,QACd,oBAAoB,KAAK,MAAM;AAAA,QAC/B,eAAe,KAAK;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,QAAQ,KAAK,MAAM;AAAA,QACnB,OAAO,KAAK,MAAM;AAAA,MAAA;AAAA,IACpB,IAAK;AAGL,UAAM,8BAAU,OAAA,EACd,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,aAAa;AAAA,UAC5B,wBAAwB,KAAK,MAAM;AAAA,UACnC,wBAAwB,KAAK,MAAM;AAAA,UACnC,yBAAyB,KAAK;AAAA,UAC9B,yBAAyB,KAAK;AAAA,UAC9B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,OAAO;AAAA,UAC5C,SAAS,KAAK,MAAM;AAAA,QAAA;AAAA,MACtB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,WAAW;AAAA,QAAA;AAAA,MAClD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,0BAA0B,KAAK;AAAA,UAC/B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,UAAU;AAAA,QAAA;AAAA,MACjD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,QAAQ;AAAA,UAC7C,YAAY,KAAK,MAAM;AAAA,UACvB,iBAAiB,KAAK;AAAA,QAAA;AAAA,MACxB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,aAAa,KAAK;AAAA,UAClB,cAAc,MAAM,KAAK,YAAY,MAAM;AAAA,UAC3C,YAAY,KAAK,MAAM;AAAA,QAAA;AAAA,MACzB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,SAAS;AAAA,QAAA;AAAA,MAChD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,aAAa;AAAA,QAAA;AAAA,MACpD;AAAA,IAAA,EAAA,CACF;AAEA,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,KAAK,KAAK,YAAY;AAAA,QACtB,QAAQ;AAAA,QACR;AAAA,MAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8a07c2afbabbb0ad6515959638246d740e8d9d6d"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return fe=function(){return s},s}fe();fe().s[0]++;window.Buffer=Qle.Buffer;function Vw(n,e){fe().f[0]++;const t=(fe().s[1]++,n.match(/\.tilehosting\.com/)),i=(fe().s[2]++,n.match(/\.maptiler\.com/)),r=(fe().s[3]++,n.match(/\.thunderforest\.com/)),o=(fe().s[4]++,n.match(/\.locationiq\.com/));if(fe().s[5]++,fe().b[1][0]++,t||(fe().b[1][1]++,i)){fe().b[0][0]++;const s=(fe().s[6]++,md.getAccessToken("openmaptiles",e,{allowFallback:!0}));if(fe().s[7]++,s)return fe().b[2][0]++,fe().s[8]++,n.replace("{key}",s);fe().b[2][1]++}else if(fe().b[0][1]++,fe().s[9]++,r){fe().b[3][0]++;const s=(fe().s[10]++,md.getAccessToken("thunderforest",e,{allowFallback:!0}));if(fe().s[11]++,s)return fe().b[4][0]++,fe().s[12]++,n.replace("{key}",s);fe().b[4][1]++}else if(fe().b[3][1]++,fe().s[13]++,o){fe().b[5][0]++;const s=(fe().s[14]++,md.getAccessToken("locationiq",e,{allowFallback:!0}));if(fe().s[15]++,s)return fe().b[6][0]++,fe().s[16]++,n.replace("{key}",s);fe().b[6][1]++}else return fe().b[5][1]++,fe().s[17]++,n}function vH(n,e,t){return fe().f[1]++,fe().s[18]++,{...n,$root:{...n.$root,[e]:{...n.$root[e],values:t}}}}class DPe extends On.Component{revisionStore;styleStore=(fe().s[19]++,null);layerWatcher;constructor(e){fe().f[2]++,fe().s[20]++,super(e),fe().s[21]++,this.revisionStore=new SPe,fe().s[22]++,this.configureKeyboardShortcuts(),fe().s[23]++,this.state={errors:[],infos:[],mapStyle:md.emptyStyle,selectedLayerIndex:0,sources:{},vectorLayers:{},mapState:"map",spec:Tr,mapView:{zoom:0,center:{lng:0,lat:0}},isOpen:{settings:!1,sources:!1,open:!1,shortcuts:!1,export:!1,debug:!1,globalState:!1,codeEditor:!1},maplibreGlDebugOptions:{showTileBoundaries:!1,showCollisionBoxes:!1,showOverdrawInspector:!1},openlayersDebugOptions:{debugToolbox:!1},fileHandle:null},fe().s[24]++,this.layerWatcher=new kPe({onVectorLayersChange:t=>(fe().f[3]++,fe().s[25]++,this.setState({vectorLayers:t}))})}configureKeyboardShortcuts=(fe().s[26]++,()=>{fe().f[4]++;const e=(fe().s[27]++,[{key:"?",handler:()=>{fe().f[5]++,fe().s[28]++,this.toggleModal("shortcuts")}},{key:"o",handler:()=>{fe().f[6]++,fe().s[29]++,this.toggleModal("open")}},{key:"e",handler:()=>{fe().f[7]++,fe().s[30]++,this.toggleModal("export")}},{key:"d",handler:()=>{fe().f[8]++,fe().s[31]++,this.toggleModal("sources")}},{key:"s",handler:()=>{fe().f[9]++,fe().s[32]++,this.toggleModal("settings")}},{key:"g",handler:()=>{fe().f[10]++,fe().s[33]++,this.toggleModal("globalState")}},{key:"i",handler:()=>{fe().f[11]++,fe().s[34]++,this.setMapState(this.state.mapState==="map"?(fe().b[7][0]++,"inspect"):(fe().b[7][1]++,"map"))}},{key:"m",handler:()=>{fe().f[12]++,fe().s[35]++,document.querySelector(".maplibregl-canvas").focus()}},{key:"!",handler:()=>{fe().f[13]++,fe().s[36]++,this.toggleModal("debug")}}]);fe().s[37]++,document.body.addEventListener("keyup",t=>{if(fe().f[14]++,fe().s[38]++,t.key==="Escape")fe().b[8][0]++,fe().s[39]++,t.target.blur(),fe().s[40]++,document.body.focus();else if(fe().b[8][1]++,fe().s[41]++,fe().b[10][0]++,this.state.isOpen.shortcuts||(fe().b[10][1]++,document.activeElement===document.body)){fe().b[9][0]++;const i=(fe().s[42]++,e.find(r=>(fe().f[15]++,fe().s[43]++,r.key===t.key)));fe().s[44]++,i?(fe().b[11][0]++,fe().s[45]++,this.setModal("shortcuts",!1),fe().s[46]++,i.handler()):fe().b[11][1]++}else fe().b[9][1]++})});handleKeyPress=(fe().s[47]++,e=>{fe().f[16]++,fe().s[48]++,navigator.platform.toUpperCase().indexOf("MAC")>=0?(fe().b[12][0]++,fe().s[49]++,fe().b[14][0]++,e.metaKey&&(fe().b[14][1]++,e.shiftKey)&&(fe().b[14][2]++,e.keyCode===90)?(fe().b[13][0]++,fe().s[50]++,e.preventDefault(),fe().s[51]++,this.onRedo()):(fe().b[13][1]++,fe().s[52]++,fe().b[16][0]++,e.metaKey&&(fe().b[16][1]++,e.keyCode===90)?(fe().b[15][0]++,fe().s[53]++,e.preventDefault(),fe().s[54]++,this.onUndo()):fe().b[15][1]++)):(fe().b[12][1]++,fe().s[55]++,fe().b[18][0]++,e.ctrlKey&&(fe().b[18][1]++,e.keyCode===90)?(fe().b[17][0]++,fe().s[56]++,e.preventDefault(),fe().s[57]++,this.onUndo()):(fe().b[17][1]++,fe().s[58]++,fe().b[20][0]++,e.ctrlKey&&(fe().b[20][1]++,e.keyCode===89)?(fe().b[19][0]++,fe().s[59]++,e.preventDefault(),fe().s[60]++,this.onRedo()):fe().b[19][1]++))});async componentDidMount(){fe().f[17]++,fe().s[61]++,this.styleStore=await wPe((e,t)=>(fe().f[18]++,fe().s[62]++,this.onStyleChanged(e,t))),fe().s[63]++,window.addEventListener("keydown",this.handleKeyPress)}componentWillUnmount(){fe().f[19]++,fe().s[64]++,window.removeEventListener("keydown",this.handleKeyPress)}saveStyle(e){fe().f[20]++,fe().s[65]++,this.styleStore?.save(e)}updateFonts(e){fe().f[21]++;const t=(fe().s[66]++,fe().b[21][0]++,this.state.mapStyle.metadata||(fe().b[21][1]++,{})),i=(fe().s[67]++,fe().b[22][0]++,t["maputnik:openmaptiles_access_token"]||(fe().b[22][1]++,xse.openmaptiles)),r=(fe().s[68]++,typeof e=="string"?(fe().b[23][0]++,e.replace("{key}",i)):(fe().b[23][1]++,e));fe().s[69]++,cPe(r).then(o=>{fe().f[22]++,fe().s[70]++,this.setState({spec:vH(this.state.spec,"glyphs",o)})})}updateIcons(e){fe().f[23]++,fe().s[71]++,APe(e).then(t=>{fe().f[24]++,fe().s[72]++,this.setState({spec:vH(this.state.spec,"sprite",t)})})}onChangeMetadataProperty=(fe().s[73]++,(e,t)=>{fe().f[25]++,fe().s[74]++,fe().b[25][0]++,e==="maputnik:renderer"&&(fe().b[25][1]++,t!==Vle(this.state.mapStyle,["metadata","maputnik:renderer"],"mlgljs"))?(fe().b[24][0]++,fe().s[75]++,this.setState({mapState:"map"})):fe().b[24][1]++;const i=(fe().s[76]++,{...this.state.mapStyle,metadata:{...this.state.mapStyle.metadata,[e]:t}});fe().s[77]++,this.onStyleChanged(i)});onStyleChanged=(fe().s[78]++,(e,t=(fe().b[26][0]++,{}))=>{fe().f[26]++,fe().s[79]++,t={save:!0,addRevision:!0,initialLoad:!1,...t},fe().s[80]++,fe().b[28][0]++,e.glyphs&&(fe().b[28][1]++,typeof e.glyphs=="string")?(fe().b[27][0]++,fe().s[81]++,e.glyphs=Vw(e.glyphs,e)):fe().b[27][1]++,fe().s[82]++,fe().b[30][0]++,e.sprite&&(fe().b[30][1]++,typeof e.sprite=="string")?(fe().b[29][0]++,fe().s[83]++,e.sprite=Vw(e.sprite,e)):fe().b[29][1]++,fe().s[84]++;for(const[a,c]of Object.entries(e.sources))fe().s[85]++,fe().b[32][0]++,c&&(fe().b[32][1]++,"url"in c)&&(fe().b[32][2]++,typeof c.url=="string")?(fe().b[31][0]++,fe().s[86]++,c.url=Vw(c.url,e)):fe().b[31][1]++;fe().s[87]++,t.initialLoad?(fe().b[33][0]++,fe().s[88]++,this.getInitialStateFromUrl(e)):fe().b[33][1]++;const i=(fe().s[89]++,fe().b[34][0]++,yd(e)||(fe().b[34][1]++,[])),r=(fe().s[90]++,[]);if(fe().s[91]++,fe().b[36][0]++,e&&(fe().b[36][1]++,e.layers)){fe().b[35][0]++;const a=(fe().s[92]++,new window.Map);fe().s[93]++,e.layers.forEach((c,f)=>{if(fe().f[27]++,fe().s[94]++,fe().b[38][0]++,c.id===""&&(fe().b[38][1]++,a.has(c.id))){fe().b[37][0]++;const y=(fe().s[95]++,new Error(`layers[${f}]: duplicate layer id [empty_string], previously used`));fe().s[96]++,r.push(y)}else fe().b[37][1]++;fe().s[97]++,a.set(c.id,!0)})}else fe().b[35][1]++;const o=(fe().s[98]++,r.concat(i).map(a=>{fe().f[28]++;const c=(fe().s[99]++,a.message.match(/layers\[(\d+)\]: (duplicate layer id "?(.*)"?, previously used)/));if(fe().s[100]++,c){fe().b[39][0]++;const[,_,E]=(fe().s[101]++,c);return fe().s[102]++,{message:a.message,parsed:{type:"layer",data:{index:parseInt(_,10),key:"id",message:E}}}}else fe().b[39][1]++;const f=(fe().s[103]++,a.message.match(/layers\[(\d+)\]: (source "(?:.*)" not found)/));if(fe().s[104]++,f){fe().b[40][0]++;const[,_,E]=(fe().s[105]++,f);return fe().s[106]++,{message:a.message,parsed:{type:"layer",data:{index:parseInt(_,10),key:"source",message:E}}}}else fe().b[40][1]++;const y=(fe().s[107]++,a.message.match(/layers\[(\d+)\]\.(?:(\S+)\.)?(\S+): (.*)/));if(fe().s[108]++,y){fe().b[41][0]++;const[,_,E,I,P]=(fe().s[109]++,y),K=(fe().s[110]++,fe().b[43][0]++,E&&(fe().b[43][1]++,I)?(fe().b[42][0]++,[E,I].join(".")):(fe().b[42][1]++,I));return fe().s[111]++,{message:a.message,parsed:{type:"layer",data:{index:parseInt(_,10),key:K,message:P}}}}else return fe().b[41][1]++,fe().s[112]++,{message:a.message}}));let s=(fe().s[113]++,void 0);if(fe().s[114]++,i.length>0){fe().b[44][0]++,fe().s[115]++,s=OF(e),fe().s[116]++;for(const a of i){const{message:c}=(fe().s[117]++,a);if(fe().s[118]++,c){fe().b[45][0]++,fe().s[119]++;try{const f=(fe().s[120]++,c.split(":")[0]),y=(fe().s[121]++,f.match(/^\S+?\[\d+\]\.[^[]+/)[0]);fe().s[122]++,UM.unset(s,y)}catch(f){fe().s[123]++,console.warn(c+" "+f)}}else fe().b[45][1]++}}else fe().b[44][1]++;fe().s[124]++,e.glyphs!==this.state.mapStyle.glyphs?(fe().b[46][0]++,fe().s[125]++,this.updateFonts(e.glyphs)):fe().b[46][1]++,fe().s[126]++,e.sprite!==this.state.mapStyle.sprite?(fe().b[47][0]++,fe().s[127]++,this.updateIcons(e.sprite)):fe().b[47][1]++,fe().s[128]++,t.addRevision?(fe().b[48][0]++,fe().s[129]++,this.revisionStore.addRevision(e)):fe().b[48][1]++,fe().s[130]++,t.save?(fe().b[49][0]++,fe().s[131]++,this.saveStyle(e)):fe().b[49][1]++,fe().s[132]++,this.setState({mapStyle:e,dirtyMapStyle:s,errors:o},()=>{fe().f[29]++,fe().s[133]++,this.fetchSources(),fe().s[134]++,this.setStateInUrl()})});onUndo=(fe().s[135]++,()=>{fe().f[30]++;const e=(fe().s[136]++,this.revisionStore.undo()),t=(fe().s[137]++,hPe(this.state.mapStyle,e));fe().s[138]++,this.onStyleChanged(e,{addRevision:!1}),fe().s[139]++,this.setState({infos:t})});onRedo=(fe().s[140]++,()=>{fe().f[31]++;const e=(fe().s[141]++,this.revisionStore.redo()),t=(fe().s[142]++,dPe(this.state.mapStyle,e));fe().s[143]++,this.onStyleChanged(e,{addRevision:!1}),fe().s[144]++,this.setState({infos:t})});onMoveLayer=(fe().s[145]++,e=>{fe().f[32]++;let{oldIndex:t,newIndex:i}=(fe().s[146]++,e),r=(fe().s[147]++,this.state.mapStyle.layers);if(fe().s[148]++,t=TF(t,0,r.length-1),fe().s[149]++,i=TF(i,0,r.length-1),fe().s[150]++,t===i){fe().b[50][0]++,fe().s[151]++;return}else fe().b[50][1]++;fe().s[152]++,t===this.state.selectedLayerIndex?(fe().b[51][0]++,fe().s[153]++,this.setState({selectedLayerIndex:i})):fe().b[51][1]++,fe().s[154]++,r=r.slice(0),fe().s[155]++,Zle(r,t,i),fe().s[156]++,this.onLayersChange(r)});onLayersChange=(fe().s[157]++,e=>{fe().f[33]++;const t=(fe().s[158]++,{...this.state.mapStyle,layers:e});fe().s[159]++,this.onStyleChanged(t)});onLayerDestroy=(fe().s[160]++,e=>{fe().f[34]++;const t=(fe().s[161]++,this.state.mapStyle.layers),i=(fe().s[162]++,t.slice(0));fe().s[163]++,i.splice(e,1),fe().s[164]++,this.onLayersChange(i)});onLayerCopy=(fe().s[165]++,e=>{fe().f[35]++;const t=(fe().s[166]++,this.state.mapStyle.layers),i=(fe().s[167]++,t.slice(0)),r=(fe().s[168]++,OF(i[e]));fe().s[169]++,r.id=r.id+"-copy",fe().s[170]++,i.splice(e,0,r),fe().s[171]++,this.onLayersChange(i)});onLayerVisibilityToggle=(fe().s[172]++,e=>{fe().f[36]++;const t=(fe().s[173]++,this.state.mapStyle.layers),i=(fe().s[174]++,t.slice(0)),r=(fe().s[175]++,{...i[e]}),o=(fe().s[176]++,"layout"in r?(fe().b[52][0]++,{...r.layout}):(fe().b[52][1]++,{}));fe().s[177]++,o.visibility=o.visibility==="none"?(fe().b[53][0]++,"visible"):(fe().b[53][1]++,"none"),fe().s[178]++,r.layout=o,fe().s[179]++,i[e]=r,fe().s[180]++,this.onLayersChange(i)});onLayerIdChange=(fe().s[181]++,(e,t,i)=>{fe().f[37]++;const r=(fe().s[182]++,this.state.mapStyle.layers.slice(0));fe().s[183]++,r[e]={...r[e],id:i},fe().s[184]++,this.onLayersChange(r)});onLayerChanged=(fe().s[185]++,(e,t)=>{fe().f[38]++;const i=(fe().s[186]++,this.state.mapStyle.layers.slice(0));fe().s[187]++,i[e]=t,fe().s[188]++,this.onLayersChange(i)});setMapState=(fe().s[189]++,e=>{fe().f[39]++,fe().s[190]++,this.setState({mapState:e},this.setStateInUrl)});setDefaultValues=(fe().s[191]++,e=>{fe().f[40]++;const t=(fe().s[192]++,fe().b[54][0]++,e.metadata||(fe().b[54][1]++,{}));if(fe().s[193]++,t["maputnik:renderer"]===void 0){fe().b[55][0]++;const i=(fe().s[194]++,{...e,metadata:{...e.metadata,"maputnik:renderer":"mlgljs"}});return fe().s[195]++,i}else return fe().b[55][1]++,fe().s[196]++,e});openStyle=(fe().s[197]++,(e,t)=>{fe().f[41]++,fe().s[198]++,this.setState({fileHandle:t}),fe().s[199]++,e=this.setDefaultValues(e),fe().s[200]++,this.onStyleChanged(e)});async fetchSources(){fe().f[42]++;const e=(fe().s[201]++,{});fe().s[202]++;for(const t of Object.keys(this.state.mapStyle.sources)){const i=(fe().s[203]++,this.state.mapStyle.sources[t]);if(fe().s[204]++,fe().b[57][0]++,i.type!=="vector"||(fe().b[57][1]++,!("url"in i)))fe().b[56][0]++,fe().s[205]++,e[t]=(fe().b[58][0]++,this.state.sources[t]||(fe().b[58][1]++,{...this.state.mapStyle.sources[t]})),fe().s[206]++,e[t].layers===void 0?(fe().b[59][0]++,fe().s[207]++,e[t].layers=[]):fe().b[59][1]++;else{fe().b[56][1]++,fe().s[208]++,e[t]={type:i.type,layers:[]};let r=(fe().s[209]++,i.url);fe().s[210]++;try{fe().s[211]++,r=Vw(r,this.state.mapStyle)}catch(s){fe().s[212]++,console.warn("Failed to setFetchAccessToken: ",s)}fe().s[213]++;const o=s=>{if(fe().f[43]++,fe().s[214]++,Object.prototype.hasOwnProperty.call(s,"vector_layers"))fe().b[60][1]++;else{fe().b[60][0]++,fe().s[215]++;return}fe().s[216]++;for(const a of s.vector_layers)fe().s[217]++,e[t].layers.push(a.id)};fe().s[218]++;try{if(fe().s[219]++,r.startsWith("pmtiles://")){fe().b[61][0]++;const s=(fe().s[220]++,await new f9(r.substring(10)).getTileJson(""));fe().s[221]++,o(s)}else{fe().b[61][1]++;const s=(fe().s[222]++,await fetch(r,{mode:"cors"})),a=(fe().s[223]++,await s.json());fe().s[224]++,o(a)}}catch(s){fe().s[225]++,console.error(`Failed to process source for url: '${r}', ${s}`)}}}fe().s[226]++,XR(this.state.sources,e)?fe().b[62][1]++:(fe().b[62][0]++,fe().s[227]++,console.debug("Setting sources",e),fe().s[228]++,this.setState({sources:e}))}_getRenderer(){fe().f[44]++;const e=(fe().s[229]++,fe().b[63][0]++,this.state.mapStyle.metadata||(fe().b[63][1]++,{}));return fe().s[230]++,fe().b[64][0]++,e["maputnik:renderer"]||(fe().b[64][1]++,"mlgljs")}onMapChange=(fe().s[231]++,e=>{fe().f[45]++,fe().s[232]++,this.setState({mapView:e})});mapRenderer(){fe().f[46]++;const{mapStyle:e,dirtyMapStyle:t}=(fe().s[233]++,this.state),i=(fe().s[234]++,{mapStyle:(fe().b[65][0]++,t||(fe().b[65][1]++,e)),replaceAccessTokens:c=>(fe().f[47]++,fe().s[235]++,md.replaceAccessTokens(c,{allowFallback:!0})),onDataChange:c=>{fe().f[48]++,fe().s[236]++,this.layerWatcher.analyzeMap(c.map),fe().s[237]++,this.fetchSources()}}),r=(fe().s[238]++,this._getRenderer());let o;fe().s[239]++,r==="ol"?(fe().b[66][0]++,fe().s[240]++,o=te.jsx($Ce,{...i,onChange:this.onMapChange,debugToolbox:this.state.openlayersDebugOptions.debugToolbox,onLayerSelect:c=>(fe().f[49]++,fe().s[241]++,this.onLayerSelect(+c))})):(fe().b[66][1]++,fe().s[242]++,o=te.jsx(ppe,{...i,onChange:this.onMapChange,options:this.state.maplibreGlDebugOptions,inspectModeEnabled:this.state.mapState==="inspect",highlightedLayer:this.state.mapStyle.layers[this.state.selectedLayerIndex],onLayerSelect:this.onLayerSelect}));let s;fe().s[243]++,this.state.mapState.match(/^filter-/)?(fe().b[67][0]++,fe().s[244]++,s=this.state.mapState.replace(/^filter-/,"")):fe().b[67][1]++;const a=(fe().s[245]++,{});return fe().s[246]++,s?(fe().b[68][0]++,fe().s[247]++,a.filter=`url('#${s}')`):fe().b[68][1]++,fe().s[248]++,te.jsx("div",{style:a,className:"maputnik-map__container","data-wd-key":"maplibre:container",children:o})}setStateInUrl=(fe().s[249]++,()=>{fe().f[50]++;const{mapState:e,mapStyle:t,isOpen:i}=(fe().s[250]++,this.state),{selectedLayerIndex:r}=(fe().s[251]++,this.state),o=(fe().s[252]++,new URL(location.href)),s=(fe().s[253]++,KF(JSON.stringify(t)));fe().s[254]++,o.searchParams.set("layer",`${s}~${r}`);const a=(fe().s[255]++,Object.entries(i).map(([c,f])=>(fe().f[51]++,fe().s[256]++,f===!0?(fe().b[69][0]++,c):(fe().b[69][1]++,null))).filter(c=>(fe().f[52]++,fe().s[257]++,c!==null)));fe().s[258]++,a.length>0?(fe().b[70][0]++,fe().s[259]++,o.searchParams.set("modal",a.join(","))):(fe().b[70][1]++,fe().s[260]++,o.searchParams.delete("modal")),fe().s[261]++,e==="map"?(fe().b[71][0]++,fe().s[262]++,o.searchParams.delete("view")):(fe().b[71][1]++,fe().s[263]++,e==="inspect"?(fe().b[72][0]++,fe().s[264]++,o.searchParams.set("view","inspect")):fe().b[72][1]++),fe().s[265]++,history.replaceState({selectedLayerIndex:r},"Maputnik",o.href)});getInitialStateFromUrl=(fe().s[266]++,e=>{fe().f[53]++;const t=(fe().s[267]++,new URL(location.href)),i=(fe().s[268]++,t.searchParams.get("modal"));if(fe().s[269]++,fe().b[74][0]++,i&&(fe().b[74][1]++,i!=="")){fe().b[73][0]++;const s=(fe().s[270]++,i.split(",")),a=(fe().s[271]++,{});fe().s[272]++,s.forEach(c=>{fe().f[54]++,fe().s[273]++,a[c]=!0}),fe().s[274]++,this.setState({isOpen:{...this.state.isOpen,...a}})}else fe().b[73][1]++;const r=(fe().s[275]++,t.searchParams.get("view"));fe().s[276]++,fe().b[76][0]++,r&&(fe().b[76][1]++,r!=="")?(fe().b[75][0]++,fe().s[277]++,this.setMapState(r)):fe().b[75][1]++;const o=(fe().s[278]++,t.searchParams.get("layer"));if(fe().s[279]++,o){fe().b[77][0]++,fe().s[280]++;try{const s=(fe().s[281]++,o.split("~")),[a,c]=(fe().s[282]++,[s[0],parseInt(s[1],10)]);let f=(fe().s[283]++,!0);if(fe().s[284]++,a!=="-"){fe().b[78][0]++;const y=(fe().s[285]++,KF(JSON.stringify(e)));fe().s[286]++,y!==parseInt(a,10)?(fe().b[79][0]++,fe().s[287]++,f=!1):fe().b[79][1]++}else fe().b[78][1]++;fe().s[288]++,f?(fe().b[80][0]++,fe().s[289]++,this.setState({selectedLayerIndex:c,selectedLayerOriginalId:e.layers[c].id})):fe().b[80][1]++}catch(s){fe().s[290]++,console.warn(s)}}else fe().b[77][1]++});onLayerSelect=(fe().s[291]++,e=>{fe().f[55]++,fe().s[292]++,this.setState({selectedLayerIndex:e,selectedLayerOriginalId:this.state.mapStyle.layers[e].id},this.setStateInUrl)});setModal(e,t){fe().f[56]++,fe().s[293]++,this.setState({isOpen:{...this.state.isOpen,[e]:t}},this.setStateInUrl)}toggleModal(e){fe().f[57]++,fe().s[294]++,this.setModal(e,!this.state.isOpen[e])}onSetFileHandle=(fe().s[295]++,e=>{fe().f[58]++,fe().s[296]++,this.setState({fileHandle:e})});onChangeOpenlayersDebug=(fe().s[297]++,(e,t)=>{fe().f[59]++,fe().s[298]++,this.setState({openlayersDebugOptions:{...this.state.openlayersDebugOptions,[e]:t}})});onChangeMaplibreGlDebug=(fe().s[299]++,(e,t)=>{fe().f[60]++,fe().s[300]++,this.setState({maplibreGlDebugOptions:{...this.state.maplibreGlDebugOptions,[e]:t}})});render(){fe().f[61]++;const e=(fe().s[301]++,fe().b[81][0]++,this.state.mapStyle.layers||(fe().b[81][1]++,[])),t=(fe().s[302]++,e.length>0?(fe().b[82][0]++,e[this.state.selectedLayerIndex]):(fe().b[82][1]++,void 0)),i=(fe().s[303]++,te.jsx(mRe,{renderer:this._getRenderer(),mapState:this.state.mapState,mapStyle:this.state.mapStyle,inspectModeEnabled:this.state.mapState==="inspect",sources:this.state.sources,onStyleChanged:this.onStyleChanged,onStyleOpen:this.onStyleChanged,onSetMapState:this.setMapState,onToggleModal:f=>(fe().f[62]++,fe().s[304]++,this.toggleModal(f))})),r=(fe().s[305]++,this.state.isOpen.codeEditor?(fe().b[83][0]++,te.jsx(Dwe,{value:this.state.mapStyle,onChange:f=>(fe().f[63]++,fe().s[306]++,this.onStyleChanged(f)),onClose:()=>(fe().f[64]++,fe().s[307]++,this.setModal("codeEditor",!1))})):(fe().b[83][1]++,void 0)),o=(fe().s[308]++,te.jsx(_7e,{onMoveLayer:this.onMoveLayer,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayersChange:this.onLayersChange,onLayerSelect:this.onLayerSelect,selectedLayerIndex:this.state.selectedLayerIndex,layers:e,sources:this.state.sources,errors:this.state.errors})),s=(fe().s[309]++,t?(fe().b[84][0]++,te.jsx($De,{layer:t,layerIndex:this.state.selectedLayerIndex,isFirstLayer:this.state.selectedLayerIndex<1,isLastLayer:this.state.selectedLayerIndex===this.state.mapStyle.layers.length-1,sources:this.state.sources,vectorLayers:this.state.vectorLayers,spec:this.state.spec,onMoveLayer:this.onMoveLayer,onLayerChanged:this.onLayerChanged,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayerIdChange:this.onLayerIdChange,errors:this.state.errors},this.state.selectedLayerOriginalId)):(fe().b[84][1]++,void 0)),a=(fe().s[310]++,this.state.errors.length+this.state.infos.length>0?(fe().b[85][0]++,te.jsx(bRe,{currentLayer:t,selectedLayerIndex:this.state.selectedLayerIndex,onLayerSelect:this.onLayerSelect,mapStyle:this.state.mapStyle,errors:this.state.errors,infos:this.state.infos})):(fe().b[85][1]++,void 0)),c=(fe().s[311]++,te.jsxs("div",{children:[te.jsx(aPe,{renderer:this._getRenderer(),maplibreGlDebugOptions:this.state.maplibreGlDebugOptions,openlayersDebugOptions:this.state.openlayersDebugOptions,onChangeMaplibreGlDebug:this.onChangeMaplibreGlDebug,onChangeOpenlayersDebug:this.onChangeOpenlayersDebug,isOpen:this.state.isOpen.debug,onOpenToggle:()=>(fe().f[65]++,fe().s[312]++,this.toggleModal("debug")),mapView:this.state.mapView}),te.jsx(oPe,{isOpen:this.state.isOpen.shortcuts,onOpenToggle:()=>(fe().f[66]++,fe().s[313]++,this.toggleModal("shortcuts"))}),te.jsx(MRe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,onChangeMetadataProperty:this.onChangeMetadataProperty,isOpen:this.state.isOpen.settings,onOpenToggle:()=>(fe().f[67]++,fe().s[314]++,this.toggleModal("settings"))}),te.jsx(DRe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.export,onOpenToggle:()=>(fe().f[68]++,fe().s[315]++,this.toggleModal("export")),fileHandle:this.state.fileHandle,onSetFileHandle:this.onSetFileHandle}),te.jsx(iPe,{isOpen:this.state.isOpen.open,onStyleOpen:this.openStyle,onOpenToggle:()=>(fe().f[69]++,fe().s[316]++,this.toggleModal("open")),fileHandle:this.state.fileHandle}),te.jsx(XRe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.sources,onOpenToggle:()=>(fe().f[70]++,fe().s[317]++,this.toggleModal("sources"))}),te.jsx(uPe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.globalState,onOpenToggle:()=>(fe().f[71]++,fe().s[318]++,this.toggleModal("globalState"))})]}));return fe().s[319]++,te.jsx(yRe,{toolbar:i,layerList:o,layerEditor:s,codeEditor:r,map:this.mapRenderer(),bottom:a,modals:c})}}const RPe=xH.createRoot(document.querySelector("#app"));RPe.render(te.jsx(Xx.Provider,{value:{className:"react-icons"},children:te.jsx(DPe,{})}));document.querySelector(".loading").style.display="none";
//# sourceMappingURL=index-BKqi-d2c.js.map
